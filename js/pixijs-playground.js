window.require = require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function() {
  var Console, Iced, Spine, inspect,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice;

  Spine = require("spine");

  Iced = require('iced-coffee-script');

  inspect = require("util").inspect;

  Console = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Console, _super);

    Console.prototype.logPrefix = "(Playground:Console)";

    DEFAULT_SETTINGS = {
      lastVariable: '$_',
      maxLines: 8,
      maxDepth: 2,
      showHidden: false,
      colorize: false
    };

    Console.prototype.elements = {
      "button.refresh-console": "buttonRefreshConsole"
    };

    Console.prototype.addToHistory = function(s) {
      this.history.unshift(s);
      return this.historyi = -1;
    };

    Console.prototype.addToSaved = function(s) {
      this.saved += s.slice(0, -1) === '\\' ? s.slice(0, -1) : s;
      this.saved += '\n';
      return this.addToHistory(s);
    };

    Console.prototype.handleKeypress = function(e) {
      var input;
      switch (e.which) {
        case 13:
          e.preventDefault();
          input = this.input.val();
          if (input) {
            this.addToSaved(input);
            if (input.slice(0, -1) !== '\\' && !this.multiline) {
              return this.processSaved();
            }
          }
          break;
        case 27:
          e.preventDefault();
          input = this.input.val();
          if (input && this.multiline && this.saved) {
            input = this.input.val();
            this.addToSaved(input);
            this.processSaved();
          } else if (this.multiline && this.saved) {
            this.processSaved();
          }
          return this.multiline = !this.multiline;
        case 38:
          e.preventDefault();
          if (this.historyi < this.history.length - 1) {
            this.historyi += 1;
            return this.input.val(this.history[this.historyi]);
          }
          break;
        case 40:
          e.preventDefault();
          if (this.historyi > 0) {
            this.historyi += -1;
            return this.input.val(this.history[this.historyi]);
          }
      }
    };

    Console.prototype.mouseenterConsoleRefresh = function() {
      return this.buttonRefreshConsole.fadeIn(180);
    };

    Console.prototype.mouseenterKeepConsoleRefresh = function() {
      return this.buttonRefreshConsole.stop(true).fadeTo(1, 1);
    };

    Console.prototype.mouseleaveConsoleRefresh = function() {
      return this.buttonRefreshConsole.fadeOut(180);
    };

    Console.prototype.events = {
      "mouseenter aside#output": "mouseenterConsoleRefresh",
      "mouseenter button.refresh-console": "mouseenterKeepConsoleRefresh",
      "mouseleave aside#output": "mouseleaveConsoleRefresh"
    };

    function Console(options, settings) {
      var k, v, _ref;
      if (settings == null) {
        settings = {};
      }
      this.printValue = __bind(this.printValue, this);
      this.print = __bind(this.print, this);
      this.handleKeypress = __bind(this.handleKeypress, this);
      this.addToSaved = __bind(this.addToSaved, this);
      this.addToHistory = __bind(this.addToHistory, this);
      this.history = [];
      this.historyi = -1;
      this.saved = '';
      this.multiline = false;
      Console.__super__.constructor.apply(this, arguments);
      this.input.keydown(this.handleKeypress);
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
    }

    Console.prototype.lang = function(name) {
      if (name) {
        return this._lang = name;
      } else {
        return this._lang;
      }
    };

    Console.prototype.processSaved = function() {
      var compiled, e, value;
      try {
        compiled = (function() {
          switch (this.lang()) {
            case "coffee":
              return Iced.compile(this.saved, {
                bare: true
              });
            case "vanilla":
              return this.saved;
          }
        }).call(this);
        value = eval.call(window, compiled);
        window[this.settings.lastVariable] = value;
        return this.printValue(value);
      } catch (_error) {
        e = _error;
        return this.printCompileError(e);
      } finally {
        this.saved = '';
      }
    };

    Console.prototype.print = function() {
      var args, o, s;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      s = args.join(' ') || ' ';
      o = this.el.html() + s + '\n';
      this.html(o.split('\n').slice(-this.settings.maxLines).join('\n'));
      return void 0;
    };

    Console.prototype.printValue = function(value) {
      return this.print(inspect(value, this.settings.showHidden, this.settings.maxDepth, this.settings.colorize));
    };

    Console.prototype.printCompileError = function(e) {
      var output;
      if (e.stack) {
        output = e.stack;
      }
      if ((output != null ? output.split('\n')[0] : void 0) !== e.toString()) {
        output = "" + (e.toString()) + "\n" + e.stack;
      } else {
        output = e.toString();
      }
      return this.print(output);
    };

    return Console;

  })(Spine.Controller);

  module.exports = Console;

}).call(this);


},{"iced-coffee-script":"iced-coffee-script","spine":"spine","util":43}],2:[function(require,module,exports){
(function() {
  var CodeMirror, Editor, FileQueue, Iced, IcedMirror, Spine, capitalize, iced, js2coffee, __iced_k, __iced_k_noop,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = require('spine');

  Iced = require('iced-coffee-script');

  CodeMirror = require("codemirror");

  IcedMirror = require("codemirror-iced-coffee-script");

  js2coffee = require("js2coffee/dist/js2coffee");

  FileQueue = require('../lib/filequeue');

  capitalize = function(str) {
    return str[0].toUpperCase() + str.slice(1);
  };

  Editor = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Editor, _super);

    Editor.prototype.logPrefix = "(Playground:Editor)";

    DEFAULT_SETTINGS = {
      lastVariable: '$_'
    };

    Editor.prototype.elements = {
      "nav.sandbox": "navSandbox",
      "textarea.sandbox": "placeholder",
      "footer": "footer",
      "aside#help": "help"
    };

    Editor.prototype.toggleHelp = function() {
      if (this.help.is(":visible")) {
        return this.help.fadeOut(300);
      } else {
        return this.help.fadeIn(300);
      }
    };

    Editor.prototype.saveSettings = function() {
      var input;
      input = this.val();
      this.addToSaved(input);
      return localStorage.settings = JSON.stringify($.extend({}, this.settings, {
        assets: window.assets,
        script: this.saved
      }));
    };

    Editor.prototype.runOrStopUserScript = function(e) {
      var button;
      button = $(e.target).closest('button');
      if (button.is(".selected")) {
        this.stopUserScript();
        button.text("run!");
      } else {
        this.runUserScript();
        button.text("stop!");
      }
      return button.toggleClass("selected");
    };

    Editor.prototype.runUserScript = function() {
      var input;
      if (!(input = this.val())) {
        return;
      }
      this.addToSaved(input);
      return this.processSaved();
    };

    Editor.prototype.stopUserScript = function() {
      return window.cancelAnimationFrame(window.frame);
    };

    Editor.prototype.processSaved = function() {
      var compiled, e, value;
      this.trigger("presave");
      try {
        compiled = (function() {
          switch (this.lang()) {
            case "coffee":
              return this.compileIced(this.saved);
            case "vanilla":
              return this.saved;
          }
        }).call(this);
        value = eval.call(window, compiled);
        window[this.settings.lastVariable] = value;
        this.console.printValue(value);
      } catch (_error) {
        e = _error;
        this.console.printCompileError(e);
      }
      return this.saved = '';
    };

    Editor.prototype.addToHistory = function(s) {
      this.history.unshift(s);
      return this.historyi = -1;
    };

    Editor.prototype.addToSaved = function(s) {
      this.saved += s.slice(0, -1) === '\\' ? s.slice(0, -1) : s;
      this.saved += '\n';
      return this.addToHistory(s);
    };

    Editor.prototype.mouseenterExampleNav = function() {
      return this.navSandbox.fadeIn(180);
    };

    Editor.prototype.mouseenterKeepExampleNav = function() {
      return this.navSandbox.stop(true).fadeTo(1, 1);
    };

    Editor.prototype.mouseleaveExampleNav = function() {
      return this.navSandbox.fadeOut(180);
    };

    Editor.prototype.switchLang = function(e) {
      var el;
      el = $(e.target).closest('button');
      if (el.is(".selected")) {
        return;
      }
      if (((el.is(".langswitch-coffee")) && this.switchToCoffee()) || this.switchToVanilla()) {
        return el.addClass("selected").siblings().removeClass("selected");
      }
    };

    Editor.prototype.lang = function(name) {
      if (name) {
        return this.trigger("langchange", this._lang = name);
      } else {
        return this._lang;
      }
    };

    Editor.prototype.events = {
      "click button.help": "toggleHelp",
      "click button.save": "saveSettings",
      "click button.run": "runOrStopUserScript",
      "click button.refresh-example": "refreshExample",
      "mouseenter .CodeMirror": "mouseenterExampleNav",
      "mouseenter nav.sandbox": "mouseenterKeepExampleNav",
      "mouseleave .CodeMirror": "mouseleaveExampleNav",
      "click button.langswitch-coffee": "switchLang",
      "click button.langswitch-vanilla": "switchLang",
      "dragover footer": "fileDragHover",
      "dragleave footer": "fileDragHover",
      "drop footer": "fileSelectHandler"
    };

    function Editor(options, settings) {
      var k, v, _ref;
      if (settings == null) {
        settings = {};
      }
      this.addToSaved = __bind(this.addToSaved, this);
      this.addToHistory = __bind(this.addToHistory, this);
      this.history = [];
      this.historyi = -1;
      this.saved = '';
      Editor.__super__.constructor.apply(this, arguments);
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
          switch (k) {
            case "assets":
            case "userscripts":
              window[k] = v;
          }
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
      CodeMirror.keyMap.tabSpace = {
        fallthrough: ['default'],
        Tab: function(cm) {
          var spaces;
          spaces = Array(cm.getOption("indentUnit") + 1).join(" ");
          return cm.replaceSelection(spaces, "end", "+input");
        }
      };
      this.codemirror || (this.codemirror = CodeMirror.fromTextArea(this.placeholder[0], {
        mode: "icedcoffeescript",
        theme: "monokai",
        lineNumbers: true,
        tabSize: 2,
        keyMap: "tabSpace"
      }));
      this.wrapper = $(this.codemirror.getWrapperElement());
      this.wrapper.addClass("sandbox");
      if (this.settings.script) {
        this.val(this.settings.script);
        this.scrollToEnd();
      }
    }

    Editor.prototype.render = function(examplename) {
      return this.loadExample(examplename);
    };

    Editor.prototype.val = function(value) {
      if (value) {
        return this.codemirror.doc.setValue("" + value + "\n\n\n\n");
      } else {
        return this.codemirror.doc.getValue();
      }
    };

    Editor.prototype.loadExample = function(name) {
      var example, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.example = name;
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.loadExample"
          });
          _this.examples[name](__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return example = arguments[0];
              };
            })(),
            lineno: 150
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          _this.val(example);
          return _this.scrollToEnd();
        };
      })(this));
    };

    Editor.prototype.scrollToEnd = function() {
      return this.codemirror.scrollIntoView(this.codemirror.doc.lineCount() - 1);
    };

    Editor.prototype.refreshExample = function() {
      return this.loadExample(this.example);
    };

    Editor.prototype.clear = function() {
      return this.val("");
    };

    Editor.prototype.compileIced = function(source) {
      return Iced.compile(source, {
        bare: true,
        runtime: "inline"
      });
    };

    Editor.prototype.switchToVanilla = function() {
      var compiled, e, input;
      if (!(input = this.val())) {
        this.lang("vanilla");
        return true;
      }
      try {
        compiled = this.compileIced(input);
        this.val(compiled);
        this.lang("vanilla");
        return true;
      } catch (_error) {
        e = _error;
        this.console.printCompileError(e);
        return false;
      }
    };

    Editor.prototype.switchToCoffee = function() {
      var compiled, e, input, output;
      if (!(input = this.val())) {
        this.lang("coffee");
        return true;
      }
      try {
        compiled = js2coffee.build(input, {
          show_src_lineno: true,
          indent: "  "
        });
        this.val("" + compiled.code);
        this.lang("coffee");
        return true;
      } catch (_error) {
        e = _error;
        output = this.console.printCompileError(e);
        this.print(output);
        return false;
      }
    };

    Editor.prototype.fileDragHover = function(e) {
      e.stopPropagation();
      e.preventDefault();
      return this.footer.toggleClass("draghover", e.type === "dragover");
    };

    Editor.prototype.fileSelectHandler = function(e) {
      var file, files, _i, _len, _results;
      this.fileDragHover(e);
      if (e.originalEvent != null) {
        e = e.originalEvent;
      }
      files = e.target.files || e.dataTransfer.files;
      _results = [];
      for (_i = 0, _len = files.length; _i < _len; _i++) {
        file = files[_i];
        _results.push(this.parseFile(file));
      }
      return _results;
    };

    Editor.prototype.parseFile = function(file) {
      var name, type;
      type = file.type, name = file.name;
      if (/(png|gif|jpeg|jpg)/.test(type)) {
        return this.parseImage(file);
      } else if (/(javascript|js|coffee|iced)/.test(name)) {
        return this.parseScript(file);
      } else {
        return this.console.print("Unknown filetype: " + type + ": " + name);
      }
    };

    Editor.prototype.parseImage = function(file) {
      var dataurl, name, status, value, varname, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      name = file.name;
      window.assets || (window.assets = []);
      varname = "window.assets[" + window.assets.length + "]";
      this.console.print("Adding " + name + " as " + varname);
      this.fileQueue || (this.fileQueue = new FileQueue);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.parseImage"
          });
          _this.fileQueue.awaitRead({
            file: file
          }, __iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                status = arguments[0];
                return dataurl = arguments[1];
              };
            })(),
            lineno: 223
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          if (status === "error") {
            return _this.log("Error: " + dataurl);
          }
          window.assets.push(dataurl);
          value = (function() {
            switch (this.lang()) {
              case "coffee":
                return "# " + name + "\nnewimage = " + varname + "\n" + (this.val().trim());
              case "vanilla":
                return "// " + name + "\nvar newimage = " + varname + "\n" + (this.val().trim());
            }
          }).call(_this);
          _this.val(value);
          return _this.codemirror.scrollIntoView(0);
        };
      })(this));
    };

    Editor.prototype.parseScript = function(file) {
      var compiled, e, firstDot, guessname, name, status, text, value, varname, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      name = file.name;
      firstDot = name.indexOf(".");
      if (firstDot === -1) {
        firstDot = name.length;
      }
      guessname = capitalize(name.slice(0, firstDot));
      if (window.userscripts == null) {
        window.userscripts = [];
      }
      varname = "window.userscripts[" + window.userscripts.length + "]";
      this.console.print("Adding " + name + " as window." + guessname + " = " + varname);
      this.fileQueue || (this.fileQueue = new FileQueue);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.parseScript"
          });
          _this.fileQueue.awaitRead({
            file: file,
            readAs: "Text"
          }, __iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                status = arguments[0];
                return text = arguments[1];
              };
            })(),
            lineno: 250
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          if (status === "error") {
            return _this.log("Error: " + text);
          }
          if (/(iced|coffee)/.test(name)) {
            text = _this.compileIced(text);
          }
          try {
            compiled = eval(text);
          } catch (_error) {
            e = _error;
            return _this.console.printCompileError(e);
          }
          window.userscripts.push(compiled);
          window[guessname] = compiled;
          value = (function() {
            switch (this.lang()) {
              case "coffee":
                return "# " + name + "\n# Success!  If this is a CommonJS module,\n# it is available at window." + guessname + "\n#\n# to save this in localStorage with the script, run:\n# app.editor.saveUserScript " + varname + "\nnewscript = window." + guessname + "\n" + (this.val().trim());
              case "vanilla":
                return "// " + name + "\n// Success!  If this is a CommonJS module,\n// it is available at window." + guessname + "\n//\n// to save this in localStorage with the script, run:\n// app.editor.saveUserScript(" + varname + ")\nvar newscript = window." + guessname + "\n" + (this.val().trim());
            }
          }).call(_this);
          _this.val(value);
          return _this.codemirror.scrollIntoView(0);
        };
      })(this));
    };

    Editor.prototype.saveUserScript = function(script) {
      var _base;
      if ((_base = this.settings).userscripts == null) {
        _base.userscripts = [];
      }
      if (__indexOf.call(this.settings.userscripts, script) < 0) {
        return this.settings.userscripts.push(script);
      }
    };

    return Editor;

  })(Spine.Controller);

  module.exports = Editor;

}).call(this);


},{"../lib/filequeue":5,"codemirror":16,"codemirror-iced-coffee-script":15,"iced-coffee-script":"iced-coffee-script","iced-runtime":30,"js2coffee/dist/js2coffee":34,"spine":"spine"}],3:[function(require,module,exports){
(function() {
  var PIXI, Spine, Stage, Stats, extend,
    __slice = [].slice,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Spine = require("spine");

  PIXI = require("../lib/pixi.dev.js");

  Stats = require("stats.js");

  extend = function() {
    var base, key, obj, objs, value, _i, _len;
    base = arguments[0], objs = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    for (_i = 0, _len = objs.length; _i < _len; _i++) {
      obj = objs[_i];
      for (key in obj) {
        value = obj[key];
        base[key] = value;
      }
    }
    return base;
  };

  Stage = (function(_super) {
    __extends(Stage, _super);

    Stage.prototype.logPrefix = "(Playground:Stage)";

    Stage.prototype.pixidefaults = {
      backgroundColor: 0xFFFFFF,
      transparent: false,
      antialias: false
    };

    Stage.prototype.resize = function() {};

    Stage.prototype.bindResize = function() {
      $(window).resize(this.resize);
      return $(window).on("onorientationchange", this.resize);
    };

    Stage.prototype.release = function() {
      $(window).off("resize", this.resize);
      return $(window).off("onorientationchange", this.resize);
    };

    Stage.prototype._frameFns = [];

    Stage.prototype.addFrameFn = function(fn) {
      return this._frameFns.push(fn);
    };

    Stage.prototype.removeFrameFn = function(fn) {
      return this._frameFns.splice(this._frameFns.indexOf(fn), 1);
    };

    Stage.prototype.ani = function(loopfn) {
      var recursiveloop;
      if (loopfn == null) {
        loopfn = function() {};
      }
      this.addFrameFn(loopfn);
      recursiveloop = (function(_this) {
        return function() {
          var fn, _i, _len, _ref;
          _this.stats.begin();
          _ref = _this._frameFns;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            fn = _ref[_i];
            fn();
          }
          _this.renderer.render(_this.stage);
          window.frame = requestAnimFrame(recursiveloop);
          return _this.stats.end();
        };
      })(this);
      return window.frame = requestAnimFrame(recursiveloop);
    };

    function Stage(options, pixisettings) {
      if (pixisettings == null) {
        pixisettings = {};
      }
      Stage.__super__.constructor.apply(this, arguments);
      this.pixisettings = extend({}, this.pixidefaults, pixisettings);
      this.stage = new PIXI.Stage(this.pixisettings.backgroundColor);
      this.stage.width = this.el.width();
      this.stage.height = this.el.height();
      this.stage.interactive = this.pixisettings.interactive;
      window.stage = this.stage;
      window.ani = this.proxy(this.ani);
      window.PIXI = PIXI;
      this.render();
      this.bindResize();
      this.addChild = this.append;
      this.removeChildren = this.remove;
    }

    Stage.prototype.render = function() {
      this.renderer = PIXI.autoDetectRenderer(this.stage.width, this.stage.height, null, this.pixisettings.transparent, this.pixisettings.antialias);
      this.stats = new Stats;
      this.$stats = $(this.stats.dom);
      window.renderer = this.renderer;
      window.stats = this.stats;
      this.el.append(this.renderer.view);
      this.hideStats();
      return this.el.append(this.$stats);
    };

    Stage.prototype.hideStats = function() {
      return this.$stats.css({
        display: "none"
      });
    };

    Stage.prototype.showStats = function() {
      return this.$stats.css({
        display: "block",
        position: "absolute"
      });
    };

    Stage.prototype.append = function() {
      var child, children, _i, _len;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      for (_i = 0, _len = children.length; _i < _len; _i++) {
        child = children[_i];
        if (child.display) {
          child.stage = this;
          child = child.display;
        }
        this.stage.addChild(child);
      }
      return this;
    };

    Stage.prototype.addChild = function() {};

    Stage.prototype.remove = function() {
      var child, children, _i;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      if (!children.length) {
        children = this.stage.children;
      }
      for (_i = children.length - 1; _i >= 0; _i += -1) {
        child = children[_i];
        if (child.display) {
          child.stage = null;
          child = child.display;
        }
        this.stage.removeChild(child);
      }
      return this;
    };

    Stage.prototype.removeChildren = function() {};

    Stage.prototype.refresh = function() {
      this.removeChildren();
      this.stats.end();
      return this.renderer.render(this.stage);
    };

    Stage.prototype.stackLevel = function(child) {
      return this.stage.children.indexOf(child.display || child);
    };

    Stage.prototype.bringToFront = function() {
      var children;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      this.removeChildren.apply(this, children);
      return this.append.apply(this, children);
    };

    Stage.prototype.sendToBack = function() {
      var children;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      return this.moveInStack.apply(this, __slice.call(children).concat([0]));
    };

    Stage.prototype.moveInStack = function() {
      var children, newLevel, _i;
      children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), newLevel = arguments[_i++];
      this.removeChildren.apply(this, children);
      return this.addChildrenAt.apply(this, __slice.call(children).concat([newLevel]));
    };

    Stage.prototype.addChildrenAt = function() {
      var child, children, newLevel, _i, _j, _k, _len, _len1;
      children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), newLevel = arguments[_i++];
      for (_j = 0, _len = children.length; _j < _len; _j++) {
        child = children[_j];
        if (child.display) {
          child.stage = this;
          child = child.display;
        }
      }
      for (_k = 0, _len1 = children.length; _k < _len1; _k++) {
        child = children[_k];
        this.stage.addChildAt(child.display || child, newLevel);
      }
      return this;
    };

    return Stage;

  })(Spine.Controller);

  module.exports = Stage;

}).call(this);


},{"../lib/pixi.dev.js":6,"spine":"spine","stats.js":41}],4:[function(require,module,exports){
(function() {
  var Math2;

  Math2 = {
    random: function(from, to) {
      return Math.random() * (to - from) + from;
    },
    map: function(val, inputMin, inputMax, outputMin, outputMax) {
      return ((outputMax - outputMin) * ((val - inputMin) / (inputMax - inputMin))) + outputMin;
    },
    randomPlusMinus: function(chance) {
      chance = chance ? chance : 0.5;
      if (Math.random() > chance) {
        return -1;
      } else {
        return 1;
      }
    },
    randomInt: function(from, to) {
      return Math.floor(Math.random() * (++to - from) + from);
    },
    randomBool: function(chance) {
      chance = chance ? chance : 0.5;
      return Math.random() < chance;
    }
  };

  module.exports = Math2;

}).call(this);


},{}],5:[function(require,module,exports){
(function() {
  var FileQueue, iced, __iced_k, __iced_k_noop;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  FileQueue = (function() {
    function FileQueue() {}

    FileQueue.prototype.enabled = true;

    FileQueue.prototype.disable = function(callback) {
      var e;
      if (this.enabled) {
        this.enabled = false;
        try {
          return callback();
        } catch (_error) {
          e = _error;
          throw e;
        } finally {
          this.enabled = true;
        }
      } else {
        return callback();
      }
    };

    FileQueue.prototype.max = 100;

    FileQueue.prototype.throttle = 0;

    FileQueue.prototype.queue = function(request) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.pipeliner || (this.pipeliner = new Pipeliner(this.max, this.throttle));
      if (!request) {
        return this.pipeliner.queue;
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced",
            funcname: "FileQueue.queue"
          });
          _this.pipeliner.waitInQueue(__iced_deferrals.defer({
            lineno: 21
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return request(_this.pipeliner.defer({
            lineno: 22,
            context: __iced_deferrals
          }));
        };
      })(this));
    };

    FileQueue.prototype.clearQueue = function() {
      this.pipeliner.queue = [];
      return this.pipeliner.n_out = 0;
    };

    FileQueue.prototype.defaults = {
      readAs: "DataURL",
      encoding: "UTF-8"
    };

    FileQueue.prototype.readFile = function(params, defaults) {
      var read, reader, settings;
      if (params == null) {
        params = {};
      }
      if (defaults == null) {
        defaults = {};
      }
      if (defaults !== true) {
        settings = $.extend({}, this.defaults, defaults, params);
      }
      reader = new FileReader;
      reader.onload = function(e) {
        return settings.success(reader.result);
      };
      reader.onerror = settings.error;
      read = (function() {
        switch (settings.readAs) {
          case "ArrayBuffer":
            return reader.readAsArrayBuffer(settings.file, settings.encoding);
          case "BinaryString":
            return reader.readAsBinaryString(settings.file, settings.encoding);
          case "DataURL":
            return reader.readAsDataURL(settings.file, settings.encoding);
          case "Text":
            return reader.readAsText(settings.file, settings.encoding);
        }
      })();
      return reader;
    };

    FileQueue.prototype.queueFile = function(params, defaults) {
      var defererror, defersuccess, e, request, rv, settings;
      if (params == null) {
        params = {};
      }
      if (defaults == null) {
        defaults = {};
      }
      rv = new iced.Rendezvous;
      settings = $.extend({}, this.defaults, defaults, params);
      defersuccess = settings.success;
      defererror = settings.error;
      settings.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 53,
        context: __iced_deferrals
      });
      settings.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 54,
        context: __iced_deferrals
      });
      request = function(next) {
        var reader, status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
        __iced_k = __iced_k_noop;
        ___iced_passed_deferral = iced.findDeferral(arguments);
        reader = this.readFile(settings, true);
        (function(_this) {
          return (function(__iced_k) {
            __iced_deferrals = new iced.Deferrals(__iced_k, {
              parent: ___iced_passed_deferral,
              filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced"
            });
            rv.wait(__iced_deferrals.defer({
              assign_fn: (function() {
                return function() {
                  return status = arguments[0];
                };
              })(),
              lineno: 58
            }));
            __iced_deferrals._fulfill();
          });
        })(this)((function(_this) {
          return function() {
            switch (status) {
              case 'success':
                defersuccess(reader.result);
                break;
              case 'error':
                defererror(e);
            }
            return next();
          };
        })(this));
      };
      request.abort = function(statusText) {
        var index;
        if (reader) {
          return reader.abort(statusText);
        }
        index = this.queue().indexOf(request);
        if (index > -1) {
          this.queue().splice(index, 1);
        }
        if (this.pipeliner) {
          this.pipeliner.n_out--;
        }
        return request;
      };
      if (!this.enabled) {
        return request;
      }
      this.queue(request);
      return request;
    };

    FileQueue.prototype.awaitRead = function(options, cb, queue) {
      var e, result, rv, status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      if (queue == null) {
        queue = false;
      }
      rv = new iced.Rendezvous();
      options.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return result = arguments[0];
            };
          };
        })(this)(),
        lineno: 83,
        context: __iced_deferrals
      });
      options.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 84,
        context: __iced_deferrals
      });
      if (queue) {
        this.fileQueue(options);
      } else {
        this.readFile(options);
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced",
            funcname: "FileQueue.awaitRead"
          });
          rv.wait(__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return status = arguments[0];
              };
            })(),
            lineno: 89
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return cb(status, result || e);
        };
      })(this));
    };

    return FileQueue;

  })();

  module.exports = FileQueue;

}).call(this);


},{"iced-runtime":30}],6:[function(require,module,exports){
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

(function(){

	var root = this;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * @module PIXI
 */
var PIXI = PIXI || {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The Point object represents a location in a two-dimensional coordinate system, where x represents the horizontal axis and y represents the vertical axis.
 *
 * @class Point
 * @constructor
 * @param x {Number} position of the point
 * @param y {Number} position of the point
 */
PIXI.Point = function(x, y)
{
	/**
	 * @property x
	 * @type Number
	 * @default 0
	 */
	this.x = x || 0;

	/**
	 * @property y
	 * @type Number
	 * @default 0
	 */
	this.y = y || 0;
}

/**
 * Creates a clone of this point
 *
 * @method clone
 * @return {Point} a copy of the point
 */
PIXI.Point.prototype.clone = function()
{
	return new PIXI.Point(this.x, this.y);
}

// constructor
PIXI.Point.prototype.constructor = PIXI.Point;


/**
 * @author Mat Groves http://matgroves.com/
 */

/**
 * the Rectangle object is an area defined by its position, as indicated by its top-left corner point (x, y) and by its width and its height.
 *
 * @class Rectangle
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the rectangle
 * @param y {Number} The Y coord of the upper-left corner of the rectangle
 * @param width {Number} The overall width of this rectangle
 * @param height {Number} The overall height of this rectangle
 */
PIXI.Rectangle = function(x, y, width, height)
{
	/**
	 * @property x
	 * @type Number
	 * @default 0
	 */
	this.x = x || 0;

	/**
	 * @property y
	 * @type Number
	 * @default 0
	 */
	this.y = y || 0;

	/**
	 * @property width
	 * @type Number
	 * @default 0
	 */
	this.width = width || 0;

	/**
	 * @property height
	 * @type Number
	 * @default 0
	 */
	this.height = height || 0;
}

/**
 * Creates a clone of this Rectangle
 *
 * @method clone
 * @return {Rectangle} a copy of the rectangle
 */
PIXI.Rectangle.prototype.clone = function()
{
	return new PIXI.Rectangle(this.x, this.y, this.width, this.height);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this Rectangle
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this Rectangle
 */
PIXI.Rectangle.prototype.contains = function(x, y)
{
    if(this.width <= 0 || this.height <= 0)
        return false;

	var x1 = this.x;
	if(x >= x1 && x <= x1 + this.width)
	{
		var y1 = this.y;

		if(y >= y1 && y <= y1 + this.height)
		{
			return true;
		}
	}

	return false;
}

// constructor
PIXI.Rectangle.prototype.constructor = PIXI.Rectangle;


/**
 * @author Adrien Brault <adrien.brault@gmail.com>
 */

/**
 * @class Polygon
 * @constructor
 * @param points* {Array<Point>|Array<Number>|Point...|Number...} This can be an array of Points that form the polygon,
 *      a flat array of numbers that will be interpreted as [x,y, x,y, ...], or the arguments passed can be
 *      all the points of the polygon e.g. `new PIXI.Polygon(new PIXI.Point(), new PIXI.Point(), ...)`, or the
 *      arguments passed can be flat x,y values e.g. `new PIXI.Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are
 *      Numbers.
 */
PIXI.Polygon = function(points)
{
    //if points isn't an array, use arguments as the array
    if(!(points instanceof Array))
        points = Array.prototype.slice.call(arguments);

    //if this is a flat array of numbers, convert it to points
    if(typeof points[0] === 'number') {
        var p = [];
        for(var i = 0, il = points.length; i < il; i+=2) {
            p.push(
                new PIXI.Point(points[i], points[i + 1])
            );
        }

        points = p;
    }

	this.points = points;
}

/**
 * Creates a clone of this polygon
 *
 * @method clone
 * @return {Polygon} a copy of the polygon
 */
PIXI.Polygon.prototype.clone = function()
{
	var points = [];
	for (var i=0; i<this.points.length; i++) {
		points.push(this.points[i].clone());
	}

	return new PIXI.Polygon(points);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this polygon
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this polygon
 */
PIXI.Polygon.prototype.contains = function(x, y)
{
    var inside = false;

    // use some raycasting to test hits
    // https://github.com/substack/point-in-polygon/blob/master/index.js
    for(var i = 0, j = this.points.length - 1; i < this.points.length; j = i++) {
        var xi = this.points[i].x, yi = this.points[i].y,
            xj = this.points[j].x, yj = this.points[j].y,
            intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);

        if(intersect) inside = !inside;
    }

    return inside;
}

// constructor
PIXI.Polygon.prototype.constructor = PIXI.Polygon;

/**
 * @author Chad Engler <chad@pantherdev.com>
 */

/**
 * The Circle object can be used to specify a hit area for displayobjects
 *
 * @class Circle
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the framing rectangle of this circle
 * @param y {Number} The Y coord of the upper-left corner of the framing rectangle of this circle
 * @param radius {Number} The radius of the circle
 */
PIXI.Circle = function(x, y, radius)
{
    /**
     * @property x
     * @type Number
     * @default 0
     */
    this.x = x || 0;

    /**
     * @property y
     * @type Number
     * @default 0
     */
    this.y = y || 0;

    /**
     * @property radius
     * @type Number
     * @default 0
     */
    this.radius = radius || 0;
}

/**
 * Creates a clone of this Circle instance
 *
 * @method clone
 * @return {Circle} a copy of the polygon
 */
PIXI.Circle.prototype.clone = function()
{
    return new PIXI.Circle(this.x, this.y, this.radius);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this circle
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this polygon
 */
PIXI.Circle.prototype.contains = function(x, y)
{
    if(this.radius <= 0)
        return false;

    var dx = (this.x - x),
        dy = (this.y - y),
        r2 = this.radius * this.radius;

    dx *= dx;
    dy *= dy;

    return (dx + dy <= r2);
}

// constructor
PIXI.Circle.prototype.constructor = PIXI.Circle;


/**
 * @author Chad Engler <chad@pantherdev.com>
 */

/**
 * The Ellipse object can be used to specify a hit area for displayobjects
 *
 * @class Ellipse
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the framing rectangle of this ellipse
 * @param y {Number} The Y coord of the upper-left corner of the framing rectangle of this ellipse
 * @param width {Number} The overall width of this ellipse
 * @param height {Number} The overall height of this ellipse
 */
PIXI.Ellipse = function(x, y, width, height)
{
    /**
     * @property x
     * @type Number
     * @default 0
     */
    this.x = x || 0;

    /**
     * @property y
     * @type Number
     * @default 0
     */
    this.y = y || 0;

    /**
     * @property width
     * @type Number
     * @default 0
     */
    this.width = width || 0;

    /**
     * @property height
     * @type Number
     * @default 0
     */
    this.height = height || 0;
}

/**
 * Creates a clone of this Ellipse instance
 *
 * @method clone
 * @return {Ellipse} a copy of the ellipse
 */
PIXI.Ellipse.prototype.clone = function()
{
    return new PIXI.Ellipse(this.x, this.y, this.width, this.height);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this ellipse
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this ellipse
 */
PIXI.Ellipse.prototype.contains = function(x, y)
{
    if(this.width <= 0 || this.height <= 0)
        return false;

    //normalize the coords to an ellipse with center 0,0
    //and a radius of 0.5
    var normx = ((x - this.x) / this.width) - 0.5,
        normy = ((y - this.y) / this.height) - 0.5;

    normx *= normx;
    normy *= normy;

    return (normx + normy < 0.25);
}

PIXI.Ellipse.getBounds = function()
{
    return new PIXI.Rectangle(this.x, this.y, this.width, this.height);
}

// constructor
PIXI.Ellipse.prototype.constructor = PIXI.Ellipse;



/*
 * A lighter version of the rad gl-matrix created by Brandon Jones, Colin MacKenzie IV
 * you both rock!
 */

function determineMatrixArrayType() {
    PIXI.Matrix = (typeof Float32Array !== 'undefined') ? Float32Array : Array;
    return PIXI.Matrix;
}

determineMatrixArrayType();

PIXI.mat3 = {};

PIXI.mat3.create = function()
{
	var matrix = new PIXI.Matrix(9);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 1;
	matrix[5] = 0;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 1;

	return matrix;
}


PIXI.mat3.identity = function(matrix)
{
	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 1;
	matrix[5] = 0;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 1;

	return matrix;
}


PIXI.mat4 = {};

PIXI.mat4.create = function()
{
	var matrix = new PIXI.Matrix(16);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 0;
	matrix[5] = 1;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 0;
	matrix[9] = 0;
	matrix[10] = 1;
	matrix[11] = 0;
	matrix[12] = 0;
	matrix[13] = 0;
	matrix[14] = 0;
	matrix[15] = 1;

	return matrix;
}

PIXI.mat3.multiply = function (mat, mat2, dest)
{
	if (!dest) { dest = mat; }

	// Cache the matrix values (makes for huge speed increases!)
	var a00 = mat[0], a01 = mat[1], a02 = mat[2],
	    a10 = mat[3], a11 = mat[4], a12 = mat[5],
	    a20 = mat[6], a21 = mat[7], a22 = mat[8],

	    b00 = mat2[0], b01 = mat2[1], b02 = mat2[2],
	    b10 = mat2[3], b11 = mat2[4], b12 = mat2[5],
	    b20 = mat2[6], b21 = mat2[7], b22 = mat2[8];

	dest[0] = b00 * a00 + b01 * a10 + b02 * a20;
	dest[1] = b00 * a01 + b01 * a11 + b02 * a21;
	dest[2] = b00 * a02 + b01 * a12 + b02 * a22;

	dest[3] = b10 * a00 + b11 * a10 + b12 * a20;
	dest[4] = b10 * a01 + b11 * a11 + b12 * a21;
	dest[5] = b10 * a02 + b11 * a12 + b12 * a22;

	dest[6] = b20 * a00 + b21 * a10 + b22 * a20;
	dest[7] = b20 * a01 + b21 * a11 + b22 * a21;
	dest[8] = b20 * a02 + b21 * a12 + b22 * a22;

	return dest;
}

PIXI.mat3.clone = function(mat)
{
	var matrix = new PIXI.Matrix(9);

	matrix[0] = mat[0];
	matrix[1] = mat[1];
	matrix[2] = mat[2];
	matrix[3] = mat[3];
	matrix[4] = mat[4];
	matrix[5] = mat[5];
	matrix[6] = mat[6];
	matrix[7] = mat[7];
	matrix[8] = mat[8];

	return matrix;
}

PIXI.mat3.transpose = function (mat, dest)
{
 	// If we are transposing ourselves we can skip a few steps but have to cache some values
    if (!dest || mat === dest) {
        var a01 = mat[1], a02 = mat[2],
            a12 = mat[5];

        mat[1] = mat[3];
        mat[2] = mat[6];
        mat[3] = a01;
        mat[5] = mat[7];
        mat[6] = a02;
        mat[7] = a12;
        return mat;
    }

    dest[0] = mat[0];
    dest[1] = mat[3];
    dest[2] = mat[6];
    dest[3] = mat[1];
    dest[4] = mat[4];
    dest[5] = mat[7];
    dest[6] = mat[2];
    dest[7] = mat[5];
    dest[8] = mat[8];
    return dest;
}

PIXI.mat3.toMat4 = function (mat, dest)
{
	if (!dest) { dest = PIXI.mat4.create(); }

	dest[15] = 1;
	dest[14] = 0;
	dest[13] = 0;
	dest[12] = 0;

	dest[11] = 0;
	dest[10] = mat[8];
	dest[9] = mat[7];
	dest[8] = mat[6];

	dest[7] = 0;
	dest[6] = mat[5];
	dest[5] = mat[4];
	dest[4] = mat[3];

	dest[3] = 0;
	dest[2] = mat[2];
	dest[1] = mat[1];
	dest[0] = mat[0];

	return dest;
}


/////


PIXI.mat4.create = function()
{
	var matrix = new PIXI.Matrix(16);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 0;
	matrix[5] = 1;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 0;
	matrix[9] = 0;
	matrix[10] = 1;
	matrix[11] = 0;
	matrix[12] = 0;
	matrix[13] = 0;
	matrix[14] = 0;
	matrix[15] = 1;

	return matrix;
}

PIXI.mat4.transpose = function (mat, dest)
{
	// If we are transposing ourselves we can skip a few steps but have to cache some values
	if (!dest || mat === dest)
	{
	    var a01 = mat[1], a02 = mat[2], a03 = mat[3],
	        a12 = mat[6], a13 = mat[7],
	        a23 = mat[11];

	    mat[1] = mat[4];
	    mat[2] = mat[8];
	    mat[3] = mat[12];
	    mat[4] = a01;
	    mat[6] = mat[9];
	    mat[7] = mat[13];
	    mat[8] = a02;
	    mat[9] = a12;
	    mat[11] = mat[14];
	    mat[12] = a03;
	    mat[13] = a13;
	    mat[14] = a23;
	    return mat;
	}

	dest[0] = mat[0];
	dest[1] = mat[4];
	dest[2] = mat[8];
	dest[3] = mat[12];
	dest[4] = mat[1];
	dest[5] = mat[5];
	dest[6] = mat[9];
	dest[7] = mat[13];
	dest[8] = mat[2];
	dest[9] = mat[6];
	dest[10] = mat[10];
	dest[11] = mat[14];
	dest[12] = mat[3];
	dest[13] = mat[7];
	dest[14] = mat[11];
	dest[15] = mat[15];
	return dest;
}

PIXI.mat4.multiply = function (mat, mat2, dest)
{
	if (!dest) { dest = mat; }

	// Cache the matrix values (makes for huge speed increases!)
	var a00 = mat[ 0], a01 = mat[ 1], a02 = mat[ 2], a03 = mat[3];
	var a10 = mat[ 4], a11 = mat[ 5], a12 = mat[ 6], a13 = mat[7];
	var a20 = mat[ 8], a21 = mat[ 9], a22 = mat[10], a23 = mat[11];
	var a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];

	// Cache only the current line of the second matrix
    var b0  = mat2[0], b1 = mat2[1], b2 = mat2[2], b3 = mat2[3];
    dest[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[4];
    b1 = mat2[5];
    b2 = mat2[6];
    b3 = mat2[7];
    dest[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[8];
    b1 = mat2[9];
    b2 = mat2[10];
    b3 = mat2[11];
    dest[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[12];
    b1 = mat2[13];
    b2 = mat2[14];
    b3 = mat2[15];
    dest[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    return dest;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The base class for all objects that are rendered on the screen.
 *
 * @class DisplayObject
 * @constructor
 */
PIXI.DisplayObject = function()
{
	this.last = this;
	this.first = this;
	/**
	 * The coordinate of the object relative to the local coordinates of the parent.
	 *
	 * @property position
	 * @type Point
	 */
	this.position = new PIXI.Point();

	/**
	 * The scale factor of the object.
	 *
	 * @property scale
	 * @type Point
	 */
	this.scale = new PIXI.Point(1,1);//{x:1, y:1};

	/**
	 * The pivot point of the displayObject that it rotates around
	 *
	 * @property pivot
	 * @type Point
	 */
	this.pivot = new PIXI.Point(0,0);

	/**
	 * The rotation of the object in radians.
	 *
	 * @property rotation
	 * @type Number
	 */
	this.rotation = 0;

	/**
	 * The opacity of the object.
	 *
	 * @property alpha
	 * @type Number
	 */	
	this.alpha = 1;

	/**
	 * The visibility of the object.
	 *
	 * @property visible
	 * @type Boolean
	 */	
	this.visible = true;

	/**
	 * This is the defined area that will pick up mouse / touch events. It is null by default.
	 * Setting it is a neat way of optimising the hitTest function that the interactionManager will use (as it will not need to hit test all the children)
	 *
	 * @property hitArea
	 * @type Rectangle|Circle|Ellipse|Polygon
	 */	
	this.hitArea = null;

	/**
	 * This is used to indicate if the displayObject should display a mouse hand cursor on rollover
	 *
	 * @property buttonMode
	 * @type Boolean
	 */
	this.buttonMode = false;

	/**
	 * Can this object be rendered
	 *
	 * @property renderable
	 * @type Boolean
	 */
	this.renderable = false;

	/**
	 * [read-only] The display object container that contains this display object.
	 *
	 * @property parent
	 * @type DisplayObjectContainer
	 * @readOnly
	 */	
	this.parent = null;

	/**
	 * [read-only] The stage the display object is connected to, or undefined if it is not connected to the stage.
	 *
	 * @property stage
	 * @type Stage
	 * @readOnly
	 */	
	this.stage = null;

	/**
	 * [read-only] The multiplied alpha of the displayobject
	 *
	 * @property worldAlpha
	 * @type Number
	 * @readOnly
	 */
	this.worldAlpha = 1;

	/**
	 * [read-only] Whether or not the object is interactive, do not toggle directly! use the `interactive` property
	 *
	 * @property _interactive
	 * @type Boolean
	 * @readOnly
	 * @private
	 */
	this._interactive = false;

	/**
	 * [read-only] Current transform of the object based on world (parent) factors
	 *
	 * @property worldTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.worldTransform = PIXI.mat3.create()//mat3.identity();

	/**
	 * [read-only] Current transform of the object locally
	 *
	 * @property localTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.localTransform = PIXI.mat3.create()//mat3.identity();

	/**
	 * [NYI] Unkown
	 *
	 * @property color
	 * @type Array<>
	 * @private
	 */
	this.color = [];

	/**
	 * [NYI] Holds whether or not this object is dynamic, for rendering optimization
	 *
	 * @property dynamic
	 * @type Boolean
	 * @private
	 */
	this.dynamic = true;

	// chach that puppy!
	this._sr = 0;
	this._cr = 1;


	this.filterArea = new PIXI.Rectangle(0,0,1,1);
	
	/*
	 * MOUSE Callbacks
	 */

	/**
	 * A callback that is used when the users clicks on the displayObject with their mouse
	 * @method click
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user clicks the mouse down over the sprite
	 * @method mousedown
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the mouse that was over the displayObject
	 * for this callback to be fired the mouse must have been pressed down over the displayObject
	 * @method mouseup
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the mouse that was over the displayObject but is no longer over the displayObject
	 * for this callback to be fired, The touch must have started over the displayObject
	 * @method mouseupoutside
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the users mouse rolls over the displayObject
	 * @method mouseover
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the users mouse leaves the displayObject
	 * @method mouseout
	 * @param interactionData {InteractionData}
	 */


	/*
	 * TOUCH Callbacks
	 */

	/**
	 * A callback that is used when the users taps on the sprite with their finger
	 * basically a touch version of click
	 * @method tap
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user touch's over the displayObject
	 * @method touchstart
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases a touch over the displayObject
	 * @method touchend
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the touch that was over the displayObject
	 * for this callback to be fired, The touch must have started over the sprite
	 * @method touchendoutside
	 * @param interactionData {InteractionData}
	 */
}

// constructor
PIXI.DisplayObject.prototype.constructor = PIXI.DisplayObject;

/**
 * [Deprecated] Indicates if the sprite will have touch and mouse interactivity. It is false by default
 * Instead of using this function you can now simply set the interactive property to true or false
 *
 * @method setInteractive
 * @param interactive {Boolean}
 * @deprecated Simply set the `interactive` property directly
 */
PIXI.DisplayObject.prototype.setInteractive = function(interactive)
{
	this.interactive = interactive;
}

/**
 * Indicates if the sprite will have touch and mouse interactivity. It is false by default
 *
 * @property interactive
 * @type Boolean
 * @default false
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'interactive', {
    get: function() {
        return this._interactive;
    },
    set: function(value) {
    	this._interactive = value;
    	
    	// TODO more to be done here..
		// need to sort out a re-crawl!
		if(this.stage)this.stage.dirty = true;
    }
});

/**
 * Sets a mask for the displayObject. A mask is an object that limits the visibility of an object to the shape of the mask applied to it.
 * In PIXI a regular mask must be a PIXI.Ggraphics object. This allows for much faster masking in canvas as it utilises shape clipping.
 * To remove a mask, set this property to null.
 *
 * @property mask
 * @type Graphics
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'mask', {
    get: function() {
        return this._mask;
    },
    set: function(value) {
    	
    	
        if(value)
        {
        	if(this._mask)
	    	{
	    		value.start = this._mask.start;
	    		value.end = this._mask.end;
	    	}
    		else
    		{
		        this.addFilter(value);
		        value.renderable = false;
    		}
        }
        else
        {
        	 this.removeFilter(this._mask);
			 this._mask.renderable = true;
        }
        
        this._mask = value;
    }
});

/**
 * Sets the filters for the displayObject. 
 * * IMPORTANT: This is a webGL only feature and will be ignored by the canvas renderer.
 * To remove filters simply set this property to 'null'
 * @property filters
 * @type Array An array of filters
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'filters', {
    get: function() {
        return this._filters;
    },
    set: function(value) {
    	
        if(value)
        {
        	if(this._filters)this.removeFilter(this._filters);
	        this.addFilter(value);

		    // now put all the passes in one place..
	        var passes = [];
	        for (var i = 0; i < value.length; i++) 
	        {
	        	var filterPasses = value[i].passes;
	        	for (var j = 0; j < filterPasses.length; j++) 
	        	{
	        		passes.push(filterPasses[j]);
	        	};
	        };

	        value.start.filterPasses = passes;
        }
        else
        {
        	if(this._filters)this.removeFilter(this._filters);
        }
        
        this._filters = value;

       

        
    }
});

/*
 * Adds a filter to this displayObject
 *
 * @method addFilter
 * @param mask {Graphics} the graphics object to use as a filter
 * @private
 */
PIXI.DisplayObject.prototype.addFilter = function(data)
{
	//if(this.filter)return;
	//this.filter = true;
//	data[0].target = this;
	

	// insert a filter block..
	// TODO Onject pool thease bad boys..
	var start = new PIXI.FilterBlock();
	var end = new PIXI.FilterBlock();
	
	data.start = start;
	data.end = end;
	
	start.data = data;
	end.data = data;
	
	start.first = start.last =  this;
	end.first = end.last = this;
	
	start.open = true;
	
	start.target = this;
	
	/*
	 * insert start
	 */
	
	var childFirst = start
	var childLast = start
	var nextObject;
	var previousObject;
		
	previousObject = this.first._iPrev;
	
	if(previousObject)
	{
		nextObject = previousObject._iNext;
		childFirst._iPrev = previousObject;
		previousObject._iNext = childFirst;		
	}
	else
	{
		nextObject = this;
	}	
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	
	// now insert the end filter block..
	
	/*
	 * insert end filter
	 */
	var childFirst = end
	var childLast = end
	var nextObject = null;
	var previousObject = null;
		
	previousObject = this.last;
	nextObject = previousObject._iNext;
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	childFirst._iPrev = previousObject;
	previousObject._iNext = childFirst;	
	
	var updateLast = this;
	
	var prevLast = this.last;
	while(updateLast)
	{
		if(updateLast.last == prevLast)
		{
			updateLast.last = end;
		}
		updateLast = updateLast.parent;
	}
	
	this.first = start;
	
	// if webGL...
	if(this.__renderGroup)
	{
		this.__renderGroup.addFilterBlocks(start, end);
	}
	
}

/*
 * Removes the filter to this displayObject
 *
 * @method removeFilter
 * @private
 */
PIXI.DisplayObject.prototype.removeFilter = function(data)
{
	//if(!this.filter)return;
	//this.filter = false;
	console.log("YUOIO")
	// modify the list..
	var startBlock = data.start;
	
	
	var nextObject = startBlock._iNext;
	var previousObject = startBlock._iPrev;
		
	if(nextObject)nextObject._iPrev = previousObject;
	if(previousObject)previousObject._iNext = nextObject;		
	
	this.first = startBlock._iNext;
	
	// remove the end filter
	var lastBlock = data.end;
	
	var nextObject = lastBlock._iNext;
	var previousObject = lastBlock._iPrev;
		
	if(nextObject)nextObject._iPrev = previousObject;
	previousObject._iNext = nextObject;		
	
	// this is always true too!
	var tempLast =  lastBlock._iPrev;	
	// need to make sure the parents last is updated too
	var updateLast = this;
	while(updateLast.last == lastBlock)
	{
		updateLast.last = tempLast;
		updateLast = updateLast.parent;
		if(!updateLast)break;
	}
	
	// if webGL...
	if(this.__renderGroup)
	{
		this.__renderGroup.removeFilterBlocks(startBlock, lastBlock);
	}
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.DisplayObject.prototype.updateTransform = function()
{
	// TODO OPTIMIZE THIS!! with dirty
	if(this.rotation !== this.rotationCache)
	{
		this.rotationCache = this.rotation;
		this._sr =  Math.sin(this.rotation);
		this._cr =  Math.cos(this.rotation);
	}	
	
	var localTransform = this.localTransform;
	var parentTransform = this.parent.worldTransform;
	var worldTransform = this.worldTransform;
	//console.log(localTransform)
	localTransform[0] = this._cr * this.scale.x;
	localTransform[1] = -this._sr * this.scale.y
	localTransform[3] = this._sr * this.scale.x;
	localTransform[4] = this._cr * this.scale.y;
	
	// TODO --> do we even need a local matrix???
	
	var px = this.pivot.x;
	var py = this.pivot.y;
   	
    // Cache the matrix values (makes for huge speed increases!)
    var a00 = localTransform[0], a01 = localTransform[1], a02 = this.position.x - localTransform[0] * px - py * localTransform[1],
        a10 = localTransform[3], a11 = localTransform[4], a12 = this.position.y - localTransform[4] * py - px * localTransform[3],

        b00 = parentTransform[0], b01 = parentTransform[1], b02 = parentTransform[2],
        b10 = parentTransform[3], b11 = parentTransform[4], b12 = parentTransform[5];

	localTransform[2] = a02
	localTransform[5] = a12
	
    worldTransform[0] = b00 * a00 + b01 * a10;
    worldTransform[1] = b00 * a01 + b01 * a11;
    worldTransform[2] = b00 * a02 + b01 * a12 + b02;

    worldTransform[3] = b10 * a00 + b11 * a10;
    worldTransform[4] = b10 * a01 + b11 * a11;
    worldTransform[5] = b10 * a02 + b11 * a12 + b12;

	// because we are using affine transformation, we can optimise the matrix concatenation process.. wooo!
	// mat3.multiply(this.localTransform, this.parent.worldTransform, this.worldTransform);
	this.worldAlpha = this.alpha * this.parent.worldAlpha;
	
	this.vcount = PIXI.visibleCount;

}

PIXI.visibleCount = 0;
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * A DisplayObjectContainer represents a collection of display objects.
 * It is the base class of all display objects that act as a container for other objects.
 *
 * @class DisplayObjectContainer 
 * @extends DisplayObject
 * @constructor
 */
PIXI.DisplayObjectContainer = function()
{
	PIXI.DisplayObject.call( this );
	
	/**
	 * [read-only] The of children of this container.
	 *
	 * @property children
	 * @type Array<DisplayObject>
	 * @readOnly
	 */	
	this.children = [];
}

// constructor
PIXI.DisplayObjectContainer.prototype = Object.create( PIXI.DisplayObject.prototype );
PIXI.DisplayObjectContainer.prototype.constructor = PIXI.DisplayObjectContainer;

/**
 * Adds a child to the container.
 *
 * @method addChild
 * @param child {DisplayObject} The DisplayObject to add to the container
 */
PIXI.DisplayObjectContainer.prototype.addChild = function(child)
{
	if(child.parent != undefined)
	{
		
		//// COULD BE THIS???
		child.parent.removeChild(child);
	//	return;
	}

	child.parent = this;
	
	this.children.push(child);	
	
	// update the stage refference..
	
	if(this.stage)
	{
		var tmpChild = child;
		do
		{
			if(tmpChild.interactive)this.stage.dirty = true;
			tmpChild.stage = this.stage;
			tmpChild = tmpChild._iNext;
		}	
		while(tmpChild)
	}
	
	// LINKED LIST //
	
	// modify the list..
	var childFirst = child.first
	var childLast = child.last;
	var nextObject;
	var previousObject;
	
	// this could be wrong if there is a filter??
	if(this._filters || this._mask)
	{
		previousObject =  this.last._iPrev;
	}
	else
	{
		previousObject = this.last;
	}

	nextObject = previousObject._iNext;
	
	// always true in this case
	// need to make sure the parents last is updated too
	var updateLast = this;
	var prevLast = previousObject;
	
	while(updateLast)
	{
		if(updateLast.last == prevLast)
		{
			updateLast.last = child.last;
		}
		updateLast = updateLast.parent;
	}
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	childFirst._iPrev = previousObject;
	previousObject._iNext = childFirst;		

	// need to remove any render groups..
	if(this.__renderGroup)
	{
		// being used by a renderTexture.. if it exists then it must be from a render texture;
		if(child.__renderGroup)child.__renderGroup.removeDisplayObjectAndChildren(child);
		// add them to the new render group..
		this.__renderGroup.addDisplayObjectAndChildren(child);
	}
	
}

/**
 * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown
 *
 * @method addChildAt
 * @param child {DisplayObject} The child to add
 * @param index {Number} The index to place the child in
 */
PIXI.DisplayObjectContainer.prototype.addChildAt = function(child, index)
{
	if(index >= 0 && index <= this.children.length)
	{
		if(child.parent != undefined)
		{
			child.parent.removeChild(child);
		}
		child.parent = this;
		
		if(this.stage)
		{
			var tmpChild = child;
			do
			{
				if(tmpChild.interactive)this.stage.dirty = true;
				tmpChild.stage = this.stage;
				tmpChild = tmpChild._iNext;
			}
			while(tmpChild)
		}
		
		// modify the list..
		var childFirst = child.first;
		var childLast = child.last;
		var nextObject;
		var previousObject;
		
		if(index == this.children.length)
		{
			previousObject =  this.last;
			var updateLast = this;
			var prevLast = this.last;
			while(updateLast)
			{
				if(updateLast.last == prevLast)
				{
					updateLast.last = child.last;
				}
				updateLast = updateLast.parent;
			}
		}
		else if(index == 0)
		{
			previousObject = this;
		}
		else
		{
			previousObject = this.children[index-1].last;
		}
		
		nextObject = previousObject._iNext;
		
		// always true in this case
		if(nextObject)
		{
			nextObject._iPrev = childLast;
			childLast._iNext = nextObject;
		}
		
		childFirst._iPrev = previousObject;
		previousObject._iNext = childFirst;		

		this.children.splice(index, 0, child);
		// need to remove any render groups..
		if(this.__renderGroup)
		{
			// being used by a renderTexture.. if it exists then it must be from a render texture;
			if(child.__renderGroup)child.__renderGroup.removeDisplayObjectAndChildren(child);
			// add them to the new render group..
			this.__renderGroup.addDisplayObjectAndChildren(child);
		}
		
	}
	else
	{
		throw new Error(child + " The index "+ index +" supplied is out of bounds " + this.children.length);
	}
}

/**
 * [NYI] Swaps the depth of 2 displayObjects
 *
 * @method swapChildren
 * @param child {DisplayObject}
 * @param child2 {DisplayObject}
 * @private
 */
PIXI.DisplayObjectContainer.prototype.swapChildren = function(child, child2)
{
	/*
	 * this funtion needs to be recoded.. 
	 * can be done a lot faster..
	 */
	return;
	
	// need to fix this function :/
	/*
	// TODO I already know this??
	var index = this.children.indexOf( child );
	var index2 = this.children.indexOf( child2 );
	
	if ( index !== -1 && index2 !== -1 ) 
	{
		// cool
		
		/*
		if(this.stage)
		{
			// this is to satisfy the webGL batching..
			// TODO sure there is a nicer way to achieve this!
			this.stage.__removeChild(child);
			this.stage.__removeChild(child2);
			
			this.stage.__addChild(child);
			this.stage.__addChild(child2);
		}
		
		// swap the positions..
		this.children[index] = child2;
		this.children[index2] = child;
		
	}
	else
	{
		throw new Error(child + " Both the supplied DisplayObjects must be a child of the caller " + this);
	}*/
}

/**
 * Returns the Child at the specified index
 *
 * @method getChildAt
 * @param index {Number} The index to get the child from
 */
PIXI.DisplayObjectContainer.prototype.getChildAt = function(index)
{
	if(index >= 0 && index < this.children.length)
	{
		return this.children[index];
	}
	else
	{
		throw new Error(child + " Both the supplied DisplayObjects must be a child of the caller " + this);
	}
}

/**
 * Removes a child from the container.
 *
 * @method removeChild
 * @param child {DisplayObject} The DisplayObject to remove
 */
PIXI.DisplayObjectContainer.prototype.removeChild = function(child)
{
	var index = this.children.indexOf( child );
	if ( index !== -1 ) 
	{
		// unlink //
		// modify the list..
		var childFirst = child.first;
		var childLast = child.last;
		
		var nextObject = childLast._iNext;
		var previousObject = childFirst._iPrev;
			
		if(nextObject)nextObject._iPrev = previousObject;
		previousObject._iNext = nextObject;		
		
		if(this.last == childLast)
		{
			var tempLast =  childFirst._iPrev;	
			// need to make sure the parents last is updated too
			var updateLast = this;
			while(updateLast.last == childLast.last)
			{
				updateLast.last = tempLast;
				updateLast = updateLast.parent;
				if(!updateLast)break;
			}
		}
		
		childLast._iNext = null;
		childFirst._iPrev = null;
		 
		// update the stage reference..
		if(this.stage)
		{
			var tmpChild = child;
			do
			{
				if(tmpChild.interactive)this.stage.dirty = true;
				tmpChild.stage = null;
				tmpChild = tmpChild._iNext;
			}	
			while(tmpChild)
		}
	
		// webGL trim
		if(child.__renderGroup)
		{
			child.__renderGroup.removeDisplayObjectAndChildren(child);
		}
		
		child.parent = undefined;
		this.children.splice( index, 1 );
	}
	else
	{
		throw new Error(child + " The supplied DisplayObject must be a child of the caller " + this);
	}
}

/*
 * Updates the container's children's transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.DisplayObjectContainer.prototype.updateTransform = function()
{
	if(!this.visible)return;
	
	PIXI.DisplayObject.prototype.updateTransform.call( this );
	
	for(var i=0,j=this.children.length; i<j; i++)
	{
		this.children[i].updateTransform();	
	}
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.blendModes = {};
PIXI.blendModes.NORMAL = 0;
PIXI.blendModes.SCREEN = 1;


/**
 * The SPrite object is the base for all textured objects that are rendered to the screen
 *
 * @class Sprite
 * @extends DisplayObjectContainer
 * @constructor
 * @param texture {Texture} The texture for this sprite
 * @type String
 */
PIXI.Sprite = function(texture)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * The anchor sets the origin point of the texture.
	 * The default is 0,0 this means the textures origin is the top left 
	 * Setting than anchor to 0.5,0.5 means the textures origin is centered
	 * Setting the anchor to 1,1 would mean the textures origin points will be the bottom right
	 *
     * @property anchor
     * @type Point
     */
	this.anchor = new PIXI.Point();

	/**
	 * The texture that the sprite is using
	 *
	 * @property texture
	 * @type Texture
	 */
	this.texture = texture;

	/**
	 * The blend mode of sprite.
	 * currently supports PIXI.blendModes.NORMAL and PIXI.blendModes.SCREEN
	 *
	 * @property blendMode
	 * @type Number
	 */
	this.blendMode = PIXI.blendModes.NORMAL;

	/**
	 * The width of the sprite (this is initially set by the texture)
	 *
	 * @property _width
	 * @type Number
	 * @private
	 */
	this._width = 0;

	/**
	 * The height of the sprite (this is initially set by the texture)
	 *
	 * @property _height
	 * @type Number
	 * @private
	 */
	this._height = 0;

	if(texture.baseTexture.hasLoaded)
	{
		this.updateFrame = true;
	}
	else
	{
		this.onTextureUpdateBind = this.onTextureUpdate.bind(this);
		this.texture.addEventListener( 'update', this.onTextureUpdateBind );
	}

	this.renderable = true;
}

// constructor
PIXI.Sprite.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Sprite.prototype.constructor = PIXI.Sprite;

/**
 * The width of the sprite, setting this will actually modify the scale to acheive the value set
 *
 * @property width
 * @type Number
 */
Object.defineProperty(PIXI.Sprite.prototype, 'width', {
    get: function() {
        return this.scale.x * this.texture.frame.width;
    },
    set: function(value) {
    	this.scale.x = value / this.texture.frame.width
        this._width = value;
    }
});

/**
 * The height of the sprite, setting this will actually modify the scale to acheive the value set
 *
 * @property height
 * @type Number
 */
Object.defineProperty(PIXI.Sprite.prototype, 'height', {
    get: function() {
        return  this.scale.y * this.texture.frame.height;
    },
    set: function(value) {
    	this.scale.y = value / this.texture.frame.height
        this._height = value;
    }
});

/**
 * Sets the texture of the sprite
 *
 * @method setTexture
 * @param texture {Texture} The PIXI texture that is displayed by the sprite
 */
PIXI.Sprite.prototype.setTexture = function(texture)
{
	// stop current texture;
	if(this.texture.baseTexture != texture.baseTexture)
	{
		this.textureChange = true;	
		this.texture = texture;
		
		if(this.__renderGroup)
		{
			this.__renderGroup.updateTexture(this);
		}
	}
	else
	{
		this.texture = texture;
	}
	
	this.updateFrame = true;
}

/**
 * When the texture is updated, this event will fire to update the scale and frame
 *
 * @method onTextureUpdate
 * @param event
 * @private
 */
PIXI.Sprite.prototype.onTextureUpdate = function(event)
{
	//this.texture.removeEventListener( 'update', this.onTextureUpdateBind );
	
	// so if _width is 0 then width was not set..
	if(this._width)this.scale.x = this._width / this.texture.frame.width;
	if(this._height)this.scale.y = this._height / this.texture.frame.height;
	
	this.updateFrame = true;
}

// some helper functions..

/**
 * 
 * Helper function that creates a sprite that will contain a texture from the TextureCache based on the frameId
 * The frame ids are created when a Texture packer file has been loaded
 *
 * @method fromFrame
 * @static
 * @param frameId {String} The frame Id of the texture in the cache
 * @return {Sprite} A new Sprite using a texture from the texture cache matching the frameId
 */
PIXI.Sprite.fromFrame = function(frameId)
{
	var texture = PIXI.TextureCache[frameId];
	if(!texture)throw new Error("The frameId '"+ frameId +"' does not exist in the texture cache" + this);
	return new PIXI.Sprite(texture);
}

/**
 * 
 * Helper function that creates a sprite that will contain a texture based on an image url
 * If the image is not in the texture cache it will be loaded
 *
 * @method fromImage
 * @static
 * @param imageId {String} The image url of the texture
 * @return {Sprite} A new Sprite using a texture from the texture cache matching the image id
 */
PIXI.Sprite.fromImage = function(imageId)
{
	var texture = PIXI.Texture.fromImage(imageId);
	return new PIXI.Sprite(texture);
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A MovieClip is a simple way to display an animation depicted by a list of textures.
 *
 * @class MovieClip
 * @extends Sprite
 * @constructor
 * @param textures {Array<Texture>} an array of {Texture} objects that make up the animation
 */
PIXI.MovieClip = function(textures)
{
	PIXI.Sprite.call(this, textures[0]);

	/**
	 * The array of textures that make up the animation
	 *
	 * @property textures
	 * @type Array
	 */
	this.textures = textures;

	/**
	 * The speed that the MovieClip will play at. Higher is faster, lower is slower
	 *
	 * @property animationSpeed
	 * @type Number
	 * @default 1
	 */
	this.animationSpeed = 1;

	/**
	 * Whether or not the movie clip repeats after playing.
	 *
	 * @property loop
	 * @type Boolean
	 * @default true
	 */
	this.loop = true;

	/**
	 * Function to call when a MovieClip finishes playing
	 *
	 * @property onComplete
	 * @type Function
	 */
	this.onComplete = null;

	/**
	 * [read-only] The index MovieClips current frame (this may not have to be a whole number)
	 *
	 * @property currentFrame
	 * @type Number
	 * @default 0
	 * @readOnly
	 */
	this.currentFrame = 0;

	/**
	 * [read-only] Indicates if the MovieClip is currently playing
	 *
	 * @property playing
	 * @type Boolean
	 * @readOnly
	 */
	this.playing = false;
}

// constructor
PIXI.MovieClip.prototype = Object.create( PIXI.Sprite.prototype );
PIXI.MovieClip.prototype.constructor = PIXI.MovieClip;

/**
* [read-only] totalFrames is the total number of frames in the MovieClip. This is the same as number of textures
* assigned to the MovieClip.
*
* @property totalFrames
* @type Number
* @default 0
* @readOnly
*/
Object.defineProperty( PIXI.MovieClip.prototype, 'totalFrames', {
	get: function() {

		return this.textures.length;
	}
});


/**
 * Stops the MovieClip
 *
 * @method stop
 */
PIXI.MovieClip.prototype.stop = function()
{
	this.playing = false;
}

/**
 * Plays the MovieClip
 *
 * @method play
 */
PIXI.MovieClip.prototype.play = function()
{
	this.playing = true;
}

/**
 * Stops the MovieClip and goes to a specific frame
 *
 * @method gotoAndStop
 * @param frameNumber {Number} frame index to stop at
 */
PIXI.MovieClip.prototype.gotoAndStop = function(frameNumber)
{
	this.playing = false;
	this.currentFrame = frameNumber;
	var round = (this.currentFrame + 0.5) | 0;
	this.setTexture(this.textures[round % this.textures.length]);
}

/**
 * Goes to a specific frame and begins playing the MovieClip
 *
 * @method gotoAndPlay
 * @param frameNumber {Number} frame index to start at
 */
PIXI.MovieClip.prototype.gotoAndPlay = function(frameNumber)
{
	this.currentFrame = frameNumber;
	this.playing = true;
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.MovieClip.prototype.updateTransform = function()
{
	PIXI.Sprite.prototype.updateTransform.call(this);

	if(!this.playing)return;

	this.currentFrame += this.animationSpeed;

	var round = (this.currentFrame + 0.5) | 0;

	if(this.loop || round < this.textures.length)
	{
		this.setTexture(this.textures[round % this.textures.length]);
	}
	else if(round >= this.textures.length)
	{
		this.gotoAndStop(this.textures.length - 1);
		if(this.onComplete)
		{
			this.onComplete();
		}
	}
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.FilterBlock = function()
{
	this.visible = true;
	this.renderable = true;
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Text Object will create a line(s) of text to split a line you can use "\n"
 *
 * @class Text
 * @extends Sprite
 * @constructor
 * @param text {String} The copy that you would like the text to display
 * @param [style] {Object} The style parameters
 * @param [style.font] {String} default "bold 20pt Arial" The style and size of the font
 * @param [style.fill="black"] {Object} A canvas fillstyle that will be used on the text eg "red", "#00FF00"
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 * @param [style.stroke] {String} A canvas fillstyle that will be used on the text stroke eg "blue", "#FCFF00"
 * @param [style.strokeThickness=0] {Number} A number that represents the thickness of the stroke. Default is 0 (no stroke)
 * @param [style.wordWrap=false] {Boolean} Indicates if word wrap should be used
 * @param [style.wordWrapWidth=100] {Number} The width at which text will wrap
 */
PIXI.Text = function(text, style)
{
    this.canvas = document.createElement("canvas");
    this.context = this.canvas.getContext("2d");
    PIXI.Sprite.call(this, PIXI.Texture.fromCanvas(this.canvas));

    this.setText(text);
    this.setStyle(style);

    this.updateText();
    this.dirty = false;
};

// constructor
PIXI.Text.prototype = Object.create(PIXI.Sprite.prototype);
PIXI.Text.prototype.constructor = PIXI.Text;

/**
 * Set the style of the text
 *
 * @method setStyle
 * @param [style] {Object} The style parameters
 * @param [style.font="bold 20pt Arial"] {String} The style and size of the font
 * @param [style.fill="black"] {Object} A canvas fillstyle that will be used on the text eg "red", "#00FF00"
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 * @param [style.stroke="black"] {String} A canvas fillstyle that will be used on the text stroke eg "blue", "#FCFF00"
 * @param [style.strokeThickness=0] {Number} A number that represents the thickness of the stroke. Default is 0 (no stroke)
 * @param [style.wordWrap=false] {Boolean} Indicates if word wrap should be used
 * @param [style.wordWrapWidth=100] {Number} The width at which text will wrap
 */
PIXI.Text.prototype.setStyle = function(style)
{
    style = style || {};
    style.font = style.font || "bold 20pt Arial";
    style.fill = style.fill || "black";
    style.align = style.align || "left";
    style.stroke = style.stroke || "black"; //provide a default, see: https://github.com/GoodBoyDigital/pixi.js/issues/136
    style.strokeThickness = style.strokeThickness || 0;
    style.wordWrap = style.wordWrap || false;
    style.wordWrapWidth = style.wordWrapWidth || 100;
    this.style = style;
    this.dirty = true;
};

/**
 * Set the copy for the text object. To split a line you can use "\n"
 *
 * @methos setText
 * @param {String} text The copy that you would like the text to display
 */
PIXI.Text.prototype.setText = function(text)
{
    this.text = text.toString() || " ";
    this.dirty = true;
};

/**
 * Renders text
 *
 * @method updateText
 * @private
 */
PIXI.Text.prototype.updateText = function()
{
	this.context.font = this.style.font;

	var outputText = this.text;

	// word wrap
	// preserve original text
	if(this.style.wordWrap)outputText = this.wordWrap(this.text);

	//split text into lines
	var lines = outputText.split(/(?:\r\n|\r|\n)/);

	//calculate text width
	var lineWidths = [];
	var maxLineWidth = 0;
	for (var i = 0; i < lines.length; i++)
	{
		var lineWidth = this.context.measureText(lines[i]).width;
		lineWidths[i] = lineWidth;
		maxLineWidth = Math.max(maxLineWidth, lineWidth);
	}
	this.canvas.width = maxLineWidth + this.style.strokeThickness;

	//calculate text height
	var lineHeight = this.determineFontHeight("font: " + this.style.font  + ";") + this.style.strokeThickness;
	this.canvas.height = lineHeight * lines.length;

	//set canvas text styles
	this.context.fillStyle = this.style.fill;
	this.context.font = this.style.font;

	this.context.strokeStyle = this.style.stroke;
	this.context.lineWidth = this.style.strokeThickness;

	this.context.textBaseline = "top";

	//draw lines line by line
	for (i = 0; i < lines.length; i++)
	{
		var linePosition = new PIXI.Point(this.style.strokeThickness / 2, this.style.strokeThickness / 2 + i * lineHeight);

		if(this.style.align == "right")
		{
			linePosition.x += maxLineWidth - lineWidths[i];
		}
		else if(this.style.align == "center")
		{
			linePosition.x += (maxLineWidth - lineWidths[i]) / 2;
		}

		if(this.style.stroke && this.style.strokeThickness)
		{
			this.context.strokeText(lines[i], linePosition.x, linePosition.y);
		}

		if(this.style.fill)
		{
			this.context.fillText(lines[i], linePosition.x, linePosition.y);
		}
	}

    this.updateTexture();
};

/**
 * Updates texture size based on canvas size
 *
 * @method updateTexture
 * @private
 */
PIXI.Text.prototype.updateTexture = function()
{
    this.texture.baseTexture.width = this.canvas.width;
    this.texture.baseTexture.height = this.canvas.height;
    this.texture.frame.width = this.canvas.width;
    this.texture.frame.height = this.canvas.height;

  	this._width = this.canvas.width;
    this._height = this.canvas.height;

    PIXI.texturesToUpdate.push(this.texture.baseTexture);
};

/**
 * Updates the transfor of this object
 *
 * @method updateTransform
 * @private
 */
PIXI.Text.prototype.updateTransform = function()
{
	if(this.dirty)
	{
		this.updateText();
		this.dirty = false;
	}

	PIXI.Sprite.prototype.updateTransform.call(this);
};

/*
 * http://stackoverflow.com/users/34441/ellisbben
 * great solution to the problem!
 *
 * @method determineFontHeight
 * @param fontStyle {Object}
 * @private
 */
PIXI.Text.prototype.determineFontHeight = function(fontStyle)
{
	// build a little reference dictionary so if the font style has been used return a
	// cached version...
	var result = PIXI.Text.heightCache[fontStyle];

	if(!result)
	{
		var body = document.getElementsByTagName("body")[0];
		var dummy = document.createElement("div");
		var dummyText = document.createTextNode("M");
		dummy.appendChild(dummyText);
		dummy.setAttribute("style", fontStyle + ';position:absolute;top:0;left:0');
		body.appendChild(dummy);

		result = dummy.offsetHeight;
		PIXI.Text.heightCache[fontStyle] = result;

		body.removeChild(dummy);
	}

	return result;
};

/**
 * Applies newlines to a string to have it optimally fit into the horizontal
 * bounds set by the Text object's wordWrapWidth property.
 *
 * @method wordWrap
 * @param text {String}
 * @private
 */
PIXI.Text.prototype.wordWrap = function(text)
{
	// Greedy wrapping algorithm that will wrap words as the line grows longer
	// than its horizontal bounds.
	var result = "";
	var lines = text.split("\n");
	for (var i = 0; i < lines.length; i++)
	{
		var spaceLeft = this.style.wordWrapWidth;
		var words = lines[i].split(" ");
		for (var j = 0; j < words.length; j++)
		{
			var wordWidth = this.context.measureText(words[j]).width;
			var wordWidthWithSpace = wordWidth + this.context.measureText(" ").width;
			if(wordWidthWithSpace > spaceLeft)
			{
				// Skip printing the newline if it's the first word of the line that is
				// greater than the word wrap width.
				if(j > 0)
				{
					result += "\n";
				}
				result += words[j] + " ";
				spaceLeft = this.style.wordWrapWidth - wordWidth;
			}
			else
			{
				spaceLeft -= wordWidthWithSpace;
				result += words[j] + " ";
			}
		}
		result += "\n";
	}
	return result;
};

/**
 * Destroys this text object
 *
 * @method destroy
 * @param destroyTexture {Boolean}
 */
PIXI.Text.prototype.destroy = function(destroyTexture)
{
	if(destroyTexture)
	{
		this.texture.destroy();
	}

};

PIXI.Text.heightCache = {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Text Object will create a line(s) of text using bitmap font. To split a line you can use "\n", "\r" or "\r\n"
 * You can generate the fnt files using
 * http://www.angelcode.com/products/bmfont/ for windows or
 * http://www.bmglyph.com/ for mac.
 *
 * @class BitmapText
 * @extends DisplayObjectContainer
 * @constructor
 * @param text {String} The copy that you would like the text to display
 * @param style {Object} The style parameters
 * @param style.font {String} The size (optional) and bitmap font id (required) eq "Arial" or "20px Arial" (must have loaded previously)
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 */
PIXI.BitmapText = function(text, style)
{
    PIXI.DisplayObjectContainer.call(this);

    this.setText(text);
    this.setStyle(style);
    this.updateText();
    this.dirty = false

};

// constructor
PIXI.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype);
PIXI.BitmapText.prototype.constructor = PIXI.BitmapText;

/**
 * Set the copy for the text object
 *
 * @method setText
 * @param text {String} The copy that you would like the text to display
 */
PIXI.BitmapText.prototype.setText = function(text)
{
    this.text = text || " ";
    this.dirty = true;
};

/**
 * Set the style of the text
 *
 * @method setStyle
 * @param style {Object} The style parameters
 * @param style.font {String} The size (optional) and bitmap font id (required) eq "Arial" or "20px Arial" (must have loaded previously)
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 */
PIXI.BitmapText.prototype.setStyle = function(style)
{
    style = style || {};
    style.align = style.align || "left";
    this.style = style;

    var font = style.font.split(" ");
    this.fontName = font[font.length - 1];
    this.fontSize = font.length >= 2 ? parseInt(font[font.length - 2], 10) : PIXI.BitmapText.fonts[this.fontName].size;

    this.dirty = true;
};

/**
 * Renders text
 *
 * @method updateText
 * @private
 */
PIXI.BitmapText.prototype.updateText = function()
{
    var data = PIXI.BitmapText.fonts[this.fontName];
    var pos = new PIXI.Point();
    var prevCharCode = null;
    var chars = [];
    var maxLineWidth = 0;
    var lineWidths = [];
    var line = 0;
    var scale = this.fontSize / data.size;
    for(var i = 0; i < this.text.length; i++)
    {
        var charCode = this.text.charCodeAt(i);
        if(/(?:\r\n|\r|\n)/.test(this.text.charAt(i)))
        {
            lineWidths.push(pos.x);
            maxLineWidth = Math.max(maxLineWidth, pos.x);
            line++;

            pos.x = 0;
            pos.y += data.lineHeight;
            prevCharCode = null;
            continue;
        }

        var charData = data.chars[charCode];
        if(!charData) continue;

        if(prevCharCode && charData[prevCharCode])
        {
           pos.x += charData.kerning[prevCharCode];
        }
        chars.push({texture:charData.texture, line: line, charCode: charCode, position: new PIXI.Point(pos.x + charData.xOffset, pos.y + charData.yOffset)});
        pos.x += charData.xAdvance;

        prevCharCode = charCode;
    }

    lineWidths.push(pos.x);
    maxLineWidth = Math.max(maxLineWidth, pos.x);

    var lineAlignOffsets = [];
    for(i = 0; i <= line; i++)
    {
        var alignOffset = 0;
        if(this.style.align == "right")
        {
            alignOffset = maxLineWidth - lineWidths[i];
        }
        else if(this.style.align == "center")
        {
            alignOffset = (maxLineWidth - lineWidths[i]) / 2;
        }
        lineAlignOffsets.push(alignOffset);
    }

    for(i = 0; i < chars.length; i++)
    {
        var c = new PIXI.Sprite(chars[i].texture)//PIXI.Sprite.fromFrame(chars[i].charCode);
        c.position.x = (chars[i].position.x + lineAlignOffsets[chars[i].line]) * scale;
        c.position.y = chars[i].position.y * scale;
        c.scale.x = c.scale.y = scale;
        this.addChild(c);
    }

    this.width = pos.x * scale;
    this.height = (pos.y + data.lineHeight) * scale;
};

/**
 * Updates the transfor of this object
 *
 * @method updateTransform
 * @private
 */
PIXI.BitmapText.prototype.updateTransform = function()
{
	if(this.dirty)
	{
        while(this.children.length > 0)
        {
            this.removeChild(this.getChildAt(0));
        }
        this.updateText();

        this.dirty = false;
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
};

PIXI.BitmapText.fonts = {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */
 
 /**
 * The interaction manager deals with mouse and touch events. Any DisplayObject can be interactive
 * This manager also supports multitouch.
 *
 * @class InteractionManager
 * @constructor
 * @param stage {Stage} The stage to handle interactions
 */
PIXI.InteractionManager = function(stage)
{
	/**
	 * a refference to the stage
	 *
	 * @property stage
	 * @type Stage
	 */
	this.stage = stage;

	/**
	 * the mouse data
	 *
	 * @property mouse
	 * @type InteractionData
	 */
	this.mouse = new PIXI.InteractionData();

	/**
	 * an object that stores current touches (InteractionData) by id reference
	 *
	 * @property touchs
	 * @type Object
	 */
	this.touchs = {};


	
	// helpers
	this.tempPoint = new PIXI.Point();
	//this.tempMatrix =  mat3.create();

	this.mouseoverEnabled = true;

	//tiny little interactiveData pool!
	this.pool = [];

	this.interactiveItems = [];
	this.interactionDOMElement = null;

	//this will make it so that you dont have to call bind all the time
	this.onMouseMove = this.onMouseMove.bind( this );
	this.onMouseDown = this.onMouseDown.bind(this);
	this.onMouseOut = this.onMouseOut.bind(this);
	this.onMouseUp = this.onMouseUp.bind(this);

	this.onTouchStart = this.onTouchStart.bind(this);
	this.onTouchEnd = this.onTouchEnd.bind(this);
	this.onTouchMove = this.onTouchMove.bind(this);
	
	
	this.last = 0;
}

// constructor
PIXI.InteractionManager.prototype.constructor = PIXI.InteractionManager;

/**
 * Collects an interactive sprite recursively to have their interactions managed
 *
 * @method collectInteractiveSprite
 * @param displayObject {DisplayObject} the displayObject to collect
 * @param iParent {DisplayObject}
 * @private
 */
PIXI.InteractionManager.prototype.collectInteractiveSprite = function(displayObject, iParent)
{
	var children = displayObject.children;
	var length = children.length;
	
	/// make an interaction tree... {item.__interactiveParent}
	for (var i = length-1; i >= 0; i--)
	{
		var child = children[i];
		
//		if(child.visible) {
			// push all interactive bits
			if(child.interactive)
			{
				iParent.interactiveChildren = true;
				//child.__iParent = iParent;
				this.interactiveItems.push(child);

				if(child.children.length > 0)
				{
					this.collectInteractiveSprite(child, child);
				}
			}
			else
			{
				child.__iParent = null;

				if(child.children.length > 0)
				{
					this.collectInteractiveSprite(child, iParent);
				}
			}
//		}
	}
}

/**
 * Sets the target for event delegation
 *
 * @method setTarget
 * @param target {WebGLRenderer|CanvasRenderer} the renderer to bind events to
 * @private
 */
PIXI.InteractionManager.prototype.setTarget = function(target)
{
	this.target = target;

	//check if the dom element has been set. If it has don't do anything
	if( this.interactionDOMElement === null ) {

		this.setTargetDomElement( target.view );
	}

 	document.body.addEventListener('mouseup',  this.onMouseUp, true);
}


/**
 * Sets the dom element which will receive mouse/touch events. This is useful for when you have other DOM
 * elements ontop of the renderers Canvas element. With this you'll be able to delegate another dom element
 * to receive those events
 *
 * @method setTargetDomElement
 * @param domElement {DOMElement} the dom element which will receive mouse and touch events
 * @private
 */
PIXI.InteractionManager.prototype.setTargetDomElement = function(domElement)
{
	//remove previouse listeners
	if( this.interactionDOMElement !== null ) 
	{
		this.interactionDOMElement.style['-ms-content-zooming'] = '';
    	this.interactionDOMElement.style['-ms-touch-action'] = '';

		this.interactionDOMElement.removeEventListener('mousemove',  this.onMouseMove, true);
		this.interactionDOMElement.removeEventListener('mousedown',  this.onMouseDown, true);
	 	this.interactionDOMElement.removeEventListener('mouseout',   this.onMouseOut, true);

	 	// aint no multi touch just yet!
		this.interactionDOMElement.removeEventListener('touchstart', this.onTouchStart, true);
		this.interactionDOMElement.removeEventListener('touchend', this.onTouchEnd, true);
		this.interactionDOMElement.removeEventListener('touchmove', this.onTouchMove, true);
	}


	if (window.navigator.msPointerEnabled) 
	{
		// time to remove some of that zoom in ja..
		domElement.style['-ms-content-zooming'] = 'none';
    	domElement.style['-ms-touch-action'] = 'none';
    
		// DO some window specific touch!
	}

	this.interactionDOMElement = domElement;

	domElement.addEventListener('mousemove',  this.onMouseMove, true);
	domElement.addEventListener('mousedown',  this.onMouseDown, true);
 	domElement.addEventListener('mouseout',   this.onMouseOut, true);

 	// aint no multi touch just yet!
	domElement.addEventListener('touchstart', this.onTouchStart, true);
	domElement.addEventListener('touchend', this.onTouchEnd, true);
	domElement.addEventListener('touchmove', this.onTouchMove, true);
}


/**
 * updates the state of interactive objects
 *
 * @method update
 * @private
 */
PIXI.InteractionManager.prototype.update = function()
{
	if(!this.target)return;
	
	// frequency of 30fps??
	var now = Date.now();
	var diff = now - this.last;
	diff = (diff * 30) / 1000;
	if(diff < 1)return;
	this.last = now;
	//
	
	// ok.. so mouse events??
	// yes for now :)
	// OPTIMSE - how often to check??
	if(this.dirty)
	{
		this.dirty = false;
		
		var len = this.interactiveItems.length;
		
		for (var i=0; i < len; i++) {
		  this.interactiveItems[i].interactiveChildren = false;
		}
		
		this.interactiveItems = [];
		
		if(this.stage.interactive)this.interactiveItems.push(this.stage);
		// go through and collect all the objects that are interactive..
		this.collectInteractiveSprite(this.stage, this.stage);
	}
	
	// loop through interactive objects!
	var length = this.interactiveItems.length;
	
	this.interactionDOMElement.style.cursor = "default";	
				
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		
		//if(!item.visible)continue;
		
		// OPTIMISATION - only calculate every time if the mousemove function exists..
		// OK so.. does the object have any other interactive functions?
		// hit-test the clip!
		
		
		if(item.mouseover || item.mouseout || item.buttonMode)
		{
			// ok so there are some functions so lets hit test it..
			item.__hit = this.hitTest(item, this.mouse);
			this.mouse.target = item;
			// ok so deal with interactions..
			// loks like there was a hit!
			if(item.__hit)
			{
				if(item.buttonMode) this.interactionDOMElement.style.cursor = "pointer";	
				
				if(!item.__isOver)
				{
					
					if(item.mouseover)item.mouseover(this.mouse);
					item.__isOver = true;	
				}
			}
			else
			{
				if(item.__isOver)
				{
					// roll out!
					if(item.mouseout)item.mouseout(this.mouse);
					item.__isOver = false;	
				}
			}
		}
		
		// --->
	}
}

/**
 * Is called when the mouse moves accross the renderer element
 *
 * @method onMouseMove
 * @param event {Event} The DOM event of the mouse moving
 * @private
 */
PIXI.InteractionManager.prototype.onMouseMove = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	// TODO optimize by not check EVERY TIME! maybe half as often? //
	var rect = this.interactionDOMElement.getBoundingClientRect();
	
	this.mouse.global.x = (event.clientX - rect.left) * (this.target.width / rect.width);
	this.mouse.global.y = (event.clientY - rect.top) * ( this.target.height / rect.height);
	
	var length = this.interactiveItems.length;
	var global = this.mouse.global;
	
	
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mousemove)
		{
			//call the function!
			item.mousemove(this.mouse);
		}
	}
}

/**
 * Is called when the mouse button is pressed down on the renderer element
 *
 * @method onMouseDown
 * @param event {Event} The DOM event of a mouse button being pressed down
 * @private
 */
PIXI.InteractionManager.prototype.onMouseDown = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	
	// loop through inteaction tree...
	// hit test each item! -> 
	// get interactive items under point??
	//stage.__i
	var length = this.interactiveItems.length;
	var global = this.mouse.global;
	
	var index = 0;
	var parent = this.stage;
	
	// while 
	// hit test 
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mousedown || item.click)
		{
			item.__mouseIsDown = true;
			item.__hit = this.hitTest(item, this.mouse);
			
			if(item.__hit)
			{
				//call the function!
				if(item.mousedown)item.mousedown(this.mouse);
				item.__isDown = true;
				
				// just the one!
				if(!item.interactiveChildren)break;
			}
		}
	}
}


PIXI.InteractionManager.prototype.onMouseOut = function(event)
{
	var length = this.interactiveItems.length;
	
	this.interactionDOMElement.style.cursor = "default";	
				
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.__isOver)
		{
			this.mouse.target = item;
			if(item.mouseout)item.mouseout(this.mouse);
			item.__isOver = false;	
		}
	}
}

/**
 * Is called when the mouse button is released on the renderer element
 *
 * @method onMouseUp
 * @param event {Event} The DOM event of a mouse button being released
 * @private
 */
PIXI.InteractionManager.prototype.onMouseUp = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	
	var global = this.mouse.global;
	
	
	var length = this.interactiveItems.length;
	var up = false;
	
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mouseup || item.mouseupoutside || item.click)
		{
			item.__hit = this.hitTest(item, this.mouse);
			
			if(item.__hit && !up)
			{
				//call the function!
				if(item.mouseup)
				{
					item.mouseup(this.mouse);
				}
				if(item.__isDown)
				{
					if(item.click)item.click(this.mouse);
				}
				
				if(!item.interactiveChildren)up = true;
			}
			else
			{
				if(item.__isDown)
				{
					if(item.mouseupoutside)item.mouseupoutside(this.mouse);
				}
			}
		
			item.__isDown = false;	
		}
	}
}

/**
 * Tests if the current mouse coords hit a sprite
 *
 * @method hitTest
 * @param item {DisplayObject} The displayObject to test for a hit
 * @param interactionData {InteractionData} The interactiondata object to update in the case of a hit
 * @private
 */
PIXI.InteractionManager.prototype.hitTest = function(item, interactionData)
{
	var global = interactionData.global;
	
	if(item.vcount !== PIXI.visibleCount)return false;

	var isSprite = (item instanceof PIXI.Sprite),
		worldTransform = item.worldTransform,
		a00 = worldTransform[0], a01 = worldTransform[1], a02 = worldTransform[2],
		a10 = worldTransform[3], a11 = worldTransform[4], a12 = worldTransform[5],
		id = 1 / (a00 * a11 + a01 * -a10),
		x = a11 * id * global.x + -a01 * id * global.y + (a12 * a01 - a02 * a11) * id,
		y = a00 * id * global.y + -a10 * id * global.x + (-a12 * a00 + a02 * a10) * id;

	interactionData.target = item;
	
	//a sprite or display object with a hit area defined
	if(item.hitArea && item.hitArea.contains) {
		if(item.hitArea.contains(x, y)) {
			//if(isSprite)
			interactionData.target = item;

			return true;
		}
		
		return false;
	}
	// a sprite with no hitarea defined
	else if(isSprite)
	{
		var width = item.texture.frame.width,
			height = item.texture.frame.height,
			x1 = -width * item.anchor.x,
			y1;
		
		if(x > x1 && x < x1 + width)
		{
			y1 = -height * item.anchor.y;
		
			if(y > y1 && y < y1 + height)
			{
				// set the target property if a hit is true!
				interactionData.target = item
				return true;
			}
		}
	}

	var length = item.children.length;
	
	for (var i = 0; i < length; i++)
	{
		var tempItem = item.children[i];
		var hit = this.hitTest(tempItem, interactionData);
		if(hit)
		{
			// hmm.. TODO SET CORRECT TARGET?
			interactionData.target = item
			return true;
		}
	}

	return false;	
}

/**
 * Is called when a touch is moved accross the renderer element
 *
 * @method onTouchMove
 * @param event {Event} The DOM event of a touch moving accross the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchMove = function(event)
{
	var rect = this.interactionDOMElement.getBoundingClientRect();
	var changedTouches = event.changedTouches;
	
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		var touchData = this.touchs[touchEvent.identifier];
		touchData.originalEvent =  event || window.event;
		
		// update the touch position
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
	}
	
	var length = this.interactiveItems.length;
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		if(item.touchmove)item.touchmove(touchData);
	}
}

/**
 * Is called when a touch is started on the renderer element
 *
 * @method onTouchStart
 * @param event {Event} The DOM event of a touch starting on the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchStart = function(event)
{
	var rect = this.interactionDOMElement.getBoundingClientRect();
	
	var changedTouches = event.changedTouches;
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		
		var touchData = this.pool.pop();
		if(!touchData)touchData = new PIXI.InteractionData();
		
		touchData.originalEvent =  event || window.event;
		
		this.touchs[touchEvent.identifier] = touchData;
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
		
		var length = this.interactiveItems.length;
		
		for (var j = 0; j < length; j++)
		{
			var item = this.interactiveItems[j];
			
			if(item.touchstart || item.tap)
			{
				item.__hit = this.hitTest(item, touchData);
				
				if(item.__hit)
				{
					//call the function!
					if(item.touchstart)item.touchstart(touchData);
					item.__isDown = true;
					item.__touchData = touchData;
					
					if(!item.interactiveChildren)break;
				}
			}
		}
	}
}

/**
 * Is called when a touch is ended on the renderer element
 *
 * @method onTouchEnd
 * @param event {Event} The DOM event of a touch ending on the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchEnd = function(event)
{
	//this.mouse.originalEvent = event || window.event; //IE uses window.event
	var rect = this.interactionDOMElement.getBoundingClientRect();
	var changedTouches = event.changedTouches;
	
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		var touchData = this.touchs[touchEvent.identifier];
		var up = false;
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
		
		var length = this.interactiveItems.length;
		for (var j = 0; j < length; j++)
		{
			var item = this.interactiveItems[j];
			var itemTouchData = item.__touchData; // <-- Here!
			item.__hit = this.hitTest(item, touchData);
		
			if(itemTouchData == touchData)
			{
				// so this one WAS down...
				touchData.originalEvent =  event || window.event;
				// hitTest??
				
				if(item.touchend || item.tap)
				{
					if(item.__hit && !up)
					{
						if(item.touchend)item.touchend(touchData);
						if(item.__isDown)
						{
							if(item.tap)item.tap(touchData);
						}
						
						if(!item.interactiveChildren)up = true;
					}
					else
					{
						if(item.__isDown)
						{
							if(item.touchendoutside)item.touchendoutside(touchData);
						}
					}
					
					item.__isDown = false;
				}
				
				item.__touchData = null;
					
			}
			else
			{
				
			}
		}
		// remove the touch..
		this.pool.push(touchData);
		this.touchs[touchEvent.identifier] = null;
	}
}

/**
 * Holds all information related to an Interaction event
 *
 * @class InteractionData
 * @constructor
 */
PIXI.InteractionData = function()
{
	/**
	 * This point stores the global coords of where the touch/mouse event happened
	 *
	 * @property global 
	 * @type Point
	 */
	this.global = new PIXI.Point();
	
	// this is here for legacy... but will remove
	this.local = new PIXI.Point();

	/**
	 * The target Sprite that was interacted with
	 *
	 * @property target
	 * @type Sprite
	 */
	this.target;

	/**
	 * When passed to an event handler, this will be the original DOM Event that was captured
	 *
	 * @property originalEvent
	 * @type Event
	 */
	this.originalEvent;
}

/**
 * This will return the local coords of the specified displayObject for this InteractionData
 *
 * @method getLocalPosition
 * @param displayObject {DisplayObject} The DisplayObject that you would like the local coords off
 * @return {Point} A point containing the coords of the InteractionData position relative to the DisplayObject
 */
PIXI.InteractionData.prototype.getLocalPosition = function(displayObject)
{
	var worldTransform = displayObject.worldTransform;
	var global = this.global;
	
	// do a cheeky transform to get the mouse coords;
	var a00 = worldTransform[0], a01 = worldTransform[1], a02 = worldTransform[2],
        a10 = worldTransform[3], a11 = worldTransform[4], a12 = worldTransform[5],
        id = 1 / (a00 * a11 + a01 * -a10);
	// set the mouse coords...
	return new PIXI.Point(a11 * id * global.x + -a01 * id * global.y + (a12 * a01 - a02 * a11) * id,
							   a00 * id * global.y + -a10 * id * global.x + (-a12 * a00 + a02 * a10) * id)
}

// constructor
PIXI.InteractionData.prototype.constructor = PIXI.InteractionData;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Stage represents the root of the display tree. Everything connected to the stage is rendered
 *
 * @class Stage
 * @extends DisplayObjectContainer
 * @constructor
 * @param backgroundColor {Number} the background color of the stage, easiest way to pass this in is in hex format
 *		like: 0xFFFFFF for white
 */
PIXI.Stage = function(backgroundColor)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * [read-only] Current transform of the object based on world (parent) factors
	 *
	 * @property worldTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.worldTransform = PIXI.mat3.create();

	/**
	 * Whether or not the stage is interactive
	 *
	 * @property interactive
	 * @type Boolean
	 */
	this.interactive = true;

	/**
	 * The interaction manage for this stage, manages all interactive activity on the stage
	 *
	 * @property interactive
	 * @type InteractionManager
	 */
	this.interactionManager = new PIXI.InteractionManager(this);

	/**
	 * Whether the stage is dirty and needs to have interactions updated
	 *
	 * @property dirty
	 * @type Boolean
	 * @private
	 */
	this.dirty = true;

	this.__childrenAdded = [];
	this.__childrenRemoved = [];

	//the stage is it's own stage
	this.stage = this;

	//optimize hit detection a bit
	this.stage.hitArea = new PIXI.Rectangle(0,0,100000, 100000);

	this.setBackgroundColor(backgroundColor);
	this.worldVisible = true;
}

// constructor
PIXI.Stage.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Stage.prototype.constructor = PIXI.Stage;

/**
 * Sets another DOM element which can receive mouse/touch interactions instead of the default Canvas element.
 * This is useful for when you have other DOM elements ontop of the Canvas element.
 *
 * @method setInteractionDelegate
 * @param domElement {DOMElement} This new domElement which will receive mouse/touch events
 */
PIXI.Stage.prototype.setInteractionDelegate = function(domElement)
{
	this.interactionManager.setTargetDomElement( domElement );
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.Stage.prototype.updateTransform = function()
{
	this.worldAlpha = 1;		
	this.vcount = PIXI.visibleCount;
	
	for(var i=0,j=this.children.length; i<j; i++)
	{
		this.children[i].updateTransform();	
	}
	
	if(this.dirty)
	{
		this.dirty = false;
		// update interactive!
		this.interactionManager.dirty = true;
	}
	
	
	if(this.interactive)this.interactionManager.update();
}

/**
 * Sets the background color for the stage
 *
 * @method setBackgroundColor
 * @param backgroundColor {Number} the color of the background, easiest way to pass this in is in hex format
 *		like: 0xFFFFFF for white
 */
PIXI.Stage.prototype.setBackgroundColor = function(backgroundColor)
{
	this.backgroundColor = backgroundColor || 0x000000;
	this.backgroundColorSplit = HEXtoRGB(this.backgroundColor);
	var hex = this.backgroundColor.toString(16);
	hex = "000000".substr(0, 6 - hex.length) + hex;
	this.backgroundColorString = "#" + hex;
}

/**
 * This will return the point containing global coords of the mouse.
 *
 * @method getMousePosition
 * @return {Point} The point containing the coords of the global InteractionData position.
 */
PIXI.Stage.prototype.getMousePosition = function()
{
	return this.interactionManager.mouse.global;
}

// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating

// requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel

// MIT license

/**
 * A polyfill for requestAnimationFrame
 *
 * @method requestAnimationFrame
 */
/**
 * A polyfill for cancelAnimationFrame
 *
 * @method cancelAnimationFrame
 */
var lastTime = 0;
var vendors = ['ms', 'moz', 'webkit', 'o'];
for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']
                               || window[vendors[x]+'CancelRequestAnimationFrame'];
}

if (!window.requestAnimationFrame)
    window.requestAnimationFrame = function(callback, element) {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function() { callback(currTime + timeToCall); },
          timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };

if (!window.cancelAnimationFrame)
    window.cancelAnimationFrame = function(id) {
        clearTimeout(id);
    };

window.requestAnimFrame = window.requestAnimationFrame;

/**
 * Converts a hex color number to an [R, G, B] array
 *
 * @method HEXtoRGB
 * @param hex {Number}
 */
function HEXtoRGB(hex) {
	return [(hex >> 16 & 0xFF) / 255, ( hex >> 8 & 0xFF) / 255, (hex & 0xFF)/ 255];
}

/**
 * A polyfill for Function.prototype.bind
 *
 * @method bind
 */
if (typeof Function.prototype.bind != 'function') {
  Function.prototype.bind = (function () {
    var slice = Array.prototype.slice;
    return function (thisArg) {
      var target = this, boundArgs = slice.call(arguments, 1);

      if (typeof target != 'function') throw new TypeError();

      function bound() {
	var args = boundArgs.concat(slice.call(arguments));
	target.apply(this instanceof bound ? this : thisArg, args);
      }

      bound.prototype = (function F(proto) {
          proto && (F.prototype = proto);
          if (!(this instanceof F)) return new F;
	})(target.prototype);

      return bound;
    };
  })();
}

/**
 * A wrapper for ajax requests to be handled cross browser
 *
 * @class AjaxRequest
 * @constructor
 */
var AjaxRequest = PIXI.AjaxRequest = function()
{
	var activexmodes = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"] //activeX versions to check for in IE

	if (window.ActiveXObject)
	{ //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
		for (var i=0; i<activexmodes.length; i++)
		{
			try{
				return new ActiveXObject(activexmodes[i])
			}
   			catch(e){
    			//suppress error
   			}
		}
	}
	else if (window.XMLHttpRequest) // if Mozilla, Safari etc
  	{
  		return new XMLHttpRequest()
 	}
 	else
 	{
		return false;
 	}
}

/*
 * DEBUGGING ONLY
 */
PIXI.runList = function(item)
{
	console.log(">>>>>>>>>")
	console.log("_")
	var safe = 0;
	var tmp = item.first;
	console.log(tmp);

	while(tmp._iNext)
	{
		safe++;
		tmp = tmp._iNext;
		console.log(tmp);
	//	console.log(tmp);

		if(safe > 100)
		{
			console.log("BREAK")
			break
		}
	}
}






/**
 * https://github.com/mrdoob/eventtarget.js/
 * THankS mr DOob!
 */

/**
 * Adds event emitter functionality to a class
 *
 * @class EventTarget
 * @example
 *		function MyEmitter() {
 *			PIXI.EventTarget.call(this); //mixes in event target stuff
 *		}
 *
 *		var em = new MyEmitter();
 *		em.emit({ type: 'eventName', data: 'some data' });
 */
PIXI.EventTarget = function () {

	var listeners = {};

	this.addEventListener = this.on = function ( type, listener ) {


		if ( listeners[ type ] === undefined ) {

			listeners[ type ] = [];

		}

		if ( listeners[ type ].indexOf( listener ) === - 1 ) {

			listeners[ type ].push( listener );
		}

	};

	this.dispatchEvent = this.emit = function ( event ) {

		if ( !listeners[ event.type ] || !listeners[ event.type ].length ) {

			return;

		}

		for(var i = 0, l = listeners[ event.type ].length; i < l; i++) {

			listeners[ event.type ][ i ]( event );

		}

	};

	this.removeEventListener = this.off = function ( type, listener ) {

		var index = listeners[ type ].indexOf( listener );

		if ( index !== - 1 ) {

			listeners[ type ].splice( index, 1 );

		}

	};

};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * This helper function will automatically detect which renderer you should be using.
 * WebGL is the preferred renderer as it is a lot fastest. If webGL is not supported by
 * the browser then this function will return a canvas renderer
 *
 * @method autoDetectRenderer
 * @static
 * @param width {Number} the width of the renderers view
 * @param height {Number} the height of the renderers view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 * @param antialias=false {Boolean} sets antialias (only applicable in webGL chrome at the moment)
 *
 * antialias
 */
PIXI.autoDetectRenderer = function(width, height, view, transparent, antialias)
{
	if(!width)width = 800;
	if(!height)height = 600;

	// BORROWED from Mr Doob (mrdoob.com)
	var webgl = ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )();

	if(webgl)
	{
		var ie =  (navigator.userAgent.toLowerCase().indexOf('msie') != -1);
		 webgl = !ie;
	}
	
	//console.log(webgl);
	if( webgl )
	{
		return new PIXI.WebGLRenderer(width, height, view, transparent, antialias);
	}

	return	new PIXI.CanvasRenderer(width, height, view, transparent);
};



/*
	PolyK library
	url: http://polyk.ivank.net
	Released under MIT licence.

	Copyright (c) 2012 Ivan Kuckir

	Permission is hereby granted, free of charge, to any person
	obtaining a copy of this software and associated documentation
	files (the "Software"), to deal in the Software without
	restriction, including without limitation the rights to use,
	copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following
	conditions:

	The above copyright notice and this permission notice shall be
	included in all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
	OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
	WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.

	This is an amazing lib!

	slightly modified by mat groves (matgroves.com);
*/

PIXI.PolyK = {};

/**
 * Triangulates shapes for webGL graphic fills
 *
 * @method Triangulate
 * @namespace PolyK
 * @constructor
 */
PIXI.PolyK.Triangulate = function(p)
{
	var sign = true;

	var n = p.length>>1;
	if(n<3) return [];
	var tgs = [];
	var avl = [];
	for(var i=0; i<n; i++) avl.push(i);

	var i = 0;
	var al = n;
	while(al > 3)
	{
		var i0 = avl[(i+0)%al];
		var i1 = avl[(i+1)%al];
		var i2 = avl[(i+2)%al];

		var ax = p[2*i0],  ay = p[2*i0+1];
		var bx = p[2*i1],  by = p[2*i1+1];
		var cx = p[2*i2],  cy = p[2*i2+1];

		var earFound = false;
		if(PIXI.PolyK._convex(ax, ay, bx, by, cx, cy, sign))
		{
			earFound = true;
			for(var j=0; j<al; j++)
			{
				var vi = avl[j];
				if(vi==i0 || vi==i1 || vi==i2) continue;
				if(PIXI.PolyK._PointInTriangle(p[2*vi], p[2*vi+1], ax, ay, bx, by, cx, cy)) {earFound = false; break;}
			}
		}
		if(earFound)
		{
			tgs.push(i0, i1, i2);
			avl.splice((i+1)%al, 1);
			al--;
			i = 0;
		}
		else if(i++ > 3*al)
		{
			// need to flip flip reverse it!
			// reset!
			if(sign)
			{
				var tgs = [];
				avl = [];
				for(var i=0; i<n; i++) avl.push(i);

				i = 0;
				al = n;

				sign = false;
			}
			else
			{
				console.log("PIXI Warning: shape too complex to fill")
				return [];
			}
		}
	}
	tgs.push(avl[0], avl[1], avl[2]);
	return tgs;
}

/**
 * Checks if a point is within a triangle
 *
 * @class _PointInTriangle
 * @namespace PolyK
 * @private
 */
PIXI.PolyK._PointInTriangle = function(px, py, ax, ay, bx, by, cx, cy)
{
	var v0x = cx-ax;
	var v0y = cy-ay;
	var v1x = bx-ax;
	var v1y = by-ay;
	var v2x = px-ax;
	var v2y = py-ay;

	var dot00 = v0x*v0x+v0y*v0y;
	var dot01 = v0x*v1x+v0y*v1y;
	var dot02 = v0x*v2x+v0y*v2y;
	var dot11 = v1x*v1x+v1y*v1y;
	var dot12 = v1x*v2x+v1y*v2y;

	var invDenom = 1 / (dot00 * dot11 - dot01 * dot01);
	var u = (dot11 * dot02 - dot01 * dot12) * invDenom;
	var v = (dot00 * dot12 - dot01 * dot02) * invDenom;

	// Check if point is in triangle
	return (u >= 0) && (v >= 0) && (u + v < 1);
}

/**
 * Checks if a shape is convex
 *
 * @class _convex
 * @namespace PolyK
 * @private
 */
PIXI.PolyK._convex = function(ax, ay, bx, by, cx, cy, sign)
{
	return ((ay-by)*(cx-bx) + (bx-ax)*(cy-by) >= 0) == sign;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.initDefaultShaders = function() 
{
	PIXI.primitiveShader = new PIXI.PrimitiveShader();
  PIXI.primitiveShader.init();

  PIXI.stripShader = new PIXI.StripShader();
  PIXI.stripShader.init();

	PIXI.defaultShader = new PIXI.PixiShader();
	PIXI.defaultShader.init();

  var gl = PIXI.gl; 
  var shaderProgram = PIXI.defaultShader.program;
 

  gl.useProgram(shaderProgram);
  
  gl.enableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
}

PIXI.activatePrimitiveShader = function()
{
  var gl = PIXI.gl;
  
  gl.useProgram(PIXI.primitiveShader.program);
  
  gl.disableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.disableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.disableVertexAttribArray(PIXI.defaultShader.aTextureCoord);

  gl.enableVertexAttribArray(PIXI.primitiveShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.primitiveShader.colorAttribute);
} 

PIXI.deactivatePrimitiveShader = function()
{
  var gl = PIXI.gl;

  gl.useProgram(PIXI.defaultShader.program);
  
  gl.disableVertexAttribArray(PIXI.primitiveShader.aVertexPosition);
  gl.disableVertexAttribArray(PIXI.primitiveShader.colorAttribute);

  gl.enableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);

}

PIXI.activateStripShader = function()
{
  var gl = PIXI.gl;
  
  gl.useProgram(PIXI.stripShader.program);
 // gl.disableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
} 

PIXI.deactivateStripShader = function()
{
  var gl = PIXI.gl;

  gl.useProgram(PIXI.defaultShader.program);
  //gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
}

/*

SHADER COMPILER HELPERS
*/

PIXI.CompileVertexShader = function(gl, shaderSrc)
{
  return PIXI._CompileShader(gl, shaderSrc, gl.VERTEX_SHADER);
}

PIXI.CompileFragmentShader = function(gl, shaderSrc)
{
  return PIXI._CompileShader(gl, shaderSrc, gl.FRAGMENT_SHADER);
}

PIXI._CompileShader = function(gl, shaderSrc, shaderType)
{
  var src = shaderSrc.join("\n");
  var shader = gl.createShader(shaderType);
  gl.shaderSource(shader, src);
  gl.compileShader(shader);

  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    console.log(gl.getShaderInfoLog(shader));
    return null;
  }

  return shader;
}


PIXI.compileProgram = function(vertexSrc, fragmentSrc)
{
	var gl = PIXI.gl;
	var fragmentShader = PIXI.CompileFragmentShader(gl, fragmentSrc);
	var vertexShader = PIXI.CompileVertexShader(gl, vertexSrc);
	
	var shaderProgram = gl.createProgram();
	
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        console.log("Could not initialise shaders");
    }

	return shaderProgram;
} 

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.PixiShader = function()
{
	// the webGL program..
	this.program;
	
	this.fragmentSrc = [
	  "precision lowp float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;",
	  "}"
	];
	
}

PIXI.PixiShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc || PIXI.PixiShader.defaultVertexSrc, this.fragmentSrc)
	
	var gl = PIXI.gl;
	
    gl.useProgram(program);
	
	// get and store the uniforms for the shader
	this.uSampler = gl.getUniformLocation(program, "uSampler");
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
    //this.dimensions = gl.getUniformLocation(this.program, "dimensions");
    
    // get and store the attributes
    this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	this.aTextureCoord = gl.getAttribLocation(program, "aTextureCoord");
	  
    // add those custom shaders!
    for (var key in this.uniforms)
    {
       
    	// get the uniform locations..
	//	program[key] = 
        this.uniforms[key].uniformLocation = gl.getUniformLocation(program, key);

      
    }
  
	this.program = program;
}

PIXI.PixiShader.prototype.syncUniforms = function()
{
	var gl = PIXI.gl;
	
	for (var key in this.uniforms) 
    {
    	//var 
    	var type = this.uniforms[key].type;
    	
    	// need to grow this!
    	if(type == "f")
    	{
			gl.uniform1f(this.uniforms[key].uniformLocation, this.uniforms[key].value);
    	}
    	if(type == "f2")
    	{
    	//	console.log(this.program[key])
			gl.uniform2f(this.uniforms[key].uniformLocation, this.uniforms[key].value.x, this.uniforms[key].value.y);
    	}
        else if(type == "f4")
        {
           // console.log(this.uniforms[key].value)
            gl.uniform4fv(this.uniforms[key].uniformLocation, this.uniforms[key].value);
        }
    	else if(type == "mat4")
    	{
    		gl.uniformMatrix4fv(this.uniforms[key].uniformLocation, false, this.uniforms[key].value);
    	}
    	else if(type == "sampler2D")
    	{
    		// first texture...
    		var texture = this.uniforms[key].value;
    		
    		gl.activeTexture(gl.TEXTURE1);
	    	gl.bindTexture(gl.TEXTURE_2D, texture.baseTexture._glTexture);
	    	
    		gl.uniform1i(this.uniforms[key].uniformLocation, 1);
    		
    		// activate texture..
    		// gl.uniformMatrix4fv(this.program[key], false, this.uniforms[key].value);
    		// gl.uniformMatrix4fv(this.program[key], false, this.uniforms[key].value);
    	}
    }
    
}

PIXI.PixiShader.defaultVertexSrc = [
  "attribute vec2 aVertexPosition;",
  "attribute vec2 aTextureCoord;",
  "attribute float aColor;",
  
  "uniform vec2 projectionVector;",
 "uniform vec2 offsetVector;",
  "varying vec2 vTextureCoord;",
  
  "varying float vColor;",

  "const vec2 center = vec2(-1.0, 1.0);",
  "void main(void) {",
    "gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);",
    "vTextureCoord = aTextureCoord;",
    "vColor = aColor;",
  "}"
];

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.StripShader = function()
{
	// the webGL program..
	this.program;
	
    this.fragmentSrc = [
      "precision mediump float;",
      "varying vec2 vTextureCoord;",
      "varying float vColor;",
      "uniform float alpha;",
      "uniform sampler2D uSampler;",
      "void main(void) {",
        "gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));",
        "gl_FragColor = gl_FragColor * alpha;",
      "}"
    ];

    this.vertexSrc = [
      "attribute vec2 aVertexPosition;",
      "attribute vec2 aTextureCoord;",
      "attribute float aColor;",
      "uniform mat3 translationMatrix;",
      "uniform vec2 projectionVector;",
      "varying vec2 vTextureCoord;",
      "varying vec2 offsetVector;",
      "varying float vColor;",
      "void main(void) {",
        "vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);",
        "v -= offsetVector.xyx;",
        "gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);",
        "vTextureCoord = aTextureCoord;",
        "vColor = aColor;",
      "}"
    ];
}

PIXI.StripShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc, this.fragmentSrc)
	
	var gl = PIXI.gl;
	
    gl.useProgram(program);

	// get and store the uniforms for the shader
	this.uSampler = gl.getUniformLocation(program, "uSampler");
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	//this.dimensions = gl.getUniformLocation(this.program, "dimensions");
	
	// get and store the attributes
	this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.aTextureCoord = gl.getAttribLocation(program, "aTextureCoord");
	  
    this.translationMatrix = gl.getUniformLocation(program, "translationMatrix");
    this.alpha = gl.getUniformLocation(program, "alpha");
  
	this.program = program;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.PrimitiveShader = function()
{
	// the webGL program..
	this.program;
    	
    this.fragmentSrc = [
      "precision mediump float;",
      "varying vec4 vColor;",
      "void main(void) {",
        "gl_FragColor = vColor;",
      "}"
    ];

    this.vertexSrc  = [
      "attribute vec2 aVertexPosition;",
      "attribute vec4 aColor;",
      "uniform mat3 translationMatrix;",
      "uniform vec2 projectionVector;",
      "uniform vec2 offsetVector;",
      "uniform float alpha;",
      "varying vec4 vColor;",
      "void main(void) {",
        "vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
        "v -= offsetVector.xyx;",
        "gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);",
        "vColor = aColor  * alpha;",
      "}"
    ];
	
}

PIXI.PrimitiveShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc, this.fragmentSrc);
	
	var gl = PIXI.gl;
	
  gl.useProgram(program);
	
	// get and store the uniforms for the shader
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
  
  // get and store the attributes
  this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	
  this.translationMatrix = gl.getUniformLocation(program, "translationMatrix");
  this.alpha = gl.getUniformLocation(program, "alpha");

	this.program = program;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A set of functions used by the webGL renderer to draw the primitive graphics data
 *
 * @class CanvasGraphics
 */
PIXI.WebGLGraphics = function()
{
	
}

/**
 * Renders the graphics object
 *
 * @static
 * @private
 * @method renderGraphics
 * @param graphics {Graphics}
 * @param projection {Object}
 */
PIXI.WebGLGraphics.renderGraphics = function(graphics, projection)
{
	var gl = PIXI.gl;
	
	if(!graphics._webGL)graphics._webGL = {points:[], indices:[], lastIndex:0, 
										   buffer:gl.createBuffer(),
										   indexBuffer:gl.createBuffer()};
	
	if(graphics.dirty)
	{
		graphics.dirty = false;
		
		if(graphics.clearDirty)
		{
			graphics.clearDirty = false;
			
			graphics._webGL.lastIndex = 0;
			graphics._webGL.points = [];
			graphics._webGL.indices = [];
			
		}
		
		PIXI.WebGLGraphics.updateGraphics(graphics);
	}
	
	PIXI.activatePrimitiveShader();
	
	// This  could be speeded up fo sure!
	var m = PIXI.mat3.clone(graphics.worldTransform);
	
	PIXI.mat3.transpose(m);
	
	// set the matrix transform for the 
 	gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);

 	gl.uniformMatrix3fv(PIXI.primitiveShader.translationMatrix, false, m);
 	
	gl.uniform2f(PIXI.primitiveShader.projectionVector, projection.x, -projection.y);
	gl.uniform2f(PIXI.primitiveShader.offsetVector, -PIXI.offset.x, -PIXI.offset.y);
	
	gl.uniform1f(PIXI.primitiveShader.alpha, graphics.worldAlpha);
	gl.bindBuffer(gl.ARRAY_BUFFER, graphics._webGL.buffer);
	
	gl.vertexAttribPointer(PIXI.primitiveShader.aVertexPosition, 2, gl.FLOAT, false, 4 * 6, 0);
	gl.vertexAttribPointer(PIXI.primitiveShader.colorAttribute, 4, gl.FLOAT, false,4 * 6, 2 * 4);
	
	// set the index buffer!
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.indexBuffer);
	

	gl.drawElements(gl.TRIANGLE_STRIP,  graphics._webGL.indices.length, gl.UNSIGNED_SHORT, 0 );
	
	PIXI.deactivatePrimitiveShader();
	
	
	// return to default shader...
//	PIXI.activateShader(PIXI.defaultShader);
}

/**
 * Updates the graphics object
 *
 * @static
 * @private
 * @method updateGraphics
 * @param graphics {Graphics}
 */
PIXI.WebGLGraphics.updateGraphics = function(graphics)
{
	for (var i=graphics._webGL.lastIndex; i < graphics.graphicsData.length; i++) 
	{
		var data = graphics.graphicsData[i];
		
		if(data.type == PIXI.Graphics.POLY)
		{
			if(data.fill)
			{
				if(data.points.length>3) 
				PIXI.WebGLGraphics.buildPoly(data, graphics._webGL);
			}
			
			if(data.lineWidth > 0)
			{
				PIXI.WebGLGraphics.buildLine(data, graphics._webGL);
			}
		}
		else if(data.type == PIXI.Graphics.RECT)
		{
			PIXI.WebGLGraphics.buildRectangle(data, graphics._webGL);
		}
		else if(data.type == PIXI.Graphics.CIRC || data.type == PIXI.Graphics.ELIP)
		{
			PIXI.WebGLGraphics.buildCircle(data, graphics._webGL);
		}
	};
	
	graphics._webGL.lastIndex = graphics.graphicsData.length;
	
	var gl = PIXI.gl;

	graphics._webGL.glPoints = new Float32Array(graphics._webGL.points);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, graphics._webGL.buffer);
	gl.bufferData(gl.ARRAY_BUFFER, graphics._webGL.glPoints, gl.STATIC_DRAW);
	
	graphics._webGL.glIndicies = new Uint16Array(graphics._webGL.indices);
	
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.glIndicies, gl.STATIC_DRAW);
}

/**
 * Builds a rectangle to draw
 *
 * @static
 * @private
 * @method buildRectangle
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildRectangle = function(graphicsData, webGLData)
{
	// --- //
	// need to convert points to a nice regular data
	// 
	var rectData = graphicsData.points;
	var x = rectData[0];
	var y = rectData[1];
	var width = rectData[2];
	var height = rectData[3];
	
	
	if(graphicsData.fill)
	{
		var color = HEXtoRGB(graphicsData.fillColor);
		var alpha = graphicsData.fillAlpha;
		
		var r = color[0] * alpha;
		var g = color[1] * alpha;
		var b = color[2] * alpha;
	
		var verts = webGLData.points;
		var indices = webGLData.indices;
	
		var vertPos = verts.length/6;
		
		// start
		verts.push(x, y);
		verts.push(r, g, b, alpha);
		
		verts.push(x + width, y);
		verts.push(r, g, b, alpha);
		
		verts.push(x , y + height);
		verts.push(r, g, b, alpha);
		
		verts.push(x + width, y + height);
		verts.push(r, g, b, alpha);
		
		// insert 2 dead triangles..
		indices.push(vertPos, vertPos, vertPos+1, vertPos+2, vertPos+3, vertPos+3)
	}
	
	if(graphicsData.lineWidth)
	{
		graphicsData.points = [x, y,
				  x + width, y,
				  x + width, y + height,
				  x, y + height,
				  x, y];
	
		PIXI.WebGLGraphics.buildLine(graphicsData, webGLData);
	}
	
}

/**
 * Builds a circle to draw
 *
 * @static
 * @private
 * @method buildCircle
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildCircle = function(graphicsData, webGLData)
{
	// --- //
	// need to convert points to a nice regular data
	// 
	var rectData = graphicsData.points;
	var x = rectData[0];
	var y = rectData[1];
	var width = rectData[2];
	var height = rectData[3];
	
	var totalSegs = 40;
	var seg = (Math.PI * 2) / totalSegs ;
		
	if(graphicsData.fill)
	{
		var color = HEXtoRGB(graphicsData.fillColor);
		var alpha = graphicsData.fillAlpha;

		var r = color[0] * alpha;
		var g = color[1] * alpha;
		var b = color[2] * alpha;
	
		var verts = webGLData.points;
		var indices = webGLData.indices;
	
		var vecPos = verts.length/6;
		
		indices.push(vecPos);
		
		for (var i=0; i < totalSegs + 1 ; i++) 
		{
			verts.push(x,y, r, g, b, alpha);
			
			verts.push(x + Math.sin(seg * i) * width,
					   y + Math.cos(seg * i) * height,
					   r, g, b, alpha);
		
			indices.push(vecPos++, vecPos++);
		};
		
		indices.push(vecPos-1);
	}
	
	if(graphicsData.lineWidth)
	{
		graphicsData.points = [];
		
		for (var i=0; i < totalSegs + 1; i++) 
		{
			graphicsData.points.push(x + Math.sin(seg * i) * width,
									 y + Math.cos(seg * i) * height)
		};
		
		PIXI.WebGLGraphics.buildLine(graphicsData, webGLData);
	}
	
}

/**
 * Builds a line to draw
 *
 * @static
 * @private
 * @method buildLine
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildLine = function(graphicsData, webGLData)
{
	// TODO OPTIMISE!
	
	var wrap = true;
	var points = graphicsData.points;
	if(points.length == 0)return;
	
	// if the line width is an odd number add 0.5 to align to a whole pixel
	if(graphicsData.lineWidth%2)
	{
		for (var i = 0; i < points.length; i++) {
			points[i] += 0.5;
		};
	}

	// get first and last point.. figure out the middle!
	var firstPoint = new PIXI.Point( points[0], points[1] );
	var lastPoint = new PIXI.Point( points[points.length - 2], points[points.length - 1] );
	
	// if the first point is the last point - goona have issues :)
	if(firstPoint.x == lastPoint.x && firstPoint.y == lastPoint.y)
	{
		points.pop();
		points.pop();
		
		lastPoint = new PIXI.Point( points[points.length - 2], points[points.length - 1] );
		
		var midPointX = lastPoint.x + (firstPoint.x - lastPoint.x) *0.5;
		var midPointY = lastPoint.y + (firstPoint.y - lastPoint.y) *0.5;
		
		points.unshift(midPointX, midPointY);
		points.push(midPointX, midPointY)
	}
	
	var verts = webGLData.points;
	var indices = webGLData.indices;
	var length = points.length / 2;
	var indexCount = points.length;
	var indexStart = verts.length/6;
	
	// DRAW the Line
	var width = graphicsData.lineWidth / 2;
	
	// sort color
	var color = HEXtoRGB(graphicsData.lineColor);
	var alpha = graphicsData.lineAlpha;
	var r = color[0] * alpha;
	var g = color[1] * alpha;
	var b = color[2] * alpha;
	
	var p1x, p1y, p2x, p2y, p3x, p3y;
	var perpx, perpy, perp2x, perp2y, perp3x, perp3y;
	var ipx, ipy;
	var a1, b1, c1, a2, b2, c2;
	var denom, pdist, dist;
	
	p1x = points[0];
	p1y = points[1];
	
	p2x = points[2];
	p2y = points[3];
	
	perpx = -(p1y - p2y);
	perpy =  p1x - p2x;
	
	dist = Math.sqrt(perpx*perpx + perpy*perpy);
	
	perpx /= dist;
	perpy /= dist;
	perpx *= width;
	perpy *= width;
	
	// start
	verts.push(p1x - perpx , p1y - perpy,
				r, g, b, alpha);
	
	verts.push(p1x + perpx , p1y + perpy,
				r, g, b, alpha);
	
	for (var i = 1; i < length-1; i++) 
	{
		p1x = points[(i-1)*2];
		p1y = points[(i-1)*2 + 1];
		
		p2x = points[(i)*2]
		p2y = points[(i)*2 + 1]
		
		p3x = points[(i+1)*2];
		p3y = points[(i+1)*2 + 1];
		
		perpx = -(p1y - p2y);
		perpy = p1x - p2x;
		
		dist = Math.sqrt(perpx*perpx + perpy*perpy);
		perpx /= dist;
		perpy /= dist;
		perpx *= width;
		perpy *= width;

		perp2x = -(p2y - p3y);
		perp2y = p2x - p3x;
		
		dist = Math.sqrt(perp2x*perp2x + perp2y*perp2y);
		perp2x /= dist;
		perp2y /= dist;
		perp2x *= width;
		perp2y *= width;
		
		a1 = (-perpy + p1y) - (-perpy + p2y);
	    b1 = (-perpx + p2x) - (-perpx + p1x);
	    c1 = (-perpx + p1x) * (-perpy + p2y) - (-perpx + p2x) * (-perpy + p1y);
	    a2 = (-perp2y + p3y) - (-perp2y + p2y);
	    b2 = (-perp2x + p2x) - (-perp2x + p3x);
	    c2 = (-perp2x + p3x) * (-perp2y + p2y) - (-perp2x + p2x) * (-perp2y + p3y);
	 
	    denom = a1*b2 - a2*b1;

	   if(Math.abs(denom) < 0.1 )
		{
		
			denom+=10.1;
			verts.push(p2x - perpx , p2y - perpy,
				r, g, b, alpha);
	
			verts.push(p2x + perpx , p2y + perpy,
				r, g, b, alpha);
			
			continue;
		}
	    
	    px = (b1*c2 - b2*c1)/denom;
	    py = (a2*c1 - a1*c2)/denom;
		
			
		pdist = (px -p2x) * (px -p2x) + (py -p2y) + (py -p2y);
		

		if(pdist > 140 * 140)
		{
			perp3x = perpx - perp2x;
			perp3y = perpy - perp2y;
			
			dist = Math.sqrt(perp3x*perp3x + perp3y*perp3y);
			perp3x /= dist;
			perp3y /= dist;
			perp3x *= width;
			perp3y *= width;
			
			verts.push(p2x - perp3x, p2y -perp3y);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x + perp3x, p2y +perp3y);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x - perp3x, p2y -perp3y);
			verts.push(r, g, b, alpha);
			
			indexCount++;
		}
		else
		{

			verts.push(px , py);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x - (px-p2x), p2y - (py - p2y));
			verts.push(r, g, b, alpha);
		}
	}
	
	p1x = points[(length-2)*2]
	p1y = points[(length-2)*2 + 1] 
	
	p2x = points[(length-1)*2]
	p2y = points[(length-1)*2 + 1]
	
	perpx = -(p1y - p2y)
	perpy = p1x - p2x;
	
	dist = Math.sqrt(perpx*perpx + perpy*perpy);
	perpx /= dist;
	perpy /= dist;
	perpx *= width;
	perpy *= width;
	
	verts.push(p2x - perpx , p2y - perpy)
	verts.push(r, g, b, alpha);
	
	verts.push(p2x + perpx , p2y + perpy)
	verts.push(r, g, b, alpha);
	
	indices.push(indexStart);
	
	for (var i=0; i < indexCount; i++) 
	{
		indices.push(indexStart++);
	};
	
	indices.push(indexStart-1);
}

/**
 * Builds a polygon to draw
 *
 * @static
 * @private
 * @method buildPoly
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildPoly = function(graphicsData, webGLData)
{
	var points = graphicsData.points;
	if(points.length < 6)return;
	
	// get first and last point.. figure out the middle!
	var verts = webGLData.points;
	var indices = webGLData.indices;
	
	var length = points.length / 2;
	
	// sort color
	var color = HEXtoRGB(graphicsData.fillColor);
	var alpha = graphicsData.fillAlpha;
	var r = color[0] * alpha;
	var g = color[1] * alpha;
	var b = color[2] * alpha;
	
	var triangles = PIXI.PolyK.Triangulate(points);
	
	var vertPos = verts.length / 6;
	
	for (var i=0; i < triangles.length; i+=3) 
	{
		indices.push(triangles[i] + vertPos);
		indices.push(triangles[i] + vertPos);
		indices.push(triangles[i+1] + vertPos);
		indices.push(triangles[i+2] +vertPos);
		indices.push(triangles[i+2] + vertPos);
	};
	
	for (var i = 0; i < length; i++) 
	{
		verts.push(points[i * 2], points[i * 2 + 1],
				   r, g, b, alpha);
	};
}

function HEXtoRGB(hex) {
	return [(hex >> 16 & 0xFF) / 255, ( hex >> 8 & 0xFF) / 255, (hex & 0xFF)/ 255];
}





/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI._defaultFrame = new PIXI.Rectangle(0,0,1,1);

// an instance of the gl context..
// only one at the moment :/
PIXI.gl;

/**
 * the WebGLRenderer is draws the stage and all its content onto a webGL enabled canvas. This renderer
 * should be used for browsers support webGL. This Render works by automatically managing webGLBatchs.
 * So no need for Sprite Batch's or Sprite Cloud's
 * Dont forget to add the view to your DOM or you will not see anything :)
 *
 * @class WebGLRenderer
 * @constructor
 * @param width=0 {Number} the width of the canvas view
 * @param height=0 {Number} the height of the canvas view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 * @param antialias=false {Boolean} sets antialias (only applicable in chrome at the moment)
 * 
 */
PIXI.WebGLRenderer = function(width, height, view, transparent, antialias)
{
	// do a catch.. only 1 webGL renderer..

	this.transparent = !!transparent;

	this.width = width || 800;
	this.height = height || 600;

	this.view = view || document.createElement( 'canvas' ); 
    this.view.width = this.width;
	this.view.height = this.height;

	// deal with losing context..	
    var scope = this;
	this.view.addEventListener('webglcontextlost', function(event) { scope.handleContextLost(event); }, false)
	this.view.addEventListener('webglcontextrestored', function(event) { scope.handleContextRestored(event); }, false)

	this.batchs = [];

	var options = {
		alpha: this.transparent,
		antialias:!!antialias, // SPEED UP??
		premultipliedAlpha:false,
		stencil:true
	}

	//try 'experimental-webgl'
	try {
		PIXI.gl = this.gl = this.view.getContext("experimental-webgl",  options);
	} catch (e) {
		//try 'webgl'
		try {
			PIXI.gl = this.gl = this.view.getContext("webgl",  options);
		} catch (e) {
			// fail, not able to get a context
			throw new Error(" This browser does not support webGL. Try using the canvas renderer" + this);
		}
	}

    PIXI.initDefaultShaders();
 

	

   // PIXI.activateDefaultShader();

    var gl = this.gl;
    
    gl.useProgram(PIXI.defaultShader.program);


    PIXI.WebGLRenderer.gl = gl;

    this.batch = new PIXI.WebGLBatch(gl);
   	gl.disable(gl.DEPTH_TEST);
   	gl.disable(gl.CULL_FACE);

    gl.enable(gl.BLEND);
    gl.colorMask(true, true, true, this.transparent); 

    PIXI.projection = new PIXI.Point(400, 300);
    PIXI.offset = new PIXI.Point(0, 0);

    // TODO remove thease globals..

    this.resize(this.width, this.height);
    this.contextLost = false;

	//PIXI.pushShader(PIXI.defaultShader);

    this.stageRenderGroup = new PIXI.WebGLRenderGroup(this.gl, this.transparent);
  //  this.stageRenderGroup. = this.transparent
}

// constructor
PIXI.WebGLRenderer.prototype.constructor = PIXI.WebGLRenderer;

/**
 * Gets a new WebGLBatch from the pool
 *
 * @static
 * @method getBatch
 * @return {WebGLBatch}
 * @private 
 */
PIXI.WebGLRenderer.getBatch = function()
{
	if(PIXI._batchs.length == 0)
	{
		return new PIXI.WebGLBatch(PIXI.WebGLRenderer.gl);
	}
	else
	{
		return PIXI._batchs.pop();
	}
}

/**
 * Puts a batch back into the pool
 *
 * @static
 * @method returnBatch
 * @param batch {WebGLBatch} The batch to return
 * @private
 */
PIXI.WebGLRenderer.returnBatch = function(batch)
{
	batch.clean();	
	PIXI._batchs.push(batch);
}

/**
 * Renders the stage to its webGL view
 *
 * @method render
 * @param stage {Stage} the Stage element to be rendered
 */
PIXI.WebGLRenderer.prototype.render = function(stage)
{
	if(this.contextLost)return;
	
	
	// if rendering a new stage clear the batchs..
	if(this.__stage !== stage)
	{
		// TODO make this work
		// dont think this is needed any more?
		this.__stage = stage;
		this.stageRenderGroup.setRenderable(stage);
	}

	// update any textures	
	PIXI.WebGLRenderer.updateTextures();
		
	// update the scene graph	
	PIXI.visibleCount++;
	stage.updateTransform();
	
	var gl = this.gl;
	
	// -- Does this need to be set every frame? -- //
	gl.colorMask(true, true, true, this.transparent); 
	gl.viewport(0, 0, this.width, this.height);	
	
   	gl.bindFramebuffer(gl.FRAMEBUFFER, null);
		
	gl.clearColor(stage.backgroundColorSplit[0],stage.backgroundColorSplit[1],stage.backgroundColorSplit[2], !this.transparent);     
	gl.clear(gl.COLOR_BUFFER_BIT);

	// HACK TO TEST
	
	this.stageRenderGroup.backgroundColor = stage.backgroundColorSplit;
	
	PIXI.projection.x =  this.width/2;
	PIXI.projection.y =  -this.height/2;
	
	this.stageRenderGroup.render(PIXI.projection);
	
	// interaction
	// run interaction!
	if(stage.interactive)
	{
		//need to add some events!
		if(!stage._interactiveEventsAdded)
		{
			stage._interactiveEventsAdded = true;
			stage.interactionManager.setTarget(this);
		}
	}
	
	// after rendering lets confirm all frames that have been uodated..
	if(PIXI.Texture.frameUpdates.length > 0)
	{
		for (var i=0; i < PIXI.Texture.frameUpdates.length; i++) 
		{
		  	PIXI.Texture.frameUpdates[i].updateFrame = false;
		};
		
		PIXI.Texture.frameUpdates = [];
	}
}

/**
 * Updates the textures loaded into this webgl renderer
 *
 * @static
 * @method updateTextures
 * @private
 */
PIXI.WebGLRenderer.updateTextures = function()
{
	//TODO break this out into a texture manager...
	for (var i=0; i < PIXI.texturesToUpdate.length; i++) PIXI.WebGLRenderer.updateTexture(PIXI.texturesToUpdate[i]);
	for (var i=0; i < PIXI.texturesToDestroy.length; i++) PIXI.WebGLRenderer.destroyTexture(PIXI.texturesToDestroy[i]);
	PIXI.texturesToUpdate = [];
	PIXI.texturesToDestroy = [];
}

/**
 * Updates a loaded webgl texture
 *
 * @static
 * @method updateTexture
 * @param texture {Texture} The texture to update
 * @private
 */
PIXI.WebGLRenderer.updateTexture = function(texture)
{
	//TODO break this out into a texture manager...
	var gl = PIXI.gl;
	
	if(!texture._glTexture)
	{
		texture._glTexture = gl.createTexture();
	}

	if(texture.hasLoaded)
	{
		gl.bindTexture(gl.TEXTURE_2D, texture._glTexture);
	 	gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);

		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

		// reguler...

		if(!texture._powerOf2)
		{
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
		}
		else
		{
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
		}

		gl.bindTexture(gl.TEXTURE_2D, null);
	}
}

/**
 * Destroys a loaded webgl texture
 *
 * @method destroyTexture
 * @param texture {Texture} The texture to update
 * @private
 */
PIXI.WebGLRenderer.destroyTexture = function(texture)
{
	//TODO break this out into a texture manager...
	var gl = PIXI.gl;

	if(texture._glTexture)
	{
		texture._glTexture = gl.createTexture();
		gl.deleteTexture(gl.TEXTURE_2D, texture._glTexture);
	}
}

/**
 * resizes the webGL view to the specified width and height
 *
 * @method resize
 * @param width {Number} the new width of the webGL view
 * @param height {Number} the new height of the webGL view
 */
PIXI.WebGLRenderer.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;

	this.view.width = width;
	this.view.height = height;

	this.gl.viewport(0, 0, this.width, this.height);	

	//var projectionMatrix = this.projectionMatrix;

	PIXI.projection.x =  this.width/2;
	PIXI.projection.y =  -this.height/2;
	
	//PIXI.size.x =  this.width/2;
	//PIXI.size.y =  -this.height/2;

//	projectionMatrix[0] = 2/this.width;
//	projectionMatrix[5] = -2/this.height;
//	projectionMatrix[12] = -1;
//	projectionMatrix[13] = 1;
}

/**
 * Handles a lost webgl context
 *
 * @method handleContextLost
 * @param event {Event}
 * @private
 */
PIXI.WebGLRenderer.prototype.handleContextLost = function(event)
{
	event.preventDefault();
	this.contextLost = true;
}

/**
 * Handles a restored webgl context
 *
 * @method handleContextRestored
 * @param event {Event}
 * @private
 */
PIXI.WebGLRenderer.prototype.handleContextRestored = function(event)
{
	this.gl = this.view.getContext("experimental-webgl",  {  	
		alpha: true
    });

	this.initShaders();	

	for(var key in PIXI.TextureCache) 
	{
        	var texture = PIXI.TextureCache[key].baseTexture;
        	texture._glTexture = null;
        	PIXI.WebGLRenderer.updateTexture(texture);
	};

	for (var i=0; i <  this.batchs.length; i++) 
	{
		this.batchs[i].restoreLostContext(this.gl)//
		this.batchs[i].dirty = true;
	};

	PIXI._restoreBatchs(this.gl);

	this.contextLost = false;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI._batchs = [];

/**
 * @private
 */
PIXI._getBatch = function(gl)
{
	if(PIXI._batchs.length == 0)
	{
		return new PIXI.WebGLBatch(gl);
	}
	else
	{
		return PIXI._batchs.pop();
	}
}

/**
 * @private
 */
PIXI._returnBatch = function(batch)
{
	batch.clean();	
	PIXI._batchs.push(batch);
}

/**
 * @private
 */
PIXI._restoreBatchs = function(gl)
{
	for (var i=0; i < PIXI._batchs.length; i++) 
	{
	  PIXI._batchs[i].restoreLostContext(gl);
	};
}

/**
 * A WebGLBatch Enables a group of sprites to be drawn using the same settings.
 * if a group of sprites all have the same baseTexture and blendMode then they can be grouped into a batch.
 * All the sprites in a batch can then be drawn in one go by the GPU which is hugely efficient. ALL sprites
 * in the webGL renderer are added to a batch even if the batch only contains one sprite. Batching is handled
 * automatically by the webGL renderer. A good tip is: the smaller the number of batchs there are, the faster
 * the webGL renderer will run.
 *
 * @class WebGLBatch
 * @constructor
 * @param gl {WebGLContext} an instance of the webGL context
 */
PIXI.WebGLBatch = function(gl)
{
	this.gl = gl;
	
	this.size = 0;

	this.vertexBuffer =  gl.createBuffer();
	this.indexBuffer =  gl.createBuffer();
	this.uvBuffer =  gl.createBuffer();
	this.colorBuffer =  gl.createBuffer();
	this.blendMode = PIXI.blendModes.NORMAL;
	this.dynamicSize = 1;
}

// constructor
PIXI.WebGLBatch.prototype.constructor = PIXI.WebGLBatch;

/**
 * Cleans the batch so that is can be returned to an object pool and reused
 *
 * @method clean
 */
PIXI.WebGLBatch.prototype.clean = function()
{
	this.verticies = [];
	this.uvs = [];
	this.indices = [];
	this.colors = [];
	this.dynamicSize = 1;
	this.texture = null;
	this.last = null;
	this.size = 0;
	this.head;
	this.tail;
}

/**
 * Recreates the buffers in the event of a context loss
 *
 * @method restoreLostContext
 * @param gl {WebGLContext}
 */
PIXI.WebGLBatch.prototype.restoreLostContext = function(gl)
{
	this.gl = gl;
	this.vertexBuffer =  gl.createBuffer();
	this.indexBuffer =  gl.createBuffer();
	this.uvBuffer =  gl.createBuffer();
	this.colorBuffer =  gl.createBuffer();
}

/**
 * inits the batch's texture and blend mode based if the supplied sprite
 *
 * @method init
 * @param sprite {Sprite} the first sprite to be added to the batch. Only sprites with
 *		the same base texture and blend mode will be allowed to be added to this batch
 */	
PIXI.WebGLBatch.prototype.init = function(sprite)
{
	sprite.batch = this;
	this.dirty = true;
	this.blendMode = sprite.blendMode;
	this.texture = sprite.texture.baseTexture;
	this.head = sprite;
	this.tail = sprite;
	this.size = 1;

	this.growBatch();
}

/**
 * inserts a sprite before the specified sprite
 *
 * @method insertBefore
 * @param sprite {Sprite} the sprite to be added
 * @param nextSprite {nextSprite} the first sprite will be inserted before this sprite
 */	
PIXI.WebGLBatch.prototype.insertBefore = function(sprite, nextSprite)
{
	this.size++;

	sprite.batch = this;
	this.dirty = true;
	var tempPrev = nextSprite.__prev;
	nextSprite.__prev = sprite;
	sprite.__next = nextSprite;

	if(tempPrev)
	{
		sprite.__prev = tempPrev;
		tempPrev.__next = sprite;
	}
	else
	{
		this.head = sprite;
	}
}

/**
 * inserts a sprite after the specified sprite
 *
 * @method insertAfter
 * @param sprite {Sprite} the sprite to be added
 * @param  previousSprite {Sprite} the first sprite will be inserted after this sprite
 */	
PIXI.WebGLBatch.prototype.insertAfter = function(sprite, previousSprite)
{
	this.size++;

	sprite.batch = this;
	this.dirty = true;

	var tempNext = previousSprite.__next;
	previousSprite.__next = sprite;
	sprite.__prev = previousSprite;

	if(tempNext)
	{
		sprite.__next = tempNext;
		tempNext.__prev = sprite;
	}
	else
	{
		this.tail = sprite
	}
}

/**
 * removes a sprite from the batch
 *
 * @method remove
 * @param sprite {Sprite} the sprite to be removed
 */	
PIXI.WebGLBatch.prototype.remove = function(sprite)
{
	this.size--;

	if(this.size == 0)
	{
		sprite.batch = null;
		sprite.__prev = null;
		sprite.__next = null;
		return;
	}

	if(sprite.__prev)
	{
		sprite.__prev.__next = sprite.__next;
	}
	else
	{
		this.head = sprite.__next;
		this.head.__prev = null;
	}

	if(sprite.__next)
	{
		sprite.__next.__prev = sprite.__prev;
	}
	else
	{
		this.tail = sprite.__prev;
		this.tail.__next = null
	}

	sprite.batch = null;
	sprite.__next = null;
	sprite.__prev = null;
	this.dirty = true;
}

/**
 * Splits the batch into two with the specified sprite being the start of the new batch.
 *
 * @method split
 * @param sprite {Sprite} the sprite that indicates where the batch should be split
 * @return {WebGLBatch} the new batch
 */
PIXI.WebGLBatch.prototype.split = function(sprite)
{
	this.dirty = true;

	var batch = new PIXI.WebGLBatch(this.gl);
	batch.init(sprite);
	batch.texture = this.texture;
	batch.tail = this.tail;

	this.tail = sprite.__prev;
	this.tail.__next = null;

	sprite.__prev = null;
	// return a splite batch!

	// TODO this size is wrong!
	// need to recalculate :/ problem with a linked list!
	// unless it gets calculated in the "clean"?

	// need to loop through items as there is no way to know the length on a linked list :/
	var tempSize = 0;
	while(sprite)
	{
		tempSize++;
		sprite.batch = batch;
		sprite = sprite.__next;
	}

	batch.size = tempSize;
	this.size -= tempSize;

	return batch;
}

/**
 * Merges two batchs together
 *
 * @method merge
 * @param batch {WebGLBatch} the batch that will be merged 
 */
PIXI.WebGLBatch.prototype.merge = function(batch)
{
	this.dirty = true;

	this.tail.__next = batch.head;
	batch.head.__prev = this.tail;

	this.size += batch.size;

	this.tail = batch.tail;

	var sprite = batch.head;
	while(sprite)
	{
		sprite.batch = this;
		sprite = sprite.__next;
	}
}

/**
 * Grows the size of the batch. As the elements in the batch cannot have a dynamic size this
 * function is used to increase the size of the batch. It also creates a little extra room so
 * that the batch does not need to be resized every time a sprite is added
 *
 * @method growBatch
 */
PIXI.WebGLBatch.prototype.growBatch = function()
{
	var gl = this.gl;
	if( this.size == 1)
	{
		this.dynamicSize = 1;
	}
	else
	{
		this.dynamicSize = this.size * 1.5
	}
	// grow verts
	this.verticies = new Float32Array(this.dynamicSize * 8);

	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER,this.verticies , gl.DYNAMIC_DRAW);

	this.uvs  = new Float32Array( this.dynamicSize * 8 );
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, this.uvs , gl.DYNAMIC_DRAW);

	this.dirtyUVS = true;

	this.colors  = new Float32Array( this.dynamicSize * 4 );
	gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, this.colors , gl.DYNAMIC_DRAW);

	this.dirtyColors = true;

	this.indices = new Uint16Array(this.dynamicSize * 6); 
	var length = this.indices.length/6;

	for (var i=0; i < length; i++) 
	{
	    var index2 = i * 6;
	    var index3 = i * 4;
		this.indices[index2 + 0] = index3 + 0;
		this.indices[index2 + 1] = index3 + 1;
		this.indices[index2 + 2] = index3 + 2;
		this.indices[index2 + 3] = index3 + 0;
		this.indices[index2 + 4] = index3 + 2;
		this.indices[index2 + 5] = index3 + 3;
	};

	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);
}

/**
 * Refresh's all the data in the batch and sync's it with the webGL buffers
 *
 * @method refresh
 */
PIXI.WebGLBatch.prototype.refresh = function()
{
	var gl = this.gl;

	if (this.dynamicSize < this.size)
	{
		this.growBatch();
	}

	var indexRun = 0;
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index;
	var a, b, c, d, tx, ty;

	var displayObject = this.head;

	while(displayObject)
	{
		index = indexRun * 8;

		var texture = displayObject.texture;

		var frame = texture.frame;
		var tw = texture.baseTexture.width;
		var th = texture.baseTexture.height;

		this.uvs[index + 0] = frame.x / tw;
		this.uvs[index +1] = frame.y / th;

		this.uvs[index +2] = (frame.x + frame.width) / tw;
		this.uvs[index +3] = frame.y / th;

		this.uvs[index +4] = (frame.x + frame.width) / tw;
		this.uvs[index +5] = (frame.y + frame.height) / th; 

		this.uvs[index +6] = frame.x / tw;
		this.uvs[index +7] = (frame.y + frame.height) / th;

		displayObject.updateFrame = false;

		colorIndex = indexRun * 4;
		this.colors[colorIndex] = this.colors[colorIndex + 1] = this.colors[colorIndex + 2] = this.colors[colorIndex + 3] = displayObject.worldAlpha;

		displayObject = displayObject.__next;

		indexRun ++;
	}

	this.dirtyUVS = true;
	this.dirtyColors = true;
}

/**
 * Updates all the relevant geometry and uploads the data to the GPU
 *
 * @method update
 */
PIXI.WebGLBatch.prototype.update = function()
{
	var gl = this.gl;
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index, index2, index3

	var a, b, c, d, tx, ty;

	var indexRun = 0;

	var displayObject = this.head;
	var verticies = this.verticies;
	var uvs = this.uvs;
	var colors = this.colors;
	
	while(displayObject)
	{
		if(displayObject.vcount === PIXI.visibleCount)
		{
			width = displayObject.texture.frame.width;
			height = displayObject.texture.frame.height;

			// TODO trim??
			aX = displayObject.anchor.x;// - displayObject.texture.trim.x
			aY = displayObject.anchor.y; //- displayObject.texture.trim.y
			w0 = width * (1-aX);
			w1 = width * -aX;

			h0 = height * (1-aY);
			h1 = height * -aY;

			index = indexRun * 8;

			worldTransform = displayObject.worldTransform;

			a = worldTransform[0];
			b = worldTransform[3];
			c = worldTransform[1];
			d = worldTransform[4];
			tx = worldTransform[2];
			ty = worldTransform[5];

			verticies[index + 0 ] = a * w1 + c * h1 + tx; 
			verticies[index + 1 ] = d * h1 + b * w1 + ty;

			verticies[index + 2 ] = a * w0 + c * h1 + tx; 
			verticies[index + 3 ] = d * h1 + b * w0 + ty; 

			verticies[index + 4 ] = a * w0 + c * h0 + tx; 
			verticies[index + 5 ] = d * h0 + b * w0 + ty; 

			verticies[index + 6] =  a * w1 + c * h0 + tx; 
			verticies[index + 7] =  d * h0 + b * w1 + ty; 

			if(displayObject.updateFrame || displayObject.texture.updateFrame)
			{
				this.dirtyUVS = true;

				var texture = displayObject.texture;

				var frame = texture.frame;
				var tw = texture.baseTexture.width;
				var th = texture.baseTexture.height;

				uvs[index + 0] = frame.x / tw;
				uvs[index +1] = frame.y / th;

				uvs[index +2] = (frame.x + frame.width) / tw;
				uvs[index +3] = frame.y / th;

				uvs[index +4] = (frame.x + frame.width) / tw;
				uvs[index +5] = (frame.y + frame.height) / th; 

				uvs[index +6] = frame.x / tw;
				uvs[index +7] = (frame.y + frame.height) / th;

				displayObject.updateFrame = false;
			}

			// TODO this probably could do with some optimisation....
			if(displayObject.cacheAlpha != displayObject.worldAlpha)
			{
				displayObject.cacheAlpha = displayObject.worldAlpha;

				var colorIndex = indexRun * 4;
				colors[colorIndex] = colors[colorIndex + 1] = colors[colorIndex + 2] = colors[colorIndex + 3] = displayObject.worldAlpha;
				this.dirtyColors = true;
			}
		}
		else
		{
			index = indexRun * 8;

			verticies[index + 0 ] = verticies[index + 1 ] = verticies[index + 2 ] = verticies[index + 3 ] = verticies[index + 4 ] = verticies[index + 5 ] = verticies[index + 6] = 	verticies[index + 7] = 0;
		}

		indexRun++;
		displayObject = displayObject.__next;
   }
}

/**
 * Draws the batch to the frame buffer
 *
 * @method render
 */
PIXI.WebGLBatch.prototype.render = function(start, end)
{
	start = start || 0;

	if(end == undefined)end = this.size;
	
	if(this.dirty)
	{
		this.refresh();
		this.dirty = false;
	}

	if (this.size == 0)return;

	this.update();
	var gl = this.gl;

	//TODO optimize this!

	var shaderProgram = PIXI.defaultShader;
	
	//gl.useProgram(shaderProgram);

	// update the verts..
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	// ok..
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.verticies)
    gl.vertexAttribPointer(shaderProgram.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
	// update the uvs
	//var isDefault = (shaderProgram == PIXI.shaderProgram)

   	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);

    if(this.dirtyUVS)
    {
    	this.dirtyUVS = false;
    	gl.bufferSubData(gl.ARRAY_BUFFER,  0, this.uvs);
    }

    gl.vertexAttribPointer(shaderProgram.aTextureCoord, 2, gl.FLOAT, false, 0, 0);

    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, this.texture._glTexture);

	// update color!
	gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);

	if(this.dirtyColors)
    {
    	this.dirtyColors = false;
    	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.colors);
	}

    gl.vertexAttribPointer(shaderProgram.colorAttribute, 1, gl.FLOAT, false, 0, 0);
	// dont need to upload!
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);

	var len = end - start;

    // DRAW THAT this!
    gl.drawElements(gl.TRIANGLES, len * 6, gl.UNSIGNED_SHORT, start * 2 * 6 );
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A WebGLBatch Enables a group of sprites to be drawn using the same settings.
 * if a group of sprites all have the same baseTexture and blendMode then they can be
 * grouped into a batch. All the sprites in a batch can then be drawn in one go by the
 * GPU which is hugely efficient. ALL sprites in the webGL renderer are added to a batch
 * even if the batch only contains one sprite. Batching is handled automatically by the
 * webGL renderer. A good tip is: the smaller the number of batchs there are, the faster
 * the webGL renderer will run.
 *
 * @class WebGLBatch
 * @contructor
 * @param gl {WebGLContext} An instance of the webGL context
 */
PIXI.WebGLRenderGroup = function(gl, transparent)
{
	this.gl = gl;
	this.root;
	
	this.backgroundColor;
	this.transparent = transparent == undefined ? true : transparent;
	
	this.batchs = [];
	this.toRemove = [];
	console.log(this.transparent)
	this.filterManager = new PIXI.WebGLFilterManager(this.transparent);
}

// constructor
PIXI.WebGLRenderGroup.prototype.constructor = PIXI.WebGLRenderGroup;

/**
 * Add a display object to the webgl renderer
 *
 * @method setRenderable
 * @param displayObject {DisplayObject}
 * @private 
 */
PIXI.WebGLRenderGroup.prototype.setRenderable = function(displayObject)
{
	// has this changed??
	if(this.root)this.removeDisplayObjectAndChildren(this.root);
	
	displayObject.worldVisible = displayObject.visible;
	
	// soooooo //
	// to check if any batchs exist already??
	
	// TODO what if its already has an object? should remove it
	this.root = displayObject;
	this.addDisplayObjectAndChildren(displayObject);
}

/**
 * Renders the stage to its webgl view
 *
 * @method render
 * @param projection {Object}
 */
PIXI.WebGLRenderGroup.prototype.render = function(projection, buffer)
{
	PIXI.WebGLRenderer.updateTextures();
	
	var gl = this.gl;
	gl.uniform2f(PIXI.defaultShader.projectionVector, projection.x, projection.y);

	this.filterManager.begin(projection, buffer);

	
	gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
	// will render all the elements in the group
	var renderable;

	for (var i=0; i < this.batchs.length; i++) 
	{
		
		renderable = this.batchs[i];
		if(renderable instanceof PIXI.WebGLBatch)
		{
			this.batchs[i].render();
			continue;
		}
		
		// render special
		this.renderSpecial(renderable, projection);
	}
	
}

/**
 * Renders a specific displayObject
 *
 * @method renderSpecific
 * @param displayObject {DisplayObject}
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderSpecific = function(displayObject, projection, buffer)
{
	PIXI.WebGLRenderer.updateTextures();
	var gl = this.gl;

	gl.uniform2f(PIXI.defaultShader.projectionVector, projection.x, projection.y);

	this.filterManager.begin(projection, buffer);

	// to do!
	// render part of the scene...
	
	var startIndex;
	var startBatchIndex;
	
	var endIndex;
	var endBatchIndex;
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.first;
	while(nextRenderable._iNext)
	{
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
		nextRenderable = nextRenderable._iNext;
	}
	var startBatch = nextRenderable.batch;
	//console.log(nextRenderable);
	
	//console.log(renderable)
	if(nextRenderable instanceof PIXI.Sprite)
	{
		startBatch = nextRenderable.batch;
		
		var head = startBatch.head;
		var next = head;
		
		// ok now we have the batch.. need to find the start index!
		if(head == nextRenderable)
		{
			startIndex = 0;
		}
		else
		{
			startIndex = 1;
			
			while(head.__next != nextRenderable)
			{
				startIndex++;
				head = head.__next;
			}
		}
	}
	else
	{
		startBatch = nextRenderable;
	}
	
	// Get the LAST renderable object
	var lastRenderable = displayObject.last;
	while(lastRenderable._iPrev)
	{
		if(lastRenderable.renderable && lastRenderable.__renderGroup)break;
		lastRenderable = lastRenderable._iNext;
	}
	
	if(lastRenderable instanceof PIXI.Sprite)
	{
		endBatch = lastRenderable.batch;
		
		var head = endBatch.head;
		
		if(head == lastRenderable)
		{
			endIndex = 0;
		}
		else
		{
			endIndex = 1;
			
			while(head.__next != lastRenderable)
			{
				endIndex++;
				head = head.__next;
			}
		}
	}
	else
	{
		endBatch = lastRenderable;
	}
	
	//console.log(endBatch);
	// TODO - need to fold this up a bit!
	
	if(startBatch == endBatch)
	{
		if(startBatch instanceof PIXI.WebGLBatch)
		{
			startBatch.render(startIndex, endIndex+1);
		}
		else
		{
			this.renderSpecial(startBatch, projection);
		}
		return;
	}
	
	// now we have first and last!
	startBatchIndex = this.batchs.indexOf(startBatch);
	endBatchIndex = this.batchs.indexOf(endBatch);
	
	// DO the first batch
	if(startBatch instanceof PIXI.WebGLBatch)
	{
		startBatch.render(startIndex);
	}
	else
	{
		this.renderSpecial(startBatch, projection);
	}
	
	// DO the middle batchs..
	for (var i=startBatchIndex+1; i < endBatchIndex; i++) 
	{
		renderable = this.batchs[i];
	
		if(renderable instanceof PIXI.WebGLBatch)
		{
			this.batchs[i].render();
		}
		else
		{
			this.renderSpecial(renderable, projection);
		}
	}
	
	// DO the last batch..
	if(endBatch instanceof PIXI.WebGLBatch)
	{
		endBatch.render(0, endIndex+1);
	}
	else
	{
		this.renderSpecial(endBatch, projection);
	}
}

/**
 * Renders a specific renderable
 *
 * @method renderSpecial
 * @param renderable {DisplayObject}
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderSpecial = function(renderable, projection)
{
	
	var worldVisible = renderable.vcount === PIXI.visibleCount


	if(renderable instanceof PIXI.TilingSprite)
	{
		if(worldVisible)this.renderTilingSprite(renderable, projection);
	}
	else if(renderable instanceof PIXI.Strip)
	{
		if(worldVisible)this.renderStrip(renderable, projection);
	}
	else if(renderable instanceof PIXI.CustomRenderable)
	{
		if(worldVisible) renderable.renderWebGL(this, projection);
	}
	else if(renderable instanceof PIXI.Graphics)
	{
		if(worldVisible && renderable.renderable) PIXI.WebGLGraphics.renderGraphics(renderable, projection);
	}
	else if(renderable instanceof PIXI.FilterBlock)
	{
		this.handleFilterBlock(renderable, projection);
	}
}

flip = false;
var maskStack = [];
var maskPosition = 0;

//var usedMaskStack = [];

PIXI.WebGLRenderGroup.prototype.handleFilterBlock = function(filterBlock, projection)
{
	/*
	 * for now only masks are supported..
	 */
	var gl = PIXI.gl;
	
	if(filterBlock.open)
	{
		if(filterBlock.data instanceof Array)
		{
			this.filterManager.pushFilter(filterBlock);
			// ok so..
			
		}
		else
		{	
			maskPosition++;

			maskStack.push(filterBlock)
	
			gl.enable(gl.STENCIL_TEST);
			
			gl.colorMask(false, false, false, false);
			
			gl.stencilFunc(gl.ALWAYS,1,1);
			gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR);
	
			PIXI.WebGLGraphics.renderGraphics(filterBlock.data, projection);
			
			gl.colorMask(true, true, true, true);
			gl.stencilFunc(gl.NOTEQUAL,0,maskStack.length);
			gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);
		}
	}
	else
	{
		if(filterBlock.data instanceof Array)
		{
			this.filterManager.popFilter();
		}
		else
		{
			var maskData = maskStack.pop(filterBlock)


			if(maskData)
			{
				gl.colorMask(false, false, false, false);
			
				gl.stencilFunc(gl.ALWAYS,1,1);
				gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR);

				PIXI.WebGLGraphics.renderGraphics(maskData.data, projection);
			
				gl.colorMask(true, true, true, true);
				gl.stencilFunc(gl.NOTEQUAL,0,maskStack.length);
				gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);
			};

			gl.disable(gl.STENCIL_TEST);
		}
	}
}

/**
 * Updates a webgl texture
 *
 * @method updateTexture
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.updateTexture = function(displayObject)
{
	
	// TODO definitely can optimse this function..
	
	this.removeObject(displayObject);
	
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	var previousRenderable = displayObject.first;
	while(previousRenderable != this.root)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.last;
	while(nextRenderable._iNext)
	{
		nextRenderable = nextRenderable._iNext;
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
	}
	
	this.insertObject(displayObject, previousRenderable, nextRenderable);
}

/**
 * Adds filter blocks
 *
 * @method addFilterBlocks
 * @param start {FilterBlock}
 * @param end {FilterBlock}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.addFilterBlocks = function(start, end)
{
	start.__renderGroup = this;
	end.__renderGroup = this;
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	var previousRenderable = start;
	while(previousRenderable != this.root.first)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	this.insertAfter(start, previousRenderable);
		
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var previousRenderable2 = end;
	while(previousRenderable2 != this.root.first)
	{
		previousRenderable2 = previousRenderable2._iPrev;
		if(previousRenderable2.renderable && previousRenderable2.__renderGroup)break;
	}
	this.insertAfter(end, previousRenderable2);
}

/**
 * Remove filter blocks
 *
 * @method removeFilterBlocks
 * @param start {FilterBlock}
 * @param end {FilterBlock}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeFilterBlocks = function(start, end)
{
	this.removeObject(start);
	this.removeObject(end);
}

/**
 * Adds a display object and children to the webgl context
 *
 * @method addDisplayObjectAndChildren
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.addDisplayObjectAndChildren = function(displayObject)
{
	if(displayObject.__renderGroup)displayObject.__renderGroup.removeDisplayObjectAndChildren(displayObject);
	
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	
	var previousRenderable = displayObject.first;
	while(previousRenderable != this.root.first)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.last;
	while(nextRenderable._iNext)
	{
		nextRenderable = nextRenderable._iNext;
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
	}
	
	// one the display object hits this. we can break the loop	
	
	var tempObject = displayObject.first;
	var testObject = displayObject.last._iNext;
	do	
	{
		tempObject.__renderGroup = this;
		
		if(tempObject.renderable)
		{
		
			this.insertObject(tempObject, previousRenderable, nextRenderable);
			previousRenderable = tempObject;
		}
		
		tempObject = tempObject._iNext;
	}
	while(tempObject != testObject)
}

/**
 * Removes a display object and children to the webgl context
 *
 * @method removeDisplayObjectAndChildren
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeDisplayObjectAndChildren = function(displayObject)
{
	if(displayObject.__renderGroup != this)return;
	
//	var displayObject = displayObject.first;
	var lastObject = displayObject.last;
	do	
	{
		displayObject.__renderGroup = null;
		if(displayObject.renderable)this.removeObject(displayObject);
		displayObject = displayObject._iNext;
	}
	while(displayObject)
}

/**
 * Inserts a displayObject into the linked list
 *
 * @method insertObject
 * @param displayObject {DisplayObject}
 * @param previousObject {DisplayObject}
 * @param nextObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.insertObject = function(displayObject, previousObject, nextObject)
{
	// while looping below THE OBJECT MAY NOT HAVE BEEN ADDED
	var previousSprite = previousObject;
	var nextSprite = nextObject;
	
	/*
	 * so now we have the next renderable and the previous renderable
	 * 
	 */
	if(displayObject instanceof PIXI.Sprite)
	{
		var previousBatch
		var nextBatch
		
		if(previousSprite instanceof PIXI.Sprite)
		{
			previousBatch = previousSprite.batch;
			if(previousBatch)
			{
				if(previousBatch.texture == displayObject.texture.baseTexture && previousBatch.blendMode == displayObject.blendMode)
				{
					previousBatch.insertAfter(displayObject, previousSprite);
					return;
				}
			}
		}
		else
		{
			// TODO reword!
			previousBatch = previousSprite;
		}
	
		if(nextSprite)
		{
			if(nextSprite instanceof PIXI.Sprite)
			{
				nextBatch = nextSprite.batch;
			
				//batch may not exist if item was added to the display list but not to the webGL
				if(nextBatch)
				{
					if(nextBatch.texture == displayObject.texture.baseTexture && nextBatch.blendMode == displayObject.blendMode)
					{
						nextBatch.insertBefore(displayObject, nextSprite);
						return;
					}
					else
					{
						if(nextBatch == previousBatch)
						{
							// THERE IS A SPLIT IN THIS BATCH! //
							var splitBatch = previousBatch.split(nextSprite);
							// COOL!
							// add it back into the array	
							/*
							 * OOPS!
							 * seems the new sprite is in the middle of a batch
							 * lets split it.. 
							 */
							var batch = PIXI.WebGLRenderer.getBatch();

							var index = this.batchs.indexOf( previousBatch );
							batch.init(displayObject);
							this.batchs.splice(index+1, 0, batch, splitBatch);
							
							return;
						}
					}
				}
			}
			else
			{
				// TODO re-word!
				
				nextBatch = nextSprite;
			}
		}
		
		/*
		 * looks like it does not belong to any batch!
		 * but is also not intersecting one..
		 * time to create anew one!
		 */
		
		var batch =  PIXI.WebGLRenderer.getBatch();
		batch.init(displayObject);

		if(previousBatch) // if this is invalid it means 
		{
			var index = this.batchs.indexOf( previousBatch );
			this.batchs.splice(index+1, 0, batch);
		}
		else
		{
			this.batchs.push(batch);
		}
		
		return;
	}
	else if(displayObject instanceof PIXI.TilingSprite)
	{
		
		// add to a batch!!
		this.initTilingSprite(displayObject);
	//	this.batchs.push(displayObject);
		
	}
	else if(displayObject instanceof PIXI.Strip)
	{
		// add to a batch!!
		this.initStrip(displayObject);
	//	this.batchs.push(displayObject);
	}
	else if(displayObject)// instanceof PIXI.Graphics)
	{
		//displayObject.initWebGL(this);
		
		// add to a batch!!
		//this.initStrip(displayObject);
		//this.batchs.push(displayObject);
	}
	
	this.insertAfter(displayObject, previousSprite);
			
	// insert and SPLIT!

}

/**
 * Inserts a displayObject into the linked list
 *
 * @method insertAfter
 * @param item {DisplayObject}
 * @param displayObject {DisplayObject} The object to insert
 * @private
 */
PIXI.WebGLRenderGroup.prototype.insertAfter = function(item, displayObject)
{
	if(displayObject instanceof PIXI.Sprite)
	{
		var previousBatch = displayObject.batch;
		
		if(previousBatch)
		{
			// so this object is in a batch!
			
			// is it not? need to split the batch
			if(previousBatch.tail == displayObject)
			{
				// is it tail? insert in to batchs	
				var index = this.batchs.indexOf( previousBatch );
				this.batchs.splice(index+1, 0, item);
			}
			else
			{
				// TODO MODIFY ADD / REMOVE CHILD TO ACCOUNT FOR FILTERS (also get prev and next) //
				
				// THERE IS A SPLIT IN THIS BATCH! //
				var splitBatch = previousBatch.split(displayObject.__next);
				
				// COOL!
				// add it back into the array	
				/*
				 * OOPS!
				 * seems the new sprite is in the middle of a batch
				 * lets split it.. 
				 */
				var index = this.batchs.indexOf( previousBatch );
				this.batchs.splice(index+1, 0, item, splitBatch);
			}
		}
		else
		{
			this.batchs.push(item);
		}
	}
	else
	{
		var index = this.batchs.indexOf( displayObject );
		this.batchs.splice(index+1, 0, item);
	}
}

/**
 * Removes a displayObject from the linked list
 *
 * @method removeObject
 * @param displayObject {DisplayObject} The object to remove
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeObject = function(displayObject)
{
	// loop through children..
	// display object //
	
	// add a child from the render group..
	// remove it and all its children!
	//displayObject.cacheVisible = false;//displayObject.visible;

	/*
	 * removing is a lot quicker..
	 * 
	 */
	var batchToRemove;
	
	if(displayObject instanceof PIXI.Sprite)
	{
		// should always have a batch!
		var batch = displayObject.batch;
		if(!batch)return; // this means the display list has been altered befre rendering
		
		batch.remove(displayObject);
		
		if(batch.size==0)
		{
			batchToRemove = batch;
		}
	}
	else
	{
		batchToRemove = displayObject;
	}
	
	/*
	 * Looks like there is somthing that needs removing!
	 */
	if(batchToRemove)	
	{
		var index = this.batchs.indexOf( batchToRemove );
		if(index == -1)return;// this means it was added then removed before rendered
		
		// ok so.. check to see if you adjacent batchs should be joined.
		// TODO may optimise?
		if(index == 0 || index == this.batchs.length-1)
		{
			// wha - eva! just get of the empty batch!
			this.batchs.splice(index, 1);
			if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
		
			return;
		}
		
		if(this.batchs[index-1] instanceof PIXI.WebGLBatch && this.batchs[index+1] instanceof PIXI.WebGLBatch)
		{
			if(this.batchs[index-1].texture == this.batchs[index+1].texture && this.batchs[index-1].blendMode == this.batchs[index+1].blendMode)
			{
				//console.log("MERGE")
				this.batchs[index-1].merge(this.batchs[index+1]);
				
				if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
				PIXI.WebGLRenderer.returnBatch(this.batchs[index+1]);
				this.batchs.splice(index, 2);
				return;
			}
		}
		
		this.batchs.splice(index, 1);
		if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
	}
}


/**
 * Initializes a tiling sprite
 *
 * @method initTilingSprite
 * @param sprite {TilingSprite} The tiling sprite to initialize
 * @private
 */
PIXI.WebGLRenderGroup.prototype.initTilingSprite = function(sprite)
{
	var gl = this.gl;

	// make the texture tilable..
			
	sprite.verticies = new Float32Array([0, 0,
										  sprite.width, 0,
										  sprite.width,  sprite.height,
										 0,  sprite.height]);
					
	sprite.uvs = new Float32Array([0, 0,
									1, 0,
									1, 1,
									0, 1]);
				
	sprite.colors = new Float32Array([1,1,1,1]);
	
	sprite.indices =  new Uint16Array([0, 1, 3,2])//, 2]);
	
	sprite._vertexBuffer = gl.createBuffer();
	sprite._indexBuffer = gl.createBuffer();
	sprite._uvBuffer = gl.createBuffer();
	sprite._colorBuffer = gl.createBuffer();
						
	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, sprite.verticies, gl.STATIC_DRAW);

	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._uvBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,  sprite.uvs, gl.DYNAMIC_DRAW);

    gl.bindBuffer(gl.ARRAY_BUFFER, sprite._colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, sprite.colors, gl.STATIC_DRAW);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sprite._indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, sprite.indices, gl.STATIC_DRAW);
    
//    return ( (x > 0) && ((x & (x - 1)) == 0) );

	if(sprite.texture.baseTexture._glTexture)
	{
    	gl.bindTexture(gl.TEXTURE_2D, sprite.texture.baseTexture._glTexture);
    	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
		sprite.texture.baseTexture._powerOf2 = true;
	}
	else
	{
		sprite.texture.baseTexture._powerOf2 = true;
	}
}

/**
 * Renders a Strip
 *
 * @method renderStrip
 * @param strip {Strip} The strip to render
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderStrip = function(strip, projection)
{
	var gl = this.gl;

	PIXI.activateStripShader();

	var shader = PIXI.stripShader;

	var program = shader.program;
	
	var m = PIXI.mat3.clone(strip.worldTransform);
	
	PIXI.mat3.transpose(m);
	
//	console.log(projection)
	// set the matrix transform for the 
 	gl.uniformMatrix3fv(shader.translationMatrix, false, m);
	gl.uniform2f(shader.projectionVector, projection.x, projection.y);
	gl.uniform2f(shader.offsetVector, -PIXI.offset.x, -PIXI.offset.y);
	
	gl.uniform1f(shader.alpha, strip.worldAlpha);

	/*
	if(strip.blendMode == PIXI.blendModes.NORMAL)
	{
		gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
	}
	else
	{
		gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_COLOR);
	}
	*/
	
	//console.log("!!")
	if(!strip.dirty)
	{	
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
		gl.bufferSubData(gl.ARRAY_BUFFER, 0, strip.verticies)
	    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
		
		// update the uvs
	   	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
	    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
			
	    gl.activeTexture(gl.TEXTURE0);
	    gl.bindTexture(gl.TEXTURE_2D, strip.texture.baseTexture._glTexture);
		
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
	    gl.vertexAttribPointer(shader.colorAttribute, 1, gl.FLOAT, false, 0, 0);
		
		// dont need to upload!
	    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
	}
	else
	{
		strip.dirty = false;
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
		gl.bufferData(gl.ARRAY_BUFFER, strip.verticies, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
		
		// update the uvs
	   	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
	   	gl.bufferData(gl.ARRAY_BUFFER, strip.uvs, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
			
	    gl.activeTexture(gl.TEXTURE0);
	    gl.bindTexture(gl.TEXTURE_2D, strip.texture.baseTexture._glTexture);
	//	console.log(strip.texture.baseTexture._glTexture)
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
		gl.bufferData(gl.ARRAY_BUFFER, strip.colors, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.colorAttribute, 1, gl.FLOAT, false, 0, 0);
		
		// dont need to upload!
	    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
	    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, strip.indices, gl.STATIC_DRAW);
	    
	}
	
	gl.drawElements(gl.TRIANGLE_STRIP, strip.indices.length, gl.UNSIGNED_SHORT, 0);
    
    PIXI.deactivateStripShader();
  	//gl.useProgram(PIXI.currentProgram);
}

/**
 * Renders a TilingSprite
 *
 * @method renderTilingSprite
 * @param sprite {TilingSprite} The tiling sprite to render
 * @param projectionMatrix {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderTilingSprite = function(sprite, projectionMatrix)
{
	var gl = this.gl;


	var shaderProgram = PIXI.shaderProgram;
	
	var tilePosition = sprite.tilePosition;
	var tileScale = sprite.tileScale;
	
	var offsetX =  tilePosition.x/sprite.texture.baseTexture.width;
	var offsetY =  tilePosition.y/sprite.texture.baseTexture.height;
	
	var scaleX =  (sprite.width / sprite.texture.baseTexture.width)  / tileScale.x;
	var scaleY =  (sprite.height / sprite.texture.baseTexture.height) / tileScale.y;

	sprite.uvs[0] = 0 - offsetX;
	sprite.uvs[1] = 0 - offsetY;
	
	sprite.uvs[2] = (1 * scaleX)  -offsetX;
	sprite.uvs[3] = 0 - offsetY;
	
	sprite.uvs[4] = (1 *scaleX) - offsetX;
	sprite.uvs[5] = (1 *scaleY) - offsetY;
	
	sprite.uvs[6] = 0 - offsetX;
	sprite.uvs[7] = (1 *scaleY) - offsetY;
	
	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._uvBuffer);
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, sprite.uvs)
	
	this.renderStrip(sprite, projectionMatrix);
}

/**
 * Initializes a strip to be rendered
 *
 * @method initStrip
 * @param strip {Strip} The strip to initialize
 * @private
 */
PIXI.WebGLRenderGroup.prototype.initStrip = function(strip)
{
	// build the strip!
	var gl = this.gl;
	var shaderProgram = this.shaderProgram;
	
	strip._vertexBuffer = gl.createBuffer();
	strip._indexBuffer = gl.createBuffer();
	strip._uvBuffer = gl.createBuffer();
	strip._colorBuffer = gl.createBuffer();
	
	gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, strip.verticies, gl.DYNAMIC_DRAW);

	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,  strip.uvs, gl.STATIC_DRAW);

    gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, strip.colors, gl.STATIC_DRAW);

	
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, strip.indices, gl.STATIC_DRAW);
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.WebGLFilterManager = function(transparent)
{
	this.transparent = transparent;
	
	this.filterStack = [];
	this.texturePool = [];
	
	this.offsetX = 0;
	this.offsetY = 0;
	
	this.initShaderBuffers();
}

// API

PIXI.WebGLFilterManager.prototype.begin = function(projection, buffer)
{
	this.width = projection.x * 2;
	this.height = -projection.y * 2;
	this.buffer = buffer;
}

PIXI.WebGLFilterManager.prototype.pushFilter = function(filterBlock)
{
	var gl = PIXI.gl;

	// filter program
	// OPTIMISATION - the first filter is free if its a simple color change?
	this.filterStack.push(filterBlock);

	var filter = filterBlock.filterPasses[0];

	

	this.offsetX += filterBlock.target.filterArea.x;
	this.offsetY += filterBlock.target.filterArea.y;
	
	
	
	
	
	var texture = this.texturePool.pop();
	if(!texture)texture = new PIXI.FilterTexture(this.width, this.height);
	
	gl.bindTexture(gl.TEXTURE_2D,  texture.texture);
	
	this.getBounds(filterBlock.target);
		
	// addpadding?
	//displayObject.filterArea.x

	var filterArea = filterBlock.target.filterArea;

	var padidng = filter.padding;
	filterArea.x -= padidng;
	filterArea.y -= padidng;
	filterArea.width += padidng * 2;
	filterArea.height += padidng * 2;

	// cap filter to screen size..
	if(filterArea.x < 0)filterArea.x = 0;	
	if(filterArea.width > this.width)filterArea.width = this.width;
	if(filterArea.y < 0)filterArea.y = 0;	
	if(filterArea.height > this.height)filterArea.height = this.height;


	//gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  filterArea.width, filterArea.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	gl.bindFramebuffer(gl.FRAMEBUFFER, texture.frameBuffer);
   
  // console.log(filterArea)
	// set view port
	gl.viewport(0, 0, filterArea.width, filterArea.height);	
	
	PIXI.projection.x = filterArea.width/2;
	PIXI.projection.y = -filterArea.height/2;
	
	PIXI.offset.x = -filterArea.x; 
	PIXI.offset.y = -filterArea.y;

	//console.log(PIXI.defaultShader.projectionVector)
	// update projection
	gl.uniform2f(PIXI.defaultShader.projectionVector, filterArea.width/2, -filterArea.height/2);
	gl.uniform2f(PIXI.defaultShader.offsetVector, -filterArea.x, -filterArea.y);
	//PIXI.primitiveProgram

	gl.colorMask(true, true, true, true); 
	gl.clearColor(0,0,0, 0);     
	gl.clear(gl.COLOR_BUFFER_BIT);
	
	//filter.texture = texture;
	filterBlock._glFilterTexture = texture;

	//console.log("PUSH")
}


PIXI.WebGLFilterManager.prototype.popFilter = function()
{
	
	var gl = PIXI.gl;
	
	var filterBlock = this.filterStack.pop();



	var filterArea = filterBlock.target.filterArea;

	var texture = filterBlock._glFilterTexture;

	if(filterBlock.filterPasses.length > 1)
	{
		gl.viewport(0, 0, filterArea.width, filterArea.height);

		gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	
		this.vertexArray[0] = 0;
		this.vertexArray[1] = filterArea.height;
		
		this.vertexArray[2] = filterArea.width;
		this.vertexArray[3] = filterArea.height;
		
		this.vertexArray[4] = 0;
		this.vertexArray[5] = 0;
		
		this.vertexArray[6] = filterArea.width;
		this.vertexArray[7] = 0;


		gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexArray);

	
		gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
		// nnow set the uvs..
		this.uvArray[2] = filterArea.width/this.width;
		this.uvArray[5] = filterArea.height/this.height;
		this.uvArray[6] = filterArea.width/this.width;
		this.uvArray[7] = filterArea.height/this.height;
		
		gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.uvArray);

		var inputTexture = texture;
		var outputTexture = this.texturePool.pop();
		if(!outputTexture)outputTexture = new PIXI.FilterTexture(this.width, this.height);
		
		// need to clear this FBO as it may have some left over elements from a prvious filter.
		gl.bindFramebuffer(gl.FRAMEBUFFER, outputTexture.frameBuffer );     
		gl.clear(gl.COLOR_BUFFER_BIT);
	 
		gl.disable(gl.BLEND);
		
		for (var i = 0; i < filterBlock.filterPasses.length-1; i++) 
		{
			var filterPass = filterBlock.filterPasses[i];
	
			gl.bindFramebuffer(gl.FRAMEBUFFER, outputTexture.frameBuffer );
			
			// set texture
		    gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, inputTexture.texture);
			
			// draw texture..
			//filterPass.applyFilterPass(filterArea.width, filterArea.height);
			this.applyFilterPass(filterPass, filterArea, filterArea.width, filterArea.height);

			// swap the textures..
			var temp = inputTexture;
			inputTexture = outputTexture;
			outputTexture = temp;
			
		};

		gl.enable(gl.BLEND);

		texture = inputTexture;
		this.texturePool.push(outputTexture);
	}

	var filter = filterBlock.filterPasses[filterBlock.filterPasses.length-1];
	
	this.offsetX -= filterArea.x;
	this.offsetY -= filterArea.y;

	
	var sizeX = this.width;
	var sizeY = this.height;
	
	var offsetX = 0;
	var offsetY = 0;
	
	var buffer = this.buffer;
	
	// time to render the filters texture to the previous scene
	if(this.filterStack.length === 0)
	{
		gl.colorMask(true, true, true, this.transparent); 
	}
	else
	{
		var currentFilter = this.filterStack[this.filterStack.length-1];
		var filterArea = currentFilter.target.filterArea;
		
		sizeX = filterArea.width;
		sizeY = filterArea.height;
		
		offsetX = filterArea.x;
		offsetY = filterArea.y;
		
		buffer =  currentFilter._glFilterTexture.frameBuffer;
	}
	
	

	// TODO need toremove thease global elements..
	PIXI.projection.x = sizeX/2;
	PIXI.projection.y = -sizeY/2;

	PIXI.offset.x = offsetX;
	PIXI.offset.y = offsetY; 
	

	var filterArea =  filterBlock.target.filterArea;
	var x = filterArea.x-offsetX;
	var y = filterArea.y-offsetY;
	
	// update the buffers..	
	// make sure to flip the y!
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	
	this.vertexArray[0] = x;
	this.vertexArray[1] = y + filterArea.height;
	
	this.vertexArray[2] = x + filterArea.width;
	this.vertexArray[3] = y + filterArea.height;
	
	this.vertexArray[4] = x;
	this.vertexArray[5] = y;
	
	this.vertexArray[6] = x + filterArea.width;
	this.vertexArray[7] = y;

	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexArray);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);

	this.uvArray[2] = filterArea.width/this.width;
	this.uvArray[5] = filterArea.height/this.height;
	this.uvArray[6] = filterArea.width/this.width;
	this.uvArray[7] = filterArea.height/this.height;
	
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.uvArray);

	gl.viewport(0, 0, sizeX, sizeY);	
	// bind the buffer
	gl.bindFramebuffer(gl.FRAMEBUFFER, buffer );
	
	// set texture
    gl.activeTexture(gl.TEXTURE0);
	gl.bindTexture(gl.TEXTURE_2D, texture.texture);
	
	// apply!
	//filter.applyFilterPass(sizeX, sizeY);
	this.applyFilterPass(filter, filterArea, sizeX, sizeY);

	// now restore the regular shader..
    gl.useProgram(PIXI.defaultShader.program);
	gl.uniform2f(PIXI.defaultShader.projectionVector, sizeX/2, -sizeY/2);
	gl.uniform2f(PIXI.defaultShader.offsetVector, -offsetX, -offsetY);

	// return the texture to the pool
	this.texturePool.push(texture);
	filterBlock._glFilterTexture = null;	
}

PIXI.WebGLFilterManager.prototype.applyFilterPass = function(filter, filterArea, width, height)
{
	// use program
	var gl = PIXI.gl;

	if(!filter.shader)
	{
		var shader = new PIXI.PixiShader();
				
		shader.fragmentSrc = filter.fragmentSrc;
		shader.uniforms = filter.uniforms;
		shader.init();
		
		filter.shader = shader;
	}

	var shader = filter.shader;
	
	// set the shader
	gl.useProgram(shader.program);

	gl.uniform2f(shader.projectionVector, width/2, -height/2);
	gl.uniform2f(shader.offsetVector, 0,0)

	if(filter.uniforms.dimensions)
	{
		//console.log(filter.uniforms.dimensions)
		filter.uniforms.dimensions.value[0] = this.width;//width;
		filter.uniforms.dimensions.value[1] = this.height;//height;
		filter.uniforms.dimensions.value[2] = this.vertexArray[0];
		filter.uniforms.dimensions.value[3] = this.vertexArray[5];//filterArea.height;
	//	console.log(this.vertexArray[5])
	}

	shader.syncUniforms();
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
   
   	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
	
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    
	// draw the filter...
    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );
}

PIXI.WebGLFilterManager.prototype.initShaderBuffers = function()
{
	var gl = PIXI.gl;
	
	// create some buffers
	this.vertexBuffer = gl.createBuffer();	
	this.uvBuffer = gl.createBuffer();
	this.indexBuffer = gl.createBuffer();
	
	// bind and upload the vertexs..
	// keep a refferance to the vertexFloatData..
	this.vertexArray = new Float32Array([0.0, 0.0, 
								         1.0, 0.0, 
								         0.0, 1.0, 
								         1.0, 1.0]);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	gl.bufferData(
    gl.ARRAY_BUFFER, 
    this.vertexArray, 
    gl.STATIC_DRAW);
    
    
    // bind and upload the uv buffer
	this.uvArray = new Float32Array([0.0, 0.0, 
								     1.0, 0.0, 
								     0.0, 1.0, 
								     1.0, 1.0]);
								         
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
	gl.bufferData(
    gl.ARRAY_BUFFER, 
    this.uvArray, 
    gl.STATIC_DRAW);
    
	// bind and upload the index
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
	gl.bufferData(
    gl.ELEMENT_ARRAY_BUFFER, 
    new Uint16Array([0, 1, 2, 1, 3, 2]), 
    gl.STATIC_DRAW);
}

PIXI.WebGLFilterManager.prototype.getBounds = function(displayObject)
{
	// time to get the width and height of the object!
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index, doTest;
	var a, b, c, d, tx, ty, x1, x2, x3, x4, y1, y2, y3, y4;

	var tempObject = displayObject.first;
	var testObject = displayObject.last._iNext;
	
	var maxX = -Infinity;
	var maxY = -Infinity;
	
	var minX = Infinity;
	var minY = Infinity;
	
	do	
	{
		// TODO can be optimized! - what if there is no scale / rotation?
		
		if(tempObject.visible)
		{
			if(tempObject instanceof PIXI.Sprite)
			{
				width = tempObject.texture.frame.width;
				height = tempObject.texture.frame.height;

				// TODO trim??
				aX = tempObject.anchor.x;
				aY = tempObject.anchor.y;
				w0 = width * (1-aX);
				w1 = width * -aX;

				h0 = height * (1-aY);
				h1 = height * -aY;

				doTest = true;
			}
			else if(tempObject instanceof PIXI.Graphics)
			{
				tempObject.updateFilterBounds();

				var bounds = tempObject.bounds;

				width = bounds.width;
				height = bounds.height;

				w0 = bounds.x
				w1 = bounds.x + bounds.width;

				h0 = bounds.y
				h1 = bounds.y + bounds.height;

				doTest = true;	
			}
		}
		
		if(doTest)
		{
			worldTransform = tempObject.worldTransform;

			a = worldTransform[0];
			b = worldTransform[3];
			c = worldTransform[1];
			d = worldTransform[4];
			tx = worldTransform[2];
			ty = worldTransform[5];

			x1 = a * w1 + c * h1 + tx; 
			y1 = d * h1 + b * w1 + ty;

			x2 = a * w0 + c * h1 + tx; 
			y2 = d * h1 + b * w0 + ty; 

			x3 = a * w0 + c * h0 + tx; 
			y3 = d * h0 + b * w0 + ty; 

			x4 =  a * w1 + c * h0 + tx; 
			y4 =  d * h0 + b * w1 + ty; 

			minX = x1 < minX ? x1 : minX;
			minX = x2 < minX ? x2 : minX;
			minX = x3 < minX ? x3 : minX;
			minX = x4 < minX ? x4 : minX;
			
			minY = y1 < minY ? y1 : minY;
			minY = y2 < minY ? y2 : minY;
			minY = y3 < minY ? y3 : minY;
			minY = y4 < minY ? y4 : minY;
			
			maxX = x1 > maxX ? x1 : maxX;
			maxX = x2 > maxX ? x2 : maxX;
			maxX = x3 > maxX ? x3 : maxX;
			maxX = x4 > maxX ? x4 : maxX;
			
			maxY = y1 > maxY ? y1 : maxY;
			maxY = y2 > maxY ? y2 : maxY;
			maxY = y3 > maxY ? y3 : maxY;
			maxY = y4 > maxY ? y4 : maxY;
		}

		doTest = false;
		tempObject = tempObject._iNext;

	}
	while(tempObject != testObject)
	
	// maximum bounds is the size of the screen..
	//minX = minX > 0 ? minX : 0;
	//minY = minY > 0 ? minY : 0;

	displayObject.filterArea.x = minX;
	displayObject.filterArea.y = minY;

//	console.log(maxX+ " : " + minX)
	displayObject.filterArea.width = maxX - minX;
	displayObject.filterArea.height = maxY - minY;
}

PIXI.FilterTexture = function(width, height)
{
	var gl = PIXI.gl;
	
    // next time to create a frame buffer and texture
	this.frameBuffer = gl.createFramebuffer();
    this.texture = gl.createTexture();

    gl.bindTexture(gl.TEXTURE_2D,  this.texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
	gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer );
	
	gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer );
	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);
	
	this.resize(width, height);
}

PIXI.FilterTexture.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;

	var gl = PIXI.gl;

	gl.bindTexture(gl.TEXTURE_2D,  this.texture);
	gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * the CanvasRenderer draws the stage and all its content onto a 2d canvas. This renderer should be used for browsers that do not support webGL.
 * Dont forget to add the view to your DOM or you will not see anything :)
 *
 * @class CanvasRenderer
 * @constructor
 * @param width=0 {Number} the width of the canvas view
 * @param height=0 {Number} the height of the canvas view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 */
PIXI.CanvasRenderer = function(width, height, view, transparent)
{
	this.transparent = transparent;

	/**
	 * The width of the canvas view
	 *
	 * @property width
	 * @type Number
	 * @default 800
	 */
	this.width = width || 800;

	/**
	 * The height of the canvas view
	 *
	 * @property height
	 * @type Number
	 * @default 600
	 */
	this.height = height || 600;

	/**
	 * The canvas element that the everything is drawn to
	 *
	 * @property view
	 * @type Canvas
	 */
	this.view = view || document.createElement( 'canvas' );

	/**
	 * The canvas context that the everything is drawn to
	 * @property context
	 * @type Canvas 2d Context
	 */
	this.context = this.view.getContext("2d");

	this.refresh = true;
	// hack to enable some hardware acceleration!
	//this.view.style["transform"] = "translatez(0)";
	
    this.view.width = this.width;
	this.view.height = this.height;  
	this.count = 0;
}

// constructor
PIXI.CanvasRenderer.prototype.constructor = PIXI.CanvasRenderer;

/**
 * Renders the stage to its canvas view
 *
 * @method render
 * @param stage {Stage} the Stage element to be rendered
 */
PIXI.CanvasRenderer.prototype.render = function(stage)
{
	
	//stage.__childrenAdded = [];
	//stage.__childrenRemoved = [];
	
	// update textures if need be
	PIXI.texturesToUpdate = [];
	PIXI.texturesToDestroy = [];
	
	PIXI.visibleCount++;
	stage.updateTransform();
	
	// update the background color
	if(this.view.style.backgroundColor!=stage.backgroundColorString && !this.transparent)this.view.style.backgroundColor = stage.backgroundColorString;

	this.context.setTransform(1,0,0,1,0,0); 
	this.context.clearRect(0, 0, this.width, this.height)
    this.renderDisplayObject(stage);
    //as
   
    // run interaction!
	if(stage.interactive)
	{
		//need to add some events!
		if(!stage._interactiveEventsAdded)
		{
			stage._interactiveEventsAdded = true;
			stage.interactionManager.setTarget(this);
		}
	}
	
	// remove frame updates..
	if(PIXI.Texture.frameUpdates.length > 0)
	{
		PIXI.Texture.frameUpdates = [];
	}
	
	
}

/**
 * resizes the canvas view to the specified width and height
 *
 * @method resize
 * @param width {Number} the new width of the canvas view
 * @param height {Number} the new height of the canvas view
 */
PIXI.CanvasRenderer.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;
	
	this.view.width = width;
	this.view.height = height;
}

/**
 * Renders a display object
 *
 * @method renderDisplayObject
 * @param displayObject {DisplayObject} The displayObject to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderDisplayObject = function(displayObject)
{
	// no loger recurrsive!
	var transform;
	var context = this.context;
	
	context.globalCompositeOperation = 'source-over';
	
	// one the display object hits this. we can break the loop	
	var testObject = displayObject.last._iNext;
	displayObject = displayObject.first;
	
	do	
	{
		transform = displayObject.worldTransform;
		
		if(!displayObject.visible)
		{
			displayObject = displayObject.last._iNext;
			continue;
		}
		
		if(!displayObject.renderable)
		{
			displayObject = displayObject._iNext;
			continue;
		}
		
		if(displayObject instanceof PIXI.Sprite)
		{
				
			var frame = displayObject.texture.frame;
			
			if(frame && frame.width && frame.height)
			{
				context.globalAlpha = displayObject.worldAlpha;
				
				context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5]);
					
				context.drawImage(displayObject.texture.baseTexture.source, 
								   frame.x,
								   frame.y,
								   frame.width,
								   frame.height,
								   (displayObject.anchor.x) * -frame.width, 
								   (displayObject.anchor.y) * -frame.height,
								   frame.width,
								   frame.height);
			}					   
	   	}
	   	else if(displayObject instanceof PIXI.Strip)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			this.renderStrip(displayObject);
		}
		else if(displayObject instanceof PIXI.TilingSprite)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			this.renderTilingSprite(displayObject);
		}
		else if(displayObject instanceof PIXI.CustomRenderable)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5]);
			displayObject.renderCanvas(this);
		}
		else if(displayObject instanceof PIXI.Graphics)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			PIXI.CanvasGraphics.renderGraphics(displayObject, context);
		}
		else if(displayObject instanceof PIXI.FilterBlock)
		{
			if(displayObject.data instanceof PIXI.Graphics)
 			{
				var mask = displayObject.data;

				if(displayObject.open)
				{
					context.save();
					
					var cacheAlpha = mask.alpha;
					var maskTransform = mask.worldTransform;
					
					context.setTransform(maskTransform[0], maskTransform[3], maskTransform[1], maskTransform[4], maskTransform[2], maskTransform[5])
					
					mask.worldAlpha = 0.5;
					
					context.worldAlpha = 0;
					
					PIXI.CanvasGraphics.renderGraphicsMask(mask, context);
					context.clip();
					
					mask.worldAlpha = cacheAlpha;
				}
				else
				{
					context.restore();
				}
			}
			else
			{
				// only masks supported right now!
			}
		}
	//	count++
		displayObject = displayObject._iNext;
		
		
	}
	while(displayObject != testObject)

	
}

/**
 * Renders a flat strip
 *
 * @method renderStripFlat
 * @param strip {Strip} The Strip to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderStripFlat = function(strip)
{
	var context = this.context;
	var verticies = strip.verticies;
	var uvs = strip.uvs;
	
	var length = verticies.length/2;
	this.count++;
	
	context.beginPath();
	for (var i=1; i < length-2; i++) 
	{
		
		// draw some triangles!
		var index = i*2;
		
		 var x0 = verticies[index],   x1 = verticies[index+2], x2 = verticies[index+4];
 		 var y0 = verticies[index+1], y1 = verticies[index+3], y2 = verticies[index+5];
 		 
		context.moveTo(x0, y0);
		context.lineTo(x1, y1);
		context.lineTo(x2, y2);
		
	};	
	
	context.fillStyle = "#FF0000";
	context.fill();
	context.closePath();
}

/**
 * Renders a tiling sprite
 *
 * @method renderTilingSprite
 * @param sprite {TilingSprite} The tilingsprite to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderTilingSprite = function(sprite)
{
	var context = this.context;
	
	context.globalAlpha = sprite.worldAlpha;
	
 	if(!sprite.__tilePattern) sprite.__tilePattern = context.createPattern(sprite.texture.baseTexture.source, "repeat");
 	
	context.beginPath();
	
	var tilePosition = sprite.tilePosition;
	var tileScale = sprite.tileScale;
	
    // offset
    context.scale(tileScale.x,tileScale.y);
    context.translate(tilePosition.x, tilePosition.y);
 	
	context.fillStyle = sprite.__tilePattern;
	context.fillRect(-tilePosition.x,-tilePosition.y,sprite.width / tileScale.x, sprite.height / tileScale.y);
	
	context.scale(1/tileScale.x, 1/tileScale.y);
    context.translate(-tilePosition.x, -tilePosition.y);
    
    context.closePath();
}

/**
 * Renders a strip
 *
 * @method renderStrip
 * @param strip {Strip} The Strip to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderStrip = function(strip)
{
	var context = this.context;

	// draw triangles!!
	var verticies = strip.verticies;
	var uvs = strip.uvs;
	
	var length = verticies.length/2;
	this.count++;
	for (var i=1; i < length-2; i++) 
	{
		
		// draw some triangles!
		var index = i*2;
		
		 var x0 = verticies[index],   x1 = verticies[index+2], x2 = verticies[index+4];
 		 var y0 = verticies[index+1], y1 = verticies[index+3], y2 = verticies[index+5];
 		 
  		 var u0 = uvs[index] * strip.texture.width,   u1 = uvs[index+2] * strip.texture.width, u2 = uvs[index+4]* strip.texture.width;
   		 var v0 = uvs[index+1]* strip.texture.height, v1 = uvs[index+3] * strip.texture.height, v2 = uvs[index+5]* strip.texture.height;


		context.save();
		context.beginPath();
		context.moveTo(x0, y0);
		context.lineTo(x1, y1);
		context.lineTo(x2, y2);
		context.closePath();
		
		context.clip();
		
		
        // Compute matrix transform
        var delta = u0*v1 + v0*u2 + u1*v2 - v1*u2 - v0*u1 - u0*v2;
        var delta_a = x0*v1 + v0*x2 + x1*v2 - v1*x2 - v0*x1 - x0*v2;
        var delta_b = u0*x1 + x0*u2 + u1*x2 - x1*u2 - x0*u1 - u0*x2;
        var delta_c = u0*v1*x2 + v0*x1*u2 + x0*u1*v2 - x0*v1*u2 - v0*u1*x2 - u0*x1*v2;
        var delta_d = y0*v1 + v0*y2 + y1*v2 - v1*y2 - v0*y1 - y0*v2;
        var delta_e = u0*y1 + y0*u2 + u1*y2 - y1*u2 - y0*u1 - u0*y2;
        var delta_f = u0*v1*y2 + v0*y1*u2 + y0*u1*v2 - y0*v1*u2 - v0*u1*y2 - u0*y1*v2;
		
		
		
		    
        context.transform(delta_a/delta, delta_d/delta,
                      delta_b/delta, delta_e/delta,
                      delta_c/delta, delta_f/delta);
                 
		context.drawImage(strip.texture.baseTexture.source, 0, 0);
	  	context.restore();
	};
	
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * A set of functions used by the canvas renderer to draw the primitive graphics data
 *
 * @class CanvasGraphics
 */
PIXI.CanvasGraphics = function()
{

}


/*
 * Renders the graphics object
 *
 * @static
 * @private
 * @method renderGraphics
 * @param graphics {Graphics}
 * @param context {Context2D}
 */
PIXI.CanvasGraphics.renderGraphics = function(graphics, context)
{
	var worldAlpha = graphics.worldAlpha;

	for (var i=0; i < graphics.graphicsData.length; i++)
	{
		var data = graphics.graphicsData[i];
		var points = data.points;

		context.strokeStyle = color = '#' + ('00000' + ( data.lineColor | 0).toString(16)).substr(-6);

		context.lineWidth = data.lineWidth;

		if(data.type == PIXI.Graphics.POLY)
		{
			context.beginPath();

			context.moveTo(points[0], points[1]);

			for (var j=1; j < points.length/2; j++)
			{
				context.lineTo(points[j * 2], points[j * 2 + 1]);
			}

	      	// if the first and last point are the same close the path - much neater :)
	      	if(points[0] == points[points.length-2] && points[1] == points[points.length-1])
	      	{
	      		context.closePath();
	      	}

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}
		else if(data.type == PIXI.Graphics.RECT)
		{

			if(data.fillColor || data.fillColor === 0)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
				context.fillRect(points[0], points[1], points[2], points[3]);

			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
				context.strokeRect(points[0], points[1], points[2], points[3]);
			}

		}
		else if(data.type == PIXI.Graphics.CIRC)
		{
			// TODO - need to be Undefined!
      		context.beginPath();
			context.arc(points[0], points[1], points[2],0,2*Math.PI);
			context.closePath();

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}
		else if(data.type == PIXI.Graphics.ELIP)
		{

			// elipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas

			var elipseData =  data.points;

			var w = elipseData[2] * 2;
			var h = elipseData[3] * 2;

			var x = elipseData[0] - w/2;
			var y = elipseData[1] - h/2;

      		context.beginPath();

			var kappa = .5522848,
			ox = (w / 2) * kappa, // control point offset horizontal
			oy = (h / 2) * kappa, // control point offset vertical
			xe = x + w,           // x-end
			ye = y + h,           // y-end
			xm = x + w / 2,       // x-middle
			ym = y + h / 2;       // y-middle

			context.moveTo(x, ym);
			context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);
			context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
			context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
			context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);

			context.closePath();

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}

	};
}

/*
 * Renders a graphics mask
 *
 * @static
 * @private
 * @method renderGraphicsMask
 * @param graphics {Graphics}
 * @param context {Context2D}
 */
PIXI.CanvasGraphics.renderGraphicsMask = function(graphics, context)
{
	var worldAlpha = graphics.worldAlpha;

	var len = graphics.graphicsData.length;
	if(len === 0)return;

	if(len > 1)
	{
		len = 1;
		console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object")
	}

	for (var i=0; i < 1; i++)
	{
		var data = graphics.graphicsData[i];
		var points = data.points;

		if(data.type == PIXI.Graphics.POLY)
		{
			context.beginPath();
			context.moveTo(points[0], points[1]);

			for (var j=1; j < points.length/2; j++)
			{
				context.lineTo(points[j * 2], points[j * 2 + 1]);
			}

	      	// if the first and last point are the same close the path - much neater :)
	      	if(points[0] == points[points.length-2] && points[1] == points[points.length-1])
	      	{
	      		context.closePath();
	      	}

		}
		else if(data.type == PIXI.Graphics.RECT)
		{
			context.beginPath();
			context.rect(points[0], points[1], points[2], points[3]);
			context.closePath();
		}
		else if(data.type == PIXI.Graphics.CIRC)
		{
			// TODO - need to be Undefined!
      		context.beginPath();
			context.arc(points[0], points[1], points[2],0,2*Math.PI);
			context.closePath();
		}
		else if(data.type == PIXI.Graphics.ELIP)
		{

			// elipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas
			var elipseData =  data.points;

			var w = elipseData[2] * 2;
			var h = elipseData[3] * 2;

			var x = elipseData[0] - w/2;
			var y = elipseData[1] - h/2;

      		context.beginPath();

			var kappa = .5522848,
			ox = (w / 2) * kappa, // control point offset horizontal
			oy = (h / 2) * kappa, // control point offset vertical
			xe = x + w,           // x-end
			ye = y + h,           // y-end
			xm = x + w / 2,       // x-middle
			ym = y + h / 2;       // y-middle

			context.moveTo(x, ym);
			context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);
			context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
			context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
			context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);
			context.closePath();
		}


	};
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * The Graphics class contains a set of methods that you can use to create primitive shapes and lines.
 * It is important to know that with the webGL renderer only simple polys can be filled at this stage
 * Complex polys will not be filled. Heres an example of a complex poly: http://www.goodboydigital.com/wp-content/uploads/2013/06/complexPolygon.png
 *
 * @class Graphics
 * @extends DisplayObjectContainer
 * @constructor
 */
PIXI.Graphics = function()
{
	PIXI.DisplayObjectContainer.call( this );

	this.renderable = true;

    /**
     * The alpha of the fill of this graphics object
     *
     * @property fillAlpha
     * @type Number
     */
	this.fillAlpha = 1;

    /**
     * The width of any lines drawn
     *
     * @property lineWidth
     * @type Number
     */
	this.lineWidth = 0;

    /**
     * The color of any lines drawn
     *
     * @property lineColor
     * @type String
     */
	this.lineColor = "black";

    /**
     * Graphics data
     *
     * @property graphicsData
     * @type Array
     * @private
     */
	this.graphicsData = [];

    /**
     * Current path
     *
     * @property currentPath
     * @type Object
     * @private
     */
	this.currentPath = {points:[]};
}

// constructor
PIXI.Graphics.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Graphics.prototype.constructor = PIXI.Graphics;

/**
 * Specifies a line style used for subsequent calls to Graphics methods such as the lineTo() method or the drawCircle() method.
 *
 * @method lineStyle
 * @param lineWidth {Number} width of the line to draw, will update the object's stored style
 * @param color {Number} color of the line to draw, will update the object's stored style
 * @param alpha {Number} alpha of the line to draw, will update the object's stored style
 */
PIXI.Graphics.prototype.lineStyle = function(lineWidth, color, alpha)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.lineWidth = lineWidth || 0;
	this.lineColor = color || 0;
	this.lineAlpha = (alpha == undefined) ? 1 : alpha;

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling, points:[], type:PIXI.Graphics.POLY};

	this.graphicsData.push(this.currentPath);
}

/**
 * Moves the current drawing position to (x, y).
 *
 * @method moveTo
 * @param x {Number} the X coord to move to
 * @param y {Number} the Y coord to move to
 */
PIXI.Graphics.prototype.moveTo = function(x, y)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling, points:[], type:PIXI.Graphics.POLY};

	this.currentPath.points.push(x, y);

	this.graphicsData.push(this.currentPath);
}

/**
 * Draws a line using the current line style from the current drawing position to (x, y);
 * the current drawing position is then set to (x, y).
 *
 * @method lineTo
 * @param x {Number} the X coord to draw to
 * @param y {Number} the Y coord to draw to
 */
PIXI.Graphics.prototype.lineTo = function(x, y)
{
	this.currentPath.points.push(x, y);
	this.dirty = true;
}

/**
 * Specifies a simple one-color fill that subsequent calls to other Graphics methods
 * (such as lineTo() or drawCircle()) use when drawing.
 *
 * @method beginFill
 * @param color {uint} the color of the fill
 * @param alpha {Number} the alpha
 */
PIXI.Graphics.prototype.beginFill = function(color, alpha)
{
	this.filling = true;
	this.fillColor = color || 0;
	this.fillAlpha = (alpha == undefined) ? 1 : alpha;
}

/**
 * Applies a fill to the lines and shapes that were added since the last call to the beginFill() method.
 *
 * @method endFill
 */
PIXI.Graphics.prototype.endFill = function()
{
	this.filling = false;
	this.fillColor = null;
	this.fillAlpha = 1;
}

/**
 * @method drawRect
 *
 * @param x {Number} The X coord of the top-left of the rectangle
 * @param y {Number} The Y coord of the top-left of the rectangle
 * @param width {Number} The width of the rectangle
 * @param height {Number} The height of the rectangle
 */
PIXI.Graphics.prototype.drawRect = function( x, y, width, height )
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, width, height], type:PIXI.Graphics.RECT};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Draws a circle.
 *
 * @method drawCircle
 * @param x {Number} The X coord of the center of the circle
 * @param y {Number} The Y coord of the center of the circle
 * @param radius {Number} The radius of the circle
 */
PIXI.Graphics.prototype.drawCircle = function( x, y, radius)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, radius, radius], type:PIXI.Graphics.CIRC};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Draws an elipse.
 *
 * @method drawElipse
 * @param x {Number}
 * @param y {Number}
 * @param width {Number}
 * @param height {Number}
 */
PIXI.Graphics.prototype.drawElipse = function( x, y, width, height)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, width, height], type:PIXI.Graphics.ELIP};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Clears the graphics that were drawn to this Graphics object, and resets fill and line style settings.
 *
 * @method clear
 */
PIXI.Graphics.prototype.clear = function()
{
	this.lineWidth = 0;
	this.filling = false;

	this.dirty = true;
	this.clearDirty = true;
	this.graphicsData = [];

	this.bounds = null//new PIXI.Rectangle();
}


PIXI.Graphics.prototype.updateFilterBounds = function()
{
	if(!this.bounds)
	{
		var minX = Infinity;
		var maxX = -Infinity;

		var minY = Infinity;
		var maxY = -Infinity;

		var points, x, y;

		for (var i = 0; i < this.graphicsData.length; i++) {
			

			var data = this.graphicsData[i];
			var type = data.type;
			var lineWidth = data.lineWidth;

			points = data.points;

			if(type === PIXI.Graphics.RECT)
			{
				x = points.x - lineWidth/2;
				y = points.y - lineWidth/2;
				var width = points.width + lineWidth;
				var height = points.height + lineWidth;

				minX = x < minX ? x : minX;
				maxX = x + width > maxX ? x + width : maxX;

				minY = y < minY ? x : minY;
				maxY = y + height > maxY ? y + height : maxY;
			}
			else if(type === PIXI.Graphics.CIRC || type === PIXI.Graphics.ELIP)
			{
				x = points.x;
				y = points.y;
				var radius = points.radius + lineWidth/2;
				
				minX = x - radius < minX ? x - radius : minX;
				maxX = x + radius > maxX ? x + radius : maxX;

				minY = y - radius < minY ? y - radius : minY;
				maxY = y + radius > maxY ? y + radius : maxY;
			}
			else
			{
				// POLY
				for (var j = 0; j < points.length; j+=2) 
				{
					
					x = points[j];
					y = points[j+1];

					minX = x-lineWidth < minX ? x-lineWidth : minX;
					maxX = x+lineWidth > maxX ? x+lineWidth : maxX;

					minY = y-lineWidth < minY ? y-lineWidth : minY;
					maxY = y+lineWidth > maxY ? y+lineWidth : maxY;
				};
			}

		};

		this.bounds = new PIXI.Rectangle(minX, minY, maxX - minX, maxY - minY);

	}

//	console.log(this.bounds);
}

// SOME TYPES:
PIXI.Graphics.POLY = 0;
PIXI.Graphics.RECT = 1;
PIXI.Graphics.CIRC = 2;
PIXI.Graphics.ELIP = 3;

/**
 * @author Mat Groves http://matgroves.com/
 */

PIXI.Strip = function(texture, width, height)
{
	PIXI.DisplayObjectContainer.call( this );
	this.texture = texture;
	this.blendMode = PIXI.blendModes.NORMAL;

	try
	{
		this.uvs = new Float32Array([0, 1,
				1, 1,
				1, 0, 0,1]);

		this.verticies = new Float32Array([0, 0,
						  0,0,
						  0,0, 0,
						  0, 0]);

		this.colors = new Float32Array([1, 1, 1, 1]);

		this.indices = new Uint16Array([0, 1, 2, 3]);
	}
	catch(error)
	{
		this.uvs = [0, 1,
				1, 1,
				1, 0, 0,1];

		this.verticies = [0, 0,
						  0,0,
						  0,0, 0,
						  0, 0];

		this.colors = [1, 1, 1, 1];

		this.indices = [0, 1, 2, 3];
	}


	/*
	this.uvs = new Float32Array()
	this.verticies = new Float32Array()
	this.colors = new Float32Array()
	this.indices = new Uint16Array()
*/
	this.width = width;
	this.height = height;

	// load the texture!
	if(texture.baseTexture.hasLoaded)
	{
		this.width   = this.texture.frame.width;
		this.height  = this.texture.frame.height;
		this.updateFrame = true;
	}
	else
	{
		this.onTextureUpdateBind = this.onTextureUpdate.bind(this);
		this.texture.addEventListener( 'update', this.onTextureUpdateBind );
	}

	this.renderable = true;
}

// constructor
PIXI.Strip.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Strip.prototype.constructor = PIXI.Strip;

PIXI.Strip.prototype.setTexture = function(texture)
{
	//TODO SET THE TEXTURES
	//TODO VISIBILITY

	// stop current texture
	this.texture = texture;
	this.width   = texture.frame.width;
	this.height  = texture.frame.height;
	this.updateFrame = true;
}

PIXI.Strip.prototype.onTextureUpdate = function(event)
{
	this.updateFrame = true;
}
// some helper functions..


/**
 * @author Mat Groves http://matgroves.com/
 */


PIXI.Rope = function(texture, points)
{
	PIXI.Strip.call( this, texture );
	this.points = points;

	try
	{
		this.verticies = new Float32Array( points.length * 4);
		this.uvs = new Float32Array( points.length * 4);
		this.colors = new Float32Array(  points.length * 2);
		this.indices = new Uint16Array( points.length * 2);
	}
	catch(error)
	{
		this.verticies = verticies

		this.uvs = uvs
		this.colors = colors
		this.indices = indices
	}

	this.refresh();
}


// constructor
PIXI.Rope.prototype = Object.create( PIXI.Strip.prototype );
PIXI.Rope.prototype.constructor = PIXI.Rope;

PIXI.Rope.prototype.refresh = function()
{
	var points = this.points;
	if(points.length < 1)return;

	var uvs = this.uvs
	var indices = this.indices;
	var colors = this.colors;

	var lastPoint = points[0];
	var nextPoint;
	var perp = {x:0, y:0};
	var point = points[0];

	this.count-=0.2;


	uvs[0] = 0
	uvs[1] = 1
	uvs[2] = 0
	uvs[3] = 1

	colors[0] = 1;
	colors[1] = 1;

	indices[0] = 0;
	indices[1] = 1;

	var total = points.length;

	for (var i =  1; i < total; i++)
	{

		var point = points[i];
		var index = i * 4;
		// time to do some smart drawing!
		var amount = i/(total-1)

		if(i%2)
		{
			uvs[index] = amount;
			uvs[index+1] = 0;

			uvs[index+2] = amount
			uvs[index+3] = 1

		}
		else
		{
			uvs[index] = amount
			uvs[index+1] = 0

			uvs[index+2] = amount
			uvs[index+3] = 1
		}

		index = i * 2;
		colors[index] = 1;
		colors[index+1] = 1;

		index = i * 2;
		indices[index] = index;
		indices[index + 1] = index + 1;

		lastPoint = point;
	}
}

PIXI.Rope.prototype.updateTransform = function()
{

	var points = this.points;
	if(points.length < 1)return;

	var verticies = this.verticies

	var lastPoint = points[0];
	var nextPoint;
	var perp = {x:0, y:0};
	var point = points[0];

	this.count-=0.2;

	verticies[0] = point.x + perp.x
	verticies[1] = point.y + perp.y //+ 200
	verticies[2] = point.x - perp.x
	verticies[3] = point.y - perp.y//+200
	// time to do some smart drawing!

	var total = points.length;

	for (var i =  1; i < total; i++)
	{

		var point = points[i];
		var index = i * 4;

		if(i < points.length-1)
		{
			nextPoint = points[i+1];
		}
		else
		{
			nextPoint = point
		}

		perp.y = -(nextPoint.x - lastPoint.x);
		perp.x = nextPoint.y - lastPoint.y;

		var ratio = (1 - (i / (total-1))) * 10;
				if(ratio > 1)ratio = 1;

		var perpLength = Math.sqrt(perp.x * perp.x + perp.y * perp.y);
		var num = this.texture.height/2//(20 + Math.abs(Math.sin((i + this.count) * 0.3) * 50) )* ratio;
		perp.x /= perpLength;
		perp.y /= perpLength;

		perp.x *= num;
		perp.y *= num;

		verticies[index] = point.x + perp.x
		verticies[index+1] = point.y + perp.y
		verticies[index+2] = point.x - perp.x
		verticies[index+3] = point.y - perp.y

		lastPoint = point;
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call( this );
}

PIXI.Rope.prototype.setTexture = function(texture)
{
	// stop current texture
	this.texture = texture;
	this.updateFrame = true;
}





/**
 * @author Mat Groves http://matgroves.com/
 */

/**
 * A tiling sprite is a fast way of rendering a tiling image
 *
 * @class TilingSprite
 * @extends DisplayObjectContainer
 * @constructor
 * @param texture {Texture} the texture of the tiling sprite
 * @param width {Number}  the width of the tiling sprite
 * @param height {Number} the height of the tiling sprite
 */
PIXI.TilingSprite = function(texture, width, height)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * The texture that the sprite is using
	 *
	 * @property texture
	 * @type Texture
	 */
	this.texture = texture;

	/**
	 * The width of the tiling sprite
	 *
	 * @property width
	 * @type Number
	 */
	this.width = width;

	/**
	 * The height of the tiling sprite
	 *
	 * @property height
	 * @type Number
	 */
	this.height = height;

	/**
	 * The scaling of the image that is being tiled
	 *
	 * @property tileScale
	 * @type Point
	 */
	this.tileScale = new PIXI.Point(1,1);

	/**
	 * The offset position of the image that is being tiled
	 *
	 * @property tilePosition
	 * @type Point
	 */
	this.tilePosition = new PIXI.Point(0,0);

	this.renderable = true;

	this.blendMode = PIXI.blendModes.NORMAL
}

// constructor
PIXI.TilingSprite.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.TilingSprite.prototype.constructor = PIXI.TilingSprite;

/**
 * Sets the texture of the tiling sprite
 *
 * @method setTexture
 * @param texture {Texture} The PIXI texture that is displayed by the sprite
 */
PIXI.TilingSprite.prototype.setTexture = function(texture)
{
	//TODO SET THE TEXTURES
	//TODO VISIBILITY

	// stop current texture
	this.texture = texture;
	this.updateFrame = true;
}

/**
 * When the texture is updated, this event will fire to update the frame
 *
 * @method onTextureUpdate
 * @param event
 * @private
 */
PIXI.TilingSprite.prototype.onTextureUpdate = function(event)
{
	this.updateFrame = true;
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) https://github.com/ekelokorpi
 *
 * Awesome JS run time provided by EsotericSoftware
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

/**
 * A class that enables the you to import and run your spine animations in pixi.
 * Spine animation data needs to be loaded using the PIXI.AssetLoader or PIXI.SpineLoader before it can be used by this class
 * See example 12 (http://www.goodboydigital.com/pixijs/examples/12/) to see a working example and check out the source
 *
 * @class Spine
 * @extends DisplayObjectContainer
 * @constructor
 * @param url {String} The url of the spine anim file to be used
 */
PIXI.Spine = function (url) {
	PIXI.DisplayObjectContainer.call(this);

	this.spineData = PIXI.AnimCache[url];

	if (!this.spineData) {
		throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: " + url);
	}

	this.skeleton = new spine.Skeleton(this.spineData);
	this.skeleton.updateWorldTransform();

	this.stateData = new spine.AnimationStateData(this.spineData);
	this.state = new spine.AnimationState(this.stateData);

	this.slotContainers = [];

	for (var i = 0, n = this.skeleton.drawOrder.length; i < n; i++) {
		var slot = this.skeleton.drawOrder[i];
		var attachment = slot.attachment;
		var slotContainer = new PIXI.DisplayObjectContainer();
		this.slotContainers.push(slotContainer);
		this.addChild(slotContainer);
		if (!(attachment instanceof spine.RegionAttachment)) {
			continue;
		}
		var spriteName = attachment.rendererObject.name;
		var sprite = this.createSprite(slot, attachment.rendererObject);
		slot.currentSprite = sprite;
		slot.currentSpriteName = spriteName;
		slotContainer.addChild(sprite);
	}
};

PIXI.Spine.prototype = Object.create(PIXI.DisplayObjectContainer.prototype);
PIXI.Spine.prototype.constructor = PIXI.Spine;

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.Spine.prototype.updateTransform = function () {
	this.lastTime = this.lastTime || Date.now();
	var timeDelta = (Date.now() - this.lastTime) * 0.001;
	this.lastTime = Date.now();
	this.state.update(timeDelta);
	this.state.apply(this.skeleton);
	this.skeleton.updateWorldTransform();

	var drawOrder = this.skeleton.drawOrder;
	for (var i = 0, n = drawOrder.length; i < n; i++) {
		var slot = drawOrder[i];
		var attachment = slot.attachment;
		var slotContainer = this.slotContainers[i];
		if (!(attachment instanceof spine.RegionAttachment)) {
			slotContainer.visible = false;
			continue;
		}

		if (attachment.rendererObject) {
			if (!slot.currentSpriteName || slot.currentSpriteName != attachment.name) {
				var spriteName = attachment.rendererObject.name;
				if (slot.currentSprite !== undefined) {
					slot.currentSprite.visible = false;
				}
				slot.sprites = slot.sprites || {};
				if (slot.sprites[spriteName] !== undefined) {
					slot.sprites[spriteName].visible = true;
				} else {
					var sprite = this.createSprite(slot, attachment.rendererObject);
					slotContainer.addChild(sprite);
				}
				slot.currentSprite = slot.sprites[spriteName];
				slot.currentSpriteName = spriteName;
			}
		}
		slotContainer.visible = true;

		var bone = slot.bone;

		slotContainer.position.x = bone.worldX + attachment.x * bone.m00 + attachment.y * bone.m01;
		slotContainer.position.y = bone.worldY + attachment.x * bone.m10 + attachment.y * bone.m11;
		slotContainer.scale.x = bone.worldScaleX;
		slotContainer.scale.y = bone.worldScaleY;

		slotContainer.rotation = -(slot.bone.worldRotation * Math.PI / 180);
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
};


PIXI.Spine.prototype.createSprite = function (slot, descriptor) {
	var name = PIXI.TextureCache[descriptor.name] ? descriptor.name : descriptor.name + ".png";
	var sprite = new PIXI.Sprite(PIXI.Texture.fromFrame(name));
	sprite.scale = descriptor.scale;
	sprite.rotation = descriptor.rotation;
	sprite.anchor.x = sprite.anchor.y = 0.5;

	slot.sprites = slot.sprites || {};
	slot.sprites[descriptor.name] = sprite;
	return sprite;
};

/*
 * Awesome JS run time provided by EsotericSoftware
 *
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

var spine = {};

spine.BoneData = function (name, parent) {
	this.name = name;
	this.parent = parent;
};
spine.BoneData.prototype = {
	length: 0,
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1
};

spine.SlotData = function (name, boneData) {
	this.name = name;
	this.boneData = boneData;
};
spine.SlotData.prototype = {
	r: 1, g: 1, b: 1, a: 1,
	attachmentName: null
};

spine.Bone = function (boneData, parent) {
	this.data = boneData;
	this.parent = parent;
	this.setToSetupPose();
};
spine.Bone.yDown = false;
spine.Bone.prototype = {
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1,
	m00: 0, m01: 0, worldX: 0, // a b x
	m10: 0, m11: 0, worldY: 0, // c d y
	worldRotation: 0,
	worldScaleX: 1, worldScaleY: 1,
	updateWorldTransform: function (flipX, flipY) {
		var parent = this.parent;
		if (parent != null) {
			this.worldX = this.x * parent.m00 + this.y * parent.m01 + parent.worldX;
			this.worldY = this.x * parent.m10 + this.y * parent.m11 + parent.worldY;
			this.worldScaleX = parent.worldScaleX * this.scaleX;
			this.worldScaleY = parent.worldScaleY * this.scaleY;
			this.worldRotation = parent.worldRotation + this.rotation;
		} else {
			this.worldX = this.x;
			this.worldY = this.y;
			this.worldScaleX = this.scaleX;
			this.worldScaleY = this.scaleY;
			this.worldRotation = this.rotation;
		}
		var radians = this.worldRotation * Math.PI / 180;
		var cos = Math.cos(radians);
		var sin = Math.sin(radians);
		this.m00 = cos * this.worldScaleX;
		this.m10 = sin * this.worldScaleX;
		this.m01 = -sin * this.worldScaleY;
		this.m11 = cos * this.worldScaleY;
		if (flipX) {
			this.m00 = -this.m00;
			this.m01 = -this.m01;
		}
		if (flipY) {
			this.m10 = -this.m10;
			this.m11 = -this.m11;
		}
		if (spine.Bone.yDown) {
			this.m10 = -this.m10;
			this.m11 = -this.m11;
		}
	},
	setToSetupPose: function () {
		var data = this.data;
		this.x = data.x;
		this.y = data.y;
		this.rotation = data.rotation;
		this.scaleX = data.scaleX;
		this.scaleY = data.scaleY;
	}
};

spine.Slot = function (slotData, skeleton, bone) {
	this.data = slotData;
	this.skeleton = skeleton;
	this.bone = bone;
	this.setToSetupPose();
};
spine.Slot.prototype = {
	r: 1, g: 1, b: 1, a: 1,
	_attachmentTime: 0,
	attachment: null,
	setAttachment: function (attachment) {
		this.attachment = attachment;
		this._attachmentTime = this.skeleton.time;
	},
	setAttachmentTime: function (time) {
		this._attachmentTime = this.skeleton.time - time;
	},
	getAttachmentTime: function () {
		return this.skeleton.time - this._attachmentTime;
	},
	setToSetupPose: function () {
		var data = this.data;
		this.r = data.r;
		this.g = data.g;
		this.b = data.b;
		this.a = data.a;

		var slotDatas = this.skeleton.data.slots;
		for (var i = 0, n = slotDatas.length; i < n; i++) {
			if (slotDatas[i] == data) {
				this.setAttachment(!data.attachmentName ? null : this.skeleton.getAttachmentBySlotIndex(i, data.attachmentName));
				break;
			}
		}
	}
};

spine.Skin = function (name) {
	this.name = name;
	this.attachments = {};
};
spine.Skin.prototype = {
	addAttachment: function (slotIndex, name, attachment) {
		this.attachments[slotIndex + ":" + name] = attachment;
	},
	getAttachment: function (slotIndex, name) {
		return this.attachments[slotIndex + ":" + name];
	},
	_attachAll: function (skeleton, oldSkin) {
		for (var key in oldSkin.attachments) {
			var colon = key.indexOf(":");
			var slotIndex = parseInt(key.substring(0, colon));
			var name = key.substring(colon + 1);
			var slot = skeleton.slots[slotIndex];
			if (slot.attachment && slot.attachment.name == name) {
				var attachment = this.getAttachment(slotIndex, name);
				if (attachment) slot.setAttachment(attachment);
			}
		}
	}
};

spine.Animation = function (name, timelines, duration) {
	this.name = name;
	this.timelines = timelines;
	this.duration = duration;
};
spine.Animation.prototype = {
	apply: function (skeleton, time, loop) {
		if (loop && this.duration != 0) time %= this.duration;
		var timelines = this.timelines;
		for (var i = 0, n = timelines.length; i < n; i++)
			timelines[i].apply(skeleton, time, 1);
	},
	mix: function (skeleton, time, loop, alpha) {
		if (loop && this.duration != 0) time %= this.duration;
		var timelines = this.timelines;
		for (var i = 0, n = timelines.length; i < n; i++)
			timelines[i].apply(skeleton, time, alpha);
	}
};

spine.binarySearch = function (values, target, step) {
	var low = 0;
	var high = Math.floor(values.length / step) - 2;
	if (high == 0) return step;
	var current = high >>> 1;
	while (true) {
		if (values[(current + 1) * step] <= target)
			low = current + 1;
		else
			high = current;
		if (low == high) return (low + 1) * step;
		current = (low + high) >>> 1;
	}
};
spine.linearSearch = function (values, target, step) {
	for (var i = 0, last = values.length - step; i <= last; i += step)
		if (values[i] > target) return i;
	return -1;
};

spine.Curves = function (frameCount) {
	this.curves = []; // dfx, dfy, ddfx, ddfy, dddfx, dddfy, ...
	this.curves.length = (frameCount - 1) * 6;
};
spine.Curves.prototype = {
	setLinear: function (frameIndex) {
		this.curves[frameIndex * 6] = 0/*LINEAR*/;
	},
	setStepped: function (frameIndex) {
		this.curves[frameIndex * 6] = -1/*STEPPED*/;
	},
	/** Sets the control handle positions for an interpolation bezier curve used to transition from this keyframe to the next.
	 * cx1 and cx2 are from 0 to 1, representing the percent of time between the two keyframes. cy1 and cy2 are the percent of
	 * the difference between the keyframe's values. */
	setCurve: function (frameIndex, cx1, cy1, cx2, cy2) {
		var subdiv_step = 1 / 10/*BEZIER_SEGMENTS*/;
		var subdiv_step2 = subdiv_step * subdiv_step;
		var subdiv_step3 = subdiv_step2 * subdiv_step;
		var pre1 = 3 * subdiv_step;
		var pre2 = 3 * subdiv_step2;
		var pre4 = 6 * subdiv_step2;
		var pre5 = 6 * subdiv_step3;
		var tmp1x = -cx1 * 2 + cx2;
		var tmp1y = -cy1 * 2 + cy2;
		var tmp2x = (cx1 - cx2) * 3 + 1;
		var tmp2y = (cy1 - cy2) * 3 + 1;
		var i = frameIndex * 6;
		var curves = this.curves;
		curves[i] = cx1 * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;
		curves[i + 1] = cy1 * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;
		curves[i + 2] = tmp1x * pre4 + tmp2x * pre5;
		curves[i + 3] = tmp1y * pre4 + tmp2y * pre5;
		curves[i + 4] = tmp2x * pre5;
		curves[i + 5] = tmp2y * pre5;
	},
	getCurvePercent: function (frameIndex, percent) {
		percent = percent < 0 ? 0 : (percent > 1 ? 1 : percent);
		var curveIndex = frameIndex * 6;
		var curves = this.curves;
		var dfx = curves[curveIndex];
		if (!dfx/*LINEAR*/) return percent;
		if (dfx == -1/*STEPPED*/) return 0;
		var dfy = curves[curveIndex + 1];
		var ddfx = curves[curveIndex + 2];
		var ddfy = curves[curveIndex + 3];
		var dddfx = curves[curveIndex + 4];
		var dddfy = curves[curveIndex + 5];
		var x = dfx, y = dfy;
		var i = 10/*BEZIER_SEGMENTS*/ - 2;
		while (true) {
			if (x >= percent) {
				var lastX = x - dfx;
				var lastY = y - dfy;
				return lastY + (y - lastY) * (percent - lastX) / (x - lastX);
			}
			if (i == 0) break;
			i--;
			dfx += ddfx;
			dfy += ddfy;
			ddfx += dddfx;
			ddfy += dddfy;
			x += dfx;
			y += dfy;
		}
		return y + (1 - y) * (percent - x) / (1 - x); // Last point is 1,1.
	}
};

spine.RotateTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, angle, ...
	this.frames.length = frameCount * 2;
};
spine.RotateTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 2;
	},
	setFrame: function (frameIndex, time, angle) {
		frameIndex *= 2;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = angle;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 2]) { // Time is after last frame.
			var amount = bone.data.rotation + frames[frames.length - 1] - bone.rotation;
			while (amount > 180)
				amount -= 360;
			while (amount < -180)
				amount += 360;
			bone.rotation += amount * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 2);
		var lastFrameValue = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex - 2/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 2 - 1, percent);

		var amount = frames[frameIndex + 1/*FRAME_VALUE*/] - lastFrameValue;
		while (amount > 180)
			amount -= 360;
		while (amount < -180)
			amount += 360;
		amount = bone.data.rotation + (lastFrameValue + amount * percent) - bone.rotation;
		while (amount > 180)
			amount -= 360;
		while (amount < -180)
			amount += 360;
		bone.rotation += amount * alpha;
	}
};

spine.TranslateTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, x, y, ...
	this.frames.length = frameCount * 3;
};
spine.TranslateTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 3;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 3;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = x;
		this.frames[frameIndex + 2] = y;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 3]) { // Time is after last frame.
			bone.x += (bone.data.x + frames[frames.length - 2] - bone.x) * alpha;
			bone.y += (bone.data.y + frames[frames.length - 1] - bone.y) * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 3);
		var lastFrameX = frames[frameIndex - 2];
		var lastFrameY = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex + -3/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 3 - 1, percent);

		bone.x += (bone.data.x + lastFrameX + (frames[frameIndex + 1/*FRAME_X*/] - lastFrameX) * percent - bone.x) * alpha;
		bone.y += (bone.data.y + lastFrameY + (frames[frameIndex + 2/*FRAME_Y*/] - lastFrameY) * percent - bone.y) * alpha;
	}
};

spine.ScaleTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, x, y, ...
	this.frames.length = frameCount * 3;
};
spine.ScaleTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 3;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 3;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = x;
		this.frames[frameIndex + 2] = y;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 3]) { // Time is after last frame.
			bone.scaleX += (bone.data.scaleX - 1 + frames[frames.length - 2] - bone.scaleX) * alpha;
			bone.scaleY += (bone.data.scaleY - 1 + frames[frames.length - 1] - bone.scaleY) * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 3);
		var lastFrameX = frames[frameIndex - 2];
		var lastFrameY = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex + -3/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 3 - 1, percent);

		bone.scaleX += (bone.data.scaleX - 1 + lastFrameX + (frames[frameIndex + 1/*FRAME_X*/] - lastFrameX) * percent - bone.scaleX) * alpha;
		bone.scaleY += (bone.data.scaleY - 1 + lastFrameY + (frames[frameIndex + 2/*FRAME_Y*/] - lastFrameY) * percent - bone.scaleY) * alpha;
	}
};

spine.ColorTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, r, g, b, a, ...
	this.frames.length = frameCount * 5;
};
spine.ColorTimeline.prototype = {
	slotIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 2;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 5;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = r;
		this.frames[frameIndex + 2] = g;
		this.frames[frameIndex + 3] = b;
		this.frames[frameIndex + 4] = a;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var slot = skeleton.slots[this.slotIndex];

		if (time >= frames[frames.length - 5]) { // Time is after last frame.
			var i = frames.length - 1;
			slot.r = frames[i - 3];
			slot.g = frames[i - 2];
			slot.b = frames[i - 1];
			slot.a = frames[i];
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 5);
		var lastFrameR = frames[frameIndex - 4];
		var lastFrameG = frames[frameIndex - 3];
		var lastFrameB = frames[frameIndex - 2];
		var lastFrameA = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex - 5/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 5 - 1, percent);

		var r = lastFrameR + (frames[frameIndex + 1/*FRAME_R*/] - lastFrameR) * percent;
		var g = lastFrameG + (frames[frameIndex + 2/*FRAME_G*/] - lastFrameG) * percent;
		var b = lastFrameB + (frames[frameIndex + 3/*FRAME_B*/] - lastFrameB) * percent;
		var a = lastFrameA + (frames[frameIndex + 4/*FRAME_A*/] - lastFrameA) * percent;
		if (alpha < 1) {
			slot.r += (r - slot.r) * alpha;
			slot.g += (g - slot.g) * alpha;
			slot.b += (b - slot.b) * alpha;
			slot.a += (a - slot.a) * alpha;
		} else {
			slot.r = r;
			slot.g = g;
			slot.b = b;
			slot.a = a;
		}
	}
};

spine.AttachmentTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, ...
	this.frames.length = frameCount;
	this.attachmentNames = []; // time, ...
	this.attachmentNames.length = frameCount;
};
spine.AttachmentTimeline.prototype = {
	slotIndex: 0,
	getFrameCount: function () {
            return this.frames.length;
	},
	setFrame: function (frameIndex, time, attachmentName) {
		this.frames[frameIndex] = time;
		this.attachmentNames[frameIndex] = attachmentName;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var frameIndex;
		if (time >= frames[frames.length - 1]) // Time is after last frame.
			frameIndex = frames.length - 1;
		else
			frameIndex = spine.binarySearch(frames, time, 1) - 1;

		var attachmentName = this.attachmentNames[frameIndex];
		skeleton.slots[this.slotIndex].setAttachment(!attachmentName ? null : skeleton.getAttachmentBySlotIndex(this.slotIndex, attachmentName));
	}
};

spine.SkeletonData = function () {
	this.bones = [];
	this.slots = [];
	this.skins = [];
	this.animations = [];
};
spine.SkeletonData.prototype = {
	defaultSkin: null,
	/** @return May be null. */
	findBone: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].name == boneName) return bones[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findBoneIndex: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].name == boneName) return i;
		return -1;
	},
	/** @return May be null. */
	findSlot: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++) {
			if (slots[i].name == slotName) return slot[i];
		}
		return null;
	},
	/** @return -1 if the bone was not found. */
	findSlotIndex: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].name == slotName) return i;
		return -1;
	},
	/** @return May be null. */
	findSkin: function (skinName) {
		var skins = this.skins;
		for (var i = 0, n = skins.length; i < n; i++)
			if (skins[i].name == skinName) return skins[i];
		return null;
	},
	/** @return May be null. */
	findAnimation: function (animationName) {
		var animations = this.animations;
		for (var i = 0, n = animations.length; i < n; i++)
			if (animations[i].name == animationName) return animations[i];
		return null;
	}
};

spine.Skeleton = function (skeletonData) {
	this.data = skeletonData;

	this.bones = [];
	for (var i = 0, n = skeletonData.bones.length; i < n; i++) {
		var boneData = skeletonData.bones[i];
		var parent = !boneData.parent ? null : this.bones[skeletonData.bones.indexOf(boneData.parent)];
		this.bones.push(new spine.Bone(boneData, parent));
	}

	this.slots = [];
	this.drawOrder = [];
	for (var i = 0, n = skeletonData.slots.length; i < n; i++) {
		var slotData = skeletonData.slots[i];
		var bone = this.bones[skeletonData.bones.indexOf(slotData.boneData)];
		var slot = new spine.Slot(slotData, this, bone);
		this.slots.push(slot);
		this.drawOrder.push(slot);
	}
};
spine.Skeleton.prototype = {
	x: 0, y: 0,
	skin: null,
	r: 1, g: 1, b: 1, a: 1,
	time: 0,
	flipX: false, flipY: false,
	/** Updates the world transform for each bone. */
	updateWorldTransform: function () {
		var flipX = this.flipX;
		var flipY = this.flipY;
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			bones[i].updateWorldTransform(flipX, flipY);
	},
	/** Sets the bones and slots to their setup pose values. */
	setToSetupPose: function () {
		this.setBonesToSetupPose();
		this.setSlotsToSetupPose();
	},
	setBonesToSetupPose: function () {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			bones[i].setToSetupPose();
	},
	setSlotsToSetupPose: function () {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			slots[i].setToSetupPose(i);
	},
	/** @return May return null. */
	getRootBone: function () {
		return this.bones.length == 0 ? null : this.bones[0];
	},
	/** @return May be null. */
	findBone: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].data.name == boneName) return bones[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findBoneIndex: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].data.name == boneName) return i;
		return -1;
	},
	/** @return May be null. */
	findSlot: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].data.name == slotName) return slots[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findSlotIndex: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].data.name == slotName) return i;
		return -1;
	},
	setSkinByName: function (skinName) {
		var skin = this.data.findSkin(skinName);
		if (!skin) throw "Skin not found: " + skinName;
		this.setSkin(skin);
	},
	/** Sets the skin used to look up attachments not found in the {@link SkeletonData#getDefaultSkin() default skin}. Attachments
	 * from the new skin are attached if the corresponding attachment from the old skin was attached.
	 * @param newSkin May be null. */
	setSkin: function (newSkin) {
		if (this.skin && newSkin) newSkin._attachAll(this, this.skin);
		this.skin = newSkin;
	},
	/** @return May be null. */
	getAttachmentBySlotName: function (slotName, attachmentName) {
		return this.getAttachmentBySlotIndex(this.data.findSlotIndex(slotName), attachmentName);
	},
	/** @return May be null. */
	getAttachmentBySlotIndex: function (slotIndex, attachmentName) {
		if (this.skin) {
			var attachment = this.skin.getAttachment(slotIndex, attachmentName);
			if (attachment) return attachment;
		}
		if (this.data.defaultSkin) return this.data.defaultSkin.getAttachment(slotIndex, attachmentName);
		return null;
	},
	/** @param attachmentName May be null. */
	setAttachment: function (slotName, attachmentName) {
		var slots = this.slots;
		for (var i = 0, n = slots.size; i < n; i++) {
			var slot = slots[i];
			if (slot.data.name == slotName) {
				var attachment = null;
				if (attachmentName) {
					attachment = this.getAttachment(i, attachmentName);
					if (attachment == null) throw "Attachment not found: " + attachmentName + ", for slot: " + slotName;
				}
				slot.setAttachment(attachment);
				return;
			}
		}
		throw "Slot not found: " + slotName;
	},
	update: function (delta) {
		time += delta;
	}
};

spine.AttachmentType = {
	region: 0
};

spine.RegionAttachment = function () {
	this.offset = [];
	this.offset.length = 8;
	this.uvs = [];
	this.uvs.length = 8;
};
spine.RegionAttachment.prototype = {
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1,
	width: 0, height: 0,
	rendererObject: null,
	regionOffsetX: 0, regionOffsetY: 0,
	regionWidth: 0, regionHeight: 0,
	regionOriginalWidth: 0, regionOriginalHeight: 0,
	setUVs: function (u, v, u2, v2, rotate) {
		var uvs = this.uvs;
		if (rotate) {
			uvs[2/*X2*/] = u;
			uvs[3/*Y2*/] = v2;
			uvs[4/*X3*/] = u;
			uvs[5/*Y3*/] = v;
			uvs[6/*X4*/] = u2;
			uvs[7/*Y4*/] = v;
			uvs[0/*X1*/] = u2;
			uvs[1/*Y1*/] = v2;
		} else {
			uvs[0/*X1*/] = u;
			uvs[1/*Y1*/] = v2;
			uvs[2/*X2*/] = u;
			uvs[3/*Y2*/] = v;
			uvs[4/*X3*/] = u2;
			uvs[5/*Y3*/] = v;
			uvs[6/*X4*/] = u2;
			uvs[7/*Y4*/] = v2;
		}
	},
	updateOffset: function () {
		var regionScaleX = this.width / this.regionOriginalWidth * this.scaleX;
		var regionScaleY = this.height / this.regionOriginalHeight * this.scaleY;
		var localX = -this.width / 2 * this.scaleX + this.regionOffsetX * regionScaleX;
		var localY = -this.height / 2 * this.scaleY + this.regionOffsetY * regionScaleY;
		var localX2 = localX + this.regionWidth * regionScaleX;
		var localY2 = localY + this.regionHeight * regionScaleY;
		var radians = this.rotation * Math.PI / 180;
		var cos = Math.cos(radians);
		var sin = Math.sin(radians);
		var localXCos = localX * cos + this.x;
		var localXSin = localX * sin;
		var localYCos = localY * cos + this.y;
		var localYSin = localY * sin;
		var localX2Cos = localX2 * cos + this.x;
		var localX2Sin = localX2 * sin;
		var localY2Cos = localY2 * cos + this.y;
		var localY2Sin = localY2 * sin;
		var offset = this.offset;
		offset[0/*X1*/] = localXCos - localYSin;
		offset[1/*Y1*/] = localYCos + localXSin;
		offset[2/*X2*/] = localXCos - localY2Sin;
		offset[3/*Y2*/] = localY2Cos + localXSin;
		offset[4/*X3*/] = localX2Cos - localY2Sin;
		offset[5/*Y3*/] = localY2Cos + localX2Sin;
		offset[6/*X4*/] = localX2Cos - localYSin;
		offset[7/*Y4*/] = localYCos + localX2Sin;
	},
	computeVertices: function (x, y, bone, vertices) {
		x += bone.worldX;
		y += bone.worldY;
		var m00 = bone.m00;
		var m01 = bone.m01;
		var m10 = bone.m10;
		var m11 = bone.m11;
		var offset = this.offset;
		vertices[0/*X1*/] = offset[0/*X1*/] * m00 + offset[1/*Y1*/] * m01 + x;
		vertices[1/*Y1*/] = offset[0/*X1*/] * m10 + offset[1/*Y1*/] * m11 + y;
		vertices[2/*X2*/] = offset[2/*X2*/] * m00 + offset[3/*Y2*/] * m01 + x;
		vertices[3/*Y2*/] = offset[2/*X2*/] * m10 + offset[3/*Y2*/] * m11 + y;
		vertices[4/*X3*/] = offset[4/*X3*/] * m00 + offset[5/*X3*/] * m01 + x;
		vertices[5/*X3*/] = offset[4/*X3*/] * m10 + offset[5/*X3*/] * m11 + y;
		vertices[6/*X4*/] = offset[6/*X4*/] * m00 + offset[7/*Y4*/] * m01 + x;
		vertices[7/*Y4*/] = offset[6/*X4*/] * m10 + offset[7/*Y4*/] * m11 + y;
	}
}

spine.AnimationStateData = function (skeletonData) {
	this.skeletonData = skeletonData;
	this.animationToMixTime = {};
};
spine.AnimationStateData.prototype = {
        defaultMix: 0,
	setMixByName: function (fromName, toName, duration) {
		var from = this.skeletonData.findAnimation(fromName);
		if (!from) throw "Animation not found: " + fromName;
		var to = this.skeletonData.findAnimation(toName);
		if (!to) throw "Animation not found: " + toName;
		this.setMix(from, to, duration);
	},
	setMix: function (from, to, duration) {
		this.animationToMixTime[from.name + ":" + to.name] = duration;
	},
	getMix: function (from, to) {
		var time = this.animationToMixTime[from.name + ":" + to.name];
            return time ? time : this.defaultMix;
	}
};

spine.AnimationState = function (stateData) {
	this.data = stateData;
	this.queue = [];
};
spine.AnimationState.prototype = {
	current: null,
	previous: null,
	currentTime: 0,
	previousTime: 0,
	currentLoop: false,
	previousLoop: false,
	mixTime: 0,
	mixDuration: 0,
	update: function (delta) {
		this.currentTime += delta;
		this.previousTime += delta;
		this.mixTime += delta;

		if (this.queue.length > 0) {
			var entry = this.queue[0];
			if (this.currentTime >= entry.delay) {
				this._setAnimation(entry.animation, entry.loop);
				this.queue.shift();
			}
		}
	},
	apply: function (skeleton) {
		if (!this.current) return;
		if (this.previous) {
			this.previous.apply(skeleton, this.previousTime, this.previousLoop);
			var alpha = this.mixTime / this.mixDuration;
			if (alpha >= 1) {
				alpha = 1;
				this.previous = null;
			}
			this.current.mix(skeleton, this.currentTime, this.currentLoop, alpha);
		} else
			this.current.apply(skeleton, this.currentTime, this.currentLoop);
	},
	clearAnimation: function () {
		this.previous = null;
		this.current = null;
		this.queue.length = 0;
	},
	_setAnimation: function (animation, loop) {
		this.previous = null;
		if (animation && this.current) {
			this.mixDuration = this.data.getMix(this.current, animation);
			if (this.mixDuration > 0) {
				this.mixTime = 0;
				this.previous = this.current;
				this.previousTime = this.currentTime;
				this.previousLoop = this.currentLoop;
			}
		}
		this.current = animation;
		this.currentLoop = loop;
		this.currentTime = 0;
	},
	/** @see #setAnimation(Animation, Boolean) */
	setAnimationByName: function (animationName, loop) {
		var animation = this.data.skeletonData.findAnimation(animationName);
		if (!animation) throw "Animation not found: " + animationName;
		this.setAnimation(animation, loop);
	},
	/** Set the current animation. Any queued animations are cleared and the current animation time is set to 0.
	 * @param animation May be null. */
	setAnimation: function (animation, loop) {
		this.queue.length = 0;
		this._setAnimation(animation, loop);
	},
	/** @see #addAnimation(Animation, Boolean, Number) */
	addAnimationByName: function (animationName, loop, delay) {
		var animation = this.data.skeletonData.findAnimation(animationName);
		if (!animation) throw "Animation not found: " + animationName;
		this.addAnimation(animation, loop, delay);
	},
	/** Adds an animation to be played delay seconds after the current or last queued animation.
	 * @param delay May be <= 0 to use duration of previous animation minus any mix duration plus the negative delay. */
	addAnimation: function (animation, loop, delay) {
		var entry = {};
		entry.animation = animation;
		entry.loop = loop;

		if (!delay || delay <= 0) {
			var previousAnimation = this.queue.length == 0 ? this.current : this.queue[this.queue.length - 1].animation;
			if (previousAnimation != null)
				delay = previousAnimation.duration - this.data.getMix(previousAnimation, animation) + (delay || 0);
			else
				delay = 0;
		}
		entry.delay = delay;

		this.queue.push(entry);
	},
	/** Returns true if no animation is set or if the current time is greater than the animation duration, regardless of looping. */
	isComplete: function () {
		return !this.current || this.currentTime >= this.current.duration;
	}
};

spine.SkeletonJson = function (attachmentLoader) {
	this.attachmentLoader = attachmentLoader;
};
spine.SkeletonJson.prototype = {
	scale: 1,
	readSkeletonData: function (root) {
		var skeletonData = new spine.SkeletonData();

		// Bones.
		var bones = root["bones"];
		for (var i = 0, n = bones.length; i < n; i++) {
			var boneMap = bones[i];
			var parent = null;
			if (boneMap["parent"]) {
				parent = skeletonData.findBone(boneMap["parent"]);
				if (!parent) throw "Parent bone not found: " + boneMap["parent"];
			}
			var boneData = new spine.BoneData(boneMap["name"], parent);
			boneData.length = (boneMap["length"] || 0) * this.scale;
			boneData.x = (boneMap["x"] || 0) * this.scale;
			boneData.y = (boneMap["y"] || 0) * this.scale;
			boneData.rotation = (boneMap["rotation"] || 0);
			boneData.scaleX = boneMap["scaleX"] || 1;
			boneData.scaleY = boneMap["scaleY"] || 1;
			skeletonData.bones.push(boneData);
		}

		// Slots.
		var slots = root["slots"];
		for (var i = 0, n = slots.length; i < n; i++) {
			var slotMap = slots[i];
			var boneData = skeletonData.findBone(slotMap["bone"]);
			if (!boneData) throw "Slot bone not found: " + slotMap["bone"];
			var slotData = new spine.SlotData(slotMap["name"], boneData);

			var color = slotMap["color"];
			if (color) {
				slotData.r = spine.SkeletonJson.toColor(color, 0);
				slotData.g = spine.SkeletonJson.toColor(color, 1);
				slotData.b = spine.SkeletonJson.toColor(color, 2);
				slotData.a = spine.SkeletonJson.toColor(color, 3);
			}

			slotData.attachmentName = slotMap["attachment"];

			skeletonData.slots.push(slotData);
		}

		// Skins.
		var skins = root["skins"];
		for (var skinName in skins) {
			if (!skins.hasOwnProperty(skinName)) continue;
			var skinMap = skins[skinName];
			var skin = new spine.Skin(skinName);
			for (var slotName in skinMap) {
				if (!skinMap.hasOwnProperty(slotName)) continue;
				var slotIndex = skeletonData.findSlotIndex(slotName);
				var slotEntry = skinMap[slotName];
				for (var attachmentName in slotEntry) {
					if (!slotEntry.hasOwnProperty(attachmentName)) continue;
					var attachment = this.readAttachment(skin, attachmentName, slotEntry[attachmentName]);
					if (attachment != null) skin.addAttachment(slotIndex, attachmentName, attachment);
				}
			}
			skeletonData.skins.push(skin);
			if (skin.name == "default") skeletonData.defaultSkin = skin;
		}

		// Animations.
		var animations = root["animations"];
		for (var animationName in animations) {
			if (!animations.hasOwnProperty(animationName)) continue;
			this.readAnimation(animationName, animations[animationName], skeletonData);
		}

		return skeletonData;
	},
	readAttachment: function (skin, name, map) {
		name = map["name"] || name;

		var type = spine.AttachmentType[map["type"] || "region"];

		if (type == spine.AttachmentType.region) {
			var attachment = new spine.RegionAttachment();
			attachment.x = (map["x"] || 0) * this.scale;
			attachment.y = (map["y"] || 0) * this.scale;
			attachment.scaleX = map["scaleX"] || 1;
			attachment.scaleY = map["scaleY"] || 1;
			attachment.rotation = map["rotation"] || 0;
			attachment.width = (map["width"] || 32) * this.scale;
			attachment.height = (map["height"] || 32) * this.scale;
			attachment.updateOffset();

			attachment.rendererObject = {};
			attachment.rendererObject.name = name;
			attachment.rendererObject.scale = {};
			attachment.rendererObject.scale.x = attachment.scaleX;
			attachment.rendererObject.scale.y = attachment.scaleY;
			attachment.rendererObject.rotation = -attachment.rotation * Math.PI / 180;
			return attachment;
		}

            throw "Unknown attachment type: " + type;
	},

	readAnimation: function (name, map, skeletonData) {
		var timelines = [];
		var duration = 0;

		var bones = map["bones"];
		for (var boneName in bones) {
			if (!bones.hasOwnProperty(boneName)) continue;
			var boneIndex = skeletonData.findBoneIndex(boneName);
			if (boneIndex == -1) throw "Bone not found: " + boneName;
			var boneMap = bones[boneName];

			for (var timelineName in boneMap) {
				if (!boneMap.hasOwnProperty(timelineName)) continue;
				var values = boneMap[timelineName];
				if (timelineName == "rotate") {
					var timeline = new spine.RotateTimeline(values.length);
					timeline.boneIndex = boneIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						timeline.setFrame(frameIndex, valueMap["time"], valueMap["angle"]);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 2 - 2]);

				} else if (timelineName == "translate" || timelineName == "scale") {
					var timeline;
					var timelineScale = 1;
					if (timelineName == "scale")
						timeline = new spine.ScaleTimeline(values.length);
					else {
						timeline = new spine.TranslateTimeline(values.length);
						timelineScale = this.scale;
					}
					timeline.boneIndex = boneIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						var x = (valueMap["x"] || 0) * timelineScale;
						var y = (valueMap["y"] || 0) * timelineScale;
						timeline.setFrame(frameIndex, valueMap["time"], x, y);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 3 - 3]);

				} else
					throw "Invalid timeline type for a bone: " + timelineName + " (" + boneName + ")";
			}
		}
		var slots = map["slots"];
		for (var slotName in slots) {
			if (!slots.hasOwnProperty(slotName)) continue;
			var slotMap = slots[slotName];
			var slotIndex = skeletonData.findSlotIndex(slotName);

			for (var timelineName in slotMap) {
				if (!slotMap.hasOwnProperty(timelineName)) continue;
				var values = slotMap[timelineName];
				if (timelineName == "color") {
					var timeline = new spine.ColorTimeline(values.length);
					timeline.slotIndex = slotIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						var color = valueMap["color"];
						var r = spine.SkeletonJson.toColor(color, 0);
						var g = spine.SkeletonJson.toColor(color, 1);
						var b = spine.SkeletonJson.toColor(color, 2);
						var a = spine.SkeletonJson.toColor(color, 3);
						timeline.setFrame(frameIndex, valueMap["time"], r, g, b, a);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 5 - 5]);

				} else if (timelineName == "attachment") {
					var timeline = new spine.AttachmentTimeline(values.length);
					timeline.slotIndex = slotIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						timeline.setFrame(frameIndex++, valueMap["time"], valueMap["name"]);
					}
					timelines.push(timeline);
                        duration = Math.max(duration, timeline.frames[timeline.getFrameCount() - 1]);

				} else
					throw "Invalid timeline type for a slot: " + timelineName + " (" + slotName + ")";
			}
		}
		skeletonData.animations.push(new spine.Animation(name, timelines, duration));
	}
};
spine.SkeletonJson.readCurve = function (timeline, frameIndex, valueMap) {
	var curve = valueMap["curve"];
	if (!curve) return;
	if (curve == "stepped")
		timeline.curves.setStepped(frameIndex);
	else if (curve instanceof Array)
		timeline.curves.setCurve(frameIndex, curve[0], curve[1], curve[2], curve[3]);
};
spine.SkeletonJson.toColor = function (hexString, colorIndex) {
	if (hexString.length != 8) throw "Color hexidecimal length must be 8, recieved: " + hexString;
	return parseInt(hexString.substring(colorIndex * 2, 2), 16) / 255;
};

spine.Atlas = function (atlasText, textureLoader) {
	this.textureLoader = textureLoader;
	this.pages = [];
	this.regions = [];

	var reader = new spine.AtlasReader(atlasText);
	var tuple = [];
	tuple.length = 4;
	var page = null;
	while (true) {
		var line = reader.readLine();
		if (line == null) break;
		line = reader.trim(line);
		if (line.length == 0)
			page = null;
		else if (!page) {
			page = new spine.AtlasPage();
			page.name = line;

			page.format = spine.Atlas.Format[reader.readValue()];

			reader.readTuple(tuple);
			page.minFilter = spine.Atlas.TextureFilter[tuple[0]];
			page.magFilter = spine.Atlas.TextureFilter[tuple[1]];

			var direction = reader.readValue();
			page.uWrap = spine.Atlas.TextureWrap.clampToEdge;
			page.vWrap = spine.Atlas.TextureWrap.clampToEdge;
			if (direction == "x")
				page.uWrap = spine.Atlas.TextureWrap.repeat;
			else if (direction == "y")
				page.vWrap = spine.Atlas.TextureWrap.repeat;
			else if (direction == "xy")
				page.uWrap = page.vWrap = spine.Atlas.TextureWrap.repeat;

			textureLoader.load(page, line);

			this.pages.push(page);

		} else {
			var region = new spine.AtlasRegion();
			region.name = line;
			region.page = page;

			region.rotate = reader.readValue() == "true";

			reader.readTuple(tuple);
			var x = parseInt(tuple[0]);
			var y = parseInt(tuple[1]);

			reader.readTuple(tuple);
			var width = parseInt(tuple[0]);
			var height = parseInt(tuple[1]);

			region.u = x / page.width;
			region.v = y / page.height;
			if (region.rotate) {
				region.u2 = (x + height) / page.width;
				region.v2 = (y + width) / page.height;
			} else {
				region.u2 = (x + width) / page.width;
				region.v2 = (y + height) / page.height;
			}
			region.x = x;
			region.y = y;
			region.width = Math.abs(width);
			region.height = Math.abs(height);

			if (reader.readTuple(tuple) == 4) { // split is optional
				region.splits = [parseInt(tuple[0]), parseInt(tuple[1]), parseInt(tuple[2]), parseInt(tuple[3])];

				if (reader.readTuple(tuple) == 4) { // pad is optional, but only present with splits
					region.pads = [parseInt(tuple[0]), parseInt(tuple[1]), parseInt(tuple[2]), parseInt(tuple[3])];

					reader.readTuple(tuple);
				}
			}

			region.originalWidth = parseInt(tuple[0]);
			region.originalHeight = parseInt(tuple[1]);

			reader.readTuple(tuple);
			region.offsetX = parseInt(tuple[0]);
			region.offsetY = parseInt(tuple[1]);

			region.index = parseInt(reader.readValue());

			this.regions.push(region);
		}
	}
};
spine.Atlas.prototype = {
	findRegion: function (name) {
		var regions = this.regions;
		for (var i = 0, n = regions.length; i < n; i++)
			if (regions[i].name == name) return regions[i];
		return null;
	},
	dispose: function () {
		var pages = this.pages;
		for (var i = 0, n = pages.length; i < n; i++)
			this.textureLoader.unload(pages[i].rendererObject);
	},
	updateUVs: function (page) {
		var regions = this.regions;
		for (var i = 0, n = regions.length; i < n; i++) {
			var region = regions[i];
			if (region.page != page) continue;
			region.u = region.x / page.width;
			region.v = region.y / page.height;
			if (region.rotate) {
				region.u2 = (region.x + region.height) / page.width;
				region.v2 = (region.y + region.width) / page.height;
			} else {
				region.u2 = (region.x + region.width) / page.width;
				region.v2 = (region.y + region.height) / page.height;
			}
		}
	}
};

spine.Atlas.Format = {
	alpha: 0,
	intensity: 1,
	luminanceAlpha: 2,
	rgb565: 3,
	rgba4444: 4,
	rgb888: 5,
	rgba8888: 6
};

spine.Atlas.TextureFilter = {
	nearest: 0,
	linear: 1,
	mipMap: 2,
	mipMapNearestNearest: 3,
	mipMapLinearNearest: 4,
	mipMapNearestLinear: 5,
	mipMapLinearLinear: 6
};

spine.Atlas.TextureWrap = {
	mirroredRepeat: 0,
	clampToEdge: 1,
	repeat: 2
};

spine.AtlasPage = function () {};
spine.AtlasPage.prototype = {
	name: null,
	format: null,
	minFilter: null,
	magFilter: null,
	uWrap: null,
	vWrap: null,
	rendererObject: null,
	width: 0,
	height: 0
};

spine.AtlasRegion = function () {};
spine.AtlasRegion.prototype = {
	page: null,
	name: null,
	x: 0, y: 0,
	width: 0, height: 0,
	u: 0, v: 0, u2: 0, v2: 0,
	offsetX: 0, offsetY: 0,
	originalWidth: 0, originalHeight: 0,
	index: 0,
	rotate: false,
	splits: null,
	pads: null,
};

spine.AtlasReader = function (text) {
	this.lines = text.split(/\r\n|\r|\n/);
};
spine.AtlasReader.prototype = {
	index: 0,
	trim: function (value) {
		return value.replace(/^\s+|\s+$/g, "");
	},
	readLine: function () {
		if (this.index >= this.lines.length) return null;
		return this.lines[this.index++];
	},
	readValue: function () {
		var line = this.readLine();
		var colon = line.indexOf(":");
		if (colon == -1) throw "Invalid line: " + line;
		return this.trim(line.substring(colon + 1));
	},
	/** Returns the number of tuple values read (2 or 4). */
	readTuple: function (tuple) {
		var line = this.readLine();
		var colon = line.indexOf(":");
		if (colon == -1) throw "Invalid line: " + line;
		var i = 0, lastMatch= colon + 1;
		for (; i < 3; i++) {
			var comma = line.indexOf(",", lastMatch);
			if (comma == -1) {
				if (i == 0) throw "Invalid line: " + line;
				break;
			}
			tuple[i] = this.trim(line.substr(lastMatch, comma - lastMatch));
			lastMatch = comma + 1;
		}
		tuple[i] = this.trim(line.substring(lastMatch));
		return i + 1;
	}
}

spine.AtlasAttachmentLoader = function (atlas) {
	this.atlas = atlas;
}
spine.AtlasAttachmentLoader.prototype = {
	newAttachment: function (skin, type, name) {
		switch (type) {
		case spine.AttachmentType.region:
			var region = this.atlas.findRegion(name);
			if (!region) throw "Region not found in atlas: " + name + " (" + type + ")";
			var attachment = new spine.RegionAttachment(name);
			attachment.rendererObject = region;
			attachment.setUVs(region.u, region.v, region.u2, region.v2, region.rotate);
			attachment.regionOffsetX = region.offsetX;
			attachment.regionOffsetY = region.offsetY;
			attachment.regionWidth = region.width;
			attachment.regionHeight = region.height;
			attachment.regionOriginalWidth = region.originalWidth;
			attachment.regionOriginalHeight = region.originalHeight;
			return attachment;
		}
		throw "Unknown attachment type: " + type;
	}
}

PIXI.AnimCache = {};
spine.Bone.yDown = true;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * This object is one that will allow you to specify custom rendering functions based on render type
 *
 * @class CustomRenderable
 * @extends DisplayObject
 * @constructor
 */
PIXI.CustomRenderable = function()
{
	PIXI.DisplayObject.call( this );
	
	this.renderable = true;
}

// constructor
PIXI.CustomRenderable.prototype = Object.create( PIXI.DisplayObject.prototype );
PIXI.CustomRenderable.prototype.constructor = PIXI.CustomRenderable;

/**
 * If this object is being rendered by a CanvasRenderer it will call this callback
 *
 * @method renderCanvas
 * @param renderer {CanvasRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.renderCanvas = function(renderer)
{
	// override!
}

/**
 * If this object is being rendered by a WebGLRenderer it will call this callback to initialize
 *
 * @method initWebGL
 * @param renderer {WebGLRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.initWebGL = function(renderer)
{
	// override!
}

/**
 * If this object is being rendered by a WebGLRenderer it will call this callback
 *
 * @method renderWebGL
 * @param renderer {WebGLRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.renderWebGL = function(renderGroup, projectionMatrix)
{
	// not sure if both needed? but ya have for now!
	// override!
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.BaseTextureCache = {};
PIXI.texturesToUpdate = [];
PIXI.texturesToDestroy = [];

/**
 * A texture stores the information that represents an image. All textures have a base texture
 *
 * @class BaseTexture
 * @uses EventTarget
 * @constructor
 * @param source {String} the source object (image or canvas)
 */
PIXI.BaseTexture = function(source)
{
	PIXI.EventTarget.call( this );

	/**
	 * [read-only] The width of the base texture set when the image has loaded
	 *
	 * @property width
	 * @type Number
	 * @readOnly
	 */
	this.width = 100;

	/**
	 * [read-only] The height of the base texture set when the image has loaded
	 *
	 * @property height
	 * @type Number
	 * @readOnly
	 */
	this.height = 100;

	/**
	 * [read-only] Describes if the base texture has loaded or not
	 *
	 * @property hasLoaded
	 * @type Boolean
	 * @readOnly
	 */
	this.hasLoaded = false;

	/**
	 * The source that is loaded to create the texture
	 *
	 * @property source
	 * @type Image
	 */
	this.source = source;

	if(!source)return;

	if(this.source instanceof Image || this.source instanceof HTMLImageElement)
	{
		if(this.source.complete)
		{
			this.hasLoaded = true;
			this.width = this.source.width;
			this.height = this.source.height;

			PIXI.texturesToUpdate.push(this);
		}
		else
		{

			var scope = this;
			this.source.onload = function(){

				scope.hasLoaded = true;
				scope.width = scope.source.width;
				scope.height = scope.source.height;

				// add it to somewhere...
				PIXI.texturesToUpdate.push(scope);
				scope.dispatchEvent( { type: 'loaded', content: scope } );
			}
			//	this.image.src = imageUrl;
		}
	}
	else
	{
		this.hasLoaded = true;
		this.width = this.source.width;
		this.height = this.source.height;

		PIXI.texturesToUpdate.push(this);
	}

	this._powerOf2 = false;
}

PIXI.BaseTexture.prototype.constructor = PIXI.BaseTexture;

/**
 * Destroys this base texture
 *
 * @method destroy
 */
PIXI.BaseTexture.prototype.destroy = function()
{
	if(this.source instanceof Image)
	{
		this.source.src = null;
	}
	this.source = null;
	PIXI.texturesToDestroy.push(this);
}

/**
 * Helper function that returns a base texture based on an image url
 * If the image is not in the base texture cache it will be  created and loaded
 *
 * @static
 * @method fromImage
 * @param imageUrl {String} The image url of the texture
 * @return BaseTexture
 */
PIXI.BaseTexture.fromImage = function(imageUrl, crossorigin)
{
	var baseTexture = PIXI.BaseTextureCache[imageUrl];
	if(!baseTexture)
	{
		// new Image() breaks tex loading in some versions of Chrome.
		// See https://code.google.com/p/chromium/issues/detail?id=238071
		var image = new Image();//document.createElement('img');
		if (crossorigin)
		{
			image.crossOrigin = '';
		}
		image.src = imageUrl;
		baseTexture = new PIXI.BaseTexture(image);
		PIXI.BaseTextureCache[imageUrl] = baseTexture;
	}

	return baseTexture;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.TextureCache = {};
PIXI.FrameCache = {};

/**
 * A texture stores the information that represents an image or part of an image. It cannot be added
 * to the display list directly. To do this use PIXI.Sprite. If no frame is provided then the whole image is used
 *
 * @class Texture
 * @uses EventTarget
 * @constructor
 * @param baseTexture {BaseTexture} The base texture source to create the texture from
 * @param frame {Rectangle} The rectangle frame of the texture to show
 */
PIXI.Texture = function(baseTexture, frame)
{
	PIXI.EventTarget.call( this );

	if(!frame)
	{
		this.noFrame = true;
		frame = new PIXI.Rectangle(0,0,1,1);
	}

	if(baseTexture instanceof PIXI.Texture)
		baseTexture = baseTexture.baseTexture;

	/**
	 * The base texture of this texture
	 *
	 * @property baseTexture
	 * @type BaseTexture
	 */
	this.baseTexture = baseTexture;

	/**
	 * The frame specifies the region of the base texture that this texture uses
	 *
	 * @property frame
	 * @type Rectangle
	 */
	this.frame = frame;

	/**
	 * The trim point
	 *
	 * @property trim
	 * @type Point
	 */
	this.trim = new PIXI.Point();

	this.scope = this;

	if(baseTexture.hasLoaded)
	{
		if(this.noFrame)frame = new PIXI.Rectangle(0,0, baseTexture.width, baseTexture.height);
		//console.log(frame)

		this.setFrame(frame);
	}
	else
	{
		var scope = this;
		baseTexture.addEventListener( 'loaded', function(){ scope.onBaseTextureLoaded()} );
	}
}

PIXI.Texture.prototype.constructor = PIXI.Texture;

/**
 * Called when the base texture is loaded
 *
 * @method onBaseTextureLoaded
 * @param event
 * @private
 */
PIXI.Texture.prototype.onBaseTextureLoaded = function(event)
{
	var baseTexture = this.baseTexture;
	baseTexture.removeEventListener( 'loaded', this.onLoaded );

	if(this.noFrame)this.frame = new PIXI.Rectangle(0,0, baseTexture.width, baseTexture.height);
	this.noFrame = false;
	this.width = this.frame.width;
	this.height = this.frame.height;

	this.scope.dispatchEvent( { type: 'update', content: this } );
}

/**
 * Destroys this texture
 *
 * @method destroy
 * @param destroyBase {Boolean} Whether to destroy the base texture as well
 */
PIXI.Texture.prototype.destroy = function(destroyBase)
{
	if(destroyBase)this.baseTexture.destroy();
}

/**
 * Specifies the rectangle region of the baseTexture
 *
 * @method setFrame
 * @param frame {Rectangle} The frame of the texture to set it to
 */
PIXI.Texture.prototype.setFrame = function(frame)
{
	this.frame = frame;
	this.width = frame.width;
	this.height = frame.height;

	if(frame.x + frame.width > this.baseTexture.width || frame.y + frame.height > this.baseTexture.height)
	{
		throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
	}

	this.updateFrame = true;

	PIXI.Texture.frameUpdates.push(this);
	//this.dispatchEvent( { type: 'update', content: this } );
}

/**
 * Helper function that returns a texture based on an image url
 * If the image is not in the texture cache it will be  created and loaded
 *
 * @static
 * @method fromImage
 * @param imageUrl {String} The image url of the texture
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 * @return Texture
 */
PIXI.Texture.fromImage = function(imageUrl, crossorigin)
{
	var texture = PIXI.TextureCache[imageUrl];

	if(!texture)
	{
		texture = new PIXI.Texture(PIXI.BaseTexture.fromImage(imageUrl, crossorigin));
		PIXI.TextureCache[imageUrl] = texture;
	}

	return texture;
}

/**
 * Helper function that returns a texture based on a frame id
 * If the frame id is not in the texture cache an error will be thrown
 *
 * @static
 * @method fromFrame
 * @param frameId {String} The frame id of the texture
 * @return Texture
 */
PIXI.Texture.fromFrame = function(frameId)
{
	var texture = PIXI.TextureCache[frameId];
	if(!texture)throw new Error("The frameId '"+ frameId +"' does not exist in the texture cache " + this);
	return texture;
}

/**
 * Helper function that returns a texture based on a canvas element
 * If the canvas is not in the texture cache it will be  created and loaded
 *
 * @static
 * @method fromCanvas
 * @param canvas {Canvas} The canvas element source of the texture
 * @return Texture
 */
PIXI.Texture.fromCanvas = function(canvas)
{
	var	baseTexture = new PIXI.BaseTexture(canvas);
	return new PIXI.Texture(baseTexture);
}


/**
 * Adds a texture to the textureCache.
 *
 * @static
 * @method addTextureToCache
 * @param texture {Texture}
 * @param id {String} the id that the texture will be stored against.
 */
PIXI.Texture.addTextureToCache = function(texture, id)
{
	PIXI.TextureCache[id] = texture;
}

/**
 * Remove a texture from the textureCache.
 *
 * @static
 * @method removeTextureFromCache
 * @param id {String} the id of the texture to be removed
 * @return {Texture} the texture that was removed
 */
PIXI.Texture.removeTextureFromCache = function(id)
{
	var texture = PIXI.TextureCache[id]
	PIXI.TextureCache[id] = null;
	return texture;
}

// this is more for webGL.. it contains updated frames..
PIXI.Texture.frameUpdates = [];


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 A RenderTexture is a special texture that allows any pixi displayObject to be rendered to it.

 __Hint__: All DisplayObjects (exmpl. Sprites) that renders on RenderTexture should be preloaded. 
 Otherwise black rectangles will be drawn instead.  
 
 RenderTexture takes snapshot of DisplayObject passed to render method. If DisplayObject is passed to render method, position and rotation of it will be ignored. For example:
 
	var renderTexture = new PIXI.RenderTexture(800, 600);
	var sprite = PIXI.Sprite.fromImage("spinObj_01.png");
	sprite.position.x = 800/2;
	sprite.position.y = 600/2;
	sprite.anchor.x = 0.5;
	sprite.anchor.y = 0.5;
	renderTexture.render(sprite);

 Sprite in this case will be rendered to 0,0 position. To render this sprite at center DisplayObjectContainer should be used:

	var doc = new PIXI.DisplayObjectContainer();
	doc.addChild(sprite);
	renderTexture.render(doc);  // Renders to center of renderTexture

 @class RenderTexture
 @extends Texture
 @constructor
 @param width {Number} The width of the render texture
 @param height {Number} The height of the render texture
 */
PIXI.RenderTexture = function(width, height)
{
	PIXI.EventTarget.call( this );

	this.width = width || 100;
	this.height = height || 100;

	this.indetityMatrix = PIXI.mat3.create();

	this.frame = new PIXI.Rectangle(0, 0, this.width, this.height);	

	if(PIXI.gl)
	{
		this.initWebGL();
	}
	else
	{
		this.initCanvas();
	}
}

PIXI.RenderTexture.prototype = Object.create( PIXI.Texture.prototype );
PIXI.RenderTexture.prototype.constructor = PIXI.RenderTexture;

/**
 * Initializes the webgl data for this texture
 *
 * @method initWebGL
 * @private
 */
PIXI.RenderTexture.prototype.initWebGL = function()
{
	var gl = PIXI.gl;
	this.glFramebuffer = gl.createFramebuffer();

   	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );

    this.glFramebuffer.width = this.width;
    this.glFramebuffer.height = this.height;	

	this.baseTexture = new PIXI.BaseTexture();

	this.baseTexture.width = this.width;
	this.baseTexture.height = this.height;

    this.baseTexture._glTexture = gl.createTexture();
    gl.bindTexture(gl.TEXTURE_2D, this.baseTexture._glTexture);

	gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  this.width,  this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

	this.baseTexture.isRender = true;

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );
	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.baseTexture._glTexture, 0);

	// create a projection matrix..
	this.projection = new PIXI.Point(this.width/2 , -this.height/2);

	// set the correct render function..
	this.render = this.renderWebGL;
}


PIXI.RenderTexture.prototype.resize = function(width, height)
{

	this.width = width;
	this.height = height;
	
	if(PIXI.gl)
	{
		this.projection.x = this.width/2
		this.projection.y = -this.height/2;
	
		var gl = PIXI.gl;
		gl.bindTexture(gl.TEXTURE_2D, this.baseTexture._glTexture);
		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  this.width,  this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	}
	else
	{
		
		this.frame.width = this.width
		this.frame.height = this.height;
		this.renderer.resize(this.width, this.height);
	}
}

/**
 * Initializes the canvas data for this texture
 *
 * @method initCanvas
 * @private
 */
PIXI.RenderTexture.prototype.initCanvas = function()
{
	this.renderer = new PIXI.CanvasRenderer(this.width, this.height, null, 0);

	this.baseTexture = new PIXI.BaseTexture(this.renderer.view);
	this.frame = new PIXI.Rectangle(0, 0, this.width, this.height);

	this.render = this.renderCanvas;
}

/**
 * This function will draw the display object to the texture.
 *
 * @method renderWebGL
 * @param displayObject {DisplayObject} The display object to render this texture on
 * @param clear {Boolean} If true the texture will be cleared before the displayObject is drawn
 * @private
 */
PIXI.RenderTexture.prototype.renderWebGL = function(displayObject, position, clear)
{
	var gl = PIXI.gl;

	// enable the alpha color mask..
	gl.colorMask(true, true, true, true); 

	gl.viewport(0, 0, this.width, this.height);	

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );

	if(clear)
	{
		gl.clearColor(0,0,0, 0);     
		gl.clear(gl.COLOR_BUFFER_BIT);
	}

	// THIS WILL MESS WITH HIT TESTING!
	var children = displayObject.children;

	//TODO -? create a new one??? dont think so!
	var originalWorldTransform = displayObject.worldTransform;
	displayObject.worldTransform = PIXI.mat3.create();//sthis.indetityMatrix;
	// modify to flip...
	displayObject.worldTransform[4] = -1;
	displayObject.worldTransform[5] = this.projection.y * -2;

	if(position)
	{
		displayObject.worldTransform[2] = position.x;
		displayObject.worldTransform[5] -= position.y;
	}
	
	PIXI.visibleCount++;
	displayObject.vcount = PIXI.visibleCount;
	
	for(var i=0,j=children.length; i<j; i++)
	{
		children[i].updateTransform();	
	}

	var renderGroup = displayObject.__renderGroup;

	if(renderGroup)
	{
		if(displayObject == renderGroup.root)
		{
			renderGroup.render(this.projection, this.glFramebuffer);
		}
		else
		{
			renderGroup.renderSpecific(displayObject, this.projection, this.glFramebuffer);
		}
	}
	else
	{
		if(!this.renderGroup)this.renderGroup = new PIXI.WebGLRenderGroup(gl);
		this.renderGroup.setRenderable(displayObject);
		this.renderGroup.render(this.projection, this.glFramebuffer);
	}
	
	displayObject.worldTransform = originalWorldTransform;
}


/**
 * This function will draw the display object to the texture.
 *
 * @method renderCanvas
 * @param displayObject {DisplayObject} The display object to render this texture on
 * @param clear {Boolean} If true the texture will be cleared before the displayObject is drawn
 * @private
 */
PIXI.RenderTexture.prototype.renderCanvas = function(displayObject, position, clear)
{
	var children = displayObject.children;

	displayObject.worldTransform = PIXI.mat3.create();
	
	if(position)
	{
		displayObject.worldTransform[2] = position.x;
		displayObject.worldTransform[5] = position.y;
	}
	

	for(var i=0,j=children.length; i<j; i++)
	{
		children[i].updateTransform();	
	}

	if(clear)this.renderer.context.clearRect(0,0, this.width, this.height);
	
    this.renderer.renderDisplayObject(displayObject);
    
    this.renderer.context.setTransform(1,0,0,1,0,0); 
    

  //  PIXI.texturesToUpdate.push(this.baseTexture);
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Class that loads a bunch of images / sprite sheet / bitmap font files. Once the
 * assets have been loaded they are added to the PIXI Texture cache and can be accessed
 * easily through PIXI.Texture.fromImage() and PIXI.Sprite.fromImage()
 * When all items have been loaded this class will dispatch a "onLoaded" event
 * As each individual item is loaded this class will dispatch a "onProgress" event
 *
 * @class AssetLoader
 * @constructor
 * @uses EventTarget
 * @param {Array<String>} assetURLs an array of image/sprite sheet urls that you would like loaded
 *      supported. Supported image formats include "jpeg", "jpg", "png", "gif". Supported
 *      sprite sheet data formats only include "JSON" at this time. Supported bitmap font
 *      data formats include "xml" and "fnt".
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.AssetLoader = function(assetURLs, crossorigin)
{
	PIXI.EventTarget.call(this);

	/**
	 * The array of asset URLs that are going to be loaded
     *
	 * @property assetURLs
	 * @type Array<String>
	 */
	this.assetURLs = assetURLs;

    /**
     * Whether the requests should be treated as cross origin
     *
     * @property crossorigin
     * @type Boolean
     */
	this.crossorigin = crossorigin;

    /**
     * Maps file extension to loader types
     *
     * @property loadersByType
     * @type Object
     */
    this.loadersByType = {
        "jpg":  PIXI.ImageLoader,
        "jpeg": PIXI.ImageLoader,
        "png":  PIXI.ImageLoader,
        "gif":  PIXI.ImageLoader,
        "json": PIXI.JsonLoader,
        "anim": PIXI.SpineLoader,
        "xml":  PIXI.BitmapFontLoader,
        "fnt":  PIXI.BitmapFontLoader
    };


};

/**
 * Fired when an item has loaded
 * @event onProgress
 */

/**
 * Fired when all the assets have loaded
 * @event onComplete
 */

// constructor
PIXI.AssetLoader.prototype.constructor = PIXI.AssetLoader;

/**
 * Starts loading the assets sequentially
 *
 * @method load
 */
PIXI.AssetLoader.prototype.load = function()
{
    var scope = this;

	this.loadCount = this.assetURLs.length;

    for (var i=0; i < this.assetURLs.length; i++)
	{
		var fileName = this.assetURLs[i];
		var fileType = fileName.split(".").pop().toLowerCase();

        var loaderClass = this.loadersByType[fileType];
        if(!loaderClass)
            throw new Error(fileType + " is an unsupported file type");

        var loader = new loaderClass(fileName, this.crossorigin);

        loader.addEventListener("loaded", function()
        {
            scope.onAssetLoaded();
        });
        loader.load();
	}
};

/**
 * Invoked after each file is loaded
 *
 * @method onAssetLoaded
 * @private
 */
PIXI.AssetLoader.prototype.onAssetLoaded = function()
{
    this.loadCount--;
	this.dispatchEvent({type: "onProgress", content: this});
	if(this.onProgress) this.onProgress();

	if(this.loadCount == 0)
	{
		this.dispatchEvent({type: "onComplete", content: this});
		if(this.onComplete) this.onComplete();
	}
};


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The json file loader is used to load in JSON data and parsing it
 * When loaded this class will dispatch a "loaded" event
 * If load failed this class will dispatch a "error" event
 *
 * @class JsonLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.JsonLoader = function (url, crossorigin) {
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] The base url of the bitmap font data
	 *
	 * @property baseUrl
	 * @type String
	 * @readOnly
	 */
	this.baseUrl = url.replace(/[^\/]*$/, "");

	/**
	 * [read-only] Whether the data has loaded yet
	 *
	 * @property loaded
	 * @type Boolean
	 * @readOnly
	 */
	this.loaded = false;

};

// constructor
PIXI.JsonLoader.prototype.constructor = PIXI.JsonLoader;

/**
 * Loads the JSON data
 *
 * @method load
 */
PIXI.JsonLoader.prototype.load = function () {
	this.ajaxRequest = new AjaxRequest();
	var scope = this;
	this.ajaxRequest.onreadystatechange = function () {
		scope.onJSONLoaded();
	};

	this.ajaxRequest.open("GET", this.url, true);
	if (this.ajaxRequest.overrideMimeType) this.ajaxRequest.overrideMimeType("application/json");
	this.ajaxRequest.send(null);
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.JsonLoader.prototype.onJSONLoaded = function () {
	if (this.ajaxRequest.readyState == 4) {
		if (this.ajaxRequest.status == 200 || window.location.href.indexOf("http") == -1) {
			this.json = JSON.parse(this.ajaxRequest.responseText);

			if(this.json.frames)
			{
				// sprite sheet
				var scope = this;
				var textureUrl = this.baseUrl + this.json.meta.image;
				var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
				var frameData = this.json.frames;

				this.texture = image.texture.baseTexture;
				image.addEventListener("loaded", function (event) {
					scope.onLoaded();
				});

				for (var i in frameData) {
					var rect = frameData[i].frame;
					if (rect) {
						PIXI.TextureCache[i] = new PIXI.Texture(this.texture, {
							x: rect.x,
							y: rect.y,
							width: rect.w,
							height: rect.h
						});
						if (frameData[i].trimmed) {
							//var realSize = frameData[i].spriteSourceSize;
							PIXI.TextureCache[i].realSize = frameData[i].spriteSourceSize;
							PIXI.TextureCache[i].trim.x = 0; // (realSize.x / rect.w)
							// calculate the offset!
						}
					}
				}

				image.load();

			}
			else if(this.json.bones)
			{
				// spine animation
				var spineJsonParser = new spine.SkeletonJson();
				var skeletonData = spineJsonParser.readSkeletonData(this.json);
				PIXI.AnimCache[this.url] = skeletonData;
				this.onLoaded();
			}
			else
			{
				this.onLoaded();
			}
		}
		else
		{
			this.onError();
		}
	}
};

/**
 * Invoke when json file loaded
 *
 * @method onLoaded
 * @private
 */
PIXI.JsonLoader.prototype.onLoaded = function () {
	this.loaded = true;
	this.dispatchEvent({
		type: "loaded",
		content: this
	});
};

/**
 * Invoke when error occured
 *
 * @method onError
 * @private
 */
PIXI.JsonLoader.prototype.onError = function () {
	this.dispatchEvent({
		type: "error",
		content: this
	});
};
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The sprite sheet loader is used to load in JSON sprite sheet data
 * To generate the data you can use http://www.codeandweb.com/texturepacker and publish the "JSON" format
 * There is a free version so thats nice, although the paid version is great value for money.
 * It is highly recommended to use Sprite sheets (also know as texture atlas") as it means sprite"s can be batched and drawn together for highly increased rendering speed.
 * Once the data has been loaded the frames are stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFromeId()
 * This loader will also load the image file that the Spritesheet points to as well as the data.
 * When loaded this class will dispatch a "loaded" event
 *
 * @class SpriteSheetLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the sprite sheet JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */

PIXI.SpriteSheetLoader = function (url, crossorigin) {
	/*
	 * i use texture packer to load the assets..
	 * http://www.codeandweb.com/texturepacker
	 * make sure to set the format as "JSON"
	 */
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] The base url of the bitmap font data
	 *
	 * @property baseUrl
	 * @type String
	 * @readOnly
	 */
	this.baseUrl = url.replace(/[^\/]*$/, "");

    /**
     * The texture being loaded
     *
     * @property texture
     * @type Texture
     */
    this.texture = null;

    /**
     * The frames of the sprite sheet
     *
     * @property frames
     * @type Object
     */
	this.frames = {};
};

// constructor
PIXI.SpriteSheetLoader.prototype.constructor = PIXI.SpriteSheetLoader;

/**
 * This will begin loading the JSON file
 *
 * @method load
 */
PIXI.SpriteSheetLoader.prototype.load = function () {
	var scope = this;
	var jsonLoader = new PIXI.JsonLoader(this.url, this.crossorigin);
	jsonLoader.addEventListener("loaded", function (event) {
		scope.json = event.content.json;
		scope.onJSONLoaded();
	});
	jsonLoader.load();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.SpriteSheetLoader.prototype.onJSONLoaded = function () {
	var scope = this;
	var textureUrl = this.baseUrl + this.json.meta.image;
	var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
	var frameData = this.json.frames;

	this.texture = image.texture.baseTexture;
	image.addEventListener("loaded", function (event) {
		scope.onLoaded();
	});

	for (var i in frameData) {
		var rect = frameData[i].frame;
		if (rect) {
			PIXI.TextureCache[i] = new PIXI.Texture(this.texture, {
				x: rect.x,
				y: rect.y,
				width: rect.w,
				height: rect.h
			});
			if (frameData[i].trimmed) {
				//var realSize = frameData[i].spriteSourceSize;
				PIXI.TextureCache[i].realSize = frameData[i].spriteSourceSize;
				PIXI.TextureCache[i].trim.x = 0; // (realSize.x / rect.w)
				// calculate the offset!
			}
		}
	}

	image.load();
};
/**
 * Invoke when all files are loaded (json and texture)
 *
 * @method onLoaded
 * @private
 */
PIXI.SpriteSheetLoader.prototype.onLoaded = function () {
	this.dispatchEvent({
		type: "loaded",
		content: this
	});
};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The image loader class is responsible for loading images file formats ("jpeg", "jpg", "png" and "gif")
 * Once the image has been loaded it is stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFromeId()
 * When loaded this class will dispatch a 'loaded' event
 *
 * @class ImageLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the image
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.ImageLoader = function(url, crossorigin)
{
    PIXI.EventTarget.call(this);

    /**
     * The texture being loaded
     *
     * @property texture
     * @type Texture
     */
    this.texture = PIXI.Texture.fromImage(url, crossorigin);

    /**
     * if the image is loaded with loadFramedSpriteSheet
     * frames will contain the sprite sheet frames
     *
     */
    this.frames = [];
};

// constructor
PIXI.ImageLoader.prototype.constructor = PIXI.ImageLoader;

/**
 * Loads image or takes it from cache
 *
 * @method load
 */
PIXI.ImageLoader.prototype.load = function()
{
    if(!this.texture.baseTexture.hasLoaded)
    {
        var scope = this;
        this.texture.baseTexture.addEventListener("loaded", function()
        {
            scope.onLoaded();
        });
    }
    else
    {
        this.onLoaded();
    }
};

/**
 * Invoked when image file is loaded or it is already cached and ready to use
 *
 * @method onLoaded
 * @private
 */
PIXI.ImageLoader.prototype.onLoaded = function()
{
    this.dispatchEvent({type: "loaded", content: this});
};

/**
 * Loads image and split it to uniform sized frames
 *
 *
 * @method loadFramedSpriteSheet
 * @param frameWidth {Number} with of each frame
 * @param frameHeight {Number} height of each frame
 * @param textureName {String} if given, the frames will be cached in <textureName>-<ord> format 
 */
PIXI.ImageLoader.prototype.loadFramedSpriteSheet = function(frameWidth, frameHeight, textureName)
{
    this.frames = [];
    var cols = Math.floor(this.texture.width / frameWidth);
    var rows = Math.floor(this.texture.height / frameHeight);

    var i=0;
    for (var y=0; y<rows; y++)
    {
        for (var x=0; x<cols; x++,i++)
        {
            var texture = new PIXI.Texture(this.texture, {
                x: x*frameWidth,
                y: y*frameHeight,
                width: frameWidth,
                height: frameHeight
            });

            this.frames.push(texture);
            if (textureName) PIXI.TextureCache[textureName+'-'+i] = texture;
        }
    }

    if(!this.texture.baseTexture.hasLoaded)
    {
        var scope = this;
        this.texture.baseTexture.addEventListener("loaded", function() {
            scope.onLoaded();
        });
    }
    else
    {
        this.onLoaded();
    }
};
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The xml loader is used to load in XML bitmap font data ("xml" or "fnt")
 * To generate the data you can use http://www.angelcode.com/products/bmfont/
 * This loader will also load the image file as the data.
 * When loaded this class will dispatch a "loaded" event
 *
 * @class BitmapFontLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the sprite sheet JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.BitmapFontLoader = function(url, crossorigin)
{
    /*
     * i use texture packer to load the assets..
     * http://www.codeandweb.com/texturepacker
     * make sure to set the format as "JSON"
     */
    PIXI.EventTarget.call(this);

    /**
     * The url of the bitmap font data
     *
     * @property url
     * @type String
     */
    this.url = url;

    /**
     * Whether the requests should be treated as cross origin
     *
     * @property crossorigin
     * @type Boolean
     */
    this.crossorigin = crossorigin;

    /**
     * [read-only] The base url of the bitmap font data
     *
     * @property baseUrl
     * @type String
     * @readOnly
     */
    this.baseUrl = url.replace(/[^\/]*$/, "");

    /**
     * [read-only] The texture of the bitmap font
     *
     * @property baseUrl
     * @type String
     */
    this.texture = null;
};

// constructor
PIXI.BitmapFontLoader.prototype.constructor = PIXI.BitmapFontLoader;

/**
 * Loads the XML font data
 *
 * @method load
 */
PIXI.BitmapFontLoader.prototype.load = function()
{
    this.ajaxRequest = new XMLHttpRequest();
    var scope = this;
    this.ajaxRequest.onreadystatechange = function()
    {
        scope.onXMLLoaded();
    };

    this.ajaxRequest.open("GET", this.url, true);
    if (this.ajaxRequest.overrideMimeType) this.ajaxRequest.overrideMimeType("application/xml");
    this.ajaxRequest.send(null)
};

/**
 * Invoked when XML file is loaded, parses the data
 *
 * @method onXMLLoaded
 * @private
 */
PIXI.BitmapFontLoader.prototype.onXMLLoaded = function()
{
    if (this.ajaxRequest.readyState == 4)
    {
        if (this.ajaxRequest.status == 200 || window.location.href.indexOf("http") == -1)
        {
            var textureUrl = this.baseUrl + this.ajaxRequest.responseXML.getElementsByTagName("page")[0].attributes.getNamedItem("file").nodeValue;
            var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
            this.texture = image.texture.baseTexture;

            var data = {};
            var info = this.ajaxRequest.responseXML.getElementsByTagName("info")[0];
            var common = this.ajaxRequest.responseXML.getElementsByTagName("common")[0];
            data.font = info.attributes.getNamedItem("face").nodeValue;
            data.size = parseInt(info.attributes.getNamedItem("size").nodeValue, 10);
            data.lineHeight = parseInt(common.attributes.getNamedItem("lineHeight").nodeValue, 10);
            data.chars = {};

            //parse letters
            var letters = this.ajaxRequest.responseXML.getElementsByTagName("char");

            for (var i = 0; i < letters.length; i++)
            {
                var charCode = parseInt(letters[i].attributes.getNamedItem("id").nodeValue, 10);

                var textureRect = new PIXI.Rectangle(
                    parseInt(letters[i].attributes.getNamedItem("x").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("y").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("width").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("height").nodeValue, 10)
                );

                data.chars[charCode] = {
                    xOffset: parseInt(letters[i].attributes.getNamedItem("xoffset").nodeValue, 10),
                    yOffset: parseInt(letters[i].attributes.getNamedItem("yoffset").nodeValue, 10),
                    xAdvance: parseInt(letters[i].attributes.getNamedItem("xadvance").nodeValue, 10),
                    kerning: {},
                    texture: PIXI.TextureCache[charCode] = new PIXI.Texture(this.texture, textureRect)

                };
            }

            //parse kernings
            var kernings = this.ajaxRequest.responseXML.getElementsByTagName("kerning");
            for (i = 0; i < kernings.length; i++)
            {
               var first = parseInt(kernings[i].attributes.getNamedItem("first").nodeValue, 10);
               var second = parseInt(kernings[i].attributes.getNamedItem("second").nodeValue, 10);
               var amount = parseInt(kernings[i].attributes.getNamedItem("amount").nodeValue, 10);

                data.chars[second].kerning[first] = amount;

            }

            PIXI.BitmapText.fonts[data.font] = data;

            var scope = this;
            image.addEventListener("loaded", function() {
                scope.onLoaded();
            });
            image.load();
        }
    }
};

/**
 * Invoked when all files are loaded (xml/fnt and texture)
 *
 * @method onLoaded
 * @private
 */
PIXI.BitmapFontLoader.prototype.onLoaded = function()
{
    this.dispatchEvent({type: "loaded", content: this});
};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) https://github.com/ekelokorpi
 *
 * Awesome JS run time provided by EsotericSoftware
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

/**
 * The Spine loader is used to load in JSON spine data
 * To generate the data you need to use http://esotericsoftware.com/ and export the "JSON" format
 * Due to a clash of names  You will need to change the extension of the spine file from *.json to *.anim for it to load
 * See example 12 (http://www.goodboydigital.com/pixijs/examples/12/) to see a working example and check out the source
 * You will need to generate a sprite sheet to accompany the spine data
 * When loaded this class will dispatch a "loaded" event
 *
 * @class Spine
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.SpineLoader = function(url, crossorigin)
{
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] Whether the data has loaded yet
	 *
	 * @property loaded
	 * @type Boolean
	 * @readOnly
	 */
	this.loaded = false;
}

PIXI.SpineLoader.prototype.constructor = PIXI.SpineLoader;

/**
 * Loads the JSON data
 *
 * @method load
 */
PIXI.SpineLoader.prototype.load = function () {

	var scope = this;
	var jsonLoader = new PIXI.JsonLoader(this.url, this.crossorigin);
	jsonLoader.addEventListener("loaded", function (event) {
		scope.json = event.content.json;
		scope.onJSONLoaded();
	});
	jsonLoader.load();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.SpineLoader.prototype.onJSONLoaded = function (event) {
	var spineJsonParser = new spine.SkeletonJson();
	var skeletonData = spineJsonParser.readSkeletonData(this.json);

	PIXI.AnimCache[this.url] = skeletonData;

	this.onLoaded();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onLoaded
 * @private
 */
PIXI.SpineLoader.prototype.onLoaded = function () {
	this.loaded = true;
    this.dispatchEvent({type: "loaded", content: this});
};


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * This is the base class for  creating a pixi.js filter. Currently only webGL supports filters.
 * If you want to make a custom filter this should be your base class.
 * @class AbstractFilter
 * @constructor
 * @param fragmentSrc
 * @param unifroms  
 */
PIXI.AbstractFilter = function(fragmentSrc, unifroms)
{
	/**
	* An array of passes - some filters contain a few steps this array simply stores the steps in a liniear fashion.
	* For example the blur filter has two passes blurX and blurY.
	* @property passes
	* @type Array an array of filter objects
	* @private
	*/
	this.passes = [this];


	this.dirty = true;
	this.padding = 0;

	/**
	@property uniforms
	@private
	*/
	this.uniforms = unifroms || {};
	
	this.fragmentSrc = fragmentSrc || [];
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * The ColorMatrixFilter class lets you apply a 4x4 matrix transformation on the RGBA 
 * color and alpha values of every pixel on your displayObject to produce a result 
 * with a new set of RGBA color and alpha values. Its pretty powerful!
 * @class ColorMatrixFilter
 * @contructor
 */
PIXI.ColorMatrixFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		matrix: {type: 'mat4', value: [1,0,0,0,
									   0,1,0,0,
									   0,0,1,0,
									   0,0,0,1]},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float invert;",
	  "uniform mat4 matrix;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.ColorMatrixFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.ColorMatrixFilter.prototype.constructor = PIXI.ColorMatrixFilter;

/**
 * Sets the matrix of the color matrix filter
 *
 * @property matrix
 * @type Array and array of 26 numbers
 * @default [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
 */
Object.defineProperty(PIXI.ColorMatrixFilter.prototype, 'matrix', {
    get: function() {
        return this.uniforms.matrix.value;
    },
    set: function(value) {
    	this.uniforms.matrix.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This turns your displayObjects to black and white.
 * @class GreyFilter
 * @contructor
 */
PIXI.GreyFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		grey: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "uniform float grey;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), grey);",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
}

PIXI.GreyFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.GreyFilter.prototype.constructor = PIXI.GreyFilter;

/**
The strength of the grey. 1 will make the object black and white, 0 will make the object its normal color
@property grey
*/
Object.defineProperty(PIXI.GreyFilter.prototype, 'grey', {
    get: function() {
        return this.uniforms.grey.value;
    },
    set: function(value) {
    	this.uniforms.grey.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * The DisplacementFilter class uses the pixel values from the specified texture (called the displacement map) to perform a displacement of an object. 
 * You can use this filter to apply all manor of crazy warping effects
 * Currently the r property of the texture is used offset the x and the g propery of the texture is used to offset the y.
 * @class DisplacementFilter
 * @contructor
 * @param texture {Texture} The texture used for the displacemtent map * must be power of 2 texture at the moment
 */
PIXI.DisplacementFilter = function(texture)
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	texture.baseTexture._powerOf2 = true;

	// set the uniforms
	//console.log()
	this.uniforms = {
		displacementMap: {type: 'sampler2D', value:texture},
		scale:			 {type: 'f2', value:{x:30, y:30}},
		offset:			 {type: 'f2', value:{x:0, y:0}},
		mapDimensions:   {type: 'f2', value:{x:1, y:5112}},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};
	

	if(texture.baseTexture.hasLoaded)
	{
		this.uniforms.mapDimensions.value.x = texture.width;
		this.uniforms.mapDimensions.value.y = texture.height;
	}
	else
	{
		this.boundLoadedFunction = this.onTextureLoaded.bind(this);

		texture.baseTexture.on("loaded", this.boundLoadedFunction);
	}

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D displacementMap;",
	  "uniform sampler2D uSampler;",
	  "uniform vec2 scale;",
	  "uniform vec2 offset;",
	  "uniform vec4 dimensions;",
	  "uniform vec2 mapDimensions;",// = vec2(256.0, 256.0);",
	 // "const vec2 textureDimensions = vec2(750.0, 750.0);",
	  
	  "void main(void) {",
	  	"vec2 mapCords = vTextureCoord.xy;",
//	  	"mapCords -= ;",
	 	"mapCords += (dimensions.zw + offset)/ dimensions.xy ;",
	 	"mapCords.y *= -1.0;",
	 	"mapCords.y += 1.0;",
	  	"vec2 matSample = texture2D(displacementMap, mapCords).xy;",
		"matSample -= 0.5;",	  
	 	"matSample *= scale;",
	 	"matSample /= mapDimensions;",
	    "gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));",
		"gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);",
		"vec2 cord = vTextureCoord;",
		
		//"gl_FragColor =  texture2D(displacementMap, cord);",
	    "gl_FragColor = gl_FragColor * vColor;",
	    
	  "}"
	];
	
}

PIXI.DisplacementFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.DisplacementFilter.prototype.constructor = PIXI.DisplacementFilter;

PIXI.DisplacementFilter.prototype.onTextureLoaded = function()
{
	
	this.uniforms.mapDimensions.value.x = this.uniforms.displacementMap.value.width;
	this.uniforms.mapDimensions.value.y = this.uniforms.displacementMap.value.height;

	this.uniforms.displacementMap.value.baseTexture.off("loaded", this.boundLoadedFunction)

}

/**
 * The texture used for the displacemtent map * must be power of 2 texture at the moment
 *
 * @property map
 * @type Texture
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'map', {
    get: function() {
        return this.uniforms.displacementMap.value;
    },
    set: function(value) {
    	this.uniforms.displacementMap.value = value;
    }
});

/**
 * The multiplier used to scale the displacement result from the map calculation.
 *
 * @property scale
 * @type Point
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'scale', {
    get: function() {
        return this.uniforms.scale.value;
    },
    set: function(value) {
    	this.uniforms.scale.value = value;
    }
});

/**
 * The offset used to move the displacement map.
 *
 * @property offset
 * @type Point
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'offset', {
    get: function() {
        return this.uniforms.offset.value;
    },
    set: function(value) {
    	this.uniforms.offset.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.PixelateFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		invert: {type: 'f', value: 0},
		dimensions: {type: 'f4', value:new Float32Array([10000, 100, 10, 10])},
		pixelSize: {type: 'f2', value:{x:10, y:10}},
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec2 testDim;",
	  "uniform vec4 dimensions;",
	  "uniform vec2 pixelSize;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	 	"vec2 coord = vTextureCoord;",

	 	"vec2 size = dimensions.xy/pixelSize;",

	 	"vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;",
	    "gl_FragColor = texture2D(uSampler, color);",
	  "}"
	];
	

}

PIXI.PixelateFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.PixelateFilter.prototype.constructor = PIXI.PixelateFilter;

/**
 * 
 * This a point that describes the size of the blocs. x is the width of the block and y is the the height
 * @property size
 * @type Point
 */
Object.defineProperty(PIXI.PixelateFilter.prototype, 'size', {
    get: function() {
        return this.uniforms.pixelSize.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.pixelSize.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.BlurXFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	"vec4 sum = vec4(0.0);",

	  	"sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;",
	 
		"gl_FragColor = sum;",

	  "}"
	];
}

PIXI.BlurXFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.BlurXFilter.prototype.constructor = PIXI.BlurXFilter;


Object.defineProperty(PIXI.BlurXFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    
    	this.dirty = true;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.BlurYFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	"vec4 sum = vec4(0.0);",

	  	"sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;",
	 
		"gl_FragColor = sum;",

	  "}"
	];
}

PIXI.BlurYFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.BlurYFilter.prototype.constructor = PIXI.BlurYFilter;

Object.defineProperty(PIXI.BlurYFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * The BlurFilter applies a Gaussian blur to an object. 
 * The strength of the blur can be set for x- and y-axis separately (always relative to the stage).
 *
 * @class BlurFilter
 * @contructor
 */
PIXI.BlurFilter = function()
{
    
	this.blurXFilter = new PIXI.BlurXFilter();
	this.blurYFilter = new PIXI.BlurYFilter();

	this.passes =[this.blurXFilter, this.blurYFilter];
	
}

/**
 * Sets the strength of both the blurX and blurY properties simultaneously
 *
 * @property blur
 * @type Number the strength of the blur
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blur', {
    get: function() {
        return this.blurXFilter.blur;
    },
    set: function(value) {
  		this.blurXFilter.blur = this.blurYFilter.blur = value;
    }
});

/**
 * Sets the strength of the blurX property simultaneously
 *
 * @property blurX
 * @type Number the strength of the blurX
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blurX', {
    get: function() {
        return this.blurXFilter.blur;
    },
    set: function(value) {
    	this.blurXFilter.blur = value;
    }
});

/**
 * Sets the strength of the blurX property simultaneously
 *
 * @property blurY
 * @type Number the strength of the blurY
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blurY', {
    get: function() {
        return this.blurYFilter.blur;
    },
    set: function(value) {
    	this.blurYFilter.blur = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This inverts your displayObjects colors.
 * @class InvertFilter
 * @contructor
 */
PIXI.InvertFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		invert: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float invert;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);",
		//"gl_FragColor.rgb = gl_FragColor.rgb  * gl_FragColor.a;",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.InvertFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.InvertFilter.prototype.constructor = PIXI.InvertFilter;

/**
The strength of the invert. 1 will fully invert the colors, 0 will make the object its normal color
@property invert
*/
Object.defineProperty(PIXI.InvertFilter.prototype, 'invert', {
    get: function() {
        return this.uniforms.invert.value;
    },
    set: function(value) {
    	this.uniforms.invert.value = value;
    }
});
/**
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This applies a sepia effect to your displayObjects.
 * @class SepiaFilter
 * @contructor
 */
PIXI.SepiaFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		sepia: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float sepia;",
	  "uniform sampler2D uSampler;",
	 	   
	  "const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.SepiaFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.SepiaFilter.prototype.constructor = PIXI.SepiaFilter;

/**
The strength of the sepia. 1 will apply the full sepia effect, 0 will make the object its normal color
@property sepia
*/
Object.defineProperty(PIXI.SepiaFilter.prototype, 'sepia', {
    get: function() {
        return this.uniforms.sepia.value;
    },
    set: function(value) {
    	this.uniforms.sepia.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.TwistFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		radius: {type: 'f', value:0.5},
		angle: {type: 'f', value:5},
		offset: {type: 'f2', value:{x:0.5, y:0.5}},
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",
	  
	  "uniform float radius;",
      "uniform float angle;",
      "uniform vec2 offset;",

	  "void main(void) {",
	 	"vec2 coord = vTextureCoord - offset;",
		"float distance = length(coord);",
	 	
	 	"if (distance < radius){",

		 	"float ratio = (radius - distance) / radius;",
		 	"float angleMod = ratio * ratio * angle;",
		 	"float s = sin(angleMod);",
		 	"float c = cos(angleMod);",
		 	"coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);",

	 	"}",

	    "gl_FragColor = texture2D(uSampler, coord+offset);",
	  "}"
	];
}

PIXI.TwistFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.TwistFilter.prototype.constructor = PIXI.TwistFilter;

/**
 * 
 * This point describes the the offset of the twist
 * @property size
 * @type Point
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'offset', {
    get: function() {
        return this.uniforms.offset.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.offset.value = value;
    }
});

/**
 * 
 * This radius describes size of the twist
 * @property size
 * @type Number
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'radius', {
    get: function() {
        return this.uniforms.radius.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.radius.value = value;
    }
});

/**
 * 
 * This radius describes angle of the twist
 * @property angle
 * @type Number
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.angle.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.angle.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This turns your displayObjects to black and white.
 * @class GreyFilter
 * @contructor
 */
PIXI.ColorStepFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		step: {type: 'f', value: 5},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "uniform float step;",
	  "void main(void) {",
	    "vec4 color = texture2D(uSampler, vTextureCoord);",
	    "color = floor(color * step) / step;",
	    "gl_FragColor = color * vColor;",
	  "}"
	];
}

PIXI.ColorStepFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.ColorStepFilter.prototype.constructor = PIXI.ColorStepFilter;

/**
The number of steps.
@property step
*/
Object.defineProperty(PIXI.ColorStepFilter.prototype, 'step', {
    get: function() {
        return this.uniforms.step.value;
    },
    set: function(value) {
    	this.uniforms.step.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * original filter: https://github.com/evanw/glfx.js/blob/master/src/filters/fun/dotscreen.js
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.DotScreenFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		scale: {type: 'f', value:1},
		angle: {type: 'f', value:5},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",

	    "uniform float angle;",
	    "uniform float scale;",

	    "float pattern() {",
	    	"float s = sin(angle), c = cos(angle);",
	    	"vec2 tex = vTextureCoord * dimensions.xy;",
	    	"vec2 point = vec2(",
	    		"c * tex.x - s * tex.y,",
	    		"s * tex.x + c * tex.y",
	    	") * scale;",
	    	"return (sin(point.x) * sin(point.y)) * 4.0;",
	    "}",

	    "void main() {",
            "vec4 color = texture2D(uSampler, vTextureCoord);",
            "float average = (color.r + color.g + color.b) / 3.0;",
            "gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);",
        "}",
	];
}

PIXI.DotScreenFilter.prototype = Object.create( PIXI.DotScreenFilter.prototype );
PIXI.DotScreenFilter.prototype.constructor = PIXI.DotScreenFilter;

/**
 * 
 * This describes the the scale
 * @property scale
 * @type Number
 */
Object.defineProperty(PIXI.DotScreenFilter.prototype, 'scale', {
    get: function() {
        return this.uniforms.scale.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.scale.value = value;
    }
});

/**
 * 
 * This radius describes angle
 * @property angle
 * @type Number
 */
Object.defineProperty(PIXI.DotScreenFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.angle.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.angle.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.CrossHatchFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	
	    
		"    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);",
		"     ",
		"    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);",
		"     ",
		"    if (lum < 1.00) {",
		"        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.75) {",
		"        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.50) {",
		"        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.3) {",
		"        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"}"
	];
}

PIXI.CrossHatchFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.CrossHatchFilter.prototype.constructor = PIXI.BlurYFilter;

Object.defineProperty(PIXI.CrossHatchFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.RGBSplitFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		red: {type: 'f2', value: {x:20, y:20}},
		green: {type: 'f2', value: {x:-20, y:20}},
		blue: {type: 'f2', value: {x:20, y:-20}},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec2 red;",
	  "uniform vec2 green;",
	  "uniform vec2 blue;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	  "gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;",
	  	  "gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;",
	  	  "gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;",
	  	  "gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;",
	  "}"
	];
}

PIXI.RGBSplitFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.RGBSplitFilter.prototype.constructor = PIXI.RGBSplitFilter;

Object.defineProperty(PIXI.RGBSplitFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

    if (typeof exports !== 'undefined') {
        if (typeof module !== 'undefined' && module.exports) {
            exports = module.exports = PIXI;
        }
        exports.PIXI = PIXI;
    } else if (typeof define !== 'undefined' && define.amd) {
        define(PIXI);
    } else {
        root.PIXI = PIXI;
    }
}).call(this);

},{}],7:[function(require,module,exports){
(function() {
  require('es5-shimify');

  require('spine');

  require('spine/lib/local');

  require('spine/lib/manager');

  require('spine/lib/route');

  require('./spine.ajax');

  require('./spine.awaitajax');

  window.Math2 = require('./Math2');

  $(function() {
    var App;
    if (window.app) {
      return;
    }
    App = require("../pixijs-playground");
    return window.app = new App({
      el: $("body")
    });
  });

}).call(this);


},{"../pixijs-playground":11,"./Math2":4,"./spine.ajax":8,"./spine.awaitajax":9,"es5-shimify":18,"spine":"spine","spine/lib/local":37,"spine/lib/manager":38,"spine/lib/route":39}],8:[function(require,module,exports){
(function() {
  var Ajax, Base, Collection, Extend, Include, Model, Singleton, Spine, iced, __iced_k, __iced_k_noop,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = this.Spine || require("spine");

  Model = Spine.Model;

  Ajax = {
    getURL: function(object) {
      return object && (typeof object.url === "function" ? object.url() : void 0) || object.url;
    },
    enabled: true,
    disable: function(callback) {
      var e;
      if (this.enabled) {
        this.enabled = false;
        try {
          return callback();
        } catch (_error) {
          e = _error;
          throw e;
        } finally {
          this.enabled = true;
        }
      } else {
        return callback();
      }
    },
    max: 100,
    throttle: 0,
    queue: function(request) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.pipeliner || (this.pipeliner = new Pipeliner(this.max, this.throttle));
      if (!request) {
        return this.pipeliner.queue;
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/spine.ajax.iced"
          });
          _this.pipeliner.waitInQueue(__iced_deferrals.defer({
            lineno: 29
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return request(_this.pipeliner.defer({
            lineno: 30,
            context: __iced_deferrals
          }));
        };
      })(this));
    },
    clearQueue: function() {
      this.pipeliner.queue = [];
      return this.pipeliner.n_out = 0;
    }
  };

  Base = (function() {
    function Base() {}

    Base.prototype.defaults = {
      contentType: 'application/json',
      dataType: 'json',
      processData: false,
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    };

    Base.prototype.queue = Ajax.queue;

    Base.prototype.ajax = function(params, defaults) {
      return new $.ajax(this.ajaxSettings(params, defaults));
    };

    Base.prototype.ajaxQueue = function(params, defaults) {
      var data, defererror, defersuccess, error, request, rv, settings, statusText, xhr;
      xhr = null;
      rv = new iced.Rendezvous;
      settings = this.ajaxSettings(params, defaults);
      defersuccess = settings.success;
      defererror = settings.error;
      settings.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              data = arguments[0];
              statusText = arguments[1];
              return xhr = arguments[2];
            };
          };
        })(this)(),
        lineno: 56,
        context: __iced_deferrals
      });
      settings.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              xhr = arguments[0];
              statusText = arguments[1];
              return error = arguments[2];
            };
          };
        })(this)(),
        lineno: 57,
        context: __iced_deferrals
      });
      request = function(next) {
        var status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
        __iced_k = __iced_k_noop;
        ___iced_passed_deferral = iced.findDeferral(arguments);
        xhr = new $.Ajax(settings);
        (function(_this) {
          return (function(__iced_k) {
            __iced_deferrals = new iced.Deferrals(__iced_k, {
              parent: ___iced_passed_deferral,
              filename: "/home/charles/source/pixijs-playground/app/lib/spine.ajax.iced"
            });
            rv.wait(__iced_deferrals.defer({
              assign_fn: (function() {
                return function() {
                  return status = arguments[0];
                };
              })(),
              lineno: 61
            }));
            __iced_deferrals._fulfill();
          });
        })(this)((function(_this) {
          return function() {
            switch (status) {
              case 'success':
                defersuccess(data, statusText, xhr);
                break;
              case 'error':
                defererror(xhr, statusText, error);
            }
            return next();
          };
        })(this));
      };
      request.abort = function(statusText) {
        var index;
        if (xhr) {
          return xhr.abort(statusText);
        }
        index = this.queue().indexOf(request);
        if (index > -1) {
          this.queue().splice(index, 1);
        }
        if (Ajax.pipeliner) {
          Ajax.pipeliner.n_out--;
        }
        return request;
      };
      if (!Ajax.enabled) {
        return request;
      }
      this.queue(request);
      return request;
    };

    Base.prototype.ajaxSettings = function(params, defaults) {
      return $.extend({}, this.defaults, defaults, params);
    };

    return Base;

  })();

  Collection = (function(_super) {
    __extends(Collection, _super);

    function Collection(model) {
      this.model = model;
      this.failResponse = __bind(this.failResponse, this);
      this.recordsResponse = __bind(this.recordsResponse, this);
    }

    Collection.prototype.find = function(id, params) {
      var record;
      record = new this.model({
        id: id
      });
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(record),
        success: this.recordsResponse,
        error: this.failResponse
      });
    };

    Collection.prototype.all = function(params) {
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(this.model),
        success: this.recordsResponse,
        error: this.failResponse
      });
    };

    Collection.prototype.fetch = function(params, options) {
      var id;
      if (params == null) {
        params = {};
      }
      if (options == null) {
        options = {};
      }
      if (id = params.id) {
        delete params.id;
        return this.find(id, params).done((function(_this) {
          return function(record) {
            return _this.model.refresh(record, options);
          };
        })(this));
      } else {
        return this.all(params).done((function(_this) {
          return function(records) {
            return _this.model.refresh(records, options);
          };
        })(this));
      }
    };

    Collection.prototype.recordsResponse = function(data, status, xhr) {
      return this.model.trigger('ajaxSuccess', null, status, xhr);
    };

    Collection.prototype.failResponse = function(xhr, statusText, error) {
      return this.model.trigger('ajaxError', null, xhr, statusText, error);
    };

    return Collection;

  })(Base);

  Singleton = (function(_super) {
    __extends(Singleton, _super);

    function Singleton(record) {
      this.record = record;
      this.failResponse = __bind(this.failResponse, this);
      this.recordResponse = __bind(this.recordResponse, this);
      this.model = this.record.constructor;
    }

    Singleton.prototype.reload = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.create = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'POST',
        data: JSON.stringify(this.record),
        url: Ajax.getURL(this.model),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.update = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'PUT',
        data: JSON.stringify(this.record),
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.destroy = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'DELETE',
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.recordResponse = function(options) {
      if (options == null) {
        options = {};
      }
      return (function(_this) {
        return function(data, status, xhr) {
          var _ref, _ref1;
          if (Spine.isBlank(data)) {
            data = false;
          } else {
            data = _this.model.fromJSON(data);
          }
          Ajax.disable(function() {
            if (data) {
              if (data.id && _this.record.id !== data.id) {
                _this.record.changeID(data.id);
              }
              return _this.record.updateAttributes(data.attributes());
            }
          });
          _this.record.trigger('ajaxSuccess', data, status, xhr);
          if ((_ref = options.success) != null) {
            _ref.apply(_this.record);
          }
          return (_ref1 = options.done) != null ? _ref1.apply(_this.record) : void 0;
        };
      })(this);
    };

    Singleton.prototype.failResponse = function(options) {
      if (options == null) {
        options = {};
      }
      return (function(_this) {
        return function(xhr, statusText, error) {
          var _ref, _ref1;
          _this.record.trigger('ajaxError', xhr, statusText, error);
          if ((_ref = options.error) != null) {
            _ref.apply(_this.record);
          }
          return (_ref1 = options.fail) != null ? _ref1.apply(_this.record) : void 0;
        };
      })(this);
    };

    return Singleton;

  })(Base);

  Model.host = '';

  Include = {
    ajax: function() {
      return new Singleton(this);
    },
    url: function() {
      var args, url;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      url = Ajax.getURL(this.constructor);
      if (url.charAt(url.length - 1) !== '/') {
        url += '/';
      }
      url += Tiger.Ajax.encode(this.id);
      args.unshift(url);
      return args.join('/');
    }
  };

  Extend = {
    ajax: function() {
      return new Collection(this);
    },
    url: function() {
      var args;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      args.unshift(this.className.toLowerCase() + 's');
      args.unshift(Model.host);
      return args.join('/');
    }
  };

  Model.Ajax = {
    extended: function() {
      this.fetch(this.ajaxFetch);
      this.change(this.ajaxChange);
      this.extend(Extend);
      return this.include(Include);
    },
    ajaxFetch: function() {
      var _ref;
      return (_ref = this.ajax()).fetch.apply(_ref, arguments);
    },
    ajaxChange: function(record, type, options) {
      if (options == null) {
        options = {};
      }
      if (options.ajax === false) {
        return;
      }
      return record.ajax()[type](options.ajax, options);
    }
  };

  Model.Ajax.Methods = {
    extended: function() {
      this.extend(Extend);
      return this.include(Include);
    }
  };

  Ajax.defaults = Base.prototype.defaults;

  Ajax.Base = Base;

  Ajax.Singleton = Singleton;

  Ajax.Collection = Collection;

  Spine.Ajax = Ajax;

  Spine.Ajax.ModelAdapter = Ajax;

  Spine.Ajax.Q = Base;

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Ajax;
  }

}).call(this);


},{"iced-runtime":30,"spine":"spine"}],9:[function(require,module,exports){
(function() {
  var Spine, awaitAjax, iced, __iced_k, __iced_k_noop;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = this.Spine || require("spine");

  awaitAjax = {
    awaitAjax: function(options, cb, queue) {
      var data, rv, status, statusText, xhr, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      if (queue == null) {
        queue = false;
      }
      rv = new iced.Rendezvous();
      options.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              data = arguments[0];
              statusText = arguments[1];
              return xhr = arguments[2];
            };
          };
        })(this)(),
        lineno: 7,
        context: __iced_deferrals
      });
      options.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              xhr = arguments[0];
              statusText = arguments[1];
              return data = arguments[2];
            };
          };
        })(this)(),
        lineno: 8,
        context: __iced_deferrals
      });
      if (queue) {
        this.Q.ajaxQueue(options);
      } else {
        new $.ajax(options);
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/spine.awaitajax.iced"
          });
          rv.wait(__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return status = arguments[0];
              };
            })(),
            lineno: 13
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return cb(status, xhr, statusText, data);
        };
      })(this));
    },
    awaitGet: function(options, cb, queue) {
      options.method = 'GET';
      return this.awaitAjax(options, cb, queue);
    },
    awaitPost: function(options, cb, queue) {
      options.method = 'GET';
      return this.awaitAjax(options, cb, queue);
    },
    awaitQueuedAjax: function(options, cb) {
      return this.awaitAjax(options, cb, true);
    },
    awaitQueuedGet: function(options, cb) {
      return this.awaitGet(options, cb, true);
    },
    awaitQueuedPost: function(options, cb) {
      return this.awaitPost(options, cb, true);
    }
  };

  Spine.Class.extend.call(Spine.Ajax, awaitAjax);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = awaitAjax;
  }

}).call(this);


},{"iced-runtime":30,"spine":"spine"}],10:[function(require,module,exports){
(function() {
  var Spine, exampleList, examples, iced, loadExample, name, path, __iced_k, __iced_k_noop, _fn;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = require("spine");

  loadExample = function(url, autocb) {
    var data, status, statusText, xhr, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = autocb;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/home/charles/source/pixijs-playground/app/models/examples.iced"
        });
        Spine.Ajax.awaitGet({
          url: url
        }, __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              status = arguments[0];
              xhr = arguments[1];
              statusText = arguments[2];
              return data = arguments[3];
            };
          })(),
          lineno: 4
        }));
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        switch (status) {
          case "error":
            autocb("Error " + statusText + ": " + data);
            return;
          case "success":
            autocb(data);
            return;
        }
      };
    })(this));
  };

  exampleList = {
    bunny: "./examples/bunny.coffee",
    "bunny-short": "./examples/bunny-short.coffee",
    dragging: "./examples/dragging.coffee",
    balls: "./examples/balls.coffee",
    bunnymark: "./examples/bunnymark.coffee",
    morph: "./examples/morph.coffee",
    primitives: "./examples/primitives.coffee",
    rendertexture: "./examples/rendertexture.coffee",
    text: "./examples/text.iced",
    filters: "./examples/filters.coffee"
  };

  examples = {};

  _fn = function(path) {
    return examples[name] = function(cb) {
      return loadExample(path, cb);
    };
  };
  for (name in exampleList) {
    path = exampleList[name];
    _fn(path);
  }

  module.exports = examples;

}).call(this);


},{"iced-runtime":30,"spine":"spine"}],11:[function(require,module,exports){
(function() {
  var Console, Editor, Playground, Spine, Stage, emoji, escapeHTML, examples,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  require('./lib/setup');

  emoji = require('emoji-images');

  Spine = require('spine');

  Stage = require('./controllers/stage');

  Console = require('./controllers/console');

  Editor = require('./controllers/editor');

  examples = require('./models/examples');

  escapeHTML = function(s) {
    return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
  };

  Playground = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Playground, _super);

    Playground.prototype.logPrefix = "(Playground:App)";

    DEFAULT_SETTINGS = {
      example: "bunnymark",
      lang: "coffee"
    };

    Playground.prototype.elements = {
      "aside#output": "output",
      "section.playground": "playground",
      "button.refresh-playground": "buttonRefreshPlayground"
    };

    Playground.prototype.refreshPlayground = function() {
      var button;
      button = $("button.run");
      if (button.is(".selected")) {
        button.trigger("click", {
          target: button[0]
        });
      }
      this.stage.refresh();
      return this.$(".dg.main").add(".counter").remove();
    };

    Playground.prototype.selectExample = function(e) {
      return this.editor.render($(e.target).val());
    };

    Playground.prototype.mouseenterPlaygroundRefresh = function() {
      if (this.stage) {
        return this.buttonRefreshPlayground.fadeIn(180);
      }
    };

    Playground.prototype.mouseenterKeepPlaygroundRefresh = function() {
      return this.buttonRefreshPlayground.stop(true).fadeTo(1, 1);
    };

    Playground.prototype.mouseleavePlaygroundRefresh = function() {
      return this.buttonRefreshPlayground.fadeOut(180);
    };

    Playground.prototype.events = {
      "click button.refresh-playground": "refreshPlayground",
      "change select.examples": "selectExample",
      "mouseenter section.playground": "mouseenterPlaygroundRefresh",
      "mouseenter button.refresh-playground": "mouseenterKeepPlaygroundRefresh",
      "mouseleave section.playground": "mouseleavePlaygroundRefresh"
    };

    function Playground(options, settings) {
      var examplelist, k, name, v, _ref;
      if (settings == null) {
        settings = {};
      }
      Playground.__super__.constructor.apply(this, arguments);
      this.log("initializing");
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
          switch (k) {
            case "script":
              (function(v) {
                return examples["local-saved"] = function(cb) {
                  return cb(v);
                };
              })(v);
          }
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
      examplelist = (function() {
        var _results;
        _results = [];
        for (name in examples) {
          if (!__hasProp.call(examples, name)) continue;
          _results.push(name);
        }
        return _results;
      })();
      this.render(examplelist, this.settings.example);
    }

    Playground.prototype.initStage = function() {
      if (this.stage == null) {
        this.stage = new Stage({
          el: this.playground
        });
      }
      this.stage.showStats();
      return this.buttonRefreshPlayground.show();
    };

    Playground.prototype.render = function(examplelist, example) {
      if (examplelist == null) {
        examplelist = [];
      }
      this.view = (require("./views/templates")).index({
        examples: examplelist,
        example: example
      });
      this.view = emoji(this.view, "images/emoji", 20);
      this.html(this.view);
      this.console = new Console({
        el: this.output,
        input: this.$("input.repl")
      });
      this.editor = new Editor({
        el: this.el,
        examples: examples,
        console: this.console
      });
      this.editor.on("presave", this.proxy(this.initStage));
      this.editor.on("langchange", this.console.proxy(this.console.lang));
      this.editor.lang(this.settings.lang);
      if (this.stage) {
        this.refreshPlayground();
      }
      if (!(this.settings.script && this.settings.script.trim() !== "")) {
        return this.editor.render(example);
      }
    };

    Playground.prototype.langChange = function(name) {
      return this.settings.lang = name;
    };

    return Playground;

  })(Spine.Controller);

  module.exports = Playground;

}).call(this);


},{"./controllers/console":1,"./controllers/editor":2,"./controllers/stage":3,"./lib/setup":7,"./models/examples":10,"./views/templates":12,"emoji-images":17,"spine":"spine"}],12:[function(require,module,exports){
var jade = require('@lukekarrys/jade-runtime');

var templatizer = {};



// help.jade compiled template
templatizer["help"] = function tmpl_help() {
    return '<aside id="help"><h4>Editor</h4><dl><dt>:icecream:</dt><dd>switch code to vanilla JS (compiles)</dd><dt>:coffee:</dt><dd>switch code to Iced CoffeeScript (does not compile)</dd><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Refresh example from CoffeeScript source</dd><dt><button class="glyphicon glyphicon-floppy-disk"></button></dt><dd>Save script and assets to in-browser Local Storage</dd></dl><h4>Stage/Canvas</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Remove children from stage (and stop animation)</dd></dl><h4>Console</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Clear console</dd><dt>:arrow_up::arrow_down:</dt><dd>Browse REPL history</dd><dt>:leftwards_arrow_with_hook:</dt><dd>Run command</dd></dl><h4>Global variables</h4><dl class="globals"><dt>app</dt><dd>instance of this pixijs-playground webapp</dd><dt>stats</dt><dd>instance of Mr. Doob\'s&nbsp;<a href="https://github.com/mrdoob/stats.js">stats.js</a></dd><dt>frame</dt><dd>id of animation frame (useful with&nbsp;<tt>cancelAnimationFrame(frame)</tt>)</dd><dt>stage</dt><dd>current instance of&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/Stage.html">PIXI.Stage</a>&nbsp;(when running)</dd><dt>renderer</dt><dd>current instance of either&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/WebGLRenderer.html">PIXI.WebGLRenderer</a>&nbsp;or&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/CanvasRenderer.html">PIXI.CanvasRenderer</a>, depending on the result of <tt>PIXI.autoDetectRenderer</tt> (when running)</dd><dt>ani</dt><dd><em>(function)</em> Animation Loop wrapper. Starts/ends stats, calls frame fn,\nrenders frame to stage, and loops.<pre>ani: (loopfn) ->\n  recursiveloop = ->\n    @stats.begin()\n    loopfn()\n    @renderer.render @stage\n    window.frame = requestAnimFrame recursiveloop\n    @stats.end()\n  window.frame = requestAnimFrame recursiveloop</pre></dd><a href="https://github.com/nextorigin/pixijs-playground" class="forkme"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/></a></dl></aside>';
};

// index.jade compiled template
templatizer["index"] = function tmpl_index(locals) {
    var buf = [];
    var jade_mixins = {};
    var jade_interp;
    var locals_for_with = locals || {};
    (function(example, examples, undefined) {
        buf.push('<header><h2>Pixi.js Playground</h2></header><section class="playground"></section><button class="refresh-playground glyphicon glyphicon-refresh"></button><aside id="output"></aside><input type="text" class="repl"/><span class="console-label">Console</span><textarea value="// Pixi.js Playground" class="sandbox"></textarea><select class="examples">');
        (function() {
            var $$obj = examples;
            if ("number" == typeof $$obj.length) {
                for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
                    var name = $$obj[$index];
                    buf.push("<option" + jade.attr("value", name, true, false) + jade.attr("selected", example == name, true, false) + ">" + jade.escape((jade_interp = name) == null ? "" : jade_interp) + "</option>");
                }
            } else {
                var $$l = 0;
                for (var $index in $$obj) {
                    $$l++;
                    var name = $$obj[$index];
                    buf.push("<option" + jade.attr("value", name, true, false) + jade.attr("selected", example == name, true, false) + ">" + jade.escape((jade_interp = name) == null ? "" : jade_interp) + "</option>");
                }
            }
        }).call(this);
        buf.push('</select><button class="run">Run!</button><nav class="sandbox"><button class="help glyphicon glyphicon-question-sign"></button><button class="save glyphicon glyphicon-floppy-disk"></button><button class="langswitch-coffee selected">:coffee:</button><button class="langswitch-vanilla">:icecream:</button><button class="refresh-example glyphicon glyphicon-refresh"></button></nav><aside id="help"><h4>Editor</h4><dl><dt>:icecream:</dt><dd>switch code to vanilla JS (compiles)</dd><dt>:coffee:</dt><dd>switch code to Iced CoffeeScript (does not compile)</dd><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Refresh example from CoffeeScript source</dd><dt><button class="glyphicon glyphicon-floppy-disk"></button></dt><dd>Save script and assets to in-browser Local Storage</dd></dl><h4>Stage/Canvas</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Remove children from stage (and stop animation)</dd></dl><h4>Console</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Clear console</dd><dt>:arrow_up::arrow_down:</dt><dd>Browse REPL history</dd><dt>:leftwards_arrow_with_hook:</dt><dd>Run command</dd></dl><h4>Global variables</h4><dl class="globals"><dt>app</dt><dd>instance of this pixijs-playground webapp</dd><dt>stats</dt><dd>instance of Mr. Doob\'s&nbsp;<a href="https://github.com/mrdoob/stats.js">stats.js</a></dd><dt>frame</dt><dd>id of animation frame (useful with&nbsp;<tt>cancelAnimationFrame(frame)</tt>)</dd><dt>stage</dt><dd>current instance of&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/Stage.html">PIXI.Stage</a>&nbsp;(when running)</dd><dt>renderer</dt><dd>current instance of either&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/WebGLRenderer.html">PIXI.WebGLRenderer</a>&nbsp;or&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/CanvasRenderer.html">PIXI.CanvasRenderer</a>, depending on the result of <tt>PIXI.autoDetectRenderer</tt> (when running)</dd><dt>ani</dt><dd><em>(function)</em> Animation Loop wrapper. Starts/ends stats, calls frame fn,\nrenders frame to stage, and loops.<pre>ani: (loopfn) ->\n  recursiveloop = ->\n    @stats.begin()\n    loopfn()\n    @renderer.render @stage\n    window.frame = requestAnimFrame recursiveloop\n    @stats.end()\n  window.frame = requestAnimFrame recursiveloop</pre></dd><a href="https://github.com/nextorigin/pixijs-playground" class="forkme"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/></a></dl></aside><a id="pixi" href="//pixijs.com"></a><footer><h3>drag files here</h3><span>&copy; 2013 - 2016&nbsp;<a href="http://nextorig.in">Next Origin</a></span></footer>');
    }).call(this, "example" in locals_for_with ? locals_for_with.example : typeof example !== "undefined" ? example : undefined, "examples" in locals_for_with ? locals_for_with.examples : typeof examples !== "undefined" ? examples : undefined, "undefined" in locals_for_with ? locals_for_with.undefined : typeof undefined !== "undefined" ? undefined : undefined);
    return buf.join("");
};


module.exports = templatizer;

},{"@lukekarrys/jade-runtime":13}],13:[function(require,module,exports){
'use strict';

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = function merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = merge(attrs, a[i]);
    }
    return attrs;
  }
  var ac = a['class'];
  var bc = b['class'];

  if (ac || bc) {
    ac = ac || [];
    bc = bc || [];
    if (!Array.isArray(ac)) ac = [ac];
    if (!Array.isArray(bc)) bc = [bc];
    a['class'] = ac.concat(bc).filter(nulls);
  }

  for (var key in b) {
    if (key != 'class') {
      a[key] = b[key];
    }
  }

  return a;
};

/**
 * Filter null `val`s.
 *
 * @param {*} val
 * @return {Boolean}
 * @api private
 */

function nulls(val) {
  return val != null && val !== '';
}

/**
 * join array as classes.
 *
 * @param {*} val
 * @return {String}
 */
exports.joinClasses = joinClasses;
function joinClasses(val) {
  return (Array.isArray(val) ? val.map(joinClasses) :
    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :
    [val]).filter(nulls).join(' ');
}

/**
 * Render the given classes.
 *
 * @param {Array} classes
 * @param {Array.<Boolean>} escaped
 * @return {String}
 */
exports.cls = function cls(classes, escaped) {
  var buf = [];
  for (var i = 0; i < classes.length; i++) {
    if (escaped && escaped[i]) {
      buf.push(exports.escape(joinClasses([classes[i]])));
    } else {
      buf.push(joinClasses(classes[i]));
    }
  }
  var text = joinClasses(buf);
  if (text.length) {
    return ' class="' + text + '"';
  } else {
    return '';
  }
};


exports.style = function (val) {
  if (val && typeof val === 'object') {
    return Object.keys(val).map(function (style) {
      return style + ':' + val[style];
    }).join(';');
  } else {
    return val;
  }
};
/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = function attr(key, val, escaped, terse) {
  if (key === 'style') {
    val = exports.style(val);
  }
  if ('boolean' == typeof val || null == val) {
    if (val) {
      return ' ' + (terse ? key : key + '="' + key + '"');
    } else {
      return '';
    }
  } else if (0 == key.indexOf('data') && 'string' != typeof val) {
    if (JSON.stringify(val).indexOf('&') !== -1) {
      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +
                   'will be escaped to `&amp;`');
    };
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will eliminate the double quotes around dates in ' +
                   'ISO form after 2.0.0');
    }
    return ' ' + key + "='" + JSON.stringify(val).replace(/'/g, '&apos;') + "'";
  } else if (escaped) {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + exports.escape(val) + '"';
  } else {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + val + '"';
  }
};

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} escaped
 * @return {String}
 */
exports.attrs = function attrs(obj, terse){
  var buf = [];

  var keys = Object.keys(obj);

  if (keys.length) {
    for (var i = 0; i < keys.length; ++i) {
      var key = keys[i]
        , val = obj[key];

      if ('class' == key) {
        if (val = joinClasses(val)) {
          buf.push(' ' + key + '="' + val + '"');
        }
      } else {
        buf.push(exports.attr(key, val, false, terse));
      }
    }
  }

  return buf.join('');
};

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var jade_encode_html_rules = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;'
};
var jade_match_html = /[&<>"]/g;

function jade_encode_char(c) {
  return jade_encode_html_rules[c] || c;
}

exports.escape = jade_escape;
function jade_escape(html){
  var result = String(html).replace(jade_match_html, jade_encode_char);
  if (result === '' + html) return html;
  else return result;
};

/**
 * Re-throw the given `err` in context to the
 * the jade in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @api private
 */

exports.rethrow = function rethrow(err, filename, lineno, str){
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  try {
    str = str || require('fs').readFileSync(filename, 'utf8')
  } catch (ex) {
    rethrow(err, null, lineno)
  }
  var context = 3
    , lines = str.split('\n')
    , start = Math.max(lineno - context, 0)
    , end = Math.min(lines.length, lineno + context);

  // Error context
  var context = lines.slice(start, end).map(function(line, i){
    var curr = i + start + 1;
    return (curr == lineno ? '  > ' : '    ')
      + curr
      + '| '
      + line;
  }).join('\n');

  // Alter exception message
  err.path = filename;
  err.message = (filename || 'Jade') + ':' + lineno
    + '\n' + context + '\n\n' + err.message;
  throw err;
};

exports.DebugItem = function DebugItem(lineno, filename) {
  this.lineno = lineno;
  this.filename = filename;
}
},{"fs":14}],14:[function(require,module,exports){

},{}],15:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
/*
Based off sources from the following codebases:
https://github.com/pickhardt/coffeescript-codemirror-mode
https://github.com/xixixao/TeaTable/blob/master/scripts/compilers/icedcoffeescript/highlighter.coffee
*/


(function() {
  var CodeMirrorIcedCoffeeScript = function (conf) {
    var ERRORCLASS, anyIs, boundaryToken, classIdentifiers, commonConstants, commonKeywords, constantIdentifiers, constants, dedent, doubleDelimiters, doubleOperators, field, functionDeclaration, functionIdentifier, icedKeywords, identifiers, indent, indentKeywords, keywords, longComment, otherKeywords, parenConstructors, regexPrefixes, regexToken, simpleTokenMatcher, singleDelimiters, singleOperators, stringPrefixes, tokenBase, tokenFactory, tokenLexer, tripleDelimiters, wordOperators, wordRegexp;
    ERRORCLASS = 'error';
    wordRegexp = function(words) {
      return new RegExp("^((" + words.join(")|(") + "))\\b");
    };
    singleOperators = new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]");
    singleDelimiters = new RegExp("^[\\(\\)@,`;\\.]");
    doubleOperators = new RegExp("^((=)|(:)|(->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))");
    doubleDelimiters = new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=)|(&&=)|(\\||=))");
    tripleDelimiters = new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))");
    parenConstructors = new RegExp("^[\\[\\]\\{\\}]");
    constantIdentifiers = new RegExp("^[_A-Z$][_A-Z$0-9]+\\b");
    classIdentifiers = new RegExp("^[_A-Z$][_A-Za-z$0-9]*");
    identifiers = new RegExp("^[_a-z$][_A-Za-z$0-9]*");
    field = new RegExp("^@[_A-Za-z$][_A-Za-z$0-9]*");
    functionIdentifier = new RegExp("^[_a-z$][_A-Za-z$0-9]*\\s?(:|=)\\s?(\\([_A-Za-z$0-9@,=\\.\\[\\]\\s]*\\)\\s*)?((->)|(=>))");
    functionDeclaration = new RegExp("^(\\([_A-Za-z$0-9@,=\\.\\[\\]\\s]*\\)\\s*)?((->)|(=>))");
    wordOperators = wordRegexp(['and', 'or', 'not', 'is', 'isnt', 'in', 'instanceof', 'typeof']);
    indentKeywords = ['for', 'while', 'loop', 'if', 'unless', 'else', 'switch', 'try', 'catch', 'finally', 'class'];
    commonKeywords = ['break', 'by', 'continue', 'delete', 'do', 'in', 'of', 'new', 'return', 'then', 'throw', 'when', 'until', 'extends'];
    otherKeywords = wordRegexp(['debugger', 'this']);
    icedKeywords = wordRegexp(['await', 'defer']);
    keywords = wordRegexp(indentKeywords.concat(commonKeywords));
    indentKeywords = wordRegexp(indentKeywords);
    stringPrefixes = new RegExp("^('{3}|\"{3}|['\"])");
    regexPrefixes = new RegExp("^(/{3}|/)");
    commonConstants = ["Infinity", "NaN", "undefined", "null", "true", "false", "on", "off", "yes", "no"];
    constants = wordRegexp(commonConstants);
    tokenBase = function(stream, state) {
      var ch, floatLiteral, lineOffset, scopeOffset, token;
      if (stream.sol()) {
        scopeOffset = state.scopes[0].offset;
        if (stream.eatSpace()) {
          lineOffset = stream.indentation();
          if (lineOffset > scopeOffset) {
            return 'indent';
          } else if (lineOffset < scopeOffset) {
            return 'dedent';
          }
          return null;
        } else if (scopeOffset > 0) {
          dedent(stream, state);
        }
      }
      if (stream.eatSpace()) {
        return null;
      }
      ch = stream.peek();
      if (stream.match("###")) {
        state.tokenize = longComment;
        return state.tokenize(stream, state);
      }
      if (ch === "#") {
        stream.skipToEnd();
        return "comment";
      }
      if (stream.match(/^-?[0-9\.]/, false)) {
        floatLiteral = false;
        if ((stream.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)) || (stream.match(/^-?\d+\.\d*/)) || (stream.match(/^-?\.\d+/))) {
          floatLiteral = true;
        }
        if (floatLiteral) {
          if (stream.peek() === ".") {
            stream.backUp(1);
          }
          return "number";
        }
        if ((stream.match(/^-?0x[0-9a-f]+/i)) || (stream.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)) || (stream.match(/^-?0(?![\dx])/i))) {
          return "number";
        }
      }
      if (stream.match(stringPrefixes)) {
        state.tokenize = tokenFactory(stream.current(), "string");
        return state.tokenize(stream, state);
      }
      if (stream.match(regexPrefixes)) {
        if (stream.current() !== "/" || stream.match(/^.*\//, false)) {
          state.tokenize = regexToken(stream.current(), "string-2");
          return state.tokenize(stream, state);
        } else {
          stream.backUp(1);
        }
      }
      if (stream.match(functionIdentifier, false)) {
        stream.match(identifiers);
        return "functionid";
      }
      token = simpleTokenMatcher(stream, ["functiondec", functionDeclaration, "field", field, "operator", tripleDelimiters, doubleDelimiters, "operator", doubleOperators, singleOperators, wordOperators, "punctuation", singleDelimiters, "atom", constants, "keyword", keywords, "keyword2", otherKeywords, "keyword3", icedKeywords, "constructor", parenConstructors, "constant", constantIdentifiers, "classname", classIdentifiers, "variable", identifiers]);
      if (token) {
        return token;
      }
      stream.next();
      return ERRORCLASS;
    };
    simpleTokenMatcher = function(stream, keysForPatterns) {
      var item, token, tokenMatches, _i, _len;
      token = "";
      tokenMatches = false;
      for (_i = 0, _len = keysForPatterns.length; _i < _len; _i++) {
        item = keysForPatterns[_i];
        if (typeof item === 'string') {
          if (tokenMatches) {
            break;
          }
          token = item;
          tokenMatches = false;
        } else {
          tokenMatches || (tokenMatches = stream.match(item));
        }
      }
      if (tokenMatches) {
        return token;
      } else {
        return null;
      }
    };
    tokenFactory = function(delimiter, outclass) {
      return boundaryToken(delimiter, outclass);
    };
    regexToken = function(delimiter, outclass) {
      return boundaryToken(delimiter, outclass, function(stream) {
        return stream.match(/^[igm]*\b/);
      });
    };
    boundaryToken = function(delimiter, outclass, suffix) {
      var singleline;
      singleline = delimiter.length === 1;
      return function(stream, state) {
        while (!stream.eol()) {
          stream.eatWhile(/[^'"\/\\]/);
          if (stream.eat("\\")) {
            stream.next();
            if (singleline && stream.eol()) {
              return outclass;
            }
          } else if (stream.match(delimiter)) {
            state.tokenize = tokenBase;
            if (suffix) {
              suffix(stream);
            }
            return outclass;
          } else {
            stream.eat(/['"\/]/);
          }
        }
        if (singleline) {
          if (conf.mode.singleLineStringErrors) {
            outclass = ERRORCLASS;
          } else {
            state.tokenize = tokenBase;
          }
        }
        return outclass;
      };
    };
    longComment = function(stream, state) {
      while (!stream.eol()) {
        stream.eatWhile(/[^#]/);
        if (stream.match("###")) {
          state.tokenize = tokenBase;
          break;
        }
        stream.eatWhile("#");
      }
      return "comment";
    };
    indent = function(stream, state, type) {
      var indentUnit, scope, _i, _len, _ref;
      type = type || "coffee";
      indentUnit = 0;
      if (type === "coffee") {
        _ref = state.scopes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          scope = _ref[_i];
          if (scope.type === "coffee") {
            indentUnit = scope.offset + conf.indentUnit;
            break;
          }
        }
      } else {
        indentUnit = stream.column() + stream.current().length;
      }
      return state.scopes.unshift({
        offset: indentUnit,
        type: type
      });
    };
    dedent = function(stream, state) {
      var i, scope, _i, _indent, _indent_index, _len, _ref;
      if (state.scopes.length === 1) {
        return;
      }
      if (state.scopes[0].type === "coffee") {
        _indent = stream.indentation();
        _indent_index = -1;
        _ref = state.scopes;
        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
          scope = _ref[i];
          if (_indent === scope.offset) {
            _indent_index = i;
            break;
          }
        }
        if (_indent_index === -1) {
          return true;
        }
        while (state.scopes[0].offset !== _indent) {
          state.scopes.shift();
        }
        return false;
      } else {
        state.scopes.shift();
        return false;
      }
    };
    tokenLexer = function(stream, state) {
      var current, delimiter_index, style;
      style = state.tokenize(stream, state);
      current = stream.current();
      if (current === ".") {
        style = state.tokenize(stream, state);
        current = stream.current();
        if (anyIs(["variable", "constant", "classname", "functionid"], style)) {
          return style;
        } else {
          return ERRORCLASS;
        }
      }
      if (current === "@") {
        stream.eat("@");
        return "keyword";
      }
      if (current === "return") {
        state.dedent += 1;
      }
      if (((current === "->" || current === "=>") && !state.lambda && state.scopes[0].type === "coffee" && stream.peek() === "") || style === "indent") {
        indent(stream, state);
      }
      delimiter_index = "[({".indexOf(current);
      if (delimiter_index !== -1) {
        indent(stream, state, "])}".slice(delimiter_index, delimiter_index + 1));
      }
      if (indentKeywords.exec(current)) {
        indent(stream, state);
      }
      if (current === "then") {
        dedent(stream, state);
      }
      if (style === "dedent" && dedent(stream, state)) {
        return ERRORCLASS;
      }
      delimiter_index = "])}".indexOf(current);
      if (delimiter_index !== -1 && dedent(stream, state)) {
        return ERRORCLASS;
      }
      if (state.dedent > 0 && stream.eol() && state.scopes[0].type === "coffee") {
        if (state.scopes.length > 1) {
          state.scopes.shift();
        }
        state.dedent -= 1;
      }
      return style;
    };
    anyIs = function(list, what) {
      var item, _i, _len;
      for (_i = 0, _len = list.length; _i < _len; _i++) {
        item = list[_i];
        if (item === what) {
          return true;
        }
      }
      return false;
    };
    return {
      startState: function(basecolumn) {
        return {
          tokenize: tokenBase,
          scopes: [
            {
              offset: basecolumn || 0,
              type: "coffee"
            }
          ],
          lastToken: null,
          lambda: false,
          dedent: 0
        };
      },
      token: function(stream, state) {
        var style;
        style = tokenLexer(stream, state);
        state.lastToken = {
          style: style,
          content: stream.current()
        };
        if (stream.eol() && stream.lambda) {
          state.lambda = false;
        }
        return style;
      },
      indent: function(state, textAfter) {
        if (state.tokenize !== tokenBase) {
          return 0;
        }
        return state.scopes[0].offset;
      }
    };
  };

  if (!CodeMirror && !window.CodeMirror) var CodeMirror = window.CodeMirror = require("codemirror");
  CodeMirror.defineMode("icedcoffeescript", CodeMirrorIcedCoffeeScript);
  CodeMirror.defineMIME("text/x-icedcoffeescript", "icedcoffeescript");
  if (typeof exports == "object" && typeof module == "object") module.exports = CodeMirrorIcedCoffeeScript;

}).call(this);

},{"codemirror":16}],16:[function(require,module,exports){
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// This is CodeMirror (http://codemirror.net), a code editor
// implemented in JavaScript on top of the browser's DOM.
//
// You can find some technical background for some of the code below
// at http://marijnhaverbeke.nl/blog/#cm-internals .

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    module.exports = mod();
  else if (typeof define == "function" && define.amd) // AMD
    return define([], mod);
  else // Plain browser env
    (this || window).CodeMirror = mod();
})(function() {
  "use strict";

  // BROWSER SNIFFING

  // Kludges for bugs and behavior differences that can't be feature
  // detected are enabled based on userAgent etc sniffing.
  var userAgent = navigator.userAgent;
  var platform = navigator.platform;

  var gecko = /gecko\/\d/i.test(userAgent);
  var ie_upto10 = /MSIE \d/.test(userAgent);
  var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);
  var ie = ie_upto10 || ie_11up;
  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);
  var webkit = /WebKit\//.test(userAgent);
  var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(userAgent);
  var chrome = /Chrome\//.test(userAgent);
  var presto = /Opera\//.test(userAgent);
  var safari = /Apple Computer/.test(navigator.vendor);
  var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);
  var phantom = /PhantomJS/.test(userAgent);

  var ios = /AppleWebKit/.test(userAgent) && /Mobile\/\w+/.test(userAgent);
  // This is woefully incomplete. Suggestions for alternative methods welcome.
  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);
  var mac = ios || /Mac/.test(platform);
  var chromeOS = /\bCrOS\b/.test(userAgent);
  var windows = /win/i.test(platform);

  var presto_version = presto && userAgent.match(/Version\/(\d*\.\d*)/);
  if (presto_version) presto_version = Number(presto_version[1]);
  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }
  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X
  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
  var captureRightClick = gecko || (ie && ie_version >= 9);

  // Optimize some code when these features are not used.
  var sawReadOnlySpans = false, sawCollapsedSpans = false;

  // EDITOR CONSTRUCTOR

  // A CodeMirror instance represents an editor. This is the object
  // that user code is usually dealing with.

  function CodeMirror(place, options) {
    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);

    this.options = options = options ? copyObj(options) : {};
    // Determine effective options based on given values and defaults.
    copyObj(defaults, options, false);
    setGuttersForLineNumbers(options);

    var doc = options.value;
    if (typeof doc == "string") doc = new Doc(doc, options.mode, null, options.lineSeparator);
    this.doc = doc;

    var input = new CodeMirror.inputStyles[options.inputStyle](this);
    var display = this.display = new Display(place, doc, input);
    display.wrapper.CodeMirror = this;
    updateGutters(this);
    themeChanged(this);
    if (options.lineWrapping)
      this.display.wrapper.className += " CodeMirror-wrap";
    if (options.autofocus && !mobile) display.input.focus();
    initScrollbars(this);

    this.state = {
      keyMaps: [],  // stores maps added by addKeyMap
      overlays: [], // highlighting overlays, as added by addOverlay
      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info
      overwrite: false,
      delayingBlurEvent: false,
      focused: false,
      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode
      pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll
      selectingText: false,
      draggingText: false,
      highlight: new Delayed(), // stores highlight worker timeout
      keySeq: null,  // Unfinished key sequence
      specialChars: null
    };

    var cm = this;

    // Override magic textarea content restore that IE sometimes does
    // on our hidden textarea on reload
    if (ie && ie_version < 11) setTimeout(function() { cm.display.input.reset(true); }, 20);

    registerEventHandlers(this);
    ensureGlobalHandlers();

    startOperation(this);
    this.curOp.forceUpdate = true;
    attachDoc(this, doc);

    if ((options.autofocus && !mobile) || cm.hasFocus())
      setTimeout(bind(onFocus, this), 20);
    else
      onBlur(this);

    for (var opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))
      optionHandlers[opt](this, options[opt], Init);
    maybeUpdateLineNumberWidth(this);
    if (options.finishInit) options.finishInit(this);
    for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);
    endOperation(this);
    // Suppress optimizelegibility in Webkit, since it breaks text
    // measuring on line wrapping boundaries.
    if (webkit && options.lineWrapping &&
        getComputedStyle(display.lineDiv).textRendering == "optimizelegibility")
      display.lineDiv.style.textRendering = "auto";
  }

  // DISPLAY CONSTRUCTOR

  // The display handles the DOM integration, both for input reading
  // and content drawing. It holds references to DOM nodes and
  // display-related state.

  function Display(place, doc, input) {
    var d = this;
    this.input = input;

    // Covers bottom-right square when both scrollbars are present.
    d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
    d.scrollbarFiller.setAttribute("cm-not-content", "true");
    // Covers bottom of gutter when coverGutterNextToScrollbar is on
    // and h scrollbar is present.
    d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
    d.gutterFiller.setAttribute("cm-not-content", "true");
    // Will contain the actual code, positioned to cover the viewport.
    d.lineDiv = elt("div", null, "CodeMirror-code");
    // Elements are added to these to represent selection and cursors.
    d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
    d.cursorDiv = elt("div", null, "CodeMirror-cursors");
    // A visibility: hidden element used to find the size of things.
    d.measure = elt("div", null, "CodeMirror-measure");
    // When lines outside of the viewport are measured, they are drawn in this.
    d.lineMeasure = elt("div", null, "CodeMirror-measure");
    // Wraps everything that needs to exist inside the vertically-padded coordinate system
    d.lineSpace = elt("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],
                      null, "position: relative; outline: none");
    // Moved around its parent to cover visible view.
    d.mover = elt("div", [elt("div", [d.lineSpace], "CodeMirror-lines")], null, "position: relative");
    // Set to the height of the document, allowing scrolling.
    d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
    d.sizerWidth = null;
    // Behavior of elts with overflow: auto and padding is
    // inconsistent across browsers. This is used to ensure the
    // scrollable area is big enough.
    d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;");
    // Will contain the gutters, if any.
    d.gutters = elt("div", null, "CodeMirror-gutters");
    d.lineGutter = null;
    // Actual scrollable element.
    d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
    d.scroller.setAttribute("tabIndex", "-1");
    // The element in which the editor lives.
    d.wrapper = elt("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");

    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)
    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }
    if (!webkit && !(gecko && mobile)) d.scroller.draggable = true;

    if (place) {
      if (place.appendChild) place.appendChild(d.wrapper);
      else place(d.wrapper);
    }

    // Current rendered range (may be bigger than the view window).
    d.viewFrom = d.viewTo = doc.first;
    d.reportedViewFrom = d.reportedViewTo = doc.first;
    // Information about the rendered lines.
    d.view = [];
    d.renderedView = null;
    // Holds info about a single rendered line when it was rendered
    // for measurement, while not in view.
    d.externalMeasured = null;
    // Empty space (in pixels) above the view
    d.viewOffset = 0;
    d.lastWrapHeight = d.lastWrapWidth = 0;
    d.updateLineNumbers = null;

    d.nativeBarWidth = d.barHeight = d.barWidth = 0;
    d.scrollbarsClipped = false;

    // Used to only resize the line number gutter when necessary (when
    // the amount of lines crosses a boundary that makes its width change)
    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
    // Set to true when a non-horizontal-scrolling line widget is
    // added. As an optimization, line widget aligning is skipped when
    // this is false.
    d.alignWidgets = false;

    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;

    // Tracks the maximum line length so that the horizontal scrollbar
    // can be kept static when scrolling.
    d.maxLine = null;
    d.maxLineLength = 0;
    d.maxLineChanged = false;

    // Used for measuring wheel scrolling granularity
    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;

    // True when shift is held down.
    d.shift = false;

    // Used to track whether anything happened since the context menu
    // was opened.
    d.selForContextMenu = null;

    d.activeTouch = null;

    input.init(d);
  }

  // STATE UPDATES

  // Used to get the editor into a consistent state again when options change.

  function loadMode(cm) {
    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);
    resetModeState(cm);
  }

  function resetModeState(cm) {
    cm.doc.iter(function(line) {
      if (line.stateAfter) line.stateAfter = null;
      if (line.styles) line.styles = null;
    });
    cm.doc.frontier = cm.doc.first;
    startWorker(cm, 100);
    cm.state.modeGen++;
    if (cm.curOp) regChange(cm);
  }

  function wrappingChanged(cm) {
    if (cm.options.lineWrapping) {
      addClass(cm.display.wrapper, "CodeMirror-wrap");
      cm.display.sizer.style.minWidth = "";
      cm.display.sizerWidth = null;
    } else {
      rmClass(cm.display.wrapper, "CodeMirror-wrap");
      findMaxLine(cm);
    }
    estimateLineHeights(cm);
    regChange(cm);
    clearCaches(cm);
    setTimeout(function(){updateScrollbars(cm);}, 100);
  }

  // Returns a function that estimates the height of a line, to use as
  // first approximation until the line becomes visible (and is thus
  // properly measurable).
  function estimateHeight(cm) {
    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
    return function(line) {
      if (lineIsHidden(cm.doc, line)) return 0;

      var widgetsHeight = 0;
      if (line.widgets) for (var i = 0; i < line.widgets.length; i++) {
        if (line.widgets[i].height) widgetsHeight += line.widgets[i].height;
      }

      if (wrapping)
        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
      else
        return widgetsHeight + th;
    };
  }

  function estimateLineHeights(cm) {
    var doc = cm.doc, est = estimateHeight(cm);
    doc.iter(function(line) {
      var estHeight = est(line);
      if (estHeight != line.height) updateLineHeight(line, estHeight);
    });
  }

  function themeChanged(cm) {
    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") +
      cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
    clearCaches(cm);
  }

  function guttersChanged(cm) {
    updateGutters(cm);
    regChange(cm);
    setTimeout(function(){alignHorizontally(cm);}, 20);
  }

  // Rebuild the gutter elements, ensure the margin to the left of the
  // code matches their width.
  function updateGutters(cm) {
    var gutters = cm.display.gutters, specs = cm.options.gutters;
    removeChildren(gutters);
    for (var i = 0; i < specs.length; ++i) {
      var gutterClass = specs[i];
      var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + gutterClass));
      if (gutterClass == "CodeMirror-linenumbers") {
        cm.display.lineGutter = gElt;
        gElt.style.width = (cm.display.lineNumWidth || 1) + "px";
      }
    }
    gutters.style.display = i ? "" : "none";
    updateGutterSpace(cm);
  }

  function updateGutterSpace(cm) {
    var width = cm.display.gutters.offsetWidth;
    cm.display.sizer.style.marginLeft = width + "px";
  }

  // Compute the character length of a line, taking into account
  // collapsed ranges (see markText) that might hide parts, and join
  // other lines onto it.
  function lineLength(line) {
    if (line.height == 0) return 0;
    var len = line.text.length, merged, cur = line;
    while (merged = collapsedSpanAtStart(cur)) {
      var found = merged.find(0, true);
      cur = found.from.line;
      len += found.from.ch - found.to.ch;
    }
    cur = line;
    while (merged = collapsedSpanAtEnd(cur)) {
      var found = merged.find(0, true);
      len -= cur.text.length - found.from.ch;
      cur = found.to.line;
      len += cur.text.length - found.to.ch;
    }
    return len;
  }

  // Find the longest line in the document.
  function findMaxLine(cm) {
    var d = cm.display, doc = cm.doc;
    d.maxLine = getLine(doc, doc.first);
    d.maxLineLength = lineLength(d.maxLine);
    d.maxLineChanged = true;
    doc.iter(function(line) {
      var len = lineLength(line);
      if (len > d.maxLineLength) {
        d.maxLineLength = len;
        d.maxLine = line;
      }
    });
  }

  // Make sure the gutters options contains the element
  // "CodeMirror-linenumbers" when the lineNumbers option is true.
  function setGuttersForLineNumbers(options) {
    var found = indexOf(options.gutters, "CodeMirror-linenumbers");
    if (found == -1 && options.lineNumbers) {
      options.gutters = options.gutters.concat(["CodeMirror-linenumbers"]);
    } else if (found > -1 && !options.lineNumbers) {
      options.gutters = options.gutters.slice(0);
      options.gutters.splice(found, 1);
    }
  }

  // SCROLLBARS

  // Prepare DOM reads needed to update the scrollbars. Done in one
  // shot to minimize update/measure roundtrips.
  function measureForScrollbars(cm) {
    var d = cm.display, gutterW = d.gutters.offsetWidth;
    var docH = Math.round(cm.doc.height + paddingVert(cm.display));
    return {
      clientHeight: d.scroller.clientHeight,
      viewHeight: d.wrapper.clientHeight,
      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,
      viewWidth: d.wrapper.clientWidth,
      barLeft: cm.options.fixedGutter ? gutterW : 0,
      docHeight: docH,
      scrollHeight: docH + scrollGap(cm) + d.barHeight,
      nativeBarWidth: d.nativeBarWidth,
      gutterWidth: gutterW
    };
  }

  function NativeScrollbars(place, scroll, cm) {
    this.cm = cm;
    var vert = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
    var horiz = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
    place(vert); place(horiz);

    on(vert, "scroll", function() {
      if (vert.clientHeight) scroll(vert.scrollTop, "vertical");
    });
    on(horiz, "scroll", function() {
      if (horiz.clientWidth) scroll(horiz.scrollLeft, "horizontal");
    });

    this.checkedZeroWidth = false;
    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).
    if (ie && ie_version < 8) this.horiz.style.minHeight = this.vert.style.minWidth = "18px";
  }

  NativeScrollbars.prototype = copyObj({
    update: function(measure) {
      var needsH = measure.scrollWidth > measure.clientWidth + 1;
      var needsV = measure.scrollHeight > measure.clientHeight + 1;
      var sWidth = measure.nativeBarWidth;

      if (needsV) {
        this.vert.style.display = "block";
        this.vert.style.bottom = needsH ? sWidth + "px" : "0";
        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
        // A bug in IE8 can cause this value to be negative, so guard it.
        this.vert.firstChild.style.height =
          Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
      } else {
        this.vert.style.display = "";
        this.vert.firstChild.style.height = "0";
      }

      if (needsH) {
        this.horiz.style.display = "block";
        this.horiz.style.right = needsV ? sWidth + "px" : "0";
        this.horiz.style.left = measure.barLeft + "px";
        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
        this.horiz.firstChild.style.width =
          (measure.scrollWidth - measure.clientWidth + totalWidth) + "px";
      } else {
        this.horiz.style.display = "";
        this.horiz.firstChild.style.width = "0";
      }

      if (!this.checkedZeroWidth && measure.clientHeight > 0) {
        if (sWidth == 0) this.zeroWidthHack();
        this.checkedZeroWidth = true;
      }

      return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0};
    },
    setScrollLeft: function(pos) {
      if (this.horiz.scrollLeft != pos) this.horiz.scrollLeft = pos;
      if (this.disableHoriz) this.enableZeroWidthBar(this.horiz, this.disableHoriz);
    },
    setScrollTop: function(pos) {
      if (this.vert.scrollTop != pos) this.vert.scrollTop = pos;
      if (this.disableVert) this.enableZeroWidthBar(this.vert, this.disableVert);
    },
    zeroWidthHack: function() {
      var w = mac && !mac_geMountainLion ? "12px" : "18px";
      this.horiz.style.height = this.vert.style.width = w;
      this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none";
      this.disableHoriz = new Delayed;
      this.disableVert = new Delayed;
    },
    enableZeroWidthBar: function(bar, delay) {
      bar.style.pointerEvents = "auto";
      function maybeDisable() {
        // To find out whether the scrollbar is still visible, we
        // check whether the element under the pixel in the bottom
        // left corner of the scrollbar box is the scrollbar box
        // itself (when the bar is still visible) or its filler child
        // (when the bar is hidden). If it is still visible, we keep
        // it enabled, if it's hidden, we disable pointer events.
        var box = bar.getBoundingClientRect();
        var elt = document.elementFromPoint(box.left + 1, box.bottom - 1);
        if (elt != bar) bar.style.pointerEvents = "none";
        else delay.set(1000, maybeDisable);
      }
      delay.set(1000, maybeDisable);
    },
    clear: function() {
      var parent = this.horiz.parentNode;
      parent.removeChild(this.horiz);
      parent.removeChild(this.vert);
    }
  }, NativeScrollbars.prototype);

  function NullScrollbars() {}

  NullScrollbars.prototype = copyObj({
    update: function() { return {bottom: 0, right: 0}; },
    setScrollLeft: function() {},
    setScrollTop: function() {},
    clear: function() {}
  }, NullScrollbars.prototype);

  CodeMirror.scrollbarModel = {"native": NativeScrollbars, "null": NullScrollbars};

  function initScrollbars(cm) {
    if (cm.display.scrollbars) {
      cm.display.scrollbars.clear();
      if (cm.display.scrollbars.addClass)
        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);
    }

    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {
      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);
      // Prevent clicks in the scrollbars from killing focus
      on(node, "mousedown", function() {
        if (cm.state.focused) setTimeout(function() { cm.display.input.focus(); }, 0);
      });
      node.setAttribute("cm-not-content", "true");
    }, function(pos, axis) {
      if (axis == "horizontal") setScrollLeft(cm, pos);
      else setScrollTop(cm, pos);
    }, cm);
    if (cm.display.scrollbars.addClass)
      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
  }

  function updateScrollbars(cm, measure) {
    if (!measure) measure = measureForScrollbars(cm);
    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
    updateScrollbarsInner(cm, measure);
    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {
      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)
        updateHeightsInViewport(cm);
      updateScrollbarsInner(cm, measureForScrollbars(cm));
      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;
    }
  }

  // Re-synchronize the fake scrollbars with the actual size of the
  // content.
  function updateScrollbarsInner(cm, measure) {
    var d = cm.display;
    var sizes = d.scrollbars.update(measure);

    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px";
    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px";
    d.heightForcer.style.borderBottom = sizes.bottom + "px solid transparent"

    if (sizes.right && sizes.bottom) {
      d.scrollbarFiller.style.display = "block";
      d.scrollbarFiller.style.height = sizes.bottom + "px";
      d.scrollbarFiller.style.width = sizes.right + "px";
    } else d.scrollbarFiller.style.display = "";
    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
      d.gutterFiller.style.display = "block";
      d.gutterFiller.style.height = sizes.bottom + "px";
      d.gutterFiller.style.width = measure.gutterWidth + "px";
    } else d.gutterFiller.style.display = "";
  }

  // Compute the lines that are visible in a given viewport (defaults
  // the the current scroll position). viewport may contain top,
  // height, and ensure (see op.scrollToPos) properties.
  function visibleLines(display, doc, viewport) {
    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
    top = Math.floor(top - paddingTop(display));
    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;

    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and
    // forces those lines into the viewport (if possible).
    if (viewport && viewport.ensure) {
      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
      if (ensureFrom < from) {
        from = ensureFrom;
        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);
      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {
        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);
        to = ensureTo;
      }
    }
    return {from: from, to: Math.max(to, from + 1)};
  }

  // LINE NUMBERS

  // Re-align line numbers and gutter marks to compensate for
  // horizontal scrolling.
  function alignHorizontally(cm) {
    var display = cm.display, view = display.view;
    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;
    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
    var gutterW = display.gutters.offsetWidth, left = comp + "px";
    for (var i = 0; i < view.length; i++) if (!view[i].hidden) {
      if (cm.options.fixedGutter && view[i].gutter)
        view[i].gutter.style.left = left;
      var align = view[i].alignable;
      if (align) for (var j = 0; j < align.length; j++)
        align[j].style.left = left;
    }
    if (cm.options.fixedGutter)
      display.gutters.style.left = (comp + gutterW) + "px";
  }

  // Used to ensure that the line number gutter is still the right
  // size for the current document size. Returns true when an update
  // is needed.
  function maybeUpdateLineNumberWidth(cm) {
    if (!cm.options.lineNumbers) return false;
    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
    if (last.length != display.lineNumChars) {
      var test = display.measure.appendChild(elt("div", [elt("div", last)],
                                                 "CodeMirror-linenumber CodeMirror-gutter-elt"));
      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
      display.lineGutter.style.width = "";
      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;
      display.lineNumWidth = display.lineNumInnerWidth + padding;
      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
      display.lineGutter.style.width = display.lineNumWidth + "px";
      updateGutterSpace(cm);
      return true;
    }
    return false;
  }

  function lineNumberFor(options, i) {
    return String(options.lineNumberFormatter(i + options.firstLineNumber));
  }

  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,
  // but using getBoundingClientRect to get a sub-pixel-accurate
  // result.
  function compensateForHScroll(display) {
    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
  }

  // DISPLAY DRAWING

  function DisplayUpdate(cm, viewport, force) {
    var display = cm.display;

    this.viewport = viewport;
    // Store some values that we'll need later (but don't want to force a relayout for)
    this.visible = visibleLines(display, cm.doc, viewport);
    this.editorIsHidden = !display.wrapper.offsetWidth;
    this.wrapperHeight = display.wrapper.clientHeight;
    this.wrapperWidth = display.wrapper.clientWidth;
    this.oldDisplayWidth = displayWidth(cm);
    this.force = force;
    this.dims = getDimensions(cm);
    this.events = [];
  }

  DisplayUpdate.prototype.signal = function(emitter, type) {
    if (hasHandler(emitter, type))
      this.events.push(arguments);
  };
  DisplayUpdate.prototype.finish = function() {
    for (var i = 0; i < this.events.length; i++)
      signal.apply(null, this.events[i]);
  };

  function maybeClipScrollbars(cm) {
    var display = cm.display;
    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {
      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;
      display.heightForcer.style.height = scrollGap(cm) + "px";
      display.sizer.style.marginBottom = -display.nativeBarWidth + "px";
      display.sizer.style.borderRightWidth = scrollGap(cm) + "px";
      display.scrollbarsClipped = true;
    }
  }

  // Does the actual updating of the line display. Bails out
  // (returning false) when there is nothing to be done and forced is
  // false.
  function updateDisplayIfNeeded(cm, update) {
    var display = cm.display, doc = cm.doc;

    if (update.editorIsHidden) {
      resetView(cm);
      return false;
    }

    // Bail out if the visible area is already rendered and nothing changed.
    if (!update.force &&
        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&
        display.renderedView == display.view && countDirtyView(cm) == 0)
      return false;

    if (maybeUpdateLineNumberWidth(cm)) {
      resetView(cm);
      update.dims = getDimensions(cm);
    }

    // Compute a suitable new viewport (from & to)
    var end = doc.first + doc.size;
    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);
    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
    if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom);
    if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo);
    if (sawCollapsedSpans) {
      from = visualLineNo(cm.doc, from);
      to = visualLineEndNo(cm.doc, to);
    }

    var different = from != display.viewFrom || to != display.viewTo ||
      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
    adjustView(cm, from, to);

    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
    // Position the mover div to align with the current scroll position
    cm.display.mover.style.top = display.viewOffset + "px";

    var toUpdate = countDirtyView(cm);
    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))
      return false;

    // For big changes, we hide the enclosing element during the
    // update, since that speeds up the operations on most browsers.
    var focused = activeElt();
    if (toUpdate > 4) display.lineDiv.style.display = "none";
    patchDisplay(cm, display.updateLineNumbers, update.dims);
    if (toUpdate > 4) display.lineDiv.style.display = "";
    display.renderedView = display.view;
    // There might have been a widget with a focused element that got
    // hidden or updated, if so re-focus it.
    if (focused && activeElt() != focused && focused.offsetHeight) focused.focus();

    // Prevent selection and cursors from interfering with the scroll
    // width and height.
    removeChildren(display.cursorDiv);
    removeChildren(display.selectionDiv);
    display.gutters.style.height = display.sizer.style.minHeight = 0;

    if (different) {
      display.lastWrapHeight = update.wrapperHeight;
      display.lastWrapWidth = update.wrapperWidth;
      startWorker(cm, 400);
    }

    display.updateLineNumbers = null;

    return true;
  }

  function postUpdateDisplay(cm, update) {
    var viewport = update.viewport;

    for (var first = true;; first = false) {
      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {
        // Clip forced viewport to actual scrollable area.
        if (viewport && viewport.top != null)
          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};
        // Updated line heights might result in the drawn area not
        // actually covering the viewport. Keep looping until it does.
        update.visible = visibleLines(cm.display, cm.doc, viewport);
        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)
          break;
      }
      if (!updateDisplayIfNeeded(cm, update)) break;
      updateHeightsInViewport(cm);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      updateScrollbars(cm, barMeasure);
      setDocumentHeight(cm, barMeasure);
    }

    update.signal(cm, "update", cm);
    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {
      update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;
    }
  }

  function updateDisplaySimple(cm, viewport) {
    var update = new DisplayUpdate(cm, viewport);
    if (updateDisplayIfNeeded(cm, update)) {
      updateHeightsInViewport(cm);
      postUpdateDisplay(cm, update);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      updateScrollbars(cm, barMeasure);
      setDocumentHeight(cm, barMeasure);
      update.finish();
    }
  }

  function setDocumentHeight(cm, measure) {
    cm.display.sizer.style.minHeight = measure.docHeight + "px";
    cm.display.heightForcer.style.top = measure.docHeight + "px";
    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + "px";
  }

  // Read the actual heights of the rendered lines, and update their
  // stored heights to match.
  function updateHeightsInViewport(cm) {
    var display = cm.display;
    var prevBottom = display.lineDiv.offsetTop;
    for (var i = 0; i < display.view.length; i++) {
      var cur = display.view[i], height;
      if (cur.hidden) continue;
      if (ie && ie_version < 8) {
        var bot = cur.node.offsetTop + cur.node.offsetHeight;
        height = bot - prevBottom;
        prevBottom = bot;
      } else {
        var box = cur.node.getBoundingClientRect();
        height = box.bottom - box.top;
      }
      var diff = cur.line.height - height;
      if (height < 2) height = textHeight(display);
      if (diff > .001 || diff < -.001) {
        updateLineHeight(cur.line, height);
        updateWidgetHeight(cur.line);
        if (cur.rest) for (var j = 0; j < cur.rest.length; j++)
          updateWidgetHeight(cur.rest[j]);
      }
    }
  }

  // Read and store the height of line widgets associated with the
  // given line.
  function updateWidgetHeight(line) {
    if (line.widgets) for (var i = 0; i < line.widgets.length; ++i)
      line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;
  }

  // Do a bulk-read of the DOM positions and sizes needed to draw the
  // view, so that we don't interleave reading and writing to the DOM.
  function getDimensions(cm) {
    var d = cm.display, left = {}, width = {};
    var gutterLeft = d.gutters.clientLeft;
    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {
      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;
      width[cm.options.gutters[i]] = n.clientWidth;
    }
    return {fixedPos: compensateForHScroll(d),
            gutterTotalWidth: d.gutters.offsetWidth,
            gutterLeft: left,
            gutterWidth: width,
            wrapperWidth: d.wrapper.clientWidth};
  }

  // Sync the actual display DOM structure with display.view, removing
  // nodes for lines that are no longer in view, and creating the ones
  // that are not there yet, and updating the ones that are out of
  // date.
  function patchDisplay(cm, updateNumbersFrom, dims) {
    var display = cm.display, lineNumbers = cm.options.lineNumbers;
    var container = display.lineDiv, cur = container.firstChild;

    function rm(node) {
      var next = node.nextSibling;
      // Works around a throw-scroll bug in OS X Webkit
      if (webkit && mac && cm.display.currentWheelTarget == node)
        node.style.display = "none";
      else
        node.parentNode.removeChild(node);
      return next;
    }

    var view = display.view, lineN = display.viewFrom;
    // Loop over the elements in the view, syncing cur (the DOM nodes
    // in display.lineDiv) with the view as we go.
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (lineView.hidden) {
      } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet
        var node = buildLineElement(cm, lineView, lineN, dims);
        container.insertBefore(node, cur);
      } else { // Already drawn
        while (cur != lineView.node) cur = rm(cur);
        var updateNumber = lineNumbers && updateNumbersFrom != null &&
          updateNumbersFrom <= lineN && lineView.lineNumber;
        if (lineView.changes) {
          if (indexOf(lineView.changes, "gutter") > -1) updateNumber = false;
          updateLineForChanges(cm, lineView, lineN, dims);
        }
        if (updateNumber) {
          removeChildren(lineView.lineNumber);
          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
        }
        cur = lineView.node.nextSibling;
      }
      lineN += lineView.size;
    }
    while (cur) cur = rm(cur);
  }

  // When an aspect of a line changes, a string is added to
  // lineView.changes. This updates the relevant part of the line's
  // DOM structure.
  function updateLineForChanges(cm, lineView, lineN, dims) {
    for (var j = 0; j < lineView.changes.length; j++) {
      var type = lineView.changes[j];
      if (type == "text") updateLineText(cm, lineView);
      else if (type == "gutter") updateLineGutter(cm, lineView, lineN, dims);
      else if (type == "class") updateLineClasses(lineView);
      else if (type == "widget") updateLineWidgets(cm, lineView, dims);
    }
    lineView.changes = null;
  }

  // Lines with gutter elements, widgets or a background class need to
  // be wrapped, and have the extra elements added to the wrapper div
  function ensureLineWrapped(lineView) {
    if (lineView.node == lineView.text) {
      lineView.node = elt("div", null, null, "position: relative");
      if (lineView.text.parentNode)
        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
      lineView.node.appendChild(lineView.text);
      if (ie && ie_version < 8) lineView.node.style.zIndex = 2;
    }
    return lineView.node;
  }

  function updateLineBackground(lineView) {
    var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
    if (cls) cls += " CodeMirror-linebackground";
    if (lineView.background) {
      if (cls) lineView.background.className = cls;
      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }
    } else if (cls) {
      var wrap = ensureLineWrapped(lineView);
      lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
    }
  }

  // Wrapper around buildLineContent which will reuse the structure
  // in display.externalMeasured when possible.
  function getLineContent(cm, lineView) {
    var ext = cm.display.externalMeasured;
    if (ext && ext.line == lineView.line) {
      cm.display.externalMeasured = null;
      lineView.measure = ext.measure;
      return ext.built;
    }
    return buildLineContent(cm, lineView);
  }

  // Redraw the line's text. Interacts with the background and text
  // classes because the mode may output tokens that influence these
  // classes.
  function updateLineText(cm, lineView) {
    var cls = lineView.text.className;
    var built = getLineContent(cm, lineView);
    if (lineView.text == lineView.node) lineView.node = built.pre;
    lineView.text.parentNode.replaceChild(built.pre, lineView.text);
    lineView.text = built.pre;
    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
      lineView.bgClass = built.bgClass;
      lineView.textClass = built.textClass;
      updateLineClasses(lineView);
    } else if (cls) {
      lineView.text.className = cls;
    }
  }

  function updateLineClasses(lineView) {
    updateLineBackground(lineView);
    if (lineView.line.wrapClass)
      ensureLineWrapped(lineView).className = lineView.line.wrapClass;
    else if (lineView.node != lineView.text)
      lineView.node.className = "";
    var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
    lineView.text.className = textClass || "";
  }

  function updateLineGutter(cm, lineView, lineN, dims) {
    if (lineView.gutter) {
      lineView.node.removeChild(lineView.gutter);
      lineView.gutter = null;
    }
    if (lineView.gutterBackground) {
      lineView.node.removeChild(lineView.gutterBackground);
      lineView.gutterBackground = null;
    }
    if (lineView.line.gutterClass) {
      var wrap = ensureLineWrapped(lineView);
      lineView.gutterBackground = elt("div", null, "CodeMirror-gutter-background " + lineView.line.gutterClass,
                                      "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) +
                                      "px; width: " + dims.gutterTotalWidth + "px");
      wrap.insertBefore(lineView.gutterBackground, lineView.text);
    }
    var markers = lineView.line.gutterMarkers;
    if (cm.options.lineNumbers || markers) {
      var wrap = ensureLineWrapped(lineView);
      var gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " +
                                             (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px");
      cm.display.input.setUneditable(gutterWrap);
      wrap.insertBefore(gutterWrap, lineView.text);
      if (lineView.line.gutterClass)
        gutterWrap.className += " " + lineView.line.gutterClass;
      if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"]))
        lineView.lineNumber = gutterWrap.appendChild(
          elt("div", lineNumberFor(cm.options, lineN),
              "CodeMirror-linenumber CodeMirror-gutter-elt",
              "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: "
              + cm.display.lineNumInnerWidth + "px"));
      if (markers) for (var k = 0; k < cm.options.gutters.length; ++k) {
        var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];
        if (found)
          gutterWrap.appendChild(elt("div", [found], "CodeMirror-gutter-elt", "left: " +
                                     dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
      }
    }
  }

  function updateLineWidgets(cm, lineView, dims) {
    if (lineView.alignable) lineView.alignable = null;
    for (var node = lineView.node.firstChild, next; node; node = next) {
      var next = node.nextSibling;
      if (node.className == "CodeMirror-linewidget")
        lineView.node.removeChild(node);
    }
    insertLineWidgets(cm, lineView, dims);
  }

  // Build a line's DOM representation from scratch
  function buildLineElement(cm, lineView, lineN, dims) {
    var built = getLineContent(cm, lineView);
    lineView.text = lineView.node = built.pre;
    if (built.bgClass) lineView.bgClass = built.bgClass;
    if (built.textClass) lineView.textClass = built.textClass;

    updateLineClasses(lineView);
    updateLineGutter(cm, lineView, lineN, dims);
    insertLineWidgets(cm, lineView, dims);
    return lineView.node;
  }

  // A lineView may contain multiple logical lines (when merged by
  // collapsed spans). The widgets for all of them need to be drawn.
  function insertLineWidgets(cm, lineView, dims) {
    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);
    if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
      insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);
  }

  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
    if (!line.widgets) return;
    var wrap = ensureLineWrapped(lineView);
    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {
      var widget = ws[i], node = elt("div", [widget.node], "CodeMirror-linewidget");
      if (!widget.handleMouseEvents) node.setAttribute("cm-ignore-events", "true");
      positionLineWidget(widget, node, lineView, dims);
      cm.display.input.setUneditable(node);
      if (allowAbove && widget.above)
        wrap.insertBefore(node, lineView.gutter || lineView.text);
      else
        wrap.appendChild(node);
      signalLater(widget, "redraw");
    }
  }

  function positionLineWidget(widget, node, lineView, dims) {
    if (widget.noHScroll) {
      (lineView.alignable || (lineView.alignable = [])).push(node);
      var width = dims.wrapperWidth;
      node.style.left = dims.fixedPos + "px";
      if (!widget.coverGutter) {
        width -= dims.gutterTotalWidth;
        node.style.paddingLeft = dims.gutterTotalWidth + "px";
      }
      node.style.width = width + "px";
    }
    if (widget.coverGutter) {
      node.style.zIndex = 5;
      node.style.position = "relative";
      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + "px";
    }
  }

  // POSITION OBJECT

  // A Pos instance represents a position within the text.
  var Pos = CodeMirror.Pos = function(line, ch) {
    if (!(this instanceof Pos)) return new Pos(line, ch);
    this.line = line; this.ch = ch;
  };

  // Compare two positions, return 0 if they are the same, a negative
  // number when a is less, and a positive number otherwise.
  var cmp = CodeMirror.cmpPos = function(a, b) { return a.line - b.line || a.ch - b.ch; };

  function copyPos(x) {return Pos(x.line, x.ch);}
  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a; }
  function minPos(a, b) { return cmp(a, b) < 0 ? a : b; }

  // INPUT HANDLING

  function ensureFocus(cm) {
    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }
  }

  // This will be set to an array of strings when copying, so that,
  // when pasting, we know what kind of selections the copied text
  // was made out of.
  var lastCopied = null;

  function applyTextInput(cm, inserted, deleted, sel, origin) {
    var doc = cm.doc;
    cm.display.shift = false;
    if (!sel) sel = doc.sel;

    var paste = cm.state.pasteIncoming || origin == "paste";
    var textLines = doc.splitLines(inserted), multiPaste = null;
    // When pasing N lines into N selections, insert one line per selection
    if (paste && sel.ranges.length > 1) {
      if (lastCopied && lastCopied.join("\n") == inserted) {
        if (sel.ranges.length % lastCopied.length == 0) {
          multiPaste = [];
          for (var i = 0; i < lastCopied.length; i++)
            multiPaste.push(doc.splitLines(lastCopied[i]));
        }
      } else if (textLines.length == sel.ranges.length) {
        multiPaste = map(textLines, function(l) { return [l]; });
      }
    }

    // Normal behavior is to insert the new text into every selection
    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      var from = range.from(), to = range.to();
      if (range.empty()) {
        if (deleted && deleted > 0) // Handle deletion
          from = Pos(from.line, from.ch - deleted);
        else if (cm.state.overwrite && !paste) // Handle overwrite
          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));
      }
      var updateInput = cm.curOp.updateInput;
      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,
                         origin: origin || (paste ? "paste" : cm.state.cutIncoming ? "cut" : "+input")};
      makeChange(cm.doc, changeEvent);
      signalLater(cm, "inputRead", cm, changeEvent);
    }
    if (inserted && !paste)
      triggerElectric(cm, inserted);

    ensureCursorVisible(cm);
    cm.curOp.updateInput = updateInput;
    cm.curOp.typing = true;
    cm.state.pasteIncoming = cm.state.cutIncoming = false;
  }

  function handlePaste(e, cm) {
    var pasted = e.clipboardData && e.clipboardData.getData("text/plain");
    if (pasted) {
      e.preventDefault();
      if (!cm.isReadOnly() && !cm.options.disableInput)
        runInOp(cm, function() { applyTextInput(cm, pasted, 0, null, "paste"); });
      return true;
    }
  }

  function triggerElectric(cm, inserted) {
    // When an 'electric' character is inserted, immediately trigger a reindent
    if (!cm.options.electricChars || !cm.options.smartIndent) return;
    var sel = cm.doc.sel;

    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) continue;
      var mode = cm.getModeAt(range.head);
      var indented = false;
      if (mode.electricChars) {
        for (var j = 0; j < mode.electricChars.length; j++)
          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
            indented = indentLine(cm, range.head.line, "smart");
            break;
          }
      } else if (mode.electricInput) {
        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))
          indented = indentLine(cm, range.head.line, "smart");
      }
      if (indented) signalLater(cm, "electricInput", cm, range.head.line);
    }
  }

  function copyableRanges(cm) {
    var text = [], ranges = [];
    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {
      var line = cm.doc.sel.ranges[i].head.line;
      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};
      ranges.push(lineRange);
      text.push(cm.getRange(lineRange.anchor, lineRange.head));
    }
    return {text: text, ranges: ranges};
  }

  function disableBrowserMagic(field) {
    field.setAttribute("autocorrect", "off");
    field.setAttribute("autocapitalize", "off");
    field.setAttribute("spellcheck", "false");
  }

  // TEXTAREA INPUT STYLE

  function TextareaInput(cm) {
    this.cm = cm;
    // See input.poll and input.reset
    this.prevInput = "";

    // Flag that indicates whether we expect input to appear real soon
    // now (after some event like 'keypress' or 'input') and are
    // polling intensively.
    this.pollingFast = false;
    // Self-resetting timeout for the poller
    this.polling = new Delayed();
    // Tracks when input.reset has punted to just putting a short
    // string into the textarea instead of the full selection.
    this.inaccurateSelection = false;
    // Used to work around IE issue with selection being forgotten when focus moves away from textarea
    this.hasSelection = false;
    this.composing = null;
  };

  function hiddenTextarea() {
    var te = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none");
    var div = elt("div", [te], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
    // The textarea is kept positioned near the cursor to prevent the
    // fact that it'll be scrolled into view on input from scrolling
    // our fake cursor out of view. On webkit, when wrap=off, paste is
    // very slow. So make the area wide instead.
    if (webkit) te.style.width = "1000px";
    else te.setAttribute("wrap", "off");
    // If border: 0; -- iOS fails to open keyboard (issue #1287)
    if (ios) te.style.border = "1px solid black";
    disableBrowserMagic(te);
    return div;
  }

  TextareaInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = this.cm;

      // Wraps and hides input textarea
      var div = this.wrapper = hiddenTextarea();
      // The semihidden textarea that is focused when the editor is
      // focused, and receives input.
      var te = this.textarea = div.firstChild;
      display.wrapper.insertBefore(div, display.wrapper.firstChild);

      // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)
      if (ios) te.style.width = "0px";

      on(te, "input", function() {
        if (ie && ie_version >= 9 && input.hasSelection) input.hasSelection = null;
        input.poll();
      });

      on(te, "paste", function(e) {
        if (signalDOMEvent(cm, e) || handlePaste(e, cm)) return

        cm.state.pasteIncoming = true;
        input.fastPoll();
      });

      function prepareCopyCut(e) {
        if (signalDOMEvent(cm, e)) return
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (input.inaccurateSelection) {
            input.prevInput = "";
            input.inaccurateSelection = false;
            te.value = lastCopied.join("\n");
            selectInput(te);
          }
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.setSelections(ranges.ranges, null, sel_dontScroll);
          } else {
            input.prevInput = "";
            te.value = ranges.text.join("\n");
            selectInput(te);
          }
        }
        if (e.type == "cut") cm.state.cutIncoming = true;
      }
      on(te, "cut", prepareCopyCut);
      on(te, "copy", prepareCopyCut);

      on(display.scroller, "paste", function(e) {
        if (eventInWidget(display, e) || signalDOMEvent(cm, e)) return;
        cm.state.pasteIncoming = true;
        input.focus();
      });

      // Prevent normal selection in the editor (we handle our own)
      on(display.lineSpace, "selectstart", function(e) {
        if (!eventInWidget(display, e)) e_preventDefault(e);
      });

      on(te, "compositionstart", function() {
        var start = cm.getCursor("from");
        if (input.composing) input.composing.range.clear()
        input.composing = {
          start: start,
          range: cm.markText(start, cm.getCursor("to"), {className: "CodeMirror-composing"})
        };
      });
      on(te, "compositionend", function() {
        if (input.composing) {
          input.poll();
          input.composing.range.clear();
          input.composing = null;
        }
      });
    },

    prepareSelection: function() {
      // Redraw the selection and/or cursor
      var cm = this.cm, display = cm.display, doc = cm.doc;
      var result = prepareSelection(cm);

      // Move the hidden textarea near the cursor to prevent scrolling artifacts
      if (cm.options.moveInputWithCursor) {
        var headPos = cursorCoords(cm, doc.sel.primary().head, "div");
        var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,
                                            headPos.top + lineOff.top - wrapOff.top));
        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,
                                             headPos.left + lineOff.left - wrapOff.left));
      }

      return result;
    },

    showSelection: function(drawn) {
      var cm = this.cm, display = cm.display;
      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);
      removeChildrenAndAdd(display.selectionDiv, drawn.selection);
      if (drawn.teTop != null) {
        this.wrapper.style.top = drawn.teTop + "px";
        this.wrapper.style.left = drawn.teLeft + "px";
      }
    },

    // Reset the input to correspond to the selection (or to be empty,
    // when not typing and nothing is selected)
    reset: function(typing) {
      if (this.contextMenuPending) return;
      var minimal, selected, cm = this.cm, doc = cm.doc;
      if (cm.somethingSelected()) {
        this.prevInput = "";
        var range = doc.sel.primary();
        minimal = hasCopyEvent &&
          (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);
        var content = minimal ? "-" : selected || cm.getSelection();
        this.textarea.value = content;
        if (cm.state.focused) selectInput(this.textarea);
        if (ie && ie_version >= 9) this.hasSelection = content;
      } else if (!typing) {
        this.prevInput = this.textarea.value = "";
        if (ie && ie_version >= 9) this.hasSelection = null;
      }
      this.inaccurateSelection = minimal;
    },

    getField: function() { return this.textarea; },

    supportsTouch: function() { return false; },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor" && (!mobile || activeElt() != this.textarea)) {
        try { this.textarea.focus(); }
        catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM
      }
    },

    blur: function() { this.textarea.blur(); },

    resetPosition: function() {
      this.wrapper.style.top = this.wrapper.style.left = 0;
    },

    receivedFocus: function() { this.slowPoll(); },

    // Poll for input changes, using the normal rate of polling. This
    // runs as long as the editor is focused.
    slowPoll: function() {
      var input = this;
      if (input.pollingFast) return;
      input.polling.set(this.cm.options.pollInterval, function() {
        input.poll();
        if (input.cm.state.focused) input.slowPoll();
      });
    },

    // When an event has just come in that is likely to add or change
    // something in the input textarea, we poll faster, to ensure that
    // the change appears on the screen quickly.
    fastPoll: function() {
      var missed = false, input = this;
      input.pollingFast = true;
      function p() {
        var changed = input.poll();
        if (!changed && !missed) {missed = true; input.polling.set(60, p);}
        else {input.pollingFast = false; input.slowPoll();}
      }
      input.polling.set(20, p);
    },

    // Read input from the textarea, and update the document to match.
    // When something is selected, it is present in the textarea, and
    // selected (unless it is huge, in which case a placeholder is
    // used). When nothing is selected, the cursor sits after previously
    // seen text (can be empty), which is stored in prevInput (we must
    // not reset the textarea when typing, because that breaks IME).
    poll: function() {
      var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
      // Since this is called a *lot*, try to bail out as cheaply as
      // possible when it is clear that nothing happened. hasSelection
      // will be the case when there is a lot of text in the textarea,
      // in which case reading its value would be expensive.
      if (this.contextMenuPending || !cm.state.focused ||
          (hasSelection(input) && !prevInput && !this.composing) ||
          cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)
        return false;

      var text = input.value;
      // If nothing changed, bail.
      if (text == prevInput && !cm.somethingSelected()) return false;
      // Work around nonsensical selection resetting in IE9/10, and
      // inexplicable appearance of private area unicode characters on
      // some key combos in Mac (#2689).
      if (ie && ie_version >= 9 && this.hasSelection === text ||
          mac && /[\uf700-\uf7ff]/.test(text)) {
        cm.display.input.reset();
        return false;
      }

      if (cm.doc.sel == cm.display.selForContextMenu) {
        var first = text.charCodeAt(0);
        if (first == 0x200b && !prevInput) prevInput = "\u200b";
        if (first == 0x21da) { this.reset(); return this.cm.execCommand("undo"); }
      }
      // Find the part of the input that is actually new
      var same = 0, l = Math.min(prevInput.length, text.length);
      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;

      var self = this;
      runInOp(cm, function() {
        applyTextInput(cm, text.slice(same), prevInput.length - same,
                       null, self.composing ? "*compose" : null);

        // Don't leave long text in the textarea, since it makes further polling slow
        if (text.length > 1000 || text.indexOf("\n") > -1) input.value = self.prevInput = "";
        else self.prevInput = text;

        if (self.composing) {
          self.composing.range.clear();
          self.composing.range = cm.markText(self.composing.start, cm.getCursor("to"),
                                             {className: "CodeMirror-composing"});
        }
      });
      return true;
    },

    ensurePolled: function() {
      if (this.pollingFast && this.poll()) this.pollingFast = false;
    },

    onKeyPress: function() {
      if (ie && ie_version >= 9) this.hasSelection = null;
      this.fastPoll();
    },

    onContextMenu: function(e) {
      var input = this, cm = input.cm, display = cm.display, te = input.textarea;
      var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
      if (!pos || presto) return; // Opera is difficult.

      // Reset the current text selection only if the click is done outside of the selection
      // and 'resetSelectionOnContextMenu' option is true.
      var reset = cm.options.resetSelectionOnContextMenu;
      if (reset && cm.doc.sel.contains(pos) == -1)
        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);

      var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;
      input.wrapper.style.cssText = "position: absolute"
      var wrapperBox = input.wrapper.getBoundingClientRect()
      te.style.cssText = "position: absolute; width: 30px; height: 30px; top: " + (e.clientY - wrapperBox.top - 5) +
        "px; left: " + (e.clientX - wrapperBox.left - 5) + "px; z-index: 1000; background: " +
        (ie ? "rgba(255, 255, 255, .05)" : "transparent") +
        "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
      if (webkit) var oldScrollY = window.scrollY; // Work around Chrome issue (#2712)
      display.input.focus();
      if (webkit) window.scrollTo(null, oldScrollY);
      display.input.reset();
      // Adds "Select all" to context menu in FF
      if (!cm.somethingSelected()) te.value = input.prevInput = " ";
      input.contextMenuPending = true;
      display.selForContextMenu = cm.doc.sel;
      clearTimeout(display.detectingSelectAll);

      // Select-all will be greyed out if there's nothing to select, so
      // this adds a zero-width space so that we can later check whether
      // it got selected.
      function prepareSelectAllHack() {
        if (te.selectionStart != null) {
          var selected = cm.somethingSelected();
          var extval = "\u200b" + (selected ? te.value : "");
          te.value = "\u21da"; // Used to catch context-menu undo
          te.value = extval;
          input.prevInput = selected ? "" : "\u200b";
          te.selectionStart = 1; te.selectionEnd = extval.length;
          // Re-set this, in case some other handler touched the
          // selection in the meantime.
          display.selForContextMenu = cm.doc.sel;
        }
      }
      function rehide() {
        input.contextMenuPending = false;
        input.wrapper.style.cssText = oldWrapperCSS
        te.style.cssText = oldCSS;
        if (ie && ie_version < 9) display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);

        // Try to detect the user choosing select-all
        if (te.selectionStart != null) {
          if (!ie || (ie && ie_version < 9)) prepareSelectAllHack();
          var i = 0, poll = function() {
            if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&
                te.selectionEnd > 0 && input.prevInput == "\u200b")
              operation(cm, commands.selectAll)(cm);
            else if (i++ < 10) display.detectingSelectAll = setTimeout(poll, 500);
            else display.input.reset();
          };
          display.detectingSelectAll = setTimeout(poll, 200);
        }
      }

      if (ie && ie_version >= 9) prepareSelectAllHack();
      if (captureRightClick) {
        e_stop(e);
        var mouseup = function() {
          off(window, "mouseup", mouseup);
          setTimeout(rehide, 20);
        };
        on(window, "mouseup", mouseup);
      } else {
        setTimeout(rehide, 50);
      }
    },

    readOnlyChanged: function(val) {
      if (!val) this.reset();
    },

    setUneditable: nothing,

    needsContentAttribute: false
  }, TextareaInput.prototype);

  // CONTENTEDITABLE INPUT STYLE

  function ContentEditableInput(cm) {
    this.cm = cm;
    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
    this.polling = new Delayed();
    this.gracePeriod = false;
  }

  ContentEditableInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = input.cm;
      var div = input.div = display.lineDiv;
      disableBrowserMagic(div);

      on(div, "paste", function(e) {
        if (!signalDOMEvent(cm, e)) handlePaste(e, cm);
      })

      on(div, "compositionstart", function(e) {
        var data = e.data;
        input.composing = {sel: cm.doc.sel, data: data, startData: data};
        if (!data) return;
        var prim = cm.doc.sel.primary();
        var line = cm.getLine(prim.head.line);
        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));
        if (found > -1 && found <= prim.head.ch)
          input.composing.sel = simpleSelection(Pos(prim.head.line, found),
                                                Pos(prim.head.line, found + data.length));
      });
      on(div, "compositionupdate", function(e) {
        input.composing.data = e.data;
      });
      on(div, "compositionend", function(e) {
        var ours = input.composing;
        if (!ours) return;
        if (e.data != ours.startData && !/\u200b/.test(e.data))
          ours.data = e.data;
        // Need a small delay to prevent other code (input event,
        // selection polling) from doing damage when fired right after
        // compositionend.
        setTimeout(function() {
          if (!ours.handled)
            input.applyComposition(ours);
          if (input.composing == ours)
            input.composing = null;
        }, 50);
      });

      on(div, "touchstart", function() {
        input.forceCompositionEnd();
      });

      on(div, "input", function() {
        if (input.composing) return;
        if (cm.isReadOnly() || !input.pollContent())
          runInOp(input.cm, function() {regChange(cm);});
      });

      function onCopyCut(e) {
        if (signalDOMEvent(cm, e)) return
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (e.type == "cut") cm.replaceSelection("", null, "cut");
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.operation(function() {
              cm.setSelections(ranges.ranges, 0, sel_dontScroll);
              cm.replaceSelection("", null, "cut");
            });
          }
        }
        // iOS exposes the clipboard API, but seems to discard content inserted into it
        if (e.clipboardData && !ios) {
          e.preventDefault();
          e.clipboardData.clearData();
          e.clipboardData.setData("text/plain", lastCopied.join("\n"));
        } else {
          // Old-fashioned briefly-focus-a-textarea hack
          var kludge = hiddenTextarea(), te = kludge.firstChild;
          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);
          te.value = lastCopied.join("\n");
          var hadFocus = document.activeElement;
          selectInput(te);
          setTimeout(function() {
            cm.display.lineSpace.removeChild(kludge);
            hadFocus.focus();
          }, 50);
        }
      }
      on(div, "copy", onCopyCut);
      on(div, "cut", onCopyCut);
    },

    prepareSelection: function() {
      var result = prepareSelection(this.cm, false);
      result.focus = this.cm.state.focused;
      return result;
    },

    showSelection: function(info) {
      if (!info || !this.cm.display.view.length) return;
      if (info.focus) this.showPrimarySelection();
      this.showMultipleSelections(info);
    },

    showPrimarySelection: function() {
      var sel = window.getSelection(), prim = this.cm.doc.sel.primary();
      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);
      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);
      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&
          cmp(minPos(curAnchor, curFocus), prim.from()) == 0 &&
          cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)
        return;

      var start = posToDOM(this.cm, prim.from());
      var end = posToDOM(this.cm, prim.to());
      if (!start && !end) return;

      var view = this.cm.display.view;
      var old = sel.rangeCount && sel.getRangeAt(0);
      if (!start) {
        start = {node: view[0].measure.map[2], offset: 0};
      } else if (!end) { // FIXME dangerously hacky
        var measure = view[view.length - 1].measure;
        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
        end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};
      }

      try { var rng = range(start.node, start.offset, end.offset, end.node); }
      catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible
      if (rng) {
        if (!gecko && this.cm.state.focused) {
          sel.collapse(start.node, start.offset);
          if (!rng.collapsed) sel.addRange(rng);
        } else {
          sel.removeAllRanges();
          sel.addRange(rng);
        }
        if (old && sel.anchorNode == null) sel.addRange(old);
        else if (gecko) this.startGracePeriod();
      }
      this.rememberSelection();
    },

    startGracePeriod: function() {
      var input = this;
      clearTimeout(this.gracePeriod);
      this.gracePeriod = setTimeout(function() {
        input.gracePeriod = false;
        if (input.selectionChanged())
          input.cm.operation(function() { input.cm.curOp.selectionChanged = true; });
      }, 20);
    },

    showMultipleSelections: function(info) {
      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);
      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
    },

    rememberSelection: function() {
      var sel = window.getSelection();
      this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;
      this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;
    },

    selectionInEditor: function() {
      var sel = window.getSelection();
      if (!sel.rangeCount) return false;
      var node = sel.getRangeAt(0).commonAncestorContainer;
      return contains(this.div, node);
    },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor") this.div.focus();
    },
    blur: function() { this.div.blur(); },
    getField: function() { return this.div; },

    supportsTouch: function() { return true; },

    receivedFocus: function() {
      var input = this;
      if (this.selectionInEditor())
        this.pollSelection();
      else
        runInOp(this.cm, function() { input.cm.curOp.selectionChanged = true; });

      function poll() {
        if (input.cm.state.focused) {
          input.pollSelection();
          input.polling.set(input.cm.options.pollInterval, poll);
        }
      }
      this.polling.set(this.cm.options.pollInterval, poll);
    },

    selectionChanged: function() {
      var sel = window.getSelection();
      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||
        sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
    },

    pollSelection: function() {
      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
        var sel = window.getSelection(), cm = this.cm;
        this.rememberSelection();
        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
        var head = domToPos(cm, sel.focusNode, sel.focusOffset);
        if (anchor && head) runInOp(cm, function() {
          setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);
          if (anchor.bad || head.bad) cm.curOp.selectionChanged = true;
        });
      }
    },

    pollContent: function() {
      var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();
      var from = sel.from(), to = sel.to();
      if (from.line < display.viewFrom || to.line > display.viewTo - 1) return false;

      var fromIndex;
      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {
        var fromLine = lineNo(display.view[0].line);
        var fromNode = display.view[0].node;
      } else {
        var fromLine = lineNo(display.view[fromIndex].line);
        var fromNode = display.view[fromIndex - 1].node.nextSibling;
      }
      var toIndex = findViewIndex(cm, to.line);
      if (toIndex == display.view.length - 1) {
        var toLine = display.viewTo - 1;
        var toNode = display.lineDiv.lastChild;
      } else {
        var toLine = lineNo(display.view[toIndex + 1].line) - 1;
        var toNode = display.view[toIndex + 1].node.previousSibling;
      }

      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));
      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));
      while (newText.length > 1 && oldText.length > 1) {
        if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }
        else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }
        else break;
      }

      var cutFront = 0, cutEnd = 0;
      var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);
      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))
        ++cutFront;
      var newBot = lst(newText), oldBot = lst(oldText);
      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),
                               oldBot.length - (oldText.length == 1 ? cutFront : 0));
      while (cutEnd < maxCutEnd &&
             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))
        ++cutEnd;

      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);
      newText[0] = newText[0].slice(cutFront);

      var chFrom = Pos(fromLine, cutFront);
      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {
        replaceRange(cm.doc, newText, chFrom, chTo, "+input");
        return true;
      }
    },

    ensurePolled: function() {
      this.forceCompositionEnd();
    },
    reset: function() {
      this.forceCompositionEnd();
    },
    forceCompositionEnd: function() {
      if (!this.composing || this.composing.handled) return;
      this.applyComposition(this.composing);
      this.composing.handled = true;
      this.div.blur();
      this.div.focus();
    },
    applyComposition: function(composing) {
      if (this.cm.isReadOnly())
        operation(this.cm, regChange)(this.cm)
      else if (composing.data && composing.data != composing.startData)
        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);
    },

    setUneditable: function(node) {
      node.contentEditable = "false"
    },

    onKeyPress: function(e) {
      e.preventDefault();
      if (!this.cm.isReadOnly())
        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);
    },

    readOnlyChanged: function(val) {
      this.div.contentEditable = String(val != "nocursor")
    },

    onContextMenu: nothing,
    resetPosition: nothing,

    needsContentAttribute: true
  }, ContentEditableInput.prototype);

  function posToDOM(cm, pos) {
    var view = findViewForLine(cm, pos.line);
    if (!view || view.hidden) return null;
    var line = getLine(cm.doc, pos.line);
    var info = mapFromLineView(view, line, pos.line);

    var order = getOrder(line), side = "left";
    if (order) {
      var partPos = getBidiPartAt(order, pos.ch);
      side = partPos % 2 ? "right" : "left";
    }
    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
    result.offset = result.collapse == "right" ? result.end : result.start;
    return result;
  }

  function badPos(pos, bad) { if (bad) pos.bad = true; return pos; }

  function domToPos(cm, node, offset) {
    var lineNode;
    if (node == cm.display.lineDiv) {
      lineNode = cm.display.lineDiv.childNodes[offset];
      if (!lineNode) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);
      node = null; offset = 0;
    } else {
      for (lineNode = node;; lineNode = lineNode.parentNode) {
        if (!lineNode || lineNode == cm.display.lineDiv) return null;
        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break;
      }
    }
    for (var i = 0; i < cm.display.view.length; i++) {
      var lineView = cm.display.view[i];
      if (lineView.node == lineNode)
        return locateNodeInLineView(lineView, node, offset);
    }
  }

  function locateNodeInLineView(lineView, node, offset) {
    var wrapper = lineView.text.firstChild, bad = false;
    if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), true);
    if (node == wrapper) {
      bad = true;
      node = wrapper.childNodes[offset];
      offset = 0;
      if (!node) {
        var line = lineView.rest ? lst(lineView.rest) : lineView.line;
        return badPos(Pos(lineNo(line), line.text.length), bad);
      }
    }

    var textNode = node.nodeType == 3 ? node : null, topNode = node;
    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {
      textNode = node.firstChild;
      if (offset) offset = textNode.nodeValue.length;
    }
    while (topNode.parentNode != wrapper) topNode = topNode.parentNode;
    var measure = lineView.measure, maps = measure.maps;

    function find(textNode, topNode, offset) {
      for (var i = -1; i < (maps ? maps.length : 0); i++) {
        var map = i < 0 ? measure.map : maps[i];
        for (var j = 0; j < map.length; j += 3) {
          var curNode = map[j + 2];
          if (curNode == textNode || curNode == topNode) {
            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);
            var ch = map[j] + offset;
            if (offset < 0 || curNode != textNode) ch = map[j + (offset ? 1 : 0)];
            return Pos(line, ch);
          }
        }
      }
    }
    var found = find(textNode, topNode, offset);
    if (found) return badPos(found, bad);

    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems
    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
      found = find(after, after.firstChild, 0);
      if (found)
        return badPos(Pos(found.line, found.ch - dist), bad);
      else
        dist += after.textContent.length;
    }
    for (var before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {
      found = find(before, before.firstChild, -1);
      if (found)
        return badPos(Pos(found.line, found.ch + dist), bad);
      else
        dist += after.textContent.length;
    }
  }

  function domTextBetween(cm, from, to, fromLine, toLine) {
    var text = "", closing = false, lineSep = cm.doc.lineSeparator();
    function recognizeMarker(id) { return function(marker) { return marker.id == id; }; }
    function walk(node) {
      if (node.nodeType == 1) {
        var cmText = node.getAttribute("cm-text");
        if (cmText != null) {
          if (cmText == "") cmText = node.textContent.replace(/\u200b/g, "");
          text += cmText;
          return;
        }
        var markerID = node.getAttribute("cm-marker"), range;
        if (markerID) {
          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
          if (found.length && (range = found[0].find()))
            text += getBetween(cm.doc, range.from, range.to).join(lineSep);
          return;
        }
        if (node.getAttribute("contenteditable") == "false") return;
        for (var i = 0; i < node.childNodes.length; i++)
          walk(node.childNodes[i]);
        if (/^(pre|div|p)$/i.test(node.nodeName))
          closing = true;
      } else if (node.nodeType == 3) {
        var val = node.nodeValue;
        if (!val) return;
        if (closing) {
          text += lineSep;
          closing = false;
        }
        text += val;
      }
    }
    for (;;) {
      walk(from);
      if (from == to) break;
      from = from.nextSibling;
    }
    return text;
  }

  CodeMirror.inputStyles = {"textarea": TextareaInput, "contenteditable": ContentEditableInput};

  // SELECTION / CURSOR

  // Selection objects are immutable. A new one is created every time
  // the selection changes. A selection is one or more non-overlapping
  // (and non-touching) ranges, sorted, and an integer that indicates
  // which one is the primary selection (the one that's scrolled into
  // view, that getCursor returns, etc).
  function Selection(ranges, primIndex) {
    this.ranges = ranges;
    this.primIndex = primIndex;
  }

  Selection.prototype = {
    primary: function() { return this.ranges[this.primIndex]; },
    equals: function(other) {
      if (other == this) return true;
      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false;
      for (var i = 0; i < this.ranges.length; i++) {
        var here = this.ranges[i], there = other.ranges[i];
        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0) return false;
      }
      return true;
    },
    deepCopy: function() {
      for (var out = [], i = 0; i < this.ranges.length; i++)
        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));
      return new Selection(out, this.primIndex);
    },
    somethingSelected: function() {
      for (var i = 0; i < this.ranges.length; i++)
        if (!this.ranges[i].empty()) return true;
      return false;
    },
    contains: function(pos, end) {
      if (!end) end = pos;
      for (var i = 0; i < this.ranges.length; i++) {
        var range = this.ranges[i];
        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)
          return i;
      }
      return -1;
    }
  };

  function Range(anchor, head) {
    this.anchor = anchor; this.head = head;
  }

  Range.prototype = {
    from: function() { return minPos(this.anchor, this.head); },
    to: function() { return maxPos(this.anchor, this.head); },
    empty: function() {
      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
    }
  };

  // Take an unsorted, potentially overlapping set of ranges, and
  // build a selection out of it. 'Consumes' ranges array (modifying
  // it).
  function normalizeSelection(ranges, primIndex) {
    var prim = ranges[primIndex];
    ranges.sort(function(a, b) { return cmp(a.from(), b.from()); });
    primIndex = indexOf(ranges, prim);
    for (var i = 1; i < ranges.length; i++) {
      var cur = ranges[i], prev = ranges[i - 1];
      if (cmp(prev.to(), cur.from()) >= 0) {
        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
        if (i <= primIndex) --primIndex;
        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));
      }
    }
    return new Selection(ranges, primIndex);
  }

  function simpleSelection(anchor, head) {
    return new Selection([new Range(anchor, head || anchor)], 0);
  }

  // Most of the external API clips given positions to make sure they
  // actually exist within the document.
  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}
  function clipPos(doc, pos) {
    if (pos.line < doc.first) return Pos(doc.first, 0);
    var last = doc.first + doc.size - 1;
    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);
    return clipToLen(pos, getLine(doc, pos.line).text.length);
  }
  function clipToLen(pos, linelen) {
    var ch = pos.ch;
    if (ch == null || ch > linelen) return Pos(pos.line, linelen);
    else if (ch < 0) return Pos(pos.line, 0);
    else return pos;
  }
  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}
  function clipPosArray(doc, array) {
    for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);
    return out;
  }

  // SELECTION UPDATES

  // The 'scroll' parameter given to many of these indicated whether
  // the new cursor position should be scrolled into view after
  // modifying the selection.

  // If shift is held or the extend flag is set, extends a range to
  // include a given position (and optionally a second position).
  // Otherwise, simply returns the range between the given positions.
  // Used for cursor motion and such.
  function extendRange(doc, range, head, other) {
    if (doc.cm && doc.cm.display.shift || doc.extend) {
      var anchor = range.anchor;
      if (other) {
        var posBefore = cmp(head, anchor) < 0;
        if (posBefore != (cmp(other, anchor) < 0)) {
          anchor = head;
          head = other;
        } else if (posBefore != (cmp(head, other) < 0)) {
          head = other;
        }
      }
      return new Range(anchor, head);
    } else {
      return new Range(other || head, head);
    }
  }

  // Extend the primary selection range, discard the rest.
  function extendSelection(doc, head, other, options) {
    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);
  }

  // Extend all selections (pos is an array of selections with length
  // equal the number of selections)
  function extendSelections(doc, heads, options) {
    for (var out = [], i = 0; i < doc.sel.ranges.length; i++)
      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);
    var newSel = normalizeSelection(out, doc.sel.primIndex);
    setSelection(doc, newSel, options);
  }

  // Updates a single range in the selection.
  function replaceOneSelection(doc, i, range, options) {
    var ranges = doc.sel.ranges.slice(0);
    ranges[i] = range;
    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);
  }

  // Reset the selection to a single range.
  function setSimpleSelection(doc, anchor, head, options) {
    setSelection(doc, simpleSelection(anchor, head), options);
  }

  // Give beforeSelectionChange handlers a change to influence a
  // selection update.
  function filterSelectionChange(doc, sel, options) {
    var obj = {
      ranges: sel.ranges,
      update: function(ranges) {
        this.ranges = [];
        for (var i = 0; i < ranges.length; i++)
          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),
                                     clipPos(doc, ranges[i].head));
      },
      origin: options && options.origin
    };
    signal(doc, "beforeSelectionChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeSelectionChange", doc.cm, obj);
    if (obj.ranges != sel.ranges) return normalizeSelection(obj.ranges, obj.ranges.length - 1);
    else return sel;
  }

  function setSelectionReplaceHistory(doc, sel, options) {
    var done = doc.history.done, last = lst(done);
    if (last && last.ranges) {
      done[done.length - 1] = sel;
      setSelectionNoUndo(doc, sel, options);
    } else {
      setSelection(doc, sel, options);
    }
  }

  // Set a new selection.
  function setSelection(doc, sel, options) {
    setSelectionNoUndo(doc, sel, options);
    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
  }

  function setSelectionNoUndo(doc, sel, options) {
    if (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange"))
      sel = filterSelectionChange(doc, sel, options);

    var bias = options && options.bias ||
      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);
    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));

    if (!(options && options.scroll === false) && doc.cm)
      ensureCursorVisible(doc.cm);
  }

  function setSelectionInner(doc, sel) {
    if (sel.equals(doc.sel)) return;

    doc.sel = sel;

    if (doc.cm) {
      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;
      signalCursorActivity(doc.cm);
    }
    signalLater(doc, "cursorActivity", doc);
  }

  // Verify that the selection does not partially select any atomic
  // marked ranges.
  function reCheckSelection(doc) {
    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);
  }

  // Return a selection that does not partially select any atomic
  // ranges.
  function skipAtomicInSelection(doc, sel, bias, mayClear) {
    var out;
    for (var i = 0; i < sel.ranges.length; i++) {
      var range = sel.ranges[i];
      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];
      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);
      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);
      if (out || newAnchor != range.anchor || newHead != range.head) {
        if (!out) out = sel.ranges.slice(0, i);
        out[i] = new Range(newAnchor, newHead);
      }
    }
    return out ? normalizeSelection(out, sel.primIndex) : sel;
  }

  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {
    var line = getLine(doc, pos.line);
    if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
      var sp = line.markedSpans[i], m = sp.marker;
      if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&
          (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {
        if (mayClear) {
          signal(m, "beforeCursorEnter");
          if (m.explicitlyCleared) {
            if (!line.markedSpans) break;
            else {--i; continue;}
          }
        }
        if (!m.atomic) continue;

        if (oldPos) {
          var near = m.find(dir < 0 ? 1 : -1), diff;
          if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)
            near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);
          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))
            return skipAtomicInner(doc, near, pos, dir, mayClear);
        }

        var far = m.find(dir < 0 ? -1 : 1);
        if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)
          far = movePos(doc, far, dir, far.line == pos.line ? line : null);
        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;
      }
    }
    return pos;
  }

  // Ensure a given position is not inside an atomic range.
  function skipAtomic(doc, pos, oldPos, bias, mayClear) {
    var dir = bias || 1;
    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||
        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||
        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||
        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));
    if (!found) {
      doc.cantEdit = true;
      return Pos(doc.first, 0);
    }
    return found;
  }

  function movePos(doc, pos, dir, line) {
    if (dir < 0 && pos.ch == 0) {
      if (pos.line > doc.first) return clipPos(doc, Pos(pos.line - 1));
      else return null;
    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {
      if (pos.line < doc.first + doc.size - 1) return Pos(pos.line + 1, 0);
      else return null;
    } else {
      return new Pos(pos.line, pos.ch + dir);
    }
  }

  // SELECTION DRAWING

  function updateSelection(cm) {
    cm.display.input.showSelection(cm.display.input.prepareSelection());
  }

  function prepareSelection(cm, primary) {
    var doc = cm.doc, result = {};
    var curFragment = result.cursors = document.createDocumentFragment();
    var selFragment = result.selection = document.createDocumentFragment();

    for (var i = 0; i < doc.sel.ranges.length; i++) {
      if (primary === false && i == doc.sel.primIndex) continue;
      var range = doc.sel.ranges[i];
      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) continue;
      var collapsed = range.empty();
      if (collapsed || cm.options.showCursorWhenSelecting)
        drawSelectionCursor(cm, range.head, curFragment);
      if (!collapsed)
        drawSelectionRange(cm, range, selFragment);
    }
    return result;
  }

  // Draws a cursor for the given range
  function drawSelectionCursor(cm, head, output) {
    var pos = cursorCoords(cm, head, "div", null, null, !cm.options.singleCursorHeightPerLine);

    var cursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor"));
    cursor.style.left = pos.left + "px";
    cursor.style.top = pos.top + "px";
    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";

    if (pos.other) {
      // Secondary cursor, shown when on a 'jump' in bi-directional text
      var otherCursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor CodeMirror-secondarycursor"));
      otherCursor.style.display = "";
      otherCursor.style.left = pos.other.left + "px";
      otherCursor.style.top = pos.other.top + "px";
      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + "px";
    }
  }

  // Draws the given range as a highlighted selection
  function drawSelectionRange(cm, range, output) {
    var display = cm.display, doc = cm.doc;
    var fragment = document.createDocumentFragment();
    var padding = paddingH(cm.display), leftSide = padding.left;
    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;

    function add(left, top, width, bottom) {
      if (top < 0) top = 0;
      top = Math.round(top);
      bottom = Math.round(bottom);
      fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left +
                               "px; top: " + top + "px; width: " + (width == null ? rightSide - left : width) +
                               "px; height: " + (bottom - top) + "px"));
    }

    function drawForLine(line, fromArg, toArg) {
      var lineObj = getLine(doc, line);
      var lineLen = lineObj.text.length;
      var start, end;
      function coords(ch, bias) {
        return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
      }

      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {
        var leftPos = coords(from, "left"), rightPos, left, right;
        if (from == to) {
          rightPos = leftPos;
          left = right = leftPos.left;
        } else {
          rightPos = coords(to - 1, "right");
          if (dir == "rtl") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }
          left = leftPos.left;
          right = rightPos.right;
        }
        if (fromArg == null && from == 0) left = leftSide;
        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part
          add(left, leftPos.top, null, leftPos.bottom);
          left = leftSide;
          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);
        }
        if (toArg == null && to == lineLen) right = rightSide;
        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)
          start = leftPos;
        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)
          end = rightPos;
        if (left < leftSide + 1) left = leftSide;
        add(left, rightPos.top, right - left, rightPos.bottom);
      });
      return {start: start, end: end};
    }

    var sFrom = range.from(), sTo = range.to();
    if (sFrom.line == sTo.line) {
      drawForLine(sFrom.line, sFrom.ch, sTo.ch);
    } else {
      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);
      var singleVLine = visualLine(fromLine) == visualLine(toLine);
      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
      if (singleVLine) {
        if (leftEnd.top < rightStart.top - 2) {
          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
        } else {
          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
        }
      }
      if (leftEnd.bottom < rightStart.top)
        add(leftSide, leftEnd.bottom, null, rightStart.top);
    }

    output.appendChild(fragment);
  }

  // Cursor-blinking
  function restartBlink(cm) {
    if (!cm.state.focused) return;
    var display = cm.display;
    clearInterval(display.blinker);
    var on = true;
    display.cursorDiv.style.visibility = "";
    if (cm.options.cursorBlinkRate > 0)
      display.blinker = setInterval(function() {
        display.cursorDiv.style.visibility = (on = !on) ? "" : "hidden";
      }, cm.options.cursorBlinkRate);
    else if (cm.options.cursorBlinkRate < 0)
      display.cursorDiv.style.visibility = "hidden";
  }

  // HIGHLIGHT WORKER

  function startWorker(cm, time) {
    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)
      cm.state.highlight.set(time, bind(highlightWorker, cm));
  }

  function highlightWorker(cm) {
    var doc = cm.doc;
    if (doc.frontier < doc.first) doc.frontier = doc.first;
    if (doc.frontier >= cm.display.viewTo) return;
    var end = +new Date + cm.options.workTime;
    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));
    var changedLines = [];

    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
      if (doc.frontier >= cm.display.viewFrom) { // Visible
        var oldStyles = line.styles, tooLong = line.text.length > cm.options.maxHighlightLength;
        var highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, true);
        line.styles = highlighted.styles;
        var oldCls = line.styleClasses, newCls = highlighted.classes;
        if (newCls) line.styleClasses = newCls;
        else if (oldCls) line.styleClasses = null;
        var ischange = !oldStyles || oldStyles.length != line.styles.length ||
          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];
        if (ischange) changedLines.push(doc.frontier);
        line.stateAfter = tooLong ? state : copyState(doc.mode, state);
      } else {
        if (line.text.length <= cm.options.maxHighlightLength)
          processLine(cm, line.text, state);
        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;
      }
      ++doc.frontier;
      if (+new Date > end) {
        startWorker(cm, cm.options.workDelay);
        return true;
      }
    });
    if (changedLines.length) runInOp(cm, function() {
      for (var i = 0; i < changedLines.length; i++)
        regLineChange(cm, changedLines[i], "text");
    });
  }

  // Finds the line to start with when starting a parse. Tries to
  // find a line with a stateAfter, so that it can start with a
  // valid state. If that fails, it returns the line with the
  // smallest indentation, which tends to need the least context to
  // parse correctly.
  function findStartLine(cm, n, precise) {
    var minindent, minline, doc = cm.doc;
    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);
    for (var search = n; search > lim; --search) {
      if (search <= doc.first) return doc.first;
      var line = getLine(doc, search - 1);
      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;
      var indented = countColumn(line.text, null, cm.options.tabSize);
      if (minline == null || minindent > indented) {
        minline = search - 1;
        minindent = indented;
      }
    }
    return minline;
  }

  function getStateBefore(cm, n, precise) {
    var doc = cm.doc, display = cm.display;
    if (!doc.mode.startState) return true;
    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;
    if (!state) state = startState(doc.mode);
    else state = copyState(doc.mode, state);
    doc.iter(pos, n, function(line) {
      processLine(cm, line.text, state);
      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;
      line.stateAfter = save ? copyState(doc.mode, state) : null;
      ++pos;
    });
    if (precise) doc.frontier = pos;
    return state;
  }

  // POSITION MEASUREMENT

  function paddingTop(display) {return display.lineSpace.offsetTop;}
  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}
  function paddingH(display) {
    if (display.cachedPaddingH) return display.cachedPaddingH;
    var e = removeChildrenAndAdd(display.measure, elt("pre", "x"));
    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};
    if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data;
    return data;
  }

  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth; }
  function displayWidth(cm) {
    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
  }
  function displayHeight(cm) {
    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
  }

  // Ensure the lineView.wrapping.heights array is populated. This is
  // an array of bottom offsets for the lines that make up a drawn
  // line. When lineWrapping is on, there might be more than one
  // height.
  function ensureLineHeights(cm, lineView, rect) {
    var wrapping = cm.options.lineWrapping;
    var curWidth = wrapping && displayWidth(cm);
    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
      var heights = lineView.measure.heights = [];
      if (wrapping) {
        lineView.measure.width = curWidth;
        var rects = lineView.text.firstChild.getClientRects();
        for (var i = 0; i < rects.length - 1; i++) {
          var cur = rects[i], next = rects[i + 1];
          if (Math.abs(cur.bottom - next.bottom) > 2)
            heights.push((cur.bottom + next.top) / 2 - rect.top);
        }
      }
      heights.push(rect.bottom - rect.top);
    }
  }

  // Find a line map (mapping character offsets to text nodes) and a
  // measurement cache for the given line number. (A line view might
  // contain multiple lines when collapsed ranges are present.)
  function mapFromLineView(lineView, line, lineN) {
    if (lineView.line == line)
      return {map: lineView.measure.map, cache: lineView.measure.cache};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineView.rest[i] == line)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineNo(lineView.rest[i]) > lineN)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true};
  }

  // Render a line into the hidden node display.externalMeasured. Used
  // when measurement is needed for a line that's not in the viewport.
  function updateExternalMeasurement(cm, line) {
    line = visualLine(line);
    var lineN = lineNo(line);
    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
    view.lineN = lineN;
    var built = view.built = buildLineContent(cm, view);
    view.text = built.pre;
    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
    return view;
  }

  // Get a {top, bottom, left, right} box (in line-local coordinates)
  // for a given character.
  function measureChar(cm, line, ch, bias) {
    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
  }

  // Find a line view that corresponds to the given line number.
  function findViewForLine(cm, lineN) {
    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)
      return cm.display.view[findViewIndex(cm, lineN)];
    var ext = cm.display.externalMeasured;
    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)
      return ext;
  }

  // Measurement can be split in two steps, the set-up work that
  // applies to the whole line, and the measurement of the actual
  // character. Functions like coordsChar, that need to do a lot of
  // measurements in a row, can thus ensure that the set-up work is
  // only done once.
  function prepareMeasureForLine(cm, line) {
    var lineN = lineNo(line);
    var view = findViewForLine(cm, lineN);
    if (view && !view.text) {
      view = null;
    } else if (view && view.changes) {
      updateLineForChanges(cm, view, lineN, getDimensions(cm));
      cm.curOp.forceUpdate = true;
    }
    if (!view)
      view = updateExternalMeasurement(cm, line);

    var info = mapFromLineView(view, line, lineN);
    return {
      line: line, view: view, rect: null,
      map: info.map, cache: info.cache, before: info.before,
      hasHeights: false
    };
  }

  // Given a prepared measurement object, measures the position of an
  // actual character (or fetches it from the cache).
  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
    if (prepared.before) ch = -1;
    var key = ch + (bias || ""), found;
    if (prepared.cache.hasOwnProperty(key)) {
      found = prepared.cache[key];
    } else {
      if (!prepared.rect)
        prepared.rect = prepared.view.text.getBoundingClientRect();
      if (!prepared.hasHeights) {
        ensureLineHeights(cm, prepared.view, prepared.rect);
        prepared.hasHeights = true;
      }
      found = measureCharInner(cm, prepared, ch, bias);
      if (!found.bogus) prepared.cache[key] = found;
    }
    return {left: found.left, right: found.right,
            top: varHeight ? found.rtop : found.top,
            bottom: varHeight ? found.rbottom : found.bottom};
  }

  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};

  function nodeAndOffsetInLineMap(map, ch, bias) {
    var node, start, end, collapse;
    // First, search the line map for the text node corresponding to,
    // or closest to, the target character.
    for (var i = 0; i < map.length; i += 3) {
      var mStart = map[i], mEnd = map[i + 1];
      if (ch < mStart) {
        start = 0; end = 1;
        collapse = "left";
      } else if (ch < mEnd) {
        start = ch - mStart;
        end = start + 1;
      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {
        end = mEnd - mStart;
        start = end - 1;
        if (ch >= mEnd) collapse = "right";
      }
      if (start != null) {
        node = map[i + 2];
        if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right"))
          collapse = bias;
        if (bias == "left" && start == 0)
          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {
            node = map[(i -= 3) + 2];
            collapse = "left";
          }
        if (bias == "right" && start == mEnd - mStart)
          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {
            node = map[(i += 3) + 2];
            collapse = "right";
          }
        break;
      }
    }
    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd};
  }

  function measureCharInner(cm, prepared, ch, bias) {
    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);
    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;

    var rect;
    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.
      for (var i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned
        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) --start;
        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) ++end;
        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {
          rect = node.parentNode.getBoundingClientRect();
        } else if (ie && cm.options.lineWrapping) {
          var rects = range(node, start, end).getClientRects();
          if (rects.length)
            rect = rects[bias == "right" ? rects.length - 1 : 0];
          else
            rect = nullRect;
        } else {
          rect = range(node, start, end).getBoundingClientRect() || nullRect;
        }
        if (rect.left || rect.right || start == 0) break;
        end = start;
        start = start - 1;
        collapse = "right";
      }
      if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect);
    } else { // If it is a widget, simply get the box for the whole widget.
      if (start > 0) collapse = bias = "right";
      var rects;
      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)
        rect = rects[bias == "right" ? rects.length - 1 : 0];
      else
        rect = node.getBoundingClientRect();
    }
    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
      var rSpan = node.parentNode.getClientRects()[0];
      if (rSpan)
        rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};
      else
        rect = nullRect;
    }

    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
    var mid = (rtop + rbot) / 2;
    var heights = prepared.view.measure.heights;
    for (var i = 0; i < heights.length - 1; i++)
      if (mid < heights[i]) break;
    var top = i ? heights[i - 1] : 0, bot = heights[i];
    var result = {left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
                  right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
                  top: top, bottom: bot};
    if (!rect.left && !rect.right) result.bogus = true;
    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }

    return result;
  }

  // Work around problem with bounding client rects on ranges being
  // returned incorrectly when zoomed on IE10 and below.
  function maybeUpdateRectForZooming(measure, rect) {
    if (!window.screen || screen.logicalXDPI == null ||
        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))
      return rect;
    var scaleX = screen.logicalXDPI / screen.deviceXDPI;
    var scaleY = screen.logicalYDPI / screen.deviceYDPI;
    return {left: rect.left * scaleX, right: rect.right * scaleX,
            top: rect.top * scaleY, bottom: rect.bottom * scaleY};
  }

  function clearLineMeasurementCacheFor(lineView) {
    if (lineView.measure) {
      lineView.measure.cache = {};
      lineView.measure.heights = null;
      if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
        lineView.measure.caches[i] = {};
    }
  }

  function clearLineMeasurementCache(cm) {
    cm.display.externalMeasure = null;
    removeChildren(cm.display.lineMeasure);
    for (var i = 0; i < cm.display.view.length; i++)
      clearLineMeasurementCacheFor(cm.display.view[i]);
  }

  function clearCaches(cm) {
    clearLineMeasurementCache(cm);
    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;
    cm.display.lineNumChars = null;
  }

  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }
  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }

  // Converts a {top, bottom, left, right} box from line-local
  // coordinates into another coordinate system. Context may be one of
  // "line", "div" (display.lineDiv), "local"/null (editor), "window",
  // or "page".
  function intoCoordSystem(cm, lineObj, rect, context) {
    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {
      var size = widgetHeight(lineObj.widgets[i]);
      rect.top += size; rect.bottom += size;
    }
    if (context == "line") return rect;
    if (!context) context = "local";
    var yOff = heightAtLine(lineObj);
    if (context == "local") yOff += paddingTop(cm.display);
    else yOff -= cm.display.viewOffset;
    if (context == "page" || context == "window") {
      var lOff = cm.display.lineSpace.getBoundingClientRect();
      yOff += lOff.top + (context == "window" ? 0 : pageScrollY());
      var xOff = lOff.left + (context == "window" ? 0 : pageScrollX());
      rect.left += xOff; rect.right += xOff;
    }
    rect.top += yOff; rect.bottom += yOff;
    return rect;
  }

  // Coverts a box from "div" coords to another coordinate system.
  // Context may be "window", "page", "div", or "local"/null.
  function fromCoordSystem(cm, coords, context) {
    if (context == "div") return coords;
    var left = coords.left, top = coords.top;
    // First move into "page" coordinate system
    if (context == "page") {
      left -= pageScrollX();
      top -= pageScrollY();
    } else if (context == "local" || !context) {
      var localBox = cm.display.sizer.getBoundingClientRect();
      left += localBox.left;
      top += localBox.top;
    }

    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};
  }

  function charCoords(cm, pos, context, lineObj, bias) {
    if (!lineObj) lineObj = getLine(cm.doc, pos.line);
    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
  }

  // Returns a box for a given cursor position, which may have an
  // 'other' property containing the position of the secondary cursor
  // on a bidi boundary.
  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
    lineObj = lineObj || getLine(cm.doc, pos.line);
    if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj);
    function get(ch, right) {
      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? "right" : "left", varHeight);
      if (right) m.left = m.right; else m.right = m.left;
      return intoCoordSystem(cm, lineObj, m, context);
    }
    function getBidi(ch, partPos) {
      var part = order[partPos], right = part.level % 2;
      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {
        part = order[--partPos];
        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);
        right = true;
      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {
        part = order[++partPos];
        ch = bidiLeft(part) - part.level % 2;
        right = false;
      }
      if (right && ch == part.to && ch > part.from) return get(ch - 1);
      return get(ch, right);
    }
    var order = getOrder(lineObj), ch = pos.ch;
    if (!order) return get(ch);
    var partPos = getBidiPartAt(order, ch);
    var val = getBidi(ch, partPos);
    if (bidiOther != null) val.other = getBidi(ch, bidiOther);
    return val;
  }

  // Used to cheaply estimate the coordinates for a position. Used for
  // intermediate scroll updates.
  function estimateCoords(cm, pos) {
    var left = 0, pos = clipPos(cm.doc, pos);
    if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch;
    var lineObj = getLine(cm.doc, pos.line);
    var top = heightAtLine(lineObj) + paddingTop(cm.display);
    return {left: left, right: left, top: top, bottom: top + lineObj.height};
  }

  // Positions returned by coordsChar contain some extra information.
  // xRel is the relative x position of the input coordinates compared
  // to the found position (so xRel > 0 means the coordinates are to
  // the right of the character position, for example). When outside
  // is true, that means the coordinates lie outside the line's
  // vertical range.
  function PosWithInfo(line, ch, outside, xRel) {
    var pos = Pos(line, ch);
    pos.xRel = xRel;
    if (outside) pos.outside = true;
    return pos;
  }

  // Compute the character position closest to the given coordinates.
  // Input must be lineSpace-local ("div" coordinate system).
  function coordsChar(cm, x, y) {
    var doc = cm.doc;
    y += cm.display.viewOffset;
    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);
    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
    if (lineN > last)
      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);
    if (x < 0) x = 0;

    var lineObj = getLine(doc, lineN);
    for (;;) {
      var found = coordsCharInner(cm, lineObj, lineN, x, y);
      var merged = collapsedSpanAtEnd(lineObj);
      var mergedPos = merged && merged.find(0, true);
      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))
        lineN = lineNo(lineObj = mergedPos.to.line);
      else
        return found;
    }
  }

  function coordsCharInner(cm, lineObj, lineNo, x, y) {
    var innerOff = y - heightAtLine(lineObj);
    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;
    var preparedMeasure = prepareMeasureForLine(cm, lineObj);

    function getX(ch) {
      var sp = cursorCoords(cm, Pos(lineNo, ch), "line", lineObj, preparedMeasure);
      wrongLine = true;
      if (innerOff > sp.bottom) return sp.left - adjust;
      else if (innerOff < sp.top) return sp.left + adjust;
      else wrongLine = false;
      return sp.left;
    }

    var bidi = getOrder(lineObj), dist = lineObj.text.length;
    var from = lineLeft(lineObj), to = lineRight(lineObj);
    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;

    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);
    // Do a binary search between these bounds.
    for (;;) {
      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {
        var ch = x < fromX || x - fromX <= toX - x ? from : to;
        var xDiff = x - (ch == from ? fromX : toX);
        while (isExtendingChar(lineObj.text.charAt(ch))) ++ch;
        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,
                              xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);
        return pos;
      }
      var step = Math.ceil(dist / 2), middle = from + step;
      if (bidi) {
        middle = from;
        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);
      }
      var middleX = getX(middle);
      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}
      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}
    }
  }

  var measureText;
  // Compute the default text height.
  function textHeight(display) {
    if (display.cachedTextHeight != null) return display.cachedTextHeight;
    if (measureText == null) {
      measureText = elt("pre");
      // Measure a bunch of lines, for browsers that compute
      // fractional heights.
      for (var i = 0; i < 49; ++i) {
        measureText.appendChild(document.createTextNode("x"));
        measureText.appendChild(elt("br"));
      }
      measureText.appendChild(document.createTextNode("x"));
    }
    removeChildrenAndAdd(display.measure, measureText);
    var height = measureText.offsetHeight / 50;
    if (height > 3) display.cachedTextHeight = height;
    removeChildren(display.measure);
    return height || 1;
  }

  // Compute the default character width.
  function charWidth(display) {
    if (display.cachedCharWidth != null) return display.cachedCharWidth;
    var anchor = elt("span", "xxxxxxxxxx");
    var pre = elt("pre", [anchor]);
    removeChildrenAndAdd(display.measure, pre);
    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
    if (width > 2) display.cachedCharWidth = width;
    return width || 10;
  }

  // OPERATIONS

  // Operations are used to wrap a series of changes to the editor
  // state in such a way that each change won't have to update the
  // cursor and display (which would be awkward, slow, and
  // error-prone). Instead, display updates are batched and then all
  // combined and executed at once.

  var operationGroup = null;

  var nextOpId = 0;
  // Start a new operation.
  function startOperation(cm) {
    cm.curOp = {
      cm: cm,
      viewChanged: false,      // Flag that indicates that lines might need to be redrawn
      startHeight: cm.doc.height, // Used to detect need to update scrollbar
      forceUpdate: false,      // Used to force a redraw
      updateInput: null,       // Whether to reset the input textarea
      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)
      changeObjs: null,        // Accumulated changes, for firing change events
      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on
      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already
      selectionChanged: false, // Whether the selection needs to be redrawn
      updateMaxLine: false,    // Set when the widest line needs to be determined anew
      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet
      scrollToPos: null,       // Used to scroll to a specific position
      focus: false,
      id: ++nextOpId           // Unique ID
    };
    if (operationGroup) {
      operationGroup.ops.push(cm.curOp);
    } else {
      cm.curOp.ownsGroup = operationGroup = {
        ops: [cm.curOp],
        delayedCallbacks: []
      };
    }
  }

  function fireCallbacksForOps(group) {
    // Calls delayed callbacks and cursorActivity handlers until no
    // new ones appear
    var callbacks = group.delayedCallbacks, i = 0;
    do {
      for (; i < callbacks.length; i++)
        callbacks[i].call(null);
      for (var j = 0; j < group.ops.length; j++) {
        var op = group.ops[j];
        if (op.cursorActivityHandlers)
          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)
            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);
      }
    } while (i < callbacks.length);
  }

  // Finish an operation, updating the display and signalling delayed events
  function endOperation(cm) {
    var op = cm.curOp, group = op.ownsGroup;
    if (!group) return;

    try { fireCallbacksForOps(group); }
    finally {
      operationGroup = null;
      for (var i = 0; i < group.ops.length; i++)
        group.ops[i].cm.curOp = null;
      endOperations(group);
    }
  }

  // The DOM updates done when an operation finishes are batched so
  // that the minimum number of relayouts are required.
  function endOperations(group) {
    var ops = group.ops;
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_finish(ops[i]);
  }

  function endOperation_R1(op) {
    var cm = op.cm, display = cm.display;
    maybeClipScrollbars(cm);
    if (op.updateMaxLine) findMaxLine(cm);

    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||
      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||
                         op.scrollToPos.to.line >= display.viewTo) ||
      display.maxLineChanged && cm.options.lineWrapping;
    op.update = op.mustUpdate &&
      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);
  }

  function endOperation_W1(op) {
    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
  }

  function endOperation_R2(op) {
    var cm = op.cm, display = cm.display;
    if (op.updatedDisplay) updateHeightsInViewport(cm);

    op.barMeasure = measureForScrollbars(cm);

    // If the max line changed since it was last measured, measure it,
    // and ensure the document's width matches it.
    // updateDisplay_W2 will use these properties to do the actual resizing
    if (display.maxLineChanged && !cm.options.lineWrapping) {
      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
      cm.display.sizerWidth = op.adjustWidthTo;
      op.barMeasure.scrollWidth =
        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);
      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));
    }

    if (op.updatedDisplay || op.selectionChanged)
      op.preparedSelection = display.input.prepareSelection();
  }

  function endOperation_W2(op) {
    var cm = op.cm;

    if (op.adjustWidthTo != null) {
      cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
      if (op.maxScrollLeft < cm.doc.scrollLeft)
        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
      cm.display.maxLineChanged = false;
    }

    if (op.preparedSelection)
      cm.display.input.showSelection(op.preparedSelection);
    if (op.updatedDisplay || op.startHeight != cm.doc.height)
      updateScrollbars(cm, op.barMeasure);
    if (op.updatedDisplay)
      setDocumentHeight(cm, op.barMeasure);

    if (op.selectionChanged) restartBlink(cm);

    if (cm.state.focused && op.updateInput)
      cm.display.input.reset(op.typing);
    if (op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus()))
      ensureFocus(op.cm);
  }

  function endOperation_finish(op) {
    var cm = op.cm, display = cm.display, doc = cm.doc;

    if (op.updatedDisplay) postUpdateDisplay(cm, op.update);

    // Abort mouse wheel delta measurement, when scrolling explicitly
    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))
      display.wheelStartX = display.wheelStartY = null;

    // Propagate the scroll position to the actual DOM scroller
    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {
      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));
      display.scrollbars.setScrollTop(doc.scrollTop);
      display.scroller.scrollTop = doc.scrollTop;
    }
    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {
      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - display.scroller.clientWidth, op.scrollLeft));
      display.scrollbars.setScrollLeft(doc.scrollLeft);
      display.scroller.scrollLeft = doc.scrollLeft;
      alignHorizontally(cm);
    }
    // If we need to scroll a specific position into view, do so.
    if (op.scrollToPos) {
      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),
                                     clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
      if (op.scrollToPos.isCursor && cm.state.focused) maybeScrollWindow(cm, coords);
    }

    // Fire events for markers that are hidden/unidden by editing or
    // undoing
    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
    if (hidden) for (var i = 0; i < hidden.length; ++i)
      if (!hidden[i].lines.length) signal(hidden[i], "hide");
    if (unhidden) for (var i = 0; i < unhidden.length; ++i)
      if (unhidden[i].lines.length) signal(unhidden[i], "unhide");

    if (display.wrapper.offsetHeight)
      doc.scrollTop = cm.display.scroller.scrollTop;

    // Fire change events, and delayed event handlers
    if (op.changeObjs)
      signal(cm, "changes", cm, op.changeObjs);
    if (op.update)
      op.update.finish();
  }

  // Run the given function in an operation
  function runInOp(cm, f) {
    if (cm.curOp) return f();
    startOperation(cm);
    try { return f(); }
    finally { endOperation(cm); }
  }
  // Wraps a function in an operation. Returns the wrapped function.
  function operation(cm, f) {
    return function() {
      if (cm.curOp) return f.apply(cm, arguments);
      startOperation(cm);
      try { return f.apply(cm, arguments); }
      finally { endOperation(cm); }
    };
  }
  // Used to add methods to editor and doc instances, wrapping them in
  // operations.
  function methodOp(f) {
    return function() {
      if (this.curOp) return f.apply(this, arguments);
      startOperation(this);
      try { return f.apply(this, arguments); }
      finally { endOperation(this); }
    };
  }
  function docMethodOp(f) {
    return function() {
      var cm = this.cm;
      if (!cm || cm.curOp) return f.apply(this, arguments);
      startOperation(cm);
      try { return f.apply(this, arguments); }
      finally { endOperation(cm); }
    };
  }

  // VIEW TRACKING

  // These objects are used to represent the visible (currently drawn)
  // part of the document. A LineView may correspond to multiple
  // logical lines, if those are connected by collapsed ranges.
  function LineView(doc, line, lineN) {
    // The starting line
    this.line = line;
    // Continuing lines, if any
    this.rest = visualLineContinued(line);
    // Number of logical lines in this visual line
    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
    this.node = this.text = null;
    this.hidden = lineIsHidden(doc, line);
  }

  // Create a range of LineView objects for the given lines.
  function buildViewArray(cm, from, to) {
    var array = [], nextPos;
    for (var pos = from; pos < to; pos = nextPos) {
      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
      nextPos = pos + view.size;
      array.push(view);
    }
    return array;
  }

  // Updates the display.view data structure for a given change to the
  // document. From and to are in pre-change coordinates. Lendiff is
  // the amount of lines added or subtracted by the change. This is
  // used for changes that span multiple lines, or change the way
  // lines are divided into visual lines. regLineChange (below)
  // registers single-line changes.
  function regChange(cm, from, to, lendiff) {
    if (from == null) from = cm.doc.first;
    if (to == null) to = cm.doc.first + cm.doc.size;
    if (!lendiff) lendiff = 0;

    var display = cm.display;
    if (lendiff && to < display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers > from))
      display.updateLineNumbers = from;

    cm.curOp.viewChanged = true;

    if (from >= display.viewTo) { // Change after
      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)
        resetView(cm);
    } else if (to <= display.viewFrom) { // Change before
      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
        resetView(cm);
      } else {
        display.viewFrom += lendiff;
        display.viewTo += lendiff;
      }
    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap
      resetView(cm);
    } else if (from <= display.viewFrom) { // Top overlap
      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cut) {
        display.view = display.view.slice(cut.index);
        display.viewFrom = cut.lineN;
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    } else if (to >= display.viewTo) { // Bottom overlap
      var cut = viewCuttingPoint(cm, from, from, -1);
      if (cut) {
        display.view = display.view.slice(0, cut.index);
        display.viewTo = cut.lineN;
      } else {
        resetView(cm);
      }
    } else { // Gap in the middle
      var cutTop = viewCuttingPoint(cm, from, from, -1);
      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cutTop && cutBot) {
        display.view = display.view.slice(0, cutTop.index)
          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))
          .concat(display.view.slice(cutBot.index));
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    }

    var ext = display.externalMeasured;
    if (ext) {
      if (to < ext.lineN)
        ext.lineN += lendiff;
      else if (from < ext.lineN + ext.size)
        display.externalMeasured = null;
    }
  }

  // Register a change to a single line. Type must be one of "text",
  // "gutter", "class", "widget"
  function regLineChange(cm, line, type) {
    cm.curOp.viewChanged = true;
    var display = cm.display, ext = cm.display.externalMeasured;
    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)
      display.externalMeasured = null;

    if (line < display.viewFrom || line >= display.viewTo) return;
    var lineView = display.view[findViewIndex(cm, line)];
    if (lineView.node == null) return;
    var arr = lineView.changes || (lineView.changes = []);
    if (indexOf(arr, type) == -1) arr.push(type);
  }

  // Clear the view.
  function resetView(cm) {
    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
    cm.display.view = [];
    cm.display.viewOffset = 0;
  }

  // Find the view element corresponding to a given line. Return null
  // when the line isn't visible.
  function findViewIndex(cm, n) {
    if (n >= cm.display.viewTo) return null;
    n -= cm.display.viewFrom;
    if (n < 0) return null;
    var view = cm.display.view;
    for (var i = 0; i < view.length; i++) {
      n -= view[i].size;
      if (n < 0) return i;
    }
  }

  function viewCuttingPoint(cm, oldN, newN, dir) {
    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)
      return {index: index, lineN: newN};
    for (var i = 0, n = cm.display.viewFrom; i < index; i++)
      n += view[i].size;
    if (n != oldN) {
      if (dir > 0) {
        if (index == view.length - 1) return null;
        diff = (n + view[index].size) - oldN;
        index++;
      } else {
        diff = n - oldN;
      }
      oldN += diff; newN += diff;
    }
    while (visualLineNo(cm.doc, newN) != newN) {
      if (index == (dir < 0 ? 0 : view.length - 1)) return null;
      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
      index += dir;
    }
    return {index: index, lineN: newN};
  }

  // Force the view to cover a given range, adding empty view element
  // or clipping off existing ones as needed.
  function adjustView(cm, from, to) {
    var display = cm.display, view = display.view;
    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
      display.view = buildViewArray(cm, from, to);
      display.viewFrom = from;
    } else {
      if (display.viewFrom > from)
        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
      else if (display.viewFrom < from)
        display.view = display.view.slice(findViewIndex(cm, from));
      display.viewFrom = from;
      if (display.viewTo < to)
        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
      else if (display.viewTo > to)
        display.view = display.view.slice(0, findViewIndex(cm, to));
    }
    display.viewTo = to;
  }

  // Count the number of lines in the view whose DOM representation is
  // out of date (or nonexistent).
  function countDirtyView(cm) {
    var view = cm.display.view, dirty = 0;
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty;
    }
    return dirty;
  }

  // EVENT HANDLERS

  // Attach the necessary event handlers when initializing the editor
  function registerEventHandlers(cm) {
    var d = cm.display;
    on(d.scroller, "mousedown", operation(cm, onMouseDown));
    // Older IE's will not fire a second mousedown for a double click
    if (ie && ie_version < 11)
      on(d.scroller, "dblclick", operation(cm, function(e) {
        if (signalDOMEvent(cm, e)) return;
        var pos = posFromMouse(cm, e);
        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;
        e_preventDefault(e);
        var word = cm.findWordAt(pos);
        extendSelection(cm.doc, word.anchor, word.head);
      }));
    else
      on(d.scroller, "dblclick", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });
    // Some browsers fire contextmenu *after* opening the menu, at
    // which point we can't mess with it anymore. Context menu is
    // handled in onMouseDown for these browsers.
    if (!captureRightClick) on(d.scroller, "contextmenu", function(e) {onContextMenu(cm, e);});

    // Used to suppress mouse event handling when a touch happens
    var touchFinished, prevTouch = {end: 0};
    function finishTouch() {
      if (d.activeTouch) {
        touchFinished = setTimeout(function() {d.activeTouch = null;}, 1000);
        prevTouch = d.activeTouch;
        prevTouch.end = +new Date;
      }
    };
    function isMouseLikeTouchEvent(e) {
      if (e.touches.length != 1) return false;
      var touch = e.touches[0];
      return touch.radiusX <= 1 && touch.radiusY <= 1;
    }
    function farAway(touch, other) {
      if (other.left == null) return true;
      var dx = other.left - touch.left, dy = other.top - touch.top;
      return dx * dx + dy * dy > 20 * 20;
    }
    on(d.scroller, "touchstart", function(e) {
      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {
        clearTimeout(touchFinished);
        var now = +new Date;
        d.activeTouch = {start: now, moved: false,
                         prev: now - prevTouch.end <= 300 ? prevTouch : null};
        if (e.touches.length == 1) {
          d.activeTouch.left = e.touches[0].pageX;
          d.activeTouch.top = e.touches[0].pageY;
        }
      }
    });
    on(d.scroller, "touchmove", function() {
      if (d.activeTouch) d.activeTouch.moved = true;
    });
    on(d.scroller, "touchend", function(e) {
      var touch = d.activeTouch;
      if (touch && !eventInWidget(d, e) && touch.left != null &&
          !touch.moved && new Date - touch.start < 300) {
        var pos = cm.coordsChar(d.activeTouch, "page"), range;
        if (!touch.prev || farAway(touch, touch.prev)) // Single tap
          range = new Range(pos, pos);
        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap
          range = cm.findWordAt(pos);
        else // Triple tap
          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
        cm.setSelection(range.anchor, range.head);
        cm.focus();
        e_preventDefault(e);
      }
      finishTouch();
    });
    on(d.scroller, "touchcancel", finishTouch);

    // Sync scrolling between fake scrollbars and real scrollable
    // area, ensure viewport is updated when scrolling.
    on(d.scroller, "scroll", function() {
      if (d.scroller.clientHeight) {
        setScrollTop(cm, d.scroller.scrollTop);
        setScrollLeft(cm, d.scroller.scrollLeft, true);
        signal(cm, "scroll", cm);
      }
    });

    // Listen to wheel events in order to try and update the viewport on time.
    on(d.scroller, "mousewheel", function(e){onScrollWheel(cm, e);});
    on(d.scroller, "DOMMouseScroll", function(e){onScrollWheel(cm, e);});

    // Prevent wrapper from ever scrolling
    on(d.wrapper, "scroll", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });

    d.dragFunctions = {
      enter: function(e) {if (!signalDOMEvent(cm, e)) e_stop(e);},
      over: function(e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},
      start: function(e){onDragStart(cm, e);},
      drop: operation(cm, onDrop),
      leave: function(e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}
    };

    var inp = d.input.getField();
    on(inp, "keyup", function(e) { onKeyUp.call(cm, e); });
    on(inp, "keydown", operation(cm, onKeyDown));
    on(inp, "keypress", operation(cm, onKeyPress));
    on(inp, "focus", bind(onFocus, cm));
    on(inp, "blur", bind(onBlur, cm));
  }

  function dragDropChanged(cm, value, old) {
    var wasOn = old && old != CodeMirror.Init;
    if (!value != !wasOn) {
      var funcs = cm.display.dragFunctions;
      var toggle = value ? on : off;
      toggle(cm.display.scroller, "dragstart", funcs.start);
      toggle(cm.display.scroller, "dragenter", funcs.enter);
      toggle(cm.display.scroller, "dragover", funcs.over);
      toggle(cm.display.scroller, "dragleave", funcs.leave);
      toggle(cm.display.scroller, "drop", funcs.drop);
    }
  }

  // Called when the window resizes
  function onResize(cm) {
    var d = cm.display;
    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)
      return;
    // Might be a text scaling operation, clear size caches.
    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
    d.scrollbarsClipped = false;
    cm.setSize();
  }

  // MOUSE EVENTS

  // Return true when the given mouse event happened in a widget
  function eventInWidget(display, e) {
    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
      if (!n || (n.nodeType == 1 && n.getAttribute("cm-ignore-events") == "true") ||
          (n.parentNode == display.sizer && n != display.mover))
        return true;
    }
  }

  // Given a mouse event, find the corresponding position. If liberal
  // is false, it checks whether a gutter or scrollbar was clicked,
  // and returns null if it was. forRect is used by rectangular
  // selections, and tries to estimate a character position even for
  // coordinates beyond the right of the text.
  function posFromMouse(cm, e, liberal, forRect) {
    var display = cm.display;
    if (!liberal && e_target(e).getAttribute("cm-not-content") == "true") return null;

    var x, y, space = display.lineSpace.getBoundingClientRect();
    // Fails unpredictably on IE[67] when mouse is dragged around quickly.
    try { x = e.clientX - space.left; y = e.clientY - space.top; }
    catch (e) { return null; }
    var coords = coordsChar(cm, x, y), line;
    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
    }
    return coords;
  }

  // A mouse down can be a single click, double click, triple click,
  // start of selection drag, start of text drag, new cursor
  // (ctrl-click), rectangle drag (alt-drag), or xwin
  // middle-click-paste. Or it might be a click on something we should
  // not interfere with, such as a scrollbar or widget.
  function onMouseDown(e) {
    var cm = this, display = cm.display;
    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) return;
    display.shift = e.shiftKey;

    if (eventInWidget(display, e)) {
      if (!webkit) {
        // Briefly turn off draggability, to allow widgets to do
        // normal dragging things.
        display.scroller.draggable = false;
        setTimeout(function(){display.scroller.draggable = true;}, 100);
      }
      return;
    }
    if (clickInGutter(cm, e)) return;
    var start = posFromMouse(cm, e);
    window.focus();

    switch (e_button(e)) {
    case 1:
      // #3261: make sure, that we're not starting a second selection
      if (cm.state.selectingText)
        cm.state.selectingText(e);
      else if (start)
        leftButtonDown(cm, e, start);
      else if (e_target(e) == display.scroller)
        e_preventDefault(e);
      break;
    case 2:
      if (webkit) cm.state.lastMiddleDown = +new Date;
      if (start) extendSelection(cm.doc, start);
      setTimeout(function() {display.input.focus();}, 20);
      e_preventDefault(e);
      break;
    case 3:
      if (captureRightClick) onContextMenu(cm, e);
      else delayBlurEvent(cm);
      break;
    }
  }

  var lastClick, lastDoubleClick;
  function leftButtonDown(cm, e, start) {
    if (ie) setTimeout(bind(ensureFocus, cm), 0);
    else cm.curOp.focus = activeElt();

    var now = +new Date, type;
    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {
      type = "triple";
    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {
      type = "double";
      lastDoubleClick = {time: now, pos: start};
    } else {
      type = "single";
      lastClick = {time: now, pos: start};
    }

    var sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey, contained;
    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&
        type == "single" && (contained = sel.contains(start)) > -1 &&
        (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) &&
        (cmp(contained.to(), start) > 0 || start.xRel < 0))
      leftButtonStartDrag(cm, e, start, modifier);
    else
      leftButtonSelect(cm, e, start, type, modifier);
  }

  // Start a text drag. When it ends, see if any dragging actually
  // happen, and treat as a click if it didn't.
  function leftButtonStartDrag(cm, e, start, modifier) {
    var display = cm.display, startTime = +new Date;
    var dragEnd = operation(cm, function(e2) {
      if (webkit) display.scroller.draggable = false;
      cm.state.draggingText = false;
      off(document, "mouseup", dragEnd);
      off(display.scroller, "drop", dragEnd);
      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {
        e_preventDefault(e2);
        if (!modifier && +new Date - 200 < startTime)
          extendSelection(cm.doc, start);
        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)
        if (webkit || ie && ie_version == 9)
          setTimeout(function() {document.body.focus(); display.input.focus();}, 20);
        else
          display.input.focus();
      }
    });
    // Let the drag handler handle this.
    if (webkit) display.scroller.draggable = true;
    cm.state.draggingText = dragEnd;
    // IE's approach to draggable
    if (display.scroller.dragDrop) display.scroller.dragDrop();
    on(document, "mouseup", dragEnd);
    on(display.scroller, "drop", dragEnd);
  }

  // Normal selection, as opposed to text dragging.
  function leftButtonSelect(cm, e, start, type, addNew) {
    var display = cm.display, doc = cm.doc;
    e_preventDefault(e);

    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;
    if (addNew && !e.shiftKey) {
      ourIndex = doc.sel.contains(start);
      if (ourIndex > -1)
        ourRange = ranges[ourIndex];
      else
        ourRange = new Range(start, start);
    } else {
      ourRange = doc.sel.primary();
      ourIndex = doc.sel.primIndex;
    }

    if (chromeOS ? e.shiftKey && e.metaKey : e.altKey) {
      type = "rect";
      if (!addNew) ourRange = new Range(start, start);
      start = posFromMouse(cm, e, true, true);
      ourIndex = -1;
    } else if (type == "double") {
      var word = cm.findWordAt(start);
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, word.anchor, word.head);
      else
        ourRange = word;
    } else if (type == "triple") {
      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, line.anchor, line.head);
      else
        ourRange = line;
    } else {
      ourRange = extendRange(doc, ourRange, start);
    }

    if (!addNew) {
      ourIndex = 0;
      setSelection(doc, new Selection([ourRange], 0), sel_mouse);
      startSel = doc.sel;
    } else if (ourIndex == -1) {
      ourIndex = ranges.length;
      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),
                   {scroll: false, origin: "*mouse"});
    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == "single" && !e.shiftKey) {
      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),
                   {scroll: false, origin: "*mouse"});
      startSel = doc.sel;
    } else {
      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);
    }

    var lastPos = start;
    function extendTo(pos) {
      if (cmp(lastPos, pos) == 0) return;
      lastPos = pos;

      if (type == "rect") {
        var ranges = [], tabSize = cm.options.tabSize;
        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);
        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);
        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));
             line <= end; line++) {
          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
          if (left == right)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
          else if (text.length > leftPos)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
        }
        if (!ranges.length) ranges.push(new Range(start, start));
        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),
                     {origin: "*mouse", scroll: false});
        cm.scrollIntoView(pos);
      } else {
        var oldRange = ourRange;
        var anchor = oldRange.anchor, head = pos;
        if (type != "single") {
          if (type == "double")
            var range = cm.findWordAt(pos);
          else
            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));
          if (cmp(range.anchor, anchor) > 0) {
            head = range.head;
            anchor = minPos(oldRange.from(), range.anchor);
          } else {
            head = range.anchor;
            anchor = maxPos(oldRange.to(), range.head);
          }
        }
        var ranges = startSel.ranges.slice(0);
        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);
        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);
      }
    }

    var editorSize = display.wrapper.getBoundingClientRect();
    // Used to ensure timeout re-tries don't fire when another extend
    // happened in the meantime (clearTimeout isn't reliable -- at
    // least on Chrome, the timeouts still happen even when cleared,
    // if the clear happens after their scheduled firing time).
    var counter = 0;

    function extend(e) {
      var curCount = ++counter;
      var cur = posFromMouse(cm, e, true, type == "rect");
      if (!cur) return;
      if (cmp(cur, lastPos) != 0) {
        cm.curOp.focus = activeElt();
        extendTo(cur);
        var visible = visibleLines(display, doc);
        if (cur.line >= visible.to || cur.line < visible.from)
          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);
      } else {
        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
        if (outside) setTimeout(operation(cm, function() {
          if (counter != curCount) return;
          display.scroller.scrollTop += outside;
          extend(e);
        }), 50);
      }
    }

    function done(e) {
      cm.state.selectingText = false;
      counter = Infinity;
      e_preventDefault(e);
      display.input.focus();
      off(document, "mousemove", move);
      off(document, "mouseup", up);
      doc.history.lastSelOrigin = null;
    }

    var move = operation(cm, function(e) {
      if (!e_button(e)) done(e);
      else extend(e);
    });
    var up = operation(cm, done);
    cm.state.selectingText = up;
    on(document, "mousemove", move);
    on(document, "mouseup", up);
  }

  // Determines whether an event happened in the gutter, and fires the
  // handlers for the corresponding event.
  function gutterEvent(cm, e, type, prevent) {
    try { var mX = e.clientX, mY = e.clientY; }
    catch(e) { return false; }
    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false;
    if (prevent) e_preventDefault(e);

    var display = cm.display;
    var lineBox = display.lineDiv.getBoundingClientRect();

    if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);
    mY -= lineBox.top - display.viewOffset;

    for (var i = 0; i < cm.options.gutters.length; ++i) {
      var g = display.gutters.childNodes[i];
      if (g && g.getBoundingClientRect().right >= mX) {
        var line = lineAtHeight(cm.doc, mY);
        var gutter = cm.options.gutters[i];
        signal(cm, type, cm, line, gutter, e);
        return e_defaultPrevented(e);
      }
    }
  }

  function clickInGutter(cm, e) {
    return gutterEvent(cm, e, "gutterClick", true);
  }

  // Kludge to work around strange IE behavior where it'll sometimes
  // re-fire a series of drag-related events right after the drop (#1551)
  var lastDrop = 0;

  function onDrop(e) {
    var cm = this;
    clearDragCursor(cm);
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))
      return;
    e_preventDefault(e);
    if (ie) lastDrop = +new Date;
    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
    if (!pos || cm.isReadOnly()) return;
    // Might be a file drop, in which case we simply extract the text
    // and insert it.
    if (files && files.length && window.FileReader && window.File) {
      var n = files.length, text = Array(n), read = 0;
      var loadFile = function(file, i) {
        if (cm.options.allowDropFileTypes &&
            indexOf(cm.options.allowDropFileTypes, file.type) == -1)
          return;

        var reader = new FileReader;
        reader.onload = operation(cm, function() {
          var content = reader.result;
          if (/[\x00-\x08\x0e-\x1f]{2}/.test(content)) content = "";
          text[i] = content;
          if (++read == n) {
            pos = clipPos(cm.doc, pos);
            var change = {from: pos, to: pos,
                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),
                          origin: "paste"};
            makeChange(cm.doc, change);
            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));
          }
        });
        reader.readAsText(file);
      };
      for (var i = 0; i < n; ++i) loadFile(files[i], i);
    } else { // Normal drop
      // Don't do a replace if the drop happened inside of the selected text.
      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
        cm.state.draggingText(e);
        // Ensure the editor is re-focused
        setTimeout(function() {cm.display.input.focus();}, 20);
        return;
      }
      try {
        var text = e.dataTransfer.getData("Text");
        if (text) {
          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))
            var selected = cm.listSelections();
          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
          if (selected) for (var i = 0; i < selected.length; ++i)
            replaceRange(cm.doc, "", selected[i].anchor, selected[i].head, "drag");
          cm.replaceSelection(text, "around", "paste");
          cm.display.input.focus();
        }
      }
      catch(e){}
    }
  }

  function onDragStart(cm, e) {
    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;

    e.dataTransfer.setData("Text", cm.getSelection());
    e.dataTransfer.effectAllowed = "copyMove"

    // Use dummy image instead of default browsers image.
    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.
    if (e.dataTransfer.setDragImage && !safari) {
      var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
      img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
      if (presto) {
        img.width = img.height = 1;
        cm.display.wrapper.appendChild(img);
        // Force a relayout, or Opera won't use our image for some obscure reason
        img._top = img.offsetTop;
      }
      e.dataTransfer.setDragImage(img, 0, 0);
      if (presto) img.parentNode.removeChild(img);
    }
  }

  function onDragOver(cm, e) {
    var pos = posFromMouse(cm, e);
    if (!pos) return;
    var frag = document.createDocumentFragment();
    drawSelectionCursor(cm, pos, frag);
    if (!cm.display.dragCursor) {
      cm.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors");
      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);
    }
    removeChildrenAndAdd(cm.display.dragCursor, frag);
  }

  function clearDragCursor(cm) {
    if (cm.display.dragCursor) {
      cm.display.lineSpace.removeChild(cm.display.dragCursor);
      cm.display.dragCursor = null;
    }
  }

  // SCROLL EVENTS

  // Sync the scrollable area and scrollbars, ensure the viewport
  // covers the visible area.
  function setScrollTop(cm, val) {
    if (Math.abs(cm.doc.scrollTop - val) < 2) return;
    cm.doc.scrollTop = val;
    if (!gecko) updateDisplaySimple(cm, {top: val});
    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;
    cm.display.scrollbars.setScrollTop(val);
    if (gecko) updateDisplaySimple(cm);
    startWorker(cm, 100);
  }
  // Sync scroller and scrollbar, ensure the gutter elements are
  // aligned.
  function setScrollLeft(cm, val, isScroller) {
    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;
    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);
    cm.doc.scrollLeft = val;
    alignHorizontally(cm);
    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;
    cm.display.scrollbars.setScrollLeft(val);
  }

  // Since the delta values reported on mouse wheel events are
  // unstandardized between browsers and even browser versions, and
  // generally horribly unpredictable, this code starts by measuring
  // the scroll effect that the first few mouse wheel events have,
  // and, from that, detects the way it can convert deltas to pixel
  // offsets afterwards.
  //
  // The reason we want to know the amount a wheel event will scroll
  // is that it gives us a chance to update the display before the
  // actual scrolling happens, reducing flickering.

  var wheelSamples = 0, wheelPixelsPerUnit = null;
  // Fill in a browser-detected starting value on browsers where we
  // know one. These don't have to be accurate -- the result of them
  // being wrong would just be a slight flicker on the first wheel
  // scroll (if it is large enough).
  if (ie) wheelPixelsPerUnit = -.53;
  else if (gecko) wheelPixelsPerUnit = 15;
  else if (chrome) wheelPixelsPerUnit = -.7;
  else if (safari) wheelPixelsPerUnit = -1/3;

  var wheelEventDelta = function(e) {
    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;
    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;
    else if (dy == null) dy = e.wheelDelta;
    return {x: dx, y: dy};
  };
  CodeMirror.wheelEventPixels = function(e) {
    var delta = wheelEventDelta(e);
    delta.x *= wheelPixelsPerUnit;
    delta.y *= wheelPixelsPerUnit;
    return delta;
  };

  function onScrollWheel(cm, e) {
    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;

    var display = cm.display, scroll = display.scroller;
    // Quit if there's nothing to scroll here
    var canScrollX = scroll.scrollWidth > scroll.clientWidth;
    var canScrollY = scroll.scrollHeight > scroll.clientHeight;
    if (!(dx && canScrollX || dy && canScrollY)) return;

    // Webkit browsers on OS X abort momentum scrolls when the target
    // of the scroll event is removed from the scrollable element.
    // This hack (see related code in patchDisplay) makes sure the
    // element is kept around.
    if (dy && mac && webkit) {
      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
        for (var i = 0; i < view.length; i++) {
          if (view[i].node == cur) {
            cm.display.currentWheelTarget = cur;
            break outer;
          }
        }
      }
    }

    // On some browsers, horizontal scrolling will cause redraws to
    // happen before the gutter has been realigned, causing it to
    // wriggle around in a most unseemly way. When we have an
    // estimated pixels/delta value, we just handle horizontal
    // scrolling entirely here. It'll be slightly off from native, but
    // better than glitching out.
    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {
      if (dy && canScrollY)
        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));
      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));
      // Only prevent default scrolling if vertical scrolling is
      // actually possible. Otherwise, it causes vertical scroll
      // jitter on OSX trackpads when deltaX is small and deltaY
      // is large (issue #3579)
      if (!dy || (dy && canScrollY))
        e_preventDefault(e);
      display.wheelStartX = null; // Abort measurement, if in progress
      return;
    }

    // 'Project' the visible viewport to cover the area that is being
    // scrolled into view (if we know enough to estimate it).
    if (dy && wheelPixelsPerUnit != null) {
      var pixels = dy * wheelPixelsPerUnit;
      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
      if (pixels < 0) top = Math.max(0, top + pixels - 50);
      else bot = Math.min(cm.doc.height, bot + pixels + 50);
      updateDisplaySimple(cm, {top: top, bottom: bot});
    }

    if (wheelSamples < 20) {
      if (display.wheelStartX == null) {
        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;
        display.wheelDX = dx; display.wheelDY = dy;
        setTimeout(function() {
          if (display.wheelStartX == null) return;
          var movedX = scroll.scrollLeft - display.wheelStartX;
          var movedY = scroll.scrollTop - display.wheelStartY;
          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||
            (movedX && display.wheelDX && movedX / display.wheelDX);
          display.wheelStartX = display.wheelStartY = null;
          if (!sample) return;
          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
          ++wheelSamples;
        }, 200);
      } else {
        display.wheelDX += dx; display.wheelDY += dy;
      }
    }
  }

  // KEY EVENTS

  // Run a handler that was bound to a key.
  function doHandleBinding(cm, bound, dropShift) {
    if (typeof bound == "string") {
      bound = commands[bound];
      if (!bound) return false;
    }
    // Ensure previous input has been read, so that the handler sees a
    // consistent view of the document
    cm.display.input.ensurePolled();
    var prevShift = cm.display.shift, done = false;
    try {
      if (cm.isReadOnly()) cm.state.suppressEdits = true;
      if (dropShift) cm.display.shift = false;
      done = bound(cm) != Pass;
    } finally {
      cm.display.shift = prevShift;
      cm.state.suppressEdits = false;
    }
    return done;
  }

  function lookupKeyForEditor(cm, name, handle) {
    for (var i = 0; i < cm.state.keyMaps.length; i++) {
      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);
      if (result) return result;
    }
    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))
      || lookupKey(name, cm.options.keyMap, handle, cm);
  }

  var stopSeq = new Delayed;
  function dispatchKey(cm, name, e, handle) {
    var seq = cm.state.keySeq;
    if (seq) {
      if (isModifierKey(name)) return "handled";
      stopSeq.set(50, function() {
        if (cm.state.keySeq == seq) {
          cm.state.keySeq = null;
          cm.display.input.reset();
        }
      });
      name = seq + " " + name;
    }
    var result = lookupKeyForEditor(cm, name, handle);

    if (result == "multi")
      cm.state.keySeq = name;
    if (result == "handled")
      signalLater(cm, "keyHandled", cm, name, e);

    if (result == "handled" || result == "multi") {
      e_preventDefault(e);
      restartBlink(cm);
    }

    if (seq && !result && /\'$/.test(name)) {
      e_preventDefault(e);
      return true;
    }
    return !!result;
  }

  // Handle a key from the keydown event.
  function handleKeyBinding(cm, e) {
    var name = keyName(e, true);
    if (!name) return false;

    if (e.shiftKey && !cm.state.keySeq) {
      // First try to resolve full name (including 'Shift-'). Failing
      // that, see if there is a cursor-motion command (starting with
      // 'go') bound to the keyname without 'Shift-'.
      return dispatchKey(cm, "Shift-" + name, e, function(b) {return doHandleBinding(cm, b, true);})
          || dispatchKey(cm, name, e, function(b) {
               if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion)
                 return doHandleBinding(cm, b);
             });
    } else {
      return dispatchKey(cm, name, e, function(b) { return doHandleBinding(cm, b); });
    }
  }

  // Handle a key from the keypress event
  function handleCharBinding(cm, e, ch) {
    return dispatchKey(cm, "'" + ch + "'", e,
                       function(b) { return doHandleBinding(cm, b, true); });
  }

  var lastStoppedKey = null;
  function onKeyDown(e) {
    var cm = this;
    cm.curOp.focus = activeElt();
    if (signalDOMEvent(cm, e)) return;
    // IE does strange things with escape.
    if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false;
    var code = e.keyCode;
    cm.display.shift = code == 16 || e.shiftKey;
    var handled = handleKeyBinding(cm, e);
    if (presto) {
      lastStoppedKey = handled ? code : null;
      // Opera has no cut event... we try to at least catch the key combo
      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))
        cm.replaceSelection("", null, "cut");
    }

    // Turn mouse into crosshair when Alt is held on Mac.
    if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
      showCrossHair(cm);
  }

  function showCrossHair(cm) {
    var lineDiv = cm.display.lineDiv;
    addClass(lineDiv, "CodeMirror-crosshair");

    function up(e) {
      if (e.keyCode == 18 || !e.altKey) {
        rmClass(lineDiv, "CodeMirror-crosshair");
        off(document, "keyup", up);
        off(document, "mouseover", up);
      }
    }
    on(document, "keyup", up);
    on(document, "mouseover", up);
  }

  function onKeyUp(e) {
    if (e.keyCode == 16) this.doc.sel.shift = false;
    signalDOMEvent(this, e);
  }

  function onKeyPress(e) {
    var cm = this;
    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return;
    var keyCode = e.keyCode, charCode = e.charCode;
    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}
    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) return;
    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
    if (handleCharBinding(cm, e, ch)) return;
    cm.display.input.onKeyPress(e);
  }

  // FOCUS/BLUR EVENTS

  function delayBlurEvent(cm) {
    cm.state.delayingBlurEvent = true;
    setTimeout(function() {
      if (cm.state.delayingBlurEvent) {
        cm.state.delayingBlurEvent = false;
        onBlur(cm);
      }
    }, 100);
  }

  function onFocus(cm) {
    if (cm.state.delayingBlurEvent) cm.state.delayingBlurEvent = false;

    if (cm.options.readOnly == "nocursor") return;
    if (!cm.state.focused) {
      signal(cm, "focus", cm);
      cm.state.focused = true;
      addClass(cm.display.wrapper, "CodeMirror-focused");
      // This test prevents this from firing when a context
      // menu is closed (since the input reset would kill the
      // select-all detection hack)
      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
        cm.display.input.reset();
        if (webkit) setTimeout(function() { cm.display.input.reset(true); }, 20); // Issue #1730
      }
      cm.display.input.receivedFocus();
    }
    restartBlink(cm);
  }
  function onBlur(cm) {
    if (cm.state.delayingBlurEvent) return;

    if (cm.state.focused) {
      signal(cm, "blur", cm);
      cm.state.focused = false;
      rmClass(cm.display.wrapper, "CodeMirror-focused");
    }
    clearInterval(cm.display.blinker);
    setTimeout(function() {if (!cm.state.focused) cm.display.shift = false;}, 150);
  }

  // CONTEXT MENU HANDLING

  // To make the context menu work, we need to briefly unhide the
  // textarea (making it as unobtrusive as possible) to let the
  // right-click take effect on it.
  function onContextMenu(cm, e) {
    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) return;
    if (signalDOMEvent(cm, e, "contextmenu")) return;
    cm.display.input.onContextMenu(e);
  }

  function contextMenuInGutter(cm, e) {
    if (!hasHandler(cm, "gutterContextMenu")) return false;
    return gutterEvent(cm, e, "gutterContextMenu", false);
  }

  // UPDATING

  // Compute the position of the end of a change (its 'to' property
  // refers to the pre-change end).
  var changeEnd = CodeMirror.changeEnd = function(change) {
    if (!change.text) return change.to;
    return Pos(change.from.line + change.text.length - 1,
               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));
  };

  // Adjust a position to refer to the post-change position of the
  // same text, or the end of the change if the change covers it.
  function adjustForChange(pos, change) {
    if (cmp(pos, change.from) < 0) return pos;
    if (cmp(pos, change.to) <= 0) return changeEnd(change);

    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
    if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch;
    return Pos(line, ch);
  }

  function computeSelAfterChange(doc, change) {
    var out = [];
    for (var i = 0; i < doc.sel.ranges.length; i++) {
      var range = doc.sel.ranges[i];
      out.push(new Range(adjustForChange(range.anchor, change),
                         adjustForChange(range.head, change)));
    }
    return normalizeSelection(out, doc.sel.primIndex);
  }

  function offsetPos(pos, old, nw) {
    if (pos.line == old.line)
      return Pos(nw.line, pos.ch - old.ch + nw.ch);
    else
      return Pos(nw.line + (pos.line - old.line), pos.ch);
  }

  // Used by replaceSelections to allow moving the selection to the
  // start or around the replaced test. Hint may be "start" or "around".
  function computeReplacedSel(doc, changes, hint) {
    var out = [];
    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;
    for (var i = 0; i < changes.length; i++) {
      var change = changes[i];
      var from = offsetPos(change.from, oldPrev, newPrev);
      var to = offsetPos(changeEnd(change), oldPrev, newPrev);
      oldPrev = change.to;
      newPrev = to;
      if (hint == "around") {
        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;
        out[i] = new Range(inv ? to : from, inv ? from : to);
      } else {
        out[i] = new Range(from, from);
      }
    }
    return new Selection(out, doc.sel.primIndex);
  }

  // Allow "beforeChange" event handlers to influence a change
  function filterChange(doc, change, update) {
    var obj = {
      canceled: false,
      from: change.from,
      to: change.to,
      text: change.text,
      origin: change.origin,
      cancel: function() { this.canceled = true; }
    };
    if (update) obj.update = function(from, to, text, origin) {
      if (from) this.from = clipPos(doc, from);
      if (to) this.to = clipPos(doc, to);
      if (text) this.text = text;
      if (origin !== undefined) this.origin = origin;
    };
    signal(doc, "beforeChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeChange", doc.cm, obj);

    if (obj.canceled) return null;
    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};
  }

  // Apply a change to a document, and add it to the document's
  // history, and propagating it to all linked documents.
  function makeChange(doc, change, ignoreReadOnly) {
    if (doc.cm) {
      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
      if (doc.cm.state.suppressEdits) return;
    }

    if (hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) {
      change = filterChange(doc, change, true);
      if (!change) return;
    }

    // Possibly split or suppress the update based on the presence
    // of read-only spans in its range.
    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
    if (split) {
      for (var i = split.length - 1; i >= 0; --i)
        makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [""] : change.text});
    } else {
      makeChangeInner(doc, change);
    }
  }

  function makeChangeInner(doc, change) {
    if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) return;
    var selAfter = computeSelAfterChange(doc, change);
    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);

    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
    var rebased = [];

    linkedDocs(doc, function(doc, sharedHist) {
      if (!sharedHist && indexOf(rebased, doc.history) == -1) {
        rebaseHist(doc.history, change);
        rebased.push(doc.history);
      }
      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));
    });
  }

  // Revert a change stored in a document's history.
  function makeChangeFromHistory(doc, type, allowSelectionOnly) {
    if (doc.cm && doc.cm.state.suppressEdits) return;

    var hist = doc.history, event, selAfter = doc.sel;
    var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;

    // Verify that there is a useable event (so that ctrl-z won't
    // needlessly clear selection events)
    for (var i = 0; i < source.length; i++) {
      event = source[i];
      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)
        break;
    }
    if (i == source.length) return;
    hist.lastOrigin = hist.lastSelOrigin = null;

    for (;;) {
      event = source.pop();
      if (event.ranges) {
        pushSelectionToHistory(event, dest);
        if (allowSelectionOnly && !event.equals(doc.sel)) {
          setSelection(doc, event, {clearRedo: false});
          return;
        }
        selAfter = event;
      }
      else break;
    }

    // Build up a reverse change object to add to the opposite history
    // stack (redo when undoing, and vice versa).
    var antiChanges = [];
    pushSelectionToHistory(selAfter, dest);
    dest.push({changes: antiChanges, generation: hist.generation});
    hist.generation = event.generation || ++hist.maxGeneration;

    var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange");

    for (var i = event.changes.length - 1; i >= 0; --i) {
      var change = event.changes[i];
      change.origin = type;
      if (filter && !filterChange(doc, change, false)) {
        source.length = 0;
        return;
      }

      antiChanges.push(historyChangeFromChange(doc, change));

      var after = i ? computeSelAfterChange(doc, change) : lst(source);
      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));
      if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});
      var rebased = [];

      // Propagate to the linked documents
      linkedDocs(doc, function(doc, sharedHist) {
        if (!sharedHist && indexOf(rebased, doc.history) == -1) {
          rebaseHist(doc.history, change);
          rebased.push(doc.history);
        }
        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));
      });
    }
  }

  // Sub-views need their line numbers shifted when text is added
  // above or below them in the parent document.
  function shiftDoc(doc, distance) {
    if (distance == 0) return;
    doc.first += distance;
    doc.sel = new Selection(map(doc.sel.ranges, function(range) {
      return new Range(Pos(range.anchor.line + distance, range.anchor.ch),
                       Pos(range.head.line + distance, range.head.ch));
    }), doc.sel.primIndex);
    if (doc.cm) {
      regChange(doc.cm, doc.first, doc.first - distance, distance);
      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)
        regLineChange(doc.cm, l, "gutter");
    }
  }

  // More lower-level change function, handling only a single document
  // (not linked ones).
  function makeChangeSingleDoc(doc, change, selAfter, spans) {
    if (doc.cm && !doc.cm.curOp)
      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);

    if (change.to.line < doc.first) {
      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));
      return;
    }
    if (change.from.line > doc.lastLine()) return;

    // Clip the change to the size of this doc
    if (change.from.line < doc.first) {
      var shift = change.text.length - 1 - (doc.first - change.from.line);
      shiftDoc(doc, shift);
      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),
                text: [lst(change.text)], origin: change.origin};
    }
    var last = doc.lastLine();
    if (change.to.line > last) {
      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),
                text: [change.text[0]], origin: change.origin};
    }

    change.removed = getBetween(doc, change.from, change.to);

    if (!selAfter) selAfter = computeSelAfterChange(doc, change);
    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans);
    else updateDoc(doc, change, spans);
    setSelectionNoUndo(doc, selAfter, sel_dontScroll);
  }

  // Handle the interaction of a change to a document with the editor
  // that this document is part of.
  function makeChangeSingleDocInEditor(cm, change, spans) {
    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;

    var recomputeMaxLength = false, checkWidthStart = from.line;
    if (!cm.options.lineWrapping) {
      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));
      doc.iter(checkWidthStart, to.line + 1, function(line) {
        if (line == display.maxLine) {
          recomputeMaxLength = true;
          return true;
        }
      });
    }

    if (doc.sel.contains(change.from, change.to) > -1)
      signalCursorActivity(cm);

    updateDoc(doc, change, spans, estimateHeight(cm));

    if (!cm.options.lineWrapping) {
      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
        var len = lineLength(line);
        if (len > display.maxLineLength) {
          display.maxLine = line;
          display.maxLineLength = len;
          display.maxLineChanged = true;
          recomputeMaxLength = false;
        }
      });
      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;
    }

    // Adjust frontier, schedule worker
    doc.frontier = Math.min(doc.frontier, from.line);
    startWorker(cm, 400);

    var lendiff = change.text.length - (to.line - from.line) - 1;
    // Remember that these lines changed, for updating the display
    if (change.full)
      regChange(cm);
    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))
      regLineChange(cm, from.line, "text");
    else
      regChange(cm, from.line, to.line + 1, lendiff);

    var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
    if (changeHandler || changesHandler) {
      var obj = {
        from: from, to: to,
        text: change.text,
        removed: change.removed,
        origin: change.origin
      };
      if (changeHandler) signalLater(cm, "change", cm, obj);
      if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
    }
    cm.display.selForContextMenu = null;
  }

  function replaceRange(doc, code, from, to, origin) {
    if (!to) to = from;
    if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }
    if (typeof code == "string") code = doc.splitLines(code);
    makeChange(doc, {from: from, to: to, text: code, origin: origin});
  }

  // SCROLLING THINGS INTO VIEW

  // If an editor sits on the top or bottom of the window, partially
  // scrolled out of view, this ensures that the cursor is visible.
  function maybeScrollWindow(cm, coords) {
    if (signalDOMEvent(cm, "scrollCursorIntoView")) return;

    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
    if (coords.top + box.top < 0) doScroll = true;
    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;
    if (doScroll != null && !phantom) {
      var scrollNode = elt("div", "\u200b", null, "position: absolute; top: " +
                           (coords.top - display.viewOffset - paddingTop(cm.display)) + "px; height: " +
                           (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + "px; left: " +
                           coords.left + "px; width: 2px;");
      cm.display.lineSpace.appendChild(scrollNode);
      scrollNode.scrollIntoView(doScroll);
      cm.display.lineSpace.removeChild(scrollNode);
    }
  }

  // Scroll a given position into view (immediately), verifying that
  // it actually became visible (as line heights are accurately
  // measured, the position of something may 'drift' during drawing).
  function scrollPosIntoView(cm, pos, end, margin) {
    if (margin == null) margin = 0;
    for (var limit = 0; limit < 5; limit++) {
      var changed = false, coords = cursorCoords(cm, pos);
      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left),
                                         Math.min(coords.top, endCoords.top) - margin,
                                         Math.max(coords.left, endCoords.left),
                                         Math.max(coords.bottom, endCoords.bottom) + margin);
      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
      if (scrollPos.scrollTop != null) {
        setScrollTop(cm, scrollPos.scrollTop);
        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;
      }
      if (scrollPos.scrollLeft != null) {
        setScrollLeft(cm, scrollPos.scrollLeft);
        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;
      }
      if (!changed) break;
    }
    return coords;
  }

  // Scroll a given set of coordinates into view (immediately).
  function scrollIntoView(cm, x1, y1, x2, y2) {
    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);
    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);
    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);
  }

  // Calculate a new scroll position needed to scroll the given
  // rectangle into view. Returns an object with scrollTop and
  // scrollLeft properties. When these are undefined, the
  // vertical/horizontal position does not need to be adjusted.
  function calculateScrollPos(cm, x1, y1, x2, y2) {
    var display = cm.display, snapMargin = textHeight(cm.display);
    if (y1 < 0) y1 = 0;
    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
    var screen = displayHeight(cm), result = {};
    if (y2 - y1 > screen) y2 = y1 + screen;
    var docBottom = cm.doc.height + paddingVert(display);
    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;
    if (y1 < screentop) {
      result.scrollTop = atTop ? 0 : y1;
    } else if (y2 > screentop + screen) {
      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);
      if (newTop != screentop) result.scrollTop = newTop;
    }

    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;
    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);
    var tooWide = x2 - x1 > screenw;
    if (tooWide) x2 = x1 + screenw;
    if (x1 < 10)
      result.scrollLeft = 0;
    else if (x1 < screenleft)
      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));
    else if (x2 > screenw + screenleft - 3)
      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;
    return result;
  }

  // Store a relative adjustment to the scroll position in the current
  // operation (to be applied when the operation finishes).
  function addToScrollPos(cm, left, top) {
    if (left != null || top != null) resolveScrollToPos(cm);
    if (left != null)
      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;
    if (top != null)
      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
  }

  // Make sure that at the end of the operation the current cursor is
  // shown.
  function ensureCursorVisible(cm) {
    resolveScrollToPos(cm);
    var cur = cm.getCursor(), from = cur, to = cur;
    if (!cm.options.lineWrapping) {
      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;
      to = Pos(cur.line, cur.ch + 1);
    }
    cm.curOp.scrollToPos = {from: from, to: to, margin: cm.options.cursorScrollMargin, isCursor: true};
  }

  // When an operation has its scrollToPos property set, and another
  // scroll action is applied before the end of the operation, this
  // 'simulates' scrolling that position into view in a cheap way, so
  // that the effect of intermediate scroll commands is not ignored.
  function resolveScrollToPos(cm) {
    var range = cm.curOp.scrollToPos;
    if (range) {
      cm.curOp.scrollToPos = null;
      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);
      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left),
                                    Math.min(from.top, to.top) - range.margin,
                                    Math.max(from.right, to.right),
                                    Math.max(from.bottom, to.bottom) + range.margin);
      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);
    }
  }

  // API UTILITIES

  // Indent the given line. The how parameter can be "smart",
  // "add"/null, "subtract", or "prev". When aggressive is false
  // (typically set to true for forced single-line indents), empty
  // lines are not indented, and places where the mode returns Pass
  // are left alone.
  function indentLine(cm, n, how, aggressive) {
    var doc = cm.doc, state;
    if (how == null) how = "add";
    if (how == "smart") {
      // Fall back to "prev" when the mode doesn't have an indentation
      // method.
      if (!doc.mode.indent) how = "prev";
      else state = getStateBefore(cm, n);
    }

    var tabSize = cm.options.tabSize;
    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
    if (line.stateAfter) line.stateAfter = null;
    var curSpaceString = line.text.match(/^\s*/)[0], indentation;
    if (!aggressive && !/\S/.test(line.text)) {
      indentation = 0;
      how = "not";
    } else if (how == "smart") {
      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
      if (indentation == Pass || indentation > 150) {
        if (!aggressive) return;
        how = "prev";
      }
    }
    if (how == "prev") {
      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);
      else indentation = 0;
    } else if (how == "add") {
      indentation = curSpace + cm.options.indentUnit;
    } else if (how == "subtract") {
      indentation = curSpace - cm.options.indentUnit;
    } else if (typeof how == "number") {
      indentation = curSpace + how;
    }
    indentation = Math.max(0, indentation);

    var indentString = "", pos = 0;
    if (cm.options.indentWithTabs)
      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += "\t";}
    if (pos < indentation) indentString += spaceStr(indentation - pos);

    if (indentString != curSpaceString) {
      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
      line.stateAfter = null;
      return true;
    } else {
      // Ensure that, if the cursor was in the whitespace at the start
      // of the line, it is moved to the end of that space.
      for (var i = 0; i < doc.sel.ranges.length; i++) {
        var range = doc.sel.ranges[i];
        if (range.head.line == n && range.head.ch < curSpaceString.length) {
          var pos = Pos(n, curSpaceString.length);
          replaceOneSelection(doc, i, new Range(pos, pos));
          break;
        }
      }
    }
  }

  // Utility for applying a change to a line by handle or number,
  // returning the number and optionally registering the line as
  // changed.
  function changeLine(doc, handle, changeType, op) {
    var no = handle, line = handle;
    if (typeof handle == "number") line = getLine(doc, clipLine(doc, handle));
    else no = lineNo(handle);
    if (no == null) return null;
    if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType);
    return line;
  }

  // Helper for deleting text near the selection(s), used to implement
  // backspace, delete, and similar functionality.
  function deleteNearSelection(cm, compute) {
    var ranges = cm.doc.sel.ranges, kill = [];
    // Build up a set of ranges to kill first, merging overlapping
    // ranges.
    for (var i = 0; i < ranges.length; i++) {
      var toKill = compute(ranges[i]);
      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
        var replaced = kill.pop();
        if (cmp(replaced.from, toKill.from) < 0) {
          toKill.from = replaced.from;
          break;
        }
      }
      kill.push(toKill);
    }
    // Next, remove those actual ranges.
    runInOp(cm, function() {
      for (var i = kill.length - 1; i >= 0; i--)
        replaceRange(cm.doc, "", kill[i].from, kill[i].to, "+delete");
      ensureCursorVisible(cm);
    });
  }

  // Used for horizontal relative motion. Dir is -1 or 1 (left or
  // right), unit can be "char", "column" (like char, but doesn't
  // cross line boundaries), "word" (across next word), or "group" (to
  // the start of next group of word or non-word-non-whitespace
  // chars). The visually param controls whether, in right-to-left
  // text, direction 1 means to move towards the next index in the
  // string, or towards the character to the right of the current
  // position. The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosH(doc, pos, dir, unit, visually) {
    var line = pos.line, ch = pos.ch, origDir = dir;
    var lineObj = getLine(doc, line);
    function findNextLine() {
      var l = line + dir;
      if (l < doc.first || l >= doc.first + doc.size) return false
      line = l;
      return lineObj = getLine(doc, l);
    }
    function moveOnce(boundToLine) {
      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);
      if (next == null) {
        if (!boundToLine && findNextLine()) {
          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);
          else ch = dir < 0 ? lineObj.text.length : 0;
        } else return false
      } else ch = next;
      return true;
    }

    if (unit == "char") {
      moveOnce()
    } else if (unit == "column") {
      moveOnce(true)
    } else if (unit == "word" || unit == "group") {
      var sawType = null, group = unit == "group";
      var helper = doc.cm && doc.cm.getHelper(pos, "wordChars");
      for (var first = true;; first = false) {
        if (dir < 0 && !moveOnce(!first)) break;
        var cur = lineObj.text.charAt(ch) || "\n";
        var type = isWordChar(cur, helper) ? "w"
          : group && cur == "\n" ? "n"
          : !group || /\s/.test(cur) ? null
          : "p";
        if (group && !first && !type) type = "s";
        if (sawType && sawType != type) {
          if (dir < 0) {dir = 1; moveOnce();}
          break;
        }

        if (type) sawType = type;
        if (dir > 0 && !moveOnce(!first)) break;
      }
    }
    var result = skipAtomic(doc, Pos(line, ch), pos, origDir, true);
    if (!cmp(pos, result)) result.hitSide = true;
    return result;
  }

  // For relative vertical movement. Dir may be -1 or 1. Unit can be
  // "page" or "line". The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosV(cm, pos, dir, unit) {
    var doc = cm.doc, x = pos.left, y;
    if (unit == "page") {
      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));
    } else if (unit == "line") {
      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
    }
    for (;;) {
      var target = coordsChar(cm, x, y);
      if (!target.outside) break;
      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }
      y += dir * 5;
    }
    return target;
  }

  // EDITOR METHODS

  // The publicly visible API. Note that methodOp(f) means
  // 'wrap f in an operation, performed on its `this` parameter'.

  // This is not the complete set of editor methods. Most of the
  // methods defined on the Doc type are also injected into
  // CodeMirror.prototype, for backwards compatibility and
  // convenience.

  CodeMirror.prototype = {
    constructor: CodeMirror,
    focus: function(){window.focus(); this.display.input.focus();},

    setOption: function(option, value) {
      var options = this.options, old = options[option];
      if (options[option] == value && option != "mode") return;
      options[option] = value;
      if (optionHandlers.hasOwnProperty(option))
        operation(this, optionHandlers[option])(this, value, old);
    },

    getOption: function(option) {return this.options[option];},
    getDoc: function() {return this.doc;},

    addKeyMap: function(map, bottom) {
      this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map));
    },
    removeKeyMap: function(map) {
      var maps = this.state.keyMaps;
      for (var i = 0; i < maps.length; ++i)
        if (maps[i] == map || maps[i].name == map) {
          maps.splice(i, 1);
          return true;
        }
    },

    addOverlay: methodOp(function(spec, options) {
      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);
      if (mode.startState) throw new Error("Overlays may not be stateful.");
      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});
      this.state.modeGen++;
      regChange(this);
    }),
    removeOverlay: methodOp(function(spec) {
      var overlays = this.state.overlays;
      for (var i = 0; i < overlays.length; ++i) {
        var cur = overlays[i].modeSpec;
        if (cur == spec || typeof spec == "string" && cur.name == spec) {
          overlays.splice(i, 1);
          this.state.modeGen++;
          regChange(this);
          return;
        }
      }
    }),

    indentLine: methodOp(function(n, dir, aggressive) {
      if (typeof dir != "string" && typeof dir != "number") {
        if (dir == null) dir = this.options.smartIndent ? "smart" : "prev";
        else dir = dir ? "add" : "subtract";
      }
      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);
    }),
    indentSelection: methodOp(function(how) {
      var ranges = this.doc.sel.ranges, end = -1;
      for (var i = 0; i < ranges.length; i++) {
        var range = ranges[i];
        if (!range.empty()) {
          var from = range.from(), to = range.to();
          var start = Math.max(end, from.line);
          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
          for (var j = start; j < end; ++j)
            indentLine(this, j, how);
          var newRanges = this.doc.sel.ranges;
          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)
            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);
        } else if (range.head.line > end) {
          indentLine(this, range.head.line, how, true);
          end = range.head.line;
          if (i == this.doc.sel.primIndex) ensureCursorVisible(this);
        }
      }
    }),

    // Fetch the parser token for a given character. Useful for hacks
    // that want to inspect the mode state (say, for completion).
    getTokenAt: function(pos, precise) {
      return takeToken(this, pos, precise);
    },

    getLineTokens: function(line, precise) {
      return takeToken(this, Pos(line), precise, true);
    },

    getTokenTypeAt: function(pos) {
      pos = clipPos(this.doc, pos);
      var styles = getLineStyles(this, getLine(this.doc, pos.line));
      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
      var type;
      if (ch == 0) type = styles[2];
      else for (;;) {
        var mid = (before + after) >> 1;
        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;
        else if (styles[mid * 2 + 1] < ch) before = mid + 1;
        else { type = styles[mid * 2 + 2]; break; }
      }
      var cut = type ? type.indexOf("cm-overlay ") : -1;
      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
    },

    getModeAt: function(pos) {
      var mode = this.doc.mode;
      if (!mode.innerMode) return mode;
      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;
    },

    getHelper: function(pos, type) {
      return this.getHelpers(pos, type)[0];
    },

    getHelpers: function(pos, type) {
      var found = [];
      if (!helpers.hasOwnProperty(type)) return found;
      var help = helpers[type], mode = this.getModeAt(pos);
      if (typeof mode[type] == "string") {
        if (help[mode[type]]) found.push(help[mode[type]]);
      } else if (mode[type]) {
        for (var i = 0; i < mode[type].length; i++) {
          var val = help[mode[type][i]];
          if (val) found.push(val);
        }
      } else if (mode.helperType && help[mode.helperType]) {
        found.push(help[mode.helperType]);
      } else if (help[mode.name]) {
        found.push(help[mode.name]);
      }
      for (var i = 0; i < help._global.length; i++) {
        var cur = help._global[i];
        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)
          found.push(cur.val);
      }
      return found;
    },

    getStateAfter: function(line, precise) {
      var doc = this.doc;
      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);
      return getStateBefore(this, line + 1, precise);
    },

    cursorCoords: function(start, mode) {
      var pos, range = this.doc.sel.primary();
      if (start == null) pos = range.head;
      else if (typeof start == "object") pos = clipPos(this.doc, start);
      else pos = start ? range.from() : range.to();
      return cursorCoords(this, pos, mode || "page");
    },

    charCoords: function(pos, mode) {
      return charCoords(this, clipPos(this.doc, pos), mode || "page");
    },

    coordsChar: function(coords, mode) {
      coords = fromCoordSystem(this, coords, mode || "page");
      return coordsChar(this, coords.left, coords.top);
    },

    lineAtHeight: function(height, mode) {
      height = fromCoordSystem(this, {top: height, left: 0}, mode || "page").top;
      return lineAtHeight(this.doc, height + this.display.viewOffset);
    },
    heightAtLine: function(line, mode) {
      var end = false, lineObj;
      if (typeof line == "number") {
        var last = this.doc.first + this.doc.size - 1;
        if (line < this.doc.first) line = this.doc.first;
        else if (line > last) { line = last; end = true; }
        lineObj = getLine(this.doc, line);
      } else {
        lineObj = line;
      }
      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || "page").top +
        (end ? this.doc.height - heightAtLine(lineObj) : 0);
    },

    defaultTextHeight: function() { return textHeight(this.display); },
    defaultCharWidth: function() { return charWidth(this.display); },

    setGutterMarker: methodOp(function(line, gutterID, value) {
      return changeLine(this.doc, line, "gutter", function(line) {
        var markers = line.gutterMarkers || (line.gutterMarkers = {});
        markers[gutterID] = value;
        if (!value && isEmpty(markers)) line.gutterMarkers = null;
        return true;
      });
    }),

    clearGutter: methodOp(function(gutterID) {
      var cm = this, doc = cm.doc, i = doc.first;
      doc.iter(function(line) {
        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
          line.gutterMarkers[gutterID] = null;
          regLineChange(cm, i, "gutter");
          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;
        }
        ++i;
      });
    }),

    lineInfo: function(line) {
      if (typeof line == "number") {
        if (!isLine(this.doc, line)) return null;
        var n = line;
        line = getLine(this.doc, line);
        if (!line) return null;
      } else {
        var n = lineNo(line);
        if (n == null) return null;
      }
      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,
              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,
              widgets: line.widgets};
    },

    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo};},

    addWidget: function(pos, node, scroll, vert, horiz) {
      var display = this.display;
      pos = cursorCoords(this, clipPos(this.doc, pos));
      var top = pos.bottom, left = pos.left;
      node.style.position = "absolute";
      node.setAttribute("cm-ignore-events", "true");
      this.display.input.setUneditable(node);
      display.sizer.appendChild(node);
      if (vert == "over") {
        top = pos.top;
      } else if (vert == "above" || vert == "near") {
        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),
        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
        // Default to positioning above (if specified and possible); otherwise default to positioning below
        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)
          top = pos.top - node.offsetHeight;
        else if (pos.bottom + node.offsetHeight <= vspace)
          top = pos.bottom;
        if (left + node.offsetWidth > hspace)
          left = hspace - node.offsetWidth;
      }
      node.style.top = top + "px";
      node.style.left = node.style.right = "";
      if (horiz == "right") {
        left = display.sizer.clientWidth - node.offsetWidth;
        node.style.right = "0px";
      } else {
        if (horiz == "left") left = 0;
        else if (horiz == "middle") left = (display.sizer.clientWidth - node.offsetWidth) / 2;
        node.style.left = left + "px";
      }
      if (scroll)
        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);
    },

    triggerOnKeyDown: methodOp(onKeyDown),
    triggerOnKeyPress: methodOp(onKeyPress),
    triggerOnKeyUp: onKeyUp,

    execCommand: function(cmd) {
      if (commands.hasOwnProperty(cmd))
        return commands[cmd].call(null, this);
    },

    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),

    findPosH: function(from, amount, unit, visually) {
      var dir = 1;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        cur = findPosH(this.doc, cur, dir, unit, visually);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveH: methodOp(function(dir, unit) {
      var cm = this;
      cm.extendSelectionsBy(function(range) {
        if (cm.display.shift || cm.doc.extend || range.empty())
          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);
        else
          return dir < 0 ? range.from() : range.to();
      }, sel_move);
    }),

    deleteH: methodOp(function(dir, unit) {
      var sel = this.doc.sel, doc = this.doc;
      if (sel.somethingSelected())
        doc.replaceSelection("", null, "+delete");
      else
        deleteNearSelection(this, function(range) {
          var other = findPosH(doc, range.head, dir, unit, false);
          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other};
        });
    }),

    findPosV: function(from, amount, unit, goalColumn) {
      var dir = 1, x = goalColumn;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        var coords = cursorCoords(this, cur, "div");
        if (x == null) x = coords.left;
        else coords.left = x;
        cur = findPosV(this, coords, dir, unit);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveV: methodOp(function(dir, unit) {
      var cm = this, doc = this.doc, goals = [];
      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();
      doc.extendSelectionsBy(function(range) {
        if (collapse)
          return dir < 0 ? range.from() : range.to();
        var headPos = cursorCoords(cm, range.head, "div");
        if (range.goalColumn != null) headPos.left = range.goalColumn;
        goals.push(headPos.left);
        var pos = findPosV(cm, headPos, dir, unit);
        if (unit == "page" && range == doc.sel.primary())
          addToScrollPos(cm, null, charCoords(cm, pos, "div").top - headPos.top);
        return pos;
      }, sel_move);
      if (goals.length) for (var i = 0; i < doc.sel.ranges.length; i++)
        doc.sel.ranges[i].goalColumn = goals[i];
    }),

    // Find the word at the given position (as returned by coordsChar).
    findWordAt: function(pos) {
      var doc = this.doc, line = getLine(doc, pos.line).text;
      var start = pos.ch, end = pos.ch;
      if (line) {
        var helper = this.getHelper(pos, "wordChars");
        if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;
        var startChar = line.charAt(start);
        var check = isWordChar(startChar, helper)
          ? function(ch) { return isWordChar(ch, helper); }
          : /\s/.test(startChar) ? function(ch) {return /\s/.test(ch);}
          : function(ch) {return !/\s/.test(ch) && !isWordChar(ch);};
        while (start > 0 && check(line.charAt(start - 1))) --start;
        while (end < line.length && check(line.charAt(end))) ++end;
      }
      return new Range(Pos(pos.line, start), Pos(pos.line, end));
    },

    toggleOverwrite: function(value) {
      if (value != null && value == this.state.overwrite) return;
      if (this.state.overwrite = !this.state.overwrite)
        addClass(this.display.cursorDiv, "CodeMirror-overwrite");
      else
        rmClass(this.display.cursorDiv, "CodeMirror-overwrite");

      signal(this, "overwriteToggle", this, this.state.overwrite);
    },
    hasFocus: function() { return this.display.input.getField() == activeElt(); },
    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit); },

    scrollTo: methodOp(function(x, y) {
      if (x != null || y != null) resolveScrollToPos(this);
      if (x != null) this.curOp.scrollLeft = x;
      if (y != null) this.curOp.scrollTop = y;
    }),
    getScrollInfo: function() {
      var scroller = this.display.scroller;
      return {left: scroller.scrollLeft, top: scroller.scrollTop,
              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
              clientHeight: displayHeight(this), clientWidth: displayWidth(this)};
    },

    scrollIntoView: methodOp(function(range, margin) {
      if (range == null) {
        range = {from: this.doc.sel.primary().head, to: null};
        if (margin == null) margin = this.options.cursorScrollMargin;
      } else if (typeof range == "number") {
        range = {from: Pos(range, 0), to: null};
      } else if (range.from == null) {
        range = {from: range, to: null};
      }
      if (!range.to) range.to = range.from;
      range.margin = margin || 0;

      if (range.from.line != null) {
        resolveScrollToPos(this);
        this.curOp.scrollToPos = range;
      } else {
        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left),
                                      Math.min(range.from.top, range.to.top) - range.margin,
                                      Math.max(range.from.right, range.to.right),
                                      Math.max(range.from.bottom, range.to.bottom) + range.margin);
        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);
      }
    }),

    setSize: methodOp(function(width, height) {
      var cm = this;
      function interpret(val) {
        return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
      }
      if (width != null) cm.display.wrapper.style.width = interpret(width);
      if (height != null) cm.display.wrapper.style.height = interpret(height);
      if (cm.options.lineWrapping) clearLineMeasurementCache(this);
      var lineNo = cm.display.viewFrom;
      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {
        if (line.widgets) for (var i = 0; i < line.widgets.length; i++)
          if (line.widgets[i].noHScroll) { regLineChange(cm, lineNo, "widget"); break; }
        ++lineNo;
      });
      cm.curOp.forceUpdate = true;
      signal(cm, "refresh", this);
    }),

    operation: function(f){return runInOp(this, f);},

    refresh: methodOp(function() {
      var oldHeight = this.display.cachedTextHeight;
      regChange(this);
      this.curOp.forceUpdate = true;
      clearCaches(this);
      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);
      updateGutterSpace(this);
      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)
        estimateLineHeights(this);
      signal(this, "refresh", this);
    }),

    swapDoc: methodOp(function(doc) {
      var old = this.doc;
      old.cm = null;
      attachDoc(this, doc);
      clearCaches(this);
      this.display.input.reset();
      this.scrollTo(doc.scrollLeft, doc.scrollTop);
      this.curOp.forceScroll = true;
      signalLater(this, "swapDoc", this, old);
      return old;
    }),

    getInputField: function(){return this.display.input.getField();},
    getWrapperElement: function(){return this.display.wrapper;},
    getScrollerElement: function(){return this.display.scroller;},
    getGutterElement: function(){return this.display.gutters;}
  };
  eventMixin(CodeMirror);

  // OPTION DEFAULTS

  // The default configuration options.
  var defaults = CodeMirror.defaults = {};
  // Functions to run when options are changed.
  var optionHandlers = CodeMirror.optionHandlers = {};

  function option(name, deflt, handle, notOnInit) {
    CodeMirror.defaults[name] = deflt;
    if (handle) optionHandlers[name] =
      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;
  }

  // Passed to option handlers when there is no old value.
  var Init = CodeMirror.Init = {toString: function(){return "CodeMirror.Init";}};

  // These two are, on init, called from the constructor because they
  // have to be initialized before the editor can start at all.
  option("value", "", function(cm, val) {
    cm.setValue(val);
  }, true);
  option("mode", null, function(cm, val) {
    cm.doc.modeOption = val;
    loadMode(cm);
  }, true);

  option("indentUnit", 2, loadMode, true);
  option("indentWithTabs", false);
  option("smartIndent", true);
  option("tabSize", 4, function(cm) {
    resetModeState(cm);
    clearCaches(cm);
    regChange(cm);
  }, true);
  option("lineSeparator", null, function(cm, val) {
    cm.doc.lineSep = val;
    if (!val) return;
    var newBreaks = [], lineNo = cm.doc.first;
    cm.doc.iter(function(line) {
      for (var pos = 0;;) {
        var found = line.text.indexOf(val, pos);
        if (found == -1) break;
        pos = found + val.length;
        newBreaks.push(Pos(lineNo, found));
      }
      lineNo++;
    });
    for (var i = newBreaks.length - 1; i >= 0; i--)
      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length))
  });
  option("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(cm, val, old) {
    cm.state.specialChars = new RegExp(val.source + (val.test("\t") ? "" : "|\t"), "g");
    if (old != CodeMirror.Init) cm.refresh();
  });
  option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {cm.refresh();}, true);
  option("electricChars", true);
  option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
    throw new Error("inputStyle can not (yet) be changed in a running editor"); // FIXME
  }, true);
  option("rtlMoveVisually", !windows);
  option("wholeLineUpdateBefore", true);

  option("theme", "default", function(cm) {
    themeChanged(cm);
    guttersChanged(cm);
  }, true);
  option("keyMap", "default", function(cm, val, old) {
    var next = getKeyMap(val);
    var prev = old != CodeMirror.Init && getKeyMap(old);
    if (prev && prev.detach) prev.detach(cm, next);
    if (next.attach) next.attach(cm, prev || null);
  });
  option("extraKeys", null);

  option("lineWrapping", false, wrappingChanged, true);
  option("gutters", [], function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("fixedGutter", true, function(cm, val) {
    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
    cm.refresh();
  }, true);
  option("coverGutterNextToScrollbar", false, function(cm) {updateScrollbars(cm);}, true);
  option("scrollbarStyle", "native", function(cm) {
    initScrollbars(cm);
    updateScrollbars(cm);
    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);
    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
  }, true);
  option("lineNumbers", false, function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("firstLineNumber", 1, guttersChanged, true);
  option("lineNumberFormatter", function(integer) {return integer;}, guttersChanged, true);
  option("showCursorWhenSelecting", false, updateSelection, true);

  option("resetSelectionOnContextMenu", true);
  option("lineWiseCopyCut", true);

  option("readOnly", false, function(cm, val) {
    if (val == "nocursor") {
      onBlur(cm);
      cm.display.input.blur();
      cm.display.disabled = true;
    } else {
      cm.display.disabled = false;
    }
    cm.display.input.readOnlyChanged(val)
  });
  option("disableInput", false, function(cm, val) {if (!val) cm.display.input.reset();}, true);
  option("dragDrop", true, dragDropChanged);
  option("allowDropFileTypes", null);

  option("cursorBlinkRate", 530);
  option("cursorScrollMargin", 0);
  option("cursorHeight", 1, updateSelection, true);
  option("singleCursorHeightPerLine", true, updateSelection, true);
  option("workTime", 100);
  option("workDelay", 100);
  option("flattenSpans", true, resetModeState, true);
  option("addModeClass", false, resetModeState, true);
  option("pollInterval", 100);
  option("undoDepth", 200, function(cm, val){cm.doc.history.undoDepth = val;});
  option("historyEventDelay", 1250);
  option("viewportMargin", 10, function(cm){cm.refresh();}, true);
  option("maxHighlightLength", 10000, resetModeState, true);
  option("moveInputWithCursor", true, function(cm, val) {
    if (!val) cm.display.input.resetPosition();
  });

  option("tabindex", null, function(cm, val) {
    cm.display.input.getField().tabIndex = val || "";
  });
  option("autofocus", null);

  // MODE DEFINITION AND QUERYING

  // Known modes, by name and by MIME
  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};

  // Extra arguments are stored as the mode's dependencies, which is
  // used by (legacy) mechanisms like loadmode.js to automatically
  // load a mode. (Preferred mechanism is the require/define calls.)
  CodeMirror.defineMode = function(name, mode) {
    if (!CodeMirror.defaults.mode && name != "null") CodeMirror.defaults.mode = name;
    if (arguments.length > 2)
      mode.dependencies = Array.prototype.slice.call(arguments, 2);
    modes[name] = mode;
  };

  CodeMirror.defineMIME = function(mime, spec) {
    mimeModes[mime] = spec;
  };

  // Given a MIME type, a {name, ...options} config object, or a name
  // string, return a mode config object.
  CodeMirror.resolveMode = function(spec) {
    if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
      spec = mimeModes[spec];
    } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
      var found = mimeModes[spec.name];
      if (typeof found == "string") found = {name: found};
      spec = createObj(found, spec);
      spec.name = found.name;
    } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
      return CodeMirror.resolveMode("application/xml");
    }
    if (typeof spec == "string") return {name: spec};
    else return spec || {name: "null"};
  };

  // Given a mode spec (anything that resolveMode accepts), find and
  // initialize an actual mode object.
  CodeMirror.getMode = function(options, spec) {
    var spec = CodeMirror.resolveMode(spec);
    var mfactory = modes[spec.name];
    if (!mfactory) return CodeMirror.getMode(options, "text/plain");
    var modeObj = mfactory(options, spec);
    if (modeExtensions.hasOwnProperty(spec.name)) {
      var exts = modeExtensions[spec.name];
      for (var prop in exts) {
        if (!exts.hasOwnProperty(prop)) continue;
        if (modeObj.hasOwnProperty(prop)) modeObj["_" + prop] = modeObj[prop];
        modeObj[prop] = exts[prop];
      }
    }
    modeObj.name = spec.name;
    if (spec.helperType) modeObj.helperType = spec.helperType;
    if (spec.modeProps) for (var prop in spec.modeProps)
      modeObj[prop] = spec.modeProps[prop];

    return modeObj;
  };

  // Minimal default mode.
  CodeMirror.defineMode("null", function() {
    return {token: function(stream) {stream.skipToEnd();}};
  });
  CodeMirror.defineMIME("text/plain", "null");

  // This can be used to attach properties to mode objects from
  // outside the actual mode definition.
  var modeExtensions = CodeMirror.modeExtensions = {};
  CodeMirror.extendMode = function(mode, properties) {
    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});
    copyObj(properties, exts);
  };

  // EXTENSIONS

  CodeMirror.defineExtension = function(name, func) {
    CodeMirror.prototype[name] = func;
  };
  CodeMirror.defineDocExtension = function(name, func) {
    Doc.prototype[name] = func;
  };
  CodeMirror.defineOption = option;

  var initHooks = [];
  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};

  var helpers = CodeMirror.helpers = {};
  CodeMirror.registerHelper = function(type, name, value) {
    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []};
    helpers[type][name] = value;
  };
  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {
    CodeMirror.registerHelper(type, name, value);
    helpers[type]._global.push({pred: predicate, val: value});
  };

  // MODE STATE HANDLING

  // Utility functions for working with state. Exported because nested
  // modes need to do this for their inner modes.

  var copyState = CodeMirror.copyState = function(mode, state) {
    if (state === true) return state;
    if (mode.copyState) return mode.copyState(state);
    var nstate = {};
    for (var n in state) {
      var val = state[n];
      if (val instanceof Array) val = val.concat([]);
      nstate[n] = val;
    }
    return nstate;
  };

  var startState = CodeMirror.startState = function(mode, a1, a2) {
    return mode.startState ? mode.startState(a1, a2) : true;
  };

  // Given a mode and a state (for that mode), find the inner mode and
  // state at the position that the state refers to.
  CodeMirror.innerMode = function(mode, state) {
    while (mode.innerMode) {
      var info = mode.innerMode(state);
      if (!info || info.mode == mode) break;
      state = info.state;
      mode = info.mode;
    }
    return info || {mode: mode, state: state};
  };

  // STANDARD COMMANDS

  // Commands are parameter-less actions that can be performed on an
  // editor, mostly used for keybindings.
  var commands = CodeMirror.commands = {
    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);},
    singleSelection: function(cm) {
      cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
    },
    killLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        if (range.empty()) {
          var len = getLine(cm.doc, range.head.line).text.length;
          if (range.head.ch == len && range.head.line < cm.lastLine())
            return {from: range.head, to: Pos(range.head.line + 1, 0)};
          else
            return {from: range.head, to: Pos(range.head.line, len)};
        } else {
          return {from: range.from(), to: range.to()};
        }
      });
    },
    deleteLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0),
                to: clipPos(cm.doc, Pos(range.to().line + 1, 0))};
      });
    },
    delLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0), to: range.from()};
      });
    },
    delWrappedLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var leftPos = cm.coordsChar({left: 0, top: top}, "div");
        return {from: leftPos, to: range.from()};
      });
    },
    delWrappedLineRight: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
        return {from: range.from(), to: rightPos };
      });
    },
    undo: function(cm) {cm.undo();},
    redo: function(cm) {cm.redo();},
    undoSelection: function(cm) {cm.undoSelection();},
    redoSelection: function(cm) {cm.redoSelection();},
    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},
    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},
    goLineStart: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineStart(cm, range.head.line); },
                            {origin: "+move", bias: 1});
    },
    goLineStartSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        return lineStartSmart(cm, range.head);
      }, {origin: "+move", bias: 1});
    },
    goLineEnd: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineEnd(cm, range.head.line); },
                            {origin: "+move", bias: -1});
    },
    goLineRight: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
      }, sel_move);
    },
    goLineLeft: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: 0, top: top}, "div");
      }, sel_move);
    },
    goLineLeftSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var pos = cm.coordsChar({left: 0, top: top}, "div");
        if (pos.ch < cm.getLine(pos.line).search(/\S/)) return lineStartSmart(cm, range.head);
        return pos;
      }, sel_move);
    },
    goLineUp: function(cm) {cm.moveV(-1, "line");},
    goLineDown: function(cm) {cm.moveV(1, "line");},
    goPageUp: function(cm) {cm.moveV(-1, "page");},
    goPageDown: function(cm) {cm.moveV(1, "page");},
    goCharLeft: function(cm) {cm.moveH(-1, "char");},
    goCharRight: function(cm) {cm.moveH(1, "char");},
    goColumnLeft: function(cm) {cm.moveH(-1, "column");},
    goColumnRight: function(cm) {cm.moveH(1, "column");},
    goWordLeft: function(cm) {cm.moveH(-1, "word");},
    goGroupRight: function(cm) {cm.moveH(1, "group");},
    goGroupLeft: function(cm) {cm.moveH(-1, "group");},
    goWordRight: function(cm) {cm.moveH(1, "word");},
    delCharBefore: function(cm) {cm.deleteH(-1, "char");},
    delCharAfter: function(cm) {cm.deleteH(1, "char");},
    delWordBefore: function(cm) {cm.deleteH(-1, "word");},
    delWordAfter: function(cm) {cm.deleteH(1, "word");},
    delGroupBefore: function(cm) {cm.deleteH(-1, "group");},
    delGroupAfter: function(cm) {cm.deleteH(1, "group");},
    indentAuto: function(cm) {cm.indentSelection("smart");},
    indentMore: function(cm) {cm.indentSelection("add");},
    indentLess: function(cm) {cm.indentSelection("subtract");},
    insertTab: function(cm) {cm.replaceSelection("\t");},
    insertSoftTab: function(cm) {
      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
      for (var i = 0; i < ranges.length; i++) {
        var pos = ranges[i].from();
        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
        spaces.push(new Array(tabSize - col % tabSize + 1).join(" "));
      }
      cm.replaceSelections(spaces);
    },
    defaultTab: function(cm) {
      if (cm.somethingSelected()) cm.indentSelection("add");
      else cm.execCommand("insertTab");
    },
    transposeChars: function(cm) {
      runInOp(cm, function() {
        var ranges = cm.listSelections(), newSel = [];
        for (var i = 0; i < ranges.length; i++) {
          var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;
          if (line) {
            if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1);
            if (cur.ch > 0) {
              cur = new Pos(cur.line, cur.ch + 1);
              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),
                              Pos(cur.line, cur.ch - 2), cur, "+transpose");
            } else if (cur.line > cm.doc.first) {
              var prev = getLine(cm.doc, cur.line - 1).text;
              if (prev)
                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +
                                prev.charAt(prev.length - 1),
                                Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), "+transpose");
            }
          }
          newSel.push(new Range(cur, cur));
        }
        cm.setSelections(newSel);
      });
    },
    newlineAndIndent: function(cm) {
      runInOp(cm, function() {
        var len = cm.listSelections().length;
        for (var i = 0; i < len; i++) {
          var range = cm.listSelections()[i];
          cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, "+input");
          cm.indentLine(range.from().line + 1, null, true);
        }
        ensureCursorVisible(cm);
      });
    },
    toggleOverwrite: function(cm) {cm.toggleOverwrite();}
  };


  // STANDARD KEYMAPS

  var keyMap = CodeMirror.keyMap = {};

  keyMap.basic = {
    "Left": "goCharLeft", "Right": "goCharRight", "Up": "goLineUp", "Down": "goLineDown",
    "End": "goLineEnd", "Home": "goLineStartSmart", "PageUp": "goPageUp", "PageDown": "goPageDown",
    "Delete": "delCharAfter", "Backspace": "delCharBefore", "Shift-Backspace": "delCharBefore",
    "Tab": "defaultTab", "Shift-Tab": "indentAuto",
    "Enter": "newlineAndIndent", "Insert": "toggleOverwrite",
    "Esc": "singleSelection"
  };
  // Note that the save and find-related commands aren't defined by
  // default. User code or addons can define them. Unknown commands
  // are simply ignored.
  keyMap.pcDefault = {
    "Ctrl-A": "selectAll", "Ctrl-D": "deleteLine", "Ctrl-Z": "undo", "Shift-Ctrl-Z": "redo", "Ctrl-Y": "redo",
    "Ctrl-Home": "goDocStart", "Ctrl-End": "goDocEnd", "Ctrl-Up": "goLineUp", "Ctrl-Down": "goLineDown",
    "Ctrl-Left": "goGroupLeft", "Ctrl-Right": "goGroupRight", "Alt-Left": "goLineStart", "Alt-Right": "goLineEnd",
    "Ctrl-Backspace": "delGroupBefore", "Ctrl-Delete": "delGroupAfter", "Ctrl-S": "save", "Ctrl-F": "find",
    "Ctrl-G": "findNext", "Shift-Ctrl-G": "findPrev", "Shift-Ctrl-F": "replace", "Shift-Ctrl-R": "replaceAll",
    "Ctrl-[": "indentLess", "Ctrl-]": "indentMore",
    "Ctrl-U": "undoSelection", "Shift-Ctrl-U": "redoSelection", "Alt-U": "redoSelection",
    fallthrough: "basic"
  };
  // Very basic readline/emacs-style bindings, which are standard on Mac.
  keyMap.emacsy = {
    "Ctrl-F": "goCharRight", "Ctrl-B": "goCharLeft", "Ctrl-P": "goLineUp", "Ctrl-N": "goLineDown",
    "Alt-F": "goWordRight", "Alt-B": "goWordLeft", "Ctrl-A": "goLineStart", "Ctrl-E": "goLineEnd",
    "Ctrl-V": "goPageDown", "Shift-Ctrl-V": "goPageUp", "Ctrl-D": "delCharAfter", "Ctrl-H": "delCharBefore",
    "Alt-D": "delWordAfter", "Alt-Backspace": "delWordBefore", "Ctrl-K": "killLine", "Ctrl-T": "transposeChars"
  };
  keyMap.macDefault = {
    "Cmd-A": "selectAll", "Cmd-D": "deleteLine", "Cmd-Z": "undo", "Shift-Cmd-Z": "redo", "Cmd-Y": "redo",
    "Cmd-Home": "goDocStart", "Cmd-Up": "goDocStart", "Cmd-End": "goDocEnd", "Cmd-Down": "goDocEnd", "Alt-Left": "goGroupLeft",
    "Alt-Right": "goGroupRight", "Cmd-Left": "goLineLeft", "Cmd-Right": "goLineRight", "Alt-Backspace": "delGroupBefore",
    "Ctrl-Alt-Backspace": "delGroupAfter", "Alt-Delete": "delGroupAfter", "Cmd-S": "save", "Cmd-F": "find",
    "Cmd-G": "findNext", "Shift-Cmd-G": "findPrev", "Cmd-Alt-F": "replace", "Shift-Cmd-Alt-F": "replaceAll",
    "Cmd-[": "indentLess", "Cmd-]": "indentMore", "Cmd-Backspace": "delWrappedLineLeft", "Cmd-Delete": "delWrappedLineRight",
    "Cmd-U": "undoSelection", "Shift-Cmd-U": "redoSelection", "Ctrl-Up": "goDocStart", "Ctrl-Down": "goDocEnd",
    fallthrough: ["basic", "emacsy"]
  };
  keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;

  // KEYMAP DISPATCH

  function normalizeKeyName(name) {
    var parts = name.split(/-(?!$)/), name = parts[parts.length - 1];
    var alt, ctrl, shift, cmd;
    for (var i = 0; i < parts.length - 1; i++) {
      var mod = parts[i];
      if (/^(cmd|meta|m)$/i.test(mod)) cmd = true;
      else if (/^a(lt)?$/i.test(mod)) alt = true;
      else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;
      else if (/^s(hift)$/i.test(mod)) shift = true;
      else throw new Error("Unrecognized modifier name: " + mod);
    }
    if (alt) name = "Alt-" + name;
    if (ctrl) name = "Ctrl-" + name;
    if (cmd) name = "Cmd-" + name;
    if (shift) name = "Shift-" + name;
    return name;
  }

  // This is a kludge to keep keymaps mostly working as raw objects
  // (backwards compatibility) while at the same time support features
  // like normalization and multi-stroke key bindings. It compiles a
  // new normalized keymap, and then updates the old object to reflect
  // this.
  CodeMirror.normalizeKeyMap = function(keymap) {
    var copy = {};
    for (var keyname in keymap) if (keymap.hasOwnProperty(keyname)) {
      var value = keymap[keyname];
      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue;
      if (value == "...") { delete keymap[keyname]; continue; }

      var keys = map(keyname.split(" "), normalizeKeyName);
      for (var i = 0; i < keys.length; i++) {
        var val, name;
        if (i == keys.length - 1) {
          name = keys.join(" ");
          val = value;
        } else {
          name = keys.slice(0, i + 1).join(" ");
          val = "...";
        }
        var prev = copy[name];
        if (!prev) copy[name] = val;
        else if (prev != val) throw new Error("Inconsistent bindings for " + name);
      }
      delete keymap[keyname];
    }
    for (var prop in copy) keymap[prop] = copy[prop];
    return keymap;
  };

  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {
    map = getKeyMap(map);
    var found = map.call ? map.call(key, context) : map[key];
    if (found === false) return "nothing";
    if (found === "...") return "multi";
    if (found != null && handle(found)) return "handled";

    if (map.fallthrough) {
      if (Object.prototype.toString.call(map.fallthrough) != "[object Array]")
        return lookupKey(key, map.fallthrough, handle, context);
      for (var i = 0; i < map.fallthrough.length; i++) {
        var result = lookupKey(key, map.fallthrough[i], handle, context);
        if (result) return result;
      }
    }
  };

  // Modifier key presses don't count as 'real' key presses for the
  // purpose of keymap fallthrough.
  var isModifierKey = CodeMirror.isModifierKey = function(value) {
    var name = typeof value == "string" ? value : keyNames[value.keyCode];
    return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
  };

  // Look up the name of a key as indicated by an event object.
  var keyName = CodeMirror.keyName = function(event, noShift) {
    if (presto && event.keyCode == 34 && event["char"]) return false;
    var base = keyNames[event.keyCode], name = base;
    if (name == null || event.altGraphKey) return false;
    if (event.altKey && base != "Alt") name = "Alt-" + name;
    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != "Ctrl") name = "Ctrl-" + name;
    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != "Cmd") name = "Cmd-" + name;
    if (!noShift && event.shiftKey && base != "Shift") name = "Shift-" + name;
    return name;
  };

  function getKeyMap(val) {
    return typeof val == "string" ? keyMap[val] : val;
  }

  // FROMTEXTAREA

  CodeMirror.fromTextArea = function(textarea, options) {
    options = options ? copyObj(options) : {};
    options.value = textarea.value;
    if (!options.tabindex && textarea.tabIndex)
      options.tabindex = textarea.tabIndex;
    if (!options.placeholder && textarea.placeholder)
      options.placeholder = textarea.placeholder;
    // Set autofocus to true if this textarea is focused, or if it has
    // autofocus and no other element is focused.
    if (options.autofocus == null) {
      var hasFocus = activeElt();
      options.autofocus = hasFocus == textarea ||
        textarea.getAttribute("autofocus") != null && hasFocus == document.body;
    }

    function save() {textarea.value = cm.getValue();}
    if (textarea.form) {
      on(textarea.form, "submit", save);
      // Deplorable hack to make the submit method do the right thing.
      if (!options.leaveSubmitMethodAlone) {
        var form = textarea.form, realSubmit = form.submit;
        try {
          var wrappedSubmit = form.submit = function() {
            save();
            form.submit = realSubmit;
            form.submit();
            form.submit = wrappedSubmit;
          };
        } catch(e) {}
      }
    }

    options.finishInit = function(cm) {
      cm.save = save;
      cm.getTextArea = function() { return textarea; };
      cm.toTextArea = function() {
        cm.toTextArea = isNaN; // Prevent this from being ran twice
        save();
        textarea.parentNode.removeChild(cm.getWrapperElement());
        textarea.style.display = "";
        if (textarea.form) {
          off(textarea.form, "submit", save);
          if (typeof textarea.form.submit == "function")
            textarea.form.submit = realSubmit;
        }
      };
    };

    textarea.style.display = "none";
    var cm = CodeMirror(function(node) {
      textarea.parentNode.insertBefore(node, textarea.nextSibling);
    }, options);
    return cm;
  };

  // STRING STREAM

  // Fed to the mode parsers, provides helper functions to make
  // parsers more succinct.

  var StringStream = CodeMirror.StringStream = function(string, tabSize) {
    this.pos = this.start = 0;
    this.string = string;
    this.tabSize = tabSize || 8;
    this.lastColumnPos = this.lastColumnValue = 0;
    this.lineStart = 0;
  };

  StringStream.prototype = {
    eol: function() {return this.pos >= this.string.length;},
    sol: function() {return this.pos == this.lineStart;},
    peek: function() {return this.string.charAt(this.pos) || undefined;},
    next: function() {
      if (this.pos < this.string.length)
        return this.string.charAt(this.pos++);
    },
    eat: function(match) {
      var ch = this.string.charAt(this.pos);
      if (typeof match == "string") var ok = ch == match;
      else var ok = ch && (match.test ? match.test(ch) : match(ch));
      if (ok) {++this.pos; return ch;}
    },
    eatWhile: function(match) {
      var start = this.pos;
      while (this.eat(match)){}
      return this.pos > start;
    },
    eatSpace: function() {
      var start = this.pos;
      while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;
      return this.pos > start;
    },
    skipToEnd: function() {this.pos = this.string.length;},
    skipTo: function(ch) {
      var found = this.string.indexOf(ch, this.pos);
      if (found > -1) {this.pos = found; return true;}
    },
    backUp: function(n) {this.pos -= n;},
    column: function() {
      if (this.lastColumnPos < this.start) {
        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
        this.lastColumnPos = this.start;
      }
      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    indentation: function() {
      return countColumn(this.string, null, this.tabSize) -
        (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    match: function(pattern, consume, caseInsensitive) {
      if (typeof pattern == "string") {
        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};
        var substr = this.string.substr(this.pos, pattern.length);
        if (cased(substr) == cased(pattern)) {
          if (consume !== false) this.pos += pattern.length;
          return true;
        }
      } else {
        var match = this.string.slice(this.pos).match(pattern);
        if (match && match.index > 0) return null;
        if (match && consume !== false) this.pos += match[0].length;
        return match;
      }
    },
    current: function(){return this.string.slice(this.start, this.pos);},
    hideFirstChars: function(n, inner) {
      this.lineStart += n;
      try { return inner(); }
      finally { this.lineStart -= n; }
    }
  };

  // TEXTMARKERS

  // Created with markText and setBookmark methods. A TextMarker is a
  // handle that can be used to clear or find a marked position in the
  // document. Line objects hold arrays (markedSpans) containing
  // {from, to, marker} object pointing to such marker objects, and
  // indicating that such a marker is present on that line. Multiple
  // lines may point to the same marker when it spans across lines.
  // The spans will have null for their from/to properties when the
  // marker continues beyond the start/end of the line. Markers have
  // links back to the lines they currently touch.

  var nextMarkerId = 0;

  var TextMarker = CodeMirror.TextMarker = function(doc, type) {
    this.lines = [];
    this.type = type;
    this.doc = doc;
    this.id = ++nextMarkerId;
  };
  eventMixin(TextMarker);

  // Clear the marker.
  TextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    var cm = this.doc.cm, withOp = cm && !cm.curOp;
    if (withOp) startOperation(cm);
    if (hasHandler(this, "clear")) {
      var found = this.find();
      if (found) signalLater(this, "clear", found.from, found.to);
    }
    var min = null, max = null;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), "text");
      else if (cm) {
        if (span.to != null) max = lineNo(line);
        if (span.from != null) min = lineNo(line);
      }
      line.markedSpans = removeMarkedSpan(line.markedSpans, span);
      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)
        updateLineHeight(line, textHeight(cm.display));
    }
    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {
      var visual = visualLine(this.lines[i]), len = lineLength(visual);
      if (len > cm.display.maxLineLength) {
        cm.display.maxLine = visual;
        cm.display.maxLineLength = len;
        cm.display.maxLineChanged = true;
      }
    }

    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1);
    this.lines.length = 0;
    this.explicitlyCleared = true;
    if (this.atomic && this.doc.cantEdit) {
      this.doc.cantEdit = false;
      if (cm) reCheckSelection(cm.doc);
    }
    if (cm) signalLater(cm, "markerCleared", cm, this);
    if (withOp) endOperation(cm);
    if (this.parent) this.parent.clear();
  };

  // Find the position of the marker in the document. Returns a {from,
  // to} object by default. Side can be passed to get a specific side
  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the
  // Pos objects returned contain a line object, rather than a line
  // number (used to prevent looking up the same line twice).
  TextMarker.prototype.find = function(side, lineObj) {
    if (side == null && this.type == "bookmark") side = 1;
    var from, to;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (span.from != null) {
        from = Pos(lineObj ? line : lineNo(line), span.from);
        if (side == -1) return from;
      }
      if (span.to != null) {
        to = Pos(lineObj ? line : lineNo(line), span.to);
        if (side == 1) return to;
      }
    }
    return from && {from: from, to: to};
  };

  // Signals that the marker's widget changed, and surrounding layout
  // should be recomputed.
  TextMarker.prototype.changed = function() {
    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
    if (!pos || !cm) return;
    runInOp(cm, function() {
      var line = pos.line, lineN = lineNo(pos.line);
      var view = findViewForLine(cm, lineN);
      if (view) {
        clearLineMeasurementCacheFor(view);
        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
      }
      cm.curOp.updateMaxLine = true;
      if (!lineIsHidden(widget.doc, line) && widget.height != null) {
        var oldHeight = widget.height;
        widget.height = null;
        var dHeight = widgetHeight(widget) - oldHeight;
        if (dHeight)
          updateLineHeight(line, line.height + dHeight);
      }
    });
  };

  TextMarker.prototype.attachLine = function(line) {
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)
        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
    }
    this.lines.push(line);
  };
  TextMarker.prototype.detachLine = function(line) {
    this.lines.splice(indexOf(this.lines, line), 1);
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
    }
  };

  // Collapsed markers have unique ids, in order to be able to order
  // them, which is needed for uniquely determining an outer marker
  // when they overlap (they may nest, but not partially overlap).
  var nextMarkerId = 0;

  // Create a marker, wire it up to the right lines, and
  function markText(doc, from, to, options, type) {
    // Shared markers (across linked documents) are handled separately
    // (markTextShared will call out to this again, once per
    // document).
    if (options && options.shared) return markTextShared(doc, from, to, options, type);
    // Ensure we are in an operation.
    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);

    var marker = new TextMarker(doc, type), diff = cmp(from, to);
    if (options) copyObj(options, marker, false);
    // Don't connect empty markers unless clearWhenEmpty is false
    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)
      return marker;
    if (marker.replacedWith) {
      // Showing up as a widget implies collapsed (widget replaces text)
      marker.collapsed = true;
      marker.widgetNode = elt("span", [marker.replacedWith], "CodeMirror-widget");
      if (!options.handleMouseEvents) marker.widgetNode.setAttribute("cm-ignore-events", "true");
      if (options.insertLeft) marker.widgetNode.insertLeft = true;
    }
    if (marker.collapsed) {
      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||
          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))
        throw new Error("Inserting collapsed marker partially overlapping an existing one");
      sawCollapsedSpans = true;
    }

    if (marker.addToHistory)
      addChangeToHistory(doc, {from: from, to: to, origin: "markText"}, doc.sel, NaN);

    var curLine = from.line, cm = doc.cm, updateMaxLine;
    doc.iter(curLine, to.line + 1, function(line) {
      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)
        updateMaxLine = true;
      if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0);
      addMarkedSpan(line, new MarkedSpan(marker,
                                         curLine == from.line ? from.ch : null,
                                         curLine == to.line ? to.ch : null));
      ++curLine;
    });
    // lineIsHidden depends on the presence of the spans, so needs a second pass
    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {
      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);
    });

    if (marker.clearOnEnter) on(marker, "beforeCursorEnter", function() { marker.clear(); });

    if (marker.readOnly) {
      sawReadOnlySpans = true;
      if (doc.history.done.length || doc.history.undone.length)
        doc.clearHistory();
    }
    if (marker.collapsed) {
      marker.id = ++nextMarkerId;
      marker.atomic = true;
    }
    if (cm) {
      // Sync editor state
      if (updateMaxLine) cm.curOp.updateMaxLine = true;
      if (marker.collapsed)
        regChange(cm, from.line, to.line + 1);
      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)
        for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, "text");
      if (marker.atomic) reCheckSelection(cm.doc);
      signalLater(cm, "markerAdded", cm, marker);
    }
    return marker;
  }

  // SHARED TEXTMARKERS

  // A shared marker spans multiple linked documents. It is
  // implemented as a meta-marker-object controlling multiple normal
  // markers.
  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {
    this.markers = markers;
    this.primary = primary;
    for (var i = 0; i < markers.length; ++i)
      markers[i].parent = this;
  };
  eventMixin(SharedTextMarker);

  SharedTextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    this.explicitlyCleared = true;
    for (var i = 0; i < this.markers.length; ++i)
      this.markers[i].clear();
    signalLater(this, "clear");
  };
  SharedTextMarker.prototype.find = function(side, lineObj) {
    return this.primary.find(side, lineObj);
  };

  function markTextShared(doc, from, to, options, type) {
    options = copyObj(options);
    options.shared = false;
    var markers = [markText(doc, from, to, options, type)], primary = markers[0];
    var widget = options.widgetNode;
    linkedDocs(doc, function(doc) {
      if (widget) options.widgetNode = widget.cloneNode(true);
      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));
      for (var i = 0; i < doc.linked.length; ++i)
        if (doc.linked[i].isParent) return;
      primary = lst(markers);
    });
    return new SharedTextMarker(markers, primary);
  }

  function findSharedMarkers(doc) {
    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())),
                         function(m) { return m.parent; });
  }

  function copySharedMarkers(doc, markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], pos = marker.find();
      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
      if (cmp(mFrom, mTo)) {
        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
        marker.markers.push(subMark);
        subMark.parent = marker;
      }
    }
  }

  function detachSharedMarkers(markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], linked = [marker.primary.doc];;
      linkedDocs(marker.primary.doc, function(d) { linked.push(d); });
      for (var j = 0; j < marker.markers.length; j++) {
        var subMarker = marker.markers[j];
        if (indexOf(linked, subMarker.doc) == -1) {
          subMarker.parent = null;
          marker.markers.splice(j--, 1);
        }
      }
    }
  }

  // TEXTMARKER SPANS

  function MarkedSpan(marker, from, to) {
    this.marker = marker;
    this.from = from; this.to = to;
  }

  // Search an array of spans for a span matching the given marker.
  function getMarkedSpanFor(spans, marker) {
    if (spans) for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.marker == marker) return span;
    }
  }
  // Remove a span from an array, returning undefined if no spans are
  // left (we don't store arrays for lines without spans).
  function removeMarkedSpan(spans, span) {
    for (var r, i = 0; i < spans.length; ++i)
      if (spans[i] != span) (r || (r = [])).push(spans[i]);
    return r;
  }
  // Add a span to a line.
  function addMarkedSpan(line, span) {
    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
    span.marker.attachLine(line);
  }

  // Used for the algorithm that adjusts markers for a change in the
  // document. These functions cut an array of spans at a given
  // character position, returning an array of remaining chunks (or
  // undefined if nothing remains).
  function markedSpansBefore(old, startCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
      if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
      }
    }
    return nw;
  }
  function markedSpansAfter(old, endCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
      if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,
                                              span.to == null ? null : span.to - endCh));
      }
    }
    return nw;
  }

  // Given a change object, compute the new set of marker spans that
  // cover the line in which the change took place. Removes spans
  // entirely within the change, reconnects spans belonging to the
  // same marker that appear on both sides of the change, and cuts off
  // spans partially within the change. Returns an array of span
  // arrays with one element for each line in (after) the change.
  function stretchSpansOverChange(doc, change) {
    if (change.full) return null;
    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;
    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
    if (!oldFirst && !oldLast) return null;

    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
    // Get the spans that 'stick out' on both sides
    var first = markedSpansBefore(oldFirst, startCh, isInsert);
    var last = markedSpansAfter(oldLast, endCh, isInsert);

    // Next, merge those two ends
    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
    if (first) {
      // Fix up .to properties of first
      for (var i = 0; i < first.length; ++i) {
        var span = first[i];
        if (span.to == null) {
          var found = getMarkedSpanFor(last, span.marker);
          if (!found) span.to = startCh;
          else if (sameLine) span.to = found.to == null ? null : found.to + offset;
        }
      }
    }
    if (last) {
      // Fix up .from in last (or move them into first in case of sameLine)
      for (var i = 0; i < last.length; ++i) {
        var span = last[i];
        if (span.to != null) span.to += offset;
        if (span.from == null) {
          var found = getMarkedSpanFor(first, span.marker);
          if (!found) {
            span.from = offset;
            if (sameLine) (first || (first = [])).push(span);
          }
        } else {
          span.from += offset;
          if (sameLine) (first || (first = [])).push(span);
        }
      }
    }
    // Make sure we didn't create any zero-length spans
    if (first) first = clearEmptySpans(first);
    if (last && last != first) last = clearEmptySpans(last);

    var newMarkers = [first];
    if (!sameLine) {
      // Fill gap with whole-line-spans
      var gap = change.text.length - 2, gapMarkers;
      if (gap > 0 && first)
        for (var i = 0; i < first.length; ++i)
          if (first[i].to == null)
            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));
      for (var i = 0; i < gap; ++i)
        newMarkers.push(gapMarkers);
      newMarkers.push(last);
    }
    return newMarkers;
  }

  // Remove spans that are empty and don't have a clearWhenEmpty
  // option of false.
  function clearEmptySpans(spans) {
    for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)
        spans.splice(i--, 1);
    }
    if (!spans.length) return null;
    return spans;
  }

  // Used for un/re-doing changes from the history. Combines the
  // result of computing the existing spans with the set of spans that
  // existed in the history (so that deleting around a span and then
  // undoing brings back the span).
  function mergeOldSpans(doc, change) {
    var old = getOldSpans(doc, change);
    var stretched = stretchSpansOverChange(doc, change);
    if (!old) return stretched;
    if (!stretched) return old;

    for (var i = 0; i < old.length; ++i) {
      var oldCur = old[i], stretchCur = stretched[i];
      if (oldCur && stretchCur) {
        spans: for (var j = 0; j < stretchCur.length; ++j) {
          var span = stretchCur[j];
          for (var k = 0; k < oldCur.length; ++k)
            if (oldCur[k].marker == span.marker) continue spans;
          oldCur.push(span);
        }
      } else if (stretchCur) {
        old[i] = stretchCur;
      }
    }
    return old;
  }

  // Used to 'clip' out readOnly ranges when making a change.
  function removeReadOnlyRanges(doc, from, to) {
    var markers = null;
    doc.iter(from.line, to.line + 1, function(line) {
      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
        var mark = line.markedSpans[i].marker;
        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))
          (markers || (markers = [])).push(mark);
      }
    });
    if (!markers) return null;
    var parts = [{from: from, to: to}];
    for (var i = 0; i < markers.length; ++i) {
      var mk = markers[i], m = mk.find(0);
      for (var j = 0; j < parts.length; ++j) {
        var p = parts[j];
        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue;
        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)
          newParts.push({from: p.from, to: m.from});
        if (dto > 0 || !mk.inclusiveRight && !dto)
          newParts.push({from: m.to, to: p.to});
        parts.splice.apply(parts, newParts);
        j += newParts.length - 1;
      }
    }
    return parts;
  }

  // Connect or disconnect spans from a line.
  function detachMarkedSpans(line) {
    var spans = line.markedSpans;
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.detachLine(line);
    line.markedSpans = null;
  }
  function attachMarkedSpans(line, spans) {
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.attachLine(line);
    line.markedSpans = spans;
  }

  // Helpers used when computing which overlapping collapsed span
  // counts as the larger one.
  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0; }
  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0; }

  // Returns a number indicating which of two overlapping collapsed
  // spans is larger (and thus includes the other). Falls back to
  // comparing ids when the spans cover exactly the same range.
  function compareCollapsedMarkers(a, b) {
    var lenDiff = a.lines.length - b.lines.length;
    if (lenDiff != 0) return lenDiff;
    var aPos = a.find(), bPos = b.find();
    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
    if (fromCmp) return -fromCmp;
    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
    if (toCmp) return toCmp;
    return b.id - a.id;
  }

  // Find out whether a line ends or starts in a collapsed span. If
  // so, return the marker for that span.
  function collapsedSpanAtSide(line, start) {
    var sps = sawCollapsedSpans && line.markedSpans, found;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&
          (!found || compareCollapsedMarkers(found, sp.marker) < 0))
        found = sp.marker;
    }
    return found;
  }
  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true); }
  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false); }

  // Test whether there exists a collapsed span that partially
  // overlaps (covers the start or end, but not both) of a new span.
  // Such overlap is not allowed.
  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {
    var line = getLine(doc, lineNo);
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var i = 0; i < sps.length; ++i) {
      var sp = sps[i];
      if (!sp.marker.collapsed) continue;
      var found = sp.marker.find(0);
      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue;
      if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) ||
          fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))
        return true;
    }
  }

  // A visual line is a line as drawn on the screen. Folding, for
  // example, can cause multiple logical lines to appear on the same
  // visual line. This finds the start of the visual line that the
  // given line is part of (usually that is the line itself).
  function visualLine(line) {
    var merged;
    while (merged = collapsedSpanAtStart(line))
      line = merged.find(-1, true).line;
    return line;
  }

  // Returns an array of logical lines that continue the visual line
  // started by the argument, or undefined if there are no such lines.
  function visualLineContinued(line) {
    var merged, lines;
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      (lines || (lines = [])).push(line);
    }
    return lines;
  }

  // Get the line number of the start of the visual line that the
  // given line number is part of.
  function visualLineNo(doc, lineN) {
    var line = getLine(doc, lineN), vis = visualLine(line);
    if (line == vis) return lineN;
    return lineNo(vis);
  }
  // Get the line number of the start of the next visual line after
  // the given line.
  function visualLineEndNo(doc, lineN) {
    if (lineN > doc.lastLine()) return lineN;
    var line = getLine(doc, lineN), merged;
    if (!lineIsHidden(doc, line)) return lineN;
    while (merged = collapsedSpanAtEnd(line))
      line = merged.find(1, true).line;
    return lineNo(line) + 1;
  }

  // Compute whether a line is hidden. Lines count as hidden when they
  // are part of a visual line that starts with another line, or when
  // they are entirely covered by collapsed, non-widget span.
  function lineIsHidden(doc, line) {
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (!sp.marker.collapsed) continue;
      if (sp.from == null) return true;
      if (sp.marker.widgetNode) continue;
      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))
        return true;
    }
  }
  function lineIsHiddenInner(doc, line, span) {
    if (span.to == null) {
      var end = span.marker.find(1, true);
      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
    }
    if (span.marker.inclusiveRight && span.to == line.text.length)
      return true;
    for (var sp, i = 0; i < line.markedSpans.length; ++i) {
      sp = line.markedSpans[i];
      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&
          (sp.to == null || sp.to != span.from) &&
          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&
          lineIsHiddenInner(doc, line, sp)) return true;
    }
  }

  // LINE WIDGETS

  // Line widgets are block elements displayed above or below a line.

  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {
    if (options) for (var opt in options) if (options.hasOwnProperty(opt))
      this[opt] = options[opt];
    this.doc = doc;
    this.node = node;
  };
  eventMixin(LineWidget);

  function adjustScrollWhenAboveVisible(cm, line, diff) {
    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))
      addToScrollPos(cm, null, diff);
  }

  LineWidget.prototype.clear = function() {
    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
    if (no == null || !ws) return;
    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);
    if (!ws.length) line.widgets = null;
    var height = widgetHeight(this);
    updateLineHeight(line, Math.max(0, line.height - height));
    if (cm) runInOp(cm, function() {
      adjustScrollWhenAboveVisible(cm, line, -height);
      regLineChange(cm, no, "widget");
    });
  };
  LineWidget.prototype.changed = function() {
    var oldH = this.height, cm = this.doc.cm, line = this.line;
    this.height = null;
    var diff = widgetHeight(this) - oldH;
    if (!diff) return;
    updateLineHeight(line, line.height + diff);
    if (cm) runInOp(cm, function() {
      cm.curOp.forceUpdate = true;
      adjustScrollWhenAboveVisible(cm, line, diff);
    });
  };

  function widgetHeight(widget) {
    if (widget.height != null) return widget.height;
    var cm = widget.doc.cm;
    if (!cm) return 0;
    if (!contains(document.body, widget.node)) {
      var parentStyle = "position: relative;";
      if (widget.coverGutter)
        parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;";
      if (widget.noHScroll)
        parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;";
      removeChildrenAndAdd(cm.display.measure, elt("div", [widget.node], null, parentStyle));
    }
    return widget.height = widget.node.parentNode.offsetHeight;
  }

  function addLineWidget(doc, handle, node, options) {
    var widget = new LineWidget(doc, node, options);
    var cm = doc.cm;
    if (cm && widget.noHScroll) cm.display.alignWidgets = true;
    changeLine(doc, handle, "widget", function(line) {
      var widgets = line.widgets || (line.widgets = []);
      if (widget.insertAt == null) widgets.push(widget);
      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);
      widget.line = line;
      if (cm && !lineIsHidden(doc, line)) {
        var aboveVisible = heightAtLine(line) < doc.scrollTop;
        updateLineHeight(line, line.height + widgetHeight(widget));
        if (aboveVisible) addToScrollPos(cm, null, widget.height);
        cm.curOp.forceUpdate = true;
      }
      return true;
    });
    return widget;
  }

  // LINE DATA STRUCTURE

  // Line objects. These hold state related to a line, including
  // highlighting info (the styles array).
  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {
    this.text = text;
    attachMarkedSpans(this, markedSpans);
    this.height = estimateHeight ? estimateHeight(this) : 1;
  };
  eventMixin(Line);
  Line.prototype.lineNo = function() { return lineNo(this); };

  // Change the content (text, markers) of a line. Automatically
  // invalidates cached information and tries to re-estimate the
  // line's height.
  function updateLine(line, text, markedSpans, estimateHeight) {
    line.text = text;
    if (line.stateAfter) line.stateAfter = null;
    if (line.styles) line.styles = null;
    if (line.order != null) line.order = null;
    detachMarkedSpans(line);
    attachMarkedSpans(line, markedSpans);
    var estHeight = estimateHeight ? estimateHeight(line) : 1;
    if (estHeight != line.height) updateLineHeight(line, estHeight);
  }

  // Detach a line from the document tree and its markers.
  function cleanUpLine(line) {
    line.parent = null;
    detachMarkedSpans(line);
  }

  function extractLineClasses(type, output) {
    if (type) for (;;) {
      var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
      if (!lineClass) break;
      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
      var prop = lineClass[1] ? "bgClass" : "textClass";
      if (output[prop] == null)
        output[prop] = lineClass[2];
      else if (!(new RegExp("(?:^|\s)" + lineClass[2] + "(?:$|\s)")).test(output[prop]))
        output[prop] += " " + lineClass[2];
    }
    return type;
  }

  function callBlankLine(mode, state) {
    if (mode.blankLine) return mode.blankLine(state);
    if (!mode.innerMode) return;
    var inner = CodeMirror.innerMode(mode, state);
    if (inner.mode.blankLine) return inner.mode.blankLine(inner.state);
  }

  function readToken(mode, stream, state, inner) {
    for (var i = 0; i < 10; i++) {
      if (inner) inner[0] = CodeMirror.innerMode(mode, state).mode;
      var style = mode.token(stream, state);
      if (stream.pos > stream.start) return style;
    }
    throw new Error("Mode " + mode.name + " failed to advance stream.");
  }

  // Utility for getTokenAt and getLineTokens
  function takeToken(cm, pos, precise, asArray) {
    function getObj(copy) {
      return {start: stream.start, end: stream.pos,
              string: stream.current(),
              type: style || null,
              state: copy ? copyState(doc.mode, state) : state};
    }

    var doc = cm.doc, mode = doc.mode, style;
    pos = clipPos(doc, pos);
    var line = getLine(doc, pos.line), state = getStateBefore(cm, pos.line, precise);
    var stream = new StringStream(line.text, cm.options.tabSize), tokens;
    if (asArray) tokens = [];
    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {
      stream.start = stream.pos;
      style = readToken(mode, stream, state);
      if (asArray) tokens.push(getObj(true));
    }
    return asArray ? tokens : getObj();
  }

  // Run the given mode's parser over a line, calling f for each token.
  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {
    var flattenSpans = mode.flattenSpans;
    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;
    var curStart = 0, curStyle = null;
    var stream = new StringStream(text, cm.options.tabSize), style;
    var inner = cm.options.addModeClass && [null];
    if (text == "") extractLineClasses(callBlankLine(mode, state), lineClasses);
    while (!stream.eol()) {
      if (stream.pos > cm.options.maxHighlightLength) {
        flattenSpans = false;
        if (forceToEnd) processLine(cm, text, state, stream.pos);
        stream.pos = text.length;
        style = null;
      } else {
        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);
      }
      if (inner) {
        var mName = inner[0].name;
        if (mName) style = "m-" + (style ? mName + " " + style : mName);
      }
      if (!flattenSpans || curStyle != style) {
        while (curStart < stream.start) {
          curStart = Math.min(stream.start, curStart + 50000);
          f(curStart, curStyle);
        }
        curStyle = style;
      }
      stream.start = stream.pos;
    }
    while (curStart < stream.pos) {
      // Webkit seems to refuse to render text nodes longer than 57444 characters
      var pos = Math.min(stream.pos, curStart + 50000);
      f(pos, curStyle);
      curStart = pos;
    }
  }

  // Compute a style array (an array starting with a mode generation
  // -- for invalidation -- followed by pairs of end positions and
  // style strings), which is used to highlight the tokens on the
  // line.
  function highlightLine(cm, line, state, forceToEnd) {
    // A styles array always starts with a number identifying the
    // mode/overlays that it is based on (for easy invalidation).
    var st = [cm.state.modeGen], lineClasses = {};
    // Compute the base array of styles
    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {
      st.push(end, style);
    }, lineClasses, forceToEnd);

    // Run overlays, adjust style array.
    for (var o = 0; o < cm.state.overlays.length; ++o) {
      var overlay = cm.state.overlays[o], i = 1, at = 0;
      runMode(cm, line.text, overlay.mode, true, function(end, style) {
        var start = i;
        // Ensure there's a token end at the current position, and that i points at it
        while (at < end) {
          var i_end = st[i];
          if (i_end > end)
            st.splice(i, 1, end, st[i+1], i_end);
          i += 2;
          at = Math.min(end, i_end);
        }
        if (!style) return;
        if (overlay.opaque) {
          st.splice(start, i - start, end, "cm-overlay " + style);
          i = start + 2;
        } else {
          for (; start < i; start += 2) {
            var cur = st[start+1];
            st[start+1] = (cur ? cur + " " : "") + "cm-overlay " + style;
          }
        }
      }, lineClasses);
    }

    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};
  }

  function getLineStyles(cm, line, updateFrontier) {
    if (!line.styles || line.styles[0] != cm.state.modeGen) {
      var state = getStateBefore(cm, lineNo(line));
      var result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);
      line.stateAfter = state;
      line.styles = result.styles;
      if (result.classes) line.styleClasses = result.classes;
      else if (line.styleClasses) line.styleClasses = null;
      if (updateFrontier === cm.doc.frontier) cm.doc.frontier++;
    }
    return line.styles;
  }

  // Lightweight form of highlight -- proceed over this line and
  // update state, but don't save a style array. Used for lines that
  // aren't currently visible.
  function processLine(cm, text, state, startAt) {
    var mode = cm.doc.mode;
    var stream = new StringStream(text, cm.options.tabSize);
    stream.start = stream.pos = startAt || 0;
    if (text == "") callBlankLine(mode, state);
    while (!stream.eol()) {
      readToken(mode, stream, state);
      stream.start = stream.pos;
    }
  }

  // Convert a style as returned by a mode (either null, or a string
  // containing one or more styles) to a CSS style. This is cached,
  // and also looks for line-wide styles.
  var styleToClassCache = {}, styleToClassCacheWithMode = {};
  function interpretTokenStyle(style, options) {
    if (!style || /^\s*$/.test(style)) return null;
    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
    return cache[style] ||
      (cache[style] = style.replace(/\S+/g, "cm-$&"));
  }

  // Render the DOM representation of the text of a line. Also builds
  // up a 'line map', which points at the DOM nodes that represent
  // specific stretches of text, and is used by the measuring code.
  // The returned object contains the DOM node, this map, and
  // information about line-wide styles that were set by the mode.
  function buildLineContent(cm, lineView) {
    // The padding-right forces the element to have a 'border', which
    // is needed on Webkit to be able to get line-level bounding
    // rectangles for it (in measureChar).
    var content = elt("span", null, null, webkit ? "padding-right: .1px" : null);
    var builder = {pre: elt("pre", [content], "CodeMirror-line"), content: content,
                   col: 0, pos: 0, cm: cm,
                   splitSpaces: (ie || webkit) && cm.getOption("lineWrapping")};
    lineView.measure = {};

    // Iterate over the logical lines that make up this visual line.
    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {
      var line = i ? lineView.rest[i - 1] : lineView.line, order;
      builder.pos = 0;
      builder.addToken = buildToken;
      // Optionally wire in some hacks into the token-rendering
      // algorithm, to deal with browser quirks.
      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))
        builder.addToken = buildTokenBadBidi(builder.addToken, order);
      builder.map = [];
      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);
      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));
      if (line.styleClasses) {
        if (line.styleClasses.bgClass)
          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
        if (line.styleClasses.textClass)
          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
      }

      // Ensure at least a single node is present, for measuring.
      if (builder.map.length == 0)
        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));

      // Store the map and a cache object for the current logical line
      if (i == 0) {
        lineView.measure.map = builder.map;
        lineView.measure.cache = {};
      } else {
        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
        (lineView.measure.caches || (lineView.measure.caches = [])).push({});
      }
    }

    // See issue #2901
    if (webkit && /\bcm-tab\b/.test(builder.content.lastChild.className))
      builder.content.className = "cm-tab-wrap-hack";

    signal(cm, "renderLine", cm, lineView.line, builder.pre);
    if (builder.pre.className)
      builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");

    return builder;
  }

  function defaultSpecialCharPlaceholder(ch) {
    var token = elt("span", "\u2022", "cm-invalidchar");
    token.title = "\\u" + ch.charCodeAt(0).toString(16);
    token.setAttribute("aria-label", token.title);
    return token;
  }

  // Build up the DOM representation for a single token, and add it to
  // the line map. Takes care to render special characters separately.
  function buildToken(builder, text, style, startStyle, endStyle, title, css) {
    if (!text) return;
    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;
    var special = builder.cm.state.specialChars, mustWrap = false;
    if (!special.test(text)) {
      builder.col += text.length;
      var content = document.createTextNode(displayText);
      builder.map.push(builder.pos, builder.pos + text.length, content);
      if (ie && ie_version < 9) mustWrap = true;
      builder.pos += text.length;
    } else {
      var content = document.createDocumentFragment(), pos = 0;
      while (true) {
        special.lastIndex = pos;
        var m = special.exec(text);
        var skipped = m ? m.index - pos : text.length - pos;
        if (skipped) {
          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.map.push(builder.pos, builder.pos + skipped, txt);
          builder.col += skipped;
          builder.pos += skipped;
        }
        if (!m) break;
        pos += skipped + 1;
        if (m[0] == "\t") {
          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
          var txt = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
          txt.setAttribute("role", "presentation");
          txt.setAttribute("cm-text", "\t");
          builder.col += tabWidth;
        } else if (m[0] == "\r" || m[0] == "\n") {
          var txt = content.appendChild(elt("span", m[0] == "\r" ? "\u240d" : "\u2424", "cm-invalidchar"));
          txt.setAttribute("cm-text", m[0]);
          builder.col += 1;
        } else {
          var txt = builder.cm.options.specialCharPlaceholder(m[0]);
          txt.setAttribute("cm-text", m[0]);
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.col += 1;
        }
        builder.map.push(builder.pos, builder.pos + 1, txt);
        builder.pos++;
      }
    }
    if (style || startStyle || endStyle || mustWrap || css) {
      var fullStyle = style || "";
      if (startStyle) fullStyle += startStyle;
      if (endStyle) fullStyle += endStyle;
      var token = elt("span", [content], fullStyle, css);
      if (title) token.title = title;
      return builder.content.appendChild(token);
    }
    builder.content.appendChild(content);
  }

  function splitSpaces(old) {
    var out = " ";
    for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? " " : "\u00a0";
    out += " ";
    return out;
  }

  // Work around nonsense dimensions being reported for stretches of
  // right-to-left text.
  function buildTokenBadBidi(inner, order) {
    return function(builder, text, style, startStyle, endStyle, title, css) {
      style = style ? style + " cm-force-border" : "cm-force-border";
      var start = builder.pos, end = start + text.length;
      for (;;) {
        // Find the part that overlaps with the start of this text
        for (var i = 0; i < order.length; i++) {
          var part = order[i];
          if (part.to > start && part.from <= start) break;
        }
        if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title, css);
        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);
        startStyle = null;
        text = text.slice(part.to - start);
        start = part.to;
      }
    };
  }

  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
    var widget = !ignoreWidget && marker.widgetNode;
    if (widget) builder.map.push(builder.pos, builder.pos + size, widget);
    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {
      if (!widget)
        widget = builder.content.appendChild(document.createElement("span"));
      widget.setAttribute("cm-marker", marker.id);
    }
    if (widget) {
      builder.cm.display.input.setUneditable(widget);
      builder.content.appendChild(widget);
    }
    builder.pos += size;
  }

  // Outputs a number of spans to make up a line, taking highlighting
  // and marked text into account.
  function insertLineContent(line, builder, styles) {
    var spans = line.markedSpans, allText = line.text, at = 0;
    if (!spans) {
      for (var i = 1; i < styles.length; i+=2)
        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options));
      return;
    }

    var len = allText.length, pos = 0, i = 1, text = "", style, css;
    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;
    for (;;) {
      if (nextChange == pos) { // Update current marker set
        spanStyle = spanEndStyle = spanStartStyle = title = css = "";
        collapsed = null; nextChange = Infinity;
        var foundBookmarks = [], endStyles
        for (var j = 0; j < spans.length; ++j) {
          var sp = spans[j], m = sp.marker;
          if (m.type == "bookmark" && sp.from == pos && m.widgetNode) {
            foundBookmarks.push(m);
          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {
            if (sp.to != null && sp.to != pos && nextChange > sp.to) {
              nextChange = sp.to;
              spanEndStyle = "";
            }
            if (m.className) spanStyle += " " + m.className;
            if (m.css) css = (css ? css + ";" : "") + m.css;
            if (m.startStyle && sp.from == pos) spanStartStyle += " " + m.startStyle;
            if (m.endStyle && sp.to == nextChange) (endStyles || (endStyles = [])).push(m.endStyle, sp.to)
            if (m.title && !title) title = m.title;
            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))
              collapsed = sp;
          } else if (sp.from > pos && nextChange > sp.from) {
            nextChange = sp.from;
          }
        }
        if (endStyles) for (var j = 0; j < endStyles.length; j += 2)
          if (endStyles[j + 1] == nextChange) spanEndStyle += " " + endStyles[j]

        if (!collapsed || collapsed.from == pos) for (var j = 0; j < foundBookmarks.length; ++j)
          buildCollapsedSpan(builder, 0, foundBookmarks[j]);
        if (collapsed && (collapsed.from || 0) == pos) {
          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,
                             collapsed.marker, collapsed.from == null);
          if (collapsed.to == null) return;
          if (collapsed.to == pos) collapsed = false;
        }
      }
      if (pos >= len) break;

      var upto = Math.min(len, nextChange);
      while (true) {
        if (text) {
          var end = pos + text.length;
          if (!collapsed) {
            var tokenText = end > upto ? text.slice(0, upto - pos) : text;
            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,
                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", title, css);
          }
          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}
          pos = end;
          spanStartStyle = "";
        }
        text = allText.slice(at, at = styles[i++]);
        style = interpretTokenStyle(styles[i++], builder.cm.options);
      }
    }
  }

  // DOCUMENT DATA STRUCTURE

  // By default, updates that start and end at the beginning of a line
  // are treated specially, in order to make the association of line
  // widgets and marker elements with the text behave more intuitive.
  function isWholeLineUpdate(doc, change) {
    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" &&
      (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
  }

  // Perform a change on the document data structure.
  function updateDoc(doc, change, markedSpans, estimateHeight) {
    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}
    function update(line, text, spans) {
      updateLine(line, text, spans, estimateHeight);
      signalLater(line, "change", line, change);
    }
    function linesFor(start, end) {
      for (var i = start, result = []; i < end; ++i)
        result.push(new Line(text[i], spansFor(i), estimateHeight));
      return result;
    }

    var from = change.from, to = change.to, text = change.text;
    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);
    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;

    // Adjust the line structure
    if (change.full) {
      doc.insert(0, linesFor(0, text.length));
      doc.remove(text.length, doc.size - text.length);
    } else if (isWholeLineUpdate(doc, change)) {
      // This is a whole-line replace. Treated specially to make
      // sure line objects move the way they are supposed to.
      var added = linesFor(0, text.length - 1);
      update(lastLine, lastLine.text, lastSpans);
      if (nlines) doc.remove(from.line, nlines);
      if (added.length) doc.insert(from.line, added);
    } else if (firstLine == lastLine) {
      if (text.length == 1) {
        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
      } else {
        var added = linesFor(1, text.length - 1);
        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
        doc.insert(from.line + 1, added);
      }
    } else if (text.length == 1) {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
      doc.remove(from.line + 1, nlines);
    } else {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
      var added = linesFor(1, text.length - 1);
      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);
      doc.insert(from.line + 1, added);
    }

    signalLater(doc, "change", doc, change);
  }

  // The document is represented as a BTree consisting of leaves, with
  // chunk of lines in them, and branches, with up to ten leaves or
  // other branch nodes below them. The top node is always a branch
  // node, and is the document object itself (meaning it has
  // additional methods and properties).
  //
  // All nodes have parent links. The tree is used both to go from
  // line numbers to line objects, and to go from objects to numbers.
  // It also indexes by height, and is used to convert between height
  // and line object, and to find the total height of the document.
  //
  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html

  function LeafChunk(lines) {
    this.lines = lines;
    this.parent = null;
    for (var i = 0, height = 0; i < lines.length; ++i) {
      lines[i].parent = this;
      height += lines[i].height;
    }
    this.height = height;
  }

  LeafChunk.prototype = {
    chunkSize: function() { return this.lines.length; },
    // Remove the n lines at offset 'at'.
    removeInner: function(at, n) {
      for (var i = at, e = at + n; i < e; ++i) {
        var line = this.lines[i];
        this.height -= line.height;
        cleanUpLine(line);
        signalLater(line, "delete");
      }
      this.lines.splice(at, n);
    },
    // Helper used to collapse a small branch into a single leaf.
    collapse: function(lines) {
      lines.push.apply(lines, this.lines);
    },
    // Insert the given array of lines at offset 'at', count them as
    // having the given height.
    insertInner: function(at, lines, height) {
      this.height += height;
      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
      for (var i = 0; i < lines.length; ++i) lines[i].parent = this;
    },
    // Used to iterate over a part of the tree.
    iterN: function(at, n, op) {
      for (var e = at + n; at < e; ++at)
        if (op(this.lines[at])) return true;
    }
  };

  function BranchChunk(children) {
    this.children = children;
    var size = 0, height = 0;
    for (var i = 0; i < children.length; ++i) {
      var ch = children[i];
      size += ch.chunkSize(); height += ch.height;
      ch.parent = this;
    }
    this.size = size;
    this.height = height;
    this.parent = null;
  }

  BranchChunk.prototype = {
    chunkSize: function() { return this.size; },
    removeInner: function(at, n) {
      this.size -= n;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var rm = Math.min(n, sz - at), oldHeight = child.height;
          child.removeInner(at, rm);
          this.height -= oldHeight - child.height;
          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }
          if ((n -= rm) == 0) break;
          at = 0;
        } else at -= sz;
      }
      // If the result is smaller than 25 lines, ensure that it is a
      // single leaf node.
      if (this.size - n < 25 &&
          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
        var lines = [];
        this.collapse(lines);
        this.children = [new LeafChunk(lines)];
        this.children[0].parent = this;
      }
    },
    collapse: function(lines) {
      for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);
    },
    insertInner: function(at, lines, height) {
      this.size += lines.length;
      this.height += height;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at <= sz) {
          child.insertInner(at, lines, height);
          if (child.lines && child.lines.length > 50) {
            while (child.lines.length > 50) {
              var spilled = child.lines.splice(child.lines.length - 25, 25);
              var newleaf = new LeafChunk(spilled);
              child.height -= newleaf.height;
              this.children.splice(i + 1, 0, newleaf);
              newleaf.parent = this;
            }
            this.maybeSpill();
          }
          break;
        }
        at -= sz;
      }
    },
    // When a node has grown, check whether it should be split.
    maybeSpill: function() {
      if (this.children.length <= 10) return;
      var me = this;
      do {
        var spilled = me.children.splice(me.children.length - 5, 5);
        var sibling = new BranchChunk(spilled);
        if (!me.parent) { // Become the parent node
          var copy = new BranchChunk(me.children);
          copy.parent = me;
          me.children = [copy, sibling];
          me = copy;
        } else {
          me.size -= sibling.size;
          me.height -= sibling.height;
          var myIndex = indexOf(me.parent.children, me);
          me.parent.children.splice(myIndex + 1, 0, sibling);
        }
        sibling.parent = me.parent;
      } while (me.children.length > 10);
      me.parent.maybeSpill();
    },
    iterN: function(at, n, op) {
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var used = Math.min(n, sz - at);
          if (child.iterN(at, used, op)) return true;
          if ((n -= used) == 0) break;
          at = 0;
        } else at -= sz;
      }
    }
  };

  var nextDocId = 0;
  var Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {
    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine, lineSep);
    if (firstLine == null) firstLine = 0;

    BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
    this.first = firstLine;
    this.scrollTop = this.scrollLeft = 0;
    this.cantEdit = false;
    this.cleanGeneration = 1;
    this.frontier = firstLine;
    var start = Pos(firstLine, 0);
    this.sel = simpleSelection(start);
    this.history = new History(null);
    this.id = ++nextDocId;
    this.modeOption = mode;
    this.lineSep = lineSep;
    this.extend = false;

    if (typeof text == "string") text = this.splitLines(text);
    updateDoc(this, {from: start, to: start, text: text});
    setSelection(this, simpleSelection(start), sel_dontScroll);
  };

  Doc.prototype = createObj(BranchChunk.prototype, {
    constructor: Doc,
    // Iterate over the document. Supports two forms -- with only one
    // argument, it calls that for each line in the document. With
    // three, it iterates over the range given by the first two (with
    // the second being non-inclusive).
    iter: function(from, to, op) {
      if (op) this.iterN(from - this.first, to - from, op);
      else this.iterN(this.first, this.first + this.size, from);
    },

    // Non-public interface for adding and removing lines.
    insert: function(at, lines) {
      var height = 0;
      for (var i = 0; i < lines.length; ++i) height += lines[i].height;
      this.insertInner(at - this.first, lines, height);
    },
    remove: function(at, n) { this.removeInner(at - this.first, n); },

    // From here, the methods are part of the public interface. Most
    // are also available from CodeMirror (editor) instances.

    getValue: function(lineSep) {
      var lines = getLines(this, this.first, this.first + this.size);
      if (lineSep === false) return lines;
      return lines.join(lineSep || this.lineSeparator());
    },
    setValue: docMethodOp(function(code) {
      var top = Pos(this.first, 0), last = this.first + this.size - 1;
      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),
                        text: this.splitLines(code), origin: "setValue", full: true}, true);
      setSelection(this, simpleSelection(top));
    }),
    replaceRange: function(code, from, to, origin) {
      from = clipPos(this, from);
      to = to ? clipPos(this, to) : from;
      replaceRange(this, code, from, to, origin);
    },
    getRange: function(from, to, lineSep) {
      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
      if (lineSep === false) return lines;
      return lines.join(lineSep || this.lineSeparator());
    },

    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},

    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},
    getLineNumber: function(line) {return lineNo(line);},

    getLineHandleVisualStart: function(line) {
      if (typeof line == "number") line = getLine(this, line);
      return visualLine(line);
    },

    lineCount: function() {return this.size;},
    firstLine: function() {return this.first;},
    lastLine: function() {return this.first + this.size - 1;},

    clipPos: function(pos) {return clipPos(this, pos);},

    getCursor: function(start) {
      var range = this.sel.primary(), pos;
      if (start == null || start == "head") pos = range.head;
      else if (start == "anchor") pos = range.anchor;
      else if (start == "end" || start == "to" || start === false) pos = range.to();
      else pos = range.from();
      return pos;
    },
    listSelections: function() { return this.sel.ranges; },
    somethingSelected: function() {return this.sel.somethingSelected();},

    setCursor: docMethodOp(function(line, ch, options) {
      setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
    }),
    setSelection: docMethodOp(function(anchor, head, options) {
      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
    }),
    extendSelection: docMethodOp(function(head, other, options) {
      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
    }),
    extendSelections: docMethodOp(function(heads, options) {
      extendSelections(this, clipPosArray(this, heads), options);
    }),
    extendSelectionsBy: docMethodOp(function(f, options) {
      var heads = map(this.sel.ranges, f);
      extendSelections(this, clipPosArray(this, heads), options);
    }),
    setSelections: docMethodOp(function(ranges, primary, options) {
      if (!ranges.length) return;
      for (var i = 0, out = []; i < ranges.length; i++)
        out[i] = new Range(clipPos(this, ranges[i].anchor),
                           clipPos(this, ranges[i].head));
      if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex);
      setSelection(this, normalizeSelection(out, primary), options);
    }),
    addSelection: docMethodOp(function(anchor, head, options) {
      var ranges = this.sel.ranges.slice(0);
      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);
    }),

    getSelection: function(lineSep) {
      var ranges = this.sel.ranges, lines;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        lines = lines ? lines.concat(sel) : sel;
      }
      if (lineSep === false) return lines;
      else return lines.join(lineSep || this.lineSeparator());
    },
    getSelections: function(lineSep) {
      var parts = [], ranges = this.sel.ranges;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        if (lineSep !== false) sel = sel.join(lineSep || this.lineSeparator());
        parts[i] = sel;
      }
      return parts;
    },
    replaceSelection: function(code, collapse, origin) {
      var dup = [];
      for (var i = 0; i < this.sel.ranges.length; i++)
        dup[i] = code;
      this.replaceSelections(dup, collapse, origin || "+input");
    },
    replaceSelections: docMethodOp(function(code, collapse, origin) {
      var changes = [], sel = this.sel;
      for (var i = 0; i < sel.ranges.length; i++) {
        var range = sel.ranges[i];
        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};
      }
      var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
      for (var i = changes.length - 1; i >= 0; i--)
        makeChange(this, changes[i]);
      if (newSel) setSelectionReplaceHistory(this, newSel);
      else if (this.cm) ensureCursorVisible(this.cm);
    }),
    undo: docMethodOp(function() {makeChangeFromHistory(this, "undo");}),
    redo: docMethodOp(function() {makeChangeFromHistory(this, "redo");}),
    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, "undo", true);}),
    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, "redo", true);}),

    setExtending: function(val) {this.extend = val;},
    getExtending: function() {return this.extend;},

    historySize: function() {
      var hist = this.history, done = 0, undone = 0;
      for (var i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done;
      for (var i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone;
      return {undo: done, redo: undone};
    },
    clearHistory: function() {this.history = new History(this.history.maxGeneration);},

    markClean: function() {
      this.cleanGeneration = this.changeGeneration(true);
    },
    changeGeneration: function(forceSplit) {
      if (forceSplit)
        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
      return this.history.generation;
    },
    isClean: function (gen) {
      return this.history.generation == (gen || this.cleanGeneration);
    },

    getHistory: function() {
      return {done: copyHistoryArray(this.history.done),
              undone: copyHistoryArray(this.history.undone)};
    },
    setHistory: function(histData) {
      var hist = this.history = new History(this.history.maxGeneration);
      hist.done = copyHistoryArray(histData.done.slice(0), null, true);
      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
    },

    addLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        if (!line[prop]) line[prop] = cls;
        else if (classTest(cls).test(line[prop])) return false;
        else line[prop] += " " + cls;
        return true;
      });
    }),
    removeLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        var cur = line[prop];
        if (!cur) return false;
        else if (cls == null) line[prop] = null;
        else {
          var found = cur.match(classTest(cls));
          if (!found) return false;
          var end = found.index + found[0].length;
          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
        }
        return true;
      });
    }),

    addLineWidget: docMethodOp(function(handle, node, options) {
      return addLineWidget(this, handle, node, options);
    }),
    removeLineWidget: function(widget) { widget.clear(); },

    markText: function(from, to, options) {
      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || "range");
    },
    setBookmark: function(pos, options) {
      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),
                      insertLeft: options && options.insertLeft,
                      clearWhenEmpty: false, shared: options && options.shared,
                      handleMouseEvents: options && options.handleMouseEvents};
      pos = clipPos(this, pos);
      return markText(this, pos, pos, realOpts, "bookmark");
    },
    findMarksAt: function(pos) {
      pos = clipPos(this, pos);
      var markers = [], spans = getLine(this, pos.line).markedSpans;
      if (spans) for (var i = 0; i < spans.length; ++i) {
        var span = spans[i];
        if ((span.from == null || span.from <= pos.ch) &&
            (span.to == null || span.to >= pos.ch))
          markers.push(span.marker.parent || span.marker);
      }
      return markers;
    },
    findMarks: function(from, to, filter) {
      from = clipPos(this, from); to = clipPos(this, to);
      var found = [], lineNo = from.line;
      this.iter(from.line, to.line + 1, function(line) {
        var spans = line.markedSpans;
        if (spans) for (var i = 0; i < spans.length; i++) {
          var span = spans[i];
          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||
                span.from == null && lineNo != from.line ||
                span.from != null && lineNo == to.line && span.from >= to.ch) &&
              (!filter || filter(span.marker)))
            found.push(span.marker.parent || span.marker);
        }
        ++lineNo;
      });
      return found;
    },
    getAllMarks: function() {
      var markers = [];
      this.iter(function(line) {
        var sps = line.markedSpans;
        if (sps) for (var i = 0; i < sps.length; ++i)
          if (sps[i].from != null) markers.push(sps[i].marker);
      });
      return markers;
    },

    posFromIndex: function(off) {
      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;
      this.iter(function(line) {
        var sz = line.text.length + sepSize;
        if (sz > off) { ch = off; return true; }
        off -= sz;
        ++lineNo;
      });
      return clipPos(this, Pos(lineNo, ch));
    },
    indexFromPos: function (coords) {
      coords = clipPos(this, coords);
      var index = coords.ch;
      if (coords.line < this.first || coords.ch < 0) return 0;
      var sepSize = this.lineSeparator().length;
      this.iter(this.first, coords.line, function (line) {
        index += line.text.length + sepSize;
      });
      return index;
    },

    copy: function(copyHistory) {
      var doc = new Doc(getLines(this, this.first, this.first + this.size),
                        this.modeOption, this.first, this.lineSep);
      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;
      doc.sel = this.sel;
      doc.extend = false;
      if (copyHistory) {
        doc.history.undoDepth = this.history.undoDepth;
        doc.setHistory(this.getHistory());
      }
      return doc;
    },

    linkedDoc: function(options) {
      if (!options) options = {};
      var from = this.first, to = this.first + this.size;
      if (options.from != null && options.from > from) from = options.from;
      if (options.to != null && options.to < to) to = options.to;
      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);
      if (options.sharedHist) copy.history = this.history;
      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});
      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];
      copySharedMarkers(copy, findSharedMarkers(this));
      return copy;
    },
    unlinkDoc: function(other) {
      if (other instanceof CodeMirror) other = other.doc;
      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {
        var link = this.linked[i];
        if (link.doc != other) continue;
        this.linked.splice(i, 1);
        other.unlinkDoc(this);
        detachSharedMarkers(findSharedMarkers(this));
        break;
      }
      // If the histories were shared, split them again
      if (other.history == this.history) {
        var splitIds = [other.id];
        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);
        other.history = new History(null);
        other.history.done = copyHistoryArray(this.history.done, splitIds);
        other.history.undone = copyHistoryArray(this.history.undone, splitIds);
      }
    },
    iterLinkedDocs: function(f) {linkedDocs(this, f);},

    getMode: function() {return this.mode;},
    getEditor: function() {return this.cm;},

    splitLines: function(str) {
      if (this.lineSep) return str.split(this.lineSep);
      return splitLinesAuto(str);
    },
    lineSeparator: function() { return this.lineSep || "\n"; }
  });

  // Public alias.
  Doc.prototype.eachLine = Doc.prototype.iter;

  // Set up methods on CodeMirror's prototype to redirect to the editor's document.
  var dontDelegate = "iter insert remove copy getEditor constructor".split(" ");
  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)
    CodeMirror.prototype[prop] = (function(method) {
      return function() {return method.apply(this.doc, arguments);};
    })(Doc.prototype[prop]);

  eventMixin(Doc);

  // Call f for all linked documents.
  function linkedDocs(doc, f, sharedHistOnly) {
    function propagate(doc, skip, sharedHist) {
      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {
        var rel = doc.linked[i];
        if (rel.doc == skip) continue;
        var shared = sharedHist && rel.sharedHist;
        if (sharedHistOnly && !shared) continue;
        f(rel.doc, shared);
        propagate(rel.doc, doc, shared);
      }
    }
    propagate(doc, null, true);
  }

  // Attach a document to an editor.
  function attachDoc(cm, doc) {
    if (doc.cm) throw new Error("This document is already in use.");
    cm.doc = doc;
    doc.cm = cm;
    estimateLineHeights(cm);
    loadMode(cm);
    if (!cm.options.lineWrapping) findMaxLine(cm);
    cm.options.mode = doc.modeOption;
    regChange(cm);
  }

  // LINE UTILITIES

  // Find the line object corresponding to the given line number.
  function getLine(doc, n) {
    n -= doc.first;
    if (n < 0 || n >= doc.size) throw new Error("There is no line " + (n + doc.first) + " in the document.");
    for (var chunk = doc; !chunk.lines;) {
      for (var i = 0;; ++i) {
        var child = chunk.children[i], sz = child.chunkSize();
        if (n < sz) { chunk = child; break; }
        n -= sz;
      }
    }
    return chunk.lines[n];
  }

  // Get the part of a document between two positions, as an array of
  // strings.
  function getBetween(doc, start, end) {
    var out = [], n = start.line;
    doc.iter(start.line, end.line + 1, function(line) {
      var text = line.text;
      if (n == end.line) text = text.slice(0, end.ch);
      if (n == start.line) text = text.slice(start.ch);
      out.push(text);
      ++n;
    });
    return out;
  }
  // Get the lines between from and to, as array of strings.
  function getLines(doc, from, to) {
    var out = [];
    doc.iter(from, to, function(line) { out.push(line.text); });
    return out;
  }

  // Update the height of a line, propagating the height change
  // upwards to parent nodes.
  function updateLineHeight(line, height) {
    var diff = height - line.height;
    if (diff) for (var n = line; n; n = n.parent) n.height += diff;
  }

  // Given a line object, find its line number by walking up through
  // its parent links.
  function lineNo(line) {
    if (line.parent == null) return null;
    var cur = line.parent, no = indexOf(cur.lines, line);
    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
      for (var i = 0;; ++i) {
        if (chunk.children[i] == cur) break;
        no += chunk.children[i].chunkSize();
      }
    }
    return no + cur.first;
  }

  // Find the line at the given vertical position, using the height
  // information in the document tree.
  function lineAtHeight(chunk, h) {
    var n = chunk.first;
    outer: do {
      for (var i = 0; i < chunk.children.length; ++i) {
        var child = chunk.children[i], ch = child.height;
        if (h < ch) { chunk = child; continue outer; }
        h -= ch;
        n += child.chunkSize();
      }
      return n;
    } while (!chunk.lines);
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i], lh = line.height;
      if (h < lh) break;
      h -= lh;
    }
    return n + i;
  }


  // Find the height above the given line.
  function heightAtLine(lineObj) {
    lineObj = visualLine(lineObj);

    var h = 0, chunk = lineObj.parent;
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i];
      if (line == lineObj) break;
      else h += line.height;
    }
    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
      for (var i = 0; i < p.children.length; ++i) {
        var cur = p.children[i];
        if (cur == chunk) break;
        else h += cur.height;
      }
    }
    return h;
  }

  // Get the bidi ordering for the given line (and cache it). Returns
  // false for lines that are fully left-to-right, and an array of
  // BidiSpan objects otherwise.
  function getOrder(line) {
    var order = line.order;
    if (order == null) order = line.order = bidiOrdering(line.text);
    return order;
  }

  // HISTORY

  function History(startGen) {
    // Arrays of change events and selections. Doing something adds an
    // event to done and clears undo. Undoing moves events from done
    // to undone, redoing moves them in the other direction.
    this.done = []; this.undone = [];
    this.undoDepth = Infinity;
    // Used to track when changes can be merged into a single undo
    // event
    this.lastModTime = this.lastSelTime = 0;
    this.lastOp = this.lastSelOp = null;
    this.lastOrigin = this.lastSelOrigin = null;
    // Used by the isClean() method
    this.generation = this.maxGeneration = startGen || 1;
  }

  // Create a history change event from an updateDoc-style change
  // object.
  function historyChangeFromChange(doc, change) {
    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};
    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);
    return histChange;
  }

  // Pop all selection events off the end of a history array. Stop at
  // a change event.
  function clearSelectionEvents(array) {
    while (array.length) {
      var last = lst(array);
      if (last.ranges) array.pop();
      else break;
    }
  }

  // Find the top change event in the history. Pop off selection
  // events that are in the way.
  function lastChangeEvent(hist, force) {
    if (force) {
      clearSelectionEvents(hist.done);
      return lst(hist.done);
    } else if (hist.done.length && !lst(hist.done).ranges) {
      return lst(hist.done);
    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
      hist.done.pop();
      return lst(hist.done);
    }
  }

  // Register a change in the history. Merges changes that are within
  // a single operation, ore are close together with an origin that
  // allows merging (starting with "+") into a single event.
  function addChangeToHistory(doc, change, selAfter, opId) {
    var hist = doc.history;
    hist.undone.length = 0;
    var time = +new Date, cur;

    if ((hist.lastOp == opId ||
         hist.lastOrigin == change.origin && change.origin &&
         ((change.origin.charAt(0) == "+" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||
          change.origin.charAt(0) == "*")) &&
        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
      // Merge this change into the last event
      var last = lst(cur.changes);
      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
        // Optimized case for simple insertion -- don't want to add
        // new changesets for every character typed
        last.to = changeEnd(change);
      } else {
        // Add new sub-event
        cur.changes.push(historyChangeFromChange(doc, change));
      }
    } else {
      // Can not be merged, start a new event.
      var before = lst(hist.done);
      if (!before || !before.ranges)
        pushSelectionToHistory(doc.sel, hist.done);
      cur = {changes: [historyChangeFromChange(doc, change)],
             generation: hist.generation};
      hist.done.push(cur);
      while (hist.done.length > hist.undoDepth) {
        hist.done.shift();
        if (!hist.done[0].ranges) hist.done.shift();
      }
    }
    hist.done.push(selAfter);
    hist.generation = ++hist.maxGeneration;
    hist.lastModTime = hist.lastSelTime = time;
    hist.lastOp = hist.lastSelOp = opId;
    hist.lastOrigin = hist.lastSelOrigin = change.origin;

    if (!last) signal(doc, "historyAdded");
  }

  function selectionEventCanBeMerged(doc, origin, prev, sel) {
    var ch = origin.charAt(0);
    return ch == "*" ||
      ch == "+" &&
      prev.ranges.length == sel.ranges.length &&
      prev.somethingSelected() == sel.somethingSelected() &&
      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
  }

  // Called whenever the selection changes, sets the new selection as
  // the pending selection in the history, and pushes the old pending
  // selection into the 'done' array when it was significantly
  // different (in number of selected ranges, emptiness, or time).
  function addSelectionToHistory(doc, sel, opId, options) {
    var hist = doc.history, origin = options && options.origin;

    // A new event is started when the previous origin does not match
    // the current, or the origins don't allow matching. Origins
    // starting with * are always merged, those starting with + are
    // merged when similar and close together in time.
    if (opId == hist.lastSelOp ||
        (origin && hist.lastSelOrigin == origin &&
         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||
          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))
      hist.done[hist.done.length - 1] = sel;
    else
      pushSelectionToHistory(sel, hist.done);

    hist.lastSelTime = +new Date;
    hist.lastSelOrigin = origin;
    hist.lastSelOp = opId;
    if (options && options.clearRedo !== false)
      clearSelectionEvents(hist.undone);
  }

  function pushSelectionToHistory(sel, dest) {
    var top = lst(dest);
    if (!(top && top.ranges && top.equals(sel)))
      dest.push(sel);
  }

  // Used to store marked span information in the history.
  function attachLocalSpans(doc, change, from, to) {
    var existing = change["spans_" + doc.id], n = 0;
    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
      if (line.markedSpans)
        (existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans;
      ++n;
    });
  }

  // When un/re-doing restores text containing marked spans, those
  // that have been explicitly cleared should not be restored.
  function removeClearedSpans(spans) {
    if (!spans) return null;
    for (var i = 0, out; i < spans.length; ++i) {
      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }
      else if (out) out.push(spans[i]);
    }
    return !out ? spans : out.length ? out : null;
  }

  // Retrieve and filter the old marked spans stored in a change event.
  function getOldSpans(doc, change) {
    var found = change["spans_" + doc.id];
    if (!found) return null;
    for (var i = 0, nw = []; i < change.text.length; ++i)
      nw.push(removeClearedSpans(found[i]));
    return nw;
  }

  // Used both to provide a JSON-safe object in .getHistory, and, when
  // detaching a document, to split the history in two
  function copyHistoryArray(events, newGroup, instantiateSel) {
    for (var i = 0, copy = []; i < events.length; ++i) {
      var event = events[i];
      if (event.ranges) {
        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
        continue;
      }
      var changes = event.changes, newChanges = [];
      copy.push({changes: newChanges});
      for (var j = 0; j < changes.length; ++j) {
        var change = changes[j], m;
        newChanges.push({from: change.from, to: change.to, text: change.text});
        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\d+)$/)) {
          if (indexOf(newGroup, Number(m[1])) > -1) {
            lst(newChanges)[prop] = change[prop];
            delete change[prop];
          }
        }
      }
    }
    return copy;
  }

  // Rebasing/resetting history to deal with externally-sourced changes

  function rebaseHistSelSingle(pos, from, to, diff) {
    if (to < pos.line) {
      pos.line += diff;
    } else if (from < pos.line) {
      pos.line = from;
      pos.ch = 0;
    }
  }

  // Tries to rebase an array of history events given a change in the
  // document. If the change touches the same lines as the event, the
  // event, and everything 'behind' it, is discarded. If the change is
  // before the event, the event's positions are updated. Uses a
  // copy-on-write scheme for the positions, to avoid having to
  // reallocate them all on every rebase, but also avoid problems with
  // shared position objects being unsafely updated.
  function rebaseHistArray(array, from, to, diff) {
    for (var i = 0; i < array.length; ++i) {
      var sub = array[i], ok = true;
      if (sub.ranges) {
        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }
        for (var j = 0; j < sub.ranges.length; j++) {
          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
        }
        continue;
      }
      for (var j = 0; j < sub.changes.length; ++j) {
        var cur = sub.changes[j];
        if (to < cur.from.line) {
          cur.from = Pos(cur.from.line + diff, cur.from.ch);
          cur.to = Pos(cur.to.line + diff, cur.to.ch);
        } else if (from <= cur.to.line) {
          ok = false;
          break;
        }
      }
      if (!ok) {
        array.splice(0, i + 1);
        i = 0;
      }
    }
  }

  function rebaseHist(hist, change) {
    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
    rebaseHistArray(hist.done, from, to, diff);
    rebaseHistArray(hist.undone, from, to, diff);
  }

  // EVENT UTILITIES

  // Due to the fact that we still support jurassic IE versions, some
  // compatibility wrappers are needed.

  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {
    if (e.preventDefault) e.preventDefault();
    else e.returnValue = false;
  };
  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {
    if (e.stopPropagation) e.stopPropagation();
    else e.cancelBubble = true;
  };
  function e_defaultPrevented(e) {
    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
  }
  var e_stop = CodeMirror.e_stop = function(e) {e_preventDefault(e); e_stopPropagation(e);};

  function e_target(e) {return e.target || e.srcElement;}
  function e_button(e) {
    var b = e.which;
    if (b == null) {
      if (e.button & 1) b = 1;
      else if (e.button & 2) b = 3;
      else if (e.button & 4) b = 2;
    }
    if (mac && e.ctrlKey && b == 1) b = 3;
    return b;
  }

  // EVENT HANDLING

  // Lightweight event framework. on/off also work on DOM nodes,
  // registering native DOM handlers.

  var on = CodeMirror.on = function(emitter, type, f) {
    if (emitter.addEventListener)
      emitter.addEventListener(type, f, false);
    else if (emitter.attachEvent)
      emitter.attachEvent("on" + type, f);
    else {
      var map = emitter._handlers || (emitter._handlers = {});
      var arr = map[type] || (map[type] = []);
      arr.push(f);
    }
  };

  var noHandlers = []
  function getHandlers(emitter, type, copy) {
    var arr = emitter._handlers && emitter._handlers[type]
    if (copy) return arr && arr.length > 0 ? arr.slice() : noHandlers
    else return arr || noHandlers
  }

  var off = CodeMirror.off = function(emitter, type, f) {
    if (emitter.removeEventListener)
      emitter.removeEventListener(type, f, false);
    else if (emitter.detachEvent)
      emitter.detachEvent("on" + type, f);
    else {
      var handlers = getHandlers(emitter, type, false)
      for (var i = 0; i < handlers.length; ++i)
        if (handlers[i] == f) { handlers.splice(i, 1); break; }
    }
  };

  var signal = CodeMirror.signal = function(emitter, type /*, values...*/) {
    var handlers = getHandlers(emitter, type, true)
    if (!handlers.length) return;
    var args = Array.prototype.slice.call(arguments, 2);
    for (var i = 0; i < handlers.length; ++i) handlers[i].apply(null, args);
  };

  var orphanDelayedCallbacks = null;

  // Often, we want to signal events at a point where we are in the
  // middle of some work, but don't want the handler to start calling
  // other methods on the editor, which might be in an inconsistent
  // state or simply not expect any other events to happen.
  // signalLater looks whether there are any handlers, and schedules
  // them to be executed when the last operation ends, or, if no
  // operation is active, when a timeout fires.
  function signalLater(emitter, type /*, values...*/) {
    var arr = getHandlers(emitter, type, false)
    if (!arr.length) return;
    var args = Array.prototype.slice.call(arguments, 2), list;
    if (operationGroup) {
      list = operationGroup.delayedCallbacks;
    } else if (orphanDelayedCallbacks) {
      list = orphanDelayedCallbacks;
    } else {
      list = orphanDelayedCallbacks = [];
      setTimeout(fireOrphanDelayed, 0);
    }
    function bnd(f) {return function(){f.apply(null, args);};};
    for (var i = 0; i < arr.length; ++i)
      list.push(bnd(arr[i]));
  }

  function fireOrphanDelayed() {
    var delayed = orphanDelayedCallbacks;
    orphanDelayedCallbacks = null;
    for (var i = 0; i < delayed.length; ++i) delayed[i]();
  }

  // The DOM events that CodeMirror handles can be overridden by
  // registering a (non-DOM) handler on the editor for the event name,
  // and preventDefault-ing the event in that handler.
  function signalDOMEvent(cm, e, override) {
    if (typeof e == "string")
      e = {type: e, preventDefault: function() { this.defaultPrevented = true; }};
    signal(cm, override || e.type, cm, e);
    return e_defaultPrevented(e) || e.codemirrorIgnore;
  }

  function signalCursorActivity(cm) {
    var arr = cm._handlers && cm._handlers.cursorActivity;
    if (!arr) return;
    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
    for (var i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)
      set.push(arr[i]);
  }

  function hasHandler(emitter, type) {
    return getHandlers(emitter, type).length > 0
  }

  // Add on and off methods to a constructor's prototype, to make
  // registering events on such objects more convenient.
  function eventMixin(ctor) {
    ctor.prototype.on = function(type, f) {on(this, type, f);};
    ctor.prototype.off = function(type, f) {off(this, type, f);};
  }

  // MISC UTILITIES

  // Number of pixels added to scroller and sizer to hide scrollbar
  var scrollerGap = 30;

  // Returned or thrown by various protocols to signal 'I'm not
  // handling this'.
  var Pass = CodeMirror.Pass = {toString: function(){return "CodeMirror.Pass";}};

  // Reused option objects for setSelection & friends
  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: "*mouse"}, sel_move = {origin: "+move"};

  function Delayed() {this.id = null;}
  Delayed.prototype.set = function(ms, f) {
    clearTimeout(this.id);
    this.id = setTimeout(f, ms);
  };

  // Counts the column offset in a string, taking tabs into account.
  // Used mostly to find indentation.
  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {
    if (end == null) {
      end = string.search(/[^\s\u00a0]/);
      if (end == -1) end = string.length;
    }
    for (var i = startIndex || 0, n = startValue || 0;;) {
      var nextTab = string.indexOf("\t", i);
      if (nextTab < 0 || nextTab >= end)
        return n + (end - i);
      n += nextTab - i;
      n += tabSize - (n % tabSize);
      i = nextTab + 1;
    }
  };

  // The inverse of countColumn -- find the offset that corresponds to
  // a particular column.
  var findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {
    for (var pos = 0, col = 0;;) {
      var nextTab = string.indexOf("\t", pos);
      if (nextTab == -1) nextTab = string.length;
      var skipped = nextTab - pos;
      if (nextTab == string.length || col + skipped >= goal)
        return pos + Math.min(skipped, goal - col);
      col += nextTab - pos;
      col += tabSize - (col % tabSize);
      pos = nextTab + 1;
      if (col >= goal) return pos;
    }
  }

  var spaceStrs = [""];
  function spaceStr(n) {
    while (spaceStrs.length <= n)
      spaceStrs.push(lst(spaceStrs) + " ");
    return spaceStrs[n];
  }

  function lst(arr) { return arr[arr.length-1]; }

  var selectInput = function(node) { node.select(); };
  if (ios) // Mobile Safari apparently has a bug where select() is broken.
    selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; };
  else if (ie) // Suppress mysterious IE10 errors
    selectInput = function(node) { try { node.select(); } catch(_e) {} };

  function indexOf(array, elt) {
    for (var i = 0; i < array.length; ++i)
      if (array[i] == elt) return i;
    return -1;
  }
  function map(array, f) {
    var out = [];
    for (var i = 0; i < array.length; i++) out[i] = f(array[i], i);
    return out;
  }

  function nothing() {}

  function createObj(base, props) {
    var inst;
    if (Object.create) {
      inst = Object.create(base);
    } else {
      nothing.prototype = base;
      inst = new nothing();
    }
    if (props) copyObj(props, inst);
    return inst;
  };

  function copyObj(obj, target, overwrite) {
    if (!target) target = {};
    for (var prop in obj)
      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))
        target[prop] = obj[prop];
    return target;
  }

  function bind(f) {
    var args = Array.prototype.slice.call(arguments, 1);
    return function(){return f.apply(null, args);};
  }

  var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {
    return /\w/.test(ch) || ch > "\x80" &&
      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
  };
  function isWordChar(ch, helper) {
    if (!helper) return isWordCharBasic(ch);
    if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) return true;
    return helper.test(ch);
  }

  function isEmpty(obj) {
    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;
    return true;
  }

  // Extending unicode characters. A series of a non-extending char +
  // any number of extending chars is treated as a single unit as far
  // as editing and measuring is concerned. This is not fully correct,
  // since some scripts/fonts/browsers also treat other configurations
  // of code points as a group.
  var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch); }

  // DOM UTILITIES

  function elt(tag, content, className, style) {
    var e = document.createElement(tag);
    if (className) e.className = className;
    if (style) e.style.cssText = style;
    if (typeof content == "string") e.appendChild(document.createTextNode(content));
    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);
    return e;
  }

  var range;
  if (document.createRange) range = function(node, start, end, endNode) {
    var r = document.createRange();
    r.setEnd(endNode || node, end);
    r.setStart(node, start);
    return r;
  };
  else range = function(node, start, end) {
    var r = document.body.createTextRange();
    try { r.moveToElementText(node.parentNode); }
    catch(e) { return r; }
    r.collapse(true);
    r.moveEnd("character", end);
    r.moveStart("character", start);
    return r;
  };

  function removeChildren(e) {
    for (var count = e.childNodes.length; count > 0; --count)
      e.removeChild(e.firstChild);
    return e;
  }

  function removeChildrenAndAdd(parent, e) {
    return removeChildren(parent).appendChild(e);
  }

  var contains = CodeMirror.contains = function(parent, child) {
    if (child.nodeType == 3) // Android browser always returns false when child is a textnode
      child = child.parentNode;
    if (parent.contains)
      return parent.contains(child);
    do {
      if (child.nodeType == 11) child = child.host;
      if (child == parent) return true;
    } while (child = child.parentNode);
  };

  function activeElt() {
    var activeElement = document.activeElement;
    while (activeElement && activeElement.root && activeElement.root.activeElement)
      activeElement = activeElement.root.activeElement;
    return activeElement;
  }
  // Older versions of IE throws unspecified error when touching
  // document.activeElement in some cases (during loading, in iframe)
  if (ie && ie_version < 11) activeElt = function() {
    try { return document.activeElement; }
    catch(e) { return document.body; }
  };

  function classTest(cls) { return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*"); }
  var rmClass = CodeMirror.rmClass = function(node, cls) {
    var current = node.className;
    var match = classTest(cls).exec(current);
    if (match) {
      var after = current.slice(match.index + match[0].length);
      node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
    }
  };
  var addClass = CodeMirror.addClass = function(node, cls) {
    var current = node.className;
    if (!classTest(cls).test(current)) node.className += (current ? " " : "") + cls;
  };
  function joinClasses(a, b) {
    var as = a.split(" ");
    for (var i = 0; i < as.length; i++)
      if (as[i] && !classTest(as[i]).test(b)) b += " " + as[i];
    return b;
  }

  // WINDOW-WIDE EVENTS

  // These must be handled carefully, because naively registering a
  // handler for each editor will cause the editors to never be
  // garbage collected.

  function forEachCodeMirror(f) {
    if (!document.body.getElementsByClassName) return;
    var byClass = document.body.getElementsByClassName("CodeMirror");
    for (var i = 0; i < byClass.length; i++) {
      var cm = byClass[i].CodeMirror;
      if (cm) f(cm);
    }
  }

  var globalsRegistered = false;
  function ensureGlobalHandlers() {
    if (globalsRegistered) return;
    registerGlobalHandlers();
    globalsRegistered = true;
  }
  function registerGlobalHandlers() {
    // When the window resizes, we need to refresh active editors.
    var resizeTimer;
    on(window, "resize", function() {
      if (resizeTimer == null) resizeTimer = setTimeout(function() {
        resizeTimer = null;
        forEachCodeMirror(onResize);
      }, 100);
    });
    // When the window loses focus, we want to show the editor as blurred
    on(window, "blur", function() {
      forEachCodeMirror(onBlur);
    });
  }

  // FEATURE DETECTION

  // Detect drag-and-drop
  var dragAndDrop = function() {
    // There is *some* kind of drag-and-drop support in IE6-8, but I
    // couldn't get it to work yet.
    if (ie && ie_version < 9) return false;
    var div = elt('div');
    return "draggable" in div || "dragDrop" in div;
  }();

  var zwspSupported;
  function zeroWidthElement(measure) {
    if (zwspSupported == null) {
      var test = elt("span", "\u200b");
      removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
      if (measure.firstChild.offsetHeight != 0)
        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
    }
    var node = zwspSupported ? elt("span", "\u200b") :
      elt("span", "\u00a0", null, "display: inline-block; width: 1px; margin-right: -1px");
    node.setAttribute("cm-text", "");
    return node;
  }

  // Feature-detect IE's crummy client rect reporting for bidi text
  var badBidiRects;
  function hasBadBidiRects(measure) {
    if (badBidiRects != null) return badBidiRects;
    var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062eA"));
    var r0 = range(txt, 0, 1).getBoundingClientRect();
    if (!r0 || r0.left == r0.right) return false; // Safari returns null in some cases (#2780)
    var r1 = range(txt, 1, 2).getBoundingClientRect();
    return badBidiRects = (r1.right - r0.right < 3);
  }

  // See if "".split is the broken IE version, if so, provide an
  // alternative way to split lines.
  var splitLinesAuto = CodeMirror.splitLines = "\n\nb".split(/\n/).length != 3 ? function(string) {
    var pos = 0, result = [], l = string.length;
    while (pos <= l) {
      var nl = string.indexOf("\n", pos);
      if (nl == -1) nl = string.length;
      var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
      var rt = line.indexOf("\r");
      if (rt != -1) {
        result.push(line.slice(0, rt));
        pos += rt + 1;
      } else {
        result.push(line);
        pos = nl + 1;
      }
    }
    return result;
  } : function(string){return string.split(/\r\n?|\n/);};

  var hasSelection = window.getSelection ? function(te) {
    try { return te.selectionStart != te.selectionEnd; }
    catch(e) { return false; }
  } : function(te) {
    try {var range = te.ownerDocument.selection.createRange();}
    catch(e) {}
    if (!range || range.parentElement() != te) return false;
    return range.compareEndPoints("StartToEnd", range) != 0;
  };

  var hasCopyEvent = (function() {
    var e = elt("div");
    if ("oncopy" in e) return true;
    e.setAttribute("oncopy", "return;");
    return typeof e.oncopy == "function";
  })();

  var badZoomedRects = null;
  function hasBadZoomedRects(measure) {
    if (badZoomedRects != null) return badZoomedRects;
    var node = removeChildrenAndAdd(measure, elt("span", "x"));
    var normal = node.getBoundingClientRect();
    var fromRange = range(node, 0, 1).getBoundingClientRect();
    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
  }

  // KEY NAMES

  var keyNames = CodeMirror.keyNames = {
    3: "Enter", 8: "Backspace", 9: "Tab", 13: "Enter", 16: "Shift", 17: "Ctrl", 18: "Alt",
    19: "Pause", 20: "CapsLock", 27: "Esc", 32: "Space", 33: "PageUp", 34: "PageDown", 35: "End",
    36: "Home", 37: "Left", 38: "Up", 39: "Right", 40: "Down", 44: "PrintScrn", 45: "Insert",
    46: "Delete", 59: ";", 61: "=", 91: "Mod", 92: "Mod", 93: "Mod",
    106: "*", 107: "=", 109: "-", 110: ".", 111: "/", 127: "Delete",
    173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\",
    221: "]", 222: "'", 63232: "Up", 63233: "Down", 63234: "Left", 63235: "Right", 63272: "Delete",
    63273: "Home", 63275: "End", 63276: "PageUp", 63277: "PageDown", 63302: "Insert"
  };
  (function() {
    // Number keys
    for (var i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);
    // Alphabetic keys
    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);
    // Function keys
    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = "F" + i;
  })();

  // BIDI HELPERS

  function iterateBidiSections(order, from, to, f) {
    if (!order) return f(from, to, "ltr");
    var found = false;
    for (var i = 0; i < order.length; ++i) {
      var part = order[i];
      if (part.from < to && part.to > from || from == to && part.to == from) {
        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr");
        found = true;
      }
    }
    if (!found) f(from, to, "ltr");
  }

  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }
  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }

  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }
  function lineRight(line) {
    var order = getOrder(line);
    if (!order) return line.text.length;
    return bidiRight(lst(order));
  }

  function lineStart(cm, lineN) {
    var line = getLine(cm.doc, lineN);
    var visual = visualLine(line);
    if (visual != line) lineN = lineNo(visual);
    var order = getOrder(visual);
    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);
    return Pos(lineN, ch);
  }
  function lineEnd(cm, lineN) {
    var merged, line = getLine(cm.doc, lineN);
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      lineN = null;
    }
    var order = getOrder(line);
    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);
    return Pos(lineN == null ? lineNo(line) : lineN, ch);
  }
  function lineStartSmart(cm, pos) {
    var start = lineStart(cm, pos.line);
    var line = getLine(cm.doc, start.line);
    var order = getOrder(line);
    if (!order || order[0].level == 0) {
      var firstNonWS = Math.max(0, line.text.search(/\S/));
      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
      return Pos(start.line, inWS ? 0 : firstNonWS);
    }
    return start;
  }

  function compareBidiLevel(order, a, b) {
    var linedir = order[0].level;
    if (a == linedir) return true;
    if (b == linedir) return false;
    return a < b;
  }
  var bidiOther;
  function getBidiPartAt(order, pos) {
    bidiOther = null;
    for (var i = 0, found; i < order.length; ++i) {
      var cur = order[i];
      if (cur.from < pos && cur.to > pos) return i;
      if ((cur.from == pos || cur.to == pos)) {
        if (found == null) {
          found = i;
        } else if (compareBidiLevel(order, cur.level, order[found].level)) {
          if (cur.from != cur.to) bidiOther = found;
          return i;
        } else {
          if (cur.from != cur.to) bidiOther = i;
          return found;
        }
      }
    }
    return found;
  }

  function moveInLine(line, pos, dir, byUnit) {
    if (!byUnit) return pos + dir;
    do pos += dir;
    while (pos > 0 && isExtendingChar(line.text.charAt(pos)));
    return pos;
  }

  // This is needed in order to move 'visually' through bi-directional
  // text -- i.e., pressing left should make the cursor go left, even
  // when in RTL text. The tricky part is the 'jumps', where RTL and
  // LTR text touch each other. This often requires the cursor offset
  // to move more than one unit, in order to visually move one unit.
  function moveVisually(line, start, dir, byUnit) {
    var bidi = getOrder(line);
    if (!bidi) return moveLogically(line, start, dir, byUnit);
    var pos = getBidiPartAt(bidi, start), part = bidi[pos];
    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);

    for (;;) {
      if (target > part.from && target < part.to) return target;
      if (target == part.from || target == part.to) {
        if (getBidiPartAt(bidi, target) == pos) return target;
        part = bidi[pos += dir];
        return (dir > 0) == part.level % 2 ? part.to : part.from;
      } else {
        part = bidi[pos += dir];
        if (!part) return null;
        if ((dir > 0) == part.level % 2)
          target = moveInLine(line, part.to, -1, byUnit);
        else
          target = moveInLine(line, part.from, 1, byUnit);
      }
    }
  }

  function moveLogically(line, start, dir, byUnit) {
    var target = start + dir;
    if (byUnit) while (target > 0 && isExtendingChar(line.text.charAt(target))) target += dir;
    return target < 0 || target > line.text.length ? null : target;
  }

  // Bidirectional ordering algorithm
  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm
  // that this (partially) implements.

  // One-char codes used for character types:
  // L (L):   Left-to-Right
  // R (R):   Right-to-Left
  // r (AL):  Right-to-Left Arabic
  // 1 (EN):  European Number
  // + (ES):  European Number Separator
  // % (ET):  European Number Terminator
  // n (AN):  Arabic Number
  // , (CS):  Common Number Separator
  // m (NSM): Non-Spacing Mark
  // b (BN):  Boundary Neutral
  // s (B):   Paragraph Separator
  // t (S):   Segment Separator
  // w (WS):  Whitespace
  // N (ON):  Other Neutrals

  // Returns null if characters are ordered as they appear
  // (left-to-right), or an array of sections ({from, to, level}
  // objects) in the order in which they occur visually.
  var bidiOrdering = (function() {
    // Character types for codepoints 0 to 0xff
    var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
    // Character types for codepoints 0x600 to 0x6ff
    var arabicTypes = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";
    function charType(code) {
      if (code <= 0xf7) return lowTypes.charAt(code);
      else if (0x590 <= code && code <= 0x5f4) return "R";
      else if (0x600 <= code && code <= 0x6ed) return arabicTypes.charAt(code - 0x600);
      else if (0x6ee <= code && code <= 0x8ac) return "r";
      else if (0x2000 <= code && code <= 0x200b) return "w";
      else if (code == 0x200c) return "b";
      else return "L";
    }

    var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
    // Browsers seem to always treat the boundaries of block elements as being L.
    var outerType = "L";

    function BidiSpan(level, from, to) {
      this.level = level;
      this.from = from; this.to = to;
    }

    return function(str) {
      if (!bidiRE.test(str)) return false;
      var len = str.length, types = [];
      for (var i = 0, type; i < len; ++i)
        types.push(type = charType(str.charCodeAt(i)));

      // W1. Examine each non-spacing mark (NSM) in the level run, and
      // change the type of the NSM to the type of the previous
      // character. If the NSM is at the start of the level run, it will
      // get the type of sor.
      for (var i = 0, prev = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "m") types[i] = prev;
        else prev = type;
      }

      // W2. Search backwards from each instance of a European number
      // until the first strong type (R, L, AL, or sor) is found. If an
      // AL is found, change the type of the European number to Arabic
      // number.
      // W3. Change all ALs to R.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "1" && cur == "r") types[i] = "n";
        else if (isStrong.test(type)) { cur = type; if (type == "r") types[i] = "R"; }
      }

      // W4. A single European separator between two European numbers
      // changes to a European number. A single common separator between
      // two numbers of the same type changes to that type.
      for (var i = 1, prev = types[0]; i < len - 1; ++i) {
        var type = types[i];
        if (type == "+" && prev == "1" && types[i+1] == "1") types[i] = "1";
        else if (type == "," && prev == types[i+1] &&
                 (prev == "1" || prev == "n")) types[i] = prev;
        prev = type;
      }

      // W5. A sequence of European terminators adjacent to European
      // numbers changes to all European numbers.
      // W6. Otherwise, separators and terminators change to Other
      // Neutral.
      for (var i = 0; i < len; ++i) {
        var type = types[i];
        if (type == ",") types[i] = "N";
        else if (type == "%") {
          for (var end = i + 1; end < len && types[end] == "%"; ++end) {}
          var replace = (i && types[i-1] == "!") || (end < len && types[end] == "1") ? "1" : "N";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // W7. Search backwards from each instance of a European number
      // until the first strong type (R, L, or sor) is found. If an L is
      // found, then change the type of the European number to L.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (cur == "L" && type == "1") types[i] = "L";
        else if (isStrong.test(type)) cur = type;
      }

      // N1. A sequence of neutrals takes the direction of the
      // surrounding strong text if the text on both sides has the same
      // direction. European and Arabic numbers act as if they were R in
      // terms of their influence on neutrals. Start-of-level-run (sor)
      // and end-of-level-run (eor) are used at level run boundaries.
      // N2. Any remaining neutrals take the embedding direction.
      for (var i = 0; i < len; ++i) {
        if (isNeutral.test(types[i])) {
          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}
          var before = (i ? types[i-1] : outerType) == "L";
          var after = (end < len ? types[end] : outerType) == "L";
          var replace = before || after ? "L" : "R";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // Here we depart from the documented algorithm, in order to avoid
      // building up an actual levels array. Since there are only three
      // levels (0, 1, 2) in an implementation that doesn't take
      // explicit embedding into account, we can build up the order on
      // the fly, without following the level-based algorithm.
      var order = [], m;
      for (var i = 0; i < len;) {
        if (countsAsLeft.test(types[i])) {
          var start = i;
          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}
          order.push(new BidiSpan(0, start, i));
        } else {
          var pos = i, at = order.length;
          for (++i; i < len && types[i] != "L"; ++i) {}
          for (var j = pos; j < i;) {
            if (countsAsNum.test(types[j])) {
              if (pos < j) order.splice(at, 0, new BidiSpan(1, pos, j));
              var nstart = j;
              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}
              order.splice(at, 0, new BidiSpan(2, nstart, j));
              pos = j;
            } else ++j;
          }
          if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i));
        }
      }
      if (order[0].level == 1 && (m = str.match(/^\s+/))) {
        order[0].from = m[0].length;
        order.unshift(new BidiSpan(0, 0, m[0].length));
      }
      if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
        lst(order).to -= m[0].length;
        order.push(new BidiSpan(0, len - m[0].length, len));
      }
      if (order[0].level == 2)
        order.unshift(new BidiSpan(1, order[0].to, order[0].to));
      if (order[0].level != lst(order).level)
        order.push(new BidiSpan(order[0].level, len, len));

      return order;
    };
  })();

  // THE END

  CodeMirror.version = "5.14.2";

  return CodeMirror;
});

},{}],17:[function(require,module,exports){
// universal module definition: https://github.com/umdjs/umd/blob/master/returnExports.js#L41
(function (root, factory) {
    if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else {
        // Browser globals (root is window)
        root.emoji = factory();
  }
}(this, function () {
    var emojis = [":blush:",":scream:",":smirk:",":smiley:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":rage:",":disappointed:",":sob:",":kissing_heart:",":wink:",":pensive:",":confounded:",":flushed:",":relaxed:",":mask:",":heart:",":broken_heart:",":sunny:",":umbrella:",":cloud:",":snowflake:",":snowman:",":zap:",":cyclone:",":foggy:",":ocean:",":cat:",":dog:",":mouse:",":hamster:",":rabbit:",":wolf:",":frog:",":tiger:",":koala:",":bear:",":pig:",":pig_nose:",":cow:",":boar:",":monkey_face:",":monkey:",":horse:",":racehorse:",":camel:",":sheep:",":elephant:",":panda_face:",":snake:",":bird:",":baby_chick:",":hatched_chick:",":hatching_chick:",":chicken:",":penguin:",":turtle:",":bug:",":honeybee:",":ant:",":beetle:",":snail:",":octopus:",":tropical_fish:",":fish:",":whale:",":whale2:",":dolphin:",":cow2:",":ram:",":rat:",":water_buffalo:",":tiger2:",":rabbit2:",":dragon:",":goat:",":rooster:",":dog2:",":pig2:",":mouse2:",":ox:",":dragon_face:",":blowfish:",":crocodile:",":dromedary_camel:",":leopard:",":cat2:",":poodle:",":paw_prints:",":bouquet:",":cherry_blossom:",":tulip:",":four_leaf_clover:",":rose:",":sunflower:",":hibiscus:",":maple_leaf:",":leaves:",":fallen_leaf:",":herb:",":mushroom:",":cactus:",":palm_tree:",":evergreen_tree:",":deciduous_tree:",":chestnut:",":seedling:",":blossom:",":ear_of_rice:",":shell:",":globe_with_meridians:",":sun_with_face:",":full_moon_with_face:",":new_moon_with_face:",":new_moon:",":waxing_crescent_moon:",":first_quarter_moon:",":waxing_gibbous_moon:",":full_moon:",":waning_gibbous_moon:",":last_quarter_moon:",":waning_crescent_moon:",":last_quarter_moon_with_face:",":first_quarter_moon_with_face:",":moon:",":earth_africa:",":earth_americas:",":earth_asia:",":volcano:",":milky_way:",":partly_sunny:",":octocat:",":squirrel:",":bamboo:",":gift_heart:",":dolls:",":school_satchel:",":mortar_board:",":flags:",":fireworks:",":sparkler:",":wind_chime:",":rice_scene:",":jack_o_lantern:",":ghost:",":santa:",":christmas_tree:",":gift:",":bell:",":no_bell:",":tanabata_tree:",":tada:",":confetti_ball:",":balloon:",":crystal_ball:",":cd:",":dvd:",":floppy_disk:",":camera:",":video_camera:",":movie_camera:",":computer:",":tv:",":iphone:",":phone:",":telephone:",":telephone_receiver:",":pager:",":fax:",":minidisc:",":vhs:",":sound:",":speaker:",":mute:",":loudspeaker:",":mega:",":hourglass:",":hourglass_flowing_sand:",":alarm_clock:",":watch:",":radio:",":satellite:",":loop:",":mag:",":mag_right:",":unlock:",":lock:",":lock_with_ink_pen:",":closed_lock_with_key:",":key:",":bulb:",":flashlight:",":high_brightness:",":low_brightness:",":electric_plug:",":battery:",":calling:",":email:",":mailbox:",":postbox:",":bath:",":bathtub:",":shower:",":toilet:",":wrench:",":nut_and_bolt:",":hammer:",":seat:",":moneybag:",":yen:",":dollar:",":pound:",":euro:",":credit_card:",":money_with_wings:",":e-mail:",":inbox_tray:",":outbox_tray:",":envelope:",":incoming_envelope:",":postal_horn:",":mailbox_closed:",":mailbox_with_mail:",":mailbox_with_no_mail:",":door:",":smoking:",":bomb:",":gun:",":hocho:",":pill:",":syringe:",":page_facing_up:",":page_with_curl:",":bookmark_tabs:",":bar_chart:",":chart_with_upwards_trend:",":chart_with_downwards_trend:",":scroll:",":clipboard:",":calendar:",":date:",":card_index:",":file_folder:",":open_file_folder:",":scissors:",":pushpin:",":paperclip:",":black_nib:",":pencil2:",":straight_ruler:",":triangular_ruler:",":closed_book:",":green_book:",":blue_book:",":orange_book:",":notebook:",":notebook_with_decorative_cover:",":ledger:",":books:",":bookmark:",":name_badge:",":microscope:",":telescope:",":newspaper:",":football:",":basketball:",":soccer:",":baseball:",":tennis:",":8ball:",":rugby_football:",":bowling:",":golf:",":mountain_bicyclist:",":bicyclist:",":horse_racing:",":snowboarder:",":swimmer:",":surfer:",":ski:",":spades:",":hearts:",":clubs:",":diamonds:",":gem:",":ring:",":trophy:",":musical_score:",":musical_keyboard:",":violin:",":space_invader:",":video_game:",":black_joker:",":flower_playing_cards:",":game_die:",":dart:",":mahjong:",":clapper:",":memo:",":pencil:",":book:",":art:",":microphone:",":headphones:",":trumpet:",":saxophone:",":guitar:",":shoe:",":sandal:",":high_heel:",":lipstick:",":boot:",":shirt:",":tshirt:",":necktie:",":womans_clothes:",":dress:",":running_shirt_with_sash:",":jeans:",":kimono:",":bikini:",":ribbon:",":tophat:",":crown:",":womans_hat:",":mans_shoe:",":closed_umbrella:",":briefcase:",":handbag:",":pouch:",":purse:",":eyeglasses:",":fishing_pole_and_fish:",":coffee:",":tea:",":sake:",":baby_bottle:",":beer:",":beers:",":cocktail:",":tropical_drink:",":wine_glass:",":fork_and_knife:",":pizza:",":hamburger:",":fries:",":poultry_leg:",":meat_on_bone:",":spaghetti:",":curry:",":fried_shrimp:",":bento:",":sushi:",":fish_cake:",":rice_ball:",":rice_cracker:",":rice:",":ramen:",":stew:",":oden:",":dango:",":egg:",":bread:",":doughnut:",":custard:",":icecream:",":ice_cream:",":shaved_ice:",":birthday:",":cake:",":cookie:",":chocolate_bar:",":candy:",":lollipop:",":honey_pot:",":apple:",":green_apple:",":tangerine:",":lemon:",":cherries:",":grapes:",":watermelon:",":strawberry:",":peach:",":melon:",":banana:",":pear:",":pineapple:",":sweet_potato:",":eggplant:",":tomato:",":corn:",":alien:",":angel:",":anger:",":angry:",":anguished:",":astonished:",":baby:",":blue_heart:",":blush:",":boom:",":bow:",":bowtie:",":boy:",":bride_with_veil:",":broken_heart:",":bust_in_silhouette:",":busts_in_silhouette:",":clap:",":cold_sweat:",":collision:",":confounded:",":confused:",":construction_worker:",":cop:",":couple_with_heart:",":couple:",":couplekiss:",":cry:",":crying_cat_face:",":cupid:",":dancer:",":dancers:",":dash:",":disappointed:",":dizzy_face:",":dizzy:",":droplet:",":ear:",":exclamation:",":expressionless:",":eyes:",":facepunch:",":family:",":fearful:",":feelsgood:",":feet:",":finnadie:",":fire:",":fist:",":flushed:",":frowning:",":girl:",":goberserk:",":godmode:",":green_heart:",":grey_exclamation:",":grey_question:",":grimacing:",":grin:",":grinning:",":guardsman:",":haircut:",":hand:",":hankey:",":hear_no_evil:",":heart_eyes_cat:",":heart_eyes:",":heart:",":heartbeat:",":heartpulse:",":hurtrealbad:",":hushed:",":imp:",":information_desk_person:",":innocent:",":japanese_goblin:",":japanese_ogre:",":joy_cat:",":joy:",":kiss:",":kissing_cat:",":kissing_closed_eyes:",":kissing_heart:",":kissing_smiling_eyes:",":kissing:",":laughing:",":lips:",":love_letter:",":man_with_gua_pi_mao:",":man_with_turban:",":man:",":mask:",":massage:",":metal:",":muscle:",":musical_note:",":nail_care:",":neckbeard:",":neutral_face:",":no_good:",":no_mouth:",":nose:",":notes:",":ok_hand:",":ok_woman:",":older_man:",":older_woman:",":open_hands:",":open_mouth:",":pensive:",":persevere:",":person_frowning:",":person_with_blond_hair:",":person_with_pouting_face:",":point_down:",":point_left:",":point_right:",":point_up_2:",":point_up:",":poop:",":pouting_cat:",":pray:",":princess:",":punch:",":purple_heart:",":question:",":rage:",":rage1:",":rage2:",":rage3:",":rage4:",":raised_hand:",":raised_hands:",":relaxed:",":relieved:",":revolving_hearts:",":runner:",":running:",":satisfied:",":scream_cat:",":scream:",":see_no_evil:",":shit:",":skull:",":sleeping:",":sleepy:",":smile_cat:",":smile:",":smiley_cat:",":smiley:",":smiling_imp:",":smirk_cat:",":smirk:",":sob:",":sparkling_heart:",":sparkles:",":speak_no_evil:",":speech_balloon:",":star:",":star2:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":stuck_out_tongue:",":sunglasses:",":suspect:",":sweat_drops:",":sweat_smile:",":sweat:",":thought_balloon:",":-1:",":thumbsdown:",":thumbsup:",":+1:",":tired_face:",":tongue:",":triumph:",":trollface:",":two_hearts:",":two_men_holding_hands:",":two_women_holding_hands:",":unamused:",":v:",":walking:",":wave:",":weary:",":wink2:",":wink:",":woman:",":worried:",":yellow_heart:",":yum:",":zzz:",":109:",":house:",":house_with_garden:",":school:",":office:",":post_office:",":hospital:",":bank:",":convenience_store:",":love_hotel:",":hotel:",":wedding:",":church:",":department_store:",":european_post_office:",":city_sunrise:",":city_sunset:",":japanese_castle:",":european_castle:",":tent:",":factory:",":tokyo_tower:",":japan:",":mount_fuji:",":sunrise_over_mountains:",":sunrise:",":stars:",":statue_of_liberty:",":bridge_at_night:",":carousel_horse:",":rainbow:",":ferris_wheel:",":fountain:",":roller_coaster:",":ship:",":speedboat:",":boat:",":sailboat:",":rowboat:",":anchor:",":rocket:",":airplane:",":helicopter:",":steam_locomotive:",":tram:",":mountain_railway:",":bike:",":aerial_tramway:",":suspension_railway:",":mountain_cableway:",":tractor:",":blue_car:",":oncoming_automobile:",":car:",":red_car:",":taxi:",":oncoming_taxi:",":articulated_lorry:",":bus:",":oncoming_bus:",":rotating_light:",":police_car:",":oncoming_police_car:",":fire_engine:",":ambulance:",":minibus:",":truck:",":train:",":station:",":train2:",":bullettrain_front:",":bullettrain_side:",":light_rail:",":monorail:",":railway_car:",":trolleybus:",":ticket:",":fuelpump:",":vertical_traffic_light:",":traffic_light:",":warning:",":construction:",":beginner:",":atm:",":slot_machine:",":busstop:",":barber:",":hotsprings:",":checkered_flag:",":crossed_flags:",":izakaya_lantern:",":moyai:",":circus_tent:",":performing_arts:",":round_pushpin:",":triangular_flag_on_post:",":jp:",":kr:",":cn:",":us:",":fr:",":es:",":it:",":ru:",":gb:",":uk:",":de:",":100:",":1234:",":one:",":two:",":three:",":four:",":five:",":six:",":seven:",":eight:",":nine:",":keycap_ten:",":zero:",":hash:",":symbols:",":arrow_backward:",":arrow_down:",":arrow_forward:",":arrow_left:",":capital_abcd:",":abcd:",":abc:",":arrow_lower_left:",":arrow_lower_right:",":arrow_right:",":arrow_up:",":arrow_upper_left:",":arrow_upper_right:",":arrow_double_down:",":arrow_double_up:",":arrow_down_small:",":arrow_heading_down:",":arrow_heading_up:",":leftwards_arrow_with_hook:",":arrow_right_hook:",":left_right_arrow:",":arrow_up_down:",":arrow_up_small:",":arrows_clockwise:",":arrows_counterclockwise:",":rewind:",":fast_forward:",":information_source:",":ok:",":twisted_rightwards_arrows:",":repeat:",":repeat_one:",":new:",":top:",":up:",":cool:",":free:",":ng:",":cinema:",":koko:",":signal_strength:",":u5272:",":u5408:",":u55b6:",":u6307:",":u6708:",":u6709:",":u6e80:",":u7121:",":u7533:",":u7a7a:",":u7981:",":sa:",":restroom:",":mens:",":womens:",":baby_symbol:",":no_smoking:",":parking:",":wheelchair:",":metro:",":baggage_claim:",":accept:",":wc:",":potable_water:",":put_litter_in_its_place:",":secret:",":congratulations:",":m:",":passport_control:",":left_luggage:",":customs:",":ideograph_advantage:",":cl:",":sos:",":id:",":no_entry_sign:",":underage:",":no_mobile_phones:",":do_not_litter:",":non-potable_water:",":no_bicycles:",":no_pedestrians:",":children_crossing:",":no_entry:",":eight_spoked_asterisk:",":eight_pointed_black_star:",":heart_decoration:",":vs:",":vibration_mode:",":mobile_phone_off:",":chart:",":currency_exchange:",":aries:",":taurus:",":gemini:",":cancer:",":leo:",":virgo:",":libra:",":scorpius:",":sagittarius:",":capricorn:",":aquarius:",":pisces:",":ophiuchus:",":six_pointed_star:",":negative_squared_cross_mark:",":a:",":b:",":ab:",":o2:",":diamond_shape_with_a_dot_inside:",":recycle:",":end:",":on:",":soon:",":clock1:",":clock130:",":clock10:",":clock1030:",":clock11:",":clock1130:",":clock12:",":clock1230:",":clock2:",":clock230:",":clock3:",":clock330:",":clock4:",":clock430:",":clock5:",":clock530:",":clock6:",":clock630:",":clock7:",":clock730:",":clock8:",":clock830:",":clock9:",":clock930:",":heavy_dollar_sign:",":copyright:",":registered:",":tm:",":x:",":heavy_exclamation_mark:",":bangbang:",":interrobang:",":o:",":heavy_multiplication_x:",":heavy_plus_sign:",":heavy_minus_sign:",":heavy_division_sign:",":white_flower:",":heavy_check_mark:",":ballot_box_with_check:",":radio_button:",":link:",":curly_loop:",":wavy_dash:",":part_alternation_mark:",":trident:",":black_square:",":white_square:",":white_check_mark:",":black_square_button:",":white_square_button:",":black_circle:",":white_circle:",":red_circle:",":large_blue_circle:",":large_blue_diamond:",":large_orange_diamond:",":small_blue_diamond:",":small_orange_diamond:",":small_red_triangle:",":small_red_triangle_down:",":shipit:"],
        test = /\:[a-z0-9_\-\+]+\:/g;

    function emoji(someString, url, size) {
        return someString.replace(test, function (match) {
            if (emojis.indexOf(match) !== -1) {
                var name = String(match).slice(1, -1);
                return '<img class="emoji" title=":' + name + ':" alt="' + name + '" src="' + url + '/' + encodeURIComponent(name) + '.png"' + (size ? (' height="' + size + '"') : '') + ' />';
            } else {
                return match;
            }
        });
    };

    emoji.list = emojis;

    return emoji;
}));

},{}],18:[function(require,module,exports){
// Copyright 2009-2012 by contributors, MIT License
// vim: ts=4 sts=4 sw=4 expandtab

//Add semicolon to prevent IIFE from being passed as argument to concated code.
;
// Module systems magic dance
(function (definition) {
    // RequireJS
    if (typeof define == "function") {
        define(definition);
    // YUI3
    } else if (typeof YUI == "function") {
        YUI.add("es5", definition);
    // CommonJS and <script>
    } else {
        definition();
    }
})(function () {

/**
 * Brings an environment as close to ECMAScript 5 compliance
 * as is possible with the facilities of erstwhile engines.
 *
 * Annotated ES5: http://es5.github.com/ (specific links below)
 * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf
 * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/
 */

// ES-5 15.1.2.2
if (parseInt('08') !== 8) {
    parseInt = (function (origParseInt) {
        var hexRegex = /^0[xX]/;
        return function parseIntES5(str, radix) {
            str = String(str).trim();
            if (!+radix) {
                radix = hexRegex.test(str) ? 16 : 10;
            }
            return origParseInt(str, radix);
        };
    }(parseInt));
}

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

function Empty() {}

if (!Function.prototype.bind) {
    Function.prototype.bind = function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (typeof target != "function") {
            throw new TypeError("Function.prototype.bind called on incompatible " + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = _Array_slice_.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(_Array_slice_.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(_Array_slice_.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push("$" + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only 
        // way to set the length property of a function. 
        // In environments where Content Security Policies enabled (Chrome extensions, 
        // for ex.) all use of eval or Function costructor throws an exception. 
        // However in all of these environments Function.prototype.bind exists 
        // and so this code will never be executed.
        var bound = Function("binder", "return function(" + boundArgs.join(",") + "){return binder.apply(this,arguments)}")(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    };
}

// Shortcut to an often accessed properties, in order to avoid multiple
// dereference that costs universally.
// _Please note: Shortcuts are defined after `Function.prototype.bind` as we
// us it in defining shortcuts.
var call = Function.prototype.call;
var prototypeOfArray = Array.prototype;
var prototypeOfObject = Object.prototype;
var _Array_slice_ = prototypeOfArray.slice;
// Having a toString local variable name breaks in Opera so use _toString.
var _toString = call.bind(prototypeOfObject.toString);
var owns = call.bind(prototypeOfObject.hasOwnProperty);

// If JS engine supports accessors creating shortcuts.
var defineGetter;
var defineSetter;
var lookupGetter;
var lookupSetter;
var supportsAccessors;
if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__"))) {
    defineGetter = call.bind(prototypeOfObject.__defineGetter__);
    defineSetter = call.bind(prototypeOfObject.__defineSetter__);
    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);
    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);
}

//
// Array
// =====
//

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.12
// Default value for second param
// [bugfix, ielt9, old browsers]
// IE < 9 bug: [1,2].splice(0).join("") == "" but should be "12"
if ([1,2].splice(0).length != 2) {
    var array_splice = Array.prototype.splice;
    var array_push = Array.prototype.push;
    var array_unshift = Array.prototype.unshift;

    if (function() { // test IE < 9 to splice bug - see issue #138
        function makeArray(l) {
            var a = [];
            while (l--) {
                a.unshift(l)
            }
            return a
        }

        var array = []
            , lengthBefore
        ;

        array.splice.bind(array, 0, 0).apply(null, makeArray(20));
        array.splice.bind(array, 0, 0).apply(null, makeArray(26));

        lengthBefore = array.length; //20
        array.splice(5, 0, "XXX"); // add one element

        if (lengthBefore + 1 == array.length) {
            return true;// has right splice implementation without bugs
        }
        // else {
        //    IE8 bug
        // }
    }()) {//IE 6/7
        Array.prototype.splice = function(start, deleteCount) {
            if (!arguments.length) {
                return [];
            } else {
                return array_splice.apply(this, [
                    start === void 0 ? 0 : start,
                    deleteCount === void 0 ? (this.length - start) : deleteCount
                ].concat(_Array_slice_.call(arguments, 2)))
            }
        };
    }
    else {//IE8
        Array.prototype.splice = function(start, deleteCount) {
            var result
                , args = _Array_slice_.call(arguments, 2)
                , addElementsCount = args.length
            ;

            if (!arguments.length) {
                return [];
            }

            if (start === void 0) { // default
                start = 0;
            }
            if (deleteCount === void 0) { // default
                deleteCount = this.length - start;
            }

            if (addElementsCount > 0) {
                if (deleteCount <= 0) {
                    if (start == this.length) { // tiny optimisation #1
                        array_push.apply(this, args);
                        return [];
                    }

                    if (start == 0) { // tiny optimisation #2
                        array_unshift.apply(this, args);
                        return [];
                    }
                }

                // Array.prototype.splice implementation
                result = _Array_slice_.call(this, start, start + deleteCount);// delete part
                args.push.apply(args, _Array_slice_.call(this, start + deleteCount, this.length));// right part
                args.unshift.apply(args, _Array_slice_.call(this, 0, start));// left part

                // delete all items from this array and replace it to 'left part' + _Array_slice_.call(arguments, 2) + 'right part'
                args.unshift(0, this.length);

                array_splice.apply(this, args);

                return result;
            }

            return array_splice.call(this, start, deleteCount);
        }

    }
}

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.13
// Return len+argCount.
// [bugfix, ielt8]
// IE < 8 bug: [].unshift(0) == undefined but should be "1"
if ([].unshift(0) != 1) {
    var array_unshift = Array.prototype.unshift;
    Array.prototype.unshift = function() {
        array_unshift.apply(this, arguments);
        return this.length;
    };
}

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
if (!Array.isArray) {
    Array.isArray = function isArray(obj) {
        return _toString(obj) == "[object Array]";
    };
}

// The IsCallable() check in the Array functions
// has been replaced with a strict check on the
// internal class of the object to trap cases where
// the provided function was actually a regular
// expression literal, which in V8 and
// JavaScriptCore is a typeof "function".  Only in
// V8 are regular expression literals permitted as
// reduce parameters, so it is desirable in the
// general case for the shim to match the more
// strict and common behavior of rejecting regular
// expressions.

// ES5 15.4.4.18
// http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach

// Check failure of by-index access of string characters (IE < 9)
// and failure of `0 in boxedString` (Rhino)
var boxedString = Object("a"),
    splitString = boxedString[0] != "a" || !(0 in boxedString);
// Check node 0.6.21 bug where third parameter is not boxed
var boxedForEach = true;
if (Array.prototype.forEach) {
    Array.prototype.forEach.call("foo", function(item, i, obj) {
        if (typeof obj !== 'object') boxedForEach = false;
    });
}

if (!Array.prototype.forEach || !boxedForEach) {
    Array.prototype.forEach = function forEach(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    };
}

// ES5 15.4.4.19
// http://es5.github.com/#x15.4.4.19
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map
if (!Array.prototype.map) {
    Array.prototype.map = function map(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            result = Array(length),
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self)
                result[i] = fun.call(thisp, self[i], i, object);
        }
        return result;
    };
}

// ES5 15.4.4.20
// http://es5.github.com/#x15.4.4.20
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter
if (!Array.prototype.filter) {
    Array.prototype.filter = function filter(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                    object,
            length = self.length >>> 0,
            result = [],
            value,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self) {
                value = self[i];
                if (fun.call(thisp, value, i, object)) {
                    result.push(value);
                }
            }
        }
        return result;
    };
}

// ES5 15.4.4.16
// http://es5.github.com/#x15.4.4.16
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every
if (!Array.prototype.every) {
    Array.prototype.every = function every(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self && !fun.call(thisp, self[i], i, object)) {
                return false;
            }
        }
        return true;
    };
}

// ES5 15.4.4.17
// http://es5.github.com/#x15.4.4.17
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some
if (!Array.prototype.some) {
    Array.prototype.some = function some(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self && fun.call(thisp, self[i], i, object)) {
                return true;
            }
        }
        return false;
    };
}

// ES5 15.4.4.21
// http://es5.github.com/#x15.4.4.21
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce
if (!Array.prototype.reduce) {
    Array.prototype.reduce = function reduce(fun /*, initial*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        // no value to return if no initial value and an empty array
        if (!length && arguments.length == 1) {
            throw new TypeError("reduce of empty array with no initial value");
        }

        var i = 0;
        var result;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i++];
                    break;
                }

                // if array contains no values, no initial value to return
                if (++i >= length) {
                    throw new TypeError("reduce of empty array with no initial value");
                }
            } while (true);
        }

        for (; i < length; i++) {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        }

        return result;
    };
}

// ES5 15.4.4.22
// http://es5.github.com/#x15.4.4.22
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight
if (!Array.prototype.reduceRight) {
    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        // no value to return if no initial value, empty array
        if (!length && arguments.length == 1) {
            throw new TypeError("reduceRight of empty array with no initial value");
        }

        var result, i = length - 1;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i--];
                    break;
                }

                // if array contains no values, no initial value to return
                if (--i < 0) {
                    throw new TypeError("reduceRight of empty array with no initial value");
                }
            } while (true);
        }

        if (i < 0) {
            return result;
        }

        do {
            if (i in this) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        } while (i--);

        return result;
    };
}

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
if (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {
    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {
        var self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    };
}

// ES5 15.4.4.15
// http://es5.github.com/#x15.4.4.15
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf
if (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {
    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {
        var self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }
        var i = length - 1;
        if (arguments.length > 1) {
            i = Math.min(i, toInteger(arguments[1]));
        }
        // handle negative indices
        i = i >= 0 ? i : length - Math.abs(i);
        for (; i >= 0; i--) {
            if (i in self && sought === self[i]) {
                return i;
            }
        }
        return -1;
    };
}

//
// Object
// ======
//

// ES5 15.2.3.14
// http://es5.github.com/#x15.2.3.14
if (!Object.keys) {
    // http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation
    var hasDontEnumBug = true,
        dontEnums = [
            "toString",
            "toLocaleString",
            "valueOf",
            "hasOwnProperty",
            "isPrototypeOf",
            "propertyIsEnumerable",
            "constructor"
        ],
        dontEnumsLength = dontEnums.length;

    for (var key in {"toString": null}) {
        hasDontEnumBug = false;
    }

    Object.keys = function keys(object) {

        if (
            (typeof object != "object" && typeof object != "function") ||
            object === null
        ) {
            throw new TypeError("Object.keys called on a non-object");
        }

        var keys = [];
        for (var name in object) {
            if (owns(object, name)) {
                keys.push(name);
            }
        }

        if (hasDontEnumBug) {
            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {
                var dontEnum = dontEnums[i];
                if (owns(object, dontEnum)) {
                    keys.push(dontEnum);
                }
            }
        }
        return keys;
    };

}

//
// Date
// ====
//

// ES5 15.9.5.43
// http://es5.github.com/#x15.9.5.43
// This function returns a String value represent the instance in time
// represented by this Date object. The format of the String is the Date Time
// string format defined in 15.9.1.15. All fields are present in the String.
// The time zone is always UTC, denoted by the suffix Z. If the time value of
// this object is not a finite Number a RangeError exception is thrown.
var negativeDate = -62198755200000,
    negativeYearString = "-000001";
if (
    !Date.prototype.toISOString ||
    (new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1)
) {
    Date.prototype.toISOString = function toISOString() {
        var result, length, value, year, month;
        if (!isFinite(this)) {
            throw new RangeError("Date.prototype.toISOString called on non-finite value.");
        }

        year = this.getUTCFullYear();

        month = this.getUTCMonth();
        // see https://github.com/es-shims/es5-shim/issues/111
        year += Math.floor(month / 12);
        month = (month % 12 + 12) % 12;

        // the date time string format is specified in 15.9.1.15.
        result = [month + 1, this.getUTCDate(),
            this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];
        year = (
            (year < 0 ? "-" : (year > 9999 ? "+" : "")) +
            ("00000" + Math.abs(year))
            .slice(0 <= year && year <= 9999 ? -4 : -6)
        );

        length = result.length;
        while (length--) {
            value = result[length];
            // pad months, days, hours, minutes, and seconds to have two
            // digits.
            if (value < 10) {
                result[length] = "0" + value;
            }
        }
        // pad milliseconds to have three digits.
        return (
            year + "-" + result.slice(0, 2).join("-") +
            "T" + result.slice(2).join(":") + "." +
            ("000" + this.getUTCMilliseconds()).slice(-3) + "Z"
        );
    };
}


// ES5 15.9.5.44
// http://es5.github.com/#x15.9.5.44
// This function provides a String representation of a Date object for use by
// JSON.stringify (15.12.3).
var dateToJSONIsSupported = false;
try {
    dateToJSONIsSupported = (
        Date.prototype.toJSON &&
        new Date(NaN).toJSON() === null &&
        new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&
        Date.prototype.toJSON.call({ // generic
            toISOString: function () {
                return true;
            }
        })
    );
} catch (e) {
}
if (!dateToJSONIsSupported) {
    Date.prototype.toJSON = function toJSON(key) {
        // When the toJSON method is called with argument key, the following
        // steps are taken:

        // 1.  Let O be the result of calling ToObject, giving it the this
        // value as its argument.
        // 2. Let tv be toPrimitive(O, hint Number).
        var o = Object(this),
            tv = toPrimitive(o),
            toISO;
        // 3. If tv is a Number and is not finite, return null.
        if (typeof tv === "number" && !isFinite(tv)) {
            return null;
        }
        // 4. Let toISO be the result of calling the [[Get]] internal method of
        // O with argument "toISOString".
        toISO = o.toISOString;
        // 5. If IsCallable(toISO) is false, throw a TypeError exception.
        if (typeof toISO != "function") {
            throw new TypeError("toISOString property is not callable");
        }
        // 6. Return the result of calling the [[Call]] internal method of
        //  toISO with O as the this value and an empty argument list.
        return toISO.call(o);

        // NOTE 1 The argument is ignored.

        // NOTE 2 The toJSON function is intentionally generic; it does not
        // require that its this value be a Date object. Therefore, it can be
        // transferred to other kinds of objects for use as a method. However,
        // it does require that any such object have a toISOString method. An
        // object is free to use the argument key to filter its
        // stringification.
    };
}

// ES5 15.9.4.2
// http://es5.github.com/#x15.9.4.2
// based on work shared by Daniel Friesen (dantman)
// http://gist.github.com/303249
if (!Date.parse || "Date.parse is buggy") {
    // XXX global assignment won't work in embeddings that use
    // an alternate object for the context.
    Date = (function(NativeDate) {

        // Date.length === 7
        function Date(Y, M, D, h, m, s, ms) {
            var length = arguments.length;
            if (this instanceof NativeDate) {
                var date = length == 1 && String(Y) === Y ? // isString(Y)
                    // We explicitly pass it through parse:
                    new NativeDate(Date.parse(Y)) :
                    // We have to manually make calls depending on argument
                    // length here
                    length >= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :
                    length >= 6 ? new NativeDate(Y, M, D, h, m, s) :
                    length >= 5 ? new NativeDate(Y, M, D, h, m) :
                    length >= 4 ? new NativeDate(Y, M, D, h) :
                    length >= 3 ? new NativeDate(Y, M, D) :
                    length >= 2 ? new NativeDate(Y, M) :
                    length >= 1 ? new NativeDate(Y) :
                                  new NativeDate();
                // Prevent mixups with unfixed Date object
                date.constructor = Date;
                return date;
            }
            return NativeDate.apply(this, arguments);
        };

        // 15.9.1.15 Date Time String Format.
        var isoDateExpression = new RegExp("^" +
            "(\\d{4}|[\+\-]\\d{6})" + // four-digit year capture or sign +
                                      // 6-digit extended year
            "(?:-(\\d{2})" + // optional month capture
            "(?:-(\\d{2})" + // optional day capture
            "(?:" + // capture hours:minutes:seconds.milliseconds
                "T(\\d{2})" + // hours capture
                ":(\\d{2})" + // minutes capture
                "(?:" + // optional :seconds.milliseconds
                    ":(\\d{2})" + // seconds capture
                    "(?:(\\.\\d{1,}))?" + // milliseconds capture
                ")?" +
            "(" + // capture UTC offset component
                "Z|" + // UTC capture
                "(?:" + // offset specifier +/-hours:minutes
                    "([-+])" + // sign capture
                    "(\\d{2})" + // hours offset capture
                    ":(\\d{2})" + // minutes offset capture
                ")" +
            ")?)?)?)?" +
        "$");

        var months = [
            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365
        ];

        function dayFromMonth(year, month) {
            var t = month > 1 ? 1 : 0;
            return (
                months[month] +
                Math.floor((year - 1969 + t) / 4) -
                Math.floor((year - 1901 + t) / 100) +
                Math.floor((year - 1601 + t) / 400) +
                365 * (year - 1970)
            );
        }

        function toUTC(t) {
            return Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));
        }

        // Copy any custom methods a 3rd party library may have added
        for (var key in NativeDate) {
            Date[key] = NativeDate[key];
        }

        // Copy "native" methods explicitly; they may be non-enumerable
        Date.now = NativeDate.now;
        Date.UTC = NativeDate.UTC;
        Date.prototype = NativeDate.prototype;
        Date.prototype.constructor = Date;

        // Upgrade Date.parse to handle simplified ISO 8601 strings
        Date.parse = function parse(string) {
            var match = isoDateExpression.exec(string);
            if (match) {
                // parse months, days, hours, minutes, seconds, and milliseconds
                // provide default values if necessary
                // parse the UTC offset component
                var year = Number(match[1]),
                    month = Number(match[2] || 1) - 1,
                    day = Number(match[3] || 1) - 1,
                    hour = Number(match[4] || 0),
                    minute = Number(match[5] || 0),
                    second = Number(match[6] || 0),
                    millisecond = Math.floor(Number(match[7] || 0) * 1000),
                    // When time zone is missed, local offset should be used
                    // (ES 5.1 bug)
                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112
                    isLocalTime = Boolean(match[4] && !match[8]),
                    signOffset = match[9] === "-" ? 1 : -1,
                    hourOffset = Number(match[10] || 0),
                    minuteOffset = Number(match[11] || 0),
                    result;
                if (
                    hour < (
                        minute > 0 || second > 0 || millisecond > 0 ?
                        24 : 25
                    ) &&
                    minute < 60 && second < 60 && millisecond < 1000 &&
                    month > -1 && month < 12 && hourOffset < 24 &&
                    minuteOffset < 60 && // detect invalid offsets
                    day > -1 &&
                    day < (
                        dayFromMonth(year, month + 1) -
                        dayFromMonth(year, month)
                    )
                ) {
                    result = (
                        (dayFromMonth(year, month) + day) * 24 +
                        hour +
                        hourOffset * signOffset
                    ) * 60;
                    result = (
                        (result + minute + minuteOffset * signOffset) * 60 +
                        second
                    ) * 1000 + millisecond;
                    if (isLocalTime) {
                        result = toUTC(result);
                    }
                    if (-8.64e15 <= result && result <= 8.64e15) {
                        return result;
                    }
                }
                return NaN;
            }
            return NativeDate.parse.apply(this, arguments);
        };

        return Date;
    })(Date);
}

// ES5 15.9.4.4
// http://es5.github.com/#x15.9.4.4
if (!Date.now) {
    Date.now = function now() {
        return new Date().getTime();
    };
}


//
// Number
// ======
//

// ES5.1 15.7.4.5
// http://es5.github.com/#x15.7.4.5
if (!Number.prototype.toFixed || (0.00008).toFixed(3) !== '0.000' || (0.9).toFixed(0) === '0' || (1.255).toFixed(2) !== '1.25' || (1000000000000000128).toFixed(0) !== "1000000000000000128") {
    // Hide these variables and functions
    (function () {
        var base, size, data, i;

        base = 1e7;
        size = 6;
        data = [0, 0, 0, 0, 0, 0];

        function multiply(n, c) {
            var i = -1;
            while (++i < size) {
                c += n * data[i];
                data[i] = c % base;
                c = Math.floor(c / base);
            }
        }

        function divide(n) {
            var i = size, c = 0;
            while (--i >= 0) {
                c += data[i];
                data[i] = Math.floor(c / n);
                c = (c % n) * base;
            }
        }

        function toString() {
            var i = size;
            var s = '';
            while (--i >= 0) {
                if (s !== '' || i === 0 || data[i] !== 0) {
                    var t = String(data[i]);
                    if (s === '') {
                        s = t;
                    } else {
                        s += '0000000'.slice(0, 7 - t.length) + t;
                    }
                }
            }
            return s;
        }

        function pow(x, n, acc) {
            return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));
        }

        function log(x) {
            var n = 0;
            while (x >= 4096) {
                n += 12;
                x /= 4096;
            }
            while (x >= 2) {
                n += 1;
                x /= 2;
            }
            return n;
        }

        Number.prototype.toFixed = function (fractionDigits) {
            var f, x, s, m, e, z, j, k;

            // Test for NaN and round fractionDigits down
            f = Number(fractionDigits);
            f = f !== f ? 0 : Math.floor(f);

            if (f < 0 || f > 20) {
                throw new RangeError("Number.toFixed called with invalid number of decimals");
            }

            x = Number(this);

            // Test for NaN
            if (x !== x) {
                return "NaN";
            }

            // If it is too big or small, return the string value of the number
            if (x <= -1e21 || x >= 1e21) {
                return String(x);
            }

            s = "";

            if (x < 0) {
                s = "-";
                x = -x;
            }

            m = "0";

            if (x > 1e-21) {
                // 1e-21 < x < 1e21
                // -70 < log2(x) < 70
                e = log(x * pow(2, 69, 1)) - 69;
                z = (e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1));
                z *= 0x10000000000000; // Math.pow(2, 52);
                e = 52 - e;

                // -18 < e < 122
                // x = z / 2 ^ e
                if (e > 0) {
                    multiply(0, z);
                    j = f;

                    while (j >= 7) {
                        multiply(1e7, 0);
                        j -= 7;
                    }

                    multiply(pow(10, j, 1), 0);
                    j = e - 1;

                    while (j >= 23) {
                        divide(1 << 23);
                        j -= 23;
                    }

                    divide(1 << j);
                    multiply(1, 1);
                    divide(2);
                    m = toString();
                } else {
                    multiply(0, z);
                    multiply(1 << (-e), 0);
                    m = toString() + '0.00000000000000000000'.slice(2, 2 + f);
                }
            }

            if (f > 0) {
                k = m.length;

                if (k <= f) {
                    m = s + '0.0000000000000000000'.slice(0, f - k + 2) + m;
                } else {
                    m = s + m.slice(0, k - f) + '.' + m.slice(k - f);
                }
            } else {
                m = s + m;
            }

            return m;
        }
    }());
}


//
// String
// ======
//


// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = String.prototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === "t" ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = /()??/.exec("")[1] === void 0; // NPCG: nonparticipating capturing group

        String.prototype.split = function (separator, limit) {
            var string = this;
            if (separator === void 0 && limit === 0)
                return [];

            // If `separator` is not a regex, use native split
            if (Object.prototype.toString.call(separator) !== "[object RegExp]") {
                return string_split.apply(this, arguments);
            }

            var output = [],
                flags = (separator.ignoreCase ? "i" : "") +
                        (separator.multiline  ? "m" : "") +
                        (separator.extended   ? "x" : "") + // Proposed for ES6
                        (separator.sticky     ? "y" : ""), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator = new RegExp(separator.source, flags + "g"),
                separator2, match, lastIndex, lastLength;
            string += ""; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp("^" + separator.source + "$(?!\\s)", flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = limit === void 0 ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                limit >>> 0; // ToUint32(limit)
            while (match = separator.exec(string)) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (arguments[i] === void 0) {
                                    match[i] = void 0;
                                }
                            }
                        });
                    }
                    if (match.length > 1 && match.index < string.length) {
                        Array.prototype.push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test("")) {
                    output.push("");
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ("0".split(void 0, 0).length) {
    String.prototype.split = function(separator, limit) {
        if (separator === void 0 && limit === 0) return [];
        return string_split.apply(this, arguments);
    }
}


// ECMA-262, 3rd B.2.3
// Note an ECMAScript standart, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
if ("".substr && "0b".substr(-1) !== "b") {
    var string_substr = String.prototype.substr;
    /**
     *  Get the substring of a string
     *  @param  {integer}  start   where to start the substring
     *  @param  {integer}  length  how many characters to return
     *  @return {string}
     */
    String.prototype.substr = function(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}

// ES5 15.5.4.20
// http://es5.github.com/#x15.5.4.20
var ws = "\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003" +
    "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028" +
    "\u2029\uFEFF";
if (!String.prototype.trim || ws.trim()) {
    // http://blog.stevenlevithan.com/archives/faster-trim-javascript
    // http://perfectionkills.com/whitespace-deviations/
    ws = "[" + ws + "]";
    var trimBeginRegexp = new RegExp("^" + ws + ws + "*"),
        trimEndRegexp = new RegExp(ws + ws + "*$");
    String.prototype.trim = function trim() {
        if (this === void 0 || this === null) {
            throw new TypeError("can't convert "+this+" to object");
        }
        return String(this)
            .replace(trimBeginRegexp, "")
            .replace(trimEndRegexp, "");
    };
}

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(n) {
    n = +n;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function isPrimitive(input) {
    var type = typeof input;
    return (
        input === null ||
        type === "undefined" ||
        type === "boolean" ||
        type === "number" ||
        type === "string"
    );
}

function toPrimitive(input) {
    var val, valueOf, toString;
    if (isPrimitive(input)) {
        return input;
    }
    valueOf = input.valueOf;
    if (typeof valueOf === "function") {
        val = valueOf.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    toString = input.toString;
    if (typeof toString === "function") {
        val = toString.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    throw new TypeError();
}

// ES5 9.9
// http://es5.github.com/#x9.9
var toObject = function (o) {
    if (o == null) { // this matches both null and undefined
        throw new TypeError("can't convert "+o+" to object");
    }
    return Object(o);
};

});


},{}],19:[function(require,module,exports){
(function (process){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var buildLocationData, extend, flatten, last, repeat, syntaxErrorToString, _ref;

  exports.starts = function(string, literal, start) {
    return literal === string.substr(start, literal.length);
  };

  exports.ends = function(string, literal, back) {
    var len;
    len = literal.length;
    return literal === string.substr(string.length - len - (back || 0), len);
  };

  exports.repeat = repeat = function(str, n) {
    var res;
    res = '';
    while (n > 0) {
      if (n & 1) {
        res += str;
      }
      n >>>= 1;
      str += str;
    }
    return res;
  };

  exports.compact = function(array) {
    var item, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      item = array[_i];
      if (item) {
        _results.push(item);
      }
    }
    return _results;
  };

  exports.count = function(string, substr) {
    var num, pos;
    num = pos = 0;
    if (!substr.length) {
      return 1 / 0;
    }
    while (pos = 1 + string.indexOf(substr, pos)) {
      num++;
    }
    return num;
  };

  exports.merge = function(options, overrides) {
    return extend(extend({}, options), overrides);
  };

  extend = exports.extend = function(object, properties) {
    var key, val;
    for (key in properties) {
      val = properties[key];
      object[key] = val;
    }
    return object;
  };

  exports.flatten = flatten = function(array) {
    var element, flattened, _i, _len;
    flattened = [];
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      element = array[_i];
      if (element instanceof Array) {
        flattened = flattened.concat(flatten(element));
      } else {
        flattened.push(element);
      }
    }
    return flattened;
  };

  exports.del = function(obj, key) {
    var val;
    val = obj[key];
    delete obj[key];
    return val;
  };

  exports.last = last = function(array, back) {
    return array[array.length - (back || 0) - 1];
  };

  exports.some = (_ref = Array.prototype.some) != null ? _ref : function(fn) {
    var e, _i, _len;
    for (_i = 0, _len = this.length; _i < _len; _i++) {
      e = this[_i];
      if (fn(e)) {
        return true;
      }
    }
    return false;
  };

  exports.invertLiterate = function(code) {
    var line, lines, maybe_code;
    maybe_code = true;
    lines = (function() {
      var _i, _len, _ref1, _results;
      _ref1 = code.split('\n');
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        line = _ref1[_i];
        if (maybe_code && /^([ ]{4}|[ ]{0,3}\t)/.test(line)) {
          _results.push(line);
        } else if (maybe_code = /^\s*$/.test(line)) {
          _results.push(line);
        } else {
          _results.push('# ' + line);
        }
      }
      return _results;
    })();
    return lines.join('\n');
  };

  buildLocationData = function(first, last) {
    if (!last) {
      return first;
    } else {
      return {
        first_line: first.first_line,
        first_column: first.first_column,
        last_line: last.last_line,
        last_column: last.last_column
      };
    }
  };

  exports.addLocationDataFn = function(first, last) {
    return function(obj) {
      if (((typeof obj) === 'object') && (!!obj['updateLocationDataIfMissing'])) {
        obj.updateLocationDataIfMissing(buildLocationData(first, last));
      }
      return obj;
    };
  };

  exports.locationDataToString = function(obj) {
    var locationData;
    if (("2" in obj) && ("first_line" in obj[2])) {
      locationData = obj[2];
    } else if ("first_line" in obj) {
      locationData = obj;
    }
    if (locationData) {
      return ("" + (locationData.first_line + 1) + ":" + (locationData.first_column + 1) + "-") + ("" + (locationData.last_line + 1) + ":" + (locationData.last_column + 1));
    } else {
      return "No location data";
    }
  };

  exports.baseFileName = function(file, stripExt, useWinPathSep) {
    var parts, pathSep;
    if (stripExt == null) {
      stripExt = false;
    }
    if (useWinPathSep == null) {
      useWinPathSep = false;
    }
    pathSep = useWinPathSep ? /\\|\// : /\//;
    parts = file.split(pathSep);
    file = parts[parts.length - 1];
    if (!(stripExt && file.indexOf('.') >= 0)) {
      return file;
    }
    parts = file.split('.');
    parts.pop();
    if (parts[parts.length - 1] === 'coffee' && parts.length > 1) {
      parts.pop();
    }
    return parts.join('.');
  };

  exports.isCoffee = function(file) {
    return /\.((lit)?coffee|coffee\.md|iced|liticed|iced\.md)$/.test(file);
  };

  exports.isLiterate = function(file) {
    return /\.(litcoffee|coffee\.md|liticed|iced\.md)$/.test(file);
  };

  exports.throwSyntaxError = function(message, location) {
    var error;
    error = new SyntaxError(message);
    error.location = location;
    error.toString = syntaxErrorToString;
    error.stack = error.toString();
    throw error;
  };

  exports.updateSyntaxError = function(error, code, filename) {
    if (error.toString === syntaxErrorToString) {
      error.code || (error.code = code);
      error.filename || (error.filename = filename);
      error.stack = error.toString();
    }
    return error;
  };

  syntaxErrorToString = function() {
    var codeLine, colorize, colorsEnabled, end, filename, first_column, first_line, last_column, last_line, marker, start, _ref1, _ref2;
    if (!(this.code && this.location)) {
      return Error.prototype.toString.call(this);
    }
    _ref1 = this.location, first_line = _ref1.first_line, first_column = _ref1.first_column, last_line = _ref1.last_line, last_column = _ref1.last_column;
    if (last_line == null) {
      last_line = first_line;
    }
    if (last_column == null) {
      last_column = first_column;
    }
    filename = this.filename || '[stdin]';
    codeLine = this.code.split('\n')[first_line];
    start = first_column;
    end = first_line === last_line ? last_column + 1 : codeLine.length;
    marker = codeLine.slice(0, start).replace(/[^\s]/g, ' ') + repeat('^', end - start);
    if ((typeof process !== "undefined" && process !== null ? process.stdout : void 0) != null) {
      colorsEnabled = process.stdout.isTTY && !process.env.NODE_DISABLE_COLORS;
    }
    if ((_ref2 = this.colorful) != null ? _ref2 : colorsEnabled) {
      colorize = function(str) {
        return "\x1B[1;31m" + str + "\x1B[0m";
      };
      codeLine = codeLine.slice(0, start) + colorize(codeLine.slice(start, end)) + codeLine.slice(end);
      marker = colorize(marker);
    }
    return "" + filename + ":" + (first_line + 1) + ":" + (first_column + 1) + ": error: " + this.message + "\n" + codeLine + "\n" + marker;
  };

  exports.nameWhitespaceCharacter = function(string) {
    switch (string) {
      case ' ':
        return 'space';
      case '\n':
        return 'newline';
      case '\r':
        return 'carriage return';
      case '\t':
        return 'tab';
      default:
        return string;
    }
  };

}).call(this);

}).call(this,require('_process'))

},{"_process":36}],20:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  exports.transform = function(x, options) {
    return x.icedTransform(options);
  };

  exports.runtime = require('iced-runtime');

}).call(this);

},{"iced-runtime":30}],21:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var BOM, BOOL, CALLABLE, CODE, COFFEE_ALIASES, COFFEE_ALIAS_MAP, COFFEE_KEYWORDS, COMMENT, COMPARE, COMPOUND_ASSIGN, HEREDOC, HEREDOC_ILLEGAL, HEREDOC_INDENT, HEREGEX, HEREGEX_OMIT, IDENTIFIER, INDENTABLE_CLOSERS, INDEXABLE, INVERSES, JSTOKEN, JS_FORBIDDEN, JS_KEYWORDS, LINE_BREAK, LINE_CONTINUER, LOGIC, Lexer, MATH, MULTILINER, MULTI_DENT, NOT_REGEX, NOT_SPACED_REGEX, NUMBER, OPERATOR, REGEX, RELATION, RESERVED, Rewriter, SHIFT, SIMPLESTR, STRICT_PROSCRIBED, TRAILING_SPACES, UNARY, UNARY_MATH, WHITESPACE, compact, count, invertLiterate, key, last, locationDataToString, repeat, starts, throwSyntaxError, _ref, _ref1,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  _ref = require('./rewriter'), Rewriter = _ref.Rewriter, INVERSES = _ref.INVERSES;

  _ref1 = require('./helpers'), count = _ref1.count, starts = _ref1.starts, compact = _ref1.compact, last = _ref1.last, repeat = _ref1.repeat, invertLiterate = _ref1.invertLiterate, locationDataToString = _ref1.locationDataToString, throwSyntaxError = _ref1.throwSyntaxError;

  exports.Lexer = Lexer = (function() {
    function Lexer() {}

    Lexer.prototype.tokenize = function(code, opts) {
      var consumed, i, tag, _ref2;
      if (opts == null) {
        opts = {};
      }
      this.literate = opts.literate;
      this.indent = 0;
      this.baseIndent = 0;
      this.indebt = 0;
      this.outdebt = 0;
      this.indents = [];
      this.ends = [];
      this.tokens = [];
      this.chunkLine = opts.line || 0;
      this.chunkColumn = opts.column || 0;
      code = this.clean(code);
      i = 0;
      while (this.chunk = code.slice(i)) {
        consumed = this.identifierToken() || this.commentToken() || this.whitespaceToken() || this.lineToken() || this.heredocToken() || this.stringToken() || this.numberToken() || this.regexToken() || this.jsToken() || this.literalToken();
        _ref2 = this.getLineAndColumnFromChunk(consumed), this.chunkLine = _ref2[0], this.chunkColumn = _ref2[1];
        i += consumed;
      }
      this.closeIndentation();
      if (tag = this.ends.pop()) {
        this.error("missing " + tag);
      }
      if (opts.rewrite === false) {
        return this.tokens;
      }
      return (new Rewriter).rewrite(this.tokens);
    };

    Lexer.prototype.clean = function(code) {
      if (code.charCodeAt(0) === BOM) {
        code = code.slice(1);
      }
      code = code.replace(/\r/g, '').replace(TRAILING_SPACES, '');
      if (WHITESPACE.test(code)) {
        code = "\n" + code;
        this.chunkLine--;
      }
      if (this.literate) {
        code = invertLiterate(code);
      }
      return code;
    };

    Lexer.prototype.identifierToken = function() {
      var colon, colonOffset, forcedIdentifier, id, idLength, input, match, poppedToken, prev, tag, tagToken, _ref2, _ref3, _ref4;
      if (!(match = IDENTIFIER.exec(this.chunk))) {
        return 0;
      }
      input = match[0], id = match[1], colon = match[2];
      idLength = id.length;
      poppedToken = void 0;
      if (id === 'own' && this.tag() === 'FOR') {
        this.token('OWN', id);
        return id.length;
      }
      if (id === 'from' && this.tag() === 'YIELD') {
        this.token('FROM', id);
        return id.length;
      }
      forcedIdentifier = colon || (prev = last(this.tokens)) && (((_ref2 = prev[0]) === '.' || _ref2 === '?.' || _ref2 === '::' || _ref2 === '?::') || !prev.spaced && prev[0] === '@') && id !== 'defer';
      tag = 'IDENTIFIER';
      if (!forcedIdentifier && (__indexOf.call(JS_KEYWORDS, id) >= 0 || __indexOf.call(COFFEE_KEYWORDS, id) >= 0)) {
        tag = id.toUpperCase();
        if (tag === 'WHEN' && (_ref3 = this.tag(), __indexOf.call(LINE_BREAK, _ref3) >= 0)) {
          tag = 'LEADING_WHEN';
        } else if (tag === 'FOR') {
          this.seenFor = true;
        } else if (tag === 'UNLESS') {
          tag = 'IF';
        } else if (__indexOf.call(UNARY, tag) >= 0) {
          tag = 'UNARY';
        } else if (__indexOf.call(RELATION, tag) >= 0) {
          if (tag !== 'INSTANCEOF' && this.seenFor) {
            tag = 'FOR' + tag;
            this.seenFor = false;
          } else {
            tag = 'RELATION';
            if (this.value() === '!') {
              poppedToken = this.tokens.pop();
              id = '!' + id;
            }
          }
        }
      }
      if (__indexOf.call(JS_FORBIDDEN, id) >= 0) {
        if (forcedIdentifier) {
          tag = 'IDENTIFIER';
          id = new String(id);
          id.reserved = true;
        } else if (__indexOf.call(RESERVED, id) >= 0) {
          this.error("reserved word \"" + id + "\"");
        }
      }
      if (!forcedIdentifier) {
        if (__indexOf.call(COFFEE_ALIASES, id) >= 0) {
          id = COFFEE_ALIAS_MAP[id];
        }
        tag = (function() {
          switch (id) {
            case '!':
              return 'UNARY';
            case '==':
            case '!=':
              return 'COMPARE';
            case '&&':
            case '||':
              return 'LOGIC';
            case 'true':
            case 'false':
              return 'BOOL';
            case 'break':
            case 'continue':
              return 'STATEMENT';
            default:
              return tag;
          }
        })();
      }
      tagToken = this.token(tag, id, 0, idLength);
      if (poppedToken) {
        _ref4 = [poppedToken[2].first_line, poppedToken[2].first_column], tagToken[2].first_line = _ref4[0], tagToken[2].first_column = _ref4[1];
      }
      if (colon) {
        colonOffset = input.lastIndexOf(':');
        this.token(':', ':', colonOffset, colon.length);
      }
      return input.length;
    };

    Lexer.prototype.numberToken = function() {
      var binaryLiteral, lexedLength, match, number, octalLiteral;
      if (!(match = NUMBER.exec(this.chunk))) {
        return 0;
      }
      number = match[0];
      if (/^0[BOX]/.test(number)) {
        this.error("radix prefix '" + number + "' must be lowercase");
      } else if (/E/.test(number) && !/^0x/.test(number)) {
        this.error("exponential notation '" + number + "' must be indicated with a lowercase 'e'");
      } else if (/^0\d*[89]/.test(number)) {
        this.error("decimal literal '" + number + "' must not be prefixed with '0'");
      } else if (/^0\d+/.test(number)) {
        this.error("octal literal '" + number + "' must be prefixed with '0o'");
      }
      lexedLength = number.length;
      if (octalLiteral = /^0o([0-7]+)/.exec(number)) {
        number = '0x' + parseInt(octalLiteral[1], 8).toString(16);
      }
      if (binaryLiteral = /^0b([01]+)/.exec(number)) {
        number = '0x' + parseInt(binaryLiteral[1], 2).toString(16);
      }
      this.token('NUMBER', number, 0, lexedLength);
      return lexedLength;
    };

    Lexer.prototype.stringToken = function() {
      var inner, innerLen, numBreak, octalEsc, pos, quote, string, trimmed;
      switch (quote = this.chunk.charAt(0)) {
        case "'":
          string = (SIMPLESTR.exec(this.chunk) || [])[0];
          break;
        case '"':
          string = this.balancedString(this.chunk, '"');
      }
      if (!string) {
        return 0;
      }
      inner = string.slice(1, -1);
      trimmed = this.removeNewlines(inner);
      if (quote === '"' && 0 < string.indexOf('#{', 1)) {
        numBreak = pos = 0;
        innerLen = inner.length;
        while (inner.charAt(pos++) === '\n' && pos < innerLen) {
          numBreak++;
        }
        this.interpolateString(trimmed, {
          strOffset: 1 + numBreak,
          lexedLength: string.length
        });
      } else {
        this.token('STRING', quote + this.escapeLines(trimmed) + quote, 0, string.length);
      }
      if (octalEsc = /^(?:\\.|[^\\])*\\(?:0[0-7]|[1-7])/.test(string)) {
        this.error("octal escape sequences " + string + " are not allowed");
      }
      return string.length;
    };

    Lexer.prototype.heredocToken = function() {
      var doc, heredoc, match, quote, strOffset;
      if (!(match = HEREDOC.exec(this.chunk))) {
        return 0;
      }
      heredoc = match[0];
      quote = heredoc.charAt(0);
      doc = this.sanitizeHeredoc(match[2], {
        quote: quote,
        indent: null
      });
      if (quote === '"' && 0 <= doc.indexOf('#{')) {
        strOffset = match[2].charAt(0) === '\n' ? 4 : 3;
        this.interpolateString(doc, {
          heredoc: true,
          strOffset: strOffset,
          lexedLength: heredoc.length
        });
      } else {
        this.token('STRING', this.makeString(doc, quote, true), 0, heredoc.length);
      }
      return heredoc.length;
    };

    Lexer.prototype.commentToken = function() {
      var comment, here, match;
      if (!(match = this.chunk.match(COMMENT))) {
        return 0;
      }
      comment = match[0], here = match[1];
      if (here) {
        this.token('HERECOMMENT', this.sanitizeHeredoc(here, {
          herecomment: true,
          indent: repeat(' ', this.indent)
        }), 0, comment.length);
      }
      return comment.length;
    };

    Lexer.prototype.jsToken = function() {
      var match, script;
      if (!(this.chunk.charAt(0) === '`' && (match = JSTOKEN.exec(this.chunk)))) {
        return 0;
      }
      this.token('JS', (script = match[0]).slice(1, -1), 0, script.length);
      return script.length;
    };

    Lexer.prototype.regexToken = function() {
      var flags, length, match, prev, regex, _ref2, _ref3;
      if (this.chunk.charAt(0) !== '/') {
        return 0;
      }
      if (length = this.heregexToken()) {
        return length;
      }
      prev = last(this.tokens);
      if (prev && (_ref2 = prev[0], __indexOf.call((prev.spaced ? NOT_REGEX : NOT_SPACED_REGEX), _ref2) >= 0)) {
        return 0;
      }
      if (!(match = REGEX.exec(this.chunk))) {
        return 0;
      }
      _ref3 = match, match = _ref3[0], regex = _ref3[1], flags = _ref3[2];
      if (regex === '//') {
        return 0;
      }
      if (regex.slice(0, 2) === '/*') {
        this.error('regular expressions cannot begin with `*`');
      }
      this.token('REGEX', "" + regex + flags, 0, match.length);
      return match.length;
    };

    Lexer.prototype.heregexToken = function() {
      var body, flags, flagsOffset, heregex, match, plusToken, prev, re, tag, token, tokens, value, _i, _len, _ref2, _ref3, _ref4;
      if (!(match = HEREGEX.exec(this.chunk))) {
        return 0;
      }
      heregex = match[0], body = match[1], flags = match[2];
      if (0 > body.indexOf('#{')) {
        re = this.escapeLines(body.replace(HEREGEX_OMIT, '$1$2').replace(/\//g, '\\/'), true);
        if (re.match(/^\*/)) {
          this.error('regular expressions cannot begin with `*`');
        }
        this.token('REGEX', "/" + (re || '(?:)') + "/" + flags, 0, heregex.length);
        return heregex.length;
      }
      this.token('IDENTIFIER', 'RegExp', 0, 0);
      this.token('CALL_START', '(', 0, 0);
      tokens = [];
      _ref2 = this.interpolateString(body, {
        regex: true,
        strOffset: 3
      });
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        token = _ref2[_i];
        tag = token[0], value = token[1];
        if (tag === 'TOKENS') {
          tokens.push.apply(tokens, value);
        } else if (tag === 'NEOSTRING') {
          if (!(value = value.replace(HEREGEX_OMIT, '$1$2'))) {
            continue;
          }
          value = value.replace(/\\/g, '\\\\');
          token[0] = 'STRING';
          token[1] = this.makeString(value, '"', true);
          tokens.push(token);
        } else {
          this.error("Unexpected " + tag);
        }
        prev = last(this.tokens);
        plusToken = ['+', '+'];
        plusToken[2] = prev[2];
        tokens.push(plusToken);
      }
      tokens.pop();
      if (((_ref3 = tokens[0]) != null ? _ref3[0] : void 0) !== 'STRING') {
        this.token('STRING', '""', 0, 0);
        this.token('+', '+', 0, 0);
      }
      (_ref4 = this.tokens).push.apply(_ref4, tokens);
      if (flags) {
        flagsOffset = heregex.lastIndexOf(flags);
        this.token(',', ',', flagsOffset, 0);
        this.token('STRING', '"' + flags + '"', flagsOffset, flags.length);
      }
      this.token(')', ')', heregex.length - 1, 0);
      return heregex.length;
    };

    Lexer.prototype.lineToken = function() {
      var diff, indent, match, noNewlines, size;
      if (!(match = MULTI_DENT.exec(this.chunk))) {
        return 0;
      }
      indent = match[0];
      this.seenFor = false;
      size = indent.length - 1 - indent.lastIndexOf('\n');
      noNewlines = this.unfinished();
      if (size - this.indebt === this.indent) {
        if (noNewlines) {
          this.suppressNewlines();
        } else {
          this.newlineToken(0);
        }
        return indent.length;
      }
      if (size > this.indent) {
        if (noNewlines) {
          this.indebt = size - this.indent;
          this.suppressNewlines();
          return indent.length;
        }
        if (!this.tokens.length) {
          this.baseIndent = this.indent = size;
          return indent.length;
        }
        diff = size - this.indent + this.outdebt;
        this.token('INDENT', diff, indent.length - size, size);
        this.indents.push(diff);
        this.ends.push('OUTDENT');
        this.outdebt = this.indebt = 0;
        this.indent = size;
      } else if (size < this.baseIndent) {
        this.error('missing indentation', indent.length);
      } else {
        this.indebt = 0;
        this.outdentToken(this.indent - size, noNewlines, indent.length);
      }
      return indent.length;
    };

    Lexer.prototype.outdentToken = function(moveOut, noNewlines, outdentLength) {
      var decreasedIndent, dent, lastIndent, _ref2;
      decreasedIndent = this.indent - moveOut;
      while (moveOut > 0) {
        lastIndent = this.indents[this.indents.length - 1];
        if (!lastIndent) {
          moveOut = 0;
        } else if (lastIndent === this.outdebt) {
          moveOut -= this.outdebt;
          this.outdebt = 0;
        } else if (lastIndent < this.outdebt) {
          this.outdebt -= lastIndent;
          moveOut -= lastIndent;
        } else {
          dent = this.indents.pop() + this.outdebt;
          if (outdentLength && (_ref2 = this.chunk[outdentLength], __indexOf.call(INDENTABLE_CLOSERS, _ref2) >= 0)) {
            decreasedIndent -= dent - moveOut;
            moveOut = dent;
          }
          this.outdebt = 0;
          this.pair('OUTDENT');
          this.token('OUTDENT', moveOut, 0, outdentLength);
          moveOut -= dent;
        }
      }
      if (dent) {
        this.outdebt -= moveOut;
      }
      while (this.value() === ';') {
        this.tokens.pop();
      }
      if (!(this.tag() === 'TERMINATOR' || noNewlines)) {
        this.token('TERMINATOR', '\n', outdentLength, 0);
      }
      this.indent = decreasedIndent;
      return this;
    };

    Lexer.prototype.whitespaceToken = function() {
      var match, nline, prev;
      if (!((match = WHITESPACE.exec(this.chunk)) || (nline = this.chunk.charAt(0) === '\n'))) {
        return 0;
      }
      prev = last(this.tokens);
      if (prev) {
        prev[match ? 'spaced' : 'newLine'] = true;
      }
      if (match) {
        return match[0].length;
      } else {
        return 0;
      }
    };

    Lexer.prototype.newlineToken = function(offset) {
      while (this.value() === ';') {
        this.tokens.pop();
      }
      if (this.tag() !== 'TERMINATOR') {
        this.token('TERMINATOR', '\n', offset, 0);
      }
      return this;
    };

    Lexer.prototype.suppressNewlines = function() {
      if (this.value() === '\\') {
        this.tokens.pop();
      }
      return this;
    };

    Lexer.prototype.literalToken = function() {
      var match, prev, tag, value, _ref2, _ref3, _ref4, _ref5;
      if (match = OPERATOR.exec(this.chunk)) {
        value = match[0];
        if (CODE.test(value)) {
          this.tagParameters();
        }
      } else {
        value = this.chunk.charAt(0);
      }
      tag = value;
      prev = last(this.tokens);
      if (value === '=' && prev) {
        if (!prev[1].reserved && (_ref2 = prev[1], __indexOf.call(JS_FORBIDDEN, _ref2) >= 0)) {
          this.error("reserved word \"" + (this.value()) + "\" can't be assigned");
        }
        if ((_ref3 = prev[1]) === '||' || _ref3 === '&&') {
          prev[0] = 'COMPOUND_ASSIGN';
          prev[1] += '=';
          return value.length;
        }
      }
      if (value === ';') {
        this.seenFor = false;
        tag = 'TERMINATOR';
      } else if (__indexOf.call(MATH, value) >= 0) {
        tag = 'MATH';
      } else if (__indexOf.call(COMPARE, value) >= 0) {
        tag = 'COMPARE';
      } else if (__indexOf.call(COMPOUND_ASSIGN, value) >= 0) {
        tag = 'COMPOUND_ASSIGN';
      } else if (__indexOf.call(UNARY, value) >= 0) {
        tag = 'UNARY';
      } else if (__indexOf.call(UNARY_MATH, value) >= 0) {
        tag = 'UNARY_MATH';
      } else if (__indexOf.call(SHIFT, value) >= 0) {
        tag = 'SHIFT';
      } else if (__indexOf.call(LOGIC, value) >= 0 || value === '?' && (prev != null ? prev.spaced : void 0)) {
        tag = 'LOGIC';
      } else if (prev && !prev.spaced) {
        if (value === '(' && (_ref4 = prev[0], __indexOf.call(CALLABLE, _ref4) >= 0)) {
          if (prev[0] === '?') {
            prev[0] = 'FUNC_EXIST';
          }
          tag = 'CALL_START';
        } else if (value === '[' && (_ref5 = prev[0], __indexOf.call(INDEXABLE, _ref5) >= 0)) {
          tag = 'INDEX_START';
          switch (prev[0]) {
            case '?':
              prev[0] = 'INDEX_SOAK';
          }
        }
      }
      switch (value) {
        case '(':
        case '{':
        case '[':
          this.ends.push(INVERSES[value]);
          break;
        case ')':
        case '}':
        case ']':
          this.pair(value);
      }
      this.token(tag, value);
      return value.length;
    };

    Lexer.prototype.sanitizeHeredoc = function(doc, options) {
      var attempt, herecomment, indent, match, _ref2;
      indent = options.indent, herecomment = options.herecomment;
      if (herecomment) {
        if (HEREDOC_ILLEGAL.test(doc)) {
          this.error("block comment cannot contain \"*/\", starting");
        }
        if (doc.indexOf('\n') < 0) {
          return doc;
        }
      } else {
        while (match = HEREDOC_INDENT.exec(doc)) {
          attempt = match[1];
          if (indent === null || (0 < (_ref2 = attempt.length) && _ref2 < indent.length)) {
            indent = attempt;
          }
        }
      }
      if (indent) {
        doc = doc.replace(RegExp("\\n" + indent, "g"), '\n');
      }
      if (!herecomment) {
        doc = doc.replace(/^\n/, '');
      }
      return doc;
    };

    Lexer.prototype.tagParameters = function() {
      var i, stack, tok, tokens;
      if (this.tag() !== ')') {
        return this;
      }
      stack = [];
      tokens = this.tokens;
      i = tokens.length;
      tokens[--i][0] = 'PARAM_END';
      while (tok = tokens[--i]) {
        switch (tok[0]) {
          case ')':
            stack.push(tok);
            break;
          case '(':
          case 'CALL_START':
            if (stack.length) {
              stack.pop();
            } else if (tok[0] === '(') {
              tok[0] = 'PARAM_START';
              return this;
            } else {
              return this;
            }
        }
      }
      return this;
    };

    Lexer.prototype.closeIndentation = function() {
      return this.outdentToken(this.indent);
    };

    Lexer.prototype.balancedString = function(str, end) {
      var continueCount, i, letter, match, prev, stack, _i, _ref2;
      continueCount = 0;
      stack = [end];
      for (i = _i = 1, _ref2 = str.length; 1 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 1 <= _ref2 ? ++_i : --_i) {
        if (continueCount) {
          --continueCount;
          continue;
        }
        switch (letter = str.charAt(i)) {
          case '\\':
            ++continueCount;
            continue;
          case end:
            stack.pop();
            if (!stack.length) {
              return str.slice(0, +i + 1 || 9e9);
            }
            end = stack[stack.length - 1];
            continue;
        }
        if (end === '}' && (letter === '"' || letter === "'")) {
          stack.push(end = letter);
        } else if (end === '}' && letter === '/' && (match = HEREGEX.exec(str.slice(i)) || REGEX.exec(str.slice(i)))) {
          continueCount += match[0].length - 1;
        } else if (end === '}' && letter === '{') {
          stack.push(end = '}');
        } else if (end === '"' && prev === '#' && letter === '{') {
          stack.push(end = '}');
        }
        prev = letter;
      }
      return this.error("missing " + (stack.pop()) + ", starting");
    };

    Lexer.prototype.interpolateString = function(str, options) {
      var column, errorToken, expr, heredoc, i, inner, interpolated, len, letter, lexedLength, line, locationToken, nested, offsetInChunk, pi, plusToken, popped, regex, rparen, strOffset, tag, token, tokens, value, _i, _len, _ref2, _ref3, _ref4;
      if (options == null) {
        options = {};
      }
      heredoc = options.heredoc, regex = options.regex, offsetInChunk = options.offsetInChunk, strOffset = options.strOffset, lexedLength = options.lexedLength;
      offsetInChunk || (offsetInChunk = 0);
      strOffset || (strOffset = 0);
      lexedLength || (lexedLength = str.length);
      tokens = [];
      pi = 0;
      i = -1;
      while (letter = str.charAt(i += 1)) {
        if (letter === '\\') {
          i += 1;
          continue;
        }
        if (!(letter === '#' && str.charAt(i + 1) === '{' && (expr = this.balancedString(str.slice(i + 1), '}')))) {
          continue;
        }
        if (pi < i) {
          tokens.push(this.makeToken('NEOSTRING', str.slice(pi, i), strOffset + pi));
        }
        if (!errorToken) {
          errorToken = this.makeToken('', 'string interpolation', offsetInChunk + i + 1, 2);
        }
        inner = expr.slice(1, -1);
        if (inner.length) {
          _ref2 = this.getLineAndColumnFromChunk(strOffset + i + 2), line = _ref2[0], column = _ref2[1];
          nested = new Lexer().tokenize(inner, {
            line: line,
            column: column,
            rewrite: false
          });
          popped = nested.pop();
          if (((_ref3 = nested[0]) != null ? _ref3[0] : void 0) === 'TERMINATOR') {
            popped = nested.shift();
          }
          if (len = nested.length) {
            if (len > 1) {
              nested.unshift(this.makeToken('(', '(', strOffset + i + 1, 0));
              nested.push(this.makeToken(')', ')', strOffset + i + 1 + inner.length, 0));
            }
            tokens.push(['TOKENS', nested]);
          }
        }
        i += expr.length;
        pi = i + 1;
      }
      if ((i > pi && pi < str.length)) {
        tokens.push(this.makeToken('NEOSTRING', str.slice(pi), strOffset + pi));
      }
      if (regex) {
        return tokens;
      }
      if (!tokens.length) {
        return this.token('STRING', '""', offsetInChunk, lexedLength);
      }
      if (tokens[0][0] !== 'NEOSTRING') {
        tokens.unshift(this.makeToken('NEOSTRING', '', offsetInChunk));
      }
      if (interpolated = tokens.length > 1) {
        this.token('(', '(', offsetInChunk, 0, errorToken);
      }
      for (i = _i = 0, _len = tokens.length; _i < _len; i = ++_i) {
        token = tokens[i];
        tag = token[0], value = token[1];
        if (i) {
          if (i) {
            plusToken = this.token('+', '+');
          }
          locationToken = tag === 'TOKENS' ? value[0] : token;
          plusToken[2] = {
            first_line: locationToken[2].first_line,
            first_column: locationToken[2].first_column,
            last_line: locationToken[2].first_line,
            last_column: locationToken[2].first_column
          };
        }
        if (tag === 'TOKENS') {
          (_ref4 = this.tokens).push.apply(_ref4, value);
        } else if (tag === 'NEOSTRING') {
          token[0] = 'STRING';
          token[1] = this.makeString(value, '"', heredoc);
          this.tokens.push(token);
        } else {
          this.error("Unexpected " + tag);
        }
      }
      if (interpolated) {
        rparen = this.makeToken(')', ')', offsetInChunk + lexedLength, 0);
        rparen.stringEnd = true;
        this.tokens.push(rparen);
      }
      return tokens;
    };

    Lexer.prototype.pair = function(tag) {
      var wanted;
      if (tag !== (wanted = last(this.ends))) {
        if ('OUTDENT' !== wanted) {
          this.error("unmatched " + tag);
        }
        this.outdentToken(last(this.indents), true);
        return this.pair(tag);
      }
      return this.ends.pop();
    };

    Lexer.prototype.getLineAndColumnFromChunk = function(offset) {
      var column, lineCount, lines, string;
      if (offset === 0) {
        return [this.chunkLine, this.chunkColumn];
      }
      if (offset >= this.chunk.length) {
        string = this.chunk;
      } else {
        string = this.chunk.slice(0, +(offset - 1) + 1 || 9e9);
      }
      lineCount = count(string, '\n');
      column = this.chunkColumn;
      if (lineCount > 0) {
        lines = string.split('\n');
        column = last(lines).length;
      } else {
        column += string.length;
      }
      return [this.chunkLine + lineCount, column];
    };

    Lexer.prototype.makeToken = function(tag, value, offsetInChunk, length) {
      var lastCharacter, locationData, token, _ref2, _ref3;
      if (offsetInChunk == null) {
        offsetInChunk = 0;
      }
      if (length == null) {
        length = value.length;
      }
      locationData = {};
      _ref2 = this.getLineAndColumnFromChunk(offsetInChunk), locationData.first_line = _ref2[0], locationData.first_column = _ref2[1];
      lastCharacter = Math.max(0, length - 1);
      _ref3 = this.getLineAndColumnFromChunk(offsetInChunk + lastCharacter), locationData.last_line = _ref3[0], locationData.last_column = _ref3[1];
      token = [tag, value, locationData];
      return token;
    };

    Lexer.prototype.token = function(tag, value, offsetInChunk, length, origin) {
      var token;
      token = this.makeToken(tag, value, offsetInChunk, length);
      if (origin) {
        token.origin = origin;
      }
      this.tokens.push(token);
      return token;
    };

    Lexer.prototype.tag = function(index, tag) {
      var tok;
      return (tok = last(this.tokens, index)) && (tag ? tok[0] = tag : tok[0]);
    };

    Lexer.prototype.value = function(index, val) {
      var tok;
      return (tok = last(this.tokens, index)) && (val ? tok[1] = val : tok[1]);
    };

    Lexer.prototype.unfinished = function() {
      var _ref2;
      return LINE_CONTINUER.test(this.chunk) || ((_ref2 = this.tag()) === '\\' || _ref2 === '.' || _ref2 === '?.' || _ref2 === '?::' || _ref2 === 'UNARY' || _ref2 === 'MATH' || _ref2 === 'UNARY_MATH' || _ref2 === '+' || _ref2 === '-' || _ref2 === 'YIELD' || _ref2 === '**' || _ref2 === 'SHIFT' || _ref2 === 'RELATION' || _ref2 === 'COMPARE' || _ref2 === 'LOGIC' || _ref2 === 'THROW' || _ref2 === 'EXTENDS');
    };

    Lexer.prototype.removeNewlines = function(str) {
      return str.replace(/^\s*\n\s*/, '').replace(/([^\\]|\\\\)\s*\n\s*$/, '$1');
    };

    Lexer.prototype.escapeLines = function(str, heredoc) {
      str = str.replace(/\\[^\S\n]*(\n|\\)\s*/g, function(escaped, character) {
        if (character === '\n') {
          return '';
        } else {
          return escaped;
        }
      });
      if (heredoc) {
        return str.replace(MULTILINER, '\\n');
      } else {
        return str.replace(/\s*\n\s*/g, ' ');
      }
    };

    Lexer.prototype.makeString = function(body, quote, heredoc) {
      if (!body) {
        return quote + quote;
      }
      body = body.replace(RegExp("\\\\(" + quote + "|\\\\)", "g"), function(match, contents) {
        if (contents === quote) {
          return contents;
        } else {
          return match;
        }
      });
      body = body.replace(RegExp("" + quote, "g"), '\\$&');
      return quote + this.escapeLines(body, heredoc) + quote;
    };

    Lexer.prototype.error = function(message, offset) {
      var first_column, first_line, _ref2;
      if (offset == null) {
        offset = 0;
      }
      _ref2 = this.getLineAndColumnFromChunk(offset), first_line = _ref2[0], first_column = _ref2[1];
      return throwSyntaxError(message, {
        first_line: first_line,
        first_column: first_column
      });
    };

    return Lexer;

  })();

  JS_KEYWORDS = ['true', 'false', 'null', 'this', 'new', 'delete', 'typeof', 'in', 'instanceof', 'return', 'throw', 'break', 'continue', 'debugger', 'yield', 'if', 'else', 'switch', 'for', 'while', 'do', 'try', 'catch', 'finally', 'class', 'extends', 'super'];

  COFFEE_KEYWORDS = ['undefined', 'then', 'unless', 'until', 'loop', 'of', 'by', 'when'];

  COFFEE_KEYWORDS = COFFEE_KEYWORDS.concat(['await', 'defer']);

  COFFEE_ALIAS_MAP = {
    and: '&&',
    or: '||',
    is: '==',
    isnt: '!=',
    not: '!',
    yes: 'true',
    no: 'false',
    on: 'true',
    off: 'false'
  };

  COFFEE_ALIASES = (function() {
    var _results;
    _results = [];
    for (key in COFFEE_ALIAS_MAP) {
      _results.push(key);
    }
    return _results;
  })();

  COFFEE_KEYWORDS = COFFEE_KEYWORDS.concat(COFFEE_ALIASES);

  RESERVED = ['case', 'default', 'function', 'var', 'void', 'with', 'const', 'let', 'enum', 'export', 'import', 'native', '__hasProp', '__extends', '__slice', '__bind', '__indexOf', 'implements', 'interface', 'package', 'private', 'protected', 'public', 'static'];

  STRICT_PROSCRIBED = ['arguments', 'eval', 'yield*'];

  JS_FORBIDDEN = JS_KEYWORDS.concat(RESERVED).concat(STRICT_PROSCRIBED);

  exports.RESERVED = RESERVED.concat(JS_KEYWORDS).concat(COFFEE_KEYWORDS).concat(STRICT_PROSCRIBED);

  exports.STRICT_PROSCRIBED = STRICT_PROSCRIBED;

  BOM = 65279;

  IDENTIFIER = /^([$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)([^\n\S]*:(?!:))?/;

  NUMBER = /^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i;

  HEREDOC = /^("""|''')((?:\\[\s\S]|[^\\])*?)(?:\n[^\n\S]*)?\1/;

  OPERATOR = /^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/;

  WHITESPACE = /^[^\n\S]+/;

  COMMENT = /^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/;

  CODE = /^[-=]>/;

  MULTI_DENT = /^(?:\n[^\n\S]*)+/;

  SIMPLESTR = /^'[^\\']*(?:\\[\s\S][^\\']*)*'/;

  JSTOKEN = /^`[^\\`]*(?:\\.[^\\`]*)*`/;

  REGEX = /^(\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)([imgy]{0,4})(?!\w)/;

  HEREGEX = /^\/{3}((?:\\?[\s\S])+?)\/{3}([imgy]{0,4})(?!\w)/;

  HEREGEX_OMIT = /((?:\\\\)+)|\\(\s|\/)|\s+(?:#.*)?/g;

  MULTILINER = /\n/g;

  HEREDOC_INDENT = /\n+([^\n\S]*)/g;

  HEREDOC_ILLEGAL = /\*\//;

  LINE_CONTINUER = /^\s*(?:,|\??\.(?![.\d])|::)/;

  TRAILING_SPACES = /\s+$/;

  COMPOUND_ASSIGN = ['-=', '+=', '/=', '*=', '%=', '||=', '&&=', '?=', '<<=', '>>=', '>>>=', '&=', '^=', '|=', '**=', '//=', '%%='];

  UNARY = ['NEW', 'TYPEOF', 'DELETE', 'DO'];

  UNARY_MATH = ['!', '~'];

  LOGIC = ['&&', '||', '&', '|', '^'];

  SHIFT = ['<<', '>>', '>>>'];

  COMPARE = ['==', '!=', '<', '>', '<=', '>='];

  MATH = ['*', '/', '%', '//', '%%'];

  RELATION = ['IN', 'OF', 'INSTANCEOF'];

  BOOL = ['TRUE', 'FALSE'];

  NOT_REGEX = ['NUMBER', 'REGEX', 'BOOL', 'NULL', 'UNDEFINED', '++', '--'];

  NOT_SPACED_REGEX = NOT_REGEX.concat(')', '}', 'THIS', 'IDENTIFIER', 'STRING', ']');

  CALLABLE = ['IDENTIFIER', 'STRING', 'REGEX', ')', ']', '}', '?', '::', '@', 'THIS', 'SUPER'];

  INDEXABLE = CALLABLE.concat('NUMBER', 'BOOL', 'NULL', 'UNDEFINED');

  LINE_BREAK = ['INDENT', 'OUTDENT', 'TERMINATOR'];

  INDENTABLE_CLOSERS = [')', '}', ']'];

  CALLABLE.push('DEFER');

}).call(this);

},{"./helpers":19,"./rewriter":25}],22:[function(require,module,exports){
(function (__dirname){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Access, Arr, Assign, Await, Base, Block, Call, Class, Closure, Code, CodeFragment, Comment, CpsCascade, Defer, Existence, Expansion, Extends, For, HEXNUM, IDENTIFIER, IDENTIFIER_STR, IS_REGEX, IS_STRING, IcedReturnValue, IcedRuntime, IcedTailCall, If, In, Index, InlineRuntime, LEVEL_ACCESS, LEVEL_COND, LEVEL_LIST, LEVEL_OP, LEVEL_PAREN, LEVEL_TOP, Literal, METHOD_DEF, NEGATE, NO, NULL, NUMBER, Obj, Op, Param, Parens, RESERVED, Range, Return, SIMPLENUM, STRICT_PROSCRIBED, Scope, Slice, Slot, Splat, Switch, TAB, THIS, Throw, Try, UTILITIES, Value, While, YES, addLocationDataFn, compact, del, ends, extend, flatten, fragmentsToText, iced, isLiteralArguments, isLiteralThis, last, locationDataToString, merge, multident, parseNum, pathmod, quote_funcname_for_debug, quote_path_for_emission, require_top_dir, some, starts, throwSyntaxError, unfoldSoak, utility, _ref, _ref1,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice;

  Error.stackTraceLimit = Infinity;

  Scope = require('./scope').Scope;

  _ref = require('./lexer'), RESERVED = _ref.RESERVED, STRICT_PROSCRIBED = _ref.STRICT_PROSCRIBED;

  iced = require('iced-runtime');

  pathmod = require('path');

  _ref1 = require('./helpers'), compact = _ref1.compact, flatten = _ref1.flatten, extend = _ref1.extend, merge = _ref1.merge, del = _ref1.del, starts = _ref1.starts, ends = _ref1.ends, last = _ref1.last, some = _ref1.some, addLocationDataFn = _ref1.addLocationDataFn, locationDataToString = _ref1.locationDataToString, throwSyntaxError = _ref1.throwSyntaxError;

  exports.extend = extend;

  exports.addLocationDataFn = addLocationDataFn;

  YES = function() {
    return true;
  };

  NO = function() {
    return false;
  };

  THIS = function() {
    return this;
  };

  NEGATE = function() {
    this.negated = !this.negated;
    return this;
  };

  NULL = function() {
    return new Value(new Literal('null'));
  };

  exports.CodeFragment = CodeFragment = (function() {
    function CodeFragment(parent, code) {
      var _ref2;
      this.code = "" + code;
      this.locationData = parent != null ? parent.locationData : void 0;
      this.type = (parent != null ? (_ref2 = parent.constructor) != null ? _ref2.name : void 0 : void 0) || 'unknown';
    }

    CodeFragment.prototype.toString = function() {
      return "" + this.code + (this.locationData ? ": " + locationDataToString(this.locationData) : '');
    };

    return CodeFragment;

  })();

  fragmentsToText = function(fragments) {
    var fragment;
    return ((function() {
      var _i, _len, _results;
      _results = [];
      for (_i = 0, _len = fragments.length; _i < _len; _i++) {
        fragment = fragments[_i];
        _results.push(fragment.code);
      }
      return _results;
    })()).join('');
  };

  exports.Base = Base = (function() {
    function Base() {
      this.icedContinuationBlock = null;
      this.icedLoopFlag = false;
      this.icedNodeFlag = false;
      this.icedGotCpsSplitFlag = false;
      this.icedCpsPivotFlag = false;
      this.icedHasAutocbFlag = false;
      this.icedFoundArguments = false;
      this.icedParentAwait = null;
      this.icedCallContinuationFlag = false;
    }

    Base.prototype.compile = function(o, lvl) {
      return fragmentsToText(this.compileToFragments(o, lvl));
    };

    Base.prototype.compileToFragments = function(o, lvl) {
      var node;
      o = extend({}, o);
      if (lvl) {
        o.level = lvl;
      }
      node = this.unfoldSoak(o) || this;
      node.tab = o.indent;
      if (node.icedHasContinuation() && !node.icedGotCpsSplitFlag) {
        return node.icedCompileCps(o);
      } else if (o.level === LEVEL_TOP || !node.isStatement(o)) {
        return node.compileNode(o);
      } else {
        return node.compileClosure(o);
      }
    };

    Base.prototype.compileClosure = function(o) {
      var args, argumentsNode, func, jumpNode, meth;
      if (jumpNode = this.jumps()) {
        jumpNode.error('cannot use a pure statement in an expression');
      }
      o.sharedScope = true;
      this.icedClearAutocbFlags();
      func = new Code([], Block.wrap([this]));
      args = [];
      if ((argumentsNode = this.contains(isLiteralArguments)) || this.contains(isLiteralThis)) {
        args = [new Literal('this')];
        if (argumentsNode) {
          meth = 'apply';
          args.push(new Literal('arguments'));
        } else {
          meth = 'call';
        }
        func = new Value(func, [new Access(new Literal(meth))]);
      }
      return (new Call(func, args)).compileNode(o);
    };

    Base.prototype.cache = function(o, level, reused) {
      var ref, sub;
      if (!this.isComplex()) {
        ref = level ? this.compileToFragments(o, level) : this;
        return [ref, ref];
      } else {
        ref = new Literal(reused || o.scope.freeVariable('ref'));
        sub = new Assign(ref, this);
        if (level) {
          return [sub.compileToFragments(o, level), [this.makeCode(ref.value)]];
        } else {
          return [sub, ref];
        }
      }
    };

    Base.prototype.cacheToCodeFragments = function(cacheValues) {
      return [fragmentsToText(cacheValues[0]), fragmentsToText(cacheValues[1])];
    };

    Base.prototype.makeReturn = function(res) {
      var me;
      me = this.unwrapAll();
      if (res) {
        return new Call(new Literal("" + res + ".push"), [me]);
      } else {
        return new Return(me, this.icedHasAutocbFlag);
      }
    };

    Base.prototype.contains = function(pred) {
      var node;
      node = void 0;
      this.traverseChildren(false, function(n) {
        if (pred(n)) {
          node = n;
          return false;
        }
      });
      return node;
    };

    Base.prototype.lastNonComment = function(list) {
      var i;
      i = list.length;
      while (i--) {
        if (!(list[i] instanceof Comment)) {
          return list[i];
        }
      }
      return null;
    };

    Base.prototype.toString = function(idt, name) {
      var extras, tree;
      if (idt == null) {
        idt = '';
      }
      if (name == null) {
        name = this.constructor.name;
      }
      extras = [];
      if (this.icedNodeFlag) {
        extras.push("A");
      }
      if (this.icedLoopFlag) {
        extras.push("L");
      }
      if (this.icedCpsPivotFlag) {
        extras.push("P");
      }
      if (this.icedIsAutocbCode) {
        extras.push("B");
      }
      if (this.icedHasAutocbFlag) {
        extras.push("C");
      }
      if (this.icedParentAwait) {
        extras.push("D");
      }
      if (this.icedFoundArguments) {
        extras.push("G");
      }
      if (extras.length) {
        extras = " (" + extras.join('') + ")";
      }
      tree = '\n' + idt + name;
      tree = '\n' + idt + name;
      if (this.soak) {
        tree += '?';
      }
      tree += extras;
      this.eachChild(function(node) {
        return tree += node.toString(idt + TAB);
      });
      if (this.icedContinuationBlock) {
        idt += TAB;
        tree += '\n' + idt + "Continuation";
        tree += this.icedContinuationBlock.toString(idt + TAB);
      }
      return tree;
    };

    Base.prototype.eachChild = function(func) {
      var attr, child, _i, _j, _len, _len1, _ref2, _ref3;
      if (!this.children) {
        return this;
      }
      _ref2 = this.children;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        attr = _ref2[_i];
        if (this[attr]) {
          _ref3 = flatten([this[attr]]);
          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
            child = _ref3[_j];
            if (func(child) === false) {
              return this;
            }
          }
        }
      }
      return this;
    };

    Base.prototype.traverseChildren = function(crossScope, func) {
      return this.eachChild(function(child) {
        var recur;
        recur = func(child);
        if (recur !== false) {
          return child.traverseChildren(crossScope, func);
        }
      });
    };

    Base.prototype.invert = function() {
      return new Op('!', this);
    };

    Base.prototype.unwrapAll = function() {
      var node;
      node = this;
      while (node !== (node = node.unwrap())) {
        continue;
      }
      return node;
    };

    Base.prototype.flattenChildren = function() {
      var attr, child, out, _i, _j, _len, _len1, _ref2, _ref3;
      out = [];
      _ref2 = this.children;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        attr = _ref2[_i];
        if (this[attr]) {
          _ref3 = flatten([this[attr]]);
          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
            child = _ref3[_j];
            out.push(child);
          }
        }
      }
      return out;
    };

    Base.prototype.icedCompileCps = function(o) {
      var code;
      this.icedGotCpsSplitFlag = true;
      code = CpsCascade.wrap(this, this.icedContinuationBlock, null, o);
      o.sharedScope = true;
      return code.compileNode(o);
    };

    Base.prototype.icedWalkAst = function(p, o) {
      var child, _i, _len, _ref2;
      this.icedParentAwait = p;
      this.icedHasAutocbFlag = o.foundAutocb;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkAst(p, o)) {
          this.icedNodeFlag = true;
        }
      }
      return this.icedNodeFlag;
    };

    Base.prototype.icedWalkAstLoops = function(flood) {
      var child, _i, _len, _ref2;
      if (this.isLoop() && this.icedNodeFlag) {
        flood = true;
      }
      if (this.isLoop() && !this.icedNodeFlag) {
        flood = false;
      }
      this.icedLoopFlag = flood;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkAstLoops(flood)) {
          this.icedLoopFlag = true;
        }
      }
      return this.icedLoopFlag;
    };

    Base.prototype.icedWalkCpsPivots = function() {
      var child, _i, _len, _ref2;
      if (this.icedNodeFlag || (this.icedLoopFlag && this.icedIsJump())) {
        this.icedCpsPivotFlag = true;
      }
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkCpsPivots()) {
          this.icedCpsPivotFlag = true;
        }
      }
      return this.icedCpsPivotFlag;
    };

    Base.prototype.icedClearAutocbFlags = function() {
      this.icedHasAutocbFlag = false;
      return this.traverseChildren(false, function(node) {
        node.icedHasAutocbFlag = false;
        return true;
      });
    };

    Base.prototype.icedCpsRotate = function() {
      var child, _i, _len, _ref2;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        child.icedCpsRotate();
      }
      return this;
    };

    Base.prototype.icedIsCpsPivot = function() {
      return this.icedCpsPivotFlag;
    };

    Base.prototype.icedNestContinuationBlock = function(b) {
      return this.icedContinuationBlock = b;
    };

    Base.prototype.icedHasContinuation = function() {
      return !!this.icedContinuationBlock;
    };

    Base.prototype.icedCallContinuation = function() {
      return this.icedCallContinuationFlag = true;
    };

    Base.prototype.icedWrapContinuation = NO;

    Base.prototype.icedIsJump = NO;

    Base.prototype.icedUnwrap = function(e) {
      if (e.icedHasContinuation() && this.icedHasContinuation()) {
        return this;
      } else {
        if (this.icedHasContinuation()) {
          e.icedContinuationBlock = this.icedContinuationBlock;
        }
        return e;
      }
    };

    Base.prototype.icedStatementAssertion = function() {
      if (this.icedIsCpsPivot()) {
        return this.error("await'ed statements can't act as expressions");
      }
    };

    Base.prototype.children = [];

    Base.prototype.isStatement = NO;

    Base.prototype.jumps = NO;

    Base.prototype.isComplex = YES;

    Base.prototype.isChainable = NO;

    Base.prototype.isAssignable = NO;

    Base.prototype.isLoop = NO;

    Base.prototype.unwrap = THIS;

    Base.prototype.unfoldSoak = NO;

    Base.prototype.assigns = NO;

    Base.prototype.updateLocationDataIfMissing = function(locationData) {
      if (this.locationData) {
        return this;
      }
      this.locationData = locationData;
      return this.eachChild(function(child) {
        return child.updateLocationDataIfMissing(locationData);
      });
    };

    Base.prototype.error = function(message) {
      return throwSyntaxError(message, this.locationData);
    };

    Base.prototype.makeCode = function(code) {
      return new CodeFragment(this, code);
    };

    Base.prototype.wrapInBraces = function(fragments) {
      return [].concat(this.makeCode('('), fragments, this.makeCode(')'));
    };

    Base.prototype.joinFragmentArrays = function(fragmentsList, joinStr) {
      var answer, fragments, i, _i, _len;
      answer = [];
      for (i = _i = 0, _len = fragmentsList.length; _i < _len; i = ++_i) {
        fragments = fragmentsList[i];
        if (i) {
          answer.push(this.makeCode(joinStr));
        }
        answer = answer.concat(fragments);
      }
      return answer;
    };

    return Base;

  })();

  exports.Block = Block = (function(_super) {
    __extends(Block, _super);

    function Block(nodes) {
      Block.__super__.constructor.call(this);
      this.expressions = compact(flatten(nodes || []));
    }

    Block.prototype.children = ['expressions'];

    Block.prototype.push = function(node) {
      this.expressions.push(node);
      return this;
    };

    Block.prototype.pop = function() {
      return this.expressions.pop();
    };

    Block.prototype.unshift = function(node) {
      this.expressions.unshift(node);
      return this;
    };

    Block.prototype.unwrap = function() {
      if (this.expressions.length === 1) {
        return this.icedUnwrap(this.expressions[0]);
      } else {
        return this;
      }
    };

    Block.prototype.isEmpty = function() {
      return !this.expressions.length;
    };

    Block.prototype.isStatement = function(o) {
      var exp, _i, _len, _ref2;
      _ref2 = this.expressions;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        exp = _ref2[_i];
        if (exp.isStatement(o)) {
          return true;
        }
      }
      return false;
    };

    Block.prototype.jumps = function(o) {
      var exp, jumpNode, _i, _len, _ref2;
      _ref2 = this.expressions;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        exp = _ref2[_i];
        if (jumpNode = exp.jumps(o)) {
          return jumpNode;
        }
      }
    };

    Block.prototype.makeReturn = function(res) {
      var expr, foundReturn, len;
      len = this.expressions.length;
      foundReturn = false;
      while (len--) {
        expr = this.expressions[len];
        if (!(expr instanceof Comment)) {
          this.expressions[len] = expr.makeReturn(res);
          if (expr instanceof Return && !expr.expression && !expr.icedHasAutocbFlag) {
            this.expressions.splice(len, 1);
            foundReturn = true;
          } else if (!(expr instanceof If) || expr.elseBody) {
            foundReturn = true;
          }
          break;
        }
      }
      if (this.icedHasAutocbFlag && !this.icedNodeFlag && !foundReturn) {
        this.expressions.push(new Return(null, true));
      }
      return this;
    };

    Block.prototype.compileToFragments = function(o, level) {
      if (o == null) {
        o = {};
      }
      if (o.scope) {
        return Block.__super__.compileToFragments.call(this, o, level);
      } else {
        return this.compileRoot(o);
      }
    };

    Block.prototype.compileNode = function(o) {
      var answer, compiledNodes, fragments, index, node, top, _i, _len, _ref2;
      this.tab = o.indent;
      top = o.level === LEVEL_TOP;
      compiledNodes = [];
      _ref2 = this.expressions;
      for (index = _i = 0, _len = _ref2.length; _i < _len; index = ++_i) {
        node = _ref2[index];
        node = node.unwrapAll();
        node = node.unfoldSoak(o) || node;
        if (node instanceof Block) {
          compiledNodes.push(node.compileNode(o));
        } else if (top) {
          node.front = true;
          fragments = node.compileToFragments(o);
          if (!node.isStatement(o)) {
            fragments.unshift(this.makeCode("" + this.tab));
            fragments.push(this.makeCode(";"));
          }
          compiledNodes.push(fragments);
        } else {
          compiledNodes.push(node.compileToFragments(o, LEVEL_LIST));
        }
      }
      if (top) {
        if (this.spaced) {
          return [].concat(this.joinFragmentArrays(compiledNodes, '\n\n'), this.makeCode("\n"));
        } else {
          return this.joinFragmentArrays(compiledNodes, '\n');
        }
      }
      if (compiledNodes.length) {
        answer = this.joinFragmentArrays(compiledNodes, ', ');
      } else {
        answer = [this.makeCode("void 0")];
      }
      if (compiledNodes.length > 1 && o.level >= LEVEL_LIST) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Block.prototype.compileRoot = function(o) {
      var exp, fragments, i, name, prelude, preludeExps, rest, _i, _len, _ref2;
      o.indent = o.bare ? '' : TAB;
      o.level = LEVEL_TOP;
      this.spaced = true;
      o.scope = new Scope(null, this, null);
      _ref2 = o.locals || [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        name = _ref2[_i];
        o.scope.parameter(name);
      }
      prelude = [];
      if (!o.bare) {
        preludeExps = (function() {
          var _j, _len1, _ref3, _results;
          _ref3 = this.expressions;
          _results = [];
          for (i = _j = 0, _len1 = _ref3.length; _j < _len1; i = ++_j) {
            exp = _ref3[i];
            if (!(exp.unwrap() instanceof Comment)) {
              break;
            }
            _results.push(exp);
          }
          return _results;
        }).call(this);
        rest = this.expressions.slice(preludeExps.length);
        this.expressions = preludeExps;
        if (preludeExps.length) {
          prelude = this.compileNode(merge(o, {
            indent: ''
          }));
          prelude.push(this.makeCode("\n"));
        }
        this.expressions = rest;
      }
      fragments = this.compileWithDeclarations(o);
      if (o.bare) {
        return fragments;
      }
      return [].concat(prelude, this.makeCode("(function() {\n"), fragments, this.makeCode("\n}).call(this);\n"));
    };

    Block.prototype.compileWithDeclarations = function(o) {
      var assigns, declars, exp, fragments, i, post, rest, scope, spaced, _i, _len, _ref2, _ref3, _ref4;
      fragments = [];
      post = [];
      _ref2 = this.expressions;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        exp = _ref2[i];
        exp = exp.unwrap();
        if (!(exp instanceof Comment || exp instanceof Literal)) {
          break;
        }
      }
      o = merge(o, {
        level: LEVEL_TOP
      });
      if (i) {
        rest = this.expressions.splice(i, 9e9);
        _ref3 = [this.spaced, false], spaced = _ref3[0], this.spaced = _ref3[1];
        _ref4 = [this.compileNode(o), spaced], fragments = _ref4[0], this.spaced = _ref4[1];
        this.expressions = rest;
      }
      post = this.compileNode(o);
      scope = o.scope;
      if (scope.expressions === this) {
        declars = o.scope.hasDeclarations();
        assigns = scope.hasAssignments;
        if (declars || assigns) {
          if (i) {
            fragments.push(this.makeCode('\n'));
          }
          fragments.push(this.makeCode("" + this.tab + "var "));
          if (declars) {
            fragments.push(this.makeCode(scope.declaredVariables().join(', ')));
          }
          if (assigns) {
            if (declars) {
              fragments.push(this.makeCode(",\n" + (this.tab + TAB)));
            }
            fragments.push(this.makeCode(scope.assignedVariables().join(",\n" + (this.tab + TAB))));
          }
          fragments.push(this.makeCode(";\n" + (this.spaced ? '\n' : '')));
        } else if (fragments.length && post.length) {
          fragments.push(this.makeCode("\n"));
        }
      }
      return fragments.concat(post);
    };

    Block.wrap = function(nodes) {
      if (nodes.length === 1 && nodes[0] instanceof Block) {
        return nodes[0];
      }
      return new Block(nodes);
    };

    Block.prototype.icedThreadReturn = function(call) {
      var expr, len;
      call = call || new IcedTailCall;
      len = this.expressions.length;
      while (len--) {
        expr = this.expressions[len];
        if (expr.isStatement()) {
          break;
        }
        if (!(expr instanceof Comment) && !(expr instanceof Return)) {
          call.assignValue(expr);
          this.expressions[len] = call;
          return;
        }
      }
      return this.expressions.push(call);
    };

    Block.prototype.icedCompileCps = function(o) {
      this.icedGotCpsSplitFlag = true;
      if (this.expressions.length > 1) {
        return Block.__super__.icedCompileCps.call(this, o);
      } else {
        return this.compileNode(o);
      }
    };

    Block.prototype.icedCpsRotate = function() {
      var child, e, i, pivot, rest, _i, _j, _len, _len1, _ref2;
      pivot = null;
      _ref2 = this.expressions;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        e = _ref2[i];
        if (e.icedIsCpsPivot()) {
          pivot = e;
          pivot.icedCallContinuation();
        }
        e.icedCpsRotate();
        if (pivot) {
          break;
        }
      }
      if (!pivot) {
        return this;
      }
      if (pivot.icedContinuationBlock) {
        throw SyntaxError("unexpected continuation block in node");
      }
      rest = this.expressions.slice(i + 1);
      this.expressions = this.expressions.slice(0, i + 1);
      if (rest.length) {
        child = new Block(rest);
        pivot.icedNestContinuationBlock(child);
        for (_j = 0, _len1 = rest.length; _j < _len1; _j++) {
          e = rest[_j];
          if (e.icedNodeFlag) {
            child.icedNodeFlag = true;
          }
          if (e.icedLoopFlag) {
            child.icedLoopFlag = true;
          }
          if (e.icedCpsPivotFlag) {
            child.icedCpsPivotFlag = true;
          }
          if (e.icedHasAutocbFlag) {
            child.icedHasAutocbFlag = true;
          }
        }
        child.icedCpsRotate();
      }
      return this;
    };

    Block.prototype.icedAddRuntime = function(foundDefer, foundAwait) {
      var index, node;
      index = 0;
      while ((node = this.expressions[index]) && node instanceof Comment || node instanceof Value && node.isString()) {
        index++;
      }
      return this.expressions.splice(index, 0, new IcedRuntime(foundDefer, foundAwait));
    };

    Block.prototype.icedTransform = function(opts) {
      var obj;
      obj = {};
      this.icedWalkAst(null, obj);
      if (!(opts != null ? opts.repl : void 0) && (obj.foundDefer || obj.foundAwait || opts.runforce)) {
        this.icedAddRuntime(obj.foundDefer, obj.foundAwait);
      }
      if (obj.foundAwait) {
        this.icedWalkAstLoops(false);
        this.icedWalkCpsPivots();
        this.icedCpsRotate();
      }
      return this;
    };

    Block.prototype.icedGetSingle = function() {
      if (this.expressions.length === 1) {
        return this.expressions[0];
      } else {
        return null;
      }
    };

    return Block;

  })(Base);

  exports.Literal = Literal = (function(_super) {
    __extends(Literal, _super);

    function Literal(value) {
      this.value = value;
      if (this.value == null) {
        throw new Error("whoops!");
      }
      Literal.__super__.constructor.call(this);
    }

    Literal.prototype.makeReturn = function() {
      if (this.isStatement()) {
        return this;
      } else {
        return Literal.__super__.makeReturn.apply(this, arguments);
      }
    };

    Literal.prototype.isAssignable = function() {
      return IDENTIFIER.test(this.value);
    };

    Literal.prototype.isStatement = function() {
      var _ref2;
      return (_ref2 = this.value) === 'break' || _ref2 === 'continue' || _ref2 === 'debugger';
    };

    Literal.prototype.isComplex = NO;

    Literal.prototype.assigns = function(name) {
      return name === this.value;
    };

    Literal.prototype.jumps = function(o) {
      if (this.value === 'break' && !((o != null ? o.loop : void 0) || (o != null ? o.block : void 0))) {
        return this;
      }
      if (this.value === 'continue' && !(o != null ? o.loop : void 0)) {
        return this;
      }
    };

    Literal.prototype.compileNode = function(o) {
      var answer, code, _ref2;
      if (this.icedLoopFlag && this.icedIsJump()) {
        return this.icedCompileIced(o);
      }
      code = this.value === 'this' ? ((_ref2 = o.scope.method) != null ? _ref2.bound : void 0) ? o.scope.method.context : this.value : this.value.reserved ? "\"" + this.value + "\"" : this.value;
      answer = this.isStatement() ? "" + this.tab + code + ";" : code;
      return [this.makeCode(answer)];
    };

    Literal.prototype.toString = function() {
      return ' "' + this.value + '"';
    };

    Literal.prototype.icedWalkAst = function(parent, o) {
      if (this.value === 'arguments' && o.foundAwaitFunc) {
        o.foundArguments = true;
        this.value = "_arguments";
      }
      return false;
    };

    Literal.prototype.icedIsJump = function() {
      var _ref2;
      return (_ref2 = this.value) === 'break' || _ref2 === 'continue';
    };

    Literal.prototype.icedCompileIced = function(o) {
      var call, d, func, l;
      d = {
        'continue': iced["const"].c_while,
        'break': iced["const"].b_while
      };
      l = d[this.value];
      func = new Value(new Literal(l));
      call = new Call(func, []);
      return call.compileNode(o);
    };

    return Literal;

  })(Base);

  exports.Undefined = (function(_super) {
    __extends(Undefined, _super);

    function Undefined() {
      return Undefined.__super__.constructor.apply(this, arguments);
    }

    Undefined.prototype.isAssignable = NO;

    Undefined.prototype.isComplex = NO;

    Undefined.prototype.compileNode = function(o) {
      return [this.makeCode(o.level >= LEVEL_ACCESS ? '(void 0)' : 'void 0')];
    };

    return Undefined;

  })(Base);

  exports.Null = (function(_super) {
    __extends(Null, _super);

    function Null() {
      return Null.__super__.constructor.apply(this, arguments);
    }

    Null.prototype.isAssignable = NO;

    Null.prototype.isComplex = NO;

    Null.prototype.compileNode = function() {
      return [this.makeCode("null")];
    };

    return Null;

  })(Base);

  exports.Bool = (function(_super) {
    __extends(Bool, _super);

    Bool.prototype.isAssignable = NO;

    Bool.prototype.isComplex = NO;

    Bool.prototype.compileNode = function() {
      return [this.makeCode(this.val)];
    };

    function Bool(val) {
      this.val = val;
    }

    return Bool;

  })(Base);

  exports.Return = Return = (function(_super) {
    __extends(Return, _super);

    function Return(expression, auto) {
      this.expression = expression;
      Return.__super__.constructor.call(this);
      this.icedHasAutocbFlag = auto;
    }

    Return.prototype.children = ['expression'];

    Return.prototype.isStatement = YES;

    Return.prototype.makeReturn = THIS;

    Return.prototype.jumps = THIS;

    Return.prototype.compileToFragments = function(o, level) {
      var expr, _ref2;
      expr = (_ref2 = this.expression) != null ? _ref2.makeReturn() : void 0;
      if (expr && !(expr instanceof Return)) {
        return expr.compileToFragments(o, level);
      } else {
        return Return.__super__.compileToFragments.call(this, o, level);
      }
    };

    Return.prototype.compileNode = function(o) {
      var answer;
      if (this.icedHasAutocbFlag) {
        return this.icedCompileIced(o);
      }
      answer = [];
      answer.push(this.makeCode(this.tab + ("return" + (this.expression ? " " : ""))));
      if (this.expression) {
        answer = answer.concat(this.expression.compileToFragments(o, LEVEL_PAREN));
      }
      answer.push(this.makeCode(";"));
      return answer;
    };

    Return.prototype.icedCompileIced = function(o) {
      var args, block, call, cb, ret;
      cb = new Value(new Literal(iced["const"].autocb));
      args = this.expression ? [this.expression] : [];
      call = new Call(cb, args);
      ret = new Literal("return");
      block = new Block([call, ret]);
      return block.compileNode(o);
    };

    return Return;

  })(Base);

  exports.Value = Value = (function(_super) {
    __extends(Value, _super);

    function Value(base, props, tag) {
      Value.__super__.constructor.call(this);
      if (!props && base instanceof Value) {
        return base;
      }
      this.base = base;
      this.properties = props || [];
      if (tag) {
        this[tag] = true;
      }
      return this;
    }

    Value.prototype.children = ['base', 'properties'];

    Value.prototype.copy = function() {
      return new Value(this.base, this.properties);
    };

    Value.prototype.add = function(props) {
      this.properties = this.properties.concat(props);
      return this;
    };

    Value.prototype.hasProperties = function() {
      return !!this.properties.length;
    };

    Value.prototype.bareLiteral = function(type) {
      return !this.properties.length && this.base instanceof type;
    };

    Value.prototype.isArray = function() {
      return this.bareLiteral(Arr);
    };

    Value.prototype.isRange = function() {
      return this.bareLiteral(Range);
    };

    Value.prototype.isComplex = function() {
      return this.hasProperties() || this.base.isComplex();
    };

    Value.prototype.isAssignable = function() {
      return this.hasProperties() || this.base.isAssignable();
    };

    Value.prototype.isSimpleNumber = function() {
      return this.bareLiteral(Literal) && SIMPLENUM.test(this.base.value);
    };

    Value.prototype.isString = function() {
      return this.bareLiteral(Literal) && IS_STRING.test(this.base.value);
    };

    Value.prototype.isRegex = function() {
      return this.bareLiteral(Literal) && IS_REGEX.test(this.base.value);
    };

    Value.prototype.isAtomic = function() {
      var node, _i, _len, _ref2;
      _ref2 = this.properties.concat(this.base);
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        node = _ref2[_i];
        if (node.soak || node instanceof Call) {
          return false;
        }
      }
      return true;
    };

    Value.prototype.isNotCallable = function() {
      return this.isSimpleNumber() || this.isString() || this.isRegex() || this.isArray() || this.isRange() || this.isSplice() || this.isObject();
    };

    Value.prototype.isStatement = function(o) {
      return !this.properties.length && this.base.isStatement(o);
    };

    Value.prototype.assigns = function(name) {
      return !this.properties.length && this.base.assigns(name);
    };

    Value.prototype.jumps = function(o) {
      return !this.properties.length && this.base.jumps(o);
    };

    Value.prototype.isObject = function(onlyGenerated) {
      if (this.properties.length) {
        return false;
      }
      return (this.base instanceof Obj) && (!onlyGenerated || this.base.generated);
    };

    Value.prototype.isSplice = function() {
      return last(this.properties) instanceof Slice;
    };

    Value.prototype.looksStatic = function(className) {
      var _ref2;
      return this.base.value === className && this.properties.length && ((_ref2 = this.properties[0].name) != null ? _ref2.value : void 0) !== 'prototype';
    };

    Value.prototype.unwrap = function() {
      if (this.properties.length) {
        return this;
      } else {
        return this.base;
      }
    };

    Value.prototype.cacheReference = function(o) {
      var base, bref, name, nref;
      name = last(this.properties);
      if (this.properties.length < 2 && !this.base.isComplex() && !(name != null ? name.isComplex() : void 0)) {
        return [this, this];
      }
      base = new Value(this.base, this.properties.slice(0, -1));
      if (base.isComplex()) {
        bref = new Literal(o.scope.freeVariable('base'));
        base = new Value(new Parens(new Assign(bref, base)));
      }
      if (!name) {
        return [base, bref];
      }
      if (name.isComplex()) {
        nref = new Literal(o.scope.freeVariable('name'));
        name = new Index(new Assign(nref, name.index));
        nref = new Index(nref);
      }
      return [base.add(name), new Value(bref || base.base, [nref || name])];
    };

    Value.prototype.compileNode = function(o) {
      var fragments, prop, props, _i, _len;
      this.base.front = this.front;
      props = this.properties;
      fragments = this.base.compileToFragments(o, (props.length ? LEVEL_ACCESS : null));
      if ((this.base instanceof Parens || props.length) && SIMPLENUM.test(fragmentsToText(fragments))) {
        fragments.push(this.makeCode('.'));
      }
      for (_i = 0, _len = props.length; _i < _len; _i++) {
        prop = props[_i];
        fragments.push.apply(fragments, prop.compileToFragments(o));
      }
      return fragments;
    };

    Value.prototype.unfoldSoak = function(o) {
      return this.unfoldedSoak != null ? this.unfoldedSoak : this.unfoldedSoak = (function(_this) {
        return function() {
          var fst, i, ifn, prop, ref, snd, _i, _len, _ref2, _ref3;
          if (ifn = _this.base.unfoldSoak(o)) {
            (_ref2 = ifn.body.properties).push.apply(_ref2, _this.properties);
            return ifn;
          }
          _ref3 = _this.properties;
          for (i = _i = 0, _len = _ref3.length; _i < _len; i = ++_i) {
            prop = _ref3[i];
            if (!prop.soak) {
              continue;
            }
            prop.soak = false;
            fst = new Value(_this.base, _this.properties.slice(0, i));
            snd = new Value(_this.base, _this.properties.slice(i));
            if (fst.isComplex()) {
              ref = new Literal(o.scope.freeVariable('ref'));
              fst = new Parens(new Assign(ref, fst));
              snd.base = ref;
            }
            return new If(new Existence(fst), snd, {
              soak: true
            });
          }
          return false;
        };
      })(this)();
    };

    Value.prototype.icedToSlot = function(i) {
      var sufffix, suffix;
      if (this.base instanceof Obj) {
        return this.base.icedToSlot(i);
      }
      sufffix = null;
      if (this.properties && this.properties.length) {
        suffix = this.properties.pop();
      }
      return new Slot(i, this, suffix);
    };

    Value.prototype.icedToSlotAccess = function() {
      if (this["this"]) {
        return this.properties[0];
      } else {
        return new Access(this);
      }
    };

    return Value;

  })(Base);

  exports.Comment = Comment = (function(_super) {
    __extends(Comment, _super);

    function Comment(comment) {
      this.comment = comment;
      Comment.__super__.constructor.call(this);
    }

    Comment.prototype.isStatement = YES;

    Comment.prototype.makeReturn = THIS;

    Comment.prototype.compileNode = function(o, level) {
      var code, comment;
      comment = this.comment.replace(/^(\s*)# /gm, "$1 * ");
      code = "/*" + (multident(comment, this.tab)) + (__indexOf.call(comment, '\n') >= 0 ? "\n" + this.tab : '') + " */";
      if ((level || o.level) === LEVEL_TOP) {
        code = o.indent + code;
      }
      return [this.makeCode("\n"), this.makeCode(code)];
    };

    return Comment;

  })(Base);

  exports.Call = Call = (function(_super) {
    __extends(Call, _super);

    function Call(variable, args, soak) {
      this.args = args != null ? args : [];
      this.soak = soak;
      Call.__super__.constructor.call(this);
      this.isNew = false;
      this.isSuper = variable === 'super';
      this.variable = this.isSuper ? null : variable;
      if (variable instanceof Value && variable.isNotCallable()) {
        variable.error("literal is not a function");
      }
    }

    Call.prototype.children = ['variable', 'args'];

    Call.prototype.newInstance = function() {
      var base, _ref2;
      base = ((_ref2 = this.variable) != null ? _ref2.base : void 0) || this.variable;
      if (base instanceof Call && !base.isNew) {
        base.newInstance();
      } else {
        this.isNew = true;
      }
      return this;
    };

    Call.prototype.superReference = function(o) {
      var accesses, method;
      method = o.scope.namedMethod();
      if (method != null ? method.klass : void 0) {
        accesses = [new Access(new Literal('__super__'))];
        if (method["static"]) {
          accesses.push(new Access(new Literal('constructor')));
        }
        accesses.push(new Access(new Literal(method.name)));
        return (new Value(new Literal(method.klass), accesses)).compile(o);
      } else if (method != null ? method.ctor : void 0) {
        return "" + method.name + ".__super__.constructor";
      } else {
        return this.error('cannot call super outside of an instance method.');
      }
    };

    Call.prototype.superThis = function(o) {
      var method;
      if (o.scope.icedgen) {
        return "_this";
      } else {
        method = o.scope.method;
        return (method && !method.klass && method.context) || "this";
      }
    };

    Call.prototype.unfoldSoak = function(o) {
      var call, ifn, left, list, rite, _i, _len, _ref2, _ref3;
      if (this.soak) {
        if (this.variable) {
          if (ifn = unfoldSoak(o, this, 'variable')) {
            return ifn;
          }
          _ref2 = new Value(this.variable).cacheReference(o), left = _ref2[0], rite = _ref2[1];
        } else {
          left = new Literal(this.superReference(o));
          rite = new Value(left);
        }
        rite = new Call(rite, this.args);
        rite.isNew = this.isNew;
        left = new Literal("typeof " + (left.compile(o)) + " === \"function\"");
        return new If(left, new Value(rite), {
          soak: true
        });
      }
      call = this;
      list = [];
      while (true) {
        if (call.variable instanceof Call) {
          list.push(call);
          call = call.variable;
          continue;
        }
        if (!(call.variable instanceof Value)) {
          break;
        }
        list.push(call);
        if (!((call = call.variable.base) instanceof Call)) {
          break;
        }
      }
      _ref3 = list.reverse();
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        call = _ref3[_i];
        if (ifn) {
          if (call.variable instanceof Call) {
            call.variable = ifn;
          } else {
            call.variable.base = ifn;
          }
        }
        ifn = unfoldSoak(o, call, 'variable');
      }
      return ifn;
    };

    Call.prototype.compileNode = function(o) {
      var arg, argIndex, compiledArgs, compiledArray, fragments, preface, _i, _len, _ref2, _ref3;
      if ((_ref2 = this.variable) != null) {
        _ref2.front = this.front;
      }
      compiledArray = Splat.compileSplattedArray(o, this.args, true);
      if (compiledArray.length) {
        return this.compileSplat(o, compiledArray);
      }
      compiledArgs = [];
      _ref3 = this.args;
      for (argIndex = _i = 0, _len = _ref3.length; _i < _len; argIndex = ++_i) {
        arg = _ref3[argIndex];
        arg.icedStatementAssertion();
        if (argIndex) {
          compiledArgs.push(this.makeCode(", "));
        }
        compiledArgs.push.apply(compiledArgs, arg.compileToFragments(o, LEVEL_LIST));
      }
      fragments = [];
      if (this.isSuper) {
        preface = this.superReference(o) + (".call(" + (this.superThis(o)));
        if (compiledArgs.length) {
          preface += ", ";
        }
        fragments.push(this.makeCode(preface));
      } else {
        if (this.isNew) {
          fragments.push(this.makeCode('new '));
        }
        fragments.push.apply(fragments, this.variable.compileToFragments(o, LEVEL_ACCESS));
        fragments.push(this.makeCode("("));
      }
      fragments.push.apply(fragments, compiledArgs);
      fragments.push(this.makeCode(")"));
      return fragments;
    };

    Call.prototype.compileSplat = function(o, splatArgs) {
      var answer, base, fun, idt, name, ref;
      if (this.isSuper) {
        return [].concat(this.makeCode("" + (this.superReference(o)) + ".apply(" + (this.superThis(o)) + ", "), splatArgs, this.makeCode(")"));
      }
      if (this.isNew) {
        idt = this.tab + TAB;
        return [].concat(this.makeCode("(function(func, args, ctor) {\n" + idt + "ctor.prototype = func.prototype;\n" + idt + "var child = new ctor, result = func.apply(child, args);\n" + idt + "return Object(result) === result ? result : child;\n" + this.tab + "})("), this.variable.compileToFragments(o, LEVEL_LIST), this.makeCode(", "), splatArgs, this.makeCode(", function(){})"));
      }
      answer = [];
      base = new Value(this.variable);
      if ((name = base.properties.pop()) && base.isComplex()) {
        ref = o.scope.freeVariable('ref');
        answer = answer.concat(this.makeCode("(" + ref + " = "), base.compileToFragments(o, LEVEL_LIST), this.makeCode(")"), name.compileToFragments(o));
      } else {
        fun = base.compileToFragments(o, LEVEL_ACCESS);
        if (SIMPLENUM.test(fragmentsToText(fun))) {
          fun = this.wrapInBraces(fun);
        }
        if (name) {
          ref = fragmentsToText(fun);
          fun.push.apply(fun, name.compileToFragments(o));
        } else {
          ref = 'null';
        }
        answer = answer.concat(fun);
      }
      return answer = answer.concat(this.makeCode(".apply(" + ref + ", "), splatArgs, this.makeCode(")"));
    };

    return Call;

  })(Base);

  exports.Extends = Extends = (function(_super) {
    __extends(Extends, _super);

    function Extends(child, parent) {
      this.child = child;
      this.parent = parent;
      Extends.__super__.constructor.call(this);
    }

    Extends.prototype.children = ['child', 'parent'];

    Extends.prototype.compileToFragments = function(o) {
      return new Call(new Value(new Literal(utility('extends'))), [this.child, this.parent]).compileToFragments(o);
    };

    return Extends;

  })(Base);

  exports.Access = Access = (function(_super) {
    __extends(Access, _super);

    function Access(name, tag) {
      this.name = name;
      Access.__super__.constructor.call(this);
      this.name.asKey = true;
      this.soak = tag === 'soak';
    }

    Access.prototype.children = ['name'];

    Access.prototype.compileToFragments = function(o) {
      var name;
      name = this.name.compileToFragments(o);
      if ((IDENTIFIER.test(fragmentsToText(name))) || this.name instanceof Defer) {
        name.unshift(this.makeCode("."));
      } else {
        name.unshift(this.makeCode("["));
        name.push(this.makeCode("]"));
      }
      return name;
    };

    Access.prototype.isComplex = NO;

    return Access;

  })(Base);

  exports.Index = Index = (function(_super) {
    __extends(Index, _super);

    function Index(index) {
      this.index = index;
      Index.__super__.constructor.call(this);
    }

    Index.prototype.children = ['index'];

    Index.prototype.compileToFragments = function(o) {
      return [].concat(this.makeCode("["), this.index.compileToFragments(o, LEVEL_PAREN), this.makeCode("]"));
    };

    Index.prototype.isComplex = function() {
      return this.index.isComplex();
    };

    return Index;

  })(Base);

  exports.Range = Range = (function(_super) {
    __extends(Range, _super);

    Range.prototype.children = ['from', 'to'];

    function Range(from, to, tag) {
      this.from = from;
      this.to = to;
      Range.__super__.constructor.call(this);
      this.exclusive = tag === 'exclusive';
      this.equals = this.exclusive ? '' : '=';
    }

    Range.prototype.compileVariables = function(o) {
      var step, _ref2, _ref3, _ref4, _ref5;
      o = merge(o, {
        top: true
      });
      _ref2 = this.cacheToCodeFragments(this.from.cache(o, LEVEL_LIST)), this.fromC = _ref2[0], this.fromVar = _ref2[1];
      _ref3 = this.cacheToCodeFragments(this.to.cache(o, LEVEL_LIST)), this.toC = _ref3[0], this.toVar = _ref3[1];
      if (step = del(o, 'step')) {
        _ref4 = this.cacheToCodeFragments(step.cache(o, LEVEL_LIST)), this.step = _ref4[0], this.stepVar = _ref4[1];
      }
      _ref5 = [this.fromVar.match(NUMBER), this.toVar.match(NUMBER)], this.fromNum = _ref5[0], this.toNum = _ref5[1];
      if (this.stepVar) {
        return this.stepNum = this.stepVar.match(NUMBER);
      }
    };

    Range.prototype.compileNode = function(o) {
      var cond, condPart, from, gt, idx, idxName, known, lt, namedIndex, stepPart, to, varPart, _ref2, _ref3;
      if (!this.fromVar) {
        this.compileVariables(o);
      }
      if (!o.index) {
        return this.compileArray(o);
      }
      known = this.fromNum && this.toNum;
      idx = del(o, 'index');
      idxName = del(o, 'name');
      namedIndex = idxName && idxName !== idx;
      varPart = "" + idx + " = " + this.fromC;
      if (this.toC !== this.toVar) {
        varPart += ", " + this.toC;
      }
      if (this.step !== this.stepVar) {
        varPart += ", " + this.step;
      }
      _ref2 = ["" + idx + " <" + this.equals, "" + idx + " >" + this.equals], lt = _ref2[0], gt = _ref2[1];
      condPart = this.stepNum ? parseNum(this.stepNum[0]) > 0 ? "" + lt + " " + this.toVar : "" + gt + " " + this.toVar : known ? ((_ref3 = [parseNum(this.fromNum[0]), parseNum(this.toNum[0])], from = _ref3[0], to = _ref3[1], _ref3), from <= to ? "" + lt + " " + to : "" + gt + " " + to) : (cond = this.stepVar ? "" + this.stepVar + " > 0" : "" + this.fromVar + " <= " + this.toVar, "" + cond + " ? " + lt + " " + this.toVar + " : " + gt + " " + this.toVar);
      stepPart = this.stepVar ? "" + idx + " += " + this.stepVar : known ? namedIndex ? from <= to ? "++" + idx : "--" + idx : from <= to ? "" + idx + "++" : "" + idx + "--" : namedIndex ? "" + cond + " ? ++" + idx + " : --" + idx : "" + cond + " ? " + idx + "++ : " + idx + "--";
      if (namedIndex) {
        varPart = "" + idxName + " = " + varPart;
      }
      if (namedIndex) {
        stepPart = "" + idxName + " = " + stepPart;
      }
      return [this.makeCode("" + varPart + "; " + condPart + "; " + stepPart)];
    };

    Range.prototype.compileArray = function(o) {
      var args, body, cond, hasArgs, i, idt, post, pre, range, result, vars, _i, _ref2, _ref3, _results;
      if (this.fromNum && this.toNum && Math.abs(this.fromNum - this.toNum) <= 20) {
        range = (function() {
          _results = [];
          for (var _i = _ref2 = +this.fromNum, _ref3 = +this.toNum; _ref2 <= _ref3 ? _i <= _ref3 : _i >= _ref3; _ref2 <= _ref3 ? _i++ : _i--){ _results.push(_i); }
          return _results;
        }).apply(this);
        if (this.exclusive) {
          range.pop();
        }
        return [this.makeCode("[" + (range.join(', ')) + "]")];
      }
      idt = this.tab + TAB;
      i = o.scope.freeVariable('i');
      result = o.scope.freeVariable('results');
      pre = "\n" + idt + result + " = [];";
      if (this.fromNum && this.toNum) {
        o.index = i;
        body = fragmentsToText(this.compileNode(o));
      } else {
        vars = ("" + i + " = " + this.fromC) + (this.toC !== this.toVar ? ", " + this.toC : '');
        cond = "" + this.fromVar + " <= " + this.toVar;
        body = "var " + vars + "; " + cond + " ? " + i + " <" + this.equals + " " + this.toVar + " : " + i + " >" + this.equals + " " + this.toVar + "; " + cond + " ? " + i + "++ : " + i + "--";
      }
      post = "{ " + result + ".push(" + i + "); }\n" + idt + "return " + result + ";\n" + o.indent;
      hasArgs = function(node) {
        return node != null ? node.contains(isLiteralArguments) : void 0;
      };
      if (hasArgs(this.from) || hasArgs(this.to)) {
        args = ', arguments';
      }
      return [this.makeCode("(function() {" + pre + "\n" + idt + "for (" + body + ")" + post + "}).apply(this" + (args != null ? args : '') + ")")];
    };

    return Range;

  })(Base);

  exports.Slice = Slice = (function(_super) {
    __extends(Slice, _super);

    Slice.prototype.children = ['range'];

    function Slice(range) {
      this.range = range;
      Slice.__super__.constructor.call(this);
    }

    Slice.prototype.compileNode = function(o) {
      var compiled, compiledText, from, fromCompiled, to, toStr, _ref2;
      _ref2 = this.range, to = _ref2.to, from = _ref2.from;
      fromCompiled = from && from.compileToFragments(o, LEVEL_PAREN) || [this.makeCode('0')];
      if (to) {
        compiled = to.compileToFragments(o, LEVEL_PAREN);
        compiledText = fragmentsToText(compiled);
        if (!(!this.range.exclusive && +compiledText === -1)) {
          toStr = ', ' + (this.range.exclusive ? compiledText : SIMPLENUM.test(compiledText) ? "" + (+compiledText + 1) : (compiled = to.compileToFragments(o, LEVEL_ACCESS), "+" + (fragmentsToText(compiled)) + " + 1 || 9e9"));
        }
      }
      return [this.makeCode(".slice(" + (fragmentsToText(fromCompiled)) + (toStr || '') + ")")];
    };

    return Slice;

  })(Base);

  exports.Obj = Obj = (function(_super) {
    __extends(Obj, _super);

    function Obj(props, generated) {
      this.generated = generated != null ? generated : false;
      this.objects = this.properties = props || [];
      Obj.__super__.constructor.call(this);
    }

    Obj.prototype.children = ['properties'];

    Obj.prototype.compileNode = function(o) {
      var answer, i, idt, indent, join, lastNoncom, node, prop, props, _i, _j, _len, _len1;
      props = this.properties;
      if (!props.length) {
        return [this.makeCode(this.front ? '({})' : '{}')];
      }
      if (this.generated) {
        for (_i = 0, _len = props.length; _i < _len; _i++) {
          node = props[_i];
          if (node instanceof Value) {
            node.error('cannot have an implicit value in an implicit object');
          }
        }
      }
      idt = o.indent += TAB;
      lastNoncom = this.lastNonComment(this.properties);
      answer = [];
      for (i = _j = 0, _len1 = props.length; _j < _len1; i = ++_j) {
        prop = props[i];
        join = i === props.length - 1 ? '' : prop === lastNoncom || prop instanceof Comment ? '\n' : ',\n';
        indent = prop instanceof Comment ? '' : idt;
        if (prop instanceof Assign && prop.variable instanceof Value && prop.variable.hasProperties()) {
          prop.variable.error('Invalid object key');
        }
        if (prop instanceof Value && prop["this"]) {
          prop = new Assign(prop.properties[0].name, prop, 'object');
        }
        if (!(prop instanceof Comment)) {
          if (!(prop instanceof Assign)) {
            prop = new Assign(prop, prop, 'object');
          }
          (prop.variable.base || prop.variable).asKey = true;
        }
        if (indent) {
          answer.push(this.makeCode(indent));
        }
        answer.push.apply(answer, prop.compileToFragments(o, LEVEL_TOP));
        if (join) {
          answer.push(this.makeCode(join));
        }
      }
      answer.unshift(this.makeCode("{" + (props.length && '\n')));
      answer.push(this.makeCode("" + (props.length && '\n' + this.tab) + "}"));
      if (this.front) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Obj.prototype.assigns = function(name) {
      var prop, _i, _len, _ref2;
      _ref2 = this.properties;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        prop = _ref2[_i];
        if (prop.assigns(name)) {
          return true;
        }
      }
      return false;
    };

    Obj.prototype.icedToSlot = function(i) {
      var access, prop, _i, _len, _ref2, _results;
      _ref2 = this.properties;
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        prop = _ref2[_i];
        if (prop instanceof Assign) {
          _results.push((prop.value.icedToSlot(i)).addAccess(prop.variable.icedToSlotAccess()));
        } else if (prop instanceof Value) {
          access = prop.icedToSlotAccess();
          _results.push((prop.icedToSlot(i)).addAccess(access));
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    return Obj;

  })(Base);

  exports.Arr = Arr = (function(_super) {
    __extends(Arr, _super);

    function Arr(objs) {
      this.objects = objs || [];
      Arr.__super__.constructor.call(this);
    }

    Arr.prototype.children = ['objects'];

    Arr.prototype.compileNode = function(o) {
      var answer, compiledObjs, fragments, index, obj, _i, _len;
      if (!this.objects.length) {
        return [this.makeCode('[]')];
      }
      o.indent += TAB;
      answer = Splat.compileSplattedArray(o, this.objects);
      if (answer.length) {
        return answer;
      }
      answer = [];
      compiledObjs = (function() {
        var _i, _len, _ref2, _results;
        _ref2 = this.objects;
        _results = [];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          obj = _ref2[_i];
          _results.push(obj.compileToFragments(o, LEVEL_LIST));
        }
        return _results;
      }).call(this);
      for (index = _i = 0, _len = compiledObjs.length; _i < _len; index = ++_i) {
        fragments = compiledObjs[index];
        if (index) {
          answer.push(this.makeCode(", "));
        }
        answer.push.apply(answer, fragments);
      }
      if (fragmentsToText(answer).indexOf('\n') >= 0) {
        answer.unshift(this.makeCode("[\n" + o.indent));
        answer.push(this.makeCode("\n" + this.tab + "]"));
      } else {
        answer.unshift(this.makeCode("["));
        answer.push(this.makeCode("]"));
      }
      return answer;
    };

    Arr.prototype.assigns = function(name) {
      var obj, _i, _len, _ref2;
      _ref2 = this.objects;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        obj = _ref2[_i];
        if (obj.assigns(name)) {
          return true;
        }
      }
      return false;
    };

    return Arr;

  })(Base);

  exports.Class = Class = (function(_super) {
    __extends(Class, _super);

    function Class(variable, parent, body) {
      this.variable = variable;
      this.parent = parent;
      this.body = body != null ? body : new Block;
      Class.__super__.constructor.call(this);
      this.boundFuncs = [];
      this.body.classBody = true;
    }

    Class.prototype.children = ['variable', 'parent', 'body'];

    Class.prototype.determineName = function() {
      var decl, tail;
      if (!this.variable) {
        return null;
      }
      decl = (tail = last(this.variable.properties)) ? tail instanceof Access && tail.name.value : this.variable.base.value;
      if (__indexOf.call(STRICT_PROSCRIBED, decl) >= 0) {
        this.variable.error("class variable name may not be " + decl);
      }
      return decl && (decl = IDENTIFIER.test(decl) && decl);
    };

    Class.prototype.setContext = function(name) {
      return this.body.traverseChildren(false, function(node) {
        if (node.classBody) {
          return false;
        }
        if (node instanceof Literal && node.value === 'this') {
          return node.value = name;
        } else if (node instanceof Code) {
          node.klass = name;
          if (node.bound) {
            return node.context = name;
          }
        }
      });
    };

    Class.prototype.addBoundFunctions = function(o) {
      var bvar, lhs, _i, _len, _ref2;
      _ref2 = this.boundFuncs;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        bvar = _ref2[_i];
        lhs = (new Value(new Literal("this"), [new Access(bvar)])).compile(o);
        this.ctor.body.unshift(new Literal("" + lhs + " = " + (utility('bind')) + "(" + lhs + ", this)"));
      }
    };

    Class.prototype.addProperties = function(node, name, o) {
      var assign, base, exprs, func, props;
      props = node.base.properties.slice(0);
      exprs = (function() {
        var _results;
        _results = [];
        while (assign = props.shift()) {
          if (assign instanceof Assign) {
            base = assign.variable.base;
            delete assign.context;
            func = assign.value;
            if (base.value === 'constructor') {
              if (this.ctor) {
                assign.error('cannot define more than one constructor in a class');
              }
              if (func.bound) {
                assign.error('cannot define a constructor as a bound function');
              }
              if (func instanceof Code) {
                assign = this.ctor = func;
              } else {
                this.externalCtor = o.classScope.freeVariable('class');
                assign = new Assign(new Literal(this.externalCtor), func);
              }
            } else {
              if (assign.variable["this"]) {
                func["static"] = true;
              } else {
                assign.variable = new Value(new Literal(name), [new Access(new Literal('prototype')), new Access(base)]);
                if (func instanceof Code && func.bound) {
                  this.boundFuncs.push(base);
                  func.bound = false;
                }
              }
            }
          }
          _results.push(assign);
        }
        return _results;
      }).call(this);
      return compact(exprs);
    };

    Class.prototype.walkBody = function(name, o) {
      return this.traverseChildren(false, (function(_this) {
        return function(child) {
          var cont, exps, i, node, _i, _len, _ref2;
          cont = true;
          if (child instanceof Class) {
            return false;
          }
          if (child instanceof Block) {
            _ref2 = exps = child.expressions;
            for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
              node = _ref2[i];
              if (node instanceof Assign && node.variable.looksStatic(name)) {
                node.value["static"] = true;
              } else if (node instanceof Value && node.isObject(true)) {
                cont = false;
                exps[i] = _this.addProperties(node, name, o);
              }
            }
            child.expressions = exps = flatten(exps);
          }
          return cont && !(child instanceof Class);
        };
      })(this));
    };

    Class.prototype.hoistDirectivePrologue = function() {
      var expressions, index, node;
      index = 0;
      expressions = this.body.expressions;
      while ((node = expressions[index]) && node instanceof Comment || node instanceof Value && node.isString()) {
        ++index;
      }
      return this.directives = expressions.splice(0, index);
    };

    Class.prototype.ensureConstructor = function(name) {
      if (!this.ctor) {
        this.ctor = new Code;
        if (this.externalCtor) {
          this.ctor.body.push(new Literal("" + this.externalCtor + ".apply(this, arguments)"));
        } else if (this.parent) {
          this.ctor.body.push(new Literal("" + name + ".__super__.constructor.apply(this, arguments)"));
        }
        this.ctor.body.makeReturn();
        this.body.expressions.unshift(this.ctor);
      }
      this.ctor.ctor = this.ctor.name = name;
      this.ctor.klass = null;
      return this.ctor.noReturn = true;
    };

    Class.prototype.compileNode = function(o) {
      var args, argumentsNode, func, jumpNode, klass, lname, name, superClass, _ref2;
      if (jumpNode = this.body.jumps()) {
        jumpNode.error('Class bodies cannot contain pure statements');
      }
      if (argumentsNode = this.body.contains(isLiteralArguments)) {
        argumentsNode.error("Class bodies shouldn't reference arguments");
      }
      name = this.determineName() || '_Class';
      if (name.reserved) {
        name = "_" + name;
      }
      lname = new Literal(name);
      func = new Code([], Block.wrap([this.body]));
      args = [];
      o.classScope = func.makeScope(o.scope);
      this.hoistDirectivePrologue();
      this.setContext(name);
      this.walkBody(name, o);
      this.ensureConstructor(name);
      this.addBoundFunctions(o);
      this.body.spaced = true;
      this.body.expressions.push(lname);
      if (this.parent) {
        superClass = new Literal(o.classScope.freeVariable('super', false));
        this.body.expressions.unshift(new Extends(lname, superClass));
        func.params.push(new Param(superClass));
        args.push(this.parent);
      }
      (_ref2 = this.body.expressions).unshift.apply(_ref2, this.directives);
      klass = new Parens(new Call(func, args));
      if (this.variable) {
        klass = new Assign(this.variable, klass);
      }
      return klass.compileToFragments(o);
    };

    return Class;

  })(Base);

  exports.Assign = Assign = (function(_super) {
    __extends(Assign, _super);

    function Assign(variable, value, context, options) {
      var forbidden, name, _ref2;
      this.variable = variable;
      this.value = value;
      this.context = context;
      Assign.__super__.constructor.call(this);
      this.param = options && options.param;
      this.subpattern = options && options.subpattern;
      forbidden = (_ref2 = (name = this.variable.unwrapAll().value), __indexOf.call(STRICT_PROSCRIBED, _ref2) >= 0);
      if (forbidden && this.context !== 'object') {
        this.variable.error("variable name may not be \"" + name + "\"");
      }
      this.icedlocal = options && options.icedlocal;
    }

    Assign.prototype.children = ['variable', 'value'];

    Assign.prototype.isStatement = function(o) {
      return (o != null ? o.level : void 0) === LEVEL_TOP && (this.context != null) && __indexOf.call(this.context, "?") >= 0;
    };

    Assign.prototype.assigns = function(name) {
      return this[this.context === 'object' ? 'value' : 'variable'].assigns(name);
    };

    Assign.prototype.unfoldSoak = function(o) {
      return unfoldSoak(o, this, 'variable');
    };

    Assign.prototype.compileNode = function(o) {
      var answer, compiledName, isValue, match, name, val, varBase, _ref2, _ref3, _ref4, _ref5;
      this.value.icedStatementAssertion();
      if (isValue = this.variable instanceof Value) {
        if (this.variable.isArray() || this.variable.isObject()) {
          return this.compilePatternMatch(o);
        }
        if (this.variable.isSplice()) {
          return this.compileSplice(o);
        }
        if ((_ref2 = this.context) === '||=' || _ref2 === '&&=' || _ref2 === '?=') {
          return this.compileConditional(o);
        }
        if ((_ref3 = this.context) === '**=' || _ref3 === '//=' || _ref3 === '%%=') {
          return this.compileSpecialMath(o);
        }
      }
      compiledName = this.variable.compileToFragments(o, LEVEL_LIST);
      name = fragmentsToText(compiledName);
      if (!this.context) {
        varBase = this.variable.unwrapAll();
        if (!varBase.isAssignable()) {
          this.variable.error("\"" + (this.variable.compile(o)) + "\" cannot be assigned");
        }
        if (!(typeof varBase.hasProperties === "function" ? varBase.hasProperties() : void 0)) {
          if (this.param || this.icedlocal) {
            o.scope.add(name, 'var', this.icedlocal);
          } else {
            o.scope.find(name);
          }
        }
      }
      if (this.value instanceof Code && (match = METHOD_DEF.exec(name))) {
        if (match[2]) {
          this.value.klass = match[1];
        }
        this.value.name = (_ref4 = (_ref5 = match[3]) != null ? _ref5 : match[4]) != null ? _ref4 : match[5];
      }
      val = this.value.compileToFragments(o, LEVEL_LIST);
      if (this.context === 'object') {
        return compiledName.concat(this.makeCode(": "), val);
      }
      answer = compiledName.concat(this.makeCode(" " + (this.context || '=') + " "), val);
      if (o.level <= LEVEL_LIST) {
        return answer;
      } else {
        return this.wrapInBraces(answer);
      }
    };

    Assign.prototype.compilePatternMatch = function(o) {
      var acc, assigns, code, expandedIdx, fragments, i, idx, isObject, ivar, name, obj, objects, olen, ref, rest, top, val, value, vvar, vvarText, _i, _len, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
      top = o.level === LEVEL_TOP;
      value = this.value;
      objects = this.variable.base.objects;
      if (!(olen = objects.length)) {
        code = value.compileToFragments(o);
        if (o.level >= LEVEL_OP) {
          return this.wrapInBraces(code);
        } else {
          return code;
        }
      }
      isObject = this.variable.isObject();
      if (top && olen === 1 && !((obj = objects[0]) instanceof Splat)) {
        if (obj instanceof Assign) {
          _ref2 = obj, (_ref3 = _ref2.variable, idx = _ref3.base), obj = _ref2.value;
        } else {
          idx = isObject ? obj["this"] ? obj.properties[0].name : obj : new Literal(0);
        }
        acc = IDENTIFIER.test(idx.unwrap().value || 0);
        value = new Value(value);
        value.properties.push(new (acc ? Access : Index)(idx));
        if (_ref4 = obj.unwrap().value, __indexOf.call(RESERVED, _ref4) >= 0) {
          obj.error("assignment to a reserved word: " + (obj.compile(o)));
        }
        return new Assign(obj, value, null, {
          param: this.param
        }).compileToFragments(o, LEVEL_TOP);
      }
      vvar = value.compileToFragments(o, LEVEL_LIST);
      vvarText = fragmentsToText(vvar);
      assigns = [];
      expandedIdx = false;
      if (!IDENTIFIER.test(vvarText) || this.variable.assigns(vvarText)) {
        assigns.push([this.makeCode("" + (ref = o.scope.freeVariable('ref')) + " = ")].concat(__slice.call(vvar)));
        vvar = [this.makeCode(ref)];
        vvarText = ref;
      }
      for (i = _i = 0, _len = objects.length; _i < _len; i = ++_i) {
        obj = objects[i];
        idx = i;
        if (isObject) {
          if (obj instanceof Assign) {
            _ref5 = obj, (_ref6 = _ref5.variable, idx = _ref6.base), obj = _ref5.value;
          } else {
            if (obj.base instanceof Parens) {
              _ref7 = new Value(obj.unwrapAll()).cacheReference(o), obj = _ref7[0], idx = _ref7[1];
            } else {
              idx = obj["this"] ? obj.properties[0].name : obj;
            }
          }
        }
        if (!expandedIdx && obj instanceof Splat) {
          name = obj.name.unwrap().value;
          obj = obj.unwrap();
          val = "" + olen + " <= " + vvarText + ".length ? " + (utility('slice')) + ".call(" + vvarText + ", " + i;
          if (rest = olen - i - 1) {
            ivar = o.scope.freeVariable('i');
            val += ", " + ivar + " = " + vvarText + ".length - " + rest + ") : (" + ivar + " = " + i + ", [])";
          } else {
            val += ") : []";
          }
          val = new Literal(val);
          expandedIdx = "" + ivar + "++";
        } else if (!expandedIdx && obj instanceof Expansion) {
          if (rest = olen - i - 1) {
            if (rest === 1) {
              expandedIdx = "" + vvarText + ".length - 1";
            } else {
              ivar = o.scope.freeVariable('i');
              val = new Literal("" + ivar + " = " + vvarText + ".length - " + rest);
              expandedIdx = "" + ivar + "++";
              assigns.push(val.compileToFragments(o, LEVEL_LIST));
            }
          }
          continue;
        } else {
          name = obj.unwrap().value;
          if (obj instanceof Splat || obj instanceof Expansion) {
            obj.error("multiple splats/expansions are disallowed in an assignment");
          }
          if (typeof idx === 'number') {
            idx = new Literal(expandedIdx || idx);
            acc = false;
          } else {
            acc = isObject && IDENTIFIER.test(idx.unwrap().value || 0);
          }
          val = new Value(new Literal(vvarText), [new (acc ? Access : Index)(idx)]);
        }
        if ((name != null) && __indexOf.call(RESERVED, name) >= 0) {
          obj.error("assignment to a reserved word: " + (obj.compile(o)));
        }
        assigns.push(new Assign(obj, val, null, {
          param: this.param,
          subpattern: true
        }).compileToFragments(o, LEVEL_LIST));
      }
      if (!(top || this.subpattern)) {
        assigns.push(vvar);
      }
      fragments = this.joinFragmentArrays(assigns, ', ');
      if (o.level < LEVEL_LIST) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    Assign.prototype.compileConditional = function(o) {
      var fragments, left, right, _ref2;
      _ref2 = this.variable.cacheReference(o), left = _ref2[0], right = _ref2[1];
      if (!left.properties.length && left.base instanceof Literal && left.base.value !== "this" && !o.scope.check(left.base.value)) {
        this.variable.error("the variable \"" + left.base.value + "\" can't be assigned with " + this.context + " because it has not been declared before");
      }
      if (__indexOf.call(this.context, "?") >= 0) {
        o.isExistentialEquals = true;
        return new If(new Existence(left), right, {
          type: 'if'
        }).addElse(new Assign(right, this.value, '=')).compileToFragments(o);
      } else {
        fragments = new Op(this.context.slice(0, -1), left, new Assign(right, this.value, '=')).compileToFragments(o);
        if (o.level <= LEVEL_LIST) {
          return fragments;
        } else {
          return this.wrapInBraces(fragments);
        }
      }
    };

    Assign.prototype.compileSpecialMath = function(o) {
      var left, right, _ref2;
      _ref2 = this.variable.cacheReference(o), left = _ref2[0], right = _ref2[1];
      return new Assign(left, new Op(this.context.slice(0, -1), right, this.value)).compileToFragments(o);
    };

    Assign.prototype.compileSplice = function(o) {
      var answer, exclusive, from, fromDecl, fromRef, name, to, valDef, valRef, _ref2, _ref3, _ref4;
      _ref2 = this.variable.properties.pop().range, from = _ref2.from, to = _ref2.to, exclusive = _ref2.exclusive;
      name = this.variable.compile(o);
      if (from) {
        _ref3 = this.cacheToCodeFragments(from.cache(o, LEVEL_OP)), fromDecl = _ref3[0], fromRef = _ref3[1];
      } else {
        fromDecl = fromRef = '0';
      }
      if (to) {
        if (from instanceof Value && from.isSimpleNumber() && to instanceof Value && to.isSimpleNumber()) {
          to = to.compile(o) - fromRef;
          if (!exclusive) {
            to += 1;
          }
        } else {
          to = to.compile(o, LEVEL_ACCESS) + ' - ' + fromRef;
          if (!exclusive) {
            to += ' + 1';
          }
        }
      } else {
        to = "9e9";
      }
      _ref4 = this.value.cache(o, LEVEL_LIST), valDef = _ref4[0], valRef = _ref4[1];
      answer = [].concat(this.makeCode("[].splice.apply(" + name + ", [" + fromDecl + ", " + to + "].concat("), valDef, this.makeCode(")), "), valRef);
      if (o.level > LEVEL_TOP) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    return Assign;

  })(Base);

  exports.Code = Code = (function(_super) {
    __extends(Code, _super);

    function Code(params, body, tag) {
      Code.__super__.constructor.call(this);
      this.params = params || [];
      this.body = body || new Block;
      this.icedgen = tag === 'icedgen';
      this.icedPassedDeferral = null;
      this.bound = tag === 'boundfunc' || this.icedgen;
      this.isGenerator = this.body.contains(function(node) {
        var _ref2;
        return node instanceof Op && ((_ref2 = node.operator) === 'yield' || _ref2 === 'yield*');
      });
    }

    Code.prototype.children = ['params', 'body'];

    Code.prototype.isStatement = function() {
      return !!this.ctor;
    };

    Code.prototype.jumps = NO;

    Code.prototype.makeScope = function(parentScope) {
      return new Scope(parentScope, this.body, this);
    };

    Code.prototype.compileNode = function(o) {
      var answer, boundfunc, code, exprs, i, lit, p, param, params, ref, splats, uniqs, val, wasEmpty, wrapper, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _m, _n, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
      if (this.bound && ((_ref2 = o.scope.method) != null ? _ref2.bound : void 0)) {
        this.context = o.scope.method.context;
      }
      if (this.bound && !this.context) {
        this.context = '_this';
        wrapper = new Code([new Param(new Literal(this.context))], new Block([this]));
        boundfunc = new Call(wrapper, [new Literal('this')]);
        boundfunc.updateLocationDataIfMissing(this.locationData);
        return boundfunc.compileNode(o);
      }
      o.scope = del(o, 'classScope') || this.makeScope(o.scope);
      o.scope.shared = del(o, 'sharedScope') || this.icedgen;
      o.scope.icedgen = this.icedgen;
      o.indent += TAB;
      delete o.bare;
      delete o.isExistentialEquals;
      params = [];
      exprs = [];
      _ref3 = this.params;
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        param = _ref3[_i];
        if (!(param instanceof Expansion)) {
          o.scope.parameter(param.asReference(o));
        }
      }
      _ref4 = this.params;
      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
        param = _ref4[_j];
        if (!(param.splat || param instanceof Expansion)) {
          continue;
        }
        _ref5 = this.params;
        for (_k = 0, _len2 = _ref5.length; _k < _len2; _k++) {
          p = _ref5[_k].name;
          if (!(!(param instanceof Expansion))) {
            continue;
          }
          if (p["this"]) {
            p = p.properties[0].name;
          }
          if (p.value) {
            o.scope.add(p.value, 'var', true);
          }
        }
        splats = new Assign(new Value(new Arr((function() {
          var _l, _len3, _ref6, _results;
          _ref6 = this.params;
          _results = [];
          for (_l = 0, _len3 = _ref6.length; _l < _len3; _l++) {
            p = _ref6[_l];
            _results.push(p.asReference(o));
          }
          return _results;
        }).call(this))), new Value(new Literal('arguments')));
        break;
      }
      _ref6 = this.params;
      for (_l = 0, _len3 = _ref6.length; _l < _len3; _l++) {
        param = _ref6[_l];
        if (param.isComplex()) {
          val = ref = param.asReference(o);
          if (param.value) {
            val = new Op('?', ref, param.value);
          }
          exprs.push(new Assign(new Value(param.name), val, '=', {
            param: true
          }));
        } else {
          ref = param;
          if (param.value) {
            lit = new Literal(ref.name.value + ' == null');
            val = new Assign(new Value(param.name), param.value, '=');
            exprs.push(new If(lit, val));
          }
        }
        if (!splats) {
          params.push(ref);
        }
      }
      wasEmpty = this.body.isEmpty();
      if (splats) {
        exprs.unshift(splats);
      }
      if (exprs.length) {
        (_ref7 = this.body.expressions).unshift.apply(_ref7, exprs);
      }
      for (i = _m = 0, _len4 = params.length; _m < _len4; i = ++_m) {
        p = params[i];
        params[i] = p.compileToFragments(o);
        o.scope.parameter(fragmentsToText(params[i]));
      }
      uniqs = [];
      this.eachParamName(function(name, node) {
        if (__indexOf.call(uniqs, name) >= 0) {
          node.error("multiple parameters named '" + name + "'");
        }
        return uniqs.push(name);
      });
      if (this.icedIsAutocbCode) {
        wasEmpty = false;
      }
      if (!(wasEmpty || this.noReturn)) {
        this.body.makeReturn();
      }
      code = 'function';
      if (this.isGenerator) {
        code += '*';
      }
      if (this.ctor) {
        code += ' ' + this.name;
      }
      code += '(';
      answer = [this.makeCode(code)];
      for (i = _n = 0, _len5 = params.length; _n < _len5; i = ++_n) {
        p = params[i];
        if (i) {
          answer.push(this.makeCode(", "));
        }
        answer.push.apply(answer, p);
      }
      answer.push(this.makeCode(') {'));
      this.icedPatchBody(o);
      if (!this.body.isEmpty()) {
        answer = answer.concat(this.makeCode("\n"), this.body.compileWithDeclarations(o), this.makeCode("\n" + this.tab));
      }
      answer.push(this.makeCode('}'));
      if (this.ctor) {
        return [this.makeCode(this.tab)].concat(__slice.call(answer));
      }
      if (this.front || (o.level >= LEVEL_ACCESS)) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Code.prototype.eachParamName = function(iterator) {
      var param, _i, _len, _ref2, _results;
      _ref2 = this.params;
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        _results.push(param.eachName(iterator));
      }
      return _results;
    };

    Code.prototype.traverseChildren = function(crossScope, func) {
      if (crossScope) {
        return Code.__super__.traverseChildren.call(this, crossScope, func);
      }
    };

    Code.prototype.icedPatchBody = function(o) {
      var f, lhs, r, rhs;
      if (this.icedFoundArguments && this.icedNodeFlag) {
        o.scope.assign('_arguments', 'arguments');
      }
      if (this.icedNodeFlag && !this.icedgen) {
        this.icedPassedDeferral = o.scope.freeVariable(iced["const"].passed_deferral);
        lhs = new Value(new Literal(this.icedPassedDeferral));
        f = new Value(new Literal(iced["const"].ns));
        f.add(new Access(new Value(new Literal(iced["const"].findDeferral))));
        rhs = new Call(f, [new Value(new Literal('arguments'))]);
        this.body.unshift(new Assign(lhs, rhs));
      }
      if (this.icedNodeFlag && !this.icedgen) {
        r = this.icedIsAutocbCode ? iced["const"].autocb : iced["const"].k_noop;
        rhs = new Value(new Literal(r));
        lhs = new Value(new Literal(iced["const"].k));
        return this.body.unshift(new Assign(lhs, rhs, null, {
          icedlocal: true
        }));
      }
    };

    Code.prototype.icedWalkAst = function(parent, o) {
      var cf_prev, fa_prev, faf_prev, fg_prev, param, _i, _len, _ref2;
      this.icedParentAwait = parent;
      fa_prev = o.foundAutocb;
      cf_prev = o.currFunc;
      fg_prev = o.foundArguments;
      faf_prev = o.foundAwaitFunc;
      o.foundAutocb = false;
      o.foundArguments = false;
      o.foundAwaitFunc = false;
      o.currFunc = this;
      _ref2 = this.params;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        if (param.name instanceof Literal && param.name.value === iced["const"].autocb) {
          o.foundAutocb = true;
          break;
        }
      }
      Code.__super__.icedWalkAst.call(this, parent, o);
      this.icedHasAutocbFlag = fa_prev;
      this.icedIsAutocbCode = o.foundAutocb;
      this.icedFoundArguments = o.foundArguments;
      o.foundAwaitFunc = faf_prev;
      o.foundArguments = fg_prev;
      o.foundAutocb = fa_prev;
      o.currFunc = cf_prev;
      return false;
    };

    Code.prototype.icedWalkAstLoops = function(flood) {
      if (Code.__super__.icedWalkAstLoops.call(this, false)) {
        this.icedLoopFlag = true;
      }
      return false;
    };

    Code.prototype.icedWalkCpsPivots = function() {
      Code.__super__.icedWalkCpsPivots.call(this);
      return this.icedCpsPivotFlag = false;
    };

    Code.prototype.icedTraceName = function() {
      var parts;
      parts = [];
      if (this.klass) {
        parts.push(this.klass);
      }
      if (this.name) {
        parts.push(this.name);
      }
      return parts.join('.');
    };

    return Code;

  })(Base);

  exports.Param = Param = (function(_super) {
    __extends(Param, _super);

    function Param(name, value, splat) {
      var _ref2;
      this.name = name;
      this.value = value;
      this.splat = splat;
      Param.__super__.constructor.call(this);
      if (_ref2 = (name = this.name.unwrapAll().value), __indexOf.call(STRICT_PROSCRIBED, _ref2) >= 0) {
        this.name.error("parameter name \"" + name + "\" is not allowed");
      }
    }

    Param.prototype.children = ['name', 'value'];

    Param.prototype.compileToFragments = function(o) {
      return this.name.compileToFragments(o, LEVEL_LIST);
    };

    Param.prototype.asReference = function(o) {
      var node;
      if (this.reference) {
        return this.reference;
      }
      node = this.name;
      if (node["this"]) {
        node = node.properties[0].name;
        if (node.value.reserved) {
          node = new Literal(o.scope.freeVariable(node.value));
        }
      } else if (node.isComplex()) {
        node = new Literal(o.scope.freeVariable('arg'));
      }
      node = new Value(node);
      if (this.splat) {
        node = new Splat(node);
      }
      node.updateLocationDataIfMissing(this.locationData);
      return this.reference = node;
    };

    Param.prototype.isComplex = function() {
      return this.name.isComplex();
    };

    Param.prototype.eachName = function(iterator, name) {
      var atParam, node, obj, _i, _len, _ref2;
      if (name == null) {
        name = this.name;
      }
      atParam = function(obj) {
        var node;
        node = obj.properties[0].name;
        if (!node.value.reserved) {
          return iterator(node.value, node);
        }
      };
      if (name instanceof Literal) {
        return iterator(name.value, name);
      }
      if (name instanceof Value) {
        return atParam(name);
      }
      _ref2 = name.objects;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        obj = _ref2[_i];
        if (obj instanceof Assign) {
          this.eachName(iterator, obj.value.unwrap());
        } else if (obj instanceof Splat) {
          node = obj.name.unwrap();
          iterator(node.value, node);
        } else if (obj instanceof Value) {
          if (obj.isArray() || obj.isObject()) {
            this.eachName(iterator, obj.base);
          } else if (obj["this"]) {
            atParam(obj);
          } else {
            iterator(obj.base.value, obj.base);
          }
        } else if (!(obj instanceof Expansion)) {
          obj.error("illegal parameter " + (obj.compile()));
        }
      }
    };

    return Param;

  })(Base);

  exports.Splat = Splat = (function(_super) {
    __extends(Splat, _super);

    Splat.prototype.children = ['name'];

    Splat.prototype.isAssignable = YES;

    function Splat(name) {
      Splat.__super__.constructor.call(this);
      this.name = name.compile ? name : new Literal(name);
    }

    Splat.prototype.assigns = function(name) {
      return this.name.assigns(name);
    };

    Splat.prototype.compileToFragments = function(o) {
      return this.name.compileToFragments(o);
    };

    Splat.prototype.unwrap = function() {
      return this.name;
    };

    Splat.compileSplattedArray = function(o, list, apply) {
      var args, base, compiledNode, concatPart, fragments, i, index, node, _i, _len;
      index = -1;
      while ((node = list[++index]) && !(node instanceof Splat)) {
        continue;
      }
      if (index >= list.length) {
        return [];
      }
      if (list.length === 1) {
        node = list[0];
        fragments = node.compileToFragments(o, LEVEL_LIST);
        if (apply) {
          return fragments;
        }
        return [].concat(node.makeCode("" + (utility('slice')) + ".call("), fragments, node.makeCode(")"));
      }
      args = list.slice(index);
      for (i = _i = 0, _len = args.length; _i < _len; i = ++_i) {
        node = args[i];
        compiledNode = node.compileToFragments(o, LEVEL_LIST);
        args[i] = node instanceof Splat ? [].concat(node.makeCode("" + (utility('slice')) + ".call("), compiledNode, node.makeCode(")")) : [].concat(node.makeCode("["), compiledNode, node.makeCode("]"));
      }
      if (index === 0) {
        node = list[0];
        concatPart = node.joinFragmentArrays(args.slice(1), ', ');
        return args[0].concat(node.makeCode(".concat("), concatPart, node.makeCode(")"));
      }
      base = (function() {
        var _j, _len1, _ref2, _results;
        _ref2 = list.slice(0, index);
        _results = [];
        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
          node = _ref2[_j];
          _results.push(node.compileToFragments(o, LEVEL_LIST));
        }
        return _results;
      })();
      base = list[0].joinFragmentArrays(base, ', ');
      concatPart = list[index].joinFragmentArrays(args, ', ');
      return [].concat(list[0].makeCode("["), base, list[index].makeCode("].concat("), concatPart, (last(list)).makeCode(")"));
    };

    Splat.prototype.icedToSlot = function(i) {
      return new Slot(i, new Value(this.name), null, true);
    };

    return Splat;

  })(Base);

  exports.Expansion = Expansion = (function(_super) {
    __extends(Expansion, _super);

    function Expansion() {
      return Expansion.__super__.constructor.apply(this, arguments);
    }

    Expansion.prototype.isComplex = NO;

    Expansion.prototype.compileNode = function(o) {
      return this.error('Expansion must be used inside a destructuring assignment or parameter list');
    };

    Expansion.prototype.asReference = function(o) {
      return this;
    };

    Expansion.prototype.eachName = function(iterator) {};

    return Expansion;

  })(Base);

  exports.While = While = (function(_super) {
    __extends(While, _super);

    function While(condition, options) {
      this.condition = (options != null ? options.invert : void 0) ? condition.invert() : condition;
      this.guard = options != null ? options.guard : void 0;
    }

    While.prototype.children = ['condition', 'guard', 'body'];

    While.prototype.isStatement = YES;

    While.prototype.isLoop = YES;

    While.prototype.makeReturn = function(res) {
      if (res) {
        return While.__super__.makeReturn.apply(this, arguments);
      } else {
        this.returns = !this.jumps({
          loop: true
        });
        return this;
      }
    };

    While.prototype.addBody = function(body) {
      this.body = body;
      return this;
    };

    While.prototype.jumps = function() {
      var expressions, jumpNode, node, _i, _len;
      expressions = this.body.expressions;
      if (!expressions.length) {
        return false;
      }
      for (_i = 0, _len = expressions.length; _i < _len; _i++) {
        node = expressions[_i];
        if (jumpNode = node.jumps({
          loop: true
        })) {
          return jumpNode;
        }
      }
      return false;
    };

    While.prototype.compileNode = function(o) {
      var answer, body, rvar, set;
      this.condition.icedStatementAssertion();
      if (this.icedNodeFlag) {
        return this.icedCompileIced(o);
      }
      o.indent += TAB;
      set = '';
      body = this.body;
      if (body.isEmpty()) {
        body = this.makeCode('');
      } else {
        if (this.returns) {
          body.makeReturn(rvar = o.scope.freeVariable('results'));
          set = "" + this.tab + rvar + " = [];\n";
        }
        if (this.guard) {
          if (body.expressions.length > 1) {
            body.expressions.unshift(new If((new Parens(this.guard)).invert(), new Literal("continue")));
          } else {
            if (this.guard) {
              body = Block.wrap([new If(this.guard, body)]);
            }
          }
        }
        body = [].concat(this.makeCode("\n"), body.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab));
      }
      answer = [].concat(this.makeCode(set + this.tab + "while ("), this.condition.compileToFragments(o, LEVEL_PAREN), this.makeCode(") {"), body, this.makeCode("}"));
      if (this.returns) {
        if (this.icedHasAutocbFlag) {
          answer.push(this.makeCode("\n" + this.tab + iced["const"].autocb + "(" + rvar + ");"));
          answer.push(this.makeCode("\n" + this.tab + "return;"));
        } else {
          answer.push(this.makeCode("\n" + this.tab + "return " + rvar + ";"));
        }
      }
      return answer;
    };

    While.prototype.icedWrap = function(d) {
      var body, break_assign, break_id, cond, condition, continue_assign, continue_block, continue_block_inner, continue_body, continue_fn, continue_id, guard_if, k_id, k_param, next_assign, next_id, outStatements, top_assign, top_block, top_body, top_call, top_func, top_id, top_statements, tramp;
      condition = d.condition;
      body = d.body;
      outStatements = [];
      top_id = new Value(new Literal(iced["const"].t_while));
      k_id = new Value(new Literal(iced["const"].k));
      k_param = new Param(new Literal(iced["const"].k));
      break_id = new Value(new Literal(iced["const"].b_while));
      break_assign = new Assign(break_id, k_id, null, {
        icedlocal: true
      });
      continue_id = new Value(new Literal(iced["const"].c_while));
      continue_block_inner = new Block([new Call(top_id, [k_id])]);
      if (d.step) {
        continue_block_inner.unshift(d.step);
      }
      continue_fn = new Code([], continue_block_inner);
      tramp = new Value(new Literal(iced["const"].ns));
      tramp.add(new Access(new Value(new Literal(iced["const"].trampoline))));
      continue_block = new Block([new Call(tramp, [continue_fn])]);
      continue_body = new Code([], continue_block, 'icedgen');
      continue_assign = new Assign(continue_id, continue_body, null, {
        icedlocal: true
      });
      next_id = new Value(new Literal(iced["const"].n_while));
      next_assign = new Assign(next_id, continue_id, null, {
        icedlocal: true
      });
      cond = new If(condition.invert(), new Block([new Call(break_id, [])]));
      if (d.guard) {
        continue_block = new Block([new Call(continue_id, [])]);
        guard_if = new If(d.guard, body);
        guard_if.addElse(continue_block);
        cond.addElse(new Block([d.pre_body, guard_if]));
      } else {
        cond.addElse(new Block([d.pre_body, body]));
      }
      top_body = new Block([break_assign, continue_assign, next_assign, cond]);
      top_func = new Code([k_param], top_body, 'icedgen');
      top_assign = new Assign(top_id, top_func, null, {
        icedlocal: true
      });
      top_call = new Call(top_id, [k_id]);
      top_statements = [];
      if (d.init) {
        top_statements = top_statements.concat(d.init);
      }
      top_statements = top_statements.concat([top_assign, top_call]);
      return top_block = new Block(top_statements);
    };

    While.prototype.icedCallContinuation = function() {
      return this.body.icedThreadReturn(new IcedTailCall(iced["const"].n_while));
    };

    While.prototype.icedCompileIced = function(o) {
      var b, opts;
      opts = {
        condition: this.condition,
        body: this.body,
        guard: this.guard
      };
      b = this.icedWrap(opts);
      return b.compileNode(o);
    };

    return While;

  })(Base);

  exports.Op = Op = (function(_super) {
    var CONVERSIONS, INVERSIONS;

    __extends(Op, _super);

    function Op(op, first, second, flip) {
      Op.__super__.constructor.call(this);
      if (op === 'in') {
        return new In(first, second);
      }
      if (op === 'do') {
        return this.generateDo(first);
      }
      if (op === 'new') {
        if (first instanceof Call && !first["do"] && !first.isNew) {
          return first.newInstance();
        }
        if (first instanceof Code && first.bound || first["do"]) {
          first = new Parens(first);
        }
      }
      this.operator = CONVERSIONS[op] || op;
      this.first = first;
      this.second = second;
      this.flip = !!flip;
      return this;
    }

    CONVERSIONS = {
      '==': '===',
      '!=': '!==',
      'of': 'in',
      'yieldfrom': 'yield*'
    };

    INVERSIONS = {
      '!==': '===',
      '===': '!=='
    };

    Op.prototype.children = ['first', 'second'];

    Op.prototype.isSimpleNumber = NO;

    Op.prototype.isYield = function() {
      var _ref2;
      return (_ref2 = this.operator) === 'yield' || _ref2 === 'yield*';
    };

    Op.prototype.isUnary = function() {
      return !this.second;
    };

    Op.prototype.isComplex = function() {
      var _ref2;
      return !(this.isUnary() && ((_ref2 = this.operator) === '+' || _ref2 === '-')) || this.first.isComplex();
    };

    Op.prototype.isChainable = function() {
      var _ref2;
      return (_ref2 = this.operator) === '<' || _ref2 === '>' || _ref2 === '>=' || _ref2 === '<=' || _ref2 === '===' || _ref2 === '!==';
    };

    Op.prototype.invert = function() {
      var allInvertable, curr, fst, op, _ref2;
      if (this.isChainable() && this.first.isChainable()) {
        allInvertable = true;
        curr = this;
        while (curr && curr.operator) {
          allInvertable && (allInvertable = curr.operator in INVERSIONS);
          curr = curr.first;
        }
        if (!allInvertable) {
          return new Parens(this).invert();
        }
        curr = this;
        while (curr && curr.operator) {
          curr.invert = !curr.invert;
          curr.operator = INVERSIONS[curr.operator];
          curr = curr.first;
        }
        return this;
      } else if (op = INVERSIONS[this.operator]) {
        this.operator = op;
        if (this.first.unwrap() instanceof Op) {
          this.first.invert();
        }
        return this;
      } else if (this.second) {
        return new Parens(this).invert();
      } else if (this.operator === '!' && (fst = this.first.unwrap()) instanceof Op && ((_ref2 = fst.operator) === '!' || _ref2 === 'in' || _ref2 === 'instanceof')) {
        return fst;
      } else {
        return new Op('!', this);
      }
    };

    Op.prototype.unfoldSoak = function(o) {
      var _ref2;
      return ((_ref2 = this.operator) === '++' || _ref2 === '--' || _ref2 === 'delete') && unfoldSoak(o, this, 'first');
    };

    Op.prototype.generateDo = function(exp) {
      var call, func, param, passedParams, ref, _i, _len, _ref2;
      passedParams = [];
      func = exp instanceof Assign && (ref = exp.value.unwrap()) instanceof Code ? ref : exp;
      _ref2 = func.params || [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        if (param.value) {
          passedParams.push(param.value);
          delete param.value;
        } else {
          passedParams.push(param);
        }
      }
      call = new Call(exp, passedParams);
      call["do"] = true;
      return call;
    };

    Op.prototype.compileNode = function(o) {
      var answer, isChain, lhs, rhs, _ref2, _ref3;
      isChain = this.isChainable() && this.first.isChainable();
      if (!isChain) {
        this.first.front = this.front;
      }
      if (this.operator === 'delete' && o.scope.check(this.first.unwrapAll().value)) {
        this.error('delete operand may not be argument or var');
      }
      if (((_ref2 = this.operator) === '--' || _ref2 === '++') && (_ref3 = this.first.unwrapAll().value, __indexOf.call(STRICT_PROSCRIBED, _ref3) >= 0)) {
        this.error("cannot increment/decrement \"" + (this.first.unwrapAll().value) + "\"");
      }
      if (this.isYield()) {
        return this.compileYield(o);
      }
      if (this.isUnary()) {
        return this.compileUnary(o);
      }
      if (isChain) {
        return this.compileChain(o);
      }
      switch (this.operator) {
        case '?':
          return this.compileExistence(o);
        case '**':
          return this.compilePower(o);
        case '//':
          return this.compileFloorDivision(o);
        case '%%':
          return this.compileModulo(o);
        default:
          lhs = this.first.compileToFragments(o, LEVEL_OP);
          rhs = this.second.compileToFragments(o, LEVEL_OP);
          answer = [].concat(lhs, this.makeCode(" " + this.operator + " "), rhs);
          if (o.level <= LEVEL_OP) {
            return answer;
          } else {
            return this.wrapInBraces(answer);
          }
      }
    };

    Op.prototype.compileChain = function(o) {
      var fragments, fst, shared, _ref2;
      _ref2 = this.first.second.cache(o), this.first.second = _ref2[0], shared = _ref2[1];
      fst = this.first.compileToFragments(o, LEVEL_OP);
      fragments = fst.concat(this.makeCode(" " + (this.invert ? '&&' : '||') + " "), shared.compileToFragments(o), this.makeCode(" " + this.operator + " "), this.second.compileToFragments(o, LEVEL_OP));
      return this.wrapInBraces(fragments);
    };

    Op.prototype.compileExistence = function(o) {
      var fst, ref;
      if (this.first.isComplex()) {
        ref = new Literal(o.scope.freeVariable('ref'));
        fst = new Parens(new Assign(ref, this.first));
      } else {
        fst = this.first;
        ref = fst;
      }
      return new If(new Existence(fst), ref, {
        type: 'if'
      }).addElse(this.second).compileToFragments(o);
    };

    Op.prototype.compileUnary = function(o) {
      var op, parts, plusMinus;
      parts = [];
      op = this.operator;
      parts.push([this.makeCode(op)]);
      if (op === '!' && this.first instanceof Existence) {
        this.first.negated = !this.first.negated;
        return this.first.compileToFragments(o);
      }
      if (o.level >= LEVEL_ACCESS) {
        return (new Parens(this)).compileToFragments(o);
      }
      plusMinus = op === '+' || op === '-';
      if ((op === 'new' || op === 'typeof' || op === 'delete') || plusMinus && this.first instanceof Op && this.first.operator === op) {
        parts.push([this.makeCode(' ')]);
      }
      if ((plusMinus && this.first instanceof Op) || (op === 'new' && this.first.isStatement(o))) {
        this.first = new Parens(this.first);
      }
      parts.push(this.first.compileToFragments(o, LEVEL_OP));
      if (this.flip) {
        parts.reverse();
      }
      return this.joinFragmentArrays(parts, '');
    };

    Op.prototype.compileYield = function(o) {
      var op, parts;
      parts = [];
      op = this.operator;
      if (o.scope.parent == null) {
        this.error('yield statements must occur within a function generator.');
      }
      if (__indexOf.call(Object.keys(this.first), 'expression') >= 0) {
        if (this.first.expression != null) {
          parts.push(this.first.expression.compileToFragments(o, LEVEL_OP));
        }
      } else {
        parts.push([this.makeCode("(" + op + " ")]);
        parts.push(this.first.compileToFragments(o, LEVEL_OP));
        parts.push([this.makeCode(")")]);
      }
      return this.joinFragmentArrays(parts, '');
    };

    Op.prototype.compilePower = function(o) {
      var pow;
      pow = new Value(new Literal('Math'), [new Access(new Literal('pow'))]);
      return new Call(pow, [this.first, this.second]).compileToFragments(o);
    };

    Op.prototype.compileFloorDivision = function(o) {
      var div, floor;
      floor = new Value(new Literal('Math'), [new Access(new Literal('floor'))]);
      div = new Op('/', this.first, this.second);
      return new Call(floor, [div]).compileToFragments(o);
    };

    Op.prototype.compileModulo = function(o) {
      var mod;
      mod = new Value(new Literal(utility('modulo')));
      return new Call(mod, [this.first, this.second]).compileToFragments(o);
    };

    Op.prototype.toString = function(idt) {
      return Op.__super__.toString.call(this, idt, this.constructor.name + ' ' + this.operator);
    };

    Op.prototype.icedWrapContinuation = function() {
      return this.icedCallContinuationFlag;
    };

    return Op;

  })(Base);

  exports.In = In = (function(_super) {
    __extends(In, _super);

    function In(object, array) {
      this.object = object;
      this.array = array;
      In.__super__.constructor.call(this);
    }

    In.prototype.children = ['object', 'array'];

    In.prototype.invert = NEGATE;

    In.prototype.compileNode = function(o) {
      var hasSplat, obj, _i, _len, _ref2;
      if (this.array instanceof Value && this.array.isArray() && this.array.base.objects.length) {
        _ref2 = this.array.base.objects;
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          obj = _ref2[_i];
          if (!(obj instanceof Splat)) {
            continue;
          }
          hasSplat = true;
          break;
        }
        if (!hasSplat) {
          return this.compileOrTest(o);
        }
      }
      return this.compileLoopTest(o);
    };

    In.prototype.compileOrTest = function(o) {
      var cmp, cnj, i, item, ref, sub, tests, _i, _len, _ref2, _ref3, _ref4;
      _ref2 = this.object.cache(o, LEVEL_OP), sub = _ref2[0], ref = _ref2[1];
      _ref3 = this.negated ? [' !== ', ' && '] : [' === ', ' || '], cmp = _ref3[0], cnj = _ref3[1];
      tests = [];
      _ref4 = this.array.base.objects;
      for (i = _i = 0, _len = _ref4.length; _i < _len; i = ++_i) {
        item = _ref4[i];
        if (i) {
          tests.push(this.makeCode(cnj));
        }
        tests = tests.concat((i ? ref : sub), this.makeCode(cmp), item.compileToFragments(o, LEVEL_ACCESS));
      }
      if (o.level < LEVEL_OP) {
        return tests;
      } else {
        return this.wrapInBraces(tests);
      }
    };

    In.prototype.compileLoopTest = function(o) {
      var fragments, ref, sub, _ref2;
      _ref2 = this.object.cache(o, LEVEL_LIST), sub = _ref2[0], ref = _ref2[1];
      fragments = [].concat(this.makeCode(utility('indexOf') + ".call("), this.array.compileToFragments(o, LEVEL_LIST), this.makeCode(", "), ref, this.makeCode(") " + (this.negated ? '< 0' : '>= 0')));
      if (fragmentsToText(sub) === fragmentsToText(ref)) {
        return fragments;
      }
      fragments = sub.concat(this.makeCode(', '), fragments);
      if (o.level < LEVEL_LIST) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    In.prototype.toString = function(idt) {
      return In.__super__.toString.call(this, idt, this.constructor.name + (this.negated ? '!' : ''));
    };

    return In;

  })(Base);

  exports.Slot = Slot = (function(_super) {
    __extends(Slot, _super);

    function Slot(index, value, suffix, splat) {
      Slot.__super__.constructor.call(this);
      this.index = index;
      this.value = value;
      this.suffix = suffix;
      this.splat = splat;
      this.access = null;
    }

    Slot.prototype.addAccess = function(a) {
      this.access = a;
      return this;
    };

    Slot.prototype.children = ['value', 'suffix'];

    return Slot;

  })(Base);

  exports.Defer = Defer = (function(_super) {
    __extends(Defer, _super);

    function Defer(args, lineno) {
      var a, i;
      this.lineno = lineno;
      Defer.__super__.constructor.call(this);
      this.slots = flatten((function() {
        var _i, _len, _results;
        _results = [];
        for (i = _i = 0, _len = args.length; _i < _len; i = ++_i) {
          a = args[i];
          _results.push(a.icedToSlot(i));
        }
        return _results;
      })());
      this.params = [];
      this.vars = [];
      this.custom = false;
    }

    Defer.prototype.children = ['slots'];

    Defer.prototype.setCustom = function() {
      this.custom = true;
      return this;
    };

    Defer.prototype.newParam = function() {
      var l;
      l = "" + iced["const"].slot + "_" + (this.params.length + 1);
      this.params.push(new Param(new Literal(l)));
      return new Value(new Literal(l));
    };

    Defer.prototype.makeAssignFn = function(o) {
      var a, args, assign, assignments, block, call, func, i, i_lit, inner_fn, lit, outer_block, outer_fn, prop, s, slot, _i, _len, _ref2;
      if (this.slots.length === 0) {
        return null;
      }
      assignments = [];
      args = [];
      i = 0;
      _ref2 = this.slots;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        s = _ref2[_i];
        i = s.index;
        a = new Value(new Literal("arguments"));
        i_lit = new Value(new Literal(i));
        if (s.splat) {
          func = new Value(new Literal(utility('slice')));
          func.add(new Access(new Value(new Literal('call'))));
          call = new Call(func, [a, i_lit]);
          slot = s.value;
          this.vars.push(slot);
          assign = new Assign(slot, call);
        } else {
          a.add(new Index(i_lit));
          if (s.access) {
            a.add(s.access);
          }
          if (!s.suffix) {
            lit = s.value.compile(o, LEVEL_TOP);
            if (lit === "_") {
              slot = new Value(new Literal(iced["const"].deferrals));
              slot.add(new Access(new Value(new Literal(iced["const"].retslot))));
            } else {
              slot = s.value;
              this.vars.push(slot);
            }
          } else {
            args.push(s.value);
            slot = this.newParam();
            if (s.suffix instanceof Index) {
              prop = new Index(this.newParam());
              args.push(s.suffix.index);
            } else {
              prop = s.suffix;
            }
            slot.add(prop);
          }
          assign = new Assign(slot, a);
        }
        assignments.push(assign);
      }
      block = new Block(assignments);
      inner_fn = new Code([], block, 'icedgen');
      outer_block = new Block([new Return(inner_fn)]);
      outer_fn = new Code(this.params, outer_block, 'icedgen');
      return call = new Call(outer_fn, args);
    };

    Defer.prototype.transform = function(o) {
      var assign_fn, assignments, context_assign, context_lhs, context_rhs, fn, ln_assign, ln_lhs, ln_rhs, meth;
      meth = new Value(new Literal(iced["const"].defer_method));
      if (this.custom) {
        fn = meth;
      } else {
        fn = new Value(new Literal(iced["const"].deferrals));
        fn.add(new Access(meth));
      }
      assignments = [];
      if ((assign_fn = this.makeAssignFn(o))) {
        assignments.push(new Assign(new Value(new Literal(iced["const"].assign_fn)), assign_fn, "object"));
      }
      ln_lhs = new Value(new Literal(iced["const"].lineno));
      ln_rhs = new Value(new Literal(this.lineno));
      ln_assign = new Assign(ln_lhs, ln_rhs, "object");
      assignments.push(ln_assign);
      if (this.custom) {
        context_lhs = new Value(new Literal(iced["const"].context));
        context_rhs = new Value(new Literal(iced["const"].deferrals));
        context_assign = new Assign(context_lhs, context_rhs, "object");
        assignments.push(context_assign);
      }
      o = new Obj(assignments);
      return new Call(fn, [new Value(o)]);
    };

    Defer.prototype.compileNode = function(o) {
      var call, name, scope, v, _i, _len, _ref2;
      call = this.transform(o);
      _ref2 = this.vars;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        v = _ref2[_i];
        name = v.compile(o, LEVEL_LIST);
        scope = o.scope;
        scope.find(name, 'var');
      }
      return call.compileNode(o);
    };

    Defer.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      o.foundDefer = true;
      this.parentFunc = o.currFunc;
      return Defer.__super__.icedWalkAst.call(this, p, o);
    };

    return Defer;

  })(Base);

  quote_path_for_emission = function(n) {
    return '"' + n.replace(/\\/g, '\\\\') + '"';
  };

  quote_funcname_for_debug = function(n) {
    return '"' + n.replace(/["']/g, '') + '"';
  };

  require_top_dir = function() {
    return quote_path_for_emission(pathmod.join(__dirname, "..", ".."));
  };

  exports.Await = Await = (function(_super) {
    __extends(Await, _super);

    function Await(body) {
      this.body = body;
      Await.__super__.constructor.call(this);
    }

    Await.prototype.transform = function(o) {
      var assign, assignments, body, call, cb_assignment, cb_lhs, cb_rhs, cls, fn_assignment, fn_lhs, fn_rhs, func_assignment, func_lhs, func_rhs, lhs, meth, n, name, rhs, trace, _ref2, _ref3;
      body = this.body;
      name = iced["const"].deferrals;
      o.scope.add(name, 'var');
      lhs = new Value(new Literal(name));
      cls = new Value(new Literal(iced["const"].ns));
      cls.add(new Access(new Value(new Literal(iced["const"].Deferrals))));
      assignments = [];
      if (n = (_ref2 = this.parentFunc) != null ? _ref2.icedPassedDeferral : void 0) {
        cb_lhs = new Value(new Literal(iced["const"].parent));
        cb_rhs = new Value(new Literal(n));
        cb_assignment = new Assign(cb_lhs, cb_rhs, "object");
        assignments.push(cb_assignment);
      }
      if (o.filename != null) {
        fn_lhs = new Value(new Literal(iced["const"].filename));
        fn_rhs = new Value(new Literal(quote_path_for_emission(o.filename)));
        fn_assignment = new Assign(fn_lhs, fn_rhs, "object");
        assignments.push(fn_assignment);
      }
      if (n = (_ref3 = this.parentFunc) != null ? _ref3.icedTraceName() : void 0) {
        func_lhs = new Value(new Literal(iced["const"].funcname));
        func_rhs = new Value(new Literal(quote_funcname_for_debug(n)));
        func_assignment = new Assign(func_lhs, func_rhs, "object");
        assignments.push(func_assignment);
      }
      trace = new Obj(assignments, true);
      call = new Call(cls, [new Value(new Literal(iced["const"].k)), trace]);
      rhs = new Op("new", call);
      assign = new Assign(lhs, rhs);
      body.unshift(assign);
      meth = lhs.copy().add(new Access(new Value(new Literal(iced["const"].fulfill))));
      call = new Call(meth, []);
      body.push(call);
      return this.body = body;
    };

    Await.prototype.children = ['body'];

    Await.prototype.isStatement = function() {
      return YES;
    };

    Await.prototype.makeReturn = THIS;

    Await.prototype.compileNode = function(o) {
      this.transform(o);
      return this.body.compileNode(o);
    };

    Await.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      this.parentFunc = o.currFunc;
      p = p || this;
      this.icedParentAwait = p;
      Await.__super__.icedWalkAst.call(this, p, o);
      return this.icedNodeFlag = o.foundAwaitFunc = o.foundAwait = true;
    };

    return Await;

  })(Base);

  IcedRuntime = (function(_super) {
    __extends(IcedRuntime, _super);

    function IcedRuntime(foundDefer, foundAwait) {
      this.foundDefer = foundDefer;
      this.foundAwait = foundAwait;
      IcedRuntime.__super__.constructor.call(this);
    }

    IcedRuntime.prototype.compileNode = function(o, level) {
      var access, accessname, assign, call, callv, file, inc, interp, k, klass, lhs_vec, ns, qmodname, req, rhs, v, val, window_mode, window_val, _i, _j, _len, _len1, _ref2;
      this.expressions = [];
      v = o.runtime ? o.runtime : o.bare ? "none" : this.foundDefer ? "node" : "none";
      if (o.runtime && !this.foundDefer && !o.runforce) {
        v = "none";
      }
      window_mode = false;
      window_val = null;
      inc = null;
      inc = (function() {
        switch (v) {
          case "inline":
          case "window":
            if (v === "window") {
              window_mode = true;
            }
            if (window_mode) {
              window_val = new Value(new Literal(v));
            }
            return InlineRuntime.generate(window_val ? window_val.copy() : null);
          case "node":
          case "browserify":
          case "interp":
            interp = v === "interp";
            qmodname = interp ? require_top_dir() : "'iced-runtime'";
            accessname = iced["const"].ns;
            file = new Literal(qmodname);
            access = new Access(new Literal(accessname));
            req = new Value(new Literal("require"));
            call = new Call(req, [file]);
            callv = new Value(call);
            if (interp) {
              callv.add(access);
            }
            ns = new Value(new Literal(iced["const"].ns));
            return new Assign(ns, callv);
          case "none":
            return null;
          default:
            throw SyntaxError("unexpected flag IcedRuntime " + v);
        }
      })();
      if (inc) {
        this.push(inc);
      }
      if (this.foundAwait) {
        rhs = new Code([], new Block([]));
        lhs_vec = [];
        _ref2 = [iced["const"].k_noop, iced["const"].k];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          k = _ref2[_i];
          val = new Value(new Literal(k));
          if (window_val) {
            klass = window_val.copy();
            klass.add(new Access(val));
            val = klass;
          }
          lhs_vec.push(val);
        }
        assign = rhs;
        for (_j = 0, _len1 = lhs_vec.length; _j < _len1; _j++) {
          v = lhs_vec[_j];
          assign = new Assign(v, assign);
        }
        this.push(assign);
      }
      if (this.isEmpty()) {
        return [];
      } else {
        return IcedRuntime.__super__.compileNode.call(this, o);
      }
    };

    IcedRuntime.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      return IcedRuntime.__super__.icedWalkAst.call(this, p, o);
    };

    return IcedRuntime;

  })(Block);

  exports.Try = Try = (function(_super) {
    __extends(Try, _super);

    function Try(attempt, errorVariable, recovery, ensure) {
      this.attempt = attempt;
      this.errorVariable = errorVariable;
      this.recovery = recovery;
      this.ensure = ensure;
    }

    Try.prototype.children = ['attempt', 'recovery', 'ensure'];

    Try.prototype.isStatement = YES;

    Try.prototype.jumps = function(o) {
      var _ref2;
      return this.attempt.jumps(o) || ((_ref2 = this.recovery) != null ? _ref2.jumps(o) : void 0);
    };

    Try.prototype.makeReturn = function(res) {
      if (this.attempt) {
        this.attempt = this.attempt.makeReturn(res);
      }
      if (this.recovery) {
        this.recovery = this.recovery.makeReturn(res);
      }
      return this;
    };

    Try.prototype.compileNode = function(o) {
      var catchPart, ensurePart, placeholder, tryPart;
      o.indent += TAB;
      tryPart = this.attempt.compileToFragments(o, LEVEL_TOP);
      catchPart = this.recovery ? (placeholder = new Literal('_error'), this.errorVariable ? this.recovery.unshift(new Assign(this.errorVariable, placeholder)) : void 0, [].concat(this.makeCode(" catch ("), placeholder.compileToFragments(o), this.makeCode(") {\n"), this.recovery.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab + "}"))) : !(this.ensure || this.recovery) ? [this.makeCode(' catch (_error) {}')] : [];
      ensurePart = this.ensure ? [].concat(this.makeCode(" finally {\n"), this.ensure.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab + "}")) : [];
      return [].concat(this.makeCode("" + this.tab + "try {\n"), tryPart, this.makeCode("\n" + this.tab + "}"), catchPart, ensurePart);
    };

    return Try;

  })(Base);

  exports.Throw = Throw = (function(_super) {
    __extends(Throw, _super);

    function Throw(expression) {
      this.expression = expression;
      Throw.__super__.constructor.call(this);
    }

    Throw.prototype.children = ['expression'];

    Throw.prototype.isStatement = YES;

    Throw.prototype.jumps = NO;

    Throw.prototype.makeReturn = THIS;

    Throw.prototype.compileNode = function(o) {
      return [].concat(this.makeCode(this.tab + "throw "), this.expression.compileToFragments(o), this.makeCode(";"));
    };

    return Throw;

  })(Base);

  exports.Existence = Existence = (function(_super) {
    __extends(Existence, _super);

    function Existence(expression) {
      this.expression = expression;
      Existence.__super__.constructor.call(this);
    }

    Existence.prototype.children = ['expression'];

    Existence.prototype.invert = NEGATE;

    Existence.prototype.compileNode = function(o) {
      var cmp, cnj, code, _ref2;
      this.expression.front = this.front;
      code = this.expression.compile(o, LEVEL_OP);
      if (IDENTIFIER.test(code) && !o.scope.check(code)) {
        _ref2 = this.negated ? ['===', '||'] : ['!==', '&&'], cmp = _ref2[0], cnj = _ref2[1];
        code = "typeof " + code + " " + cmp + " \"undefined\" " + cnj + " " + code + " " + cmp + " null";
      } else {
        code = "" + code + " " + (this.negated ? '==' : '!=') + " null";
      }
      return [this.makeCode(o.level <= LEVEL_COND ? code : "(" + code + ")")];
    };

    return Existence;

  })(Base);

  exports.Parens = Parens = (function(_super) {
    __extends(Parens, _super);

    function Parens(body) {
      this.body = body;
      Parens.__super__.constructor.call(this);
    }

    Parens.prototype.children = ['body'];

    Parens.prototype.unwrap = function() {
      return this.body;
    };

    Parens.prototype.isComplex = function() {
      return this.body.isComplex();
    };

    Parens.prototype.compileNode = function(o) {
      var bare, expr, fragments;
      expr = this.body.unwrap();
      if (expr instanceof Value && expr.isAtomic()) {
        expr.front = this.front;
        return expr.compileToFragments(o);
      }
      fragments = expr.compileToFragments(o, LEVEL_PAREN);
      bare = o.level < LEVEL_OP && (expr instanceof Op || expr instanceof Call || (expr instanceof For && expr.returns));
      if (bare) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    return Parens;

  })(Base);

  exports.For = For = (function(_super) {
    __extends(For, _super);

    function For(body, source) {
      var _ref2;
      For.__super__.constructor.call(this);
      this.source = source.source, this.guard = source.guard, this.step = source.step, this.name = source.name, this.index = source.index;
      this.body = Block.wrap([body]);
      this.own = !!source.own;
      this.object = !!source.object;
      if (this.object) {
        _ref2 = [this.index, this.name], this.name = _ref2[0], this.index = _ref2[1];
      }
      if (this.index instanceof Value) {
        this.index.error('index cannot be a pattern matching expression');
      }
      this.range = this.source instanceof Value && this.source.base instanceof Range && !this.source.properties.length;
      this.pattern = this.name instanceof Value;
      if (this.range && this.index) {
        this.index.error('indexes do not apply to range loops');
      }
      if (this.range && this.pattern) {
        this.name.error('cannot pattern match over range loops');
      }
      if (this.own && !this.object) {
        this.name.error('cannot use own with for-in');
      }
      this.returns = false;
    }

    For.prototype.children = ['body', 'source', 'guard', 'step'];

    For.prototype.compileNode = function(o) {
      var body, bodyFragments, compare, compareDown, declare, declareDown, defPart, defPartFragments, down, forPartFragments, guardPart, idt1, increment, index, ivar, kvar, kvarAssign, lastJumps, lvar, name, namePart, ref, resultPart, returnResult, rvar, scope, source, step, stepNum, stepVar, svar, varPart, _ref2, _ref3;
      body = Block.wrap([this.body]);
      lastJumps = (_ref2 = last(body.expressions)) != null ? _ref2.jumps() : void 0;
      if (lastJumps && lastJumps instanceof Return) {
        this.returns = false;
      }
      source = this.range ? this.source.base : this.source;
      scope = o.scope;
      if (!this.pattern) {
        name = this.name && (this.name.compile(o, LEVEL_LIST));
      }
      index = this.index && (this.index.compile(o, LEVEL_LIST));
      if (name && !this.pattern) {
        scope.find(name);
      }
      if (index) {
        scope.find(index);
      }
      if (this.returns) {
        rvar = scope.freeVariable('results');
      }
      ivar = (this.object && index) || scope.freeVariable('i');
      kvar = (this.range && name) || index || ivar;
      kvarAssign = kvar !== ivar ? "" + kvar + " = " : "";
      if (this.step && !this.range) {
        _ref3 = this.cacheToCodeFragments(this.step.cache(o, LEVEL_LIST)), step = _ref3[0], stepVar = _ref3[1];
        stepNum = stepVar.match(NUMBER);
      }
      if (this.pattern) {
        name = ivar;
      }
      varPart = '';
      guardPart = '';
      defPart = '';
      idt1 = this.tab + TAB;
      source.icedStatementAssertion();
      if (this.icedNodeFlag) {
        return this.icedCompileIced(o, {
          stepVar: stepVar,
          body: body,
          kvar: kvar,
          guard: this.guard
        });
      }
      if (this.range) {
        forPartFragments = source.compileToFragments(merge(o, {
          index: ivar,
          name: name,
          step: this.step
        }));
      } else {
        svar = this.source.compile(o, LEVEL_LIST);
        if ((name || this.own) && !IDENTIFIER.test(svar)) {
          defPart += "" + this.tab + (ref = scope.freeVariable('ref')) + " = " + svar + ";\n";
          svar = ref;
        }
        if (name && !this.pattern) {
          namePart = "" + name + " = " + svar + "[" + kvar + "]";
        }
        if (!this.object) {
          if (step !== stepVar) {
            defPart += "" + this.tab + step + ";\n";
          }
          if (!(this.step && stepNum && (down = parseNum(stepNum[0]) < 0))) {
            lvar = scope.freeVariable('len');
          }
          declare = "" + kvarAssign + ivar + " = 0, " + lvar + " = " + svar + ".length";
          declareDown = "" + kvarAssign + ivar + " = " + svar + ".length - 1";
          compare = "" + ivar + " < " + lvar;
          compareDown = "" + ivar + " >= 0";
          if (this.step) {
            if (stepNum) {
              if (down) {
                compare = compareDown;
                declare = declareDown;
              }
            } else {
              compare = "" + stepVar + " > 0 ? " + compare + " : " + compareDown;
              declare = "(" + stepVar + " > 0 ? (" + declare + ") : " + declareDown + ")";
            }
            increment = "" + ivar + " += " + stepVar;
          } else {
            increment = "" + (kvar !== ivar ? "++" + ivar : "" + ivar + "++");
          }
          forPartFragments = [this.makeCode("" + declare + "; " + compare + "; " + kvarAssign + increment)];
        }
      }
      if (this.returns) {
        resultPart = "" + this.tab + rvar + " = [];\n";
        returnResult = this.icedHasAutocbFlag ? "\n" + this.tab + iced["const"].autocb + "(" + rvar + "); return;" : "\n" + this.tab + "return " + rvar + ";";
        body.makeReturn(rvar);
      }
      if (this.guard) {
        if (body.expressions.length > 1) {
          body.expressions.unshift(new If((new Parens(this.guard)).invert(), new Literal("continue")));
        } else {
          if (this.guard) {
            body = Block.wrap([new If(this.guard, body)]);
          }
        }
      }
      if (this.pattern) {
        body.expressions.unshift(new Assign(this.name, new Literal("" + svar + "[" + kvar + "]")));
      }
      defPartFragments = [].concat(this.makeCode(defPart), this.pluckDirectCall(o, body));
      if (namePart) {
        varPart = "\n" + idt1 + namePart + ";";
      }
      if (this.object) {
        forPartFragments = [this.makeCode("" + kvar + " in " + svar)];
        if (this.own) {
          guardPart = "\n" + idt1 + "if (!" + (utility('hasProp')) + ".call(" + svar + ", " + kvar + ")) continue;";
        }
      }
      bodyFragments = body.compileToFragments(merge(o, {
        indent: idt1
      }), LEVEL_TOP);
      if (bodyFragments && (bodyFragments.length > 0)) {
        bodyFragments = [].concat(this.makeCode("\n"), bodyFragments, this.makeCode("\n"));
      }
      return [].concat(defPartFragments, this.makeCode("" + (resultPart || '') + this.tab + "for ("), forPartFragments, this.makeCode(") {" + guardPart + varPart), bodyFragments, this.makeCode("" + this.tab + "}" + (returnResult || '')));
    };

    For.prototype.pluckDirectCall = function(o, body) {
      var base, defs, expr, fn, idx, ref, val, _i, _len, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8;
      defs = [];
      _ref2 = body.expressions;
      for (idx = _i = 0, _len = _ref2.length; _i < _len; idx = ++_i) {
        expr = _ref2[idx];
        expr = expr.unwrapAll();
        if (!(expr instanceof Call)) {
          continue;
        }
        val = (_ref3 = expr.variable) != null ? _ref3.unwrapAll() : void 0;
        if (!((val instanceof Code) || (val instanceof Value && ((_ref4 = val.base) != null ? _ref4.unwrapAll() : void 0) instanceof Code && val.properties.length === 1 && ((_ref5 = (_ref6 = val.properties[0].name) != null ? _ref6.value : void 0) === 'call' || _ref5 === 'apply')))) {
          continue;
        }
        fn = ((_ref7 = val.base) != null ? _ref7.unwrapAll() : void 0) || val;
        ref = new Literal(o.scope.freeVariable('fn'));
        base = new Value(ref);
        if (val.base) {
          _ref8 = [base, val], val.base = _ref8[0], base = _ref8[1];
        }
        body.expressions[idx] = new Call(base, expr.args);
        defs = defs.concat(this.makeCode(this.tab), new Assign(ref, fn).compileToFragments(o, LEVEL_TOP), this.makeCode(';\n'));
      }
      return defs;
    };

    For.prototype.icedCompileIced = function(o, d) {
      var a1, a2, a3, a4, a5, a_positive, a_stepVal, b, begin, body, condition, down, empty_arr, end, excl, guard, iname, init, init_step, is_positive, is_step_positive, ival, key, key_lit, key_val, keys, keys_access, keys_len, keys_val, kval, len, len_rhs, len_val, loop_body, loop_keys, loop_source, neg, pos, positive, pre_body, ref, ref_val, ref_val_copy, scope, source_access, start_rhs, step, stepNum, stepVal, stepVar, step_var, step_var_val, _, _ref2;
      body = d.body;
      condition = null;
      init = [];
      step = null;
      scope = o.scope;
      pre_body = new Block([]);
      if (this.object) {
        ref = scope.freeVariable('ref');
        ref_val = new Value(new Literal(ref));
        a1 = new Assign(ref_val, this.source);
        keys = scope.freeVariable('keys');
        keys_val = new Value(new Literal(keys));
        key = scope.freeVariable('k');
        key_lit = new Literal(key);
        key_val = new Value(key_lit);
        empty_arr = new Value(new Arr);
        loop_body = new Block([key_val]);
        loop_source = {
          object: true,
          name: key_lit,
          source: ref_val
        };
        loop_keys = new For(loop_body, loop_source);
        a2 = new Assign(keys_val, loop_keys);
        iname = scope.freeVariable('i');
        ival = new Value(new Literal(iname));
        a3 = new Assign(ival, new Value(new Literal(0)));
        init = [a1, a2, a3];
        keys_len = keys_val.copy();
        keys_len.add(new Access(new Value(new Literal("length"))));
        condition = new Op('<', ival, keys_len);
        step = new Op('++', ival);
        if (this.name) {
          source_access = ref_val.copy();
          source_access.add(new Index(this.index));
          a5 = new Assign(this.name, source_access);
          pre_body.unshift(a5);
        }
        keys_access = keys_val.copy();
        keys_access.add(new Index(ival));
        a4 = new Assign(this.index, keys_access);
        pre_body.unshift(a4);
      } else if (this.range) {
        if (!this.name) {
          this.name = new Literal(d.kvar);
        }
        begin = new Value(new Literal(o.scope.freeVariable("begin")));
        end = new Value(new Literal(o.scope.freeVariable("end")));
        positive = new Value(new Literal(o.scope.freeVariable("positive")));
        stepVal = new Value(new Literal(o.scope.freeVariable("step")));
        if (this.step) {
          a_stepVal = new Assign(stepVal, this.step);
          a_positive = new Assign(positive, new Op(">", stepVal, new Literal(0)), null, {
            icedlocal: true
          });
        } else {
          is_positive = new Op(">", end, begin);
          a_stepVal = new If(is_positive, new Assign(stepVal, new Literal(1)));
          a_stepVal.addElse(new Assign(stepVal, new Literal(-1)));
          a_positive = new Assign(positive, is_positive, null, {
            icedlocal: true
          });
        }
        step = new Op('+=', this.name, stepVal);
        excl = this.source.base.exclusive ? "=" : '';
        pos = new Op("&&", new Op("===", positive, new Literal(true)), new Op(">" + excl, this.name, this.source.base.to));
        neg = new Op("&&", new Op("===", positive, new Literal(false)), new Op("<" + excl, this.name, this.source.base.to));
        condition = new Op("||", new Parens(pos), new Parens(neg));
        condition = condition.invert();
        init = [
          new Assign(this.name, this.source.base.from), new Assign(begin, this.source.base.from, null, {
            icedlocal: true
          }), new Assign(end, this.source.base.to, null, {
            icedlocal: true
          }), a_stepVal, a_positive
        ];
      } else if (!this.range && this.name) {
        kval = new Value(new Literal(d.kvar));
        len = scope.freeVariable('len');
        ref = scope.freeVariable('ref');
        ref_val = new Value(new Literal(ref));
        len_val = new Value(new Literal(len));
        a1 = new Assign(ref_val, this.source);
        len_rhs = ref_val.copy().add(new Access(new Value(new Literal("length"))));
        a2 = new Assign(len_val, len_rhs);
        init = [a1, a2];
        if (!this.step) {
          a3 = new Assign(kval, new Literal(0));
          step = new Op('++', kval);
          condition = new Op('<', kval, len_val);
          init.push(a3);
        } else {
          _ref2 = this.cacheToCodeFragments(this.step.cache(o, LEVEL_LIST)), _ = _ref2[0], stepVar = _ref2[1];
          stepNum = stepVar.match(NUMBER);
          if (stepNum) {
            step = new Assign(kval, new Op('+', kval, this.step));
            down = parseNum(stepNum[0]) < 0;
            if (down) {
              a3 = new Assign(kval, new Op('-', len_val, new Literal(1)));
              condition = new Op('>=', kval, new Literal(0));
            } else {
              a3 = new Assign(kval, new Literal(0));
              condition = new Op('<', kval, len_val);
            }
            init.push(a3);
          } else {
            step_var = scope.freeVariable('step');
            step_var_val = new Value(new Literal(step_var));
            init_step = new Assign(step_var_val, new Value(this.step));
            is_step_positive = new Op('>', step_var_val, new Literal(0));
            start_rhs = new If(is_step_positive, new Value(new Literal(0)));
            start_rhs.addElse(new Op('-', len_val, new Literal(1)));
            step = new Assign(kval, new Op('+', kval, step_var_val));
            a3 = new Assign(kval, start_rhs);
            condition = new Op('&&', new Op('>=', kval, new Literal(0)), new Op('<', kval, len_val));
            init.push(init_step, a3);
          }
        }
        ref_val_copy = ref_val.copy();
        ref_val_copy.add(new Index(kval));
        a4 = new Assign(this.name, ref_val_copy);
        pre_body.unshift(a4);
      }
      guard = d.guard;
      b = this.icedWrap({
        condition: condition,
        body: body,
        init: init,
        step: step,
        guard: guard,
        pre_body: pre_body
      });
      return b.compileNode(o);
    };

    return For;

  })(While);

  exports.Switch = Switch = (function(_super) {
    __extends(Switch, _super);

    function Switch(subject, cases, otherwise) {
      this.subject = subject;
      this.cases = cases;
      this.otherwise = otherwise;
      Switch.__super__.constructor.call(this);
    }

    Switch.prototype.children = ['subject', 'cases', 'otherwise'];

    Switch.prototype.isStatement = YES;

    Switch.prototype.jumps = function(o) {
      var block, conds, jumpNode, _i, _len, _ref2, _ref3, _ref4;
      if (o == null) {
        o = {
          block: true
        };
      }
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], conds = _ref3[0], block = _ref3[1];
        if (jumpNode = block.jumps(o)) {
          return jumpNode;
        }
      }
      return (_ref4 = this.otherwise) != null ? _ref4.jumps(o) : void 0;
    };

    Switch.prototype.makeReturn = function(res) {
      var pair, _i, _len, _ref2, _ref3;
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        pair = _ref2[_i];
        pair[1].makeReturn(res);
      }
      if (res) {
        this.otherwise || (this.otherwise = new Block([new Literal('void 0')]));
      }
      if ((_ref3 = this.otherwise) != null) {
        _ref3.makeReturn(res);
      }
      return this;
    };

    Switch.prototype.compileNode = function(o) {
      var block, body, cond, conditions, expr, fragments, i, idt1, idt2, _i, _j, _len, _len1, _ref2, _ref3, _ref4;
      if (this.subject) {
        this.subject.icedStatementAssertion();
      }
      idt1 = o.indent + TAB;
      idt2 = o.indent = idt1 + TAB;
      fragments = [].concat(this.makeCode(this.tab + "switch ("), (this.subject ? this.subject.compileToFragments(o, LEVEL_PAREN) : this.makeCode("false")), this.makeCode(") {\n"));
      _ref2 = this.cases;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        _ref3 = _ref2[i], conditions = _ref3[0], block = _ref3[1];
        _ref4 = flatten([conditions]);
        for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
          cond = _ref4[_j];
          if (!this.subject) {
            cond = cond.invert();
          }
          fragments = fragments.concat(this.makeCode(idt1 + "case "), cond.compileToFragments(o, LEVEL_PAREN), this.makeCode(":\n"));
        }
        if ((body = block.compileToFragments(o, LEVEL_TOP)).length > 0) {
          fragments = fragments.concat(body, this.makeCode('\n'));
        }
        if (i === this.cases.length - 1 && !this.otherwise) {
          break;
        }
        expr = this.lastNonComment(block.expressions);
        if (expr instanceof Return || (expr instanceof Literal && expr.jumps() && expr.value !== 'debugger')) {
          continue;
        }
        fragments.push(cond.makeCode(idt2 + 'break;\n'));
      }
      if (this.otherwise && this.otherwise.expressions.length) {
        fragments.push.apply(fragments, [this.makeCode(idt1 + "default:\n")].concat(__slice.call(this.otherwise.compileToFragments(o, LEVEL_TOP)), [this.makeCode("\n")]));
      }
      fragments.push(this.makeCode(this.tab + '}'));
      return fragments;
    };

    Switch.prototype.icedCallContinuation = function() {
      var block, condition, _i, _len, _ref2, _ref3;
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], condition = _ref3[0], block = _ref3[1];
        block.icedThreadReturn();
      }
      if (this.otherwise != null) {
        return this.otherwise.icedThreadReturn();
      } else {
        return this.otherwise = new Block([new IcedTailCall]);
      }
    };

    return Switch;

  })(Base);

  exports.If = If = (function(_super) {
    __extends(If, _super);

    function If(condition, body, options) {
      this.body = body;
      if (options == null) {
        options = {};
      }
      If.__super__.constructor.call(this);
      this.condition = options.type === 'unless' ? condition.invert() : condition;
      this.elseBody = null;
      this.isChain = false;
      this.soak = options.soak;
    }

    If.prototype.children = ['condition', 'body', 'elseBody'];

    If.prototype.bodyNode = function() {
      var _ref2;
      return (_ref2 = this.body) != null ? _ref2.unwrap() : void 0;
    };

    If.prototype.elseBodyNode = function() {
      var _ref2;
      return (_ref2 = this.elseBody) != null ? _ref2.unwrap() : void 0;
    };

    If.prototype.addElse = function(elseBody) {
      if (this.isChain) {
        this.elseBodyNode().addElse(elseBody);
      } else {
        this.isChain = elseBody instanceof If;
        this.elseBody = this.ensureBlock(elseBody);
        this.elseBody.updateLocationDataIfMissing(elseBody.locationData);
      }
      return this;
    };

    If.prototype.isStatement = function(o) {
      var _ref2;
      return (o != null ? o.level : void 0) === LEVEL_TOP || this.bodyNode().isStatement(o) || ((_ref2 = this.elseBodyNode()) != null ? _ref2.isStatement(o) : void 0);
    };

    If.prototype.jumps = function(o) {
      var _ref2;
      return this.body.jumps(o) || ((_ref2 = this.elseBody) != null ? _ref2.jumps(o) : void 0);
    };

    If.prototype.compileNode = function(o) {
      this.condition.icedStatementAssertion();
      if (this.isStatement(o || this.icedIsCpsPivot())) {
        return this.compileStatement(o);
      } else {
        return this.compileExpression(o);
      }
    };

    If.prototype.makeReturn = function(res) {
      if (res) {
        this.elseBody || (this.elseBody = new Block([new Literal('void 0')]));
      }
      this.body && (this.body = new Block([this.body.makeReturn(res)]));
      this.elseBody && (this.elseBody = new Block([this.elseBody.makeReturn(res)]));
      return this;
    };

    If.prototype.ensureBlock = function(node) {
      if (node instanceof Block) {
        return node;
      } else {
        return new Block([node]);
      }
    };

    If.prototype.compileStatement = function(o) {
      var answer, body, child, cond, exeq, ifPart, indent;
      child = del(o, 'chainChild');
      exeq = del(o, 'isExistentialEquals');
      if (exeq) {
        return new If(this.condition.invert(), this.elseBodyNode(), {
          type: 'if'
        }).compileToFragments(o);
      }
      indent = o.indent + TAB;
      cond = this.condition.compileToFragments(o, LEVEL_PAREN);
      body = this.ensureBlock(this.body).compileToFragments(merge(o, {
        indent: indent
      }));
      ifPart = [].concat(this.makeCode("if ("), cond, this.makeCode(") {\n"), body, this.makeCode("\n" + this.tab + "}"));
      if (!child) {
        ifPart.unshift(this.makeCode(this.tab));
      }
      if (!this.elseBody) {
        return ifPart;
      }
      answer = ifPart.concat(this.makeCode(' else '));
      if (this.isChain) {
        o.chainChild = true;
        answer = answer.concat(this.elseBody.unwrap().compileToFragments(o, LEVEL_TOP));
      } else {
        answer = answer.concat(this.makeCode("{\n"), this.elseBody.compileToFragments(merge(o, {
          indent: indent
        }), LEVEL_TOP), this.makeCode("\n" + this.tab + "}"));
      }
      return answer;
    };

    If.prototype.compileExpression = function(o) {
      var alt, body, cond, fragments;
      cond = this.condition.compileToFragments(o, LEVEL_COND);
      body = this.bodyNode().compileToFragments(o, LEVEL_LIST);
      alt = this.elseBodyNode() ? this.elseBodyNode().compileToFragments(o, LEVEL_LIST) : [this.makeCode('void 0')];
      fragments = cond.concat(this.makeCode(" ? "), body, this.makeCode(" : "), alt);
      if (o.level >= LEVEL_COND) {
        return this.wrapInBraces(fragments);
      } else {
        return fragments;
      }
    };

    If.prototype.unfoldSoak = function() {
      return this.soak && this;
    };

    If.prototype.icedCallContinuation = function() {
      if (this.elseBody) {
        this.elseBody.icedThreadReturn();
        this.isChain = false;
      } else {
        this.addElse(new IcedTailCall);
      }
      return this.body.icedThreadReturn();
    };

    return If;

  })(Base);

  Closure = {
    wrap: function(expressions, statement, noReturn) {
      var args, argumentsNode, call, func, meth;
      if (expressions.jumps()) {
        return expressions;
      }
      func = new Code([], Block.wrap([expressions]));
      args = [];
      argumentsNode = expressions.contains(this.isLiteralArguments);
      if (argumentsNode && expressions.classBody) {
        argumentsNode.error("Class bodies shouldn't reference arguments");
      }
      if (argumentsNode || expressions.contains(this.isLiteralThis)) {
        meth = new Literal(argumentsNode ? 'apply' : 'call');
        args = [new Literal('this')];
        if (argumentsNode) {
          args.push(new Literal('arguments'));
        }
        func = new Value(func, [new Access(meth)]);
      }
      func.noReturn = noReturn;
      call = new Call(func, args);
      if (statement) {
        return Block.wrap([call]);
      } else {
        return call;
      }
    },
    isLiteralArguments: function(node) {
      return node instanceof Literal && node.value === 'arguments' && !node.asKey;
    },
    isLiteralThis: function(node) {
      return (node instanceof Literal && node.value === 'this' && !node.asKey) || (node instanceof Code && node.bound) || (node instanceof Call && node.isSuper);
    }
  };

  unfoldSoak = function(o, parent, name) {
    var ifn;
    if (!(ifn = parent[name].unfoldSoak(o))) {
      return;
    }
    parent[name] = ifn.body;
    ifn.body = new Value(parent);
    return ifn;
  };

  CpsCascade = {
    wrap: function(statement, rest, returnValue, o) {
      var args, block, call, cont, e, func;
      func = new Code([new Param(new Literal(iced["const"].k))], Block.wrap([statement]), 'icedgen');
      args = [];
      if (returnValue) {
        returnValue.bindName(o);
        args.push(returnValue);
      }
      block = Block.wrap([rest]);
      if ((e = block.icedGetSingle()) && e instanceof IcedTailCall && e.canInline()) {
        cont = e.extractFunc();
      } else {
        cont = new Code(args, block, 'icedgen');
      }
      call = new Call(func, [cont]);
      return new Block([call]);
    }
  };

  IcedTailCall = (function(_super) {
    __extends(IcedTailCall, _super);

    function IcedTailCall(func, val) {
      this.func = func;
      if (val == null) {
        val = null;
      }
      IcedTailCall.__super__.constructor.call(this);
      if (!this.func) {
        this.func = iced["const"].k;
      }
      this.value = val;
    }

    IcedTailCall.prototype.children = ['value'];

    IcedTailCall.prototype.assignValue = function(v) {
      return this.value = v;
    };

    IcedTailCall.prototype.canInline = function() {
      return !this.value || this.value instanceof IcedReturnValue;
    };

    IcedTailCall.prototype.literalFunc = function() {
      return new Literal(this.func);
    };

    IcedTailCall.prototype.extractFunc = function() {
      return new Value(this.literalFunc());
    };

    IcedTailCall.prototype.compileNode = function(o) {
      var args, f, out;
      f = this.literalFunc();
      out = o.level === LEVEL_TOP ? this.value ? new Block([this.value, new Call(f)]) : new Call(f) : (args = this.value ? [this.value] : [], new Call(f, args));
      return out.compileNode(o);
    };

    return IcedTailCall;

  })(Base);

  IcedReturnValue = (function(_super) {
    __extends(IcedReturnValue, _super);

    IcedReturnValue.counter = 0;

    function IcedReturnValue() {
      IcedReturnValue.__super__.constructor.call(this, null, null, false);
    }

    IcedReturnValue.prototype.bindName = function(o) {
      var l;
      l = "" + (o.scope.freeVariable(iced["const"].param, false)) + "_" + (IcedReturnValue.counter++);
      return this.name = new Literal(l);
    };

    IcedReturnValue.prototype.compile = function(o) {
      if (!this.name) {
        this.bindName(o);
      }
      return IcedReturnValue.__super__.compile.call(this, o);
    };

    return IcedReturnValue;

  })(Param);

  InlineRuntime = {
    generate: function(ns_window) {
      var a1, a2, af, apply_call, assignments, body, call_meth, cn, cnt, cnt_member, constructor_assign, constructor_body, constructor_code, constructor_name, constructor_params, decr, defer_assign, defer_body, defer_code, defer_name, defer_params, dp, dp_value, fn, fn_assign, fn_code, fn_name, if_body, if_cond, if_expr, inc, inner_body, inner_code, inner_params, ip, k, k_member, klass, klass_assign, my_apply, my_if, my_null, ns, ns_obj, ns_val, obj, outer_block, p1, ret_member, tr_assign, tr_block, tr_code, tr_name, tr_params, _fulfill_assign, _fulfill_body, _fulfill_call, _fulfill_code, _fulfill_method, _fulfill_name;
      k = new Literal("continuation");
      cnt = new Literal("count");
      cn = new Value(new Literal(iced["const"].Deferrals));
      ns = new Value(new Literal(iced["const"].ns));
      if (ns_window) {
        ns_window.add(new Access(ns));
        ns = ns_window;
      }
      k_member = new Value(new Literal("this"));
      k_member.add(new Access(k));
      p1 = new Param(k_member);
      cnt_member = new Value(new Literal("this"));
      cnt_member.add(new Access(cnt));
      ret_member = new Value(new Literal("this"));
      ret_member.add(new Access(new Value(new Literal(iced["const"].retslot))));
      a1 = new Assign(cnt_member, new Value(new Literal(1)));
      a2 = new Assign(ret_member, NULL());
      constructor_params = [p1];
      constructor_body = new Block([a1, a2]);
      constructor_code = new Code(constructor_params, constructor_body);
      constructor_name = new Value(new Literal("constructor"));
      constructor_assign = new Assign(constructor_name, constructor_code);
      if_expr = new Call(k_member, [ret_member]);
      if_body = new Block([if_expr]);
      decr = new Op('--', cnt_member);
      if_cond = new Op('!', decr);
      my_if = new If(if_cond, if_body);
      _fulfill_body = new Block([my_if]);
      _fulfill_code = new Code([], _fulfill_body);
      _fulfill_name = new Value(new Literal(iced["const"].fulfill));
      _fulfill_assign = new Assign(_fulfill_name, _fulfill_code);
      inc = new Op("++", cnt_member);
      ip = new Literal("inner_params");
      dp = new Literal("defer_params");
      dp_value = new Value(dp);
      call_meth = new Value(dp);
      af = new Literal(iced["const"].assign_fn);
      call_meth.add(new Access(af, "soak"));
      my_apply = new Literal("apply");
      call_meth.add(new Access(my_apply, "soak"));
      my_null = NULL();
      apply_call = new Call(call_meth, [my_null, new Value(ip)]);
      _fulfill_method = new Value(new Literal("this"));
      _fulfill_method.add(new Access(new Literal(iced["const"].fulfill)));
      _fulfill_call = new Call(_fulfill_method, []);
      inner_body = new Block([apply_call, _fulfill_call]);
      inner_params = [new Param(ip, null, true)];
      inner_code = new Code(inner_params, inner_body, "boundfunc");
      defer_body = new Block([inc, inner_code]);
      defer_params = [new Param(dp)];
      defer_code = new Code(defer_params, defer_body);
      defer_name = new Value(new Literal(iced["const"].defer_method));
      defer_assign = new Assign(defer_name, defer_code);
      assignments = [constructor_assign, _fulfill_assign, defer_assign];
      obj = new Obj(assignments, true);
      body = new Block([new Value(obj)]);
      klass = new Class(null, null, body);
      klass_assign = new Assign(cn, klass, "object");
      outer_block = new Block([NULL()]);
      fn_code = new Code([], outer_block);
      fn_name = new Value(new Literal(iced["const"].findDeferral));
      fn_assign = new Assign(fn_name, fn_code, "object");
      fn = new Literal("_fn");
      tr_block = new Block([new Call(new Value(fn), [])]);
      tr_params = [new Param(fn)];
      tr_code = new Code(tr_params, tr_block);
      tr_name = new Value(new Literal(iced["const"].trampoline));
      tr_assign = new Assign(tr_name, tr_code, "object");
      ns_obj = new Obj([klass_assign, fn_assign, tr_assign], true);
      ns_val = new Value(ns_obj);
      return new Assign(ns, ns_val);
    }
  };

  UTILITIES = {
    "extends": function() {
      return "function(child, parent) { for (var key in parent) { if (" + (utility('hasProp')) + ".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }";
    },
    bind: function() {
      return 'function(fn, me){ return function(){ return fn.apply(me, arguments); }; }';
    },
    indexOf: function() {
      return "[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }";
    },
    modulo: function() {
      return "function(a, b) { return (+a % (b = +b) + b) % b; }";
    },
    hasProp: function() {
      return '{}.hasOwnProperty';
    },
    slice: function() {
      return '[].slice';
    }
  };

  LEVEL_TOP = 1;

  LEVEL_PAREN = 2;

  LEVEL_LIST = 3;

  LEVEL_COND = 4;

  LEVEL_OP = 5;

  LEVEL_ACCESS = 6;

  TAB = '  ';

  IDENTIFIER_STR = "[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*";

  IDENTIFIER = RegExp("^" + IDENTIFIER_STR + "$");

  SIMPLENUM = /^[+-]?\d+$/;

  HEXNUM = /^[+-]?0x[\da-f]+/i;

  NUMBER = /^[+-]?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)$/i;

  METHOD_DEF = RegExp("^(" + IDENTIFIER_STR + ")(\\.prototype)?(?:\\.(" + IDENTIFIER_STR + ")|\\[(\"(?:[^\\\\\"\\r\\n]|\\\\.)*\"|'(?:[^\\\\'\\r\\n]|\\\\.)*')\\]|\\[(0x[\\da-fA-F]+|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\])$");

  IS_STRING = /^['"]/;

  IS_REGEX = /^\//;

  utility = function(name) {
    var ref;
    ref = "__" + name;
    Scope.root.assign(ref, UTILITIES[name]());
    return ref;
  };

  multident = function(code, tab) {
    code = code.replace(/\n/g, '$&' + tab);
    return code.replace(/\s+$/, '');
  };

  parseNum = function(x) {
    if (x == null) {
      return 0;
    } else if (x.match(HEXNUM)) {
      return parseInt(x, 16);
    } else {
      return parseFloat(x);
    }
  };

  isLiteralArguments = function(node) {
    return node instanceof Literal && node.value === 'arguments' && !node.asKey;
  };

  isLiteralThis = function(node) {
    return (node instanceof Literal && node.value === 'this' && !node.asKey) || (node instanceof Code && node.bound) || (node instanceof Call && node.isSuper);
  };

  unfoldSoak = function(o, parent, name) {
    var ifn;
    if (!(ifn = parent[name].unfoldSoak(o))) {
      return;
    }
    parent[name] = ifn.body;
    ifn.body = new Value(parent);
    return ifn;
  };

}).call(this);

}).call(this,"/node_modules/iced-coffee-script/lib/coffee-script")

},{"./helpers":19,"./lexer":21,"./scope":26,"iced-runtime":30,"path":35}],23:[function(require,module,exports){
(function (process){
/* parser generated by jison 0.4.13 */
/*
  Returns a Parser object of the following structure:

  Parser: {
    yy: {}
  }

  Parser.prototype: {
    yy: {},
    trace: function(),
    symbols_: {associative list: name ==> number},
    terminals_: {associative list: number ==> name},
    productions_: [...],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),
    table: [...],
    defaultActions: {...},
    parseError: function(str, hash),
    parse: function(input),

    lexer: {
        EOF: 1,
        parseError: function(str, hash),
        setInput: function(input),
        input: function(),
        unput: function(str),
        more: function(),
        less: function(n),
        pastInput: function(),
        upcomingInput: function(),
        showPosition: function(),
        test_match: function(regex_match_array, rule_index),
        next: function(),
        lex: function(),
        begin: function(condition),
        popState: function(),
        _currentRules: function(),
        topState: function(),
        pushState: function(condition),

        options: {
            ranges: boolean           (optional: true ==> token location info will include a .range[] member)
            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)
            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)
        },

        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),
        rules: [...],
        conditions: {associative list: name ==> set},
    }
  }


  token location info (@$, _$, etc.): {
    first_line: n,
    last_line: n,
    first_column: n,
    last_column: n,
    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)
  }


  the parseError function receives a 'hash' object with these members for lexer and parser errors: {
    text:        (matched text)
    token:       (the produced terminal token, if any)
    line:        (yylineno)
  }
  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {
    loc:         (yylloc)
    expected:    (string describing the set of expected tokens)
    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)
  }
*/
var parser = (function(){
var parser = {trace: function trace() { },
yy: {},
symbols_: {"error":2,"Root":3,"Body":4,"Line":5,"TERMINATOR":6,"Expression":7,"Statement":8,"Return":9,"Comment":10,"STATEMENT":11,"Await":12,"AWAIT":13,"Block":14,"Value":15,"Invocation":16,"Code":17,"Operation":18,"Assign":19,"If":20,"Try":21,"While":22,"For":23,"Switch":24,"Class":25,"Throw":26,"Defer":27,"INDENT":28,"OUTDENT":29,"Identifier":30,"IDENTIFIER":31,"AlphaNumeric":32,"NUMBER":33,"STRING":34,"Literal":35,"JS":36,"REGEX":37,"DEBUGGER":38,"UNDEFINED":39,"NULL":40,"BOOL":41,"Assignable":42,"=":43,"AssignObj":44,"ObjAssignable":45,":":46,"ThisProperty":47,"RETURN":48,"HERECOMMENT":49,"PARAM_START":50,"ParamList":51,"PARAM_END":52,"FuncGlyph":53,"->":54,"=>":55,"OptComma":56,",":57,"Param":58,"ParamVar":59,"...":60,"Array":61,"Object":62,"Splat":63,"SimpleAssignable":64,"Accessor":65,"Parenthetical":66,"Range":67,"This":68,".":69,"?.":70,"::":71,"?::":72,"Index":73,"INDEX_START":74,"IndexValue":75,"INDEX_END":76,"INDEX_SOAK":77,"Slice":78,"{":79,"AssignList":80,"}":81,"CLASS":82,"EXTENDS":83,"OptFuncExist":84,"Arguments":85,"SUPER":86,"DEFER":87,"FUNC_EXIST":88,"CALL_START":89,"CALL_END":90,"ArgList":91,"THIS":92,"@":93,"[":94,"]":95,"RangeDots":96,"..":97,"Arg":98,"SimpleArgs":99,"TRY":100,"Catch":101,"FINALLY":102,"CATCH":103,"THROW":104,"(":105,")":106,"WhileSource":107,"WHILE":108,"WHEN":109,"UNTIL":110,"Loop":111,"LOOP":112,"ForBody":113,"FOR":114,"ForStart":115,"ForSource":116,"ForVariables":117,"OWN":118,"ForValue":119,"FORIN":120,"FOROF":121,"BY":122,"SWITCH":123,"Whens":124,"ELSE":125,"When":126,"LEADING_WHEN":127,"IfBlock":128,"IF":129,"POST_IF":130,"UNARY":131,"UNARY_MATH":132,"-":133,"+":134,"YIELD":135,"FROM":136,"--":137,"++":138,"?":139,"MATH":140,"**":141,"SHIFT":142,"COMPARE":143,"LOGIC":144,"RELATION":145,"COMPOUND_ASSIGN":146,"$accept":0,"$end":1},
terminals_: {2:"error",6:"TERMINATOR",11:"STATEMENT",13:"AWAIT",28:"INDENT",29:"OUTDENT",31:"IDENTIFIER",33:"NUMBER",34:"STRING",36:"JS",37:"REGEX",38:"DEBUGGER",39:"UNDEFINED",40:"NULL",41:"BOOL",43:"=",46:":",48:"RETURN",49:"HERECOMMENT",50:"PARAM_START",52:"PARAM_END",54:"->",55:"=>",57:",",60:"...",69:".",70:"?.",71:"::",72:"?::",74:"INDEX_START",76:"INDEX_END",77:"INDEX_SOAK",79:"{",81:"}",82:"CLASS",83:"EXTENDS",86:"SUPER",87:"DEFER",88:"FUNC_EXIST",89:"CALL_START",90:"CALL_END",92:"THIS",93:"@",94:"[",95:"]",97:"..",100:"TRY",102:"FINALLY",103:"CATCH",104:"THROW",105:"(",106:")",108:"WHILE",109:"WHEN",110:"UNTIL",112:"LOOP",114:"FOR",118:"OWN",120:"FORIN",121:"FOROF",122:"BY",123:"SWITCH",125:"ELSE",127:"LEADING_WHEN",129:"IF",130:"POST_IF",131:"UNARY",132:"UNARY_MATH",133:"-",134:"+",135:"YIELD",136:"FROM",137:"--",138:"++",139:"?",140:"MATH",141:"**",142:"SHIFT",143:"COMPARE",144:"LOGIC",145:"RELATION",146:"COMPOUND_ASSIGN"},
productions_: [0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[12,2],[12,2],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[14,2],[14,3],[30,1],[32,1],[32,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[19,3],[19,4],[19,5],[44,1],[44,3],[44,5],[44,1],[45,1],[45,1],[45,1],[9,2],[9,1],[10,1],[17,5],[17,2],[53,1],[53,1],[56,0],[56,1],[51,0],[51,1],[51,3],[51,4],[51,6],[58,1],[58,2],[58,3],[58,1],[59,1],[59,1],[59,1],[59,1],[63,2],[64,1],[64,2],[64,2],[64,1],[42,1],[42,1],[42,1],[15,1],[15,1],[15,1],[15,1],[15,1],[65,2],[65,2],[65,2],[65,2],[65,2],[65,1],[65,1],[73,3],[73,2],[75,1],[75,1],[62,4],[80,0],[80,1],[80,3],[80,4],[80,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[16,3],[16,3],[16,1],[16,2],[27,2],[84,0],[84,1],[85,2],[85,4],[68,1],[68,1],[47,2],[61,2],[61,4],[96,1],[96,1],[67,5],[78,3],[78,2],[78,2],[78,1],[91,1],[91,3],[91,4],[91,4],[91,6],[98,1],[98,1],[98,1],[99,1],[99,3],[21,2],[21,3],[21,4],[21,5],[101,3],[101,3],[101,2],[26,2],[66,3],[66,5],[107,2],[107,4],[107,2],[107,4],[22,2],[22,2],[22,2],[22,1],[111,2],[111,2],[23,2],[23,2],[23,2],[113,2],[113,2],[115,2],[115,3],[119,1],[119,1],[119,1],[119,1],[117,1],[117,3],[116,2],[116,2],[116,4],[116,4],[116,4],[116,6],[116,6],[24,5],[24,7],[24,4],[24,6],[124,1],[124,2],[126,3],[126,4],[128,3],[128,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],
performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */
/**/) {
/* this == yyval */

var $0 = $$.length - 1;
switch (yystate) {
case 1:return this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Block);
break;
case 2:return this.$ = $$[$0];
break;
case 3:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(yy.Block.wrap([$$[$0]]));
break;
case 4:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].push($$[$0]));
break;
case 5:this.$ = $$[$0-1];
break;
case 6:this.$ = $$[$0];
break;
case 7:this.$ = $$[$0];
break;
case 8:this.$ = $$[$0];
break;
case 9:this.$ = $$[$0];
break;
case 10:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 11:this.$ = $$[$0];
break;
case 12:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Await($$[$0]));
break;
case 13:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Await(yy.Block.wrap([$$[$0]])));
break;
case 14:this.$ = $$[$0];
break;
case 15:this.$ = $$[$0];
break;
case 16:this.$ = $$[$0];
break;
case 17:this.$ = $$[$0];
break;
case 18:this.$ = $$[$0];
break;
case 19:this.$ = $$[$0];
break;
case 20:this.$ = $$[$0];
break;
case 21:this.$ = $$[$0];
break;
case 22:this.$ = $$[$0];
break;
case 23:this.$ = $$[$0];
break;
case 24:this.$ = $$[$0];
break;
case 25:this.$ = $$[$0];
break;
case 26:this.$ = $$[$0];
break;
case 27:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Block);
break;
case 28:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-1]);
break;
case 29:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 30:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 31:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 32:this.$ = $$[$0];
break;
case 33:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 34:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 35:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 36:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Undefined);
break;
case 37:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Null);
break;
case 38:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Bool($$[$0]));
break;
case 39:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign($$[$0-2], $$[$0]));
break;
case 40:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Assign($$[$0-3], $$[$0]));
break;
case 41:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign($$[$0-4], $$[$0-1]));
break;
case 42:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 43:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign(yy.addLocationDataFn(_$[$0-2])(new yy.Value($$[$0-2])), $$[$0], 'object'));
break;
case 44:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign(yy.addLocationDataFn(_$[$0-4])(new yy.Value($$[$0-4])), $$[$0-1], 'object'));
break;
case 45:this.$ = $$[$0];
break;
case 46:this.$ = $$[$0];
break;
case 47:this.$ = $$[$0];
break;
case 48:this.$ = $$[$0];
break;
case 49:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Return($$[$0]));
break;
case 50:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Return);
break;
case 51:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Comment($$[$0]));
break;
case 52:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Code($$[$0-3], $$[$0], $$[$0-1]));
break;
case 53:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Code([], $$[$0], $$[$0-1]));
break;
case 54:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('func');
break;
case 55:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('boundfunc');
break;
case 56:this.$ = $$[$0];
break;
case 57:this.$ = $$[$0];
break;
case 58:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([]);
break;
case 59:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 60:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 61:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 62:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 63:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Param($$[$0]));
break;
case 64:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Param($$[$0-1], null, true));
break;
case 65:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Param($$[$0-2], $$[$0]));
break;
case 66:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Expansion);
break;
case 67:this.$ = $$[$0];
break;
case 68:this.$ = $$[$0];
break;
case 69:this.$ = $$[$0];
break;
case 70:this.$ = $$[$0];
break;
case 71:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Splat($$[$0-1]));
break;
case 72:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 73:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].add($$[$0]));
break;
case 74:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Value($$[$0-1], [].concat($$[$0])));
break;
case 75:this.$ = $$[$0];
break;
case 76:this.$ = $$[$0];
break;
case 77:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 78:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 79:this.$ = $$[$0];
break;
case 80:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 81:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 82:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 83:this.$ = $$[$0];
break;
case 84:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0]));
break;
case 85:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0].setCustom()));
break;
case 86:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0], 'soak'));
break;
case 87:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Access(new yy.Literal('prototype'))), yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))]);
break;
case 88:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Access(new yy.Literal('prototype'), 'soak')), yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))]);
break;
case 89:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Access(new yy.Literal('prototype')));
break;
case 90:this.$ = $$[$0];
break;
case 91:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-1]);
break;
case 92:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(yy.extend($$[$0], {
          soak: true
        }));
break;
case 93:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Index($$[$0]));
break;
case 94:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Slice($$[$0]));
break;
case 95:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Obj($$[$0-2], $$[$0-3].generated));
break;
case 96:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([]);
break;
case 97:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 98:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 99:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 100:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 101:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Class);
break;
case 102:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Class(null, null, $$[$0]));
break;
case 103:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Class(null, $$[$0]));
break;
case 104:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Class(null, $$[$0-1], $$[$0]));
break;
case 105:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Class($$[$0]));
break;
case 106:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Class($$[$0-1], null, $$[$0]));
break;
case 107:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Class($$[$0-2], $$[$0]));
break;
case 108:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Class($$[$0-3], $$[$0-1], $$[$0]));
break;
case 109:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Call($$[$0-2], $$[$0], $$[$0-1]));
break;
case 110:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Call($$[$0-2], $$[$0], $$[$0-1]));
break;
case 111:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Call('super', [new yy.Splat(new yy.Literal('arguments'))]));
break;
case 112:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Call('super', $$[$0]));
break;
case 113:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Defer($$[$0], yylineno));
break;
case 114:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(false);
break;
case 115:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(true);
break;
case 116:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([]);
break;
case 117:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-2]);
break;
case 118:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value(new yy.Literal('this')));
break;
case 119:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value(new yy.Literal('this')));
break;
case 120:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Value(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('this')), [yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))], 'this'));
break;
case 121:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Arr([]));
break;
case 122:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Arr($$[$0-2]));
break;
case 123:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('inclusive');
break;
case 124:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('exclusive');
break;
case 125:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Range($$[$0-3], $$[$0-1], $$[$0-2]));
break;
case 126:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Range($$[$0-2], $$[$0], $$[$0-1]));
break;
case 127:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Range($$[$0-1], null, $$[$0]));
break;
case 128:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Range(null, $$[$0], $$[$0-1]));
break;
case 129:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Range(null, null, $$[$0]));
break;
case 130:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 131:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 132:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 133:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-2]);
break;
case 134:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 135:this.$ = $$[$0];
break;
case 136:this.$ = $$[$0];
break;
case 137:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Expansion);
break;
case 138:this.$ = $$[$0];
break;
case 139:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([].concat($$[$0-2], $$[$0]));
break;
case 140:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Try($$[$0]));
break;
case 141:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Try($$[$0-1], $$[$0][0], $$[$0][1]));
break;
case 142:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Try($$[$0-2], null, null, $$[$0]));
break;
case 143:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Try($$[$0-3], $$[$0-2][0], $$[$0-2][1], $$[$0]));
break;
case 144:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([$$[$0-1], $$[$0]]);
break;
case 145:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Value($$[$0-1])), $$[$0]]);
break;
case 146:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([null, $$[$0]]);
break;
case 147:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Throw($$[$0]));
break;
case 148:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Parens($$[$0-1]));
break;
case 149:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Parens($$[$0-2]));
break;
case 150:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While($$[$0]));
break;
case 151:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.While($$[$0-2], {
          guard: $$[$0]
        }));
break;
case 152:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While($$[$0], {
          invert: true
        }));
break;
case 153:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.While($$[$0-2], {
          invert: true,
          guard: $$[$0]
        }));
break;
case 154:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].addBody($$[$0]));
break;
case 155:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0].addBody(yy.addLocationDataFn(_$[$0-1])(yy.Block.wrap([$$[$0-1]]))));
break;
case 156:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0].addBody(yy.addLocationDataFn(_$[$0-1])(yy.Block.wrap([$$[$0-1]]))));
break;
case 157:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])($$[$0]);
break;
case 158:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('true'))).addBody($$[$0]));
break;
case 159:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('true'))).addBody(yy.addLocationDataFn(_$[$0])(yy.Block.wrap([$$[$0]]))));
break;
case 160:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0-1], $$[$0]));
break;
case 161:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0-1], $$[$0]));
break;
case 162:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0], $$[$0-1]));
break;
case 163:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: yy.addLocationDataFn(_$[$0])(new yy.Value($$[$0]))
        });
break;
case 164:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])((function () {
        $$[$0].own = $$[$0-1].own;
        $$[$0].name = $$[$0-1][0];
        $$[$0].index = $$[$0-1][1];
        return $$[$0];
      }()));
break;
case 165:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0]);
break;
case 166:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])((function () {
        $$[$0].own = true;
        return $$[$0];
      }()));
break;
case 167:this.$ = $$[$0];
break;
case 168:this.$ = $$[$0];
break;
case 169:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 170:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 171:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 172:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([$$[$0-2], $$[$0]]);
break;
case 173:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: $$[$0]
        });
break;
case 174:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: $$[$0],
          object: true
        });
break;
case 175:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          guard: $$[$0]
        });
break;
case 176:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          guard: $$[$0],
          object: true
        });
break;
case 177:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          step: $$[$0]
        });
break;
case 178:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])({
          source: $$[$0-4],
          guard: $$[$0-2],
          step: $$[$0]
        });
break;
case 179:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])({
          source: $$[$0-4],
          step: $$[$0-2],
          guard: $$[$0]
        });
break;
case 180:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Switch($$[$0-3], $$[$0-1]));
break;
case 181:this.$ = yy.addLocationDataFn(_$[$0-6], _$[$0])(new yy.Switch($$[$0-5], $$[$0-3], $$[$0-1]));
break;
case 182:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Switch(null, $$[$0-1]));
break;
case 183:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])(new yy.Switch(null, $$[$0-3], $$[$0-1]));
break;
case 184:this.$ = $$[$0];
break;
case 185:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].concat($$[$0]));
break;
case 186:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([[$$[$0-1], $$[$0]]]);
break;
case 187:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])([[$$[$0-2], $$[$0-1]]]);
break;
case 188:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0-1], $$[$0], {
          type: $$[$0-2]
        }));
break;
case 189:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])($$[$0-4].addElse(yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0-1], $$[$0], {
          type: $$[$0-2]
        }))));
break;
case 190:this.$ = $$[$0];
break;
case 191:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].addElse($$[$0]));
break;
case 192:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0], yy.addLocationDataFn(_$[$0-2])(yy.Block.wrap([$$[$0-2]])), {
          type: $$[$0-1],
          statement: true
        }));
break;
case 193:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0], yy.addLocationDataFn(_$[$0-2])(yy.Block.wrap([$$[$0-2]])), {
          type: $$[$0-1],
          statement: true
        }));
break;
case 194:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 195:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 196:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('-', $$[$0]));
break;
case 197:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('+', $$[$0]));
break;
case 198:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 199:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 200:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-2].concat($$[$0-1]), $$[$0]));
break;
case 201:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('--', $$[$0]));
break;
case 202:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('++', $$[$0]));
break;
case 203:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('--', $$[$0-1], null, true));
break;
case 204:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('++', $$[$0-1], null, true));
break;
case 205:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Existence($$[$0-1]));
break;
case 206:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op('+', $$[$0-2], $$[$0]));
break;
case 207:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op('-', $$[$0-2], $$[$0]));
break;
case 208:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 209:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 210:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 211:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 212:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 213:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])((function () {
        if ($$[$0-1].charAt(0) === '!') {
          return new yy.Op($$[$0-1].slice(1), $$[$0-2], $$[$0]).invert();
        } else {
          return new yy.Op($$[$0-1], $$[$0-2], $$[$0]);
        }
      }()));
break;
case 214:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign($$[$0-2], $$[$0], $$[$0-1]));
break;
case 215:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign($$[$0-4], $$[$0-1], $$[$0-3]));
break;
case 216:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Assign($$[$0-3], $$[$0], $$[$0-2]));
break;
case 217:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Extends($$[$0-2], $$[$0]));
break;
}
},
table: [{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[3]},{1:[2,2],6:[1,78]},{1:[2,3],6:[2,3],29:[2,3],106:[2,3]},{1:[2,6],6:[2,6],29:[2,6],106:[2,6],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,7],6:[2,7],29:[2,7],106:[2,7],107:92,108:[1,69],110:[1,70],113:93,114:[1,72],115:73,130:[1,91]},{1:[2,14],6:[2,14],28:[2,14],29:[2,14],52:[2,14],57:[2,14],60:[2,14],65:95,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],76:[2,14],77:[1,103],81:[2,14],84:94,88:[1,96],89:[2,114],90:[2,14],95:[2,14],97:[2,14],106:[2,14],108:[2,14],109:[2,14],110:[2,14],114:[2,14],122:[2,14],130:[2,14],133:[2,14],134:[2,14],139:[2,14],140:[2,14],141:[2,14],142:[2,14],143:[2,14],144:[2,14],145:[2,14]},{1:[2,15],6:[2,15],28:[2,15],29:[2,15],52:[2,15],57:[2,15],60:[2,15],65:105,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],76:[2,15],77:[1,103],81:[2,15],84:104,88:[1,96],89:[2,114],90:[2,15],95:[2,15],97:[2,15],106:[2,15],108:[2,15],109:[2,15],110:[2,15],114:[2,15],122:[2,15],130:[2,15],133:[2,15],134:[2,15],139:[2,15],140:[2,15],141:[2,15],142:[2,15],143:[2,15],144:[2,15],145:[2,15]},{1:[2,16],6:[2,16],28:[2,16],29:[2,16],52:[2,16],57:[2,16],60:[2,16],76:[2,16],81:[2,16],90:[2,16],95:[2,16],97:[2,16],106:[2,16],108:[2,16],109:[2,16],110:[2,16],114:[2,16],122:[2,16],130:[2,16],133:[2,16],134:[2,16],139:[2,16],140:[2,16],141:[2,16],142:[2,16],143:[2,16],144:[2,16],145:[2,16]},{1:[2,17],6:[2,17],28:[2,17],29:[2,17],52:[2,17],57:[2,17],60:[2,17],76:[2,17],81:[2,17],90:[2,17],95:[2,17],97:[2,17],106:[2,17],108:[2,17],109:[2,17],110:[2,17],114:[2,17],122:[2,17],130:[2,17],133:[2,17],134:[2,17],139:[2,17],140:[2,17],141:[2,17],142:[2,17],143:[2,17],144:[2,17],145:[2,17]},{1:[2,18],6:[2,18],28:[2,18],29:[2,18],52:[2,18],57:[2,18],60:[2,18],76:[2,18],81:[2,18],90:[2,18],95:[2,18],97:[2,18],106:[2,18],108:[2,18],109:[2,18],110:[2,18],114:[2,18],122:[2,18],130:[2,18],133:[2,18],134:[2,18],139:[2,18],140:[2,18],141:[2,18],142:[2,18],143:[2,18],144:[2,18],145:[2,18]},{1:[2,19],6:[2,19],28:[2,19],29:[2,19],52:[2,19],57:[2,19],60:[2,19],76:[2,19],81:[2,19],90:[2,19],95:[2,19],97:[2,19],106:[2,19],108:[2,19],109:[2,19],110:[2,19],114:[2,19],122:[2,19],130:[2,19],133:[2,19],134:[2,19],139:[2,19],140:[2,19],141:[2,19],142:[2,19],143:[2,19],144:[2,19],145:[2,19]},{1:[2,20],6:[2,20],28:[2,20],29:[2,20],52:[2,20],57:[2,20],60:[2,20],76:[2,20],81:[2,20],90:[2,20],95:[2,20],97:[2,20],106:[2,20],108:[2,20],109:[2,20],110:[2,20],114:[2,20],122:[2,20],130:[2,20],133:[2,20],134:[2,20],139:[2,20],140:[2,20],141:[2,20],142:[2,20],143:[2,20],144:[2,20],145:[2,20]},{1:[2,21],6:[2,21],28:[2,21],29:[2,21],52:[2,21],57:[2,21],60:[2,21],76:[2,21],81:[2,21],90:[2,21],95:[2,21],97:[2,21],106:[2,21],108:[2,21],109:[2,21],110:[2,21],114:[2,21],122:[2,21],130:[2,21],133:[2,21],134:[2,21],139:[2,21],140:[2,21],141:[2,21],142:[2,21],143:[2,21],144:[2,21],145:[2,21]},{1:[2,22],6:[2,22],28:[2,22],29:[2,22],52:[2,22],57:[2,22],60:[2,22],76:[2,22],81:[2,22],90:[2,22],95:[2,22],97:[2,22],106:[2,22],108:[2,22],109:[2,22],110:[2,22],114:[2,22],122:[2,22],130:[2,22],133:[2,22],134:[2,22],139:[2,22],140:[2,22],141:[2,22],142:[2,22],143:[2,22],144:[2,22],145:[2,22]},{1:[2,23],6:[2,23],28:[2,23],29:[2,23],52:[2,23],57:[2,23],60:[2,23],76:[2,23],81:[2,23],90:[2,23],95:[2,23],97:[2,23],106:[2,23],108:[2,23],109:[2,23],110:[2,23],114:[2,23],122:[2,23],130:[2,23],133:[2,23],134:[2,23],139:[2,23],140:[2,23],141:[2,23],142:[2,23],143:[2,23],144:[2,23],145:[2,23]},{1:[2,24],6:[2,24],28:[2,24],29:[2,24],52:[2,24],57:[2,24],60:[2,24],76:[2,24],81:[2,24],90:[2,24],95:[2,24],97:[2,24],106:[2,24],108:[2,24],109:[2,24],110:[2,24],114:[2,24],122:[2,24],130:[2,24],133:[2,24],134:[2,24],139:[2,24],140:[2,24],141:[2,24],142:[2,24],143:[2,24],144:[2,24],145:[2,24]},{1:[2,25],6:[2,25],28:[2,25],29:[2,25],52:[2,25],57:[2,25],60:[2,25],76:[2,25],81:[2,25],90:[2,25],95:[2,25],97:[2,25],106:[2,25],108:[2,25],109:[2,25],110:[2,25],114:[2,25],122:[2,25],130:[2,25],133:[2,25],134:[2,25],139:[2,25],140:[2,25],141:[2,25],142:[2,25],143:[2,25],144:[2,25],145:[2,25]},{1:[2,26],6:[2,26],28:[2,26],29:[2,26],52:[2,26],57:[2,26],60:[2,26],76:[2,26],81:[2,26],90:[2,26],95:[2,26],97:[2,26],106:[2,26],108:[2,26],109:[2,26],110:[2,26],114:[2,26],122:[2,26],130:[2,26],133:[2,26],134:[2,26],139:[2,26],140:[2,26],141:[2,26],142:[2,26],143:[2,26],144:[2,26],145:[2,26]},{1:[2,8],6:[2,8],28:[2,8],29:[2,8],52:[2,8],57:[2,8],60:[2,8],76:[2,8],81:[2,8],90:[2,8],95:[2,8],97:[2,8],106:[2,8],108:[2,8],109:[2,8],110:[2,8],114:[2,8],122:[2,8],130:[2,8],133:[2,8],134:[2,8],139:[2,8],140:[2,8],141:[2,8],142:[2,8],143:[2,8],144:[2,8],145:[2,8]},{1:[2,9],6:[2,9],28:[2,9],29:[2,9],52:[2,9],57:[2,9],60:[2,9],76:[2,9],81:[2,9],90:[2,9],95:[2,9],97:[2,9],106:[2,9],108:[2,9],109:[2,9],110:[2,9],114:[2,9],122:[2,9],130:[2,9],133:[2,9],134:[2,9],139:[2,9],140:[2,9],141:[2,9],142:[2,9],143:[2,9],144:[2,9],145:[2,9]},{1:[2,10],6:[2,10],28:[2,10],29:[2,10],52:[2,10],57:[2,10],60:[2,10],76:[2,10],81:[2,10],90:[2,10],95:[2,10],97:[2,10],106:[2,10],108:[2,10],109:[2,10],110:[2,10],114:[2,10],122:[2,10],130:[2,10],133:[2,10],134:[2,10],139:[2,10],140:[2,10],141:[2,10],142:[2,10],143:[2,10],144:[2,10],145:[2,10]},{1:[2,11],6:[2,11],28:[2,11],29:[2,11],52:[2,11],57:[2,11],60:[2,11],76:[2,11],81:[2,11],90:[2,11],95:[2,11],97:[2,11],106:[2,11],108:[2,11],109:[2,11],110:[2,11],114:[2,11],122:[2,11],130:[2,11],133:[2,11],134:[2,11],139:[2,11],140:[2,11],141:[2,11],142:[2,11],143:[2,11],144:[2,11],145:[2,11]},{1:[2,79],6:[2,79],28:[2,79],29:[2,79],43:[1,106],52:[2,79],57:[2,79],60:[2,79],69:[2,79],70:[2,79],71:[2,79],72:[2,79],74:[2,79],76:[2,79],77:[2,79],81:[2,79],88:[2,79],89:[2,79],90:[2,79],95:[2,79],97:[2,79],106:[2,79],108:[2,79],109:[2,79],110:[2,79],114:[2,79],122:[2,79],130:[2,79],133:[2,79],134:[2,79],139:[2,79],140:[2,79],141:[2,79],142:[2,79],143:[2,79],144:[2,79],145:[2,79]},{1:[2,80],6:[2,80],28:[2,80],29:[2,80],52:[2,80],57:[2,80],60:[2,80],69:[2,80],70:[2,80],71:[2,80],72:[2,80],74:[2,80],76:[2,80],77:[2,80],81:[2,80],88:[2,80],89:[2,80],90:[2,80],95:[2,80],97:[2,80],106:[2,80],108:[2,80],109:[2,80],110:[2,80],114:[2,80],122:[2,80],130:[2,80],133:[2,80],134:[2,80],139:[2,80],140:[2,80],141:[2,80],142:[2,80],143:[2,80],144:[2,80],145:[2,80]},{1:[2,81],6:[2,81],28:[2,81],29:[2,81],52:[2,81],57:[2,81],60:[2,81],69:[2,81],70:[2,81],71:[2,81],72:[2,81],74:[2,81],76:[2,81],77:[2,81],81:[2,81],88:[2,81],89:[2,81],90:[2,81],95:[2,81],97:[2,81],106:[2,81],108:[2,81],109:[2,81],110:[2,81],114:[2,81],122:[2,81],130:[2,81],133:[2,81],134:[2,81],139:[2,81],140:[2,81],141:[2,81],142:[2,81],143:[2,81],144:[2,81],145:[2,81]},{1:[2,82],6:[2,82],28:[2,82],29:[2,82],52:[2,82],57:[2,82],60:[2,82],69:[2,82],70:[2,82],71:[2,82],72:[2,82],74:[2,82],76:[2,82],77:[2,82],81:[2,82],88:[2,82],89:[2,82],90:[2,82],95:[2,82],97:[2,82],106:[2,82],108:[2,82],109:[2,82],110:[2,82],114:[2,82],122:[2,82],130:[2,82],133:[2,82],134:[2,82],139:[2,82],140:[2,82],141:[2,82],142:[2,82],143:[2,82],144:[2,82],145:[2,82]},{1:[2,83],6:[2,83],28:[2,83],29:[2,83],52:[2,83],57:[2,83],60:[2,83],69:[2,83],70:[2,83],71:[2,83],72:[2,83],74:[2,83],76:[2,83],77:[2,83],81:[2,83],88:[2,83],89:[2,83],90:[2,83],95:[2,83],97:[2,83],106:[2,83],108:[2,83],109:[2,83],110:[2,83],114:[2,83],122:[2,83],130:[2,83],133:[2,83],134:[2,83],139:[2,83],140:[2,83],141:[2,83],142:[2,83],143:[2,83],144:[2,83],145:[2,83]},{1:[2,111],6:[2,111],28:[2,111],29:[2,111],52:[2,111],57:[2,111],60:[2,111],69:[2,111],70:[2,111],71:[2,111],72:[2,111],74:[2,111],76:[2,111],77:[2,111],81:[2,111],85:107,88:[2,111],89:[1,108],90:[2,111],95:[2,111],97:[2,111],106:[2,111],108:[2,111],109:[2,111],110:[2,111],114:[2,111],122:[2,111],130:[2,111],133:[2,111],134:[2,111],139:[2,111],140:[2,111],141:[2,111],142:[2,111],143:[2,111],144:[2,111],145:[2,111]},{6:[2,58],28:[2,58],30:113,31:[1,77],47:114,51:109,52:[2,58],57:[2,58],58:110,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{14:119,28:[1,120]},{7:121,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:123,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:124,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:125,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:127,8:126,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],136:[1,128],137:[1,36],138:[1,37]},{15:130,16:131,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,61:51,62:52,64:129,66:25,67:26,68:27,79:[1,74],86:[1,28],92:[1,62],93:[1,63],94:[1,61],105:[1,60]},{15:130,16:131,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,61:51,62:52,64:133,66:25,67:26,68:27,79:[1,74],86:[1,28],92:[1,62],93:[1,63],94:[1,61],105:[1,60]},{1:[2,76],6:[2,76],28:[2,76],29:[2,76],43:[2,76],52:[2,76],57:[2,76],60:[2,76],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,76],77:[2,76],81:[2,76],83:[1,137],88:[2,76],89:[2,76],90:[2,76],95:[2,76],97:[2,76],106:[2,76],108:[2,76],109:[2,76],110:[2,76],114:[2,76],122:[2,76],130:[2,76],133:[2,76],134:[2,76],137:[1,134],138:[1,135],139:[2,76],140:[2,76],141:[2,76],142:[2,76],143:[2,76],144:[2,76],145:[2,76],146:[1,136]},{1:[2,190],6:[2,190],28:[2,190],29:[2,190],52:[2,190],57:[2,190],60:[2,190],76:[2,190],81:[2,190],90:[2,190],95:[2,190],97:[2,190],106:[2,190],108:[2,190],109:[2,190],110:[2,190],114:[2,190],122:[2,190],125:[1,138],130:[2,190],133:[2,190],134:[2,190],139:[2,190],140:[2,190],141:[2,190],142:[2,190],143:[2,190],144:[2,190],145:[2,190]},{14:139,28:[1,120]},{14:140,28:[1,120]},{1:[2,157],6:[2,157],28:[2,157],29:[2,157],52:[2,157],57:[2,157],60:[2,157],76:[2,157],81:[2,157],90:[2,157],95:[2,157],97:[2,157],106:[2,157],108:[2,157],109:[2,157],110:[2,157],114:[2,157],122:[2,157],130:[2,157],133:[2,157],134:[2,157],139:[2,157],140:[2,157],141:[2,157],142:[2,157],143:[2,157],144:[2,157],145:[2,157]},{14:141,28:[1,120]},{7:142,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,143],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,101],6:[2,101],14:144,15:130,16:131,28:[1,120],29:[2,101],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,52:[2,101],57:[2,101],60:[2,101],61:51,62:52,64:146,66:25,67:26,68:27,76:[2,101],79:[1,74],81:[2,101],83:[1,145],86:[1,28],90:[2,101],92:[1,62],93:[1,63],94:[1,61],95:[2,101],97:[2,101],105:[1,60],106:[2,101],108:[2,101],109:[2,101],110:[2,101],114:[2,101],122:[2,101],130:[2,101],133:[2,101],134:[2,101],139:[2,101],140:[2,101],141:[2,101],142:[2,101],143:[2,101],144:[2,101],145:[2,101]},{7:147,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{85:148,89:[1,108]},{1:[2,50],6:[2,50],7:149,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[2,50],29:[2,50],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],52:[2,50],53:30,54:[1,64],55:[1,65],57:[2,50],60:[2,50],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,50],79:[1,74],81:[2,50],82:[1,45],86:[1,28],87:[1,47],90:[2,50],92:[1,62],93:[1,63],94:[1,61],95:[2,50],97:[2,50],100:[1,40],104:[1,46],105:[1,60],106:[2,50],107:41,108:[2,50],109:[2,50],110:[2,50],111:42,112:[1,71],113:43,114:[2,50],115:73,122:[2,50],123:[1,44],128:39,129:[1,68],130:[2,50],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37],139:[2,50],140:[2,50],141:[2,50],142:[2,50],143:[2,50],144:[2,50],145:[2,50]},{1:[2,51],6:[2,51],28:[2,51],29:[2,51],52:[2,51],57:[2,51],60:[2,51],76:[2,51],81:[2,51],90:[2,51],95:[2,51],97:[2,51],106:[2,51],108:[2,51],109:[2,51],110:[2,51],114:[2,51],122:[2,51],130:[2,51],133:[2,51],134:[2,51],139:[2,51],140:[2,51],141:[2,51],142:[2,51],143:[2,51],144:[2,51],145:[2,51]},{7:151,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],14:150,15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,120],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,77],6:[2,77],28:[2,77],29:[2,77],43:[2,77],52:[2,77],57:[2,77],60:[2,77],69:[2,77],70:[2,77],71:[2,77],72:[2,77],74:[2,77],76:[2,77],77:[2,77],81:[2,77],88:[2,77],89:[2,77],90:[2,77],95:[2,77],97:[2,77],106:[2,77],108:[2,77],109:[2,77],110:[2,77],114:[2,77],122:[2,77],130:[2,77],133:[2,77],134:[2,77],139:[2,77],140:[2,77],141:[2,77],142:[2,77],143:[2,77],144:[2,77],145:[2,77]},{1:[2,78],6:[2,78],28:[2,78],29:[2,78],43:[2,78],52:[2,78],57:[2,78],60:[2,78],69:[2,78],70:[2,78],71:[2,78],72:[2,78],74:[2,78],76:[2,78],77:[2,78],81:[2,78],88:[2,78],89:[2,78],90:[2,78],95:[2,78],97:[2,78],106:[2,78],108:[2,78],109:[2,78],110:[2,78],114:[2,78],122:[2,78],130:[2,78],133:[2,78],134:[2,78],139:[2,78],140:[2,78],141:[2,78],142:[2,78],143:[2,78],144:[2,78],145:[2,78]},{1:[2,32],6:[2,32],28:[2,32],29:[2,32],52:[2,32],57:[2,32],60:[2,32],69:[2,32],70:[2,32],71:[2,32],72:[2,32],74:[2,32],76:[2,32],77:[2,32],81:[2,32],88:[2,32],89:[2,32],90:[2,32],95:[2,32],97:[2,32],106:[2,32],108:[2,32],109:[2,32],110:[2,32],114:[2,32],122:[2,32],130:[2,32],133:[2,32],134:[2,32],139:[2,32],140:[2,32],141:[2,32],142:[2,32],143:[2,32],144:[2,32],145:[2,32]},{1:[2,33],6:[2,33],28:[2,33],29:[2,33],52:[2,33],57:[2,33],60:[2,33],69:[2,33],70:[2,33],71:[2,33],72:[2,33],74:[2,33],76:[2,33],77:[2,33],81:[2,33],88:[2,33],89:[2,33],90:[2,33],95:[2,33],97:[2,33],106:[2,33],108:[2,33],109:[2,33],110:[2,33],114:[2,33],122:[2,33],130:[2,33],133:[2,33],134:[2,33],139:[2,33],140:[2,33],141:[2,33],142:[2,33],143:[2,33],144:[2,33],145:[2,33]},{1:[2,34],6:[2,34],28:[2,34],29:[2,34],52:[2,34],57:[2,34],60:[2,34],69:[2,34],70:[2,34],71:[2,34],72:[2,34],74:[2,34],76:[2,34],77:[2,34],81:[2,34],88:[2,34],89:[2,34],90:[2,34],95:[2,34],97:[2,34],106:[2,34],108:[2,34],109:[2,34],110:[2,34],114:[2,34],122:[2,34],130:[2,34],133:[2,34],134:[2,34],139:[2,34],140:[2,34],141:[2,34],142:[2,34],143:[2,34],144:[2,34],145:[2,34]},{1:[2,35],6:[2,35],28:[2,35],29:[2,35],52:[2,35],57:[2,35],60:[2,35],69:[2,35],70:[2,35],71:[2,35],72:[2,35],74:[2,35],76:[2,35],77:[2,35],81:[2,35],88:[2,35],89:[2,35],90:[2,35],95:[2,35],97:[2,35],106:[2,35],108:[2,35],109:[2,35],110:[2,35],114:[2,35],122:[2,35],130:[2,35],133:[2,35],134:[2,35],139:[2,35],140:[2,35],141:[2,35],142:[2,35],143:[2,35],144:[2,35],145:[2,35]},{1:[2,36],6:[2,36],28:[2,36],29:[2,36],52:[2,36],57:[2,36],60:[2,36],69:[2,36],70:[2,36],71:[2,36],72:[2,36],74:[2,36],76:[2,36],77:[2,36],81:[2,36],88:[2,36],89:[2,36],90:[2,36],95:[2,36],97:[2,36],106:[2,36],108:[2,36],109:[2,36],110:[2,36],114:[2,36],122:[2,36],130:[2,36],133:[2,36],134:[2,36],139:[2,36],140:[2,36],141:[2,36],142:[2,36],143:[2,36],144:[2,36],145:[2,36]},{1:[2,37],6:[2,37],28:[2,37],29:[2,37],52:[2,37],57:[2,37],60:[2,37],69:[2,37],70:[2,37],71:[2,37],72:[2,37],74:[2,37],76:[2,37],77:[2,37],81:[2,37],88:[2,37],89:[2,37],90:[2,37],95:[2,37],97:[2,37],106:[2,37],108:[2,37],109:[2,37],110:[2,37],114:[2,37],122:[2,37],130:[2,37],133:[2,37],134:[2,37],139:[2,37],140:[2,37],141:[2,37],142:[2,37],143:[2,37],144:[2,37],145:[2,37]},{1:[2,38],6:[2,38],28:[2,38],29:[2,38],52:[2,38],57:[2,38],60:[2,38],69:[2,38],70:[2,38],71:[2,38],72:[2,38],74:[2,38],76:[2,38],77:[2,38],81:[2,38],88:[2,38],89:[2,38],90:[2,38],95:[2,38],97:[2,38],106:[2,38],108:[2,38],109:[2,38],110:[2,38],114:[2,38],122:[2,38],130:[2,38],133:[2,38],134:[2,38],139:[2,38],140:[2,38],141:[2,38],142:[2,38],143:[2,38],144:[2,38],145:[2,38]},{4:152,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,153],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:154,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:156,92:[1,62],93:[1,63],94:[1,61],95:[1,155],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,118],6:[2,118],28:[2,118],29:[2,118],52:[2,118],57:[2,118],60:[2,118],69:[2,118],70:[2,118],71:[2,118],72:[2,118],74:[2,118],76:[2,118],77:[2,118],81:[2,118],88:[2,118],89:[2,118],90:[2,118],95:[2,118],97:[2,118],106:[2,118],108:[2,118],109:[2,118],110:[2,118],114:[2,118],122:[2,118],130:[2,118],133:[2,118],134:[2,118],139:[2,118],140:[2,118],141:[2,118],142:[2,118],143:[2,118],144:[2,118],145:[2,118]},{1:[2,119],6:[2,119],28:[2,119],29:[2,119],30:161,31:[1,77],52:[2,119],57:[2,119],60:[2,119],69:[2,119],70:[2,119],71:[2,119],72:[2,119],74:[2,119],76:[2,119],77:[2,119],81:[2,119],88:[2,119],89:[2,119],90:[2,119],95:[2,119],97:[2,119],106:[2,119],108:[2,119],109:[2,119],110:[2,119],114:[2,119],122:[2,119],130:[2,119],133:[2,119],134:[2,119],139:[2,119],140:[2,119],141:[2,119],142:[2,119],143:[2,119],144:[2,119],145:[2,119]},{28:[2,54]},{28:[2,55]},{1:[2,72],6:[2,72],28:[2,72],29:[2,72],43:[2,72],52:[2,72],57:[2,72],60:[2,72],69:[2,72],70:[2,72],71:[2,72],72:[2,72],74:[2,72],76:[2,72],77:[2,72],81:[2,72],83:[2,72],88:[2,72],89:[2,72],90:[2,72],95:[2,72],97:[2,72],106:[2,72],108:[2,72],109:[2,72],110:[2,72],114:[2,72],122:[2,72],130:[2,72],133:[2,72],134:[2,72],137:[2,72],138:[2,72],139:[2,72],140:[2,72],141:[2,72],142:[2,72],143:[2,72],144:[2,72],145:[2,72],146:[2,72]},{1:[2,75],6:[2,75],28:[2,75],29:[2,75],43:[2,75],52:[2,75],57:[2,75],60:[2,75],69:[2,75],70:[2,75],71:[2,75],72:[2,75],74:[2,75],76:[2,75],77:[2,75],81:[2,75],83:[2,75],88:[2,75],89:[2,75],90:[2,75],95:[2,75],97:[2,75],106:[2,75],108:[2,75],109:[2,75],110:[2,75],114:[2,75],122:[2,75],130:[2,75],133:[2,75],134:[2,75],137:[2,75],138:[2,75],139:[2,75],140:[2,75],141:[2,75],142:[2,75],143:[2,75],144:[2,75],145:[2,75],146:[2,75]},{7:162,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:163,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:164,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:166,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],14:165,15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,120],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{30:171,31:[1,77],47:172,61:173,62:174,67:167,79:[1,74],93:[1,117],94:[1,61],117:168,118:[1,169],119:170},{116:175,120:[1,176],121:[1,177]},{6:[2,96],10:181,28:[2,96],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:179,45:180,47:184,49:[1,49],57:[2,96],80:178,81:[2,96],93:[1,117]},{1:[2,30],6:[2,30],28:[2,30],29:[2,30],46:[2,30],52:[2,30],57:[2,30],60:[2,30],69:[2,30],70:[2,30],71:[2,30],72:[2,30],74:[2,30],76:[2,30],77:[2,30],81:[2,30],88:[2,30],89:[2,30],90:[2,30],95:[2,30],97:[2,30],106:[2,30],108:[2,30],109:[2,30],110:[2,30],114:[2,30],122:[2,30],130:[2,30],133:[2,30],134:[2,30],139:[2,30],140:[2,30],141:[2,30],142:[2,30],143:[2,30],144:[2,30],145:[2,30]},{1:[2,31],6:[2,31],28:[2,31],29:[2,31],46:[2,31],52:[2,31],57:[2,31],60:[2,31],69:[2,31],70:[2,31],71:[2,31],72:[2,31],74:[2,31],76:[2,31],77:[2,31],81:[2,31],88:[2,31],89:[2,31],90:[2,31],95:[2,31],97:[2,31],106:[2,31],108:[2,31],109:[2,31],110:[2,31],114:[2,31],122:[2,31],130:[2,31],133:[2,31],134:[2,31],139:[2,31],140:[2,31],141:[2,31],142:[2,31],143:[2,31],144:[2,31],145:[2,31]},{1:[2,29],6:[2,29],28:[2,29],29:[2,29],43:[2,29],46:[2,29],52:[2,29],57:[2,29],60:[2,29],69:[2,29],70:[2,29],71:[2,29],72:[2,29],74:[2,29],76:[2,29],77:[2,29],81:[2,29],83:[2,29],88:[2,29],89:[2,29],90:[2,29],95:[2,29],97:[2,29],106:[2,29],108:[2,29],109:[2,29],110:[2,29],114:[2,29],120:[2,29],121:[2,29],122:[2,29],130:[2,29],133:[2,29],134:[2,29],137:[2,29],138:[2,29],139:[2,29],140:[2,29],141:[2,29],142:[2,29],143:[2,29],144:[2,29],145:[2,29],146:[2,29]},{1:[2,5],5:185,6:[2,5],7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,29:[2,5],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],106:[2,5],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,205],6:[2,205],28:[2,205],29:[2,205],52:[2,205],57:[2,205],60:[2,205],76:[2,205],81:[2,205],90:[2,205],95:[2,205],97:[2,205],106:[2,205],108:[2,205],109:[2,205],110:[2,205],114:[2,205],122:[2,205],130:[2,205],133:[2,205],134:[2,205],139:[2,205],140:[2,205],141:[2,205],142:[2,205],143:[2,205],144:[2,205],145:[2,205]},{7:186,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:187,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:188,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:189,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:190,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:191,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:192,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:193,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:194,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,156],6:[2,156],28:[2,156],29:[2,156],52:[2,156],57:[2,156],60:[2,156],76:[2,156],81:[2,156],90:[2,156],95:[2,156],97:[2,156],106:[2,156],108:[2,156],109:[2,156],110:[2,156],114:[2,156],122:[2,156],130:[2,156],133:[2,156],134:[2,156],139:[2,156],140:[2,156],141:[2,156],142:[2,156],143:[2,156],144:[2,156],145:[2,156]},{1:[2,161],6:[2,161],28:[2,161],29:[2,161],52:[2,161],57:[2,161],60:[2,161],76:[2,161],81:[2,161],90:[2,161],95:[2,161],97:[2,161],106:[2,161],108:[2,161],109:[2,161],110:[2,161],114:[2,161],122:[2,161],130:[2,161],133:[2,161],134:[2,161],139:[2,161],140:[2,161],141:[2,161],142:[2,161],143:[2,161],144:[2,161],145:[2,161]},{7:195,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,155],6:[2,155],28:[2,155],29:[2,155],52:[2,155],57:[2,155],60:[2,155],76:[2,155],81:[2,155],90:[2,155],95:[2,155],97:[2,155],106:[2,155],108:[2,155],109:[2,155],110:[2,155],114:[2,155],122:[2,155],130:[2,155],133:[2,155],134:[2,155],139:[2,155],140:[2,155],141:[2,155],142:[2,155],143:[2,155],144:[2,155],145:[2,155]},{1:[2,160],6:[2,160],28:[2,160],29:[2,160],52:[2,160],57:[2,160],60:[2,160],76:[2,160],81:[2,160],90:[2,160],95:[2,160],97:[2,160],106:[2,160],108:[2,160],109:[2,160],110:[2,160],114:[2,160],122:[2,160],130:[2,160],133:[2,160],134:[2,160],139:[2,160],140:[2,160],141:[2,160],142:[2,160],143:[2,160],144:[2,160],145:[2,160]},{85:196,89:[1,108]},{1:[2,73],6:[2,73],28:[2,73],29:[2,73],43:[2,73],52:[2,73],57:[2,73],60:[2,73],69:[2,73],70:[2,73],71:[2,73],72:[2,73],74:[2,73],76:[2,73],77:[2,73],81:[2,73],83:[2,73],88:[2,73],89:[2,73],90:[2,73],95:[2,73],97:[2,73],106:[2,73],108:[2,73],109:[2,73],110:[2,73],114:[2,73],122:[2,73],130:[2,73],133:[2,73],134:[2,73],137:[2,73],138:[2,73],139:[2,73],140:[2,73],141:[2,73],142:[2,73],143:[2,73],144:[2,73],145:[2,73],146:[2,73]},{89:[2,115]},{27:198,30:197,31:[1,77],87:[1,47]},{30:199,31:[1,77]},{1:[2,89],6:[2,89],28:[2,89],29:[2,89],30:200,31:[1,77],43:[2,89],52:[2,89],57:[2,89],60:[2,89],69:[2,89],70:[2,89],71:[2,89],72:[2,89],74:[2,89],76:[2,89],77:[2,89],81:[2,89],83:[2,89],88:[2,89],89:[2,89],90:[2,89],95:[2,89],97:[2,89],106:[2,89],108:[2,89],109:[2,89],110:[2,89],114:[2,89],122:[2,89],130:[2,89],133:[2,89],134:[2,89],137:[2,89],138:[2,89],139:[2,89],140:[2,89],141:[2,89],142:[2,89],143:[2,89],144:[2,89],145:[2,89],146:[2,89]},{30:201,31:[1,77]},{1:[2,90],6:[2,90],28:[2,90],29:[2,90],43:[2,90],52:[2,90],57:[2,90],60:[2,90],69:[2,90],70:[2,90],71:[2,90],72:[2,90],74:[2,90],76:[2,90],77:[2,90],81:[2,90],83:[2,90],88:[2,90],89:[2,90],90:[2,90],95:[2,90],97:[2,90],106:[2,90],108:[2,90],109:[2,90],110:[2,90],114:[2,90],122:[2,90],130:[2,90],133:[2,90],134:[2,90],137:[2,90],138:[2,90],139:[2,90],140:[2,90],141:[2,90],142:[2,90],143:[2,90],144:[2,90],145:[2,90],146:[2,90]},{7:203,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,207],61:51,62:52,64:38,66:25,67:26,68:27,75:202,78:204,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],96:205,97:[1,206],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{73:208,74:[1,102],77:[1,103]},{85:209,89:[1,108]},{1:[2,74],6:[2,74],28:[2,74],29:[2,74],43:[2,74],52:[2,74],57:[2,74],60:[2,74],69:[2,74],70:[2,74],71:[2,74],72:[2,74],74:[2,74],76:[2,74],77:[2,74],81:[2,74],83:[2,74],88:[2,74],89:[2,74],90:[2,74],95:[2,74],97:[2,74],106:[2,74],108:[2,74],109:[2,74],110:[2,74],114:[2,74],122:[2,74],130:[2,74],133:[2,74],134:[2,74],137:[2,74],138:[2,74],139:[2,74],140:[2,74],141:[2,74],142:[2,74],143:[2,74],144:[2,74],145:[2,74],146:[2,74]},{6:[1,211],7:210,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,212],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,112],6:[2,112],28:[2,112],29:[2,112],52:[2,112],57:[2,112],60:[2,112],69:[2,112],70:[2,112],71:[2,112],72:[2,112],74:[2,112],76:[2,112],77:[2,112],81:[2,112],88:[2,112],89:[2,112],90:[2,112],95:[2,112],97:[2,112],106:[2,112],108:[2,112],109:[2,112],110:[2,112],114:[2,112],122:[2,112],130:[2,112],133:[2,112],134:[2,112],139:[2,112],140:[2,112],141:[2,112],142:[2,112],143:[2,112],144:[2,112],145:[2,112]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],90:[1,213],91:214,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],52:[1,216],56:218,57:[1,217]},{6:[2,59],28:[2,59],29:[2,59],52:[2,59],57:[2,59]},{6:[2,63],28:[2,63],29:[2,63],43:[1,220],52:[2,63],57:[2,63],60:[1,219]},{6:[2,66],28:[2,66],29:[2,66],52:[2,66],57:[2,66]},{6:[2,67],28:[2,67],29:[2,67],43:[2,67],52:[2,67],57:[2,67],60:[2,67]},{6:[2,68],28:[2,68],29:[2,68],43:[2,68],52:[2,68],57:[2,68],60:[2,68]},{6:[2,69],28:[2,69],29:[2,69],43:[2,69],52:[2,69],57:[2,69],60:[2,69]},{6:[2,70],28:[2,70],29:[2,70],43:[2,70],52:[2,70],57:[2,70],60:[2,70]},{30:161,31:[1,77]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:156,92:[1,62],93:[1,63],94:[1,61],95:[1,155],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,53],6:[2,53],28:[2,53],29:[2,53],52:[2,53],57:[2,53],60:[2,53],76:[2,53],81:[2,53],90:[2,53],95:[2,53],97:[2,53],106:[2,53],108:[2,53],109:[2,53],110:[2,53],114:[2,53],122:[2,53],130:[2,53],133:[2,53],134:[2,53],139:[2,53],140:[2,53],141:[2,53],142:[2,53],143:[2,53],144:[2,53],145:[2,53]},{4:222,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,29:[1,221],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,194],6:[2,194],28:[2,194],29:[2,194],52:[2,194],57:[2,194],60:[2,194],76:[2,194],81:[2,194],90:[2,194],95:[2,194],97:[2,194],106:[2,194],107:89,108:[2,194],109:[2,194],110:[2,194],113:90,114:[2,194],115:73,122:[2,194],130:[2,194],133:[2,194],134:[2,194],139:[1,79],140:[2,194],141:[2,194],142:[2,194],143:[2,194],144:[2,194],145:[2,194]},{107:92,108:[1,69],110:[1,70],113:93,114:[1,72],115:73,130:[1,91]},{1:[2,195],6:[2,195],28:[2,195],29:[2,195],52:[2,195],57:[2,195],60:[2,195],76:[2,195],81:[2,195],90:[2,195],95:[2,195],97:[2,195],106:[2,195],107:89,108:[2,195],109:[2,195],110:[2,195],113:90,114:[2,195],115:73,122:[2,195],130:[2,195],133:[2,195],134:[2,195],139:[1,79],140:[2,195],141:[1,83],142:[2,195],143:[2,195],144:[2,195],145:[2,195]},{1:[2,196],6:[2,196],28:[2,196],29:[2,196],52:[2,196],57:[2,196],60:[2,196],76:[2,196],81:[2,196],90:[2,196],95:[2,196],97:[2,196],106:[2,196],107:89,108:[2,196],109:[2,196],110:[2,196],113:90,114:[2,196],115:73,122:[2,196],130:[2,196],133:[2,196],134:[2,196],139:[1,79],140:[2,196],141:[1,83],142:[2,196],143:[2,196],144:[2,196],145:[2,196]},{1:[2,197],6:[2,197],28:[2,197],29:[2,197],52:[2,197],57:[2,197],60:[2,197],76:[2,197],81:[2,197],90:[2,197],95:[2,197],97:[2,197],106:[2,197],107:89,108:[2,197],109:[2,197],110:[2,197],113:90,114:[2,197],115:73,122:[2,197],130:[2,197],133:[2,197],134:[2,197],139:[1,79],140:[2,197],141:[1,83],142:[2,197],143:[2,197],144:[2,197],145:[2,197]},{1:[2,198],6:[2,198],28:[2,198],29:[2,198],52:[2,198],57:[2,198],60:[2,198],76:[2,198],81:[2,198],90:[2,198],95:[2,198],97:[2,198],106:[2,198],107:92,108:[2,198],109:[2,198],110:[2,198],113:93,114:[2,198],115:73,122:[2,198],130:[2,198],133:[2,198],134:[2,198],139:[2,198],140:[2,198],141:[2,198],142:[2,198],143:[2,198],144:[2,198],145:[2,198]},{1:[2,199],6:[2,199],28:[2,199],29:[2,199],52:[2,199],57:[2,199],60:[2,199],76:[2,199],81:[2,199],90:[2,199],95:[2,199],97:[2,199],106:[2,199],107:89,108:[2,199],109:[2,199],110:[2,199],113:90,114:[2,199],115:73,122:[2,199],130:[2,199],133:[2,199],134:[2,199],139:[1,79],140:[2,199],141:[2,199],142:[2,199],143:[2,199],144:[2,199],145:[2,199]},{7:223,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,201],6:[2,201],28:[2,201],29:[2,201],52:[2,201],57:[2,201],60:[2,201],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,201],77:[2,76],81:[2,201],88:[2,76],89:[2,76],90:[2,201],95:[2,201],97:[2,201],106:[2,201],108:[2,201],109:[2,201],110:[2,201],114:[2,201],122:[2,201],130:[2,201],133:[2,201],134:[2,201],139:[2,201],140:[2,201],141:[2,201],142:[2,201],143:[2,201],144:[2,201],145:[2,201]},{65:95,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],77:[1,103],84:94,88:[1,96],89:[2,114]},{65:105,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],77:[1,103],84:104,88:[1,96],89:[2,114]},{69:[2,79],70:[2,79],71:[2,79],72:[2,79],74:[2,79],77:[2,79],88:[2,79],89:[2,79]},{1:[2,202],6:[2,202],28:[2,202],29:[2,202],52:[2,202],57:[2,202],60:[2,202],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,202],77:[2,76],81:[2,202],88:[2,76],89:[2,76],90:[2,202],95:[2,202],97:[2,202],106:[2,202],108:[2,202],109:[2,202],110:[2,202],114:[2,202],122:[2,202],130:[2,202],133:[2,202],134:[2,202],139:[2,202],140:[2,202],141:[2,202],142:[2,202],143:[2,202],144:[2,202],145:[2,202]},{1:[2,203],6:[2,203],28:[2,203],29:[2,203],52:[2,203],57:[2,203],60:[2,203],76:[2,203],81:[2,203],90:[2,203],95:[2,203],97:[2,203],106:[2,203],108:[2,203],109:[2,203],110:[2,203],114:[2,203],122:[2,203],130:[2,203],133:[2,203],134:[2,203],139:[2,203],140:[2,203],141:[2,203],142:[2,203],143:[2,203],144:[2,203],145:[2,203]},{1:[2,204],6:[2,204],28:[2,204],29:[2,204],52:[2,204],57:[2,204],60:[2,204],76:[2,204],81:[2,204],90:[2,204],95:[2,204],97:[2,204],106:[2,204],108:[2,204],109:[2,204],110:[2,204],114:[2,204],122:[2,204],130:[2,204],133:[2,204],134:[2,204],139:[2,204],140:[2,204],141:[2,204],142:[2,204],143:[2,204],144:[2,204],145:[2,204]},{6:[1,226],7:224,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,225],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:227,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{14:228,28:[1,120],129:[1,229]},{1:[2,140],6:[2,140],28:[2,140],29:[2,140],52:[2,140],57:[2,140],60:[2,140],76:[2,140],81:[2,140],90:[2,140],95:[2,140],97:[2,140],101:230,102:[1,231],103:[1,232],106:[2,140],108:[2,140],109:[2,140],110:[2,140],114:[2,140],122:[2,140],130:[2,140],133:[2,140],134:[2,140],139:[2,140],140:[2,140],141:[2,140],142:[2,140],143:[2,140],144:[2,140],145:[2,140]},{1:[2,154],6:[2,154],28:[2,154],29:[2,154],52:[2,154],57:[2,154],60:[2,154],76:[2,154],81:[2,154],90:[2,154],95:[2,154],97:[2,154],106:[2,154],108:[2,154],109:[2,154],110:[2,154],114:[2,154],122:[2,154],130:[2,154],133:[2,154],134:[2,154],139:[2,154],140:[2,154],141:[2,154],142:[2,154],143:[2,154],144:[2,154],145:[2,154]},{1:[2,162],6:[2,162],28:[2,162],29:[2,162],52:[2,162],57:[2,162],60:[2,162],76:[2,162],81:[2,162],90:[2,162],95:[2,162],97:[2,162],106:[2,162],108:[2,162],109:[2,162],110:[2,162],114:[2,162],122:[2,162],130:[2,162],133:[2,162],134:[2,162],139:[2,162],140:[2,162],141:[2,162],142:[2,162],143:[2,162],144:[2,162],145:[2,162]},{28:[1,233],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{124:234,126:235,127:[1,236]},{1:[2,102],6:[2,102],28:[2,102],29:[2,102],52:[2,102],57:[2,102],60:[2,102],76:[2,102],81:[2,102],90:[2,102],95:[2,102],97:[2,102],106:[2,102],108:[2,102],109:[2,102],110:[2,102],114:[2,102],122:[2,102],130:[2,102],133:[2,102],134:[2,102],139:[2,102],140:[2,102],141:[2,102],142:[2,102],143:[2,102],144:[2,102],145:[2,102]},{7:237,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,105],6:[2,105],14:238,28:[1,120],29:[2,105],52:[2,105],57:[2,105],60:[2,105],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,105],77:[2,76],81:[2,105],83:[1,239],88:[2,76],89:[2,76],90:[2,105],95:[2,105],97:[2,105],106:[2,105],108:[2,105],109:[2,105],110:[2,105],114:[2,105],122:[2,105],130:[2,105],133:[2,105],134:[2,105],139:[2,105],140:[2,105],141:[2,105],142:[2,105],143:[2,105],144:[2,105],145:[2,105]},{1:[2,147],6:[2,147],28:[2,147],29:[2,147],52:[2,147],57:[2,147],60:[2,147],76:[2,147],81:[2,147],90:[2,147],95:[2,147],97:[2,147],106:[2,147],107:89,108:[2,147],109:[2,147],110:[2,147],113:90,114:[2,147],115:73,122:[2,147],130:[2,147],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,113],6:[2,113],28:[2,113],29:[2,113],43:[2,113],52:[2,113],57:[2,113],60:[2,113],69:[2,113],70:[2,113],71:[2,113],72:[2,113],74:[2,113],76:[2,113],77:[2,113],81:[2,113],83:[2,113],88:[2,113],89:[2,113],90:[2,113],95:[2,113],97:[2,113],106:[2,113],108:[2,113],109:[2,113],110:[2,113],114:[2,113],122:[2,113],130:[2,113],133:[2,113],134:[2,113],137:[2,113],138:[2,113],139:[2,113],140:[2,113],141:[2,113],142:[2,113],143:[2,113],144:[2,113],145:[2,113],146:[2,113]},{1:[2,49],6:[2,49],28:[2,49],29:[2,49],52:[2,49],57:[2,49],60:[2,49],76:[2,49],81:[2,49],90:[2,49],95:[2,49],97:[2,49],106:[2,49],107:89,108:[2,49],109:[2,49],110:[2,49],113:90,114:[2,49],115:73,122:[2,49],130:[2,49],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,12],6:[2,12],28:[2,12],29:[2,12],52:[2,12],57:[2,12],60:[2,12],76:[2,12],81:[2,12],90:[2,12],95:[2,12],97:[2,12],106:[2,12],108:[2,12],109:[2,12],110:[2,12],114:[2,12],122:[2,12],130:[2,12],133:[2,12],134:[2,12],139:[2,12],140:[2,12],141:[2,12],142:[2,12],143:[2,12],144:[2,12],145:[2,12]},{1:[2,13],6:[2,13],28:[2,13],29:[2,13],52:[2,13],57:[2,13],60:[2,13],76:[2,13],81:[2,13],90:[2,13],95:[2,13],97:[2,13],106:[2,13],107:89,108:[1,69],109:[2,13],110:[1,70],113:90,114:[1,72],115:73,122:[2,13],130:[2,13],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,78],106:[1,240]},{4:241,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,135],28:[2,135],57:[2,135],60:[1,243],95:[2,135],96:242,97:[1,206],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,121],6:[2,121],28:[2,121],29:[2,121],43:[2,121],52:[2,121],57:[2,121],60:[2,121],69:[2,121],70:[2,121],71:[2,121],72:[2,121],74:[2,121],76:[2,121],77:[2,121],81:[2,121],88:[2,121],89:[2,121],90:[2,121],95:[2,121],97:[2,121],106:[2,121],108:[2,121],109:[2,121],110:[2,121],114:[2,121],120:[2,121],121:[2,121],122:[2,121],130:[2,121],133:[2,121],134:[2,121],139:[2,121],140:[2,121],141:[2,121],142:[2,121],143:[2,121],144:[2,121],145:[2,121]},{6:[2,56],28:[2,56],56:244,57:[1,245],95:[2,56]},{6:[2,130],28:[2,130],29:[2,130],57:[2,130],90:[2,130],95:[2,130]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:246,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,136],28:[2,136],29:[2,136],57:[2,136],90:[2,136],95:[2,136]},{6:[2,137],28:[2,137],29:[2,137],57:[2,137],90:[2,137],95:[2,137]},{1:[2,120],6:[2,120],28:[2,120],29:[2,120],43:[2,120],46:[2,120],52:[2,120],57:[2,120],60:[2,120],69:[2,120],70:[2,120],71:[2,120],72:[2,120],74:[2,120],76:[2,120],77:[2,120],81:[2,120],83:[2,120],88:[2,120],89:[2,120],90:[2,120],95:[2,120],97:[2,120],106:[2,120],108:[2,120],109:[2,120],110:[2,120],114:[2,120],120:[2,120],121:[2,120],122:[2,120],130:[2,120],133:[2,120],134:[2,120],137:[2,120],138:[2,120],139:[2,120],140:[2,120],141:[2,120],142:[2,120],143:[2,120],144:[2,120],145:[2,120],146:[2,120]},{14:247,28:[1,120],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,150],6:[2,150],28:[2,150],29:[2,150],52:[2,150],57:[2,150],60:[2,150],76:[2,150],81:[2,150],90:[2,150],95:[2,150],97:[2,150],106:[2,150],107:89,108:[1,69],109:[1,248],110:[1,70],113:90,114:[1,72],115:73,122:[2,150],130:[2,150],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,152],6:[2,152],28:[2,152],29:[2,152],52:[2,152],57:[2,152],60:[2,152],76:[2,152],81:[2,152],90:[2,152],95:[2,152],97:[2,152],106:[2,152],107:89,108:[1,69],109:[1,249],110:[1,70],113:90,114:[1,72],115:73,122:[2,152],130:[2,152],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,158],6:[2,158],28:[2,158],29:[2,158],52:[2,158],57:[2,158],60:[2,158],76:[2,158],81:[2,158],90:[2,158],95:[2,158],97:[2,158],106:[2,158],108:[2,158],109:[2,158],110:[2,158],114:[2,158],122:[2,158],130:[2,158],133:[2,158],134:[2,158],139:[2,158],140:[2,158],141:[2,158],142:[2,158],143:[2,158],144:[2,158],145:[2,158]},{1:[2,159],6:[2,159],28:[2,159],29:[2,159],52:[2,159],57:[2,159],60:[2,159],76:[2,159],81:[2,159],90:[2,159],95:[2,159],97:[2,159],106:[2,159],107:89,108:[1,69],109:[2,159],110:[1,70],113:90,114:[1,72],115:73,122:[2,159],130:[2,159],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,163],6:[2,163],28:[2,163],29:[2,163],52:[2,163],57:[2,163],60:[2,163],76:[2,163],81:[2,163],90:[2,163],95:[2,163],97:[2,163],106:[2,163],108:[2,163],109:[2,163],110:[2,163],114:[2,163],122:[2,163],130:[2,163],133:[2,163],134:[2,163],139:[2,163],140:[2,163],141:[2,163],142:[2,163],143:[2,163],144:[2,163],145:[2,163]},{120:[2,165],121:[2,165]},{30:171,31:[1,77],47:172,61:173,62:174,79:[1,74],93:[1,117],94:[1,118],117:250,119:170},{57:[1,251],120:[2,171],121:[2,171]},{57:[2,167],120:[2,167],121:[2,167]},{57:[2,168],120:[2,168],121:[2,168]},{57:[2,169],120:[2,169],121:[2,169]},{57:[2,170],120:[2,170],121:[2,170]},{1:[2,164],6:[2,164],28:[2,164],29:[2,164],52:[2,164],57:[2,164],60:[2,164],76:[2,164],81:[2,164],90:[2,164],95:[2,164],97:[2,164],106:[2,164],108:[2,164],109:[2,164],110:[2,164],114:[2,164],122:[2,164],130:[2,164],133:[2,164],134:[2,164],139:[2,164],140:[2,164],141:[2,164],142:[2,164],143:[2,164],144:[2,164],145:[2,164]},{7:252,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:253,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],56:254,57:[1,255],81:[2,56]},{6:[2,97],28:[2,97],29:[2,97],57:[2,97],81:[2,97]},{6:[2,42],28:[2,42],29:[2,42],46:[1,256],57:[2,42],81:[2,42]},{6:[2,45],28:[2,45],29:[2,45],57:[2,45],81:[2,45]},{6:[2,46],28:[2,46],29:[2,46],46:[2,46],57:[2,46],81:[2,46]},{6:[2,47],28:[2,47],29:[2,47],46:[2,47],57:[2,47],81:[2,47]},{6:[2,48],28:[2,48],29:[2,48],46:[2,48],57:[2,48],81:[2,48]},{1:[2,4],6:[2,4],29:[2,4],106:[2,4]},{1:[2,206],6:[2,206],28:[2,206],29:[2,206],52:[2,206],57:[2,206],60:[2,206],76:[2,206],81:[2,206],90:[2,206],95:[2,206],97:[2,206],106:[2,206],107:89,108:[2,206],109:[2,206],110:[2,206],113:90,114:[2,206],115:73,122:[2,206],130:[2,206],133:[2,206],134:[2,206],139:[1,79],140:[1,82],141:[1,83],142:[2,206],143:[2,206],144:[2,206],145:[2,206]},{1:[2,207],6:[2,207],28:[2,207],29:[2,207],52:[2,207],57:[2,207],60:[2,207],76:[2,207],81:[2,207],90:[2,207],95:[2,207],97:[2,207],106:[2,207],107:89,108:[2,207],109:[2,207],110:[2,207],113:90,114:[2,207],115:73,122:[2,207],130:[2,207],133:[2,207],134:[2,207],139:[1,79],140:[1,82],141:[1,83],142:[2,207],143:[2,207],144:[2,207],145:[2,207]},{1:[2,208],6:[2,208],28:[2,208],29:[2,208],52:[2,208],57:[2,208],60:[2,208],76:[2,208],81:[2,208],90:[2,208],95:[2,208],97:[2,208],106:[2,208],107:89,108:[2,208],109:[2,208],110:[2,208],113:90,114:[2,208],115:73,122:[2,208],130:[2,208],133:[2,208],134:[2,208],139:[1,79],140:[2,208],141:[1,83],142:[2,208],143:[2,208],144:[2,208],145:[2,208]},{1:[2,209],6:[2,209],28:[2,209],29:[2,209],52:[2,209],57:[2,209],60:[2,209],76:[2,209],81:[2,209],90:[2,209],95:[2,209],97:[2,209],106:[2,209],107:89,108:[2,209],109:[2,209],110:[2,209],113:90,114:[2,209],115:73,122:[2,209],130:[2,209],133:[2,209],134:[2,209],139:[1,79],140:[2,209],141:[1,83],142:[2,209],143:[2,209],144:[2,209],145:[2,209]},{1:[2,210],6:[2,210],28:[2,210],29:[2,210],52:[2,210],57:[2,210],60:[2,210],76:[2,210],81:[2,210],90:[2,210],95:[2,210],97:[2,210],106:[2,210],107:89,108:[2,210],109:[2,210],110:[2,210],113:90,114:[2,210],115:73,122:[2,210],130:[2,210],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[2,210],143:[2,210],144:[2,210],145:[2,210]},{1:[2,211],6:[2,211],28:[2,211],29:[2,211],52:[2,211],57:[2,211],60:[2,211],76:[2,211],81:[2,211],90:[2,211],95:[2,211],97:[2,211],106:[2,211],107:89,108:[2,211],109:[2,211],110:[2,211],113:90,114:[2,211],115:73,122:[2,211],130:[2,211],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[2,211],144:[2,211],145:[1,87]},{1:[2,212],6:[2,212],28:[2,212],29:[2,212],52:[2,212],57:[2,212],60:[2,212],76:[2,212],81:[2,212],90:[2,212],95:[2,212],97:[2,212],106:[2,212],107:89,108:[2,212],109:[2,212],110:[2,212],113:90,114:[2,212],115:73,122:[2,212],130:[2,212],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[2,212],145:[1,87]},{1:[2,213],6:[2,213],28:[2,213],29:[2,213],52:[2,213],57:[2,213],60:[2,213],76:[2,213],81:[2,213],90:[2,213],95:[2,213],97:[2,213],106:[2,213],107:89,108:[2,213],109:[2,213],110:[2,213],113:90,114:[2,213],115:73,122:[2,213],130:[2,213],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[2,213],144:[2,213],145:[2,213]},{1:[2,193],6:[2,193],28:[2,193],29:[2,193],52:[2,193],57:[2,193],60:[2,193],76:[2,193],81:[2,193],90:[2,193],95:[2,193],97:[2,193],106:[2,193],107:89,108:[1,69],109:[2,193],110:[1,70],113:90,114:[1,72],115:73,122:[2,193],130:[2,193],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,192],6:[2,192],28:[2,192],29:[2,192],52:[2,192],57:[2,192],60:[2,192],76:[2,192],81:[2,192],90:[2,192],95:[2,192],97:[2,192],106:[2,192],107:89,108:[1,69],109:[2,192],110:[1,70],113:90,114:[1,72],115:73,122:[2,192],130:[2,192],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,109],6:[2,109],28:[2,109],29:[2,109],52:[2,109],57:[2,109],60:[2,109],69:[2,109],70:[2,109],71:[2,109],72:[2,109],74:[2,109],76:[2,109],77:[2,109],81:[2,109],88:[2,109],89:[2,109],90:[2,109],95:[2,109],97:[2,109],106:[2,109],108:[2,109],109:[2,109],110:[2,109],114:[2,109],122:[2,109],130:[2,109],133:[2,109],134:[2,109],139:[2,109],140:[2,109],141:[2,109],142:[2,109],143:[2,109],144:[2,109],145:[2,109]},{1:[2,84],6:[2,84],28:[2,84],29:[2,84],43:[2,84],52:[2,84],57:[2,84],60:[2,84],69:[2,84],70:[2,84],71:[2,84],72:[2,84],74:[2,84],76:[2,84],77:[2,84],81:[2,84],83:[2,84],88:[2,84],89:[2,84],90:[2,84],95:[2,84],97:[2,84],106:[2,84],108:[2,84],109:[2,84],110:[2,84],114:[2,84],122:[2,84],130:[2,84],133:[2,84],134:[2,84],137:[2,84],138:[2,84],139:[2,84],140:[2,84],141:[2,84],142:[2,84],143:[2,84],144:[2,84],145:[2,84],146:[2,84]},{1:[2,85],6:[2,85],28:[2,85],29:[2,85],43:[2,85],52:[2,85],57:[2,85],60:[2,85],69:[2,85],70:[2,85],71:[2,85],72:[2,85],74:[2,85],76:[2,85],77:[2,85],81:[2,85],83:[2,85],88:[2,85],89:[2,85],90:[2,85],95:[2,85],97:[2,85],106:[2,85],108:[2,85],109:[2,85],110:[2,85],114:[2,85],122:[2,85],130:[2,85],133:[2,85],134:[2,85],137:[2,85],138:[2,85],139:[2,85],140:[2,85],141:[2,85],142:[2,85],143:[2,85],144:[2,85],145:[2,85],146:[2,85]},{1:[2,86],6:[2,86],28:[2,86],29:[2,86],43:[2,86],52:[2,86],57:[2,86],60:[2,86],69:[2,86],70:[2,86],71:[2,86],72:[2,86],74:[2,86],76:[2,86],77:[2,86],81:[2,86],83:[2,86],88:[2,86],89:[2,86],90:[2,86],95:[2,86],97:[2,86],106:[2,86],108:[2,86],109:[2,86],110:[2,86],114:[2,86],122:[2,86],130:[2,86],133:[2,86],134:[2,86],137:[2,86],138:[2,86],139:[2,86],140:[2,86],141:[2,86],142:[2,86],143:[2,86],144:[2,86],145:[2,86],146:[2,86]},{1:[2,87],6:[2,87],28:[2,87],29:[2,87],43:[2,87],52:[2,87],57:[2,87],60:[2,87],69:[2,87],70:[2,87],71:[2,87],72:[2,87],74:[2,87],76:[2,87],77:[2,87],81:[2,87],83:[2,87],88:[2,87],89:[2,87],90:[2,87],95:[2,87],97:[2,87],106:[2,87],108:[2,87],109:[2,87],110:[2,87],114:[2,87],122:[2,87],130:[2,87],133:[2,87],134:[2,87],137:[2,87],138:[2,87],139:[2,87],140:[2,87],141:[2,87],142:[2,87],143:[2,87],144:[2,87],145:[2,87],146:[2,87]},{1:[2,88],6:[2,88],28:[2,88],29:[2,88],43:[2,88],52:[2,88],57:[2,88],60:[2,88],69:[2,88],70:[2,88],71:[2,88],72:[2,88],74:[2,88],76:[2,88],77:[2,88],81:[2,88],83:[2,88],88:[2,88],89:[2,88],90:[2,88],95:[2,88],97:[2,88],106:[2,88],108:[2,88],109:[2,88],110:[2,88],114:[2,88],122:[2,88],130:[2,88],133:[2,88],134:[2,88],137:[2,88],138:[2,88],139:[2,88],140:[2,88],141:[2,88],142:[2,88],143:[2,88],144:[2,88],145:[2,88],146:[2,88]},{76:[1,257]},{60:[1,207],76:[2,93],96:258,97:[1,206],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{76:[2,94]},{7:259,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,129],79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{11:[2,123],13:[2,123],31:[2,123],33:[2,123],34:[2,123],36:[2,123],37:[2,123],38:[2,123],39:[2,123],40:[2,123],41:[2,123],48:[2,123],49:[2,123],50:[2,123],54:[2,123],55:[2,123],76:[2,123],79:[2,123],82:[2,123],86:[2,123],87:[2,123],92:[2,123],93:[2,123],94:[2,123],100:[2,123],104:[2,123],105:[2,123],108:[2,123],110:[2,123],112:[2,123],114:[2,123],123:[2,123],129:[2,123],131:[2,123],132:[2,123],133:[2,123],134:[2,123],135:[2,123],137:[2,123],138:[2,123]},{11:[2,124],13:[2,124],31:[2,124],33:[2,124],34:[2,124],36:[2,124],37:[2,124],38:[2,124],39:[2,124],40:[2,124],41:[2,124],48:[2,124],49:[2,124],50:[2,124],54:[2,124],55:[2,124],76:[2,124],79:[2,124],82:[2,124],86:[2,124],87:[2,124],92:[2,124],93:[2,124],94:[2,124],100:[2,124],104:[2,124],105:[2,124],108:[2,124],110:[2,124],112:[2,124],114:[2,124],123:[2,124],129:[2,124],131:[2,124],132:[2,124],133:[2,124],134:[2,124],135:[2,124],137:[2,124],138:[2,124]},{1:[2,92],6:[2,92],28:[2,92],29:[2,92],43:[2,92],52:[2,92],57:[2,92],60:[2,92],69:[2,92],70:[2,92],71:[2,92],72:[2,92],74:[2,92],76:[2,92],77:[2,92],81:[2,92],83:[2,92],88:[2,92],89:[2,92],90:[2,92],95:[2,92],97:[2,92],106:[2,92],108:[2,92],109:[2,92],110:[2,92],114:[2,92],122:[2,92],130:[2,92],133:[2,92],134:[2,92],137:[2,92],138:[2,92],139:[2,92],140:[2,92],141:[2,92],142:[2,92],143:[2,92],144:[2,92],145:[2,92],146:[2,92]},{1:[2,110],6:[2,110],28:[2,110],29:[2,110],52:[2,110],57:[2,110],60:[2,110],69:[2,110],70:[2,110],71:[2,110],72:[2,110],74:[2,110],76:[2,110],77:[2,110],81:[2,110],88:[2,110],89:[2,110],90:[2,110],95:[2,110],97:[2,110],106:[2,110],108:[2,110],109:[2,110],110:[2,110],114:[2,110],122:[2,110],130:[2,110],133:[2,110],134:[2,110],139:[2,110],140:[2,110],141:[2,110],142:[2,110],143:[2,110],144:[2,110],145:[2,110]},{1:[2,39],6:[2,39],28:[2,39],29:[2,39],52:[2,39],57:[2,39],60:[2,39],76:[2,39],81:[2,39],90:[2,39],95:[2,39],97:[2,39],106:[2,39],107:89,108:[2,39],109:[2,39],110:[2,39],113:90,114:[2,39],115:73,122:[2,39],130:[2,39],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:260,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:261,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,116],6:[2,116],28:[2,116],29:[2,116],43:[2,116],52:[2,116],57:[2,116],60:[2,116],69:[2,116],70:[2,116],71:[2,116],72:[2,116],74:[2,116],76:[2,116],77:[2,116],81:[2,116],83:[2,116],88:[2,116],89:[2,116],90:[2,116],95:[2,116],97:[2,116],106:[2,116],108:[2,116],109:[2,116],110:[2,116],114:[2,116],122:[2,116],130:[2,116],133:[2,116],134:[2,116],137:[2,116],138:[2,116],139:[2,116],140:[2,116],141:[2,116],142:[2,116],143:[2,116],144:[2,116],145:[2,116],146:[2,116]},{6:[2,56],28:[2,56],56:262,57:[1,245],90:[2,56]},{6:[2,135],28:[2,135],29:[2,135],57:[2,135],60:[1,263],90:[2,135],95:[2,135],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{53:264,54:[1,64],55:[1,65]},{6:[2,57],28:[2,57],29:[2,57],30:113,31:[1,77],47:114,58:265,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[1,266],28:[1,267]},{6:[2,64],28:[2,64],29:[2,64],52:[2,64],57:[2,64]},{7:268,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,27],6:[2,27],28:[2,27],29:[2,27],52:[2,27],57:[2,27],60:[2,27],76:[2,27],81:[2,27],90:[2,27],95:[2,27],97:[2,27],102:[2,27],103:[2,27],106:[2,27],108:[2,27],109:[2,27],110:[2,27],114:[2,27],122:[2,27],125:[2,27],127:[2,27],130:[2,27],133:[2,27],134:[2,27],139:[2,27],140:[2,27],141:[2,27],142:[2,27],143:[2,27],144:[2,27],145:[2,27]},{6:[1,78],29:[1,269]},{1:[2,200],6:[2,200],28:[2,200],29:[2,200],52:[2,200],57:[2,200],60:[2,200],76:[2,200],81:[2,200],90:[2,200],95:[2,200],97:[2,200],106:[2,200],107:89,108:[2,200],109:[2,200],110:[2,200],113:90,114:[2,200],115:73,122:[2,200],130:[2,200],133:[2,200],134:[2,200],139:[1,79],140:[2,200],141:[2,200],142:[2,200],143:[2,200],144:[2,200],145:[2,200]},{1:[2,214],6:[2,214],28:[2,214],29:[2,214],52:[2,214],57:[2,214],60:[2,214],76:[2,214],81:[2,214],90:[2,214],95:[2,214],97:[2,214],106:[2,214],107:89,108:[2,214],109:[2,214],110:[2,214],113:90,114:[2,214],115:73,122:[2,214],130:[2,214],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:270,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:271,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,217],6:[2,217],28:[2,217],29:[2,217],52:[2,217],57:[2,217],60:[2,217],76:[2,217],81:[2,217],90:[2,217],95:[2,217],97:[2,217],106:[2,217],107:89,108:[2,217],109:[2,217],110:[2,217],113:90,114:[2,217],115:73,122:[2,217],130:[2,217],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,191],6:[2,191],28:[2,191],29:[2,191],52:[2,191],57:[2,191],60:[2,191],76:[2,191],81:[2,191],90:[2,191],95:[2,191],97:[2,191],106:[2,191],108:[2,191],109:[2,191],110:[2,191],114:[2,191],122:[2,191],130:[2,191],133:[2,191],134:[2,191],139:[2,191],140:[2,191],141:[2,191],142:[2,191],143:[2,191],144:[2,191],145:[2,191]},{7:272,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,141],6:[2,141],28:[2,141],29:[2,141],52:[2,141],57:[2,141],60:[2,141],76:[2,141],81:[2,141],90:[2,141],95:[2,141],97:[2,141],102:[1,273],106:[2,141],108:[2,141],109:[2,141],110:[2,141],114:[2,141],122:[2,141],130:[2,141],133:[2,141],134:[2,141],139:[2,141],140:[2,141],141:[2,141],142:[2,141],143:[2,141],144:[2,141],145:[2,141]},{14:274,28:[1,120]},{14:277,28:[1,120],30:275,31:[1,77],62:276,79:[1,74]},{124:278,126:235,127:[1,236]},{29:[1,279],125:[1,280],126:281,127:[1,236]},{29:[2,184],125:[2,184],127:[2,184]},{7:283,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],99:282,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,103],6:[2,103],14:284,28:[1,120],29:[2,103],52:[2,103],57:[2,103],60:[2,103],76:[2,103],81:[2,103],90:[2,103],95:[2,103],97:[2,103],106:[2,103],107:89,108:[1,69],109:[2,103],110:[1,70],113:90,114:[1,72],115:73,122:[2,103],130:[2,103],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,106],6:[2,106],28:[2,106],29:[2,106],52:[2,106],57:[2,106],60:[2,106],76:[2,106],81:[2,106],90:[2,106],95:[2,106],97:[2,106],106:[2,106],108:[2,106],109:[2,106],110:[2,106],114:[2,106],122:[2,106],130:[2,106],133:[2,106],134:[2,106],139:[2,106],140:[2,106],141:[2,106],142:[2,106],143:[2,106],144:[2,106],145:[2,106]},{7:285,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,148],6:[2,148],28:[2,148],29:[2,148],52:[2,148],57:[2,148],60:[2,148],69:[2,148],70:[2,148],71:[2,148],72:[2,148],74:[2,148],76:[2,148],77:[2,148],81:[2,148],88:[2,148],89:[2,148],90:[2,148],95:[2,148],97:[2,148],106:[2,148],108:[2,148],109:[2,148],110:[2,148],114:[2,148],122:[2,148],130:[2,148],133:[2,148],134:[2,148],139:[2,148],140:[2,148],141:[2,148],142:[2,148],143:[2,148],144:[2,148],145:[2,148]},{6:[1,78],29:[1,286]},{7:287,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,71],11:[2,124],13:[2,124],28:[2,71],31:[2,124],33:[2,124],34:[2,124],36:[2,124],37:[2,124],38:[2,124],39:[2,124],40:[2,124],41:[2,124],48:[2,124],49:[2,124],50:[2,124],54:[2,124],55:[2,124],57:[2,71],79:[2,124],82:[2,124],86:[2,124],87:[2,124],92:[2,124],93:[2,124],94:[2,124],95:[2,71],100:[2,124],104:[2,124],105:[2,124],108:[2,124],110:[2,124],112:[2,124],114:[2,124],123:[2,124],129:[2,124],131:[2,124],132:[2,124],133:[2,124],134:[2,124],135:[2,124],137:[2,124],138:[2,124]},{6:[1,289],28:[1,290],95:[1,288]},{6:[2,57],7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[2,57],29:[2,57],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],90:[2,57],92:[1,62],93:[1,63],94:[1,61],95:[2,57],98:291,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],29:[2,56],56:292,57:[1,245]},{1:[2,188],6:[2,188],28:[2,188],29:[2,188],52:[2,188],57:[2,188],60:[2,188],76:[2,188],81:[2,188],90:[2,188],95:[2,188],97:[2,188],106:[2,188],108:[2,188],109:[2,188],110:[2,188],114:[2,188],122:[2,188],125:[2,188],130:[2,188],133:[2,188],134:[2,188],139:[2,188],140:[2,188],141:[2,188],142:[2,188],143:[2,188],144:[2,188],145:[2,188]},{7:293,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:294,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{120:[2,166],121:[2,166]},{30:171,31:[1,77],47:172,61:173,62:174,79:[1,74],93:[1,117],94:[1,118],119:295},{1:[2,173],6:[2,173],28:[2,173],29:[2,173],52:[2,173],57:[2,173],60:[2,173],76:[2,173],81:[2,173],90:[2,173],95:[2,173],97:[2,173],106:[2,173],107:89,108:[2,173],109:[1,296],110:[2,173],113:90,114:[2,173],115:73,122:[1,297],130:[2,173],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,174],6:[2,174],28:[2,174],29:[2,174],52:[2,174],57:[2,174],60:[2,174],76:[2,174],81:[2,174],90:[2,174],95:[2,174],97:[2,174],106:[2,174],107:89,108:[2,174],109:[1,298],110:[2,174],113:90,114:[2,174],115:73,122:[2,174],130:[2,174],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,300],28:[1,301],81:[1,299]},{6:[2,57],10:181,28:[2,57],29:[2,57],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:302,45:180,47:184,49:[1,49],81:[2,57],93:[1,117]},{7:303,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,304],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,91],6:[2,91],28:[2,91],29:[2,91],43:[2,91],52:[2,91],57:[2,91],60:[2,91],69:[2,91],70:[2,91],71:[2,91],72:[2,91],74:[2,91],76:[2,91],77:[2,91],81:[2,91],83:[2,91],88:[2,91],89:[2,91],90:[2,91],95:[2,91],97:[2,91],106:[2,91],108:[2,91],109:[2,91],110:[2,91],114:[2,91],122:[2,91],130:[2,91],133:[2,91],134:[2,91],137:[2,91],138:[2,91],139:[2,91],140:[2,91],141:[2,91],142:[2,91],143:[2,91],144:[2,91],145:[2,91],146:[2,91]},{7:305,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,127],79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{76:[2,128],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,40],6:[2,40],28:[2,40],29:[2,40],52:[2,40],57:[2,40],60:[2,40],76:[2,40],81:[2,40],90:[2,40],95:[2,40],97:[2,40],106:[2,40],107:89,108:[2,40],109:[2,40],110:[2,40],113:90,114:[2,40],115:73,122:[2,40],130:[2,40],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{29:[1,306],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,289],28:[1,290],90:[1,307]},{6:[2,71],28:[2,71],29:[2,71],57:[2,71],90:[2,71],95:[2,71]},{14:308,28:[1,120]},{6:[2,60],28:[2,60],29:[2,60],52:[2,60],57:[2,60]},{30:113,31:[1,77],47:114,58:309,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[2,58],28:[2,58],29:[2,58],30:113,31:[1,77],47:114,51:310,57:[2,58],58:110,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[2,65],28:[2,65],29:[2,65],52:[2,65],57:[2,65],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,28],6:[2,28],28:[2,28],29:[2,28],52:[2,28],57:[2,28],60:[2,28],76:[2,28],81:[2,28],90:[2,28],95:[2,28],97:[2,28],102:[2,28],103:[2,28],106:[2,28],108:[2,28],109:[2,28],110:[2,28],114:[2,28],122:[2,28],125:[2,28],127:[2,28],130:[2,28],133:[2,28],134:[2,28],139:[2,28],140:[2,28],141:[2,28],142:[2,28],143:[2,28],144:[2,28],145:[2,28]},{29:[1,311],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,216],6:[2,216],28:[2,216],29:[2,216],52:[2,216],57:[2,216],60:[2,216],76:[2,216],81:[2,216],90:[2,216],95:[2,216],97:[2,216],106:[2,216],107:89,108:[2,216],109:[2,216],110:[2,216],113:90,114:[2,216],115:73,122:[2,216],130:[2,216],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{14:312,28:[1,120],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{14:313,28:[1,120]},{1:[2,142],6:[2,142],28:[2,142],29:[2,142],52:[2,142],57:[2,142],60:[2,142],76:[2,142],81:[2,142],90:[2,142],95:[2,142],97:[2,142],106:[2,142],108:[2,142],109:[2,142],110:[2,142],114:[2,142],122:[2,142],130:[2,142],133:[2,142],134:[2,142],139:[2,142],140:[2,142],141:[2,142],142:[2,142],143:[2,142],144:[2,142],145:[2,142]},{14:314,28:[1,120]},{14:315,28:[1,120]},{1:[2,146],6:[2,146],28:[2,146],29:[2,146],52:[2,146],57:[2,146],60:[2,146],76:[2,146],81:[2,146],90:[2,146],95:[2,146],97:[2,146],102:[2,146],106:[2,146],108:[2,146],109:[2,146],110:[2,146],114:[2,146],122:[2,146],130:[2,146],133:[2,146],134:[2,146],139:[2,146],140:[2,146],141:[2,146],142:[2,146],143:[2,146],144:[2,146],145:[2,146]},{29:[1,316],125:[1,317],126:281,127:[1,236]},{1:[2,182],6:[2,182],28:[2,182],29:[2,182],52:[2,182],57:[2,182],60:[2,182],76:[2,182],81:[2,182],90:[2,182],95:[2,182],97:[2,182],106:[2,182],108:[2,182],109:[2,182],110:[2,182],114:[2,182],122:[2,182],130:[2,182],133:[2,182],134:[2,182],139:[2,182],140:[2,182],141:[2,182],142:[2,182],143:[2,182],144:[2,182],145:[2,182]},{14:318,28:[1,120]},{29:[2,185],125:[2,185],127:[2,185]},{14:319,28:[1,120],57:[1,320]},{28:[2,138],57:[2,138],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,104],6:[2,104],28:[2,104],29:[2,104],52:[2,104],57:[2,104],60:[2,104],76:[2,104],81:[2,104],90:[2,104],95:[2,104],97:[2,104],106:[2,104],108:[2,104],109:[2,104],110:[2,104],114:[2,104],122:[2,104],130:[2,104],133:[2,104],134:[2,104],139:[2,104],140:[2,104],141:[2,104],142:[2,104],143:[2,104],144:[2,104],145:[2,104]},{1:[2,107],6:[2,107],14:321,28:[1,120],29:[2,107],52:[2,107],57:[2,107],60:[2,107],76:[2,107],81:[2,107],90:[2,107],95:[2,107],97:[2,107],106:[2,107],107:89,108:[1,69],109:[2,107],110:[1,70],113:90,114:[1,72],115:73,122:[2,107],130:[2,107],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{106:[1,322]},{95:[1,323],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,122],6:[2,122],28:[2,122],29:[2,122],43:[2,122],52:[2,122],57:[2,122],60:[2,122],69:[2,122],70:[2,122],71:[2,122],72:[2,122],74:[2,122],76:[2,122],77:[2,122],81:[2,122],88:[2,122],89:[2,122],90:[2,122],95:[2,122],97:[2,122],106:[2,122],108:[2,122],109:[2,122],110:[2,122],114:[2,122],120:[2,122],121:[2,122],122:[2,122],130:[2,122],133:[2,122],134:[2,122],139:[2,122],140:[2,122],141:[2,122],142:[2,122],143:[2,122],144:[2,122],145:[2,122]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],98:324,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:325,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,131],28:[2,131],29:[2,131],57:[2,131],90:[2,131],95:[2,131]},{6:[1,289],28:[1,290],29:[1,326]},{1:[2,151],6:[2,151],28:[2,151],29:[2,151],52:[2,151],57:[2,151],60:[2,151],76:[2,151],81:[2,151],90:[2,151],95:[2,151],97:[2,151],106:[2,151],107:89,108:[1,69],109:[2,151],110:[1,70],113:90,114:[1,72],115:73,122:[2,151],130:[2,151],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,153],6:[2,153],28:[2,153],29:[2,153],52:[2,153],57:[2,153],60:[2,153],76:[2,153],81:[2,153],90:[2,153],95:[2,153],97:[2,153],106:[2,153],107:89,108:[1,69],109:[2,153],110:[1,70],113:90,114:[1,72],115:73,122:[2,153],130:[2,153],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{120:[2,172],121:[2,172]},{7:327,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:328,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:329,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,95],6:[2,95],28:[2,95],29:[2,95],43:[2,95],52:[2,95],57:[2,95],60:[2,95],69:[2,95],70:[2,95],71:[2,95],72:[2,95],74:[2,95],76:[2,95],77:[2,95],81:[2,95],88:[2,95],89:[2,95],90:[2,95],95:[2,95],97:[2,95],106:[2,95],108:[2,95],109:[2,95],110:[2,95],114:[2,95],120:[2,95],121:[2,95],122:[2,95],130:[2,95],133:[2,95],134:[2,95],139:[2,95],140:[2,95],141:[2,95],142:[2,95],143:[2,95],144:[2,95],145:[2,95]},{10:181,30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:330,45:180,47:184,49:[1,49],93:[1,117]},{6:[2,96],10:181,28:[2,96],29:[2,96],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:179,45:180,47:184,49:[1,49],57:[2,96],80:331,93:[1,117]},{6:[2,98],28:[2,98],29:[2,98],57:[2,98],81:[2,98]},{6:[2,43],28:[2,43],29:[2,43],57:[2,43],81:[2,43],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:332,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{76:[2,126],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,41],6:[2,41],28:[2,41],29:[2,41],52:[2,41],57:[2,41],60:[2,41],76:[2,41],81:[2,41],90:[2,41],95:[2,41],97:[2,41],106:[2,41],108:[2,41],109:[2,41],110:[2,41],114:[2,41],122:[2,41],130:[2,41],133:[2,41],134:[2,41],139:[2,41],140:[2,41],141:[2,41],142:[2,41],143:[2,41],144:[2,41],145:[2,41]},{1:[2,117],6:[2,117],28:[2,117],29:[2,117],43:[2,117],52:[2,117],57:[2,117],60:[2,117],69:[2,117],70:[2,117],71:[2,117],72:[2,117],74:[2,117],76:[2,117],77:[2,117],81:[2,117],83:[2,117],88:[2,117],89:[2,117],90:[2,117],95:[2,117],97:[2,117],106:[2,117],108:[2,117],109:[2,117],110:[2,117],114:[2,117],122:[2,117],130:[2,117],133:[2,117],134:[2,117],137:[2,117],138:[2,117],139:[2,117],140:[2,117],141:[2,117],142:[2,117],143:[2,117],144:[2,117],145:[2,117],146:[2,117]},{1:[2,52],6:[2,52],28:[2,52],29:[2,52],52:[2,52],57:[2,52],60:[2,52],76:[2,52],81:[2,52],90:[2,52],95:[2,52],97:[2,52],106:[2,52],108:[2,52],109:[2,52],110:[2,52],114:[2,52],122:[2,52],130:[2,52],133:[2,52],134:[2,52],139:[2,52],140:[2,52],141:[2,52],142:[2,52],143:[2,52],144:[2,52],145:[2,52]},{6:[2,61],28:[2,61],29:[2,61],52:[2,61],57:[2,61]},{6:[2,56],28:[2,56],29:[2,56],56:333,57:[1,217]},{1:[2,215],6:[2,215],28:[2,215],29:[2,215],52:[2,215],57:[2,215],60:[2,215],76:[2,215],81:[2,215],90:[2,215],95:[2,215],97:[2,215],106:[2,215],108:[2,215],109:[2,215],110:[2,215],114:[2,215],122:[2,215],130:[2,215],133:[2,215],134:[2,215],139:[2,215],140:[2,215],141:[2,215],142:[2,215],143:[2,215],144:[2,215],145:[2,215]},{1:[2,189],6:[2,189],28:[2,189],29:[2,189],52:[2,189],57:[2,189],60:[2,189],76:[2,189],81:[2,189],90:[2,189],95:[2,189],97:[2,189],106:[2,189],108:[2,189],109:[2,189],110:[2,189],114:[2,189],122:[2,189],125:[2,189],130:[2,189],133:[2,189],134:[2,189],139:[2,189],140:[2,189],141:[2,189],142:[2,189],143:[2,189],144:[2,189],145:[2,189]},{1:[2,143],6:[2,143],28:[2,143],29:[2,143],52:[2,143],57:[2,143],60:[2,143],76:[2,143],81:[2,143],90:[2,143],95:[2,143],97:[2,143],106:[2,143],108:[2,143],109:[2,143],110:[2,143],114:[2,143],122:[2,143],130:[2,143],133:[2,143],134:[2,143],139:[2,143],140:[2,143],141:[2,143],142:[2,143],143:[2,143],144:[2,143],145:[2,143]},{1:[2,144],6:[2,144],28:[2,144],29:[2,144],52:[2,144],57:[2,144],60:[2,144],76:[2,144],81:[2,144],90:[2,144],95:[2,144],97:[2,144],102:[2,144],106:[2,144],108:[2,144],109:[2,144],110:[2,144],114:[2,144],122:[2,144],130:[2,144],133:[2,144],134:[2,144],139:[2,144],140:[2,144],141:[2,144],142:[2,144],143:[2,144],144:[2,144],145:[2,144]},{1:[2,145],6:[2,145],28:[2,145],29:[2,145],52:[2,145],57:[2,145],60:[2,145],76:[2,145],81:[2,145],90:[2,145],95:[2,145],97:[2,145],102:[2,145],106:[2,145],108:[2,145],109:[2,145],110:[2,145],114:[2,145],122:[2,145],130:[2,145],133:[2,145],134:[2,145],139:[2,145],140:[2,145],141:[2,145],142:[2,145],143:[2,145],144:[2,145],145:[2,145]},{1:[2,180],6:[2,180],28:[2,180],29:[2,180],52:[2,180],57:[2,180],60:[2,180],76:[2,180],81:[2,180],90:[2,180],95:[2,180],97:[2,180],106:[2,180],108:[2,180],109:[2,180],110:[2,180],114:[2,180],122:[2,180],130:[2,180],133:[2,180],134:[2,180],139:[2,180],140:[2,180],141:[2,180],142:[2,180],143:[2,180],144:[2,180],145:[2,180]},{14:334,28:[1,120]},{29:[1,335]},{6:[1,336],29:[2,186],125:[2,186],127:[2,186]},{7:337,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,108],6:[2,108],28:[2,108],29:[2,108],52:[2,108],57:[2,108],60:[2,108],76:[2,108],81:[2,108],90:[2,108],95:[2,108],97:[2,108],106:[2,108],108:[2,108],109:[2,108],110:[2,108],114:[2,108],122:[2,108],130:[2,108],133:[2,108],134:[2,108],139:[2,108],140:[2,108],141:[2,108],142:[2,108],143:[2,108],144:[2,108],145:[2,108]},{1:[2,149],6:[2,149],28:[2,149],29:[2,149],52:[2,149],57:[2,149],60:[2,149],69:[2,149],70:[2,149],71:[2,149],72:[2,149],74:[2,149],76:[2,149],77:[2,149],81:[2,149],88:[2,149],89:[2,149],90:[2,149],95:[2,149],97:[2,149],106:[2,149],108:[2,149],109:[2,149],110:[2,149],114:[2,149],122:[2,149],130:[2,149],133:[2,149],134:[2,149],139:[2,149],140:[2,149],141:[2,149],142:[2,149],143:[2,149],144:[2,149],145:[2,149]},{1:[2,125],6:[2,125],28:[2,125],29:[2,125],52:[2,125],57:[2,125],60:[2,125],69:[2,125],70:[2,125],71:[2,125],72:[2,125],74:[2,125],76:[2,125],77:[2,125],81:[2,125],88:[2,125],89:[2,125],90:[2,125],95:[2,125],97:[2,125],106:[2,125],108:[2,125],109:[2,125],110:[2,125],114:[2,125],122:[2,125],130:[2,125],133:[2,125],134:[2,125],139:[2,125],140:[2,125],141:[2,125],142:[2,125],143:[2,125],144:[2,125],145:[2,125]},{6:[2,132],28:[2,132],29:[2,132],57:[2,132],90:[2,132],95:[2,132]},{6:[2,56],28:[2,56],29:[2,56],56:338,57:[1,245]},{6:[2,133],28:[2,133],29:[2,133],57:[2,133],90:[2,133],95:[2,133]},{1:[2,175],6:[2,175],28:[2,175],29:[2,175],52:[2,175],57:[2,175],60:[2,175],76:[2,175],81:[2,175],90:[2,175],95:[2,175],97:[2,175],106:[2,175],107:89,108:[2,175],109:[2,175],110:[2,175],113:90,114:[2,175],115:73,122:[1,339],130:[2,175],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,177],6:[2,177],28:[2,177],29:[2,177],52:[2,177],57:[2,177],60:[2,177],76:[2,177],81:[2,177],90:[2,177],95:[2,177],97:[2,177],106:[2,177],107:89,108:[2,177],109:[1,340],110:[2,177],113:90,114:[2,177],115:73,122:[2,177],130:[2,177],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,176],6:[2,176],28:[2,176],29:[2,176],52:[2,176],57:[2,176],60:[2,176],76:[2,176],81:[2,176],90:[2,176],95:[2,176],97:[2,176],106:[2,176],107:89,108:[2,176],109:[2,176],110:[2,176],113:90,114:[2,176],115:73,122:[2,176],130:[2,176],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[2,99],28:[2,99],29:[2,99],57:[2,99],81:[2,99]},{6:[2,56],28:[2,56],29:[2,56],56:341,57:[1,255]},{29:[1,342],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,266],28:[1,267],29:[1,343]},{29:[1,344]},{1:[2,183],6:[2,183],28:[2,183],29:[2,183],52:[2,183],57:[2,183],60:[2,183],76:[2,183],81:[2,183],90:[2,183],95:[2,183],97:[2,183],106:[2,183],108:[2,183],109:[2,183],110:[2,183],114:[2,183],122:[2,183],130:[2,183],133:[2,183],134:[2,183],139:[2,183],140:[2,183],141:[2,183],142:[2,183],143:[2,183],144:[2,183],145:[2,183]},{29:[2,187],125:[2,187],127:[2,187]},{28:[2,139],57:[2,139],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,289],28:[1,290],29:[1,345]},{7:346,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:347,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[1,300],28:[1,301],29:[1,348]},{6:[2,44],28:[2,44],29:[2,44],57:[2,44],81:[2,44]},{6:[2,62],28:[2,62],29:[2,62],52:[2,62],57:[2,62]},{1:[2,181],6:[2,181],28:[2,181],29:[2,181],52:[2,181],57:[2,181],60:[2,181],76:[2,181],81:[2,181],90:[2,181],95:[2,181],97:[2,181],106:[2,181],108:[2,181],109:[2,181],110:[2,181],114:[2,181],122:[2,181],130:[2,181],133:[2,181],134:[2,181],139:[2,181],140:[2,181],141:[2,181],142:[2,181],143:[2,181],144:[2,181],145:[2,181]},{6:[2,134],28:[2,134],29:[2,134],57:[2,134],90:[2,134],95:[2,134]},{1:[2,178],6:[2,178],28:[2,178],29:[2,178],52:[2,178],57:[2,178],60:[2,178],76:[2,178],81:[2,178],90:[2,178],95:[2,178],97:[2,178],106:[2,178],107:89,108:[2,178],109:[2,178],110:[2,178],113:90,114:[2,178],115:73,122:[2,178],130:[2,178],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,179],6:[2,179],28:[2,179],29:[2,179],52:[2,179],57:[2,179],60:[2,179],76:[2,179],81:[2,179],90:[2,179],95:[2,179],97:[2,179],106:[2,179],107:89,108:[2,179],109:[2,179],110:[2,179],113:90,114:[2,179],115:73,122:[2,179],130:[2,179],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[2,100],28:[2,100],29:[2,100],57:[2,100],81:[2,100]}],
defaultActions: {64:[2,54],65:[2,55],96:[2,115],204:[2,94]},
parseError: function parseError(str, hash) {
    if (hash.recoverable) {
        this.trace(str);
    } else {
        throw new Error(str);
    }
},
parse: function parse(input) {
    var self = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
    var args = lstack.slice.call(arguments, 1);
    this.lexer.setInput(input);
    this.lexer.yy = this.yy;
    this.yy.lexer = this.lexer;
    this.yy.parser = this;
    if (typeof this.lexer.yylloc == 'undefined') {
        this.lexer.yylloc = {};
    }
    var yyloc = this.lexer.yylloc;
    lstack.push(yyloc);
    var ranges = this.lexer.options && this.lexer.options.ranges;
    if (typeof this.yy.parseError === 'function') {
        this.parseError = this.yy.parseError;
    } else {
        this.parseError = Object.getPrototypeOf(this).parseError;
    }
    function popStack(n) {
        stack.length = stack.length - 2 * n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }
    function lex() {
        var token;
        token = self.lexer.lex() || EOF;
        if (typeof token !== 'number') {
            token = self.symbols_[token] || token;
        }
        return token;
    }
    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
    while (true) {
        state = stack[stack.length - 1];
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol === null || typeof symbol == 'undefined') {
                symbol = lex();
            }
            action = table[state] && table[state][symbol];
        }
                    if (typeof action === 'undefined' || !action.length || !action[0]) {
                var errStr = '';
                expected = [];
                for (p in table[state]) {
                    if (this.terminals_[p] && p > TERROR) {
                        expected.push('\'' + this.terminals_[p] + '\'');
                    }
                }
                if (this.lexer.showPosition) {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\n' + this.lexer.showPosition() + '\nExpecting ' + expected.join(', ') + ', got \'' + (this.terminals_[symbol] || symbol) + '\'';
                } else {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\'' + (this.terminals_[symbol] || symbol) + '\'');
                }
                this.parseError(errStr, {
                    text: this.lexer.match,
                    token: this.terminals_[symbol] || symbol,
                    line: this.lexer.yylineno,
                    loc: yyloc,
                    expected: expected
                });
            }
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);
        }
        switch (action[0]) {
        case 1:
            stack.push(symbol);
            vstack.push(this.lexer.yytext);
            lstack.push(this.lexer.yylloc);
            stack.push(action[1]);
            symbol = null;
            if (!preErrorSymbol) {
                yyleng = this.lexer.yyleng;
                yytext = this.lexer.yytext;
                yylineno = this.lexer.yylineno;
                yyloc = this.lexer.yylloc;
                if (recovering > 0) {
                    recovering--;
                }
            } else {
                symbol = preErrorSymbol;
                preErrorSymbol = null;
            }
            break;
        case 2:
            len = this.productions_[action[1]][1];
            yyval.$ = vstack[vstack.length - len];
            yyval._$ = {
                first_line: lstack[lstack.length - (len || 1)].first_line,
                last_line: lstack[lstack.length - 1].last_line,
                first_column: lstack[lstack.length - (len || 1)].first_column,
                last_column: lstack[lstack.length - 1].last_column
            };
            if (ranges) {
                yyval._$.range = [
                    lstack[lstack.length - (len || 1)].range[0],
                    lstack[lstack.length - 1].range[1]
                ];
            }
            r = this.performAction.apply(yyval, [
                yytext,
                yyleng,
                yylineno,
                this.yy,
                action[1],
                vstack,
                lstack
            ].concat(args));
            if (typeof r !== 'undefined') {
                return r;
            }
            if (len) {
                stack = stack.slice(0, -1 * len * 2);
                vstack = vstack.slice(0, -1 * len);
                lstack = lstack.slice(0, -1 * len);
            }
            stack.push(this.productions_[action[1]][0]);
            vstack.push(yyval.$);
            lstack.push(yyval._$);
            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
            stack.push(newState);
            break;
        case 3:
            return true;
        }
    }
    return true;
}};

function Parser () {
  this.yy = {};
}
Parser.prototype = parser;parser.Parser = Parser;
return new Parser;
})();


if (typeof require !== 'undefined' && typeof exports !== 'undefined') {
exports.parser = parser;
exports.Parser = parser.Parser;
exports.parse = function () { return parser.parse.apply(parser, arguments); };
exports.main = function commonjsMain(args) {
    if (!args[1]) {
        console.log('Usage: '+args[0]+' FILE');
        process.exit(1);
    }
    var source = require('fs').readFileSync(require('path').normalize(args[1]), "utf8");
    return exports.parser.parse(source);
};
if (typeof module !== 'undefined' && require.main === module) {
  exports.main(process.argv.slice(1));
}
}
}).call(this,require('_process'))

},{"_process":36,"fs":14,"path":35}],24:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var CoffeeScript, Module, binary, child_process, ext, findExtension, fork, helpers, loadFile, path, _i, _len, _ref;

  CoffeeScript = require('./coffee-script');

  child_process = require('child_process');

  helpers = require('./helpers');

  path = require('path');

  loadFile = function(module, filename) {
    var answer;
    answer = CoffeeScript._compileFile(filename, false, {
      runtime: "interp"
    });
    return module._compile(answer, filename);
  };

  if (require.extensions) {
    _ref = CoffeeScript.FILE_EXTENSIONS;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ext = _ref[_i];
      require.extensions[ext] = loadFile;
    }
    Module = require('module');
    findExtension = function(filename) {
      var curExtension, extensions;
      extensions = path.basename(filename).split('.');
      if (extensions[0] === '') {
        extensions.shift();
      }
      while (extensions.shift()) {
        curExtension = '.' + extensions.join('.');
        if (Module._extensions[curExtension]) {
          return curExtension;
        }
      }
      return '.js';
    };
    Module.prototype.load = function(filename) {
      var extension;
      this.filename = filename;
      this.paths = Module._nodeModulePaths(path.dirname(filename));
      extension = findExtension(filename);
      Module._extensions[extension](this, filename);
      return this.loaded = true;
    };
  }

  if (child_process) {
    fork = child_process.fork;
    binary = require.resolve('../../bin/coffee');
    child_process.fork = function(path, args, options) {
      if (helpers.isCoffee(path)) {
        if (!Array.isArray(args)) {
          options = args || {};
          args = [];
        }
        args = [path].concat(args);
        path = binary;
      }
      return fork(path, args, options);
    };
  }

}).call(this);

},{"./coffee-script":"iced-coffee-script","./helpers":19,"child_process":14,"module":14,"path":35}],25:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var BALANCED_PAIRS, CALL_CLOSERS, EXPRESSION_CLOSE, EXPRESSION_END, EXPRESSION_START, IMPLICIT_CALL, IMPLICIT_END, IMPLICIT_FUNC, IMPLICIT_UNSPACED_CALL, INVERSES, LINEBREAKS, SINGLE_CLOSERS, SINGLE_LINERS, generate, left, rite, _i, _len, _ref,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice;

  generate = function(tag, value, origin) {
    var tok;
    tok = [tag, value];
    tok.generated = true;
    if (origin) {
      tok.origin = origin;
    }
    return tok;
  };

  exports.Rewriter = (function() {
    function Rewriter() {}

    Rewriter.prototype.rewrite = function(tokens) {
      this.tokens = tokens;
      this.removeLeadingNewlines();
      this.closeOpenCalls();
      this.closeOpenIndexes();
      this.normalizeLines();
      this.tagPostfixConditionals();
      this.addImplicitBracesAndParens();
      this.addLocationDataToGeneratedTokens();
      return this.tokens;
    };

    Rewriter.prototype.scanTokens = function(block) {
      var i, token, tokens;
      tokens = this.tokens;
      i = 0;
      while (token = tokens[i]) {
        i += block.call(this, token, i, tokens);
      }
      return true;
    };

    Rewriter.prototype.detectEnd = function(i, condition, action) {
      var levels, token, tokens, _ref, _ref1;
      tokens = this.tokens;
      levels = 0;
      while (token = tokens[i]) {
        if (levels === 0 && condition.call(this, token, i)) {
          return action.call(this, token, i);
        }
        if (!token || levels < 0) {
          return action.call(this, token, i - 1);
        }
        if (_ref = token[0], __indexOf.call(EXPRESSION_START, _ref) >= 0) {
          levels += 1;
        } else if (_ref1 = token[0], __indexOf.call(EXPRESSION_END, _ref1) >= 0) {
          levels -= 1;
        }
        i += 1;
      }
      return i - 1;
    };

    Rewriter.prototype.removeLeadingNewlines = function() {
      var i, tag, _i, _len, _ref;
      _ref = this.tokens;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        tag = _ref[i][0];
        if (tag !== 'TERMINATOR') {
          break;
        }
      }
      if (i) {
        return this.tokens.splice(0, i);
      }
    };

    Rewriter.prototype.closeOpenCalls = function() {
      var action, condition;
      condition = function(token, i) {
        var _ref;
        return ((_ref = token[0]) === ')' || _ref === 'CALL_END') || token[0] === 'OUTDENT' && this.tag(i - 1) === ')';
      };
      action = function(token, i) {
        return this.tokens[token[0] === 'OUTDENT' ? i - 1 : i][0] = 'CALL_END';
      };
      return this.scanTokens(function(token, i) {
        if (token[0] === 'CALL_START') {
          this.detectEnd(i + 1, condition, action);
        }
        return 1;
      });
    };

    Rewriter.prototype.closeOpenIndexes = function() {
      var action, condition;
      condition = function(token, i) {
        var _ref;
        return (_ref = token[0]) === ']' || _ref === 'INDEX_END';
      };
      action = function(token, i) {
        return token[0] = 'INDEX_END';
      };
      return this.scanTokens(function(token, i) {
        if (token[0] === 'INDEX_START') {
          this.detectEnd(i + 1, condition, action);
        }
        return 1;
      });
    };

    Rewriter.prototype.matchTags = function() {
      var fuzz, i, j, pattern, _i, _ref, _ref1;
      i = arguments[0], pattern = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
      fuzz = 0;
      for (j = _i = 0, _ref = pattern.length; 0 <= _ref ? _i < _ref : _i > _ref; j = 0 <= _ref ? ++_i : --_i) {
        while (this.tag(i + j + fuzz) === 'HERECOMMENT') {
          fuzz += 2;
        }
        if (pattern[j] == null) {
          continue;
        }
        if (typeof pattern[j] === 'string') {
          pattern[j] = [pattern[j]];
        }
        if (_ref1 = this.tag(i + j + fuzz), __indexOf.call(pattern[j], _ref1) < 0) {
          return false;
        }
      }
      return true;
    };

    Rewriter.prototype.looksObjectish = function(j) {
      return this.matchTags(j, '@', null, ':') || this.matchTags(j, null, ':');
    };

    Rewriter.prototype.findTagsBackwards = function(i, tags) {
      var backStack, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
      backStack = [];
      while (i >= 0 && (backStack.length || (_ref2 = this.tag(i), __indexOf.call(tags, _ref2) < 0) && ((_ref3 = this.tag(i), __indexOf.call(EXPRESSION_START, _ref3) < 0) || this.tokens[i].generated) && (_ref4 = this.tag(i), __indexOf.call(LINEBREAKS, _ref4) < 0))) {
        if (_ref = this.tag(i), __indexOf.call(EXPRESSION_END, _ref) >= 0) {
          backStack.push(this.tag(i));
        }
        if ((_ref1 = this.tag(i), __indexOf.call(EXPRESSION_START, _ref1) >= 0) && backStack.length) {
          backStack.pop();
        }
        i -= 1;
      }
      return _ref5 = this.tag(i), __indexOf.call(tags, _ref5) >= 0;
    };

    Rewriter.prototype.addImplicitBracesAndParens = function() {
      var stack;
      stack = [];
      return this.scanTokens(function(token, i, tokens) {
        var endImplicitCall, endImplicitObject, forward, inImplicit, inImplicitCall, inImplicitControl, inImplicitObject, newLine, nextTag, offset, prevTag, prevToken, ret, s, sameLine, stackIdx, stackTag, stackTop, startIdx, startImplicitCall, startImplicitObject, startsLine, tag, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
        tag = token[0];
        prevTag = (prevToken = i > 0 ? tokens[i - 1] : [])[0];
        nextTag = (i < tokens.length - 1 ? tokens[i + 1] : [])[0];
        stackTop = function() {
          return stack[stack.length - 1];
        };
        startIdx = i;
        forward = function(n) {
          return i - startIdx + n;
        };
        inImplicit = function() {
          var _ref, _ref1;
          return (_ref = stackTop()) != null ? (_ref1 = _ref[2]) != null ? _ref1.ours : void 0 : void 0;
        };
        inImplicitCall = function() {
          var _ref;
          return inImplicit() && ((_ref = stackTop()) != null ? _ref[0] : void 0) === '(';
        };
        inImplicitObject = function() {
          var _ref;
          return inImplicit() && ((_ref = stackTop()) != null ? _ref[0] : void 0) === '{';
        };
        inImplicitControl = function() {
          var _ref;
          return inImplicit && ((_ref = stackTop()) != null ? _ref[0] : void 0) === 'CONTROL';
        };
        startImplicitCall = function(j) {
          var idx;
          idx = j != null ? j : i;
          stack.push([
            '(', idx, {
              ours: true
            }
          ]);
          tokens.splice(idx, 0, generate('CALL_START', '('));
          if (j == null) {
            return i += 1;
          }
        };
        endImplicitCall = function() {
          stack.pop();
          tokens.splice(i, 0, generate('CALL_END', ')'));
          return i += 1;
        };
        startImplicitObject = function(j, startsLine) {
          var idx;
          if (startsLine == null) {
            startsLine = true;
          }
          idx = j != null ? j : i;
          stack.push([
            '{', idx, {
              sameLine: true,
              startsLine: startsLine,
              ours: true
            }
          ]);
          tokens.splice(idx, 0, generate('{', generate(new String('{')), token));
          if (j == null) {
            return i += 1;
          }
        };
        endImplicitObject = function(j) {
          j = j != null ? j : i;
          stack.pop();
          tokens.splice(j, 0, generate('}', '}', token));
          return i += 1;
        };
        if (inImplicitCall() && (tag === 'IF' || tag === 'TRY' || tag === 'FINALLY' || tag === 'CATCH' || tag === 'CLASS' || tag === 'SWITCH')) {
          stack.push([
            'CONTROL', i, {
              ours: true
            }
          ]);
          return forward(1);
        }
        if (tag === 'INDENT' && inImplicit()) {
          if (prevTag !== '=>' && prevTag !== '->' && prevTag !== '[' && prevTag !== '(' && prevTag !== ',' && prevTag !== '{' && prevTag !== 'TRY' && prevTag !== 'ELSE' && prevTag !== '=') {
            while (inImplicitCall()) {
              endImplicitCall();
            }
          }
          if (inImplicitControl()) {
            stack.pop();
          }
          stack.push([tag, i]);
          return forward(1);
        }
        if (__indexOf.call(EXPRESSION_START, tag) >= 0) {
          stack.push([tag, i]);
          return forward(1);
        }
        if (__indexOf.call(EXPRESSION_END, tag) >= 0) {
          while (inImplicit()) {
            if (inImplicitCall()) {
              endImplicitCall();
            } else if (inImplicitObject()) {
              endImplicitObject();
            } else {
              stack.pop();
            }
          }
          stack.pop();
        }
        if ((__indexOf.call(IMPLICIT_FUNC, tag) >= 0 && token.spaced && !token.stringEnd || tag === '?' && i > 0 && !tokens[i - 1].spaced) && (__indexOf.call(IMPLICIT_CALL, nextTag) >= 0 || __indexOf.call(IMPLICIT_UNSPACED_CALL, nextTag) >= 0 && !((_ref = tokens[i + 1]) != null ? _ref.spaced : void 0) && !((_ref1 = tokens[i + 1]) != null ? _ref1.newLine : void 0))) {
          if (tag === '?') {
            tag = token[0] = 'FUNC_EXIST';
          }
          startImplicitCall(i + 1);
          ret = forward(2);
          return ret;
        }
        if (__indexOf.call(IMPLICIT_FUNC, tag) >= 0 && this.matchTags(i + 1, 'INDENT', null, ':') && !this.findTagsBackwards(i, ['CLASS', 'EXTENDS', 'IF', 'CATCH', 'SWITCH', 'LEADING_WHEN', 'FOR', 'WHILE', 'UNTIL'])) {
          startImplicitCall(i + 1);
          stack.push(['INDENT', i + 2]);
          return forward(3);
        }
        if (tag === ':') {
          if (this.tag(i - 2) === '@') {
            s = i - 2;
          } else {
            s = i - 1;
          }
          while (this.tag(s - 2) === 'HERECOMMENT') {
            s -= 2;
          }
          this.insideForDeclaration = nextTag === 'FOR';
          startsLine = s === 0 || (_ref2 = this.tag(s - 1), __indexOf.call(LINEBREAKS, _ref2) >= 0) || tokens[s - 1].newLine;
          if (stackTop()) {
            _ref3 = stackTop(), stackTag = _ref3[0], stackIdx = _ref3[1];
            if ((stackTag === '{' || stackTag === 'INDENT' && this.tag(stackIdx - 1) === '{') && (startsLine || this.tag(s - 1) === ',' || this.tag(s - 1) === '{')) {
              return forward(1);
            }
          }
          startImplicitObject(s, !!startsLine);
          return forward(2);
        }
        if (inImplicitObject() && __indexOf.call(LINEBREAKS, tag) >= 0) {
          stackTop()[2].sameLine = false;
        }
        newLine = prevTag === 'OUTDENT' || prevToken.newLine;
        if (__indexOf.call(IMPLICIT_END, tag) >= 0 || __indexOf.call(CALL_CLOSERS, tag) >= 0 && newLine) {
          while (inImplicit()) {
            _ref4 = stackTop(), stackTag = _ref4[0], stackIdx = _ref4[1], (_ref5 = _ref4[2], sameLine = _ref5.sameLine, startsLine = _ref5.startsLine);
            if (inImplicitCall() && prevTag !== ',') {
              endImplicitCall();
            } else if (inImplicitObject() && !this.insideForDeclaration && sameLine && tag !== 'TERMINATOR' && prevTag !== ':' && endImplicitObject()) {

            } else if (inImplicitObject() && tag === 'TERMINATOR' && prevTag !== ',' && !(startsLine && this.looksObjectish(i + 1))) {
              endImplicitObject();
            } else {
              break;
            }
          }
        }
        if (tag === ',' && !this.looksObjectish(i + 1) && inImplicitObject() && !this.insideForDeclaration && (nextTag !== 'TERMINATOR' || !this.looksObjectish(i + 2))) {
          offset = nextTag === 'OUTDENT' ? 1 : 0;
          while (inImplicitObject()) {
            endImplicitObject(i + offset);
          }
        }
        return forward(1);
      });
    };

    Rewriter.prototype.addLocationDataToGeneratedTokens = function() {
      return this.scanTokens(function(token, i, tokens) {
        var column, line, nextLocation, prevLocation, _ref, _ref1;
        if (token[2]) {
          return 1;
        }
        if (!(token.generated || token.explicit)) {
          return 1;
        }
        if (token[0] === '{' && (nextLocation = (_ref = tokens[i + 1]) != null ? _ref[2] : void 0)) {
          line = nextLocation.first_line, column = nextLocation.first_column;
        } else if (prevLocation = (_ref1 = tokens[i - 1]) != null ? _ref1[2] : void 0) {
          line = prevLocation.last_line, column = prevLocation.last_column;
        } else {
          line = column = 0;
        }
        token[2] = {
          first_line: line,
          first_column: column,
          last_line: line,
          last_column: column
        };
        return 1;
      });
    };

    Rewriter.prototype.normalizeLines = function() {
      var action, condition, indent, outdent, starter;
      starter = indent = outdent = null;
      condition = function(token, i) {
        var _ref, _ref1, _ref2, _ref3;
        return token[1] !== ';' && (_ref = token[0], __indexOf.call(SINGLE_CLOSERS, _ref) >= 0) && !(token[0] === 'TERMINATOR' && (_ref1 = this.tag(i + 1), __indexOf.call(EXPRESSION_CLOSE, _ref1) >= 0)) && !(token[0] === 'ELSE' && starter !== 'THEN') && !(((_ref2 = token[0]) === 'CATCH' || _ref2 === 'FINALLY') && (starter === '->' || starter === '=>')) || (_ref3 = token[0], __indexOf.call(CALL_CLOSERS, _ref3) >= 0) && this.tokens[i - 1].newLine;
      };
      action = function(token, i) {
        return this.tokens.splice((this.tag(i - 1) === ',' ? i - 1 : i), 0, outdent);
      };
      return this.scanTokens(function(token, i, tokens) {
        var j, tag, _i, _ref, _ref1, _ref2;
        tag = token[0];
        if (tag === 'TERMINATOR') {
          if (this.tag(i + 1) === 'ELSE' && this.tag(i - 1) !== 'OUTDENT') {
            tokens.splice.apply(tokens, [i, 1].concat(__slice.call(this.indentation())));
            return 1;
          }
          if (_ref = this.tag(i + 1), __indexOf.call(EXPRESSION_CLOSE, _ref) >= 0) {
            tokens.splice(i, 1);
            return 0;
          }
        }
        if (tag === 'CATCH') {
          for (j = _i = 1; _i <= 2; j = ++_i) {
            if (!((_ref1 = this.tag(i + j)) === 'OUTDENT' || _ref1 === 'TERMINATOR' || _ref1 === 'FINALLY')) {
              continue;
            }
            tokens.splice.apply(tokens, [i + j, 0].concat(__slice.call(this.indentation())));
            return 2 + j;
          }
        }
        if (__indexOf.call(SINGLE_LINERS, tag) >= 0 && this.tag(i + 1) !== 'INDENT' && !(tag === 'ELSE' && this.tag(i + 1) === 'IF')) {
          starter = tag;
          _ref2 = this.indentation(tokens[i]), indent = _ref2[0], outdent = _ref2[1];
          if (starter === 'THEN') {
            indent.fromThen = true;
          }
          tokens.splice(i + 1, 0, indent);
          this.detectEnd(i + 2, condition, action);
          if (tag === 'THEN') {
            tokens.splice(i, 1);
          }
          return 1;
        }
        return 1;
      });
    };

    Rewriter.prototype.tagPostfixConditionals = function() {
      var action, condition, original;
      original = null;
      condition = function(token, i) {
        var prevTag, tag;
        tag = token[0];
        prevTag = this.tokens[i - 1][0];
        return tag === 'TERMINATOR' || (tag === 'INDENT' && __indexOf.call(SINGLE_LINERS, prevTag) < 0);
      };
      action = function(token, i) {
        if (token[0] !== 'INDENT' || (token.generated && !token.fromThen)) {
          return original[0] = 'POST_' + original[0];
        }
      };
      return this.scanTokens(function(token, i) {
        if (token[0] !== 'IF') {
          return 1;
        }
        original = token;
        this.detectEnd(i + 1, condition, action);
        return 1;
      });
    };

    Rewriter.prototype.indentation = function(origin) {
      var indent, outdent;
      indent = ['INDENT', 2];
      outdent = ['OUTDENT', 2];
      if (origin) {
        indent.generated = outdent.generated = true;
        indent.origin = outdent.origin = origin;
      } else {
        indent.explicit = outdent.explicit = true;
      }
      return [indent, outdent];
    };

    Rewriter.prototype.generate = generate;

    Rewriter.prototype.tag = function(i) {
      var _ref;
      return (_ref = this.tokens[i]) != null ? _ref[0] : void 0;
    };

    return Rewriter;

  })();

  BALANCED_PAIRS = [['(', ')'], ['[', ']'], ['{', '}'], ['INDENT', 'OUTDENT'], ['CALL_START', 'CALL_END'], ['PARAM_START', 'PARAM_END'], ['INDEX_START', 'INDEX_END']];

  exports.INVERSES = INVERSES = {};

  EXPRESSION_START = [];

  EXPRESSION_END = [];

  for (_i = 0, _len = BALANCED_PAIRS.length; _i < _len; _i++) {
    _ref = BALANCED_PAIRS[_i], left = _ref[0], rite = _ref[1];
    EXPRESSION_START.push(INVERSES[rite] = left);
    EXPRESSION_END.push(INVERSES[left] = rite);
  }

  EXPRESSION_CLOSE = ['CATCH', 'THEN', 'ELSE', 'FINALLY'].concat(EXPRESSION_END);

  IMPLICIT_FUNC = ['IDENTIFIER', 'SUPER', ')', 'CALL_END', ']', 'INDEX_END', '@', 'THIS'];

  IMPLICIT_CALL = ['IDENTIFIER', 'NUMBER', 'STRING', 'JS', 'REGEX', 'NEW', 'PARAM_START', 'CLASS', 'IF', 'TRY', 'SWITCH', 'THIS', 'BOOL', 'NULL', 'UNDEFINED', 'UNARY', 'YIELD', 'UNARY_MATH', 'SUPER', 'THROW', '@', '->', '=>', '[', '(', '{', '--', '++'];

  IMPLICIT_UNSPACED_CALL = ['+', '-'];

  IMPLICIT_END = ['POST_IF', 'FOR', 'WHILE', 'UNTIL', 'WHEN', 'BY', 'LOOP', 'TERMINATOR'];

  SINGLE_LINERS = ['ELSE', '->', '=>', 'TRY', 'FINALLY', 'THEN'];

  SINGLE_CLOSERS = ['TERMINATOR', 'CATCH', 'FINALLY', 'ELSE', 'OUTDENT', 'LEADING_WHEN'];

  LINEBREAKS = ['TERMINATOR', 'INDENT', 'OUTDENT'];

  CALL_CLOSERS = ['.', '?.', '::', '?::'];

  IMPLICIT_FUNC.push('DEFER');

  IMPLICIT_CALL.push('DEFER');

  IMPLICIT_END.push('AWAIT');

}).call(this);

},{}],26:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Scope, extend, iced, last, _ref;

  _ref = require('./helpers'), extend = _ref.extend, last = _ref.last;

  iced = require('iced-runtime');

  exports.Scope = Scope = (function() {
    Scope.root = null;

    function Scope(parent, expressions, method) {
      this.parent = parent;
      this.expressions = expressions;
      this.method = method;
      this.variables = [
        {
          name: 'arguments',
          type: 'arguments'
        }
      ];
      this.positions = {};
      if (!this.parent) {
        Scope.root = this;
      }
    }

    Scope.prototype.add = function(name, type, immediate) {
      if (this.shared && !immediate) {
        return this.parent.add(name, type, immediate);
      }
      if (Object.prototype.hasOwnProperty.call(this.positions, name)) {
        return this.variables[this.positions[name]].type = type;
      } else {
        return this.positions[name] = this.variables.push({
          name: name,
          type: type
        }) - 1;
      }
    };

    Scope.prototype.namedMethod = function() {
      var _ref1;
      if (((_ref1 = this.method) != null ? _ref1.name : void 0) || !this.parent) {
        return this.method;
      }
      return this.parent.namedMethod();
    };

    Scope.prototype.find = function(name) {
      if (this.check(name)) {
        return true;
      }
      this.add(name, 'var');
      return false;
    };

    Scope.prototype.parameter = function(name) {
      if (this.shared && this.parent.check(name, true)) {
        return;
      }
      return this.add(name, 'param');
    };

    Scope.prototype.check = function(name) {
      var _ref1;
      return !!(this.type(name) || ((_ref1 = this.parent) != null ? _ref1.check(name) : void 0));
    };

    Scope.prototype.temporary = function(name, index) {
      if (name.length > 1) {
        return '_' + name + (index > 1 ? index - 1 : '');
      } else {
        return '_' + (index + parseInt(name, 36)).toString(36).replace(/\d/g, 'a');
      }
    };

    Scope.prototype.type = function(name) {
      var v, _i, _len, _ref1;
      _ref1 = this.variables;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.name === name) {
          return v.type;
        }
      }
      return null;
    };

    Scope.prototype.freeVariable = function(name, reserve) {
      var index, temp;
      if (reserve == null) {
        reserve = true;
      }
      index = 0;
      while (this.check((temp = this.temporary(name, index)))) {
        index++;
      }
      if (reserve) {
        this.add(temp, 'var', true);
      }
      return temp;
    };

    Scope.prototype.assign = function(name, value) {
      this.add(name, {
        value: value,
        assigned: true
      }, true);
      return this.hasAssignments = true;
    };

    Scope.prototype.hasDeclarations = function() {
      return !!this.declaredVariables().length;
    };

    Scope.prototype.declaredVariables = function() {
      var realVars, tempVars, v, _i, _len, _ref1;
      realVars = [];
      tempVars = [];
      _ref1 = this.variables;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.type === 'var') {
          (v.name.charAt(0) === '_' ? tempVars : realVars).push(v.name);
        }
      }
      return realVars.sort().concat(tempVars.sort());
    };

    Scope.prototype.assignedVariables = function() {
      var v, _i, _len, _ref1, _results;
      _ref1 = this.variables;
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.type.assigned) {
          _results.push("" + v.name + " = " + v.type.value);
        }
      }
      return _results;
    };

    return Scope;

  })();

}).call(this);

},{"./helpers":19,"iced-runtime":30}],27:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var LineMap, SourceMap;

  LineMap = (function() {
    function LineMap(line) {
      this.line = line;
      this.columns = [];
    }

    LineMap.prototype.add = function(column, _arg, options) {
      var sourceColumn, sourceLine;
      sourceLine = _arg[0], sourceColumn = _arg[1];
      if (options == null) {
        options = {};
      }
      if (this.columns[column] && options.noReplace) {
        return;
      }
      return this.columns[column] = {
        line: this.line,
        column: column,
        sourceLine: sourceLine,
        sourceColumn: sourceColumn
      };
    };

    LineMap.prototype.sourceLocation = function(column) {
      var mapping;
      while (!((mapping = this.columns[column]) || (column <= 0))) {
        column--;
      }
      return mapping && [mapping.sourceLine, mapping.sourceColumn];
    };

    return LineMap;

  })();

  SourceMap = (function() {
    var BASE64_CHARS, VLQ_CONTINUATION_BIT, VLQ_SHIFT, VLQ_VALUE_MASK;

    function SourceMap() {
      this.lines = [];
    }

    SourceMap.prototype.add = function(sourceLocation, generatedLocation, options) {
      var column, line, lineMap, _base;
      if (options == null) {
        options = {};
      }
      line = generatedLocation[0], column = generatedLocation[1];
      lineMap = ((_base = this.lines)[line] || (_base[line] = new LineMap(line)));
      return lineMap.add(column, sourceLocation, options);
    };

    SourceMap.prototype.sourceLocation = function(_arg) {
      var column, line, lineMap;
      line = _arg[0], column = _arg[1];
      while (!((lineMap = this.lines[line]) || (line <= 0))) {
        line--;
      }
      return lineMap && lineMap.sourceLocation(column);
    };

    SourceMap.prototype.generate = function(options, code) {
      var buffer, lastColumn, lastSourceColumn, lastSourceLine, lineMap, lineNumber, mapping, needComma, v3, writingline, _i, _j, _len, _len1, _ref, _ref1;
      if (options == null) {
        options = {};
      }
      if (code == null) {
        code = null;
      }
      writingline = 0;
      lastColumn = 0;
      lastSourceLine = 0;
      lastSourceColumn = 0;
      needComma = false;
      buffer = "";
      _ref = this.lines;
      for (lineNumber = _i = 0, _len = _ref.length; _i < _len; lineNumber = ++_i) {
        lineMap = _ref[lineNumber];
        if (lineMap) {
          _ref1 = lineMap.columns;
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            mapping = _ref1[_j];
            if (!(mapping)) {
              continue;
            }
            while (writingline < mapping.line) {
              lastColumn = 0;
              needComma = false;
              buffer += ";";
              writingline++;
            }
            if (needComma) {
              buffer += ",";
              needComma = false;
            }
            buffer += this.encodeVlq(mapping.column - lastColumn);
            lastColumn = mapping.column;
            buffer += this.encodeVlq(0);
            buffer += this.encodeVlq(mapping.sourceLine - lastSourceLine);
            lastSourceLine = mapping.sourceLine;
            buffer += this.encodeVlq(mapping.sourceColumn - lastSourceColumn);
            lastSourceColumn = mapping.sourceColumn;
            needComma = true;
          }
        }
      }
      v3 = {
        version: 3,
        file: options.generatedFile || '',
        sourceRoot: options.sourceRoot || '',
        sources: options.sourceFiles || [''],
        names: [],
        mappings: buffer
      };
      if (options.inline) {
        v3.sourcesContent = [code];
      }
      return JSON.stringify(v3, null, 2);
    };

    VLQ_SHIFT = 5;

    VLQ_CONTINUATION_BIT = 1 << VLQ_SHIFT;

    VLQ_VALUE_MASK = VLQ_CONTINUATION_BIT - 1;

    SourceMap.prototype.encodeVlq = function(value) {
      var answer, nextChunk, signBit, valueToEncode;
      answer = '';
      signBit = value < 0 ? 1 : 0;
      valueToEncode = (Math.abs(value) << 1) + signBit;
      while (valueToEncode || !answer) {
        nextChunk = valueToEncode & VLQ_VALUE_MASK;
        valueToEncode = valueToEncode >> VLQ_SHIFT;
        if (valueToEncode) {
          nextChunk |= VLQ_CONTINUATION_BIT;
        }
        answer += this.encodeBase64(nextChunk);
      }
      return answer;
    };

    BASE64_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

    SourceMap.prototype.encodeBase64 = function(value) {
      return BASE64_CHARS[value] || (function() {
        throw new Error("Cannot Base64 encode value: " + value);
      })();
    };

    return SourceMap;

  })();

  exports.SourceMap = SourceMap;

}).call(this);

},{}],28:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  module.exports = {
    k: "__iced_k",
    k_noop: "__iced_k_noop",
    param: "__iced_p_",
    ns: "iced",
    runtime: "runtime",
    Deferrals: "Deferrals",
    deferrals: "__iced_deferrals",
    fulfill: "_fulfill",
    b_while: "_break",
    t_while: "_while",
    c_while: "_continue",
    n_while: "_next",
    n_arg: "__iced_next_arg",
    defer_method: "defer",
    slot: "__slot",
    assign_fn: "assign_fn",
    autocb: "autocb",
    retslot: "ret",
    trace: "__iced_trace",
    passed_deferral: "__iced_passed_deferral",
    findDeferral: "findDeferral",
    lineno: "lineno",
    parent: "parent",
    filename: "filename",
    funcname: "funcname",
    catchExceptions: 'catchExceptions',
    runtime_modes: ["node", "inline", "window", "none", "browserify", "interp"],
    trampoline: "trampoline",
    context: "context",
    defer_arg: "__iced_defer_"
  };

}).call(this);

},{}],29:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var C, Pipeliner, iced, __iced_k, __iced_k_noop, _iand, _ior, _timeout,
    __slice = [].slice;

  __iced_k = __iced_k_noop = function() {};

  C = require('./const');

  exports.iced = iced = require('./runtime');

  _timeout = function(cb, t, res, tmp) {
    var arr, rv, which, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    rv = new iced.Rendezvous;
    tmp[0] = rv.id(true).defer({
      assign_fn: (function(_this) {
        return function() {
          return function() {
            return arr = __slice.call(arguments, 0);
          };
        };
      })(this)(),
      lineno: 20,
      context: __iced_deferrals
    });
    setTimeout(rv.id(false).defer({
      lineno: 21,
      context: __iced_deferrals
    }), t);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        rv.wait(__iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return which = arguments[0];
            };
          })(),
          lineno: 22
        }));
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (res) {
          res[0] = which;
        }
        return cb.apply(null, arr);
      };
    })(this));
  };

  exports.timeout = function(cb, t, res) {
    var tmp;
    tmp = [];
    _timeout(cb, t, res, tmp);
    return tmp[0];
  };

  _iand = function(cb, res, tmp) {
    var ok, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        tmp[0] = __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return ok = arguments[0];
            };
          })(),
          lineno: 39
        });
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (!ok) {
          res[0] = false;
        }
        return cb();
      };
    })(this));
  };

  exports.iand = function(cb, res) {
    var tmp;
    tmp = [];
    _iand(cb, res, tmp);
    return tmp[0];
  };

  _ior = function(cb, res, tmp) {
    var ok, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        tmp[0] = __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return ok = arguments[0];
            };
          })(),
          lineno: 58
        });
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (ok) {
          res[0] = true;
        }
        return cb();
      };
    })(this));
  };

  exports.ior = function(cb, res) {
    var tmp;
    tmp = [];
    _ior(cb, res, tmp);
    return tmp[0];
  };

  exports.Pipeliner = Pipeliner = (function() {
    function Pipeliner(window, delay) {
      this.window = window || 1;
      this.delay = delay || 0;
      this.queue = [];
      this.n_out = 0;
      this.cb = null;
      this[C.deferrals] = this;
      this["defer"] = this._defer;
    }

    Pipeliner.prototype.waitInQueue = function(cb) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      (function(_this) {
        return (function(__iced_k) {
          var _while;
          _while = function(__iced_k) {
            var _break, _continue, _next;
            _break = __iced_k;
            _continue = function() {
              return iced.trampoline(function() {
                return _while(__iced_k);
              });
            };
            _next = _continue;
            if (!(_this.n_out >= _this.window)) {
              return _break();
            } else {
              (function(__iced_k) {
                __iced_deferrals = new iced.Deferrals(__iced_k, {
                  parent: ___iced_passed_deferral,
                  filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                  funcname: "Pipeliner.waitInQueue"
                });
                _this.cb = __iced_deferrals.defer({
                  lineno: 100
                });
                __iced_deferrals._fulfill();
              })(_next);
            }
          };
          _while(__iced_k);
        });
      })(this)((function(_this) {
        return function() {
          _this.n_out++;
          (function(__iced_k) {
            if (_this.delay) {
              (function(__iced_k) {
                __iced_deferrals = new iced.Deferrals(__iced_k, {
                  parent: ___iced_passed_deferral,
                  filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                  funcname: "Pipeliner.waitInQueue"
                });
                setTimeout(__iced_deferrals.defer({
                  lineno: 108
                }), _this.delay);
                __iced_deferrals._fulfill();
              })(__iced_k);
            } else {
              return __iced_k();
            }
          })(function() {
            return cb();
          });
        };
      })(this));
    };

    Pipeliner.prototype.__defer = function(out, deferArgs) {
      var tmp, voidCb, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
            funcname: "Pipeliner.__defer"
          });
          voidCb = __iced_deferrals.defer({
            lineno: 122
          });
          out[0] = function() {
            var args, _ref;
            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
            if ((_ref = deferArgs.assign_fn) != null) {
              _ref.apply(null, args);
            }
            return voidCb();
          };
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          _this.n_out--;
          if (_this.cb) {
            tmp = _this.cb;
            _this.cb = null;
            return tmp();
          }
        };
      })(this));
    };

    Pipeliner.prototype._defer = function(deferArgs) {
      var tmp;
      tmp = [];
      this.__defer(tmp, deferArgs);
      return tmp[0];
    };

    Pipeliner.prototype.flush = function(autocb) {
      var ___iced_passed_deferral, __iced_k, _while;
      __iced_k = autocb;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      _while = (function(_this) {
        var __iced_deferrals;
        return function(__iced_k) {
          var _break, _continue, _next;
          _break = __iced_k;
          _continue = function() {
            return iced.trampoline(function() {
              return _while(__iced_k);
            });
          };
          _next = _continue;
          if (!_this.n_out) {
            return _break();
          } else {
            (function(__iced_k) {
              __iced_deferrals = new iced.Deferrals(__iced_k, {
                parent: ___iced_passed_deferral,
                filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                funcname: "Pipeliner.flush"
              });
              _this.cb = __iced_deferrals.defer({
                lineno: 151
              });
              __iced_deferrals._fulfill();
            })(_next);
          }
        };
      })(this);
      _while(__iced_k);
    };

    return Pipeliner;

  })();

}).call(this);

},{"./const":28,"./runtime":31}],30:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var k, mod, mods, v, _i, _len;

  exports["const"] = require('./const');

  mods = [require('./runtime'), require('./library')];

  for (_i = 0, _len = mods.length; _i < _len; _i++) {
    mod = mods[_i];
    for (k in mod) {
      v = mod[k];
      exports[k] = v;
    }
  }

}).call(this);

},{"./const":28,"./library":29,"./runtime":31}],31:[function(require,module,exports){
(function (process){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var C, Deferrals, Rendezvous, exceptionHandler, findDeferral, make_defer_return, stackWalk, tick_counter, trampoline, warn, __active_trace, __c, _trace_to_string,
    __slice = [].slice;

  C = require('./const');

  make_defer_return = function(obj, defer_args, id, trace_template, multi) {
    var k, ret, trace, v;
    trace = {};
    for (k in trace_template) {
      v = trace_template[k];
      trace[k] = v;
    }
    trace[C.lineno] = defer_args != null ? defer_args[C.lineno] : void 0;
    ret = function() {
      var inner_args, o, _ref;
      inner_args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      if (defer_args != null) {
        if ((_ref = defer_args.assign_fn) != null) {
          _ref.apply(null, inner_args);
        }
      }
      if (obj) {
        o = obj;
        if (!multi) {
          obj = null;
        }
        return o._fulfill(id, trace);
      } else {
        return warn("overused deferral at " + (_trace_to_string(trace)));
      }
    };
    ret[C.trace] = trace;
    return ret;
  };

  __c = 0;

  tick_counter = function(mod) {
    __c++;
    if ((__c % mod) === 0) {
      __c = 0;
      return true;
    } else {
      return false;
    }
  };

  __active_trace = null;

  _trace_to_string = function(tr) {
    var fn;
    fn = tr[C.funcname] || "<anonymous>";
    return "" + fn + " (" + tr[C.filename] + ":" + (tr[C.lineno] + 1) + ")";
  };

  warn = function(m) {
    return typeof console !== "undefined" && console !== null ? console.error("ICED warning: " + m) : void 0;
  };

  exports.trampoline = trampoline = function(fn) {
    if (!tick_counter(500)) {
      return fn();
    } else if ((typeof process !== "undefined" && process !== null ? process.nextTick : void 0) != null) {
      return process.nextTick(fn);
    } else {
      return setTimeout(fn);
    }
  };

  exports.Deferrals = Deferrals = (function() {
    function Deferrals(k, trace) {
      this.trace = trace;
      this.continuation = k;
      this.count = 1;
      this.ret = null;
    }

    Deferrals.prototype._call = function(trace) {
      var c;
      if (this.continuation) {
        __active_trace = trace;
        c = this.continuation;
        this.continuation = null;
        return c(this.ret);
      } else {
        return warn("Entered dead await at " + (_trace_to_string(trace)));
      }
    };

    Deferrals.prototype._fulfill = function(id, trace) {
      if (--this.count > 0) {

      } else {
        return trampoline(((function(_this) {
          return function() {
            return _this._call(trace);
          };
        })(this)));
      }
    };

    Deferrals.prototype.defer = function(args) {
      var self;
      this.count++;
      self = this;
      return make_defer_return(self, args, null, this.trace);
    };

    return Deferrals;

  })();

  exports.findDeferral = findDeferral = function(args) {
    var a, _i, _len;
    for (_i = 0, _len = args.length; _i < _len; _i++) {
      a = args[_i];
      if (a != null ? a[C.trace] : void 0) {
        return a;
      }
    }
    return null;
  };

  exports.Rendezvous = Rendezvous = (function() {
    var RvId;

    function Rendezvous() {
      this.completed = [];
      this.waiters = [];
      this.defer_id = 0;
    }

    RvId = (function() {
      function RvId(rv, id, multi) {
        this.rv = rv;
        this.id = id;
        this.multi = multi;
      }

      RvId.prototype.defer = function(defer_args) {
        return this.rv._defer_with_id(this.id, defer_args, this.multi);
      };

      return RvId;

    })();

    Rendezvous.prototype.wait = function(cb) {
      var x;
      if (this.completed.length) {
        x = this.completed.shift();
        return cb(x);
      } else {
        return this.waiters.push(cb);
      }
    };

    Rendezvous.prototype.defer = function(defer_args) {
      var id;
      id = this.defer_id++;
      return this._defer_with_id(id, defer_args);
    };

    Rendezvous.prototype.id = function(i, multi) {
      multi = !!multi;
      return new RvId(this, i, multi);
    };

    Rendezvous.prototype._fulfill = function(id, trace) {
      var cb;
      if (this.waiters.length) {
        cb = this.waiters.shift();
        return cb(id);
      } else {
        return this.completed.push(id);
      }
    };

    Rendezvous.prototype._defer_with_id = function(id, defer_args, multi) {
      this.count++;
      return make_defer_return(this, defer_args, id, {}, multi);
    };

    return Rendezvous;

  })();

  exports.stackWalk = stackWalk = function(cb) {
    var line, ret, tr, _ref;
    ret = [];
    tr = cb ? cb[C.trace] : __active_trace;
    while (tr) {
      line = "   at " + (_trace_to_string(tr));
      ret.push(line);
      tr = tr != null ? (_ref = tr[C.parent]) != null ? _ref[C.trace] : void 0 : void 0;
    }
    return ret;
  };

  exports.exceptionHandler = exceptionHandler = function(err, logger) {
    var stack;
    if (!logger) {
      logger = console.error;
    }
    logger(err.stack);
    stack = stackWalk();
    if (stack.length) {
      logger("Iced 'stack' trace (w/ real line numbers):");
      return logger(stack.join("\n"));
    }
  };

  exports.catchExceptions = function(logger) {
    return typeof process !== "undefined" && process !== null ? process.on('uncaughtException', function(err) {
      exceptionHandler(err, logger);
      return process.exit(1);
    }) : void 0;
  };

}).call(this);

}).call(this,require('_process'))

},{"./const":28,"_process":36}],32:[function(require,module,exports){

var indexOf = [].indexOf;

module.exports = function(arr, obj){
  if (indexOf) return arr.indexOf(obj);
  for (var i = 0; i < arr.length; ++i) {
    if (arr[i] === obj) return i;
  }
  return -1;
};
},{}],33:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],34:[function(require,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.js2coffee=e()}}(function(){var e,t,u;return function n(e,t,u){function r(o,s){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!s&&a)return a(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var u=e[o][1][t];return r(u?u:t)},f,f.exports,n,e,t,u)}return t[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<u.length;o++)r(u[o]);return r}({1:[function(e,t,u){var n,r,i,o,s;i=e("./lib/transforms/base");r=e("./lib/builder/base");n=e("./lib/builder");o=e("./lib/helpers").buildError;t.exports=s=function(e,t){return s.build(e,t).code};s.build=function(e,t){var u,n,r,i,o,a;if(t==null){t={}}if(t.filename==null){t.filename="input.js"}if(t.indent==null){t.indent=2}t.source=e;u=s.parseJS(e,t);i=s.transform(u,t),u=i.ast,a=i.warnings;o=s.generate(u,t),n=o.code,r=o.map;return{code:n,ast:u,map:r,warnings:a}};s.parseJS=function(t,u){var n,r,i;if(u==null){u={}}try{n=e("esprima");return n.parse(t,{loc:true,range:true,comment:true})}catch(i){r=i;throw o(r,t,u.filename)}};s.transform=function(t,u){var n,r,o;if(u==null){u={}}r={};o=function(e){return i.run(t,u,e,r)};n=!(u.comments===false);if(n){o([e("./lib/transforms/comments")])}o([e("./lib/transforms/functions")]);o([e("./lib/transforms/exponents"),e("./lib/transforms/ifs"),e("./lib/transforms/iife"),e("./lib/transforms/literals"),e("./lib/transforms/loops"),e("./lib/transforms/members"),e("./lib/transforms/objects"),e("./lib/transforms/binary"),e("./lib/transforms/empty_statements"),e("./lib/transforms/others"),e("./lib/transforms/precedence"),e("./lib/transforms/returns"),e("./lib/transforms/switches"),e("./lib/transforms/unsupported")]);o([e("./lib/transforms/blocks")]);return{ast:t,warnings:r.warnings}};s.generate=function(e,t){if(t==null){t={}}return new n(e,t).get()};s.version=e("./package.json").version},{"./lib/builder":3,"./lib/builder/base":2,"./lib/helpers":5,"./lib/transforms/base":6,"./lib/transforms/binary":7,"./lib/transforms/blocks":8,"./lib/transforms/comments":9,"./lib/transforms/empty_statements":10,"./lib/transforms/exponents":11,"./lib/transforms/functions":12,"./lib/transforms/ifs":13,"./lib/transforms/iife":14,"./lib/transforms/literals":15,"./lib/transforms/loops":16,"./lib/transforms/members":17,"./lib/transforms/objects":18,"./lib/transforms/others":19,"./lib/transforms/precedence":20,"./lib/transforms/returns":21,"./lib/transforms/switches":22,"./lib/transforms/unsupported":23,"./package.json":61,esprima:48}],2:[function(e,t,u){var n,r,i=function(e,t){return function(){return e.apply(t,arguments)}};r=e("./strip_spaces");n=function(){function t(e,t){this.root=e;this.options=t!=null?t:{};this.walk=i(this.walk,this);this.path=[]}t.prototype.run=function(){return this.walk(this.root)};t.prototype.walk=function(e,t){var u,n,r;n=this.path.length;this.path.push(e);if(typeof t!=="string"){t=void 0}t||(t=e.type);this.ctx={path:this.path,type:t,parent:this.path[this.path.length-2]};u=this[t];if(u){r=u.call(this,e,this.ctx);if(this.decorator!=null){r=this.decorator(e,r)}}else{r=this.onUnknownNode(e,this.ctx)}this.path.splice(n);return r};t.prototype.get=function(){var e;e=this.run();e=r(e);return e.toStringWithSourceMap()};t.prototype.decorator=function(t,u){var n,r,i,o,s;n=e("source-map").SourceNode;return new n(t!=null?(r=t.loc)!=null?(i=r.start)!=null?i.line:void 0:void 0:void 0,t!=null?(o=t.loc)!=null?(s=o.start)!=null?s.column:void 0:void 0:void 0,this.options.filename,u)};return t}();t.exports=n},{"./strip_spaces":4,"source-map":50}],3:[function(e,t,u){var n,r,i,o,s,a,l,f,c,p,D,h,m=function(e,t){for(var u in t){if(d.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},d={}.hasOwnProperty;p=e("../helpers"),f=p.prependAll,c=p.quote,l=p.newline,D=p.space,s=p.delimit,o=p.commaDelimit,h=p.toIndent,a=p.joinLines;i=e("../transforms/base");r=e("./base");t.exports=n=function(e){m(t,e);function t(e,u){if(u==null){u={}}t.__super__.constructor.apply(this,arguments);this._indent=0}t.prototype.Program=function(e){this.comments=e.comments;return this.BlockStatement(e)};t.prototype.ExpressionStatement=function(e){return l(this.walk(e.expression))};t.prototype.AssignmentExpression=function(e){var t;t=this.paren(D([this.walk(e.left),e.operator,this.walk(e.right)]));if(e.right.type==="FunctionExpression"){t=["\n",this.indent(),t,"\n"]}return t};t.prototype.Identifier=function(e){return[e.name]};t.prototype.UnaryExpression=function(e){var t,u;t=function(){return e.argument.type==="UnaryExpression"};u=function(){return/^[a-z]+$/i.test(e.operator)};if(t()||u()){return this.paren([e.operator," ",this.walk(e.argument)])}else{return this.paren([e.operator,this.walk(e.argument)])}};t.prototype.BinaryExpression=function(e){var t;t=e.operator;if(t==="in"){t="of"}return this.paren(D([this.walk(e.left),t,this.walk(e.right)]))};t.prototype.Literal=function(e){if(typeof e.value==="string"){return[c(e.value)]}else{return[e.raw]}};t.prototype.MemberExpression=function(e){var t;t=e.computed?["[",this.walk(e.property),"]"]:e._prefixed?[this.walk(e.property)]:[".",this.walk(e.property)];return this.paren([this.walk(e.object),t])};t.prototype.LogicalExpression=function(e){var t,u;u={"||":"or","&&":"and"};t=u[e.operator];return this.paren([this.walk(e.left)," ",t," ",this.walk(e.right)])};t.prototype.ThisExpression=function(e){if(e._prefix){return["@"]}else{return["this"]}};t.prototype.CallExpression=function(e,t){var u,n,r;u=this.walk(e.callee);r=this.makeSequence(e["arguments"]);e._isStatement=t.parent.type==="ExpressionStatement";n=r.length>0;if(e._isStatement&&n){return D([u,r])}else{return[u,this.paren(r,true)]}};t.prototype.IfStatement=function(e){var t,u;t=e.alternate;if((t!=null?t.type:void 0)==="IfStatement"){u=this.indent(["else ",this.walk(e.alternate,"IfStatement")])}else if((t!=null?t.type:void 0)==="BlockStatement"){u=this.indent(function(t){return function(u){return[u,"else","\n",t.walk(e.alternate)]}}(this))}else if(t!=null){u=this.indent(function(t){return function(u){return[u,"else","\n",t.indent(t.walk(e.alternate))]}}(this))}else{u=[]}return this.indent(function(t){return function(n){var r,i,o;i=t.walk(e.test);r=t.walk(e.consequent);if(e.consequent.type!=="BlockStatement"){r=t.indent(r)}o=e._negative?"unless":"if";return[o," ",i,"\n",r,u]}}(this))};t.prototype.BlockStatement=function(e){return this.makeStatements(e,e.body)};t.prototype.makeStatements=function(e,t){var u,n,r,i,o,s;s=t.map(this.walk);o=[];for(u=r=0,i=s.length;r<i;u=++r){n=s[u];if(t[u].type!=="BlockStatement"){o.push(this.indent())}o.push(n)}return o};t.prototype.LineComment=function(e){return["#",e.value,"\n"]};t.prototype.BlockComment=function(e){var t,u;t=("###"+e.value+"###").split("\n");u=[s(t,["\n",this.indent()]),"\n"];return["\n",this.indent(),u,"\n"]};t.prototype.ReturnStatement=function(e){if(e.argument){return D(["return",[this.walk(e.argument),"\n"]])}else{return["return","\n"]}};t.prototype.ArrayExpression=function(e){var t,u;u=e.elements.length;t=u===1;if(u===0){return["[]"]}else if(t){return D(["[",e.elements.map(this.walk),"]"])}else{return this.indent(function(t){return function(u){var n,r;r=e.elements.map(function(e){return l(t.walk(e))});n=f(r,t.indent());return["[","\n",n,u,"]"]}}(this))}};t.prototype.ObjectExpression=function(e,t){var u,n;n=e.properties.length;u=e._braced;if(n===0){return["{}"]}else if(n===1){n=e.properties.map(this.walk);if(u){return this.paren(D(["{",n,"}"]))}else{return this.paren([n])}}else if(e._last){n=e.properties.map(this.walk);return s(n,["\n",this.indent()])}else{n=this.indent(function(t){return function(){n=e.properties.map(t.walk);return["\n",a(n,t.indent())]}}(this));if(u){return this.paren(["{",n,"\n",this.indent(),"}"])}else{return this.paren([n])}}};t.prototype.Property=function(e){if(e.kind!=="init"){throw new Error("Property: not sure about kind "+e.kind)}return D([[this.walk(e.key),":"],this.walk(e.value)])};t.prototype.VariableDeclaration=function(e){var t;t=e.declarations.map(this.walk);return s(t,this.indent())};t.prototype.VariableDeclarator=function(e){var t;t=[this.walk(e.id)," = ",l(this.walk(e.init))];if(e.init.type==="FunctionExpression"){t=["\n",this.indent(),t,"\n"]}return t};t.prototype.FunctionExpression=function(e,t){var u,n;n=this.makeParams(e.params,e.defaults);u=this.indent(function(t){return function(u){return[n,"->","\n",t.walk(e.body)]}}(this));if(e._parenthesized){return["(",u,this.indent(),")"]}else{return u}};t.prototype.EmptyStatement=function(e){return[]};t.prototype.SequenceExpression=function(e){var t;t=e.expressions.map(function(e){return function(t){return[e.walk(t),"\n"]}}(this));return s(t,this.indent())};t.prototype.NewExpression=function(e){var t,u,n,r;u=((n=e.callee)!=null?n.type:void 0)==="Identifier"?[this.walk(e.callee)]:["(",this.walk(e.callee),")"];t=((r=e["arguments"])!=null?r.length:void 0)?["(",this.makeSequence(e["arguments"]),")"]:[];return this.paren(["new ",u,t])};t.prototype.WhileStatement=function(e){return["while ",this.walk(e.test),"\n",this.makeLoopBody(e.body)]};t.prototype.CoffeeLoopStatement=function(e){return["loop","\n",this.makeLoopBody(e.body)]};t.prototype.BreakStatement=function(e){return["break","\n"]};t.prototype.ContinueStatement=function(e){return["continue","\n"]};t.prototype.DebuggerStatement=function(e){return["debugger","\n"]};t.prototype.TryStatement=function(e){var t,u,n;n=this.indent(function(t){return function(){return["try","\n",t.walk(e.block)]}}(this));t=this.indent(function(t){return function(u){return[u,t.walk(e.handler)]}}(this));u=e.finalizer!=null?this.indent(function(t){return function(u){return[u,"finally","\n",t.walk(e.finalizer)]}}(this)):[];return[n,t,u]};t.prototype.CatchClause=function(e){return["catch ",this.walk(e.param),"\n",this.walk(e.body)]};t.prototype.ThrowStatement=function(e){return["throw ",this.walk(e.argument),"\n"]};t.prototype.ConditionalExpression=function(e){return this.paren(D(["if",this.walk(e.test),"then",this.walk(e.consequent),"else",this.walk(e.alternate)]))};t.prototype.UpdateExpression=function(e){if(e.prefix){return[e.operator,this.walk(e.argument)]}else{return[this.walk(e.argument),e.operator]}};t.prototype.SwitchStatement=function(e){var t,u;t=this.indent(function(t){return function(){return t.makeStatements(e,e.cases)}}(this));u=this.walk(e.discriminant);if(e.discriminant.type==="ConditionalExpression"){u=["(",u,")"]}return["switch ",u,"\n",t]};t.prototype.CoffeeListExpression=function(e){return this.makeSequence(e.expressions)};t.prototype.SwitchCase=function(e){var t,u;t=e.test?["when ",this.walk(e.test)]:["else"];u=this.indent(function(t){return function(){return t.makeStatements(e,e.consequent)}}(this));return[t,"\n",u]};t.prototype.ForInStatement=function(e){var t,u,n;if(e.left.type!=="VariableDeclaration"){u=this.walk(e.left);n={type:"ExpressionStatement",expression:{type:"CoffeeEscapedExpression",raw:u+" = "+u}};e.body.body=[n].concat(e.body.body)}else{u=this.walk(e.left.declarations[0].id)}t=this.makeLoopBody(e.body);return["for ",u," of ",this.walk(e.right),"\n",t]};t.prototype.makeLoopBody=function(e){var t;t=(e!=null?e.type:void 0)==="BlockStatement";if(!e||t&&e.body.length===0){return this.indent(function(e){return function(){return[e.indent(),"continue","\n"]}}(this))}else if(t){return this.indent(function(t){return function(){return t.walk(e)}}(this))}else{return this.indent(function(t){return function(){return[t.indent(),t.walk(e)]}}(this))}};t.prototype.CoffeeEscapedExpression=function(e){if(e._parenthesized){return["(`",e.raw,"`)"]}else{return["`",e.raw,"`"]}};t.prototype.CoffeePrototypeExpression=function(e){if(e.computed){return[this.walk(e.object),"::[",this.walk(e.property),"]"]}else{return[this.walk(e.object),"::",this.walk(e.property)]}};t.prototype.CoffeeDoExpression=function(e){return D(["do",this.walk(e["function"])])};t.prototype.makeSequence=function(e){var t,u,n,r,i;for(u=r=0,i=e.length;r<i;u=++r){t=e[u];n=u===e.length-1;if(!n){if(t.type==="FunctionExpression"){t._parenthesized=true}else if(t.type==="ObjectExpression"){t._braced=true}}}return o(e.map(this.walk))};t.prototype.makeParams=function(e,t){var u,n,r,i,o,a;o=[];for(n=r=0,i=e.length;r<i;n=++r){a=e[n];if(t[n]){u=this.walk(t[n]);o.push([this.walk(a)," = ",u])}else{o.push(this.walk(a))}}if(e.length){return["(",s(o,", "),") "]}else{return[]}};t.prototype.parenthesizeArguments=function(e){var t,u,n,r,i,o,s;o=e["arguments"];s=[];for(u=r=0,i=o.length;r<i;u=++r){t=o[u];n=u===e["arguments"].length-1;if(t.type==="FunctionExpression"){if(!n){s.push(t._parenthesized=true)}else{s.push(void 0)}}else{s.push(void 0)}}return s};t.prototype.indent=function(e){var t,u,n;if(typeof e==="function"){t=this.indent();this._indent+=1;u=e(t);this._indent-=1;return u}else if(e){return[this.indent(),e]}else{n=h(this.options.indent);return Array(this._indent+1).join(n)}};t.prototype.paren=function(e,t){var u,n;if(t==null){t=(n=this.path[this.path.length-1])!=null?n._parenthesized:void 0}u=e.toString().match(/\n$/);if(t){if(u){return["(",e,this.indent(),")"]}else{return["(",e,")"]}}else{return e}};t.prototype.onUnknownNode=function(e,t){return this.syntaxError(e,e.type+" is not supported")};t.prototype.syntaxError=i.prototype.syntaxError;return t}(r)},{"../helpers":5,"../transforms/base":6,"./base":2}],4:[function(e,t,u){var n,r,i,o,s,a,l;n=/^\s*\n+\s*$/;l=function(e){e=a(e);e=s(e);e=o(e);e=i(e);return e};i=function(e){var t,u;u=0;t=null;return r(e,{},function(e){if(u===0||u===1&&e.match(n)){u=1;return e}else if(u===1&&e.match(/^[ \t]+$/)){t=e;u=2;return""}else if(u===2){u=1;if(e.match(n)){return e}else{return t+e}}else{u=0;return e}})};a=function(e){return r(e,{},function(e){if(e.match(n)){return""}else{this["break"]();return e}})};s=function(e){return r(e,{reverse:true},function(e){if(e.match(n)){return""}else{this["break"]();return e+"\n"}})};o=function(e){var t;t=0;return r(e,{},function(e){if(e==="\n"){t+=1}else if(e.match(/^\s*$/)){}else{t=0}if(t>=3){return""}else{return e}})};r=function(e,t,u){var n,r,i;if(t==null){t={}}n=false;r={"break":function(e){return n=true}};i=function(e,t,u){var o,s,a,l,f,c,p,D,h,m,d,A;if(t==null){t={}}D=t.reverse?function(){d=[];for(var t=h=e.children.length-1;h<=0?t<=0:t>=0;h<=0?t++:t--){d.push(t)}return d}.apply(this):function(){A=[];for(var t=0,u=e.children.length;0<=u?t<u:t>u;0<=u?t++:t--){A.push(t)}return A}.apply(this);for(f=0,c=D.length;f<c;f++){s=D[f];if(n){return e}o=e.children[s];if(!o){}else if(o.children){i(o,t,u)}else if(o!==""){p=u.call(r,o);e.children[s]=p}}return e};return i.call(r,e,t,u)};t.exports=l},{}],5:[function(e,t,u){u.delimit=function(e,t){var u,n,r,i,o;o=[];for(u=r=0,i=e.length;r<i;u=++r){n=e[u];if(u>0){o.push(t)}o.push(n)}return o};u.commaDelimit=function(e){var t,u,n,r,i;i=[];for(t=n=0,r=e.length;n<r;t=++n){u=e[t];if(t>0){if(/^\n/.test(u.toString())){i.push(",")}else{i.push(", ")}}i.push(u)}return i};u.prependAll=function(e,t){var u,n,r,i,o;o=[];for(u=r=0,i=e.length;r<i;u=++r){n=e[u];o.push(t);o.push(n)}return o};u.buildError=function(e,t,u){var n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E;if(u==null){u=""}if(e.js2coffee){return e}i=e.description;l=(m=(d=e.start)!=null?d.line:void 0)!=null?m:e.lineNumber;r=(A=(C=(E=e.start)!=null?E.column:void 0)!=null?C:e.column&&e.column-1)!=null?A:0;s=u+":"+l+":"+r+": "+i;f=t.split("\n");D=Math.max(l-3,0);c=l-1;o=c.toString().length;a=1;if(e.end){a=Math.max(e.end.column-e.start.column,1)}h=function(e){return Array(1+o-e.toString().length).join(" ")+e};t=f.slice(D,+c+1||9e9).map(function(e,t){return h(1+t+D)+"  "+e});t.push(Array(o+3).join(" ")+Array(r+1).join(" ")+Array(a+1).join("^"));t=t.join("\n");p=s+"\n\n"+t;n=e;e=new Error(p);e.filename=u;e.description=n.description;e.start={line:l,column:r};e.end=n.end;e.sourcePreview=t;e.js2coffee=true;return e};u.space=function(e){return e.reduce(function(e,t,u){if(u===0){return e.concat([t])}else if(t.toString().substr(0,1)==="\n"){return e.concat([t])}else{return e.concat([" ",t])}},[])};u.newline=function(e){if(/\n$/.test(e.toString())){return e}else{return[e,"\n"]}};u.inspect=function(t){return"~~~~\n"+e("util").inspect(t,{depth:1e3,colors:true})+"\n~~~~"};u.replace=function(e,t){t.range=e.range;t.loc=e.loc;return t};u.clone=function(e){return JSON.parse(JSON.stringify(e))};u.quote=function(e){var t,u;if(typeof e==="string"){t=function(e){var t;t=e.charCodeAt(0).toString(16);t=function(){var e,u,n;n=[];for(e=0,u=4-t.length;0<=u?e<u:e>u;0<=u?e++:e--){n.push("0")}return n}().join("")+t;return"\\u"+t};u=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/\n/g,"\\n").replace(/[\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,t);return"'"+u+"'"}else{return JSON.stringify(e)}};u.getPrecedence=function(e){var t,u,n,r;r=e.type;u=function(t){return t.indexOf(e.operator)>-1};t={"**":17,"*":14,"/":14,"%":14,"+":13,"-":13,"<<":12,">>":12,">>>":12,"<":11,">":11,"<=":11,">=":11,"in":11,"instanceof":11,"==":10,"===":10,"!=":10,"!==":10,"&":9,"^":8,"|":7};n={"&&":6,"||":5};switch(r){case"Literal":case"Identifier":return 99;case"MemberExpression":case"CallExpression":return 18;case"NewExpression":if(e["arguments"].length===0){return 17}else{return 18}break;case"UpdateExpression":if(e.prefix){return 15}else{return 16}break;case"UnaryExpression":return 15;case"BinaryExpression":return t[e.operator];case"LogicalExpression":return n[e.operator];case"ConditionalExpression":return 4;case"AssignmentExpression":return 3;case"SequenceExpression":return 0;default:return-1}};u.lastStatement=function(e){var t,n,r,i;for(t=n=i=e.length-1;i<=0?n<=0:n>=0;t=i<=0?++n:--n){r=e[t];if(!r){continue}if(!u.isComment(r)){return r}}};u.getReturnStatements=function(e){var t,n,r,i,o;r=u.getReturnStatements,i=u.lastStatement;if(!e){return}else if(e.length){o=i(e)}else{o=e}if(!o){return[]}else if(o.type==="ReturnStatement"){return[o]}else if(o.type==="BlockStatement"){return r(o.body)}else if(o.type==="IfStatement"&&o.consequent&&o.alternate){n=r(o.consequent);t=r(o.alternate);if(n.length>0&&t.length>0){return n.concat(t)}else{return[]}}else{return[]}};u.joinLines=function(e,t){var u,n,r,i,o,s;s=[];for(u=i=0,o=e.length;i<o;u=++i){r=e[u];s.push(t);s.push(r);n=u!==e.length-1;if(!r.toString().match(/\n$/)&&n){s.push("\n")}}return s};u.reserved={keywords:["then","unless","until","loop","of","by","when"],reserved:["case","default","function","var","void","with","const","let","enum","export","import","native","__hasProp","__extends","__slice","__bind","__indexOf","implements","interface","package","private","protected","public","static","yield"],aliases:["and","or","is","isnt","not","yes","no","on","off"]};u.reservedWords=u.reserved.keywords.concat(u.reserved.reserved.concat(u.reserved.aliases));u.nextUntil=function(e,t,u){var n,r,i,o,s,a;r=e.indexOf(t);for(n=i=s=r+1,a=e.length;s<=a?i<=a:i>=a;n=s<=a?++i:--i){o=e[n];if((o!=null?o.type:void 0)&&u(o)){return o}}};u.nextNonComment=function(e,t){return u.nextUntil(e,t,function(e){return e.type!=="BlockComment"&&e.type!=="LineComment"})};u.isLoop=function(e){return e.test==null||u.isTruthy(e.test)};u.isTruthy=function(e){return e.type==="Literal"&&e.value};u.escapeJs=function(t){return u.replace(t,{type:"CoffeeEscapedExpression",raw:e("escodegen").generate(t)})};u.nonComments=function(e){return e.filter(function(e){return!u.isComment(e)})};u.isComment=function(e){return e.type==="LineComment"||e.type==="BlockComment"};u.toIndent=function(e){if(e==="tab"||e==="t"){return"	"}else if(typeof e==="string"&&""+ +e!==e){return e}else{return Array(+e+1).join(" ")}}},{escodegen:29,util:28}],6:[function(e,t,u){var n,r,i,o,s,a,l,f,c=function(e,t){for(var u in t){if(p.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},p={}.hasOwnProperty,D=[].slice;s=e("../helpers"),r=s.buildError,o=s.clone,a=s.replace,f=s.toIndent;t.exports=n=function(){t.run=function(e,u,n,r){var i,o,s;i=function(e){c(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}return t}(t);l(i,n);s=new i(e,u);o=s.run();if(r.warnings==null){r.warnings=[]}r.warnings=r.warnings.concat(s.warnings);return o};function t(e,t){this.ast=e;this.options=t;this.scopes=[];this.ctx={vars:[]};this.warnings=[]}t.prototype.run=function(){return this.recurse(this.ast)};t.prototype.recurse=function(e){var t,u;u=this;this.depth=0;t=function(e){return function(t,u,n){var r,i,o,s;e.node=u;e.depth+=t==="Enter"?+1:-1;r=t==="Enter"?""+u.type:u.type+"Exit";if(typeof e[i="onBefore"+t]==="function"){e[i](u,n)}s=typeof e[r]==="function"?e[r](u,n):void 0;if(typeof e[o="on"+t]==="function"){e[o](u,n)}return s}}(this);this.estraverse().replace(e,{enter:function(e,n){u.controller=this;return t("Enter",e,n)},leave:function(e,u){return t("Exit",e,u)}});return e};t.prototype.skip=function(){var e;return(e=this.controller)!=null?e.skip():void 0};t.prototype.remove=function(){var e;return(e=this.controller)!=null?e.remove():void 0};t.prototype.estraverse=function(){return this._estraverse!=null?this._estraverse:this._estraverse=function(){var t;t=e("estraverse");t.VisitorKeys.CoffeeEscapedExpression=[];t.VisitorKeys.CoffeeListExpression=["test","body"];t.VisitorKeys.CoffeePrototypeExpression=["object","property","computed"];t.VisitorKeys.CoffeeLoopStatement=["body"];t.VisitorKeys.CoffeeDoExpression=["function"];t.VisitorKeys.BlockComment=[];t.VisitorKeys.LineComment=[];return t}()};t.prototype.pushStack=function(e){var t,u,n;n=[this.scope,this.ctx],u=n[0],t=n[1];this.scopes.push([this.scope,this.ctx]);this.ctx=o(this.ctx);this.scope=e;return typeof this.onScopeEnter==="function"?this.onScopeEnter(this.scope,this.ctx,u,t):void 0};t.prototype.popStack=function(){var e,t,u,n;u=[this.scope,this.ctx],t=u[0],e=u[1];n=this.scopes.pop(),this.scope=n[0],this.ctx=n[1];return typeof this.onScopeExit==="function"?this.onScopeExit(this.scope,this.ctx,t,e):void 0};t.prototype.syntaxError=function(e,t){var u,n,i;u=r({start:(n=e.loc)!=null?n.start:void 0,end:(i=e.loc)!=null?i.end:void 0,description:t},this.options.source,this.options.filename);throw u};t.prototype.warn=function(e,t){var u,n;return this.warnings.push({start:(u=e.loc)!=null?u.start:void 0,end:(n=e.loc)!=null?n.end:void 0,filename:this.options.filename,description:t})};t.prototype.Program=function(e){this.pushStack(e);return e};t.prototype.ProgramExit=function(e){this.popStack();return e};t.prototype.FunctionExpression=function(e){this.pushStack(e.body);return e};t.prototype.FunctionExpressionExit=function(e){this.popStack();return e};t.prototype.escapeJs=function(t,u){if(u==null){u={}}return a(t,{type:"CoffeeEscapedExpression",_parenthesized:u.parenthesized,raw:e("escodegen").generate(t,{format:{indent:{style:f(this.options.indent)}}})})};return t}();l=function(e,t){var u;u={};t.forEach(function(t){var n,r,o,s;o=t.prototype;s=[];for(r in o){n=o[r];if(t.prototype.hasOwnProperty(r)){if(u[r]&&r!=="constructor"){e.prototype[r]=i(e.prototype[r],n)}else{e.prototype[r]=n}s.push(u[r]=true)}else{s.push(void 0)}}return s});return e};i=function(e,t){return function(){var u,n,r,i;n=arguments[0],u=2<=arguments.length?D.call(arguments,1):[];i=n.type;r=e.bind(this).apply(null,[n].concat(D.call(u)));if(r.type===i){r=t.bind(this).apply(null,[r].concat(D.call(u)))}return r}}},{"../helpers":5,escodegen:29,estraverse:49}],7:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BinaryExpression=function(e){this.warnAboutEquals(e);this.updateEquals(e);return this.escapeEqualsForCompatibility(e)};t.prototype.updateEquals=function(e){var t,u;t={"===":"==","!==":"!="};u=e.operator;if(t[u]){e.operator=t[u]}return e};t.prototype.escapeEqualsForCompatibility=function(e){var t;t=e.operator==="=="||e.operator==="!=";if(this.options.compat&&t){return this.escapeJs(e)}else{return e}};t.prototype.warnAboutEquals=function(e){var t,u,n;t=e.operator;n={"==":"===","!=":"!=="};if(t==="=="||t==="!="){u=n[t];this.warn(e,"Operator '"+t+"' is not supported in CoffeeScript, "+("use '"+u+"' instead"))}return e};return t}(n)},{"./base":6}],8:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty,s=[].slice;r=e("./base");t.exports=n=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BlockStatement=function(e,t){return this.consolidateBlockIntoParent(e,t)};t.prototype.consolidateBlockIntoParent=function(e,t){var u,n;n=false;u=function(u){return function(u,r){var i,o,a;if(t.type===u&&((o=t[r])!=null?o.indexOf:void 0)){i=t[r].indexOf(e);if(t[r]&&~i){(a=t[r]).splice.apply(a,[i,1].concat(s.call(e.body)));n=true;return true}}}}(this);u("BlockStatement","body")||u("SwitchCase","consequent")||u("IfStatement","consequent")||u("IfStatement","alternate");if(n){return this.skip()}else{return e}};return t}(r)},{"./base":6}],9:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ProgramExit=null;t.prototype.FunctionExpression=null;t.prototype.FunctionExpressionExit=null;t.prototype.Program=function(e){this.comments=e.comments;this.updateCommentTypes();e.body=this.addCommentsToList([0,Infinity],e.body);return e};t.prototype.BlockStatement=function(e){return this.injectComments(e,"body")};t.prototype.SwitchStatement=function(e){return this.injectComments(e,"cases")};t.prototype.SwitchCase=function(e){return this.injectComments(e,"consequent")};t.prototype.BlockComment=function(e){return this.convertCommentPrefixes(e)};t.prototype.updateCommentTypes=function(){var e,t,u,n,r;n=this.comments;r=[];for(t=0,u=n.length;t<u;t++){e=n[t];switch(e.type){case"Block":r.push(e.type="BlockComment");break;case"Line":r.push(e.type="LineComment");break;default:r.push(void 0)}}return r};t.prototype.injectComments=function(e,t){if(t==null){t="body"}e[t]=this.addCommentsToList(e.range,e[t]);return e};t.prototype.addCommentsToList=function(e,t){var u,n,r,i,o,s,a,l,f;if(e==null){return t}a=[];o=e[0];f=e[1];u=function(e){return function(t,u){return e.comments.filter(function(e){return e.range[0]>=t&&e.range[1]<=u})}}(this);if(t.length>0){for(n=i=0,s=t.length;i<s;n=++i){r=t[n];if(r.range){l=u(o,r.range[0]);a=a.concat(l)}a.push(r);if(r.range){o=r.range[1]}}}l=u(o,f);a=a.concat(l);return a};t.prototype.convertCommentPrefixes=function(e){var t,u;u=e.value.split("\n");t=e.loc.start.column;u=u.map(function(e,n){var r,i,o;i=n===u.length-1&&e.match(/^\s*$/);r=n===0&&u.length===1;o=e.substr(0,t);if(o.match(/^\s+$/)){e=e.substr(t)}if(i){return""}else if(r){return e}else{e=e.replace(/^ \*/,"#");return e+"\n"}});e.value=u.join("");return e};return t}(n)},{"./base":6}],10:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BlockStatementExit=function(e){return this.removeEmptyStatementsFromBody(e)};t.prototype.SwitchCaseExit=function(e){return this.removeEmptyStatementsFromBody(e,"consequent")};t.prototype.SwitchStatementExit=function(e){return this.removeEmptyStatementsFromBody(e,"cases")};t.prototype.ProgramExit=function(e){return this.removeEmptyStatementsFromBody(e,"body")};t.prototype.removeEmptyStatementsFromBody=function(e,t){if(t==null){t="body"}e[t]=e[t].filter(function(e){return e.type!=="EmptyStatement"});return e};return t}(n)},{"./base":6}],11:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").replace;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.CallExpression=function(e){var t,u,n,i,o,s,a,l,f,c,p;t=((u=e.callee)!=null?u.type:void 0)==="MemberExpression"&&((n=e.callee)!=null?(i=n.object)!=null?i.type:void 0:void 0)==="Identifier"&&((o=e.callee)!=null?(s=o.object)!=null?s.name:void 0:void 0)==="Math"&&((a=e.callee)!=null?(l=a.property)!=null?l.type:void 0:void 0)==="Identifier"&&((f=e.callee)!=null?(c=f.property)!=null?c.name:void 0:void 0)==="pow"&&((p=e["arguments"])!=null?p.length:void 0)===2;if(!t){return e}return r(e,{type:"BinaryExpression",left:e["arguments"][0],operator:"**",right:e["arguments"][1]})};return t}(n)},{"../helpers":5,"./base":6}],12:[function(e,t,u){var n,r,i,o,s,a,l=function(e,t){for(var u in t){if(f.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},f={}.hasOwnProperty,c=[].slice;s=e("../helpers"),i=s.isComment,o=s.nextNonComment,a=s.replace;n=e("./base");t.exports=function(e){l(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onScopeEnter=function(e,t){return t.prebody=[]};t.prototype.onScopeExit=function(e,t,u,n){if(n.prebody.length){return this.prependIntoBody(u.body,n.prebody)}};t.prototype.prependIntoBody=function(e,t){var u;u=r(e);return e.splice.apply(e,[u,0].concat(c.call(t)))};t.prototype.FunctionDeclaration=function(e){this.ctx.prebody.push(this.buildFunctionDeclaration(e));this.pushStack(e.body)};t.prototype.FunctionDeclarationExit=function(e){this.popStack(e);return this.remove()};t.prototype.LineComment=function(e,t){return this.moveFunctionComments(e,t)};t.prototype.BlockComment=function(e,t){return this.moveFunctionComments(e,t)};t.prototype.FunctionExpression=function(e){this.pushStack(e.body)};t.prototype.FunctionExpressionExit=function(e){this.popStack();if(e.id){if(this.options.compat){return this.escapeJs(e,{parenthesized:true})}else{this.warn(e,"Named function expressions are not supported in CoffeeScript");return e}}else{return e}};t.prototype.moveFunctionComments=function(e,t){var u,n;if(!t.body){return}n=o(t.body,e);if(!n){return}u=n.type==="FunctionExpression"&&n.id;u||(u=n.type==="FunctionDeclaration");if(u){this.ctx.prebody.push(e);return this.remove()}};t.prototype.buildFunctionDeclaration=function(e){return a(e,{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:e.id,init:{type:"FunctionExpression",params:e.params,defaults:e.defaults,body:e.body}}]})};return t}(n);r=function(e){var t,u,n,r;t=0;for(t=u=0,n=e.length;u<n;t=++u){r=e[t];if(r.type!=="VariableDeclaration"&&!i(r)){return t}}return t}},{"../helpers":5,"./base":6}],13:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;o=e("../helpers").nonComments;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.IfStatement=function(e){this.handleBlankIfs(e);this.parenthesizeConditionals(e.test);return e};t.prototype.ConditionalExpression=function(e,t){return this.parenthesizeFunctions(e,t)};t.prototype.parenthesizeFunctions=function(e,t){this.estraverse().traverse(e,{
enter:function(e,t){var u;u=e.type==="FunctionDeclaration"||e.type==="FunctionExpression";if(u){return e._parenthesized=true}}});return e};t.prototype.parenthesizeConditionals=function(e){var t;t=["ConditionalExpression","FunctionExpression"];return this.estraverse().traverse(e,{enter:function(e,u){if(~t.indexOf(e.type)){return e._parenthesized=true}}})};t.prototype.handleBlankIfs=function(e){if(i(e)||r(e)&&!e.alternate){e.alternate={type:"BlockStatement",body:[]}}return e};return t}(n);i=function(e){return!e.consequent};r=function(e){var t,u;t=e.consequent;return u=t&&t.type==="BlockStatement"&&o(t.body).length===0}},{"../helpers":5,"./base":6}],14:[function(e,t,u){var n,r,i,o,s,a=function(e,t){for(var u in t){if(l.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},l={}.hasOwnProperty;o=e("../helpers").replace;n=e("./base");t.exports=function(e){a(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.CallExpression=function(e){var t;t=i(e)&&r(e["arguments"])&&s(e.callee.params,e["arguments"]);if(!t){return e}return o(e,{type:"CoffeeDoExpression","function":e.callee,arguments:e["arguments"]})};return t}(n);r=function(e){var t,u,n;for(u=0,n=e.length;u<n;u++){t=e[u];if(t.type!=="Identifier"){return false}}return true};i=function(e){var t,u;return((t=e.callee)!=null?t.type:void 0)==="FunctionExpression"&&((u=e.callee)!=null?u.id:void 0)===null};s=function(e,t){return e.map(function(e){return e.name}).join("/")===t.map(function(e){return e.name}).join("/")}},{"../helpers":5,"./base":6}],15:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;i=e("../helpers"),o=i.replace,r=i.quote;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.Literal=function(e){return this.unpackRegexpIfNeeded(e)};t.prototype.unpackRegexpIfNeeded=function(e){var t;if(!(e.value instanceof RegExp)){return}t=e.value.toString().match(/^\/([\s\=].*)\/([a-z]*)$/);if(t){e=o(e,{type:"CallExpression",callee:{type:"Identifier",name:"RegExp"},arguments:[{type:"Literal",value:t[1],raw:r(t[1])}]});if(t[2]){e["arguments"].push({type:"Literal",value:t[2],raw:r(t[2])})}return e}};return t}(n)},{"../helpers":5,"./base":6}],16:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;i=e("../helpers"),o=i.replace,r=i.isLoop;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ForStatement=function(e){if(this._for==null){this._for=[]}this._for.push(e);this.injectUpdateIntoBody(e);return this.convertForToWhile(e)};t.prototype.ForStatementExit=function(e){var t;t=this._for.pop();delete t._update;return e};t.prototype.ForInStatement=function(e){return this.warnIfNoVar(e)};t.prototype.WhileStatement=function(e){return this.convertWhileToLoop(e)};t.prototype.DoWhileStatement=function(e){return this.convertDoWhileToLoop(e)};t.prototype.ContinueStatement=function(e,t){return this.injectUpdateIntoContinue(e,t)};t.prototype.injectUpdateIntoContinue=function(e,t){var u,n;u=(n=this._for)!=null?n[this._for.length-1]:void 0;if(!(u!=null?u._update:void 0)){return e}this.skip();return{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:u._update},e]}};t.prototype.convertDoWhileToLoop=function(e){var t,u;t=e.body;u=t.body;u.push(o(e.test,{type:"IfStatement",_negative:true,test:e.test,consequent:{type:"BreakStatement"}}));return o(e,{type:"CoffeeLoopStatement",body:t})};t.prototype.warnIfNoVar=function(e){if(e.left.type!=="VariableDeclaration"){this.warn(e,"Using 'for..in' loops without "+"'var' can produce unexpected results")}return e};t.prototype.convertForToWhile=function(e){var t;e.type=r(e)?"CoffeeLoopStatement":"WhileStatement";t=e.init;delete e.init;if(t!=null){return{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:t},e]}}else{return e}};t.prototype.convertWhileToLoop=function(e){if(r(e)){return o(e,{type:"CoffeeLoopStatement",body:e.body})}else{return e}};t.prototype.injectUpdateIntoBody=function(e){var t,u;if(e.update){u={type:"ExpressionStatement",expression:e.update};if(e.body==null){if(e.body==null){e.body={type:"BlockStatement",body:[]}}}else if(e.body.type!=="BlockStatement"){t=e.body;e.body={type:"BlockStatement",body:[t]}}e.body.body=e.body.body.concat([u]);e._update=e.update;delete e.update}return e};return t}(n)},{"../helpers":5,"./base":6}],17:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").replace;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.MemberExpression=function(e){this.transformThisToAtSign(e);this.braceObjectOnLeft(e);return this.replaceWithPrototype(e)||this.parenthesizeObjectIfFunction(e)};t.prototype.CoffeePrototypeExpression=function(e){return this.transformThisToAtSign(e)};t.prototype.transformThisToAtSign=function(e){if(e.object.type==="ThisExpression"){e._prefixed=true;e.object._prefix=true}return e};t.prototype.braceObjectOnLeft=function(e){if(e.object.type==="ObjectExpression"){e.object._braced=true}};t.prototype.replaceWithPrototype=function(e){var t;t=e.computed===false&&e.object.type==="MemberExpression"&&e.object.property.type==="Identifier"&&e.object.property.name==="prototype";if(t){return this.recurse(r(e,{type:"CoffeePrototypeExpression",object:e.object.object,property:e.property}))}};t.prototype.parenthesizeObjectIfFunction=function(e){if(e.object.type==="FunctionExpression"){e.object._parenthesized=true}return e};return t}(n)},{"../helpers":5,"./base":6}],18:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ArrayExpression=function(e){this.braceObjectsInElements(e);return this.catchEmptyArraySlots(e)};t.prototype.ObjectExpression=function(e,t){return this.braceObjectInExpression(e,t)};t.prototype.braceObjectInExpression=function(e,t){var u,n,r;if(t.type==="ExpressionStatement"){u=((n=this.scope.body)!=null?n[((r=this.scope.body)!=null?r.length:void 0)-1]:void 0)===t;if(u){e._last=true}else{e._braced=true}}};t.prototype.braceObjectsInElements=function(e){var t,u,n,r;r=e.elements;for(t=0,n=r.length;t<n;t++){u=r[t];if((u!=null?u.type:void 0)==="ObjectExpression"){u._braced=true}}return e};t.prototype.catchEmptyArraySlots=function(e){if(r(e.elements)){if(this.options.compat){return this.escapeJs(e)}else{return this.syntaxError(e,"Empty array slots are not supported in CoffeeScript")}}};return t}(n);r=function(e){var t,u,n;for(t=0,u=e.length;t<u;t++){n=e[t];if(n===null){return true}}return false}},{"./base":6}],19:[function(e,t,u){var n,r,i,o,s,a=function(e,t){for(var u in t){if(l.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},l={}.hasOwnProperty,f=[].slice;i=e("../helpers"),s=i.reservedWords,o=i.replace,r=i.quote;n=e("./base");t.exports=function(e){a(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.FunctionExpression=function(e,u){t.__super__.FunctionExpression.call(this,e);e.params.forEach(function(e){return function(t){if(t.type==="Identifier"){e.ctx.vars.push(t.name)}return e.preventReservedWords(t)}}(this));this.preventReservedWords(e.id);return this.removeUndefinedParameter(e)};t.prototype.FunctionExpressionExit=function(e){var u,n;t.__super__.FunctionExpressionExit.call(this,e);(n=e.body.body).splice.apply(n,[0,0].concat(f.call((u=e.body.shadows)!=null?u:[])));return e};t.prototype.CallExpression=function(e){return this.parenthesizeCallee(e)};t.prototype.Identifier=function(e){return this.escapeUndefined(e)};t.prototype.UnaryExpression=function(e){this.braceObjectBesideUnary(e);return this.updateVoidToUndefined(e)};t.prototype.VariableDeclarator=function(e){this.preventReservedWords(e.id);this.addShadowingIfNeeded(e);return this.addExplicitUndefinedInitializer(e)};t.prototype.AssignmentExpression=function(e){if(this.isReservedIdentifier(e.left)){if(this.options.compat){return this.escapeJs(e)}else{return this.preventReservedWords(e.left)}}else if(e.left.type==="Identifier"&&this.ctx.vars.indexOf(e.left.name)===-1){if(this.options.compat){return this.escapeJs(e)}else{this.warn(e,"Assignment of global variable '"+e.left.name+"'");return e}}else{return e}};t.prototype.ReturnStatement=function(e){return this.parenthesizeObjectsInArgument(e)};t.prototype.braceObjectBesideUnary=function(e){if(e.argument.type==="ObjectExpression"){e.argument._braced=true}};t.prototype.preventReservedWords=function(e){if(this.isReservedIdentifier(e)){return this.syntaxError(e,"'"+e.name+"' is a reserved CoffeeScript keyword")}};t.prototype.isReservedIdentifier=function(e){var t;t=e!=null?e.name:void 0;return t&&~s.indexOf(t)};t.prototype.parenthesizeObjectsInArgument=function(e){if(e.argument){if(e.argument.type==="ObjectExpression"){e.argument._braced=true}}return e};t.prototype.addShadowingIfNeeded=function(e){var t,u,n;u=e.id.name;if(~this.ctx.vars.indexOf(u)){this.warn(e,"Variable shadowing ('"+u+"') is not fully supported in CoffeeScript");n=o(e,{type:"ExpressionStatement",expression:{type:"CoffeeEscapedExpression",raw:"var "+u}});if((t=this.scope).shadows==null){t.shadows=[]}return this.scope.shadows.push(n)}else{return this.ctx.vars.push(u)}};t.prototype.addExplicitUndefinedInitializer=function(e){if(e.init==null){e.init={type:"Identifier",name:"undefined"};this.skip()}return e};t.prototype.updateVoidToUndefined=function(e){if(e.operator==="void"){return o(e,{type:"Identifier",name:"undefined"})}else{return e}};t.prototype.escapeUndefined=function(e){if(e.name==="undefined"&&this.options.compat){return o(e,{type:"CoffeeEscapedExpression",raw:"undefined"})}else{return e}};t.prototype.removeUndefinedParameter=function(e){var t,u,n,r,i,o,s;if(e.params){s=e.params;for(t=r=0,i=s.length;r<i;t=++r){o=s[t];u=t===e.params.length-1;n=o.type==="Identifier"&&o.name==="undefined";if(n){if(u){e.params.pop()}else{this.syntaxError(o,"'undefined' is not allowed in function parameters")}}}}return e};t.prototype.parenthesizeCallee=function(e){if(e.callee.type==="FunctionExpression"){e.callee._parenthesized=true;return e}};return t}(n)},{"../helpers":5,"./base":6}],20:[function(e,t,u){var n,r,i,o,s,a,l=function(e,t){for(var u in t){if(f.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},f={}.hasOwnProperty;r=e("../helpers").getPrecedence;n=e("./base");t.exports=function(e){l(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onEnter=function(e,t){var u,n,s;if(!t){return}s=t.type;if(s==="CallExpression"&&t["arguments"].indexOf(e)>-1){return}if(s==="NewExpression"&&t["arguments"].indexOf(e)>-1){return}if(s==="MemberExpression"&&t.property===e){return}n=r(e);if(n===-1){return}u=o(t,e)||i(t,e)||a(t,e)||n<r(t);if(u){return e._parenthesized=true}};return t}(n);o=function(e,t){return s(e,"-")&&e.right===t};i=function(e,t){return s(e,"/")&&(s(t,"/")||s(t,"*"))&&e.right===t};s=function(e,t){return e.type==="BinaryExpression"&&e.operator===t};a=function(e,t){return e.type==="ConditionalExpression"&&t.type==="ConditionalExpression"&&e.alternate!==t}},{"../helpers":5,"./base":6}],21:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").getReturnStatements;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onScopeExit=function(e,t,u,n){return this.unreturnify(u)};t.prototype.unreturnify=function(e,t){var u;if(t==null){t="body"}if(e[t].length>0){u=r(e[t]);if(u.length===0){e[t].push({type:"ReturnStatement"})}else{u.forEach(function(e){if(e.argument){e.type="ExpressionStatement";return e.expression=e.argument}})}}};return t}(n)},{"../helpers":5,"./base":6}],22:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base.coffee");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.SwitchStatement=function(e){this.consolidateCases(e);return this.ensureLastCaseIsDefault(e)};t.prototype.SwitchCase=function(e){return this.removeBreaksFromConsequents(e)};t.prototype.ensureLastCaseIsDefault=function(e){var t,u,n,r,i,o,s,a;t=e.cases.filter(function(e){return e.type==="SwitchCase"});s=t.length;for(u=i=0,a=t.length;i<a;u=++i){o=t[u];r=u===s-1;n=o.test==null;if(n&&!r){this.syntaxError(o,"default cases only allowed at the end")}}return e};t.prototype.consolidateCases=function(e){var t,u,n,r,i,o,s;i=[];s=[];o=e.cases;for(t=u=0,r=o.length;u<r;t=++u){n=o[t];if(n.type==="SwitchCase"){if(n.test){s.push(n.test)}if(n.consequent.length>0){if(n.test){n.test={type:"CoffeeListExpression",expressions:s}}s=[];i.push(n)}}else{i.push(n)}}e.cases=i;return e};t.prototype.removeBreaksFromConsequents=function(e){var t,u;if(e.test){t=e.consequent.length-1;u=e.consequent[t];if((u!=null?u.type:void 0)==="BreakStatement"){delete e.consequent[t];e.consequent.length-=1}else if((u!=null?u.type:void 0)==="ContinueStatement"){}else if((u!=null?u.type:void 0)!=="ReturnStatement"){this.syntaxError(e,"No break or return statement found in a case")}return e}};return t}(n)},{"./base.coffee":6}],23:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.LabeledStatement=function(e,t){return this.syntaxError(e,"Labeled statements are not supported in CoffeeScirpt")};t.prototype.WithStatement=function(e){return this.syntaxError(e,"'with' is not supported in CoffeeScript")};return t}(n)},{"./base":6}],24:[function(e,t,u){if(typeof Object.create==="function"){t.exports=function n(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function r(e,t){e.super_=t;var u=function(){};u.prototype=t.prototype;e.prototype=new u;e.prototype.constructor=e}}},{}],25:[function(e,t,u){(function(e){function t(e,t){var u=0;for(var n=e.length-1;n>=0;n--){var r=e[n];if(r==="."){e.splice(n,1)}else if(r===".."){e.splice(n,1);u++}else if(u){e.splice(n,1);u--}}if(t){for(;u--;u){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var r=function(e){return n.exec(e).slice(1)};u.resolve=function(){var u="",n=false;for(var r=arguments.length-1;r>=-1&&!n;r--){var o=r>=0?arguments[r]:e.cwd();if(typeof o!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!o){continue}u=o+"/"+u;n=o.charAt(0)==="/"}u=t(i(u.split("/"),function(e){return!!e}),!n).join("/");return(n?"/":"")+u||"."};u.normalize=function(e){var n=u.isAbsolute(e),r=o(e,-1)==="/";e=t(i(e.split("/"),function(e){return!!e}),!n).join("/");if(!e&&!n){e="."}if(e&&r){e+="/"}return(n?"/":"")+e};u.isAbsolute=function(e){return e.charAt(0)==="/"};u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(i(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};u.relative=function(e,t){e=u.resolve(e).substr(1);t=u.resolve(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var u=e.length-1;for(;u>=0;u--){if(e[u]!=="")break}if(t>u)return[];return e.slice(t,u-t+1)}var r=n(e.split("/"));var i=n(t.split("/"));var o=Math.min(r.length,i.length);var s=o;for(var a=0;a<o;a++){if(r[a]!==i[a]){s=a;break}}var l=[];for(var a=s;a<r.length;a++){l.push("..")}l=l.concat(i.slice(s));return l.join("/")};u.sep="/";u.delimiter=":";u.dirname=function(e){var t=r(e),u=t[0],n=t[1];if(!u&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return u+n};u.basename=function(e,t){var u=r(e)[2];if(t&&u.substr(-1*t.length)===t){u=u.substr(0,u.length-t.length)}return u};u.extname=function(e){return r(e)[3]};function i(e,t){if(e.filter)return e.filter(t);var u=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))u.push(e[n])}return u}var o="ab".substr(-1)==="b"?function(e,t,u){return e.substr(t,u)}:function(e,t,u){if(t<0)t=e.length+t;return e.substr(t,u)}}).call(this,e("_process"))},{_process:26}],26:[function(e,t,u){var n=t.exports={};n.nextTick=function(){var e=typeof window!=="undefined"&&window.setImmediate;var t=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(e){return function(e){return window.setImmediate(e)}}if(t){var u=[];window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(u.length>0){var n=u.shift();n()}}},true);return function n(e){u.push(e);window.postMessage("process-tick","*")}}return function r(e){setTimeout(e,0)}}();n.title="browser";n.browser=true;n.env={};n.argv=[];function r(){}n.on=r;n.addListener=r;n.once=r;n.off=r;n.removeListener=r;n.removeAllListeners=r;n.emit=r;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],27:[function(e,t,u){t.exports=function n(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],28:[function(e,t,u){(function(t,n){var r=/%[sdj%]/g;u.format=function(e){if(!y(e)){var t=[];for(var u=0;u<arguments.length;u++){t.push(s(arguments[u]))}return t.join(" ")}var u=1;var n=arguments;var i=n.length;var o=String(e).replace(r,function(e){if(e==="%%")return"%";if(u>=i)return e;switch(e){case"%s":return String(n[u++]);case"%d":return Number(n[u++]);case"%j":try{return JSON.stringify(n[u++])}catch(t){return"[Circular]"}default:return e}});for(var a=n[u];u<i;a=n[++u]){if(E(a)||!S(a)){o+=" "+a}else{o+=" "+s(a)}}return o};u.deprecate=function(e,r){if(v(n.process)){return function(){return u.deprecate(e,r).apply(this,arguments)}}if(t.noDeprecation===true){return e}var i=false;function o(){if(!i){if(t.throwDeprecation){throw new Error(r)}else if(t.traceDeprecation){console.trace(r)}else{console.error(r)}i=true}return e.apply(this,arguments)}return o};var i={};var o;u.debuglog=function(e){if(v(o))o=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!i[e]){if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;i[e]=function(){var t=u.format.apply(u,arguments);console.error("%s %d: %s",e,n,t)}}else{i[e]=function(){}}}return i[e]};function s(e,t){var n={seen:[],stylize:l};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(C(t)){n.showHidden=t}else if(t){u._extend(n,t)}if(v(n.showHidden))n.showHidden=false;if(v(n.depth))n.depth=2;if(v(n.colors))n.colors=false;if(v(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=a;return c(n,e,n.depth)}u.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function a(e,t){var u=s.styles[t];if(u){return"["+s.colors[u][0]+"m"+e+"["+s.colors[u][1]+"m"}else{return e}}function l(e,t){return e}function f(e){var t={};e.forEach(function(e,u){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&_(t.inspect)&&t.inspect!==u.inspect&&!(t.constructor&&t.constructor.prototype===t)){var r=t.inspect(n,e);if(!y(r)){r=c(e,r,n)}return r}var i=p(e,t);if(i){return i}var o=Object.keys(t);var s=f(o);if(e.showHidden){o=Object.getOwnPropertyNames(t)}if(w(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return D(t)}if(o.length===0){if(_(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(b(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(x(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(w(t)){return D(t)}}var l="",C=false,E=["{","}"];if(A(t)){C=true;E=["[","]"]}if(_(t)){var F=t.name?": "+t.name:"";l=" [Function"+F+"]"}if(b(t)){l=" "+RegExp.prototype.toString.call(t)}if(x(t)){l=" "+Date.prototype.toUTCString.call(t)}if(w(t)){l=" "+D(t)}if(o.length===0&&(!C||t.length==0)){return E[0]+l+E[1]}if(n<0){if(b(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var g;if(C){g=h(e,t,n,s,o)}else{g=o.map(function(u){return m(e,t,n,s,u,C)})}e.seen.pop();return d(g,l,E)}function p(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var u="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(u,"string")}if(g(t))return e.stylize(""+t,"number");if(C(t))return e.stylize(""+t,"boolean");if(E(t))return e.stylize("null","null")}function D(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,u,n,r){var i=[];for(var o=0,s=t.length;o<s;++o){if(j(t,String(o))){i.push(m(e,t,u,n,String(o),true))}else{i.push("")}}r.forEach(function(r){if(!r.match(/^\d+$/)){i.push(m(e,t,u,n,r,true))}});return i}function m(e,t,u,n,r,i){var o,s,a;a=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]};if(a.get){if(a.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(a.set){s=e.stylize("[Setter]","special")}}if(!j(n,r)){o="["+r+"]"}if(!s){if(e.seen.indexOf(a.value)<0){if(E(u)){s=c(e,a.value,null)}else{s=c(e,a.value,u-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(v(o)){if(i&&r.match(/^\d+$/)){return s}o=JSON.stringify(""+r);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function d(e,t,u){var n=0;var r=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(r>60){return u[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+u[1]}return u[0]+t+" "+e.join(", ")+" "+u[1]}function A(e){return Array.isArray(e)}u.isArray=A;function C(e){return typeof e==="boolean"}u.isBoolean=C;function E(e){return e===null}u.isNull=E;function F(e){return e==null}u.isNullOrUndefined=F;function g(e){return typeof e==="number"}u.isNumber=g;function y(e){return typeof e==="string"}u.isString=y;function B(e){return typeof e==="symbol"}u.isSymbol=B;function v(e){return e===void 0}u.isUndefined=v;function b(e){return S(e)&&I(e)==="[object RegExp]"}u.isRegExp=b;function S(e){return typeof e==="object"&&e!==null}u.isObject=S;function x(e){return S(e)&&I(e)==="[object Date]"}u.isDate=x;function w(e){return S(e)&&(I(e)==="[object Error]"||e instanceof Error)}u.isError=w;function _(e){return typeof e==="function"}u.isFunction=_;function k(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}u.isPrimitive=k;u.isBuffer=e("./support/isBuffer");function I(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date;var t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}u.log=function(){console.log("%s - %s",O(),u.format.apply(u,arguments))};u.inherits=e("inherits");u._extend=function(e,t){if(!t||!S(t))return e;var u=Object.keys(t);var n=u.length;while(n--){e[u[n]]=t[u[n]]}return e};function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":27,_process:26,inherits:24}],29:[function(e,t,u){(function(t){(function(){"use strict";var n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E,F,g,y,B,v,b,S,x,w,_;s=e("estraverse");a=e("esutils");n=s.Syntax;function k(e){return ye.Expression.hasOwnProperty(e.type)}function I(e){return ye.Statement.hasOwnProperty(e.type)}r={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};i={"||":r.LogicalOR,"&&":r.LogicalAND,"|":r.BitwiseOR,"^":r.BitwiseXOR,"&":r.BitwiseAND,"==":r.Equality,"!=":r.Equality,"===":r.Equality,"!==":r.Equality,is:r.Equality,isnt:r.Equality,"<":r.Relational,">":r.Relational,"<=":r.Relational,">=":r.Relational,"in":r.Relational,"instanceof":r.Relational,"<<":r.BitwiseSHIFT,">>":r.BitwiseSHIFT,">>>":r.BitwiseSHIFT,"+":r.Additive,"-":r.Additive,"*":r.Multiplicative,"%":r.Multiplicative,"/":r.Multiplicative};var P=1,L=1<<1,O=1<<2,j=1<<3,M=1<<4,R=1<<5;var T=L|O,N=P|L,q=P|L|O,U=P,z=O,W=P|O;var V=P,Y=P|R,G=0,K=P|M,$=P|j;function H(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function J(e,t){var u="";for(t|=0;t>0;t>>>=1,e+=e){if(t&1){u+=e}}return u}l=Array.isArray;if(!l){l=function _e(e){return Object.prototype.toString.call(e)==="[object Array]"}}function X(e){return/[\r\n]/g.test(e)}function Z(e){var t=e.length;return t&&a.code.isLineTerminator(e.charCodeAt(t-1))}function Q(e,t){var u;for(u in t){if(t.hasOwnProperty(u)){e[u]=t[u]}}return e}function ee(e,t){var u,n;function r(e){return typeof e==="object"&&e instanceof Object&&!(e instanceof RegExp)}for(u in t){if(t.hasOwnProperty(u)){n=t[u];if(r(n)){if(r(e[u])){ee(e[u],n)}else{e[u]=ee({},n)}}else{e[u]=n}}}return e}function te(e){var t,u,n,r,i;if(e!==e){throw new Error("Numeric literal whose value is NaN")}if(e<0||e===0&&1/e<0){throw new Error("Numeric literal whose value is negative")}if(e===1/0){return p?"null":D?"1e400":"1e+400"}t=""+e;if(!D||t.length<3){return t}u=t.indexOf(".");if(!p&&t.charCodeAt(0)===48&&u===1){u=0;t=t.slice(1)}n=t;t=t.replace("e+","e");r=0;if((i=n.indexOf("e"))>0){r=+n.slice(i+1);n=n.slice(0,i)}if(u>=0){r-=n.length-u-1;n=+(n.slice(0,u)+n.slice(u+1))+""}i=0;while(n.charCodeAt(n.length+i-1)===48){--i}if(i!==0){r-=i;n=n.slice(0,i)}if(r!==0){n+="e"+r}if((n.length<t.length||h&&e>1e12&&Math.floor(e)===e&&(n="0x"+e.toString(16)).length<t.length)&&+n===e){t=n}return t}function ue(e,t){if((e&~1)===8232){return(t?"u":"\\u")+(e===8232?"2028":"2029")}else if(e===10||e===13){return(t?"":"\\")+(e===10?"n":"r")}return String.fromCharCode(e)}function ne(e){var t,u,n,r,i,o,s,a;u=e.toString();if(e.source){t=u.match(/\/([^\/]*)$/);if(!t){return u}n=t[1];u="";s=false;a=false;for(r=0,i=e.source.length;r<i;++r){o=e.source.charCodeAt(r);if(!a){if(s){if(o===93){s=false}}else{if(o===47){u+="\\"}else if(o===91){s=true}}u+=ue(o,a);a=o===92}else{u+=ue(o,a);a=false}}return"/"+u+"/"+n}return u}function re(e,t){var u;if(e===8){return"\\b"}if(e===12){return"\\f"}if(e===9){return"\\t"}u=e.toString(16).toUpperCase();if(p||e>255){return"\\u"+"0000".slice(u.length)+u}else if(e===0&&!a.code.isDecimalDigit(t)){return"\\0"}else if(e===11){return"\\x0B"}else{return"\\x"+"00".slice(u.length)+u}}function ie(e){if(e===92){return"\\\\"}if(e===10){return"\\n"}if(e===13){return"\\r"}if(e===8232){return"\\u2028"}if(e===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function oe(e){var t,u,n,r;r=m==="double"?'"':"'";for(t=0,u=e.length;t<u;++t){n=e.charCodeAt(t);if(n===39){r='"';break}else if(n===34){r="'";break}else if(n===92){++t}}return r+e+r}function se(e){var t="",u,n,r,i=0,o=0,s,l;for(u=0,n=e.length;u<n;++u){r=e.charCodeAt(u);if(r===39){++i}else if(r===34){++o}else if(r===47&&p){t+="\\"}else if(a.code.isLineTerminator(r)||r===92){t+=ie(r);continue}else if(!a.code.isIdentifierPartES5(r)&&(p&&r<32||!p&&!d&&(r<32||r>126))){t+=re(r,e.charCodeAt(u+1));continue}t+=String.fromCharCode(r)}s=!(m==="double"||m==="auto"&&o<i);l=s?"'":'"';if(!(s?i:o)){return l+t+l}e=t;t=l;for(u=0,n=e.length;u<n;++u){r=e.charCodeAt(u);if(r===39&&s||r===34&&!s){t+="\\"}t+=String.fromCharCode(r)}return t+l}function ae(e){var t,u,n,r="";for(t=0,u=e.length;t<u;++t){n=e[t];r+=l(n)?ae(n):n}return r}function le(e,t){if(!b){if(l(e)){return ae(e)}else{return e}}if(t==null){if(e instanceof o){return e}else{t={}}}if(t.loc==null){return new o(null,null,b,e,t.name||null)}return new o(t.loc.start.line,t.loc.start.column,b===true?t.loc.source||null:b,e,t.name||null)}function fe(){return C?C:" "}function ce(e,t){var u,n,r,i;u=le(e).toString();if(u.length===0){return[t]}n=le(t).toString();if(n.length===0){return[e]}r=u.charCodeAt(u.length-1);i=n.charCodeAt(0);if((r===43||r===45)&&r===i||a.code.isIdentifierPartES5(r)&&a.code.isIdentifierPartES5(i)||r===47&&i===105){return[e,fe(),t]}else if(a.code.isWhiteSpace(r)||a.code.isLineTerminator(r)||a.code.isWhiteSpace(i)||a.code.isLineTerminator(i)){return[e,t]}return[e,C,t]}function pe(e){return[f,e]}function De(e){var t;t=f;f+=c;e(f);f=t}function he(e){var t;for(t=e.length-1;t>=0;--t){if(a.code.isLineTerminator(e.charCodeAt(t))){break}}return e.length-1-t}function me(e,t){var u,n,r,i,o,s,l,c;u=e.split(/\r\n|[\r\n]/);s=Number.MAX_VALUE;for(n=1,r=u.length;n<r;++n){i=u[n];o=0;while(o<i.length&&a.code.isWhiteSpace(i.charCodeAt(o))){++o}if(s>o){s=o}}if(typeof t!=="undefined"){l=f;if(u[1][s]==="*"){t+=" "}f=t}else{if(s&1){--s}l=f}for(n=1,r=u.length;n<r;++n){c=le(pe(u[n].slice(s)));u[n]=b?c.join(""):c}f=l;return u.join("\n")}function de(e,t){if(e.type==="Line"){if(Z(e.value)){return"//"+e.value}else{var u="//"+e.value;if(!x){u+="\n"}return u}}if(B.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)){return me("/*"+e.value+"*/",t)}return"/*"+e.value+"*/"}function Ae(e,t){var u,r,i,o,s,a,l,p,D,h,m,d,A,C;if(e.leadingComments&&e.leadingComments.length>0){o=t;if(x){i=e.leadingComments[0];t=[];p=i.extendedRange;D=i.range;m=S.substring(p[0],D[0]);C=(m.match(/\n/g)||[]).length;if(C>0){t.push(J("\n",C));t.push(pe(de(i)))}else{t.push(m);t.push(de(i))}h=D;for(u=1,r=e.leadingComments.length;u<r;u++){i=e.leadingComments[u];D=i.range;d=S.substring(h[1],D[0]);C=(d.match(/\n/g)||[]).length;t.push(J("\n",C));t.push(pe(de(i)));h=D}A=S.substring(D[1],p[1]);C=(A.match(/\n/g)||[]).length;t.push(J("\n",C))}else{i=e.leadingComments[0];t=[];if(g&&e.type===n.Program&&e.body.length===0){t.push("\n")}t.push(de(i));if(!Z(le(t).toString())){t.push("\n")}for(u=1,r=e.leadingComments.length;u<r;++u){i=e.leadingComments[u];l=[de(i)];
if(!Z(le(l).toString())){l.push("\n")}t.push(pe(l))}}t.push(pe(o))}if(e.trailingComments){if(x){i=e.trailingComments[0];p=i.extendedRange;D=i.range;m=S.substring(p[0],D[0]);C=(m.match(/\n/g)||[]).length;if(C>0){t.push(J("\n",C));t.push(pe(de(i)))}else{t.push(m);t.push(de(i))}}else{s=!Z(le(t).toString());a=J(" ",he(le([f,t,c]).toString()));for(u=0,r=e.trailingComments.length;u<r;++u){i=e.trailingComments[u];if(s){if(u===0){t=[t,c]}else{t=[t,a]}t.push(de(i,a))}else{t=[t,pe(de(i))]}if(u!==r-1&&!Z(le(t).toString())){t=[t,"\n"]}}}}return t}function Ce(e,t,u){var n,r=0;for(n=e;n<t;n++){if(S[n]==="\n"){r++}}for(n=1;n<r;n++){u.push(A)}}function Ee(e,t,u){if(t<u){return["(",e,")"]}return e}function Fe(e){var t,u,n;n=e.split(/\r\n|\n/);for(t=1,u=n.length;t<u;t++){n[t]=A+f+n[t]}return n}function ge(e,t){var u,n,i;u=e[B.verbatim];if(typeof u==="string"){n=Ee(Fe(u),r.Sequence,t)}else{n=Fe(u.content);i=u.precedence!=null?u.precedence:r.Sequence;n=Ee(n,i,t)}return le(n,e)}function ye(){}ye.prototype.maybeBlock=function(e,t){var u,r,i=this;r=!B.comment||!e.leadingComments;if(e.type===n.BlockStatement&&r){return[C,this.generateStatement(e,t)]}if(e.type===n.EmptyStatement&&r){return";"}De(function(){u=[A,pe(i.generateStatement(e,t))]});return u};ye.prototype.maybeBlockSuffix=function(e,t){var u=Z(le(t).toString());if(e.type===n.BlockStatement&&(!B.comment||!e.leadingComments)&&!u){return[t,C]}if(u){return[t,f]}return[t,A,f]};function Be(e){return le(e.name,e)}function ve(e,t){return e.async?"async"+(t?fe():C):""}function be(e){var t=e.generator&&!B.moz.starlessGenerator;return t?"*"+C:""}function Se(e){var t=e.value;if(t.async){return ve(t,!e.computed)}else{return be(t)?"*":""}}ye.prototype.generatePattern=function(e,t,u){if(e.type===n.Identifier){return Be(e)}return this.generateExpression(e,t,u)};ye.prototype.generateFunctionParams=function(e){var t,u,i,o;o=false;if(e.type===n.ArrowFunctionExpression&&!e.rest&&(!e.defaults||e.defaults.length===0)&&e.params.length===1&&e.params[0].type===n.Identifier){i=[ve(e,true),Be(e.params[0])]}else{i=e.type===n.ArrowFunctionExpression?[ve(e,false)]:[];i.push("(");if(e.defaults){o=true}for(t=0,u=e.params.length;t<u;++t){if(o&&e.defaults[t]){i.push(this.generateAssignment(e.params[t],e.defaults[t],"=",r.Assignment,q))}else{i.push(this.generatePattern(e.params[t],r.Assignment,q))}if(t+1<u){i.push(","+C)}}if(e.rest){if(e.params.length){i.push(","+C)}i.push("...");i.push(Be(e.rest))}i.push(")")}return i};ye.prototype.generateFunctionBody=function(e){var t,u;t=this.generateFunctionParams(e);if(e.type===n.ArrowFunctionExpression){t.push(C);t.push("=>")}if(e.expression){t.push(C);u=this.generateExpression(e.body,r.Assignment,q);if(u.toString().charAt(0)==="{"){u=["(",u,")"]}t.push(u)}else{t.push(this.maybeBlock(e.body,$))}return t};ye.prototype.generateIterationForStatement=function(e,t,u){var i=["for"+C+"("],o=this;De(function(){if(t.left.type===n.VariableDeclaration){De(function(){i.push(t.left.kind+fe());i.push(o.generateStatement(t.left.declarations[0],G))})}else{i.push(o.generateExpression(t.left,r.Call,q))}i=ce(i,e);i=[ce(i,o.generateExpression(t.right,r.Sequence,q)),")"]});i.push(this.maybeBlock(t.body,u));return i};ye.prototype.generatePropertyKey=function(e,t){var u=[];if(t){u.push("[")}u.push(this.generateExpression(e,r.Sequence,q));if(t){u.push("]")}return u};ye.prototype.generateAssignment=function(e,t,u,n,i){if(r.Assignment<n){i|=P}return Ee([this.generateExpression(e,r.Call,i),C+u+C,this.generateExpression(t,r.Assignment,i)],r.Assignment,n)};ye.prototype.semicolon=function(e){if(!F&&e&R){return""}return";"};ye.Statement={BlockStatement:function(e,t){var u,n,r=["{",A],i=this;De(function(){if(e.body.length===0&&x){u=e.range;if(u[1]-u[0]>2){n=S.substring(u[0]+1,u[1]-1);if(n[0]==="\n"){r=["{"]}r.push(n)}}var o,s,a,l;l=V;if(t&j){l|=M}for(o=0,s=e.body.length;o<s;++o){if(x){if(o===0){if(e.body[0].leadingComments){u=e.body[0].leadingComments[0].extendedRange;n=S.substring(u[0],u[1]);if(n[0]==="\n"){r=["{"]}}if(!e.body[0].leadingComments){Ce(e.range[0],e.body[0].range[0],r)}}if(o>0){if(!e.body[o-1].trailingComments&&!e.body[o].leadingComments){Ce(e.body[o-1].range[1],e.body[o].range[0],r)}}}if(o===s-1){l|=R}if(e.body[o].leadingComments&&x){a=i.generateStatement(e.body[o],l)}else{a=pe(i.generateStatement(e.body[o],l))}r.push(a);if(!Z(le(a).toString())){if(x&&o<s-1){if(!e.body[o+1].leadingComments){r.push(A)}}else{r.push(A)}}if(x){if(o===s-1){if(!e.body[o].trailingComments){Ce(e.body[o].range[1],e.range[1],r)}}}}});r.push(pe("}"));return r},BreakStatement:function(e,t){if(e.label){return"break "+e.label.name+this.semicolon(t)}return"break"+this.semicolon(t)},ContinueStatement:function(e,t){if(e.label){return"continue "+e.label.name+this.semicolon(t)}return"continue"+this.semicolon(t)},ClassBody:function(e,t){var u=["{",A],n=this;De(function(t){var i,o;for(i=0,o=e.body.length;i<o;++i){u.push(t);u.push(n.generateExpression(e.body[i],r.Sequence,q));if(i+1<o){u.push(A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f);u.push("}");return u},ClassDeclaration:function(e,t){var u,n;u=["class "+e.id.name];if(e.superClass){n=ce("extends",this.generateExpression(e.superClass,r.Assignment,q));u=ce(u,n)}u.push(C);u.push(this.generateStatement(e.body,Y));return u},DirectiveStatement:function(e,t){if(B.raw&&e.raw){return e.raw+this.semicolon(t)}return oe(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var u=ce("do",this.maybeBlock(e.body,V));u=this.maybeBlockSuffix(e.body,u);return ce(u,["while"+C+"(",this.generateExpression(e.test,r.Sequence,q),")"+this.semicolon(t)])},CatchClause:function(e,t){var u,n=this;De(function(){var t;u=["catch"+C+"(",n.generateExpression(e.param,r.Sequence,q),")"];if(e.guard){t=n.generateExpression(e.guard,r.Sequence,q);u.splice(2,0," if ",t)}});u.push(this.maybeBlock(e.body,V));return u},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDeclaration:function(e,t){var u=["export"],i,o=this;i=t&R?Y:V;if(e["default"]){u=ce(u,"default");if(I(e.declaration)){u=ce(u,this.generateStatement(e.declaration,i))}else{u=ce(u,this.generateExpression(e.declaration,r.Assignment,q)+this.semicolon(t))}return u}if(e.declaration){return ce(u,this.generateStatement(e.declaration,i))}if(e.specifiers){if(e.specifiers.length===0){u=ce(u,"{"+C+"}")}else if(e.specifiers[0].type===n.ExportBatchSpecifier){u=ce(u,this.generateExpression(e.specifiers[0],r.Sequence,q))}else{u=ce(u,"{");De(function(t){var n,i;u.push(A);for(n=0,i=e.specifiers.length;n<i;++n){u.push(t);u.push(o.generateExpression(e.specifiers[n],r.Sequence,q));if(n+1<i){u.push(","+A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f+"}")}if(e.source){u=ce(u,["from"+C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)])}else{u.push(this.semicolon(t))}}return u},ExportDefaultDeclaration:function(e,t){e.default=true;return this.ExportDeclaration(e,t)},ExportNamedDeclaration:function(e,t){return this.ExportDeclaration(e,t)},ExpressionStatement:function(e,t){var u,i;function o(e){var t;if(e.slice(0,5)!=="class"){return false}t=e.charCodeAt(5);return t===123||a.code.isWhiteSpace(t)||a.code.isLineTerminator(t)}function s(e){var t;if(e.slice(0,8)!=="function"){return false}t=e.charCodeAt(8);return t===40||a.code.isWhiteSpace(t)||t===42||a.code.isLineTerminator(t)}function l(e){var t,u,n;if(e.slice(0,5)!=="async"){return false}if(!a.code.isWhiteSpace(e.charCodeAt(5))){return false}for(u=6,n=e.length;u<n;++u){if(!a.code.isWhiteSpace(e.charCodeAt(u))){break}}if(u===n){return false}if(e.slice(u,u+8)!=="function"){return false}t=e.charCodeAt(u+8);return t===40||a.code.isWhiteSpace(t)||t===42||a.code.isLineTerminator(t)}u=[this.generateExpression(e.expression,r.Sequence,q)];i=le(u).toString();if(i.charCodeAt(0)===123||o(i)||s(i)||l(i)||y&&t&M&&e.expression.type===n.Literal&&typeof e.expression.value==="string"){u=["(",u,")"+this.semicolon(t)]}else{u.push(this.semicolon(t))}return u},ImportDeclaration:function(e,t){var u,i,o=this;if(e.specifiers.length===0){return["import",C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)]}u=["import"];i=0;if(e.specifiers[i].type===n.ImportDefaultSpecifier){u=ce(u,[this.generateExpression(e.specifiers[i],r.Sequence,q)]);++i}if(e.specifiers[i]){if(i!==0){u.push(",")}if(e.specifiers[i].type===n.ImportNamespaceSpecifier){u=ce(u,[C,this.generateExpression(e.specifiers[i],r.Sequence,q)])}else{u.push(C+"{");if(e.specifiers.length-i===1){u.push(C);u.push(this.generateExpression(e.specifiers[i],r.Sequence,q));u.push(C+"}"+C)}else{De(function(t){var n,s;u.push(A);for(n=i,s=e.specifiers.length;n<s;++n){u.push(t);u.push(o.generateExpression(e.specifiers[n],r.Sequence,q));if(n+1<s){u.push(","+A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f+"}"+C)}}}u=ce(u,["from"+C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)]);return u},VariableDeclarator:function(e,t){var u=t&P?q:T;if(e.init){return[this.generateExpression(e.id,r.Assignment,u),C,"=",C,this.generateExpression(e.init,r.Assignment,u)]}return this.generatePattern(e.id,r.Assignment,u)},VariableDeclaration:function(e,t){var u,n,r,i,o,s=this;u=[e.kind];o=t&P?V:G;function a(){i=e.declarations[0];if(B.comment&&i.leadingComments){u.push("\n");u.push(pe(s.generateStatement(i,o)))}else{u.push(fe());u.push(s.generateStatement(i,o))}for(n=1,r=e.declarations.length;n<r;++n){i=e.declarations[n];if(B.comment&&i.leadingComments){u.push(","+A);u.push(pe(s.generateStatement(i,o)))}else{u.push(","+C);u.push(s.generateStatement(i,o))}}}if(e.declarations.length>1){De(a)}else{a()}u.push(this.semicolon(t));return u},ThrowStatement:function(e,t){return[ce("throw",this.generateExpression(e.argument,r.Sequence,q)),this.semicolon(t)]},TryStatement:function(e,t){var u,n,r,i;u=["try",this.maybeBlock(e.block,V)];u=this.maybeBlockSuffix(e.block,u);if(e.handlers){for(n=0,r=e.handlers.length;n<r;++n){u=ce(u,this.generateStatement(e.handlers[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(e.handlers[n].body,u)}}}else{i=e.guardedHandlers||[];for(n=0,r=i.length;n<r;++n){u=ce(u,this.generateStatement(i[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(i[n].body,u)}}if(e.handler){if(l(e.handler)){for(n=0,r=e.handler.length;n<r;++n){u=ce(u,this.generateStatement(e.handler[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(e.handler[n].body,u)}}}else{u=ce(u,this.generateStatement(e.handler,V));if(e.finalizer){u=this.maybeBlockSuffix(e.handler.body,u)}}}}if(e.finalizer){u=ce(u,["finally",this.maybeBlock(e.finalizer,V)])}return u},SwitchStatement:function(e,t){var u,n,i,o,s,a=this;De(function(){u=["switch"+C+"(",a.generateExpression(e.discriminant,r.Sequence,q),")"+C+"{"+A]});if(e.cases){s=V;for(i=0,o=e.cases.length;i<o;++i){if(i===o-1){s|=R}n=pe(this.generateStatement(e.cases[i],s));u.push(n);if(!Z(le(n).toString())){u.push(A)}}}u.push(pe("}"));return u},SwitchCase:function(e,t){var u,i,o,s,a,l=this;De(function(){if(e.test){u=[ce("case",l.generateExpression(e.test,r.Sequence,q)),":"]}else{u=["default:"]}o=0;s=e.consequent.length;if(s&&e.consequent[0].type===n.BlockStatement){i=l.maybeBlock(e.consequent[0],V);u.push(i);o=1}if(o!==s&&!Z(le(u).toString())){u.push(A)}a=V;for(;o<s;++o){if(o===s-1&&t&R){a|=R}i=pe(l.generateStatement(e.consequent[o],a));u.push(i);if(o+1!==s&&!Z(le(i).toString())){u.push(A)}}});return u},IfStatement:function(e,t){var u,i,o,s=this;De(function(){u=["if"+C+"(",s.generateExpression(e.test,r.Sequence,q),")"]});o=t&R;i=V;if(o){i|=R}if(e.alternate){u.push(this.maybeBlock(e.consequent,V));u=this.maybeBlockSuffix(e.consequent,u);if(e.alternate.type===n.IfStatement){u=ce(u,["else ",this.generateStatement(e.alternate,i)])}else{u=ce(u,ce("else",this.maybeBlock(e.alternate,i)))}}else{u.push(this.maybeBlock(e.consequent,i))}return u},ForStatement:function(e,t){var u,i=this;De(function(){u=["for"+C+"("];if(e.init){if(e.init.type===n.VariableDeclaration){u.push(i.generateStatement(e.init,G))}else{u.push(i.generateExpression(e.init,r.Sequence,T));u.push(";")}}else{u.push(";")}if(e.test){u.push(C);u.push(i.generateExpression(e.test,r.Sequence,q));u.push(";")}else{u.push(";")}if(e.update){u.push(C);u.push(i.generateExpression(e.update,r.Sequence,q));u.push(")")}else{u.push(")")}});u.push(this.maybeBlock(e.body,t&R?Y:V));return u},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&R?Y:V)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&R?Y:V)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&R?Y:V)]},Program:function(e,t){var u,n,r,i,o;i=e.body.length;u=[g&&i>0?"\n":""];o=K;for(r=0;r<i;++r){if(!g&&r===i-1){o|=R}if(x){if(r===0){if(!e.body[0].leadingComments){Ce(e.range[0],e.body[r].range[0],u)}}if(r>0){if(!e.body[r-1].trailingComments&&!e.body[r].leadingComments){Ce(e.body[r-1].range[1],e.body[r].range[0],u)}}}n=pe(this.generateStatement(e.body[r],o));u.push(n);if(r+1<i&&!Z(le(n).toString())){if(x){if(!e.body[r+1].leadingComments){u.push(A)}}else{u.push(A)}}if(x){if(r===i-1){if(!e.body[r].trailingComments){Ce(e.body[r].range[1],e.range[1],u)}}}}return u},FunctionDeclaration:function(e,t){return[ve(e,true),"function",be(e)||fe(),Be(e.id),this.generateFunctionBody(e)]},ReturnStatement:function(e,t){if(e.argument){return[ce("return",this.generateExpression(e.argument,r.Sequence,q)),this.semicolon(t)]}return["return"+this.semicolon(t)]},WhileStatement:function(e,t){var u,n=this;De(function(){u=["while"+C+"(",n.generateExpression(e.test,r.Sequence,q),")"]});u.push(this.maybeBlock(e.body,t&R?Y:V));return u},WithStatement:function(e,t){var u,n=this;De(function(){u=["with"+C+"(",n.generateExpression(e.object,r.Sequence,q),")"]});u.push(this.maybeBlock(e.body,t&R?Y:V));return u}};Q(ye.prototype,ye.Statement);ye.Expression={SequenceExpression:function(e,t,u){var n,i,o;if(r.Sequence<t){u|=P}n=[];for(i=0,o=e.expressions.length;i<o;++i){n.push(this.generateExpression(e.expressions[i],r.Assignment,u));if(i+1<o){n.push(","+C)}}return Ee(n,r.Sequence,t)},AssignmentExpression:function(e,t,u){return this.generateAssignment(e.left,e.right,e.operator,t,u)},ArrowFunctionExpression:function(e,t,u){return Ee(this.generateFunctionBody(e),r.ArrowFunction,t)},ConditionalExpression:function(e,t,u){if(r.Conditional<t){u|=P}return Ee([this.generateExpression(e.test,r.LogicalOR,u),C+"?"+C,this.generateExpression(e.consequent,r.Assignment,u),C+":"+C,this.generateExpression(e.alternate,r.Assignment,u)],r.Conditional,t)},LogicalExpression:function(e,t,u){return this.BinaryExpression(e,t,u)},BinaryExpression:function(e,t,u){var n,r,o,s;r=i[e.operator];if(r<t){u|=P}o=this.generateExpression(e.left,r,u);s=o.toString();if(s.charCodeAt(s.length-1)===47&&a.code.isIdentifierPartES5(e.operator.charCodeAt(0))){n=[o,fe(),e.operator]}else{n=ce(o,e.operator)}o=this.generateExpression(e.right,r+1,u);if(e.operator==="/"&&o.toString().charAt(0)==="/"||e.operator.slice(-1)==="<"&&o.toString().slice(0,3)==="!--"){n.push(fe());n.push(o)}else{n=ce(n,o)}if(e.operator==="in"&&!(u&P)){return["(",n,")"]}return Ee(n,r,t)},CallExpression:function(e,t,u){var n,i,o;n=[this.generateExpression(e.callee,r.Call,N)];n.push("(");for(i=0,o=e["arguments"].length;i<o;++i){n.push(this.generateExpression(e["arguments"][i],r.Assignment,q));if(i+1<o){n.push(","+C)}}n.push(")");if(!(u&L)){return["(",n,")"]}return Ee(n,r.Call,t)},NewExpression:function(e,t,u){var n,i,o,s,a;i=e["arguments"].length;a=u&O&&!E&&i===0?W:U;n=ce("new",this.generateExpression(e.callee,r.New,a));if(!(u&O)||E||i>0){n.push("(");for(o=0,s=i;o<s;++o){n.push(this.generateExpression(e["arguments"][o],r.Assignment,q));if(o+1<s){n.push(","+C)}}n.push(")")}return Ee(n,r.New,t)},MemberExpression:function(e,t,u){var i,o;i=[this.generateExpression(e.object,r.Call,u&L?N:U)];if(e.computed){i.push("[");i.push(this.generateExpression(e.property,r.Sequence,u&L?q:W));i.push("]")}else{if(e.object.type===n.Literal&&typeof e.object.value==="number"){o=le(i).toString();if(o.indexOf(".")<0&&!/[eExX]/.test(o)&&a.code.isDecimalDigit(o.charCodeAt(o.length-1))&&!(o.length>=2&&o.charCodeAt(0)===48)){i.push(".")}}i.push(".");i.push(Be(e.property))}return Ee(i,r.Member,t)},UnaryExpression:function(e,t,u){var n,i,o,s,l;i=this.generateExpression(e.argument,r.Unary,q);if(C===""){n=ce(e.operator,i)}else{n=[e.operator];if(e.operator.length>2){n=ce(n,i)}else{s=le(n).toString();l=s.charCodeAt(s.length-1);o=i.toString().charCodeAt(0);if((l===43||l===45)&&l===o||a.code.isIdentifierPartES5(l)&&a.code.isIdentifierPartES5(o)){n.push(fe());n.push(i)}else{n.push(i)}}}return Ee(n,r.Unary,t)},YieldExpression:function(e,t,u){var n;if(e.delegate){n="yield*"}else{n="yield"}if(e.argument){n=ce(n,this.generateExpression(e.argument,r.Yield,q))}return Ee(n,r.Yield,t)},AwaitExpression:function(e,t,u){var n=ce(e.all?"await*":"await",this.generateExpression(e.argument,r.Await,q));return Ee(n,r.Await,t)},UpdateExpression:function(e,t,u){if(e.prefix){return Ee([e.operator,this.generateExpression(e.argument,r.Unary,q)],r.Unary,t)}return Ee([this.generateExpression(e.argument,r.Postfix,q),e.operator],r.Postfix,t)},FunctionExpression:function(e,t,u){var n=[ve(e,true),"function"];if(e.id){n.push(be(e)||fe());n.push(Be(e.id))}else{n.push(be(e)||C)}n.push(this.generateFunctionBody(e));return n},ExportBatchSpecifier:function(e,t,u){return"*"},ArrayPattern:function(e,t,u){return this.ArrayExpression(e,t,u,true)},ArrayExpression:function(e,t,u,n){var i,o,s=this;if(!e.elements.length){return"[]"}o=n?false:e.elements.length>1;i=["[",o?A:""];De(function(t){var u,n;for(u=0,n=e.elements.length;u<n;++u){if(!e.elements[u]){if(o){i.push(t)}if(u+1===n){i.push(",")}}else{i.push(o?t:"");i.push(s.generateExpression(e.elements[u],r.Assignment,q))}if(u+1<n){i.push(","+(o?A:C))}}});if(o&&!Z(le(i).toString())){i.push(A)}i.push(o?f:"");i.push("]");return i},RestElement:function(e,t,u){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,t,u){var n,i;n=["class"];if(e.id){n=ce(n,this.generateExpression(e.id,r.Sequence,q))}if(e.superClass){i=ce("extends",this.generateExpression(e.superClass,r.Assignment,q));n=ce(n,i)}n.push(C);n.push(this.generateStatement(e.body,Y));return n},MethodDefinition:function(e,t,u){var n,r;if(e["static"]){n=["static"+C]}else{n=[]}if(e.kind==="get"||e.kind==="set"){r=[ce(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]}else{r=[Se(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}return ce(n,r)},Property:function(e,t,u){if(e.kind==="get"||e.kind==="set"){return[e.kind,fe(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}if(e.shorthand){return this.generatePropertyKey(e.key,e.computed)}if(e.method){return[Se(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}return[this.generatePropertyKey(e.key,e.computed),":"+C,this.generateExpression(e.value,r.Assignment,q)]},ObjectExpression:function(e,t,u){var n,i,o,s=this;if(!e.properties.length){return"{}"}n=e.properties.length>1;De(function(){o=s.generateExpression(e.properties[0],r.Sequence,q)});if(!n){if(!X(le(o).toString())){return["{",C,o,C,"}"]}}De(function(t){var u,a;i=["{",A,t,o];if(n){i.push(","+A);for(u=1,a=e.properties.length;u<a;++u){i.push(t);i.push(s.generateExpression(e.properties[u],r.Sequence,q));if(u+1<a){i.push(","+A)}}}});if(!Z(le(i).toString())){i.push(A)}i.push(f);i.push("}");return i},ObjectPattern:function(e,t,u){var i,o,s,a,l,c=this;if(!e.properties.length){return"{}"}a=false;if(e.properties.length===1){l=e.properties[0];if(l.value.type!==n.Identifier){a=true}}else{for(o=0,s=e.properties.length;o<s;++o){l=e.properties[o];if(!l.shorthand){a=true;break}}}i=["{",a?A:""];De(function(t){var u,n;for(u=0,n=e.properties.length;u<n;++u){i.push(a?t:"");i.push(c.generateExpression(e.properties[u],r.Sequence,q));if(u+1<n){i.push(","+(a?A:C))}}});if(a&&!Z(le(i).toString())){i.push(A)}i.push(a?f:"");i.push("}");return i},ThisExpression:function(e,t,u){return"this"},Super:function(e,t,u){return"super"},Identifier:function(e,t,u){return Be(e)},ImportDefaultSpecifier:function(e,t,u){return Be(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,u){var n=["*"];var r=e.id||e.local;if(r){n.push(C+"as"+fe()+Be(r))}return n},ImportSpecifier:function(e,t,u){return this.ExportSpecifier(e,t,u)},ExportSpecifier:function(e,t,u){var n=[(e.id||e.local).name];if(e.name){n.push(fe()+"as"+fe()+Be(e.name))}return n},Literal:function(e,t,u){var r;if(e.hasOwnProperty("raw")&&v&&B.raw){try{r=v(e.raw).body[0].expression;if(r.type===n.Literal){if(r.value===e.value){return e.raw}}}catch(i){}}if(e.value===null){return"null"}if(typeof e.value==="string"){return se(e.value)}if(typeof e.value==="number"){return te(e.value)}if(typeof e.value==="boolean"){return e.value?"true":"false"}return ne(e.value)},GeneratorExpression:function(e,t,u){return this.ComprehensionExpression(e,t,u)},ComprehensionExpression:function(e,t,u){var i,o,s,a,l=this;i=e.type===n.GeneratorExpression?["("]:["["];if(B.moz.comprehensionExpressionStartsWithAssignment){a=this.generateExpression(e.body,r.Assignment,q);i.push(a)}if(e.blocks){De(function(){for(o=0,s=e.blocks.length;o<s;++o){a=l.generateExpression(e.blocks[o],r.Sequence,q);if(o>0||B.moz.comprehensionExpressionStartsWithAssignment){i=ce(i,a)}else{i.push(a)}}})}if(e.filter){i=ce(i,"if"+C);a=this.generateExpression(e.filter,r.Sequence,q);i=ce(i,["(",a,")"])}if(!B.moz.comprehensionExpressionStartsWithAssignment){a=this.generateExpression(e.body,r.Assignment,q);i=ce(i,a)}i.push(e.type===n.GeneratorExpression?")":"]");return i},ComprehensionBlock:function(e,t,u){var i;if(e.left.type===n.VariableDeclaration){i=[e.left.kind,fe(),this.generateStatement(e.left.declarations[0],G)]}else{i=this.generateExpression(e.left,r.Call,q)}i=ce(i,e.of?"of":"in");i=ce(i,this.generateExpression(e.right,r.Sequence,q));return["for"+C+"(",i,")"]},SpreadElement:function(e,t,u){return["...",this.generateExpression(e.argument,r.Assignment,q)]},TaggedTemplateExpression:function(e,t,u){var n=N;if(!(u&L)){n=U}var i=[this.generateExpression(e.tag,r.Call,n),this.generateExpression(e.quasi,r.Primary,z)];return Ee(i,r.TaggedTemplate,t)},TemplateElement:function(e,t,u){return e.value.raw},TemplateLiteral:function(e,t,u){var n,i,o;n=["`"];for(i=0,o=e.quasis.length;i<o;++i){n.push(this.generateExpression(e.quasis[i],r.Primary,q));if(i+1<o){n.push("${"+C);n.push(this.generateExpression(e.expressions[i],r.Sequence,q));n.push(C+"}")}}n.push("`");return n},ModuleSpecifier:function(e,t,u){return this.Literal(e,t,u)}};Q(ye.prototype,ye.Expression);ye.prototype.generateExpression=function(e,t,u){var r,i;i=e.type||n.Property;if(B.verbatim&&e.hasOwnProperty(B.verbatim)){return ge(e,t)}r=this[i](e,t,u);if(B.comment){r=Ae(e,r)}return le(r,e)};ye.prototype.generateStatement=function(e,t){var u,r;u=this[e.type](e,t);if(B.comment){u=Ae(e,u)}r=le(u).toString();if(e.type===n.Program&&!g&&A===""&&r.charAt(r.length-1)==="\n"){u=b?le(u).replaceRight(/\s+$/,""):r.replace(/\s+$/,"")}return le(u,e)};function xe(e){var t;t=new ye;if(I(e)){return t.generateStatement(e,V)}if(k(e)){return t.generateExpression(e,r.Sequence,q)}throw new Error("Unknown node type: "+e.type)}function we(n,r){var i=H(),s,a;if(r!=null){if(typeof r.indent==="string"){i.format.indent.style=r.indent}if(typeof r.base==="number"){i.format.indent.base=r.base}r=ee(i,r);c=r.format.indent.style;if(typeof r.base==="string"){f=r.base}else{f=J(c,r.format.indent.base)}}else{r=i;c=r.format.indent.style;f=J(c,r.format.indent.base)}p=r.format.json;D=r.format.renumber;h=p?false:r.format.hexadecimal;m=p?"double":r.format.quotes;d=r.format.escapeless;A=r.format.newline;C=r.format.space;if(r.format.compact){A=C=c=f=""}E=r.format.parentheses;F=r.format.semicolons;g=r.format.safeConcatenation;y=r.directive;v=p?null:r.parse;b=r.sourceMap;S=r.sourceCode;x=r.format.preserveBlankLines&&S!==null;B=r;if(b){if(!u.browser){o=e("source-map").SourceNode}else{o=t.sourceMap.SourceNode}}s=xe(n);if(!b){a={code:s.toString(),map:null};return r.sourceMapWithCode?a:a.code}a=s.toStringWithSourceMap({file:r.file,sourceRoot:r.sourceMapRoot});if(r.sourceContent){a.map.setSourceContent(r.sourceMap,r.sourceContent)}if(r.sourceMapWithCode){return a}return a.map.toString()}w={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};_=H().format;u.version=e("./package.json").version;u.generate=we;u.attachComments=s.attachComments;u.Precedence=ee({},r);u.browser=false;u.FORMAT_MINIFY=w;u.FORMAT_DEFAULTS=_})()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":47,estraverse:49,esutils:33,"source-map":34}],30:[function(e,t,u){(function(){"use strict";function e(e){if(e==null){return false}switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return true}return false}function u(e){if(e==null){return false}switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return true}return false}function n(e){if(e==null){return false}switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return true}return false}function r(e){return n(e)||e!=null&&e.type==="FunctionDeclaration"}function i(e){switch(e.type){case"IfStatement":if(e.alternate!=null){return e.alternate}return e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}function o(e){var t;if(e.type!=="IfStatement"){return false}if(e.alternate==null){return false}t=e.consequent;do{if(t.type==="IfStatement"){if(t.alternate==null){return true}}t=i(t)}while(t);return false}t.exports={isExpression:e,isStatement:n,isIterationStatement:u,isSourceElement:r,isProblematicIfStatement:o,trailingStatement:i}})()},{}],31:[function(e,t,u){(function(){"use strict";var e,u,n,r,i,o;u={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/
};e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function s(e){return 48<=e&&e<=57}function a(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70}function l(e){return e>=48&&e<=55}n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function f(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&n.indexOf(e)>=0}function c(e){return e===10||e===13||e===8232||e===8233}function p(e){if(e<=65535){return String.fromCharCode(e)}var t=String.fromCharCode(Math.floor((e-65536)/1024)+55296);var u=String.fromCharCode((e-65536)%1024+56320);return t+u}r=new Array(128);for(o=0;o<128;++o){r[o]=o>=97&&o<=122||o>=65&&o<=90||o===36||o===95}i=new Array(128);for(o=0;o<128;++o){i[o]=o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===36||o===95}function D(e){return e<128?r[e]:u.NonAsciiIdentifierStart.test(p(e))}function h(e){return e<128?i[e]:u.NonAsciiIdentifierPart.test(p(e))}function m(t){return t<128?r[t]:e.NonAsciiIdentifierStart.test(p(t))}function d(t){return t<128?i[t]:e.NonAsciiIdentifierPart.test(p(t))}t.exports={isDecimalDigit:s,isHexDigit:a,isOctalDigit:l,isWhiteSpace:f,isLineTerminator:c,isIdentifierStartES5:D,isIdentifierPartES5:h,isIdentifierStartES6:m,isIdentifierPartES6:d}})()},{}],32:[function(e,t,u){(function(){"use strict";var u=e("./code");function n(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function r(e,t){if(!t&&e==="yield"){return false}return i(e,t)}function i(e,t){if(t&&n(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function o(e,t){return e==="null"||e==="true"||e==="false"||r(e,t)}function s(e,t){return e==="null"||e==="true"||e==="false"||i(e,t)}function a(e){return e==="eval"||e==="arguments"}function l(e){var t,n,r;if(e.length===0){return false}r=e.charCodeAt(0);if(!u.isIdentifierStartES5(r)){return false}for(t=1,n=e.length;t<n;++t){r=e.charCodeAt(t);if(!u.isIdentifierPartES5(r)){return false}}return true}function f(e,t){return(e-55296)*1024+(t-56320)+65536}function c(e){var t,n,r,i,o;if(e.length===0){return false}o=u.isIdentifierStartES6;for(t=0,n=e.length;t<n;++t){r=e.charCodeAt(t);if(55296<=r&&r<=56319){++t;if(t>=n){return false}i=e.charCodeAt(t);if(!(56320<=i&&i<=57343)){return false}r=f(r,i)}if(!o(r)){return false}o=u.isIdentifierPartES6}return true}function p(e,t){return l(e)&&!o(e,t)}function D(e,t){return c(e)&&!s(e,t)}t.exports={isKeywordES5:r,isKeywordES6:i,isReservedWordES5:o,isReservedWordES6:s,isRestrictedWord:a,isIdentifierNameES5:l,isIdentifierNameES6:c,isIdentifierES5:p,isIdentifierES6:D}})()},{"./code":31}],33:[function(e,t,u){(function(){"use strict";u.ast=e("./ast");u.code=e("./code");u.keyword=e("./keyword")})()},{"./ast":30,"./code":31,"./keyword":32}],34:[function(e,t,u){u.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator;u.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer;u.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":42,"./source-map/source-map-generator":43,"./source-map/source-node":44}],35:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(){this._array=[];this._set={}}r.fromArray=function i(e,t){var u=new r;for(var n=0,i=e.length;n<i;n++){u.add(e[n],t)}return u};r.prototype.add=function o(e,t){var u=this.has(e);var r=this._array.length;if(!u||t){this._array.push(e)}if(!u){this._set[n.toSetString(e)]=r}};r.prototype.has=function s(e){return Object.prototype.hasOwnProperty.call(this._set,n.toSetString(e))};r.prototype.indexOf=function a(e){if(this.has(e)){return this._set[n.toSetString(e)]}throw new Error('"'+e+'" is not in the set.')};r.prototype.at=function l(e){if(e>=0&&e<this._array.length){return this._array[e]}throw new Error("No element indexed by "+e)};r.prototype.toArray=function f(){return this._array.slice()};t.ArraySet=r})},{"./util":45,amdefine:46}],36:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./base64");var r=5;var i=1<<r;var o=i-1;var s=i;function a(e){return e<0?(-e<<1)+1:(e<<1)+0}function l(e){var t=(e&1)===1;var u=e>>1;return t?-u:u}t.encode=function f(e){var t="";var u;var i=a(e);do{u=i&o;i>>>=r;if(i>0){u|=s}t+=n.encode(u)}while(i>0);return t};t.decode=function c(e,t){var u=0;var i=e.length;var a=0;var f=0;var c,p;do{if(u>=i){throw new Error("Expected more digits in base 64 VLQ value.")}p=n.decode(e.charAt(u++));c=!!(p&s);p&=o;a=a+(p<<f);f+=r}while(c);t.value=l(a);t.rest=e.slice(u)}})},{"./base64":37,amdefine:46}],37:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n={};var r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){n[e]=t;r[t]=e});t.encode=function i(e){if(e in r){return r[e]}throw new TypeError("Must be between 0 and 63: "+e)};t.decode=function o(e){if(e in n){return n[e]}throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:46}],38:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./array-set").ArraySet;var o=e("./base64-vlq");var s=e("./source-map-consumer").SourceMapConsumer;function a(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sources");var o=n.getArg(t,"names",[]);var s=n.getArg(t,"sourceRoot",null);var a=n.getArg(t,"sourcesContent",null);var l=n.getArg(t,"mappings");var f=n.getArg(t,"file",null);if(u!=this._version){throw new Error("Unsupported version: "+u)}r=r.map(n.normalize);this._names=i.fromArray(o,true);this._sources=i.fromArray(r,true);this.sourceRoot=s;this.sourcesContent=a;this._mappings=l;this.file=f}a.prototype=Object.create(s.prototype);a.prototype.consumer=s;a.fromSourceMap=function l(e){var t=Object.create(a.prototype);t._names=i.fromArray(e._names.toArray(),true);t._sources=i.fromArray(e._sources.toArray(),true);t.sourceRoot=e._sourceRoot;t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot);t.file=e._file;t.__generatedMappings=e._mappings.toArray().slice();t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions);return t};a.prototype._version=3;Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot!=null?n.join(this.sourceRoot,e):e},this)}});a.prototype._parseMappings=function f(e,t){var u=1;var r=0;var i=0;var s=0;var a=0;var l=0;var f=e;var c={};var p;while(f.length>0){if(f.charAt(0)===";"){u++;f=f.slice(1);r=0}else if(f.charAt(0)===","){f=f.slice(1)}else{p={};p.generatedLine=u;o.decode(f,c);p.generatedColumn=r+c.value;r=p.generatedColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.source=this._sources.at(a+c.value);a+=c.value;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source, but no line and column")}o.decode(f,c);p.originalLine=i+c.value;i=p.originalLine;p.originalLine+=1;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source and line, but no column")}o.decode(f,c);p.originalColumn=s+c.value;s=p.originalColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.name=this._names.at(l+c.value);l+=c.value;f=c.rest}}this.__generatedMappings.push(p);if(typeof p.originalLine==="number"){this.__originalMappings.push(p)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};a.prototype._findMapping=function c(e,t,u,n,i){if(e[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+e[u])}if(e[n]<0){throw new TypeError("Column must be greater than or equal to 0, got "+e[n])}return r.search(e,t,i)};a.prototype.computeColumnSpans=function p(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(t.generatedLine===u.generatedLine){t.lastGeneratedColumn=u.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}};a.prototype.originalPositionFor=function D(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===t.generatedLine){var i=n.getArg(r,"source",null);if(i!=null&&this.sourceRoot!=null){i=n.join(this.sourceRoot,i)}return{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}};a.prototype.sourceContentFor=function h(e,t){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){e=n.relative(this.sourceRoot,e)}if(this._sources.has(e)){return this.sourcesContent[this._sources.indexOf(e)]}var u;if(this.sourceRoot!=null&&(u=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if(u.scheme=="file"&&this._sources.has(r)){return this.sourcesContent[this._sources.indexOf(r)]}if((!u.path||u.path=="/")&&this._sources.has("/"+e)){return this.sourcesContent[this._sources.indexOf("/"+e)]}}if(t){return null}else{throw new Error('"'+e+'" is not in the SourceMap.')}};a.prototype.generatedPositionFor=function m(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(u>=0){var r=this._originalMappings[u];return{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null),lastColumn:n.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};t.BasicSourceMapConsumer=a})},{"./array-set":35,"./base64-vlq":36,"./binary-search":39,"./source-map-consumer":42,"./util":45,amdefine:46}],39:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){function n(e,t,u,r,i){var o=Math.floor((t-e)/2)+e;var s=i(u,r[o],true);if(s===0){return o}else if(s>0){if(t-o>1){return n(o,t,u,r,i)}return o}else{if(o-e>1){return n(e,o,u,r,i)}return e<0?-1:e}}t.search=function r(e,t,u){if(t.length===0){return-1}return n(-1,t.length,e,t,u)}})},{amdefine:46}],40:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./source-map-consumer").SourceMapConsumer;var o=e("./basic-source-map-consumer").BasicSourceMapConsumer;function s(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sections");if(u!=this._version){throw new Error("Unsupported version: "+u)}var o={line:-1,column:0};this._sections=r.map(function(e){if(e.url){throw new Error("Support for url field in sections not implemented.")}var t=n.getArg(e,"offset");var u=n.getArg(t,"line");var r=n.getArg(t,"column");if(u<o.line||u===o.line&&r<o.column){throw new Error("Section offsets must be ordered and non-overlapping.")}o=t;return{generatedOffset:{generatedLine:u+1,generatedColumn:r+1},consumer:new i(n.getArg(e,"map"))}})}s.prototype=Object.create(i.prototype);s.prototype.constructor=i;s.prototype._version=3;Object.defineProperty(s.prototype,"sources",{get:function(){var e=[];for(var t=0;t<this._sections.length;t++){for(var u=0;u<this._sections[t].consumer.sources.length;u++){e.push(this._sections[t].consumer.sources[u])}}return e}});s.prototype.originalPositionFor=function a(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=r.search(t,this._sections,function(e,t){var u=e.generatedLine-t.generatedOffset.generatedLine;if(u){return u}return e.generatedColumn-t.generatedOffset.generatedColumn});var i=this._sections[u];if(!i){return{source:null,line:null,column:null,name:null}}return i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0)})};s.prototype.sourceContentFor=function l(e,t){for(var u=0;u<this._sections.length;u++){var n=this._sections[u];var r=n.consumer.sourceContentFor(e,true);if(r){return r}}if(t){return null}else{throw new Error('"'+e+'" is not in the SourceMap.')}};s.prototype.generatedPositionFor=function f(e){for(var t=0;t<this._sections.length;t++){var u=this._sections[t];if(u.consumer.sources.indexOf(n.getArg(e,"source"))===-1){continue}var r=u.consumer.generatedPositionFor(e);if(r){var i={line:r.line+(u.generatedOffset.generatedLine-1),column:r.column+(u.generatedOffset.generatedLine===r.line?u.generatedOffset.generatedColumn-1:0)};return i}}return{line:null,column:null}};s.prototype._parseMappings=function c(e,t){this.__generatedMappings=[];this.__originalMappings=[];for(var u=0;u<this._sections.length;u++){var r=this._sections[u];var i=r.consumer._generatedMappings;for(var o=0;o<i.length;o++){var s=i[u];var a=s.source;var l=r.consumer.sourceRoot;if(a!=null&&l!=null){a=n.join(l,a)}var f={source:a,generatedLine:s.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:s.column+(r.generatedOffset.generatedLine===s.generatedLine)?r.generatedOffset.generatedColumn-1:0,originalLine:s.originalLine,originalColumn:s.originalColumn,name:s.name};this.__generatedMappings.push(f);if(typeof f.originalLine==="number"){this.__originalMappings.push(f)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};t.IndexedSourceMapConsumer=s})},{"./basic-source-map-consumer":38,"./binary-search":39,"./source-map-consumer":42,"./util":45,amdefine:46}],41:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(e,t){var u=e.generatedLine;var r=t.generatedLine;var i=e.generatedColumn;var o=t.generatedColumn;return r>u||r==u&&o>=i||n.compareByGeneratedPositions(e,t)<=0}function i(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function o(e,t){this._array.forEach(e,t)};i.prototype.add=function s(e){var t;if(r(this._last,e)){this._last=e;this._array.push(e)}else{this._sorted=false;this._array.push(e)}};i.prototype.toArray=function a(){if(!this._sorted){this._array.sort(n.compareByGeneratedPositions);this._sorted=true}return this._array};t.MappingList=i})},{"./util":45,amdefine:46}],42:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(t){var u=t;if(typeof t==="string"){u=JSON.parse(t.replace(/^\)\]\}'/,""))}if(u.sections!=null){var n=e("./indexed-source-map-consumer");return new n.IndexedSourceMapConsumer(u)}else{var r=e("./basic-source-map-consumer");return new r.BasicSourceMapConsumer(u)}}r.fromSourceMap=function(t){var u=e("./basic-source-map-consumer");return u.BasicSourceMapConsumer.fromSourceMap(t)};r.prototype._version=3;r.prototype.__generatedMappings=null;Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});r.prototype.__originalMappings=null;Object.defineProperty(r.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});r.prototype._nextCharIsMappingSeparator=function i(e){var t=e.charAt(0);return t===";"||t===","};r.prototype._parseMappings=function o(e,t){throw new Error("Subclasses must implement _parseMappings")};r.GENERATED_ORDER=1;r.ORIGINAL_ORDER=2;r.prototype.eachMapping=function s(e,t,u){var i=t||null;var o=u||r.GENERATED_ORDER;var s;switch(o){case r.GENERATED_ORDER:s=this._generatedMappings;break;case r.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(e){var t=e.source;if(t!=null&&a!=null){t=n.join(a,t)}return{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,i)};r.prototype.allGeneratedPositionsFor=function a(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=[];var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];while(i&&i.originalLine===t.originalLine){u.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)});i=this._originalMappings[--r]}}return u.reverse()};t.SourceMapConsumer=r})},{"./basic-source-map-consumer":38,"./indexed-source-map-consumer":40,"./util":45,amdefine:46}],43:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./base64-vlq");var r=e("./util");
var i=e("./array-set").ArraySet;var o=e("./mapping-list").MappingList;function s(e){if(!e){e={}}this._file=r.getArg(e,"file",null);this._sourceRoot=r.getArg(e,"sourceRoot",null);this._skipValidation=r.getArg(e,"skipValidation",false);this._sources=new i;this._names=new i;this._mappings=new o;this._sourcesContents=null}s.prototype._version=3;s.fromSourceMap=function a(e){var t=e.sourceRoot;var u=new s({file:e.file,sourceRoot:t});e.eachMapping(function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};if(e.source!=null){n.source=e.source;if(t!=null){n.source=r.relative(t,n.source)}n.original={line:e.originalLine,column:e.originalColumn};if(e.name!=null){n.name=e.name}}u.addMapping(n)});e.sources.forEach(function(t){var n=e.sourceContentFor(t);if(n!=null){u.setSourceContent(t,n)}});return u};s.prototype.addMapping=function l(e){var t=r.getArg(e,"generated");var u=r.getArg(e,"original",null);var n=r.getArg(e,"source",null);var i=r.getArg(e,"name",null);if(!this._skipValidation){this._validateMapping(t,u,n,i)}if(n!=null&&!this._sources.has(n)){this._sources.add(n)}if(i!=null&&!this._names.has(i)){this._names.add(i)}this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:u!=null&&u.line,originalColumn:u!=null&&u.column,source:n,name:i})};s.prototype.setSourceContent=function f(e,t){var u=e;if(this._sourceRoot!=null){u=r.relative(this._sourceRoot,u)}if(t!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[r.toSetString(u)]=t}else if(this._sourcesContents){delete this._sourcesContents[r.toSetString(u)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};s.prototype.applySourceMap=function c(e,t,u){var n=t;if(t==null){if(e.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}n=e.file}var o=this._sourceRoot;if(o!=null){n=r.relative(o,n)}var s=new i;var a=new i;this._mappings.unsortedForEach(function(t){if(t.source===n&&t.originalLine!=null){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});if(i.source!=null){t.source=i.source;if(u!=null){t.source=r.join(u,t.source)}if(o!=null){t.source=r.relative(o,t.source)}t.originalLine=i.line;t.originalColumn=i.column;if(i.name!=null){t.name=i.name}}}var l=t.source;if(l!=null&&!s.has(l)){s.add(l)}var f=t.name;if(f!=null&&!a.has(f)){a.add(f)}},this);this._sources=s;this._names=a;e.sources.forEach(function(t){var n=e.sourceContentFor(t);if(n!=null){if(u!=null){t=r.join(u,t)}if(o!=null){t=r.relative(o,t)}this.setSourceContent(t,n)}},this)};s.prototype._validateMapping=function p(e,t,u,n){if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!u&&!n){return}else if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&u){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:u,original:t,name:n}))}};s.prototype._serializeMappings=function D(){var e=0;var t=1;var u=0;var i=0;var o=0;var s=0;var a="";var l;var f=this._mappings.toArray();for(var c=0,p=f.length;c<p;c++){l=f[c];if(l.generatedLine!==t){e=0;while(l.generatedLine!==t){a+=";";t++}}else{if(c>0){if(!r.compareByGeneratedPositions(l,f[c-1])){continue}a+=","}}a+=n.encode(l.generatedColumn-e);e=l.generatedColumn;if(l.source!=null){a+=n.encode(this._sources.indexOf(l.source)-s);s=this._sources.indexOf(l.source);a+=n.encode(l.originalLine-1-i);i=l.originalLine-1;a+=n.encode(l.originalColumn-u);u=l.originalColumn;if(l.name!=null){a+=n.encode(this._names.indexOf(l.name)-o);o=this._names.indexOf(l.name)}}}return a};s.prototype._generateSourcesContent=function h(e,t){return e.map(function(e){if(!this._sourcesContents){return null}if(t!=null){e=r.relative(t,e)}var u=r.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)};s.prototype.toJSON=function m(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){e.file=this._file}if(this._sourceRoot!=null){e.sourceRoot=this._sourceRoot}if(this._sourcesContents){e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)}return e};s.prototype.toString=function d(){return JSON.stringify(this)};t.SourceMapGenerator=s})},{"./array-set":35,"./base64-vlq":36,"./mapping-list":41,"./util":45,amdefine:46}],44:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./source-map-generator").SourceMapGenerator;var r=e("./util");var i=/(\r?\n)/;var o=10;var s="$$$isSourceNode$$$";function a(e,t,u,n,r){this.children=[];this.sourceContents={};this.line=e==null?null:e;this.column=t==null?null:t;this.source=u==null?null:u;this.name=r==null?null:r;this[s]=true;if(n!=null)this.add(n)}a.fromStringWithSourceMap=function l(e,t,u){var n=new a;var o=e.split(i);var s=function(){var e=o.shift();var t=o.shift()||"";return e+t};var l=1,f=0;var c=null;t.eachMapping(function(e){if(c!==null){if(l<e.generatedLine){var t="";p(c,s());l++;f=0}else{var u=o[0];var t=u.substr(0,e.generatedColumn-f);o[0]=u.substr(e.generatedColumn-f);f=e.generatedColumn;p(c,t);c=e;return}}while(l<e.generatedLine){n.add(s());l++}if(f<e.generatedColumn){var u=o[0];n.add(u.substr(0,e.generatedColumn));o[0]=u.substr(e.generatedColumn);f=e.generatedColumn}c=e},this);if(o.length>0){if(c){p(c,s())}n.add(o.join(""))}t.sources.forEach(function(e){var i=t.sourceContentFor(e);if(i!=null){if(u!=null){e=r.join(u,e)}n.setSourceContent(e,i)}});return n;function p(e,t){if(e===null||e.source===undefined){n.add(t)}else{var i=u?r.join(u,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,i,t,e.name))}}};a.prototype.add=function f(e){if(Array.isArray(e)){e.forEach(function(e){this.add(e)},this)}else if(e[s]||typeof e==="string"){if(e){this.children.push(e)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e)}return this};a.prototype.prepend=function c(e){if(Array.isArray(e)){for(var t=e.length-1;t>=0;t--){this.prepend(e[t])}}else if(e[s]||typeof e==="string"){this.children.unshift(e)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e)}return this};a.prototype.walk=function p(e){var t;for(var u=0,n=this.children.length;u<n;u++){t=this.children[u];if(t[s]){t.walk(e)}else{if(t!==""){e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};a.prototype.join=function D(e){var t;var u;var n=this.children.length;if(n>0){t=[];for(u=0;u<n-1;u++){t.push(this.children[u]);t.push(e)}t.push(this.children[u]);this.children=t}return this};a.prototype.replaceRight=function h(e,t){var u=this.children[this.children.length-1];if(u[s]){u.replaceRight(e,t)}else if(typeof u==="string"){this.children[this.children.length-1]=u.replace(e,t)}else{this.children.push("".replace(e,t))}return this};a.prototype.setSourceContent=function m(e,t){this.sourceContents[r.toSetString(e)]=t};a.prototype.walkSourceContents=function d(e){for(var t=0,u=this.children.length;t<u;t++){if(this.children[t][s]){this.children[t].walkSourceContents(e)}}var n=Object.keys(this.sourceContents);for(var t=0,u=n.length;t<u;t++){e(r.fromSetString(n[t]),this.sourceContents[n[t]])}};a.prototype.toString=function A(){var e="";this.walk(function(t){e+=t});return e};a.prototype.toStringWithSourceMap=function C(e){var t={code:"",line:1,column:0};var u=new n(e);var r=false;var i=null;var s=null;var a=null;var l=null;this.walk(function(e,n){t.code+=e;if(n.source!==null&&n.line!==null&&n.column!==null){if(i!==n.source||s!==n.line||a!==n.column||l!==n.name){u.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})}i=n.source;s=n.line;a=n.column;l=n.name;r=true}else if(r){u.addMapping({generated:{line:t.line,column:t.column}});i=null;r=false}for(var f=0,c=e.length;f<c;f++){if(e.charCodeAt(f)===o){t.line++;t.column=0;if(f+1===c){i=null;r=false}else if(r){u.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})}}else{t.column++}}});this.walkSourceContents(function(e,t){u.setSourceContent(e,t)});return{code:t.code,map:u}};t.SourceNode=a})},{"./source-map-generator":43,"./util":45,amdefine:46}],45:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){function n(e,t,u){if(t in e){return e[t]}else if(arguments.length===3){return u}else{throw new Error('"'+t+'" is a required argument.')}}t.getArg=n;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var i=/^data:.+\,.+$/;function o(e){var t=e.match(r);if(!t){return null}return{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}}t.urlParse=o;function s(e){var t="";if(e.scheme){t+=e.scheme+":"}t+="//";if(e.auth){t+=e.auth+"@"}if(e.host){t+=e.host}if(e.port){t+=":"+e.port}if(e.path){t+=e.path}return t}t.urlGenerate=s;function a(e){var t=e;var u=o(e);if(u){if(!u.path){return e}t=u.path}var n=t.charAt(0)==="/";var r=t.split(/\/+/);for(var i,a=0,l=r.length-1;l>=0;l--){i=r[l];if(i==="."){r.splice(l,1)}else if(i===".."){a++}else if(a>0){if(i===""){r.splice(l+1,a);a=0}else{r.splice(l,2);a--}}}t=r.join("/");if(t===""){t=n?"/":"."}if(u){u.path=t;return s(u)}return t}t.normalize=a;function l(e,t){if(e===""){e="."}if(t===""){t="."}var u=o(t);var n=o(e);if(n){e=n.path||"/"}if(u&&!u.scheme){if(n){u.scheme=n.scheme}return s(u)}if(u||t.match(i)){return t}if(n&&!n.host&&!n.path){n.host=t;return s(n)}var r=t.charAt(0)==="/"?t:a(e.replace(/\/+$/,"")+"/"+t);if(n){n.path=r;return s(n)}return r}t.join=l;function f(e,t){if(e===""){e="."}e=e.replace(/\/$/,"");var u=o(e);if(t.charAt(0)=="/"&&u&&u.path=="/"){return t.slice(1)}return t.indexOf(e+"/")===0?t.substr(e.length+1):t}t.relative=f;function c(e){return"$"+e}t.toSetString=c;function p(e){return e.substr(1)}t.fromSetString=p;function D(e,t){var u=e||"";var n=t||"";return(u>n)-(u<n)}function h(e,t,u){var n;n=D(e.source,t.source);if(n){return n}n=e.originalLine-t.originalLine;if(n){return n}n=e.originalColumn-t.originalColumn;if(n||u){return n}n=D(e.name,t.name);if(n){return n}n=e.generatedLine-t.generatedLine;if(n){return n}return e.generatedColumn-t.generatedColumn}t.compareByOriginalPositions=h;function m(e,t,u){var n;n=e.generatedLine-t.generatedLine;if(n){return n}n=e.generatedColumn-t.generatedColumn;if(n||u){return n}n=D(e.source,t.source);if(n){return n}n=e.originalLine-t.originalLine;if(n){return n}n=e.originalColumn-t.originalColumn;if(n){return n}return D(e.name,t.name)}t.compareByGeneratedPositions=m})},{amdefine:46}],46:[function(e,t,u){(function(u,n){"use strict";function r(t,r){"use strict";var i={},o={},s=false,a=e("path"),l,f;function c(e){var t,u;for(t=0;e[t];t+=1){u=e[t];if(u==="."){e.splice(t,1);t-=1}else if(u===".."){if(t===1&&(e[2]===".."||e[0]==="..")){break}else if(t>0){e.splice(t-1,2);t-=2}}}}function p(e,t){var u;if(e&&e.charAt(0)==="."){if(t){u=t.split("/");u=u.slice(0,u.length-1);u=u.concat(e.split("/"));c(u);e=u.join("/")}}return e}function D(e){return function(t){return p(t,e)}}function h(e){function t(t){o[e]=t}t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")};return t}l=function(e,t,n,r){function i(i,o){if(typeof i==="string"){return f(e,t,n,i,r)}else{i=i.map(function(u){return f(e,t,n,u,r)});if(o){u.nextTick(function(){o.apply(null,i)})}}}i.toUrl=function(e){if(e.indexOf(".")===0){return p(e,a.dirname(n.filename))}else{return e}};return i};r=r||function A(){return t.require.apply(t,arguments)};function m(e,u,i){var a,f,c,p;if(e){f=o[e]={};c={id:e,uri:n,exports:f};a=l(r,f,c,e)}else{if(s){throw new Error("amdefine with no module ID cannot be called more than once per file.")}s=true;f=t.exports;c=t;a=l(r,f,c,t.id)}if(u){u=u.map(function(e){return a(e)})}if(typeof i==="function"){p=i.apply(c.exports,u)}else{p=i}if(p!==undefined){c.exports=p;if(e){o[e]=c.exports}}}f=function(e,t,u,n,r){var s=n.indexOf("!"),a=n,c,d;if(s===-1){n=p(n,r);if(n==="require"){return l(e,t,u,r)}else if(n==="exports"){return t}else if(n==="module"){return u}else if(o.hasOwnProperty(n)){return o[n]}else if(i[n]){m.apply(null,i[n]);return o[n]}else{if(e){return e(a)}else{throw new Error("No module with ID: "+n)}}}else{c=n.substring(0,s);n=n.substring(s+1,n.length);d=f(e,t,u,c,r);if(d.normalize){n=d.normalize(n,D(r))}else{n=p(n,r)}if(o[n]){return o[n]}else{d.load(n,l(e,t,u,r),h(n),{});return o[n]}}};function d(e,t,u){if(Array.isArray(e)){u=t;t=e;e=undefined}else if(typeof e!=="string"){u=e;e=t=undefined}if(t&&!Array.isArray(t)){u=t;t=undefined}if(!t){t=["require","exports","module"]}if(e){i[e]=[e,t,u]}else{m(e,t,u)}}d.require=function(e){if(o[e]){return o[e]}if(i[e]){m.apply(null,i[e]);return o[e]}};d.amd={};return d}t.exports=r}).call(this,e("_process"),"/node_modules/escodegen/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:26,path:25}],47:[function(e,t,u){t.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.7.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^2.0.2",esprima:"^1.2.2",optionator:"^0.5.0","source-map":"~0.2.0"},optionalDependencies:{"source-map":"~0.2.0"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"1.0.0-dev-harmony-moz",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js"},gitHead:"5dabbc5441b396febd0afb9252a9afdfa7051657",bugs:{url:"https://github.com/estools/escodegen/issues"},_id:"escodegen@1.7.0",_shasum:"4e299d8cc33087b7f29c19e2b9e84362abe35453",_from:"escodegen@>=1.6.0 <2.0.0",_npmVersion:"2.11.3",_nodeVersion:"0.12.7",_npmUser:{name:"michaelficarra",email:"npm@michael.ficarra.me"},dist:{shasum:"4e299d8cc33087b7f29c19e2b9e84362abe35453",tarball:"http://registry.npmjs.org/escodegen/-/escodegen-1.7.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.7.0.tgz",readme:"ERROR: No README data found!"}},{}],48:[function(t,u,n){(function(t,u){"use strict";if(typeof e==="function"&&e.amd){e(["exports"],u)}else if(typeof n!=="undefined"){u(n)}else{u(t.esprima={})}})(this,function(e){"use strict";var t,u,n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E,F,g,y,B,v,b,S,x;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10};u={};u[t.BooleanLiteral]="Boolean";u[t.EOF]="<end>";u[t.Identifier]="Identifier";u[t.Keyword]="Keyword";u[t.NullLiteral]="Null";u[t.NumericLiteral]="Numeric";u[t.Punctuator]="Punctuator";u[t.StringLiteral]="String";u[t.RegularExpression]="RegularExpression";u[t.Template]="Template";n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};i={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"};o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"};s={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/
};function w(e,t){if(!e){throw new Error("ASSERT: "+t)}}function _(e){return e>=48&&e<=57}function k(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function I(e){return"01234567".indexOf(e)>=0}function P(e){var t=e!=="0",u="01234567".indexOf(e);if(f<g&&I(a[f])){t=true;u=u*8+"01234567".indexOf(a[f++]);if("0123".indexOf(e)>=0&&f<g&&I(a[f])){u=u*8+"01234567".indexOf(a[f++])}}return{code:u,octal:t}}function L(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function O(e){return e===10||e===13||e===8232||e===8233}function j(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))}function M(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&s.NonAsciiIdentifierStart.test(j(e))}function R(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&s.NonAsciiIdentifierPart.test(j(e))}function T(e){switch(e){case"enum":case"export":case"import":case"super":return true;default:return false}}function N(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function q(e){return e==="eval"||e==="arguments"}function U(e){switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function z(e,t,u,n,r){var i;w(typeof u==="number","Comment must have valid position");B.lastCommentStart=u;i={type:e,value:t};if(v.range){i.range=[u,n]}if(v.loc){i.loc=r}v.comments.push(i);if(v.attachComment){v.leadingComments.push(i);v.trailingComments.push(i)}}function W(e){var t,u,n,r;t=f-e;u={start:{line:c,column:f-p-e}};while(f<g){n=a.charCodeAt(f);++f;if(O(n)){D=true;if(v.comments){r=a.slice(t+e,f-1);u.end={line:c,column:f-p-1};z("Line",r,t,f-1,u)}if(n===13&&a.charCodeAt(f)===10){++f}++c;p=f;return}}if(v.comments){r=a.slice(t+e,f);u.end={line:c,column:f-p};z("Line",r,t,f,u)}}function V(){var e,t,u,n;if(v.comments){e=f-2;t={start:{line:c,column:f-p-2}}}while(f<g){u=a.charCodeAt(f);if(O(u)){if(u===13&&a.charCodeAt(f+1)===10){++f}D=true;++c;++f;p=f}else if(u===42){if(a.charCodeAt(f+1)===47){++f;++f;if(v.comments){n=a.slice(e+2,f-2);t.end={line:c,column:f-p};z("Block",n,e,f,t)}return}++f}else{++f}}if(v.comments){t.end={line:c,column:f-p};n=a.slice(e+2,f);z("Block",n,e,f,t)}_e()}function Y(){var e,t;D=false;t=f===0;while(f<g){e=a.charCodeAt(f);if(L(e)){++f}else if(O(e)){D=true;++f;if(e===13&&a.charCodeAt(f)===10){++f}++c;p=f;t=true}else if(e===47){e=a.charCodeAt(f+1);if(e===47){++f;++f;W(2);t=true}else if(e===42){++f;++f;V()}else{break}}else if(t&&e===45){if(a.charCodeAt(f+1)===45&&a.charCodeAt(f+2)===62){f+=3;W(3)}else{break}}else if(e===60){if(a.slice(f+1,f+4)==="!--"){++f;++f;++f;++f;W(4)}else{break}}else{break}}}function G(e){var t,u,n,r=0;u=e==="u"?4:2;for(t=0;t<u;++t){if(f<g&&k(a[f])){n=a[f++];r=r*16+"0123456789abcdef".indexOf(n.toLowerCase())}else{return""}}return String.fromCharCode(r)}function K(){var e,t;e=a[f];t=0;if(e==="}"){we()}while(f<g){e=a[f++];if(!k(e)){break}t=t*16+"0123456789abcdef".indexOf(e.toLowerCase())}if(t>1114111||e!=="}"){we()}return j(t)}function $(e){var t,u,n;t=a.charCodeAt(e);if(t>=55296&&t<=56319){n=a.charCodeAt(e+1);if(n>=56320&&n<=57343){u=t;t=(u-55296)*1024+n-56320+65536}}return t}function H(){var e,t,u;e=$(f);u=j(e);f+=u.length;if(e===92){if(a.charCodeAt(f)!==117){we()}++f;if(a[f]==="{"){++f;t=K()}else{t=G("u");e=t.charCodeAt(0);if(!t||t==="\\"||!M(e)){we()}}u=t}while(f<g){e=$(f);if(!R(e)){break}t=j(e);u+=t;f+=t.length;if(e===92){u=u.substr(0,u.length-1);if(a.charCodeAt(f)!==117){we()}++f;if(a[f]==="{"){++f;t=K()}else{t=G("u");e=t.charCodeAt(0);if(!t||t==="\\"||!R(e)){we()}}u+=t}}return u}function J(){var e,t;e=f++;while(f<g){t=a.charCodeAt(f);if(t===92){f=e;return H()}else if(t>=55296&&t<57343){f=e;return H()}if(R(t)){++f}else{break}}return a.slice(e,f)}function X(){var e,u,n;e=f;u=a.charCodeAt(f)===92?H():J();if(u.length===1){n=t.Identifier}else if(U(u)){n=t.Keyword}else if(u==="null"){n=t.NullLiteral}else if(u==="true"||u==="false"){n=t.BooleanLiteral}else{n=t.Identifier}return{type:n,value:u,lineNumber:c,lineStart:p,start:e,end:f}}function Z(){var e,u;e={type:t.Punctuator,value:"",lineNumber:c,lineStart:p,start:f,end:f};u=a[f];switch(u){case"(":if(v.tokenize){v.openParenToken=v.tokens.length}++f;break;case"{":if(v.tokenize){v.openCurlyToken=v.tokens.length}B.curlyStack.push("{");++f;break;case".":++f;if(a[f]==="."&&a[f+1]==="."){f+=2;u="..."}break;case"}":++f;B.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++f;break;default:u=a.substr(f,4);if(u===">>>="){f+=4}else{u=u.substr(0,3);if(u==="==="||u==="!=="||u===">>>"||u==="<<="||u===">>="){f+=3}else{u=u.substr(0,2);if(u==="&&"||u==="||"||u==="=="||u==="!="||u==="+="||u==="-="||u==="*="||u==="/="||u==="++"||u==="--"||u==="<<"||u===">>"||u==="&="||u==="|="||u==="^="||u==="%="||u==="<="||u===">="||u==="=>"){f+=2}else{u=a[f];if("<>=!+-*%&|^/".indexOf(u)>=0){++f}}}}}if(f===e.start){we()}e.end=f;e.value=u;return e}function Q(e){var u="";while(f<g){if(!k(a[f])){break}u+=a[f++]}if(u.length===0){we()}if(M(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseInt("0x"+u,16),lineNumber:c,lineStart:p,start:e,end:f}}function ee(e){var u,n;n="";while(f<g){u=a[f];if(u!=="0"&&u!=="1"){break}n+=a[f++]}if(n.length===0){we()}if(f<g){u=a.charCodeAt(f);if(M(u)||_(u)){we()}}return{type:t.NumericLiteral,value:parseInt(n,2),lineNumber:c,lineStart:p,start:e,end:f}}function te(e,u){var n,r;if(I(e)){r=true;n="0"+a[f++]}else{r=false;++f;n=""}while(f<g){if(!I(a[f])){break}n+=a[f++]}if(!r&&n.length===0){we()}if(M(a.charCodeAt(f))||_(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseInt(n,8),octal:r,lineNumber:c,lineStart:p,start:u,end:f}}function ue(){var e,t;for(e=f+1;e<g;++e){t=a[e];if(t==="8"||t==="9"){return false}if(!I(t)){return true}}return true}function ne(){var e,u,n;n=a[f];w(_(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point");u=f;e="";if(n!=="."){e=a[f++];n=a[f];if(e==="0"){if(n==="x"||n==="X"){++f;return Q(u)}if(n==="b"||n==="B"){++f;return ee(u)}if(n==="o"||n==="O"){return te(n,u)}if(I(n)){if(ue()){return te(n,u)}}}while(_(a.charCodeAt(f))){e+=a[f++]}n=a[f]}if(n==="."){e+=a[f++];while(_(a.charCodeAt(f))){e+=a[f++]}n=a[f]}if(n==="e"||n==="E"){e+=a[f++];n=a[f];if(n==="+"||n==="-"){e+=a[f++]}if(_(a.charCodeAt(f))){while(_(a.charCodeAt(f))){e+=a[f++]}}else{we()}}if(M(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseFloat(e),lineNumber:c,lineStart:p,start:u,end:f}}function re(){var e="",u,n,r,i,o,s=false;u=a[f];w(u==="'"||u==='"',"String literal must starts with a quote");n=f;++f;while(f<g){r=a[f++];if(r===u){u="";break}else if(r==="\\"){r=a[f++];if(!r||!O(r.charCodeAt(0))){switch(r){case"u":case"x":if(a[f]==="{"){++f;e+=K()}else{i=G(r);if(!i){throw we()}e+=i}break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;case"8":case"9":e+=r;_e();break;default:if(I(r)){o=P(r);s=o.octal||s;e+=String.fromCharCode(o.code)}else{e+=r}break}}else{++c;if(r==="\r"&&a[f]==="\n"){++f}p=f}}else if(O(r.charCodeAt(0))){break}else{e+=r}}if(u!==""){we()}return{type:t.StringLiteral,value:e,octal:s,lineNumber:C,lineStart:E,start:n,end:f}}function ie(){var e="",u,n,r,i,s,l,D,h;i=false;l=false;n=f;s=a[f]==="`";r=2;++f;while(f<g){u=a[f++];if(u==="`"){r=1;l=true;i=true;break}else if(u==="$"){if(a[f]==="{"){B.curlyStack.push("${");++f;i=true;break}e+=u}else if(u==="\\"){u=a[f++];if(!O(u.charCodeAt(0))){switch(u){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":case"x":if(a[f]==="{"){++f;e+=K()}else{D=f;h=G(u);if(h){e+=h}else{f=D;e+=u}}break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;default:if(u==="0"){if(_(a.charCodeAt(f))){be(o.TemplateOctalLiteral)}e+="\x00"}else if(I(u)){be(o.TemplateOctalLiteral)}else{e+=u}break}}else{++c;if(u==="\r"&&a[f]==="\n"){++f}p=f}}else if(O(u.charCodeAt(0))){++c;if(u==="\r"&&a[f]==="\n"){++f}p=f;e+="\n"}else{e+=u}}if(!i){we()}if(!s){B.curlyStack.pop()}return{type:t.Template,value:{cooked:e,raw:a.slice(n+1,f-r)},head:s,tail:l,lineNumber:c,lineStart:p,start:n,end:f}}function oe(e,t){var u="￿",n=e;if(t.indexOf("u")>=0){n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,n){var r=parseInt(t||n,16);if(r>1114111){we(null,o.InvalidRegExp)}if(r<=65535){return String.fromCharCode(r)}return u}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u)}try{RegExp(n)}catch(r){we(null,o.InvalidRegExp)}try{return new RegExp(e,t)}catch(i){return null}}function se(){var e,t,u,n,r;e=a[f];w(e==="/","Regular expression literal must start with a slash");t=a[f++];u=false;n=false;while(f<g){e=a[f++];t+=e;if(e==="\\"){e=a[f++];if(O(e.charCodeAt(0))){we(null,o.UnterminatedRegExp)}t+=e}else if(O(e.charCodeAt(0))){we(null,o.UnterminatedRegExp)}else if(u){if(e==="]"){u=false}}else{if(e==="/"){n=true;break}else if(e==="["){u=true}}}if(!n){we(null,o.UnterminatedRegExp)}r=t.substr(1,t.length-2);return{value:r,literal:t}}function ae(){var e,t,u,n;t="";u="";while(f<g){e=a[f];if(!R(e.charCodeAt(0))){break}++f;if(e==="\\"&&f<g){e=a[f];if(e==="u"){++f;n=f;e=G("u");if(e){u+=e;for(t+="\\u";n<f;++n){t+=a[n]}}else{f=n;u+="u";t+="\\u"}_e()}else{t+="\\";_e()}}else{u+=e;t+=e}}return{value:u,literal:t}}function le(){var e,u,n,r;F=true;y=null;Y();e=f;u=se();n=ae();r=oe(u.value,n.value);F=false;if(v.tokenize){return{type:t.RegularExpression,value:r,regex:{pattern:u.value,flags:n.value},lineNumber:c,lineStart:p,start:e,end:f}}return{literal:u.literal+n.literal,value:r,regex:{pattern:u.value,flags:n.value},start:e,end:f}}function fe(){var e,t,u,n;Y();e=f;t={start:{line:c,column:f-p}};u=le();t.end={line:c,column:f-p};if(!v.tokenize){if(v.tokens.length>0){n=v.tokens[v.tokens.length-1];if(n.range[0]===e&&n.type==="Punctuator"){if(n.value==="/"||n.value==="/="){v.tokens.pop()}}}v.tokens.push({type:"RegularExpression",value:u.literal,regex:u.regex,range:[e,f],loc:t})}return u}function ce(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function pe(){var e,t;e=v.tokens[v.tokens.length-1];if(!e){return fe()}if(e.type==="Punctuator"){if(e.value==="]"){return Z()}if(e.value===")"){t=v.tokens[v.openParenToken-1];if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return fe()}return Z()}if(e.value==="}"){if(v.tokens[v.openCurlyToken-3]&&v.tokens[v.openCurlyToken-3].type==="Keyword"){t=v.tokens[v.openCurlyToken-4];if(!t){return Z()}}else if(v.tokens[v.openCurlyToken-4]&&v.tokens[v.openCurlyToken-4].type==="Keyword"){t=v.tokens[v.openCurlyToken-5];if(!t){return fe()}}else{return Z()}if(n.indexOf(t.value)>=0){return Z()}return fe()}return fe()}if(e.type==="Keyword"&&e.value!=="this"){return fe()}return Z()}function De(){var e,u;if(f>=g){return{type:t.EOF,lineNumber:c,lineStart:p,start:f,end:f}}e=a.charCodeAt(f);if(M(e)){u=X();if(l&&N(u.value)){u.type=t.Keyword}return u}if(e===40||e===41||e===59){return Z()}if(e===39||e===34){return re()}if(e===46){if(_(a.charCodeAt(f+1))){return ne()}return Z()}if(_(e)){return ne()}if(v.tokenize&&e===47){return pe()}if(e===96||e===125&&B.curlyStack[B.curlyStack.length-1]==="${"){return ie()}if(e>=55296&&e<57343){e=$(f);if(M(e)){return X()}}return Z()}function he(){var e,n,r,i;e={start:{line:c,column:f-p}};n=De();e.end={line:c,column:f-p};if(n.type!==t.EOF){r=a.slice(n.start,n.end);i={type:u[n.type],value:r,range:[n.start,n.end],loc:e};if(n.regex){i.regex={pattern:n.regex.pattern,flags:n.regex.flags}}v.tokens.push(i)}return n}function me(){var e;F=true;h=f;m=c;d=p;Y();e=y;A=f;C=c;E=p;y=typeof v.tokens!=="undefined"?he():De();F=false;return e}function de(){F=true;Y();h=f;m=c;d=p;A=f;C=c;E=p;y=typeof v.tokens!=="undefined"?he():De();F=false}function Ae(){this.line=C;this.column=A-E}function Ce(){this.start=new Ae;this.end=null}function Ee(e){this.start={line:e.lineNumber,column:e.start-e.lineStart};this.end=null}function Fe(){if(v.range){this.range=[A,0]}if(v.loc){this.loc=new Ce}}function ge(e){if(v.range){this.range=[e.start,0]}if(v.loc){this.loc=new Ee(e)}}ge.prototype=Fe.prototype={processComment:function(){var e,t,u,n=v.bottomRightStack,i,o,s=n[n.length-1];if(this.type===r.Program){if(this.body.length>0){return}}if(v.trailingComments.length>0){u=[];for(i=v.trailingComments.length-1;i>=0;--i){o=v.trailingComments[i];if(o.range[0]>=this.range[1]){u.unshift(o);v.trailingComments.splice(i,1)}}v.trailingComments=[]}else{if(s&&s.trailingComments&&s.trailingComments[0].range[0]>=this.range[1]){u=s.trailingComments;delete s.trailingComments}}while(s&&s.range[0]>=this.range[0]){e=n.pop();s=n[n.length-1]}if(e){if(e.leadingComments){t=[];for(i=e.leadingComments.length-1;i>=0;--i){o=e.leadingComments[i];if(o.range[1]<=this.range[0]){t.unshift(o);e.leadingComments.splice(i,1)}}if(!e.leadingComments.length){e.leadingComments=undefined}}}else if(v.leadingComments.length>0){t=[];for(i=v.leadingComments.length-1;i>=0;--i){o=v.leadingComments[i];if(o.range[1]<=this.range[0]){t.unshift(o);v.leadingComments.splice(i,1)}}}if(t&&t.length>0){this.leadingComments=t}if(u&&u.length>0){this.trailingComments=u}n.push(this)},finish:function(){if(v.range){this.range[1]=h}if(v.loc){this.loc.end={line:m,column:h-d};if(v.source){this.loc.source=v.source}}if(v.attachComment){this.processComment()}},finishArrayExpression:function(e){this.type=r.ArrayExpression;this.elements=e;this.finish();return this},finishArrayPattern:function(e){this.type=r.ArrayPattern;this.elements=e;this.finish();return this},finishArrowFunctionExpression:function(e,t,u,n){this.type=r.ArrowFunctionExpression;this.id=null;this.params=e;this.defaults=t;this.body=u;this.generator=false;this.expression=n;this.finish();return this},finishAssignmentExpression:function(e,t,u){this.type=r.AssignmentExpression;this.operator=e;this.left=t;this.right=u;this.finish();return this},finishAssignmentPattern:function(e,t){this.type=r.AssignmentPattern;this.left=e;this.right=t;this.finish();return this},finishBinaryExpression:function(e,t,u){this.type=e==="||"||e==="&&"?r.LogicalExpression:r.BinaryExpression;this.operator=e;this.left=t;this.right=u;this.finish();return this},finishBlockStatement:function(e){this.type=r.BlockStatement;this.body=e;this.finish();return this},finishBreakStatement:function(e){this.type=r.BreakStatement;this.label=e;this.finish();return this},finishCallExpression:function(e,t){this.type=r.CallExpression;this.callee=e;this.arguments=t;this.finish();return this},finishCatchClause:function(e,t){this.type=r.CatchClause;this.param=e;this.body=t;this.finish();return this},finishClassBody:function(e){this.type=r.ClassBody;this.body=e;this.finish();return this},finishClassDeclaration:function(e,t,u){this.type=r.ClassDeclaration;this.id=e;this.superClass=t;this.body=u;this.finish();return this},finishClassExpression:function(e,t,u){this.type=r.ClassExpression;this.id=e;this.superClass=t;this.body=u;this.finish();return this},finishConditionalExpression:function(e,t,u){this.type=r.ConditionalExpression;this.test=e;this.consequent=t;this.alternate=u;this.finish();return this},finishContinueStatement:function(e){this.type=r.ContinueStatement;this.label=e;this.finish();return this},finishDebuggerStatement:function(){this.type=r.DebuggerStatement;this.finish();return this},finishDoWhileStatement:function(e,t){this.type=r.DoWhileStatement;this.body=e;this.test=t;this.finish();return this},finishEmptyStatement:function(){this.type=r.EmptyStatement;this.finish();return this},finishExpressionStatement:function(e){this.type=r.ExpressionStatement;this.expression=e;this.finish();return this},finishForStatement:function(e,t,u,n){this.type=r.ForStatement;this.init=e;this.test=t;this.update=u;this.body=n;this.finish();return this},finishForOfStatement:function(e,t,u){this.type=r.ForOfStatement;this.left=e;this.right=t;this.body=u;this.finish();return this},finishForInStatement:function(e,t,u){this.type=r.ForInStatement;this.left=e;this.right=t;this.body=u;this.each=false;this.finish();return this},finishFunctionDeclaration:function(e,t,u,n,i){this.type=r.FunctionDeclaration;this.id=e;this.params=t;this.defaults=u;this.body=n;this.generator=i;this.expression=false;this.finish();return this},finishFunctionExpression:function(e,t,u,n,i){this.type=r.FunctionExpression;this.id=e;this.params=t;this.defaults=u;this.body=n;this.generator=i;this.expression=false;this.finish();return this},finishIdentifier:function(e){this.type=r.Identifier;this.name=e;this.finish();return this},finishIfStatement:function(e,t,u){this.type=r.IfStatement;this.test=e;this.consequent=t;this.alternate=u;this.finish();return this},finishLabeledStatement:function(e,t){this.type=r.LabeledStatement;this.label=e;this.body=t;this.finish();return this},finishLiteral:function(e){this.type=r.Literal;this.value=e.value;this.raw=a.slice(e.start,e.end);if(e.regex){this.regex=e.regex}this.finish();return this},finishMemberExpression:function(e,t,u){this.type=r.MemberExpression;this.computed=e==="[";this.object=t;this.property=u;this.finish();return this},finishMetaProperty:function(e,t){this.type=r.MetaProperty;this.meta=e;this.property=t;this.finish();return this},finishNewExpression:function(e,t){this.type=r.NewExpression;this.callee=e;this.arguments=t;this.finish();return this},finishObjectExpression:function(e){this.type=r.ObjectExpression;this.properties=e;this.finish();return this},finishObjectPattern:function(e){this.type=r.ObjectPattern;this.properties=e;this.finish();return this},finishPostfixExpression:function(e,t){this.type=r.UpdateExpression;this.operator=e;this.argument=t;this.prefix=false;this.finish();return this},finishProgram:function(e,t){this.type=r.Program;this.body=e;this.sourceType=t;this.finish();return this},finishProperty:function(e,t,u,n,i,o){this.type=r.Property;this.key=t;this.computed=u;this.value=n;this.kind=e;this.method=i;this.shorthand=o;this.finish();return this},finishRestElement:function(e){this.type=r.RestElement;this.argument=e;this.finish();return this},finishReturnStatement:function(e){this.type=r.ReturnStatement;this.argument=e;this.finish();return this},finishSequenceExpression:function(e){this.type=r.SequenceExpression;this.expressions=e;this.finish();return this},finishSpreadElement:function(e){this.type=r.SpreadElement;this.argument=e;this.finish();return this},finishSwitchCase:function(e,t){this.type=r.SwitchCase;this.test=e;this.consequent=t;this.finish();return this},finishSuper:function(){this.type=r.Super;this.finish();return this},finishSwitchStatement:function(e,t){this.type=r.SwitchStatement;this.discriminant=e;this.cases=t;this.finish();return this},finishTaggedTemplateExpression:function(e,t){this.type=r.TaggedTemplateExpression;this.tag=e;this.quasi=t;this.finish();return this},finishTemplateElement:function(e,t){this.type=r.TemplateElement;this.value=e;this.tail=t;this.finish();return this},finishTemplateLiteral:function(e,t){this.type=r.TemplateLiteral;this.quasis=e;this.expressions=t;this.finish();return this},finishThisExpression:function(){this.type=r.ThisExpression;this.finish();return this},finishThrowStatement:function(e){this.type=r.ThrowStatement;this.argument=e;this.finish();return this},finishTryStatement:function(e,t,u){this.type=r.TryStatement;this.block=e;this.guardedHandlers=[];this.handlers=t?[t]:[];this.handler=t;this.finalizer=u;this.finish();return this},finishUnaryExpression:function(e,t){this.type=e==="++"||e==="--"?r.UpdateExpression:r.UnaryExpression;this.operator=e;this.argument=t;this.prefix=true;this.finish();return this},finishVariableDeclaration:function(e){this.type=r.VariableDeclaration;this.declarations=e;this.kind="var";this.finish();return this},finishLexicalDeclaration:function(e,t){this.type=r.VariableDeclaration;this.declarations=e;this.kind=t;this.finish();return this},finishVariableDeclarator:function(e,t){this.type=r.VariableDeclarator;this.id=e;this.init=t;this.finish();return this},finishWhileStatement:function(e,t){this.type=r.WhileStatement;this.test=e;this.body=t;this.finish();return this},finishWithStatement:function(e,t){this.type=r.WithStatement;this.object=e;this.body=t;this.finish();return this},finishExportSpecifier:function(e,t){this.type=r.ExportSpecifier;this.exported=t||e;this.local=e;this.finish();return this},finishImportDefaultSpecifier:function(e){this.type=r.ImportDefaultSpecifier;this.local=e;this.finish();return this},finishImportNamespaceSpecifier:function(e){this.type=r.ImportNamespaceSpecifier;this.local=e;this.finish();return this},finishExportNamedDeclaration:function(e,t,u){this.type=r.ExportNamedDeclaration;this.declaration=e;this.specifiers=t;this.source=u;this.finish();return this},finishExportDefaultDeclaration:function(e){this.type=r.ExportDefaultDeclaration;this.declaration=e;this.finish();return this},finishExportAllDeclaration:function(e){this.type=r.ExportAllDeclaration;this.source=e;this.finish();return this},finishImportSpecifier:function(e,t){this.type=r.ImportSpecifier;this.local=e||t;this.imported=t;this.finish();return this},finishImportDeclaration:function(e,t){this.type=r.ImportDeclaration;this.specifiers=e;this.source=t;this.finish();return this},finishYieldExpression:function(e,t){this.type=r.YieldExpression;this.argument=e;this.delegate=t;this.finish();return this}};function ye(e){var t,u;for(t=0;t<v.errors.length;t++){u=v.errors[t];if(u.index===e.index&&u.message===e.message){return}}v.errors.push(e)}function Be(e,t){var u=new Error(e);try{throw u}catch(n){if(Object.create&&Object.defineProperty){u=Object.create(n);Object.defineProperty(u,"column",{value:t})}}finally{return u}}function ve(e,t,u){var n,r,i;n="Line "+e+": "+u;r=t-(F?p:d)+1;i=Be(n,r);i.lineNumber=e;i.description=u;i.index=t;return i}function be(e){var t,u;t=Array.prototype.slice.call(arguments,1);u=e.replace(/%(\d)/g,function(e,u){w(u<t.length,"Message reference must be in range");return t[u]});throw ve(m,h,u)}function Se(e){var t,u,n;t=Array.prototype.slice.call(arguments,1);u=e.replace(/%(\d)/g,function(e,u){w(u<t.length,"Message reference must be in range");return t[u]});n=ve(c,h,u);if(v.errors){ye(n)}else{throw n}}function xe(e,u){var n,r=u||o.UnexpectedToken;if(e){if(!u){r=e.type===t.EOF?o.UnexpectedEOS:e.type===t.Identifier?o.UnexpectedIdentifier:e.type===t.NumericLiteral?o.UnexpectedNumber:e.type===t.StringLiteral?o.UnexpectedString:e.type===t.Template?o.UnexpectedTemplate:o.UnexpectedToken;if(e.type===t.Keyword){if(T(e.value)){r=o.UnexpectedReserved}else if(l&&N(e.value)){r=o.StrictReservedWord}}}n=e.type===t.Template?e.value.raw:e.value}else{n="ILLEGAL"}r=r.replace("%0",n);return e&&typeof e.lineNumber==="number"?ve(e.lineNumber,e.start,r):ve(F?c:m,F?f:h,r)}function we(e,t){throw xe(e,t)}function _e(e,t){var u=xe(e,t);if(v.errors){ye(u)}else{throw u}}function ke(e){var u=me();if(u.type!==t.Punctuator||u.value!==e){we(u)}}function Ie(){var e;if(v.errors){e=y;if(e.type===t.Punctuator&&e.value===","){me()}else if(e.type===t.Punctuator&&e.value===";"){me();_e(e)}else{_e(e,o.UnexpectedToken)}}else{ke(",")}}function Pe(e){var u=me();if(u.type!==t.Keyword||u.value!==e){we(u)}}function Le(e){return y.type===t.Punctuator&&y.value===e}function Oe(e){return y.type===t.Keyword&&y.value===e}function je(e){return y.type===t.Identifier&&y.value===e}function Me(){var e;if(y.type!==t.Punctuator){return false}e=y.value;return e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|="}function Re(){if(a.charCodeAt(A)===59||Le(";")){me();return}if(D){return}h=A;m=C;d=E;if(y.type!==t.EOF&&!Le("}")){we(y)}}function Te(e){var t=b,u=S,n=x,r;b=true;S=true;x=null;r=e();if(x!==null){we(x)}b=t;S=u;x=n;return r}function Ne(e){var t=b,u=S,n=x,r;b=true;S=true;x=null;r=e();b=b&&t;S=S&&u;x=n||x;return r}function qe(e,t){var u=new Fe,n=[],r,i;ke("[");while(!Le("]")){if(Le(",")){me();n.push(null)}else{if(Le("...")){i=new Fe;me();e.push(y);r=St(e,t);n.push(i.finishRestElement(r));break}else{n.push(Ve(e,t))}if(!Le("]")){ke(",")}}}ke("]");return u.finishArrayPattern(n)}function Ue(e,u){var n=new Fe,r,i,o=Le("["),s;if(y.type===t.Identifier){i=y;r=St();if(Le("=")){e.push(i);me();s=gt();return n.finishProperty("init",r,false,new ge(i).finishAssignmentPattern(r,s),false,false)}else if(!Le(":")){e.push(i);return n.finishProperty("init",r,false,r,false,true)}}else{r=$e(e,u)}ke(":");s=Ve(e,u);return n.finishProperty("init",r,o,s,false,false)}function ze(e,t){var u=new Fe,n=[];ke("{");while(!Le("}")){n.push(Ue(e,t));if(!Le("}")){ke(",")}}me();return u.finishObjectPattern(n)}function We(e,t){if(Le("[")){return qe(e,t)}else if(Le("{")){return ze(e,t)}e.push(y);return St(t)}function Ve(e,t){var u=y,n,r,i;n=We(e,t);if(Le("=")){me();r=B.allowYield;B.allowYield=true;i=Te(gt);B.allowYield=r;n=new ge(u).finishAssignmentPattern(n,i)}return n}function Ye(){var e=[],t=new Fe,u;ke("[");while(!Le("]")){if(Le(",")){me();e.push(null)}else if(Le("...")){u=new Fe;me();u.finishSpreadElement(Ne(gt));if(!Le("]")){S=b=false;ke(",")}e.push(u)}else{e.push(Ne(gt));if(!Le("]")){ke(",")}}}me();return t.finishArrayExpression(e)}function Ge(e,t,u){var n,r;S=b=false;n=l;r=Te(Xt);if(l&&t.firstRestricted){_e(t.firstRestricted,t.message)}if(l&&t.stricted){_e(t.stricted,t.message)}l=n;return e.finishFunctionExpression(null,t.params,t.defaults,r,u)}function Ke(){var e,t,u=new Fe,n=B.allowYield;B.allowYield=false;e=eu();B.allowYield=n;B.allowYield=false;t=Ge(u,e,false);B.allowYield=n;return t}function $e(){var e,u=new Fe,n;e=me();switch(e.type){case t.StringLiteral:case t.NumericLiteral:if(l&&e.octal){_e(e,o.StrictOctalLiteral)}return u.finishLiteral(e);case t.Identifier:case t.BooleanLiteral:case t.NullLiteral:case t.Keyword:return u.finishIdentifier(e.value);case t.Punctuator:if(e.value==="["){n=Te(gt);ke("]");return n}break}we(e)}function He(){switch(y.type){case t.Identifier:case t.StringLiteral:case t.BooleanLiteral:case t.NullLiteral:case t.NumericLiteral:case t.Keyword:return true;case t.Punctuator:return y.value==="["}return false}function Je(e,u,n,r){var i,o,s,a,l=B.allowYield;if(e.type===t.Identifier){if(e.value==="get"&&He()){n=Le("[");u=$e();s=new Fe;ke("(");ke(")");B.allowYield=false;i=Ge(s,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null},false);B.allowYield=l;return r.finishProperty("get",u,n,i,false,false)}else if(e.value==="set"&&He()){n=Le("[");u=$e();s=new Fe;ke("(");o={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}};if(Le(")")){_e(y)}else{B.allowYield=false;Qt(o);B.allowYield=l;if(o.defaultCount===0){o.defaults=[]}}ke(")");B.allowYield=false;i=Ge(s,o,false);B.allowYield=l;return r.finishProperty("set",u,n,i,false,false)}}else if(e.type===t.Punctuator&&e.value==="*"&&He()){n=Le("[");u=$e();s=new Fe;B.allowYield=true;a=eu();B.allowYield=l;B.allowYield=false;i=Ge(s,a,true);B.allowYield=l;return r.finishProperty("init",u,n,i,true,false)}if(u&&Le("(")){i=Ke();return r.finishProperty("init",u,n,i,true,false)}return null}function Xe(e){var u=y,n=new Fe,i,s,a,l,f;i=Le("[");if(Le("*")){me()}else{s=$e()}a=Je(u,s,i,n);if(a){return a}if(!s){we(y)}if(!i){l=s.type===r.Identifier&&s.name==="__proto__"||s.type===r.Literal&&s.value==="__proto__";if(e.value&&l){Se(o.DuplicateProtoProperty)}e.value|=l}if(Le(":")){me();f=Ne(gt);return n.finishProperty("init",s,i,f,false,false)}if(u.type===t.Identifier){if(Le("=")){x=y;me();f=Te(gt);return n.finishProperty("init",s,i,new ge(u).finishAssignmentPattern(s,f),false,true)}return n.finishProperty("init",s,i,s,false,true)}we(y)}function Ze(){var e=[],t={value:false},u=new Fe;ke("{");while(!Le("}")){e.push(Xe(t));if(!Le("}")){Ie()}}ke("}");return u.finishObjectExpression(e)}function Qe(e){var t;switch(e.type){case r.Identifier:case r.MemberExpression:case r.RestElement:case r.AssignmentPattern:break;case r.SpreadElement:e.type=r.RestElement;Qe(e.argument);break;case r.ArrayExpression:e.type=r.ArrayPattern;for(t=0;t<e.elements.length;t++){if(e.elements[t]!==null){Qe(e.elements[t])}}break;case r.ObjectExpression:e.type=r.ObjectPattern;for(t=0;t<e.properties.length;t++){Qe(e.properties[t].value)}break;case r.AssignmentExpression:e.type=r.AssignmentPattern;Qe(e.left);break;default:break}}function et(e){var u,n;if(y.type!==t.Template||e.head&&!y.head){we()}u=new Fe;n=me();return u.finishTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail)}function tt(){var e,t,u,n=new Fe;e=et({head:true});t=[e];u=[];while(!e.tail){u.push(yt());e=et({head:false});t.push(e)}return n.finishTemplateLiteral(t,u)}function ut(){var e,t,u,n,o=[];ke("(");if(Le(")")){me();if(!Le("=>")){ke("=>")}return{type:i.ArrowParameterPlaceHolder,params:[],rawParams:[]}}u=y;if(Le("...")){e=Lt(o);ke(")");if(!Le("=>")){ke("=>")}return{type:i.ArrowParameterPlaceHolder,params:[e]}}b=true;e=Ne(gt);if(Le(",")){S=false;t=[e];while(A<g){if(!Le(",")){break}me();if(Le("...")){if(!b){we(y)}t.push(Lt(o));ke(")");if(!Le("=>")){ke("=>")}b=false;for(n=0;n<t.length;n++){Qe(t[n])}return{type:i.ArrowParameterPlaceHolder,params:t}}t.push(Ne(gt))}e=new ge(u).finishSequenceExpression(t)}ke(")");if(Le("=>")){if(e.type===r.Identifier&&e.name==="yield"){return{type:i.ArrowParameterPlaceHolder,params:[e]}}if(!b){we(y)}if(e.type===r.SequenceExpression){for(n=0;n<e.expressions.length;n++){Qe(e.expressions[n])}}else{Qe(e)}e={type:i.ArrowParameterPlaceHolder,params:e.type===r.SequenceExpression?e.expressions:[e]}}b=false;return e}function nt(){var e,u,n,r;if(Le("(")){b=false;return Ne(ut)}if(Le("[")){return Ne(Ye)}if(Le("{")){return Ne(Ze)}e=y.type;r=new Fe;if(e===t.Identifier){if(B.sourceType==="module"&&y.value==="await"){_e(y)}n=r.finishIdentifier(me().value)}else if(e===t.StringLiteral||e===t.NumericLiteral){S=b=false;if(l&&y.octal){_e(y,o.StrictOctalLiteral)}n=r.finishLiteral(me())}else if(e===t.Keyword){if(!l&&B.allowYield&&Oe("yield")){return it()}S=b=false;if(Oe("function")){return uu()}if(Oe("this")){me();return r.finishThisExpression()}if(Oe("class")){return iu()}we(me())}else if(e===t.BooleanLiteral){S=b=false;u=me();u.value=u.value==="true";n=r.finishLiteral(u)}else if(e===t.NullLiteral){S=b=false;u=me();u.value=null;n=r.finishLiteral(u)}else if(Le("/")||Le("/=")){S=b=false;f=A;if(typeof v.tokens!=="undefined"){u=fe()}else{u=le()}me();n=r.finishLiteral(u)}else if(e===t.Template){n=tt()}else{we(me())}return n}function rt(){var e=[],t;ke("(");if(!Le(")")){while(A<g){if(Le("...")){t=new Fe;me();t.finishSpreadElement(Te(gt))}else{t=Te(gt)}e.push(t);if(Le(")")){break}Ie()}}ke(")");return e}function it(){var e,t=new Fe;e=me();if(!ce(e)){we(e)}return t.finishIdentifier(e.value)}function ot(){ke(".");return it()}function st(){var e;ke("[");e=Te(yt);ke("]");return e}function at(){var e,u,n=new Fe;Pe("new");if(Le(".")){me();if(y.type===t.Identifier&&y.value==="target"){if(B.inFunctionBody){me();return n.finishMetaProperty("new","target")}}we(y)}e=Te(ft);u=Le("(")?rt():[];S=b=false;return n.finishNewExpression(e,u)}function lt(){var e,u,n,r,i,o=B.allowIn;i=y;B.allowIn=true;if(Oe("super")&&B.inFunctionBody){u=new Fe;me();u=u.finishSuper();if(!Le("(")&&!Le(".")&&!Le("[")){we(y)}}else{u=Ne(Oe("new")?at:nt)}for(;;){if(Le(".")){b=false;S=true;r=ot();u=new ge(i).finishMemberExpression(".",u,r)}else if(Le("(")){b=false;S=false;n=rt();u=new ge(i).finishCallExpression(u,n);
}else if(Le("[")){b=false;S=true;r=st();u=new ge(i).finishMemberExpression("[",u,r)}else if(y.type===t.Template&&y.head){e=tt();u=new ge(i).finishTaggedTemplateExpression(u,e)}else{break}}B.allowIn=o;return u}function ft(){var e,u,n,r;w(B.allowIn,"callee of new expression always allow in keyword.");r=y;if(Oe("super")&&B.inFunctionBody){u=new Fe;me();u=u.finishSuper();if(!Le("[")&&!Le(".")){we(y)}}else{u=Ne(Oe("new")?at:nt)}for(;;){if(Le("[")){b=false;S=true;n=st();u=new ge(r).finishMemberExpression("[",u,n)}else if(Le(".")){b=false;S=true;n=ot();u=new ge(r).finishMemberExpression(".",u,n)}else if(y.type===t.Template&&y.head){e=tt();u=new ge(r).finishTaggedTemplateExpression(u,e)}else{break}}return u}function ct(){var e,u,n=y;e=Ne(lt);if(!D&&y.type===t.Punctuator){if(Le("++")||Le("--")){if(l&&e.type===r.Identifier&&q(e.name)){Se(o.StrictLHSPostfix)}if(!S){Se(o.InvalidLHSInAssignment)}S=b=false;u=me();e=new ge(n).finishPostfixExpression(u.value,e)}}return e}function pt(){var e,u,n;if(y.type!==t.Punctuator&&y.type!==t.Keyword){u=ct()}else if(Le("++")||Le("--")){n=y;e=me();u=Ne(pt);if(l&&u.type===r.Identifier&&q(u.name)){Se(o.StrictLHSPrefix)}if(!S){Se(o.InvalidLHSInAssignment)}u=new ge(n).finishUnaryExpression(e.value,u);S=b=false}else if(Le("+")||Le("-")||Le("~")||Le("!")){n=y;e=me();u=Ne(pt);u=new ge(n).finishUnaryExpression(e.value,u);S=b=false}else if(Oe("delete")||Oe("void")||Oe("typeof")){n=y;e=me();u=Ne(pt);u=new ge(n).finishUnaryExpression(e.value,u);if(l&&u.operator==="delete"&&u.argument.type===r.Identifier){Se(o.StrictDelete)}S=b=false}else{u=ct()}return u}function Dt(e,u){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword){return 0}switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=u?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11;break;default:break}return n}function ht(){var e,t,u,n,r,i,o,s,a,l;e=y;a=Ne(pt);n=y;r=Dt(n,B.allowIn);if(r===0){return a}S=b=false;n.prec=r;me();t=[e,y];o=Te(pt);i=[a,n,o];while((r=Dt(y,B.allowIn))>0){while(i.length>2&&r<=i[i.length-2].prec){o=i.pop();s=i.pop().value;a=i.pop();t.pop();u=new ge(t[t.length-1]).finishBinaryExpression(s,a,o);i.push(u)}n=me();n.prec=r;i.push(n);t.push(y);u=Te(pt);i.push(u)}l=i.length-1;u=i[l];t.pop();while(l>1){u=new ge(t.pop()).finishBinaryExpression(i[l-1].value,i[l-2],u);l-=2}return u}function mt(){var e,t,u,n,r;r=y;e=Ne(ht);if(Le("?")){me();t=B.allowIn;B.allowIn=true;u=Te(gt);B.allowIn=t;ke(":");n=Te(gt);e=new ge(r).finishConditionalExpression(e,u,n);S=b=false}return e}function dt(){if(Le("{")){return Xt()}return Te(gt)}function At(e,t){var u;switch(t.type){case r.Identifier:Zt(e,t,t.name);break;case r.RestElement:At(e,t.argument);break;case r.AssignmentPattern:At(e,t.left);break;case r.ArrayPattern:for(u=0;u<t.elements.length;u++){if(t.elements[u]!==null){At(e,t.elements[u])}}break;case r.YieldExpression:break;default:w(t.type===r.ObjectPattern,"Invalid type");for(u=0;u<t.properties.length;u++){At(e,t.properties[u].value)}break}}function Ct(e){var t,u,n,s,a,f,c,p;a=[];f=0;s=[e];switch(e.type){case r.Identifier:break;case i.ArrowParameterPlaceHolder:s=e.params;break;default:return null}c={paramSet:{}};for(t=0,u=s.length;t<u;t+=1){n=s[t];switch(n.type){case r.AssignmentPattern:s[t]=n.left;if(n.right.type===r.YieldExpression){if(n.right.argument){we(y)}n.right.type=r.Identifier;n.right.name="yield";delete n.right.argument;delete n.right.delegate}a.push(n.right);++f;At(c,n.left);break;default:At(c,n);s[t]=n;a.push(null);break}}if(l||!B.allowYield){for(t=0,u=s.length;t<u;t+=1){n=s[t];if(n.type===r.YieldExpression){we(y)}}}if(c.message===o.StrictParamDupe){p=l?c.stricted:c.firstRestricted;we(p,c.message)}if(f===0){a=[]}return{params:s,defaults:a,stricted:c.stricted,firstRestricted:c.firstRestricted,message:c.message}}function Et(e,t){var u,n,i;if(D){_e(y)}ke("=>");u=l;n=B.allowYield;B.allowYield=true;i=dt();if(l&&e.firstRestricted){we(e.firstRestricted,e.message)}if(l&&e.stricted){_e(e.stricted,e.message)}l=u;B.allowYield=n;return t.finishArrowFunctionExpression(e.params,e.defaults,i,i.type!==r.BlockStatement)}function Ft(){var e,u,n,r;e=null;u=new Fe;Pe("yield");if(!D){r=B.allowYield;B.allowYield=false;n=Le("*");if(n){me();e=gt()}else{if(!Le(";")&&!Le("}")&&!Le(")")&&y.type!==t.EOF){e=gt()}}B.allowYield=r}return u.finishYieldExpression(e,n)}function gt(){var e,t,u,n,s;s=y;e=y;if(!B.allowYield&&Oe("yield")){return Ft()}t=mt();if(t.type===i.ArrowParameterPlaceHolder||Le("=>")){S=b=false;n=Ct(t);if(n){x=null;return Et(n,new ge(s))}return t}if(Me()){if(!S){Se(o.InvalidLHSInAssignment)}if(l&&t.type===r.Identifier){if(q(t.name)){_e(e,o.StrictLHSAssignment)}if(N(t.name)){_e(e,o.StrictReservedWord)}}if(!Le("=")){S=b=false}else{Qe(t)}e=me();u=Te(gt);t=new ge(s).finishAssignmentExpression(e.value,t,u);x=null}return t}function yt(){var e,t=y,u;e=Te(gt);if(Le(",")){u=[e];while(A<g){if(!Le(",")){break}me();u.push(Te(gt))}e=new ge(t).finishSequenceExpression(u)}return e}function Bt(){if(y.type===t.Keyword){switch(y.value){case"export":if(B.sourceType!=="module"){_e(y,o.IllegalExportDeclaration)}return cu();case"import":if(B.sourceType!=="module"){_e(y,o.IllegalImportDeclaration)}return du();case"const":case"let":return Pt({inFor:false});case"function":return tu(new Fe);case"class":return ru()}}return Jt()}function vt(){var e=[];while(A<g){if(Le("}")){break}e.push(Bt())}return e}function bt(){var e,t=new Fe;ke("{");e=vt();ke("}");return t.finishBlockStatement(e)}function St(e){var u,n=new Fe;u=me();if(u.type===t.Keyword&&u.value==="yield"){if(l){_e(u,o.StrictReservedWord)}if(!B.allowYield){we(u)}}else if(u.type!==t.Identifier){if(l&&u.type===t.Keyword&&N(u.value)){_e(u,o.StrictReservedWord)}else{if(l||u.value!=="let"||e!=="var"){we(u)}}}else if(B.sourceType==="module"&&u.type===t.Identifier&&u.value==="await"){_e(u)}return n.finishIdentifier(u.value)}function xt(e){var t=null,u,n=new Fe,i=[];u=We(i,"var");if(l&&q(u.name)){Se(o.StrictVarName)}if(Le("=")){me();t=Te(gt)}else if(u.type!==r.Identifier&&!e.inFor){ke("=")}return n.finishVariableDeclarator(u,t)}function wt(e){var t=[];do{t.push(xt({inFor:e.inFor}));if(!Le(",")){break}me()}while(A<g);return t}function _t(e){var t;Pe("var");t=wt({inFor:false});Re();return e.finishVariableDeclaration(t)}function kt(e,t){var u=null,n,i=new Fe,s=[];n=We(s,e);if(l&&n.type===r.Identifier&&q(n.name)){Se(o.StrictVarName)}if(e==="const"){if(!Oe("in")&&!je("of")){ke("=");u=Te(gt)}}else if(!t.inFor&&n.type!==r.Identifier||Le("=")){ke("=");u=Te(gt)}return i.finishVariableDeclarator(n,u)}function It(e,t){var u=[];do{u.push(kt(e,t));if(!Le(",")){break}me()}while(A<g);return u}function Pt(e){var t,u,n=new Fe;t=me().value;w(t==="let"||t==="const","Lexical declaration must be either let or const");u=It(t,e);Re();return n.finishLexicalDeclaration(u,t)}function Lt(e){var t,u=new Fe;me();if(Le("{")){be(o.ObjectPatternAsRestParameter)}e.push(y);t=St();if(Le("=")){be(o.DefaultRestParameter)}if(!Le(")")){be(o.ParameterAfterRestParameter)}return u.finishRestElement(t)}function Ot(e){ke(";");return e.finishEmptyStatement()}function jt(e){var t=yt();Re();return e.finishExpressionStatement(t)}function Mt(e){var t,u,n;Pe("if");ke("(");t=yt();ke(")");u=Jt();if(Oe("else")){me();n=Jt()}else{n=null}return e.finishIfStatement(t,u,n)}function Rt(e){var t,u,n;Pe("do");n=B.inIteration;B.inIteration=true;t=Jt();B.inIteration=n;Pe("while");ke("(");u=yt();ke(")");if(Le(";")){me()}return e.finishDoWhileStatement(t,u)}function Tt(e){var t,u,n;Pe("while");ke("(");t=yt();ke(")");n=B.inIteration;B.inIteration=true;u=Jt();B.inIteration=n;return e.finishWhileStatement(t,u)}function Nt(e){var t,u,n,r,i,s,a,l,f,c,p,D,h=B.allowIn;t=i=s=null;u=true;Pe("for");ke("(");if(Le(";")){me()}else{if(Oe("var")){t=new Fe;me();B.allowIn=false;c=wt({inFor:true});B.allowIn=h;if(c.length===1&&Oe("in")){t=t.finishVariableDeclaration(c);me();a=t;l=yt();t=null}else if(c.length===1&&c[0].init===null&&je("of")){t=t.finishVariableDeclaration(c);me();a=t;l=gt();t=null;u=false}else{t=t.finishVariableDeclaration(c);ke(";")}}else if(Oe("const")||Oe("let")){t=new Fe;f=me().value;B.allowIn=false;c=It(f,{inFor:true});B.allowIn=h;if(c.length===1&&c[0].init===null&&Oe("in")){t=t.finishLexicalDeclaration(c,f);me();a=t;l=yt();t=null}else if(c.length===1&&c[0].init===null&&je("of")){t=t.finishLexicalDeclaration(c,f);me();a=t;l=gt();t=null;u=false}else{Re();t=t.finishLexicalDeclaration(c,f)}}else{r=y;B.allowIn=false;t=Ne(gt);B.allowIn=h;if(Oe("in")){if(!S){Se(o.InvalidLHSInForIn)}me();Qe(t);a=t;l=yt();t=null}else if(je("of")){if(!S){Se(o.InvalidLHSInForLoop)}me();Qe(t);a=t;l=gt();t=null;u=false}else{if(Le(",")){n=[t];while(Le(",")){me();n.push(Te(gt))}t=new ge(r).finishSequenceExpression(n)}ke(";")}}}if(typeof a==="undefined"){if(!Le(";")){i=yt()}ke(";");if(!Le(")")){s=yt()}}ke(")");D=B.inIteration;B.inIteration=true;p=Te(Jt);B.inIteration=D;return typeof a==="undefined"?e.finishForStatement(t,i,s,p):u?e.finishForInStatement(a,l,p):e.finishForOfStatement(a,l,p)}function qt(e){var u=null,n;Pe("continue");if(a.charCodeAt(A)===59){me();if(!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(null)}if(D){if(!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(null)}if(y.type===t.Identifier){u=St();n="$"+u.name;if(!Object.prototype.hasOwnProperty.call(B.labelSet,n)){be(o.UnknownLabel,u.name)}}Re();if(u===null&&!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(u)}function Ut(e){var u=null,n;Pe("break");if(a.charCodeAt(h)===59){me();if(!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(null)}if(D){if(!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(null)}if(y.type===t.Identifier){u=St();n="$"+u.name;if(!Object.prototype.hasOwnProperty.call(B.labelSet,n)){be(o.UnknownLabel,u.name)}}Re();if(u===null&&!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(u)}function zt(e){var u=null;Pe("return");if(!B.inFunctionBody){Se(o.IllegalReturn)}if(a.charCodeAt(h)===32){if(M(a.charCodeAt(h+1))){u=yt();Re();return e.finishReturnStatement(u)}}if(D){return e.finishReturnStatement(null)}if(!Le(";")){if(!Le("}")&&y.type!==t.EOF){u=yt()}}Re();return e.finishReturnStatement(u)}function Wt(e){var t,u;if(l){Se(o.StrictModeWith)}Pe("with");ke("(");t=yt();ke(")");u=Jt();return e.finishWithStatement(t,u)}function Vt(){var e,t=[],u,n=new Fe;if(Oe("default")){me();e=null}else{Pe("case");e=yt()}ke(":");while(A<g){if(Le("}")||Oe("default")||Oe("case")){break}u=Bt();t.push(u)}return n.finishSwitchCase(e,t)}function Yt(e){var t,u,n,r,i;Pe("switch");ke("(");t=yt();ke(")");ke("{");u=[];if(Le("}")){me();return e.finishSwitchStatement(t,u)}r=B.inSwitch;B.inSwitch=true;i=false;while(A<g){if(Le("}")){break}n=Vt();if(n.test===null){if(i){be(o.MultipleDefaultsInSwitch)}i=true}u.push(n)}B.inSwitch=r;ke("}");return e.finishSwitchStatement(t,u)}function Gt(e){var t;Pe("throw");if(D){be(o.NewlineAfterThrow)}t=yt();Re();return e.finishThrowStatement(t)}function Kt(){var e,t=[],u={},n,r,i,s=new Fe;Pe("catch");ke("(");if(Le(")")){we(y)}e=We(t);for(r=0;r<t.length;r++){n="$"+t[r].value;if(Object.prototype.hasOwnProperty.call(u,n)){Se(o.DuplicateBinding,t[r].value)}u[n]=true}if(l&&q(e.name)){Se(o.StrictCatchVariable)}ke(")");i=bt();return s.finishCatchClause(e,i)}function $t(e){var t,u=null,n=null;Pe("try");t=bt();if(Oe("catch")){u=Kt()}if(Oe("finally")){me();n=bt()}if(!u&&!n){be(o.NoCatchOrFinally)}return e.finishTryStatement(t,u,n)}function Ht(e){Pe("debugger");Re();return e.finishDebuggerStatement()}function Jt(){var e=y.type,u,n,i,s;if(e===t.EOF){we(y)}if(e===t.Punctuator&&y.value==="{"){return bt()}S=b=true;s=new Fe;if(e===t.Punctuator){switch(y.value){case";":return Ot(s);case"(":return jt(s);default:break}}else if(e===t.Keyword){switch(y.value){case"break":return Ut(s);case"continue":return qt(s);case"debugger":return Ht(s);case"do":return Rt(s);case"for":return Nt(s);case"function":return tu(s);case"if":return Mt(s);case"return":return zt(s);case"switch":return Yt(s);case"throw":return Gt(s);case"try":return $t(s);case"var":return _t(s);case"while":return Tt(s);case"with":return Wt(s);default:break}}u=yt();if(u.type===r.Identifier&&Le(":")){me();i="$"+u.name;if(Object.prototype.hasOwnProperty.call(B.labelSet,i)){be(o.Redeclaration,"Label",u.name)}B.labelSet[i]=true;n=Jt();delete B.labelSet[i];return s.finishLabeledStatement(u,n)}Re();return s.finishExpressionStatement(u)}function Xt(){var e,u=[],n,i,s,f,c,p,D,h,m=new Fe;ke("{");while(A<g){if(y.type!==t.StringLiteral){break}n=y;e=Bt();u.push(e);if(e.expression.type!==r.Literal){break}i=a.slice(n.start+1,n.end-1);if(i==="use strict"){l=true;if(s){_e(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}f=B.labelSet;c=B.inIteration;p=B.inSwitch;D=B.inFunctionBody;h=B.parenthesizedCount;B.labelSet={};B.inIteration=false;B.inSwitch=false;B.inFunctionBody=true;B.parenthesizedCount=0;while(A<g){if(Le("}")){break}u.push(Bt())}ke("}");B.labelSet=f;B.inIteration=c;B.inSwitch=p;B.inFunctionBody=D;B.parenthesizedCount=h;return m.finishBlockStatement(u)}function Zt(e,t,u){var n="$"+u;if(l){if(q(u)){e.stricted=t;e.message=o.StrictParamName}if(Object.prototype.hasOwnProperty.call(e.paramSet,n)){e.stricted=t;e.message=o.StrictParamDupe}}else if(!e.firstRestricted){if(q(u)){e.firstRestricted=t;e.message=o.StrictParamName}else if(N(u)){e.firstRestricted=t;e.message=o.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(e.paramSet,n)){e.stricted=t;e.message=o.StrictParamDupe}}e.paramSet[n]=true}function Qt(e){var t,u,n=[],i,o;t=y;if(t.value==="..."){u=Lt(n);Zt(e,u.argument,u.argument.name);e.params.push(u);e.defaults.push(null);return false}u=Ve(n);for(i=0;i<n.length;i++){Zt(e,n[i],n[i].value)}if(u.type===r.AssignmentPattern){o=u.right;u=u.left;++e.defaultCount}e.params.push(u);e.defaults.push(o);return!Le(")")}function eu(e){var t;t={params:[],defaultCount:0,defaults:[],firstRestricted:e};ke("(");if(!Le(")")){t.paramSet={};while(A<g){if(!Qt(t)){break}ke(",")}}ke(")");if(t.defaultCount===0){t.defaults=[]}return{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function tu(e,t){var u=null,n=[],r=[],i,s,a,f,c,p,D,h,m;m=B.allowYield;Pe("function");h=Le("*");if(h){me()}if(!t||!Le("(")){s=y;u=St();if(l){if(q(s.value)){_e(s,o.StrictFunctionName)}}else{if(q(s.value)){c=s;p=o.StrictFunctionName}else if(N(s.value)){c=s;p=o.StrictReservedWord}}}B.allowYield=!h;f=eu(c);n=f.params;r=f.defaults;a=f.stricted;c=f.firstRestricted;if(f.message){p=f.message}D=l;i=Xt();if(l&&c){we(c,p)}if(l&&a){_e(a,p)}l=D;B.allowYield=m;return e.finishFunctionDeclaration(u,n,r,i,h)}function uu(){var e,t=null,u,n,r,i,s=[],a=[],f,c,p=new Fe,D,h;h=B.allowYield;Pe("function");D=Le("*");if(D){me()}B.allowYield=!D;if(!Le("(")){e=y;t=!l&&!D&&Oe("yield")?it():St();if(l){if(q(e.value)){_e(e,o.StrictFunctionName)}}else{if(q(e.value)){n=e;r=o.StrictFunctionName}else if(N(e.value)){n=e;r=o.StrictReservedWord}}}i=eu(n);s=i.params;a=i.defaults;u=i.stricted;n=i.firstRestricted;if(i.message){r=i.message}c=l;f=Xt();if(l&&n){we(n,r)}if(l&&u){_e(u,r)}l=c;B.allowYield=h;return p.finishFunctionExpression(t,s,a,f,D)}function nu(){var e,t,u,n=false,i,s,a,l;e=new Fe;ke("{");i=[];while(!Le("}")){if(Le(";")){me()}else{s=new Fe;t=y;u=false;a=Le("[");if(Le("*")){me()}else{l=$e();if(l.name==="static"&&(He()||Le("*"))){t=y;u=true;a=Le("[");if(Le("*")){me()}else{l=$e()}}}s=Je(t,l,a,s);if(s){s["static"]=u;if(s.kind==="init"){s.kind="method"}if(!u){if(!s.computed&&(s.key.name||s.key.value.toString())==="constructor"){if(s.kind!=="method"||!s.method||s.value.generator){we(t,o.ConstructorSpecialMethod)}if(n){we(t,o.DuplicateConstructor)}else{n=true}s.kind="constructor"}}else{if(!s.computed&&(s.key.name||s.key.value.toString())==="prototype"){we(t,o.StaticPrototype)}}s.type=r.MethodDefinition;delete s.method;delete s.shorthand;i.push(s)}else{we(y)}}}me();return e.finishClassBody(i)}function ru(e){var u=null,n=null,r=new Fe,i,o=l;l=true;Pe("class");if(!e||y.type===t.Identifier){u=St()}if(Oe("extends")){me();n=Te(lt)}i=nu();l=o;return r.finishClassDeclaration(u,n,i)}function iu(){var e=null,u=null,n=new Fe,r,i=l;l=true;Pe("class");if(y.type===t.Identifier){e=St()}if(Oe("extends")){me();u=Te(lt)}r=nu();l=i;return n.finishClassExpression(e,u,r)}function ou(){var e=new Fe;if(y.type!==t.StringLiteral){be(o.InvalidModuleSpecifier)}return e.finishLiteral(me())}function su(){var e,t,u=new Fe,n;if(Oe("default")){n=new Fe;me();t=n.finishIdentifier("default")}else{t=St()}if(je("as")){me();e=it()}return u.finishExportSpecifier(t,e)}function au(e){var u=null,n,r=null,i=[];if(y.type===t.Keyword){switch(y.value){case"let":case"const":case"var":case"class":case"function":u=Bt();return e.finishExportNamedDeclaration(u,i,null)}}ke("{");while(!Le("}")){n=n||Oe("default");i.push(su());if(!Le("}")){ke(",");if(Le("}")){break}}}ke("}");if(je("from")){me();r=ou();Re()}else if(n){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}else{Re()}return e.finishExportNamedDeclaration(u,i,r)}function lu(e){var t=null,u=null;Pe("default");if(Oe("function")){t=tu(new Fe,true);return e.finishExportDefaultDeclaration(t)}if(Oe("class")){t=ru(true);return e.finishExportDefaultDeclaration(t)}if(je("from")){be(o.UnexpectedToken,y.value)}if(Le("{")){u=Ze()}else if(Le("[")){u=Ye()}else{u=gt()}Re();return e.finishExportDefaultDeclaration(u)}function fu(e){var t;ke("*");if(!je("from")){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}me();t=ou();Re();return e.finishExportAllDeclaration(t)}function cu(){var e=new Fe;if(B.inFunctionBody){be(o.IllegalExportDeclaration)}Pe("export");if(Oe("default")){return lu(e)}if(Le("*")){return fu(e)}return au(e)}function pu(){var e,t,u=new Fe;t=it();if(je("as")){me();e=St()}return u.finishImportSpecifier(e,t)}function Du(){var e=[];ke("{");while(!Le("}")){e.push(pu());if(!Le("}")){ke(",");if(Le("}")){break}}}ke("}");return e}function hu(){var e,t=new Fe;e=it();return t.finishImportDefaultSpecifier(e)}function mu(){var e,t=new Fe;ke("*");if(!je("as")){be(o.NoAsAfterImportNamespace)}me();e=it();return t.finishImportNamespaceSpecifier(e)}function du(){var e=[],u,n=new Fe;if(B.inFunctionBody){be(o.IllegalImportDeclaration)}Pe("import");if(y.type===t.StringLiteral){u=ou()}else{if(Le("{")){e=e.concat(Du())}else if(Le("*")){e.push(mu())}else if(ce(y)&&!Oe("default")){e.push(hu());if(Le(",")){me();if(Le("*")){e.push(mu())}else if(Le("{")){e=e.concat(Du())}else{we(y)}}}else{we(me())}if(!je("from")){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}me();u=ou()}Re();return n.finishImportDeclaration(e,u)}function Au(){var e,u=[],n,i,s;while(A<g){n=y;if(n.type!==t.StringLiteral){break}e=Bt();u.push(e);if(e.expression.type!==r.Literal){break}i=a.slice(n.start+1,n.end-1);if(i==="use strict"){l=true;if(s){_e(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}while(A<g){e=Bt();if(typeof e==="undefined"){break}u.push(e)}return u}function Cu(){var e,t;de();t=new Fe;e=Au();return t.finishProgram(e,B.sourceType)}function Eu(){var e,t,u,n=[];for(e=0;e<v.tokens.length;++e){t=v.tokens[e];u={type:t.type,value:t.value};if(t.regex){u.regex={pattern:t.regex.pattern,flags:t.regex.flags}}if(v.range){u.range=t.range}if(v.loc){u.loc=t.loc}n.push(u)}v.tokens=n}function Fu(e,u){var n,r;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}a=e;f=0;c=a.length>0?1:0;p=0;A=f;C=c;E=p;g=a.length;y=null;B={allowIn:true,allowYield:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[]};v={};u=u||{};u.tokens=true;v.tokens=[];v.tokenize=true;v.openParenToken=-1;v.openCurlyToken=-1;v.range=typeof u.range==="boolean"&&u.range;v.loc=typeof u.loc==="boolean"&&u.loc;if(typeof u.comment==="boolean"&&u.comment){v.comments=[]}if(typeof u.tolerant==="boolean"&&u.tolerant){v.errors=[]}try{de();if(y.type===t.EOF){return v.tokens}me();while(y.type!==t.EOF){try{me()}catch(i){if(v.errors){ye(i);break}else{throw i}}}Eu();r=v.tokens;if(typeof v.comments!=="undefined"){r.comments=v.comments}if(typeof v.errors!=="undefined"){r.errors=v.errors}}catch(o){throw o}finally{v={}}return r}function gu(e,t){var u,n;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}a=e;f=0;c=a.length>0?1:0;p=0;A=f;C=c;E=p;g=a.length;y=null;B={allowIn:true,allowYield:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[],sourceType:"script"};l=false;v={};if(typeof t!=="undefined"){v.range=typeof t.range==="boolean"&&t.range;v.loc=typeof t.loc==="boolean"&&t.loc;v.attachComment=typeof t.attachComment==="boolean"&&t.attachComment;if(v.loc&&t.source!==null&&t.source!==undefined){v.source=n(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){v.tokens=[]}if(typeof t.comment==="boolean"&&t.comment){v.comments=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){v.errors=[]}if(v.attachComment){v.range=true;v.comments=[];v.bottomRightStack=[];v.trailingComments=[];v.leadingComments=[]}if(t.sourceType==="module"){B.sourceType=t.sourceType;l=true}}try{u=Cu();if(typeof v.comments!=="undefined"){u.comments=v.comments}if(typeof v.tokens!=="undefined"){Eu();u.tokens=v.tokens}if(typeof v.errors!=="undefined"){u.errors=v.errors}}catch(r){throw r}finally{v={}}return u}e.version="2.6.0";e.tokenize=Fu;e.parse=gu;e.Syntax=function(){var e,t={};if(typeof Object.create==="function"){t=Object.create(null)}for(e in r){if(r.hasOwnProperty(e)){t[e]=r[e]}}if(typeof Object.freeze==="function"){Object.freeze(t)}return t}()})},{}],49:[function(t,u,n){(function(t,u){"use strict";if(typeof e==="function"&&e.amd){e(["exports"],u)}else if(typeof n!=="undefined"){u(n)}else{u(t.estraverse={})}})(this,function r(e){"use strict";var t,u,n,i,o,s,a,l,f;function c(){}u=Array.isArray;if(!u){u=function S(e){return Object.prototype.toString.call(e)==="[object Array]"}}function p(e){var t={},u,n;for(u in e){if(e.hasOwnProperty(u)){n=e[u];if(typeof n==="object"&&n!==null){t[u]=p(n)}else{t[u]=n}}}return t}function D(e){var t={},u;for(u in e){if(e.hasOwnProperty(u)){t[u]=e[u]}}return t}c(D);function h(e,t){var u,n,r,i;n=e.length;r=0;while(n){u=n>>>1;i=r+u;if(t(e[i])){n=u}else{r=i+1;n-=u+1}}return r}function m(e,t){var u,n,r,i;n=e.length;r=0;while(n){u=n>>>1;i=r+u;if(t(e[i])){r=i+1;n-=u+1}else{n=u}}return r}c(m);o=Object.create||function(){function e(){}return function(t){e.prototype=t;return new e}}();s=Object.keys||function(e){var t=[],u;for(u in e){t.push(u)}return t};function d(e,t){var u=s(t),n,r,i;for(r=0,i=u.length;r<i;r+=1){n=u[r];e[n]=t[n]}return e}t={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};i={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};a={};l={};f={};n={Break:a,Skip:l,Remove:f};function A(e,t){this.parent=e;this.key=t}A.prototype.replace=function x(e){this.parent[this.key]=e};A.prototype.remove=function w(){if(u(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function C(e,t,u,n){this.node=e;this.path=t;this.wrap=u;this.ref=n}function E(){}E.prototype.path=function _(){var e,t,n,r,i,o;function s(e,t){if(u(t)){for(n=0,r=t.length;n<r;++n){e.push(t[n])}}else{e.push(t)}}if(!this.__current.path){return null}i=[];for(e=2,t=this.__leavelist.length;e<t;++e){o=this.__leavelist[e];s(i,o.path)}s(i,this.__current.path);return i};E.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap};E.prototype.parents=function k(){var e,t,u;u=[];for(e=1,t=this.__leavelist.length;e<t;++e){u.push(this.__leavelist[e].node)}return u};E.prototype.current=function I(){return this.__current.node};E.prototype.__execute=function P(e,t){var u,n;n=undefined;u=this.__current;this.__current=t;this.__state=null;if(e){n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=u;return n};E.prototype.notify=function L(e){this.__state=e};E.prototype.skip=function(){this.notify(l)};E.prototype["break"]=function(){this.notify(a)};E.prototype.remove=function(){this.notify(f)};E.prototype.__initialize=function(e,t){this.visitor=t;this.root=e;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=t.fallback==="iteration";this.__keys=i;if(t.keys){this.__keys=d(o(this.__keys),t.keys)}};function F(e){if(e==null){return false}return typeof e==="object"&&typeof e.type==="string"}function g(e,u){return(e===t.ObjectExpression||e===t.ObjectPattern)&&"properties"===u}E.prototype.traverse=function O(e,t){var n,r,i,o,f,c,p,D,h,m,d,A;this.__initialize(e,t);A={};n=this.__worklist;r=this.__leavelist;n.push(new C(e,null,null,null));r.push(new C(null,null,null,null));while(n.length){i=n.pop();if(i===A){i=r.pop();c=this.__execute(t.leave,i);if(this.__state===a||c===a){return}continue}if(i.node){c=this.__execute(t.enter,i);if(this.__state===a||c===a){return}n.push(A);r.push(i);if(this.__state===l||c===l){continue}o=i.node;f=i.wrap||o.type;m=this.__keys[f];if(!m){if(this.__fallback){m=s(o)}else{throw new Error("Unknown node type "+f+".")}}D=m.length;while((D-=1)>=0){p=m[D];d=o[p];if(!d){continue}if(u(d)){h=d.length;while((h-=1)>=0){if(!d[h]){continue}if(g(f,m[D])){i=new C(d[h],[p,h],"Property",null)}else if(F(d[h])){i=new C(d[h],[p,h],null,null)}else{continue}n.push(i)}}else if(F(d)){n.push(new C(d,p,null,null))}}}}};E.prototype.replace=function j(e,t){function n(e){var t,u,n,i;if(e.ref.remove()){u=e.ref.key;i=e.ref.parent;t=r.length;while(t--){n=r[t];if(n.ref&&n.ref.parent===i){if(n.ref.key<u){break}--n.ref.key}}}}var r,i,o,c,p,D,h,m,d,E,y,B,v;this.__initialize(e,t);y={};r=this.__worklist;i=this.__leavelist;B={root:e};D=new C(e,null,null,new A(B,"root"));r.push(D);i.push(D);while(r.length){D=r.pop();if(D===y){D=i.pop();p=this.__execute(t.leave,D);if(p!==undefined&&p!==a&&p!==l&&p!==f){D.ref.replace(p)}if(this.__state===f||p===f){n(D)}if(this.__state===a||p===a){return B.root}continue}p=this.__execute(t.enter,D);if(p!==undefined&&p!==a&&p!==l&&p!==f){D.ref.replace(p);D.node=p}if(this.__state===f||p===f){n(D);D.node=null}if(this.__state===a||p===a){return B.root}o=D.node;if(!o){continue}r.push(y);i.push(D);if(this.__state===l||p===l){continue}c=D.wrap||o.type;d=this.__keys[c];if(!d){if(this.__fallback){d=s(o)}else{throw new Error("Unknown node type "+c+".")}}h=d.length;while((h-=1)>=0){v=d[h];E=o[v];if(!E){continue}if(u(E)){m=E.length;while((m-=1)>=0){if(!E[m]){continue}if(g(c,d[h])){D=new C(E[m],[v,m],"Property",new A(E,m))}else if(F(E[m])){D=new C(E[m],[v,m],null,new A(E,m))}else{continue}r.push(D)}}else if(F(E)){r.push(new C(E,v,null,new A(o,v)))}}}return B.root};function y(e,t){var u=new E;return u.traverse(e,t)}function B(e,t){var u=new E;return u.replace(e,t)}function v(e,t){var u;u=h(t,function n(t){return t.range[0]>e.range[0]});e.extendedRange=[e.range[0],e.range[1]];if(u!==t.length){e.extendedRange[1]=t[u].range[0]}u-=1;if(u>=0){e.extendedRange[0]=t[u].range[1]}return e}function b(e,t,u){var r=[],i,o,s,a;if(!e.range){throw new Error("attachComments needs range information")}if(!u.length){if(t.length){for(s=0,o=t.length;s<o;s+=1){i=p(t[s]);i.extendedRange=[0,e.range[0]];r.push(i)}e.leadingComments=r}return e}for(s=0,o=t.length;s<o;s+=1){r.push(v(p(t[s]),u))}a=0;y(e,{enter:function(e){var t;while(a<r.length){t=r[a];if(t.extendedRange[1]>e.range[0]){break}if(t.extendedRange[1]===e.range[0]){if(!e.leadingComments){e.leadingComments=[]}e.leadingComments.push(t);
r.splice(a,1)}else{a+=1}}if(a===r.length){return n.Break}if(r[a].extendedRange[0]>e.range[1]){return n.Skip}}});a=0;y(e,{leave:function(e){var t;while(a<r.length){t=r[a];if(e.range[1]<t.extendedRange[0]){break}if(e.range[1]===t.extendedRange[0]){if(!e.trailingComments){e.trailingComments=[]}e.trailingComments.push(t);r.splice(a,1)}else{a+=1}}if(a===r.length){return n.Break}if(r[a].extendedRange[0]>e.range[1]){return n.Skip}}});return e}e.version="1.8.1-dev";e.Syntax=t;e.traverse=y;e.replace=B;e.attachComments=b;e.VisitorKeys=i;e.VisitorOption=n;e.Controller=E;e.cloneEnvironment=function(){return r({})};return e})},{}],50:[function(e,t,u){arguments[4][34][0].apply(u,arguments)},{"./source-map/source-map-consumer":56,"./source-map/source-map-generator":57,"./source-map/source-node":58,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map.js":34}],51:[function(e,t,u){arguments[4][35][0].apply(u,arguments)},{"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/array-set.js":35,amdefine:60}],52:[function(e,t,u){arguments[4][36][0].apply(u,arguments)},{"./base64":53,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/base64-vlq.js":36,amdefine:60}],53:[function(e,t,u){arguments[4][37][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/base64.js":37,amdefine:60}],54:[function(e,t,u){arguments[4][39][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/binary-search.js":39,amdefine:60}],55:[function(e,t,u){arguments[4][41][0].apply(u,arguments)},{"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/mapping-list.js":41,amdefine:60}],56:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./array-set").ArraySet;var o=e("./base64-vlq");function s(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sources");var o=n.getArg(t,"names",[]);var s=n.getArg(t,"sourceRoot",null);var a=n.getArg(t,"sourcesContent",null);var l=n.getArg(t,"mappings");var f=n.getArg(t,"file",null);if(u!=this._version){throw new Error("Unsupported version: "+u)}r=r.map(n.normalize);this._names=i.fromArray(o,true);this._sources=i.fromArray(r,true);this.sourceRoot=s;this.sourcesContent=a;this._mappings=l;this.file=f}s.fromSourceMap=function a(e){var t=Object.create(s.prototype);t._names=i.fromArray(e._names.toArray(),true);t._sources=i.fromArray(e._sources.toArray(),true);t.sourceRoot=e._sourceRoot;t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot);t.file=e._file;t.__generatedMappings=e._mappings.toArray().slice();t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions);return t};s.prototype._version=3;Object.defineProperty(s.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot!=null?n.join(this.sourceRoot,e):e},this)}});s.prototype.__generatedMappings=null;Object.defineProperty(s.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});s.prototype.__originalMappings=null;Object.defineProperty(s.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});s.prototype._nextCharIsMappingSeparator=function l(e){var t=e.charAt(0);return t===";"||t===","};s.prototype._parseMappings=function f(e,t){var u=1;var r=0;var i=0;var s=0;var a=0;var l=0;var f=e;var c={};var p;while(f.length>0){if(f.charAt(0)===";"){u++;f=f.slice(1);r=0}else if(f.charAt(0)===","){f=f.slice(1)}else{p={};p.generatedLine=u;o.decode(f,c);p.generatedColumn=r+c.value;r=p.generatedColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.source=this._sources.at(a+c.value);a+=c.value;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source, but no line and column")}o.decode(f,c);p.originalLine=i+c.value;i=p.originalLine;p.originalLine+=1;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source and line, but no column")}o.decode(f,c);p.originalColumn=s+c.value;s=p.originalColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.name=this._names.at(l+c.value);l+=c.value;f=c.rest}}this.__generatedMappings.push(p);if(typeof p.originalLine==="number"){this.__originalMappings.push(p)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};s.prototype._findMapping=function c(e,t,u,n,i){if(e[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+e[u])}if(e[n]<0){throw new TypeError("Column must be greater than or equal to 0, got "+e[n])}return r.search(e,t,i)};s.prototype.computeColumnSpans=function p(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(t.generatedLine===u.generatedLine){t.lastGeneratedColumn=u.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}};s.prototype.originalPositionFor=function D(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===t.generatedLine){var i=n.getArg(r,"source",null);if(i!=null&&this.sourceRoot!=null){i=n.join(this.sourceRoot,i)}return{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}};s.prototype.sourceContentFor=function h(e){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){e=n.relative(this.sourceRoot,e)}if(this._sources.has(e)){return this.sourcesContent[this._sources.indexOf(e)]}var t;if(this.sourceRoot!=null&&(t=n.urlParse(this.sourceRoot))){var u=e.replace(/^file:\/\//,"");if(t.scheme=="file"&&this._sources.has(u)){return this.sourcesContent[this._sources.indexOf(u)]}if((!t.path||t.path=="/")&&this._sources.has("/"+e)){return this.sourcesContent[this._sources.indexOf("/"+e)]}}throw new Error('"'+e+'" is not in the SourceMap.')};s.prototype.generatedPositionFor=function m(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(u>=0){var r=this._originalMappings[u];return{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null),lastColumn:n.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};s.prototype.allGeneratedPositionsFor=function d(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=[];var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];while(i&&i.originalLine===t.originalLine){u.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)});i=this._originalMappings[--r]}}return u.reverse()};s.GENERATED_ORDER=1;s.ORIGINAL_ORDER=2;s.prototype.eachMapping=function A(e,t,u){var r=t||null;var i=u||s.GENERATED_ORDER;var o;switch(i){case s.GENERATED_ORDER:o=this._generatedMappings;break;case s.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(e){var t=e.source;if(t!=null&&a!=null){t=n.join(a,t)}return{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,r)};t.SourceMapConsumer=s})},{"./array-set":51,"./base64-vlq":52,"./binary-search":54,"./util":59,amdefine:60}],57:[function(e,t,u){arguments[4][43][0].apply(u,arguments)},{"./array-set":51,"./base64-vlq":52,"./mapping-list":55,"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/source-map-generator.js":43,amdefine:60}],58:[function(e,t,u){arguments[4][44][0].apply(u,arguments)},{"./source-map-generator":57,"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/source-node.js":44,amdefine:60}],59:[function(e,t,u){arguments[4][45][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/util.js":45,amdefine:60}],60:[function(e,t,u){(function(u,n){"use strict";function r(t,r){"use strict";var i={},o={},s=false,a=e("path"),l,f;function c(e){var t,u;for(t=0;e[t];t+=1){u=e[t];if(u==="."){e.splice(t,1);t-=1}else if(u===".."){if(t===1&&(e[2]===".."||e[0]==="..")){break}else if(t>0){e.splice(t-1,2);t-=2}}}}function p(e,t){var u;if(e&&e.charAt(0)==="."){if(t){u=t.split("/");u=u.slice(0,u.length-1);u=u.concat(e.split("/"));c(u);e=u.join("/")}}return e}function D(e){return function(t){return p(t,e)}}function h(e){function t(t){o[e]=t}t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")};return t}l=function(e,t,n,r){function i(i,o){if(typeof i==="string"){return f(e,t,n,i,r)}else{i=i.map(function(u){return f(e,t,n,u,r)});if(o){u.nextTick(function(){o.apply(null,i)})}}}i.toUrl=function(e){if(e.indexOf(".")===0){return p(e,a.dirname(n.filename))}else{return e}};return i};r=r||function A(){return t.require.apply(t,arguments)};function m(e,u,i){var a,f,c,p;if(e){f=o[e]={};c={id:e,uri:n,exports:f};a=l(r,f,c,e)}else{if(s){throw new Error("amdefine with no module ID cannot be called more than once per file.")}s=true;f=t.exports;c=t;a=l(r,f,c,t.id)}if(u){u=u.map(function(e){return a(e)})}if(typeof i==="function"){p=i.apply(c.exports,u)}else{p=i}if(p!==undefined){c.exports=p;if(e){o[e]=c.exports}}}f=function(e,t,u,n,r){var s=n.indexOf("!"),a=n,c,d;if(s===-1){n=p(n,r);if(n==="require"){return l(e,t,u,r)}else if(n==="exports"){return t}else if(n==="module"){return u}else if(o.hasOwnProperty(n)){return o[n]}else if(i[n]){m.apply(null,i[n]);return o[n]}else{if(e){return e(a)}else{throw new Error("No module with ID: "+n)}}}else{c=n.substring(0,s);n=n.substring(s+1,n.length);d=f(e,t,u,c,r);if(d.normalize){n=d.normalize(n,D(r))}else{n=p(n,r)}if(o[n]){return o[n]}else{d.load(n,l(e,t,u,r),h(n),{});return o[n]}}};function d(e,t,u){if(Array.isArray(e)){u=t;t=e;e=undefined}else if(typeof e!=="string"){u=e;e=t=undefined}if(t&&!Array.isArray(t)){u=t;t=undefined}if(!t){t=["require","exports","module"]}if(e){i[e]=[e,t,u]}else{m(e,t,u)}}d.require=function(e){if(o[e]){return o[e]}if(i[e]){m.apply(null,i[e]);return o[e]}};d.amd={};return d}t.exports=r}).call(this,e("_process"),"/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:26,path:25}],61:[function(e,t,u){t.exports={name:"js2coffee",version:"2.2.0",description:"JavaScript to CoffeeScript compiler",homepage:"http://js2.coffee",main:"dist/js2coffee.js",keywords:["javascript","coffeescript","language","compiler"],scripts:{test:"mocha",autotest:"mocha -R min -b --watch",prepublish:"mocha >/dev/null && make -B dist"},author:"Rico Sta. Cruz <hi@ricostacruz.com>",license:"MIT",bugs:{url:"https://github.com/js2coffee/js2coffee/issues"},repository:{type:"git",url:"https://github.com/js2coffee/js2coffee.git"},browser:"js2coffee.coffee",bin:{js2coffee:"./bin/js2coffee"},dependencies:{escodegen:"^1.6.0",esprima:"^2.5.0",estraverse:"^4.1.1",minimist:"^1.1.0","read-input":"^0.3.1","source-map":"^0.5.2"},devDependencies:{browserify:"13.0.0",chai:"^3.4.0","coffee-script":"^1.8.0",coffeeify:"^2.0.1",coffeelint:"^1.6.0",glob:"^7.0.0","js-yaml":"^3.2.1",mocha:"^2.1.0","mocha-clean":"^1.0.0","uglify-js":"^2.4.16",underscore:"^1.7.0"}}},{}]},{},[1])(1)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],35:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))

},{"_process":36}],36:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],37:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var Spine;

  Spine = this.Spine || require('spine');

  Spine.Model.Local = {
    extended: function() {
      var e, error, testLocalStorage;
      testLocalStorage = 'spine' + new Date().getTime();
      try {
        localStorage.setItem(testLocalStorage, testLocalStorage);
        localStorage.removeItem(testLocalStorage);
      } catch (error) {
        e = error;
        return;
      }
      this.change(this.saveLocal);
      return this.fetch(this.loadLocal);
    },
    saveLocal: function() {
      var result;
      result = JSON.stringify(this);
      return localStorage[this.className] = result;
    },
    loadLocal: function(options) {
      var result;
      if (options == null) {
        options = {};
      }
      if (!options.hasOwnProperty('clear')) {
        options.clear = true;
      }
      result = localStorage[this.className];
      return this.refresh(result || [], options);
    }
  };

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine.Model.Local;
  }

}).call(this);



},{"spine":"spine"}],38:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var $, Spine,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Spine = this.Spine || require('spine');

  $ = Spine.$;

  Spine.Manager = (function(superClass) {
    extend(Manager, superClass);

    Manager.include(Spine.Events);

    function Manager() {
      this.controllers = [];
      this.bind('change', this.change);
      this.add.apply(this, arguments);
    }

    Manager.prototype.add = function() {
      var cont, controllers, i, len, results;
      controllers = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      results = [];
      for (i = 0, len = controllers.length; i < len; i++) {
        cont = controllers[i];
        results.push(this.addOne(cont));
      }
      return results;
    };

    Manager.prototype.addOne = function(controller) {
      controller.bind('active', (function(_this) {
        return function() {
          var args;
          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
          return _this.trigger.apply(_this, ['change', controller].concat(slice.call(args)));
        };
      })(this));
      controller.bind('release', (function(_this) {
        return function() {
          var c;
          return _this.controllers = (function() {
            var i, len, ref, results;
            ref = this.controllers;
            results = [];
            for (i = 0, len = ref.length; i < len; i++) {
              c = ref[i];
              if (c !== controller) {
                results.push(c);
              }
            }
            return results;
          }).call(_this);
        };
      })(this));
      return this.controllers.push(controller);
    };

    Manager.prototype.deactivate = function() {
      return this.trigger.apply(this, ['change', false].concat(slice.call(arguments)));
    };

    Manager.prototype.change = function() {
      var args, cont, current, i, len, ref;
      current = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      ref = this.controllers;
      for (i = 0, len = ref.length; i < len; i++) {
        cont = ref[i];
        if (cont !== current) {
          cont.deactivate.apply(cont, args);
        }
      }
      if (current) {
        return current.activate.apply(current, args);
      }
    };

    return Manager;

  })(Spine.Module);

  Spine.Controller.include({
    active: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (typeof args[0] === 'function') {
        this.bind('active', args[0]);
      } else {
        args.unshift('active');
        this.trigger.apply(this, args);
      }
      return this;
    },
    isActive: function() {
      return this.el.hasClass('active');
    },
    activate: function() {
      this.el.addClass('active');
      return this;
    },
    deactivate: function() {
      this.el.removeClass('active');
      return this;
    }
  });

  Spine.Stack = (function(superClass) {
    extend(Stack, superClass);

    Stack.prototype.controllers = {};

    Stack.prototype.routes = {};

    Stack.prototype.className = 'spine stack';

    function Stack() {
      this.release = bind(this.release, this);
      var fn, key, ref, ref1, ref2, value;
      Stack.__super__.constructor.apply(this, arguments);
      this.manager = new Spine.Manager;
      this.router = (ref = Spine.Route) != null ? ref.create() : void 0;
      ref1 = this.controllers;
      for (key in ref1) {
        value = ref1[key];
        if (this[key] != null) {
          throw Error("'@" + key + "' already assigned");
        }
        this[key] = new value({
          stack: this
        });
        this.add(this[key]);
      }
      ref2 = this.routes;
      fn = (function(_this) {
        return function(key, value) {
          var callback;
          if (typeof value === 'function') {
            callback = value;
          }
          callback || (callback = function() {
            var ref3;
            return (ref3 = _this[value]).active.apply(ref3, arguments);
          });
          return _this.route(key, callback);
        };
      })(this);
      for (key in ref2) {
        value = ref2[key];
        fn(key, value);
      }
      if (this["default"]) {
        this[this["default"]].active();
      }
    }

    Stack.prototype.add = function(controller) {
      this.manager.add(controller);
      return this.append(controller);
    };

    Stack.prototype.release = function() {
      var ref;
      if ((ref = this.router) != null) {
        ref.destroy();
      }
      return Stack.__super__.release.apply(this, arguments);
    };

    return Stack;

  })(Spine.Controller);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine.Manager;
  }

  if (typeof module !== "undefined" && module !== null) {
    module.exports.Stack = Spine.Stack;
  }

}).call(this);



},{"spine":"spine"}],39:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var $, Path, Route, Spine, escapeRegExp, hashStrip, namedParam, splatParam,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  Spine = this.Spine || require('spine');

  $ = Spine.$;

  hashStrip = /^#*/;

  namedParam = /:([\w\d]+)/g;

  splatParam = /\*([\w\d]+)/g;

  escapeRegExp = /[-[\]{}()+?.,\\^$|#\s]/g;

  Path = (function(superClass) {
    extend(Path, superClass);

    function Path(path, callback) {
      var match;
      this.names = [];
      this.path = path;
      this.callback = callback;
      if (typeof path === 'string') {
        namedParam.lastIndex = 0;
        while ((match = namedParam.exec(path)) !== null) {
          this.names.push(match[1]);
        }
        splatParam.lastIndex = 0;
        while ((match = splatParam.exec(path)) !== null) {
          this.names.push(match[1]);
        }
        path = path.replace(escapeRegExp, '\\$&').replace(namedParam, '([^\/]*)').replace(splatParam, '(.*?)');
        this.route = new RegExp("^" + path + "$");
      } else {
        this.route = path;
      }
    }

    Path.prototype.match = function(path, options) {
      var i, j, len, match, param, params;
      if (options == null) {
        options = {};
      }
      if (!(match = this.route.exec(path))) {
        return false;
      }
      options.match = match;
      params = match.slice(1);
      if (this.names.length) {
        for (i = j = 0, len = params.length; j < len; i = ++j) {
          param = params[i];
          options[this.names[i]] = param;
        }
      }
      Route.trigger('before', this);
      return this.callback.call(null, options) !== false;
    };

    return Path;

  })(Spine.Module);

  Route = (function(superClass) {
    var ref;

    extend(Route, superClass);

    Route.extend(Spine.Events);

    Route.historySupport = ((ref = window.history) != null ? ref.pushState : void 0) != null;

    Route.options = {
      trigger: true,
      history: false,
      shim: false,
      replace: false,
      redirect: false
    };

    Route.routers = [];

    Route.setup = function(options) {
      if (options == null) {
        options = {};
      }
      this.options = $.extend({}, this.options, options);
      if (this.options.history) {
        this.history = this.historySupport && this.options.history;
      }
      if (this.options.shim) {
        return;
      }
      if (this.history) {
        $(window).bind('popstate', this.change);
      } else {
        $(window).bind('hashchange', this.change);
      }
      return this.change();
    };

    Route.unbind = function() {
      var unbindResult;
      unbindResult = Spine.Events.unbind.apply(this, arguments);
      if (arguments.length > 0) {
        return unbindResult;
      }
      if (this.options.shim) {
        return;
      }
      if (this.history) {
        return $(window).unbind('popstate', this.change);
      } else {
        return $(window).unbind('hashchange', this.change);
      }
    };

    Route.navigate = function() {
      var args, lastArg, options, path, routes;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      options = {};
      lastArg = args[args.length - 1];
      if (typeof lastArg === 'object') {
        options = args.pop();
      } else if (typeof lastArg === 'boolean') {
        options.trigger = args.pop();
      }
      options = $.extend({}, this.options, options);
      path = args.join('/');
      if (this.path === path) {
        return;
      }
      this.path = path;
      if (options.trigger) {
        this.trigger('navigate', this.path);
        routes = this.matchRoutes(this.path, options);
        if (!routes.length) {
          if (typeof options.redirect === 'function') {
            return options.redirect.apply(this, [this.path, options]);
          } else {
            if (options.redirect === true) {
              this.redirect(this.path);
            }
          }
        }
      }
      if (options.shim) {
        return true;
      } else if (this.history && options.replace) {
        return history.replaceState({}, document.title, this.path);
      } else if (this.history) {
        return history.pushState({}, document.title, this.path);
      } else {
        return window.location.hash = this.path;
      }
    };

    Route.create = function() {
      var router;
      router = new this;
      this.routers.push(router);
      return router;
    };

    Route.add = function(path, callback) {
      return this.router.add(path, callback);
    };

    Route.prototype.add = function(path, callback) {
      var key, results, value;
      if (typeof path === 'object' && !(path instanceof RegExp)) {
        results = [];
        for (key in path) {
          value = path[key];
          results.push(this.add(key, value));
        }
        return results;
      } else {
        return this.routes.push(new Path(path, callback));
      }
    };

    Route.prototype.destroy = function() {
      var r;
      this.routes.length = 0;
      return this.constructor.routers = (function() {
        var j, len, ref1, results;
        ref1 = this.constructor.routers;
        results = [];
        for (j = 0, len = ref1.length; j < len; j++) {
          r = ref1[j];
          if (r !== this) {
            results.push(r);
          }
        }
        return results;
      }).call(this);
    };

    Route.getPath = function() {
      var path;
      if (this.history) {
        path = window.location.pathname;
        if (path.substr(0, 1) !== '/') {
          path = '/' + path;
        }
      } else {
        path = window.location.hash;
        path = path.replace(hashStrip, '');
      }
      return path;
    };

    Route.getHost = function() {
      return window.location.protocol + "//" + window.location.host;
    };

    Route.change = function() {
      var path;
      path = Route.getPath();
      if (path === Route.path) {
        return;
      }
      Route.path = path;
      return Route.matchRoutes(Route.path);
    };

    Route.matchRoutes = function(path, options) {
      var j, len, match, matches, ref1, router;
      matches = [];
      ref1 = this.routers.concat([this.router]);
      for (j = 0, len = ref1.length; j < len; j++) {
        router = ref1[j];
        match = router.matchRoute(path, options);
        if (match) {
          matches.push(match);
        }
      }
      if (matches.length) {
        this.trigger('change', matches, path);
      }
      return matches;
    };

    Route.redirect = function(path) {
      return window.location = path;
    };

    function Route() {
      this.routes = [];
    }

    Route.prototype.matchRoute = function(path, options) {
      var j, len, ref1, route;
      ref1 = this.routes;
      for (j = 0, len = ref1.length; j < len; j++) {
        route = ref1[j];
        if (route.match(path, options)) {
          return route;
        }
      }
    };

    Route.prototype.trigger = function() {
      var args, ref1;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      args.splice(1, 0, this);
      return (ref1 = this.constructor).trigger.apply(ref1, args);
    };

    return Route;

  })(Spine.Module);

  Route.router = new Route;

  Spine.Controller.include({
    route: function(path, callback) {
      if (this.router instanceof Spine.Route) {
        return this.router.add(path, this.proxy(callback));
      } else {
        return Spine.Route.add(path, this.proxy(callback));
      }
    },
    routes: function(routes) {
      var key, results, value;
      results = [];
      for (key in routes) {
        value = routes[key];
        results.push(this.route(key, value));
      }
      return results;
    },
    navigate: function() {
      return Spine.Route.navigate.apply(Spine.Route, arguments);
    }
  });

  Route.Path = Path;

  Spine.Route = Route;

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Route;
  }

}).call(this);



},{"spine":"spine"}],40:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0

/*
Spine.js MVC library
Released under the MIT License
 */

(function() {
  var $, Controller, Events, Log, Model, Module, Spine, createObject, makeArray, moduleKeywords,
    slice = [].slice,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Events = {
    bind: function(ev, callback) {
      var base, evs, j, len, name;
      evs = ev.split(' ');
      if (!this.hasOwnProperty('_callbacks')) {
        this._callbacks || (this._callbacks = {});
      }
      for (j = 0, len = evs.length; j < len; j++) {
        name = evs[j];
        (base = this._callbacks)[name] || (base[name] = []);
        this._callbacks[name].push(callback);
      }
      return this;
    },
    one: function(ev, callback) {
      var handler;
      return this.bind(ev, handler = function() {
        this.unbind(ev, handler);
        return callback.apply(this, arguments);
      });
    },
    trigger: function() {
      var args, callback, ev, j, len, list, ref;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      ev = args.shift();
      list = (ref = this._callbacks) != null ? ref[ev] : void 0;
      if (!list) {
        return;
      }
      for (j = 0, len = list.length; j < len; j++) {
        callback = list[j];
        if (callback.apply(this, args) === false) {
          break;
        }
      }
      return true;
    },
    listenTo: function(obj, ev, callback) {
      obj.bind(ev, callback);
      this.listeningTo || (this.listeningTo = []);
      this.listeningTo.push({
        obj: obj,
        ev: ev,
        callback: callback
      });
      return this;
    },
    listenToOnce: function(obj, ev, callback) {
      var handler, listeningToOnce;
      listeningToOnce = this.listeningToOnce || (this.listeningToOnce = []);
      obj.bind(ev, handler = function() {
        var i, idx, j, len, lt;
        idx = -1;
        for (i = j = 0, len = listeningToOnce.length; j < len; i = ++j) {
          lt = listeningToOnce[i];
          if (lt.obj === obj) {
            if (lt.ev === ev && lt.callback === handler) {
              idx = i;
            }
          }
        }
        obj.unbind(ev, handler);
        if (idx !== -1) {
          listeningToOnce.splice(idx, 1);
        }
        return callback.apply(this, arguments);
      });
      listeningToOnce.push({
        obj: obj,
        ev: ev,
        callback: handler
      });
      return this;
    },
    stopListening: function(obj, events, callback) {
      var e, ev, evts, idx, j, k, l, len, len1, len2, len3, listeningTo, lt, m, n, ref, ref1, ref2;
      if (arguments.length === 0) {
        ref = [this.listeningTo, this.listeningToOnce];
        for (j = 0, len = ref.length; j < len; j++) {
          listeningTo = ref[j];
          if (!(listeningTo != null ? listeningTo.length : void 0)) {
            continue;
          }
          for (k = 0, len1 = listeningTo.length; k < len1; k++) {
            lt = listeningTo[k];
            lt.obj.unbind(lt.ev, lt.callback);
          }
        }
        this.listeningTo = void 0;
        this.listeningToOnce = void 0;
      } else if (obj) {
        events = events ? events.split(' ') : [void 0];
        ref1 = [this.listeningTo, this.listeningToOnce];
        for (l = 0, len2 = ref1.length; l < len2; l++) {
          listeningTo = ref1[l];
          if (!listeningTo) {
            continue;
          }
          for (m = 0, len3 = events.length; m < len3; m++) {
            ev = events[m];
            for (idx = n = ref2 = listeningTo.length - 1; ref2 <= 0 ? n <= 0 : n >= 0; idx = ref2 <= 0 ? ++n : --n) {
              lt = listeningTo[idx];
              if (lt.obj !== obj) {
                continue;
              }
              if (callback && lt.callback !== callback) {
                continue;
              }
              if ((!ev) || (ev === lt.ev)) {
                lt.obj.unbind(lt.ev, lt.callback);
                if (idx !== -1) {
                  listeningTo.splice(idx, 1);
                }
              } else if (ev) {
                evts = lt.ev.split(' ');
                if (indexOf.call(evts, ev) >= 0) {
                  evts = (function() {
                    var len4, p, results;
                    results = [];
                    for (p = 0, len4 = evts.length; p < len4; p++) {
                      e = evts[p];
                      if (e !== ev) {
                        results.push(e);
                      }
                    }
                    return results;
                  })();
                  lt.ev = $.trim(evts.join(' '));
                  lt.obj.unbind(ev, lt.callback);
                }
              }
            }
          }
        }
      }
      return this;
    },
    unbind: function(ev, callback) {
      var cb, evs, i, j, k, len, len1, list, name, ref;
      if (arguments.length === 0) {
        this._callbacks = {};
        return this;
      }
      if (!ev) {
        return this;
      }
      evs = ev.split(' ');
      for (j = 0, len = evs.length; j < len; j++) {
        name = evs[j];
        list = (ref = this._callbacks) != null ? ref[name] : void 0;
        if (!list) {
          continue;
        }
        if (!callback) {
          delete this._callbacks[name];
          continue;
        }
        for (i = k = 0, len1 = list.length; k < len1; i = ++k) {
          cb = list[i];
          if (!(cb === callback)) {
            continue;
          }
          list = list.slice();
          list.splice(i, 1);
          this._callbacks[name] = list;
          break;
        }
      }
      return this;
    }
  };

  Events.on = Events.bind;

  Events.off = Events.unbind;

  Log = {
    trace: true,
    logPrefix: '(App)',
    log: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (!this.trace) {
        return;
      }
      if (this.logPrefix) {
        args.unshift(this.logPrefix);
      }
      if (typeof console !== "undefined" && console !== null) {
        if (typeof console.log === "function") {
          console.log.apply(console, args);
        }
      }
      return this;
    }
  };

  moduleKeywords = ['included', 'extended'];

  Module = (function() {
    Module.include = function(obj) {
      var key, ref, value;
      if (!obj) {
        throw new Error('include(obj) requires obj');
      }
      for (key in obj) {
        value = obj[key];
        if (indexOf.call(moduleKeywords, key) < 0) {
          this.prototype[key] = value;
        }
      }
      if ((ref = obj.included) != null) {
        ref.apply(this);
      }
      return this;
    };

    Module.extend = function(obj) {
      var key, ref, value;
      if (!obj) {
        throw new Error('extend(obj) requires obj');
      }
      for (key in obj) {
        value = obj[key];
        if (indexOf.call(moduleKeywords, key) < 0) {
          this[key] = value;
        }
      }
      if ((ref = obj.extended) != null) {
        ref.apply(this);
      }
      return this;
    };

    Module.proxy = function(func) {
      return (function(_this) {
        return function() {
          return func.apply(_this, arguments);
        };
      })(this);
    };

    Module.prototype.proxy = function(func) {
      return (function(_this) {
        return function() {
          return func.apply(_this, arguments);
        };
      })(this);
    };

    function Module() {
      if (typeof this.init === "function") {
        this.init.apply(this, arguments);
      }
    }

    return Module;

  })();

  Model = (function(superClass) {
    extend(Model, superClass);

    Model.extend(Events);

    Model.include(Events);

    Model.records = [];

    Model.irecords = {};

    Model.attributes = [];

    Model.configure = function() {
      var attributes, name;
      name = arguments[0], attributes = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      this.className = name;
      this.deleteAll();
      if (attributes.length) {
        this.attributes = attributes;
      }
      this.attributes && (this.attributes = makeArray(this.attributes));
      this.attributes || (this.attributes = []);
      this.unbind();
      return this;
    };

    Model.toString = function() {
      return this.className + "(" + (this.attributes.join(", ")) + ")";
    };

    Model.find = function(id, notFound) {
      var ref;
      if (notFound == null) {
        notFound = this.notFound;
      }
      return ((ref = this.irecords[id]) != null ? ref.clone() : void 0) || (typeof notFound === "function" ? notFound(id) : void 0);
    };

    Model.findAll = function(ids, notFound) {
      var id, j, len, results;
      results = [];
      for (j = 0, len = ids.length; j < len; j++) {
        id = ids[j];
        if (this.find(id, notFound)) {
          results.push(this.find(id));
        }
      }
      return results;
    };

    Model.notFound = function(id) {
      return null;
    };

    Model.exists = function(id) {
      return Boolean(this.irecords[id]);
    };

    Model.addRecord = function(record, idx) {
      var root;
      if (root = this.irecords[record.id || record.cid]) {
        root.refresh(record);
      } else {
        record.id || (record.id = record.cid);
        this.irecords[record.id] = this.irecords[record.cid] = record;
        if (idx !== void 0) {
          this.records.splice(idx, 0, record);
        } else {
          this.records.push(record);
        }
      }
      return record;
    };

    Model.refresh = function(values, options) {
      var j, len, record, records, result;
      if (options == null) {
        options = {};
      }
      if (options.clear) {
        this.deleteAll();
      }
      records = this.fromJSON(values);
      if (!Array.isArray(records)) {
        records = [records];
      }
      for (j = 0, len = records.length; j < len; j++) {
        record = records[j];
        this.addRecord(record);
      }
      this.sort();
      result = this.cloneArray(records);
      this.trigger('refresh', result, options);
      return result;
    };

    Model.select = function(callback) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        if (callback(record)) {
          results.push(record.clone());
        }
      }
      return results;
    };

    Model.findByAttribute = function(name, value) {
      var j, len, record, ref;
      ref = this.records;
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        if (record[name] === value) {
          return record.clone();
        }
      }
      return null;
    };

    Model.findAllByAttribute = function(name, value) {
      return this.select(function(item) {
        return item[name] === value;
      });
    };

    Model.each = function(callback) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        results.push(callback(record.clone()));
      }
      return results;
    };

    Model.all = function() {
      return this.cloneArray(this.records);
    };

    Model.slice = function(begin, end) {
      if (begin == null) {
        begin = 0;
      }
      return this.cloneArray(this.records.slice(begin, end));
    };

    Model.first = function(end) {
      var ref;
      if (end == null) {
        end = 1;
      }
      if (end > 1) {
        return this.cloneArray(this.records.slice(0, end));
      } else {
        return (ref = this.records[0]) != null ? ref.clone() : void 0;
      }
    };

    Model.last = function(begin) {
      var ref;
      if (typeof begin === 'number') {
        return this.cloneArray(this.records.slice(-begin));
      } else {
        return (ref = this.records[this.records.length - 1]) != null ? ref.clone() : void 0;
      }
    };

    Model.count = function() {
      return this.records.length;
    };

    Model.deleteAll = function() {
      this.records = [];
      return this.irecords = {};
    };

    Model.destroyAll = function(options) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        results.push(record.destroy(options));
      }
      return results;
    };

    Model.update = function(id, atts, options) {
      return this.find(id).updateAttributes(atts, options);
    };

    Model.create = function(atts, options) {
      var record;
      record = new this(atts);
      return record.save(options);
    };

    Model.destroy = function(id, options) {
      var ref;
      return (ref = this.find(id)) != null ? ref.destroy(options) : void 0;
    };

    Model.change = function(callbackOrParams) {
      if (typeof callbackOrParams === 'function') {
        return this.bind('change', callbackOrParams);
      } else {
        return this.trigger.apply(this, ['change'].concat(slice.call(arguments)));
      }
    };

    Model.fetch = function(callbackOrParams) {
      if (typeof callbackOrParams === 'function') {
        return this.bind('fetch', callbackOrParams);
      } else {
        return this.trigger.apply(this, ['fetch'].concat(slice.call(arguments)));
      }
    };

    Model.toJSON = function() {
      return this.records;
    };

    Model.beforeFromJSON = function(objects) {
      return objects;
    };

    Model.fromJSON = function(objects) {
      var j, len, results, value;
      if (!objects) {
        return;
      }
      if (typeof objects === 'string') {
        objects = JSON.parse(objects);
      }
      objects = this.beforeFromJSON(objects);
      if (Array.isArray(objects)) {
        results = [];
        for (j = 0, len = objects.length; j < len; j++) {
          value = objects[j];
          if (value instanceof this) {
            results.push(value);
          } else {
            results.push(new this(value));
          }
        }
        return results;
      } else {
        if (objects instanceof this) {
          return objects;
        }
        return new this(objects);
      }
    };

    Model.fromForm = function() {
      var ref;
      return (ref = new this).fromForm.apply(ref, arguments);
    };

    Model.sort = function() {
      if (this.comparator) {
        this.records.sort(this.comparator);
      }
      return this;
    };

    Model.cloneArray = function(array) {
      var j, len, results, value;
      results = [];
      for (j = 0, len = array.length; j < len; j++) {
        value = array[j];
        results.push(value.clone());
      }
      return results;
    };

    Model.idCounter = 0;

    Model.uid = function(prefix) {
      var uid;
      if (prefix == null) {
        prefix = '';
      }
      uid = prefix + this.idCounter++;
      if (this.exists(uid)) {
        uid = this.uid(prefix);
      }
      return uid;
    };

    function Model(atts) {
      Model.__super__.constructor.apply(this, arguments);
      if ((this.constructor.uuid != null) && typeof this.constructor.uuid === 'function') {
        this.cid = this.constructor.uuid();
        if (!this.id) {
          this.id = this.cid;
        }
      } else {
        this.cid = (atts != null ? atts.cid : void 0) || this.constructor.uid('c-');
      }
      if (atts) {
        this.load(atts);
      }
    }

    Model.prototype.isNew = function() {
      return !this.exists();
    };

    Model.prototype.isValid = function() {
      return !this.validate();
    };

    Model.prototype.validate = function() {};

    Model.prototype.load = function(atts) {
      var key, value;
      if (atts.id) {
        this.id = atts.id;
      }
      for (key in atts) {
        value = atts[key];
        if (key === '_callbacks') {
          continue;
        }
        if (typeof this[key] === 'function') {
          if (typeof value === 'function') {
            continue;
          }
          this[key](value);
        } else {
          this[key] = value;
        }
      }
      return this;
    };

    Model.prototype.attributes = function() {
      var j, key, len, ref, result;
      result = {};
      ref = this.constructor.attributes;
      for (j = 0, len = ref.length; j < len; j++) {
        key = ref[j];
        if (key in this) {
          if (typeof this[key] === 'function') {
            result[key] = this[key]();
          } else {
            result[key] = this[key];
          }
        }
      }
      if (this.id) {
        result.id = this.id;
      }
      return result;
    };

    Model.prototype.eql = function(rec) {
      return rec && rec.constructor === this.constructor && ((rec.cid === this.cid) || (rec.id && rec.id === this.id));
    };

    Model.prototype.save = function(options) {
      var error, record;
      if (options == null) {
        options = {};
      }
      if (options.validate !== false) {
        error = this.validate();
        if (error) {
          this.trigger('error', this, error);
          return false;
        }
      }
      this.trigger('beforeSave', this, options);
      record = this.isNew() ? this.create(options) : this.update(options);
      this.stripCloneAttrs();
      this.trigger('save', record, options);
      return record;
    };

    Model.prototype.stripCloneAttrs = function() {
      var key, value;
      if (this.hasOwnProperty('cid')) {
        return;
      }
      for (key in this) {
        if (!hasProp.call(this, key)) continue;
        value = this[key];
        if (indexOf.call(this.constructor.attributes, key) >= 0) {
          delete this[key];
        }
      }
      return this;
    };

    Model.prototype.updateAttribute = function(name, value, options) {
      var atts;
      atts = {};
      atts[name] = value;
      return this.updateAttributes(atts, options);
    };

    Model.prototype.updateAttributes = function(atts, options) {
      this.load(atts);
      return this.save(options);
    };

    Model.prototype.changeID = function(id) {
      var records;
      if (id === this.id) {
        return;
      }
      records = this.constructor.irecords;
      records[id] = records[this.id];
      if (this.cid !== this.id) {
        delete records[this.id];
      }
      return this.id = id;
    };

    Model.prototype.remove = function(options) {
      var i, j, len, record, records;
      if (options == null) {
        options = {};
      }
      records = this.constructor.records.slice(0);
      for (i = j = 0, len = records.length; j < len; i = ++j) {
        record = records[i];
        if (!(this.eql(record))) {
          continue;
        }
        records.splice(i, 1);
        break;
      }
      this.constructor.records = records;
      if (options.clear) {
        delete this.constructor.irecords[this.id];
        return delete this.constructor.irecords[this.cid];
      }
    };

    Model.prototype.destroy = function(options) {
      if (options == null) {
        options = {};
      }
      if (options.clear == null) {
        options.clear = true;
      }
      this.trigger('beforeDestroy', this, options);
      this.remove(options);
      this.destroyed = true;
      this.trigger('destroy', this, options);
      this.trigger('change', this, 'destroy', options);
      if (this.listeningTo) {
        this.stopListening();
      }
      this.unbind();
      return this;
    };

    Model.prototype.dup = function(newRecord) {
      var atts, record;
      if (newRecord == null) {
        newRecord = true;
      }
      atts = this.attributes();
      if (newRecord) {
        delete atts.id;
      } else {
        atts.cid = this.cid;
      }
      record = new this.constructor(atts);
      if (!newRecord) {
        this._callbacks && (record._callbacks = this._callbacks);
      }
      return record;
    };

    Model.prototype.clone = function() {
      return createObject(this);
    };

    Model.prototype.reload = function() {
      var original;
      if (this.isNew()) {
        return this;
      }
      original = this.constructor.find(this.id);
      this.load(original.attributes());
      return original;
    };

    Model.prototype.refresh = function(atts) {
      atts = this.constructor.fromJSON(atts);
      if (atts.id && this.id !== atts.id) {
        this.changeID(atts.id);
      }
      this.constructor.irecords[this.id].load(atts);
      this.trigger('refresh', this);
      this.trigger('change', this, 'refresh');
      return this;
    };

    Model.prototype.toJSON = function() {
      return this.attributes();
    };

    Model.prototype.toString = function() {
      return "<" + this.constructor.className + " (" + (JSON.stringify(this)) + ")>";
    };

    Model.prototype.fromForm = function(form) {
      var checkbox, j, k, key, l, len, len1, len2, name, name1, ref, ref1, ref2, result;
      result = {};
      ref = $(form).find('[type=checkbox]:not([value])');
      for (j = 0, len = ref.length; j < len; j++) {
        checkbox = ref[j];
        result[checkbox.name] = $(checkbox).prop('checked');
      }
      ref1 = $(form).find('[type=checkbox][name$="[]"]');
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        checkbox = ref1[k];
        name = checkbox.name.replace(/\[\]$/, '');
        result[name] || (result[name] = []);
        if ($(checkbox).prop('checked')) {
          result[name].push(checkbox.value);
        }
      }
      ref2 = $(form).serializeArray();
      for (l = 0, len2 = ref2.length; l < len2; l++) {
        key = ref2[l];
        result[name1 = key.name] || (result[name1] = key.value);
      }
      return this.load(result);
    };

    Model.prototype.exists = function() {
      return this.constructor.exists(this.id);
    };

    Model.prototype.update = function(options) {
      var clone, records;
      this.trigger('beforeUpdate', this, options);
      records = this.constructor.irecords;
      records[this.id].load(this.attributes());
      this.constructor.sort();
      clone = records[this.id].clone();
      clone.trigger('update', clone, options);
      clone.trigger('change', clone, 'update', options);
      return clone;
    };

    Model.prototype.create = function(options) {
      var clone, record;
      this.trigger('beforeCreate', this, options);
      this.id || (this.id = this.cid);
      record = this.dup(false);
      this.constructor.addRecord(record, options.idx);
      this.constructor.sort();
      clone = record.clone();
      clone.trigger('create', clone, options);
      clone.trigger('change', clone, 'create', options);
      return clone;
    };

    Model.prototype.bind = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.bind.apply(record, arguments);
    };

    Model.prototype.one = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.one.apply(record, arguments);
    };

    Model.prototype.unbind = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.unbind.apply(record, arguments);
    };

    Model.prototype.trigger = function() {
      var ref;
      Events.trigger.apply(this, arguments);
      if (arguments[0] === 'refresh') {
        return true;
      }
      return (ref = this.constructor).trigger.apply(ref, arguments);
    };

    return Model;

  })(Module);

  Model.prototype.on = Model.prototype.bind;

  Model.prototype.off = Model.prototype.unbind;

  Controller = (function(superClass) {
    extend(Controller, superClass);

    Controller.include(Events);

    Controller.include(Log);

    Controller.prototype.eventSplitter = /^(\S+)\s*(.*)$/;

    Controller.prototype.tag = 'div';

    function Controller(options) {
      this.release = bind(this.release, this);
      var context, key, parent_prototype, ref, value;
      this.options = options;
      ref = this.options;
      for (key in ref) {
        value = ref[key];
        this[key] = value;
      }
      if (!this.el) {
        this.el = document.createElement(this.tag);
      }
      this.el = $(this.el);
      if (this.className) {
        this.el.addClass(this.className);
      }
      if (this.attributes) {
        this.el.attr(this.attributes);
      }
      if (!this.events) {
        this.events = this.constructor.events;
      }
      if (!this.elements) {
        this.elements = this.constructor.elements;
      }
      context = this;
      while (parent_prototype = context.constructor.__super__) {
        if (parent_prototype.events) {
          this.events = $.extend({}, parent_prototype.events, this.events);
        }
        if (parent_prototype.elements) {
          this.elements = $.extend({}, parent_prototype.elements, this.elements);
        }
        context = parent_prototype;
      }
      if (this.events) {
        this.delegateEvents(this.events);
      }
      if (this.elements) {
        this.refreshElements();
      }
      Controller.__super__.constructor.apply(this, arguments);
    }

    Controller.prototype.release = function() {
      this.trigger('release', this);
      this.el.remove();
      this.unbind();
      return this.stopListening();
    };

    Controller.prototype.$ = function(selector) {
      return this.el.find(selector);
    };

    Controller.prototype.delegateEvents = function(events) {
      var eventName, key, match, method, results, selector;
      results = [];
      for (key in events) {
        method = events[key];
        if (typeof method === 'function') {
          method = (function(_this) {
            return function(method) {
              return function() {
                method.apply(_this, arguments);
                return true;
              };
            };
          })(this)(method);
        } else {
          if (!this[method]) {
            throw new Error(method + " doesn't exist");
          }
          method = (function(_this) {
            return function(method) {
              return function() {
                _this[method].apply(_this, arguments);
                return true;
              };
            };
          })(this)(method);
        }
        match = key.match(this.eventSplitter);
        eventName = match[1];
        selector = match[2];
        if (selector === '') {
          results.push(this.el.bind(eventName, method));
        } else {
          results.push(this.el.on(eventName, selector, method));
        }
      }
      return results;
    };

    Controller.prototype.refreshElements = function() {
      var key, ref, results, value;
      ref = this.elements;
      results = [];
      for (key in ref) {
        value = ref[key];
        results.push(this[value] = this.$(key));
      }
      return results;
    };

    Controller.prototype.delay = function(func, timeout) {
      return setTimeout(this.proxy(func), timeout || 0);
    };

    Controller.prototype.html = function(element) {
      this.el.html(element.el || element);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.append = function() {
      var e, elements, ref;
      elements = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      elements = (function() {
        var j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          e = elements[j];
          results.push(e.el || e);
        }
        return results;
      })();
      (ref = this.el).append.apply(ref, elements);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.appendTo = function(element) {
      this.el.appendTo(element.el || element);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.prepend = function() {
      var e, elements, ref;
      elements = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      elements = (function() {
        var j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          e = elements[j];
          results.push(e.el || e);
        }
        return results;
      })();
      (ref = this.el).prepend.apply(ref, elements);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.replace = function(element) {
      var previous, ref, ref1;
      element = element.el || element;
      if (typeof element === "string") {
        element = $.trim(element);
      }
      ref1 = [this.el, $(((ref = $.parseHTML(element)) != null ? ref[0] : void 0) || element)], previous = ref1[0], this.el = ref1[1];
      previous.replaceWith(this.el);
      this.delegateEvents(this.events);
      this.refreshElements();
      return this.el;
    };

    return Controller;

  })(Module);

  $ = (typeof window !== "undefined" && window !== null ? window.jQuery : void 0) || (typeof window !== "undefined" && window !== null ? window.Zepto : void 0) || function(element) {
    return element;
  };

  createObject = Object.create || function(o) {
    var Func;
    Func = function() {};
    Func.prototype = o;
    return new Func();
  };

  makeArray = function(args) {
    return Array.prototype.slice.call(args, 0);
  };

  Spine = this.Spine = {};

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine;
  }

  Spine.version = '1.6.2';

  Spine.$ = $;

  Spine.Events = Events;

  Spine.Log = Log;

  Spine.Module = Module;

  Spine.Controller = Controller;

  Spine.Model = Model;

  Module.extend.call(Spine, Events);

  Module.create = Module.sub = Controller.create = Controller.sub = Model.sub = function(instances, statics) {
    var Result;
    Result = (function(superClass) {
      extend(Result, superClass);

      function Result() {
        return Result.__super__.constructor.apply(this, arguments);
      }

      return Result;

    })(this);
    if (instances) {
      Result.include(instances);
    }
    if (statics) {
      Result.extend(statics);
    }
    if (typeof Result.unbind === "function") {
      Result.unbind();
    }
    return Result;
  };

  Model.setup = function(name, attributes) {
    var Instance;
    if (attributes == null) {
      attributes = [];
    }
    Instance = (function(superClass) {
      extend(Instance, superClass);

      function Instance() {
        return Instance.__super__.constructor.apply(this, arguments);
      }

      return Instance;

    })(this);
    Instance.configure.apply(Instance, [name].concat(slice.call(attributes)));
    return Instance;
  };

  Spine.Class = Module;

}).call(this);



},{}],41:[function(require,module,exports){
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";c.addEventListener("click",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel("FPS","#0ff","#002")),f=h(new Stats.Panel("MS","#0f0","#020"));
if(self.performance&&self.performance.memory)var t=h(new Stats.Panel("MB","#f08","#201"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};
Stats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r;q.height=f;q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");b.font="bold "+9*a+"px Helvetica,Arial,sans-serif";b.textBaseline="top";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,
v){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+" "+h+" ("+e(c)+"-"+e(g)+")",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};"object"===typeof module&&(module.exports=Stats);

},{}],42:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],43:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":42,"_process":36,"inherits":33}],44:[function(require,module,exports){
var indexOf = require('indexof');

var Object_keys = function (obj) {
    if (Object.keys) return Object.keys(obj)
    else {
        var res = [];
        for (var key in obj) res.push(key)
        return res;
    }
};

var forEach = function (xs, fn) {
    if (xs.forEach) return xs.forEach(fn)
    else for (var i = 0; i < xs.length; i++) {
        fn(xs[i], i, xs);
    }
};

var defineProp = (function() {
    try {
        Object.defineProperty({}, '_', {});
        return function(obj, name, value) {
            Object.defineProperty(obj, name, {
                writable: true,
                enumerable: false,
                configurable: true,
                value: value
            })
        };
    } catch(e) {
        return function(obj, name, value) {
            obj[name] = value;
        };
    }
}());

var globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',
'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',
'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',
'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',
'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];

function Context() {}
Context.prototype = {};

var Script = exports.Script = function NodeScript (code) {
    if (!(this instanceof Script)) return new Script(code);
    this.code = code;
};

Script.prototype.runInContext = function (context) {
    if (!(context instanceof Context)) {
        throw new TypeError("needs a 'context' argument.");
    }
    
    var iframe = document.createElement('iframe');
    if (!iframe.style) iframe.style = {};
    iframe.style.display = 'none';
    
    document.body.appendChild(iframe);
    
    var win = iframe.contentWindow;
    var wEval = win.eval, wExecScript = win.execScript;

    if (!wEval && wExecScript) {
        // win.eval() magically appears when this is called in IE:
        wExecScript.call(win, 'null');
        wEval = win.eval;
    }
    
    forEach(Object_keys(context), function (key) {
        win[key] = context[key];
    });
    forEach(globals, function (key) {
        if (context[key]) {
            win[key] = context[key];
        }
    });
    
    var winKeys = Object_keys(win);

    var res = wEval.call(win, this.code);
    
    forEach(Object_keys(win), function (key) {
        // Avoid copying circular objects like `top` and `window` by only
        // updating existing context properties or new properties in the `win`
        // that was only introduced after the eval.
        if (key in context || indexOf(winKeys, key) === -1) {
            context[key] = win[key];
        }
    });

    forEach(globals, function (key) {
        if (!(key in context)) {
            defineProp(context, key, win[key]);
        }
    });
    
    document.body.removeChild(iframe);
    
    return res;
};

Script.prototype.runInThisContext = function () {
    return eval(this.code); // maybe...
};

Script.prototype.runInNewContext = function (context) {
    var ctx = Script.createContext(context);
    var res = this.runInContext(ctx);

    forEach(Object_keys(ctx), function (key) {
        context[key] = ctx[key];
    });

    return res;
};

forEach(Object_keys(Script.prototype), function (name) {
    exports[name] = Script[name] = function (code) {
        var s = Script(code);
        return s[name].apply(s, [].slice.call(arguments, 1));
    };
});

exports.createScript = function (code) {
    return exports.Script(code);
};

exports.createContext = Script.createContext = function (context) {
    var copy = new Context();
    if(typeof context === 'object') {
        forEach(Object_keys(context), function (key) {
            copy[key] = context[key];
        });
    }
    return copy;
};

},{"indexof":32}],"dat-gui":[function(require,module,exports){
/**
 * dat-gui JavaScript Controller Library
 * http://code.google.com/p/dat-gui
 *
 * Copyright 2011 Data Arts Team, Google Creative Lab
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */
var dat=dat||{};dat.gui=dat.gui||{};dat.utils=dat.utils||{};dat.controllers=dat.controllers||{};dat.dom=dat.dom||{};dat.color=dat.color||{};dat.utils.css=function(){return{load:function(f,a){a=a||document;var d=a.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=f;a.getElementsByTagName("head")[0].appendChild(d)},inject:function(f,a){a=a||document;var d=document.createElement("style");d.type="text/css";d.innerHTML=f;a.getElementsByTagName("head")[0].appendChild(d)}}}();
dat.utils.common=function(){var f=Array.prototype.forEach,a=Array.prototype.slice;return{BREAK:{},extend:function(d){this.each(a.call(arguments,1),function(a){for(var c in a)this.isUndefined(a[c])||(d[c]=a[c])},this);return d},defaults:function(d){this.each(a.call(arguments,1),function(a){for(var c in a)this.isUndefined(d[c])&&(d[c]=a[c])},this);return d},compose:function(){var d=a.call(arguments);return function(){for(var e=a.call(arguments),c=d.length-1;0<=c;c--)e=[d[c].apply(this,e)];return e[0]}},
each:function(a,e,c){if(a)if(f&&a.forEach&&a.forEach===f)a.forEach(e,c);else if(a.length===a.length+0)for(var b=0,p=a.length;b<p&&!(b in a&&e.call(c,a[b],b)===this.BREAK);b++);else for(b in a)if(e.call(c,a[b],b)===this.BREAK)break},defer:function(a){setTimeout(a,0)},toArray:function(d){return d.toArray?d.toArray():a.call(d)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},
isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return!1===a||!0===a},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}();
dat.controllers.Controller=function(f){var a=function(a,e){this.initialValue=a[e];this.domElement=document.createElement("div");this.object=a;this.property=e;this.__onFinishChange=this.__onChange=void 0};f.extend(a.prototype,{onChange:function(a){this.__onChange=a;return this},onFinishChange:function(a){this.__onFinishChange=a;return this},setValue:function(a){this.object[this.property]=a;this.__onChange&&this.__onChange.call(this,a);this.updateDisplay();return this},getValue:function(){return this.object[this.property]},
updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}});return a}(dat.utils.common);
dat.dom.dom=function(f){function a(b){if("0"===b||f.isUndefined(b))return 0;b=b.match(e);return f.isNull(b)?0:parseFloat(b[1])}var d={};f.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(b,a){f.each(b,function(b){d[b]=a})});var e=/(\d+(\.\d+)?)px/,c={makeSelectable:function(b,a){void 0!==b&&void 0!==b.style&&(b.onselectstart=a?function(){return!1}:function(){},b.style.MozUserSelect=a?"auto":"none",b.style.KhtmlUserSelect=
a?"auto":"none",b.unselectable=a?"on":"off")},makeFullscreen:function(b,a,c){f.isUndefined(a)&&(a=!0);f.isUndefined(c)&&(c=!0);b.style.position="absolute";a&&(b.style.left=0,b.style.right=0);c&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,a,c,e){c=c||{};var r=d[a];if(!r)throw Error("Event type "+a+" not supported.");var n=document.createEvent(r);switch(r){case "MouseEvents":n.initMouseEvent(a,c.bubbles||!1,c.cancelable||!0,window,c.clickCount||1,0,0,c.x||c.clientX||0,c.y||c.clientY||0,!1,
!1,!1,!1,0,null);break;case "KeyboardEvents":r=n.initKeyboardEvent||n.initKeyEvent;f.defaults(c,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0});r(a,c.bubbles||!1,c.cancelable,window,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode);break;default:n.initEvent(a,c.bubbles||!1,c.cancelable||!0)}f.defaults(n,e);b.dispatchEvent(n)},bind:function(a,e,d,f){a.addEventListener?a.addEventListener(e,d,f||!1):a.attachEvent&&a.attachEvent("on"+e,d);return c},
unbind:function(a,e,d,f){a.removeEventListener?a.removeEventListener(e,d,f||!1):a.detachEvent&&a.detachEvent("on"+e,d);return c},addClass:function(a,e){if(void 0===a.className)a.className=e;else if(a.className!==e){var d=a.className.split(/ +/);-1==d.indexOf(e)&&(d.push(e),a.className=d.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return c},removeClass:function(a,e){if(e){if(void 0!==a.className)if(a.className===e)a.removeAttribute("class");else{var d=a.className.split(/ +/),f=d.indexOf(e);-1!=
f&&(d.splice(f,1),a.className=d.join(" "))}}else a.className=void 0;return c},hasClass:function(a,c){return(new RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)")).test(a.className)||!1},getWidth:function(b){b=getComputedStyle(b);return a(b["border-left-width"])+a(b["border-right-width"])+a(b["padding-left"])+a(b["padding-right"])+a(b.width)},getHeight:function(b){b=getComputedStyle(b);return a(b["border-top-width"])+a(b["border-bottom-width"])+a(b["padding-top"])+a(b["padding-bottom"])+a(b.height)},getOffset:function(a){var c=
{left:0,top:0};if(a.offsetParent){do c.left+=a.offsetLeft,c.top+=a.offsetTop;while(a=a.offsetParent)}return c},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return c}(dat.utils.common);
dat.controllers.OptionController=function(f,a,d){var e=function(c,b,f){e.superclass.call(this,c,b);var q=this;this.__select=document.createElement("select");if(d.isArray(f)){var l={};d.each(f,function(a){l[a]=a});f=l}d.each(f,function(a,b){var c=document.createElement("option");c.innerHTML=b;c.setAttribute("value",a);q.__select.appendChild(c)});this.updateDisplay();a.bind(this.__select,"change",function(){q.setValue(this.options[this.selectedIndex].value)});this.domElement.appendChild(this.__select)};
e.superclass=f;d.extend(e.prototype,f.prototype,{setValue:function(a){a=e.superclass.prototype.setValue.call(this,a);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());return a},updateDisplay:function(){this.__select.value=this.getValue();return e.superclass.prototype.updateDisplay.call(this)}});return e}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.controllers.NumberController=function(f,a){function d(a){a=a.toString();return-1<a.indexOf(".")?a.length-a.indexOf(".")-1:0}var e=function(c,b,f){e.superclass.call(this,c,b);f=f||{};this.__min=f.min;this.__max=f.max;this.__step=f.step;a.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step;this.__precision=d(this.__impliedStep)};e.superclass=f;a.extend(e.prototype,f.prototype,
{setValue:function(a){void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max);void 0!==this.__step&&0!=a%this.__step&&(a=Math.round(a/this.__step)*this.__step);return e.superclass.prototype.setValue.call(this,a)},min:function(a){this.__min=a;return this},max:function(a){this.__max=a;return this},step:function(a){this.__impliedStep=this.__step=a;this.__precision=d(a);return this}});return e}(dat.controllers.Controller,dat.utils.common);
dat.controllers.NumberControllerBox=function(f,a,d){var e=function(c,b,f){function q(){var a=parseFloat(n.__input.value);d.isNaN(a)||n.setValue(a)}function l(a){var b=u-a.clientY;n.setValue(n.getValue()+b*n.__impliedStep);u=a.clientY}function r(){a.unbind(window,"mousemove",l);a.unbind(window,"mouseup",r)}this.__truncationSuspended=!1;e.superclass.call(this,c,b,f);var n=this,u;this.__input=document.createElement("input");this.__input.setAttribute("type","text");a.bind(this.__input,"change",q);a.bind(this.__input,
"blur",function(){q();n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())});a.bind(this.__input,"mousedown",function(b){a.bind(window,"mousemove",l);a.bind(window,"mouseup",r);u=b.clientY});a.bind(this.__input,"keydown",function(a){13===a.keyCode&&(n.__truncationSuspended=!0,this.blur(),n.__truncationSuspended=!1)});this.updateDisplay();this.domElement.appendChild(this.__input)};e.superclass=f;d.extend(e.prototype,f.prototype,{updateDisplay:function(){var a=this.__input,b;if(this.__truncationSuspended)b=
this.getValue();else{b=this.getValue();var d=Math.pow(10,this.__precision);b=Math.round(b*d)/d}a.value=b;return e.superclass.prototype.updateDisplay.call(this)}});return e}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common);
dat.controllers.NumberControllerSlider=function(f,a,d,e,c){function b(a,b,c,e,d){return e+(a-b)/(c-b)*(d-e)}var p=function(c,e,d,f,u){function A(c){c.preventDefault();var e=a.getOffset(k.__background),d=a.getWidth(k.__background);k.setValue(b(c.clientX,e.left,e.left+d,k.__min,k.__max));return!1}function g(){a.unbind(window,"mousemove",A);a.unbind(window,"mouseup",g);k.__onFinishChange&&k.__onFinishChange.call(k,k.getValue())}p.superclass.call(this,c,e,{min:d,max:f,step:u});var k=this;this.__background=
document.createElement("div");this.__foreground=document.createElement("div");a.bind(this.__background,"mousedown",function(b){a.bind(window,"mousemove",A);a.bind(window,"mouseup",g);A(b)});a.addClass(this.__background,"slider");a.addClass(this.__foreground,"slider-fg");this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)};p.superclass=f;p.useDefaultStyles=function(){d.inject(c)};e.extend(p.prototype,f.prototype,{updateDisplay:function(){var a=
(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=100*a+"%";return p.superclass.prototype.updateDisplay.call(this)}});return p}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}");
dat.controllers.FunctionController=function(f,a,d){var e=function(c,b,d){e.superclass.call(this,c,b);var f=this;this.__button=document.createElement("div");this.__button.innerHTML=void 0===d?"Fire":d;a.bind(this.__button,"click",function(a){a.preventDefault();f.fire();return!1});a.addClass(this.__button,"button");this.domElement.appendChild(this.__button)};e.superclass=f;d.extend(e.prototype,f.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this);this.getValue().call(this.object);
this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}});return e}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.controllers.BooleanController=function(f,a,d){var e=function(c,b){e.superclass.call(this,c,b);var d=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");a.bind(this.__checkbox,"change",function(){d.setValue(!d.__prev)},!1);this.domElement.appendChild(this.__checkbox);this.updateDisplay()};e.superclass=f;d.extend(e.prototype,f.prototype,{setValue:function(a){a=e.superclass.prototype.setValue.call(this,a);this.__onFinishChange&&
this.__onFinishChange.call(this,this.getValue());this.__prev=this.getValue();return a},updateDisplay:function(){!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1;return e.superclass.prototype.updateDisplay.call(this)}});return e}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.color.toString=function(f){return function(a){if(1==a.a||f.isUndefined(a.a)){for(a=a.hex.toString(16);6>a.length;)a="0"+a;return"#"+a}return"rgba("+Math.round(a.r)+","+Math.round(a.g)+","+Math.round(a.b)+","+a.a+")"}}(dat.utils.common);
dat.color.interpret=function(f,a){var d,e,c=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:f},SIX_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9]{6})$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:f},CSS_RGB:{read:function(a){a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:f},CSS_RGBA:{read:function(a){a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:f}}},{litmus:a.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=
a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(b){return a.isNumber(b.r)&&a.isNumber(b.g)&&a.isNumber(b.b)&&a.isNumber(b.a)?{space:"RGB",r:b.r,g:b.g,b:b.b,a:b.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(b){return a.isNumber(b.r)&&
a.isNumber(b.g)&&a.isNumber(b.b)?{space:"RGB",r:b.r,g:b.g,b:b.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(b){return a.isNumber(b.h)&&a.isNumber(b.s)&&a.isNumber(b.v)&&a.isNumber(b.a)?{space:"HSV",h:b.h,s:b.s,v:b.v,a:b.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(b){return a.isNumber(b.h)&&a.isNumber(b.s)&&a.isNumber(b.v)?{space:"HSV",h:b.h,s:b.s,v:b.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){e=!1;
var b=1<arguments.length?a.toArray(arguments):arguments[0];a.each(c,function(c){if(c.litmus(b))return a.each(c.conversions,function(c,f){d=c.read(b);if(!1===e&&!1!==d)return e=d,d.conversionName=f,d.conversion=c,a.BREAK}),a.BREAK});return e}}(dat.color.toString,dat.utils.common);
dat.GUI=dat.gui.GUI=function(f,a,d,e,c,b,p,q,l,r,n,u,A,g,k){function v(a,b,h,d){if(void 0===b[h])throw Error("Object "+b+' has no property "'+h+'"');d.color?b=new n(b,h):(b=[b,h].concat(d.factoryArgs),b=e.apply(a,b));d.before instanceof c&&(d.before=d.before.__li);y(a,b);g.addClass(b.domElement,"c");h=document.createElement("span");g.addClass(h,"property-name");h.innerHTML=b.property;var f=document.createElement("div");f.appendChild(h);f.appendChild(b.domElement);d=w(a,f,d.before);g.addClass(d,m.CLASS_CONTROLLER_ROW);
g.addClass(d,typeof b.getValue());t(a,d,b);a.__controllers.push(b);return b}function w(a,b,h){var c=document.createElement("li");b&&c.appendChild(b);h?a.__ul.insertBefore(c,params.before):a.__ul.appendChild(c);a.onResize();return c}function t(a,c,h){h.__li=c;h.__gui=a;k.extend(h,{options:function(b){if(1<arguments.length)return h.remove(),v(a,h.object,h.property,{before:h.__li.nextElementSibling,factoryArgs:[k.toArray(arguments)]});if(k.isArray(b)||k.isObject(b))return h.remove(),v(a,h.object,h.property,
{before:h.__li.nextElementSibling,factoryArgs:[b]})},name:function(a){h.__li.firstElementChild.firstElementChild.innerHTML=a;return h},listen:function(){h.__gui.listen(h);return h},remove:function(){h.__gui.remove(h);return h}});if(h instanceof l){var d=new q(h.object,h.property,{min:h.__min,max:h.__max,step:h.__step});k.each(["updateDisplay","onChange","onFinishChange"],function(a){var K=h[a],b=d[a];h[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);K.apply(h,a);return b.apply(d,a)}});
g.addClass(c,"has-slider");h.domElement.insertBefore(d.domElement,h.domElement.firstElementChild)}else if(h instanceof q){var e=function(b){return k.isNumber(h.__min)&&k.isNumber(h.__max)?(h.remove(),v(a,h.object,h.property,{before:h.__li.nextElementSibling,factoryArgs:[h.__min,h.__max,h.__step]})):b};h.min=k.compose(e,h.min);h.max=k.compose(e,h.max)}else h instanceof b?(g.bind(c,"click",function(){g.fakeEvent(h.__checkbox,"click")}),g.bind(h.__checkbox,"click",function(a){a.stopPropagation()})):
h instanceof p?(g.bind(c,"click",function(){g.fakeEvent(h.__button,"click")}),g.bind(c,"mouseover",function(){g.addClass(h.__button,"hover")}),g.bind(c,"mouseout",function(){g.removeClass(h.__button,"hover")})):h instanceof n&&(g.addClass(c,"color"),h.updateDisplay=k.compose(function(a){c.style.borderLeftColor=h.__color.toString();return a},h.updateDisplay),h.updateDisplay());h.setValue=k.compose(function(b){a.getRoot().__preset_select&&h.isModified()&&E(a.getRoot(),!0);return b},h.setValue)}function y(a,
b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e);e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])c=c[a.preset];else if(c.Default)c=c.Default;else return;c[d]&&void 0!==c[d][b.property]&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function L(a){var b=a.__save_row=document.createElement("li");g.addClass(a.domElement,"has-save");
a.__ul.insertBefore(b,a.__ul.firstChild);g.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;";g.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save";g.addClass(d,"button");g.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New";g.addClass(e,"button");g.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert";g.addClass(f,"button");g.addClass(f,"revert");var r=a.__preset_select=document.createElement("select");
a.load&&a.load.remembered?k.each(a.load.remembered,function(b,c){F(a,c,c==a.preset)}):F(a,"Default",!1);g.bind(r,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value});b.appendChild(r);b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);if(x){var n=function(){u.style.display=a.useLocalStorage?"block":"none"},b=document.getElementById("dg-save-locally"),u=document.getElementById("dg-local-explain");
b.style.display="block";b=document.getElementById("dg-local-storage");"true"===localStorage.getItem(document.location.href+".isLocal")&&b.setAttribute("checked","checked");n();g.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage;n()})}var m=document.getElementById("dg-new-constructor");g.bind(m,"keydown",function(a){!a.metaKey||67!==a.which&&67!=a.keyCode||B.hide()});g.bind(c,"click",function(){m.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2);B.show();m.focus();m.select()});g.bind(d,
"click",function(){a.save()});g.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)});g.bind(f,"click",function(){a.revert()})}function M(a){function b(f){f.preventDefault();e=f.clientX;g.addClass(a.__closeButton,m.CLASS_DRAG);g.bind(window,"mousemove",c);g.bind(window,"mouseup",d);return!1}function c(b){b.preventDefault();a.width+=e-b.clientX;a.onResize();e=b.clientX;return!1}function d(){g.removeClass(a.__closeButton,m.CLASS_DRAG);g.unbind(window,"mousemove",c);g.unbind(window,
"mouseup",d)}a.__resize_handle=document.createElement("div");k.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;g.bind(a.__resize_handle,"mousedown",b);g.bind(a.__closeButton,"mousedown",b);a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function G(a,b){a.domElement.style.width=b+"px";a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px");a.__closeButton&&(a.__closeButton.style.width=b+"px")}
function C(a,b){var c={};k.each(a.__rememberedObjects,function(d,e){var f={};k.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()});c[e]=f});return c}function F(a,b,c){var d=document.createElement("option");d.innerHTML=b;d.value=b;a.__preset_select.appendChild(d);c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function E(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function H(a){0!=a.length&&
u(function(){H(a)});k.each(a,function(a){a.updateDisplay()})}f.inject(d);var x;try{x="localStorage"in window&&null!==window.localStorage}catch(N){x=!1}var B,I=!0,z,D=!1,J=[],m=function(a){function b(){var a=c.getRoot();a.width+=1;k.defer(function(){--a.width})}var c=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);g.addClass(this.domElement,"dg");this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=
[];this.__listening=[];a=a||{};a=k.defaults(a,{autoPlace:!0,width:m.DEFAULT_WIDTH});a=k.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace});k.isUndefined(a.load)?a.load={preset:"Default"}:a.preset&&(a.load.preset=a.preset);k.isUndefined(a.parent)&&a.hideable&&J.push(this);a.resizable=k.isUndefined(a.parent)&&a.resizable;a.autoPlace&&k.isUndefined(a.scrollable)&&(a.scrollable=!0);var d=x&&"true"===localStorage.getItem(document.location.href+".isLocal"),e;Object.defineProperties(this,{parent:{get:function(){return a.parent}},
scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return c.parent?c.getRoot().preset:a.load.preset},set:function(b){c.parent?c.getRoot().preset=b:a.load.preset=b;for(b=0;b<this.__preset_select.length;b++)this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=b);c.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b;G(c,b)}},name:{get:function(){return a.name},set:function(b){a.name=
b;r&&(r.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b;a.closed?g.addClass(c.__ul,m.CLASS_CLOSED):g.removeClass(c.__ul,m.CLASS_CLOSED);this.onResize();c.__closeButton&&(c.__closeButton.innerHTML=b?m.TEXT_OPEN:m.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return d},set:function(a){x&&((d=a)?g.bind(window,"unload",e):g.unbind(window,"unload",e),localStorage.setItem(document.location.href+".isLocal",a))}}});if(k.isUndefined(a.parent)){a.closed=
!1;g.addClass(this.domElement,m.CLASS_MAIN);g.makeSelectable(this.domElement,!1);if(x&&d){c.useLocalStorage=!0;var f=localStorage.getItem(document.location.href+".gui");f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=m.TEXT_CLOSED;g.addClass(this.__closeButton,m.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);g.bind(this.__closeButton,"click",function(){c.closed=!c.closed})}else{void 0===a.closed&&(a.closed=!0);var r=document.createTextNode(a.name);
g.addClass(r,"controller-name");f=w(c,r);g.addClass(this.__ul,m.CLASS_CLOSED);g.addClass(f,"title");g.bind(f,"click",function(a){a.preventDefault();c.closed=!c.closed;return!1});a.closed||(this.closed=!1)}a.autoPlace&&(k.isUndefined(a.parent)&&(I&&(z=document.createElement("div"),g.addClass(z,"dg"),g.addClass(z,m.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(z),I=!1),z.appendChild(this.domElement),g.addClass(this.domElement,m.CLASS_AUTO_PLACE)),this.parent||G(c,a.width));g.bind(window,"resize",
function(){c.onResize()});g.bind(this.__ul,"webkitTransitionEnd",function(){c.onResize()});g.bind(this.__ul,"transitionend",function(){c.onResize()});g.bind(this.__ul,"oTransitionEnd",function(){c.onResize()});this.onResize();a.resizable&&M(this);this.saveToLocalStorageIfPossible=e=function(){x&&"true"===localStorage.getItem(document.location.href+".isLocal")&&localStorage.setItem(document.location.href+".gui",JSON.stringify(c.getSaveObject()))};c.getRoot();a.parent||b()};m.toggleHide=function(){D=
!D;k.each(J,function(a){a.domElement.style.zIndex=D?-999:999;a.domElement.style.opacity=D?0:1})};m.CLASS_AUTO_PLACE="a";m.CLASS_AUTO_PLACE_CONTAINER="ac";m.CLASS_MAIN="main";m.CLASS_CONTROLLER_ROW="cr";m.CLASS_TOO_TALL="taller-than-window";m.CLASS_CLOSED="closed";m.CLASS_CLOSE_BUTTON="close-button";m.CLASS_DRAG="drag";m.DEFAULT_WIDTH=245;m.TEXT_CLOSED="Close Controls";m.TEXT_OPEN="Open Controls";g.bind(window,"keydown",function(a){"text"===document.activeElement.type||72!==a.which&&72!=a.keyCode||
m.toggleHide()},!1);k.extend(m.prototype,{add:function(a,b){return v(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return v(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li);this.__controllers.splice(this.__controllers.indexOf(a),1);var b=this;k.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&z.removeChild(this.domElement)},addFolder:function(a){if(void 0!==this.__folders[a])throw Error('You already have a folder in this GUI by the name "'+
a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace;this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);b=new m(b);this.__folders[a]=b;a=w(this,b.domElement);g.addClass(a,"folder");return b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=g.getOffset(a.__ul).top,c=0;k.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=g.getHeight(b))});
window.innerHeight-b-20<c?(g.addClass(a.domElement,m.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(g.removeClass(a.domElement,m.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&k.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"});a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){k.isUndefined(B)&&(B=new A,B.domElement.innerHTML=a);if(this.parent)throw Error("You can only call remember on a top level GUI.");var b=
this;k.each(Array.prototype.slice.call(arguments),function(a){0==b.__rememberedObjects.length&&L(b);-1==b.__rememberedObjects.indexOf(a)&&b.__rememberedObjects.push(a)});this.autoPlace&&G(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;a.closed=this.closed;0<this.__rememberedObjects.length&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=C(this));a.folders={};k.each(this.__folders,function(b,
c){a.folders[c]=b.getSaveObject()});return a},save:function(){this.load.remembered||(this.load.remembered={});this.load.remembered[this.preset]=C(this);E(this,!1);this.saveToLocalStorageIfPossible()},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=C(this,!0));this.load.remembered[a]=C(this);this.preset=a;F(this,a,!0);this.saveToLocalStorageIfPossible()},revert:function(a){k.each(this.__controllers,function(b){this.getRoot().load.remembered?y(a||this.getRoot(),
b):b.setValue(b.initialValue)},this);k.each(this.__folders,function(a){a.revert(a)});a||E(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a);b&&H(this.__listening)}});return m}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',
".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",
dat.controllers.factory=function(f,a,d,e,c,b,p){return function(q,l,r,n){var u=q[l];if(p.isArray(r)||p.isObject(r))return new f(q,l,r);if(p.isNumber(u))return p.isNumber(r)&&p.isNumber(n)?new d(q,l,r,n):new a(q,l,{min:r,max:n});if(p.isString(u))return new e(q,l);if(p.isFunction(u))return new c(q,l,"");if(p.isBoolean(u))return new b(q,l)}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(f,a,d){var e=
function(c,b){function d(){f.setValue(f.__input.value)}e.superclass.call(this,c,b);var f=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");a.bind(this.__input,"keyup",d);a.bind(this.__input,"change",d);a.bind(this.__input,"blur",function(){f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())});a.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()});this.updateDisplay();this.domElement.appendChild(this.__input)};e.superclass=f;d.extend(e.prototype,
f.prototype,{updateDisplay:function(){a.isActive(this.__input)||(this.__input.value=this.getValue());return e.superclass.prototype.updateDisplay.call(this)}});return e}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,
dat.controllers.ColorController=function(f,a,d,e,c){function b(a,b,d,e){a.style.background="";c.each(l,function(c){a.style.cssText+="background: "+c+"linear-gradient("+b+", "+d+" 0%, "+e+" 100%); "})}function p(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";
a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var q=function(f,n){function u(b){v(b);a.bind(window,"mousemove",v);a.bind(window,
"mouseup",l)}function l(){a.unbind(window,"mousemove",v);a.unbind(window,"mouseup",l)}function g(){var a=e(this.value);!1!==a?(t.__color.__state=a,t.setValue(t.__color.toOriginal())):this.value=t.__color.toString()}function k(){a.unbind(window,"mousemove",w);a.unbind(window,"mouseup",k)}function v(b){b.preventDefault();var c=a.getWidth(t.__saturation_field),d=a.getOffset(t.__saturation_field),e=(b.clientX-d.left+document.body.scrollLeft)/c;b=1-(b.clientY-d.top+document.body.scrollTop)/c;1<b?b=1:0>
b&&(b=0);1<e?e=1:0>e&&(e=0);t.__color.v=b;t.__color.s=e;t.setValue(t.__color.toOriginal());return!1}function w(b){b.preventDefault();var c=a.getHeight(t.__hue_field),d=a.getOffset(t.__hue_field);b=1-(b.clientY-d.top+document.body.scrollTop)/c;1<b?b=1:0>b&&(b=0);t.__color.h=360*b;t.setValue(t.__color.toOriginal());return!1}q.superclass.call(this,f,n);this.__color=new d(this.getValue());this.__temp=new d(0);var t=this;this.domElement=document.createElement("div");a.makeSelectable(this.domElement,!1);
this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");
this.__input.type="text";this.__input_textShadow="0 1px 1px ";a.bind(this.__input,"keydown",function(a){13===a.keyCode&&g.call(this)});a.bind(this.__input,"blur",g);a.bind(this.__selector,"mousedown",function(b){a.addClass(this,"drag").bind(window,"mouseup",function(b){a.removeClass(t.__selector,"drag")})});var y=document.createElement("div");c.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});c.extend(this.__field_knob.style,
{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});c.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});c.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});c.extend(y.style,{width:"100%",height:"100%",
background:"none"});b(y,"top","rgba(0,0,0,0)","#000");c.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});p(this.__hue_field);c.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});a.bind(this.__saturation_field,"mousedown",u);a.bind(this.__field_knob,"mousedown",u);a.bind(this.__hue_field,"mousedown",function(b){w(b);a.bind(window,
"mousemove",w);a.bind(window,"mouseup",k)});this.__saturation_field.appendChild(y);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay()};q.superclass=f;c.extend(q.prototype,f.prototype,{updateDisplay:function(){var a=e(this.getValue());if(!1!==a){var f=!1;
c.each(d.COMPONENTS,function(b){if(!c.isUndefined(a[b])&&!c.isUndefined(this.__color.__state[b])&&a[b]!==this.__color.__state[b])return f=!0,{}},this);f&&c.extend(this.__color.__state,a)}c.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var l=.5>this.__color.v||.5<this.__color.s?255:0,p=255-l;c.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+l+
","+l+","+l+")"});this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px";this.__temp.s=1;this.__temp.v=1;b(this.__saturation_field,"left","#fff",this.__temp.toString());c.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+l+","+l+","+l+")",textShadow:this.__input_textShadow+"rgba("+p+","+p+","+p+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return q}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(f,a,d,e){function c(a,
b,c){Object.defineProperty(a,b,{get:function(){if("RGB"===this.__state.space)return this.__state[b];p(this,b,c);return this.__state[b]},set:function(a){"RGB"!==this.__state.space&&(p(this,b,c),this.__state.space="RGB");this.__state[b]=a}})}function b(a,b){Object.defineProperty(a,b,{get:function(){if("HSV"===this.__state.space)return this.__state[b];q(this);return this.__state[b]},set:function(a){"HSV"!==this.__state.space&&(q(this),this.__state.space="HSV");this.__state[b]=a}})}function p(b,c,d){if("HEX"===
b.__state.space)b.__state[c]=a.component_from_hex(b.__state.hex,d);else if("HSV"===b.__state.space)e.extend(b.__state,a.hsv_to_rgb(b.__state.h,b.__state.s,b.__state.v));else throw"Corrupted color state";}function q(b){var c=a.rgb_to_hsv(b.r,b.g,b.b);e.extend(b.__state,{s:c.s,v:c.v});e.isNaN(c.h)?e.isUndefined(b.__state.h)&&(b.__state.h=0):b.__state.h=c.h}var l=function(){this.__state=f.apply(this,arguments);if(!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||
1};l.COMPONENTS="r g b h s v hex a".split(" ");e.extend(l.prototype,{toString:function(){return d(this)},toOriginal:function(){return this.__state.conversion.write(this)}});c(l.prototype,"r",2);c(l.prototype,"g",1);c(l.prototype,"b",0);b(l.prototype,"h");b(l.prototype,"s");b(l.prototype,"v");Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}});Object.defineProperty(l.prototype,"hex",{get:function(){"HEX"!==!this.__state.space&&(this.__state.hex=
a.rgb_to_hex(this.r,this.g,this.b));return this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}});return l}(dat.color.interpret,dat.color.math=function(){var f;return{hsv_to_rgb:function(a,d,e){var c=a/60-Math.floor(a/60),b=e*(1-d),f=e*(1-c*d);d=e*(1-(1-c)*d);a=[[e,d,b],[f,e,b],[b,e,d],[b,f,e],[d,b,e],[e,b,f]][Math.floor(a/60)%6];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(a,d,e){var c=Math.min(a,d,e),b=Math.max(a,d,e),c=b-c;if(0==b)return{h:NaN,s:0,v:0};
a=(a==b?(d-e)/c:d==b?2+(e-a)/c:4+(a-d)/c)/6;0>a&&(a+=1);return{h:360*a,s:c/b,v:b/255}},rgb_to_hex:function(a,d,e){a=this.hex_with_component(0,2,a);a=this.hex_with_component(a,1,d);return a=this.hex_with_component(a,0,e)},component_from_hex:function(a,d){return a>>8*d&255},hex_with_component:function(a,d,e){return e<<(f=8*d)|a&~(255<<f)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f,a){window.setTimeout(f,1E3/60)}}(),dat.dom.CenteredDiv=function(f,a){var d=function(){this.backgroundElement=document.createElement("div");a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});f.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position=
"fixed";this.domElement=document.createElement("div");a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var d=this;f.bind(this.backgroundElement,"click",function(){d.hide()})};d.prototype.show=function(){var d=this;this.backgroundElement.style.display=
"block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();a.defer(function(){d.backgroundElement.style.opacity=1;d.domElement.style.opacity=1;d.domElement.style.webkitTransform="scale(1)"})};d.prototype.hide=function(){var a=this,c=function(){a.domElement.style.display="none";a.backgroundElement.style.display="none";f.unbind(a.domElement,"webkitTransitionEnd",c);f.unbind(a.domElement,"transitionend",c);f.unbind(a.domElement,
"oTransitionEnd",c)};f.bind(this.domElement,"webkitTransitionEnd",c);f.bind(this.domElement,"transitionend",c);f.bind(this.domElement,"oTransitionEnd",c);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};d.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-f.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-f.getHeight(this.domElement)/2+"px"};return d}(dat.dom.dom,dat.utils.common),
dat.dom.dom,dat.utils.common);module.exports=dat;
},{}],"iced-coffee-script":[function(require,module,exports){
(function (process,global){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Lexer, SourceMap, compile, ext, formatSourcePosition, fs, getSourceMap, helpers, iced_runtime, iced_transform, lexer, parser, path, sourceMaps, vm, withPrettyErrors, _base, _i, _len, _ref,
    __hasProp = {}.hasOwnProperty,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  fs = require('fs');

  vm = require('vm');

  path = require('path');

  Lexer = require('./lexer').Lexer;

  parser = require('./parser').parser;

  helpers = require('./helpers');

  SourceMap = require('./sourcemap').SourceMap;

  iced_transform = require('./iced').transform;

  iced_runtime = require('iced-runtime');

  exports.VERSION = '108.0.11';

  exports.FILE_EXTENSIONS = ['.coffee', '.litcoffee', '.coffee.md', '.iced', '.liticed', '.iced.md'];

  exports.helpers = helpers;

  withPrettyErrors = function(fn) {
    return function(code, options) {
      var err;
      if (options == null) {
        options = {};
      }
      try {
        return fn.call(this, code, options);
      } catch (_error) {
        err = _error;
        throw helpers.updateSyntaxError(err, code, options.filename);
      }
    };
  };

  exports.compile = compile = withPrettyErrors(function(code, options) {
    var answer, currentColumn, currentLine, extend, fragment, fragments, header, js, map, merge, newLines, _i, _len;
    merge = helpers.merge, extend = helpers.extend;
    options = extend({}, options);
    if (options.sourceMap) {
      map = new SourceMap;
    }
    fragments = (iced_transform(parser.parse(lexer.tokenize(code, options)), options)).compileToFragments(options);
    currentLine = 0;
    if (options.header) {
      currentLine += 1;
    }
    if (options.shiftLine) {
      currentLine += 1;
    }
    currentColumn = 0;
    js = "";
    for (_i = 0, _len = fragments.length; _i < _len; _i++) {
      fragment = fragments[_i];
      if (options.sourceMap) {
        if (fragment.locationData) {
          map.add([fragment.locationData.first_line, fragment.locationData.first_column], [currentLine, currentColumn], {
            noReplace: true
          });
        }
        newLines = helpers.count(fragment.code, "\n");
        currentLine += newLines;
        if (newLines) {
          currentColumn = fragment.code.length - (fragment.code.lastIndexOf("\n") + 1);
        } else {
          currentColumn += fragment.code.length;
        }
      }
      js += fragment.code;
    }
    if (options.header) {
      header = "Generated by IcedCoffeeScript " + this.VERSION;
      js = "// " + header + "\n" + js;
    }
    if (options.sourceMap) {
      answer = {
        js: js
      };
      answer.sourceMap = map;
      answer.v3SourceMap = map.generate(options, code);
      return answer;
    } else {
      return js;
    }
  });

  exports.tokens = withPrettyErrors(function(code, options) {
    return lexer.tokenize(code, options);
  });

  exports.nodes = withPrettyErrors(function(source, options) {
    var ast;
    if (typeof source === 'string') {
      ast = parser.parse(lexer.tokenize(source, options));
    } else {
      ast = parser.parse(source);
    }
    if (!options.noIcedTransform) {
      ast = iced_transform(ast, options);
    }
    return ast;
  });

  exports.run = function(code, options) {
    var answer, dir, mainModule, _ref;
    if (options == null) {
      options = {};
    }
    mainModule = require.main;
    mainModule.filename = process.argv[1] = options.filename ? fs.realpathSync(options.filename) : '.';
    mainModule.moduleCache && (mainModule.moduleCache = {});
    dir = options.filename ? path.dirname(fs.realpathSync(options.filename)) : fs.realpathSync('.');
    mainModule.paths = require('module')._nodeModulePaths(dir);
    if (!helpers.isCoffee(mainModule.filename) || require.extensions) {
      options.runtime = "interp";
      answer = compile(code, options);
      code = (_ref = answer.js) != null ? _ref : answer;
    }
    return mainModule._compile(code, mainModule.filename);
  };

  exports["eval"] = function(code, options) {
    var Module, Script, js, k, o, r, sandbox, v, _i, _len, _module, _ref, _ref1, _require;
    if (options == null) {
      options = {};
    }
    if (!(code = code.trim())) {
      return;
    }
    Script = vm.Script;
    if (Script) {
      if (options.sandbox != null) {
        if (options.sandbox instanceof Script.createContext().constructor) {
          sandbox = options.sandbox;
        } else {
          sandbox = Script.createContext();
          _ref = options.sandbox;
          for (k in _ref) {
            if (!__hasProp.call(_ref, k)) continue;
            v = _ref[k];
            sandbox[k] = v;
          }
        }
        sandbox.global = sandbox.root = sandbox.GLOBAL = sandbox;
      } else {
        sandbox = global;
      }
      sandbox.__filename = options.filename || 'eval';
      sandbox.__dirname = path.dirname(sandbox.__filename);
      if (!(sandbox !== global || sandbox.module || sandbox.require)) {
        Module = require('module');
        sandbox.module = _module = new Module(options.modulename || 'eval');
        sandbox.require = _require = function(path) {
          return Module._load(path, _module, true);
        };
        _module.filename = sandbox.__filename;
        _ref1 = Object.getOwnPropertyNames(require);
        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
          r = _ref1[_i];
          if (r !== 'paths') {
            _require[r] = require[r];
          }
        }
        _require.paths = _module.paths = Module._nodeModulePaths(process.cwd());
        _require.resolve = function(request) {
          return Module._resolveFilename(request, _module);
        };
      }
    }
    o = {};
    for (k in options) {
      if (!__hasProp.call(options, k)) continue;
      v = options[k];
      o[k] = v;
    }
    o.bare = true;
    js = compile(code, o);
    if (sandbox === global) {
      return vm.runInThisContext(js);
    } else {
      return vm.runInContext(js, sandbox);
    }
  };

  exports.register = function() {
    return require('./register');
  };

  if (require.extensions) {
    _ref = this.FILE_EXTENSIONS;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ext = _ref[_i];
      if ((_base = require.extensions)[ext] == null) {
        _base[ext] = function() {
          throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require " + ext + " files.");
        };
      }
    }
  }

  exports._compileFile = function(filename, sourceMap, opts_passed) {
    var answer, err, k, opts, raw, stripped, v;
    if (sourceMap == null) {
      sourceMap = false;
    }
    if (opts_passed == null) {
      opts_passed = {};
    }
    raw = fs.readFileSync(filename, 'utf8');
    stripped = raw.charCodeAt(0) === 0xFEFF ? raw.substring(1) : raw;
    opts = {
      filename: filename,
      sourceMap: sourceMap,
      literate: helpers.isLiterate(filename)
    };
    for (k in opts_passed) {
      v = opts_passed[k];
      opts[k] = v;
    }
    try {
      answer = compile(stripped, opts);
    } catch (_error) {
      err = _error;
      throw helpers.updateSyntaxError(err, stripped, filename);
    }
    return answer;
  };

  lexer = new Lexer;

  parser.lexer = {
    lex: function() {
      var tag, token;
      token = this.tokens[this.pos++];
      if (token) {
        tag = token[0], this.yytext = token[1], this.yylloc = token[2];
        this.errorToken = token.origin || token;
        this.yylineno = this.yylloc.first_line;
      } else {
        tag = '';
      }
      return tag;
    },
    setInput: function(tokens) {
      this.tokens = tokens;
      return this.pos = 0;
    },
    upcomingInput: function() {
      return "";
    }
  };

  parser.yy = require('./nodes');

  exports.iced = iced_runtime;

  parser.yy.parseError = function(message, _arg) {
    var errorLoc, errorTag, errorText, errorToken, token, tokens, _ref1;
    token = _arg.token;
    _ref1 = parser.lexer, errorToken = _ref1.errorToken, tokens = _ref1.tokens;
    errorTag = errorToken[0], errorText = errorToken[1], errorLoc = errorToken[2];
    errorText = errorToken === tokens[tokens.length - 1] ? 'end of input' : errorTag === 'INDENT' || errorTag === 'OUTDENT' ? 'indentation' : helpers.nameWhitespaceCharacter(errorText);
    return helpers.throwSyntaxError("unexpected " + errorText, errorLoc);
  };

  formatSourcePosition = function(frame, getSourceMapping) {
    var as, column, fileLocation, fileName, functionName, isConstructor, isMethodCall, line, methodName, source, tp, typeName;
    fileName = void 0;
    fileLocation = '';
    if (frame.isNative()) {
      fileLocation = "native";
    } else {
      if (frame.isEval()) {
        fileName = frame.getScriptNameOrSourceURL();
        if (!fileName) {
          fileLocation = "" + (frame.getEvalOrigin()) + ", ";
        }
      } else {
        fileName = frame.getFileName();
      }
      fileName || (fileName = "<anonymous>");
      line = frame.getLineNumber();
      column = frame.getColumnNumber();
      source = getSourceMapping(fileName, line, column);
      fileLocation = source ? "" + fileName + ":" + source[0] + ":" + source[1] : "" + fileName + ":" + line + ":" + column;
    }
    functionName = frame.getFunctionName();
    isConstructor = frame.isConstructor();
    isMethodCall = !(frame.isToplevel() || isConstructor);
    if (isMethodCall) {
      methodName = frame.getMethodName();
      typeName = frame.getTypeName();
      if (functionName) {
        tp = as = '';
        if (typeName && functionName.indexOf(typeName)) {
          tp = "" + typeName + ".";
        }
        if (methodName && functionName.indexOf("." + methodName) !== functionName.length - methodName.length - 1) {
          as = " [as " + methodName + "]";
        }
        return "" + tp + functionName + as + " (" + fileLocation + ")";
      } else {
        return "" + typeName + "." + (methodName || '<anonymous>') + " (" + fileLocation + ")";
      }
    } else if (isConstructor) {
      return "new " + (functionName || '<anonymous>') + " (" + fileLocation + ")";
    } else if (functionName) {
      return "" + functionName + " (" + fileLocation + ")";
    } else {
      return fileLocation;
    }
  };

  sourceMaps = {};

  getSourceMap = function(filename) {
    var answer, _ref1;
    if (sourceMaps[filename]) {
      return sourceMaps[filename];
    }
    if (_ref1 = path != null ? path.extname(filename) : void 0, __indexOf.call(exports.FILE_EXTENSIONS, _ref1) < 0) {
      return;
    }
    answer = exports._compileFile(filename, true);
    return sourceMaps[filename] = answer.sourceMap;
  };

  Error.prepareStackTrace = function(err, stack) {
    var frame, frames, getSourceMapping;
    getSourceMapping = function(filename, line, column) {
      var answer, sourceMap;
      sourceMap = getSourceMap(filename);
      if (sourceMap) {
        answer = sourceMap.sourceLocation([line - 1, column - 1]);
      }
      if (answer) {
        return [answer[0] + 1, answer[1] + 1];
      } else {
        return null;
      }
    };
    frames = (function() {
      var _j, _len1, _results;
      _results = [];
      for (_j = 0, _len1 = stack.length; _j < _len1; _j++) {
        frame = stack[_j];
        if (frame.getFunction() === exports.run) {
          break;
        }
        _results.push("  at " + (formatSourcePosition(frame, getSourceMapping)));
      }
      return _results;
    })();
    return "" + (err.toString()) + "\n" + (frames.join('\n')) + "\n";
  };

}).call(this);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./helpers":19,"./iced":20,"./lexer":21,"./nodes":22,"./parser":23,"./register":24,"./sourcemap":27,"_process":36,"fs":14,"iced-runtime":30,"module":14,"path":35,"vm":44}],"spine":[function(require,module,exports){
module.exports = require('./lib/spine');
},{"./lib/spine":40}],"tween.js":[function(require,module,exports){
/**
 * Tween.js - Licensed under the MIT license
 * https://github.com/tweenjs/tween.js
 * ----------------------------------------------
 *
 * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.
 * Thank you all, you're awesome!
 */

// Include a performance.now polyfill
(function () {

	if ('performance' in window === false) {
		window.performance = {};
	}

	// IE 8
	Date.now = (Date.now || function () {
		return new Date().getTime();
	});

	if ('now' in window.performance === false) {
		var offset = window.performance.timing && window.performance.timing.navigationStart ? window.performance.timing.navigationStart
		                                                                                    : Date.now();

		window.performance.now = function () {
			return Date.now() - offset;
		};
	}

})();

var TWEEN = TWEEN || (function () {

	var _tweens = [];

	return {

		getAll: function () {

			return _tweens;

		},

		removeAll: function () {

			_tweens = [];

		},

		add: function (tween) {

			_tweens.push(tween);

		},

		remove: function (tween) {

			var i = _tweens.indexOf(tween);

			if (i !== -1) {
				_tweens.splice(i, 1);
			}

		},

		update: function (time) {

			if (_tweens.length === 0) {
				return false;
			}

			var i = 0;

			time = time !== undefined ? time : window.performance.now();

			while (i < _tweens.length) {

				if (_tweens[i].update(time)) {
					i++;
				} else {
					_tweens.splice(i, 1);
				}

			}

			return true;

		}
	};

})();

TWEEN.Tween = function (object) {

	var _object = object;
	var _valuesStart = {};
	var _valuesEnd = {};
	var _valuesStartRepeat = {};
	var _duration = 1000;
	var _repeat = 0;
	var _yoyo = false;
	var _isPlaying = false;
	var _reversed = false;
	var _delayTime = 0;
	var _startTime = null;
	var _easingFunction = TWEEN.Easing.Linear.None;
	var _interpolationFunction = TWEEN.Interpolation.Linear;
	var _chainedTweens = [];
	var _onStartCallback = null;
	var _onStartCallbackFired = false;
	var _onUpdateCallback = null;
	var _onCompleteCallback = null;
	var _onStopCallback = null;

	// Set all starting values present on the target object
	for (var field in object) {
		_valuesStart[field] = parseFloat(object[field], 10);
	}

	this.to = function (properties, duration) {

		if (duration !== undefined) {
			_duration = duration;
		}

		_valuesEnd = properties;

		return this;

	};

	this.start = function (time) {

		TWEEN.add(this);

		_isPlaying = true;

		_onStartCallbackFired = false;

		_startTime = time !== undefined ? time : window.performance.now();
		_startTime += _delayTime;

		for (var property in _valuesEnd) {

			// Check if an Array was provided as property value
			if (_valuesEnd[property] instanceof Array) {

				if (_valuesEnd[property].length === 0) {
					continue;
				}

				// Create a local copy of the Array with the start value at the front
				_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);

			}

			// If `to()` specifies a property that doesn't exist in the source object,
			// we should not set that property in the object
			if (_valuesStart[property] === undefined) {
				continue;
			}

			_valuesStart[property] = _object[property];

			if ((_valuesStart[property] instanceof Array) === false) {
				_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings
			}

			_valuesStartRepeat[property] = _valuesStart[property] || 0;

		}

		return this;

	};

	this.stop = function () {

		if (!_isPlaying) {
			return this;
		}

		TWEEN.remove(this);
		_isPlaying = false;

		if (_onStopCallback !== null) {
			_onStopCallback.call(_object);
		}

		this.stopChainedTweens();
		return this;

	};

	this.stopChainedTweens = function () {

		for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {
			_chainedTweens[i].stop();
		}

	};

	this.delay = function (amount) {

		_delayTime = amount;
		return this;

	};

	this.repeat = function (times) {

		_repeat = times;
		return this;

	};

	this.yoyo = function (yoyo) {

		_yoyo = yoyo;
		return this;

	};


	this.easing = function (easing) {

		_easingFunction = easing;
		return this;

	};

	this.interpolation = function (interpolation) {

		_interpolationFunction = interpolation;
		return this;

	};

	this.chain = function () {

		_chainedTweens = arguments;
		return this;

	};

	this.onStart = function (callback) {

		_onStartCallback = callback;
		return this;

	};

	this.onUpdate = function (callback) {

		_onUpdateCallback = callback;
		return this;

	};

	this.onComplete = function (callback) {

		_onCompleteCallback = callback;
		return this;

	};

	this.onStop = function (callback) {

		_onStopCallback = callback;
		return this;

	};

	this.update = function (time) {

		var property;
		var elapsed;
		var value;

		if (time < _startTime) {
			return true;
		}

		if (_onStartCallbackFired === false) {

			if (_onStartCallback !== null) {
				_onStartCallback.call(_object);
			}

			_onStartCallbackFired = true;

		}

		elapsed = (time - _startTime) / _duration;
		elapsed = elapsed > 1 ? 1 : elapsed;

		value = _easingFunction(elapsed);

		for (property in _valuesEnd) {

			// Don't update properties that do not exist in the source object
			if (_valuesStart[property] === undefined) {
				continue;
			}

			var start = _valuesStart[property] || 0;
			var end = _valuesEnd[property];

			if (end instanceof Array) {

				_object[property] = _interpolationFunction(end, value);

			} else {

				// Parses relative end values with start as base (e.g.: +10, -3)
				if (typeof (end) === 'string') {

					if (end.startsWith('+') || end.startsWith('-')) {
						end = start + parseFloat(end, 10);
					} else {
						end = parseFloat(end, 10);
					}
				}

				// Protect against non numeric properties.
				if (typeof (end) === 'number') {
					_object[property] = start + (end - start) * value;
				}

			}

		}

		if (_onUpdateCallback !== null) {
			_onUpdateCallback.call(_object, value);
		}

		if (elapsed === 1) {

			if (_repeat > 0) {

				if (isFinite(_repeat)) {
					_repeat--;
				}

				// Reassign starting values, restart by making startTime = now
				for (property in _valuesStartRepeat) {

					if (typeof (_valuesEnd[property]) === 'string') {
						_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);
					}

					if (_yoyo) {
						var tmp = _valuesStartRepeat[property];

						_valuesStartRepeat[property] = _valuesEnd[property];
						_valuesEnd[property] = tmp;
					}

					_valuesStart[property] = _valuesStartRepeat[property];

				}

				if (_yoyo) {
					_reversed = !_reversed;
				}

				_startTime = time + _delayTime;

				return true;

			} else {

				if (_onCompleteCallback !== null) {
					_onCompleteCallback.call(_object);
				}

				for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {
					// Make the chained tweens start exactly at the time they should,
					// even if the `update()` method was called way past the duration of the tween
					_chainedTweens[i].start(_startTime + _duration);
				}

				return false;

			}

		}

		return true;

	};

};


TWEEN.Easing = {

	Linear: {

		None: function (k) {

			return k;

		}

	},

	Quadratic: {

		In: function (k) {

			return k * k;

		},

		Out: function (k) {

			return k * (2 - k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k;
			}

			return - 0.5 * (--k * (k - 2) - 1);

		}

	},

	Cubic: {

		In: function (k) {

			return k * k * k;

		},

		Out: function (k) {

			return --k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k + 2);

		}

	},

	Quartic: {

		In: function (k) {

			return k * k * k * k;

		},

		Out: function (k) {

			return 1 - (--k * k * k * k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k;
			}

			return - 0.5 * ((k -= 2) * k * k * k - 2);

		}

	},

	Quintic: {

		In: function (k) {

			return k * k * k * k * k;

		},

		Out: function (k) {

			return --k * k * k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k * k * k + 2);

		}

	},

	Sinusoidal: {

		In: function (k) {

			return 1 - Math.cos(k * Math.PI / 2);

		},

		Out: function (k) {

			return Math.sin(k * Math.PI / 2);

		},

		InOut: function (k) {

			return 0.5 * (1 - Math.cos(Math.PI * k));

		}

	},

	Exponential: {

		In: function (k) {

			return k === 0 ? 0 : Math.pow(1024, k - 1);

		},

		Out: function (k) {

			return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if ((k *= 2) < 1) {
				return 0.5 * Math.pow(1024, k - 1);
			}

			return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);

		}

	},

	Circular: {

		In: function (k) {

			return 1 - Math.sqrt(1 - k * k);

		},

		Out: function (k) {

			return Math.sqrt(1 - (--k * k));

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return - 0.5 * (Math.sqrt(1 - k * k) - 1);
			}

			return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);

		}

	},

	Elastic: {

		In: function (k) {

			var s;
			var a = 0.1;
			var p = 0.4;

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if (!a || a < 1) {
				a = 1;
				s = p / 4;
			} else {
				s = p * Math.asin(1 / a) / (2 * Math.PI);
			}

			return - (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));

		},

		Out: function (k) {

			var s;
			var a = 0.1;
			var p = 0.4;

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if (!a || a < 1) {
				a = 1;
				s = p / 4;
			} else {
				s = p * Math.asin(1 / a) / (2 * Math.PI);
			}

			return (a * Math.pow(2, - 10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1);

		},

		InOut: function (k) {

			var s;
			var a = 0.1;
			var p = 0.4;

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if (!a || a < 1) {
				a = 1;
				s = p / 4;
			} else {
				s = p * Math.asin(1 / a) / (2 * Math.PI);
			}

			if ((k *= 2) < 1) {
				return - 0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));
			}

			return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;

		}

	},

	Back: {

		In: function (k) {

			var s = 1.70158;

			return k * k * ((s + 1) * k - s);

		},

		Out: function (k) {

			var s = 1.70158;

			return --k * k * ((s + 1) * k + s) + 1;

		},

		InOut: function (k) {

			var s = 1.70158 * 1.525;

			if ((k *= 2) < 1) {
				return 0.5 * (k * k * ((s + 1) * k - s));
			}

			return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);

		}

	},

	Bounce: {

		In: function (k) {

			return 1 - TWEEN.Easing.Bounce.Out(1 - k);

		},

		Out: function (k) {

			if (k < (1 / 2.75)) {
				return 7.5625 * k * k;
			} else if (k < (2 / 2.75)) {
				return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;
			} else if (k < (2.5 / 2.75)) {
				return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;
			} else {
				return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;
			}

		},

		InOut: function (k) {

			if (k < 0.5) {
				return TWEEN.Easing.Bounce.In(k * 2) * 0.5;
			}

			return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;

		}

	}

};

TWEEN.Interpolation = {

	Linear: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.Linear;

		if (k < 0) {
			return fn(v[0], v[1], f);
		}

		if (k > 1) {
			return fn(v[m], v[m - 1], m - f);
		}

		return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);

	},

	Bezier: function (v, k) {

		var b = 0;
		var n = v.length - 1;
		var pw = Math.pow;
		var bn = TWEEN.Interpolation.Utils.Bernstein;

		for (var i = 0; i <= n; i++) {
			b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);
		}

		return b;

	},

	CatmullRom: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.CatmullRom;

		if (v[0] === v[m]) {

			if (k < 0) {
				i = Math.floor(f = m * (1 + k));
			}

			return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);

		} else {

			if (k < 0) {
				return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);
			}

			if (k > 1) {
				return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);
			}

			return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);

		}

	},

	Utils: {

		Linear: function (p0, p1, t) {

			return (p1 - p0) * t + p0;

		},

		Bernstein: function (n, i) {

			var fc = TWEEN.Interpolation.Utils.Factorial;

			return fc(n) / fc(i) / fc(n - i);

		},

		Factorial: (function () {

			var a = [1];

			return function (n) {

				var s = 1;

				if (a[n]) {
					return a[n];
				}

				for (var i = n; i > 1; i--) {
					s *= i;
				}

				a[n] = s;
				return s;

			};

		})(),

		CatmullRom: function (p0, p1, p2, p3, t) {

			var v0 = (p2 - p0) * 0.5;
			var v1 = (p3 - p1) * 0.5;
			var t2 = t * t;
			var t3 = t * t2;

			return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;

		}

	}

};

// UMD (Universal Module Definition)
(function (root) {

	if (typeof define === 'function' && define.amd) {

		// AMD
		define([], function () {
			return TWEEN;
		});

	} else if (typeof module !== 'undefined' && typeof exports === 'object') {

		// Node.js
		module.exports = TWEEN;

	} else if (root !== undefined) {

		// Global variable
		root.TWEEN = TWEEN;

	}

})(this);

},{}]},{},[11])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9qcy9jb250cm9sbGVycy9jb250cm9sbGVycy9jb25zb2xlLmljZWQiLCJidWlsZC9qcy9jb250cm9sbGVycy9jb250cm9sbGVycy9lZGl0b3IuaWNlZCIsImJ1aWxkL2pzL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXJzL3N0YWdlLmljZWQiLCJidWlsZC9qcy9saWIvbGliL01hdGgyLmljZWQiLCJidWlsZC9qcy9saWIvbGliL2ZpbGVxdWV1ZS5pY2VkIiwiYnVpbGQvanMvbGliL3BpeGkuZGV2LmpzIiwiYnVpbGQvanMvbGliL2xpYi9zZXR1cC5pY2VkIiwiYnVpbGQvanMvbGliL2xpYi9zcGluZS5hamF4LmljZWQiLCJidWlsZC9qcy9saWIvbGliL3NwaW5lLmF3YWl0YWpheC5pY2VkIiwiYnVpbGQvanMvbW9kZWxzL21vZGVscy9leGFtcGxlcy5pY2VkIiwiYnVpbGQvanMvcGl4aWpzLXBsYXlncm91bmQuaWNlZCIsImJ1aWxkL2pzL3ZpZXdzL3RlbXBsYXRlcy5qcyIsIm5vZGVfbW9kdWxlcy9AbHVrZWthcnJ5cy9qYWRlLXJ1bnRpbWUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0L2NvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuanMiLCJub2RlX21vZHVsZXMvZW1vamktaW1hZ2VzL2Vtb2ppLWltYWdlcy5qcyIsIm5vZGVfbW9kdWxlcy9lczUtc2hpbWlmeS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvaGVscGVycy5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvaWNlZC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvbGV4ZXIuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L25vZGVzLmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtY29mZmVlLXNjcmlwdC9saWIvY29mZmVlLXNjcmlwdC9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L3JlZ2lzdGVyLmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtY29mZmVlLXNjcmlwdC9saWIvY29mZmVlLXNjcmlwdC9yZXdyaXRlci5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvc2NvcGUuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L3NvdXJjZW1hcC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLXJ1bnRpbWUvbGliL2NvbnN0LmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtcnVudGltZS9saWIvbGlicmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLXJ1bnRpbWUvbGliL21haW4uanMiLCJub2RlX21vZHVsZXMvaWNlZC1ydW50aW1lL2xpYi9ydW50aW1lLmpzIiwibm9kZV9tb2R1bGVzL2luZGV4b2YvaW5kZXguanMiLCJub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9qczJjb2ZmZWUvZGlzdC9qczJjb2ZmZWUuanMiLCJub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9zcGluZS9saWIvbG9jYWwuanMiLCJub2RlX21vZHVsZXMvc3BpbmUvbGliL21hbmFnZXIuanMiLCJub2RlX21vZHVsZXMvc3BpbmUvbGliL3JvdXRlLmpzIiwibm9kZV9tb2R1bGVzL3NwaW5lL2xpYi9zcGluZS5qcyIsIm5vZGVfbW9kdWxlcy9zdGF0cy5qcy9idWlsZC9zdGF0cy5taW4uanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJub2RlX21vZHVsZXMvdm0tYnJvd3NlcmlmeS9pbmRleC5qcyIsImxpYi9kYXQuZ3VpLm1pbiIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvY29mZmVlLXNjcmlwdC5qcyIsInNwaW5lIiwidHdlZW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUFBLE1BQUEsNkJBQUE7SUFBQTs7O3NCQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFZLE9BQUEsQ0FBUSxPQUFSLENBQVosQ0FBQTs7QUFBQSxFQUNBLElBQUEsR0FBWSxPQUFBLENBQVEsb0JBQVIsQ0FEWixDQUFBOztBQUFBLEVBRUMsVUFBVyxPQUFBLENBQVEsTUFBUixFQUFYLE9BRkQsQ0FBQTs7QUFBQSxFQUtNO0FBQ0osUUFBQSxnQkFBQTs7QUFBQSw4QkFBQSxDQUFBOztBQUFBLHNCQUFBLFNBQUEsR0FBVyxzQkFBWCxDQUFBOztBQUFBLElBRUEsZ0JBQUEsR0FDRTtBQUFBLE1BQUEsWUFBQSxFQUFjLElBQWQ7QUFBQSxNQUNBLFFBQUEsRUFBVSxDQURWO0FBQUEsTUFFQSxRQUFBLEVBQVUsQ0FGVjtBQUFBLE1BR0EsVUFBQSxFQUFZLEtBSFo7QUFBQSxNQUlBLFFBQUEsRUFBVSxLQUpWO0tBSEYsQ0FBQTs7QUFBQSxzQkFTQSxRQUFBLEdBQ0U7QUFBQSxNQUFBLHdCQUFBLEVBQTBCLHNCQUExQjtLQVZGLENBQUE7O0FBQUEsc0JBWUEsWUFBQSxHQUFjLFNBQUMsQ0FBRCxHQUFBO0FBQ1osTUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBQSxDQUFBO2FBQ0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxDQUFBLEVBRkE7SUFBQSxDQVpkLENBQUE7O0FBQUEsc0JBZ0JBLFVBQUEsR0FBWSxTQUFDLENBQUQsR0FBQTtBQUNWLE1BQUEsSUFBQyxDQUFBLEtBQUQsSUFBYSxDQUFFLGFBQUYsS0FBWSxJQUFmLEdBQXlCLENBQUUsYUFBM0IsR0FBd0MsQ0FBbEQsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLEtBQUQsSUFBVSxJQURWLENBQUE7YUFFQSxJQUFDLENBQUEsWUFBRCxDQUFjLENBQWQsRUFIVTtJQUFBLENBaEJaLENBQUE7O0FBQUEsc0JBcUJBLGNBQUEsR0FBZ0IsU0FBQyxDQUFELEdBQUE7QUFDZCxVQUFBLEtBQUE7QUFBQSxjQUFPLENBQUMsQ0FBQyxLQUFUO0FBQUEsYUFDTyxFQURQO0FBRUksVUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTtBQUFBLFVBQ0EsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBRFIsQ0FBQTtBQUdBLFVBQUEsSUFBRyxLQUFIO0FBQ0UsWUFBQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FBQSxDQUFBO0FBQ0EsWUFBQSxJQUFHLEtBQU0sYUFBTixLQUFrQixJQUFsQixJQUEyQixDQUFBLElBQUssQ0FBQSxTQUFuQztxQkFDRSxJQUFDLENBQUEsWUFBRCxDQUFBLEVBREY7YUFGRjtXQUxKO0FBQ087QUFEUCxhQVVPLEVBVlA7QUFXSSxVQUFBLENBQUMsQ0FBQyxjQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsVUFDQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQUEsQ0FEUixDQUFBO0FBR0EsVUFBQSxJQUFHLEtBQUEsSUFBVSxJQUFDLENBQUEsU0FBWCxJQUF5QixJQUFDLENBQUEsS0FBN0I7QUFDRSxZQUFBLEtBQUEsR0FBUSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBQSxDQUFSLENBQUE7QUFBQSxZQUVBLElBQUMsQ0FBQSxVQUFELENBQVksS0FBWixDQUZBLENBQUE7QUFBQSxZQUdBLElBQUMsQ0FBQSxZQUFELENBQUEsQ0FIQSxDQURGO1dBQUEsTUFLSyxJQUFHLElBQUMsQ0FBQSxTQUFELElBQWUsSUFBQyxDQUFBLEtBQW5CO0FBQ0gsWUFBQSxJQUFDLENBQUEsWUFBRCxDQUFBLENBQUEsQ0FERztXQVJMO2lCQVdBLElBQUMsQ0FBQSxTQUFELEdBQWEsQ0FBQSxJQUFLLENBQUEsVUF0QnRCO0FBQUEsYUF5Qk8sRUF6QlA7QUEwQkksVUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTtBQUVBLFVBQUEsSUFBRyxJQUFDLENBQUEsUUFBRCxHQUFZLElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBVCxHQUFnQixDQUEvQjtBQUNFLFlBQUEsSUFBQyxDQUFBLFFBQUQsSUFBYSxDQUFiLENBQUE7bUJBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE9BQVEsQ0FBQSxJQUFDLENBQUEsUUFBRCxDQUFwQixFQUZGO1dBNUJKO0FBeUJPO0FBekJQLGFBZ0NPLEVBaENQO0FBaUNJLFVBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7QUFFQSxVQUFBLElBQUcsSUFBQyxDQUFBLFFBQUQsR0FBWSxDQUFmO0FBQ0UsWUFBQSxJQUFDLENBQUEsUUFBRCxJQUFhLENBQUEsQ0FBYixDQUFBO21CQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxPQUFRLENBQUEsSUFBQyxDQUFBLFFBQUQsQ0FBcEIsRUFGRjtXQW5DSjtBQUFBLE9BRGM7SUFBQSxDQXJCaEIsQ0FBQTs7QUFBQSxzQkE2REEsd0JBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLG9CQUFvQixDQUFDLE1BQXRCLENBQTZCLEdBQTdCLEVBQUg7SUFBQSxDQTdEakMsQ0FBQTs7QUFBQSxzQkE4REEsNEJBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLG9CQUFvQixDQUFDLElBQXRCLENBQTJCLElBQTNCLENBQWdDLENBQUMsTUFBakMsQ0FBd0MsQ0FBeEMsRUFBMkMsQ0FBM0MsRUFBSDtJQUFBLENBOURqQyxDQUFBOztBQUFBLHNCQStEQSx3QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsb0JBQW9CLENBQUMsT0FBdEIsQ0FBOEIsR0FBOUIsRUFBSDtJQUFBLENBL0RqQyxDQUFBOztBQUFBLHNCQWlFQSxNQUFBLEdBQ0U7QUFBQSxNQUFBLHlCQUFBLEVBQTJCLDBCQUEzQjtBQUFBLE1BQ0EsbUNBQUEsRUFBcUMsOEJBRHJDO0FBQUEsTUFFQSx5QkFBQSxFQUEyQiwwQkFGM0I7S0FsRUYsQ0FBQTs7QUFzRWEsSUFBQSxpQkFBQyxPQUFELEVBQVUsUUFBVixHQUFBO0FBQ1gsVUFBQSxVQUFBOztRQURxQixXQUFXO09BQ2hDO0FBQUEscURBQUEsQ0FBQTtBQUFBLDJDQUFBLENBQUE7QUFBQSw2REFBQSxDQUFBO0FBQUEscURBQUEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsRUFBWCxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUEsQ0FEWixDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBRCxHQUFTLEVBRlQsQ0FBQTtBQUFBLE1BR0EsSUFBQyxDQUFBLFNBQUQsR0FBYSxLQUhiLENBQUE7QUFBQSxNQUtBLDBDQUFBLFNBQUEsQ0FMQSxDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBZSxJQUFDLENBQUEsY0FBaEIsQ0FOQSxDQUFBO0FBQUEsTUFRQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLGdCQUFiLENBUlosQ0FBQTtBQVVBLE1BQUEsSUFBRyxZQUFBLElBQWlCLFlBQVksQ0FBQyxRQUFqQztBQUNFO0FBQUEsYUFBQSxTQUFBO3NCQUFBO0FBQ0UsVUFBQSxJQUFDLENBQUEsUUFBUyxDQUFBLENBQUEsQ0FBVixHQUFlLENBQWYsQ0FERjtBQUFBLFNBREY7T0FWQTtBQWNBLFdBQUEsYUFBQTs7d0JBQUE7QUFDRSxRQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQURGO0FBQUEsT0FmVztJQUFBLENBdEViOztBQUFBLHNCQXlGQSxJQUFBLEdBQU0sU0FBQyxJQUFELEdBQUE7QUFDSixNQUFBLElBQUcsSUFBSDtlQUFhLElBQUMsQ0FBQSxLQUFELEdBQVMsS0FBdEI7T0FBQSxNQUFBO2VBQ0ssSUFBQyxDQUFBLE1BRE47T0FESTtJQUFBLENBekZOLENBQUE7O0FBQUEsc0JBNkZBLFlBQUEsR0FBYyxTQUFBLEdBQUE7QUFDWixVQUFBLGtCQUFBO0FBQUE7QUFDRSxRQUFBLFFBQUE7QUFBVyxrQkFBTyxJQUFDLENBQUEsSUFBRCxDQUFBLENBQVA7QUFBQSxpQkFDSixRQURJO3FCQUNVLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBQyxDQUFBLEtBQWQsRUFBcUI7QUFBQSxnQkFBQSxJQUFBLEVBQU0sSUFBTjtlQUFyQixFQURWO0FBQUEsaUJBRUosU0FGSTtxQkFFVyxJQUFDLENBQUEsTUFGWjtBQUFBO3FCQUFYLENBQUE7QUFBQSxRQUlBLEtBQUEsR0FBUSxJQUFJLENBQUMsSUFBTCxDQUFVLE1BQVYsRUFBa0IsUUFBbEIsQ0FKUixDQUFBO0FBQUEsUUFLQSxNQUFPLENBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxZQUFWLENBQVAsR0FBaUMsS0FMakMsQ0FBQTtlQU1BLElBQUMsQ0FBQSxVQUFELENBQVksS0FBWixFQVBGO09BQUEsY0FBQTtBQVNFLFFBREksVUFDSixDQUFBO2VBQUEsSUFBQyxDQUFBLGlCQUFELENBQW1CLENBQW5CLEVBVEY7T0FBQTtBQVdFLFFBQUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxFQUFULENBWEY7T0FEWTtJQUFBLENBN0ZkLENBQUE7O0FBQUEsc0JBMkdBLEtBQUEsR0FBTyxTQUFBLEdBQUE7QUFDTCxVQUFBLFVBQUE7QUFBQSxNQURNLDhEQUNOLENBQUE7QUFBQSxNQUFBLENBQUEsR0FBSSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsQ0FBQSxJQUFrQixHQUF0QixDQUFBO0FBQUEsTUFDQSxDQUFBLEdBQUksSUFBQyxDQUFBLEVBQUUsQ0FBQyxJQUFKLENBQUEsQ0FBQSxHQUFhLENBQWIsR0FBaUIsSUFEckIsQ0FBQTtBQUFBLE1BRUEsSUFBQyxDQUFBLElBQUQsQ0FBTSxDQUFDLENBQUMsS0FBRixDQUFRLElBQVIsQ0FBYywrQkFBdUIsQ0FBQyxJQUF0QyxDQUEyQyxJQUEzQyxDQUFOLENBRkEsQ0FBQTthQUdBLE9BSks7SUFBQSxDQTNHUCxDQUFBOztBQUFBLHNCQWlIQSxVQUFBLEdBQVksU0FBQyxLQUFELEdBQUE7YUFDVixJQUFDLENBQUEsS0FBRCxDQUFPLE9BQUEsQ0FBUSxLQUFSLEVBQWUsSUFBQyxDQUFBLFFBQVEsQ0FBQyxVQUF6QixFQUFxQyxJQUFDLENBQUEsUUFBUSxDQUFDLFFBQS9DLEVBQXlELElBQUMsQ0FBQSxRQUFRLENBQUMsUUFBbkUsQ0FBUCxFQURVO0lBQUEsQ0FqSFosQ0FBQTs7QUFBQSxzQkFvSEEsaUJBQUEsR0FBbUIsU0FBQyxDQUFELEdBQUE7QUFDakIsVUFBQSxNQUFBO0FBQUEsTUFBQSxJQUFHLENBQUMsQ0FBQyxLQUFMO0FBQ0UsUUFBQSxNQUFBLEdBQVMsQ0FBQyxDQUFDLEtBQVgsQ0FERjtPQUFBO0FBSUMsTUFBQSxzQkFBRyxNQUFNLENBQUUsS0FBUixDQUFjLElBQWQsQ0FBb0IsQ0FBQSxDQUFBLFdBQXBCLEtBQTRCLENBQUMsQ0FBQyxRQUFGLENBQUEsQ0FBL0I7QUFDRyxRQUFBLE1BQUEsR0FBUyxFQUFBLEdBQUUsQ0FBQyxDQUFDLENBQUMsUUFBRixDQUFBLENBQUQsQ0FBRixHQUFnQixJQUFoQixHQUFvQixDQUFDLENBQUMsS0FBL0IsQ0FESDtPQUFBLE1BQUE7QUFHQyxRQUFBLE1BQUEsR0FBUyxDQUFDLENBQUMsUUFBRixDQUFBLENBQVQsQ0FIRDtPQUpEO2FBUUEsSUFBQyxDQUFBLEtBQUQsQ0FBTyxNQUFQLEVBVGlCO0lBQUEsQ0FwSG5CLENBQUE7O21CQUFBOztLQURvQixLQUFLLENBQUMsV0FMNUIsQ0FBQTs7QUFBQSxFQXVJQSxNQUFNLENBQUMsT0FBUCxHQUFpQixPQXZJakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSw0R0FBQTtJQUFBOzs7eUpBQUE7OzsyQ0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBYSxPQUFBLENBQVEsT0FBUixDQUFiLENBQUE7O0FBQUEsRUFDQSxJQUFBLEdBQWEsT0FBQSxDQUFRLG9CQUFSLENBRGIsQ0FBQTs7QUFBQSxFQUVBLFVBQUEsR0FBYSxPQUFBLENBQVEsWUFBUixDQUZiLENBQUE7O0FBQUEsRUFHQSxVQUFBLEdBQWEsT0FBQSxDQUFRLCtCQUFSLENBSGIsQ0FBQTs7QUFBQSxFQUlBLFNBQUEsR0FBYSxPQUFBLENBQVEsMEJBQVIsQ0FKYixDQUFBOztBQUFBLEVBS0EsU0FBQSxHQUFhLE9BQUEsQ0FBUSxrQkFBUixDQUxiLENBQUE7O0FBQUEsRUFRQSxVQUFBLEdBQWEsU0FBQyxHQUFELEdBQUE7V0FBUyxHQUFJLENBQUEsQ0FBQSxDQUFFLENBQUMsV0FBUCxDQUFBLENBQUEsR0FBdUIsR0FBSSxVQUFwQztFQUFBLENBUmIsQ0FBQTs7QUFBQSxFQVdNO0FBQ0osUUFBQSxnQkFBQTs7QUFBQSw2QkFBQSxDQUFBOztBQUFBLHFCQUFBLFNBQUEsR0FBVyxxQkFBWCxDQUFBOztBQUFBLElBRUEsZ0JBQUEsR0FDRTtBQUFBLE1BQUEsWUFBQSxFQUFjLElBQWQ7S0FIRixDQUFBOztBQUFBLHFCQUtBLFFBQUEsR0FDRTtBQUFBLE1BQUEsYUFBQSxFQUFlLFlBQWY7QUFBQSxNQUNBLGtCQUFBLEVBQW9CLGFBRHBCO0FBQUEsTUFFQSxRQUFBLEVBQVUsUUFGVjtBQUFBLE1BR0EsWUFBQSxFQUFjLE1BSGQ7S0FORixDQUFBOztBQUFBLHFCQVdBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixNQUFBLElBQUcsSUFBQyxDQUFBLElBQUksQ0FBQyxFQUFOLENBQVMsVUFBVCxDQUFIO2VBQTRCLElBQUMsQ0FBQSxJQUFJLENBQUMsT0FBTixDQUFjLEdBQWQsRUFBNUI7T0FBQSxNQUFBO2VBQ0ssSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFOLENBQWEsR0FBYixFQURMO09BRFU7SUFBQSxDQVhaLENBQUE7O0FBQUEscUJBZUEsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsS0FBQTtBQUFBLE1BQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBUixDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FEQSxDQUFBO2FBRUEsWUFBWSxDQUFDLFFBQWIsR0FBd0IsSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QjtBQUFBLFFBQUEsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFmO0FBQUEsUUFBdUIsTUFBQSxFQUFRLElBQUMsQ0FBQSxLQUFoQztPQUF4QixDQUFmLEVBSFo7SUFBQSxDQWZkLENBQUE7O0FBQUEscUJBb0JBLG1CQUFBLEdBQXFCLFNBQUMsQ0FBRCxHQUFBO0FBQ25CLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixRQUFwQixDQUFULENBQUE7QUFDQSxNQUFBLElBQUcsTUFBTSxDQUFDLEVBQVAsQ0FBVSxXQUFWLENBQUg7QUFDRSxRQUFBLElBQUMsQ0FBQSxjQUFELENBQUEsQ0FBQSxDQUFBO0FBQUEsUUFDQSxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQVosQ0FEQSxDQURGO09BQUEsTUFBQTtBQUlFLFFBQUEsSUFBQyxDQUFBLGFBQUQsQ0FBQSxDQUFBLENBQUE7QUFBQSxRQUNBLE1BQU0sQ0FBQyxJQUFQLENBQVksT0FBWixDQURBLENBSkY7T0FEQTthQU9BLE1BQU0sQ0FBQyxXQUFQLENBQW1CLFVBQW5CLEVBUm1CO0lBQUEsQ0FwQnJCLENBQUE7O0FBQUEscUJBOEJBLGFBQUEsR0FBZSxTQUFBLEdBQUE7QUFDYixVQUFBLEtBQUE7QUFBQSxNQUFBLElBQUEsQ0FBQSxDQUFjLEtBQUEsR0FBUSxJQUFDLENBQUEsR0FBRCxDQUFBLENBQVIsQ0FBZDtBQUFBLGNBQUEsQ0FBQTtPQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FEQSxDQUFBO2FBRUEsSUFBQyxDQUFBLFlBQUQsQ0FBQSxFQUhhO0lBQUEsQ0E5QmYsQ0FBQTs7QUFBQSxxQkFtQ0EsY0FBQSxHQUFnQixTQUFBLEdBQUE7YUFBRyxNQUFNLENBQUMsb0JBQVAsQ0FBNEIsTUFBTSxDQUFDLEtBQW5DLEVBQUg7SUFBQSxDQW5DaEIsQ0FBQTs7QUFBQSxxQkFxQ0EsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsa0JBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELENBQVMsU0FBVCxDQUFBLENBQUE7QUFDQTtBQUNFLFFBQUEsUUFBQTtBQUFXLGtCQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLGlCQUNKLFFBREk7cUJBQ1csSUFBQyxDQUFBLFdBQUQsQ0FBYSxJQUFDLENBQUEsS0FBZCxFQURYO0FBQUEsaUJBRUosU0FGSTtxQkFFVyxJQUFDLENBQUEsTUFGWjtBQUFBO3FCQUFYLENBQUE7QUFBQSxRQUlBLEtBQUEsR0FBUSxJQUFJLENBQUMsSUFBTCxDQUFVLE1BQVYsRUFBa0IsUUFBbEIsQ0FKUixDQUFBO0FBQUEsUUFLQSxNQUFPLENBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxZQUFWLENBQVAsR0FBaUMsS0FMakMsQ0FBQTtBQUFBLFFBTUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxVQUFULENBQW9CLEtBQXBCLENBTkEsQ0FERjtPQUFBLGNBQUE7QUFTRSxRQURJLFVBQ0osQ0FBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxpQkFBVCxDQUEyQixDQUEzQixDQUFBLENBVEY7T0FEQTthQVlBLElBQUMsQ0FBQSxLQUFELEdBQVMsR0FiRztJQUFBLENBckNkLENBQUE7O0FBQUEscUJBb0RBLFlBQUEsR0FBYyxTQUFDLENBQUQsR0FBQTtBQUNaLE1BQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFULENBQWlCLENBQWpCLENBQUEsQ0FBQTthQUNBLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQSxFQUZBO0lBQUEsQ0FwRGQsQ0FBQTs7QUFBQSxxQkF3REEsVUFBQSxHQUFZLFNBQUMsQ0FBRCxHQUFBO0FBQ1YsTUFBQSxJQUFDLENBQUEsS0FBRCxJQUFhLENBQUUsYUFBRixLQUFZLElBQWYsR0FBeUIsQ0FBRSxhQUEzQixHQUF3QyxDQUFsRCxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBRCxJQUFVLElBRFYsQ0FBQTthQUVBLElBQUMsQ0FBQSxZQUFELENBQWMsQ0FBZCxFQUhVO0lBQUEsQ0F4RFosQ0FBQTs7QUFBQSxxQkE2REEsb0JBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLFVBQVUsQ0FBQyxNQUFaLENBQW1CLEdBQW5CLEVBQUg7SUFBQSxDQTdEakMsQ0FBQTs7QUFBQSxxQkE4REEsd0JBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLElBQWpCLENBQXNCLENBQUMsTUFBdkIsQ0FBOEIsQ0FBOUIsRUFBaUMsQ0FBakMsRUFBSDtJQUFBLENBOURqQyxDQUFBOztBQUFBLHFCQStEQSxvQkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLE9BQVosQ0FBb0IsR0FBcEIsRUFBSDtJQUFBLENBL0RqQyxDQUFBOztBQUFBLHFCQWlFQSxVQUFBLEdBQVksU0FBQyxDQUFELEdBQUE7QUFDVixVQUFBLEVBQUE7QUFBQSxNQUFBLEVBQUEsR0FBSyxDQUFBLENBQUUsQ0FBQyxDQUFDLE1BQUosQ0FBVyxDQUFDLE9BQVosQ0FBb0IsUUFBcEIsQ0FBTCxDQUFBO0FBQ0EsTUFBQSxJQUFVLEVBQUUsQ0FBQyxFQUFILENBQU0sV0FBTixDQUFWO0FBQUEsY0FBQSxDQUFBO09BREE7QUFHQSxNQUFBLElBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFILENBQU0sb0JBQU4sQ0FBRCxDQUFBLElBQWlDLElBQUMsQ0FBQSxjQUFELENBQUEsQ0FBbEMsQ0FBQSxJQUF3RCxJQUFDLENBQUEsZUFBRCxDQUFBLENBQTNEO2VBQ0UsRUFBRSxDQUFDLFFBQUgsQ0FBWSxVQUFaLENBQXVCLENBQUMsUUFBeEIsQ0FBQSxDQUFrQyxDQUFDLFdBQW5DLENBQStDLFVBQS9DLEVBREY7T0FKVTtJQUFBLENBakVaLENBQUE7O0FBQUEscUJBd0VBLElBQUEsR0FBTSxTQUFDLElBQUQsR0FBQTtBQUNKLE1BQUEsSUFBRyxJQUFIO2VBQWEsSUFBQyxDQUFBLE9BQUQsQ0FBUyxZQUFULEVBQXVCLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBaEMsRUFBYjtPQUFBLE1BQUE7ZUFDSyxJQUFDLENBQUEsTUFETjtPQURJO0lBQUEsQ0F4RU4sQ0FBQTs7QUFBQSxxQkE0RUEsTUFBQSxHQUNFO0FBQUEsTUFBQSxtQkFBQSxFQUFxQixZQUFyQjtBQUFBLE1BQ0EsbUJBQUEsRUFBcUIsY0FEckI7QUFBQSxNQUVBLGtCQUFBLEVBQW9CLHFCQUZwQjtBQUFBLE1BR0EsOEJBQUEsRUFBZ0MsZ0JBSGhDO0FBQUEsTUFJQSx3QkFBQSxFQUEwQixzQkFKMUI7QUFBQSxNQUtBLHdCQUFBLEVBQTBCLDBCQUwxQjtBQUFBLE1BTUEsd0JBQUEsRUFBMEIsc0JBTjFCO0FBQUEsTUFPQSxnQ0FBQSxFQUFrQyxZQVBsQztBQUFBLE1BUUEsaUNBQUEsRUFBbUMsWUFSbkM7QUFBQSxNQVNBLGlCQUFBLEVBQW1CLGVBVG5CO0FBQUEsTUFVQSxrQkFBQSxFQUFvQixlQVZwQjtBQUFBLE1BV0EsYUFBQSxFQUFlLG1CQVhmO0tBN0VGLENBQUE7O0FBMEZhLElBQUEsZ0JBQUMsT0FBRCxFQUFVLFFBQVYsR0FBQTtBQUNYLFVBQUEsVUFBQTs7UUFEcUIsV0FBVztPQUNoQztBQUFBLHFEQUFBLENBQUE7QUFBQSx5REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsT0FBRCxHQUFXLEVBQVgsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxDQUFBLENBRFosQ0FBQTtBQUFBLE1BRUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxFQUZULENBQUE7QUFBQSxNQUtBLHlDQUFBLFNBQUEsQ0FMQSxDQUFBO0FBQUEsTUFPQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLGdCQUFiLENBUFosQ0FBQTtBQVNBLE1BQUEsSUFBRyxZQUFBLElBQWlCLFlBQVksQ0FBQyxRQUFqQztBQUNFO0FBQUEsYUFBQSxTQUFBO3NCQUFBO0FBQ0UsVUFBQSxJQUFDLENBQUEsUUFBUyxDQUFBLENBQUEsQ0FBVixHQUFlLENBQWYsQ0FBQTtBQUNBLGtCQUFPLENBQVA7QUFBQSxpQkFDTyxRQURQO0FBQUEsaUJBQ2lCLGFBRGpCO0FBRUksY0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFQLEdBQVksQ0FBWixDQUZKO0FBQUEsV0FGRjtBQUFBLFNBREY7T0FUQTtBQWdCQSxXQUFBLGFBQUE7O3dCQUFBO0FBQ0UsUUFBQSxJQUFDLENBQUEsUUFBUyxDQUFBLENBQUEsQ0FBVixHQUFlLENBQWYsQ0FERjtBQUFBLE9BaEJBO0FBQUEsTUFtQkEsVUFBVSxDQUFDLE1BQU0sQ0FBQyxRQUFsQixHQUNFO0FBQUEsUUFBQSxXQUFBLEVBQWEsQ0FBQyxTQUFELENBQWI7QUFBQSxRQUNBLEdBQUEsRUFBSyxTQUFDLEVBQUQsR0FBQTtBQUNILGNBQUEsTUFBQTtBQUFBLFVBQUEsTUFBQSxHQUFTLEtBQUEsQ0FBTSxFQUFFLENBQUMsU0FBSCxDQUFhLFlBQWIsQ0FBQSxHQUE2QixDQUFuQyxDQUFxQyxDQUFDLElBQXRDLENBQTJDLEdBQTNDLENBQVQsQ0FBQTtpQkFDQSxFQUFFLENBQUMsZ0JBQUgsQ0FBb0IsTUFBcEIsRUFBNEIsS0FBNUIsRUFBbUMsUUFBbkMsRUFGRztRQUFBLENBREw7T0FwQkYsQ0FBQTtBQUFBLE1BeUJBLElBQUMsQ0FBQSxlQUFELElBQUMsQ0FBQSxhQUFlLFVBQVUsQ0FBQyxZQUFYLENBQXdCLElBQUMsQ0FBQSxXQUFZLENBQUEsQ0FBQSxDQUFyQyxFQUF5QztBQUFBLFFBQ3ZELElBQUEsRUFBTSxrQkFEaUQ7QUFBQSxRQUV2RCxLQUFBLEVBQU8sU0FGZ0Q7QUFBQSxRQUd2RCxXQUFBLEVBQWEsSUFIMEM7QUFBQSxRQUl2RCxPQUFBLEVBQVMsQ0FKOEM7QUFBQSxRQUt2RCxNQUFBLEVBQVEsVUFMK0M7T0FBekMsRUF6QmhCLENBQUE7QUFBQSxNQWdDQSxJQUFDLENBQUEsT0FBRCxHQUFXLENBQUEsQ0FBRSxJQUFDLENBQUEsVUFBVSxDQUFDLGlCQUFaLENBQUEsQ0FBRixDQWhDWCxDQUFBO0FBQUEsTUFpQ0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUFULENBQWtCLFNBQWxCLENBakNBLENBQUE7QUFrQ0EsTUFBQSxJQUFHLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBYjtBQUNFLFFBQUEsSUFBQyxDQUFBLEdBQUQsQ0FBSyxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQWYsQ0FBQSxDQUFBO0FBQUEsUUFDQSxJQUFDLENBQUEsV0FBRCxDQUFBLENBREEsQ0FERjtPQW5DVztJQUFBLENBMUZiOztBQUFBLHFCQWlJQSxNQUFBLEdBQVEsU0FBQyxXQUFELEdBQUE7YUFDTixJQUFDLENBQUEsV0FBRCxDQUFhLFdBQWIsRUFETTtJQUFBLENBaklSLENBQUE7O0FBQUEscUJBb0lBLEdBQUEsR0FBSyxTQUFDLEtBQUQsR0FBQTtBQUNILE1BQUEsSUFBRyxLQUFIO2VBQWMsSUFBQyxDQUFBLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBaEIsQ0FBeUIsRUFBQSxHQUFHLEtBQUgsR0FBUyxVQUFsQyxFQUFkO09BQUEsTUFBQTtlQUNLLElBQUMsQ0FBQSxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQWhCLENBQUEsRUFETDtPQURHO0lBQUEsQ0FwSUwsQ0FBQTs7QUFBQSxxQkF3SUEsV0FBQSxHQUFhLFNBQUMsSUFBRCxHQUFBO0FBQ1gsVUFBQSw0REFBQTtBQUFBLDhCQUFBLENBQUE7QUFBQSw0REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBQVgsQ0FBQTs7O0FBQ0E7Ozs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsUUFBUyxDQUFBLElBQUEsQ0FBVjs7O3VCQUFzQjs7OztZQUF0QixDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztVQUNBLEtBQUMsQ0FBQSxHQUFELENBQUssT0FBTDtpQkFDQSxLQUFDLENBQUEsV0FBRCxDQUFBOztnQkFKVztJQUFBLENBeEliLENBQUE7O0FBQUEscUJBOElBLFdBQUEsR0FBYSxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLGNBQVosQ0FBMkIsSUFBQyxDQUFBLFVBQVUsQ0FBQyxHQUFHLENBQUMsU0FBaEIsQ0FBQSxDQUFBLEdBQThCLENBQXpELEVBQUg7SUFBQSxDQTlJYixDQUFBOztBQUFBLHFCQWdKQSxjQUFBLEdBQWdCLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxXQUFELENBQWEsSUFBQyxDQUFBLE9BQWQsRUFBSDtJQUFBLENBaEpoQixDQUFBOztBQUFBLHFCQWtKQSxLQUFBLEdBQU8sU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLEdBQUQsQ0FBSyxFQUFMLEVBQUg7SUFBQSxDQWxKUCxDQUFBOztBQUFBLHFCQW9KQSxXQUFBLEdBQWEsU0FBQyxNQUFELEdBQUE7YUFBWSxJQUFJLENBQUMsT0FBTCxDQUFhLE1BQWIsRUFBcUI7QUFBQSxRQUFBLElBQUEsRUFBTSxJQUFOO0FBQUEsUUFBVSxPQUFBLEVBQVMsUUFBbkI7T0FBckIsRUFBWjtJQUFBLENBcEpiLENBQUE7O0FBQUEscUJBc0pBLGVBQUEsR0FBaUIsU0FBQSxHQUFBO0FBQ2YsVUFBQSxrQkFBQTtBQUFBLE1BQUEsSUFBQSxDQUFBLENBQU8sS0FBQSxHQUFRLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBUixDQUFQO0FBQ0UsUUFBQSxJQUFDLENBQUEsSUFBRCxDQUFNLFNBQU4sQ0FBQSxDQUFBO0FBQ0EsZUFBTyxJQUFQLENBRkY7T0FBQTtBQUlBO0FBQ0UsUUFBQSxRQUFBLEdBQVcsSUFBQyxDQUFBLFdBQUQsQ0FBYSxLQUFiLENBQVgsQ0FBQTtBQUFBLFFBQ0EsSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLENBREEsQ0FBQTtBQUFBLFFBRUEsSUFBQyxDQUFBLElBQUQsQ0FBTSxTQUFOLENBRkEsQ0FBQTtBQUdBLGVBQU8sSUFBUCxDQUpGO09BQUEsY0FBQTtBQU1FLFFBREksVUFDSixDQUFBO0FBQUEsUUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLGlCQUFULENBQTJCLENBQTNCLENBQUEsQ0FBQTtBQUNBLGVBQU8sS0FBUCxDQVBGO09BTGU7SUFBQSxDQXRKakIsQ0FBQTs7QUFBQSxxQkFvS0EsY0FBQSxHQUFnQixTQUFBLEdBQUE7QUFDZCxVQUFBLDBCQUFBO0FBQUEsTUFBQSxJQUFBLENBQUEsQ0FBTyxLQUFBLEdBQVEsSUFBQyxDQUFBLEdBQUQsQ0FBQSxDQUFSLENBQVA7QUFDRSxRQUFBLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUFBLENBQUE7QUFDQSxlQUFPLElBQVAsQ0FGRjtPQUFBO0FBSUE7QUFDRSxRQUFBLFFBQUEsR0FBVyxTQUFTLENBQUMsS0FBVixDQUFnQixLQUFoQixFQUF1QjtBQUFBLFVBQUMsZUFBQSxFQUFpQixJQUFsQjtBQUFBLFVBQXdCLE1BQUEsRUFBUSxJQUFoQztTQUF2QixDQUFYLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxHQUFELENBQUssRUFBQSxHQUFHLFFBQVEsQ0FBQyxJQUFqQixDQURBLENBQUE7QUFBQSxRQUVBLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUZBLENBQUE7QUFHQSxlQUFPLElBQVAsQ0FKRjtPQUFBLGNBQUE7QUFNRSxRQURJLFVBQ0osQ0FBQTtBQUFBLFFBQUEsTUFBQSxHQUFTLElBQUMsQ0FBQSxPQUFPLENBQUMsaUJBQVQsQ0FBMkIsQ0FBM0IsQ0FBVCxDQUFBO0FBQUEsUUFDQSxJQUFDLENBQUEsS0FBRCxDQUFPLE1BQVAsQ0FEQSxDQUFBO0FBRUEsZUFBTyxLQUFQLENBUkY7T0FMYztJQUFBLENBcEtoQixDQUFBOztBQUFBLHFCQW1MQSxhQUFBLEdBQWUsU0FBQyxDQUFELEdBQUE7QUFDYixNQUFBLENBQUMsQ0FBQyxlQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxDQUFDLENBQUMsY0FBRixDQUFBLENBREEsQ0FBQTthQUVBLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBUixDQUFvQixXQUFwQixFQUFpQyxDQUFDLENBQUMsSUFBRixLQUFVLFVBQTNDLEVBSGE7SUFBQSxDQW5MZixDQUFBOztBQUFBLHFCQXdMQSxpQkFBQSxHQUFtQixTQUFDLENBQUQsR0FBQTtBQUVqQixVQUFBLCtCQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsYUFBRCxDQUFlLENBQWYsQ0FBQSxDQUFBO0FBR0EsTUFBQSxJQUF1Qix1QkFBdkI7QUFBQSxRQUFBLENBQUEsR0FBSSxDQUFDLENBQUMsYUFBTixDQUFBO09BSEE7QUFBQSxNQUlBLEtBQUEsR0FBUSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQVQsSUFBa0IsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUp6QyxDQUFBO0FBT0E7V0FBQSw0Q0FBQTt5QkFBQTtBQUFBLHNCQUFBLElBQUMsQ0FBQSxTQUFELENBQVcsSUFBWCxFQUFBLENBQUE7QUFBQTtzQkFUaUI7SUFBQSxDQXhMbkIsQ0FBQTs7QUFBQSxxQkFtTUEsU0FBQSxHQUFXLFNBQUMsSUFBRCxHQUFBO0FBQ1QsVUFBQSxVQUFBO0FBQUEsTUFBQyxZQUFBLElBQUQsRUFBTyxZQUFBLElBQVAsQ0FBQTtBQUNBLE1BQUEsSUFBRyxvQkFBb0IsQ0FBQyxJQUFyQixDQUEwQixJQUExQixDQUFIO2VBQ0UsSUFBQyxDQUFBLFVBQUQsQ0FBWSxJQUFaLEVBREY7T0FBQSxNQUVLLElBQUcsNkJBQTZCLENBQUMsSUFBOUIsQ0FBbUMsSUFBbkMsQ0FBSDtlQUNILElBQUMsQ0FBQSxXQUFELENBQWEsSUFBYixFQURHO09BQUEsTUFBQTtlQUdILElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFnQixvQkFBQSxHQUFvQixJQUFwQixHQUF5QixJQUF6QixHQUE2QixJQUE3QyxFQUhHO09BSkk7SUFBQSxDQW5NWCxDQUFBOztBQUFBLHFCQTRNQSxVQUFBLEdBQVksU0FBQyxJQUFELEdBQUE7QUFDVixVQUFBLDBGQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7QUFBQSxNQUFDLE9BQVEsS0FBUixJQUFELENBQUE7QUFBQSxNQUNBLE1BQU0sQ0FBQyxXQUFQLE1BQU0sQ0FBQyxTQUFXLEdBRGxCLENBQUE7QUFBQSxNQUVBLE9BQUEsR0FBVyxnQkFBQSxHQUFnQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQTlCLEdBQXFDLEdBRmhELENBQUE7QUFBQSxNQUdBLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFnQixTQUFBLEdBQVMsSUFBVCxHQUFjLE1BQWQsR0FBb0IsT0FBcEMsQ0FIQSxDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsY0FBRCxJQUFDLENBQUEsWUFBYyxHQUFBLENBQUEsVUFMZixDQUFBOzs7QUFNQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEtBQUMsQ0FBQSxTQUFTLENBQUMsU0FBWCxDQUFxQjtBQUFBLFlBQUMsSUFBQSxFQUFNLElBQVA7V0FBckI7OztnQkFBeUM7dUJBQVE7Ozs7WUFBakQsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7QUFDQSxVQUFBLElBQW1DLE1BQUEsS0FBVSxPQUE3QztBQUFBLG1CQUFPLEtBQUMsQ0FBQSxHQUFELENBQU0sU0FBQSxHQUFTLE9BQWYsQ0FBUCxDQUFBOztVQUVBLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBZCxDQUFtQixPQUFuQjtVQUNBLEtBQUE7QUFBUSxvQkFBTyxJQUFDLENBQUEsSUFBRCxDQUFBLENBQVA7QUFBQSxtQkFDRCxRQURDO3VCQUNnQixJQUFBLEdBQUksSUFBSixHQUFTLGVBQVQsR0FDZixPQURlLEdBQ1AsSUFETyxHQUUzQixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBSFc7QUFBQSxtQkFLRCxTQUxDO3VCQUtpQixLQUFBLEdBQUssSUFBTCxHQUFVLG1CQUFWLEdBQ1osT0FEWSxHQUNKLElBREksR0FFNUIsQ0FBQyxJQUFDLENBQUEsR0FBRCxDQUFBLENBQU0sQ0FBQyxJQUFQLENBQUEsQ0FBRCxFQVBXO0FBQUE7O1VBU1IsS0FBQyxDQUFBLEdBQUQsQ0FBSyxLQUFMO2lCQUNBLEtBQUMsQ0FBQSxVQUFVLENBQUMsY0FBWixDQUEyQixDQUEzQjs7Z0JBckJVO0lBQUEsQ0E1TVosQ0FBQTs7QUFBQSxxQkFtT0EsV0FBQSxHQUFhLFNBQUMsSUFBRCxHQUFBO0FBQ1gsVUFBQSx5SEFBQTtBQUFBLDhCQUFBLENBQUE7QUFBQSw0REFBQSxDQUFBO0FBQUEsTUFBQyxPQUFXLEtBQVgsSUFBRCxDQUFBO0FBQUEsTUFDQSxRQUFBLEdBQVksSUFBSSxDQUFDLE9BQUwsQ0FBYSxHQUFiLENBRFosQ0FBQTtBQUVBLE1BQUEsSUFBMkIsUUFBQSxLQUFZLENBQUEsQ0FBdkM7QUFBQSxRQUFBLFFBQUEsR0FBWSxJQUFJLENBQUMsTUFBakIsQ0FBQTtPQUZBO0FBQUEsTUFHQSxTQUFBLEdBQVksVUFBQSxDQUFXLElBQUssbUJBQWhCLENBSFosQ0FBQTs7UUFLQSxNQUFNLENBQUMsY0FBZTtPQUx0QjtBQUFBLE1BTUEsT0FBQSxHQUFXLHFCQUFBLEdBQXFCLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBeEMsR0FBK0MsR0FOMUQsQ0FBQTtBQUFBLE1BT0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWdCLFNBQUEsR0FBUyxJQUFULEdBQWMsYUFBZCxHQUEyQixTQUEzQixHQUFxQyxLQUFyQyxHQUEwQyxPQUExRCxDQVBBLENBQUE7QUFBQSxNQVNBLElBQUMsQ0FBQSxjQUFELElBQUMsQ0FBQSxZQUFjLEdBQUEsQ0FBQSxVQVRmLENBQUE7OztBQVVBOzs7O1lBQUEsQ0FBQTtBQUFBLFVBQU0sS0FBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCO0FBQUEsWUFBQyxJQUFBLEVBQU0sSUFBUDtBQUFBLFlBQWEsTUFBQSxFQUFRLE1BQXJCO1dBQXJCOzs7Z0JBQXlEO3VCQUFROzs7O1lBQWpFLENBQU4sQ0FBQTtBQUFBLHFDQUFBOzs7O0FBQ0EsVUFBQSxJQUFnQyxNQUFBLEtBQVUsT0FBMUM7QUFBQSxtQkFBTyxLQUFDLENBQUEsR0FBRCxDQUFNLFNBQUEsR0FBUyxJQUFmLENBQVAsQ0FBQTs7QUFFQSxVQUFBLElBQTRCLGVBQWUsQ0FBQyxJQUFoQixDQUFxQixJQUFyQixDQUE1QjtBQUFBLFlBQUEsSUFBQSxHQUFPLEtBQUMsQ0FBQSxXQUFELENBQWEsSUFBYixDQUFQLENBQUE7O0FBRUE7QUFDRSxZQUFBLFFBQUEsR0FBVyxJQUFBLENBQUssSUFBTCxDQUFYLENBREY7V0FBQSxjQUFBO0FBR0UsWUFESSxVQUNKLENBQUE7QUFBQSxtQkFBTyxLQUFDLENBQUEsT0FBTyxDQUFDLGlCQUFULENBQTJCLENBQTNCLENBQVAsQ0FIRjs7VUFLQSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQW5CLENBQXdCLFFBQXhCO1VBQ0EsTUFBTyxDQUFBLFNBQUEsQ0FBUCxHQUFvQjtVQUNwQixLQUFBO0FBQVEsb0JBQU8sSUFBQyxDQUFBLElBQUQsQ0FBQSxDQUFQO0FBQUEsbUJBQ0QsUUFEQzt1QkFDZ0IsSUFBQSxHQUFJLElBQUosR0FBUywyRUFBVCxHQUVFLFNBRkYsR0FFWSx5RkFGWixHQUtFLE9BTEYsR0FLVSx1QkFMVixHQU1QLFNBTk8sR0FNRyxJQU5ILEdBTzNCLENBQUMsSUFBQyxDQUFBLEdBQUQsQ0FBQSxDQUFNLENBQUMsSUFBUCxDQUFBLENBQUQsRUFSVztBQUFBLG1CQVVELFNBVkM7dUJBVWlCLEtBQUEsR0FBSyxJQUFMLEdBQVUsNkVBQVYsR0FFRSxTQUZGLEdBRVksNEZBRlosR0FLRSxPQUxGLEdBS1UsNEJBTFYsR0FNSixTQU5JLEdBTU0sSUFOTixHQU81QixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBakJXO0FBQUE7O1VBbUJSLEtBQUMsQ0FBQSxHQUFELENBQUssS0FBTDtpQkFDQSxLQUFDLENBQUEsVUFBVSxDQUFDLGNBQVosQ0FBMkIsQ0FBM0I7O2dCQTNDVztJQUFBLENBbk9iLENBQUE7O0FBQUEscUJBZ1JBLGNBQUEsR0FBZ0IsU0FBQyxNQUFELEdBQUE7QUFDZCxVQUFBLEtBQUE7O2FBQVMsQ0FBQyxjQUFlO09BQXpCO0FBQ0EsTUFBQSxJQUF5QyxlQUFVLElBQUMsQ0FBQSxRQUFRLENBQUMsV0FBcEIsRUFBQSxNQUFBLEtBQXpDO2VBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBdEIsQ0FBMkIsTUFBM0IsRUFBQTtPQUZjO0lBQUEsQ0FoUmhCLENBQUE7O2tCQUFBOztLQURtQixLQUFLLENBQUMsV0FYM0IsQ0FBQTs7QUFBQSxFQWdTQSxNQUFNLENBQUMsT0FBUCxHQUFpQixNQWhTakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSxpQ0FBQTtJQUFBOzttU0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBVyxPQUFBLENBQVEsT0FBUixDQUFYLENBQUE7O0FBQUEsRUFDQSxJQUFBLEdBQVcsT0FBQSxDQUFRLG9CQUFSLENBRFgsQ0FBQTs7QUFBQSxFQUVBLEtBQUEsR0FBVyxPQUFBLENBQVEsVUFBUixDQUZYLENBQUE7O0FBQUEsRUFLQSxNQUFBLEdBQVMsU0FBQSxHQUFBO0FBQ1AsUUFBQSxxQ0FBQTtBQUFBLElBRFEscUJBQU0sOERBQ2QsQ0FBQTtBQUFBLFNBQUEsMkNBQUE7cUJBQUE7QUFBQSxXQUFBLFVBQUE7eUJBQUE7QUFBQSxRQUFBLElBQUssQ0FBQSxHQUFBLENBQUwsR0FBWSxLQUFaLENBQUE7QUFBQSxPQUFBO0FBQUEsS0FBQTtXQUNBLEtBRk87RUFBQSxDQUxULENBQUE7O0FBQUEsRUFVTTtBQUNKLDRCQUFBLENBQUE7O0FBQUEsb0JBQUEsU0FBQSxHQUFXLG9CQUFYLENBQUE7O0FBQUEsb0JBRUEsWUFBQSxHQUNFO0FBQUEsTUFBQSxlQUFBLEVBQWlCLFFBQWpCO0FBQUEsTUFDQSxXQUFBLEVBQWEsS0FEYjtBQUFBLE1BRUEsU0FBQSxFQUFXLEtBRlg7S0FIRixDQUFBOztBQUFBLG9CQU9BLE1BQUEsR0FBUSxTQUFBLEdBQUEsQ0FQUixDQUFBOztBQUFBLG9CQVNBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixNQUFBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxNQUFWLENBQWlCLElBQUMsQ0FBQSxNQUFsQixDQUFBLENBQUE7YUFDQSxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsRUFBVixDQUFhLHFCQUFiLEVBQW9DLElBQUMsQ0FBQSxNQUFyQyxFQUZVO0lBQUEsQ0FUWixDQUFBOztBQUFBLG9CQWFBLE9BQUEsR0FBUyxTQUFBLEdBQUE7QUFDUCxNQUFBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxHQUFWLENBQWMsUUFBZCxFQUF3QixJQUFDLENBQUEsTUFBekIsQ0FBQSxDQUFBO2FBQ0EsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLEdBQVYsQ0FBYyxxQkFBZCxFQUFxQyxJQUFDLENBQUEsTUFBdEMsRUFGTztJQUFBLENBYlQsQ0FBQTs7QUFBQSxvQkFpQkEsU0FBQSxHQUFlLEVBakJmLENBQUE7O0FBQUEsb0JBa0JBLFVBQUEsR0FBZSxTQUFDLEVBQUQsR0FBQTthQUFRLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixFQUFoQixFQUFSO0lBQUEsQ0FsQmYsQ0FBQTs7QUFBQSxvQkFtQkEsYUFBQSxHQUFlLFNBQUMsRUFBRCxHQUFBO2FBQVEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUFYLENBQW1CLElBQUMsQ0FBQSxTQUFTLENBQUMsT0FBWCxDQUFtQixFQUFuQixDQUFuQixFQUEyQyxDQUEzQyxFQUFSO0lBQUEsQ0FuQmYsQ0FBQTs7QUFBQSxvQkFxQkEsR0FBQSxHQUFLLFNBQUMsTUFBRCxHQUFBO0FBQ0gsVUFBQSxhQUFBOztRQURJLFNBQVMsU0FBQSxHQUFBO09BQ2I7QUFBQSxNQUFBLElBQUMsQ0FBQSxVQUFELENBQVksTUFBWixDQUFBLENBQUE7QUFBQSxNQUVBLGFBQUEsR0FBZ0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTtlQUFBLFNBQUEsR0FBQTtBQUVkLGNBQUEsa0JBQUE7QUFBQSxVQUFBLEtBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxDQUFBLENBQUEsQ0FBQTtBQUVBO0FBQUEsZUFBQSwyQ0FBQTswQkFBQTtBQUFBLFlBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtBQUFBLFdBRkE7QUFBQSxVQUlBLEtBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixLQUFDLENBQUEsS0FBbEIsQ0FKQSxDQUFBO0FBQUEsVUFNQSxNQUFNLENBQUMsS0FBUCxHQUFlLGdCQUFBLENBQWlCLGFBQWpCLENBTmYsQ0FBQTtpQkFRQSxLQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBQSxFQVZjO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FGaEIsQ0FBQTthQWFBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsZ0JBQUEsQ0FBaUIsYUFBakIsRUFkWjtJQUFBLENBckJMLENBQUE7O0FBcUNhLElBQUEsZUFBQyxPQUFELEVBQVUsWUFBVixHQUFBOztRQUFVLGVBQWU7T0FDcEM7QUFBQSxNQUFBLHdDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsWUFBRCxHQUFxQixNQUFBLENBQU8sRUFBUCxFQUFXLElBQUMsQ0FBQSxZQUFaLEVBQTBCLFlBQTFCLENBRnJCLENBQUE7QUFBQSxNQUlBLElBQUMsQ0FBQSxLQUFELEdBQXlCLElBQUEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFDLENBQUEsWUFBWSxDQUFDLGVBQXpCLENBSnpCLENBQUE7QUFBQSxNQUtBLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxHQUFxQixJQUFDLENBQUEsRUFBRSxDQUFDLEtBQUosQ0FBQSxDQUxyQixDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsR0FBcUIsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQUEsQ0FOckIsQ0FBQTtBQUFBLE1BT0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxXQUFQLEdBQXFCLElBQUMsQ0FBQSxZQUFZLENBQUMsV0FQbkMsQ0FBQTtBQUFBLE1BU0EsTUFBTSxDQUFDLEtBQVAsR0FBZSxJQUFDLENBQUEsS0FUaEIsQ0FBQTtBQUFBLE1BVUEsTUFBTSxDQUFDLEdBQVAsR0FBZSxJQUFDLENBQUEsS0FBRCxDQUFPLElBQUMsQ0FBQSxHQUFSLENBVmYsQ0FBQTtBQUFBLE1BV0EsTUFBTSxDQUFDLElBQVAsR0FBZSxJQVhmLENBQUE7QUFBQSxNQWFBLElBQUMsQ0FBQSxNQUFELENBQUEsQ0FiQSxDQUFBO0FBQUEsTUFjQSxJQUFDLENBQUEsVUFBRCxDQUFBLENBZEEsQ0FBQTtBQUFBLE1BZUEsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFDLENBQUEsTUFmYixDQUFBO0FBQUEsTUFnQkEsSUFBQyxDQUFBLGNBQUQsR0FBa0IsSUFBQyxDQUFBLE1BaEJuQixDQURXO0lBQUEsQ0FyQ2I7O0FBQUEsb0JBd0RBLE1BQUEsR0FBUSxTQUFBLEdBQUE7QUFFTixNQUFBLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSSxDQUFDLGtCQUFMLENBQXdCLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBL0IsRUFDd0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUQvQixFQUV3QixJQUZ4QixFQUd3QixJQUFDLENBQUEsWUFBWSxDQUFDLFdBSHRDLEVBSXdCLElBQUMsQ0FBQSxZQUFZLENBQUMsU0FKdEMsQ0FBWixDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsS0FBRCxHQUFZLEdBQUEsQ0FBQSxLQUxaLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFELEdBQVksQ0FBQSxDQUFFLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBVCxDQU5aLENBQUE7QUFBQSxNQVNBLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLElBQUMsQ0FBQSxRQVRuQixDQUFBO0FBQUEsTUFVQSxNQUFNLENBQUMsS0FBUCxHQUFrQixJQUFDLENBQUEsS0FWbkIsQ0FBQTtBQUFBLE1BWUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxJQUFyQixDQVpBLENBQUE7QUFBQSxNQWFBLElBQUMsQ0FBQSxTQUFELENBQUEsQ0FiQSxDQUFBO2FBY0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsSUFBQyxDQUFBLE1BQVosRUFoQk07SUFBQSxDQXhEUixDQUFBOztBQUFBLG9CQTBFQSxTQUFBLEdBQVcsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLE1BQU0sQ0FBQyxHQUFSLENBQVk7QUFBQSxRQUFBLE9BQUEsRUFBUyxNQUFUO09BQVosRUFBSDtJQUFBLENBMUVYLENBQUE7O0FBQUEsb0JBMkVBLFNBQUEsR0FBVyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLEdBQVIsQ0FBWTtBQUFBLFFBQUEsT0FBQSxFQUFTLE9BQVQ7QUFBQSxRQUFrQixRQUFBLEVBQVUsVUFBNUI7T0FBWixFQUFIO0lBQUEsQ0EzRVgsQ0FBQTs7QUFBQSxvQkE2RUEsTUFBQSxHQUFRLFNBQUEsR0FBQTtBQUNOLFVBQUEseUJBQUE7QUFBQSxNQURPLGtFQUNQLENBQUE7QUFBQSxXQUFBLCtDQUFBOzZCQUFBO0FBQ0UsUUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFUO0FBQ0UsVUFBQSxLQUFLLENBQUMsS0FBTixHQUFjLElBQWQsQ0FBQTtBQUFBLFVBQ0EsS0FBQSxHQUFRLEtBQUssQ0FBQyxPQURkLENBREY7U0FBQTtBQUFBLFFBR0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFQLENBQWdCLEtBQWhCLENBSEEsQ0FERjtBQUFBLE9BQUE7YUFLQSxLQU5NO0lBQUEsQ0E3RVIsQ0FBQTs7QUFBQSxvQkFxRkEsUUFBQSxHQUFVLFNBQUEsR0FBQSxDQXJGVixDQUFBOztBQUFBLG9CQXVGQSxNQUFBLEdBQVEsU0FBQSxHQUFBO0FBQ04sVUFBQSxtQkFBQTtBQUFBLE1BRE8sa0VBQ1AsQ0FBQTtBQUFBLE1BQUEsSUFBQSxDQUFBLFFBQTBDLENBQUMsTUFBM0M7QUFBQSxRQUFBLFFBQUEsR0FBVyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQWxCLENBQUE7T0FBQTtBQUVBLFdBQUEsMkNBQUE7NkJBQUE7QUFDRSxRQUFBLElBQUcsS0FBSyxDQUFDLE9BQVQ7QUFDRSxVQUFBLEtBQUssQ0FBQyxLQUFOLEdBQWMsSUFBZCxDQUFBO0FBQUEsVUFDQSxLQUFBLEdBQVEsS0FBSyxDQUFDLE9BRGQsQ0FERjtTQUFBO0FBQUEsUUFHQSxJQUFDLENBQUEsS0FBSyxDQUFDLFdBQVAsQ0FBbUIsS0FBbkIsQ0FIQSxDQURGO0FBQUEsT0FGQTthQU9BLEtBUk07SUFBQSxDQXZGUixDQUFBOztBQUFBLG9CQWlHQSxjQUFBLEdBQWdCLFNBQUEsR0FBQSxDQWpHaEIsQ0FBQTs7QUFBQSxvQkFtR0EsT0FBQSxHQUFTLFNBQUEsR0FBQTtBQUNQLE1BQUEsSUFBQyxDQUFBLGNBQUQsQ0FBQSxDQUFBLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBREEsQ0FBQTthQUVBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFITztJQUFBLENBbkdULENBQUE7O0FBQUEsb0JBd0dBLFVBQUEsR0FBWSxTQUFDLEtBQUQsR0FBQTthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQWhCLENBQXlCLEtBQUssQ0FBQyxPQUFOLElBQWlCLEtBQTFDLEVBQVg7SUFBQSxDQXhHWixDQUFBOztBQUFBLG9CQTBHQSxZQUFBLEdBQWMsU0FBQSxHQUFBO0FBQ1osVUFBQSxRQUFBO0FBQUEsTUFEYSxrRUFDYixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxhQUFnQixRQUFoQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsTUFBRCxhQUFRLFFBQVIsRUFGWTtJQUFBLENBMUdkLENBQUE7O0FBQUEsb0JBOEdBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixVQUFBLFFBQUE7QUFBQSxNQURXLGtFQUNYLENBQUE7YUFBQSxJQUFDLENBQUEsV0FBRCxhQUFhLGFBQUEsUUFBQSxDQUFBLFFBQWEsQ0FBQSxDQUFBLENBQWIsQ0FBYixFQURVO0lBQUEsQ0E5R1osQ0FBQTs7QUFBQSxvQkFpSEEsV0FBQSxHQUFhLFNBQUEsR0FBQTtBQUNYLFVBQUEsc0JBQUE7QUFBQSxNQURZLHlHQUFhLDBCQUN6QixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxhQUFnQixRQUFoQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsYUFBRCxhQUFlLGFBQUEsUUFBQSxDQUFBLFFBQWEsQ0FBQSxRQUFBLENBQWIsQ0FBZixFQUZXO0lBQUEsQ0FqSGIsQ0FBQTs7QUFBQSxvQkFxSEEsYUFBQSxHQUFlLFNBQUEsR0FBQTtBQUNiLFVBQUEsa0RBQUE7QUFBQSxNQURjLHlHQUFhLDBCQUMzQixDQUFBO0FBQUEsV0FBQSwrQ0FBQTs2QkFBQTtBQUNFLFFBQUEsSUFBRyxLQUFLLENBQUMsT0FBVDtBQUNFLFVBQUEsS0FBSyxDQUFDLEtBQU4sR0FBYyxJQUFkLENBQUE7QUFBQSxVQUNBLEtBQUEsR0FBUSxLQUFLLENBQUMsT0FEZCxDQURGO1NBREY7QUFBQSxPQUFBO0FBSUEsV0FBQSxpREFBQTs2QkFBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUFQLENBQW1CLEtBQUssQ0FBQyxPQUFOLElBQWlCLEtBQXBDLEVBQTRDLFFBQTVDLENBQUEsQ0FBQTtBQUFBLE9BSkE7YUFLQSxLQU5hO0lBQUEsQ0FySGYsQ0FBQTs7aUJBQUE7O0tBRGtCLEtBQUssQ0FBQyxXQVYxQixDQUFBOztBQUFBLEVBeUlBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEtBeklqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLEtBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQ0U7QUFBQSxJQUFBLE1BQUEsRUFBUSxTQUFDLElBQUQsRUFBTyxFQUFQLEdBQUE7YUFBYyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxFQUFBLEdBQUssSUFBTixDQUFoQixHQUE4QixLQUE1QztJQUFBLENBQVI7QUFBQSxJQUVBLEdBQUEsRUFBSyxTQUFDLEdBQUQsRUFBTSxRQUFOLEVBQWdCLFFBQWhCLEVBQTBCLFNBQTFCLEVBQXFDLFNBQXJDLEdBQUE7YUFDSCxDQUFDLENBQUMsU0FBQSxHQUFZLFNBQWIsQ0FBQSxHQUEwQixDQUFDLENBQUMsR0FBQSxHQUFNLFFBQVAsQ0FBQSxHQUFtQixDQUFDLFFBQUEsR0FBVyxRQUFaLENBQXBCLENBQTNCLENBQUEsR0FBeUUsVUFEdEU7SUFBQSxDQUZMO0FBQUEsSUFLQSxlQUFBLEVBQWlCLFNBQUMsTUFBRCxHQUFBO0FBQ2YsTUFBQSxNQUFBLEdBQVksTUFBSCxHQUFlLE1BQWYsR0FBMkIsR0FBcEMsQ0FBQTtBQUNBLE1BQUEsSUFBRyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsTUFBbkI7ZUFBK0IsQ0FBQSxFQUEvQjtPQUFBLE1BQUE7ZUFBdUMsRUFBdkM7T0FGZTtJQUFBLENBTGpCO0FBQUEsSUFTQSxTQUFBLEVBQVcsU0FBQyxJQUFELEVBQU8sRUFBUCxHQUFBO2FBQWMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxFQUFBLEVBQUEsR0FBTyxJQUFSLENBQWhCLEdBQWdDLElBQTNDLEVBQWQ7SUFBQSxDQVRYO0FBQUEsSUFXQSxVQUFBLEVBQVksU0FBQyxNQUFELEdBQUE7QUFDVixNQUFBLE1BQUEsR0FBWSxNQUFILEdBQWUsTUFBZixHQUEyQixHQUFwQyxDQUFBO2FBQ0EsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLE9BRk47SUFBQSxDQVhaO0dBREYsQ0FBQTs7QUFBQSxFQWlCQSxNQUFNLENBQUMsT0FBUCxHQUFpQixLQWpCakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSx3Q0FBQTs7OzJDQUFBOztBQUFBLEVBQU07MkJBQ0o7O0FBQUEsd0JBQUEsT0FBQSxHQUFTLElBQVQsQ0FBQTs7QUFBQSx3QkFFQSxPQUFBLEdBQVMsU0FBQyxRQUFELEdBQUE7QUFDUCxVQUFBLENBQUE7QUFBQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FBWCxDQUFBO0FBQ0E7aUJBQ0ssUUFBSCxDQUFBLEVBREY7U0FBQSxjQUFBO0FBR0UsVUFESSxVQUNKLENBQUE7QUFBQSxnQkFBTSxDQUFOLENBSEY7U0FBQTtBQUtFLFVBQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFYLENBTEY7U0FGRjtPQUFBLE1BQUE7ZUFTSyxRQUFILENBQUEsRUFURjtPQURPO0lBQUEsQ0FGVCxDQUFBOztBQUFBLHdCQWNBLEdBQUEsR0FBSyxHQWRMLENBQUE7O0FBQUEsd0JBZUEsUUFBQSxHQUFVLENBZlYsQ0FBQTs7QUFBQSx3QkFpQkEsS0FBQSxHQUFPLFNBQUMsT0FBRCxHQUFBO0FBQ0wsVUFBQSxtREFBQTtBQUFBLDhCQUFBLENBQUE7QUFBQSw0REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxJQUFDLENBQUEsWUFBa0IsSUFBQSxTQUFBLENBQVUsSUFBQyxDQUFBLEdBQVgsRUFBZ0IsSUFBQyxDQUFBLFFBQWpCLEVBQW5CLENBQUE7QUFDQSxNQUFBLElBQUEsQ0FBQSxPQUFBO0FBQUEsZUFBTyxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQWxCLENBQUE7T0FEQTs7O0FBRUE7Ozs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsU0FBUyxDQUFDLFdBQVg7O1lBQUEsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7aUJBQ0EsT0FBQSxDQUFRLEtBQUMsQ0FBQSxTQUFTOzs7WUFBbEI7O2dCQUpLO0lBQUEsQ0FqQlAsQ0FBQTs7QUFBQSx3QkF1QkEsVUFBQSxHQUFZLFNBQUEsR0FBQTtBQUNWLE1BQUEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFYLEdBQW1CLEVBQW5CLENBQUE7YUFDQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsR0FBbUIsRUFGVDtJQUFBLENBdkJaLENBQUE7O0FBQUEsd0JBMkJBLFFBQUEsR0FDRTtBQUFBLE1BQUEsTUFBQSxFQUFRLFNBQVI7QUFBQSxNQUNBLFFBQUEsRUFBVSxPQURWO0tBNUJGLENBQUE7O0FBQUEsd0JBK0JBLFFBQUEsR0FBVSxTQUFDLE1BQUQsRUFBYyxRQUFkLEdBQUE7QUFDUixVQUFBLHNCQUFBOztRQURTLFNBQVM7T0FDbEI7O1FBRHNCLFdBQVc7T0FDakM7QUFBQSxNQUFBLElBQWtFLFFBQUEsS0FBWSxJQUE5RTtBQUFBLFFBQUEsUUFBQSxHQUFpQixDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QixRQUF4QixFQUFrQyxNQUFsQyxDQUFqQixDQUFBO09BQUE7QUFBQSxNQUNBLE1BQUEsR0FBaUIsR0FBQSxDQUFBLFVBRGpCLENBQUE7QUFBQSxNQUVBLE1BQU0sQ0FBQyxNQUFQLEdBQWlCLFNBQUMsQ0FBRCxHQUFBO2VBQU8sUUFBUSxDQUFDLE9BQVQsQ0FBaUIsTUFBTSxDQUFDLE1BQXhCLEVBQVA7TUFBQSxDQUZqQixDQUFBO0FBQUEsTUFHQSxNQUFNLENBQUMsT0FBUCxHQUFpQixRQUFRLENBQUMsS0FIMUIsQ0FBQTtBQUFBLE1BS0EsSUFBQTtBQUFPLGdCQUFPLFFBQVEsQ0FBQyxNQUFoQjtBQUFBLGVBQ0EsYUFEQTttQkFDb0IsTUFBTSxDQUFDLGlCQUFQLENBQXlCLFFBQVEsQ0FBQyxJQUFsQyxFQUF3QyxRQUFRLENBQUMsUUFBakQsRUFEcEI7QUFBQSxlQUVBLGNBRkE7bUJBRW9CLE1BQU0sQ0FBQyxrQkFBUCxDQUEwQixRQUFRLENBQUMsSUFBbkMsRUFBeUMsUUFBUSxDQUFDLFFBQWxELEVBRnBCO0FBQUEsZUFHQSxTQUhBO21CQUdvQixNQUFNLENBQUMsYUFBUCxDQUFxQixRQUFRLENBQUMsSUFBOUIsRUFBb0MsUUFBUSxDQUFDLFFBQTdDLEVBSHBCO0FBQUEsZUFJQSxNQUpBO21CQUlvQixNQUFNLENBQUMsVUFBUCxDQUFrQixRQUFRLENBQUMsSUFBM0IsRUFBaUMsUUFBUSxDQUFDLFFBQTFDLEVBSnBCO0FBQUE7VUFMUCxDQUFBO2FBV0EsT0FaUTtJQUFBLENBL0JWLENBQUE7O0FBQUEsd0JBNkNBLFNBQUEsR0FBVyxTQUFDLE1BQUQsRUFBYyxRQUFkLEdBQUE7QUFDVCxVQUFBLGtEQUFBOztRQURVLFNBQVM7T0FDbkI7O1FBRHVCLFdBQVc7T0FDbEM7QUFBQSxNQUFBLEVBQUEsR0FBTSxHQUFBLENBQUEsSUFBUSxDQUFDLFVBQWYsQ0FBQTtBQUFBLE1BRUEsUUFBQSxHQUFlLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUMsQ0FBQSxRQUFkLEVBQXdCLFFBQXhCLEVBQWtDLE1BQWxDLENBRmYsQ0FBQTtBQUFBLE1BR0EsWUFBQSxHQUFlLFFBQVEsQ0FBQyxPQUh4QixDQUFBO0FBQUEsTUFJQSxVQUFBLEdBQWUsUUFBUSxDQUFDLEtBSnhCLENBQUE7QUFBQSxNQU1BLFFBQVEsQ0FBQyxPQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztxQkFBTzs7Ozs7O1FBTjFDLENBQUE7QUFBQSxNQU9BLFFBQVEsQ0FBQyxLQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sT0FBTixDQUFjOzs7O3FCQUFPOzs7Ozs7UUFQeEMsQ0FBQTtBQUFBLE1BU0EsT0FBQSxHQUFVLFNBQUMsSUFBRCxHQUFBO0FBQ1IsWUFBQSxtRUFBQTtBQUFBLGdDQUFBLENBQUE7QUFBQSw4REFBQSxDQUFBO0FBQUEsUUFBQSxNQUFBLEdBQVMsSUFBQyxDQUFBLFFBQUQsQ0FBVSxRQUFWLEVBQW9CLElBQXBCLENBQVQsQ0FBQTs7O0FBQ0E7OztjQUFBLENBQUE7QUFBQSxZQUFNLEVBQUUsQ0FBQyxJQUFIOzs7eUJBQWM7Ozs7Y0FBZCxDQUFOLENBQUE7QUFBQSx1Q0FBQTs7OztBQUNBLG9CQUFPLE1BQVA7QUFBQSxtQkFDTyxTQURQO0FBQ3NCLGdCQUFBLFlBQUEsQ0FBYSxNQUFNLENBQUMsTUFBcEIsQ0FBQSxDQUR0QjtBQUNPO0FBRFAsbUJBRU8sT0FGUDtBQUVvQixnQkFBQSxVQUFBLENBQVcsQ0FBWCxDQUFBLENBRnBCO0FBQUE7bUJBR0EsSUFBQSxDQUFBOztrQkFOUTtNQUFBLENBVFYsQ0FBQTtBQUFBLE1BaUJBLE9BQU8sQ0FBQyxLQUFSLEdBQWdCLFNBQUMsVUFBRCxHQUFBO0FBQ2QsWUFBQSxLQUFBO0FBQUEsUUFBQSxJQUFtQyxNQUFuQztBQUFBLGlCQUFPLE1BQU0sQ0FBQyxLQUFQLENBQWEsVUFBYixDQUFQLENBQUE7U0FBQTtBQUFBLFFBQ0EsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFELENBQUEsQ0FBUSxDQUFDLE9BQVQsQ0FBaUIsT0FBakIsQ0FEUixDQUFBO0FBRUEsUUFBQSxJQUE2QixLQUFBLEdBQVEsQ0FBQSxDQUFyQztBQUFBLFVBQUEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFRLENBQUMsTUFBVCxDQUFnQixLQUFoQixFQUF1QixDQUF2QixDQUFBLENBQUE7U0FGQTtBQUdBLFFBQUEsSUFBc0IsSUFBQyxDQUFBLFNBQXZCO0FBQUEsVUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsRUFBQSxDQUFBO1NBSEE7ZUFTQSxRQVZjO01BQUEsQ0FqQmhCLENBQUE7QUE2QkEsTUFBQSxJQUFBLENBQUEsSUFBdUIsQ0FBQSxPQUF2QjtBQUFBLGVBQU8sT0FBUCxDQUFBO09BN0JBO0FBQUEsTUE4QkEsSUFBQyxDQUFBLEtBQUQsQ0FBTyxPQUFQLENBOUJBLENBQUE7YUErQkEsUUFoQ1M7SUFBQSxDQTdDWCxDQUFBOztBQUFBLHdCQStFQSxTQUFBLEdBQVcsU0FBQyxPQUFELEVBQVUsRUFBVixFQUFjLEtBQWQsR0FBQTtBQUNULFVBQUEsMEVBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTs7UUFEdUIsUUFBUTtPQUMvQjtBQUFBLE1BQUEsRUFBQSxHQUFTLElBQUEsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUFULENBQUE7QUFBQSxNQUVBLE9BQU8sQ0FBQyxPQUFSLEdBQWtCLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztxQkFBTzs7Ozs7O1FBRnpDLENBQUE7QUFBQSxNQUdBLE9BQU8sQ0FBQyxLQUFSLEdBQWtCLEVBQUUsQ0FBQyxFQUFILENBQU0sT0FBTixDQUFjOzs7O3FCQUFPOzs7Ozs7UUFIdkMsQ0FBQTtBQUtBLE1BQUEsSUFBRyxLQUFIO0FBQWMsUUFBQSxJQUFDLENBQUEsU0FBRCxDQUFXLE9BQVgsQ0FBQSxDQUFkO09BQUEsTUFBQTtBQUNLLFFBQUEsSUFBQyxDQUFBLFFBQUQsQ0FBVSxPQUFWLENBQUEsQ0FETDtPQUxBOzs7QUFRQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEVBQUUsQ0FBQyxJQUFIOzs7dUJBQWM7Ozs7WUFBZCxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztpQkFDQSxFQUFBLENBQUcsTUFBSCxFQUFXLE1BQUEsSUFBVSxDQUFyQjs7Z0JBVlM7SUFBQSxDQS9FWCxDQUFBOztxQkFBQTs7TUFERixDQUFBOztBQUFBLEVBNkZBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBN0ZqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaGdZQTtBQUFBLEVBQUEsT0FBQSxDQUFRLGFBQVIsQ0FBQSxDQUFBOztBQUFBLEVBRUEsT0FBQSxDQUFRLE9BQVIsQ0FGQSxDQUFBOztBQUFBLEVBR0EsT0FBQSxDQUFRLGlCQUFSLENBSEEsQ0FBQTs7QUFBQSxFQUlBLE9BQUEsQ0FBUSxtQkFBUixDQUpBLENBQUE7O0FBQUEsRUFLQSxPQUFBLENBQVEsaUJBQVIsQ0FMQSxDQUFBOztBQUFBLEVBT0EsT0FBQSxDQUFRLGNBQVIsQ0FQQSxDQUFBOztBQUFBLEVBUUEsT0FBQSxDQUFRLG1CQUFSLENBUkEsQ0FBQTs7QUFBQSxFQVdBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsT0FBQSxDQUFRLFNBQVIsQ0FYZixDQUFBOztBQUFBLEVBYUEsQ0FBQSxDQUFFLFNBQUEsR0FBQTtBQUNBLFFBQUEsR0FBQTtBQUFBLElBQUEsSUFBVSxNQUFNLENBQUMsR0FBakI7QUFBQSxZQUFBLENBQUE7S0FBQTtBQUFBLElBQ0EsR0FBQSxHQUFNLE9BQUEsQ0FBUSxzQkFBUixDQUROLENBQUE7V0FFQSxNQUFNLENBQUMsR0FBUCxHQUFpQixJQUFBLEdBQUEsQ0FBSTtBQUFBLE1BQUEsRUFBQSxFQUFJLENBQUEsQ0FBRSxNQUFGLENBQUo7S0FBSixFQUhqQjtFQUFBLENBQUYsQ0FiQSxDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLCtGQUFBO0lBQUE7OztzQkFBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFVLElBQUMsQ0FBQSxLQUFELElBQVUsT0FBQSxDQUFRLE9BQVIsQ0FBcEIsQ0FBQTs7QUFBQSxFQUNDLFFBQVMsTUFBVCxLQURELENBQUE7O0FBQUEsRUFLQSxJQUFBLEdBQ0U7QUFBQSxJQUFBLE1BQUEsRUFBUSxTQUFDLE1BQUQsR0FBQTthQUNOLE1BQUEsd0NBQVcsTUFBTSxDQUFDLGVBQWxCLElBQTRCLE1BQU0sQ0FBQyxJQUQ3QjtJQUFBLENBQVI7QUFBQSxJQUdBLE9BQUEsRUFBUyxJQUhUO0FBQUEsSUFLQSxPQUFBLEVBQVMsU0FBQyxRQUFELEdBQUE7QUFDUCxVQUFBLENBQUE7QUFBQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FBWCxDQUFBO0FBQ0E7aUJBQ0ssUUFBSCxDQUFBLEVBREY7U0FBQSxjQUFBO0FBR0UsVUFESSxVQUNKLENBQUE7QUFBQSxnQkFBTSxDQUFOLENBSEY7U0FBQTtBQUtFLFVBQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFYLENBTEY7U0FGRjtPQUFBLE1BQUE7ZUFTSyxRQUFILENBQUEsRUFURjtPQURPO0lBQUEsQ0FMVDtBQUFBLElBaUJBLEdBQUEsRUFBSyxHQWpCTDtBQUFBLElBa0JBLFFBQUEsRUFBVSxDQWxCVjtBQUFBLElBb0JBLEtBQUEsRUFBTyxTQUFDLE9BQUQsR0FBQTtBQUNMLFVBQUEsbURBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTtBQUFBLE1BQUEsSUFBQyxDQUFBLGNBQUQsSUFBQyxDQUFBLFlBQWtCLElBQUEsU0FBQSxDQUFVLElBQUMsQ0FBQSxHQUFYLEVBQWdCLElBQUMsQ0FBQSxRQUFqQixFQUFuQixDQUFBO0FBQ0EsTUFBQSxJQUFBLENBQUEsT0FBQTtBQUFBLGVBQU8sSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFsQixDQUFBO09BREE7OztBQUVBOzs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsU0FBUyxDQUFDLFdBQVg7O1lBQUEsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7aUJBQ0EsT0FBQSxDQUFRLEtBQUMsQ0FBQSxTQUFTOzs7WUFBbEI7O2dCQUpLO0lBQUEsQ0FwQlA7QUFBQSxJQTBCQSxVQUFBLEVBQVksU0FBQSxHQUFBO0FBQ1YsTUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsR0FBbUIsRUFBbkIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQixFQUZUO0lBQUEsQ0ExQlo7R0FORixDQUFBOztBQUFBLEVBb0NNO3NCQUNKOztBQUFBLG1CQUFBLFFBQUEsR0FDRTtBQUFBLE1BQUEsV0FBQSxFQUFhLGtCQUFiO0FBQUEsTUFDQSxRQUFBLEVBQVUsTUFEVjtBQUFBLE1BRUEsV0FBQSxFQUFhLEtBRmI7QUFBQSxNQUdBLE9BQUEsRUFBUztBQUFBLFFBQUMsa0JBQUEsRUFBb0IsZ0JBQXJCO09BSFQ7S0FERixDQUFBOztBQUFBLG1CQU1BLEtBQUEsR0FBTyxJQUFJLENBQUMsS0FOWixDQUFBOztBQUFBLG1CQVFBLElBQUEsR0FBTSxTQUFDLE1BQUQsRUFBUyxRQUFULEdBQUE7YUFDQSxJQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLENBQVAsRUFEQTtJQUFBLENBUk4sQ0FBQTs7QUFBQSxtQkFXQSxTQUFBLEdBQVcsU0FBQyxNQUFELEVBQVMsUUFBVCxHQUFBO0FBQ1QsVUFBQSw2RUFBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLElBQU4sQ0FBQTtBQUFBLE1BQ0EsRUFBQSxHQUFNLEdBQUEsQ0FBQSxJQUFRLENBQUMsVUFEZixDQUFBO0FBQUEsTUFHQSxRQUFBLEdBQWUsSUFBQyxDQUFBLFlBQUQsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLENBSGYsQ0FBQTtBQUFBLE1BSUEsWUFBQSxHQUFlLFFBQVEsQ0FBQyxPQUp4QixDQUFBO0FBQUEsTUFLQSxVQUFBLEdBQWUsUUFBUSxDQUFDLEtBTHhCLENBQUE7QUFBQSxNQU9BLFFBQVEsQ0FBQyxPQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztjQUFPO2NBQU07cUJBQVk7Ozs7OztRQVA1RCxDQUFBO0FBQUEsTUFRQSxRQUFRLENBQUMsS0FBVCxHQUFtQixFQUFFLENBQUMsRUFBSCxDQUFNLE9BQU4sQ0FBYzs7OztjQUFPO2NBQUs7cUJBQVk7Ozs7OztRQVJ6RCxDQUFBO0FBQUEsTUFVQSxPQUFBLEdBQVUsU0FBQyxJQUFELEdBQUE7QUFDUixZQUFBLDJEQUFBO0FBQUEsZ0NBQUEsQ0FBQTtBQUFBLDhEQUFBLENBQUE7QUFBQSxRQUFBLEdBQUEsR0FBVSxJQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sUUFBUCxDQUFWLENBQUE7OztBQUNBOzs7Y0FBQSxDQUFBO0FBQUEsWUFBTSxFQUFFLENBQUMsSUFBSDs7O3lCQUFjOzs7O2NBQWQsQ0FBTixDQUFBO0FBQUEsdUNBQUE7Ozs7QUFDQSxvQkFBTyxNQUFQO0FBQUEsbUJBQ08sU0FEUDtBQUNzQixnQkFBQSxZQUFBLENBQWEsSUFBYixFQUFtQixVQUFuQixFQUErQixHQUEvQixDQUFBLENBRHRCO0FBQ087QUFEUCxtQkFFTyxPQUZQO0FBRW9CLGdCQUFBLFVBQUEsQ0FBVyxHQUFYLEVBQWdCLFVBQWhCLEVBQTRCLEtBQTVCLENBQUEsQ0FGcEI7QUFBQTttQkFHQSxJQUFBLENBQUE7O2tCQU5RO01BQUEsQ0FWVixDQUFBO0FBQUEsTUFrQkEsT0FBTyxDQUFDLEtBQVIsR0FBZ0IsU0FBQyxVQUFELEdBQUE7QUFDZCxZQUFBLEtBQUE7QUFBQSxRQUFBLElBQWdDLEdBQWhDO0FBQUEsaUJBQU8sR0FBRyxDQUFDLEtBQUosQ0FBVSxVQUFWLENBQVAsQ0FBQTtTQUFBO0FBQUEsUUFDQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFRLENBQUMsT0FBVCxDQUFpQixPQUFqQixDQURSLENBQUE7QUFFQSxRQUFBLElBQTZCLEtBQUEsR0FBUSxDQUFBLENBQXJDO0FBQUEsVUFBQSxJQUFDLENBQUEsS0FBRCxDQUFBLENBQVEsQ0FBQyxNQUFULENBQWdCLEtBQWhCLEVBQXVCLENBQXZCLENBQUEsQ0FBQTtTQUZBO0FBR0EsUUFBQSxJQUEwQixJQUFJLENBQUMsU0FBL0I7QUFBQSxVQUFBLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBZixFQUFBLENBQUE7U0FIQTtlQVNBLFFBVmM7TUFBQSxDQWxCaEIsQ0FBQTtBQThCQSxNQUFBLElBQUEsQ0FBQSxJQUEwQixDQUFDLE9BQTNCO0FBQUEsZUFBTyxPQUFQLENBQUE7T0E5QkE7QUFBQSxNQStCQSxJQUFDLENBQUEsS0FBRCxDQUFPLE9BQVAsQ0EvQkEsQ0FBQTthQWdDQSxRQWpDUztJQUFBLENBWFgsQ0FBQTs7QUFBQSxtQkE4Q0EsWUFBQSxHQUFjLFNBQUMsTUFBRCxFQUFTLFFBQVQsR0FBQTthQUNaLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUMsQ0FBQSxRQUFkLEVBQXdCLFFBQXhCLEVBQWtDLE1BQWxDLEVBRFk7SUFBQSxDQTlDZCxDQUFBOztnQkFBQTs7TUFyQ0YsQ0FBQTs7QUFBQSxFQXNGTTtBQUNKLGlDQUFBLENBQUE7O0FBQWEsSUFBQSxvQkFBRSxLQUFGLEdBQUE7QUFBVSxNQUFULElBQUMsQ0FBQSxRQUFBLEtBQVEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSwrREFBQSxDQUFWO0lBQUEsQ0FBYjs7QUFBQSx5QkFFQSxJQUFBLEdBQU0sU0FBQyxFQUFELEVBQUssTUFBTCxHQUFBO0FBQ0osVUFBQSxNQUFBO0FBQUEsTUFBQSxNQUFBLEdBQWEsSUFBQSxJQUFDLENBQUEsS0FBRCxDQUFPO0FBQUEsUUFBQSxFQUFBLEVBQUksRUFBSjtPQUFQLENBQWIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sS0FBTjtBQUFBLFFBQ0EsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksTUFBWixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGVBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFIUjtPQURGLEVBRkk7SUFBQSxDQUZOLENBQUE7O0FBQUEseUJBVUEsR0FBQSxHQUFLLFNBQUMsTUFBRCxHQUFBO2FBQ0gsSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxLQUFOO0FBQUEsUUFDQSxHQUFBLEVBQU0sSUFBSSxDQUFDLE1BQUwsQ0FBWSxJQUFDLENBQUEsS0FBYixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGVBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFIUjtPQURGLEVBREc7SUFBQSxDQVZMLENBQUE7O0FBQUEseUJBaUJBLEtBQUEsR0FBTyxTQUFDLE1BQUQsRUFBYyxPQUFkLEdBQUE7QUFDTCxVQUFBLEVBQUE7O1FBRE0sU0FBUztPQUNmOztRQURtQixVQUFVO09BQzdCO0FBQUEsTUFBQSxJQUFHLEVBQUEsR0FBSyxNQUFNLENBQUMsRUFBZjtBQUNFLFFBQUEsTUFBQSxDQUFBLE1BQWEsQ0FBQyxFQUFkLENBQUE7ZUFDQSxJQUFDLENBQUEsSUFBRCxDQUFNLEVBQU4sRUFBVSxNQUFWLENBQWlCLENBQUMsSUFBbEIsQ0FBdUIsQ0FBQSxTQUFBLEtBQUEsR0FBQTtpQkFBQSxTQUFDLE1BQUQsR0FBQTttQkFDckIsS0FBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLENBQWUsTUFBZixFQUF1QixPQUF2QixFQURxQjtVQUFBLEVBQUE7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZCLEVBRkY7T0FBQSxNQUFBO2VBS0UsSUFBQyxDQUFBLEdBQUQsQ0FBSyxNQUFMLENBQVksQ0FBQyxJQUFiLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQyxPQUFELEdBQUE7bUJBQ2hCLEtBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLE9BQWYsRUFBd0IsT0FBeEIsRUFEZ0I7VUFBQSxFQUFBO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixFQUxGO09BREs7SUFBQSxDQWpCUCxDQUFBOztBQUFBLHlCQTRCQSxlQUFBLEdBQWlCLFNBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxHQUFmLEdBQUE7YUFDZixJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBZSxhQUFmLEVBQThCLElBQTlCLEVBQW9DLE1BQXBDLEVBQTRDLEdBQTVDLEVBRGU7SUFBQSxDQTVCakIsQ0FBQTs7QUFBQSx5QkErQkEsWUFBQSxHQUFjLFNBQUMsR0FBRCxFQUFNLFVBQU4sRUFBa0IsS0FBbEIsR0FBQTthQUNaLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLFdBQWYsRUFBNEIsSUFBNUIsRUFBa0MsR0FBbEMsRUFBdUMsVUFBdkMsRUFBbUQsS0FBbkQsRUFEWTtJQUFBLENBL0JkLENBQUE7O3NCQUFBOztLQUR1QixLQXRGekIsQ0FBQTs7QUFBQSxFQXlITTtBQUNKLGdDQUFBLENBQUE7O0FBQWEsSUFBQSxtQkFBRSxNQUFGLEdBQUE7QUFDWCxNQURZLElBQUMsQ0FBQSxTQUFBLE1BQ2IsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSw2REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBakIsQ0FEVztJQUFBLENBQWI7O0FBQUEsd0JBR0EsTUFBQSxHQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTthQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sS0FBTjtBQUFBLFFBQ0EsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FETjtBQUFBLFFBRUEsT0FBQSxFQUFTLElBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBRlQ7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQsQ0FIUDtPQURGLEVBRE07SUFBQSxDQUhSLENBQUE7O0FBQUEsd0JBVUEsTUFBQSxHQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTthQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sTUFBTjtBQUFBLFFBQ0EsSUFBQSxFQUFNLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBQyxDQUFBLE1BQWhCLENBRE47QUFBQSxRQUVBLEdBQUEsRUFBTSxJQUFJLENBQUMsTUFBTCxDQUFZLElBQUMsQ0FBQSxLQUFiLENBRk47QUFBQSxRQUdBLE9BQUEsRUFBUyxJQUFDLENBQUEsY0FBRCxDQUFnQixPQUFoQixDQUhUO0FBQUEsUUFJQSxLQUFBLEVBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxPQUFkLENBSlA7T0FERixFQURNO0lBQUEsQ0FWUixDQUFBOztBQUFBLHdCQWtCQSxNQUFBLEdBQVEsU0FBQyxNQUFELEVBQVMsT0FBVCxHQUFBO2FBQ04sSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxLQUFOO0FBQUEsUUFDQSxJQUFBLEVBQU0sSUFBSSxDQUFDLFNBQUwsQ0FBZSxJQUFDLENBQUEsTUFBaEIsQ0FETjtBQUFBLFFBRUEsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FGTjtBQUFBLFFBR0EsT0FBQSxFQUFTLElBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBSFQ7QUFBQSxRQUlBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQsQ0FKUDtPQURGLEVBRE07SUFBQSxDQWxCUixDQUFBOztBQUFBLHdCQTBCQSxPQUFBLEdBQVMsU0FBQyxNQUFELEVBQVMsT0FBVCxHQUFBO2FBQ1AsSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxRQUFOO0FBQUEsUUFDQSxHQUFBLEVBQU0sSUFBSSxDQUFDLE1BQUwsQ0FBWSxJQUFDLENBQUEsTUFBYixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGNBQUQsQ0FBZ0IsT0FBaEIsQ0FGVDtBQUFBLFFBR0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxZQUFELENBQWMsT0FBZCxDQUhQO09BREYsRUFETztJQUFBLENBMUJULENBQUE7O0FBQUEsd0JBbUNBLGNBQUEsR0FBZ0IsU0FBQyxPQUFELEdBQUE7O1FBQUMsVUFBVTtPQUN6QjthQUFBLENBQUEsU0FBQSxLQUFBLEdBQUE7ZUFBQSxTQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsR0FBZixHQUFBO0FBQ0UsY0FBQSxXQUFBO0FBQUEsVUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFIO0FBQ0UsWUFBQSxJQUFBLEdBQU8sS0FBUCxDQURGO1dBQUEsTUFBQTtBQUdFLFlBQUEsSUFBQSxHQUFPLEtBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxDQUFnQixJQUFoQixDQUFQLENBSEY7V0FBQTtBQUFBLFVBS0EsSUFBSSxDQUFDLE9BQUwsQ0FBYSxTQUFBLEdBQUE7QUFDWCxZQUFBLElBQUcsSUFBSDtBQUVFLGNBQUEsSUFBRyxJQUFJLENBQUMsRUFBTCxJQUFZLEtBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixLQUFnQixJQUFJLENBQUMsRUFBcEM7QUFDRSxnQkFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLFFBQVIsQ0FBaUIsSUFBSSxDQUFDLEVBQXRCLENBQUEsQ0FERjtlQUFBO3FCQUlBLEtBQUMsQ0FBQSxNQUFNLENBQUMsZ0JBQVIsQ0FBeUIsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUF6QixFQU5GO2FBRFc7VUFBQSxDQUFiLENBTEEsQ0FBQTtBQUFBLFVBY0EsS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLGFBQWhCLEVBQStCLElBQS9CLEVBQXFDLE1BQXJDLEVBQTZDLEdBQTdDLENBZEEsQ0FBQTs7Z0JBZWUsQ0FBRSxLQUFqQixDQUF1QixLQUFDLENBQUEsTUFBeEI7V0FmQTt1REFnQlksQ0FBRSxLQUFkLENBQW9CLEtBQUMsQ0FBQSxNQUFyQixXQWpCRjtRQUFBLEVBQUE7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLEVBRGM7SUFBQSxDQW5DaEIsQ0FBQTs7QUFBQSx3QkF1REEsWUFBQSxHQUFjLFNBQUMsT0FBRCxHQUFBOztRQUFDLFVBQVU7T0FDdkI7YUFBQSxDQUFBLFNBQUEsS0FBQSxHQUFBO2VBQUEsU0FBQyxHQUFELEVBQU0sVUFBTixFQUFrQixLQUFsQixHQUFBO0FBQ0UsY0FBQSxXQUFBO0FBQUEsVUFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsV0FBaEIsRUFBNkIsR0FBN0IsRUFBa0MsVUFBbEMsRUFBOEMsS0FBOUMsQ0FBQSxDQUFBOztnQkFDYSxDQUFFLEtBQWYsQ0FBcUIsS0FBQyxDQUFBLE1BQXRCO1dBREE7dURBRVksQ0FBRSxLQUFkLENBQW9CLEtBQUMsQ0FBQSxNQUFyQixXQUhGO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsRUFEWTtJQUFBLENBdkRkLENBQUE7O3FCQUFBOztLQURzQixLQXpIeEIsQ0FBQTs7QUFBQSxFQXdMQSxLQUFLLENBQUMsSUFBTixHQUFhLEVBeExiLENBQUE7O0FBQUEsRUEwTEEsT0FBQSxHQUNFO0FBQUEsSUFBQSxJQUFBLEVBQU0sU0FBQSxHQUFBO2FBQU8sSUFBQSxTQUFBLENBQVUsSUFBVixFQUFQO0lBQUEsQ0FBTjtBQUFBLElBRUEsR0FBQSxFQUFLLFNBQUEsR0FBQTtBQUNILFVBQUEsU0FBQTtBQUFBLE1BREksOERBQ0osQ0FBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLFdBQWIsQ0FBTixDQUFBO0FBQ0EsTUFBQSxJQUFrQixHQUFHLENBQUMsTUFBSixDQUFXLEdBQUcsQ0FBQyxNQUFKLEdBQWEsQ0FBeEIsQ0FBQSxLQUE4QixHQUFoRDtBQUFBLFFBQUEsR0FBQSxJQUFPLEdBQVAsQ0FBQTtPQURBO0FBQUEsTUFFQSxHQUFBLElBQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFYLENBQWtCLElBQUMsQ0FBQSxFQUFuQixDQUZQLENBQUE7QUFBQSxNQUdBLElBQUksQ0FBQyxPQUFMLENBQWEsR0FBYixDQUhBLENBQUE7YUFJQSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsRUFMRztJQUFBLENBRkw7R0EzTEYsQ0FBQTs7QUFBQSxFQW9NQSxNQUFBLEdBQ0U7QUFBQSxJQUFBLElBQUEsRUFBTSxTQUFBLEdBQUE7YUFBTyxJQUFBLFVBQUEsQ0FBVyxJQUFYLEVBQVA7SUFBQSxDQUFOO0FBQUEsSUFFQSxHQUFBLEVBQUssU0FBQSxHQUFBO0FBQ0gsVUFBQSxJQUFBO0FBQUEsTUFESSw4REFDSixDQUFBO0FBQUEsTUFBQSxJQUFJLENBQUMsT0FBTCxDQUFhLElBQUMsQ0FBQSxTQUFTLENBQUMsV0FBWCxDQUFBLENBQUEsR0FBMkIsR0FBeEMsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFJLENBQUMsT0FBTCxDQUFhLEtBQUssQ0FBQyxJQUFuQixDQURBLENBQUE7YUFFQSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsRUFIRztJQUFBLENBRkw7R0FyTUYsQ0FBQTs7QUFBQSxFQTRNQSxLQUFLLENBQUMsSUFBTixHQUNFO0FBQUEsSUFBQSxRQUFBLEVBQVUsU0FBQSxHQUFBO0FBQ1IsTUFBQSxJQUFDLENBQUEsS0FBRCxDQUFPLElBQUMsQ0FBQSxTQUFSLENBQUEsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBUSxJQUFDLENBQUEsVUFBVCxDQURBLENBQUE7QUFBQSxNQUdBLElBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixDQUhBLENBQUE7YUFJQSxJQUFDLENBQUEsT0FBRCxDQUFTLE9BQVQsRUFMUTtJQUFBLENBQVY7QUFBQSxJQVNBLFNBQUEsRUFBVyxTQUFBLEdBQUE7QUFDVCxVQUFBLElBQUE7YUFBQSxRQUFBLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBQSxDQUFPLENBQUMsS0FBUixhQUFjLFNBQWQsRUFEUztJQUFBLENBVFg7QUFBQSxJQVlBLFVBQUEsRUFBWSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsT0FBZixHQUFBOztRQUFlLFVBQVU7T0FDbkM7QUFBQSxNQUFBLElBQVUsT0FBTyxDQUFDLElBQVIsS0FBZ0IsS0FBMUI7QUFBQSxjQUFBLENBQUE7T0FBQTthQUNBLE1BQU0sQ0FBQyxJQUFQLENBQUEsQ0FBYyxDQUFBLElBQUEsQ0FBZCxDQUFvQixPQUFPLENBQUMsSUFBNUIsRUFBa0MsT0FBbEMsRUFGVTtJQUFBLENBWlo7R0E3TUYsQ0FBQTs7QUFBQSxFQTZOQSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQVgsR0FDRTtBQUFBLElBQUEsUUFBQSxFQUFVLFNBQUEsR0FBQTtBQUNSLE1BQUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLENBQUEsQ0FBQTthQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsT0FBVCxFQUZRO0lBQUEsQ0FBVjtHQTlORixDQUFBOztBQUFBLEVBb09BLElBQUksQ0FBQyxRQUFMLEdBQTBCLElBQUksQ0FBQSxTQUFFLENBQUEsUUFwT2hDLENBQUE7O0FBQUEsRUFxT0EsSUFBSSxDQUFDLElBQUwsR0FBMEIsSUFyTzFCLENBQUE7O0FBQUEsRUFzT0EsSUFBSSxDQUFDLFNBQUwsR0FBMEIsU0F0TzFCLENBQUE7O0FBQUEsRUF1T0EsSUFBSSxDQUFDLFVBQUwsR0FBMEIsVUF2TzFCLENBQUE7O0FBQUEsRUF3T0EsS0FBSyxDQUFDLElBQU4sR0FBMEIsSUF4TzFCLENBQUE7O0FBQUEsRUF5T0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFYLEdBQTBCLElBek8xQixDQUFBOztBQUFBLEVBME9BLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBWCxHQUEwQixJQTFPMUIsQ0FBQTs7O0lBMk9BLE1BQU0sQ0FBRSxPQUFSLEdBQTJCO0dBM08zQjtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSwrQ0FBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFELElBQVUsT0FBQSxDQUFRLE9BQVIsQ0FBbEIsQ0FBQTs7QUFBQSxFQUdBLFNBQUEsR0FDRTtBQUFBLElBQUEsU0FBQSxFQUFXLFNBQUMsT0FBRCxFQUFVLEVBQVYsRUFBYyxLQUFkLEdBQUE7QUFDVCxVQUFBLHNGQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7O1FBRHVCLFFBQVE7T0FDL0I7QUFBQSxNQUFBLEVBQUEsR0FBUyxJQUFBLElBQUksQ0FBQyxVQUFMLENBQUEsQ0FBVCxDQUFBO0FBQUEsTUFFQSxPQUFPLENBQUMsT0FBUixHQUFrQixFQUFFLENBQUMsRUFBSCxDQUFNLFNBQU4sQ0FBZ0I7Ozs7Y0FBTztjQUFNO3FCQUFZOzs7Ozs7UUFGM0QsQ0FBQTtBQUFBLE1BR0EsT0FBTyxDQUFDLEtBQVIsR0FBa0IsRUFBRSxDQUFDLEVBQUgsQ0FBTSxPQUFOLENBQWM7Ozs7Y0FBTztjQUFLO3FCQUFZOzs7Ozs7UUFIeEQsQ0FBQTtBQUtBLE1BQUEsSUFBRyxLQUFIO0FBQWMsUUFBQSxJQUFDLENBQUEsQ0FBQyxDQUFDLFNBQUgsQ0FBYSxPQUFiLENBQUEsQ0FBZDtPQUFBLE1BQUE7QUFDSyxRQUFJLElBQUEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxPQUFQLENBQUosQ0FETDtPQUxBOzs7QUFRQTs7O1lBQUEsQ0FBQTtBQUFBLFVBQU0sRUFBRSxDQUFDLElBQUg7Ozt1QkFBYzs7OztZQUFkLENBQU4sQ0FBQTtBQUFBLHFDQUFBOzs7O2lCQUNBLEVBQUEsQ0FBRyxNQUFILEVBQVcsR0FBWCxFQUFnQixVQUFoQixFQUE0QixJQUE1Qjs7Z0JBVlM7SUFBQSxDQUFYO0FBQUEsSUFZQSxRQUFBLEVBQVUsU0FBQyxPQUFELEVBQVUsRUFBVixFQUFjLEtBQWQsR0FBQTtBQUNSLE1BQUEsT0FBTyxDQUFDLE1BQVIsR0FBaUIsS0FBakIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsT0FBWCxFQUFvQixFQUFwQixFQUF3QixLQUF4QixFQUZRO0lBQUEsQ0FaVjtBQUFBLElBZ0JBLFNBQUEsRUFBVyxTQUFDLE9BQUQsRUFBVSxFQUFWLEVBQWMsS0FBZCxHQUFBO0FBQ1QsTUFBQSxPQUFPLENBQUMsTUFBUixHQUFpQixLQUFqQixDQUFBO2FBQ0EsSUFBQyxDQUFBLFNBQUQsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCLEVBQXdCLEtBQXhCLEVBRlM7SUFBQSxDQWhCWDtBQUFBLElBb0JBLGVBQUEsRUFBaUIsU0FBQyxPQUFELEVBQVUsRUFBVixHQUFBO2FBQ2YsSUFBQyxDQUFBLFNBQUQsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCLEVBQXdCLElBQXhCLEVBRGU7SUFBQSxDQXBCakI7QUFBQSxJQXVCQSxjQUFBLEVBQWdCLFNBQUMsT0FBRCxFQUFVLEVBQVYsR0FBQTthQUNkLElBQUMsQ0FBQSxRQUFELENBQVUsT0FBVixFQUFtQixFQUFuQixFQUF1QixJQUF2QixFQURjO0lBQUEsQ0F2QmhCO0FBQUEsSUEwQkEsZUFBQSxFQUFpQixTQUFDLE9BQUQsRUFBVSxFQUFWLEdBQUE7YUFDZixJQUFDLENBQUEsU0FBRCxDQUFXLE9BQVgsRUFBb0IsRUFBcEIsRUFBd0IsSUFBeEIsRUFEZTtJQUFBLENBMUJqQjtHQUpGLENBQUE7O0FBQUEsRUFrQ0EsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBbkIsQ0FBd0IsS0FBSyxDQUFDLElBQTlCLEVBQW9DLFNBQXBDLENBbENBLENBQUE7OztJQW1DQSxNQUFNLENBQUUsT0FBUixHQUFrQjtHQW5DbEI7QUFBQTs7Ozs7QUNBQTtBQUFBLE1BQUEseUZBQUE7OzsyQ0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBUSxPQUFBLENBQVEsT0FBUixDQUFSLENBQUE7O0FBQUEsRUFHQSxXQUFBLEdBQWMsU0FBQyxHQUFELEVBQU0sTUFBTixHQUFBO0FBQ1osUUFBQSxrRkFBQTtBQUFBLHFCQUFBLENBQUE7QUFBQSwwREFBQSxDQUFBOzs7QUFBQTs7O1VBQUEsQ0FBQTtBQUFBLFFBQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CO0FBQUEsVUFBQyxHQUFBLEVBQUssR0FBTjtTQUFwQjs7O2NBQXNDO2NBQVE7Y0FBSztxQkFBWTs7OztVQUEvRCxDQUFOLENBQUE7QUFBQSxtQ0FBQTs7OztBQUNBLGdCQUFPLE1BQVA7QUFBQSxlQUNPLE9BRFA7bUJBQ3FCLFFBQUEsR0FBUSxVQUFSLEdBQW1CLElBQW5CLEdBQXVCO21CQUQ1QztBQUFBLGVBRU8sU0FGUDttQkFFc0I7bUJBRnRCO0FBQUE7O2NBRlk7RUFBQSxDQUhkLENBQUE7O0FBQUEsRUFVQSxXQUFBLEdBQ0U7QUFBQSxJQUFBLEtBQUEsRUFBZSx5QkFBZjtBQUFBLElBQ0EsYUFBQSxFQUFlLCtCQURmO0FBQUEsSUFFQSxRQUFBLEVBQWUsNEJBRmY7QUFBQSxJQUdBLEtBQUEsRUFBZSx5QkFIZjtBQUFBLElBSUEsU0FBQSxFQUFlLDZCQUpmO0FBQUEsSUFLQSxLQUFBLEVBQWUseUJBTGY7QUFBQSxJQU1BLFVBQUEsRUFBZSw4QkFOZjtBQUFBLElBT0EsYUFBQSxFQUFlLGlDQVBmO0FBQUEsSUFRQSxJQUFBLEVBQWUsc0JBUmY7QUFBQSxJQVNBLE9BQUEsRUFBZSwyQkFUZjtHQVhGLENBQUE7O0FBQUEsRUFzQkEsUUFBQSxHQUFXLEVBdEJYLENBQUE7O0FBdUJBLFFBQXNDLFNBQUMsSUFBRCxHQUFBO1dBQ3BDLFFBQVMsQ0FBQSxJQUFBLENBQVQsR0FBaUIsU0FBQyxFQUFELEdBQUE7YUFBUSxXQUFBLENBQVksSUFBWixFQUFrQixFQUFsQixFQUFSO0lBQUEsRUFEbUI7RUFBQSxDQUF0QztBQUFBLE9BQUEsbUJBQUE7NkJBQUE7QUFBbUMsUUFBSSxLQUFKLENBQW5DO0FBQUEsR0F2QkE7O0FBQUEsRUEwQkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsUUExQmpCLENBQUE7QUFBQTs7Ozs7QUNBQTtBQUFBLE1BQUEsc0VBQUE7SUFBQTttU0FBQTs7QUFBQSxFQUFBLE9BQUEsQ0FBUSxhQUFSLENBQUEsQ0FBQTs7QUFBQSxFQUNBLEtBQUEsR0FBWSxPQUFBLENBQVEsY0FBUixDQURaLENBQUE7O0FBQUEsRUFHQSxLQUFBLEdBQVcsT0FBQSxDQUFRLE9BQVIsQ0FIWCxDQUFBOztBQUFBLEVBSUEsS0FBQSxHQUFXLE9BQUEsQ0FBUSxxQkFBUixDQUpYLENBQUE7O0FBQUEsRUFLQSxPQUFBLEdBQVcsT0FBQSxDQUFRLHVCQUFSLENBTFgsQ0FBQTs7QUFBQSxFQU1BLE1BQUEsR0FBVyxPQUFBLENBQVEsc0JBQVIsQ0FOWCxDQUFBOztBQUFBLEVBT0EsUUFBQSxHQUFXLE9BQUEsQ0FBUSxtQkFBUixDQVBYLENBQUE7O0FBQUEsRUFVQSxVQUFBLEdBQWEsU0FBQyxDQUFELEdBQUE7V0FDWCxDQUFDLENBQUMsT0FBRixDQUFVLElBQVYsRUFBZSxPQUFmLENBQXVCLENBQUMsT0FBeEIsQ0FBZ0MsSUFBaEMsRUFBcUMsTUFBckMsQ0FBNEMsQ0FBQyxPQUE3QyxDQUFxRCxJQUFyRCxFQUEwRCxNQUExRCxFQURXO0VBQUEsQ0FWYixDQUFBOztBQUFBLEVBY007QUFDSixRQUFBLGdCQUFBOztBQUFBLGlDQUFBLENBQUE7O0FBQUEseUJBQUEsU0FBQSxHQUFXLGtCQUFYLENBQUE7O0FBQUEsSUFFQSxnQkFBQSxHQUNFO0FBQUEsTUFBQSxPQUFBLEVBQVMsV0FBVDtBQUFBLE1BQ0EsSUFBQSxFQUFNLFFBRE47S0FIRixDQUFBOztBQUFBLHlCQU1BLFFBQUEsR0FDRTtBQUFBLE1BQUEsY0FBQSxFQUFnQixRQUFoQjtBQUFBLE1BQ0Esb0JBQUEsRUFBc0IsWUFEdEI7QUFBQSxNQUVBLDJCQUFBLEVBQTZCLHlCQUY3QjtLQVBGLENBQUE7O0FBQUEseUJBV0EsaUJBQUEsR0FBbUIsU0FBQSxHQUFBO0FBQ2pCLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxZQUFGLENBQVQsQ0FBQTtBQUNBLE1BQUEsSUFBRyxNQUFNLENBQUMsRUFBUCxDQUFVLFdBQVYsQ0FBSDtBQUE4QixRQUFBLE1BQU0sQ0FBQyxPQUFQLENBQWUsT0FBZixFQUF3QjtBQUFBLFVBQUEsTUFBQSxFQUFRLE1BQU8sQ0FBQSxDQUFBLENBQWY7U0FBeEIsQ0FBQSxDQUE5QjtPQURBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBQSxDQUZBLENBQUE7YUFHQSxJQUFDLENBQUEsQ0FBRCxDQUFHLFVBQUgsQ0FBYyxDQUFDLEdBQWYsQ0FBbUIsVUFBbkIsQ0FBOEIsQ0FBQyxNQUEvQixDQUFBLEVBSmlCO0lBQUEsQ0FYbkIsQ0FBQTs7QUFBQSx5QkFpQkEsYUFBQSxHQUFlLFNBQUMsQ0FBRCxHQUFBO2FBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQWUsQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxHQUFaLENBQUEsQ0FBZixFQUFQO0lBQUEsQ0FqQmYsQ0FBQTs7QUFBQSx5QkFtQkEsMkJBQUEsR0FBaUMsU0FBQSxHQUFBO0FBQUcsTUFBQSxJQUF1QyxJQUFDLENBQUEsS0FBeEM7ZUFBQSxJQUFDLENBQUEsdUJBQXVCLENBQUMsTUFBekIsQ0FBZ0MsR0FBaEMsRUFBQTtPQUFIO0lBQUEsQ0FuQmpDLENBQUE7O0FBQUEseUJBb0JBLCtCQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSx1QkFBdUIsQ0FBQyxJQUF6QixDQUE4QixJQUE5QixDQUFtQyxDQUFDLE1BQXBDLENBQTJDLENBQTNDLEVBQThDLENBQTlDLEVBQUg7SUFBQSxDQXBCakMsQ0FBQTs7QUFBQSx5QkFxQkEsMkJBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLHVCQUF1QixDQUFDLE9BQXpCLENBQWlDLEdBQWpDLEVBQUg7SUFBQSxDQXJCakMsQ0FBQTs7QUFBQSx5QkF1QkEsTUFBQSxHQUNFO0FBQUEsTUFBQSxpQ0FBQSxFQUFtQyxtQkFBbkM7QUFBQSxNQUNBLHdCQUFBLEVBQTBCLGVBRDFCO0FBQUEsTUFFQSwrQkFBQSxFQUFpQyw2QkFGakM7QUFBQSxNQUdBLHNDQUFBLEVBQXdDLGlDQUh4QztBQUFBLE1BSUEsK0JBQUEsRUFBaUMsNkJBSmpDO0tBeEJGLENBQUE7O0FBOEJhLElBQUEsb0JBQUMsT0FBRCxFQUFVLFFBQVYsR0FBQTtBQUNYLFVBQUEsNkJBQUE7O1FBRHFCLFdBQVc7T0FDaEM7QUFBQSxNQUFBLDZDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsR0FBRCxDQUFLLGNBQUwsQ0FEQSxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLGdCQUFiLENBSFosQ0FBQTtBQUtBLE1BQUEsSUFBRyxZQUFBLElBQWlCLFlBQVksQ0FBQyxRQUFqQztBQUNFO0FBQUEsYUFBQSxTQUFBO3NCQUFBO0FBQ0UsVUFBQSxJQUFDLENBQUEsUUFBUyxDQUFBLENBQUEsQ0FBVixHQUFlLENBQWYsQ0FBQTtBQUNBLGtCQUFPLENBQVA7QUFBQSxpQkFDTyxRQURQO0FBQ3FCLGNBQUcsQ0FBQSxTQUFDLENBQUQsR0FBQTt1QkFDcEIsUUFBUyxDQUFBLGFBQUEsQ0FBVCxHQUEwQixTQUFDLEVBQUQsR0FBQTt5QkFBUSxFQUFBLENBQUcsQ0FBSCxFQUFSO2dCQUFBLEVBRE47Y0FBQSxDQUFBLENBQUgsQ0FBSSxDQUFKLENBQUEsQ0FEckI7QUFBQSxXQUZGO0FBQUEsU0FERjtPQUxBO0FBWUEsV0FBQSxhQUFBOzt3QkFBQTtBQUNFLFFBQUEsSUFBQyxDQUFBLFFBQVMsQ0FBQSxDQUFBLENBQVYsR0FBZSxDQUFmLENBREY7QUFBQSxPQVpBO0FBQUEsTUFlQSxXQUFBOztBQUFlO2FBQUEsZ0JBQUE7d0RBQUE7QUFBQSx3QkFBQSxLQUFBLENBQUE7QUFBQTs7VUFmZixDQUFBO0FBQUEsTUFnQkEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQXFCLElBQUMsQ0FBQSxRQUFRLENBQUMsT0FBL0IsQ0FoQkEsQ0FEVztJQUFBLENBOUJiOztBQUFBLHlCQWlEQSxTQUFBLEdBQVcsU0FBQSxHQUFBOztRQUNULElBQUMsQ0FBQSxRQUFhLElBQUEsS0FBQSxDQUFNO0FBQUEsVUFBQSxFQUFBLEVBQUksSUFBQyxDQUFBLFVBQUw7U0FBTjtPQUFkO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLFNBQVAsQ0FBQSxDQURBLENBQUE7YUFFQSxJQUFDLENBQUEsdUJBQXVCLENBQUMsSUFBekIsQ0FBQSxFQUhTO0lBQUEsQ0FqRFgsQ0FBQTs7QUFBQSx5QkFzREEsTUFBQSxHQUFRLFNBQUMsV0FBRCxFQUFtQixPQUFuQixHQUFBOztRQUFDLGNBQWM7T0FDckI7QUFBQSxNQUFBLElBQUMsQ0FBQSxJQUFELEdBQVEsQ0FBQyxPQUFBLENBQVEsbUJBQVIsQ0FBRCxDQUE2QixDQUFDLEtBQTlCLENBQW9DO0FBQUEsUUFBQSxRQUFBLEVBQVUsV0FBVjtBQUFBLFFBQXVCLE9BQUEsRUFBUyxPQUFoQztPQUFwQyxDQUFSLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQSxDQUFNLElBQUMsQ0FBQSxJQUFQLEVBQWEsY0FBYixFQUE2QixFQUE3QixDQURSLENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxJQUFELENBQU0sSUFBQyxDQUFBLElBQVAsQ0FGQSxDQUFBO0FBQUEsTUFJQSxJQUFDLENBQUEsT0FBRCxHQUFnQixJQUFBLE9BQUEsQ0FBUTtBQUFBLFFBQUEsRUFBQSxFQUFJLElBQUMsQ0FBQSxNQUFMO0FBQUEsUUFBYSxLQUFBLEVBQU8sSUFBQyxDQUFBLENBQUQsQ0FBRyxZQUFILENBQXBCO09BQVIsQ0FKaEIsQ0FBQTtBQUFBLE1BS0EsSUFBQyxDQUFBLE1BQUQsR0FBZ0IsSUFBQSxNQUFBLENBQU87QUFBQSxRQUFBLEVBQUEsRUFBSSxJQUFDLENBQUEsRUFBTDtBQUFBLFFBQVMsUUFBQSxFQUFVLFFBQW5CO0FBQUEsUUFBNkIsT0FBQSxFQUFTLElBQUMsQ0FBQSxPQUF2QztPQUFQLENBTGhCLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixDQUFXLFNBQVgsRUFBc0IsSUFBQyxDQUFBLEtBQUQsQ0FBTyxJQUFDLENBQUEsU0FBUixDQUF0QixDQU5BLENBQUE7QUFBQSxNQU9BLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixDQUFXLFlBQVgsRUFBeUIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUF4QixDQUF6QixDQVBBLENBQUE7QUFBQSxNQVFBLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixDQUFhLElBQUMsQ0FBQSxRQUFRLENBQUMsSUFBdkIsQ0FSQSxDQUFBO0FBVUEsTUFBQSxJQUF3QixJQUFDLENBQUEsS0FBekI7QUFBQSxRQUFBLElBQUMsQ0FBQSxpQkFBRCxDQUFBLENBQUEsQ0FBQTtPQVZBO0FBV0EsTUFBQSxJQUFBLENBQUEsQ0FBOEIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLElBQXFCLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQWpCLENBQUEsQ0FBQSxLQUE2QixFQUFoRixDQUFBO2VBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQWUsT0FBZixFQUFBO09BWk07SUFBQSxDQXREUixDQUFBOztBQUFBLHlCQW9FQSxVQUFBLEdBQVksU0FBQyxJQUFELEdBQUE7YUFBVSxJQUFDLENBQUEsUUFBUSxDQUFDLElBQVYsR0FBaUIsS0FBM0I7SUFBQSxDQXBFWixDQUFBOztzQkFBQTs7S0FEdUIsS0FBSyxDQUFDLFdBZC9CLENBQUE7O0FBQUEsRUFzRkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsVUF0RmpCLENBQUE7QUFBQTs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JQQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsc1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2oxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM1UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzk2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4NUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0dUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzlOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDaE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDL1dBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJTcGluZSAgICAgPSByZXF1aXJlIFwic3BpbmVcIlxuSWNlZCAgICAgID0gcmVxdWlyZSAnaWNlZC1jb2ZmZWUtc2NyaXB0J1xue2luc3BlY3R9ID0gcmVxdWlyZSBcInV0aWxcIlxuXG5cbmNsYXNzIENvbnNvbGUgZXh0ZW5kcyBTcGluZS5Db250cm9sbGVyXG4gIGxvZ1ByZWZpeDogXCIoUGxheWdyb3VuZDpDb25zb2xlKVwiXG5cbiAgREVGQVVMVF9TRVRUSU5HUyA9XG4gICAgbGFzdFZhcmlhYmxlOiAnJF8nXG4gICAgbWF4TGluZXM6IDhcbiAgICBtYXhEZXB0aDogMlxuICAgIHNob3dIaWRkZW46IGZhbHNlXG4gICAgY29sb3JpemU6IGZhbHNlXG5cbiAgZWxlbWVudHM6XG4gICAgXCJidXR0b24ucmVmcmVzaC1jb25zb2xlXCI6IFwiYnV0dG9uUmVmcmVzaENvbnNvbGVcIlxuXG4gIGFkZFRvSGlzdG9yeTogKHMpID0+XG4gICAgQGhpc3RvcnkudW5zaGlmdCBzXG4gICAgQGhpc3RvcnlpID0gLTFcblxuICBhZGRUb1NhdmVkOiAocykgPT5cbiAgICBAc2F2ZWQgKz0gaWYgc1suLi4tMV0gaXMgJ1xcXFwnIHRoZW4gc1swLi4uLTFdIGVsc2Ugc1xuICAgIEBzYXZlZCArPSAnXFxuJ1xuICAgIEBhZGRUb0hpc3Rvcnkgc1xuXG4gIGhhbmRsZUtleXByZXNzOiAoZSkgPT5cbiAgICBzd2l0Y2ggZS53aGljaFxuICAgICAgd2hlbiAxM1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgaW5wdXQgPSBAaW5wdXQudmFsKClcblxuICAgICAgICBpZiBpbnB1dFxuICAgICAgICAgIEBhZGRUb1NhdmVkIGlucHV0XG4gICAgICAgICAgaWYgaW5wdXRbLi4uLTFdIGlzbnQgJ1xcXFwnIGFuZCBub3QgQG11bHRpbGluZVxuICAgICAgICAgICAgQHByb2Nlc3NTYXZlZCgpXG5cbiAgICAgIHdoZW4gMjdcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGlucHV0ID0gQGlucHV0LnZhbCgpXG5cbiAgICAgICAgaWYgaW5wdXQgYW5kIEBtdWx0aWxpbmUgYW5kIEBzYXZlZFxuICAgICAgICAgIGlucHV0ID0gQGlucHV0LnZhbCgpXG5cbiAgICAgICAgICBAYWRkVG9TYXZlZCBpbnB1dFxuICAgICAgICAgIEBwcm9jZXNzU2F2ZWQoKVxuICAgICAgICBlbHNlIGlmIEBtdWx0aWxpbmUgYW5kIEBzYXZlZFxuICAgICAgICAgIEBwcm9jZXNzU2F2ZWQoKVxuXG4gICAgICAgIEBtdWx0aWxpbmUgPSBub3QgQG11bHRpbGluZVxuICAgICAgICAjIEBzZXRQcm9tcHQoKVxuXG4gICAgICB3aGVuIDM4XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgIGlmIEBoaXN0b3J5aSA8IEBoaXN0b3J5Lmxlbmd0aC0xXG4gICAgICAgICAgQGhpc3RvcnlpICs9IDFcbiAgICAgICAgICBAaW5wdXQudmFsIEBoaXN0b3J5W0BoaXN0b3J5aV1cblxuICAgICAgd2hlbiA0MFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICBpZiBAaGlzdG9yeWkgPiAwXG4gICAgICAgICAgQGhpc3RvcnlpICs9IC0xXG4gICAgICAgICAgQGlucHV0LnZhbCBAaGlzdG9yeVtAaGlzdG9yeWldXG5cbiAgbW91c2VlbnRlckNvbnNvbGVSZWZyZXNoOiAgICAgICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLmZhZGVJbiAxODBcbiAgbW91c2VlbnRlcktlZXBDb25zb2xlUmVmcmVzaDogICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLnN0b3AodHJ1ZSkuZmFkZVRvIDEsIDFcbiAgbW91c2VsZWF2ZUNvbnNvbGVSZWZyZXNoOiAgICAgICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLmZhZGVPdXQgMTgwXG5cbiAgZXZlbnRzOlxuICAgIFwibW91c2VlbnRlciBhc2lkZSNvdXRwdXRcIjogXCJtb3VzZWVudGVyQ29uc29sZVJlZnJlc2hcIlxuICAgIFwibW91c2VlbnRlciBidXR0b24ucmVmcmVzaC1jb25zb2xlXCI6IFwibW91c2VlbnRlcktlZXBDb25zb2xlUmVmcmVzaFwiXG4gICAgXCJtb3VzZWxlYXZlIGFzaWRlI291dHB1dFwiOiBcIm1vdXNlbGVhdmVDb25zb2xlUmVmcmVzaFwiXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBzZXR0aW5ncyA9IHt9KSAtPlxuICAgIEBoaXN0b3J5ID0gW11cbiAgICBAaGlzdG9yeWkgPSAtMVxuICAgIEBzYXZlZCA9ICcnXG4gICAgQG11bHRpbGluZSA9IGZhbHNlXG5cbiAgICBzdXBlclxuICAgIEBpbnB1dC5rZXlkb3duIEBoYW5kbGVLZXlwcmVzc1xuXG4gICAgQHNldHRpbmdzID0gJC5leHRlbmQoe30sIERFRkFVTFRfU0VUVElOR1MpXG5cbiAgICBpZiBsb2NhbFN0b3JhZ2UgYW5kIGxvY2FsU3RvcmFnZS5zZXR0aW5nc1xuICAgICAgZm9yIGssIHYgb2YgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2V0dGluZ3MpXG4gICAgICAgIEBzZXR0aW5nc1trXSA9IHZcblxuICAgIGZvciBvd24gaywgdiBvZiBzZXR0aW5nc1xuICAgICAgQHNldHRpbmdzW2tdID0gdlxuXG5cbiAgbGFuZzogKG5hbWUpIC0+XG4gICAgaWYgbmFtZSB0aGVuIEBfbGFuZyA9IG5hbWVcbiAgICBlbHNlIEBfbGFuZ1xuXG4gIHByb2Nlc3NTYXZlZDogLT5cbiAgICB0cnlcbiAgICAgIGNvbXBpbGVkID0gc3dpdGNoIEBsYW5nKClcbiAgICAgICAgd2hlbiBcImNvZmZlZVwiIHRoZW4gSWNlZC5jb21waWxlIEBzYXZlZCwgYmFyZTogb25cbiAgICAgICAgd2hlbiBcInZhbmlsbGFcIiB0aGVuIEBzYXZlZFxuXG4gICAgICB2YWx1ZSA9IGV2YWwuY2FsbCB3aW5kb3csIGNvbXBpbGVkXG4gICAgICB3aW5kb3dbQHNldHRpbmdzLmxhc3RWYXJpYWJsZV0gPSB2YWx1ZVxuICAgICAgQHByaW50VmFsdWUgdmFsdWVcbiAgICBjYXRjaCBlXG4gICAgICBAcHJpbnRDb21waWxlRXJyb3IgZVxuICAgIGZpbmFsbHlcbiAgICAgIEBzYXZlZCA9ICcnXG5cbiAgcHJpbnQ6IChhcmdzLi4uKSA9PlxuICAgIHMgPSBhcmdzLmpvaW4oJyAnKSBvciAnICdcbiAgICBvID0gQGVsLmh0bWwoKSArIHMgKyAnXFxuJ1xuICAgIEBodG1sIG8uc3BsaXQoJ1xcbicpWy1Ac2V0dGluZ3MubWF4TGluZXMuLi5dLmpvaW4oJ1xcbicpXG4gICAgdW5kZWZpbmVkXG5cbiAgcHJpbnRWYWx1ZTogKHZhbHVlKSA9PlxuICAgIEBwcmludCBpbnNwZWN0IHZhbHVlLCBAc2V0dGluZ3Muc2hvd0hpZGRlbiwgQHNldHRpbmdzLm1heERlcHRoLCBAc2V0dGluZ3MuY29sb3JpemVcblxuICBwcmludENvbXBpbGVFcnJvcjogKGUpIC0+XG4gICAgaWYgZS5zdGFja1xuICAgICAgb3V0cHV0ID0gZS5zdGFja1xuICAgICAjIEZGIGRvZXNuJ3QgaGF2ZSBFcnJvci50b1N0cmluZygpIGFzIHRoZSBmaXJzdCBsaW5lIG9mIEVycm9yLnN0YWNrXG4gICAgICMgd2hpbGUgQ2hyb21lIGRvZXMuXG4gICAgIGlmIG91dHB1dD8uc3BsaXQoJ1xcbicpWzBdIGlzbnQgZS50b1N0cmluZygpXG4gICAgICAgIG91dHB1dCA9IFwiI3tlLnRvU3RyaW5nKCl9XFxuI3tlLnN0YWNrfVwiXG4gICAgZWxzZVxuICAgICAgb3V0cHV0ID0gZS50b1N0cmluZygpXG4gICAgQHByaW50IG91dHB1dFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBDb25zb2xlIiwiU3BpbmUgICAgICA9IHJlcXVpcmUgJ3NwaW5lJ1xuSWNlZCAgICAgICA9IHJlcXVpcmUgJ2ljZWQtY29mZmVlLXNjcmlwdCdcbkNvZGVNaXJyb3IgPSByZXF1aXJlIFwiY29kZW1pcnJvclwiXG5JY2VkTWlycm9yID0gcmVxdWlyZSBcImNvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0XCJcbmpzMmNvZmZlZSAgPSByZXF1aXJlIFwianMyY29mZmVlL2Rpc3QvanMyY29mZmVlXCJcbkZpbGVRdWV1ZSAgPSByZXF1aXJlICcuLi9saWIvZmlsZXF1ZXVlJ1xuXG5cbmNhcGl0YWxpemUgPSAoc3RyKSAtPiBzdHJbMF0udG9VcHBlckNhc2UoKSArIHN0clsxLi5dXG5cblxuY2xhc3MgRWRpdG9yIGV4dGVuZHMgU3BpbmUuQ29udHJvbGxlclxuICBsb2dQcmVmaXg6IFwiKFBsYXlncm91bmQ6RWRpdG9yKVwiXG5cbiAgREVGQVVMVF9TRVRUSU5HUyA9XG4gICAgbGFzdFZhcmlhYmxlOiAnJF8nXG5cbiAgZWxlbWVudHM6XG4gICAgXCJuYXYuc2FuZGJveFwiOiBcIm5hdlNhbmRib3hcIlxuICAgIFwidGV4dGFyZWEuc2FuZGJveFwiOiBcInBsYWNlaG9sZGVyXCJcbiAgICBcImZvb3RlclwiOiBcImZvb3RlclwiXG4gICAgXCJhc2lkZSNoZWxwXCI6IFwiaGVscFwiXG5cbiAgdG9nZ2xlSGVscDogLT5cbiAgICBpZiBAaGVscC5pcyBcIjp2aXNpYmxlXCIgdGhlbiBAaGVscC5mYWRlT3V0IDMwMFxuICAgIGVsc2UgQGhlbHAuZmFkZUluIDMwMFxuXG4gIHNhdmVTZXR0aW5nczogLT5cbiAgICBpbnB1dCA9IEB2YWwoKVxuICAgIEBhZGRUb1NhdmVkIGlucHV0XG4gICAgbG9jYWxTdG9yYWdlLnNldHRpbmdzID0gSlNPTi5zdHJpbmdpZnkgJC5leHRlbmQge30sIEBzZXR0aW5ncywgYXNzZXRzOiB3aW5kb3cuYXNzZXRzLCBzY3JpcHQ6IEBzYXZlZFxuXG4gIHJ1bk9yU3RvcFVzZXJTY3JpcHQ6IChlKSAtPlxuICAgIGJ1dHRvbiA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2J1dHRvbicpXG4gICAgaWYgYnV0dG9uLmlzIFwiLnNlbGVjdGVkXCJcbiAgICAgIEBzdG9wVXNlclNjcmlwdCgpXG4gICAgICBidXR0b24udGV4dCBcInJ1biFcIlxuICAgIGVsc2VcbiAgICAgIEBydW5Vc2VyU2NyaXB0KClcbiAgICAgIGJ1dHRvbi50ZXh0IFwic3RvcCFcIlxuICAgIGJ1dHRvbi50b2dnbGVDbGFzcyBcInNlbGVjdGVkXCJcblxuICBydW5Vc2VyU2NyaXB0OiAtPlxuICAgIHJldHVybiB1bmxlc3MgaW5wdXQgPSBAdmFsKClcbiAgICBAYWRkVG9TYXZlZCBpbnB1dFxuICAgIEBwcm9jZXNzU2F2ZWQoKVxuXG4gIHN0b3BVc2VyU2NyaXB0OiAtPiB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgd2luZG93LmZyYW1lXG5cbiAgcHJvY2Vzc1NhdmVkOiAtPlxuICAgIEB0cmlnZ2VyIFwicHJlc2F2ZVwiXG4gICAgdHJ5XG4gICAgICBjb21waWxlZCA9IHN3aXRjaCBAbGFuZygpXG4gICAgICAgIHdoZW4gXCJjb2ZmZWVcIiAgdGhlbiBAY29tcGlsZUljZWQgQHNhdmVkXG4gICAgICAgIHdoZW4gXCJ2YW5pbGxhXCIgdGhlbiBAc2F2ZWRcblxuICAgICAgdmFsdWUgPSBldmFsLmNhbGwgd2luZG93LCBjb21waWxlZFxuICAgICAgd2luZG93W0BzZXR0aW5ncy5sYXN0VmFyaWFibGVdID0gdmFsdWVcbiAgICAgIEBjb25zb2xlLnByaW50VmFsdWUgdmFsdWVcbiAgICBjYXRjaCBlXG4gICAgICBAY29uc29sZS5wcmludENvbXBpbGVFcnJvciBlXG5cbiAgICBAc2F2ZWQgPSAnJ1xuXG4gIGFkZFRvSGlzdG9yeTogKHMpID0+XG4gICAgQGhpc3RvcnkudW5zaGlmdCBzXG4gICAgQGhpc3RvcnlpID0gLTFcblxuICBhZGRUb1NhdmVkOiAocykgPT5cbiAgICBAc2F2ZWQgKz0gaWYgc1suLi4tMV0gaXMgJ1xcXFwnIHRoZW4gc1swLi4uLTFdIGVsc2Ugc1xuICAgIEBzYXZlZCArPSAnXFxuJ1xuICAgIEBhZGRUb0hpc3Rvcnkgc1xuXG4gIG1vdXNlZW50ZXJFeGFtcGxlTmF2OiAgICAgICAgICAgIC0+IEBuYXZTYW5kYm94LmZhZGVJbiAxODBcbiAgbW91c2VlbnRlcktlZXBFeGFtcGxlTmF2OiAgICAgICAgLT4gQG5hdlNhbmRib3guc3RvcCh0cnVlKS5mYWRlVG8gMSwgMVxuICBtb3VzZWxlYXZlRXhhbXBsZU5hdjogICAgICAgICAgICAtPiBAbmF2U2FuZGJveC5mYWRlT3V0IDE4MFxuXG4gIHN3aXRjaExhbmc6IChlKSAtPlxuICAgIGVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYnV0dG9uJylcbiAgICByZXR1cm4gaWYgZWwuaXMgXCIuc2VsZWN0ZWRcIlxuXG4gICAgaWYgKChlbC5pcyBcIi5sYW5nc3dpdGNoLWNvZmZlZVwiKSBhbmQgQHN3aXRjaFRvQ29mZmVlKCkpIG9yIEBzd2l0Y2hUb1ZhbmlsbGEoKVxuICAgICAgZWwuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzIFwic2VsZWN0ZWRcIlxuXG4gIGxhbmc6IChuYW1lKSAtPlxuICAgIGlmIG5hbWUgdGhlbiBAdHJpZ2dlciBcImxhbmdjaGFuZ2VcIiwgQF9sYW5nID0gbmFtZVxuICAgIGVsc2UgQF9sYW5nXG5cbiAgZXZlbnRzOlxuICAgIFwiY2xpY2sgYnV0dG9uLmhlbHBcIjogXCJ0b2dnbGVIZWxwXCJcbiAgICBcImNsaWNrIGJ1dHRvbi5zYXZlXCI6IFwic2F2ZVNldHRpbmdzXCJcbiAgICBcImNsaWNrIGJ1dHRvbi5ydW5cIjogXCJydW5PclN0b3BVc2VyU2NyaXB0XCJcbiAgICBcImNsaWNrIGJ1dHRvbi5yZWZyZXNoLWV4YW1wbGVcIjogXCJyZWZyZXNoRXhhbXBsZVwiXG4gICAgXCJtb3VzZWVudGVyIC5Db2RlTWlycm9yXCI6IFwibW91c2VlbnRlckV4YW1wbGVOYXZcIlxuICAgIFwibW91c2VlbnRlciBuYXYuc2FuZGJveFwiOiBcIm1vdXNlZW50ZXJLZWVwRXhhbXBsZU5hdlwiXG4gICAgXCJtb3VzZWxlYXZlIC5Db2RlTWlycm9yXCI6IFwibW91c2VsZWF2ZUV4YW1wbGVOYXZcIlxuICAgIFwiY2xpY2sgYnV0dG9uLmxhbmdzd2l0Y2gtY29mZmVlXCI6IFwic3dpdGNoTGFuZ1wiXG4gICAgXCJjbGljayBidXR0b24ubGFuZ3N3aXRjaC12YW5pbGxhXCI6IFwic3dpdGNoTGFuZ1wiXG4gICAgXCJkcmFnb3ZlciBmb290ZXJcIjogXCJmaWxlRHJhZ0hvdmVyXCJcbiAgICBcImRyYWdsZWF2ZSBmb290ZXJcIjogXCJmaWxlRHJhZ0hvdmVyXCJcbiAgICBcImRyb3AgZm9vdGVyXCI6IFwiZmlsZVNlbGVjdEhhbmRsZXJcIlxuXG4gIGNvbnN0cnVjdG9yOiAob3B0aW9ucywgc2V0dGluZ3MgPSB7fSkgLT5cbiAgICBAaGlzdG9yeSA9IFtdXG4gICAgQGhpc3RvcnlpID0gLTFcbiAgICBAc2F2ZWQgPSAnJ1xuICAgICMgQG11bHRpbGluZSA9IGZhbHNlXG5cbiAgICBzdXBlclxuXG4gICAgQHNldHRpbmdzID0gJC5leHRlbmQoe30sIERFRkFVTFRfU0VUVElOR1MpXG5cbiAgICBpZiBsb2NhbFN0b3JhZ2UgYW5kIGxvY2FsU3RvcmFnZS5zZXR0aW5nc1xuICAgICAgZm9yIGssIHYgb2YgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2V0dGluZ3MpXG4gICAgICAgIEBzZXR0aW5nc1trXSA9IHZcbiAgICAgICAgc3dpdGNoIGtcbiAgICAgICAgICB3aGVuIFwiYXNzZXRzXCIsIFwidXNlcnNjcmlwdHNcIlxuICAgICAgICAgICAgd2luZG93W2tdID0gdlxuXG4gICAgZm9yIG93biBrLCB2IG9mIHNldHRpbmdzXG4gICAgICBAc2V0dGluZ3Nba10gPSB2XG5cbiAgICBDb2RlTWlycm9yLmtleU1hcC50YWJTcGFjZSA9XG4gICAgICBmYWxsdGhyb3VnaDogWydkZWZhdWx0J11cbiAgICAgIFRhYjogKGNtKSAtPlxuICAgICAgICBzcGFjZXMgPSBBcnJheShjbS5nZXRPcHRpb24oXCJpbmRlbnRVbml0XCIpICsgMSkuam9pbihcIiBcIilcbiAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbiBzcGFjZXMsIFwiZW5kXCIsIFwiK2lucHV0XCJcblxuICAgIEBjb2RlbWlycm9yIG9yPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSBAcGxhY2Vob2xkZXJbMF0sIHtcbiAgICAgIG1vZGU6IFwiaWNlZGNvZmZlZXNjcmlwdFwiXG4gICAgICB0aGVtZTogXCJtb25va2FpXCJcbiAgICAgIGxpbmVOdW1iZXJzOiB0cnVlXG4gICAgICB0YWJTaXplOiAyXG4gICAgICBrZXlNYXA6IFwidGFiU3BhY2VcIlxuICAgIH1cbiAgICBAd3JhcHBlciA9ICQgQGNvZGVtaXJyb3IuZ2V0V3JhcHBlckVsZW1lbnQoKVxuICAgIEB3cmFwcGVyLmFkZENsYXNzIFwic2FuZGJveFwiXG4gICAgaWYgQHNldHRpbmdzLnNjcmlwdFxuICAgICAgQHZhbCBAc2V0dGluZ3Muc2NyaXB0XG4gICAgICBAc2Nyb2xsVG9FbmQoKVxuXG4gIHJlbmRlcjogKGV4YW1wbGVuYW1lKSAtPlxuICAgIEBsb2FkRXhhbXBsZSBleGFtcGxlbmFtZVxuXG4gIHZhbDogKHZhbHVlKSAtPlxuICAgIGlmIHZhbHVlIHRoZW4gQGNvZGVtaXJyb3IuZG9jLnNldFZhbHVlIFwiI3t2YWx1ZX1cXG5cXG5cXG5cXG5cIlxuICAgIGVsc2UgQGNvZGVtaXJyb3IuZG9jLmdldFZhbHVlKClcblxuICBsb2FkRXhhbXBsZTogKG5hbWUpIC0+XG4gICAgQGV4YW1wbGUgPSBuYW1lXG4gICAgYXdhaXQgQGV4YW1wbGVzW25hbWVdIGRlZmVyIGV4YW1wbGVcbiAgICBAdmFsIGV4YW1wbGVcbiAgICBAc2Nyb2xsVG9FbmQoKVxuXG4gIHNjcm9sbFRvRW5kOiAtPiBAY29kZW1pcnJvci5zY3JvbGxJbnRvVmlldyBAY29kZW1pcnJvci5kb2MubGluZUNvdW50KCkgLSAxXG5cbiAgcmVmcmVzaEV4YW1wbGU6IC0+IEBsb2FkRXhhbXBsZSBAZXhhbXBsZVxuXG4gIGNsZWFyOiAtPiBAdmFsIFwiXCJcblxuICBjb21waWxlSWNlZDogKHNvdXJjZSkgLT4gSWNlZC5jb21waWxlIHNvdXJjZSwgYmFyZTogb24sIHJ1bnRpbWU6IFwiaW5saW5lXCJcblxuICBzd2l0Y2hUb1ZhbmlsbGE6IC0+XG4gICAgdW5sZXNzIGlucHV0ID0gQHZhbCgpXG4gICAgICBAbGFuZyBcInZhbmlsbGFcIlxuICAgICAgcmV0dXJuIHRydWVcblxuICAgIHRyeVxuICAgICAgY29tcGlsZWQgPSBAY29tcGlsZUljZWQgaW5wdXRcbiAgICAgIEB2YWwgY29tcGlsZWRcbiAgICAgIEBsYW5nIFwidmFuaWxsYVwiXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGNhdGNoIGVcbiAgICAgIEBjb25zb2xlLnByaW50Q29tcGlsZUVycm9yIGVcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gIHN3aXRjaFRvQ29mZmVlOiAtPlxuICAgIHVubGVzcyBpbnB1dCA9IEB2YWwoKVxuICAgICAgQGxhbmcgXCJjb2ZmZWVcIlxuICAgICAgcmV0dXJuIHRydWVcblxuICAgIHRyeVxuICAgICAgY29tcGlsZWQgPSBqczJjb2ZmZWUuYnVpbGQgaW5wdXQsIHtzaG93X3NyY19saW5lbm86IHRydWUsIGluZGVudDogXCIgIFwifVxuICAgICAgQHZhbCBcIiN7Y29tcGlsZWQuY29kZX1cIlxuICAgICAgQGxhbmcgXCJjb2ZmZWVcIlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBjYXRjaCBlXG4gICAgICBvdXRwdXQgPSBAY29uc29sZS5wcmludENvbXBpbGVFcnJvciBlXG4gICAgICBAcHJpbnQgb3V0cHV0XG4gICAgICByZXR1cm4gZmFsc2VcblxuICBmaWxlRHJhZ0hvdmVyOiAoZSkgLT5cbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQGZvb3Rlci50b2dnbGVDbGFzcyBcImRyYWdob3ZlclwiLCBlLnR5cGUgaXMgXCJkcmFnb3ZlclwiXG5cbiAgZmlsZVNlbGVjdEhhbmRsZXI6IChlKSAtPlxuICAgICMgY2FuY2VsIGV2ZW50IGFuZCBob3ZlciBzdHlsaW5nXG4gICAgQGZpbGVEcmFnSG92ZXIgZVxuXG4gICAgIyBmZXRjaCBGaWxlTGlzdCBvYmplY3RcbiAgICBlID0gZS5vcmlnaW5hbEV2ZW50IGlmIGUub3JpZ2luYWxFdmVudD9cbiAgICBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIG9yIGUuZGF0YVRyYW5zZmVyLmZpbGVzXG5cbiAgICAjIHByb2Nlc3MgYWxsIEZpbGUgb2JqZWN0c1xuICAgIEBwYXJzZUZpbGUgZmlsZSBmb3IgZmlsZSBpbiBmaWxlc1xuXG4gIHBhcnNlRmlsZTogKGZpbGUpIC0+XG4gICAge3R5cGUsIG5hbWV9ID0gZmlsZVxuICAgIGlmIC8ocG5nfGdpZnxqcGVnfGpwZykvLnRlc3QgdHlwZVxuICAgICAgQHBhcnNlSW1hZ2UgZmlsZVxuICAgIGVsc2UgaWYgLyhqYXZhc2NyaXB0fGpzfGNvZmZlZXxpY2VkKS8udGVzdCBuYW1lXG4gICAgICBAcGFyc2VTY3JpcHQgZmlsZVxuICAgIGVsc2VcbiAgICAgIEBjb25zb2xlLnByaW50IFwiVW5rbm93biBmaWxldHlwZTogI3t0eXBlfTogI3tuYW1lfVwiXG5cbiAgcGFyc2VJbWFnZTogKGZpbGUpIC0+XG4gICAge25hbWV9ID0gZmlsZVxuICAgIHdpbmRvdy5hc3NldHMgb3I9IFtdXG4gICAgdmFybmFtZSA9IFwid2luZG93LmFzc2V0c1sje3dpbmRvdy5hc3NldHMubGVuZ3RofV1cIlxuICAgIEBjb25zb2xlLnByaW50IFwiQWRkaW5nICN7bmFtZX0gYXMgI3t2YXJuYW1lfVwiXG5cbiAgICBAZmlsZVF1ZXVlIG9yPSBuZXcgRmlsZVF1ZXVlXG4gICAgYXdhaXQgQGZpbGVRdWV1ZS5hd2FpdFJlYWQge2ZpbGU6IGZpbGV9LCBkZWZlciBzdGF0dXMsIGRhdGF1cmxcbiAgICByZXR1cm4gQGxvZyBcIkVycm9yOiAje2RhdGF1cmx9XCIgaWYgc3RhdHVzIGlzIFwiZXJyb3JcIlxuXG4gICAgd2luZG93LmFzc2V0cy5wdXNoIGRhdGF1cmxcbiAgICB2YWx1ZSA9IHN3aXRjaCBAbGFuZygpXG4gICAgICB3aGVuIFwiY29mZmVlXCIgdGhlbiBcIlwiXCIjICN7bmFtZX1cbm5ld2ltYWdlID0gI3t2YXJuYW1lfVxuI3tAdmFsKCkudHJpbSgpfVxuXCJcIlwiXG4gICAgICB3aGVuIFwidmFuaWxsYVwiIHRoZW4gXCJcIlwiLy8gI3tuYW1lfVxudmFyIG5ld2ltYWdlID0gI3t2YXJuYW1lfVxuI3tAdmFsKCkudHJpbSgpfVxuXCJcIlwiXG4gICAgQHZhbCB2YWx1ZVxuICAgIEBjb2RlbWlycm9yLnNjcm9sbEludG9WaWV3IDBcblxuICBwYXJzZVNjcmlwdDogKGZpbGUpIC0+XG4gICAge25hbWV9ICAgID0gZmlsZVxuICAgIGZpcnN0RG90ICA9IG5hbWUuaW5kZXhPZiBcIi5cIlxuICAgIGZpcnN0RG90ICA9IG5hbWUubGVuZ3RoIGlmIGZpcnN0RG90IGlzIC0xXG4gICAgZ3Vlc3NuYW1lID0gY2FwaXRhbGl6ZSBuYW1lWzAuLi5maXJzdERvdF1cblxuICAgIHdpbmRvdy51c2Vyc2NyaXB0cyA/PSBbXVxuICAgIHZhcm5hbWUgPSBcIndpbmRvdy51c2Vyc2NyaXB0c1sje3dpbmRvdy51c2Vyc2NyaXB0cy5sZW5ndGh9XVwiXG4gICAgQGNvbnNvbGUucHJpbnQgXCJBZGRpbmcgI3tuYW1lfSBhcyB3aW5kb3cuI3tndWVzc25hbWV9ID0gI3t2YXJuYW1lfVwiXG5cbiAgICBAZmlsZVF1ZXVlIG9yPSBuZXcgRmlsZVF1ZXVlXG4gICAgYXdhaXQgQGZpbGVRdWV1ZS5hd2FpdFJlYWQge2ZpbGU6IGZpbGUsIHJlYWRBczogXCJUZXh0XCJ9LCBkZWZlciBzdGF0dXMsIHRleHRcbiAgICByZXR1cm4gQGxvZyBcIkVycm9yOiAje3RleHR9XCIgaWYgc3RhdHVzIGlzIFwiZXJyb3JcIlxuXG4gICAgdGV4dCA9IEBjb21waWxlSWNlZCB0ZXh0IGlmIC8oaWNlZHxjb2ZmZWUpLy50ZXN0IG5hbWVcblxuICAgIHRyeVxuICAgICAgY29tcGlsZWQgPSBldmFsIHRleHRcbiAgICBjYXRjaCBlXG4gICAgICByZXR1cm4gQGNvbnNvbGUucHJpbnRDb21waWxlRXJyb3IgZVxuXG4gICAgd2luZG93LnVzZXJzY3JpcHRzLnB1c2ggY29tcGlsZWRcbiAgICB3aW5kb3dbZ3Vlc3NuYW1lXSA9IGNvbXBpbGVkXG4gICAgdmFsdWUgPSBzd2l0Y2ggQGxhbmcoKVxuICAgICAgd2hlbiBcImNvZmZlZVwiIHRoZW4gXCJcIlwiIyAje25hbWV9XG4jIFN1Y2Nlc3MhICBJZiB0aGlzIGlzIGEgQ29tbW9uSlMgbW9kdWxlLFxuIyBpdCBpcyBhdmFpbGFibGUgYXQgd2luZG93LiN7Z3Vlc3NuYW1lfVxuI1xuIyB0byBzYXZlIHRoaXMgaW4gbG9jYWxTdG9yYWdlIHdpdGggdGhlIHNjcmlwdCwgcnVuOlxuIyBhcHAuZWRpdG9yLnNhdmVVc2VyU2NyaXB0ICN7dmFybmFtZX1cbm5ld3NjcmlwdCA9IHdpbmRvdy4je2d1ZXNzbmFtZX1cbiN7QHZhbCgpLnRyaW0oKX1cblwiXCJcIlxuICAgICAgd2hlbiBcInZhbmlsbGFcIiB0aGVuIFwiXCJcIi8vICN7bmFtZX1cbi8vIFN1Y2Nlc3MhICBJZiB0aGlzIGlzIGEgQ29tbW9uSlMgbW9kdWxlLFxuLy8gaXQgaXMgYXZhaWxhYmxlIGF0IHdpbmRvdy4je2d1ZXNzbmFtZX1cbi8vXG4vLyB0byBzYXZlIHRoaXMgaW4gbG9jYWxTdG9yYWdlIHdpdGggdGhlIHNjcmlwdCwgcnVuOlxuLy8gYXBwLmVkaXRvci5zYXZlVXNlclNjcmlwdCgje3Zhcm5hbWV9KVxudmFyIG5ld3NjcmlwdCA9IHdpbmRvdy4je2d1ZXNzbmFtZX1cbiN7QHZhbCgpLnRyaW0oKX1cblwiXCJcIlxuICAgIEB2YWwgdmFsdWVcbiAgICBAY29kZW1pcnJvci5zY3JvbGxJbnRvVmlldyAwXG5cbiAgc2F2ZVVzZXJTY3JpcHQ6IChzY3JpcHQpIC0+XG4gICAgQHNldHRpbmdzLnVzZXJzY3JpcHRzID89IFtdXG4gICAgQHNldHRpbmdzLnVzZXJzY3JpcHRzLnB1c2ggc2NyaXB0IHVubGVzcyBzY3JpcHQgaW4gQHNldHRpbmdzLnVzZXJzY3JpcHRzXG5cbm1vZHVsZS5leHBvcnRzID0gRWRpdG9yXG4iLCJTcGluZSAgICA9IHJlcXVpcmUgXCJzcGluZVwiXG5QSVhJICAgICA9IHJlcXVpcmUgXCIuLi9saWIvcGl4aS5kZXYuanNcIlxuU3RhdHMgICAgPSByZXF1aXJlIFwic3RhdHMuanNcIlxuXG5cbmV4dGVuZCA9IChiYXNlLCBvYmpzLi4uKSAtPlxuICBiYXNlW2tleV0gPSB2YWx1ZSBmb3Iga2V5LCB2YWx1ZSBvZiBvYmogZm9yIG9iaiBpbiBvYmpzXG4gIGJhc2VcblxuXG5jbGFzcyBTdGFnZSBleHRlbmRzIFNwaW5lLkNvbnRyb2xsZXJcbiAgbG9nUHJlZml4OiBcIihQbGF5Z3JvdW5kOlN0YWdlKVwiXG5cbiAgcGl4aWRlZmF1bHRzOlxuICAgIGJhY2tncm91bmRDb2xvcjogMHhGRkZGRkZcbiAgICB0cmFuc3BhcmVudDogZmFsc2VcbiAgICBhbnRpYWxpYXM6IGZhbHNlXG5cbiAgcmVzaXplOiAtPlxuXG4gIGJpbmRSZXNpemU6IC0+XG4gICAgJCh3aW5kb3cpLnJlc2l6ZSBAcmVzaXplXG4gICAgJCh3aW5kb3cpLm9uIFwib25vcmllbnRhdGlvbmNoYW5nZVwiLCBAcmVzaXplXG5cbiAgcmVsZWFzZTogLT5cbiAgICAkKHdpbmRvdykub2ZmIFwicmVzaXplXCIsIEByZXNpemVcbiAgICAkKHdpbmRvdykub2ZmIFwib25vcmllbnRhdGlvbmNoYW5nZVwiLCBAcmVzaXplXG5cbiAgX2ZyYW1lRm5zOiAgICAgW11cbiAgYWRkRnJhbWVGbjogICAgKGZuKSAtPiBAX2ZyYW1lRm5zLnB1c2ggZm5cbiAgcmVtb3ZlRnJhbWVGbjogKGZuKSAtPiBAX2ZyYW1lRm5zLnNwbGljZSAoQF9mcmFtZUZucy5pbmRleE9mIGZuKSwgMVxuXG4gIGFuaTogKGxvb3BmbiA9IC0+KSAtPlxuICAgIEBhZGRGcmFtZUZuIGxvb3BmblxuXG4gICAgcmVjdXJzaXZlbG9vcCA9ID0+XG4gICAgICAjIEJlZ2lubmluZyBvZiBhbmltYXRpb24gbG9vcFxuICAgICAgQHN0YXRzLmJlZ2luKClcbiAgICAgICMgQ2FsbCB0aGUgYW5pbWF0aW9uXG4gICAgICBmbigpIGZvciBmbiBpbiBAX2ZyYW1lRm5zXG4gICAgICAjIHJlbmRlciB0aGUgc3RhZ2VcbiAgICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXG4gICAgICAjIFJlY3Vyc2l2ZWx5IGxvb3AgdGhpcyBhbmltYXRpb25cbiAgICAgIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcFxuICAgICAgIyBFbmQgb2YgYW5pbWF0aW9uIGxvb3BcbiAgICAgIEBzdGF0cy5lbmQoKVxuICAgIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcFxuXG4gIGNvbnN0cnVjdG9yOiAob3B0aW9ucywgcGl4aXNldHRpbmdzID0ge30pIC0+XG4gICAgc3VwZXJcblxuICAgIEBwaXhpc2V0dGluZ3MgICAgICA9IGV4dGVuZCB7fSwgQHBpeGlkZWZhdWx0cywgcGl4aXNldHRpbmdzXG5cbiAgICBAc3RhZ2UgICAgICAgICAgICAgPSBuZXcgUElYSS5TdGFnZSBAcGl4aXNldHRpbmdzLmJhY2tncm91bmRDb2xvclxuICAgIEBzdGFnZS53aWR0aCAgICAgICA9IEBlbC53aWR0aCgpXG4gICAgQHN0YWdlLmhlaWdodCAgICAgID0gQGVsLmhlaWdodCgpXG4gICAgQHN0YWdlLmludGVyYWN0aXZlID0gQHBpeGlzZXR0aW5ncy5pbnRlcmFjdGl2ZVxuXG4gICAgd2luZG93LnN0YWdlID0gQHN0YWdlXG4gICAgd2luZG93LmFuaSAgID0gQHByb3h5IEBhbmlcbiAgICB3aW5kb3cuUElYSSAgPSBQSVhJXG5cbiAgICBAcmVuZGVyKClcbiAgICBAYmluZFJlc2l6ZSgpXG4gICAgQGFkZENoaWxkID0gQGFwcGVuZFxuICAgIEByZW1vdmVDaGlsZHJlbiA9IEByZW1vdmVcblxuICByZW5kZXI6IC0+XG4gICAgIyBsZXQgcGl4aSBjaG9vc2UgV2ViR0wgb3IgY2FudmFzXG4gICAgQHJlbmRlcmVyID0gUElYSS5hdXRvRGV0ZWN0UmVuZGVyZXIgQHN0YWdlLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBzdGFnZS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAcGl4aXNldHRpbmdzLnRyYW5zcGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBwaXhpc2V0dGluZ3MuYW50aWFsaWFzXG4gICAgQHN0YXRzICAgID0gbmV3IFN0YXRzXG4gICAgQCRzdGF0cyAgID0gJCBAc3RhdHMuZG9tXG5cbiAgICAjIGF0dGFjaCByZW5kZXJlciwgc3RhdHMgaW5zdGFuY2VzIHRvIHdpbmRvd1xuICAgIHdpbmRvdy5yZW5kZXJlciA9IEByZW5kZXJlclxuICAgIHdpbmRvdy5zdGF0cyAgICA9IEBzdGF0c1xuICAgICMgYXR0YWNoIHJlbmRlciB0byBwYWdlXG4gICAgQGVsLmFwcGVuZCBAcmVuZGVyZXIudmlld1xuICAgIEBoaWRlU3RhdHMoKVxuICAgIEBlbC5hcHBlbmQgQCRzdGF0c1xuXG4gIGhpZGVTdGF0czogLT4gQCRzdGF0cy5jc3MgZGlzcGxheTogXCJub25lXCJcbiAgc2hvd1N0YXRzOiAtPiBAJHN0YXRzLmNzcyBkaXNwbGF5OiBcImJsb2NrXCIsIHBvc2l0aW9uOiBcImFic29sdXRlXCJcblxuICBhcHBlbmQ6IChjaGlsZHJlbi4uLikgLT5cbiAgICBmb3IgY2hpbGQgaW4gY2hpbGRyZW5cbiAgICAgIGlmIGNoaWxkLmRpc3BsYXlcbiAgICAgICAgY2hpbGQuc3RhZ2UgPSB0aGlzXG4gICAgICAgIGNoaWxkID0gY2hpbGQuZGlzcGxheVxuICAgICAgQHN0YWdlLmFkZENoaWxkIGNoaWxkXG4gICAgdGhpc1xuXG4gIGFkZENoaWxkOiAtPlxuXG4gIHJlbW92ZTogKGNoaWxkcmVuLi4uKSAtPlxuICAgIGNoaWxkcmVuID0gQHN0YWdlLmNoaWxkcmVuIHVubGVzcyBjaGlsZHJlbi5sZW5ndGhcblxuICAgIGZvciBjaGlsZCBpbiBjaGlsZHJlbiBieSAtMVxuICAgICAgaWYgY2hpbGQuZGlzcGxheVxuICAgICAgICBjaGlsZC5zdGFnZSA9IG51bGxcbiAgICAgICAgY2hpbGQgPSBjaGlsZC5kaXNwbGF5XG4gICAgICBAc3RhZ2UucmVtb3ZlQ2hpbGQgY2hpbGRcbiAgICB0aGlzXG5cbiAgcmVtb3ZlQ2hpbGRyZW46IC0+XG5cbiAgcmVmcmVzaDogLT5cbiAgICBAcmVtb3ZlQ2hpbGRyZW4oKVxuICAgIEBzdGF0cy5lbmQoKVxuICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXG5cbiAgc3RhY2tMZXZlbDogKGNoaWxkKSAtPiBAc3RhZ2UuY2hpbGRyZW4uaW5kZXhPZiAoY2hpbGQuZGlzcGxheSBvciBjaGlsZClcblxuICBicmluZ1RvRnJvbnQ6IChjaGlsZHJlbi4uLikgLT5cbiAgICBAcmVtb3ZlQ2hpbGRyZW4gY2hpbGRyZW4uLi5cbiAgICBAYXBwZW5kIGNoaWxkcmVuLi4uXG5cbiAgc2VuZFRvQmFjazogKGNoaWxkcmVuLi4uKSAtPlxuICAgIEBtb3ZlSW5TdGFjayBjaGlsZHJlbi4uLiwgMFxuXG4gIG1vdmVJblN0YWNrOiAoY2hpbGRyZW4uLi4sIG5ld0xldmVsKSAtPlxuICAgIEByZW1vdmVDaGlsZHJlbiBjaGlsZHJlbi4uLlxuICAgIEBhZGRDaGlsZHJlbkF0IGNoaWxkcmVuLi4uLCBuZXdMZXZlbFxuXG4gIGFkZENoaWxkcmVuQXQ6IChjaGlsZHJlbi4uLiwgbmV3TGV2ZWwpIC0+XG4gICAgZm9yIGNoaWxkIGluIGNoaWxkcmVuXG4gICAgICBpZiBjaGlsZC5kaXNwbGF5XG4gICAgICAgIGNoaWxkLnN0YWdlID0gdGhpc1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmRpc3BsYXlcbiAgICBAc3RhZ2UuYWRkQ2hpbGRBdCAoY2hpbGQuZGlzcGxheSBvciBjaGlsZCksIG5ld0xldmVsIGZvciBjaGlsZCBpbiBjaGlsZHJlblxuICAgIHRoaXNcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YWdlXG4iLCJNYXRoMiA9XG4gIHJhbmRvbTogKGZyb20sIHRvKSAtPiBNYXRoLnJhbmRvbSgpICogKHRvIC0gZnJvbSkgKyBmcm9tXG5cbiAgbWFwOiAodmFsLCBpbnB1dE1pbiwgaW5wdXRNYXgsIG91dHB1dE1pbiwgb3V0cHV0TWF4KSAtPlxuICAgICgob3V0cHV0TWF4IC0gb3V0cHV0TWluKSAqICgodmFsIC0gaW5wdXRNaW4pIC8gKGlucHV0TWF4IC0gaW5wdXRNaW4pKSkgKyBvdXRwdXRNaW5cblxuICByYW5kb21QbHVzTWludXM6IChjaGFuY2UpIC0+XG4gICAgY2hhbmNlID0gaWYgY2hhbmNlIHRoZW4gY2hhbmNlIGVsc2UgMC41XG4gICAgaWYgTWF0aC5yYW5kb20oKSA+IGNoYW5jZSB0aGVuIC0xIGVsc2UgMVxuXG4gIHJhbmRvbUludDogKGZyb20sIHRvKSAtPiBNYXRoLmZsb29yIE1hdGgucmFuZG9tKCkgKiAoKyt0byAtIGZyb20pICsgZnJvbVxuXG4gIHJhbmRvbUJvb2w6IChjaGFuY2UpIC0+XG4gICAgY2hhbmNlID0gaWYgY2hhbmNlIHRoZW4gY2hhbmNlIGVsc2UgMC41XG4gICAgTWF0aC5yYW5kb20oKSA8IGNoYW5jZVxuXG5cbm1vZHVsZS5leHBvcnRzID0gTWF0aDIiLCJjbGFzcyBGaWxlUXVldWVcbiAgZW5hYmxlZDogdHJ1ZVxuXG4gIGRpc2FibGU6IChjYWxsYmFjaykgLT5cbiAgICBpZiBAZW5hYmxlZFxuICAgICAgQGVuYWJsZWQgPSBmYWxzZVxuICAgICAgdHJ5XG4gICAgICAgIGRvIGNhbGxiYWNrXG4gICAgICBjYXRjaCBlXG4gICAgICAgIHRocm93IGVcbiAgICAgIGZpbmFsbHlcbiAgICAgICAgQGVuYWJsZWQgPSB0cnVlXG4gICAgZWxzZVxuICAgICAgZG8gY2FsbGJhY2tcblxuICBtYXg6IDEwMFxuICB0aHJvdHRsZTogMFxuXG4gIHF1ZXVlOiAocmVxdWVzdCkgLT5cbiAgICBAcGlwZWxpbmVyIG9yPSBuZXcgUGlwZWxpbmVyIEBtYXgsIEB0aHJvdHRsZVxuICAgIHJldHVybiBAcGlwZWxpbmVyLnF1ZXVlIHVubGVzcyByZXF1ZXN0XG4gICAgYXdhaXQgQHBpcGVsaW5lci53YWl0SW5RdWV1ZSBkZWZlcigpXG4gICAgcmVxdWVzdCBAcGlwZWxpbmVyLmRlZmVyKClcblxuICBjbGVhclF1ZXVlOiAtPlxuICAgIEBwaXBlbGluZXIucXVldWUgPSBbXVxuICAgIEBwaXBlbGluZXIubl9vdXQgPSAwXG5cbiAgZGVmYXVsdHM6XG4gICAgcmVhZEFzOiBcIkRhdGFVUkxcIlxuICAgIGVuY29kaW5nOiBcIlVURi04XCJcblxuICByZWFkRmlsZTogKHBhcmFtcyA9IHt9LCBkZWZhdWx0cyA9IHt9KSAtPlxuICAgIHNldHRpbmdzICAgICAgID0gJC5leHRlbmQoe30sIEBkZWZhdWx0cywgZGVmYXVsdHMsIHBhcmFtcykgdW5sZXNzIGRlZmF1bHRzIGlzIHRydWVcbiAgICByZWFkZXIgICAgICAgICA9IG5ldyBGaWxlUmVhZGVyXG4gICAgcmVhZGVyLm9ubG9hZCAgPSAoZSkgLT4gc2V0dGluZ3Muc3VjY2VzcyByZWFkZXIucmVzdWx0XG4gICAgcmVhZGVyLm9uZXJyb3IgPSBzZXR0aW5ncy5lcnJvclxuXG4gICAgcmVhZCA9IHN3aXRjaCBzZXR0aW5ncy5yZWFkQXNcbiAgICAgIHdoZW4gXCJBcnJheUJ1ZmZlclwiICB0aGVuIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlciBzZXR0aW5ncy5maWxlLCBzZXR0aW5ncy5lbmNvZGluZ1xuICAgICAgd2hlbiBcIkJpbmFyeVN0cmluZ1wiIHRoZW4gcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyBzZXR0aW5ncy5maWxlLCBzZXR0aW5ncy5lbmNvZGluZ1xuICAgICAgd2hlbiBcIkRhdGFVUkxcIiAgICAgIHRoZW4gcmVhZGVyLnJlYWRBc0RhdGFVUkwgc2V0dGluZ3MuZmlsZSwgc2V0dGluZ3MuZW5jb2RpbmdcbiAgICAgIHdoZW4gXCJUZXh0XCIgICAgICAgICB0aGVuIHJlYWRlci5yZWFkQXNUZXh0IHNldHRpbmdzLmZpbGUsIHNldHRpbmdzLmVuY29kaW5nXG5cbiAgICByZWFkZXJcblxuICBxdWV1ZUZpbGU6IChwYXJhbXMgPSB7fSwgZGVmYXVsdHMgPSB7fSkgLT5cbiAgICBydiAgPSBuZXcgaWNlZC5SZW5kZXp2b3VzXG5cbiAgICBzZXR0aW5ncyAgICAgPSAkLmV4dGVuZCh7fSwgQGRlZmF1bHRzLCBkZWZhdWx0cywgcGFyYW1zKVxuICAgIGRlZmVyc3VjY2VzcyA9IHNldHRpbmdzLnN1Y2Nlc3NcbiAgICBkZWZlcmVycm9yICAgPSBzZXR0aW5ncy5lcnJvclxuXG4gICAgc2V0dGluZ3Muc3VjY2VzcyA9IHJ2LmlkKCdzdWNjZXNzJykuZGVmZXIgZVxuICAgIHNldHRpbmdzLmVycm9yICAgPSBydi5pZCgnZXJyb3InKS5kZWZlciBlXG5cbiAgICByZXF1ZXN0ID0gKG5leHQpIC0+XG4gICAgICByZWFkZXIgPSBAcmVhZEZpbGUgc2V0dGluZ3MsIHRydWVcbiAgICAgIGF3YWl0IHJ2LndhaXQgZGVmZXIgc3RhdHVzXG4gICAgICBzd2l0Y2ggc3RhdHVzXG4gICAgICAgIHdoZW4gJ3N1Y2Nlc3MnIHRoZW4gZGVmZXJzdWNjZXNzIHJlYWRlci5yZXN1bHRcbiAgICAgICAgd2hlbiAnZXJyb3InIHRoZW4gZGVmZXJlcnJvciBlXG4gICAgICBuZXh0KClcblxuICAgIHJlcXVlc3QuYWJvcnQgPSAoc3RhdHVzVGV4dCkgLT5cbiAgICAgIHJldHVybiByZWFkZXIuYWJvcnQoc3RhdHVzVGV4dCkgaWYgcmVhZGVyXG4gICAgICBpbmRleCA9IEBxdWV1ZSgpLmluZGV4T2YocmVxdWVzdClcbiAgICAgIEBxdWV1ZSgpLnNwbGljZShpbmRleCwgMSkgaWYgaW5kZXggPiAtMVxuICAgICAgQHBpcGVsaW5lci5uX291dC0tIGlmIEBwaXBlbGluZXJcblxuICAgICAgIyBkZWZlcnJlZC5yZWplY3RXaXRoKFxuICAgICAgIyAgIHNldHRpbmdzLmNvbnRleHQgb3Igc2V0dGluZ3MsXG4gICAgICAjICAgW3JlYWRlciwgc3RhdHVzVGV4dCwgJyddXG4gICAgICAjIClcbiAgICAgIHJlcXVlc3RcblxuICAgIHJldHVybiByZXF1ZXN0IHVubGVzcyBAZW5hYmxlZFxuICAgIEBxdWV1ZSByZXF1ZXN0XG4gICAgcmVxdWVzdFxuXG4gIGF3YWl0UmVhZDogKG9wdGlvbnMsIGNiLCBxdWV1ZSA9IGZhbHNlKSAtPlxuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cygpXG5cbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIHJlc3VsdFxuICAgIG9wdGlvbnMuZXJyb3IgICA9IHJ2LmlkKCdlcnJvcicpLmRlZmVyIGVcblxuICAgIGlmIHF1ZXVlIHRoZW4gQGZpbGVRdWV1ZSBvcHRpb25zXG4gICAgZWxzZSBAcmVhZEZpbGUgb3B0aW9uc1xuXG4gICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICBjYiBzdGF0dXMsIHJlc3VsdCBvciBlXG5cblxubW9kdWxlLmV4cG9ydHMgPSBGaWxlUXVldWUiLCIvKipcclxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG5cdHZhciByb290ID0gdGhpcztcclxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQG1vZHVsZSBQSVhJXG4gKi9cbnZhciBQSVhJID0gUElYSSB8fCB7fTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoZSBQb2ludCBvYmplY3QgcmVwcmVzZW50cyBhIGxvY2F0aW9uIGluIGEgdHdvLWRpbWVuc2lvbmFsIGNvb3JkaW5hdGUgc3lzdGVtLCB3aGVyZSB4IHJlcHJlc2VudHMgdGhlIGhvcml6b250YWwgYXhpcyBhbmQgeSByZXByZXNlbnRzIHRoZSB2ZXJ0aWNhbCBheGlzLlxuICpcbiAqIEBjbGFzcyBQb2ludFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geCB7TnVtYmVyfSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IHBvc2l0aW9uIG9mIHRoZSBwb2ludFxuICovXG5QSVhJLlBvaW50ID0gZnVuY3Rpb24oeCwgeSlcbntcblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB4XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnggPSB4IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB5XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnkgPSB5IHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgcG9pbnRcbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQb2ludH0gYSBjb3B5IG9mIHRoZSBwb2ludFxuICovXG5QSVhJLlBvaW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcblx0cmV0dXJuIG5ldyBQSVhJLlBvaW50KHRoaXMueCwgdGhpcy55KTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuUG9pbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5Qb2ludDtcblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS9cbiAqL1xuXG4vKipcbiAqIHRoZSBSZWN0YW5nbGUgb2JqZWN0IGlzIGFuIGFyZWEgZGVmaW5lZCBieSBpdHMgcG9zaXRpb24sIGFzIGluZGljYXRlZCBieSBpdHMgdG9wLWxlZnQgY29ybmVyIHBvaW50ICh4LCB5KSBhbmQgYnkgaXRzIHdpZHRoIGFuZCBpdHMgaGVpZ2h0LlxuICpcbiAqIEBjbGFzcyBSZWN0YW5nbGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSBZIGNvb3JkIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gd2lkdGgge051bWJlcn0gVGhlIG92ZXJhbGwgd2lkdGggb2YgdGhpcyByZWN0YW5nbGVcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gVGhlIG92ZXJhbGwgaGVpZ2h0IG9mIHRoaXMgcmVjdGFuZ2xlXG4gKi9cblBJWEkuUmVjdGFuZ2xlID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodClcbntcblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB4XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnggPSB4IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB5XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnkgPSB5IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB3aWR0aFxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgMFxuXHQgKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoIHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEBkZWZhdWx0IDBcblx0ICovXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgUmVjdGFuZ2xlXG4gKlxuICogQG1ldGhvZCBjbG9uZVxuICogQHJldHVybiB7UmVjdGFuZ2xlfSBhIGNvcHkgb2YgdGhlIHJlY3RhbmdsZVxuICovXG5QSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpXG57XG5cdHJldHVybiBuZXcgUElYSS5SZWN0YW5nbGUodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHgsIGFuZCB5IGNvb3JkcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICovXG5QSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbih4LCB5KVxue1xuICAgIGlmKHRoaXMud2lkdGggPD0gMCB8fCB0aGlzLmhlaWdodCA8PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cblx0dmFyIHgxID0gdGhpcy54O1xuXHRpZih4ID49IHgxICYmIHggPD0geDEgKyB0aGlzLndpZHRoKVxuXHR7XG5cdFx0dmFyIHkxID0gdGhpcy55O1xuXG5cdFx0aWYoeSA+PSB5MSAmJiB5IDw9IHkxICsgdGhpcy5oZWlnaHQpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5SZWN0YW5nbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SZWN0YW5nbGU7XG5cblxuLyoqXG4gKiBAYXV0aG9yIEFkcmllbiBCcmF1bHQgPGFkcmllbi5icmF1bHRAZ21haWwuY29tPlxuICovXG5cbi8qKlxuICogQGNsYXNzIFBvbHlnb25cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHBvaW50cyoge0FycmF5PFBvaW50PnxBcnJheTxOdW1iZXI+fFBvaW50Li4ufE51bWJlci4uLn0gVGhpcyBjYW4gYmUgYW4gYXJyYXkgb2YgUG9pbnRzIHRoYXQgZm9ybSB0aGUgcG9seWdvbixcbiAqICAgICAgYSBmbGF0IGFycmF5IG9mIG51bWJlcnMgdGhhdCB3aWxsIGJlIGludGVycHJldGVkIGFzIFt4LHksIHgseSwgLi4uXSwgb3IgdGhlIGFyZ3VtZW50cyBwYXNzZWQgY2FuIGJlXG4gKiAgICAgIGFsbCB0aGUgcG9pbnRzIG9mIHRoZSBwb2x5Z29uIGUuZy4gYG5ldyBQSVhJLlBvbHlnb24obmV3IFBJWEkuUG9pbnQoKSwgbmV3IFBJWEkuUG9pbnQoKSwgLi4uKWAsIG9yIHRoZVxuICogICAgICBhcmd1bWVudHMgcGFzc2VkIGNhbiBiZSBmbGF0IHgseSB2YWx1ZXMgZS5nLiBgbmV3IFBJWEkuUG9seWdvbih4LHksIHgseSwgeCx5LCAuLi4pYCB3aGVyZSBgeGAgYW5kIGB5YCBhcmVcbiAqICAgICAgTnVtYmVycy5cbiAqL1xuUElYSS5Qb2x5Z29uID0gZnVuY3Rpb24ocG9pbnRzKVxue1xuICAgIC8vaWYgcG9pbnRzIGlzbid0IGFuIGFycmF5LCB1c2UgYXJndW1lbnRzIGFzIHRoZSBhcnJheVxuICAgIGlmKCEocG9pbnRzIGluc3RhbmNlb2YgQXJyYXkpKVxuICAgICAgICBwb2ludHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgLy9pZiB0aGlzIGlzIGEgZmxhdCBhcnJheSBvZiBudW1iZXJzLCBjb252ZXJ0IGl0IHRvIHBvaW50c1xuICAgIGlmKHR5cGVvZiBwb2ludHNbMF0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBwID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGlsID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpKz0yKSB7XG4gICAgICAgICAgICBwLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBJWEkuUG9pbnQocG9pbnRzW2ldLCBwb2ludHNbaSArIDFdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvaW50cyA9IHA7XG4gICAgfVxuXG5cdHRoaXMucG9pbnRzID0gcG9pbnRzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHBvbHlnb25cbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBhIGNvcHkgb2YgdGhlIHBvbHlnb25cbiAqL1xuUElYSS5Qb2x5Z29uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcblx0dmFyIHBvaW50cyA9IFtdO1xuXHRmb3IgKHZhciBpPTA7IGk8dGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRwb2ludHMucHVzaCh0aGlzLnBvaW50c1tpXS5jbG9uZSgpKTtcblx0fVxuXG5cdHJldHVybiBuZXcgUElYSS5Qb2x5Z29uKHBvaW50cyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSB4LCBhbmQgeSBjb29yZHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBwb2x5Z29uXG4gKlxuICogQG1ldGhvZCBjb250YWluc1xuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSBZIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcmV0dXJuIHtCb29sZWFufSBpZiB0aGUgeC95IGNvb3JkcyBhcmUgd2l0aGluIHRoaXMgcG9seWdvblxuICovXG5QSVhJLlBvbHlnb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oeCwgeSlcbntcbiAgICB2YXIgaW5zaWRlID0gZmFsc2U7XG5cbiAgICAvLyB1c2Ugc29tZSByYXljYXN0aW5nIHRvIHRlc3QgaGl0c1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJzdGFjay9wb2ludC1pbi1wb2x5Z29uL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG4gICAgZm9yKHZhciBpID0gMCwgaiA9IHRoaXMucG9pbnRzLmxlbmd0aCAtIDE7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGogPSBpKyspIHtcbiAgICAgICAgdmFyIHhpID0gdGhpcy5wb2ludHNbaV0ueCwgeWkgPSB0aGlzLnBvaW50c1tpXS55LFxuICAgICAgICAgICAgeGogPSB0aGlzLnBvaW50c1tqXS54LCB5aiA9IHRoaXMucG9pbnRzW2pdLnksXG4gICAgICAgICAgICBpbnRlcnNlY3QgPSAoKHlpID4geSkgIT0gKHlqID4geSkpICYmICh4IDwgKHhqIC0geGkpICogKHkgLSB5aSkgLyAoeWogLSB5aSkgKyB4aSk7XG5cbiAgICAgICAgaWYoaW50ZXJzZWN0KSBpbnNpZGUgPSAhaW5zaWRlO1xuICAgIH1cblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlBvbHlnb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5Qb2x5Z29uO1xuXG4vKipcbiAqIEBhdXRob3IgQ2hhZCBFbmdsZXIgPGNoYWRAcGFudGhlcmRldi5jb20+XG4gKi9cblxuLyoqXG4gKiBUaGUgQ2lyY2xlIG9iamVjdCBjYW4gYmUgdXNlZCB0byBzcGVjaWZ5IGEgaGl0IGFyZWEgZm9yIGRpc3BsYXlvYmplY3RzXG4gKlxuICogQGNsYXNzIENpcmNsZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geCB7TnVtYmVyfSBUaGUgWCBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgY2lyY2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgY2lyY2xlXG4gKiBAcGFyYW0gcmFkaXVzIHtOdW1iZXJ9IFRoZSByYWRpdXMgb2YgdGhlIGNpcmNsZVxuICovXG5QSVhJLkNpcmNsZSA9IGZ1bmN0aW9uKHgsIHksIHJhZGl1cylcbntcbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgeFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLnggPSB4IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgeVxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLnkgPSB5IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgcmFkaXVzXG4gICAgICogQHR5cGUgTnVtYmVyXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHRoaXMucmFkaXVzID0gcmFkaXVzIHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgQ2lyY2xlIGluc3RhbmNlXG4gKlxuICogQG1ldGhvZCBjbG9uZVxuICogQHJldHVybiB7Q2lyY2xlfSBhIGNvcHkgb2YgdGhlIHBvbHlnb25cbiAqL1xuUElYSS5DaXJjbGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKVxue1xuICAgIHJldHVybiBuZXcgUElYSS5DaXJjbGUodGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHgsIGFuZCB5IGNvb3JkcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIGNpcmNsZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIHBvbHlnb25cbiAqL1xuUElYSS5DaXJjbGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oeCwgeSlcbntcbiAgICBpZih0aGlzLnJhZGl1cyA8PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgZHggPSAodGhpcy54IC0geCksXG4gICAgICAgIGR5ID0gKHRoaXMueSAtIHkpLFxuICAgICAgICByMiA9IHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXM7XG5cbiAgICBkeCAqPSBkeDtcbiAgICBkeSAqPSBkeTtcblxuICAgIHJldHVybiAoZHggKyBkeSA8PSByMik7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkNpcmNsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkNpcmNsZTtcblxuXG4vKipcbiAqIEBhdXRob3IgQ2hhZCBFbmdsZXIgPGNoYWRAcGFudGhlcmRldi5jb20+XG4gKi9cblxuLyoqXG4gKiBUaGUgRWxsaXBzZSBvYmplY3QgY2FuIGJlIHVzZWQgdG8gc3BlY2lmeSBhIGhpdCBhcmVhIGZvciBkaXNwbGF5b2JqZWN0c1xuICpcbiAqIEBjbGFzcyBFbGxpcHNlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgZnJhbWluZyByZWN0YW5nbGUgb2YgdGhpcyBlbGxpcHNlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgZWxsaXBzZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IFRoZSBvdmVyYWxsIHdpZHRoIG9mIHRoaXMgZWxsaXBzZVxuICogQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBUaGUgb3ZlcmFsbCBoZWlnaHQgb2YgdGhpcyBlbGxpcHNlXG4gKi9cblBJWEkuRWxsaXBzZSA9IGZ1bmN0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQpXG57XG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHhcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgdGhpcy54ID0geCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHlcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgdGhpcy55ID0geSB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHdpZHRoXG4gICAgICogQHR5cGUgTnVtYmVyXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IGhlaWdodFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAwO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIEVsbGlwc2UgaW5zdGFuY2VcbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtFbGxpcHNlfSBhIGNvcHkgb2YgdGhlIGVsbGlwc2VcbiAqL1xuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcbiAgICByZXR1cm4gbmV3IFBJWEkuRWxsaXBzZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgeCwgYW5kIHkgY29vcmRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZSBjb250YWluZWQgd2l0aGluIHRoaXMgZWxsaXBzZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIGVsbGlwc2VcbiAqL1xuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHgsIHkpXG57XG4gICAgaWYodGhpcy53aWR0aCA8PSAwIHx8IHRoaXMuaGVpZ2h0IDw9IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIC8vbm9ybWFsaXplIHRoZSBjb29yZHMgdG8gYW4gZWxsaXBzZSB3aXRoIGNlbnRlciAwLDBcbiAgICAvL2FuZCBhIHJhZGl1cyBvZiAwLjVcbiAgICB2YXIgbm9ybXggPSAoKHggLSB0aGlzLngpIC8gdGhpcy53aWR0aCkgLSAwLjUsXG4gICAgICAgIG5vcm15ID0gKCh5IC0gdGhpcy55KSAvIHRoaXMuaGVpZ2h0KSAtIDAuNTtcblxuICAgIG5vcm14ICo9IG5vcm14O1xuICAgIG5vcm15ICo9IG5vcm15O1xuXG4gICAgcmV0dXJuIChub3JteCArIG5vcm15IDwgMC4yNSk7XG59XG5cblBJWEkuRWxsaXBzZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpXG57XG4gICAgcmV0dXJuIG5ldyBQSVhJLlJlY3RhbmdsZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRWxsaXBzZTtcblxuXG5cbi8qXG4gKiBBIGxpZ2h0ZXIgdmVyc2lvbiBvZiB0aGUgcmFkIGdsLW1hdHJpeCBjcmVhdGVkIGJ5IEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVlxuICogeW91IGJvdGggcm9jayFcbiAqL1xuXG5mdW5jdGlvbiBkZXRlcm1pbmVNYXRyaXhBcnJheVR5cGUoKSB7XG4gICAgUElYSS5NYXRyaXggPSAodHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcpID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG4gICAgcmV0dXJuIFBJWEkuTWF0cml4O1xufVxuXG5kZXRlcm1pbmVNYXRyaXhBcnJheVR5cGUoKTtcblxuUElYSS5tYXQzID0ge307XG5cblBJWEkubWF0My5jcmVhdGUgPSBmdW5jdGlvbigpXG57XG5cdHZhciBtYXRyaXggPSBuZXcgUElYSS5NYXRyaXgoOSk7XG5cblx0bWF0cml4WzBdID0gMTtcblx0bWF0cml4WzFdID0gMDtcblx0bWF0cml4WzJdID0gMDtcblx0bWF0cml4WzNdID0gMDtcblx0bWF0cml4WzRdID0gMTtcblx0bWF0cml4WzVdID0gMDtcblx0bWF0cml4WzZdID0gMDtcblx0bWF0cml4WzddID0gMDtcblx0bWF0cml4WzhdID0gMTtcblxuXHRyZXR1cm4gbWF0cml4O1xufVxuXG5cblBJWEkubWF0My5pZGVudGl0eSA9IGZ1bmN0aW9uKG1hdHJpeClcbntcblx0bWF0cml4WzBdID0gMTtcblx0bWF0cml4WzFdID0gMDtcblx0bWF0cml4WzJdID0gMDtcblx0bWF0cml4WzNdID0gMDtcblx0bWF0cml4WzRdID0gMTtcblx0bWF0cml4WzVdID0gMDtcblx0bWF0cml4WzZdID0gMDtcblx0bWF0cml4WzddID0gMDtcblx0bWF0cml4WzhdID0gMTtcblxuXHRyZXR1cm4gbWF0cml4O1xufVxuXG5cblBJWEkubWF0NCA9IHt9O1xuXG5QSVhJLm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDE2KTtcblxuXHRtYXRyaXhbMF0gPSAxO1xuXHRtYXRyaXhbMV0gPSAwO1xuXHRtYXRyaXhbMl0gPSAwO1xuXHRtYXRyaXhbM10gPSAwO1xuXHRtYXRyaXhbNF0gPSAwO1xuXHRtYXRyaXhbNV0gPSAxO1xuXHRtYXRyaXhbNl0gPSAwO1xuXHRtYXRyaXhbN10gPSAwO1xuXHRtYXRyaXhbOF0gPSAwO1xuXHRtYXRyaXhbOV0gPSAwO1xuXHRtYXRyaXhbMTBdID0gMTtcblx0bWF0cml4WzExXSA9IDA7XG5cdG1hdHJpeFsxMl0gPSAwO1xuXHRtYXRyaXhbMTNdID0gMDtcblx0bWF0cml4WzE0XSA9IDA7XG5cdG1hdHJpeFsxNV0gPSAxO1xuXG5cdHJldHVybiBtYXRyaXg7XG59XG5cblBJWEkubWF0My5tdWx0aXBseSA9IGZ1bmN0aW9uIChtYXQsIG1hdDIsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gbWF0OyB9XG5cblx0Ly8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG5cdHZhciBhMDAgPSBtYXRbMF0sIGEwMSA9IG1hdFsxXSwgYTAyID0gbWF0WzJdLFxuXHQgICAgYTEwID0gbWF0WzNdLCBhMTEgPSBtYXRbNF0sIGExMiA9IG1hdFs1XSxcblx0ICAgIGEyMCA9IG1hdFs2XSwgYTIxID0gbWF0WzddLCBhMjIgPSBtYXRbOF0sXG5cblx0ICAgIGIwMCA9IG1hdDJbMF0sIGIwMSA9IG1hdDJbMV0sIGIwMiA9IG1hdDJbMl0sXG5cdCAgICBiMTAgPSBtYXQyWzNdLCBiMTEgPSBtYXQyWzRdLCBiMTIgPSBtYXQyWzVdLFxuXHQgICAgYjIwID0gbWF0Mls2XSwgYjIxID0gbWF0Mls3XSwgYjIyID0gbWF0Mls4XTtcblxuXHRkZXN0WzBdID0gYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwO1xuXHRkZXN0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuXHRkZXN0WzJdID0gYjAwICogYTAyICsgYjAxICogYTEyICsgYjAyICogYTIyO1xuXG5cdGRlc3RbM10gPSBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjA7XG5cdGRlc3RbNF0gPSBiMTAgKiBhMDEgKyBiMTEgKiBhMTEgKyBiMTIgKiBhMjE7XG5cdGRlc3RbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG5cblx0ZGVzdFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcblx0ZGVzdFs3XSA9IGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMTtcblx0ZGVzdFs4XSA9IGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMjtcblxuXHRyZXR1cm4gZGVzdDtcbn1cblxuUElYSS5tYXQzLmNsb25lID0gZnVuY3Rpb24obWF0KVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDkpO1xuXG5cdG1hdHJpeFswXSA9IG1hdFswXTtcblx0bWF0cml4WzFdID0gbWF0WzFdO1xuXHRtYXRyaXhbMl0gPSBtYXRbMl07XG5cdG1hdHJpeFszXSA9IG1hdFszXTtcblx0bWF0cml4WzRdID0gbWF0WzRdO1xuXHRtYXRyaXhbNV0gPSBtYXRbNV07XG5cdG1hdHJpeFs2XSA9IG1hdFs2XTtcblx0bWF0cml4WzddID0gbWF0WzddO1xuXHRtYXRyaXhbOF0gPSBtYXRbOF07XG5cblx0cmV0dXJuIG1hdHJpeDtcbn1cblxuUElYSS5tYXQzLnRyYW5zcG9zZSA9IGZ1bmN0aW9uIChtYXQsIGRlc3QpXG57XG4gXHQvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gICAgaWYgKCFkZXN0IHx8IG1hdCA9PT0gZGVzdCkge1xuICAgICAgICB2YXIgYTAxID0gbWF0WzFdLCBhMDIgPSBtYXRbMl0sXG4gICAgICAgICAgICBhMTIgPSBtYXRbNV07XG5cbiAgICAgICAgbWF0WzFdID0gbWF0WzNdO1xuICAgICAgICBtYXRbMl0gPSBtYXRbNl07XG4gICAgICAgIG1hdFszXSA9IGEwMTtcbiAgICAgICAgbWF0WzVdID0gbWF0WzddO1xuICAgICAgICBtYXRbNl0gPSBhMDI7XG4gICAgICAgIG1hdFs3XSA9IGExMjtcbiAgICAgICAgcmV0dXJuIG1hdDtcbiAgICB9XG5cbiAgICBkZXN0WzBdID0gbWF0WzBdO1xuICAgIGRlc3RbMV0gPSBtYXRbM107XG4gICAgZGVzdFsyXSA9IG1hdFs2XTtcbiAgICBkZXN0WzNdID0gbWF0WzFdO1xuICAgIGRlc3RbNF0gPSBtYXRbNF07XG4gICAgZGVzdFs1XSA9IG1hdFs3XTtcbiAgICBkZXN0WzZdID0gbWF0WzJdO1xuICAgIGRlc3RbN10gPSBtYXRbNV07XG4gICAgZGVzdFs4XSA9IG1hdFs4XTtcbiAgICByZXR1cm4gZGVzdDtcbn1cblxuUElYSS5tYXQzLnRvTWF0NCA9IGZ1bmN0aW9uIChtYXQsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gUElYSS5tYXQ0LmNyZWF0ZSgpOyB9XG5cblx0ZGVzdFsxNV0gPSAxO1xuXHRkZXN0WzE0XSA9IDA7XG5cdGRlc3RbMTNdID0gMDtcblx0ZGVzdFsxMl0gPSAwO1xuXG5cdGRlc3RbMTFdID0gMDtcblx0ZGVzdFsxMF0gPSBtYXRbOF07XG5cdGRlc3RbOV0gPSBtYXRbN107XG5cdGRlc3RbOF0gPSBtYXRbNl07XG5cblx0ZGVzdFs3XSA9IDA7XG5cdGRlc3RbNl0gPSBtYXRbNV07XG5cdGRlc3RbNV0gPSBtYXRbNF07XG5cdGRlc3RbNF0gPSBtYXRbM107XG5cblx0ZGVzdFszXSA9IDA7XG5cdGRlc3RbMl0gPSBtYXRbMl07XG5cdGRlc3RbMV0gPSBtYXRbMV07XG5cdGRlc3RbMF0gPSBtYXRbMF07XG5cblx0cmV0dXJuIGRlc3Q7XG59XG5cblxuLy8vLy9cblxuXG5QSVhJLm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDE2KTtcblxuXHRtYXRyaXhbMF0gPSAxO1xuXHRtYXRyaXhbMV0gPSAwO1xuXHRtYXRyaXhbMl0gPSAwO1xuXHRtYXRyaXhbM10gPSAwO1xuXHRtYXRyaXhbNF0gPSAwO1xuXHRtYXRyaXhbNV0gPSAxO1xuXHRtYXRyaXhbNl0gPSAwO1xuXHRtYXRyaXhbN10gPSAwO1xuXHRtYXRyaXhbOF0gPSAwO1xuXHRtYXRyaXhbOV0gPSAwO1xuXHRtYXRyaXhbMTBdID0gMTtcblx0bWF0cml4WzExXSA9IDA7XG5cdG1hdHJpeFsxMl0gPSAwO1xuXHRtYXRyaXhbMTNdID0gMDtcblx0bWF0cml4WzE0XSA9IDA7XG5cdG1hdHJpeFsxNV0gPSAxO1xuXG5cdHJldHVybiBtYXRyaXg7XG59XG5cblBJWEkubWF0NC50cmFuc3Bvc2UgPSBmdW5jdGlvbiAobWF0LCBkZXN0KVxue1xuXHQvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG5cdGlmICghZGVzdCB8fCBtYXQgPT09IGRlc3QpXG5cdHtcblx0ICAgIHZhciBhMDEgPSBtYXRbMV0sIGEwMiA9IG1hdFsyXSwgYTAzID0gbWF0WzNdLFxuXHQgICAgICAgIGExMiA9IG1hdFs2XSwgYTEzID0gbWF0WzddLFxuXHQgICAgICAgIGEyMyA9IG1hdFsxMV07XG5cblx0ICAgIG1hdFsxXSA9IG1hdFs0XTtcblx0ICAgIG1hdFsyXSA9IG1hdFs4XTtcblx0ICAgIG1hdFszXSA9IG1hdFsxMl07XG5cdCAgICBtYXRbNF0gPSBhMDE7XG5cdCAgICBtYXRbNl0gPSBtYXRbOV07XG5cdCAgICBtYXRbN10gPSBtYXRbMTNdO1xuXHQgICAgbWF0WzhdID0gYTAyO1xuXHQgICAgbWF0WzldID0gYTEyO1xuXHQgICAgbWF0WzExXSA9IG1hdFsxNF07XG5cdCAgICBtYXRbMTJdID0gYTAzO1xuXHQgICAgbWF0WzEzXSA9IGExMztcblx0ICAgIG1hdFsxNF0gPSBhMjM7XG5cdCAgICByZXR1cm4gbWF0O1xuXHR9XG5cblx0ZGVzdFswXSA9IG1hdFswXTtcblx0ZGVzdFsxXSA9IG1hdFs0XTtcblx0ZGVzdFsyXSA9IG1hdFs4XTtcblx0ZGVzdFszXSA9IG1hdFsxMl07XG5cdGRlc3RbNF0gPSBtYXRbMV07XG5cdGRlc3RbNV0gPSBtYXRbNV07XG5cdGRlc3RbNl0gPSBtYXRbOV07XG5cdGRlc3RbN10gPSBtYXRbMTNdO1xuXHRkZXN0WzhdID0gbWF0WzJdO1xuXHRkZXN0WzldID0gbWF0WzZdO1xuXHRkZXN0WzEwXSA9IG1hdFsxMF07XG5cdGRlc3RbMTFdID0gbWF0WzE0XTtcblx0ZGVzdFsxMl0gPSBtYXRbM107XG5cdGRlc3RbMTNdID0gbWF0WzddO1xuXHRkZXN0WzE0XSA9IG1hdFsxMV07XG5cdGRlc3RbMTVdID0gbWF0WzE1XTtcblx0cmV0dXJuIGRlc3Q7XG59XG5cblBJWEkubWF0NC5tdWx0aXBseSA9IGZ1bmN0aW9uIChtYXQsIG1hdDIsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gbWF0OyB9XG5cblx0Ly8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG5cdHZhciBhMDAgPSBtYXRbIDBdLCBhMDEgPSBtYXRbIDFdLCBhMDIgPSBtYXRbIDJdLCBhMDMgPSBtYXRbM107XG5cdHZhciBhMTAgPSBtYXRbIDRdLCBhMTEgPSBtYXRbIDVdLCBhMTIgPSBtYXRbIDZdLCBhMTMgPSBtYXRbN107XG5cdHZhciBhMjAgPSBtYXRbIDhdLCBhMjEgPSBtYXRbIDldLCBhMjIgPSBtYXRbMTBdLCBhMjMgPSBtYXRbMTFdO1xuXHR2YXIgYTMwID0gbWF0WzEyXSwgYTMxID0gbWF0WzEzXSwgYTMyID0gbWF0WzE0XSwgYTMzID0gbWF0WzE1XTtcblxuXHQvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcbiAgICB2YXIgYjAgID0gbWF0MlswXSwgYjEgPSBtYXQyWzFdLCBiMiA9IG1hdDJbMl0sIGIzID0gbWF0MlszXTtcbiAgICBkZXN0WzBdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbMV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgZGVzdFsyXSA9IGIwKmEwMiArIGIxKmExMiArIGIyKmEyMiArIGIzKmEzMjtcbiAgICBkZXN0WzNdID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgYjAgPSBtYXQyWzRdO1xuICAgIGIxID0gbWF0Mls1XTtcbiAgICBiMiA9IG1hdDJbNl07XG4gICAgYjMgPSBtYXQyWzddO1xuICAgIGRlc3RbNF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgZGVzdFs1XSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGIzKmEzMTtcbiAgICBkZXN0WzZdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIGRlc3RbN10gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IG1hdDJbOF07XG4gICAgYjEgPSBtYXQyWzldO1xuICAgIGIyID0gbWF0MlsxMF07XG4gICAgYjMgPSBtYXQyWzExXTtcbiAgICBkZXN0WzhdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbOV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgZGVzdFsxMF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBiMyphMzI7XG4gICAgZGVzdFsxMV0gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IG1hdDJbMTJdO1xuICAgIGIxID0gbWF0MlsxM107XG4gICAgYjIgPSBtYXQyWzE0XTtcbiAgICBiMyA9IG1hdDJbMTVdO1xuICAgIGRlc3RbMTJdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbMTNdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIGRlc3RbMTRdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIGRlc3RbMTVdID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgcmV0dXJuIGRlc3Q7XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIG9iamVjdHMgdGhhdCBhcmUgcmVuZGVyZWQgb24gdGhlIHNjcmVlbi5cbiAqXG4gKiBAY2xhc3MgRGlzcGxheU9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdCA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5sYXN0ID0gdGhpcztcblx0dGhpcy5maXJzdCA9IHRoaXM7XG5cdC8qKlxuXHQgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgb2JqZWN0IHJlbGF0aXZlIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgcGFyZW50LlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcG9zaXRpb25cblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdC8qKlxuXHQgKiBUaGUgc2NhbGUgZmFjdG9yIG9mIHRoZSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzY2FsZVxuXHQgKiBAdHlwZSBQb2ludFxuXHQgKi9cblx0dGhpcy5zY2FsZSA9IG5ldyBQSVhJLlBvaW50KDEsMSk7Ly97eDoxLCB5OjF9O1xuXG5cdC8qKlxuXHQgKiBUaGUgcGl2b3QgcG9pbnQgb2YgdGhlIGRpc3BsYXlPYmplY3QgdGhhdCBpdCByb3RhdGVzIGFyb3VuZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcGl2b3Rcblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMucGl2b3QgPSBuZXcgUElYSS5Qb2ludCgwLDApO1xuXG5cdC8qKlxuXHQgKiBUaGUgcm90YXRpb24gb2YgdGhlIG9iamVjdCBpbiByYWRpYW5zLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcm90YXRpb25cblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqL1xuXHR0aGlzLnJvdGF0aW9uID0gMDtcblxuXHQvKipcblx0ICogVGhlIG9wYWNpdHkgb2YgdGhlIG9iamVjdC5cblx0ICpcblx0ICogQHByb3BlcnR5IGFscGhhXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cdFxuXHR0aGlzLmFscGhhID0gMTtcblxuXHQvKipcblx0ICogVGhlIHZpc2liaWxpdHkgb2YgdGhlIG9iamVjdC5cblx0ICpcblx0ICogQHByb3BlcnR5IHZpc2libGVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKi9cdFxuXHR0aGlzLnZpc2libGUgPSB0cnVlO1xuXG5cdC8qKlxuXHQgKiBUaGlzIGlzIHRoZSBkZWZpbmVkIGFyZWEgdGhhdCB3aWxsIHBpY2sgdXAgbW91c2UgLyB0b3VjaCBldmVudHMuIEl0IGlzIG51bGwgYnkgZGVmYXVsdC5cblx0ICogU2V0dGluZyBpdCBpcyBhIG5lYXQgd2F5IG9mIG9wdGltaXNpbmcgdGhlIGhpdFRlc3QgZnVuY3Rpb24gdGhhdCB0aGUgaW50ZXJhY3Rpb25NYW5hZ2VyIHdpbGwgdXNlIChhcyBpdCB3aWxsIG5vdCBuZWVkIHRvIGhpdCB0ZXN0IGFsbCB0aGUgY2hpbGRyZW4pXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoaXRBcmVhXG5cdCAqIEB0eXBlIFJlY3RhbmdsZXxDaXJjbGV8RWxsaXBzZXxQb2x5Z29uXG5cdCAqL1x0XG5cdHRoaXMuaGl0QXJlYSA9IG51bGw7XG5cblx0LyoqXG5cdCAqIFRoaXMgaXMgdXNlZCB0byBpbmRpY2F0ZSBpZiB0aGUgZGlzcGxheU9iamVjdCBzaG91bGQgZGlzcGxheSBhIG1vdXNlIGhhbmQgY3Vyc29yIG9uIHJvbGxvdmVyXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBidXR0b25Nb2RlXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICovXG5cdHRoaXMuYnV0dG9uTW9kZSA9IGZhbHNlO1xuXG5cdC8qKlxuXHQgKiBDYW4gdGhpcyBvYmplY3QgYmUgcmVuZGVyZWRcblx0ICpcblx0ICogQHByb3BlcnR5IHJlbmRlcmFibGVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKi9cblx0dGhpcy5yZW5kZXJhYmxlID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFRoZSBkaXNwbGF5IG9iamVjdCBjb250YWluZXIgdGhhdCBjb250YWlucyB0aGlzIGRpc3BsYXkgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcGFyZW50XG5cdCAqIEB0eXBlIERpc3BsYXlPYmplY3RDb250YWluZXJcblx0ICogQHJlYWRPbmx5XG5cdCAqL1x0XG5cdHRoaXMucGFyZW50ID0gbnVsbDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIHN0YWdlIHRoZSBkaXNwbGF5IG9iamVjdCBpcyBjb25uZWN0ZWQgdG8sIG9yIHVuZGVmaW5lZCBpZiBpdCBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBzdGFnZS5cblx0ICpcblx0ICogQHByb3BlcnR5IHN0YWdlXG5cdCAqIEB0eXBlIFN0YWdlXG5cdCAqIEByZWFkT25seVxuXHQgKi9cdFxuXHR0aGlzLnN0YWdlID0gbnVsbDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIG11bHRpcGxpZWQgYWxwaGEgb2YgdGhlIGRpc3BsYXlvYmplY3Rcblx0ICpcblx0ICogQHByb3BlcnR5IHdvcmxkQWxwaGFcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy53b3JsZEFscGhhID0gMTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBpbnRlcmFjdGl2ZSwgZG8gbm90IHRvZ2dsZSBkaXJlY3RseSEgdXNlIHRoZSBgaW50ZXJhY3RpdmVgIHByb3BlcnR5XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBfaW50ZXJhY3RpdmVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMuX2ludGVyYWN0aXZlID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIEN1cnJlbnQgdHJhbnNmb3JtIG9mIHRoZSBvYmplY3QgYmFzZWQgb24gd29ybGQgKHBhcmVudCkgZmFjdG9yc1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgd29ybGRUcmFuc2Zvcm1cblx0ICogQHR5cGUgTWF0M1xuXHQgKiBAcmVhZE9ubHlcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMud29ybGRUcmFuc2Zvcm0gPSBQSVhJLm1hdDMuY3JlYXRlKCkvL21hdDMuaWRlbnRpdHkoKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBsb2NhbGx5XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBsb2NhbFRyYW5zZm9ybVxuXHQgKiBAdHlwZSBNYXQzXG5cdCAqIEByZWFkT25seVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5sb2NhbFRyYW5zZm9ybSA9IFBJWEkubWF0My5jcmVhdGUoKS8vbWF0My5pZGVudGl0eSgpO1xuXG5cdC8qKlxuXHQgKiBbTllJXSBVbmtvd25cblx0ICpcblx0ICogQHByb3BlcnR5IGNvbG9yXG5cdCAqIEB0eXBlIEFycmF5PD5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMuY29sb3IgPSBbXTtcblxuXHQvKipcblx0ICogW05ZSV0gSG9sZHMgd2hldGhlciBvciBub3QgdGhpcyBvYmplY3QgaXMgZHluYW1pYywgZm9yIHJlbmRlcmluZyBvcHRpbWl6YXRpb25cblx0ICpcblx0ICogQHByb3BlcnR5IGR5bmFtaWNcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5keW5hbWljID0gdHJ1ZTtcblxuXHQvLyBjaGFjaCB0aGF0IHB1cHB5IVxuXHR0aGlzLl9zciA9IDA7XG5cdHRoaXMuX2NyID0gMTtcblxuXG5cdHRoaXMuZmlsdGVyQXJlYSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsMSwxKTtcblx0XG5cdC8qXG5cdCAqIE1PVVNFIENhbGxiYWNrc1xuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgY2xpY2tzIG9uIHRoZSBkaXNwbGF5T2JqZWN0IHdpdGggdGhlaXIgbW91c2Vcblx0ICogQG1ldGhvZCBjbGlja1xuXHQgKiBAcGFyYW0gaW50ZXJhY3Rpb25EYXRhIHtJbnRlcmFjdGlvbkRhdGF9XG5cdCAqL1xuXG5cdC8qKlxuXHQgKiBBIGNhbGxiYWNrIHRoYXQgaXMgdXNlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgbW91c2UgZG93biBvdmVyIHRoZSBzcHJpdGVcblx0ICogQG1ldGhvZCBtb3VzZWRvd25cblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciByZWxlYXNlcyB0aGUgbW91c2UgdGhhdCB3YXMgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBmb3IgdGhpcyBjYWxsYmFjayB0byBiZSBmaXJlZCB0aGUgbW91c2UgbXVzdCBoYXZlIGJlZW4gcHJlc3NlZCBkb3duIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCBtb3VzZXVwXG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgdGhlIG1vdXNlIHRoYXQgd2FzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3QgYnV0IGlzIG5vIGxvbmdlciBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIGZvciB0aGlzIGNhbGxiYWNrIHRvIGJlIGZpcmVkLCBUaGUgdG91Y2ggbXVzdCBoYXZlIHN0YXJ0ZWQgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBAbWV0aG9kIG1vdXNldXBvdXRzaWRlXG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXJzIG1vdXNlIHJvbGxzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCBtb3VzZW92ZXJcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgbW91c2UgbGVhdmVzIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIEBtZXRob2QgbW91c2VvdXRcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXG5cdC8qXG5cdCAqIFRPVUNIIENhbGxiYWNrc1xuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgdGFwcyBvbiB0aGUgc3ByaXRlIHdpdGggdGhlaXIgZmluZ2VyXG5cdCAqIGJhc2ljYWxseSBhIHRvdWNoIHZlcnNpb24gb2YgY2xpY2tcblx0ICogQG1ldGhvZCB0YXBcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciB0b3VjaCdzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCB0b3VjaHN0YXJ0XG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgYSB0b3VjaCBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIEBtZXRob2QgdG91Y2hlbmRcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciByZWxlYXNlcyB0aGUgdG91Y2ggdGhhdCB3YXMgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBmb3IgdGhpcyBjYWxsYmFjayB0byBiZSBmaXJlZCwgVGhlIHRvdWNoIG11c3QgaGF2ZSBzdGFydGVkIG92ZXIgdGhlIHNwcml0ZVxuXHQgKiBAbWV0aG9kIHRvdWNoZW5kb3V0c2lkZVxuXHQgKiBAcGFyYW0gaW50ZXJhY3Rpb25EYXRhIHtJbnRlcmFjdGlvbkRhdGF9XG5cdCAqL1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRGlzcGxheU9iamVjdDtcblxuLyoqXG4gKiBbRGVwcmVjYXRlZF0gSW5kaWNhdGVzIGlmIHRoZSBzcHJpdGUgd2lsbCBoYXZlIHRvdWNoIGFuZCBtb3VzZSBpbnRlcmFjdGl2aXR5LiBJdCBpcyBmYWxzZSBieSBkZWZhdWx0XG4gKiBJbnN0ZWFkIG9mIHVzaW5nIHRoaXMgZnVuY3Rpb24geW91IGNhbiBub3cgc2ltcGx5IHNldCB0aGUgaW50ZXJhY3RpdmUgcHJvcGVydHkgdG8gdHJ1ZSBvciBmYWxzZVxuICpcbiAqIEBtZXRob2Qgc2V0SW50ZXJhY3RpdmVcbiAqIEBwYXJhbSBpbnRlcmFjdGl2ZSB7Qm9vbGVhbn1cbiAqIEBkZXByZWNhdGVkIFNpbXBseSBzZXQgdGhlIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgZGlyZWN0bHlcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5zZXRJbnRlcmFjdGl2ZSA9IGZ1bmN0aW9uKGludGVyYWN0aXZlKVxue1xuXHR0aGlzLmludGVyYWN0aXZlID0gaW50ZXJhY3RpdmU7XG59XG5cbi8qKlxuICogSW5kaWNhdGVzIGlmIHRoZSBzcHJpdGUgd2lsbCBoYXZlIHRvdWNoIGFuZCBtb3VzZSBpbnRlcmFjdGl2aXR5LiBJdCBpcyBmYWxzZSBieSBkZWZhdWx0XG4gKlxuICogQHByb3BlcnR5IGludGVyYWN0aXZlXG4gKiBAdHlwZSBCb29sZWFuXG4gKiBAZGVmYXVsdCBmYWxzZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZSwgJ2ludGVyYWN0aXZlJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmFjdGl2ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuX2ludGVyYWN0aXZlID0gdmFsdWU7XG4gICAgXHRcbiAgICBcdC8vIFRPRE8gbW9yZSB0byBiZSBkb25lIGhlcmUuLlxuXHRcdC8vIG5lZWQgdG8gc29ydCBvdXQgYSByZS1jcmF3bCFcblx0XHRpZih0aGlzLnN0YWdlKXRoaXMuc3RhZ2UuZGlydHkgPSB0cnVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNldHMgYSBtYXNrIGZvciB0aGUgZGlzcGxheU9iamVjdC4gQSBtYXNrIGlzIGFuIG9iamVjdCB0aGF0IGxpbWl0cyB0aGUgdmlzaWJpbGl0eSBvZiBhbiBvYmplY3QgdG8gdGhlIHNoYXBlIG9mIHRoZSBtYXNrIGFwcGxpZWQgdG8gaXQuXG4gKiBJbiBQSVhJIGEgcmVndWxhciBtYXNrIG11c3QgYmUgYSBQSVhJLkdncmFwaGljcyBvYmplY3QuIFRoaXMgYWxsb3dzIGZvciBtdWNoIGZhc3RlciBtYXNraW5nIGluIGNhbnZhcyBhcyBpdCB1dGlsaXNlcyBzaGFwZSBjbGlwcGluZy5cbiAqIFRvIHJlbW92ZSBhIG1hc2ssIHNldCB0aGlzIHByb3BlcnR5IHRvIG51bGwuXG4gKlxuICogQHByb3BlcnR5IG1hc2tcbiAqIEB0eXBlIEdyYXBoaWNzXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLCAnbWFzaycsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFzaztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFxuICAgIFx0XG4gICAgICAgIGlmKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYodGhpcy5fbWFzaylcblx0ICAgIFx0e1xuXHQgICAgXHRcdHZhbHVlLnN0YXJ0ID0gdGhpcy5fbWFzay5zdGFydDtcblx0ICAgIFx0XHR2YWx1ZS5lbmQgPSB0aGlzLl9tYXNrLmVuZDtcblx0ICAgIFx0fVxuICAgIFx0XHRlbHNlXG4gICAgXHRcdHtcblx0XHQgICAgICAgIHRoaXMuYWRkRmlsdGVyKHZhbHVlKTtcblx0XHQgICAgICAgIHZhbHVlLnJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICBcdFx0fVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICBcdCB0aGlzLnJlbW92ZUZpbHRlcih0aGlzLl9tYXNrKTtcblx0XHRcdCB0aGlzLl9tYXNrLnJlbmRlcmFibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tYXNrID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgZmlsdGVycyBmb3IgdGhlIGRpc3BsYXlPYmplY3QuIFxuICogKiBJTVBPUlRBTlQ6IFRoaXMgaXMgYSB3ZWJHTCBvbmx5IGZlYXR1cmUgYW5kIHdpbGwgYmUgaWdub3JlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyLlxuICogVG8gcmVtb3ZlIGZpbHRlcnMgc2ltcGx5IHNldCB0aGlzIHByb3BlcnR5IHRvICdudWxsJ1xuICogQHByb3BlcnR5IGZpbHRlcnNcbiAqIEB0eXBlIEFycmF5IEFuIGFycmF5IG9mIGZpbHRlcnNcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUsICdmaWx0ZXJzJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XG4gICAgICAgIGlmKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYodGhpcy5fZmlsdGVycyl0aGlzLnJlbW92ZUZpbHRlcih0aGlzLl9maWx0ZXJzKTtcblx0ICAgICAgICB0aGlzLmFkZEZpbHRlcih2YWx1ZSk7XG5cblx0XHQgICAgLy8gbm93IHB1dCBhbGwgdGhlIHBhc3NlcyBpbiBvbmUgcGxhY2UuLlxuXHQgICAgICAgIHZhciBwYXNzZXMgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSBcblx0ICAgICAgICB7XG5cdCAgICAgICAgXHR2YXIgZmlsdGVyUGFzc2VzID0gdmFsdWVbaV0ucGFzc2VzO1xuXHQgICAgICAgIFx0Zm9yICh2YXIgaiA9IDA7IGogPCBmaWx0ZXJQYXNzZXMubGVuZ3RoOyBqKyspIFxuXHQgICAgICAgIFx0e1xuXHQgICAgICAgIFx0XHRwYXNzZXMucHVzaChmaWx0ZXJQYXNzZXNbal0pO1xuXHQgICAgICAgIFx0fTtcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFsdWUuc3RhcnQuZmlsdGVyUGFzc2VzID0gcGFzc2VzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICBcdGlmKHRoaXMuX2ZpbHRlcnMpdGhpcy5yZW1vdmVGaWx0ZXIodGhpcy5fZmlsdGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2ZpbHRlcnMgPSB2YWx1ZTtcblxuICAgICAgIFxuXG4gICAgICAgIFxuICAgIH1cbn0pO1xuXG4vKlxuICogQWRkcyBhIGZpbHRlciB0byB0aGlzIGRpc3BsYXlPYmplY3RcbiAqXG4gKiBAbWV0aG9kIGFkZEZpbHRlclxuICogQHBhcmFtIG1hc2sge0dyYXBoaWNzfSB0aGUgZ3JhcGhpY3Mgb2JqZWN0IHRvIHVzZSBhcyBhIGZpbHRlclxuICogQHByaXZhdGVcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5hZGRGaWx0ZXIgPSBmdW5jdGlvbihkYXRhKVxue1xuXHQvL2lmKHRoaXMuZmlsdGVyKXJldHVybjtcblx0Ly90aGlzLmZpbHRlciA9IHRydWU7XG4vL1x0ZGF0YVswXS50YXJnZXQgPSB0aGlzO1xuXHRcblxuXHQvLyBpbnNlcnQgYSBmaWx0ZXIgYmxvY2suLlxuXHQvLyBUT0RPIE9uamVjdCBwb29sIHRoZWFzZSBiYWQgYm95cy4uXG5cdHZhciBzdGFydCA9IG5ldyBQSVhJLkZpbHRlckJsb2NrKCk7XG5cdHZhciBlbmQgPSBuZXcgUElYSS5GaWx0ZXJCbG9jaygpO1xuXHRcblx0ZGF0YS5zdGFydCA9IHN0YXJ0O1xuXHRkYXRhLmVuZCA9IGVuZDtcblx0XG5cdHN0YXJ0LmRhdGEgPSBkYXRhO1xuXHRlbmQuZGF0YSA9IGRhdGE7XG5cdFxuXHRzdGFydC5maXJzdCA9IHN0YXJ0Lmxhc3QgPSAgdGhpcztcblx0ZW5kLmZpcnN0ID0gZW5kLmxhc3QgPSB0aGlzO1xuXHRcblx0c3RhcnQub3BlbiA9IHRydWU7XG5cdFxuXHRzdGFydC50YXJnZXQgPSB0aGlzO1xuXHRcblx0Lypcblx0ICogaW5zZXJ0IHN0YXJ0XG5cdCAqL1xuXHRcblx0dmFyIGNoaWxkRmlyc3QgPSBzdGFydFxuXHR2YXIgY2hpbGRMYXN0ID0gc3RhcnRcblx0dmFyIG5leHRPYmplY3Q7XG5cdHZhciBwcmV2aW91c09iamVjdDtcblx0XHRcblx0cHJldmlvdXNPYmplY3QgPSB0aGlzLmZpcnN0Ll9pUHJldjtcblx0XG5cdGlmKHByZXZpb3VzT2JqZWN0KVxuXHR7XG5cdFx0bmV4dE9iamVjdCA9IHByZXZpb3VzT2JqZWN0Ll9pTmV4dDtcblx0XHRjaGlsZEZpcnN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRcdHByZXZpb3VzT2JqZWN0Ll9pTmV4dCA9IGNoaWxkRmlyc3Q7XHRcdFxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdG5leHRPYmplY3QgPSB0aGlzO1xuXHR9XHRcblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0XG5cdC8vIG5vdyBpbnNlcnQgdGhlIGVuZCBmaWx0ZXIgYmxvY2suLlxuXHRcblx0Lypcblx0ICogaW5zZXJ0IGVuZCBmaWx0ZXJcblx0ICovXG5cdHZhciBjaGlsZEZpcnN0ID0gZW5kXG5cdHZhciBjaGlsZExhc3QgPSBlbmRcblx0dmFyIG5leHRPYmplY3QgPSBudWxsO1xuXHR2YXIgcHJldmlvdXNPYmplY3QgPSBudWxsO1xuXHRcdFxuXHRwcmV2aW91c09iamVjdCA9IHRoaXMubGFzdDtcblx0bmV4dE9iamVjdCA9IHByZXZpb3VzT2JqZWN0Ll9pTmV4dDtcblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0Y2hpbGRGaXJzdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gY2hpbGRGaXJzdDtcdFxuXHRcblx0dmFyIHVwZGF0ZUxhc3QgPSB0aGlzO1xuXHRcblx0dmFyIHByZXZMYXN0ID0gdGhpcy5sYXN0O1xuXHR3aGlsZSh1cGRhdGVMYXN0KVxuXHR7XG5cdFx0aWYodXBkYXRlTGFzdC5sYXN0ID09IHByZXZMYXN0KVxuXHRcdHtcblx0XHRcdHVwZGF0ZUxhc3QubGFzdCA9IGVuZDtcblx0XHR9XG5cdFx0dXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3QucGFyZW50O1xuXHR9XG5cdFxuXHR0aGlzLmZpcnN0ID0gc3RhcnQ7XG5cdFxuXHQvLyBpZiB3ZWJHTC4uLlxuXHRpZih0aGlzLl9fcmVuZGVyR3JvdXApXG5cdHtcblx0XHR0aGlzLl9fcmVuZGVyR3JvdXAuYWRkRmlsdGVyQmxvY2tzKHN0YXJ0LCBlbmQpO1xuXHR9XG5cdFxufVxuXG4vKlxuICogUmVtb3ZlcyB0aGUgZmlsdGVyIHRvIHRoaXMgZGlzcGxheU9iamVjdFxuICpcbiAqIEBtZXRob2QgcmVtb3ZlRmlsdGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLnJlbW92ZUZpbHRlciA9IGZ1bmN0aW9uKGRhdGEpXG57XG5cdC8vaWYoIXRoaXMuZmlsdGVyKXJldHVybjtcblx0Ly90aGlzLmZpbHRlciA9IGZhbHNlO1xuXHRjb25zb2xlLmxvZyhcIllVT0lPXCIpXG5cdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdHZhciBzdGFydEJsb2NrID0gZGF0YS5zdGFydDtcblx0XG5cdFxuXHR2YXIgbmV4dE9iamVjdCA9IHN0YXJ0QmxvY2suX2lOZXh0O1xuXHR2YXIgcHJldmlvdXNPYmplY3QgPSBzdGFydEJsb2NrLl9pUHJldjtcblx0XHRcblx0aWYobmV4dE9iamVjdCluZXh0T2JqZWN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRpZihwcmV2aW91c09iamVjdClwcmV2aW91c09iamVjdC5faU5leHQgPSBuZXh0T2JqZWN0O1x0XHRcblx0XG5cdHRoaXMuZmlyc3QgPSBzdGFydEJsb2NrLl9pTmV4dDtcblx0XG5cdC8vIHJlbW92ZSB0aGUgZW5kIGZpbHRlclxuXHR2YXIgbGFzdEJsb2NrID0gZGF0YS5lbmQ7XG5cdFxuXHR2YXIgbmV4dE9iamVjdCA9IGxhc3RCbG9jay5faU5leHQ7XG5cdHZhciBwcmV2aW91c09iamVjdCA9IGxhc3RCbG9jay5faVByZXY7XG5cdFx0XG5cdGlmKG5leHRPYmplY3QpbmV4dE9iamVjdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcdFx0XG5cdFxuXHQvLyB0aGlzIGlzIGFsd2F5cyB0cnVlIHRvbyFcblx0dmFyIHRlbXBMYXN0ID0gIGxhc3RCbG9jay5faVByZXY7XHRcblx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhcmVudHMgbGFzdCBpcyB1cGRhdGVkIHRvb1xuXHR2YXIgdXBkYXRlTGFzdCA9IHRoaXM7XG5cdHdoaWxlKHVwZGF0ZUxhc3QubGFzdCA9PSBsYXN0QmxvY2spXG5cdHtcblx0XHR1cGRhdGVMYXN0Lmxhc3QgPSB0ZW1wTGFzdDtcblx0XHR1cGRhdGVMYXN0ID0gdXBkYXRlTGFzdC5wYXJlbnQ7XG5cdFx0aWYoIXVwZGF0ZUxhc3QpYnJlYWs7XG5cdH1cblx0XG5cdC8vIGlmIHdlYkdMLi4uXG5cdGlmKHRoaXMuX19yZW5kZXJHcm91cClcblx0e1xuXHRcdHRoaXMuX19yZW5kZXJHcm91cC5yZW1vdmVGaWx0ZXJCbG9ja3Moc3RhcnRCbG9jaywgbGFzdEJsb2NrKTtcblx0fVxufVxuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHQvLyBUT0RPIE9QVElNSVpFIFRISVMhISB3aXRoIGRpcnR5XG5cdGlmKHRoaXMucm90YXRpb24gIT09IHRoaXMucm90YXRpb25DYWNoZSlcblx0e1xuXHRcdHRoaXMucm90YXRpb25DYWNoZSA9IHRoaXMucm90YXRpb247XG5cdFx0dGhpcy5fc3IgPSAgTWF0aC5zaW4odGhpcy5yb3RhdGlvbik7XG5cdFx0dGhpcy5fY3IgPSAgTWF0aC5jb3ModGhpcy5yb3RhdGlvbik7XG5cdH1cdFxuXHRcblx0dmFyIGxvY2FsVHJhbnNmb3JtID0gdGhpcy5sb2NhbFRyYW5zZm9ybTtcblx0dmFyIHBhcmVudFRyYW5zZm9ybSA9IHRoaXMucGFyZW50LndvcmxkVHJhbnNmb3JtO1xuXHR2YXIgd29ybGRUcmFuc2Zvcm0gPSB0aGlzLndvcmxkVHJhbnNmb3JtO1xuXHQvL2NvbnNvbGUubG9nKGxvY2FsVHJhbnNmb3JtKVxuXHRsb2NhbFRyYW5zZm9ybVswXSA9IHRoaXMuX2NyICogdGhpcy5zY2FsZS54O1xuXHRsb2NhbFRyYW5zZm9ybVsxXSA9IC10aGlzLl9zciAqIHRoaXMuc2NhbGUueVxuXHRsb2NhbFRyYW5zZm9ybVszXSA9IHRoaXMuX3NyICogdGhpcy5zY2FsZS54O1xuXHRsb2NhbFRyYW5zZm9ybVs0XSA9IHRoaXMuX2NyICogdGhpcy5zY2FsZS55O1xuXHRcblx0Ly8gVE9ETyAtLT4gZG8gd2UgZXZlbiBuZWVkIGEgbG9jYWwgbWF0cml4Pz8/XG5cdFxuXHR2YXIgcHggPSB0aGlzLnBpdm90Lng7XG5cdHZhciBweSA9IHRoaXMucGl2b3QueTtcbiAgIFx0XG4gICAgLy8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG4gICAgdmFyIGEwMCA9IGxvY2FsVHJhbnNmb3JtWzBdLCBhMDEgPSBsb2NhbFRyYW5zZm9ybVsxXSwgYTAyID0gdGhpcy5wb3NpdGlvbi54IC0gbG9jYWxUcmFuc2Zvcm1bMF0gKiBweCAtIHB5ICogbG9jYWxUcmFuc2Zvcm1bMV0sXG4gICAgICAgIGExMCA9IGxvY2FsVHJhbnNmb3JtWzNdLCBhMTEgPSBsb2NhbFRyYW5zZm9ybVs0XSwgYTEyID0gdGhpcy5wb3NpdGlvbi55IC0gbG9jYWxUcmFuc2Zvcm1bNF0gKiBweSAtIHB4ICogbG9jYWxUcmFuc2Zvcm1bM10sXG5cbiAgICAgICAgYjAwID0gcGFyZW50VHJhbnNmb3JtWzBdLCBiMDEgPSBwYXJlbnRUcmFuc2Zvcm1bMV0sIGIwMiA9IHBhcmVudFRyYW5zZm9ybVsyXSxcbiAgICAgICAgYjEwID0gcGFyZW50VHJhbnNmb3JtWzNdLCBiMTEgPSBwYXJlbnRUcmFuc2Zvcm1bNF0sIGIxMiA9IHBhcmVudFRyYW5zZm9ybVs1XTtcblxuXHRsb2NhbFRyYW5zZm9ybVsyXSA9IGEwMlxuXHRsb2NhbFRyYW5zZm9ybVs1XSA9IGExMlxuXHRcbiAgICB3b3JsZFRyYW5zZm9ybVswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMDtcbiAgICB3b3JsZFRyYW5zZm9ybVsxXSA9IGIwMCAqIGEwMSArIGIwMSAqIGExMTtcbiAgICB3b3JsZFRyYW5zZm9ybVsyXSA9IGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMjtcblxuICAgIHdvcmxkVHJhbnNmb3JtWzNdID0gYjEwICogYTAwICsgYjExICogYTEwO1xuICAgIHdvcmxkVHJhbnNmb3JtWzRdID0gYjEwICogYTAxICsgYjExICogYTExO1xuICAgIHdvcmxkVHJhbnNmb3JtWzVdID0gYjEwICogYTAyICsgYjExICogYTEyICsgYjEyO1xuXG5cdC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIGFmZmluZSB0cmFuc2Zvcm1hdGlvbiwgd2UgY2FuIG9wdGltaXNlIHRoZSBtYXRyaXggY29uY2F0ZW5hdGlvbiBwcm9jZXNzLi4gd29vbyFcblx0Ly8gbWF0My5tdWx0aXBseSh0aGlzLmxvY2FsVHJhbnNmb3JtLCB0aGlzLnBhcmVudC53b3JsZFRyYW5zZm9ybSwgdGhpcy53b3JsZFRyYW5zZm9ybSk7XG5cdHRoaXMud29ybGRBbHBoYSA9IHRoaXMuYWxwaGEgKiB0aGlzLnBhcmVudC53b3JsZEFscGhhO1xuXHRcblx0dGhpcy52Y291bnQgPSBQSVhJLnZpc2libGVDb3VudDtcblxufVxuXG5QSVhJLnZpc2libGVDb3VudCA9IDA7XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblxuLyoqXG4gKiBBIERpc3BsYXlPYmplY3RDb250YWluZXIgcmVwcmVzZW50cyBhIGNvbGxlY3Rpb24gb2YgZGlzcGxheSBvYmplY3RzLlxuICogSXQgaXMgdGhlIGJhc2UgY2xhc3Mgb2YgYWxsIGRpc3BsYXkgb2JqZWN0cyB0aGF0IGFjdCBhcyBhIGNvbnRhaW5lciBmb3Igb3RoZXIgb2JqZWN0cy5cbiAqXG4gKiBAY2xhc3MgRGlzcGxheU9iamVjdENvbnRhaW5lciBcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdC5jYWxsKCB0aGlzICk7XG5cdFxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIG9mIGNoaWxkcmVuIG9mIHRoaXMgY29udGFpbmVyLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgY2hpbGRyZW5cblx0ICogQHR5cGUgQXJyYXk8RGlzcGxheU9iamVjdD5cblx0ICogQHJlYWRPbmx5XG5cdCAqL1x0XG5cdHRoaXMuY2hpbGRyZW4gPSBbXTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlICk7XG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyO1xuXG4vKipcbiAqIEFkZHMgYSBjaGlsZCB0byB0aGUgY29udGFpbmVyLlxuICpcbiAqIEBtZXRob2QgYWRkQ2hpbGRcbiAqIEBwYXJhbSBjaGlsZCB7RGlzcGxheU9iamVjdH0gVGhlIERpc3BsYXlPYmplY3QgdG8gYWRkIHRvIHRoZSBjb250YWluZXJcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uKGNoaWxkKVxue1xuXHRpZihjaGlsZC5wYXJlbnQgIT0gdW5kZWZpbmVkKVxuXHR7XG5cdFx0XG5cdFx0Ly8vLyBDT1VMRCBCRSBUSElTPz8/XG5cdFx0Y2hpbGQucGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0Ly9cdHJldHVybjtcblx0fVxuXG5cdGNoaWxkLnBhcmVudCA9IHRoaXM7XG5cdFxuXHR0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1x0XG5cdFxuXHQvLyB1cGRhdGUgdGhlIHN0YWdlIHJlZmZlcmVuY2UuLlxuXHRcblx0aWYodGhpcy5zdGFnZSlcblx0e1xuXHRcdHZhciB0bXBDaGlsZCA9IGNoaWxkO1xuXHRcdGRvXG5cdFx0e1xuXHRcdFx0aWYodG1wQ2hpbGQuaW50ZXJhY3RpdmUpdGhpcy5zdGFnZS5kaXJ0eSA9IHRydWU7XG5cdFx0XHR0bXBDaGlsZC5zdGFnZSA9IHRoaXMuc3RhZ2U7XG5cdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHR9XHRcblx0XHR3aGlsZSh0bXBDaGlsZClcblx0fVxuXHRcblx0Ly8gTElOS0VEIExJU1QgLy9cblx0XG5cdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdHZhciBjaGlsZEZpcnN0ID0gY2hpbGQuZmlyc3Rcblx0dmFyIGNoaWxkTGFzdCA9IGNoaWxkLmxhc3Q7XG5cdHZhciBuZXh0T2JqZWN0O1xuXHR2YXIgcHJldmlvdXNPYmplY3Q7XG5cdFxuXHQvLyB0aGlzIGNvdWxkIGJlIHdyb25nIGlmIHRoZXJlIGlzIGEgZmlsdGVyPz9cblx0aWYodGhpcy5fZmlsdGVycyB8fCB0aGlzLl9tYXNrKVxuXHR7XG5cdFx0cHJldmlvdXNPYmplY3QgPSAgdGhpcy5sYXN0Ll9pUHJldjtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRwcmV2aW91c09iamVjdCA9IHRoaXMubGFzdDtcblx0fVxuXG5cdG5leHRPYmplY3QgPSBwcmV2aW91c09iamVjdC5faU5leHQ7XG5cdFxuXHQvLyBhbHdheXMgdHJ1ZSBpbiB0aGlzIGNhc2Vcblx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhcmVudHMgbGFzdCBpcyB1cGRhdGVkIHRvb1xuXHR2YXIgdXBkYXRlTGFzdCA9IHRoaXM7XG5cdHZhciBwcmV2TGFzdCA9IHByZXZpb3VzT2JqZWN0O1xuXHRcblx0d2hpbGUodXBkYXRlTGFzdClcblx0e1xuXHRcdGlmKHVwZGF0ZUxhc3QubGFzdCA9PSBwcmV2TGFzdClcblx0XHR7XG5cdFx0XHR1cGRhdGVMYXN0Lmxhc3QgPSBjaGlsZC5sYXN0O1xuXHRcdH1cblx0XHR1cGRhdGVMYXN0ID0gdXBkYXRlTGFzdC5wYXJlbnQ7XG5cdH1cblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0Y2hpbGRGaXJzdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gY2hpbGRGaXJzdDtcdFx0XG5cblx0Ly8gbmVlZCB0byByZW1vdmUgYW55IHJlbmRlciBncm91cHMuLlxuXHRpZih0aGlzLl9fcmVuZGVyR3JvdXApXG5cdHtcblx0XHQvLyBiZWluZyB1c2VkIGJ5IGEgcmVuZGVyVGV4dHVyZS4uIGlmIGl0IGV4aXN0cyB0aGVuIGl0IG11c3QgYmUgZnJvbSBhIHJlbmRlciB0ZXh0dXJlO1xuXHRcdGlmKGNoaWxkLl9fcmVuZGVyR3JvdXApY2hpbGQuX19yZW5kZXJHcm91cC5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oY2hpbGQpO1xuXHRcdC8vIGFkZCB0aGVtIHRvIHRoZSBuZXcgcmVuZGVyIGdyb3VwLi5cblx0XHR0aGlzLl9fcmVuZGVyR3JvdXAuYWRkRGlzcGxheU9iamVjdEFuZENoaWxkcmVuKGNoaWxkKTtcblx0fVxuXHRcbn1cblxuLyoqXG4gKiBBZGRzIGEgY2hpbGQgdG8gdGhlIGNvbnRhaW5lciBhdCBhIHNwZWNpZmllZCBpbmRleC4gSWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAqXG4gKiBAbWV0aG9kIGFkZENoaWxkQXRcbiAqIEBwYXJhbSBjaGlsZCB7RGlzcGxheU9iamVjdH0gVGhlIGNoaWxkIHRvIGFkZFxuICogQHBhcmFtIGluZGV4IHtOdW1iZXJ9IFRoZSBpbmRleCB0byBwbGFjZSB0aGUgY2hpbGQgaW5cbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDaGlsZEF0ID0gZnVuY3Rpb24oY2hpbGQsIGluZGV4KVxue1xuXHRpZihpbmRleCA+PSAwICYmIGluZGV4IDw9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuXHR7XG5cdFx0aWYoY2hpbGQucGFyZW50ICE9IHVuZGVmaW5lZClcblx0XHR7XG5cdFx0XHRjaGlsZC5wYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHRcdH1cblx0XHRjaGlsZC5wYXJlbnQgPSB0aGlzO1xuXHRcdFxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIHRtcENoaWxkID0gY2hpbGQ7XG5cdFx0XHRkb1xuXHRcdFx0e1xuXHRcdFx0XHRpZih0bXBDaGlsZC5pbnRlcmFjdGl2ZSl0aGlzLnN0YWdlLmRpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0dG1wQ2hpbGQuc3RhZ2UgPSB0aGlzLnN0YWdlO1xuXHRcdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHRcdH1cblx0XHRcdHdoaWxlKHRtcENoaWxkKVxuXHRcdH1cblx0XHRcblx0XHQvLyBtb2RpZnkgdGhlIGxpc3QuLlxuXHRcdHZhciBjaGlsZEZpcnN0ID0gY2hpbGQuZmlyc3Q7XG5cdFx0dmFyIGNoaWxkTGFzdCA9IGNoaWxkLmxhc3Q7XG5cdFx0dmFyIG5leHRPYmplY3Q7XG5cdFx0dmFyIHByZXZpb3VzT2JqZWN0O1xuXHRcdFxuXHRcdGlmKGluZGV4ID09IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuXHRcdHtcblx0XHRcdHByZXZpb3VzT2JqZWN0ID0gIHRoaXMubGFzdDtcblx0XHRcdHZhciB1cGRhdGVMYXN0ID0gdGhpcztcblx0XHRcdHZhciBwcmV2TGFzdCA9IHRoaXMubGFzdDtcblx0XHRcdHdoaWxlKHVwZGF0ZUxhc3QpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKHVwZGF0ZUxhc3QubGFzdCA9PSBwcmV2TGFzdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVwZGF0ZUxhc3QubGFzdCA9IGNoaWxkLmxhc3Q7XG5cdFx0XHRcdH1cblx0XHRcdFx0dXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3QucGFyZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmKGluZGV4ID09IDApXG5cdFx0e1xuXHRcdFx0cHJldmlvdXNPYmplY3QgPSB0aGlzO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0cHJldmlvdXNPYmplY3QgPSB0aGlzLmNoaWxkcmVuW2luZGV4LTFdLmxhc3Q7XG5cdFx0fVxuXHRcdFxuXHRcdG5leHRPYmplY3QgPSBwcmV2aW91c09iamVjdC5faU5leHQ7XG5cdFx0XG5cdFx0Ly8gYWx3YXlzIHRydWUgaW4gdGhpcyBjYXNlXG5cdFx0aWYobmV4dE9iamVjdClcblx0XHR7XG5cdFx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRcdGNoaWxkTGFzdC5faU5leHQgPSBuZXh0T2JqZWN0O1xuXHRcdH1cblx0XHRcblx0XHRjaGlsZEZpcnN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRcdHByZXZpb3VzT2JqZWN0Ll9pTmV4dCA9IGNoaWxkRmlyc3Q7XHRcdFxuXG5cdFx0dGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIGNoaWxkKTtcblx0XHQvLyBuZWVkIHRvIHJlbW92ZSBhbnkgcmVuZGVyIGdyb3Vwcy4uXG5cdFx0aWYodGhpcy5fX3JlbmRlckdyb3VwKVxuXHRcdHtcblx0XHRcdC8vIGJlaW5nIHVzZWQgYnkgYSByZW5kZXJUZXh0dXJlLi4gaWYgaXQgZXhpc3RzIHRoZW4gaXQgbXVzdCBiZSBmcm9tIGEgcmVuZGVyIHRleHR1cmU7XG5cdFx0XHRpZihjaGlsZC5fX3JlbmRlckdyb3VwKWNoaWxkLl9fcmVuZGVyR3JvdXAucmVtb3ZlRGlzcGxheU9iamVjdEFuZENoaWxkcmVuKGNoaWxkKTtcblx0XHRcdC8vIGFkZCB0aGVtIHRvIHRoZSBuZXcgcmVuZGVyIGdyb3VwLi5cblx0XHRcdHRoaXMuX19yZW5kZXJHcm91cC5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oY2hpbGQpO1xuXHRcdH1cblx0XHRcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBUaGUgaW5kZXggXCIrIGluZGV4ICtcIiBzdXBwbGllZCBpcyBvdXQgb2YgYm91bmRzIFwiICsgdGhpcy5jaGlsZHJlbi5sZW5ndGgpO1xuXHR9XG59XG5cbi8qKlxuICogW05ZSV0gU3dhcHMgdGhlIGRlcHRoIG9mIDIgZGlzcGxheU9iamVjdHNcbiAqXG4gKiBAbWV0aG9kIHN3YXBDaGlsZHJlblxuICogQHBhcmFtIGNoaWxkIHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIGNoaWxkMiB7RGlzcGxheU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUuc3dhcENoaWxkcmVuID0gZnVuY3Rpb24oY2hpbGQsIGNoaWxkMilcbntcblx0Lypcblx0ICogdGhpcyBmdW50aW9uIG5lZWRzIHRvIGJlIHJlY29kZWQuLiBcblx0ICogY2FuIGJlIGRvbmUgYSBsb3QgZmFzdGVyLi5cblx0ICovXG5cdHJldHVybjtcblx0XG5cdC8vIG5lZWQgdG8gZml4IHRoaXMgZnVuY3Rpb24gOi9cblx0Lypcblx0Ly8gVE9ETyBJIGFscmVhZHkga25vdyB0aGlzPz9cblx0dmFyIGluZGV4ID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKCBjaGlsZCApO1xuXHR2YXIgaW5kZXgyID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKCBjaGlsZDIgKTtcblx0XG5cdGlmICggaW5kZXggIT09IC0xICYmIGluZGV4MiAhPT0gLTEgKSBcblx0e1xuXHRcdC8vIGNvb2xcblx0XHRcblx0XHQvKlxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0Ly8gdGhpcyBpcyB0byBzYXRpc2Z5IHRoZSB3ZWJHTCBiYXRjaGluZy4uXG5cdFx0XHQvLyBUT0RPIHN1cmUgdGhlcmUgaXMgYSBuaWNlciB3YXkgdG8gYWNoaWV2ZSB0aGlzIVxuXHRcdFx0dGhpcy5zdGFnZS5fX3JlbW92ZUNoaWxkKGNoaWxkKTtcblx0XHRcdHRoaXMuc3RhZ2UuX19yZW1vdmVDaGlsZChjaGlsZDIpO1xuXHRcdFx0XG5cdFx0XHR0aGlzLnN0YWdlLl9fYWRkQ2hpbGQoY2hpbGQpO1xuXHRcdFx0dGhpcy5zdGFnZS5fX2FkZENoaWxkKGNoaWxkMik7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIHN3YXAgdGhlIHBvc2l0aW9ucy4uXG5cdFx0dGhpcy5jaGlsZHJlbltpbmRleF0gPSBjaGlsZDI7XG5cdFx0dGhpcy5jaGlsZHJlbltpbmRleDJdID0gY2hpbGQ7XG5cdFx0XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGNoaWxkICsgXCIgQm90aCB0aGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdHMgbXVzdCBiZSBhIGNoaWxkIG9mIHRoZSBjYWxsZXIgXCIgKyB0aGlzKTtcblx0fSovXG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgQ2hpbGQgYXQgdGhlIHNwZWNpZmllZCBpbmRleFxuICpcbiAqIEBtZXRob2QgZ2V0Q2hpbGRBdFxuICogQHBhcmFtIGluZGV4IHtOdW1iZXJ9IFRoZSBpbmRleCB0byBnZXQgdGhlIGNoaWxkIGZyb21cbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5nZXRDaGlsZEF0ID0gZnVuY3Rpb24oaW5kZXgpXG57XG5cdGlmKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmNoaWxkcmVuLmxlbmd0aClcblx0e1xuXHRcdHJldHVybiB0aGlzLmNoaWxkcmVuW2luZGV4XTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBCb3RoIHRoZSBzdXBwbGllZCBEaXNwbGF5T2JqZWN0cyBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlciBcIiArIHRoaXMpO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGNoaWxkIGZyb20gdGhlIGNvbnRhaW5lci5cbiAqXG4gKiBAbWV0aG9kIHJlbW92ZUNoaWxkXG4gKiBAcGFyYW0gY2hpbGQge0Rpc3BsYXlPYmplY3R9IFRoZSBEaXNwbGF5T2JqZWN0IHRvIHJlbW92ZVxuICovXG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24oY2hpbGQpXG57XG5cdHZhciBpbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZiggY2hpbGQgKTtcblx0aWYgKCBpbmRleCAhPT0gLTEgKSBcblx0e1xuXHRcdC8vIHVubGluayAvL1xuXHRcdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdFx0dmFyIGNoaWxkRmlyc3QgPSBjaGlsZC5maXJzdDtcblx0XHR2YXIgY2hpbGRMYXN0ID0gY2hpbGQubGFzdDtcblx0XHRcblx0XHR2YXIgbmV4dE9iamVjdCA9IGNoaWxkTGFzdC5faU5leHQ7XG5cdFx0dmFyIHByZXZpb3VzT2JqZWN0ID0gY2hpbGRGaXJzdC5faVByZXY7XG5cdFx0XHRcblx0XHRpZihuZXh0T2JqZWN0KW5leHRPYmplY3QuX2lQcmV2ID0gcHJldmlvdXNPYmplY3Q7XG5cdFx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcdFx0XG5cdFx0XG5cdFx0aWYodGhpcy5sYXN0ID09IGNoaWxkTGFzdClcblx0XHR7XG5cdFx0XHR2YXIgdGVtcExhc3QgPSAgY2hpbGRGaXJzdC5faVByZXY7XHRcblx0XHRcdC8vIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBwYXJlbnRzIGxhc3QgaXMgdXBkYXRlZCB0b29cblx0XHRcdHZhciB1cGRhdGVMYXN0ID0gdGhpcztcblx0XHRcdHdoaWxlKHVwZGF0ZUxhc3QubGFzdCA9PSBjaGlsZExhc3QubGFzdClcblx0XHRcdHtcblx0XHRcdFx0dXBkYXRlTGFzdC5sYXN0ID0gdGVtcExhc3Q7XG5cdFx0XHRcdHVwZGF0ZUxhc3QgPSB1cGRhdGVMYXN0LnBhcmVudDtcblx0XHRcdFx0aWYoIXVwZGF0ZUxhc3QpYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGNoaWxkTGFzdC5faU5leHQgPSBudWxsO1xuXHRcdGNoaWxkRmlyc3QuX2lQcmV2ID0gbnVsbDtcblx0XHQgXG5cdFx0Ly8gdXBkYXRlIHRoZSBzdGFnZSByZWZlcmVuY2UuLlxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIHRtcENoaWxkID0gY2hpbGQ7XG5cdFx0XHRkb1xuXHRcdFx0e1xuXHRcdFx0XHRpZih0bXBDaGlsZC5pbnRlcmFjdGl2ZSl0aGlzLnN0YWdlLmRpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0dG1wQ2hpbGQuc3RhZ2UgPSBudWxsO1xuXHRcdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHRcdH1cdFxuXHRcdFx0d2hpbGUodG1wQ2hpbGQpXG5cdFx0fVxuXHRcblx0XHQvLyB3ZWJHTCB0cmltXG5cdFx0aWYoY2hpbGQuX19yZW5kZXJHcm91cClcblx0XHR7XG5cdFx0XHRjaGlsZC5fX3JlbmRlckdyb3VwLnJlbW92ZURpc3BsYXlPYmplY3RBbmRDaGlsZHJlbihjaGlsZCk7XG5cdFx0fVxuXHRcdFxuXHRcdGNoaWxkLnBhcmVudCA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLmNoaWxkcmVuLnNwbGljZSggaW5kZXgsIDEgKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBUaGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdCBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlciBcIiArIHRoaXMpO1xuXHR9XG59XG5cbi8qXG4gKiBVcGRhdGVzIHRoZSBjb250YWluZXIncyBjaGlsZHJlbidzIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRpZighdGhpcy52aXNpYmxlKXJldHVybjtcblx0XG5cdFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwoIHRoaXMgKTtcblx0XG5cdGZvcih2YXIgaT0wLGo9dGhpcy5jaGlsZHJlbi5sZW5ndGg7IGk8ajsgaSsrKVxuXHR7XG5cdFx0dGhpcy5jaGlsZHJlbltpXS51cGRhdGVUcmFuc2Zvcm0oKTtcdFxuXHR9XG59XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblBJWEkuYmxlbmRNb2RlcyA9IHt9O1xuUElYSS5ibGVuZE1vZGVzLk5PUk1BTCA9IDA7XG5QSVhJLmJsZW5kTW9kZXMuU0NSRUVOID0gMTtcblxuXG4vKipcbiAqIFRoZSBTUHJpdGUgb2JqZWN0IGlzIHRoZSBiYXNlIGZvciBhbGwgdGV4dHVyZWQgb2JqZWN0cyB0aGF0IGFyZSByZW5kZXJlZCB0byB0aGUgc2NyZWVuXG4gKlxuICogQGNsYXNzIFNwcml0ZVxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdGV4dHVyZSB7VGV4dHVyZX0gVGhlIHRleHR1cmUgZm9yIHRoaXMgc3ByaXRlXG4gKiBAdHlwZSBTdHJpbmdcbiAqL1xuUElYSS5TcHJpdGUgPSBmdW5jdGlvbih0ZXh0dXJlKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIuY2FsbCggdGhpcyApO1xuXG5cdC8qKlxuXHQgKiBUaGUgYW5jaG9yIHNldHMgdGhlIG9yaWdpbiBwb2ludCBvZiB0aGUgdGV4dHVyZS5cblx0ICogVGhlIGRlZmF1bHQgaXMgMCwwIHRoaXMgbWVhbnMgdGhlIHRleHR1cmVzIG9yaWdpbiBpcyB0aGUgdG9wIGxlZnQgXG5cdCAqIFNldHRpbmcgdGhhbiBhbmNob3IgdG8gMC41LDAuNSBtZWFucyB0aGUgdGV4dHVyZXMgb3JpZ2luIGlzIGNlbnRlcmVkXG5cdCAqIFNldHRpbmcgdGhlIGFuY2hvciB0byAxLDEgd291bGQgbWVhbiB0aGUgdGV4dHVyZXMgb3JpZ2luIHBvaW50cyB3aWxsIGJlIHRoZSBib3R0b20gcmlnaHRcblx0ICpcbiAgICAgKiBAcHJvcGVydHkgYW5jaG9yXG4gICAgICogQHR5cGUgUG9pbnRcbiAgICAgKi9cblx0dGhpcy5hbmNob3IgPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdGV4dHVyZSB0aGF0IHRoZSBzcHJpdGUgaXMgdXNpbmdcblx0ICpcblx0ICogQHByb3BlcnR5IHRleHR1cmVcblx0ICogQHR5cGUgVGV4dHVyZVxuXHQgKi9cblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblxuXHQvKipcblx0ICogVGhlIGJsZW5kIG1vZGUgb2Ygc3ByaXRlLlxuXHQgKiBjdXJyZW50bHkgc3VwcG9ydHMgUElYSS5ibGVuZE1vZGVzLk5PUk1BTCBhbmQgUElYSS5ibGVuZE1vZGVzLlNDUkVFTlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmxlbmRNb2RlXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cblx0dGhpcy5ibGVuZE1vZGUgPSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMO1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHNwcml0ZSAodGhpcyBpcyBpbml0aWFsbHkgc2V0IGJ5IHRoZSB0ZXh0dXJlKVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgX3dpZHRoXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5fd2lkdGggPSAwO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSBzcHJpdGUgKHRoaXMgaXMgaW5pdGlhbGx5IHNldCBieSB0aGUgdGV4dHVyZSlcblx0ICpcblx0ICogQHByb3BlcnR5IF9oZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHR0aGlzLl9oZWlnaHQgPSAwO1xuXG5cdGlmKHRleHR1cmUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKVxuXHR7XG5cdFx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5vblRleHR1cmVVcGRhdGVCaW5kID0gdGhpcy5vblRleHR1cmVVcGRhdGUuYmluZCh0aGlzKTtcblx0XHR0aGlzLnRleHR1cmUuYWRkRXZlbnRMaXN0ZW5lciggJ3VwZGF0ZScsIHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCApO1xuXHR9XG5cblx0dGhpcy5yZW5kZXJhYmxlID0gdHJ1ZTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuU3ByaXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3ByaXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuU3ByaXRlO1xuXG4vKipcbiAqIFRoZSB3aWR0aCBvZiB0aGUgc3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGVpdmUgdGhlIHZhbHVlIHNldFxuICpcbiAqIEBwcm9wZXJ0eSB3aWR0aFxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLlNwcml0ZS5wcm90b3R5cGUsICd3aWR0aCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZS54ICogdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5zY2FsZS54ID0gdmFsdWUgLyB0aGlzLnRleHR1cmUuZnJhbWUud2lkdGhcbiAgICAgICAgdGhpcy5fd2lkdGggPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgaGVpZ2h0IG9mIHRoZSBzcHJpdGUsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgc2NhbGUgdG8gYWNoZWl2ZSB0aGUgdmFsdWUgc2V0XG4gKlxuICogQHByb3BlcnR5IGhlaWdodFxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLlNwcml0ZS5wcm90b3R5cGUsICdoZWlnaHQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICB0aGlzLnNjYWxlLnkgKiB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5zY2FsZS55ID0gdmFsdWUgLyB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNldHMgdGhlIHRleHR1cmUgb2YgdGhlIHNwcml0ZVxuICpcbiAqIEBtZXRob2Qgc2V0VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSBQSVhJIHRleHR1cmUgdGhhdCBpcyBkaXNwbGF5ZWQgYnkgdGhlIHNwcml0ZVxuICovXG5QSVhJLlNwcml0ZS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vIHN0b3AgY3VycmVudCB0ZXh0dXJlO1xuXHRpZih0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUgIT0gdGV4dHVyZS5iYXNlVGV4dHVyZSlcblx0e1xuXHRcdHRoaXMudGV4dHVyZUNoYW5nZSA9IHRydWU7XHRcblx0XHR0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXHRcdFxuXHRcdGlmKHRoaXMuX19yZW5kZXJHcm91cClcblx0XHR7XG5cdFx0XHR0aGlzLl9fcmVuZGVyR3JvdXAudXBkYXRlVGV4dHVyZSh0aGlzKTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0fVxuXHRcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIHNjYWxlIGFuZCBmcmFtZVxuICpcbiAqIEBtZXRob2Qgb25UZXh0dXJlVXBkYXRlXG4gKiBAcGFyYW0gZXZlbnRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3ByaXRlLnByb3RvdHlwZS5vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbihldmVudClcbntcblx0Ly90aGlzLnRleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3VwZGF0ZScsIHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCApO1xuXHRcblx0Ly8gc28gaWYgX3dpZHRoIGlzIDAgdGhlbiB3aWR0aCB3YXMgbm90IHNldC4uXG5cdGlmKHRoaXMuX3dpZHRoKXRoaXMuc2NhbGUueCA9IHRoaXMuX3dpZHRoIC8gdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuXHRpZih0aGlzLl9oZWlnaHQpdGhpcy5zY2FsZS55ID0gdGhpcy5faGVpZ2h0IC8gdGhpcy50ZXh0dXJlLmZyYW1lLmhlaWdodDtcblx0XG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xufVxuXG4vLyBzb21lIGhlbHBlciBmdW5jdGlvbnMuLlxuXG4vKipcbiAqIFxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIHNwcml0ZSB0aGF0IHdpbGwgY29udGFpbiBhIHRleHR1cmUgZnJvbSB0aGUgVGV4dHVyZUNhY2hlIGJhc2VkIG9uIHRoZSBmcmFtZUlkXG4gKiBUaGUgZnJhbWUgaWRzIGFyZSBjcmVhdGVkIHdoZW4gYSBUZXh0dXJlIHBhY2tlciBmaWxlIGhhcyBiZWVuIGxvYWRlZFxuICpcbiAqIEBtZXRob2QgZnJvbUZyYW1lXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0gZnJhbWVJZCB7U3RyaW5nfSBUaGUgZnJhbWUgSWQgb2YgdGhlIHRleHR1cmUgaW4gdGhlIGNhY2hlXG4gKiBAcmV0dXJuIHtTcHJpdGV9IEEgbmV3IFNwcml0ZSB1c2luZyBhIHRleHR1cmUgZnJvbSB0aGUgdGV4dHVyZSBjYWNoZSBtYXRjaGluZyB0aGUgZnJhbWVJZFxuICovXG5QSVhJLlNwcml0ZS5mcm9tRnJhbWUgPSBmdW5jdGlvbihmcmFtZUlkKVxue1xuXHR2YXIgdGV4dHVyZSA9IFBJWEkuVGV4dHVyZUNhY2hlW2ZyYW1lSWRdO1xuXHRpZighdGV4dHVyZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZnJhbWVJZCAnXCIrIGZyYW1lSWQgK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgdGV4dHVyZSBjYWNoZVwiICsgdGhpcyk7XG5cdHJldHVybiBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG59XG5cbi8qKlxuICogXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgc3ByaXRlIHRoYXQgd2lsbCBjb250YWluIGEgdGV4dHVyZSBiYXNlZCBvbiBhbiBpbWFnZSB1cmxcbiAqIElmIHRoZSBpbWFnZSBpcyBub3QgaW4gdGhlIHRleHR1cmUgY2FjaGUgaXQgd2lsbCBiZSBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIGZyb21JbWFnZVxuICogQHN0YXRpY1xuICogQHBhcmFtIGltYWdlSWQge1N0cmluZ30gVGhlIGltYWdlIHVybCBvZiB0aGUgdGV4dHVyZVxuICogQHJldHVybiB7U3ByaXRlfSBBIG5ldyBTcHJpdGUgdXNpbmcgYSB0ZXh0dXJlIGZyb20gdGhlIHRleHR1cmUgY2FjaGUgbWF0Y2hpbmcgdGhlIGltYWdlIGlkXG4gKi9cblBJWEkuU3ByaXRlLmZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlSWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb21JbWFnZShpbWFnZUlkKTtcblx0cmV0dXJuIG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIEEgTW92aWVDbGlwIGlzIGEgc2ltcGxlIHdheSB0byBkaXNwbGF5IGFuIGFuaW1hdGlvbiBkZXBpY3RlZCBieSBhIGxpc3Qgb2YgdGV4dHVyZXMuXG4gKlxuICogQGNsYXNzIE1vdmllQ2xpcFxuICogQGV4dGVuZHMgU3ByaXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB0ZXh0dXJlcyB7QXJyYXk8VGV4dHVyZT59IGFuIGFycmF5IG9mIHtUZXh0dXJlfSBvYmplY3RzIHRoYXQgbWFrZSB1cCB0aGUgYW5pbWF0aW9uXG4gKi9cblBJWEkuTW92aWVDbGlwID0gZnVuY3Rpb24odGV4dHVyZXMpXG57XG5cdFBJWEkuU3ByaXRlLmNhbGwodGhpcywgdGV4dHVyZXNbMF0pO1xuXG5cdC8qKlxuXHQgKiBUaGUgYXJyYXkgb2YgdGV4dHVyZXMgdGhhdCBtYWtlIHVwIHRoZSBhbmltYXRpb25cblx0ICpcblx0ICogQHByb3BlcnR5IHRleHR1cmVzXG5cdCAqIEB0eXBlIEFycmF5XG5cdCAqL1xuXHR0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG5cblx0LyoqXG5cdCAqIFRoZSBzcGVlZCB0aGF0IHRoZSBNb3ZpZUNsaXAgd2lsbCBwbGF5IGF0LiBIaWdoZXIgaXMgZmFzdGVyLCBsb3dlciBpcyBzbG93ZXJcblx0ICpcblx0ICogQHByb3BlcnR5IGFuaW1hdGlvblNwZWVkXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAxXG5cdCAqL1xuXHR0aGlzLmFuaW1hdGlvblNwZWVkID0gMTtcblxuXHQvKipcblx0ICogV2hldGhlciBvciBub3QgdGhlIG1vdmllIGNsaXAgcmVwZWF0cyBhZnRlciBwbGF5aW5nLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbG9vcFxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqIEBkZWZhdWx0IHRydWVcblx0ICovXG5cdHRoaXMubG9vcCA9IHRydWU7XG5cblx0LyoqXG5cdCAqIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIE1vdmllQ2xpcCBmaW5pc2hlcyBwbGF5aW5nXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBvbkNvbXBsZXRlXG5cdCAqIEB0eXBlIEZ1bmN0aW9uXG5cdCAqL1xuXHR0aGlzLm9uQ29tcGxldGUgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBbcmVhZC1vbmx5XSBUaGUgaW5kZXggTW92aWVDbGlwcyBjdXJyZW50IGZyYW1lICh0aGlzIG1heSBub3QgaGF2ZSB0byBiZSBhIHdob2xlIG51bWJlcilcblx0ICpcblx0ICogQHByb3BlcnR5IGN1cnJlbnRGcmFtZVxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgMFxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuY3VycmVudEZyYW1lID0gMDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gSW5kaWNhdGVzIGlmIHRoZSBNb3ZpZUNsaXAgaXMgY3VycmVudGx5IHBsYXlpbmdcblx0ICpcblx0ICogQHByb3BlcnR5IHBsYXlpbmdcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5TcHJpdGUucHJvdG90eXBlICk7XG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLk1vdmllQ2xpcDtcblxuLyoqXG4qIFtyZWFkLW9ubHldIHRvdGFsRnJhbWVzIGlzIHRoZSB0b3RhbCBudW1iZXIgb2YgZnJhbWVzIGluIHRoZSBNb3ZpZUNsaXAuIFRoaXMgaXMgdGhlIHNhbWUgYXMgbnVtYmVyIG9mIHRleHR1cmVzXG4qIGFzc2lnbmVkIHRvIHRoZSBNb3ZpZUNsaXAuXG4qXG4qIEBwcm9wZXJ0eSB0b3RhbEZyYW1lc1xuKiBAdHlwZSBOdW1iZXJcbiogQGRlZmF1bHQgMFxuKiBAcmVhZE9ubHlcbiovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoIFBJWEkuTW92aWVDbGlwLnByb3RvdHlwZSwgJ3RvdGFsRnJhbWVzJywge1xuXHRnZXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHRoaXMudGV4dHVyZXMubGVuZ3RoO1xuXHR9XG59KTtcblxuXG4vKipcbiAqIFN0b3BzIHRoZSBNb3ZpZUNsaXBcbiAqXG4gKiBAbWV0aG9kIHN0b3BcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFBsYXlzIHRoZSBNb3ZpZUNsaXBcbiAqXG4gKiBAbWV0aG9kIHBsYXlcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMucGxheWluZyA9IHRydWU7XG59XG5cbi8qKlxuICogU3RvcHMgdGhlIE1vdmllQ2xpcCBhbmQgZ29lcyB0byBhIHNwZWNpZmljIGZyYW1lXG4gKlxuICogQG1ldGhvZCBnb3RvQW5kU3RvcFxuICogQHBhcmFtIGZyYW1lTnVtYmVyIHtOdW1iZXJ9IGZyYW1lIGluZGV4IHRvIHN0b3AgYXRcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLmdvdG9BbmRTdG9wID0gZnVuY3Rpb24oZnJhbWVOdW1iZXIpXG57XG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xuXHR0aGlzLmN1cnJlbnRGcmFtZSA9IGZyYW1lTnVtYmVyO1xuXHR2YXIgcm91bmQgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAwLjUpIHwgMDtcblx0dGhpcy5zZXRUZXh0dXJlKHRoaXMudGV4dHVyZXNbcm91bmQgJSB0aGlzLnRleHR1cmVzLmxlbmd0aF0pO1xufVxuXG4vKipcbiAqIEdvZXMgdG8gYSBzcGVjaWZpYyBmcmFtZSBhbmQgYmVnaW5zIHBsYXlpbmcgdGhlIE1vdmllQ2xpcFxuICpcbiAqIEBtZXRob2QgZ290b0FuZFBsYXlcbiAqIEBwYXJhbSBmcmFtZU51bWJlciB7TnVtYmVyfSBmcmFtZSBpbmRleCB0byBzdGFydCBhdFxuICovXG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUuZ290b0FuZFBsYXkgPSBmdW5jdGlvbihmcmFtZU51bWJlcilcbntcblx0dGhpcy5jdXJyZW50RnJhbWUgPSBmcmFtZU51bWJlcjtcblx0dGhpcy5wbGF5aW5nID0gdHJ1ZTtcbn1cblxuLypcbiAqIFVwZGF0ZXMgdGhlIG9iamVjdCB0cmFuc2Zvcm0gZm9yIHJlbmRlcmluZ1xuICpcbiAqIEBtZXRob2QgdXBkYXRlVHJhbnNmb3JtXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLlNwcml0ZS5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG5cblx0aWYoIXRoaXMucGxheWluZylyZXR1cm47XG5cblx0dGhpcy5jdXJyZW50RnJhbWUgKz0gdGhpcy5hbmltYXRpb25TcGVlZDtcblxuXHR2YXIgcm91bmQgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAwLjUpIHwgMDtcblxuXHRpZih0aGlzLmxvb3AgfHwgcm91bmQgPCB0aGlzLnRleHR1cmVzLmxlbmd0aClcblx0e1xuXHRcdHRoaXMuc2V0VGV4dHVyZSh0aGlzLnRleHR1cmVzW3JvdW5kICUgdGhpcy50ZXh0dXJlcy5sZW5ndGhdKTtcblx0fVxuXHRlbHNlIGlmKHJvdW5kID49IHRoaXMudGV4dHVyZXMubGVuZ3RoKVxuXHR7XG5cdFx0dGhpcy5nb3RvQW5kU3RvcCh0aGlzLnRleHR1cmVzLmxlbmd0aCAtIDEpO1xuXHRcdGlmKHRoaXMub25Db21wbGV0ZSlcblx0XHR7XG5cdFx0XHR0aGlzLm9uQ29tcGxldGUoKTtcblx0XHR9XG5cdH1cbn1cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuRmlsdGVyQmxvY2sgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG59XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBUZXh0IE9iamVjdCB3aWxsIGNyZWF0ZSBhIGxpbmUocykgb2YgdGV4dCB0byBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgXCJcXG5cIlxuICpcbiAqIEBjbGFzcyBUZXh0XG4gKiBAZXh0ZW5kcyBTcHJpdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHRleHQge1N0cmluZ30gVGhlIGNvcHkgdGhhdCB5b3Ugd291bGQgbGlrZSB0aGUgdGV4dCB0byBkaXNwbGF5XG4gKiBAcGFyYW0gW3N0eWxlXSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIFtzdHlsZS5mb250XSB7U3RyaW5nfSBkZWZhdWx0IFwiYm9sZCAyMHB0IEFyaWFsXCIgVGhlIHN0eWxlIGFuZCBzaXplIG9mIHRoZSBmb250XG4gKiBAcGFyYW0gW3N0eWxlLmZpbGw9XCJibGFja1wiXSB7T2JqZWN0fSBBIGNhbnZhcyBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgZWcgXCJyZWRcIiwgXCIjMDBGRjAwXCJcbiAqIEBwYXJhbSBbc3R5bGUuYWxpZ249XCJsZWZ0XCJdIHtTdHJpbmd9IEFuIGFsaWdubWVudCBvZiB0aGUgbXVsdGlsaW5lIHRleHQgKFwibGVmdFwiLCBcImNlbnRlclwiIG9yIFwicmlnaHRcIilcbiAqIEBwYXJhbSBbc3R5bGUuc3Ryb2tlXSB7U3RyaW5nfSBBIGNhbnZhcyBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgc3Ryb2tlIGVnIFwiYmx1ZVwiLCBcIiNGQ0ZGMDBcIlxuICogQHBhcmFtIFtzdHlsZS5zdHJva2VUaGlja25lc3M9MF0ge051bWJlcn0gQSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSB0aGlja25lc3Mgb2YgdGhlIHN0cm9rZS4gRGVmYXVsdCBpcyAwIChubyBzdHJva2UpXG4gKiBAcGFyYW0gW3N0eWxlLndvcmRXcmFwPWZhbHNlXSB7Qm9vbGVhbn0gSW5kaWNhdGVzIGlmIHdvcmQgd3JhcCBzaG91bGQgYmUgdXNlZFxuICogQHBhcmFtIFtzdHlsZS53b3JkV3JhcFdpZHRoPTEwMF0ge051bWJlcn0gVGhlIHdpZHRoIGF0IHdoaWNoIHRleHQgd2lsbCB3cmFwXG4gKi9cblBJWEkuVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHN0eWxlKVxue1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgUElYSS5TcHJpdGUuY2FsbCh0aGlzLCBQSVhJLlRleHR1cmUuZnJvbUNhbnZhcyh0aGlzLmNhbnZhcykpO1xuXG4gICAgdGhpcy5zZXRUZXh0KHRleHQpO1xuICAgIHRoaXMuc2V0U3R5bGUoc3R5bGUpO1xuXG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xufTtcblxuLy8gY29uc3RydWN0b3JcblBJWEkuVGV4dC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBJWEkuU3ByaXRlLnByb3RvdHlwZSk7XG5QSVhJLlRleHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5UZXh0O1xuXG4vKipcbiAqIFNldCB0aGUgc3R5bGUgb2YgdGhlIHRleHRcbiAqXG4gKiBAbWV0aG9kIHNldFN0eWxlXG4gKiBAcGFyYW0gW3N0eWxlXSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIFtzdHlsZS5mb250PVwiYm9sZCAyMHB0IEFyaWFsXCJdIHtTdHJpbmd9IFRoZSBzdHlsZSBhbmQgc2l6ZSBvZiB0aGUgZm9udFxuICogQHBhcmFtIFtzdHlsZS5maWxsPVwiYmxhY2tcIl0ge09iamVjdH0gQSBjYW52YXMgZmlsbHN0eWxlIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSB0ZXh0IGVnIFwicmVkXCIsIFwiIzAwRkYwMFwiXG4gKiBAcGFyYW0gW3N0eWxlLmFsaWduPVwibGVmdFwiXSB7U3RyaW5nfSBBbiBhbGlnbm1lbnQgb2YgdGhlIG11bHRpbGluZSB0ZXh0IChcImxlZnRcIiwgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIpXG4gKiBAcGFyYW0gW3N0eWxlLnN0cm9rZT1cImJsYWNrXCJdIHtTdHJpbmd9IEEgY2FudmFzIGZpbGxzdHlsZSB0aGF0IHdpbGwgYmUgdXNlZCBvbiB0aGUgdGV4dCBzdHJva2UgZWcgXCJibHVlXCIsIFwiI0ZDRkYwMFwiXG4gKiBAcGFyYW0gW3N0eWxlLnN0cm9rZVRoaWNrbmVzcz0wXSB7TnVtYmVyfSBBIG51bWJlciB0aGF0IHJlcHJlc2VudHMgdGhlIHRoaWNrbmVzcyBvZiB0aGUgc3Ryb2tlLiBEZWZhdWx0IGlzIDAgKG5vIHN0cm9rZSlcbiAqIEBwYXJhbSBbc3R5bGUud29yZFdyYXA9ZmFsc2VdIHtCb29sZWFufSBJbmRpY2F0ZXMgaWYgd29yZCB3cmFwIHNob3VsZCBiZSB1c2VkXG4gKiBAcGFyYW0gW3N0eWxlLndvcmRXcmFwV2lkdGg9MTAwXSB7TnVtYmVyfSBUaGUgd2lkdGggYXQgd2hpY2ggdGV4dCB3aWxsIHdyYXBcbiAqL1xuUElYSS5UZXh0LnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlKVxue1xuICAgIHN0eWxlID0gc3R5bGUgfHwge307XG4gICAgc3R5bGUuZm9udCA9IHN0eWxlLmZvbnQgfHwgXCJib2xkIDIwcHQgQXJpYWxcIjtcbiAgICBzdHlsZS5maWxsID0gc3R5bGUuZmlsbCB8fCBcImJsYWNrXCI7XG4gICAgc3R5bGUuYWxpZ24gPSBzdHlsZS5hbGlnbiB8fCBcImxlZnRcIjtcbiAgICBzdHlsZS5zdHJva2UgPSBzdHlsZS5zdHJva2UgfHwgXCJibGFja1wiOyAvL3Byb3ZpZGUgYSBkZWZhdWx0LCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29kQm95RGlnaXRhbC9waXhpLmpzL2lzc3Vlcy8xMzZcbiAgICBzdHlsZS5zdHJva2VUaGlja25lc3MgPSBzdHlsZS5zdHJva2VUaGlja25lc3MgfHwgMDtcbiAgICBzdHlsZS53b3JkV3JhcCA9IHN0eWxlLndvcmRXcmFwIHx8IGZhbHNlO1xuICAgIHN0eWxlLndvcmRXcmFwV2lkdGggPSBzdHlsZS53b3JkV3JhcFdpZHRoIHx8IDEwMDtcbiAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29weSBmb3IgdGhlIHRleHQgb2JqZWN0LiBUbyBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgXCJcXG5cIlxuICpcbiAqIEBtZXRob3Mgc2V0VGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIGNvcHkgdGhhdCB5b3Ugd291bGQgbGlrZSB0aGUgdGV4dCB0byBkaXNwbGF5XG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uKHRleHQpXG57XG4gICAgdGhpcy50ZXh0ID0gdGV4dC50b1N0cmluZygpIHx8IFwiIFwiO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIHRleHRcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dCA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5jb250ZXh0LmZvbnQgPSB0aGlzLnN0eWxlLmZvbnQ7XG5cblx0dmFyIG91dHB1dFRleHQgPSB0aGlzLnRleHQ7XG5cblx0Ly8gd29yZCB3cmFwXG5cdC8vIHByZXNlcnZlIG9yaWdpbmFsIHRleHRcblx0aWYodGhpcy5zdHlsZS53b3JkV3JhcClvdXRwdXRUZXh0ID0gdGhpcy53b3JkV3JhcCh0aGlzLnRleHQpO1xuXG5cdC8vc3BsaXQgdGV4dCBpbnRvIGxpbmVzXG5cdHZhciBsaW5lcyA9IG91dHB1dFRleHQuc3BsaXQoLyg/OlxcclxcbnxcXHJ8XFxuKS8pO1xuXG5cdC8vY2FsY3VsYXRlIHRleHQgd2lkdGhcblx0dmFyIGxpbmVXaWR0aHMgPSBbXTtcblx0dmFyIG1heExpbmVXaWR0aCA9IDA7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgbGluZVdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KGxpbmVzW2ldKS53aWR0aDtcblx0XHRsaW5lV2lkdGhzW2ldID0gbGluZVdpZHRoO1xuXHRcdG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgbGluZVdpZHRoKTtcblx0fVxuXHR0aGlzLmNhbnZhcy53aWR0aCA9IG1heExpbmVXaWR0aCArIHRoaXMuc3R5bGUuc3Ryb2tlVGhpY2tuZXNzO1xuXG5cdC8vY2FsY3VsYXRlIHRleHQgaGVpZ2h0XG5cdHZhciBsaW5lSGVpZ2h0ID0gdGhpcy5kZXRlcm1pbmVGb250SGVpZ2h0KFwiZm9udDogXCIgKyB0aGlzLnN0eWxlLmZvbnQgICsgXCI7XCIpICsgdGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3M7XG5cdHRoaXMuY2FudmFzLmhlaWdodCA9IGxpbmVIZWlnaHQgKiBsaW5lcy5sZW5ndGg7XG5cblx0Ly9zZXQgY2FudmFzIHRleHQgc3R5bGVzXG5cdHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlLmZpbGw7XG5cdHRoaXMuY29udGV4dC5mb250ID0gdGhpcy5zdHlsZS5mb250O1xuXG5cdHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMuc3R5bGUuc3Ryb2tlO1xuXHR0aGlzLmNvbnRleHQubGluZVdpZHRoID0gdGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3M7XG5cblx0dGhpcy5jb250ZXh0LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG5cblx0Ly9kcmF3IGxpbmVzIGxpbmUgYnkgbGluZVxuXHRmb3IgKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgbGluZVBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQodGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3MgLyAyLCB0aGlzLnN0eWxlLnN0cm9rZVRoaWNrbmVzcyAvIDIgKyBpICogbGluZUhlaWdodCk7XG5cblx0XHRpZih0aGlzLnN0eWxlLmFsaWduID09IFwicmlnaHRcIilcblx0XHR7XG5cdFx0XHRsaW5lUG9zaXRpb24ueCArPSBtYXhMaW5lV2lkdGggLSBsaW5lV2lkdGhzW2ldO1xuXHRcdH1cblx0XHRlbHNlIGlmKHRoaXMuc3R5bGUuYWxpZ24gPT0gXCJjZW50ZXJcIilcblx0XHR7XG5cdFx0XHRsaW5lUG9zaXRpb24ueCArPSAobWF4TGluZVdpZHRoIC0gbGluZVdpZHRoc1tpXSkgLyAyO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuc3R5bGUuc3Ryb2tlICYmIHRoaXMuc3R5bGUuc3Ryb2tlVGhpY2tuZXNzKVxuXHRcdHtcblx0XHRcdHRoaXMuY29udGV4dC5zdHJva2VUZXh0KGxpbmVzW2ldLCBsaW5lUG9zaXRpb24ueCwgbGluZVBvc2l0aW9uLnkpO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuc3R5bGUuZmlsbClcblx0XHR7XG5cdFx0XHR0aGlzLmNvbnRleHQuZmlsbFRleHQobGluZXNbaV0sIGxpbmVQb3NpdGlvbi54LCBsaW5lUG9zaXRpb24ueSk7XG5cdFx0fVxuXHR9XG5cbiAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0ZXh0dXJlIHNpemUgYmFzZWQgb24gY2FudmFzIHNpemVcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHR1cmVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uKClcbntcbiAgICB0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICB0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xuICAgIHRoaXMudGV4dHVyZS5mcmFtZS53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMudGV4dHVyZS5mcmFtZS5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG5cbiAgXHR0aGlzLl93aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcblxuICAgIFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHRoaXMudGV4dHVyZS5iYXNlVGV4dHVyZSk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIHRyYW5zZm9yIG9mIHRoaXMgb2JqZWN0XG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRpZih0aGlzLmRpcnR5KVxuXHR7XG5cdFx0dGhpcy51cGRhdGVUZXh0KCk7XG5cdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0UElYSS5TcHJpdGUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybS5jYWxsKHRoaXMpO1xufTtcblxuLypcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8zNDQ0MS9lbGxpc2JiZW5cbiAqIGdyZWF0IHNvbHV0aW9uIHRvIHRoZSBwcm9ibGVtIVxuICpcbiAqIEBtZXRob2QgZGV0ZXJtaW5lRm9udEhlaWdodFxuICogQHBhcmFtIGZvbnRTdHlsZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5UZXh0LnByb3RvdHlwZS5kZXRlcm1pbmVGb250SGVpZ2h0ID0gZnVuY3Rpb24oZm9udFN0eWxlKVxue1xuXHQvLyBidWlsZCBhIGxpdHRsZSByZWZlcmVuY2UgZGljdGlvbmFyeSBzbyBpZiB0aGUgZm9udCBzdHlsZSBoYXMgYmVlbiB1c2VkIHJldHVybiBhXG5cdC8vIGNhY2hlZCB2ZXJzaW9uLi4uXG5cdHZhciByZXN1bHQgPSBQSVhJLlRleHQuaGVpZ2h0Q2FjaGVbZm9udFN0eWxlXTtcblxuXHRpZighcmVzdWx0KVxuXHR7XG5cdFx0dmFyIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XG5cdFx0dmFyIGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR2YXIgZHVtbXlUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJNXCIpO1xuXHRcdGR1bW15LmFwcGVuZENoaWxkKGR1bW15VGV4dCk7XG5cdFx0ZHVtbXkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgZm9udFN0eWxlICsgJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjAnKTtcblx0XHRib2R5LmFwcGVuZENoaWxkKGR1bW15KTtcblxuXHRcdHJlc3VsdCA9IGR1bW15Lm9mZnNldEhlaWdodDtcblx0XHRQSVhJLlRleHQuaGVpZ2h0Q2FjaGVbZm9udFN0eWxlXSA9IHJlc3VsdDtcblxuXHRcdGJvZHkucmVtb3ZlQ2hpbGQoZHVtbXkpO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogQXBwbGllcyBuZXdsaW5lcyB0byBhIHN0cmluZyB0byBoYXZlIGl0IG9wdGltYWxseSBmaXQgaW50byB0aGUgaG9yaXpvbnRhbFxuICogYm91bmRzIHNldCBieSB0aGUgVGV4dCBvYmplY3QncyB3b3JkV3JhcFdpZHRoIHByb3BlcnR5LlxuICpcbiAqIEBtZXRob2Qgd29yZFdyYXBcbiAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlRleHQucHJvdG90eXBlLndvcmRXcmFwID0gZnVuY3Rpb24odGV4dClcbntcblx0Ly8gR3JlZWR5IHdyYXBwaW5nIGFsZ29yaXRobSB0aGF0IHdpbGwgd3JhcCB3b3JkcyBhcyB0aGUgbGluZSBncm93cyBsb25nZXJcblx0Ly8gdGhhbiBpdHMgaG9yaXpvbnRhbCBib3VuZHMuXG5cdHZhciByZXN1bHQgPSBcIlwiO1xuXHR2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIHNwYWNlTGVmdCA9IHRoaXMuc3R5bGUud29yZFdyYXBXaWR0aDtcblx0XHR2YXIgd29yZHMgPSBsaW5lc1tpXS5zcGxpdChcIiBcIik7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB3b3Jkcy5sZW5ndGg7IGorKylcblx0XHR7XG5cdFx0XHR2YXIgd29yZFdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHdvcmRzW2pdKS53aWR0aDtcblx0XHRcdHZhciB3b3JkV2lkdGhXaXRoU3BhY2UgPSB3b3JkV2lkdGggKyB0aGlzLmNvbnRleHQubWVhc3VyZVRleHQoXCIgXCIpLndpZHRoO1xuXHRcdFx0aWYod29yZFdpZHRoV2l0aFNwYWNlID4gc3BhY2VMZWZ0KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBTa2lwIHByaW50aW5nIHRoZSBuZXdsaW5lIGlmIGl0J3MgdGhlIGZpcnN0IHdvcmQgb2YgdGhlIGxpbmUgdGhhdCBpc1xuXHRcdFx0XHQvLyBncmVhdGVyIHRoYW4gdGhlIHdvcmQgd3JhcCB3aWR0aC5cblx0XHRcdFx0aWYoaiA+IDApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXN1bHQgKz0gXCJcXG5cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXN1bHQgKz0gd29yZHNbal0gKyBcIiBcIjtcblx0XHRcdFx0c3BhY2VMZWZ0ID0gdGhpcy5zdHlsZS53b3JkV3JhcFdpZHRoIC0gd29yZFdpZHRoO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRzcGFjZUxlZnQgLT0gd29yZFdpZHRoV2l0aFNwYWNlO1xuXHRcdFx0XHRyZXN1bHQgKz0gd29yZHNbal0gKyBcIiBcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzdWx0ICs9IFwiXFxuXCI7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhpcyB0ZXh0IG9iamVjdFxuICpcbiAqIEBtZXRob2QgZGVzdHJveVxuICogQHBhcmFtIGRlc3Ryb3lUZXh0dXJlIHtCb29sZWFufVxuICovXG5QSVhJLlRleHQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkZXN0cm95VGV4dHVyZSlcbntcblx0aWYoZGVzdHJveVRleHR1cmUpXG5cdHtcblx0XHR0aGlzLnRleHR1cmUuZGVzdHJveSgpO1xuXHR9XG5cbn07XG5cblBJWEkuVGV4dC5oZWlnaHRDYWNoZSA9IHt9O1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBUZXh0IE9iamVjdCB3aWxsIGNyZWF0ZSBhIGxpbmUocykgb2YgdGV4dCB1c2luZyBiaXRtYXAgZm9udC4gVG8gc3BsaXQgYSBsaW5lIHlvdSBjYW4gdXNlIFwiXFxuXCIsIFwiXFxyXCIgb3IgXCJcXHJcXG5cIlxuICogWW91IGNhbiBnZW5lcmF0ZSB0aGUgZm50IGZpbGVzIHVzaW5nXG4gKiBodHRwOi8vd3d3LmFuZ2VsY29kZS5jb20vcHJvZHVjdHMvYm1mb250LyBmb3Igd2luZG93cyBvclxuICogaHR0cDovL3d3dy5ibWdseXBoLmNvbS8gZm9yIG1hYy5cbiAqXG4gKiBAY2xhc3MgQml0bWFwVGV4dFxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdGV4dCB7U3RyaW5nfSBUaGUgY29weSB0aGF0IHlvdSB3b3VsZCBsaWtlIHRoZSB0ZXh0IHRvIGRpc3BsYXlcbiAqIEBwYXJhbSBzdHlsZSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIHN0eWxlLmZvbnQge1N0cmluZ30gVGhlIHNpemUgKG9wdGlvbmFsKSBhbmQgYml0bWFwIGZvbnQgaWQgKHJlcXVpcmVkKSBlcSBcIkFyaWFsXCIgb3IgXCIyMHB4IEFyaWFsXCIgKG11c3QgaGF2ZSBsb2FkZWQgcHJldmlvdXNseSlcbiAqIEBwYXJhbSBbc3R5bGUuYWxpZ249XCJsZWZ0XCJdIHtTdHJpbmd9IEFuIGFsaWdubWVudCBvZiB0aGUgbXVsdGlsaW5lIHRleHQgKFwibGVmdFwiLCBcImNlbnRlclwiIG9yIFwicmlnaHRcIilcbiAqL1xuUElYSS5CaXRtYXBUZXh0ID0gZnVuY3Rpb24odGV4dCwgc3R5bGUpXG57XG4gICAgUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnNldFRleHQodGV4dCk7XG4gICAgdGhpcy5zZXRTdHlsZShzdHlsZSk7XG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlXG5cbn07XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkJpdG1hcFRleHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlKTtcblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkJpdG1hcFRleHQ7XG5cbi8qKlxuICogU2V0IHRoZSBjb3B5IGZvciB0aGUgdGV4dCBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHNldFRleHRcbiAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9IFRoZSBjb3B5IHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIHRleHQgdG8gZGlzcGxheVxuICovXG5QSVhJLkJpdG1hcFRleHQucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbih0ZXh0KVxue1xuICAgIHRoaXMudGV4dCA9IHRleHQgfHwgXCIgXCI7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgc3R5bGUgb2YgdGhlIHRleHRcbiAqXG4gKiBAbWV0aG9kIHNldFN0eWxlXG4gKiBAcGFyYW0gc3R5bGUge09iamVjdH0gVGhlIHN0eWxlIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSBzdHlsZS5mb250IHtTdHJpbmd9IFRoZSBzaXplIChvcHRpb25hbCkgYW5kIGJpdG1hcCBmb250IGlkIChyZXF1aXJlZCkgZXEgXCJBcmlhbFwiIG9yIFwiMjBweCBBcmlhbFwiIChtdXN0IGhhdmUgbG9hZGVkIHByZXZpb3VzbHkpXG4gKiBAcGFyYW0gW3N0eWxlLmFsaWduPVwibGVmdFwiXSB7U3RyaW5nfSBBbiBhbGlnbm1lbnQgb2YgdGhlIG11bHRpbGluZSB0ZXh0IChcImxlZnRcIiwgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIpXG4gKi9cblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbihzdHlsZSlcbntcbiAgICBzdHlsZSA9IHN0eWxlIHx8IHt9O1xuICAgIHN0eWxlLmFsaWduID0gc3R5bGUuYWxpZ24gfHwgXCJsZWZ0XCI7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuXG4gICAgdmFyIGZvbnQgPSBzdHlsZS5mb250LnNwbGl0KFwiIFwiKTtcbiAgICB0aGlzLmZvbnROYW1lID0gZm9udFtmb250Lmxlbmd0aCAtIDFdO1xuICAgIHRoaXMuZm9udFNpemUgPSBmb250Lmxlbmd0aCA+PSAyID8gcGFyc2VJbnQoZm9udFtmb250Lmxlbmd0aCAtIDJdLCAxMCkgOiBQSVhJLkJpdG1hcFRleHQuZm9udHNbdGhpcy5mb250TmFtZV0uc2l6ZTtcblxuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIHRleHRcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dCA9IGZ1bmN0aW9uKClcbntcbiAgICB2YXIgZGF0YSA9IFBJWEkuQml0bWFwVGV4dC5mb250c1t0aGlzLmZvbnROYW1lXTtcbiAgICB2YXIgcG9zID0gbmV3IFBJWEkuUG9pbnQoKTtcbiAgICB2YXIgcHJldkNoYXJDb2RlID0gbnVsbDtcbiAgICB2YXIgY2hhcnMgPSBbXTtcbiAgICB2YXIgbWF4TGluZVdpZHRoID0gMDtcbiAgICB2YXIgbGluZVdpZHRocyA9IFtdO1xuICAgIHZhciBsaW5lID0gMDtcbiAgICB2YXIgc2NhbGUgPSB0aGlzLmZvbnRTaXplIC8gZGF0YS5zaXplO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRleHQubGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgICB2YXIgY2hhckNvZGUgPSB0aGlzLnRleHQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYoLyg/OlxcclxcbnxcXHJ8XFxuKS8udGVzdCh0aGlzLnRleHQuY2hhckF0KGkpKSlcbiAgICAgICAge1xuICAgICAgICAgICAgbGluZVdpZHRocy5wdXNoKHBvcy54KTtcbiAgICAgICAgICAgIG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgcG9zLngpO1xuICAgICAgICAgICAgbGluZSsrO1xuXG4gICAgICAgICAgICBwb3MueCA9IDA7XG4gICAgICAgICAgICBwb3MueSArPSBkYXRhLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBwcmV2Q2hhckNvZGUgPSBudWxsO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hhckRhdGEgPSBkYXRhLmNoYXJzW2NoYXJDb2RlXTtcbiAgICAgICAgaWYoIWNoYXJEYXRhKSBjb250aW51ZTtcblxuICAgICAgICBpZihwcmV2Q2hhckNvZGUgJiYgY2hhckRhdGFbcHJldkNoYXJDb2RlXSlcbiAgICAgICAge1xuICAgICAgICAgICBwb3MueCArPSBjaGFyRGF0YS5rZXJuaW5nW3ByZXZDaGFyQ29kZV07XG4gICAgICAgIH1cbiAgICAgICAgY2hhcnMucHVzaCh7dGV4dHVyZTpjaGFyRGF0YS50ZXh0dXJlLCBsaW5lOiBsaW5lLCBjaGFyQ29kZTogY2hhckNvZGUsIHBvc2l0aW9uOiBuZXcgUElYSS5Qb2ludChwb3MueCArIGNoYXJEYXRhLnhPZmZzZXQsIHBvcy55ICsgY2hhckRhdGEueU9mZnNldCl9KTtcbiAgICAgICAgcG9zLnggKz0gY2hhckRhdGEueEFkdmFuY2U7XG5cbiAgICAgICAgcHJldkNoYXJDb2RlID0gY2hhckNvZGU7XG4gICAgfVxuXG4gICAgbGluZVdpZHRocy5wdXNoKHBvcy54KTtcbiAgICBtYXhMaW5lV2lkdGggPSBNYXRoLm1heChtYXhMaW5lV2lkdGgsIHBvcy54KTtcblxuICAgIHZhciBsaW5lQWxpZ25PZmZzZXRzID0gW107XG4gICAgZm9yKGkgPSAwOyBpIDw9IGxpbmU7IGkrKylcbiAgICB7XG4gICAgICAgIHZhciBhbGlnbk9mZnNldCA9IDA7XG4gICAgICAgIGlmKHRoaXMuc3R5bGUuYWxpZ24gPT0gXCJyaWdodFwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBhbGlnbk9mZnNldCA9IG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0aGlzLnN0eWxlLmFsaWduID09IFwiY2VudGVyXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsaWduT2Zmc2V0ID0gKG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV0pIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBsaW5lQWxpZ25PZmZzZXRzLnB1c2goYWxpZ25PZmZzZXQpO1xuICAgIH1cblxuICAgIGZvcihpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgdmFyIGMgPSBuZXcgUElYSS5TcHJpdGUoY2hhcnNbaV0udGV4dHVyZSkvL1BJWEkuU3ByaXRlLmZyb21GcmFtZShjaGFyc1tpXS5jaGFyQ29kZSk7XG4gICAgICAgIGMucG9zaXRpb24ueCA9IChjaGFyc1tpXS5wb3NpdGlvbi54ICsgbGluZUFsaWduT2Zmc2V0c1tjaGFyc1tpXS5saW5lXSkgKiBzY2FsZTtcbiAgICAgICAgYy5wb3NpdGlvbi55ID0gY2hhcnNbaV0ucG9zaXRpb24ueSAqIHNjYWxlO1xuICAgICAgICBjLnNjYWxlLnggPSBjLnNjYWxlLnkgPSBzY2FsZTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZChjKTtcbiAgICB9XG5cbiAgICB0aGlzLndpZHRoID0gcG9zLnggKiBzY2FsZTtcbiAgICB0aGlzLmhlaWdodCA9IChwb3MueSArIGRhdGEubGluZUhlaWdodCkgKiBzY2FsZTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgdHJhbnNmb3Igb2YgdGhpcyBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRyYW5zZm9ybVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5CaXRtYXBUZXh0LnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbigpXG57XG5cdGlmKHRoaXMuZGlydHkpXG5cdHtcbiAgICAgICAgd2hpbGUodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKHRoaXMuZ2V0Q2hpbGRBdCgwKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KCk7XG5cbiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0UElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0uY2FsbCh0aGlzKTtcbn07XG5cblBJWEkuQml0bWFwVGV4dC5mb250cyA9IHt9O1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG4gXG4gLyoqXG4gKiBUaGUgaW50ZXJhY3Rpb24gbWFuYWdlciBkZWFscyB3aXRoIG1vdXNlIGFuZCB0b3VjaCBldmVudHMuIEFueSBEaXNwbGF5T2JqZWN0IGNhbiBiZSBpbnRlcmFjdGl2ZVxuICogVGhpcyBtYW5hZ2VyIGFsc28gc3VwcG9ydHMgbXVsdGl0b3VjaC5cbiAqXG4gKiBAY2xhc3MgSW50ZXJhY3Rpb25NYW5hZ2VyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSBzdGFnZSB7U3RhZ2V9IFRoZSBzdGFnZSB0byBoYW5kbGUgaW50ZXJhY3Rpb25zXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyID0gZnVuY3Rpb24oc3RhZ2UpXG57XG5cdC8qKlxuXHQgKiBhIHJlZmZlcmVuY2UgdG8gdGhlIHN0YWdlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzdGFnZVxuXHQgKiBAdHlwZSBTdGFnZVxuXHQgKi9cblx0dGhpcy5zdGFnZSA9IHN0YWdlO1xuXG5cdC8qKlxuXHQgKiB0aGUgbW91c2UgZGF0YVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbW91c2Vcblx0ICogQHR5cGUgSW50ZXJhY3Rpb25EYXRhXG5cdCAqL1xuXHR0aGlzLm1vdXNlID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25EYXRhKCk7XG5cblx0LyoqXG5cdCAqIGFuIG9iamVjdCB0aGF0IHN0b3JlcyBjdXJyZW50IHRvdWNoZXMgKEludGVyYWN0aW9uRGF0YSkgYnkgaWQgcmVmZXJlbmNlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0b3VjaHNcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqL1xuXHR0aGlzLnRvdWNocyA9IHt9O1xuXG5cblx0XG5cdC8vIGhlbHBlcnNcblx0dGhpcy50ZW1wUG9pbnQgPSBuZXcgUElYSS5Qb2ludCgpO1xuXHQvL3RoaXMudGVtcE1hdHJpeCA9ICBtYXQzLmNyZWF0ZSgpO1xuXG5cdHRoaXMubW91c2VvdmVyRW5hYmxlZCA9IHRydWU7XG5cblx0Ly90aW55IGxpdHRsZSBpbnRlcmFjdGl2ZURhdGEgcG9vbCFcblx0dGhpcy5wb29sID0gW107XG5cblx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zID0gW107XG5cdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50ID0gbnVsbDtcblxuXHQvL3RoaXMgd2lsbCBtYWtlIGl0IHNvIHRoYXQgeW91IGRvbnQgaGF2ZSB0byBjYWxsIGJpbmQgYWxsIHRoZSB0aW1lXG5cdHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQoIHRoaXMgKTtcblx0dGhpcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcblx0dGhpcy5vbk1vdXNlT3V0ID0gdGhpcy5vbk1vdXNlT3V0LmJpbmQodGhpcyk7XG5cdHRoaXMub25Nb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcblxuXHR0aGlzLm9uVG91Y2hTdGFydCA9IHRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG5cdHRoaXMub25Ub3VjaEVuZCA9IHRoaXMub25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuXHR0aGlzLm9uVG91Y2hNb3ZlID0gdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpO1xuXHRcblx0XG5cdHRoaXMubGFzdCA9IDA7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludGVyYWN0aW9uTWFuYWdlcjtcblxuLyoqXG4gKiBDb2xsZWN0cyBhbiBpbnRlcmFjdGl2ZSBzcHJpdGUgcmVjdXJzaXZlbHkgdG8gaGF2ZSB0aGVpciBpbnRlcmFjdGlvbnMgbWFuYWdlZFxuICpcbiAqIEBtZXRob2QgY29sbGVjdEludGVyYWN0aXZlU3ByaXRlXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH0gdGhlIGRpc3BsYXlPYmplY3QgdG8gY29sbGVjdFxuICogQHBhcmFtIGlQYXJlbnQge0Rpc3BsYXlPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuY29sbGVjdEludGVyYWN0aXZlU3ByaXRlID0gZnVuY3Rpb24oZGlzcGxheU9iamVjdCwgaVBhcmVudClcbntcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblx0dmFyIGxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblx0XG5cdC8vLyBtYWtlIGFuIGludGVyYWN0aW9uIHRyZWUuLi4ge2l0ZW0uX19pbnRlcmFjdGl2ZVBhcmVudH1cblx0Zm9yICh2YXIgaSA9IGxlbmd0aC0xOyBpID49IDA7IGktLSlcblx0e1xuXHRcdHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHRcdFxuLy9cdFx0aWYoY2hpbGQudmlzaWJsZSkge1xuXHRcdFx0Ly8gcHVzaCBhbGwgaW50ZXJhY3RpdmUgYml0c1xuXHRcdFx0aWYoY2hpbGQuaW50ZXJhY3RpdmUpXG5cdFx0XHR7XG5cdFx0XHRcdGlQYXJlbnQuaW50ZXJhY3RpdmVDaGlsZHJlbiA9IHRydWU7XG5cdFx0XHRcdC8vY2hpbGQuX19pUGFyZW50ID0gaVBhcmVudDtcblx0XHRcdFx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLnB1c2goY2hpbGQpO1xuXG5cdFx0XHRcdGlmKGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA+IDApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGlzLmNvbGxlY3RJbnRlcmFjdGl2ZVNwcml0ZShjaGlsZCwgY2hpbGQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNoaWxkLl9faVBhcmVudCA9IG51bGw7XG5cblx0XHRcdFx0aWYoY2hpbGQuY2hpbGRyZW4ubGVuZ3RoID4gMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMuY29sbGVjdEludGVyYWN0aXZlU3ByaXRlKGNoaWxkLCBpUGFyZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuLy9cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdGFyZ2V0IGZvciBldmVudCBkZWxlZ2F0aW9uXG4gKlxuICogQG1ldGhvZCBzZXRUYXJnZXRcbiAqIEBwYXJhbSB0YXJnZXQge1dlYkdMUmVuZGVyZXJ8Q2FudmFzUmVuZGVyZXJ9IHRoZSByZW5kZXJlciB0byBiaW5kIGV2ZW50cyB0b1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uKHRhcmdldClcbntcblx0dGhpcy50YXJnZXQgPSB0YXJnZXQ7XG5cblx0Ly9jaGVjayBpZiB0aGUgZG9tIGVsZW1lbnQgaGFzIGJlZW4gc2V0LiBJZiBpdCBoYXMgZG9uJ3QgZG8gYW55dGhpbmdcblx0aWYoIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50ID09PSBudWxsICkge1xuXG5cdFx0dGhpcy5zZXRUYXJnZXREb21FbGVtZW50KCB0YXJnZXQudmlldyApO1xuXHR9XG5cbiBcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICB0aGlzLm9uTW91c2VVcCwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBkb20gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UvdG91Y2ggZXZlbnRzLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBvdGhlciBET01cbiAqIGVsZW1lbnRzIG9udG9wIG9mIHRoZSByZW5kZXJlcnMgQ2FudmFzIGVsZW1lbnQuIFdpdGggdGhpcyB5b3UnbGwgYmUgYWJsZSB0byBkZWxlZ2F0ZSBhbm90aGVyIGRvbSBlbGVtZW50XG4gKiB0byByZWNlaXZlIHRob3NlIGV2ZW50c1xuICpcbiAqIEBtZXRob2Qgc2V0VGFyZ2V0RG9tRWxlbWVudFxuICogQHBhcmFtIGRvbUVsZW1lbnQge0RPTUVsZW1lbnR9IHRoZSBkb20gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UgYW5kIHRvdWNoIGV2ZW50c1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLnNldFRhcmdldERvbUVsZW1lbnQgPSBmdW5jdGlvbihkb21FbGVtZW50KVxue1xuXHQvL3JlbW92ZSBwcmV2aW91c2UgbGlzdGVuZXJzXG5cdGlmKCB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCAhPT0gbnVsbCApIFxuXHR7XG5cdFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbJy1tcy1jb250ZW50LXpvb21pbmcnXSA9ICcnO1xuICAgIFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbJy1tcy10b3VjaC1hY3Rpb24nXSA9ICcnO1xuXG5cdFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgIHRoaXMub25Nb3VzZU1vdmUsIHRydWUpO1xuXHRcdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICB0aGlzLm9uTW91c2VEb3duLCB0cnVlKTtcblx0IFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAgIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG5cblx0IFx0Ly8gYWludCBubyBtdWx0aSB0b3VjaCBqdXN0IHlldCFcblx0XHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQsIHRydWUpO1xuXHRcdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLCB0cnVlKTtcblx0XHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLCB0cnVlKTtcblx0fVxuXG5cblx0aWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkgXG5cdHtcblx0XHQvLyB0aW1lIHRvIHJlbW92ZSBzb21lIG9mIHRoYXQgem9vbSBpbiBqYS4uXG5cdFx0ZG9tRWxlbWVudC5zdHlsZVsnLW1zLWNvbnRlbnQtem9vbWluZyddID0gJ25vbmUnO1xuICAgIFx0ZG9tRWxlbWVudC5zdHlsZVsnLW1zLXRvdWNoLWFjdGlvbiddID0gJ25vbmUnO1xuICAgIFxuXHRcdC8vIERPIHNvbWUgd2luZG93IHNwZWNpZmljIHRvdWNoIVxuXHR9XG5cblx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgPSBkb21FbGVtZW50O1xuXG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgIHRoaXMub25Nb3VzZU1vdmUsIHRydWUpO1xuXHRkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICB0aGlzLm9uTW91c2VEb3duLCB0cnVlKTtcbiBcdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAgIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG5cbiBcdC8vIGFpbnQgbm8gbXVsdGkgdG91Y2gganVzdCB5ZXQhXG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0LCB0cnVlKTtcblx0ZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCwgdHJ1ZSk7XG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiB1cGRhdGVzIHRoZSBzdGF0ZSBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzXG4gKlxuICogQG1ldGhvZCB1cGRhdGVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpXG57XG5cdGlmKCF0aGlzLnRhcmdldClyZXR1cm47XG5cdFxuXHQvLyBmcmVxdWVuY3kgb2YgMzBmcHM/P1xuXHR2YXIgbm93ID0gRGF0ZS5ub3coKTtcblx0dmFyIGRpZmYgPSBub3cgLSB0aGlzLmxhc3Q7XG5cdGRpZmYgPSAoZGlmZiAqIDMwKSAvIDEwMDA7XG5cdGlmKGRpZmYgPCAxKXJldHVybjtcblx0dGhpcy5sYXN0ID0gbm93O1xuXHQvL1xuXHRcblx0Ly8gb2suLiBzbyBtb3VzZSBldmVudHM/P1xuXHQvLyB5ZXMgZm9yIG5vdyA6KVxuXHQvLyBPUFRJTVNFIC0gaG93IG9mdGVuIHRvIGNoZWNrPz9cblx0aWYodGhpcy5kaXJ0eSlcblx0e1xuXHRcdHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHR2YXIgbGVuID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0XHRcblx0XHRmb3IgKHZhciBpPTA7IGkgPCBsZW47IGkrKykge1xuXHRcdCAgdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldLmludGVyYWN0aXZlQ2hpbGRyZW4gPSBmYWxzZTtcblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zID0gW107XG5cdFx0XG5cdFx0aWYodGhpcy5zdGFnZS5pbnRlcmFjdGl2ZSl0aGlzLmludGVyYWN0aXZlSXRlbXMucHVzaCh0aGlzLnN0YWdlKTtcblx0XHQvLyBnbyB0aHJvdWdoIGFuZCBjb2xsZWN0IGFsbCB0aGUgb2JqZWN0cyB0aGF0IGFyZSBpbnRlcmFjdGl2ZS4uXG5cdFx0dGhpcy5jb2xsZWN0SW50ZXJhY3RpdmVTcHJpdGUodGhpcy5zdGFnZSwgdGhpcy5zdGFnZSk7XG5cdH1cblx0XG5cdC8vIGxvb3AgdGhyb3VnaCBpbnRlcmFjdGl2ZSBvYmplY3RzIVxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0XG5cdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1x0XG5cdFx0XHRcdFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIGl0ZW0gPSB0aGlzLmludGVyYWN0aXZlSXRlbXNbaV07XG5cdFx0XG5cdFx0XG5cdFx0Ly9pZighaXRlbS52aXNpYmxlKWNvbnRpbnVlO1xuXHRcdFxuXHRcdC8vIE9QVElNSVNBVElPTiAtIG9ubHkgY2FsY3VsYXRlIGV2ZXJ5IHRpbWUgaWYgdGhlIG1vdXNlbW92ZSBmdW5jdGlvbiBleGlzdHMuLlxuXHRcdC8vIE9LIHNvLi4gZG9lcyB0aGUgb2JqZWN0IGhhdmUgYW55IG90aGVyIGludGVyYWN0aXZlIGZ1bmN0aW9ucz9cblx0XHQvLyBoaXQtdGVzdCB0aGUgY2xpcCFcblx0XHRcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlb3ZlciB8fCBpdGVtLm1vdXNlb3V0IHx8IGl0ZW0uYnV0dG9uTW9kZSlcblx0XHR7XG5cdFx0XHQvLyBvayBzbyB0aGVyZSBhcmUgc29tZSBmdW5jdGlvbnMgc28gbGV0cyBoaXQgdGVzdCBpdC4uXG5cdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRoaXMubW91c2UpO1xuXHRcdFx0dGhpcy5tb3VzZS50YXJnZXQgPSBpdGVtO1xuXHRcdFx0Ly8gb2sgc28gZGVhbCB3aXRoIGludGVyYWN0aW9ucy4uXG5cdFx0XHQvLyBsb2tzIGxpa2UgdGhlcmUgd2FzIGEgaGl0IVxuXHRcdFx0aWYoaXRlbS5fX2hpdClcblx0XHRcdHtcblx0XHRcdFx0aWYoaXRlbS5idXR0b25Nb2RlKSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcdFxuXHRcdFx0XHRcblx0XHRcdFx0aWYoIWl0ZW0uX19pc092ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNlb3ZlcilpdGVtLm1vdXNlb3Zlcih0aGlzLm1vdXNlKTtcblx0XHRcdFx0XHRpdGVtLl9faXNPdmVyID0gdHJ1ZTtcdFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGl0ZW0uX19pc092ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyByb2xsIG91dCFcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNlb3V0KWl0ZW0ubW91c2VvdXQodGhpcy5tb3VzZSk7XG5cdFx0XHRcdFx0aXRlbS5fX2lzT3ZlciA9IGZhbHNlO1x0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gLS0tPlxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIG1vdmVzIGFjY3Jvc3MgdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uTW91c2VNb3ZlXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIHRoZSBtb3VzZSBtb3ZpbmdcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuXHR0aGlzLm1vdXNlLm9yaWdpbmFsRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7IC8vSUUgdXNlcyB3aW5kb3cuZXZlbnRcblx0Ly8gVE9ETyBvcHRpbWl6ZSBieSBub3QgY2hlY2sgRVZFUlkgVElNRSEgbWF5YmUgaGFsZiBhcyBvZnRlbj8gLy9cblx0dmFyIHJlY3QgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XG5cdHRoaXMubW91c2UuZ2xvYmFsLnggPSAoZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCkgKiAodGhpcy50YXJnZXQud2lkdGggLyByZWN0LndpZHRoKTtcblx0dGhpcy5tb3VzZS5nbG9iYWwueSA9IChldmVudC5jbGllbnRZIC0gcmVjdC50b3ApICogKCB0aGlzLnRhcmdldC5oZWlnaHQgLyByZWN0LmhlaWdodCk7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlbW92ZSlcblx0XHR7XG5cdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0aXRlbS5tb3VzZW1vdmUodGhpcy5tb3VzZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkIGRvd24gb24gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uTW91c2VEb3duXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIGEgbW91c2UgYnV0dG9uIGJlaW5nIHByZXNzZWQgZG93blxuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMubW91c2Uub3JpZ2luYWxFdmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsgLy9JRSB1c2VzIHdpbmRvdy5ldmVudFxuXHRcblx0Ly8gbG9vcCB0aHJvdWdoIGludGVhY3Rpb24gdHJlZS4uLlxuXHQvLyBoaXQgdGVzdCBlYWNoIGl0ZW0hIC0+IFxuXHQvLyBnZXQgaW50ZXJhY3RpdmUgaXRlbXMgdW5kZXIgcG9pbnQ/P1xuXHQvL3N0YWdlLl9faVxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0dmFyIGluZGV4ID0gMDtcblx0dmFyIHBhcmVudCA9IHRoaXMuc3RhZ2U7XG5cdFxuXHQvLyB3aGlsZSBcblx0Ly8gaGl0IHRlc3QgXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlZG93biB8fCBpdGVtLmNsaWNrKVxuXHRcdHtcblx0XHRcdGl0ZW0uX19tb3VzZUlzRG93biA9IHRydWU7XG5cdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRoaXMubW91c2UpO1xuXHRcdFx0XG5cdFx0XHRpZihpdGVtLl9faGl0KVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0XHRpZihpdGVtLm1vdXNlZG93bilpdGVtLm1vdXNlZG93bih0aGlzLm1vdXNlKTtcblx0XHRcdFx0aXRlbS5fX2lzRG93biA9IHRydWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBqdXN0IHRoZSBvbmUhXG5cdFx0XHRcdGlmKCFpdGVtLmludGVyYWN0aXZlQ2hpbGRyZW4pYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cblxuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VPdXQgPSBmdW5jdGlvbihldmVudClcbntcblx0dmFyIGxlbmd0aCA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtcy5sZW5ndGg7XG5cdFxuXHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcdFxuXHRcdFx0XHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciBpdGVtID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldO1xuXHRcdFxuXHRcdGlmKGl0ZW0uX19pc092ZXIpXG5cdFx0e1xuXHRcdFx0dGhpcy5tb3VzZS50YXJnZXQgPSBpdGVtO1xuXHRcdFx0aWYoaXRlbS5tb3VzZW91dClpdGVtLm1vdXNlb3V0KHRoaXMubW91c2UpO1xuXHRcdFx0aXRlbS5fX2lzT3ZlciA9IGZhbHNlO1x0XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyByZWxlYXNlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Nb3VzZVVwXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIGEgbW91c2UgYnV0dG9uIGJlaW5nIHJlbGVhc2VkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMubW91c2Uub3JpZ2luYWxFdmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsgLy9JRSB1c2VzIHdpbmRvdy5ldmVudFxuXHRcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0XG5cdHZhciBsZW5ndGggPSB0aGlzLmludGVyYWN0aXZlSXRlbXMubGVuZ3RoO1xuXHR2YXIgdXAgPSBmYWxzZTtcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNldXAgfHwgaXRlbS5tb3VzZXVwb3V0c2lkZSB8fCBpdGVtLmNsaWNrKVxuXHRcdHtcblx0XHRcdGl0ZW0uX19oaXQgPSB0aGlzLmhpdFRlc3QoaXRlbSwgdGhpcy5tb3VzZSk7XG5cdFx0XHRcblx0XHRcdGlmKGl0ZW0uX19oaXQgJiYgIXVwKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0XHRpZihpdGVtLm1vdXNldXApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpdGVtLm1vdXNldXAodGhpcy5tb3VzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoaXRlbS5fX2lzRG93bilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKGl0ZW0uY2xpY2spaXRlbS5jbGljayh0aGlzLm1vdXNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYoIWl0ZW0uaW50ZXJhY3RpdmVDaGlsZHJlbil1cCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGl0ZW0uX19pc0Rvd24pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNldXBvdXRzaWRlKWl0ZW0ubW91c2V1cG91dHNpZGUodGhpcy5tb3VzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcblx0XHRcdGl0ZW0uX19pc0Rvd24gPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBjdXJyZW50IG1vdXNlIGNvb3JkcyBoaXQgYSBzcHJpdGVcbiAqXG4gKiBAbWV0aG9kIGhpdFRlc3RcbiAqIEBwYXJhbSBpdGVtIHtEaXNwbGF5T2JqZWN0fSBUaGUgZGlzcGxheU9iamVjdCB0byB0ZXN0IGZvciBhIGhpdFxuICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfSBUaGUgaW50ZXJhY3Rpb25kYXRhIG9iamVjdCB0byB1cGRhdGUgaW4gdGhlIGNhc2Ugb2YgYSBoaXRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS5oaXRUZXN0ID0gZnVuY3Rpb24oaXRlbSwgaW50ZXJhY3Rpb25EYXRhKVxue1xuXHR2YXIgZ2xvYmFsID0gaW50ZXJhY3Rpb25EYXRhLmdsb2JhbDtcblx0XG5cdGlmKGl0ZW0udmNvdW50ICE9PSBQSVhJLnZpc2libGVDb3VudClyZXR1cm4gZmFsc2U7XG5cblx0dmFyIGlzU3ByaXRlID0gKGl0ZW0gaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSksXG5cdFx0d29ybGRUcmFuc2Zvcm0gPSBpdGVtLndvcmxkVHJhbnNmb3JtLFxuXHRcdGEwMCA9IHdvcmxkVHJhbnNmb3JtWzBdLCBhMDEgPSB3b3JsZFRyYW5zZm9ybVsxXSwgYTAyID0gd29ybGRUcmFuc2Zvcm1bMl0sXG5cdFx0YTEwID0gd29ybGRUcmFuc2Zvcm1bM10sIGExMSA9IHdvcmxkVHJhbnNmb3JtWzRdLCBhMTIgPSB3b3JsZFRyYW5zZm9ybVs1XSxcblx0XHRpZCA9IDEgLyAoYTAwICogYTExICsgYTAxICogLWExMCksXG5cdFx0eCA9IGExMSAqIGlkICogZ2xvYmFsLnggKyAtYTAxICogaWQgKiBnbG9iYWwueSArIChhMTIgKiBhMDEgLSBhMDIgKiBhMTEpICogaWQsXG5cdFx0eSA9IGEwMCAqIGlkICogZ2xvYmFsLnkgKyAtYTEwICogaWQgKiBnbG9iYWwueCArICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGlkO1xuXG5cdGludGVyYWN0aW9uRGF0YS50YXJnZXQgPSBpdGVtO1xuXHRcblx0Ly9hIHNwcml0ZSBvciBkaXNwbGF5IG9iamVjdCB3aXRoIGEgaGl0IGFyZWEgZGVmaW5lZFxuXHRpZihpdGVtLmhpdEFyZWEgJiYgaXRlbS5oaXRBcmVhLmNvbnRhaW5zKSB7XG5cdFx0aWYoaXRlbS5oaXRBcmVhLmNvbnRhaW5zKHgsIHkpKSB7XG5cdFx0XHQvL2lmKGlzU3ByaXRlKVxuXHRcdFx0aW50ZXJhY3Rpb25EYXRhLnRhcmdldCA9IGl0ZW07XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Ly8gYSBzcHJpdGUgd2l0aCBubyBoaXRhcmVhIGRlZmluZWRcblx0ZWxzZSBpZihpc1Nwcml0ZSlcblx0e1xuXHRcdHZhciB3aWR0aCA9IGl0ZW0udGV4dHVyZS5mcmFtZS53aWR0aCxcblx0XHRcdGhlaWdodCA9IGl0ZW0udGV4dHVyZS5mcmFtZS5oZWlnaHQsXG5cdFx0XHR4MSA9IC13aWR0aCAqIGl0ZW0uYW5jaG9yLngsXG5cdFx0XHR5MTtcblx0XHRcblx0XHRpZih4ID4geDEgJiYgeCA8IHgxICsgd2lkdGgpXG5cdFx0e1xuXHRcdFx0eTEgPSAtaGVpZ2h0ICogaXRlbS5hbmNob3IueTtcblx0XHRcblx0XHRcdGlmKHkgPiB5MSAmJiB5IDwgeTEgKyBoZWlnaHQpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHNldCB0aGUgdGFyZ2V0IHByb3BlcnR5IGlmIGEgaGl0IGlzIHRydWUhXG5cdFx0XHRcdGludGVyYWN0aW9uRGF0YS50YXJnZXQgPSBpdGVtXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZhciBsZW5ndGggPSBpdGVtLmNoaWxkcmVuLmxlbmd0aDtcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgdGVtcEl0ZW0gPSBpdGVtLmNoaWxkcmVuW2ldO1xuXHRcdHZhciBoaXQgPSB0aGlzLmhpdFRlc3QodGVtcEl0ZW0sIGludGVyYWN0aW9uRGF0YSk7XG5cdFx0aWYoaGl0KVxuXHRcdHtcblx0XHRcdC8vIGhtbS4uIFRPRE8gU0VUIENPUlJFQ1QgVEFSR0VUP1xuXHRcdFx0aW50ZXJhY3Rpb25EYXRhLnRhcmdldCA9IGl0ZW1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmYWxzZTtcdFxufVxuXG4vKipcbiAqIElzIGNhbGxlZCB3aGVuIGEgdG91Y2ggaXMgbW92ZWQgYWNjcm9zcyB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Ub3VjaE1vdmVcbiAqIEBwYXJhbSBldmVudCB7RXZlbnR9IFRoZSBET00gZXZlbnQgb2YgYSB0b3VjaCBtb3ZpbmcgYWNjcm9zcyB0aGUgcmVuZGVyZXIgdmlld1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHZhciByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdHZhciBjaGFuZ2VkVG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xuXHRcblx0Zm9yICh2YXIgaT0wOyBpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIFxuXHR7XG5cdFx0dmFyIHRvdWNoRXZlbnQgPSBjaGFuZ2VkVG91Y2hlc1tpXTtcblx0XHR2YXIgdG91Y2hEYXRhID0gdGhpcy50b3VjaHNbdG91Y2hFdmVudC5pZGVudGlmaWVyXTtcblx0XHR0b3VjaERhdGEub3JpZ2luYWxFdmVudCA9ICBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cdFx0XG5cdFx0Ly8gdXBkYXRlIHRoZSB0b3VjaCBwb3NpdGlvblxuXHRcdHRvdWNoRGF0YS5nbG9iYWwueCA9ICh0b3VjaEV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogKHRoaXMudGFyZ2V0LndpZHRoIC8gcmVjdC53aWR0aCk7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC55ID0gKHRvdWNoRXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAgKiAodGhpcy50YXJnZXQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xuXHR9XG5cdFxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciBpdGVtID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldO1xuXHRcdGlmKGl0ZW0udG91Y2htb3ZlKWl0ZW0udG91Y2htb3ZlKHRvdWNoRGF0YSk7XG5cdH1cbn1cblxuLyoqXG4gKiBJcyBjYWxsZWQgd2hlbiBhIHRvdWNoIGlzIHN0YXJ0ZWQgb24gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uVG91Y2hTdGFydFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH0gVGhlIERPTSBldmVudCBvZiBhIHRvdWNoIHN0YXJ0aW5nIG9uIHRoZSByZW5kZXJlciB2aWV3XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUub25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHZhciByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHR2YXIgY2hhbmdlZFRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcztcblx0Zm9yICh2YXIgaT0wOyBpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIFxuXHR7XG5cdFx0dmFyIHRvdWNoRXZlbnQgPSBjaGFuZ2VkVG91Y2hlc1tpXTtcblx0XHRcblx0XHR2YXIgdG91Y2hEYXRhID0gdGhpcy5wb29sLnBvcCgpO1xuXHRcdGlmKCF0b3VjaERhdGEpdG91Y2hEYXRhID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25EYXRhKCk7XG5cdFx0XG5cdFx0dG91Y2hEYXRhLm9yaWdpbmFsRXZlbnQgPSAgZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXHRcdFxuXHRcdHRoaXMudG91Y2hzW3RvdWNoRXZlbnQuaWRlbnRpZmllcl0gPSB0b3VjaERhdGE7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC54ID0gKHRvdWNoRXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCkgKiAodGhpcy50YXJnZXQud2lkdGggLyByZWN0LndpZHRoKTtcblx0XHR0b3VjaERhdGEuZ2xvYmFsLnkgPSAodG91Y2hFdmVudC5jbGllbnRZIC0gcmVjdC50b3ApICAqICh0aGlzLnRhcmdldC5oZWlnaHQgLyByZWN0LmhlaWdodCk7XG5cdFx0XG5cdFx0dmFyIGxlbmd0aCA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtcy5sZW5ndGg7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsZW5ndGg7IGorKylcblx0XHR7XG5cdFx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tqXTtcblx0XHRcdFxuXHRcdFx0aWYoaXRlbS50b3VjaHN0YXJ0IHx8IGl0ZW0udGFwKVxuXHRcdFx0e1xuXHRcdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRvdWNoRGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihpdGVtLl9faGl0KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly9jYWxsIHRoZSBmdW5jdGlvbiFcblx0XHRcdFx0XHRpZihpdGVtLnRvdWNoc3RhcnQpaXRlbS50b3VjaHN0YXJ0KHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0aXRlbS5fX2lzRG93biA9IHRydWU7XG5cdFx0XHRcdFx0aXRlbS5fX3RvdWNoRGF0YSA9IHRvdWNoRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZighaXRlbS5pbnRlcmFjdGl2ZUNoaWxkcmVuKWJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gYSB0b3VjaCBpcyBlbmRlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Ub3VjaEVuZFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH0gVGhlIERPTSBldmVudCBvZiBhIHRvdWNoIGVuZGluZyBvbiB0aGUgcmVuZGVyZXIgdmlld1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uVG91Y2hFbmQgPSBmdW5jdGlvbihldmVudClcbntcblx0Ly90aGlzLm1vdXNlLm9yaWdpbmFsRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7IC8vSUUgdXNlcyB3aW5kb3cuZXZlbnRcblx0dmFyIHJlY3QgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0dmFyIGNoYW5nZWRUb3VjaGVzID0gZXZlbnQuY2hhbmdlZFRvdWNoZXM7XG5cdFxuXHRmb3IgKHZhciBpPTA7IGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHR2YXIgdG91Y2hFdmVudCA9IGNoYW5nZWRUb3VjaGVzW2ldO1xuXHRcdHZhciB0b3VjaERhdGEgPSB0aGlzLnRvdWNoc1t0b3VjaEV2ZW50LmlkZW50aWZpZXJdO1xuXHRcdHZhciB1cCA9IGZhbHNlO1xuXHRcdHRvdWNoRGF0YS5nbG9iYWwueCA9ICh0b3VjaEV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogKHRoaXMudGFyZ2V0LndpZHRoIC8gcmVjdC53aWR0aCk7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC55ID0gKHRvdWNoRXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAgKiAodGhpcy50YXJnZXQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xuXHRcdFxuXHRcdHZhciBsZW5ndGggPSB0aGlzLmludGVyYWN0aXZlSXRlbXMubGVuZ3RoO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGVuZ3RoOyBqKyspXG5cdFx0e1xuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzLmludGVyYWN0aXZlSXRlbXNbal07XG5cdFx0XHR2YXIgaXRlbVRvdWNoRGF0YSA9IGl0ZW0uX190b3VjaERhdGE7IC8vIDwtLSBIZXJlIVxuXHRcdFx0aXRlbS5fX2hpdCA9IHRoaXMuaGl0VGVzdChpdGVtLCB0b3VjaERhdGEpO1xuXHRcdFxuXHRcdFx0aWYoaXRlbVRvdWNoRGF0YSA9PSB0b3VjaERhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHNvIHRoaXMgb25lIFdBUyBkb3duLi4uXG5cdFx0XHRcdHRvdWNoRGF0YS5vcmlnaW5hbEV2ZW50ID0gIGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblx0XHRcdFx0Ly8gaGl0VGVzdD8/XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihpdGVtLnRvdWNoZW5kIHx8IGl0ZW0udGFwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoaXRlbS5fX2hpdCAmJiAhdXApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYoaXRlbS50b3VjaGVuZClpdGVtLnRvdWNoZW5kKHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0XHRpZihpdGVtLl9faXNEb3duKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZihpdGVtLnRhcClpdGVtLnRhcCh0b3VjaERhdGEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZighaXRlbS5pbnRlcmFjdGl2ZUNoaWxkcmVuKXVwID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmKGl0ZW0uX19pc0Rvd24pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGlmKGl0ZW0udG91Y2hlbmRvdXRzaWRlKWl0ZW0udG91Y2hlbmRvdXRzaWRlKHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGl0ZW0uX19pc0Rvd24gPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aXRlbS5fX3RvdWNoRGF0YSA9IG51bGw7XG5cdFx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyByZW1vdmUgdGhlIHRvdWNoLi5cblx0XHR0aGlzLnBvb2wucHVzaCh0b3VjaERhdGEpO1xuXHRcdHRoaXMudG91Y2hzW3RvdWNoRXZlbnQuaWRlbnRpZmllcl0gPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogSG9sZHMgYWxsIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gYW4gSW50ZXJhY3Rpb24gZXZlbnRcbiAqXG4gKiBAY2xhc3MgSW50ZXJhY3Rpb25EYXRhXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUElYSS5JbnRlcmFjdGlvbkRhdGEgPSBmdW5jdGlvbigpXG57XG5cdC8qKlxuXHQgKiBUaGlzIHBvaW50IHN0b3JlcyB0aGUgZ2xvYmFsIGNvb3JkcyBvZiB3aGVyZSB0aGUgdG91Y2gvbW91c2UgZXZlbnQgaGFwcGVuZWRcblx0ICpcblx0ICogQHByb3BlcnR5IGdsb2JhbCBcblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMuZ2xvYmFsID0gbmV3IFBJWEkuUG9pbnQoKTtcblx0XG5cdC8vIHRoaXMgaXMgaGVyZSBmb3IgbGVnYWN5Li4uIGJ1dCB3aWxsIHJlbW92ZVxuXHR0aGlzLmxvY2FsID0gbmV3IFBJWEkuUG9pbnQoKTtcblxuXHQvKipcblx0ICogVGhlIHRhcmdldCBTcHJpdGUgdGhhdCB3YXMgaW50ZXJhY3RlZCB3aXRoXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0YXJnZXRcblx0ICogQHR5cGUgU3ByaXRlXG5cdCAqL1xuXHR0aGlzLnRhcmdldDtcblxuXHQvKipcblx0ICogV2hlbiBwYXNzZWQgdG8gYW4gZXZlbnQgaGFuZGxlciwgdGhpcyB3aWxsIGJlIHRoZSBvcmlnaW5hbCBET00gRXZlbnQgdGhhdCB3YXMgY2FwdHVyZWRcblx0ICpcblx0ICogQHByb3BlcnR5IG9yaWdpbmFsRXZlbnRcblx0ICogQHR5cGUgRXZlbnRcblx0ICovXG5cdHRoaXMub3JpZ2luYWxFdmVudDtcbn1cblxuLyoqXG4gKiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBsb2NhbCBjb29yZHMgb2YgdGhlIHNwZWNpZmllZCBkaXNwbGF5T2JqZWN0IGZvciB0aGlzIEludGVyYWN0aW9uRGF0YVxuICpcbiAqIEBtZXRob2QgZ2V0TG9jYWxQb3NpdGlvblxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBEaXNwbGF5T2JqZWN0IHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIGxvY2FsIGNvb3JkcyBvZmZcbiAqIEByZXR1cm4ge1BvaW50fSBBIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkcyBvZiB0aGUgSW50ZXJhY3Rpb25EYXRhIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBEaXNwbGF5T2JqZWN0XG4gKi9cblBJWEkuSW50ZXJhY3Rpb25EYXRhLnByb3RvdHlwZS5nZXRMb2NhbFBvc2l0aW9uID0gZnVuY3Rpb24oZGlzcGxheU9iamVjdClcbntcblx0dmFyIHdvcmxkVHJhbnNmb3JtID0gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybTtcblx0dmFyIGdsb2JhbCA9IHRoaXMuZ2xvYmFsO1xuXHRcblx0Ly8gZG8gYSBjaGVla3kgdHJhbnNmb3JtIHRvIGdldCB0aGUgbW91c2UgY29vcmRzO1xuXHR2YXIgYTAwID0gd29ybGRUcmFuc2Zvcm1bMF0sIGEwMSA9IHdvcmxkVHJhbnNmb3JtWzFdLCBhMDIgPSB3b3JsZFRyYW5zZm9ybVsyXSxcbiAgICAgICAgYTEwID0gd29ybGRUcmFuc2Zvcm1bM10sIGExMSA9IHdvcmxkVHJhbnNmb3JtWzRdLCBhMTIgPSB3b3JsZFRyYW5zZm9ybVs1XSxcbiAgICAgICAgaWQgPSAxIC8gKGEwMCAqIGExMSArIGEwMSAqIC1hMTApO1xuXHQvLyBzZXQgdGhlIG1vdXNlIGNvb3Jkcy4uLlxuXHRyZXR1cm4gbmV3IFBJWEkuUG9pbnQoYTExICogaWQgKiBnbG9iYWwueCArIC1hMDEgKiBpZCAqIGdsb2JhbC55ICsgKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBpZCxcblx0XHRcdFx0XHRcdFx0ICAgYTAwICogaWQgKiBnbG9iYWwueSArIC1hMTAgKiBpZCAqIGdsb2JhbC54ICsgKC1hMTIgKiBhMDAgKyBhMDIgKiBhMTApICogaWQpXG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkludGVyYWN0aW9uRGF0YS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludGVyYWN0aW9uRGF0YTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIEEgU3RhZ2UgcmVwcmVzZW50cyB0aGUgcm9vdCBvZiB0aGUgZGlzcGxheSB0cmVlLiBFdmVyeXRoaW5nIGNvbm5lY3RlZCB0byB0aGUgc3RhZ2UgaXMgcmVuZGVyZWRcbiAqXG4gKiBAY2xhc3MgU3RhZ2VcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RDb250YWluZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIGJhY2tncm91bmRDb2xvciB7TnVtYmVyfSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgc3RhZ2UsIGVhc2llc3Qgd2F5IHRvIHBhc3MgdGhpcyBpbiBpcyBpbiBoZXggZm9ybWF0XG4gKlx0XHRsaWtlOiAweEZGRkZGRiBmb3Igd2hpdGVcbiAqL1xuUElYSS5TdGFnZSA9IGZ1bmN0aW9uKGJhY2tncm91bmRDb2xvcilcbntcblx0UElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLmNhbGwoIHRoaXMgKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBiYXNlZCBvbiB3b3JsZCAocGFyZW50KSBmYWN0b3JzXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB3b3JsZFRyYW5zZm9ybVxuXHQgKiBAdHlwZSBNYXQzXG5cdCAqIEByZWFkT25seVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy53b3JsZFRyYW5zZm9ybSA9IFBJWEkubWF0My5jcmVhdGUoKTtcblxuXHQvKipcblx0ICogV2hldGhlciBvciBub3QgdGhlIHN0YWdlIGlzIGludGVyYWN0aXZlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBpbnRlcmFjdGl2ZVxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmludGVyYWN0aXZlID0gdHJ1ZTtcblxuXHQvKipcblx0ICogVGhlIGludGVyYWN0aW9uIG1hbmFnZSBmb3IgdGhpcyBzdGFnZSwgbWFuYWdlcyBhbGwgaW50ZXJhY3RpdmUgYWN0aXZpdHkgb24gdGhlIHN0YWdlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBpbnRlcmFjdGl2ZVxuXHQgKiBAdHlwZSBJbnRlcmFjdGlvbk1hbmFnZXJcblx0ICovXG5cdHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSBzdGFnZSBpcyBkaXJ0eSBhbmQgbmVlZHMgdG8gaGF2ZSBpbnRlcmFjdGlvbnMgdXBkYXRlZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgZGlydHlcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cblx0dGhpcy5fX2NoaWxkcmVuQWRkZWQgPSBbXTtcblx0dGhpcy5fX2NoaWxkcmVuUmVtb3ZlZCA9IFtdO1xuXG5cdC8vdGhlIHN0YWdlIGlzIGl0J3Mgb3duIHN0YWdlXG5cdHRoaXMuc3RhZ2UgPSB0aGlzO1xuXG5cdC8vb3B0aW1pemUgaGl0IGRldGVjdGlvbiBhIGJpdFxuXHR0aGlzLnN0YWdlLmhpdEFyZWEgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEwMDAwMCwgMTAwMDAwKTtcblxuXHR0aGlzLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpO1xuXHR0aGlzLndvcmxkVmlzaWJsZSA9IHRydWU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlN0YWdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3RhZ2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5TdGFnZTtcblxuLyoqXG4gKiBTZXRzIGFub3RoZXIgRE9NIGVsZW1lbnQgd2hpY2ggY2FuIHJlY2VpdmUgbW91c2UvdG91Y2ggaW50ZXJhY3Rpb25zIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgQ2FudmFzIGVsZW1lbnQuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBvdGhlciBET00gZWxlbWVudHMgb250b3Agb2YgdGhlIENhbnZhcyBlbGVtZW50LlxuICpcbiAqIEBtZXRob2Qgc2V0SW50ZXJhY3Rpb25EZWxlZ2F0ZVxuICogQHBhcmFtIGRvbUVsZW1lbnQge0RPTUVsZW1lbnR9IFRoaXMgbmV3IGRvbUVsZW1lbnQgd2hpY2ggd2lsbCByZWNlaXZlIG1vdXNlL3RvdWNoIGV2ZW50c1xuICovXG5QSVhJLlN0YWdlLnByb3RvdHlwZS5zZXRJbnRlcmFjdGlvbkRlbGVnYXRlID0gZnVuY3Rpb24oZG9tRWxlbWVudClcbntcblx0dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuc2V0VGFyZ2V0RG9tRWxlbWVudCggZG9tRWxlbWVudCApO1xufVxuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3RhZ2UucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy53b3JsZEFscGhhID0gMTtcdFx0XG5cdHRoaXMudmNvdW50ID0gUElYSS52aXNpYmxlQ291bnQ7XG5cdFxuXHRmb3IodmFyIGk9MCxqPXRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpPGo7IGkrKylcblx0e1xuXHRcdHRoaXMuY2hpbGRyZW5baV0udXBkYXRlVHJhbnNmb3JtKCk7XHRcblx0fVxuXHRcblx0aWYodGhpcy5kaXJ0eSlcblx0e1xuXHRcdHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XHQvLyB1cGRhdGUgaW50ZXJhY3RpdmUhXG5cdFx0dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuZGlydHkgPSB0cnVlO1xuXHR9XG5cdFxuXHRcblx0aWYodGhpcy5pbnRlcmFjdGl2ZSl0aGlzLmludGVyYWN0aW9uTWFuYWdlci51cGRhdGUoKTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgc3RhZ2VcbiAqXG4gKiBAbWV0aG9kIHNldEJhY2tncm91bmRDb2xvclxuICogQHBhcmFtIGJhY2tncm91bmRDb2xvciB7TnVtYmVyfSB0aGUgY29sb3Igb2YgdGhlIGJhY2tncm91bmQsIGVhc2llc3Qgd2F5IHRvIHBhc3MgdGhpcyBpbiBpcyBpbiBoZXggZm9ybWF0XG4gKlx0XHRsaWtlOiAweEZGRkZGRiBmb3Igd2hpdGVcbiAqL1xuUElYSS5TdGFnZS5wcm90b3R5cGUuc2V0QmFja2dyb3VuZENvbG9yID0gZnVuY3Rpb24oYmFja2dyb3VuZENvbG9yKVxue1xuXHR0aGlzLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvciB8fCAweDAwMDAwMDtcblx0dGhpcy5iYWNrZ3JvdW5kQ29sb3JTcGxpdCA9IEhFWHRvUkdCKHRoaXMuYmFja2dyb3VuZENvbG9yKTtcblx0dmFyIGhleCA9IHRoaXMuYmFja2dyb3VuZENvbG9yLnRvU3RyaW5nKDE2KTtcblx0aGV4ID0gXCIwMDAwMDBcIi5zdWJzdHIoMCwgNiAtIGhleC5sZW5ndGgpICsgaGV4O1xuXHR0aGlzLmJhY2tncm91bmRDb2xvclN0cmluZyA9IFwiI1wiICsgaGV4O1xufVxuXG4vKipcbiAqIFRoaXMgd2lsbCByZXR1cm4gdGhlIHBvaW50IGNvbnRhaW5pbmcgZ2xvYmFsIGNvb3JkcyBvZiB0aGUgbW91c2UuXG4gKlxuICogQG1ldGhvZCBnZXRNb3VzZVBvc2l0aW9uXG4gKiBAcmV0dXJuIHtQb2ludH0gVGhlIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkcyBvZiB0aGUgZ2xvYmFsIEludGVyYWN0aW9uRGF0YSBwb3NpdGlvbi5cbiAqL1xuUElYSS5TdGFnZS5wcm90b3R5cGUuZ2V0TW91c2VQb3NpdGlvbiA9IGZ1bmN0aW9uKClcbntcblx0cmV0dXJuIHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLm1vdXNlLmdsb2JhbDtcbn1cblxuLy8gaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cbi8vIGh0dHA6Ly9teS5vcGVyYS5jb20vZW1vbGxlci9ibG9nLzIwMTEvMTIvMjAvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1lci1hbmltYXRpbmdcblxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlci4gZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxuXG4vLyBNSVQgbGljZW5zZVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICpcbiAqIEBtZXRob2QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKi9cbi8qKlxuICogQSBwb2x5ZmlsbCBmb3IgY2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAqXG4gKiBAbWV0aG9kIGNhbmNlbEFuaW1hdGlvbkZyYW1lXG4gKi9cbnZhciBsYXN0VGltZSA9IDA7XG52YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XG5mb3IodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSsnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG59XG5cbmlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTsgfSxcbiAgICAgICAgICB0aW1lVG9DYWxsKTtcbiAgICAgICAgbGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9O1xuXG5pZiAoIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSlcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIH07XG5cbndpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIGhleCBjb2xvciBudW1iZXIgdG8gYW4gW1IsIEcsIEJdIGFycmF5XG4gKlxuICogQG1ldGhvZCBIRVh0b1JHQlxuICogQHBhcmFtIGhleCB7TnVtYmVyfVxuICovXG5mdW5jdGlvbiBIRVh0b1JHQihoZXgpIHtcblx0cmV0dXJuIFsoaGV4ID4+IDE2ICYgMHhGRikgLyAyNTUsICggaGV4ID4+IDggJiAweEZGKSAvIDI1NSwgKGhleCAmIDB4RkYpLyAyNTVdO1xufVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kXG4gKlxuICogQG1ldGhvZCBiaW5kXG4gKi9cbmlmICh0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgIT0gJ2Z1bmN0aW9uJykge1xuICBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgICAgdmFyIHRhcmdldCA9IHRoaXMsIGJvdW5kQXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXG4gICAgICBmdW5jdGlvbiBib3VuZCgpIHtcblx0dmFyIGFyZ3MgPSBib3VuZEFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG5cdHRhcmdldC5hcHBseSh0aGlzIGluc3RhbmNlb2YgYm91bmQgPyB0aGlzIDogdGhpc0FyZywgYXJncyk7XG4gICAgICB9XG5cbiAgICAgIGJvdW5kLnByb3RvdHlwZSA9IChmdW5jdGlvbiBGKHByb3RvKSB7XG4gICAgICAgICAgcHJvdG8gJiYgKEYucHJvdG90eXBlID0gcHJvdG8pO1xuICAgICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGKSkgcmV0dXJuIG5ldyBGO1xuXHR9KSh0YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGZvciBhamF4IHJlcXVlc3RzIHRvIGJlIGhhbmRsZWQgY3Jvc3MgYnJvd3NlclxuICpcbiAqIEBjbGFzcyBBamF4UmVxdWVzdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBBamF4UmVxdWVzdCA9IFBJWEkuQWpheFJlcXVlc3QgPSBmdW5jdGlvbigpXG57XG5cdHZhciBhY3RpdmV4bW9kZXMgPSBbXCJNc3htbDIuWE1MSFRUUC42LjBcIiwgXCJNc3htbDIuWE1MSFRUUC4zLjBcIiwgXCJNaWNyb3NvZnQuWE1MSFRUUFwiXSAvL2FjdGl2ZVggdmVyc2lvbnMgdG8gY2hlY2sgZm9yIGluIElFXG5cblx0aWYgKHdpbmRvdy5BY3RpdmVYT2JqZWN0KVxuXHR7IC8vVGVzdCBmb3Igc3VwcG9ydCBmb3IgQWN0aXZlWE9iamVjdCBpbiBJRSBmaXJzdCAoYXMgWE1MSHR0cFJlcXVlc3QgaW4gSUU3IGlzIGJyb2tlbilcblx0XHRmb3IgKHZhciBpPTA7IGk8YWN0aXZleG1vZGVzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdHRyeXtcblx0XHRcdFx0cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KGFjdGl2ZXhtb2Rlc1tpXSlcblx0XHRcdH1cbiAgIFx0XHRcdGNhdGNoKGUpe1xuICAgIFx0XHRcdC8vc3VwcHJlc3MgZXJyb3JcbiAgIFx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZSBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSAvLyBpZiBNb3ppbGxhLCBTYWZhcmkgZXRjXG4gIFx0e1xuICBcdFx0cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gXHR9XG4gXHRlbHNlXG4gXHR7XG5cdFx0cmV0dXJuIGZhbHNlO1xuIFx0fVxufVxuXG4vKlxuICogREVCVUdHSU5HIE9OTFlcbiAqL1xuUElYSS5ydW5MaXN0ID0gZnVuY3Rpb24oaXRlbSlcbntcblx0Y29uc29sZS5sb2coXCI+Pj4+Pj4+Pj5cIilcblx0Y29uc29sZS5sb2coXCJfXCIpXG5cdHZhciBzYWZlID0gMDtcblx0dmFyIHRtcCA9IGl0ZW0uZmlyc3Q7XG5cdGNvbnNvbGUubG9nKHRtcCk7XG5cblx0d2hpbGUodG1wLl9pTmV4dClcblx0e1xuXHRcdHNhZmUrKztcblx0XHR0bXAgPSB0bXAuX2lOZXh0O1xuXHRcdGNvbnNvbGUubG9nKHRtcCk7XG5cdC8vXHRjb25zb2xlLmxvZyh0bXApO1xuXG5cdFx0aWYoc2FmZSA+IDEwMClcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkJSRUFLXCIpXG5cdFx0XHRicmVha1xuXHRcdH1cblx0fVxufVxuXG5cblxuXG5cblxuLyoqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL2V2ZW50dGFyZ2V0LmpzL1xuICogVEhhbmtTIG1yIERPb2IhXG4gKi9cblxuLyoqXG4gKiBBZGRzIGV2ZW50IGVtaXR0ZXIgZnVuY3Rpb25hbGl0eSB0byBhIGNsYXNzXG4gKlxuICogQGNsYXNzIEV2ZW50VGFyZ2V0XG4gKiBAZXhhbXBsZVxuICpcdFx0ZnVuY3Rpb24gTXlFbWl0dGVyKCkge1xuICpcdFx0XHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7IC8vbWl4ZXMgaW4gZXZlbnQgdGFyZ2V0IHN0dWZmXG4gKlx0XHR9XG4gKlxuICpcdFx0dmFyIGVtID0gbmV3IE15RW1pdHRlcigpO1xuICpcdFx0ZW0uZW1pdCh7IHR5cGU6ICdldmVudE5hbWUnLCBkYXRhOiAnc29tZSBkYXRhJyB9KTtcbiAqL1xuUElYSS5FdmVudFRhcmdldCA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgbGlzdGVuZXJzID0ge307XG5cblx0dGhpcy5hZGRFdmVudExpc3RlbmVyID0gdGhpcy5vbiA9IGZ1bmN0aW9uICggdHlwZSwgbGlzdGVuZXIgKSB7XG5cblxuXHRcdGlmICggbGlzdGVuZXJzWyB0eXBlIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0bGlzdGVuZXJzWyB0eXBlIF0gPSBbXTtcblxuXHRcdH1cblxuXHRcdGlmICggbGlzdGVuZXJzWyB0eXBlIF0uaW5kZXhPZiggbGlzdGVuZXIgKSA9PT0gLSAxICkge1xuXG5cdFx0XHRsaXN0ZW5lcnNbIHR5cGUgXS5wdXNoKCBsaXN0ZW5lciApO1xuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuZGlzcGF0Y2hFdmVudCA9IHRoaXMuZW1pdCA9IGZ1bmN0aW9uICggZXZlbnQgKSB7XG5cblx0XHRpZiAoICFsaXN0ZW5lcnNbIGV2ZW50LnR5cGUgXSB8fCAhbGlzdGVuZXJzWyBldmVudC50eXBlIF0ubGVuZ3RoICkge1xuXG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0XHRmb3IodmFyIGkgPSAwLCBsID0gbGlzdGVuZXJzWyBldmVudC50eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cblx0XHRcdGxpc3RlbmVyc1sgZXZlbnQudHlwZSBdWyBpIF0oIGV2ZW50ICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSB0aGlzLm9mZiA9IGZ1bmN0aW9uICggdHlwZSwgbGlzdGVuZXIgKSB7XG5cblx0XHR2YXIgaW5kZXggPSBsaXN0ZW5lcnNbIHR5cGUgXS5pbmRleE9mKCBsaXN0ZW5lciApO1xuXG5cdFx0aWYgKCBpbmRleCAhPT0gLSAxICkge1xuXG5cdFx0XHRsaXN0ZW5lcnNbIHR5cGUgXS5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHR9XG5cblx0fTtcblxufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBkZXRlY3Qgd2hpY2ggcmVuZGVyZXIgeW91IHNob3VsZCBiZSB1c2luZy5cbiAqIFdlYkdMIGlzIHRoZSBwcmVmZXJyZWQgcmVuZGVyZXIgYXMgaXQgaXMgYSBsb3QgZmFzdGVzdC4gSWYgd2ViR0wgaXMgbm90IHN1cHBvcnRlZCBieVxuICogdGhlIGJyb3dzZXIgdGhlbiB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGEgY2FudmFzIHJlbmRlcmVyXG4gKlxuICogQG1ldGhvZCBhdXRvRGV0ZWN0UmVuZGVyZXJcbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSB3aWR0aCB7TnVtYmVyfSB0aGUgd2lkdGggb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0gdmlldyB7Q2FudmFzfSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0gdHJhbnNwYXJlbnQ9ZmFsc2Uge0Jvb2xlYW59IHRoZSB0cmFuc3BhcmVuY3kgb2YgdGhlIHJlbmRlciB2aWV3LCBkZWZhdWx0IGZhbHNlXG4gKiBAcGFyYW0gYW50aWFsaWFzPWZhbHNlIHtCb29sZWFufSBzZXRzIGFudGlhbGlhcyAob25seSBhcHBsaWNhYmxlIGluIHdlYkdMIGNocm9tZSBhdCB0aGUgbW9tZW50KVxuICpcbiAqIGFudGlhbGlhc1xuICovXG5QSVhJLmF1dG9EZXRlY3RSZW5kZXJlciA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIHZpZXcsIHRyYW5zcGFyZW50LCBhbnRpYWxpYXMpXG57XG5cdGlmKCF3aWR0aCl3aWR0aCA9IDgwMDtcblx0aWYoIWhlaWdodCloZWlnaHQgPSA2MDA7XG5cblx0Ly8gQk9SUk9XRUQgZnJvbSBNciBEb29iIChtcmRvb2IuY29tKVxuXHR2YXIgd2ViZ2wgPSAoIGZ1bmN0aW9uICgpIHsgdHJ5IHsgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7IHJldHVybiAhISB3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ICYmICggY2FudmFzLmdldENvbnRleHQoICd3ZWJnbCcgKSB8fCBjYW52YXMuZ2V0Q29udGV4dCggJ2V4cGVyaW1lbnRhbC13ZWJnbCcgKSApOyB9IGNhdGNoKCBlICkgeyByZXR1cm4gZmFsc2U7IH0gfSApKCk7XG5cblx0aWYod2ViZ2wpXG5cdHtcblx0XHR2YXIgaWUgPSAgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdtc2llJykgIT0gLTEpO1xuXHRcdCB3ZWJnbCA9ICFpZTtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyh3ZWJnbCk7XG5cdGlmKCB3ZWJnbCApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xSZW5kZXJlcih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudCwgYW50aWFsaWFzKTtcblx0fVxuXG5cdHJldHVyblx0bmV3IFBJWEkuQ2FudmFzUmVuZGVyZXIod2lkdGgsIGhlaWdodCwgdmlldywgdHJhbnNwYXJlbnQpO1xufTtcblxuXG5cbi8qXG5cdFBvbHlLIGxpYnJhcnlcblx0dXJsOiBodHRwOi8vcG9seWsuaXZhbmsubmV0XG5cdFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbmNlLlxuXG5cdENvcHlyaWdodCAoYykgMjAxMiBJdmFuIEt1Y2tpclxuXG5cdFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG5cdG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG5cdGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuXHRyZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcblx0Y29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcblx0Y29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG5cdFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG5cdGNvbmRpdGlvbnM6XG5cblx0VGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcblx0aW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblx0VEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcblx0RVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG5cdE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5cdE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG5cdEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuXHRXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcblx0RlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxuXHRPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cblx0VGhpcyBpcyBhbiBhbWF6aW5nIGxpYiFcblxuXHRzbGlnaHRseSBtb2RpZmllZCBieSBtYXQgZ3JvdmVzIChtYXRncm92ZXMuY29tKTtcbiovXG5cblBJWEkuUG9seUsgPSB7fTtcblxuLyoqXG4gKiBUcmlhbmd1bGF0ZXMgc2hhcGVzIGZvciB3ZWJHTCBncmFwaGljIGZpbGxzXG4gKlxuICogQG1ldGhvZCBUcmlhbmd1bGF0ZVxuICogQG5hbWVzcGFjZSBQb2x5S1xuICogQGNvbnN0cnVjdG9yXG4gKi9cblBJWEkuUG9seUsuVHJpYW5ndWxhdGUgPSBmdW5jdGlvbihwKVxue1xuXHR2YXIgc2lnbiA9IHRydWU7XG5cblx0dmFyIG4gPSBwLmxlbmd0aD4+MTtcblx0aWYobjwzKSByZXR1cm4gW107XG5cdHZhciB0Z3MgPSBbXTtcblx0dmFyIGF2bCA9IFtdO1xuXHRmb3IodmFyIGk9MDsgaTxuOyBpKyspIGF2bC5wdXNoKGkpO1xuXG5cdHZhciBpID0gMDtcblx0dmFyIGFsID0gbjtcblx0d2hpbGUoYWwgPiAzKVxuXHR7XG5cdFx0dmFyIGkwID0gYXZsWyhpKzApJWFsXTtcblx0XHR2YXIgaTEgPSBhdmxbKGkrMSklYWxdO1xuXHRcdHZhciBpMiA9IGF2bFsoaSsyKSVhbF07XG5cblx0XHR2YXIgYXggPSBwWzIqaTBdLCAgYXkgPSBwWzIqaTArMV07XG5cdFx0dmFyIGJ4ID0gcFsyKmkxXSwgIGJ5ID0gcFsyKmkxKzFdO1xuXHRcdHZhciBjeCA9IHBbMippMl0sICBjeSA9IHBbMippMisxXTtcblxuXHRcdHZhciBlYXJGb3VuZCA9IGZhbHNlO1xuXHRcdGlmKFBJWEkuUG9seUsuX2NvbnZleChheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBzaWduKSlcblx0XHR7XG5cdFx0XHRlYXJGb3VuZCA9IHRydWU7XG5cdFx0XHRmb3IodmFyIGo9MDsgajxhbDsgaisrKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdmkgPSBhdmxbal07XG5cdFx0XHRcdGlmKHZpPT1pMCB8fCB2aT09aTEgfHwgdmk9PWkyKSBjb250aW51ZTtcblx0XHRcdFx0aWYoUElYSS5Qb2x5Sy5fUG9pbnRJblRyaWFuZ2xlKHBbMip2aV0sIHBbMip2aSsxXSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSkpIHtlYXJGb3VuZCA9IGZhbHNlOyBicmVhazt9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGVhckZvdW5kKVxuXHRcdHtcblx0XHRcdHRncy5wdXNoKGkwLCBpMSwgaTIpO1xuXHRcdFx0YXZsLnNwbGljZSgoaSsxKSVhbCwgMSk7XG5cdFx0XHRhbC0tO1xuXHRcdFx0aSA9IDA7XG5cdFx0fVxuXHRcdGVsc2UgaWYoaSsrID4gMyphbClcblx0XHR7XG5cdFx0XHQvLyBuZWVkIHRvIGZsaXAgZmxpcCByZXZlcnNlIGl0IVxuXHRcdFx0Ly8gcmVzZXQhXG5cdFx0XHRpZihzaWduKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdGdzID0gW107XG5cdFx0XHRcdGF2bCA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGk9MDsgaTxuOyBpKyspIGF2bC5wdXNoKGkpO1xuXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRhbCA9IG47XG5cblx0XHRcdFx0c2lnbiA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBJWEkgV2FybmluZzogc2hhcGUgdG9vIGNvbXBsZXggdG8gZmlsbFwiKVxuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRncy5wdXNoKGF2bFswXSwgYXZsWzFdLCBhdmxbMl0pO1xuXHRyZXR1cm4gdGdzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHBvaW50IGlzIHdpdGhpbiBhIHRyaWFuZ2xlXG4gKlxuICogQGNsYXNzIF9Qb2ludEluVHJpYW5nbGVcbiAqIEBuYW1lc3BhY2UgUG9seUtcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuUG9seUsuX1BvaW50SW5UcmlhbmdsZSA9IGZ1bmN0aW9uKHB4LCBweSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSlcbntcblx0dmFyIHYweCA9IGN4LWF4O1xuXHR2YXIgdjB5ID0gY3ktYXk7XG5cdHZhciB2MXggPSBieC1heDtcblx0dmFyIHYxeSA9IGJ5LWF5O1xuXHR2YXIgdjJ4ID0gcHgtYXg7XG5cdHZhciB2MnkgPSBweS1heTtcblxuXHR2YXIgZG90MDAgPSB2MHgqdjB4K3YweSp2MHk7XG5cdHZhciBkb3QwMSA9IHYweCp2MXgrdjB5KnYxeTtcblx0dmFyIGRvdDAyID0gdjB4KnYyeCt2MHkqdjJ5O1xuXHR2YXIgZG90MTEgPSB2MXgqdjF4K3YxeSp2MXk7XG5cdHZhciBkb3QxMiA9IHYxeCp2MngrdjF5KnYyeTtcblxuXHR2YXIgaW52RGVub20gPSAxIC8gKGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxKTtcblx0dmFyIHUgPSAoZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpICogaW52RGVub207XG5cdHZhciB2ID0gKGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSAqIGludkRlbm9tO1xuXG5cdC8vIENoZWNrIGlmIHBvaW50IGlzIGluIHRyaWFuZ2xlXG5cdHJldHVybiAodSA+PSAwKSAmJiAodiA+PSAwKSAmJiAodSArIHYgPCAxKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzaGFwZSBpcyBjb252ZXhcbiAqXG4gKiBAY2xhc3MgX2NvbnZleFxuICogQG5hbWVzcGFjZSBQb2x5S1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5Qb2x5Sy5fY29udmV4ID0gZnVuY3Rpb24oYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgc2lnbilcbntcblx0cmV0dXJuICgoYXktYnkpKihjeC1ieCkgKyAoYngtYXgpKihjeS1ieSkgPj0gMCkgPT0gc2lnbjtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuaW5pdERlZmF1bHRTaGFkZXJzID0gZnVuY3Rpb24oKSBcbntcblx0UElYSS5wcmltaXRpdmVTaGFkZXIgPSBuZXcgUElYSS5QcmltaXRpdmVTaGFkZXIoKTtcbiAgUElYSS5wcmltaXRpdmVTaGFkZXIuaW5pdCgpO1xuXG4gIFBJWEkuc3RyaXBTaGFkZXIgPSBuZXcgUElYSS5TdHJpcFNoYWRlcigpO1xuICBQSVhJLnN0cmlwU2hhZGVyLmluaXQoKTtcblxuXHRQSVhJLmRlZmF1bHRTaGFkZXIgPSBuZXcgUElYSS5QaXhpU2hhZGVyKCk7XG5cdFBJWEkuZGVmYXVsdFNoYWRlci5pbml0KCk7XG5cbiAgdmFyIGdsID0gUElYSS5nbDsgXG4gIHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5kZWZhdWx0U2hhZGVyLnByb2dyYW07XG4gXG5cbiAgZ2wudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcbiAgXG4gIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuY29sb3JBdHRyaWJ1dGUpO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuYVRleHR1cmVDb29yZCk7XG59XG5cblBJWEkuYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG4gIFxuICBnbC51c2VQcm9ncmFtKFBJWEkucHJpbWl0aXZlU2hhZGVyLnByb2dyYW0pO1xuICBcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVGV4dHVyZUNvb3JkKTtcblxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLnByaW1pdGl2ZVNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLnByaW1pdGl2ZVNoYWRlci5jb2xvckF0dHJpYnV0ZSk7XG59IFxuXG5QSVhJLmRlYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG5cbiAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG4gIFxuICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5wcmltaXRpdmVTaGFkZXIuYVZlcnRleFBvc2l0aW9uKTtcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkucHJpbWl0aXZlU2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcblxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuYVZlcnRleFBvc2l0aW9uKTtcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xuXG59XG5cblBJWEkuYWN0aXZhdGVTdHJpcFNoYWRlciA9IGZ1bmN0aW9uKClcbntcbiAgdmFyIGdsID0gUElYSS5nbDtcbiAgXG4gIGdsLnVzZVByb2dyYW0oUElYSS5zdHJpcFNoYWRlci5wcm9ncmFtKTtcbiAvLyBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xufSBcblxuUElYSS5kZWFjdGl2YXRlU3RyaXBTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG5cbiAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG4gIC8vZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xufVxuXG4vKlxuXG5TSEFERVIgQ09NUElMRVIgSEVMUEVSU1xuKi9cblxuUElYSS5Db21waWxlVmVydGV4U2hhZGVyID0gZnVuY3Rpb24oZ2wsIHNoYWRlclNyYylcbntcbiAgcmV0dXJuIFBJWEkuX0NvbXBpbGVTaGFkZXIoZ2wsIHNoYWRlclNyYywgZ2wuVkVSVEVYX1NIQURFUik7XG59XG5cblBJWEkuQ29tcGlsZUZyYWdtZW50U2hhZGVyID0gZnVuY3Rpb24oZ2wsIHNoYWRlclNyYylcbntcbiAgcmV0dXJuIFBJWEkuX0NvbXBpbGVTaGFkZXIoZ2wsIHNoYWRlclNyYywgZ2wuRlJBR01FTlRfU0hBREVSKTtcbn1cblxuUElYSS5fQ29tcGlsZVNoYWRlciA9IGZ1bmN0aW9uKGdsLCBzaGFkZXJTcmMsIHNoYWRlclR5cGUpXG57XG4gIHZhciBzcmMgPSBzaGFkZXJTcmMuam9pbihcIlxcblwiKTtcbiAgdmFyIHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBzaGFkZXI7XG59XG5cblxuUElYSS5jb21waWxlUHJvZ3JhbSA9IGZ1bmN0aW9uKHZlcnRleFNyYywgZnJhZ21lbnRTcmMpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdHZhciBmcmFnbWVudFNoYWRlciA9IFBJWEkuQ29tcGlsZUZyYWdtZW50U2hhZGVyKGdsLCBmcmFnbWVudFNyYyk7XG5cdHZhciB2ZXJ0ZXhTaGFkZXIgPSBQSVhJLkNvbXBpbGVWZXJ0ZXhTaGFkZXIoZ2wsIHZlcnRleFNyYyk7XG5cdFxuXHR2YXIgc2hhZGVyUHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcblx0XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIHZlcnRleFNoYWRlcik7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICBnbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcblxuICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihzaGFkZXJQcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgaW5pdGlhbGlzZSBzaGFkZXJzXCIpO1xuICAgIH1cblxuXHRyZXR1cm4gc2hhZGVyUHJvZ3JhbTtcbn0gXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5QSVhJLlBpeGlTaGFkZXIgPSBmdW5jdGlvbigpXG57XG5cdC8vIHRoZSB3ZWJHTCBwcm9ncmFtLi5cblx0dGhpcy5wcm9ncmFtO1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBsb3dwIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIHZDb2xvcjtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5QaXhpU2hhZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgcHJvZ3JhbSA9IFBJWEkuY29tcGlsZVByb2dyYW0odGhpcy52ZXJ0ZXhTcmMgfHwgUElYSS5QaXhpU2hhZGVyLmRlZmF1bHRWZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpXG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXHRcblx0Ly8gZ2V0IGFuZCBzdG9yZSB0aGUgdW5pZm9ybXMgZm9yIHRoZSBzaGFkZXJcblx0dGhpcy51U2FtcGxlciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVTYW1wbGVyXCIpO1xuXHR0aGlzLnByb2plY3Rpb25WZWN0b3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJwcm9qZWN0aW9uVmVjdG9yXCIpO1xuXHR0aGlzLm9mZnNldFZlY3RvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcIm9mZnNldFZlY3RvclwiKTtcbiAgICAvL3RoaXMuZGltZW5zaW9ucyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIFwiZGltZW5zaW9uc1wiKTtcbiAgICBcbiAgICAvLyBnZXQgYW5kIHN0b3JlIHRoZSBhdHRyaWJ1dGVzXG4gICAgdGhpcy5hVmVydGV4UG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFWZXJ0ZXhQb3NpdGlvblwiKTtcblx0dGhpcy5jb2xvckF0dHJpYnV0ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYUNvbG9yXCIpO1xuXHR0aGlzLmFUZXh0dXJlQ29vcmQgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFUZXh0dXJlQ29vcmRcIik7XG5cdCAgXG4gICAgLy8gYWRkIHRob3NlIGN1c3RvbSBzaGFkZXJzIVxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnVuaWZvcm1zKVxuICAgIHtcbiAgICAgICBcbiAgICBcdC8vIGdldCB0aGUgdW5pZm9ybSBsb2NhdGlvbnMuLlxuXHQvL1x0cHJvZ3JhbVtrZXldID0gXG4gICAgICAgIHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwga2V5KTtcblxuICAgICAgXG4gICAgfVxuICBcblx0dGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbn1cblxuUElYSS5QaXhpU2hhZGVyLnByb3RvdHlwZS5zeW5jVW5pZm9ybXMgPSBmdW5jdGlvbigpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdFxuXHRmb3IgKHZhciBrZXkgaW4gdGhpcy51bmlmb3JtcykgXG4gICAge1xuICAgIFx0Ly92YXIgXG4gICAgXHR2YXIgdHlwZSA9IHRoaXMudW5pZm9ybXNba2V5XS50eXBlO1xuICAgIFx0XG4gICAgXHQvLyBuZWVkIHRvIGdyb3cgdGhpcyFcbiAgICBcdGlmKHR5cGUgPT0gXCJmXCIpXG4gICAgXHR7XG5cdFx0XHRnbC51bmlmb3JtMWYodGhpcy51bmlmb3Jtc1trZXldLnVuaWZvcm1Mb2NhdGlvbiwgdGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKTtcbiAgICBcdH1cbiAgICBcdGlmKHR5cGUgPT0gXCJmMlwiKVxuICAgIFx0e1xuICAgIFx0Ly9cdGNvbnNvbGUubG9nKHRoaXMucHJvZ3JhbVtrZXldKVxuXHRcdFx0Z2wudW5pZm9ybTJmKHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24sIHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZS54LCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUueSk7XG4gICAgXHR9XG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSBcImY0XCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKVxuICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih0aGlzLnVuaWZvcm1zW2tleV0udW5pZm9ybUxvY2F0aW9uLCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUpO1xuICAgICAgICB9XG4gICAgXHRlbHNlIGlmKHR5cGUgPT0gXCJtYXQ0XCIpXG4gICAgXHR7XG4gICAgXHRcdGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51bmlmb3Jtc1trZXldLnVuaWZvcm1Mb2NhdGlvbiwgZmFsc2UsIHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZSk7XG4gICAgXHR9XG4gICAgXHRlbHNlIGlmKHR5cGUgPT0gXCJzYW1wbGVyMkRcIilcbiAgICBcdHtcbiAgICBcdFx0Ly8gZmlyc3QgdGV4dHVyZS4uLlxuICAgIFx0XHR2YXIgdGV4dHVyZSA9IHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZTtcbiAgICBcdFx0XG4gICAgXHRcdGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO1xuXHQgICAgXHRnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUpO1xuXHQgICAgXHRcbiAgICBcdFx0Z2wudW5pZm9ybTFpKHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24sIDEpO1xuICAgIFx0XHRcbiAgICBcdFx0Ly8gYWN0aXZhdGUgdGV4dHVyZS4uXG4gICAgXHRcdC8vIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5wcm9ncmFtW2tleV0sIGZhbHNlLCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUpO1xuICAgIFx0XHQvLyBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMucHJvZ3JhbVtrZXldLCBmYWxzZSwgdGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKTtcbiAgICBcdH1cbiAgICB9XG4gICAgXG59XG5cblBJWEkuUGl4aVNoYWRlci5kZWZhdWx0VmVydGV4U3JjID0gW1xuICBcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcIixcbiAgXCJhdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1wiLFxuICBcImF0dHJpYnV0ZSBmbG9hdCBhQ29sb3I7XCIsXG4gIFxuICBcInVuaWZvcm0gdmVjMiBwcm9qZWN0aW9uVmVjdG9yO1wiLFxuIFwidW5pZm9ybSB2ZWMyIG9mZnNldFZlY3RvcjtcIixcbiAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcbiAgXG4gIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cbiAgXCJjb25zdCB2ZWMyIGNlbnRlciA9IHZlYzIoLTEuMCwgMS4wKTtcIixcbiAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuICAgIFwiZ2xfUG9zaXRpb24gPSB2ZWM0KCAoKGFWZXJ0ZXhQb3NpdGlvbiArIG9mZnNldFZlY3RvcikgLyBwcm9qZWN0aW9uVmVjdG9yKSArIGNlbnRlciAsIDAuMCwgMS4wKTtcIixcbiAgICBcInZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1wiLFxuICAgIFwidkNvbG9yID0gYUNvbG9yO1wiLFxuICBcIn1cIlxuXTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuU3RyaXBTaGFkZXIgPSBmdW5jdGlvbigpXG57XG5cdC8vIHRoZSB3ZWJHTCBwcm9ncmFtLi5cblx0dGhpcy5wcm9ncmFtO1xuXHRcbiAgICB0aGlzLmZyYWdtZW50U3JjID0gW1xuICAgICAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcbiAgICAgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuICAgICAgXCJ1bmlmb3JtIGZsb2F0IGFscGhhO1wiLFxuICAgICAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcbiAgICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcbiAgICAgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKTtcIixcbiAgICAgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiBhbHBoYTtcIixcbiAgICAgIFwifVwiXG4gICAgXTtcblxuICAgIHRoaXMudmVydGV4U3JjID0gW1xuICAgICAgXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XCIsXG4gICAgICBcImF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICBcImF0dHJpYnV0ZSBmbG9hdCBhQ29sb3I7XCIsXG4gICAgICBcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcbiAgICAgIFwidW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XCIsXG4gICAgICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuICAgICAgXCJ2YXJ5aW5nIHZlYzIgb2Zmc2V0VmVjdG9yO1wiLFxuICAgICAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcbiAgICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcbiAgICAgICAgXCJ2ZWMzIHYgPSB0cmFuc2xhdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApO1wiLFxuICAgICAgICBcInYgLT0gb2Zmc2V0VmVjdG9yLnh5eDtcIixcbiAgICAgICAgXCJnbF9Qb3NpdGlvbiA9IHZlYzQoIHYueCAvIHByb2plY3Rpb25WZWN0b3IueCAtMS4wLCB2LnkgLyBwcm9qZWN0aW9uVmVjdG9yLnkgKyAxLjAgLCAwLjAsIDEuMCk7XCIsXG4gICAgICAgIFwidlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICAgIFwidkNvbG9yID0gYUNvbG9yO1wiLFxuICAgICAgXCJ9XCJcbiAgICBdO1xufVxuXG5QSVhJLlN0cmlwU2hhZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgcHJvZ3JhbSA9IFBJWEkuY29tcGlsZVByb2dyYW0odGhpcy52ZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpXG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG5cdC8vIGdldCBhbmQgc3RvcmUgdGhlIHVuaWZvcm1zIGZvciB0aGUgc2hhZGVyXG5cdHRoaXMudVNhbXBsZXIgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1U2FtcGxlclwiKTtcblx0dGhpcy5wcm9qZWN0aW9uVmVjdG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwicHJvamVjdGlvblZlY3RvclwiKTtcblx0dGhpcy5vZmZzZXRWZWN0b3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJvZmZzZXRWZWN0b3JcIik7XG5cdHRoaXMuY29sb3JBdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFDb2xvclwiKTtcblx0Ly90aGlzLmRpbWVuc2lvbnMgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcImRpbWVuc2lvbnNcIik7XG5cdFxuXHQvLyBnZXQgYW5kIHN0b3JlIHRoZSBhdHRyaWJ1dGVzXG5cdHRoaXMuYVZlcnRleFBvc2l0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhVmVydGV4UG9zaXRpb25cIik7XG5cdHRoaXMuYVRleHR1cmVDb29yZCA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYVRleHR1cmVDb29yZFwiKTtcblx0ICBcbiAgICB0aGlzLnRyYW5zbGF0aW9uTWF0cml4ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidHJhbnNsYXRpb25NYXRyaXhcIik7XG4gICAgdGhpcy5hbHBoYSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcImFscGhhXCIpO1xuICBcblx0dGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuUHJpbWl0aXZlU2hhZGVyID0gZnVuY3Rpb24oKVxue1xuXHQvLyB0aGUgd2ViR0wgcHJvZ3JhbS4uXG5cdHRoaXMucHJvZ3JhbTtcbiAgICBcdFxuICAgIHRoaXMuZnJhZ21lbnRTcmMgPSBbXG4gICAgICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuICAgICAgXCJ2YXJ5aW5nIHZlYzQgdkNvbG9yO1wiLFxuICAgICAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuICAgICAgICBcImdsX0ZyYWdDb2xvciA9IHZDb2xvcjtcIixcbiAgICAgIFwifVwiXG4gICAgXTtcblxuICAgIHRoaXMudmVydGV4U3JjICA9IFtcbiAgICAgIFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1wiLFxuICAgICAgXCJhdHRyaWJ1dGUgdmVjNCBhQ29sb3I7XCIsXG4gICAgICBcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcbiAgICAgIFwidW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XCIsXG4gICAgICBcInVuaWZvcm0gdmVjMiBvZmZzZXRWZWN0b3I7XCIsXG4gICAgICBcInVuaWZvcm0gZmxvYXQgYWxwaGE7XCIsXG4gICAgICBcInZhcnlpbmcgdmVjNCB2Q29sb3I7XCIsXG4gICAgICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG4gICAgICAgIFwidmVjMyB2ID0gdHJhbnNsYXRpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiAsIDEuMCk7XCIsXG4gICAgICAgIFwidiAtPSBvZmZzZXRWZWN0b3IueHl4O1wiLFxuICAgICAgICBcImdsX1Bvc2l0aW9uID0gdmVjNCggdi54IC8gcHJvamVjdGlvblZlY3Rvci54IC0xLjAsIHYueSAvIC1wcm9qZWN0aW9uVmVjdG9yLnkgKyAxLjAgLCAwLjAsIDEuMCk7XCIsXG4gICAgICAgIFwidkNvbG9yID0gYUNvbG9yICAqIGFscGhhO1wiLFxuICAgICAgXCJ9XCJcbiAgICBdO1xuXHRcbn1cblxuUElYSS5QcmltaXRpdmVTaGFkZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpXG57XG5cdHZhciBwcm9ncmFtID0gUElYSS5jb21waWxlUHJvZ3JhbSh0aGlzLnZlcnRleFNyYywgdGhpcy5mcmFnbWVudFNyYyk7XG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcblx0XG5cdC8vIGdldCBhbmQgc3RvcmUgdGhlIHVuaWZvcm1zIGZvciB0aGUgc2hhZGVyXG5cdHRoaXMucHJvamVjdGlvblZlY3RvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInByb2plY3Rpb25WZWN0b3JcIik7XG5cdHRoaXMub2Zmc2V0VmVjdG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwib2Zmc2V0VmVjdG9yXCIpO1xuICBcbiAgLy8gZ2V0IGFuZCBzdG9yZSB0aGUgYXR0cmlidXRlc1xuICB0aGlzLmFWZXJ0ZXhQb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYVZlcnRleFBvc2l0aW9uXCIpO1xuXHR0aGlzLmNvbG9yQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhQ29sb3JcIik7XG5cdFxuICB0aGlzLnRyYW5zbGF0aW9uTWF0cml4ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidHJhbnNsYXRpb25NYXRyaXhcIik7XG4gIHRoaXMuYWxwaGEgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJhbHBoYVwiKTtcblxuXHR0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBzZXQgb2YgZnVuY3Rpb25zIHVzZWQgYnkgdGhlIHdlYkdMIHJlbmRlcmVyIHRvIGRyYXcgdGhlIHByaW1pdGl2ZSBncmFwaGljcyBkYXRhXG4gKlxuICogQGNsYXNzIENhbnZhc0dyYXBoaWNzXG4gKi9cblBJWEkuV2ViR0xHcmFwaGljcyA9IGZ1bmN0aW9uKClcbntcblx0XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVuZGVyR3JhcGhpY3NcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gcHJvamVjdGlvbiB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MgPSBmdW5jdGlvbihncmFwaGljcywgcHJvamVjdGlvbilcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdGlmKCFncmFwaGljcy5fd2ViR0wpZ3JhcGhpY3MuX3dlYkdMID0ge3BvaW50czpbXSwgaW5kaWNlczpbXSwgbGFzdEluZGV4OjAsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICBidWZmZXI6Z2wuY3JlYXRlQnVmZmVyKCksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgIGluZGV4QnVmZmVyOmdsLmNyZWF0ZUJ1ZmZlcigpfTtcblx0XG5cdGlmKGdyYXBoaWNzLmRpcnR5KVxuXHR7XG5cdFx0Z3JhcGhpY3MuZGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHRpZihncmFwaGljcy5jbGVhckRpcnR5KVxuXHRcdHtcblx0XHRcdGdyYXBoaWNzLmNsZWFyRGlydHkgPSBmYWxzZTtcblx0XHRcdFxuXHRcdFx0Z3JhcGhpY3MuX3dlYkdMLmxhc3RJbmRleCA9IDA7XG5cdFx0XHRncmFwaGljcy5fd2ViR0wucG9pbnRzID0gW107XG5cdFx0XHRncmFwaGljcy5fd2ViR0wuaW5kaWNlcyA9IFtdO1xuXHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdFBJWEkuV2ViR0xHcmFwaGljcy51cGRhdGVHcmFwaGljcyhncmFwaGljcyk7XG5cdH1cblx0XG5cdFBJWEkuYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIoKTtcblx0XG5cdC8vIFRoaXMgIGNvdWxkIGJlIHNwZWVkZWQgdXAgZm8gc3VyZSFcblx0dmFyIG0gPSBQSVhJLm1hdDMuY2xvbmUoZ3JhcGhpY3Mud29ybGRUcmFuc2Zvcm0pO1xuXHRcblx0UElYSS5tYXQzLnRyYW5zcG9zZShtKTtcblx0XG5cdC8vIHNldCB0aGUgbWF0cml4IHRyYW5zZm9ybSBmb3IgdGhlIFxuIFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cbiBcdGdsLnVuaWZvcm1NYXRyaXgzZnYoUElYSS5wcmltaXRpdmVTaGFkZXIudHJhbnNsYXRpb25NYXRyaXgsIGZhbHNlLCBtKTtcbiBcdFxuXHRnbC51bmlmb3JtMmYoUElYSS5wcmltaXRpdmVTaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCAtcHJvamVjdGlvbi55KTtcblx0Z2wudW5pZm9ybTJmKFBJWEkucHJpbWl0aXZlU2hhZGVyLm9mZnNldFZlY3RvciwgLVBJWEkub2Zmc2V0LngsIC1QSVhJLm9mZnNldC55KTtcblx0XG5cdGdsLnVuaWZvcm0xZihQSVhJLnByaW1pdGl2ZVNoYWRlci5hbHBoYSwgZ3JhcGhpY3Mud29ybGRBbHBoYSk7XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBncmFwaGljcy5fd2ViR0wuYnVmZmVyKTtcblx0XG5cdGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoUElYSS5wcmltaXRpdmVTaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDQgKiA2LCAwKTtcblx0Z2wudmVydGV4QXR0cmliUG9pbnRlcihQSVhJLnByaW1pdGl2ZVNoYWRlci5jb2xvckF0dHJpYnV0ZSwgNCwgZ2wuRkxPQVQsIGZhbHNlLDQgKiA2LCAyICogNCk7XG5cdFxuXHQvLyBzZXQgdGhlIGluZGV4IGJ1ZmZlciFcblx0Z2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmluZGV4QnVmZmVyKTtcblx0XG5cblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFX1NUUklQLCAgZ3JhcGhpY3MuX3dlYkdMLmluZGljZXMubGVuZ3RoLCBnbC5VTlNJR05FRF9TSE9SVCwgMCApO1xuXHRcblx0UElYSS5kZWFjdGl2YXRlUHJpbWl0aXZlU2hhZGVyKCk7XG5cdFxuXHRcblx0Ly8gcmV0dXJuIHRvIGRlZmF1bHQgc2hhZGVyLi4uXG4vL1x0UElYSS5hY3RpdmF0ZVNoYWRlcihQSVhJLmRlZmF1bHRTaGFkZXIpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGdyYXBoaWNzIG9iamVjdFxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIHVwZGF0ZUdyYXBoaWNzXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MudXBkYXRlR3JhcGhpY3MgPSBmdW5jdGlvbihncmFwaGljcylcbntcblx0Zm9yICh2YXIgaT1ncmFwaGljcy5fd2ViR0wubGFzdEluZGV4OyBpIDwgZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhLmxlbmd0aDsgaSsrKSBcblx0e1xuXHRcdHZhciBkYXRhID0gZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhW2ldO1xuXHRcdFxuXHRcdGlmKGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLlBPTFkpXG5cdFx0e1xuXHRcdFx0aWYoZGF0YS5maWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihkYXRhLnBvaW50cy5sZW5ndGg+MykgXG5cdFx0XHRcdFBJWEkuV2ViR0xHcmFwaGljcy5idWlsZFBvbHkoZGF0YSwgZ3JhcGhpY3MuX3dlYkdMKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGggPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRMaW5lKGRhdGEsIGdyYXBoaWNzLl93ZWJHTCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuUkVDVClcblx0XHR7XG5cdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRSZWN0YW5nbGUoZGF0YSwgZ3JhcGhpY3MuX3dlYkdMKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5DSVJDIHx8IGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLkVMSVApXG5cdFx0e1xuXHRcdFx0UElYSS5XZWJHTEdyYXBoaWNzLmJ1aWxkQ2lyY2xlKGRhdGEsIGdyYXBoaWNzLl93ZWJHTCk7XG5cdFx0fVxuXHR9O1xuXHRcblx0Z3JhcGhpY3MuX3dlYkdMLmxhc3RJbmRleCA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YS5sZW5ndGg7XG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXG5cdGdyYXBoaWNzLl93ZWJHTC5nbFBvaW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoZ3JhcGhpY3MuX3dlYkdMLnBvaW50cyk7XG5cdFxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmJ1ZmZlcik7XG5cdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBncmFwaGljcy5fd2ViR0wuZ2xQb2ludHMsIGdsLlNUQVRJQ19EUkFXKTtcblx0XG5cdGdyYXBoaWNzLl93ZWJHTC5nbEluZGljaWVzID0gbmV3IFVpbnQxNkFycmF5KGdyYXBoaWNzLl93ZWJHTC5pbmRpY2VzKTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGdyYXBoaWNzLl93ZWJHTC5pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmdsSW5kaWNpZXMsIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuLyoqXG4gKiBCdWlsZHMgYSByZWN0YW5nbGUgdG8gZHJhd1xuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGJ1aWxkUmVjdGFuZ2xlXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRSZWN0YW5nbGUgPSBmdW5jdGlvbihncmFwaGljc0RhdGEsIHdlYkdMRGF0YSlcbntcblx0Ly8gLS0tIC8vXG5cdC8vIG5lZWQgdG8gY29udmVydCBwb2ludHMgdG8gYSBuaWNlIHJlZ3VsYXIgZGF0YVxuXHQvLyBcblx0dmFyIHJlY3REYXRhID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcblx0dmFyIHggPSByZWN0RGF0YVswXTtcblx0dmFyIHkgPSByZWN0RGF0YVsxXTtcblx0dmFyIHdpZHRoID0gcmVjdERhdGFbMl07XG5cdHZhciBoZWlnaHQgPSByZWN0RGF0YVszXTtcblx0XG5cdFxuXHRpZihncmFwaGljc0RhdGEuZmlsbClcblx0e1xuXHRcdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5maWxsQ29sb3IpO1xuXHRcdHZhciBhbHBoYSA9IGdyYXBoaWNzRGF0YS5maWxsQWxwaGE7XG5cdFx0XG5cdFx0dmFyIHIgPSBjb2xvclswXSAqIGFscGhhO1xuXHRcdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0XHR2YXIgYiA9IGNvbG9yWzJdICogYWxwaGE7XG5cdFxuXHRcdHZhciB2ZXJ0cyA9IHdlYkdMRGF0YS5wb2ludHM7XG5cdFx0dmFyIGluZGljZXMgPSB3ZWJHTERhdGEuaW5kaWNlcztcblx0XG5cdFx0dmFyIHZlcnRQb3MgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XHRcblx0XHQvLyBzdGFydFxuXHRcdHZlcnRzLnB1c2goeCwgeSk7XG5cdFx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFx0XG5cdFx0dmVydHMucHVzaCh4ICsgd2lkdGgsIHkpO1xuXHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFxuXHRcdHZlcnRzLnB1c2goeCAsIHkgKyBoZWlnaHQpO1xuXHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFxuXHRcdHZlcnRzLnB1c2goeCArIHdpZHRoLCB5ICsgaGVpZ2h0KTtcblx0XHR2ZXJ0cy5wdXNoKHIsIGcsIGIsIGFscGhhKTtcblx0XHRcblx0XHQvLyBpbnNlcnQgMiBkZWFkIHRyaWFuZ2xlcy4uXG5cdFx0aW5kaWNlcy5wdXNoKHZlcnRQb3MsIHZlcnRQb3MsIHZlcnRQb3MrMSwgdmVydFBvcysyLCB2ZXJ0UG9zKzMsIHZlcnRQb3MrMylcblx0fVxuXHRcblx0aWYoZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aClcblx0e1xuXHRcdGdyYXBoaWNzRGF0YS5wb2ludHMgPSBbeCwgeSxcblx0XHRcdFx0ICB4ICsgd2lkdGgsIHksXG5cdFx0XHRcdCAgeCArIHdpZHRoLCB5ICsgaGVpZ2h0LFxuXHRcdFx0XHQgIHgsIHkgKyBoZWlnaHQsXG5cdFx0XHRcdCAgeCwgeV07XG5cdFxuXHRcdFBJWEkuV2ViR0xHcmFwaGljcy5idWlsZExpbmUoZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpO1xuXHR9XG5cdFxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIGNpcmNsZSB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRDaXJjbGVcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gd2ViR0xEYXRhIHtPYmplY3R9XG4gKi9cblBJWEkuV2ViR0xHcmFwaGljcy5idWlsZENpcmNsZSA9IGZ1bmN0aW9uKGdyYXBoaWNzRGF0YSwgd2ViR0xEYXRhKVxue1xuXHQvLyAtLS0gLy9cblx0Ly8gbmVlZCB0byBjb252ZXJ0IHBvaW50cyB0byBhIG5pY2UgcmVndWxhciBkYXRhXG5cdC8vIFxuXHR2YXIgcmVjdERhdGEgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHR2YXIgeCA9IHJlY3REYXRhWzBdO1xuXHR2YXIgeSA9IHJlY3REYXRhWzFdO1xuXHR2YXIgd2lkdGggPSByZWN0RGF0YVsyXTtcblx0dmFyIGhlaWdodCA9IHJlY3REYXRhWzNdO1xuXHRcblx0dmFyIHRvdGFsU2VncyA9IDQwO1xuXHR2YXIgc2VnID0gKE1hdGguUEkgKiAyKSAvIHRvdGFsU2VncyA7XG5cdFx0XG5cdGlmKGdyYXBoaWNzRGF0YS5maWxsKVxuXHR7XG5cdFx0dmFyIGNvbG9yID0gSEVYdG9SR0IoZ3JhcGhpY3NEYXRhLmZpbGxDb2xvcik7XG5cdFx0dmFyIGFscGhhID0gZ3JhcGhpY3NEYXRhLmZpbGxBbHBoYTtcblxuXHRcdHZhciByID0gY29sb3JbMF0gKiBhbHBoYTtcblx0XHR2YXIgZyA9IGNvbG9yWzFdICogYWxwaGE7XG5cdFx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0XHR2YXIgdmVydHMgPSB3ZWJHTERhdGEucG9pbnRzO1xuXHRcdHZhciBpbmRpY2VzID0gd2ViR0xEYXRhLmluZGljZXM7XG5cdFxuXHRcdHZhciB2ZWNQb3MgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XHRcblx0XHRpbmRpY2VzLnB1c2godmVjUG9zKTtcblx0XHRcblx0XHRmb3IgKHZhciBpPTA7IGkgPCB0b3RhbFNlZ3MgKyAxIDsgaSsrKSBcblx0XHR7XG5cdFx0XHR2ZXJ0cy5wdXNoKHgseSwgciwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHggKyBNYXRoLnNpbihzZWcgKiBpKSAqIHdpZHRoLFxuXHRcdFx0XHRcdCAgIHkgKyBNYXRoLmNvcyhzZWcgKiBpKSAqIGhlaWdodCxcblx0XHRcdFx0XHQgICByLCBnLCBiLCBhbHBoYSk7XG5cdFx0XG5cdFx0XHRpbmRpY2VzLnB1c2godmVjUG9zKyssIHZlY1BvcysrKTtcblx0XHR9O1xuXHRcdFxuXHRcdGluZGljZXMucHVzaCh2ZWNQb3MtMSk7XG5cdH1cblx0XG5cdGlmKGdyYXBoaWNzRGF0YS5saW5lV2lkdGgpXG5cdHtcblx0XHRncmFwaGljc0RhdGEucG9pbnRzID0gW107XG5cdFx0XG5cdFx0Zm9yICh2YXIgaT0wOyBpIDwgdG90YWxTZWdzICsgMTsgaSsrKSBcblx0XHR7XG5cdFx0XHRncmFwaGljc0RhdGEucG9pbnRzLnB1c2goeCArIE1hdGguc2luKHNlZyAqIGkpICogd2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0XHQgeSArIE1hdGguY29zKHNlZyAqIGkpICogaGVpZ2h0KVxuXHRcdH07XG5cdFx0XG5cdFx0UElYSS5XZWJHTEdyYXBoaWNzLmJ1aWxkTGluZShncmFwaGljc0RhdGEsIHdlYkdMRGF0YSk7XG5cdH1cblx0XG59XG5cbi8qKlxuICogQnVpbGRzIGEgbGluZSB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRMaW5lXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRMaW5lID0gZnVuY3Rpb24oZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpXG57XG5cdC8vIFRPRE8gT1BUSU1JU0UhXG5cdFxuXHR2YXIgd3JhcCA9IHRydWU7XG5cdHZhciBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoID09IDApcmV0dXJuO1xuXHRcblx0Ly8gaWYgdGhlIGxpbmUgd2lkdGggaXMgYW4gb2RkIG51bWJlciBhZGQgMC41IHRvIGFsaWduIHRvIGEgd2hvbGUgcGl4ZWxcblx0aWYoZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aCUyKVxuXHR7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHBvaW50c1tpXSArPSAwLjU7XG5cdFx0fTtcblx0fVxuXG5cdC8vIGdldCBmaXJzdCBhbmQgbGFzdCBwb2ludC4uIGZpZ3VyZSBvdXQgdGhlIG1pZGRsZSFcblx0dmFyIGZpcnN0UG9pbnQgPSBuZXcgUElYSS5Qb2ludCggcG9pbnRzWzBdLCBwb2ludHNbMV0gKTtcblx0dmFyIGxhc3RQb2ludCA9IG5ldyBQSVhJLlBvaW50KCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdLCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdICk7XG5cdFxuXHQvLyBpZiB0aGUgZmlyc3QgcG9pbnQgaXMgdGhlIGxhc3QgcG9pbnQgLSBnb29uYSBoYXZlIGlzc3VlcyA6KVxuXHRpZihmaXJzdFBvaW50LnggPT0gbGFzdFBvaW50LnggJiYgZmlyc3RQb2ludC55ID09IGxhc3RQb2ludC55KVxuXHR7XG5cdFx0cG9pbnRzLnBvcCgpO1xuXHRcdHBvaW50cy5wb3AoKTtcblx0XHRcblx0XHRsYXN0UG9pbnQgPSBuZXcgUElYSS5Qb2ludCggcG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSwgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSApO1xuXHRcdFxuXHRcdHZhciBtaWRQb2ludFggPSBsYXN0UG9pbnQueCArIChmaXJzdFBvaW50LnggLSBsYXN0UG9pbnQueCkgKjAuNTtcblx0XHR2YXIgbWlkUG9pbnRZID0gbGFzdFBvaW50LnkgKyAoZmlyc3RQb2ludC55IC0gbGFzdFBvaW50LnkpICowLjU7XG5cdFx0XG5cdFx0cG9pbnRzLnVuc2hpZnQobWlkUG9pbnRYLCBtaWRQb2ludFkpO1xuXHRcdHBvaW50cy5wdXNoKG1pZFBvaW50WCwgbWlkUG9pbnRZKVxuXHR9XG5cdFxuXHR2YXIgdmVydHMgPSB3ZWJHTERhdGEucG9pbnRzO1xuXHR2YXIgaW5kaWNlcyA9IHdlYkdMRGF0YS5pbmRpY2VzO1xuXHR2YXIgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG5cdHZhciBpbmRleENvdW50ID0gcG9pbnRzLmxlbmd0aDtcblx0dmFyIGluZGV4U3RhcnQgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XG5cdC8vIERSQVcgdGhlIExpbmVcblx0dmFyIHdpZHRoID0gZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aCAvIDI7XG5cdFxuXHQvLyBzb3J0IGNvbG9yXG5cdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5saW5lQ29sb3IpO1xuXHR2YXIgYWxwaGEgPSBncmFwaGljc0RhdGEubGluZUFscGhhO1xuXHR2YXIgciA9IGNvbG9yWzBdICogYWxwaGE7XG5cdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0dmFyIHAxeCwgcDF5LCBwMngsIHAyeSwgcDN4LCBwM3k7XG5cdHZhciBwZXJweCwgcGVycHksIHBlcnAyeCwgcGVycDJ5LCBwZXJwM3gsIHBlcnAzeTtcblx0dmFyIGlweCwgaXB5O1xuXHR2YXIgYTEsIGIxLCBjMSwgYTIsIGIyLCBjMjtcblx0dmFyIGRlbm9tLCBwZGlzdCwgZGlzdDtcblx0XG5cdHAxeCA9IHBvaW50c1swXTtcblx0cDF5ID0gcG9pbnRzWzFdO1xuXHRcblx0cDJ4ID0gcG9pbnRzWzJdO1xuXHRwMnkgPSBwb2ludHNbM107XG5cdFxuXHRwZXJweCA9IC0ocDF5IC0gcDJ5KTtcblx0cGVycHkgPSAgcDF4IC0gcDJ4O1xuXHRcblx0ZGlzdCA9IE1hdGguc3FydChwZXJweCpwZXJweCArIHBlcnB5KnBlcnB5KTtcblx0XG5cdHBlcnB4IC89IGRpc3Q7XG5cdHBlcnB5IC89IGRpc3Q7XG5cdHBlcnB4ICo9IHdpZHRoO1xuXHRwZXJweSAqPSB3aWR0aDtcblx0XG5cdC8vIHN0YXJ0XG5cdHZlcnRzLnB1c2gocDF4IC0gcGVycHggLCBwMXkgLSBwZXJweSxcblx0XHRcdFx0ciwgZywgYiwgYWxwaGEpO1xuXHRcblx0dmVydHMucHVzaChwMXggKyBwZXJweCAsIHAxeSArIHBlcnB5LFxuXHRcdFx0XHRyLCBnLCBiLCBhbHBoYSk7XG5cdFxuXHRmb3IgKHZhciBpID0gMTsgaSA8IGxlbmd0aC0xOyBpKyspIFxuXHR7XG5cdFx0cDF4ID0gcG9pbnRzWyhpLTEpKjJdO1xuXHRcdHAxeSA9IHBvaW50c1soaS0xKSoyICsgMV07XG5cdFx0XG5cdFx0cDJ4ID0gcG9pbnRzWyhpKSoyXVxuXHRcdHAyeSA9IHBvaW50c1soaSkqMiArIDFdXG5cdFx0XG5cdFx0cDN4ID0gcG9pbnRzWyhpKzEpKjJdO1xuXHRcdHAzeSA9IHBvaW50c1soaSsxKSoyICsgMV07XG5cdFx0XG5cdFx0cGVycHggPSAtKHAxeSAtIHAyeSk7XG5cdFx0cGVycHkgPSBwMXggLSBwMng7XG5cdFx0XG5cdFx0ZGlzdCA9IE1hdGguc3FydChwZXJweCpwZXJweCArIHBlcnB5KnBlcnB5KTtcblx0XHRwZXJweCAvPSBkaXN0O1xuXHRcdHBlcnB5IC89IGRpc3Q7XG5cdFx0cGVycHggKj0gd2lkdGg7XG5cdFx0cGVycHkgKj0gd2lkdGg7XG5cblx0XHRwZXJwMnggPSAtKHAyeSAtIHAzeSk7XG5cdFx0cGVycDJ5ID0gcDJ4IC0gcDN4O1xuXHRcdFxuXHRcdGRpc3QgPSBNYXRoLnNxcnQocGVycDJ4KnBlcnAyeCArIHBlcnAyeSpwZXJwMnkpO1xuXHRcdHBlcnAyeCAvPSBkaXN0O1xuXHRcdHBlcnAyeSAvPSBkaXN0O1xuXHRcdHBlcnAyeCAqPSB3aWR0aDtcblx0XHRwZXJwMnkgKj0gd2lkdGg7XG5cdFx0XG5cdFx0YTEgPSAoLXBlcnB5ICsgcDF5KSAtICgtcGVycHkgKyBwMnkpO1xuXHQgICAgYjEgPSAoLXBlcnB4ICsgcDJ4KSAtICgtcGVycHggKyBwMXgpO1xuXHQgICAgYzEgPSAoLXBlcnB4ICsgcDF4KSAqICgtcGVycHkgKyBwMnkpIC0gKC1wZXJweCArIHAyeCkgKiAoLXBlcnB5ICsgcDF5KTtcblx0ICAgIGEyID0gKC1wZXJwMnkgKyBwM3kpIC0gKC1wZXJwMnkgKyBwMnkpO1xuXHQgICAgYjIgPSAoLXBlcnAyeCArIHAyeCkgLSAoLXBlcnAyeCArIHAzeCk7XG5cdCAgICBjMiA9ICgtcGVycDJ4ICsgcDN4KSAqICgtcGVycDJ5ICsgcDJ5KSAtICgtcGVycDJ4ICsgcDJ4KSAqICgtcGVycDJ5ICsgcDN5KTtcblx0IFxuXHQgICAgZGVub20gPSBhMSpiMiAtIGEyKmIxO1xuXG5cdCAgIGlmKE1hdGguYWJzKGRlbm9tKSA8IDAuMSApXG5cdFx0e1xuXHRcdFxuXHRcdFx0ZGVub20rPTEwLjE7XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIHBlcnB4ICwgcDJ5IC0gcGVycHksXG5cdFx0XHRcdHIsIGcsIGIsIGFscGhhKTtcblx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCArIHBlcnB4ICwgcDJ5ICsgcGVycHksXG5cdFx0XHRcdHIsIGcsIGIsIGFscGhhKTtcblx0XHRcdFxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHQgICAgXG5cdCAgICBweCA9IChiMSpjMiAtIGIyKmMxKS9kZW5vbTtcblx0ICAgIHB5ID0gKGEyKmMxIC0gYTEqYzIpL2Rlbm9tO1xuXHRcdFxuXHRcdFx0XG5cdFx0cGRpc3QgPSAocHggLXAyeCkgKiAocHggLXAyeCkgKyAocHkgLXAyeSkgKyAocHkgLXAyeSk7XG5cdFx0XG5cblx0XHRpZihwZGlzdCA+IDE0MCAqIDE0MClcblx0XHR7XG5cdFx0XHRwZXJwM3ggPSBwZXJweCAtIHBlcnAyeDtcblx0XHRcdHBlcnAzeSA9IHBlcnB5IC0gcGVycDJ5O1xuXHRcdFx0XG5cdFx0XHRkaXN0ID0gTWF0aC5zcXJ0KHBlcnAzeCpwZXJwM3ggKyBwZXJwM3kqcGVycDN5KTtcblx0XHRcdHBlcnAzeCAvPSBkaXN0O1xuXHRcdFx0cGVycDN5IC89IGRpc3Q7XG5cdFx0XHRwZXJwM3ggKj0gd2lkdGg7XG5cdFx0XHRwZXJwM3kgKj0gd2lkdGg7XG5cdFx0XHRcblx0XHRcdHZlcnRzLnB1c2gocDJ4IC0gcGVycDN4LCBwMnkgLXBlcnAzeSk7XG5cdFx0XHR2ZXJ0cy5wdXNoKHIsIGcsIGIsIGFscGhhKTtcblx0XHRcdFxuXHRcdFx0dmVydHMucHVzaChwMnggKyBwZXJwM3gsIHAyeSArcGVycDN5KTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIHBlcnAzeCwgcDJ5IC1wZXJwM3kpO1xuXHRcdFx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFx0XHRcblx0XHRcdGluZGV4Q291bnQrKztcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblxuXHRcdFx0dmVydHMucHVzaChweCAsIHB5KTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIChweC1wMngpLCBwMnkgLSAocHkgLSBwMnkpKTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdH1cblx0fVxuXHRcblx0cDF4ID0gcG9pbnRzWyhsZW5ndGgtMikqMl1cblx0cDF5ID0gcG9pbnRzWyhsZW5ndGgtMikqMiArIDFdIFxuXHRcblx0cDJ4ID0gcG9pbnRzWyhsZW5ndGgtMSkqMl1cblx0cDJ5ID0gcG9pbnRzWyhsZW5ndGgtMSkqMiArIDFdXG5cdFxuXHRwZXJweCA9IC0ocDF5IC0gcDJ5KVxuXHRwZXJweSA9IHAxeCAtIHAyeDtcblx0XG5cdGRpc3QgPSBNYXRoLnNxcnQocGVycHgqcGVycHggKyBwZXJweSpwZXJweSk7XG5cdHBlcnB4IC89IGRpc3Q7XG5cdHBlcnB5IC89IGRpc3Q7XG5cdHBlcnB4ICo9IHdpZHRoO1xuXHRwZXJweSAqPSB3aWR0aDtcblx0XG5cdHZlcnRzLnB1c2gocDJ4IC0gcGVycHggLCBwMnkgLSBwZXJweSlcblx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFxuXHR2ZXJ0cy5wdXNoKHAyeCArIHBlcnB4ICwgcDJ5ICsgcGVycHkpXG5cdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcblx0aW5kaWNlcy5wdXNoKGluZGV4U3RhcnQpO1xuXHRcblx0Zm9yICh2YXIgaT0wOyBpIDwgaW5kZXhDb3VudDsgaSsrKSBcblx0e1xuXHRcdGluZGljZXMucHVzaChpbmRleFN0YXJ0KyspO1xuXHR9O1xuXHRcblx0aW5kaWNlcy5wdXNoKGluZGV4U3RhcnQtMSk7XG59XG5cbi8qKlxuICogQnVpbGRzIGEgcG9seWdvbiB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRQb2x5XG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRQb2x5ID0gZnVuY3Rpb24oZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpXG57XG5cdHZhciBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgNilyZXR1cm47XG5cdFxuXHQvLyBnZXQgZmlyc3QgYW5kIGxhc3QgcG9pbnQuLiBmaWd1cmUgb3V0IHRoZSBtaWRkbGUhXG5cdHZhciB2ZXJ0cyA9IHdlYkdMRGF0YS5wb2ludHM7XG5cdHZhciBpbmRpY2VzID0gd2ViR0xEYXRhLmluZGljZXM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG5cdFxuXHQvLyBzb3J0IGNvbG9yXG5cdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5maWxsQ29sb3IpO1xuXHR2YXIgYWxwaGEgPSBncmFwaGljc0RhdGEuZmlsbEFscGhhO1xuXHR2YXIgciA9IGNvbG9yWzBdICogYWxwaGE7XG5cdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0dmFyIHRyaWFuZ2xlcyA9IFBJWEkuUG9seUsuVHJpYW5ndWxhdGUocG9pbnRzKTtcblx0XG5cdHZhciB2ZXJ0UG9zID0gdmVydHMubGVuZ3RoIC8gNjtcblx0XG5cdGZvciAodmFyIGk9MDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrPTMpIFxuXHR7XG5cdFx0aW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpXSArIHZlcnRQb3MpO1xuXHRcdGluZGljZXMucHVzaCh0cmlhbmdsZXNbaV0gKyB2ZXJ0UG9zKTtcblx0XHRpbmRpY2VzLnB1c2godHJpYW5nbGVzW2krMV0gKyB2ZXJ0UG9zKTtcblx0XHRpbmRpY2VzLnB1c2godHJpYW5nbGVzW2krMl0gK3ZlcnRQb3MpO1xuXHRcdGluZGljZXMucHVzaCh0cmlhbmdsZXNbaSsyXSArIHZlcnRQb3MpO1xuXHR9O1xuXHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgXG5cdHtcblx0XHR2ZXJ0cy5wdXNoKHBvaW50c1tpICogMl0sIHBvaW50c1tpICogMiArIDFdLFxuXHRcdFx0XHQgICByLCBnLCBiLCBhbHBoYSk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIEhFWHRvUkdCKGhleCkge1xuXHRyZXR1cm4gWyhoZXggPj4gMTYgJiAweEZGKSAvIDI1NSwgKCBoZXggPj4gOCAmIDB4RkYpIC8gMjU1LCAoaGV4ICYgMHhGRikvIDI1NV07XG59XG5cblxuXG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5QSVhJLl9kZWZhdWx0RnJhbWUgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEsMSk7XG5cbi8vIGFuIGluc3RhbmNlIG9mIHRoZSBnbCBjb250ZXh0Li5cbi8vIG9ubHkgb25lIGF0IHRoZSBtb21lbnQgOi9cblBJWEkuZ2w7XG5cbi8qKlxuICogdGhlIFdlYkdMUmVuZGVyZXIgaXMgZHJhd3MgdGhlIHN0YWdlIGFuZCBhbGwgaXRzIGNvbnRlbnQgb250byBhIHdlYkdMIGVuYWJsZWQgY2FudmFzLiBUaGlzIHJlbmRlcmVyXG4gKiBzaG91bGQgYmUgdXNlZCBmb3IgYnJvd3NlcnMgc3VwcG9ydCB3ZWJHTC4gVGhpcyBSZW5kZXIgd29ya3MgYnkgYXV0b21hdGljYWxseSBtYW5hZ2luZyB3ZWJHTEJhdGNocy5cbiAqIFNvIG5vIG5lZWQgZm9yIFNwcml0ZSBCYXRjaCdzIG9yIFNwcml0ZSBDbG91ZCdzXG4gKiBEb250IGZvcmdldCB0byBhZGQgdGhlIHZpZXcgdG8geW91ciBET00gb3IgeW91IHdpbGwgbm90IHNlZSBhbnl0aGluZyA6KVxuICpcbiAqIEBjbGFzcyBXZWJHTFJlbmRlcmVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB3aWR0aD0wIHtOdW1iZXJ9IHRoZSB3aWR0aCBvZiB0aGUgY2FudmFzIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQ9MCB7TnVtYmVyfSB0aGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgdmlld1xuICogQHBhcmFtIHZpZXcge0NhbnZhc30gdGhlIGNhbnZhcyB0byB1c2UgYXMgYSB2aWV3LCBvcHRpb25hbFxuICogQHBhcmFtIHRyYW5zcGFyZW50PWZhbHNlIHtCb29sZWFufSB0aGUgdHJhbnNwYXJlbmN5IG9mIHRoZSByZW5kZXIgdmlldywgZGVmYXVsdCBmYWxzZVxuICogQHBhcmFtIGFudGlhbGlhcz1mYWxzZSB7Qm9vbGVhbn0gc2V0cyBhbnRpYWxpYXMgKG9ubHkgYXBwbGljYWJsZSBpbiBjaHJvbWUgYXQgdGhlIG1vbWVudClcbiAqIFxuICovXG5QSVhJLldlYkdMUmVuZGVyZXIgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudCwgYW50aWFsaWFzKVxue1xuXHQvLyBkbyBhIGNhdGNoLi4gb25seSAxIHdlYkdMIHJlbmRlcmVyLi5cblxuXHR0aGlzLnRyYW5zcGFyZW50ID0gISF0cmFuc3BhcmVudDtcblxuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgODAwO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodCB8fCA2MDA7XG5cblx0dGhpcy52aWV3ID0gdmlldyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApOyBcbiAgICB0aGlzLnZpZXcud2lkdGggPSB0aGlzLndpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cblx0Ly8gZGVhbCB3aXRoIGxvc2luZyBjb250ZXh0Li5cdFxuICAgIHZhciBzY29wZSA9IHRoaXM7XG5cdHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgZnVuY3Rpb24oZXZlbnQpIHsgc2NvcGUuaGFuZGxlQ29udGV4dExvc3QoZXZlbnQpOyB9LCBmYWxzZSlcblx0dGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgZnVuY3Rpb24oZXZlbnQpIHsgc2NvcGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkKGV2ZW50KTsgfSwgZmFsc2UpXG5cblx0dGhpcy5iYXRjaHMgPSBbXTtcblxuXHR2YXIgb3B0aW9ucyA9IHtcblx0XHRhbHBoYTogdGhpcy50cmFuc3BhcmVudCxcblx0XHRhbnRpYWxpYXM6ISFhbnRpYWxpYXMsIC8vIFNQRUVEIFVQPz9cblx0XHRwcmVtdWx0aXBsaWVkQWxwaGE6ZmFsc2UsXG5cdFx0c3RlbmNpbDp0cnVlXG5cdH1cblxuXHQvL3RyeSAnZXhwZXJpbWVudGFsLXdlYmdsJ1xuXHR0cnkge1xuXHRcdFBJWEkuZ2wgPSB0aGlzLmdsID0gdGhpcy52aWV3LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIiwgIG9wdGlvbnMpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly90cnkgJ3dlYmdsJ1xuXHRcdHRyeSB7XG5cdFx0XHRQSVhJLmdsID0gdGhpcy5nbCA9IHRoaXMudmlldy5nZXRDb250ZXh0KFwid2ViZ2xcIiwgIG9wdGlvbnMpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIGZhaWwsIG5vdCBhYmxlIHRvIGdldCBhIGNvbnRleHRcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB3ZWJHTC4gVHJ5IHVzaW5nIHRoZSBjYW52YXMgcmVuZGVyZXJcIiArIHRoaXMpO1xuXHRcdH1cblx0fVxuXG4gICAgUElYSS5pbml0RGVmYXVsdFNoYWRlcnMoKTtcbiBcblxuXHRcblxuICAgLy8gUElYSS5hY3RpdmF0ZURlZmF1bHRTaGFkZXIoKTtcblxuICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgXG4gICAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG5cblxuICAgIFBJWEkuV2ViR0xSZW5kZXJlci5nbCA9IGdsO1xuXG4gICAgdGhpcy5iYXRjaCA9IG5ldyBQSVhJLldlYkdMQmF0Y2goZ2wpO1xuICAgXHRnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpO1xuICAgXHRnbC5kaXNhYmxlKGdsLkNVTExfRkFDRSk7XG5cbiAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgIGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0aGlzLnRyYW5zcGFyZW50KTsgXG5cbiAgICBQSVhJLnByb2plY3Rpb24gPSBuZXcgUElYSS5Qb2ludCg0MDAsIDMwMCk7XG4gICAgUElYSS5vZmZzZXQgPSBuZXcgUElYSS5Qb2ludCgwLCAwKTtcblxuICAgIC8vIFRPRE8gcmVtb3ZlIHRoZWFzZSBnbG9iYWxzLi5cblxuICAgIHRoaXMucmVzaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLmNvbnRleHRMb3N0ID0gZmFsc2U7XG5cblx0Ly9QSVhJLnB1c2hTaGFkZXIoUElYSS5kZWZhdWx0U2hhZGVyKTtcblxuICAgIHRoaXMuc3RhZ2VSZW5kZXJHcm91cCA9IG5ldyBQSVhJLldlYkdMUmVuZGVyR3JvdXAodGhpcy5nbCwgdGhpcy50cmFuc3BhcmVudCk7XG4gIC8vICB0aGlzLnN0YWdlUmVuZGVyR3JvdXAuID0gdGhpcy50cmFuc3BhcmVudFxufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuV2ViR0xSZW5kZXJlcjtcblxuLyoqXG4gKiBHZXRzIGEgbmV3IFdlYkdMQmF0Y2ggZnJvbSB0aGUgcG9vbFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZ2V0QmF0Y2hcbiAqIEByZXR1cm4ge1dlYkdMQmF0Y2h9XG4gKiBAcHJpdmF0ZSBcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLmdldEJhdGNoID0gZnVuY3Rpb24oKVxue1xuXHRpZihQSVhJLl9iYXRjaHMubGVuZ3RoID09IDApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xCYXRjaChQSVhJLldlYkdMUmVuZGVyZXIuZ2wpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHJldHVybiBQSVhJLl9iYXRjaHMucG9wKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBQdXRzIGEgYmF0Y2ggYmFjayBpbnRvIHRoZSBwb29sXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCByZXR1cm5CYXRjaFxuICogQHBhcmFtIGJhdGNoIHtXZWJHTEJhdGNofSBUaGUgYmF0Y2ggdG8gcmV0dXJuXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2ggPSBmdW5jdGlvbihiYXRjaClcbntcblx0YmF0Y2guY2xlYW4oKTtcdFxuXHRQSVhJLl9iYXRjaHMucHVzaChiYXRjaCk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIHdlYkdMIHZpZXdcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHN0YWdlIHtTdGFnZX0gdGhlIFN0YWdlIGVsZW1lbnQgdG8gYmUgcmVuZGVyZWRcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihzdGFnZSlcbntcblx0aWYodGhpcy5jb250ZXh0TG9zdClyZXR1cm47XG5cdFxuXHRcblx0Ly8gaWYgcmVuZGVyaW5nIGEgbmV3IHN0YWdlIGNsZWFyIHRoZSBiYXRjaHMuLlxuXHRpZih0aGlzLl9fc3RhZ2UgIT09IHN0YWdlKVxuXHR7XG5cdFx0Ly8gVE9ETyBtYWtlIHRoaXMgd29ya1xuXHRcdC8vIGRvbnQgdGhpbmsgdGhpcyBpcyBuZWVkZWQgYW55IG1vcmU/XG5cdFx0dGhpcy5fX3N0YWdlID0gc3RhZ2U7XG5cdFx0dGhpcy5zdGFnZVJlbmRlckdyb3VwLnNldFJlbmRlcmFibGUoc3RhZ2UpO1xuXHR9XG5cblx0Ly8gdXBkYXRlIGFueSB0ZXh0dXJlc1x0XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHRcdFxuXHQvLyB1cGRhdGUgdGhlIHNjZW5lIGdyYXBoXHRcblx0UElYSS52aXNpYmxlQ291bnQrKztcblx0c3RhZ2UudXBkYXRlVHJhbnNmb3JtKCk7XG5cdFxuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXHRcblx0Ly8gLS0gRG9lcyB0aGlzIG5lZWQgdG8gYmUgc2V0IGV2ZXJ5IGZyYW1lPyAtLSAvL1xuXHRnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdGhpcy50cmFuc3BhcmVudCk7IFxuXHRnbC52aWV3cG9ydCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHRcblx0XG4gICBcdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cdFx0XG5cdGdsLmNsZWFyQ29sb3Ioc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMF0sc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMV0sc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMl0sICF0aGlzLnRyYW5zcGFyZW50KTsgICAgIFxuXHRnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuXHQvLyBIQUNLIFRPIFRFU1Rcblx0XG5cdHRoaXMuc3RhZ2VSZW5kZXJHcm91cC5iYWNrZ3JvdW5kQ29sb3IgPSBzdGFnZS5iYWNrZ3JvdW5kQ29sb3JTcGxpdDtcblx0XG5cdFBJWEkucHJvamVjdGlvbi54ID0gIHRoaXMud2lkdGgvMjtcblx0UElYSS5wcm9qZWN0aW9uLnkgPSAgLXRoaXMuaGVpZ2h0LzI7XG5cdFxuXHR0aGlzLnN0YWdlUmVuZGVyR3JvdXAucmVuZGVyKFBJWEkucHJvamVjdGlvbik7XG5cdFxuXHQvLyBpbnRlcmFjdGlvblxuXHQvLyBydW4gaW50ZXJhY3Rpb24hXG5cdGlmKHN0YWdlLmludGVyYWN0aXZlKVxuXHR7XG5cdFx0Ly9uZWVkIHRvIGFkZCBzb21lIGV2ZW50cyFcblx0XHRpZighc3RhZ2UuX2ludGVyYWN0aXZlRXZlbnRzQWRkZWQpXG5cdFx0e1xuXHRcdFx0c3RhZ2UuX2ludGVyYWN0aXZlRXZlbnRzQWRkZWQgPSB0cnVlO1xuXHRcdFx0c3RhZ2UuaW50ZXJhY3Rpb25NYW5hZ2VyLnNldFRhcmdldCh0aGlzKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIGFmdGVyIHJlbmRlcmluZyBsZXRzIGNvbmZpcm0gYWxsIGZyYW1lcyB0aGF0IGhhdmUgYmVlbiB1b2RhdGVkLi5cblx0aWYoUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcy5sZW5ndGggPiAwKVxuXHR7XG5cdFx0Zm9yICh2YXIgaT0wOyBpIDwgUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcy5sZW5ndGg7IGkrKykgXG5cdFx0e1xuXHRcdCAgXHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzW2ldLnVwZGF0ZUZyYW1lID0gZmFsc2U7XG5cdFx0fTtcblx0XHRcblx0XHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzID0gW107XG5cdH1cbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSB0ZXh0dXJlcyBsb2FkZWQgaW50byB0aGlzIHdlYmdsIHJlbmRlcmVyXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCB1cGRhdGVUZXh0dXJlc1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnVwZGF0ZVRleHR1cmVzID0gZnVuY3Rpb24oKVxue1xuXHQvL1RPRE8gYnJlYWsgdGhpcyBvdXQgaW50byBhIHRleHR1cmUgbWFuYWdlci4uLlxuXHRmb3IgKHZhciBpPTA7IGkgPCBQSVhJLnRleHR1cmVzVG9VcGRhdGUubGVuZ3RoOyBpKyspIFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlKFBJWEkudGV4dHVyZXNUb1VwZGF0ZVtpXSk7XG5cdGZvciAodmFyIGk9MDsgaSA8IFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kubGVuZ3RoOyBpKyspIFBJWEkuV2ViR0xSZW5kZXJlci5kZXN0cm95VGV4dHVyZShQSVhJLnRleHR1cmVzVG9EZXN0cm95W2ldKTtcblx0UElYSS50ZXh0dXJlc1RvVXBkYXRlID0gW107XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgbG9hZGVkIHdlYmdsIHRleHR1cmVcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHR1cmVcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfSBUaGUgdGV4dHVyZSB0byB1cGRhdGVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly9UT0RPIGJyZWFrIHRoaXMgb3V0IGludG8gYSB0ZXh0dXJlIG1hbmFnZXIuLi5cblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdGlmKCF0ZXh0dXJlLl9nbFRleHR1cmUpXG5cdHtcblx0XHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cdH1cblxuXHRpZih0ZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdCBcdGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgdHJ1ZSk7XG5cblx0XHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHRleHR1cmUuc291cmNlKTtcblx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcblx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcblxuXHRcdC8vIHJlZ3VsZXIuLi5cblxuXHRcdGlmKCF0ZXh0dXJlLl9wb3dlck9mMilcblx0XHR7XG5cdFx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcblx0XHRcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuUkVQRUFUKTtcblx0XHRcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVCk7XG5cdFx0fVxuXG5cdFx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG5cdH1cbn1cblxuLyoqXG4gKiBEZXN0cm95cyBhIGxvYWRlZCB3ZWJnbCB0ZXh0dXJlXG4gKlxuICogQG1ldGhvZCBkZXN0cm95VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSB0ZXh0dXJlIHRvIHVwZGF0ZVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLmRlc3Ryb3lUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly9UT0RPIGJyZWFrIHRoaXMgb3V0IGludG8gYSB0ZXh0dXJlIG1hbmFnZXIuLi5cblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHRpZih0ZXh0dXJlLl9nbFRleHR1cmUpXG5cdHtcblx0XHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cdFx0Z2wuZGVsZXRlVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlLl9nbFRleHR1cmUpO1xuXHR9XG59XG5cbi8qKlxuICogcmVzaXplcyB0aGUgd2ViR0wgdmlldyB0byB0aGUgc3BlY2lmaWVkIHdpZHRoIGFuZCBoZWlnaHRcbiAqXG4gKiBAbWV0aG9kIHJlc2l6ZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IHRoZSBuZXcgd2lkdGggb2YgdGhlIHdlYkdMIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIHdlYkdMIHZpZXdcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHRoaXMudmlldy53aWR0aCA9IHdpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHRoaXMuZ2wudmlld3BvcnQoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1x0XG5cblx0Ly92YXIgcHJvamVjdGlvbk1hdHJpeCA9IHRoaXMucHJvamVjdGlvbk1hdHJpeDtcblxuXHRQSVhJLnByb2plY3Rpb24ueCA9ICB0aGlzLndpZHRoLzI7XG5cdFBJWEkucHJvamVjdGlvbi55ID0gIC10aGlzLmhlaWdodC8yO1xuXHRcblx0Ly9QSVhJLnNpemUueCA9ICB0aGlzLndpZHRoLzI7XG5cdC8vUElYSS5zaXplLnkgPSAgLXRoaXMuaGVpZ2h0LzI7XG5cbi8vXHRwcm9qZWN0aW9uTWF0cml4WzBdID0gMi90aGlzLndpZHRoO1xuLy9cdHByb2plY3Rpb25NYXRyaXhbNV0gPSAtMi90aGlzLmhlaWdodDtcbi8vXHRwcm9qZWN0aW9uTWF0cml4WzEyXSA9IC0xO1xuLy9cdHByb2plY3Rpb25NYXRyaXhbMTNdID0gMTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIGEgbG9zdCB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCBoYW5kbGVDb250ZXh0TG9zdFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlQ29udGV4dExvc3QgPSBmdW5jdGlvbihldmVudClcbntcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0dGhpcy5jb250ZXh0TG9zdCA9IHRydWU7XG59XG5cbi8qKlxuICogSGFuZGxlcyBhIHJlc3RvcmVkIHdlYmdsIGNvbnRleHRcbiAqXG4gKiBAbWV0aG9kIGhhbmRsZUNvbnRleHRSZXN0b3JlZFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMuZ2wgPSB0aGlzLnZpZXcuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLCAgeyAgXHRcblx0XHRhbHBoYTogdHJ1ZVxuICAgIH0pO1xuXG5cdHRoaXMuaW5pdFNoYWRlcnMoKTtcdFxuXG5cdGZvcih2YXIga2V5IGluIFBJWEkuVGV4dHVyZUNhY2hlKSBcblx0e1xuICAgICAgICBcdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVba2V5XS5iYXNlVGV4dHVyZTtcbiAgICAgICAgXHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBudWxsO1xuICAgICAgICBcdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlKHRleHR1cmUpO1xuXHR9O1xuXG5cdGZvciAodmFyIGk9MDsgaSA8ICB0aGlzLmJhdGNocy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHR0aGlzLmJhdGNoc1tpXS5yZXN0b3JlTG9zdENvbnRleHQodGhpcy5nbCkvL1xuXHRcdHRoaXMuYmF0Y2hzW2ldLmRpcnR5ID0gdHJ1ZTtcblx0fTtcblxuXHRQSVhJLl9yZXN0b3JlQmF0Y2hzKHRoaXMuZ2wpO1xuXG5cdHRoaXMuY29udGV4dExvc3QgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5QSVhJLl9iYXRjaHMgPSBbXTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLl9nZXRCYXRjaCA9IGZ1bmN0aW9uKGdsKVxue1xuXHRpZihQSVhJLl9iYXRjaHMubGVuZ3RoID09IDApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xCYXRjaChnbCk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0cmV0dXJuIFBJWEkuX2JhdGNocy5wb3AoKTtcblx0fVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuX3JldHVybkJhdGNoID0gZnVuY3Rpb24oYmF0Y2gpXG57XG5cdGJhdGNoLmNsZWFuKCk7XHRcblx0UElYSS5fYmF0Y2hzLnB1c2goYmF0Y2gpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuX3Jlc3RvcmVCYXRjaHMgPSBmdW5jdGlvbihnbClcbntcblx0Zm9yICh2YXIgaT0wOyBpIDwgUElYSS5fYmF0Y2hzLmxlbmd0aDsgaSsrKSBcblx0e1xuXHQgIFBJWEkuX2JhdGNoc1tpXS5yZXN0b3JlTG9zdENvbnRleHQoZ2wpO1xuXHR9O1xufVxuXG4vKipcbiAqIEEgV2ViR0xCYXRjaCBFbmFibGVzIGEgZ3JvdXAgb2Ygc3ByaXRlcyB0byBiZSBkcmF3biB1c2luZyB0aGUgc2FtZSBzZXR0aW5ncy5cbiAqIGlmIGEgZ3JvdXAgb2Ygc3ByaXRlcyBhbGwgaGF2ZSB0aGUgc2FtZSBiYXNlVGV4dHVyZSBhbmQgYmxlbmRNb2RlIHRoZW4gdGhleSBjYW4gYmUgZ3JvdXBlZCBpbnRvIGEgYmF0Y2guXG4gKiBBbGwgdGhlIHNwcml0ZXMgaW4gYSBiYXRjaCBjYW4gdGhlbiBiZSBkcmF3biBpbiBvbmUgZ28gYnkgdGhlIEdQVSB3aGljaCBpcyBodWdlbHkgZWZmaWNpZW50LiBBTEwgc3ByaXRlc1xuICogaW4gdGhlIHdlYkdMIHJlbmRlcmVyIGFyZSBhZGRlZCB0byBhIGJhdGNoIGV2ZW4gaWYgdGhlIGJhdGNoIG9ubHkgY29udGFpbnMgb25lIHNwcml0ZS4gQmF0Y2hpbmcgaXMgaGFuZGxlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgd2ViR0wgcmVuZGVyZXIuIEEgZ29vZCB0aXAgaXM6IHRoZSBzbWFsbGVyIHRoZSBudW1iZXIgb2YgYmF0Y2hzIHRoZXJlIGFyZSwgdGhlIGZhc3RlclxuICogdGhlIHdlYkdMIHJlbmRlcmVyIHdpbGwgcnVuLlxuICpcbiAqIEBjbGFzcyBXZWJHTEJhdGNoXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSBnbCB7V2ViR0xDb250ZXh0fSBhbiBpbnN0YW5jZSBvZiB0aGUgd2ViR0wgY29udGV4dFxuICovXG5QSVhJLldlYkdMQmF0Y2ggPSBmdW5jdGlvbihnbClcbntcblx0dGhpcy5nbCA9IGdsO1xuXHRcblx0dGhpcy5zaXplID0gMDtcblxuXHR0aGlzLnZlcnRleEJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5pbmRleEJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy51dkJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5jb2xvckJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5ibGVuZE1vZGUgPSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMO1xuXHR0aGlzLmR5bmFtaWNTaXplID0gMTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLldlYkdMQmF0Y2g7XG5cbi8qKlxuICogQ2xlYW5zIHRoZSBiYXRjaCBzbyB0aGF0IGlzIGNhbiBiZSByZXR1cm5lZCB0byBhbiBvYmplY3QgcG9vbCBhbmQgcmV1c2VkXG4gKlxuICogQG1ldGhvZCBjbGVhblxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24oKVxue1xuXHR0aGlzLnZlcnRpY2llcyA9IFtdO1xuXHR0aGlzLnV2cyA9IFtdO1xuXHR0aGlzLmluZGljZXMgPSBbXTtcblx0dGhpcy5jb2xvcnMgPSBbXTtcblx0dGhpcy5keW5hbWljU2l6ZSA9IDE7XG5cdHRoaXMudGV4dHVyZSA9IG51bGw7XG5cdHRoaXMubGFzdCA9IG51bGw7XG5cdHRoaXMuc2l6ZSA9IDA7XG5cdHRoaXMuaGVhZDtcblx0dGhpcy50YWlsO1xufVxuXG4vKipcbiAqIFJlY3JlYXRlcyB0aGUgYnVmZmVycyBpbiB0aGUgZXZlbnQgb2YgYSBjb250ZXh0IGxvc3NcbiAqXG4gKiBAbWV0aG9kIHJlc3RvcmVMb3N0Q29udGV4dFxuICogQHBhcmFtIGdsIHtXZWJHTENvbnRleHR9XG4gKi9cblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUucmVzdG9yZUxvc3RDb250ZXh0ID0gZnVuY3Rpb24oZ2wpXG57XG5cdHRoaXMuZ2wgPSBnbDtcblx0dGhpcy52ZXJ0ZXhCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMuaW5kZXhCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMudXZCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMuY29sb3JCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG59XG5cbi8qKlxuICogaW5pdHMgdGhlIGJhdGNoJ3MgdGV4dHVyZSBhbmQgYmxlbmQgbW9kZSBiYXNlZCBpZiB0aGUgc3VwcGxpZWQgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbml0XG4gKiBAcGFyYW0gc3ByaXRlIHtTcHJpdGV9IHRoZSBmaXJzdCBzcHJpdGUgdG8gYmUgYWRkZWQgdG8gdGhlIGJhdGNoLiBPbmx5IHNwcml0ZXMgd2l0aFxuICpcdFx0dGhlIHNhbWUgYmFzZSB0ZXh0dXJlIGFuZCBibGVuZCBtb2RlIHdpbGwgYmUgYWxsb3dlZCB0byBiZSBhZGRlZCB0byB0aGlzIGJhdGNoXG4gKi9cdFxuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oc3ByaXRlKVxue1xuXHRzcHJpdGUuYmF0Y2ggPSB0aGlzO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5ibGVuZE1vZGUgPSBzcHJpdGUuYmxlbmRNb2RlO1xuXHR0aGlzLnRleHR1cmUgPSBzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZTtcblx0dGhpcy5oZWFkID0gc3ByaXRlO1xuXHR0aGlzLnRhaWwgPSBzcHJpdGU7XG5cdHRoaXMuc2l6ZSA9IDE7XG5cblx0dGhpcy5ncm93QmF0Y2goKTtcbn1cblxuLyoqXG4gKiBpbnNlcnRzIGEgc3ByaXRlIGJlZm9yZSB0aGUgc3BlY2lmaWVkIHNwcml0ZVxuICpcbiAqIEBtZXRob2QgaW5zZXJ0QmVmb3JlXG4gKiBAcGFyYW0gc3ByaXRlIHtTcHJpdGV9IHRoZSBzcHJpdGUgdG8gYmUgYWRkZWRcbiAqIEBwYXJhbSBuZXh0U3ByaXRlIHtuZXh0U3ByaXRlfSB0aGUgZmlyc3Qgc3ByaXRlIHdpbGwgYmUgaW5zZXJ0ZWQgYmVmb3JlIHRoaXMgc3ByaXRlXG4gKi9cdFxuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUgPSBmdW5jdGlvbihzcHJpdGUsIG5leHRTcHJpdGUpXG57XG5cdHRoaXMuc2l6ZSsrO1xuXG5cdHNwcml0ZS5iYXRjaCA9IHRoaXM7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xuXHR2YXIgdGVtcFByZXYgPSBuZXh0U3ByaXRlLl9fcHJldjtcblx0bmV4dFNwcml0ZS5fX3ByZXYgPSBzcHJpdGU7XG5cdHNwcml0ZS5fX25leHQgPSBuZXh0U3ByaXRlO1xuXG5cdGlmKHRlbXBQcmV2KVxuXHR7XG5cdFx0c3ByaXRlLl9fcHJldiA9IHRlbXBQcmV2O1xuXHRcdHRlbXBQcmV2Ll9fbmV4dCA9IHNwcml0ZTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLmhlYWQgPSBzcHJpdGU7XG5cdH1cbn1cblxuLyoqXG4gKiBpbnNlcnRzIGEgc3ByaXRlIGFmdGVyIHRoZSBzcGVjaWZpZWQgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbnNlcnRBZnRlclxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRvIGJlIGFkZGVkXG4gKiBAcGFyYW0gIHByZXZpb3VzU3ByaXRlIHtTcHJpdGV9IHRoZSBmaXJzdCBzcHJpdGUgd2lsbCBiZSBpbnNlcnRlZCBhZnRlciB0aGlzIHNwcml0ZVxuICovXHRcblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbihzcHJpdGUsIHByZXZpb3VzU3ByaXRlKVxue1xuXHR0aGlzLnNpemUrKztcblxuXHRzcHJpdGUuYmF0Y2ggPSB0aGlzO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHR2YXIgdGVtcE5leHQgPSBwcmV2aW91c1Nwcml0ZS5fX25leHQ7XG5cdHByZXZpb3VzU3ByaXRlLl9fbmV4dCA9IHNwcml0ZTtcblx0c3ByaXRlLl9fcHJldiA9IHByZXZpb3VzU3ByaXRlO1xuXG5cdGlmKHRlbXBOZXh0KVxuXHR7XG5cdFx0c3ByaXRlLl9fbmV4dCA9IHRlbXBOZXh0O1xuXHRcdHRlbXBOZXh0Ll9fcHJldiA9IHNwcml0ZTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLnRhaWwgPSBzcHJpdGVcblx0fVxufVxuXG4vKipcbiAqIHJlbW92ZXMgYSBzcHJpdGUgZnJvbSB0aGUgYmF0Y2hcbiAqXG4gKiBAbWV0aG9kIHJlbW92ZVxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRvIGJlIHJlbW92ZWRcbiAqL1x0XG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dGhpcy5zaXplLS07XG5cblx0aWYodGhpcy5zaXplID09IDApXG5cdHtcblx0XHRzcHJpdGUuYmF0Y2ggPSBudWxsO1xuXHRcdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHRcdHNwcml0ZS5fX25leHQgPSBudWxsO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKHNwcml0ZS5fX3ByZXYpXG5cdHtcblx0XHRzcHJpdGUuX19wcmV2Ll9fbmV4dCA9IHNwcml0ZS5fX25leHQ7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5oZWFkID0gc3ByaXRlLl9fbmV4dDtcblx0XHR0aGlzLmhlYWQuX19wcmV2ID0gbnVsbDtcblx0fVxuXG5cdGlmKHNwcml0ZS5fX25leHQpXG5cdHtcblx0XHRzcHJpdGUuX19uZXh0Ll9fcHJldiA9IHNwcml0ZS5fX3ByZXY7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy50YWlsID0gc3ByaXRlLl9fcHJldjtcblx0XHR0aGlzLnRhaWwuX19uZXh0ID0gbnVsbFxuXHR9XG5cblx0c3ByaXRlLmJhdGNoID0gbnVsbDtcblx0c3ByaXRlLl9fbmV4dCA9IG51bGw7XG5cdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBTcGxpdHMgdGhlIGJhdGNoIGludG8gdHdvIHdpdGggdGhlIHNwZWNpZmllZCBzcHJpdGUgYmVpbmcgdGhlIHN0YXJ0IG9mIHRoZSBuZXcgYmF0Y2guXG4gKlxuICogQG1ldGhvZCBzcGxpdFxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRoYXQgaW5kaWNhdGVzIHdoZXJlIHRoZSBiYXRjaCBzaG91bGQgYmUgc3BsaXRcbiAqIEByZXR1cm4ge1dlYkdMQmF0Y2h9IHRoZSBuZXcgYmF0Y2hcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cblx0dmFyIGJhdGNoID0gbmV3IFBJWEkuV2ViR0xCYXRjaCh0aGlzLmdsKTtcblx0YmF0Y2guaW5pdChzcHJpdGUpO1xuXHRiYXRjaC50ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuXHRiYXRjaC50YWlsID0gdGhpcy50YWlsO1xuXG5cdHRoaXMudGFpbCA9IHNwcml0ZS5fX3ByZXY7XG5cdHRoaXMudGFpbC5fX25leHQgPSBudWxsO1xuXG5cdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHQvLyByZXR1cm4gYSBzcGxpdGUgYmF0Y2ghXG5cblx0Ly8gVE9ETyB0aGlzIHNpemUgaXMgd3JvbmchXG5cdC8vIG5lZWQgdG8gcmVjYWxjdWxhdGUgOi8gcHJvYmxlbSB3aXRoIGEgbGlua2VkIGxpc3QhXG5cdC8vIHVubGVzcyBpdCBnZXRzIGNhbGN1bGF0ZWQgaW4gdGhlIFwiY2xlYW5cIj9cblxuXHQvLyBuZWVkIHRvIGxvb3AgdGhyb3VnaCBpdGVtcyBhcyB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB0aGUgbGVuZ3RoIG9uIGEgbGlua2VkIGxpc3QgOi9cblx0dmFyIHRlbXBTaXplID0gMDtcblx0d2hpbGUoc3ByaXRlKVxuXHR7XG5cdFx0dGVtcFNpemUrKztcblx0XHRzcHJpdGUuYmF0Y2ggPSBiYXRjaDtcblx0XHRzcHJpdGUgPSBzcHJpdGUuX19uZXh0O1xuXHR9XG5cblx0YmF0Y2guc2l6ZSA9IHRlbXBTaXplO1xuXHR0aGlzLnNpemUgLT0gdGVtcFNpemU7XG5cblx0cmV0dXJuIGJhdGNoO1xufVxuXG4vKipcbiAqIE1lcmdlcyB0d28gYmF0Y2hzIHRvZ2V0aGVyXG4gKlxuICogQG1ldGhvZCBtZXJnZVxuICogQHBhcmFtIGJhdGNoIHtXZWJHTEJhdGNofSB0aGUgYmF0Y2ggdGhhdCB3aWxsIGJlIG1lcmdlZCBcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKGJhdGNoKVxue1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHR0aGlzLnRhaWwuX19uZXh0ID0gYmF0Y2guaGVhZDtcblx0YmF0Y2guaGVhZC5fX3ByZXYgPSB0aGlzLnRhaWw7XG5cblx0dGhpcy5zaXplICs9IGJhdGNoLnNpemU7XG5cblx0dGhpcy50YWlsID0gYmF0Y2gudGFpbDtcblxuXHR2YXIgc3ByaXRlID0gYmF0Y2guaGVhZDtcblx0d2hpbGUoc3ByaXRlKVxuXHR7XG5cdFx0c3ByaXRlLmJhdGNoID0gdGhpcztcblx0XHRzcHJpdGUgPSBzcHJpdGUuX19uZXh0O1xuXHR9XG59XG5cbi8qKlxuICogR3Jvd3MgdGhlIHNpemUgb2YgdGhlIGJhdGNoLiBBcyB0aGUgZWxlbWVudHMgaW4gdGhlIGJhdGNoIGNhbm5vdCBoYXZlIGEgZHluYW1pYyBzaXplIHRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWQgdG8gaW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIGJhdGNoLiBJdCBhbHNvIGNyZWF0ZXMgYSBsaXR0bGUgZXh0cmEgcm9vbSBzb1xuICogdGhhdCB0aGUgYmF0Y2ggZG9lcyBub3QgbmVlZCB0byBiZSByZXNpemVkIGV2ZXJ5IHRpbWUgYSBzcHJpdGUgaXMgYWRkZWRcbiAqXG4gKiBAbWV0aG9kIGdyb3dCYXRjaFxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLmdyb3dCYXRjaCA9IGZ1bmN0aW9uKClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0aWYoIHRoaXMuc2l6ZSA9PSAxKVxuXHR7XG5cdFx0dGhpcy5keW5hbWljU2l6ZSA9IDE7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5keW5hbWljU2l6ZSA9IHRoaXMuc2l6ZSAqIDEuNVxuXHR9XG5cdC8vIGdyb3cgdmVydHNcblx0dGhpcy52ZXJ0aWNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZHluYW1pY1NpemUgKiA4KTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUix0aGlzLnZlcnRpY2llcyAsIGdsLkRZTkFNSUNfRFJBVyk7XG5cblx0dGhpcy51dnMgID0gbmV3IEZsb2F0MzJBcnJheSggdGhpcy5keW5hbWljU2l6ZSAqIDggKTtcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudXZCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy51dnMgLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cdHRoaXMuZGlydHlVVlMgPSB0cnVlO1xuXG5cdHRoaXMuY29sb3JzICA9IG5ldyBGbG9hdDMyQXJyYXkoIHRoaXMuZHluYW1pY1NpemUgKiA0ICk7XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmNvbG9yQnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMuY29sb3JzICwgZ2wuRFlOQU1JQ19EUkFXKTtcblxuXHR0aGlzLmRpcnR5Q29sb3JzID0gdHJ1ZTtcblxuXHR0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkodGhpcy5keW5hbWljU2l6ZSAqIDYpOyBcblx0dmFyIGxlbmd0aCA9IHRoaXMuaW5kaWNlcy5sZW5ndGgvNjtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCBsZW5ndGg7IGkrKykgXG5cdHtcblx0ICAgIHZhciBpbmRleDIgPSBpICogNjtcblx0ICAgIHZhciBpbmRleDMgPSBpICogNDtcblx0XHR0aGlzLmluZGljZXNbaW5kZXgyICsgMF0gPSBpbmRleDMgKyAwO1xuXHRcdHRoaXMuaW5kaWNlc1tpbmRleDIgKyAxXSA9IGluZGV4MyArIDE7XG5cdFx0dGhpcy5pbmRpY2VzW2luZGV4MiArIDJdID0gaW5kZXgzICsgMjtcblx0XHR0aGlzLmluZGljZXNbaW5kZXgyICsgM10gPSBpbmRleDMgKyAwO1xuXHRcdHRoaXMuaW5kaWNlc1tpbmRleDIgKyA0XSA9IGluZGV4MyArIDI7XG5cdFx0dGhpcy5pbmRpY2VzW2luZGV4MiArIDVdID0gaW5kZXgzICsgMztcblx0fTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuLyoqXG4gKiBSZWZyZXNoJ3MgYWxsIHRoZSBkYXRhIGluIHRoZSBiYXRjaCBhbmQgc3luYydzIGl0IHdpdGggdGhlIHdlYkdMIGJ1ZmZlcnNcbiAqXG4gKiBAbWV0aG9kIHJlZnJlc2hcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdGlmICh0aGlzLmR5bmFtaWNTaXplIDwgdGhpcy5zaXplKVxuXHR7XG5cdFx0dGhpcy5ncm93QmF0Y2goKTtcblx0fVxuXG5cdHZhciBpbmRleFJ1biA9IDA7XG5cdHZhciB3b3JsZFRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCwgYVgsIGFZLCB3MCwgdzEsIGgwLCBoMSwgaW5kZXg7XG5cdHZhciBhLCBiLCBjLCBkLCB0eCwgdHk7XG5cblx0dmFyIGRpc3BsYXlPYmplY3QgPSB0aGlzLmhlYWQ7XG5cblx0d2hpbGUoZGlzcGxheU9iamVjdClcblx0e1xuXHRcdGluZGV4ID0gaW5kZXhSdW4gKiA4O1xuXG5cdFx0dmFyIHRleHR1cmUgPSBkaXNwbGF5T2JqZWN0LnRleHR1cmU7XG5cblx0XHR2YXIgZnJhbWUgPSB0ZXh0dXJlLmZyYW1lO1xuXHRcdHZhciB0dyA9IHRleHR1cmUuYmFzZVRleHR1cmUud2lkdGg7XG5cdFx0dmFyIHRoID0gdGV4dHVyZS5iYXNlVGV4dHVyZS5oZWlnaHQ7XG5cblx0XHR0aGlzLnV2c1tpbmRleCArIDBdID0gZnJhbWUueCAvIHR3O1xuXHRcdHRoaXMudXZzW2luZGV4ICsxXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdHRoaXMudXZzW2luZGV4ICsyXSA9IChmcmFtZS54ICsgZnJhbWUud2lkdGgpIC8gdHc7XG5cdFx0dGhpcy51dnNbaW5kZXggKzNdID0gZnJhbWUueSAvIHRoO1xuXG5cdFx0dGhpcy51dnNbaW5kZXggKzRdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHR0aGlzLnV2c1tpbmRleCArNV0gPSAoZnJhbWUueSArIGZyYW1lLmhlaWdodCkgLyB0aDsgXG5cblx0XHR0aGlzLnV2c1tpbmRleCArNl0gPSBmcmFtZS54IC8gdHc7XG5cdFx0dGhpcy51dnNbaW5kZXggKzddID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cblx0XHRkaXNwbGF5T2JqZWN0LnVwZGF0ZUZyYW1lID0gZmFsc2U7XG5cblx0XHRjb2xvckluZGV4ID0gaW5kZXhSdW4gKiA0O1xuXHRcdHRoaXMuY29sb3JzW2NvbG9ySW5kZXhdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDFdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDJdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDNdID0gZGlzcGxheU9iamVjdC53b3JsZEFscGhhO1xuXG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX19uZXh0O1xuXG5cdFx0aW5kZXhSdW4gKys7XG5cdH1cblxuXHR0aGlzLmRpcnR5VVZTID0gdHJ1ZTtcblx0dGhpcy5kaXJ0eUNvbG9ycyA9IHRydWU7XG59XG5cbi8qKlxuICogVXBkYXRlcyBhbGwgdGhlIHJlbGV2YW50IGdlb21ldHJ5IGFuZCB1cGxvYWRzIHRoZSBkYXRhIHRvIHRoZSBHUFVcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0dmFyIHdvcmxkVHJhbnNmb3JtLCB3aWR0aCwgaGVpZ2h0LCBhWCwgYVksIHcwLCB3MSwgaDAsIGgxLCBpbmRleCwgaW5kZXgyLCBpbmRleDNcblxuXHR2YXIgYSwgYiwgYywgZCwgdHgsIHR5O1xuXG5cdHZhciBpbmRleFJ1biA9IDA7XG5cblx0dmFyIGRpc3BsYXlPYmplY3QgPSB0aGlzLmhlYWQ7XG5cdHZhciB2ZXJ0aWNpZXMgPSB0aGlzLnZlcnRpY2llcztcblx0dmFyIHV2cyA9IHRoaXMudXZzO1xuXHR2YXIgY29sb3JzID0gdGhpcy5jb2xvcnM7XG5cdFxuXHR3aGlsZShkaXNwbGF5T2JqZWN0KVxuXHR7XG5cdFx0aWYoZGlzcGxheU9iamVjdC52Y291bnQgPT09IFBJWEkudmlzaWJsZUNvdW50KVxuXHRcdHtcblx0XHRcdHdpZHRoID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lLndpZHRoO1xuXHRcdFx0aGVpZ2h0ID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lLmhlaWdodDtcblxuXHRcdFx0Ly8gVE9ETyB0cmltPz9cblx0XHRcdGFYID0gZGlzcGxheU9iamVjdC5hbmNob3IueDsvLyAtIGRpc3BsYXlPYmplY3QudGV4dHVyZS50cmltLnhcblx0XHRcdGFZID0gZGlzcGxheU9iamVjdC5hbmNob3IueTsgLy8tIGRpc3BsYXlPYmplY3QudGV4dHVyZS50cmltLnlcblx0XHRcdHcwID0gd2lkdGggKiAoMS1hWCk7XG5cdFx0XHR3MSA9IHdpZHRoICogLWFYO1xuXG5cdFx0XHRoMCA9IGhlaWdodCAqICgxLWFZKTtcblx0XHRcdGgxID0gaGVpZ2h0ICogLWFZO1xuXG5cdFx0XHRpbmRleCA9IGluZGV4UnVuICogODtcblxuXHRcdFx0d29ybGRUcmFuc2Zvcm0gPSBkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtO1xuXG5cdFx0XHRhID0gd29ybGRUcmFuc2Zvcm1bMF07XG5cdFx0XHRiID0gd29ybGRUcmFuc2Zvcm1bM107XG5cdFx0XHRjID0gd29ybGRUcmFuc2Zvcm1bMV07XG5cdFx0XHRkID0gd29ybGRUcmFuc2Zvcm1bNF07XG5cdFx0XHR0eCA9IHdvcmxkVHJhbnNmb3JtWzJdO1xuXHRcdFx0dHkgPSB3b3JsZFRyYW5zZm9ybVs1XTtcblxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgMCBdID0gYSAqIHcxICsgYyAqIGgxICsgdHg7IFxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgMSBdID0gZCAqIGgxICsgYiAqIHcxICsgdHk7XG5cblx0XHRcdHZlcnRpY2llc1tpbmRleCArIDIgXSA9IGEgKiB3MCArIGMgKiBoMSArIHR4OyBcblx0XHRcdHZlcnRpY2llc1tpbmRleCArIDMgXSA9IGQgKiBoMSArIGIgKiB3MCArIHR5OyBcblxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgNCBdID0gYSAqIHcwICsgYyAqIGgwICsgdHg7IFxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgNSBdID0gZCAqIGgwICsgYiAqIHcwICsgdHk7IFxuXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyA2XSA9ICBhICogdzEgKyBjICogaDAgKyB0eDsgXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyA3XSA9ICBkICogaDAgKyBiICogdzEgKyB0eTsgXG5cblx0XHRcdGlmKGRpc3BsYXlPYmplY3QudXBkYXRlRnJhbWUgfHwgZGlzcGxheU9iamVjdC50ZXh0dXJlLnVwZGF0ZUZyYW1lKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLmRpcnR5VVZTID0gdHJ1ZTtcblxuXHRcdFx0XHR2YXIgdGV4dHVyZSA9IGRpc3BsYXlPYmplY3QudGV4dHVyZTtcblxuXHRcdFx0XHR2YXIgZnJhbWUgPSB0ZXh0dXJlLmZyYW1lO1xuXHRcdFx0XHR2YXIgdHcgPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLndpZHRoO1xuXHRcdFx0XHR2YXIgdGggPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKyAwXSA9IGZyYW1lLnggLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICsxXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKzJdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICszXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKzRdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICs1XSA9IChmcmFtZS55ICsgZnJhbWUuaGVpZ2h0KSAvIHRoOyBcblxuXHRcdFx0XHR1dnNbaW5kZXggKzZdID0gZnJhbWUueCAvIHR3O1xuXHRcdFx0XHR1dnNbaW5kZXggKzddID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cblx0XHRcdFx0ZGlzcGxheU9iamVjdC51cGRhdGVGcmFtZSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUT0RPIHRoaXMgcHJvYmFibHkgY291bGQgZG8gd2l0aCBzb21lIG9wdGltaXNhdGlvbi4uLi5cblx0XHRcdGlmKGRpc3BsYXlPYmplY3QuY2FjaGVBbHBoYSAhPSBkaXNwbGF5T2JqZWN0LndvcmxkQWxwaGEpXG5cdFx0XHR7XG5cdFx0XHRcdGRpc3BsYXlPYmplY3QuY2FjaGVBbHBoYSA9IGRpc3BsYXlPYmplY3Qud29ybGRBbHBoYTtcblxuXHRcdFx0XHR2YXIgY29sb3JJbmRleCA9IGluZGV4UnVuICogNDtcblx0XHRcdFx0Y29sb3JzW2NvbG9ySW5kZXhdID0gY29sb3JzW2NvbG9ySW5kZXggKyAxXSA9IGNvbG9yc1tjb2xvckluZGV4ICsgMl0gPSBjb2xvcnNbY29sb3JJbmRleCArIDNdID0gZGlzcGxheU9iamVjdC53b3JsZEFscGhhO1xuXHRcdFx0XHR0aGlzLmRpcnR5Q29sb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGluZGV4ID0gaW5kZXhSdW4gKiA4O1xuXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyAwIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAxIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAyIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAzIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA0IF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA1IF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA2XSA9IFx0dmVydGljaWVzW2luZGV4ICsgN10gPSAwO1xuXHRcdH1cblxuXHRcdGluZGV4UnVuKys7XG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX19uZXh0O1xuICAgfVxufVxuXG4vKipcbiAqIERyYXdzIHRoZSBiYXRjaCB0byB0aGUgZnJhbWUgYnVmZmVyXG4gKlxuICogQG1ldGhvZCByZW5kZXJcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihzdGFydCwgZW5kKVxue1xuXHRzdGFydCA9IHN0YXJ0IHx8IDA7XG5cblx0aWYoZW5kID09IHVuZGVmaW5lZCllbmQgPSB0aGlzLnNpemU7XG5cdFxuXHRpZih0aGlzLmRpcnR5KVxuXHR7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0aWYgKHRoaXMuc2l6ZSA9PSAwKXJldHVybjtcblxuXHR0aGlzLnVwZGF0ZSgpO1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdC8vVE9ETyBvcHRpbWl6ZSB0aGlzIVxuXG5cdHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5kZWZhdWx0U2hhZGVyO1xuXHRcblx0Ly9nbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xuXG5cdC8vIHVwZGF0ZSB0aGUgdmVydHMuLlxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHQvLyBvay4uXG5cdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRpY2llcylcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0uYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHQvLyB1cGRhdGUgdGhlIHV2c1xuXHQvL3ZhciBpc0RlZmF1bHQgPSAoc2hhZGVyUHJvZ3JhbSA9PSBQSVhJLnNoYWRlclByb2dyYW0pXG5cbiAgIFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudXZCdWZmZXIpO1xuXG4gICAgaWYodGhpcy5kaXJ0eVVWUylcbiAgICB7XG4gICAgXHR0aGlzLmRpcnR5VVZTID0gZmFsc2U7XG4gICAgXHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgIDAsIHRoaXMudXZzKTtcbiAgICB9XG5cbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0uYVRleHR1cmVDb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5fZ2xUZXh0dXJlKTtcblxuXHQvLyB1cGRhdGUgY29sb3IhXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmNvbG9yQnVmZmVyKTtcblxuXHRpZih0aGlzLmRpcnR5Q29sb3JzKVxuICAgIHtcbiAgICBcdHRoaXMuZGlydHlDb2xvcnMgPSBmYWxzZTtcbiAgICBcdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLmNvbG9ycyk7XG5cdH1cblxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS5jb2xvckF0dHJpYnV0ZSwgMSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0Ly8gZG9udCBuZWVkIHRvIHVwbG9hZCFcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcblxuXHR2YXIgbGVuID0gZW5kIC0gc3RhcnQ7XG5cbiAgICAvLyBEUkFXIFRIQVQgdGhpcyFcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBsZW4gKiA2LCBnbC5VTlNJR05FRF9TSE9SVCwgc3RhcnQgKiAyICogNiApO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBXZWJHTEJhdGNoIEVuYWJsZXMgYSBncm91cCBvZiBzcHJpdGVzIHRvIGJlIGRyYXduIHVzaW5nIHRoZSBzYW1lIHNldHRpbmdzLlxuICogaWYgYSBncm91cCBvZiBzcHJpdGVzIGFsbCBoYXZlIHRoZSBzYW1lIGJhc2VUZXh0dXJlIGFuZCBibGVuZE1vZGUgdGhlbiB0aGV5IGNhbiBiZVxuICogZ3JvdXBlZCBpbnRvIGEgYmF0Y2guIEFsbCB0aGUgc3ByaXRlcyBpbiBhIGJhdGNoIGNhbiB0aGVuIGJlIGRyYXduIGluIG9uZSBnbyBieSB0aGVcbiAqIEdQVSB3aGljaCBpcyBodWdlbHkgZWZmaWNpZW50LiBBTEwgc3ByaXRlcyBpbiB0aGUgd2ViR0wgcmVuZGVyZXIgYXJlIGFkZGVkIHRvIGEgYmF0Y2hcbiAqIGV2ZW4gaWYgdGhlIGJhdGNoIG9ubHkgY29udGFpbnMgb25lIHNwcml0ZS4gQmF0Y2hpbmcgaXMgaGFuZGxlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZVxuICogd2ViR0wgcmVuZGVyZXIuIEEgZ29vZCB0aXAgaXM6IHRoZSBzbWFsbGVyIHRoZSBudW1iZXIgb2YgYmF0Y2hzIHRoZXJlIGFyZSwgdGhlIGZhc3RlclxuICogdGhlIHdlYkdMIHJlbmRlcmVyIHdpbGwgcnVuLlxuICpcbiAqIEBjbGFzcyBXZWJHTEJhdGNoXG4gKiBAY29udHJ1Y3RvclxuICogQHBhcmFtIGdsIHtXZWJHTENvbnRleHR9IEFuIGluc3RhbmNlIG9mIHRoZSB3ZWJHTCBjb250ZXh0XG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cCA9IGZ1bmN0aW9uKGdsLCB0cmFuc3BhcmVudClcbntcblx0dGhpcy5nbCA9IGdsO1xuXHR0aGlzLnJvb3Q7XG5cdFxuXHR0aGlzLmJhY2tncm91bmRDb2xvcjtcblx0dGhpcy50cmFuc3BhcmVudCA9IHRyYW5zcGFyZW50ID09IHVuZGVmaW5lZCA/IHRydWUgOiB0cmFuc3BhcmVudDtcblx0XG5cdHRoaXMuYmF0Y2hzID0gW107XG5cdHRoaXMudG9SZW1vdmUgPSBbXTtcblx0Y29uc29sZS5sb2codGhpcy50cmFuc3BhcmVudClcblx0dGhpcy5maWx0ZXJNYW5hZ2VyID0gbmV3IFBJWEkuV2ViR0xGaWx0ZXJNYW5hZ2VyKHRoaXMudHJhbnNwYXJlbnQpO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuV2ViR0xSZW5kZXJHcm91cDtcblxuLyoqXG4gKiBBZGQgYSBkaXNwbGF5IG9iamVjdCB0byB0aGUgd2ViZ2wgcmVuZGVyZXJcbiAqXG4gKiBAbWV0aG9kIHNldFJlbmRlcmFibGVcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGUgXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuc2V0UmVuZGVyYWJsZSA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIGhhcyB0aGlzIGNoYW5nZWQ/P1xuXHRpZih0aGlzLnJvb3QpdGhpcy5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4odGhpcy5yb290KTtcblx0XG5cdGRpc3BsYXlPYmplY3Qud29ybGRWaXNpYmxlID0gZGlzcGxheU9iamVjdC52aXNpYmxlO1xuXHRcblx0Ly8gc29vb29vbyAvL1xuXHQvLyB0byBjaGVjayBpZiBhbnkgYmF0Y2hzIGV4aXN0IGFscmVhZHk/P1xuXHRcblx0Ly8gVE9ETyB3aGF0IGlmIGl0cyBhbHJlYWR5IGhhcyBhbiBvYmplY3Q/IHNob3VsZCByZW1vdmUgaXRcblx0dGhpcy5yb290ID0gZGlzcGxheU9iamVjdDtcblx0dGhpcy5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oZGlzcGxheU9iamVjdCk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIHdlYmdsIHZpZXdcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHByb2plY3Rpb24ge09iamVjdH1cbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHRcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0Z2wudW5pZm9ybTJmKFBJWEkuZGVmYXVsdFNoYWRlci5wcm9qZWN0aW9uVmVjdG9yLCBwcm9qZWN0aW9uLngsIHByb2plY3Rpb24ueSk7XG5cblx0dGhpcy5maWx0ZXJNYW5hZ2VyLmJlZ2luKHByb2plY3Rpb24sIGJ1ZmZlcik7XG5cblx0XG5cdGdsLmJsZW5kRnVuYyhnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuXHQvLyB3aWxsIHJlbmRlciBhbGwgdGhlIGVsZW1lbnRzIGluIHRoZSBncm91cFxuXHR2YXIgcmVuZGVyYWJsZTtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCB0aGlzLmJhdGNocy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHRcblx0XHRyZW5kZXJhYmxlID0gdGhpcy5iYXRjaHNbaV07XG5cdFx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNoc1tpXS5yZW5kZXIoKTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRcblx0XHQvLyByZW5kZXIgc3BlY2lhbFxuXHRcdHRoaXMucmVuZGVyU3BlY2lhbChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3BlY2lmaWMgZGlzcGxheU9iamVjdFxuICpcbiAqIEBtZXRob2QgcmVuZGVyU3BlY2lmaWNcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIHByb2plY3Rpb24ge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUucmVuZGVyU3BlY2lmaWMgPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0LCBwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdGdsLnVuaWZvcm0yZihQSVhJLmRlZmF1bHRTaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCBwcm9qZWN0aW9uLnkpO1xuXG5cdHRoaXMuZmlsdGVyTWFuYWdlci5iZWdpbihwcm9qZWN0aW9uLCBidWZmZXIpO1xuXG5cdC8vIHRvIGRvIVxuXHQvLyByZW5kZXIgcGFydCBvZiB0aGUgc2NlbmUuLi5cblx0XG5cdHZhciBzdGFydEluZGV4O1xuXHR2YXIgc3RhcnRCYXRjaEluZGV4O1xuXHRcblx0dmFyIGVuZEluZGV4O1xuXHR2YXIgZW5kQmF0Y2hJbmRleDtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgTkVYVCBTUFJJVEVcblx0ICogIFRoaXMgcGFydCBsb29rcyBmb3IgdGhlIGNsb3Nlc3QgbmV4dCBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBpdCBrZWVwcyBsb29raW5nIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIGdldHMgdG8gdGhlIGVuZCBvZiB0aGUgZGlzcGxheVxuXHQgKiAgc2NlbmUgZ3JhcGhcblx0ICovXG5cdHZhciBuZXh0UmVuZGVyYWJsZSA9IGRpc3BsYXlPYmplY3QuZmlyc3Q7XG5cdHdoaWxlKG5leHRSZW5kZXJhYmxlLl9pTmV4dClcblx0e1xuXHRcdGlmKG5leHRSZW5kZXJhYmxlLnJlbmRlcmFibGUgJiYgbmV4dFJlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0XHRuZXh0UmVuZGVyYWJsZSA9IG5leHRSZW5kZXJhYmxlLl9pTmV4dDtcblx0fVxuXHR2YXIgc3RhcnRCYXRjaCA9IG5leHRSZW5kZXJhYmxlLmJhdGNoO1xuXHQvL2NvbnNvbGUubG9nKG5leHRSZW5kZXJhYmxlKTtcblx0XG5cdC8vY29uc29sZS5sb2cocmVuZGVyYWJsZSlcblx0aWYobmV4dFJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdHN0YXJ0QmF0Y2ggPSBuZXh0UmVuZGVyYWJsZS5iYXRjaDtcblx0XHRcblx0XHR2YXIgaGVhZCA9IHN0YXJ0QmF0Y2guaGVhZDtcblx0XHR2YXIgbmV4dCA9IGhlYWQ7XG5cdFx0XG5cdFx0Ly8gb2sgbm93IHdlIGhhdmUgdGhlIGJhdGNoLi4gbmVlZCB0byBmaW5kIHRoZSBzdGFydCBpbmRleCFcblx0XHRpZihoZWFkID09IG5leHRSZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdHN0YXJ0SW5kZXggPSAwO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0c3RhcnRJbmRleCA9IDE7XG5cdFx0XHRcblx0XHRcdHdoaWxlKGhlYWQuX19uZXh0ICE9IG5leHRSZW5kZXJhYmxlKVxuXHRcdFx0e1xuXHRcdFx0XHRzdGFydEluZGV4Kys7XG5cdFx0XHRcdGhlYWQgPSBoZWFkLl9fbmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0c3RhcnRCYXRjaCA9IG5leHRSZW5kZXJhYmxlO1xuXHR9XG5cdFxuXHQvLyBHZXQgdGhlIExBU1QgcmVuZGVyYWJsZSBvYmplY3Rcblx0dmFyIGxhc3RSZW5kZXJhYmxlID0gZGlzcGxheU9iamVjdC5sYXN0O1xuXHR3aGlsZShsYXN0UmVuZGVyYWJsZS5faVByZXYpXG5cdHtcblx0XHRpZihsYXN0UmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIGxhc3RSZW5kZXJhYmxlLl9fcmVuZGVyR3JvdXApYnJlYWs7XG5cdFx0bGFzdFJlbmRlcmFibGUgPSBsYXN0UmVuZGVyYWJsZS5faU5leHQ7XG5cdH1cblx0XG5cdGlmKGxhc3RSZW5kZXJhYmxlIGluc3RhbmNlb2YgUElYSS5TcHJpdGUpXG5cdHtcblx0XHRlbmRCYXRjaCA9IGxhc3RSZW5kZXJhYmxlLmJhdGNoO1xuXHRcdFxuXHRcdHZhciBoZWFkID0gZW5kQmF0Y2guaGVhZDtcblx0XHRcblx0XHRpZihoZWFkID09IGxhc3RSZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdGVuZEluZGV4ID0gMDtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGVuZEluZGV4ID0gMTtcblx0XHRcdFxuXHRcdFx0d2hpbGUoaGVhZC5fX25leHQgIT0gbGFzdFJlbmRlcmFibGUpXG5cdFx0XHR7XG5cdFx0XHRcdGVuZEluZGV4Kys7XG5cdFx0XHRcdGhlYWQgPSBoZWFkLl9fbmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0ZW5kQmF0Y2ggPSBsYXN0UmVuZGVyYWJsZTtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyhlbmRCYXRjaCk7XG5cdC8vIFRPRE8gLSBuZWVkIHRvIGZvbGQgdGhpcyB1cCBhIGJpdCFcblx0XG5cdGlmKHN0YXJ0QmF0Y2ggPT0gZW5kQmF0Y2gpXG5cdHtcblx0XHRpZihzdGFydEJhdGNoIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVxuXHRcdHtcblx0XHRcdHN0YXJ0QmF0Y2gucmVuZGVyKHN0YXJ0SW5kZXgsIGVuZEluZGV4KzEpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5yZW5kZXJTcGVjaWFsKHN0YXJ0QmF0Y2gsIHByb2plY3Rpb24pO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblx0XG5cdC8vIG5vdyB3ZSBoYXZlIGZpcnN0IGFuZCBsYXN0IVxuXHRzdGFydEJhdGNoSW5kZXggPSB0aGlzLmJhdGNocy5pbmRleE9mKHN0YXJ0QmF0Y2gpO1xuXHRlbmRCYXRjaEluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZihlbmRCYXRjaCk7XG5cdFxuXHQvLyBETyB0aGUgZmlyc3QgYmF0Y2hcblx0aWYoc3RhcnRCYXRjaCBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0e1xuXHRcdHN0YXJ0QmF0Y2gucmVuZGVyKHN0YXJ0SW5kZXgpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMucmVuZGVyU3BlY2lhbChzdGFydEJhdGNoLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRcblx0Ly8gRE8gdGhlIG1pZGRsZSBiYXRjaHMuLlxuXHRmb3IgKHZhciBpPXN0YXJ0QmF0Y2hJbmRleCsxOyBpIDwgZW5kQmF0Y2hJbmRleDsgaSsrKSBcblx0e1xuXHRcdHJlbmRlcmFibGUgPSB0aGlzLmJhdGNoc1tpXTtcblx0XG5cdFx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNoc1tpXS5yZW5kZXIoKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoaXMucmVuZGVyU3BlY2lhbChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIERPIHRoZSBsYXN0IGJhdGNoLi5cblx0aWYoZW5kQmF0Y2ggaW5zdGFuY2VvZiBQSVhJLldlYkdMQmF0Y2gpXG5cdHtcblx0XHRlbmRCYXRjaC5yZW5kZXIoMCwgZW5kSW5kZXgrMSk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5yZW5kZXJTcGVjaWFsKGVuZEJhdGNoLCBwcm9qZWN0aW9uKTtcblx0fVxufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBzcGVjaWZpYyByZW5kZXJhYmxlXG4gKlxuICogQG1ldGhvZCByZW5kZXJTcGVjaWFsXG4gKiBAcGFyYW0gcmVuZGVyYWJsZSB7RGlzcGxheU9iamVjdH1cbiAqIEBwYXJhbSBwcm9qZWN0aW9uIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbmRlclNwZWNpYWwgPSBmdW5jdGlvbihyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKVxue1xuXHRcblx0dmFyIHdvcmxkVmlzaWJsZSA9IHJlbmRlcmFibGUudmNvdW50ID09PSBQSVhJLnZpc2libGVDb3VudFxuXG5cblx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHR7XG5cdFx0aWYod29ybGRWaXNpYmxlKXRoaXMucmVuZGVyVGlsaW5nU3ByaXRlKHJlbmRlcmFibGUsIHByb2plY3Rpb24pO1xuXHR9XG5cdGVsc2UgaWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuU3RyaXApXG5cdHtcblx0XHRpZih3b3JsZFZpc2libGUpdGhpcy5yZW5kZXJTdHJpcChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRlbHNlIGlmKHJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLkN1c3RvbVJlbmRlcmFibGUpXG5cdHtcblx0XHRpZih3b3JsZFZpc2libGUpIHJlbmRlcmFibGUucmVuZGVyV2ViR0wodGhpcywgcHJvamVjdGlvbik7XG5cdH1cblx0ZWxzZSBpZihyZW5kZXJhYmxlIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcblx0e1xuXHRcdGlmKHdvcmxkVmlzaWJsZSAmJiByZW5kZXJhYmxlLnJlbmRlcmFibGUpIFBJWEkuV2ViR0xHcmFwaGljcy5yZW5kZXJHcmFwaGljcyhyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRlbHNlIGlmKHJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLkZpbHRlckJsb2NrKVxuXHR7XG5cdFx0dGhpcy5oYW5kbGVGaWx0ZXJCbG9jayhyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxufVxuXG5mbGlwID0gZmFsc2U7XG52YXIgbWFza1N0YWNrID0gW107XG52YXIgbWFza1Bvc2l0aW9uID0gMDtcblxuLy92YXIgdXNlZE1hc2tTdGFjayA9IFtdO1xuXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUZpbHRlckJsb2NrID0gZnVuY3Rpb24oZmlsdGVyQmxvY2ssIHByb2plY3Rpb24pXG57XG5cdC8qXG5cdCAqIGZvciBub3cgb25seSBtYXNrcyBhcmUgc3VwcG9ydGVkLi5cblx0ICovXG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdFxuXHRpZihmaWx0ZXJCbG9jay5vcGVuKVxuXHR7XG5cdFx0aWYoZmlsdGVyQmxvY2suZGF0YSBpbnN0YW5jZW9mIEFycmF5KVxuXHRcdHtcblx0XHRcdHRoaXMuZmlsdGVyTWFuYWdlci5wdXNoRmlsdGVyKGZpbHRlckJsb2NrKTtcblx0XHRcdC8vIG9rIHNvLi5cblx0XHRcdFxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1x0XG5cdFx0XHRtYXNrUG9zaXRpb24rKztcblxuXHRcdFx0bWFza1N0YWNrLnB1c2goZmlsdGVyQmxvY2spXG5cdFxuXHRcdFx0Z2wuZW5hYmxlKGdsLlNURU5DSUxfVEVTVCk7XG5cdFx0XHRcblx0XHRcdGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdGdsLnN0ZW5jaWxGdW5jKGdsLkFMV0FZUywxLDEpO1xuXHRcdFx0Z2wuc3RlbmNpbE9wKGdsLktFRVAsZ2wuS0VFUCxnbC5JTkNSKTtcblx0XG5cdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MoZmlsdGVyQmxvY2suZGF0YSwgcHJvamVjdGlvbik7XG5cdFx0XHRcblx0XHRcdGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcblx0XHRcdGdsLnN0ZW5jaWxGdW5jKGdsLk5PVEVRVUFMLDAsbWFza1N0YWNrLmxlbmd0aCk7XG5cdFx0XHRnbC5zdGVuY2lsT3AoZ2wuS0VFUCxnbC5LRUVQLGdsLktFRVApO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHRpZihmaWx0ZXJCbG9jay5kYXRhIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0e1xuXHRcdFx0dGhpcy5maWx0ZXJNYW5hZ2VyLnBvcEZpbHRlcigpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dmFyIG1hc2tEYXRhID0gbWFza1N0YWNrLnBvcChmaWx0ZXJCbG9jaylcblxuXG5cdFx0XHRpZihtYXNrRGF0YSlcblx0XHRcdHtcblx0XHRcdFx0Z2wuY29sb3JNYXNrKGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XHRnbC5zdGVuY2lsRnVuYyhnbC5BTFdBWVMsMSwxKTtcblx0XHRcdFx0Z2wuc3RlbmNpbE9wKGdsLktFRVAsZ2wuS0VFUCxnbC5ERUNSKTtcblxuXHRcdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MobWFza0RhdGEuZGF0YSwgcHJvamVjdGlvbik7XG5cdFx0XHRcblx0XHRcdFx0Z2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuXHRcdFx0XHRnbC5zdGVuY2lsRnVuYyhnbC5OT1RFUVVBTCwwLG1hc2tTdGFjay5sZW5ndGgpO1xuXHRcdFx0XHRnbC5zdGVuY2lsT3AoZ2wuS0VFUCxnbC5LRUVQLGdsLktFRVApO1xuXHRcdFx0fTtcblxuXHRcdFx0Z2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgYSB3ZWJnbCB0ZXh0dXJlXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUZXh0dXJlXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdFxuXHQvLyBUT0RPIGRlZmluaXRlbHkgY2FuIG9wdGltc2UgdGhpcyBmdW5jdGlvbi4uXG5cdFxuXHR0aGlzLnJlbW92ZU9iamVjdChkaXNwbGF5T2JqZWN0KTtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgUFJFVklPVVMgUkVOREVSQUJMRVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBwcmV2aW91cyBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBJdCBrZWVwcyBnb2luZyBiYWNrIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIHRoZSBzdGFnZVxuXHQgKi9cblx0dmFyIHByZXZpb3VzUmVuZGVyYWJsZSA9IGRpc3BsYXlPYmplY3QuZmlyc3Q7XG5cdHdoaWxlKHByZXZpb3VzUmVuZGVyYWJsZSAhPSB0aGlzLnJvb3QpXG5cdHtcblx0XHRwcmV2aW91c1JlbmRlcmFibGUgPSBwcmV2aW91c1JlbmRlcmFibGUuX2lQcmV2O1xuXHRcdGlmKHByZXZpb3VzUmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIHByZXZpb3VzUmVuZGVyYWJsZS5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiAgTE9PSyBGT1IgVEhFIE5FWFQgU1BSSVRFXG5cdCAqICBUaGlzIHBhcnQgbG9va3MgZm9yIHRoZSBjbG9zZXN0IG5leHQgc3ByaXRlIHRoYXQgY2FuIGdvIGludG8gYSBiYXRjaFxuXHQgKiAgaXQga2VlcHMgbG9va2luZyB1bnRpbCBpdCBmaW5kcyBhIHNwcml0ZSBvciBnZXRzIHRvIHRoZSBlbmQgb2YgdGhlIGRpc3BsYXlcblx0ICogIHNjZW5lIGdyYXBoXG5cdCAqL1xuXHR2YXIgbmV4dFJlbmRlcmFibGUgPSBkaXNwbGF5T2JqZWN0Lmxhc3Q7XG5cdHdoaWxlKG5leHRSZW5kZXJhYmxlLl9pTmV4dClcblx0e1xuXHRcdG5leHRSZW5kZXJhYmxlID0gbmV4dFJlbmRlcmFibGUuX2lOZXh0O1xuXHRcdGlmKG5leHRSZW5kZXJhYmxlLnJlbmRlcmFibGUgJiYgbmV4dFJlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0fVxuXHRcblx0dGhpcy5pbnNlcnRPYmplY3QoZGlzcGxheU9iamVjdCwgcHJldmlvdXNSZW5kZXJhYmxlLCBuZXh0UmVuZGVyYWJsZSk7XG59XG5cbi8qKlxuICogQWRkcyBmaWx0ZXIgYmxvY2tzXG4gKlxuICogQG1ldGhvZCBhZGRGaWx0ZXJCbG9ja3NcbiAqIEBwYXJhbSBzdGFydCB7RmlsdGVyQmxvY2t9XG4gKiBAcGFyYW0gZW5kIHtGaWx0ZXJCbG9ja31cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuYWRkRmlsdGVyQmxvY2tzID0gZnVuY3Rpb24oc3RhcnQsIGVuZClcbntcblx0c3RhcnQuX19yZW5kZXJHcm91cCA9IHRoaXM7XG5cdGVuZC5fX3JlbmRlckdyb3VwID0gdGhpcztcblx0Lypcblx0ICogIExPT0sgRk9SIFRIRSBQUkVWSU9VUyBSRU5ERVJBQkxFXG5cdCAqICBUaGlzIHBhcnQgbG9va3MgZm9yIHRoZSBjbG9zZXN0IHByZXZpb3VzIHNwcml0ZSB0aGF0IGNhbiBnbyBpbnRvIGEgYmF0Y2hcblx0ICogIEl0IGtlZXBzIGdvaW5nIGJhY2sgdW50aWwgaXQgZmluZHMgYSBzcHJpdGUgb3IgdGhlIHN0YWdlXG5cdCAqL1xuXHR2YXIgcHJldmlvdXNSZW5kZXJhYmxlID0gc3RhcnQ7XG5cdHdoaWxlKHByZXZpb3VzUmVuZGVyYWJsZSAhPSB0aGlzLnJvb3QuZmlyc3QpXG5cdHtcblx0XHRwcmV2aW91c1JlbmRlcmFibGUgPSBwcmV2aW91c1JlbmRlcmFibGUuX2lQcmV2O1xuXHRcdGlmKHByZXZpb3VzUmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIHByZXZpb3VzUmVuZGVyYWJsZS5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdHRoaXMuaW5zZXJ0QWZ0ZXIoc3RhcnQsIHByZXZpb3VzUmVuZGVyYWJsZSk7XG5cdFx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgTkVYVCBTUFJJVEVcblx0ICogIFRoaXMgcGFydCBsb29rcyBmb3IgdGhlIGNsb3Nlc3QgbmV4dCBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBpdCBrZWVwcyBsb29raW5nIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIGdldHMgdG8gdGhlIGVuZCBvZiB0aGUgZGlzcGxheVxuXHQgKiAgc2NlbmUgZ3JhcGhcblx0ICovXG5cdHZhciBwcmV2aW91c1JlbmRlcmFibGUyID0gZW5kO1xuXHR3aGlsZShwcmV2aW91c1JlbmRlcmFibGUyICE9IHRoaXMucm9vdC5maXJzdClcblx0e1xuXHRcdHByZXZpb3VzUmVuZGVyYWJsZTIgPSBwcmV2aW91c1JlbmRlcmFibGUyLl9pUHJldjtcblx0XHRpZihwcmV2aW91c1JlbmRlcmFibGUyLnJlbmRlcmFibGUgJiYgcHJldmlvdXNSZW5kZXJhYmxlMi5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdHRoaXMuaW5zZXJ0QWZ0ZXIoZW5kLCBwcmV2aW91c1JlbmRlcmFibGUyKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZmlsdGVyIGJsb2Nrc1xuICpcbiAqIEBtZXRob2QgcmVtb3ZlRmlsdGVyQmxvY2tzXG4gKiBAcGFyYW0gc3RhcnQge0ZpbHRlckJsb2NrfVxuICogQHBhcmFtIGVuZCB7RmlsdGVyQmxvY2t9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbW92ZUZpbHRlckJsb2NrcyA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQpXG57XG5cdHRoaXMucmVtb3ZlT2JqZWN0KHN0YXJ0KTtcblx0dGhpcy5yZW1vdmVPYmplY3QoZW5kKTtcbn1cblxuLyoqXG4gKiBBZGRzIGEgZGlzcGxheSBvYmplY3QgYW5kIGNoaWxkcmVuIHRvIHRoZSB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCBhZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW5cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4gPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHRpZihkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXApZGlzcGxheU9iamVjdC5fX3JlbmRlckdyb3VwLnJlbW92ZURpc3BsYXlPYmplY3RBbmRDaGlsZHJlbihkaXNwbGF5T2JqZWN0KTtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgUFJFVklPVVMgUkVOREVSQUJMRVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBwcmV2aW91cyBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBJdCBrZWVwcyBnb2luZyBiYWNrIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIHRoZSBzdGFnZVxuXHQgKi9cblx0XG5cdHZhciBwcmV2aW91c1JlbmRlcmFibGUgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHR3aGlsZShwcmV2aW91c1JlbmRlcmFibGUgIT0gdGhpcy5yb290LmZpcnN0KVxuXHR7XG5cdFx0cHJldmlvdXNSZW5kZXJhYmxlID0gcHJldmlvdXNSZW5kZXJhYmxlLl9pUHJldjtcblx0XHRpZihwcmV2aW91c1JlbmRlcmFibGUucmVuZGVyYWJsZSAmJiBwcmV2aW91c1JlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0fVxuXHRcblx0Lypcblx0ICogIExPT0sgRk9SIFRIRSBORVhUIFNQUklURVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBuZXh0IHNwcml0ZSB0aGF0IGNhbiBnbyBpbnRvIGEgYmF0Y2hcblx0ICogIGl0IGtlZXBzIGxvb2tpbmcgdW50aWwgaXQgZmluZHMgYSBzcHJpdGUgb3IgZ2V0cyB0byB0aGUgZW5kIG9mIHRoZSBkaXNwbGF5XG5cdCAqICBzY2VuZSBncmFwaFxuXHQgKi9cblx0dmFyIG5leHRSZW5kZXJhYmxlID0gZGlzcGxheU9iamVjdC5sYXN0O1xuXHR3aGlsZShuZXh0UmVuZGVyYWJsZS5faU5leHQpXG5cdHtcblx0XHRuZXh0UmVuZGVyYWJsZSA9IG5leHRSZW5kZXJhYmxlLl9pTmV4dDtcblx0XHRpZihuZXh0UmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIG5leHRSZW5kZXJhYmxlLl9fcmVuZGVyR3JvdXApYnJlYWs7XG5cdH1cblx0XG5cdC8vIG9uZSB0aGUgZGlzcGxheSBvYmplY3QgaGl0cyB0aGlzLiB3ZSBjYW4gYnJlYWsgdGhlIGxvb3BcdFxuXHRcblx0dmFyIHRlbXBPYmplY3QgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHR2YXIgdGVzdE9iamVjdCA9IGRpc3BsYXlPYmplY3QubGFzdC5faU5leHQ7XG5cdGRvXHRcblx0e1xuXHRcdHRlbXBPYmplY3QuX19yZW5kZXJHcm91cCA9IHRoaXM7XG5cdFx0XG5cdFx0aWYodGVtcE9iamVjdC5yZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcblx0XHRcdHRoaXMuaW5zZXJ0T2JqZWN0KHRlbXBPYmplY3QsIHByZXZpb3VzUmVuZGVyYWJsZSwgbmV4dFJlbmRlcmFibGUpO1xuXHRcdFx0cHJldmlvdXNSZW5kZXJhYmxlID0gdGVtcE9iamVjdDtcblx0XHR9XG5cdFx0XG5cdFx0dGVtcE9iamVjdCA9IHRlbXBPYmplY3QuX2lOZXh0O1xuXHR9XG5cdHdoaWxlKHRlbXBPYmplY3QgIT0gdGVzdE9iamVjdClcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgZGlzcGxheSBvYmplY3QgYW5kIGNoaWxkcmVuIHRvIHRoZSB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCByZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW5cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4gPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHRpZihkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXAgIT0gdGhpcylyZXR1cm47XG5cdFxuLy9cdHZhciBkaXNwbGF5T2JqZWN0ID0gZGlzcGxheU9iamVjdC5maXJzdDtcblx0dmFyIGxhc3RPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3Q7XG5cdGRvXHRcblx0e1xuXHRcdGRpc3BsYXlPYmplY3QuX19yZW5kZXJHcm91cCA9IG51bGw7XG5cdFx0aWYoZGlzcGxheU9iamVjdC5yZW5kZXJhYmxlKXRoaXMucmVtb3ZlT2JqZWN0KGRpc3BsYXlPYmplY3QpO1xuXHRcdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0Ll9pTmV4dDtcblx0fVxuXHR3aGlsZShkaXNwbGF5T2JqZWN0KVxufVxuXG4vKipcbiAqIEluc2VydHMgYSBkaXNwbGF5T2JqZWN0IGludG8gdGhlIGxpbmtlZCBsaXN0XG4gKlxuICogQG1ldGhvZCBpbnNlcnRPYmplY3RcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIHByZXZpb3VzT2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIG5leHRPYmplY3Qge0Rpc3BsYXlPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmluc2VydE9iamVjdCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHByZXZpb3VzT2JqZWN0LCBuZXh0T2JqZWN0KVxue1xuXHQvLyB3aGlsZSBsb29waW5nIGJlbG93IFRIRSBPQkpFQ1QgTUFZIE5PVCBIQVZFIEJFRU4gQURERURcblx0dmFyIHByZXZpb3VzU3ByaXRlID0gcHJldmlvdXNPYmplY3Q7XG5cdHZhciBuZXh0U3ByaXRlID0gbmV4dE9iamVjdDtcblx0XG5cdC8qXG5cdCAqIHNvIG5vdyB3ZSBoYXZlIHRoZSBuZXh0IHJlbmRlcmFibGUgYW5kIHRoZSBwcmV2aW91cyByZW5kZXJhYmxlXG5cdCAqIFxuXHQgKi9cblx0aWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuU3ByaXRlKVxuXHR7XG5cdFx0dmFyIHByZXZpb3VzQmF0Y2hcblx0XHR2YXIgbmV4dEJhdGNoXG5cdFx0XG5cdFx0aWYocHJldmlvdXNTcHJpdGUgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHR7XG5cdFx0XHRwcmV2aW91c0JhdGNoID0gcHJldmlvdXNTcHJpdGUuYmF0Y2g7XG5cdFx0XHRpZihwcmV2aW91c0JhdGNoKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihwcmV2aW91c0JhdGNoLnRleHR1cmUgPT0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmJhc2VUZXh0dXJlICYmIHByZXZpb3VzQmF0Y2guYmxlbmRNb2RlID09IGRpc3BsYXlPYmplY3QuYmxlbmRNb2RlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cHJldmlvdXNCYXRjaC5pbnNlcnRBZnRlcihkaXNwbGF5T2JqZWN0LCBwcmV2aW91c1Nwcml0ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHQvLyBUT0RPIHJld29yZCFcblx0XHRcdHByZXZpb3VzQmF0Y2ggPSBwcmV2aW91c1Nwcml0ZTtcblx0XHR9XG5cdFxuXHRcdGlmKG5leHRTcHJpdGUpXG5cdFx0e1xuXHRcdFx0aWYobmV4dFNwcml0ZSBpbnN0YW5jZW9mIFBJWEkuU3ByaXRlKVxuXHRcdFx0e1xuXHRcdFx0XHRuZXh0QmF0Y2ggPSBuZXh0U3ByaXRlLmJhdGNoO1xuXHRcdFx0XG5cdFx0XHRcdC8vYmF0Y2ggbWF5IG5vdCBleGlzdCBpZiBpdGVtIHdhcyBhZGRlZCB0byB0aGUgZGlzcGxheSBsaXN0IGJ1dCBub3QgdG8gdGhlIHdlYkdMXG5cdFx0XHRcdGlmKG5leHRCYXRjaClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKG5leHRCYXRjaC50ZXh0dXJlID09IGRpc3BsYXlPYmplY3QudGV4dHVyZS5iYXNlVGV4dHVyZSAmJiBuZXh0QmF0Y2guYmxlbmRNb2RlID09IGRpc3BsYXlPYmplY3QuYmxlbmRNb2RlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5leHRCYXRjaC5pbnNlcnRCZWZvcmUoZGlzcGxheU9iamVjdCwgbmV4dFNwcml0ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZihuZXh0QmF0Y2ggPT0gcHJldmlvdXNCYXRjaClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Ly8gVEhFUkUgSVMgQSBTUExJVCBJTiBUSElTIEJBVENIISAvL1xuXHRcdFx0XHRcdFx0XHR2YXIgc3BsaXRCYXRjaCA9IHByZXZpb3VzQmF0Y2guc3BsaXQobmV4dFNwcml0ZSk7XG5cdFx0XHRcdFx0XHRcdC8vIENPT0whXG5cdFx0XHRcdFx0XHRcdC8vIGFkZCBpdCBiYWNrIGludG8gdGhlIGFycmF5XHRcblx0XHRcdFx0XHRcdFx0Lypcblx0XHRcdFx0XHRcdFx0ICogT09QUyFcblx0XHRcdFx0XHRcdFx0ICogc2VlbXMgdGhlIG5ldyBzcHJpdGUgaXMgaW4gdGhlIG1pZGRsZSBvZiBhIGJhdGNoXG5cdFx0XHRcdFx0XHRcdCAqIGxldHMgc3BsaXQgaXQuLiBcblx0XHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHRcdHZhciBiYXRjaCA9IFBJWEkuV2ViR0xSZW5kZXJlci5nZXRCYXRjaCgpO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBpbmRleCA9IHRoaXMuYmF0Y2hzLmluZGV4T2YoIHByZXZpb3VzQmF0Y2ggKTtcblx0XHRcdFx0XHRcdFx0YmF0Y2guaW5pdChkaXNwbGF5T2JqZWN0KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4KzEsIDAsIGJhdGNoLCBzcGxpdEJhdGNoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Ly8gVE9ETyByZS13b3JkIVxuXHRcdFx0XHRcblx0XHRcdFx0bmV4dEJhdGNoID0gbmV4dFNwcml0ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Lypcblx0XHQgKiBsb29rcyBsaWtlIGl0IGRvZXMgbm90IGJlbG9uZyB0byBhbnkgYmF0Y2ghXG5cdFx0ICogYnV0IGlzIGFsc28gbm90IGludGVyc2VjdGluZyBvbmUuLlxuXHRcdCAqIHRpbWUgdG8gY3JlYXRlIGFuZXcgb25lIVxuXHRcdCAqL1xuXHRcdFxuXHRcdHZhciBiYXRjaCA9ICBQSVhJLldlYkdMUmVuZGVyZXIuZ2V0QmF0Y2goKTtcblx0XHRiYXRjaC5pbml0KGRpc3BsYXlPYmplY3QpO1xuXG5cdFx0aWYocHJldmlvdXNCYXRjaCkgLy8gaWYgdGhpcyBpcyBpbnZhbGlkIGl0IG1lYW5zIFxuXHRcdHtcblx0XHRcdHZhciBpbmRleCA9IHRoaXMuYmF0Y2hzLmluZGV4T2YoIHByZXZpb3VzQmF0Y2ggKTtcblx0XHRcdHRoaXMuYmF0Y2hzLnNwbGljZShpbmRleCsxLCAwLCBiYXRjaCk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNocy5wdXNoKGJhdGNoKTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHR7XG5cdFx0XG5cdFx0Ly8gYWRkIHRvIGEgYmF0Y2ghIVxuXHRcdHRoaXMuaW5pdFRpbGluZ1Nwcml0ZShkaXNwbGF5T2JqZWN0KTtcblx0Ly9cdHRoaXMuYmF0Y2hzLnB1c2goZGlzcGxheU9iamVjdCk7XG5cdFx0XG5cdH1cblx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0IGluc3RhbmNlb2YgUElYSS5TdHJpcClcblx0e1xuXHRcdC8vIGFkZCB0byBhIGJhdGNoISFcblx0XHR0aGlzLmluaXRTdHJpcChkaXNwbGF5T2JqZWN0KTtcblx0Ly9cdHRoaXMuYmF0Y2hzLnB1c2goZGlzcGxheU9iamVjdCk7XG5cdH1cblx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0KS8vIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcblx0e1xuXHRcdC8vZGlzcGxheU9iamVjdC5pbml0V2ViR0wodGhpcyk7XG5cdFx0XG5cdFx0Ly8gYWRkIHRvIGEgYmF0Y2ghIVxuXHRcdC8vdGhpcy5pbml0U3RyaXAoZGlzcGxheU9iamVjdCk7XG5cdFx0Ly90aGlzLmJhdGNocy5wdXNoKGRpc3BsYXlPYmplY3QpO1xuXHR9XG5cdFxuXHR0aGlzLmluc2VydEFmdGVyKGRpc3BsYXlPYmplY3QsIHByZXZpb3VzU3ByaXRlKTtcblx0XHRcdFxuXHQvLyBpbnNlcnQgYW5kIFNQTElUIVxuXG59XG5cbi8qKlxuICogSW5zZXJ0cyBhIGRpc3BsYXlPYmplY3QgaW50byB0aGUgbGlua2VkIGxpc3RcbiAqXG4gKiBAbWV0aG9kIGluc2VydEFmdGVyXG4gKiBAcGFyYW0gaXRlbSB7RGlzcGxheU9iamVjdH1cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fSBUaGUgb2JqZWN0IHRvIGluc2VydFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uKGl0ZW0sIGRpc3BsYXlPYmplY3QpXG57XG5cdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdHZhciBwcmV2aW91c0JhdGNoID0gZGlzcGxheU9iamVjdC5iYXRjaDtcblx0XHRcblx0XHRpZihwcmV2aW91c0JhdGNoKVxuXHRcdHtcblx0XHRcdC8vIHNvIHRoaXMgb2JqZWN0IGlzIGluIGEgYmF0Y2ghXG5cdFx0XHRcblx0XHRcdC8vIGlzIGl0IG5vdD8gbmVlZCB0byBzcGxpdCB0aGUgYmF0Y2hcblx0XHRcdGlmKHByZXZpb3VzQmF0Y2gudGFpbCA9PSBkaXNwbGF5T2JqZWN0KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBpcyBpdCB0YWlsPyBpbnNlcnQgaW4gdG8gYmF0Y2hzXHRcblx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggcHJldmlvdXNCYXRjaCApO1xuXHRcdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgrMSwgMCwgaXRlbSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFRPRE8gTU9ESUZZIEFERCAvIFJFTU9WRSBDSElMRCBUTyBBQ0NPVU5UIEZPUiBGSUxURVJTIChhbHNvIGdldCBwcmV2IGFuZCBuZXh0KSAvL1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVEhFUkUgSVMgQSBTUExJVCBJTiBUSElTIEJBVENIISAvL1xuXHRcdFx0XHR2YXIgc3BsaXRCYXRjaCA9IHByZXZpb3VzQmF0Y2guc3BsaXQoZGlzcGxheU9iamVjdC5fX25leHQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ09PTCFcblx0XHRcdFx0Ly8gYWRkIGl0IGJhY2sgaW50byB0aGUgYXJyYXlcdFxuXHRcdFx0XHQvKlxuXHRcdFx0XHQgKiBPT1BTIVxuXHRcdFx0XHQgKiBzZWVtcyB0aGUgbmV3IHNwcml0ZSBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgYmF0Y2hcblx0XHRcdFx0ICogbGV0cyBzcGxpdCBpdC4uIFxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggcHJldmlvdXNCYXRjaCApO1xuXHRcdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgrMSwgMCwgaXRlbSwgc3BsaXRCYXRjaCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNocy5wdXNoKGl0ZW0pO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHR2YXIgaW5kZXggPSB0aGlzLmJhdGNocy5pbmRleE9mKCBkaXNwbGF5T2JqZWN0ICk7XG5cdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4KzEsIDAsIGl0ZW0pO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGRpc3BsYXlPYmplY3QgZnJvbSB0aGUgbGlua2VkIGxpc3RcbiAqXG4gKiBAbWV0aG9kIHJlbW92ZU9iamVjdFxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBvYmplY3QgdG8gcmVtb3ZlXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIGxvb3AgdGhyb3VnaCBjaGlsZHJlbi4uXG5cdC8vIGRpc3BsYXkgb2JqZWN0IC8vXG5cdFxuXHQvLyBhZGQgYSBjaGlsZCBmcm9tIHRoZSByZW5kZXIgZ3JvdXAuLlxuXHQvLyByZW1vdmUgaXQgYW5kIGFsbCBpdHMgY2hpbGRyZW4hXG5cdC8vZGlzcGxheU9iamVjdC5jYWNoZVZpc2libGUgPSBmYWxzZTsvL2Rpc3BsYXlPYmplY3QudmlzaWJsZTtcblxuXHQvKlxuXHQgKiByZW1vdmluZyBpcyBhIGxvdCBxdWlja2VyLi5cblx0ICogXG5cdCAqL1xuXHR2YXIgYmF0Y2hUb1JlbW92ZTtcblx0XG5cdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdC8vIHNob3VsZCBhbHdheXMgaGF2ZSBhIGJhdGNoIVxuXHRcdHZhciBiYXRjaCA9IGRpc3BsYXlPYmplY3QuYmF0Y2g7XG5cdFx0aWYoIWJhdGNoKXJldHVybjsgLy8gdGhpcyBtZWFucyB0aGUgZGlzcGxheSBsaXN0IGhhcyBiZWVuIGFsdGVyZWQgYmVmcmUgcmVuZGVyaW5nXG5cdFx0XG5cdFx0YmF0Y2gucmVtb3ZlKGRpc3BsYXlPYmplY3QpO1xuXHRcdFxuXHRcdGlmKGJhdGNoLnNpemU9PTApXG5cdFx0e1xuXHRcdFx0YmF0Y2hUb1JlbW92ZSA9IGJhdGNoO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHRiYXRjaFRvUmVtb3ZlID0gZGlzcGxheU9iamVjdDtcblx0fVxuXHRcblx0Lypcblx0ICogTG9va3MgbGlrZSB0aGVyZSBpcyBzb210aGluZyB0aGF0IG5lZWRzIHJlbW92aW5nIVxuXHQgKi9cblx0aWYoYmF0Y2hUb1JlbW92ZSlcdFxuXHR7XG5cdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggYmF0Y2hUb1JlbW92ZSApO1xuXHRcdGlmKGluZGV4ID09IC0xKXJldHVybjsvLyB0aGlzIG1lYW5zIGl0IHdhcyBhZGRlZCB0aGVuIHJlbW92ZWQgYmVmb3JlIHJlbmRlcmVkXG5cdFx0XG5cdFx0Ly8gb2sgc28uLiBjaGVjayB0byBzZWUgaWYgeW91IGFkamFjZW50IGJhdGNocyBzaG91bGQgYmUgam9pbmVkLlxuXHRcdC8vIFRPRE8gbWF5IG9wdGltaXNlP1xuXHRcdGlmKGluZGV4ID09IDAgfHwgaW5kZXggPT0gdGhpcy5iYXRjaHMubGVuZ3RoLTEpXG5cdFx0e1xuXHRcdFx0Ly8gd2hhIC0gZXZhISBqdXN0IGdldCBvZiB0aGUgZW1wdHkgYmF0Y2ghXG5cdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0aWYoYmF0Y2hUb1JlbW92ZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClQSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2goYmF0Y2hUb1JlbW92ZSk7XG5cdFx0XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGlmKHRoaXMuYmF0Y2hzW2luZGV4LTFdIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoICYmIHRoaXMuYmF0Y2hzW2luZGV4KzFdIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVxuXHRcdHtcblx0XHRcdGlmKHRoaXMuYmF0Y2hzW2luZGV4LTFdLnRleHR1cmUgPT0gdGhpcy5iYXRjaHNbaW5kZXgrMV0udGV4dHVyZSAmJiB0aGlzLmJhdGNoc1tpbmRleC0xXS5ibGVuZE1vZGUgPT0gdGhpcy5iYXRjaHNbaW5kZXgrMV0uYmxlbmRNb2RlKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiTUVSR0VcIilcblx0XHRcdFx0dGhpcy5iYXRjaHNbaW5kZXgtMV0ubWVyZ2UodGhpcy5iYXRjaHNbaW5kZXgrMV0pO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoYmF0Y2hUb1JlbW92ZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClQSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2goYmF0Y2hUb1JlbW92ZSk7XG5cdFx0XHRcdFBJWEkuV2ViR0xSZW5kZXJlci5yZXR1cm5CYXRjaCh0aGlzLmJhdGNoc1tpbmRleCsxXSk7XG5cdFx0XHRcdHRoaXMuYmF0Y2hzLnNwbGljZShpbmRleCwgMik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRpZihiYXRjaFRvUmVtb3ZlIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVBJWEkuV2ViR0xSZW5kZXJlci5yZXR1cm5CYXRjaChiYXRjaFRvUmVtb3ZlKTtcblx0fVxufVxuXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSB0aWxpbmcgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbml0VGlsaW5nU3ByaXRlXG4gKiBAcGFyYW0gc3ByaXRlIHtUaWxpbmdTcHJpdGV9IFRoZSB0aWxpbmcgc3ByaXRlIHRvIGluaXRpYWxpemVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuaW5pdFRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblxuXHQvLyBtYWtlIHRoZSB0ZXh0dXJlIHRpbGFibGUuLlxuXHRcdFx0XG5cdHNwcml0ZS52ZXJ0aWNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgIHNwcml0ZS53aWR0aCwgMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICBzcHJpdGUud2lkdGgsICBzcHJpdGUuaGVpZ2h0LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgMCwgIHNwcml0ZS5oZWlnaHRdKTtcblx0XHRcdFx0XHRcblx0c3ByaXRlLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsXG5cdFx0XHRcdFx0XHRcdFx0XHQxLCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0MSwgMSxcblx0XHRcdFx0XHRcdFx0XHRcdDAsIDFdKTtcblx0XHRcdFx0XG5cdHNwcml0ZS5jb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KFsxLDEsMSwxXSk7XG5cdFxuXHRzcHJpdGUuaW5kaWNlcyA9ICBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDMsMl0pLy8sIDJdKTtcblx0XG5cdHNwcml0ZS5fdmVydGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHNwcml0ZS5faW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0c3ByaXRlLl91dkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRzcHJpdGUuX2NvbG9yQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdFx0XHRcdFx0XHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fdmVydGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS52ZXJ0aWNpZXMsIGdsLlNUQVRJQ19EUkFXKTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc3ByaXRlLl91dkJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsICBzcHJpdGUudXZzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fY29sb3JCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3ByaXRlLmNvbG9ycywgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3ByaXRlLl9pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3ByaXRlLmluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcbi8vICAgIHJldHVybiAoICh4ID4gMCkgJiYgKCh4ICYgKHggLSAxKSkgPT0gMCkgKTtcblxuXHRpZihzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKVxuXHR7XG4gICAgXHRnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKTtcbiAgICBcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLlJFUEVBVCk7XG5cdFx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuUkVQRUFUKTtcblx0XHRzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fcG93ZXJPZjIgPSB0cnVlO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLl9wb3dlck9mMiA9IHRydWU7XG5cdH1cbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgU3RyaXBcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclN0cmlwXG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgc3RyaXAgdG8gcmVuZGVyXG4gKiBAcGFyYW0gcHJvamVjdGlvbiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW5kZXJTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwLCBwcm9qZWN0aW9uKVxue1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdFBJWEkuYWN0aXZhdGVTdHJpcFNoYWRlcigpO1xuXG5cdHZhciBzaGFkZXIgPSBQSVhJLnN0cmlwU2hhZGVyO1xuXG5cdHZhciBwcm9ncmFtID0gc2hhZGVyLnByb2dyYW07XG5cdFxuXHR2YXIgbSA9IFBJWEkubWF0My5jbG9uZShzdHJpcC53b3JsZFRyYW5zZm9ybSk7XG5cdFxuXHRQSVhJLm1hdDMudHJhbnNwb3NlKG0pO1xuXHRcbi8vXHRjb25zb2xlLmxvZyhwcm9qZWN0aW9uKVxuXHQvLyBzZXQgdGhlIG1hdHJpeCB0cmFuc2Zvcm0gZm9yIHRoZSBcbiBcdGdsLnVuaWZvcm1NYXRyaXgzZnYoc2hhZGVyLnRyYW5zbGF0aW9uTWF0cml4LCBmYWxzZSwgbSk7XG5cdGdsLnVuaWZvcm0yZihzaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCBwcm9qZWN0aW9uLnkpO1xuXHRnbC51bmlmb3JtMmYoc2hhZGVyLm9mZnNldFZlY3RvciwgLVBJWEkub2Zmc2V0LngsIC1QSVhJLm9mZnNldC55KTtcblx0XG5cdGdsLnVuaWZvcm0xZihzaGFkZXIuYWxwaGEsIHN0cmlwLndvcmxkQWxwaGEpO1xuXG5cdC8qXG5cdGlmKHN0cmlwLmJsZW5kTW9kZSA9PSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMKVxuXHR7XG5cdFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19DT0xPUik7XG5cdH1cblx0Ki9cblx0XG5cdC8vY29uc29sZS5sb2coXCIhIVwiKVxuXHRpZighc3RyaXAuZGlydHkpXG5cdHtcdFxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdmVydGV4QnVmZmVyKTtcblx0XHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgc3RyaXAudmVydGljaWVzKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFxuXHRcdC8vIHVwZGF0ZSB0aGUgdXZzXG5cdCAgIFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl91dkJ1ZmZlcik7XG5cdCAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5hVGV4dHVyZUNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFx0XG5cdCAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcblx0ICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHN0cmlwLnRleHR1cmUuYmFzZVRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdFx0XG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl9jb2xvckJ1ZmZlcik7XG5cdCAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5jb2xvckF0dHJpYnV0ZSwgMSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcblx0XHQvLyBkb250IG5lZWQgdG8gdXBsb2FkIVxuXHQgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3RyaXAuX2luZGV4QnVmZmVyKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRzdHJpcC5kaXJ0eSA9IGZhbHNlO1xuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdmVydGV4QnVmZmVyKTtcblx0XHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAudmVydGljaWVzLCBnbC5TVEFUSUNfRFJBVylcblx0ICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyLmFWZXJ0ZXhQb3NpdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcblx0XHQvLyB1cGRhdGUgdGhlIHV2c1xuXHQgICBcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdXZCdWZmZXIpO1xuXHQgICBcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC51dnMsIGdsLlNUQVRJQ19EUkFXKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVRleHR1cmVDb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcdFxuXHQgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG5cdCAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzdHJpcC50ZXh0dXJlLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUpO1xuXHQvL1x0Y29uc29sZS5sb2coc3RyaXAudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKVxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fY29sb3JCdWZmZXIpO1xuXHRcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5jb2xvcnMsIGdsLlNUQVRJQ19EUkFXKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuY29sb3JBdHRyaWJ1dGUsIDEsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cdFx0XG5cdFx0Ly8gZG9udCBuZWVkIHRvIHVwbG9hZCFcblx0ICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHN0cmlwLl9pbmRleEJ1ZmZlcik7XG5cdCAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBzdHJpcC5pbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG5cdCAgICBcblx0fVxuXHRcblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFX1NUUklQLCBzdHJpcC5pbmRpY2VzLmxlbmd0aCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIFxuICAgIFBJWEkuZGVhY3RpdmF0ZVN0cmlwU2hhZGVyKCk7XG4gIFx0Ly9nbC51c2VQcm9ncmFtKFBJWEkuY3VycmVudFByb2dyYW0pO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBUaWxpbmdTcHJpdGVcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclRpbGluZ1Nwcml0ZVxuICogQHBhcmFtIHNwcml0ZSB7VGlsaW5nU3ByaXRlfSBUaGUgdGlsaW5nIHNwcml0ZSB0byByZW5kZXJcbiAqIEBwYXJhbSBwcm9qZWN0aW9uTWF0cml4IHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbmRlclRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSwgcHJvamVjdGlvbk1hdHJpeClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblxuXG5cdHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5zaGFkZXJQcm9ncmFtO1xuXHRcblx0dmFyIHRpbGVQb3NpdGlvbiA9IHNwcml0ZS50aWxlUG9zaXRpb247XG5cdHZhciB0aWxlU2NhbGUgPSBzcHJpdGUudGlsZVNjYWxlO1xuXHRcblx0dmFyIG9mZnNldFggPSAgdGlsZVBvc2l0aW9uLngvc3ByaXRlLnRleHR1cmUuYmFzZVRleHR1cmUud2lkdGg7XG5cdHZhciBvZmZzZXRZID0gIHRpbGVQb3NpdGlvbi55L3Nwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodDtcblx0XG5cdHZhciBzY2FsZVggPSAgKHNwcml0ZS53aWR0aCAvIHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLndpZHRoKSAgLyB0aWxlU2NhbGUueDtcblx0dmFyIHNjYWxlWSA9ICAoc3ByaXRlLmhlaWdodCAvIHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodCkgLyB0aWxlU2NhbGUueTtcblxuXHRzcHJpdGUudXZzWzBdID0gMCAtIG9mZnNldFg7XG5cdHNwcml0ZS51dnNbMV0gPSAwIC0gb2Zmc2V0WTtcblx0XG5cdHNwcml0ZS51dnNbMl0gPSAoMSAqIHNjYWxlWCkgIC1vZmZzZXRYO1xuXHRzcHJpdGUudXZzWzNdID0gMCAtIG9mZnNldFk7XG5cdFxuXHRzcHJpdGUudXZzWzRdID0gKDEgKnNjYWxlWCkgLSBvZmZzZXRYO1xuXHRzcHJpdGUudXZzWzVdID0gKDEgKnNjYWxlWSkgLSBvZmZzZXRZO1xuXHRcblx0c3ByaXRlLnV2c1s2XSA9IDAgLSBvZmZzZXRYO1xuXHRzcHJpdGUudXZzWzddID0gKDEgKnNjYWxlWSkgLSBvZmZzZXRZO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fdXZCdWZmZXIpO1xuXHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgc3ByaXRlLnV2cylcblx0XG5cdHRoaXMucmVuZGVyU3RyaXAoc3ByaXRlLCBwcm9qZWN0aW9uTWF0cml4KTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIHN0cmlwIHRvIGJlIHJlbmRlcmVkXG4gKlxuICogQG1ldGhvZCBpbml0U3RyaXBcbiAqIEBwYXJhbSBzdHJpcCB7U3RyaXB9IFRoZSBzdHJpcCB0byBpbml0aWFsaXplXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmluaXRTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwKVxue1xuXHQvLyBidWlsZCB0aGUgc3RyaXAhXG5cdHZhciBnbCA9IHRoaXMuZ2w7XG5cdHZhciBzaGFkZXJQcm9ncmFtID0gdGhpcy5zaGFkZXJQcm9ncmFtO1xuXHRcblx0c3RyaXAuX3ZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRzdHJpcC5faW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0c3RyaXAuX3V2QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHN0cmlwLl9jb2xvckJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl92ZXJ0ZXhCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAudmVydGljaWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdXZCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAgc3RyaXAudXZzLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAuX2NvbG9yQnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLmNvbG9ycywgZ2wuU1RBVElDX0RSQVcpO1xuXG5cdFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHN0cmlwLl9pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3RyaXAuaW5kaWNlcywgZ2wuU1RBVElDX0RSQVcpO1xufVxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlciA9IGZ1bmN0aW9uKHRyYW5zcGFyZW50KVxue1xuXHR0aGlzLnRyYW5zcGFyZW50ID0gdHJhbnNwYXJlbnQ7XG5cdFxuXHR0aGlzLmZpbHRlclN0YWNrID0gW107XG5cdHRoaXMudGV4dHVyZVBvb2wgPSBbXTtcblx0XG5cdHRoaXMub2Zmc2V0WCA9IDA7XG5cdHRoaXMub2Zmc2V0WSA9IDA7XG5cdFxuXHR0aGlzLmluaXRTaGFkZXJCdWZmZXJzKCk7XG59XG5cbi8vIEFQSVxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlci5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbihwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdHRoaXMud2lkdGggPSBwcm9qZWN0aW9uLnggKiAyO1xuXHR0aGlzLmhlaWdodCA9IC1wcm9qZWN0aW9uLnkgKiAyO1xuXHR0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLnB1c2hGaWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXJCbG9jaylcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHQvLyBmaWx0ZXIgcHJvZ3JhbVxuXHQvLyBPUFRJTUlTQVRJT04gLSB0aGUgZmlyc3QgZmlsdGVyIGlzIGZyZWUgaWYgaXRzIGEgc2ltcGxlIGNvbG9yIGNoYW5nZT9cblx0dGhpcy5maWx0ZXJTdGFjay5wdXNoKGZpbHRlckJsb2NrKTtcblxuXHR2YXIgZmlsdGVyID0gZmlsdGVyQmxvY2suZmlsdGVyUGFzc2VzWzBdO1xuXG5cdFxuXG5cdHRoaXMub2Zmc2V0WCArPSBmaWx0ZXJCbG9jay50YXJnZXQuZmlsdGVyQXJlYS54O1xuXHR0aGlzLm9mZnNldFkgKz0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWEueTtcblx0XG5cdFxuXHRcblx0XG5cdFxuXHR2YXIgdGV4dHVyZSA9IHRoaXMudGV4dHVyZVBvb2wucG9wKCk7XG5cdGlmKCF0ZXh0dXJlKXRleHR1cmUgPSBuZXcgUElYSS5GaWx0ZXJUZXh0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XG5cdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsICB0ZXh0dXJlLnRleHR1cmUpO1xuXHRcblx0dGhpcy5nZXRCb3VuZHMoZmlsdGVyQmxvY2sudGFyZ2V0KTtcblx0XHRcblx0Ly8gYWRkcGFkZGluZz9cblx0Ly9kaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEueFxuXG5cdHZhciBmaWx0ZXJBcmVhID0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cblx0dmFyIHBhZGlkbmcgPSBmaWx0ZXIucGFkZGluZztcblx0ZmlsdGVyQXJlYS54IC09IHBhZGlkbmc7XG5cdGZpbHRlckFyZWEueSAtPSBwYWRpZG5nO1xuXHRmaWx0ZXJBcmVhLndpZHRoICs9IHBhZGlkbmcgKiAyO1xuXHRmaWx0ZXJBcmVhLmhlaWdodCArPSBwYWRpZG5nICogMjtcblxuXHQvLyBjYXAgZmlsdGVyIHRvIHNjcmVlbiBzaXplLi5cblx0aWYoZmlsdGVyQXJlYS54IDwgMClmaWx0ZXJBcmVhLnggPSAwO1x0XG5cdGlmKGZpbHRlckFyZWEud2lkdGggPiB0aGlzLndpZHRoKWZpbHRlckFyZWEud2lkdGggPSB0aGlzLndpZHRoO1xuXHRpZihmaWx0ZXJBcmVhLnkgPCAwKWZpbHRlckFyZWEueSA9IDA7XHRcblx0aWYoZmlsdGVyQXJlYS5oZWlnaHQgPiB0aGlzLmhlaWdodClmaWx0ZXJBcmVhLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXG5cblx0Ly9nbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsICBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGV4dHVyZS5mcmFtZUJ1ZmZlcik7XG4gICBcbiAgLy8gY29uc29sZS5sb2coZmlsdGVyQXJlYSlcblx0Ly8gc2V0IHZpZXcgcG9ydFxuXHRnbC52aWV3cG9ydCgwLCAwLCBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XHRcblx0XG5cdFBJWEkucHJvamVjdGlvbi54ID0gZmlsdGVyQXJlYS53aWR0aC8yO1xuXHRQSVhJLnByb2plY3Rpb24ueSA9IC1maWx0ZXJBcmVhLmhlaWdodC8yO1xuXHRcblx0UElYSS5vZmZzZXQueCA9IC1maWx0ZXJBcmVhLng7IFxuXHRQSVhJLm9mZnNldC55ID0gLWZpbHRlckFyZWEueTtcblxuXHQvL2NvbnNvbGUubG9nKFBJWEkuZGVmYXVsdFNoYWRlci5wcm9qZWN0aW9uVmVjdG9yKVxuXHQvLyB1cGRhdGUgcHJvamVjdGlvblxuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIGZpbHRlckFyZWEud2lkdGgvMiwgLWZpbHRlckFyZWEuaGVpZ2h0LzIpO1xuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLm9mZnNldFZlY3RvciwgLWZpbHRlckFyZWEueCwgLWZpbHRlckFyZWEueSk7XG5cdC8vUElYSS5wcmltaXRpdmVQcm9ncmFtXG5cblx0Z2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpOyBcblx0Z2wuY2xlYXJDb2xvcigwLDAsMCwgMCk7ICAgICBcblx0Z2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG5cdFxuXHQvL2ZpbHRlci50ZXh0dXJlID0gdGV4dHVyZTtcblx0ZmlsdGVyQmxvY2suX2dsRmlsdGVyVGV4dHVyZSA9IHRleHR1cmU7XG5cblx0Ly9jb25zb2xlLmxvZyhcIlBVU0hcIilcbn1cblxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlci5wcm90b3R5cGUucG9wRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRcblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdHZhciBmaWx0ZXJCbG9jayA9IHRoaXMuZmlsdGVyU3RhY2sucG9wKCk7XG5cblxuXG5cdHZhciBmaWx0ZXJBcmVhID0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cblx0dmFyIHRleHR1cmUgPSBmaWx0ZXJCbG9jay5fZ2xGaWx0ZXJUZXh0dXJlO1xuXG5cdGlmKGZpbHRlckJsb2NrLmZpbHRlclBhc3Nlcy5sZW5ndGggPiAxKVxuXHR7XG5cdFx0Z2wudmlld3BvcnQoMCwgMCwgZmlsdGVyQXJlYS53aWR0aCwgZmlsdGVyQXJlYS5oZWlnaHQpO1xuXG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcblx0XG5cdFx0dGhpcy52ZXJ0ZXhBcnJheVswXSA9IDA7XG5cdFx0dGhpcy52ZXJ0ZXhBcnJheVsxXSA9IGZpbHRlckFyZWEuaGVpZ2h0O1xuXHRcdFxuXHRcdHRoaXMudmVydGV4QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoO1xuXHRcdHRoaXMudmVydGV4QXJyYXlbM10gPSBmaWx0ZXJBcmVhLmhlaWdodDtcblx0XHRcblx0XHR0aGlzLnZlcnRleEFycmF5WzRdID0gMDtcblx0XHR0aGlzLnZlcnRleEFycmF5WzVdID0gMDtcblx0XHRcblx0XHR0aGlzLnZlcnRleEFycmF5WzZdID0gZmlsdGVyQXJlYS53aWR0aDtcblx0XHR0aGlzLnZlcnRleEFycmF5WzddID0gMDtcblxuXG5cdFx0Z2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHRoaXMudmVydGV4QXJyYXkpO1xuXG5cdFxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcblx0XHQvLyBubm93IHNldCB0aGUgdXZzLi5cblx0XHR0aGlzLnV2QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdFx0dGhpcy51dkFycmF5WzVdID0gZmlsdGVyQXJlYS5oZWlnaHQvdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy51dkFycmF5WzZdID0gZmlsdGVyQXJlYS53aWR0aC90aGlzLndpZHRoO1xuXHRcdHRoaXMudXZBcnJheVs3XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHRcdFxuXHRcdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnV2QXJyYXkpO1xuXG5cdFx0dmFyIGlucHV0VGV4dHVyZSA9IHRleHR1cmU7XG5cdFx0dmFyIG91dHB1dFRleHR1cmUgPSB0aGlzLnRleHR1cmVQb29sLnBvcCgpO1xuXHRcdGlmKCFvdXRwdXRUZXh0dXJlKW91dHB1dFRleHR1cmUgPSBuZXcgUElYSS5GaWx0ZXJUZXh0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XHRcblx0XHQvLyBuZWVkIHRvIGNsZWFyIHRoaXMgRkJPIGFzIGl0IG1heSBoYXZlIHNvbWUgbGVmdCBvdmVyIGVsZW1lbnRzIGZyb20gYSBwcnZpb3VzIGZpbHRlci5cblx0XHRnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG91dHB1dFRleHR1cmUuZnJhbWVCdWZmZXIgKTsgICAgIFxuXHRcdGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXHQgXG5cdFx0Z2wuZGlzYWJsZShnbC5CTEVORCk7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXMubGVuZ3RoLTE7IGkrKykgXG5cdFx0e1xuXHRcdFx0dmFyIGZpbHRlclBhc3MgPSBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXNbaV07XG5cdFxuXHRcdFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBvdXRwdXRUZXh0dXJlLmZyYW1lQnVmZmVyICk7XG5cdFx0XHRcblx0XHRcdC8vIHNldCB0ZXh0dXJlXG5cdFx0ICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuXHRcdFx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgaW5wdXRUZXh0dXJlLnRleHR1cmUpO1xuXHRcdFx0XG5cdFx0XHQvLyBkcmF3IHRleHR1cmUuLlxuXHRcdFx0Ly9maWx0ZXJQYXNzLmFwcGx5RmlsdGVyUGFzcyhmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XG5cdFx0XHR0aGlzLmFwcGx5RmlsdGVyUGFzcyhmaWx0ZXJQYXNzLCBmaWx0ZXJBcmVhLCBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XG5cblx0XHRcdC8vIHN3YXAgdGhlIHRleHR1cmVzLi5cblx0XHRcdHZhciB0ZW1wID0gaW5wdXRUZXh0dXJlO1xuXHRcdFx0aW5wdXRUZXh0dXJlID0gb3V0cHV0VGV4dHVyZTtcblx0XHRcdG91dHB1dFRleHR1cmUgPSB0ZW1wO1xuXHRcdFx0XG5cdFx0fTtcblxuXHRcdGdsLmVuYWJsZShnbC5CTEVORCk7XG5cblx0XHR0ZXh0dXJlID0gaW5wdXRUZXh0dXJlO1xuXHRcdHRoaXMudGV4dHVyZVBvb2wucHVzaChvdXRwdXRUZXh0dXJlKTtcblx0fVxuXG5cdHZhciBmaWx0ZXIgPSBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXNbZmlsdGVyQmxvY2suZmlsdGVyUGFzc2VzLmxlbmd0aC0xXTtcblx0XG5cdHRoaXMub2Zmc2V0WCAtPSBmaWx0ZXJBcmVhLng7XG5cdHRoaXMub2Zmc2V0WSAtPSBmaWx0ZXJBcmVhLnk7XG5cblx0XG5cdHZhciBzaXplWCA9IHRoaXMud2lkdGg7XG5cdHZhciBzaXplWSA9IHRoaXMuaGVpZ2h0O1xuXHRcblx0dmFyIG9mZnNldFggPSAwO1xuXHR2YXIgb2Zmc2V0WSA9IDA7XG5cdFxuXHR2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdFxuXHQvLyB0aW1lIHRvIHJlbmRlciB0aGUgZmlsdGVycyB0ZXh0dXJlIHRvIHRoZSBwcmV2aW91cyBzY2VuZVxuXHRpZih0aGlzLmZpbHRlclN0YWNrLmxlbmd0aCA9PT0gMClcblx0e1xuXHRcdGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0aGlzLnRyYW5zcGFyZW50KTsgXG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dmFyIGN1cnJlbnRGaWx0ZXIgPSB0aGlzLmZpbHRlclN0YWNrW3RoaXMuZmlsdGVyU3RhY2subGVuZ3RoLTFdO1xuXHRcdHZhciBmaWx0ZXJBcmVhID0gY3VycmVudEZpbHRlci50YXJnZXQuZmlsdGVyQXJlYTtcblx0XHRcblx0XHRzaXplWCA9IGZpbHRlckFyZWEud2lkdGg7XG5cdFx0c2l6ZVkgPSBmaWx0ZXJBcmVhLmhlaWdodDtcblx0XHRcblx0XHRvZmZzZXRYID0gZmlsdGVyQXJlYS54O1xuXHRcdG9mZnNldFkgPSBmaWx0ZXJBcmVhLnk7XG5cdFx0XG5cdFx0YnVmZmVyID0gIGN1cnJlbnRGaWx0ZXIuX2dsRmlsdGVyVGV4dHVyZS5mcmFtZUJ1ZmZlcjtcblx0fVxuXHRcblx0XG5cblx0Ly8gVE9ETyBuZWVkIHRvcmVtb3ZlIHRoZWFzZSBnbG9iYWwgZWxlbWVudHMuLlxuXHRQSVhJLnByb2plY3Rpb24ueCA9IHNpemVYLzI7XG5cdFBJWEkucHJvamVjdGlvbi55ID0gLXNpemVZLzI7XG5cblx0UElYSS5vZmZzZXQueCA9IG9mZnNldFg7XG5cdFBJWEkub2Zmc2V0LnkgPSBvZmZzZXRZOyBcblx0XG5cblx0dmFyIGZpbHRlckFyZWEgPSAgZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cdHZhciB4ID0gZmlsdGVyQXJlYS54LW9mZnNldFg7XG5cdHZhciB5ID0gZmlsdGVyQXJlYS55LW9mZnNldFk7XG5cdFxuXHQvLyB1cGRhdGUgdGhlIGJ1ZmZlcnMuLlx0XG5cdC8vIG1ha2Ugc3VyZSB0byBmbGlwIHRoZSB5IVxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHRcblx0dGhpcy52ZXJ0ZXhBcnJheVswXSA9IHg7XG5cdHRoaXMudmVydGV4QXJyYXlbMV0gPSB5ICsgZmlsdGVyQXJlYS5oZWlnaHQ7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzJdID0geCArIGZpbHRlckFyZWEud2lkdGg7XG5cdHRoaXMudmVydGV4QXJyYXlbM10gPSB5ICsgZmlsdGVyQXJlYS5oZWlnaHQ7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzRdID0geDtcblx0dGhpcy52ZXJ0ZXhBcnJheVs1XSA9IHk7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzZdID0geCArIGZpbHRlckFyZWEud2lkdGg7XG5cdHRoaXMudmVydGV4QXJyYXlbN10gPSB5O1xuXG5cdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRleEFycmF5KTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcblxuXHR0aGlzLnV2QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdHRoaXMudXZBcnJheVs1XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHR0aGlzLnV2QXJyYXlbNl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdHRoaXMudXZBcnJheVs3XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHRcblx0Z2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHRoaXMudXZBcnJheSk7XG5cblx0Z2wudmlld3BvcnQoMCwgMCwgc2l6ZVgsIHNpemVZKTtcdFxuXHQvLyBiaW5kIHRoZSBidWZmZXJcblx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBidWZmZXIgKTtcblx0XG5cdC8vIHNldCB0ZXh0dXJlXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG5cdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUudGV4dHVyZSk7XG5cdFxuXHQvLyBhcHBseSFcblx0Ly9maWx0ZXIuYXBwbHlGaWx0ZXJQYXNzKHNpemVYLCBzaXplWSk7XG5cdHRoaXMuYXBwbHlGaWx0ZXJQYXNzKGZpbHRlciwgZmlsdGVyQXJlYSwgc2l6ZVgsIHNpemVZKTtcblxuXHQvLyBub3cgcmVzdG9yZSB0aGUgcmVndWxhciBzaGFkZXIuLlxuICAgIGdsLnVzZVByb2dyYW0oUElYSS5kZWZhdWx0U2hhZGVyLnByb2dyYW0pO1xuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIHNpemVYLzIsIC1zaXplWS8yKTtcblx0Z2wudW5pZm9ybTJmKFBJWEkuZGVmYXVsdFNoYWRlci5vZmZzZXRWZWN0b3IsIC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG5cblx0Ly8gcmV0dXJuIHRoZSB0ZXh0dXJlIHRvIHRoZSBwb29sXG5cdHRoaXMudGV4dHVyZVBvb2wucHVzaCh0ZXh0dXJlKTtcblx0ZmlsdGVyQmxvY2suX2dsRmlsdGVyVGV4dHVyZSA9IG51bGw7XHRcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmFwcGx5RmlsdGVyUGFzcyA9IGZ1bmN0aW9uKGZpbHRlciwgZmlsdGVyQXJlYSwgd2lkdGgsIGhlaWdodClcbntcblx0Ly8gdXNlIHByb2dyYW1cblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHRpZighZmlsdGVyLnNoYWRlcilcblx0e1xuXHRcdHZhciBzaGFkZXIgPSBuZXcgUElYSS5QaXhpU2hhZGVyKCk7XG5cdFx0XHRcdFxuXHRcdHNoYWRlci5mcmFnbWVudFNyYyA9IGZpbHRlci5mcmFnbWVudFNyYztcblx0XHRzaGFkZXIudW5pZm9ybXMgPSBmaWx0ZXIudW5pZm9ybXM7XG5cdFx0c2hhZGVyLmluaXQoKTtcblx0XHRcblx0XHRmaWx0ZXIuc2hhZGVyID0gc2hhZGVyO1xuXHR9XG5cblx0dmFyIHNoYWRlciA9IGZpbHRlci5zaGFkZXI7XG5cdFxuXHQvLyBzZXQgdGhlIHNoYWRlclxuXHRnbC51c2VQcm9ncmFtKHNoYWRlci5wcm9ncmFtKTtcblxuXHRnbC51bmlmb3JtMmYoc2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIHdpZHRoLzIsIC1oZWlnaHQvMik7XG5cdGdsLnVuaWZvcm0yZihzaGFkZXIub2Zmc2V0VmVjdG9yLCAwLDApXG5cblx0aWYoZmlsdGVyLnVuaWZvcm1zLmRpbWVuc2lvbnMpXG5cdHtcblx0XHQvL2NvbnNvbGUubG9nKGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zKVxuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzBdID0gdGhpcy53aWR0aDsvL3dpZHRoO1xuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzFdID0gdGhpcy5oZWlnaHQ7Ly9oZWlnaHQ7XG5cdFx0ZmlsdGVyLnVuaWZvcm1zLmRpbWVuc2lvbnMudmFsdWVbMl0gPSB0aGlzLnZlcnRleEFycmF5WzBdO1xuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzNdID0gdGhpcy52ZXJ0ZXhBcnJheVs1XTsvL2ZpbHRlckFyZWEuaGVpZ2h0O1xuXHQvL1x0Y29uc29sZS5sb2codGhpcy52ZXJ0ZXhBcnJheVs1XSlcblx0fVxuXG5cdHNoYWRlci5zeW5jVW5pZm9ybXMoKTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgXG4gICBcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5hVGV4dHVyZUNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcbiAgICBcblx0Ly8gZHJhdyB0aGUgZmlsdGVyLi4uXG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfU0hPUlQsIDAgKTtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmluaXRTaGFkZXJCdWZmZXJzID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcblx0Ly8gY3JlYXRlIHNvbWUgYnVmZmVyc1xuXHR0aGlzLnZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1x0XG5cdHRoaXMudXZCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5pbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcblx0Ly8gYmluZCBhbmQgdXBsb2FkIHRoZSB2ZXJ0ZXhzLi5cblx0Ly8ga2VlcCBhIHJlZmZlcmFuY2UgdG8gdGhlIHZlcnRleEZsb2F0RGF0YS4uXG5cdHRoaXMudmVydGV4QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAgICAgMS4wLCAwLjAsIFxuXHRcdFx0XHRcdFx0XHRcdCAgICAgICAgIDAuMCwgMS4wLCBcblx0XHRcdFx0XHRcdFx0XHQgICAgICAgICAxLjAsIDEuMF0pO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShcbiAgICBnbC5BUlJBWV9CVUZGRVIsIFxuICAgIHRoaXMudmVydGV4QXJyYXksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcbiAgICBcbiAgICAvLyBiaW5kIGFuZCB1cGxvYWQgdGhlIHV2IGJ1ZmZlclxuXHR0aGlzLnV2QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAxLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAwLjAsIDEuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAxLjAsIDEuMF0pO1xuXHRcdFx0XHRcdFx0XHRcdCAgICAgICAgIFxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy51dkJ1ZmZlcik7XG5cdGdsLmJ1ZmZlckRhdGEoXG4gICAgZ2wuQVJSQVlfQlVGRkVSLCBcbiAgICB0aGlzLnV2QXJyYXksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcblx0Ly8gYmluZCBhbmQgdXBsb2FkIHRoZSBpbmRleFxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShcbiAgICBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgXG4gICAgbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAxLCAzLCAyXSksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIHRpbWUgdG8gZ2V0IHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBvYmplY3QhXG5cdHZhciB3b3JsZFRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCwgYVgsIGFZLCB3MCwgdzEsIGgwLCBoMSwgaW5kZXgsIGRvVGVzdDtcblx0dmFyIGEsIGIsIGMsIGQsIHR4LCB0eSwgeDEsIHgyLCB4MywgeDQsIHkxLCB5MiwgeTMsIHk0O1xuXG5cdHZhciB0ZW1wT2JqZWN0ID0gZGlzcGxheU9iamVjdC5maXJzdDtcblx0dmFyIHRlc3RPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3QuX2lOZXh0O1xuXHRcblx0dmFyIG1heFggPSAtSW5maW5pdHk7XG5cdHZhciBtYXhZID0gLUluZmluaXR5O1xuXHRcblx0dmFyIG1pblggPSBJbmZpbml0eTtcblx0dmFyIG1pblkgPSBJbmZpbml0eTtcblx0XG5cdGRvXHRcblx0e1xuXHRcdC8vIFRPRE8gY2FuIGJlIG9wdGltaXplZCEgLSB3aGF0IGlmIHRoZXJlIGlzIG5vIHNjYWxlIC8gcm90YXRpb24/XG5cdFx0XG5cdFx0aWYodGVtcE9iamVjdC52aXNpYmxlKVxuXHRcdHtcblx0XHRcdGlmKHRlbXBPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHRcdHtcblx0XHRcdFx0d2lkdGggPSB0ZW1wT2JqZWN0LnRleHR1cmUuZnJhbWUud2lkdGg7XG5cdFx0XHRcdGhlaWdodCA9IHRlbXBPYmplY3QudGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG5cblx0XHRcdFx0Ly8gVE9ETyB0cmltPz9cblx0XHRcdFx0YVggPSB0ZW1wT2JqZWN0LmFuY2hvci54O1xuXHRcdFx0XHRhWSA9IHRlbXBPYmplY3QuYW5jaG9yLnk7XG5cdFx0XHRcdHcwID0gd2lkdGggKiAoMS1hWCk7XG5cdFx0XHRcdHcxID0gd2lkdGggKiAtYVg7XG5cblx0XHRcdFx0aDAgPSBoZWlnaHQgKiAoMS1hWSk7XG5cdFx0XHRcdGgxID0gaGVpZ2h0ICogLWFZO1xuXG5cdFx0XHRcdGRvVGVzdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHRlbXBPYmplY3QgaW5zdGFuY2VvZiBQSVhJLkdyYXBoaWNzKVxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wT2JqZWN0LnVwZGF0ZUZpbHRlckJvdW5kcygpO1xuXG5cdFx0XHRcdHZhciBib3VuZHMgPSB0ZW1wT2JqZWN0LmJvdW5kcztcblxuXHRcdFx0XHR3aWR0aCA9IGJvdW5kcy53aWR0aDtcblx0XHRcdFx0aGVpZ2h0ID0gYm91bmRzLmhlaWdodDtcblxuXHRcdFx0XHR3MCA9IGJvdW5kcy54XG5cdFx0XHRcdHcxID0gYm91bmRzLnggKyBib3VuZHMud2lkdGg7XG5cblx0XHRcdFx0aDAgPSBib3VuZHMueVxuXHRcdFx0XHRoMSA9IGJvdW5kcy55ICsgYm91bmRzLmhlaWdodDtcblxuXHRcdFx0XHRkb1Rlc3QgPSB0cnVlO1x0XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGlmKGRvVGVzdClcblx0XHR7XG5cdFx0XHR3b3JsZFRyYW5zZm9ybSA9IHRlbXBPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cblx0XHRcdGEgPSB3b3JsZFRyYW5zZm9ybVswXTtcblx0XHRcdGIgPSB3b3JsZFRyYW5zZm9ybVszXTtcblx0XHRcdGMgPSB3b3JsZFRyYW5zZm9ybVsxXTtcblx0XHRcdGQgPSB3b3JsZFRyYW5zZm9ybVs0XTtcblx0XHRcdHR4ID0gd29ybGRUcmFuc2Zvcm1bMl07XG5cdFx0XHR0eSA9IHdvcmxkVHJhbnNmb3JtWzVdO1xuXG5cdFx0XHR4MSA9IGEgKiB3MSArIGMgKiBoMSArIHR4OyBcblx0XHRcdHkxID0gZCAqIGgxICsgYiAqIHcxICsgdHk7XG5cblx0XHRcdHgyID0gYSAqIHcwICsgYyAqIGgxICsgdHg7IFxuXHRcdFx0eTIgPSBkICogaDEgKyBiICogdzAgKyB0eTsgXG5cblx0XHRcdHgzID0gYSAqIHcwICsgYyAqIGgwICsgdHg7IFxuXHRcdFx0eTMgPSBkICogaDAgKyBiICogdzAgKyB0eTsgXG5cblx0XHRcdHg0ID0gIGEgKiB3MSArIGMgKiBoMCArIHR4OyBcblx0XHRcdHk0ID0gIGQgKiBoMCArIGIgKiB3MSArIHR5OyBcblxuXHRcdFx0bWluWCA9IHgxIDwgbWluWCA/IHgxIDogbWluWDtcblx0XHRcdG1pblggPSB4MiA8IG1pblggPyB4MiA6IG1pblg7XG5cdFx0XHRtaW5YID0geDMgPCBtaW5YID8geDMgOiBtaW5YO1xuXHRcdFx0bWluWCA9IHg0IDwgbWluWCA/IHg0IDogbWluWDtcblx0XHRcdFxuXHRcdFx0bWluWSA9IHkxIDwgbWluWSA/IHkxIDogbWluWTtcblx0XHRcdG1pblkgPSB5MiA8IG1pblkgPyB5MiA6IG1pblk7XG5cdFx0XHRtaW5ZID0geTMgPCBtaW5ZID8geTMgOiBtaW5ZO1xuXHRcdFx0bWluWSA9IHk0IDwgbWluWSA/IHk0IDogbWluWTtcblx0XHRcdFxuXHRcdFx0bWF4WCA9IHgxID4gbWF4WCA/IHgxIDogbWF4WDtcblx0XHRcdG1heFggPSB4MiA+IG1heFggPyB4MiA6IG1heFg7XG5cdFx0XHRtYXhYID0geDMgPiBtYXhYID8geDMgOiBtYXhYO1xuXHRcdFx0bWF4WCA9IHg0ID4gbWF4WCA/IHg0IDogbWF4WDtcblx0XHRcdFxuXHRcdFx0bWF4WSA9IHkxID4gbWF4WSA/IHkxIDogbWF4WTtcblx0XHRcdG1heFkgPSB5MiA+IG1heFkgPyB5MiA6IG1heFk7XG5cdFx0XHRtYXhZID0geTMgPiBtYXhZID8geTMgOiBtYXhZO1xuXHRcdFx0bWF4WSA9IHk0ID4gbWF4WSA/IHk0IDogbWF4WTtcblx0XHR9XG5cblx0XHRkb1Rlc3QgPSBmYWxzZTtcblx0XHR0ZW1wT2JqZWN0ID0gdGVtcE9iamVjdC5faU5leHQ7XG5cblx0fVxuXHR3aGlsZSh0ZW1wT2JqZWN0ICE9IHRlc3RPYmplY3QpXG5cdFxuXHQvLyBtYXhpbXVtIGJvdW5kcyBpcyB0aGUgc2l6ZSBvZiB0aGUgc2NyZWVuLi5cblx0Ly9taW5YID0gbWluWCA+IDAgPyBtaW5YIDogMDtcblx0Ly9taW5ZID0gbWluWSA+IDAgPyBtaW5ZIDogMDtcblxuXHRkaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEueCA9IG1pblg7XG5cdGRpc3BsYXlPYmplY3QuZmlsdGVyQXJlYS55ID0gbWluWTtcblxuLy9cdGNvbnNvbGUubG9nKG1heFgrIFwiIDogXCIgKyBtaW5YKVxuXHRkaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEud2lkdGggPSBtYXhYIC0gbWluWDtcblx0ZGlzcGxheU9iamVjdC5maWx0ZXJBcmVhLmhlaWdodCA9IG1heFkgLSBtaW5ZO1xufVxuXG5QSVhJLkZpbHRlclRleHR1cmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICAvLyBuZXh0IHRpbWUgdG8gY3JlYXRlIGEgZnJhbWUgYnVmZmVyIGFuZCB0ZXh0dXJlXG5cdHRoaXMuZnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIHRoaXMudGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsICB0aGlzLnRleHR1cmUpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuXHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcblx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXHRnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRoaXMuZnJhbWVidWZmZXIgKTtcblx0XG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5mcmFtZUJ1ZmZlciApO1xuXHRnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZSwgMCk7XG5cdFxuXHR0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbn1cblxuUElYSS5GaWx0ZXJUZXh0dXJlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cblx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgIHRoaXMudGV4dHVyZSk7XG5cdGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgIHdpZHRoLCBoZWlnaHQsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuXHRcbn1cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIHRoZSBDYW52YXNSZW5kZXJlciBkcmF3cyB0aGUgc3RhZ2UgYW5kIGFsbCBpdHMgY29udGVudCBvbnRvIGEgMmQgY2FudmFzLiBUaGlzIHJlbmRlcmVyIHNob3VsZCBiZSB1c2VkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHdlYkdMLlxuICogRG9udCBmb3JnZXQgdG8gYWRkIHRoZSB2aWV3IHRvIHlvdXIgRE9NIG9yIHlvdSB3aWxsIG5vdCBzZWUgYW55dGhpbmcgOilcbiAqXG4gKiBAY2xhc3MgQ2FudmFzUmVuZGVyZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHdpZHRoPTAge051bWJlcn0gdGhlIHdpZHRoIG9mIHRoZSBjYW52YXMgdmlld1xuICogQHBhcmFtIGhlaWdodD0wIHtOdW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIGNhbnZhcyB2aWV3XG4gKiBAcGFyYW0gdmlldyB7Q2FudmFzfSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0gdHJhbnNwYXJlbnQ9ZmFsc2Uge0Jvb2xlYW59IHRoZSB0cmFuc3BhcmVuY3kgb2YgdGhlIHJlbmRlciB2aWV3LCBkZWZhdWx0IGZhbHNlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudClcbntcblx0dGhpcy50cmFuc3BhcmVudCA9IHRyYW5zcGFyZW50O1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIGNhbnZhcyB2aWV3XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB3aWR0aFxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgODAwXG5cdCAqL1xuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgODAwO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgdmlld1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgaGVpZ2h0XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCA2MDBcblx0ICovXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDYwMDtcblxuXHQvKipcblx0ICogVGhlIGNhbnZhcyBlbGVtZW50IHRoYXQgdGhlIGV2ZXJ5dGhpbmcgaXMgZHJhd24gdG9cblx0ICpcblx0ICogQHByb3BlcnR5IHZpZXdcblx0ICogQHR5cGUgQ2FudmFzXG5cdCAqL1xuXHR0aGlzLnZpZXcgPSB2aWV3IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XG5cblx0LyoqXG5cdCAqIFRoZSBjYW52YXMgY29udGV4dCB0aGF0IHRoZSBldmVyeXRoaW5nIGlzIGRyYXduIHRvXG5cdCAqIEBwcm9wZXJ0eSBjb250ZXh0XG5cdCAqIEB0eXBlIENhbnZhcyAyZCBDb250ZXh0XG5cdCAqL1xuXHR0aGlzLmNvbnRleHQgPSB0aGlzLnZpZXcuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG5cdHRoaXMucmVmcmVzaCA9IHRydWU7XG5cdC8vIGhhY2sgdG8gZW5hYmxlIHNvbWUgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIVxuXHQvL3RoaXMudmlldy5zdHlsZVtcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRleigwKVwiO1xuXHRcbiAgICB0aGlzLnZpZXcud2lkdGggPSB0aGlzLndpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7ICBcblx0dGhpcy5jb3VudCA9IDA7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ2FudmFzUmVuZGVyZXI7XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIGNhbnZhcyB2aWV3XG4gKlxuICogQG1ldGhvZCByZW5kZXJcbiAqIEBwYXJhbSBzdGFnZSB7U3RhZ2V9IHRoZSBTdGFnZSBlbGVtZW50IHRvIGJlIHJlbmRlcmVkXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKHN0YWdlKVxue1xuXHRcblx0Ly9zdGFnZS5fX2NoaWxkcmVuQWRkZWQgPSBbXTtcblx0Ly9zdGFnZS5fX2NoaWxkcmVuUmVtb3ZlZCA9IFtdO1xuXHRcblx0Ly8gdXBkYXRlIHRleHR1cmVzIGlmIG5lZWQgYmVcblx0UElYSS50ZXh0dXJlc1RvVXBkYXRlID0gW107XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcblx0XG5cdFBJWEkudmlzaWJsZUNvdW50Kys7XG5cdHN0YWdlLnVwZGF0ZVRyYW5zZm9ybSgpO1xuXHRcblx0Ly8gdXBkYXRlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yXG5cdGlmKHRoaXMudmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IhPXN0YWdlLmJhY2tncm91bmRDb2xvclN0cmluZyAmJiAhdGhpcy50cmFuc3BhcmVudCl0aGlzLnZpZXcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc3RhZ2UuYmFja2dyb3VuZENvbG9yU3RyaW5nO1xuXG5cdHRoaXMuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOyBcblx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcbiAgICB0aGlzLnJlbmRlckRpc3BsYXlPYmplY3Qoc3RhZ2UpO1xuICAgIC8vYXNcbiAgIFxuICAgIC8vIHJ1biBpbnRlcmFjdGlvbiFcblx0aWYoc3RhZ2UuaW50ZXJhY3RpdmUpXG5cdHtcblx0XHQvL25lZWQgdG8gYWRkIHNvbWUgZXZlbnRzIVxuXHRcdGlmKCFzdGFnZS5faW50ZXJhY3RpdmVFdmVudHNBZGRlZClcblx0XHR7XG5cdFx0XHRzdGFnZS5faW50ZXJhY3RpdmVFdmVudHNBZGRlZCA9IHRydWU7XG5cdFx0XHRzdGFnZS5pbnRlcmFjdGlvbk1hbmFnZXIuc2V0VGFyZ2V0KHRoaXMpO1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gcmVtb3ZlIGZyYW1lIHVwZGF0ZXMuLlxuXHRpZihQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzLmxlbmd0aCA+IDApXG5cdHtcblx0XHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzID0gW107XG5cdH1cblx0XG5cdFxufVxuXG4vKipcbiAqIHJlc2l6ZXMgdGhlIGNhbnZhcyB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgd2lkdGggYW5kIGhlaWdodFxuICpcbiAqIEBtZXRob2QgcmVzaXplXG4gKiBAcGFyYW0gd2lkdGgge051bWJlcn0gdGhlIG5ldyB3aWR0aCBvZiB0aGUgY2FudmFzIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhcyB2aWV3XG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpXG57XG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHR0aGlzLnZpZXcud2lkdGggPSB3aWR0aDtcblx0dGhpcy52aWV3LmhlaWdodCA9IGhlaWdodDtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgZGlzcGxheSBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHJlbmRlckRpc3BsYXlPYmplY3RcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fSBUaGUgZGlzcGxheU9iamVjdCB0byByZW5kZXJcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckRpc3BsYXlPYmplY3QgPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHQvLyBubyBsb2dlciByZWN1cnJzaXZlIVxuXHR2YXIgdHJhbnNmb3JtO1xuXHR2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcblx0XG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblx0XG5cdC8vIG9uZSB0aGUgZGlzcGxheSBvYmplY3QgaGl0cyB0aGlzLiB3ZSBjYW4gYnJlYWsgdGhlIGxvb3BcdFxuXHR2YXIgdGVzdE9iamVjdCA9IGRpc3BsYXlPYmplY3QubGFzdC5faU5leHQ7XG5cdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHRcblx0ZG9cdFxuXHR7XG5cdFx0dHJhbnNmb3JtID0gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybTtcblx0XHRcblx0XHRpZighZGlzcGxheU9iamVjdC52aXNpYmxlKVxuXHRcdHtcblx0XHRcdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3QuX2lOZXh0O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKCFkaXNwbGF5T2JqZWN0LnJlbmRlcmFibGUpXG5cdFx0e1xuXHRcdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX2lOZXh0O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0dmFyIGZyYW1lID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lO1xuXHRcdFx0XG5cdFx0XHRpZihmcmFtZSAmJiBmcmFtZS53aWR0aCAmJiBmcmFtZS5oZWlnaHQpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkaXNwbGF5T2JqZWN0LndvcmxkQWxwaGE7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZXh0LnNldFRyYW5zZm9ybSh0cmFuc2Zvcm1bMF0sIHRyYW5zZm9ybVszXSwgdHJhbnNmb3JtWzFdLCB0cmFuc2Zvcm1bNF0sIHRyYW5zZm9ybVsyXSwgdHJhbnNmb3JtWzVdKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0Y29udGV4dC5kcmF3SW1hZ2UoZGlzcGxheU9iamVjdC50ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUueCxcblx0XHRcdFx0XHRcdFx0XHQgICBmcmFtZS55LFxuXHRcdFx0XHRcdFx0XHRcdCAgIGZyYW1lLndpZHRoLFxuXHRcdFx0XHRcdFx0XHRcdCAgIGZyYW1lLmhlaWdodCxcblx0XHRcdFx0XHRcdFx0XHQgICAoZGlzcGxheU9iamVjdC5hbmNob3IueCkgKiAtZnJhbWUud2lkdGgsIFxuXHRcdFx0XHRcdFx0XHRcdCAgIChkaXNwbGF5T2JqZWN0LmFuY2hvci55KSAqIC1mcmFtZS5oZWlnaHQsXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUud2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUuaGVpZ2h0KTtcblx0XHRcdH1cdFx0XHRcdFx0ICAgXG5cdCAgIFx0fVxuXHQgICBcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuU3RyaXApXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtWzBdLCB0cmFuc2Zvcm1bM10sIHRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzRdLCB0cmFuc2Zvcm1bMl0sIHRyYW5zZm9ybVs1XSlcblx0XHRcdHRoaXMucmVuZGVyU3RyaXAoZGlzcGxheU9iamVjdCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybVswXSwgdHJhbnNmb3JtWzNdLCB0cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVs0XSwgdHJhbnNmb3JtWzJdLCB0cmFuc2Zvcm1bNV0pXG5cdFx0XHR0aGlzLnJlbmRlclRpbGluZ1Nwcml0ZShkaXNwbGF5T2JqZWN0KTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0IGluc3RhbmNlb2YgUElYSS5DdXN0b21SZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybVswXSwgdHJhbnNmb3JtWzNdLCB0cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVs0XSwgdHJhbnNmb3JtWzJdLCB0cmFuc2Zvcm1bNV0pO1xuXHRcdFx0ZGlzcGxheU9iamVjdC5yZW5kZXJDYW52YXModGhpcyk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuR3JhcGhpY3MpXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtWzBdLCB0cmFuc2Zvcm1bM10sIHRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzRdLCB0cmFuc2Zvcm1bMl0sIHRyYW5zZm9ybVs1XSlcblx0XHRcdFBJWEkuQ2FudmFzR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MoZGlzcGxheU9iamVjdCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuRmlsdGVyQmxvY2spXG5cdFx0e1xuXHRcdFx0aWYoZGlzcGxheU9iamVjdC5kYXRhIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcbiBcdFx0XHR7XG5cdFx0XHRcdHZhciBtYXNrID0gZGlzcGxheU9iamVjdC5kYXRhO1xuXG5cdFx0XHRcdGlmKGRpc3BsYXlPYmplY3Qub3Blbilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHZhciBjYWNoZUFscGhhID0gbWFzay5hbHBoYTtcblx0XHRcdFx0XHR2YXIgbWFza1RyYW5zZm9ybSA9IG1hc2sud29ybGRUcmFuc2Zvcm07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0obWFza1RyYW5zZm9ybVswXSwgbWFza1RyYW5zZm9ybVszXSwgbWFza1RyYW5zZm9ybVsxXSwgbWFza1RyYW5zZm9ybVs0XSwgbWFza1RyYW5zZm9ybVsyXSwgbWFza1RyYW5zZm9ybVs1XSlcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRtYXNrLndvcmxkQWxwaGEgPSAwLjU7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGV4dC53b3JsZEFscGhhID0gMDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRQSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzTWFzayhtYXNrLCBjb250ZXh0KTtcblx0XHRcdFx0XHRjb250ZXh0LmNsaXAoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRtYXNrLndvcmxkQWxwaGEgPSBjYWNoZUFscGhhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRleHQucmVzdG9yZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIG9ubHkgbWFza3Mgc3VwcG9ydGVkIHJpZ2h0IG5vdyFcblx0XHRcdH1cblx0XHR9XG5cdC8vXHRjb3VudCsrXG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX2lOZXh0O1xuXHRcdFxuXHRcdFxuXHR9XG5cdHdoaWxlKGRpc3BsYXlPYmplY3QgIT0gdGVzdE9iamVjdClcblxuXHRcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgZmxhdCBzdHJpcFxuICpcbiAqIEBtZXRob2QgcmVuZGVyU3RyaXBGbGF0XG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgU3RyaXAgdG8gcmVuZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdHJpcEZsYXQgPSBmdW5jdGlvbihzdHJpcClcbntcblx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdHZhciB2ZXJ0aWNpZXMgPSBzdHJpcC52ZXJ0aWNpZXM7XG5cdHZhciB1dnMgPSBzdHJpcC51dnM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdmVydGljaWVzLmxlbmd0aC8yO1xuXHR0aGlzLmNvdW50Kys7XG5cdFxuXHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRmb3IgKHZhciBpPTE7IGkgPCBsZW5ndGgtMjsgaSsrKSBcblx0e1xuXHRcdFxuXHRcdC8vIGRyYXcgc29tZSB0cmlhbmdsZXMhXG5cdFx0dmFyIGluZGV4ID0gaSoyO1xuXHRcdFxuXHRcdCB2YXIgeDAgPSB2ZXJ0aWNpZXNbaW5kZXhdLCAgIHgxID0gdmVydGljaWVzW2luZGV4KzJdLCB4MiA9IHZlcnRpY2llc1tpbmRleCs0XTtcbiBcdFx0IHZhciB5MCA9IHZlcnRpY2llc1tpbmRleCsxXSwgeTEgPSB2ZXJ0aWNpZXNbaW5kZXgrM10sIHkyID0gdmVydGljaWVzW2luZGV4KzVdO1xuIFx0XHQgXG5cdFx0Y29udGV4dC5tb3ZlVG8oeDAsIHkwKTtcblx0XHRjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xuXHRcdGNvbnRleHQubGluZVRvKHgyLCB5Mik7XG5cdFx0XG5cdH07XHRcblx0XG5cdGNvbnRleHQuZmlsbFN0eWxlID0gXCIjRkYwMDAwXCI7XG5cdGNvbnRleHQuZmlsbCgpO1xuXHRjb250ZXh0LmNsb3NlUGF0aCgpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSB0aWxpbmcgc3ByaXRlXG4gKlxuICogQG1ldGhvZCByZW5kZXJUaWxpbmdTcHJpdGVcbiAqIEBwYXJhbSBzcHJpdGUge1RpbGluZ1Nwcml0ZX0gVGhlIHRpbGluZ3Nwcml0ZSB0byByZW5kZXJcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdFxuXHRjb250ZXh0Lmdsb2JhbEFscGhhID0gc3ByaXRlLndvcmxkQWxwaGE7XG5cdFxuIFx0aWYoIXNwcml0ZS5fX3RpbGVQYXR0ZXJuKSBzcHJpdGUuX190aWxlUGF0dGVybiA9IGNvbnRleHQuY3JlYXRlUGF0dGVybihzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsIFwicmVwZWF0XCIpO1xuIFx0XG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFxuXHR2YXIgdGlsZVBvc2l0aW9uID0gc3ByaXRlLnRpbGVQb3NpdGlvbjtcblx0dmFyIHRpbGVTY2FsZSA9IHNwcml0ZS50aWxlU2NhbGU7XG5cdFxuICAgIC8vIG9mZnNldFxuICAgIGNvbnRleHQuc2NhbGUodGlsZVNjYWxlLngsdGlsZVNjYWxlLnkpO1xuICAgIGNvbnRleHQudHJhbnNsYXRlKHRpbGVQb3NpdGlvbi54LCB0aWxlUG9zaXRpb24ueSk7XG4gXHRcblx0Y29udGV4dC5maWxsU3R5bGUgPSBzcHJpdGUuX190aWxlUGF0dGVybjtcblx0Y29udGV4dC5maWxsUmVjdCgtdGlsZVBvc2l0aW9uLngsLXRpbGVQb3NpdGlvbi55LHNwcml0ZS53aWR0aCAvIHRpbGVTY2FsZS54LCBzcHJpdGUuaGVpZ2h0IC8gdGlsZVNjYWxlLnkpO1xuXHRcblx0Y29udGV4dC5zY2FsZSgxL3RpbGVTY2FsZS54LCAxL3RpbGVTY2FsZS55KTtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSgtdGlsZVBvc2l0aW9uLngsIC10aWxlUG9zaXRpb24ueSk7XG4gICAgXG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3RyaXBcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclN0cmlwXG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgU3RyaXAgdG8gcmVuZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwKVxue1xuXHR2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcblxuXHQvLyBkcmF3IHRyaWFuZ2xlcyEhXG5cdHZhciB2ZXJ0aWNpZXMgPSBzdHJpcC52ZXJ0aWNpZXM7XG5cdHZhciB1dnMgPSBzdHJpcC51dnM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdmVydGljaWVzLmxlbmd0aC8yO1xuXHR0aGlzLmNvdW50Kys7XG5cdGZvciAodmFyIGk9MTsgaSA8IGxlbmd0aC0yOyBpKyspIFxuXHR7XG5cdFx0XG5cdFx0Ly8gZHJhdyBzb21lIHRyaWFuZ2xlcyFcblx0XHR2YXIgaW5kZXggPSBpKjI7XG5cdFx0XG5cdFx0IHZhciB4MCA9IHZlcnRpY2llc1tpbmRleF0sICAgeDEgPSB2ZXJ0aWNpZXNbaW5kZXgrMl0sIHgyID0gdmVydGljaWVzW2luZGV4KzRdO1xuIFx0XHQgdmFyIHkwID0gdmVydGljaWVzW2luZGV4KzFdLCB5MSA9IHZlcnRpY2llc1tpbmRleCszXSwgeTIgPSB2ZXJ0aWNpZXNbaW5kZXgrNV07XG4gXHRcdCBcbiAgXHRcdCB2YXIgdTAgPSB1dnNbaW5kZXhdICogc3RyaXAudGV4dHVyZS53aWR0aCwgICB1MSA9IHV2c1tpbmRleCsyXSAqIHN0cmlwLnRleHR1cmUud2lkdGgsIHUyID0gdXZzW2luZGV4KzRdKiBzdHJpcC50ZXh0dXJlLndpZHRoO1xuICAgXHRcdCB2YXIgdjAgPSB1dnNbaW5kZXgrMV0qIHN0cmlwLnRleHR1cmUuaGVpZ2h0LCB2MSA9IHV2c1tpbmRleCszXSAqIHN0cmlwLnRleHR1cmUuaGVpZ2h0LCB2MiA9IHV2c1tpbmRleCs1XSogc3RyaXAudGV4dHVyZS5oZWlnaHQ7XG5cblxuXHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0Y29udGV4dC5tb3ZlVG8oeDAsIHkwKTtcblx0XHRjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xuXHRcdGNvbnRleHQubGluZVRvKHgyLCB5Mik7XG5cdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHRcblx0XHRjb250ZXh0LmNsaXAoKTtcblx0XHRcblx0XHRcbiAgICAgICAgLy8gQ29tcHV0ZSBtYXRyaXggdHJhbnNmb3JtXG4gICAgICAgIHZhciBkZWx0YSA9IHUwKnYxICsgdjAqdTIgKyB1MSp2MiAtIHYxKnUyIC0gdjAqdTEgLSB1MCp2MjtcbiAgICAgICAgdmFyIGRlbHRhX2EgPSB4MCp2MSArIHYwKngyICsgeDEqdjIgLSB2MSp4MiAtIHYwKngxIC0geDAqdjI7XG4gICAgICAgIHZhciBkZWx0YV9iID0gdTAqeDEgKyB4MCp1MiArIHUxKngyIC0geDEqdTIgLSB4MCp1MSAtIHUwKngyO1xuICAgICAgICB2YXIgZGVsdGFfYyA9IHUwKnYxKngyICsgdjAqeDEqdTIgKyB4MCp1MSp2MiAtIHgwKnYxKnUyIC0gdjAqdTEqeDIgLSB1MCp4MSp2MjtcbiAgICAgICAgdmFyIGRlbHRhX2QgPSB5MCp2MSArIHYwKnkyICsgeTEqdjIgLSB2MSp5MiAtIHYwKnkxIC0geTAqdjI7XG4gICAgICAgIHZhciBkZWx0YV9lID0gdTAqeTEgKyB5MCp1MiArIHUxKnkyIC0geTEqdTIgLSB5MCp1MSAtIHUwKnkyO1xuICAgICAgICB2YXIgZGVsdGFfZiA9IHUwKnYxKnkyICsgdjAqeTEqdTIgKyB5MCp1MSp2MiAtIHkwKnYxKnUyIC0gdjAqdTEqeTIgLSB1MCp5MSp2Mjtcblx0XHRcblx0XHRcblx0XHRcblx0XHQgICAgXG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGRlbHRhX2EvZGVsdGEsIGRlbHRhX2QvZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgZGVsdGFfYi9kZWx0YSwgZGVsdGFfZS9kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YV9jL2RlbHRhLCBkZWx0YV9mL2RlbHRhKTtcbiAgICAgICAgICAgICAgICAgXG5cdFx0Y29udGV4dC5kcmF3SW1hZ2Uoc3RyaXAudGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsIDAsIDApO1xuXHQgIFx0Y29udGV4dC5yZXN0b3JlKCk7XG5cdH07XG5cdFxufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblxuLyoqXG4gKiBBIHNldCBvZiBmdW5jdGlvbnMgdXNlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyIHRvIGRyYXcgdGhlIHByaW1pdGl2ZSBncmFwaGljcyBkYXRhXG4gKlxuICogQGNsYXNzIENhbnZhc0dyYXBoaWNzXG4gKi9cblBJWEkuQ2FudmFzR3JhcGhpY3MgPSBmdW5jdGlvbigpXG57XG5cbn1cblxuXG4vKlxuICogUmVuZGVycyB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVuZGVyR3JhcGhpY3NcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dDJEfVxuICovXG5QSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzID0gZnVuY3Rpb24oZ3JhcGhpY3MsIGNvbnRleHQpXG57XG5cdHZhciB3b3JsZEFscGhhID0gZ3JhcGhpY3Mud29ybGRBbHBoYTtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCBncmFwaGljcy5ncmFwaGljc0RhdGEubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgZGF0YSA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YVtpXTtcblx0XHR2YXIgcG9pbnRzID0gZGF0YS5wb2ludHM7XG5cblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5saW5lQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG5cblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IGRhdGEubGluZVdpZHRoO1xuXG5cdFx0aWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuUE9MWSlcblx0XHR7XG5cdFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG5cdFx0XHRjb250ZXh0Lm1vdmVUbyhwb2ludHNbMF0sIHBvaW50c1sxXSk7XG5cblx0XHRcdGZvciAodmFyIGo9MTsgaiA8IHBvaW50cy5sZW5ndGgvMjsgaisrKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0LmxpbmVUbyhwb2ludHNbaiAqIDJdLCBwb2ludHNbaiAqIDIgKyAxXSk7XG5cdFx0XHR9XG5cblx0ICAgICAgXHQvLyBpZiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnQgYXJlIHRoZSBzYW1lIGNsb3NlIHRoZSBwYXRoIC0gbXVjaCBuZWF0ZXIgOilcblx0ICAgICAgXHRpZihwb2ludHNbMF0gPT0gcG9pbnRzW3BvaW50cy5sZW5ndGgtMl0gJiYgcG9pbnRzWzFdID09IHBvaW50c1twb2ludHMubGVuZ3RoLTFdKVxuXHQgICAgICBcdHtcblx0ICAgICAgXHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdCAgICAgIFx0fVxuXG5cdFx0XHRpZihkYXRhLmZpbGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmZpbGxBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5maWxsQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG4gICAgICBcdFx0XHRjb250ZXh0LmZpbGwoKTtcblx0XHRcdH1cblx0XHRcdGlmKGRhdGEubGluZVdpZHRoKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gZGF0YS5saW5lQWxwaGEgKiB3b3JsZEFscGhhO1xuICAgICAgXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5SRUNUKVxuXHRcdHtcblxuXHRcdFx0aWYoZGF0YS5maWxsQ29sb3IgfHwgZGF0YS5maWxsQ29sb3IgPT09IDApXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmZpbGxBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5maWxsQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFJlY3QocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdKTtcblxuXHRcdFx0fVxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmxpbmVBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuc3Ryb2tlUmVjdChwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM10pO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuQ0lSQylcblx0XHR7XG5cdFx0XHQvLyBUT0RPIC0gbmVlZCB0byBiZSBVbmRlZmluZWQhXG4gICAgICBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQuYXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sMCwyKk1hdGguUEkpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblxuXHRcdFx0aWYoZGF0YS5maWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gZGF0YS5maWxsQWxwaGEgKiB3b3JsZEFscGhhO1xuXHRcdFx0XHRjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yID0gJyMnICsgKCcwMDAwMCcgKyAoIGRhdGEuZmlsbENvbG9yIHwgMCkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpO1xuICAgICAgXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0XHR9XG5cdFx0XHRpZihkYXRhLmxpbmVXaWR0aClcblx0XHRcdHtcblx0XHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IGRhdGEubGluZUFscGhhICogd29ybGRBbHBoYTtcbiAgICAgIFx0XHRcdGNvbnRleHQuc3Ryb2tlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuRUxJUClcblx0XHR7XG5cblx0XHRcdC8vIGVsaXBzZSBjb2RlIHRha2VuIGZyb206IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE3Mjc5OC9ob3ctdG8tZHJhdy1hbi1vdmFsLWluLWh0bWw1LWNhbnZhc1xuXG5cdFx0XHR2YXIgZWxpcHNlRGF0YSA9ICBkYXRhLnBvaW50cztcblxuXHRcdFx0dmFyIHcgPSBlbGlwc2VEYXRhWzJdICogMjtcblx0XHRcdHZhciBoID0gZWxpcHNlRGF0YVszXSAqIDI7XG5cblx0XHRcdHZhciB4ID0gZWxpcHNlRGF0YVswXSAtIHcvMjtcblx0XHRcdHZhciB5ID0gZWxpcHNlRGF0YVsxXSAtIGgvMjtcblxuICAgICAgXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cblx0XHRcdHZhciBrYXBwYSA9IC41NTIyODQ4LFxuXHRcdFx0b3ggPSAodyAvIDIpICoga2FwcGEsIC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IGhvcml6b250YWxcblx0XHRcdG95ID0gKGggLyAyKSAqIGthcHBhLCAvLyBjb250cm9sIHBvaW50IG9mZnNldCB2ZXJ0aWNhbFxuXHRcdFx0eGUgPSB4ICsgdywgICAgICAgICAgIC8vIHgtZW5kXG5cdFx0XHR5ZSA9IHkgKyBoLCAgICAgICAgICAgLy8geS1lbmRcblx0XHRcdHhtID0geCArIHcgLyAyLCAgICAgICAvLyB4LW1pZGRsZVxuXHRcdFx0eW0gPSB5ICsgaCAvIDI7ICAgICAgIC8vIHktbWlkZGxlXG5cblx0XHRcdGNvbnRleHQubW92ZVRvKHgsIHltKTtcblx0XHRcdGNvbnRleHQuYmV6aWVyQ3VydmVUbyh4LCB5bSAtIG95LCB4bSAtIG94LCB5LCB4bSwgeSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeG0gKyBveCwgeSwgeGUsIHltIC0gb3ksIHhlLCB5bSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeGUsIHltICsgb3ksIHhtICsgb3gsIHllLCB4bSwgeWUpO1xuXHRcdFx0Y29udGV4dC5iZXppZXJDdXJ2ZVRvKHhtIC0gb3gsIHllLCB4LCB5bSArIG95LCB4LCB5bSk7XG5cblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cblx0XHRcdGlmKGRhdGEuZmlsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IGRhdGEuZmlsbEFscGhhICogd29ybGRBbHBoYTtcblx0XHRcdFx0Y29udGV4dC5maWxsU3R5bGUgPSBjb2xvciA9ICcjJyArICgnMDAwMDAnICsgKCBkYXRhLmZpbGxDb2xvciB8IDApLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KTtcbiAgICAgIFx0XHRcdGNvbnRleHQuZmlsbCgpO1xuXHRcdFx0fVxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmxpbmVBbHBoYSAqIHdvcmxkQWxwaGE7XG4gICAgICBcdFx0XHRjb250ZXh0LnN0cm9rZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xufVxuXG4vKlxuICogUmVuZGVycyBhIGdyYXBoaWNzIG1hc2tcbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZW5kZXJHcmFwaGljc01hc2tcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dDJEfVxuICovXG5QSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzTWFzayA9IGZ1bmN0aW9uKGdyYXBoaWNzLCBjb250ZXh0KVxue1xuXHR2YXIgd29ybGRBbHBoYSA9IGdyYXBoaWNzLndvcmxkQWxwaGE7XG5cblx0dmFyIGxlbiA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YS5sZW5ndGg7XG5cdGlmKGxlbiA9PT0gMClyZXR1cm47XG5cblx0aWYobGVuID4gMSlcblx0e1xuXHRcdGxlbiA9IDE7XG5cdFx0Y29uc29sZS5sb2coXCJQaXhpLmpzIHdhcm5pbmc6IG1hc2tzIGluIGNhbnZhcyBjYW4gb25seSBtYXNrIHVzaW5nIHRoZSBmaXJzdCBwYXRoIGluIHRoZSBncmFwaGljcyBvYmplY3RcIilcblx0fVxuXG5cdGZvciAodmFyIGk9MDsgaSA8IDE7IGkrKylcblx0e1xuXHRcdHZhciBkYXRhID0gZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhW2ldO1xuXHRcdHZhciBwb2ludHMgPSBkYXRhLnBvaW50cztcblxuXHRcdGlmKGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLlBPTFkpXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQubW92ZVRvKHBvaW50c1swXSwgcG9pbnRzWzFdKTtcblxuXHRcdFx0Zm9yICh2YXIgaj0xOyBqIDwgcG9pbnRzLmxlbmd0aC8yOyBqKyspXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQubGluZVRvKHBvaW50c1tqICogMl0sIHBvaW50c1tqICogMiArIDFdKTtcblx0XHRcdH1cblxuXHQgICAgICBcdC8vIGlmIHRoZSBmaXJzdCBhbmQgbGFzdCBwb2ludCBhcmUgdGhlIHNhbWUgY2xvc2UgdGhlIHBhdGggLSBtdWNoIG5lYXRlciA6KVxuXHQgICAgICBcdGlmKHBvaW50c1swXSA9PSBwb2ludHNbcG9pbnRzLmxlbmd0aC0yXSAmJiBwb2ludHNbMV0gPT0gcG9pbnRzW3BvaW50cy5sZW5ndGgtMV0pXG5cdCAgICAgIFx0e1xuXHQgICAgICBcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0ICAgICAgXHR9XG5cblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5SRUNUKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHRjb250ZXh0LnJlY3QocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdKTtcblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuQ0lSQylcblx0XHR7XG5cdFx0XHQvLyBUT0RPIC0gbmVlZCB0byBiZSBVbmRlZmluZWQhXG4gICAgICBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQuYXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sMCwyKk1hdGguUEkpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5FTElQKVxuXHRcdHtcblxuXHRcdFx0Ly8gZWxpcHNlIGNvZGUgdGFrZW4gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTcyNzk4L2hvdy10by1kcmF3LWFuLW92YWwtaW4taHRtbDUtY2FudmFzXG5cdFx0XHR2YXIgZWxpcHNlRGF0YSA9ICBkYXRhLnBvaW50cztcblxuXHRcdFx0dmFyIHcgPSBlbGlwc2VEYXRhWzJdICogMjtcblx0XHRcdHZhciBoID0gZWxpcHNlRGF0YVszXSAqIDI7XG5cblx0XHRcdHZhciB4ID0gZWxpcHNlRGF0YVswXSAtIHcvMjtcblx0XHRcdHZhciB5ID0gZWxpcHNlRGF0YVsxXSAtIGgvMjtcblxuICAgICAgXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cblx0XHRcdHZhciBrYXBwYSA9IC41NTIyODQ4LFxuXHRcdFx0b3ggPSAodyAvIDIpICoga2FwcGEsIC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IGhvcml6b250YWxcblx0XHRcdG95ID0gKGggLyAyKSAqIGthcHBhLCAvLyBjb250cm9sIHBvaW50IG9mZnNldCB2ZXJ0aWNhbFxuXHRcdFx0eGUgPSB4ICsgdywgICAgICAgICAgIC8vIHgtZW5kXG5cdFx0XHR5ZSA9IHkgKyBoLCAgICAgICAgICAgLy8geS1lbmRcblx0XHRcdHhtID0geCArIHcgLyAyLCAgICAgICAvLyB4LW1pZGRsZVxuXHRcdFx0eW0gPSB5ICsgaCAvIDI7ICAgICAgIC8vIHktbWlkZGxlXG5cblx0XHRcdGNvbnRleHQubW92ZVRvKHgsIHltKTtcblx0XHRcdGNvbnRleHQuYmV6aWVyQ3VydmVUbyh4LCB5bSAtIG95LCB4bSAtIG94LCB5LCB4bSwgeSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeG0gKyBveCwgeSwgeGUsIHltIC0gb3ksIHhlLCB5bSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeGUsIHltICsgb3ksIHhtICsgb3gsIHllLCB4bSwgeWUpO1xuXHRcdFx0Y29udGV4dC5iZXppZXJDdXJ2ZVRvKHhtIC0gb3gsIHllLCB4LCB5bSArIG95LCB4LCB5bSk7XG5cdFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdH1cblxuXG5cdH07XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFRoZSBHcmFwaGljcyBjbGFzcyBjb250YWlucyBhIHNldCBvZiBtZXRob2RzIHRoYXQgeW91IGNhbiB1c2UgdG8gY3JlYXRlIHByaW1pdGl2ZSBzaGFwZXMgYW5kIGxpbmVzLlxuICogSXQgaXMgaW1wb3J0YW50IHRvIGtub3cgdGhhdCB3aXRoIHRoZSB3ZWJHTCByZW5kZXJlciBvbmx5IHNpbXBsZSBwb2x5cyBjYW4gYmUgZmlsbGVkIGF0IHRoaXMgc3RhZ2VcbiAqIENvbXBsZXggcG9seXMgd2lsbCBub3QgYmUgZmlsbGVkLiBIZXJlcyBhbiBleGFtcGxlIG9mIGEgY29tcGxleCBwb2x5OiBodHRwOi8vd3d3Lmdvb2Rib3lkaWdpdGFsLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxMy8wNi9jb21wbGV4UG9seWdvbi5wbmdcbiAqXG4gKiBAY2xhc3MgR3JhcGhpY3NcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RDb250YWluZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5QSVhJLkdyYXBoaWNzID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIuY2FsbCggdGhpcyApO1xuXG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYWxwaGEgb2YgdGhlIGZpbGwgb2YgdGhpcyBncmFwaGljcyBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBmaWxsQWxwaGFcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKi9cblx0dGhpcy5maWxsQWxwaGEgPSAxO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIGFueSBsaW5lcyBkcmF3blxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGxpbmVXaWR0aFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqL1xuXHR0aGlzLmxpbmVXaWR0aCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29sb3Igb2YgYW55IGxpbmVzIGRyYXduXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgbGluZUNvbG9yXG4gICAgICogQHR5cGUgU3RyaW5nXG4gICAgICovXG5cdHRoaXMubGluZUNvbG9yID0gXCJibGFja1wiO1xuXG4gICAgLyoqXG4gICAgICogR3JhcGhpY3MgZGF0YVxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGdyYXBoaWNzRGF0YVxuICAgICAqIEB0eXBlIEFycmF5XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblx0dGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgcGF0aFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGN1cnJlbnRQYXRoXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtwb2ludHM6W119O1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5HcmFwaGljcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlICk7XG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuR3JhcGhpY3M7XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgbGluZSBzdHlsZSB1c2VkIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIEdyYXBoaWNzIG1ldGhvZHMgc3VjaCBhcyB0aGUgbGluZVRvKCkgbWV0aG9kIG9yIHRoZSBkcmF3Q2lyY2xlKCkgbWV0aG9kLlxuICpcbiAqIEBtZXRob2QgbGluZVN0eWxlXG4gKiBAcGFyYW0gbGluZVdpZHRoIHtOdW1iZXJ9IHdpZHRoIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3QncyBzdG9yZWQgc3R5bGVcbiAqIEBwYXJhbSBjb2xvciB7TnVtYmVyfSBjb2xvciBvZiB0aGUgbGluZSB0byBkcmF3LCB3aWxsIHVwZGF0ZSB0aGUgb2JqZWN0J3Mgc3RvcmVkIHN0eWxlXG4gKiBAcGFyYW0gYWxwaGEge051bWJlcn0gYWxwaGEgb2YgdGhlIGxpbmUgdG8gZHJhdywgd2lsbCB1cGRhdGUgdGhlIG9iamVjdCdzIHN0b3JlZCBzdHlsZVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5saW5lU3R5bGUgPSBmdW5jdGlvbihsaW5lV2lkdGgsIGNvbG9yLCBhbHBoYSlcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5saW5lV2lkdGggPSBsaW5lV2lkdGggfHwgMDtcblx0dGhpcy5saW5lQ29sb3IgPSBjb2xvciB8fCAwO1xuXHR0aGlzLmxpbmVBbHBoYSA9IChhbHBoYSA9PSB1bmRlZmluZWQpID8gMSA6IGFscGhhO1xuXG5cdHRoaXMuY3VycmVudFBhdGggPSB7bGluZVdpZHRoOnRoaXMubGluZVdpZHRoLCBsaW5lQ29sb3I6dGhpcy5saW5lQ29sb3IsIGxpbmVBbHBoYTp0aGlzLmxpbmVBbHBoYSxcblx0XHRcdFx0XHRcdGZpbGxDb2xvcjp0aGlzLmZpbGxDb2xvciwgZmlsbEFscGhhOnRoaXMuZmlsbEFscGhhLCBmaWxsOnRoaXMuZmlsbGluZywgcG9pbnRzOltdLCB0eXBlOlBJWEkuR3JhcGhpY3MuUE9MWX07XG5cblx0dGhpcy5ncmFwaGljc0RhdGEucHVzaCh0aGlzLmN1cnJlbnRQYXRoKTtcbn1cblxuLyoqXG4gKiBNb3ZlcyB0aGUgY3VycmVudCBkcmF3aW5nIHBvc2l0aW9uIHRvICh4LCB5KS5cbiAqXG4gKiBAbWV0aG9kIG1vdmVUb1xuICogQHBhcmFtIHgge051bWJlcn0gdGhlIFggY29vcmQgdG8gbW92ZSB0b1xuICogQHBhcmFtIHkge051bWJlcn0gdGhlIFkgY29vcmQgdG8gbW92ZSB0b1xuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KVxue1xuXHRpZih0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT0gMCl0aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLCBwb2ludHM6W10sIHR5cGU6UElYSS5HcmFwaGljcy5QT0xZfTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5wdXNoKHgsIHkpO1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG59XG5cbi8qKlxuICogRHJhd3MgYSBsaW5lIHVzaW5nIHRoZSBjdXJyZW50IGxpbmUgc3R5bGUgZnJvbSB0aGUgY3VycmVudCBkcmF3aW5nIHBvc2l0aW9uIHRvICh4LCB5KTtcbiAqIHRoZSBjdXJyZW50IGRyYXdpbmcgcG9zaXRpb24gaXMgdGhlbiBzZXQgdG8gKHgsIHkpLlxuICpcbiAqIEBtZXRob2QgbGluZVRvXG4gKiBAcGFyYW0geCB7TnVtYmVyfSB0aGUgWCBjb29yZCB0byBkcmF3IHRvXG4gKiBAcGFyYW0geSB7TnVtYmVyfSB0aGUgWSBjb29yZCB0byBkcmF3IHRvXG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmxpbmVUbyA9IGZ1bmN0aW9uKHgsIHkpXG57XG5cdHRoaXMuY3VycmVudFBhdGgucG9pbnRzLnB1c2goeCwgeSk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIHNpbXBsZSBvbmUtY29sb3IgZmlsbCB0aGF0IHN1YnNlcXVlbnQgY2FsbHMgdG8gb3RoZXIgR3JhcGhpY3MgbWV0aG9kc1xuICogKHN1Y2ggYXMgbGluZVRvKCkgb3IgZHJhd0NpcmNsZSgpKSB1c2Ugd2hlbiBkcmF3aW5nLlxuICpcbiAqIEBtZXRob2QgYmVnaW5GaWxsXG4gKiBAcGFyYW0gY29sb3Ige3VpbnR9IHRoZSBjb2xvciBvZiB0aGUgZmlsbFxuICogQHBhcmFtIGFscGhhIHtOdW1iZXJ9IHRoZSBhbHBoYVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5iZWdpbkZpbGwgPSBmdW5jdGlvbihjb2xvciwgYWxwaGEpXG57XG5cdHRoaXMuZmlsbGluZyA9IHRydWU7XG5cdHRoaXMuZmlsbENvbG9yID0gY29sb3IgfHwgMDtcblx0dGhpcy5maWxsQWxwaGEgPSAoYWxwaGEgPT0gdW5kZWZpbmVkKSA/IDEgOiBhbHBoYTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgZmlsbCB0byB0aGUgbGluZXMgYW5kIHNoYXBlcyB0aGF0IHdlcmUgYWRkZWQgc2luY2UgdGhlIGxhc3QgY2FsbCB0byB0aGUgYmVnaW5GaWxsKCkgbWV0aG9kLlxuICpcbiAqIEBtZXRob2QgZW5kRmlsbFxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5lbmRGaWxsID0gZnVuY3Rpb24oKVxue1xuXHR0aGlzLmZpbGxpbmcgPSBmYWxzZTtcblx0dGhpcy5maWxsQ29sb3IgPSBudWxsO1xuXHR0aGlzLmZpbGxBbHBoYSA9IDE7XG59XG5cbi8qKlxuICogQG1ldGhvZCBkcmF3UmVjdFxuICpcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSB0b3AtbGVmdCBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdG9wLWxlZnQgb2YgdGhlIHJlY3RhbmdsZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5kcmF3UmVjdCA9IGZ1bmN0aW9uKCB4LCB5LCB3aWR0aCwgaGVpZ2h0IClcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLFxuXHRcdFx0XHRcdFx0cG9pbnRzOlt4LCB5LCB3aWR0aCwgaGVpZ2h0XSwgdHlwZTpQSVhJLkdyYXBoaWNzLlJFQ1R9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIERyYXdzIGEgY2lyY2xlLlxuICpcbiAqIEBtZXRob2QgZHJhd0NpcmNsZVxuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAqIEBwYXJhbSByYWRpdXMge051bWJlcn0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiggeCwgeSwgcmFkaXVzKVxue1xuXHRpZih0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT0gMCl0aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoID0ge2xpbmVXaWR0aDp0aGlzLmxpbmVXaWR0aCwgbGluZUNvbG9yOnRoaXMubGluZUNvbG9yLCBsaW5lQWxwaGE6dGhpcy5saW5lQWxwaGEsXG5cdFx0XHRcdFx0XHRmaWxsQ29sb3I6dGhpcy5maWxsQ29sb3IsIGZpbGxBbHBoYTp0aGlzLmZpbGxBbHBoYSwgZmlsbDp0aGlzLmZpbGxpbmcsXG5cdFx0XHRcdFx0XHRwb2ludHM6W3gsIHksIHJhZGl1cywgcmFkaXVzXSwgdHlwZTpQSVhJLkdyYXBoaWNzLkNJUkN9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIERyYXdzIGFuIGVsaXBzZS5cbiAqXG4gKiBAbWV0aG9kIGRyYXdFbGlwc2VcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9XG4gKiBAcGFyYW0geSB7TnVtYmVyfVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9XG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmRyYXdFbGlwc2UgPSBmdW5jdGlvbiggeCwgeSwgd2lkdGgsIGhlaWdodClcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLFxuXHRcdFx0XHRcdFx0cG9pbnRzOlt4LCB5LCB3aWR0aCwgaGVpZ2h0XSwgdHlwZTpQSVhJLkdyYXBoaWNzLkVMSVB9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgZ3JhcGhpY3MgdGhhdCB3ZXJlIGRyYXduIHRvIHRoaXMgR3JhcGhpY3Mgb2JqZWN0LCBhbmQgcmVzZXRzIGZpbGwgYW5kIGxpbmUgc3R5bGUgc2V0dGluZ3MuXG4gKlxuICogQG1ldGhvZCBjbGVhclxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5saW5lV2lkdGggPSAwO1xuXHR0aGlzLmZpbGxpbmcgPSBmYWxzZTtcblxuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5jbGVhckRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuXHR0aGlzLmJvdW5kcyA9IG51bGwvL25ldyBQSVhJLlJlY3RhbmdsZSgpO1xufVxuXG5cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLnVwZGF0ZUZpbHRlckJvdW5kcyA9IGZ1bmN0aW9uKClcbntcblx0aWYoIXRoaXMuYm91bmRzKVxuXHR7XG5cdFx0dmFyIG1pblggPSBJbmZpbml0eTtcblx0XHR2YXIgbWF4WCA9IC1JbmZpbml0eTtcblxuXHRcdHZhciBtaW5ZID0gSW5maW5pdHk7XG5cdFx0dmFyIG1heFkgPSAtSW5maW5pdHk7XG5cblx0XHR2YXIgcG9pbnRzLCB4LCB5O1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdyYXBoaWNzRGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XG5cblx0XHRcdHZhciBkYXRhID0gdGhpcy5ncmFwaGljc0RhdGFbaV07XG5cdFx0XHR2YXIgdHlwZSA9IGRhdGEudHlwZTtcblx0XHRcdHZhciBsaW5lV2lkdGggPSBkYXRhLmxpbmVXaWR0aDtcblxuXHRcdFx0cG9pbnRzID0gZGF0YS5wb2ludHM7XG5cblx0XHRcdGlmKHR5cGUgPT09IFBJWEkuR3JhcGhpY3MuUkVDVClcblx0XHRcdHtcblx0XHRcdFx0eCA9IHBvaW50cy54IC0gbGluZVdpZHRoLzI7XG5cdFx0XHRcdHkgPSBwb2ludHMueSAtIGxpbmVXaWR0aC8yO1xuXHRcdFx0XHR2YXIgd2lkdGggPSBwb2ludHMud2lkdGggKyBsaW5lV2lkdGg7XG5cdFx0XHRcdHZhciBoZWlnaHQgPSBwb2ludHMuaGVpZ2h0ICsgbGluZVdpZHRoO1xuXG5cdFx0XHRcdG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuXHRcdFx0XHRtYXhYID0geCArIHdpZHRoID4gbWF4WCA/IHggKyB3aWR0aCA6IG1heFg7XG5cblx0XHRcdFx0bWluWSA9IHkgPCBtaW5ZID8geCA6IG1pblk7XG5cdFx0XHRcdG1heFkgPSB5ICsgaGVpZ2h0ID4gbWF4WSA/IHkgKyBoZWlnaHQgOiBtYXhZO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZih0eXBlID09PSBQSVhJLkdyYXBoaWNzLkNJUkMgfHwgdHlwZSA9PT0gUElYSS5HcmFwaGljcy5FTElQKVxuXHRcdFx0e1xuXHRcdFx0XHR4ID0gcG9pbnRzLng7XG5cdFx0XHRcdHkgPSBwb2ludHMueTtcblx0XHRcdFx0dmFyIHJhZGl1cyA9IHBvaW50cy5yYWRpdXMgKyBsaW5lV2lkdGgvMjtcblx0XHRcdFx0XG5cdFx0XHRcdG1pblggPSB4IC0gcmFkaXVzIDwgbWluWCA/IHggLSByYWRpdXMgOiBtaW5YO1xuXHRcdFx0XHRtYXhYID0geCArIHJhZGl1cyA+IG1heFggPyB4ICsgcmFkaXVzIDogbWF4WDtcblxuXHRcdFx0XHRtaW5ZID0geSAtIHJhZGl1cyA8IG1pblkgPyB5IC0gcmFkaXVzIDogbWluWTtcblx0XHRcdFx0bWF4WSA9IHkgKyByYWRpdXMgPiBtYXhZID8geSArIHJhZGl1cyA6IG1heFk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFBPTFlcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKz0yKSBcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHggPSBwb2ludHNbal07XG5cdFx0XHRcdFx0eSA9IHBvaW50c1tqKzFdO1xuXG5cdFx0XHRcdFx0bWluWCA9IHgtbGluZVdpZHRoIDwgbWluWCA/IHgtbGluZVdpZHRoIDogbWluWDtcblx0XHRcdFx0XHRtYXhYID0geCtsaW5lV2lkdGggPiBtYXhYID8geCtsaW5lV2lkdGggOiBtYXhYO1xuXG5cdFx0XHRcdFx0bWluWSA9IHktbGluZVdpZHRoIDwgbWluWSA/IHktbGluZVdpZHRoIDogbWluWTtcblx0XHRcdFx0XHRtYXhZID0geStsaW5lV2lkdGggPiBtYXhZID8geStsaW5lV2lkdGggOiBtYXhZO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdHRoaXMuYm91bmRzID0gbmV3IFBJWEkuUmVjdGFuZ2xlKG1pblgsIG1pblksIG1heFggLSBtaW5YLCBtYXhZIC0gbWluWSk7XG5cblx0fVxuXG4vL1x0Y29uc29sZS5sb2codGhpcy5ib3VuZHMpO1xufVxuXG4vLyBTT01FIFRZUEVTOlxuUElYSS5HcmFwaGljcy5QT0xZID0gMDtcblBJWEkuR3JhcGhpY3MuUkVDVCA9IDE7XG5QSVhJLkdyYXBoaWNzLkNJUkMgPSAyO1xuUElYSS5HcmFwaGljcy5FTElQID0gMztcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vXG4gKi9cblxuUElYSS5TdHJpcCA9IGZ1bmN0aW9uKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKCB0aGlzICk7XG5cdHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG5cdHRoaXMuYmxlbmRNb2RlID0gUElYSS5ibGVuZE1vZGVzLk5PUk1BTDtcblxuXHR0cnlcblx0e1xuXHRcdHRoaXMudXZzID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMSxcblx0XHRcdFx0MSwgMSxcblx0XHRcdFx0MSwgMCwgMCwxXSk7XG5cblx0XHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsXG5cdFx0XHRcdFx0XHQgIDAsMCxcblx0XHRcdFx0XHRcdCAgMCwwLCAwLFxuXHRcdFx0XHRcdFx0ICAwLCAwXSk7XG5cblx0XHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDEsIDFdKTtcblxuXHRcdHRoaXMuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgM10pO1xuXHR9XG5cdGNhdGNoKGVycm9yKVxuXHR7XG5cdFx0dGhpcy51dnMgPSBbMCwgMSxcblx0XHRcdFx0MSwgMSxcblx0XHRcdFx0MSwgMCwgMCwxXTtcblxuXHRcdHRoaXMudmVydGljaWVzID0gWzAsIDAsXG5cdFx0XHRcdFx0XHQgIDAsMCxcblx0XHRcdFx0XHRcdCAgMCwwLCAwLFxuXHRcdFx0XHRcdFx0ICAwLCAwXTtcblxuXHRcdHRoaXMuY29sb3JzID0gWzEsIDEsIDEsIDFdO1xuXG5cdFx0dGhpcy5pbmRpY2VzID0gWzAsIDEsIDIsIDNdO1xuXHR9XG5cblxuXHQvKlxuXHR0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoKVxuKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuXHQvLyBsb2FkIHRoZSB0ZXh0dXJlIVxuXHRpZih0ZXh0dXJlLmJhc2VUZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdHRoaXMud2lkdGggICA9IHRoaXMudGV4dHVyZS5mcmFtZS53aWR0aDtcblx0XHR0aGlzLmhlaWdodCAgPSB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuXHRcdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCA9IHRoaXMub25UZXh0dXJlVXBkYXRlLmJpbmQodGhpcyk7XG5cdFx0dGhpcy50ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoICd1cGRhdGUnLCB0aGlzLm9uVGV4dHVyZVVwZGF0ZUJpbmQgKTtcblx0fVxuXG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlN0cmlwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3RyaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5TdHJpcDtcblxuUElYSS5TdHJpcC5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vVE9ETyBTRVQgVEhFIFRFWFRVUkVTXG5cdC8vVE9ETyBWSVNJQklMSVRZXG5cblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy53aWR0aCAgID0gdGV4dHVyZS5mcmFtZS53aWR0aDtcblx0dGhpcy5oZWlnaHQgID0gdGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xufVxuXG5QSVhJLlN0cmlwLnByb3RvdHlwZS5vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbihldmVudClcbntcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG4vLyBzb21lIGhlbHBlciBmdW5jdGlvbnMuLlxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tL1xuICovXG5cblxuUElYSS5Sb3BlID0gZnVuY3Rpb24odGV4dHVyZSwgcG9pbnRzKVxue1xuXHRQSVhJLlN0cmlwLmNhbGwoIHRoaXMsIHRleHR1cmUgKTtcblx0dGhpcy5wb2ludHMgPSBwb2ludHM7XG5cblx0dHJ5XG5cdHtcblx0XHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoIHBvaW50cy5sZW5ndGggKiA0KTtcblx0XHR0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoIHBvaW50cy5sZW5ndGggKiA0KTtcblx0XHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoICBwb2ludHMubGVuZ3RoICogMik7XG5cdFx0dGhpcy5pbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KCBwb2ludHMubGVuZ3RoICogMik7XG5cdH1cblx0Y2F0Y2goZXJyb3IpXG5cdHtcblx0XHR0aGlzLnZlcnRpY2llcyA9IHZlcnRpY2llc1xuXG5cdFx0dGhpcy51dnMgPSB1dnNcblx0XHR0aGlzLmNvbG9ycyA9IGNvbG9yc1xuXHRcdHRoaXMuaW5kaWNlcyA9IGluZGljZXNcblx0fVxuXG5cdHRoaXMucmVmcmVzaCgpO1xufVxuXG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlJvcGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5TdHJpcC5wcm90b3R5cGUgKTtcblBJWEkuUm9wZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlJvcGU7XG5cblBJWEkuUm9wZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKClcbntcblx0dmFyIHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgMSlyZXR1cm47XG5cblx0dmFyIHV2cyA9IHRoaXMudXZzXG5cdHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuXHR2YXIgY29sb3JzID0gdGhpcy5jb2xvcnM7XG5cblx0dmFyIGxhc3RQb2ludCA9IHBvaW50c1swXTtcblx0dmFyIG5leHRQb2ludDtcblx0dmFyIHBlcnAgPSB7eDowLCB5OjB9O1xuXHR2YXIgcG9pbnQgPSBwb2ludHNbMF07XG5cblx0dGhpcy5jb3VudC09MC4yO1xuXG5cblx0dXZzWzBdID0gMFxuXHR1dnNbMV0gPSAxXG5cdHV2c1syXSA9IDBcblx0dXZzWzNdID0gMVxuXG5cdGNvbG9yc1swXSA9IDE7XG5cdGNvbG9yc1sxXSA9IDE7XG5cblx0aW5kaWNlc1swXSA9IDA7XG5cdGluZGljZXNbMV0gPSAxO1xuXG5cdHZhciB0b3RhbCA9IHBvaW50cy5sZW5ndGg7XG5cblx0Zm9yICh2YXIgaSA9ICAxOyBpIDwgdG90YWw7IGkrKylcblx0e1xuXG5cdFx0dmFyIHBvaW50ID0gcG9pbnRzW2ldO1xuXHRcdHZhciBpbmRleCA9IGkgKiA0O1xuXHRcdC8vIHRpbWUgdG8gZG8gc29tZSBzbWFydCBkcmF3aW5nIVxuXHRcdHZhciBhbW91bnQgPSBpLyh0b3RhbC0xKVxuXG5cdFx0aWYoaSUyKVxuXHRcdHtcblx0XHRcdHV2c1tpbmRleF0gPSBhbW91bnQ7XG5cdFx0XHR1dnNbaW5kZXgrMV0gPSAwO1xuXG5cdFx0XHR1dnNbaW5kZXgrMl0gPSBhbW91bnRcblx0XHRcdHV2c1tpbmRleCszXSA9IDFcblxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dXZzW2luZGV4XSA9IGFtb3VudFxuXHRcdFx0dXZzW2luZGV4KzFdID0gMFxuXG5cdFx0XHR1dnNbaW5kZXgrMl0gPSBhbW91bnRcblx0XHRcdHV2c1tpbmRleCszXSA9IDFcblx0XHR9XG5cblx0XHRpbmRleCA9IGkgKiAyO1xuXHRcdGNvbG9yc1tpbmRleF0gPSAxO1xuXHRcdGNvbG9yc1tpbmRleCsxXSA9IDE7XG5cblx0XHRpbmRleCA9IGkgKiAyO1xuXHRcdGluZGljZXNbaW5kZXhdID0gaW5kZXg7XG5cdFx0aW5kaWNlc1tpbmRleCArIDFdID0gaW5kZXggKyAxO1xuXG5cdFx0bGFzdFBvaW50ID0gcG9pbnQ7XG5cdH1cbn1cblxuUElYSS5Sb3BlLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbigpXG57XG5cblx0dmFyIHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgMSlyZXR1cm47XG5cblx0dmFyIHZlcnRpY2llcyA9IHRoaXMudmVydGljaWVzXG5cblx0dmFyIGxhc3RQb2ludCA9IHBvaW50c1swXTtcblx0dmFyIG5leHRQb2ludDtcblx0dmFyIHBlcnAgPSB7eDowLCB5OjB9O1xuXHR2YXIgcG9pbnQgPSBwb2ludHNbMF07XG5cblx0dGhpcy5jb3VudC09MC4yO1xuXG5cdHZlcnRpY2llc1swXSA9IHBvaW50LnggKyBwZXJwLnhcblx0dmVydGljaWVzWzFdID0gcG9pbnQueSArIHBlcnAueSAvLysgMjAwXG5cdHZlcnRpY2llc1syXSA9IHBvaW50LnggLSBwZXJwLnhcblx0dmVydGljaWVzWzNdID0gcG9pbnQueSAtIHBlcnAueS8vKzIwMFxuXHQvLyB0aW1lIHRvIGRvIHNvbWUgc21hcnQgZHJhd2luZyFcblxuXHR2YXIgdG90YWwgPSBwb2ludHMubGVuZ3RoO1xuXG5cdGZvciAodmFyIGkgPSAgMTsgaSA8IHRvdGFsOyBpKyspXG5cdHtcblxuXHRcdHZhciBwb2ludCA9IHBvaW50c1tpXTtcblx0XHR2YXIgaW5kZXggPSBpICogNDtcblxuXHRcdGlmKGkgPCBwb2ludHMubGVuZ3RoLTEpXG5cdFx0e1xuXHRcdFx0bmV4dFBvaW50ID0gcG9pbnRzW2krMV07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRuZXh0UG9pbnQgPSBwb2ludFxuXHRcdH1cblxuXHRcdHBlcnAueSA9IC0obmV4dFBvaW50LnggLSBsYXN0UG9pbnQueCk7XG5cdFx0cGVycC54ID0gbmV4dFBvaW50LnkgLSBsYXN0UG9pbnQueTtcblxuXHRcdHZhciByYXRpbyA9ICgxIC0gKGkgLyAodG90YWwtMSkpKSAqIDEwO1xuXHRcdFx0XHRpZihyYXRpbyA+IDEpcmF0aW8gPSAxO1xuXG5cdFx0dmFyIHBlcnBMZW5ndGggPSBNYXRoLnNxcnQocGVycC54ICogcGVycC54ICsgcGVycC55ICogcGVycC55KTtcblx0XHR2YXIgbnVtID0gdGhpcy50ZXh0dXJlLmhlaWdodC8yLy8oMjAgKyBNYXRoLmFicyhNYXRoLnNpbigoaSArIHRoaXMuY291bnQpICogMC4zKSAqIDUwKSApKiByYXRpbztcblx0XHRwZXJwLnggLz0gcGVycExlbmd0aDtcblx0XHRwZXJwLnkgLz0gcGVycExlbmd0aDtcblxuXHRcdHBlcnAueCAqPSBudW07XG5cdFx0cGVycC55ICo9IG51bTtcblxuXHRcdHZlcnRpY2llc1tpbmRleF0gPSBwb2ludC54ICsgcGVycC54XG5cdFx0dmVydGljaWVzW2luZGV4KzFdID0gcG9pbnQueSArIHBlcnAueVxuXHRcdHZlcnRpY2llc1tpbmRleCsyXSA9IHBvaW50LnggLSBwZXJwLnhcblx0XHR2ZXJ0aWNpZXNbaW5kZXgrM10gPSBwb2ludC55IC0gcGVycC55XG5cblx0XHRsYXN0UG9pbnQgPSBwb2ludDtcblx0fVxuXG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwoIHRoaXMgKTtcbn1cblxuUElYSS5Sb3BlLnByb3RvdHlwZS5zZXRUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cblxuXG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vXG4gKi9cblxuLyoqXG4gKiBBIHRpbGluZyBzcHJpdGUgaXMgYSBmYXN0IHdheSBvZiByZW5kZXJpbmcgYSB0aWxpbmcgaW1hZ2VcbiAqXG4gKiBAY2xhc3MgVGlsaW5nU3ByaXRlXG4gKiBAZXh0ZW5kcyBEaXNwbGF5T2JqZWN0Q29udGFpbmVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfSB0aGUgdGV4dHVyZSBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9ICB0aGUgd2lkdGggb2YgdGhlIHRpbGluZyBzcHJpdGVcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIGhlaWdodCBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICovXG5QSVhJLlRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKCB0aGlzICk7XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIHRoYXQgdGhlIHNwcml0ZSBpcyB1c2luZ1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgdGV4dHVyZVxuXHQgKiBAdHlwZSBUZXh0dXJlXG5cdCAqL1xuXHR0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHRpbGluZyBzcHJpdGVcblx0ICpcblx0ICogQHByb3BlcnR5IHdpZHRoXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0aWxpbmcgc3ByaXRlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqL1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuXHQvKipcblx0ICogVGhlIHNjYWxpbmcgb2YgdGhlIGltYWdlIHRoYXQgaXMgYmVpbmcgdGlsZWRcblx0ICpcblx0ICogQHByb3BlcnR5IHRpbGVTY2FsZVxuXHQgKiBAdHlwZSBQb2ludFxuXHQgKi9cblx0dGhpcy50aWxlU2NhbGUgPSBuZXcgUElYSS5Qb2ludCgxLDEpO1xuXG5cdC8qKlxuXHQgKiBUaGUgb2Zmc2V0IHBvc2l0aW9uIG9mIHRoZSBpbWFnZSB0aGF0IGlzIGJlaW5nIHRpbGVkXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0aWxlUG9zaXRpb25cblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMudGlsZVBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQoMCwwKTtcblxuXHR0aGlzLnJlbmRlcmFibGUgPSB0cnVlO1xuXG5cdHRoaXMuYmxlbmRNb2RlID0gUElYSS5ibGVuZE1vZGVzLk5PUk1BTFxufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZSApO1xuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5UaWxpbmdTcHJpdGU7XG5cbi8qKlxuICogU2V0cyB0aGUgdGV4dHVyZSBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICpcbiAqIEBtZXRob2Qgc2V0VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSBQSVhJIHRleHR1cmUgdGhhdCBpcyBkaXNwbGF5ZWQgYnkgdGhlIHNwcml0ZVxuICovXG5QSVhJLlRpbGluZ1Nwcml0ZS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vVE9ETyBTRVQgVEhFIFRFWFRVUkVTXG5cdC8vVE9ETyBWSVNJQklMSVRZXG5cblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIGZyYW1lXG4gKlxuICogQG1ldGhvZCBvblRleHR1cmVVcGRhdGVcbiAqIEBwYXJhbSBldmVudFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlLm9uVGV4dHVyZVVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuXHR0aGlzLnVwZGF0ZUZyYW1lID0gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICogYmFzZWQgb24gcGl4aSBpbXBhY3Qgc3BpbmUgaW1wbGVtZW50YXRpb24gbWFkZSBieSBFZW1lbGkgS2Vsb2tvcnBpIChAZWtlbG9rb3JwaSkgaHR0cHM6Ly9naXRodWIuY29tL2VrZWxva29ycGlcbiAqXG4gKiBBd2Vzb21lIEpTIHJ1biB0aW1lIHByb3ZpZGVkIGJ5IEVzb3RlcmljU29mdHdhcmVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc290ZXJpY1NvZnR3YXJlL3NwaW5lLXJ1bnRpbWVzXG4gKlxuICovXG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGVuYWJsZXMgdGhlIHlvdSB0byBpbXBvcnQgYW5kIHJ1biB5b3VyIHNwaW5lIGFuaW1hdGlvbnMgaW4gcGl4aS5cbiAqIFNwaW5lIGFuaW1hdGlvbiBkYXRhIG5lZWRzIHRvIGJlIGxvYWRlZCB1c2luZyB0aGUgUElYSS5Bc3NldExvYWRlciBvciBQSVhJLlNwaW5lTG9hZGVyIGJlZm9yZSBpdCBjYW4gYmUgdXNlZCBieSB0aGlzIGNsYXNzXG4gKiBTZWUgZXhhbXBsZSAxMiAoaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2V4YW1wbGVzLzEyLykgdG8gc2VlIGEgd29ya2luZyBleGFtcGxlIGFuZCBjaGVjayBvdXQgdGhlIHNvdXJjZVxuICpcbiAqIEBjbGFzcyBTcGluZVxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIHNwaW5lIGFuaW0gZmlsZSB0byBiZSB1c2VkXG4gKi9cblBJWEkuU3BpbmUgPSBmdW5jdGlvbiAodXJsKSB7XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKHRoaXMpO1xuXG5cdHRoaXMuc3BpbmVEYXRhID0gUElYSS5BbmltQ2FjaGVbdXJsXTtcblxuXHRpZiAoIXRoaXMuc3BpbmVEYXRhKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3BpbmUgZGF0YSBtdXN0IGJlIHByZWxvYWRlZCB1c2luZyBQSVhJLlNwaW5lTG9hZGVyIG9yIFBJWEkuQXNzZXRMb2FkZXI6IFwiICsgdXJsKTtcblx0fVxuXG5cdHRoaXMuc2tlbGV0b24gPSBuZXcgc3BpbmUuU2tlbGV0b24odGhpcy5zcGluZURhdGEpO1xuXHR0aGlzLnNrZWxldG9uLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKCk7XG5cblx0dGhpcy5zdGF0ZURhdGEgPSBuZXcgc3BpbmUuQW5pbWF0aW9uU3RhdGVEYXRhKHRoaXMuc3BpbmVEYXRhKTtcblx0dGhpcy5zdGF0ZSA9IG5ldyBzcGluZS5BbmltYXRpb25TdGF0ZSh0aGlzLnN0YXRlRGF0YSk7XG5cblx0dGhpcy5zbG90Q29udGFpbmVycyA9IFtdO1xuXG5cdGZvciAodmFyIGkgPSAwLCBuID0gdGhpcy5za2VsZXRvbi5kcmF3T3JkZXIubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdFx0dmFyIHNsb3QgPSB0aGlzLnNrZWxldG9uLmRyYXdPcmRlcltpXTtcblx0XHR2YXIgYXR0YWNobWVudCA9IHNsb3QuYXR0YWNobWVudDtcblx0XHR2YXIgc2xvdENvbnRhaW5lciA9IG5ldyBQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIoKTtcblx0XHR0aGlzLnNsb3RDb250YWluZXJzLnB1c2goc2xvdENvbnRhaW5lcik7XG5cdFx0dGhpcy5hZGRDaGlsZChzbG90Q29udGFpbmVyKTtcblx0XHRpZiAoIShhdHRhY2htZW50IGluc3RhbmNlb2Ygc3BpbmUuUmVnaW9uQXR0YWNobWVudCkpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHR2YXIgc3ByaXRlTmFtZSA9IGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZTtcblx0XHR2YXIgc3ByaXRlID0gdGhpcy5jcmVhdGVTcHJpdGUoc2xvdCwgYXR0YWNobWVudC5yZW5kZXJlck9iamVjdCk7XG5cdFx0c2xvdC5jdXJyZW50U3ByaXRlID0gc3ByaXRlO1xuXHRcdHNsb3QuY3VycmVudFNwcml0ZU5hbWUgPSBzcHJpdGVOYW1lO1xuXHRcdHNsb3RDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcblx0fVxufTtcblxuUElYSS5TcGluZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUpO1xuUElYSS5TcGluZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwaW5lO1xuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3BpbmUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5sYXN0VGltZSA9IHRoaXMubGFzdFRpbWUgfHwgRGF0ZS5ub3coKTtcblx0dmFyIHRpbWVEZWx0YSA9IChEYXRlLm5vdygpIC0gdGhpcy5sYXN0VGltZSkgKiAwLjAwMTtcblx0dGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG5cdHRoaXMuc3RhdGUudXBkYXRlKHRpbWVEZWx0YSk7XG5cdHRoaXMuc3RhdGUuYXBwbHkodGhpcy5za2VsZXRvbik7XG5cdHRoaXMuc2tlbGV0b24udXBkYXRlV29ybGRUcmFuc2Zvcm0oKTtcblxuXHR2YXIgZHJhd09yZGVyID0gdGhpcy5za2VsZXRvbi5kcmF3T3JkZXI7XG5cdGZvciAodmFyIGkgPSAwLCBuID0gZHJhd09yZGVyLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBzbG90ID0gZHJhd09yZGVyW2ldO1xuXHRcdHZhciBhdHRhY2htZW50ID0gc2xvdC5hdHRhY2htZW50O1xuXHRcdHZhciBzbG90Q29udGFpbmVyID0gdGhpcy5zbG90Q29udGFpbmVyc1tpXTtcblx0XHRpZiAoIShhdHRhY2htZW50IGluc3RhbmNlb2Ygc3BpbmUuUmVnaW9uQXR0YWNobWVudCkpIHtcblx0XHRcdHNsb3RDb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QpIHtcblx0XHRcdGlmICghc2xvdC5jdXJyZW50U3ByaXRlTmFtZSB8fCBzbG90LmN1cnJlbnRTcHJpdGVOYW1lICE9IGF0dGFjaG1lbnQubmFtZSkge1xuXHRcdFx0XHR2YXIgc3ByaXRlTmFtZSA9IGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZTtcblx0XHRcdFx0aWYgKHNsb3QuY3VycmVudFNwcml0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0c2xvdC5jdXJyZW50U3ByaXRlLnZpc2libGUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzbG90LnNwcml0ZXMgPSBzbG90LnNwcml0ZXMgfHwge307XG5cdFx0XHRcdGlmIChzbG90LnNwcml0ZXNbc3ByaXRlTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHNsb3Quc3ByaXRlc1tzcHJpdGVOYW1lXS52aXNpYmxlID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgc3ByaXRlID0gdGhpcy5jcmVhdGVTcHJpdGUoc2xvdCwgYXR0YWNobWVudC5yZW5kZXJlck9iamVjdCk7XG5cdFx0XHRcdFx0c2xvdENvbnRhaW5lci5hZGRDaGlsZChzcHJpdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNsb3QuY3VycmVudFNwcml0ZSA9IHNsb3Quc3ByaXRlc1tzcHJpdGVOYW1lXTtcblx0XHRcdFx0c2xvdC5jdXJyZW50U3ByaXRlTmFtZSA9IHNwcml0ZU5hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNsb3RDb250YWluZXIudmlzaWJsZSA9IHRydWU7XG5cblx0XHR2YXIgYm9uZSA9IHNsb3QuYm9uZTtcblxuXHRcdHNsb3RDb250YWluZXIucG9zaXRpb24ueCA9IGJvbmUud29ybGRYICsgYXR0YWNobWVudC54ICogYm9uZS5tMDAgKyBhdHRhY2htZW50LnkgKiBib25lLm0wMTtcblx0XHRzbG90Q29udGFpbmVyLnBvc2l0aW9uLnkgPSBib25lLndvcmxkWSArIGF0dGFjaG1lbnQueCAqIGJvbmUubTEwICsgYXR0YWNobWVudC55ICogYm9uZS5tMTE7XG5cdFx0c2xvdENvbnRhaW5lci5zY2FsZS54ID0gYm9uZS53b3JsZFNjYWxlWDtcblx0XHRzbG90Q29udGFpbmVyLnNjYWxlLnkgPSBib25lLndvcmxkU2NhbGVZO1xuXG5cdFx0c2xvdENvbnRhaW5lci5yb3RhdGlvbiA9IC0oc2xvdC5ib25lLndvcmxkUm90YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcblx0fVxuXG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG59O1xuXG5cblBJWEkuU3BpbmUucHJvdG90eXBlLmNyZWF0ZVNwcml0ZSA9IGZ1bmN0aW9uIChzbG90LCBkZXNjcmlwdG9yKSB7XG5cdHZhciBuYW1lID0gUElYSS5UZXh0dXJlQ2FjaGVbZGVzY3JpcHRvci5uYW1lXSA/IGRlc2NyaXB0b3IubmFtZSA6IGRlc2NyaXB0b3IubmFtZSArIFwiLnBuZ1wiO1xuXHR2YXIgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKFBJWEkuVGV4dHVyZS5mcm9tRnJhbWUobmFtZSkpO1xuXHRzcHJpdGUuc2NhbGUgPSBkZXNjcmlwdG9yLnNjYWxlO1xuXHRzcHJpdGUucm90YXRpb24gPSBkZXNjcmlwdG9yLnJvdGF0aW9uO1xuXHRzcHJpdGUuYW5jaG9yLnggPSBzcHJpdGUuYW5jaG9yLnkgPSAwLjU7XG5cblx0c2xvdC5zcHJpdGVzID0gc2xvdC5zcHJpdGVzIHx8IHt9O1xuXHRzbG90LnNwcml0ZXNbZGVzY3JpcHRvci5uYW1lXSA9IHNwcml0ZTtcblx0cmV0dXJuIHNwcml0ZTtcbn07XG5cbi8qXG4gKiBBd2Vzb21lIEpTIHJ1biB0aW1lIHByb3ZpZGVkIGJ5IEVzb3RlcmljU29mdHdhcmVcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vRXNvdGVyaWNTb2Z0d2FyZS9zcGluZS1ydW50aW1lc1xuICpcbiAqL1xuXG52YXIgc3BpbmUgPSB7fTtcblxuc3BpbmUuQm9uZURhdGEgPSBmdW5jdGlvbiAobmFtZSwgcGFyZW50KSB7XG5cdHRoaXMubmFtZSA9IG5hbWU7XG5cdHRoaXMucGFyZW50ID0gcGFyZW50O1xufTtcbnNwaW5lLkJvbmVEYXRhLnByb3RvdHlwZSA9IHtcblx0bGVuZ3RoOiAwLFxuXHR4OiAwLCB5OiAwLFxuXHRyb3RhdGlvbjogMCxcblx0c2NhbGVYOiAxLCBzY2FsZVk6IDFcbn07XG5cbnNwaW5lLlNsb3REYXRhID0gZnVuY3Rpb24gKG5hbWUsIGJvbmVEYXRhKSB7XG5cdHRoaXMubmFtZSA9IG5hbWU7XG5cdHRoaXMuYm9uZURhdGEgPSBib25lRGF0YTtcbn07XG5zcGluZS5TbG90RGF0YS5wcm90b3R5cGUgPSB7XG5cdHI6IDEsIGc6IDEsIGI6IDEsIGE6IDEsXG5cdGF0dGFjaG1lbnROYW1lOiBudWxsXG59O1xuXG5zcGluZS5Cb25lID0gZnVuY3Rpb24gKGJvbmVEYXRhLCBwYXJlbnQpIHtcblx0dGhpcy5kYXRhID0gYm9uZURhdGE7XG5cdHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHR0aGlzLnNldFRvU2V0dXBQb3NlKCk7XG59O1xuc3BpbmUuQm9uZS55RG93biA9IGZhbHNlO1xuc3BpbmUuQm9uZS5wcm90b3R5cGUgPSB7XG5cdHg6IDAsIHk6IDAsXG5cdHJvdGF0aW9uOiAwLFxuXHRzY2FsZVg6IDEsIHNjYWxlWTogMSxcblx0bTAwOiAwLCBtMDE6IDAsIHdvcmxkWDogMCwgLy8gYSBiIHhcblx0bTEwOiAwLCBtMTE6IDAsIHdvcmxkWTogMCwgLy8gYyBkIHlcblx0d29ybGRSb3RhdGlvbjogMCxcblx0d29ybGRTY2FsZVg6IDEsIHdvcmxkU2NhbGVZOiAxLFxuXHR1cGRhdGVXb3JsZFRyYW5zZm9ybTogZnVuY3Rpb24gKGZsaXBYLCBmbGlwWSkge1xuXHRcdHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcblx0XHRpZiAocGFyZW50ICE9IG51bGwpIHtcblx0XHRcdHRoaXMud29ybGRYID0gdGhpcy54ICogcGFyZW50Lm0wMCArIHRoaXMueSAqIHBhcmVudC5tMDEgKyBwYXJlbnQud29ybGRYO1xuXHRcdFx0dGhpcy53b3JsZFkgPSB0aGlzLnggKiBwYXJlbnQubTEwICsgdGhpcy55ICogcGFyZW50Lm0xMSArIHBhcmVudC53b3JsZFk7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVYID0gcGFyZW50LndvcmxkU2NhbGVYICogdGhpcy5zY2FsZVg7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVZID0gcGFyZW50LndvcmxkU2NhbGVZICogdGhpcy5zY2FsZVk7XG5cdFx0XHR0aGlzLndvcmxkUm90YXRpb24gPSBwYXJlbnQud29ybGRSb3RhdGlvbiArIHRoaXMucm90YXRpb247XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMud29ybGRYID0gdGhpcy54O1xuXHRcdFx0dGhpcy53b3JsZFkgPSB0aGlzLnk7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVYID0gdGhpcy5zY2FsZVg7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVZID0gdGhpcy5zY2FsZVk7XG5cdFx0XHR0aGlzLndvcmxkUm90YXRpb24gPSB0aGlzLnJvdGF0aW9uO1xuXHRcdH1cblx0XHR2YXIgcmFkaWFucyA9IHRoaXMud29ybGRSb3RhdGlvbiAqIE1hdGguUEkgLyAxODA7XG5cdFx0dmFyIGNvcyA9IE1hdGguY29zKHJhZGlhbnMpO1xuXHRcdHZhciBzaW4gPSBNYXRoLnNpbihyYWRpYW5zKTtcblx0XHR0aGlzLm0wMCA9IGNvcyAqIHRoaXMud29ybGRTY2FsZVg7XG5cdFx0dGhpcy5tMTAgPSBzaW4gKiB0aGlzLndvcmxkU2NhbGVYO1xuXHRcdHRoaXMubTAxID0gLXNpbiAqIHRoaXMud29ybGRTY2FsZVk7XG5cdFx0dGhpcy5tMTEgPSBjb3MgKiB0aGlzLndvcmxkU2NhbGVZO1xuXHRcdGlmIChmbGlwWCkge1xuXHRcdFx0dGhpcy5tMDAgPSAtdGhpcy5tMDA7XG5cdFx0XHR0aGlzLm0wMSA9IC10aGlzLm0wMTtcblx0XHR9XG5cdFx0aWYgKGZsaXBZKSB7XG5cdFx0XHR0aGlzLm0xMCA9IC10aGlzLm0xMDtcblx0XHRcdHRoaXMubTExID0gLXRoaXMubTExO1xuXHRcdH1cblx0XHRpZiAoc3BpbmUuQm9uZS55RG93bikge1xuXHRcdFx0dGhpcy5tMTAgPSAtdGhpcy5tMTA7XG5cdFx0XHR0aGlzLm0xMSA9IC10aGlzLm0xMTtcblx0XHR9XG5cdH0sXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cdFx0dGhpcy54ID0gZGF0YS54O1xuXHRcdHRoaXMueSA9IGRhdGEueTtcblx0XHR0aGlzLnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjtcblx0XHR0aGlzLnNjYWxlWCA9IGRhdGEuc2NhbGVYO1xuXHRcdHRoaXMuc2NhbGVZID0gZGF0YS5zY2FsZVk7XG5cdH1cbn07XG5cbnNwaW5lLlNsb3QgPSBmdW5jdGlvbiAoc2xvdERhdGEsIHNrZWxldG9uLCBib25lKSB7XG5cdHRoaXMuZGF0YSA9IHNsb3REYXRhO1xuXHR0aGlzLnNrZWxldG9uID0gc2tlbGV0b247XG5cdHRoaXMuYm9uZSA9IGJvbmU7XG5cdHRoaXMuc2V0VG9TZXR1cFBvc2UoKTtcbn07XG5zcGluZS5TbG90LnByb3RvdHlwZSA9IHtcblx0cjogMSwgZzogMSwgYjogMSwgYTogMSxcblx0X2F0dGFjaG1lbnRUaW1lOiAwLFxuXHRhdHRhY2htZW50OiBudWxsLFxuXHRzZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoYXR0YWNobWVudCkge1xuXHRcdHRoaXMuYXR0YWNobWVudCA9IGF0dGFjaG1lbnQ7XG5cdFx0dGhpcy5fYXR0YWNobWVudFRpbWUgPSB0aGlzLnNrZWxldG9uLnRpbWU7XG5cdH0sXG5cdHNldEF0dGFjaG1lbnRUaW1lOiBmdW5jdGlvbiAodGltZSkge1xuXHRcdHRoaXMuX2F0dGFjaG1lbnRUaW1lID0gdGhpcy5za2VsZXRvbi50aW1lIC0gdGltZTtcblx0fSxcblx0Z2V0QXR0YWNobWVudFRpbWU6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5za2VsZXRvbi50aW1lIC0gdGhpcy5fYXR0YWNobWVudFRpbWU7XG5cdH0sXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cdFx0dGhpcy5yID0gZGF0YS5yO1xuXHRcdHRoaXMuZyA9IGRhdGEuZztcblx0XHR0aGlzLmIgPSBkYXRhLmI7XG5cdFx0dGhpcy5hID0gZGF0YS5hO1xuXG5cdFx0dmFyIHNsb3REYXRhcyA9IHRoaXMuc2tlbGV0b24uZGF0YS5zbG90cztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHNsb3REYXRhcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdGlmIChzbG90RGF0YXNbaV0gPT0gZGF0YSkge1xuXHRcdFx0XHR0aGlzLnNldEF0dGFjaG1lbnQoIWRhdGEuYXR0YWNobWVudE5hbWUgPyBudWxsIDogdGhpcy5za2VsZXRvbi5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgoaSwgZGF0YS5hdHRhY2htZW50TmFtZSkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbnNwaW5lLlNraW4gPSBmdW5jdGlvbiAobmFtZSkge1xuXHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR0aGlzLmF0dGFjaG1lbnRzID0ge307XG59O1xuc3BpbmUuU2tpbi5wcm90b3R5cGUgPSB7XG5cdGFkZEF0dGFjaG1lbnQ6IGZ1bmN0aW9uIChzbG90SW5kZXgsIG5hbWUsIGF0dGFjaG1lbnQpIHtcblx0XHR0aGlzLmF0dGFjaG1lbnRzW3Nsb3RJbmRleCArIFwiOlwiICsgbmFtZV0gPSBhdHRhY2htZW50O1xuXHR9LFxuXHRnZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoc2xvdEluZGV4LCBuYW1lKSB7XG5cdFx0cmV0dXJuIHRoaXMuYXR0YWNobWVudHNbc2xvdEluZGV4ICsgXCI6XCIgKyBuYW1lXTtcblx0fSxcblx0X2F0dGFjaEFsbDogZnVuY3Rpb24gKHNrZWxldG9uLCBvbGRTa2luKSB7XG5cdFx0Zm9yICh2YXIga2V5IGluIG9sZFNraW4uYXR0YWNobWVudHMpIHtcblx0XHRcdHZhciBjb2xvbiA9IGtleS5pbmRleE9mKFwiOlwiKTtcblx0XHRcdHZhciBzbG90SW5kZXggPSBwYXJzZUludChrZXkuc3Vic3RyaW5nKDAsIGNvbG9uKSk7XG5cdFx0XHR2YXIgbmFtZSA9IGtleS5zdWJzdHJpbmcoY29sb24gKyAxKTtcblx0XHRcdHZhciBzbG90ID0gc2tlbGV0b24uc2xvdHNbc2xvdEluZGV4XTtcblx0XHRcdGlmIChzbG90LmF0dGFjaG1lbnQgJiYgc2xvdC5hdHRhY2htZW50Lm5hbWUgPT0gbmFtZSkge1xuXHRcdFx0XHR2YXIgYXR0YWNobWVudCA9IHRoaXMuZ2V0QXR0YWNobWVudChzbG90SW5kZXgsIG5hbWUpO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudCkgc2xvdC5zZXRBdHRhY2htZW50KGF0dGFjaG1lbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuc3BpbmUuQW5pbWF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIHRpbWVsaW5lcywgZHVyYXRpb24pIHtcblx0dGhpcy5uYW1lID0gbmFtZTtcblx0dGhpcy50aW1lbGluZXMgPSB0aW1lbGluZXM7XG5cdHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbn07XG5zcGluZS5BbmltYXRpb24ucHJvdG90eXBlID0ge1xuXHRhcHBseTogZnVuY3Rpb24gKHNrZWxldG9uLCB0aW1lLCBsb29wKSB7XG5cdFx0aWYgKGxvb3AgJiYgdGhpcy5kdXJhdGlvbiAhPSAwKSB0aW1lICU9IHRoaXMuZHVyYXRpb247XG5cdFx0dmFyIHRpbWVsaW5lcyA9IHRoaXMudGltZWxpbmVzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gdGltZWxpbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdHRpbWVsaW5lc1tpXS5hcHBseShza2VsZXRvbiwgdGltZSwgMSk7XG5cdH0sXG5cdG1peDogZnVuY3Rpb24gKHNrZWxldG9uLCB0aW1lLCBsb29wLCBhbHBoYSkge1xuXHRcdGlmIChsb29wICYmIHRoaXMuZHVyYXRpb24gIT0gMCkgdGltZSAlPSB0aGlzLmR1cmF0aW9uO1xuXHRcdHZhciB0aW1lbGluZXMgPSB0aGlzLnRpbWVsaW5lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHRpbWVsaW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHR0aW1lbGluZXNbaV0uYXBwbHkoc2tlbGV0b24sIHRpbWUsIGFscGhhKTtcblx0fVxufTtcblxuc3BpbmUuYmluYXJ5U2VhcmNoID0gZnVuY3Rpb24gKHZhbHVlcywgdGFyZ2V0LCBzdGVwKSB7XG5cdHZhciBsb3cgPSAwO1xuXHR2YXIgaGlnaCA9IE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIHN0ZXApIC0gMjtcblx0aWYgKGhpZ2ggPT0gMCkgcmV0dXJuIHN0ZXA7XG5cdHZhciBjdXJyZW50ID0gaGlnaCA+Pj4gMTtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRpZiAodmFsdWVzWyhjdXJyZW50ICsgMSkgKiBzdGVwXSA8PSB0YXJnZXQpXG5cdFx0XHRsb3cgPSBjdXJyZW50ICsgMTtcblx0XHRlbHNlXG5cdFx0XHRoaWdoID0gY3VycmVudDtcblx0XHRpZiAobG93ID09IGhpZ2gpIHJldHVybiAobG93ICsgMSkgKiBzdGVwO1xuXHRcdGN1cnJlbnQgPSAobG93ICsgaGlnaCkgPj4+IDE7XG5cdH1cbn07XG5zcGluZS5saW5lYXJTZWFyY2ggPSBmdW5jdGlvbiAodmFsdWVzLCB0YXJnZXQsIHN0ZXApIHtcblx0Zm9yICh2YXIgaSA9IDAsIGxhc3QgPSB2YWx1ZXMubGVuZ3RoIC0gc3RlcDsgaSA8PSBsYXN0OyBpICs9IHN0ZXApXG5cdFx0aWYgKHZhbHVlc1tpXSA+IHRhcmdldCkgcmV0dXJuIGk7XG5cdHJldHVybiAtMTtcbn07XG5cbnNwaW5lLkN1cnZlcyA9IGZ1bmN0aW9uIChmcmFtZUNvdW50KSB7XG5cdHRoaXMuY3VydmVzID0gW107IC8vIGRmeCwgZGZ5LCBkZGZ4LCBkZGZ5LCBkZGRmeCwgZGRkZnksIC4uLlxuXHR0aGlzLmN1cnZlcy5sZW5ndGggPSAoZnJhbWVDb3VudCAtIDEpICogNjtcbn07XG5zcGluZS5DdXJ2ZXMucHJvdG90eXBlID0ge1xuXHRzZXRMaW5lYXI6IGZ1bmN0aW9uIChmcmFtZUluZGV4KSB7XG5cdFx0dGhpcy5jdXJ2ZXNbZnJhbWVJbmRleCAqIDZdID0gMC8qTElORUFSKi87XG5cdH0sXG5cdHNldFN0ZXBwZWQ6IGZ1bmN0aW9uIChmcmFtZUluZGV4KSB7XG5cdFx0dGhpcy5jdXJ2ZXNbZnJhbWVJbmRleCAqIDZdID0gLTEvKlNURVBQRUQqLztcblx0fSxcblx0LyoqIFNldHMgdGhlIGNvbnRyb2wgaGFuZGxlIHBvc2l0aW9ucyBmb3IgYW4gaW50ZXJwb2xhdGlvbiBiZXppZXIgY3VydmUgdXNlZCB0byB0cmFuc2l0aW9uIGZyb20gdGhpcyBrZXlmcmFtZSB0byB0aGUgbmV4dC5cblx0ICogY3gxIGFuZCBjeDIgYXJlIGZyb20gMCB0byAxLCByZXByZXNlbnRpbmcgdGhlIHBlcmNlbnQgb2YgdGltZSBiZXR3ZWVuIHRoZSB0d28ga2V5ZnJhbWVzLiBjeTEgYW5kIGN5MiBhcmUgdGhlIHBlcmNlbnQgb2Zcblx0ICogdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUga2V5ZnJhbWUncyB2YWx1ZXMuICovXG5cdHNldEN1cnZlOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgY3gxLCBjeTEsIGN4MiwgY3kyKSB7XG5cdFx0dmFyIHN1YmRpdl9zdGVwID0gMSAvIDEwLypCRVpJRVJfU0VHTUVOVFMqLztcblx0XHR2YXIgc3ViZGl2X3N0ZXAyID0gc3ViZGl2X3N0ZXAgKiBzdWJkaXZfc3RlcDtcblx0XHR2YXIgc3ViZGl2X3N0ZXAzID0gc3ViZGl2X3N0ZXAyICogc3ViZGl2X3N0ZXA7XG5cdFx0dmFyIHByZTEgPSAzICogc3ViZGl2X3N0ZXA7XG5cdFx0dmFyIHByZTIgPSAzICogc3ViZGl2X3N0ZXAyO1xuXHRcdHZhciBwcmU0ID0gNiAqIHN1YmRpdl9zdGVwMjtcblx0XHR2YXIgcHJlNSA9IDYgKiBzdWJkaXZfc3RlcDM7XG5cdFx0dmFyIHRtcDF4ID0gLWN4MSAqIDIgKyBjeDI7XG5cdFx0dmFyIHRtcDF5ID0gLWN5MSAqIDIgKyBjeTI7XG5cdFx0dmFyIHRtcDJ4ID0gKGN4MSAtIGN4MikgKiAzICsgMTtcblx0XHR2YXIgdG1wMnkgPSAoY3kxIC0gY3kyKSAqIDMgKyAxO1xuXHRcdHZhciBpID0gZnJhbWVJbmRleCAqIDY7XG5cdFx0dmFyIGN1cnZlcyA9IHRoaXMuY3VydmVzO1xuXHRcdGN1cnZlc1tpXSA9IGN4MSAqIHByZTEgKyB0bXAxeCAqIHByZTIgKyB0bXAyeCAqIHN1YmRpdl9zdGVwMztcblx0XHRjdXJ2ZXNbaSArIDFdID0gY3kxICogcHJlMSArIHRtcDF5ICogcHJlMiArIHRtcDJ5ICogc3ViZGl2X3N0ZXAzO1xuXHRcdGN1cnZlc1tpICsgMl0gPSB0bXAxeCAqIHByZTQgKyB0bXAyeCAqIHByZTU7XG5cdFx0Y3VydmVzW2kgKyAzXSA9IHRtcDF5ICogcHJlNCArIHRtcDJ5ICogcHJlNTtcblx0XHRjdXJ2ZXNbaSArIDRdID0gdG1wMnggKiBwcmU1O1xuXHRcdGN1cnZlc1tpICsgNV0gPSB0bXAyeSAqIHByZTU7XG5cdH0sXG5cdGdldEN1cnZlUGVyY2VudDogZnVuY3Rpb24gKGZyYW1lSW5kZXgsIHBlcmNlbnQpIHtcblx0XHRwZXJjZW50ID0gcGVyY2VudCA8IDAgPyAwIDogKHBlcmNlbnQgPiAxID8gMSA6IHBlcmNlbnQpO1xuXHRcdHZhciBjdXJ2ZUluZGV4ID0gZnJhbWVJbmRleCAqIDY7XG5cdFx0dmFyIGN1cnZlcyA9IHRoaXMuY3VydmVzO1xuXHRcdHZhciBkZnggPSBjdXJ2ZXNbY3VydmVJbmRleF07XG5cdFx0aWYgKCFkZngvKkxJTkVBUiovKSByZXR1cm4gcGVyY2VudDtcblx0XHRpZiAoZGZ4ID09IC0xLypTVEVQUEVEKi8pIHJldHVybiAwO1xuXHRcdHZhciBkZnkgPSBjdXJ2ZXNbY3VydmVJbmRleCArIDFdO1xuXHRcdHZhciBkZGZ4ID0gY3VydmVzW2N1cnZlSW5kZXggKyAyXTtcblx0XHR2YXIgZGRmeSA9IGN1cnZlc1tjdXJ2ZUluZGV4ICsgM107XG5cdFx0dmFyIGRkZGZ4ID0gY3VydmVzW2N1cnZlSW5kZXggKyA0XTtcblx0XHR2YXIgZGRkZnkgPSBjdXJ2ZXNbY3VydmVJbmRleCArIDVdO1xuXHRcdHZhciB4ID0gZGZ4LCB5ID0gZGZ5O1xuXHRcdHZhciBpID0gMTAvKkJFWklFUl9TRUdNRU5UUyovIC0gMjtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0aWYgKHggPj0gcGVyY2VudCkge1xuXHRcdFx0XHR2YXIgbGFzdFggPSB4IC0gZGZ4O1xuXHRcdFx0XHR2YXIgbGFzdFkgPSB5IC0gZGZ5O1xuXHRcdFx0XHRyZXR1cm4gbGFzdFkgKyAoeSAtIGxhc3RZKSAqIChwZXJjZW50IC0gbGFzdFgpIC8gKHggLSBsYXN0WCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaSA9PSAwKSBicmVhaztcblx0XHRcdGktLTtcblx0XHRcdGRmeCArPSBkZGZ4O1xuXHRcdFx0ZGZ5ICs9IGRkZnk7XG5cdFx0XHRkZGZ4ICs9IGRkZGZ4O1xuXHRcdFx0ZGRmeSArPSBkZGRmeTtcblx0XHRcdHggKz0gZGZ4O1xuXHRcdFx0eSArPSBkZnk7XG5cdFx0fVxuXHRcdHJldHVybiB5ICsgKDEgLSB5KSAqIChwZXJjZW50IC0geCkgLyAoMSAtIHgpOyAvLyBMYXN0IHBvaW50IGlzIDEsMS5cblx0fVxufTtcblxuc3BpbmUuUm90YXRlVGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIGFuZ2xlLCAuLi5cblx0dGhpcy5mcmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudCAqIDI7XG59O1xuc3BpbmUuUm90YXRlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMjtcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCBhbmdsZSkge1xuXHRcdGZyYW1lSW5kZXggKj0gMjtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDFdID0gYW5nbGU7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDJdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdHZhciBhbW91bnQgPSBib25lLmRhdGEucm90YXRpb24gKyBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdIC0gYm9uZS5yb3RhdGlvbjtcblx0XHRcdHdoaWxlIChhbW91bnQgPiAxODApXG5cdFx0XHRcdGFtb3VudCAtPSAzNjA7XG5cdFx0XHR3aGlsZSAoYW1vdW50IDwgLTE4MClcblx0XHRcdFx0YW1vdW50ICs9IDM2MDtcblx0XHRcdGJvbmUucm90YXRpb24gKz0gYW1vdW50ICogYWxwaGE7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUgbGFzdCBmcmFtZSBhbmQgdGhlIGN1cnJlbnQgZnJhbWUuXG5cdFx0dmFyIGZyYW1lSW5kZXggPSBzcGluZS5iaW5hcnlTZWFyY2goZnJhbWVzLCB0aW1lLCAyKTtcblx0XHR2YXIgbGFzdEZyYW1lVmFsdWUgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDFdO1xuXHRcdHZhciBmcmFtZVRpbWUgPSBmcmFtZXNbZnJhbWVJbmRleF07XG5cdFx0dmFyIHBlcmNlbnQgPSAxIC0gKHRpbWUgLSBmcmFtZVRpbWUpIC8gKGZyYW1lc1tmcmFtZUluZGV4IC0gMi8qTEFTVF9GUkFNRV9USU1FKi9dIC0gZnJhbWVUaW1lKTtcblx0XHRwZXJjZW50ID0gdGhpcy5jdXJ2ZXMuZ2V0Q3VydmVQZXJjZW50KGZyYW1lSW5kZXggLyAyIC0gMSwgcGVyY2VudCk7XG5cblx0XHR2YXIgYW1vdW50ID0gZnJhbWVzW2ZyYW1lSW5kZXggKyAxLypGUkFNRV9WQUxVRSovXSAtIGxhc3RGcmFtZVZhbHVlO1xuXHRcdHdoaWxlIChhbW91bnQgPiAxODApXG5cdFx0XHRhbW91bnQgLT0gMzYwO1xuXHRcdHdoaWxlIChhbW91bnQgPCAtMTgwKVxuXHRcdFx0YW1vdW50ICs9IDM2MDtcblx0XHRhbW91bnQgPSBib25lLmRhdGEucm90YXRpb24gKyAobGFzdEZyYW1lVmFsdWUgKyBhbW91bnQgKiBwZXJjZW50KSAtIGJvbmUucm90YXRpb247XG5cdFx0d2hpbGUgKGFtb3VudCA+IDE4MClcblx0XHRcdGFtb3VudCAtPSAzNjA7XG5cdFx0d2hpbGUgKGFtb3VudCA8IC0xODApXG5cdFx0XHRhbW91bnQgKz0gMzYwO1xuXHRcdGJvbmUucm90YXRpb24gKz0gYW1vdW50ICogYWxwaGE7XG5cdH1cbn07XG5cbnNwaW5lLlRyYW5zbGF0ZVRpbWVsaW5lID0gZnVuY3Rpb24gKGZyYW1lQ291bnQpIHtcblx0dGhpcy5jdXJ2ZXMgPSBuZXcgc3BpbmUuQ3VydmVzKGZyYW1lQ291bnQpO1xuXHR0aGlzLmZyYW1lcyA9IFtdOyAvLyB0aW1lLCB4LCB5LCAuLi5cblx0dGhpcy5mcmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudCAqIDM7XG59O1xuc3BpbmUuVHJhbnNsYXRlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMztcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCB4LCB5KSB7XG5cdFx0ZnJhbWVJbmRleCAqPSAzO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXhdID0gdGltZTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMV0gPSB4O1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAyXSA9IHk7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDNdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdGJvbmUueCArPSAoYm9uZS5kYXRhLnggKyBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDJdIC0gYm9uZS54KSAqIGFscGhhO1xuXHRcdFx0Ym9uZS55ICs9IChib25lLmRhdGEueSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMV0gLSBib25lLnkpICogYWxwaGE7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUgbGFzdCBmcmFtZSBhbmQgdGhlIGN1cnJlbnQgZnJhbWUuXG5cdFx0dmFyIGZyYW1lSW5kZXggPSBzcGluZS5iaW5hcnlTZWFyY2goZnJhbWVzLCB0aW1lLCAzKTtcblx0XHR2YXIgbGFzdEZyYW1lWCA9IGZyYW1lc1tmcmFtZUluZGV4IC0gMl07XG5cdFx0dmFyIGxhc3RGcmFtZVkgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDFdO1xuXHRcdHZhciBmcmFtZVRpbWUgPSBmcmFtZXNbZnJhbWVJbmRleF07XG5cdFx0dmFyIHBlcmNlbnQgPSAxIC0gKHRpbWUgLSBmcmFtZVRpbWUpIC8gKGZyYW1lc1tmcmFtZUluZGV4ICsgLTMvKkxBU1RfRlJBTUVfVElNRSovXSAtIGZyYW1lVGltZSk7XG5cdFx0cGVyY2VudCA9IHRoaXMuY3VydmVzLmdldEN1cnZlUGVyY2VudChmcmFtZUluZGV4IC8gMyAtIDEsIHBlcmNlbnQpO1xuXG5cdFx0Ym9uZS54ICs9IChib25lLmRhdGEueCArIGxhc3RGcmFtZVggKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAxLypGUkFNRV9YKi9dIC0gbGFzdEZyYW1lWCkgKiBwZXJjZW50IC0gYm9uZS54KSAqIGFscGhhO1xuXHRcdGJvbmUueSArPSAoYm9uZS5kYXRhLnkgKyBsYXN0RnJhbWVZICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMi8qRlJBTUVfWSovXSAtIGxhc3RGcmFtZVkpICogcGVyY2VudCAtIGJvbmUueSkgKiBhbHBoYTtcblx0fVxufTtcblxuc3BpbmUuU2NhbGVUaW1lbGluZSA9IGZ1bmN0aW9uIChmcmFtZUNvdW50KSB7XG5cdHRoaXMuY3VydmVzID0gbmV3IHNwaW5lLkN1cnZlcyhmcmFtZUNvdW50KTtcblx0dGhpcy5mcmFtZXMgPSBbXTsgLy8gdGltZSwgeCwgeSwgLi4uXG5cdHRoaXMuZnJhbWVzLmxlbmd0aCA9IGZyYW1lQ291bnQgKiAzO1xufTtcbnNwaW5lLlNjYWxlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMztcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCB4LCB5KSB7XG5cdFx0ZnJhbWVJbmRleCAqPSAzO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXhdID0gdGltZTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMV0gPSB4O1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAyXSA9IHk7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDNdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdGJvbmUuc2NhbGVYICs9IChib25lLmRhdGEuc2NhbGVYIC0gMSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMl0gLSBib25lLnNjYWxlWCkgKiBhbHBoYTtcblx0XHRcdGJvbmUuc2NhbGVZICs9IChib25lLmRhdGEuc2NhbGVZIC0gMSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMV0gLSBib25lLnNjYWxlWSkgKiBhbHBoYTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSBsYXN0IGZyYW1lIGFuZCB0aGUgY3VycmVudCBmcmFtZS5cblx0XHR2YXIgZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDMpO1xuXHRcdHZhciBsYXN0RnJhbWVYID0gZnJhbWVzW2ZyYW1lSW5kZXggLSAyXTtcblx0XHR2YXIgbGFzdEZyYW1lWSA9IGZyYW1lc1tmcmFtZUluZGV4IC0gMV07XG5cdFx0dmFyIGZyYW1lVGltZSA9IGZyYW1lc1tmcmFtZUluZGV4XTtcblx0XHR2YXIgcGVyY2VudCA9IDEgLSAodGltZSAtIGZyYW1lVGltZSkgLyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAtMy8qTEFTVF9GUkFNRV9USU1FKi9dIC0gZnJhbWVUaW1lKTtcblx0XHRwZXJjZW50ID0gdGhpcy5jdXJ2ZXMuZ2V0Q3VydmVQZXJjZW50KGZyYW1lSW5kZXggLyAzIC0gMSwgcGVyY2VudCk7XG5cblx0XHRib25lLnNjYWxlWCArPSAoYm9uZS5kYXRhLnNjYWxlWCAtIDEgKyBsYXN0RnJhbWVYICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMS8qRlJBTUVfWCovXSAtIGxhc3RGcmFtZVgpICogcGVyY2VudCAtIGJvbmUuc2NhbGVYKSAqIGFscGhhO1xuXHRcdGJvbmUuc2NhbGVZICs9IChib25lLmRhdGEuc2NhbGVZIC0gMSArIGxhc3RGcmFtZVkgKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAyLypGUkFNRV9ZKi9dIC0gbGFzdEZyYW1lWSkgKiBwZXJjZW50IC0gYm9uZS5zY2FsZVkpICogYWxwaGE7XG5cdH1cbn07XG5cbnNwaW5lLkNvbG9yVGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIHIsIGcsIGIsIGEsIC4uLlxuXHR0aGlzLmZyYW1lcy5sZW5ndGggPSBmcmFtZUNvdW50ICogNTtcbn07XG5zcGluZS5Db2xvclRpbWVsaW5lLnByb3RvdHlwZSA9IHtcblx0c2xvdEluZGV4OiAwLFxuXHRnZXRGcmFtZUNvdW50OiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZnJhbWVzLmxlbmd0aCAvIDI7XG5cdH0sXG5cdHNldEZyYW1lOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgdGltZSwgeCwgeSkge1xuXHRcdGZyYW1lSW5kZXggKj0gNTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDFdID0gcjtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMl0gPSBnO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAzXSA9IGI7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDRdID0gYTtcblx0fSxcblx0YXBwbHk6IGZ1bmN0aW9uIChza2VsZXRvbiwgdGltZSwgYWxwaGEpIHtcblx0XHR2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXM7XG5cdFx0aWYgKHRpbWUgPCBmcmFtZXNbMF0pIHJldHVybjsgLy8gVGltZSBpcyBiZWZvcmUgZmlyc3QgZnJhbWUuXG5cblx0XHR2YXIgc2xvdCA9IHNrZWxldG9uLnNsb3RzW3RoaXMuc2xvdEluZGV4XTtcblxuXHRcdGlmICh0aW1lID49IGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gNV0pIHsgLy8gVGltZSBpcyBhZnRlciBsYXN0IGZyYW1lLlxuXHRcdFx0dmFyIGkgPSBmcmFtZXMubGVuZ3RoIC0gMTtcblx0XHRcdHNsb3QuciA9IGZyYW1lc1tpIC0gM107XG5cdFx0XHRzbG90LmcgPSBmcmFtZXNbaSAtIDJdO1xuXHRcdFx0c2xvdC5iID0gZnJhbWVzW2kgLSAxXTtcblx0XHRcdHNsb3QuYSA9IGZyYW1lc1tpXTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSBsYXN0IGZyYW1lIGFuZCB0aGUgY3VycmVudCBmcmFtZS5cblx0XHR2YXIgZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDUpO1xuXHRcdHZhciBsYXN0RnJhbWVSID0gZnJhbWVzW2ZyYW1lSW5kZXggLSA0XTtcblx0XHR2YXIgbGFzdEZyYW1lRyA9IGZyYW1lc1tmcmFtZUluZGV4IC0gM107XG5cdFx0dmFyIGxhc3RGcmFtZUIgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDJdO1xuXHRcdHZhciBsYXN0RnJhbWVBID0gZnJhbWVzW2ZyYW1lSW5kZXggLSAxXTtcblx0XHR2YXIgZnJhbWVUaW1lID0gZnJhbWVzW2ZyYW1lSW5kZXhdO1xuXHRcdHZhciBwZXJjZW50ID0gMSAtICh0aW1lIC0gZnJhbWVUaW1lKSAvIChmcmFtZXNbZnJhbWVJbmRleCAtIDUvKkxBU1RfRlJBTUVfVElNRSovXSAtIGZyYW1lVGltZSk7XG5cdFx0cGVyY2VudCA9IHRoaXMuY3VydmVzLmdldEN1cnZlUGVyY2VudChmcmFtZUluZGV4IC8gNSAtIDEsIHBlcmNlbnQpO1xuXG5cdFx0dmFyIHIgPSBsYXN0RnJhbWVSICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMS8qRlJBTUVfUiovXSAtIGxhc3RGcmFtZVIpICogcGVyY2VudDtcblx0XHR2YXIgZyA9IGxhc3RGcmFtZUcgKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAyLypGUkFNRV9HKi9dIC0gbGFzdEZyYW1lRykgKiBwZXJjZW50O1xuXHRcdHZhciBiID0gbGFzdEZyYW1lQiArIChmcmFtZXNbZnJhbWVJbmRleCArIDMvKkZSQU1FX0IqL10gLSBsYXN0RnJhbWVCKSAqIHBlcmNlbnQ7XG5cdFx0dmFyIGEgPSBsYXN0RnJhbWVBICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgNC8qRlJBTUVfQSovXSAtIGxhc3RGcmFtZUEpICogcGVyY2VudDtcblx0XHRpZiAoYWxwaGEgPCAxKSB7XG5cdFx0XHRzbG90LnIgKz0gKHIgLSBzbG90LnIpICogYWxwaGE7XG5cdFx0XHRzbG90LmcgKz0gKGcgLSBzbG90LmcpICogYWxwaGE7XG5cdFx0XHRzbG90LmIgKz0gKGIgLSBzbG90LmIpICogYWxwaGE7XG5cdFx0XHRzbG90LmEgKz0gKGEgLSBzbG90LmEpICogYWxwaGE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNsb3QuciA9IHI7XG5cdFx0XHRzbG90LmcgPSBnO1xuXHRcdFx0c2xvdC5iID0gYjtcblx0XHRcdHNsb3QuYSA9IGE7XG5cdFx0fVxuXHR9XG59O1xuXG5zcGluZS5BdHRhY2htZW50VGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIC4uLlxuXHR0aGlzLmZyYW1lcy5sZW5ndGggPSBmcmFtZUNvdW50O1xuXHR0aGlzLmF0dGFjaG1lbnROYW1lcyA9IFtdOyAvLyB0aW1lLCAuLi5cblx0dGhpcy5hdHRhY2htZW50TmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudDtcbn07XG5zcGluZS5BdHRhY2htZW50VGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRzbG90SW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyYW1lcy5sZW5ndGg7XG5cdH0sXG5cdHNldEZyYW1lOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgdGltZSwgYXR0YWNobWVudE5hbWUpIHtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5hdHRhY2htZW50TmFtZXNbZnJhbWVJbmRleF0gPSBhdHRhY2htZW50TmFtZTtcblx0fSxcblx0YXBwbHk6IGZ1bmN0aW9uIChza2VsZXRvbiwgdGltZSwgYWxwaGEpIHtcblx0XHR2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXM7XG5cdFx0aWYgKHRpbWUgPCBmcmFtZXNbMF0pIHJldHVybjsgLy8gVGltZSBpcyBiZWZvcmUgZmlyc3QgZnJhbWUuXG5cblx0XHR2YXIgZnJhbWVJbmRleDtcblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdKSAvLyBUaW1lIGlzIGFmdGVyIGxhc3QgZnJhbWUuXG5cdFx0XHRmcmFtZUluZGV4ID0gZnJhbWVzLmxlbmd0aCAtIDE7XG5cdFx0ZWxzZVxuXHRcdFx0ZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDEpIC0gMTtcblxuXHRcdHZhciBhdHRhY2htZW50TmFtZSA9IHRoaXMuYXR0YWNobWVudE5hbWVzW2ZyYW1lSW5kZXhdO1xuXHRcdHNrZWxldG9uLnNsb3RzW3RoaXMuc2xvdEluZGV4XS5zZXRBdHRhY2htZW50KCFhdHRhY2htZW50TmFtZSA/IG51bGwgOiBza2VsZXRvbi5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgodGhpcy5zbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKSk7XG5cdH1cbn07XG5cbnNwaW5lLlNrZWxldG9uRGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5ib25lcyA9IFtdO1xuXHR0aGlzLnNsb3RzID0gW107XG5cdHRoaXMuc2tpbnMgPSBbXTtcblx0dGhpcy5hbmltYXRpb25zID0gW107XG59O1xuc3BpbmUuU2tlbGV0b25EYXRhLnByb3RvdHlwZSA9IHtcblx0ZGVmYXVsdFNraW46IG51bGwsXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRmaW5kQm9uZTogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5uYW1lID09IGJvbmVOYW1lKSByZXR1cm4gYm9uZXNbaV07XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIC0xIGlmIHRoZSBib25lIHdhcyBub3QgZm91bmQuICovXG5cdGZpbmRCb25lSW5kZXg6IGZ1bmN0aW9uIChib25lTmFtZSkge1xuXHRcdHZhciBib25lcyA9IHRoaXMuYm9uZXM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBib25lcy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoYm9uZXNbaV0ubmFtZSA9PSBib25lTmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZFNsb3Q6IGZ1bmN0aW9uIChzbG90TmFtZSkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdGlmIChzbG90c1tpXS5uYW1lID09IHNsb3ROYW1lKSByZXR1cm4gc2xvdFtpXTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIC0xIGlmIHRoZSBib25lIHdhcyBub3QgZm91bmQuICovXG5cdGZpbmRTbG90SW5kZXg6IGZ1bmN0aW9uIChzbG90TmFtZSkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoc2xvdHNbaV0ubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZFNraW46IGZ1bmN0aW9uIChza2luTmFtZSkge1xuXHRcdHZhciBza2lucyA9IHRoaXMuc2tpbnM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBza2lucy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoc2tpbnNbaV0ubmFtZSA9PSBza2luTmFtZSkgcmV0dXJuIHNraW5zW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZEFuaW1hdGlvbjogZnVuY3Rpb24gKGFuaW1hdGlvbk5hbWUpIHtcblx0XHR2YXIgYW5pbWF0aW9ucyA9IHRoaXMuYW5pbWF0aW9ucztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKGFuaW1hdGlvbnNbaV0ubmFtZSA9PSBhbmltYXRpb25OYW1lKSByZXR1cm4gYW5pbWF0aW9uc1tpXTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufTtcblxuc3BpbmUuU2tlbGV0b24gPSBmdW5jdGlvbiAoc2tlbGV0b25EYXRhKSB7XG5cdHRoaXMuZGF0YSA9IHNrZWxldG9uRGF0YTtcblxuXHR0aGlzLmJvbmVzID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBuID0gc2tlbGV0b25EYXRhLmJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBib25lRGF0YSA9IHNrZWxldG9uRGF0YS5ib25lc1tpXTtcblx0XHR2YXIgcGFyZW50ID0gIWJvbmVEYXRhLnBhcmVudCA/IG51bGwgOiB0aGlzLmJvbmVzW3NrZWxldG9uRGF0YS5ib25lcy5pbmRleE9mKGJvbmVEYXRhLnBhcmVudCldO1xuXHRcdHRoaXMuYm9uZXMucHVzaChuZXcgc3BpbmUuQm9uZShib25lRGF0YSwgcGFyZW50KSk7XG5cdH1cblxuXHR0aGlzLnNsb3RzID0gW107XG5cdHRoaXMuZHJhd09yZGVyID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBuID0gc2tlbGV0b25EYXRhLnNsb3RzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBzbG90RGF0YSA9IHNrZWxldG9uRGF0YS5zbG90c1tpXTtcblx0XHR2YXIgYm9uZSA9IHRoaXMuYm9uZXNbc2tlbGV0b25EYXRhLmJvbmVzLmluZGV4T2Yoc2xvdERhdGEuYm9uZURhdGEpXTtcblx0XHR2YXIgc2xvdCA9IG5ldyBzcGluZS5TbG90KHNsb3REYXRhLCB0aGlzLCBib25lKTtcblx0XHR0aGlzLnNsb3RzLnB1c2goc2xvdCk7XG5cdFx0dGhpcy5kcmF3T3JkZXIucHVzaChzbG90KTtcblx0fVxufTtcbnNwaW5lLlNrZWxldG9uLnByb3RvdHlwZSA9IHtcblx0eDogMCwgeTogMCxcblx0c2tpbjogbnVsbCxcblx0cjogMSwgZzogMSwgYjogMSwgYTogMSxcblx0dGltZTogMCxcblx0ZmxpcFg6IGZhbHNlLCBmbGlwWTogZmFsc2UsXG5cdC8qKiBVcGRhdGVzIHRoZSB3b3JsZCB0cmFuc2Zvcm0gZm9yIGVhY2ggYm9uZS4gKi9cblx0dXBkYXRlV29ybGRUcmFuc2Zvcm06IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZmxpcFggPSB0aGlzLmZsaXBYO1xuXHRcdHZhciBmbGlwWSA9IHRoaXMuZmxpcFk7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGJvbmVzW2ldLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKGZsaXBYLCBmbGlwWSk7XG5cdH0sXG5cdC8qKiBTZXRzIHRoZSBib25lcyBhbmQgc2xvdHMgdG8gdGhlaXIgc2V0dXAgcG9zZSB2YWx1ZXMuICovXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5zZXRCb25lc1RvU2V0dXBQb3NlKCk7XG5cdFx0dGhpcy5zZXRTbG90c1RvU2V0dXBQb3NlKCk7XG5cdH0sXG5cdHNldEJvbmVzVG9TZXR1cFBvc2U6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgYm9uZXMgPSB0aGlzLmJvbmVzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gYm9uZXMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0Ym9uZXNbaV0uc2V0VG9TZXR1cFBvc2UoKTtcblx0fSxcblx0c2V0U2xvdHNUb1NldHVwUG9zZTogZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRzbG90c1tpXS5zZXRUb1NldHVwUG9zZShpKTtcblx0fSxcblx0LyoqIEByZXR1cm4gTWF5IHJldHVybiBudWxsLiAqL1xuXHRnZXRSb290Qm9uZTogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLmJvbmVzLmxlbmd0aCA9PSAwID8gbnVsbCA6IHRoaXMuYm9uZXNbMF07XG5cdH0sXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRmaW5kQm9uZTogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5kYXRhLm5hbWUgPT0gYm9uZU5hbWUpIHJldHVybiBib25lc1tpXTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblx0LyoqIEByZXR1cm4gLTEgaWYgdGhlIGJvbmUgd2FzIG5vdCBmb3VuZC4gKi9cblx0ZmluZEJvbmVJbmRleDogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5kYXRhLm5hbWUgPT0gYm9uZU5hbWUpIHJldHVybiBpO1xuXHRcdHJldHVybiAtMTtcblx0fSxcblx0LyoqIEByZXR1cm4gTWF5IGJlIG51bGwuICovXG5cdGZpbmRTbG90OiBmdW5jdGlvbiAoc2xvdE5hbWUpIHtcblx0XHR2YXIgc2xvdHMgPSB0aGlzLnNsb3RzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKHNsb3RzW2ldLmRhdGEubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIHNsb3RzW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHJldHVybiAtMSBpZiB0aGUgYm9uZSB3YXMgbm90IGZvdW5kLiAqL1xuXHRmaW5kU2xvdEluZGV4OiBmdW5jdGlvbiAoc2xvdE5hbWUpIHtcblx0XHR2YXIgc2xvdHMgPSB0aGlzLnNsb3RzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKHNsb3RzW2ldLmRhdGEubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHRzZXRTa2luQnlOYW1lOiBmdW5jdGlvbiAoc2tpbk5hbWUpIHtcblx0XHR2YXIgc2tpbiA9IHRoaXMuZGF0YS5maW5kU2tpbihza2luTmFtZSk7XG5cdFx0aWYgKCFza2luKSB0aHJvdyBcIlNraW4gbm90IGZvdW5kOiBcIiArIHNraW5OYW1lO1xuXHRcdHRoaXMuc2V0U2tpbihza2luKTtcblx0fSxcblx0LyoqIFNldHMgdGhlIHNraW4gdXNlZCB0byBsb29rIHVwIGF0dGFjaG1lbnRzIG5vdCBmb3VuZCBpbiB0aGUge0BsaW5rIFNrZWxldG9uRGF0YSNnZXREZWZhdWx0U2tpbigpIGRlZmF1bHQgc2tpbn0uIEF0dGFjaG1lbnRzXG5cdCAqIGZyb20gdGhlIG5ldyBza2luIGFyZSBhdHRhY2hlZCBpZiB0aGUgY29ycmVzcG9uZGluZyBhdHRhY2htZW50IGZyb20gdGhlIG9sZCBza2luIHdhcyBhdHRhY2hlZC5cblx0ICogQHBhcmFtIG5ld1NraW4gTWF5IGJlIG51bGwuICovXG5cdHNldFNraW46IGZ1bmN0aW9uIChuZXdTa2luKSB7XG5cdFx0aWYgKHRoaXMuc2tpbiAmJiBuZXdTa2luKSBuZXdTa2luLl9hdHRhY2hBbGwodGhpcywgdGhpcy5za2luKTtcblx0XHR0aGlzLnNraW4gPSBuZXdTa2luO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0Z2V0QXR0YWNobWVudEJ5U2xvdE5hbWU6IGZ1bmN0aW9uIChzbG90TmFtZSwgYXR0YWNobWVudE5hbWUpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgodGhpcy5kYXRhLmZpbmRTbG90SW5kZXgoc2xvdE5hbWUpLCBhdHRhY2htZW50TmFtZSk7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRnZXRBdHRhY2htZW50QnlTbG90SW5kZXg6IGZ1bmN0aW9uIChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKSB7XG5cdFx0aWYgKHRoaXMuc2tpbikge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSB0aGlzLnNraW4uZ2V0QXR0YWNobWVudChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKTtcblx0XHRcdGlmIChhdHRhY2htZW50KSByZXR1cm4gYXR0YWNobWVudDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZGF0YS5kZWZhdWx0U2tpbikgcmV0dXJuIHRoaXMuZGF0YS5kZWZhdWx0U2tpbi5nZXRBdHRhY2htZW50KHNsb3RJbmRleCwgYXR0YWNobWVudE5hbWUpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHBhcmFtIGF0dGFjaG1lbnROYW1lIE1heSBiZSBudWxsLiAqL1xuXHRzZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoc2xvdE5hbWUsIGF0dGFjaG1lbnROYW1lKSB7XG5cdFx0dmFyIHNsb3RzID0gdGhpcy5zbG90cztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHNsb3RzLnNpemU7IGkgPCBuOyBpKyspIHtcblx0XHRcdHZhciBzbG90ID0gc2xvdHNbaV07XG5cdFx0XHRpZiAoc2xvdC5kYXRhLm5hbWUgPT0gc2xvdE5hbWUpIHtcblx0XHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBudWxsO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudE5hbWUpIHtcblx0XHRcdFx0XHRhdHRhY2htZW50ID0gdGhpcy5nZXRBdHRhY2htZW50KGksIGF0dGFjaG1lbnROYW1lKTtcblx0XHRcdFx0XHRpZiAoYXR0YWNobWVudCA9PSBudWxsKSB0aHJvdyBcIkF0dGFjaG1lbnQgbm90IGZvdW5kOiBcIiArIGF0dGFjaG1lbnROYW1lICsgXCIsIGZvciBzbG90OiBcIiArIHNsb3ROYW1lO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNsb3Quc2V0QXR0YWNobWVudChhdHRhY2htZW50KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBcIlNsb3Qgbm90IGZvdW5kOiBcIiArIHNsb3ROYW1lO1xuXHR9LFxuXHR1cGRhdGU6IGZ1bmN0aW9uIChkZWx0YSkge1xuXHRcdHRpbWUgKz0gZGVsdGE7XG5cdH1cbn07XG5cbnNwaW5lLkF0dGFjaG1lbnRUeXBlID0ge1xuXHRyZWdpb246IDBcbn07XG5cbnNwaW5lLlJlZ2lvbkF0dGFjaG1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMub2Zmc2V0ID0gW107XG5cdHRoaXMub2Zmc2V0Lmxlbmd0aCA9IDg7XG5cdHRoaXMudXZzID0gW107XG5cdHRoaXMudXZzLmxlbmd0aCA9IDg7XG59O1xuc3BpbmUuUmVnaW9uQXR0YWNobWVudC5wcm90b3R5cGUgPSB7XG5cdHg6IDAsIHk6IDAsXG5cdHJvdGF0aW9uOiAwLFxuXHRzY2FsZVg6IDEsIHNjYWxlWTogMSxcblx0d2lkdGg6IDAsIGhlaWdodDogMCxcblx0cmVuZGVyZXJPYmplY3Q6IG51bGwsXG5cdHJlZ2lvbk9mZnNldFg6IDAsIHJlZ2lvbk9mZnNldFk6IDAsXG5cdHJlZ2lvbldpZHRoOiAwLCByZWdpb25IZWlnaHQ6IDAsXG5cdHJlZ2lvbk9yaWdpbmFsV2lkdGg6IDAsIHJlZ2lvbk9yaWdpbmFsSGVpZ2h0OiAwLFxuXHRzZXRVVnM6IGZ1bmN0aW9uICh1LCB2LCB1MiwgdjIsIHJvdGF0ZSkge1xuXHRcdHZhciB1dnMgPSB0aGlzLnV2cztcblx0XHRpZiAocm90YXRlKSB7XG5cdFx0XHR1dnNbMi8qWDIqL10gPSB1O1xuXHRcdFx0dXZzWzMvKlkyKi9dID0gdjI7XG5cdFx0XHR1dnNbNC8qWDMqL10gPSB1O1xuXHRcdFx0dXZzWzUvKlkzKi9dID0gdjtcblx0XHRcdHV2c1s2LypYNCovXSA9IHUyO1xuXHRcdFx0dXZzWzcvKlk0Ki9dID0gdjtcblx0XHRcdHV2c1swLypYMSovXSA9IHUyO1xuXHRcdFx0dXZzWzEvKlkxKi9dID0gdjI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHV2c1swLypYMSovXSA9IHU7XG5cdFx0XHR1dnNbMS8qWTEqL10gPSB2Mjtcblx0XHRcdHV2c1syLypYMiovXSA9IHU7XG5cdFx0XHR1dnNbMy8qWTIqL10gPSB2O1xuXHRcdFx0dXZzWzQvKlgzKi9dID0gdTI7XG5cdFx0XHR1dnNbNS8qWTMqL10gPSB2O1xuXHRcdFx0dXZzWzYvKlg0Ki9dID0gdTI7XG5cdFx0XHR1dnNbNy8qWTQqL10gPSB2Mjtcblx0XHR9XG5cdH0sXG5cdHVwZGF0ZU9mZnNldDogZnVuY3Rpb24gKCkge1xuXHRcdHZhciByZWdpb25TY2FsZVggPSB0aGlzLndpZHRoIC8gdGhpcy5yZWdpb25PcmlnaW5hbFdpZHRoICogdGhpcy5zY2FsZVg7XG5cdFx0dmFyIHJlZ2lvblNjYWxlWSA9IHRoaXMuaGVpZ2h0IC8gdGhpcy5yZWdpb25PcmlnaW5hbEhlaWdodCAqIHRoaXMuc2NhbGVZO1xuXHRcdHZhciBsb2NhbFggPSAtdGhpcy53aWR0aCAvIDIgKiB0aGlzLnNjYWxlWCArIHRoaXMucmVnaW9uT2Zmc2V0WCAqIHJlZ2lvblNjYWxlWDtcblx0XHR2YXIgbG9jYWxZID0gLXRoaXMuaGVpZ2h0IC8gMiAqIHRoaXMuc2NhbGVZICsgdGhpcy5yZWdpb25PZmZzZXRZICogcmVnaW9uU2NhbGVZO1xuXHRcdHZhciBsb2NhbFgyID0gbG9jYWxYICsgdGhpcy5yZWdpb25XaWR0aCAqIHJlZ2lvblNjYWxlWDtcblx0XHR2YXIgbG9jYWxZMiA9IGxvY2FsWSArIHRoaXMucmVnaW9uSGVpZ2h0ICogcmVnaW9uU2NhbGVZO1xuXHRcdHZhciByYWRpYW5zID0gdGhpcy5yb3RhdGlvbiAqIE1hdGguUEkgLyAxODA7XG5cdFx0dmFyIGNvcyA9IE1hdGguY29zKHJhZGlhbnMpO1xuXHRcdHZhciBzaW4gPSBNYXRoLnNpbihyYWRpYW5zKTtcblx0XHR2YXIgbG9jYWxYQ29zID0gbG9jYWxYICogY29zICsgdGhpcy54O1xuXHRcdHZhciBsb2NhbFhTaW4gPSBsb2NhbFggKiBzaW47XG5cdFx0dmFyIGxvY2FsWUNvcyA9IGxvY2FsWSAqIGNvcyArIHRoaXMueTtcblx0XHR2YXIgbG9jYWxZU2luID0gbG9jYWxZICogc2luO1xuXHRcdHZhciBsb2NhbFgyQ29zID0gbG9jYWxYMiAqIGNvcyArIHRoaXMueDtcblx0XHR2YXIgbG9jYWxYMlNpbiA9IGxvY2FsWDIgKiBzaW47XG5cdFx0dmFyIGxvY2FsWTJDb3MgPSBsb2NhbFkyICogY29zICsgdGhpcy55O1xuXHRcdHZhciBsb2NhbFkyU2luID0gbG9jYWxZMiAqIHNpbjtcblx0XHR2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XG5cdFx0b2Zmc2V0WzAvKlgxKi9dID0gbG9jYWxYQ29zIC0gbG9jYWxZU2luO1xuXHRcdG9mZnNldFsxLypZMSovXSA9IGxvY2FsWUNvcyArIGxvY2FsWFNpbjtcblx0XHRvZmZzZXRbMi8qWDIqL10gPSBsb2NhbFhDb3MgLSBsb2NhbFkyU2luO1xuXHRcdG9mZnNldFszLypZMiovXSA9IGxvY2FsWTJDb3MgKyBsb2NhbFhTaW47XG5cdFx0b2Zmc2V0WzQvKlgzKi9dID0gbG9jYWxYMkNvcyAtIGxvY2FsWTJTaW47XG5cdFx0b2Zmc2V0WzUvKlkzKi9dID0gbG9jYWxZMkNvcyArIGxvY2FsWDJTaW47XG5cdFx0b2Zmc2V0WzYvKlg0Ki9dID0gbG9jYWxYMkNvcyAtIGxvY2FsWVNpbjtcblx0XHRvZmZzZXRbNy8qWTQqL10gPSBsb2NhbFlDb3MgKyBsb2NhbFgyU2luO1xuXHR9LFxuXHRjb21wdXRlVmVydGljZXM6IGZ1bmN0aW9uICh4LCB5LCBib25lLCB2ZXJ0aWNlcykge1xuXHRcdHggKz0gYm9uZS53b3JsZFg7XG5cdFx0eSArPSBib25lLndvcmxkWTtcblx0XHR2YXIgbTAwID0gYm9uZS5tMDA7XG5cdFx0dmFyIG0wMSA9IGJvbmUubTAxO1xuXHRcdHZhciBtMTAgPSBib25lLm0xMDtcblx0XHR2YXIgbTExID0gYm9uZS5tMTE7XG5cdFx0dmFyIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuXHRcdHZlcnRpY2VzWzAvKlgxKi9dID0gb2Zmc2V0WzAvKlgxKi9dICogbTAwICsgb2Zmc2V0WzEvKlkxKi9dICogbTAxICsgeDtcblx0XHR2ZXJ0aWNlc1sxLypZMSovXSA9IG9mZnNldFswLypYMSovXSAqIG0xMCArIG9mZnNldFsxLypZMSovXSAqIG0xMSArIHk7XG5cdFx0dmVydGljZXNbMi8qWDIqL10gPSBvZmZzZXRbMi8qWDIqL10gKiBtMDAgKyBvZmZzZXRbMy8qWTIqL10gKiBtMDEgKyB4O1xuXHRcdHZlcnRpY2VzWzMvKlkyKi9dID0gb2Zmc2V0WzIvKlgyKi9dICogbTEwICsgb2Zmc2V0WzMvKlkyKi9dICogbTExICsgeTtcblx0XHR2ZXJ0aWNlc1s0LypYMyovXSA9IG9mZnNldFs0LypYMyovXSAqIG0wMCArIG9mZnNldFs1LypYMyovXSAqIG0wMSArIHg7XG5cdFx0dmVydGljZXNbNS8qWDMqL10gPSBvZmZzZXRbNC8qWDMqL10gKiBtMTAgKyBvZmZzZXRbNS8qWDMqL10gKiBtMTEgKyB5O1xuXHRcdHZlcnRpY2VzWzYvKlg0Ki9dID0gb2Zmc2V0WzYvKlg0Ki9dICogbTAwICsgb2Zmc2V0WzcvKlk0Ki9dICogbTAxICsgeDtcblx0XHR2ZXJ0aWNlc1s3LypZNCovXSA9IG9mZnNldFs2LypYNCovXSAqIG0xMCArIG9mZnNldFs3LypZNCovXSAqIG0xMSArIHk7XG5cdH1cbn1cblxuc3BpbmUuQW5pbWF0aW9uU3RhdGVEYXRhID0gZnVuY3Rpb24gKHNrZWxldG9uRGF0YSkge1xuXHR0aGlzLnNrZWxldG9uRGF0YSA9IHNrZWxldG9uRGF0YTtcblx0dGhpcy5hbmltYXRpb25Ub01peFRpbWUgPSB7fTtcbn07XG5zcGluZS5BbmltYXRpb25TdGF0ZURhdGEucHJvdG90eXBlID0ge1xuICAgICAgICBkZWZhdWx0TWl4OiAwLFxuXHRzZXRNaXhCeU5hbWU6IGZ1bmN0aW9uIChmcm9tTmFtZSwgdG9OYW1lLCBkdXJhdGlvbikge1xuXHRcdHZhciBmcm9tID0gdGhpcy5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbihmcm9tTmFtZSk7XG5cdFx0aWYgKCFmcm9tKSB0aHJvdyBcIkFuaW1hdGlvbiBub3QgZm91bmQ6IFwiICsgZnJvbU5hbWU7XG5cdFx0dmFyIHRvID0gdGhpcy5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbih0b05hbWUpO1xuXHRcdGlmICghdG8pIHRocm93IFwiQW5pbWF0aW9uIG5vdCBmb3VuZDogXCIgKyB0b05hbWU7XG5cdFx0dGhpcy5zZXRNaXgoZnJvbSwgdG8sIGR1cmF0aW9uKTtcblx0fSxcblx0c2V0TWl4OiBmdW5jdGlvbiAoZnJvbSwgdG8sIGR1cmF0aW9uKSB7XG5cdFx0dGhpcy5hbmltYXRpb25Ub01peFRpbWVbZnJvbS5uYW1lICsgXCI6XCIgKyB0by5uYW1lXSA9IGR1cmF0aW9uO1xuXHR9LFxuXHRnZXRNaXg6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuXHRcdHZhciB0aW1lID0gdGhpcy5hbmltYXRpb25Ub01peFRpbWVbZnJvbS5uYW1lICsgXCI6XCIgKyB0by5uYW1lXTtcbiAgICAgICAgICAgIHJldHVybiB0aW1lID8gdGltZSA6IHRoaXMuZGVmYXVsdE1peDtcblx0fVxufTtcblxuc3BpbmUuQW5pbWF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGVEYXRhKSB7XG5cdHRoaXMuZGF0YSA9IHN0YXRlRGF0YTtcblx0dGhpcy5xdWV1ZSA9IFtdO1xufTtcbnNwaW5lLkFuaW1hdGlvblN0YXRlLnByb3RvdHlwZSA9IHtcblx0Y3VycmVudDogbnVsbCxcblx0cHJldmlvdXM6IG51bGwsXG5cdGN1cnJlbnRUaW1lOiAwLFxuXHRwcmV2aW91c1RpbWU6IDAsXG5cdGN1cnJlbnRMb29wOiBmYWxzZSxcblx0cHJldmlvdXNMb29wOiBmYWxzZSxcblx0bWl4VGltZTogMCxcblx0bWl4RHVyYXRpb246IDAsXG5cdHVwZGF0ZTogZnVuY3Rpb24gKGRlbHRhKSB7XG5cdFx0dGhpcy5jdXJyZW50VGltZSArPSBkZWx0YTtcblx0XHR0aGlzLnByZXZpb3VzVGltZSArPSBkZWx0YTtcblx0XHR0aGlzLm1peFRpbWUgKz0gZGVsdGE7XG5cblx0XHRpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHR2YXIgZW50cnkgPSB0aGlzLnF1ZXVlWzBdO1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFRpbWUgPj0gZW50cnkuZGVsYXkpIHtcblx0XHRcdFx0dGhpcy5fc2V0QW5pbWF0aW9uKGVudHJ5LmFuaW1hdGlvbiwgZW50cnkubG9vcCk7XG5cdFx0XHRcdHRoaXMucXVldWUuc2hpZnQoKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24pIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLnByZXZpb3VzKSB7XG5cdFx0XHR0aGlzLnByZXZpb3VzLmFwcGx5KHNrZWxldG9uLCB0aGlzLnByZXZpb3VzVGltZSwgdGhpcy5wcmV2aW91c0xvb3ApO1xuXHRcdFx0dmFyIGFscGhhID0gdGhpcy5taXhUaW1lIC8gdGhpcy5taXhEdXJhdGlvbjtcblx0XHRcdGlmIChhbHBoYSA+PSAxKSB7XG5cdFx0XHRcdGFscGhhID0gMTtcblx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmN1cnJlbnQubWl4KHNrZWxldG9uLCB0aGlzLmN1cnJlbnRUaW1lLCB0aGlzLmN1cnJlbnRMb29wLCBhbHBoYSk7XG5cdFx0fSBlbHNlXG5cdFx0XHR0aGlzLmN1cnJlbnQuYXBwbHkoc2tlbGV0b24sIHRoaXMuY3VycmVudFRpbWUsIHRoaXMuY3VycmVudExvb3ApO1xuXHR9LFxuXHRjbGVhckFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMucHJldmlvdXMgPSBudWxsO1xuXHRcdHRoaXMuY3VycmVudCA9IG51bGw7XG5cdFx0dGhpcy5xdWV1ZS5sZW5ndGggPSAwO1xuXHR9LFxuXHRfc2V0QW5pbWF0aW9uOiBmdW5jdGlvbiAoYW5pbWF0aW9uLCBsb29wKSB7XG5cdFx0dGhpcy5wcmV2aW91cyA9IG51bGw7XG5cdFx0aWYgKGFuaW1hdGlvbiAmJiB0aGlzLmN1cnJlbnQpIHtcblx0XHRcdHRoaXMubWl4RHVyYXRpb24gPSB0aGlzLmRhdGEuZ2V0TWl4KHRoaXMuY3VycmVudCwgYW5pbWF0aW9uKTtcblx0XHRcdGlmICh0aGlzLm1peER1cmF0aW9uID4gMCkge1xuXHRcdFx0XHR0aGlzLm1peFRpbWUgPSAwO1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzID0gdGhpcy5jdXJyZW50O1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzVGltZSA9IHRoaXMuY3VycmVudFRpbWU7XG5cdFx0XHRcdHRoaXMucHJldmlvdXNMb29wID0gdGhpcy5jdXJyZW50TG9vcDtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5jdXJyZW50ID0gYW5pbWF0aW9uO1xuXHRcdHRoaXMuY3VycmVudExvb3AgPSBsb29wO1xuXHRcdHRoaXMuY3VycmVudFRpbWUgPSAwO1xuXHR9LFxuXHQvKiogQHNlZSAjc2V0QW5pbWF0aW9uKEFuaW1hdGlvbiwgQm9vbGVhbikgKi9cblx0c2V0QW5pbWF0aW9uQnlOYW1lOiBmdW5jdGlvbiAoYW5pbWF0aW9uTmFtZSwgbG9vcCkge1xuXHRcdHZhciBhbmltYXRpb24gPSB0aGlzLmRhdGEuc2tlbGV0b25EYXRhLmZpbmRBbmltYXRpb24oYW5pbWF0aW9uTmFtZSk7XG5cdFx0aWYgKCFhbmltYXRpb24pIHRocm93IFwiQW5pbWF0aW9uIG5vdCBmb3VuZDogXCIgKyBhbmltYXRpb25OYW1lO1xuXHRcdHRoaXMuc2V0QW5pbWF0aW9uKGFuaW1hdGlvbiwgbG9vcCk7XG5cdH0sXG5cdC8qKiBTZXQgdGhlIGN1cnJlbnQgYW5pbWF0aW9uLiBBbnkgcXVldWVkIGFuaW1hdGlvbnMgYXJlIGNsZWFyZWQgYW5kIHRoZSBjdXJyZW50IGFuaW1hdGlvbiB0aW1lIGlzIHNldCB0byAwLlxuXHQgKiBAcGFyYW0gYW5pbWF0aW9uIE1heSBiZSBudWxsLiAqL1xuXHRzZXRBbmltYXRpb246IGZ1bmN0aW9uIChhbmltYXRpb24sIGxvb3ApIHtcblx0XHR0aGlzLnF1ZXVlLmxlbmd0aCA9IDA7XG5cdFx0dGhpcy5fc2V0QW5pbWF0aW9uKGFuaW1hdGlvbiwgbG9vcCk7XG5cdH0sXG5cdC8qKiBAc2VlICNhZGRBbmltYXRpb24oQW5pbWF0aW9uLCBCb29sZWFuLCBOdW1iZXIpICovXG5cdGFkZEFuaW1hdGlvbkJ5TmFtZTogZnVuY3Rpb24gKGFuaW1hdGlvbk5hbWUsIGxvb3AsIGRlbGF5KSB7XG5cdFx0dmFyIGFuaW1hdGlvbiA9IHRoaXMuZGF0YS5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbihhbmltYXRpb25OYW1lKTtcblx0XHRpZiAoIWFuaW1hdGlvbikgdGhyb3cgXCJBbmltYXRpb24gbm90IGZvdW5kOiBcIiArIGFuaW1hdGlvbk5hbWU7XG5cdFx0dGhpcy5hZGRBbmltYXRpb24oYW5pbWF0aW9uLCBsb29wLCBkZWxheSk7XG5cdH0sXG5cdC8qKiBBZGRzIGFuIGFuaW1hdGlvbiB0byBiZSBwbGF5ZWQgZGVsYXkgc2Vjb25kcyBhZnRlciB0aGUgY3VycmVudCBvciBsYXN0IHF1ZXVlZCBhbmltYXRpb24uXG5cdCAqIEBwYXJhbSBkZWxheSBNYXkgYmUgPD0gMCB0byB1c2UgZHVyYXRpb24gb2YgcHJldmlvdXMgYW5pbWF0aW9uIG1pbnVzIGFueSBtaXggZHVyYXRpb24gcGx1cyB0aGUgbmVnYXRpdmUgZGVsYXkuICovXG5cdGFkZEFuaW1hdGlvbjogZnVuY3Rpb24gKGFuaW1hdGlvbiwgbG9vcCwgZGVsYXkpIHtcblx0XHR2YXIgZW50cnkgPSB7fTtcblx0XHRlbnRyeS5hbmltYXRpb24gPSBhbmltYXRpb247XG5cdFx0ZW50cnkubG9vcCA9IGxvb3A7XG5cblx0XHRpZiAoIWRlbGF5IHx8IGRlbGF5IDw9IDApIHtcblx0XHRcdHZhciBwcmV2aW91c0FuaW1hdGlvbiA9IHRoaXMucXVldWUubGVuZ3RoID09IDAgPyB0aGlzLmN1cnJlbnQgOiB0aGlzLnF1ZXVlW3RoaXMucXVldWUubGVuZ3RoIC0gMV0uYW5pbWF0aW9uO1xuXHRcdFx0aWYgKHByZXZpb3VzQW5pbWF0aW9uICE9IG51bGwpXG5cdFx0XHRcdGRlbGF5ID0gcHJldmlvdXNBbmltYXRpb24uZHVyYXRpb24gLSB0aGlzLmRhdGEuZ2V0TWl4KHByZXZpb3VzQW5pbWF0aW9uLCBhbmltYXRpb24pICsgKGRlbGF5IHx8IDApO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRkZWxheSA9IDA7XG5cdFx0fVxuXHRcdGVudHJ5LmRlbGF5ID0gZGVsYXk7XG5cblx0XHR0aGlzLnF1ZXVlLnB1c2goZW50cnkpO1xuXHR9LFxuXHQvKiogUmV0dXJucyB0cnVlIGlmIG5vIGFuaW1hdGlvbiBpcyBzZXQgb3IgaWYgdGhlIGN1cnJlbnQgdGltZSBpcyBncmVhdGVyIHRoYW4gdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiwgcmVnYXJkbGVzcyBvZiBsb29waW5nLiAqL1xuXHRpc0NvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICF0aGlzLmN1cnJlbnQgfHwgdGhpcy5jdXJyZW50VGltZSA+PSB0aGlzLmN1cnJlbnQuZHVyYXRpb247XG5cdH1cbn07XG5cbnNwaW5lLlNrZWxldG9uSnNvbiA9IGZ1bmN0aW9uIChhdHRhY2htZW50TG9hZGVyKSB7XG5cdHRoaXMuYXR0YWNobWVudExvYWRlciA9IGF0dGFjaG1lbnRMb2FkZXI7XG59O1xuc3BpbmUuU2tlbGV0b25Kc29uLnByb3RvdHlwZSA9IHtcblx0c2NhbGU6IDEsXG5cdHJlYWRTa2VsZXRvbkRhdGE6IGZ1bmN0aW9uIChyb290KSB7XG5cdFx0dmFyIHNrZWxldG9uRGF0YSA9IG5ldyBzcGluZS5Ta2VsZXRvbkRhdGEoKTtcblxuXHRcdC8vIEJvbmVzLlxuXHRcdHZhciBib25lcyA9IHJvb3RbXCJib25lc1wiXTtcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0dmFyIGJvbmVNYXAgPSBib25lc1tpXTtcblx0XHRcdHZhciBwYXJlbnQgPSBudWxsO1xuXHRcdFx0aWYgKGJvbmVNYXBbXCJwYXJlbnRcIl0pIHtcblx0XHRcdFx0cGFyZW50ID0gc2tlbGV0b25EYXRhLmZpbmRCb25lKGJvbmVNYXBbXCJwYXJlbnRcIl0pO1xuXHRcdFx0XHRpZiAoIXBhcmVudCkgdGhyb3cgXCJQYXJlbnQgYm9uZSBub3QgZm91bmQ6IFwiICsgYm9uZU1hcFtcInBhcmVudFwiXTtcblx0XHRcdH1cblx0XHRcdHZhciBib25lRGF0YSA9IG5ldyBzcGluZS5Cb25lRGF0YShib25lTWFwW1wibmFtZVwiXSwgcGFyZW50KTtcblx0XHRcdGJvbmVEYXRhLmxlbmd0aCA9IChib25lTWFwW1wibGVuZ3RoXCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGJvbmVEYXRhLnggPSAoYm9uZU1hcFtcInhcIl0gfHwgMCkgKiB0aGlzLnNjYWxlO1xuXHRcdFx0Ym9uZURhdGEueSA9IChib25lTWFwW1wieVwiXSB8fCAwKSAqIHRoaXMuc2NhbGU7XG5cdFx0XHRib25lRGF0YS5yb3RhdGlvbiA9IChib25lTWFwW1wicm90YXRpb25cIl0gfHwgMCk7XG5cdFx0XHRib25lRGF0YS5zY2FsZVggPSBib25lTWFwW1wic2NhbGVYXCJdIHx8IDE7XG5cdFx0XHRib25lRGF0YS5zY2FsZVkgPSBib25lTWFwW1wic2NhbGVZXCJdIHx8IDE7XG5cdFx0XHRza2VsZXRvbkRhdGEuYm9uZXMucHVzaChib25lRGF0YSk7XG5cdFx0fVxuXG5cdFx0Ly8gU2xvdHMuXG5cdFx0dmFyIHNsb3RzID0gcm9vdFtcInNsb3RzXCJdO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdFx0XHR2YXIgc2xvdE1hcCA9IHNsb3RzW2ldO1xuXHRcdFx0dmFyIGJvbmVEYXRhID0gc2tlbGV0b25EYXRhLmZpbmRCb25lKHNsb3RNYXBbXCJib25lXCJdKTtcblx0XHRcdGlmICghYm9uZURhdGEpIHRocm93IFwiU2xvdCBib25lIG5vdCBmb3VuZDogXCIgKyBzbG90TWFwW1wiYm9uZVwiXTtcblx0XHRcdHZhciBzbG90RGF0YSA9IG5ldyBzcGluZS5TbG90RGF0YShzbG90TWFwW1wibmFtZVwiXSwgYm9uZURhdGEpO1xuXG5cdFx0XHR2YXIgY29sb3IgPSBzbG90TWFwW1wiY29sb3JcIl07XG5cdFx0XHRpZiAoY29sb3IpIHtcblx0XHRcdFx0c2xvdERhdGEuciA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAwKTtcblx0XHRcdFx0c2xvdERhdGEuZyA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAxKTtcblx0XHRcdFx0c2xvdERhdGEuYiA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAyKTtcblx0XHRcdFx0c2xvdERhdGEuYSA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAzKTtcblx0XHRcdH1cblxuXHRcdFx0c2xvdERhdGEuYXR0YWNobWVudE5hbWUgPSBzbG90TWFwW1wiYXR0YWNobWVudFwiXTtcblxuXHRcdFx0c2tlbGV0b25EYXRhLnNsb3RzLnB1c2goc2xvdERhdGEpO1xuXHRcdH1cblxuXHRcdC8vIFNraW5zLlxuXHRcdHZhciBza2lucyA9IHJvb3RbXCJza2luc1wiXTtcblx0XHRmb3IgKHZhciBza2luTmFtZSBpbiBza2lucykge1xuXHRcdFx0aWYgKCFza2lucy5oYXNPd25Qcm9wZXJ0eShza2luTmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0dmFyIHNraW5NYXAgPSBza2luc1tza2luTmFtZV07XG5cdFx0XHR2YXIgc2tpbiA9IG5ldyBzcGluZS5Ta2luKHNraW5OYW1lKTtcblx0XHRcdGZvciAodmFyIHNsb3ROYW1lIGluIHNraW5NYXApIHtcblx0XHRcdFx0aWYgKCFza2luTWFwLmhhc093blByb3BlcnR5KHNsb3ROYW1lKSkgY29udGludWU7XG5cdFx0XHRcdHZhciBzbG90SW5kZXggPSBza2VsZXRvbkRhdGEuZmluZFNsb3RJbmRleChzbG90TmFtZSk7XG5cdFx0XHRcdHZhciBzbG90RW50cnkgPSBza2luTWFwW3Nsb3ROYW1lXTtcblx0XHRcdFx0Zm9yICh2YXIgYXR0YWNobWVudE5hbWUgaW4gc2xvdEVudHJ5KSB7XG5cdFx0XHRcdFx0aWYgKCFzbG90RW50cnkuaGFzT3duUHJvcGVydHkoYXR0YWNobWVudE5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0XHR2YXIgYXR0YWNobWVudCA9IHRoaXMucmVhZEF0dGFjaG1lbnQoc2tpbiwgYXR0YWNobWVudE5hbWUsIHNsb3RFbnRyeVthdHRhY2htZW50TmFtZV0pO1xuXHRcdFx0XHRcdGlmIChhdHRhY2htZW50ICE9IG51bGwpIHNraW4uYWRkQXR0YWNobWVudChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lLCBhdHRhY2htZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0c2tlbGV0b25EYXRhLnNraW5zLnB1c2goc2tpbik7XG5cdFx0XHRpZiAoc2tpbi5uYW1lID09IFwiZGVmYXVsdFwiKSBza2VsZXRvbkRhdGEuZGVmYXVsdFNraW4gPSBza2luO1xuXHRcdH1cblxuXHRcdC8vIEFuaW1hdGlvbnMuXG5cdFx0dmFyIGFuaW1hdGlvbnMgPSByb290W1wiYW5pbWF0aW9uc1wiXTtcblx0XHRmb3IgKHZhciBhbmltYXRpb25OYW1lIGluIGFuaW1hdGlvbnMpIHtcblx0XHRcdGlmICghYW5pbWF0aW9ucy5oYXNPd25Qcm9wZXJ0eShhbmltYXRpb25OYW1lKSkgY29udGludWU7XG5cdFx0XHR0aGlzLnJlYWRBbmltYXRpb24oYW5pbWF0aW9uTmFtZSwgYW5pbWF0aW9uc1thbmltYXRpb25OYW1lXSwgc2tlbGV0b25EYXRhKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2tlbGV0b25EYXRhO1xuXHR9LFxuXHRyZWFkQXR0YWNobWVudDogZnVuY3Rpb24gKHNraW4sIG5hbWUsIG1hcCkge1xuXHRcdG5hbWUgPSBtYXBbXCJuYW1lXCJdIHx8IG5hbWU7XG5cblx0XHR2YXIgdHlwZSA9IHNwaW5lLkF0dGFjaG1lbnRUeXBlW21hcFtcInR5cGVcIl0gfHwgXCJyZWdpb25cIl07XG5cblx0XHRpZiAodHlwZSA9PSBzcGluZS5BdHRhY2htZW50VHlwZS5yZWdpb24pIHtcblx0XHRcdHZhciBhdHRhY2htZW50ID0gbmV3IHNwaW5lLlJlZ2lvbkF0dGFjaG1lbnQoKTtcblx0XHRcdGF0dGFjaG1lbnQueCA9IChtYXBbXCJ4XCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQueSA9IChtYXBbXCJ5XCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQuc2NhbGVYID0gbWFwW1wic2NhbGVYXCJdIHx8IDE7XG5cdFx0XHRhdHRhY2htZW50LnNjYWxlWSA9IG1hcFtcInNjYWxlWVwiXSB8fCAxO1xuXHRcdFx0YXR0YWNobWVudC5yb3RhdGlvbiA9IG1hcFtcInJvdGF0aW9uXCJdIHx8IDA7XG5cdFx0XHRhdHRhY2htZW50LndpZHRoID0gKG1hcFtcIndpZHRoXCJdIHx8IDMyKSAqIHRoaXMuc2NhbGU7XG5cdFx0XHRhdHRhY2htZW50LmhlaWdodCA9IChtYXBbXCJoZWlnaHRcIl0gfHwgMzIpICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQudXBkYXRlT2Zmc2V0KCk7XG5cblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QgPSB7fTtcblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZSA9IG5hbWU7XG5cdFx0XHRhdHRhY2htZW50LnJlbmRlcmVyT2JqZWN0LnNjYWxlID0ge307XG5cdFx0XHRhdHRhY2htZW50LnJlbmRlcmVyT2JqZWN0LnNjYWxlLnggPSBhdHRhY2htZW50LnNjYWxlWDtcblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3Quc2NhbGUueSA9IGF0dGFjaG1lbnQuc2NhbGVZO1xuXHRcdFx0YXR0YWNobWVudC5yZW5kZXJlck9iamVjdC5yb3RhdGlvbiA9IC1hdHRhY2htZW50LnJvdGF0aW9uICogTWF0aC5QSSAvIDE4MDtcblx0XHRcdHJldHVybiBhdHRhY2htZW50O1xuXHRcdH1cblxuICAgICAgICAgICAgdGhyb3cgXCJVbmtub3duIGF0dGFjaG1lbnQgdHlwZTogXCIgKyB0eXBlO1xuXHR9LFxuXG5cdHJlYWRBbmltYXRpb246IGZ1bmN0aW9uIChuYW1lLCBtYXAsIHNrZWxldG9uRGF0YSkge1xuXHRcdHZhciB0aW1lbGluZXMgPSBbXTtcblx0XHR2YXIgZHVyYXRpb24gPSAwO1xuXG5cdFx0dmFyIGJvbmVzID0gbWFwW1wiYm9uZXNcIl07XG5cdFx0Zm9yICh2YXIgYm9uZU5hbWUgaW4gYm9uZXMpIHtcblx0XHRcdGlmICghYm9uZXMuaGFzT3duUHJvcGVydHkoYm9uZU5hbWUpKSBjb250aW51ZTtcblx0XHRcdHZhciBib25lSW5kZXggPSBza2VsZXRvbkRhdGEuZmluZEJvbmVJbmRleChib25lTmFtZSk7XG5cdFx0XHRpZiAoYm9uZUluZGV4ID09IC0xKSB0aHJvdyBcIkJvbmUgbm90IGZvdW5kOiBcIiArIGJvbmVOYW1lO1xuXHRcdFx0dmFyIGJvbmVNYXAgPSBib25lc1tib25lTmFtZV07XG5cblx0XHRcdGZvciAodmFyIHRpbWVsaW5lTmFtZSBpbiBib25lTWFwKSB7XG5cdFx0XHRcdGlmICghYm9uZU1hcC5oYXNPd25Qcm9wZXJ0eSh0aW1lbGluZU5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0dmFyIHZhbHVlcyA9IGJvbmVNYXBbdGltZWxpbmVOYW1lXTtcblx0XHRcdFx0aWYgKHRpbWVsaW5lTmFtZSA9PSBcInJvdGF0ZVwiKSB7XG5cdFx0XHRcdFx0dmFyIHRpbWVsaW5lID0gbmV3IHNwaW5lLlJvdGF0ZVRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHRpbWVsaW5lLmJvbmVJbmRleCA9IGJvbmVJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHRpbWVsaW5lLnNldEZyYW1lKGZyYW1lSW5kZXgsIHZhbHVlTWFwW1widGltZVwiXSwgdmFsdWVNYXBbXCJhbmdsZVwiXSk7XG5cdFx0XHRcdFx0XHRzcGluZS5Ta2VsZXRvbkpzb24ucmVhZEN1cnZlKHRpbWVsaW5lLCBmcmFtZUluZGV4LCB2YWx1ZU1hcCk7XG5cdFx0XHRcdFx0XHRmcmFtZUluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcblx0XHRcdFx0XHRkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aW1lbGluZS5mcmFtZXNbdGltZWxpbmUuZ2V0RnJhbWVDb3VudCgpICogMiAtIDJdKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKHRpbWVsaW5lTmFtZSA9PSBcInRyYW5zbGF0ZVwiIHx8IHRpbWVsaW5lTmFtZSA9PSBcInNjYWxlXCIpIHtcblx0XHRcdFx0XHR2YXIgdGltZWxpbmU7XG5cdFx0XHRcdFx0dmFyIHRpbWVsaW5lU2NhbGUgPSAxO1xuXHRcdFx0XHRcdGlmICh0aW1lbGluZU5hbWUgPT0gXCJzY2FsZVwiKVxuXHRcdFx0XHRcdFx0dGltZWxpbmUgPSBuZXcgc3BpbmUuU2NhbGVUaW1lbGluZSh2YWx1ZXMubGVuZ3RoKTtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRpbWVsaW5lID0gbmV3IHNwaW5lLlRyYW5zbGF0ZVRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0dGltZWxpbmVTY2FsZSA9IHRoaXMuc2NhbGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lLmJvbmVJbmRleCA9IGJvbmVJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHZhciB4ID0gKHZhbHVlTWFwW1wieFwiXSB8fCAwKSAqIHRpbWVsaW5lU2NhbGU7XG5cdFx0XHRcdFx0XHR2YXIgeSA9ICh2YWx1ZU1hcFtcInlcIl0gfHwgMCkgKiB0aW1lbGluZVNjYWxlO1xuXHRcdFx0XHRcdFx0dGltZWxpbmUuc2V0RnJhbWUoZnJhbWVJbmRleCwgdmFsdWVNYXBbXCJ0aW1lXCJdLCB4LCB5KTtcblx0XHRcdFx0XHRcdHNwaW5lLlNrZWxldG9uSnNvbi5yZWFkQ3VydmUodGltZWxpbmUsIGZyYW1lSW5kZXgsIHZhbHVlTWFwKTtcblx0XHRcdFx0XHRcdGZyYW1lSW5kZXgrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGltZWxpbmVzLnB1c2godGltZWxpbmUpO1xuXHRcdFx0XHRcdGR1cmF0aW9uID0gTWF0aC5tYXgoZHVyYXRpb24sIHRpbWVsaW5lLmZyYW1lc1t0aW1lbGluZS5nZXRGcmFtZUNvdW50KCkgKiAzIC0gM10pO1xuXG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHRocm93IFwiSW52YWxpZCB0aW1lbGluZSB0eXBlIGZvciBhIGJvbmU6IFwiICsgdGltZWxpbmVOYW1lICsgXCIgKFwiICsgYm9uZU5hbWUgKyBcIilcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIHNsb3RzID0gbWFwW1wic2xvdHNcIl07XG5cdFx0Zm9yICh2YXIgc2xvdE5hbWUgaW4gc2xvdHMpIHtcblx0XHRcdGlmICghc2xvdHMuaGFzT3duUHJvcGVydHkoc2xvdE5hbWUpKSBjb250aW51ZTtcblx0XHRcdHZhciBzbG90TWFwID0gc2xvdHNbc2xvdE5hbWVdO1xuXHRcdFx0dmFyIHNsb3RJbmRleCA9IHNrZWxldG9uRGF0YS5maW5kU2xvdEluZGV4KHNsb3ROYW1lKTtcblxuXHRcdFx0Zm9yICh2YXIgdGltZWxpbmVOYW1lIGluIHNsb3RNYXApIHtcblx0XHRcdFx0aWYgKCFzbG90TWFwLmhhc093blByb3BlcnR5KHRpbWVsaW5lTmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0XHR2YXIgdmFsdWVzID0gc2xvdE1hcFt0aW1lbGluZU5hbWVdO1xuXHRcdFx0XHRpZiAodGltZWxpbmVOYW1lID09IFwiY29sb3JcIikge1xuXHRcdFx0XHRcdHZhciB0aW1lbGluZSA9IG5ldyBzcGluZS5Db2xvclRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHRpbWVsaW5lLnNsb3RJbmRleCA9IHNsb3RJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHZhciBjb2xvciA9IHZhbHVlTWFwW1wiY29sb3JcIl07XG5cdFx0XHRcdFx0XHR2YXIgciA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAwKTtcblx0XHRcdFx0XHRcdHZhciBnID0gc3BpbmUuU2tlbGV0b25Kc29uLnRvQ29sb3IoY29sb3IsIDEpO1xuXHRcdFx0XHRcdFx0dmFyIGIgPSBzcGluZS5Ta2VsZXRvbkpzb24udG9Db2xvcihjb2xvciwgMik7XG5cdFx0XHRcdFx0XHR2YXIgYSA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAzKTtcblx0XHRcdFx0XHRcdHRpbWVsaW5lLnNldEZyYW1lKGZyYW1lSW5kZXgsIHZhbHVlTWFwW1widGltZVwiXSwgciwgZywgYiwgYSk7XG5cdFx0XHRcdFx0XHRzcGluZS5Ta2VsZXRvbkpzb24ucmVhZEN1cnZlKHRpbWVsaW5lLCBmcmFtZUluZGV4LCB2YWx1ZU1hcCk7XG5cdFx0XHRcdFx0XHRmcmFtZUluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcblx0XHRcdFx0XHRkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aW1lbGluZS5mcmFtZXNbdGltZWxpbmUuZ2V0RnJhbWVDb3VudCgpICogNSAtIDVdKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKHRpbWVsaW5lTmFtZSA9PSBcImF0dGFjaG1lbnRcIikge1xuXHRcdFx0XHRcdHZhciB0aW1lbGluZSA9IG5ldyBzcGluZS5BdHRhY2htZW50VGltZWxpbmUodmFsdWVzLmxlbmd0aCk7XG5cdFx0XHRcdFx0dGltZWxpbmUuc2xvdEluZGV4ID0gc2xvdEluZGV4O1xuXG5cdFx0XHRcdFx0dmFyIGZyYW1lSW5kZXggPSAwO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBuID0gdmFsdWVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIHZhbHVlTWFwID0gdmFsdWVzW2ldO1xuXHRcdFx0XHRcdFx0dGltZWxpbmUuc2V0RnJhbWUoZnJhbWVJbmRleCsrLCB2YWx1ZU1hcFtcInRpbWVcIl0sIHZhbHVlTWFwW1wibmFtZVwiXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gTWF0aC5tYXgoZHVyYXRpb24sIHRpbWVsaW5lLmZyYW1lc1t0aW1lbGluZS5nZXRGcmFtZUNvdW50KCkgLSAxXSk7XG5cblx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0dGhyb3cgXCJJbnZhbGlkIHRpbWVsaW5lIHR5cGUgZm9yIGEgc2xvdDogXCIgKyB0aW1lbGluZU5hbWUgKyBcIiAoXCIgKyBzbG90TmFtZSArIFwiKVwiO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRza2VsZXRvbkRhdGEuYW5pbWF0aW9ucy5wdXNoKG5ldyBzcGluZS5BbmltYXRpb24obmFtZSwgdGltZWxpbmVzLCBkdXJhdGlvbikpO1xuXHR9XG59O1xuc3BpbmUuU2tlbGV0b25Kc29uLnJlYWRDdXJ2ZSA9IGZ1bmN0aW9uICh0aW1lbGluZSwgZnJhbWVJbmRleCwgdmFsdWVNYXApIHtcblx0dmFyIGN1cnZlID0gdmFsdWVNYXBbXCJjdXJ2ZVwiXTtcblx0aWYgKCFjdXJ2ZSkgcmV0dXJuO1xuXHRpZiAoY3VydmUgPT0gXCJzdGVwcGVkXCIpXG5cdFx0dGltZWxpbmUuY3VydmVzLnNldFN0ZXBwZWQoZnJhbWVJbmRleCk7XG5cdGVsc2UgaWYgKGN1cnZlIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0dGltZWxpbmUuY3VydmVzLnNldEN1cnZlKGZyYW1lSW5kZXgsIGN1cnZlWzBdLCBjdXJ2ZVsxXSwgY3VydmVbMl0sIGN1cnZlWzNdKTtcbn07XG5zcGluZS5Ta2VsZXRvbkpzb24udG9Db2xvciA9IGZ1bmN0aW9uIChoZXhTdHJpbmcsIGNvbG9ySW5kZXgpIHtcblx0aWYgKGhleFN0cmluZy5sZW5ndGggIT0gOCkgdGhyb3cgXCJDb2xvciBoZXhpZGVjaW1hbCBsZW5ndGggbXVzdCBiZSA4LCByZWNpZXZlZDogXCIgKyBoZXhTdHJpbmc7XG5cdHJldHVybiBwYXJzZUludChoZXhTdHJpbmcuc3Vic3RyaW5nKGNvbG9ySW5kZXggKiAyLCAyKSwgMTYpIC8gMjU1O1xufTtcblxuc3BpbmUuQXRsYXMgPSBmdW5jdGlvbiAoYXRsYXNUZXh0LCB0ZXh0dXJlTG9hZGVyKSB7XG5cdHRoaXMudGV4dHVyZUxvYWRlciA9IHRleHR1cmVMb2FkZXI7XG5cdHRoaXMucGFnZXMgPSBbXTtcblx0dGhpcy5yZWdpb25zID0gW107XG5cblx0dmFyIHJlYWRlciA9IG5ldyBzcGluZS5BdGxhc1JlYWRlcihhdGxhc1RleHQpO1xuXHR2YXIgdHVwbGUgPSBbXTtcblx0dHVwbGUubGVuZ3RoID0gNDtcblx0dmFyIHBhZ2UgPSBudWxsO1xuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdHZhciBsaW5lID0gcmVhZGVyLnJlYWRMaW5lKCk7XG5cdFx0aWYgKGxpbmUgPT0gbnVsbCkgYnJlYWs7XG5cdFx0bGluZSA9IHJlYWRlci50cmltKGxpbmUpO1xuXHRcdGlmIChsaW5lLmxlbmd0aCA9PSAwKVxuXHRcdFx0cGFnZSA9IG51bGw7XG5cdFx0ZWxzZSBpZiAoIXBhZ2UpIHtcblx0XHRcdHBhZ2UgPSBuZXcgc3BpbmUuQXRsYXNQYWdlKCk7XG5cdFx0XHRwYWdlLm5hbWUgPSBsaW5lO1xuXG5cdFx0XHRwYWdlLmZvcm1hdCA9IHNwaW5lLkF0bGFzLkZvcm1hdFtyZWFkZXIucmVhZFZhbHVlKCldO1xuXG5cdFx0XHRyZWFkZXIucmVhZFR1cGxlKHR1cGxlKTtcblx0XHRcdHBhZ2UubWluRmlsdGVyID0gc3BpbmUuQXRsYXMuVGV4dHVyZUZpbHRlclt0dXBsZVswXV07XG5cdFx0XHRwYWdlLm1hZ0ZpbHRlciA9IHNwaW5lLkF0bGFzLlRleHR1cmVGaWx0ZXJbdHVwbGVbMV1dO1xuXG5cdFx0XHR2YXIgZGlyZWN0aW9uID0gcmVhZGVyLnJlYWRWYWx1ZSgpO1xuXHRcdFx0cGFnZS51V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLmNsYW1wVG9FZGdlO1xuXHRcdFx0cGFnZS52V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLmNsYW1wVG9FZGdlO1xuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PSBcInhcIilcblx0XHRcdFx0cGFnZS51V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLnJlcGVhdDtcblx0XHRcdGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInlcIilcblx0XHRcdFx0cGFnZS52V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLnJlcGVhdDtcblx0XHRcdGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInh5XCIpXG5cdFx0XHRcdHBhZ2UudVdyYXAgPSBwYWdlLnZXcmFwID0gc3BpbmUuQXRsYXMuVGV4dHVyZVdyYXAucmVwZWF0O1xuXG5cdFx0XHR0ZXh0dXJlTG9hZGVyLmxvYWQocGFnZSwgbGluZSk7XG5cblx0XHRcdHRoaXMucGFnZXMucHVzaChwYWdlKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcmVnaW9uID0gbmV3IHNwaW5lLkF0bGFzUmVnaW9uKCk7XG5cdFx0XHRyZWdpb24ubmFtZSA9IGxpbmU7XG5cdFx0XHRyZWdpb24ucGFnZSA9IHBhZ2U7XG5cblx0XHRcdHJlZ2lvbi5yb3RhdGUgPSByZWFkZXIucmVhZFZhbHVlKCkgPT0gXCJ0cnVlXCI7XG5cblx0XHRcdHJlYWRlci5yZWFkVHVwbGUodHVwbGUpO1xuXHRcdFx0dmFyIHggPSBwYXJzZUludCh0dXBsZVswXSk7XG5cdFx0XHR2YXIgeSA9IHBhcnNlSW50KHR1cGxlWzFdKTtcblxuXHRcdFx0cmVhZGVyLnJlYWRUdXBsZSh0dXBsZSk7XG5cdFx0XHR2YXIgd2lkdGggPSBwYXJzZUludCh0dXBsZVswXSk7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gcGFyc2VJbnQodHVwbGVbMV0pO1xuXG5cdFx0XHRyZWdpb24udSA9IHggLyBwYWdlLndpZHRoO1xuXHRcdFx0cmVnaW9uLnYgPSB5IC8gcGFnZS5oZWlnaHQ7XG5cdFx0XHRpZiAocmVnaW9uLnJvdGF0ZSkge1xuXHRcdFx0XHRyZWdpb24udTIgPSAoeCArIGhlaWdodCkgLyBwYWdlLndpZHRoO1xuXHRcdFx0XHRyZWdpb24udjIgPSAoeSArIHdpZHRoKSAvIHBhZ2UuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVnaW9uLnUyID0gKHggKyB3aWR0aCkgLyBwYWdlLndpZHRoO1xuXHRcdFx0XHRyZWdpb24udjIgPSAoeSArIGhlaWdodCkgLyBwYWdlLmhlaWdodDtcblx0XHRcdH1cblx0XHRcdHJlZ2lvbi54ID0geDtcblx0XHRcdHJlZ2lvbi55ID0geTtcblx0XHRcdHJlZ2lvbi53aWR0aCA9IE1hdGguYWJzKHdpZHRoKTtcblx0XHRcdHJlZ2lvbi5oZWlnaHQgPSBNYXRoLmFicyhoZWlnaHQpO1xuXG5cdFx0XHRpZiAocmVhZGVyLnJlYWRUdXBsZSh0dXBsZSkgPT0gNCkgeyAvLyBzcGxpdCBpcyBvcHRpb25hbFxuXHRcdFx0XHRyZWdpb24uc3BsaXRzID0gW3BhcnNlSW50KHR1cGxlWzBdKSwgcGFyc2VJbnQodHVwbGVbMV0pLCBwYXJzZUludCh0dXBsZVsyXSksIHBhcnNlSW50KHR1cGxlWzNdKV07XG5cblx0XHRcdFx0aWYgKHJlYWRlci5yZWFkVHVwbGUodHVwbGUpID09IDQpIHsgLy8gcGFkIGlzIG9wdGlvbmFsLCBidXQgb25seSBwcmVzZW50IHdpdGggc3BsaXRzXG5cdFx0XHRcdFx0cmVnaW9uLnBhZHMgPSBbcGFyc2VJbnQodHVwbGVbMF0pLCBwYXJzZUludCh0dXBsZVsxXSksIHBhcnNlSW50KHR1cGxlWzJdKSwgcGFyc2VJbnQodHVwbGVbM10pXTtcblxuXHRcdFx0XHRcdHJlYWRlci5yZWFkVHVwbGUodHVwbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJlZ2lvbi5vcmlnaW5hbFdpZHRoID0gcGFyc2VJbnQodHVwbGVbMF0pO1xuXHRcdFx0cmVnaW9uLm9yaWdpbmFsSGVpZ2h0ID0gcGFyc2VJbnQodHVwbGVbMV0pO1xuXG5cdFx0XHRyZWFkZXIucmVhZFR1cGxlKHR1cGxlKTtcblx0XHRcdHJlZ2lvbi5vZmZzZXRYID0gcGFyc2VJbnQodHVwbGVbMF0pO1xuXHRcdFx0cmVnaW9uLm9mZnNldFkgPSBwYXJzZUludCh0dXBsZVsxXSk7XG5cblx0XHRcdHJlZ2lvbi5pbmRleCA9IHBhcnNlSW50KHJlYWRlci5yZWFkVmFsdWUoKSk7XG5cblx0XHRcdHRoaXMucmVnaW9ucy5wdXNoKHJlZ2lvbik7XG5cdFx0fVxuXHR9XG59O1xuc3BpbmUuQXRsYXMucHJvdG90eXBlID0ge1xuXHRmaW5kUmVnaW9uOiBmdW5jdGlvbiAobmFtZSkge1xuXHRcdHZhciByZWdpb25zID0gdGhpcy5yZWdpb25zO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gcmVnaW9ucy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAocmVnaW9uc1tpXS5uYW1lID09IG5hbWUpIHJldHVybiByZWdpb25zW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHRkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHBhZ2VzID0gdGhpcy5wYWdlcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHBhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdHRoaXMudGV4dHVyZUxvYWRlci51bmxvYWQocGFnZXNbaV0ucmVuZGVyZXJPYmplY3QpO1xuXHR9LFxuXHR1cGRhdGVVVnM6IGZ1bmN0aW9uIChwYWdlKSB7XG5cdFx0dmFyIHJlZ2lvbnMgPSB0aGlzLnJlZ2lvbnM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSByZWdpb25zLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0dmFyIHJlZ2lvbiA9IHJlZ2lvbnNbaV07XG5cdFx0XHRpZiAocmVnaW9uLnBhZ2UgIT0gcGFnZSkgY29udGludWU7XG5cdFx0XHRyZWdpb24udSA9IHJlZ2lvbi54IC8gcGFnZS53aWR0aDtcblx0XHRcdHJlZ2lvbi52ID0gcmVnaW9uLnkgLyBwYWdlLmhlaWdodDtcblx0XHRcdGlmIChyZWdpb24ucm90YXRlKSB7XG5cdFx0XHRcdHJlZ2lvbi51MiA9IChyZWdpb24ueCArIHJlZ2lvbi5oZWlnaHQpIC8gcGFnZS53aWR0aDtcblx0XHRcdFx0cmVnaW9uLnYyID0gKHJlZ2lvbi55ICsgcmVnaW9uLndpZHRoKSAvIHBhZ2UuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVnaW9uLnUyID0gKHJlZ2lvbi54ICsgcmVnaW9uLndpZHRoKSAvIHBhZ2Uud2lkdGg7XG5cdFx0XHRcdHJlZ2lvbi52MiA9IChyZWdpb24ueSArIHJlZ2lvbi5oZWlnaHQpIC8gcGFnZS5oZWlnaHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5zcGluZS5BdGxhcy5Gb3JtYXQgPSB7XG5cdGFscGhhOiAwLFxuXHRpbnRlbnNpdHk6IDEsXG5cdGx1bWluYW5jZUFscGhhOiAyLFxuXHRyZ2I1NjU6IDMsXG5cdHJnYmE0NDQ0OiA0LFxuXHRyZ2I4ODg6IDUsXG5cdHJnYmE4ODg4OiA2XG59O1xuXG5zcGluZS5BdGxhcy5UZXh0dXJlRmlsdGVyID0ge1xuXHRuZWFyZXN0OiAwLFxuXHRsaW5lYXI6IDEsXG5cdG1pcE1hcDogMixcblx0bWlwTWFwTmVhcmVzdE5lYXJlc3Q6IDMsXG5cdG1pcE1hcExpbmVhck5lYXJlc3Q6IDQsXG5cdG1pcE1hcE5lYXJlc3RMaW5lYXI6IDUsXG5cdG1pcE1hcExpbmVhckxpbmVhcjogNlxufTtcblxuc3BpbmUuQXRsYXMuVGV4dHVyZVdyYXAgPSB7XG5cdG1pcnJvcmVkUmVwZWF0OiAwLFxuXHRjbGFtcFRvRWRnZTogMSxcblx0cmVwZWF0OiAyXG59O1xuXG5zcGluZS5BdGxhc1BhZ2UgPSBmdW5jdGlvbiAoKSB7fTtcbnNwaW5lLkF0bGFzUGFnZS5wcm90b3R5cGUgPSB7XG5cdG5hbWU6IG51bGwsXG5cdGZvcm1hdDogbnVsbCxcblx0bWluRmlsdGVyOiBudWxsLFxuXHRtYWdGaWx0ZXI6IG51bGwsXG5cdHVXcmFwOiBudWxsLFxuXHR2V3JhcDogbnVsbCxcblx0cmVuZGVyZXJPYmplY3Q6IG51bGwsXG5cdHdpZHRoOiAwLFxuXHRoZWlnaHQ6IDBcbn07XG5cbnNwaW5lLkF0bGFzUmVnaW9uID0gZnVuY3Rpb24gKCkge307XG5zcGluZS5BdGxhc1JlZ2lvbi5wcm90b3R5cGUgPSB7XG5cdHBhZ2U6IG51bGwsXG5cdG5hbWU6IG51bGwsXG5cdHg6IDAsIHk6IDAsXG5cdHdpZHRoOiAwLCBoZWlnaHQ6IDAsXG5cdHU6IDAsIHY6IDAsIHUyOiAwLCB2MjogMCxcblx0b2Zmc2V0WDogMCwgb2Zmc2V0WTogMCxcblx0b3JpZ2luYWxXaWR0aDogMCwgb3JpZ2luYWxIZWlnaHQ6IDAsXG5cdGluZGV4OiAwLFxuXHRyb3RhdGU6IGZhbHNlLFxuXHRzcGxpdHM6IG51bGwsXG5cdHBhZHM6IG51bGwsXG59O1xuXG5zcGluZS5BdGxhc1JlYWRlciA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdHRoaXMubGluZXMgPSB0ZXh0LnNwbGl0KC9cXHJcXG58XFxyfFxcbi8pO1xufTtcbnNwaW5lLkF0bGFzUmVhZGVyLnByb3RvdHlwZSA9IHtcblx0aW5kZXg6IDAsXG5cdHRyaW06IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTtcblx0fSxcblx0cmVhZExpbmU6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodGhpcy5pbmRleCA+PSB0aGlzLmxpbmVzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHRoaXMubGluZXNbdGhpcy5pbmRleCsrXTtcblx0fSxcblx0cmVhZFZhbHVlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGxpbmUgPSB0aGlzLnJlYWRMaW5lKCk7XG5cdFx0dmFyIGNvbG9uID0gbGluZS5pbmRleE9mKFwiOlwiKTtcblx0XHRpZiAoY29sb24gPT0gLTEpIHRocm93IFwiSW52YWxpZCBsaW5lOiBcIiArIGxpbmU7XG5cdFx0cmV0dXJuIHRoaXMudHJpbShsaW5lLnN1YnN0cmluZyhjb2xvbiArIDEpKTtcblx0fSxcblx0LyoqIFJldHVybnMgdGhlIG51bWJlciBvZiB0dXBsZSB2YWx1ZXMgcmVhZCAoMiBvciA0KS4gKi9cblx0cmVhZFR1cGxlOiBmdW5jdGlvbiAodHVwbGUpIHtcblx0XHR2YXIgbGluZSA9IHRoaXMucmVhZExpbmUoKTtcblx0XHR2YXIgY29sb24gPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdGlmIChjb2xvbiA9PSAtMSkgdGhyb3cgXCJJbnZhbGlkIGxpbmU6IFwiICsgbGluZTtcblx0XHR2YXIgaSA9IDAsIGxhc3RNYXRjaD0gY29sb24gKyAxO1xuXHRcdGZvciAoOyBpIDwgMzsgaSsrKSB7XG5cdFx0XHR2YXIgY29tbWEgPSBsaW5lLmluZGV4T2YoXCIsXCIsIGxhc3RNYXRjaCk7XG5cdFx0XHRpZiAoY29tbWEgPT0gLTEpIHtcblx0XHRcdFx0aWYgKGkgPT0gMCkgdGhyb3cgXCJJbnZhbGlkIGxpbmU6IFwiICsgbGluZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHR0dXBsZVtpXSA9IHRoaXMudHJpbShsaW5lLnN1YnN0cihsYXN0TWF0Y2gsIGNvbW1hIC0gbGFzdE1hdGNoKSk7XG5cdFx0XHRsYXN0TWF0Y2ggPSBjb21tYSArIDE7XG5cdFx0fVxuXHRcdHR1cGxlW2ldID0gdGhpcy50cmltKGxpbmUuc3Vic3RyaW5nKGxhc3RNYXRjaCkpO1xuXHRcdHJldHVybiBpICsgMTtcblx0fVxufVxuXG5zcGluZS5BdGxhc0F0dGFjaG1lbnRMb2FkZXIgPSBmdW5jdGlvbiAoYXRsYXMpIHtcblx0dGhpcy5hdGxhcyA9IGF0bGFzO1xufVxuc3BpbmUuQXRsYXNBdHRhY2htZW50TG9hZGVyLnByb3RvdHlwZSA9IHtcblx0bmV3QXR0YWNobWVudDogZnVuY3Rpb24gKHNraW4sIHR5cGUsIG5hbWUpIHtcblx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlIHNwaW5lLkF0dGFjaG1lbnRUeXBlLnJlZ2lvbjpcblx0XHRcdHZhciByZWdpb24gPSB0aGlzLmF0bGFzLmZpbmRSZWdpb24obmFtZSk7XG5cdFx0XHRpZiAoIXJlZ2lvbikgdGhyb3cgXCJSZWdpb24gbm90IGZvdW5kIGluIGF0bGFzOiBcIiArIG5hbWUgKyBcIiAoXCIgKyB0eXBlICsgXCIpXCI7XG5cdFx0XHR2YXIgYXR0YWNobWVudCA9IG5ldyBzcGluZS5SZWdpb25BdHRhY2htZW50KG5hbWUpO1xuXHRcdFx0YXR0YWNobWVudC5yZW5kZXJlck9iamVjdCA9IHJlZ2lvbjtcblx0XHRcdGF0dGFjaG1lbnQuc2V0VVZzKHJlZ2lvbi51LCByZWdpb24udiwgcmVnaW9uLnUyLCByZWdpb24udjIsIHJlZ2lvbi5yb3RhdGUpO1xuXHRcdFx0YXR0YWNobWVudC5yZWdpb25PZmZzZXRYID0gcmVnaW9uLm9mZnNldFg7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbk9mZnNldFkgPSByZWdpb24ub2Zmc2V0WTtcblx0XHRcdGF0dGFjaG1lbnQucmVnaW9uV2lkdGggPSByZWdpb24ud2lkdGg7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbkhlaWdodCA9IHJlZ2lvbi5oZWlnaHQ7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbk9yaWdpbmFsV2lkdGggPSByZWdpb24ub3JpZ2luYWxXaWR0aDtcblx0XHRcdGF0dGFjaG1lbnQucmVnaW9uT3JpZ2luYWxIZWlnaHQgPSByZWdpb24ub3JpZ2luYWxIZWlnaHQ7XG5cdFx0XHRyZXR1cm4gYXR0YWNobWVudDtcblx0XHR9XG5cdFx0dGhyb3cgXCJVbmtub3duIGF0dGFjaG1lbnQgdHlwZTogXCIgKyB0eXBlO1xuXHR9XG59XG5cblBJWEkuQW5pbUNhY2hlID0ge307XG5zcGluZS5Cb25lLnlEb3duID0gdHJ1ZTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBvYmplY3QgaXMgb25lIHRoYXQgd2lsbCBhbGxvdyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gcmVuZGVyaW5nIGZ1bmN0aW9ucyBiYXNlZCBvbiByZW5kZXIgdHlwZVxuICpcbiAqIEBjbGFzcyBDdXN0b21SZW5kZXJhYmxlXG4gKiBAZXh0ZW5kcyBEaXNwbGF5T2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUElYSS5DdXN0b21SZW5kZXJhYmxlID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3QuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5yZW5kZXJhYmxlID0gdHJ1ZTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlICk7XG5QSVhJLkN1c3RvbVJlbmRlcmFibGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5DdXN0b21SZW5kZXJhYmxlO1xuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgQ2FudmFzUmVuZGVyZXIgaXQgd2lsbCBjYWxsIHRoaXMgY2FsbGJhY2tcbiAqXG4gKiBAbWV0aG9kIHJlbmRlckNhbnZhc1xuICogQHBhcmFtIHJlbmRlcmVyIHtDYW52YXNSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUucmVuZGVyQ2FudmFzID0gZnVuY3Rpb24ocmVuZGVyZXIpXG57XG5cdC8vIG92ZXJyaWRlIVxufVxuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgV2ViR0xSZW5kZXJlciBpdCB3aWxsIGNhbGwgdGhpcyBjYWxsYmFjayB0byBpbml0aWFsaXplXG4gKlxuICogQG1ldGhvZCBpbml0V2ViR0xcbiAqIEBwYXJhbSByZW5kZXJlciB7V2ViR0xSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUuaW5pdFdlYkdMID0gZnVuY3Rpb24ocmVuZGVyZXIpXG57XG5cdC8vIG92ZXJyaWRlIVxufVxuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgV2ViR0xSZW5kZXJlciBpdCB3aWxsIGNhbGwgdGhpcyBjYWxsYmFja1xuICpcbiAqIEBtZXRob2QgcmVuZGVyV2ViR0xcbiAqIEBwYXJhbSByZW5kZXJlciB7V2ViR0xSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUucmVuZGVyV2ViR0wgPSBmdW5jdGlvbihyZW5kZXJHcm91cCwgcHJvamVjdGlvbk1hdHJpeClcbntcblx0Ly8gbm90IHN1cmUgaWYgYm90aCBuZWVkZWQ/IGJ1dCB5YSBoYXZlIGZvciBub3chXG5cdC8vIG92ZXJyaWRlIVxufVxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuUElYSS5CYXNlVGV4dHVyZUNhY2hlID0ge307XG5QSVhJLnRleHR1cmVzVG9VcGRhdGUgPSBbXTtcblBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcblxuLyoqXG4gKiBBIHRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UuIEFsbCB0ZXh0dXJlcyBoYXZlIGEgYmFzZSB0ZXh0dXJlXG4gKlxuICogQGNsYXNzIEJhc2VUZXh0dXJlXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gc291cmNlIHtTdHJpbmd9IHRoZSBzb3VyY2Ugb2JqZWN0IChpbWFnZSBvciBjYW52YXMpXG4gKi9cblBJWEkuQmFzZVRleHR1cmUgPSBmdW5jdGlvbihzb3VyY2UpXG57XG5cdFBJWEkuRXZlbnRUYXJnZXQuY2FsbCggdGhpcyApO1xuXG5cdC8qKlxuXHQgKiBbcmVhZC1vbmx5XSBUaGUgd2lkdGggb2YgdGhlIGJhc2UgdGV4dHVyZSBzZXQgd2hlbiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgd2lkdGhcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy53aWR0aCA9IDEwMDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIGhlaWdodCBvZiB0aGUgYmFzZSB0ZXh0dXJlIHNldCB3aGVuIHRoZSBpbWFnZSBoYXMgbG9hZGVkXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy5oZWlnaHQgPSAxMDA7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIERlc2NyaWJlcyBpZiB0aGUgYmFzZSB0ZXh0dXJlIGhhcyBsb2FkZWQgb3Igbm90XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoYXNMb2FkZWRcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuaGFzTG9hZGVkID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFRoZSBzb3VyY2UgdGhhdCBpcyBsb2FkZWQgdG8gY3JlYXRlIHRoZSB0ZXh0dXJlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzb3VyY2Vcblx0ICogQHR5cGUgSW1hZ2Vcblx0ICovXG5cdHRoaXMuc291cmNlID0gc291cmNlO1xuXG5cdGlmKCFzb3VyY2UpcmV0dXJuO1xuXG5cdGlmKHRoaXMuc291cmNlIGluc3RhbmNlb2YgSW1hZ2UgfHwgdGhpcy5zb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KVxuXHR7XG5cdFx0aWYodGhpcy5zb3VyY2UuY29tcGxldGUpXG5cdFx0e1xuXHRcdFx0dGhpcy5oYXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy53aWR0aCA9IHRoaXMuc291cmNlLndpZHRoO1xuXHRcdFx0dGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG5cblx0XHRcdFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHRoaXMpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdFx0dGhpcy5zb3VyY2Uub25sb2FkID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0XHRzY29wZS5oYXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0XHRzY29wZS53aWR0aCA9IHNjb3BlLnNvdXJjZS53aWR0aDtcblx0XHRcdFx0c2NvcGUuaGVpZ2h0ID0gc2NvcGUuc291cmNlLmhlaWdodDtcblxuXHRcdFx0XHQvLyBhZGQgaXQgdG8gc29tZXdoZXJlLi4uXG5cdFx0XHRcdFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHNjb3BlKTtcblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnbG9hZGVkJywgY29udGVudDogc2NvcGUgfSApO1xuXHRcdFx0fVxuXHRcdFx0Ly9cdHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG5cdFx0fVxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMuaGFzTG9hZGVkID0gdHJ1ZTtcblx0XHR0aGlzLndpZHRoID0gdGhpcy5zb3VyY2Uud2lkdGg7XG5cdFx0dGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG5cblx0XHRQSVhJLnRleHR1cmVzVG9VcGRhdGUucHVzaCh0aGlzKTtcblx0fVxuXG5cdHRoaXMuX3Bvd2VyT2YyID0gZmFsc2U7XG59XG5cblBJWEkuQmFzZVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5CYXNlVGV4dHVyZTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGlzIGJhc2UgdGV4dHVyZVxuICpcbiAqIEBtZXRob2QgZGVzdHJveVxuICovXG5QSVhJLkJhc2VUZXh0dXJlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKVxue1xuXHRpZih0aGlzLnNvdXJjZSBpbnN0YW5jZW9mIEltYWdlKVxuXHR7XG5cdFx0dGhpcy5zb3VyY2Uuc3JjID0gbnVsbDtcblx0fVxuXHR0aGlzLnNvdXJjZSA9IG51bGw7XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kucHVzaCh0aGlzKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYmFzZSB0ZXh0dXJlIGJhc2VkIG9uIGFuIGltYWdlIHVybFxuICogSWYgdGhlIGltYWdlIGlzIG5vdCBpbiB0aGUgYmFzZSB0ZXh0dXJlIGNhY2hlIGl0IHdpbGwgYmUgIGNyZWF0ZWQgYW5kIGxvYWRlZFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZnJvbUltYWdlXG4gKiBAcGFyYW0gaW1hZ2VVcmwge1N0cmluZ30gVGhlIGltYWdlIHVybCBvZiB0aGUgdGV4dHVyZVxuICogQHJldHVybiBCYXNlVGV4dHVyZVxuICovXG5QSVhJLkJhc2VUZXh0dXJlLmZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlVXJsLCBjcm9zc29yaWdpbilcbntcblx0dmFyIGJhc2VUZXh0dXJlID0gUElYSS5CYXNlVGV4dHVyZUNhY2hlW2ltYWdlVXJsXTtcblx0aWYoIWJhc2VUZXh0dXJlKVxuXHR7XG5cdFx0Ly8gbmV3IEltYWdlKCkgYnJlYWtzIHRleCBsb2FkaW5nIGluIHNvbWUgdmVyc2lvbnMgb2YgQ2hyb21lLlxuXHRcdC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjM4MDcxXG5cdFx0dmFyIGltYWdlID0gbmV3IEltYWdlKCk7Ly9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0XHRpZiAoY3Jvc3NvcmlnaW4pXG5cdFx0e1xuXHRcdFx0aW1hZ2UuY3Jvc3NPcmlnaW4gPSAnJztcblx0XHR9XG5cdFx0aW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG5cdFx0YmFzZVRleHR1cmUgPSBuZXcgUElYSS5CYXNlVGV4dHVyZShpbWFnZSk7XG5cdFx0UElYSS5CYXNlVGV4dHVyZUNhY2hlW2ltYWdlVXJsXSA9IGJhc2VUZXh0dXJlO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VUZXh0dXJlO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblBJWEkuVGV4dHVyZUNhY2hlID0ge307XG5QSVhJLkZyYW1lQ2FjaGUgPSB7fTtcblxuLyoqXG4gKiBBIHRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2Ugb3IgcGFydCBvZiBhbiBpbWFnZS4gSXQgY2Fubm90IGJlIGFkZGVkXG4gKiB0byB0aGUgZGlzcGxheSBsaXN0IGRpcmVjdGx5LiBUbyBkbyB0aGlzIHVzZSBQSVhJLlNwcml0ZS4gSWYgbm8gZnJhbWUgaXMgcHJvdmlkZWQgdGhlbiB0aGUgd2hvbGUgaW1hZ2UgaXMgdXNlZFxuICpcbiAqIEBjbGFzcyBUZXh0dXJlXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gYmFzZVRleHR1cmUge0Jhc2VUZXh0dXJlfSBUaGUgYmFzZSB0ZXh0dXJlIHNvdXJjZSB0byBjcmVhdGUgdGhlIHRleHR1cmUgZnJvbVxuICogQHBhcmFtIGZyYW1lIHtSZWN0YW5nbGV9IFRoZSByZWN0YW5nbGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2hvd1xuICovXG5QSVhJLlRleHR1cmUgPSBmdW5jdGlvbihiYXNlVGV4dHVyZSwgZnJhbWUpXG57XG5cdFBJWEkuRXZlbnRUYXJnZXQuY2FsbCggdGhpcyApO1xuXG5cdGlmKCFmcmFtZSlcblx0e1xuXHRcdHRoaXMubm9GcmFtZSA9IHRydWU7XG5cdFx0ZnJhbWUgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEsMSk7XG5cdH1cblxuXHRpZihiYXNlVGV4dHVyZSBpbnN0YW5jZW9mIFBJWEkuVGV4dHVyZSlcblx0XHRiYXNlVGV4dHVyZSA9IGJhc2VUZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSB0ZXh0dXJlIG9mIHRoaXMgdGV4dHVyZVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmFzZVRleHR1cmVcblx0ICogQHR5cGUgQmFzZVRleHR1cmVcblx0ICovXG5cdHRoaXMuYmFzZVRleHR1cmUgPSBiYXNlVGV4dHVyZTtcblxuXHQvKipcblx0ICogVGhlIGZyYW1lIHNwZWNpZmllcyB0aGUgcmVnaW9uIG9mIHRoZSBiYXNlIHRleHR1cmUgdGhhdCB0aGlzIHRleHR1cmUgdXNlc1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgZnJhbWVcblx0ICogQHR5cGUgUmVjdGFuZ2xlXG5cdCAqL1xuXHR0aGlzLmZyYW1lID0gZnJhbWU7XG5cblx0LyoqXG5cdCAqIFRoZSB0cmltIHBvaW50XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0cmltXG5cdCAqIEB0eXBlIFBvaW50XG5cdCAqL1xuXHR0aGlzLnRyaW0gPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdHRoaXMuc2NvcGUgPSB0aGlzO1xuXG5cdGlmKGJhc2VUZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdGlmKHRoaXMubm9GcmFtZSlmcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsIGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQpO1xuXHRcdC8vY29uc29sZS5sb2coZnJhbWUpXG5cblx0XHR0aGlzLnNldEZyYW1lKGZyYW1lKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdGJhc2VUZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkZWQnLCBmdW5jdGlvbigpeyBzY29wZS5vbkJhc2VUZXh0dXJlTG9hZGVkKCl9ICk7XG5cdH1cbn1cblxuUElYSS5UZXh0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuVGV4dHVyZTtcblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB0aGUgYmFzZSB0ZXh0dXJlIGlzIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25CYXNlVGV4dHVyZUxvYWRlZFxuICogQHBhcmFtIGV2ZW50XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlRleHR1cmUucHJvdG90eXBlLm9uQmFzZVRleHR1cmVMb2FkZWQgPSBmdW5jdGlvbihldmVudClcbntcblx0dmFyIGJhc2VUZXh0dXJlID0gdGhpcy5iYXNlVGV4dHVyZTtcblx0YmFzZVRleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWRlZCcsIHRoaXMub25Mb2FkZWQgKTtcblxuXHRpZih0aGlzLm5vRnJhbWUpdGhpcy5mcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsIGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQpO1xuXHR0aGlzLm5vRnJhbWUgPSBmYWxzZTtcblx0dGhpcy53aWR0aCA9IHRoaXMuZnJhbWUud2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gdGhpcy5mcmFtZS5oZWlnaHQ7XG5cblx0dGhpcy5zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICd1cGRhdGUnLCBjb250ZW50OiB0aGlzIH0gKTtcbn1cblxuLyoqXG4gKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGRlc3Ryb3lcbiAqIEBwYXJhbSBkZXN0cm95QmFzZSB7Qm9vbGVhbn0gV2hldGhlciB0byBkZXN0cm95IHRoZSBiYXNlIHRleHR1cmUgYXMgd2VsbFxuICovXG5QSVhJLlRleHR1cmUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkZXN0cm95QmFzZSlcbntcblx0aWYoZGVzdHJveUJhc2UpdGhpcy5iYXNlVGV4dHVyZS5kZXN0cm95KCk7XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSByZWN0YW5nbGUgcmVnaW9uIG9mIHRoZSBiYXNlVGV4dHVyZVxuICpcbiAqIEBtZXRob2Qgc2V0RnJhbWVcbiAqIEBwYXJhbSBmcmFtZSB7UmVjdGFuZ2xlfSBUaGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2V0IGl0IHRvXG4gKi9cblBJWEkuVGV4dHVyZS5wcm90b3R5cGUuc2V0RnJhbWUgPSBmdW5jdGlvbihmcmFtZSlcbntcblx0dGhpcy5mcmFtZSA9IGZyYW1lO1xuXHR0aGlzLndpZHRoID0gZnJhbWUud2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gZnJhbWUuaGVpZ2h0O1xuXG5cdGlmKGZyYW1lLnggKyBmcmFtZS53aWR0aCA+IHRoaXMuYmFzZVRleHR1cmUud2lkdGggfHwgZnJhbWUueSArIGZyYW1lLmhlaWdodCA+IHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0KVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVGV4dHVyZSBFcnJvcjogZnJhbWUgZG9lcyBub3QgZml0IGluc2lkZSB0aGUgYmFzZSBUZXh0dXJlIGRpbWVuc2lvbnMgXCIgKyB0aGlzKTtcblx0fVxuXG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xuXG5cdFBJWEkuVGV4dHVyZS5mcmFtZVVwZGF0ZXMucHVzaCh0aGlzKTtcblx0Ly90aGlzLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogJ3VwZGF0ZScsIGNvbnRlbnQ6IHRoaXMgfSApO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGFuIGltYWdlIHVybFxuICogSWYgdGhlIGltYWdlIGlzIG5vdCBpbiB0aGUgdGV4dHVyZSBjYWNoZSBpdCB3aWxsIGJlICBjcmVhdGVkIGFuZCBsb2FkZWRcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIGZyb21JbWFnZVxuICogQHBhcmFtIGltYWdlVXJsIHtTdHJpbmd9IFRoZSBpbWFnZSB1cmwgb2YgdGhlIHRleHR1cmVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICogQHJldHVybiBUZXh0dXJlXG4gKi9cblBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UgPSBmdW5jdGlvbihpbWFnZVVybCwgY3Jvc3NvcmlnaW4pXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbaW1hZ2VVcmxdO1xuXG5cdGlmKCF0ZXh0dXJlKVxuXHR7XG5cdFx0dGV4dHVyZSA9IG5ldyBQSVhJLlRleHR1cmUoUElYSS5CYXNlVGV4dHVyZS5mcm9tSW1hZ2UoaW1hZ2VVcmwsIGNyb3Nzb3JpZ2luKSk7XG5cdFx0UElYSS5UZXh0dXJlQ2FjaGVbaW1hZ2VVcmxdID0gdGV4dHVyZTtcblx0fVxuXG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGEgZnJhbWUgaWRcbiAqIElmIHRoZSBmcmFtZSBpZCBpcyBub3QgaW4gdGhlIHRleHR1cmUgY2FjaGUgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIGZyb21GcmFtZVxuICogQHBhcmFtIGZyYW1lSWQge1N0cmluZ30gVGhlIGZyYW1lIGlkIG9mIHRoZSB0ZXh0dXJlXG4gKiBAcmV0dXJuIFRleHR1cmVcbiAqL1xuUElYSS5UZXh0dXJlLmZyb21GcmFtZSA9IGZ1bmN0aW9uKGZyYW1lSWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbZnJhbWVJZF07XG5cdGlmKCF0ZXh0dXJlKXRocm93IG5ldyBFcnJvcihcIlRoZSBmcmFtZUlkICdcIisgZnJhbWVJZCArXCInIGRvZXMgbm90IGV4aXN0IGluIHRoZSB0ZXh0dXJlIGNhY2hlIFwiICsgdGhpcyk7XG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGEgY2FudmFzIGVsZW1lbnRcbiAqIElmIHRoZSBjYW52YXMgaXMgbm90IGluIHRoZSB0ZXh0dXJlIGNhY2hlIGl0IHdpbGwgYmUgIGNyZWF0ZWQgYW5kIGxvYWRlZFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZnJvbUNhbnZhc1xuICogQHBhcmFtIGNhbnZhcyB7Q2FudmFzfSBUaGUgY2FudmFzIGVsZW1lbnQgc291cmNlIG9mIHRoZSB0ZXh0dXJlXG4gKiBAcmV0dXJuIFRleHR1cmVcbiAqL1xuUElYSS5UZXh0dXJlLmZyb21DYW52YXMgPSBmdW5jdGlvbihjYW52YXMpXG57XG5cdHZhclx0YmFzZVRleHR1cmUgPSBuZXcgUElYSS5CYXNlVGV4dHVyZShjYW52YXMpO1xuXHRyZXR1cm4gbmV3IFBJWEkuVGV4dHVyZShiYXNlVGV4dHVyZSk7XG59XG5cblxuLyoqXG4gKiBBZGRzIGEgdGV4dHVyZSB0byB0aGUgdGV4dHVyZUNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgYWRkVGV4dHVyZVRvQ2FjaGVcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfVxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCB0aGF0IHRoZSB0ZXh0dXJlIHdpbGwgYmUgc3RvcmVkIGFnYWluc3QuXG4gKi9cblBJWEkuVGV4dHVyZS5hZGRUZXh0dXJlVG9DYWNoZSA9IGZ1bmN0aW9uKHRleHR1cmUsIGlkKVxue1xuXHRQSVhJLlRleHR1cmVDYWNoZVtpZF0gPSB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIHRleHR1cmUgZnJvbSB0aGUgdGV4dHVyZUNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgcmVtb3ZlVGV4dHVyZUZyb21DYWNoZVxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgdGV4dHVyZSB0byBiZSByZW1vdmVkXG4gKiBAcmV0dXJuIHtUZXh0dXJlfSB0aGUgdGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkXG4gKi9cblBJWEkuVGV4dHVyZS5yZW1vdmVUZXh0dXJlRnJvbUNhY2hlID0gZnVuY3Rpb24oaWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbaWRdXG5cdFBJWEkuVGV4dHVyZUNhY2hlW2lkXSA9IG51bGw7XG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vLyB0aGlzIGlzIG1vcmUgZm9yIHdlYkdMLi4gaXQgY29udGFpbnMgdXBkYXRlZCBmcmFtZXMuLlxuUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcyA9IFtdO1xuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gQSBSZW5kZXJUZXh0dXJlIGlzIGEgc3BlY2lhbCB0ZXh0dXJlIHRoYXQgYWxsb3dzIGFueSBwaXhpIGRpc3BsYXlPYmplY3QgdG8gYmUgcmVuZGVyZWQgdG8gaXQuXG5cbiBfX0hpbnRfXzogQWxsIERpc3BsYXlPYmplY3RzIChleG1wbC4gU3ByaXRlcykgdGhhdCByZW5kZXJzIG9uIFJlbmRlclRleHR1cmUgc2hvdWxkIGJlIHByZWxvYWRlZC4gXG4gT3RoZXJ3aXNlIGJsYWNrIHJlY3RhbmdsZXMgd2lsbCBiZSBkcmF3biBpbnN0ZWFkLiAgXG4gXG4gUmVuZGVyVGV4dHVyZSB0YWtlcyBzbmFwc2hvdCBvZiBEaXNwbGF5T2JqZWN0IHBhc3NlZCB0byByZW5kZXIgbWV0aG9kLiBJZiBEaXNwbGF5T2JqZWN0IGlzIHBhc3NlZCB0byByZW5kZXIgbWV0aG9kLCBwb3NpdGlvbiBhbmQgcm90YXRpb24gb2YgaXQgd2lsbCBiZSBpZ25vcmVkLiBGb3IgZXhhbXBsZTpcbiBcblx0dmFyIHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKDgwMCwgNjAwKTtcblx0dmFyIHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb21JbWFnZShcInNwaW5PYmpfMDEucG5nXCIpO1xuXHRzcHJpdGUucG9zaXRpb24ueCA9IDgwMC8yO1xuXHRzcHJpdGUucG9zaXRpb24ueSA9IDYwMC8yO1xuXHRzcHJpdGUuYW5jaG9yLnggPSAwLjU7XG5cdHNwcml0ZS5hbmNob3IueSA9IDAuNTtcblx0cmVuZGVyVGV4dHVyZS5yZW5kZXIoc3ByaXRlKTtcblxuIFNwcml0ZSBpbiB0aGlzIGNhc2Ugd2lsbCBiZSByZW5kZXJlZCB0byAwLDAgcG9zaXRpb24uIFRvIHJlbmRlciB0aGlzIHNwcml0ZSBhdCBjZW50ZXIgRGlzcGxheU9iamVjdENvbnRhaW5lciBzaG91bGQgYmUgdXNlZDpcblxuXHR2YXIgZG9jID0gbmV3IFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lcigpO1xuXHRkb2MuYWRkQ2hpbGQoc3ByaXRlKTtcblx0cmVuZGVyVGV4dHVyZS5yZW5kZXIoZG9jKTsgIC8vIFJlbmRlcnMgdG8gY2VudGVyIG9mIHJlbmRlclRleHR1cmVcblxuIEBjbGFzcyBSZW5kZXJUZXh0dXJlXG4gQGV4dGVuZHMgVGV4dHVyZVxuIEBjb25zdHJ1Y3RvclxuIEBwYXJhbSB3aWR0aCB7TnVtYmVyfSBUaGUgd2lkdGggb2YgdGhlIHJlbmRlciB0ZXh0dXJlXG4gQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBUaGUgaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZVxuICovXG5QSVhJLlJlbmRlclRleHR1cmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgMTAwO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAxMDA7XG5cblx0dGhpcy5pbmRldGl0eU1hdHJpeCA9IFBJWEkubWF0My5jcmVhdGUoKTtcblxuXHR0aGlzLmZyYW1lID0gbmV3IFBJWEkuUmVjdGFuZ2xlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcdFxuXG5cdGlmKFBJWEkuZ2wpXG5cdHtcblx0XHR0aGlzLmluaXRXZWJHTCgpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMuaW5pdENhbnZhcygpO1xuXHR9XG59XG5cblBJWEkuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLlRleHR1cmUucHJvdG90eXBlICk7XG5QSVhJLlJlbmRlclRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SZW5kZXJUZXh0dXJlO1xuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWJnbCBkYXRhIGZvciB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGluaXRXZWJHTFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5pbml0V2ViR0wgPSBmdW5jdGlvbigpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdHRoaXMuZ2xGcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG5cbiAgIFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmdsRnJhbWVidWZmZXIgKTtcblxuICAgIHRoaXMuZ2xGcmFtZWJ1ZmZlci53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5nbEZyYW1lYnVmZmVyLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1x0XG5cblx0dGhpcy5iYXNlVGV4dHVyZSA9IG5ldyBQSVhJLkJhc2VUZXh0dXJlKCk7XG5cblx0dGhpcy5iYXNlVGV4dHVyZS53aWR0aCA9IHRoaXMud2lkdGg7XG5cdHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICB0aGlzLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKTtcblxuXHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsICB0aGlzLndpZHRoLCAgdGhpcy5oZWlnaHQsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XG5cdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xuXHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcblx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cblx0dGhpcy5iYXNlVGV4dHVyZS5pc1JlbmRlciA9IHRydWU7XG5cblx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmdsRnJhbWVidWZmZXIgKTtcblx0Z2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0aGlzLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUsIDApO1xuXG5cdC8vIGNyZWF0ZSBhIHByb2plY3Rpb24gbWF0cml4Li5cblx0dGhpcy5wcm9qZWN0aW9uID0gbmV3IFBJWEkuUG9pbnQodGhpcy53aWR0aC8yICwgLXRoaXMuaGVpZ2h0LzIpO1xuXG5cdC8vIHNldCB0aGUgY29ycmVjdCByZW5kZXIgZnVuY3Rpb24uLlxuXHR0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyV2ViR0w7XG59XG5cblxuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHRpZihQSVhJLmdsKVxuXHR7XG5cdFx0dGhpcy5wcm9qZWN0aW9uLnggPSB0aGlzLndpZHRoLzJcblx0XHR0aGlzLnByb2plY3Rpb24ueSA9IC10aGlzLmhlaWdodC8yO1xuXHRcblx0XHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuYmFzZVRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdFx0Z2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCAgdGhpcy53aWR0aCwgIHRoaXMuaGVpZ2h0LCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBudWxsKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRcblx0XHR0aGlzLmZyYW1lLndpZHRoID0gdGhpcy53aWR0aFxuXHRcdHRoaXMuZnJhbWUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy5yZW5kZXJlci5yZXNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXHR9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIGNhbnZhcyBkYXRhIGZvciB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGluaXRDYW52YXNcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUuaW5pdENhbnZhcyA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5yZW5kZXJlciA9IG5ldyBQSVhJLkNhbnZhc1JlbmRlcmVyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBudWxsLCAwKTtcblxuXHR0aGlzLmJhc2VUZXh0dXJlID0gbmV3IFBJWEkuQmFzZVRleHR1cmUodGhpcy5yZW5kZXJlci52aWV3KTtcblx0dGhpcy5mcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cblx0dGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlckNhbnZhcztcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZHJhdyB0aGUgZGlzcGxheSBvYmplY3QgdG8gdGhlIHRleHR1cmUuXG4gKlxuICogQG1ldGhvZCByZW5kZXJXZWJHTFxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBkaXNwbGF5IG9iamVjdCB0byByZW5kZXIgdGhpcyB0ZXh0dXJlIG9uXG4gKiBAcGFyYW0gY2xlYXIge0Jvb2xlYW59IElmIHRydWUgdGhlIHRleHR1cmUgd2lsbCBiZSBjbGVhcmVkIGJlZm9yZSB0aGUgZGlzcGxheU9iamVjdCBpcyBkcmF3blxuICogQHByaXZhdGVcbiAqL1xuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZW5kZXJXZWJHTCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHBvc2l0aW9uLCBjbGVhcilcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHQvLyBlbmFibGUgdGhlIGFscGhhIGNvbG9yIG1hc2suLlxuXHRnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7IFxuXG5cdGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcdFxuXG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5nbEZyYW1lYnVmZmVyICk7XG5cblx0aWYoY2xlYXIpXG5cdHtcblx0XHRnbC5jbGVhckNvbG9yKDAsMCwwLCAwKTsgICAgIFxuXHRcdGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXHR9XG5cblx0Ly8gVEhJUyBXSUxMIE1FU1MgV0lUSCBISVQgVEVTVElORyFcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblxuXHQvL1RPRE8gLT8gY3JlYXRlIGEgbmV3IG9uZT8/PyBkb250IHRoaW5rIHNvIVxuXHR2YXIgb3JpZ2luYWxXb3JsZFRyYW5zZm9ybSA9IGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm0gPSBQSVhJLm1hdDMuY3JlYXRlKCk7Ly9zdGhpcy5pbmRldGl0eU1hdHJpeDtcblx0Ly8gbW9kaWZ5IHRvIGZsaXAuLi5cblx0ZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybVs0XSA9IC0xO1xuXHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzVdID0gdGhpcy5wcm9qZWN0aW9uLnkgKiAtMjtcblxuXHRpZihwb3NpdGlvbilcblx0e1xuXHRcdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm1bMl0gPSBwb3NpdGlvbi54O1xuXHRcdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm1bNV0gLT0gcG9zaXRpb24ueTtcblx0fVxuXHRcblx0UElYSS52aXNpYmxlQ291bnQrKztcblx0ZGlzcGxheU9iamVjdC52Y291bnQgPSBQSVhJLnZpc2libGVDb3VudDtcblx0XG5cdGZvcih2YXIgaT0wLGo9Y2hpbGRyZW4ubGVuZ3RoOyBpPGo7IGkrKylcblx0e1xuXHRcdGNoaWxkcmVuW2ldLnVwZGF0ZVRyYW5zZm9ybSgpO1x0XG5cdH1cblxuXHR2YXIgcmVuZGVyR3JvdXAgPSBkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXA7XG5cblx0aWYocmVuZGVyR3JvdXApXG5cdHtcblx0XHRpZihkaXNwbGF5T2JqZWN0ID09IHJlbmRlckdyb3VwLnJvb3QpXG5cdFx0e1xuXHRcdFx0cmVuZGVyR3JvdXAucmVuZGVyKHRoaXMucHJvamVjdGlvbiwgdGhpcy5nbEZyYW1lYnVmZmVyKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHJlbmRlckdyb3VwLnJlbmRlclNwZWNpZmljKGRpc3BsYXlPYmplY3QsIHRoaXMucHJvamVjdGlvbiwgdGhpcy5nbEZyYW1lYnVmZmVyKTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0aWYoIXRoaXMucmVuZGVyR3JvdXApdGhpcy5yZW5kZXJHcm91cCA9IG5ldyBQSVhJLldlYkdMUmVuZGVyR3JvdXAoZ2wpO1xuXHRcdHRoaXMucmVuZGVyR3JvdXAuc2V0UmVuZGVyYWJsZShkaXNwbGF5T2JqZWN0KTtcblx0XHR0aGlzLnJlbmRlckdyb3VwLnJlbmRlcih0aGlzLnByb2plY3Rpb24sIHRoaXMuZ2xGcmFtZWJ1ZmZlcik7XG5cdH1cblx0XG5cdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm0gPSBvcmlnaW5hbFdvcmxkVHJhbnNmb3JtO1xufVxuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGRyYXcgdGhlIGRpc3BsYXkgb2JqZWN0IHRvIHRoZSB0ZXh0dXJlLlxuICpcbiAqIEBtZXRob2QgcmVuZGVyQ2FudmFzXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH0gVGhlIGRpc3BsYXkgb2JqZWN0IHRvIHJlbmRlciB0aGlzIHRleHR1cmUgb25cbiAqIEBwYXJhbSBjbGVhciB7Qm9vbGVhbn0gSWYgdHJ1ZSB0aGUgdGV4dHVyZSB3aWxsIGJlIGNsZWFyZWQgYmVmb3JlIHRoZSBkaXNwbGF5T2JqZWN0IGlzIGRyYXduXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlJlbmRlclRleHR1cmUucHJvdG90eXBlLnJlbmRlckNhbnZhcyA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHBvc2l0aW9uLCBjbGVhcilcbntcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblxuXHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtID0gUElYSS5tYXQzLmNyZWF0ZSgpO1xuXHRcblx0aWYocG9zaXRpb24pXG5cdHtcblx0XHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzJdID0gcG9zaXRpb24ueDtcblx0XHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzVdID0gcG9zaXRpb24ueTtcblx0fVxuXHRcblxuXHRmb3IodmFyIGk9MCxqPWNoaWxkcmVuLmxlbmd0aDsgaTxqOyBpKyspXG5cdHtcblx0XHRjaGlsZHJlbltpXS51cGRhdGVUcmFuc2Zvcm0oKTtcdFxuXHR9XG5cblx0aWYoY2xlYXIpdGhpcy5yZW5kZXJlci5jb250ZXh0LmNsZWFyUmVjdCgwLDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXJEaXNwbGF5T2JqZWN0KGRpc3BsYXlPYmplY3QpO1xuICAgIFxuICAgIHRoaXMucmVuZGVyZXIuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOyBcbiAgICBcblxuICAvLyAgUElYSS50ZXh0dXJlc1RvVXBkYXRlLnB1c2godGhpcy5iYXNlVGV4dHVyZSk7XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBBIENsYXNzIHRoYXQgbG9hZHMgYSBidW5jaCBvZiBpbWFnZXMgLyBzcHJpdGUgc2hlZXQgLyBiaXRtYXAgZm9udCBmaWxlcy4gT25jZSB0aGVcbiAqIGFzc2V0cyBoYXZlIGJlZW4gbG9hZGVkIHRoZXkgYXJlIGFkZGVkIHRvIHRoZSBQSVhJIFRleHR1cmUgY2FjaGUgYW5kIGNhbiBiZSBhY2Nlc3NlZFxuICogZWFzaWx5IHRocm91Z2ggUElYSS5UZXh0dXJlLmZyb21JbWFnZSgpIGFuZCBQSVhJLlNwcml0ZS5mcm9tSW1hZ2UoKVxuICogV2hlbiBhbGwgaXRlbXMgaGF2ZSBiZWVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcIm9uTG9hZGVkXCIgZXZlbnRcbiAqIEFzIGVhY2ggaW5kaXZpZHVhbCBpdGVtIGlzIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcIm9uUHJvZ3Jlc3NcIiBldmVudFxuICpcbiAqIEBjbGFzcyBBc3NldExvYWRlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQHBhcmFtIHtBcnJheTxTdHJpbmc+fSBhc3NldFVSTHMgYW4gYXJyYXkgb2YgaW1hZ2Uvc3ByaXRlIHNoZWV0IHVybHMgdGhhdCB5b3Ugd291bGQgbGlrZSBsb2FkZWRcbiAqICAgICAgc3VwcG9ydGVkLiBTdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cyBpbmNsdWRlIFwianBlZ1wiLCBcImpwZ1wiLCBcInBuZ1wiLCBcImdpZlwiLiBTdXBwb3J0ZWRcbiAqICAgICAgc3ByaXRlIHNoZWV0IGRhdGEgZm9ybWF0cyBvbmx5IGluY2x1ZGUgXCJKU09OXCIgYXQgdGhpcyB0aW1lLiBTdXBwb3J0ZWQgYml0bWFwIGZvbnRcbiAqICAgICAgZGF0YSBmb3JtYXRzIGluY2x1ZGUgXCJ4bWxcIiBhbmQgXCJmbnRcIi5cbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5QSVhJLkFzc2V0TG9hZGVyID0gZnVuY3Rpb24oYXNzZXRVUkxzLCBjcm9zc29yaWdpbilcbntcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgYXJyYXkgb2YgYXNzZXQgVVJMcyB0aGF0IGFyZSBnb2luZyB0byBiZSBsb2FkZWRcbiAgICAgKlxuXHQgKiBAcHJvcGVydHkgYXNzZXRVUkxzXG5cdCAqIEB0eXBlIEFycmF5PFN0cmluZz5cblx0ICovXG5cdHRoaXMuYXNzZXRVUkxzID0gYXNzZXRVUkxzO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgY3Jvc3NvcmlnaW5cbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICovXG5cdHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIE1hcHMgZmlsZSBleHRlbnNpb24gdG8gbG9hZGVyIHR5cGVzXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgbG9hZGVyc0J5VHlwZVxuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIHRoaXMubG9hZGVyc0J5VHlwZSA9IHtcbiAgICAgICAgXCJqcGdcIjogIFBJWEkuSW1hZ2VMb2FkZXIsXG4gICAgICAgIFwianBlZ1wiOiBQSVhJLkltYWdlTG9hZGVyLFxuICAgICAgICBcInBuZ1wiOiAgUElYSS5JbWFnZUxvYWRlcixcbiAgICAgICAgXCJnaWZcIjogIFBJWEkuSW1hZ2VMb2FkZXIsXG4gICAgICAgIFwianNvblwiOiBQSVhJLkpzb25Mb2FkZXIsXG4gICAgICAgIFwiYW5pbVwiOiBQSVhJLlNwaW5lTG9hZGVyLFxuICAgICAgICBcInhtbFwiOiAgUElYSS5CaXRtYXBGb250TG9hZGVyLFxuICAgICAgICBcImZudFwiOiAgUElYSS5CaXRtYXBGb250TG9hZGVyXG4gICAgfTtcblxuXG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gYW4gaXRlbSBoYXMgbG9hZGVkXG4gKiBAZXZlbnQgb25Qcm9ncmVzc1xuICovXG5cbi8qKlxuICogRmlyZWQgd2hlbiBhbGwgdGhlIGFzc2V0cyBoYXZlIGxvYWRlZFxuICogQGV2ZW50IG9uQ29tcGxldGVcbiAqL1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Bc3NldExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkFzc2V0TG9hZGVyO1xuXG4vKipcbiAqIFN0YXJ0cyBsb2FkaW5nIHRoZSBhc3NldHMgc2VxdWVudGlhbGx5XG4gKlxuICogQG1ldGhvZCBsb2FkXG4gKi9cblBJWEkuQXNzZXRMb2FkZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpXG57XG4gICAgdmFyIHNjb3BlID0gdGhpcztcblxuXHR0aGlzLmxvYWRDb3VudCA9IHRoaXMuYXNzZXRVUkxzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGk9MDsgaSA8IHRoaXMuYXNzZXRVUkxzLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIGZpbGVOYW1lID0gdGhpcy5hc3NldFVSTHNbaV07XG5cdFx0dmFyIGZpbGVUeXBlID0gZmlsZU5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgdmFyIGxvYWRlckNsYXNzID0gdGhpcy5sb2FkZXJzQnlUeXBlW2ZpbGVUeXBlXTtcbiAgICAgICAgaWYoIWxvYWRlckNsYXNzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZpbGVUeXBlICsgXCIgaXMgYW4gdW5zdXBwb3J0ZWQgZmlsZSB0eXBlXCIpO1xuXG4gICAgICAgIHZhciBsb2FkZXIgPSBuZXcgbG9hZGVyQ2xhc3MoZmlsZU5hbWUsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXG4gICAgICAgIGxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2NvcGUub25Bc3NldExvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9hZGVyLmxvYWQoKTtcblx0fVxufTtcblxuLyoqXG4gKiBJbnZva2VkIGFmdGVyIGVhY2ggZmlsZSBpcyBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIG9uQXNzZXRMb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQXNzZXRMb2FkZXIucHJvdG90eXBlLm9uQXNzZXRMb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgdGhpcy5sb2FkQ291bnQtLTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiBcIm9uUHJvZ3Jlc3NcIiwgY29udGVudDogdGhpc30pO1xuXHRpZih0aGlzLm9uUHJvZ3Jlc3MpIHRoaXMub25Qcm9ncmVzcygpO1xuXG5cdGlmKHRoaXMubG9hZENvdW50ID09IDApXG5cdHtcblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6IFwib25Db21wbGV0ZVwiLCBjb250ZW50OiB0aGlzfSk7XG5cdFx0aWYodGhpcy5vbkNvbXBsZXRlKSB0aGlzLm9uQ29tcGxldGUoKTtcblx0fVxufTtcblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIGpzb24gZmlsZSBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gZGF0YSBhbmQgcGFyc2luZyBpdFxuICogV2hlbiBsb2FkZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJsb2FkZWRcIiBldmVudFxuICogSWYgbG9hZCBmYWlsZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJlcnJvclwiIGV2ZW50XG4gKlxuICogQGNsYXNzIEpzb25Mb2FkZXJcbiAqIEB1c2VzIEV2ZW50VGFyZ2V0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB1cmwge1N0cmluZ30gVGhlIHVybCBvZiB0aGUgSlNPTiBmaWxlXG4gKiBAcGFyYW0gY3Jvc3NvcmlnaW4ge0Jvb2xlYW59IFdoZXRoZXIgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3NvcmlnaW5cbiAqL1xuUElYSS5Kc29uTG9hZGVyID0gZnVuY3Rpb24gKHVybCwgY3Jvc3NvcmlnaW4pIHtcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB1cmxcblx0ICogQHR5cGUgU3RyaW5nXG5cdCAqL1xuXHR0aGlzLnVybCA9IHVybDtcblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBjcm9zc29yaWdpblxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmNyb3Nzb3JpZ2luID0gY3Jvc3NvcmlnaW47XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFRoZSBiYXNlIHVybCBvZiB0aGUgYml0bWFwIGZvbnQgZGF0YVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmFzZVVybFxuXHQgKiBAdHlwZSBTdHJpbmdcblx0ICogQHJlYWRPbmx5XG5cdCAqL1xuXHR0aGlzLmJhc2VVcmwgPSB1cmwucmVwbGFjZSgvW15cXC9dKiQvLCBcIlwiKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gV2hldGhlciB0aGUgZGF0YSBoYXMgbG9hZGVkIHlldFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbG9hZGVkXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICogQHJlYWRPbmx5XG5cdCAqL1xuXHR0aGlzLmxvYWRlZCA9IGZhbHNlO1xuXG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Kc29uTG9hZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuSnNvbkxvYWRlcjtcblxuLyoqXG4gKiBMb2FkcyB0aGUgSlNPTiBkYXRhXG4gKlxuICogQG1ldGhvZCBsb2FkXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5hamF4UmVxdWVzdCA9IG5ldyBBamF4UmVxdWVzdCgpO1xuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR0aGlzLmFqYXhSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRzY29wZS5vbkpTT05Mb2FkZWQoKTtcblx0fTtcblxuXHR0aGlzLmFqYXhSZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdGhpcy51cmwsIHRydWUpO1xuXHRpZiAodGhpcy5hamF4UmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKSB0aGlzLmFqYXhSZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXHR0aGlzLmFqYXhSZXF1ZXN0LnNlbmQobnVsbCk7XG59O1xuXG4vKipcbiAqIEludm9rZSB3aGVuIEpTT04gZmlsZSBpcyBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIG9uSlNPTkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5Kc29uTG9hZGVyLnByb3RvdHlwZS5vbkpTT05Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh0aGlzLmFqYXhSZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcdGlmICh0aGlzLmFqYXhSZXF1ZXN0LnN0YXR1cyA9PSAyMDAgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImh0dHBcIikgPT0gLTEpIHtcblx0XHRcdHRoaXMuanNvbiA9IEpTT04ucGFyc2UodGhpcy5hamF4UmVxdWVzdC5yZXNwb25zZVRleHQpO1xuXG5cdFx0XHRpZih0aGlzLmpzb24uZnJhbWVzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzcHJpdGUgc2hlZXRcblx0XHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcdFx0dmFyIHRleHR1cmVVcmwgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLmpzb24ubWV0YS5pbWFnZTtcblx0XHRcdFx0dmFyIGltYWdlID0gbmV3IFBJWEkuSW1hZ2VMb2FkZXIodGV4dHVyZVVybCwgdGhpcy5jcm9zc29yaWdpbik7XG5cdFx0XHRcdHZhciBmcmFtZURhdGEgPSB0aGlzLmpzb24uZnJhbWVzO1xuXG5cdFx0XHRcdHRoaXMudGV4dHVyZSA9IGltYWdlLnRleHR1cmUuYmFzZVRleHR1cmU7XG5cdFx0XHRcdGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0c2NvcGUub25Mb2FkZWQoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Zm9yICh2YXIgaSBpbiBmcmFtZURhdGEpIHtcblx0XHRcdFx0XHR2YXIgcmVjdCA9IGZyYW1lRGF0YVtpXS5mcmFtZTtcblx0XHRcdFx0XHRpZiAocmVjdCkge1xuXHRcdFx0XHRcdFx0UElYSS5UZXh0dXJlQ2FjaGVbaV0gPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGV4dHVyZSwge1xuXHRcdFx0XHRcdFx0XHR4OiByZWN0LngsXG5cdFx0XHRcdFx0XHRcdHk6IHJlY3QueSxcblx0XHRcdFx0XHRcdFx0d2lkdGg6IHJlY3Qudyxcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiByZWN0Lmhcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKGZyYW1lRGF0YVtpXS50cmltbWVkKSB7XG5cdFx0XHRcdFx0XHRcdC8vdmFyIHJlYWxTaXplID0gZnJhbWVEYXRhW2ldLnNwcml0ZVNvdXJjZVNpemU7XG5cdFx0XHRcdFx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldLnJlYWxTaXplID0gZnJhbWVEYXRhW2ldLnNwcml0ZVNvdXJjZVNpemU7XG5cdFx0XHRcdFx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldLnRyaW0ueCA9IDA7IC8vIChyZWFsU2l6ZS54IC8gcmVjdC53KVxuXHRcdFx0XHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIG9mZnNldCFcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpbWFnZS5sb2FkKCk7XG5cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYodGhpcy5qc29uLmJvbmVzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzcGluZSBhbmltYXRpb25cblx0XHRcdFx0dmFyIHNwaW5lSnNvblBhcnNlciA9IG5ldyBzcGluZS5Ta2VsZXRvbkpzb24oKTtcblx0XHRcdFx0dmFyIHNrZWxldG9uRGF0YSA9IHNwaW5lSnNvblBhcnNlci5yZWFkU2tlbGV0b25EYXRhKHRoaXMuanNvbik7XG5cdFx0XHRcdFBJWEkuQW5pbUNhY2hlW3RoaXMudXJsXSA9IHNrZWxldG9uRGF0YTtcblx0XHRcdFx0dGhpcy5vbkxvYWRlZCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLm9uTG9hZGVkKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLm9uRXJyb3IoKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogSW52b2tlIHdoZW4ganNvbiBmaWxlIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25Mb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubG9hZGVkID0gdHJ1ZTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHtcblx0XHR0eXBlOiBcImxvYWRlZFwiLFxuXHRcdGNvbnRlbnQ6IHRoaXNcblx0fSk7XG59O1xuXG4vKipcbiAqIEludm9rZSB3aGVuIGVycm9yIG9jY3VyZWRcbiAqXG4gKiBAbWV0aG9kIG9uRXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHtcblx0XHR0eXBlOiBcImVycm9yXCIsXG5cdFx0Y29udGVudDogdGhpc1xuXHR9KTtcbn07XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIHNwcml0ZSBzaGVldCBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gc3ByaXRlIHNoZWV0IGRhdGFcbiAqIFRvIGdlbmVyYXRlIHRoZSBkYXRhIHlvdSBjYW4gdXNlIGh0dHA6Ly93d3cuY29kZWFuZHdlYi5jb20vdGV4dHVyZXBhY2tlciBhbmQgcHVibGlzaCB0aGUgXCJKU09OXCIgZm9ybWF0XG4gKiBUaGVyZSBpcyBhIGZyZWUgdmVyc2lvbiBzbyB0aGF0cyBuaWNlLCBhbHRob3VnaCB0aGUgcGFpZCB2ZXJzaW9uIGlzIGdyZWF0IHZhbHVlIGZvciBtb25leS5cbiAqIEl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgU3ByaXRlIHNoZWV0cyAoYWxzbyBrbm93IGFzIHRleHR1cmUgYXRsYXNcIikgYXMgaXQgbWVhbnMgc3ByaXRlXCJzIGNhbiBiZSBiYXRjaGVkIGFuZCBkcmF3biB0b2dldGhlciBmb3IgaGlnaGx5IGluY3JlYXNlZCByZW5kZXJpbmcgc3BlZWQuXG4gKiBPbmNlIHRoZSBkYXRhIGhhcyBiZWVuIGxvYWRlZCB0aGUgZnJhbWVzIGFyZSBzdG9yZWQgaW4gdGhlIFBJWEkgdGV4dHVyZSBjYWNoZSBhbmQgY2FuIGJlIGFjY2Vzc2VkIHRob3VnaCBQSVhJLlRleHR1cmUuZnJvbUZyYW1lSWQoKSBhbmQgUElYSS5TcHJpdGUuZnJvbUZyb21lSWQoKVxuICogVGhpcyBsb2FkZXIgd2lsbCBhbHNvIGxvYWQgdGhlIGltYWdlIGZpbGUgdGhhdCB0aGUgU3ByaXRlc2hlZXQgcG9pbnRzIHRvIGFzIHdlbGwgYXMgdGhlIGRhdGEuXG4gKiBXaGVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcImxvYWRlZFwiIGV2ZW50XG4gKlxuICogQGNsYXNzIFNwcml0ZVNoZWV0TG9hZGVyXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIHNwcml0ZSBzaGVldCBKU09OIGZpbGVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5cblBJWEkuU3ByaXRlU2hlZXRMb2FkZXIgPSBmdW5jdGlvbiAodXJsLCBjcm9zc29yaWdpbikge1xuXHQvKlxuXHQgKiBpIHVzZSB0ZXh0dXJlIHBhY2tlciB0byBsb2FkIHRoZSBhc3NldHMuLlxuXHQgKiBodHRwOi8vd3d3LmNvZGVhbmR3ZWIuY29tL3RleHR1cmVwYWNrZXJcblx0ICogbWFrZSBzdXJlIHRvIHNldCB0aGUgZm9ybWF0IGFzIFwiSlNPTlwiXG5cdCAqL1xuXHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cblx0LyoqXG5cdCAqIFRoZSB1cmwgb2YgdGhlIGJpdG1hcCBmb250IGRhdGFcblx0ICpcblx0ICogQHByb3BlcnR5IHVybFxuXHQgKiBAdHlwZSBTdHJpbmdcblx0ICovXG5cdHRoaXMudXJsID0gdXJsO1xuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zcyBvcmlnaW5cblx0ICpcblx0ICogQHByb3BlcnR5IGNyb3Nzb3JpZ2luXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICovXG5cdHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIGJhc2UgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBiYXNlVXJsXG5cdCAqIEB0eXBlIFN0cmluZ1xuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuYmFzZVVybCA9IHVybC5yZXBsYWNlKC9bXlxcL10qJC8sIFwiXCIpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYmVpbmcgbG9hZGVkXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgdGV4dHVyZVxuICAgICAqIEB0eXBlIFRleHR1cmVcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYW1lcyBvZiB0aGUgc3ByaXRlIHNoZWV0XG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgZnJhbWVzXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG5cdHRoaXMuZnJhbWVzID0ge307XG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwcml0ZVNoZWV0TG9hZGVyO1xuXG4vKipcbiAqIFRoaXMgd2lsbCBiZWdpbiBsb2FkaW5nIHRoZSBKU09OIGZpbGVcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNjb3BlID0gdGhpcztcblx0dmFyIGpzb25Mb2FkZXIgPSBuZXcgUElYSS5Kc29uTG9hZGVyKHRoaXMudXJsLCB0aGlzLmNyb3Nzb3JpZ2luKTtcblx0anNvbkxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHNjb3BlLmpzb24gPSBldmVudC5jb250ZW50Lmpzb247XG5cdFx0c2NvcGUub25KU09OTG9hZGVkKCk7XG5cdH0pO1xuXHRqc29uTG9hZGVyLmxvYWQoKTtcbn07XG5cbi8qKlxuICogSW52b2tlIHdoZW4gSlNPTiBmaWxlIGlzIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25KU09OTG9hZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlNwcml0ZVNoZWV0TG9hZGVyLnByb3RvdHlwZS5vbkpTT05Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzY29wZSA9IHRoaXM7XG5cdHZhciB0ZXh0dXJlVXJsID0gdGhpcy5iYXNlVXJsICsgdGhpcy5qc29uLm1ldGEuaW1hZ2U7XG5cdHZhciBpbWFnZSA9IG5ldyBQSVhJLkltYWdlTG9hZGVyKHRleHR1cmVVcmwsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXHR2YXIgZnJhbWVEYXRhID0gdGhpcy5qc29uLmZyYW1lcztcblxuXHR0aGlzLnRleHR1cmUgPSBpbWFnZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXHRpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHNjb3BlLm9uTG9hZGVkKCk7XG5cdH0pO1xuXG5cdGZvciAodmFyIGkgaW4gZnJhbWVEYXRhKSB7XG5cdFx0dmFyIHJlY3QgPSBmcmFtZURhdGFbaV0uZnJhbWU7XG5cdFx0aWYgKHJlY3QpIHtcblx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldID0gbmV3IFBJWEkuVGV4dHVyZSh0aGlzLnRleHR1cmUsIHtcblx0XHRcdFx0eDogcmVjdC54LFxuXHRcdFx0XHR5OiByZWN0LnksXG5cdFx0XHRcdHdpZHRoOiByZWN0LncsXG5cdFx0XHRcdGhlaWdodDogcmVjdC5oXG5cdFx0XHR9KTtcblx0XHRcdGlmIChmcmFtZURhdGFbaV0udHJpbW1lZCkge1xuXHRcdFx0XHQvL3ZhciByZWFsU2l6ZSA9IGZyYW1lRGF0YVtpXS5zcHJpdGVTb3VyY2VTaXplO1xuXHRcdFx0XHRQSVhJLlRleHR1cmVDYWNoZVtpXS5yZWFsU2l6ZSA9IGZyYW1lRGF0YVtpXS5zcHJpdGVTb3VyY2VTaXplO1xuXHRcdFx0XHRQSVhJLlRleHR1cmVDYWNoZVtpXS50cmltLnggPSAwOyAvLyAocmVhbFNpemUueCAvIHJlY3Qudylcblx0XHRcdFx0Ly8gY2FsY3VsYXRlIHRoZSBvZmZzZXQhXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aW1hZ2UubG9hZCgpO1xufTtcbi8qKlxuICogSW52b2tlIHdoZW4gYWxsIGZpbGVzIGFyZSBsb2FkZWQgKGpzb24gYW5kIHRleHR1cmUpXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuZGlzcGF0Y2hFdmVudCh7XG5cdFx0dHlwZTogXCJsb2FkZWRcIixcblx0XHRjb250ZW50OiB0aGlzXG5cdH0pO1xufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoZSBpbWFnZSBsb2FkZXIgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgaW1hZ2VzIGZpbGUgZm9ybWF0cyAoXCJqcGVnXCIsIFwianBnXCIsIFwicG5nXCIgYW5kIFwiZ2lmXCIpXG4gKiBPbmNlIHRoZSBpbWFnZSBoYXMgYmVlbiBsb2FkZWQgaXQgaXMgc3RvcmVkIGluIHRoZSBQSVhJIHRleHR1cmUgY2FjaGUgYW5kIGNhbiBiZSBhY2Nlc3NlZCB0aG91Z2ggUElYSS5UZXh0dXJlLmZyb21GcmFtZUlkKCkgYW5kIFBJWEkuU3ByaXRlLmZyb21Gcm9tZUlkKClcbiAqIFdoZW4gbG9hZGVkIHRoaXMgY2xhc3Mgd2lsbCBkaXNwYXRjaCBhICdsb2FkZWQnIGV2ZW50XG4gKlxuICogQGNsYXNzIEltYWdlTG9hZGVyXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIGltYWdlXG4gKiBAcGFyYW0gY3Jvc3NvcmlnaW4ge0Jvb2xlYW59IFdoZXRoZXIgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3NvcmlnaW5cbiAqL1xuUElYSS5JbWFnZUxvYWRlciA9IGZ1bmN0aW9uKHVybCwgY3Jvc3NvcmlnaW4pXG57XG4gICAgUElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYmVpbmcgbG9hZGVkXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgdGV4dHVyZVxuICAgICAqIEB0eXBlIFRleHR1cmVcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBQSVhJLlRleHR1cmUuZnJvbUltYWdlKHVybCwgY3Jvc3NvcmlnaW4pO1xuXG4gICAgLyoqXG4gICAgICogaWYgdGhlIGltYWdlIGlzIGxvYWRlZCB3aXRoIGxvYWRGcmFtZWRTcHJpdGVTaGVldFxuICAgICAqIGZyYW1lcyB3aWxsIGNvbnRhaW4gdGhlIHNwcml0ZSBzaGVldCBmcmFtZXNcbiAgICAgKlxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVzID0gW107XG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkltYWdlTG9hZGVyO1xuXG4vKipcbiAqIExvYWRzIGltYWdlIG9yIHRha2VzIGl0IGZyb20gY2FjaGVcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKClcbntcbiAgICBpZighdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlLmhhc0xvYWRlZClcbiAgICB7XG4gICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICAgIHRoaXMudGV4dHVyZS5iYXNlVGV4dHVyZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2NvcGUub25Mb2FkZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIHRoaXMub25Mb2FkZWQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBpbWFnZSBmaWxlIGlzIGxvYWRlZCBvciBpdCBpcyBhbHJlYWR5IGNhY2hlZCBhbmQgcmVhZHkgdG8gdXNlXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiBcImxvYWRlZFwiLCBjb250ZW50OiB0aGlzfSk7XG59O1xuXG4vKipcbiAqIExvYWRzIGltYWdlIGFuZCBzcGxpdCBpdCB0byB1bmlmb3JtIHNpemVkIGZyYW1lc1xuICpcbiAqXG4gKiBAbWV0aG9kIGxvYWRGcmFtZWRTcHJpdGVTaGVldFxuICogQHBhcmFtIGZyYW1lV2lkdGgge051bWJlcn0gd2l0aCBvZiBlYWNoIGZyYW1lXG4gKiBAcGFyYW0gZnJhbWVIZWlnaHQge051bWJlcn0gaGVpZ2h0IG9mIGVhY2ggZnJhbWVcbiAqIEBwYXJhbSB0ZXh0dXJlTmFtZSB7U3RyaW5nfSBpZiBnaXZlbiwgdGhlIGZyYW1lcyB3aWxsIGJlIGNhY2hlZCBpbiA8dGV4dHVyZU5hbWU+LTxvcmQ+IGZvcm1hdCBcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUubG9hZEZyYW1lZFNwcml0ZVNoZWV0ID0gZnVuY3Rpb24oZnJhbWVXaWR0aCwgZnJhbWVIZWlnaHQsIHRleHR1cmVOYW1lKVxue1xuICAgIHRoaXMuZnJhbWVzID0gW107XG4gICAgdmFyIGNvbHMgPSBNYXRoLmZsb29yKHRoaXMudGV4dHVyZS53aWR0aCAvIGZyYW1lV2lkdGgpO1xuICAgIHZhciByb3dzID0gTWF0aC5mbG9vcih0aGlzLnRleHR1cmUuaGVpZ2h0IC8gZnJhbWVIZWlnaHQpO1xuXG4gICAgdmFyIGk9MDtcbiAgICBmb3IgKHZhciB5PTA7IHk8cm93czsgeSsrKVxuICAgIHtcbiAgICAgICAgZm9yICh2YXIgeD0wOyB4PGNvbHM7IHgrKyxpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFBJWEkuVGV4dHVyZSh0aGlzLnRleHR1cmUsIHtcbiAgICAgICAgICAgICAgICB4OiB4KmZyYW1lV2lkdGgsXG4gICAgICAgICAgICAgICAgeTogeSpmcmFtZUhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogZnJhbWVXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGZyYW1lSGVpZ2h0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5mcmFtZXMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlTmFtZSkgUElYSS5UZXh0dXJlQ2FjaGVbdGV4dHVyZU5hbWUrJy0nK2ldID0gdGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmKCF0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKVxuICAgIHtcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICAgICAgdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzY29wZS5vbkxvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdGhpcy5vbkxvYWRlZCgpO1xuICAgIH1cbn07XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIHhtbCBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIFhNTCBiaXRtYXAgZm9udCBkYXRhIChcInhtbFwiIG9yIFwiZm50XCIpXG4gKiBUbyBnZW5lcmF0ZSB0aGUgZGF0YSB5b3UgY2FuIHVzZSBodHRwOi8vd3d3LmFuZ2VsY29kZS5jb20vcHJvZHVjdHMvYm1mb250L1xuICogVGhpcyBsb2FkZXIgd2lsbCBhbHNvIGxvYWQgdGhlIGltYWdlIGZpbGUgYXMgdGhlIGRhdGEuXG4gKiBXaGVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcImxvYWRlZFwiIGV2ZW50XG4gKlxuICogQGNsYXNzIEJpdG1hcEZvbnRMb2FkZXJcbiAqIEB1c2VzIEV2ZW50VGFyZ2V0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB1cmwge1N0cmluZ30gVGhlIHVybCBvZiB0aGUgc3ByaXRlIHNoZWV0IEpTT04gZmlsZVxuICogQHBhcmFtIGNyb3Nzb3JpZ2luIHtCb29sZWFufSBXaGV0aGVyIHJlcXVlc3RzIHNob3VsZCBiZSB0cmVhdGVkIGFzIGNyb3Nzb3JpZ2luXG4gKi9cblBJWEkuQml0bWFwRm9udExvYWRlciA9IGZ1bmN0aW9uKHVybCwgY3Jvc3NvcmlnaW4pXG57XG4gICAgLypcbiAgICAgKiBpIHVzZSB0ZXh0dXJlIHBhY2tlciB0byBsb2FkIHRoZSBhc3NldHMuLlxuICAgICAqIGh0dHA6Ly93d3cuY29kZWFuZHdlYi5jb20vdGV4dHVyZXBhY2tlclxuICAgICAqIG1ha2Ugc3VyZSB0byBzZXQgdGhlIGZvcm1hdCBhcyBcIkpTT05cIlxuICAgICAqL1xuICAgIFBJWEkuRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB1cmwgb2YgdGhlIGJpdG1hcCBmb250IGRhdGFcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB1cmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKi9cbiAgICB0aGlzLnVybCA9IHVybDtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHJlcXVlc3RzIHNob3VsZCBiZSB0cmVhdGVkIGFzIGNyb3NzIG9yaWdpblxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGNyb3Nzb3JpZ2luXG4gICAgICogQHR5cGUgQm9vbGVhblxuICAgICAqL1xuICAgIHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIFtyZWFkLW9ubHldIFRoZSBiYXNlIHVybCBvZiB0aGUgYml0bWFwIGZvbnQgZGF0YVxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGJhc2VVcmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLmJhc2VVcmwgPSB1cmwucmVwbGFjZSgvW15cXC9dKiQvLCBcIlwiKTtcblxuICAgIC8qKlxuICAgICAqIFtyZWFkLW9ubHldIFRoZSB0ZXh0dXJlIG9mIHRoZSBiaXRtYXAgZm9udFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGJhc2VVcmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBudWxsO1xufTtcblxuLy8gY29uc3RydWN0b3JcblBJWEkuQml0bWFwRm9udExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkJpdG1hcEZvbnRMb2FkZXI7XG5cbi8qKlxuICogTG9hZHMgdGhlIFhNTCBmb250IGRhdGFcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5CaXRtYXBGb250TG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oKVxue1xuICAgIHRoaXMuYWpheFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgIHRoaXMuYWpheFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgc2NvcGUub25YTUxMb2FkZWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5hamF4UmVxdWVzdC5vcGVuKFwiR0VUXCIsIHRoaXMudXJsLCB0cnVlKTtcbiAgICBpZiAodGhpcy5hamF4UmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKSB0aGlzLmFqYXhSZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgdGhpcy5hamF4UmVxdWVzdC5zZW5kKG51bGwpXG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBYTUwgZmlsZSBpcyBsb2FkZWQsIHBhcnNlcyB0aGUgZGF0YVxuICpcbiAqIEBtZXRob2Qgb25YTUxMb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQml0bWFwRm9udExvYWRlci5wcm90b3R5cGUub25YTUxMb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgaWYgKHRoaXMuYWpheFJlcXVlc3QucmVhZHlTdGF0ZSA9PSA0KVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuYWpheFJlcXVlc3Quc3RhdHVzID09IDIwMCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKFwiaHR0cFwiKSA9PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRleHR1cmVVcmwgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFnZVwiKVswXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImZpbGVcIikubm9kZVZhbHVlO1xuICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IFBJWEkuSW1hZ2VMb2FkZXIodGV4dHVyZVVybCwgdGhpcy5jcm9zc29yaWdpbik7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmUgPSBpbWFnZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5mb1wiKVswXTtcbiAgICAgICAgICAgIHZhciBjb21tb24gPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY29tbW9uXCIpWzBdO1xuICAgICAgICAgICAgZGF0YS5mb250ID0gaW5mby5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImZhY2VcIikubm9kZVZhbHVlO1xuICAgICAgICAgICAgZGF0YS5zaXplID0gcGFyc2VJbnQoaW5mby5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInNpemVcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICBkYXRhLmxpbmVIZWlnaHQgPSBwYXJzZUludChjb21tb24uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJsaW5lSGVpZ2h0XCIpLm5vZGVWYWx1ZSwgMTApO1xuICAgICAgICAgICAgZGF0YS5jaGFycyA9IHt9O1xuXG4gICAgICAgICAgICAvL3BhcnNlIGxldHRlcnNcbiAgICAgICAgICAgIHZhciBsZXR0ZXJzID0gdGhpcy5hamF4UmVxdWVzdC5yZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNoYXJcIik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV0dGVycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaWRcIikubm9kZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZVJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGxldHRlcnNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ4XCIpLm5vZGVWYWx1ZSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieVwiKS5ub2RlVmFsdWUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobGV0dGVyc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcIndpZHRoXCIpLm5vZGVWYWx1ZSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaGVpZ2h0XCIpLm5vZGVWYWx1ZSwgMTApXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGRhdGEuY2hhcnNbY2hhckNvZGVdID0ge1xuICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0OiBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieG9mZnNldFwiKS5ub2RlVmFsdWUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgeU9mZnNldDogcGFyc2VJbnQobGV0dGVyc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInlvZmZzZXRcIikubm9kZVZhbHVlLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIHhBZHZhbmNlOiBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieGFkdmFuY2VcIikubm9kZVZhbHVlLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIGtlcm5pbmc6IHt9LFxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlOiBQSVhJLlRleHR1cmVDYWNoZVtjaGFyQ29kZV0gPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGV4dHVyZSwgdGV4dHVyZVJlY3QpXG5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3BhcnNlIGtlcm5pbmdzXG4gICAgICAgICAgICB2YXIga2VybmluZ3MgPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwia2VybmluZ1wiKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXJuaW5ncy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHBhcnNlSW50KGtlcm5pbmdzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiZmlyc3RcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICB2YXIgc2Vjb25kID0gcGFyc2VJbnQoa2VybmluZ3NbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJzZWNvbmRcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICB2YXIgYW1vdW50ID0gcGFyc2VJbnQoa2VybmluZ3NbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJhbW91bnRcIikubm9kZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgICAgICAgICBkYXRhLmNoYXJzW3NlY29uZF0ua2VybmluZ1tmaXJzdF0gPSBhbW91bnQ7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUElYSS5CaXRtYXBUZXh0LmZvbnRzW2RhdGEuZm9udF0gPSBkYXRhO1xuXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5vbkxvYWRlZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbWFnZS5sb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBhbGwgZmlsZXMgYXJlIGxvYWRlZCAoeG1sL2ZudCBhbmQgdGV4dHVyZSlcbiAqXG4gKiBAbWV0aG9kIG9uTG9hZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkJpdG1hcEZvbnRMb2FkZXIucHJvdG90eXBlLm9uTG9hZGVkID0gZnVuY3Rpb24oKVxue1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTogXCJsb2FkZWRcIiwgY29udGVudDogdGhpc30pO1xufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqIGJhc2VkIG9uIHBpeGkgaW1wYWN0IHNwaW5lIGltcGxlbWVudGF0aW9uIG1hZGUgYnkgRWVtZWxpIEtlbG9rb3JwaSAoQGVrZWxva29ycGkpIGh0dHBzOi8vZ2l0aHViLmNvbS9la2Vsb2tvcnBpXG4gKlxuICogQXdlc29tZSBKUyBydW4gdGltZSBwcm92aWRlZCBieSBFc290ZXJpY1NvZnR3YXJlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vRXNvdGVyaWNTb2Z0d2FyZS9zcGluZS1ydW50aW1lc1xuICpcbiAqL1xuXG4vKipcbiAqIFRoZSBTcGluZSBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gc3BpbmUgZGF0YVxuICogVG8gZ2VuZXJhdGUgdGhlIGRhdGEgeW91IG5lZWQgdG8gdXNlIGh0dHA6Ly9lc290ZXJpY3NvZnR3YXJlLmNvbS8gYW5kIGV4cG9ydCB0aGUgXCJKU09OXCIgZm9ybWF0XG4gKiBEdWUgdG8gYSBjbGFzaCBvZiBuYW1lcyAgWW91IHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhlIGV4dGVuc2lvbiBvZiB0aGUgc3BpbmUgZmlsZSBmcm9tICouanNvbiB0byAqLmFuaW0gZm9yIGl0IHRvIGxvYWRcbiAqIFNlZSBleGFtcGxlIDEyIChodHRwOi8vd3d3Lmdvb2Rib3lkaWdpdGFsLmNvbS9waXhpanMvZXhhbXBsZXMvMTIvKSB0byBzZWUgYSB3b3JraW5nIGV4YW1wbGUgYW5kIGNoZWNrIG91dCB0aGUgc291cmNlXG4gKiBZb3Ugd2lsbCBuZWVkIHRvIGdlbmVyYXRlIGEgc3ByaXRlIHNoZWV0IHRvIGFjY29tcGFueSB0aGUgc3BpbmUgZGF0YVxuICogV2hlbiBsb2FkZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJsb2FkZWRcIiBldmVudFxuICpcbiAqIEBjbGFzcyBTcGluZVxuICogQHVzZXMgRXZlbnRUYXJnZXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHVybCB7U3RyaW5nfSBUaGUgdXJsIG9mIHRoZSBKU09OIGZpbGVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5QSVhJLlNwaW5lTG9hZGVyID0gZnVuY3Rpb24odXJsLCBjcm9zc29yaWdpbilcbntcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB1cmxcblx0ICogQHR5cGUgU3RyaW5nXG5cdCAqL1xuXHR0aGlzLnVybCA9IHVybDtcblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBjcm9zc29yaWdpblxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmNyb3Nzb3JpZ2luID0gY3Jvc3NvcmlnaW47XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFdoZXRoZXIgdGhlIGRhdGEgaGFzIGxvYWRlZCB5ZXRcblx0ICpcblx0ICogQHByb3BlcnR5IGxvYWRlZFxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy5sb2FkZWQgPSBmYWxzZTtcbn1cblxuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwaW5lTG9hZGVyO1xuXG4vKipcbiAqIExvYWRzIHRoZSBKU09OIGRhdGFcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR2YXIganNvbkxvYWRlciA9IG5ldyBQSVhJLkpzb25Mb2FkZXIodGhpcy51cmwsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXHRqc29uTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0c2NvcGUuanNvbiA9IGV2ZW50LmNvbnRlbnQuanNvbjtcblx0XHRzY29wZS5vbkpTT05Mb2FkZWQoKTtcblx0fSk7XG5cdGpzb25Mb2FkZXIubG9hZCgpO1xufTtcblxuLyoqXG4gKiBJbnZva2Ugd2hlbiBKU09OIGZpbGUgaXMgbG9hZGVkXG4gKlxuICogQG1ldGhvZCBvbkpTT05Mb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3BpbmVMb2FkZXIucHJvdG90eXBlLm9uSlNPTkxvYWRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHR2YXIgc3BpbmVKc29uUGFyc2VyID0gbmV3IHNwaW5lLlNrZWxldG9uSnNvbigpO1xuXHR2YXIgc2tlbGV0b25EYXRhID0gc3BpbmVKc29uUGFyc2VyLnJlYWRTa2VsZXRvbkRhdGEodGhpcy5qc29uKTtcblxuXHRQSVhJLkFuaW1DYWNoZVt0aGlzLnVybF0gPSBza2VsZXRvbkRhdGE7XG5cblx0dGhpcy5vbkxvYWRlZCgpO1xufTtcblxuLyoqXG4gKiBJbnZva2Ugd2hlbiBKU09OIGZpbGUgaXMgbG9hZGVkXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6IFwibG9hZGVkXCIsIGNvbnRlbnQ6IHRoaXN9KTtcbn07XG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgIGNyZWF0aW5nIGEgcGl4aS5qcyBmaWx0ZXIuIEN1cnJlbnRseSBvbmx5IHdlYkdMIHN1cHBvcnRzIGZpbHRlcnMuXG4gKiBJZiB5b3Ugd2FudCB0byBtYWtlIGEgY3VzdG9tIGZpbHRlciB0aGlzIHNob3VsZCBiZSB5b3VyIGJhc2UgY2xhc3MuXG4gKiBAY2xhc3MgQWJzdHJhY3RGaWx0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIGZyYWdtZW50U3JjXG4gKiBAcGFyYW0gdW5pZnJvbXMgIFxuICovXG5QSVhJLkFic3RyYWN0RmlsdGVyID0gZnVuY3Rpb24oZnJhZ21lbnRTcmMsIHVuaWZyb21zKVxue1xuXHQvKipcblx0KiBBbiBhcnJheSBvZiBwYXNzZXMgLSBzb21lIGZpbHRlcnMgY29udGFpbiBhIGZldyBzdGVwcyB0aGlzIGFycmF5IHNpbXBseSBzdG9yZXMgdGhlIHN0ZXBzIGluIGEgbGluaWVhciBmYXNoaW9uLlxuXHQqIEZvciBleGFtcGxlIHRoZSBibHVyIGZpbHRlciBoYXMgdHdvIHBhc3NlcyBibHVyWCBhbmQgYmx1clkuXG5cdCogQHByb3BlcnR5IHBhc3Nlc1xuXHQqIEB0eXBlIEFycmF5IGFuIGFycmF5IG9mIGZpbHRlciBvYmplY3RzXG5cdCogQHByaXZhdGVcblx0Ki9cblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cblxuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5wYWRkaW5nID0gMDtcblxuXHQvKipcblx0QHByb3BlcnR5IHVuaWZvcm1zXG5cdEBwcml2YXRlXG5cdCovXG5cdHRoaXMudW5pZm9ybXMgPSB1bmlmcm9tcyB8fCB7fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBmcmFnbWVudFNyYyB8fCBbXTtcbn1cblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGUgQ29sb3JNYXRyaXhGaWx0ZXIgY2xhc3MgbGV0cyB5b3UgYXBwbHkgYSA0eDQgbWF0cml4IHRyYW5zZm9ybWF0aW9uIG9uIHRoZSBSR0JBIFxuICogY29sb3IgYW5kIGFscGhhIHZhbHVlcyBvZiBldmVyeSBwaXhlbCBvbiB5b3VyIGRpc3BsYXlPYmplY3QgdG8gcHJvZHVjZSBhIHJlc3VsdCBcbiAqIHdpdGggYSBuZXcgc2V0IG9mIFJHQkEgY29sb3IgYW5kIGFscGhhIHZhbHVlcy4gSXRzIHByZXR0eSBwb3dlcmZ1bCFcbiAqIEBjbGFzcyBDb2xvck1hdHJpeEZpbHRlclxuICogQGNvbnRydWN0b3JcbiAqL1xuUElYSS5Db2xvck1hdHJpeEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRtYXRyaXg6IHt0eXBlOiAnbWF0NCcsIHZhbHVlOiBbMSwwLDAsMCxcblx0XHRcdFx0XHRcdFx0XHRcdCAgIDAsMSwwLDAsXG5cdFx0XHRcdFx0XHRcdFx0XHQgICAwLDAsMSwwLFxuXHRcdFx0XHRcdFx0XHRcdFx0ICAgMCwwLDAsMV19LFxuXHR9O1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gZmxvYXQgaW52ZXJ0O1wiLFxuXHQgIFwidW5pZm9ybSBtYXQ0IG1hdHJpeDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIG1hdHJpeDtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdkNvbG9yO1wiLFxuXHQgIFwifVwiXG5cdF07XG5cdFxufVxuXG5QSVhJLkNvbG9yTWF0cml4RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkNvbG9yTWF0cml4RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ29sb3JNYXRyaXhGaWx0ZXI7XG5cbi8qKlxuICogU2V0cyB0aGUgbWF0cml4IG9mIHRoZSBjb2xvciBtYXRyaXggZmlsdGVyXG4gKlxuICogQHByb3BlcnR5IG1hdHJpeFxuICogQHR5cGUgQXJyYXkgYW5kIGFycmF5IG9mIDI2IG51bWJlcnNcbiAqIEBkZWZhdWx0IFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5Db2xvck1hdHJpeEZpbHRlci5wcm90b3R5cGUsICdtYXRyaXgnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMubWF0cml4LnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy51bmlmb3Jtcy5tYXRyaXgudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyB0dXJucyB5b3VyIGRpc3BsYXlPYmplY3RzIHRvIGJsYWNrIGFuZCB3aGl0ZS5cbiAqIEBjbGFzcyBHcmV5RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkdyZXlGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Z3JleToge3R5cGU6ICdmJywgdmFsdWU6IDF9LFxuXHR9O1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidW5pZm9ybSBmbG9hdCBncmV5O1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0XHRcImdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoZ2xfRnJhZ0NvbG9yLnJnYiwgdmVjMygwLjIxMjYqZ2xfRnJhZ0NvbG9yLnIgKyAwLjcxNTIqZ2xfRnJhZ0NvbG9yLmcgKyAwLjA3MjIqZ2xfRnJhZ0NvbG9yLmIpLCBncmV5KTtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdkNvbG9yO1wiLFxuXHQgIFwifVwiXG5cdF07XG59XG5cblBJWEkuR3JleUZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5HcmV5RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuR3JleUZpbHRlcjtcblxuLyoqXG5UaGUgc3RyZW5ndGggb2YgdGhlIGdyZXkuIDEgd2lsbCBtYWtlIHRoZSBvYmplY3QgYmxhY2sgYW5kIHdoaXRlLCAwIHdpbGwgbWFrZSB0aGUgb2JqZWN0IGl0cyBub3JtYWwgY29sb3JcbkBwcm9wZXJ0eSBncmV5XG4qL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuR3JleUZpbHRlci5wcm90b3R5cGUsICdncmV5Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmdyZXkudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLmdyZXkudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogXG4gKiBUaGUgRGlzcGxhY2VtZW50RmlsdGVyIGNsYXNzIHVzZXMgdGhlIHBpeGVsIHZhbHVlcyBmcm9tIHRoZSBzcGVjaWZpZWQgdGV4dHVyZSAoY2FsbGVkIHRoZSBkaXNwbGFjZW1lbnQgbWFwKSB0byBwZXJmb3JtIGEgZGlzcGxhY2VtZW50IG9mIGFuIG9iamVjdC4gXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGZpbHRlciB0byBhcHBseSBhbGwgbWFub3Igb2YgY3Jhenkgd2FycGluZyBlZmZlY3RzXG4gKiBDdXJyZW50bHkgdGhlIHIgcHJvcGVydHkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCBvZmZzZXQgdGhlIHggYW5kIHRoZSBnIHByb3Blcnkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCB0byBvZmZzZXQgdGhlIHkuXG4gKiBAY2xhc3MgRGlzcGxhY2VtZW50RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSB0ZXh0dXJlIHVzZWQgZm9yIHRoZSBkaXNwbGFjZW10ZW50IG1hcCAqIG11c3QgYmUgcG93ZXIgb2YgMiB0ZXh0dXJlIGF0IHRoZSBtb21lbnRcbiAqL1xuUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIgPSBmdW5jdGlvbih0ZXh0dXJlKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblx0XG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHR0ZXh0dXJlLmJhc2VUZXh0dXJlLl9wb3dlck9mMiA9IHRydWU7XG5cblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHQvL2NvbnNvbGUubG9nKClcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRkaXNwbGFjZW1lbnRNYXA6IHt0eXBlOiAnc2FtcGxlcjJEJywgdmFsdWU6dGV4dHVyZX0sXG5cdFx0c2NhbGU6XHRcdFx0IHt0eXBlOiAnZjInLCB2YWx1ZTp7eDozMCwgeTozMH19LFxuXHRcdG9mZnNldDpcdFx0XHQge3R5cGU6ICdmMicsIHZhbHVlOnt4OjAsIHk6MH19LFxuXHRcdG1hcERpbWVuc2lvbnM6ICAge3R5cGU6ICdmMicsIHZhbHVlOnt4OjEsIHk6NTExMn19LFxuXHRcdGRpbWVuc2lvbnM6ICAge3R5cGU6ICdmNCcsIHZhbHVlOlswLDAsMCwwXX1cblx0fTtcblx0XG5cblx0aWYodGV4dHVyZS5iYXNlVGV4dHVyZS5oYXNMb2FkZWQpXG5cdHtcblx0XHR0aGlzLnVuaWZvcm1zLm1hcERpbWVuc2lvbnMudmFsdWUueCA9IHRleHR1cmUud2lkdGg7XG5cdFx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnkgPSB0ZXh0dXJlLmhlaWdodDtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLmJvdW5kTG9hZGVkRnVuY3Rpb24gPSB0aGlzLm9uVGV4dHVyZUxvYWRlZC5iaW5kKHRoaXMpO1xuXG5cdFx0dGV4dHVyZS5iYXNlVGV4dHVyZS5vbihcImxvYWRlZFwiLCB0aGlzLmJvdW5kTG9hZGVkRnVuY3Rpb24pO1xuXHR9XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIGRpc3BsYWNlbWVudE1hcDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIHNjYWxlO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIG9mZnNldDtcIixcblx0ICBcInVuaWZvcm0gdmVjNCBkaW1lbnNpb25zO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIG1hcERpbWVuc2lvbnM7XCIsLy8gPSB2ZWMyKDI1Ni4wLCAyNTYuMCk7XCIsXG5cdCAvLyBcImNvbnN0IHZlYzIgdGV4dHVyZURpbWVuc2lvbnMgPSB2ZWMyKDc1MC4wLCA3NTAuMCk7XCIsXG5cdCAgXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgIFx0XCJ2ZWMyIG1hcENvcmRzID0gdlRleHR1cmVDb29yZC54eTtcIixcbi8vXHQgIFx0XCJtYXBDb3JkcyAtPSA7XCIsXG5cdCBcdFwibWFwQ29yZHMgKz0gKGRpbWVuc2lvbnMuencgKyBvZmZzZXQpLyBkaW1lbnNpb25zLnh5IDtcIixcblx0IFx0XCJtYXBDb3Jkcy55ICo9IC0xLjA7XCIsXG5cdCBcdFwibWFwQ29yZHMueSArPSAxLjA7XCIsXG5cdCAgXHRcInZlYzIgbWF0U2FtcGxlID0gdGV4dHVyZTJEKGRpc3BsYWNlbWVudE1hcCwgbWFwQ29yZHMpLnh5O1wiLFxuXHRcdFwibWF0U2FtcGxlIC09IDAuNTtcIixcdCAgXG5cdCBcdFwibWF0U2FtcGxlICo9IHNjYWxlO1wiLFxuXHQgXHRcIm1hdFNhbXBsZSAvPSBtYXBEaW1lbnNpb25zO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgbWF0U2FtcGxlLngsIHZUZXh0dXJlQ29vcmQueSArIG1hdFNhbXBsZS55KSk7XCIsXG5cdFx0XCJnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBnbF9GcmFnQ29sb3IucmdiLCAxLjApO1wiLFxuXHRcdFwidmVjMiBjb3JkID0gdlRleHR1cmVDb29yZDtcIixcblx0XHRcblx0XHQvL1wiZ2xfRnJhZ0NvbG9yID0gIHRleHR1cmUyRChkaXNwbGFjZW1lbnRNYXAsIGNvcmQpO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgICBcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuRGlzcGxhY2VtZW50RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRGlzcGxhY2VtZW50RmlsdGVyO1xuXG5QSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUub25UZXh0dXJlTG9hZGVkID0gZnVuY3Rpb24oKVxue1xuXHRcblx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnggPSB0aGlzLnVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZS53aWR0aDtcblx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnkgPSB0aGlzLnVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZS5oZWlnaHQ7XG5cblx0dGhpcy51bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUuYmFzZVRleHR1cmUub2ZmKFwibG9hZGVkXCIsIHRoaXMuYm91bmRMb2FkZWRGdW5jdGlvbilcblxufVxuXG4vKipcbiAqIFRoZSB0ZXh0dXJlIHVzZWQgZm9yIHRoZSBkaXNwbGFjZW10ZW50IG1hcCAqIG11c3QgYmUgcG93ZXIgb2YgMiB0ZXh0dXJlIGF0IHRoZSBtb21lbnRcbiAqXG4gKiBAcHJvcGVydHkgbWFwXG4gKiBAdHlwZSBUZXh0dXJlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUsICdtYXAnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy51bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgbXVsdGlwbGllciB1c2VkIHRvIHNjYWxlIHRoZSBkaXNwbGFjZW1lbnQgcmVzdWx0IGZyb20gdGhlIG1hcCBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcHJvcGVydHkgc2NhbGVcbiAqIEB0eXBlIFBvaW50XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUsICdzY2FsZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5zY2FsZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMuc2NhbGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgb2Zmc2V0IHVzZWQgdG8gbW92ZSB0aGUgZGlzcGxhY2VtZW50IG1hcC5cbiAqXG4gKiBAcHJvcGVydHkgb2Zmc2V0XG4gKiBAdHlwZSBQb2ludFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm9mZnNldC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMub2Zmc2V0LnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGZpbHRlciBhcHBsaWVzIGEgcGl4bGF0ZSBlZmZlY3QgbWFraW5nIGRpc3BsYXkgb2JqZWN0cyBhcHBlYXIgXCJibG9ja3lcIlxuICogQGNsYXNzIFBpeGVsYXRlRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLlBpeGVsYXRlRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRpbnZlcnQ6IHt0eXBlOiAnZicsIHZhbHVlOiAwfSxcblx0XHRkaW1lbnNpb25zOiB7dHlwZTogJ2Y0JywgdmFsdWU6bmV3IEZsb2F0MzJBcnJheShbMTAwMDAsIDEwMCwgMTAsIDEwXSl9LFxuXHRcdHBpeGVsU2l6ZToge3R5cGU6ICdmMicsIHZhbHVlOnt4OjEwLCB5OjEwfX0sXG5cdH07XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gdmVjMiB0ZXN0RGltO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWM0IGRpbWVuc2lvbnM7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzIgcGl4ZWxTaXplO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgXHRcInZlYzIgY29vcmQgPSB2VGV4dHVyZUNvb3JkO1wiLFxuXG5cdCBcdFwidmVjMiBzaXplID0gZGltZW5zaW9ucy54eS9waXhlbFNpemU7XCIsXG5cblx0IFx0XCJ2ZWMyIGNvbG9yID0gZmxvb3IoICggdlRleHR1cmVDb29yZCAqIHNpemUgKSApIC8gc2l6ZSArIHBpeGVsU2l6ZS9kaW1lbnNpb25zLnh5ICogMC41O1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNvbG9yKTtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcblxufVxuXG5QSVhJLlBpeGVsYXRlRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLlBpeGVsYXRlRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuUGl4ZWxhdGVGaWx0ZXI7XG5cbi8qKlxuICogXG4gKiBUaGlzIGEgcG9pbnQgdGhhdCBkZXNjcmliZXMgdGhlIHNpemUgb2YgdGhlIGJsb2NzLiB4IGlzIHRoZSB3aWR0aCBvZiB0aGUgYmxvY2sgYW5kIHkgaXMgdGhlIHRoZSBoZWlnaHRcbiAqIEBwcm9wZXJ0eSBzaXplXG4gKiBAdHlwZSBQb2ludFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5QaXhlbGF0ZUZpbHRlci5wcm90b3R5cGUsICdzaXplJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnBpeGVsU2l6ZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5waXhlbFNpemUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuQmx1clhGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Ymx1cjoge3R5cGU6ICdmJywgdmFsdWU6IDEvNTEyfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGJsdXI7XCIsXG5cdCAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcblx0ICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICBcdFwidmVjNCBzdW0gPSB2ZWM0KDAuMCk7XCIsXG5cblx0ICBcdFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggLSA0LjAqYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjA1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCAtIDMuMCpibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMDk7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54IC0gMi4wKmJsdXIsIHZUZXh0dXJlQ29vcmQueSkpICogMC4xMjtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggLSBibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTU7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTY7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjE1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCArIDIuMCpibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTI7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgMy4wKmJsdXIsIHZUZXh0dXJlQ29vcmQueSkpICogMC4wOTtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggKyA0LjAqYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjA1O1wiLFxuXHQgXG5cdFx0XCJnbF9GcmFnQ29sb3IgPSBzdW07XCIsXG5cblx0ICBcIn1cIlxuXHRdO1xufVxuXG5QSVhJLkJsdXJYRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkJsdXJYRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1clhGaWx0ZXI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuQmx1clhGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlIC8gKDEvNzAwMCk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXG4gICAgXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuQmx1cllGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Ymx1cjoge3R5cGU6ICdmJywgdmFsdWU6IDEvNTEyfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGJsdXI7XCIsXG5cdCAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcblx0ICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICBcdFwidmVjNCBzdW0gPSB2ZWM0KDAuMCk7XCIsXG5cblx0ICBcdFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSAtIDQuMCpibHVyKSkgKiAwLjA1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCwgdlRleHR1cmVDb29yZC55IC0gMy4wKmJsdXIpKSAqIDAuMDk7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgLSAyLjAqYmx1cikpICogMC4xMjtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSAtIGJsdXIpKSAqIDAuMTU7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTY7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgKyBibHVyKSkgKiAwLjE1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCwgdlRleHR1cmVDb29yZC55ICsgMi4wKmJsdXIpKSAqIDAuMTI7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgKyAzLjAqYmx1cikpICogMC4wOTtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSArIDQuMCpibHVyKSkgKiAwLjA1O1wiLFxuXHQgXG5cdFx0XCJnbF9GcmFnQ29sb3IgPSBzdW07XCIsXG5cblx0ICBcIn1cIlxuXHRdO1xufVxuXG5QSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1cllGaWx0ZXI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZSwgJ2JsdXInLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSAvICgxLzcwMDApO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0Ly90aGlzLnBhZGRpbmcgPSB2YWx1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhlIEJsdXJGaWx0ZXIgYXBwbGllcyBhIEdhdXNzaWFuIGJsdXIgdG8gYW4gb2JqZWN0LiBcbiAqIFRoZSBzdHJlbmd0aCBvZiB0aGUgYmx1ciBjYW4gYmUgc2V0IGZvciB4LSBhbmQgeS1heGlzIHNlcGFyYXRlbHkgKGFsd2F5cyByZWxhdGl2ZSB0byB0aGUgc3RhZ2UpLlxuICpcbiAqIEBjbGFzcyBCbHVyRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkJsdXJGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG4gICAgXG5cdHRoaXMuYmx1clhGaWx0ZXIgPSBuZXcgUElYSS5CbHVyWEZpbHRlcigpO1xuXHR0aGlzLmJsdXJZRmlsdGVyID0gbmV3IFBJWEkuQmx1cllGaWx0ZXIoKTtcblxuXHR0aGlzLnBhc3NlcyA9W3RoaXMuYmx1clhGaWx0ZXIsIHRoaXMuYmx1cllGaWx0ZXJdO1xuXHRcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiBib3RoIHRoZSBibHVyWCBhbmQgYmx1clkgcHJvcGVydGllcyBzaW11bHRhbmVvdXNseVxuICpcbiAqIEBwcm9wZXJ0eSBibHVyXG4gKiBAdHlwZSBOdW1iZXIgdGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyXG4gKiBAZGVmYXVsdCAyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibHVyWEZpbHRlci5ibHVyO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICBcdFx0dGhpcy5ibHVyWEZpbHRlci5ibHVyID0gdGhpcy5ibHVyWUZpbHRlci5ibHVyID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJYIHByb3BlcnR5IHNpbXVsdGFuZW91c2x5XG4gKlxuICogQHByb3BlcnR5IGJsdXJYXG4gKiBAdHlwZSBOdW1iZXIgdGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyWFxuICogQGRlZmF1bHQgMlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5CbHVyRmlsdGVyLnByb3RvdHlwZSwgJ2JsdXJYJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdXJYRmlsdGVyLmJsdXI7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLmJsdXJYRmlsdGVyLmJsdXIgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiB0aGUgYmx1clggcHJvcGVydHkgc2ltdWx0YW5lb3VzbHlcbiAqXG4gKiBAcHJvcGVydHkgYmx1cllcbiAqIEB0eXBlIE51bWJlciB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJZXG4gKiBAZGVmYXVsdCAyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJGaWx0ZXIucHJvdG90eXBlLCAnYmx1clknLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmx1cllGaWx0ZXIuYmx1cjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuYmx1cllGaWx0ZXIuYmx1ciA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGludmVydHMgeW91ciBkaXNwbGF5T2JqZWN0cyBjb2xvcnMuXG4gKiBAY2xhc3MgSW52ZXJ0RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkludmVydEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRpbnZlcnQ6IHt0eXBlOiAnZicsIHZhbHVlOiAxfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGludmVydDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0XHRcImdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoICh2ZWMzKDEpLWdsX0ZyYWdDb2xvci5yZ2IpICogZ2xfRnJhZ0NvbG9yLmEsIGdsX0ZyYWdDb2xvci5yZ2IsIDEuMCAtIGludmVydCk7XCIsXG5cdFx0Ly9cImdsX0ZyYWdDb2xvci5yZ2IgPSBnbF9GcmFnQ29sb3IucmdiICAqIGdsX0ZyYWdDb2xvci5hO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgXCJ9XCJcblx0XTtcblx0XG59XG5cblBJWEkuSW52ZXJ0RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkludmVydEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludmVydEZpbHRlcjtcblxuLyoqXG5UaGUgc3RyZW5ndGggb2YgdGhlIGludmVydC4gMSB3aWxsIGZ1bGx5IGludmVydCB0aGUgY29sb3JzLCAwIHdpbGwgbWFrZSB0aGUgb2JqZWN0IGl0cyBub3JtYWwgY29sb3JcbkBwcm9wZXJ0eSBpbnZlcnRcbiovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5JbnZlcnRGaWx0ZXIucHJvdG90eXBlLCAnaW52ZXJ0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmludmVydC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMuaW52ZXJ0LnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG4vKipcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyBhcHBsaWVzIGEgc2VwaWEgZWZmZWN0IHRvIHlvdXIgZGlzcGxheU9iamVjdHMuXG4gKiBAY2xhc3MgU2VwaWFGaWx0ZXJcbiAqIEBjb250cnVjdG9yXG4gKi9cblBJWEkuU2VwaWFGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0c2VwaWE6IHt0eXBlOiAnZicsIHZhbHVlOiAxfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IHNlcGlhO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCBcdCAgIFxuXHQgIFwiY29uc3QgbWF0MyBzZXBpYU1hdHJpeCA9IG1hdDMoMC4zNTg4LCAwLjcwNDQsIDAuMTM2OCwgMC4yOTkwLCAwLjU4NzAsIDAuMTE0MCwgMC4yMzkyLCAwLjQ2OTYsIDAuMDkxMik7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpO1wiLFxuXHRcdFwiZ2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZ2xfRnJhZ0NvbG9yLnJnYiAqIHNlcGlhTWF0cml4LCBzZXBpYSk7XCIsXG5cdCAgICBcImdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHZDb2xvcjtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5TZXBpYUZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5TZXBpYUZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNlcGlhRmlsdGVyO1xuXG4vKipcblRoZSBzdHJlbmd0aCBvZiB0aGUgc2VwaWEuIDEgd2lsbCBhcHBseSB0aGUgZnVsbCBzZXBpYSBlZmZlY3QsIDAgd2lsbCBtYWtlIHRoZSBvYmplY3QgaXRzIG5vcm1hbCBjb2xvclxuQHByb3BlcnR5IHNlcGlhXG4qL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuU2VwaWFGaWx0ZXIucHJvdG90eXBlLCAnc2VwaWEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuc2VwaWEudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnNlcGlhLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBcbiAqIFRoaXMgZmlsdGVyIGFwcGxpZXMgYSBwaXhsYXRlIGVmZmVjdCBtYWtpbmcgZGlzcGxheSBvYmplY3RzIGFwcGVhciBcImJsb2NreVwiXG4gKiBAY2xhc3MgUGl4ZWxhdGVGaWx0ZXJcbiAqIEBjb250cnVjdG9yXG4gKi9cblBJWEkuVHdpc3RGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHRcblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHR0aGlzLnVuaWZvcm1zID0ge1xuXHRcdHJhZGl1czoge3R5cGU6ICdmJywgdmFsdWU6MC41fSxcblx0XHRhbmdsZToge3R5cGU6ICdmJywgdmFsdWU6NX0sXG5cdFx0b2Zmc2V0OiB7dHlwZTogJ2YyJywgdmFsdWU6e3g6MC41LCB5OjAuNX19LFxuXHR9O1xuXG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzQgZGltZW5zaW9ucztcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFxuXHQgIFwidW5pZm9ybSBmbG9hdCByYWRpdXM7XCIsXG4gICAgICBcInVuaWZvcm0gZmxvYXQgYW5nbGU7XCIsXG4gICAgICBcInVuaWZvcm0gdmVjMiBvZmZzZXQ7XCIsXG5cblx0ICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG5cdCBcdFwidmVjMiBjb29yZCA9IHZUZXh0dXJlQ29vcmQgLSBvZmZzZXQ7XCIsXG5cdFx0XCJmbG9hdCBkaXN0YW5jZSA9IGxlbmd0aChjb29yZCk7XCIsXG5cdCBcdFxuXHQgXHRcImlmIChkaXN0YW5jZSA8IHJhZGl1cyl7XCIsXG5cblx0XHQgXHRcImZsb2F0IHJhdGlvID0gKHJhZGl1cyAtIGRpc3RhbmNlKSAvIHJhZGl1cztcIixcblx0XHQgXHRcImZsb2F0IGFuZ2xlTW9kID0gcmF0aW8gKiByYXRpbyAqIGFuZ2xlO1wiLFxuXHRcdCBcdFwiZmxvYXQgcyA9IHNpbihhbmdsZU1vZCk7XCIsXG5cdFx0IFx0XCJmbG9hdCBjID0gY29zKGFuZ2xlTW9kKTtcIixcblx0XHQgXHRcImNvb3JkID0gdmVjMihjb29yZC54ICogYyAtIGNvb3JkLnkgKiBzLCBjb29yZC54ICogcyArIGNvb3JkLnkgKiBjKTtcIixcblxuXHQgXHRcIn1cIixcblxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNvb3JkK29mZnNldCk7XCIsXG5cdCAgXCJ9XCJcblx0XTtcbn1cblxuUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlR3aXN0RmlsdGVyO1xuXG4vKipcbiAqIFxuICogVGhpcyBwb2ludCBkZXNjcmliZXMgdGhlIHRoZSBvZmZzZXQgb2YgdGhlIHR3aXN0XG4gKiBAcHJvcGVydHkgc2l6ZVxuICogQHR5cGUgUG9pbnRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuVHdpc3RGaWx0ZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm9mZnNldC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5vZmZzZXQudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBcbiAqIFRoaXMgcmFkaXVzIGRlc2NyaWJlcyBzaXplIG9mIHRoZSB0d2lzdFxuICogQHByb3BlcnR5IHNpemVcbiAqIEB0eXBlIE51bWJlclxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUsICdyYWRpdXMnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMucmFkaXVzLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnJhZGl1cy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFxuICogVGhpcyByYWRpdXMgZGVzY3JpYmVzIGFuZ2xlIG9mIHRoZSB0d2lzdFxuICogQHByb3BlcnR5IGFuZ2xlXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuVHdpc3RGaWx0ZXIucHJvdG90eXBlLCAnYW5nbGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyB0dXJucyB5b3VyIGRpc3BsYXlPYmplY3RzIHRvIGJsYWNrIGFuZCB3aGl0ZS5cbiAqIEBjbGFzcyBHcmV5RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkNvbG9yU3RlcEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRzdGVwOiB7dHlwZTogJ2YnLCB2YWx1ZTogNX0sXG5cdH07XG5cdFxuXHR0aGlzLmZyYWdtZW50U3JjID0gW1xuXHQgIFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcblx0ICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IHN0ZXA7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgICAgXCJ2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0ICAgIFwiY29sb3IgPSBmbG9vcihjb2xvciAqIHN0ZXApIC8gc3RlcDtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgXCJ9XCJcblx0XTtcbn1cblxuUElYSS5Db2xvclN0ZXBGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuQ29sb3JTdGVwRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ29sb3JTdGVwRmlsdGVyO1xuXG4vKipcblRoZSBudW1iZXIgb2Ygc3RlcHMuXG5AcHJvcGVydHkgc3RlcFxuKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkNvbG9yU3RlcEZpbHRlci5wcm90b3R5cGUsICdzdGVwJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnN0ZXAudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnN0ZXAudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqIG9yaWdpbmFsIGZpbHRlcjogaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2dsZnguanMvYmxvYi9tYXN0ZXIvc3JjL2ZpbHRlcnMvZnVuL2RvdHNjcmVlbi5qc1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGZpbHRlciBhcHBsaWVzIGEgcGl4bGF0ZSBlZmZlY3QgbWFraW5nIGRpc3BsYXkgb2JqZWN0cyBhcHBlYXIgXCJibG9ja3lcIlxuICogQGNsYXNzIFBpeGVsYXRlRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkRvdFNjcmVlbkZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0c2NhbGU6IHt0eXBlOiAnZicsIHZhbHVlOjF9LFxuXHRcdGFuZ2xlOiB7dHlwZTogJ2YnLCB2YWx1ZTo1fSxcblx0XHRkaW1lbnNpb25zOiAgIHt0eXBlOiAnZjQnLCB2YWx1ZTpbMCwwLDAsMF19XG5cdH07XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gdmVjNCBkaW1lbnNpb25zO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cblx0ICAgIFwidW5pZm9ybSBmbG9hdCBhbmdsZTtcIixcblx0ICAgIFwidW5pZm9ybSBmbG9hdCBzY2FsZTtcIixcblxuXHQgICAgXCJmbG9hdCBwYXR0ZXJuKCkge1wiLFxuXHQgICAgXHRcImZsb2F0IHMgPSBzaW4oYW5nbGUpLCBjID0gY29zKGFuZ2xlKTtcIixcblx0ICAgIFx0XCJ2ZWMyIHRleCA9IHZUZXh0dXJlQ29vcmQgKiBkaW1lbnNpb25zLnh5O1wiLFxuXHQgICAgXHRcInZlYzIgcG9pbnQgPSB2ZWMyKFwiLFxuXHQgICAgXHRcdFwiYyAqIHRleC54IC0gcyAqIHRleC55LFwiLFxuXHQgICAgXHRcdFwicyAqIHRleC54ICsgYyAqIHRleC55XCIsXG5cdCAgICBcdFwiKSAqIHNjYWxlO1wiLFxuXHQgICAgXHRcInJldHVybiAoc2luKHBvaW50LngpICogc2luKHBvaW50LnkpKSAqIDQuMDtcIixcblx0ICAgIFwifVwiLFxuXG5cdCAgICBcInZvaWQgbWFpbigpIHtcIixcbiAgICAgICAgICAgIFwidmVjNCBjb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XCIsXG4gICAgICAgICAgICBcImZsb2F0IGF2ZXJhZ2UgPSAoY29sb3IuciArIGNvbG9yLmcgKyBjb2xvci5iKSAvIDMuMDtcIixcbiAgICAgICAgICAgIFwiZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGF2ZXJhZ2UgKiAxMC4wIC0gNS4wICsgcGF0dGVybigpKSwgY29sb3IuYSk7XCIsXG4gICAgICAgIFwifVwiLFxuXHRdO1xufVxuXG5QSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuRG90U2NyZWVuRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRG90U2NyZWVuRmlsdGVyO1xuXG4vKipcbiAqIFxuICogVGhpcyBkZXNjcmliZXMgdGhlIHRoZSBzY2FsZVxuICogQHByb3BlcnR5IHNjYWxlXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuRG90U2NyZWVuRmlsdGVyLnByb3RvdHlwZSwgJ3NjYWxlJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnNjYWxlLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnNjYWxlLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogXG4gKiBUaGlzIHJhZGl1cyBkZXNjcmliZXMgYW5nbGVcbiAqIEBwcm9wZXJ0eSBhbmdsZVxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUsICdhbmdsZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5hbmdsZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5hbmdsZS52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn0pO1xuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblxuUElYSS5Dcm9zc0hhdGNoRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblx0XG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHRcblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHR0aGlzLnVuaWZvcm1zID0ge1xuXHRcdGJsdXI6IHt0eXBlOiAnZicsIHZhbHVlOiAxLzUxMn0sXG5cdH07XG5cdFxuXHR0aGlzLmZyYWdtZW50U3JjID0gW1xuXHQgIFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcblx0ICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuXHQgIFwidW5pZm9ybSBmbG9hdCBibHVyO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG5cdCAgXHRcblx0ICAgIFxuXHRcdFwiICAgIGZsb2F0IGx1bSA9IGxlbmd0aCh0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQueHkpLnJnYik7XCIsXG5cdFx0XCIgICAgIFwiLFxuXHRcdFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDEuMDApIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCArIGdsX0ZyYWdDb29yZC55LCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuNzUpIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCAtIGdsX0ZyYWdDb29yZC55LCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuNTApIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCArIGdsX0ZyYWdDb29yZC55IC0gNS4wLCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuMykge1wiLFxuXHRcdFwiICAgICAgICBpZiAobW9kKGdsX0ZyYWdDb29yZC54IC0gZ2xfRnJhZ0Nvb3JkLnkgLSA1LjAsIDEwLjApID09IDAuMCkge1wiLFxuXHRcdFwiICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApO1wiLFxuXHRcdFwiICAgICAgICB9XCIsXG5cdFx0XCIgICAgfVwiLFxuXHRcdFwifVwiXG5cdF07XG59XG5cblBJWEkuQ3Jvc3NIYXRjaEZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5Dcm9zc0hhdGNoRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1cllGaWx0ZXI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkNyb3NzSGF0Y2hGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlIC8gKDEvNzAwMCk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHQvL3RoaXMucGFkZGluZyA9IHZhbHVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlID0gKDEvNzAwMCkgKiB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblxuUElYSS5SR0JTcGxpdEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRyZWQ6IHt0eXBlOiAnZjInLCB2YWx1ZToge3g6MjAsIHk6MjB9fSxcblx0XHRncmVlbjoge3R5cGU6ICdmMicsIHZhbHVlOiB7eDotMjAsIHk6MjB9fSxcblx0XHRibHVlOiB7dHlwZTogJ2YyJywgdmFsdWU6IHt4OjIwLCB5Oi0yMH19LFxuXHRcdGRpbWVuc2lvbnM6ICAge3R5cGU6ICdmNCcsIHZhbHVlOlswLDAsMCwwXX1cblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzIgcmVkO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIGdyZWVuO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIGJsdWU7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzQgZGltZW5zaW9ucztcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgICAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkICsgcmVkL2RpbWVuc2lvbnMueHkpLnI7XCIsXG5cdCAgXHQgIFwiZ2xfRnJhZ0NvbG9yLmcgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQgKyBncmVlbi9kaW1lbnNpb25zLnh5KS5nO1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5iID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkICsgYmx1ZS9kaW1lbnNpb25zLnh5KS5iO1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5hID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKS5hO1wiLFxuXHQgIFwifVwiXG5cdF07XG59XG5cblBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SR0JTcGxpdEZpbHRlcjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlLCAnYW5nbGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSAvICgxLzcwMDApO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0Ly90aGlzLnBhZGRpbmcgPSB2YWx1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuICAgIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBQSVhJO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuUElYSSA9IFBJWEk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShQSVhJKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LlBJWEkgPSBQSVhJO1xuICAgIH1cbn0pLmNhbGwodGhpcyk7XG4vL0Agc291cmNlTWFwcGluZ1VSTD1waXhpLmRldi5qcy5tYXAiLCJyZXF1aXJlKCdlczUtc2hpbWlmeScpXG5cbnJlcXVpcmUoJ3NwaW5lJylcbnJlcXVpcmUoJ3NwaW5lL2xpYi9sb2NhbCcpXG5yZXF1aXJlKCdzcGluZS9saWIvbWFuYWdlcicpXG5yZXF1aXJlKCdzcGluZS9saWIvcm91dGUnKVxuXG5yZXF1aXJlKCcuL3NwaW5lLmFqYXgnKVxucmVxdWlyZSgnLi9zcGluZS5hd2FpdGFqYXgnKVxuXG5cbndpbmRvdy5NYXRoMiA9IHJlcXVpcmUoJy4vTWF0aDInKVxuXG4kIC0+XG4gIHJldHVybiBpZiB3aW5kb3cuYXBwXG4gIEFwcCA9IHJlcXVpcmUgXCIuLi9waXhpanMtcGxheWdyb3VuZFwiXG4gIHdpbmRvdy5hcHAgPSBuZXcgQXBwIGVsOiAkIFwiYm9keVwiXG4iLCJTcGluZSAgID0gQFNwaW5lIG9yIHJlcXVpcmUgXCJzcGluZVwiXG57TW9kZWx9ID0gU3BpbmVcbiMge1BpcGVsaW5lcn0gPSByZXF1aXJlICcvbGliL2ljZWRsaWInXG5cblxuQWpheCA9XG4gIGdldFVSTDogKG9iamVjdCkgLT5cbiAgICBvYmplY3QgYW5kIG9iamVjdC51cmw/KCkgb3Igb2JqZWN0LnVybFxuXG4gIGVuYWJsZWQ6IHRydWVcblxuICBkaXNhYmxlOiAoY2FsbGJhY2spIC0+XG4gICAgaWYgQGVuYWJsZWRcbiAgICAgIEBlbmFibGVkID0gZmFsc2VcbiAgICAgIHRyeVxuICAgICAgICBkbyBjYWxsYmFja1xuICAgICAgY2F0Y2ggZVxuICAgICAgICB0aHJvdyBlXG4gICAgICBmaW5hbGx5XG4gICAgICAgIEBlbmFibGVkID0gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIGRvIGNhbGxiYWNrXG5cbiAgbWF4OiAxMDBcbiAgdGhyb3R0bGU6IDBcblxuICBxdWV1ZTogKHJlcXVlc3QpIC0+XG4gICAgQHBpcGVsaW5lciBvcj0gbmV3IFBpcGVsaW5lciBAbWF4LCBAdGhyb3R0bGVcbiAgICByZXR1cm4gQHBpcGVsaW5lci5xdWV1ZSB1bmxlc3MgcmVxdWVzdFxuICAgIGF3YWl0IEBwaXBlbGluZXIud2FpdEluUXVldWUgZGVmZXIoKVxuICAgIHJlcXVlc3QgQHBpcGVsaW5lci5kZWZlcigpXG5cbiAgY2xlYXJRdWV1ZTogLT5cbiAgICBAcGlwZWxpbmVyLnF1ZXVlID0gW11cbiAgICBAcGlwZWxpbmVyLm5fb3V0ID0gMFxuXG5jbGFzcyBCYXNlXG4gIGRlZmF1bHRzOlxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgaGVhZGVyczogeydYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0J31cblxuICBxdWV1ZTogQWpheC5xdWV1ZVxuXG4gIGFqYXg6IChwYXJhbXMsIGRlZmF1bHRzKSAtPlxuICAgIG5ldyAkLmFqYXggQGFqYXhTZXR0aW5ncyhwYXJhbXMsIGRlZmF1bHRzKVxuXG4gIGFqYXhRdWV1ZTogKHBhcmFtcywgZGVmYXVsdHMpIC0+XG4gICAgeGhyID0gbnVsbFxuICAgIHJ2ICA9IG5ldyBpY2VkLlJlbmRlenZvdXNcblxuICAgIHNldHRpbmdzICAgICA9IEBhamF4U2V0dGluZ3MocGFyYW1zLCBkZWZhdWx0cylcbiAgICBkZWZlcnN1Y2Nlc3MgPSBzZXR0aW5ncy5zdWNjZXNzXG4gICAgZGVmZXJlcnJvciAgID0gc2V0dGluZ3MuZXJyb3JcblxuICAgIHNldHRpbmdzLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIGRhdGEsIHN0YXR1c1RleHQsIHhoclxuICAgIHNldHRpbmdzLmVycm9yICAgPSBydi5pZCgnZXJyb3InKS5kZWZlciB4aHIsIHN0YXR1c1RleHQsIGVycm9yXG5cbiAgICByZXF1ZXN0ID0gKG5leHQpIC0+XG4gICAgICB4aHIgPSBuZXcgJC5BamF4KHNldHRpbmdzKVxuICAgICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICAgIHN3aXRjaCBzdGF0dXNcbiAgICAgICAgd2hlbiAnc3VjY2VzcycgdGhlbiBkZWZlcnN1Y2Nlc3MgZGF0YSwgc3RhdHVzVGV4dCwgeGhyXG4gICAgICAgIHdoZW4gJ2Vycm9yJyB0aGVuIGRlZmVyZXJyb3IgeGhyLCBzdGF0dXNUZXh0LCBlcnJvclxuICAgICAgbmV4dCgpXG5cbiAgICByZXF1ZXN0LmFib3J0ID0gKHN0YXR1c1RleHQpIC0+XG4gICAgICByZXR1cm4geGhyLmFib3J0KHN0YXR1c1RleHQpIGlmIHhoclxuICAgICAgaW5kZXggPSBAcXVldWUoKS5pbmRleE9mKHJlcXVlc3QpXG4gICAgICBAcXVldWUoKS5zcGxpY2UoaW5kZXgsIDEpIGlmIGluZGV4ID4gLTFcbiAgICAgIEFqYXgucGlwZWxpbmVyLm5fb3V0LS0gaWYgQWpheC5waXBlbGluZXJcblxuICAgICAgIyBkZWZlcnJlZC5yZWplY3RXaXRoKFxuICAgICAgIyAgIHNldHRpbmdzLmNvbnRleHQgb3Igc2V0dGluZ3MsXG4gICAgICAjICAgW3hociwgc3RhdHVzVGV4dCwgJyddXG4gICAgICAjIClcbiAgICAgIHJlcXVlc3RcblxuICAgIHJldHVybiByZXF1ZXN0IHVubGVzcyBBamF4LmVuYWJsZWRcbiAgICBAcXVldWUgcmVxdWVzdFxuICAgIHJlcXVlc3RcblxuICBhamF4U2V0dGluZ3M6IChwYXJhbXMsIGRlZmF1bHRzKSAtPlxuICAgICQuZXh0ZW5kKHt9LCBAZGVmYXVsdHMsIGRlZmF1bHRzLCBwYXJhbXMpXG5cbmNsYXNzIENvbGxlY3Rpb24gZXh0ZW5kcyBCYXNlXG4gIGNvbnN0cnVjdG9yOiAoQG1vZGVsKSAtPlxuXG4gIGZpbmQ6IChpZCwgcGFyYW1zKSAtPlxuICAgIHJlY29yZCA9IG5ldyBAbW9kZWwoaWQ6IGlkKVxuICAgIEBhamF4UXVldWUgcGFyYW1zLFxuICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChyZWNvcmQpXG4gICAgICBzdWNjZXNzOiBAcmVjb3Jkc1Jlc3BvbnNlXG4gICAgICBlcnJvcjogQGZhaWxSZXNwb25zZVxuXG4gIGFsbDogKHBhcmFtcykgLT5cbiAgICBAYWpheFF1ZXVlIHBhcmFtcyxcbiAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQG1vZGVsKVxuICAgICAgc3VjY2VzczogQHJlY29yZHNSZXNwb25zZVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2VcblxuICBmZXRjaDogKHBhcmFtcyA9IHt9LCBvcHRpb25zID0ge30pIC0+XG4gICAgaWYgaWQgPSBwYXJhbXMuaWRcbiAgICAgIGRlbGV0ZSBwYXJhbXMuaWRcbiAgICAgIEBmaW5kKGlkLCBwYXJhbXMpLmRvbmUgKHJlY29yZCkgPT5cbiAgICAgICAgQG1vZGVsLnJlZnJlc2gocmVjb3JkLCBvcHRpb25zKVxuICAgIGVsc2VcbiAgICAgIEBhbGwocGFyYW1zKS5kb25lIChyZWNvcmRzKSA9PlxuICAgICAgICBAbW9kZWwucmVmcmVzaChyZWNvcmRzLCBvcHRpb25zKVxuXG4gICMgUHJpdmF0ZVxuXG4gIHJlY29yZHNSZXNwb25zZTogKGRhdGEsIHN0YXR1cywgeGhyKSA9PlxuICAgIEBtb2RlbC50cmlnZ2VyKCdhamF4U3VjY2VzcycsIG51bGwsIHN0YXR1cywgeGhyKVxuXG4gIGZhaWxSZXNwb25zZTogKHhociwgc3RhdHVzVGV4dCwgZXJyb3IpID0+XG4gICAgQG1vZGVsLnRyaWdnZXIoJ2FqYXhFcnJvcicsIG51bGwsIHhociwgc3RhdHVzVGV4dCwgZXJyb3IpXG5cbmNsYXNzIFNpbmdsZXRvbiBleHRlbmRzIEJhc2VcbiAgY29uc3RydWN0b3I6IChAcmVjb3JkKSAtPlxuICAgIEBtb2RlbCA9IEByZWNvcmQuY29uc3RydWN0b3JcblxuICByZWxvYWQ6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnR0VUJ1xuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQHJlY29yZClcbiAgICAgIHN1Y2Nlc3M6IEByZWNvcmRSZXNwb25zZShvcHRpb25zKVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2Uob3B0aW9ucylcblxuICBjcmVhdGU6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnUE9TVCdcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KEByZWNvcmQpXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChAbW9kZWwpXG4gICAgICBzdWNjZXNzOiBAcmVjb3JkUmVzcG9uc2Uob3B0aW9ucylcbiAgICAgIGVycm9yOiBAZmFpbFJlc3BvbnNlKG9wdGlvbnMpXG5cbiAgdXBkYXRlOiAocGFyYW1zLCBvcHRpb25zKSAtPlxuICAgIEBhamF4UXVldWUgcGFyYW1zLFxuICAgICAgdHlwZTogJ1BVVCdcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KEByZWNvcmQpXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChAcmVjb3JkKVxuICAgICAgc3VjY2VzczogQHJlY29yZFJlc3BvbnNlKG9wdGlvbnMpXG4gICAgICBlcnJvcjogQGZhaWxSZXNwb25zZShvcHRpb25zKVxuXG4gIGRlc3Ryb3k6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnREVMRVRFJ1xuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQHJlY29yZClcbiAgICAgIHN1Y2Nlc3M6IEByZWNvcmRSZXNwb25zZShvcHRpb25zKVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2Uob3B0aW9ucylcblxuICAjIFByaXZhdGVcblxuICByZWNvcmRSZXNwb25zZTogKG9wdGlvbnMgPSB7fSkgPT5cbiAgICAoZGF0YSwgc3RhdHVzLCB4aHIpID0+XG4gICAgICBpZiBTcGluZS5pc0JsYW5rKGRhdGEpXG4gICAgICAgIGRhdGEgPSBmYWxzZVxuICAgICAgZWxzZVxuICAgICAgICBkYXRhID0gQG1vZGVsLmZyb21KU09OKGRhdGEpXG5cbiAgICAgIEFqYXguZGlzYWJsZSA9PlxuICAgICAgICBpZiBkYXRhXG4gICAgICAgICAgIyBJRCBjaGFuZ2UsIG5lZWQgdG8gZG8gc29tZSBzaGlmdGluZ1xuICAgICAgICAgIGlmIGRhdGEuaWQgYW5kIEByZWNvcmQuaWQgaXNudCBkYXRhLmlkXG4gICAgICAgICAgICBAcmVjb3JkLmNoYW5nZUlEKGRhdGEuaWQpXG5cbiAgICAgICAgICAjIFVwZGF0ZSB3aXRoIGxhdGVzdCBkYXRhXG4gICAgICAgICAgQHJlY29yZC51cGRhdGVBdHRyaWJ1dGVzKGRhdGEuYXR0cmlidXRlcygpKVxuXG4gICAgICBAcmVjb3JkLnRyaWdnZXIoJ2FqYXhTdWNjZXNzJywgZGF0YSwgc3RhdHVzLCB4aHIpXG4gICAgICBvcHRpb25zLnN1Y2Nlc3M/LmFwcGx5KEByZWNvcmQpICMgRGVwcmVjYXRlZFxuICAgICAgb3B0aW9ucy5kb25lPy5hcHBseShAcmVjb3JkKVxuXG4gIGZhaWxSZXNwb25zZTogKG9wdGlvbnMgPSB7fSkgPT5cbiAgICAoeGhyLCBzdGF0dXNUZXh0LCBlcnJvcikgPT5cbiAgICAgIEByZWNvcmQudHJpZ2dlcignYWpheEVycm9yJywgeGhyLCBzdGF0dXNUZXh0LCBlcnJvcilcbiAgICAgIG9wdGlvbnMuZXJyb3I/LmFwcGx5KEByZWNvcmQpICMgRGVwcmVjYXRlZFxuICAgICAgb3B0aW9ucy5mYWlsPy5hcHBseShAcmVjb3JkKVxuXG4jIEFqYXggZW5kcG9pbnRcbk1vZGVsLmhvc3QgPSAnJ1xuXG5JbmNsdWRlID1cbiAgYWpheDogLT4gbmV3IFNpbmdsZXRvbih0aGlzKVxuXG4gIHVybDogKGFyZ3MuLi4pIC0+XG4gICAgdXJsID0gQWpheC5nZXRVUkwoQGNvbnN0cnVjdG9yKVxuICAgIHVybCArPSAnLycgdW5sZXNzIHVybC5jaGFyQXQodXJsLmxlbmd0aCAtIDEpIGlzICcvJ1xuICAgIHVybCArPSBUaWdlci5BamF4LmVuY29kZShAaWQpXG4gICAgYXJncy51bnNoaWZ0KHVybClcbiAgICBhcmdzLmpvaW4oJy8nKVxuXG5FeHRlbmQgPVxuICBhamF4OiAtPiBuZXcgQ29sbGVjdGlvbih0aGlzKVxuXG4gIHVybDogKGFyZ3MuLi4pIC0+XG4gICAgYXJncy51bnNoaWZ0KEBjbGFzc05hbWUudG9Mb3dlckNhc2UoKSArICdzJylcbiAgICBhcmdzLnVuc2hpZnQoTW9kZWwuaG9zdClcbiAgICBhcmdzLmpvaW4oJy8nKVxuXG5Nb2RlbC5BamF4ID1cbiAgZXh0ZW5kZWQ6IC0+XG4gICAgQGZldGNoIEBhamF4RmV0Y2hcbiAgICBAY2hhbmdlIEBhamF4Q2hhbmdlXG5cbiAgICBAZXh0ZW5kIEV4dGVuZFxuICAgIEBpbmNsdWRlIEluY2x1ZGVcblxuICAjIFByaXZhdGVcblxuICBhamF4RmV0Y2g6IC0+XG4gICAgQGFqYXgoKS5mZXRjaChhcmd1bWVudHMuLi4pXG5cbiAgYWpheENoYW5nZTogKHJlY29yZCwgdHlwZSwgb3B0aW9ucyA9IHt9KSAtPlxuICAgIHJldHVybiBpZiBvcHRpb25zLmFqYXggaXMgZmFsc2VcbiAgICByZWNvcmQuYWpheCgpW3R5cGVdKG9wdGlvbnMuYWpheCwgb3B0aW9ucylcblxuTW9kZWwuQWpheC5NZXRob2RzID1cbiAgZXh0ZW5kZWQ6IC0+XG4gICAgQGV4dGVuZCBFeHRlbmRcbiAgICBAaW5jbHVkZSBJbmNsdWRlXG5cblxuIyBHbG9iYWxzXG5BamF4LmRlZmF1bHRzICAgICAgICAgICA9IEJhc2U6OmRlZmF1bHRzXG5BamF4LkJhc2UgICAgICAgICAgICAgICA9IEJhc2VcbkFqYXguU2luZ2xldG9uICAgICAgICAgID0gU2luZ2xldG9uXG5BamF4LkNvbGxlY3Rpb24gICAgICAgICA9IENvbGxlY3Rpb25cblNwaW5lLkFqYXggICAgICAgICAgICAgID0gQWpheFxuU3BpbmUuQWpheC5Nb2RlbEFkYXB0ZXIgPSBBamF4XG5TcGluZS5BamF4LlEgICAgICAgICAgICA9IEJhc2Vcbm1vZHVsZT8uZXhwb3J0cyAgICAgICAgICA9IEFqYXgiLCJTcGluZSA9IEBTcGluZSBvciByZXF1aXJlIFwic3BpbmVcIlxuXG5cbmF3YWl0QWpheCA9XG4gIGF3YWl0QWpheDogKG9wdGlvbnMsIGNiLCBxdWV1ZSA9IGZhbHNlKSAtPlxuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cygpXG5cbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIGRhdGEsIHN0YXR1c1RleHQsIHhociAjIGRhdGEsIHN0YXR1c1RleHQsIHhoclxuICAgIG9wdGlvbnMuZXJyb3IgICA9IHJ2LmlkKCdlcnJvcicpLmRlZmVyIHhociwgc3RhdHVzVGV4dCwgZGF0YSAjIHhociwgc3RhdHVzVGV4dCwgZXJyb3JcblxuICAgIGlmIHF1ZXVlIHRoZW4gQFEuYWpheFF1ZXVlIG9wdGlvbnNcbiAgICBlbHNlIG5ldyAkLmFqYXggb3B0aW9uc1xuXG4gICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICBjYiBzdGF0dXMsIHhociwgc3RhdHVzVGV4dCwgZGF0YVxuXG4gIGF3YWl0R2V0OiAob3B0aW9ucywgY2IsIHF1ZXVlKSAtPlxuICAgIG9wdGlvbnMubWV0aG9kID0gJ0dFVCdcbiAgICBAYXdhaXRBamF4IG9wdGlvbnMsIGNiLCBxdWV1ZVxuXG4gIGF3YWl0UG9zdDogKG9wdGlvbnMsIGNiLCBxdWV1ZSkgLT5cbiAgICBvcHRpb25zLm1ldGhvZCA9ICdHRVQnXG4gICAgQGF3YWl0QWpheCBvcHRpb25zLCBjYiwgcXVldWVcblxuICBhd2FpdFF1ZXVlZEFqYXg6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRBamF4IG9wdGlvbnMsIGNiLCB0cnVlXG5cbiAgYXdhaXRRdWV1ZWRHZXQ6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRHZXQgb3B0aW9ucywgY2IsIHRydWVcblxuICBhd2FpdFF1ZXVlZFBvc3Q6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRQb3N0IG9wdGlvbnMsIGNiLCB0cnVlXG5cblxuU3BpbmUuQ2xhc3MuZXh0ZW5kLmNhbGwgU3BpbmUuQWpheCwgYXdhaXRBamF4XG5tb2R1bGU/LmV4cG9ydHMgPSBhd2FpdEFqYXgiLCJTcGluZSA9IHJlcXVpcmUgXCJzcGluZVwiXG5cblxubG9hZEV4YW1wbGUgPSAodXJsLCBhdXRvY2IpIC0+XG4gIGF3YWl0IFNwaW5lLkFqYXguYXdhaXRHZXQge3VybDogdXJsfSwgZGVmZXIgc3RhdHVzLCB4aHIsIHN0YXR1c1RleHQsIGRhdGFcbiAgc3dpdGNoIHN0YXR1c1xuICAgIHdoZW4gXCJlcnJvclwiIHRoZW4gXCJFcnJvciAje3N0YXR1c1RleHR9OiAje2RhdGF9XCJcbiAgICB3aGVuIFwic3VjY2Vzc1wiIHRoZW4gZGF0YVxuXG5cbmV4YW1wbGVMaXN0ID1cbiAgYnVubnk6ICAgICAgICAgXCIuL2V4YW1wbGVzL2J1bm55LmNvZmZlZVwiXG4gIFwiYnVubnktc2hvcnRcIjogXCIuL2V4YW1wbGVzL2J1bm55LXNob3J0LmNvZmZlZVwiXG4gIGRyYWdnaW5nOiAgICAgIFwiLi9leGFtcGxlcy9kcmFnZ2luZy5jb2ZmZWVcIlxuICBiYWxsczogICAgICAgICBcIi4vZXhhbXBsZXMvYmFsbHMuY29mZmVlXCJcbiAgYnVubnltYXJrOiAgICAgXCIuL2V4YW1wbGVzL2J1bm55bWFyay5jb2ZmZWVcIlxuICBtb3JwaDogICAgICAgICBcIi4vZXhhbXBsZXMvbW9ycGguY29mZmVlXCJcbiAgcHJpbWl0aXZlczogICAgXCIuL2V4YW1wbGVzL3ByaW1pdGl2ZXMuY29mZmVlXCJcbiAgcmVuZGVydGV4dHVyZTogXCIuL2V4YW1wbGVzL3JlbmRlcnRleHR1cmUuY29mZmVlXCJcbiAgdGV4dDogICAgICAgICAgXCIuL2V4YW1wbGVzL3RleHQuaWNlZFwiXG4gIGZpbHRlcnM6ICAgICAgIFwiLi9leGFtcGxlcy9maWx0ZXJzLmNvZmZlZVwiXG5cbmV4YW1wbGVzID0ge31cbmZvciBuYW1lLCBwYXRoIG9mIGV4YW1wbGVMaXN0IHRoZW4gZG8gKHBhdGgpIC0+XG4gIGV4YW1wbGVzW25hbWVdID0gKGNiKSAtPiBsb2FkRXhhbXBsZSBwYXRoLCBjYlxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4YW1wbGVzIiwicmVxdWlyZSAnLi9saWIvc2V0dXAnXG5lbW9qaSAgICAgPSByZXF1aXJlICdlbW9qaS1pbWFnZXMnXG5cblNwaW5lICAgID0gcmVxdWlyZSAnc3BpbmUnXG5TdGFnZSAgICA9IHJlcXVpcmUgJy4vY29udHJvbGxlcnMvc3RhZ2UnXG5Db25zb2xlICA9IHJlcXVpcmUgJy4vY29udHJvbGxlcnMvY29uc29sZSdcbkVkaXRvciAgID0gcmVxdWlyZSAnLi9jb250cm9sbGVycy9lZGl0b3InXG5leGFtcGxlcyA9IHJlcXVpcmUgJy4vbW9kZWxzL2V4YW1wbGVzJ1xuXG5cbmVzY2FwZUhUTUwgPSAocykgLT5cbiAgcy5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7XG5cblxuY2xhc3MgUGxheWdyb3VuZCBleHRlbmRzIFNwaW5lLkNvbnRyb2xsZXJcbiAgbG9nUHJlZml4OiBcIihQbGF5Z3JvdW5kOkFwcClcIlxuXG4gIERFRkFVTFRfU0VUVElOR1MgPVxuICAgIGV4YW1wbGU6IFwiYnVubnltYXJrXCJcbiAgICBsYW5nOiBcImNvZmZlZVwiXG5cbiAgZWxlbWVudHM6XG4gICAgXCJhc2lkZSNvdXRwdXRcIjogXCJvdXRwdXRcIlxuICAgIFwic2VjdGlvbi5wbGF5Z3JvdW5kXCI6IFwicGxheWdyb3VuZFwiXG4gICAgXCJidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwiYnV0dG9uUmVmcmVzaFBsYXlncm91bmRcIlxuXG4gIHJlZnJlc2hQbGF5Z3JvdW5kOiAtPlxuICAgIGJ1dHRvbiA9ICQgXCJidXR0b24ucnVuXCJcbiAgICBpZiBidXR0b24uaXMgXCIuc2VsZWN0ZWRcIiB0aGVuIGJ1dHRvbi50cmlnZ2VyIFwiY2xpY2tcIiwgdGFyZ2V0OiBidXR0b25bMF1cbiAgICBAc3RhZ2UucmVmcmVzaCgpXG4gICAgQCQoXCIuZGcubWFpblwiKS5hZGQoXCIuY291bnRlclwiKS5yZW1vdmUoKVxuXG4gIHNlbGVjdEV4YW1wbGU6IChlKSAtPiBAZWRpdG9yLnJlbmRlciAkKGUudGFyZ2V0KS52YWwoKVxuXG4gIG1vdXNlZW50ZXJQbGF5Z3JvdW5kUmVmcmVzaDogICAgIC0+IEBidXR0b25SZWZyZXNoUGxheWdyb3VuZC5mYWRlSW4gMTgwIGlmIEBzdGFnZVxuICBtb3VzZWVudGVyS2VlcFBsYXlncm91bmRSZWZyZXNoOiAtPiBAYnV0dG9uUmVmcmVzaFBsYXlncm91bmQuc3RvcCh0cnVlKS5mYWRlVG8gMSwgMVxuICBtb3VzZWxlYXZlUGxheWdyb3VuZFJlZnJlc2g6ICAgICAtPiBAYnV0dG9uUmVmcmVzaFBsYXlncm91bmQuZmFkZU91dCAxODBcblxuICBldmVudHM6XG4gICAgXCJjbGljayBidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwicmVmcmVzaFBsYXlncm91bmRcIlxuICAgIFwiY2hhbmdlIHNlbGVjdC5leGFtcGxlc1wiOiBcInNlbGVjdEV4YW1wbGVcIlxuICAgIFwibW91c2VlbnRlciBzZWN0aW9uLnBsYXlncm91bmRcIjogXCJtb3VzZWVudGVyUGxheWdyb3VuZFJlZnJlc2hcIlxuICAgIFwibW91c2VlbnRlciBidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwibW91c2VlbnRlcktlZXBQbGF5Z3JvdW5kUmVmcmVzaFwiXG4gICAgXCJtb3VzZWxlYXZlIHNlY3Rpb24ucGxheWdyb3VuZFwiOiBcIm1vdXNlbGVhdmVQbGF5Z3JvdW5kUmVmcmVzaFwiXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBzZXR0aW5ncyA9IHt9KSAtPlxuICAgIHN1cGVyXG4gICAgQGxvZyBcImluaXRpYWxpemluZ1wiXG5cbiAgICBAc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgREVGQVVMVF9TRVRUSU5HUylcblxuICAgIGlmIGxvY2FsU3RvcmFnZSBhbmQgbG9jYWxTdG9yYWdlLnNldHRpbmdzXG4gICAgICBmb3IgaywgdiBvZiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZXR0aW5ncylcbiAgICAgICAgQHNldHRpbmdzW2tdID0gdlxuICAgICAgICBzd2l0Y2gga1xuICAgICAgICAgIHdoZW4gXCJzY3JpcHRcIiB0aGVuIGRvICh2KSAtPlxuICAgICAgICAgICAgZXhhbXBsZXNbXCJsb2NhbC1zYXZlZFwiXSA9IChjYikgLT4gY2IgdlxuXG4gICAgZm9yIG93biBrLCB2IG9mIHNldHRpbmdzXG4gICAgICBAc2V0dGluZ3Nba10gPSB2XG5cbiAgICBleGFtcGxlbGlzdCA9IChuYW1lIGZvciBvd24gbmFtZSBvZiBleGFtcGxlcylcbiAgICBAcmVuZGVyIGV4YW1wbGVsaXN0LCBAc2V0dGluZ3MuZXhhbXBsZVxuXG4gIGluaXRTdGFnZTogLT5cbiAgICBAc3RhZ2UgPz0gbmV3IFN0YWdlIGVsOiBAcGxheWdyb3VuZFxuICAgIEBzdGFnZS5zaG93U3RhdHMoKVxuICAgIEBidXR0b25SZWZyZXNoUGxheWdyb3VuZC5zaG93KClcblxuICByZW5kZXI6IChleGFtcGxlbGlzdCA9IFtdLCBleGFtcGxlKSAtPlxuICAgIEB2aWV3ID0gKHJlcXVpcmUgXCIuL3ZpZXdzL3RlbXBsYXRlc1wiKS5pbmRleCBleGFtcGxlczogZXhhbXBsZWxpc3QsIGV4YW1wbGU6IGV4YW1wbGVcbiAgICBAdmlldyA9IGVtb2ppIEB2aWV3LCBcImltYWdlcy9lbW9qaVwiLCAyMFxuICAgIEBodG1sIEB2aWV3XG5cbiAgICBAY29uc29sZSAgPSBuZXcgQ29uc29sZSBlbDogQG91dHB1dCwgaW5wdXQ6IEAkIFwiaW5wdXQucmVwbFwiXG4gICAgQGVkaXRvciAgID0gbmV3IEVkaXRvciBlbDogQGVsLCBleGFtcGxlczogZXhhbXBsZXMsIGNvbnNvbGU6IEBjb25zb2xlXG4gICAgQGVkaXRvci5vbiBcInByZXNhdmVcIiwgQHByb3h5IEBpbml0U3RhZ2VcbiAgICBAZWRpdG9yLm9uIFwibGFuZ2NoYW5nZVwiLCBAY29uc29sZS5wcm94eSBAY29uc29sZS5sYW5nXG4gICAgQGVkaXRvci5sYW5nIEBzZXR0aW5ncy5sYW5nXG5cbiAgICBAcmVmcmVzaFBsYXlncm91bmQoKSBpZiBAc3RhZ2VcbiAgICBAZWRpdG9yLnJlbmRlciBleGFtcGxlIHVubGVzcyBAc2V0dGluZ3Muc2NyaXB0IGFuZCBAc2V0dGluZ3Muc2NyaXB0LnRyaW0oKSBpc250IFwiXCJcblxuICBsYW5nQ2hhbmdlOiAobmFtZSkgLT4gQHNldHRpbmdzLmxhbmcgPSBuYW1lXG5cblxubW9kdWxlLmV4cG9ydHMgPSBQbGF5Z3JvdW5kXG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoJ0BsdWtla2FycnlzL2phZGUtcnVudGltZScpO1xuXG52YXIgdGVtcGxhdGl6ZXIgPSB7fTtcblxuXG5cbi8vIGhlbHAuamFkZSBjb21waWxlZCB0ZW1wbGF0ZVxudGVtcGxhdGl6ZXJbXCJoZWxwXCJdID0gZnVuY3Rpb24gdG1wbF9oZWxwKCkge1xuICAgIHJldHVybiAnPGFzaWRlIGlkPVwiaGVscFwiPjxoND5FZGl0b3I8L2g0PjxkbD48ZHQ+OmljZWNyZWFtOjwvZHQ+PGRkPnN3aXRjaCBjb2RlIHRvIHZhbmlsbGEgSlMgKGNvbXBpbGVzKTwvZGQ+PGR0Pjpjb2ZmZWU6PC9kdD48ZGQ+c3dpdGNoIGNvZGUgdG8gSWNlZCBDb2ZmZWVTY3JpcHQgKGRvZXMgbm90IGNvbXBpbGUpPC9kZD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPlJlZnJlc2ggZXhhbXBsZSBmcm9tIENvZmZlZVNjcmlwdCBzb3VyY2U8L2RkPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlza1wiPjwvYnV0dG9uPjwvZHQ+PGRkPlNhdmUgc2NyaXB0IGFuZCBhc3NldHMgdG8gaW4tYnJvd3NlciBMb2NhbCBTdG9yYWdlPC9kZD48L2RsPjxoND5TdGFnZS9DYW52YXM8L2g0PjxkbD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPlJlbW92ZSBjaGlsZHJlbiBmcm9tIHN0YWdlIChhbmQgc3RvcCBhbmltYXRpb24pPC9kZD48L2RsPjxoND5Db25zb2xlPC9oND48ZGw+PGR0PjxidXR0b24gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2hcIj48L2J1dHRvbj48L2R0PjxkZD5DbGVhciBjb25zb2xlPC9kZD48ZHQ+OmFycm93X3VwOjphcnJvd19kb3duOjwvZHQ+PGRkPkJyb3dzZSBSRVBMIGhpc3Rvcnk8L2RkPjxkdD46bGVmdHdhcmRzX2Fycm93X3dpdGhfaG9vazo8L2R0PjxkZD5SdW4gY29tbWFuZDwvZGQ+PC9kbD48aDQ+R2xvYmFsIHZhcmlhYmxlczwvaDQ+PGRsIGNsYXNzPVwiZ2xvYmFsc1wiPjxkdD5hcHA8L2R0PjxkZD5pbnN0YW5jZSBvZiB0aGlzIHBpeGlqcy1wbGF5Z3JvdW5kIHdlYmFwcDwvZGQ+PGR0PnN0YXRzPC9kdD48ZGQ+aW5zdGFuY2Ugb2YgTXIuIERvb2JcXCdzJm5ic3A7PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2Ivc3RhdHMuanNcIj5zdGF0cy5qczwvYT48L2RkPjxkdD5mcmFtZTwvZHQ+PGRkPmlkIG9mIGFuaW1hdGlvbiBmcmFtZSAodXNlZnVsIHdpdGgmbmJzcDs8dHQ+Y2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpPC90dD4pPC9kZD48ZHQ+c3RhZ2U8L2R0PjxkZD5jdXJyZW50IGluc3RhbmNlIG9mJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvU3RhZ2UuaHRtbFwiPlBJWEkuU3RhZ2U8L2E+Jm5ic3A7KHdoZW4gcnVubmluZyk8L2RkPjxkdD5yZW5kZXJlcjwvZHQ+PGRkPmN1cnJlbnQgaW5zdGFuY2Ugb2YgZWl0aGVyJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvV2ViR0xSZW5kZXJlci5odG1sXCI+UElYSS5XZWJHTFJlbmRlcmVyPC9hPiZuYnNwO29yJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvQ2FudmFzUmVuZGVyZXIuaHRtbFwiPlBJWEkuQ2FudmFzUmVuZGVyZXI8L2E+LCBkZXBlbmRpbmcgb24gdGhlIHJlc3VsdCBvZiA8dHQ+UElYSS5hdXRvRGV0ZWN0UmVuZGVyZXI8L3R0PiAod2hlbiBydW5uaW5nKTwvZGQ+PGR0PmFuaTwvZHQ+PGRkPjxlbT4oZnVuY3Rpb24pPC9lbT4gQW5pbWF0aW9uIExvb3Agd3JhcHBlci4gU3RhcnRzL2VuZHMgc3RhdHMsIGNhbGxzIGZyYW1lIGZuLFxcbnJlbmRlcnMgZnJhbWUgdG8gc3RhZ2UsIGFuZCBsb29wcy48cHJlPmFuaTogKGxvb3BmbikgLT5cXG4gIHJlY3Vyc2l2ZWxvb3AgPSAtPlxcbiAgICBAc3RhdHMuYmVnaW4oKVxcbiAgICBsb29wZm4oKVxcbiAgICBAcmVuZGVyZXIucmVuZGVyIEBzdGFnZVxcbiAgICB3aW5kb3cuZnJhbWUgPSByZXF1ZXN0QW5pbUZyYW1lIHJlY3Vyc2l2ZWxvb3BcXG4gICAgQHN0YXRzLmVuZCgpXFxuICB3aW5kb3cuZnJhbWUgPSByZXF1ZXN0QW5pbUZyYW1lIHJlY3Vyc2l2ZWxvb3A8L3ByZT48L2RkPjxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbmV4dG9yaWdpbi9waXhpanMtcGxheWdyb3VuZFwiIGNsYXNzPVwiZm9ya21lXCI+PGltZyBzcmM9XCJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vZ2l0aHViL3JpYmJvbnMvZm9ya21lX3JpZ2h0X2RhcmtibHVlXzEyMTYyMS5wbmdcIiBhbHQ9XCJGb3JrIG1lIG9uIEdpdEh1YlwiLz48L2E+PC9kbD48L2FzaWRlPic7XG59O1xuXG4vLyBpbmRleC5qYWRlIGNvbXBpbGVkIHRlbXBsYXRlXG50ZW1wbGF0aXplcltcImluZGV4XCJdID0gZnVuY3Rpb24gdG1wbF9pbmRleChsb2NhbHMpIHtcbiAgICB2YXIgYnVmID0gW107XG4gICAgdmFyIGphZGVfbWl4aW5zID0ge307XG4gICAgdmFyIGphZGVfaW50ZXJwO1xuICAgIHZhciBsb2NhbHNfZm9yX3dpdGggPSBsb2NhbHMgfHwge307XG4gICAgKGZ1bmN0aW9uKGV4YW1wbGUsIGV4YW1wbGVzLCB1bmRlZmluZWQpIHtcbiAgICAgICAgYnVmLnB1c2goJzxoZWFkZXI+PGgyPlBpeGkuanMgUGxheWdyb3VuZDwvaDI+PC9oZWFkZXI+PHNlY3Rpb24gY2xhc3M9XCJwbGF5Z3JvdW5kXCI+PC9zZWN0aW9uPjxidXR0b24gY2xhc3M9XCJyZWZyZXNoLXBsYXlncm91bmQgZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PGFzaWRlIGlkPVwib3V0cHV0XCI+PC9hc2lkZT48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInJlcGxcIi8+PHNwYW4gY2xhc3M9XCJjb25zb2xlLWxhYmVsXCI+Q29uc29sZTwvc3Bhbj48dGV4dGFyZWEgdmFsdWU9XCIvLyBQaXhpLmpzIFBsYXlncm91bmRcIiBjbGFzcz1cInNhbmRib3hcIj48L3RleHRhcmVhPjxzZWxlY3QgY2xhc3M9XCJleGFtcGxlc1wiPicpO1xuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJCRvYmogPSBleGFtcGxlcztcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkJG9ialskaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBidWYucHVzaChcIjxvcHRpb25cIiArIGphZGUuYXR0cihcInZhbHVlXCIsIG5hbWUsIHRydWUsIGZhbHNlKSArIGphZGUuYXR0cihcInNlbGVjdGVkXCIsIGV4YW1wbGUgPT0gbmFtZSwgdHJ1ZSwgZmFsc2UpICsgXCI+XCIgKyBqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBuYW1lKSA9PSBudWxsID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyICQkbCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICQkbCsrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICQkb2JqWyRpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgamFkZS5hdHRyKFwidmFsdWVcIiwgbmFtZSwgdHJ1ZSwgZmFsc2UpICsgamFkZS5hdHRyKFwic2VsZWN0ZWRcIiwgZXhhbXBsZSA9PSBuYW1lLCB0cnVlLCBmYWxzZSkgKyBcIj5cIiArIGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IG5hbWUpID09IG51bGwgPyBcIlwiIDogamFkZV9pbnRlcnApICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICBidWYucHVzaCgnPC9zZWxlY3Q+PGJ1dHRvbiBjbGFzcz1cInJ1blwiPlJ1biE8L2J1dHRvbj48bmF2IGNsYXNzPVwic2FuZGJveFwiPjxidXR0b24gY2xhc3M9XCJoZWxwIGdseXBoaWNvbiBnbHlwaGljb24tcXVlc3Rpb24tc2lnblwiPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzYXZlIGdseXBoaWNvbiBnbHlwaGljb24tZmxvcHB5LWRpc2tcIj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwibGFuZ3N3aXRjaC1jb2ZmZWUgc2VsZWN0ZWRcIj46Y29mZmVlOjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJsYW5nc3dpdGNoLXZhbmlsbGFcIj46aWNlY3JlYW06PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cInJlZnJlc2gtZXhhbXBsZSBnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2hcIj48L2J1dHRvbj48L25hdj48YXNpZGUgaWQ9XCJoZWxwXCI+PGg0PkVkaXRvcjwvaDQ+PGRsPjxkdD46aWNlY3JlYW06PC9kdD48ZGQ+c3dpdGNoIGNvZGUgdG8gdmFuaWxsYSBKUyAoY29tcGlsZXMpPC9kZD48ZHQ+OmNvZmZlZTo8L2R0PjxkZD5zd2l0Y2ggY29kZSB0byBJY2VkIENvZmZlZVNjcmlwdCAoZG9lcyBub3QgY29tcGlsZSk8L2RkPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PC9kdD48ZGQ+UmVmcmVzaCBleGFtcGxlIGZyb20gQ29mZmVlU2NyaXB0IHNvdXJjZTwvZGQ+PGR0PjxidXR0b24gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrXCI+PC9idXR0b24+PC9kdD48ZGQ+U2F2ZSBzY3JpcHQgYW5kIGFzc2V0cyB0byBpbi1icm93c2VyIExvY2FsIFN0b3JhZ2U8L2RkPjwvZGw+PGg0PlN0YWdlL0NhbnZhczwvaDQ+PGRsPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PC9kdD48ZGQ+UmVtb3ZlIGNoaWxkcmVuIGZyb20gc3RhZ2UgKGFuZCBzdG9wIGFuaW1hdGlvbik8L2RkPjwvZGw+PGg0PkNvbnNvbGU8L2g0PjxkbD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPkNsZWFyIGNvbnNvbGU8L2RkPjxkdD46YXJyb3dfdXA6OmFycm93X2Rvd246PC9kdD48ZGQ+QnJvd3NlIFJFUEwgaGlzdG9yeTwvZGQ+PGR0PjpsZWZ0d2FyZHNfYXJyb3dfd2l0aF9ob29rOjwvZHQ+PGRkPlJ1biBjb21tYW5kPC9kZD48L2RsPjxoND5HbG9iYWwgdmFyaWFibGVzPC9oND48ZGwgY2xhc3M9XCJnbG9iYWxzXCI+PGR0PmFwcDwvZHQ+PGRkPmluc3RhbmNlIG9mIHRoaXMgcGl4aWpzLXBsYXlncm91bmQgd2ViYXBwPC9kZD48ZHQ+c3RhdHM8L2R0PjxkZD5pbnN0YW5jZSBvZiBNci4gRG9vYlxcJ3MmbmJzcDs8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi9zdGF0cy5qc1wiPnN0YXRzLmpzPC9hPjwvZGQ+PGR0PmZyYW1lPC9kdD48ZGQ+aWQgb2YgYW5pbWF0aW9uIGZyYW1lICh1c2VmdWwgd2l0aCZuYnNwOzx0dD5jYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZSk8L3R0Pik8L2RkPjxkdD5zdGFnZTwvZHQ+PGRkPmN1cnJlbnQgaW5zdGFuY2Ugb2YmbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9TdGFnZS5odG1sXCI+UElYSS5TdGFnZTwvYT4mbmJzcDsod2hlbiBydW5uaW5nKTwvZGQ+PGR0PnJlbmRlcmVyPC9kdD48ZGQ+Y3VycmVudCBpbnN0YW5jZSBvZiBlaXRoZXImbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9XZWJHTFJlbmRlcmVyLmh0bWxcIj5QSVhJLldlYkdMUmVuZGVyZXI8L2E+Jm5ic3A7b3ImbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9DYW52YXNSZW5kZXJlci5odG1sXCI+UElYSS5DYW52YXNSZW5kZXJlcjwvYT4sIGRlcGVuZGluZyBvbiB0aGUgcmVzdWx0IG9mIDx0dD5QSVhJLmF1dG9EZXRlY3RSZW5kZXJlcjwvdHQ+ICh3aGVuIHJ1bm5pbmcpPC9kZD48ZHQ+YW5pPC9kdD48ZGQ+PGVtPihmdW5jdGlvbik8L2VtPiBBbmltYXRpb24gTG9vcCB3cmFwcGVyLiBTdGFydHMvZW5kcyBzdGF0cywgY2FsbHMgZnJhbWUgZm4sXFxucmVuZGVycyBmcmFtZSB0byBzdGFnZSwgYW5kIGxvb3BzLjxwcmU+YW5pOiAobG9vcGZuKSAtPlxcbiAgcmVjdXJzaXZlbG9vcCA9IC0+XFxuICAgIEBzdGF0cy5iZWdpbigpXFxuICAgIGxvb3BmbigpXFxuICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXFxuICAgIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcFxcbiAgICBAc3RhdHMuZW5kKClcXG4gIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcDwvcHJlPjwvZGQ+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9uZXh0b3JpZ2luL3BpeGlqcy1wbGF5Z3JvdW5kXCIgY2xhc3M9XCJmb3JrbWVcIj48aW1nIHNyYz1cImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9naXRodWIvcmliYm9ucy9mb3JrbWVfcmlnaHRfZGFya2JsdWVfMTIxNjIxLnBuZ1wiIGFsdD1cIkZvcmsgbWUgb24gR2l0SHViXCIvPjwvYT48L2RsPjwvYXNpZGU+PGEgaWQ9XCJwaXhpXCIgaHJlZj1cIi8vcGl4aWpzLmNvbVwiPjwvYT48Zm9vdGVyPjxoMz5kcmFnIGZpbGVzIGhlcmU8L2gzPjxzcGFuPiZjb3B5OyAyMDEzIC0gMjAxNiZuYnNwOzxhIGhyZWY9XCJodHRwOi8vbmV4dG9yaWcuaW5cIj5OZXh0IE9yaWdpbjwvYT48L3NwYW4+PC9mb290ZXI+Jyk7XG4gICAgfSkuY2FsbCh0aGlzLCBcImV4YW1wbGVcIiBpbiBsb2NhbHNfZm9yX3dpdGggPyBsb2NhbHNfZm9yX3dpdGguZXhhbXBsZSA6IHR5cGVvZiBleGFtcGxlICE9PSBcInVuZGVmaW5lZFwiID8gZXhhbXBsZSA6IHVuZGVmaW5lZCwgXCJleGFtcGxlc1wiIGluIGxvY2Fsc19mb3Jfd2l0aCA/IGxvY2Fsc19mb3Jfd2l0aC5leGFtcGxlcyA6IHR5cGVvZiBleGFtcGxlcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGV4YW1wbGVzIDogdW5kZWZpbmVkLCBcInVuZGVmaW5lZFwiIGluIGxvY2Fsc19mb3Jfd2l0aCA/IGxvY2Fsc19mb3Jfd2l0aC51bmRlZmluZWQgOiB0eXBlb2YgdW5kZWZpbmVkICE9PSBcInVuZGVmaW5lZFwiID8gdW5kZWZpbmVkIDogdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGl6ZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVyZ2UgdHdvIGF0dHJpYnV0ZSBvYmplY3RzIGdpdmluZyBwcmVjZWRlbmNlXG4gKiB0byB2YWx1ZXMgaW4gb2JqZWN0IGBiYC4gQ2xhc3NlcyBhcmUgc3BlY2lhbC1jYXNlZFxuICogYWxsb3dpbmcgZm9yIGFycmF5cyBhbmQgbWVyZ2luZy9qb2luaW5nIGFwcHJvcHJpYXRlbHlcbiAqIHJlc3VsdGluZyBpbiBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqIEByZXR1cm4ge09iamVjdH0gYVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5tZXJnZSA9IGZ1bmN0aW9uIG1lcmdlKGEsIGIpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICB2YXIgYXR0cnMgPSBhWzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgYXR0cnMgPSBtZXJnZShhdHRycywgYVtpXSk7XG4gICAgfVxuICAgIHJldHVybiBhdHRycztcbiAgfVxuICB2YXIgYWMgPSBhWydjbGFzcyddO1xuICB2YXIgYmMgPSBiWydjbGFzcyddO1xuXG4gIGlmIChhYyB8fCBiYykge1xuICAgIGFjID0gYWMgfHwgW107XG4gICAgYmMgPSBiYyB8fCBbXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWMpKSBhYyA9IFthY107XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGJjKSkgYmMgPSBbYmNdO1xuICAgIGFbJ2NsYXNzJ10gPSBhYy5jb25jYXQoYmMpLmZpbHRlcihudWxscyk7XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGlmIChrZXkgIT0gJ2NsYXNzJykge1xuICAgICAgYVtrZXldID0gYltrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhO1xufTtcblxuLyoqXG4gKiBGaWx0ZXIgbnVsbCBgdmFsYHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBudWxscyh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPSBudWxsICYmIHZhbCAhPT0gJyc7XG59XG5cbi8qKlxuICogam9pbiBhcnJheSBhcyBjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuam9pbkNsYXNzZXMgPSBqb2luQ2xhc3NlcztcbmZ1bmN0aW9uIGpvaW5DbGFzc2VzKHZhbCkge1xuICByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoam9pbkNsYXNzZXMpIDpcbiAgICAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSA/IE9iamVjdC5rZXlzKHZhbCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHZhbFtrZXldOyB9KSA6XG4gICAgW3ZhbF0pLmZpbHRlcihudWxscykuam9pbignICcpO1xufVxuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gY2xhc3Nlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBjbGFzc2VzXG4gKiBAcGFyYW0ge0FycmF5LjxCb29sZWFuPn0gZXNjYXBlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmNscyA9IGZ1bmN0aW9uIGNscyhjbGFzc2VzLCBlc2NhcGVkKSB7XG4gIHZhciBidWYgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGVzY2FwZWQgJiYgZXNjYXBlZFtpXSkge1xuICAgICAgYnVmLnB1c2goZXhwb3J0cy5lc2NhcGUoam9pbkNsYXNzZXMoW2NsYXNzZXNbaV1dKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWYucHVzaChqb2luQ2xhc3NlcyhjbGFzc2VzW2ldKSk7XG4gICAgfVxuICB9XG4gIHZhciB0ZXh0ID0gam9pbkNsYXNzZXMoYnVmKTtcbiAgaWYgKHRleHQubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcgY2xhc3M9XCInICsgdGV4dCArICdcIic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5cbmV4cG9ydHMuc3R5bGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoZnVuY3Rpb24gKHN0eWxlKSB7XG4gICAgICByZXR1cm4gc3R5bGUgKyAnOicgKyB2YWxbc3R5bGVdO1xuICAgIH0pLmpvaW4oJzsnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG59O1xuLyoqXG4gKiBSZW5kZXIgdGhlIGdpdmVuIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGVzY2FwZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdGVyc2VcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5hdHRyID0gZnVuY3Rpb24gYXR0cihrZXksIHZhbCwgZXNjYXBlZCwgdGVyc2UpIHtcbiAgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgIHZhbCA9IGV4cG9ydHMuc3R5bGUodmFsKTtcbiAgfVxuICBpZiAoJ2Jvb2xlYW4nID09IHR5cGVvZiB2YWwgfHwgbnVsbCA9PSB2YWwpIHtcbiAgICBpZiAodmFsKSB7XG4gICAgICByZXR1cm4gJyAnICsgKHRlcnNlID8ga2V5IDoga2V5ICsgJz1cIicgKyBrZXkgKyAnXCInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSBlbHNlIGlmICgwID09IGtleS5pbmRleE9mKCdkYXRhJykgJiYgJ3N0cmluZycgIT0gdHlwZW9mIHZhbCkge1xuICAgIGlmIChKU09OLnN0cmluZ2lmeSh2YWwpLmluZGV4T2YoJyYnKSAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUud2FybignU2luY2UgSmFkZSAyLjAuMCwgYW1wZXJzYW5kcyAoYCZgKSBpbiBkYXRhIGF0dHJpYnV0ZXMgJyArXG4gICAgICAgICAgICAgICAgICAgJ3dpbGwgYmUgZXNjYXBlZCB0byBgJmFtcDtgJyk7XG4gICAgfTtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwudG9JU09TdHJpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybignSmFkZSB3aWxsIGVsaW1pbmF0ZSB0aGUgZG91YmxlIHF1b3RlcyBhcm91bmQgZGF0ZXMgaW4gJyArXG4gICAgICAgICAgICAgICAgICAgJ0lTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyBcIj0nXCIgKyBKU09OLnN0cmluZ2lmeSh2YWwpLnJlcGxhY2UoLycvZywgJyZhcG9zOycpICsgXCInXCI7XG4gIH0gZWxzZSBpZiAoZXNjYXBlZCkge1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgc3RyaW5naWZ5IGRhdGVzIGluIElTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIGV4cG9ydHMuZXNjYXBlKHZhbCkgKyAnXCInO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgc3RyaW5naWZ5IGRhdGVzIGluIElTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIic7XG4gIH1cbn07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBhdHRyaWJ1dGVzIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge09iamVjdH0gZXNjYXBlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHJzID0gZnVuY3Rpb24gYXR0cnMob2JqLCB0ZXJzZSl7XG4gIHZhciBidWYgPSBbXTtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cbiAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXVxuICAgICAgICAsIHZhbCA9IG9ialtrZXldO1xuXG4gICAgICBpZiAoJ2NsYXNzJyA9PSBrZXkpIHtcbiAgICAgICAgaWYgKHZhbCA9IGpvaW5DbGFzc2VzKHZhbCkpIHtcbiAgICAgICAgICBidWYucHVzaCgnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWYucHVzaChleHBvcnRzLmF0dHIoa2V5LCB2YWwsIGZhbHNlLCB0ZXJzZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYuam9pbignJyk7XG59O1xuXG4vKipcbiAqIEVzY2FwZSB0aGUgZ2l2ZW4gc3RyaW5nIG9mIGBodG1sYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIGphZGVfZW5jb2RlX2h0bWxfcnVsZXMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7J1xufTtcbnZhciBqYWRlX21hdGNoX2h0bWwgPSAvWyY8PlwiXS9nO1xuXG5mdW5jdGlvbiBqYWRlX2VuY29kZV9jaGFyKGMpIHtcbiAgcmV0dXJuIGphZGVfZW5jb2RlX2h0bWxfcnVsZXNbY10gfHwgYztcbn1cblxuZXhwb3J0cy5lc2NhcGUgPSBqYWRlX2VzY2FwZTtcbmZ1bmN0aW9uIGphZGVfZXNjYXBlKGh0bWwpe1xuICB2YXIgcmVzdWx0ID0gU3RyaW5nKGh0bWwpLnJlcGxhY2UoamFkZV9tYXRjaF9odG1sLCBqYWRlX2VuY29kZV9jaGFyKTtcbiAgaWYgKHJlc3VsdCA9PT0gJycgKyBodG1sKSByZXR1cm4gaHRtbDtcbiAgZWxzZSByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBSZS10aHJvdyB0aGUgZ2l2ZW4gYGVycmAgaW4gY29udGV4dCB0byB0aGVcbiAqIHRoZSBqYWRlIGluIGBmaWxlbmFtZWAgYXQgdGhlIGdpdmVuIGBsaW5lbm9gLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZW5vXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLnJldGhyb3cgPSBmdW5jdGlvbiByZXRocm93KGVyciwgZmlsZW5hbWUsIGxpbmVubywgc3RyKXtcbiAgaWYgKCEoZXJyIGluc3RhbmNlb2YgRXJyb3IpKSB0aHJvdyBlcnI7XG4gIGlmICgodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyB8fCAhZmlsZW5hbWUpICYmICFzdHIpIHtcbiAgICBlcnIubWVzc2FnZSArPSAnIG9uIGxpbmUgJyArIGxpbmVubztcbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgdHJ5IHtcbiAgICBzdHIgPSBzdHIgfHwgcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGY4JylcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICByZXRocm93KGVyciwgbnVsbCwgbGluZW5vKVxuICB9XG4gIHZhciBjb250ZXh0ID0gM1xuICAgICwgbGluZXMgPSBzdHIuc3BsaXQoJ1xcbicpXG4gICAgLCBzdGFydCA9IE1hdGgubWF4KGxpbmVubyAtIGNvbnRleHQsIDApXG4gICAgLCBlbmQgPSBNYXRoLm1pbihsaW5lcy5sZW5ndGgsIGxpbmVubyArIGNvbnRleHQpO1xuXG4gIC8vIEVycm9yIGNvbnRleHRcbiAgdmFyIGNvbnRleHQgPSBsaW5lcy5zbGljZShzdGFydCwgZW5kKS5tYXAoZnVuY3Rpb24obGluZSwgaSl7XG4gICAgdmFyIGN1cnIgPSBpICsgc3RhcnQgKyAxO1xuICAgIHJldHVybiAoY3VyciA9PSBsaW5lbm8gPyAnICA+ICcgOiAnICAgICcpXG4gICAgICArIGN1cnJcbiAgICAgICsgJ3wgJ1xuICAgICAgKyBsaW5lO1xuICB9KS5qb2luKCdcXG4nKTtcblxuICAvLyBBbHRlciBleGNlcHRpb24gbWVzc2FnZVxuICBlcnIucGF0aCA9IGZpbGVuYW1lO1xuICBlcnIubWVzc2FnZSA9IChmaWxlbmFtZSB8fCAnSmFkZScpICsgJzonICsgbGluZW5vXG4gICAgKyAnXFxuJyArIGNvbnRleHQgKyAnXFxuXFxuJyArIGVyci5tZXNzYWdlO1xuICB0aHJvdyBlcnI7XG59O1xuXG5leHBvcnRzLkRlYnVnSXRlbSA9IGZ1bmN0aW9uIERlYnVnSXRlbShsaW5lbm8sIGZpbGVuYW1lKSB7XG4gIHRoaXMubGluZW5vID0gbGluZW5vO1xuICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG59IiwiIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuM1xuLypcbkJhc2VkIG9mZiBzb3VyY2VzIGZyb20gdGhlIGZvbGxvd2luZyBjb2RlYmFzZXM6XG5odHRwczovL2dpdGh1Yi5jb20vcGlja2hhcmR0L2NvZmZlZXNjcmlwdC1jb2RlbWlycm9yLW1vZGVcbmh0dHBzOi8vZ2l0aHViLmNvbS94aXhpeGFvL1RlYVRhYmxlL2Jsb2IvbWFzdGVyL3NjcmlwdHMvY29tcGlsZXJzL2ljZWRjb2ZmZWVzY3JpcHQvaGlnaGxpZ2h0ZXIuY29mZmVlXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIENvZGVNaXJyb3JJY2VkQ29mZmVlU2NyaXB0ID0gZnVuY3Rpb24gKGNvbmYpIHtcbiAgICB2YXIgRVJST1JDTEFTUywgYW55SXMsIGJvdW5kYXJ5VG9rZW4sIGNsYXNzSWRlbnRpZmllcnMsIGNvbW1vbkNvbnN0YW50cywgY29tbW9uS2V5d29yZHMsIGNvbnN0YW50SWRlbnRpZmllcnMsIGNvbnN0YW50cywgZGVkZW50LCBkb3VibGVEZWxpbWl0ZXJzLCBkb3VibGVPcGVyYXRvcnMsIGZpZWxkLCBmdW5jdGlvbkRlY2xhcmF0aW9uLCBmdW5jdGlvbklkZW50aWZpZXIsIGljZWRLZXl3b3JkcywgaWRlbnRpZmllcnMsIGluZGVudCwgaW5kZW50S2V5d29yZHMsIGtleXdvcmRzLCBsb25nQ29tbWVudCwgb3RoZXJLZXl3b3JkcywgcGFyZW5Db25zdHJ1Y3RvcnMsIHJlZ2V4UHJlZml4ZXMsIHJlZ2V4VG9rZW4sIHNpbXBsZVRva2VuTWF0Y2hlciwgc2luZ2xlRGVsaW1pdGVycywgc2luZ2xlT3BlcmF0b3JzLCBzdHJpbmdQcmVmaXhlcywgdG9rZW5CYXNlLCB0b2tlbkZhY3RvcnksIHRva2VuTGV4ZXIsIHRyaXBsZURlbGltaXRlcnMsIHdvcmRPcGVyYXRvcnMsIHdvcmRSZWdleHA7XG4gICAgRVJST1JDTEFTUyA9ICdlcnJvcic7XG4gICAgd29yZFJlZ2V4cCA9IGZ1bmN0aW9uKHdvcmRzKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIl4oKFwiICsgd29yZHMuam9pbihcIil8KFwiKSArIFwiKSlcXFxcYlwiKTtcbiAgICB9O1xuICAgIHNpbmdsZU9wZXJhdG9ycyA9IG5ldyBSZWdFeHAoXCJeW1xcXFwrXFxcXC1cXFxcKi8lJnxcXFxcXn48PiE/XVwiKTtcbiAgICBzaW5nbGVEZWxpbWl0ZXJzID0gbmV3IFJlZ0V4cChcIl5bXFxcXChcXFxcKUAsYDtcXFxcLl1cIik7XG4gICAgZG91YmxlT3BlcmF0b3JzID0gbmV3IFJlZ0V4cChcIl4oKD0pfCg6KXwoLT4pfCg9Pil8KFxcXFwrXFxcXCspfChcXFxcK1xcXFw9KXwoXFxcXC1cXFxcLSl8KFxcXFwtXFxcXD0pfChcXFxcKlxcXFwqKXwoXFxcXCpcXFxcPSl8KFxcXFwvXFxcXC8pfChcXFxcL1xcXFw9KXwoPT0pfCghPSl8KDw9KXwoPj0pfCg8Pil8KDw8KXwoPj4pfCgvLykpXCIpO1xuICAgIGRvdWJsZURlbGltaXRlcnMgPSBuZXcgUmVnRXhwKFwiXigoXFxcXC5cXFxcLil8KFxcXFwrPSl8KFxcXFwtPSl8KFxcXFwqPSl8KCU9KXwoLz0pfCgmPSl8KFxcXFx8PSl8KFxcXFxePSl8KCYmPSl8KFxcXFx8fD0pKVwiKTtcbiAgICB0cmlwbGVEZWxpbWl0ZXJzID0gbmV3IFJlZ0V4cChcIl4oKFxcXFwuXFxcXC5cXFxcLil8KC8vPSl8KD4+PSl8KDw8PSl8KFxcXFwqXFxcXCo9KSlcIik7XG4gICAgcGFyZW5Db25zdHJ1Y3RvcnMgPSBuZXcgUmVnRXhwKFwiXltcXFxcW1xcXFxdXFxcXHtcXFxcfV1cIik7XG4gICAgY29uc3RhbnRJZGVudGlmaWVycyA9IG5ldyBSZWdFeHAoXCJeW19BLVokXVtfQS1aJDAtOV0rXFxcXGJcIik7XG4gICAgY2xhc3NJZGVudGlmaWVycyA9IG5ldyBSZWdFeHAoXCJeW19BLVokXVtfQS1aYS16JDAtOV0qXCIpO1xuICAgIGlkZW50aWZpZXJzID0gbmV3IFJlZ0V4cChcIl5bX2EteiRdW19BLVphLXokMC05XSpcIik7XG4gICAgZmllbGQgPSBuZXcgUmVnRXhwKFwiXkBbX0EtWmEteiRdW19BLVphLXokMC05XSpcIik7XG4gICAgZnVuY3Rpb25JZGVudGlmaWVyID0gbmV3IFJlZ0V4cChcIl5bX2EteiRdW19BLVphLXokMC05XSpcXFxccz8oOnw9KVxcXFxzPyhcXFxcKFtfQS1aYS16JDAtOUAsPVxcXFwuXFxcXFtcXFxcXVxcXFxzXSpcXFxcKVxcXFxzKik/KCgtPil8KD0+KSlcIik7XG4gICAgZnVuY3Rpb25EZWNsYXJhdGlvbiA9IG5ldyBSZWdFeHAoXCJeKFxcXFwoW19BLVphLXokMC05QCw9XFxcXC5cXFxcW1xcXFxdXFxcXHNdKlxcXFwpXFxcXHMqKT8oKC0+KXwoPT4pKVwiKTtcbiAgICB3b3JkT3BlcmF0b3JzID0gd29yZFJlZ2V4cChbJ2FuZCcsICdvcicsICdub3QnLCAnaXMnLCAnaXNudCcsICdpbicsICdpbnN0YW5jZW9mJywgJ3R5cGVvZiddKTtcbiAgICBpbmRlbnRLZXl3b3JkcyA9IFsnZm9yJywgJ3doaWxlJywgJ2xvb3AnLCAnaWYnLCAndW5sZXNzJywgJ2Vsc2UnLCAnc3dpdGNoJywgJ3RyeScsICdjYXRjaCcsICdmaW5hbGx5JywgJ2NsYXNzJ107XG4gICAgY29tbW9uS2V5d29yZHMgPSBbJ2JyZWFrJywgJ2J5JywgJ2NvbnRpbnVlJywgJ2RlbGV0ZScsICdkbycsICdpbicsICdvZicsICduZXcnLCAncmV0dXJuJywgJ3RoZW4nLCAndGhyb3cnLCAnd2hlbicsICd1bnRpbCcsICdleHRlbmRzJ107XG4gICAgb3RoZXJLZXl3b3JkcyA9IHdvcmRSZWdleHAoWydkZWJ1Z2dlcicsICd0aGlzJ10pO1xuICAgIGljZWRLZXl3b3JkcyA9IHdvcmRSZWdleHAoWydhd2FpdCcsICdkZWZlciddKTtcbiAgICBrZXl3b3JkcyA9IHdvcmRSZWdleHAoaW5kZW50S2V5d29yZHMuY29uY2F0KGNvbW1vbktleXdvcmRzKSk7XG4gICAgaW5kZW50S2V5d29yZHMgPSB3b3JkUmVnZXhwKGluZGVudEtleXdvcmRzKTtcbiAgICBzdHJpbmdQcmVmaXhlcyA9IG5ldyBSZWdFeHAoXCJeKCd7M318XFxcInszfXxbJ1xcXCJdKVwiKTtcbiAgICByZWdleFByZWZpeGVzID0gbmV3IFJlZ0V4cChcIl4oL3szfXwvKVwiKTtcbiAgICBjb21tb25Db25zdGFudHMgPSBbXCJJbmZpbml0eVwiLCBcIk5hTlwiLCBcInVuZGVmaW5lZFwiLCBcIm51bGxcIiwgXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJvblwiLCBcIm9mZlwiLCBcInllc1wiLCBcIm5vXCJdO1xuICAgIGNvbnN0YW50cyA9IHdvcmRSZWdleHAoY29tbW9uQ29uc3RhbnRzKTtcbiAgICB0b2tlbkJhc2UgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgY2gsIGZsb2F0TGl0ZXJhbCwgbGluZU9mZnNldCwgc2NvcGVPZmZzZXQsIHRva2VuO1xuICAgICAgaWYgKHN0cmVhbS5zb2woKSkge1xuICAgICAgICBzY29wZU9mZnNldCA9IHN0YXRlLnNjb3Blc1swXS5vZmZzZXQ7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkge1xuICAgICAgICAgIGxpbmVPZmZzZXQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgICAgICBpZiAobGluZU9mZnNldCA+IHNjb3BlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gJ2luZGVudCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChsaW5lT2Zmc2V0IDwgc2NvcGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiAnZGVkZW50JztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoc2NvcGVPZmZzZXQgPiAwKSB7XG4gICAgICAgICAgZGVkZW50KHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLmVhdFNwYWNlKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjaCA9IHN0cmVhbS5wZWVrKCk7XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKFwiIyMjXCIpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gbG9uZ0NvbW1lbnQ7XG4gICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaCA9PT0gXCIjXCIpIHtcbiAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eLT9bMC05XFwuXS8sIGZhbHNlKSkge1xuICAgICAgICBmbG9hdExpdGVyYWwgPSBmYWxzZTtcbiAgICAgICAgaWYgKChzdHJlYW0ubWF0Y2goL14tP1xcZCpcXC5cXGQrKGVbXFwrXFwtXT9cXGQrKT8vaSkpIHx8IChzdHJlYW0ubWF0Y2goL14tP1xcZCtcXC5cXGQqLykpIHx8IChzdHJlYW0ubWF0Y2goL14tP1xcLlxcZCsvKSkpIHtcbiAgICAgICAgICBmbG9hdExpdGVyYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbG9hdExpdGVyYWwpIHtcbiAgICAgICAgICBpZiAoc3RyZWFtLnBlZWsoKSA9PT0gXCIuXCIpIHtcbiAgICAgICAgICAgIHN0cmVhbS5iYWNrVXAoMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoc3RyZWFtLm1hdGNoKC9eLT8weFswLTlhLWZdKy9pKSkgfHwgKHN0cmVhbS5tYXRjaCgvXi0/WzEtOV1cXGQqKGVbXFwrXFwtXT9cXGQrKT8vKSkgfHwgKHN0cmVhbS5tYXRjaCgvXi0/MCg/IVtcXGR4XSkvaSkpKSB7XG4gICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goc3RyaW5nUHJlZml4ZXMpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5GYWN0b3J5KHN0cmVhbS5jdXJyZW50KCksIFwic3RyaW5nXCIpO1xuICAgICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKHJlZ2V4UHJlZml4ZXMpKSB7XG4gICAgICAgIGlmIChzdHJlYW0uY3VycmVudCgpICE9PSBcIi9cIiB8fCBzdHJlYW0ubWF0Y2goL14uKlxcLy8sIGZhbHNlKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gcmVnZXhUb2tlbihzdHJlYW0uY3VycmVudCgpLCBcInN0cmluZy0yXCIpO1xuICAgICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJlYW0uYmFja1VwKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKGZ1bmN0aW9uSWRlbnRpZmllciwgZmFsc2UpKSB7XG4gICAgICAgIHN0cmVhbS5tYXRjaChpZGVudGlmaWVycyk7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uaWRcIjtcbiAgICAgIH1cbiAgICAgIHRva2VuID0gc2ltcGxlVG9rZW5NYXRjaGVyKHN0cmVhbSwgW1wiZnVuY3Rpb25kZWNcIiwgZnVuY3Rpb25EZWNsYXJhdGlvbiwgXCJmaWVsZFwiLCBmaWVsZCwgXCJvcGVyYXRvclwiLCB0cmlwbGVEZWxpbWl0ZXJzLCBkb3VibGVEZWxpbWl0ZXJzLCBcIm9wZXJhdG9yXCIsIGRvdWJsZU9wZXJhdG9ycywgc2luZ2xlT3BlcmF0b3JzLCB3b3JkT3BlcmF0b3JzLCBcInB1bmN0dWF0aW9uXCIsIHNpbmdsZURlbGltaXRlcnMsIFwiYXRvbVwiLCBjb25zdGFudHMsIFwia2V5d29yZFwiLCBrZXl3b3JkcywgXCJrZXl3b3JkMlwiLCBvdGhlcktleXdvcmRzLCBcImtleXdvcmQzXCIsIGljZWRLZXl3b3JkcywgXCJjb25zdHJ1Y3RvclwiLCBwYXJlbkNvbnN0cnVjdG9ycywgXCJjb25zdGFudFwiLCBjb25zdGFudElkZW50aWZpZXJzLCBcImNsYXNzbmFtZVwiLCBjbGFzc0lkZW50aWZpZXJzLCBcInZhcmlhYmxlXCIsIGlkZW50aWZpZXJzXSk7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgfVxuICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgIH07XG4gICAgc2ltcGxlVG9rZW5NYXRjaGVyID0gZnVuY3Rpb24oc3RyZWFtLCBrZXlzRm9yUGF0dGVybnMpIHtcbiAgICAgIHZhciBpdGVtLCB0b2tlbiwgdG9rZW5NYXRjaGVzLCBfaSwgX2xlbjtcbiAgICAgIHRva2VuID0gXCJcIjtcbiAgICAgIHRva2VuTWF0Y2hlcyA9IGZhbHNlO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBrZXlzRm9yUGF0dGVybnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgaXRlbSA9IGtleXNGb3JQYXR0ZXJuc1tfaV07XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodG9rZW5NYXRjaGVzKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9rZW4gPSBpdGVtO1xuICAgICAgICAgIHRva2VuTWF0Y2hlcyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2VuTWF0Y2hlcyB8fCAodG9rZW5NYXRjaGVzID0gc3RyZWFtLm1hdGNoKGl0ZW0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuTWF0Y2hlcykge1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRva2VuRmFjdG9yeSA9IGZ1bmN0aW9uKGRlbGltaXRlciwgb3V0Y2xhc3MpIHtcbiAgICAgIHJldHVybiBib3VuZGFyeVRva2VuKGRlbGltaXRlciwgb3V0Y2xhc3MpO1xuICAgIH07XG4gICAgcmVnZXhUb2tlbiA9IGZ1bmN0aW9uKGRlbGltaXRlciwgb3V0Y2xhc3MpIHtcbiAgICAgIHJldHVybiBib3VuZGFyeVRva2VuKGRlbGltaXRlciwgb3V0Y2xhc3MsIGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICByZXR1cm4gc3RyZWFtLm1hdGNoKC9eW2lnbV0qXFxiLyk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGJvdW5kYXJ5VG9rZW4gPSBmdW5jdGlvbihkZWxpbWl0ZXIsIG91dGNsYXNzLCBzdWZmaXgpIHtcbiAgICAgIHZhciBzaW5nbGVsaW5lO1xuICAgICAgc2luZ2xlbGluZSA9IGRlbGltaXRlci5sZW5ndGggPT09IDE7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW14nXCJcXC9cXFxcXS8pO1xuICAgICAgICAgIGlmIChzdHJlYW0uZWF0KFwiXFxcXFwiKSkge1xuICAgICAgICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChzaW5nbGVsaW5lICYmIHN0cmVhbS5lb2woKSkge1xuICAgICAgICAgICAgICByZXR1cm4gb3V0Y2xhc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzdHJlYW0ubWF0Y2goZGVsaW1pdGVyKSkge1xuICAgICAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICAgICAgICBpZiAoc3VmZml4KSB7XG4gICAgICAgICAgICAgIHN1ZmZpeChzdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dGNsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW0uZWF0KC9bJ1wiXFwvXS8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2luZ2xlbGluZSkge1xuICAgICAgICAgIGlmIChjb25mLm1vZGUuc2luZ2xlTGluZVN0cmluZ0Vycm9ycykge1xuICAgICAgICAgICAgb3V0Y2xhc3MgPSBFUlJPUkNMQVNTO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dGNsYXNzO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGxvbmdDb21tZW50ID0gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXiNdLyk7XG4gICAgICAgIGlmIChzdHJlYW0ubWF0Y2goXCIjIyNcIikpIHtcbiAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoXCIjXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiY29tbWVudFwiO1xuICAgIH07XG4gICAgaW5kZW50ID0gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSwgdHlwZSkge1xuICAgICAgdmFyIGluZGVudFVuaXQsIHNjb3BlLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHR5cGUgPSB0eXBlIHx8IFwiY29mZmVlXCI7XG4gICAgICBpbmRlbnRVbml0ID0gMDtcbiAgICAgIGlmICh0eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICAgIF9yZWYgPSBzdGF0ZS5zY29wZXM7XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIHNjb3BlID0gX3JlZltfaV07XG4gICAgICAgICAgaWYgKHNjb3BlLnR5cGUgPT09IFwiY29mZmVlXCIpIHtcbiAgICAgICAgICAgIGluZGVudFVuaXQgPSBzY29wZS5vZmZzZXQgKyBjb25mLmluZGVudFVuaXQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGVudFVuaXQgPSBzdHJlYW0uY29sdW1uKCkgKyBzdHJlYW0uY3VycmVudCgpLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZS5zY29wZXMudW5zaGlmdCh7XG4gICAgICAgIG9mZnNldDogaW5kZW50VW5pdCxcbiAgICAgICAgdHlwZTogdHlwZVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBkZWRlbnQgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgaSwgc2NvcGUsIF9pLCBfaW5kZW50LCBfaW5kZW50X2luZGV4LCBfbGVuLCBfcmVmO1xuICAgICAgaWYgKHN0YXRlLnNjb3Blcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLnNjb3Blc1swXS50eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICAgIF9pbmRlbnQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgICAgX2luZGVudF9pbmRleCA9IC0xO1xuICAgICAgICBfcmVmID0gc3RhdGUuc2NvcGVzO1xuICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgIHNjb3BlID0gX3JlZltpXTtcbiAgICAgICAgICBpZiAoX2luZGVudCA9PT0gc2NvcGUub2Zmc2V0KSB7XG4gICAgICAgICAgICBfaW5kZW50X2luZGV4ID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoX2luZGVudF9pbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoc3RhdGUuc2NvcGVzWzBdLm9mZnNldCAhPT0gX2luZGVudCkge1xuICAgICAgICAgIHN0YXRlLnNjb3Blcy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnNjb3Blcy5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcbiAgICB0b2tlbkxleGVyID0gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgdmFyIGN1cnJlbnQsIGRlbGltaXRlcl9pbmRleCwgc3R5bGU7XG4gICAgICBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgY3VycmVudCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICBpZiAoY3VycmVudCA9PT0gXCIuXCIpIHtcbiAgICAgICAgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgY3VycmVudCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIGlmIChhbnlJcyhbXCJ2YXJpYWJsZVwiLCBcImNvbnN0YW50XCIsIFwiY2xhc3NuYW1lXCIsIFwiZnVuY3Rpb25pZFwiXSwgc3R5bGUpKSB7XG4gICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudCA9PT0gXCJAXCIpIHtcbiAgICAgICAgc3RyZWFtLmVhdChcIkBcIik7XG4gICAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHN0YXRlLmRlZGVudCArPSAxO1xuICAgICAgfVxuICAgICAgaWYgKCgoY3VycmVudCA9PT0gXCItPlwiIHx8IGN1cnJlbnQgPT09IFwiPT5cIikgJiYgIXN0YXRlLmxhbWJkYSAmJiBzdGF0ZS5zY29wZXNbMF0udHlwZSA9PT0gXCJjb2ZmZWVcIiAmJiBzdHJlYW0ucGVlaygpID09PSBcIlwiKSB8fCBzdHlsZSA9PT0gXCJpbmRlbnRcIikge1xuICAgICAgICBpbmRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBkZWxpbWl0ZXJfaW5kZXggPSBcIlsoe1wiLmluZGV4T2YoY3VycmVudCk7XG4gICAgICBpZiAoZGVsaW1pdGVyX2luZGV4ICE9PSAtMSkge1xuICAgICAgICBpbmRlbnQoc3RyZWFtLCBzdGF0ZSwgXCJdKX1cIi5zbGljZShkZWxpbWl0ZXJfaW5kZXgsIGRlbGltaXRlcl9pbmRleCArIDEpKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRlbnRLZXl3b3Jkcy5leGVjKGN1cnJlbnQpKSB7XG4gICAgICAgIGluZGVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSBcInRoZW5cIikge1xuICAgICAgICBkZWRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3R5bGUgPT09IFwiZGVkZW50XCIgJiYgZGVkZW50KHN0cmVhbSwgc3RhdGUpKSB7XG4gICAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgICAgfVxuICAgICAgZGVsaW1pdGVyX2luZGV4ID0gXCJdKX1cIi5pbmRleE9mKGN1cnJlbnQpO1xuICAgICAgaWYgKGRlbGltaXRlcl9pbmRleCAhPT0gLTEgJiYgZGVkZW50KHN0cmVhbSwgc3RhdGUpKSB7XG4gICAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmRlZGVudCA+IDAgJiYgc3RyZWFtLmVvbCgpICYmIHN0YXRlLnNjb3Blc1swXS50eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICAgIGlmIChzdGF0ZS5zY29wZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHN0YXRlLnNjb3Blcy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmRlZGVudCAtPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH07XG4gICAgYW55SXMgPSBmdW5jdGlvbihsaXN0LCB3aGF0KSB7XG4gICAgICB2YXIgaXRlbSwgX2ksIF9sZW47XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGxpc3QubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgaXRlbSA9IGxpc3RbX2ldO1xuICAgICAgICBpZiAoaXRlbSA9PT0gd2hhdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oYmFzZWNvbHVtbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuaXplOiB0b2tlbkJhc2UsXG4gICAgICAgICAgc2NvcGVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG9mZnNldDogYmFzZWNvbHVtbiB8fCAwLFxuICAgICAgICAgICAgICB0eXBlOiBcImNvZmZlZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBsYXN0VG9rZW46IG51bGwsXG4gICAgICAgICAgbGFtYmRhOiBmYWxzZSxcbiAgICAgICAgICBkZWRlbnQ6IDBcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICB2YXIgc3R5bGU7XG4gICAgICAgIHN0eWxlID0gdG9rZW5MZXhlcihzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgc3RhdGUubGFzdFRva2VuID0ge1xuICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICBjb250ZW50OiBzdHJlYW0uY3VycmVudCgpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzdHJlYW0uZW9sKCkgJiYgc3RyZWFtLmxhbWJkYSkge1xuICAgICAgICAgIHN0YXRlLmxhbWJkYSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH0sXG4gICAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIpIHtcbiAgICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9PSB0b2tlbkJhc2UpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGUuc2NvcGVzWzBdLm9mZnNldDtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGlmICghQ29kZU1pcnJvciAmJiAhd2luZG93LkNvZGVNaXJyb3IpIHZhciBDb2RlTWlycm9yID0gd2luZG93LkNvZGVNaXJyb3IgPSByZXF1aXJlKFwiY29kZW1pcnJvclwiKTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwiaWNlZGNvZmZlZXNjcmlwdFwiLCBDb2RlTWlycm9ySWNlZENvZmZlZVNjcmlwdCk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRShcInRleHQveC1pY2VkY29mZmVlc2NyaXB0XCIsIFwiaWNlZGNvZmZlZXNjcmlwdFwiKTtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSBtb2R1bGUuZXhwb3J0cyA9IENvZGVNaXJyb3JJY2VkQ29mZmVlU2NyaXB0O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBUaGlzIGlzIENvZGVNaXJyb3IgKGh0dHA6Ly9jb2RlbWlycm9yLm5ldCksIGEgY29kZSBlZGl0b3Jcbi8vIGltcGxlbWVudGVkIGluIEphdmFTY3JpcHQgb24gdG9wIG9mIHRoZSBicm93c2VyJ3MgRE9NLlxuLy9cbi8vIFlvdSBjYW4gZmluZCBzb21lIHRlY2huaWNhbCBiYWNrZ3JvdW5kIGZvciBzb21lIG9mIHRoZSBjb2RlIGJlbG93XG4vLyBhdCBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvI2NtLWludGVybmFscyAuXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gbW9kKCk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIHJldHVybiBkZWZpbmUoW10sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICAodGhpcyB8fCB3aW5kb3cpLkNvZGVNaXJyb3IgPSBtb2QoKTtcbn0pKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBCUk9XU0VSIFNOSUZGSU5HXG5cbiAgLy8gS2x1ZGdlcyBmb3IgYnVncyBhbmQgYmVoYXZpb3IgZGlmZmVyZW5jZXMgdGhhdCBjYW4ndCBiZSBmZWF0dXJlXG4gIC8vIGRldGVjdGVkIGFyZSBlbmFibGVkIGJhc2VkIG9uIHVzZXJBZ2VudCBldGMgc25pZmZpbmcuXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICB2YXIgcGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm07XG5cbiAgdmFyIGdlY2tvID0gL2dlY2tvXFwvXFxkL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgaWVfdXB0bzEwID0gL01TSUUgXFxkLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBpZV8xMXVwID0gL1RyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKHVzZXJBZ2VudCk7XG4gIHZhciBpZSA9IGllX3VwdG8xMCB8fCBpZV8xMXVwO1xuICB2YXIgaWVfdmVyc2lvbiA9IGllICYmIChpZV91cHRvMTAgPyBkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXBbMV0pO1xuICB2YXIgd2Via2l0ID0gL1dlYktpdFxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcXR3ZWJraXQgPSB3ZWJraXQgJiYgL1F0XFwvXFxkK1xcLlxcZCsvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGNocm9tZSA9IC9DaHJvbWVcXC8vLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIHByZXN0byA9IC9PcGVyYVxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgc2FmYXJpID0gL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpO1xuICB2YXIgbWFjX2dlTW91bnRhaW5MaW9uID0gL01hYyBPUyBYIDFcXGRcXEQoWzgtOV18XFxkXFxkKVxcRC8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcGhhbnRvbSA9IC9QaGFudG9tSlMvLnRlc3QodXNlckFnZW50KTtcblxuICB2YXIgaW9zID0gL0FwcGxlV2ViS2l0Ly50ZXN0KHVzZXJBZ2VudCkgJiYgL01vYmlsZVxcL1xcdysvLnRlc3QodXNlckFnZW50KTtcbiAgLy8gVGhpcyBpcyB3b2VmdWxseSBpbmNvbXBsZXRlLiBTdWdnZXN0aW9ucyBmb3IgYWx0ZXJuYXRpdmUgbWV0aG9kcyB3ZWxjb21lLlxuICB2YXIgbW9iaWxlID0gaW9zIHx8IC9BbmRyb2lkfHdlYk9TfEJsYWNrQmVycnl8T3BlcmEgTWluaXxPcGVyYSBNb2JpfElFTW9iaWxlL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgbWFjID0gaW9zIHx8IC9NYWMvLnRlc3QocGxhdGZvcm0pO1xuICB2YXIgY2hyb21lT1MgPSAvXFxiQ3JPU1xcYi8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgd2luZG93cyA9IC93aW4vaS50ZXN0KHBsYXRmb3JtKTtcblxuICB2YXIgcHJlc3RvX3ZlcnNpb24gPSBwcmVzdG8gJiYgdXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFxcZCpcXC5cXGQqKS8pO1xuICBpZiAocHJlc3RvX3ZlcnNpb24pIHByZXN0b192ZXJzaW9uID0gTnVtYmVyKHByZXN0b192ZXJzaW9uWzFdKTtcbiAgaWYgKHByZXN0b192ZXJzaW9uICYmIHByZXN0b192ZXJzaW9uID49IDE1KSB7IHByZXN0byA9IGZhbHNlOyB3ZWJraXQgPSB0cnVlOyB9XG4gIC8vIFNvbWUgYnJvd3NlcnMgdXNlIHRoZSB3cm9uZyBldmVudCBwcm9wZXJ0aWVzIHRvIHNpZ25hbCBjbWQvY3RybCBvbiBPUyBYXG4gIHZhciBmbGlwQ3RybENtZCA9IG1hYyAmJiAocXR3ZWJraXQgfHwgcHJlc3RvICYmIChwcmVzdG9fdmVyc2lvbiA9PSBudWxsIHx8IHByZXN0b192ZXJzaW9uIDwgMTIuMTEpKTtcbiAgdmFyIGNhcHR1cmVSaWdodENsaWNrID0gZ2Vja28gfHwgKGllICYmIGllX3ZlcnNpb24gPj0gOSk7XG5cbiAgLy8gT3B0aW1pemUgc29tZSBjb2RlIHdoZW4gdGhlc2UgZmVhdHVyZXMgYXJlIG5vdCB1c2VkLlxuICB2YXIgc2F3UmVhZE9ubHlTcGFucyA9IGZhbHNlLCBzYXdDb2xsYXBzZWRTcGFucyA9IGZhbHNlO1xuXG4gIC8vIEVESVRPUiBDT05TVFJVQ1RPUlxuXG4gIC8vIEEgQ29kZU1pcnJvciBpbnN0YW5jZSByZXByZXNlbnRzIGFuIGVkaXRvci4gVGhpcyBpcyB0aGUgb2JqZWN0XG4gIC8vIHRoYXQgdXNlciBjb2RlIGlzIHVzdWFsbHkgZGVhbGluZyB3aXRoLlxuXG4gIGZ1bmN0aW9uIENvZGVNaXJyb3IocGxhY2UsIG9wdGlvbnMpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ29kZU1pcnJvcikpIHJldHVybiBuZXcgQ29kZU1pcnJvcihwbGFjZSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID0gb3B0aW9ucyA/IGNvcHlPYmoob3B0aW9ucykgOiB7fTtcbiAgICAvLyBEZXRlcm1pbmUgZWZmZWN0aXZlIG9wdGlvbnMgYmFzZWQgb24gZ2l2ZW4gdmFsdWVzIGFuZCBkZWZhdWx0cy5cbiAgICBjb3B5T2JqKGRlZmF1bHRzLCBvcHRpb25zLCBmYWxzZSk7XG4gICAgc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpO1xuXG4gICAgdmFyIGRvYyA9IG9wdGlvbnMudmFsdWU7XG4gICAgaWYgKHR5cGVvZiBkb2MgPT0gXCJzdHJpbmdcIikgZG9jID0gbmV3IERvYyhkb2MsIG9wdGlvbnMubW9kZSwgbnVsbCwgb3B0aW9ucy5saW5lU2VwYXJhdG9yKTtcbiAgICB0aGlzLmRvYyA9IGRvYztcblxuICAgIHZhciBpbnB1dCA9IG5ldyBDb2RlTWlycm9yLmlucHV0U3R5bGVzW29wdGlvbnMuaW5wdXRTdHlsZV0odGhpcyk7XG4gICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCk7XG4gICAgZGlzcGxheS53cmFwcGVyLkNvZGVNaXJyb3IgPSB0aGlzO1xuICAgIHVwZGF0ZUd1dHRlcnModGhpcyk7XG4gICAgdGhlbWVDaGFuZ2VkKHRoaXMpO1xuICAgIGlmIChvcHRpb25zLmxpbmVXcmFwcGluZylcbiAgICAgIHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSArPSBcIiBDb2RlTWlycm9yLXdyYXBcIjtcbiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgJiYgIW1vYmlsZSkgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgIGluaXRTY3JvbGxiYXJzKHRoaXMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGtleU1hcHM6IFtdLCAgLy8gc3RvcmVzIG1hcHMgYWRkZWQgYnkgYWRkS2V5TWFwXG4gICAgICBvdmVybGF5czogW10sIC8vIGhpZ2hsaWdodGluZyBvdmVybGF5cywgYXMgYWRkZWQgYnkgYWRkT3ZlcmxheVxuICAgICAgbW9kZUdlbjogMCwgICAvLyBidW1wZWQgd2hlbiBtb2RlL292ZXJsYXkgY2hhbmdlcywgdXNlZCB0byBpbnZhbGlkYXRlIGhpZ2hsaWdodGluZyBpbmZvXG4gICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgZGVsYXlpbmdCbHVyRXZlbnQ6IGZhbHNlLFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICBzdXBwcmVzc0VkaXRzOiBmYWxzZSwgLy8gdXNlZCB0byBkaXNhYmxlIGVkaXRpbmcgZHVyaW5nIGtleSBoYW5kbGVycyB3aGVuIGluIHJlYWRPbmx5IG1vZGVcbiAgICAgIHBhc3RlSW5jb21pbmc6IGZhbHNlLCBjdXRJbmNvbWluZzogZmFsc2UsIC8vIGhlbHAgcmVjb2duaXplIHBhc3RlL2N1dCBlZGl0cyBpbiBpbnB1dC5wb2xsXG4gICAgICBzZWxlY3RpbmdUZXh0OiBmYWxzZSxcbiAgICAgIGRyYWdnaW5nVGV4dDogZmFsc2UsXG4gICAgICBoaWdobGlnaHQ6IG5ldyBEZWxheWVkKCksIC8vIHN0b3JlcyBoaWdobGlnaHQgd29ya2VyIHRpbWVvdXRcbiAgICAgIGtleVNlcTogbnVsbCwgIC8vIFVuZmluaXNoZWQga2V5IHNlcXVlbmNlXG4gICAgICBzcGVjaWFsQ2hhcnM6IG51bGxcbiAgICB9O1xuXG4gICAgdmFyIGNtID0gdGhpcztcblxuICAgIC8vIE92ZXJyaWRlIG1hZ2ljIHRleHRhcmVhIGNvbnRlbnQgcmVzdG9yZSB0aGF0IElFIHNvbWV0aW1lcyBkb2VzXG4gICAgLy8gb24gb3VyIGhpZGRlbiB0ZXh0YXJlYSBvbiByZWxvYWRcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KHRydWUpOyB9LCAyMCk7XG5cbiAgICByZWdpc3RlckV2ZW50SGFuZGxlcnModGhpcyk7XG4gICAgZW5zdXJlR2xvYmFsSGFuZGxlcnMoKTtcblxuICAgIHN0YXJ0T3BlcmF0aW9uKHRoaXMpO1xuICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuXG4gICAgaWYgKChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB8fCBjbS5oYXNGb2N1cygpKVxuICAgICAgc2V0VGltZW91dChiaW5kKG9uRm9jdXMsIHRoaXMpLCAyMCk7XG4gICAgZWxzZVxuICAgICAgb25CbHVyKHRoaXMpO1xuXG4gICAgZm9yICh2YXIgb3B0IGluIG9wdGlvbkhhbmRsZXJzKSBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIG9wdGlvbkhhbmRsZXJzW29wdF0odGhpcywgb3B0aW9uc1tvcHRdLCBJbml0KTtcbiAgICBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aCh0aGlzKTtcbiAgICBpZiAob3B0aW9ucy5maW5pc2hJbml0KSBvcHRpb25zLmZpbmlzaEluaXQodGhpcyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0SG9va3MubGVuZ3RoOyArK2kpIGluaXRIb29rc1tpXSh0aGlzKTtcbiAgICBlbmRPcGVyYXRpb24odGhpcyk7XG4gICAgLy8gU3VwcHJlc3Mgb3B0aW1pemVsZWdpYmlsaXR5IGluIFdlYmtpdCwgc2luY2UgaXQgYnJlYWtzIHRleHRcbiAgICAvLyBtZWFzdXJpbmcgb24gbGluZSB3cmFwcGluZyBib3VuZGFyaWVzLlxuICAgIGlmICh3ZWJraXQgJiYgb3B0aW9ucy5saW5lV3JhcHBpbmcgJiZcbiAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkaXNwbGF5LmxpbmVEaXYpLnRleHRSZW5kZXJpbmcgPT0gXCJvcHRpbWl6ZWxlZ2liaWxpdHlcIilcbiAgICAgIGRpc3BsYXkubGluZURpdi5zdHlsZS50ZXh0UmVuZGVyaW5nID0gXCJhdXRvXCI7XG4gIH1cblxuICAvLyBESVNQTEFZIENPTlNUUlVDVE9SXG5cbiAgLy8gVGhlIGRpc3BsYXkgaGFuZGxlcyB0aGUgRE9NIGludGVncmF0aW9uLCBib3RoIGZvciBpbnB1dCByZWFkaW5nXG4gIC8vIGFuZCBjb250ZW50IGRyYXdpbmcuIEl0IGhvbGRzIHJlZmVyZW5jZXMgdG8gRE9NIG5vZGVzIGFuZFxuICAvLyBkaXNwbGF5LXJlbGF0ZWQgc3RhdGUuXG5cbiAgZnVuY3Rpb24gRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCkge1xuICAgIHZhciBkID0gdGhpcztcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgICAvLyBDb3ZlcnMgYm90dG9tLXJpZ2h0IHNxdWFyZSB3aGVuIGJvdGggc2Nyb2xsYmFycyBhcmUgcHJlc2VudC5cbiAgICBkLnNjcm9sbGJhckZpbGxlciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlclwiKTtcbiAgICBkLnNjcm9sbGJhckZpbGxlci5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLCBcInRydWVcIik7XG4gICAgLy8gQ292ZXJzIGJvdHRvbSBvZiBndXR0ZXIgd2hlbiBjb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciBpcyBvblxuICAgIC8vIGFuZCBoIHNjcm9sbGJhciBpcyBwcmVzZW50LlxuICAgIGQuZ3V0dGVyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItZmlsbGVyXCIpO1xuICAgIGQuZ3V0dGVyRmlsbGVyLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAvLyBXaWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBjb2RlLCBwb3NpdGlvbmVkIHRvIGNvdmVyIHRoZSB2aWV3cG9ydC5cbiAgICBkLmxpbmVEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWNvZGVcIik7XG4gICAgLy8gRWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZXNlIHRvIHJlcHJlc2VudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMuXG4gICAgZC5zZWxlY3Rpb25EaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDFcIik7XG4gICAgZC5jdXJzb3JEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWN1cnNvcnNcIik7XG4gICAgLy8gQSB2aXNpYmlsaXR5OiBoaWRkZW4gZWxlbWVudCB1c2VkIHRvIGZpbmQgdGhlIHNpemUgb2YgdGhpbmdzLlxuICAgIGQubWVhc3VyZSA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKTtcbiAgICAvLyBXaGVuIGxpbmVzIG91dHNpZGUgb2YgdGhlIHZpZXdwb3J0IGFyZSBtZWFzdXJlZCwgdGhleSBhcmUgZHJhd24gaW4gdGhpcy5cbiAgICBkLmxpbmVNZWFzdXJlID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1tZWFzdXJlXCIpO1xuICAgIC8vIFdyYXBzIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBleGlzdCBpbnNpZGUgdGhlIHZlcnRpY2FsbHktcGFkZGVkIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgZC5saW5lU3BhY2UgPSBlbHQoXCJkaXZcIiwgW2QubWVhc3VyZSwgZC5saW5lTWVhc3VyZSwgZC5zZWxlY3Rpb25EaXYsIGQuY3Vyc29yRGl2LCBkLmxpbmVEaXZdLFxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlOyBvdXRsaW5lOiBub25lXCIpO1xuICAgIC8vIE1vdmVkIGFyb3VuZCBpdHMgcGFyZW50IHRvIGNvdmVyIHZpc2libGUgdmlldy5cbiAgICBkLm1vdmVyID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgW2QubGluZVNwYWNlXSwgXCJDb2RlTWlycm9yLWxpbmVzXCIpXSwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmVcIik7XG4gICAgLy8gU2V0IHRvIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LCBhbGxvd2luZyBzY3JvbGxpbmcuXG4gICAgZC5zaXplciA9IGVsdChcImRpdlwiLCBbZC5tb3Zlcl0sIFwiQ29kZU1pcnJvci1zaXplclwiKTtcbiAgICBkLnNpemVyV2lkdGggPSBudWxsO1xuICAgIC8vIEJlaGF2aW9yIG9mIGVsdHMgd2l0aCBvdmVyZmxvdzogYXV0byBhbmQgcGFkZGluZyBpc1xuICAgIC8vIGluY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhlXG4gICAgLy8gc2Nyb2xsYWJsZSBhcmVhIGlzIGJpZyBlbm91Z2guXG4gICAgZC5oZWlnaHRGb3JjZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGhlaWdodDogXCIgKyBzY3JvbGxlckdhcCArIFwicHg7IHdpZHRoOiAxcHg7XCIpO1xuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgZ3V0dGVycywgaWYgYW55LlxuICAgIGQuZ3V0dGVycyA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyc1wiKTtcbiAgICBkLmxpbmVHdXR0ZXIgPSBudWxsO1xuICAgIC8vIEFjdHVhbCBzY3JvbGxhYmxlIGVsZW1lbnQuXG4gICAgZC5zY3JvbGxlciA9IGVsdChcImRpdlwiLCBbZC5zaXplciwgZC5oZWlnaHRGb3JjZXIsIGQuZ3V0dGVyc10sIFwiQ29kZU1pcnJvci1zY3JvbGxcIik7XG4gICAgZC5zY3JvbGxlci5zZXRBdHRyaWJ1dGUoXCJ0YWJJbmRleFwiLCBcIi0xXCIpO1xuICAgIC8vIFRoZSBlbGVtZW50IGluIHdoaWNoIHRoZSBlZGl0b3IgbGl2ZXMuXG4gICAgZC53cmFwcGVyID0gZWx0KFwiZGl2XCIsIFtkLnNjcm9sbGJhckZpbGxlciwgZC5ndXR0ZXJGaWxsZXIsIGQuc2Nyb2xsZXJdLCBcIkNvZGVNaXJyb3JcIik7XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBJRTcgei1pbmRleCBidWcgKG5vdCBwZXJmZWN0LCBoZW5jZSBJRTcgbm90IHJlYWxseSBiZWluZyBzdXBwb3J0ZWQpXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IGQuZ3V0dGVycy5zdHlsZS56SW5kZXggPSAtMTsgZC5zY3JvbGxlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAwOyB9XG4gICAgaWYgKCF3ZWJraXQgJiYgIShnZWNrbyAmJiBtb2JpbGUpKSBkLnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7XG5cbiAgICBpZiAocGxhY2UpIHtcbiAgICAgIGlmIChwbGFjZS5hcHBlbmRDaGlsZCkgcGxhY2UuYXBwZW5kQ2hpbGQoZC53cmFwcGVyKTtcbiAgICAgIGVsc2UgcGxhY2UoZC53cmFwcGVyKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHJlbmRlcmVkIHJhbmdlIChtYXkgYmUgYmlnZ2VyIHRoYW4gdGhlIHZpZXcgd2luZG93KS5cbiAgICBkLnZpZXdGcm9tID0gZC52aWV3VG8gPSBkb2MuZmlyc3Q7XG4gICAgZC5yZXBvcnRlZFZpZXdGcm9tID0gZC5yZXBvcnRlZFZpZXdUbyA9IGRvYy5maXJzdDtcbiAgICAvLyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVuZGVyZWQgbGluZXMuXG4gICAgZC52aWV3ID0gW107XG4gICAgZC5yZW5kZXJlZFZpZXcgPSBudWxsO1xuICAgIC8vIEhvbGRzIGluZm8gYWJvdXQgYSBzaW5nbGUgcmVuZGVyZWQgbGluZSB3aGVuIGl0IHdhcyByZW5kZXJlZFxuICAgIC8vIGZvciBtZWFzdXJlbWVudCwgd2hpbGUgbm90IGluIHZpZXcuXG4gICAgZC5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcbiAgICAvLyBFbXB0eSBzcGFjZSAoaW4gcGl4ZWxzKSBhYm92ZSB0aGUgdmlld1xuICAgIGQudmlld09mZnNldCA9IDA7XG4gICAgZC5sYXN0V3JhcEhlaWdodCA9IGQubGFzdFdyYXBXaWR0aCA9IDA7XG4gICAgZC51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XG5cbiAgICBkLm5hdGl2ZUJhcldpZHRoID0gZC5iYXJIZWlnaHQgPSBkLmJhcldpZHRoID0gMDtcbiAgICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIG9ubHkgcmVzaXplIHRoZSBsaW5lIG51bWJlciBndXR0ZXIgd2hlbiBuZWNlc3NhcnkgKHdoZW5cbiAgICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGNyb3NzZXMgYSBib3VuZGFyeSB0aGF0IG1ha2VzIGl0cyB3aWR0aCBjaGFuZ2UpXG4gICAgZC5saW5lTnVtV2lkdGggPSBkLmxpbmVOdW1Jbm5lcldpZHRoID0gZC5saW5lTnVtQ2hhcnMgPSBudWxsO1xuICAgIC8vIFNldCB0byB0cnVlIHdoZW4gYSBub24taG9yaXpvbnRhbC1zY3JvbGxpbmcgbGluZSB3aWRnZXQgaXNcbiAgICAvLyBhZGRlZC4gQXMgYW4gb3B0aW1pemF0aW9uLCBsaW5lIHdpZGdldCBhbGlnbmluZyBpcyBza2lwcGVkIHdoZW5cbiAgICAvLyB0aGlzIGlzIGZhbHNlLlxuICAgIGQuYWxpZ25XaWRnZXRzID0gZmFsc2U7XG5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuXG4gICAgLy8gVHJhY2tzIHRoZSBtYXhpbXVtIGxpbmUgbGVuZ3RoIHNvIHRoYXQgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAgLy8gY2FuIGJlIGtlcHQgc3RhdGljIHdoZW4gc2Nyb2xsaW5nLlxuICAgIGQubWF4TGluZSA9IG51bGw7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gMDtcbiAgICBkLm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIGZvciBtZWFzdXJpbmcgd2hlZWwgc2Nyb2xsaW5nIGdyYW51bGFyaXR5XG4gICAgZC53aGVlbERYID0gZC53aGVlbERZID0gZC53aGVlbFN0YXJ0WCA9IGQud2hlZWxTdGFydFkgPSBudWxsO1xuXG4gICAgLy8gVHJ1ZSB3aGVuIHNoaWZ0IGlzIGhlbGQgZG93bi5cbiAgICBkLnNoaWZ0ID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZXRoZXIgYW55dGhpbmcgaGFwcGVuZWQgc2luY2UgdGhlIGNvbnRleHQgbWVudVxuICAgIC8vIHdhcyBvcGVuZWQuXG4gICAgZC5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG5cbiAgICBkLmFjdGl2ZVRvdWNoID0gbnVsbDtcblxuICAgIGlucHV0LmluaXQoZCk7XG4gIH1cblxuICAvLyBTVEFURSBVUERBVEVTXG5cbiAgLy8gVXNlZCB0byBnZXQgdGhlIGVkaXRvciBpbnRvIGEgY29uc2lzdGVudCBzdGF0ZSBhZ2FpbiB3aGVuIG9wdGlvbnMgY2hhbmdlLlxuXG4gIGZ1bmN0aW9uIGxvYWRNb2RlKGNtKSB7XG4gICAgY20uZG9jLm1vZGUgPSBDb2RlTWlycm9yLmdldE1vZGUoY20ub3B0aW9ucywgY20uZG9jLm1vZGVPcHRpb24pO1xuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0TW9kZVN0YXRlKGNtKSB7XG4gICAgY20uZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xuICAgIH0pO1xuICAgIGNtLmRvYy5mcm9udGllciA9IGNtLmRvYy5maXJzdDtcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcbiAgICBjbS5zdGF0ZS5tb2RlR2VuKys7XG4gICAgaWYgKGNtLmN1ck9wKSByZWdDaGFuZ2UoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcHBpbmdDaGFuZ2VkKGNtKSB7XG4gICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci13cmFwXCIpO1xuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aCA9IFwiXCI7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyV2lkdGggPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XG4gICAgICBmaW5kTWF4TGluZShjbSk7XG4gICAgfVxuICAgIGVzdGltYXRlTGluZUhlaWdodHMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt1cGRhdGVTY3JvbGxiYXJzKGNtKTt9LCAxMDApO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgZXN0aW1hdGVzIHRoZSBoZWlnaHQgb2YgYSBsaW5lLCB0byB1c2UgYXNcbiAgLy8gZmlyc3QgYXBwcm94aW1hdGlvbiB1bnRpbCB0aGUgbGluZSBiZWNvbWVzIHZpc2libGUgKGFuZCBpcyB0aHVzXG4gIC8vIHByb3Blcmx5IG1lYXN1cmFibGUpLlxuICBmdW5jdGlvbiBlc3RpbWF0ZUhlaWdodChjbSkge1xuICAgIHZhciB0aCA9IHRleHRIZWlnaHQoY20uZGlzcGxheSksIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIHBlckxpbmUgPSB3cmFwcGluZyAmJiBNYXRoLm1heCg1LCBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoIC8gY2hhcldpZHRoKGNtLmRpc3BsYXkpIC0gMyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lSXNIaWRkZW4oY20uZG9jLCBsaW5lKSkgcmV0dXJuIDA7XG5cbiAgICAgIHZhciB3aWRnZXRzSGVpZ2h0ID0gMDtcbiAgICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0uaGVpZ2h0KSB3aWRnZXRzSGVpZ2h0ICs9IGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh3cmFwcGluZylcbiAgICAgICAgcmV0dXJuIHdpZGdldHNIZWlnaHQgKyAoTWF0aC5jZWlsKGxpbmUudGV4dC5sZW5ndGggLyBwZXJMaW5lKSB8fCAxKSAqIHRoO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2lkZ2V0c0hlaWdodCArIHRoO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZXN0ID0gZXN0aW1hdGVIZWlnaHQoY20pO1xuICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBlc3RIZWlnaHQgPSBlc3QobGluZSk7XG4gICAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGVzdEhlaWdodCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aGVtZUNoYW5nZWQoY20pIHtcbiAgICBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lID0gY20uZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqY20tcy1cXFMrL2csIFwiXCIpICtcbiAgICAgIGNtLm9wdGlvbnMudGhlbWUucmVwbGFjZSgvKF58XFxzKVxccyovZywgXCIgY20tcy1cIik7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ3V0dGVyc0NoYW5nZWQoY20pIHtcbiAgICB1cGRhdGVHdXR0ZXJzKGNtKTtcbiAgICByZWdDaGFuZ2UoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXthbGlnbkhvcml6b250YWxseShjbSk7fSwgMjApO1xuICB9XG5cbiAgLy8gUmVidWlsZCB0aGUgZ3V0dGVyIGVsZW1lbnRzLCBlbnN1cmUgdGhlIG1hcmdpbiB0byB0aGUgbGVmdCBvZiB0aGVcbiAgLy8gY29kZSBtYXRjaGVzIHRoZWlyIHdpZHRoLlxuICBmdW5jdGlvbiB1cGRhdGVHdXR0ZXJzKGNtKSB7XG4gICAgdmFyIGd1dHRlcnMgPSBjbS5kaXNwbGF5Lmd1dHRlcnMsIHNwZWNzID0gY20ub3B0aW9ucy5ndXR0ZXJzO1xuICAgIHJlbW92ZUNoaWxkcmVuKGd1dHRlcnMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BlY3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBndXR0ZXJDbGFzcyA9IHNwZWNzW2ldO1xuICAgICAgdmFyIGdFbHQgPSBndXR0ZXJzLmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyIFwiICsgZ3V0dGVyQ2xhc3MpKTtcbiAgICAgIGlmIChndXR0ZXJDbGFzcyA9PSBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIikge1xuICAgICAgICBjbS5kaXNwbGF5LmxpbmVHdXR0ZXIgPSBnRWx0O1xuICAgICAgICBnRWx0LnN0eWxlLndpZHRoID0gKGNtLmRpc3BsYXkubGluZU51bVdpZHRoIHx8IDEpICsgXCJweFwiO1xuICAgICAgfVxuICAgIH1cbiAgICBndXR0ZXJzLnN0eWxlLmRpc3BsYXkgPSBpID8gXCJcIiA6IFwibm9uZVwiO1xuICAgIHVwZGF0ZUd1dHRlclNwYWNlKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlclNwYWNlKGNtKSB7XG4gICAgdmFyIHdpZHRoID0gY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoO1xuICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luTGVmdCA9IHdpZHRoICsgXCJweFwiO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgY2hhcmFjdGVyIGxlbmd0aCBvZiBhIGxpbmUsIHRha2luZyBpbnRvIGFjY291bnRcbiAgLy8gY29sbGFwc2VkIHJhbmdlcyAoc2VlIG1hcmtUZXh0KSB0aGF0IG1pZ2h0IGhpZGUgcGFydHMsIGFuZCBqb2luXG4gIC8vIG90aGVyIGxpbmVzIG9udG8gaXQuXG4gIGZ1bmN0aW9uIGxpbmVMZW5ndGgobGluZSkge1xuICAgIGlmIChsaW5lLmhlaWdodCA9PSAwKSByZXR1cm4gMDtcbiAgICB2YXIgbGVuID0gbGluZS50ZXh0Lmxlbmd0aCwgbWVyZ2VkLCBjdXIgPSBsaW5lO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChjdXIpKSB7XG4gICAgICB2YXIgZm91bmQgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGN1ciA9IGZvdW5kLmZyb20ubGluZTtcbiAgICAgIGxlbiArPSBmb3VuZC5mcm9tLmNoIC0gZm91bmQudG8uY2g7XG4gICAgfVxuICAgIGN1ciA9IGxpbmU7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChjdXIpKSB7XG4gICAgICB2YXIgZm91bmQgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGxlbiAtPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC5mcm9tLmNoO1xuICAgICAgY3VyID0gZm91bmQudG8ubGluZTtcbiAgICAgIGxlbiArPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC50by5jaDtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIGxvbmdlc3QgbGluZSBpbiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRNYXhMaW5lKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgZC5tYXhMaW5lID0gZ2V0TGluZShkb2MsIGRvYy5maXJzdCk7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gbGluZUxlbmd0aChkLm1heExpbmUpO1xuICAgIGQubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxpbmUpO1xuICAgICAgaWYgKGxlbiA+IGQubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBkLm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGQubWF4TGluZSA9IGxpbmU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgdGhlIGd1dHRlcnMgb3B0aW9ucyBjb250YWlucyB0aGUgZWxlbWVudFxuICAvLyBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIiB3aGVuIHRoZSBsaW5lTnVtYmVycyBvcHRpb24gaXMgdHJ1ZS5cbiAgZnVuY3Rpb24gc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpIHtcbiAgICB2YXIgZm91bmQgPSBpbmRleE9mKG9wdGlvbnMuZ3V0dGVycywgXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIpO1xuICAgIGlmIChmb3VuZCA9PSAtMSAmJiBvcHRpb25zLmxpbmVOdW1iZXJzKSB7XG4gICAgICBvcHRpb25zLmd1dHRlcnMgPSBvcHRpb25zLmd1dHRlcnMuY29uY2F0KFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0pO1xuICAgIH0gZWxzZSBpZiAoZm91bmQgPiAtMSAmJiAhb3B0aW9ucy5saW5lTnVtYmVycykge1xuICAgICAgb3B0aW9ucy5ndXR0ZXJzID0gb3B0aW9ucy5ndXR0ZXJzLnNsaWNlKDApO1xuICAgICAgb3B0aW9ucy5ndXR0ZXJzLnNwbGljZShmb3VuZCwgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU0NST0xMQkFSU1xuXG4gIC8vIFByZXBhcmUgRE9NIHJlYWRzIG5lZWRlZCB0byB1cGRhdGUgdGhlIHNjcm9sbGJhcnMuIERvbmUgaW4gb25lXG4gIC8vIHNob3QgdG8gbWluaW1pemUgdXBkYXRlL21lYXN1cmUgcm91bmR0cmlwcy5cbiAgZnVuY3Rpb24gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGd1dHRlclcgPSBkLmd1dHRlcnMub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGRvY0ggPSBNYXRoLnJvdW5kKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsaWVudEhlaWdodDogZC5zY3JvbGxlci5jbGllbnRIZWlnaHQsXG4gICAgICB2aWV3SGVpZ2h0OiBkLndyYXBwZXIuY2xpZW50SGVpZ2h0LFxuICAgICAgc2Nyb2xsV2lkdGg6IGQuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoOiBkLnNjcm9sbGVyLmNsaWVudFdpZHRoLFxuICAgICAgdmlld1dpZHRoOiBkLndyYXBwZXIuY2xpZW50V2lkdGgsXG4gICAgICBiYXJMZWZ0OiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZ3V0dGVyVyA6IDAsXG4gICAgICBkb2NIZWlnaHQ6IGRvY0gsXG4gICAgICBzY3JvbGxIZWlnaHQ6IGRvY0ggKyBzY3JvbGxHYXAoY20pICsgZC5iYXJIZWlnaHQsXG4gICAgICBuYXRpdmVCYXJXaWR0aDogZC5uYXRpdmVCYXJXaWR0aCxcbiAgICAgIGd1dHRlcldpZHRoOiBndXR0ZXJXXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE5hdGl2ZVNjcm9sbGJhcnMocGxhY2UsIHNjcm9sbCwgY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgdmFyIHZlcnQgPSB0aGlzLnZlcnQgPSBlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBudWxsLCBudWxsLCBcIm1pbi13aWR0aDogMXB4XCIpXSwgXCJDb2RlTWlycm9yLXZzY3JvbGxiYXJcIik7XG4gICAgdmFyIGhvcml6ID0gdGhpcy5ob3JpeiA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwiaGVpZ2h0OiAxMDAlOyBtaW4taGVpZ2h0OiAxcHhcIildLCBcIkNvZGVNaXJyb3ItaHNjcm9sbGJhclwiKTtcbiAgICBwbGFjZSh2ZXJ0KTsgcGxhY2UoaG9yaXopO1xuXG4gICAgb24odmVydCwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodmVydC5jbGllbnRIZWlnaHQpIHNjcm9sbCh2ZXJ0LnNjcm9sbFRvcCwgXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9KTtcbiAgICBvbihob3JpeiwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoaG9yaXouY2xpZW50V2lkdGgpIHNjcm9sbChob3Jpei5zY3JvbGxMZWZ0LCBcImhvcml6b250YWxcIik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNoZWNrZWRaZXJvV2lkdGggPSBmYWxzZTtcbiAgICAvLyBOZWVkIHRvIHNldCBhIG1pbmltdW0gd2lkdGggdG8gc2VlIHRoZSBzY3JvbGxiYXIgb24gSUU3IChidXQgbXVzdCBub3Qgc2V0IGl0IG9uIElFOCkuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB0aGlzLmhvcml6LnN0eWxlLm1pbkhlaWdodCA9IHRoaXMudmVydC5zdHlsZS5taW5XaWR0aCA9IFwiMThweFwiO1xuICB9XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUgPSBjb3B5T2JqKHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKG1lYXN1cmUpIHtcbiAgICAgIHZhciBuZWVkc0ggPSBtZWFzdXJlLnNjcm9sbFdpZHRoID4gbWVhc3VyZS5jbGllbnRXaWR0aCArIDE7XG4gICAgICB2YXIgbmVlZHNWID0gbWVhc3VyZS5zY3JvbGxIZWlnaHQgPiBtZWFzdXJlLmNsaWVudEhlaWdodCArIDE7XG4gICAgICB2YXIgc1dpZHRoID0gbWVhc3VyZS5uYXRpdmVCYXJXaWR0aDtcblxuICAgICAgaWYgKG5lZWRzVikge1xuICAgICAgICB0aGlzLnZlcnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy52ZXJ0LnN0eWxlLmJvdHRvbSA9IG5lZWRzSCA/IHNXaWR0aCArIFwicHhcIiA6IFwiMFwiO1xuICAgICAgICB2YXIgdG90YWxIZWlnaHQgPSBtZWFzdXJlLnZpZXdIZWlnaHQgLSAobmVlZHNIID8gc1dpZHRoIDogMCk7XG4gICAgICAgIC8vIEEgYnVnIGluIElFOCBjYW4gY2F1c2UgdGhpcyB2YWx1ZSB0byBiZSBuZWdhdGl2ZSwgc28gZ3VhcmQgaXQuXG4gICAgICAgIHRoaXMudmVydC5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9XG4gICAgICAgICAgTWF0aC5tYXgoMCwgbWVhc3VyZS5zY3JvbGxIZWlnaHQgLSBtZWFzdXJlLmNsaWVudEhlaWdodCArIHRvdGFsSGVpZ2h0KSArIFwicHhcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmVydC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgdGhpcy52ZXJ0LmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gXCIwXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWVkc0gpIHtcbiAgICAgICAgdGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0aGlzLmhvcml6LnN0eWxlLnJpZ2h0ID0gbmVlZHNWID8gc1dpZHRoICsgXCJweFwiIDogXCIwXCI7XG4gICAgICAgIHRoaXMuaG9yaXouc3R5bGUubGVmdCA9IG1lYXN1cmUuYmFyTGVmdCArIFwicHhcIjtcbiAgICAgICAgdmFyIHRvdGFsV2lkdGggPSBtZWFzdXJlLnZpZXdXaWR0aCAtIG1lYXN1cmUuYmFyTGVmdCAtIChuZWVkc1YgPyBzV2lkdGggOiAwKTtcbiAgICAgICAgdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0eWxlLndpZHRoID1cbiAgICAgICAgICAobWVhc3VyZS5zY3JvbGxXaWR0aCAtIG1lYXN1cmUuY2xpZW50V2lkdGggKyB0b3RhbFdpZHRoKSArIFwicHhcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaG9yaXouc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIHRoaXMuaG9yaXouZmlyc3RDaGlsZC5zdHlsZS53aWR0aCA9IFwiMFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuY2hlY2tlZFplcm9XaWR0aCAmJiBtZWFzdXJlLmNsaWVudEhlaWdodCA+IDApIHtcbiAgICAgICAgaWYgKHNXaWR0aCA9PSAwKSB0aGlzLnplcm9XaWR0aEhhY2soKTtcbiAgICAgICAgdGhpcy5jaGVja2VkWmVyb1dpZHRoID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtyaWdodDogbmVlZHNWID8gc1dpZHRoIDogMCwgYm90dG9tOiBuZWVkc0ggPyBzV2lkdGggOiAwfTtcbiAgICB9LFxuICAgIHNldFNjcm9sbExlZnQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgaWYgKHRoaXMuaG9yaXouc2Nyb2xsTGVmdCAhPSBwb3MpIHRoaXMuaG9yaXouc2Nyb2xsTGVmdCA9IHBvcztcbiAgICAgIGlmICh0aGlzLmRpc2FibGVIb3JpeikgdGhpcy5lbmFibGVaZXJvV2lkdGhCYXIodGhpcy5ob3JpeiwgdGhpcy5kaXNhYmxlSG9yaXopO1xuICAgIH0sXG4gICAgc2V0U2Nyb2xsVG9wOiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIGlmICh0aGlzLnZlcnQuc2Nyb2xsVG9wICE9IHBvcykgdGhpcy52ZXJ0LnNjcm9sbFRvcCA9IHBvcztcbiAgICAgIGlmICh0aGlzLmRpc2FibGVWZXJ0KSB0aGlzLmVuYWJsZVplcm9XaWR0aEJhcih0aGlzLnZlcnQsIHRoaXMuZGlzYWJsZVZlcnQpO1xuICAgIH0sXG4gICAgemVyb1dpZHRoSGFjazogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdyA9IG1hYyAmJiAhbWFjX2dlTW91bnRhaW5MaW9uID8gXCIxMnB4XCIgOiBcIjE4cHhcIjtcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUuaGVpZ2h0ID0gdGhpcy52ZXJ0LnN0eWxlLndpZHRoID0gdztcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUucG9pbnRlckV2ZW50cyA9IHRoaXMudmVydC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICB0aGlzLmRpc2FibGVIb3JpeiA9IG5ldyBEZWxheWVkO1xuICAgICAgdGhpcy5kaXNhYmxlVmVydCA9IG5ldyBEZWxheWVkO1xuICAgIH0sXG4gICAgZW5hYmxlWmVyb1dpZHRoQmFyOiBmdW5jdGlvbihiYXIsIGRlbGF5KSB7XG4gICAgICBiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuICAgICAgZnVuY3Rpb24gbWF5YmVEaXNhYmxlKCkge1xuICAgICAgICAvLyBUbyBmaW5kIG91dCB3aGV0aGVyIHRoZSBzY3JvbGxiYXIgaXMgc3RpbGwgdmlzaWJsZSwgd2VcbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgZWxlbWVudCB1bmRlciB0aGUgcGl4ZWwgaW4gdGhlIGJvdHRvbVxuICAgICAgICAvLyBsZWZ0IGNvcm5lciBvZiB0aGUgc2Nyb2xsYmFyIGJveCBpcyB0aGUgc2Nyb2xsYmFyIGJveFxuICAgICAgICAvLyBpdHNlbGYgKHdoZW4gdGhlIGJhciBpcyBzdGlsbCB2aXNpYmxlKSBvciBpdHMgZmlsbGVyIGNoaWxkXG4gICAgICAgIC8vICh3aGVuIHRoZSBiYXIgaXMgaGlkZGVuKS4gSWYgaXQgaXMgc3RpbGwgdmlzaWJsZSwgd2Uga2VlcFxuICAgICAgICAvLyBpdCBlbmFibGVkLCBpZiBpdCdzIGhpZGRlbiwgd2UgZGlzYWJsZSBwb2ludGVyIGV2ZW50cy5cbiAgICAgICAgdmFyIGJveCA9IGJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoYm94LmxlZnQgKyAxLCBib3guYm90dG9tIC0gMSk7XG4gICAgICAgIGlmIChlbHQgIT0gYmFyKSBiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICAgICAgICBlbHNlIGRlbGF5LnNldCgxMDAwLCBtYXliZURpc2FibGUpO1xuICAgICAgfVxuICAgICAgZGVsYXkuc2V0KDEwMDAsIG1heWJlRGlzYWJsZSk7XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5ob3Jpei5wYXJlbnROb2RlO1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuaG9yaXopO1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMudmVydCk7XG4gICAgfVxuICB9LCBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gTnVsbFNjcm9sbGJhcnMoKSB7fVxuXG4gIE51bGxTY3JvbGxiYXJzLnByb3RvdHlwZSA9IGNvcHlPYmooe1xuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7IHJldHVybiB7Ym90dG9tOiAwLCByaWdodDogMH07IH0sXG4gICAgc2V0U2Nyb2xsTGVmdDogZnVuY3Rpb24oKSB7fSxcbiAgICBzZXRTY3JvbGxUb3A6IGZ1bmN0aW9uKCkge30sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge31cbiAgfSwgTnVsbFNjcm9sbGJhcnMucHJvdG90eXBlKTtcblxuICBDb2RlTWlycm9yLnNjcm9sbGJhck1vZGVsID0ge1wibmF0aXZlXCI6IE5hdGl2ZVNjcm9sbGJhcnMsIFwibnVsbFwiOiBOdWxsU2Nyb2xsYmFyc307XG5cbiAgZnVuY3Rpb24gaW5pdFNjcm9sbGJhcnMoY20pIHtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzKSB7XG4gICAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuY2xlYXIoKTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpXG4gICAgICAgIHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpO1xuICAgIH1cblxuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycyA9IG5ldyBDb2RlTWlycm9yLnNjcm9sbGJhck1vZGVsW2NtLm9wdGlvbnMuc2Nyb2xsYmFyU3R5bGVdKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGNtLmRpc3BsYXkud3JhcHBlci5pbnNlcnRCZWZvcmUobm9kZSwgY20uZGlzcGxheS5zY3JvbGxiYXJGaWxsZXIpO1xuICAgICAgLy8gUHJldmVudCBjbGlja3MgaW4gdGhlIHNjcm9sbGJhcnMgZnJvbSBraWxsaW5nIGZvY3VzXG4gICAgICBvbihub2RlLCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNtLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTsgfSwgMCk7XG4gICAgICB9KTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIiwgXCJ0cnVlXCIpO1xuICAgIH0sIGZ1bmN0aW9uKHBvcywgYXhpcykge1xuICAgICAgaWYgKGF4aXMgPT0gXCJob3Jpem9udGFsXCIpIHNldFNjcm9sbExlZnQoY20sIHBvcyk7XG4gICAgICBlbHNlIHNldFNjcm9sbFRvcChjbSwgcG9zKTtcbiAgICB9LCBjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcylcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGJhcnMoY20sIG1lYXN1cmUpIHtcbiAgICBpZiAoIW1lYXN1cmUpIG1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG4gICAgdmFyIHN0YXJ0V2lkdGggPSBjbS5kaXNwbGF5LmJhcldpZHRoLCBzdGFydEhlaWdodCA9IGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICAgIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0ICYmIHN0YXJ0V2lkdGggIT0gY20uZGlzcGxheS5iYXJXaWR0aCB8fCBzdGFydEhlaWdodCAhPSBjbS5kaXNwbGF5LmJhckhlaWdodDsgaSsrKSB7XG4gICAgICBpZiAoc3RhcnRXaWR0aCAhPSBjbS5kaXNwbGF5LmJhcldpZHRoICYmIGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKVxuICAgICAgICB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XG4gICAgICB1cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKSk7XG4gICAgICBzdGFydFdpZHRoID0gY20uZGlzcGxheS5iYXJXaWR0aDsgc3RhcnRIZWlnaHQgPSBjbS5kaXNwbGF5LmJhckhlaWdodDtcbiAgICB9XG4gIH1cblxuICAvLyBSZS1zeW5jaHJvbml6ZSB0aGUgZmFrZSBzY3JvbGxiYXJzIHdpdGggdGhlIGFjdHVhbCBzaXplIG9mIHRoZVxuICAvLyBjb250ZW50LlxuICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmUpIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgdmFyIHNpemVzID0gZC5zY3JvbGxiYXJzLnVwZGF0ZShtZWFzdXJlKTtcblxuICAgIGQuc2l6ZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gKGQuYmFyV2lkdGggPSBzaXplcy5yaWdodCkgKyBcInB4XCI7XG4gICAgZC5zaXplci5zdHlsZS5wYWRkaW5nQm90dG9tID0gKGQuYmFySGVpZ2h0ID0gc2l6ZXMuYm90dG9tKSArIFwicHhcIjtcbiAgICBkLmhlaWdodEZvcmNlci5zdHlsZS5ib3JkZXJCb3R0b20gPSBzaXplcy5ib3R0b20gKyBcInB4IHNvbGlkIHRyYW5zcGFyZW50XCJcblxuICAgIGlmIChzaXplcy5yaWdodCAmJiBzaXplcy5ib3R0b20pIHtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5oZWlnaHQgPSBzaXplcy5ib3R0b20gKyBcInB4XCI7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS53aWR0aCA9IHNpemVzLnJpZ2h0ICsgXCJweFwiO1xuICAgIH0gZWxzZSBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICBpZiAoc2l6ZXMuYm90dG9tICYmIGNtLm9wdGlvbnMuY292ZXJHdXR0ZXJOZXh0VG9TY3JvbGxiYXIgJiYgY20ub3B0aW9ucy5maXhlZEd1dHRlcikge1xuICAgICAgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNpemVzLmJvdHRvbSArIFwicHhcIjtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLndpZHRoID0gbWVhc3VyZS5ndXR0ZXJXaWR0aCArIFwicHhcIjtcbiAgICB9IGVsc2UgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBsaW5lcyB0aGF0IGFyZSB2aXNpYmxlIGluIGEgZ2l2ZW4gdmlld3BvcnQgKGRlZmF1bHRzXG4gIC8vIHRoZSB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24pLiB2aWV3cG9ydCBtYXkgY29udGFpbiB0b3AsXG4gIC8vIGhlaWdodCwgYW5kIGVuc3VyZSAoc2VlIG9wLnNjcm9sbFRvUG9zKSBwcm9wZXJ0aWVzLlxuICBmdW5jdGlvbiB2aXNpYmxlTGluZXMoZGlzcGxheSwgZG9jLCB2aWV3cG9ydCkge1xuICAgIHZhciB0b3AgPSB2aWV3cG9ydCAmJiB2aWV3cG9ydC50b3AgIT0gbnVsbCA/IE1hdGgubWF4KDAsIHZpZXdwb3J0LnRvcCkgOiBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDtcbiAgICB0b3AgPSBNYXRoLmZsb29yKHRvcCAtIHBhZGRpbmdUb3AoZGlzcGxheSkpO1xuICAgIHZhciBib3R0b20gPSB2aWV3cG9ydCAmJiB2aWV3cG9ydC5ib3R0b20gIT0gbnVsbCA/IHZpZXdwb3J0LmJvdHRvbSA6IHRvcCArIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQ7XG5cbiAgICB2YXIgZnJvbSA9IGxpbmVBdEhlaWdodChkb2MsIHRvcCksIHRvID0gbGluZUF0SGVpZ2h0KGRvYywgYm90dG9tKTtcbiAgICAvLyBFbnN1cmUgaXMgYSB7ZnJvbToge2xpbmUsIGNofSwgdG86IHtsaW5lLCBjaH19IG9iamVjdCwgYW5kXG4gICAgLy8gZm9yY2VzIHRob3NlIGxpbmVzIGludG8gdGhlIHZpZXdwb3J0IChpZiBwb3NzaWJsZSkuXG4gICAgaWYgKHZpZXdwb3J0ICYmIHZpZXdwb3J0LmVuc3VyZSkge1xuICAgICAgdmFyIGVuc3VyZUZyb20gPSB2aWV3cG9ydC5lbnN1cmUuZnJvbS5saW5lLCBlbnN1cmVUbyA9IHZpZXdwb3J0LmVuc3VyZS50by5saW5lO1xuICAgICAgaWYgKGVuc3VyZUZyb20gPCBmcm9tKSB7XG4gICAgICAgIGZyb20gPSBlbnN1cmVGcm9tO1xuICAgICAgICB0byA9IGxpbmVBdEhlaWdodChkb2MsIGhlaWdodEF0TGluZShnZXRMaW5lKGRvYywgZW5zdXJlRnJvbSkpICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCk7XG4gICAgICB9IGVsc2UgaWYgKE1hdGgubWluKGVuc3VyZVRvLCBkb2MubGFzdExpbmUoKSkgPj0gdG8pIHtcbiAgICAgICAgZnJvbSA9IGxpbmVBdEhlaWdodChkb2MsIGhlaWdodEF0TGluZShnZXRMaW5lKGRvYywgZW5zdXJlVG8pKSAtIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0byA9IGVuc3VyZVRvO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2Zyb206IGZyb20sIHRvOiBNYXRoLm1heCh0bywgZnJvbSArIDEpfTtcbiAgfVxuXG4gIC8vIExJTkUgTlVNQkVSU1xuXG4gIC8vIFJlLWFsaWduIGxpbmUgbnVtYmVycyBhbmQgZ3V0dGVyIG1hcmtzIHRvIGNvbXBlbnNhdGUgZm9yXG4gIC8vIGhvcml6b250YWwgc2Nyb2xsaW5nLlxuICBmdW5jdGlvbiBhbGlnbkhvcml6b250YWxseShjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldztcbiAgICBpZiAoIWRpc3BsYXkuYWxpZ25XaWRnZXRzICYmICghZGlzcGxheS5ndXR0ZXJzLmZpcnN0Q2hpbGQgfHwgIWNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpKSByZXR1cm47XG4gICAgdmFyIGNvbXAgPSBjb21wZW5zYXRlRm9ySFNjcm9sbChkaXNwbGF5KSAtIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCArIGNtLmRvYy5zY3JvbGxMZWZ0O1xuICAgIHZhciBndXR0ZXJXID0gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoLCBsZWZ0ID0gY29tcCArIFwicHhcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIGlmICghdmlld1tpXS5oaWRkZW4pIHtcbiAgICAgIGlmIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyICYmIHZpZXdbaV0uZ3V0dGVyKVxuICAgICAgICB2aWV3W2ldLmd1dHRlci5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgIHZhciBhbGlnbiA9IHZpZXdbaV0uYWxpZ25hYmxlO1xuICAgICAgaWYgKGFsaWduKSBmb3IgKHZhciBqID0gMDsgaiA8IGFsaWduLmxlbmd0aDsgaisrKVxuICAgICAgICBhbGlnbltqXS5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICB9XG4gICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpXG4gICAgICBkaXNwbGF5Lmd1dHRlcnMuc3R5bGUubGVmdCA9IChjb21wICsgZ3V0dGVyVykgKyBcInB4XCI7XG4gIH1cblxuICAvLyBVc2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBsaW5lIG51bWJlciBndXR0ZXIgaXMgc3RpbGwgdGhlIHJpZ2h0XG4gIC8vIHNpemUgZm9yIHRoZSBjdXJyZW50IGRvY3VtZW50IHNpemUuIFJldHVybnMgdHJ1ZSB3aGVuIGFuIHVwZGF0ZVxuICAvLyBpcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKGNtKSB7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVOdW1iZXJzKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbGFzdCA9IGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGxhc3QubGVuZ3RoICE9IGRpc3BsYXkubGluZU51bUNoYXJzKSB7XG4gICAgICB2YXIgdGVzdCA9IGRpc3BsYXkubWVhc3VyZS5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBsYXN0KV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIpKTtcbiAgICAgIHZhciBpbm5lclcgPSB0ZXN0LmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGgsIHBhZGRpbmcgPSB0ZXN0Lm9mZnNldFdpZHRoIC0gaW5uZXJXO1xuICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0gXCJcIjtcbiAgICAgIGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPSBNYXRoLm1heChpbm5lclcsIGRpc3BsYXkubGluZUd1dHRlci5vZmZzZXRXaWR0aCAtIHBhZGRpbmcpICsgMTtcbiAgICAgIGRpc3BsYXkubGluZU51bVdpZHRoID0gZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIHBhZGRpbmc7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1DaGFycyA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPyBsYXN0Lmxlbmd0aCA6IC0xO1xuICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0gZGlzcGxheS5saW5lTnVtV2lkdGggKyBcInB4XCI7XG4gICAgICB1cGRhdGVHdXR0ZXJTcGFjZShjbSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gbGluZU51bWJlckZvcihvcHRpb25zLCBpKSB7XG4gICAgcmV0dXJuIFN0cmluZyhvcHRpb25zLmxpbmVOdW1iZXJGb3JtYXR0ZXIoaSArIG9wdGlvbnMuZmlyc3RMaW5lTnVtYmVyKSk7XG4gIH1cblxuICAvLyBDb21wdXRlcyBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgKyBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsXG4gIC8vIGJ1dCB1c2luZyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgdG8gZ2V0IGEgc3ViLXBpeGVsLWFjY3VyYXRlXG4gIC8vIHJlc3VsdC5cbiAgZnVuY3Rpb24gY29tcGVuc2F0ZUZvckhTY3JvbGwoZGlzcGxheSkge1xuICAgIHJldHVybiBkaXNwbGF5LnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkaXNwbGF5LnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gIH1cblxuICAvLyBESVNQTEFZIERSQVdJTkdcblxuICBmdW5jdGlvbiBEaXNwbGF5VXBkYXRlKGNtLCB2aWV3cG9ydCwgZm9yY2UpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG5cbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgLy8gU3RvcmUgc29tZSB2YWx1ZXMgdGhhdCB3ZSdsbCBuZWVkIGxhdGVyIChidXQgZG9uJ3Qgd2FudCB0byBmb3JjZSBhIHJlbGF5b3V0IGZvcilcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlTGluZXMoZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgdGhpcy5lZGl0b3JJc0hpZGRlbiA9ICFkaXNwbGF5LndyYXBwZXIub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy53cmFwcGVySGVpZ2h0ID0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICB0aGlzLndyYXBwZXJXaWR0aCA9IGRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICB0aGlzLm9sZERpc3BsYXlXaWR0aCA9IGRpc3BsYXlXaWR0aChjbSk7XG4gICAgdGhpcy5mb3JjZSA9IGZvcmNlO1xuICAgIHRoaXMuZGltcyA9IGdldERpbWVuc2lvbnMoY20pO1xuICAgIHRoaXMuZXZlbnRzID0gW107XG4gIH1cblxuICBEaXNwbGF5VXBkYXRlLnByb3RvdHlwZS5zaWduYWwgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gICAgaWYgKGhhc0hhbmRsZXIoZW1pdHRlciwgdHlwZSkpXG4gICAgICB0aGlzLmV2ZW50cy5wdXNoKGFyZ3VtZW50cyk7XG4gIH07XG4gIERpc3BsYXlVcGRhdGUucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ldmVudHMubGVuZ3RoOyBpKyspXG4gICAgICBzaWduYWwuYXBwbHkobnVsbCwgdGhpcy5ldmVudHNbaV0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1heWJlQ2xpcFNjcm9sbGJhcnMoY20pIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKCFkaXNwbGF5LnNjcm9sbGJhcnNDbGlwcGVkICYmIGRpc3BsYXkuc2Nyb2xsZXIub2Zmc2V0V2lkdGgpIHtcbiAgICAgIGRpc3BsYXkubmF0aXZlQmFyV2lkdGggPSBkaXNwbGF5LnNjcm9sbGVyLm9mZnNldFdpZHRoIC0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aDtcbiAgICAgIGRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLmhlaWdodCA9IHNjcm9sbEdhcChjbSkgKyBcInB4XCI7XG4gICAgICBkaXNwbGF5LnNpemVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9IC1kaXNwbGF5Lm5hdGl2ZUJhcldpZHRoICsgXCJweFwiO1xuICAgICAgZGlzcGxheS5zaXplci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gc2Nyb2xsR2FwKGNtKSArIFwicHhcIjtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsYmFyc0NsaXBwZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIERvZXMgdGhlIGFjdHVhbCB1cGRhdGluZyBvZiB0aGUgbGluZSBkaXNwbGF5LiBCYWlscyBvdXRcbiAgLy8gKHJldHVybmluZyBmYWxzZSkgd2hlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGJlIGRvbmUgYW5kIGZvcmNlZCBpc1xuICAvLyBmYWxzZS5cbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcblxuICAgIGlmICh1cGRhdGUuZWRpdG9ySXNIaWRkZW4pIHtcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQmFpbCBvdXQgaWYgdGhlIHZpc2libGUgYXJlYSBpcyBhbHJlYWR5IHJlbmRlcmVkIGFuZCBub3RoaW5nIGNoYW5nZWQuXG4gICAgaWYgKCF1cGRhdGUuZm9yY2UgJiZcbiAgICAgICAgdXBkYXRlLnZpc2libGUuZnJvbSA+PSBkaXNwbGF5LnZpZXdGcm9tICYmIHVwZGF0ZS52aXNpYmxlLnRvIDw9IGRpc3BsYXkudmlld1RvICYmXG4gICAgICAgIChkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID09IG51bGwgfHwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA+PSBkaXNwbGF5LnZpZXdUbykgJiZcbiAgICAgICAgZGlzcGxheS5yZW5kZXJlZFZpZXcgPT0gZGlzcGxheS52aWV3ICYmIGNvdW50RGlydHlWaWV3KGNtKSA9PSAwKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKGNtKSkge1xuICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIHVwZGF0ZS5kaW1zID0gZ2V0RGltZW5zaW9ucyhjbSk7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBhIHN1aXRhYmxlIG5ldyB2aWV3cG9ydCAoZnJvbSAmIHRvKVxuICAgIHZhciBlbmQgPSBkb2MuZmlyc3QgKyBkb2Muc2l6ZTtcbiAgICB2YXIgZnJvbSA9IE1hdGgubWF4KHVwZGF0ZS52aXNpYmxlLmZyb20gLSBjbS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luLCBkb2MuZmlyc3QpO1xuICAgIHZhciB0byA9IE1hdGgubWluKGVuZCwgdXBkYXRlLnZpc2libGUudG8gKyBjbS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luKTtcbiAgICBpZiAoZGlzcGxheS52aWV3RnJvbSA8IGZyb20gJiYgZnJvbSAtIGRpc3BsYXkudmlld0Zyb20gPCAyMCkgZnJvbSA9IE1hdGgubWF4KGRvYy5maXJzdCwgZGlzcGxheS52aWV3RnJvbSk7XG4gICAgaWYgKGRpc3BsYXkudmlld1RvID4gdG8gJiYgZGlzcGxheS52aWV3VG8gLSB0byA8IDIwKSB0byA9IE1hdGgubWluKGVuZCwgZGlzcGxheS52aWV3VG8pO1xuICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucykge1xuICAgICAgZnJvbSA9IHZpc3VhbExpbmVObyhjbS5kb2MsIGZyb20pO1xuICAgICAgdG8gPSB2aXN1YWxMaW5lRW5kTm8oY20uZG9jLCB0byk7XG4gICAgfVxuXG4gICAgdmFyIGRpZmZlcmVudCA9IGZyb20gIT0gZGlzcGxheS52aWV3RnJvbSB8fCB0byAhPSBkaXNwbGF5LnZpZXdUbyB8fFxuICAgICAgZGlzcGxheS5sYXN0V3JhcEhlaWdodCAhPSB1cGRhdGUud3JhcHBlckhlaWdodCB8fCBkaXNwbGF5Lmxhc3RXcmFwV2lkdGggIT0gdXBkYXRlLndyYXBwZXJXaWR0aDtcbiAgICBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0byk7XG5cbiAgICBkaXNwbGF5LnZpZXdPZmZzZXQgPSBoZWlnaHRBdExpbmUoZ2V0TGluZShjbS5kb2MsIGRpc3BsYXkudmlld0Zyb20pKTtcbiAgICAvLyBQb3NpdGlvbiB0aGUgbW92ZXIgZGl2IHRvIGFsaWduIHdpdGggdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY20uZGlzcGxheS5tb3Zlci5zdHlsZS50b3AgPSBkaXNwbGF5LnZpZXdPZmZzZXQgKyBcInB4XCI7XG5cbiAgICB2YXIgdG9VcGRhdGUgPSBjb3VudERpcnR5VmlldyhjbSk7XG4gICAgaWYgKCFkaWZmZXJlbnQgJiYgdG9VcGRhdGUgPT0gMCAmJiAhdXBkYXRlLmZvcmNlICYmIGRpc3BsYXkucmVuZGVyZWRWaWV3ID09IGRpc3BsYXkudmlldyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gRm9yIGJpZyBjaGFuZ2VzLCB3ZSBoaWRlIHRoZSBlbmNsb3NpbmcgZWxlbWVudCBkdXJpbmcgdGhlXG4gICAgLy8gdXBkYXRlLCBzaW5jZSB0aGF0IHNwZWVkcyB1cCB0aGUgb3BlcmF0aW9ucyBvbiBtb3N0IGJyb3dzZXJzLlxuICAgIHZhciBmb2N1c2VkID0gYWN0aXZlRWx0KCk7XG4gICAgaWYgKHRvVXBkYXRlID4gNCkgZGlzcGxheS5saW5lRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBwYXRjaERpc3BsYXkoY20sIGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMsIHVwZGF0ZS5kaW1zKTtcbiAgICBpZiAodG9VcGRhdGUgPiA0KSBkaXNwbGF5LmxpbmVEaXYuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgZGlzcGxheS5yZW5kZXJlZFZpZXcgPSBkaXNwbGF5LnZpZXc7XG4gICAgLy8gVGhlcmUgbWlnaHQgaGF2ZSBiZWVuIGEgd2lkZ2V0IHdpdGggYSBmb2N1c2VkIGVsZW1lbnQgdGhhdCBnb3RcbiAgICAvLyBoaWRkZW4gb3IgdXBkYXRlZCwgaWYgc28gcmUtZm9jdXMgaXQuXG4gICAgaWYgKGZvY3VzZWQgJiYgYWN0aXZlRWx0KCkgIT0gZm9jdXNlZCAmJiBmb2N1c2VkLm9mZnNldEhlaWdodCkgZm9jdXNlZC5mb2N1cygpO1xuXG4gICAgLy8gUHJldmVudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMgZnJvbSBpbnRlcmZlcmluZyB3aXRoIHRoZSBzY3JvbGxcbiAgICAvLyB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkuY3Vyc29yRGl2KTtcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LnNlbGVjdGlvbkRpdik7XG4gICAgZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmhlaWdodCA9IGRpc3BsYXkuc2l6ZXIuc3R5bGUubWluSGVpZ2h0ID0gMDtcblxuICAgIGlmIChkaWZmZXJlbnQpIHtcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBIZWlnaHQgPSB1cGRhdGUud3JhcHBlckhlaWdodDtcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBXaWR0aCA9IHVwZGF0ZS53cmFwcGVyV2lkdGg7XG4gICAgICBzdGFydFdvcmtlcihjbSwgNDAwKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID0gbnVsbDtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9zdFVwZGF0ZURpc3BsYXkoY20sIHVwZGF0ZSkge1xuICAgIHZhciB2aWV3cG9ydCA9IHVwZGF0ZS52aWV3cG9ydDtcblxuICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgIGlmICghZmlyc3QgfHwgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nIHx8IHVwZGF0ZS5vbGREaXNwbGF5V2lkdGggPT0gZGlzcGxheVdpZHRoKGNtKSkge1xuICAgICAgICAvLyBDbGlwIGZvcmNlZCB2aWV3cG9ydCB0byBhY3R1YWwgc2Nyb2xsYWJsZSBhcmVhLlxuICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwpXG4gICAgICAgICAgdmlld3BvcnQgPSB7dG9wOiBNYXRoLm1pbihjbS5kb2MuaGVpZ2h0ICsgcGFkZGluZ1ZlcnQoY20uZGlzcGxheSkgLSBkaXNwbGF5SGVpZ2h0KGNtKSwgdmlld3BvcnQudG9wKX07XG4gICAgICAgIC8vIFVwZGF0ZWQgbGluZSBoZWlnaHRzIG1pZ2h0IHJlc3VsdCBpbiB0aGUgZHJhd24gYXJlYSBub3RcbiAgICAgICAgLy8gYWN0dWFsbHkgY292ZXJpbmcgdGhlIHZpZXdwb3J0LiBLZWVwIGxvb3BpbmcgdW50aWwgaXQgZG9lcy5cbiAgICAgICAgdXBkYXRlLnZpc2libGUgPSB2aXNpYmxlTGluZXMoY20uZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgICAgIGlmICh1cGRhdGUudmlzaWJsZS5mcm9tID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gY20uZGlzcGxheS52aWV3VG8pXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoIXVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSkgYnJlYWs7XG4gICAgICB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XG4gICAgICB2YXIgYmFyTWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbihjbSk7XG4gICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtLCBiYXJNZWFzdXJlKTtcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBiYXJNZWFzdXJlKTtcbiAgICB9XG5cbiAgICB1cGRhdGUuc2lnbmFsKGNtLCBcInVwZGF0ZVwiLCBjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkudmlld0Zyb20gIT0gY20uZGlzcGxheS5yZXBvcnRlZFZpZXdGcm9tIHx8IGNtLmRpc3BsYXkudmlld1RvICE9IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8pIHtcbiAgICAgIHVwZGF0ZS5zaWduYWwoY20sIFwidmlld3BvcnRDaGFuZ2VcIiwgY20sIGNtLmRpc3BsYXkudmlld0Zyb20sIGNtLmRpc3BsYXkudmlld1RvKTtcbiAgICAgIGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld0Zyb207IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8gPSBjbS5kaXNwbGF5LnZpZXdUbztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB2aWV3cG9ydCkge1xuICAgIHZhciB1cGRhdGUgPSBuZXcgRGlzcGxheVVwZGF0ZShjbSwgdmlld3BvcnQpO1xuICAgIGlmICh1cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkpIHtcbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpO1xuICAgICAgdmFyIGJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG4gICAgICB1cGRhdGVTZWxlY3Rpb24oY20pO1xuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgYmFyTWVhc3VyZSk7XG4gICAgICBzZXREb2N1bWVudEhlaWdodChjbSwgYmFyTWVhc3VyZSk7XG4gICAgICB1cGRhdGUuZmluaXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0RG9jdW1lbnRIZWlnaHQoY20sIG1lYXN1cmUpIHtcbiAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xuICAgIGNtLmRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLnRvcCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xuICAgIGNtLmRpc3BsYXkuZ3V0dGVycy5zdHlsZS5oZWlnaHQgPSAobWVhc3VyZS5kb2NIZWlnaHQgKyBjbS5kaXNwbGF5LmJhckhlaWdodCArIHNjcm9sbEdhcChjbSkpICsgXCJweFwiO1xuICB9XG5cbiAgLy8gUmVhZCB0aGUgYWN0dWFsIGhlaWdodHMgb2YgdGhlIHJlbmRlcmVkIGxpbmVzLCBhbmQgdXBkYXRlIHRoZWlyXG4gIC8vIHN0b3JlZCBoZWlnaHRzIHRvIG1hdGNoLlxuICBmdW5jdGlvbiB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICB2YXIgcHJldkJvdHRvbSA9IGRpc3BsYXkubGluZURpdi5vZmZzZXRUb3A7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXIgPSBkaXNwbGF5LnZpZXdbaV0sIGhlaWdodDtcbiAgICAgIGlmIChjdXIuaGlkZGVuKSBjb250aW51ZTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkge1xuICAgICAgICB2YXIgYm90ID0gY3VyLm5vZGUub2Zmc2V0VG9wICsgY3VyLm5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBoZWlnaHQgPSBib3QgLSBwcmV2Qm90dG9tO1xuICAgICAgICBwcmV2Qm90dG9tID0gYm90O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJveCA9IGN1ci5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBoZWlnaHQgPSBib3guYm90dG9tIC0gYm94LnRvcDtcbiAgICAgIH1cbiAgICAgIHZhciBkaWZmID0gY3VyLmxpbmUuaGVpZ2h0IC0gaGVpZ2h0O1xuICAgICAgaWYgKGhlaWdodCA8IDIpIGhlaWdodCA9IHRleHRIZWlnaHQoZGlzcGxheSk7XG4gICAgICBpZiAoZGlmZiA+IC4wMDEgfHwgZGlmZiA8IC0uMDAxKSB7XG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQoY3VyLmxpbmUsIGhlaWdodCk7XG4gICAgICAgIHVwZGF0ZVdpZGdldEhlaWdodChjdXIubGluZSk7XG4gICAgICAgIGlmIChjdXIucmVzdCkgZm9yICh2YXIgaiA9IDA7IGogPCBjdXIucmVzdC5sZW5ndGg7IGorKylcbiAgICAgICAgICB1cGRhdGVXaWRnZXRIZWlnaHQoY3VyLnJlc3Rbal0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlYWQgYW5kIHN0b3JlIHRoZSBoZWlnaHQgb2YgbGluZSB3aWRnZXRzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgLy8gZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gdXBkYXRlV2lkZ2V0SGVpZ2h0KGxpbmUpIHtcbiAgICBpZiAobGluZS53aWRnZXRzKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUud2lkZ2V0cy5sZW5ndGg7ICsraSlcbiAgICAgIGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQgPSBsaW5lLndpZGdldHNbaV0ubm9kZS5wYXJlbnROb2RlLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIC8vIERvIGEgYnVsay1yZWFkIG9mIHRoZSBET00gcG9zaXRpb25zIGFuZCBzaXplcyBuZWVkZWQgdG8gZHJhdyB0aGVcbiAgLy8gdmlldywgc28gdGhhdCB3ZSBkb24ndCBpbnRlcmxlYXZlIHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gdGhlIERPTS5cbiAgZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheSwgbGVmdCA9IHt9LCB3aWR0aCA9IHt9O1xuICAgIHZhciBndXR0ZXJMZWZ0ID0gZC5ndXR0ZXJzLmNsaWVudExlZnQ7XG4gICAgZm9yICh2YXIgbiA9IGQuZ3V0dGVycy5maXJzdENoaWxkLCBpID0gMDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcsICsraSkge1xuICAgICAgbGVmdFtjbS5vcHRpb25zLmd1dHRlcnNbaV1dID0gbi5vZmZzZXRMZWZ0ICsgbi5jbGllbnRMZWZ0ICsgZ3V0dGVyTGVmdDtcbiAgICAgIHdpZHRoW2NtLm9wdGlvbnMuZ3V0dGVyc1tpXV0gPSBuLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4ge2ZpeGVkUG9zOiBjb21wZW5zYXRlRm9ySFNjcm9sbChkKSxcbiAgICAgICAgICAgIGd1dHRlclRvdGFsV2lkdGg6IGQuZ3V0dGVycy5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGd1dHRlckxlZnQ6IGxlZnQsXG4gICAgICAgICAgICBndXR0ZXJXaWR0aDogd2lkdGgsXG4gICAgICAgICAgICB3cmFwcGVyV2lkdGg6IGQud3JhcHBlci5jbGllbnRXaWR0aH07XG4gIH1cblxuICAvLyBTeW5jIHRoZSBhY3R1YWwgZGlzcGxheSBET00gc3RydWN0dXJlIHdpdGggZGlzcGxheS52aWV3LCByZW1vdmluZ1xuICAvLyBub2RlcyBmb3IgbGluZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHZpZXcsIGFuZCBjcmVhdGluZyB0aGUgb25lc1xuICAvLyB0aGF0IGFyZSBub3QgdGhlcmUgeWV0LCBhbmQgdXBkYXRpbmcgdGhlIG9uZXMgdGhhdCBhcmUgb3V0IG9mXG4gIC8vIGRhdGUuXG4gIGZ1bmN0aW9uIHBhdGNoRGlzcGxheShjbSwgdXBkYXRlTnVtYmVyc0Zyb20sIGRpbXMpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGxpbmVOdW1iZXJzID0gY20ub3B0aW9ucy5saW5lTnVtYmVycztcbiAgICB2YXIgY29udGFpbmVyID0gZGlzcGxheS5saW5lRGl2LCBjdXIgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcblxuICAgIGZ1bmN0aW9uIHJtKG5vZGUpIHtcbiAgICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIC8vIFdvcmtzIGFyb3VuZCBhIHRocm93LXNjcm9sbCBidWcgaW4gT1MgWCBXZWJraXRcbiAgICAgIGlmICh3ZWJraXQgJiYgbWFjICYmIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID09IG5vZGUpXG4gICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgZWxzZVxuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IGRpc3BsYXkudmlldywgbGluZU4gPSBkaXNwbGF5LnZpZXdGcm9tO1xuICAgIC8vIExvb3Agb3ZlciB0aGUgZWxlbWVudHMgaW4gdGhlIHZpZXcsIHN5bmNpbmcgY3VyICh0aGUgRE9NIG5vZGVzXG4gICAgLy8gaW4gZGlzcGxheS5saW5lRGl2KSB3aXRoIHRoZSB2aWV3IGFzIHdlIGdvLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcbiAgICAgIGlmIChsaW5lVmlldy5oaWRkZW4pIHtcbiAgICAgIH0gZWxzZSBpZiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcubm9kZS5wYXJlbnROb2RlICE9IGNvbnRhaW5lcikgeyAvLyBOb3QgZHJhd24geWV0XG4gICAgICAgIHZhciBub2RlID0gYnVpbGRMaW5lRWxlbWVudChjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShub2RlLCBjdXIpO1xuICAgICAgfSBlbHNlIHsgLy8gQWxyZWFkeSBkcmF3blxuICAgICAgICB3aGlsZSAoY3VyICE9IGxpbmVWaWV3Lm5vZGUpIGN1ciA9IHJtKGN1cik7XG4gICAgICAgIHZhciB1cGRhdGVOdW1iZXIgPSBsaW5lTnVtYmVycyAmJiB1cGRhdGVOdW1iZXJzRnJvbSAhPSBudWxsICYmXG4gICAgICAgICAgdXBkYXRlTnVtYmVyc0Zyb20gPD0gbGluZU4gJiYgbGluZVZpZXcubGluZU51bWJlcjtcbiAgICAgICAgaWYgKGxpbmVWaWV3LmNoYW5nZXMpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihsaW5lVmlldy5jaGFuZ2VzLCBcImd1dHRlclwiKSA+IC0xKSB1cGRhdGVOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlTnVtYmVyKSB7XG4gICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4obGluZVZpZXcubGluZU51bWJlcik7XG4gICAgICAgICAgbGluZVZpZXcubGluZU51bWJlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSkpO1xuICAgICAgICB9XG4gICAgICAgIGN1ciA9IGxpbmVWaWV3Lm5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICBsaW5lTiArPSBsaW5lVmlldy5zaXplO1xuICAgIH1cbiAgICB3aGlsZSAoY3VyKSBjdXIgPSBybShjdXIpO1xuICB9XG5cbiAgLy8gV2hlbiBhbiBhc3BlY3Qgb2YgYSBsaW5lIGNoYW5nZXMsIGEgc3RyaW5nIGlzIGFkZGVkIHRvXG4gIC8vIGxpbmVWaWV3LmNoYW5nZXMuIFRoaXMgdXBkYXRlcyB0aGUgcmVsZXZhbnQgcGFydCBvZiB0aGUgbGluZSdzXG4gIC8vIERPTSBzdHJ1Y3R1cmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVWaWV3LmNoYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0eXBlID0gbGluZVZpZXcuY2hhbmdlc1tqXTtcbiAgICAgIGlmICh0eXBlID09IFwidGV4dFwiKSB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImd1dHRlclwiKSB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImNsYXNzXCIpIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJ3aWRnZXRcIikgdXBkYXRlTGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKTtcbiAgICB9XG4gICAgbGluZVZpZXcuY2hhbmdlcyA9IG51bGw7XG4gIH1cblxuICAvLyBMaW5lcyB3aXRoIGd1dHRlciBlbGVtZW50cywgd2lkZ2V0cyBvciBhIGJhY2tncm91bmQgY2xhc3MgbmVlZCB0b1xuICAvLyBiZSB3cmFwcGVkLCBhbmQgaGF2ZSB0aGUgZXh0cmEgZWxlbWVudHMgYWRkZWQgdG8gdGhlIHdyYXBwZXIgZGl2XG4gIGZ1bmN0aW9uIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KSB7XG4gICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZVZpZXcudGV4dCkge1xuICAgICAgbGluZVZpZXcubm9kZSA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZVwiKTtcbiAgICAgIGlmIChsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUpXG4gICAgICAgIGxpbmVWaWV3LnRleHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobGluZVZpZXcubm9kZSwgbGluZVZpZXcudGV4dCk7XG4gICAgICBsaW5lVmlldy5ub2RlLmFwcGVuZENoaWxkKGxpbmVWaWV3LnRleHQpO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSBsaW5lVmlldy5ub2RlLnN0eWxlLnpJbmRleCA9IDI7XG4gICAgfVxuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUJhY2tncm91bmQobGluZVZpZXcpIHtcbiAgICB2YXIgY2xzID0gbGluZVZpZXcuYmdDbGFzcyA/IGxpbmVWaWV3LmJnQ2xhc3MgKyBcIiBcIiArIChsaW5lVmlldy5saW5lLmJnQ2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLmJnQ2xhc3M7XG4gICAgaWYgKGNscykgY2xzICs9IFwiIENvZGVNaXJyb3ItbGluZWJhY2tncm91bmRcIjtcbiAgICBpZiAobGluZVZpZXcuYmFja2dyb3VuZCkge1xuICAgICAgaWYgKGNscykgbGluZVZpZXcuYmFja2dyb3VuZC5jbGFzc05hbWUgPSBjbHM7XG4gICAgICBlbHNlIHsgbGluZVZpZXcuYmFja2dyb3VuZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3LmJhY2tncm91bmQpOyBsaW5lVmlldy5iYWNrZ3JvdW5kID0gbnVsbDsgfVxuICAgIH0gZWxzZSBpZiAoY2xzKSB7XG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICAgIGxpbmVWaWV3LmJhY2tncm91bmQgPSB3cmFwLmluc2VydEJlZm9yZShlbHQoXCJkaXZcIiwgbnVsbCwgY2xzKSwgd3JhcC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH1cblxuICAvLyBXcmFwcGVyIGFyb3VuZCBidWlsZExpbmVDb250ZW50IHdoaWNoIHdpbGwgcmV1c2UgdGhlIHN0cnVjdHVyZVxuICAvLyBpbiBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgd2hlbiBwb3NzaWJsZS5cbiAgZnVuY3Rpb24gZ2V0TGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGV4dC5saW5lID09IGxpbmVWaWV3LmxpbmUpIHtcbiAgICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG4gICAgICBsaW5lVmlldy5tZWFzdXJlID0gZXh0Lm1lYXN1cmU7XG4gICAgICByZXR1cm4gZXh0LmJ1aWx0O1xuICAgIH1cbiAgICByZXR1cm4gYnVpbGRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICB9XG5cbiAgLy8gUmVkcmF3IHRoZSBsaW5lJ3MgdGV4dC4gSW50ZXJhY3RzIHdpdGggdGhlIGJhY2tncm91bmQgYW5kIHRleHRcbiAgLy8gY2xhc3NlcyBiZWNhdXNlIHRoZSBtb2RlIG1heSBvdXRwdXQgdG9rZW5zIHRoYXQgaW5mbHVlbmNlIHRoZXNlXG4gIC8vIGNsYXNzZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVUZXh0KGNtLCBsaW5lVmlldykge1xuICAgIHZhciBjbHMgPSBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZTtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGlmIChsaW5lVmlldy50ZXh0ID09IGxpbmVWaWV3Lm5vZGUpIGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7XG4gICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChidWlsdC5wcmUsIGxpbmVWaWV3LnRleHQpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBidWlsdC5wcmU7XG4gICAgaWYgKGJ1aWx0LmJnQ2xhc3MgIT0gbGluZVZpZXcuYmdDbGFzcyB8fCBidWlsdC50ZXh0Q2xhc3MgIT0gbGluZVZpZXcudGV4dENsYXNzKSB7XG4gICAgICBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICAgIGxpbmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzcztcbiAgICAgIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICB9IGVsc2UgaWYgKGNscykge1xuICAgICAgbGluZVZpZXcudGV4dC5jbGFzc05hbWUgPSBjbHM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUNsYXNzZXMobGluZVZpZXcpIHtcbiAgICB1cGRhdGVMaW5lQmFja2dyb3VuZChsaW5lVmlldyk7XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUud3JhcENsYXNzKVxuICAgICAgZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpLmNsYXNzTmFtZSA9IGxpbmVWaWV3LmxpbmUud3JhcENsYXNzO1xuICAgIGVsc2UgaWYgKGxpbmVWaWV3Lm5vZGUgIT0gbGluZVZpZXcudGV4dClcbiAgICAgIGxpbmVWaWV3Lm5vZGUuY2xhc3NOYW1lID0gXCJcIjtcbiAgICB2YXIgdGV4dENsYXNzID0gbGluZVZpZXcudGV4dENsYXNzID8gbGluZVZpZXcudGV4dENsYXNzICsgXCIgXCIgKyAobGluZVZpZXcubGluZS50ZXh0Q2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLnRleHRDbGFzcztcbiAgICBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZSA9IHRleHRDbGFzcyB8fCBcIlwiO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7XG4gICAgaWYgKGxpbmVWaWV3Lmd1dHRlcikge1xuICAgICAgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChsaW5lVmlldy5ndXR0ZXIpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQpIHtcbiAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCk7XG4gICAgICBsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3MpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyLWJhY2tncm91bmQgXCIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxlZnQ6IFwiICsgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyB3aWR0aDogXCIgKyBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCIpO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCwgbGluZVZpZXcudGV4dCk7XG4gICAgfVxuICAgIHZhciBtYXJrZXJzID0gbGluZVZpZXcubGluZS5ndXR0ZXJNYXJrZXJzO1xuICAgIGlmIChjbS5vcHRpb25zLmxpbmVOdW1iZXJzIHx8IG1hcmtlcnMpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgdmFyIGd1dHRlcldyYXAgPSBsaW5lVmlldy5ndXR0ZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlci13cmFwcGVyXCIsIFwibGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgKyBcInB4XCIpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGd1dHRlcldyYXApO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUoZ3V0dGVyV3JhcCwgbGluZVZpZXcudGV4dCk7XG4gICAgICBpZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcylcbiAgICAgICAgZ3V0dGVyV3JhcC5jbGFzc05hbWUgKz0gXCIgXCIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgJiYgKCFtYXJrZXJzIHx8ICFtYXJrZXJzW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSkpXG4gICAgICAgIGxpbmVWaWV3LmxpbmVOdW1iZXIgPSBndXR0ZXJXcmFwLmFwcGVuZENoaWxkKFxuICAgICAgICAgIGVsdChcImRpdlwiLCBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSxcbiAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsXG4gICAgICAgICAgICAgIFwibGVmdDogXCIgKyBkaW1zLmd1dHRlckxlZnRbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCJdICsgXCJweDsgd2lkdGg6IFwiXG4gICAgICAgICAgICAgICsgY20uZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIFwicHhcIikpO1xuICAgICAgaWYgKG1hcmtlcnMpIGZvciAodmFyIGsgPSAwOyBrIDwgY20ub3B0aW9ucy5ndXR0ZXJzLmxlbmd0aDsgKytrKSB7XG4gICAgICAgIHZhciBpZCA9IGNtLm9wdGlvbnMuZ3V0dGVyc1trXSwgZm91bmQgPSBtYXJrZXJzLmhhc093blByb3BlcnR5KGlkKSAmJiBtYXJrZXJzW2lkXTtcbiAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgIGd1dHRlcldyYXAuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtmb3VuZF0sIFwiQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsIFwibGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbXMuZ3V0dGVyTGVmdFtpZF0gKyBcInB4OyB3aWR0aDogXCIgKyBkaW1zLmd1dHRlcldpZHRoW2lkXSArIFwicHhcIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmIChsaW5lVmlldy5hbGlnbmFibGUpIGxpbmVWaWV3LmFsaWduYWJsZSA9IG51bGw7XG4gICAgZm9yICh2YXIgbm9kZSA9IGxpbmVWaWV3Lm5vZGUuZmlyc3RDaGlsZCwgbmV4dDsgbm9kZTsgbm9kZSA9IG5leHQpIHtcbiAgICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIGlmIChub2RlLmNsYXNzTmFtZSA9PSBcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKVxuICAgICAgICBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH1cbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICB9XG5cbiAgLy8gQnVpbGQgYSBsaW5lJ3MgRE9NIHJlcHJlc2VudGF0aW9uIGZyb20gc2NyYXRjaFxuICBmdW5jdGlvbiBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlO1xuICAgIGlmIChidWlsdC5iZ0NsYXNzKSBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICBpZiAoYnVpbHQudGV4dENsYXNzKSBsaW5lVmlldy50ZXh0Q2xhc3MgPSBidWlsdC50ZXh0Q2xhc3M7XG5cbiAgICB1cGRhdGVMaW5lQ2xhc3NlcyhsaW5lVmlldyk7XG4gICAgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xuICB9XG5cbiAgLy8gQSBsaW5lVmlldyBtYXkgY29udGFpbiBtdWx0aXBsZSBsb2dpY2FsIGxpbmVzICh3aGVuIG1lcmdlZCBieVxuICAvLyBjb2xsYXBzZWQgc3BhbnMpLiBUaGUgd2lkZ2V0cyBmb3IgYWxsIG9mIHRoZW0gbmVlZCB0byBiZSBkcmF3bi5cbiAgZnVuY3Rpb24gaW5zZXJ0TGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKSB7XG4gICAgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LmxpbmUsIGxpbmVWaWV3LCBkaW1zLCB0cnVlKTtcbiAgICBpZiAobGluZVZpZXcucmVzdCkgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LnJlc3RbaV0sIGxpbmVWaWV3LCBkaW1zLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZSwgbGluZVZpZXcsIGRpbXMsIGFsbG93QWJvdmUpIHtcbiAgICBpZiAoIWxpbmUud2lkZ2V0cykgcmV0dXJuO1xuICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgIGZvciAodmFyIGkgPSAwLCB3cyA9IGxpbmUud2lkZ2V0czsgaSA8IHdzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgd2lkZ2V0ID0gd3NbaV0sIG5vZGUgPSBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgXCJDb2RlTWlycm9yLWxpbmV3aWRnZXRcIik7XG4gICAgICBpZiAoIXdpZGdldC5oYW5kbGVNb3VzZUV2ZW50cykgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKTtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShub2RlKTtcbiAgICAgIGlmIChhbGxvd0Fib3ZlICYmIHdpZGdldC5hYm92ZSlcbiAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobm9kZSwgbGluZVZpZXcuZ3V0dGVyIHx8IGxpbmVWaWV3LnRleHQpO1xuICAgICAgZWxzZVxuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgc2lnbmFsTGF0ZXIod2lkZ2V0LCBcInJlZHJhd1wiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwb3NpdGlvbkxpbmVXaWRnZXQod2lkZ2V0LCBub2RlLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmICh3aWRnZXQubm9IU2Nyb2xsKSB7XG4gICAgICAobGluZVZpZXcuYWxpZ25hYmxlIHx8IChsaW5lVmlldy5hbGlnbmFibGUgPSBbXSkpLnB1c2gobm9kZSk7XG4gICAgICB2YXIgd2lkdGggPSBkaW1zLndyYXBwZXJXaWR0aDtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IGRpbXMuZml4ZWRQb3MgKyBcInB4XCI7XG4gICAgICBpZiAoIXdpZGdldC5jb3Zlckd1dHRlcikge1xuICAgICAgICB3aWR0aCAtPSBkaW1zLmd1dHRlclRvdGFsV2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucGFkZGluZ0xlZnQgPSBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpIHtcbiAgICAgIG5vZGUuc3R5bGUuekluZGV4ID0gNTtcbiAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgICBpZiAoIXdpZGdldC5ub0hTY3JvbGwpIG5vZGUuc3R5bGUubWFyZ2luTGVmdCA9IC1kaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgfVxuICB9XG5cbiAgLy8gUE9TSVRJT04gT0JKRUNUXG5cbiAgLy8gQSBQb3MgaW5zdGFuY2UgcmVwcmVzZW50cyBhIHBvc2l0aW9uIHdpdGhpbiB0aGUgdGV4dC5cbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zID0gZnVuY3Rpb24obGluZSwgY2gpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUG9zKSkgcmV0dXJuIG5ldyBQb3MobGluZSwgY2gpO1xuICAgIHRoaXMubGluZSA9IGxpbmU7IHRoaXMuY2ggPSBjaDtcbiAgfTtcblxuICAvLyBDb21wYXJlIHR3byBwb3NpdGlvbnMsIHJldHVybiAwIGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBhIG5lZ2F0aXZlXG4gIC8vIG51bWJlciB3aGVuIGEgaXMgbGVzcywgYW5kIGEgcG9zaXRpdmUgbnVtYmVyIG90aGVyd2lzZS5cbiAgdmFyIGNtcCA9IENvZGVNaXJyb3IuY21wUG9zID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5saW5lIC0gYi5saW5lIHx8IGEuY2ggLSBiLmNoOyB9O1xuXG4gIGZ1bmN0aW9uIGNvcHlQb3MoeCkge3JldHVybiBQb3MoeC5saW5lLCB4LmNoKTt9XG4gIGZ1bmN0aW9uIG1heFBvcyhhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYiA6IGE7IH1cbiAgZnVuY3Rpb24gbWluUG9zKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBhIDogYjsgfVxuXG4gIC8vIElOUFVUIEhBTkRMSU5HXG5cbiAgZnVuY3Rpb24gZW5zdXJlRm9jdXMoY20pIHtcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHsgY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyBvbkZvY3VzKGNtKTsgfVxuICB9XG5cbiAgLy8gVGhpcyB3aWxsIGJlIHNldCB0byBhbiBhcnJheSBvZiBzdHJpbmdzIHdoZW4gY29weWluZywgc28gdGhhdCxcbiAgLy8gd2hlbiBwYXN0aW5nLCB3ZSBrbm93IHdoYXQga2luZCBvZiBzZWxlY3Rpb25zIHRoZSBjb3BpZWQgdGV4dFxuICAvLyB3YXMgbWFkZSBvdXQgb2YuXG4gIHZhciBsYXN0Q29waWVkID0gbnVsbDtcblxuICBmdW5jdGlvbiBhcHBseVRleHRJbnB1dChjbSwgaW5zZXJ0ZWQsIGRlbGV0ZWQsIHNlbCwgb3JpZ2luKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYztcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7XG4gICAgaWYgKCFzZWwpIHNlbCA9IGRvYy5zZWw7XG5cbiAgICB2YXIgcGFzdGUgPSBjbS5zdGF0ZS5wYXN0ZUluY29taW5nIHx8IG9yaWdpbiA9PSBcInBhc3RlXCI7XG4gICAgdmFyIHRleHRMaW5lcyA9IGRvYy5zcGxpdExpbmVzKGluc2VydGVkKSwgbXVsdGlQYXN0ZSA9IG51bGw7XG4gICAgLy8gV2hlbiBwYXNpbmcgTiBsaW5lcyBpbnRvIE4gc2VsZWN0aW9ucywgaW5zZXJ0IG9uZSBsaW5lIHBlciBzZWxlY3Rpb25cbiAgICBpZiAocGFzdGUgJiYgc2VsLnJhbmdlcy5sZW5ndGggPiAxKSB7XG4gICAgICBpZiAobGFzdENvcGllZCAmJiBsYXN0Q29waWVkLmpvaW4oXCJcXG5cIikgPT0gaW5zZXJ0ZWQpIHtcbiAgICAgICAgaWYgKHNlbC5yYW5nZXMubGVuZ3RoICUgbGFzdENvcGllZC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIG11bHRpUGFzdGUgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RDb3BpZWQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBtdWx0aVBhc3RlLnB1c2goZG9jLnNwbGl0TGluZXMobGFzdENvcGllZFtpXSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRleHRMaW5lcy5sZW5ndGggPT0gc2VsLnJhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgbXVsdGlQYXN0ZSA9IG1hcCh0ZXh0TGluZXMsIGZ1bmN0aW9uKGwpIHsgcmV0dXJuIFtsXTsgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm9ybWFsIGJlaGF2aW9yIGlzIHRvIGluc2VydCB0aGUgbmV3IHRleHQgaW50byBldmVyeSBzZWxlY3Rpb25cbiAgICBmb3IgKHZhciBpID0gc2VsLnJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgIHZhciBmcm9tID0gcmFuZ2UuZnJvbSgpLCB0byA9IHJhbmdlLnRvKCk7XG4gICAgICBpZiAocmFuZ2UuZW1wdHkoKSkge1xuICAgICAgICBpZiAoZGVsZXRlZCAmJiBkZWxldGVkID4gMCkgLy8gSGFuZGxlIGRlbGV0aW9uXG4gICAgICAgICAgZnJvbSA9IFBvcyhmcm9tLmxpbmUsIGZyb20uY2ggLSBkZWxldGVkKTtcbiAgICAgICAgZWxzZSBpZiAoY20uc3RhdGUub3ZlcndyaXRlICYmICFwYXN0ZSkgLy8gSGFuZGxlIG92ZXJ3cml0ZVxuICAgICAgICAgIHRvID0gUG9zKHRvLmxpbmUsIE1hdGgubWluKGdldExpbmUoZG9jLCB0by5saW5lKS50ZXh0Lmxlbmd0aCwgdG8uY2ggKyBsc3QodGV4dExpbmVzKS5sZW5ndGgpKTtcbiAgICAgIH1cbiAgICAgIHZhciB1cGRhdGVJbnB1dCA9IGNtLmN1ck9wLnVwZGF0ZUlucHV0O1xuICAgICAgdmFyIGNoYW5nZUV2ZW50ID0ge2Zyb206IGZyb20sIHRvOiB0bywgdGV4dDogbXVsdGlQYXN0ZSA/IG11bHRpUGFzdGVbaSAlIG11bHRpUGFzdGUubGVuZ3RoXSA6IHRleHRMaW5lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IG9yaWdpbiB8fCAocGFzdGUgPyBcInBhc3RlXCIgOiBjbS5zdGF0ZS5jdXRJbmNvbWluZyA/IFwiY3V0XCIgOiBcIitpbnB1dFwiKX07XG4gICAgICBtYWtlQ2hhbmdlKGNtLmRvYywgY2hhbmdlRXZlbnQpO1xuICAgICAgc2lnbmFsTGF0ZXIoY20sIFwiaW5wdXRSZWFkXCIsIGNtLCBjaGFuZ2VFdmVudCk7XG4gICAgfVxuICAgIGlmIChpbnNlcnRlZCAmJiAhcGFzdGUpXG4gICAgICB0cmlnZ2VyRWxlY3RyaWMoY20sIGluc2VydGVkKTtcblxuICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIGNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gdXBkYXRlSW5wdXQ7XG4gICAgY20uY3VyT3AudHlwaW5nID0gdHJ1ZTtcbiAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gY20uc3RhdGUuY3V0SW5jb21pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVBhc3RlKGUsIGNtKSB7XG4gICAgdmFyIHBhc3RlZCA9IGUuY2xpcGJvYXJkRGF0YSAmJiBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIik7XG4gICAgaWYgKHBhc3RlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFjbS5pc1JlYWRPbmx5KCkgJiYgIWNtLm9wdGlvbnMuZGlzYWJsZUlucHV0KVxuICAgICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHsgYXBwbHlUZXh0SW5wdXQoY20sIHBhc3RlZCwgMCwgbnVsbCwgXCJwYXN0ZVwiKTsgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyRWxlY3RyaWMoY20sIGluc2VydGVkKSB7XG4gICAgLy8gV2hlbiBhbiAnZWxlY3RyaWMnIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgaW1tZWRpYXRlbHkgdHJpZ2dlciBhIHJlaW5kZW50XG4gICAgaWYgKCFjbS5vcHRpb25zLmVsZWN0cmljQ2hhcnMgfHwgIWNtLm9wdGlvbnMuc21hcnRJbmRlbnQpIHJldHVybjtcbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbDtcblxuICAgIGZvciAodmFyIGkgPSBzZWwucmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgaWYgKHJhbmdlLmhlYWQuY2ggPiAxMDAgfHwgKGkgJiYgc2VsLnJhbmdlc1tpIC0gMV0uaGVhZC5saW5lID09IHJhbmdlLmhlYWQubGluZSkpIGNvbnRpbnVlO1xuICAgICAgdmFyIG1vZGUgPSBjbS5nZXRNb2RlQXQocmFuZ2UuaGVhZCk7XG4gICAgICB2YXIgaW5kZW50ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChtb2RlLmVsZWN0cmljQ2hhcnMpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtb2RlLmVsZWN0cmljQ2hhcnMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgaWYgKGluc2VydGVkLmluZGV4T2YobW9kZS5lbGVjdHJpY0NoYXJzLmNoYXJBdChqKSkgPiAtMSkge1xuICAgICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vZGUuZWxlY3RyaWNJbnB1dCkge1xuICAgICAgICBpZiAobW9kZS5lbGVjdHJpY0lucHV0LnRlc3QoZ2V0TGluZShjbS5kb2MsIHJhbmdlLmhlYWQubGluZSkudGV4dC5zbGljZSgwLCByYW5nZS5oZWFkLmNoKSkpXG4gICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZW50ZWQpIHNpZ25hbExhdGVyKGNtLCBcImVsZWN0cmljSW5wdXRcIiwgY20sIHJhbmdlLmhlYWQubGluZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29weWFibGVSYW5nZXMoY20pIHtcbiAgICB2YXIgdGV4dCA9IFtdLCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGNtLmRvYy5zZWwucmFuZ2VzW2ldLmhlYWQubGluZTtcbiAgICAgIHZhciBsaW5lUmFuZ2UgPSB7YW5jaG9yOiBQb3MobGluZSwgMCksIGhlYWQ6IFBvcyhsaW5lICsgMSwgMCl9O1xuICAgICAgcmFuZ2VzLnB1c2gobGluZVJhbmdlKTtcbiAgICAgIHRleHQucHVzaChjbS5nZXRSYW5nZShsaW5lUmFuZ2UuYW5jaG9yLCBsaW5lUmFuZ2UuaGVhZCkpO1xuICAgIH1cbiAgICByZXR1cm4ge3RleHQ6IHRleHQsIHJhbmdlczogcmFuZ2VzfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGVCcm93c2VyTWFnaWMoZmllbGQpIHtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29ycmVjdFwiLCBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY2FwaXRhbGl6ZVwiLCBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJzcGVsbGNoZWNrXCIsIFwiZmFsc2VcIik7XG4gIH1cblxuICAvLyBURVhUQVJFQSBJTlBVVCBTVFlMRVxuXG4gIGZ1bmN0aW9uIFRleHRhcmVhSW5wdXQoY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgLy8gU2VlIGlucHV0LnBvbGwgYW5kIGlucHV0LnJlc2V0XG4gICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuXG4gICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHdlIGV4cGVjdCBpbnB1dCB0byBhcHBlYXIgcmVhbCBzb29uXG4gICAgLy8gbm93IChhZnRlciBzb21lIGV2ZW50IGxpa2UgJ2tleXByZXNzJyBvciAnaW5wdXQnKSBhbmQgYXJlXG4gICAgLy8gcG9sbGluZyBpbnRlbnNpdmVseS5cbiAgICB0aGlzLnBvbGxpbmdGYXN0ID0gZmFsc2U7XG4gICAgLy8gU2VsZi1yZXNldHRpbmcgdGltZW91dCBmb3IgdGhlIHBvbGxlclxuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgLy8gVHJhY2tzIHdoZW4gaW5wdXQucmVzZXQgaGFzIHB1bnRlZCB0byBqdXN0IHB1dHRpbmcgYSBzaG9ydFxuICAgIC8vIHN0cmluZyBpbnRvIHRoZSB0ZXh0YXJlYSBpbnN0ZWFkIG9mIHRoZSBmdWxsIHNlbGVjdGlvbi5cbiAgICB0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAvLyBVc2VkIHRvIHdvcmsgYXJvdW5kIElFIGlzc3VlIHdpdGggc2VsZWN0aW9uIGJlaW5nIGZvcmdvdHRlbiB3aGVuIGZvY3VzIG1vdmVzIGF3YXkgZnJvbSB0ZXh0YXJlYVxuICAgIHRoaXMuaGFzU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5jb21wb3NpbmcgPSBudWxsO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhpZGRlblRleHRhcmVhKCkge1xuICAgIHZhciB0ZSA9IGVsdChcInRleHRhcmVhXCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IGFic29sdXRlOyBwYWRkaW5nOiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFlbTsgb3V0bGluZTogbm9uZVwiKTtcbiAgICB2YXIgZGl2ID0gZWx0KFwiZGl2XCIsIFt0ZV0sIG51bGwsIFwib3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB3aWR0aDogM3B4OyBoZWlnaHQ6IDBweDtcIik7XG4gICAgLy8gVGhlIHRleHRhcmVhIGlzIGtlcHQgcG9zaXRpb25lZCBuZWFyIHRoZSBjdXJzb3IgdG8gcHJldmVudCB0aGVcbiAgICAvLyBmYWN0IHRoYXQgaXQnbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IG9uIGlucHV0IGZyb20gc2Nyb2xsaW5nXG4gICAgLy8gb3VyIGZha2UgY3Vyc29yIG91dCBvZiB2aWV3LiBPbiB3ZWJraXQsIHdoZW4gd3JhcD1vZmYsIHBhc3RlIGlzXG4gICAgLy8gdmVyeSBzbG93LiBTbyBtYWtlIHRoZSBhcmVhIHdpZGUgaW5zdGVhZC5cbiAgICBpZiAod2Via2l0KSB0ZS5zdHlsZS53aWR0aCA9IFwiMTAwMHB4XCI7XG4gICAgZWxzZSB0ZS5zZXRBdHRyaWJ1dGUoXCJ3cmFwXCIsIFwib2ZmXCIpO1xuICAgIC8vIElmIGJvcmRlcjogMDsgLS0gaU9TIGZhaWxzIHRvIG9wZW4ga2V5Ym9hcmQgKGlzc3VlICMxMjg3KVxuICAgIGlmIChpb3MpIHRlLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIGJsYWNrXCI7XG4gICAgZGlzYWJsZUJyb3dzZXJNYWdpYyh0ZSk7XG4gICAgcmV0dXJuIGRpdjtcbiAgfVxuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgaW5pdDogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSB0aGlzLmNtO1xuXG4gICAgICAvLyBXcmFwcyBhbmQgaGlkZXMgaW5wdXQgdGV4dGFyZWFcbiAgICAgIHZhciBkaXYgPSB0aGlzLndyYXBwZXIgPSBoaWRkZW5UZXh0YXJlYSgpO1xuICAgICAgLy8gVGhlIHNlbWloaWRkZW4gdGV4dGFyZWEgdGhhdCBpcyBmb2N1c2VkIHdoZW4gdGhlIGVkaXRvciBpc1xuICAgICAgLy8gZm9jdXNlZCwgYW5kIHJlY2VpdmVzIGlucHV0LlxuICAgICAgdmFyIHRlID0gdGhpcy50ZXh0YXJlYSA9IGRpdi5maXJzdENoaWxkO1xuICAgICAgZGlzcGxheS53cmFwcGVyLmluc2VydEJlZm9yZShkaXYsIGRpc3BsYXkud3JhcHBlci5maXJzdENoaWxkKTtcblxuICAgICAgLy8gTmVlZGVkIHRvIGhpZGUgYmlnIGJsdWUgYmxpbmtpbmcgY3Vyc29yIG9uIE1vYmlsZSBTYWZhcmkgKGRvZXNuJ3Qgc2VlbSB0byB3b3JrIGluIGlPUyA4IGFueW1vcmUpXG4gICAgICBpZiAoaW9zKSB0ZS5zdHlsZS53aWR0aCA9IFwiMHB4XCI7XG5cbiAgICAgIG9uKHRlLCBcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5ICYmIGlucHV0Lmhhc1NlbGVjdGlvbikgaW5wdXQuaGFzU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgaW5wdXQucG9sbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIG9uKHRlLCBcInBhc3RlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBoYW5kbGVQYXN0ZShlLCBjbSkpIHJldHVyblxuXG4gICAgICAgIGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPSB0cnVlO1xuICAgICAgICBpbnB1dC5mYXN0UG9sbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHByZXBhcmVDb3B5Q3V0KGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuXG4gICAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICAgICAgbGFzdENvcGllZCA9IGNtLmdldFNlbGVjdGlvbnMoKTtcbiAgICAgICAgICBpZiAoaW5wdXQuaW5hY2N1cmF0ZVNlbGVjdGlvbikge1xuICAgICAgICAgICAgaW5wdXQucHJldklucHV0ID0gXCJcIjtcbiAgICAgICAgICAgIGlucHV0LmluYWNjdXJhdGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIHRlLnZhbHVlID0gbGFzdENvcGllZC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgc2VsZWN0SW5wdXQodGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghY20ub3B0aW9ucy5saW5lV2lzZUNvcHlDdXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHJhbmdlcyA9IGNvcHlhYmxlUmFuZ2VzKGNtKTtcbiAgICAgICAgICBsYXN0Q29waWVkID0gcmFuZ2VzLnRleHQ7XG4gICAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSB7XG4gICAgICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcy5yYW5nZXMsIG51bGwsIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5wdXQucHJldklucHV0ID0gXCJcIjtcbiAgICAgICAgICAgIHRlLnZhbHVlID0gcmFuZ2VzLnRleHQuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgIHNlbGVjdElucHV0KHRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSBjbS5zdGF0ZS5jdXRJbmNvbWluZyA9IHRydWU7XG4gICAgICB9XG4gICAgICBvbih0ZSwgXCJjdXRcIiwgcHJlcGFyZUNvcHlDdXQpO1xuICAgICAgb24odGUsIFwiY29weVwiLCBwcmVwYXJlQ29weUN1dCk7XG5cbiAgICAgIG9uKGRpc3BsYXkuc2Nyb2xsZXIsIFwicGFzdGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkpIHJldHVybjtcbiAgICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IHRydWU7XG4gICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJldmVudCBub3JtYWwgc2VsZWN0aW9uIGluIHRoZSBlZGl0b3IgKHdlIGhhbmRsZSBvdXIgb3duKVxuICAgICAgb24oZGlzcGxheS5saW5lU3BhY2UsIFwic2VsZWN0c3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICB9KTtcblxuICAgICAgb24odGUsIFwiY29tcG9zaXRpb25zdGFydFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gY20uZ2V0Q3Vyc29yKFwiZnJvbVwiKTtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykgaW5wdXQuY29tcG9zaW5nLnJhbmdlLmNsZWFyKClcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nID0ge1xuICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICByYW5nZTogY20ubWFya1RleHQoc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLCB7Y2xhc3NOYW1lOiBcIkNvZGVNaXJyb3ItY29tcG9zaW5nXCJ9KVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBvbih0ZSwgXCJjb21wb3NpdGlvbmVuZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykge1xuICAgICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgICBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcHJlcGFyZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZWRyYXcgdGhlIHNlbGVjdGlvbiBhbmQvb3IgY3Vyc29yXG4gICAgICB2YXIgY20gPSB0aGlzLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24oY20pO1xuXG4gICAgICAvLyBNb3ZlIHRoZSBoaWRkZW4gdGV4dGFyZWEgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgc2Nyb2xsaW5nIGFydGlmYWN0c1xuICAgICAgaWYgKGNtLm9wdGlvbnMubW92ZUlucHV0V2l0aEN1cnNvcikge1xuICAgICAgICB2YXIgaGVhZFBvcyA9IGN1cnNvckNvb3JkcyhjbSwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCwgXCJkaXZcIik7XG4gICAgICAgIHZhciB3cmFwT2ZmID0gZGlzcGxheS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBsaW5lT2ZmID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXN1bHQudGVUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRQb3MudG9wICsgbGluZU9mZi50b3AgLSB3cmFwT2ZmLnRvcCkpO1xuICAgICAgICByZXN1bHQudGVMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoIC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkUG9zLmxlZnQgKyBsaW5lT2ZmLmxlZnQgLSB3cmFwT2ZmLmxlZnQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgc2hvd1NlbGVjdGlvbjogZnVuY3Rpb24oZHJhd24pIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5jdXJzb3JEaXYsIGRyYXduLmN1cnNvcnMpO1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5zZWxlY3Rpb25EaXYsIGRyYXduLnNlbGVjdGlvbik7XG4gICAgICBpZiAoZHJhd24udGVUb3AgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUudG9wID0gZHJhd24udGVUb3AgKyBcInB4XCI7XG4gICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5sZWZ0ID0gZHJhd24udGVMZWZ0ICsgXCJweFwiO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBSZXNldCB0aGUgaW5wdXQgdG8gY29ycmVzcG9uZCB0byB0aGUgc2VsZWN0aW9uIChvciB0byBiZSBlbXB0eSxcbiAgICAvLyB3aGVuIG5vdCB0eXBpbmcgYW5kIG5vdGhpbmcgaXMgc2VsZWN0ZWQpXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHR5cGluZykge1xuICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVQZW5kaW5nKSByZXR1cm47XG4gICAgICB2YXIgbWluaW1hbCwgc2VsZWN0ZWQsIGNtID0gdGhpcy5jbSwgZG9jID0gY20uZG9jO1xuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgICAgbWluaW1hbCA9IGhhc0NvcHlFdmVudCAmJlxuICAgICAgICAgIChyYW5nZS50bygpLmxpbmUgLSByYW5nZS5mcm9tKCkubGluZSA+IDEwMCB8fCAoc2VsZWN0ZWQgPSBjbS5nZXRTZWxlY3Rpb24oKSkubGVuZ3RoID4gMTAwMCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gbWluaW1hbCA/IFwiLVwiIDogc2VsZWN0ZWQgfHwgY20uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMudGV4dGFyZWEudmFsdWUgPSBjb250ZW50O1xuICAgICAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkgc2VsZWN0SW5wdXQodGhpcy50ZXh0YXJlYSk7XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHRoaXMuaGFzU2VsZWN0aW9uID0gY29udGVudDtcbiAgICAgIH0gZWxzZSBpZiAoIXR5cGluZykge1xuICAgICAgICB0aGlzLnByZXZJbnB1dCA9IHRoaXMudGV4dGFyZWEudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBtaW5pbWFsO1xuICAgIH0sXG5cbiAgICBnZXRGaWVsZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnRleHRhcmVhOyB9LFxuXG4gICAgc3VwcG9ydHNUb3VjaDogZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfSxcblxuICAgIGZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkgIT0gXCJub2N1cnNvclwiICYmICghbW9iaWxlIHx8IGFjdGl2ZUVsdCgpICE9IHRoaXMudGV4dGFyZWEpKSB7XG4gICAgICAgIHRyeSB7IHRoaXMudGV4dGFyZWEuZm9jdXMoKTsgfVxuICAgICAgICBjYXRjaCAoZSkge30gLy8gSUU4IHdpbGwgdGhyb3cgaWYgdGhlIHRleHRhcmVhIGlzIGRpc3BsYXk6IG5vbmUgb3Igbm90IGluIERPTVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBibHVyOiBmdW5jdGlvbigpIHsgdGhpcy50ZXh0YXJlYS5ibHVyKCk7IH0sXG5cbiAgICByZXNldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50b3AgPSB0aGlzLndyYXBwZXIuc3R5bGUubGVmdCA9IDA7XG4gICAgfSxcblxuICAgIHJlY2VpdmVkRm9jdXM6IGZ1bmN0aW9uKCkgeyB0aGlzLnNsb3dQb2xsKCk7IH0sXG5cbiAgICAvLyBQb2xsIGZvciBpbnB1dCBjaGFuZ2VzLCB1c2luZyB0aGUgbm9ybWFsIHJhdGUgb2YgcG9sbGluZy4gVGhpc1xuICAgIC8vIHJ1bnMgYXMgbG9uZyBhcyB0aGUgZWRpdG9yIGlzIGZvY3VzZWQuXG4gICAgc2xvd1BvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcztcbiAgICAgIGlmIChpbnB1dC5wb2xsaW5nRmFzdCkgcmV0dXJuO1xuICAgICAgaW5wdXQucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgaWYgKGlucHV0LmNtLnN0YXRlLmZvY3VzZWQpIGlucHV0LnNsb3dQb2xsKCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gV2hlbiBhbiBldmVudCBoYXMganVzdCBjb21lIGluIHRoYXQgaXMgbGlrZWx5IHRvIGFkZCBvciBjaGFuZ2VcbiAgICAvLyBzb21ldGhpbmcgaW4gdGhlIGlucHV0IHRleHRhcmVhLCB3ZSBwb2xsIGZhc3RlciwgdG8gZW5zdXJlIHRoYXRcbiAgICAvLyB0aGUgY2hhbmdlIGFwcGVhcnMgb24gdGhlIHNjcmVlbiBxdWlja2x5LlxuICAgIGZhc3RQb2xsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtaXNzZWQgPSBmYWxzZSwgaW5wdXQgPSB0aGlzO1xuICAgICAgaW5wdXQucG9sbGluZ0Zhc3QgPSB0cnVlO1xuICAgICAgZnVuY3Rpb24gcCgpIHtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBpbnB1dC5wb2xsKCk7XG4gICAgICAgIGlmICghY2hhbmdlZCAmJiAhbWlzc2VkKSB7bWlzc2VkID0gdHJ1ZTsgaW5wdXQucG9sbGluZy5zZXQoNjAsIHApO31cbiAgICAgICAgZWxzZSB7aW5wdXQucG9sbGluZ0Zhc3QgPSBmYWxzZTsgaW5wdXQuc2xvd1BvbGwoKTt9XG4gICAgICB9XG4gICAgICBpbnB1dC5wb2xsaW5nLnNldCgyMCwgcCk7XG4gICAgfSxcblxuICAgIC8vIFJlYWQgaW5wdXQgZnJvbSB0aGUgdGV4dGFyZWEsIGFuZCB1cGRhdGUgdGhlIGRvY3VtZW50IHRvIG1hdGNoLlxuICAgIC8vIFdoZW4gc29tZXRoaW5nIGlzIHNlbGVjdGVkLCBpdCBpcyBwcmVzZW50IGluIHRoZSB0ZXh0YXJlYSwgYW5kXG4gICAgLy8gc2VsZWN0ZWQgKHVubGVzcyBpdCBpcyBodWdlLCBpbiB3aGljaCBjYXNlIGEgcGxhY2Vob2xkZXIgaXNcbiAgICAvLyB1c2VkKS4gV2hlbiBub3RoaW5nIGlzIHNlbGVjdGVkLCB0aGUgY3Vyc29yIHNpdHMgYWZ0ZXIgcHJldmlvdXNseVxuICAgIC8vIHNlZW4gdGV4dCAoY2FuIGJlIGVtcHR5KSwgd2hpY2ggaXMgc3RvcmVkIGluIHByZXZJbnB1dCAod2UgbXVzdFxuICAgIC8vIG5vdCByZXNldCB0aGUgdGV4dGFyZWEgd2hlbiB0eXBpbmcsIGJlY2F1c2UgdGhhdCBicmVha3MgSU1FKS5cbiAgICBwb2xsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGlucHV0ID0gdGhpcy50ZXh0YXJlYSwgcHJldklucHV0ID0gdGhpcy5wcmV2SW5wdXQ7XG4gICAgICAvLyBTaW5jZSB0aGlzIGlzIGNhbGxlZCBhICpsb3QqLCB0cnkgdG8gYmFpbCBvdXQgYXMgY2hlYXBseSBhc1xuICAgICAgLy8gcG9zc2libGUgd2hlbiBpdCBpcyBjbGVhciB0aGF0IG5vdGhpbmcgaGFwcGVuZWQuIGhhc1NlbGVjdGlvblxuICAgICAgLy8gd2lsbCBiZSB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGEgbG90IG9mIHRleHQgaW4gdGhlIHRleHRhcmVhLFxuICAgICAgLy8gaW4gd2hpY2ggY2FzZSByZWFkaW5nIGl0cyB2YWx1ZSB3b3VsZCBiZSBleHBlbnNpdmUuXG4gICAgICBpZiAodGhpcy5jb250ZXh0TWVudVBlbmRpbmcgfHwgIWNtLnN0YXRlLmZvY3VzZWQgfHxcbiAgICAgICAgICAoaGFzU2VsZWN0aW9uKGlucHV0KSAmJiAhcHJldklucHV0ICYmICF0aGlzLmNvbXBvc2luZykgfHxcbiAgICAgICAgICBjbS5pc1JlYWRPbmx5KCkgfHwgY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQgfHwgY20uc3RhdGUua2V5U2VxKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgIHZhciB0ZXh0ID0gaW5wdXQudmFsdWU7XG4gICAgICAvLyBJZiBub3RoaW5nIGNoYW5nZWQsIGJhaWwuXG4gICAgICBpZiAodGV4dCA9PSBwcmV2SW5wdXQgJiYgIWNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNpY2FsIHNlbGVjdGlvbiByZXNldHRpbmcgaW4gSUU5LzEwLCBhbmRcbiAgICAgIC8vIGluZXhwbGljYWJsZSBhcHBlYXJhbmNlIG9mIHByaXZhdGUgYXJlYSB1bmljb2RlIGNoYXJhY3RlcnMgb25cbiAgICAgIC8vIHNvbWUga2V5IGNvbWJvcyBpbiBNYWMgKCMyNjg5KS5cbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkgJiYgdGhpcy5oYXNTZWxlY3Rpb24gPT09IHRleHQgfHxcbiAgICAgICAgICBtYWMgJiYgL1tcXHVmNzAwLVxcdWY3ZmZdLy50ZXN0KHRleHQpKSB7XG4gICAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY20uZG9jLnNlbCA9PSBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51KSB7XG4gICAgICAgIHZhciBmaXJzdCA9IHRleHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWYgKGZpcnN0ID09IDB4MjAwYiAmJiAhcHJldklucHV0KSBwcmV2SW5wdXQgPSBcIlxcdTIwMGJcIjtcbiAgICAgICAgaWYgKGZpcnN0ID09IDB4MjFkYSkgeyB0aGlzLnJlc2V0KCk7IHJldHVybiB0aGlzLmNtLmV4ZWNDb21tYW5kKFwidW5kb1wiKTsgfVxuICAgICAgfVxuICAgICAgLy8gRmluZCB0aGUgcGFydCBvZiB0aGUgaW5wdXQgdGhhdCBpcyBhY3R1YWxseSBuZXdcbiAgICAgIHZhciBzYW1lID0gMCwgbCA9IE1hdGgubWluKHByZXZJbnB1dC5sZW5ndGgsIHRleHQubGVuZ3RoKTtcbiAgICAgIHdoaWxlIChzYW1lIDwgbCAmJiBwcmV2SW5wdXQuY2hhckNvZGVBdChzYW1lKSA9PSB0ZXh0LmNoYXJDb2RlQXQoc2FtZSkpICsrc2FtZTtcblxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGFwcGx5VGV4dElucHV0KGNtLCB0ZXh0LnNsaWNlKHNhbWUpLCBwcmV2SW5wdXQubGVuZ3RoIC0gc2FtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwgc2VsZi5jb21wb3NpbmcgPyBcIipjb21wb3NlXCIgOiBudWxsKTtcblxuICAgICAgICAvLyBEb24ndCBsZWF2ZSBsb25nIHRleHQgaW4gdGhlIHRleHRhcmVhLCBzaW5jZSBpdCBtYWtlcyBmdXJ0aGVyIHBvbGxpbmcgc2xvd1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggPiAxMDAwIHx8IHRleHQuaW5kZXhPZihcIlxcblwiKSA+IC0xKSBpbnB1dC52YWx1ZSA9IHNlbGYucHJldklucHV0ID0gXCJcIjtcbiAgICAgICAgZWxzZSBzZWxmLnByZXZJbnB1dCA9IHRleHQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29tcG9zaW5nKSB7XG4gICAgICAgICAgc2VsZi5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgICBzZWxmLmNvbXBvc2luZy5yYW5nZSA9IGNtLm1hcmtUZXh0KHNlbGYuY29tcG9zaW5nLnN0YXJ0LCBjbS5nZXRDdXJzb3IoXCJ0b1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1jb21wb3NpbmdcIn0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBlbnN1cmVQb2xsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMucG9sbGluZ0Zhc3QgJiYgdGhpcy5wb2xsKCkpIHRoaXMucG9sbGluZ0Zhc3QgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgb25LZXlQcmVzczogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7XG4gICAgICB0aGlzLmZhc3RQb2xsKCk7XG4gICAgfSxcblxuICAgIG9uQ29udGV4dE1lbnU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMsIGNtID0gaW5wdXQuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB0ZSA9IGlucHV0LnRleHRhcmVhO1xuICAgICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSksIHNjcm9sbFBvcyA9IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgICAgaWYgKCFwb3MgfHwgcHJlc3RvKSByZXR1cm47IC8vIE9wZXJhIGlzIGRpZmZpY3VsdC5cblxuICAgICAgLy8gUmVzZXQgdGhlIGN1cnJlbnQgdGV4dCBzZWxlY3Rpb24gb25seSBpZiB0aGUgY2xpY2sgaXMgZG9uZSBvdXRzaWRlIG9mIHRoZSBzZWxlY3Rpb25cbiAgICAgIC8vIGFuZCAncmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51JyBvcHRpb24gaXMgdHJ1ZS5cbiAgICAgIHZhciByZXNldCA9IGNtLm9wdGlvbnMucmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51O1xuICAgICAgaWYgKHJlc2V0ICYmIGNtLmRvYy5zZWwuY29udGFpbnMocG9zKSA9PSAtMSlcbiAgICAgICAgb3BlcmF0aW9uKGNtLCBzZXRTZWxlY3Rpb24pKGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcyksIHNlbF9kb250U2Nyb2xsKTtcblxuICAgICAgdmFyIG9sZENTUyA9IHRlLnN0eWxlLmNzc1RleHQsIG9sZFdyYXBwZXJDU1MgPSBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQ7XG4gICAgICBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBhYnNvbHV0ZVwiXG4gICAgICB2YXIgd3JhcHBlckJveCA9IGlucHV0LndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIHRlLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgdG9wOiBcIiArIChlLmNsaWVudFkgLSB3cmFwcGVyQm94LnRvcCAtIDUpICtcbiAgICAgICAgXCJweDsgbGVmdDogXCIgKyAoZS5jbGllbnRYIC0gd3JhcHBlckJveC5sZWZ0IC0gNSkgKyBcInB4OyB6LWluZGV4OiAxMDAwOyBiYWNrZ3JvdW5kOiBcIiArXG4gICAgICAgIChpZSA/IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAuMDUpXCIgOiBcInRyYW5zcGFyZW50XCIpICtcbiAgICAgICAgXCI7IG91dGxpbmU6IG5vbmU7IGJvcmRlci13aWR0aDogMDsgb3V0bGluZTogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsgb3BhY2l0eTogLjA1OyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9NSk7XCI7XG4gICAgICBpZiAod2Via2l0KSB2YXIgb2xkU2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZOyAvLyBXb3JrIGFyb3VuZCBDaHJvbWUgaXNzdWUgKCMyNzEyKVxuICAgICAgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgICAgaWYgKHdlYmtpdCkgd2luZG93LnNjcm9sbFRvKG51bGwsIG9sZFNjcm9sbFkpO1xuICAgICAgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgLy8gQWRkcyBcIlNlbGVjdCBhbGxcIiB0byBjb250ZXh0IG1lbnUgaW4gRkZcbiAgICAgIGlmICghY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgdGUudmFsdWUgPSBpbnB1dC5wcmV2SW5wdXQgPSBcIiBcIjtcbiAgICAgIGlucHV0LmNvbnRleHRNZW51UGVuZGluZyA9IHRydWU7XG4gICAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gY20uZG9jLnNlbDtcbiAgICAgIGNsZWFyVGltZW91dChkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCk7XG5cbiAgICAgIC8vIFNlbGVjdC1hbGwgd2lsbCBiZSBncmV5ZWQgb3V0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzZWxlY3QsIHNvXG4gICAgICAvLyB0aGlzIGFkZHMgYSB6ZXJvLXdpZHRoIHNwYWNlIHNvIHRoYXQgd2UgY2FuIGxhdGVyIGNoZWNrIHdoZXRoZXJcbiAgICAgIC8vIGl0IGdvdCBzZWxlY3RlZC5cbiAgICAgIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3RBbGxIYWNrKCkge1xuICAgICAgICBpZiAodGUuc2VsZWN0aW9uU3RhcnQgIT0gbnVsbCkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGNtLnNvbWV0aGluZ1NlbGVjdGVkKCk7XG4gICAgICAgICAgdmFyIGV4dHZhbCA9IFwiXFx1MjAwYlwiICsgKHNlbGVjdGVkID8gdGUudmFsdWUgOiBcIlwiKTtcbiAgICAgICAgICB0ZS52YWx1ZSA9IFwiXFx1MjFkYVwiOyAvLyBVc2VkIHRvIGNhdGNoIGNvbnRleHQtbWVudSB1bmRvXG4gICAgICAgICAgdGUudmFsdWUgPSBleHR2YWw7XG4gICAgICAgICAgaW5wdXQucHJldklucHV0ID0gc2VsZWN0ZWQgPyBcIlwiIDogXCJcXHUyMDBiXCI7XG4gICAgICAgICAgdGUuc2VsZWN0aW9uU3RhcnQgPSAxOyB0ZS5zZWxlY3Rpb25FbmQgPSBleHR2YWwubGVuZ3RoO1xuICAgICAgICAgIC8vIFJlLXNldCB0aGlzLCBpbiBjYXNlIHNvbWUgb3RoZXIgaGFuZGxlciB0b3VjaGVkIHRoZVxuICAgICAgICAgIC8vIHNlbGVjdGlvbiBpbiB0aGUgbWVhbnRpbWUuXG4gICAgICAgICAgZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IGNtLmRvYy5zZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHJlaGlkZSgpIHtcbiAgICAgICAgaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGlucHV0LndyYXBwZXIuc3R5bGUuY3NzVGV4dCA9IG9sZFdyYXBwZXJDU1NcbiAgICAgICAgdGUuc3R5bGUuY3NzVGV4dCA9IG9sZENTUztcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBkaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zKTtcblxuICAgICAgICAvLyBUcnkgdG8gZGV0ZWN0IHRoZSB1c2VyIGNob29zaW5nIHNlbGVjdC1hbGxcbiAgICAgICAgaWYgKHRlLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoIWllIHx8IChpZSAmJiBpZV92ZXJzaW9uIDwgOSkpIHByZXBhcmVTZWxlY3RBbGxIYWNrKCk7XG4gICAgICAgICAgdmFyIGkgPSAwLCBwb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9PSBjbS5kb2Muc2VsICYmIHRlLnNlbGVjdGlvblN0YXJ0ID09IDAgJiZcbiAgICAgICAgICAgICAgICB0ZS5zZWxlY3Rpb25FbmQgPiAwICYmIGlucHV0LnByZXZJbnB1dCA9PSBcIlxcdTIwMGJcIilcbiAgICAgICAgICAgICAgb3BlcmF0aW9uKGNtLCBjb21tYW5kcy5zZWxlY3RBbGwpKGNtKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGkrKyA8IDEwKSBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgNTAwKTtcbiAgICAgICAgICAgIGVsc2UgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZGlzcGxheS5kZXRlY3RpbmdTZWxlY3RBbGwgPSBzZXRUaW1lb3V0KHBvbGwsIDIwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgcHJlcGFyZVNlbGVjdEFsbEhhY2soKTtcbiAgICAgIGlmIChjYXB0dXJlUmlnaHRDbGljaykge1xuICAgICAgICBlX3N0b3AoZSk7XG4gICAgICAgIHZhciBtb3VzZXVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgb2ZmKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgICAgIHNldFRpbWVvdXQocmVoaWRlLCAyMCk7XG4gICAgICAgIH07XG4gICAgICAgIG9uKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dChyZWhpZGUsIDUwKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVhZE9ubHlDaGFuZ2VkOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICghdmFsKSB0aGlzLnJlc2V0KCk7XG4gICAgfSxcblxuICAgIHNldFVuZWRpdGFibGU6IG5vdGhpbmcsXG5cbiAgICBuZWVkc0NvbnRlbnRBdHRyaWJ1dGU6IGZhbHNlXG4gIH0sIFRleHRhcmVhSW5wdXQucHJvdG90eXBlKTtcblxuICAvLyBDT05URU5URURJVEFCTEUgSU5QVVQgU1RZTEVcblxuICBmdW5jdGlvbiBDb250ZW50RWRpdGFibGVJbnB1dChjbSkge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gdGhpcy5sYXN0QW5jaG9yT2Zmc2V0ID0gdGhpcy5sYXN0Rm9jdXNOb2RlID0gdGhpcy5sYXN0Rm9jdXNPZmZzZXQgPSBudWxsO1xuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgdGhpcy5ncmFjZVBlcmlvZCA9IGZhbHNlO1xuICB9XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgaW5pdDogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbTtcbiAgICAgIHZhciBkaXYgPSBpbnB1dC5kaXYgPSBkaXNwbGF5LmxpbmVEaXY7XG4gICAgICBkaXNhYmxlQnJvd3Nlck1hZ2ljKGRpdik7XG5cbiAgICAgIG9uKGRpdiwgXCJwYXN0ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSBoYW5kbGVQYXN0ZShlLCBjbSk7XG4gICAgICB9KVxuXG4gICAgICBvbihkaXYsIFwiY29tcG9zaXRpb25zdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBkYXRhID0gZS5kYXRhO1xuICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSB7c2VsOiBjbS5kb2Muc2VsLCBkYXRhOiBkYXRhLCBzdGFydERhdGE6IGRhdGF9O1xuICAgICAgICBpZiAoIWRhdGEpIHJldHVybjtcbiAgICAgICAgdmFyIHByaW0gPSBjbS5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgICAgdmFyIGxpbmUgPSBjbS5nZXRMaW5lKHByaW0uaGVhZC5saW5lKTtcbiAgICAgICAgdmFyIGZvdW5kID0gbGluZS5pbmRleE9mKGRhdGEsIE1hdGgubWF4KDAsIHByaW0uaGVhZC5jaCAtIGRhdGEubGVuZ3RoKSk7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xICYmIGZvdW5kIDw9IHByaW0uaGVhZC5jaClcbiAgICAgICAgICBpbnB1dC5jb21wb3Npbmcuc2VsID0gc2ltcGxlU2VsZWN0aW9uKFBvcyhwcmltLmhlYWQubGluZSwgZm91bmQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKHByaW0uaGVhZC5saW5lLCBmb3VuZCArIGRhdGEubGVuZ3RoKSk7XG4gICAgICB9KTtcbiAgICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbnVwZGF0ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlucHV0LmNvbXBvc2luZy5kYXRhID0gZS5kYXRhO1xuICAgICAgfSk7XG4gICAgICBvbihkaXYsIFwiY29tcG9zaXRpb25lbmRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgb3VycyA9IGlucHV0LmNvbXBvc2luZztcbiAgICAgICAgaWYgKCFvdXJzKSByZXR1cm47XG4gICAgICAgIGlmIChlLmRhdGEgIT0gb3Vycy5zdGFydERhdGEgJiYgIS9cXHUyMDBiLy50ZXN0KGUuZGF0YSkpXG4gICAgICAgICAgb3Vycy5kYXRhID0gZS5kYXRhO1xuICAgICAgICAvLyBOZWVkIGEgc21hbGwgZGVsYXkgdG8gcHJldmVudCBvdGhlciBjb2RlIChpbnB1dCBldmVudCxcbiAgICAgICAgLy8gc2VsZWN0aW9uIHBvbGxpbmcpIGZyb20gZG9pbmcgZGFtYWdlIHdoZW4gZmlyZWQgcmlnaHQgYWZ0ZXJcbiAgICAgICAgLy8gY29tcG9zaXRpb25lbmQuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFvdXJzLmhhbmRsZWQpXG4gICAgICAgICAgICBpbnB1dC5hcHBseUNvbXBvc2l0aW9uKG91cnMpO1xuICAgICAgICAgIGlmIChpbnB1dC5jb21wb3NpbmcgPT0gb3VycylcbiAgICAgICAgICAgIGlucHV0LmNvbXBvc2luZyA9IG51bGw7XG4gICAgICAgIH0sIDUwKTtcbiAgICAgIH0pO1xuXG4gICAgICBvbihkaXYsIFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaW5wdXQuZm9yY2VDb21wb3NpdGlvbkVuZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIG9uKGRpdiwgXCJpbnB1dFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykgcmV0dXJuO1xuICAgICAgICBpZiAoY20uaXNSZWFkT25seSgpIHx8ICFpbnB1dC5wb2xsQ29udGVudCgpKVxuICAgICAgICAgIHJ1bkluT3AoaW5wdXQuY20sIGZ1bmN0aW9uKCkge3JlZ0NoYW5nZShjbSk7fSk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gb25Db3B5Q3V0KGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuXG4gICAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICAgICAgbGFzdENvcGllZCA9IGNtLmdldFNlbGVjdGlvbnMoKTtcbiAgICAgICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCJjdXRcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNtLm9wdGlvbnMubGluZVdpc2VDb3B5Q3V0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciByYW5nZXMgPSBjb3B5YWJsZVJhbmdlcyhjbSk7XG4gICAgICAgICAgbGFzdENvcGllZCA9IHJhbmdlcy50ZXh0O1xuICAgICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikge1xuICAgICAgICAgICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcy5yYW5nZXMsIDAsIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpT1MgZXhwb3NlcyB0aGUgY2xpcGJvYXJkIEFQSSwgYnV0IHNlZW1zIHRvIGRpc2NhcmQgY29udGVudCBpbnNlcnRlZCBpbnRvIGl0XG4gICAgICAgIGlmIChlLmNsaXBib2FyZERhdGEgJiYgIWlvcykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLmNsaXBib2FyZERhdGEuY2xlYXJEYXRhKCk7XG4gICAgICAgICAgZS5jbGlwYm9hcmREYXRhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsIGxhc3RDb3BpZWQuam9pbihcIlxcblwiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT2xkLWZhc2hpb25lZCBicmllZmx5LWZvY3VzLWEtdGV4dGFyZWEgaGFja1xuICAgICAgICAgIHZhciBrbHVkZ2UgPSBoaWRkZW5UZXh0YXJlYSgpLCB0ZSA9IGtsdWRnZS5maXJzdENoaWxkO1xuICAgICAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShrbHVkZ2UsIGNtLmRpc3BsYXkubGluZVNwYWNlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgIHRlLnZhbHVlID0gbGFzdENvcGllZC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIHZhciBoYWRGb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgc2VsZWN0SW5wdXQodGUpO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChrbHVkZ2UpO1xuICAgICAgICAgICAgaGFkRm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9uKGRpdiwgXCJjb3B5XCIsIG9uQ29weUN1dCk7XG4gICAgICBvbihkaXYsIFwiY3V0XCIsIG9uQ29weUN1dCk7XG4gICAgfSxcblxuICAgIHByZXBhcmVTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24odGhpcy5jbSwgZmFsc2UpO1xuICAgICAgcmVzdWx0LmZvY3VzID0gdGhpcy5jbS5zdGF0ZS5mb2N1c2VkO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgc2hvd1NlbGVjdGlvbjogZnVuY3Rpb24oaW5mbykge1xuICAgICAgaWYgKCFpbmZvIHx8ICF0aGlzLmNtLmRpc3BsYXkudmlldy5sZW5ndGgpIHJldHVybjtcbiAgICAgIGlmIChpbmZvLmZvY3VzKSB0aGlzLnNob3dQcmltYXJ5U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLnNob3dNdWx0aXBsZVNlbGVjdGlvbnMoaW5mbyk7XG4gICAgfSxcblxuICAgIHNob3dQcmltYXJ5U2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksIHByaW0gPSB0aGlzLmNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgdmFyIGN1ckFuY2hvciA9IGRvbVRvUG9zKHRoaXMuY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgIHZhciBjdXJGb2N1cyA9IGRvbVRvUG9zKHRoaXMuY20sIHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgICBpZiAoY3VyQW5jaG9yICYmICFjdXJBbmNob3IuYmFkICYmIGN1ckZvY3VzICYmICFjdXJGb2N1cy5iYWQgJiZcbiAgICAgICAgICBjbXAobWluUG9zKGN1ckFuY2hvciwgY3VyRm9jdXMpLCBwcmltLmZyb20oKSkgPT0gMCAmJlxuICAgICAgICAgIGNtcChtYXhQb3MoY3VyQW5jaG9yLCBjdXJGb2N1cyksIHByaW0udG8oKSkgPT0gMClcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgICB2YXIgc3RhcnQgPSBwb3NUb0RPTSh0aGlzLmNtLCBwcmltLmZyb20oKSk7XG4gICAgICB2YXIgZW5kID0gcG9zVG9ET00odGhpcy5jbSwgcHJpbS50bygpKTtcbiAgICAgIGlmICghc3RhcnQgJiYgIWVuZCkgcmV0dXJuO1xuXG4gICAgICB2YXIgdmlldyA9IHRoaXMuY20uZGlzcGxheS52aWV3O1xuICAgICAgdmFyIG9sZCA9IHNlbC5yYW5nZUNvdW50ICYmIHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgaWYgKCFzdGFydCkge1xuICAgICAgICBzdGFydCA9IHtub2RlOiB2aWV3WzBdLm1lYXN1cmUubWFwWzJdLCBvZmZzZXQ6IDB9O1xuICAgICAgfSBlbHNlIGlmICghZW5kKSB7IC8vIEZJWE1FIGRhbmdlcm91c2x5IGhhY2t5XG4gICAgICAgIHZhciBtZWFzdXJlID0gdmlld1t2aWV3Lmxlbmd0aCAtIDFdLm1lYXN1cmU7XG4gICAgICAgIHZhciBtYXAgPSBtZWFzdXJlLm1hcHMgPyBtZWFzdXJlLm1hcHNbbWVhc3VyZS5tYXBzLmxlbmd0aCAtIDFdIDogbWVhc3VyZS5tYXA7XG4gICAgICAgIGVuZCA9IHtub2RlOiBtYXBbbWFwLmxlbmd0aCAtIDFdLCBvZmZzZXQ6IG1hcFttYXAubGVuZ3RoIC0gMl0gLSBtYXBbbWFwLmxlbmd0aCAtIDNdfTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHsgdmFyIHJuZyA9IHJhbmdlKHN0YXJ0Lm5vZGUsIHN0YXJ0Lm9mZnNldCwgZW5kLm9mZnNldCwgZW5kLm5vZGUpOyB9XG4gICAgICBjYXRjaChlKSB7fSAvLyBPdXIgbW9kZWwgb2YgdGhlIERPTSBtaWdodCBiZSBvdXRkYXRlZCwgaW4gd2hpY2ggY2FzZSB0aGUgcmFuZ2Ugd2UgdHJ5IHRvIHNldCBjYW4gYmUgaW1wb3NzaWJsZVxuICAgICAgaWYgKHJuZykge1xuICAgICAgICBpZiAoIWdlY2tvICYmIHRoaXMuY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICAgIHNlbC5jb2xsYXBzZShzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQpO1xuICAgICAgICAgIGlmICghcm5nLmNvbGxhcHNlZCkgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHNlbC5hZGRSYW5nZShybmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbGQgJiYgc2VsLmFuY2hvck5vZGUgPT0gbnVsbCkgc2VsLmFkZFJhbmdlKG9sZCk7XG4gICAgICAgIGVsc2UgaWYgKGdlY2tvKSB0aGlzLnN0YXJ0R3JhY2VQZXJpb2QoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKTtcbiAgICB9LFxuXG4gICAgc3RhcnRHcmFjZVBlcmlvZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ3JhY2VQZXJpb2QpO1xuICAgICAgdGhpcy5ncmFjZVBlcmlvZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LmdyYWNlUGVyaW9kID0gZmFsc2U7XG4gICAgICAgIGlmIChpbnB1dC5zZWxlY3Rpb25DaGFuZ2VkKCkpXG4gICAgICAgICAgaW5wdXQuY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkgeyBpbnB1dC5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsgfSk7XG4gICAgICB9LCAyMCk7XG4gICAgfSxcblxuICAgIHNob3dNdWx0aXBsZVNlbGVjdGlvbnM6IGZ1bmN0aW9uKGluZm8pIHtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5jdXJzb3JEaXYsIGluZm8uY3Vyc29ycyk7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZCh0aGlzLmNtLmRpc3BsYXkuc2VsZWN0aW9uRGl2LCBpbmZvLnNlbGVjdGlvbik7XG4gICAgfSxcblxuICAgIHJlbWVtYmVyU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gc2VsLmFuY2hvck5vZGU7IHRoaXMubGFzdEFuY2hvck9mZnNldCA9IHNlbC5hbmNob3JPZmZzZXQ7XG4gICAgICB0aGlzLmxhc3RGb2N1c05vZGUgPSBzZWwuZm9jdXNOb2RlOyB0aGlzLmxhc3RGb2N1c09mZnNldCA9IHNlbC5mb2N1c09mZnNldDtcbiAgICB9LFxuXG4gICAgc2VsZWN0aW9uSW5FZGl0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGlmICghc2VsLnJhbmdlQ291bnQpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBub2RlID0gc2VsLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXI7XG4gICAgICByZXR1cm4gY29udGFpbnModGhpcy5kaXYsIG5vZGUpO1xuICAgIH0sXG5cbiAgICBmb2N1czogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jbS5vcHRpb25zLnJlYWRPbmx5ICE9IFwibm9jdXJzb3JcIikgdGhpcy5kaXYuZm9jdXMoKTtcbiAgICB9LFxuICAgIGJsdXI6IGZ1bmN0aW9uKCkgeyB0aGlzLmRpdi5ibHVyKCk7IH0sXG4gICAgZ2V0RmllbGQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXY7IH0sXG5cbiAgICBzdXBwb3J0c1RvdWNoOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG5cbiAgICByZWNlaXZlZEZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXM7XG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpKVxuICAgICAgICB0aGlzLnBvbGxTZWxlY3Rpb24oKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcnVuSW5PcCh0aGlzLmNtLCBmdW5jdGlvbigpIHsgaW5wdXQuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH0pO1xuXG4gICAgICBmdW5jdGlvbiBwb2xsKCkge1xuICAgICAgICBpZiAoaW5wdXQuY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICAgIGlucHV0LnBvbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICBpbnB1dC5wb2xsaW5nLnNldChpbnB1dC5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgfSxcblxuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBzZWwuYW5jaG9yTm9kZSAhPSB0aGlzLmxhc3RBbmNob3JOb2RlIHx8IHNlbC5hbmNob3JPZmZzZXQgIT0gdGhpcy5sYXN0QW5jaG9yT2Zmc2V0IHx8XG4gICAgICAgIHNlbC5mb2N1c05vZGUgIT0gdGhpcy5sYXN0Rm9jdXNOb2RlIHx8IHNlbC5mb2N1c09mZnNldCAhPSB0aGlzLmxhc3RGb2N1c09mZnNldDtcbiAgICB9LFxuXG4gICAgcG9sbFNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcG9zaW5nICYmICF0aGlzLmdyYWNlUGVyaW9kICYmIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCgpKSB7XG4gICAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksIGNtID0gdGhpcy5jbTtcbiAgICAgICAgdGhpcy5yZW1lbWJlclNlbGVjdGlvbigpO1xuICAgICAgICB2YXIgYW5jaG9yID0gZG9tVG9Qb3MoY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgdmFyIGhlYWQgPSBkb21Ub1BvcyhjbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgICAgaWYgKGFuY2hvciAmJiBoZWFkKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICAgIGlmIChhbmNob3IuYmFkIHx8IGhlYWQuYmFkKSBjbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHBvbGxDb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzZWwgPSBjbS5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIHZhciBmcm9tID0gc2VsLmZyb20oKSwgdG8gPSBzZWwudG8oKTtcbiAgICAgIGlmIChmcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IHRvLmxpbmUgPiBkaXNwbGF5LnZpZXdUbyAtIDEpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGZyb21JbmRleDtcbiAgICAgIGlmIChmcm9tLmxpbmUgPT0gZGlzcGxheS52aWV3RnJvbSB8fCAoZnJvbUluZGV4ID0gZmluZFZpZXdJbmRleChjbSwgZnJvbS5saW5lKSkgPT0gMCkge1xuICAgICAgICB2YXIgZnJvbUxpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3WzBdLmxpbmUpO1xuICAgICAgICB2YXIgZnJvbU5vZGUgPSBkaXNwbGF5LnZpZXdbMF0ubm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmcm9tTGluZSA9IGxpbmVObyhkaXNwbGF5LnZpZXdbZnJvbUluZGV4XS5saW5lKTtcbiAgICAgICAgdmFyIGZyb21Ob2RlID0gZGlzcGxheS52aWV3W2Zyb21JbmRleCAtIDFdLm5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICB2YXIgdG9JbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIHRvLmxpbmUpO1xuICAgICAgaWYgKHRvSW5kZXggPT0gZGlzcGxheS52aWV3Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdmFyIHRvTGluZSA9IGRpc3BsYXkudmlld1RvIC0gMTtcbiAgICAgICAgdmFyIHRvTm9kZSA9IGRpc3BsYXkubGluZURpdi5sYXN0Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdG9MaW5lID0gbGluZU5vKGRpc3BsYXkudmlld1t0b0luZGV4ICsgMV0ubGluZSkgLSAxO1xuICAgICAgICB2YXIgdG9Ob2RlID0gZGlzcGxheS52aWV3W3RvSW5kZXggKyAxXS5ub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld1RleHQgPSBjbS5kb2Muc3BsaXRMaW5lcyhkb21UZXh0QmV0d2VlbihjbSwgZnJvbU5vZGUsIHRvTm9kZSwgZnJvbUxpbmUsIHRvTGluZSkpO1xuICAgICAgdmFyIG9sZFRleHQgPSBnZXRCZXR3ZWVuKGNtLmRvYywgUG9zKGZyb21MaW5lLCAwKSwgUG9zKHRvTGluZSwgZ2V0TGluZShjbS5kb2MsIHRvTGluZSkudGV4dC5sZW5ndGgpKTtcbiAgICAgIHdoaWxlIChuZXdUZXh0Lmxlbmd0aCA+IDEgJiYgb2xkVGV4dC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGlmIChsc3QobmV3VGV4dCkgPT0gbHN0KG9sZFRleHQpKSB7IG5ld1RleHQucG9wKCk7IG9sZFRleHQucG9wKCk7IHRvTGluZS0tOyB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1RleHRbMF0gPT0gb2xkVGV4dFswXSkgeyBuZXdUZXh0LnNoaWZ0KCk7IG9sZFRleHQuc2hpZnQoKTsgZnJvbUxpbmUrKzsgfVxuICAgICAgICBlbHNlIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3V0RnJvbnQgPSAwLCBjdXRFbmQgPSAwO1xuICAgICAgdmFyIG5ld1RvcCA9IG5ld1RleHRbMF0sIG9sZFRvcCA9IG9sZFRleHRbMF0sIG1heEN1dEZyb250ID0gTWF0aC5taW4obmV3VG9wLmxlbmd0aCwgb2xkVG9wLmxlbmd0aCk7XG4gICAgICB3aGlsZSAoY3V0RnJvbnQgPCBtYXhDdXRGcm9udCAmJiBuZXdUb3AuY2hhckNvZGVBdChjdXRGcm9udCkgPT0gb2xkVG9wLmNoYXJDb2RlQXQoY3V0RnJvbnQpKVxuICAgICAgICArK2N1dEZyb250O1xuICAgICAgdmFyIG5ld0JvdCA9IGxzdChuZXdUZXh0KSwgb2xkQm90ID0gbHN0KG9sZFRleHQpO1xuICAgICAgdmFyIG1heEN1dEVuZCA9IE1hdGgubWluKG5ld0JvdC5sZW5ndGggLSAobmV3VGV4dC5sZW5ndGggPT0gMSA/IGN1dEZyb250IDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkQm90Lmxlbmd0aCAtIChvbGRUZXh0Lmxlbmd0aCA9PSAxID8gY3V0RnJvbnQgOiAwKSk7XG4gICAgICB3aGlsZSAoY3V0RW5kIDwgbWF4Q3V0RW5kICYmXG4gICAgICAgICAgICAgbmV3Qm90LmNoYXJDb2RlQXQobmV3Qm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpID09IG9sZEJvdC5jaGFyQ29kZUF0KG9sZEJvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSlcbiAgICAgICAgKytjdXRFbmQ7XG5cbiAgICAgIG5ld1RleHRbbmV3VGV4dC5sZW5ndGggLSAxXSA9IG5ld0JvdC5zbGljZSgwLCBuZXdCb3QubGVuZ3RoIC0gY3V0RW5kKTtcbiAgICAgIG5ld1RleHRbMF0gPSBuZXdUZXh0WzBdLnNsaWNlKGN1dEZyb250KTtcblxuICAgICAgdmFyIGNoRnJvbSA9IFBvcyhmcm9tTGluZSwgY3V0RnJvbnQpO1xuICAgICAgdmFyIGNoVG8gPSBQb3ModG9MaW5lLCBvbGRUZXh0Lmxlbmd0aCA/IGxzdChvbGRUZXh0KS5sZW5ndGggLSBjdXRFbmQgOiAwKTtcbiAgICAgIGlmIChuZXdUZXh0Lmxlbmd0aCA+IDEgfHwgbmV3VGV4dFswXSB8fCBjbXAoY2hGcm9tLCBjaFRvKSkge1xuICAgICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBuZXdUZXh0LCBjaEZyb20sIGNoVG8sIFwiK2lucHV0XCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW5zdXJlUG9sbGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZm9yY2VDb21wb3NpdGlvbkVuZCgpO1xuICAgIH0sXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7XG4gICAgfSxcbiAgICBmb3JjZUNvbXBvc2l0aW9uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5jb21wb3NpbmcgfHwgdGhpcy5jb21wb3NpbmcuaGFuZGxlZCkgcmV0dXJuO1xuICAgICAgdGhpcy5hcHBseUNvbXBvc2l0aW9uKHRoaXMuY29tcG9zaW5nKTtcbiAgICAgIHRoaXMuY29tcG9zaW5nLmhhbmRsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5kaXYuYmx1cigpO1xuICAgICAgdGhpcy5kaXYuZm9jdXMoKTtcbiAgICB9LFxuICAgIGFwcGx5Q29tcG9zaXRpb246IGZ1bmN0aW9uKGNvbXBvc2luZykge1xuICAgICAgaWYgKHRoaXMuY20uaXNSZWFkT25seSgpKVxuICAgICAgICBvcGVyYXRpb24odGhpcy5jbSwgcmVnQ2hhbmdlKSh0aGlzLmNtKVxuICAgICAgZWxzZSBpZiAoY29tcG9zaW5nLmRhdGEgJiYgY29tcG9zaW5nLmRhdGEgIT0gY29tcG9zaW5nLnN0YXJ0RGF0YSlcbiAgICAgICAgb3BlcmF0aW9uKHRoaXMuY20sIGFwcGx5VGV4dElucHV0KSh0aGlzLmNtLCBjb21wb3NpbmcuZGF0YSwgMCwgY29tcG9zaW5nLnNlbCk7XG4gICAgfSxcblxuICAgIHNldFVuZWRpdGFibGU6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIG5vZGUuY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiXG4gICAgfSxcblxuICAgIG9uS2V5UHJlc3M6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghdGhpcy5jbS5pc1JlYWRPbmx5KCkpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLmNtLCBhcHBseVRleHRJbnB1dCkodGhpcy5jbSwgU3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlID09IG51bGwgPyBlLmtleUNvZGUgOiBlLmNoYXJDb2RlKSwgMCk7XG4gICAgfSxcblxuICAgIHJlYWRPbmx5Q2hhbmdlZDogZnVuY3Rpb24odmFsKSB7XG4gICAgICB0aGlzLmRpdi5jb250ZW50RWRpdGFibGUgPSBTdHJpbmcodmFsICE9IFwibm9jdXJzb3JcIilcbiAgICB9LFxuXG4gICAgb25Db250ZXh0TWVudTogbm90aGluZyxcbiAgICByZXNldFBvc2l0aW9uOiBub3RoaW5nLFxuXG4gICAgbmVlZHNDb250ZW50QXR0cmlidXRlOiB0cnVlXG4gIH0sIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gcG9zVG9ET00oY20sIHBvcykge1xuICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBwb3MubGluZSk7XG4gICAgaWYgKCF2aWV3IHx8IHZpZXcuaGlkZGVuKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgdmFyIGluZm8gPSBtYXBGcm9tTGluZVZpZXcodmlldywgbGluZSwgcG9zLmxpbmUpO1xuXG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSksIHNpZGUgPSBcImxlZnRcIjtcbiAgICBpZiAob3JkZXIpIHtcbiAgICAgIHZhciBwYXJ0UG9zID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgcG9zLmNoKTtcbiAgICAgIHNpZGUgPSBwYXJ0UG9zICUgMiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gbm9kZUFuZE9mZnNldEluTGluZU1hcChpbmZvLm1hcCwgcG9zLmNoLCBzaWRlKTtcbiAgICByZXN1bHQub2Zmc2V0ID0gcmVzdWx0LmNvbGxhcHNlID09IFwicmlnaHRcIiA/IHJlc3VsdC5lbmQgOiByZXN1bHQuc3RhcnQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJhZFBvcyhwb3MsIGJhZCkgeyBpZiAoYmFkKSBwb3MuYmFkID0gdHJ1ZTsgcmV0dXJuIHBvczsgfVxuXG4gIGZ1bmN0aW9uIGRvbVRvUG9zKGNtLCBub2RlLCBvZmZzZXQpIHtcbiAgICB2YXIgbGluZU5vZGU7XG4gICAgaWYgKG5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSB7XG4gICAgICBsaW5lTm9kZSA9IGNtLmRpc3BsYXkubGluZURpdi5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICBpZiAoIWxpbmVOb2RlKSByZXR1cm4gYmFkUG9zKGNtLmNsaXBQb3MoUG9zKGNtLmRpc3BsYXkudmlld1RvIC0gMSkpLCB0cnVlKTtcbiAgICAgIG5vZGUgPSBudWxsOyBvZmZzZXQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxpbmVOb2RlID0gbm9kZTs7IGxpbmVOb2RlID0gbGluZU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICBpZiAoIWxpbmVOb2RlIHx8IGxpbmVOb2RlID09IGNtLmRpc3BsYXkubGluZURpdikgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChsaW5lTm9kZS5wYXJlbnROb2RlICYmIGxpbmVOb2RlLnBhcmVudE5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lVmlldyA9IGNtLmRpc3BsYXkudmlld1tpXTtcbiAgICAgIGlmIChsaW5lVmlldy5ub2RlID09IGxpbmVOb2RlKVxuICAgICAgICByZXR1cm4gbG9jYXRlTm9kZUluTGluZVZpZXcobGluZVZpZXcsIG5vZGUsIG9mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9jYXRlTm9kZUluTGluZVZpZXcobGluZVZpZXcsIG5vZGUsIG9mZnNldCkge1xuICAgIHZhciB3cmFwcGVyID0gbGluZVZpZXcudGV4dC5maXJzdENoaWxkLCBiYWQgPSBmYWxzZTtcbiAgICBpZiAoIW5vZGUgfHwgIWNvbnRhaW5zKHdyYXBwZXIsIG5vZGUpKSByZXR1cm4gYmFkUG9zKFBvcyhsaW5lTm8obGluZVZpZXcubGluZSksIDApLCB0cnVlKTtcbiAgICBpZiAobm9kZSA9PSB3cmFwcGVyKSB7XG4gICAgICBiYWQgPSB0cnVlO1xuICAgICAgbm9kZSA9IHdyYXBwZXIuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICB2YXIgbGluZSA9IGxpbmVWaWV3LnJlc3QgPyBsc3QobGluZVZpZXcucmVzdCkgOiBsaW5lVmlldy5saW5lO1xuICAgICAgICByZXR1cm4gYmFkUG9zKFBvcyhsaW5lTm8obGluZSksIGxpbmUudGV4dC5sZW5ndGgpLCBiYWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0ZXh0Tm9kZSA9IG5vZGUubm9kZVR5cGUgPT0gMyA/IG5vZGUgOiBudWxsLCB0b3BOb2RlID0gbm9kZTtcbiAgICBpZiAoIXRleHROb2RlICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSAmJiBub2RlLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT0gMykge1xuICAgICAgdGV4dE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICBpZiAob2Zmc2V0KSBvZmZzZXQgPSB0ZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgIH1cbiAgICB3aGlsZSAodG9wTm9kZS5wYXJlbnROb2RlICE9IHdyYXBwZXIpIHRvcE5vZGUgPSB0b3BOb2RlLnBhcmVudE5vZGU7XG4gICAgdmFyIG1lYXN1cmUgPSBsaW5lVmlldy5tZWFzdXJlLCBtYXBzID0gbWVhc3VyZS5tYXBzO1xuXG4gICAgZnVuY3Rpb24gZmluZCh0ZXh0Tm9kZSwgdG9wTm9kZSwgb2Zmc2V0KSB7XG4gICAgICBmb3IgKHZhciBpID0gLTE7IGkgPCAobWFwcyA/IG1hcHMubGVuZ3RoIDogMCk7IGkrKykge1xuICAgICAgICB2YXIgbWFwID0gaSA8IDAgPyBtZWFzdXJlLm1hcCA6IG1hcHNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFwLmxlbmd0aDsgaiArPSAzKSB7XG4gICAgICAgICAgdmFyIGN1ck5vZGUgPSBtYXBbaiArIDJdO1xuICAgICAgICAgIGlmIChjdXJOb2RlID09IHRleHROb2RlIHx8IGN1ck5vZGUgPT0gdG9wTm9kZSkge1xuICAgICAgICAgICAgdmFyIGxpbmUgPSBsaW5lTm8oaSA8IDAgPyBsaW5lVmlldy5saW5lIDogbGluZVZpZXcucmVzdFtpXSk7XG4gICAgICAgICAgICB2YXIgY2ggPSBtYXBbal0gKyBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAob2Zmc2V0IDwgMCB8fCBjdXJOb2RlICE9IHRleHROb2RlKSBjaCA9IG1hcFtqICsgKG9mZnNldCA/IDEgOiAwKV07XG4gICAgICAgICAgICByZXR1cm4gUG9zKGxpbmUsIGNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGZvdW5kID0gZmluZCh0ZXh0Tm9kZSwgdG9wTm9kZSwgb2Zmc2V0KTtcbiAgICBpZiAoZm91bmQpIHJldHVybiBiYWRQb3MoZm91bmQsIGJhZCk7XG5cbiAgICAvLyBGSVhNRSB0aGlzIGlzIGFsbCByZWFsbHkgc2hha3kuIG1pZ2h0IGhhbmRsZSB0aGUgZmV3IGNhc2VzIGl0IG5lZWRzIHRvIGhhbmRsZSwgYnV0IGxpa2VseSB0byBjYXVzZSBwcm9ibGVtc1xuICAgIGZvciAodmFyIGFmdGVyID0gdG9wTm9kZS5uZXh0U2libGluZywgZGlzdCA9IHRleHROb2RlID8gdGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aCAtIG9mZnNldCA6IDA7IGFmdGVyOyBhZnRlciA9IGFmdGVyLm5leHRTaWJsaW5nKSB7XG4gICAgICBmb3VuZCA9IGZpbmQoYWZ0ZXIsIGFmdGVyLmZpcnN0Q2hpbGQsIDApO1xuICAgICAgaWYgKGZvdW5kKVxuICAgICAgICByZXR1cm4gYmFkUG9zKFBvcyhmb3VuZC5saW5lLCBmb3VuZC5jaCAtIGRpc3QpLCBiYWQpO1xuICAgICAgZWxzZVxuICAgICAgICBkaXN0ICs9IGFmdGVyLnRleHRDb250ZW50Lmxlbmd0aDtcbiAgICB9XG4gICAgZm9yICh2YXIgYmVmb3JlID0gdG9wTm9kZS5wcmV2aW91c1NpYmxpbmcsIGRpc3QgPSBvZmZzZXQ7IGJlZm9yZTsgYmVmb3JlID0gYmVmb3JlLnByZXZpb3VzU2libGluZykge1xuICAgICAgZm91bmQgPSBmaW5kKGJlZm9yZSwgYmVmb3JlLmZpcnN0Q2hpbGQsIC0xKTtcbiAgICAgIGlmIChmb3VuZClcbiAgICAgICAgcmV0dXJuIGJhZFBvcyhQb3MoZm91bmQubGluZSwgZm91bmQuY2ggKyBkaXN0KSwgYmFkKTtcbiAgICAgIGVsc2VcbiAgICAgICAgZGlzdCArPSBhZnRlci50ZXh0Q29udGVudC5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZG9tVGV4dEJldHdlZW4oY20sIGZyb20sIHRvLCBmcm9tTGluZSwgdG9MaW5lKSB7XG4gICAgdmFyIHRleHQgPSBcIlwiLCBjbG9zaW5nID0gZmFsc2UsIGxpbmVTZXAgPSBjbS5kb2MubGluZVNlcGFyYXRvcigpO1xuICAgIGZ1bmN0aW9uIHJlY29nbml6ZU1hcmtlcihpZCkgeyByZXR1cm4gZnVuY3Rpb24obWFya2VyKSB7IHJldHVybiBtYXJrZXIuaWQgPT0gaWQ7IH07IH1cbiAgICBmdW5jdGlvbiB3YWxrKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgdmFyIGNtVGV4dCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY20tdGV4dFwiKTtcbiAgICAgICAgaWYgKGNtVGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKGNtVGV4dCA9PSBcIlwiKSBjbVRleHQgPSBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoL1xcdTIwMGIvZywgXCJcIik7XG4gICAgICAgICAgdGV4dCArPSBjbVRleHQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXJrZXJJRCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY20tbWFya2VyXCIpLCByYW5nZTtcbiAgICAgICAgaWYgKG1hcmtlcklEKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gY20uZmluZE1hcmtzKFBvcyhmcm9tTGluZSwgMCksIFBvcyh0b0xpbmUgKyAxLCAwKSwgcmVjb2duaXplTWFya2VyKCttYXJrZXJJRCkpO1xuICAgICAgICAgIGlmIChmb3VuZC5sZW5ndGggJiYgKHJhbmdlID0gZm91bmRbMF0uZmluZCgpKSlcbiAgICAgICAgICAgIHRleHQgKz0gZ2V0QmV0d2VlbihjbS5kb2MsIHJhbmdlLmZyb20sIHJhbmdlLnRvKS5qb2luKGxpbmVTZXApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgPT0gXCJmYWxzZVwiKSByZXR1cm47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIHdhbGsobm9kZS5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgaWYgKC9eKHByZXxkaXZ8cCkkL2kudGVzdChub2RlLm5vZGVOYW1lKSlcbiAgICAgICAgICBjbG9zaW5nID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKSB7XG4gICAgICAgIHZhciB2YWwgPSBub2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgaWYgKCF2YWwpIHJldHVybjtcbiAgICAgICAgaWYgKGNsb3NpbmcpIHtcbiAgICAgICAgICB0ZXh0ICs9IGxpbmVTZXA7XG4gICAgICAgICAgY2xvc2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRleHQgKz0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICB3YWxrKGZyb20pO1xuICAgICAgaWYgKGZyb20gPT0gdG8pIGJyZWFrO1xuICAgICAgZnJvbSA9IGZyb20ubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgQ29kZU1pcnJvci5pbnB1dFN0eWxlcyA9IHtcInRleHRhcmVhXCI6IFRleHRhcmVhSW5wdXQsIFwiY29udGVudGVkaXRhYmxlXCI6IENvbnRlbnRFZGl0YWJsZUlucHV0fTtcblxuICAvLyBTRUxFQ1RJT04gLyBDVVJTT1JcblxuICAvLyBTZWxlY3Rpb24gb2JqZWN0cyBhcmUgaW1tdXRhYmxlLiBBIG5ldyBvbmUgaXMgY3JlYXRlZCBldmVyeSB0aW1lXG4gIC8vIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy4gQSBzZWxlY3Rpb24gaXMgb25lIG9yIG1vcmUgbm9uLW92ZXJsYXBwaW5nXG4gIC8vIChhbmQgbm9uLXRvdWNoaW5nKSByYW5nZXMsIHNvcnRlZCwgYW5kIGFuIGludGVnZXIgdGhhdCBpbmRpY2F0ZXNcbiAgLy8gd2hpY2ggb25lIGlzIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiAodGhlIG9uZSB0aGF0J3Mgc2Nyb2xsZWQgaW50b1xuICAvLyB2aWV3LCB0aGF0IGdldEN1cnNvciByZXR1cm5zLCBldGMpLlxuICBmdW5jdGlvbiBTZWxlY3Rpb24ocmFuZ2VzLCBwcmltSW5kZXgpIHtcbiAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICB0aGlzLnByaW1JbmRleCA9IHByaW1JbmRleDtcbiAgfVxuXG4gIFNlbGVjdGlvbi5wcm90b3R5cGUgPSB7XG4gICAgcHJpbWFyeTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnJhbmdlc1t0aGlzLnByaW1JbmRleF07IH0sXG4gICAgZXF1YWxzOiBmdW5jdGlvbihvdGhlcikge1xuICAgICAgaWYgKG90aGVyID09IHRoaXMpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKG90aGVyLnByaW1JbmRleCAhPSB0aGlzLnByaW1JbmRleCB8fCBvdGhlci5yYW5nZXMubGVuZ3RoICE9IHRoaXMucmFuZ2VzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaGVyZSA9IHRoaXMucmFuZ2VzW2ldLCB0aGVyZSA9IG90aGVyLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKGNtcChoZXJlLmFuY2hvciwgdGhlcmUuYW5jaG9yKSAhPSAwIHx8IGNtcChoZXJlLmhlYWQsIHRoZXJlLmhlYWQpICE9IDApIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgZGVlcENvcHk6IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgb3V0ID0gW10sIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShjb3B5UG9zKHRoaXMucmFuZ2VzW2ldLmFuY2hvciksIGNvcHlQb3ModGhpcy5yYW5nZXNbaV0uaGVhZCkpO1xuICAgICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCB0aGlzLnByaW1JbmRleCk7XG4gICAgfSxcbiAgICBzb21ldGhpbmdTZWxlY3RlZDogZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoIXRoaXMucmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uKHBvcywgZW5kKSB7XG4gICAgICBpZiAoIWVuZCkgZW5kID0gcG9zO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKGNtcChlbmQsIHJhbmdlLmZyb20oKSkgPj0gMCAmJiBjbXAocG9zLCByYW5nZS50bygpKSA8PSAwKVxuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBSYW5nZShhbmNob3IsIGhlYWQpIHtcbiAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjsgdGhpcy5oZWFkID0gaGVhZDtcbiAgfVxuXG4gIFJhbmdlLnByb3RvdHlwZSA9IHtcbiAgICBmcm9tOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1pblBvcyh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKTsgfSxcbiAgICB0bzogZnVuY3Rpb24oKSB7IHJldHVybiBtYXhQb3ModGhpcy5hbmNob3IsIHRoaXMuaGVhZCk7IH0sXG4gICAgZW1wdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGVhZC5saW5lID09IHRoaXMuYW5jaG9yLmxpbmUgJiYgdGhpcy5oZWFkLmNoID09IHRoaXMuYW5jaG9yLmNoO1xuICAgIH1cbiAgfTtcblxuICAvLyBUYWtlIGFuIHVuc29ydGVkLCBwb3RlbnRpYWxseSBvdmVybGFwcGluZyBzZXQgb2YgcmFuZ2VzLCBhbmRcbiAgLy8gYnVpbGQgYSBzZWxlY3Rpb24gb3V0IG9mIGl0LiAnQ29uc3VtZXMnIHJhbmdlcyBhcnJheSAobW9kaWZ5aW5nXG4gIC8vIGl0KS5cbiAgZnVuY3Rpb24gbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgcHJpbUluZGV4KSB7XG4gICAgdmFyIHByaW0gPSByYW5nZXNbcHJpbUluZGV4XTtcbiAgICByYW5nZXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBjbXAoYS5mcm9tKCksIGIuZnJvbSgpKTsgfSk7XG4gICAgcHJpbUluZGV4ID0gaW5kZXhPZihyYW5nZXMsIHByaW0pO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY3VyID0gcmFuZ2VzW2ldLCBwcmV2ID0gcmFuZ2VzW2kgLSAxXTtcbiAgICAgIGlmIChjbXAocHJldi50bygpLCBjdXIuZnJvbSgpKSA+PSAwKSB7XG4gICAgICAgIHZhciBmcm9tID0gbWluUG9zKHByZXYuZnJvbSgpLCBjdXIuZnJvbSgpKSwgdG8gPSBtYXhQb3MocHJldi50bygpLCBjdXIudG8oKSk7XG4gICAgICAgIHZhciBpbnYgPSBwcmV2LmVtcHR5KCkgPyBjdXIuZnJvbSgpID09IGN1ci5oZWFkIDogcHJldi5mcm9tKCkgPT0gcHJldi5oZWFkO1xuICAgICAgICBpZiAoaSA8PSBwcmltSW5kZXgpIC0tcHJpbUluZGV4O1xuICAgICAgICByYW5nZXMuc3BsaWNlKC0taSwgMiwgbmV3IFJhbmdlKGludiA/IHRvIDogZnJvbSwgaW52ID8gZnJvbSA6IHRvKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKHJhbmdlcywgcHJpbUluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpIHtcbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihbbmV3IFJhbmdlKGFuY2hvciwgaGVhZCB8fCBhbmNob3IpXSwgMCk7XG4gIH1cblxuICAvLyBNb3N0IG9mIHRoZSBleHRlcm5hbCBBUEkgY2xpcHMgZ2l2ZW4gcG9zaXRpb25zIHRvIG1ha2Ugc3VyZSB0aGV5XG4gIC8vIGFjdHVhbGx5IGV4aXN0IHdpdGhpbiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGNsaXBMaW5lKGRvYywgbikge3JldHVybiBNYXRoLm1heChkb2MuZmlyc3QsIE1hdGgubWluKG4sIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkpO31cbiAgZnVuY3Rpb24gY2xpcFBvcyhkb2MsIHBvcykge1xuICAgIGlmIChwb3MubGluZSA8IGRvYy5maXJzdCkgcmV0dXJuIFBvcyhkb2MuZmlyc3QsIDApO1xuICAgIHZhciBsYXN0ID0gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxO1xuICAgIGlmIChwb3MubGluZSA+IGxhc3QpIHJldHVybiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKTtcbiAgICByZXR1cm4gY2xpcFRvTGVuKHBvcywgZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0Lmxlbmd0aCk7XG4gIH1cbiAgZnVuY3Rpb24gY2xpcFRvTGVuKHBvcywgbGluZWxlbikge1xuICAgIHZhciBjaCA9IHBvcy5jaDtcbiAgICBpZiAoY2ggPT0gbnVsbCB8fCBjaCA+IGxpbmVsZW4pIHJldHVybiBQb3MocG9zLmxpbmUsIGxpbmVsZW4pO1xuICAgIGVsc2UgaWYgKGNoIDwgMCkgcmV0dXJuIFBvcyhwb3MubGluZSwgMCk7XG4gICAgZWxzZSByZXR1cm4gcG9zO1xuICB9XG4gIGZ1bmN0aW9uIGlzTGluZShkb2MsIGwpIHtyZXR1cm4gbCA+PSBkb2MuZmlyc3QgJiYgbCA8IGRvYy5maXJzdCArIGRvYy5zaXplO31cbiAgZnVuY3Rpb24gY2xpcFBvc0FycmF5KGRvYywgYXJyYXkpIHtcbiAgICBmb3IgKHZhciBvdXQgPSBbXSwgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgb3V0W2ldID0gY2xpcFBvcyhkb2MsIGFycmF5W2ldKTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLy8gU0VMRUNUSU9OIFVQREFURVNcblxuICAvLyBUaGUgJ3Njcm9sbCcgcGFyYW1ldGVyIGdpdmVuIHRvIG1hbnkgb2YgdGhlc2UgaW5kaWNhdGVkIHdoZXRoZXJcbiAgLy8gdGhlIG5ldyBjdXJzb3IgcG9zaXRpb24gc2hvdWxkIGJlIHNjcm9sbGVkIGludG8gdmlldyBhZnRlclxuICAvLyBtb2RpZnlpbmcgdGhlIHNlbGVjdGlvbi5cblxuICAvLyBJZiBzaGlmdCBpcyBoZWxkIG9yIHRoZSBleHRlbmQgZmxhZyBpcyBzZXQsIGV4dGVuZHMgYSByYW5nZSB0b1xuICAvLyBpbmNsdWRlIGEgZ2l2ZW4gcG9zaXRpb24gKGFuZCBvcHRpb25hbGx5IGEgc2Vjb25kIHBvc2l0aW9uKS5cbiAgLy8gT3RoZXJ3aXNlLCBzaW1wbHkgcmV0dXJucyB0aGUgcmFuZ2UgYmV0d2VlbiB0aGUgZ2l2ZW4gcG9zaXRpb25zLlxuICAvLyBVc2VkIGZvciBjdXJzb3IgbW90aW9uIGFuZCBzdWNoLlxuICBmdW5jdGlvbiBleHRlbmRSYW5nZShkb2MsIHJhbmdlLCBoZWFkLCBvdGhlcikge1xuICAgIGlmIChkb2MuY20gJiYgZG9jLmNtLmRpc3BsYXkuc2hpZnQgfHwgZG9jLmV4dGVuZCkge1xuICAgICAgdmFyIGFuY2hvciA9IHJhbmdlLmFuY2hvcjtcbiAgICAgIGlmIChvdGhlcikge1xuICAgICAgICB2YXIgcG9zQmVmb3JlID0gY21wKGhlYWQsIGFuY2hvcikgPCAwO1xuICAgICAgICBpZiAocG9zQmVmb3JlICE9IChjbXAob3RoZXIsIGFuY2hvcikgPCAwKSkge1xuICAgICAgICAgIGFuY2hvciA9IGhlYWQ7XG4gICAgICAgICAgaGVhZCA9IG90aGVyO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc0JlZm9yZSAhPSAoY21wKGhlYWQsIG90aGVyKSA8IDApKSB7XG4gICAgICAgICAgaGVhZCA9IG90aGVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKGFuY2hvciwgaGVhZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUmFuZ2Uob3RoZXIgfHwgaGVhZCwgaGVhZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRXh0ZW5kIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiByYW5nZSwgZGlzY2FyZCB0aGUgcmVzdC5cbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9uKGRvYywgaGVhZCwgb3RoZXIsIG9wdGlvbnMpIHtcbiAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXcgU2VsZWN0aW9uKFtleHRlbmRSYW5nZShkb2MsIGRvYy5zZWwucHJpbWFyeSgpLCBoZWFkLCBvdGhlcildLCAwKSwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBFeHRlbmQgYWxsIHNlbGVjdGlvbnMgKHBvcyBpcyBhbiBhcnJheSBvZiBzZWxlY3Rpb25zIHdpdGggbGVuZ3RoXG4gIC8vIGVxdWFsIHRoZSBudW1iZXIgb2Ygc2VsZWN0aW9ucylcbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9ucyhkb2MsIGhlYWRzLCBvcHRpb25zKSB7XG4gICAgZm9yICh2YXIgb3V0ID0gW10sIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICBvdXRbaV0gPSBleHRlbmRSYW5nZShkb2MsIGRvYy5zZWwucmFuZ2VzW2ldLCBoZWFkc1tpXSwgbnVsbCk7XG4gICAgdmFyIG5ld1NlbCA9IG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KTtcbiAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXdTZWwsIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gVXBkYXRlcyBhIHNpbmdsZSByYW5nZSBpbiB0aGUgc2VsZWN0aW9uLlxuICBmdW5jdGlvbiByZXBsYWNlT25lU2VsZWN0aW9uKGRvYywgaSwgcmFuZ2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgcmFuZ2VzID0gZG9jLnNlbC5yYW5nZXMuc2xpY2UoMCk7XG4gICAgcmFuZ2VzW2ldID0gcmFuZ2U7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgZG9jLnNlbC5wcmltSW5kZXgpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFJlc2V0IHRoZSBzZWxlY3Rpb24gdG8gYSBzaW5nbGUgcmFuZ2UuXG4gIGZ1bmN0aW9uIHNldFNpbXBsZVNlbGVjdGlvbihkb2MsIGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgIHNldFNlbGVjdGlvbihkb2MsIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEdpdmUgYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIGhhbmRsZXJzIGEgY2hhbmdlIHRvIGluZmx1ZW5jZSBhXG4gIC8vIHNlbGVjdGlvbiB1cGRhdGUuXG4gIGZ1bmN0aW9uIGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHZhciBvYmogPSB7XG4gICAgICByYW5nZXM6IHNlbC5yYW5nZXMsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICB0aGlzLnJhbmdlc1tpXSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmFuY2hvciksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyhkb2MsIHJhbmdlc1tpXS5oZWFkKSk7XG4gICAgICB9LFxuICAgICAgb3JpZ2luOiBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luXG4gICAgfTtcbiAgICBzaWduYWwoZG9jLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiLCBkb2MsIG9iaik7XG4gICAgaWYgKGRvYy5jbSkgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLmNtLCBvYmopO1xuICAgIGlmIChvYmoucmFuZ2VzICE9IHNlbC5yYW5nZXMpIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24ob2JqLnJhbmdlcywgb2JqLnJhbmdlcy5sZW5ndGggLSAxKTtcbiAgICBlbHNlIHJldHVybiBzZWw7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeShkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHZhciBkb25lID0gZG9jLmhpc3RvcnkuZG9uZSwgbGFzdCA9IGxzdChkb25lKTtcbiAgICBpZiAobGFzdCAmJiBsYXN0LnJhbmdlcykge1xuICAgICAgZG9uZVtkb25lLmxlbmd0aCAtIDFdID0gc2VsO1xuICAgICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXQgYSBuZXcgc2VsZWN0aW9uLlxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb24oZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWwsIG9wdGlvbnMpO1xuICAgIGFkZFNlbGVjdGlvblRvSGlzdG9yeShkb2MsIGRvYy5zZWwsIGRvYy5jbSA/IGRvYy5jbS5jdXJPcC5pZCA6IE5hTiwgb3B0aW9ucyk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICBpZiAoaGFzSGFuZGxlcihkb2MsIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIikpXG4gICAgICBzZWwgPSBmaWx0ZXJTZWxlY3Rpb25DaGFuZ2UoZG9jLCBzZWwsIG9wdGlvbnMpO1xuXG4gICAgdmFyIGJpYXMgPSBvcHRpb25zICYmIG9wdGlvbnMuYmlhcyB8fFxuICAgICAgKGNtcChzZWwucHJpbWFyeSgpLmhlYWQsIGRvYy5zZWwucHJpbWFyeSgpLmhlYWQpIDwgMCA/IC0xIDogMSk7XG4gICAgc2V0U2VsZWN0aW9uSW5uZXIoZG9jLCBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBzZWwsIGJpYXMsIHRydWUpKTtcblxuICAgIGlmICghKG9wdGlvbnMgJiYgb3B0aW9ucy5zY3JvbGwgPT09IGZhbHNlKSAmJiBkb2MuY20pXG4gICAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGRvYy5jbSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNlbCkge1xuICAgIGlmIChzZWwuZXF1YWxzKGRvYy5zZWwpKSByZXR1cm47XG5cbiAgICBkb2Muc2VsID0gc2VsO1xuXG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgZG9jLmNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gZG9jLmNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgc2lnbmFsQ3Vyc29yQWN0aXZpdHkoZG9jLmNtKTtcbiAgICB9XG4gICAgc2lnbmFsTGF0ZXIoZG9jLCBcImN1cnNvckFjdGl2aXR5XCIsIGRvYyk7XG4gIH1cblxuICAvLyBWZXJpZnkgdGhhdCB0aGUgc2VsZWN0aW9uIGRvZXMgbm90IHBhcnRpYWxseSBzZWxlY3QgYW55IGF0b21pY1xuICAvLyBtYXJrZWQgcmFuZ2VzLlxuICBmdW5jdGlvbiByZUNoZWNrU2VsZWN0aW9uKGRvYykge1xuICAgIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2tpcEF0b21pY0luU2VsZWN0aW9uKGRvYywgZG9jLnNlbCwgbnVsbCwgZmFsc2UpLCBzZWxfZG9udFNjcm9sbCk7XG4gIH1cblxuICAvLyBSZXR1cm4gYSBzZWxlY3Rpb24gdGhhdCBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWNcbiAgLy8gcmFuZ2VzLlxuICBmdW5jdGlvbiBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBzZWwsIGJpYXMsIG1heUNsZWFyKSB7XG4gICAgdmFyIG91dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICB2YXIgb2xkID0gc2VsLnJhbmdlcy5sZW5ndGggPT0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoICYmIGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgdmFyIG5ld0FuY2hvciA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5hbmNob3IsIG9sZCAmJiBvbGQuYW5jaG9yLCBiaWFzLCBtYXlDbGVhcik7XG4gICAgICB2YXIgbmV3SGVhZCA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5oZWFkLCBvbGQgJiYgb2xkLmhlYWQsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIGlmIChvdXQgfHwgbmV3QW5jaG9yICE9IHJhbmdlLmFuY2hvciB8fCBuZXdIZWFkICE9IHJhbmdlLmhlYWQpIHtcbiAgICAgICAgaWYgKCFvdXQpIG91dCA9IHNlbC5yYW5nZXMuc2xpY2UoMCwgaSk7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShuZXdBbmNob3IsIG5ld0hlYWQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0ID8gbm9ybWFsaXplU2VsZWN0aW9uKG91dCwgc2VsLnByaW1JbmRleCkgOiBzZWw7XG4gIH1cblxuICBmdW5jdGlvbiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCBtYXlDbGVhcikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKTtcbiAgICBpZiAobGluZS5tYXJrZWRTcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3AgPSBsaW5lLm1hcmtlZFNwYW5zW2ldLCBtID0gc3AubWFya2VyO1xuICAgICAgaWYgKChzcC5mcm9tID09IG51bGwgfHwgKG0uaW5jbHVzaXZlTGVmdCA/IHNwLmZyb20gPD0gcG9zLmNoIDogc3AuZnJvbSA8IHBvcy5jaCkpICYmXG4gICAgICAgICAgKHNwLnRvID09IG51bGwgfHwgKG0uaW5jbHVzaXZlUmlnaHQgPyBzcC50byA+PSBwb3MuY2ggOiBzcC50byA+IHBvcy5jaCkpKSB7XG4gICAgICAgIGlmIChtYXlDbGVhcikge1xuICAgICAgICAgIHNpZ25hbChtLCBcImJlZm9yZUN1cnNvckVudGVyXCIpO1xuICAgICAgICAgIGlmIChtLmV4cGxpY2l0bHlDbGVhcmVkKSB7XG4gICAgICAgICAgICBpZiAoIWxpbmUubWFya2VkU3BhbnMpIGJyZWFrO1xuICAgICAgICAgICAgZWxzZSB7LS1pOyBjb250aW51ZTt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbS5hdG9taWMpIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChvbGRQb3MpIHtcbiAgICAgICAgICB2YXIgbmVhciA9IG0uZmluZChkaXIgPCAwID8gMSA6IC0xKSwgZGlmZjtcbiAgICAgICAgICBpZiAoZGlyIDwgMCA/IG0uaW5jbHVzaXZlUmlnaHQgOiBtLmluY2x1c2l2ZUxlZnQpXG4gICAgICAgICAgICBuZWFyID0gbW92ZVBvcyhkb2MsIG5lYXIsIC1kaXIsIG5lYXIgJiYgbmVhci5saW5lID09IHBvcy5saW5lID8gbGluZSA6IG51bGwpO1xuICAgICAgICAgIGlmIChuZWFyICYmIG5lYXIubGluZSA9PSBwb3MubGluZSAmJiAoZGlmZiA9IGNtcChuZWFyLCBvbGRQb3MpKSAmJiAoZGlyIDwgMCA/IGRpZmYgPCAwIDogZGlmZiA+IDApKVxuICAgICAgICAgICAgcmV0dXJuIHNraXBBdG9taWNJbm5lcihkb2MsIG5lYXIsIHBvcywgZGlyLCBtYXlDbGVhcik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmFyID0gbS5maW5kKGRpciA8IDAgPyAtMSA6IDEpO1xuICAgICAgICBpZiAoZGlyIDwgMCA/IG0uaW5jbHVzaXZlTGVmdCA6IG0uaW5jbHVzaXZlUmlnaHQpXG4gICAgICAgICAgZmFyID0gbW92ZVBvcyhkb2MsIGZhciwgZGlyLCBmYXIubGluZSA9PSBwb3MubGluZSA/IGxpbmUgOiBudWxsKTtcbiAgICAgICAgcmV0dXJuIGZhciA/IHNraXBBdG9taWNJbm5lcihkb2MsIGZhciwgcG9zLCBkaXIsIG1heUNsZWFyKSA6IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb3M7XG4gIH1cblxuICAvLyBFbnN1cmUgYSBnaXZlbiBwb3NpdGlvbiBpcyBub3QgaW5zaWRlIGFuIGF0b21pYyByYW5nZS5cbiAgZnVuY3Rpb24gc2tpcEF0b21pYyhkb2MsIHBvcywgb2xkUG9zLCBiaWFzLCBtYXlDbGVhcikge1xuICAgIHZhciBkaXIgPSBiaWFzIHx8IDE7XG4gICAgdmFyIGZvdW5kID0gc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIGRpciwgbWF5Q2xlYXIpIHx8XG4gICAgICAgICghbWF5Q2xlYXIgJiYgc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIGRpciwgdHJ1ZSkpIHx8XG4gICAgICAgIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCAtZGlyLCBtYXlDbGVhcikgfHxcbiAgICAgICAgKCFtYXlDbGVhciAmJiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgLWRpciwgdHJ1ZSkpO1xuICAgIGlmICghZm91bmQpIHtcbiAgICAgIGRvYy5jYW50RWRpdCA9IHRydWU7XG4gICAgICByZXR1cm4gUG9zKGRvYy5maXJzdCwgMCk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVQb3MoZG9jLCBwb3MsIGRpciwgbGluZSkge1xuICAgIGlmIChkaXIgPCAwICYmIHBvcy5jaCA9PSAwKSB7XG4gICAgICBpZiAocG9zLmxpbmUgPiBkb2MuZmlyc3QpIHJldHVybiBjbGlwUG9zKGRvYywgUG9zKHBvcy5saW5lIC0gMSkpO1xuICAgICAgZWxzZSByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGRpciA+IDAgJiYgcG9zLmNoID09IChsaW5lIHx8IGdldExpbmUoZG9jLCBwb3MubGluZSkpLnRleHQubGVuZ3RoKSB7XG4gICAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpIHJldHVybiBQb3MocG9zLmxpbmUgKyAxLCAwKTtcbiAgICAgIGVsc2UgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUG9zKHBvcy5saW5lLCBwb3MuY2ggKyBkaXIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNFTEVDVElPTiBEUkFXSU5HXG5cbiAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKGNtKSB7XG4gICAgY20uZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKGNtLmRpc3BsYXkuaW5wdXQucHJlcGFyZVNlbGVjdGlvbigpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3Rpb24oY20sIHByaW1hcnkpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCByZXN1bHQgPSB7fTtcbiAgICB2YXIgY3VyRnJhZ21lbnQgPSByZXN1bHQuY3Vyc29ycyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB2YXIgc2VsRnJhZ21lbnQgPSByZXN1bHQuc2VsZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByaW1hcnkgPT09IGZhbHNlICYmIGkgPT0gZG9jLnNlbC5wcmltSW5kZXgpIGNvbnRpbnVlO1xuICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV07XG4gICAgICBpZiAocmFuZ2UuZnJvbSgpLmxpbmUgPj0gY20uZGlzcGxheS52aWV3VG8gfHwgcmFuZ2UudG8oKS5saW5lIDwgY20uZGlzcGxheS52aWV3RnJvbSkgY29udGludWU7XG4gICAgICB2YXIgY29sbGFwc2VkID0gcmFuZ2UuZW1wdHkoKTtcbiAgICAgIGlmIChjb2xsYXBzZWQgfHwgY20ub3B0aW9ucy5zaG93Q3Vyc29yV2hlblNlbGVjdGluZylcbiAgICAgICAgZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgcmFuZ2UuaGVhZCwgY3VyRnJhZ21lbnQpO1xuICAgICAgaWYgKCFjb2xsYXBzZWQpXG4gICAgICAgIGRyYXdTZWxlY3Rpb25SYW5nZShjbSwgcmFuZ2UsIHNlbEZyYWdtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIERyYXdzIGEgY3Vyc29yIGZvciB0aGUgZ2l2ZW4gcmFuZ2VcbiAgZnVuY3Rpb24gZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgaGVhZCwgb3V0cHV0KSB7XG4gICAgdmFyIHBvcyA9IGN1cnNvckNvb3JkcyhjbSwgaGVhZCwgXCJkaXZcIiwgbnVsbCwgbnVsbCwgIWNtLm9wdGlvbnMuc2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZSk7XG5cbiAgICB2YXIgY3Vyc29yID0gb3V0cHV0LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBcIlxcdTAwYTBcIiwgXCJDb2RlTWlycm9yLWN1cnNvclwiKSk7XG4gICAgY3Vyc29yLnN0eWxlLmxlZnQgPSBwb3MubGVmdCArIFwicHhcIjtcbiAgICBjdXJzb3Iuc3R5bGUudG9wID0gcG9zLnRvcCArIFwicHhcIjtcbiAgICBjdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoMCwgcG9zLmJvdHRvbSAtIHBvcy50b3ApICogY20ub3B0aW9ucy5jdXJzb3JIZWlnaHQgKyBcInB4XCI7XG5cbiAgICBpZiAocG9zLm90aGVyKSB7XG4gICAgICAvLyBTZWNvbmRhcnkgY3Vyc29yLCBzaG93biB3aGVuIG9uIGEgJ2p1bXAnIGluIGJpLWRpcmVjdGlvbmFsIHRleHRcbiAgICAgIHZhciBvdGhlckN1cnNvciA9IG91dHB1dC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgXCJcXHUwMGEwXCIsIFwiQ29kZU1pcnJvci1jdXJzb3IgQ29kZU1pcnJvci1zZWNvbmRhcnljdXJzb3JcIikpO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS5sZWZ0ID0gcG9zLm90aGVyLmxlZnQgKyBcInB4XCI7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS50b3AgPSBwb3Mub3RoZXIudG9wICsgXCJweFwiO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gKHBvcy5vdGhlci5ib3R0b20gLSBwb3Mub3RoZXIudG9wKSAqIC44NSArIFwicHhcIjtcbiAgICB9XG4gIH1cblxuICAvLyBEcmF3cyB0aGUgZ2l2ZW4gcmFuZ2UgYXMgYSBoaWdobGlnaHRlZCBzZWxlY3Rpb25cbiAgZnVuY3Rpb24gZHJhd1NlbGVjdGlvblJhbmdlKGNtLCByYW5nZSwgb3V0cHV0KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHZhciBwYWRkaW5nID0gcGFkZGluZ0goY20uZGlzcGxheSksIGxlZnRTaWRlID0gcGFkZGluZy5sZWZ0O1xuICAgIHZhciByaWdodFNpZGUgPSBNYXRoLm1heChkaXNwbGF5LnNpemVyV2lkdGgsIGRpc3BsYXlXaWR0aChjbSkgLSBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQpIC0gcGFkZGluZy5yaWdodDtcblxuICAgIGZ1bmN0aW9uIGFkZChsZWZ0LCB0b3AsIHdpZHRoLCBib3R0b20pIHtcbiAgICAgIGlmICh0b3AgPCAwKSB0b3AgPSAwO1xuICAgICAgdG9wID0gTWF0aC5yb3VuZCh0b3ApO1xuICAgICAgYm90dG9tID0gTWF0aC5yb3VuZChib3R0b20pO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1zZWxlY3RlZFwiLCBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogXCIgKyBsZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyB0b3A6IFwiICsgdG9wICsgXCJweDsgd2lkdGg6IFwiICsgKHdpZHRoID09IG51bGwgPyByaWdodFNpZGUgLSBsZWZ0IDogd2lkdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyBoZWlnaHQ6IFwiICsgKGJvdHRvbSAtIHRvcCkgKyBcInB4XCIpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkcmF3Rm9yTGluZShsaW5lLCBmcm9tQXJnLCB0b0FyZykge1xuICAgICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZSk7XG4gICAgICB2YXIgbGluZUxlbiA9IGxpbmVPYmoudGV4dC5sZW5ndGg7XG4gICAgICB2YXIgc3RhcnQsIGVuZDtcbiAgICAgIGZ1bmN0aW9uIGNvb3JkcyhjaCwgYmlhcykge1xuICAgICAgICByZXR1cm4gY2hhckNvb3JkcyhjbSwgUG9zKGxpbmUsIGNoKSwgXCJkaXZcIiwgbGluZU9iaiwgYmlhcyk7XG4gICAgICB9XG5cbiAgICAgIGl0ZXJhdGVCaWRpU2VjdGlvbnMoZ2V0T3JkZXIobGluZU9iaiksIGZyb21BcmcgfHwgMCwgdG9BcmcgPT0gbnVsbCA/IGxpbmVMZW4gOiB0b0FyZywgZnVuY3Rpb24oZnJvbSwgdG8sIGRpcikge1xuICAgICAgICB2YXIgbGVmdFBvcyA9IGNvb3Jkcyhmcm9tLCBcImxlZnRcIiksIHJpZ2h0UG9zLCBsZWZ0LCByaWdodDtcbiAgICAgICAgaWYgKGZyb20gPT0gdG8pIHtcbiAgICAgICAgICByaWdodFBvcyA9IGxlZnRQb3M7XG4gICAgICAgICAgbGVmdCA9IHJpZ2h0ID0gbGVmdFBvcy5sZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJpZ2h0UG9zID0gY29vcmRzKHRvIC0gMSwgXCJyaWdodFwiKTtcbiAgICAgICAgICBpZiAoZGlyID09IFwicnRsXCIpIHsgdmFyIHRtcCA9IGxlZnRQb3M7IGxlZnRQb3MgPSByaWdodFBvczsgcmlnaHRQb3MgPSB0bXA7IH1cbiAgICAgICAgICBsZWZ0ID0gbGVmdFBvcy5sZWZ0O1xuICAgICAgICAgIHJpZ2h0ID0gcmlnaHRQb3MucmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyb21BcmcgPT0gbnVsbCAmJiBmcm9tID09IDApIGxlZnQgPSBsZWZ0U2lkZTtcbiAgICAgICAgaWYgKHJpZ2h0UG9zLnRvcCAtIGxlZnRQb3MudG9wID4gMykgeyAvLyBEaWZmZXJlbnQgbGluZXMsIGRyYXcgdG9wIHBhcnRcbiAgICAgICAgICBhZGQobGVmdCwgbGVmdFBvcy50b3AsIG51bGwsIGxlZnRQb3MuYm90dG9tKTtcbiAgICAgICAgICBsZWZ0ID0gbGVmdFNpZGU7XG4gICAgICAgICAgaWYgKGxlZnRQb3MuYm90dG9tIDwgcmlnaHRQb3MudG9wKSBhZGQobGVmdCwgbGVmdFBvcy5ib3R0b20sIG51bGwsIHJpZ2h0UG9zLnRvcCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvQXJnID09IG51bGwgJiYgdG8gPT0gbGluZUxlbikgcmlnaHQgPSByaWdodFNpZGU7XG4gICAgICAgIGlmICghc3RhcnQgfHwgbGVmdFBvcy50b3AgPCBzdGFydC50b3AgfHwgbGVmdFBvcy50b3AgPT0gc3RhcnQudG9wICYmIGxlZnRQb3MubGVmdCA8IHN0YXJ0LmxlZnQpXG4gICAgICAgICAgc3RhcnQgPSBsZWZ0UG9zO1xuICAgICAgICBpZiAoIWVuZCB8fCByaWdodFBvcy5ib3R0b20gPiBlbmQuYm90dG9tIHx8IHJpZ2h0UG9zLmJvdHRvbSA9PSBlbmQuYm90dG9tICYmIHJpZ2h0UG9zLnJpZ2h0ID4gZW5kLnJpZ2h0KVxuICAgICAgICAgIGVuZCA9IHJpZ2h0UG9zO1xuICAgICAgICBpZiAobGVmdCA8IGxlZnRTaWRlICsgMSkgbGVmdCA9IGxlZnRTaWRlO1xuICAgICAgICBhZGQobGVmdCwgcmlnaHRQb3MudG9wLCByaWdodCAtIGxlZnQsIHJpZ2h0UG9zLmJvdHRvbSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZH07XG4gICAgfVxuXG4gICAgdmFyIHNGcm9tID0gcmFuZ2UuZnJvbSgpLCBzVG8gPSByYW5nZS50bygpO1xuICAgIGlmIChzRnJvbS5saW5lID09IHNUby5saW5lKSB7XG4gICAgICBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc1RvLmNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZyb21MaW5lID0gZ2V0TGluZShkb2MsIHNGcm9tLmxpbmUpLCB0b0xpbmUgPSBnZXRMaW5lKGRvYywgc1RvLmxpbmUpO1xuICAgICAgdmFyIHNpbmdsZVZMaW5lID0gdmlzdWFsTGluZShmcm9tTGluZSkgPT0gdmlzdWFsTGluZSh0b0xpbmUpO1xuICAgICAgdmFyIGxlZnRFbmQgPSBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc2luZ2xlVkxpbmUgPyBmcm9tTGluZS50ZXh0Lmxlbmd0aCArIDEgOiBudWxsKS5lbmQ7XG4gICAgICB2YXIgcmlnaHRTdGFydCA9IGRyYXdGb3JMaW5lKHNUby5saW5lLCBzaW5nbGVWTGluZSA/IDAgOiBudWxsLCBzVG8uY2gpLnN0YXJ0O1xuICAgICAgaWYgKHNpbmdsZVZMaW5lKSB7XG4gICAgICAgIGlmIChsZWZ0RW5kLnRvcCA8IHJpZ2h0U3RhcnQudG9wIC0gMikge1xuICAgICAgICAgIGFkZChsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLnRvcCwgbnVsbCwgbGVmdEVuZC5ib3R0b20pO1xuICAgICAgICAgIGFkZChsZWZ0U2lkZSwgcmlnaHRTdGFydC50b3AsIHJpZ2h0U3RhcnQubGVmdCwgcmlnaHRTdGFydC5ib3R0b20pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZChsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLnRvcCwgcmlnaHRTdGFydC5sZWZ0IC0gbGVmdEVuZC5yaWdodCwgbGVmdEVuZC5ib3R0b20pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGVmdEVuZC5ib3R0b20gPCByaWdodFN0YXJ0LnRvcClcbiAgICAgICAgYWRkKGxlZnRTaWRlLCBsZWZ0RW5kLmJvdHRvbSwgbnVsbCwgcmlnaHRTdGFydC50b3ApO1xuICAgIH1cblxuICAgIG91dHB1dC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH1cblxuICAvLyBDdXJzb3ItYmxpbmtpbmdcbiAgZnVuY3Rpb24gcmVzdGFydEJsaW5rKGNtKSB7XG4gICAgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSByZXR1cm47XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGNsZWFySW50ZXJ2YWwoZGlzcGxheS5ibGlua2VyKTtcbiAgICB2YXIgb24gPSB0cnVlO1xuICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuICAgIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA+IDApXG4gICAgICBkaXNwbGF5LmJsaW5rZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IChvbiA9ICFvbikgPyBcIlwiIDogXCJoaWRkZW5cIjtcbiAgICAgIH0sIGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlKTtcbiAgICBlbHNlIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA8IDApXG4gICAgICBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgfVxuXG4gIC8vIEhJR0hMSUdIVCBXT1JLRVJcblxuICBmdW5jdGlvbiBzdGFydFdvcmtlcihjbSwgdGltZSkge1xuICAgIGlmIChjbS5kb2MubW9kZS5zdGFydFN0YXRlICYmIGNtLmRvYy5mcm9udGllciA8IGNtLmRpc3BsYXkudmlld1RvKVxuICAgICAgY20uc3RhdGUuaGlnaGxpZ2h0LnNldCh0aW1lLCBiaW5kKGhpZ2hsaWdodFdvcmtlciwgY20pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodFdvcmtlcihjbSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2M7XG4gICAgaWYgKGRvYy5mcm9udGllciA8IGRvYy5maXJzdCkgZG9jLmZyb250aWVyID0gZG9jLmZpcnN0O1xuICAgIGlmIChkb2MuZnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3VG8pIHJldHVybjtcbiAgICB2YXIgZW5kID0gK25ldyBEYXRlICsgY20ub3B0aW9ucy53b3JrVGltZTtcbiAgICB2YXIgc3RhdGUgPSBjb3B5U3RhdGUoZG9jLm1vZGUsIGdldFN0YXRlQmVmb3JlKGNtLCBkb2MuZnJvbnRpZXIpKTtcbiAgICB2YXIgY2hhbmdlZExpbmVzID0gW107XG5cbiAgICBkb2MuaXRlcihkb2MuZnJvbnRpZXIsIE1hdGgubWluKGRvYy5maXJzdCArIGRvYy5zaXplLCBjbS5kaXNwbGF5LnZpZXdUbyArIDUwMCksIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChkb2MuZnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3RnJvbSkgeyAvLyBWaXNpYmxlXG4gICAgICAgIHZhciBvbGRTdHlsZXMgPSBsaW5lLnN0eWxlcywgdG9vTG9uZyA9IGxpbmUudGV4dC5sZW5ndGggPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aDtcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkID0gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwgdG9vTG9uZyA/IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpIDogc3RhdGUsIHRydWUpO1xuICAgICAgICBsaW5lLnN0eWxlcyA9IGhpZ2hsaWdodGVkLnN0eWxlcztcbiAgICAgICAgdmFyIG9sZENscyA9IGxpbmUuc3R5bGVDbGFzc2VzLCBuZXdDbHMgPSBoaWdobGlnaHRlZC5jbGFzc2VzO1xuICAgICAgICBpZiAobmV3Q2xzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IG5ld0NscztcbiAgICAgICAgZWxzZSBpZiAob2xkQ2xzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IG51bGw7XG4gICAgICAgIHZhciBpc2NoYW5nZSA9ICFvbGRTdHlsZXMgfHwgb2xkU3R5bGVzLmxlbmd0aCAhPSBsaW5lLnN0eWxlcy5sZW5ndGggfHxcbiAgICAgICAgICBvbGRDbHMgIT0gbmV3Q2xzICYmICghb2xkQ2xzIHx8ICFuZXdDbHMgfHwgb2xkQ2xzLmJnQ2xhc3MgIT0gbmV3Q2xzLmJnQ2xhc3MgfHwgb2xkQ2xzLnRleHRDbGFzcyAhPSBuZXdDbHMudGV4dENsYXNzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7ICFpc2NoYW5nZSAmJiBpIDwgb2xkU3R5bGVzLmxlbmd0aDsgKytpKSBpc2NoYW5nZSA9IG9sZFN0eWxlc1tpXSAhPSBsaW5lLnN0eWxlc1tpXTtcbiAgICAgICAgaWYgKGlzY2hhbmdlKSBjaGFuZ2VkTGluZXMucHVzaChkb2MuZnJvbnRpZXIpO1xuICAgICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSB0b29Mb25nID8gc3RhdGUgOiBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChsaW5lLnRleHQubGVuZ3RoIDw9IGNtLm9wdGlvbnMubWF4SGlnaGxpZ2h0TGVuZ3RoKVxuICAgICAgICAgIHByb2Nlc3NMaW5lKGNtLCBsaW5lLnRleHQsIHN0YXRlKTtcbiAgICAgICAgbGluZS5zdGF0ZUFmdGVyID0gZG9jLmZyb250aWVyICUgNSA9PSAwID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBudWxsO1xuICAgICAgfVxuICAgICAgKytkb2MuZnJvbnRpZXI7XG4gICAgICBpZiAoK25ldyBEYXRlID4gZW5kKSB7XG4gICAgICAgIHN0YXJ0V29ya2VyKGNtLCBjbS5vcHRpb25zLndvcmtEZWxheSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjaGFuZ2VkTGluZXMubGVuZ3RoKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlZExpbmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICByZWdMaW5lQ2hhbmdlKGNtLCBjaGFuZ2VkTGluZXNbaV0sIFwidGV4dFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZpbmRzIHRoZSBsaW5lIHRvIHN0YXJ0IHdpdGggd2hlbiBzdGFydGluZyBhIHBhcnNlLiBUcmllcyB0b1xuICAvLyBmaW5kIGEgbGluZSB3aXRoIGEgc3RhdGVBZnRlciwgc28gdGhhdCBpdCBjYW4gc3RhcnQgd2l0aCBhXG4gIC8vIHZhbGlkIHN0YXRlLiBJZiB0aGF0IGZhaWxzLCBpdCByZXR1cm5zIHRoZSBsaW5lIHdpdGggdGhlXG4gIC8vIHNtYWxsZXN0IGluZGVudGF0aW9uLCB3aGljaCB0ZW5kcyB0byBuZWVkIHRoZSBsZWFzdCBjb250ZXh0IHRvXG4gIC8vIHBhcnNlIGNvcnJlY3RseS5cbiAgZnVuY3Rpb24gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSkge1xuICAgIHZhciBtaW5pbmRlbnQsIG1pbmxpbmUsIGRvYyA9IGNtLmRvYztcbiAgICB2YXIgbGltID0gcHJlY2lzZSA/IC0xIDogbiAtIChjbS5kb2MubW9kZS5pbm5lck1vZGUgPyAxMDAwIDogMTAwKTtcbiAgICBmb3IgKHZhciBzZWFyY2ggPSBuOyBzZWFyY2ggPiBsaW07IC0tc2VhcmNoKSB7XG4gICAgICBpZiAoc2VhcmNoIDw9IGRvYy5maXJzdCkgcmV0dXJuIGRvYy5maXJzdDtcbiAgICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHNlYXJjaCAtIDEpO1xuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlciAmJiAoIXByZWNpc2UgfHwgc2VhcmNoIDw9IGRvYy5mcm9udGllcikpIHJldHVybiBzZWFyY2g7XG4gICAgICB2YXIgaW5kZW50ZWQgPSBjb3VudENvbHVtbihsaW5lLnRleHQsIG51bGwsIGNtLm9wdGlvbnMudGFiU2l6ZSk7XG4gICAgICBpZiAobWlubGluZSA9PSBudWxsIHx8IG1pbmluZGVudCA+IGluZGVudGVkKSB7XG4gICAgICAgIG1pbmxpbmUgPSBzZWFyY2ggLSAxO1xuICAgICAgICBtaW5pbmRlbnQgPSBpbmRlbnRlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pbmxpbmU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTdGF0ZUJlZm9yZShjbSwgbiwgcHJlY2lzZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmICghZG9jLm1vZGUuc3RhcnRTdGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgdmFyIHBvcyA9IGZpbmRTdGFydExpbmUoY20sIG4sIHByZWNpc2UpLCBzdGF0ZSA9IHBvcyA+IGRvYy5maXJzdCAmJiBnZXRMaW5lKGRvYywgcG9zLTEpLnN0YXRlQWZ0ZXI7XG4gICAgaWYgKCFzdGF0ZSkgc3RhdGUgPSBzdGFydFN0YXRlKGRvYy5tb2RlKTtcbiAgICBlbHNlIHN0YXRlID0gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSk7XG4gICAgZG9jLml0ZXIocG9zLCBuLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBwcm9jZXNzTGluZShjbSwgbGluZS50ZXh0LCBzdGF0ZSk7XG4gICAgICB2YXIgc2F2ZSA9IHBvcyA9PSBuIC0gMSB8fCBwb3MgJSA1ID09IDAgfHwgcG9zID49IGRpc3BsYXkudmlld0Zyb20gJiYgcG9zIDwgZGlzcGxheS52aWV3VG87XG4gICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBzYXZlID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBudWxsO1xuICAgICAgKytwb3M7XG4gICAgfSk7XG4gICAgaWYgKHByZWNpc2UpIGRvYy5mcm9udGllciA9IHBvcztcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvLyBQT1NJVElPTiBNRUFTVVJFTUVOVFxuXG4gIGZ1bmN0aW9uIHBhZGRpbmdUb3AoZGlzcGxheSkge3JldHVybiBkaXNwbGF5LmxpbmVTcGFjZS5vZmZzZXRUb3A7fVxuICBmdW5jdGlvbiBwYWRkaW5nVmVydChkaXNwbGF5KSB7cmV0dXJuIGRpc3BsYXkubW92ZXIub2Zmc2V0SGVpZ2h0IC0gZGlzcGxheS5saW5lU3BhY2Uub2Zmc2V0SGVpZ2h0O31cbiAgZnVuY3Rpb24gcGFkZGluZ0goZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZFBhZGRpbmdIKSByZXR1cm4gZGlzcGxheS5jYWNoZWRQYWRkaW5nSDtcbiAgICB2YXIgZSA9IHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgZWx0KFwicHJlXCIsIFwieFwiKSk7XG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlKSA6IGUuY3VycmVudFN0eWxlO1xuICAgIHZhciBkYXRhID0ge2xlZnQ6IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdMZWZ0KSwgcmlnaHQ6IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdSaWdodCl9O1xuICAgIGlmICghaXNOYU4oZGF0YS5sZWZ0KSAmJiAhaXNOYU4oZGF0YS5yaWdodCkpIGRpc3BsYXkuY2FjaGVkUGFkZGluZ0ggPSBkYXRhO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsR2FwKGNtKSB7IHJldHVybiBzY3JvbGxlckdhcCAtIGNtLmRpc3BsYXkubmF0aXZlQmFyV2lkdGg7IH1cbiAgZnVuY3Rpb24gZGlzcGxheVdpZHRoKGNtKSB7XG4gICAgcmV0dXJuIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGggLSBzY3JvbGxHYXAoY20pIC0gY20uZGlzcGxheS5iYXJXaWR0aDtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVpZ2h0KGNtKSB7XG4gICAgcmV0dXJuIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0IC0gc2Nyb2xsR2FwKGNtKSAtIGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICB9XG5cbiAgLy8gRW5zdXJlIHRoZSBsaW5lVmlldy53cmFwcGluZy5oZWlnaHRzIGFycmF5IGlzIHBvcHVsYXRlZC4gVGhpcyBpc1xuICAvLyBhbiBhcnJheSBvZiBib3R0b20gb2Zmc2V0cyBmb3IgdGhlIGxpbmVzIHRoYXQgbWFrZSB1cCBhIGRyYXduXG4gIC8vIGxpbmUuIFdoZW4gbGluZVdyYXBwaW5nIGlzIG9uLCB0aGVyZSBtaWdodCBiZSBtb3JlIHRoYW4gb25lXG4gIC8vIGhlaWdodC5cbiAgZnVuY3Rpb24gZW5zdXJlTGluZUhlaWdodHMoY20sIGxpbmVWaWV3LCByZWN0KSB7XG4gICAgdmFyIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIGN1cldpZHRoID0gd3JhcHBpbmcgJiYgZGlzcGxheVdpZHRoKGNtKTtcbiAgICBpZiAoIWxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyB8fCB3cmFwcGluZyAmJiBsaW5lVmlldy5tZWFzdXJlLndpZHRoICE9IGN1cldpZHRoKSB7XG4gICAgICB2YXIgaGVpZ2h0cyA9IGxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyA9IFtdO1xuICAgICAgaWYgKHdyYXBwaW5nKSB7XG4gICAgICAgIGxpbmVWaWV3Lm1lYXN1cmUud2lkdGggPSBjdXJXaWR0aDtcbiAgICAgICAgdmFyIHJlY3RzID0gbGluZVZpZXcudGV4dC5maXJzdENoaWxkLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgdmFyIGN1ciA9IHJlY3RzW2ldLCBuZXh0ID0gcmVjdHNbaSArIDFdO1xuICAgICAgICAgIGlmIChNYXRoLmFicyhjdXIuYm90dG9tIC0gbmV4dC5ib3R0b20pID4gMilcbiAgICAgICAgICAgIGhlaWdodHMucHVzaCgoY3VyLmJvdHRvbSArIG5leHQudG9wKSAvIDIgLSByZWN0LnRvcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGhlaWdodHMucHVzaChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTtcbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIGEgbGluZSBtYXAgKG1hcHBpbmcgY2hhcmFjdGVyIG9mZnNldHMgdG8gdGV4dCBub2RlcykgYW5kIGFcbiAgLy8gbWVhc3VyZW1lbnQgY2FjaGUgZm9yIHRoZSBnaXZlbiBsaW5lIG51bWJlci4gKEEgbGluZSB2aWV3IG1pZ2h0XG4gIC8vIGNvbnRhaW4gbXVsdGlwbGUgbGluZXMgd2hlbiBjb2xsYXBzZWQgcmFuZ2VzIGFyZSBwcmVzZW50LilcbiAgZnVuY3Rpb24gbWFwRnJvbUxpbmVWaWV3KGxpbmVWaWV3LCBsaW5lLCBsaW5lTikge1xuICAgIGlmIChsaW5lVmlldy5saW5lID09IGxpbmUpXG4gICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXAsIGNhY2hlOiBsaW5lVmlldy5tZWFzdXJlLmNhY2hlfTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICBpZiAobGluZVZpZXcucmVzdFtpXSA9PSBsaW5lKVxuICAgICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXBzW2ldLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV19O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgIGlmIChsaW5lTm8obGluZVZpZXcucmVzdFtpXSkgPiBsaW5lTilcbiAgICAgICAgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldLCBiZWZvcmU6IHRydWV9O1xuICB9XG5cbiAgLy8gUmVuZGVyIGEgbGluZSBpbnRvIHRoZSBoaWRkZW4gbm9kZSBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQuIFVzZWRcbiAgLy8gd2hlbiBtZWFzdXJlbWVudCBpcyBuZWVkZWQgZm9yIGEgbGluZSB0aGF0J3Mgbm90IGluIHRoZSB2aWV3cG9ydC5cbiAgZnVuY3Rpb24gdXBkYXRlRXh0ZXJuYWxNZWFzdXJlbWVudChjbSwgbGluZSkge1xuICAgIGxpbmUgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIHZhciBsaW5lTiA9IGxpbmVObyhsaW5lKTtcbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG5ldyBMaW5lVmlldyhjbS5kb2MsIGxpbmUsIGxpbmVOKTtcbiAgICB2aWV3LmxpbmVOID0gbGluZU47XG4gICAgdmFyIGJ1aWx0ID0gdmlldy5idWlsdCA9IGJ1aWxkTGluZUNvbnRlbnQoY20sIHZpZXcpO1xuICAgIHZpZXcudGV4dCA9IGJ1aWx0LnByZTtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmxpbmVNZWFzdXJlLCBidWlsdC5wcmUpO1xuICAgIHJldHVybiB2aWV3O1xuICB9XG5cbiAgLy8gR2V0IGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IChpbiBsaW5lLWxvY2FsIGNvb3JkaW5hdGVzKVxuICAvLyBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIuXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFyKGNtLCBsaW5lLCBjaCwgYmlhcykge1xuICAgIHJldHVybiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpLCBjaCwgYmlhcyk7XG4gIH1cblxuICAvLyBGaW5kIGEgbGluZSB2aWV3IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLlxuICBmdW5jdGlvbiBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKSB7XG4gICAgaWYgKGxpbmVOID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgbGluZU4gPCBjbS5kaXNwbGF5LnZpZXdUbylcbiAgICAgIHJldHVybiBjbS5kaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZU4pXTtcbiAgICB2YXIgZXh0ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQgJiYgbGluZU4gPj0gZXh0LmxpbmVOICYmIGxpbmVOIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICByZXR1cm4gZXh0O1xuICB9XG5cbiAgLy8gTWVhc3VyZW1lbnQgY2FuIGJlIHNwbGl0IGluIHR3byBzdGVwcywgdGhlIHNldC11cCB3b3JrIHRoYXRcbiAgLy8gYXBwbGllcyB0byB0aGUgd2hvbGUgbGluZSwgYW5kIHRoZSBtZWFzdXJlbWVudCBvZiB0aGUgYWN0dWFsXG4gIC8vIGNoYXJhY3Rlci4gRnVuY3Rpb25zIGxpa2UgY29vcmRzQ2hhciwgdGhhdCBuZWVkIHRvIGRvIGEgbG90IG9mXG4gIC8vIG1lYXN1cmVtZW50cyBpbiBhIHJvdywgY2FuIHRodXMgZW5zdXJlIHRoYXQgdGhlIHNldC11cCB3b3JrIGlzXG4gIC8vIG9ubHkgZG9uZSBvbmNlLlxuICBmdW5jdGlvbiBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpIHtcbiAgICB2YXIgbGluZU4gPSBsaW5lTm8obGluZSk7XG4gICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICBpZiAodmlldyAmJiAhdmlldy50ZXh0KSB7XG4gICAgICB2aWV3ID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHZpZXcgJiYgdmlldy5jaGFuZ2VzKSB7XG4gICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgdmlldywgbGluZU4sIGdldERpbWVuc2lvbnMoY20pKTtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF2aWV3KVxuICAgICAgdmlldyA9IHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1lbnQoY20sIGxpbmUpO1xuXG4gICAgdmFyIGluZm8gPSBtYXBGcm9tTGluZVZpZXcodmlldywgbGluZSwgbGluZU4pO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lOiBsaW5lLCB2aWV3OiB2aWV3LCByZWN0OiBudWxsLFxuICAgICAgbWFwOiBpbmZvLm1hcCwgY2FjaGU6IGluZm8uY2FjaGUsIGJlZm9yZTogaW5mby5iZWZvcmUsXG4gICAgICBoYXNIZWlnaHRzOiBmYWxzZVxuICAgIH07XG4gIH1cblxuICAvLyBHaXZlbiBhIHByZXBhcmVkIG1lYXN1cmVtZW50IG9iamVjdCwgbWVhc3VyZXMgdGhlIHBvc2l0aW9uIG9mIGFuXG4gIC8vIGFjdHVhbCBjaGFyYWN0ZXIgKG9yIGZldGNoZXMgaXQgZnJvbSB0aGUgY2FjaGUpLlxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMsIHZhckhlaWdodCkge1xuICAgIGlmIChwcmVwYXJlZC5iZWZvcmUpIGNoID0gLTE7XG4gICAgdmFyIGtleSA9IGNoICsgKGJpYXMgfHwgXCJcIiksIGZvdW5kO1xuICAgIGlmIChwcmVwYXJlZC5jYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBmb3VuZCA9IHByZXBhcmVkLmNhY2hlW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghcHJlcGFyZWQucmVjdClcbiAgICAgICAgcHJlcGFyZWQucmVjdCA9IHByZXBhcmVkLnZpZXcudGV4dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmICghcHJlcGFyZWQuaGFzSGVpZ2h0cykge1xuICAgICAgICBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgcHJlcGFyZWQudmlldywgcHJlcGFyZWQucmVjdCk7XG4gICAgICAgIHByZXBhcmVkLmhhc0hlaWdodHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm91bmQgPSBtZWFzdXJlQ2hhcklubmVyKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMpO1xuICAgICAgaWYgKCFmb3VuZC5ib2d1cykgcHJlcGFyZWQuY2FjaGVba2V5XSA9IGZvdW5kO1xuICAgIH1cbiAgICByZXR1cm4ge2xlZnQ6IGZvdW5kLmxlZnQsIHJpZ2h0OiBmb3VuZC5yaWdodCxcbiAgICAgICAgICAgIHRvcDogdmFySGVpZ2h0ID8gZm91bmQucnRvcCA6IGZvdW5kLnRvcCxcbiAgICAgICAgICAgIGJvdHRvbTogdmFySGVpZ2h0ID8gZm91bmQucmJvdHRvbSA6IGZvdW5kLmJvdHRvbX07XG4gIH1cblxuICB2YXIgbnVsbFJlY3QgPSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgYm90dG9tOiAwfTtcblxuICBmdW5jdGlvbiBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKG1hcCwgY2gsIGJpYXMpIHtcbiAgICB2YXIgbm9kZSwgc3RhcnQsIGVuZCwgY29sbGFwc2U7XG4gICAgLy8gRmlyc3QsIHNlYXJjaCB0aGUgbGluZSBtYXAgZm9yIHRoZSB0ZXh0IG5vZGUgY29ycmVzcG9uZGluZyB0byxcbiAgICAvLyBvciBjbG9zZXN0IHRvLCB0aGUgdGFyZ2V0IGNoYXJhY3Rlci5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgdmFyIG1TdGFydCA9IG1hcFtpXSwgbUVuZCA9IG1hcFtpICsgMV07XG4gICAgICBpZiAoY2ggPCBtU3RhcnQpIHtcbiAgICAgICAgc3RhcnQgPSAwOyBlbmQgPSAxO1xuICAgICAgICBjb2xsYXBzZSA9IFwibGVmdFwiO1xuICAgICAgfSBlbHNlIGlmIChjaCA8IG1FbmQpIHtcbiAgICAgICAgc3RhcnQgPSBjaCAtIG1TdGFydDtcbiAgICAgICAgZW5kID0gc3RhcnQgKyAxO1xuICAgICAgfSBlbHNlIGlmIChpID09IG1hcC5sZW5ndGggLSAzIHx8IGNoID09IG1FbmQgJiYgbWFwW2kgKyAzXSA+IGNoKSB7XG4gICAgICAgIGVuZCA9IG1FbmQgLSBtU3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gZW5kIC0gMTtcbiAgICAgICAgaWYgKGNoID49IG1FbmQpIGNvbGxhcHNlID0gXCJyaWdodFwiO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgbm9kZSA9IG1hcFtpICsgMl07XG4gICAgICAgIGlmIChtU3RhcnQgPT0gbUVuZCAmJiBiaWFzID09IChub2RlLmluc2VydExlZnQgPyBcImxlZnRcIiA6IFwicmlnaHRcIikpXG4gICAgICAgICAgY29sbGFwc2UgPSBiaWFzO1xuICAgICAgICBpZiAoYmlhcyA9PSBcImxlZnRcIiAmJiBzdGFydCA9PSAwKVxuICAgICAgICAgIHdoaWxlIChpICYmIG1hcFtpIC0gMl0gPT0gbWFwW2kgLSAzXSAmJiBtYXBbaSAtIDFdLmluc2VydExlZnQpIHtcbiAgICAgICAgICAgIG5vZGUgPSBtYXBbKGkgLT0gMykgKyAyXTtcbiAgICAgICAgICAgIGNvbGxhcHNlID0gXCJsZWZ0XCI7XG4gICAgICAgICAgfVxuICAgICAgICBpZiAoYmlhcyA9PSBcInJpZ2h0XCIgJiYgc3RhcnQgPT0gbUVuZCAtIG1TdGFydClcbiAgICAgICAgICB3aGlsZSAoaSA8IG1hcC5sZW5ndGggLSAzICYmIG1hcFtpICsgM10gPT0gbWFwW2kgKyA0XSAmJiAhbWFwW2kgKyA1XS5pbnNlcnRMZWZ0KSB7XG4gICAgICAgICAgICBub2RlID0gbWFwWyhpICs9IDMpICsgMl07XG4gICAgICAgICAgICBjb2xsYXBzZSA9IFwicmlnaHRcIjtcbiAgICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge25vZGU6IG5vZGUsIHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQsIGNvbGxhcHNlOiBjb2xsYXBzZSwgY292ZXJTdGFydDogbVN0YXJ0LCBjb3ZlckVuZDogbUVuZH07XG4gIH1cblxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhcklubmVyKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMpIHtcbiAgICB2YXIgcGxhY2UgPSBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKHByZXBhcmVkLm1hcCwgY2gsIGJpYXMpO1xuICAgIHZhciBub2RlID0gcGxhY2Uubm9kZSwgc3RhcnQgPSBwbGFjZS5zdGFydCwgZW5kID0gcGxhY2UuZW5kLCBjb2xsYXBzZSA9IHBsYWNlLmNvbGxhcHNlO1xuXG4gICAgdmFyIHJlY3Q7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykgeyAvLyBJZiBpdCBpcyBhIHRleHQgbm9kZSwgdXNlIGEgcmFuZ2UgdG8gcmV0cmlldmUgdGhlIGNvb3JkaW5hdGVzLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsgLy8gUmV0cnkgYSBtYXhpbXVtIG9mIDQgdGltZXMgd2hlbiBub25zZW5zZSByZWN0YW5nbGVzIGFyZSByZXR1cm5lZFxuICAgICAgICB3aGlsZSAoc3RhcnQgJiYgaXNFeHRlbmRpbmdDaGFyKHByZXBhcmVkLmxpbmUudGV4dC5jaGFyQXQocGxhY2UuY292ZXJTdGFydCArIHN0YXJ0KSkpIC0tc3RhcnQ7XG4gICAgICAgIHdoaWxlIChwbGFjZS5jb3ZlclN0YXJ0ICsgZW5kIDwgcGxhY2UuY292ZXJFbmQgJiYgaXNFeHRlbmRpbmdDaGFyKHByZXBhcmVkLmxpbmUudGV4dC5jaGFyQXQocGxhY2UuY292ZXJTdGFydCArIGVuZCkpKSArK2VuZDtcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5ICYmIHN0YXJ0ID09IDAgJiYgZW5kID09IHBsYWNlLmNvdmVyRW5kIC0gcGxhY2UuY292ZXJTdGFydCkge1xuICAgICAgICAgIHJlY3QgPSBub2RlLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaWUgJiYgY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgICB2YXIgcmVjdHMgPSByYW5nZShub2RlLCBzdGFydCwgZW5kKS5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICAgIGlmIChyZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICByZWN0ID0gcmVjdHNbYmlhcyA9PSBcInJpZ2h0XCIgPyByZWN0cy5sZW5ndGggLSAxIDogMF07XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVjdCA9IG51bGxSZWN0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlY3QgPSByYW5nZShub2RlLCBzdGFydCwgZW5kKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSB8fCBudWxsUmVjdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjdC5sZWZ0IHx8IHJlY3QucmlnaHQgfHwgc3RhcnQgPT0gMCkgYnJlYWs7XG4gICAgICAgIGVuZCA9IHN0YXJ0O1xuICAgICAgICBzdGFydCA9IHN0YXJ0IC0gMTtcbiAgICAgICAgY29sbGFwc2UgPSBcInJpZ2h0XCI7XG4gICAgICB9XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSByZWN0ID0gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhjbS5kaXNwbGF5Lm1lYXN1cmUsIHJlY3QpO1xuICAgIH0gZWxzZSB7IC8vIElmIGl0IGlzIGEgd2lkZ2V0LCBzaW1wbHkgZ2V0IHRoZSBib3ggZm9yIHRoZSB3aG9sZSB3aWRnZXQuXG4gICAgICBpZiAoc3RhcnQgPiAwKSBjb2xsYXBzZSA9IGJpYXMgPSBcInJpZ2h0XCI7XG4gICAgICB2YXIgcmVjdHM7XG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgKHJlY3RzID0gbm9kZS5nZXRDbGllbnRSZWN0cygpKS5sZW5ndGggPiAxKVxuICAgICAgICByZWN0ID0gcmVjdHNbYmlhcyA9PSBcInJpZ2h0XCIgPyByZWN0cy5sZW5ndGggLSAxIDogMF07XG4gICAgICBlbHNlXG4gICAgICAgIHJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkgJiYgIXN0YXJ0ICYmICghcmVjdCB8fCAhcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSkge1xuICAgICAgdmFyIHJTcGFuID0gbm9kZS5wYXJlbnROb2RlLmdldENsaWVudFJlY3RzKClbMF07XG4gICAgICBpZiAoclNwYW4pXG4gICAgICAgIHJlY3QgPSB7bGVmdDogclNwYW4ubGVmdCwgcmlnaHQ6IHJTcGFuLmxlZnQgKyBjaGFyV2lkdGgoY20uZGlzcGxheSksIHRvcDogclNwYW4udG9wLCBib3R0b206IHJTcGFuLmJvdHRvbX07XG4gICAgICBlbHNlXG4gICAgICAgIHJlY3QgPSBudWxsUmVjdDtcbiAgICB9XG5cbiAgICB2YXIgcnRvcCA9IHJlY3QudG9wIC0gcHJlcGFyZWQucmVjdC50b3AsIHJib3QgPSByZWN0LmJvdHRvbSAtIHByZXBhcmVkLnJlY3QudG9wO1xuICAgIHZhciBtaWQgPSAocnRvcCArIHJib3QpIC8gMjtcbiAgICB2YXIgaGVpZ2h0cyA9IHByZXBhcmVkLnZpZXcubWVhc3VyZS5oZWlnaHRzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVpZ2h0cy5sZW5ndGggLSAxOyBpKyspXG4gICAgICBpZiAobWlkIDwgaGVpZ2h0c1tpXSkgYnJlYWs7XG4gICAgdmFyIHRvcCA9IGkgPyBoZWlnaHRzW2kgLSAxXSA6IDAsIGJvdCA9IGhlaWdodHNbaV07XG4gICAgdmFyIHJlc3VsdCA9IHtsZWZ0OiAoY29sbGFwc2UgPT0gXCJyaWdodFwiID8gcmVjdC5yaWdodCA6IHJlY3QubGVmdCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICByaWdodDogKGNvbGxhcHNlID09IFwibGVmdFwiID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICB0b3A6IHRvcCwgYm90dG9tOiBib3R9O1xuICAgIGlmICghcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSByZXN1bHQuYm9ndXMgPSB0cnVlO1xuICAgIGlmICghY20ub3B0aW9ucy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lKSB7IHJlc3VsdC5ydG9wID0gcnRvcDsgcmVzdWx0LnJib3R0b20gPSByYm90OyB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gV29yayBhcm91bmQgcHJvYmxlbSB3aXRoIGJvdW5kaW5nIGNsaWVudCByZWN0cyBvbiByYW5nZXMgYmVpbmdcbiAgLy8gcmV0dXJuZWQgaW5jb3JyZWN0bHkgd2hlbiB6b29tZWQgb24gSUUxMCBhbmQgYmVsb3cuXG4gIGZ1bmN0aW9uIG1heWJlVXBkYXRlUmVjdEZvclpvb21pbmcobWVhc3VyZSwgcmVjdCkge1xuICAgIGlmICghd2luZG93LnNjcmVlbiB8fCBzY3JlZW4ubG9naWNhbFhEUEkgPT0gbnVsbCB8fFxuICAgICAgICBzY3JlZW4ubG9naWNhbFhEUEkgPT0gc2NyZWVuLmRldmljZVhEUEkgfHwgIWhhc0JhZFpvb21lZFJlY3RzKG1lYXN1cmUpKVxuICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgdmFyIHNjYWxlWCA9IHNjcmVlbi5sb2dpY2FsWERQSSAvIHNjcmVlbi5kZXZpY2VYRFBJO1xuICAgIHZhciBzY2FsZVkgPSBzY3JlZW4ubG9naWNhbFlEUEkgLyBzY3JlZW4uZGV2aWNlWURQSTtcbiAgICByZXR1cm4ge2xlZnQ6IHJlY3QubGVmdCAqIHNjYWxlWCwgcmlnaHQ6IHJlY3QucmlnaHQgKiBzY2FsZVgsXG4gICAgICAgICAgICB0b3A6IHJlY3QudG9wICogc2NhbGVZLCBib3R0b206IHJlY3QuYm90dG9tICogc2NhbGVZfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IobGluZVZpZXcpIHtcbiAgICBpZiAobGluZVZpZXcubWVhc3VyZSkge1xuICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9O1xuICAgICAgbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzID0gbnVsbDtcbiAgICAgIGlmIChsaW5lVmlldy5yZXN0KSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldID0ge307XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZShjbSkge1xuICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlID0gbnVsbDtcbiAgICByZW1vdmVDaGlsZHJlbihjbS5kaXNwbGF5LmxpbmVNZWFzdXJlKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRpc3BsYXkudmlldy5sZW5ndGg7IGkrKylcbiAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IoY20uZGlzcGxheS52aWV3W2ldKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyQ2FjaGVzKGNtKSB7XG4gICAgY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZShjbSk7XG4gICAgY20uZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggPSBjbS5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgPSBjbS5kaXNwbGF5LmNhY2hlZFBhZGRpbmdIID0gbnVsbDtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gdHJ1ZTtcbiAgICBjbS5kaXNwbGF5LmxpbmVOdW1DaGFycyA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBwYWdlU2Nyb2xsWCgpIHsgcmV0dXJuIHdpbmRvdy5wYWdlWE9mZnNldCB8fCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbExlZnQ7IH1cbiAgZnVuY3Rpb24gcGFnZVNjcm9sbFkoKSB7IHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3A7IH1cblxuICAvLyBDb252ZXJ0cyBhIHt0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHR9IGJveCBmcm9tIGxpbmUtbG9jYWxcbiAgLy8gY29vcmRpbmF0ZXMgaW50byBhbm90aGVyIGNvb3JkaW5hdGUgc3lzdGVtLiBDb250ZXh0IG1heSBiZSBvbmUgb2ZcbiAgLy8gXCJsaW5lXCIsIFwiZGl2XCIgKGRpc3BsYXkubGluZURpdiksIFwibG9jYWxcIi9udWxsIChlZGl0b3IpLCBcIndpbmRvd1wiLFxuICAvLyBvciBcInBhZ2VcIi5cbiAgZnVuY3Rpb24gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCByZWN0LCBjb250ZXh0KSB7XG4gICAgaWYgKGxpbmVPYmoud2lkZ2V0cykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lT2JqLndpZGdldHMubGVuZ3RoOyArK2kpIGlmIChsaW5lT2JqLndpZGdldHNbaV0uYWJvdmUpIHtcbiAgICAgIHZhciBzaXplID0gd2lkZ2V0SGVpZ2h0KGxpbmVPYmoud2lkZ2V0c1tpXSk7XG4gICAgICByZWN0LnRvcCArPSBzaXplOyByZWN0LmJvdHRvbSArPSBzaXplO1xuICAgIH1cbiAgICBpZiAoY29udGV4dCA9PSBcImxpbmVcIikgcmV0dXJuIHJlY3Q7XG4gICAgaWYgKCFjb250ZXh0KSBjb250ZXh0ID0gXCJsb2NhbFwiO1xuICAgIHZhciB5T2ZmID0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopO1xuICAgIGlmIChjb250ZXh0ID09IFwibG9jYWxcIikgeU9mZiArPSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpO1xuICAgIGVsc2UgeU9mZiAtPSBjbS5kaXNwbGF5LnZpZXdPZmZzZXQ7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJwYWdlXCIgfHwgY29udGV4dCA9PSBcIndpbmRvd1wiKSB7XG4gICAgICB2YXIgbE9mZiA9IGNtLmRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgeU9mZiArPSBsT2ZmLnRvcCArIChjb250ZXh0ID09IFwid2luZG93XCIgPyAwIDogcGFnZVNjcm9sbFkoKSk7XG4gICAgICB2YXIgeE9mZiA9IGxPZmYubGVmdCArIChjb250ZXh0ID09IFwid2luZG93XCIgPyAwIDogcGFnZVNjcm9sbFgoKSk7XG4gICAgICByZWN0LmxlZnQgKz0geE9mZjsgcmVjdC5yaWdodCArPSB4T2ZmO1xuICAgIH1cbiAgICByZWN0LnRvcCArPSB5T2ZmOyByZWN0LmJvdHRvbSArPSB5T2ZmO1xuICAgIHJldHVybiByZWN0O1xuICB9XG5cbiAgLy8gQ292ZXJ0cyBhIGJveCBmcm9tIFwiZGl2XCIgY29vcmRzIHRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gIC8vIENvbnRleHQgbWF5IGJlIFwid2luZG93XCIsIFwicGFnZVwiLCBcImRpdlwiLCBvciBcImxvY2FsXCIvbnVsbC5cbiAgZnVuY3Rpb24gZnJvbUNvb3JkU3lzdGVtKGNtLCBjb29yZHMsIGNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dCA9PSBcImRpdlwiKSByZXR1cm4gY29vcmRzO1xuICAgIHZhciBsZWZ0ID0gY29vcmRzLmxlZnQsIHRvcCA9IGNvb3Jkcy50b3A7XG4gICAgLy8gRmlyc3QgbW92ZSBpbnRvIFwicGFnZVwiIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgaWYgKGNvbnRleHQgPT0gXCJwYWdlXCIpIHtcbiAgICAgIGxlZnQgLT0gcGFnZVNjcm9sbFgoKTtcbiAgICAgIHRvcCAtPSBwYWdlU2Nyb2xsWSgpO1xuICAgIH0gZWxzZSBpZiAoY29udGV4dCA9PSBcImxvY2FsXCIgfHwgIWNvbnRleHQpIHtcbiAgICAgIHZhciBsb2NhbEJveCA9IGNtLmRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBsZWZ0ICs9IGxvY2FsQm94LmxlZnQ7XG4gICAgICB0b3AgKz0gbG9jYWxCb3gudG9wO1xuICAgIH1cblxuICAgIHZhciBsaW5lU3BhY2VCb3ggPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge2xlZnQ6IGxlZnQgLSBsaW5lU3BhY2VCb3gubGVmdCwgdG9wOiB0b3AgLSBsaW5lU3BhY2VCb3gudG9wfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYXJDb29yZHMoY20sIHBvcywgY29udGV4dCwgbGluZU9iaiwgYmlhcykge1xuICAgIGlmICghbGluZU9iaikgbGluZU9iaiA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgcmV0dXJuIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbWVhc3VyZUNoYXIoY20sIGxpbmVPYmosIHBvcy5jaCwgYmlhcyksIGNvbnRleHQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIGJveCBmb3IgYSBnaXZlbiBjdXJzb3IgcG9zaXRpb24sIHdoaWNoIG1heSBoYXZlIGFuXG4gIC8vICdvdGhlcicgcHJvcGVydHkgY29udGFpbmluZyB0aGUgcG9zaXRpb24gb2YgdGhlIHNlY29uZGFyeSBjdXJzb3JcbiAgLy8gb24gYSBiaWRpIGJvdW5kYXJ5LlxuICBmdW5jdGlvbiBjdXJzb3JDb29yZHMoY20sIHBvcywgY29udGV4dCwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB2YXJIZWlnaHQpIHtcbiAgICBsaW5lT2JqID0gbGluZU9iaiB8fCBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xuICAgIGlmICghcHJlcGFyZWRNZWFzdXJlKSBwcmVwYXJlZE1lYXN1cmUgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopO1xuICAgIGZ1bmN0aW9uIGdldChjaCwgcmlnaHQpIHtcbiAgICAgIHZhciBtID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCBjaCwgcmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIiwgdmFySGVpZ2h0KTtcbiAgICAgIGlmIChyaWdodCkgbS5sZWZ0ID0gbS5yaWdodDsgZWxzZSBtLnJpZ2h0ID0gbS5sZWZ0O1xuICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbSwgY29udGV4dCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJpZGkoY2gsIHBhcnRQb3MpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbcGFydFBvc10sIHJpZ2h0ID0gcGFydC5sZXZlbCAlIDI7XG4gICAgICBpZiAoY2ggPT0gYmlkaUxlZnQocGFydCkgJiYgcGFydFBvcyAmJiBwYXJ0LmxldmVsIDwgb3JkZXJbcGFydFBvcyAtIDFdLmxldmVsKSB7XG4gICAgICAgIHBhcnQgPSBvcmRlclstLXBhcnRQb3NdO1xuICAgICAgICBjaCA9IGJpZGlSaWdodChwYXJ0KSAtIChwYXJ0LmxldmVsICUgMiA/IDAgOiAxKTtcbiAgICAgICAgcmlnaHQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PSBiaWRpUmlnaHQocGFydCkgJiYgcGFydFBvcyA8IG9yZGVyLmxlbmd0aCAtIDEgJiYgcGFydC5sZXZlbCA8IG9yZGVyW3BhcnRQb3MgKyAxXS5sZXZlbCkge1xuICAgICAgICBwYXJ0ID0gb3JkZXJbKytwYXJ0UG9zXTtcbiAgICAgICAgY2ggPSBiaWRpTGVmdChwYXJ0KSAtIHBhcnQubGV2ZWwgJSAyO1xuICAgICAgICByaWdodCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHJpZ2h0ICYmIGNoID09IHBhcnQudG8gJiYgY2ggPiBwYXJ0LmZyb20pIHJldHVybiBnZXQoY2ggLSAxKTtcbiAgICAgIHJldHVybiBnZXQoY2gsIHJpZ2h0KTtcbiAgICB9XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZU9iaiksIGNoID0gcG9zLmNoO1xuICAgIGlmICghb3JkZXIpIHJldHVybiBnZXQoY2gpO1xuICAgIHZhciBwYXJ0UG9zID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgY2gpO1xuICAgIHZhciB2YWwgPSBnZXRCaWRpKGNoLCBwYXJ0UG9zKTtcbiAgICBpZiAoYmlkaU90aGVyICE9IG51bGwpIHZhbC5vdGhlciA9IGdldEJpZGkoY2gsIGJpZGlPdGhlcik7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8vIFVzZWQgdG8gY2hlYXBseSBlc3RpbWF0ZSB0aGUgY29vcmRpbmF0ZXMgZm9yIGEgcG9zaXRpb24uIFVzZWQgZm9yXG4gIC8vIGludGVybWVkaWF0ZSBzY3JvbGwgdXBkYXRlcy5cbiAgZnVuY3Rpb24gZXN0aW1hdGVDb29yZHMoY20sIHBvcykge1xuICAgIHZhciBsZWZ0ID0gMCwgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgbGVmdCA9IGNoYXJXaWR0aChjbS5kaXNwbGF5KSAqIHBvcy5jaDtcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgdmFyIHRvcCA9IGhlaWdodEF0TGluZShsaW5lT2JqKSArIHBhZGRpbmdUb3AoY20uZGlzcGxheSk7XG4gICAgcmV0dXJuIHtsZWZ0OiBsZWZ0LCByaWdodDogbGVmdCwgdG9wOiB0b3AsIGJvdHRvbTogdG9wICsgbGluZU9iai5oZWlnaHR9O1xuICB9XG5cbiAgLy8gUG9zaXRpb25zIHJldHVybmVkIGJ5IGNvb3Jkc0NoYXIgY29udGFpbiBzb21lIGV4dHJhIGluZm9ybWF0aW9uLlxuICAvLyB4UmVsIGlzIHRoZSByZWxhdGl2ZSB4IHBvc2l0aW9uIG9mIHRoZSBpbnB1dCBjb29yZGluYXRlcyBjb21wYXJlZFxuICAvLyB0byB0aGUgZm91bmQgcG9zaXRpb24gKHNvIHhSZWwgPiAwIG1lYW5zIHRoZSBjb29yZGluYXRlcyBhcmUgdG9cbiAgLy8gdGhlIHJpZ2h0IG9mIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24sIGZvciBleGFtcGxlKS4gV2hlbiBvdXRzaWRlXG4gIC8vIGlzIHRydWUsIHRoYXQgbWVhbnMgdGhlIGNvb3JkaW5hdGVzIGxpZSBvdXRzaWRlIHRoZSBsaW5lJ3NcbiAgLy8gdmVydGljYWwgcmFuZ2UuXG4gIGZ1bmN0aW9uIFBvc1dpdGhJbmZvKGxpbmUsIGNoLCBvdXRzaWRlLCB4UmVsKSB7XG4gICAgdmFyIHBvcyA9IFBvcyhsaW5lLCBjaCk7XG4gICAgcG9zLnhSZWwgPSB4UmVsO1xuICAgIGlmIChvdXRzaWRlKSBwb3Mub3V0c2lkZSA9IHRydWU7XG4gICAgcmV0dXJuIHBvcztcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGNoYXJhY3RlciBwb3NpdGlvbiBjbG9zZXN0IHRvIHRoZSBnaXZlbiBjb29yZGluYXRlcy5cbiAgLy8gSW5wdXQgbXVzdCBiZSBsaW5lU3BhY2UtbG9jYWwgKFwiZGl2XCIgY29vcmRpbmF0ZSBzeXN0ZW0pLlxuICBmdW5jdGlvbiBjb29yZHNDaGFyKGNtLCB4LCB5KSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYztcbiAgICB5ICs9IGNtLmRpc3BsYXkudmlld09mZnNldDtcbiAgICBpZiAoeSA8IDApIHJldHVybiBQb3NXaXRoSW5mbyhkb2MuZmlyc3QsIDAsIHRydWUsIC0xKTtcbiAgICB2YXIgbGluZU4gPSBsaW5lQXRIZWlnaHQoZG9jLCB5KSwgbGFzdCA9IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTtcbiAgICBpZiAobGluZU4gPiBsYXN0KVxuICAgICAgcmV0dXJuIFBvc1dpdGhJbmZvKGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoLCB0cnVlLCAxKTtcbiAgICBpZiAoeCA8IDApIHggPSAwO1xuXG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZU4pO1xuICAgIGZvciAoOzspIHtcbiAgICAgIHZhciBmb3VuZCA9IGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU4sIHgsIHkpO1xuICAgICAgdmFyIG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lT2JqKTtcbiAgICAgIHZhciBtZXJnZWRQb3MgPSBtZXJnZWQgJiYgbWVyZ2VkLmZpbmQoMCwgdHJ1ZSk7XG4gICAgICBpZiAobWVyZ2VkICYmIChmb3VuZC5jaCA+IG1lcmdlZFBvcy5mcm9tLmNoIHx8IGZvdW5kLmNoID09IG1lcmdlZFBvcy5mcm9tLmNoICYmIGZvdW5kLnhSZWwgPiAwKSlcbiAgICAgICAgbGluZU4gPSBsaW5lTm8obGluZU9iaiA9IG1lcmdlZFBvcy50by5saW5lKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU5vLCB4LCB5KSB7XG4gICAgdmFyIGlubmVyT2ZmID0geSAtIGhlaWdodEF0TGluZShsaW5lT2JqKTtcbiAgICB2YXIgd3JvbmdMaW5lID0gZmFsc2UsIGFkanVzdCA9IDIgKiBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGg7XG4gICAgdmFyIHByZXBhcmVkTWVhc3VyZSA9IHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZU9iaik7XG5cbiAgICBmdW5jdGlvbiBnZXRYKGNoKSB7XG4gICAgICB2YXIgc3AgPSBjdXJzb3JDb29yZHMoY20sIFBvcyhsaW5lTm8sIGNoKSwgXCJsaW5lXCIsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSk7XG4gICAgICB3cm9uZ0xpbmUgPSB0cnVlO1xuICAgICAgaWYgKGlubmVyT2ZmID4gc3AuYm90dG9tKSByZXR1cm4gc3AubGVmdCAtIGFkanVzdDtcbiAgICAgIGVsc2UgaWYgKGlubmVyT2ZmIDwgc3AudG9wKSByZXR1cm4gc3AubGVmdCArIGFkanVzdDtcbiAgICAgIGVsc2Ugd3JvbmdMaW5lID0gZmFsc2U7XG4gICAgICByZXR1cm4gc3AubGVmdDtcbiAgICB9XG5cbiAgICB2YXIgYmlkaSA9IGdldE9yZGVyKGxpbmVPYmopLCBkaXN0ID0gbGluZU9iai50ZXh0Lmxlbmd0aDtcbiAgICB2YXIgZnJvbSA9IGxpbmVMZWZ0KGxpbmVPYmopLCB0byA9IGxpbmVSaWdodChsaW5lT2JqKTtcbiAgICB2YXIgZnJvbVggPSBnZXRYKGZyb20pLCBmcm9tT3V0c2lkZSA9IHdyb25nTGluZSwgdG9YID0gZ2V0WCh0byksIHRvT3V0c2lkZSA9IHdyb25nTGluZTtcblxuICAgIGlmICh4ID4gdG9YKSByZXR1cm4gUG9zV2l0aEluZm8obGluZU5vLCB0bywgdG9PdXRzaWRlLCAxKTtcbiAgICAvLyBEbyBhIGJpbmFyeSBzZWFyY2ggYmV0d2VlbiB0aGVzZSBib3VuZHMuXG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKGJpZGkgPyB0byA9PSBmcm9tIHx8IHRvID09IG1vdmVWaXN1YWxseShsaW5lT2JqLCBmcm9tLCAxKSA6IHRvIC0gZnJvbSA8PSAxKSB7XG4gICAgICAgIHZhciBjaCA9IHggPCBmcm9tWCB8fCB4IC0gZnJvbVggPD0gdG9YIC0geCA/IGZyb20gOiB0bztcbiAgICAgICAgdmFyIHhEaWZmID0geCAtIChjaCA9PSBmcm9tID8gZnJvbVggOiB0b1gpO1xuICAgICAgICB3aGlsZSAoaXNFeHRlbmRpbmdDaGFyKGxpbmVPYmoudGV4dC5jaGFyQXQoY2gpKSkgKytjaDtcbiAgICAgICAgdmFyIHBvcyA9IFBvc1dpdGhJbmZvKGxpbmVObywgY2gsIGNoID09IGZyb20gPyBmcm9tT3V0c2lkZSA6IHRvT3V0c2lkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhEaWZmIDwgLTEgPyAtMSA6IHhEaWZmID4gMSA/IDEgOiAwKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH1cbiAgICAgIHZhciBzdGVwID0gTWF0aC5jZWlsKGRpc3QgLyAyKSwgbWlkZGxlID0gZnJvbSArIHN0ZXA7XG4gICAgICBpZiAoYmlkaSkge1xuICAgICAgICBtaWRkbGUgPSBmcm9tO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7ICsraSkgbWlkZGxlID0gbW92ZVZpc3VhbGx5KGxpbmVPYmosIG1pZGRsZSwgMSk7XG4gICAgICB9XG4gICAgICB2YXIgbWlkZGxlWCA9IGdldFgobWlkZGxlKTtcbiAgICAgIGlmIChtaWRkbGVYID4geCkge3RvID0gbWlkZGxlOyB0b1ggPSBtaWRkbGVYOyBpZiAodG9PdXRzaWRlID0gd3JvbmdMaW5lKSB0b1ggKz0gMTAwMDsgZGlzdCA9IHN0ZXA7fVxuICAgICAgZWxzZSB7ZnJvbSA9IG1pZGRsZTsgZnJvbVggPSBtaWRkbGVYOyBmcm9tT3V0c2lkZSA9IHdyb25nTGluZTsgZGlzdCAtPSBzdGVwO31cbiAgICB9XG4gIH1cblxuICB2YXIgbWVhc3VyZVRleHQ7XG4gIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgdGV4dCBoZWlnaHQuXG4gIGZ1bmN0aW9uIHRleHRIZWlnaHQoZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgIT0gbnVsbCkgcmV0dXJuIGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodDtcbiAgICBpZiAobWVhc3VyZVRleHQgPT0gbnVsbCkge1xuICAgICAgbWVhc3VyZVRleHQgPSBlbHQoXCJwcmVcIik7XG4gICAgICAvLyBNZWFzdXJlIGEgYnVuY2ggb2YgbGluZXMsIGZvciBicm93c2VycyB0aGF0IGNvbXB1dGVcbiAgICAgIC8vIGZyYWN0aW9uYWwgaGVpZ2h0cy5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDk7ICsraSkge1xuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpO1xuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChlbHQoXCJiclwiKSk7XG4gICAgICB9XG4gICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIG1lYXN1cmVUZXh0KTtcbiAgICB2YXIgaGVpZ2h0ID0gbWVhc3VyZVRleHQub2Zmc2V0SGVpZ2h0IC8gNTA7XG4gICAgaWYgKGhlaWdodCA+IDMpIGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGhlaWdodDtcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5Lm1lYXN1cmUpO1xuICAgIHJldHVybiBoZWlnaHQgfHwgMTtcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgY2hhcmFjdGVyIHdpZHRoLlxuICBmdW5jdGlvbiBjaGFyV2lkdGgoZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCAhPSBudWxsKSByZXR1cm4gZGlzcGxheS5jYWNoZWRDaGFyV2lkdGg7XG4gICAgdmFyIGFuY2hvciA9IGVsdChcInNwYW5cIiwgXCJ4eHh4eHh4eHh4XCIpO1xuICAgIHZhciBwcmUgPSBlbHQoXCJwcmVcIiwgW2FuY2hvcl0pO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgcHJlKTtcbiAgICB2YXIgcmVjdCA9IGFuY2hvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgd2lkdGggPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAxMDtcbiAgICBpZiAod2lkdGggPiAyKSBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCA9IHdpZHRoO1xuICAgIHJldHVybiB3aWR0aCB8fCAxMDtcbiAgfVxuXG4gIC8vIE9QRVJBVElPTlNcblxuICAvLyBPcGVyYXRpb25zIGFyZSB1c2VkIHRvIHdyYXAgYSBzZXJpZXMgb2YgY2hhbmdlcyB0byB0aGUgZWRpdG9yXG4gIC8vIHN0YXRlIGluIHN1Y2ggYSB3YXkgdGhhdCBlYWNoIGNoYW5nZSB3b24ndCBoYXZlIHRvIHVwZGF0ZSB0aGVcbiAgLy8gY3Vyc29yIGFuZCBkaXNwbGF5ICh3aGljaCB3b3VsZCBiZSBhd2t3YXJkLCBzbG93LCBhbmRcbiAgLy8gZXJyb3ItcHJvbmUpLiBJbnN0ZWFkLCBkaXNwbGF5IHVwZGF0ZXMgYXJlIGJhdGNoZWQgYW5kIHRoZW4gYWxsXG4gIC8vIGNvbWJpbmVkIGFuZCBleGVjdXRlZCBhdCBvbmNlLlxuXG4gIHZhciBvcGVyYXRpb25Hcm91cCA9IG51bGw7XG5cbiAgdmFyIG5leHRPcElkID0gMDtcbiAgLy8gU3RhcnQgYSBuZXcgb3BlcmF0aW9uLlxuICBmdW5jdGlvbiBzdGFydE9wZXJhdGlvbihjbSkge1xuICAgIGNtLmN1ck9wID0ge1xuICAgICAgY206IGNtLFxuICAgICAgdmlld0NoYW5nZWQ6IGZhbHNlLCAgICAgIC8vIEZsYWcgdGhhdCBpbmRpY2F0ZXMgdGhhdCBsaW5lcyBtaWdodCBuZWVkIHRvIGJlIHJlZHJhd25cbiAgICAgIHN0YXJ0SGVpZ2h0OiBjbS5kb2MuaGVpZ2h0LCAvLyBVc2VkIHRvIGRldGVjdCBuZWVkIHRvIHVwZGF0ZSBzY3JvbGxiYXJcbiAgICAgIGZvcmNlVXBkYXRlOiBmYWxzZSwgICAgICAvLyBVc2VkIHRvIGZvcmNlIGEgcmVkcmF3XG4gICAgICB1cGRhdGVJbnB1dDogbnVsbCwgICAgICAgLy8gV2hldGhlciB0byByZXNldCB0aGUgaW5wdXQgdGV4dGFyZWFcbiAgICAgIHR5cGluZzogZmFsc2UsICAgICAgICAgICAvLyBXaGV0aGVyIHRoaXMgcmVzZXQgc2hvdWxkIGJlIGNhcmVmdWwgdG8gbGVhdmUgZXhpc3RpbmcgdGV4dCAoZm9yIGNvbXBvc2l0aW5nKVxuICAgICAgY2hhbmdlT2JqczogbnVsbCwgICAgICAgIC8vIEFjY3VtdWxhdGVkIGNoYW5nZXMsIGZvciBmaXJpbmcgY2hhbmdlIGV2ZW50c1xuICAgICAgY3Vyc29yQWN0aXZpdHlIYW5kbGVyczogbnVsbCwgLy8gU2V0IG9mIGhhbmRsZXJzIHRvIGZpcmUgY3Vyc29yQWN0aXZpdHkgb25cbiAgICAgIGN1cnNvckFjdGl2aXR5Q2FsbGVkOiAwLCAvLyBUcmFja3Mgd2hpY2ggY3Vyc29yQWN0aXZpdHkgaGFuZGxlcnMgaGF2ZSBiZWVuIGNhbGxlZCBhbHJlYWR5XG4gICAgICBzZWxlY3Rpb25DaGFuZ2VkOiBmYWxzZSwgLy8gV2hldGhlciB0aGUgc2VsZWN0aW9uIG5lZWRzIHRvIGJlIHJlZHJhd25cbiAgICAgIHVwZGF0ZU1heExpbmU6IGZhbHNlLCAgICAvLyBTZXQgd2hlbiB0aGUgd2lkZXN0IGxpbmUgbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCBhbmV3XG4gICAgICBzY3JvbGxMZWZ0OiBudWxsLCBzY3JvbGxUb3A6IG51bGwsIC8vIEludGVybWVkaWF0ZSBzY3JvbGwgcG9zaXRpb24sIG5vdCBwdXNoZWQgdG8gRE9NIHlldFxuICAgICAgc2Nyb2xsVG9Qb3M6IG51bGwsICAgICAgIC8vIFVzZWQgdG8gc2Nyb2xsIHRvIGEgc3BlY2lmaWMgcG9zaXRpb25cbiAgICAgIGZvY3VzOiBmYWxzZSxcbiAgICAgIGlkOiArK25leHRPcElkICAgICAgICAgICAvLyBVbmlxdWUgSURcbiAgICB9O1xuICAgIGlmIChvcGVyYXRpb25Hcm91cCkge1xuICAgICAgb3BlcmF0aW9uR3JvdXAub3BzLnB1c2goY20uY3VyT3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbS5jdXJPcC5vd25zR3JvdXAgPSBvcGVyYXRpb25Hcm91cCA9IHtcbiAgICAgICAgb3BzOiBbY20uY3VyT3BdLFxuICAgICAgICBkZWxheWVkQ2FsbGJhY2tzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKSB7XG4gICAgLy8gQ2FsbHMgZGVsYXllZCBjYWxsYmFja3MgYW5kIGN1cnNvckFjdGl2aXR5IGhhbmRsZXJzIHVudGlsIG5vXG4gICAgLy8gbmV3IG9uZXMgYXBwZWFyXG4gICAgdmFyIGNhbGxiYWNrcyA9IGdyb3VwLmRlbGF5ZWRDYWxsYmFja3MsIGkgPSAwO1xuICAgIGRvIHtcbiAgICAgIGZvciAoOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChudWxsKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JvdXAub3BzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBvcCA9IGdyb3VwLm9wc1tqXTtcbiAgICAgICAgaWYgKG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMpXG4gICAgICAgICAgd2hpbGUgKG9wLmN1cnNvckFjdGl2aXR5Q2FsbGVkIDwgb3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycy5sZW5ndGgpXG4gICAgICAgICAgICBvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzW29wLmN1cnNvckFjdGl2aXR5Q2FsbGVkKytdLmNhbGwobnVsbCwgb3AuY20pO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKGkgPCBjYWxsYmFja3MubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIEZpbmlzaCBhbiBvcGVyYXRpb24sIHVwZGF0aW5nIHRoZSBkaXNwbGF5IGFuZCBzaWduYWxsaW5nIGRlbGF5ZWQgZXZlbnRzXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbihjbSkge1xuICAgIHZhciBvcCA9IGNtLmN1ck9wLCBncm91cCA9IG9wLm93bnNHcm91cDtcbiAgICBpZiAoIWdyb3VwKSByZXR1cm47XG5cbiAgICB0cnkgeyBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKTsgfVxuICAgIGZpbmFsbHkge1xuICAgICAgb3BlcmF0aW9uR3JvdXAgPSBudWxsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5vcHMubGVuZ3RoOyBpKyspXG4gICAgICAgIGdyb3VwLm9wc1tpXS5jbS5jdXJPcCA9IG51bGw7XG4gICAgICBlbmRPcGVyYXRpb25zKGdyb3VwKTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGUgRE9NIHVwZGF0ZXMgZG9uZSB3aGVuIGFuIG9wZXJhdGlvbiBmaW5pc2hlcyBhcmUgYmF0Y2hlZCBzb1xuICAvLyB0aGF0IHRoZSBtaW5pbXVtIG51bWJlciBvZiByZWxheW91dHMgYXJlIHJlcXVpcmVkLlxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25zKGdyb3VwKSB7XG4gICAgdmFyIG9wcyA9IGdyb3VwLm9wcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gUmVhZCBET01cbiAgICAgIGVuZE9wZXJhdGlvbl9SMShvcHNbaV0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBXcml0ZSBET00gKG1heWJlKVxuICAgICAgZW5kT3BlcmF0aW9uX1cxKG9wc1tpXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFJlYWQgRE9NXG4gICAgICBlbmRPcGVyYXRpb25fUjIob3BzW2ldKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gV3JpdGUgRE9NIChtYXliZSlcbiAgICAgIGVuZE9wZXJhdGlvbl9XMihvcHNbaV0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxuICAgICAgZW5kT3BlcmF0aW9uX2ZpbmlzaChvcHNbaV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1IxKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIG1heWJlQ2xpcFNjcm9sbGJhcnMoY20pO1xuICAgIGlmIChvcC51cGRhdGVNYXhMaW5lKSBmaW5kTWF4TGluZShjbSk7XG5cbiAgICBvcC5tdXN0VXBkYXRlID0gb3Audmlld0NoYW5nZWQgfHwgb3AuZm9yY2VVcGRhdGUgfHwgb3Auc2Nyb2xsVG9wICE9IG51bGwgfHxcbiAgICAgIG9wLnNjcm9sbFRvUG9zICYmIChvcC5zY3JvbGxUb1Bvcy5mcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgb3Auc2Nyb2xsVG9Qb3MudG8ubGluZSA+PSBkaXNwbGF5LnZpZXdUbykgfHxcbiAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgJiYgY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgb3AudXBkYXRlID0gb3AubXVzdFVwZGF0ZSAmJlxuICAgICAgbmV3IERpc3BsYXlVcGRhdGUoY20sIG9wLm11c3RVcGRhdGUgJiYge3RvcDogb3Auc2Nyb2xsVG9wLCBlbnN1cmU6IG9wLnNjcm9sbFRvUG9zfSwgb3AuZm9yY2VVcGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1cxKG9wKSB7XG4gICAgb3AudXBkYXRlZERpc3BsYXkgPSBvcC5tdXN0VXBkYXRlICYmIHVwZGF0ZURpc3BsYXlJZk5lZWRlZChvcC5jbSwgb3AudXBkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9SMihvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcblxuICAgIG9wLmJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG5cbiAgICAvLyBJZiB0aGUgbWF4IGxpbmUgY2hhbmdlZCBzaW5jZSBpdCB3YXMgbGFzdCBtZWFzdXJlZCwgbWVhc3VyZSBpdCxcbiAgICAvLyBhbmQgZW5zdXJlIHRoZSBkb2N1bWVudCdzIHdpZHRoIG1hdGNoZXMgaXQuXG4gICAgLy8gdXBkYXRlRGlzcGxheV9XMiB3aWxsIHVzZSB0aGVzZSBwcm9wZXJ0aWVzIHRvIGRvIHRoZSBhY3R1YWwgcmVzaXppbmdcbiAgICBpZiAoZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIG9wLmFkanVzdFdpZHRoVG8gPSBtZWFzdXJlQ2hhcihjbSwgZGlzcGxheS5tYXhMaW5lLCBkaXNwbGF5Lm1heExpbmUudGV4dC5sZW5ndGgpLmxlZnQgKyAzO1xuICAgICAgY20uZGlzcGxheS5zaXplcldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbztcbiAgICAgIG9wLmJhck1lYXN1cmUuc2Nyb2xsV2lkdGggPVxuICAgICAgICBNYXRoLm1heChkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoLCBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQgKyBvcC5hZGp1c3RXaWR0aFRvICsgc2Nyb2xsR2FwKGNtKSArIGNtLmRpc3BsYXkuYmFyV2lkdGgpO1xuICAgICAgb3AubWF4U2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIGRpc3BsYXkuc2l6ZXIub2Zmc2V0TGVmdCArIG9wLmFkanVzdFdpZHRoVG8gLSBkaXNwbGF5V2lkdGgoY20pKTtcbiAgICB9XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc2VsZWN0aW9uQ2hhbmdlZClcbiAgICAgIG9wLnByZXBhcmVkU2VsZWN0aW9uID0gZGlzcGxheS5pbnB1dC5wcmVwYXJlU2VsZWN0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fVzIob3ApIHtcbiAgICB2YXIgY20gPSBvcC5jbTtcblxuICAgIGlmIChvcC5hZGp1c3RXaWR0aFRvICE9IG51bGwpIHtcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluV2lkdGggPSBvcC5hZGp1c3RXaWR0aFRvICsgXCJweFwiO1xuICAgICAgaWYgKG9wLm1heFNjcm9sbExlZnQgPCBjbS5kb2Muc2Nyb2xsTGVmdClcbiAgICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgTWF0aC5taW4oY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0LCBvcC5tYXhTY3JvbGxMZWZ0KSwgdHJ1ZSk7XG4gICAgICBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG9wLnByZXBhcmVkU2VsZWN0aW9uKVxuICAgICAgY20uZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKG9wLnByZXBhcmVkU2VsZWN0aW9uKTtcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc3RhcnRIZWlnaHQgIT0gY20uZG9jLmhlaWdodClcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20sIG9wLmJhck1lYXN1cmUpO1xuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSlcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBvcC5iYXJNZWFzdXJlKTtcblxuICAgIGlmIChvcC5zZWxlY3Rpb25DaGFuZ2VkKSByZXN0YXJ0QmxpbmsoY20pO1xuXG4gICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQgJiYgb3AudXBkYXRlSW5wdXQpXG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KG9wLnR5cGluZyk7XG4gICAgaWYgKG9wLmZvY3VzICYmIG9wLmZvY3VzID09IGFjdGl2ZUVsdCgpICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkpXG4gICAgICBlbnN1cmVGb2N1cyhvcC5jbSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fZmluaXNoKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCBvcC51cGRhdGUpO1xuXG4gICAgLy8gQWJvcnQgbW91c2Ugd2hlZWwgZGVsdGEgbWVhc3VyZW1lbnQsIHdoZW4gc2Nyb2xsaW5nIGV4cGxpY2l0bHlcbiAgICBpZiAoZGlzcGxheS53aGVlbFN0YXJ0WCAhPSBudWxsICYmIChvcC5zY3JvbGxUb3AgIT0gbnVsbCB8fCBvcC5zY3JvbGxMZWZ0ICE9IG51bGwgfHwgb3Auc2Nyb2xsVG9Qb3MpKVxuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IGRpc3BsYXkud2hlZWxTdGFydFkgPSBudWxsO1xuXG4gICAgLy8gUHJvcGFnYXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gdG8gdGhlIGFjdHVhbCBET00gc2Nyb2xsZXJcbiAgICBpZiAob3Auc2Nyb2xsVG9wICE9IG51bGwgJiYgKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICE9IG9wLnNjcm9sbFRvcCB8fCBvcC5mb3JjZVNjcm9sbCkpIHtcbiAgICAgIGRvYy5zY3JvbGxUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0LCBvcC5zY3JvbGxUb3ApKTtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AoZG9jLnNjcm9sbFRvcCk7XG4gICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IGRvYy5zY3JvbGxUb3A7XG4gICAgfVxuICAgIGlmIChvcC5zY3JvbGxMZWZ0ICE9IG51bGwgJiYgKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCAhPSBvcC5zY3JvbGxMZWZ0IHx8IG9wLmZvcmNlU2Nyb2xsKSkge1xuICAgICAgZG9jLnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFdpZHRoIC0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCwgb3Auc2Nyb2xsTGVmdCkpO1xuICAgICAgZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbExlZnQoZG9jLnNjcm9sbExlZnQpO1xuICAgICAgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ID0gZG9jLnNjcm9sbExlZnQ7XG4gICAgICBhbGlnbkhvcml6b250YWxseShjbSk7XG4gICAgfVxuICAgIC8vIElmIHdlIG5lZWQgdG8gc2Nyb2xsIGEgc3BlY2lmaWMgcG9zaXRpb24gaW50byB2aWV3LCBkbyBzby5cbiAgICBpZiAob3Auc2Nyb2xsVG9Qb3MpIHtcbiAgICAgIHZhciBjb29yZHMgPSBzY3JvbGxQb3NJbnRvVmlldyhjbSwgY2xpcFBvcyhkb2MsIG9wLnNjcm9sbFRvUG9zLmZyb20pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3MoZG9jLCBvcC5zY3JvbGxUb1Bvcy50byksIG9wLnNjcm9sbFRvUG9zLm1hcmdpbik7XG4gICAgICBpZiAob3Auc2Nyb2xsVG9Qb3MuaXNDdXJzb3IgJiYgY20uc3RhdGUuZm9jdXNlZCkgbWF5YmVTY3JvbGxXaW5kb3coY20sIGNvb3Jkcyk7XG4gICAgfVxuXG4gICAgLy8gRmlyZSBldmVudHMgZm9yIG1hcmtlcnMgdGhhdCBhcmUgaGlkZGVuL3VuaWRkZW4gYnkgZWRpdGluZyBvclxuICAgIC8vIHVuZG9pbmdcbiAgICB2YXIgaGlkZGVuID0gb3AubWF5YmVIaWRkZW5NYXJrZXJzLCB1bmhpZGRlbiA9IG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzO1xuICAgIGlmIChoaWRkZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgaGlkZGVuLmxlbmd0aDsgKytpKVxuICAgICAgaWYgKCFoaWRkZW5baV0ubGluZXMubGVuZ3RoKSBzaWduYWwoaGlkZGVuW2ldLCBcImhpZGVcIik7XG4gICAgaWYgKHVuaGlkZGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IHVuaGlkZGVuLmxlbmd0aDsgKytpKVxuICAgICAgaWYgKHVuaGlkZGVuW2ldLmxpbmVzLmxlbmd0aCkgc2lnbmFsKHVuaGlkZGVuW2ldLCBcInVuaGlkZVwiKTtcblxuICAgIGlmIChkaXNwbGF5LndyYXBwZXIub2Zmc2V0SGVpZ2h0KVxuICAgICAgZG9jLnNjcm9sbFRvcCA9IGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuXG4gICAgLy8gRmlyZSBjaGFuZ2UgZXZlbnRzLCBhbmQgZGVsYXllZCBldmVudCBoYW5kbGVyc1xuICAgIGlmIChvcC5jaGFuZ2VPYmpzKVxuICAgICAgc2lnbmFsKGNtLCBcImNoYW5nZXNcIiwgY20sIG9wLmNoYW5nZU9ianMpO1xuICAgIGlmIChvcC51cGRhdGUpXG4gICAgICBvcC51cGRhdGUuZmluaXNoKCk7XG4gIH1cblxuICAvLyBSdW4gdGhlIGdpdmVuIGZ1bmN0aW9uIGluIGFuIG9wZXJhdGlvblxuICBmdW5jdGlvbiBydW5Jbk9wKGNtLCBmKSB7XG4gICAgaWYgKGNtLmN1ck9wKSByZXR1cm4gZigpO1xuICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICB0cnkgeyByZXR1cm4gZigpOyB9XG4gICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbihjbSk7IH1cbiAgfVxuICAvLyBXcmFwcyBhIGZ1bmN0aW9uIGluIGFuIG9wZXJhdGlvbi4gUmV0dXJucyB0aGUgd3JhcHBlZCBmdW5jdGlvbi5cbiAgZnVuY3Rpb24gb3BlcmF0aW9uKGNtLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGNtLmN1ck9wKSByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKTtcbiAgICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KGNtLCBhcmd1bWVudHMpOyB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIH07XG4gIH1cbiAgLy8gVXNlZCB0byBhZGQgbWV0aG9kcyB0byBlZGl0b3IgYW5kIGRvYyBpbnN0YW5jZXMsIHdyYXBwaW5nIHRoZW0gaW5cbiAgLy8gb3BlcmF0aW9ucy5cbiAgZnVuY3Rpb24gbWV0aG9kT3AoZikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1ck9wKSByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgc3RhcnRPcGVyYXRpb24odGhpcyk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKHRoaXMpOyB9XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkb2NNZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbTtcbiAgICAgIGlmICghY20gfHwgY20uY3VyT3ApIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIH07XG4gIH1cblxuICAvLyBWSUVXIFRSQUNLSU5HXG5cbiAgLy8gVGhlc2Ugb2JqZWN0cyBhcmUgdXNlZCB0byByZXByZXNlbnQgdGhlIHZpc2libGUgKGN1cnJlbnRseSBkcmF3bilcbiAgLy8gcGFydCBvZiB0aGUgZG9jdW1lbnQuIEEgTGluZVZpZXcgbWF5IGNvcnJlc3BvbmQgdG8gbXVsdGlwbGVcbiAgLy8gbG9naWNhbCBsaW5lcywgaWYgdGhvc2UgYXJlIGNvbm5lY3RlZCBieSBjb2xsYXBzZWQgcmFuZ2VzLlxuICBmdW5jdGlvbiBMaW5lVmlldyhkb2MsIGxpbmUsIGxpbmVOKSB7XG4gICAgLy8gVGhlIHN0YXJ0aW5nIGxpbmVcbiAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgIC8vIENvbnRpbnVpbmcgbGluZXMsIGlmIGFueVxuICAgIHRoaXMucmVzdCA9IHZpc3VhbExpbmVDb250aW51ZWQobGluZSk7XG4gICAgLy8gTnVtYmVyIG9mIGxvZ2ljYWwgbGluZXMgaW4gdGhpcyB2aXN1YWwgbGluZVxuICAgIHRoaXMuc2l6ZSA9IHRoaXMucmVzdCA/IGxpbmVObyhsc3QodGhpcy5yZXN0KSkgLSBsaW5lTiArIDEgOiAxO1xuICAgIHRoaXMubm9kZSA9IHRoaXMudGV4dCA9IG51bGw7XG4gICAgdGhpcy5oaWRkZW4gPSBsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIHJhbmdlIG9mIExpbmVWaWV3IG9iamVjdHMgZm9yIHRoZSBnaXZlbiBsaW5lcy5cbiAgZnVuY3Rpb24gYnVpbGRWaWV3QXJyYXkoY20sIGZyb20sIHRvKSB7XG4gICAgdmFyIGFycmF5ID0gW10sIG5leHRQb3M7XG4gICAgZm9yICh2YXIgcG9zID0gZnJvbTsgcG9zIDwgdG87IHBvcyA9IG5leHRQb3MpIHtcbiAgICAgIHZhciB2aWV3ID0gbmV3IExpbmVWaWV3KGNtLmRvYywgZ2V0TGluZShjbS5kb2MsIHBvcyksIHBvcyk7XG4gICAgICBuZXh0UG9zID0gcG9zICsgdmlldy5zaXplO1xuICAgICAgYXJyYXkucHVzaCh2aWV3KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgLy8gVXBkYXRlcyB0aGUgZGlzcGxheS52aWV3IGRhdGEgc3RydWN0dXJlIGZvciBhIGdpdmVuIGNoYW5nZSB0byB0aGVcbiAgLy8gZG9jdW1lbnQuIEZyb20gYW5kIHRvIGFyZSBpbiBwcmUtY2hhbmdlIGNvb3JkaW5hdGVzLiBMZW5kaWZmIGlzXG4gIC8vIHRoZSBhbW91bnQgb2YgbGluZXMgYWRkZWQgb3Igc3VidHJhY3RlZCBieSB0aGUgY2hhbmdlLiBUaGlzIGlzXG4gIC8vIHVzZWQgZm9yIGNoYW5nZXMgdGhhdCBzcGFuIG11bHRpcGxlIGxpbmVzLCBvciBjaGFuZ2UgdGhlIHdheVxuICAvLyBsaW5lcyBhcmUgZGl2aWRlZCBpbnRvIHZpc3VhbCBsaW5lcy4gcmVnTGluZUNoYW5nZSAoYmVsb3cpXG4gIC8vIHJlZ2lzdGVycyBzaW5nbGUtbGluZSBjaGFuZ2VzLlxuICBmdW5jdGlvbiByZWdDaGFuZ2UoY20sIGZyb20sIHRvLCBsZW5kaWZmKSB7XG4gICAgaWYgKGZyb20gPT0gbnVsbCkgZnJvbSA9IGNtLmRvYy5maXJzdDtcbiAgICBpZiAodG8gPT0gbnVsbCkgdG8gPSBjbS5kb2MuZmlyc3QgKyBjbS5kb2Muc2l6ZTtcbiAgICBpZiAoIWxlbmRpZmYpIGxlbmRpZmYgPSAwO1xuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChsZW5kaWZmICYmIHRvIDwgZGlzcGxheS52aWV3VG8gJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID4gZnJvbSkpXG4gICAgICBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID0gZnJvbTtcblxuICAgIGNtLmN1ck9wLnZpZXdDaGFuZ2VkID0gdHJ1ZTtcblxuICAgIGlmIChmcm9tID49IGRpc3BsYXkudmlld1RvKSB7IC8vIENoYW5nZSBhZnRlclxuICAgICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zICYmIHZpc3VhbExpbmVObyhjbS5kb2MsIGZyb20pIDwgZGlzcGxheS52aWV3VG8pXG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgfSBlbHNlIGlmICh0byA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7IC8vIENoYW5nZSBiZWZvcmVcbiAgICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucyAmJiB2aXN1YWxMaW5lRW5kTm8oY20uZG9jLCB0byArIGxlbmRpZmYpID4gZGlzcGxheS52aWV3RnJvbSkge1xuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheS52aWV3RnJvbSArPSBsZW5kaWZmO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBkaXNwbGF5LnZpZXdGcm9tICYmIHRvID49IGRpc3BsYXkudmlld1RvKSB7IC8vIEZ1bGwgb3ZlcmxhcFxuICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICB9IGVsc2UgaWYgKGZyb20gPD0gZGlzcGxheS52aWV3RnJvbSkgeyAvLyBUb3Agb3ZlcmxhcFxuICAgICAgdmFyIGN1dCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIHRvLCB0byArIGxlbmRpZmYsIDEpO1xuICAgICAgaWYgKGN1dCkge1xuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoY3V0LmluZGV4KTtcbiAgICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGN1dC5saW5lTjtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0byA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBCb3R0b20gb3ZlcmxhcFxuICAgICAgdmFyIGN1dCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcbiAgICAgIGlmIChjdXQpIHtcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGN1dC5pbmRleCk7XG4gICAgICAgIGRpc3BsYXkudmlld1RvID0gY3V0LmxpbmVOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBHYXAgaW4gdGhlIG1pZGRsZVxuICAgICAgdmFyIGN1dFRvcCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcbiAgICAgIHZhciBjdXRCb3QgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCB0bywgdG8gKyBsZW5kaWZmLCAxKTtcbiAgICAgIGlmIChjdXRUb3AgJiYgY3V0Qm90KSB7XG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBjdXRUb3AuaW5kZXgpXG4gICAgICAgICAgLmNvbmNhdChidWlsZFZpZXdBcnJheShjbSwgY3V0VG9wLmxpbmVOLCBjdXRCb3QubGluZU4pKVxuICAgICAgICAgIC5jb25jYXQoZGlzcGxheS52aWV3LnNsaWNlKGN1dEJvdC5pbmRleCkpO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZXh0ID0gZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQpIHtcbiAgICAgIGlmICh0byA8IGV4dC5saW5lTilcbiAgICAgICAgZXh0LmxpbmVOICs9IGxlbmRpZmY7XG4gICAgICBlbHNlIGlmIChmcm9tIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICAgIGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgdG8gYSBzaW5nbGUgbGluZS4gVHlwZSBtdXN0IGJlIG9uZSBvZiBcInRleHRcIixcbiAgLy8gXCJndXR0ZXJcIiwgXCJjbGFzc1wiLCBcIndpZGdldFwiXG4gIGZ1bmN0aW9uIHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmUsIHR5cGUpIHtcbiAgICBjbS5jdXJPcC52aWV3Q2hhbmdlZCA9IHRydWU7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XG4gICAgaWYgKGV4dCAmJiBsaW5lID49IGV4dC5saW5lTiAmJiBsaW5lIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xuXG4gICAgaWYgKGxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IGxpbmUgPj0gZGlzcGxheS52aWV3VG8pIHJldHVybjtcbiAgICB2YXIgbGluZVZpZXcgPSBkaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZSldO1xuICAgIGlmIChsaW5lVmlldy5ub2RlID09IG51bGwpIHJldHVybjtcbiAgICB2YXIgYXJyID0gbGluZVZpZXcuY2hhbmdlcyB8fCAobGluZVZpZXcuY2hhbmdlcyA9IFtdKTtcbiAgICBpZiAoaW5kZXhPZihhcnIsIHR5cGUpID09IC0xKSBhcnIucHVzaCh0eXBlKTtcbiAgfVxuXG4gIC8vIENsZWFyIHRoZSB2aWV3LlxuICBmdW5jdGlvbiByZXNldFZpZXcoY20pIHtcbiAgICBjbS5kaXNwbGF5LnZpZXdGcm9tID0gY20uZGlzcGxheS52aWV3VG8gPSBjbS5kb2MuZmlyc3Q7XG4gICAgY20uZGlzcGxheS52aWV3ID0gW107XG4gICAgY20uZGlzcGxheS52aWV3T2Zmc2V0ID0gMDtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIHZpZXcgZWxlbWVudCBjb3JyZXNwb25kaW5nIHRvIGEgZ2l2ZW4gbGluZS4gUmV0dXJuIG51bGxcbiAgLy8gd2hlbiB0aGUgbGluZSBpc24ndCB2aXNpYmxlLlxuICBmdW5jdGlvbiBmaW5kVmlld0luZGV4KGNtLCBuKSB7XG4gICAgaWYgKG4gPj0gY20uZGlzcGxheS52aWV3VG8pIHJldHVybiBudWxsO1xuICAgIG4gLT0gY20uZGlzcGxheS52aWV3RnJvbTtcbiAgICBpZiAobiA8IDApIHJldHVybiBudWxsO1xuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgbiAtPSB2aWV3W2ldLnNpemU7XG4gICAgICBpZiAobiA8IDApIHJldHVybiBpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZpZXdDdXR0aW5nUG9pbnQoY20sIG9sZE4sIG5ld04sIGRpcikge1xuICAgIHZhciBpbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIG9sZE4pLCBkaWZmLCB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xuICAgIGlmICghc2F3Q29sbGFwc2VkU3BhbnMgfHwgbmV3TiA9PSBjbS5kb2MuZmlyc3QgKyBjbS5kb2Muc2l6ZSlcbiAgICAgIHJldHVybiB7aW5kZXg6IGluZGV4LCBsaW5lTjogbmV3Tn07XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSBjbS5kaXNwbGF5LnZpZXdGcm9tOyBpIDwgaW5kZXg7IGkrKylcbiAgICAgIG4gKz0gdmlld1tpXS5zaXplO1xuICAgIGlmIChuICE9IG9sZE4pIHtcbiAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgIGlmIChpbmRleCA9PSB2aWV3Lmxlbmd0aCAtIDEpIHJldHVybiBudWxsO1xuICAgICAgICBkaWZmID0gKG4gKyB2aWV3W2luZGV4XS5zaXplKSAtIG9sZE47XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWZmID0gbiAtIG9sZE47XG4gICAgICB9XG4gICAgICBvbGROICs9IGRpZmY7IG5ld04gKz0gZGlmZjtcbiAgICB9XG4gICAgd2hpbGUgKHZpc3VhbExpbmVObyhjbS5kb2MsIG5ld04pICE9IG5ld04pIHtcbiAgICAgIGlmIChpbmRleCA9PSAoZGlyIDwgMCA/IDAgOiB2aWV3Lmxlbmd0aCAtIDEpKSByZXR1cm4gbnVsbDtcbiAgICAgIG5ld04gKz0gZGlyICogdmlld1tpbmRleCAtIChkaXIgPCAwID8gMSA6IDApXS5zaXplO1xuICAgICAgaW5kZXggKz0gZGlyO1xuICAgIH1cbiAgICByZXR1cm4ge2luZGV4OiBpbmRleCwgbGluZU46IG5ld059O1xuICB9XG5cbiAgLy8gRm9yY2UgdGhlIHZpZXcgdG8gY292ZXIgYSBnaXZlbiByYW5nZSwgYWRkaW5nIGVtcHR5IHZpZXcgZWxlbWVudFxuICAvLyBvciBjbGlwcGluZyBvZmYgZXhpc3Rpbmcgb25lcyBhcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIGFkanVzdFZpZXcoY20sIGZyb20sIHRvKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB2aWV3ID0gZGlzcGxheS52aWV3O1xuICAgIGlmICh2aWV3Lmxlbmd0aCA9PSAwIHx8IGZyb20gPj0gZGlzcGxheS52aWV3VG8gfHwgdG8gPD0gZGlzcGxheS52aWV3RnJvbSkge1xuICAgICAgZGlzcGxheS52aWV3ID0gYnVpbGRWaWV3QXJyYXkoY20sIGZyb20sIHRvKTtcbiAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBmcm9tO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGlzcGxheS52aWV3RnJvbSA+IGZyb20pXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCBkaXNwbGF5LnZpZXdGcm9tKS5jb25jYXQoZGlzcGxheS52aWV3KTtcbiAgICAgIGVsc2UgaWYgKGRpc3BsYXkudmlld0Zyb20gPCBmcm9tKVxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoZmluZFZpZXdJbmRleChjbSwgZnJvbSkpO1xuICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGZyb207XG4gICAgICBpZiAoZGlzcGxheS52aWV3VG8gPCB0bylcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LmNvbmNhdChidWlsZFZpZXdBcnJheShjbSwgZGlzcGxheS52aWV3VG8sIHRvKSk7XG4gICAgICBlbHNlIGlmIChkaXNwbGF5LnZpZXdUbyA+IHRvKVxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgZmluZFZpZXdJbmRleChjbSwgdG8pKTtcbiAgICB9XG4gICAgZGlzcGxheS52aWV3VG8gPSB0bztcbiAgfVxuXG4gIC8vIENvdW50IHRoZSBudW1iZXIgb2YgbGluZXMgaW4gdGhlIHZpZXcgd2hvc2UgRE9NIHJlcHJlc2VudGF0aW9uIGlzXG4gIC8vIG91dCBvZiBkYXRlIChvciBub25leGlzdGVudCkuXG4gIGZ1bmN0aW9uIGNvdW50RGlydHlWaWV3KGNtKSB7XG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXcsIGRpcnR5ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lVmlldyA9IHZpZXdbaV07XG4gICAgICBpZiAoIWxpbmVWaWV3LmhpZGRlbiAmJiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcuY2hhbmdlcykpICsrZGlydHk7XG4gICAgfVxuICAgIHJldHVybiBkaXJ0eTtcbiAgfVxuXG4gIC8vIEVWRU5UIEhBTkRMRVJTXG5cbiAgLy8gQXR0YWNoIHRoZSBuZWNlc3NhcnkgZXZlbnQgaGFuZGxlcnMgd2hlbiBpbml0aWFsaXppbmcgdGhlIGVkaXRvclxuICBmdW5jdGlvbiByZWdpc3RlckV2ZW50SGFuZGxlcnMoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJtb3VzZWRvd25cIiwgb3BlcmF0aW9uKGNtLCBvbk1vdXNlRG93bikpO1xuICAgIC8vIE9sZGVyIElFJ3Mgd2lsbCBub3QgZmlyZSBhIHNlY29uZCBtb3VzZWRvd24gZm9yIGEgZG91YmxlIGNsaWNrXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSlcbiAgICAgIG9uKGQuc2Nyb2xsZXIsIFwiZGJsY2xpY2tcIiwgb3BlcmF0aW9uKGNtLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkpIHJldHVybjtcbiAgICAgICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSk7XG4gICAgICAgIGlmICghcG9zIHx8IGNsaWNrSW5HdXR0ZXIoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpIHJldHVybjtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgdmFyIHdvcmQgPSBjbS5maW5kV29yZEF0KHBvcyk7XG4gICAgICAgIGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHdvcmQuYW5jaG9yLCB3b3JkLmhlYWQpO1xuICAgICAgfSkpO1xuICAgIGVsc2VcbiAgICAgIG9uKGQuc2Nyb2xsZXIsIFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkgeyBzaWduYWxET01FdmVudChjbSwgZSkgfHwgZV9wcmV2ZW50RGVmYXVsdChlKTsgfSk7XG4gICAgLy8gU29tZSBicm93c2VycyBmaXJlIGNvbnRleHRtZW51ICphZnRlciogb3BlbmluZyB0aGUgbWVudSwgYXRcbiAgICAvLyB3aGljaCBwb2ludCB3ZSBjYW4ndCBtZXNzIHdpdGggaXQgYW55bW9yZS4gQ29udGV4dCBtZW51IGlzXG4gICAgLy8gaGFuZGxlZCBpbiBvbk1vdXNlRG93biBmb3IgdGhlc2UgYnJvd3NlcnMuXG4gICAgaWYgKCFjYXB0dXJlUmlnaHRDbGljaykgb24oZC5zY3JvbGxlciwgXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7b25Db250ZXh0TWVudShjbSwgZSk7fSk7XG5cbiAgICAvLyBVc2VkIHRvIHN1cHByZXNzIG1vdXNlIGV2ZW50IGhhbmRsaW5nIHdoZW4gYSB0b3VjaCBoYXBwZW5zXG4gICAgdmFyIHRvdWNoRmluaXNoZWQsIHByZXZUb3VjaCA9IHtlbmQ6IDB9O1xuICAgIGZ1bmN0aW9uIGZpbmlzaFRvdWNoKCkge1xuICAgICAgaWYgKGQuYWN0aXZlVG91Y2gpIHtcbiAgICAgICAgdG91Y2hGaW5pc2hlZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZC5hY3RpdmVUb3VjaCA9IG51bGw7fSwgMTAwMCk7XG4gICAgICAgIHByZXZUb3VjaCA9IGQuYWN0aXZlVG91Y2g7XG4gICAgICAgIHByZXZUb3VjaC5lbmQgPSArbmV3IERhdGU7XG4gICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBpc01vdXNlTGlrZVRvdWNoRXZlbnQoZSkge1xuICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggIT0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdO1xuICAgICAgcmV0dXJuIHRvdWNoLnJhZGl1c1ggPD0gMSAmJiB0b3VjaC5yYWRpdXNZIDw9IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZhckF3YXkodG91Y2gsIG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIubGVmdCA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHZhciBkeCA9IG90aGVyLmxlZnQgLSB0b3VjaC5sZWZ0LCBkeSA9IG90aGVyLnRvcCAtIHRvdWNoLnRvcDtcbiAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSA+IDIwICogMjA7XG4gICAgfVxuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSAmJiAhaXNNb3VzZUxpa2VUb3VjaEV2ZW50KGUpKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0b3VjaEZpbmlzaGVkKTtcbiAgICAgICAgdmFyIG5vdyA9ICtuZXcgRGF0ZTtcbiAgICAgICAgZC5hY3RpdmVUb3VjaCA9IHtzdGFydDogbm93LCBtb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgcHJldjogbm93IC0gcHJldlRvdWNoLmVuZCA8PSAzMDAgPyBwcmV2VG91Y2ggOiBudWxsfTtcbiAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIGQuYWN0aXZlVG91Y2gubGVmdCA9IGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICBkLmFjdGl2ZVRvdWNoLnRvcCA9IGUudG91Y2hlc1swXS5wYWdlWTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGQuYWN0aXZlVG91Y2gpIGQuYWN0aXZlVG91Y2gubW92ZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hlbmRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHRvdWNoID0gZC5hY3RpdmVUb3VjaDtcbiAgICAgIGlmICh0b3VjaCAmJiAhZXZlbnRJbldpZGdldChkLCBlKSAmJiB0b3VjaC5sZWZ0ICE9IG51bGwgJiZcbiAgICAgICAgICAhdG91Y2gubW92ZWQgJiYgbmV3IERhdGUgLSB0b3VjaC5zdGFydCA8IDMwMCkge1xuICAgICAgICB2YXIgcG9zID0gY20uY29vcmRzQ2hhcihkLmFjdGl2ZVRvdWNoLCBcInBhZ2VcIiksIHJhbmdlO1xuICAgICAgICBpZiAoIXRvdWNoLnByZXYgfHwgZmFyQXdheSh0b3VjaCwgdG91Y2gucHJldikpIC8vIFNpbmdsZSB0YXBcbiAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShwb3MsIHBvcyk7XG4gICAgICAgIGVsc2UgaWYgKCF0b3VjaC5wcmV2LnByZXYgfHwgZmFyQXdheSh0b3VjaCwgdG91Y2gucHJldi5wcmV2KSkgLy8gRG91YmxlIHRhcFxuICAgICAgICAgIHJhbmdlID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICBlbHNlIC8vIFRyaXBsZSB0YXBcbiAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGNtLmRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTtcbiAgICAgICAgY20uc2V0U2VsZWN0aW9uKHJhbmdlLmFuY2hvciwgcmFuZ2UuaGVhZCk7XG4gICAgICAgIGNtLmZvY3VzKCk7XG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICB9XG4gICAgICBmaW5pc2hUb3VjaCgpO1xuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hjYW5jZWxcIiwgZmluaXNoVG91Y2gpO1xuXG4gICAgLy8gU3luYyBzY3JvbGxpbmcgYmV0d2VlbiBmYWtlIHNjcm9sbGJhcnMgYW5kIHJlYWwgc2Nyb2xsYWJsZVxuICAgIC8vIGFyZWEsIGVuc3VyZSB2aWV3cG9ydCBpcyB1cGRhdGVkIHdoZW4gc2Nyb2xsaW5nLlxuICAgIG9uKGQuc2Nyb2xsZXIsIFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGQuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHNldFNjcm9sbFRvcChjbSwgZC5zY3JvbGxlci5zY3JvbGxUb3ApO1xuICAgICAgICBzZXRTY3JvbGxMZWZ0KGNtLCBkLnNjcm9sbGVyLnNjcm9sbExlZnQsIHRydWUpO1xuICAgICAgICBzaWduYWwoY20sIFwic2Nyb2xsXCIsIGNtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiB0byB3aGVlbCBldmVudHMgaW4gb3JkZXIgdG8gdHJ5IGFuZCB1cGRhdGUgdGhlIHZpZXdwb3J0IG9uIHRpbWUuXG4gICAgb24oZC5zY3JvbGxlciwgXCJtb3VzZXdoZWVsXCIsIGZ1bmN0aW9uKGUpe29uU2Nyb2xsV2hlZWwoY20sIGUpO30pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwiRE9NTW91c2VTY3JvbGxcIiwgZnVuY3Rpb24oZSl7b25TY3JvbGxXaGVlbChjbSwgZSk7fSk7XG5cbiAgICAvLyBQcmV2ZW50IHdyYXBwZXIgZnJvbSBldmVyIHNjcm9sbGluZ1xuICAgIG9uKGQud3JhcHBlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7IGQud3JhcHBlci5zY3JvbGxUb3AgPSBkLndyYXBwZXIuc2Nyb2xsTGVmdCA9IDA7IH0pO1xuXG4gICAgZC5kcmFnRnVuY3Rpb25zID0ge1xuICAgICAgZW50ZXI6IGZ1bmN0aW9uKGUpIHtpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSkgZV9zdG9wKGUpO30sXG4gICAgICBvdmVyOiBmdW5jdGlvbihlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIHsgb25EcmFnT3ZlcihjbSwgZSk7IGVfc3RvcChlKTsgfX0sXG4gICAgICBzdGFydDogZnVuY3Rpb24oZSl7b25EcmFnU3RhcnQoY20sIGUpO30sXG4gICAgICBkcm9wOiBvcGVyYXRpb24oY20sIG9uRHJvcCksXG4gICAgICBsZWF2ZTogZnVuY3Rpb24oZSkge2lmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IGNsZWFyRHJhZ0N1cnNvcihjbSk7IH19XG4gICAgfTtcblxuICAgIHZhciBpbnAgPSBkLmlucHV0LmdldEZpZWxkKCk7XG4gICAgb24oaW5wLCBcImtleXVwXCIsIGZ1bmN0aW9uKGUpIHsgb25LZXlVcC5jYWxsKGNtLCBlKTsgfSk7XG4gICAgb24oaW5wLCBcImtleWRvd25cIiwgb3BlcmF0aW9uKGNtLCBvbktleURvd24pKTtcbiAgICBvbihpbnAsIFwia2V5cHJlc3NcIiwgb3BlcmF0aW9uKGNtLCBvbktleVByZXNzKSk7XG4gICAgb24oaW5wLCBcImZvY3VzXCIsIGJpbmQob25Gb2N1cywgY20pKTtcbiAgICBvbihpbnAsIFwiYmx1clwiLCBiaW5kKG9uQmx1ciwgY20pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdEcm9wQ2hhbmdlZChjbSwgdmFsdWUsIG9sZCkge1xuICAgIHZhciB3YXNPbiA9IG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0O1xuICAgIGlmICghdmFsdWUgIT0gIXdhc09uKSB7XG4gICAgICB2YXIgZnVuY3MgPSBjbS5kaXNwbGF5LmRyYWdGdW5jdGlvbnM7XG4gICAgICB2YXIgdG9nZ2xlID0gdmFsdWUgPyBvbiA6IG9mZjtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdzdGFydFwiLCBmdW5jcy5zdGFydCk7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnZW50ZXJcIiwgZnVuY3MuZW50ZXIpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ292ZXJcIiwgZnVuY3Mub3Zlcik7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnbGVhdmVcIiwgZnVuY3MubGVhdmUpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBmdW5jcy5kcm9wKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYWxsZWQgd2hlbiB0aGUgd2luZG93IHJlc2l6ZXNcbiAgZnVuY3Rpb24gb25SZXNpemUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGQubGFzdFdyYXBIZWlnaHQgPT0gZC53cmFwcGVyLmNsaWVudEhlaWdodCAmJiBkLmxhc3RXcmFwV2lkdGggPT0gZC53cmFwcGVyLmNsaWVudFdpZHRoKVxuICAgICAgcmV0dXJuO1xuICAgIC8vIE1pZ2h0IGJlIGEgdGV4dCBzY2FsaW5nIG9wZXJhdGlvbiwgY2xlYXIgc2l6ZSBjYWNoZXMuXG4gICAgZC5jYWNoZWRDaGFyV2lkdGggPSBkLmNhY2hlZFRleHRIZWlnaHQgPSBkLmNhY2hlZFBhZGRpbmdIID0gbnVsbDtcbiAgICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7XG4gICAgY20uc2V0U2l6ZSgpO1xuICB9XG5cbiAgLy8gTU9VU0UgRVZFTlRTXG5cbiAgLy8gUmV0dXJuIHRydWUgd2hlbiB0aGUgZ2l2ZW4gbW91c2UgZXZlbnQgaGFwcGVuZWQgaW4gYSB3aWRnZXRcbiAgZnVuY3Rpb24gZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB7XG4gICAgZm9yICh2YXIgbiA9IGVfdGFyZ2V0KGUpOyBuICE9IGRpc3BsYXkud3JhcHBlcjsgbiA9IG4ucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKCFuIHx8IChuLm5vZGVUeXBlID09IDEgJiYgbi5nZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIpID09IFwidHJ1ZVwiKSB8fFxuICAgICAgICAgIChuLnBhcmVudE5vZGUgPT0gZGlzcGxheS5zaXplciAmJiBuICE9IGRpc3BsYXkubW92ZXIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBHaXZlbiBhIG1vdXNlIGV2ZW50LCBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIHBvc2l0aW9uLiBJZiBsaWJlcmFsXG4gIC8vIGlzIGZhbHNlLCBpdCBjaGVja3Mgd2hldGhlciBhIGd1dHRlciBvciBzY3JvbGxiYXIgd2FzIGNsaWNrZWQsXG4gIC8vIGFuZCByZXR1cm5zIG51bGwgaWYgaXQgd2FzLiBmb3JSZWN0IGlzIHVzZWQgYnkgcmVjdGFuZ3VsYXJcbiAgLy8gc2VsZWN0aW9ucywgYW5kIHRyaWVzIHRvIGVzdGltYXRlIGEgY2hhcmFjdGVyIHBvc2l0aW9uIGV2ZW4gZm9yXG4gIC8vIGNvb3JkaW5hdGVzIGJleW9uZCB0aGUgcmlnaHQgb2YgdGhlIHRleHQuXG4gIGZ1bmN0aW9uIHBvc0Zyb21Nb3VzZShjbSwgZSwgbGliZXJhbCwgZm9yUmVjdCkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWxpYmVyYWwgJiYgZV90YXJnZXQoZSkuZ2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIikgPT0gXCJ0cnVlXCIpIHJldHVybiBudWxsO1xuXG4gICAgdmFyIHgsIHksIHNwYWNlID0gZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gRmFpbHMgdW5wcmVkaWN0YWJseSBvbiBJRVs2N10gd2hlbiBtb3VzZSBpcyBkcmFnZ2VkIGFyb3VuZCBxdWlja2x5LlxuICAgIHRyeSB7IHggPSBlLmNsaWVudFggLSBzcGFjZS5sZWZ0OyB5ID0gZS5jbGllbnRZIC0gc3BhY2UudG9wOyB9XG4gICAgY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGw7IH1cbiAgICB2YXIgY29vcmRzID0gY29vcmRzQ2hhcihjbSwgeCwgeSksIGxpbmU7XG4gICAgaWYgKGZvclJlY3QgJiYgY29vcmRzLnhSZWwgPT0gMSAmJiAobGluZSA9IGdldExpbmUoY20uZG9jLCBjb29yZHMubGluZSkudGV4dCkubGVuZ3RoID09IGNvb3Jkcy5jaCkge1xuICAgICAgdmFyIGNvbERpZmYgPSBjb3VudENvbHVtbihsaW5lLCBsaW5lLmxlbmd0aCwgY20ub3B0aW9ucy50YWJTaXplKSAtIGxpbmUubGVuZ3RoO1xuICAgICAgY29vcmRzID0gUG9zKGNvb3Jkcy5saW5lLCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKCh4IC0gcGFkZGluZ0goY20uZGlzcGxheSkubGVmdCkgLyBjaGFyV2lkdGgoY20uZGlzcGxheSkpIC0gY29sRGlmZikpO1xuICAgIH1cbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG5cbiAgLy8gQSBtb3VzZSBkb3duIGNhbiBiZSBhIHNpbmdsZSBjbGljaywgZG91YmxlIGNsaWNrLCB0cmlwbGUgY2xpY2ssXG4gIC8vIHN0YXJ0IG9mIHNlbGVjdGlvbiBkcmFnLCBzdGFydCBvZiB0ZXh0IGRyYWcsIG5ldyBjdXJzb3JcbiAgLy8gKGN0cmwtY2xpY2spLCByZWN0YW5nbGUgZHJhZyAoYWx0LWRyYWcpLCBvciB4d2luXG4gIC8vIG1pZGRsZS1jbGljay1wYXN0ZS4gT3IgaXQgbWlnaHQgYmUgYSBjbGljayBvbiBzb21ldGhpbmcgd2Ugc2hvdWxkXG4gIC8vIG5vdCBpbnRlcmZlcmUgd2l0aCwgc3VjaCBhcyBhIHNjcm9sbGJhciBvciB3aWRnZXQuXG4gIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGRpc3BsYXkuYWN0aXZlVG91Y2ggJiYgZGlzcGxheS5pbnB1dC5zdXBwb3J0c1RvdWNoKCkpIHJldHVybjtcbiAgICBkaXNwbGF5LnNoaWZ0ID0gZS5zaGlmdEtleTtcblxuICAgIGlmIChldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpKSB7XG4gICAgICBpZiAoIXdlYmtpdCkge1xuICAgICAgICAvLyBCcmllZmx5IHR1cm4gb2ZmIGRyYWdnYWJpbGl0eSwgdG8gYWxsb3cgd2lkZ2V0cyB0byBkb1xuICAgICAgICAvLyBub3JtYWwgZHJhZ2dpbmcgdGhpbmdzLlxuICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSB0cnVlO30sIDEwMCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjbGlja0luR3V0dGVyKGNtLCBlKSkgcmV0dXJuO1xuICAgIHZhciBzdGFydCA9IHBvc0Zyb21Nb3VzZShjbSwgZSk7XG4gICAgd2luZG93LmZvY3VzKCk7XG5cbiAgICBzd2l0Y2ggKGVfYnV0dG9uKGUpKSB7XG4gICAgY2FzZSAxOlxuICAgICAgLy8gIzMyNjE6IG1ha2Ugc3VyZSwgdGhhdCB3ZSdyZSBub3Qgc3RhcnRpbmcgYSBzZWNvbmQgc2VsZWN0aW9uXG4gICAgICBpZiAoY20uc3RhdGUuc2VsZWN0aW5nVGV4dClcbiAgICAgICAgY20uc3RhdGUuc2VsZWN0aW5nVGV4dChlKTtcbiAgICAgIGVsc2UgaWYgKHN0YXJ0KVxuICAgICAgICBsZWZ0QnV0dG9uRG93bihjbSwgZSwgc3RhcnQpO1xuICAgICAgZWxzZSBpZiAoZV90YXJnZXQoZSkgPT0gZGlzcGxheS5zY3JvbGxlcilcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGlmICh3ZWJraXQpIGNtLnN0YXRlLmxhc3RNaWRkbGVEb3duID0gK25ldyBEYXRlO1xuICAgICAgaWYgKHN0YXJ0KSBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBzdGFydCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2Rpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7XG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgaWYgKGNhcHR1cmVSaWdodENsaWNrKSBvbkNvbnRleHRNZW51KGNtLCBlKTtcbiAgICAgIGVsc2UgZGVsYXlCbHVyRXZlbnQoY20pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIGxhc3RDbGljaywgbGFzdERvdWJsZUNsaWNrO1xuICBmdW5jdGlvbiBsZWZ0QnV0dG9uRG93bihjbSwgZSwgc3RhcnQpIHtcbiAgICBpZiAoaWUpIHNldFRpbWVvdXQoYmluZChlbnN1cmVGb2N1cywgY20pLCAwKTtcbiAgICBlbHNlIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG5cbiAgICB2YXIgbm93ID0gK25ldyBEYXRlLCB0eXBlO1xuICAgIGlmIChsYXN0RG91YmxlQ2xpY2sgJiYgbGFzdERvdWJsZUNsaWNrLnRpbWUgPiBub3cgLSA0MDAgJiYgY21wKGxhc3REb3VibGVDbGljay5wb3MsIHN0YXJ0KSA9PSAwKSB7XG4gICAgICB0eXBlID0gXCJ0cmlwbGVcIjtcbiAgICB9IGVsc2UgaWYgKGxhc3RDbGljayAmJiBsYXN0Q2xpY2sudGltZSA+IG5vdyAtIDQwMCAmJiBjbXAobGFzdENsaWNrLnBvcywgc3RhcnQpID09IDApIHtcbiAgICAgIHR5cGUgPSBcImRvdWJsZVwiO1xuICAgICAgbGFzdERvdWJsZUNsaWNrID0ge3RpbWU6IG5vdywgcG9zOiBzdGFydH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSBcInNpbmdsZVwiO1xuICAgICAgbGFzdENsaWNrID0ge3RpbWU6IG5vdywgcG9zOiBzdGFydH07XG4gICAgfVxuXG4gICAgdmFyIHNlbCA9IGNtLmRvYy5zZWwsIG1vZGlmaWVyID0gbWFjID8gZS5tZXRhS2V5IDogZS5jdHJsS2V5LCBjb250YWluZWQ7XG4gICAgaWYgKGNtLm9wdGlvbnMuZHJhZ0Ryb3AgJiYgZHJhZ0FuZERyb3AgJiYgIWNtLmlzUmVhZE9ubHkoKSAmJlxuICAgICAgICB0eXBlID09IFwic2luZ2xlXCIgJiYgKGNvbnRhaW5lZCA9IHNlbC5jb250YWlucyhzdGFydCkpID4gLTEgJiZcbiAgICAgICAgKGNtcCgoY29udGFpbmVkID0gc2VsLnJhbmdlc1tjb250YWluZWRdKS5mcm9tKCksIHN0YXJ0KSA8IDAgfHwgc3RhcnQueFJlbCA+IDApICYmXG4gICAgICAgIChjbXAoY29udGFpbmVkLnRvKCksIHN0YXJ0KSA+IDAgfHwgc3RhcnQueFJlbCA8IDApKVxuICAgICAgbGVmdEJ1dHRvblN0YXJ0RHJhZyhjbSwgZSwgc3RhcnQsIG1vZGlmaWVyKTtcbiAgICBlbHNlXG4gICAgICBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBlLCBzdGFydCwgdHlwZSwgbW9kaWZpZXIpO1xuICB9XG5cbiAgLy8gU3RhcnQgYSB0ZXh0IGRyYWcuIFdoZW4gaXQgZW5kcywgc2VlIGlmIGFueSBkcmFnZ2luZyBhY3R1YWxseVxuICAvLyBoYXBwZW4sIGFuZCB0cmVhdCBhcyBhIGNsaWNrIGlmIGl0IGRpZG4ndC5cbiAgZnVuY3Rpb24gbGVmdEJ1dHRvblN0YXJ0RHJhZyhjbSwgZSwgc3RhcnQsIG1vZGlmaWVyKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzdGFydFRpbWUgPSArbmV3IERhdGU7XG4gICAgdmFyIGRyYWdFbmQgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUyKSB7XG4gICAgICBpZiAod2Via2l0KSBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0ID0gZmFsc2U7XG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2V1cFwiLCBkcmFnRW5kKTtcbiAgICAgIG9mZihkaXNwbGF5LnNjcm9sbGVyLCBcImRyb3BcIiwgZHJhZ0VuZCk7XG4gICAgICBpZiAoTWF0aC5hYnMoZS5jbGllbnRYIC0gZTIuY2xpZW50WCkgKyBNYXRoLmFicyhlLmNsaWVudFkgLSBlMi5jbGllbnRZKSA8IDEwKSB7XG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZTIpO1xuICAgICAgICBpZiAoIW1vZGlmaWVyICYmICtuZXcgRGF0ZSAtIDIwMCA8IHN0YXJ0VGltZSlcbiAgICAgICAgICBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBzdGFydCk7XG4gICAgICAgIC8vIFdvcmsgYXJvdW5kIHVuZXhwbGFpbmFibGUgZm9jdXMgcHJvYmxlbSBpbiBJRTkgKCMyMTI3KSBhbmQgQ2hyb21lICgjMzA4MSlcbiAgICAgICAgaWYgKHdlYmtpdCB8fCBpZSAmJiBpZV92ZXJzaW9uID09IDkpXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtkb2N1bWVudC5ib2R5LmZvY3VzKCk7IGRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gTGV0IHRoZSBkcmFnIGhhbmRsZXIgaGFuZGxlIHRoaXMuXG4gICAgaWYgKHdlYmtpdCkgZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSB0cnVlO1xuICAgIGNtLnN0YXRlLmRyYWdnaW5nVGV4dCA9IGRyYWdFbmQ7XG4gICAgLy8gSUUncyBhcHByb2FjaCB0byBkcmFnZ2FibGVcbiAgICBpZiAoZGlzcGxheS5zY3JvbGxlci5kcmFnRHJvcCkgZGlzcGxheS5zY3JvbGxlci5kcmFnRHJvcCgpO1xuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgZHJhZ0VuZCk7XG4gICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGRyYWdFbmQpO1xuICB9XG5cbiAgLy8gTm9ybWFsIHNlbGVjdGlvbiwgYXMgb3Bwb3NlZCB0byB0ZXh0IGRyYWdnaW5nLlxuICBmdW5jdGlvbiBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBlLCBzdGFydCwgdHlwZSwgYWRkTmV3KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcblxuICAgIHZhciBvdXJSYW5nZSwgb3VySW5kZXgsIHN0YXJ0U2VsID0gZG9jLnNlbCwgcmFuZ2VzID0gc3RhcnRTZWwucmFuZ2VzO1xuICAgIGlmIChhZGROZXcgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIG91ckluZGV4ID0gZG9jLnNlbC5jb250YWlucyhzdGFydCk7XG4gICAgICBpZiAob3VySW5kZXggPiAtMSlcbiAgICAgICAgb3VyUmFuZ2UgPSByYW5nZXNbb3VySW5kZXhdO1xuICAgICAgZWxzZVxuICAgICAgICBvdXJSYW5nZSA9IG5ldyBSYW5nZShzdGFydCwgc3RhcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXJSYW5nZSA9IGRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgb3VySW5kZXggPSBkb2Muc2VsLnByaW1JbmRleDtcbiAgICB9XG5cbiAgICBpZiAoY2hyb21lT1MgPyBlLnNoaWZ0S2V5ICYmIGUubWV0YUtleSA6IGUuYWx0S2V5KSB7XG4gICAgICB0eXBlID0gXCJyZWN0XCI7XG4gICAgICBpZiAoIWFkZE5ldykgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTtcbiAgICAgIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCB0cnVlKTtcbiAgICAgIG91ckluZGV4ID0gLTE7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwiZG91YmxlXCIpIHtcbiAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChzdGFydCk7XG4gICAgICBpZiAoY20uZGlzcGxheS5zaGlmdCB8fCBkb2MuZXh0ZW5kKVxuICAgICAgICBvdXJSYW5nZSA9IGV4dGVuZFJhbmdlKGRvYywgb3VyUmFuZ2UsIHdvcmQuYW5jaG9yLCB3b3JkLmhlYWQpO1xuICAgICAgZWxzZVxuICAgICAgICBvdXJSYW5nZSA9IHdvcmQ7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwidHJpcGxlXCIpIHtcbiAgICAgIHZhciBsaW5lID0gbmV3IFJhbmdlKFBvcyhzdGFydC5saW5lLCAwKSwgY2xpcFBvcyhkb2MsIFBvcyhzdGFydC5saW5lICsgMSwgMCkpKTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpXG4gICAgICAgIG91clJhbmdlID0gZXh0ZW5kUmFuZ2UoZG9jLCBvdXJSYW5nZSwgbGluZS5hbmNob3IsIGxpbmUuaGVhZCk7XG4gICAgICBlbHNlXG4gICAgICAgIG91clJhbmdlID0gbGluZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3VyUmFuZ2UgPSBleHRlbmRSYW5nZShkb2MsIG91clJhbmdlLCBzdGFydCk7XG4gICAgfVxuXG4gICAgaWYgKCFhZGROZXcpIHtcbiAgICAgIG91ckluZGV4ID0gMDtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW291clJhbmdlXSwgMCksIHNlbF9tb3VzZSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIGlmIChvdXJJbmRleCA9PSAtMSkge1xuICAgICAgb3VySW5kZXggPSByYW5nZXMubGVuZ3RoO1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcy5jb25jYXQoW291clJhbmdlXSksIG91ckluZGV4KSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgfSBlbHNlIGlmIChyYW5nZXMubGVuZ3RoID4gMSAmJiByYW5nZXNbb3VySW5kZXhdLmVtcHR5KCkgJiYgdHlwZSA9PSBcInNpbmdsZVwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzLnNsaWNlKG91ckluZGV4ICsgMSkpLCAwKSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBvdXJJbmRleCwgb3VyUmFuZ2UsIHNlbF9tb3VzZSk7XG4gICAgfVxuXG4gICAgdmFyIGxhc3RQb3MgPSBzdGFydDtcbiAgICBmdW5jdGlvbiBleHRlbmRUbyhwb3MpIHtcbiAgICAgIGlmIChjbXAobGFzdFBvcywgcG9zKSA9PSAwKSByZXR1cm47XG4gICAgICBsYXN0UG9zID0gcG9zO1xuXG4gICAgICBpZiAodHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICB2YXIgcmFuZ2VzID0gW10sIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICAgIHZhciBzdGFydENvbCA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBzdGFydC5saW5lKS50ZXh0LCBzdGFydC5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBwb3NDb2wgPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQsIHBvcy5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5taW4oc3RhcnRDb2wsIHBvc0NvbCksIHJpZ2h0ID0gTWF0aC5tYXgoc3RhcnRDb2wsIHBvc0NvbCk7XG4gICAgICAgIGZvciAodmFyIGxpbmUgPSBNYXRoLm1pbihzdGFydC5saW5lLCBwb3MubGluZSksIGVuZCA9IE1hdGgubWluKGNtLmxhc3RMaW5lKCksIE1hdGgubWF4KHN0YXJ0LmxpbmUsIHBvcy5saW5lKSk7XG4gICAgICAgICAgICAgbGluZSA8PSBlbmQ7IGxpbmUrKykge1xuICAgICAgICAgIHZhciB0ZXh0ID0gZ2V0TGluZShkb2MsIGxpbmUpLnRleHQsIGxlZnRQb3MgPSBmaW5kQ29sdW1uKHRleHQsIGxlZnQsIHRhYlNpemUpO1xuICAgICAgICAgIGlmIChsZWZ0ID09IHJpZ2h0KVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGxlZnRQb3MpKSk7XG4gICAgICAgICAgZWxzZSBpZiAodGV4dC5sZW5ndGggPiBsZWZ0UG9zKVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGZpbmRDb2x1bW4odGV4dCwgcmlnaHQsIHRhYlNpemUpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKHN0YXJ0LCBzdGFydCkpO1xuICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oc3RhcnRTZWwucmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzKSwgb3VySW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogXCIqbW91c2VcIiwgc2Nyb2xsOiBmYWxzZX0pO1xuICAgICAgICBjbS5zY3JvbGxJbnRvVmlldyhwb3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9sZFJhbmdlID0gb3VyUmFuZ2U7XG4gICAgICAgIHZhciBhbmNob3IgPSBvbGRSYW5nZS5hbmNob3IsIGhlYWQgPSBwb3M7XG4gICAgICAgIGlmICh0eXBlICE9IFwic2luZ2xlXCIpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PSBcImRvdWJsZVwiKVxuICAgICAgICAgICAgdmFyIHJhbmdlID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTtcbiAgICAgICAgICBpZiAoY21wKHJhbmdlLmFuY2hvciwgYW5jaG9yKSA+IDApIHtcbiAgICAgICAgICAgIGhlYWQgPSByYW5nZS5oZWFkO1xuICAgICAgICAgICAgYW5jaG9yID0gbWluUG9zKG9sZFJhbmdlLmZyb20oKSwgcmFuZ2UuYW5jaG9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZCA9IHJhbmdlLmFuY2hvcjtcbiAgICAgICAgICAgIGFuY2hvciA9IG1heFBvcyhvbGRSYW5nZS50bygpLCByYW5nZS5oZWFkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJhbmdlcyA9IHN0YXJ0U2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICAgICAgcmFuZ2VzW291ckluZGV4XSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgYW5jaG9yKSwgaGVhZCk7XG4gICAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIG91ckluZGV4KSwgc2VsX21vdXNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZWRpdG9yU2l6ZSA9IGRpc3BsYXkud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBVc2VkIHRvIGVuc3VyZSB0aW1lb3V0IHJlLXRyaWVzIGRvbid0IGZpcmUgd2hlbiBhbm90aGVyIGV4dGVuZFxuICAgIC8vIGhhcHBlbmVkIGluIHRoZSBtZWFudGltZSAoY2xlYXJUaW1lb3V0IGlzbid0IHJlbGlhYmxlIC0tIGF0XG4gICAgLy8gbGVhc3Qgb24gQ2hyb21lLCB0aGUgdGltZW91dHMgc3RpbGwgaGFwcGVuIGV2ZW4gd2hlbiBjbGVhcmVkLFxuICAgIC8vIGlmIHRoZSBjbGVhciBoYXBwZW5zIGFmdGVyIHRoZWlyIHNjaGVkdWxlZCBmaXJpbmcgdGltZSkuXG4gICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKGUpIHtcbiAgICAgIHZhciBjdXJDb3VudCA9ICsrY291bnRlcjtcbiAgICAgIHZhciBjdXIgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUsIHR5cGUgPT0gXCJyZWN0XCIpO1xuICAgICAgaWYgKCFjdXIpIHJldHVybjtcbiAgICAgIGlmIChjbXAoY3VyLCBsYXN0UG9zKSAhPSAwKSB7XG4gICAgICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgICAgIGV4dGVuZFRvKGN1cik7XG4gICAgICAgIHZhciB2aXNpYmxlID0gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGRvYyk7XG4gICAgICAgIGlmIChjdXIubGluZSA+PSB2aXNpYmxlLnRvIHx8IGN1ci5saW5lIDwgdmlzaWJsZS5mcm9tKVxuICAgICAgICAgIHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbigpe2lmIChjb3VudGVyID09IGN1ckNvdW50KSBleHRlbmQoZSk7fSksIDE1MCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3V0c2lkZSA9IGUuY2xpZW50WSA8IGVkaXRvclNpemUudG9wID8gLTIwIDogZS5jbGllbnRZID4gZWRpdG9yU2l6ZS5ib3R0b20gPyAyMCA6IDA7XG4gICAgICAgIGlmIChvdXRzaWRlKSBzZXRUaW1lb3V0KG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGNvdW50ZXIgIT0gY3VyQ291bnQpIHJldHVybjtcbiAgICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCArPSBvdXRzaWRlO1xuICAgICAgICAgIGV4dGVuZChlKTtcbiAgICAgICAgfSksIDUwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb25lKGUpIHtcbiAgICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSBmYWxzZTtcbiAgICAgIGNvdW50ZXIgPSBJbmZpbml0eTtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG1vdmUpO1xuICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xuICAgICAgZG9jLmhpc3RvcnkubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1vdmUgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghZV9idXR0b24oZSkpIGRvbmUoZSk7XG4gICAgICBlbHNlIGV4dGVuZChlKTtcbiAgICB9KTtcbiAgICB2YXIgdXAgPSBvcGVyYXRpb24oY20sIGRvbmUpO1xuICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSB1cDtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgbW92ZSk7XG4gICAgb24oZG9jdW1lbnQsIFwibW91c2V1cFwiLCB1cCk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXZlbnQgaGFwcGVuZWQgaW4gdGhlIGd1dHRlciwgYW5kIGZpcmVzIHRoZVxuICAvLyBoYW5kbGVycyBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gIGZ1bmN0aW9uIGd1dHRlckV2ZW50KGNtLCBlLCB0eXBlLCBwcmV2ZW50KSB7XG4gICAgdHJ5IHsgdmFyIG1YID0gZS5jbGllbnRYLCBtWSA9IGUuY2xpZW50WTsgfVxuICAgIGNhdGNoKGUpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKG1YID49IE1hdGguZmxvb3IoY20uZGlzcGxheS5ndXR0ZXJzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0KSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChwcmV2ZW50KSBlX3ByZXZlbnREZWZhdWx0KGUpO1xuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBsaW5lQm94ID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgaWYgKG1ZID4gbGluZUJveC5ib3R0b20gfHwgIWhhc0hhbmRsZXIoY20sIHR5cGUpKSByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpO1xuICAgIG1ZIC09IGxpbmVCb3gudG9wIC0gZGlzcGxheS52aWV3T2Zmc2V0O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBnID0gZGlzcGxheS5ndXR0ZXJzLmNoaWxkTm9kZXNbaV07XG4gICAgICBpZiAoZyAmJiBnLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0ID49IG1YKSB7XG4gICAgICAgIHZhciBsaW5lID0gbGluZUF0SGVpZ2h0KGNtLmRvYywgbVkpO1xuICAgICAgICB2YXIgZ3V0dGVyID0gY20ub3B0aW9ucy5ndXR0ZXJzW2ldO1xuICAgICAgICBzaWduYWwoY20sIHR5cGUsIGNtLCBsaW5lLCBndXR0ZXIsIGUpO1xuICAgICAgICByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrSW5HdXR0ZXIoY20sIGUpIHtcbiAgICByZXR1cm4gZ3V0dGVyRXZlbnQoY20sIGUsIFwiZ3V0dGVyQ2xpY2tcIiwgdHJ1ZSk7XG4gIH1cblxuICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgc3RyYW5nZSBJRSBiZWhhdmlvciB3aGVyZSBpdCdsbCBzb21ldGltZXNcbiAgLy8gcmUtZmlyZSBhIHNlcmllcyBvZiBkcmFnLXJlbGF0ZWQgZXZlbnRzIHJpZ2h0IGFmdGVyIHRoZSBkcm9wICgjMTU1MSlcbiAgdmFyIGxhc3REcm9wID0gMDtcblxuICBmdW5jdGlvbiBvbkRyb3AoZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgY2xlYXJEcmFnQ3Vyc29yKGNtKTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpXG4gICAgICByZXR1cm47XG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICBpZiAoaWUpIGxhc3REcm9wID0gK25ldyBEYXRlO1xuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUpLCBmaWxlcyA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgIGlmICghcG9zIHx8IGNtLmlzUmVhZE9ubHkoKSkgcmV0dXJuO1xuICAgIC8vIE1pZ2h0IGJlIGEgZmlsZSBkcm9wLCBpbiB3aGljaCBjYXNlIHdlIHNpbXBseSBleHRyYWN0IHRoZSB0ZXh0XG4gICAgLy8gYW5kIGluc2VydCBpdC5cbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlKSB7XG4gICAgICB2YXIgbiA9IGZpbGVzLmxlbmd0aCwgdGV4dCA9IEFycmF5KG4pLCByZWFkID0gMDtcbiAgICAgIHZhciBsb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGUsIGkpIHtcbiAgICAgICAgaWYgKGNtLm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzICYmXG4gICAgICAgICAgICBpbmRleE9mKGNtLm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzLCBmaWxlLnR5cGUpID09IC0xKVxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXI7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICBpZiAoL1tcXHgwMC1cXHgwOFxceDBlLVxceDFmXXsyfS8udGVzdChjb250ZW50KSkgY29udGVudCA9IFwiXCI7XG4gICAgICAgICAgdGV4dFtpXSA9IGNvbnRlbnQ7XG4gICAgICAgICAgaWYgKCsrcmVhZCA9PSBuKSB7XG4gICAgICAgICAgICBwb3MgPSBjbGlwUG9zKGNtLmRvYywgcG9zKTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2UgPSB7ZnJvbTogcG9zLCB0bzogcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjbS5kb2Muc3BsaXRMaW5lcyh0ZXh0LmpvaW4oY20uZG9jLmxpbmVTZXBhcmF0b3IoKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFwicGFzdGVcIn07XG4gICAgICAgICAgICBtYWtlQ2hhbmdlKGNtLmRvYywgY2hhbmdlKTtcbiAgICAgICAgICAgIHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcywgY2hhbmdlRW5kKGNoYW5nZSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICAgIH07XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgbG9hZEZpbGUoZmlsZXNbaV0sIGkpO1xuICAgIH0gZWxzZSB7IC8vIE5vcm1hbCBkcm9wXG4gICAgICAvLyBEb24ndCBkbyBhIHJlcGxhY2UgaWYgdGhlIGRyb3AgaGFwcGVuZWQgaW5zaWRlIG9mIHRoZSBzZWxlY3RlZCB0ZXh0LlxuICAgICAgaWYgKGNtLnN0YXRlLmRyYWdnaW5nVGV4dCAmJiBjbS5kb2Muc2VsLmNvbnRhaW5zKHBvcykgPiAtMSkge1xuICAgICAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQoZSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgZWRpdG9yIGlzIHJlLWZvY3VzZWRcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7fSwgMjApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGV4dCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpO1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgIShtYWMgPyBlLmFsdEtleSA6IGUuY3RybEtleSkpXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBjbS5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihwb3MsIHBvcykpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZCkgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIFwiXCIsIHNlbGVjdGVkW2ldLmFuY2hvciwgc2VsZWN0ZWRbaV0uaGVhZCwgXCJkcmFnXCIpO1xuICAgICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24odGV4dCwgXCJhcm91bmRcIiwgXCJwYXN0ZVwiKTtcbiAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoKGUpe31cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdTdGFydChjbSwgZSkge1xuICAgIGlmIChpZSAmJiAoIWNtLnN0YXRlLmRyYWdnaW5nVGV4dCB8fCArbmV3IERhdGUgLSBsYXN0RHJvcCA8IDEwMCkpIHsgZV9zdG9wKGUpOyByZXR1cm47IH1cbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpIHJldHVybjtcblxuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJUZXh0XCIsIGNtLmdldFNlbGVjdGlvbigpKTtcbiAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJjb3B5TW92ZVwiXG5cbiAgICAvLyBVc2UgZHVtbXkgaW1hZ2UgaW5zdGVhZCBvZiBkZWZhdWx0IGJyb3dzZXJzIGltYWdlLlxuICAgIC8vIFJlY2VudCBTYWZhcmkgKH42LjAuMikgaGF2ZSBhIHRlbmRlbmN5IHRvIHNlZ2ZhdWx0IHdoZW4gdGhpcyBoYXBwZW5zLCBzbyB3ZSBkb24ndCBkbyBpdCB0aGVyZS5cbiAgICBpZiAoZS5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlICYmICFzYWZhcmkpIHtcbiAgICAgIHZhciBpbWcgPSBlbHQoXCJpbWdcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IDA7IHRvcDogMDtcIik7XG4gICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PVwiO1xuICAgICAgaWYgKHByZXN0bykge1xuICAgICAgICBpbWcud2lkdGggPSBpbWcuaGVpZ2h0ID0gMTtcbiAgICAgICAgY20uZGlzcGxheS53cmFwcGVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgIC8vIEZvcmNlIGEgcmVsYXlvdXQsIG9yIE9wZXJhIHdvbid0IHVzZSBvdXIgaW1hZ2UgZm9yIHNvbWUgb2JzY3VyZSByZWFzb25cbiAgICAgICAgaW1nLl90b3AgPSBpbWcub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGltZywgMCwgMCk7XG4gICAgICBpZiAocHJlc3RvKSBpbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ092ZXIoY20sIGUpIHtcbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICBpZiAoIXBvcykgcmV0dXJuO1xuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIHBvcywgZnJhZyk7XG4gICAgaWYgKCFjbS5kaXNwbGF5LmRyYWdDdXJzb3IpIHtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItY3Vyc29ycyBDb2RlTWlycm9yLWRyYWdjdXJzb3JzXCIpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuaW5zZXJ0QmVmb3JlKGNtLmRpc3BsYXkuZHJhZ0N1cnNvciwgY20uZGlzcGxheS5jdXJzb3JEaXYpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmRyYWdDdXJzb3IsIGZyYWcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJEcmFnQ3Vyc29yKGNtKSB7XG4gICAgaWYgKGNtLmRpc3BsYXkuZHJhZ0N1cnNvcikge1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoY20uZGlzcGxheS5kcmFnQ3Vyc29yKTtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gU0NST0xMIEVWRU5UU1xuXG4gIC8vIFN5bmMgdGhlIHNjcm9sbGFibGUgYXJlYSBhbmQgc2Nyb2xsYmFycywgZW5zdXJlIHRoZSB2aWV3cG9ydFxuICAvLyBjb3ZlcnMgdGhlIHZpc2libGUgYXJlYS5cbiAgZnVuY3Rpb24gc2V0U2Nyb2xsVG9wKGNtLCB2YWwpIHtcbiAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbFRvcCAtIHZhbCkgPCAyKSByZXR1cm47XG4gICAgY20uZG9jLnNjcm9sbFRvcCA9IHZhbDtcbiAgICBpZiAoIWdlY2tvKSB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB7dG9wOiB2YWx9KTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgIT0gdmFsKSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IHZhbDtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKHZhbCk7XG4gICAgaWYgKGdlY2tvKSB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtKTtcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcbiAgfVxuICAvLyBTeW5jIHNjcm9sbGVyIGFuZCBzY3JvbGxiYXIsIGVuc3VyZSB0aGUgZ3V0dGVyIGVsZW1lbnRzIGFyZVxuICAvLyBhbGlnbmVkLlxuICBmdW5jdGlvbiBzZXRTY3JvbGxMZWZ0KGNtLCB2YWwsIGlzU2Nyb2xsZXIpIHtcbiAgICBpZiAoaXNTY3JvbGxlciA/IHZhbCA9PSBjbS5kb2Muc2Nyb2xsTGVmdCA6IE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gdmFsKSA8IDIpIHJldHVybjtcbiAgICB2YWwgPSBNYXRoLm1pbih2YWwsIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoKTtcbiAgICBjbS5kb2Muc2Nyb2xsTGVmdCA9IHZhbDtcbiAgICBhbGlnbkhvcml6b250YWxseShjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCAhPSB2YWwpIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCA9IHZhbDtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdCh2YWwpO1xuICB9XG5cbiAgLy8gU2luY2UgdGhlIGRlbHRhIHZhbHVlcyByZXBvcnRlZCBvbiBtb3VzZSB3aGVlbCBldmVudHMgYXJlXG4gIC8vIHVuc3RhbmRhcmRpemVkIGJldHdlZW4gYnJvd3NlcnMgYW5kIGV2ZW4gYnJvd3NlciB2ZXJzaW9ucywgYW5kXG4gIC8vIGdlbmVyYWxseSBob3JyaWJseSB1bnByZWRpY3RhYmxlLCB0aGlzIGNvZGUgc3RhcnRzIGJ5IG1lYXN1cmluZ1xuICAvLyB0aGUgc2Nyb2xsIGVmZmVjdCB0aGF0IHRoZSBmaXJzdCBmZXcgbW91c2Ugd2hlZWwgZXZlbnRzIGhhdmUsXG4gIC8vIGFuZCwgZnJvbSB0aGF0LCBkZXRlY3RzIHRoZSB3YXkgaXQgY2FuIGNvbnZlcnQgZGVsdGFzIHRvIHBpeGVsXG4gIC8vIG9mZnNldHMgYWZ0ZXJ3YXJkcy5cbiAgLy9cbiAgLy8gVGhlIHJlYXNvbiB3ZSB3YW50IHRvIGtub3cgdGhlIGFtb3VudCBhIHdoZWVsIGV2ZW50IHdpbGwgc2Nyb2xsXG4gIC8vIGlzIHRoYXQgaXQgZ2l2ZXMgdXMgYSBjaGFuY2UgdG8gdXBkYXRlIHRoZSBkaXNwbGF5IGJlZm9yZSB0aGVcbiAgLy8gYWN0dWFsIHNjcm9sbGluZyBoYXBwZW5zLCByZWR1Y2luZyBmbGlja2VyaW5nLlxuXG4gIHZhciB3aGVlbFNhbXBsZXMgPSAwLCB3aGVlbFBpeGVsc1BlclVuaXQgPSBudWxsO1xuICAvLyBGaWxsIGluIGEgYnJvd3Nlci1kZXRlY3RlZCBzdGFydGluZyB2YWx1ZSBvbiBicm93c2VycyB3aGVyZSB3ZVxuICAvLyBrbm93IG9uZS4gVGhlc2UgZG9uJ3QgaGF2ZSB0byBiZSBhY2N1cmF0ZSAtLSB0aGUgcmVzdWx0IG9mIHRoZW1cbiAgLy8gYmVpbmcgd3Jvbmcgd291bGQganVzdCBiZSBhIHNsaWdodCBmbGlja2VyIG9uIHRoZSBmaXJzdCB3aGVlbFxuICAvLyBzY3JvbGwgKGlmIGl0IGlzIGxhcmdlIGVub3VnaCkuXG4gIGlmIChpZSkgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS41MztcbiAgZWxzZSBpZiAoZ2Vja28pIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IDE1O1xuICBlbHNlIGlmIChjaHJvbWUpIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IC0uNztcbiAgZWxzZSBpZiAoc2FmYXJpKSB3aGVlbFBpeGVsc1BlclVuaXQgPSAtMS8zO1xuXG4gIHZhciB3aGVlbEV2ZW50RGVsdGEgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGR4ID0gZS53aGVlbERlbHRhWCwgZHkgPSBlLndoZWVsRGVsdGFZO1xuICAgIGlmIChkeCA9PSBudWxsICYmIGUuZGV0YWlsICYmIGUuYXhpcyA9PSBlLkhPUklaT05UQUxfQVhJUykgZHggPSBlLmRldGFpbDtcbiAgICBpZiAoZHkgPT0gbnVsbCAmJiBlLmRldGFpbCAmJiBlLmF4aXMgPT0gZS5WRVJUSUNBTF9BWElTKSBkeSA9IGUuZGV0YWlsO1xuICAgIGVsc2UgaWYgKGR5ID09IG51bGwpIGR5ID0gZS53aGVlbERlbHRhO1xuICAgIHJldHVybiB7eDogZHgsIHk6IGR5fTtcbiAgfTtcbiAgQ29kZU1pcnJvci53aGVlbEV2ZW50UGl4ZWxzID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBkZWx0YSA9IHdoZWVsRXZlbnREZWx0YShlKTtcbiAgICBkZWx0YS54ICo9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICBkZWx0YS55ICo9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICByZXR1cm4gZGVsdGE7XG4gIH07XG5cbiAgZnVuY3Rpb24gb25TY3JvbGxXaGVlbChjbSwgZSkge1xuICAgIHZhciBkZWx0YSA9IHdoZWVsRXZlbnREZWx0YShlKSwgZHggPSBkZWx0YS54LCBkeSA9IGRlbHRhLnk7XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHNjcm9sbCA9IGRpc3BsYXkuc2Nyb2xsZXI7XG4gICAgLy8gUXVpdCBpZiB0aGVyZSdzIG5vdGhpbmcgdG8gc2Nyb2xsIGhlcmVcbiAgICB2YXIgY2FuU2Nyb2xsWCA9IHNjcm9sbC5zY3JvbGxXaWR0aCA+IHNjcm9sbC5jbGllbnRXaWR0aDtcbiAgICB2YXIgY2FuU2Nyb2xsWSA9IHNjcm9sbC5zY3JvbGxIZWlnaHQgPiBzY3JvbGwuY2xpZW50SGVpZ2h0O1xuICAgIGlmICghKGR4ICYmIGNhblNjcm9sbFggfHwgZHkgJiYgY2FuU2Nyb2xsWSkpIHJldHVybjtcblxuICAgIC8vIFdlYmtpdCBicm93c2VycyBvbiBPUyBYIGFib3J0IG1vbWVudHVtIHNjcm9sbHMgd2hlbiB0aGUgdGFyZ2V0XG4gICAgLy8gb2YgdGhlIHNjcm9sbCBldmVudCBpcyByZW1vdmVkIGZyb20gdGhlIHNjcm9sbGFibGUgZWxlbWVudC5cbiAgICAvLyBUaGlzIGhhY2sgKHNlZSByZWxhdGVkIGNvZGUgaW4gcGF0Y2hEaXNwbGF5KSBtYWtlcyBzdXJlIHRoZVxuICAgIC8vIGVsZW1lbnQgaXMga2VwdCBhcm91bmQuXG4gICAgaWYgKGR5ICYmIG1hYyAmJiB3ZWJraXQpIHtcbiAgICAgIG91dGVyOiBmb3IgKHZhciBjdXIgPSBlLnRhcmdldCwgdmlldyA9IGRpc3BsYXkudmlldzsgY3VyICE9IHNjcm9sbDsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHZpZXdbaV0ubm9kZSA9PSBjdXIpIHtcbiAgICAgICAgICAgIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID0gY3VyO1xuICAgICAgICAgICAgYnJlYWsgb3V0ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT24gc29tZSBicm93c2VycywgaG9yaXpvbnRhbCBzY3JvbGxpbmcgd2lsbCBjYXVzZSByZWRyYXdzIHRvXG4gICAgLy8gaGFwcGVuIGJlZm9yZSB0aGUgZ3V0dGVyIGhhcyBiZWVuIHJlYWxpZ25lZCwgY2F1c2luZyBpdCB0b1xuICAgIC8vIHdyaWdnbGUgYXJvdW5kIGluIGEgbW9zdCB1bnNlZW1seSB3YXkuIFdoZW4gd2UgaGF2ZSBhblxuICAgIC8vIGVzdGltYXRlZCBwaXhlbHMvZGVsdGEgdmFsdWUsIHdlIGp1c3QgaGFuZGxlIGhvcml6b250YWxcbiAgICAvLyBzY3JvbGxpbmcgZW50aXJlbHkgaGVyZS4gSXQnbGwgYmUgc2xpZ2h0bHkgb2ZmIGZyb20gbmF0aXZlLCBidXRcbiAgICAvLyBiZXR0ZXIgdGhhbiBnbGl0Y2hpbmcgb3V0LlxuICAgIGlmIChkeCAmJiAhZ2Vja28gJiYgIXByZXN0byAmJiB3aGVlbFBpeGVsc1BlclVuaXQgIT0gbnVsbCkge1xuICAgICAgaWYgKGR5ICYmIGNhblNjcm9sbFkpXG4gICAgICAgIHNldFNjcm9sbFRvcChjbSwgTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsLnNjcm9sbFRvcCArIGR5ICogd2hlZWxQaXhlbHNQZXJVbml0LCBzY3JvbGwuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsLmNsaWVudEhlaWdodCkpKTtcbiAgICAgIHNldFNjcm9sbExlZnQoY20sIE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbC5zY3JvbGxMZWZ0ICsgZHggKiB3aGVlbFBpeGVsc1BlclVuaXQsIHNjcm9sbC5zY3JvbGxXaWR0aCAtIHNjcm9sbC5jbGllbnRXaWR0aCkpKTtcbiAgICAgIC8vIE9ubHkgcHJldmVudCBkZWZhdWx0IHNjcm9sbGluZyBpZiB2ZXJ0aWNhbCBzY3JvbGxpbmcgaXNcbiAgICAgIC8vIGFjdHVhbGx5IHBvc3NpYmxlLiBPdGhlcndpc2UsIGl0IGNhdXNlcyB2ZXJ0aWNhbCBzY3JvbGxcbiAgICAgIC8vIGppdHRlciBvbiBPU1ggdHJhY2twYWRzIHdoZW4gZGVsdGFYIGlzIHNtYWxsIGFuZCBkZWx0YVlcbiAgICAgIC8vIGlzIGxhcmdlIChpc3N1ZSAjMzU3OSlcbiAgICAgIGlmICghZHkgfHwgKGR5ICYmIGNhblNjcm9sbFkpKVxuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IG51bGw7IC8vIEFib3J0IG1lYXN1cmVtZW50LCBpZiBpbiBwcm9ncmVzc1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vICdQcm9qZWN0JyB0aGUgdmlzaWJsZSB2aWV3cG9ydCB0byBjb3ZlciB0aGUgYXJlYSB0aGF0IGlzIGJlaW5nXG4gICAgLy8gc2Nyb2xsZWQgaW50byB2aWV3IChpZiB3ZSBrbm93IGVub3VnaCB0byBlc3RpbWF0ZSBpdCkuXG4gICAgaWYgKGR5ICYmIHdoZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcGl4ZWxzID0gZHkgKiB3aGVlbFBpeGVsc1BlclVuaXQ7XG4gICAgICB2YXIgdG9wID0gY20uZG9jLnNjcm9sbFRvcCwgYm90ID0gdG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICAgIGlmIChwaXhlbHMgPCAwKSB0b3AgPSBNYXRoLm1heCgwLCB0b3AgKyBwaXhlbHMgLSA1MCk7XG4gICAgICBlbHNlIGJvdCA9IE1hdGgubWluKGNtLmRvYy5oZWlnaHQsIGJvdCArIHBpeGVscyArIDUwKTtcbiAgICAgIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHRvcCwgYm90dG9tOiBib3R9KTtcbiAgICB9XG5cbiAgICBpZiAod2hlZWxTYW1wbGVzIDwgMjApIHtcbiAgICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYID09IG51bGwpIHtcbiAgICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IHNjcm9sbC5zY3JvbGxMZWZ0OyBkaXNwbGF5LndoZWVsU3RhcnRZID0gc2Nyb2xsLnNjcm9sbFRvcDtcbiAgICAgICAgZGlzcGxheS53aGVlbERYID0gZHg7IGRpc3BsYXkud2hlZWxEWSA9IGR5O1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYID09IG51bGwpIHJldHVybjtcbiAgICAgICAgICB2YXIgbW92ZWRYID0gc2Nyb2xsLnNjcm9sbExlZnQgLSBkaXNwbGF5LndoZWVsU3RhcnRYO1xuICAgICAgICAgIHZhciBtb3ZlZFkgPSBzY3JvbGwuc2Nyb2xsVG9wIC0gZGlzcGxheS53aGVlbFN0YXJ0WTtcbiAgICAgICAgICB2YXIgc2FtcGxlID0gKG1vdmVkWSAmJiBkaXNwbGF5LndoZWVsRFkgJiYgbW92ZWRZIC8gZGlzcGxheS53aGVlbERZKSB8fFxuICAgICAgICAgICAgKG1vdmVkWCAmJiBkaXNwbGF5LndoZWVsRFggJiYgbW92ZWRYIC8gZGlzcGxheS53aGVlbERYKTtcbiAgICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gZGlzcGxheS53aGVlbFN0YXJ0WSA9IG51bGw7XG4gICAgICAgICAgaWYgKCFzYW1wbGUpIHJldHVybjtcbiAgICAgICAgICB3aGVlbFBpeGVsc1BlclVuaXQgPSAod2hlZWxQaXhlbHNQZXJVbml0ICogd2hlZWxTYW1wbGVzICsgc2FtcGxlKSAvICh3aGVlbFNhbXBsZXMgKyAxKTtcbiAgICAgICAgICArK3doZWVsU2FtcGxlcztcbiAgICAgICAgfSwgMjAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BsYXkud2hlZWxEWCArPSBkeDsgZGlzcGxheS53aGVlbERZICs9IGR5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEtFWSBFVkVOVFNcblxuICAvLyBSdW4gYSBoYW5kbGVyIHRoYXQgd2FzIGJvdW5kIHRvIGEga2V5LlxuICBmdW5jdGlvbiBkb0hhbmRsZUJpbmRpbmcoY20sIGJvdW5kLCBkcm9wU2hpZnQpIHtcbiAgICBpZiAodHlwZW9mIGJvdW5kID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGJvdW5kID0gY29tbWFuZHNbYm91bmRdO1xuICAgICAgaWYgKCFib3VuZCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgcHJldmlvdXMgaW5wdXQgaGFzIGJlZW4gcmVhZCwgc28gdGhhdCB0aGUgaGFuZGxlciBzZWVzIGFcbiAgICAvLyBjb25zaXN0ZW50IHZpZXcgb2YgdGhlIGRvY3VtZW50XG4gICAgY20uZGlzcGxheS5pbnB1dC5lbnN1cmVQb2xsZWQoKTtcbiAgICB2YXIgcHJldlNoaWZ0ID0gY20uZGlzcGxheS5zaGlmdCwgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoY20uaXNSZWFkT25seSgpKSBjbS5zdGF0ZS5zdXBwcmVzc0VkaXRzID0gdHJ1ZTtcbiAgICAgIGlmIChkcm9wU2hpZnQpIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTtcbiAgICAgIGRvbmUgPSBib3VuZChjbSkgIT0gUGFzcztcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY20uZGlzcGxheS5zaGlmdCA9IHByZXZTaGlmdDtcbiAgICAgIGNtLnN0YXRlLnN1cHByZXNzRWRpdHMgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGRvbmU7XG4gIH1cblxuICBmdW5jdGlvbiBsb29rdXBLZXlGb3JFZGl0b3IoY20sIG5hbWUsIGhhbmRsZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uc3RhdGUua2V5TWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJlc3VsdCA9IGxvb2t1cEtleShuYW1lLCBjbS5zdGF0ZS5rZXlNYXBzW2ldLCBoYW5kbGUsIGNtKTtcbiAgICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiAoY20ub3B0aW9ucy5leHRyYUtleXMgJiYgbG9va3VwS2V5KG5hbWUsIGNtLm9wdGlvbnMuZXh0cmFLZXlzLCBoYW5kbGUsIGNtKSlcbiAgICAgIHx8IGxvb2t1cEtleShuYW1lLCBjbS5vcHRpb25zLmtleU1hcCwgaGFuZGxlLCBjbSk7XG4gIH1cblxuICB2YXIgc3RvcFNlcSA9IG5ldyBEZWxheWVkO1xuICBmdW5jdGlvbiBkaXNwYXRjaEtleShjbSwgbmFtZSwgZSwgaGFuZGxlKSB7XG4gICAgdmFyIHNlcSA9IGNtLnN0YXRlLmtleVNlcTtcbiAgICBpZiAoc2VxKSB7XG4gICAgICBpZiAoaXNNb2RpZmllcktleShuYW1lKSkgcmV0dXJuIFwiaGFuZGxlZFwiO1xuICAgICAgc3RvcFNlcS5zZXQoNTAsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY20uc3RhdGUua2V5U2VxID09IHNlcSkge1xuICAgICAgICAgIGNtLnN0YXRlLmtleVNlcSA9IG51bGw7XG4gICAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG5hbWUgPSBzZXEgKyBcIiBcIiArIG5hbWU7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXlGb3JFZGl0b3IoY20sIG5hbWUsIGhhbmRsZSk7XG5cbiAgICBpZiAocmVzdWx0ID09IFwibXVsdGlcIilcbiAgICAgIGNtLnN0YXRlLmtleVNlcSA9IG5hbWU7XG4gICAgaWYgKHJlc3VsdCA9PSBcImhhbmRsZWRcIilcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImtleUhhbmRsZWRcIiwgY20sIG5hbWUsIGUpO1xuXG4gICAgaWYgKHJlc3VsdCA9PSBcImhhbmRsZWRcIiB8fCByZXN1bHQgPT0gXCJtdWx0aVwiKSB7XG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgcmVzdGFydEJsaW5rKGNtKTtcbiAgICB9XG5cbiAgICBpZiAoc2VxICYmICFyZXN1bHQgJiYgL1xcJyQvLnRlc3QobmFtZSkpIHtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmVzdWx0O1xuICB9XG5cbiAgLy8gSGFuZGxlIGEga2V5IGZyb20gdGhlIGtleWRvd24gZXZlbnQuXG4gIGZ1bmN0aW9uIGhhbmRsZUtleUJpbmRpbmcoY20sIGUpIHtcbiAgICB2YXIgbmFtZSA9IGtleU5hbWUoZSwgdHJ1ZSk7XG4gICAgaWYgKCFuYW1lKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoZS5zaGlmdEtleSAmJiAhY20uc3RhdGUua2V5U2VxKSB7XG4gICAgICAvLyBGaXJzdCB0cnkgdG8gcmVzb2x2ZSBmdWxsIG5hbWUgKGluY2x1ZGluZyAnU2hpZnQtJykuIEZhaWxpbmdcbiAgICAgIC8vIHRoYXQsIHNlZSBpZiB0aGVyZSBpcyBhIGN1cnNvci1tb3Rpb24gY29tbWFuZCAoc3RhcnRpbmcgd2l0aFxuICAgICAgLy8gJ2dvJykgYm91bmQgdG8gdGhlIGtleW5hbWUgd2l0aG91dCAnU2hpZnQtJy5cbiAgICAgIHJldHVybiBkaXNwYXRjaEtleShjbSwgXCJTaGlmdC1cIiArIG5hbWUsIGUsIGZ1bmN0aW9uKGIpIHtyZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiLCB0cnVlKTt9KVxuICAgICAgICAgIHx8IGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT0gXCJzdHJpbmdcIiA/IC9eZ29bQS1aXS8udGVzdChiKSA6IGIubW90aW9uKVxuICAgICAgICAgICAgICAgICByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKTtcbiAgICAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbihiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIpOyB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5cHJlc3MgZXZlbnRcbiAgZnVuY3Rpb24gaGFuZGxlQ2hhckJpbmRpbmcoY20sIGUsIGNoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBcIidcIiArIGNoICsgXCInXCIsIGUsXG4gICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYiwgdHJ1ZSk7IH0pO1xuICB9XG5cbiAgdmFyIGxhc3RTdG9wcGVkS2V5ID0gbnVsbDtcbiAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuO1xuICAgIC8vIElFIGRvZXMgc3RyYW5nZSB0aGluZ3Mgd2l0aCBlc2NhcGUuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSAmJiBlLmtleUNvZGUgPT0gMjcpIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB2YXIgY29kZSA9IGUua2V5Q29kZTtcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gY29kZSA9PSAxNiB8fCBlLnNoaWZ0S2V5O1xuICAgIHZhciBoYW5kbGVkID0gaGFuZGxlS2V5QmluZGluZyhjbSwgZSk7XG4gICAgaWYgKHByZXN0bykge1xuICAgICAgbGFzdFN0b3BwZWRLZXkgPSBoYW5kbGVkID8gY29kZSA6IG51bGw7XG4gICAgICAvLyBPcGVyYSBoYXMgbm8gY3V0IGV2ZW50Li4uIHdlIHRyeSB0byBhdCBsZWFzdCBjYXRjaCB0aGUga2V5IGNvbWJvXG4gICAgICBpZiAoIWhhbmRsZWQgJiYgY29kZSA9PSA4OCAmJiAhaGFzQ29weUV2ZW50ICYmIChtYWMgPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXkpKVxuICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXCIsIG51bGwsIFwiY3V0XCIpO1xuICAgIH1cblxuICAgIC8vIFR1cm4gbW91c2UgaW50byBjcm9zc2hhaXIgd2hlbiBBbHQgaXMgaGVsZCBvbiBNYWMuXG4gICAgaWYgKGNvZGUgPT0gMTggJiYgIS9cXGJDb2RlTWlycm9yLWNyb3NzaGFpclxcYi8udGVzdChjbS5kaXNwbGF5LmxpbmVEaXYuY2xhc3NOYW1lKSlcbiAgICAgIHNob3dDcm9zc0hhaXIoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Nyb3NzSGFpcihjbSkge1xuICAgIHZhciBsaW5lRGl2ID0gY20uZGlzcGxheS5saW5lRGl2O1xuICAgIGFkZENsYXNzKGxpbmVEaXYsIFwiQ29kZU1pcnJvci1jcm9zc2hhaXJcIik7XG5cbiAgICBmdW5jdGlvbiB1cChlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09IDE4IHx8ICFlLmFsdEtleSkge1xuICAgICAgICBybUNsYXNzKGxpbmVEaXYsIFwiQ29kZU1pcnJvci1jcm9zc2hhaXJcIik7XG4gICAgICAgIG9mZihkb2N1bWVudCwgXCJrZXl1cFwiLCB1cCk7XG4gICAgICAgIG9mZihkb2N1bWVudCwgXCJtb3VzZW92ZXJcIiwgdXApO1xuICAgICAgfVxuICAgIH1cbiAgICBvbihkb2N1bWVudCwgXCJrZXl1cFwiLCB1cCk7XG4gICAgb24oZG9jdW1lbnQsIFwibW91c2VvdmVyXCIsIHVwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5VXAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT0gMTYpIHRoaXMuZG9jLnNlbC5zaGlmdCA9IGZhbHNlO1xuICAgIHNpZ25hbERPTUV2ZW50KHRoaXMsIGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlQcmVzcyhlKSB7XG4gICAgdmFyIGNtID0gdGhpcztcbiAgICBpZiAoZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkgfHwgZS5jdHJsS2V5ICYmICFlLmFsdEtleSB8fCBtYWMgJiYgZS5tZXRhS2V5KSByZXR1cm47XG4gICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUsIGNoYXJDb2RlID0gZS5jaGFyQ29kZTtcbiAgICBpZiAocHJlc3RvICYmIGtleUNvZGUgPT0gbGFzdFN0b3BwZWRLZXkpIHtsYXN0U3RvcHBlZEtleSA9IG51bGw7IGVfcHJldmVudERlZmF1bHQoZSk7IHJldHVybjt9XG4gICAgaWYgKChwcmVzdG8gJiYgKCFlLndoaWNoIHx8IGUud2hpY2ggPCAxMCkpICYmIGhhbmRsZUtleUJpbmRpbmcoY20sIGUpKSByZXR1cm47XG4gICAgdmFyIGNoID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSA9PSBudWxsID8ga2V5Q29kZSA6IGNoYXJDb2RlKTtcbiAgICBpZiAoaGFuZGxlQ2hhckJpbmRpbmcoY20sIGUsIGNoKSkgcmV0dXJuO1xuICAgIGNtLmRpc3BsYXkuaW5wdXQub25LZXlQcmVzcyhlKTtcbiAgfVxuXG4gIC8vIEZPQ1VTL0JMVVIgRVZFTlRTXG5cbiAgZnVuY3Rpb24gZGVsYXlCbHVyRXZlbnQoY20pIHtcbiAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IHRydWU7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCkge1xuICAgICAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlO1xuICAgICAgICBvbkJsdXIoY20pO1xuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZvY3VzKGNtKSB7XG4gICAgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlO1xuXG4gICAgaWYgKGNtLm9wdGlvbnMucmVhZE9ubHkgPT0gXCJub2N1cnNvclwiKSByZXR1cm47XG4gICAgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICBzaWduYWwoY20sIFwiZm9jdXNcIiwgY20pO1xuICAgICAgY20uc3RhdGUuZm9jdXNlZCA9IHRydWU7XG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci1mb2N1c2VkXCIpO1xuICAgICAgLy8gVGhpcyB0ZXN0IHByZXZlbnRzIHRoaXMgZnJvbSBmaXJpbmcgd2hlbiBhIGNvbnRleHRcbiAgICAgIC8vIG1lbnUgaXMgY2xvc2VkIChzaW5jZSB0aGUgaW5wdXQgcmVzZXQgd291bGQga2lsbCB0aGVcbiAgICAgIC8vIHNlbGVjdC1hbGwgZGV0ZWN0aW9uIGhhY2spXG4gICAgICBpZiAoIWNtLmN1ck9wICYmIGNtLmRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgIT0gY20uZG9jLnNlbCkge1xuICAgICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAgIGlmICh3ZWJraXQpIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXQodHJ1ZSk7IH0sIDIwKTsgLy8gSXNzdWUgIzE3MzBcbiAgICAgIH1cbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVjZWl2ZWRGb2N1cygpO1xuICAgIH1cbiAgICByZXN0YXJ0QmxpbmsoY20pO1xuICB9XG4gIGZ1bmN0aW9uIG9uQmx1cihjbSkge1xuICAgIGlmIChjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIHNpZ25hbChjbSwgXCJibHVyXCIsIGNtKTtcbiAgICAgIGNtLnN0YXRlLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBcIkNvZGVNaXJyb3ItZm9jdXNlZFwiKTtcbiAgICB9XG4gICAgY2xlYXJJbnRlcnZhbChjbS5kaXNwbGF5LmJsaW5rZXIpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7aWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7fSwgMTUwKTtcbiAgfVxuXG4gIC8vIENPTlRFWFQgTUVOVSBIQU5ETElOR1xuXG4gIC8vIFRvIG1ha2UgdGhlIGNvbnRleHQgbWVudSB3b3JrLCB3ZSBuZWVkIHRvIGJyaWVmbHkgdW5oaWRlIHRoZVxuICAvLyB0ZXh0YXJlYSAobWFraW5nIGl0IGFzIHVub2J0cnVzaXZlIGFzIHBvc3NpYmxlKSB0byBsZXQgdGhlXG4gIC8vIHJpZ2h0LWNsaWNrIHRha2UgZWZmZWN0IG9uIGl0LlxuICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGNtLCBlKSB7XG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkgfHwgY29udGV4dE1lbnVJbkd1dHRlcihjbSwgZSkpIHJldHVybjtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUsIFwiY29udGV4dG1lbnVcIikpIHJldHVybjtcbiAgICBjbS5kaXNwbGF5LmlucHV0Lm9uQ29udGV4dE1lbnUoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb250ZXh0TWVudUluR3V0dGVyKGNtLCBlKSB7XG4gICAgaWYgKCFoYXNIYW5kbGVyKGNtLCBcImd1dHRlckNvbnRleHRNZW51XCIpKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGd1dHRlckV2ZW50KGNtLCBlLCBcImd1dHRlckNvbnRleHRNZW51XCIsIGZhbHNlKTtcbiAgfVxuXG4gIC8vIFVQREFUSU5HXG5cbiAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiBhIGNoYW5nZSAoaXRzICd0bycgcHJvcGVydHlcbiAgLy8gcmVmZXJzIHRvIHRoZSBwcmUtY2hhbmdlIGVuZCkuXG4gIHZhciBjaGFuZ2VFbmQgPSBDb2RlTWlycm9yLmNoYW5nZUVuZCA9IGZ1bmN0aW9uKGNoYW5nZSkge1xuICAgIGlmICghY2hhbmdlLnRleHQpIHJldHVybiBjaGFuZ2UudG87XG4gICAgcmV0dXJuIFBvcyhjaGFuZ2UuZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgIGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxID8gY2hhbmdlLmZyb20uY2ggOiAwKSk7XG4gIH07XG5cbiAgLy8gQWRqdXN0IGEgcG9zaXRpb24gdG8gcmVmZXIgdG8gdGhlIHBvc3QtY2hhbmdlIHBvc2l0aW9uIG9mIHRoZVxuICAvLyBzYW1lIHRleHQsIG9yIHRoZSBlbmQgb2YgdGhlIGNoYW5nZSBpZiB0aGUgY2hhbmdlIGNvdmVycyBpdC5cbiAgZnVuY3Rpb24gYWRqdXN0Rm9yQ2hhbmdlKHBvcywgY2hhbmdlKSB7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS5mcm9tKSA8IDApIHJldHVybiBwb3M7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS50bykgPD0gMCkgcmV0dXJuIGNoYW5nZUVuZChjaGFuZ2UpO1xuXG4gICAgdmFyIGxpbmUgPSBwb3MubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpIC0gMSwgY2ggPSBwb3MuY2g7XG4gICAgaWYgKHBvcy5saW5lID09IGNoYW5nZS50by5saW5lKSBjaCArPSBjaGFuZ2VFbmQoY2hhbmdlKS5jaCAtIGNoYW5nZS50by5jaDtcbiAgICByZXR1cm4gUG9zKGxpbmUsIGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgIG91dC5wdXNoKG5ldyBSYW5nZShhZGp1c3RGb3JDaGFuZ2UocmFuZ2UuYW5jaG9yLCBjaGFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdEZvckNoYW5nZShyYW5nZS5oZWFkLCBjaGFuZ2UpKSk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBvZmZzZXRQb3MocG9zLCBvbGQsIG53KSB7XG4gICAgaWYgKHBvcy5saW5lID09IG9sZC5saW5lKVxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lLCBwb3MuY2ggLSBvbGQuY2ggKyBudy5jaCk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lICsgKHBvcy5saW5lIC0gb2xkLmxpbmUpLCBwb3MuY2gpO1xuICB9XG5cbiAgLy8gVXNlZCBieSByZXBsYWNlU2VsZWN0aW9ucyB0byBhbGxvdyBtb3ZpbmcgdGhlIHNlbGVjdGlvbiB0byB0aGVcbiAgLy8gc3RhcnQgb3IgYXJvdW5kIHRoZSByZXBsYWNlZCB0ZXN0LiBIaW50IG1heSBiZSBcInN0YXJ0XCIgb3IgXCJhcm91bmRcIi5cbiAgZnVuY3Rpb24gY29tcHV0ZVJlcGxhY2VkU2VsKGRvYywgY2hhbmdlcywgaGludCkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgb2xkUHJldiA9IFBvcyhkb2MuZmlyc3QsIDApLCBuZXdQcmV2ID0gb2xkUHJldjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGFuZ2UgPSBjaGFuZ2VzW2ldO1xuICAgICAgdmFyIGZyb20gPSBvZmZzZXRQb3MoY2hhbmdlLmZyb20sIG9sZFByZXYsIG5ld1ByZXYpO1xuICAgICAgdmFyIHRvID0gb2Zmc2V0UG9zKGNoYW5nZUVuZChjaGFuZ2UpLCBvbGRQcmV2LCBuZXdQcmV2KTtcbiAgICAgIG9sZFByZXYgPSBjaGFuZ2UudG87XG4gICAgICBuZXdQcmV2ID0gdG87XG4gICAgICBpZiAoaGludCA9PSBcImFyb3VuZFwiKSB7XG4gICAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldLCBpbnYgPSBjbXAocmFuZ2UuaGVhZCwgcmFuZ2UuYW5jaG9yKSA8IDA7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShpbnYgPyB0byA6IGZyb20sIGludiA/IGZyb20gOiB0byk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UoZnJvbSwgZnJvbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKG91dCwgZG9jLnNlbC5wcmltSW5kZXgpO1xuICB9XG5cbiAgLy8gQWxsb3cgXCJiZWZvcmVDaGFuZ2VcIiBldmVudCBoYW5kbGVycyB0byBpbmZsdWVuY2UgYSBjaGFuZ2VcbiAgZnVuY3Rpb24gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB1cGRhdGUpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgZnJvbTogY2hhbmdlLmZyb20sXG4gICAgICB0bzogY2hhbmdlLnRvLFxuICAgICAgdGV4dDogY2hhbmdlLnRleHQsXG4gICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW4sXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkgeyB0aGlzLmNhbmNlbGVkID0gdHJ1ZTsgfVxuICAgIH07XG4gICAgaWYgKHVwZGF0ZSkgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKGZyb20sIHRvLCB0ZXh0LCBvcmlnaW4pIHtcbiAgICAgIGlmIChmcm9tKSB0aGlzLmZyb20gPSBjbGlwUG9zKGRvYywgZnJvbSk7XG4gICAgICBpZiAodG8pIHRoaXMudG8gPSBjbGlwUG9zKGRvYywgdG8pO1xuICAgICAgaWYgKHRleHQpIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICBpZiAob3JpZ2luICE9PSB1bmRlZmluZWQpIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgIH07XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHNpZ25hbChkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIsIGRvYy5jbSwgb2JqKTtcblxuICAgIGlmIChvYmouY2FuY2VsZWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7ZnJvbTogb2JqLmZyb20sIHRvOiBvYmoudG8sIHRleHQ6IG9iai50ZXh0LCBvcmlnaW46IG9iai5vcmlnaW59O1xuICB9XG5cbiAgLy8gQXBwbHkgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCwgYW5kIGFkZCBpdCB0byB0aGUgZG9jdW1lbnQnc1xuICAvLyBoaXN0b3J5LCBhbmQgcHJvcGFnYXRpbmcgaXQgdG8gYWxsIGxpbmtlZCBkb2N1bWVudHMuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2UoZG9jLCBjaGFuZ2UsIGlnbm9yZVJlYWRPbmx5KSB7XG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgaWYgKCFkb2MuY20uY3VyT3ApIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlKShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpO1xuICAgICAgaWYgKGRvYy5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKSByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZUNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIpKSB7XG4gICAgICBjaGFuZ2UgPSBmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIHRydWUpO1xuICAgICAgaWYgKCFjaGFuZ2UpIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQb3NzaWJseSBzcGxpdCBvciBzdXBwcmVzcyB0aGUgdXBkYXRlIGJhc2VkIG9uIHRoZSBwcmVzZW5jZVxuICAgIC8vIG9mIHJlYWQtb25seSBzcGFucyBpbiBpdHMgcmFuZ2UuXG4gICAgdmFyIHNwbGl0ID0gc2F3UmVhZE9ubHlTcGFucyAmJiAhaWdub3JlUmVhZE9ubHkgJiYgcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTtcbiAgICBpZiAoc3BsaXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSBzcGxpdC5sZW5ndGggLSAxOyBpID49IDA7IC0taSlcbiAgICAgICAgbWFrZUNoYW5nZUlubmVyKGRvYywge2Zyb206IHNwbGl0W2ldLmZyb20sIHRvOiBzcGxpdFtpXS50bywgdGV4dDogaSA/IFtcIlwiXSA6IGNoYW5nZS50ZXh0fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ha2VDaGFuZ2VJbm5lcihkb2MsIGNoYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZUlubmVyKGRvYywgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxICYmIGNoYW5nZS50ZXh0WzBdID09IFwiXCIgJiYgY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDApIHJldHVybjtcbiAgICB2YXIgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIGRvYy5jbSA/IGRvYy5jbS5jdXJPcC5pZCA6IE5hTik7XG5cbiAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSkpO1xuICAgIHZhciByZWJhc2VkID0gW107XG5cbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICBpZiAoIXNoYXJlZEhpc3QgJiYgaW5kZXhPZihyZWJhc2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHtcbiAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9yeSwgY2hhbmdlKTtcbiAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgIH1cbiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldmVydCBhIGNoYW5nZSBzdG9yZWQgaW4gYSBkb2N1bWVudCdzIGhpc3RvcnkuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VGcm9tSGlzdG9yeShkb2MsIHR5cGUsIGFsbG93U2VsZWN0aW9uT25seSkge1xuICAgIGlmIChkb2MuY20gJiYgZG9jLmNtLnN0YXRlLnN1cHByZXNzRWRpdHMpIHJldHVybjtcblxuICAgIHZhciBoaXN0ID0gZG9jLmhpc3RvcnksIGV2ZW50LCBzZWxBZnRlciA9IGRvYy5zZWw7XG4gICAgdmFyIHNvdXJjZSA9IHR5cGUgPT0gXCJ1bmRvXCIgPyBoaXN0LmRvbmUgOiBoaXN0LnVuZG9uZSwgZGVzdCA9IHR5cGUgPT0gXCJ1bmRvXCIgPyBoaXN0LnVuZG9uZSA6IGhpc3QuZG9uZTtcblxuICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGlzIGEgdXNlYWJsZSBldmVudCAoc28gdGhhdCBjdHJsLXogd29uJ3RcbiAgICAvLyBuZWVkbGVzc2x5IGNsZWFyIHNlbGVjdGlvbiBldmVudHMpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV2ZW50ID0gc291cmNlW2ldO1xuICAgICAgaWYgKGFsbG93U2VsZWN0aW9uT25seSA/IGV2ZW50LnJhbmdlcyAmJiAhZXZlbnQuZXF1YWxzKGRvYy5zZWwpIDogIWV2ZW50LnJhbmdlcylcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpID09IHNvdXJjZS5sZW5ndGgpIHJldHVybjtcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBudWxsO1xuXG4gICAgZm9yICg7Oykge1xuICAgICAgZXZlbnQgPSBzb3VyY2UucG9wKCk7XG4gICAgICBpZiAoZXZlbnQucmFuZ2VzKSB7XG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZXZlbnQsIGRlc3QpO1xuICAgICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBldmVudCwge2NsZWFyUmVkbzogZmFsc2V9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsQWZ0ZXIgPSBldmVudDtcbiAgICAgIH1cbiAgICAgIGVsc2UgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdXAgYSByZXZlcnNlIGNoYW5nZSBvYmplY3QgdG8gYWRkIHRvIHRoZSBvcHBvc2l0ZSBoaXN0b3J5XG4gICAgLy8gc3RhY2sgKHJlZG8gd2hlbiB1bmRvaW5nLCBhbmQgdmljZSB2ZXJzYSkuXG4gICAgdmFyIGFudGlDaGFuZ2VzID0gW107XG4gICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWxBZnRlciwgZGVzdCk7XG4gICAgZGVzdC5wdXNoKHtjaGFuZ2VzOiBhbnRpQ2hhbmdlcywgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufSk7XG4gICAgaGlzdC5nZW5lcmF0aW9uID0gZXZlbnQuZ2VuZXJhdGlvbiB8fCArK2hpc3QubWF4R2VuZXJhdGlvbjtcblxuICAgIHZhciBmaWx0ZXIgPSBoYXNIYW5kbGVyKGRvYywgXCJiZWZvcmVDaGFuZ2VcIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCBcImJlZm9yZUNoYW5nZVwiKTtcblxuICAgIGZvciAodmFyIGkgPSBldmVudC5jaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgY2hhbmdlID0gZXZlbnQuY2hhbmdlc1tpXTtcbiAgICAgIGNoYW5nZS5vcmlnaW4gPSB0eXBlO1xuICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCBmYWxzZSkpIHtcbiAgICAgICAgc291cmNlLmxlbmd0aCA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYW50aUNoYW5nZXMucHVzaChoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkpO1xuXG4gICAgICB2YXIgYWZ0ZXIgPSBpID8gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKSA6IGxzdChzb3VyY2UpO1xuICAgICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgYWZ0ZXIsIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIGlmICghaSAmJiBkb2MuY20pIGRvYy5jbS5zY3JvbGxJbnRvVmlldyh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2VFbmQoY2hhbmdlKX0pO1xuICAgICAgdmFyIHJlYmFzZWQgPSBbXTtcblxuICAgICAgLy8gUHJvcGFnYXRlIHRvIHRoZSBsaW5rZWQgZG9jdW1lbnRzXG4gICAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xuICAgICAgICAgIHJlYmFzZUhpc3QoZG9jLmhpc3RvcnksIGNoYW5nZSk7XG4gICAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBudWxsLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBTdWItdmlld3MgbmVlZCB0aGVpciBsaW5lIG51bWJlcnMgc2hpZnRlZCB3aGVuIHRleHQgaXMgYWRkZWRcbiAgLy8gYWJvdmUgb3IgYmVsb3cgdGhlbSBpbiB0aGUgcGFyZW50IGRvY3VtZW50LlxuICBmdW5jdGlvbiBzaGlmdERvYyhkb2MsIGRpc3RhbmNlKSB7XG4gICAgaWYgKGRpc3RhbmNlID09IDApIHJldHVybjtcbiAgICBkb2MuZmlyc3QgKz0gZGlzdGFuY2U7XG4gICAgZG9jLnNlbCA9IG5ldyBTZWxlY3Rpb24obWFwKGRvYy5zZWwucmFuZ2VzLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgcmV0dXJuIG5ldyBSYW5nZShQb3MocmFuZ2UuYW5jaG9yLmxpbmUgKyBkaXN0YW5jZSwgcmFuZ2UuYW5jaG9yLmNoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgUG9zKHJhbmdlLmhlYWQubGluZSArIGRpc3RhbmNlLCByYW5nZS5oZWFkLmNoKSk7XG4gICAgfSksIGRvYy5zZWwucHJpbUluZGV4KTtcbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICByZWdDaGFuZ2UoZG9jLmNtLCBkb2MuZmlyc3QsIGRvYy5maXJzdCAtIGRpc3RhbmNlLCBkaXN0YW5jZSk7XG4gICAgICBmb3IgKHZhciBkID0gZG9jLmNtLmRpc3BsYXksIGwgPSBkLnZpZXdGcm9tOyBsIDwgZC52aWV3VG87IGwrKylcbiAgICAgICAgcmVnTGluZUNoYW5nZShkb2MuY20sIGwsIFwiZ3V0dGVyXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vcmUgbG93ZXItbGV2ZWwgY2hhbmdlIGZ1bmN0aW9uLCBoYW5kbGluZyBvbmx5IGEgc2luZ2xlIGRvY3VtZW50XG4gIC8vIChub3QgbGlua2VkIG9uZXMpLlxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3BhbnMpIHtcbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApXG4gICAgICByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFrZUNoYW5nZVNpbmdsZURvYykoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzcGFucyk7XG5cbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHNoaWZ0RG9jKGRvYywgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNoYW5nZS5mcm9tLmxpbmUgPiBkb2MubGFzdExpbmUoKSkgcmV0dXJuO1xuXG4gICAgLy8gQ2xpcCB0aGUgY2hhbmdlIHRvIHRoZSBzaXplIG9mIHRoaXMgZG9jXG4gICAgaWYgKGNoYW5nZS5mcm9tLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHZhciBzaGlmdCA9IGNoYW5nZS50ZXh0Lmxlbmd0aCAtIDEgLSAoZG9jLmZpcnN0IC0gY2hhbmdlLmZyb20ubGluZSk7XG4gICAgICBzaGlmdERvYyhkb2MsIHNoaWZ0KTtcbiAgICAgIGNoYW5nZSA9IHtmcm9tOiBQb3MoZG9jLmZpcnN0LCAwKSwgdG86IFBvcyhjaGFuZ2UudG8ubGluZSArIHNoaWZ0LCBjaGFuZ2UudG8uY2gpLFxuICAgICAgICAgICAgICAgIHRleHQ6IFtsc3QoY2hhbmdlLnRleHQpXSwgb3JpZ2luOiBjaGFuZ2Uub3JpZ2lufTtcbiAgICB9XG4gICAgdmFyIGxhc3QgPSBkb2MubGFzdExpbmUoKTtcbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPiBsYXN0KSB7XG4gICAgICBjaGFuZ2UgPSB7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBbY2hhbmdlLnRleHRbMF1dLCBvcmlnaW46IGNoYW5nZS5vcmlnaW59O1xuICAgIH1cblxuICAgIGNoYW5nZS5yZW1vdmVkID0gZ2V0QmV0d2Vlbihkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuXG4gICAgaWYgKCFzZWxBZnRlcikgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGlmIChkb2MuY20pIG1ha2VDaGFuZ2VTaW5nbGVEb2NJbkVkaXRvcihkb2MuY20sIGNoYW5nZSwgc3BhbnMpO1xuICAgIGVsc2UgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucyk7XG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsQWZ0ZXIsIHNlbF9kb250U2Nyb2xsKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSB0aGUgaW50ZXJhY3Rpb24gb2YgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCB3aXRoIHRoZSBlZGl0b3JcbiAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VTaW5nbGVEb2NJbkVkaXRvcihjbSwgY2hhbmdlLCBzcGFucykge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBmcm9tID0gY2hhbmdlLmZyb20sIHRvID0gY2hhbmdlLnRvO1xuXG4gICAgdmFyIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlLCBjaGVja1dpZHRoU3RhcnQgPSBmcm9tLmxpbmU7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xuICAgICAgY2hlY2tXaWR0aFN0YXJ0ID0gbGluZU5vKHZpc3VhbExpbmUoZ2V0TGluZShkb2MsIGZyb20ubGluZSkpKTtcbiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUgPT0gZGlzcGxheS5tYXhMaW5lKSB7XG4gICAgICAgICAgcmVjb21wdXRlTWF4TGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGRvYy5zZWwuY29udGFpbnMoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPiAtMSlcbiAgICAgIHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKTtcblxuICAgIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KGNtKSk7XG5cbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIGZyb20ubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgbGVuID0gbGluZUxlbmd0aChsaW5lKTtcbiAgICAgICAgaWYgKGxlbiA+IGRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZSA9IGxpbmU7XG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lTGVuZ3RoID0gbGVuO1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChyZWNvbXB1dGVNYXhMZW5ndGgpIGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBmcm9udGllciwgc2NoZWR1bGUgd29ya2VyXG4gICAgZG9jLmZyb250aWVyID0gTWF0aC5taW4oZG9jLmZyb250aWVyLCBmcm9tLmxpbmUpO1xuICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApO1xuXG4gICAgdmFyIGxlbmRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8ubGluZSAtIGZyb20ubGluZSkgLSAxO1xuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlc2UgbGluZXMgY2hhbmdlZCwgZm9yIHVwZGF0aW5nIHRoZSBkaXNwbGF5XG4gICAgaWYgKGNoYW5nZS5mdWxsKVxuICAgICAgcmVnQ2hhbmdlKGNtKTtcbiAgICBlbHNlIGlmIChmcm9tLmxpbmUgPT0gdG8ubGluZSAmJiBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSAmJiAhaXNXaG9sZUxpbmVVcGRhdGUoY20uZG9jLCBjaGFuZ2UpKVxuICAgICAgcmVnTGluZUNoYW5nZShjbSwgZnJvbS5saW5lLCBcInRleHRcIik7XG4gICAgZWxzZVxuICAgICAgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBsZW5kaWZmKTtcblxuICAgIHZhciBjaGFuZ2VzSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlc1wiKSwgY2hhbmdlSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlXCIpO1xuICAgIGlmIChjaGFuZ2VIYW5kbGVyIHx8IGNoYW5nZXNIYW5kbGVyKSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBmcm9tOiBmcm9tLCB0bzogdG8sXG4gICAgICAgIHRleHQ6IGNoYW5nZS50ZXh0LFxuICAgICAgICByZW1vdmVkOiBjaGFuZ2UucmVtb3ZlZCxcbiAgICAgICAgb3JpZ2luOiBjaGFuZ2Uub3JpZ2luXG4gICAgICB9O1xuICAgICAgaWYgKGNoYW5nZUhhbmRsZXIpIHNpZ25hbExhdGVyKGNtLCBcImNoYW5nZVwiLCBjbSwgb2JqKTtcbiAgICAgIGlmIChjaGFuZ2VzSGFuZGxlcikgKGNtLmN1ck9wLmNoYW5nZU9ianMgfHwgKGNtLmN1ck9wLmNoYW5nZU9ianMgPSBbXSkpLnB1c2gob2JqKTtcbiAgICB9XG4gICAgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlUmFuZ2UoZG9jLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgaWYgKCF0bykgdG8gPSBmcm9tO1xuICAgIGlmIChjbXAodG8sIGZyb20pIDwgMCkgeyB2YXIgdG1wID0gdG87IHRvID0gZnJvbTsgZnJvbSA9IHRtcDsgfVxuICAgIGlmICh0eXBlb2YgY29kZSA9PSBcInN0cmluZ1wiKSBjb2RlID0gZG9jLnNwbGl0TGluZXMoY29kZSk7XG4gICAgbWFrZUNoYW5nZShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIHRleHQ6IGNvZGUsIG9yaWdpbjogb3JpZ2lufSk7XG4gIH1cblxuICAvLyBTQ1JPTExJTkcgVEhJTkdTIElOVE8gVklFV1xuXG4gIC8vIElmIGFuIGVkaXRvciBzaXRzIG9uIHRoZSB0b3Agb3IgYm90dG9tIG9mIHRoZSB3aW5kb3csIHBhcnRpYWxseVxuICAvLyBzY3JvbGxlZCBvdXQgb2YgdmlldywgdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGN1cnNvciBpcyB2aXNpYmxlLlxuICBmdW5jdGlvbiBtYXliZVNjcm9sbFdpbmRvdyhjbSwgY29vcmRzKSB7XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBcInNjcm9sbEN1cnNvckludG9WaWV3XCIpKSByZXR1cm47XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGJveCA9IGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRvU2Nyb2xsID0gbnVsbDtcbiAgICBpZiAoY29vcmRzLnRvcCArIGJveC50b3AgPCAwKSBkb1Njcm9sbCA9IHRydWU7XG4gICAgZWxzZSBpZiAoY29vcmRzLmJvdHRvbSArIGJveC50b3AgPiAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKSBkb1Njcm9sbCA9IGZhbHNlO1xuICAgIGlmIChkb1Njcm9sbCAhPSBudWxsICYmICFwaGFudG9tKSB7XG4gICAgICB2YXIgc2Nyb2xsTm9kZSA9IGVsdChcImRpdlwiLCBcIlxcdTIwMGJcIiwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQgLSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpKSArIFwicHg7IGhlaWdodDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy5ib3R0b20gLSBjb29yZHMudG9wICsgc2Nyb2xsR2FwKGNtKSArIGRpc3BsYXkuYmFySGVpZ2h0KSArIFwicHg7IGxlZnQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy5sZWZ0ICsgXCJweDsgd2lkdGg6IDJweDtcIik7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5hcHBlbmRDaGlsZChzY3JvbGxOb2RlKTtcbiAgICAgIHNjcm9sbE5vZGUuc2Nyb2xsSW50b1ZpZXcoZG9TY3JvbGwpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoc2Nyb2xsTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2Nyb2xsIGEgZ2l2ZW4gcG9zaXRpb24gaW50byB2aWV3IChpbW1lZGlhdGVseSksIHZlcmlmeWluZyB0aGF0XG4gIC8vIGl0IGFjdHVhbGx5IGJlY2FtZSB2aXNpYmxlIChhcyBsaW5lIGhlaWdodHMgYXJlIGFjY3VyYXRlbHlcbiAgLy8gbWVhc3VyZWQsIHRoZSBwb3NpdGlvbiBvZiBzb21ldGhpbmcgbWF5ICdkcmlmdCcgZHVyaW5nIGRyYXdpbmcpLlxuICBmdW5jdGlvbiBzY3JvbGxQb3NJbnRvVmlldyhjbSwgcG9zLCBlbmQsIG1hcmdpbikge1xuICAgIGlmIChtYXJnaW4gPT0gbnVsbCkgbWFyZ2luID0gMDtcbiAgICBmb3IgKHZhciBsaW1pdCA9IDA7IGxpbWl0IDwgNTsgbGltaXQrKykge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZSwgY29vcmRzID0gY3Vyc29yQ29vcmRzKGNtLCBwb3MpO1xuICAgICAgdmFyIGVuZENvb3JkcyA9ICFlbmQgfHwgZW5kID09IHBvcyA/IGNvb3JkcyA6IGN1cnNvckNvb3JkcyhjbSwgZW5kKTtcbiAgICAgIHZhciBzY3JvbGxQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGNvb3Jkcy5sZWZ0LCBlbmRDb29yZHMubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGNvb3Jkcy50b3AsIGVuZENvb3Jkcy50b3ApIC0gbWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMubGVmdCwgZW5kQ29vcmRzLmxlZnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMuYm90dG9tLCBlbmRDb29yZHMuYm90dG9tKSArIG1hcmdpbik7XG4gICAgICB2YXIgc3RhcnRUb3AgPSBjbS5kb2Muc2Nyb2xsVG9wLCBzdGFydExlZnQgPSBjbS5kb2Muc2Nyb2xsTGVmdDtcbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsVG9wICE9IG51bGwpIHtcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBzY3JvbGxQb3Muc2Nyb2xsVG9wKTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxUb3AgLSBzdGFydFRvcCkgPiAxKSBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsTGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gc3RhcnRMZWZ0KSA+IDEpIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFjaGFuZ2VkKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkcztcbiAgfVxuXG4gIC8vIFNjcm9sbCBhIGdpdmVuIHNldCBvZiBjb29yZGluYXRlcyBpbnRvIHZpZXcgKGltbWVkaWF0ZWx5KS5cbiAgZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoY20sIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIHNjcm9sbFBvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsVG9wICE9IG51bGwpIHNldFNjcm9sbFRvcChjbSwgc2Nyb2xsUG9zLnNjcm9sbFRvcCk7XG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBhIG5ldyBzY3JvbGwgcG9zaXRpb24gbmVlZGVkIHRvIHNjcm9sbCB0aGUgZ2l2ZW5cbiAgLy8gcmVjdGFuZ2xlIGludG8gdmlldy4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBzY3JvbGxUb3AgYW5kXG4gIC8vIHNjcm9sbExlZnQgcHJvcGVydGllcy4gV2hlbiB0aGVzZSBhcmUgdW5kZWZpbmVkLCB0aGVcbiAgLy8gdmVydGljYWwvaG9yaXpvbnRhbCBwb3NpdGlvbiBkb2VzIG5vdCBuZWVkIHRvIGJlIGFkanVzdGVkLlxuICBmdW5jdGlvbiBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzbmFwTWFyZ2luID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KTtcbiAgICBpZiAoeTEgPCAwKSB5MSA9IDA7XG4gICAgdmFyIHNjcmVlbnRvcCA9IGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbFRvcCAhPSBudWxsID8gY20uY3VyT3Auc2Nyb2xsVG9wIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgdmFyIHNjcmVlbiA9IGRpc3BsYXlIZWlnaHQoY20pLCByZXN1bHQgPSB7fTtcbiAgICBpZiAoeTIgLSB5MSA+IHNjcmVlbikgeTIgPSB5MSArIHNjcmVlbjtcbiAgICB2YXIgZG9jQm90dG9tID0gY20uZG9jLmhlaWdodCArIHBhZGRpbmdWZXJ0KGRpc3BsYXkpO1xuICAgIHZhciBhdFRvcCA9IHkxIDwgc25hcE1hcmdpbiwgYXRCb3R0b20gPSB5MiA+IGRvY0JvdHRvbSAtIHNuYXBNYXJnaW47XG4gICAgaWYgKHkxIDwgc2NyZWVudG9wKSB7XG4gICAgICByZXN1bHQuc2Nyb2xsVG9wID0gYXRUb3AgPyAwIDogeTE7XG4gICAgfSBlbHNlIGlmICh5MiA+IHNjcmVlbnRvcCArIHNjcmVlbikge1xuICAgICAgdmFyIG5ld1RvcCA9IE1hdGgubWluKHkxLCAoYXRCb3R0b20gPyBkb2NCb3R0b20gOiB5MikgLSBzY3JlZW4pO1xuICAgICAgaWYgKG5ld1RvcCAhPSBzY3JlZW50b3ApIHJlc3VsdC5zY3JvbGxUb3AgPSBuZXdUb3A7XG4gICAgfVxuXG4gICAgdmFyIHNjcmVlbmxlZnQgPSBjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxMZWZ0ICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxMZWZ0IDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0O1xuICAgIHZhciBzY3JlZW53ID0gZGlzcGxheVdpZHRoKGNtKSAtIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoIDogMCk7XG4gICAgdmFyIHRvb1dpZGUgPSB4MiAtIHgxID4gc2NyZWVudztcbiAgICBpZiAodG9vV2lkZSkgeDIgPSB4MSArIHNjcmVlbnc7XG4gICAgaWYgKHgxIDwgMTApXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IDA7XG4gICAgZWxzZSBpZiAoeDEgPCBzY3JlZW5sZWZ0KVxuICAgICAgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCB4MSAtICh0b29XaWRlID8gMCA6IDEwKSk7XG4gICAgZWxzZSBpZiAoeDIgPiBzY3JlZW53ICsgc2NyZWVubGVmdCAtIDMpXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IHgyICsgKHRvb1dpZGUgPyAwIDogMTApIC0gc2NyZWVudztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gU3RvcmUgYSByZWxhdGl2ZSBhZGp1c3RtZW50IHRvIHRoZSBzY3JvbGwgcG9zaXRpb24gaW4gdGhlIGN1cnJlbnRcbiAgLy8gb3BlcmF0aW9uICh0byBiZSBhcHBsaWVkIHdoZW4gdGhlIG9wZXJhdGlvbiBmaW5pc2hlcykuXG4gIGZ1bmN0aW9uIGFkZFRvU2Nyb2xsUG9zKGNtLCBsZWZ0LCB0b3ApIHtcbiAgICBpZiAobGVmdCAhPSBudWxsIHx8IHRvcCAhPSBudWxsKSByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pO1xuICAgIGlmIChsZWZ0ICE9IG51bGwpXG4gICAgICBjbS5jdXJPcC5zY3JvbGxMZWZ0ID0gKGNtLmN1ck9wLnNjcm9sbExlZnQgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxMZWZ0IDogY20uY3VyT3Auc2Nyb2xsTGVmdCkgKyBsZWZ0O1xuICAgIGlmICh0b3AgIT0gbnVsbClcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvcCA9IChjbS5jdXJPcC5zY3JvbGxUb3AgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxUb3AgOiBjbS5jdXJPcC5zY3JvbGxUb3ApICsgdG9wO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgYXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uIHRoZSBjdXJyZW50IGN1cnNvciBpc1xuICAvLyBzaG93bi5cbiAgZnVuY3Rpb24gZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSkge1xuICAgIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XG4gICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpLCBmcm9tID0gY3VyLCB0byA9IGN1cjtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBmcm9tID0gY3VyLmNoID8gUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKSA6IGN1cjtcbiAgICAgIHRvID0gUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcbiAgICB9XG4gICAgY20uY3VyT3Auc2Nyb2xsVG9Qb3MgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCBtYXJnaW46IGNtLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luLCBpc0N1cnNvcjogdHJ1ZX07XG4gIH1cblxuICAvLyBXaGVuIGFuIG9wZXJhdGlvbiBoYXMgaXRzIHNjcm9sbFRvUG9zIHByb3BlcnR5IHNldCwgYW5kIGFub3RoZXJcbiAgLy8gc2Nyb2xsIGFjdGlvbiBpcyBhcHBsaWVkIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb24sIHRoaXNcbiAgLy8gJ3NpbXVsYXRlcycgc2Nyb2xsaW5nIHRoYXQgcG9zaXRpb24gaW50byB2aWV3IGluIGEgY2hlYXAgd2F5LCBzb1xuICAvLyB0aGF0IHRoZSBlZmZlY3Qgb2YgaW50ZXJtZWRpYXRlIHNjcm9sbCBjb21tYW5kcyBpcyBub3QgaWdub3JlZC5cbiAgZnVuY3Rpb24gcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKSB7XG4gICAgdmFyIHJhbmdlID0gY20uY3VyT3Auc2Nyb2xsVG9Qb3M7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IG51bGw7XG4gICAgICB2YXIgZnJvbSA9IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZS5mcm9tKSwgdG8gPSBlc3RpbWF0ZUNvb3JkcyhjbSwgcmFuZ2UudG8pO1xuICAgICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGZyb20ubGVmdCwgdG8ubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihmcm9tLnRvcCwgdG8udG9wKSAtIHJhbmdlLm1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20ucmlnaHQsIHRvLnJpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20uYm90dG9tLCB0by5ib3R0b20pICsgcmFuZ2UubWFyZ2luKTtcbiAgICAgIGNtLnNjcm9sbFRvKHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFQSSBVVElMSVRJRVNcblxuICAvLyBJbmRlbnQgdGhlIGdpdmVuIGxpbmUuIFRoZSBob3cgcGFyYW1ldGVyIGNhbiBiZSBcInNtYXJ0XCIsXG4gIC8vIFwiYWRkXCIvbnVsbCwgXCJzdWJ0cmFjdFwiLCBvciBcInByZXZcIi4gV2hlbiBhZ2dyZXNzaXZlIGlzIGZhbHNlXG4gIC8vICh0eXBpY2FsbHkgc2V0IHRvIHRydWUgZm9yIGZvcmNlZCBzaW5nbGUtbGluZSBpbmRlbnRzKSwgZW1wdHlcbiAgLy8gbGluZXMgYXJlIG5vdCBpbmRlbnRlZCwgYW5kIHBsYWNlcyB3aGVyZSB0aGUgbW9kZSByZXR1cm5zIFBhc3NcbiAgLy8gYXJlIGxlZnQgYWxvbmUuXG4gIGZ1bmN0aW9uIGluZGVudExpbmUoY20sIG4sIGhvdywgYWdncmVzc2l2ZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHN0YXRlO1xuICAgIGlmIChob3cgPT0gbnVsbCkgaG93ID0gXCJhZGRcIjtcbiAgICBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIFwicHJldlwiIHdoZW4gdGhlIG1vZGUgZG9lc24ndCBoYXZlIGFuIGluZGVudGF0aW9uXG4gICAgICAvLyBtZXRob2QuXG4gICAgICBpZiAoIWRvYy5tb2RlLmluZGVudCkgaG93ID0gXCJwcmV2XCI7XG4gICAgICBlbHNlIHN0YXRlID0gZ2V0U3RhdGVCZWZvcmUoY20sIG4pO1xuICAgIH1cblxuICAgIHZhciB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIG4pLCBjdXJTcGFjZSA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgbnVsbCwgdGFiU2l6ZSk7XG4gICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICB2YXIgY3VyU3BhY2VTdHJpbmcgPSBsaW5lLnRleHQubWF0Y2goL15cXHMqLylbMF0sIGluZGVudGF0aW9uO1xuICAgIGlmICghYWdncmVzc2l2ZSAmJiAhL1xcUy8udGVzdChsaW5lLnRleHQpKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IDA7XG4gICAgICBob3cgPSBcIm5vdFwiO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgaW5kZW50YXRpb24gPSBkb2MubW9kZS5pbmRlbnQoc3RhdGUsIGxpbmUudGV4dC5zbGljZShjdXJTcGFjZVN0cmluZy5sZW5ndGgpLCBsaW5lLnRleHQpO1xuICAgICAgaWYgKGluZGVudGF0aW9uID09IFBhc3MgfHwgaW5kZW50YXRpb24gPiAxNTApIHtcbiAgICAgICAgaWYgKCFhZ2dyZXNzaXZlKSByZXR1cm47XG4gICAgICAgIGhvdyA9IFwicHJldlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaG93ID09IFwicHJldlwiKSB7XG4gICAgICBpZiAobiA+IGRvYy5maXJzdCkgaW5kZW50YXRpb24gPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgbi0xKS50ZXh0LCBudWxsLCB0YWJTaXplKTtcbiAgICAgIGVsc2UgaW5kZW50YXRpb24gPSAwO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwiYWRkXCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgKyBjbS5vcHRpb25zLmluZGVudFVuaXQ7XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJzdWJ0cmFjdFwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlIC0gY20ub3B0aW9ucy5pbmRlbnRVbml0O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhvdyA9PSBcIm51bWJlclwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlICsgaG93O1xuICAgIH1cbiAgICBpbmRlbnRhdGlvbiA9IE1hdGgubWF4KDAsIGluZGVudGF0aW9uKTtcblxuICAgIHZhciBpbmRlbnRTdHJpbmcgPSBcIlwiLCBwb3MgPSAwO1xuICAgIGlmIChjbS5vcHRpb25zLmluZGVudFdpdGhUYWJzKVxuICAgICAgZm9yICh2YXIgaSA9IE1hdGguZmxvb3IoaW5kZW50YXRpb24gLyB0YWJTaXplKTsgaTsgLS1pKSB7cG9zICs9IHRhYlNpemU7IGluZGVudFN0cmluZyArPSBcIlxcdFwiO31cbiAgICBpZiAocG9zIDwgaW5kZW50YXRpb24pIGluZGVudFN0cmluZyArPSBzcGFjZVN0cihpbmRlbnRhdGlvbiAtIHBvcyk7XG5cbiAgICBpZiAoaW5kZW50U3RyaW5nICE9IGN1clNwYWNlU3RyaW5nKSB7XG4gICAgICByZXBsYWNlUmFuZ2UoZG9jLCBpbmRlbnRTdHJpbmcsIFBvcyhuLCAwKSwgUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCksIFwiK2lucHV0XCIpO1xuICAgICAgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbnN1cmUgdGhhdCwgaWYgdGhlIGN1cnNvciB3YXMgaW4gdGhlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0XG4gICAgICAvLyBvZiB0aGUgbGluZSwgaXQgaXMgbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGF0IHNwYWNlLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKHJhbmdlLmhlYWQubGluZSA9PSBuICYmIHJhbmdlLmhlYWQuY2ggPCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgcG9zID0gUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIG5ldyBSYW5nZShwb3MsIHBvcykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXRpbGl0eSBmb3IgYXBwbHlpbmcgYSBjaGFuZ2UgdG8gYSBsaW5lIGJ5IGhhbmRsZSBvciBudW1iZXIsXG4gIC8vIHJldHVybmluZyB0aGUgbnVtYmVyIGFuZCBvcHRpb25hbGx5IHJlZ2lzdGVyaW5nIHRoZSBsaW5lIGFzXG4gIC8vIGNoYW5nZWQuXG4gIGZ1bmN0aW9uIGNoYW5nZUxpbmUoZG9jLCBoYW5kbGUsIGNoYW5nZVR5cGUsIG9wKSB7XG4gICAgdmFyIG5vID0gaGFuZGxlLCBsaW5lID0gaGFuZGxlO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlID09IFwibnVtYmVyXCIpIGxpbmUgPSBnZXRMaW5lKGRvYywgY2xpcExpbmUoZG9jLCBoYW5kbGUpKTtcbiAgICBlbHNlIG5vID0gbGluZU5vKGhhbmRsZSk7XG4gICAgaWYgKG5vID09IG51bGwpIHJldHVybiBudWxsO1xuICAgIGlmIChvcChsaW5lLCBubykgJiYgZG9jLmNtKSByZWdMaW5lQ2hhbmdlKGRvYy5jbSwgbm8sIGNoYW5nZVR5cGUpO1xuICAgIHJldHVybiBsaW5lO1xuICB9XG5cbiAgLy8gSGVscGVyIGZvciBkZWxldGluZyB0ZXh0IG5lYXIgdGhlIHNlbGVjdGlvbihzKSwgdXNlZCB0byBpbXBsZW1lbnRcbiAgLy8gYmFja3NwYWNlLCBkZWxldGUsIGFuZCBzaW1pbGFyIGZ1bmN0aW9uYWxpdHkuXG4gIGZ1bmN0aW9uIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGNvbXB1dGUpIHtcbiAgICB2YXIgcmFuZ2VzID0gY20uZG9jLnNlbC5yYW5nZXMsIGtpbGwgPSBbXTtcbiAgICAvLyBCdWlsZCB1cCBhIHNldCBvZiByYW5nZXMgdG8ga2lsbCBmaXJzdCwgbWVyZ2luZyBvdmVybGFwcGluZ1xuICAgIC8vIHJhbmdlcy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRvS2lsbCA9IGNvbXB1dGUocmFuZ2VzW2ldKTtcbiAgICAgIHdoaWxlIChraWxsLmxlbmd0aCAmJiBjbXAodG9LaWxsLmZyb20sIGxzdChraWxsKS50bykgPD0gMCkge1xuICAgICAgICB2YXIgcmVwbGFjZWQgPSBraWxsLnBvcCgpO1xuICAgICAgICBpZiAoY21wKHJlcGxhY2VkLmZyb20sIHRvS2lsbC5mcm9tKSA8IDApIHtcbiAgICAgICAgICB0b0tpbGwuZnJvbSA9IHJlcGxhY2VkLmZyb207XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGtpbGwucHVzaCh0b0tpbGwpO1xuICAgIH1cbiAgICAvLyBOZXh0LCByZW1vdmUgdGhvc2UgYWN0dWFsIHJhbmdlcy5cbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSBraWxsLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBcIlwiLCBraWxsW2ldLmZyb20sIGtpbGxbaV0udG8sIFwiK2RlbGV0ZVwiKTtcbiAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgaG9yaXpvbnRhbCByZWxhdGl2ZSBtb3Rpb24uIERpciBpcyAtMSBvciAxIChsZWZ0IG9yXG4gIC8vIHJpZ2h0KSwgdW5pdCBjYW4gYmUgXCJjaGFyXCIsIFwiY29sdW1uXCIgKGxpa2UgY2hhciwgYnV0IGRvZXNuJ3RcbiAgLy8gY3Jvc3MgbGluZSBib3VuZGFyaWVzKSwgXCJ3b3JkXCIgKGFjcm9zcyBuZXh0IHdvcmQpLCBvciBcImdyb3VwXCIgKHRvXG4gIC8vIHRoZSBzdGFydCBvZiBuZXh0IGdyb3VwIG9mIHdvcmQgb3Igbm9uLXdvcmQtbm9uLXdoaXRlc3BhY2VcbiAgLy8gY2hhcnMpLiBUaGUgdmlzdWFsbHkgcGFyYW0gY29udHJvbHMgd2hldGhlciwgaW4gcmlnaHQtdG8tbGVmdFxuICAvLyB0ZXh0LCBkaXJlY3Rpb24gMSBtZWFucyB0byBtb3ZlIHRvd2FyZHMgdGhlIG5leHQgaW5kZXggaW4gdGhlXG4gIC8vIHN0cmluZywgb3IgdG93YXJkcyB0aGUgY2hhcmFjdGVyIHRvIHRoZSByaWdodCBvZiB0aGUgY3VycmVudFxuICAvLyBwb3NpdGlvbi4gVGhlIHJlc3VsdGluZyBwb3NpdGlvbiB3aWxsIGhhdmUgYSBoaXRTaWRlPXRydWVcbiAgLy8gcHJvcGVydHkgaWYgaXQgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZFBvc0goZG9jLCBwb3MsIGRpciwgdW5pdCwgdmlzdWFsbHkpIHtcbiAgICB2YXIgbGluZSA9IHBvcy5saW5lLCBjaCA9IHBvcy5jaCwgb3JpZ0RpciA9IGRpcjtcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lKTtcbiAgICBmdW5jdGlvbiBmaW5kTmV4dExpbmUoKSB7XG4gICAgICB2YXIgbCA9IGxpbmUgKyBkaXI7XG4gICAgICBpZiAobCA8IGRvYy5maXJzdCB8fCBsID49IGRvYy5maXJzdCArIGRvYy5zaXplKSByZXR1cm4gZmFsc2VcbiAgICAgIGxpbmUgPSBsO1xuICAgICAgcmV0dXJuIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVPbmNlKGJvdW5kVG9MaW5lKSB7XG4gICAgICB2YXIgbmV4dCA9ICh2aXN1YWxseSA/IG1vdmVWaXN1YWxseSA6IG1vdmVMb2dpY2FsbHkpKGxpbmVPYmosIGNoLCBkaXIsIHRydWUpO1xuICAgICAgaWYgKG5leHQgPT0gbnVsbCkge1xuICAgICAgICBpZiAoIWJvdW5kVG9MaW5lICYmIGZpbmROZXh0TGluZSgpKSB7XG4gICAgICAgICAgaWYgKHZpc3VhbGx5KSBjaCA9IChkaXIgPCAwID8gbGluZVJpZ2h0IDogbGluZUxlZnQpKGxpbmVPYmopO1xuICAgICAgICAgIGVsc2UgY2ggPSBkaXIgPCAwID8gbGluZU9iai50ZXh0Lmxlbmd0aCA6IDA7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSBjaCA9IG5leHQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIikge1xuICAgICAgbW92ZU9uY2UoKVxuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcImNvbHVtblwiKSB7XG4gICAgICBtb3ZlT25jZSh0cnVlKVxuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcIndvcmRcIiB8fCB1bml0ID09IFwiZ3JvdXBcIikge1xuICAgICAgdmFyIHNhd1R5cGUgPSBudWxsLCBncm91cCA9IHVuaXQgPT0gXCJncm91cFwiO1xuICAgICAgdmFyIGhlbHBlciA9IGRvYy5jbSAmJiBkb2MuY20uZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XG4gICAgICBmb3IgKHZhciBmaXJzdCA9IHRydWU7OyBmaXJzdCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChkaXIgPCAwICYmICFtb3ZlT25jZSghZmlyc3QpKSBicmVhaztcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVPYmoudGV4dC5jaGFyQXQoY2gpIHx8IFwiXFxuXCI7XG4gICAgICAgIHZhciB0eXBlID0gaXNXb3JkQ2hhcihjdXIsIGhlbHBlcikgPyBcIndcIlxuICAgICAgICAgIDogZ3JvdXAgJiYgY3VyID09IFwiXFxuXCIgPyBcIm5cIlxuICAgICAgICAgIDogIWdyb3VwIHx8IC9cXHMvLnRlc3QoY3VyKSA/IG51bGxcbiAgICAgICAgICA6IFwicFwiO1xuICAgICAgICBpZiAoZ3JvdXAgJiYgIWZpcnN0ICYmICF0eXBlKSB0eXBlID0gXCJzXCI7XG4gICAgICAgIGlmIChzYXdUeXBlICYmIHNhd1R5cGUgIT0gdHlwZSkge1xuICAgICAgICAgIGlmIChkaXIgPCAwKSB7ZGlyID0gMTsgbW92ZU9uY2UoKTt9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSkgc2F3VHlwZSA9IHR5cGU7XG4gICAgICAgIGlmIChkaXIgPiAwICYmICFtb3ZlT25jZSghZmlyc3QpKSBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IHNraXBBdG9taWMoZG9jLCBQb3MobGluZSwgY2gpLCBwb3MsIG9yaWdEaXIsIHRydWUpO1xuICAgIGlmICghY21wKHBvcywgcmVzdWx0KSkgcmVzdWx0LmhpdFNpZGUgPSB0cnVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBGb3IgcmVsYXRpdmUgdmVydGljYWwgbW92ZW1lbnQuIERpciBtYXkgYmUgLTEgb3IgMS4gVW5pdCBjYW4gYmVcbiAgLy8gXCJwYWdlXCIgb3IgXCJsaW5lXCIuIFRoZSByZXN1bHRpbmcgcG9zaXRpb24gd2lsbCBoYXZlIGEgaGl0U2lkZT10cnVlXG4gIC8vIHByb3BlcnR5IGlmIGl0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRQb3NWKGNtLCBwb3MsIGRpciwgdW5pdCkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHggPSBwb3MubGVmdCwgeTtcbiAgICBpZiAodW5pdCA9PSBcInBhZ2VcIikge1xuICAgICAgdmFyIHBhZ2VTaXplID0gTWF0aC5taW4oY20uZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgeSA9IHBvcy50b3AgKyBkaXIgKiAocGFnZVNpemUgLSAoZGlyIDwgMCA/IDEuNSA6IC41KSAqIHRleHRIZWlnaHQoY20uZGlzcGxheSkpO1xuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcImxpbmVcIikge1xuICAgICAgeSA9IGRpciA+IDAgPyBwb3MuYm90dG9tICsgMyA6IHBvcy50b3AgLSAzO1xuICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gY29vcmRzQ2hhcihjbSwgeCwgeSk7XG4gICAgICBpZiAoIXRhcmdldC5vdXRzaWRlKSBicmVhaztcbiAgICAgIGlmIChkaXIgPCAwID8geSA8PSAwIDogeSA+PSBkb2MuaGVpZ2h0KSB7IHRhcmdldC5oaXRTaWRlID0gdHJ1ZTsgYnJlYWs7IH1cbiAgICAgIHkgKz0gZGlyICogNTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIC8vIEVESVRPUiBNRVRIT0RTXG5cbiAgLy8gVGhlIHB1YmxpY2x5IHZpc2libGUgQVBJLiBOb3RlIHRoYXQgbWV0aG9kT3AoZikgbWVhbnNcbiAgLy8gJ3dyYXAgZiBpbiBhbiBvcGVyYXRpb24sIHBlcmZvcm1lZCBvbiBpdHMgYHRoaXNgIHBhcmFtZXRlcicuXG5cbiAgLy8gVGhpcyBpcyBub3QgdGhlIGNvbXBsZXRlIHNldCBvZiBlZGl0b3IgbWV0aG9kcy4gTW9zdCBvZiB0aGVcbiAgLy8gbWV0aG9kcyBkZWZpbmVkIG9uIHRoZSBEb2MgdHlwZSBhcmUgYWxzbyBpbmplY3RlZCBpbnRvXG4gIC8vIENvZGVNaXJyb3IucHJvdG90eXBlLCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgYW5kXG4gIC8vIGNvbnZlbmllbmNlLlxuXG4gIENvZGVNaXJyb3IucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb2RlTWlycm9yLFxuICAgIGZvY3VzOiBmdW5jdGlvbigpe3dpbmRvdy5mb2N1cygpOyB0aGlzLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LFxuXG4gICAgc2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywgb2xkID0gb3B0aW9uc1tvcHRpb25dO1xuICAgICAgaWYgKG9wdGlvbnNbb3B0aW9uXSA9PSB2YWx1ZSAmJiBvcHRpb24gIT0gXCJtb2RlXCIpIHJldHVybjtcbiAgICAgIG9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgaWYgKG9wdGlvbkhhbmRsZXJzLmhhc093blByb3BlcnR5KG9wdGlvbikpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLCBvcHRpb25IYW5kbGVyc1tvcHRpb25dKSh0aGlzLCB2YWx1ZSwgb2xkKTtcbiAgICB9LFxuXG4gICAgZ2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24pIHtyZXR1cm4gdGhpcy5vcHRpb25zW29wdGlvbl07fSxcbiAgICBnZXREb2M6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmRvYzt9LFxuXG4gICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAsIGJvdHRvbSkge1xuICAgICAgdGhpcy5zdGF0ZS5rZXlNYXBzW2JvdHRvbSA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKGdldEtleU1hcChtYXApKTtcbiAgICB9LFxuICAgIHJlbW92ZUtleU1hcDogZnVuY3Rpb24obWFwKSB7XG4gICAgICB2YXIgbWFwcyA9IHRoaXMuc3RhdGUua2V5TWFwcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgaWYgKG1hcHNbaV0gPT0gbWFwIHx8IG1hcHNbaV0ubmFtZSA9PSBtYXApIHtcbiAgICAgICAgICBtYXBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBhZGRPdmVybGF5OiBtZXRob2RPcChmdW5jdGlvbihzcGVjLCBvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZSA9IHNwZWMudG9rZW4gPyBzcGVjIDogQ29kZU1pcnJvci5nZXRNb2RlKHRoaXMub3B0aW9ucywgc3BlYyk7XG4gICAgICBpZiAobW9kZS5zdGFydFN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJPdmVybGF5cyBtYXkgbm90IGJlIHN0YXRlZnVsLlwiKTtcbiAgICAgIHRoaXMuc3RhdGUub3ZlcmxheXMucHVzaCh7bW9kZTogbW9kZSwgbW9kZVNwZWM6IHNwZWMsIG9wYXF1ZTogb3B0aW9ucyAmJiBvcHRpb25zLm9wYXF1ZX0pO1xuICAgICAgdGhpcy5zdGF0ZS5tb2RlR2VuKys7XG4gICAgICByZWdDaGFuZ2UodGhpcyk7XG4gICAgfSksXG4gICAgcmVtb3ZlT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYykge1xuICAgICAgdmFyIG92ZXJsYXlzID0gdGhpcy5zdGF0ZS5vdmVybGF5cztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3ZlcmxheXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1ciA9IG92ZXJsYXlzW2ldLm1vZGVTcGVjO1xuICAgICAgICBpZiAoY3VyID09IHNwZWMgfHwgdHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBjdXIubmFtZSA9PSBzcGVjKSB7XG4gICAgICAgICAgb3ZlcmxheXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHRoaXMuc3RhdGUubW9kZUdlbisrO1xuICAgICAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICAgIGluZGVudExpbmU6IG1ldGhvZE9wKGZ1bmN0aW9uKG4sIGRpciwgYWdncmVzc2l2ZSkge1xuICAgICAgaWYgKHR5cGVvZiBkaXIgIT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgZGlyICE9IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKGRpciA9PSBudWxsKSBkaXIgPSB0aGlzLm9wdGlvbnMuc21hcnRJbmRlbnQgPyBcInNtYXJ0XCIgOiBcInByZXZcIjtcbiAgICAgICAgZWxzZSBkaXIgPSBkaXIgPyBcImFkZFwiIDogXCJzdWJ0cmFjdFwiO1xuICAgICAgfVxuICAgICAgaWYgKGlzTGluZSh0aGlzLmRvYywgbikpIGluZGVudExpbmUodGhpcywgbiwgZGlyLCBhZ2dyZXNzaXZlKTtcbiAgICB9KSxcbiAgICBpbmRlbnRTZWxlY3Rpb246IG1ldGhvZE9wKGZ1bmN0aW9uKGhvdykge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXMsIGVuZCA9IC0xO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKSwgdG8gPSByYW5nZS50bygpO1xuICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWF4KGVuZCwgZnJvbS5saW5lKTtcbiAgICAgICAgICBlbmQgPSBNYXRoLm1pbih0aGlzLmxhc3RMaW5lKCksIHRvLmxpbmUgLSAodG8uY2ggPyAwIDogMSkpICsgMTtcbiAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQ7IGogPCBlbmQ7ICsrailcbiAgICAgICAgICAgIGluZGVudExpbmUodGhpcywgaiwgaG93KTtcbiAgICAgICAgICB2YXIgbmV3UmFuZ2VzID0gdGhpcy5kb2Muc2VsLnJhbmdlcztcbiAgICAgICAgICBpZiAoZnJvbS5jaCA9PSAwICYmIHJhbmdlcy5sZW5ndGggPT0gbmV3UmFuZ2VzLmxlbmd0aCAmJiBuZXdSYW5nZXNbaV0uZnJvbSgpLmNoID4gMClcbiAgICAgICAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24odGhpcy5kb2MsIGksIG5ldyBSYW5nZShmcm9tLCBuZXdSYW5nZXNbaV0udG8oKSksIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZS5oZWFkLmxpbmUgPiBlbmQpIHtcbiAgICAgICAgICBpbmRlbnRMaW5lKHRoaXMsIHJhbmdlLmhlYWQubGluZSwgaG93LCB0cnVlKTtcbiAgICAgICAgICBlbmQgPSByYW5nZS5oZWFkLmxpbmU7XG4gICAgICAgICAgaWYgKGkgPT0gdGhpcy5kb2Muc2VsLnByaW1JbmRleCkgZW5zdXJlQ3Vyc29yVmlzaWJsZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuXG4gICAgLy8gRmV0Y2ggdGhlIHBhcnNlciB0b2tlbiBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIuIFVzZWZ1bCBmb3IgaGFja3NcbiAgICAvLyB0aGF0IHdhbnQgdG8gaW5zcGVjdCB0aGUgbW9kZSBzdGF0ZSAoc2F5LCBmb3IgY29tcGxldGlvbikuXG4gICAgZ2V0VG9rZW5BdDogZnVuY3Rpb24ocG9zLCBwcmVjaXNlKSB7XG4gICAgICByZXR1cm4gdGFrZVRva2VuKHRoaXMsIHBvcywgcHJlY2lzZSk7XG4gICAgfSxcblxuICAgIGdldExpbmVUb2tlbnM6IGZ1bmN0aW9uKGxpbmUsIHByZWNpc2UpIHtcbiAgICAgIHJldHVybiB0YWtlVG9rZW4odGhpcywgUG9zKGxpbmUpLCBwcmVjaXNlLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgZ2V0VG9rZW5UeXBlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgcG9zKTtcbiAgICAgIHZhciBzdHlsZXMgPSBnZXRMaW5lU3R5bGVzKHRoaXMsIGdldExpbmUodGhpcy5kb2MsIHBvcy5saW5lKSk7XG4gICAgICB2YXIgYmVmb3JlID0gMCwgYWZ0ZXIgPSAoc3R5bGVzLmxlbmd0aCAtIDEpIC8gMiwgY2ggPSBwb3MuY2g7XG4gICAgICB2YXIgdHlwZTtcbiAgICAgIGlmIChjaCA9PSAwKSB0eXBlID0gc3R5bGVzWzJdO1xuICAgICAgZWxzZSBmb3IgKDs7KSB7XG4gICAgICAgIHZhciBtaWQgPSAoYmVmb3JlICsgYWZ0ZXIpID4+IDE7XG4gICAgICAgIGlmICgobWlkID8gc3R5bGVzW21pZCAqIDIgLSAxXSA6IDApID49IGNoKSBhZnRlciA9IG1pZDtcbiAgICAgICAgZWxzZSBpZiAoc3R5bGVzW21pZCAqIDIgKyAxXSA8IGNoKSBiZWZvcmUgPSBtaWQgKyAxO1xuICAgICAgICBlbHNlIHsgdHlwZSA9IHN0eWxlc1ttaWQgKiAyICsgMl07IGJyZWFrOyB9XG4gICAgICB9XG4gICAgICB2YXIgY3V0ID0gdHlwZSA/IHR5cGUuaW5kZXhPZihcImNtLW92ZXJsYXkgXCIpIDogLTE7XG4gICAgICByZXR1cm4gY3V0IDwgMCA/IHR5cGUgOiBjdXQgPT0gMCA/IG51bGwgOiB0eXBlLnNsaWNlKDAsIGN1dCAtIDEpO1xuICAgIH0sXG5cbiAgICBnZXRNb2RlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgdmFyIG1vZGUgPSB0aGlzLmRvYy5tb2RlO1xuICAgICAgaWYgKCFtb2RlLmlubmVyTW9kZSkgcmV0dXJuIG1vZGU7XG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgdGhpcy5nZXRUb2tlbkF0KHBvcykuc3RhdGUpLm1vZGU7XG4gICAgfSxcblxuICAgIGdldEhlbHBlcjogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRIZWxwZXJzKHBvcywgdHlwZSlbMF07XG4gICAgfSxcblxuICAgIGdldEhlbHBlcnM6IGZ1bmN0aW9uKHBvcywgdHlwZSkge1xuICAgICAgdmFyIGZvdW5kID0gW107XG4gICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBmb3VuZDtcbiAgICAgIHZhciBoZWxwID0gaGVscGVyc1t0eXBlXSwgbW9kZSA9IHRoaXMuZ2V0TW9kZUF0KHBvcyk7XG4gICAgICBpZiAodHlwZW9mIG1vZGVbdHlwZV0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoaGVscFttb2RlW3R5cGVdXSkgZm91bmQucHVzaChoZWxwW21vZGVbdHlwZV1dKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kZVt0eXBlXSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgdmFsID0gaGVscFttb2RlW3R5cGVdW2ldXTtcbiAgICAgICAgICBpZiAodmFsKSBmb3VuZC5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9kZS5oZWxwZXJUeXBlICYmIGhlbHBbbW9kZS5oZWxwZXJUeXBlXSkge1xuICAgICAgICBmb3VuZC5wdXNoKGhlbHBbbW9kZS5oZWxwZXJUeXBlXSk7XG4gICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkge1xuICAgICAgICBmb3VuZC5wdXNoKGhlbHBbbW9kZS5uYW1lXSk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlbHAuX2dsb2JhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY3VyID0gaGVscC5fZ2xvYmFsW2ldO1xuICAgICAgICBpZiAoY3VyLnByZWQobW9kZSwgdGhpcykgJiYgaW5kZXhPZihmb3VuZCwgY3VyLnZhbCkgPT0gLTEpXG4gICAgICAgICAgZm91bmQucHVzaChjdXIudmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9LFxuXG4gICAgZ2V0U3RhdGVBZnRlcjogZnVuY3Rpb24obGluZSwgcHJlY2lzZSkge1xuICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jO1xuICAgICAgbGluZSA9IGNsaXBMaW5lKGRvYywgbGluZSA9PSBudWxsID8gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxOiBsaW5lKTtcbiAgICAgIHJldHVybiBnZXRTdGF0ZUJlZm9yZSh0aGlzLCBsaW5lICsgMSwgcHJlY2lzZSk7XG4gICAgfSxcblxuICAgIGN1cnNvckNvb3JkczogZnVuY3Rpb24oc3RhcnQsIG1vZGUpIHtcbiAgICAgIHZhciBwb3MsIHJhbmdlID0gdGhpcy5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIGlmIChzdGFydCA9PSBudWxsKSBwb3MgPSByYW5nZS5oZWFkO1xuICAgICAgZWxzZSBpZiAodHlwZW9mIHN0YXJ0ID09IFwib2JqZWN0XCIpIHBvcyA9IGNsaXBQb3ModGhpcy5kb2MsIHN0YXJ0KTtcbiAgICAgIGVsc2UgcG9zID0gc3RhcnQgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xuICAgICAgcmV0dXJuIGN1cnNvckNvb3Jkcyh0aGlzLCBwb3MsIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgIH0sXG5cbiAgICBjaGFyQ29vcmRzOiBmdW5jdGlvbihwb3MsIG1vZGUpIHtcbiAgICAgIHJldHVybiBjaGFyQ29vcmRzKHRoaXMsIGNsaXBQb3ModGhpcy5kb2MsIHBvcyksIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgIH0sXG5cbiAgICBjb29yZHNDaGFyOiBmdW5jdGlvbihjb29yZHMsIG1vZGUpIHtcbiAgICAgIGNvb3JkcyA9IGZyb21Db29yZFN5c3RlbSh0aGlzLCBjb29yZHMsIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgICAgcmV0dXJuIGNvb3Jkc0NoYXIodGhpcywgY29vcmRzLmxlZnQsIGNvb3Jkcy50b3ApO1xuICAgIH0sXG5cbiAgICBsaW5lQXRIZWlnaHQ6IGZ1bmN0aW9uKGhlaWdodCwgbW9kZSkge1xuICAgICAgaGVpZ2h0ID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIHt0b3A6IGhlaWdodCwgbGVmdDogMH0sIG1vZGUgfHwgXCJwYWdlXCIpLnRvcDtcbiAgICAgIHJldHVybiBsaW5lQXRIZWlnaHQodGhpcy5kb2MsIGhlaWdodCArIHRoaXMuZGlzcGxheS52aWV3T2Zmc2V0KTtcbiAgICB9LFxuICAgIGhlaWdodEF0TGluZTogZnVuY3Rpb24obGluZSwgbW9kZSkge1xuICAgICAgdmFyIGVuZCA9IGZhbHNlLCBsaW5lT2JqO1xuICAgICAgaWYgKHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmRvYy5maXJzdCArIHRoaXMuZG9jLnNpemUgLSAxO1xuICAgICAgICBpZiAobGluZSA8IHRoaXMuZG9jLmZpcnN0KSBsaW5lID0gdGhpcy5kb2MuZmlyc3Q7XG4gICAgICAgIGVsc2UgaWYgKGxpbmUgPiBsYXN0KSB7IGxpbmUgPSBsYXN0OyBlbmQgPSB0cnVlOyB9XG4gICAgICAgIGxpbmVPYmogPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVPYmogPSBsaW5lO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbSh0aGlzLCBsaW5lT2JqLCB7dG9wOiAwLCBsZWZ0OiAwfSwgbW9kZSB8fCBcInBhZ2VcIikudG9wICtcbiAgICAgICAgKGVuZCA/IHRoaXMuZG9jLmhlaWdodCAtIGhlaWdodEF0TGluZShsaW5lT2JqKSA6IDApO1xuICAgIH0sXG5cbiAgICBkZWZhdWx0VGV4dEhlaWdodDogZnVuY3Rpb24oKSB7IHJldHVybiB0ZXh0SGVpZ2h0KHRoaXMuZGlzcGxheSk7IH0sXG4gICAgZGVmYXVsdENoYXJXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBjaGFyV2lkdGgodGhpcy5kaXNwbGF5KTsgfSxcblxuICAgIHNldEd1dHRlck1hcmtlcjogbWV0aG9kT3AoZnVuY3Rpb24obGluZSwgZ3V0dGVySUQsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLmRvYywgbGluZSwgXCJndXR0ZXJcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgbWFya2VycyA9IGxpbmUuZ3V0dGVyTWFya2VycyB8fCAobGluZS5ndXR0ZXJNYXJrZXJzID0ge30pO1xuICAgICAgICBtYXJrZXJzW2d1dHRlcklEXSA9IHZhbHVlO1xuICAgICAgICBpZiAoIXZhbHVlICYmIGlzRW1wdHkobWFya2VycykpIGxpbmUuZ3V0dGVyTWFya2VycyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBjbGVhckd1dHRlcjogbWV0aG9kT3AoZnVuY3Rpb24oZ3V0dGVySUQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMsIGRvYyA9IGNtLmRvYywgaSA9IGRvYy5maXJzdDtcbiAgICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUuZ3V0dGVyTWFya2VycyAmJiBsaW5lLmd1dHRlck1hcmtlcnNbZ3V0dGVySURdKSB7XG4gICAgICAgICAgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSA9IG51bGw7XG4gICAgICAgICAgcmVnTGluZUNoYW5nZShjbSwgaSwgXCJndXR0ZXJcIik7XG4gICAgICAgICAgaWYgKGlzRW1wdHkobGluZS5ndXR0ZXJNYXJrZXJzKSkgbGluZS5ndXR0ZXJNYXJrZXJzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICArK2k7XG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIGxpbmVJbmZvOiBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoIWlzTGluZSh0aGlzLmRvYywgbGluZSkpIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgbiA9IGxpbmU7XG4gICAgICAgIGxpbmUgPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcbiAgICAgICAgaWYgKCFsaW5lKSByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBuID0gbGluZU5vKGxpbmUpO1xuICAgICAgICBpZiAobiA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7bGluZTogbiwgaGFuZGxlOiBsaW5lLCB0ZXh0OiBsaW5lLnRleHQsIGd1dHRlck1hcmtlcnM6IGxpbmUuZ3V0dGVyTWFya2VycyxcbiAgICAgICAgICAgICAgdGV4dENsYXNzOiBsaW5lLnRleHRDbGFzcywgYmdDbGFzczogbGluZS5iZ0NsYXNzLCB3cmFwQ2xhc3M6IGxpbmUud3JhcENsYXNzLFxuICAgICAgICAgICAgICB3aWRnZXRzOiBsaW5lLndpZGdldHN9O1xuICAgIH0sXG5cbiAgICBnZXRWaWV3cG9ydDogZnVuY3Rpb24oKSB7IHJldHVybiB7ZnJvbTogdGhpcy5kaXNwbGF5LnZpZXdGcm9tLCB0bzogdGhpcy5kaXNwbGF5LnZpZXdUb307fSxcblxuICAgIGFkZFdpZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhvcml6KSB7XG4gICAgICB2YXIgZGlzcGxheSA9IHRoaXMuZGlzcGxheTtcbiAgICAgIHBvcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjbGlwUG9zKHRoaXMuZG9jLCBwb3MpKTtcbiAgICAgIHZhciB0b3AgPSBwb3MuYm90dG9tLCBsZWZ0ID0gcG9zLmxlZnQ7XG4gICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgZGlzcGxheS5zaXplci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIGlmICh2ZXJ0ID09IFwib3ZlclwiKSB7XG4gICAgICAgIHRvcCA9IHBvcy50b3A7XG4gICAgICB9IGVsc2UgaWYgKHZlcnQgPT0gXCJhYm92ZVwiIHx8IHZlcnQgPT0gXCJuZWFyXCIpIHtcbiAgICAgICAgdmFyIHZzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQsIHRoaXMuZG9jLmhlaWdodCksXG4gICAgICAgIGhzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGgsIGRpc3BsYXkubGluZVNwYWNlLmNsaWVudFdpZHRoKTtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBwb3NpdGlvbmluZyBhYm92ZSAoaWYgc3BlY2lmaWVkIGFuZCBwb3NzaWJsZSk7IG90aGVyd2lzZSBkZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGJlbG93XG4gICAgICAgIGlmICgodmVydCA9PSAnYWJvdmUnIHx8IHBvcy5ib3R0b20gKyBub2RlLm9mZnNldEhlaWdodCA+IHZzcGFjZSkgJiYgcG9zLnRvcCA+IG5vZGUub2Zmc2V0SGVpZ2h0KVxuICAgICAgICAgIHRvcCA9IHBvcy50b3AgLSBub2RlLm9mZnNldEhlaWdodDtcbiAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSlcbiAgICAgICAgICB0b3AgPSBwb3MuYm90dG9tO1xuICAgICAgICBpZiAobGVmdCArIG5vZGUub2Zmc2V0V2lkdGggPiBoc3BhY2UpXG4gICAgICAgICAgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IG5vZGUuc3R5bGUucmlnaHQgPSBcIlwiO1xuICAgICAgaWYgKGhvcml6ID09IFwicmlnaHRcIikge1xuICAgICAgICBsZWZ0ID0gZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucmlnaHQgPSBcIjBweFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhvcml6ID09IFwibGVmdFwiKSBsZWZ0ID0gMDtcbiAgICAgICAgZWxzZSBpZiAoaG9yaXogPT0gXCJtaWRkbGVcIikgbGVmdCA9IChkaXNwbGF5LnNpemVyLmNsaWVudFdpZHRoIC0gbm9kZS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgfVxuICAgICAgaWYgKHNjcm9sbClcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXcodGhpcywgbGVmdCwgdG9wLCBsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCwgdG9wICsgbm9kZS5vZmZzZXRIZWlnaHQpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyT25LZXlEb3duOiBtZXRob2RPcChvbktleURvd24pLFxuICAgIHRyaWdnZXJPbktleVByZXNzOiBtZXRob2RPcChvbktleVByZXNzKSxcbiAgICB0cmlnZ2VyT25LZXlVcDogb25LZXlVcCxcblxuICAgIGV4ZWNDb21tYW5kOiBmdW5jdGlvbihjbWQpIHtcbiAgICAgIGlmIChjb21tYW5kcy5oYXNPd25Qcm9wZXJ0eShjbWQpKVxuICAgICAgICByZXR1cm4gY29tbWFuZHNbY21kXS5jYWxsKG51bGwsIHRoaXMpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyRWxlY3RyaWM6IG1ldGhvZE9wKGZ1bmN0aW9uKHRleHQpIHsgdHJpZ2dlckVsZWN0cmljKHRoaXMsIHRleHQpOyB9KSxcblxuICAgIGZpbmRQb3NIOiBmdW5jdGlvbihmcm9tLCBhbW91bnQsIHVuaXQsIHZpc3VhbGx5KSB7XG4gICAgICB2YXIgZGlyID0gMTtcbiAgICAgIGlmIChhbW91bnQgPCAwKSB7IGRpciA9IC0xOyBhbW91bnQgPSAtYW1vdW50OyB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgY3VyID0gY2xpcFBvcyh0aGlzLmRvYywgZnJvbSk7IGkgPCBhbW91bnQ7ICsraSkge1xuICAgICAgICBjdXIgPSBmaW5kUG9zSCh0aGlzLmRvYywgY3VyLCBkaXIsIHVuaXQsIHZpc3VhbGx5KTtcbiAgICAgICAgaWYgKGN1ci5oaXRTaWRlKSBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXI7XG4gICAgfSxcblxuICAgIG1vdmVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXM7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgY20uZG9jLmV4dGVuZCB8fCByYW5nZS5lbXB0eSgpKVxuICAgICAgICAgIHJldHVybiBmaW5kUG9zSChjbS5kb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgY20ub3B0aW9ucy5ydGxNb3ZlVmlzdWFsbHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0pLFxuXG4gICAgZGVsZXRlSDogbWV0aG9kT3AoZnVuY3Rpb24oZGlyLCB1bml0KSB7XG4gICAgICB2YXIgc2VsID0gdGhpcy5kb2Muc2VsLCBkb2MgPSB0aGlzLmRvYztcbiAgICAgIGlmIChzZWwuc29tZXRoaW5nU2VsZWN0ZWQoKSlcbiAgICAgICAgZG9jLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCIrZGVsZXRlXCIpO1xuICAgICAgZWxzZVxuICAgICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgICAgdmFyIG90aGVyID0gZmluZFBvc0goZG9jLCByYW5nZS5oZWFkLCBkaXIsIHVuaXQsIGZhbHNlKTtcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHtmcm9tOiBvdGhlciwgdG86IHJhbmdlLmhlYWR9IDoge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBvdGhlcn07XG4gICAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgZmluZFBvc1Y6IGZ1bmN0aW9uKGZyb20sIGFtb3VudCwgdW5pdCwgZ29hbENvbHVtbikge1xuICAgICAgdmFyIGRpciA9IDEsIHggPSBnb2FsQ29sdW1uO1xuICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBjbGlwUG9zKHRoaXMuZG9jLCBmcm9tKTsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBjdXJzb3JDb29yZHModGhpcywgY3VyLCBcImRpdlwiKTtcbiAgICAgICAgaWYgKHggPT0gbnVsbCkgeCA9IGNvb3Jkcy5sZWZ0O1xuICAgICAgICBlbHNlIGNvb3Jkcy5sZWZ0ID0geDtcbiAgICAgICAgY3VyID0gZmluZFBvc1YodGhpcywgY29vcmRzLCBkaXIsIHVuaXQpO1xuICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cjtcbiAgICB9LFxuXG4gICAgbW92ZVY6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwgdW5pdCkge1xuICAgICAgdmFyIGNtID0gdGhpcywgZG9jID0gdGhpcy5kb2MsIGdvYWxzID0gW107XG4gICAgICB2YXIgY29sbGFwc2UgPSAhY20uZGlzcGxheS5zaGlmdCAmJiAhZG9jLmV4dGVuZCAmJiBkb2Muc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7XG4gICAgICBkb2MuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIGlmIChjb2xsYXBzZSlcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XG4gICAgICAgIHZhciBoZWFkUG9zID0gY3Vyc29yQ29vcmRzKGNtLCByYW5nZS5oZWFkLCBcImRpdlwiKTtcbiAgICAgICAgaWYgKHJhbmdlLmdvYWxDb2x1bW4gIT0gbnVsbCkgaGVhZFBvcy5sZWZ0ID0gcmFuZ2UuZ29hbENvbHVtbjtcbiAgICAgICAgZ29hbHMucHVzaChoZWFkUG9zLmxlZnQpO1xuICAgICAgICB2YXIgcG9zID0gZmluZFBvc1YoY20sIGhlYWRQb3MsIGRpciwgdW5pdCk7XG4gICAgICAgIGlmICh1bml0ID09IFwicGFnZVwiICYmIHJhbmdlID09IGRvYy5zZWwucHJpbWFyeSgpKVxuICAgICAgICAgIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCBjaGFyQ29vcmRzKGNtLCBwb3MsIFwiZGl2XCIpLnRvcCAtIGhlYWRQb3MudG9wKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICAgIGlmIChnb2Fscy5sZW5ndGgpIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIGRvYy5zZWwucmFuZ2VzW2ldLmdvYWxDb2x1bW4gPSBnb2Fsc1tpXTtcbiAgICB9KSxcblxuICAgIC8vIEZpbmQgdGhlIHdvcmQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIChhcyByZXR1cm5lZCBieSBjb29yZHNDaGFyKS5cbiAgICBmaW5kV29yZEF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIHZhciBkb2MgPSB0aGlzLmRvYywgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dDtcbiAgICAgIHZhciBzdGFydCA9IHBvcy5jaCwgZW5kID0gcG9zLmNoO1xuICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgdmFyIGhlbHBlciA9IHRoaXMuZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XG4gICAgICAgIGlmICgocG9zLnhSZWwgPCAwIHx8IGVuZCA9PSBsaW5lLmxlbmd0aCkgJiYgc3RhcnQpIC0tc3RhcnQ7IGVsc2UgKytlbmQ7XG4gICAgICAgIHZhciBzdGFydENoYXIgPSBsaW5lLmNoYXJBdChzdGFydCk7XG4gICAgICAgIHZhciBjaGVjayA9IGlzV29yZENoYXIoc3RhcnRDaGFyLCBoZWxwZXIpXG4gICAgICAgICAgPyBmdW5jdGlvbihjaCkgeyByZXR1cm4gaXNXb3JkQ2hhcihjaCwgaGVscGVyKTsgfVxuICAgICAgICAgIDogL1xccy8udGVzdChzdGFydENoYXIpID8gZnVuY3Rpb24oY2gpIHtyZXR1cm4gL1xccy8udGVzdChjaCk7fVxuICAgICAgICAgIDogZnVuY3Rpb24oY2gpIHtyZXR1cm4gIS9cXHMvLnRlc3QoY2gpICYmICFpc1dvcmRDaGFyKGNoKTt9O1xuICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIGNoZWNrKGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSAtLXN0YXJ0O1xuICAgICAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgY2hlY2sobGluZS5jaGFyQXQoZW5kKSkpICsrZW5kO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIHN0YXJ0KSwgUG9zKHBvcy5saW5lLCBlbmQpKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlT3ZlcndyaXRlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPT0gdGhpcy5zdGF0ZS5vdmVyd3JpdGUpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSlcbiAgICAgICAgYWRkQ2xhc3ModGhpcy5kaXNwbGF5LmN1cnNvckRpdiwgXCJDb2RlTWlycm9yLW92ZXJ3cml0ZVwiKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcm1DbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpO1xuXG4gICAgICBzaWduYWwodGhpcywgXCJvdmVyd3JpdGVUb2dnbGVcIiwgdGhpcywgdGhpcy5zdGF0ZS5vdmVyd3JpdGUpO1xuICAgIH0sXG4gICAgaGFzRm9jdXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkgPT0gYWN0aXZlRWx0KCk7IH0sXG4gICAgaXNSZWFkT25seTogZnVuY3Rpb24oKSB7IHJldHVybiAhISh0aGlzLm9wdGlvbnMucmVhZE9ubHkgfHwgdGhpcy5kb2MuY2FudEVkaXQpOyB9LFxuXG4gICAgc2Nyb2xsVG86IG1ldGhvZE9wKGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgIGlmICh4ICE9IG51bGwgfHwgeSAhPSBudWxsKSByZXNvbHZlU2Nyb2xsVG9Qb3ModGhpcyk7XG4gICAgICBpZiAoeCAhPSBudWxsKSB0aGlzLmN1ck9wLnNjcm9sbExlZnQgPSB4O1xuICAgICAgaWYgKHkgIT0gbnVsbCkgdGhpcy5jdXJPcC5zY3JvbGxUb3AgPSB5O1xuICAgIH0pLFxuICAgIGdldFNjcm9sbEluZm86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5kaXNwbGF5LnNjcm9sbGVyO1xuICAgICAgcmV0dXJuIHtsZWZ0OiBzY3JvbGxlci5zY3JvbGxMZWZ0LCB0b3A6IHNjcm9sbGVyLnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBzY3JvbGxlci5zY3JvbGxIZWlnaHQgLSBzY3JvbGxHYXAodGhpcykgLSB0aGlzLmRpc3BsYXkuYmFySGVpZ2h0LFxuICAgICAgICAgICAgICB3aWR0aDogc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBzY3JvbGxHYXAodGhpcykgLSB0aGlzLmRpc3BsYXkuYmFyV2lkdGgsXG4gICAgICAgICAgICAgIGNsaWVudEhlaWdodDogZGlzcGxheUhlaWdodCh0aGlzKSwgY2xpZW50V2lkdGg6IGRpc3BsYXlXaWR0aCh0aGlzKX07XG4gICAgfSxcblxuICAgIHNjcm9sbEludG9WaWV3OiBtZXRob2RPcChmdW5jdGlvbihyYW5nZSwgbWFyZ2luKSB7XG4gICAgICBpZiAocmFuZ2UgPT0gbnVsbCkge1xuICAgICAgICByYW5nZSA9IHtmcm9tOiB0aGlzLmRvYy5zZWwucHJpbWFyeSgpLmhlYWQsIHRvOiBudWxsfTtcbiAgICAgICAgaWYgKG1hcmdpbiA9PSBudWxsKSBtYXJnaW4gPSB0aGlzLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmFuZ2UgPT0gXCJudW1iZXJcIikge1xuICAgICAgICByYW5nZSA9IHtmcm9tOiBQb3MocmFuZ2UsIDApLCB0bzogbnVsbH07XG4gICAgICB9IGVsc2UgaWYgKHJhbmdlLmZyb20gPT0gbnVsbCkge1xuICAgICAgICByYW5nZSA9IHtmcm9tOiByYW5nZSwgdG86IG51bGx9O1xuICAgICAgfVxuICAgICAgaWYgKCFyYW5nZS50bykgcmFuZ2UudG8gPSByYW5nZS5mcm9tO1xuICAgICAgcmFuZ2UubWFyZ2luID0gbWFyZ2luIHx8IDA7XG5cbiAgICAgIGlmIChyYW5nZS5mcm9tLmxpbmUgIT0gbnVsbCkge1xuICAgICAgICByZXNvbHZlU2Nyb2xsVG9Qb3ModGhpcyk7XG4gICAgICAgIHRoaXMuY3VyT3Auc2Nyb2xsVG9Qb3MgPSByYW5nZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKHRoaXMsIE1hdGgubWluKHJhbmdlLmZyb20ubGVmdCwgcmFuZ2UudG8ubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHJhbmdlLmZyb20udG9wLCByYW5nZS50by50b3ApIC0gcmFuZ2UubWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChyYW5nZS5mcm9tLnJpZ2h0LCByYW5nZS50by5yaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHJhbmdlLmZyb20uYm90dG9tLCByYW5nZS50by5ib3R0b20pICsgcmFuZ2UubWFyZ2luKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhzUG9zLnNjcm9sbExlZnQsIHNQb3Muc2Nyb2xsVG9wKTtcbiAgICAgIH1cbiAgICB9KSxcblxuICAgIHNldFNpemU6IG1ldGhvZE9wKGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBpbnRlcnByZXQodmFsKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsID09IFwibnVtYmVyXCIgfHwgL15cXGQrJC8udGVzdChTdHJpbmcodmFsKSkgPyB2YWwgKyBcInB4XCIgOiB2YWw7XG4gICAgICB9XG4gICAgICBpZiAod2lkdGggIT0gbnVsbCkgY20uZGlzcGxheS53cmFwcGVyLnN0eWxlLndpZHRoID0gaW50ZXJwcmV0KHdpZHRoKTtcbiAgICAgIGlmIChoZWlnaHQgIT0gbnVsbCkgY20uZGlzcGxheS53cmFwcGVyLnN0eWxlLmhlaWdodCA9IGludGVycHJldChoZWlnaHQpO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKHRoaXMpO1xuICAgICAgdmFyIGxpbmVObyA9IGNtLmRpc3BsYXkudmlld0Zyb207XG4gICAgICBjbS5kb2MuaXRlcihsaW5lTm8sIGNtLmRpc3BsYXkudmlld1RvLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0ubm9IU2Nyb2xsKSB7IHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmVObywgXCJ3aWRnZXRcIik7IGJyZWFrOyB9XG4gICAgICAgICsrbGluZU5vO1xuICAgICAgfSk7XG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICBzaWduYWwoY20sIFwicmVmcmVzaFwiLCB0aGlzKTtcbiAgICB9KSxcblxuICAgIG9wZXJhdGlvbjogZnVuY3Rpb24oZil7cmV0dXJuIHJ1bkluT3AodGhpcywgZik7fSxcblxuICAgIHJlZnJlc2g6IG1ldGhvZE9wKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9sZEhlaWdodCA9IHRoaXMuZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0O1xuICAgICAgcmVnQ2hhbmdlKHRoaXMpO1xuICAgICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICBjbGVhckNhY2hlcyh0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5kb2Muc2Nyb2xsTGVmdCwgdGhpcy5kb2Muc2Nyb2xsVG9wKTtcbiAgICAgIHVwZGF0ZUd1dHRlclNwYWNlKHRoaXMpO1xuICAgICAgaWYgKG9sZEhlaWdodCA9PSBudWxsIHx8IE1hdGguYWJzKG9sZEhlaWdodCAtIHRleHRIZWlnaHQodGhpcy5kaXNwbGF5KSkgPiAuNSlcbiAgICAgICAgZXN0aW1hdGVMaW5lSGVpZ2h0cyh0aGlzKTtcbiAgICAgIHNpZ25hbCh0aGlzLCBcInJlZnJlc2hcIiwgdGhpcyk7XG4gICAgfSksXG5cbiAgICBzd2FwRG9jOiBtZXRob2RPcChmdW5jdGlvbihkb2MpIHtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmRvYztcbiAgICAgIG9sZC5jbSA9IG51bGw7XG4gICAgICBhdHRhY2hEb2ModGhpcywgZG9jKTtcbiAgICAgIGNsZWFyQ2FjaGVzKHRoaXMpO1xuICAgICAgdGhpcy5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICB0aGlzLnNjcm9sbFRvKGRvYy5zY3JvbGxMZWZ0LCBkb2Muc2Nyb2xsVG9wKTtcbiAgICAgIHRoaXMuY3VyT3AuZm9yY2VTY3JvbGwgPSB0cnVlO1xuICAgICAgc2lnbmFsTGF0ZXIodGhpcywgXCJzd2FwRG9jXCIsIHRoaXMsIG9sZCk7XG4gICAgICByZXR1cm4gb2xkO1xuICAgIH0pLFxuXG4gICAgZ2V0SW5wdXRGaWVsZDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCk7fSxcbiAgICBnZXRXcmFwcGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LndyYXBwZXI7fSxcbiAgICBnZXRTY3JvbGxlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5zY3JvbGxlcjt9LFxuICAgIGdldEd1dHRlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5ndXR0ZXJzO31cbiAgfTtcbiAgZXZlbnRNaXhpbihDb2RlTWlycm9yKTtcblxuICAvLyBPUFRJT04gREVGQVVMVFNcblxuICAvLyBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gIHZhciBkZWZhdWx0cyA9IENvZGVNaXJyb3IuZGVmYXVsdHMgPSB7fTtcbiAgLy8gRnVuY3Rpb25zIHRvIHJ1biB3aGVuIG9wdGlvbnMgYXJlIGNoYW5nZWQuXG4gIHZhciBvcHRpb25IYW5kbGVycyA9IENvZGVNaXJyb3Iub3B0aW9uSGFuZGxlcnMgPSB7fTtcblxuICBmdW5jdGlvbiBvcHRpb24obmFtZSwgZGVmbHQsIGhhbmRsZSwgbm90T25Jbml0KSB7XG4gICAgQ29kZU1pcnJvci5kZWZhdWx0c1tuYW1lXSA9IGRlZmx0O1xuICAgIGlmIChoYW5kbGUpIG9wdGlvbkhhbmRsZXJzW25hbWVdID1cbiAgICAgIG5vdE9uSW5pdCA/IGZ1bmN0aW9uKGNtLCB2YWwsIG9sZCkge2lmIChvbGQgIT0gSW5pdCkgaGFuZGxlKGNtLCB2YWwsIG9sZCk7fSA6IGhhbmRsZTtcbiAgfVxuXG4gIC8vIFBhc3NlZCB0byBvcHRpb24gaGFuZGxlcnMgd2hlbiB0aGVyZSBpcyBubyBvbGQgdmFsdWUuXG4gIHZhciBJbml0ID0gQ29kZU1pcnJvci5Jbml0ID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiBcIkNvZGVNaXJyb3IuSW5pdFwiO319O1xuXG4gIC8vIFRoZXNlIHR3byBhcmUsIG9uIGluaXQsIGNhbGxlZCBmcm9tIHRoZSBjb25zdHJ1Y3RvciBiZWNhdXNlIHRoZXlcbiAgLy8gaGF2ZSB0byBiZSBpbml0aWFsaXplZCBiZWZvcmUgdGhlIGVkaXRvciBjYW4gc3RhcnQgYXQgYWxsLlxuICBvcHRpb24oXCJ2YWx1ZVwiLCBcIlwiLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgY20uc2V0VmFsdWUodmFsKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcIm1vZGVcIiwgbnVsbCwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRvYy5tb2RlT3B0aW9uID0gdmFsO1xuICAgIGxvYWRNb2RlKGNtKTtcbiAgfSwgdHJ1ZSk7XG5cbiAgb3B0aW9uKFwiaW5kZW50VW5pdFwiLCAyLCBsb2FkTW9kZSwgdHJ1ZSk7XG4gIG9wdGlvbihcImluZGVudFdpdGhUYWJzXCIsIGZhbHNlKTtcbiAgb3B0aW9uKFwic21hcnRJbmRlbnRcIiwgdHJ1ZSk7XG4gIG9wdGlvbihcInRhYlNpemVcIiwgNCwgZnVuY3Rpb24oY20pIHtcbiAgICByZXNldE1vZGVTdGF0ZShjbSk7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJsaW5lU2VwYXJhdG9yXCIsIG51bGwsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBjbS5kb2MubGluZVNlcCA9IHZhbDtcbiAgICBpZiAoIXZhbCkgcmV0dXJuO1xuICAgIHZhciBuZXdCcmVha3MgPSBbXSwgbGluZU5vID0gY20uZG9jLmZpcnN0O1xuICAgIGNtLmRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGZvciAodmFyIHBvcyA9IDA7Oykge1xuICAgICAgICB2YXIgZm91bmQgPSBsaW5lLnRleHQuaW5kZXhPZih2YWwsIHBvcyk7XG4gICAgICAgIGlmIChmb3VuZCA9PSAtMSkgYnJlYWs7XG4gICAgICAgIHBvcyA9IGZvdW5kICsgdmFsLmxlbmd0aDtcbiAgICAgICAgbmV3QnJlYWtzLnB1c2goUG9zKGxpbmVObywgZm91bmQpKTtcbiAgICAgIH1cbiAgICAgIGxpbmVObysrO1xuICAgIH0pO1xuICAgIGZvciAodmFyIGkgPSBuZXdCcmVha3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCB2YWwsIG5ld0JyZWFrc1tpXSwgUG9zKG5ld0JyZWFrc1tpXS5saW5lLCBuZXdCcmVha3NbaV0uY2ggKyB2YWwubGVuZ3RoKSlcbiAgfSk7XG4gIG9wdGlvbihcInNwZWNpYWxDaGFyc1wiLCAvW1xcdFxcdTAwMDAtXFx1MDAxOVxcdTAwYWRcXHUyMDBiLVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdWZlZmZdL2csIGZ1bmN0aW9uKGNtLCB2YWwsIG9sZCkge1xuICAgIGNtLnN0YXRlLnNwZWNpYWxDaGFycyA9IG5ldyBSZWdFeHAodmFsLnNvdXJjZSArICh2YWwudGVzdChcIlxcdFwiKSA/IFwiXCIgOiBcInxcXHRcIiksIFwiZ1wiKTtcbiAgICBpZiAob2xkICE9IENvZGVNaXJyb3IuSW5pdCkgY20ucmVmcmVzaCgpO1xuICB9KTtcbiAgb3B0aW9uKFwic3BlY2lhbENoYXJQbGFjZWhvbGRlclwiLCBkZWZhdWx0U3BlY2lhbENoYXJQbGFjZWhvbGRlciwgZnVuY3Rpb24oY20pIHtjbS5yZWZyZXNoKCk7fSwgdHJ1ZSk7XG4gIG9wdGlvbihcImVsZWN0cmljQ2hhcnNcIiwgdHJ1ZSk7XG4gIG9wdGlvbihcImlucHV0U3R5bGVcIiwgbW9iaWxlID8gXCJjb250ZW50ZWRpdGFibGVcIiA6IFwidGV4dGFyZWFcIiwgZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW5wdXRTdHlsZSBjYW4gbm90ICh5ZXQpIGJlIGNoYW5nZWQgaW4gYSBydW5uaW5nIGVkaXRvclwiKTsgLy8gRklYTUVcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcInJ0bE1vdmVWaXN1YWxseVwiLCAhd2luZG93cyk7XG4gIG9wdGlvbihcIndob2xlTGluZVVwZGF0ZUJlZm9yZVwiLCB0cnVlKTtcblxuICBvcHRpb24oXCJ0aGVtZVwiLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oY20pIHtcbiAgICB0aGVtZUNoYW5nZWQoY20pO1xuICAgIGd1dHRlcnNDaGFuZ2VkKGNtKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImtleU1hcFwiLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7XG4gICAgdmFyIG5leHQgPSBnZXRLZXlNYXAodmFsKTtcbiAgICB2YXIgcHJldiA9IG9sZCAhPSBDb2RlTWlycm9yLkluaXQgJiYgZ2V0S2V5TWFwKG9sZCk7XG4gICAgaWYgKHByZXYgJiYgcHJldi5kZXRhY2gpIHByZXYuZGV0YWNoKGNtLCBuZXh0KTtcbiAgICBpZiAobmV4dC5hdHRhY2gpIG5leHQuYXR0YWNoKGNtLCBwcmV2IHx8IG51bGwpO1xuICB9KTtcbiAgb3B0aW9uKFwiZXh0cmFLZXlzXCIsIG51bGwpO1xuXG4gIG9wdGlvbihcImxpbmVXcmFwcGluZ1wiLCBmYWxzZSwgd3JhcHBpbmdDaGFuZ2VkLCB0cnVlKTtcbiAgb3B0aW9uKFwiZ3V0dGVyc1wiLCBbXSwgZnVuY3Rpb24oY20pIHtcbiAgICBzZXRHdXR0ZXJzRm9yTGluZU51bWJlcnMoY20ub3B0aW9ucyk7XG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwiZml4ZWRHdXR0ZXJcIiwgdHJ1ZSwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0ID0gdmFsID8gY29tcGVuc2F0ZUZvckhTY3JvbGwoY20uZGlzcGxheSkgKyBcInB4XCIgOiBcIjBcIjtcbiAgICBjbS5yZWZyZXNoKCk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJjb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhclwiLCBmYWxzZSwgZnVuY3Rpb24oY20pIHt1cGRhdGVTY3JvbGxiYXJzKGNtKTt9LCB0cnVlKTtcbiAgb3B0aW9uKFwic2Nyb2xsYmFyU3R5bGVcIiwgXCJuYXRpdmVcIiwgZnVuY3Rpb24oY20pIHtcbiAgICBpbml0U2Nyb2xsYmFycyhjbSk7XG4gICAgdXBkYXRlU2Nyb2xsYmFycyhjbSk7XG4gICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChjbS5kb2Muc2Nyb2xsVG9wKTtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdChjbS5kb2Muc2Nyb2xsTGVmdCk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJsaW5lTnVtYmVyc1wiLCBmYWxzZSwgZnVuY3Rpb24oY20pIHtcbiAgICBzZXRHdXR0ZXJzRm9yTGluZU51bWJlcnMoY20ub3B0aW9ucyk7XG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwiZmlyc3RMaW5lTnVtYmVyXCIsIDEsIGd1dHRlcnNDaGFuZ2VkLCB0cnVlKTtcbiAgb3B0aW9uKFwibGluZU51bWJlckZvcm1hdHRlclwiLCBmdW5jdGlvbihpbnRlZ2VyKSB7cmV0dXJuIGludGVnZXI7fSwgZ3V0dGVyc0NoYW5nZWQsIHRydWUpO1xuICBvcHRpb24oXCJzaG93Q3Vyc29yV2hlblNlbGVjdGluZ1wiLCBmYWxzZSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcblxuICBvcHRpb24oXCJyZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnVcIiwgdHJ1ZSk7XG4gIG9wdGlvbihcImxpbmVXaXNlQ29weUN1dFwiLCB0cnVlKTtcblxuICBvcHRpb24oXCJyZWFkT25seVwiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGlmICh2YWwgPT0gXCJub2N1cnNvclwiKSB7XG4gICAgICBvbkJsdXIoY20pO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5ibHVyKCk7XG4gICAgICBjbS5kaXNwbGF5LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY20uZGlzcGxheS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBjbS5kaXNwbGF5LmlucHV0LnJlYWRPbmx5Q2hhbmdlZCh2YWwpXG4gIH0pO1xuICBvcHRpb24oXCJkaXNhYmxlSW5wdXRcIiwgZmFsc2UsIGZ1bmN0aW9uKGNtLCB2YWwpIHtpZiAoIXZhbCkgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO30sIHRydWUpO1xuICBvcHRpb24oXCJkcmFnRHJvcFwiLCB0cnVlLCBkcmFnRHJvcENoYW5nZWQpO1xuICBvcHRpb24oXCJhbGxvd0Ryb3BGaWxlVHlwZXNcIiwgbnVsbCk7XG5cbiAgb3B0aW9uKFwiY3Vyc29yQmxpbmtSYXRlXCIsIDUzMCk7XG4gIG9wdGlvbihcImN1cnNvclNjcm9sbE1hcmdpblwiLCAwKTtcbiAgb3B0aW9uKFwiY3Vyc29ySGVpZ2h0XCIsIDEsIHVwZGF0ZVNlbGVjdGlvbiwgdHJ1ZSk7XG4gIG9wdGlvbihcInNpbmdsZUN1cnNvckhlaWdodFBlckxpbmVcIiwgdHJ1ZSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcbiAgb3B0aW9uKFwid29ya1RpbWVcIiwgMTAwKTtcbiAgb3B0aW9uKFwid29ya0RlbGF5XCIsIDEwMCk7XG4gIG9wdGlvbihcImZsYXR0ZW5TcGFuc1wiLCB0cnVlLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gIG9wdGlvbihcImFkZE1vZGVDbGFzc1wiLCBmYWxzZSwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICBvcHRpb24oXCJwb2xsSW50ZXJ2YWxcIiwgMTAwKTtcbiAgb3B0aW9uKFwidW5kb0RlcHRoXCIsIDIwMCwgZnVuY3Rpb24oY20sIHZhbCl7Y20uZG9jLmhpc3RvcnkudW5kb0RlcHRoID0gdmFsO30pO1xuICBvcHRpb24oXCJoaXN0b3J5RXZlbnREZWxheVwiLCAxMjUwKTtcbiAgb3B0aW9uKFwidmlld3BvcnRNYXJnaW5cIiwgMTAsIGZ1bmN0aW9uKGNtKXtjbS5yZWZyZXNoKCk7fSwgdHJ1ZSk7XG4gIG9wdGlvbihcIm1heEhpZ2hsaWdodExlbmd0aFwiLCAxMDAwMCwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICBvcHRpb24oXCJtb3ZlSW5wdXRXaXRoQ3Vyc29yXCIsIHRydWUsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBpZiAoIXZhbCkgY20uZGlzcGxheS5pbnB1dC5yZXNldFBvc2l0aW9uKCk7XG4gIH0pO1xuXG4gIG9wdGlvbihcInRhYmluZGV4XCIsIG51bGwsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBjbS5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkudGFiSW5kZXggPSB2YWwgfHwgXCJcIjtcbiAgfSk7XG4gIG9wdGlvbihcImF1dG9mb2N1c1wiLCBudWxsKTtcblxuICAvLyBNT0RFIERFRklOSVRJT04gQU5EIFFVRVJZSU5HXG5cbiAgLy8gS25vd24gbW9kZXMsIGJ5IG5hbWUgYW5kIGJ5IE1JTUVcbiAgdmFyIG1vZGVzID0gQ29kZU1pcnJvci5tb2RlcyA9IHt9LCBtaW1lTW9kZXMgPSBDb2RlTWlycm9yLm1pbWVNb2RlcyA9IHt9O1xuXG4gIC8vIEV4dHJhIGFyZ3VtZW50cyBhcmUgc3RvcmVkIGFzIHRoZSBtb2RlJ3MgZGVwZW5kZW5jaWVzLCB3aGljaCBpc1xuICAvLyB1c2VkIGJ5IChsZWdhY3kpIG1lY2hhbmlzbXMgbGlrZSBsb2FkbW9kZS5qcyB0byBhdXRvbWF0aWNhbGx5XG4gIC8vIGxvYWQgYSBtb2RlLiAoUHJlZmVycmVkIG1lY2hhbmlzbSBpcyB0aGUgcmVxdWlyZS9kZWZpbmUgY2FsbHMuKVxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUgPSBmdW5jdGlvbihuYW1lLCBtb2RlKSB7XG4gICAgaWYgKCFDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgJiYgbmFtZSAhPSBcIm51bGxcIikgQ29kZU1pcnJvci5kZWZhdWx0cy5tb2RlID0gbmFtZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpXG4gICAgICBtb2RlLmRlcGVuZGVuY2llcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgbW9kZXNbbmFtZV0gPSBtb2RlO1xuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSA9IGZ1bmN0aW9uKG1pbWUsIHNwZWMpIHtcbiAgICBtaW1lTW9kZXNbbWltZV0gPSBzcGVjO1xuICB9O1xuXG4gIC8vIEdpdmVuIGEgTUlNRSB0eXBlLCBhIHtuYW1lLCAuLi5vcHRpb25zfSBjb25maWcgb2JqZWN0LCBvciBhIG5hbWVcbiAgLy8gc3RyaW5nLCByZXR1cm4gYSBtb2RlIGNvbmZpZyBvYmplY3QuXG4gIENvZGVNaXJyb3IucmVzb2x2ZU1vZGUgPSBmdW5jdGlvbihzcGVjKSB7XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMpKSB7XG4gICAgICBzcGVjID0gbWltZU1vZGVzW3NwZWNdO1xuICAgIH0gZWxzZSBpZiAoc3BlYyAmJiB0eXBlb2Ygc3BlYy5uYW1lID09IFwic3RyaW5nXCIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHtcbiAgICAgIHZhciBmb3VuZCA9IG1pbWVNb2Rlc1tzcGVjLm5hbWVdO1xuICAgICAgaWYgKHR5cGVvZiBmb3VuZCA9PSBcInN0cmluZ1wiKSBmb3VuZCA9IHtuYW1lOiBmb3VuZH07XG4gICAgICBzcGVjID0gY3JlYXRlT2JqKGZvdW5kLCBzcGVjKTtcbiAgICAgIHNwZWMubmFtZSA9IGZvdW5kLm5hbWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIC9eW1xcd1xcLV0rXFwvW1xcd1xcLV0rXFwreG1sJC8udGVzdChzcGVjKSkge1xuICAgICAgcmV0dXJuIENvZGVNaXJyb3IucmVzb2x2ZU1vZGUoXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiKSByZXR1cm4ge25hbWU6IHNwZWN9O1xuICAgIGVsc2UgcmV0dXJuIHNwZWMgfHwge25hbWU6IFwibnVsbFwifTtcbiAgfTtcblxuICAvLyBHaXZlbiBhIG1vZGUgc3BlYyAoYW55dGhpbmcgdGhhdCByZXNvbHZlTW9kZSBhY2NlcHRzKSwgZmluZCBhbmRcbiAgLy8gaW5pdGlhbGl6ZSBhbiBhY3R1YWwgbW9kZSBvYmplY3QuXG4gIENvZGVNaXJyb3IuZ2V0TW9kZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIHNwZWMpIHtcbiAgICB2YXIgc3BlYyA9IENvZGVNaXJyb3IucmVzb2x2ZU1vZGUoc3BlYyk7XG4gICAgdmFyIG1mYWN0b3J5ID0gbW9kZXNbc3BlYy5uYW1lXTtcbiAgICBpZiAoIW1mYWN0b3J5KSByZXR1cm4gQ29kZU1pcnJvci5nZXRNb2RlKG9wdGlvbnMsIFwidGV4dC9wbGFpblwiKTtcbiAgICB2YXIgbW9kZU9iaiA9IG1mYWN0b3J5KG9wdGlvbnMsIHNwZWMpO1xuICAgIGlmIChtb2RlRXh0ZW5zaW9ucy5oYXNPd25Qcm9wZXJ0eShzcGVjLm5hbWUpKSB7XG4gICAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zW3NwZWMubmFtZV07XG4gICAgICBmb3IgKHZhciBwcm9wIGluIGV4dHMpIHtcbiAgICAgICAgaWYgKCFleHRzLmhhc093blByb3BlcnR5KHByb3ApKSBjb250aW51ZTtcbiAgICAgICAgaWYgKG1vZGVPYmouaGFzT3duUHJvcGVydHkocHJvcCkpIG1vZGVPYmpbXCJfXCIgKyBwcm9wXSA9IG1vZGVPYmpbcHJvcF07XG4gICAgICAgIG1vZGVPYmpbcHJvcF0gPSBleHRzW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBtb2RlT2JqLm5hbWUgPSBzcGVjLm5hbWU7XG4gICAgaWYgKHNwZWMuaGVscGVyVHlwZSkgbW9kZU9iai5oZWxwZXJUeXBlID0gc3BlYy5oZWxwZXJUeXBlO1xuICAgIGlmIChzcGVjLm1vZGVQcm9wcykgZm9yICh2YXIgcHJvcCBpbiBzcGVjLm1vZGVQcm9wcylcbiAgICAgIG1vZGVPYmpbcHJvcF0gPSBzcGVjLm1vZGVQcm9wc1twcm9wXTtcblxuICAgIHJldHVybiBtb2RlT2JqO1xuICB9O1xuXG4gIC8vIE1pbmltYWwgZGVmYXVsdCBtb2RlLlxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUoXCJudWxsXCIsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7dG9rZW46IGZ1bmN0aW9uKHN0cmVhbSkge3N0cmVhbS5za2lwVG9FbmQoKTt9fTtcbiAgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRShcInRleHQvcGxhaW5cIiwgXCJudWxsXCIpO1xuXG4gIC8vIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXR0YWNoIHByb3BlcnRpZXMgdG8gbW9kZSBvYmplY3RzIGZyb21cbiAgLy8gb3V0c2lkZSB0aGUgYWN0dWFsIG1vZGUgZGVmaW5pdGlvbi5cbiAgdmFyIG1vZGVFeHRlbnNpb25zID0gQ29kZU1pcnJvci5tb2RlRXh0ZW5zaW9ucyA9IHt9O1xuICBDb2RlTWlycm9yLmV4dGVuZE1vZGUgPSBmdW5jdGlvbihtb2RlLCBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGV4dHMgPSBtb2RlRXh0ZW5zaW9ucy5oYXNPd25Qcm9wZXJ0eShtb2RlKSA/IG1vZGVFeHRlbnNpb25zW21vZGVdIDogKG1vZGVFeHRlbnNpb25zW21vZGVdID0ge30pO1xuICAgIGNvcHlPYmoocHJvcGVydGllcywgZXh0cyk7XG4gIH07XG5cbiAgLy8gRVhURU5TSU9OU1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uID0gZnVuY3Rpb24obmFtZSwgZnVuYykge1xuICAgIENvZGVNaXJyb3IucHJvdG90eXBlW25hbWVdID0gZnVuYztcbiAgfTtcbiAgQ29kZU1pcnJvci5kZWZpbmVEb2NFeHRlbnNpb24gPSBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG4gICAgRG9jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmM7XG4gIH07XG4gIENvZGVNaXJyb3IuZGVmaW5lT3B0aW9uID0gb3B0aW9uO1xuXG4gIHZhciBpbml0SG9va3MgPSBbXTtcbiAgQ29kZU1pcnJvci5kZWZpbmVJbml0SG9vayA9IGZ1bmN0aW9uKGYpIHtpbml0SG9va3MucHVzaChmKTt9O1xuXG4gIHZhciBoZWxwZXJzID0gQ29kZU1pcnJvci5oZWxwZXJzID0ge307XG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaGVscGVycy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgaGVscGVyc1t0eXBlXSA9IENvZGVNaXJyb3JbdHlwZV0gPSB7X2dsb2JhbDogW119O1xuICAgIGhlbHBlcnNbdHlwZV1bbmFtZV0gPSB2YWx1ZTtcbiAgfTtcbiAgQ29kZU1pcnJvci5yZWdpc3Rlckdsb2JhbEhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHByZWRpY2F0ZSwgdmFsdWUpIHtcbiAgICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKHR5cGUsIG5hbWUsIHZhbHVlKTtcbiAgICBoZWxwZXJzW3R5cGVdLl9nbG9iYWwucHVzaCh7cHJlZDogcHJlZGljYXRlLCB2YWw6IHZhbHVlfSk7XG4gIH07XG5cbiAgLy8gTU9ERSBTVEFURSBIQU5ETElOR1xuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25zIGZvciB3b3JraW5nIHdpdGggc3RhdGUuIEV4cG9ydGVkIGJlY2F1c2UgbmVzdGVkXG4gIC8vIG1vZGVzIG5lZWQgdG8gZG8gdGhpcyBmb3IgdGhlaXIgaW5uZXIgbW9kZXMuXG5cbiAgdmFyIGNvcHlTdGF0ZSA9IENvZGVNaXJyb3IuY29weVN0YXRlID0gZnVuY3Rpb24obW9kZSwgc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUgPT09IHRydWUpIHJldHVybiBzdGF0ZTtcbiAgICBpZiAobW9kZS5jb3B5U3RhdGUpIHJldHVybiBtb2RlLmNvcHlTdGF0ZShzdGF0ZSk7XG4gICAgdmFyIG5zdGF0ZSA9IHt9O1xuICAgIGZvciAodmFyIG4gaW4gc3RhdGUpIHtcbiAgICAgIHZhciB2YWwgPSBzdGF0ZVtuXTtcbiAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSkgdmFsID0gdmFsLmNvbmNhdChbXSk7XG4gICAgICBuc3RhdGVbbl0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiBuc3RhdGU7XG4gIH07XG5cbiAgdmFyIHN0YXJ0U3RhdGUgPSBDb2RlTWlycm9yLnN0YXJ0U3RhdGUgPSBmdW5jdGlvbihtb2RlLCBhMSwgYTIpIHtcbiAgICByZXR1cm4gbW9kZS5zdGFydFN0YXRlID8gbW9kZS5zdGFydFN0YXRlKGExLCBhMikgOiB0cnVlO1xuICB9O1xuXG4gIC8vIEdpdmVuIGEgbW9kZSBhbmQgYSBzdGF0ZSAoZm9yIHRoYXQgbW9kZSksIGZpbmQgdGhlIGlubmVyIG1vZGUgYW5kXG4gIC8vIHN0YXRlIGF0IHRoZSBwb3NpdGlvbiB0aGF0IHRoZSBzdGF0ZSByZWZlcnMgdG8uXG4gIENvZGVNaXJyb3IuaW5uZXJNb2RlID0gZnVuY3Rpb24obW9kZSwgc3RhdGUpIHtcbiAgICB3aGlsZSAobW9kZS5pbm5lck1vZGUpIHtcbiAgICAgIHZhciBpbmZvID0gbW9kZS5pbm5lck1vZGUoc3RhdGUpO1xuICAgICAgaWYgKCFpbmZvIHx8IGluZm8ubW9kZSA9PSBtb2RlKSBicmVhaztcbiAgICAgIHN0YXRlID0gaW5mby5zdGF0ZTtcbiAgICAgIG1vZGUgPSBpbmZvLm1vZGU7XG4gICAgfVxuICAgIHJldHVybiBpbmZvIHx8IHttb2RlOiBtb2RlLCBzdGF0ZTogc3RhdGV9O1xuICB9O1xuXG4gIC8vIFNUQU5EQVJEIENPTU1BTkRTXG5cbiAgLy8gQ29tbWFuZHMgYXJlIHBhcmFtZXRlci1sZXNzIGFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIG9uIGFuXG4gIC8vIGVkaXRvciwgbW9zdGx5IHVzZWQgZm9yIGtleWJpbmRpbmdzLlxuICB2YXIgY29tbWFuZHMgPSBDb2RlTWlycm9yLmNvbW1hbmRzID0ge1xuICAgIHNlbGVjdEFsbDogZnVuY3Rpb24oY20pIHtjbS5zZXRTZWxlY3Rpb24oUG9zKGNtLmZpcnN0TGluZSgpLCAwKSwgUG9zKGNtLmxhc3RMaW5lKCkpLCBzZWxfZG9udFNjcm9sbCk7fSxcbiAgICBzaW5nbGVTZWxlY3Rpb246IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5zZXRTZWxlY3Rpb24oY20uZ2V0Q3Vyc29yKFwiYW5jaG9yXCIpLCBjbS5nZXRDdXJzb3IoXCJoZWFkXCIpLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgfSxcbiAgICBraWxsTGluZTogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSgpKSB7XG4gICAgICAgICAgdmFyIGxlbiA9IGdldExpbmUoY20uZG9jLCByYW5nZS5oZWFkLmxpbmUpLnRleHQubGVuZ3RoO1xuICAgICAgICAgIGlmIChyYW5nZS5oZWFkLmNoID09IGxlbiAmJiByYW5nZS5oZWFkLmxpbmUgPCBjbS5sYXN0TGluZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHtmcm9tOiByYW5nZS5oZWFkLCB0bzogUG9zKHJhbmdlLmhlYWQubGluZSArIDEsIDApfTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lLCBsZW4pfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCl9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbGV0ZUxpbmU6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4ge2Zyb206IFBvcyhyYW5nZS5mcm9tKCkubGluZSwgMCksXG4gICAgICAgICAgICAgICAgdG86IGNsaXBQb3MoY20uZG9jLCBQb3MocmFuZ2UudG8oKS5saW5lICsgMSwgMCkpfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4ge2Zyb206IFBvcyhyYW5nZS5mcm9tKCkubGluZSwgMCksIHRvOiByYW5nZS5mcm9tKCl9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxXcmFwcGVkTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICB2YXIgdG9wID0gY20uY2hhckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xuICAgICAgICB2YXIgbGVmdFBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICAgIHJldHVybiB7ZnJvbTogbGVmdFBvcywgdG86IHJhbmdlLmZyb20oKX07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbFdyYXBwZWRMaW5lUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICB2YXIgdG9wID0gY20uY2hhckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xuICAgICAgICB2YXIgcmlnaHRQb3MgPSBjbS5jb29yZHNDaGFyKHtsZWZ0OiBjbS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGggKyAxMDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmlnaHRQb3MgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5kbzogZnVuY3Rpb24oY20pIHtjbS51bmRvKCk7fSxcbiAgICByZWRvOiBmdW5jdGlvbihjbSkge2NtLnJlZG8oKTt9LFxuICAgIHVuZG9TZWxlY3Rpb246IGZ1bmN0aW9uKGNtKSB7Y20udW5kb1NlbGVjdGlvbigpO30sXG4gICAgcmVkb1NlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtjbS5yZWRvU2VsZWN0aW9uKCk7fSxcbiAgICBnb0RvY1N0YXJ0OiBmdW5jdGlvbihjbSkge2NtLmV4dGVuZFNlbGVjdGlvbihQb3MoY20uZmlyc3RMaW5lKCksIDApKTt9LFxuICAgIGdvRG9jRW5kOiBmdW5jdGlvbihjbSkge2NtLmV4dGVuZFNlbGVjdGlvbihQb3MoY20ubGFzdExpbmUoKSkpO30sXG4gICAgZ29MaW5lU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHsgcmV0dXJuIGxpbmVTdGFydChjbSwgcmFuZ2UuaGVhZC5saW5lKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JpZ2luOiBcIittb3ZlXCIsIGJpYXM6IDF9KTtcbiAgICB9LFxuICAgIGdvTGluZVN0YXJ0U21hcnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVTdGFydFNtYXJ0KGNtLCByYW5nZS5oZWFkKTtcbiAgICAgIH0sIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogMX0pO1xuICAgIH0sXG4gICAgZ29MaW5lRW5kOiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7IHJldHVybiBsaW5lRW5kKGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogLTF9KTtcbiAgICB9LFxuICAgIGdvTGluZVJpZ2h0OiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHJldHVybiBjbS5jb29yZHNDaGFyKHtsZWZ0OiBjbS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGggKyAxMDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICB9LCBzZWxfbW92ZSk7XG4gICAgfSxcbiAgICBnb0xpbmVMZWZ0OiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHJldHVybiBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0sXG4gICAgZ29MaW5lTGVmdFNtYXJ0OiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHZhciBwb3MgPSBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpO1xuICAgICAgICBpZiAocG9zLmNoIDwgY20uZ2V0TGluZShwb3MubGluZSkuc2VhcmNoKC9cXFMvKSkgcmV0dXJuIGxpbmVTdGFydFNtYXJ0KGNtLCByYW5nZS5oZWFkKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICB9LFxuICAgIGdvTGluZVVwOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKC0xLCBcImxpbmVcIik7fSxcbiAgICBnb0xpbmVEb3duOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKDEsIFwibGluZVwiKTt9LFxuICAgIGdvUGFnZVVwOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKC0xLCBcInBhZ2VcIik7fSxcbiAgICBnb1BhZ2VEb3duOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKDEsIFwicGFnZVwiKTt9LFxuICAgIGdvQ2hhckxlZnQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoLTEsIFwiY2hhclwiKTt9LFxuICAgIGdvQ2hhclJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiY2hhclwiKTt9LFxuICAgIGdvQ29sdW1uTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJjb2x1bW5cIik7fSxcbiAgICBnb0NvbHVtblJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiY29sdW1uXCIpO30sXG4gICAgZ29Xb3JkTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJ3b3JkXCIpO30sXG4gICAgZ29Hcm91cFJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiZ3JvdXBcIik7fSxcbiAgICBnb0dyb3VwTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJncm91cFwiKTt9LFxuICAgIGdvV29yZFJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwid29yZFwiKTt9LFxuICAgIGRlbENoYXJCZWZvcmU6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgtMSwgXCJjaGFyXCIpO30sXG4gICAgZGVsQ2hhckFmdGVyOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoMSwgXCJjaGFyXCIpO30sXG4gICAgZGVsV29yZEJlZm9yZTogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKC0xLCBcIndvcmRcIik7fSxcbiAgICBkZWxXb3JkQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcIndvcmRcIik7fSxcbiAgICBkZWxHcm91cEJlZm9yZTogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKC0xLCBcImdyb3VwXCIpO30sXG4gICAgZGVsR3JvdXBBZnRlcjogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKDEsIFwiZ3JvdXBcIik7fSxcbiAgICBpbmRlbnRBdXRvOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcInNtYXJ0XCIpO30sXG4gICAgaW5kZW50TW9yZTogZnVuY3Rpb24oY20pIHtjbS5pbmRlbnRTZWxlY3Rpb24oXCJhZGRcIik7fSxcbiAgICBpbmRlbnRMZXNzOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcInN1YnRyYWN0XCIpO30sXG4gICAgaW5zZXJ0VGFiOiBmdW5jdGlvbihjbSkge2NtLnJlcGxhY2VTZWxlY3Rpb24oXCJcXHRcIik7fSxcbiAgICBpbnNlcnRTb2Z0VGFiOiBmdW5jdGlvbihjbSkge1xuICAgICAgdmFyIHNwYWNlcyA9IFtdLCByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBvcyA9IHJhbmdlc1tpXS5mcm9tKCk7XG4gICAgICAgIHZhciBjb2wgPSBjb3VudENvbHVtbihjbS5nZXRMaW5lKHBvcy5saW5lKSwgcG9zLmNoLCB0YWJTaXplKTtcbiAgICAgICAgc3BhY2VzLnB1c2gobmV3IEFycmF5KHRhYlNpemUgLSBjb2wgJSB0YWJTaXplICsgMSkuam9pbihcIiBcIikpO1xuICAgICAgfVxuICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbnMoc3BhY2VzKTtcbiAgICB9LFxuICAgIGRlZmF1bHRUYWI6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgY20uaW5kZW50U2VsZWN0aW9uKFwiYWRkXCIpO1xuICAgICAgZWxzZSBjbS5leGVjQ29tbWFuZChcImluc2VydFRhYlwiKTtcbiAgICB9LFxuICAgIHRyYW5zcG9zZUNoYXJzOiBmdW5jdGlvbihjbSkge1xuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCBuZXdTZWwgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY3VyID0gcmFuZ2VzW2ldLmhlYWQsIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUpLnRleHQ7XG4gICAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICAgIGlmIChjdXIuY2ggPT0gbGluZS5sZW5ndGgpIGN1ciA9IG5ldyBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDEpO1xuICAgICAgICAgICAgaWYgKGN1ci5jaCA+IDApIHtcbiAgICAgICAgICAgICAgY3VyID0gbmV3IFBvcyhjdXIubGluZSwgY3VyLmNoICsgMSk7XG4gICAgICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lLmNoYXJBdChjdXIuY2ggLSAxKSArIGxpbmUuY2hhckF0KGN1ci5jaCAtIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAyKSwgY3VyLCBcIit0cmFuc3Bvc2VcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1ci5saW5lID4gY20uZG9jLmZpcnN0KSB7XG4gICAgICAgICAgICAgIHZhciBwcmV2ID0gZ2V0TGluZShjbS5kb2MsIGN1ci5saW5lIC0gMSkudGV4dDtcbiAgICAgICAgICAgICAgaWYgKHByZXYpXG4gICAgICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGxpbmUuY2hhckF0KDApICsgY20uZG9jLmxpbmVTZXBhcmF0b3IoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuY2hhckF0KHByZXYubGVuZ3RoIC0gMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcyhjdXIubGluZSAtIDEsIHByZXYubGVuZ3RoIC0gMSksIFBvcyhjdXIubGluZSwgMSksIFwiK3RyYW5zcG9zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3U2VsLnB1c2gobmV3IFJhbmdlKGN1ciwgY3VyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY20uc2V0U2VsZWN0aW9ucyhuZXdTZWwpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBuZXdsaW5lQW5kSW5kZW50OiBmdW5jdGlvbihjbSkge1xuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSBjbS5saXN0U2VsZWN0aW9ucygpLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciByYW5nZSA9IGNtLmxpc3RTZWxlY3Rpb25zKClbaV07XG4gICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGNtLmRvYy5saW5lU2VwYXJhdG9yKCksIHJhbmdlLmFuY2hvciwgcmFuZ2UuaGVhZCwgXCIraW5wdXRcIik7XG4gICAgICAgICAgY20uaW5kZW50TGluZShyYW5nZS5mcm9tKCkubGluZSArIDEsIG51bGwsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKGNtKSB7Y20udG9nZ2xlT3ZlcndyaXRlKCk7fVxuICB9O1xuXG5cbiAgLy8gU1RBTkRBUkQgS0VZTUFQU1xuXG4gIHZhciBrZXlNYXAgPSBDb2RlTWlycm9yLmtleU1hcCA9IHt9O1xuXG4gIGtleU1hcC5iYXNpYyA9IHtcbiAgICBcIkxlZnRcIjogXCJnb0NoYXJMZWZ0XCIsIFwiUmlnaHRcIjogXCJnb0NoYXJSaWdodFwiLCBcIlVwXCI6IFwiZ29MaW5lVXBcIiwgXCJEb3duXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiRW5kXCI6IFwiZ29MaW5lRW5kXCIsIFwiSG9tZVwiOiBcImdvTGluZVN0YXJ0U21hcnRcIiwgXCJQYWdlVXBcIjogXCJnb1BhZ2VVcFwiLCBcIlBhZ2VEb3duXCI6IFwiZ29QYWdlRG93blwiLFxuICAgIFwiRGVsZXRlXCI6IFwiZGVsQ2hhckFmdGVyXCIsIFwiQmFja3NwYWNlXCI6IFwiZGVsQ2hhckJlZm9yZVwiLCBcIlNoaWZ0LUJhY2tzcGFjZVwiOiBcImRlbENoYXJCZWZvcmVcIixcbiAgICBcIlRhYlwiOiBcImRlZmF1bHRUYWJcIiwgXCJTaGlmdC1UYWJcIjogXCJpbmRlbnRBdXRvXCIsXG4gICAgXCJFbnRlclwiOiBcIm5ld2xpbmVBbmRJbmRlbnRcIiwgXCJJbnNlcnRcIjogXCJ0b2dnbGVPdmVyd3JpdGVcIixcbiAgICBcIkVzY1wiOiBcInNpbmdsZVNlbGVjdGlvblwiXG4gIH07XG4gIC8vIE5vdGUgdGhhdCB0aGUgc2F2ZSBhbmQgZmluZC1yZWxhdGVkIGNvbW1hbmRzIGFyZW4ndCBkZWZpbmVkIGJ5XG4gIC8vIGRlZmF1bHQuIFVzZXIgY29kZSBvciBhZGRvbnMgY2FuIGRlZmluZSB0aGVtLiBVbmtub3duIGNvbW1hbmRzXG4gIC8vIGFyZSBzaW1wbHkgaWdub3JlZC5cbiAga2V5TWFwLnBjRGVmYXVsdCA9IHtcbiAgICBcIkN0cmwtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkN0cmwtRFwiOiBcImRlbGV0ZUxpbmVcIiwgXCJDdHJsLVpcIjogXCJ1bmRvXCIsIFwiU2hpZnQtQ3RybC1aXCI6IFwicmVkb1wiLCBcIkN0cmwtWVwiOiBcInJlZG9cIixcbiAgICBcIkN0cmwtSG9tZVwiOiBcImdvRG9jU3RhcnRcIiwgXCJDdHJsLUVuZFwiOiBcImdvRG9jRW5kXCIsIFwiQ3RybC1VcFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiQ3RybC1MZWZ0XCI6IFwiZ29Hcm91cExlZnRcIiwgXCJDdHJsLVJpZ2h0XCI6IFwiZ29Hcm91cFJpZ2h0XCIsIFwiQWx0LUxlZnRcIjogXCJnb0xpbmVTdGFydFwiLCBcIkFsdC1SaWdodFwiOiBcImdvTGluZUVuZFwiLFxuICAgIFwiQ3RybC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLCBcIkN0cmwtRGVsZXRlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkN0cmwtU1wiOiBcInNhdmVcIiwgXCJDdHJsLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDdHJsLUdcIjogXCJmaW5kTmV4dFwiLCBcIlNoaWZ0LUN0cmwtR1wiOiBcImZpbmRQcmV2XCIsIFwiU2hpZnQtQ3RybC1GXCI6IFwicmVwbGFjZVwiLCBcIlNoaWZ0LUN0cmwtUlwiOiBcInJlcGxhY2VBbGxcIixcbiAgICBcIkN0cmwtW1wiOiBcImluZGVudExlc3NcIiwgXCJDdHJsLV1cIjogXCJpbmRlbnRNb3JlXCIsXG4gICAgXCJDdHJsLVVcIjogXCJ1bmRvU2VsZWN0aW9uXCIsIFwiU2hpZnQtQ3RybC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkFsdC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLFxuICAgIGZhbGx0aHJvdWdoOiBcImJhc2ljXCJcbiAgfTtcbiAgLy8gVmVyeSBiYXNpYyByZWFkbGluZS9lbWFjcy1zdHlsZSBiaW5kaW5ncywgd2hpY2ggYXJlIHN0YW5kYXJkIG9uIE1hYy5cbiAga2V5TWFwLmVtYWNzeSA9IHtcbiAgICBcIkN0cmwtRlwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiQ3RybC1CXCI6IFwiZ29DaGFyTGVmdFwiLCBcIkN0cmwtUFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1OXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiQWx0LUZcIjogXCJnb1dvcmRSaWdodFwiLCBcIkFsdC1CXCI6IFwiZ29Xb3JkTGVmdFwiLCBcIkN0cmwtQVwiOiBcImdvTGluZVN0YXJ0XCIsIFwiQ3RybC1FXCI6IFwiZ29MaW5lRW5kXCIsXG4gICAgXCJDdHJsLVZcIjogXCJnb1BhZ2VEb3duXCIsIFwiU2hpZnQtQ3RybC1WXCI6IFwiZ29QYWdlVXBcIiwgXCJDdHJsLURcIjogXCJkZWxDaGFyQWZ0ZXJcIiwgXCJDdHJsLUhcIjogXCJkZWxDaGFyQmVmb3JlXCIsXG4gICAgXCJBbHQtRFwiOiBcImRlbFdvcmRBZnRlclwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxXb3JkQmVmb3JlXCIsIFwiQ3RybC1LXCI6IFwia2lsbExpbmVcIiwgXCJDdHJsLVRcIjogXCJ0cmFuc3Bvc2VDaGFyc1wiXG4gIH07XG4gIGtleU1hcC5tYWNEZWZhdWx0ID0ge1xuICAgIFwiQ21kLUFcIjogXCJzZWxlY3RBbGxcIiwgXCJDbWQtRFwiOiBcImRlbGV0ZUxpbmVcIiwgXCJDbWQtWlwiOiBcInVuZG9cIiwgXCJTaGlmdC1DbWQtWlwiOiBcInJlZG9cIiwgXCJDbWQtWVwiOiBcInJlZG9cIixcbiAgICBcIkNtZC1Ib21lXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkNtZC1VcFwiOiBcImdvRG9jU3RhcnRcIiwgXCJDbWQtRW5kXCI6IFwiZ29Eb2NFbmRcIiwgXCJDbWQtRG93blwiOiBcImdvRG9jRW5kXCIsIFwiQWx0LUxlZnRcIjogXCJnb0dyb3VwTGVmdFwiLFxuICAgIFwiQWx0LVJpZ2h0XCI6IFwiZ29Hcm91cFJpZ2h0XCIsIFwiQ21kLUxlZnRcIjogXCJnb0xpbmVMZWZ0XCIsIFwiQ21kLVJpZ2h0XCI6IFwiZ29MaW5lUmlnaHRcIiwgXCJBbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBCZWZvcmVcIixcbiAgICBcIkN0cmwtQWx0LUJhY2tzcGFjZVwiOiBcImRlbEdyb3VwQWZ0ZXJcIiwgXCJBbHQtRGVsZXRlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkNtZC1TXCI6IFwic2F2ZVwiLCBcIkNtZC1GXCI6IFwiZmluZFwiLFxuICAgIFwiQ21kLUdcIjogXCJmaW5kTmV4dFwiLCBcIlNoaWZ0LUNtZC1HXCI6IFwiZmluZFByZXZcIiwgXCJDbWQtQWx0LUZcIjogXCJyZXBsYWNlXCIsIFwiU2hpZnQtQ21kLUFsdC1GXCI6IFwicmVwbGFjZUFsbFwiLFxuICAgIFwiQ21kLVtcIjogXCJpbmRlbnRMZXNzXCIsIFwiQ21kLV1cIjogXCJpbmRlbnRNb3JlXCIsIFwiQ21kLUJhY2tzcGFjZVwiOiBcImRlbFdyYXBwZWRMaW5lTGVmdFwiLCBcIkNtZC1EZWxldGVcIjogXCJkZWxXcmFwcGVkTGluZVJpZ2h0XCIsXG4gICAgXCJDbWQtVVwiOiBcInVuZG9TZWxlY3Rpb25cIiwgXCJTaGlmdC1DbWQtVVwiOiBcInJlZG9TZWxlY3Rpb25cIiwgXCJDdHJsLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkN0cmwtRG93blwiOiBcImdvRG9jRW5kXCIsXG4gICAgZmFsbHRocm91Z2g6IFtcImJhc2ljXCIsIFwiZW1hY3N5XCJdXG4gIH07XG4gIGtleU1hcFtcImRlZmF1bHRcIl0gPSBtYWMgPyBrZXlNYXAubWFjRGVmYXVsdCA6IGtleU1hcC5wY0RlZmF1bHQ7XG5cbiAgLy8gS0VZTUFQIERJU1BBVENIXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lKSB7XG4gICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyksIG5hbWUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICB2YXIgYWx0LCBjdHJsLCBzaGlmdCwgY21kO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICB2YXIgbW9kID0gcGFydHNbaV07XG4gICAgICBpZiAoL14oY21kfG1ldGF8bSkkL2kudGVzdChtb2QpKSBjbWQgPSB0cnVlO1xuICAgICAgZWxzZSBpZiAoL15hKGx0KT8kL2kudGVzdChtb2QpKSBhbHQgPSB0cnVlO1xuICAgICAgZWxzZSBpZiAoL14oY3xjdHJsfGNvbnRyb2wpJC9pLnRlc3QobW9kKSkgY3RybCA9IHRydWU7XG4gICAgICBlbHNlIGlmICgvXnMoaGlmdCkkL2kudGVzdChtb2QpKSBzaGlmdCA9IHRydWU7XG4gICAgICBlbHNlIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCk7XG4gICAgfVxuICAgIGlmIChhbHQpIG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7XG4gICAgaWYgKGN0cmwpIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xuICAgIGlmIChjbWQpIG5hbWUgPSBcIkNtZC1cIiArIG5hbWU7XG4gICAgaWYgKHNoaWZ0KSBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH1cblxuICAvLyBUaGlzIGlzIGEga2x1ZGdlIHRvIGtlZXAga2V5bWFwcyBtb3N0bHkgd29ya2luZyBhcyByYXcgb2JqZWN0c1xuICAvLyAoYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpIHdoaWxlIGF0IHRoZSBzYW1lIHRpbWUgc3VwcG9ydCBmZWF0dXJlc1xuICAvLyBsaWtlIG5vcm1hbGl6YXRpb24gYW5kIG11bHRpLXN0cm9rZSBrZXkgYmluZGluZ3MuIEl0IGNvbXBpbGVzIGFcbiAgLy8gbmV3IG5vcm1hbGl6ZWQga2V5bWFwLCBhbmQgdGhlbiB1cGRhdGVzIHRoZSBvbGQgb2JqZWN0IHRvIHJlZmxlY3RcbiAgLy8gdGhpcy5cbiAgQ29kZU1pcnJvci5ub3JtYWxpemVLZXlNYXAgPSBmdW5jdGlvbihrZXltYXApIHtcbiAgICB2YXIgY29weSA9IHt9O1xuICAgIGZvciAodmFyIGtleW5hbWUgaW4ga2V5bWFwKSBpZiAoa2V5bWFwLmhhc093blByb3BlcnR5KGtleW5hbWUpKSB7XG4gICAgICB2YXIgdmFsdWUgPSBrZXltYXBba2V5bmFtZV07XG4gICAgICBpZiAoL14obmFtZXxmYWxsdGhyb3VnaHwoZGV8YXQpdGFjaCkkLy50ZXN0KGtleW5hbWUpKSBjb250aW51ZTtcbiAgICAgIGlmICh2YWx1ZSA9PSBcIi4uLlwiKSB7IGRlbGV0ZSBrZXltYXBba2V5bmFtZV07IGNvbnRpbnVlOyB9XG5cbiAgICAgIHZhciBrZXlzID0gbWFwKGtleW5hbWUuc3BsaXQoXCIgXCIpLCBub3JtYWxpemVLZXlOYW1lKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdmFsLCBuYW1lO1xuICAgICAgICBpZiAoaSA9PSBrZXlzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBuYW1lID0ga2V5cy5qb2luKFwiIFwiKTtcbiAgICAgICAgICB2YWwgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYW1lID0ga2V5cy5zbGljZSgwLCBpICsgMSkuam9pbihcIiBcIik7XG4gICAgICAgICAgdmFsID0gXCIuLi5cIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldiA9IGNvcHlbbmFtZV07XG4gICAgICAgIGlmICghcHJldikgY29weVtuYW1lXSA9IHZhbDtcbiAgICAgICAgZWxzZSBpZiAocHJldiAhPSB2YWwpIHRocm93IG5ldyBFcnJvcihcIkluY29uc2lzdGVudCBiaW5kaW5ncyBmb3IgXCIgKyBuYW1lKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBrZXltYXBba2V5bmFtZV07XG4gICAgfVxuICAgIGZvciAodmFyIHByb3AgaW4gY29weSkga2V5bWFwW3Byb3BdID0gY29weVtwcm9wXTtcbiAgICByZXR1cm4ga2V5bWFwO1xuICB9O1xuXG4gIHZhciBsb29rdXBLZXkgPSBDb2RlTWlycm9yLmxvb2t1cEtleSA9IGZ1bmN0aW9uKGtleSwgbWFwLCBoYW5kbGUsIGNvbnRleHQpIHtcbiAgICBtYXAgPSBnZXRLZXlNYXAobWFwKTtcbiAgICB2YXIgZm91bmQgPSBtYXAuY2FsbCA/IG1hcC5jYWxsKGtleSwgY29udGV4dCkgOiBtYXBba2V5XTtcbiAgICBpZiAoZm91bmQgPT09IGZhbHNlKSByZXR1cm4gXCJub3RoaW5nXCI7XG4gICAgaWYgKGZvdW5kID09PSBcIi4uLlwiKSByZXR1cm4gXCJtdWx0aVwiO1xuICAgIGlmIChmb3VuZCAhPSBudWxsICYmIGhhbmRsZShmb3VuZCkpIHJldHVybiBcImhhbmRsZWRcIjtcblxuICAgIGlmIChtYXAuZmFsbHRocm91Z2gpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWFwLmZhbGx0aHJvdWdoKSAhPSBcIltvYmplY3QgQXJyYXldXCIpXG4gICAgICAgIHJldHVybiBsb29rdXBLZXkoa2V5LCBtYXAuZmFsbHRocm91Z2gsIGhhbmRsZSwgY29udGV4dCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5mYWxsdGhyb3VnaC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbG9va3VwS2V5KGtleSwgbWFwLmZhbGx0aHJvdWdoW2ldLCBoYW5kbGUsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBNb2RpZmllciBrZXkgcHJlc3NlcyBkb24ndCBjb3VudCBhcyAncmVhbCcga2V5IHByZXNzZXMgZm9yIHRoZVxuICAvLyBwdXJwb3NlIG9mIGtleW1hcCBmYWxsdGhyb3VnaC5cbiAgdmFyIGlzTW9kaWZpZXJLZXkgPSBDb2RlTWlycm9yLmlzTW9kaWZpZXJLZXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBuYW1lID0gdHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIgPyB2YWx1ZSA6IGtleU5hbWVzW3ZhbHVlLmtleUNvZGVdO1xuICAgIHJldHVybiBuYW1lID09IFwiQ3RybFwiIHx8IG5hbWUgPT0gXCJBbHRcIiB8fCBuYW1lID09IFwiU2hpZnRcIiB8fCBuYW1lID09IFwiTW9kXCI7XG4gIH07XG5cbiAgLy8gTG9vayB1cCB0aGUgbmFtZSBvZiBhIGtleSBhcyBpbmRpY2F0ZWQgYnkgYW4gZXZlbnQgb2JqZWN0LlxuICB2YXIga2V5TmFtZSA9IENvZGVNaXJyb3Iua2V5TmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBub1NoaWZ0KSB7XG4gICAgaWYgKHByZXN0byAmJiBldmVudC5rZXlDb2RlID09IDM0ICYmIGV2ZW50W1wiY2hhclwiXSkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBiYXNlID0ga2V5TmFtZXNbZXZlbnQua2V5Q29kZV0sIG5hbWUgPSBiYXNlO1xuICAgIGlmIChuYW1lID09IG51bGwgfHwgZXZlbnQuYWx0R3JhcGhLZXkpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZXZlbnQuYWx0S2V5ICYmIGJhc2UgIT0gXCJBbHRcIikgbmFtZSA9IFwiQWx0LVwiICsgbmFtZTtcbiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXkpICYmIGJhc2UgIT0gXCJDdHJsXCIpIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xuICAgIGlmICgoZmxpcEN0cmxDbWQgPyBldmVudC5jdHJsS2V5IDogZXZlbnQubWV0YUtleSkgJiYgYmFzZSAhPSBcIkNtZFwiKSBuYW1lID0gXCJDbWQtXCIgKyBuYW1lO1xuICAgIGlmICghbm9TaGlmdCAmJiBldmVudC5zaGlmdEtleSAmJiBiYXNlICE9IFwiU2hpZnRcIikgbmFtZSA9IFwiU2hpZnQtXCIgKyBuYW1lO1xuICAgIHJldHVybiBuYW1lO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldEtleU1hcCh2YWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PSBcInN0cmluZ1wiID8ga2V5TWFwW3ZhbF0gOiB2YWw7XG4gIH1cblxuICAvLyBGUk9NVEVYVEFSRUFcblxuICBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBjb3B5T2JqKG9wdGlvbnMpIDoge307XG4gICAgb3B0aW9ucy52YWx1ZSA9IHRleHRhcmVhLnZhbHVlO1xuICAgIGlmICghb3B0aW9ucy50YWJpbmRleCAmJiB0ZXh0YXJlYS50YWJJbmRleClcbiAgICAgIG9wdGlvbnMudGFiaW5kZXggPSB0ZXh0YXJlYS50YWJJbmRleDtcbiAgICBpZiAoIW9wdGlvbnMucGxhY2Vob2xkZXIgJiYgdGV4dGFyZWEucGxhY2Vob2xkZXIpXG4gICAgICBvcHRpb25zLnBsYWNlaG9sZGVyID0gdGV4dGFyZWEucGxhY2Vob2xkZXI7XG4gICAgLy8gU2V0IGF1dG9mb2N1cyB0byB0cnVlIGlmIHRoaXMgdGV4dGFyZWEgaXMgZm9jdXNlZCwgb3IgaWYgaXQgaGFzXG4gICAgLy8gYXV0b2ZvY3VzIGFuZCBubyBvdGhlciBlbGVtZW50IGlzIGZvY3VzZWQuXG4gICAgaWYgKG9wdGlvbnMuYXV0b2ZvY3VzID09IG51bGwpIHtcbiAgICAgIHZhciBoYXNGb2N1cyA9IGFjdGl2ZUVsdCgpO1xuICAgICAgb3B0aW9ucy5hdXRvZm9jdXMgPSBoYXNGb2N1cyA9PSB0ZXh0YXJlYSB8fFxuICAgICAgICB0ZXh0YXJlYS5nZXRBdHRyaWJ1dGUoXCJhdXRvZm9jdXNcIikgIT0gbnVsbCAmJiBoYXNGb2N1cyA9PSBkb2N1bWVudC5ib2R5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmUoKSB7dGV4dGFyZWEudmFsdWUgPSBjbS5nZXRWYWx1ZSgpO31cbiAgICBpZiAodGV4dGFyZWEuZm9ybSkge1xuICAgICAgb24odGV4dGFyZWEuZm9ybSwgXCJzdWJtaXRcIiwgc2F2ZSk7XG4gICAgICAvLyBEZXBsb3JhYmxlIGhhY2sgdG8gbWFrZSB0aGUgc3VibWl0IG1ldGhvZCBkbyB0aGUgcmlnaHQgdGhpbmcuXG4gICAgICBpZiAoIW9wdGlvbnMubGVhdmVTdWJtaXRNZXRob2RBbG9uZSkge1xuICAgICAgICB2YXIgZm9ybSA9IHRleHRhcmVhLmZvcm0sIHJlYWxTdWJtaXQgPSBmb3JtLnN1Ym1pdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgd3JhcHBlZFN1Ym1pdCA9IGZvcm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzYXZlKCk7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHJlYWxTdWJtaXQ7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgZm9ybS5zdWJtaXQgPSB3cmFwcGVkU3VibWl0O1xuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvcHRpb25zLmZpbmlzaEluaXQgPSBmdW5jdGlvbihjbSkge1xuICAgICAgY20uc2F2ZSA9IHNhdmU7XG4gICAgICBjbS5nZXRUZXh0QXJlYSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGV4dGFyZWE7IH07XG4gICAgICBjbS50b1RleHRBcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNtLnRvVGV4dEFyZWEgPSBpc05hTjsgLy8gUHJldmVudCB0aGlzIGZyb20gYmVpbmcgcmFuIHR3aWNlXG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgdGV4dGFyZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbS5nZXRXcmFwcGVyRWxlbWVudCgpKTtcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XG4gICAgICAgICAgb2ZmKHRleHRhcmVhLmZvcm0sIFwic3VibWl0XCIsIHNhdmUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPSByZWFsU3VibWl0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB0ZXh0YXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdmFyIGNtID0gQ29kZU1pcnJvcihmdW5jdGlvbihub2RlKSB7XG4gICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0ZXh0YXJlYS5uZXh0U2libGluZyk7XG4gICAgfSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNtO1xuICB9O1xuXG4gIC8vIFNUUklORyBTVFJFQU1cblxuICAvLyBGZWQgdG8gdGhlIG1vZGUgcGFyc2VycywgcHJvdmlkZXMgaGVscGVyIGZ1bmN0aW9ucyB0byBtYWtlXG4gIC8vIHBhcnNlcnMgbW9yZSBzdWNjaW5jdC5cblxuICB2YXIgU3RyaW5nU3RyZWFtID0gQ29kZU1pcnJvci5TdHJpbmdTdHJlYW0gPSBmdW5jdGlvbihzdHJpbmcsIHRhYlNpemUpIHtcbiAgICB0aGlzLnBvcyA9IHRoaXMuc3RhcnQgPSAwO1xuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICAgIHRoaXMudGFiU2l6ZSA9IHRhYlNpemUgfHwgODtcbiAgICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IDA7XG4gICAgdGhpcy5saW5lU3RhcnQgPSAwO1xuICB9O1xuXG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUgPSB7XG4gICAgZW9sOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5wb3MgPj0gdGhpcy5zdHJpbmcubGVuZ3RoO30sXG4gICAgc29sOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5wb3MgPT0gdGhpcy5saW5lU3RhcnQ7fSxcbiAgICBwZWVrOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSB8fCB1bmRlZmluZWQ7fSxcbiAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcysrKTtcbiAgICB9LFxuICAgIGVhdDogZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcyk7XG4gICAgICBpZiAodHlwZW9mIG1hdGNoID09IFwic3RyaW5nXCIpIHZhciBvayA9IGNoID09IG1hdGNoO1xuICAgICAgZWxzZSB2YXIgb2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNoLnRlc3QoY2gpIDogbWF0Y2goY2gpKTtcbiAgICAgIGlmIChvaykgeysrdGhpcy5wb3M7IHJldHVybiBjaDt9XG4gICAgfSxcbiAgICBlYXRXaGlsZTogZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMucG9zO1xuICAgICAgd2hpbGUgKHRoaXMuZWF0KG1hdGNoKSl7fVxuICAgICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnQ7XG4gICAgfSxcbiAgICBlYXRTcGFjZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgIHdoaWxlICgvW1xcc1xcdTAwYTBdLy50ZXN0KHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykpKSArK3RoaXMucG9zO1xuICAgICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnQ7XG4gICAgfSxcbiAgICBza2lwVG9FbmQ6IGZ1bmN0aW9uKCkge3RoaXMucG9zID0gdGhpcy5zdHJpbmcubGVuZ3RoO30sXG4gICAgc2tpcFRvOiBmdW5jdGlvbihjaCkge1xuICAgICAgdmFyIGZvdW5kID0gdGhpcy5zdHJpbmcuaW5kZXhPZihjaCwgdGhpcy5wb3MpO1xuICAgICAgaWYgKGZvdW5kID4gLTEpIHt0aGlzLnBvcyA9IGZvdW5kOyByZXR1cm4gdHJ1ZTt9XG4gICAgfSxcbiAgICBiYWNrVXA6IGZ1bmN0aW9uKG4pIHt0aGlzLnBvcyAtPSBuO30sXG4gICAgY29sdW1uOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmxhc3RDb2x1bW5Qb3MgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMudGFiU2l6ZSwgdGhpcy5sYXN0Q29sdW1uUG9zLCB0aGlzLmxhc3RDb2x1bW5WYWx1ZSk7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblBvcyA9IHRoaXMuc3RhcnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWUgLSAodGhpcy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5saW5lU3RhcnQsIHRoaXMudGFiU2l6ZSkgOiAwKTtcbiAgICB9LFxuICAgIGluZGVudGF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBjb3VudENvbHVtbih0aGlzLnN0cmluZywgbnVsbCwgdGhpcy50YWJTaXplKSAtXG4gICAgICAgICh0aGlzLmxpbmVTdGFydCA/IGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCB0aGlzLmxpbmVTdGFydCwgdGhpcy50YWJTaXplKSA6IDApO1xuICAgIH0sXG4gICAgbWF0Y2g6IGZ1bmN0aW9uKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkge1xuICAgICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIGNhc2VkID0gZnVuY3Rpb24oc3RyKSB7cmV0dXJuIGNhc2VJbnNlbnNpdGl2ZSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogc3RyO307XG4gICAgICAgIHZhciBzdWJzdHIgPSB0aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsIHBhdHRlcm4ubGVuZ3RoKTtcbiAgICAgICAgaWYgKGNhc2VkKHN1YnN0cikgPT0gY2FzZWQocGF0dGVybikpIHtcbiAgICAgICAgICBpZiAoY29uc3VtZSAhPT0gZmFsc2UpIHRoaXMucG9zICs9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnBvcykubWF0Y2gocGF0dGVybik7XG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5pbmRleCA+IDApIHJldHVybiBudWxsO1xuICAgICAgICBpZiAobWF0Y2ggJiYgY29uc3VtZSAhPT0gZmFsc2UpIHRoaXMucG9zICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3VycmVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5wb3MpO30sXG4gICAgaGlkZUZpcnN0Q2hhcnM6IGZ1bmN0aW9uKG4sIGlubmVyKSB7XG4gICAgICB0aGlzLmxpbmVTdGFydCArPSBuO1xuICAgICAgdHJ5IHsgcmV0dXJuIGlubmVyKCk7IH1cbiAgICAgIGZpbmFsbHkgeyB0aGlzLmxpbmVTdGFydCAtPSBuOyB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFRFWFRNQVJLRVJTXG5cbiAgLy8gQ3JlYXRlZCB3aXRoIG1hcmtUZXh0IGFuZCBzZXRCb29rbWFyayBtZXRob2RzLiBBIFRleHRNYXJrZXIgaXMgYVxuICAvLyBoYW5kbGUgdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhciBvciBmaW5kIGEgbWFya2VkIHBvc2l0aW9uIGluIHRoZVxuICAvLyBkb2N1bWVudC4gTGluZSBvYmplY3RzIGhvbGQgYXJyYXlzIChtYXJrZWRTcGFucykgY29udGFpbmluZ1xuICAvLyB7ZnJvbSwgdG8sIG1hcmtlcn0gb2JqZWN0IHBvaW50aW5nIHRvIHN1Y2ggbWFya2VyIG9iamVjdHMsIGFuZFxuICAvLyBpbmRpY2F0aW5nIHRoYXQgc3VjaCBhIG1hcmtlciBpcyBwcmVzZW50IG9uIHRoYXQgbGluZS4gTXVsdGlwbGVcbiAgLy8gbGluZXMgbWF5IHBvaW50IHRvIHRoZSBzYW1lIG1hcmtlciB3aGVuIGl0IHNwYW5zIGFjcm9zcyBsaW5lcy5cbiAgLy8gVGhlIHNwYW5zIHdpbGwgaGF2ZSBudWxsIGZvciB0aGVpciBmcm9tL3RvIHByb3BlcnRpZXMgd2hlbiB0aGVcbiAgLy8gbWFya2VyIGNvbnRpbnVlcyBiZXlvbmQgdGhlIHN0YXJ0L2VuZCBvZiB0aGUgbGluZS4gTWFya2VycyBoYXZlXG4gIC8vIGxpbmtzIGJhY2sgdG8gdGhlIGxpbmVzIHRoZXkgY3VycmVudGx5IHRvdWNoLlxuXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xuXG4gIHZhciBUZXh0TWFya2VyID0gQ29kZU1pcnJvci5UZXh0TWFya2VyID0gZnVuY3Rpb24oZG9jLCB0eXBlKSB7XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgdGhpcy5pZCA9ICsrbmV4dE1hcmtlcklkO1xuICB9O1xuICBldmVudE1peGluKFRleHRNYXJrZXIpO1xuXG4gIC8vIENsZWFyIHRoZSBtYXJrZXIuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZXhwbGljaXRseUNsZWFyZWQpIHJldHVybjtcbiAgICB2YXIgY20gPSB0aGlzLmRvYy5jbSwgd2l0aE9wID0gY20gJiYgIWNtLmN1ck9wO1xuICAgIGlmICh3aXRoT3ApIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICBpZiAoaGFzSGFuZGxlcih0aGlzLCBcImNsZWFyXCIpKSB7XG4gICAgICB2YXIgZm91bmQgPSB0aGlzLmZpbmQoKTtcbiAgICAgIGlmIChmb3VuZCkgc2lnbmFsTGF0ZXIodGhpcywgXCJjbGVhclwiLCBmb3VuZC5mcm9tLCBmb3VuZC50byk7XG4gICAgfVxuICAgIHZhciBtaW4gPSBudWxsLCBtYXggPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKGNtICYmICF0aGlzLmNvbGxhcHNlZCkgcmVnTGluZUNoYW5nZShjbSwgbGluZU5vKGxpbmUpLCBcInRleHRcIik7XG4gICAgICBlbHNlIGlmIChjbSkge1xuICAgICAgICBpZiAoc3Bhbi50byAhPSBudWxsKSBtYXggPSBsaW5lTm8obGluZSk7XG4gICAgICAgIGlmIChzcGFuLmZyb20gIT0gbnVsbCkgbWluID0gbGluZU5vKGxpbmUpO1xuICAgICAgfVxuICAgICAgbGluZS5tYXJrZWRTcGFucyA9IHJlbW92ZU1hcmtlZFNwYW4obGluZS5tYXJrZWRTcGFucywgc3Bhbik7XG4gICAgICBpZiAoc3Bhbi5mcm9tID09IG51bGwgJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWxpbmVJc0hpZGRlbih0aGlzLmRvYywgbGluZSkgJiYgY20pXG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgdGV4dEhlaWdodChjbS5kaXNwbGF5KSk7XG4gICAgfVxuICAgIGlmIChjbSAmJiB0aGlzLmNvbGxhcHNlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUodGhpcy5saW5lc1tpXSksIGxlbiA9IGxpbmVMZW5ndGgodmlzdWFsKTtcbiAgICAgIGlmIChsZW4gPiBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGgpIHtcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lID0gdmlzdWFsO1xuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtaW4gIT0gbnVsbCAmJiBjbSAmJiB0aGlzLmNvbGxhcHNlZCkgcmVnQ2hhbmdlKGNtLCBtaW4sIG1heCArIDEpO1xuICAgIHRoaXMubGluZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLmV4cGxpY2l0bHlDbGVhcmVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5hdG9taWMgJiYgdGhpcy5kb2MuY2FudEVkaXQpIHtcbiAgICAgIHRoaXMuZG9jLmNhbnRFZGl0ID0gZmFsc2U7XG4gICAgICBpZiAoY20pIHJlQ2hlY2tTZWxlY3Rpb24oY20uZG9jKTtcbiAgICB9XG4gICAgaWYgKGNtKSBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJDbGVhcmVkXCIsIGNtLCB0aGlzKTtcbiAgICBpZiAod2l0aE9wKSBlbmRPcGVyYXRpb24oY20pO1xuICAgIGlmICh0aGlzLnBhcmVudCkgdGhpcy5wYXJlbnQuY2xlYXIoKTtcbiAgfTtcblxuICAvLyBGaW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgbWFya2VyIGluIHRoZSBkb2N1bWVudC4gUmV0dXJucyBhIHtmcm9tLFxuICAvLyB0b30gb2JqZWN0IGJ5IGRlZmF1bHQuIFNpZGUgY2FuIGJlIHBhc3NlZCB0byBnZXQgYSBzcGVjaWZpYyBzaWRlXG4gIC8vIC0tIDAgKGJvdGgpLCAtMSAobGVmdCksIG9yIDEgKHJpZ2h0KS4gV2hlbiBsaW5lT2JqIGlzIHRydWUsIHRoZVxuICAvLyBQb3Mgb2JqZWN0cyByZXR1cm5lZCBjb250YWluIGEgbGluZSBvYmplY3QsIHJhdGhlciB0aGFuIGEgbGluZVxuICAvLyBudW1iZXIgKHVzZWQgdG8gcHJldmVudCBsb29raW5nIHVwIHRoZSBzYW1lIGxpbmUgdHdpY2UpLlxuICBUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oc2lkZSwgbGluZU9iaikge1xuICAgIGlmIChzaWRlID09IG51bGwgJiYgdGhpcy50eXBlID09IFwiYm9va21hcmtcIikgc2lkZSA9IDE7XG4gICAgdmFyIGZyb20sIHRvO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7XG4gICAgICAgIGZyb20gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4uZnJvbSk7XG4gICAgICAgIGlmIChzaWRlID09IC0xKSByZXR1cm4gZnJvbTtcbiAgICAgIH1cbiAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIHtcbiAgICAgICAgdG8gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4udG8pO1xuICAgICAgICBpZiAoc2lkZSA9PSAxKSByZXR1cm4gdG87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcm9tICYmIHtmcm9tOiBmcm9tLCB0bzogdG99O1xuICB9O1xuXG4gIC8vIFNpZ25hbHMgdGhhdCB0aGUgbWFya2VyJ3Mgd2lkZ2V0IGNoYW5nZWQsIGFuZCBzdXJyb3VuZGluZyBsYXlvdXRcbiAgLy8gc2hvdWxkIGJlIHJlY29tcHV0ZWQuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5maW5kKC0xLCB0cnVlKSwgd2lkZ2V0ID0gdGhpcywgY20gPSB0aGlzLmRvYy5jbTtcbiAgICBpZiAoIXBvcyB8fCAhY20pIHJldHVybjtcbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsaW5lID0gcG9zLmxpbmUsIGxpbmVOID0gbGluZU5vKHBvcy5saW5lKTtcbiAgICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTik7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlRm9yKHZpZXcpO1xuICAgICAgICBjbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7XG4gICAgICBpZiAoIWxpbmVJc0hpZGRlbih3aWRnZXQuZG9jLCBsaW5lKSAmJiB3aWRnZXQuaGVpZ2h0ICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG9sZEhlaWdodCA9IHdpZGdldC5oZWlnaHQ7XG4gICAgICAgIHdpZGdldC5oZWlnaHQgPSBudWxsO1xuICAgICAgICB2YXIgZEhlaWdodCA9IHdpZGdldEhlaWdodCh3aWRnZXQpIC0gb2xkSGVpZ2h0O1xuICAgICAgICBpZiAoZEhlaWdodClcbiAgICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZEhlaWdodCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuYXR0YWNoTGluZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICBpZiAoIXRoaXMubGluZXMubGVuZ3RoICYmIHRoaXMuZG9jLmNtKSB7XG4gICAgICB2YXIgb3AgPSB0aGlzLmRvYy5jbS5jdXJPcDtcbiAgICAgIGlmICghb3AubWF5YmVIaWRkZW5NYXJrZXJzIHx8IGluZGV4T2Yob3AubWF5YmVIaWRkZW5NYXJrZXJzLCB0aGlzKSA9PSAtMSlcbiAgICAgICAgKG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzIHx8IChvcC5tYXliZVVuaGlkZGVuTWFya2VycyA9IFtdKSkucHVzaCh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xuICB9O1xuICBUZXh0TWFya2VyLnByb3RvdHlwZS5kZXRhY2hMaW5lID0gZnVuY3Rpb24obGluZSkge1xuICAgIHRoaXMubGluZXMuc3BsaWNlKGluZGV4T2YodGhpcy5saW5lcywgbGluZSksIDEpO1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wO1xuICAgICAgKG9wLm1heWJlSGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVIaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBDb2xsYXBzZWQgbWFya2VycyBoYXZlIHVuaXF1ZSBpZHMsIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gb3JkZXJcbiAgLy8gdGhlbSwgd2hpY2ggaXMgbmVlZGVkIGZvciB1bmlxdWVseSBkZXRlcm1pbmluZyBhbiBvdXRlciBtYXJrZXJcbiAgLy8gd2hlbiB0aGV5IG92ZXJsYXAgKHRoZXkgbWF5IG5lc3QsIGJ1dCBub3QgcGFydGlhbGx5IG92ZXJsYXApLlxuICB2YXIgbmV4dE1hcmtlcklkID0gMDtcblxuICAvLyBDcmVhdGUgYSBtYXJrZXIsIHdpcmUgaXQgdXAgdG8gdGhlIHJpZ2h0IGxpbmVzLCBhbmRcbiAgZnVuY3Rpb24gbWFya1RleHQoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSkge1xuICAgIC8vIFNoYXJlZCBtYXJrZXJzIChhY3Jvc3MgbGlua2VkIGRvY3VtZW50cykgYXJlIGhhbmRsZWQgc2VwYXJhdGVseVxuICAgIC8vIChtYXJrVGV4dFNoYXJlZCB3aWxsIGNhbGwgb3V0IHRvIHRoaXMgYWdhaW4sIG9uY2UgcGVyXG4gICAgLy8gZG9jdW1lbnQpLlxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkKSByZXR1cm4gbWFya1RleHRTaGFyZWQoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSk7XG4gICAgLy8gRW5zdXJlIHdlIGFyZSBpbiBhbiBvcGVyYXRpb24uXG4gICAgaWYgKGRvYy5jbSAmJiAhZG9jLmNtLmN1ck9wKSByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFya1RleHQpKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBUZXh0TWFya2VyKGRvYywgdHlwZSksIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xuICAgIGlmIChvcHRpb25zKSBjb3B5T2JqKG9wdGlvbnMsIG1hcmtlciwgZmFsc2UpO1xuICAgIC8vIERvbid0IGNvbm5lY3QgZW1wdHkgbWFya2VycyB1bmxlc3MgY2xlYXJXaGVuRW1wdHkgaXMgZmFsc2VcbiAgICBpZiAoZGlmZiA+IDAgfHwgZGlmZiA9PSAwICYmIG1hcmtlci5jbGVhcldoZW5FbXB0eSAhPT0gZmFsc2UpXG4gICAgICByZXR1cm4gbWFya2VyO1xuICAgIGlmIChtYXJrZXIucmVwbGFjZWRXaXRoKSB7XG4gICAgICAvLyBTaG93aW5nIHVwIGFzIGEgd2lkZ2V0IGltcGxpZXMgY29sbGFwc2VkICh3aWRnZXQgcmVwbGFjZXMgdGV4dClcbiAgICAgIG1hcmtlci5jb2xsYXBzZWQgPSB0cnVlO1xuICAgICAgbWFya2VyLndpZGdldE5vZGUgPSBlbHQoXCJzcGFuXCIsIFttYXJrZXIucmVwbGFjZWRXaXRoXSwgXCJDb2RlTWlycm9yLXdpZGdldFwiKTtcbiAgICAgIGlmICghb3B0aW9ucy5oYW5kbGVNb3VzZUV2ZW50cykgbWFya2VyLndpZGdldE5vZGUuc2V0QXR0cmlidXRlKFwiY20taWdub3JlLWV2ZW50c1wiLCBcInRydWVcIik7XG4gICAgICBpZiAob3B0aW9ucy5pbnNlcnRMZWZ0KSBtYXJrZXIud2lkZ2V0Tm9kZS5pbnNlcnRMZWZ0ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpIHtcbiAgICAgIGlmIChjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgZnJvbS5saW5lLCBmcm9tLCB0bywgbWFya2VyKSB8fFxuICAgICAgICAgIGZyb20ubGluZSAhPSB0by5saW5lICYmIGNvbmZsaWN0aW5nQ29sbGFwc2VkUmFuZ2UoZG9jLCB0by5saW5lLCBmcm9tLCB0bywgbWFya2VyKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5zZXJ0aW5nIGNvbGxhcHNlZCBtYXJrZXIgcGFydGlhbGx5IG92ZXJsYXBwaW5nIGFuIGV4aXN0aW5nIG9uZVwiKTtcbiAgICAgIHNhd0NvbGxhcHNlZFNwYW5zID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAobWFya2VyLmFkZFRvSGlzdG9yeSlcbiAgICAgIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIG9yaWdpbjogXCJtYXJrVGV4dFwifSwgZG9jLnNlbCwgTmFOKTtcblxuICAgIHZhciBjdXJMaW5lID0gZnJvbS5saW5lLCBjbSA9IGRvYy5jbSwgdXBkYXRlTWF4TGluZTtcbiAgICBkb2MuaXRlcihjdXJMaW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGNtICYmIG1hcmtlci5jb2xsYXBzZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nICYmIHZpc3VhbExpbmUobGluZSkgPT0gY20uZGlzcGxheS5tYXhMaW5lKVxuICAgICAgICB1cGRhdGVNYXhMaW5lID0gdHJ1ZTtcbiAgICAgIGlmIChtYXJrZXIuY29sbGFwc2VkICYmIGN1ckxpbmUgIT0gZnJvbS5saW5lKSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIDApO1xuICAgICAgYWRkTWFya2VkU3BhbihsaW5lLCBuZXcgTWFya2VkU3BhbihtYXJrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gZnJvbS5saW5lID8gZnJvbS5jaCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gdG8ubGluZSA/IHRvLmNoIDogbnVsbCkpO1xuICAgICAgKytjdXJMaW5lO1xuICAgIH0pO1xuICAgIC8vIGxpbmVJc0hpZGRlbiBkZXBlbmRzIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgc3BhbnMsIHNvIG5lZWRzIGEgc2Vjb25kIHBhc3NcbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkgZG9jLml0ZXIoZnJvbS5saW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIDApO1xuICAgIH0pO1xuXG4gICAgaWYgKG1hcmtlci5jbGVhck9uRW50ZXIpIG9uKG1hcmtlciwgXCJiZWZvcmVDdXJzb3JFbnRlclwiLCBmdW5jdGlvbigpIHsgbWFya2VyLmNsZWFyKCk7IH0pO1xuXG4gICAgaWYgKG1hcmtlci5yZWFkT25seSkge1xuICAgICAgc2F3UmVhZE9ubHlTcGFucyA9IHRydWU7XG4gICAgICBpZiAoZG9jLmhpc3RvcnkuZG9uZS5sZW5ndGggfHwgZG9jLmhpc3RvcnkudW5kb25lLmxlbmd0aClcbiAgICAgICAgZG9jLmNsZWFySGlzdG9yeSgpO1xuICAgIH1cbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkge1xuICAgICAgbWFya2VyLmlkID0gKytuZXh0TWFya2VySWQ7XG4gICAgICBtYXJrZXIuYXRvbWljID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNtKSB7XG4gICAgICAvLyBTeW5jIGVkaXRvciBzdGF0ZVxuICAgICAgaWYgKHVwZGF0ZU1heExpbmUpIGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpXG4gICAgICAgIHJlZ0NoYW5nZShjbSwgZnJvbS5saW5lLCB0by5saW5lICsgMSk7XG4gICAgICBlbHNlIGlmIChtYXJrZXIuY2xhc3NOYW1lIHx8IG1hcmtlci50aXRsZSB8fCBtYXJrZXIuc3RhcnRTdHlsZSB8fCBtYXJrZXIuZW5kU3R5bGUgfHwgbWFya2VyLmNzcylcbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8PSB0by5saW5lOyBpKyspIHJlZ0xpbmVDaGFuZ2UoY20sIGksIFwidGV4dFwiKTtcbiAgICAgIGlmIChtYXJrZXIuYXRvbWljKSByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7XG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJBZGRlZFwiLCBjbSwgbWFya2VyKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxuXG4gIC8vIFNIQVJFRCBURVhUTUFSS0VSU1xuXG4gIC8vIEEgc2hhcmVkIG1hcmtlciBzcGFucyBtdWx0aXBsZSBsaW5rZWQgZG9jdW1lbnRzLiBJdCBpc1xuICAvLyBpbXBsZW1lbnRlZCBhcyBhIG1ldGEtbWFya2VyLW9iamVjdCBjb250cm9sbGluZyBtdWx0aXBsZSBub3JtYWxcbiAgLy8gbWFya2Vycy5cbiAgdmFyIFNoYXJlZFRleHRNYXJrZXIgPSBDb2RlTWlycm9yLlNoYXJlZFRleHRNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXJzLCBwcmltYXJ5KSB7XG4gICAgdGhpcy5tYXJrZXJzID0gbWFya2VycztcbiAgICB0aGlzLnByaW1hcnkgPSBwcmltYXJ5O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vycy5sZW5ndGg7ICsraSlcbiAgICAgIG1hcmtlcnNbaV0ucGFyZW50ID0gdGhpcztcbiAgfTtcbiAgZXZlbnRNaXhpbihTaGFyZWRUZXh0TWFya2VyKTtcblxuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSByZXR1cm47XG4gICAgdGhpcy5leHBsaWNpdGx5Q2xlYXJlZCA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyArK2kpXG4gICAgICB0aGlzLm1hcmtlcnNbaV0uY2xlYXIoKTtcbiAgICBzaWduYWxMYXRlcih0aGlzLCBcImNsZWFyXCIpO1xuICB9O1xuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oc2lkZSwgbGluZU9iaikge1xuICAgIHJldHVybiB0aGlzLnByaW1hcnkuZmluZChzaWRlLCBsaW5lT2JqKTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XG4gICAgb3B0aW9ucyA9IGNvcHlPYmoob3B0aW9ucyk7XG4gICAgb3B0aW9ucy5zaGFyZWQgPSBmYWxzZTtcbiAgICB2YXIgbWFya2VycyA9IFttYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKV0sIHByaW1hcnkgPSBtYXJrZXJzWzBdO1xuICAgIHZhciB3aWRnZXQgPSBvcHRpb25zLndpZGdldE5vZGU7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uKGRvYykge1xuICAgICAgaWYgKHdpZGdldCkgb3B0aW9ucy53aWRnZXROb2RlID0gd2lkZ2V0LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIG1hcmtlcnMucHVzaChtYXJrVGV4dChkb2MsIGNsaXBQb3MoZG9jLCBmcm9tKSwgY2xpcFBvcyhkb2MsIHRvKSwgb3B0aW9ucywgdHlwZSkpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2MubGlua2VkLmxlbmd0aDsgKytpKVxuICAgICAgICBpZiAoZG9jLmxpbmtlZFtpXS5pc1BhcmVudCkgcmV0dXJuO1xuICAgICAgcHJpbWFyeSA9IGxzdChtYXJrZXJzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFNoYXJlZFRleHRNYXJrZXIobWFya2VycywgcHJpbWFyeSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kU2hhcmVkTWFya2Vycyhkb2MpIHtcbiAgICByZXR1cm4gZG9jLmZpbmRNYXJrcyhQb3MoZG9jLmZpcnN0LCAwKSwgZG9jLmNsaXBQb3MoUG9zKGRvYy5sYXN0TGluZSgpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24obSkgeyByZXR1cm4gbS5wYXJlbnQ7IH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY29weVNoYXJlZE1hcmtlcnMoZG9jLCBtYXJrZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgcG9zID0gbWFya2VyLmZpbmQoKTtcbiAgICAgIHZhciBtRnJvbSA9IGRvYy5jbGlwUG9zKHBvcy5mcm9tKSwgbVRvID0gZG9jLmNsaXBQb3MocG9zLnRvKTtcbiAgICAgIGlmIChjbXAobUZyb20sIG1UbykpIHtcbiAgICAgICAgdmFyIHN1Yk1hcmsgPSBtYXJrVGV4dChkb2MsIG1Gcm9tLCBtVG8sIG1hcmtlci5wcmltYXJ5LCBtYXJrZXIucHJpbWFyeS50eXBlKTtcbiAgICAgICAgbWFya2VyLm1hcmtlcnMucHVzaChzdWJNYXJrKTtcbiAgICAgICAgc3ViTWFyay5wYXJlbnQgPSBtYXJrZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGV0YWNoU2hhcmVkTWFya2VycyhtYXJrZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgbGlua2VkID0gW21hcmtlci5wcmltYXJ5LmRvY107O1xuICAgICAgbGlua2VkRG9jcyhtYXJrZXIucHJpbWFyeS5kb2MsIGZ1bmN0aW9uKGQpIHsgbGlua2VkLnB1c2goZCk7IH0pO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXJrZXIubWFya2Vycy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgc3ViTWFya2VyID0gbWFya2VyLm1hcmtlcnNbal07XG4gICAgICAgIGlmIChpbmRleE9mKGxpbmtlZCwgc3ViTWFya2VyLmRvYykgPT0gLTEpIHtcbiAgICAgICAgICBzdWJNYXJrZXIucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICBtYXJrZXIubWFya2Vycy5zcGxpY2Uoai0tLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRFWFRNQVJLRVIgU1BBTlNcblxuICBmdW5jdGlvbiBNYXJrZWRTcGFuKG1hcmtlciwgZnJvbSwgdG8pIHtcbiAgICB0aGlzLm1hcmtlciA9IG1hcmtlcjtcbiAgICB0aGlzLmZyb20gPSBmcm9tOyB0aGlzLnRvID0gdG87XG4gIH1cblxuICAvLyBTZWFyY2ggYW4gYXJyYXkgb2Ygc3BhbnMgZm9yIGEgc3BhbiBtYXRjaGluZyB0aGUgZ2l2ZW4gbWFya2VyLlxuICBmdW5jdGlvbiBnZXRNYXJrZWRTcGFuRm9yKHNwYW5zLCBtYXJrZXIpIHtcbiAgICBpZiAoc3BhbnMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICBpZiAoc3Bhbi5tYXJrZXIgPT0gbWFya2VyKSByZXR1cm4gc3BhbjtcbiAgICB9XG4gIH1cbiAgLy8gUmVtb3ZlIGEgc3BhbiBmcm9tIGFuIGFycmF5LCByZXR1cm5pbmcgdW5kZWZpbmVkIGlmIG5vIHNwYW5zIGFyZVxuICAvLyBsZWZ0ICh3ZSBkb24ndCBzdG9yZSBhcnJheXMgZm9yIGxpbmVzIHdpdGhvdXQgc3BhbnMpLlxuICBmdW5jdGlvbiByZW1vdmVNYXJrZWRTcGFuKHNwYW5zLCBzcGFuKSB7XG4gICAgZm9yICh2YXIgciwgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIGlmIChzcGFuc1tpXSAhPSBzcGFuKSAociB8fCAociA9IFtdKSkucHVzaChzcGFuc1tpXSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgLy8gQWRkIGEgc3BhbiB0byBhIGxpbmUuXG4gIGZ1bmN0aW9uIGFkZE1hcmtlZFNwYW4obGluZSwgc3Bhbikge1xuICAgIGxpbmUubWFya2VkU3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zID8gbGluZS5tYXJrZWRTcGFucy5jb25jYXQoW3NwYW5dKSA6IFtzcGFuXTtcbiAgICBzcGFuLm1hcmtlci5hdHRhY2hMaW5lKGxpbmUpO1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgdGhlIGFsZ29yaXRobSB0aGF0IGFkanVzdHMgbWFya2VycyBmb3IgYSBjaGFuZ2UgaW4gdGhlXG4gIC8vIGRvY3VtZW50LiBUaGVzZSBmdW5jdGlvbnMgY3V0IGFuIGFycmF5IG9mIHNwYW5zIGF0IGEgZ2l2ZW5cbiAgLy8gY2hhcmFjdGVyIHBvc2l0aW9uLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgcmVtYWluaW5nIGNodW5rcyAob3JcbiAgLy8gdW5kZWZpbmVkIGlmIG5vdGhpbmcgcmVtYWlucykuXG4gIGZ1bmN0aW9uIG1hcmtlZFNwYW5zQmVmb3JlKG9sZCwgc3RhcnRDaCwgaXNJbnNlcnQpIHtcbiAgICBpZiAob2xkKSBmb3IgKHZhciBpID0gMCwgbnc7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gb2xkW2ldLCBtYXJrZXIgPSBzcGFuLm1hcmtlcjtcbiAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gc3RhcnRDaCA6IHNwYW4uZnJvbSA8IHN0YXJ0Q2gpO1xuICAgICAgaWYgKHN0YXJ0c0JlZm9yZSB8fCBzcGFuLmZyb20gPT0gc3RhcnRDaCAmJiBtYXJrZXIudHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgKCFpc0luc2VydCB8fCAhc3Bhbi5tYXJrZXIuaW5zZXJ0TGVmdCkpIHtcbiAgICAgICAgdmFyIGVuZHNBZnRlciA9IHNwYW4udG8gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8gc3Bhbi50byA+PSBzdGFydENoIDogc3Bhbi50byA+IHN0YXJ0Q2gpO1xuICAgICAgICAobncgfHwgKG53ID0gW10pKS5wdXNoKG5ldyBNYXJrZWRTcGFuKG1hcmtlciwgc3Bhbi5mcm9tLCBlbmRzQWZ0ZXIgPyBudWxsIDogc3Bhbi50bykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnc7XG4gIH1cbiAgZnVuY3Rpb24gbWFya2VkU3BhbnNBZnRlcihvbGQsIGVuZENoLCBpc0luc2VydCkge1xuICAgIGlmIChvbGQpIGZvciAodmFyIGkgPSAwLCBudzsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBvbGRbaV0sIG1hcmtlciA9IHNwYW4ubWFya2VyO1xuICAgICAgdmFyIGVuZHNBZnRlciA9IHNwYW4udG8gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8gc3Bhbi50byA+PSBlbmRDaCA6IHNwYW4udG8gPiBlbmRDaCk7XG4gICAgICBpZiAoZW5kc0FmdGVyIHx8IHNwYW4uZnJvbSA9PSBlbmRDaCAmJiBtYXJrZXIudHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgKCFpc0luc2VydCB8fCBzcGFuLm1hcmtlci5pbnNlcnRMZWZ0KSkge1xuICAgICAgICB2YXIgc3RhcnRzQmVmb3JlID0gc3Bhbi5mcm9tID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gc3Bhbi5mcm9tIDw9IGVuZENoIDogc3Bhbi5mcm9tIDwgZW5kQ2gpO1xuICAgICAgICAobncgfHwgKG53ID0gW10pKS5wdXNoKG5ldyBNYXJrZWRTcGFuKG1hcmtlciwgc3RhcnRzQmVmb3JlID8gbnVsbCA6IHNwYW4uZnJvbSAtIGVuZENoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4udG8gPT0gbnVsbCA/IG51bGwgOiBzcGFuLnRvIC0gZW5kQ2gpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG53O1xuICB9XG5cbiAgLy8gR2l2ZW4gYSBjaGFuZ2Ugb2JqZWN0LCBjb21wdXRlIHRoZSBuZXcgc2V0IG9mIG1hcmtlciBzcGFucyB0aGF0XG4gIC8vIGNvdmVyIHRoZSBsaW5lIGluIHdoaWNoIHRoZSBjaGFuZ2UgdG9vayBwbGFjZS4gUmVtb3ZlcyBzcGFuc1xuICAvLyBlbnRpcmVseSB3aXRoaW4gdGhlIGNoYW5nZSwgcmVjb25uZWN0cyBzcGFucyBiZWxvbmdpbmcgdG8gdGhlXG4gIC8vIHNhbWUgbWFya2VyIHRoYXQgYXBwZWFyIG9uIGJvdGggc2lkZXMgb2YgdGhlIGNoYW5nZSwgYW5kIGN1dHMgb2ZmXG4gIC8vIHNwYW5zIHBhcnRpYWxseSB3aXRoaW4gdGhlIGNoYW5nZS4gUmV0dXJucyBhbiBhcnJheSBvZiBzcGFuXG4gIC8vIGFycmF5cyB3aXRoIG9uZSBlbGVtZW50IGZvciBlYWNoIGxpbmUgaW4gKGFmdGVyKSB0aGUgY2hhbmdlLlxuICBmdW5jdGlvbiBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS5mdWxsKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgb2xkRmlyc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLmZyb20ubGluZSkubWFya2VkU3BhbnM7XG4gICAgdmFyIG9sZExhc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2UudG8ubGluZSkgJiYgZ2V0TGluZShkb2MsIGNoYW5nZS50by5saW5lKS5tYXJrZWRTcGFucztcbiAgICBpZiAoIW9sZEZpcnN0ICYmICFvbGRMYXN0KSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBzdGFydENoID0gY2hhbmdlLmZyb20uY2gsIGVuZENoID0gY2hhbmdlLnRvLmNoLCBpc0luc2VydCA9IGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwO1xuICAgIC8vIEdldCB0aGUgc3BhbnMgdGhhdCAnc3RpY2sgb3V0JyBvbiBib3RoIHNpZGVzXG4gICAgdmFyIGZpcnN0ID0gbWFya2VkU3BhbnNCZWZvcmUob2xkRmlyc3QsIHN0YXJ0Q2gsIGlzSW5zZXJ0KTtcbiAgICB2YXIgbGFzdCA9IG1hcmtlZFNwYW5zQWZ0ZXIob2xkTGFzdCwgZW5kQ2gsIGlzSW5zZXJ0KTtcblxuICAgIC8vIE5leHQsIG1lcmdlIHRob3NlIHR3byBlbmRzXG4gICAgdmFyIHNhbWVMaW5lID0gY2hhbmdlLnRleHQubGVuZ3RoID09IDEsIG9mZnNldCA9IGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKHNhbWVMaW5lID8gc3RhcnRDaCA6IDApO1xuICAgIGlmIChmaXJzdCkge1xuICAgICAgLy8gRml4IHVwIC50byBwcm9wZXJ0aWVzIG9mIGZpcnN0XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gZmlyc3RbaV07XG4gICAgICAgIGlmIChzcGFuLnRvID09IG51bGwpIHtcbiAgICAgICAgICB2YXIgZm91bmQgPSBnZXRNYXJrZWRTcGFuRm9yKGxhc3QsIHNwYW4ubWFya2VyKTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSBzcGFuLnRvID0gc3RhcnRDaDtcbiAgICAgICAgICBlbHNlIGlmIChzYW1lTGluZSkgc3Bhbi50byA9IGZvdW5kLnRvID09IG51bGwgPyBudWxsIDogZm91bmQudG8gKyBvZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxhc3QpIHtcbiAgICAgIC8vIEZpeCB1cCAuZnJvbSBpbiBsYXN0IChvciBtb3ZlIHRoZW0gaW50byBmaXJzdCBpbiBjYXNlIG9mIHNhbWVMaW5lKVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gbGFzdFtpXTtcbiAgICAgICAgaWYgKHNwYW4udG8gIT0gbnVsbCkgc3Bhbi50byArPSBvZmZzZXQ7XG4gICAgICAgIGlmIChzcGFuLmZyb20gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IoZmlyc3QsIHNwYW4ubWFya2VyKTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICBzcGFuLmZyb20gPSBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAoc2FtZUxpbmUpIChmaXJzdCB8fCAoZmlyc3QgPSBbXSkpLnB1c2goc3Bhbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwYW4uZnJvbSArPSBvZmZzZXQ7XG4gICAgICAgICAgaWYgKHNhbWVMaW5lKSAoZmlyc3QgfHwgKGZpcnN0ID0gW10pKS5wdXNoKHNwYW4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBkaWRuJ3QgY3JlYXRlIGFueSB6ZXJvLWxlbmd0aCBzcGFuc1xuICAgIGlmIChmaXJzdCkgZmlyc3QgPSBjbGVhckVtcHR5U3BhbnMoZmlyc3QpO1xuICAgIGlmIChsYXN0ICYmIGxhc3QgIT0gZmlyc3QpIGxhc3QgPSBjbGVhckVtcHR5U3BhbnMobGFzdCk7XG5cbiAgICB2YXIgbmV3TWFya2VycyA9IFtmaXJzdF07XG4gICAgaWYgKCFzYW1lTGluZSkge1xuICAgICAgLy8gRmlsbCBnYXAgd2l0aCB3aG9sZS1saW5lLXNwYW5zXG4gICAgICB2YXIgZ2FwID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gMiwgZ2FwTWFya2VycztcbiAgICAgIGlmIChnYXAgPiAwICYmIGZpcnN0KVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0Lmxlbmd0aDsgKytpKVxuICAgICAgICAgIGlmIChmaXJzdFtpXS50byA9PSBudWxsKVxuICAgICAgICAgICAgKGdhcE1hcmtlcnMgfHwgKGdhcE1hcmtlcnMgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4oZmlyc3RbaV0ubWFya2VyLCBudWxsLCBudWxsKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhcDsgKytpKVxuICAgICAgICBuZXdNYXJrZXJzLnB1c2goZ2FwTWFya2Vycyk7XG4gICAgICBuZXdNYXJrZXJzLnB1c2gobGFzdCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdNYXJrZXJzO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHNwYW5zIHRoYXQgYXJlIGVtcHR5IGFuZCBkb24ndCBoYXZlIGEgY2xlYXJXaGVuRW1wdHlcbiAgLy8gb3B0aW9uIG9mIGZhbHNlLlxuICBmdW5jdGlvbiBjbGVhckVtcHR5U3BhbnMoc3BhbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IHNwYW5zW2ldO1xuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsICYmIHNwYW4uZnJvbSA9PSBzcGFuLnRvICYmIHNwYW4ubWFya2VyLmNsZWFyV2hlbkVtcHR5ICE9PSBmYWxzZSlcbiAgICAgICAgc3BhbnMuc3BsaWNlKGktLSwgMSk7XG4gICAgfVxuICAgIGlmICghc3BhbnMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gc3BhbnM7XG4gIH1cblxuICAvLyBVc2VkIGZvciB1bi9yZS1kb2luZyBjaGFuZ2VzIGZyb20gdGhlIGhpc3RvcnkuIENvbWJpbmVzIHRoZVxuICAvLyByZXN1bHQgb2YgY29tcHV0aW5nIHRoZSBleGlzdGluZyBzcGFucyB3aXRoIHRoZSBzZXQgb2Ygc3BhbnMgdGhhdFxuICAvLyBleGlzdGVkIGluIHRoZSBoaXN0b3J5IChzbyB0aGF0IGRlbGV0aW5nIGFyb3VuZCBhIHNwYW4gYW5kIHRoZW5cbiAgLy8gdW5kb2luZyBicmluZ3MgYmFjayB0aGUgc3BhbikuXG4gIGZ1bmN0aW9uIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgb2xkID0gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpO1xuICAgIHZhciBzdHJldGNoZWQgPSBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKTtcbiAgICBpZiAoIW9sZCkgcmV0dXJuIHN0cmV0Y2hlZDtcbiAgICBpZiAoIXN0cmV0Y2hlZCkgcmV0dXJuIG9sZDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgb2xkQ3VyID0gb2xkW2ldLCBzdHJldGNoQ3VyID0gc3RyZXRjaGVkW2ldO1xuICAgICAgaWYgKG9sZEN1ciAmJiBzdHJldGNoQ3VyKSB7XG4gICAgICAgIHNwYW5zOiBmb3IgKHZhciBqID0gMDsgaiA8IHN0cmV0Y2hDdXIubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgc3BhbiA9IHN0cmV0Y2hDdXJbal07XG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvbGRDdXIubGVuZ3RoOyArK2spXG4gICAgICAgICAgICBpZiAob2xkQ3VyW2tdLm1hcmtlciA9PSBzcGFuLm1hcmtlcikgY29udGludWUgc3BhbnM7XG4gICAgICAgICAgb2xkQ3VyLnB1c2goc3Bhbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RyZXRjaEN1cikge1xuICAgICAgICBvbGRbaV0gPSBzdHJldGNoQ3VyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2xkO1xuICB9XG5cbiAgLy8gVXNlZCB0byAnY2xpcCcgb3V0IHJlYWRPbmx5IHJhbmdlcyB3aGVuIG1ha2luZyBhIGNoYW5nZS5cbiAgZnVuY3Rpb24gcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBmcm9tLCB0bykge1xuICAgIHZhciBtYXJrZXJzID0gbnVsbDtcbiAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAobGluZS5tYXJrZWRTcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBtYXJrID0gbGluZS5tYXJrZWRTcGFuc1tpXS5tYXJrZXI7XG4gICAgICAgIGlmIChtYXJrLnJlYWRPbmx5ICYmICghbWFya2VycyB8fCBpbmRleE9mKG1hcmtlcnMsIG1hcmspID09IC0xKSlcbiAgICAgICAgICAobWFya2VycyB8fCAobWFya2VycyA9IFtdKSkucHVzaChtYXJrKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIW1hcmtlcnMpIHJldHVybiBudWxsO1xuICAgIHZhciBwYXJ0cyA9IFt7ZnJvbTogZnJvbSwgdG86IHRvfV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbWsgPSBtYXJrZXJzW2ldLCBtID0gbWsuZmluZCgwKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHAgPSBwYXJ0c1tqXTtcbiAgICAgICAgaWYgKGNtcChwLnRvLCBtLmZyb20pIDwgMCB8fCBjbXAocC5mcm9tLCBtLnRvKSA+IDApIGNvbnRpbnVlO1xuICAgICAgICB2YXIgbmV3UGFydHMgPSBbaiwgMV0sIGRmcm9tID0gY21wKHAuZnJvbSwgbS5mcm9tKSwgZHRvID0gY21wKHAudG8sIG0udG8pO1xuICAgICAgICBpZiAoZGZyb20gPCAwIHx8ICFtay5pbmNsdXNpdmVMZWZ0ICYmICFkZnJvbSlcbiAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHtmcm9tOiBwLmZyb20sIHRvOiBtLmZyb219KTtcbiAgICAgICAgaWYgKGR0byA+IDAgfHwgIW1rLmluY2x1c2l2ZVJpZ2h0ICYmICFkdG8pXG4gICAgICAgICAgbmV3UGFydHMucHVzaCh7ZnJvbTogbS50bywgdG86IHAudG99KTtcbiAgICAgICAgcGFydHMuc3BsaWNlLmFwcGx5KHBhcnRzLCBuZXdQYXJ0cyk7XG4gICAgICAgIGogKz0gbmV3UGFydHMubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9XG5cbiAgLy8gQ29ubmVjdCBvciBkaXNjb25uZWN0IHNwYW5zIGZyb20gYSBsaW5lLlxuICBmdW5jdGlvbiBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKSB7XG4gICAgdmFyIHNwYW5zID0gbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoIXNwYW5zKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIHNwYW5zW2ldLm1hcmtlci5kZXRhY2hMaW5lKGxpbmUpO1xuICAgIGxpbmUubWFya2VkU3BhbnMgPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIHNwYW5zKSB7XG4gICAgaWYgKCFzcGFucykgcmV0dXJuO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpXG4gICAgICBzcGFuc1tpXS5tYXJrZXIuYXR0YWNoTGluZShsaW5lKTtcbiAgICBsaW5lLm1hcmtlZFNwYW5zID0gc3BhbnM7XG4gIH1cblxuICAvLyBIZWxwZXJzIHVzZWQgd2hlbiBjb21wdXRpbmcgd2hpY2ggb3ZlcmxhcHBpbmcgY29sbGFwc2VkIHNwYW5cbiAgLy8gY291bnRzIGFzIHRoZSBsYXJnZXIgb25lLlxuICBmdW5jdGlvbiBleHRyYUxlZnQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IC0xIDogMDsgfVxuICBmdW5jdGlvbiBleHRyYVJpZ2h0KG1hcmtlcikgeyByZXR1cm4gbWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8gMSA6IDA7IH1cblxuICAvLyBSZXR1cm5zIGEgbnVtYmVyIGluZGljYXRpbmcgd2hpY2ggb2YgdHdvIG92ZXJsYXBwaW5nIGNvbGxhcHNlZFxuICAvLyBzcGFucyBpcyBsYXJnZXIgKGFuZCB0aHVzIGluY2x1ZGVzIHRoZSBvdGhlcikuIEZhbGxzIGJhY2sgdG9cbiAgLy8gY29tcGFyaW5nIGlkcyB3aGVuIHRoZSBzcGFucyBjb3ZlciBleGFjdGx5IHRoZSBzYW1lIHJhbmdlLlxuICBmdW5jdGlvbiBjb21wYXJlQ29sbGFwc2VkTWFya2VycyhhLCBiKSB7XG4gICAgdmFyIGxlbkRpZmYgPSBhLmxpbmVzLmxlbmd0aCAtIGIubGluZXMubGVuZ3RoO1xuICAgIGlmIChsZW5EaWZmICE9IDApIHJldHVybiBsZW5EaWZmO1xuICAgIHZhciBhUG9zID0gYS5maW5kKCksIGJQb3MgPSBiLmZpbmQoKTtcbiAgICB2YXIgZnJvbUNtcCA9IGNtcChhUG9zLmZyb20sIGJQb3MuZnJvbSkgfHwgZXh0cmFMZWZ0KGEpIC0gZXh0cmFMZWZ0KGIpO1xuICAgIGlmIChmcm9tQ21wKSByZXR1cm4gLWZyb21DbXA7XG4gICAgdmFyIHRvQ21wID0gY21wKGFQb3MudG8sIGJQb3MudG8pIHx8IGV4dHJhUmlnaHQoYSkgLSBleHRyYVJpZ2h0KGIpO1xuICAgIGlmICh0b0NtcCkgcmV0dXJuIHRvQ21wO1xuICAgIHJldHVybiBiLmlkIC0gYS5pZDtcbiAgfVxuXG4gIC8vIEZpbmQgb3V0IHdoZXRoZXIgYSBsaW5lIGVuZHMgb3Igc3RhcnRzIGluIGEgY29sbGFwc2VkIHNwYW4uIElmXG4gIC8vIHNvLCByZXR1cm4gdGhlIG1hcmtlciBmb3IgdGhhdCBzcGFuLlxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIHN0YXJ0KSB7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnMsIGZvdW5kO1xuICAgIGlmIChzcHMpIGZvciAodmFyIHNwLCBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkge1xuICAgICAgc3AgPSBzcHNbaV07XG4gICAgICBpZiAoc3AubWFya2VyLmNvbGxhcHNlZCAmJiAoc3RhcnQgPyBzcC5mcm9tIDogc3AudG8pID09IG51bGwgJiZcbiAgICAgICAgICAoIWZvdW5kIHx8IGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGZvdW5kLCBzcC5tYXJrZXIpIDwgMCkpXG4gICAgICAgIGZvdW5kID0gc3AubWFya2VyO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U3RhcnQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCB0cnVlKTsgfVxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCBmYWxzZSk7IH1cblxuICAvLyBUZXN0IHdoZXRoZXIgdGhlcmUgZXhpc3RzIGEgY29sbGFwc2VkIHNwYW4gdGhhdCBwYXJ0aWFsbHlcbiAgLy8gb3ZlcmxhcHMgKGNvdmVycyB0aGUgc3RhcnQgb3IgZW5kLCBidXQgbm90IGJvdGgpIG9mIGEgbmV3IHNwYW4uXG4gIC8vIFN1Y2ggb3ZlcmxhcCBpcyBub3QgYWxsb3dlZC5cbiAgZnVuY3Rpb24gY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIGxpbmVObywgZnJvbSwgdG8sIG1hcmtlcikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVObyk7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnM7XG4gICAgaWYgKHNwcykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcCA9IHNwc1tpXTtcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgY29udGludWU7XG4gICAgICB2YXIgZm91bmQgPSBzcC5tYXJrZXIuZmluZCgwKTtcbiAgICAgIHZhciBmcm9tQ21wID0gY21wKGZvdW5kLmZyb20sIGZyb20pIHx8IGV4dHJhTGVmdChzcC5tYXJrZXIpIC0gZXh0cmFMZWZ0KG1hcmtlcik7XG4gICAgICB2YXIgdG9DbXAgPSBjbXAoZm91bmQudG8sIHRvKSB8fCBleHRyYVJpZ2h0KHNwLm1hcmtlcikgLSBleHRyYVJpZ2h0KG1hcmtlcik7XG4gICAgICBpZiAoZnJvbUNtcCA+PSAwICYmIHRvQ21wIDw9IDAgfHwgZnJvbUNtcCA8PSAwICYmIHRvQ21wID49IDApIGNvbnRpbnVlO1xuICAgICAgaWYgKGZyb21DbXAgPD0gMCAmJiAoY21wKGZvdW5kLnRvLCBmcm9tKSA+IDAgfHwgKHNwLm1hcmtlci5pbmNsdXNpdmVSaWdodCAmJiBtYXJrZXIuaW5jbHVzaXZlTGVmdCkpIHx8XG4gICAgICAgICAgZnJvbUNtcCA+PSAwICYmIChjbXAoZm91bmQuZnJvbSwgdG8pIDwgMCB8fCAoc3AubWFya2VyLmluY2x1c2l2ZUxlZnQgJiYgbWFya2VyLmluY2x1c2l2ZVJpZ2h0KSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEEgdmlzdWFsIGxpbmUgaXMgYSBsaW5lIGFzIGRyYXduIG9uIHRoZSBzY3JlZW4uIEZvbGRpbmcsIGZvclxuICAvLyBleGFtcGxlLCBjYW4gY2F1c2UgbXVsdGlwbGUgbG9naWNhbCBsaW5lcyB0byBhcHBlYXIgb24gdGhlIHNhbWVcbiAgLy8gdmlzdWFsIGxpbmUuIFRoaXMgZmluZHMgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxuICAvLyBnaXZlbiBsaW5lIGlzIHBhcnQgb2YgKHVzdWFsbHkgdGhhdCBpcyB0aGUgbGluZSBpdHNlbGYpLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lKGxpbmUpIHtcbiAgICB2YXIgbWVyZ2VkO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChsaW5lKSlcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgtMSwgdHJ1ZSkubGluZTtcbiAgICByZXR1cm4gbGluZTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYW4gYXJyYXkgb2YgbG9naWNhbCBsaW5lcyB0aGF0IGNvbnRpbnVlIHRoZSB2aXN1YWwgbGluZVxuICAvLyBzdGFydGVkIGJ5IHRoZSBhcmd1bWVudCwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBubyBzdWNoIGxpbmVzLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lQ29udGludWVkKGxpbmUpIHtcbiAgICB2YXIgbWVyZ2VkLCBsaW5lcztcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKSB7XG4gICAgICBsaW5lID0gbWVyZ2VkLmZpbmQoMSwgdHJ1ZSkubGluZTtcbiAgICAgIChsaW5lcyB8fCAobGluZXMgPSBbXSkpLnB1c2gobGluZSk7XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8vIEdldCB0aGUgbGluZSBudW1iZXIgb2YgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxuICAvLyBnaXZlbiBsaW5lIG51bWJlciBpcyBwYXJ0IG9mLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lTm8oZG9jLCBsaW5lTikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgdmlzID0gdmlzdWFsTGluZShsaW5lKTtcbiAgICBpZiAobGluZSA9PSB2aXMpIHJldHVybiBsaW5lTjtcbiAgICByZXR1cm4gbGluZU5vKHZpcyk7XG4gIH1cbiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhlIG5leHQgdmlzdWFsIGxpbmUgYWZ0ZXJcbiAgLy8gdGhlIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVFbmRObyhkb2MsIGxpbmVOKSB7XG4gICAgaWYgKGxpbmVOID4gZG9jLmxhc3RMaW5lKCkpIHJldHVybiBsaW5lTjtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBsaW5lTiksIG1lcmdlZDtcbiAgICBpZiAoIWxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSByZXR1cm4gbGluZU47XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSlcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lO1xuICAgIHJldHVybiBsaW5lTm8obGluZSkgKyAxO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB3aGV0aGVyIGEgbGluZSBpcyBoaWRkZW4uIExpbmVzIGNvdW50IGFzIGhpZGRlbiB3aGVuIHRoZXlcbiAgLy8gYXJlIHBhcnQgb2YgYSB2aXN1YWwgbGluZSB0aGF0IHN0YXJ0cyB3aXRoIGFub3RoZXIgbGluZSwgb3Igd2hlblxuICAvLyB0aGV5IGFyZSBlbnRpcmVseSBjb3ZlcmVkIGJ5IGNvbGxhcHNlZCwgbm9uLXdpZGdldCBzcGFuLlxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSB7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnM7XG4gICAgaWYgKHNwcykgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzcCA9IHNwc1tpXTtcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgY29udGludWU7XG4gICAgICBpZiAoc3AuZnJvbSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChzcC5tYXJrZXIud2lkZ2V0Tm9kZSkgY29udGludWU7XG4gICAgICBpZiAoc3AuZnJvbSA9PSAwICYmIHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0ICYmIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcGFuKSB7XG4gICAgaWYgKHNwYW4udG8gPT0gbnVsbCkge1xuICAgICAgdmFyIGVuZCA9IHNwYW4ubWFya2VyLmZpbmQoMSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBlbmQubGluZSwgZ2V0TWFya2VkU3BhbkZvcihlbmQubGluZS5tYXJrZWRTcGFucywgc3Bhbi5tYXJrZXIpKTtcbiAgICB9XG4gICAgaWYgKHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIHNwYW4udG8gPT0gbGluZS50ZXh0Lmxlbmd0aClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAodmFyIHNwLCBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXTtcbiAgICAgIGlmIChzcC5tYXJrZXIuY29sbGFwc2VkICYmICFzcC5tYXJrZXIud2lkZ2V0Tm9kZSAmJiBzcC5mcm9tID09IHNwYW4udG8gJiZcbiAgICAgICAgICAoc3AudG8gPT0gbnVsbCB8fCBzcC50byAhPSBzcGFuLmZyb20pICYmXG4gICAgICAgICAgKHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0IHx8IHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSAmJlxuICAgICAgICAgIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBMSU5FIFdJREdFVFNcblxuICAvLyBMaW5lIHdpZGdldHMgYXJlIGJsb2NrIGVsZW1lbnRzIGRpc3BsYXllZCBhYm92ZSBvciBiZWxvdyBhIGxpbmUuXG5cbiAgdmFyIExpbmVXaWRnZXQgPSBDb2RlTWlycm9yLkxpbmVXaWRnZXQgPSBmdW5jdGlvbihkb2MsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucykgZm9yICh2YXIgb3B0IGluIG9wdGlvbnMpIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG9wdCkpXG4gICAgICB0aGlzW29wdF0gPSBvcHRpb25zW29wdF07XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgfTtcbiAgZXZlbnRNaXhpbihMaW5lV2lkZ2V0KTtcblxuICBmdW5jdGlvbiBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCBkaWZmKSB7XG4gICAgaWYgKGhlaWdodEF0TGluZShsaW5lKSA8ICgoY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsVG9wKSB8fCBjbS5kb2Muc2Nyb2xsVG9wKSlcbiAgICAgIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCBkaWZmKTtcbiAgfVxuXG4gIExpbmVXaWRnZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNtID0gdGhpcy5kb2MuY20sIHdzID0gdGhpcy5saW5lLndpZGdldHMsIGxpbmUgPSB0aGlzLmxpbmUsIG5vID0gbGluZU5vKGxpbmUpO1xuICAgIGlmIChubyA9PSBudWxsIHx8ICF3cykgcmV0dXJuO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd3MubGVuZ3RoOyArK2kpIGlmICh3c1tpXSA9PSB0aGlzKSB3cy5zcGxpY2UoaS0tLCAxKTtcbiAgICBpZiAoIXdzLmxlbmd0aCkgbGluZS53aWRnZXRzID0gbnVsbDtcbiAgICB2YXIgaGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHRoaXMpO1xuICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgTWF0aC5tYXgoMCwgbGluZS5oZWlnaHQgLSBoZWlnaHQpKTtcbiAgICBpZiAoY20pIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgLWhlaWdodCk7XG4gICAgICByZWdMaW5lQ2hhbmdlKGNtLCBubywgXCJ3aWRnZXRcIik7XG4gICAgfSk7XG4gIH07XG4gIExpbmVXaWRnZXQucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb2xkSCA9IHRoaXMuaGVpZ2h0LCBjbSA9IHRoaXMuZG9jLmNtLCBsaW5lID0gdGhpcy5saW5lO1xuICAgIHRoaXMuaGVpZ2h0ID0gbnVsbDtcbiAgICB2YXIgZGlmZiA9IHdpZGdldEhlaWdodCh0aGlzKSAtIG9sZEg7XG4gICAgaWYgKCFkaWZmKSByZXR1cm47XG4gICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIGRpZmYpO1xuICAgIGlmIChjbSkgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCBkaWZmKTtcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiB3aWRnZXRIZWlnaHQod2lkZ2V0KSB7XG4gICAgaWYgKHdpZGdldC5oZWlnaHQgIT0gbnVsbCkgcmV0dXJuIHdpZGdldC5oZWlnaHQ7XG4gICAgdmFyIGNtID0gd2lkZ2V0LmRvYy5jbTtcbiAgICBpZiAoIWNtKSByZXR1cm4gMDtcbiAgICBpZiAoIWNvbnRhaW5zKGRvY3VtZW50LmJvZHksIHdpZGdldC5ub2RlKSkge1xuICAgICAgdmFyIHBhcmVudFN0eWxlID0gXCJwb3NpdGlvbjogcmVsYXRpdmU7XCI7XG4gICAgICBpZiAod2lkZ2V0LmNvdmVyR3V0dGVyKVxuICAgICAgICBwYXJlbnRTdHlsZSArPSBcIm1hcmdpbi1sZWZ0OiAtXCIgKyBjbS5kaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGggKyBcInB4O1wiO1xuICAgICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpXG4gICAgICAgIHBhcmVudFN0eWxlICs9IFwid2lkdGg6IFwiICsgY20uZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoICsgXCJweDtcIjtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkubWVhc3VyZSwgZWx0KFwiZGl2XCIsIFt3aWRnZXQubm9kZV0sIG51bGwsIHBhcmVudFN0eWxlKSk7XG4gICAgfVxuICAgIHJldHVybiB3aWRnZXQuaGVpZ2h0ID0gd2lkZ2V0Lm5vZGUucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRMaW5lV2lkZ2V0KGRvYywgaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIHdpZGdldCA9IG5ldyBMaW5lV2lkZ2V0KGRvYywgbm9kZSwgb3B0aW9ucyk7XG4gICAgdmFyIGNtID0gZG9jLmNtO1xuICAgIGlmIChjbSAmJiB3aWRnZXQubm9IU2Nyb2xsKSBjbS5kaXNwbGF5LmFsaWduV2lkZ2V0cyA9IHRydWU7XG4gICAgY2hhbmdlTGluZShkb2MsIGhhbmRsZSwgXCJ3aWRnZXRcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIHdpZGdldHMgPSBsaW5lLndpZGdldHMgfHwgKGxpbmUud2lkZ2V0cyA9IFtdKTtcbiAgICAgIGlmICh3aWRnZXQuaW5zZXJ0QXQgPT0gbnVsbCkgd2lkZ2V0cy5wdXNoKHdpZGdldCk7XG4gICAgICBlbHNlIHdpZGdldHMuc3BsaWNlKE1hdGgubWluKHdpZGdldHMubGVuZ3RoIC0gMSwgTWF0aC5tYXgoMCwgd2lkZ2V0Lmluc2VydEF0KSksIDAsIHdpZGdldCk7XG4gICAgICB3aWRnZXQubGluZSA9IGxpbmU7XG4gICAgICBpZiAoY20gJiYgIWxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB7XG4gICAgICAgIHZhciBhYm92ZVZpc2libGUgPSBoZWlnaHRBdExpbmUobGluZSkgPCBkb2Muc2Nyb2xsVG9wO1xuICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgd2lkZ2V0SGVpZ2h0KHdpZGdldCkpO1xuICAgICAgICBpZiAoYWJvdmVWaXNpYmxlKSBhZGRUb1Njcm9sbFBvcyhjbSwgbnVsbCwgd2lkZ2V0LmhlaWdodCk7XG4gICAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB3aWRnZXQ7XG4gIH1cblxuICAvLyBMSU5FIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gTGluZSBvYmplY3RzLiBUaGVzZSBob2xkIHN0YXRlIHJlbGF0ZWQgdG8gYSBsaW5lLCBpbmNsdWRpbmdcbiAgLy8gaGlnaGxpZ2h0aW5nIGluZm8gKHRoZSBzdHlsZXMgYXJyYXkpLlxuICB2YXIgTGluZSA9IENvZGVNaXJyb3IuTGluZSA9IGZ1bmN0aW9uKHRleHQsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgYXR0YWNoTWFya2VkU3BhbnModGhpcywgbWFya2VkU3BhbnMpO1xuICAgIHRoaXMuaGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodCh0aGlzKSA6IDE7XG4gIH07XG4gIGV2ZW50TWl4aW4oTGluZSk7XG4gIExpbmUucHJvdG90eXBlLmxpbmVObyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZU5vKHRoaXMpOyB9O1xuXG4gIC8vIENoYW5nZSB0aGUgY29udGVudCAodGV4dCwgbWFya2Vycykgb2YgYSBsaW5lLiBBdXRvbWF0aWNhbGx5XG4gIC8vIGludmFsaWRhdGVzIGNhY2hlZCBpbmZvcm1hdGlvbiBhbmQgdHJpZXMgdG8gcmUtZXN0aW1hdGUgdGhlXG4gIC8vIGxpbmUncyBoZWlnaHQuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XG4gICAgbGluZS50ZXh0ID0gdGV4dDtcbiAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xuICAgIGlmIChsaW5lLm9yZGVyICE9IG51bGwpIGxpbmUub3JkZXIgPSBudWxsO1xuICAgIGRldGFjaE1hcmtlZFNwYW5zKGxpbmUpO1xuICAgIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIG1hcmtlZFNwYW5zKTtcbiAgICB2YXIgZXN0SGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodChsaW5lKSA6IDE7XG4gICAgaWYgKGVzdEhlaWdodCAhPSBsaW5lLmhlaWdodCkgdXBkYXRlTGluZUhlaWdodChsaW5lLCBlc3RIZWlnaHQpO1xuICB9XG5cbiAgLy8gRGV0YWNoIGEgbGluZSBmcm9tIHRoZSBkb2N1bWVudCB0cmVlIGFuZCBpdHMgbWFya2Vycy5cbiAgZnVuY3Rpb24gY2xlYW5VcExpbmUobGluZSkge1xuICAgIGxpbmUucGFyZW50ID0gbnVsbDtcbiAgICBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dHJhY3RMaW5lQ2xhc3Nlcyh0eXBlLCBvdXRwdXQpIHtcbiAgICBpZiAodHlwZSkgZm9yICg7Oykge1xuICAgICAgdmFyIGxpbmVDbGFzcyA9IHR5cGUubWF0Y2goLyg/Ol58XFxzKylsaW5lLShiYWNrZ3JvdW5kLSk/KFxcUyspLyk7XG4gICAgICBpZiAoIWxpbmVDbGFzcykgYnJlYWs7XG4gICAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBsaW5lQ2xhc3MuaW5kZXgpICsgdHlwZS5zbGljZShsaW5lQ2xhc3MuaW5kZXggKyBsaW5lQ2xhc3NbMF0ubGVuZ3RoKTtcbiAgICAgIHZhciBwcm9wID0gbGluZUNsYXNzWzFdID8gXCJiZ0NsYXNzXCIgOiBcInRleHRDbGFzc1wiO1xuICAgICAgaWYgKG91dHB1dFtwcm9wXSA9PSBudWxsKVxuICAgICAgICBvdXRwdXRbcHJvcF0gPSBsaW5lQ2xhc3NbMl07XG4gICAgICBlbHNlIGlmICghKG5ldyBSZWdFeHAoXCIoPzpefFxccylcIiArIGxpbmVDbGFzc1syXSArIFwiKD86JHxcXHMpXCIpKS50ZXN0KG91dHB1dFtwcm9wXSkpXG4gICAgICAgIG91dHB1dFtwcm9wXSArPSBcIiBcIiArIGxpbmVDbGFzc1syXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICBmdW5jdGlvbiBjYWxsQmxhbmtMaW5lKG1vZGUsIHN0YXRlKSB7XG4gICAgaWYgKG1vZGUuYmxhbmtMaW5lKSByZXR1cm4gbW9kZS5ibGFua0xpbmUoc3RhdGUpO1xuICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHJldHVybjtcbiAgICB2YXIgaW5uZXIgPSBDb2RlTWlycm9yLmlubmVyTW9kZShtb2RlLCBzdGF0ZSk7XG4gICAgaWYgKGlubmVyLm1vZGUuYmxhbmtMaW5lKSByZXR1cm4gaW5uZXIubW9kZS5ibGFua0xpbmUoaW5uZXIuc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUsIGlubmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBpZiAoaW5uZXIpIGlubmVyWzBdID0gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgc3RhdGUpLm1vZGU7XG4gICAgICB2YXIgc3R5bGUgPSBtb2RlLnRva2VuKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKHN0cmVhbS5wb3MgPiBzdHJlYW0uc3RhcnQpIHJldHVybiBzdHlsZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTW9kZSBcIiArIG1vZGUubmFtZSArIFwiIGZhaWxlZCB0byBhZHZhbmNlIHN0cmVhbS5cIik7XG4gIH1cblxuICAvLyBVdGlsaXR5IGZvciBnZXRUb2tlbkF0IGFuZCBnZXRMaW5lVG9rZW5zXG4gIGZ1bmN0aW9uIHRha2VUb2tlbihjbSwgcG9zLCBwcmVjaXNlLCBhc0FycmF5KSB7XG4gICAgZnVuY3Rpb24gZ2V0T2JqKGNvcHkpIHtcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0cmVhbS5zdGFydCwgZW5kOiBzdHJlYW0ucG9zLFxuICAgICAgICAgICAgICBzdHJpbmc6IHN0cmVhbS5jdXJyZW50KCksXG4gICAgICAgICAgICAgIHR5cGU6IHN0eWxlIHx8IG51bGwsXG4gICAgICAgICAgICAgIHN0YXRlOiBjb3B5ID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBzdGF0ZX07XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbW9kZSA9IGRvYy5tb2RlLCBzdHlsZTtcbiAgICBwb3MgPSBjbGlwUG9zKGRvYywgcG9zKTtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSksIHN0YXRlID0gZ2V0U3RhdGVCZWZvcmUoY20sIHBvcy5saW5lLCBwcmVjaXNlKTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLnRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSksIHRva2VucztcbiAgICBpZiAoYXNBcnJheSkgdG9rZW5zID0gW107XG4gICAgd2hpbGUgKChhc0FycmF5IHx8IHN0cmVhbS5wb3MgPCBwb3MuY2gpICYmICFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgICBzdHlsZSA9IHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmIChhc0FycmF5KSB0b2tlbnMucHVzaChnZXRPYmoodHJ1ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gYXNBcnJheSA/IHRva2VucyA6IGdldE9iaigpO1xuICB9XG5cbiAgLy8gUnVuIHRoZSBnaXZlbiBtb2RlJ3MgcGFyc2VyIG92ZXIgYSBsaW5lLCBjYWxsaW5nIGYgZm9yIGVhY2ggdG9rZW4uXG4gIGZ1bmN0aW9uIHJ1bk1vZGUoY20sIHRleHQsIG1vZGUsIHN0YXRlLCBmLCBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCkge1xuICAgIHZhciBmbGF0dGVuU3BhbnMgPSBtb2RlLmZsYXR0ZW5TcGFucztcbiAgICBpZiAoZmxhdHRlblNwYW5zID09IG51bGwpIGZsYXR0ZW5TcGFucyA9IGNtLm9wdGlvbnMuZmxhdHRlblNwYW5zO1xuICAgIHZhciBjdXJTdGFydCA9IDAsIGN1clN0eWxlID0gbnVsbDtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpLCBzdHlsZTtcbiAgICB2YXIgaW5uZXIgPSBjbS5vcHRpb25zLmFkZE1vZGVDbGFzcyAmJiBbbnVsbF07XG4gICAgaWYgKHRleHQgPT0gXCJcIikgZXh0cmFjdExpbmVDbGFzc2VzKGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpLCBsaW5lQ2xhc3Nlcyk7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIGlmIChzdHJlYW0ucG9zID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpIHtcbiAgICAgICAgZmxhdHRlblNwYW5zID0gZmFsc2U7XG4gICAgICAgIGlmIChmb3JjZVRvRW5kKSBwcm9jZXNzTGluZShjbSwgdGV4dCwgc3RhdGUsIHN0cmVhbS5wb3MpO1xuICAgICAgICBzdHJlYW0ucG9zID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHN0eWxlID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlID0gZXh0cmFjdExpbmVDbGFzc2VzKHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlLCBpbm5lciksIGxpbmVDbGFzc2VzKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbm5lcikge1xuICAgICAgICB2YXIgbU5hbWUgPSBpbm5lclswXS5uYW1lO1xuICAgICAgICBpZiAobU5hbWUpIHN0eWxlID0gXCJtLVwiICsgKHN0eWxlID8gbU5hbWUgKyBcIiBcIiArIHN0eWxlIDogbU5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFmbGF0dGVuU3BhbnMgfHwgY3VyU3R5bGUgIT0gc3R5bGUpIHtcbiAgICAgICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnN0YXJ0KSB7XG4gICAgICAgICAgY3VyU3RhcnQgPSBNYXRoLm1pbihzdHJlYW0uc3RhcnQsIGN1clN0YXJ0ICsgNTAwMDApO1xuICAgICAgICAgIGYoY3VyU3RhcnQsIGN1clN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJTdHlsZSA9IHN0eWxlO1xuICAgICAgfVxuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICB9XG4gICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnBvcykge1xuICAgICAgLy8gV2Via2l0IHNlZW1zIHRvIHJlZnVzZSB0byByZW5kZXIgdGV4dCBub2RlcyBsb25nZXIgdGhhbiA1NzQ0NCBjaGFyYWN0ZXJzXG4gICAgICB2YXIgcG9zID0gTWF0aC5taW4oc3RyZWFtLnBvcywgY3VyU3RhcnQgKyA1MDAwMCk7XG4gICAgICBmKHBvcywgY3VyU3R5bGUpO1xuICAgICAgY3VyU3RhcnQgPSBwb3M7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcHV0ZSBhIHN0eWxlIGFycmF5IChhbiBhcnJheSBzdGFydGluZyB3aXRoIGEgbW9kZSBnZW5lcmF0aW9uXG4gIC8vIC0tIGZvciBpbnZhbGlkYXRpb24gLS0gZm9sbG93ZWQgYnkgcGFpcnMgb2YgZW5kIHBvc2l0aW9ucyBhbmRcbiAgLy8gc3R5bGUgc3RyaW5ncyksIHdoaWNoIGlzIHVzZWQgdG8gaGlnaGxpZ2h0IHRoZSB0b2tlbnMgb24gdGhlXG4gIC8vIGxpbmUuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIHN0YXRlLCBmb3JjZVRvRW5kKSB7XG4gICAgLy8gQSBzdHlsZXMgYXJyYXkgYWx3YXlzIHN0YXJ0cyB3aXRoIGEgbnVtYmVyIGlkZW50aWZ5aW5nIHRoZVxuICAgIC8vIG1vZGUvb3ZlcmxheXMgdGhhdCBpdCBpcyBiYXNlZCBvbiAoZm9yIGVhc3kgaW52YWxpZGF0aW9uKS5cbiAgICB2YXIgc3QgPSBbY20uc3RhdGUubW9kZUdlbl0sIGxpbmVDbGFzc2VzID0ge307XG4gICAgLy8gQ29tcHV0ZSB0aGUgYmFzZSBhcnJheSBvZiBzdHlsZXNcbiAgICBydW5Nb2RlKGNtLCBsaW5lLnRleHQsIGNtLmRvYy5tb2RlLCBzdGF0ZSwgZnVuY3Rpb24oZW5kLCBzdHlsZSkge1xuICAgICAgc3QucHVzaChlbmQsIHN0eWxlKTtcbiAgICB9LCBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCk7XG5cbiAgICAvLyBSdW4gb3ZlcmxheXMsIGFkanVzdCBzdHlsZSBhcnJheS5cbiAgICBmb3IgKHZhciBvID0gMDsgbyA8IGNtLnN0YXRlLm92ZXJsYXlzLmxlbmd0aDsgKytvKSB7XG4gICAgICB2YXIgb3ZlcmxheSA9IGNtLnN0YXRlLm92ZXJsYXlzW29dLCBpID0gMSwgYXQgPSAwO1xuICAgICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBvdmVybGF5Lm1vZGUsIHRydWUsIGZ1bmN0aW9uKGVuZCwgc3R5bGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gaTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZXJlJ3MgYSB0b2tlbiBlbmQgYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGFuZCB0aGF0IGkgcG9pbnRzIGF0IGl0XG4gICAgICAgIHdoaWxlIChhdCA8IGVuZCkge1xuICAgICAgICAgIHZhciBpX2VuZCA9IHN0W2ldO1xuICAgICAgICAgIGlmIChpX2VuZCA+IGVuZClcbiAgICAgICAgICAgIHN0LnNwbGljZShpLCAxLCBlbmQsIHN0W2krMV0sIGlfZW5kKTtcbiAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgYXQgPSBNYXRoLm1pbihlbmQsIGlfZW5kKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0eWxlKSByZXR1cm47XG4gICAgICAgIGlmIChvdmVybGF5Lm9wYXF1ZSkge1xuICAgICAgICAgIHN0LnNwbGljZShzdGFydCwgaSAtIHN0YXJ0LCBlbmQsIFwiY20tb3ZlcmxheSBcIiArIHN0eWxlKTtcbiAgICAgICAgICBpID0gc3RhcnQgKyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoOyBzdGFydCA8IGk7IHN0YXJ0ICs9IDIpIHtcbiAgICAgICAgICAgIHZhciBjdXIgPSBzdFtzdGFydCsxXTtcbiAgICAgICAgICAgIHN0W3N0YXJ0KzFdID0gKGN1ciA/IGN1ciArIFwiIFwiIDogXCJcIikgKyBcImNtLW92ZXJsYXkgXCIgKyBzdHlsZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGxpbmVDbGFzc2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3N0eWxlczogc3QsIGNsYXNzZXM6IGxpbmVDbGFzc2VzLmJnQ2xhc3MgfHwgbGluZUNsYXNzZXMudGV4dENsYXNzID8gbGluZUNsYXNzZXMgOiBudWxsfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIHVwZGF0ZUZyb250aWVyKSB7XG4gICAgaWYgKCFsaW5lLnN0eWxlcyB8fCBsaW5lLnN0eWxlc1swXSAhPSBjbS5zdGF0ZS5tb2RlR2VuKSB7XG4gICAgICB2YXIgc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShjbSwgbGluZU5vKGxpbmUpKTtcbiAgICAgIHZhciByZXN1bHQgPSBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCBsaW5lLnRleHQubGVuZ3RoID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGggPyBjb3B5U3RhdGUoY20uZG9jLm1vZGUsIHN0YXRlKSA6IHN0YXRlKTtcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHN0YXRlO1xuICAgICAgbGluZS5zdHlsZXMgPSByZXN1bHQuc3R5bGVzO1xuICAgICAgaWYgKHJlc3VsdC5jbGFzc2VzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IHJlc3VsdC5jbGFzc2VzO1xuICAgICAgZWxzZSBpZiAobGluZS5zdHlsZUNsYXNzZXMpIGxpbmUuc3R5bGVDbGFzc2VzID0gbnVsbDtcbiAgICAgIGlmICh1cGRhdGVGcm9udGllciA9PT0gY20uZG9jLmZyb250aWVyKSBjbS5kb2MuZnJvbnRpZXIrKztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmUuc3R5bGVzO1xuICB9XG5cbiAgLy8gTGlnaHR3ZWlnaHQgZm9ybSBvZiBoaWdobGlnaHQgLS0gcHJvY2VlZCBvdmVyIHRoaXMgbGluZSBhbmRcbiAgLy8gdXBkYXRlIHN0YXRlLCBidXQgZG9uJ3Qgc2F2ZSBhIHN0eWxlIGFycmF5LiBVc2VkIGZvciBsaW5lcyB0aGF0XG4gIC8vIGFyZW4ndCBjdXJyZW50bHkgdmlzaWJsZS5cbiAgZnVuY3Rpb24gcHJvY2Vzc0xpbmUoY20sIHRleHQsIHN0YXRlLCBzdGFydEF0KSB7XG4gICAgdmFyIG1vZGUgPSBjbS5kb2MubW9kZTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpO1xuICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3MgPSBzdGFydEF0IHx8IDA7XG4gICAgaWYgKHRleHQgPT0gXCJcIikgY2FsbEJsYW5rTGluZShtb2RlLCBzdGF0ZSk7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29udmVydCBhIHN0eWxlIGFzIHJldHVybmVkIGJ5IGEgbW9kZSAoZWl0aGVyIG51bGwsIG9yIGEgc3RyaW5nXG4gIC8vIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgc3R5bGVzKSB0byBhIENTUyBzdHlsZS4gVGhpcyBpcyBjYWNoZWQsXG4gIC8vIGFuZCBhbHNvIGxvb2tzIGZvciBsaW5lLXdpZGUgc3R5bGVzLlxuICB2YXIgc3R5bGVUb0NsYXNzQ2FjaGUgPSB7fSwgc3R5bGVUb0NsYXNzQ2FjaGVXaXRoTW9kZSA9IHt9O1xuICBmdW5jdGlvbiBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFzdHlsZSB8fCAvXlxccyokLy50ZXN0KHN0eWxlKSkgcmV0dXJuIG51bGw7XG4gICAgdmFyIGNhY2hlID0gb3B0aW9ucy5hZGRNb2RlQ2xhc3MgPyBzdHlsZVRvQ2xhc3NDYWNoZVdpdGhNb2RlIDogc3R5bGVUb0NsYXNzQ2FjaGU7XG4gICAgcmV0dXJuIGNhY2hlW3N0eWxlXSB8fFxuICAgICAgKGNhY2hlW3N0eWxlXSA9IHN0eWxlLnJlcGxhY2UoL1xcUysvZywgXCJjbS0kJlwiKSk7XG4gIH1cblxuICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzXG4gIC8vIHVwIGEgJ2xpbmUgbWFwJywgd2hpY2ggcG9pbnRzIGF0IHRoZSBET00gbm9kZXMgdGhhdCByZXByZXNlbnRcbiAgLy8gc3BlY2lmaWMgc3RyZXRjaGVzIG9mIHRleHQsIGFuZCBpcyB1c2VkIGJ5IHRoZSBtZWFzdXJpbmcgY29kZS5cbiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMgbWFwLCBhbmRcbiAgLy8gaW5mb3JtYXRpb24gYWJvdXQgbGluZS13aWRlIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGJ5IHRoZSBtb2RlLlxuICBmdW5jdGlvbiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldykge1xuICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBoYXZlIGEgJ2JvcmRlcicsIHdoaWNoXG4gICAgLy8gaXMgbmVlZGVkIG9uIFdlYmtpdCB0byBiZSBhYmxlIHRvIGdldCBsaW5lLWxldmVsIGJvdW5kaW5nXG4gICAgLy8gcmVjdGFuZ2xlcyBmb3IgaXQgKGluIG1lYXN1cmVDaGFyKS5cbiAgICB2YXIgY29udGVudCA9IGVsdChcInNwYW5cIiwgbnVsbCwgbnVsbCwgd2Via2l0ID8gXCJwYWRkaW5nLXJpZ2h0OiAuMXB4XCIgOiBudWxsKTtcbiAgICB2YXIgYnVpbGRlciA9IHtwcmU6IGVsdChcInByZVwiLCBbY29udGVudF0sIFwiQ29kZU1pcnJvci1saW5lXCIpLCBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgIGNvbDogMCwgcG9zOiAwLCBjbTogY20sXG4gICAgICAgICAgICAgICAgICAgc3BsaXRTcGFjZXM6IChpZSB8fCB3ZWJraXQpICYmIGNtLmdldE9wdGlvbihcImxpbmVXcmFwcGluZ1wiKX07XG4gICAgbGluZVZpZXcubWVhc3VyZSA9IHt9O1xuXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBsb2dpY2FsIGxpbmVzIHRoYXQgbWFrZSB1cCB0aGlzIHZpc3VhbCBsaW5lLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IChsaW5lVmlldy5yZXN0ID8gbGluZVZpZXcucmVzdC5sZW5ndGggOiAwKTsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGkgPyBsaW5lVmlldy5yZXN0W2kgLSAxXSA6IGxpbmVWaWV3LmxpbmUsIG9yZGVyO1xuICAgICAgYnVpbGRlci5wb3MgPSAwO1xuICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW47XG4gICAgICAvLyBPcHRpb25hbGx5IHdpcmUgaW4gc29tZSBoYWNrcyBpbnRvIHRoZSB0b2tlbi1yZW5kZXJpbmdcbiAgICAgIC8vIGFsZ29yaXRobSwgdG8gZGVhbCB3aXRoIGJyb3dzZXIgcXVpcmtzLlxuICAgICAgaWYgKGhhc0JhZEJpZGlSZWN0cyhjbS5kaXNwbGF5Lm1lYXN1cmUpICYmIChvcmRlciA9IGdldE9yZGVyKGxpbmUpKSlcbiAgICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW5CYWRCaWRpKGJ1aWxkZXIuYWRkVG9rZW4sIG9yZGVyKTtcbiAgICAgIGJ1aWxkZXIubWFwID0gW107XG4gICAgICB2YXIgYWxsb3dGcm9udGllclVwZGF0ZSA9IGxpbmVWaWV3ICE9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCAmJiBsaW5lTm8obGluZSk7XG4gICAgICBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBnZXRMaW5lU3R5bGVzKGNtLCBsaW5lLCBhbGxvd0Zyb250aWVyVXBkYXRlKSk7XG4gICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMpIHtcbiAgICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzLmJnQ2xhc3MpXG4gICAgICAgICAgYnVpbGRlci5iZ0NsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcywgYnVpbGRlci5iZ0NsYXNzIHx8IFwiXCIpO1xuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzKVxuICAgICAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5zdXJlIGF0IGxlYXN0IGEgc2luZ2xlIG5vZGUgaXMgcHJlc2VudCwgZm9yIG1lYXN1cmluZy5cbiAgICAgIGlmIChidWlsZGVyLm1hcC5sZW5ndGggPT0gMClcbiAgICAgICAgYnVpbGRlci5tYXAucHVzaCgwLCAwLCBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoemVyb1dpZHRoRWxlbWVudChjbS5kaXNwbGF5Lm1lYXN1cmUpKSk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSBtYXAgYW5kIGEgY2FjaGUgb2JqZWN0IGZvciB0aGUgY3VycmVudCBsb2dpY2FsIGxpbmVcbiAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5tYXAgPSBidWlsZGVyLm1hcDtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUubWFwcyB8fCAobGluZVZpZXcubWVhc3VyZS5tYXBzID0gW10pKS5wdXNoKGJ1aWxkZXIubWFwKTtcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzIHx8IChsaW5lVmlldy5tZWFzdXJlLmNhY2hlcyA9IFtdKSkucHVzaCh7fSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2VlIGlzc3VlICMyOTAxXG4gICAgaWYgKHdlYmtpdCAmJiAvXFxiY20tdGFiXFxiLy50ZXN0KGJ1aWxkZXIuY29udGVudC5sYXN0Q2hpbGQuY2xhc3NOYW1lKSlcbiAgICAgIGJ1aWxkZXIuY29udGVudC5jbGFzc05hbWUgPSBcImNtLXRhYi13cmFwLWhhY2tcIjtcblxuICAgIHNpZ25hbChjbSwgXCJyZW5kZXJMaW5lXCIsIGNtLCBsaW5lVmlldy5saW5lLCBidWlsZGVyLnByZSk7XG4gICAgaWYgKGJ1aWxkZXIucHJlLmNsYXNzTmFtZSlcbiAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMoYnVpbGRlci5wcmUuY2xhc3NOYW1lLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcblxuICAgIHJldHVybiBidWlsZGVyO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdFNwZWNpYWxDaGFyUGxhY2Vob2xkZXIoY2gpIHtcbiAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFwiXFx1MjAyMlwiLCBcImNtLWludmFsaWRjaGFyXCIpO1xuICAgIHRva2VuLnRpdGxlID0gXCJcXFxcdVwiICsgY2guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG4gICAgdG9rZW4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0b2tlbi50aXRsZSk7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgLy8gQnVpbGQgdXAgdGhlIERPTSByZXByZXNlbnRhdGlvbiBmb3IgYSBzaW5nbGUgdG9rZW4sIGFuZCBhZGQgaXQgdG9cbiAgLy8gdGhlIGxpbmUgbWFwLiBUYWtlcyBjYXJlIHRvIHJlbmRlciBzcGVjaWFsIGNoYXJhY3RlcnMgc2VwYXJhdGVseS5cbiAgZnVuY3Rpb24gYnVpbGRUb2tlbihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIHRpdGxlLCBjc3MpIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICB2YXIgZGlzcGxheVRleHQgPSBidWlsZGVyLnNwbGl0U3BhY2VzID8gdGV4dC5yZXBsYWNlKC8gezMsfS9nLCBzcGxpdFNwYWNlcykgOiB0ZXh0O1xuICAgIHZhciBzcGVjaWFsID0gYnVpbGRlci5jbS5zdGF0ZS5zcGVjaWFsQ2hhcnMsIG11c3RXcmFwID0gZmFsc2U7XG4gICAgaWYgKCFzcGVjaWFsLnRlc3QodGV4dCkpIHtcbiAgICAgIGJ1aWxkZXIuY29sICs9IHRleHQubGVuZ3RoO1xuICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkaXNwbGF5VGV4dCk7XG4gICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHRleHQubGVuZ3RoLCBjb250ZW50KTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgbXVzdFdyYXAgPSB0cnVlO1xuICAgICAgYnVpbGRlci5wb3MgKz0gdGV4dC5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLCBwb3MgPSAwO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgc3BlY2lhbC5sYXN0SW5kZXggPSBwb3M7XG4gICAgICAgIHZhciBtID0gc3BlY2lhbC5leGVjKHRleHQpO1xuICAgICAgICB2YXIgc2tpcHBlZCA9IG0gPyBtLmluZGV4IC0gcG9zIDogdGV4dC5sZW5ndGggLSBwb3M7XG4gICAgICAgIGlmIChza2lwcGVkKSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRpc3BsYXlUZXh0LnNsaWNlKHBvcywgcG9zICsgc2tpcHBlZCkpO1xuICAgICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIFt0eHRdKSk7XG4gICAgICAgICAgZWxzZSBjb250ZW50LmFwcGVuZENoaWxkKHR4dCk7XG4gICAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyBza2lwcGVkLCB0eHQpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IHNraXBwZWQ7XG4gICAgICAgICAgYnVpbGRlci5wb3MgKz0gc2tpcHBlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW0pIGJyZWFrO1xuICAgICAgICBwb3MgKz0gc2tpcHBlZCArIDE7XG4gICAgICAgIGlmIChtWzBdID09IFwiXFx0XCIpIHtcbiAgICAgICAgICB2YXIgdGFiU2l6ZSA9IGJ1aWxkZXIuY20ub3B0aW9ucy50YWJTaXplLCB0YWJXaWR0aCA9IHRhYlNpemUgLSBidWlsZGVyLmNvbCAlIHRhYlNpemU7XG4gICAgICAgICAgdmFyIHR4dCA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBzcGFjZVN0cih0YWJXaWR0aCksIFwiY20tdGFiXCIpKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInByZXNlbnRhdGlvblwiKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBcIlxcdFwiKTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSB0YWJXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmIChtWzBdID09IFwiXFxyXCIgfHwgbVswXSA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBtWzBdID09IFwiXFxyXCIgPyBcIlxcdTI0MGRcIiA6IFwiXFx1MjQyNFwiLCBcImNtLWludmFsaWRjaGFyXCIpKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBtWzBdKTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0eHQgPSBidWlsZGVyLmNtLm9wdGlvbnMuc3BlY2lhbENoYXJQbGFjZWhvbGRlcihtWzBdKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBtWzBdKTtcbiAgICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0XSkpO1xuICAgICAgICAgIGVsc2UgY29udGVudC5hcHBlbmRDaGlsZCh0eHQpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyAxLCB0eHQpO1xuICAgICAgICBidWlsZGVyLnBvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3R5bGUgfHwgc3RhcnRTdHlsZSB8fCBlbmRTdHlsZSB8fCBtdXN0V3JhcCB8fCBjc3MpIHtcbiAgICAgIHZhciBmdWxsU3R5bGUgPSBzdHlsZSB8fCBcIlwiO1xuICAgICAgaWYgKHN0YXJ0U3R5bGUpIGZ1bGxTdHlsZSArPSBzdGFydFN0eWxlO1xuICAgICAgaWYgKGVuZFN0eWxlKSBmdWxsU3R5bGUgKz0gZW5kU3R5bGU7XG4gICAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFtjb250ZW50XSwgZnVsbFN0eWxlLCBjc3MpO1xuICAgICAgaWYgKHRpdGxlKSB0b2tlbi50aXRsZSA9IHRpdGxlO1xuICAgICAgcmV0dXJuIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh0b2tlbik7XG4gICAgfVxuICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0U3BhY2VzKG9sZCkge1xuICAgIHZhciBvdXQgPSBcIiBcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGggLSAyOyArK2kpIG91dCArPSBpICUgMiA/IFwiIFwiIDogXCJcXHUwMGEwXCI7XG4gICAgb3V0ICs9IFwiIFwiO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLyBXb3JrIGFyb3VuZCBub25zZW5zZSBkaW1lbnNpb25zIGJlaW5nIHJlcG9ydGVkIGZvciBzdHJldGNoZXMgb2ZcbiAgLy8gcmlnaHQtdG8tbGVmdCB0ZXh0LlxuICBmdW5jdGlvbiBidWlsZFRva2VuQmFkQmlkaShpbm5lciwgb3JkZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSwgY3NzKSB7XG4gICAgICBzdHlsZSA9IHN0eWxlID8gc3R5bGUgKyBcIiBjbS1mb3JjZS1ib3JkZXJcIiA6IFwiY20tZm9yY2UtYm9yZGVyXCI7XG4gICAgICB2YXIgc3RhcnQgPSBidWlsZGVyLnBvcywgZW5kID0gc3RhcnQgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgLy8gRmluZCB0aGUgcGFydCB0aGF0IG92ZXJsYXBzIHdpdGggdGhlIHN0YXJ0IG9mIHRoaXMgdGV4dFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXTtcbiAgICAgICAgICBpZiAocGFydC50byA+IHN0YXJ0ICYmIHBhcnQuZnJvbSA8PSBzdGFydCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnQudG8gPj0gZW5kKSByZXR1cm4gaW5uZXIoYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSwgY3NzKTtcbiAgICAgICAgaW5uZXIoYnVpbGRlciwgdGV4dC5zbGljZSgwLCBwYXJ0LnRvIC0gc3RhcnQpLCBzdHlsZSwgc3RhcnRTdHlsZSwgbnVsbCwgdGl0bGUsIGNzcyk7XG4gICAgICAgIHN0YXJ0U3R5bGUgPSBudWxsO1xuICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZShwYXJ0LnRvIC0gc3RhcnQpO1xuICAgICAgICBzdGFydCA9IHBhcnQudG87XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCBzaXplLCBtYXJrZXIsIGlnbm9yZVdpZGdldCkge1xuICAgIHZhciB3aWRnZXQgPSAhaWdub3JlV2lkZ2V0ICYmIG1hcmtlci53aWRnZXROb2RlO1xuICAgIGlmICh3aWRnZXQpIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2l6ZSwgd2lkZ2V0KTtcbiAgICBpZiAoIWlnbm9yZVdpZGdldCAmJiBidWlsZGVyLmNtLmRpc3BsYXkuaW5wdXQubmVlZHNDb250ZW50QXR0cmlidXRlKSB7XG4gICAgICBpZiAoIXdpZGdldClcbiAgICAgICAgd2lkZ2V0ID0gYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKTtcbiAgICAgIHdpZGdldC5zZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIiwgbWFya2VyLmlkKTtcbiAgICB9XG4gICAgaWYgKHdpZGdldCkge1xuICAgICAgYnVpbGRlci5jbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUod2lkZ2V0KTtcbiAgICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh3aWRnZXQpO1xuICAgIH1cbiAgICBidWlsZGVyLnBvcyArPSBzaXplO1xuICB9XG5cbiAgLy8gT3V0cHV0cyBhIG51bWJlciBvZiBzcGFucyB0byBtYWtlIHVwIGEgbGluZSwgdGFraW5nIGhpZ2hsaWdodGluZ1xuICAvLyBhbmQgbWFya2VkIHRleHQgaW50byBhY2NvdW50LlxuICBmdW5jdGlvbiBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBzdHlsZXMpIHtcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zLCBhbGxUZXh0ID0gbGluZS50ZXh0LCBhdCA9IDA7XG4gICAgaWYgKCFzcGFucykge1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKz0yKVxuICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2ldKSwgaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZXNbaSsxXSwgYnVpbGRlci5jbS5vcHRpb25zKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxlbiA9IGFsbFRleHQubGVuZ3RoLCBwb3MgPSAwLCBpID0gMSwgdGV4dCA9IFwiXCIsIHN0eWxlLCBjc3M7XG4gICAgdmFyIG5leHRDaGFuZ2UgPSAwLCBzcGFuU3R5bGUsIHNwYW5FbmRTdHlsZSwgc3BhblN0YXJ0U3R5bGUsIHRpdGxlLCBjb2xsYXBzZWQ7XG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKG5leHRDaGFuZ2UgPT0gcG9zKSB7IC8vIFVwZGF0ZSBjdXJyZW50IG1hcmtlciBzZXRcbiAgICAgICAgc3BhblN0eWxlID0gc3BhbkVuZFN0eWxlID0gc3BhblN0YXJ0U3R5bGUgPSB0aXRsZSA9IGNzcyA9IFwiXCI7XG4gICAgICAgIGNvbGxhcHNlZCA9IG51bGw7IG5leHRDaGFuZ2UgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIGZvdW5kQm9va21hcmtzID0gW10sIGVuZFN0eWxlc1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNwYW5zLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgdmFyIHNwID0gc3BhbnNbal0sIG0gPSBzcC5tYXJrZXI7XG4gICAgICAgICAgaWYgKG0udHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgc3AuZnJvbSA9PSBwb3MgJiYgbS53aWRnZXROb2RlKSB7XG4gICAgICAgICAgICBmb3VuZEJvb2ttYXJrcy5wdXNoKG0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3AuZnJvbSA8PSBwb3MgJiYgKHNwLnRvID09IG51bGwgfHwgc3AudG8gPiBwb3MgfHwgbS5jb2xsYXBzZWQgJiYgc3AudG8gPT0gcG9zICYmIHNwLmZyb20gPT0gcG9zKSkge1xuICAgICAgICAgICAgaWYgKHNwLnRvICE9IG51bGwgJiYgc3AudG8gIT0gcG9zICYmIG5leHRDaGFuZ2UgPiBzcC50bykge1xuICAgICAgICAgICAgICBuZXh0Q2hhbmdlID0gc3AudG87XG4gICAgICAgICAgICAgIHNwYW5FbmRTdHlsZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobS5jbGFzc05hbWUpIHNwYW5TdHlsZSArPSBcIiBcIiArIG0uY2xhc3NOYW1lO1xuICAgICAgICAgICAgaWYgKG0uY3NzKSBjc3MgPSAoY3NzID8gY3NzICsgXCI7XCIgOiBcIlwiKSArIG0uY3NzO1xuICAgICAgICAgICAgaWYgKG0uc3RhcnRTdHlsZSAmJiBzcC5mcm9tID09IHBvcykgc3BhblN0YXJ0U3R5bGUgKz0gXCIgXCIgKyBtLnN0YXJ0U3R5bGU7XG4gICAgICAgICAgICBpZiAobS5lbmRTdHlsZSAmJiBzcC50byA9PSBuZXh0Q2hhbmdlKSAoZW5kU3R5bGVzIHx8IChlbmRTdHlsZXMgPSBbXSkpLnB1c2gobS5lbmRTdHlsZSwgc3AudG8pXG4gICAgICAgICAgICBpZiAobS50aXRsZSAmJiAhdGl0bGUpIHRpdGxlID0gbS50aXRsZTtcbiAgICAgICAgICAgIGlmIChtLmNvbGxhcHNlZCAmJiAoIWNvbGxhcHNlZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFya2Vycyhjb2xsYXBzZWQubWFya2VyLCBtKSA8IDApKVxuICAgICAgICAgICAgICBjb2xsYXBzZWQgPSBzcDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNwLmZyb20gPiBwb3MgJiYgbmV4dENoYW5nZSA+IHNwLmZyb20pIHtcbiAgICAgICAgICAgIG5leHRDaGFuZ2UgPSBzcC5mcm9tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kU3R5bGVzKSBmb3IgKHZhciBqID0gMDsgaiA8IGVuZFN0eWxlcy5sZW5ndGg7IGogKz0gMilcbiAgICAgICAgICBpZiAoZW5kU3R5bGVzW2ogKyAxXSA9PSBuZXh0Q2hhbmdlKSBzcGFuRW5kU3R5bGUgKz0gXCIgXCIgKyBlbmRTdHlsZXNbal1cblxuICAgICAgICBpZiAoIWNvbGxhcHNlZCB8fCBjb2xsYXBzZWQuZnJvbSA9PSBwb3MpIGZvciAodmFyIGogPSAwOyBqIDwgZm91bmRCb29rbWFya3MubGVuZ3RoOyArK2opXG4gICAgICAgICAgYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIDAsIGZvdW5kQm9va21hcmtzW2pdKTtcbiAgICAgICAgaWYgKGNvbGxhcHNlZCAmJiAoY29sbGFwc2VkLmZyb20gfHwgMCkgPT0gcG9zKSB7XG4gICAgICAgICAgYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIChjb2xsYXBzZWQudG8gPT0gbnVsbCA/IGxlbiArIDEgOiBjb2xsYXBzZWQudG8pIC0gcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZWQubWFya2VyLCBjb2xsYXBzZWQuZnJvbSA9PSBudWxsKTtcbiAgICAgICAgICBpZiAoY29sbGFwc2VkLnRvID09IG51bGwpIHJldHVybjtcbiAgICAgICAgICBpZiAoY29sbGFwc2VkLnRvID09IHBvcykgY29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwb3MgPj0gbGVuKSBicmVhaztcblxuICAgICAgdmFyIHVwdG8gPSBNYXRoLm1pbihsZW4sIG5leHRDaGFuZ2UpO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICB2YXIgZW5kID0gcG9zICsgdGV4dC5sZW5ndGg7XG4gICAgICAgICAgaWYgKCFjb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHZhciB0b2tlblRleHQgPSBlbmQgPiB1cHRvID8gdGV4dC5zbGljZSgwLCB1cHRvIC0gcG9zKSA6IHRleHQ7XG4gICAgICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIHRva2VuVGV4dCwgc3R5bGUgPyBzdHlsZSArIHNwYW5TdHlsZSA6IHNwYW5TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhblN0YXJ0U3R5bGUsIHBvcyArIHRva2VuVGV4dC5sZW5ndGggPT0gbmV4dENoYW5nZSA/IHNwYW5FbmRTdHlsZSA6IFwiXCIsIHRpdGxlLCBjc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZW5kID49IHVwdG8pIHt0ZXh0ID0gdGV4dC5zbGljZSh1cHRvIC0gcG9zKTsgcG9zID0gdXB0bzsgYnJlYWs7fVxuICAgICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgICBzcGFuU3RhcnRTdHlsZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2krK10pO1xuICAgICAgICBzdHlsZSA9IGludGVycHJldFRva2VuU3R5bGUoc3R5bGVzW2krK10sIGJ1aWxkZXIuY20ub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRE9DVU1FTlQgREFUQSBTVFJVQ1RVUkVcblxuICAvLyBCeSBkZWZhdWx0LCB1cGRhdGVzIHRoYXQgc3RhcnQgYW5kIGVuZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbGluZVxuICAvLyBhcmUgdHJlYXRlZCBzcGVjaWFsbHksIGluIG9yZGVyIHRvIG1ha2UgdGhlIGFzc29jaWF0aW9uIG9mIGxpbmVcbiAgLy8gd2lkZ2V0cyBhbmQgbWFya2VyIGVsZW1lbnRzIHdpdGggdGhlIHRleHQgYmVoYXZlIG1vcmUgaW50dWl0aXZlLlxuICBmdW5jdGlvbiBpc1dob2xlTGluZVVwZGF0ZShkb2MsIGNoYW5nZSkge1xuICAgIHJldHVybiBjaGFuZ2UuZnJvbS5jaCA9PSAwICYmIGNoYW5nZS50by5jaCA9PSAwICYmIGxzdChjaGFuZ2UudGV4dCkgPT0gXCJcIiAmJlxuICAgICAgKCFkb2MuY20gfHwgZG9jLmNtLm9wdGlvbnMud2hvbGVMaW5lVXBkYXRlQmVmb3JlKTtcbiAgfVxuXG4gIC8vIFBlcmZvcm0gYSBjaGFuZ2Ugb24gdGhlIGRvY3VtZW50IGRhdGEgc3RydWN0dXJlLlxuICBmdW5jdGlvbiB1cGRhdGVEb2MoZG9jLCBjaGFuZ2UsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIGZ1bmN0aW9uIHNwYW5zRm9yKG4pIHtyZXR1cm4gbWFya2VkU3BhbnMgPyBtYXJrZWRTcGFuc1tuXSA6IG51bGw7fVxuICAgIGZ1bmN0aW9uIHVwZGF0ZShsaW5lLCB0ZXh0LCBzcGFucykge1xuICAgICAgdXBkYXRlTGluZShsaW5lLCB0ZXh0LCBzcGFucywgZXN0aW1hdGVIZWlnaHQpO1xuICAgICAgc2lnbmFsTGF0ZXIobGluZSwgXCJjaGFuZ2VcIiwgbGluZSwgY2hhbmdlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGluZXNGb3Ioc3RhcnQsIGVuZCkge1xuICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0LCByZXN1bHQgPSBbXTsgaSA8IGVuZDsgKytpKVxuICAgICAgICByZXN1bHQucHVzaChuZXcgTGluZSh0ZXh0W2ldLCBzcGFuc0ZvcihpKSwgZXN0aW1hdGVIZWlnaHQpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbSwgdG8gPSBjaGFuZ2UudG8sIHRleHQgPSBjaGFuZ2UudGV4dDtcbiAgICB2YXIgZmlyc3RMaW5lID0gZ2V0TGluZShkb2MsIGZyb20ubGluZSksIGxhc3RMaW5lID0gZ2V0TGluZShkb2MsIHRvLmxpbmUpO1xuICAgIHZhciBsYXN0VGV4dCA9IGxzdCh0ZXh0KSwgbGFzdFNwYW5zID0gc3BhbnNGb3IodGV4dC5sZW5ndGggLSAxKSwgbmxpbmVzID0gdG8ubGluZSAtIGZyb20ubGluZTtcblxuICAgIC8vIEFkanVzdCB0aGUgbGluZSBzdHJ1Y3R1cmVcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHtcbiAgICAgIGRvYy5pbnNlcnQoMCwgbGluZXNGb3IoMCwgdGV4dC5sZW5ndGgpKTtcbiAgICAgIGRvYy5yZW1vdmUodGV4dC5sZW5ndGgsIGRvYy5zaXplIC0gdGV4dC5sZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpKSB7XG4gICAgICAvLyBUaGlzIGlzIGEgd2hvbGUtbGluZSByZXBsYWNlLiBUcmVhdGVkIHNwZWNpYWxseSB0byBtYWtlXG4gICAgICAvLyBzdXJlIGxpbmUgb2JqZWN0cyBtb3ZlIHRoZSB3YXkgdGhleSBhcmUgc3VwcG9zZWQgdG8uXG4gICAgICB2YXIgYWRkZWQgPSBsaW5lc0ZvcigwLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0TGluZS50ZXh0LCBsYXN0U3BhbnMpO1xuICAgICAgaWYgKG5saW5lcykgZG9jLnJlbW92ZShmcm9tLmxpbmUsIG5saW5lcyk7XG4gICAgICBpZiAoYWRkZWQubGVuZ3RoKSBkb2MuaW5zZXJ0KGZyb20ubGluZSwgYWRkZWQpO1xuICAgIH0gZWxzZSBpZiAoZmlyc3RMaW5lID09IGxhc3RMaW5lKSB7XG4gICAgICBpZiAodGV4dC5sZW5ndGggPT0gMSkge1xuICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIGxhc3RUZXh0ICsgZmlyc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBsYXN0U3BhbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFkZGVkID0gbGluZXNGb3IoMSwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgICAgYWRkZWQucHVzaChuZXcgTGluZShsYXN0VGV4dCArIGZpcnN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkpO1xuICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTtcbiAgICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0ZXh0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0gKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgc3BhbnNGb3IoMCkpO1xuICAgICAgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTtcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdFRleHQgKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zKTtcbiAgICAgIHZhciBhZGRlZCA9IGxpbmVzRm9yKDEsIHRleHQubGVuZ3RoIC0gMSk7XG4gICAgICBpZiAobmxpbmVzID4gMSkgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMgLSAxKTtcbiAgICAgIGRvYy5pbnNlcnQoZnJvbS5saW5lICsgMSwgYWRkZWQpO1xuICAgIH1cblxuICAgIHNpZ25hbExhdGVyKGRvYywgXCJjaGFuZ2VcIiwgZG9jLCBjaGFuZ2UpO1xuICB9XG5cbiAgLy8gVGhlIGRvY3VtZW50IGlzIHJlcHJlc2VudGVkIGFzIGEgQlRyZWUgY29uc2lzdGluZyBvZiBsZWF2ZXMsIHdpdGhcbiAgLy8gY2h1bmsgb2YgbGluZXMgaW4gdGhlbSwgYW5kIGJyYW5jaGVzLCB3aXRoIHVwIHRvIHRlbiBsZWF2ZXMgb3JcbiAgLy8gb3RoZXIgYnJhbmNoIG5vZGVzIGJlbG93IHRoZW0uIFRoZSB0b3Agbm9kZSBpcyBhbHdheXMgYSBicmFuY2hcbiAgLy8gbm9kZSwgYW5kIGlzIHRoZSBkb2N1bWVudCBvYmplY3QgaXRzZWxmIChtZWFuaW5nIGl0IGhhc1xuICAvLyBhZGRpdGlvbmFsIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMpLlxuICAvL1xuICAvLyBBbGwgbm9kZXMgaGF2ZSBwYXJlbnQgbGlua3MuIFRoZSB0cmVlIGlzIHVzZWQgYm90aCB0byBnbyBmcm9tXG4gIC8vIGxpbmUgbnVtYmVycyB0byBsaW5lIG9iamVjdHMsIGFuZCB0byBnbyBmcm9tIG9iamVjdHMgdG8gbnVtYmVycy5cbiAgLy8gSXQgYWxzbyBpbmRleGVzIGJ5IGhlaWdodCwgYW5kIGlzIHVzZWQgdG8gY29udmVydCBiZXR3ZWVuIGhlaWdodFxuICAvLyBhbmQgbGluZSBvYmplY3QsIGFuZCB0byBmaW5kIHRoZSB0b3RhbCBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LlxuICAvL1xuICAvLyBTZWUgYWxzbyBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvY29kZW1pcnJvci1saW5lLXRyZWUuaHRtbFxuXG4gIGZ1bmN0aW9uIExlYWZDaHVuayhsaW5lcykge1xuICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDAsIGhlaWdodCA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgbGluZXNbaV0ucGFyZW50ID0gdGhpcztcbiAgICAgIGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7XG4gICAgfVxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgTGVhZkNodW5rLnByb3RvdHlwZSA9IHtcbiAgICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5saW5lcy5sZW5ndGg7IH0sXG4gICAgLy8gUmVtb3ZlIHRoZSBuIGxpbmVzIGF0IG9mZnNldCAnYXQnLlxuICAgIHJlbW92ZUlubmVyOiBmdW5jdGlvbihhdCwgbikge1xuICAgICAgZm9yICh2YXIgaSA9IGF0LCBlID0gYXQgKyBuOyBpIDwgZTsgKytpKSB7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcbiAgICAgICAgdGhpcy5oZWlnaHQgLT0gbGluZS5oZWlnaHQ7XG4gICAgICAgIGNsZWFuVXBMaW5lKGxpbmUpO1xuICAgICAgICBzaWduYWxMYXRlcihsaW5lLCBcImRlbGV0ZVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGluZXMuc3BsaWNlKGF0LCBuKTtcbiAgICB9LFxuICAgIC8vIEhlbHBlciB1c2VkIHRvIGNvbGxhcHNlIGEgc21hbGwgYnJhbmNoIGludG8gYSBzaW5nbGUgbGVhZi5cbiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2guYXBwbHkobGluZXMsIHRoaXMubGluZXMpO1xuICAgIH0sXG4gICAgLy8gSW5zZXJ0IHRoZSBnaXZlbiBhcnJheSBvZiBsaW5lcyBhdCBvZmZzZXQgJ2F0JywgY291bnQgdGhlbSBhc1xuICAgIC8vIGhhdmluZyB0aGUgZ2l2ZW4gaGVpZ2h0LlxuICAgIGluc2VydElubmVyOiBmdW5jdGlvbihhdCwgbGluZXMsIGhlaWdodCkge1xuICAgICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgdGhpcy5saW5lcyA9IHRoaXMubGluZXMuc2xpY2UoMCwgYXQpLmNvbmNhdChsaW5lcykuY29uY2F0KHRoaXMubGluZXMuc2xpY2UoYXQpKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIGxpbmVzW2ldLnBhcmVudCA9IHRoaXM7XG4gICAgfSxcbiAgICAvLyBVc2VkIHRvIGl0ZXJhdGUgb3ZlciBhIHBhcnQgb2YgdGhlIHRyZWUuXG4gICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkge1xuICAgICAgZm9yICh2YXIgZSA9IGF0ICsgbjsgYXQgPCBlOyArK2F0KVxuICAgICAgICBpZiAob3AodGhpcy5saW5lc1thdF0pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gQnJhbmNoQ2h1bmsoY2hpbGRyZW4pIHtcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdmFyIHNpemUgPSAwLCBoZWlnaHQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBjaCA9IGNoaWxkcmVuW2ldO1xuICAgICAgc2l6ZSArPSBjaC5jaHVua1NpemUoKTsgaGVpZ2h0ICs9IGNoLmhlaWdodDtcbiAgICAgIGNoLnBhcmVudCA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICB9XG5cbiAgQnJhbmNoQ2h1bmsucHJvdG90eXBlID0ge1xuICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnNpemU7IH0sXG4gICAgcmVtb3ZlSW5uZXI6IGZ1bmN0aW9uKGF0LCBuKSB7XG4gICAgICB0aGlzLnNpemUgLT0gbjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPCBzeikge1xuICAgICAgICAgIHZhciBybSA9IE1hdGgubWluKG4sIHN6IC0gYXQpLCBvbGRIZWlnaHQgPSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgICAgY2hpbGQucmVtb3ZlSW5uZXIoYXQsIHJtKTtcbiAgICAgICAgICB0aGlzLmhlaWdodCAtPSBvbGRIZWlnaHQgLSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgICAgaWYgKHN6ID09IHJtKSB7IHRoaXMuY2hpbGRyZW4uc3BsaWNlKGktLSwgMSk7IGNoaWxkLnBhcmVudCA9IG51bGw7IH1cbiAgICAgICAgICBpZiAoKG4gLT0gcm0pID09IDApIGJyZWFrO1xuICAgICAgICAgIGF0ID0gMDtcbiAgICAgICAgfSBlbHNlIGF0IC09IHN6O1xuICAgICAgfVxuICAgICAgLy8gSWYgdGhlIHJlc3VsdCBpcyBzbWFsbGVyIHRoYW4gMjUgbGluZXMsIGVuc3VyZSB0aGF0IGl0IGlzIGFcbiAgICAgIC8vIHNpbmdsZSBsZWFmIG5vZGUuXG4gICAgICBpZiAodGhpcy5zaXplIC0gbiA8IDI1ICYmXG4gICAgICAgICAgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID4gMSB8fCAhKHRoaXMuY2hpbGRyZW5bMF0gaW5zdGFuY2VvZiBMZWFmQ2h1bmspKSkge1xuICAgICAgICB2YXIgbGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZShsaW5lcyk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbbmV3IExlYWZDaHVuayhsaW5lcyldO1xuICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLnBhcmVudCA9IHRoaXM7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkgdGhpcy5jaGlsZHJlbltpXS5jb2xsYXBzZShsaW5lcyk7XG4gICAgfSxcbiAgICBpbnNlcnRJbm5lcjogZnVuY3Rpb24oYXQsIGxpbmVzLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuc2l6ZSArPSBsaW5lcy5sZW5ndGg7XG4gICAgICB0aGlzLmhlaWdodCArPSBoZWlnaHQ7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKGF0IDw9IHN6KSB7XG4gICAgICAgICAgY2hpbGQuaW5zZXJ0SW5uZXIoYXQsIGxpbmVzLCBoZWlnaHQpO1xuICAgICAgICAgIGlmIChjaGlsZC5saW5lcyAmJiBjaGlsZC5saW5lcy5sZW5ndGggPiA1MCkge1xuICAgICAgICAgICAgd2hpbGUgKGNoaWxkLmxpbmVzLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgICAgICAgIHZhciBzcGlsbGVkID0gY2hpbGQubGluZXMuc3BsaWNlKGNoaWxkLmxpbmVzLmxlbmd0aCAtIDI1LCAyNSk7XG4gICAgICAgICAgICAgIHZhciBuZXdsZWFmID0gbmV3IExlYWZDaHVuayhzcGlsbGVkKTtcbiAgICAgICAgICAgICAgY2hpbGQuaGVpZ2h0IC09IG5ld2xlYWYuaGVpZ2h0O1xuICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpICsgMSwgMCwgbmV3bGVhZik7XG4gICAgICAgICAgICAgIG5ld2xlYWYucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF5YmVTcGlsbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBhdCAtPSBzejtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFdoZW4gYSBub2RlIGhhcyBncm93biwgY2hlY2sgd2hldGhlciBpdCBzaG91bGQgYmUgc3BsaXQuXG4gICAgbWF5YmVTcGlsbDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggPD0gMTApIHJldHVybjtcbiAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICBkbyB7XG4gICAgICAgIHZhciBzcGlsbGVkID0gbWUuY2hpbGRyZW4uc3BsaWNlKG1lLmNoaWxkcmVuLmxlbmd0aCAtIDUsIDUpO1xuICAgICAgICB2YXIgc2libGluZyA9IG5ldyBCcmFuY2hDaHVuayhzcGlsbGVkKTtcbiAgICAgICAgaWYgKCFtZS5wYXJlbnQpIHsgLy8gQmVjb21lIHRoZSBwYXJlbnQgbm9kZVxuICAgICAgICAgIHZhciBjb3B5ID0gbmV3IEJyYW5jaENodW5rKG1lLmNoaWxkcmVuKTtcbiAgICAgICAgICBjb3B5LnBhcmVudCA9IG1lO1xuICAgICAgICAgIG1lLmNoaWxkcmVuID0gW2NvcHksIHNpYmxpbmddO1xuICAgICAgICAgIG1lID0gY29weTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZS5zaXplIC09IHNpYmxpbmcuc2l6ZTtcbiAgICAgICAgICBtZS5oZWlnaHQgLT0gc2libGluZy5oZWlnaHQ7XG4gICAgICAgICAgdmFyIG15SW5kZXggPSBpbmRleE9mKG1lLnBhcmVudC5jaGlsZHJlbiwgbWUpO1xuICAgICAgICAgIG1lLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UobXlJbmRleCArIDEsIDAsIHNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHNpYmxpbmcucGFyZW50ID0gbWUucGFyZW50O1xuICAgICAgfSB3aGlsZSAobWUuY2hpbGRyZW4ubGVuZ3RoID4gMTApO1xuICAgICAgbWUucGFyZW50Lm1heWJlU3BpbGwoKTtcbiAgICB9LFxuICAgIGl0ZXJOOiBmdW5jdGlvbihhdCwgbiwgb3ApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPCBzeikge1xuICAgICAgICAgIHZhciB1c2VkID0gTWF0aC5taW4obiwgc3ogLSBhdCk7XG4gICAgICAgICAgaWYgKGNoaWxkLml0ZXJOKGF0LCB1c2VkLCBvcCkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIGlmICgobiAtPSB1c2VkKSA9PSAwKSBicmVhaztcbiAgICAgICAgICBhdCA9IDA7XG4gICAgICAgIH0gZWxzZSBhdCAtPSBzejtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIG5leHREb2NJZCA9IDA7XG4gIHZhciBEb2MgPSBDb2RlTWlycm9yLkRvYyA9IGZ1bmN0aW9uKHRleHQsIG1vZGUsIGZpcnN0TGluZSwgbGluZVNlcCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEb2MpKSByZXR1cm4gbmV3IERvYyh0ZXh0LCBtb2RlLCBmaXJzdExpbmUsIGxpbmVTZXApO1xuICAgIGlmIChmaXJzdExpbmUgPT0gbnVsbCkgZmlyc3RMaW5lID0gMDtcblxuICAgIEJyYW5jaENodW5rLmNhbGwodGhpcywgW25ldyBMZWFmQ2h1bmsoW25ldyBMaW5lKFwiXCIsIG51bGwpXSldKTtcbiAgICB0aGlzLmZpcnN0ID0gZmlyc3RMaW5lO1xuICAgIHRoaXMuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxMZWZ0ID0gMDtcbiAgICB0aGlzLmNhbnRFZGl0ID0gZmFsc2U7XG4gICAgdGhpcy5jbGVhbkdlbmVyYXRpb24gPSAxO1xuICAgIHRoaXMuZnJvbnRpZXIgPSBmaXJzdExpbmU7XG4gICAgdmFyIHN0YXJ0ID0gUG9zKGZpcnN0TGluZSwgMCk7XG4gICAgdGhpcy5zZWwgPSBzaW1wbGVTZWxlY3Rpb24oc3RhcnQpO1xuICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KG51bGwpO1xuICAgIHRoaXMuaWQgPSArK25leHREb2NJZDtcbiAgICB0aGlzLm1vZGVPcHRpb24gPSBtb2RlO1xuICAgIHRoaXMubGluZVNlcCA9IGxpbmVTZXA7XG4gICAgdGhpcy5leHRlbmQgPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgdGV4dCA9PSBcInN0cmluZ1wiKSB0ZXh0ID0gdGhpcy5zcGxpdExpbmVzKHRleHQpO1xuICAgIHVwZGF0ZURvYyh0aGlzLCB7ZnJvbTogc3RhcnQsIHRvOiBzdGFydCwgdGV4dDogdGV4dH0pO1xuICAgIHNldFNlbGVjdGlvbih0aGlzLCBzaW1wbGVTZWxlY3Rpb24oc3RhcnQpLCBzZWxfZG9udFNjcm9sbCk7XG4gIH07XG5cbiAgRG9jLnByb3RvdHlwZSA9IGNyZWF0ZU9iaihCcmFuY2hDaHVuay5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3RvcjogRG9jLFxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgZG9jdW1lbnQuIFN1cHBvcnRzIHR3byBmb3JtcyAtLSB3aXRoIG9ubHkgb25lXG4gICAgLy8gYXJndW1lbnQsIGl0IGNhbGxzIHRoYXQgZm9yIGVhY2ggbGluZSBpbiB0aGUgZG9jdW1lbnQuIFdpdGhcbiAgICAvLyB0aHJlZSwgaXQgaXRlcmF0ZXMgb3ZlciB0aGUgcmFuZ2UgZ2l2ZW4gYnkgdGhlIGZpcnN0IHR3byAod2l0aFxuICAgIC8vIHRoZSBzZWNvbmQgYmVpbmcgbm9uLWluY2x1c2l2ZSkuXG4gICAgaXRlcjogZnVuY3Rpb24oZnJvbSwgdG8sIG9wKSB7XG4gICAgICBpZiAob3ApIHRoaXMuaXRlck4oZnJvbSAtIHRoaXMuZmlyc3QsIHRvIC0gZnJvbSwgb3ApO1xuICAgICAgZWxzZSB0aGlzLml0ZXJOKHRoaXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUsIGZyb20pO1xuICAgIH0sXG5cbiAgICAvLyBOb24tcHVibGljIGludGVyZmFjZSBmb3IgYWRkaW5nIGFuZCByZW1vdmluZyBsaW5lcy5cbiAgICBpbnNlcnQ6IGZ1bmN0aW9uKGF0LCBsaW5lcykge1xuICAgICAgdmFyIGhlaWdodCA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSBoZWlnaHQgKz0gbGluZXNbaV0uaGVpZ2h0O1xuICAgICAgdGhpcy5pbnNlcnRJbm5lcihhdCAtIHRoaXMuZmlyc3QsIGxpbmVzLCBoZWlnaHQpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihhdCwgbikgeyB0aGlzLnJlbW92ZUlubmVyKGF0IC0gdGhpcy5maXJzdCwgbik7IH0sXG5cbiAgICAvLyBGcm9tIGhlcmUsIHRoZSBtZXRob2RzIGFyZSBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLiBNb3N0XG4gICAgLy8gYXJlIGFsc28gYXZhaWxhYmxlIGZyb20gQ29kZU1pcnJvciAoZWRpdG9yKSBpbnN0YW5jZXMuXG5cbiAgICBnZXRWYWx1ZTogZnVuY3Rpb24obGluZVNlcCkge1xuICAgICAgdmFyIGxpbmVzID0gZ2V0TGluZXModGhpcywgdGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSk7XG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcbiAgICAgIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpO1xuICAgIH0sXG4gICAgc2V0VmFsdWU6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGNvZGUpIHtcbiAgICAgIHZhciB0b3AgPSBQb3ModGhpcy5maXJzdCwgMCksIGxhc3QgPSB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMTtcbiAgICAgIG1ha2VDaGFuZ2UodGhpcywge2Zyb206IHRvcCwgdG86IFBvcyhsYXN0LCBnZXRMaW5lKHRoaXMsIGxhc3QpLnRleHQubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuc3BsaXRMaW5lcyhjb2RlKSwgb3JpZ2luOiBcInNldFZhbHVlXCIsIGZ1bGw6IHRydWV9LCB0cnVlKTtcbiAgICAgIHNldFNlbGVjdGlvbih0aGlzLCBzaW1wbGVTZWxlY3Rpb24odG9wKSk7XG4gICAgfSksXG4gICAgcmVwbGFjZVJhbmdlOiBmdW5jdGlvbihjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTtcbiAgICAgIHRvID0gdG8gPyBjbGlwUG9zKHRoaXMsIHRvKSA6IGZyb207XG4gICAgICByZXBsYWNlUmFuZ2UodGhpcywgY29kZSwgZnJvbSwgdG8sIG9yaWdpbik7XG4gICAgfSxcbiAgICBnZXRSYW5nZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxpbmVTZXApIHtcbiAgICAgIHZhciBsaW5lcyA9IGdldEJldHdlZW4odGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0bykpO1xuICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNlKSByZXR1cm4gbGluZXM7XG4gICAgICByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKTtcbiAgICB9LFxuXG4gICAgZ2V0TGluZTogZnVuY3Rpb24obGluZSkge3ZhciBsID0gdGhpcy5nZXRMaW5lSGFuZGxlKGxpbmUpOyByZXR1cm4gbCAmJiBsLnRleHQ7fSxcblxuICAgIGdldExpbmVIYW5kbGU6IGZ1bmN0aW9uKGxpbmUpIHtpZiAoaXNMaW5lKHRoaXMsIGxpbmUpKSByZXR1cm4gZ2V0TGluZSh0aGlzLCBsaW5lKTt9LFxuICAgIGdldExpbmVOdW1iZXI6IGZ1bmN0aW9uKGxpbmUpIHtyZXR1cm4gbGluZU5vKGxpbmUpO30sXG5cbiAgICBnZXRMaW5lSGFuZGxlVmlzdWFsU3RhcnQ6IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSBsaW5lID0gZ2V0TGluZSh0aGlzLCBsaW5lKTtcbiAgICAgIHJldHVybiB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIH0sXG5cbiAgICBsaW5lQ291bnQ6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnNpemU7fSxcbiAgICBmaXJzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpcnN0O30sXG4gICAgbGFzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMTt9LFxuXG4gICAgY2xpcFBvczogZnVuY3Rpb24ocG9zKSB7cmV0dXJuIGNsaXBQb3ModGhpcywgcG9zKTt9LFxuXG4gICAgZ2V0Q3Vyc29yOiBmdW5jdGlvbihzdGFydCkge1xuICAgICAgdmFyIHJhbmdlID0gdGhpcy5zZWwucHJpbWFyeSgpLCBwb3M7XG4gICAgICBpZiAoc3RhcnQgPT0gbnVsbCB8fCBzdGFydCA9PSBcImhlYWRcIikgcG9zID0gcmFuZ2UuaGVhZDtcbiAgICAgIGVsc2UgaWYgKHN0YXJ0ID09IFwiYW5jaG9yXCIpIHBvcyA9IHJhbmdlLmFuY2hvcjtcbiAgICAgIGVsc2UgaWYgKHN0YXJ0ID09IFwiZW5kXCIgfHwgc3RhcnQgPT0gXCJ0b1wiIHx8IHN0YXJ0ID09PSBmYWxzZSkgcG9zID0gcmFuZ2UudG8oKTtcbiAgICAgIGVsc2UgcG9zID0gcmFuZ2UuZnJvbSgpO1xuICAgICAgcmV0dXJuIHBvcztcbiAgICB9LFxuICAgIGxpc3RTZWxlY3Rpb25zOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2VsLnJhbmdlczsgfSxcbiAgICBzb21ldGhpbmdTZWxlY3RlZDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7fSxcblxuICAgIHNldEN1cnNvcjogZG9jTWV0aG9kT3AoZnVuY3Rpb24obGluZSwgY2gsIG9wdGlvbnMpIHtcbiAgICAgIHNldFNpbXBsZVNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIgPyBQb3MobGluZSwgY2ggfHwgMCkgOiBsaW5lKSwgbnVsbCwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgc2V0U2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcbiAgICAgIHNldFNpbXBsZVNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywgaGVhZCB8fCBhbmNob3IpLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBleHRlbmRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWQsIG90aGVyLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb24odGhpcywgY2xpcFBvcyh0aGlzLCBoZWFkKSwgb3RoZXIgJiYgY2xpcFBvcyh0aGlzLCBvdGhlciksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWRzLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbnNCeTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oZiwgb3B0aW9ucykge1xuICAgICAgdmFyIGhlYWRzID0gbWFwKHRoaXMuc2VsLnJhbmdlcywgZik7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIHNldFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlcywgcHJpbWFyeSwgb3B0aW9ucykge1xuICAgICAgaWYgKCFyYW5nZXMubGVuZ3RoKSByZXR1cm47XG4gICAgICBmb3IgKHZhciBpID0gMCwgb3V0ID0gW107IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShjbGlwUG9zKHRoaXMsIHJhbmdlc1tpXS5hbmNob3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyh0aGlzLCByYW5nZXNbaV0uaGVhZCkpO1xuICAgICAgaWYgKHByaW1hcnkgPT0gbnVsbCkgcHJpbWFyeSA9IE1hdGgubWluKHJhbmdlcy5sZW5ndGggLSAxLCB0aGlzLnNlbC5wcmltSW5kZXgpO1xuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIHByaW1hcnkpLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBhZGRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICAgIHJhbmdlcy5wdXNoKG5ldyBSYW5nZShjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywgaGVhZCB8fCBhbmNob3IpKSk7XG4gICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgcmFuZ2VzLmxlbmd0aCAtIDEpLCBvcHRpb25zKTtcbiAgICB9KSxcblxuICAgIGdldFNlbGVjdGlvbjogZnVuY3Rpb24obGluZVNlcCkge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcywgbGluZXM7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc2VsID0gZ2V0QmV0d2Vlbih0aGlzLCByYW5nZXNbaV0uZnJvbSgpLCByYW5nZXNbaV0udG8oKSk7XG4gICAgICAgIGxpbmVzID0gbGluZXMgPyBsaW5lcy5jb25jYXQoc2VsKSA6IHNlbDtcbiAgICAgIH1cbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgcmV0dXJuIGxpbmVzO1xuICAgICAgZWxzZSByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKTtcbiAgICB9LFxuICAgIGdldFNlbGVjdGlvbnM6IGZ1bmN0aW9uKGxpbmVTZXApIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdLCByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXM7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc2VsID0gZ2V0QmV0d2Vlbih0aGlzLCByYW5nZXNbaV0uZnJvbSgpLCByYW5nZXNbaV0udG8oKSk7XG4gICAgICAgIGlmIChsaW5lU2VwICE9PSBmYWxzZSkgc2VsID0gc2VsLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSk7XG4gICAgICAgIHBhcnRzW2ldID0gc2VsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnRzO1xuICAgIH0sXG4gICAgcmVwbGFjZVNlbGVjdGlvbjogZnVuY3Rpb24oY29kZSwgY29sbGFwc2UsIG9yaWdpbikge1xuICAgICAgdmFyIGR1cCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIGR1cFtpXSA9IGNvZGU7XG4gICAgICB0aGlzLnJlcGxhY2VTZWxlY3Rpb25zKGR1cCwgY29sbGFwc2UsIG9yaWdpbiB8fCBcIitpbnB1dFwiKTtcbiAgICB9LFxuICAgIHJlcGxhY2VTZWxlY3Rpb25zOiBkb2NNZXRob2RPcChmdW5jdGlvbihjb2RlLCBjb2xsYXBzZSwgb3JpZ2luKSB7XG4gICAgICB2YXIgY2hhbmdlcyA9IFtdLCBzZWwgPSB0aGlzLnNlbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgICBjaGFuZ2VzW2ldID0ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCksIHRleHQ6IHRoaXMuc3BsaXRMaW5lcyhjb2RlW2ldKSwgb3JpZ2luOiBvcmlnaW59O1xuICAgICAgfVxuICAgICAgdmFyIG5ld1NlbCA9IGNvbGxhcHNlICYmIGNvbGxhcHNlICE9IFwiZW5kXCIgJiYgY29tcHV0ZVJlcGxhY2VkU2VsKHRoaXMsIGNoYW5nZXMsIGNvbGxhcHNlKTtcbiAgICAgIGZvciAodmFyIGkgPSBjaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBtYWtlQ2hhbmdlKHRoaXMsIGNoYW5nZXNbaV0pO1xuICAgICAgaWYgKG5ld1NlbCkgc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkodGhpcywgbmV3U2VsKTtcbiAgICAgIGVsc2UgaWYgKHRoaXMuY20pIGVuc3VyZUN1cnNvclZpc2libGUodGhpcy5jbSk7XG4gICAgfSksXG4gICAgdW5kbzogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwidW5kb1wiKTt9KSxcbiAgICByZWRvOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJyZWRvXCIpO30pLFxuICAgIHVuZG9TZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInVuZG9cIiwgdHJ1ZSk7fSksXG4gICAgcmVkb1NlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwicmVkb1wiLCB0cnVlKTt9KSxcblxuICAgIHNldEV4dGVuZGluZzogZnVuY3Rpb24odmFsKSB7dGhpcy5leHRlbmQgPSB2YWw7fSxcbiAgICBnZXRFeHRlbmRpbmc6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmV4dGVuZDt9LFxuXG4gICAgaGlzdG9yeVNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGhpc3QgPSB0aGlzLmhpc3RvcnksIGRvbmUgPSAwLCB1bmRvbmUgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaXN0LmRvbmUubGVuZ3RoOyBpKyspIGlmICghaGlzdC5kb25lW2ldLnJhbmdlcykgKytkb25lO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaXN0LnVuZG9uZS5sZW5ndGg7IGkrKykgaWYgKCFoaXN0LnVuZG9uZVtpXS5yYW5nZXMpICsrdW5kb25lO1xuICAgICAgcmV0dXJuIHt1bmRvOiBkb25lLCByZWRvOiB1bmRvbmV9O1xuICAgIH0sXG4gICAgY2xlYXJIaXN0b3J5OiBmdW5jdGlvbigpIHt0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbik7fSxcblxuICAgIG1hcmtDbGVhbjogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IHRoaXMuY2hhbmdlR2VuZXJhdGlvbih0cnVlKTtcbiAgICB9LFxuICAgIGNoYW5nZUdlbmVyYXRpb246IGZ1bmN0aW9uKGZvcmNlU3BsaXQpIHtcbiAgICAgIGlmIChmb3JjZVNwbGl0KVxuICAgICAgICB0aGlzLmhpc3RvcnkubGFzdE9wID0gdGhpcy5oaXN0b3J5Lmxhc3RTZWxPcCA9IHRoaXMuaGlzdG9yeS5sYXN0T3JpZ2luID0gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbjtcbiAgICB9LFxuICAgIGlzQ2xlYW46IGZ1bmN0aW9uIChnZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbiA9PSAoZ2VuIHx8IHRoaXMuY2xlYW5HZW5lcmF0aW9uKTtcbiAgICB9LFxuXG4gICAgZ2V0SGlzdG9yeTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge2RvbmU6IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LmRvbmUpLFxuICAgICAgICAgICAgICB1bmRvbmU6IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LnVuZG9uZSl9O1xuICAgIH0sXG4gICAgc2V0SGlzdG9yeTogZnVuY3Rpb24oaGlzdERhdGEpIHtcbiAgICAgIHZhciBoaXN0ID0gdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkodGhpcy5oaXN0b3J5Lm1heEdlbmVyYXRpb24pO1xuICAgICAgaGlzdC5kb25lID0gY29weUhpc3RvcnlBcnJheShoaXN0RGF0YS5kb25lLnNsaWNlKDApLCBudWxsLCB0cnVlKTtcbiAgICAgIGhpc3QudW5kb25lID0gY29weUhpc3RvcnlBcnJheShoaXN0RGF0YS51bmRvbmUuc2xpY2UoMCksIG51bGwsIHRydWUpO1xuICAgIH0sXG5cbiAgICBhZGRMaW5lQ2xhc3M6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgd2hlcmUsIGNscykge1xuICAgICAgcmV0dXJuIGNoYW5nZUxpbmUodGhpcywgaGFuZGxlLCB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJcIiA6IFwiY2xhc3NcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJDbGFzc1wiIDogXCJ3cmFwQ2xhc3NcIjtcbiAgICAgICAgaWYgKCFsaW5lW3Byb3BdKSBsaW5lW3Byb3BdID0gY2xzO1xuICAgICAgICBlbHNlIGlmIChjbGFzc1Rlc3QoY2xzKS50ZXN0KGxpbmVbcHJvcF0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGVsc2UgbGluZVtwcm9wXSArPSBcIiBcIiArIGNscztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9KSxcbiAgICByZW1vdmVMaW5lQ2xhc3M6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgd2hlcmUsIGNscykge1xuICAgICAgcmV0dXJuIGNoYW5nZUxpbmUodGhpcywgaGFuZGxlLCB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJcIiA6IFwiY2xhc3NcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJDbGFzc1wiIDogXCJ3cmFwQ2xhc3NcIjtcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVbcHJvcF07XG4gICAgICAgIGlmICghY3VyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGNscyA9PSBudWxsKSBsaW5lW3Byb3BdID0gbnVsbDtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gY3VyLm1hdGNoKGNsYXNzVGVzdChjbHMpKTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgdmFyIGVuZCA9IGZvdW5kLmluZGV4ICsgZm91bmRbMF0ubGVuZ3RoO1xuICAgICAgICAgIGxpbmVbcHJvcF0gPSBjdXIuc2xpY2UoMCwgZm91bmQuaW5kZXgpICsgKCFmb3VuZC5pbmRleCB8fCBlbmQgPT0gY3VyLmxlbmd0aCA/IFwiXCIgOiBcIiBcIikgKyBjdXIuc2xpY2UoZW5kKSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBhZGRMaW5lV2lkZ2V0OiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBhZGRMaW5lV2lkZ2V0KHRoaXMsIGhhbmRsZSwgbm9kZSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgcmVtb3ZlTGluZVdpZGdldDogZnVuY3Rpb24od2lkZ2V0KSB7IHdpZGdldC5jbGVhcigpOyB9LFxuXG4gICAgbWFya1RleHQ6IGZ1bmN0aW9uKGZyb20sIHRvLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gbWFya1RleHQodGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0byksIG9wdGlvbnMsIG9wdGlvbnMgJiYgb3B0aW9ucy50eXBlIHx8IFwicmFuZ2VcIik7XG4gICAgfSxcbiAgICBzZXRCb29rbWFyazogZnVuY3Rpb24ocG9zLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVhbE9wdHMgPSB7cmVwbGFjZWRXaXRoOiBvcHRpb25zICYmIChvcHRpb25zLm5vZGVUeXBlID09IG51bGwgPyBvcHRpb25zLndpZGdldCA6IG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgICAgICAgIGluc2VydExlZnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnNlcnRMZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgIGNsZWFyV2hlbkVtcHR5OiBmYWxzZSwgc2hhcmVkOiBvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkLFxuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1vdXNlRXZlbnRzOiBvcHRpb25zICYmIG9wdGlvbnMuaGFuZGxlTW91c2VFdmVudHN9O1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIHBvcywgcG9zLCByZWFsT3B0cywgXCJib29rbWFya1wiKTtcbiAgICB9LFxuICAgIGZpbmRNYXJrc0F0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIHBvcyA9IGNsaXBQb3ModGhpcywgcG9zKTtcbiAgICAgIHZhciBtYXJrZXJzID0gW10sIHNwYW5zID0gZ2V0TGluZSh0aGlzLCBwb3MubGluZSkubWFya2VkU3BhbnM7XG4gICAgICBpZiAoc3BhbnMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgICAgaWYgKChzcGFuLmZyb20gPT0gbnVsbCB8fCBzcGFuLmZyb20gPD0gcG9zLmNoKSAmJlxuICAgICAgICAgICAgKHNwYW4udG8gPT0gbnVsbCB8fCBzcGFuLnRvID49IHBvcy5jaCkpXG4gICAgICAgICAgbWFya2Vycy5wdXNoKHNwYW4ubWFya2VyLnBhcmVudCB8fCBzcGFuLm1hcmtlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFya2VycztcbiAgICB9LFxuICAgIGZpbmRNYXJrczogZnVuY3Rpb24oZnJvbSwgdG8sIGZpbHRlcikge1xuICAgICAgZnJvbSA9IGNsaXBQb3ModGhpcywgZnJvbSk7IHRvID0gY2xpcFBvcyh0aGlzLCB0byk7XG4gICAgICB2YXIgZm91bmQgPSBbXSwgbGluZU5vID0gZnJvbS5saW5lO1xuICAgICAgdGhpcy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgdmFyIHNwYW5zID0gbGluZS5tYXJrZWRTcGFucztcbiAgICAgICAgaWYgKHNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgICAgICBpZiAoIShzcGFuLnRvICE9IG51bGwgJiYgbGluZU5vID09IGZyb20ubGluZSAmJiBmcm9tLmNoID49IHNwYW4udG8gfHxcbiAgICAgICAgICAgICAgICBzcGFuLmZyb20gPT0gbnVsbCAmJiBsaW5lTm8gIT0gZnJvbS5saW5lIHx8XG4gICAgICAgICAgICAgICAgc3Bhbi5mcm9tICE9IG51bGwgJiYgbGluZU5vID09IHRvLmxpbmUgJiYgc3Bhbi5mcm9tID49IHRvLmNoKSAmJlxuICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXIoc3Bhbi5tYXJrZXIpKSlcbiAgICAgICAgICAgIGZvdW5kLnB1c2goc3Bhbi5tYXJrZXIucGFyZW50IHx8IHNwYW4ubWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG4gICAgZ2V0QWxsTWFya3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzcHMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgICBpZiAoc3BzKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICBpZiAoc3BzW2ldLmZyb20gIT0gbnVsbCkgbWFya2Vycy5wdXNoKHNwc1tpXS5tYXJrZXIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWFya2VycztcbiAgICB9LFxuXG4gICAgcG9zRnJvbUluZGV4OiBmdW5jdGlvbihvZmYpIHtcbiAgICAgIHZhciBjaCwgbGluZU5vID0gdGhpcy5maXJzdCwgc2VwU2l6ZSA9IHRoaXMubGluZVNlcGFyYXRvcigpLmxlbmd0aDtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzeiA9IGxpbmUudGV4dC5sZW5ndGggKyBzZXBTaXplO1xuICAgICAgICBpZiAoc3ogPiBvZmYpIHsgY2ggPSBvZmY7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIG9mZiAtPSBzejtcbiAgICAgICAgKytsaW5lTm87XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjbGlwUG9zKHRoaXMsIFBvcyhsaW5lTm8sIGNoKSk7XG4gICAgfSxcbiAgICBpbmRleEZyb21Qb3M6IGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgIGNvb3JkcyA9IGNsaXBQb3ModGhpcywgY29vcmRzKTtcbiAgICAgIHZhciBpbmRleCA9IGNvb3Jkcy5jaDtcbiAgICAgIGlmIChjb29yZHMubGluZSA8IHRoaXMuZmlyc3QgfHwgY29vcmRzLmNoIDwgMCkgcmV0dXJuIDA7XG4gICAgICB2YXIgc2VwU2l6ZSA9IHRoaXMubGluZVNlcGFyYXRvcigpLmxlbmd0aDtcbiAgICAgIHRoaXMuaXRlcih0aGlzLmZpcnN0LCBjb29yZHMubGluZSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgaW5kZXggKz0gbGluZS50ZXh0Lmxlbmd0aCArIHNlcFNpemU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9LFxuXG4gICAgY29weTogZnVuY3Rpb24oY29weUhpc3RvcnkpIHtcbiAgICAgIHZhciBkb2MgPSBuZXcgRG9jKGdldExpbmVzKHRoaXMsIHRoaXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlT3B0aW9uLCB0aGlzLmZpcnN0LCB0aGlzLmxpbmVTZXApO1xuICAgICAgZG9jLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsVG9wOyBkb2Muc2Nyb2xsTGVmdCA9IHRoaXMuc2Nyb2xsTGVmdDtcbiAgICAgIGRvYy5zZWwgPSB0aGlzLnNlbDtcbiAgICAgIGRvYy5leHRlbmQgPSBmYWxzZTtcbiAgICAgIGlmIChjb3B5SGlzdG9yeSkge1xuICAgICAgICBkb2MuaGlzdG9yeS51bmRvRGVwdGggPSB0aGlzLmhpc3RvcnkudW5kb0RlcHRoO1xuICAgICAgICBkb2Muc2V0SGlzdG9yeSh0aGlzLmdldEhpc3RvcnkoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9jO1xuICAgIH0sXG5cbiAgICBsaW5rZWREb2M6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgICAgdmFyIGZyb20gPSB0aGlzLmZpcnN0LCB0byA9IHRoaXMuZmlyc3QgKyB0aGlzLnNpemU7XG4gICAgICBpZiAob3B0aW9ucy5mcm9tICE9IG51bGwgJiYgb3B0aW9ucy5mcm9tID4gZnJvbSkgZnJvbSA9IG9wdGlvbnMuZnJvbTtcbiAgICAgIGlmIChvcHRpb25zLnRvICE9IG51bGwgJiYgb3B0aW9ucy50byA8IHRvKSB0byA9IG9wdGlvbnMudG87XG4gICAgICB2YXIgY29weSA9IG5ldyBEb2MoZ2V0TGluZXModGhpcywgZnJvbSwgdG8pLCBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlT3B0aW9uLCBmcm9tLCB0aGlzLmxpbmVTZXApO1xuICAgICAgaWYgKG9wdGlvbnMuc2hhcmVkSGlzdCkgY29weS5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5O1xuICAgICAgKHRoaXMubGlua2VkIHx8ICh0aGlzLmxpbmtlZCA9IFtdKSkucHVzaCh7ZG9jOiBjb3B5LCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9KTtcbiAgICAgIGNvcHkubGlua2VkID0gW3tkb2M6IHRoaXMsIGlzUGFyZW50OiB0cnVlLCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9XTtcbiAgICAgIGNvcHlTaGFyZWRNYXJrZXJzKGNvcHksIGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMpKTtcbiAgICAgIHJldHVybiBjb3B5O1xuICAgIH0sXG4gICAgdW5saW5rRG9jOiBmdW5jdGlvbihvdGhlcikge1xuICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQ29kZU1pcnJvcikgb3RoZXIgPSBvdGhlci5kb2M7XG4gICAgICBpZiAodGhpcy5saW5rZWQpIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5rZWQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmsgPSB0aGlzLmxpbmtlZFtpXTtcbiAgICAgICAgaWYgKGxpbmsuZG9jICE9IG90aGVyKSBjb250aW51ZTtcbiAgICAgICAgdGhpcy5saW5rZWQuc3BsaWNlKGksIDEpO1xuICAgICAgICBvdGhlci51bmxpbmtEb2ModGhpcyk7XG4gICAgICAgIGRldGFjaFNoYXJlZE1hcmtlcnMoZmluZFNoYXJlZE1hcmtlcnModGhpcykpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSBoaXN0b3JpZXMgd2VyZSBzaGFyZWQsIHNwbGl0IHRoZW0gYWdhaW5cbiAgICAgIGlmIChvdGhlci5oaXN0b3J5ID09IHRoaXMuaGlzdG9yeSkge1xuICAgICAgICB2YXIgc3BsaXRJZHMgPSBbb3RoZXIuaWRdO1xuICAgICAgICBsaW5rZWREb2NzKG90aGVyLCBmdW5jdGlvbihkb2MpIHtzcGxpdElkcy5wdXNoKGRvYy5pZCk7fSwgdHJ1ZSk7XG4gICAgICAgIG90aGVyLmhpc3RvcnkgPSBuZXcgSGlzdG9yeShudWxsKTtcbiAgICAgICAgb3RoZXIuaGlzdG9yeS5kb25lID0gY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkuZG9uZSwgc3BsaXRJZHMpO1xuICAgICAgICBvdGhlci5oaXN0b3J5LnVuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LnVuZG9uZSwgc3BsaXRJZHMpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaXRlckxpbmtlZERvY3M6IGZ1bmN0aW9uKGYpIHtsaW5rZWREb2NzKHRoaXMsIGYpO30sXG5cbiAgICBnZXRNb2RlOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5tb2RlO30sXG4gICAgZ2V0RWRpdG9yOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5jbTt9LFxuXG4gICAgc3BsaXRMaW5lczogZnVuY3Rpb24oc3RyKSB7XG4gICAgICBpZiAodGhpcy5saW5lU2VwKSByZXR1cm4gc3RyLnNwbGl0KHRoaXMubGluZVNlcCk7XG4gICAgICByZXR1cm4gc3BsaXRMaW5lc0F1dG8oc3RyKTtcbiAgICB9LFxuICAgIGxpbmVTZXBhcmF0b3I6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5saW5lU2VwIHx8IFwiXFxuXCI7IH1cbiAgfSk7XG5cbiAgLy8gUHVibGljIGFsaWFzLlxuICBEb2MucHJvdG90eXBlLmVhY2hMaW5lID0gRG9jLnByb3RvdHlwZS5pdGVyO1xuXG4gIC8vIFNldCB1cCBtZXRob2RzIG9uIENvZGVNaXJyb3IncyBwcm90b3R5cGUgdG8gcmVkaXJlY3QgdG8gdGhlIGVkaXRvcidzIGRvY3VtZW50LlxuICB2YXIgZG9udERlbGVnYXRlID0gXCJpdGVyIGluc2VydCByZW1vdmUgY29weSBnZXRFZGl0b3IgY29uc3RydWN0b3JcIi5zcGxpdChcIiBcIik7XG4gIGZvciAodmFyIHByb3AgaW4gRG9jLnByb3RvdHlwZSkgaWYgKERvYy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgaW5kZXhPZihkb250RGVsZWdhdGUsIHByb3ApIDwgMClcbiAgICBDb2RlTWlycm9yLnByb3RvdHlwZVtwcm9wXSA9IChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtyZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMuZG9jLCBhcmd1bWVudHMpO307XG4gICAgfSkoRG9jLnByb3RvdHlwZVtwcm9wXSk7XG5cbiAgZXZlbnRNaXhpbihEb2MpO1xuXG4gIC8vIENhbGwgZiBmb3IgYWxsIGxpbmtlZCBkb2N1bWVudHMuXG4gIGZ1bmN0aW9uIGxpbmtlZERvY3MoZG9jLCBmLCBzaGFyZWRIaXN0T25seSkge1xuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZShkb2MsIHNraXAsIHNoYXJlZEhpc3QpIHtcbiAgICAgIGlmIChkb2MubGlua2VkKSBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHJlbCA9IGRvYy5saW5rZWRbaV07XG4gICAgICAgIGlmIChyZWwuZG9jID09IHNraXApIGNvbnRpbnVlO1xuICAgICAgICB2YXIgc2hhcmVkID0gc2hhcmVkSGlzdCAmJiByZWwuc2hhcmVkSGlzdDtcbiAgICAgICAgaWYgKHNoYXJlZEhpc3RPbmx5ICYmICFzaGFyZWQpIGNvbnRpbnVlO1xuICAgICAgICBmKHJlbC5kb2MsIHNoYXJlZCk7XG4gICAgICAgIHByb3BhZ2F0ZShyZWwuZG9jLCBkb2MsIHNoYXJlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHByb3BhZ2F0ZShkb2MsIG51bGwsIHRydWUpO1xuICB9XG5cbiAgLy8gQXR0YWNoIGEgZG9jdW1lbnQgdG8gYW4gZWRpdG9yLlxuICBmdW5jdGlvbiBhdHRhY2hEb2MoY20sIGRvYykge1xuICAgIGlmIChkb2MuY20pIHRocm93IG5ldyBFcnJvcihcIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuXCIpO1xuICAgIGNtLmRvYyA9IGRvYztcbiAgICBkb2MuY20gPSBjbTtcbiAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKTtcbiAgICBsb2FkTW9kZShjbSk7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgZmluZE1heExpbmUoY20pO1xuICAgIGNtLm9wdGlvbnMubW9kZSA9IGRvYy5tb2RlT3B0aW9uO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gIH1cblxuICAvLyBMSU5FIFVUSUxJVElFU1xuXG4gIC8vIEZpbmQgdGhlIGxpbmUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLlxuICBmdW5jdGlvbiBnZXRMaW5lKGRvYywgbikge1xuICAgIG4gLT0gZG9jLmZpcnN0O1xuICAgIGlmIChuIDwgMCB8fCBuID49IGRvYy5zaXplKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBsaW5lIFwiICsgKG4gKyBkb2MuZmlyc3QpICsgXCIgaW4gdGhlIGRvY3VtZW50LlwiKTtcbiAgICBmb3IgKHZhciBjaHVuayA9IGRvYzsgIWNodW5rLmxpbmVzOykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2h1bmsuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChuIDwgc3opIHsgY2h1bmsgPSBjaGlsZDsgYnJlYWs7IH1cbiAgICAgICAgbiAtPSBzejtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNodW5rLmxpbmVzW25dO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBwYXJ0IG9mIGEgZG9jdW1lbnQgYmV0d2VlbiB0d28gcG9zaXRpb25zLCBhcyBhbiBhcnJheSBvZlxuICAvLyBzdHJpbmdzLlxuICBmdW5jdGlvbiBnZXRCZXR3ZWVuKGRvYywgc3RhcnQsIGVuZCkge1xuICAgIHZhciBvdXQgPSBbXSwgbiA9IHN0YXJ0LmxpbmU7XG4gICAgZG9jLml0ZXIoc3RhcnQubGluZSwgZW5kLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgdGV4dCA9IGxpbmUudGV4dDtcbiAgICAgIGlmIChuID09IGVuZC5saW5lKSB0ZXh0ID0gdGV4dC5zbGljZSgwLCBlbmQuY2gpO1xuICAgICAgaWYgKG4gPT0gc3RhcnQubGluZSkgdGV4dCA9IHRleHQuc2xpY2Uoc3RhcnQuY2gpO1xuICAgICAgb3V0LnB1c2godGV4dCk7XG4gICAgICArK247XG4gICAgfSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICAvLyBHZXQgdGhlIGxpbmVzIGJldHdlZW4gZnJvbSBhbmQgdG8sIGFzIGFycmF5IG9mIHN0cmluZ3MuXG4gIGZ1bmN0aW9uIGdldExpbmVzKGRvYywgZnJvbSwgdG8pIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZG9jLml0ZXIoZnJvbSwgdG8sIGZ1bmN0aW9uKGxpbmUpIHsgb3V0LnB1c2gobGluZS50ZXh0KTsgfSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgaGVpZ2h0IG9mIGEgbGluZSwgcHJvcGFnYXRpbmcgdGhlIGhlaWdodCBjaGFuZ2VcbiAgLy8gdXB3YXJkcyB0byBwYXJlbnQgbm9kZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgaGVpZ2h0KSB7XG4gICAgdmFyIGRpZmYgPSBoZWlnaHQgLSBsaW5lLmhlaWdodDtcbiAgICBpZiAoZGlmZikgZm9yICh2YXIgbiA9IGxpbmU7IG47IG4gPSBuLnBhcmVudCkgbi5oZWlnaHQgKz0gZGlmZjtcbiAgfVxuXG4gIC8vIEdpdmVuIGEgbGluZSBvYmplY3QsIGZpbmQgaXRzIGxpbmUgbnVtYmVyIGJ5IHdhbGtpbmcgdXAgdGhyb3VnaFxuICAvLyBpdHMgcGFyZW50IGxpbmtzLlxuICBmdW5jdGlvbiBsaW5lTm8obGluZSkge1xuICAgIGlmIChsaW5lLnBhcmVudCA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgY3VyID0gbGluZS5wYXJlbnQsIG5vID0gaW5kZXhPZihjdXIubGluZXMsIGxpbmUpO1xuICAgIGZvciAodmFyIGNodW5rID0gY3VyLnBhcmVudDsgY2h1bms7IGN1ciA9IGNodW5rLCBjaHVuayA9IGNodW5rLnBhcmVudCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHtcbiAgICAgICAgaWYgKGNodW5rLmNoaWxkcmVuW2ldID09IGN1cikgYnJlYWs7XG4gICAgICAgIG5vICs9IGNodW5rLmNoaWxkcmVuW2ldLmNodW5rU2l6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm8gKyBjdXIuZmlyc3Q7XG4gIH1cblxuICAvLyBGaW5kIHRoZSBsaW5lIGF0IHRoZSBnaXZlbiB2ZXJ0aWNhbCBwb3NpdGlvbiwgdXNpbmcgdGhlIGhlaWdodFxuICAvLyBpbmZvcm1hdGlvbiBpbiB0aGUgZG9jdW1lbnQgdHJlZS5cbiAgZnVuY3Rpb24gbGluZUF0SGVpZ2h0KGNodW5rLCBoKSB7XG4gICAgdmFyIG4gPSBjaHVuay5maXJzdDtcbiAgICBvdXRlcjogZG8ge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaHVuay5jaGlsZHJlbltpXSwgY2ggPSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgIGlmIChoIDwgY2gpIHsgY2h1bmsgPSBjaGlsZDsgY29udGludWUgb3V0ZXI7IH1cbiAgICAgICAgaCAtPSBjaDtcbiAgICAgICAgbiArPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuO1xuICAgIH0gd2hpbGUgKCFjaHVuay5saW5lcyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXSwgbGggPSBsaW5lLmhlaWdodDtcbiAgICAgIGlmIChoIDwgbGgpIGJyZWFrO1xuICAgICAgaCAtPSBsaDtcbiAgICB9XG4gICAgcmV0dXJuIG4gKyBpO1xuICB9XG5cblxuICAvLyBGaW5kIHRoZSBoZWlnaHQgYWJvdmUgdGhlIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIGhlaWdodEF0TGluZShsaW5lT2JqKSB7XG4gICAgbGluZU9iaiA9IHZpc3VhbExpbmUobGluZU9iaik7XG5cbiAgICB2YXIgaCA9IDAsIGNodW5rID0gbGluZU9iai5wYXJlbnQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXTtcbiAgICAgIGlmIChsaW5lID09IGxpbmVPYmopIGJyZWFrO1xuICAgICAgZWxzZSBoICs9IGxpbmUuaGVpZ2h0O1xuICAgIH1cbiAgICBmb3IgKHZhciBwID0gY2h1bmsucGFyZW50OyBwOyBjaHVuayA9IHAsIHAgPSBjaHVuay5wYXJlbnQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VyID0gcC5jaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKGN1ciA9PSBjaHVuaykgYnJlYWs7XG4gICAgICAgIGVsc2UgaCArPSBjdXIuaGVpZ2h0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaDtcbiAgfVxuXG4gIC8vIEdldCB0aGUgYmlkaSBvcmRlcmluZyBmb3IgdGhlIGdpdmVuIGxpbmUgKGFuZCBjYWNoZSBpdCkuIFJldHVybnNcbiAgLy8gZmFsc2UgZm9yIGxpbmVzIHRoYXQgYXJlIGZ1bGx5IGxlZnQtdG8tcmlnaHQsIGFuZCBhbiBhcnJheSBvZlxuICAvLyBCaWRpU3BhbiBvYmplY3RzIG90aGVyd2lzZS5cbiAgZnVuY3Rpb24gZ2V0T3JkZXIobGluZSkge1xuICAgIHZhciBvcmRlciA9IGxpbmUub3JkZXI7XG4gICAgaWYgKG9yZGVyID09IG51bGwpIG9yZGVyID0gbGluZS5vcmRlciA9IGJpZGlPcmRlcmluZyhsaW5lLnRleHQpO1xuICAgIHJldHVybiBvcmRlcjtcbiAgfVxuXG4gIC8vIEhJU1RPUllcblxuICBmdW5jdGlvbiBIaXN0b3J5KHN0YXJ0R2VuKSB7XG4gICAgLy8gQXJyYXlzIG9mIGNoYW5nZSBldmVudHMgYW5kIHNlbGVjdGlvbnMuIERvaW5nIHNvbWV0aGluZyBhZGRzIGFuXG4gICAgLy8gZXZlbnQgdG8gZG9uZSBhbmQgY2xlYXJzIHVuZG8uIFVuZG9pbmcgbW92ZXMgZXZlbnRzIGZyb20gZG9uZVxuICAgIC8vIHRvIHVuZG9uZSwgcmVkb2luZyBtb3ZlcyB0aGVtIGluIHRoZSBvdGhlciBkaXJlY3Rpb24uXG4gICAgdGhpcy5kb25lID0gW107IHRoaXMudW5kb25lID0gW107XG4gICAgdGhpcy51bmRvRGVwdGggPSBJbmZpbml0eTtcbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZW4gY2hhbmdlcyBjYW4gYmUgbWVyZ2VkIGludG8gYSBzaW5nbGUgdW5kb1xuICAgIC8vIGV2ZW50XG4gICAgdGhpcy5sYXN0TW9kVGltZSA9IHRoaXMubGFzdFNlbFRpbWUgPSAwO1xuICAgIHRoaXMubGFzdE9wID0gdGhpcy5sYXN0U2VsT3AgPSBudWxsO1xuICAgIHRoaXMubGFzdE9yaWdpbiA9IHRoaXMubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgLy8gVXNlZCBieSB0aGUgaXNDbGVhbigpIG1ldGhvZFxuICAgIHRoaXMuZ2VuZXJhdGlvbiA9IHRoaXMubWF4R2VuZXJhdGlvbiA9IHN0YXJ0R2VuIHx8IDE7XG4gIH1cblxuICAvLyBDcmVhdGUgYSBoaXN0b3J5IGNoYW5nZSBldmVudCBmcm9tIGFuIHVwZGF0ZURvYy1zdHlsZSBjaGFuZ2VcbiAgLy8gb2JqZWN0LlxuICBmdW5jdGlvbiBoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBoaXN0Q2hhbmdlID0ge2Zyb206IGNvcHlQb3MoY2hhbmdlLmZyb20pLCB0bzogY2hhbmdlRW5kKGNoYW5nZSksIHRleHQ6IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKX07XG4gICAgYXR0YWNoTG9jYWxTcGFucyhkb2MsIGhpc3RDaGFuZ2UsIGNoYW5nZS5mcm9tLmxpbmUsIGNoYW5nZS50by5saW5lICsgMSk7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uKGRvYykge2F0dGFjaExvY2FsU3BhbnMoZG9jLCBoaXN0Q2hhbmdlLCBjaGFuZ2UuZnJvbS5saW5lLCBjaGFuZ2UudG8ubGluZSArIDEpO30sIHRydWUpO1xuICAgIHJldHVybiBoaXN0Q2hhbmdlO1xuICB9XG5cbiAgLy8gUG9wIGFsbCBzZWxlY3Rpb24gZXZlbnRzIG9mZiB0aGUgZW5kIG9mIGEgaGlzdG9yeSBhcnJheS4gU3RvcCBhdFxuICAvLyBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25FdmVudHMoYXJyYXkpIHtcbiAgICB3aGlsZSAoYXJyYXkubGVuZ3RoKSB7XG4gICAgICB2YXIgbGFzdCA9IGxzdChhcnJheSk7XG4gICAgICBpZiAobGFzdC5yYW5nZXMpIGFycmF5LnBvcCgpO1xuICAgICAgZWxzZSBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIHRoZSB0b3AgY2hhbmdlIGV2ZW50IGluIHRoZSBoaXN0b3J5LiBQb3Agb2ZmIHNlbGVjdGlvblxuICAvLyBldmVudHMgdGhhdCBhcmUgaW4gdGhlIHdheS5cbiAgZnVuY3Rpb24gbGFzdENoYW5nZUV2ZW50KGhpc3QsIGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlKSB7XG4gICAgICBjbGVhclNlbGVjdGlvbkV2ZW50cyhoaXN0LmRvbmUpO1xuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpO1xuICAgIH0gZWxzZSBpZiAoaGlzdC5kb25lLmxlbmd0aCAmJiAhbHN0KGhpc3QuZG9uZSkucmFuZ2VzKSB7XG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSk7XG4gICAgfSBlbHNlIGlmIChoaXN0LmRvbmUubGVuZ3RoID4gMSAmJiAhaGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAyXS5yYW5nZXMpIHtcbiAgICAgIGhpc3QuZG9uZS5wb3AoKTtcbiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25lKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZWdpc3RlciBhIGNoYW5nZSBpbiB0aGUgaGlzdG9yeS4gTWVyZ2VzIGNoYW5nZXMgdGhhdCBhcmUgd2l0aGluXG4gIC8vIGEgc2luZ2xlIG9wZXJhdGlvbiwgb3JlIGFyZSBjbG9zZSB0b2dldGhlciB3aXRoIGFuIG9yaWdpbiB0aGF0XG4gIC8vIGFsbG93cyBtZXJnaW5nIChzdGFydGluZyB3aXRoIFwiK1wiKSBpbnRvIGEgc2luZ2xlIGV2ZW50LlxuICBmdW5jdGlvbiBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBvcElkKSB7XG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeTtcbiAgICBoaXN0LnVuZG9uZS5sZW5ndGggPSAwO1xuICAgIHZhciB0aW1lID0gK25ldyBEYXRlLCBjdXI7XG5cbiAgICBpZiAoKGhpc3QubGFzdE9wID09IG9wSWQgfHxcbiAgICAgICAgIGhpc3QubGFzdE9yaWdpbiA9PSBjaGFuZ2Uub3JpZ2luICYmIGNoYW5nZS5vcmlnaW4gJiZcbiAgICAgICAgICgoY2hhbmdlLm9yaWdpbi5jaGFyQXQoMCkgPT0gXCIrXCIgJiYgZG9jLmNtICYmIGhpc3QubGFzdE1vZFRpbWUgPiB0aW1lIC0gZG9jLmNtLm9wdGlvbnMuaGlzdG9yeUV2ZW50RGVsYXkpIHx8XG4gICAgICAgICAgY2hhbmdlLm9yaWdpbi5jaGFyQXQoMCkgPT0gXCIqXCIpKSAmJlxuICAgICAgICAoY3VyID0gbGFzdENoYW5nZUV2ZW50KGhpc3QsIGhpc3QubGFzdE9wID09IG9wSWQpKSkge1xuICAgICAgLy8gTWVyZ2UgdGhpcyBjaGFuZ2UgaW50byB0aGUgbGFzdCBldmVudFxuICAgICAgdmFyIGxhc3QgPSBsc3QoY3VyLmNoYW5nZXMpO1xuICAgICAgaWYgKGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwICYmIGNtcChjaGFuZ2UuZnJvbSwgbGFzdC50bykgPT0gMCkge1xuICAgICAgICAvLyBPcHRpbWl6ZWQgY2FzZSBmb3Igc2ltcGxlIGluc2VydGlvbiAtLSBkb24ndCB3YW50IHRvIGFkZFxuICAgICAgICAvLyBuZXcgY2hhbmdlc2V0cyBmb3IgZXZlcnkgY2hhcmFjdGVyIHR5cGVkXG4gICAgICAgIGxhc3QudG8gPSBjaGFuZ2VFbmQoY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCBuZXcgc3ViLWV2ZW50XG4gICAgICAgIGN1ci5jaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FuIG5vdCBiZSBtZXJnZWQsIHN0YXJ0IGEgbmV3IGV2ZW50LlxuICAgICAgdmFyIGJlZm9yZSA9IGxzdChoaXN0LmRvbmUpO1xuICAgICAgaWYgKCFiZWZvcmUgfHwgIWJlZm9yZS5yYW5nZXMpXG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLnNlbCwgaGlzdC5kb25lKTtcbiAgICAgIGN1ciA9IHtjaGFuZ2VzOiBbaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpXSxcbiAgICAgICAgICAgICBnZW5lcmF0aW9uOiBoaXN0LmdlbmVyYXRpb259O1xuICAgICAgaGlzdC5kb25lLnB1c2goY3VyKTtcbiAgICAgIHdoaWxlIChoaXN0LmRvbmUubGVuZ3RoID4gaGlzdC51bmRvRGVwdGgpIHtcbiAgICAgICAgaGlzdC5kb25lLnNoaWZ0KCk7XG4gICAgICAgIGlmICghaGlzdC5kb25lWzBdLnJhbmdlcykgaGlzdC5kb25lLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGhpc3QuZG9uZS5wdXNoKHNlbEFmdGVyKTtcbiAgICBoaXN0LmdlbmVyYXRpb24gPSArK2hpc3QubWF4R2VuZXJhdGlvbjtcbiAgICBoaXN0Lmxhc3RNb2RUaW1lID0gaGlzdC5sYXN0U2VsVGltZSA9IHRpbWU7XG4gICAgaGlzdC5sYXN0T3AgPSBoaXN0Lmxhc3RTZWxPcCA9IG9wSWQ7XG4gICAgaGlzdC5sYXN0T3JpZ2luID0gaGlzdC5sYXN0U2VsT3JpZ2luID0gY2hhbmdlLm9yaWdpbjtcblxuICAgIGlmICghbGFzdCkgc2lnbmFsKGRvYywgXCJoaXN0b3J5QWRkZWRcIik7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBwcmV2LCBzZWwpIHtcbiAgICB2YXIgY2ggPSBvcmlnaW4uY2hhckF0KDApO1xuICAgIHJldHVybiBjaCA9PSBcIipcIiB8fFxuICAgICAgY2ggPT0gXCIrXCIgJiZcbiAgICAgIHByZXYucmFuZ2VzLmxlbmd0aCA9PSBzZWwucmFuZ2VzLmxlbmd0aCAmJlxuICAgICAgcHJldi5zb21ldGhpbmdTZWxlY3RlZCgpID09IHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpICYmXG4gICAgICBuZXcgRGF0ZSAtIGRvYy5oaXN0b3J5Lmxhc3RTZWxUaW1lIDw9IChkb2MuY20gPyBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMCk7XG4gIH1cblxuICAvLyBDYWxsZWQgd2hlbmV2ZXIgdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLCBzZXRzIHRoZSBuZXcgc2VsZWN0aW9uIGFzXG4gIC8vIHRoZSBwZW5kaW5nIHNlbGVjdGlvbiBpbiB0aGUgaGlzdG9yeSwgYW5kIHB1c2hlcyB0aGUgb2xkIHBlbmRpbmdcbiAgLy8gc2VsZWN0aW9uIGludG8gdGhlICdkb25lJyBhcnJheSB3aGVuIGl0IHdhcyBzaWduaWZpY2FudGx5XG4gIC8vIGRpZmZlcmVudCAoaW4gbnVtYmVyIG9mIHNlbGVjdGVkIHJhbmdlcywgZW1wdGluZXNzLCBvciB0aW1lKS5cbiAgZnVuY3Rpb24gYWRkU2VsZWN0aW9uVG9IaXN0b3J5KGRvYywgc2VsLCBvcElkLCBvcHRpb25zKSB7XG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeSwgb3JpZ2luID0gb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpbjtcblxuICAgIC8vIEEgbmV3IGV2ZW50IGlzIHN0YXJ0ZWQgd2hlbiB0aGUgcHJldmlvdXMgb3JpZ2luIGRvZXMgbm90IG1hdGNoXG4gICAgLy8gdGhlIGN1cnJlbnQsIG9yIHRoZSBvcmlnaW5zIGRvbid0IGFsbG93IG1hdGNoaW5nLiBPcmlnaW5zXG4gICAgLy8gc3RhcnRpbmcgd2l0aCAqIGFyZSBhbHdheXMgbWVyZ2VkLCB0aG9zZSBzdGFydGluZyB3aXRoICsgYXJlXG4gICAgLy8gbWVyZ2VkIHdoZW4gc2ltaWxhciBhbmQgY2xvc2UgdG9nZXRoZXIgaW4gdGltZS5cbiAgICBpZiAob3BJZCA9PSBoaXN0Lmxhc3RTZWxPcCB8fFxuICAgICAgICAob3JpZ2luICYmIGhpc3QubGFzdFNlbE9yaWdpbiA9PSBvcmlnaW4gJiZcbiAgICAgICAgIChoaXN0Lmxhc3RNb2RUaW1lID09IGhpc3QubGFzdFNlbFRpbWUgJiYgaGlzdC5sYXN0T3JpZ2luID09IG9yaWdpbiB8fFxuICAgICAgICAgIHNlbGVjdGlvbkV2ZW50Q2FuQmVNZXJnZWQoZG9jLCBvcmlnaW4sIGxzdChoaXN0LmRvbmUpLCBzZWwpKSkpXG4gICAgICBoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDFdID0gc2VsO1xuICAgIGVsc2VcbiAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3Rvcnkoc2VsLCBoaXN0LmRvbmUpO1xuXG4gICAgaGlzdC5sYXN0U2VsVGltZSA9ICtuZXcgRGF0ZTtcbiAgICBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBvcmlnaW47XG4gICAgaGlzdC5sYXN0U2VsT3AgPSBvcElkO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY2xlYXJSZWRvICE9PSBmYWxzZSlcbiAgICAgIGNsZWFyU2VsZWN0aW9uRXZlbnRzKGhpc3QudW5kb25lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1c2hTZWxlY3Rpb25Ub0hpc3Rvcnkoc2VsLCBkZXN0KSB7XG4gICAgdmFyIHRvcCA9IGxzdChkZXN0KTtcbiAgICBpZiAoISh0b3AgJiYgdG9wLnJhbmdlcyAmJiB0b3AuZXF1YWxzKHNlbCkpKVxuICAgICAgZGVzdC5wdXNoKHNlbCk7XG4gIH1cblxuICAvLyBVc2VkIHRvIHN0b3JlIG1hcmtlZCBzcGFuIGluZm9ybWF0aW9uIGluIHRoZSBoaXN0b3J5LlxuICBmdW5jdGlvbiBhdHRhY2hMb2NhbFNwYW5zKGRvYywgY2hhbmdlLCBmcm9tLCB0bykge1xuICAgIHZhciBleGlzdGluZyA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXSwgbiA9IDA7XG4gICAgZG9jLml0ZXIoTWF0aC5tYXgoZG9jLmZpcnN0LCBmcm9tKSwgTWF0aC5taW4oZG9jLmZpcnN0ICsgZG9jLnNpemUsIHRvKSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmUubWFya2VkU3BhbnMpXG4gICAgICAgIChleGlzdGluZyB8fCAoZXhpc3RpbmcgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF0gPSB7fSkpW25dID0gbGluZS5tYXJrZWRTcGFucztcbiAgICAgICsrbjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdoZW4gdW4vcmUtZG9pbmcgcmVzdG9yZXMgdGV4dCBjb250YWluaW5nIG1hcmtlZCBzcGFucywgdGhvc2VcbiAgLy8gdGhhdCBoYXZlIGJlZW4gZXhwbGljaXRseSBjbGVhcmVkIHNob3VsZCBub3QgYmUgcmVzdG9yZWQuXG4gIGZ1bmN0aW9uIHJlbW92ZUNsZWFyZWRTcGFucyhzcGFucykge1xuICAgIGlmICghc3BhbnMpIHJldHVybiBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwLCBvdXQ7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHNwYW5zW2ldLm1hcmtlci5leHBsaWNpdGx5Q2xlYXJlZCkgeyBpZiAoIW91dCkgb3V0ID0gc3BhbnMuc2xpY2UoMCwgaSk7IH1cbiAgICAgIGVsc2UgaWYgKG91dCkgb3V0LnB1c2goc3BhbnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gIW91dCA/IHNwYW5zIDogb3V0Lmxlbmd0aCA/IG91dCA6IG51bGw7XG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhbmQgZmlsdGVyIHRoZSBvbGQgbWFya2VkIHNwYW5zIHN0b3JlZCBpbiBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgZm91bmQgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF07XG4gICAgaWYgKCFmb3VuZCkgcmV0dXJuIG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDAsIG53ID0gW107IGkgPCBjaGFuZ2UudGV4dC5sZW5ndGg7ICsraSlcbiAgICAgIG53LnB1c2gocmVtb3ZlQ2xlYXJlZFNwYW5zKGZvdW5kW2ldKSk7XG4gICAgcmV0dXJuIG53O1xuICB9XG5cbiAgLy8gVXNlZCBib3RoIHRvIHByb3ZpZGUgYSBKU09OLXNhZmUgb2JqZWN0IGluIC5nZXRIaXN0b3J5LCBhbmQsIHdoZW5cbiAgLy8gZGV0YWNoaW5nIGEgZG9jdW1lbnQsIHRvIHNwbGl0IHRoZSBoaXN0b3J5IGluIHR3b1xuICBmdW5jdGlvbiBjb3B5SGlzdG9yeUFycmF5KGV2ZW50cywgbmV3R3JvdXAsIGluc3RhbnRpYXRlU2VsKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGNvcHkgPSBbXTsgaSA8IGV2ZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGV2ZW50ID0gZXZlbnRzW2ldO1xuICAgICAgaWYgKGV2ZW50LnJhbmdlcykge1xuICAgICAgICBjb3B5LnB1c2goaW5zdGFudGlhdGVTZWwgPyBTZWxlY3Rpb24ucHJvdG90eXBlLmRlZXBDb3B5LmNhbGwoZXZlbnQpIDogZXZlbnQpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGFuZ2VzID0gZXZlbnQuY2hhbmdlcywgbmV3Q2hhbmdlcyA9IFtdO1xuICAgICAgY29weS5wdXNoKHtjaGFuZ2VzOiBuZXdDaGFuZ2VzfSk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYW5nZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbal0sIG07XG4gICAgICAgIG5ld0NoYW5nZXMucHVzaCh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2UudG8sIHRleHQ6IGNoYW5nZS50ZXh0fSk7XG4gICAgICAgIGlmIChuZXdHcm91cCkgZm9yICh2YXIgcHJvcCBpbiBjaGFuZ2UpIGlmIChtID0gcHJvcC5tYXRjaCgvXnNwYW5zXyhcXGQrKSQvKSkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG5ld0dyb3VwLCBOdW1iZXIobVsxXSkpID4gLTEpIHtcbiAgICAgICAgICAgIGxzdChuZXdDaGFuZ2VzKVtwcm9wXSA9IGNoYW5nZVtwcm9wXTtcbiAgICAgICAgICAgIGRlbGV0ZSBjaGFuZ2VbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xuICB9XG5cbiAgLy8gUmViYXNpbmcvcmVzZXR0aW5nIGhpc3RvcnkgdG8gZGVhbCB3aXRoIGV4dGVybmFsbHktc291cmNlZCBjaGFuZ2VzXG5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdFNlbFNpbmdsZShwb3MsIGZyb20sIHRvLCBkaWZmKSB7XG4gICAgaWYgKHRvIDwgcG9zLmxpbmUpIHtcbiAgICAgIHBvcy5saW5lICs9IGRpZmY7XG4gICAgfSBlbHNlIGlmIChmcm9tIDwgcG9zLmxpbmUpIHtcbiAgICAgIHBvcy5saW5lID0gZnJvbTtcbiAgICAgIHBvcy5jaCA9IDA7XG4gICAgfVxuICB9XG5cbiAgLy8gVHJpZXMgdG8gcmViYXNlIGFuIGFycmF5IG9mIGhpc3RvcnkgZXZlbnRzIGdpdmVuIGEgY2hhbmdlIGluIHRoZVxuICAvLyBkb2N1bWVudC4gSWYgdGhlIGNoYW5nZSB0b3VjaGVzIHRoZSBzYW1lIGxpbmVzIGFzIHRoZSBldmVudCwgdGhlXG4gIC8vIGV2ZW50LCBhbmQgZXZlcnl0aGluZyAnYmVoaW5kJyBpdCwgaXMgZGlzY2FyZGVkLiBJZiB0aGUgY2hhbmdlIGlzXG4gIC8vIGJlZm9yZSB0aGUgZXZlbnQsIHRoZSBldmVudCdzIHBvc2l0aW9ucyBhcmUgdXBkYXRlZC4gVXNlcyBhXG4gIC8vIGNvcHktb24td3JpdGUgc2NoZW1lIGZvciB0aGUgcG9zaXRpb25zLCB0byBhdm9pZCBoYXZpbmcgdG9cbiAgLy8gcmVhbGxvY2F0ZSB0aGVtIGFsbCBvbiBldmVyeSByZWJhc2UsIGJ1dCBhbHNvIGF2b2lkIHByb2JsZW1zIHdpdGhcbiAgLy8gc2hhcmVkIHBvc2l0aW9uIG9iamVjdHMgYmVpbmcgdW5zYWZlbHkgdXBkYXRlZC5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdEFycmF5KGFycmF5LCBmcm9tLCB0bywgZGlmZikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzdWIgPSBhcnJheVtpXSwgb2sgPSB0cnVlO1xuICAgICAgaWYgKHN1Yi5yYW5nZXMpIHtcbiAgICAgICAgaWYgKCFzdWIuY29waWVkKSB7IHN1YiA9IGFycmF5W2ldID0gc3ViLmRlZXBDb3B5KCk7IHN1Yi5jb3BpZWQgPSB0cnVlOyB9XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViLnJhbmdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5hbmNob3IsIGZyb20sIHRvLCBkaWZmKTtcbiAgICAgICAgICByZWJhc2VIaXN0U2VsU2luZ2xlKHN1Yi5yYW5nZXNbal0uaGVhZCwgZnJvbSwgdG8sIGRpZmYpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdWIuY2hhbmdlcy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgY3VyID0gc3ViLmNoYW5nZXNbal07XG4gICAgICAgIGlmICh0byA8IGN1ci5mcm9tLmxpbmUpIHtcbiAgICAgICAgICBjdXIuZnJvbSA9IFBvcyhjdXIuZnJvbS5saW5lICsgZGlmZiwgY3VyLmZyb20uY2gpO1xuICAgICAgICAgIGN1ci50byA9IFBvcyhjdXIudG8ubGluZSArIGRpZmYsIGN1ci50by5jaCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBjdXIudG8ubGluZSkge1xuICAgICAgICAgIG9rID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghb2spIHtcbiAgICAgICAgYXJyYXkuc3BsaWNlKDAsIGkgKyAxKTtcbiAgICAgICAgaSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdChoaXN0LCBjaGFuZ2UpIHtcbiAgICB2YXIgZnJvbSA9IGNoYW5nZS5mcm9tLmxpbmUsIHRvID0gY2hhbmdlLnRvLmxpbmUsIGRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8gLSBmcm9tKSAtIDE7XG4gICAgcmViYXNlSGlzdEFycmF5KGhpc3QuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xuICAgIHJlYmFzZUhpc3RBcnJheShoaXN0LnVuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xuICB9XG5cbiAgLy8gRVZFTlQgVVRJTElUSUVTXG5cbiAgLy8gRHVlIHRvIHRoZSBmYWN0IHRoYXQgd2Ugc3RpbGwgc3VwcG9ydCBqdXJhc3NpYyBJRSB2ZXJzaW9ucywgc29tZVxuICAvLyBjb21wYXRpYmlsaXR5IHdyYXBwZXJzIGFyZSBuZWVkZWQuXG5cbiAgdmFyIGVfcHJldmVudERlZmF1bHQgPSBDb2RlTWlycm9yLmVfcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgfTtcbiAgdmFyIGVfc3RvcFByb3BhZ2F0aW9uID0gQ29kZU1pcnJvci5lX3N0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZWxzZSBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gIH07XG4gIGZ1bmN0aW9uIGVfZGVmYXVsdFByZXZlbnRlZChlKSB7XG4gICAgcmV0dXJuIGUuZGVmYXVsdFByZXZlbnRlZCAhPSBudWxsID8gZS5kZWZhdWx0UHJldmVudGVkIDogZS5yZXR1cm5WYWx1ZSA9PSBmYWxzZTtcbiAgfVxuICB2YXIgZV9zdG9wID0gQ29kZU1pcnJvci5lX3N0b3AgPSBmdW5jdGlvbihlKSB7ZV9wcmV2ZW50RGVmYXVsdChlKTsgZV9zdG9wUHJvcGFnYXRpb24oZSk7fTtcblxuICBmdW5jdGlvbiBlX3RhcmdldChlKSB7cmV0dXJuIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDt9XG4gIGZ1bmN0aW9uIGVfYnV0dG9uKGUpIHtcbiAgICB2YXIgYiA9IGUud2hpY2g7XG4gICAgaWYgKGIgPT0gbnVsbCkge1xuICAgICAgaWYgKGUuYnV0dG9uICYgMSkgYiA9IDE7XG4gICAgICBlbHNlIGlmIChlLmJ1dHRvbiAmIDIpIGIgPSAzO1xuICAgICAgZWxzZSBpZiAoZS5idXR0b24gJiA0KSBiID0gMjtcbiAgICB9XG4gICAgaWYgKG1hYyAmJiBlLmN0cmxLZXkgJiYgYiA9PSAxKSBiID0gMztcbiAgICByZXR1cm4gYjtcbiAgfVxuXG4gIC8vIEVWRU5UIEhBTkRMSU5HXG5cbiAgLy8gTGlnaHR3ZWlnaHQgZXZlbnQgZnJhbWV3b3JrLiBvbi9vZmYgYWxzbyB3b3JrIG9uIERPTSBub2RlcyxcbiAgLy8gcmVnaXN0ZXJpbmcgbmF0aXZlIERPTSBoYW5kbGVycy5cblxuICB2YXIgb24gPSBDb2RlTWlycm9yLm9uID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSwgZikge1xuICAgIGlmIChlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIpXG4gICAgICBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuICAgIGVsc2UgaWYgKGVtaXR0ZXIuYXR0YWNoRXZlbnQpXG4gICAgICBlbWl0dGVyLmF0dGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgIGVsc2Uge1xuICAgICAgdmFyIG1hcCA9IGVtaXR0ZXIuX2hhbmRsZXJzIHx8IChlbWl0dGVyLl9oYW5kbGVycyA9IHt9KTtcbiAgICAgIHZhciBhcnIgPSBtYXBbdHlwZV0gfHwgKG1hcFt0eXBlXSA9IFtdKTtcbiAgICAgIGFyci5wdXNoKGYpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgbm9IYW5kbGVycyA9IFtdXG4gIGZ1bmN0aW9uIGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUsIGNvcHkpIHtcbiAgICB2YXIgYXJyID0gZW1pdHRlci5faGFuZGxlcnMgJiYgZW1pdHRlci5faGFuZGxlcnNbdHlwZV1cbiAgICBpZiAoY29weSkgcmV0dXJuIGFyciAmJiBhcnIubGVuZ3RoID4gMCA/IGFyci5zbGljZSgpIDogbm9IYW5kbGVyc1xuICAgIGVsc2UgcmV0dXJuIGFyciB8fCBub0hhbmRsZXJzXG4gIH1cblxuICB2YXIgb2ZmID0gQ29kZU1pcnJvci5vZmYgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlLCBmKSB7XG4gICAgaWYgKGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcilcbiAgICAgIGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XG4gICAgZWxzZSBpZiAoZW1pdHRlci5kZXRhY2hFdmVudClcbiAgICAgIGVtaXR0ZXIuZGV0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgZWxzZSB7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlLCBmYWxzZSlcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpXG4gICAgICAgIGlmIChoYW5kbGVyc1tpXSA9PSBmKSB7IGhhbmRsZXJzLnNwbGljZShpLCAxKTsgYnJlYWs7IH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHNpZ25hbCA9IENvZGVNaXJyb3Iuc2lnbmFsID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSAvKiwgdmFsdWVzLi4uKi8pIHtcbiAgICB2YXIgaGFuZGxlcnMgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlLCB0cnVlKVxuICAgIGlmICghaGFuZGxlcnMubGVuZ3RoKSByZXR1cm47XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpIGhhbmRsZXJzW2ldLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9O1xuXG4gIHZhciBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gbnVsbDtcblxuICAvLyBPZnRlbiwgd2Ugd2FudCB0byBzaWduYWwgZXZlbnRzIGF0IGEgcG9pbnQgd2hlcmUgd2UgYXJlIGluIHRoZVxuICAvLyBtaWRkbGUgb2Ygc29tZSB3b3JrLCBidXQgZG9uJ3Qgd2FudCB0aGUgaGFuZGxlciB0byBzdGFydCBjYWxsaW5nXG4gIC8vIG90aGVyIG1ldGhvZHMgb24gdGhlIGVkaXRvciwgd2hpY2ggbWlnaHQgYmUgaW4gYW4gaW5jb25zaXN0ZW50XG4gIC8vIHN0YXRlIG9yIHNpbXBseSBub3QgZXhwZWN0IGFueSBvdGhlciBldmVudHMgdG8gaGFwcGVuLlxuICAvLyBzaWduYWxMYXRlciBsb29rcyB3aGV0aGVyIHRoZXJlIGFyZSBhbnkgaGFuZGxlcnMsIGFuZCBzY2hlZHVsZXNcbiAgLy8gdGhlbSB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSBsYXN0IG9wZXJhdGlvbiBlbmRzLCBvciwgaWYgbm9cbiAgLy8gb3BlcmF0aW9uIGlzIGFjdGl2ZSwgd2hlbiBhIHRpbWVvdXQgZmlyZXMuXG4gIGZ1bmN0aW9uIHNpZ25hbExhdGVyKGVtaXR0ZXIsIHR5cGUgLyosIHZhbHVlcy4uLiovKSB7XG4gICAgdmFyIGFyciA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUsIGZhbHNlKVxuICAgIGlmICghYXJyLmxlbmd0aCkgcmV0dXJuO1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwgbGlzdDtcbiAgICBpZiAob3BlcmF0aW9uR3JvdXApIHtcbiAgICAgIGxpc3QgPSBvcGVyYXRpb25Hcm91cC5kZWxheWVkQ2FsbGJhY2tzO1xuICAgIH0gZWxzZSBpZiAob3JwaGFuRGVsYXllZENhbGxiYWNrcykge1xuICAgICAgbGlzdCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3QgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gW107XG4gICAgICBzZXRUaW1lb3V0KGZpcmVPcnBoYW5EZWxheWVkLCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYm5kKGYpIHtyZXR1cm4gZnVuY3Rpb24oKXtmLmFwcGx5KG51bGwsIGFyZ3MpO307fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSlcbiAgICAgIGxpc3QucHVzaChibmQoYXJyW2ldKSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlT3JwaGFuRGVsYXllZCgpIHtcbiAgICB2YXIgZGVsYXllZCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XG4gICAgb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxheWVkLmxlbmd0aDsgKytpKSBkZWxheWVkW2ldKCk7XG4gIH1cblxuICAvLyBUaGUgRE9NIGV2ZW50cyB0aGF0IENvZGVNaXJyb3IgaGFuZGxlcyBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICAvLyByZWdpc3RlcmluZyBhIChub24tRE9NKSBoYW5kbGVyIG9uIHRoZSBlZGl0b3IgZm9yIHRoZSBldmVudCBuYW1lLFxuICAvLyBhbmQgcHJldmVudERlZmF1bHQtaW5nIHRoZSBldmVudCBpbiB0aGF0IGhhbmRsZXIuXG4gIGZ1bmN0aW9uIHNpZ25hbERPTUV2ZW50KGNtLCBlLCBvdmVycmlkZSkge1xuICAgIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiKVxuICAgICAgZSA9IHt0eXBlOiBlLCBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7IHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7IH19O1xuICAgIHNpZ25hbChjbSwgb3ZlcnJpZGUgfHwgZS50eXBlLCBjbSwgZSk7XG4gICAgcmV0dXJuIGVfZGVmYXVsdFByZXZlbnRlZChlKSB8fCBlLmNvZGVtaXJyb3JJZ25vcmU7XG4gIH1cblxuICBmdW5jdGlvbiBzaWduYWxDdXJzb3JBY3Rpdml0eShjbSkge1xuICAgIHZhciBhcnIgPSBjbS5faGFuZGxlcnMgJiYgY20uX2hhbmRsZXJzLmN1cnNvckFjdGl2aXR5O1xuICAgIGlmICghYXJyKSByZXR1cm47XG4gICAgdmFyIHNldCA9IGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgfHwgKGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgPSBbXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIGlmIChpbmRleE9mKHNldCwgYXJyW2ldKSA9PSAtMSlcbiAgICAgIHNldC5wdXNoKGFycltpXSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNIYW5kbGVyKGVtaXR0ZXIsIHR5cGUpIHtcbiAgICByZXR1cm4gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSkubGVuZ3RoID4gMFxuICB9XG5cbiAgLy8gQWRkIG9uIGFuZCBvZmYgbWV0aG9kcyB0byBhIGNvbnN0cnVjdG9yJ3MgcHJvdG90eXBlLCB0byBtYWtlXG4gIC8vIHJlZ2lzdGVyaW5nIGV2ZW50cyBvbiBzdWNoIG9iamVjdHMgbW9yZSBjb252ZW5pZW50LlxuICBmdW5jdGlvbiBldmVudE1peGluKGN0b3IpIHtcbiAgICBjdG9yLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGYpIHtvbih0aGlzLCB0eXBlLCBmKTt9O1xuICAgIGN0b3IucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKHR5cGUsIGYpIHtvZmYodGhpcywgdHlwZSwgZik7fTtcbiAgfVxuXG4gIC8vIE1JU0MgVVRJTElUSUVTXG5cbiAgLy8gTnVtYmVyIG9mIHBpeGVscyBhZGRlZCB0byBzY3JvbGxlciBhbmQgc2l6ZXIgdG8gaGlkZSBzY3JvbGxiYXJcbiAgdmFyIHNjcm9sbGVyR2FwID0gMzA7XG5cbiAgLy8gUmV0dXJuZWQgb3IgdGhyb3duIGJ5IHZhcmlvdXMgcHJvdG9jb2xzIHRvIHNpZ25hbCAnSSdtIG5vdFxuICAvLyBoYW5kbGluZyB0aGlzJy5cbiAgdmFyIFBhc3MgPSBDb2RlTWlycm9yLlBhc3MgPSB7dG9TdHJpbmc6IGZ1bmN0aW9uKCl7cmV0dXJuIFwiQ29kZU1pcnJvci5QYXNzXCI7fX07XG5cbiAgLy8gUmV1c2VkIG9wdGlvbiBvYmplY3RzIGZvciBzZXRTZWxlY3Rpb24gJiBmcmllbmRzXG4gIHZhciBzZWxfZG9udFNjcm9sbCA9IHtzY3JvbGw6IGZhbHNlfSwgc2VsX21vdXNlID0ge29yaWdpbjogXCIqbW91c2VcIn0sIHNlbF9tb3ZlID0ge29yaWdpbjogXCIrbW92ZVwifTtcblxuICBmdW5jdGlvbiBEZWxheWVkKCkge3RoaXMuaWQgPSBudWxsO31cbiAgRGVsYXllZC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obXMsIGYpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5pZCk7XG4gICAgdGhpcy5pZCA9IHNldFRpbWVvdXQoZiwgbXMpO1xuICB9O1xuXG4gIC8vIENvdW50cyB0aGUgY29sdW1uIG9mZnNldCBpbiBhIHN0cmluZywgdGFraW5nIHRhYnMgaW50byBhY2NvdW50LlxuICAvLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxuICB2YXIgY291bnRDb2x1bW4gPSBDb2RlTWlycm9yLmNvdW50Q29sdW1uID0gZnVuY3Rpb24oc3RyaW5nLCBlbmQsIHRhYlNpemUsIHN0YXJ0SW5kZXgsIHN0YXJ0VmFsdWUpIHtcbiAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgIGVuZCA9IHN0cmluZy5zZWFyY2goL1teXFxzXFx1MDBhMF0vKTtcbiAgICAgIGlmIChlbmQgPT0gLTEpIGVuZCA9IHN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIG4gPSBzdGFydFZhbHVlIHx8IDA7Oykge1xuICAgICAgdmFyIG5leHRUYWIgPSBzdHJpbmcuaW5kZXhPZihcIlxcdFwiLCBpKTtcbiAgICAgIGlmIChuZXh0VGFiIDwgMCB8fCBuZXh0VGFiID49IGVuZClcbiAgICAgICAgcmV0dXJuIG4gKyAoZW5kIC0gaSk7XG4gICAgICBuICs9IG5leHRUYWIgLSBpO1xuICAgICAgbiArPSB0YWJTaXplIC0gKG4gJSB0YWJTaXplKTtcbiAgICAgIGkgPSBuZXh0VGFiICsgMTtcbiAgICB9XG4gIH07XG5cbiAgLy8gVGhlIGludmVyc2Ugb2YgY291bnRDb2x1bW4gLS0gZmluZCB0aGUgb2Zmc2V0IHRoYXQgY29ycmVzcG9uZHMgdG9cbiAgLy8gYSBwYXJ0aWN1bGFyIGNvbHVtbi5cbiAgdmFyIGZpbmRDb2x1bW4gPSBDb2RlTWlycm9yLmZpbmRDb2x1bW4gPSBmdW5jdGlvbihzdHJpbmcsIGdvYWwsIHRhYlNpemUpIHtcbiAgICBmb3IgKHZhciBwb3MgPSAwLCBjb2wgPSAwOzspIHtcbiAgICAgIHZhciBuZXh0VGFiID0gc3RyaW5nLmluZGV4T2YoXCJcXHRcIiwgcG9zKTtcbiAgICAgIGlmIChuZXh0VGFiID09IC0xKSBuZXh0VGFiID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIHZhciBza2lwcGVkID0gbmV4dFRhYiAtIHBvcztcbiAgICAgIGlmIChuZXh0VGFiID09IHN0cmluZy5sZW5ndGggfHwgY29sICsgc2tpcHBlZCA+PSBnb2FsKVxuICAgICAgICByZXR1cm4gcG9zICsgTWF0aC5taW4oc2tpcHBlZCwgZ29hbCAtIGNvbCk7XG4gICAgICBjb2wgKz0gbmV4dFRhYiAtIHBvcztcbiAgICAgIGNvbCArPSB0YWJTaXplIC0gKGNvbCAlIHRhYlNpemUpO1xuICAgICAgcG9zID0gbmV4dFRhYiArIDE7XG4gICAgICBpZiAoY29sID49IGdvYWwpIHJldHVybiBwb3M7XG4gICAgfVxuICB9XG5cbiAgdmFyIHNwYWNlU3RycyA9IFtcIlwiXTtcbiAgZnVuY3Rpb24gc3BhY2VTdHIobikge1xuICAgIHdoaWxlIChzcGFjZVN0cnMubGVuZ3RoIDw9IG4pXG4gICAgICBzcGFjZVN0cnMucHVzaChsc3Qoc3BhY2VTdHJzKSArIFwiIFwiKTtcbiAgICByZXR1cm4gc3BhY2VTdHJzW25dO1xuICB9XG5cbiAgZnVuY3Rpb24gbHN0KGFycikgeyByZXR1cm4gYXJyW2Fyci5sZW5ndGgtMV07IH1cblxuICB2YXIgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0KCk7IH07XG4gIGlmIChpb3MpIC8vIE1vYmlsZSBTYWZhcmkgYXBwYXJlbnRseSBoYXMgYSBidWcgd2hlcmUgc2VsZWN0KCkgaXMgYnJva2VuLlxuICAgIHNlbGVjdElucHV0ID0gZnVuY3Rpb24obm9kZSkgeyBub2RlLnNlbGVjdGlvblN0YXJ0ID0gMDsgbm9kZS5zZWxlY3Rpb25FbmQgPSBub2RlLnZhbHVlLmxlbmd0aDsgfTtcbiAgZWxzZSBpZiAoaWUpIC8vIFN1cHByZXNzIG15c3RlcmlvdXMgSUUxMCBlcnJvcnNcbiAgICBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgdHJ5IHsgbm9kZS5zZWxlY3QoKTsgfSBjYXRjaChfZSkge30gfTtcblxuICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCBlbHQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKVxuICAgICAgaWYgKGFycmF5W2ldID09IGVsdCkgcmV0dXJuIGk7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGZ1bmN0aW9uIG1hcChhcnJheSwgZikge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSBvdXRbaV0gPSBmKGFycmF5W2ldLCBpKTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gbm90aGluZygpIHt9XG5cbiAgZnVuY3Rpb24gY3JlYXRlT2JqKGJhc2UsIHByb3BzKSB7XG4gICAgdmFyIGluc3Q7XG4gICAgaWYgKE9iamVjdC5jcmVhdGUpIHtcbiAgICAgIGluc3QgPSBPYmplY3QuY3JlYXRlKGJhc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3RoaW5nLnByb3RvdHlwZSA9IGJhc2U7XG4gICAgICBpbnN0ID0gbmV3IG5vdGhpbmcoKTtcbiAgICB9XG4gICAgaWYgKHByb3BzKSBjb3B5T2JqKHByb3BzLCBpbnN0KTtcbiAgICByZXR1cm4gaW5zdDtcbiAgfTtcblxuICBmdW5jdGlvbiBjb3B5T2JqKG9iaiwgdGFyZ2V0LCBvdmVyd3JpdGUpIHtcbiAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBvYmopXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIChvdmVyd3JpdGUgIT09IGZhbHNlIHx8ICF0YXJnZXQuaGFzT3duUHJvcGVydHkocHJvcCkpKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJpbmQoZikge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZi5hcHBseShudWxsLCBhcmdzKTt9O1xuICB9XG5cbiAgdmFyIG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyID0gL1tcXHUwMGRmXFx1MDU4N1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTMwNDAtXFx1MzA5ZlxcdTMwYTAtXFx1MzBmZlxcdTM0MDAtXFx1NGRiNVxcdTRlMDAtXFx1OWZjY1xcdWFjMDAtXFx1ZDdhZl0vO1xuICB2YXIgaXNXb3JkQ2hhckJhc2ljID0gQ29kZU1pcnJvci5pc1dvcmRDaGFyID0gZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gL1xcdy8udGVzdChjaCkgfHwgY2ggPiBcIlxceDgwXCIgJiZcbiAgICAgIChjaC50b1VwcGVyQ2FzZSgpICE9IGNoLnRvTG93ZXJDYXNlKCkgfHwgbm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIudGVzdChjaCkpO1xuICB9O1xuICBmdW5jdGlvbiBpc1dvcmRDaGFyKGNoLCBoZWxwZXIpIHtcbiAgICBpZiAoIWhlbHBlcikgcmV0dXJuIGlzV29yZENoYXJCYXNpYyhjaCk7XG4gICAgaWYgKGhlbHBlci5zb3VyY2UuaW5kZXhPZihcIlxcXFx3XCIpID4gLTEgJiYgaXNXb3JkQ2hhckJhc2ljKGNoKSkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGhlbHBlci50ZXN0KGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XG4gICAgZm9yICh2YXIgbiBpbiBvYmopIGlmIChvYmouaGFzT3duUHJvcGVydHkobikgJiYgb2JqW25dKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBFeHRlbmRpbmcgdW5pY29kZSBjaGFyYWN0ZXJzLiBBIHNlcmllcyBvZiBhIG5vbi1leHRlbmRpbmcgY2hhciArXG4gIC8vIGFueSBudW1iZXIgb2YgZXh0ZW5kaW5nIGNoYXJzIGlzIHRyZWF0ZWQgYXMgYSBzaW5nbGUgdW5pdCBhcyBmYXJcbiAgLy8gYXMgZWRpdGluZyBhbmQgbWVhc3VyaW5nIGlzIGNvbmNlcm5lZC4gVGhpcyBpcyBub3QgZnVsbHkgY29ycmVjdCxcbiAgLy8gc2luY2Ugc29tZSBzY3JpcHRzL2ZvbnRzL2Jyb3dzZXJzIGFsc28gdHJlYXQgb3RoZXIgY29uZmlndXJhdGlvbnNcbiAgLy8gb2YgY29kZSBwb2ludHMgYXMgYSBncm91cC5cbiAgdmFyIGV4dGVuZGluZ0NoYXJzID0gL1tcXHUwMzAwLVxcdTAzNmZcXHUwNDgzLVxcdTA0ODlcXHUwNTkxLVxcdTA1YmRcXHUwNWJmXFx1MDVjMVxcdTA1YzJcXHUwNWM0XFx1MDVjNVxcdTA1YzdcXHUwNjEwLVxcdTA2MWFcXHUwNjRiLVxcdTA2NWVcXHUwNjcwXFx1MDZkNi1cXHUwNmRjXFx1MDZkZS1cXHUwNmU0XFx1MDZlN1xcdTA2ZThcXHUwNmVhLVxcdTA2ZWRcXHUwNzExXFx1MDczMC1cXHUwNzRhXFx1MDdhNi1cXHUwN2IwXFx1MDdlYi1cXHUwN2YzXFx1MDgxNi1cXHUwODE5XFx1MDgxYi1cXHUwODIzXFx1MDgyNS1cXHUwODI3XFx1MDgyOS1cXHUwODJkXFx1MDkwMC1cXHUwOTAyXFx1MDkzY1xcdTA5NDEtXFx1MDk0OFxcdTA5NGRcXHUwOTUxLVxcdTA5NTVcXHUwOTYyXFx1MDk2M1xcdTA5ODFcXHUwOWJjXFx1MDliZVxcdTA5YzEtXFx1MDljNFxcdTA5Y2RcXHUwOWQ3XFx1MDllMlxcdTA5ZTNcXHUwYTAxXFx1MGEwMlxcdTBhM2NcXHUwYTQxXFx1MGE0MlxcdTBhNDdcXHUwYTQ4XFx1MGE0Yi1cXHUwYTRkXFx1MGE1MVxcdTBhNzBcXHUwYTcxXFx1MGE3NVxcdTBhODFcXHUwYTgyXFx1MGFiY1xcdTBhYzEtXFx1MGFjNVxcdTBhYzdcXHUwYWM4XFx1MGFjZFxcdTBhZTJcXHUwYWUzXFx1MGIwMVxcdTBiM2NcXHUwYjNlXFx1MGIzZlxcdTBiNDEtXFx1MGI0NFxcdTBiNGRcXHUwYjU2XFx1MGI1N1xcdTBiNjJcXHUwYjYzXFx1MGI4MlxcdTBiYmVcXHUwYmMwXFx1MGJjZFxcdTBiZDdcXHUwYzNlLVxcdTBjNDBcXHUwYzQ2LVxcdTBjNDhcXHUwYzRhLVxcdTBjNGRcXHUwYzU1XFx1MGM1NlxcdTBjNjJcXHUwYzYzXFx1MGNiY1xcdTBjYmZcXHUwY2MyXFx1MGNjNlxcdTBjY2NcXHUwY2NkXFx1MGNkNVxcdTBjZDZcXHUwY2UyXFx1MGNlM1xcdTBkM2VcXHUwZDQxLVxcdTBkNDRcXHUwZDRkXFx1MGQ1N1xcdTBkNjJcXHUwZDYzXFx1MGRjYVxcdTBkY2ZcXHUwZGQyLVxcdTBkZDRcXHUwZGQ2XFx1MGRkZlxcdTBlMzFcXHUwZTM0LVxcdTBlM2FcXHUwZTQ3LVxcdTBlNGVcXHUwZWIxXFx1MGViNC1cXHUwZWI5XFx1MGViYlxcdTBlYmNcXHUwZWM4LVxcdTBlY2RcXHUwZjE4XFx1MGYxOVxcdTBmMzVcXHUwZjM3XFx1MGYzOVxcdTBmNzEtXFx1MGY3ZVxcdTBmODAtXFx1MGY4NFxcdTBmODZcXHUwZjg3XFx1MGY5MC1cXHUwZjk3XFx1MGY5OS1cXHUwZmJjXFx1MGZjNlxcdTEwMmQtXFx1MTAzMFxcdTEwMzItXFx1MTAzN1xcdTEwMzlcXHUxMDNhXFx1MTAzZFxcdTEwM2VcXHUxMDU4XFx1MTA1OVxcdTEwNWUtXFx1MTA2MFxcdTEwNzEtXFx1MTA3NFxcdTEwODJcXHUxMDg1XFx1MTA4NlxcdTEwOGRcXHUxMDlkXFx1MTM1ZlxcdTE3MTItXFx1MTcxNFxcdTE3MzItXFx1MTczNFxcdTE3NTJcXHUxNzUzXFx1MTc3MlxcdTE3NzNcXHUxN2I3LVxcdTE3YmRcXHUxN2M2XFx1MTdjOS1cXHUxN2QzXFx1MTdkZFxcdTE4MGItXFx1MTgwZFxcdTE4YTlcXHUxOTIwLVxcdTE5MjJcXHUxOTI3XFx1MTkyOFxcdTE5MzJcXHUxOTM5LVxcdTE5M2JcXHUxYTE3XFx1MWExOFxcdTFhNTZcXHUxYTU4LVxcdTFhNWVcXHUxYTYwXFx1MWE2MlxcdTFhNjUtXFx1MWE2Y1xcdTFhNzMtXFx1MWE3Y1xcdTFhN2ZcXHUxYjAwLVxcdTFiMDNcXHUxYjM0XFx1MWIzNi1cXHUxYjNhXFx1MWIzY1xcdTFiNDJcXHUxYjZiLVxcdTFiNzNcXHUxYjgwXFx1MWI4MVxcdTFiYTItXFx1MWJhNVxcdTFiYThcXHUxYmE5XFx1MWMyYy1cXHUxYzMzXFx1MWMzNlxcdTFjMzdcXHUxY2QwLVxcdTFjZDJcXHUxY2Q0LVxcdTFjZTBcXHUxY2UyLVxcdTFjZThcXHUxY2VkXFx1MWRjMC1cXHUxZGU2XFx1MWRmZC1cXHUxZGZmXFx1MjAwY1xcdTIwMGRcXHUyMGQwLVxcdTIwZjBcXHUyY2VmLVxcdTJjZjFcXHUyZGUwLVxcdTJkZmZcXHUzMDJhLVxcdTMwMmZcXHUzMDk5XFx1MzA5YVxcdWE2NmYtXFx1YTY3MlxcdWE2N2NcXHVhNjdkXFx1YTZmMFxcdWE2ZjFcXHVhODAyXFx1YTgwNlxcdWE4MGJcXHVhODI1XFx1YTgyNlxcdWE4YzRcXHVhOGUwLVxcdWE4ZjFcXHVhOTI2LVxcdWE5MmRcXHVhOTQ3LVxcdWE5NTFcXHVhOTgwLVxcdWE5ODJcXHVhOWIzXFx1YTliNi1cXHVhOWI5XFx1YTliY1xcdWFhMjktXFx1YWEyZVxcdWFhMzFcXHVhYTMyXFx1YWEzNVxcdWFhMzZcXHVhYTQzXFx1YWE0Y1xcdWFhYjBcXHVhYWIyLVxcdWFhYjRcXHVhYWI3XFx1YWFiOFxcdWFhYmVcXHVhYWJmXFx1YWFjMVxcdWFiZTVcXHVhYmU4XFx1YWJlZFxcdWRjMDAtXFx1ZGZmZlxcdWZiMWVcXHVmZTAwLVxcdWZlMGZcXHVmZTIwLVxcdWZlMjZcXHVmZjllXFx1ZmY5Zl0vO1xuICBmdW5jdGlvbiBpc0V4dGVuZGluZ0NoYXIoY2gpIHsgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCkgPj0gNzY4ICYmIGV4dGVuZGluZ0NoYXJzLnRlc3QoY2gpOyB9XG5cbiAgLy8gRE9NIFVUSUxJVElFU1xuXG4gIGZ1bmN0aW9uIGVsdCh0YWcsIGNvbnRlbnQsIGNsYXNzTmFtZSwgc3R5bGUpIHtcbiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBpZiAoY2xhc3NOYW1lKSBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAoc3R5bGUpIGUuc3R5bGUuY3NzVGV4dCA9IHN0eWxlO1xuICAgIGlmICh0eXBlb2YgY29udGVudCA9PSBcInN0cmluZ1wiKSBlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbnRlbnQpKTtcbiAgICBlbHNlIGlmIChjb250ZW50KSBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyArK2kpIGUuYXBwZW5kQ2hpbGQoY29udGVudFtpXSk7XG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICB2YXIgcmFuZ2U7XG4gIGlmIChkb2N1bWVudC5jcmVhdGVSYW5nZSkgcmFuZ2UgPSBmdW5jdGlvbihub2RlLCBzdGFydCwgZW5kLCBlbmROb2RlKSB7XG4gICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHIuc2V0RW5kKGVuZE5vZGUgfHwgbm9kZSwgZW5kKTtcbiAgICByLnNldFN0YXJ0KG5vZGUsIHN0YXJ0KTtcbiAgICByZXR1cm4gcjtcbiAgfTtcbiAgZWxzZSByYW5nZSA9IGZ1bmN0aW9uKG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgdHJ5IHsgci5tb3ZlVG9FbGVtZW50VGV4dChub2RlLnBhcmVudE5vZGUpOyB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gcjsgfVxuICAgIHIuY29sbGFwc2UodHJ1ZSk7XG4gICAgci5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsIGVuZCk7XG4gICAgci5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwgc3RhcnQpO1xuICAgIHJldHVybiByO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKGUpIHtcbiAgICBmb3IgKHZhciBjb3VudCA9IGUuY2hpbGROb2Rlcy5sZW5ndGg7IGNvdW50ID4gMDsgLS1jb3VudClcbiAgICAgIGUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtcbiAgICByZXR1cm4gZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHBhcmVudCwgZSkge1xuICAgIHJldHVybiByZW1vdmVDaGlsZHJlbihwYXJlbnQpLmFwcGVuZENoaWxkKGUpO1xuICB9XG5cbiAgdmFyIGNvbnRhaW5zID0gQ29kZU1pcnJvci5jb250YWlucyA9IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMykgLy8gQW5kcm9pZCBicm93c2VyIGFsd2F5cyByZXR1cm5zIGZhbHNlIHdoZW4gY2hpbGQgaXMgYSB0ZXh0bm9kZVxuICAgICAgY2hpbGQgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQuY29udGFpbnMpXG4gICAgICByZXR1cm4gcGFyZW50LmNvbnRhaW5zKGNoaWxkKTtcbiAgICBkbyB7XG4gICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMTEpIGNoaWxkID0gY2hpbGQuaG9zdDtcbiAgICAgIGlmIChjaGlsZCA9PSBwYXJlbnQpIHJldHVybiB0cnVlO1xuICAgIH0gd2hpbGUgKGNoaWxkID0gY2hpbGQucGFyZW50Tm9kZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYWN0aXZlRWx0KCkge1xuICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB3aGlsZSAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnJvb3QgJiYgYWN0aXZlRWxlbWVudC5yb290LmFjdGl2ZUVsZW1lbnQpXG4gICAgICBhY3RpdmVFbGVtZW50ID0gYWN0aXZlRWxlbWVudC5yb290LmFjdGl2ZUVsZW1lbnQ7XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7XG4gIH1cbiAgLy8gT2xkZXIgdmVyc2lvbnMgb2YgSUUgdGhyb3dzIHVuc3BlY2lmaWVkIGVycm9yIHdoZW4gdG91Y2hpbmdcbiAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpbiBzb21lIGNhc2VzIChkdXJpbmcgbG9hZGluZywgaW4gaWZyYW1lKVxuICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSBhY3RpdmVFbHQgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkgeyByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsgfVxuICAgIGNhdGNoKGUpIHsgcmV0dXJuIGRvY3VtZW50LmJvZHk7IH1cbiAgfTtcblxuICBmdW5jdGlvbiBjbGFzc1Rlc3QoY2xzKSB7IHJldHVybiBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBjbHMgKyBcIig/OiR8XFxcXHMpXFxcXHMqXCIpOyB9XG4gIHZhciBybUNsYXNzID0gQ29kZU1pcnJvci5ybUNsYXNzID0gZnVuY3Rpb24obm9kZSwgY2xzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBub2RlLmNsYXNzTmFtZTtcbiAgICB2YXIgbWF0Y2ggPSBjbGFzc1Rlc3QoY2xzKS5leGVjKGN1cnJlbnQpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgdmFyIGFmdGVyID0gY3VycmVudC5zbGljZShtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICBub2RlLmNsYXNzTmFtZSA9IGN1cnJlbnQuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgKGFmdGVyID8gbWF0Y2hbMV0gKyBhZnRlciA6IFwiXCIpO1xuICAgIH1cbiAgfTtcbiAgdmFyIGFkZENsYXNzID0gQ29kZU1pcnJvci5hZGRDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIGNscykge1xuICAgIHZhciBjdXJyZW50ID0gbm9kZS5jbGFzc05hbWU7XG4gICAgaWYgKCFjbGFzc1Rlc3QoY2xzKS50ZXN0KGN1cnJlbnQpKSBub2RlLmNsYXNzTmFtZSArPSAoY3VycmVudCA/IFwiIFwiIDogXCJcIikgKyBjbHM7XG4gIH07XG4gIGZ1bmN0aW9uIGpvaW5DbGFzc2VzKGEsIGIpIHtcbiAgICB2YXIgYXMgPSBhLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKVxuICAgICAgaWYgKGFzW2ldICYmICFjbGFzc1Rlc3QoYXNbaV0pLnRlc3QoYikpIGIgKz0gXCIgXCIgKyBhc1tpXTtcbiAgICByZXR1cm4gYjtcbiAgfVxuXG4gIC8vIFdJTkRPVy1XSURFIEVWRU5UU1xuXG4gIC8vIFRoZXNlIG11c3QgYmUgaGFuZGxlZCBjYXJlZnVsbHksIGJlY2F1c2UgbmFpdmVseSByZWdpc3RlcmluZyBhXG4gIC8vIGhhbmRsZXIgZm9yIGVhY2ggZWRpdG9yIHdpbGwgY2F1c2UgdGhlIGVkaXRvcnMgdG8gbmV2ZXIgYmVcbiAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQuXG5cbiAgZnVuY3Rpb24gZm9yRWFjaENvZGVNaXJyb3IoZikge1xuICAgIGlmICghZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSByZXR1cm47XG4gICAgdmFyIGJ5Q2xhc3MgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJDb2RlTWlycm9yXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnlDbGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNtID0gYnlDbGFzc1tpXS5Db2RlTWlycm9yO1xuICAgICAgaWYgKGNtKSBmKGNtKTtcbiAgICB9XG4gIH1cblxuICB2YXIgZ2xvYmFsc1JlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZW5zdXJlR2xvYmFsSGFuZGxlcnMoKSB7XG4gICAgaWYgKGdsb2JhbHNSZWdpc3RlcmVkKSByZXR1cm47XG4gICAgcmVnaXN0ZXJHbG9iYWxIYW5kbGVycygpO1xuICAgIGdsb2JhbHNSZWdpc3RlcmVkID0gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiByZWdpc3Rlckdsb2JhbEhhbmRsZXJzKCkge1xuICAgIC8vIFdoZW4gdGhlIHdpbmRvdyByZXNpemVzLCB3ZSBuZWVkIHRvIHJlZnJlc2ggYWN0aXZlIGVkaXRvcnMuXG4gICAgdmFyIHJlc2l6ZVRpbWVyO1xuICAgIG9uKHdpbmRvdywgXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocmVzaXplVGltZXIgPT0gbnVsbCkgcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNpemVUaW1lciA9IG51bGw7XG4gICAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uUmVzaXplKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gICAgLy8gV2hlbiB0aGUgd2luZG93IGxvc2VzIGZvY3VzLCB3ZSB3YW50IHRvIHNob3cgdGhlIGVkaXRvciBhcyBibHVycmVkXG4gICAgb24od2luZG93LCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBmb3JFYWNoQ29kZU1pcnJvcihvbkJsdXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRkVBVFVSRSBERVRFQ1RJT05cblxuICAvLyBEZXRlY3QgZHJhZy1hbmQtZHJvcFxuICB2YXIgZHJhZ0FuZERyb3AgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGVyZSBpcyAqc29tZSoga2luZCBvZiBkcmFnLWFuZC1kcm9wIHN1cHBvcnQgaW4gSUU2LTgsIGJ1dCBJXG4gICAgLy8gY291bGRuJ3QgZ2V0IGl0IHRvIHdvcmsgeWV0LlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBkaXYgPSBlbHQoJ2RpdicpO1xuICAgIHJldHVybiBcImRyYWdnYWJsZVwiIGluIGRpdiB8fCBcImRyYWdEcm9wXCIgaW4gZGl2O1xuICB9KCk7XG5cbiAgdmFyIHp3c3BTdXBwb3J0ZWQ7XG4gIGZ1bmN0aW9uIHplcm9XaWR0aEVsZW1lbnQobWVhc3VyZSkge1xuICAgIGlmICh6d3NwU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICAgIHZhciB0ZXN0ID0gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIik7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFt0ZXN0LCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIildKSk7XG4gICAgICBpZiAobWVhc3VyZS5maXJzdENoaWxkLm9mZnNldEhlaWdodCAhPSAwKVxuICAgICAgICB6d3NwU3VwcG9ydGVkID0gdGVzdC5vZmZzZXRXaWR0aCA8PSAxICYmIHRlc3Qub2Zmc2V0SGVpZ2h0ID4gMiAmJiAhKGllICYmIGllX3ZlcnNpb24gPCA4KTtcbiAgICB9XG4gICAgdmFyIG5vZGUgPSB6d3NwU3VwcG9ydGVkID8gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIikgOlxuICAgICAgZWx0KFwic3BhblwiLCBcIlxcdTAwYTBcIiwgbnVsbCwgXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxcHg7IG1hcmdpbi1yaWdodDogLTFweFwiKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgXCJcIik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICAvLyBGZWF0dXJlLWRldGVjdCBJRSdzIGNydW1teSBjbGllbnQgcmVjdCByZXBvcnRpbmcgZm9yIGJpZGkgdGV4dFxuICB2YXIgYmFkQmlkaVJlY3RzO1xuICBmdW5jdGlvbiBoYXNCYWRCaWRpUmVjdHMobWVhc3VyZSkge1xuICAgIGlmIChiYWRCaWRpUmVjdHMgIT0gbnVsbCkgcmV0dXJuIGJhZEJpZGlSZWN0cztcbiAgICB2YXIgdHh0ID0gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJBXFx1MDYyZUFcIikpO1xuICAgIHZhciByMCA9IHJhbmdlKHR4dCwgMCwgMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKCFyMCB8fCByMC5sZWZ0ID09IHIwLnJpZ2h0KSByZXR1cm4gZmFsc2U7IC8vIFNhZmFyaSByZXR1cm5zIG51bGwgaW4gc29tZSBjYXNlcyAoIzI3ODApXG4gICAgdmFyIHIxID0gcmFuZ2UodHh0LCAxLCAyKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gYmFkQmlkaVJlY3RzID0gKHIxLnJpZ2h0IC0gcjAucmlnaHQgPCAzKTtcbiAgfVxuXG4gIC8vIFNlZSBpZiBcIlwiLnNwbGl0IGlzIHRoZSBicm9rZW4gSUUgdmVyc2lvbiwgaWYgc28sIHByb3ZpZGUgYW5cbiAgLy8gYWx0ZXJuYXRpdmUgd2F5IHRvIHNwbGl0IGxpbmVzLlxuICB2YXIgc3BsaXRMaW5lc0F1dG8gPSBDb2RlTWlycm9yLnNwbGl0TGluZXMgPSBcIlxcblxcbmJcIi5zcGxpdCgvXFxuLykubGVuZ3RoICE9IDMgPyBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICB2YXIgcG9zID0gMCwgcmVzdWx0ID0gW10sIGwgPSBzdHJpbmcubGVuZ3RoO1xuICAgIHdoaWxlIChwb3MgPD0gbCkge1xuICAgICAgdmFyIG5sID0gc3RyaW5nLmluZGV4T2YoXCJcXG5cIiwgcG9zKTtcbiAgICAgIGlmIChubCA9PSAtMSkgbmwgPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgdmFyIGxpbmUgPSBzdHJpbmcuc2xpY2UocG9zLCBzdHJpbmcuY2hhckF0KG5sIC0gMSkgPT0gXCJcXHJcIiA/IG5sIC0gMSA6IG5sKTtcbiAgICAgIHZhciBydCA9IGxpbmUuaW5kZXhPZihcIlxcclwiKTtcbiAgICAgIGlmIChydCAhPSAtMSkge1xuICAgICAgICByZXN1bHQucHVzaChsaW5lLnNsaWNlKDAsIHJ0KSk7XG4gICAgICAgIHBvcyArPSBydCArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQucHVzaChsaW5lKTtcbiAgICAgICAgcG9zID0gbmwgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IDogZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnNwbGl0KC9cXHJcXG4/fFxcbi8pO307XG5cbiAgdmFyIGhhc1NlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24gPyBmdW5jdGlvbih0ZSkge1xuICAgIHRyeSB7IHJldHVybiB0ZS5zZWxlY3Rpb25TdGFydCAhPSB0ZS5zZWxlY3Rpb25FbmQ7IH1cbiAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfVxuICB9IDogZnVuY3Rpb24odGUpIHtcbiAgICB0cnkge3ZhciByYW5nZSA9IHRlLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7fVxuICAgIGNhdGNoKGUpIHt9XG4gICAgaWYgKCFyYW5nZSB8fCByYW5nZS5wYXJlbnRFbGVtZW50KCkgIT0gdGUpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gcmFuZ2UuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9FbmRcIiwgcmFuZ2UpICE9IDA7XG4gIH07XG5cbiAgdmFyIGhhc0NvcHlFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgZSA9IGVsdChcImRpdlwiKTtcbiAgICBpZiAoXCJvbmNvcHlcIiBpbiBlKSByZXR1cm4gdHJ1ZTtcbiAgICBlLnNldEF0dHJpYnV0ZShcIm9uY29weVwiLCBcInJldHVybjtcIik7XG4gICAgcmV0dXJuIHR5cGVvZiBlLm9uY29weSA9PSBcImZ1bmN0aW9uXCI7XG4gIH0pKCk7XG5cbiAgdmFyIGJhZFpvb21lZFJlY3RzID0gbnVsbDtcbiAgZnVuY3Rpb24gaGFzQmFkWm9vbWVkUmVjdHMobWVhc3VyZSkge1xuICAgIGlmIChiYWRab29tZWRSZWN0cyAhPSBudWxsKSByZXR1cm4gYmFkWm9vbWVkUmVjdHM7XG4gICAgdmFyIG5vZGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFwieFwiKSk7XG4gICAgdmFyIG5vcm1hbCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGZyb21SYW5nZSA9IHJhbmdlKG5vZGUsIDAsIDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBiYWRab29tZWRSZWN0cyA9IE1hdGguYWJzKG5vcm1hbC5sZWZ0IC0gZnJvbVJhbmdlLmxlZnQpID4gMTtcbiAgfVxuXG4gIC8vIEtFWSBOQU1FU1xuXG4gIHZhciBrZXlOYW1lcyA9IENvZGVNaXJyb3Iua2V5TmFtZXMgPSB7XG4gICAgMzogXCJFbnRlclwiLCA4OiBcIkJhY2tzcGFjZVwiLCA5OiBcIlRhYlwiLCAxMzogXCJFbnRlclwiLCAxNjogXCJTaGlmdFwiLCAxNzogXCJDdHJsXCIsIDE4OiBcIkFsdFwiLFxuICAgIDE5OiBcIlBhdXNlXCIsIDIwOiBcIkNhcHNMb2NrXCIsIDI3OiBcIkVzY1wiLCAzMjogXCJTcGFjZVwiLCAzMzogXCJQYWdlVXBcIiwgMzQ6IFwiUGFnZURvd25cIiwgMzU6IFwiRW5kXCIsXG4gICAgMzY6IFwiSG9tZVwiLCAzNzogXCJMZWZ0XCIsIDM4OiBcIlVwXCIsIDM5OiBcIlJpZ2h0XCIsIDQwOiBcIkRvd25cIiwgNDQ6IFwiUHJpbnRTY3JuXCIsIDQ1OiBcIkluc2VydFwiLFxuICAgIDQ2OiBcIkRlbGV0ZVwiLCA1OTogXCI7XCIsIDYxOiBcIj1cIiwgOTE6IFwiTW9kXCIsIDkyOiBcIk1vZFwiLCA5MzogXCJNb2RcIixcbiAgICAxMDY6IFwiKlwiLCAxMDc6IFwiPVwiLCAxMDk6IFwiLVwiLCAxMTA6IFwiLlwiLCAxMTE6IFwiL1wiLCAxMjc6IFwiRGVsZXRlXCIsXG4gICAgMTczOiBcIi1cIiwgMTg2OiBcIjtcIiwgMTg3OiBcIj1cIiwgMTg4OiBcIixcIiwgMTg5OiBcIi1cIiwgMTkwOiBcIi5cIiwgMTkxOiBcIi9cIiwgMTkyOiBcImBcIiwgMjE5OiBcIltcIiwgMjIwOiBcIlxcXFxcIixcbiAgICAyMjE6IFwiXVwiLCAyMjI6IFwiJ1wiLCA2MzIzMjogXCJVcFwiLCA2MzIzMzogXCJEb3duXCIsIDYzMjM0OiBcIkxlZnRcIiwgNjMyMzU6IFwiUmlnaHRcIiwgNjMyNzI6IFwiRGVsZXRlXCIsXG4gICAgNjMyNzM6IFwiSG9tZVwiLCA2MzI3NTogXCJFbmRcIiwgNjMyNzY6IFwiUGFnZVVwXCIsIDYzMjc3OiBcIlBhZ2VEb3duXCIsIDYzMzAyOiBcIkluc2VydFwiXG4gIH07XG4gIChmdW5jdGlvbigpIHtcbiAgICAvLyBOdW1iZXIga2V5c1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykga2V5TmFtZXNbaSArIDQ4XSA9IGtleU5hbWVzW2kgKyA5Nl0gPSBTdHJpbmcoaSk7XG4gICAgLy8gQWxwaGFiZXRpYyBrZXlzXG4gICAgZm9yICh2YXIgaSA9IDY1OyBpIDw9IDkwOyBpKyspIGtleU5hbWVzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAvLyBGdW5jdGlvbiBrZXlzXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTI7IGkrKykga2V5TmFtZXNbaSArIDExMV0gPSBrZXlOYW1lc1tpICsgNjMyMzVdID0gXCJGXCIgKyBpO1xuICB9KSgpO1xuXG4gIC8vIEJJREkgSEVMUEVSU1xuXG4gIGZ1bmN0aW9uIGl0ZXJhdGVCaWRpU2VjdGlvbnMob3JkZXIsIGZyb20sIHRvLCBmKSB7XG4gICAgaWYgKCFvcmRlcikgcmV0dXJuIGYoZnJvbSwgdG8sIFwibHRyXCIpO1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbaV07XG4gICAgICBpZiAocGFydC5mcm9tIDwgdG8gJiYgcGFydC50byA+IGZyb20gfHwgZnJvbSA9PSB0byAmJiBwYXJ0LnRvID09IGZyb20pIHtcbiAgICAgICAgZihNYXRoLm1heChwYXJ0LmZyb20sIGZyb20pLCBNYXRoLm1pbihwYXJ0LnRvLCB0byksIHBhcnQubGV2ZWwgPT0gMSA/IFwicnRsXCIgOiBcImx0clwiKTtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZvdW5kKSBmKGZyb20sIHRvLCBcImx0clwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJpZGlMZWZ0KHBhcnQpIHsgcmV0dXJuIHBhcnQubGV2ZWwgJSAyID8gcGFydC50byA6IHBhcnQuZnJvbTsgfVxuICBmdW5jdGlvbiBiaWRpUmlnaHQocGFydCkgeyByZXR1cm4gcGFydC5sZXZlbCAlIDIgPyBwYXJ0LmZyb20gOiBwYXJ0LnRvOyB9XG5cbiAgZnVuY3Rpb24gbGluZUxlZnQobGluZSkgeyB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTsgcmV0dXJuIG9yZGVyID8gYmlkaUxlZnQob3JkZXJbMF0pIDogMDsgfVxuICBmdW5jdGlvbiBsaW5lUmlnaHQobGluZSkge1xuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xuICAgIGlmICghb3JkZXIpIHJldHVybiBsaW5lLnRleHQubGVuZ3RoO1xuICAgIHJldHVybiBiaWRpUmlnaHQobHN0KG9yZGVyKSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaW5lU3RhcnQoY20sIGxpbmVOKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgbGluZU4pO1xuICAgIHZhciB2aXN1YWwgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIGlmICh2aXN1YWwgIT0gbGluZSkgbGluZU4gPSBsaW5lTm8odmlzdWFsKTtcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcih2aXN1YWwpO1xuICAgIHZhciBjaCA9ICFvcmRlciA/IDAgOiBvcmRlclswXS5sZXZlbCAlIDIgPyBsaW5lUmlnaHQodmlzdWFsKSA6IGxpbmVMZWZ0KHZpc3VhbCk7XG4gICAgcmV0dXJuIFBvcyhsaW5lTiwgY2gpO1xuICB9XG4gIGZ1bmN0aW9uIGxpbmVFbmQoY20sIGxpbmVOKSB7XG4gICAgdmFyIG1lcmdlZCwgbGluZSA9IGdldExpbmUoY20uZG9jLCBsaW5lTik7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSkge1xuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XG4gICAgICBsaW5lTiA9IG51bGw7XG4gICAgfVxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xuICAgIHZhciBjaCA9ICFvcmRlciA/IGxpbmUudGV4dC5sZW5ndGggOiBvcmRlclswXS5sZXZlbCAlIDIgPyBsaW5lTGVmdChsaW5lKSA6IGxpbmVSaWdodChsaW5lKTtcbiAgICByZXR1cm4gUG9zKGxpbmVOID09IG51bGwgPyBsaW5lTm8obGluZSkgOiBsaW5lTiwgY2gpO1xuICB9XG4gIGZ1bmN0aW9uIGxpbmVTdGFydFNtYXJ0KGNtLCBwb3MpIHtcbiAgICB2YXIgc3RhcnQgPSBsaW5lU3RhcnQoY20sIHBvcy5saW5lKTtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBzdGFydC5saW5lKTtcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTtcbiAgICBpZiAoIW9yZGVyIHx8IG9yZGVyWzBdLmxldmVsID09IDApIHtcbiAgICAgIHZhciBmaXJzdE5vbldTID0gTWF0aC5tYXgoMCwgbGluZS50ZXh0LnNlYXJjaCgvXFxTLykpO1xuICAgICAgdmFyIGluV1MgPSBwb3MubGluZSA9PSBzdGFydC5saW5lICYmIHBvcy5jaCA8PSBmaXJzdE5vbldTICYmIHBvcy5jaDtcbiAgICAgIHJldHVybiBQb3Moc3RhcnQubGluZSwgaW5XUyA/IDAgOiBmaXJzdE5vbldTKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0O1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGFyZUJpZGlMZXZlbChvcmRlciwgYSwgYikge1xuICAgIHZhciBsaW5lZGlyID0gb3JkZXJbMF0ubGV2ZWw7XG4gICAgaWYgKGEgPT0gbGluZWRpcikgcmV0dXJuIHRydWU7XG4gICAgaWYgKGIgPT0gbGluZWRpcikgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBhIDwgYjtcbiAgfVxuICB2YXIgYmlkaU90aGVyO1xuICBmdW5jdGlvbiBnZXRCaWRpUGFydEF0KG9yZGVyLCBwb3MpIHtcbiAgICBiaWRpT3RoZXIgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwLCBmb3VuZDsgaSA8IG9yZGVyLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgY3VyID0gb3JkZXJbaV07XG4gICAgICBpZiAoY3VyLmZyb20gPCBwb3MgJiYgY3VyLnRvID4gcG9zKSByZXR1cm4gaTtcbiAgICAgIGlmICgoY3VyLmZyb20gPT0gcG9zIHx8IGN1ci50byA9PSBwb3MpKSB7XG4gICAgICAgIGlmIChmb3VuZCA9PSBudWxsKSB7XG4gICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmVCaWRpTGV2ZWwob3JkZXIsIGN1ci5sZXZlbCwgb3JkZXJbZm91bmRdLmxldmVsKSkge1xuICAgICAgICAgIGlmIChjdXIuZnJvbSAhPSBjdXIudG8pIGJpZGlPdGhlciA9IGZvdW5kO1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjdXIuZnJvbSAhPSBjdXIudG8pIGJpZGlPdGhlciA9IGk7XG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVJbkxpbmUobGluZSwgcG9zLCBkaXIsIGJ5VW5pdCkge1xuICAgIGlmICghYnlVbml0KSByZXR1cm4gcG9zICsgZGlyO1xuICAgIGRvIHBvcyArPSBkaXI7XG4gICAgd2hpbGUgKHBvcyA+IDAgJiYgaXNFeHRlbmRpbmdDaGFyKGxpbmUudGV4dC5jaGFyQXQocG9zKSkpO1xuICAgIHJldHVybiBwb3M7XG4gIH1cblxuICAvLyBUaGlzIGlzIG5lZWRlZCBpbiBvcmRlciB0byBtb3ZlICd2aXN1YWxseScgdGhyb3VnaCBiaS1kaXJlY3Rpb25hbFxuICAvLyB0ZXh0IC0tIGkuZS4sIHByZXNzaW5nIGxlZnQgc2hvdWxkIG1ha2UgdGhlIGN1cnNvciBnbyBsZWZ0LCBldmVuXG4gIC8vIHdoZW4gaW4gUlRMIHRleHQuIFRoZSB0cmlja3kgcGFydCBpcyB0aGUgJ2p1bXBzJywgd2hlcmUgUlRMIGFuZFxuICAvLyBMVFIgdGV4dCB0b3VjaCBlYWNoIG90aGVyLiBUaGlzIG9mdGVuIHJlcXVpcmVzIHRoZSBjdXJzb3Igb2Zmc2V0XG4gIC8vIHRvIG1vdmUgbW9yZSB0aGFuIG9uZSB1bml0LCBpbiBvcmRlciB0byB2aXN1YWxseSBtb3ZlIG9uZSB1bml0LlxuICBmdW5jdGlvbiBtb3ZlVmlzdWFsbHkobGluZSwgc3RhcnQsIGRpciwgYnlVbml0KSB7XG4gICAgdmFyIGJpZGkgPSBnZXRPcmRlcihsaW5lKTtcbiAgICBpZiAoIWJpZGkpIHJldHVybiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIsIGJ5VW5pdCk7XG4gICAgdmFyIHBvcyA9IGdldEJpZGlQYXJ0QXQoYmlkaSwgc3RhcnQpLCBwYXJ0ID0gYmlkaVtwb3NdO1xuICAgIHZhciB0YXJnZXQgPSBtb3ZlSW5MaW5lKGxpbmUsIHN0YXJ0LCBwYXJ0LmxldmVsICUgMiA/IC1kaXIgOiBkaXIsIGJ5VW5pdCk7XG5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBpZiAodGFyZ2V0ID4gcGFydC5mcm9tICYmIHRhcmdldCA8IHBhcnQudG8pIHJldHVybiB0YXJnZXQ7XG4gICAgICBpZiAodGFyZ2V0ID09IHBhcnQuZnJvbSB8fCB0YXJnZXQgPT0gcGFydC50bykge1xuICAgICAgICBpZiAoZ2V0QmlkaVBhcnRBdChiaWRpLCB0YXJnZXQpID09IHBvcykgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgcGFydCA9IGJpZGlbcG9zICs9IGRpcl07XG4gICAgICAgIHJldHVybiAoZGlyID4gMCkgPT0gcGFydC5sZXZlbCAlIDIgPyBwYXJ0LnRvIDogcGFydC5mcm9tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydCA9IGJpZGlbcG9zICs9IGRpcl07XG4gICAgICAgIGlmICghcGFydCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICgoZGlyID4gMCkgPT0gcGFydC5sZXZlbCAlIDIpXG4gICAgICAgICAgdGFyZ2V0ID0gbW92ZUluTGluZShsaW5lLCBwYXJ0LnRvLCAtMSwgYnlVbml0KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRhcmdldCA9IG1vdmVJbkxpbmUobGluZSwgcGFydC5mcm9tLCAxLCBieVVuaXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpciwgYnlVbml0KSB7XG4gICAgdmFyIHRhcmdldCA9IHN0YXJ0ICsgZGlyO1xuICAgIGlmIChieVVuaXQpIHdoaWxlICh0YXJnZXQgPiAwICYmIGlzRXh0ZW5kaW5nQ2hhcihsaW5lLnRleHQuY2hhckF0KHRhcmdldCkpKSB0YXJnZXQgKz0gZGlyO1xuICAgIHJldHVybiB0YXJnZXQgPCAwIHx8IHRhcmdldCA+IGxpbmUudGV4dC5sZW5ndGggPyBudWxsIDogdGFyZ2V0O1xuICB9XG5cbiAgLy8gQmlkaXJlY3Rpb25hbCBvcmRlcmluZyBhbGdvcml0aG1cbiAgLy8gU2VlIGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS90cjktMTMuaHRtbCBmb3IgdGhlIGFsZ29yaXRobVxuICAvLyB0aGF0IHRoaXMgKHBhcnRpYWxseSkgaW1wbGVtZW50cy5cblxuICAvLyBPbmUtY2hhciBjb2RlcyB1c2VkIGZvciBjaGFyYWN0ZXIgdHlwZXM6XG4gIC8vIEwgKEwpOiAgIExlZnQtdG8tUmlnaHRcbiAgLy8gUiAoUik6ICAgUmlnaHQtdG8tTGVmdFxuICAvLyByIChBTCk6ICBSaWdodC10by1MZWZ0IEFyYWJpY1xuICAvLyAxIChFTik6ICBFdXJvcGVhbiBOdW1iZXJcbiAgLy8gKyAoRVMpOiAgRXVyb3BlYW4gTnVtYmVyIFNlcGFyYXRvclxuICAvLyAlIChFVCk6ICBFdXJvcGVhbiBOdW1iZXIgVGVybWluYXRvclxuICAvLyBuIChBTik6ICBBcmFiaWMgTnVtYmVyXG4gIC8vICwgKENTKTogIENvbW1vbiBOdW1iZXIgU2VwYXJhdG9yXG4gIC8vIG0gKE5TTSk6IE5vbi1TcGFjaW5nIE1hcmtcbiAgLy8gYiAoQk4pOiAgQm91bmRhcnkgTmV1dHJhbFxuICAvLyBzIChCKTogICBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gIC8vIHQgKFMpOiAgIFNlZ21lbnQgU2VwYXJhdG9yXG4gIC8vIHcgKFdTKTogIFdoaXRlc3BhY2VcbiAgLy8gTiAoT04pOiAgT3RoZXIgTmV1dHJhbHNcblxuICAvLyBSZXR1cm5zIG51bGwgaWYgY2hhcmFjdGVycyBhcmUgb3JkZXJlZCBhcyB0aGV5IGFwcGVhclxuICAvLyAobGVmdC10by1yaWdodCksIG9yIGFuIGFycmF5IG9mIHNlY3Rpb25zICh7ZnJvbSwgdG8sIGxldmVsfVxuICAvLyBvYmplY3RzKSBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBvY2N1ciB2aXN1YWxseS5cbiAgdmFyIGJpZGlPcmRlcmluZyA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMCB0byAweGZmXG4gICAgdmFyIGxvd1R5cGVzID0gXCJiYmJiYmJiYmJ0c3R3c2JiYmJiYmJiYmJiYmJic3NzdHdOTiUlJU5OTk5OTixOLE4xMTExMTExMTExTk5OTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTExMTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OYmJiYmJic2JiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiLE4lJSUlTk5OTkxOTk5OTiUlMTFOTE5OTjFMTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTE5MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTlwiO1xuICAgIC8vIENoYXJhY3RlciB0eXBlcyBmb3IgY29kZXBvaW50cyAweDYwMCB0byAweDZmZlxuICAgIHZhciBhcmFiaWNUeXBlcyA9IFwicnJycnJycnJycnJyLHJOTm1tbW1tbXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1ycnJycnJybm5ubm5ubm5ubiVubnJycm1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1tbW1tbW1tbW1tbW1ObW1tbVwiO1xuICAgIGZ1bmN0aW9uIGNoYXJUeXBlKGNvZGUpIHtcbiAgICAgIGlmIChjb2RlIDw9IDB4ZjcpIHJldHVybiBsb3dUeXBlcy5jaGFyQXQoY29kZSk7XG4gICAgICBlbHNlIGlmICgweDU5MCA8PSBjb2RlICYmIGNvZGUgPD0gMHg1ZjQpIHJldHVybiBcIlJcIjtcbiAgICAgIGVsc2UgaWYgKDB4NjAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDZlZCkgcmV0dXJuIGFyYWJpY1R5cGVzLmNoYXJBdChjb2RlIC0gMHg2MDApO1xuICAgICAgZWxzZSBpZiAoMHg2ZWUgPD0gY29kZSAmJiBjb2RlIDw9IDB4OGFjKSByZXR1cm4gXCJyXCI7XG4gICAgICBlbHNlIGlmICgweDIwMDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MjAwYikgcmV0dXJuIFwid1wiO1xuICAgICAgZWxzZSBpZiAoY29kZSA9PSAweDIwMGMpIHJldHVybiBcImJcIjtcbiAgICAgIGVsc2UgcmV0dXJuIFwiTFwiO1xuICAgIH1cblxuICAgIHZhciBiaWRpUkUgPSAvW1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTA3MDAtXFx1MDhhY10vO1xuICAgIHZhciBpc05ldXRyYWwgPSAvW3N0d05dLywgaXNTdHJvbmcgPSAvW0xScl0vLCBjb3VudHNBc0xlZnQgPSAvW0xiMW5dLywgY291bnRzQXNOdW0gPSAvWzFuXS87XG4gICAgLy8gQnJvd3NlcnMgc2VlbSB0byBhbHdheXMgdHJlYXQgdGhlIGJvdW5kYXJpZXMgb2YgYmxvY2sgZWxlbWVudHMgYXMgYmVpbmcgTC5cbiAgICB2YXIgb3V0ZXJUeXBlID0gXCJMXCI7XG5cbiAgICBmdW5jdGlvbiBCaWRpU3BhbihsZXZlbCwgZnJvbSwgdG8pIHtcbiAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICAgIHRoaXMuZnJvbSA9IGZyb207IHRoaXMudG8gPSB0bztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICBpZiAoIWJpZGlSRS50ZXN0KHN0cikpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBsZW4gPSBzdHIubGVuZ3RoLCB0eXBlcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIHR5cGU7IGkgPCBsZW47ICsraSlcbiAgICAgICAgdHlwZXMucHVzaCh0eXBlID0gY2hhclR5cGUoc3RyLmNoYXJDb2RlQXQoaSkpKTtcblxuICAgICAgLy8gVzEuIEV4YW1pbmUgZWFjaCBub24tc3BhY2luZyBtYXJrIChOU00pIGluIHRoZSBsZXZlbCBydW4sIGFuZFxuICAgICAgLy8gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBOU00gdG8gdGhlIHR5cGUgb2YgdGhlIHByZXZpb3VzXG4gICAgICAvLyBjaGFyYWN0ZXIuIElmIHRoZSBOU00gaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsZXZlbCBydW4sIGl0IHdpbGxcbiAgICAgIC8vIGdldCB0aGUgdHlwZSBvZiBzb3IuXG4gICAgICBmb3IgKHZhciBpID0gMCwgcHJldiA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmICh0eXBlID09IFwibVwiKSB0eXBlc1tpXSA9IHByZXY7XG4gICAgICAgIGVsc2UgcHJldiA9IHR5cGU7XG4gICAgICB9XG5cbiAgICAgIC8vIFcyLiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBBTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW5cbiAgICAgIC8vIEFMIGlzIGZvdW5kLCBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBBcmFiaWNcbiAgICAgIC8vIG51bWJlci5cbiAgICAgIC8vIFczLiBDaGFuZ2UgYWxsIEFMcyB0byBSLlxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmICh0eXBlID09IFwiMVwiICYmIGN1ciA9PSBcInJcIikgdHlwZXNbaV0gPSBcIm5cIjtcbiAgICAgICAgZWxzZSBpZiAoaXNTdHJvbmcudGVzdCh0eXBlKSkgeyBjdXIgPSB0eXBlOyBpZiAodHlwZSA9PSBcInJcIikgdHlwZXNbaV0gPSBcIlJcIjsgfVxuICAgICAgfVxuXG4gICAgICAvLyBXNC4gQSBzaW5nbGUgRXVyb3BlYW4gc2VwYXJhdG9yIGJldHdlZW4gdHdvIEV1cm9wZWFuIG51bWJlcnNcbiAgICAgIC8vIGNoYW5nZXMgdG8gYSBFdXJvcGVhbiBudW1iZXIuIEEgc2luZ2xlIGNvbW1vbiBzZXBhcmF0b3IgYmV0d2VlblxuICAgICAgLy8gdHdvIG51bWJlcnMgb2YgdGhlIHNhbWUgdHlwZSBjaGFuZ2VzIHRvIHRoYXQgdHlwZS5cbiAgICAgIGZvciAodmFyIGkgPSAxLCBwcmV2ID0gdHlwZXNbMF07IGkgPCBsZW4gLSAxOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCIrXCIgJiYgcHJldiA9PSBcIjFcIiAmJiB0eXBlc1tpKzFdID09IFwiMVwiKSB0eXBlc1tpXSA9IFwiMVwiO1xuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwiLFwiICYmIHByZXYgPT0gdHlwZXNbaSsxXSAmJlxuICAgICAgICAgICAgICAgICAocHJldiA9PSBcIjFcIiB8fCBwcmV2ID09IFwiblwiKSkgdHlwZXNbaV0gPSBwcmV2O1xuICAgICAgICBwcmV2ID0gdHlwZTtcbiAgICAgIH1cblxuICAgICAgLy8gVzUuIEEgc2VxdWVuY2Ugb2YgRXVyb3BlYW4gdGVybWluYXRvcnMgYWRqYWNlbnQgdG8gRXVyb3BlYW5cbiAgICAgIC8vIG51bWJlcnMgY2hhbmdlcyB0byBhbGwgRXVyb3BlYW4gbnVtYmVycy5cbiAgICAgIC8vIFc2LiBPdGhlcndpc2UsIHNlcGFyYXRvcnMgYW5kIHRlcm1pbmF0b3JzIGNoYW5nZSB0byBPdGhlclxuICAgICAgLy8gTmV1dHJhbC5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCIsXCIpIHR5cGVzW2ldID0gXCJOXCI7XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCIlXCIpIHtcbiAgICAgICAgICBmb3IgKHZhciBlbmQgPSBpICsgMTsgZW5kIDwgbGVuICYmIHR5cGVzW2VuZF0gPT0gXCIlXCI7ICsrZW5kKSB7fVxuICAgICAgICAgIHZhciByZXBsYWNlID0gKGkgJiYgdHlwZXNbaS0xXSA9PSBcIiFcIikgfHwgKGVuZCA8IGxlbiAmJiB0eXBlc1tlbmRdID09IFwiMVwiKSA/IFwiMVwiIDogXCJOXCI7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPCBlbmQ7ICsraikgdHlwZXNbal0gPSByZXBsYWNlO1xuICAgICAgICAgIGkgPSBlbmQgLSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFc3LiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhbiBMIGlzXG4gICAgICAvLyBmb3VuZCwgdGhlbiBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBMLlxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmIChjdXIgPT0gXCJMXCIgJiYgdHlwZSA9PSBcIjFcIikgdHlwZXNbaV0gPSBcIkxcIjtcbiAgICAgICAgZWxzZSBpZiAoaXNTdHJvbmcudGVzdCh0eXBlKSkgY3VyID0gdHlwZTtcbiAgICAgIH1cblxuICAgICAgLy8gTjEuIEEgc2VxdWVuY2Ugb2YgbmV1dHJhbHMgdGFrZXMgdGhlIGRpcmVjdGlvbiBvZiB0aGVcbiAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lXG4gICAgICAvLyBkaXJlY3Rpb24uIEV1cm9wZWFuIGFuZCBBcmFiaWMgbnVtYmVycyBhY3QgYXMgaWYgdGhleSB3ZXJlIFIgaW5cbiAgICAgIC8vIHRlcm1zIG9mIHRoZWlyIGluZmx1ZW5jZSBvbiBuZXV0cmFscy4gU3RhcnQtb2YtbGV2ZWwtcnVuIChzb3IpXG4gICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy5cbiAgICAgIC8vIE4yLiBBbnkgcmVtYWluaW5nIG5ldXRyYWxzIHRha2UgdGhlIGVtYmVkZGluZyBkaXJlY3Rpb24uXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChpc05ldXRyYWwudGVzdCh0eXBlc1tpXSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlbmQgPSBpICsgMTsgZW5kIDwgbGVuICYmIGlzTmV1dHJhbC50ZXN0KHR5cGVzW2VuZF0pOyArK2VuZCkge31cbiAgICAgICAgICB2YXIgYmVmb3JlID0gKGkgPyB0eXBlc1tpLTFdIDogb3V0ZXJUeXBlKSA9PSBcIkxcIjtcbiAgICAgICAgICB2YXIgYWZ0ZXIgPSAoZW5kIDwgbGVuID8gdHlwZXNbZW5kXSA6IG91dGVyVHlwZSkgPT0gXCJMXCI7XG4gICAgICAgICAgdmFyIHJlcGxhY2UgPSBiZWZvcmUgfHwgYWZ0ZXIgPyBcIkxcIiA6IFwiUlwiO1xuICAgICAgICAgIGZvciAodmFyIGogPSBpOyBqIDwgZW5kOyArK2opIHR5cGVzW2pdID0gcmVwbGFjZTtcbiAgICAgICAgICBpID0gZW5kIC0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBIZXJlIHdlIGRlcGFydCBmcm9tIHRoZSBkb2N1bWVudGVkIGFsZ29yaXRobSwgaW4gb3JkZXIgdG8gYXZvaWRcbiAgICAgIC8vIGJ1aWxkaW5nIHVwIGFuIGFjdHVhbCBsZXZlbHMgYXJyYXkuIFNpbmNlIHRoZXJlIGFyZSBvbmx5IHRocmVlXG4gICAgICAvLyBsZXZlbHMgKDAsIDEsIDIpIGluIGFuIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lc24ndCB0YWtlXG4gICAgICAvLyBleHBsaWNpdCBlbWJlZGRpbmcgaW50byBhY2NvdW50LCB3ZSBjYW4gYnVpbGQgdXAgdGhlIG9yZGVyIG9uXG4gICAgICAvLyB0aGUgZmx5LCB3aXRob3V0IGZvbGxvd2luZyB0aGUgbGV2ZWwtYmFzZWQgYWxnb3JpdGhtLlxuICAgICAgdmFyIG9yZGVyID0gW10sIG07XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjspIHtcbiAgICAgICAgaWYgKGNvdW50c0FzTGVmdC50ZXN0KHR5cGVzW2ldKSkge1xuICAgICAgICAgIHZhciBzdGFydCA9IGk7XG4gICAgICAgICAgZm9yICgrK2k7IGkgPCBsZW4gJiYgY291bnRzQXNMZWZ0LnRlc3QodHlwZXNbaV0pOyArK2kpIHt9XG4gICAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4oMCwgc3RhcnQsIGkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcG9zID0gaSwgYXQgPSBvcmRlci5sZW5ndGg7XG4gICAgICAgICAgZm9yICgrK2k7IGkgPCBsZW4gJiYgdHlwZXNbaV0gIT0gXCJMXCI7ICsraSkge31cbiAgICAgICAgICBmb3IgKHZhciBqID0gcG9zOyBqIDwgaTspIHtcbiAgICAgICAgICAgIGlmIChjb3VudHNBc051bS50ZXN0KHR5cGVzW2pdKSkge1xuICAgICAgICAgICAgICBpZiAocG9zIDwgaikgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBqKSk7XG4gICAgICAgICAgICAgIHZhciBuc3RhcnQgPSBqO1xuICAgICAgICAgICAgICBmb3IgKCsrajsgaiA8IGkgJiYgY291bnRzQXNOdW0udGVzdCh0eXBlc1tqXSk7ICsraikge31cbiAgICAgICAgICAgICAgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMiwgbnN0YXJ0LCBqKSk7XG4gICAgICAgICAgICAgIHBvcyA9IGo7XG4gICAgICAgICAgICB9IGVsc2UgKytqO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocG9zIDwgaSkgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcmRlclswXS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9eXFxzKy8pKSkge1xuICAgICAgICBvcmRlclswXS5mcm9tID0gbVswXS5sZW5ndGg7XG4gICAgICAgIG9yZGVyLnVuc2hpZnQobmV3IEJpZGlTcGFuKDAsIDAsIG1bMF0ubGVuZ3RoKSk7XG4gICAgICB9XG4gICAgICBpZiAobHN0KG9yZGVyKS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9cXHMrJC8pKSkge1xuICAgICAgICBsc3Qob3JkZXIpLnRvIC09IG1bMF0ubGVuZ3RoO1xuICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBsZW4gLSBtWzBdLmxlbmd0aCwgbGVuKSk7XG4gICAgICB9XG4gICAgICBpZiAob3JkZXJbMF0ubGV2ZWwgPT0gMilcbiAgICAgICAgb3JkZXIudW5zaGlmdChuZXcgQmlkaVNwYW4oMSwgb3JkZXJbMF0udG8sIG9yZGVyWzBdLnRvKSk7XG4gICAgICBpZiAob3JkZXJbMF0ubGV2ZWwgIT0gbHN0KG9yZGVyKS5sZXZlbClcbiAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4ob3JkZXJbMF0ubGV2ZWwsIGxlbiwgbGVuKSk7XG5cbiAgICAgIHJldHVybiBvcmRlcjtcbiAgICB9O1xuICB9KSgpO1xuXG4gIC8vIFRIRSBFTkRcblxuICBDb2RlTWlycm9yLnZlcnNpb24gPSBcIjUuMTQuMlwiO1xuXG4gIHJldHVybiBDb2RlTWlycm9yO1xufSk7XG4iLCIvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qcyNMNDFcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5lbW9qaSA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtb2ppcyA9IFtcIjpibHVzaDpcIixcIjpzY3JlYW06XCIsXCI6c21pcms6XCIsXCI6c21pbGV5OlwiLFwiOnN0dWNrX291dF90b25ndWVfY2xvc2VkX2V5ZXM6XCIsXCI6c3R1Y2tfb3V0X3Rvbmd1ZV93aW5raW5nX2V5ZTpcIixcIjpyYWdlOlwiLFwiOmRpc2FwcG9pbnRlZDpcIixcIjpzb2I6XCIsXCI6a2lzc2luZ19oZWFydDpcIixcIjp3aW5rOlwiLFwiOnBlbnNpdmU6XCIsXCI6Y29uZm91bmRlZDpcIixcIjpmbHVzaGVkOlwiLFwiOnJlbGF4ZWQ6XCIsXCI6bWFzazpcIixcIjpoZWFydDpcIixcIjpicm9rZW5faGVhcnQ6XCIsXCI6c3Vubnk6XCIsXCI6dW1icmVsbGE6XCIsXCI6Y2xvdWQ6XCIsXCI6c25vd2ZsYWtlOlwiLFwiOnNub3dtYW46XCIsXCI6emFwOlwiLFwiOmN5Y2xvbmU6XCIsXCI6Zm9nZ3k6XCIsXCI6b2NlYW46XCIsXCI6Y2F0OlwiLFwiOmRvZzpcIixcIjptb3VzZTpcIixcIjpoYW1zdGVyOlwiLFwiOnJhYmJpdDpcIixcIjp3b2xmOlwiLFwiOmZyb2c6XCIsXCI6dGlnZXI6XCIsXCI6a29hbGE6XCIsXCI6YmVhcjpcIixcIjpwaWc6XCIsXCI6cGlnX25vc2U6XCIsXCI6Y293OlwiLFwiOmJvYXI6XCIsXCI6bW9ua2V5X2ZhY2U6XCIsXCI6bW9ua2V5OlwiLFwiOmhvcnNlOlwiLFwiOnJhY2Vob3JzZTpcIixcIjpjYW1lbDpcIixcIjpzaGVlcDpcIixcIjplbGVwaGFudDpcIixcIjpwYW5kYV9mYWNlOlwiLFwiOnNuYWtlOlwiLFwiOmJpcmQ6XCIsXCI6YmFieV9jaGljazpcIixcIjpoYXRjaGVkX2NoaWNrOlwiLFwiOmhhdGNoaW5nX2NoaWNrOlwiLFwiOmNoaWNrZW46XCIsXCI6cGVuZ3VpbjpcIixcIjp0dXJ0bGU6XCIsXCI6YnVnOlwiLFwiOmhvbmV5YmVlOlwiLFwiOmFudDpcIixcIjpiZWV0bGU6XCIsXCI6c25haWw6XCIsXCI6b2N0b3B1czpcIixcIjp0cm9waWNhbF9maXNoOlwiLFwiOmZpc2g6XCIsXCI6d2hhbGU6XCIsXCI6d2hhbGUyOlwiLFwiOmRvbHBoaW46XCIsXCI6Y293MjpcIixcIjpyYW06XCIsXCI6cmF0OlwiLFwiOndhdGVyX2J1ZmZhbG86XCIsXCI6dGlnZXIyOlwiLFwiOnJhYmJpdDI6XCIsXCI6ZHJhZ29uOlwiLFwiOmdvYXQ6XCIsXCI6cm9vc3RlcjpcIixcIjpkb2cyOlwiLFwiOnBpZzI6XCIsXCI6bW91c2UyOlwiLFwiOm94OlwiLFwiOmRyYWdvbl9mYWNlOlwiLFwiOmJsb3dmaXNoOlwiLFwiOmNyb2NvZGlsZTpcIixcIjpkcm9tZWRhcnlfY2FtZWw6XCIsXCI6bGVvcGFyZDpcIixcIjpjYXQyOlwiLFwiOnBvb2RsZTpcIixcIjpwYXdfcHJpbnRzOlwiLFwiOmJvdXF1ZXQ6XCIsXCI6Y2hlcnJ5X2Jsb3Nzb206XCIsXCI6dHVsaXA6XCIsXCI6Zm91cl9sZWFmX2Nsb3ZlcjpcIixcIjpyb3NlOlwiLFwiOnN1bmZsb3dlcjpcIixcIjpoaWJpc2N1czpcIixcIjptYXBsZV9sZWFmOlwiLFwiOmxlYXZlczpcIixcIjpmYWxsZW5fbGVhZjpcIixcIjpoZXJiOlwiLFwiOm11c2hyb29tOlwiLFwiOmNhY3R1czpcIixcIjpwYWxtX3RyZWU6XCIsXCI6ZXZlcmdyZWVuX3RyZWU6XCIsXCI6ZGVjaWR1b3VzX3RyZWU6XCIsXCI6Y2hlc3RudXQ6XCIsXCI6c2VlZGxpbmc6XCIsXCI6Ymxvc3NvbTpcIixcIjplYXJfb2ZfcmljZTpcIixcIjpzaGVsbDpcIixcIjpnbG9iZV93aXRoX21lcmlkaWFuczpcIixcIjpzdW5fd2l0aF9mYWNlOlwiLFwiOmZ1bGxfbW9vbl93aXRoX2ZhY2U6XCIsXCI6bmV3X21vb25fd2l0aF9mYWNlOlwiLFwiOm5ld19tb29uOlwiLFwiOndheGluZ19jcmVzY2VudF9tb29uOlwiLFwiOmZpcnN0X3F1YXJ0ZXJfbW9vbjpcIixcIjp3YXhpbmdfZ2liYm91c19tb29uOlwiLFwiOmZ1bGxfbW9vbjpcIixcIjp3YW5pbmdfZ2liYm91c19tb29uOlwiLFwiOmxhc3RfcXVhcnRlcl9tb29uOlwiLFwiOndhbmluZ19jcmVzY2VudF9tb29uOlwiLFwiOmxhc3RfcXVhcnRlcl9tb29uX3dpdGhfZmFjZTpcIixcIjpmaXJzdF9xdWFydGVyX21vb25fd2l0aF9mYWNlOlwiLFwiOm1vb246XCIsXCI6ZWFydGhfYWZyaWNhOlwiLFwiOmVhcnRoX2FtZXJpY2FzOlwiLFwiOmVhcnRoX2FzaWE6XCIsXCI6dm9sY2FubzpcIixcIjptaWxreV93YXk6XCIsXCI6cGFydGx5X3N1bm55OlwiLFwiOm9jdG9jYXQ6XCIsXCI6c3F1aXJyZWw6XCIsXCI6YmFtYm9vOlwiLFwiOmdpZnRfaGVhcnQ6XCIsXCI6ZG9sbHM6XCIsXCI6c2Nob29sX3NhdGNoZWw6XCIsXCI6bW9ydGFyX2JvYXJkOlwiLFwiOmZsYWdzOlwiLFwiOmZpcmV3b3JrczpcIixcIjpzcGFya2xlcjpcIixcIjp3aW5kX2NoaW1lOlwiLFwiOnJpY2Vfc2NlbmU6XCIsXCI6amFja19vX2xhbnRlcm46XCIsXCI6Z2hvc3Q6XCIsXCI6c2FudGE6XCIsXCI6Y2hyaXN0bWFzX3RyZWU6XCIsXCI6Z2lmdDpcIixcIjpiZWxsOlwiLFwiOm5vX2JlbGw6XCIsXCI6dGFuYWJhdGFfdHJlZTpcIixcIjp0YWRhOlwiLFwiOmNvbmZldHRpX2JhbGw6XCIsXCI6YmFsbG9vbjpcIixcIjpjcnlzdGFsX2JhbGw6XCIsXCI6Y2Q6XCIsXCI6ZHZkOlwiLFwiOmZsb3BweV9kaXNrOlwiLFwiOmNhbWVyYTpcIixcIjp2aWRlb19jYW1lcmE6XCIsXCI6bW92aWVfY2FtZXJhOlwiLFwiOmNvbXB1dGVyOlwiLFwiOnR2OlwiLFwiOmlwaG9uZTpcIixcIjpwaG9uZTpcIixcIjp0ZWxlcGhvbmU6XCIsXCI6dGVsZXBob25lX3JlY2VpdmVyOlwiLFwiOnBhZ2VyOlwiLFwiOmZheDpcIixcIjptaW5pZGlzYzpcIixcIjp2aHM6XCIsXCI6c291bmQ6XCIsXCI6c3BlYWtlcjpcIixcIjptdXRlOlwiLFwiOmxvdWRzcGVha2VyOlwiLFwiOm1lZ2E6XCIsXCI6aG91cmdsYXNzOlwiLFwiOmhvdXJnbGFzc19mbG93aW5nX3NhbmQ6XCIsXCI6YWxhcm1fY2xvY2s6XCIsXCI6d2F0Y2g6XCIsXCI6cmFkaW86XCIsXCI6c2F0ZWxsaXRlOlwiLFwiOmxvb3A6XCIsXCI6bWFnOlwiLFwiOm1hZ19yaWdodDpcIixcIjp1bmxvY2s6XCIsXCI6bG9jazpcIixcIjpsb2NrX3dpdGhfaW5rX3BlbjpcIixcIjpjbG9zZWRfbG9ja193aXRoX2tleTpcIixcIjprZXk6XCIsXCI6YnVsYjpcIixcIjpmbGFzaGxpZ2h0OlwiLFwiOmhpZ2hfYnJpZ2h0bmVzczpcIixcIjpsb3dfYnJpZ2h0bmVzczpcIixcIjplbGVjdHJpY19wbHVnOlwiLFwiOmJhdHRlcnk6XCIsXCI6Y2FsbGluZzpcIixcIjplbWFpbDpcIixcIjptYWlsYm94OlwiLFwiOnBvc3Rib3g6XCIsXCI6YmF0aDpcIixcIjpiYXRodHViOlwiLFwiOnNob3dlcjpcIixcIjp0b2lsZXQ6XCIsXCI6d3JlbmNoOlwiLFwiOm51dF9hbmRfYm9sdDpcIixcIjpoYW1tZXI6XCIsXCI6c2VhdDpcIixcIjptb25leWJhZzpcIixcIjp5ZW46XCIsXCI6ZG9sbGFyOlwiLFwiOnBvdW5kOlwiLFwiOmV1cm86XCIsXCI6Y3JlZGl0X2NhcmQ6XCIsXCI6bW9uZXlfd2l0aF93aW5nczpcIixcIjplLW1haWw6XCIsXCI6aW5ib3hfdHJheTpcIixcIjpvdXRib3hfdHJheTpcIixcIjplbnZlbG9wZTpcIixcIjppbmNvbWluZ19lbnZlbG9wZTpcIixcIjpwb3N0YWxfaG9ybjpcIixcIjptYWlsYm94X2Nsb3NlZDpcIixcIjptYWlsYm94X3dpdGhfbWFpbDpcIixcIjptYWlsYm94X3dpdGhfbm9fbWFpbDpcIixcIjpkb29yOlwiLFwiOnNtb2tpbmc6XCIsXCI6Ym9tYjpcIixcIjpndW46XCIsXCI6aG9jaG86XCIsXCI6cGlsbDpcIixcIjpzeXJpbmdlOlwiLFwiOnBhZ2VfZmFjaW5nX3VwOlwiLFwiOnBhZ2Vfd2l0aF9jdXJsOlwiLFwiOmJvb2ttYXJrX3RhYnM6XCIsXCI6YmFyX2NoYXJ0OlwiLFwiOmNoYXJ0X3dpdGhfdXB3YXJkc190cmVuZDpcIixcIjpjaGFydF93aXRoX2Rvd253YXJkc190cmVuZDpcIixcIjpzY3JvbGw6XCIsXCI6Y2xpcGJvYXJkOlwiLFwiOmNhbGVuZGFyOlwiLFwiOmRhdGU6XCIsXCI6Y2FyZF9pbmRleDpcIixcIjpmaWxlX2ZvbGRlcjpcIixcIjpvcGVuX2ZpbGVfZm9sZGVyOlwiLFwiOnNjaXNzb3JzOlwiLFwiOnB1c2hwaW46XCIsXCI6cGFwZXJjbGlwOlwiLFwiOmJsYWNrX25pYjpcIixcIjpwZW5jaWwyOlwiLFwiOnN0cmFpZ2h0X3J1bGVyOlwiLFwiOnRyaWFuZ3VsYXJfcnVsZXI6XCIsXCI6Y2xvc2VkX2Jvb2s6XCIsXCI6Z3JlZW5fYm9vazpcIixcIjpibHVlX2Jvb2s6XCIsXCI6b3JhbmdlX2Jvb2s6XCIsXCI6bm90ZWJvb2s6XCIsXCI6bm90ZWJvb2tfd2l0aF9kZWNvcmF0aXZlX2NvdmVyOlwiLFwiOmxlZGdlcjpcIixcIjpib29rczpcIixcIjpib29rbWFyazpcIixcIjpuYW1lX2JhZGdlOlwiLFwiOm1pY3Jvc2NvcGU6XCIsXCI6dGVsZXNjb3BlOlwiLFwiOm5ld3NwYXBlcjpcIixcIjpmb290YmFsbDpcIixcIjpiYXNrZXRiYWxsOlwiLFwiOnNvY2NlcjpcIixcIjpiYXNlYmFsbDpcIixcIjp0ZW5uaXM6XCIsXCI6OGJhbGw6XCIsXCI6cnVnYnlfZm9vdGJhbGw6XCIsXCI6Ym93bGluZzpcIixcIjpnb2xmOlwiLFwiOm1vdW50YWluX2JpY3ljbGlzdDpcIixcIjpiaWN5Y2xpc3Q6XCIsXCI6aG9yc2VfcmFjaW5nOlwiLFwiOnNub3dib2FyZGVyOlwiLFwiOnN3aW1tZXI6XCIsXCI6c3VyZmVyOlwiLFwiOnNraTpcIixcIjpzcGFkZXM6XCIsXCI6aGVhcnRzOlwiLFwiOmNsdWJzOlwiLFwiOmRpYW1vbmRzOlwiLFwiOmdlbTpcIixcIjpyaW5nOlwiLFwiOnRyb3BoeTpcIixcIjptdXNpY2FsX3Njb3JlOlwiLFwiOm11c2ljYWxfa2V5Ym9hcmQ6XCIsXCI6dmlvbGluOlwiLFwiOnNwYWNlX2ludmFkZXI6XCIsXCI6dmlkZW9fZ2FtZTpcIixcIjpibGFja19qb2tlcjpcIixcIjpmbG93ZXJfcGxheWluZ19jYXJkczpcIixcIjpnYW1lX2RpZTpcIixcIjpkYXJ0OlwiLFwiOm1haGpvbmc6XCIsXCI6Y2xhcHBlcjpcIixcIjptZW1vOlwiLFwiOnBlbmNpbDpcIixcIjpib29rOlwiLFwiOmFydDpcIixcIjptaWNyb3Bob25lOlwiLFwiOmhlYWRwaG9uZXM6XCIsXCI6dHJ1bXBldDpcIixcIjpzYXhvcGhvbmU6XCIsXCI6Z3VpdGFyOlwiLFwiOnNob2U6XCIsXCI6c2FuZGFsOlwiLFwiOmhpZ2hfaGVlbDpcIixcIjpsaXBzdGljazpcIixcIjpib290OlwiLFwiOnNoaXJ0OlwiLFwiOnRzaGlydDpcIixcIjpuZWNrdGllOlwiLFwiOndvbWFuc19jbG90aGVzOlwiLFwiOmRyZXNzOlwiLFwiOnJ1bm5pbmdfc2hpcnRfd2l0aF9zYXNoOlwiLFwiOmplYW5zOlwiLFwiOmtpbW9ubzpcIixcIjpiaWtpbmk6XCIsXCI6cmliYm9uOlwiLFwiOnRvcGhhdDpcIixcIjpjcm93bjpcIixcIjp3b21hbnNfaGF0OlwiLFwiOm1hbnNfc2hvZTpcIixcIjpjbG9zZWRfdW1icmVsbGE6XCIsXCI6YnJpZWZjYXNlOlwiLFwiOmhhbmRiYWc6XCIsXCI6cG91Y2g6XCIsXCI6cHVyc2U6XCIsXCI6ZXllZ2xhc3NlczpcIixcIjpmaXNoaW5nX3BvbGVfYW5kX2Zpc2g6XCIsXCI6Y29mZmVlOlwiLFwiOnRlYTpcIixcIjpzYWtlOlwiLFwiOmJhYnlfYm90dGxlOlwiLFwiOmJlZXI6XCIsXCI6YmVlcnM6XCIsXCI6Y29ja3RhaWw6XCIsXCI6dHJvcGljYWxfZHJpbms6XCIsXCI6d2luZV9nbGFzczpcIixcIjpmb3JrX2FuZF9rbmlmZTpcIixcIjpwaXp6YTpcIixcIjpoYW1idXJnZXI6XCIsXCI6ZnJpZXM6XCIsXCI6cG91bHRyeV9sZWc6XCIsXCI6bWVhdF9vbl9ib25lOlwiLFwiOnNwYWdoZXR0aTpcIixcIjpjdXJyeTpcIixcIjpmcmllZF9zaHJpbXA6XCIsXCI6YmVudG86XCIsXCI6c3VzaGk6XCIsXCI6ZmlzaF9jYWtlOlwiLFwiOnJpY2VfYmFsbDpcIixcIjpyaWNlX2NyYWNrZXI6XCIsXCI6cmljZTpcIixcIjpyYW1lbjpcIixcIjpzdGV3OlwiLFwiOm9kZW46XCIsXCI6ZGFuZ286XCIsXCI6ZWdnOlwiLFwiOmJyZWFkOlwiLFwiOmRvdWdobnV0OlwiLFwiOmN1c3RhcmQ6XCIsXCI6aWNlY3JlYW06XCIsXCI6aWNlX2NyZWFtOlwiLFwiOnNoYXZlZF9pY2U6XCIsXCI6YmlydGhkYXk6XCIsXCI6Y2FrZTpcIixcIjpjb29raWU6XCIsXCI6Y2hvY29sYXRlX2JhcjpcIixcIjpjYW5keTpcIixcIjpsb2xsaXBvcDpcIixcIjpob25leV9wb3Q6XCIsXCI6YXBwbGU6XCIsXCI6Z3JlZW5fYXBwbGU6XCIsXCI6dGFuZ2VyaW5lOlwiLFwiOmxlbW9uOlwiLFwiOmNoZXJyaWVzOlwiLFwiOmdyYXBlczpcIixcIjp3YXRlcm1lbG9uOlwiLFwiOnN0cmF3YmVycnk6XCIsXCI6cGVhY2g6XCIsXCI6bWVsb246XCIsXCI6YmFuYW5hOlwiLFwiOnBlYXI6XCIsXCI6cGluZWFwcGxlOlwiLFwiOnN3ZWV0X3BvdGF0bzpcIixcIjplZ2dwbGFudDpcIixcIjp0b21hdG86XCIsXCI6Y29ybjpcIixcIjphbGllbjpcIixcIjphbmdlbDpcIixcIjphbmdlcjpcIixcIjphbmdyeTpcIixcIjphbmd1aXNoZWQ6XCIsXCI6YXN0b25pc2hlZDpcIixcIjpiYWJ5OlwiLFwiOmJsdWVfaGVhcnQ6XCIsXCI6Ymx1c2g6XCIsXCI6Ym9vbTpcIixcIjpib3c6XCIsXCI6Ym93dGllOlwiLFwiOmJveTpcIixcIjpicmlkZV93aXRoX3ZlaWw6XCIsXCI6YnJva2VuX2hlYXJ0OlwiLFwiOmJ1c3RfaW5fc2lsaG91ZXR0ZTpcIixcIjpidXN0c19pbl9zaWxob3VldHRlOlwiLFwiOmNsYXA6XCIsXCI6Y29sZF9zd2VhdDpcIixcIjpjb2xsaXNpb246XCIsXCI6Y29uZm91bmRlZDpcIixcIjpjb25mdXNlZDpcIixcIjpjb25zdHJ1Y3Rpb25fd29ya2VyOlwiLFwiOmNvcDpcIixcIjpjb3VwbGVfd2l0aF9oZWFydDpcIixcIjpjb3VwbGU6XCIsXCI6Y291cGxla2lzczpcIixcIjpjcnk6XCIsXCI6Y3J5aW5nX2NhdF9mYWNlOlwiLFwiOmN1cGlkOlwiLFwiOmRhbmNlcjpcIixcIjpkYW5jZXJzOlwiLFwiOmRhc2g6XCIsXCI6ZGlzYXBwb2ludGVkOlwiLFwiOmRpenp5X2ZhY2U6XCIsXCI6ZGl6enk6XCIsXCI6ZHJvcGxldDpcIixcIjplYXI6XCIsXCI6ZXhjbGFtYXRpb246XCIsXCI6ZXhwcmVzc2lvbmxlc3M6XCIsXCI6ZXllczpcIixcIjpmYWNlcHVuY2g6XCIsXCI6ZmFtaWx5OlwiLFwiOmZlYXJmdWw6XCIsXCI6ZmVlbHNnb29kOlwiLFwiOmZlZXQ6XCIsXCI6ZmlubmFkaWU6XCIsXCI6ZmlyZTpcIixcIjpmaXN0OlwiLFwiOmZsdXNoZWQ6XCIsXCI6ZnJvd25pbmc6XCIsXCI6Z2lybDpcIixcIjpnb2JlcnNlcms6XCIsXCI6Z29kbW9kZTpcIixcIjpncmVlbl9oZWFydDpcIixcIjpncmV5X2V4Y2xhbWF0aW9uOlwiLFwiOmdyZXlfcXVlc3Rpb246XCIsXCI6Z3JpbWFjaW5nOlwiLFwiOmdyaW46XCIsXCI6Z3Jpbm5pbmc6XCIsXCI6Z3VhcmRzbWFuOlwiLFwiOmhhaXJjdXQ6XCIsXCI6aGFuZDpcIixcIjpoYW5rZXk6XCIsXCI6aGVhcl9ub19ldmlsOlwiLFwiOmhlYXJ0X2V5ZXNfY2F0OlwiLFwiOmhlYXJ0X2V5ZXM6XCIsXCI6aGVhcnQ6XCIsXCI6aGVhcnRiZWF0OlwiLFwiOmhlYXJ0cHVsc2U6XCIsXCI6aHVydHJlYWxiYWQ6XCIsXCI6aHVzaGVkOlwiLFwiOmltcDpcIixcIjppbmZvcm1hdGlvbl9kZXNrX3BlcnNvbjpcIixcIjppbm5vY2VudDpcIixcIjpqYXBhbmVzZV9nb2JsaW46XCIsXCI6amFwYW5lc2Vfb2dyZTpcIixcIjpqb3lfY2F0OlwiLFwiOmpveTpcIixcIjpraXNzOlwiLFwiOmtpc3NpbmdfY2F0OlwiLFwiOmtpc3NpbmdfY2xvc2VkX2V5ZXM6XCIsXCI6a2lzc2luZ19oZWFydDpcIixcIjpraXNzaW5nX3NtaWxpbmdfZXllczpcIixcIjpraXNzaW5nOlwiLFwiOmxhdWdoaW5nOlwiLFwiOmxpcHM6XCIsXCI6bG92ZV9sZXR0ZXI6XCIsXCI6bWFuX3dpdGhfZ3VhX3BpX21hbzpcIixcIjptYW5fd2l0aF90dXJiYW46XCIsXCI6bWFuOlwiLFwiOm1hc2s6XCIsXCI6bWFzc2FnZTpcIixcIjptZXRhbDpcIixcIjptdXNjbGU6XCIsXCI6bXVzaWNhbF9ub3RlOlwiLFwiOm5haWxfY2FyZTpcIixcIjpuZWNrYmVhcmQ6XCIsXCI6bmV1dHJhbF9mYWNlOlwiLFwiOm5vX2dvb2Q6XCIsXCI6bm9fbW91dGg6XCIsXCI6bm9zZTpcIixcIjpub3RlczpcIixcIjpva19oYW5kOlwiLFwiOm9rX3dvbWFuOlwiLFwiOm9sZGVyX21hbjpcIixcIjpvbGRlcl93b21hbjpcIixcIjpvcGVuX2hhbmRzOlwiLFwiOm9wZW5fbW91dGg6XCIsXCI6cGVuc2l2ZTpcIixcIjpwZXJzZXZlcmU6XCIsXCI6cGVyc29uX2Zyb3duaW5nOlwiLFwiOnBlcnNvbl93aXRoX2Jsb25kX2hhaXI6XCIsXCI6cGVyc29uX3dpdGhfcG91dGluZ19mYWNlOlwiLFwiOnBvaW50X2Rvd246XCIsXCI6cG9pbnRfbGVmdDpcIixcIjpwb2ludF9yaWdodDpcIixcIjpwb2ludF91cF8yOlwiLFwiOnBvaW50X3VwOlwiLFwiOnBvb3A6XCIsXCI6cG91dGluZ19jYXQ6XCIsXCI6cHJheTpcIixcIjpwcmluY2VzczpcIixcIjpwdW5jaDpcIixcIjpwdXJwbGVfaGVhcnQ6XCIsXCI6cXVlc3Rpb246XCIsXCI6cmFnZTpcIixcIjpyYWdlMTpcIixcIjpyYWdlMjpcIixcIjpyYWdlMzpcIixcIjpyYWdlNDpcIixcIjpyYWlzZWRfaGFuZDpcIixcIjpyYWlzZWRfaGFuZHM6XCIsXCI6cmVsYXhlZDpcIixcIjpyZWxpZXZlZDpcIixcIjpyZXZvbHZpbmdfaGVhcnRzOlwiLFwiOnJ1bm5lcjpcIixcIjpydW5uaW5nOlwiLFwiOnNhdGlzZmllZDpcIixcIjpzY3JlYW1fY2F0OlwiLFwiOnNjcmVhbTpcIixcIjpzZWVfbm9fZXZpbDpcIixcIjpzaGl0OlwiLFwiOnNrdWxsOlwiLFwiOnNsZWVwaW5nOlwiLFwiOnNsZWVweTpcIixcIjpzbWlsZV9jYXQ6XCIsXCI6c21pbGU6XCIsXCI6c21pbGV5X2NhdDpcIixcIjpzbWlsZXk6XCIsXCI6c21pbGluZ19pbXA6XCIsXCI6c21pcmtfY2F0OlwiLFwiOnNtaXJrOlwiLFwiOnNvYjpcIixcIjpzcGFya2xpbmdfaGVhcnQ6XCIsXCI6c3BhcmtsZXM6XCIsXCI6c3BlYWtfbm9fZXZpbDpcIixcIjpzcGVlY2hfYmFsbG9vbjpcIixcIjpzdGFyOlwiLFwiOnN0YXIyOlwiLFwiOnN0dWNrX291dF90b25ndWVfY2xvc2VkX2V5ZXM6XCIsXCI6c3R1Y2tfb3V0X3Rvbmd1ZV93aW5raW5nX2V5ZTpcIixcIjpzdHVja19vdXRfdG9uZ3VlOlwiLFwiOnN1bmdsYXNzZXM6XCIsXCI6c3VzcGVjdDpcIixcIjpzd2VhdF9kcm9wczpcIixcIjpzd2VhdF9zbWlsZTpcIixcIjpzd2VhdDpcIixcIjp0aG91Z2h0X2JhbGxvb246XCIsXCI6LTE6XCIsXCI6dGh1bWJzZG93bjpcIixcIjp0aHVtYnN1cDpcIixcIjorMTpcIixcIjp0aXJlZF9mYWNlOlwiLFwiOnRvbmd1ZTpcIixcIjp0cml1bXBoOlwiLFwiOnRyb2xsZmFjZTpcIixcIjp0d29faGVhcnRzOlwiLFwiOnR3b19tZW5faG9sZGluZ19oYW5kczpcIixcIjp0d29fd29tZW5faG9sZGluZ19oYW5kczpcIixcIjp1bmFtdXNlZDpcIixcIjp2OlwiLFwiOndhbGtpbmc6XCIsXCI6d2F2ZTpcIixcIjp3ZWFyeTpcIixcIjp3aW5rMjpcIixcIjp3aW5rOlwiLFwiOndvbWFuOlwiLFwiOndvcnJpZWQ6XCIsXCI6eWVsbG93X2hlYXJ0OlwiLFwiOnl1bTpcIixcIjp6eno6XCIsXCI6MTA5OlwiLFwiOmhvdXNlOlwiLFwiOmhvdXNlX3dpdGhfZ2FyZGVuOlwiLFwiOnNjaG9vbDpcIixcIjpvZmZpY2U6XCIsXCI6cG9zdF9vZmZpY2U6XCIsXCI6aG9zcGl0YWw6XCIsXCI6YmFuazpcIixcIjpjb252ZW5pZW5jZV9zdG9yZTpcIixcIjpsb3ZlX2hvdGVsOlwiLFwiOmhvdGVsOlwiLFwiOndlZGRpbmc6XCIsXCI6Y2h1cmNoOlwiLFwiOmRlcGFydG1lbnRfc3RvcmU6XCIsXCI6ZXVyb3BlYW5fcG9zdF9vZmZpY2U6XCIsXCI6Y2l0eV9zdW5yaXNlOlwiLFwiOmNpdHlfc3Vuc2V0OlwiLFwiOmphcGFuZXNlX2Nhc3RsZTpcIixcIjpldXJvcGVhbl9jYXN0bGU6XCIsXCI6dGVudDpcIixcIjpmYWN0b3J5OlwiLFwiOnRva3lvX3Rvd2VyOlwiLFwiOmphcGFuOlwiLFwiOm1vdW50X2Z1amk6XCIsXCI6c3VucmlzZV9vdmVyX21vdW50YWluczpcIixcIjpzdW5yaXNlOlwiLFwiOnN0YXJzOlwiLFwiOnN0YXR1ZV9vZl9saWJlcnR5OlwiLFwiOmJyaWRnZV9hdF9uaWdodDpcIixcIjpjYXJvdXNlbF9ob3JzZTpcIixcIjpyYWluYm93OlwiLFwiOmZlcnJpc193aGVlbDpcIixcIjpmb3VudGFpbjpcIixcIjpyb2xsZXJfY29hc3RlcjpcIixcIjpzaGlwOlwiLFwiOnNwZWVkYm9hdDpcIixcIjpib2F0OlwiLFwiOnNhaWxib2F0OlwiLFwiOnJvd2JvYXQ6XCIsXCI6YW5jaG9yOlwiLFwiOnJvY2tldDpcIixcIjphaXJwbGFuZTpcIixcIjpoZWxpY29wdGVyOlwiLFwiOnN0ZWFtX2xvY29tb3RpdmU6XCIsXCI6dHJhbTpcIixcIjptb3VudGFpbl9yYWlsd2F5OlwiLFwiOmJpa2U6XCIsXCI6YWVyaWFsX3RyYW13YXk6XCIsXCI6c3VzcGVuc2lvbl9yYWlsd2F5OlwiLFwiOm1vdW50YWluX2NhYmxld2F5OlwiLFwiOnRyYWN0b3I6XCIsXCI6Ymx1ZV9jYXI6XCIsXCI6b25jb21pbmdfYXV0b21vYmlsZTpcIixcIjpjYXI6XCIsXCI6cmVkX2NhcjpcIixcIjp0YXhpOlwiLFwiOm9uY29taW5nX3RheGk6XCIsXCI6YXJ0aWN1bGF0ZWRfbG9ycnk6XCIsXCI6YnVzOlwiLFwiOm9uY29taW5nX2J1czpcIixcIjpyb3RhdGluZ19saWdodDpcIixcIjpwb2xpY2VfY2FyOlwiLFwiOm9uY29taW5nX3BvbGljZV9jYXI6XCIsXCI6ZmlyZV9lbmdpbmU6XCIsXCI6YW1idWxhbmNlOlwiLFwiOm1pbmlidXM6XCIsXCI6dHJ1Y2s6XCIsXCI6dHJhaW46XCIsXCI6c3RhdGlvbjpcIixcIjp0cmFpbjI6XCIsXCI6YnVsbGV0dHJhaW5fZnJvbnQ6XCIsXCI6YnVsbGV0dHJhaW5fc2lkZTpcIixcIjpsaWdodF9yYWlsOlwiLFwiOm1vbm9yYWlsOlwiLFwiOnJhaWx3YXlfY2FyOlwiLFwiOnRyb2xsZXlidXM6XCIsXCI6dGlja2V0OlwiLFwiOmZ1ZWxwdW1wOlwiLFwiOnZlcnRpY2FsX3RyYWZmaWNfbGlnaHQ6XCIsXCI6dHJhZmZpY19saWdodDpcIixcIjp3YXJuaW5nOlwiLFwiOmNvbnN0cnVjdGlvbjpcIixcIjpiZWdpbm5lcjpcIixcIjphdG06XCIsXCI6c2xvdF9tYWNoaW5lOlwiLFwiOmJ1c3N0b3A6XCIsXCI6YmFyYmVyOlwiLFwiOmhvdHNwcmluZ3M6XCIsXCI6Y2hlY2tlcmVkX2ZsYWc6XCIsXCI6Y3Jvc3NlZF9mbGFnczpcIixcIjppemFrYXlhX2xhbnRlcm46XCIsXCI6bW95YWk6XCIsXCI6Y2lyY3VzX3RlbnQ6XCIsXCI6cGVyZm9ybWluZ19hcnRzOlwiLFwiOnJvdW5kX3B1c2hwaW46XCIsXCI6dHJpYW5ndWxhcl9mbGFnX29uX3Bvc3Q6XCIsXCI6anA6XCIsXCI6a3I6XCIsXCI6Y246XCIsXCI6dXM6XCIsXCI6ZnI6XCIsXCI6ZXM6XCIsXCI6aXQ6XCIsXCI6cnU6XCIsXCI6Z2I6XCIsXCI6dWs6XCIsXCI6ZGU6XCIsXCI6MTAwOlwiLFwiOjEyMzQ6XCIsXCI6b25lOlwiLFwiOnR3bzpcIixcIjp0aHJlZTpcIixcIjpmb3VyOlwiLFwiOmZpdmU6XCIsXCI6c2l4OlwiLFwiOnNldmVuOlwiLFwiOmVpZ2h0OlwiLFwiOm5pbmU6XCIsXCI6a2V5Y2FwX3RlbjpcIixcIjp6ZXJvOlwiLFwiOmhhc2g6XCIsXCI6c3ltYm9sczpcIixcIjphcnJvd19iYWNrd2FyZDpcIixcIjphcnJvd19kb3duOlwiLFwiOmFycm93X2ZvcndhcmQ6XCIsXCI6YXJyb3dfbGVmdDpcIixcIjpjYXBpdGFsX2FiY2Q6XCIsXCI6YWJjZDpcIixcIjphYmM6XCIsXCI6YXJyb3dfbG93ZXJfbGVmdDpcIixcIjphcnJvd19sb3dlcl9yaWdodDpcIixcIjphcnJvd19yaWdodDpcIixcIjphcnJvd191cDpcIixcIjphcnJvd191cHBlcl9sZWZ0OlwiLFwiOmFycm93X3VwcGVyX3JpZ2h0OlwiLFwiOmFycm93X2RvdWJsZV9kb3duOlwiLFwiOmFycm93X2RvdWJsZV91cDpcIixcIjphcnJvd19kb3duX3NtYWxsOlwiLFwiOmFycm93X2hlYWRpbmdfZG93bjpcIixcIjphcnJvd19oZWFkaW5nX3VwOlwiLFwiOmxlZnR3YXJkc19hcnJvd193aXRoX2hvb2s6XCIsXCI6YXJyb3dfcmlnaHRfaG9vazpcIixcIjpsZWZ0X3JpZ2h0X2Fycm93OlwiLFwiOmFycm93X3VwX2Rvd246XCIsXCI6YXJyb3dfdXBfc21hbGw6XCIsXCI6YXJyb3dzX2Nsb2Nrd2lzZTpcIixcIjphcnJvd3NfY291bnRlcmNsb2Nrd2lzZTpcIixcIjpyZXdpbmQ6XCIsXCI6ZmFzdF9mb3J3YXJkOlwiLFwiOmluZm9ybWF0aW9uX3NvdXJjZTpcIixcIjpvazpcIixcIjp0d2lzdGVkX3JpZ2h0d2FyZHNfYXJyb3dzOlwiLFwiOnJlcGVhdDpcIixcIjpyZXBlYXRfb25lOlwiLFwiOm5ldzpcIixcIjp0b3A6XCIsXCI6dXA6XCIsXCI6Y29vbDpcIixcIjpmcmVlOlwiLFwiOm5nOlwiLFwiOmNpbmVtYTpcIixcIjprb2tvOlwiLFwiOnNpZ25hbF9zdHJlbmd0aDpcIixcIjp1NTI3MjpcIixcIjp1NTQwODpcIixcIjp1NTViNjpcIixcIjp1NjMwNzpcIixcIjp1NjcwODpcIixcIjp1NjcwOTpcIixcIjp1NmU4MDpcIixcIjp1NzEyMTpcIixcIjp1NzUzMzpcIixcIjp1N2E3YTpcIixcIjp1Nzk4MTpcIixcIjpzYTpcIixcIjpyZXN0cm9vbTpcIixcIjptZW5zOlwiLFwiOndvbWVuczpcIixcIjpiYWJ5X3N5bWJvbDpcIixcIjpub19zbW9raW5nOlwiLFwiOnBhcmtpbmc6XCIsXCI6d2hlZWxjaGFpcjpcIixcIjptZXRybzpcIixcIjpiYWdnYWdlX2NsYWltOlwiLFwiOmFjY2VwdDpcIixcIjp3YzpcIixcIjpwb3RhYmxlX3dhdGVyOlwiLFwiOnB1dF9saXR0ZXJfaW5faXRzX3BsYWNlOlwiLFwiOnNlY3JldDpcIixcIjpjb25ncmF0dWxhdGlvbnM6XCIsXCI6bTpcIixcIjpwYXNzcG9ydF9jb250cm9sOlwiLFwiOmxlZnRfbHVnZ2FnZTpcIixcIjpjdXN0b21zOlwiLFwiOmlkZW9ncmFwaF9hZHZhbnRhZ2U6XCIsXCI6Y2w6XCIsXCI6c29zOlwiLFwiOmlkOlwiLFwiOm5vX2VudHJ5X3NpZ246XCIsXCI6dW5kZXJhZ2U6XCIsXCI6bm9fbW9iaWxlX3Bob25lczpcIixcIjpkb19ub3RfbGl0dGVyOlwiLFwiOm5vbi1wb3RhYmxlX3dhdGVyOlwiLFwiOm5vX2JpY3ljbGVzOlwiLFwiOm5vX3BlZGVzdHJpYW5zOlwiLFwiOmNoaWxkcmVuX2Nyb3NzaW5nOlwiLFwiOm5vX2VudHJ5OlwiLFwiOmVpZ2h0X3Nwb2tlZF9hc3RlcmlzazpcIixcIjplaWdodF9wb2ludGVkX2JsYWNrX3N0YXI6XCIsXCI6aGVhcnRfZGVjb3JhdGlvbjpcIixcIjp2czpcIixcIjp2aWJyYXRpb25fbW9kZTpcIixcIjptb2JpbGVfcGhvbmVfb2ZmOlwiLFwiOmNoYXJ0OlwiLFwiOmN1cnJlbmN5X2V4Y2hhbmdlOlwiLFwiOmFyaWVzOlwiLFwiOnRhdXJ1czpcIixcIjpnZW1pbmk6XCIsXCI6Y2FuY2VyOlwiLFwiOmxlbzpcIixcIjp2aXJnbzpcIixcIjpsaWJyYTpcIixcIjpzY29ycGl1czpcIixcIjpzYWdpdHRhcml1czpcIixcIjpjYXByaWNvcm46XCIsXCI6YXF1YXJpdXM6XCIsXCI6cGlzY2VzOlwiLFwiOm9waGl1Y2h1czpcIixcIjpzaXhfcG9pbnRlZF9zdGFyOlwiLFwiOm5lZ2F0aXZlX3NxdWFyZWRfY3Jvc3NfbWFyazpcIixcIjphOlwiLFwiOmI6XCIsXCI6YWI6XCIsXCI6bzI6XCIsXCI6ZGlhbW9uZF9zaGFwZV93aXRoX2FfZG90X2luc2lkZTpcIixcIjpyZWN5Y2xlOlwiLFwiOmVuZDpcIixcIjpvbjpcIixcIjpzb29uOlwiLFwiOmNsb2NrMTpcIixcIjpjbG9jazEzMDpcIixcIjpjbG9jazEwOlwiLFwiOmNsb2NrMTAzMDpcIixcIjpjbG9jazExOlwiLFwiOmNsb2NrMTEzMDpcIixcIjpjbG9jazEyOlwiLFwiOmNsb2NrMTIzMDpcIixcIjpjbG9jazI6XCIsXCI6Y2xvY2syMzA6XCIsXCI6Y2xvY2szOlwiLFwiOmNsb2NrMzMwOlwiLFwiOmNsb2NrNDpcIixcIjpjbG9jazQzMDpcIixcIjpjbG9jazU6XCIsXCI6Y2xvY2s1MzA6XCIsXCI6Y2xvY2s2OlwiLFwiOmNsb2NrNjMwOlwiLFwiOmNsb2NrNzpcIixcIjpjbG9jazczMDpcIixcIjpjbG9jazg6XCIsXCI6Y2xvY2s4MzA6XCIsXCI6Y2xvY2s5OlwiLFwiOmNsb2NrOTMwOlwiLFwiOmhlYXZ5X2RvbGxhcl9zaWduOlwiLFwiOmNvcHlyaWdodDpcIixcIjpyZWdpc3RlcmVkOlwiLFwiOnRtOlwiLFwiOng6XCIsXCI6aGVhdnlfZXhjbGFtYXRpb25fbWFyazpcIixcIjpiYW5nYmFuZzpcIixcIjppbnRlcnJvYmFuZzpcIixcIjpvOlwiLFwiOmhlYXZ5X211bHRpcGxpY2F0aW9uX3g6XCIsXCI6aGVhdnlfcGx1c19zaWduOlwiLFwiOmhlYXZ5X21pbnVzX3NpZ246XCIsXCI6aGVhdnlfZGl2aXNpb25fc2lnbjpcIixcIjp3aGl0ZV9mbG93ZXI6XCIsXCI6aGVhdnlfY2hlY2tfbWFyazpcIixcIjpiYWxsb3RfYm94X3dpdGhfY2hlY2s6XCIsXCI6cmFkaW9fYnV0dG9uOlwiLFwiOmxpbms6XCIsXCI6Y3VybHlfbG9vcDpcIixcIjp3YXZ5X2Rhc2g6XCIsXCI6cGFydF9hbHRlcm5hdGlvbl9tYXJrOlwiLFwiOnRyaWRlbnQ6XCIsXCI6YmxhY2tfc3F1YXJlOlwiLFwiOndoaXRlX3NxdWFyZTpcIixcIjp3aGl0ZV9jaGVja19tYXJrOlwiLFwiOmJsYWNrX3NxdWFyZV9idXR0b246XCIsXCI6d2hpdGVfc3F1YXJlX2J1dHRvbjpcIixcIjpibGFja19jaXJjbGU6XCIsXCI6d2hpdGVfY2lyY2xlOlwiLFwiOnJlZF9jaXJjbGU6XCIsXCI6bGFyZ2VfYmx1ZV9jaXJjbGU6XCIsXCI6bGFyZ2VfYmx1ZV9kaWFtb25kOlwiLFwiOmxhcmdlX29yYW5nZV9kaWFtb25kOlwiLFwiOnNtYWxsX2JsdWVfZGlhbW9uZDpcIixcIjpzbWFsbF9vcmFuZ2VfZGlhbW9uZDpcIixcIjpzbWFsbF9yZWRfdHJpYW5nbGU6XCIsXCI6c21hbGxfcmVkX3RyaWFuZ2xlX2Rvd246XCIsXCI6c2hpcGl0OlwiXSxcbiAgICAgICAgdGVzdCA9IC9cXDpbYS16MC05X1xcLVxcK10rXFw6L2c7XG5cbiAgICBmdW5jdGlvbiBlbW9qaShzb21lU3RyaW5nLCB1cmwsIHNpemUpIHtcbiAgICAgICAgcmV0dXJuIHNvbWVTdHJpbmcucmVwbGFjZSh0ZXN0LCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChlbW9qaXMuaW5kZXhPZihtYXRjaCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBTdHJpbmcobWF0Y2gpLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxpbWcgY2xhc3M9XCJlbW9qaVwiIHRpdGxlPVwiOicgKyBuYW1lICsgJzpcIiBhbHQ9XCInICsgbmFtZSArICdcIiBzcmM9XCInICsgdXJsICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJy5wbmdcIicgKyAoc2l6ZSA/ICgnIGhlaWdodD1cIicgKyBzaXplICsgJ1wiJykgOiAnJykgKyAnIC8+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZW1vamkubGlzdCA9IGVtb2ppcztcblxuICAgIHJldHVybiBlbW9qaTtcbn0pKTtcbiIsIi8vIENvcHlyaWdodCAyMDA5LTIwMTIgYnkgY29udHJpYnV0b3JzLCBNSVQgTGljZW5zZVxuLy8gdmltOiB0cz00IHN0cz00IHN3PTQgZXhwYW5kdGFiXG5cbi8vQWRkIHNlbWljb2xvbiB0byBwcmV2ZW50IElJRkUgZnJvbSBiZWluZyBwYXNzZWQgYXMgYXJndW1lbnQgdG8gY29uY2F0ZWQgY29kZS5cbjtcbi8vIE1vZHVsZSBzeXN0ZW1zIG1hZ2ljIGRhbmNlXG4oZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICAvLyBSZXF1aXJlSlNcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZGVmaW5lKGRlZmluaXRpb24pO1xuICAgIC8vIFlVSTNcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBZVUkgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIFlVSS5hZGQoXCJlczVcIiwgZGVmaW5pdGlvbik7XG4gICAgLy8gQ29tbW9uSlMgYW5kIDxzY3JpcHQ+XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVmaW5pdGlvbigpO1xuICAgIH1cbn0pKGZ1bmN0aW9uICgpIHtcblxuLyoqXG4gKiBCcmluZ3MgYW4gZW52aXJvbm1lbnQgYXMgY2xvc2UgdG8gRUNNQVNjcmlwdCA1IGNvbXBsaWFuY2VcbiAqIGFzIGlzIHBvc3NpYmxlIHdpdGggdGhlIGZhY2lsaXRpZXMgb2YgZXJzdHdoaWxlIGVuZ2luZXMuXG4gKlxuICogQW5ub3RhdGVkIEVTNTogaHR0cDovL2VzNS5naXRodWIuY29tLyAoc3BlY2lmaWMgbGlua3MgYmVsb3cpXG4gKiBFUzUgU3BlYzogaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL3B1YmxpY2F0aW9ucy9maWxlcy9FQ01BLVNUL0VjbWEtMjYyLnBkZlxuICogUmVxdWlyZWQgcmVhZGluZzogaHR0cDovL2phdmFzY3JpcHR3ZWJsb2cud29yZHByZXNzLmNvbS8yMDExLzEyLzA1L2V4dGVuZGluZy1qYXZhc2NyaXB0LW5hdGl2ZXMvXG4gKi9cblxuLy8gRVMtNSAxNS4xLjIuMlxuaWYgKHBhcnNlSW50KCcwOCcpICE9PSA4KSB7XG4gICAgcGFyc2VJbnQgPSAoZnVuY3Rpb24gKG9yaWdQYXJzZUludCkge1xuICAgICAgICB2YXIgaGV4UmVnZXggPSAvXjBbeFhdLztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHBhcnNlSW50RVM1KHN0ciwgcmFkaXgpIHtcbiAgICAgICAgICAgIHN0ciA9IFN0cmluZyhzdHIpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghK3JhZGl4KSB7XG4gICAgICAgICAgICAgICAgcmFkaXggPSBoZXhSZWdleC50ZXN0KHN0cikgPyAxNiA6IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9yaWdQYXJzZUludChzdHIsIHJhZGl4KTtcbiAgICAgICAgfTtcbiAgICB9KHBhcnNlSW50KSk7XG59XG5cbi8vXG4vLyBGdW5jdGlvblxuLy8gPT09PT09PT1cbi8vXG5cbi8vIEVTLTUgMTUuMy40LjVcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjMuNC41XG5cbmZ1bmN0aW9uIEVtcHR5KCkge31cblxuaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkge1xuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gYmluZCh0aGF0KSB7IC8vIC5sZW5ndGggaXMgMVxuICAgICAgICAvLyAxLiBMZXQgVGFyZ2V0IGJlIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcztcbiAgICAgICAgLy8gMi4gSWYgSXNDYWxsYWJsZShUYXJnZXQpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgXCIgKyB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIExldCBBIGJlIGEgbmV3IChwb3NzaWJseSBlbXB0eSkgaW50ZXJuYWwgbGlzdCBvZiBhbGwgb2YgdGhlXG4gICAgICAgIC8vICAgYXJndW1lbnQgdmFsdWVzIHByb3ZpZGVkIGFmdGVyIHRoaXNBcmcgKGFyZzEsIGFyZzIgZXRjKSwgaW4gb3JkZXIuXG4gICAgICAgIC8vIFhYWCBzbGljZWRBcmdzIHdpbGwgc3RhbmQgaW4gZm9yIFwiQVwiIGlmIHVzZWRcbiAgICAgICAgdmFyIGFyZ3MgPSBfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAxKTsgLy8gZm9yIG5vcm1hbCBjYWxsXG4gICAgICAgIC8vIDQuIExldCBGIGJlIGEgbmV3IG5hdGl2ZSBFQ01BU2NyaXB0IG9iamVjdC5cbiAgICAgICAgLy8gMTEuIFNldCB0aGUgW1tQcm90b3R5cGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRoZSBzdGFuZGFyZFxuICAgICAgICAvLyAgIGJ1aWx0LWluIEZ1bmN0aW9uIHByb3RvdHlwZSBvYmplY3QgYXMgc3BlY2lmaWVkIGluIDE1LjMuMy4xLlxuICAgICAgICAvLyAxMi4gU2V0IHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjEuXG4gICAgICAgIC8vIDEzLiBTZXQgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4yLlxuICAgICAgICAvLyAxNC4gU2V0IHRoZSBbW0hhc0luc3RhbmNlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4zLlxuICAgICAgICB2YXIgYmluZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgLy8gMTUuMy40LjUuMiBbW0NvbnN0cnVjdF1dXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsXG4gICAgICAgICAgICAgICAgLy8gRiB0aGF0IHdhcyBjcmVhdGVkIHVzaW5nIHRoZSBiaW5kIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBsaXN0IG9mIGFyZ3VtZW50cyBFeHRyYUFyZ3MsIHRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOlxuICAgICAgICAgICAgICAgIC8vIDEuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV1cbiAgICAgICAgICAgICAgICAvLyAgIGludGVybmFsIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDIuIElmIHRhcmdldCBoYXMgbm8gW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2QsIGFcbiAgICAgICAgICAgICAgICAvLyAgIFR5cGVFcnJvciBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAgICAgICAgICAgIC8vIDMuIExldCBib3VuZEFyZ3MgYmUgdGhlIHZhbHVlIG9mIEYncyBbW0JvdW5kQXJnc11dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuICAgICAgICAgICAgICAgIC8vICAgbGlzdCBib3VuZEFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIgZm9sbG93ZWQgYnkgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAvLyAgIHZhbHVlcyBhcyB0aGUgbGlzdCBFeHRyYUFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgbWV0aG9kIG9mIHRhcmdldCBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoX0FycmF5X3NsaWNlXy5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0KHJlc3VsdCkgPT09IHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4xIFtbQ2FsbF1dXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kIG9mIGEgZnVuY3Rpb24gb2JqZWN0LCBGLFxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdhcyBjcmVhdGVkIHVzaW5nIHRoZSBiaW5kIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHZhbHVlIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZ1xuICAgICAgICAgICAgICAgIC8vIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAgICAgICAgICAgICAvLyAxLiBMZXQgYm91bmRBcmdzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZEFyZ3NdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMi4gTGV0IGJvdW5kVGhpcyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRUaGlzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDMuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDQuIExldCBhcmdzIGJlIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vICAgdmFsdWVzIGFzIHRoZSBsaXN0IEV4dHJhQXJncyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICAvLyA1LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2RcbiAgICAgICAgICAgICAgICAvLyAgIG9mIHRhcmdldCBwcm92aWRpbmcgYm91bmRUaGlzIGFzIHRoZSB0aGlzIHZhbHVlIGFuZFxuICAgICAgICAgICAgICAgIC8vICAgcHJvdmlkaW5nIGFyZ3MgYXMgdGhlIGFyZ3VtZW50cy5cblxuICAgICAgICAgICAgICAgIC8vIGVxdWl2OiB0YXJnZXQuY2FsbCh0aGlzLCAuLi5ib3VuZEFyZ3MsIC4uLmFyZ3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgdGhhdCxcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoX0FycmF5X3NsaWNlXy5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMTUuIElmIHRoZSBbW0NsYXNzXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgVGFyZ2V0IGlzIFwiRnVuY3Rpb25cIiwgdGhlblxuICAgICAgICAvLyAgICAgYS4gTGV0IEwgYmUgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBUYXJnZXQgbWludXMgdGhlIGxlbmd0aCBvZiBBLlxuICAgICAgICAvLyAgICAgYi4gU2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gZWl0aGVyIDAgb3IgTCwgd2hpY2hldmVyIGlzXG4gICAgICAgIC8vICAgICAgIGxhcmdlci5cbiAgICAgICAgLy8gMTYuIEVsc2Ugc2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gMC5cblxuICAgICAgICB2YXIgYm91bmRMZW5ndGggPSBNYXRoLm1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuXG4gICAgICAgIC8vIDE3LiBTZXQgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byB0aGUgdmFsdWVzXG4gICAgICAgIC8vICAgc3BlY2lmaWVkIGluIDE1LjMuNS4xLlxuICAgICAgICB2YXIgYm91bmRBcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm91bmRBcmdzLnB1c2goXCIkXCIgKyBpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFhYWCBCdWlsZCBhIGR5bmFtaWMgZnVuY3Rpb24gd2l0aCBkZXNpcmVkIGFtb3VudCBvZiBhcmd1bWVudHMgaXMgdGhlIG9ubHkgXG4gICAgICAgIC8vIHdheSB0byBzZXQgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBhIGZ1bmN0aW9uLiBcbiAgICAgICAgLy8gSW4gZW52aXJvbm1lbnRzIHdoZXJlIENvbnRlbnQgU2VjdXJpdHkgUG9saWNpZXMgZW5hYmxlZCAoQ2hyb21lIGV4dGVuc2lvbnMsIFxuICAgICAgICAvLyBmb3IgZXguKSBhbGwgdXNlIG9mIGV2YWwgb3IgRnVuY3Rpb24gY29zdHJ1Y3RvciB0aHJvd3MgYW4gZXhjZXB0aW9uLiBcbiAgICAgICAgLy8gSG93ZXZlciBpbiBhbGwgb2YgdGhlc2UgZW52aXJvbm1lbnRzIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGV4aXN0cyBcbiAgICAgICAgLy8gYW5kIHNvIHRoaXMgY29kZSB3aWxsIG5ldmVyIGJlIGV4ZWN1dGVkLlxuICAgICAgICB2YXIgYm91bmQgPSBGdW5jdGlvbihcImJpbmRlclwiLCBcInJldHVybiBmdW5jdGlvbihcIiArIGJvdW5kQXJncy5qb2luKFwiLFwiKSArIFwiKXtyZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1cIikoYmluZGVyKTtcblxuICAgICAgICBpZiAodGFyZ2V0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgICAgIGJvdW5kLnByb3RvdHlwZSA9IG5ldyBFbXB0eSgpO1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZGFuZ2xpbmcgcmVmZXJlbmNlcy5cbiAgICAgICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDE4LiBTZXQgdGhlIFtbRXh0ZW5zaWJsZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgdG8gdHJ1ZS5cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDE5LiBMZXQgdGhyb3dlciBiZSB0aGUgW1tUaHJvd1R5cGVFcnJvcl1dIGZ1bmN0aW9uIE9iamVjdCAoMTMuMi4zKS5cbiAgICAgICAgLy8gMjAuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG4gICAgICAgIC8vICAgYXJndW1lbnRzIFwiY2FsbGVyXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlciwgW1tTZXRdXTpcbiAgICAgICAgLy8gICB0aHJvd2VyLCBbW0VudW1lcmFibGVdXTogZmFsc2UsIFtbQ29uZmlndXJhYmxlXV06IGZhbHNlfSwgYW5kXG4gICAgICAgIC8vICAgZmFsc2UuXG4gICAgICAgIC8vIDIxLiBDYWxsIHRoZSBbW0RlZmluZU93blByb3BlcnR5XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEYgd2l0aFxuICAgICAgICAvLyAgIGFyZ3VtZW50cyBcImFyZ3VtZW50c1wiLCBQcm9wZXJ0eURlc2NyaXB0b3Ige1tbR2V0XV06IHRocm93ZXIsXG4gICAgICAgIC8vICAgW1tTZXRdXTogdGhyb3dlciwgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiBmYWxzZX0sXG4gICAgICAgIC8vICAgYW5kIGZhbHNlLlxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gTk9URSBGdW5jdGlvbiBvYmplY3RzIGNyZWF0ZWQgdXNpbmcgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgZG8gbm90XG4gICAgICAgIC8vIGhhdmUgYSBwcm90b3R5cGUgcHJvcGVydHkgb3IgdGhlIFtbQ29kZV1dLCBbW0Zvcm1hbFBhcmFtZXRlcnNdXSwgYW5kXG4gICAgICAgIC8vIFtbU2NvcGVdXSBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyBYWFggY2FuJ3QgZGVsZXRlIHByb3RvdHlwZSBpbiBwdXJlLWpzLlxuXG4gICAgICAgIC8vIDIyLiBSZXR1cm4gRi5cbiAgICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH07XG59XG5cbi8vIFNob3J0Y3V0IHRvIGFuIG9mdGVuIGFjY2Vzc2VkIHByb3BlcnRpZXMsIGluIG9yZGVyIHRvIGF2b2lkIG11bHRpcGxlXG4vLyBkZXJlZmVyZW5jZSB0aGF0IGNvc3RzIHVuaXZlcnNhbGx5LlxuLy8gX1BsZWFzZSBub3RlOiBTaG9ydGN1dHMgYXJlIGRlZmluZWQgYWZ0ZXIgYEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kYCBhcyB3ZVxuLy8gdXMgaXQgaW4gZGVmaW5pbmcgc2hvcnRjdXRzLlxudmFyIGNhbGwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDtcbnZhciBwcm90b3R5cGVPZkFycmF5ID0gQXJyYXkucHJvdG90eXBlO1xudmFyIHByb3RvdHlwZU9mT2JqZWN0ID0gT2JqZWN0LnByb3RvdHlwZTtcbnZhciBfQXJyYXlfc2xpY2VfID0gcHJvdG90eXBlT2ZBcnJheS5zbGljZTtcbi8vIEhhdmluZyBhIHRvU3RyaW5nIGxvY2FsIHZhcmlhYmxlIG5hbWUgYnJlYWtzIGluIE9wZXJhIHNvIHVzZSBfdG9TdHJpbmcuXG52YXIgX3RvU3RyaW5nID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0LnRvU3RyaW5nKTtcbnZhciBvd25zID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0Lmhhc093blByb3BlcnR5KTtcblxuLy8gSWYgSlMgZW5naW5lIHN1cHBvcnRzIGFjY2Vzc29ycyBjcmVhdGluZyBzaG9ydGN1dHMuXG52YXIgZGVmaW5lR2V0dGVyO1xudmFyIGRlZmluZVNldHRlcjtcbnZhciBsb29rdXBHZXR0ZXI7XG52YXIgbG9va3VwU2V0dGVyO1xudmFyIHN1cHBvcnRzQWNjZXNzb3JzO1xuaWYgKChzdXBwb3J0c0FjY2Vzc29ycyA9IG93bnMocHJvdG90eXBlT2ZPYmplY3QsIFwiX19kZWZpbmVHZXR0ZXJfX1wiKSkpIHtcbiAgICBkZWZpbmVHZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19kZWZpbmVHZXR0ZXJfXyk7XG4gICAgZGVmaW5lU2V0dGVyID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0Ll9fZGVmaW5lU2V0dGVyX18pO1xuICAgIGxvb2t1cEdldHRlciA9IGNhbGwuYmluZChwcm90b3R5cGVPZk9iamVjdC5fX2xvb2t1cEdldHRlcl9fKTtcbiAgICBsb29rdXBTZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19sb29rdXBTZXR0ZXJfXyk7XG59XG5cbi8vXG4vLyBBcnJheVxuLy8gPT09PT1cbi8vXG5cbi8vIEVTNSAxNS40LjQuMTJcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xMlxuLy8gRGVmYXVsdCB2YWx1ZSBmb3Igc2Vjb25kIHBhcmFtXG4vLyBbYnVnZml4LCBpZWx0OSwgb2xkIGJyb3dzZXJzXVxuLy8gSUUgPCA5IGJ1ZzogWzEsMl0uc3BsaWNlKDApLmpvaW4oXCJcIikgPT0gXCJcIiBidXQgc2hvdWxkIGJlIFwiMTJcIlxuaWYgKFsxLDJdLnNwbGljZSgwKS5sZW5ndGggIT0gMikge1xuICAgIHZhciBhcnJheV9zcGxpY2UgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlO1xuICAgIHZhciBhcnJheV9wdXNoID0gQXJyYXkucHJvdG90eXBlLnB1c2g7XG4gICAgdmFyIGFycmF5X3Vuc2hpZnQgPSBBcnJheS5wcm90b3R5cGUudW5zaGlmdDtcblxuICAgIGlmIChmdW5jdGlvbigpIHsgLy8gdGVzdCBJRSA8IDkgdG8gc3BsaWNlIGJ1ZyAtIHNlZSBpc3N1ZSAjMTM4XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcnJheShsKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICAgICAgICAgIGEudW5zaGlmdChsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhcnJheSA9IFtdXG4gICAgICAgICAgICAsIGxlbmd0aEJlZm9yZVxuICAgICAgICA7XG5cbiAgICAgICAgYXJyYXkuc3BsaWNlLmJpbmQoYXJyYXksIDAsIDApLmFwcGx5KG51bGwsIG1ha2VBcnJheSgyMCkpO1xuICAgICAgICBhcnJheS5zcGxpY2UuYmluZChhcnJheSwgMCwgMCkuYXBwbHkobnVsbCwgbWFrZUFycmF5KDI2KSk7XG5cbiAgICAgICAgbGVuZ3RoQmVmb3JlID0gYXJyYXkubGVuZ3RoOyAvLzIwXG4gICAgICAgIGFycmF5LnNwbGljZSg1LCAwLCBcIlhYWFwiKTsgLy8gYWRkIG9uZSBlbGVtZW50XG5cbiAgICAgICAgaWYgKGxlbmd0aEJlZm9yZSArIDEgPT0gYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsvLyBoYXMgcmlnaHQgc3BsaWNlIGltcGxlbWVudGF0aW9uIHdpdGhvdXQgYnVnc1xuICAgICAgICB9XG4gICAgICAgIC8vIGVsc2Uge1xuICAgICAgICAvLyAgICBJRTggYnVnXG4gICAgICAgIC8vIH1cbiAgICB9KCkpIHsvL0lFIDYvN1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24oc3RhcnQsIGRlbGV0ZUNvdW50KSB7XG4gICAgICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheV9zcGxpY2UuYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9PT0gdm9pZCAwID8gMCA6IHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVDb3VudCA9PT0gdm9pZCAwID8gKHRoaXMubGVuZ3RoIC0gc3RhcnQpIDogZGVsZXRlQ291bnRcbiAgICAgICAgICAgICAgICBdLmNvbmNhdChfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAyKSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Ugey8vSUU4XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UgPSBmdW5jdGlvbihzdGFydCwgZGVsZXRlQ291bnQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRcbiAgICAgICAgICAgICAgICAsIGFyZ3MgPSBfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAyKVxuICAgICAgICAgICAgICAgICwgYWRkRWxlbWVudHNDb3VudCA9IGFyZ3MubGVuZ3RoXG4gICAgICAgICAgICA7XG5cbiAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgLy8gZGVmYXVsdFxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWxldGVDb3VudCA9PT0gdm9pZCAwKSB7IC8vIGRlZmF1bHRcbiAgICAgICAgICAgICAgICBkZWxldGVDb3VudCA9IHRoaXMubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhZGRFbGVtZW50c0NvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVDb3VudCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSB0aGlzLmxlbmd0aCkgeyAvLyB0aW55IG9wdGltaXNhdGlvbiAjMVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfcHVzaC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSAwKSB7IC8vIHRpbnkgb3B0aW1pc2F0aW9uICMyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheV91bnNoaWZ0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnNwbGljZSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9BcnJheV9zbGljZV8uY2FsbCh0aGlzLCBzdGFydCwgc3RhcnQgKyBkZWxldGVDb3VudCk7Ly8gZGVsZXRlIHBhcnRcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2guYXBwbHkoYXJncywgX0FycmF5X3NsaWNlXy5jYWxsKHRoaXMsIHN0YXJ0ICsgZGVsZXRlQ291bnQsIHRoaXMubGVuZ3RoKSk7Ly8gcmlnaHQgcGFydFxuICAgICAgICAgICAgICAgIGFyZ3MudW5zaGlmdC5hcHBseShhcmdzLCBfQXJyYXlfc2xpY2VfLmNhbGwodGhpcywgMCwgc3RhcnQpKTsvLyBsZWZ0IHBhcnRcblxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBhbGwgaXRlbXMgZnJvbSB0aGlzIGFycmF5IGFuZCByZXBsYWNlIGl0IHRvICdsZWZ0IHBhcnQnICsgX0FycmF5X3NsaWNlXy5jYWxsKGFyZ3VtZW50cywgMikgKyAncmlnaHQgcGFydCdcbiAgICAgICAgICAgICAgICBhcmdzLnVuc2hpZnQoMCwgdGhpcy5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlfc3BsaWNlLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFycmF5X3NwbGljZS5jYWxsKHRoaXMsIHN0YXJ0LCBkZWxldGVDb3VudCk7XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuLy8gRVM1IDE1LjQuNC4xMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjEzXG4vLyBSZXR1cm4gbGVuK2FyZ0NvdW50LlxuLy8gW2J1Z2ZpeCwgaWVsdDhdXG4vLyBJRSA8IDggYnVnOiBbXS51bnNoaWZ0KDApID09IHVuZGVmaW5lZCBidXQgc2hvdWxkIGJlIFwiMVwiXG5pZiAoW10udW5zaGlmdCgwKSAhPSAxKSB7XG4gICAgdmFyIGFycmF5X3Vuc2hpZnQgPSBBcnJheS5wcm90b3R5cGUudW5zaGlmdDtcbiAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBhcnJheV91bnNoaWZ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC4zLjJcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuMy4yXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5XG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgICBBcnJheS5pc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgICAgICAgcmV0dXJuIF90b1N0cmluZyhvYmopID09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICB9O1xufVxuXG4vLyBUaGUgSXNDYWxsYWJsZSgpIGNoZWNrIGluIHRoZSBBcnJheSBmdW5jdGlvbnNcbi8vIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggYSBzdHJpY3QgY2hlY2sgb24gdGhlXG4vLyBpbnRlcm5hbCBjbGFzcyBvZiB0aGUgb2JqZWN0IHRvIHRyYXAgY2FzZXMgd2hlcmVcbi8vIHRoZSBwcm92aWRlZCBmdW5jdGlvbiB3YXMgYWN0dWFsbHkgYSByZWd1bGFyXG4vLyBleHByZXNzaW9uIGxpdGVyYWwsIHdoaWNoIGluIFY4IGFuZFxuLy8gSmF2YVNjcmlwdENvcmUgaXMgYSB0eXBlb2YgXCJmdW5jdGlvblwiLiAgT25seSBpblxuLy8gVjggYXJlIHJlZ3VsYXIgZXhwcmVzc2lvbiBsaXRlcmFscyBwZXJtaXR0ZWQgYXNcbi8vIHJlZHVjZSBwYXJhbWV0ZXJzLCBzbyBpdCBpcyBkZXNpcmFibGUgaW4gdGhlXG4vLyBnZW5lcmFsIGNhc2UgZm9yIHRoZSBzaGltIHRvIG1hdGNoIHRoZSBtb3JlXG4vLyBzdHJpY3QgYW5kIGNvbW1vbiBiZWhhdmlvciBvZiByZWplY3RpbmcgcmVndWxhclxuLy8gZXhwcmVzc2lvbnMuXG5cbi8vIEVTNSAxNS40LjQuMThcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xOFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvYXJyYXkvZm9yRWFjaFxuXG4vLyBDaGVjayBmYWlsdXJlIG9mIGJ5LWluZGV4IGFjY2VzcyBvZiBzdHJpbmcgY2hhcmFjdGVycyAoSUUgPCA5KVxuLy8gYW5kIGZhaWx1cmUgb2YgYDAgaW4gYm94ZWRTdHJpbmdgIChSaGlubylcbnZhciBib3hlZFN0cmluZyA9IE9iamVjdChcImFcIiksXG4gICAgc3BsaXRTdHJpbmcgPSBib3hlZFN0cmluZ1swXSAhPSBcImFcIiB8fCAhKDAgaW4gYm94ZWRTdHJpbmcpO1xuLy8gQ2hlY2sgbm9kZSAwLjYuMjEgYnVnIHdoZXJlIHRoaXJkIHBhcmFtZXRlciBpcyBub3QgYm94ZWRcbnZhciBib3hlZEZvckVhY2ggPSB0cnVlO1xuaWYgKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChcImZvb1wiLCBmdW5jdGlvbihpdGVtLCBpLCBvYmopIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSBib3hlZEZvckVhY2ggPSBmYWxzZTtcbiAgICB9KTtcbn1cblxuaWYgKCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCB8fCAhYm94ZWRGb3JFYWNoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZ1biAvKiwgdGhpc3AqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdLFxuICAgICAgICAgICAgaSA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyAvLyBUT0RPIG1lc3NhZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlICgrK2kgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnZva2UgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggY2FsbCwgcGFzc2luZyBhcmd1bWVudHM6XG4gICAgICAgICAgICAgICAgLy8gY29udGV4dCwgcHJvcGVydHkgdmFsdWUsIHByb3BlcnR5IGtleSwgdGhpc0FyZyBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0XG4gICAgICAgICAgICAgICAgZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjE5XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMTlcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0NvcmVfSmF2YVNjcmlwdF8xLjVfUmVmZXJlbmNlL09iamVjdHMvQXJyYXkvbWFwXG5pZiAoIUFycmF5LnByb3RvdHlwZS5tYXApIHtcbiAgICBBcnJheS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKGZ1biAvKiwgdGhpc3AqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIGZ1bmN0aW9uIG9yIGlmIGNhbGxiYWNrIGlzIG5vdCBhIGNhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSBcIltvYmplY3QgRnVuY3Rpb25dXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4yMFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjIwXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9Db3JlX0phdmFTY3JpcHRfMS41X1JlZmVyZW5jZS9PYmplY3RzL0FycmF5L2ZpbHRlclxuaWYgKCFBcnJheS5wcm90b3R5cGUuZmlsdGVyKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIGZpbHRlcihmdW4gLyosIHRoaXNwICovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgcmVzdWx0ID0gW10sXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIGZ1bmN0aW9uIG9yIGlmIGNhbGxiYWNrIGlzIG5vdCBhIGNhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSBcIltvYmplY3QgRnVuY3Rpb25dXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmW2ldO1xuICAgICAgICAgICAgICAgIGlmIChmdW4uY2FsbCh0aGlzcCwgdmFsdWUsIGksIG9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTZcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xNlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZXZlcnlcbmlmICghQXJyYXkucHJvdG90eXBlLmV2ZXJ5KSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmV2ZXJ5ID0gZnVuY3Rpb24gZXZlcnkoZnVuIC8qLCB0aGlzcCAqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYgJiYgIWZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTdcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xN1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvc29tZVxuaWYgKCFBcnJheS5wcm90b3R5cGUuc29tZSkge1xuICAgIEFycmF5LnByb3RvdHlwZS5zb21lID0gZnVuY3Rpb24gc29tZShmdW4gLyosIHRoaXNwICovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsXG4gICAgICAgICAgICB0aGlzcCA9IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoX3RvU3RyaW5nKGZ1bikgIT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGZ1biArIFwiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBmdW4uY2FsbCh0aGlzcCwgc2VsZltpXSwgaSwgb2JqZWN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjIxXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMjFcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0NvcmVfSmF2YVNjcmlwdF8xLjVfUmVmZXJlbmNlL09iamVjdHMvQXJyYXkvcmVkdWNlXG5pZiAoIUFycmF5LnByb3RvdHlwZS5yZWR1Y2UpIHtcbiAgICBBcnJheS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gcmVkdWNlKGZ1biAvKiwgaW5pdGlhbCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIHZhbHVlIHRvIHJldHVybiBpZiBubyBpbml0aWFsIHZhbHVlIGFuZCBhbiBlbXB0eSBhcnJheVxuICAgICAgICBpZiAoIWxlbmd0aCAmJiBhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZWxmW2krK107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGFycmF5IGNvbnRhaW5zIG5vIHZhbHVlcywgbm8gaW5pdGlhbCB2YWx1ZSB0byByZXR1cm5cbiAgICAgICAgICAgICAgICBpZiAoKytpID49IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW4uY2FsbCh2b2lkIDAsIHJlc3VsdCwgc2VsZltpXSwgaSwgb2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4yMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjIyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9Db3JlX0phdmFTY3JpcHRfMS41X1JlZmVyZW5jZS9PYmplY3RzL0FycmF5L3JlZHVjZVJpZ2h0XG5pZiAoIUFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KGZ1biAvKiwgaW5pdGlhbCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIHZhbHVlIHRvIHJldHVybiBpZiBubyBpbml0aWFsIHZhbHVlLCBlbXB0eSBhcnJheVxuICAgICAgICBpZiAoIWxlbmd0aCAmJiBhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2VSaWdodCBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0LCBpID0gbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXJndW1lbnRzWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc2VsZltpLS1dO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBhcnJheSBjb250YWlucyBubyB2YWx1ZXMsIG5vIGluaXRpYWwgdmFsdWUgdG8gcmV0dXJuXG4gICAgICAgICAgICAgICAgaWYgKC0taSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlZHVjZVJpZ2h0IG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChpIGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW4uY2FsbCh2b2lkIDAsIHJlc3VsdCwgc2VsZltpXSwgaSwgb2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoaS0tKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xNFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5kZXhPZlxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCAoWzAsIDFdLmluZGV4T2YoMSwgMikgIT0gLTEpKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mKHNvdWdodCAvKiwgZnJvbUluZGV4ICovICkge1xuICAgICAgICB2YXIgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgaSA9IHRvSW50ZWdlcihhcmd1bWVudHNbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIG5lZ2F0aXZlIGluZGljZXNcbiAgICAgICAgaSA9IGkgPj0gMCA/IGkgOiBNYXRoLm1heCgwLCBsZW5ndGggKyBpKTtcbiAgICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBzZWxmW2ldID09PSBzb3VnaHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4xNVxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE1XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9sYXN0SW5kZXhPZlxuaWYgKCFBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YgfHwgKFswLCAxXS5sYXN0SW5kZXhPZigwLCAtMykgIT0gLTEpKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8pIHtcbiAgICAgICAgdmFyIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpID0gbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpID0gTWF0aC5taW4oaSwgdG9JbnRlZ2VyKGFyZ3VtZW50c1sxXSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBuZWdhdGl2ZSBpbmRpY2VzXG4gICAgICAgIGkgPSBpID49IDAgPyBpIDogbGVuZ3RoIC0gTWF0aC5hYnMoaSk7XG4gICAgICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBzb3VnaHQgPT09IHNlbGZbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cblxuLy9cbi8vIE9iamVjdFxuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUgMTUuMi4zLjE0XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS4yLjMuMTRcbmlmICghT2JqZWN0LmtleXMpIHtcbiAgICAvLyBodHRwOi8vd2hhdHRoZWhlYWRzYWlkLmNvbS8yMDEwLzEwL2Etc2FmZXItb2JqZWN0LWtleXMtY29tcGF0aWJpbGl0eS1pbXBsZW1lbnRhdGlvblxuICAgIHZhciBoYXNEb250RW51bUJ1ZyA9IHRydWUsXG4gICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAgIFwidG9TdHJpbmdcIixcbiAgICAgICAgICAgIFwidG9Mb2NhbGVTdHJpbmdcIixcbiAgICAgICAgICAgIFwidmFsdWVPZlwiLFxuICAgICAgICAgICAgXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICAgICAgXCJpc1Byb3RvdHlwZU9mXCIsXG4gICAgICAgICAgICBcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXG4gICAgICAgICAgICBcImNvbnN0cnVjdG9yXCJcbiAgICAgICAgXSxcbiAgICAgICAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGtleSBpbiB7XCJ0b1N0cmluZ1wiOiBudWxsfSkge1xuICAgICAgICBoYXNEb250RW51bUJ1ZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzID0gZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAodHlwZW9mIG9iamVjdCAhPSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmplY3QgIT0gXCJmdW5jdGlvblwiKSB8fFxuICAgICAgICAgICAgb2JqZWN0ID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdC5rZXlzIGNhbGxlZCBvbiBhIG5vbi1vYmplY3RcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKG93bnMob2JqZWN0LCBuYW1lKSkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZG9udEVudW1zTGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkb250RW51bSA9IGRvbnRFbnVtc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAob3ducyhvYmplY3QsIGRvbnRFbnVtKSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goZG9udEVudW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9O1xuXG59XG5cbi8vXG4vLyBEYXRlXG4vLyA9PT09XG4vL1xuXG4vLyBFUzUgMTUuOS41LjQzXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS45LjUuNDNcbi8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIFN0cmluZyB2YWx1ZSByZXByZXNlbnQgdGhlIGluc3RhbmNlIGluIHRpbWVcbi8vIHJlcHJlc2VudGVkIGJ5IHRoaXMgRGF0ZSBvYmplY3QuIFRoZSBmb3JtYXQgb2YgdGhlIFN0cmluZyBpcyB0aGUgRGF0ZSBUaW1lXG4vLyBzdHJpbmcgZm9ybWF0IGRlZmluZWQgaW4gMTUuOS4xLjE1LiBBbGwgZmllbGRzIGFyZSBwcmVzZW50IGluIHRoZSBTdHJpbmcuXG4vLyBUaGUgdGltZSB6b25lIGlzIGFsd2F5cyBVVEMsIGRlbm90ZWQgYnkgdGhlIHN1ZmZpeCBaLiBJZiB0aGUgdGltZSB2YWx1ZSBvZlxuLy8gdGhpcyBvYmplY3QgaXMgbm90IGEgZmluaXRlIE51bWJlciBhIFJhbmdlRXJyb3IgZXhjZXB0aW9uIGlzIHRocm93bi5cbnZhciBuZWdhdGl2ZURhdGUgPSAtNjIxOTg3NTUyMDAwMDAsXG4gICAgbmVnYXRpdmVZZWFyU3RyaW5nID0gXCItMDAwMDAxXCI7XG5pZiAoXG4gICAgIURhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nIHx8XG4gICAgKG5ldyBEYXRlKG5lZ2F0aXZlRGF0ZSkudG9JU09TdHJpbmcoKS5pbmRleE9mKG5lZ2F0aXZlWWVhclN0cmluZykgPT09IC0xKVxuKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgPSBmdW5jdGlvbiB0b0lTT1N0cmluZygpIHtcbiAgICAgICAgdmFyIHJlc3VsdCwgbGVuZ3RoLCB2YWx1ZSwgeWVhciwgbW9udGg7XG4gICAgICAgIGlmICghaXNGaW5pdGUodGhpcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgY2FsbGVkIG9uIG5vbi1maW5pdGUgdmFsdWUuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgeWVhciA9IHRoaXMuZ2V0VVRDRnVsbFllYXIoKTtcblxuICAgICAgICBtb250aCA9IHRoaXMuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbS9pc3N1ZXMvMTExXG4gICAgICAgIHllYXIgKz0gTWF0aC5mbG9vcihtb250aCAvIDEyKTtcbiAgICAgICAgbW9udGggPSAobW9udGggJSAxMiArIDEyKSAlIDEyO1xuXG4gICAgICAgIC8vIHRoZSBkYXRlIHRpbWUgc3RyaW5nIGZvcm1hdCBpcyBzcGVjaWZpZWQgaW4gMTUuOS4xLjE1LlxuICAgICAgICByZXN1bHQgPSBbbW9udGggKyAxLCB0aGlzLmdldFVUQ0RhdGUoKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0VVRDSG91cnMoKSwgdGhpcy5nZXRVVENNaW51dGVzKCksIHRoaXMuZ2V0VVRDU2Vjb25kcygpXTtcbiAgICAgICAgeWVhciA9IChcbiAgICAgICAgICAgICh5ZWFyIDwgMCA/IFwiLVwiIDogKHllYXIgPiA5OTk5ID8gXCIrXCIgOiBcIlwiKSkgK1xuICAgICAgICAgICAgKFwiMDAwMDBcIiArIE1hdGguYWJzKHllYXIpKVxuICAgICAgICAgICAgLnNsaWNlKDAgPD0geWVhciAmJiB5ZWFyIDw9IDk5OTkgPyAtNCA6IC02KVxuICAgICAgICApO1xuXG4gICAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRbbGVuZ3RoXTtcbiAgICAgICAgICAgIC8vIHBhZCBtb250aHMsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcyB0byBoYXZlIHR3b1xuICAgICAgICAgICAgLy8gZGlnaXRzLlxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMTApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbbGVuZ3RoXSA9IFwiMFwiICsgdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGFkIG1pbGxpc2Vjb25kcyB0byBoYXZlIHRocmVlIGRpZ2l0cy5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHllYXIgKyBcIi1cIiArIHJlc3VsdC5zbGljZSgwLCAyKS5qb2luKFwiLVwiKSArXG4gICAgICAgICAgICBcIlRcIiArIHJlc3VsdC5zbGljZSgyKS5qb2luKFwiOlwiKSArIFwiLlwiICtcbiAgICAgICAgICAgIChcIjAwMFwiICsgdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSkuc2xpY2UoLTMpICsgXCJaXCJcbiAgICAgICAgKTtcbiAgICB9O1xufVxuXG5cbi8vIEVTNSAxNS45LjUuNDRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjkuNS40NFxuLy8gVGhpcyBmdW5jdGlvbiBwcm92aWRlcyBhIFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIERhdGUgb2JqZWN0IGZvciB1c2UgYnlcbi8vIEpTT04uc3RyaW5naWZ5ICgxNS4xMi4zKS5cbnZhciBkYXRlVG9KU09OSXNTdXBwb3J0ZWQgPSBmYWxzZTtcbnRyeSB7XG4gICAgZGF0ZVRvSlNPTklzU3VwcG9ydGVkID0gKFxuICAgICAgICBEYXRlLnByb3RvdHlwZS50b0pTT04gJiZcbiAgICAgICAgbmV3IERhdGUoTmFOKS50b0pTT04oKSA9PT0gbnVsbCAmJlxuICAgICAgICBuZXcgRGF0ZShuZWdhdGl2ZURhdGUpLnRvSlNPTigpLmluZGV4T2YobmVnYXRpdmVZZWFyU3RyaW5nKSAhPT0gLTEgJiZcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9KU09OLmNhbGwoeyAvLyBnZW5lcmljXG4gICAgICAgICAgICB0b0lTT1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG59IGNhdGNoIChlKSB7XG59XG5pZiAoIWRhdGVUb0pTT05Jc1N1cHBvcnRlZCkge1xuICAgIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTihrZXkpIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgdG9KU09OIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCBhcmd1bWVudCBrZXksIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgLy8gc3RlcHMgYXJlIHRha2VuOlxuXG4gICAgICAgIC8vIDEuICBMZXQgTyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgVG9PYmplY3QsIGdpdmluZyBpdCB0aGUgdGhpc1xuICAgICAgICAvLyB2YWx1ZSBhcyBpdHMgYXJndW1lbnQuXG4gICAgICAgIC8vIDIuIExldCB0diBiZSB0b1ByaW1pdGl2ZShPLCBoaW50IE51bWJlcikuXG4gICAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgdHYgPSB0b1ByaW1pdGl2ZShvKSxcbiAgICAgICAgICAgIHRvSVNPO1xuICAgICAgICAvLyAzLiBJZiB0diBpcyBhIE51bWJlciBhbmQgaXMgbm90IGZpbml0ZSwgcmV0dXJuIG51bGwuXG4gICAgICAgIGlmICh0eXBlb2YgdHYgPT09IFwibnVtYmVyXCIgJiYgIWlzRmluaXRlKHR2KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNC4gTGV0IHRvSVNPIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tHZXRdXSBpbnRlcm5hbCBtZXRob2Qgb2ZcbiAgICAgICAgLy8gTyB3aXRoIGFyZ3VtZW50IFwidG9JU09TdHJpbmdcIi5cbiAgICAgICAgdG9JU08gPSBvLnRvSVNPU3RyaW5nO1xuICAgICAgICAvLyA1LiBJZiBJc0NhbGxhYmxlKHRvSVNPKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAodHlwZW9mIHRvSVNPICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInRvSVNPU3RyaW5nIHByb3BlcnR5IGlzIG5vdCBjYWxsYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyA2LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2ZcbiAgICAgICAgLy8gIHRvSVNPIHdpdGggTyBhcyB0aGUgdGhpcyB2YWx1ZSBhbmQgYW4gZW1wdHkgYXJndW1lbnQgbGlzdC5cbiAgICAgICAgcmV0dXJuIHRvSVNPLmNhbGwobyk7XG5cbiAgICAgICAgLy8gTk9URSAxIFRoZSBhcmd1bWVudCBpcyBpZ25vcmVkLlxuXG4gICAgICAgIC8vIE5PVEUgMiBUaGUgdG9KU09OIGZ1bmN0aW9uIGlzIGludGVudGlvbmFsbHkgZ2VuZXJpYzsgaXQgZG9lcyBub3RcbiAgICAgICAgLy8gcmVxdWlyZSB0aGF0IGl0cyB0aGlzIHZhbHVlIGJlIGEgRGF0ZSBvYmplY3QuIFRoZXJlZm9yZSwgaXQgY2FuIGJlXG4gICAgICAgIC8vIHRyYW5zZmVycmVkIHRvIG90aGVyIGtpbmRzIG9mIG9iamVjdHMgZm9yIHVzZSBhcyBhIG1ldGhvZC4gSG93ZXZlcixcbiAgICAgICAgLy8gaXQgZG9lcyByZXF1aXJlIHRoYXQgYW55IHN1Y2ggb2JqZWN0IGhhdmUgYSB0b0lTT1N0cmluZyBtZXRob2QuIEFuXG4gICAgICAgIC8vIG9iamVjdCBpcyBmcmVlIHRvIHVzZSB0aGUgYXJndW1lbnQga2V5IHRvIGZpbHRlciBpdHNcbiAgICAgICAgLy8gc3RyaW5naWZpY2F0aW9uLlxuICAgIH07XG59XG5cbi8vIEVTNSAxNS45LjQuMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuOS40LjJcbi8vIGJhc2VkIG9uIHdvcmsgc2hhcmVkIGJ5IERhbmllbCBGcmllc2VuIChkYW50bWFuKVxuLy8gaHR0cDovL2dpc3QuZ2l0aHViLmNvbS8zMDMyNDlcbmlmICghRGF0ZS5wYXJzZSB8fCBcIkRhdGUucGFyc2UgaXMgYnVnZ3lcIikge1xuICAgIC8vIFhYWCBnbG9iYWwgYXNzaWdubWVudCB3b24ndCB3b3JrIGluIGVtYmVkZGluZ3MgdGhhdCB1c2VcbiAgICAvLyBhbiBhbHRlcm5hdGUgb2JqZWN0IGZvciB0aGUgY29udGV4dC5cbiAgICBEYXRlID0gKGZ1bmN0aW9uKE5hdGl2ZURhdGUpIHtcblxuICAgICAgICAvLyBEYXRlLmxlbmd0aCA9PT0gN1xuICAgICAgICBmdW5jdGlvbiBEYXRlKFksIE0sIEQsIGgsIG0sIHMsIG1zKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTmF0aXZlRGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbGVuZ3RoID09IDEgJiYgU3RyaW5nKFkpID09PSBZID8gLy8gaXNTdHJpbmcoWSlcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZXhwbGljaXRseSBwYXNzIGl0IHRocm91Z2ggcGFyc2U6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOYXRpdmVEYXRlKERhdGUucGFyc2UoWSkpIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBtYW51YWxseSBtYWtlIGNhbGxzIGRlcGVuZGluZyBvbiBhcmd1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBsZW5ndGggaGVyZVxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gNyA/IG5ldyBOYXRpdmVEYXRlKFksIE0sIEQsIGgsIG0sIHMsIG1zKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSA2ID8gbmV3IE5hdGl2ZURhdGUoWSwgTSwgRCwgaCwgbSwgcykgOlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gNSA/IG5ldyBOYXRpdmVEYXRlKFksIE0sIEQsIGgsIG0pIDpcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID49IDQgPyBuZXcgTmF0aXZlRGF0ZShZLCBNLCBELCBoKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSAzID8gbmV3IE5hdGl2ZURhdGUoWSwgTSwgRCkgOlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gMiA/IG5ldyBOYXRpdmVEYXRlKFksIE0pIDpcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID49IDEgPyBuZXcgTmF0aXZlRGF0ZShZKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5hdGl2ZURhdGUoKTtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IG1peHVwcyB3aXRoIHVuZml4ZWQgRGF0ZSBvYmplY3RcbiAgICAgICAgICAgICAgICBkYXRlLmNvbnN0cnVjdG9yID0gRGF0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBOYXRpdmVEYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMTUuOS4xLjE1IERhdGUgVGltZSBTdHJpbmcgRm9ybWF0LlxuICAgICAgICB2YXIgaXNvRGF0ZUV4cHJlc3Npb24gPSBuZXcgUmVnRXhwKFwiXlwiICtcbiAgICAgICAgICAgIFwiKFxcXFxkezR9fFtcXCtcXC1dXFxcXGR7Nn0pXCIgKyAvLyBmb3VyLWRpZ2l0IHllYXIgY2FwdHVyZSBvciBzaWduICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gNi1kaWdpdCBleHRlbmRlZCB5ZWFyXG4gICAgICAgICAgICBcIig/Oi0oXFxcXGR7Mn0pXCIgKyAvLyBvcHRpb25hbCBtb250aCBjYXB0dXJlXG4gICAgICAgICAgICBcIig/Oi0oXFxcXGR7Mn0pXCIgKyAvLyBvcHRpb25hbCBkYXkgY2FwdHVyZVxuICAgICAgICAgICAgXCIoPzpcIiArIC8vIGNhcHR1cmUgaG91cnM6bWludXRlczpzZWNvbmRzLm1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIFwiVChcXFxcZHsyfSlcIiArIC8vIGhvdXJzIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIjooXFxcXGR7Mn0pXCIgKyAvLyBtaW51dGVzIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIig/OlwiICsgLy8gb3B0aW9uYWwgOnNlY29uZHMubWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIFwiOihcXFxcZHsyfSlcIiArIC8vIHNlY29uZHMgY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICBcIig/OihcXFxcLlxcXFxkezEsfSkpP1wiICsgLy8gbWlsbGlzZWNvbmRzIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIik/XCIgK1xuICAgICAgICAgICAgXCIoXCIgKyAvLyBjYXB0dXJlIFVUQyBvZmZzZXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgXCJafFwiICsgLy8gVVRDIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIig/OlwiICsgLy8gb2Zmc2V0IHNwZWNpZmllciArLy1ob3VyczptaW51dGVzXG4gICAgICAgICAgICAgICAgICAgIFwiKFstK10pXCIgKyAvLyBzaWduIGNhcHR1cmVcbiAgICAgICAgICAgICAgICAgICAgXCIoXFxcXGR7Mn0pXCIgKyAvLyBob3VycyBvZmZzZXQgY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICBcIjooXFxcXGR7Mn0pXCIgKyAvLyBtaW51dGVzIG9mZnNldCBjYXB0dXJlXG4gICAgICAgICAgICAgICAgXCIpXCIgK1xuICAgICAgICAgICAgXCIpPyk/KT8pP1wiICtcbiAgICAgICAgXCIkXCIpO1xuXG4gICAgICAgIHZhciBtb250aHMgPSBbXG4gICAgICAgICAgICAwLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNCwgMzY1XG4gICAgICAgIF07XG5cbiAgICAgICAgZnVuY3Rpb24gZGF5RnJvbU1vbnRoKHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IG1vbnRoID4gMSA/IDEgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBtb250aHNbbW9udGhdICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh5ZWFyIC0gMTk2OSArIHQpIC8gNCkgLVxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKHllYXIgLSAxOTAxICsgdCkgLyAxMDApICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh5ZWFyIC0gMTYwMSArIHQpIC8gNDAwKSArXG4gICAgICAgICAgICAgICAgMzY1ICogKHllYXIgLSAxOTcwKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvVVRDKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIobmV3IE5hdGl2ZURhdGUoMTk3MCwgMCwgMSwgMCwgMCwgMCwgdCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29weSBhbnkgY3VzdG9tIG1ldGhvZHMgYSAzcmQgcGFydHkgbGlicmFyeSBtYXkgaGF2ZSBhZGRlZFxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gTmF0aXZlRGF0ZSkge1xuICAgICAgICAgICAgRGF0ZVtrZXldID0gTmF0aXZlRGF0ZVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29weSBcIm5hdGl2ZVwiIG1ldGhvZHMgZXhwbGljaXRseTsgdGhleSBtYXkgYmUgbm9uLWVudW1lcmFibGVcbiAgICAgICAgRGF0ZS5ub3cgPSBOYXRpdmVEYXRlLm5vdztcbiAgICAgICAgRGF0ZS5VVEMgPSBOYXRpdmVEYXRlLlVUQztcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUgPSBOYXRpdmVEYXRlLnByb3RvdHlwZTtcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEYXRlO1xuXG4gICAgICAgIC8vIFVwZ3JhZGUgRGF0ZS5wYXJzZSB0byBoYW5kbGUgc2ltcGxpZmllZCBJU08gODYwMSBzdHJpbmdzXG4gICAgICAgIERhdGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZShzdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGlzb0RhdGVFeHByZXNzaW9uLmV4ZWMoc3RyaW5nKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcnNlIG1vbnRocywgZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICAvLyBwcm92aWRlIGRlZmF1bHQgdmFsdWVzIGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBVVEMgb2Zmc2V0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gTnVtYmVyKG1hdGNoWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBOdW1iZXIobWF0Y2hbMl0gfHwgMSkgLSAxLFxuICAgICAgICAgICAgICAgICAgICBkYXkgPSBOdW1iZXIobWF0Y2hbM10gfHwgMSkgLSAxLFxuICAgICAgICAgICAgICAgICAgICBob3VyID0gTnVtYmVyKG1hdGNoWzRdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICBtaW51dGUgPSBOdW1iZXIobWF0Y2hbNV0gfHwgMCksXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZCA9IE51bWJlcihtYXRjaFs2XSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbWlsbGlzZWNvbmQgPSBNYXRoLmZsb29yKE51bWJlcihtYXRjaFs3XSB8fCAwKSAqIDEwMDApLFxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRpbWUgem9uZSBpcyBtaXNzZWQsIGxvY2FsIG9mZnNldCBzaG91bGQgYmUgdXNlZFxuICAgICAgICAgICAgICAgICAgICAvLyAoRVMgNS4xIGJ1ZylcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGh0dHBzOi8vYnVncy5lY21hc2NyaXB0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEyXG4gICAgICAgICAgICAgICAgICAgIGlzTG9jYWxUaW1lID0gQm9vbGVhbihtYXRjaFs0XSAmJiAhbWF0Y2hbOF0pLFxuICAgICAgICAgICAgICAgICAgICBzaWduT2Zmc2V0ID0gbWF0Y2hbOV0gPT09IFwiLVwiID8gMSA6IC0xLFxuICAgICAgICAgICAgICAgICAgICBob3VyT2Zmc2V0ID0gTnVtYmVyKG1hdGNoWzEwXSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbWludXRlT2Zmc2V0ID0gTnVtYmVyKG1hdGNoWzExXSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgaG91ciA8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA+IDAgfHwgc2Vjb25kID4gMCB8fCBtaWxsaXNlY29uZCA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgMjQgOiAyNVxuICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA8IDYwICYmIHNlY29uZCA8IDYwICYmIG1pbGxpc2Vjb25kIDwgMTAwMCAmJlxuICAgICAgICAgICAgICAgICAgICBtb250aCA+IC0xICYmIG1vbnRoIDwgMTIgJiYgaG91ck9mZnNldCA8IDI0ICYmXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZU9mZnNldCA8IDYwICYmIC8vIGRldGVjdCBpbnZhbGlkIG9mZnNldHNcbiAgICAgICAgICAgICAgICAgICAgZGF5ID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgZGF5IDwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5RnJvbU1vbnRoKHllYXIsIG1vbnRoICsgMSkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5RnJvbU1vbnRoKHllYXIsIG1vbnRoKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIChkYXlGcm9tTW9udGgoeWVhciwgbW9udGgpICsgZGF5KSAqIDI0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaG91ck9mZnNldCAqIHNpZ25PZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgKSAqIDYwO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0ICsgbWludXRlICsgbWludXRlT2Zmc2V0ICogc2lnbk9mZnNldCkgKiA2MCArXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRcbiAgICAgICAgICAgICAgICAgICAgKSAqIDEwMDAgKyBtaWxsaXNlY29uZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTG9jYWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0b1VUQyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgtOC42NGUxNSA8PSByZXN1bHQgJiYgcmVzdWx0IDw9IDguNjRlMTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBOYXRpdmVEYXRlLnBhcnNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIERhdGU7XG4gICAgfSkoRGF0ZSk7XG59XG5cbi8vIEVTNSAxNS45LjQuNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuOS40LjRcbmlmICghRGF0ZS5ub3cpIHtcbiAgICBEYXRlLm5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH07XG59XG5cblxuLy9cbi8vIE51bWJlclxuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUuMSAxNS43LjQuNVxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNy40LjVcbmlmICghTnVtYmVyLnByb3RvdHlwZS50b0ZpeGVkIHx8ICgwLjAwMDA4KS50b0ZpeGVkKDMpICE9PSAnMC4wMDAnIHx8ICgwLjkpLnRvRml4ZWQoMCkgPT09ICcwJyB8fCAoMS4yNTUpLnRvRml4ZWQoMikgIT09ICcxLjI1JyB8fCAoMTAwMDAwMDAwMDAwMDAwMDEyOCkudG9GaXhlZCgwKSAhPT0gXCIxMDAwMDAwMDAwMDAwMDAwMTI4XCIpIHtcbiAgICAvLyBIaWRlIHRoZXNlIHZhcmlhYmxlcyBhbmQgZnVuY3Rpb25zXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhc2UsIHNpemUsIGRhdGEsIGk7XG5cbiAgICAgICAgYmFzZSA9IDFlNztcbiAgICAgICAgc2l6ZSA9IDY7XG4gICAgICAgIGRhdGEgPSBbMCwgMCwgMCwgMCwgMCwgMF07XG5cbiAgICAgICAgZnVuY3Rpb24gbXVsdGlwbHkobiwgYykge1xuICAgICAgICAgICAgdmFyIGkgPSAtMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kgPCBzaXplKSB7XG4gICAgICAgICAgICAgICAgYyArPSBuICogZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBkYXRhW2ldID0gYyAlIGJhc2U7XG4gICAgICAgICAgICAgICAgYyA9IE1hdGguZmxvb3IoYyAvIGJhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGl2aWRlKG4pIHtcbiAgICAgICAgICAgIHZhciBpID0gc2l6ZSwgYyA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoLS1pID49IDApIHtcbiAgICAgICAgICAgICAgICBjICs9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgZGF0YVtpXSA9IE1hdGguZmxvb3IoYyAvIG4pO1xuICAgICAgICAgICAgICAgIGMgPSAoYyAlIG4pICogYmFzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgdmFyIGkgPSBzaXplO1xuICAgICAgICAgICAgdmFyIHMgPSAnJztcbiAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChzICE9PSAnJyB8fCBpID09PSAwIHx8IGRhdGFbaV0gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBTdHJpbmcoZGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzICs9ICcwMDAwMDAwJy5zbGljZSgwLCA3IC0gdC5sZW5ndGgpICsgdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG93KHgsIG4sIGFjYykge1xuICAgICAgICAgICAgcmV0dXJuIChuID09PSAwID8gYWNjIDogKG4gJSAyID09PSAxID8gcG93KHgsIG4gLSAxLCBhY2MgKiB4KSA6IHBvdyh4ICogeCwgbiAvIDIsIGFjYykpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZyh4KSB7XG4gICAgICAgICAgICB2YXIgbiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoeCA+PSA0MDk2KSB7XG4gICAgICAgICAgICAgICAgbiArPSAxMjtcbiAgICAgICAgICAgICAgICB4IC89IDQwOTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoeCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgbiArPSAxO1xuICAgICAgICAgICAgICAgIHggLz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9XG5cbiAgICAgICAgTnVtYmVyLnByb3RvdHlwZS50b0ZpeGVkID0gZnVuY3Rpb24gKGZyYWN0aW9uRGlnaXRzKSB7XG4gICAgICAgICAgICB2YXIgZiwgeCwgcywgbSwgZSwgeiwgaiwgaztcblxuICAgICAgICAgICAgLy8gVGVzdCBmb3IgTmFOIGFuZCByb3VuZCBmcmFjdGlvbkRpZ2l0cyBkb3duXG4gICAgICAgICAgICBmID0gTnVtYmVyKGZyYWN0aW9uRGlnaXRzKTtcbiAgICAgICAgICAgIGYgPSBmICE9PSBmID8gMCA6IE1hdGguZmxvb3IoZik7XG5cbiAgICAgICAgICAgIGlmIChmIDwgMCB8fCBmID4gMjApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk51bWJlci50b0ZpeGVkIGNhbGxlZCB3aXRoIGludmFsaWQgbnVtYmVyIG9mIGRlY2ltYWxzXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB4ID0gTnVtYmVyKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBUZXN0IGZvciBOYU5cbiAgICAgICAgICAgIGlmICh4ICE9PSB4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTmFOXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIGl0IGlzIHRvbyBiaWcgb3Igc21hbGwsIHJldHVybiB0aGUgc3RyaW5nIHZhbHVlIG9mIHRoZSBudW1iZXJcbiAgICAgICAgICAgIGlmICh4IDw9IC0xZTIxIHx8IHggPj0gMWUyMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoeCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHMgPSBcIlwiO1xuXG4gICAgICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICAgICAgICBzID0gXCItXCI7XG4gICAgICAgICAgICAgICAgeCA9IC14O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtID0gXCIwXCI7XG5cbiAgICAgICAgICAgIGlmICh4ID4gMWUtMjEpIHtcbiAgICAgICAgICAgICAgICAvLyAxZS0yMSA8IHggPCAxZTIxXG4gICAgICAgICAgICAgICAgLy8gLTcwIDwgbG9nMih4KSA8IDcwXG4gICAgICAgICAgICAgICAgZSA9IGxvZyh4ICogcG93KDIsIDY5LCAxKSkgLSA2OTtcbiAgICAgICAgICAgICAgICB6ID0gKGUgPCAwID8geCAqIHBvdygyLCAtZSwgMSkgOiB4IC8gcG93KDIsIGUsIDEpKTtcbiAgICAgICAgICAgICAgICB6ICo9IDB4MTAwMDAwMDAwMDAwMDA7IC8vIE1hdGgucG93KDIsIDUyKTtcbiAgICAgICAgICAgICAgICBlID0gNTIgLSBlO1xuXG4gICAgICAgICAgICAgICAgLy8gLTE4IDwgZSA8IDEyMlxuICAgICAgICAgICAgICAgIC8vIHggPSB6IC8gMiBeIGVcbiAgICAgICAgICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbHkoMCwgeik7XG4gICAgICAgICAgICAgICAgICAgIGogPSBmO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqID49IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDFlNywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqIC09IDc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBseShwb3coMTAsIGosIDEpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaiA9IGUgLSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqID49IDIzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGUoMSA8PCAyMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqIC09IDIzO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGl2aWRlKDEgPDwgaik7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDEsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXZpZGUoMik7XG4gICAgICAgICAgICAgICAgICAgIG0gPSB0b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDAsIHopO1xuICAgICAgICAgICAgICAgICAgICBtdWx0aXBseSgxIDw8ICgtZSksIDApO1xuICAgICAgICAgICAgICAgICAgICBtID0gdG9TdHJpbmcoKSArICcwLjAwMDAwMDAwMDAwMDAwMDAwMDAwJy5zbGljZSgyLCAyICsgZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZiA+IDApIHtcbiAgICAgICAgICAgICAgICBrID0gbS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBpZiAoayA8PSBmKSB7XG4gICAgICAgICAgICAgICAgICAgIG0gPSBzICsgJzAuMDAwMDAwMDAwMDAwMDAwMDAwMCcuc2xpY2UoMCwgZiAtIGsgKyAyKSArIG07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbSA9IHMgKyBtLnNsaWNlKDAsIGsgLSBmKSArICcuJyArIG0uc2xpY2UoayAtIGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbSA9IHMgKyBtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgfVxuICAgIH0oKSk7XG59XG5cblxuLy9cbi8vIFN0cmluZ1xuLy8gPT09PT09XG4vL1xuXG5cbi8vIEVTNSAxNS41LjQuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjUuNC4xNFxuXG4vLyBbYnVnZml4LCBJRSBsdCA5LCBmaXJlZm94IDQsIEtvbnF1ZXJvciwgT3BlcmEsIG9ic2N1cmUgYnJvd3NlcnNdXG4vLyBNYW55IGJyb3dzZXJzIGRvIG5vdCBzcGxpdCBwcm9wZXJseSB3aXRoIHJlZ3VsYXIgZXhwcmVzc2lvbnMgb3IgdGhleVxuLy8gZG8gbm90IHBlcmZvcm0gdGhlIHNwbGl0IGNvcnJlY3RseSB1bmRlciBvYnNjdXJlIGNvbmRpdGlvbnMuXG4vLyBTZWUgaHR0cDovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL2Nyb3NzLWJyb3dzZXItc3BsaXRcbi8vIEkndmUgdGVzdGVkIGluIG1hbnkgYnJvd3NlcnMgYW5kIHRoaXMgc2VlbXMgdG8gY292ZXIgdGhlIGRldmlhbnQgb25lczpcbi8vICAgICdhYicuc3BsaXQoLyg/OmFiKSovKSBzaG91bGQgYmUgW1wiXCIsIFwiXCJdLCBub3QgW1wiXCJdXG4vLyAgICAnLicuc3BsaXQoLyguPykoLj8pLykgc2hvdWxkIGJlIFtcIlwiLCBcIi5cIiwgXCJcIiwgXCJcIl0sIG5vdCBbXCJcIiwgXCJcIl1cbi8vICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKSBzaG91bGQgYmUgW1widFwiLCB1bmRlZmluZWQsIFwiZVwiLCBcInNcIiwgXCJ0XCJdLCBub3Rcbi8vICAgICAgIFt1bmRlZmluZWQsIFwidFwiLCB1bmRlZmluZWQsIFwiZVwiLCAuLi5dXG4vLyAgICAnJy5zcGxpdCgvLj8vKSBzaG91bGQgYmUgW10sIG5vdCBbXCJcIl1cbi8vICAgICcuJy5zcGxpdCgvKCkoKS8pIHNob3VsZCBiZSBbXCIuXCJdLCBub3QgW1wiXCIsIFwiXCIsIFwiLlwiXVxuXG52YXIgc3RyaW5nX3NwbGl0ID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdDtcbmlmIChcbiAgICAnYWInLnNwbGl0KC8oPzphYikqLykubGVuZ3RoICE9PSAyIHx8XG4gICAgJy4nLnNwbGl0KC8oLj8pKC4/KS8pLmxlbmd0aCAhPT0gNCB8fFxuICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKVsxXSA9PT0gXCJ0XCIgfHxcbiAgICAnJy5zcGxpdCgvLj8vKS5sZW5ndGggfHxcbiAgICAnLicuc3BsaXQoLygpKCkvKS5sZW5ndGggPiAxXG4pIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tcGxpYW50RXhlY05wY2cgPSAvKCk/Py8uZXhlYyhcIlwiKVsxXSA9PT0gdm9pZCAwOyAvLyBOUENHOiBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cFxuXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiAoc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgICAgICAgdmFyIHN0cmluZyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuXG4gICAgICAgICAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdFxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZXBhcmF0b3IpICE9PSBcIltvYmplY3QgUmVnRXhwXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ19zcGxpdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gW10sXG4gICAgICAgICAgICAgICAgZmxhZ3MgPSAoc2VwYXJhdG9yLmlnbm9yZUNhc2UgPyBcImlcIiA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3IubXVsdGlsaW5lICA/IFwibVwiIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5leHRlbmRlZCAgID8gXCJ4XCIgOiBcIlwiKSArIC8vIFByb3Bvc2VkIGZvciBFUzZcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3Iuc3RpY2t5ICAgICA/IFwieVwiIDogXCJcIiksIC8vIEZpcmVmb3ggMytcbiAgICAgICAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gMCxcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weVxuICAgICAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgZmxhZ3MgKyBcImdcIiksXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yMiwgbWF0Y2gsIGxhc3RJbmRleCwgbGFzdExlbmd0aDtcbiAgICAgICAgICAgIHN0cmluZyArPSBcIlwiOyAvLyBUeXBlLWNvbnZlcnRcbiAgICAgICAgICAgIGlmICghY29tcGxpYW50RXhlY05wY2cpIHtcbiAgICAgICAgICAgICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IyID0gbmV3IFJlZ0V4cChcIl5cIiArIHNlcGFyYXRvci5zb3VyY2UgKyBcIiQoPyFcXFxccylcIiwgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogVmFsdWVzIGZvciBgbGltaXRgLCBwZXIgdGhlIHNwZWM6XG4gICAgICAgICAgICAgKiBJZiB1bmRlZmluZWQ6IDQyOTQ5NjcyOTUgLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgICAgICAgICAgICogSWYgMCwgSW5maW5pdHksIG9yIE5hTjogMFxuICAgICAgICAgICAgICogSWYgcG9zaXRpdmUgbnVtYmVyOiBsaW1pdCA9IE1hdGguZmxvb3IobGltaXQpOyBpZiAobGltaXQgPiA0Mjk0OTY3Mjk1KSBsaW1pdCAtPSA0Mjk0OTY3Mjk2O1xuICAgICAgICAgICAgICogSWYgbmVnYXRpdmUgbnVtYmVyOiA0Mjk0OTY3Mjk2IC0gTWF0aC5mbG9vcihNYXRoLmFicyhsaW1pdCkpXG4gICAgICAgICAgICAgKiBJZiBvdGhlcjogVHlwZS1jb252ZXJ0LCB0aGVuIHVzZSB0aGUgYWJvdmUgcnVsZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGltaXQgPSBsaW1pdCA9PT0gdm9pZCAwID9cbiAgICAgICAgICAgICAgICAtMSA+Pj4gMCA6IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcbiAgICAgICAgICAgICAgICBsaW1pdCA+Pj4gMDsgLy8gVG9VaW50MzIobGltaXQpXG4gICAgICAgICAgICB3aGlsZSAobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgLy8gYHNlcGFyYXRvci5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpeCBicm93c2VycyB3aG9zZSBgZXhlY2AgbWV0aG9kcyBkb24ndCBjb25zaXN0ZW50bHkgcmV0dXJuIGB1bmRlZmluZWRgIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZyAmJiBtYXRjaC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFswXS5yZXBsYWNlKHNlcGFyYXRvcjIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFtpXSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAxICYmIG1hdGNoLmluZGV4IDwgc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob3V0cHV0LCBtYXRjaC5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdExlbmd0aCA9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdExhc3RJbmRleCA9IGxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXBhcmF0b3IubGFzdEluZGV4ID09PSBtYXRjaC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3IubGFzdEluZGV4Kys7IC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFzdExhc3RJbmRleCA9PT0gc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0TGVuZ3RoIHx8ICFzZXBhcmF0b3IudGVzdChcIlwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHN0cmluZy5zbGljZShsYXN0TGFzdEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0Lmxlbmd0aCA+IGxpbWl0ID8gb3V0cHV0LnNsaWNlKDAsIGxpbWl0KSA6IG91dHB1dDtcbiAgICAgICAgfTtcbiAgICB9KCkpO1xuXG4vLyBbYnVnZml4LCBjaHJvbWVdXG4vLyBJZiBzZXBhcmF0b3IgaXMgdW5kZWZpbmVkLCB0aGVuIHRoZSByZXN1bHQgYXJyYXkgY29udGFpbnMganVzdCBvbmUgU3RyaW5nLFxuLy8gd2hpY2ggaXMgdGhlIHRoaXMgdmFsdWUgKGNvbnZlcnRlZCB0byBhIFN0cmluZykuIElmIGxpbWl0IGlzIG5vdCB1bmRlZmluZWQsXG4vLyB0aGVuIHRoZSBvdXRwdXQgYXJyYXkgaXMgdHJ1bmNhdGVkIHNvIHRoYXQgaXQgY29udGFpbnMgbm8gbW9yZSB0aGFuIGxpbWl0XG4vLyBlbGVtZW50cy5cbi8vIFwiMFwiLnNwbGl0KHVuZGVmaW5lZCwgMCkgLT4gW11cbn0gZWxzZSBpZiAoXCIwXCIuc3BsaXQodm9pZCAwLCAwKS5sZW5ndGgpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24oc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ19zcGxpdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbn1cblxuXG4vLyBFQ01BLTI2MiwgM3JkIEIuMi4zXG4vLyBOb3RlIGFuIEVDTUFTY3JpcHQgc3RhbmRhcnQsIGFsdGhvdWdoIEVDTUFTY3JpcHQgM3JkIEVkaXRpb24gaGFzIGFcbi8vIG5vbi1ub3JtYXRpdmUgc2VjdGlvbiBzdWdnZXN0aW5nIHVuaWZvcm0gc2VtYW50aWNzIGFuZCBpdCBzaG91bGQgYmVcbi8vIG5vcm1hbGl6ZWQgYWNyb3NzIGFsbCBicm93c2Vyc1xuLy8gW2J1Z2ZpeCwgSUUgbHQgOV0gSUUgPCA5IHN1YnN0cigpIHdpdGggbmVnYXRpdmUgdmFsdWUgbm90IHdvcmtpbmcgaW4gSUVcbmlmIChcIlwiLnN1YnN0ciAmJiBcIjBiXCIuc3Vic3RyKC0xKSAhPT0gXCJiXCIpIHtcbiAgICB2YXIgc3RyaW5nX3N1YnN0ciA9IFN0cmluZy5wcm90b3R5cGUuc3Vic3RyO1xuICAgIC8qKlxuICAgICAqICBHZXQgdGhlIHN1YnN0cmluZyBvZiBhIHN0cmluZ1xuICAgICAqICBAcGFyYW0gIHtpbnRlZ2VyfSAgc3RhcnQgICB3aGVyZSB0byBzdGFydCB0aGUgc3Vic3RyaW5nXG4gICAgICogIEBwYXJhbSAge2ludGVnZXJ9ICBsZW5ndGggIGhvdyBtYW55IGNoYXJhY3RlcnMgdG8gcmV0dXJuXG4gICAgICogIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBTdHJpbmcucHJvdG90eXBlLnN1YnN0ciA9IGZ1bmN0aW9uKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ19zdWJzdHIuY2FsbChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBzdGFydCA8IDAgPyAoKHN0YXJ0ID0gdGhpcy5sZW5ndGggKyBzdGFydCkgPCAwID8gMCA6IHN0YXJ0KSA6IHN0YXJ0LFxuICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vLyBFUzUgMTUuNS40LjIwXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS41LjQuMjBcbnZhciB3cyA9IFwiXFx4MDlcXHgwQVxceDBCXFx4MENcXHgwRFxceDIwXFx4QTBcXHUxNjgwXFx1MTgwRVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcIiArXG4gICAgXCJcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXFx1MjAyOFwiICtcbiAgICBcIlxcdTIwMjlcXHVGRUZGXCI7XG5pZiAoIVN0cmluZy5wcm90b3R5cGUudHJpbSB8fCB3cy50cmltKCkpIHtcbiAgICAvLyBodHRwOi8vYmxvZy5zdGV2ZW5sZXZpdGhhbi5jb20vYXJjaGl2ZXMvZmFzdGVyLXRyaW0tamF2YXNjcmlwdFxuICAgIC8vIGh0dHA6Ly9wZXJmZWN0aW9ua2lsbHMuY29tL3doaXRlc3BhY2UtZGV2aWF0aW9ucy9cbiAgICB3cyA9IFwiW1wiICsgd3MgKyBcIl1cIjtcbiAgICB2YXIgdHJpbUJlZ2luUmVnZXhwID0gbmV3IFJlZ0V4cChcIl5cIiArIHdzICsgd3MgKyBcIipcIiksXG4gICAgICAgIHRyaW1FbmRSZWdleHAgPSBuZXcgUmVnRXhwKHdzICsgd3MgKyBcIiokXCIpO1xuICAgIFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uIHRyaW0oKSB7XG4gICAgICAgIGlmICh0aGlzID09PSB2b2lkIDAgfHwgdGhpcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbid0IGNvbnZlcnQgXCIrdGhpcytcIiB0byBvYmplY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzKVxuICAgICAgICAgICAgLnJlcGxhY2UodHJpbUJlZ2luUmVnZXhwLCBcIlwiKVxuICAgICAgICAgICAgLnJlcGxhY2UodHJpbUVuZFJlZ2V4cCwgXCJcIik7XG4gICAgfTtcbn1cblxuLy9cbi8vIFV0aWxcbi8vID09PT09PVxuLy9cblxuLy8gRVM1IDkuNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4OS40XG4vLyBodHRwOi8vanNwZXJmLmNvbS90by1pbnRlZ2VyXG5cbmZ1bmN0aW9uIHRvSW50ZWdlcihuKSB7XG4gICAgbiA9ICtuO1xuICAgIGlmIChuICE9PSBuKSB7IC8vIGlzTmFOXG4gICAgICAgIG4gPSAwO1xuICAgIH0gZWxzZSBpZiAobiAhPT0gMCAmJiBuICE9PSAoMS8wKSAmJiBuICE9PSAtKDEvMCkpIHtcbiAgICAgICAgbiA9IChuID4gMCB8fCAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG4pKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGlucHV0KSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaW5wdXQ7XG4gICAgcmV0dXJuIChcbiAgICAgICAgaW5wdXQgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZSA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICB0eXBlID09PSBcImJvb2xlYW5cIiB8fFxuICAgICAgICB0eXBlID09PSBcIm51bWJlclwiIHx8XG4gICAgICAgIHR5cGUgPT09IFwic3RyaW5nXCJcbiAgICApO1xufVxuXG5mdW5jdGlvbiB0b1ByaW1pdGl2ZShpbnB1dCkge1xuICAgIHZhciB2YWwsIHZhbHVlT2YsIHRvU3RyaW5nO1xuICAgIGlmIChpc1ByaW1pdGl2ZShpbnB1dCkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICB2YWx1ZU9mID0gaW5wdXQudmFsdWVPZjtcbiAgICBpZiAodHlwZW9mIHZhbHVlT2YgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YWwgPSB2YWx1ZU9mLmNhbGwoaW5wdXQpO1xuICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZyA9IGlucHV0LnRvU3RyaW5nO1xuICAgIGlmICh0eXBlb2YgdG9TdHJpbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YWwgPSB0b1N0cmluZy5jYWxsKGlucHV0KTtcbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbCkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xufVxuXG4vLyBFUzUgOS45XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3g5LjlcbnZhciB0b09iamVjdCA9IGZ1bmN0aW9uIChvKSB7XG4gICAgaWYgKG8gPT0gbnVsbCkgeyAvLyB0aGlzIG1hdGNoZXMgYm90aCBudWxsIGFuZCB1bmRlZmluZWRcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbid0IGNvbnZlcnQgXCIrbytcIiB0byBvYmplY3RcIik7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3Qobyk7XG59O1xuXG59KTtcblxuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIGJ1aWxkTG9jYXRpb25EYXRhLCBleHRlbmQsIGZsYXR0ZW4sIGxhc3QsIHJlcGVhdCwgc3ludGF4RXJyb3JUb1N0cmluZywgX3JlZjtcblxuICBleHBvcnRzLnN0YXJ0cyA9IGZ1bmN0aW9uKHN0cmluZywgbGl0ZXJhbCwgc3RhcnQpIHtcbiAgICByZXR1cm4gbGl0ZXJhbCA9PT0gc3RyaW5nLnN1YnN0cihzdGFydCwgbGl0ZXJhbC5sZW5ndGgpO1xuICB9O1xuXG4gIGV4cG9ydHMuZW5kcyA9IGZ1bmN0aW9uKHN0cmluZywgbGl0ZXJhbCwgYmFjaykge1xuICAgIHZhciBsZW47XG4gICAgbGVuID0gbGl0ZXJhbC5sZW5ndGg7XG4gICAgcmV0dXJuIGxpdGVyYWwgPT09IHN0cmluZy5zdWJzdHIoc3RyaW5nLmxlbmd0aCAtIGxlbiAtIChiYWNrIHx8IDApLCBsZW4pO1xuICB9O1xuXG4gIGV4cG9ydHMucmVwZWF0ID0gcmVwZWF0ID0gZnVuY3Rpb24oc3RyLCBuKSB7XG4gICAgdmFyIHJlcztcbiAgICByZXMgPSAnJztcbiAgICB3aGlsZSAobiA+IDApIHtcbiAgICAgIGlmIChuICYgMSkge1xuICAgICAgICByZXMgKz0gc3RyO1xuICAgICAgfVxuICAgICAgbiA+Pj49IDE7XG4gICAgICBzdHIgKz0gc3RyO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIGV4cG9ydHMuY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGl0ZW0sIF9pLCBfbGVuLCBfcmVzdWx0cztcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYXJyYXkubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGl0ZW0gPSBhcnJheVtfaV07XG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICBfcmVzdWx0cy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgZXhwb3J0cy5jb3VudCA9IGZ1bmN0aW9uKHN0cmluZywgc3Vic3RyKSB7XG4gICAgdmFyIG51bSwgcG9zO1xuICAgIG51bSA9IHBvcyA9IDA7XG4gICAgaWYgKCFzdWJzdHIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMSAvIDA7XG4gICAgfVxuICAgIHdoaWxlIChwb3MgPSAxICsgc3RyaW5nLmluZGV4T2Yoc3Vic3RyLCBwb3MpKSB7XG4gICAgICBudW0rKztcbiAgICB9XG4gICAgcmV0dXJuIG51bTtcbiAgfTtcblxuICBleHBvcnRzLm1lcmdlID0gZnVuY3Rpb24ob3B0aW9ucywgb3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIGV4dGVuZChleHRlbmQoe30sIG9wdGlvbnMpLCBvdmVycmlkZXMpO1xuICB9O1xuXG4gIGV4dGVuZCA9IGV4cG9ydHMuZXh0ZW5kID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGtleSwgdmFsO1xuICAgIGZvciAoa2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIHZhbCA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgIG9iamVjdFtrZXldID0gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9O1xuXG4gIGV4cG9ydHMuZmxhdHRlbiA9IGZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBlbGVtZW50LCBmbGF0dGVuZWQsIF9pLCBfbGVuO1xuICAgIGZsYXR0ZW5lZCA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYXJyYXkubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGVsZW1lbnQgPSBhcnJheVtfaV07XG4gICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZsYXR0ZW5lZCA9IGZsYXR0ZW5lZC5jb25jYXQoZmxhdHRlbihlbGVtZW50KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbGF0dGVuZWQucHVzaChlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZsYXR0ZW5lZDtcbiAgfTtcblxuICBleHBvcnRzLmRlbCA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgdmFyIHZhbDtcbiAgICB2YWwgPSBvYmpba2V5XTtcbiAgICBkZWxldGUgb2JqW2tleV07XG4gICAgcmV0dXJuIHZhbDtcbiAgfTtcblxuICBleHBvcnRzLmxhc3QgPSBsYXN0ID0gZnVuY3Rpb24oYXJyYXksIGJhY2spIHtcbiAgICByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gKGJhY2sgfHwgMCkgLSAxXTtcbiAgfTtcblxuICBleHBvcnRzLnNvbWUgPSAoX3JlZiA9IEFycmF5LnByb3RvdHlwZS5zb21lKSAhPSBudWxsID8gX3JlZiA6IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIGUsIF9pLCBfbGVuO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gdGhpcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgZSA9IHRoaXNbX2ldO1xuICAgICAgaWYgKGZuKGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5pbnZlcnRMaXRlcmF0ZSA9IGZ1bmN0aW9uKGNvZGUpIHtcbiAgICB2YXIgbGluZSwgbGluZXMsIG1heWJlX2NvZGU7XG4gICAgbWF5YmVfY29kZSA9IHRydWU7XG4gICAgbGluZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2ksIF9sZW4sIF9yZWYxLCBfcmVzdWx0cztcbiAgICAgIF9yZWYxID0gY29kZS5zcGxpdCgnXFxuJyk7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBsaW5lID0gX3JlZjFbX2ldO1xuICAgICAgICBpZiAobWF5YmVfY29kZSAmJiAvXihbIF17NH18WyBdezAsM31cXHQpLy50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChsaW5lKTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXliZV9jb2RlID0gL15cXHMqJC8udGVzdChsaW5lKSkge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gobGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCgnIyAnICsgbGluZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfTtcblxuICBidWlsZExvY2F0aW9uRGF0YSA9IGZ1bmN0aW9uKGZpcnN0LCBsYXN0KSB7XG4gICAgaWYgKCFsYXN0KSB7XG4gICAgICByZXR1cm4gZmlyc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZpcnN0X2xpbmU6IGZpcnN0LmZpcnN0X2xpbmUsXG4gICAgICAgIGZpcnN0X2NvbHVtbjogZmlyc3QuZmlyc3RfY29sdW1uLFxuICAgICAgICBsYXN0X2xpbmU6IGxhc3QubGFzdF9saW5lLFxuICAgICAgICBsYXN0X2NvbHVtbjogbGFzdC5sYXN0X2NvbHVtblxuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5hZGRMb2NhdGlvbkRhdGFGbiA9IGZ1bmN0aW9uKGZpcnN0LCBsYXN0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKCgodHlwZW9mIG9iaikgPT09ICdvYmplY3QnKSAmJiAoISFvYmpbJ3VwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyddKSkge1xuICAgICAgICBvYmoudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nKGJ1aWxkTG9jYXRpb25EYXRhKGZpcnN0LCBsYXN0KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gIH07XG5cbiAgZXhwb3J0cy5sb2NhdGlvbkRhdGFUb1N0cmluZyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBsb2NhdGlvbkRhdGE7XG4gICAgaWYgKChcIjJcIiBpbiBvYmopICYmIChcImZpcnN0X2xpbmVcIiBpbiBvYmpbMl0pKSB7XG4gICAgICBsb2NhdGlvbkRhdGEgPSBvYmpbMl07XG4gICAgfSBlbHNlIGlmIChcImZpcnN0X2xpbmVcIiBpbiBvYmopIHtcbiAgICAgIGxvY2F0aW9uRGF0YSA9IG9iajtcbiAgICB9XG4gICAgaWYgKGxvY2F0aW9uRGF0YSkge1xuICAgICAgcmV0dXJuIChcIlwiICsgKGxvY2F0aW9uRGF0YS5maXJzdF9saW5lICsgMSkgKyBcIjpcIiArIChsb2NhdGlvbkRhdGEuZmlyc3RfY29sdW1uICsgMSkgKyBcIi1cIikgKyAoXCJcIiArIChsb2NhdGlvbkRhdGEubGFzdF9saW5lICsgMSkgKyBcIjpcIiArIChsb2NhdGlvbkRhdGEubGFzdF9jb2x1bW4gKyAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIk5vIGxvY2F0aW9uIGRhdGFcIjtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5iYXNlRmlsZU5hbWUgPSBmdW5jdGlvbihmaWxlLCBzdHJpcEV4dCwgdXNlV2luUGF0aFNlcCkge1xuICAgIHZhciBwYXJ0cywgcGF0aFNlcDtcbiAgICBpZiAoc3RyaXBFeHQgPT0gbnVsbCkge1xuICAgICAgc3RyaXBFeHQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHVzZVdpblBhdGhTZXAgPT0gbnVsbCkge1xuICAgICAgdXNlV2luUGF0aFNlcCA9IGZhbHNlO1xuICAgIH1cbiAgICBwYXRoU2VwID0gdXNlV2luUGF0aFNlcCA/IC9cXFxcfFxcLy8gOiAvXFwvLztcbiAgICBwYXJ0cyA9IGZpbGUuc3BsaXQocGF0aFNlcCk7XG4gICAgZmlsZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmICghKHN0cmlwRXh0ICYmIGZpbGUuaW5kZXhPZignLicpID49IDApKSB7XG4gICAgICByZXR1cm4gZmlsZTtcbiAgICB9XG4gICAgcGFydHMgPSBmaWxlLnNwbGl0KCcuJyk7XG4gICAgcGFydHMucG9wKCk7XG4gICAgaWYgKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdID09PSAnY29mZmVlJyAmJiBwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBwYXJ0cy5wb3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4oJy4nKTtcbiAgfTtcblxuICBleHBvcnRzLmlzQ29mZmVlID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIHJldHVybiAvXFwuKChsaXQpP2NvZmZlZXxjb2ZmZWVcXC5tZHxpY2VkfGxpdGljZWR8aWNlZFxcLm1kKSQvLnRlc3QoZmlsZSk7XG4gIH07XG5cbiAgZXhwb3J0cy5pc0xpdGVyYXRlID0gZnVuY3Rpb24oZmlsZSkge1xuICAgIHJldHVybiAvXFwuKGxpdGNvZmZlZXxjb2ZmZWVcXC5tZHxsaXRpY2VkfGljZWRcXC5tZCkkLy50ZXN0KGZpbGUpO1xuICB9O1xuXG4gIGV4cG9ydHMudGhyb3dTeW50YXhFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGxvY2F0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGVycm9yID0gbmV3IFN5bnRheEVycm9yKG1lc3NhZ2UpO1xuICAgIGVycm9yLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgZXJyb3IudG9TdHJpbmcgPSBzeW50YXhFcnJvclRvU3RyaW5nO1xuICAgIGVycm9yLnN0YWNrID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfTtcblxuICBleHBvcnRzLnVwZGF0ZVN5bnRheEVycm9yID0gZnVuY3Rpb24oZXJyb3IsIGNvZGUsIGZpbGVuYW1lKSB7XG4gICAgaWYgKGVycm9yLnRvU3RyaW5nID09PSBzeW50YXhFcnJvclRvU3RyaW5nKSB7XG4gICAgICBlcnJvci5jb2RlIHx8IChlcnJvci5jb2RlID0gY29kZSk7XG4gICAgICBlcnJvci5maWxlbmFtZSB8fCAoZXJyb3IuZmlsZW5hbWUgPSBmaWxlbmFtZSk7XG4gICAgICBlcnJvci5zdGFjayA9IGVycm9yLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbiAgfTtcblxuICBzeW50YXhFcnJvclRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvZGVMaW5lLCBjb2xvcml6ZSwgY29sb3JzRW5hYmxlZCwgZW5kLCBmaWxlbmFtZSwgZmlyc3RfY29sdW1uLCBmaXJzdF9saW5lLCBsYXN0X2NvbHVtbiwgbGFzdF9saW5lLCBtYXJrZXIsIHN0YXJ0LCBfcmVmMSwgX3JlZjI7XG4gICAgaWYgKCEodGhpcy5jb2RlICYmIHRoaXMubG9jYXRpb24pKSB7XG4gICAgICByZXR1cm4gRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIF9yZWYxID0gdGhpcy5sb2NhdGlvbiwgZmlyc3RfbGluZSA9IF9yZWYxLmZpcnN0X2xpbmUsIGZpcnN0X2NvbHVtbiA9IF9yZWYxLmZpcnN0X2NvbHVtbiwgbGFzdF9saW5lID0gX3JlZjEubGFzdF9saW5lLCBsYXN0X2NvbHVtbiA9IF9yZWYxLmxhc3RfY29sdW1uO1xuICAgIGlmIChsYXN0X2xpbmUgPT0gbnVsbCkge1xuICAgICAgbGFzdF9saW5lID0gZmlyc3RfbGluZTtcbiAgICB9XG4gICAgaWYgKGxhc3RfY29sdW1uID09IG51bGwpIHtcbiAgICAgIGxhc3RfY29sdW1uID0gZmlyc3RfY29sdW1uO1xuICAgIH1cbiAgICBmaWxlbmFtZSA9IHRoaXMuZmlsZW5hbWUgfHwgJ1tzdGRpbl0nO1xuICAgIGNvZGVMaW5lID0gdGhpcy5jb2RlLnNwbGl0KCdcXG4nKVtmaXJzdF9saW5lXTtcbiAgICBzdGFydCA9IGZpcnN0X2NvbHVtbjtcbiAgICBlbmQgPSBmaXJzdF9saW5lID09PSBsYXN0X2xpbmUgPyBsYXN0X2NvbHVtbiArIDEgOiBjb2RlTGluZS5sZW5ndGg7XG4gICAgbWFya2VyID0gY29kZUxpbmUuc2xpY2UoMCwgc3RhcnQpLnJlcGxhY2UoL1teXFxzXS9nLCAnICcpICsgcmVwZWF0KCdeJywgZW5kIC0gc3RhcnQpO1xuICAgIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCA/IHByb2Nlc3Muc3Rkb3V0IDogdm9pZCAwKSAhPSBudWxsKSB7XG4gICAgICBjb2xvcnNFbmFibGVkID0gcHJvY2Vzcy5zdGRvdXQuaXNUVFkgJiYgIXByb2Nlc3MuZW52Lk5PREVfRElTQUJMRV9DT0xPUlM7XG4gICAgfVxuICAgIGlmICgoX3JlZjIgPSB0aGlzLmNvbG9yZnVsKSAhPSBudWxsID8gX3JlZjIgOiBjb2xvcnNFbmFibGVkKSB7XG4gICAgICBjb2xvcml6ZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICByZXR1cm4gXCJcXHgxQlsxOzMxbVwiICsgc3RyICsgXCJcXHgxQlswbVwiO1xuICAgICAgfTtcbiAgICAgIGNvZGVMaW5lID0gY29kZUxpbmUuc2xpY2UoMCwgc3RhcnQpICsgY29sb3JpemUoY29kZUxpbmUuc2xpY2Uoc3RhcnQsIGVuZCkpICsgY29kZUxpbmUuc2xpY2UoZW5kKTtcbiAgICAgIG1hcmtlciA9IGNvbG9yaXplKG1hcmtlcik7XG4gICAgfVxuICAgIHJldHVybiBcIlwiICsgZmlsZW5hbWUgKyBcIjpcIiArIChmaXJzdF9saW5lICsgMSkgKyBcIjpcIiArIChmaXJzdF9jb2x1bW4gKyAxKSArIFwiOiBlcnJvcjogXCIgKyB0aGlzLm1lc3NhZ2UgKyBcIlxcblwiICsgY29kZUxpbmUgKyBcIlxcblwiICsgbWFya2VyO1xuICB9O1xuXG4gIGV4cG9ydHMubmFtZVdoaXRlc3BhY2VDaGFyYWN0ZXIgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKHN0cmluZykge1xuICAgICAgY2FzZSAnICc6XG4gICAgICAgIHJldHVybiAnc3BhY2UnO1xuICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgcmV0dXJuICduZXdsaW5lJztcbiAgICAgIGNhc2UgJ1xccic6XG4gICAgICAgIHJldHVybiAnY2FycmlhZ2UgcmV0dXJuJztcbiAgICAgIGNhc2UgJ1xcdCc6XG4gICAgICAgIHJldHVybiAndGFiJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgZXhwb3J0cy50cmFuc2Zvcm0gPSBmdW5jdGlvbih4LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHguaWNlZFRyYW5zZm9ybShvcHRpb25zKTtcbiAgfTtcblxuICBleHBvcnRzLnJ1bnRpbWUgPSByZXF1aXJlKCdpY2VkLXJ1bnRpbWUnKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBCT00sIEJPT0wsIENBTExBQkxFLCBDT0RFLCBDT0ZGRUVfQUxJQVNFUywgQ09GRkVFX0FMSUFTX01BUCwgQ09GRkVFX0tFWVdPUkRTLCBDT01NRU5ULCBDT01QQVJFLCBDT01QT1VORF9BU1NJR04sIEhFUkVET0MsIEhFUkVET0NfSUxMRUdBTCwgSEVSRURPQ19JTkRFTlQsIEhFUkVHRVgsIEhFUkVHRVhfT01JVCwgSURFTlRJRklFUiwgSU5ERU5UQUJMRV9DTE9TRVJTLCBJTkRFWEFCTEUsIElOVkVSU0VTLCBKU1RPS0VOLCBKU19GT1JCSURERU4sIEpTX0tFWVdPUkRTLCBMSU5FX0JSRUFLLCBMSU5FX0NPTlRJTlVFUiwgTE9HSUMsIExleGVyLCBNQVRILCBNVUxUSUxJTkVSLCBNVUxUSV9ERU5ULCBOT1RfUkVHRVgsIE5PVF9TUEFDRURfUkVHRVgsIE5VTUJFUiwgT1BFUkFUT1IsIFJFR0VYLCBSRUxBVElPTiwgUkVTRVJWRUQsIFJld3JpdGVyLCBTSElGVCwgU0lNUExFU1RSLCBTVFJJQ1RfUFJPU0NSSUJFRCwgVFJBSUxJTkdfU1BBQ0VTLCBVTkFSWSwgVU5BUllfTUFUSCwgV0hJVEVTUEFDRSwgY29tcGFjdCwgY291bnQsIGludmVydExpdGVyYXRlLCBrZXksIGxhc3QsIGxvY2F0aW9uRGF0YVRvU3RyaW5nLCByZXBlYXQsIHN0YXJ0cywgdGhyb3dTeW50YXhFcnJvciwgX3JlZiwgX3JlZjEsXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgX3JlZiA9IHJlcXVpcmUoJy4vcmV3cml0ZXInKSwgUmV3cml0ZXIgPSBfcmVmLlJld3JpdGVyLCBJTlZFUlNFUyA9IF9yZWYuSU5WRVJTRVM7XG5cbiAgX3JlZjEgPSByZXF1aXJlKCcuL2hlbHBlcnMnKSwgY291bnQgPSBfcmVmMS5jb3VudCwgc3RhcnRzID0gX3JlZjEuc3RhcnRzLCBjb21wYWN0ID0gX3JlZjEuY29tcGFjdCwgbGFzdCA9IF9yZWYxLmxhc3QsIHJlcGVhdCA9IF9yZWYxLnJlcGVhdCwgaW52ZXJ0TGl0ZXJhdGUgPSBfcmVmMS5pbnZlcnRMaXRlcmF0ZSwgbG9jYXRpb25EYXRhVG9TdHJpbmcgPSBfcmVmMS5sb2NhdGlvbkRhdGFUb1N0cmluZywgdGhyb3dTeW50YXhFcnJvciA9IF9yZWYxLnRocm93U3ludGF4RXJyb3I7XG5cbiAgZXhwb3J0cy5MZXhlciA9IExleGVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIExleGVyKCkge31cblxuICAgIExleGVyLnByb3RvdHlwZS50b2tlbml6ZSA9IGZ1bmN0aW9uKGNvZGUsIG9wdHMpIHtcbiAgICAgIHZhciBjb25zdW1lZCwgaSwgdGFnLCBfcmVmMjtcbiAgICAgIGlmIChvcHRzID09IG51bGwpIHtcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5saXRlcmF0ZSA9IG9wdHMubGl0ZXJhdGU7XG4gICAgICB0aGlzLmluZGVudCA9IDA7XG4gICAgICB0aGlzLmJhc2VJbmRlbnQgPSAwO1xuICAgICAgdGhpcy5pbmRlYnQgPSAwO1xuICAgICAgdGhpcy5vdXRkZWJ0ID0gMDtcbiAgICAgIHRoaXMuaW5kZW50cyA9IFtdO1xuICAgICAgdGhpcy5lbmRzID0gW107XG4gICAgICB0aGlzLnRva2VucyA9IFtdO1xuICAgICAgdGhpcy5jaHVua0xpbmUgPSBvcHRzLmxpbmUgfHwgMDtcbiAgICAgIHRoaXMuY2h1bmtDb2x1bW4gPSBvcHRzLmNvbHVtbiB8fCAwO1xuICAgICAgY29kZSA9IHRoaXMuY2xlYW4oY29kZSk7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlICh0aGlzLmNodW5rID0gY29kZS5zbGljZShpKSkge1xuICAgICAgICBjb25zdW1lZCA9IHRoaXMuaWRlbnRpZmllclRva2VuKCkgfHwgdGhpcy5jb21tZW50VG9rZW4oKSB8fCB0aGlzLndoaXRlc3BhY2VUb2tlbigpIHx8IHRoaXMubGluZVRva2VuKCkgfHwgdGhpcy5oZXJlZG9jVG9rZW4oKSB8fCB0aGlzLnN0cmluZ1Rva2VuKCkgfHwgdGhpcy5udW1iZXJUb2tlbigpIHx8IHRoaXMucmVnZXhUb2tlbigpIHx8IHRoaXMuanNUb2tlbigpIHx8IHRoaXMubGl0ZXJhbFRva2VuKCk7XG4gICAgICAgIF9yZWYyID0gdGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKGNvbnN1bWVkKSwgdGhpcy5jaHVua0xpbmUgPSBfcmVmMlswXSwgdGhpcy5jaHVua0NvbHVtbiA9IF9yZWYyWzFdO1xuICAgICAgICBpICs9IGNvbnN1bWVkO1xuICAgICAgfVxuICAgICAgdGhpcy5jbG9zZUluZGVudGF0aW9uKCk7XG4gICAgICBpZiAodGFnID0gdGhpcy5lbmRzLnBvcCgpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJtaXNzaW5nIFwiICsgdGFnKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLnJld3JpdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgICAgIH1cbiAgICAgIHJldHVybiAobmV3IFJld3JpdGVyKS5yZXdyaXRlKHRoaXMudG9rZW5zKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24oY29kZSkge1xuICAgICAgaWYgKGNvZGUuY2hhckNvZGVBdCgwKSA9PT0gQk9NKSB7XG4gICAgICAgIGNvZGUgPSBjb2RlLnNsaWNlKDEpO1xuICAgICAgfVxuICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFxyL2csICcnKS5yZXBsYWNlKFRSQUlMSU5HX1NQQUNFUywgJycpO1xuICAgICAgaWYgKFdISVRFU1BBQ0UudGVzdChjb2RlKSkge1xuICAgICAgICBjb2RlID0gXCJcXG5cIiArIGNvZGU7XG4gICAgICAgIHRoaXMuY2h1bmtMaW5lLS07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5saXRlcmF0ZSkge1xuICAgICAgICBjb2RlID0gaW52ZXJ0TGl0ZXJhdGUoY29kZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29kZTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmlkZW50aWZpZXJUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbG9uLCBjb2xvbk9mZnNldCwgZm9yY2VkSWRlbnRpZmllciwgaWQsIGlkTGVuZ3RoLCBpbnB1dCwgbWF0Y2gsIHBvcHBlZFRva2VuLCBwcmV2LCB0YWcsIHRhZ1Rva2VuLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgaWYgKCEobWF0Y2ggPSBJREVOVElGSUVSLmV4ZWModGhpcy5jaHVuaykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaW5wdXQgPSBtYXRjaFswXSwgaWQgPSBtYXRjaFsxXSwgY29sb24gPSBtYXRjaFsyXTtcbiAgICAgIGlkTGVuZ3RoID0gaWQubGVuZ3RoO1xuICAgICAgcG9wcGVkVG9rZW4gPSB2b2lkIDA7XG4gICAgICBpZiAoaWQgPT09ICdvd24nICYmIHRoaXMudGFnKCkgPT09ICdGT1InKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ09XTicsIGlkKTtcbiAgICAgICAgcmV0dXJuIGlkLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChpZCA9PT0gJ2Zyb20nICYmIHRoaXMudGFnKCkgPT09ICdZSUVMRCcpIHtcbiAgICAgICAgdGhpcy50b2tlbignRlJPTScsIGlkKTtcbiAgICAgICAgcmV0dXJuIGlkLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGZvcmNlZElkZW50aWZpZXIgPSBjb2xvbiB8fCAocHJldiA9IGxhc3QodGhpcy50b2tlbnMpKSAmJiAoKChfcmVmMiA9IHByZXZbMF0pID09PSAnLicgfHwgX3JlZjIgPT09ICc/LicgfHwgX3JlZjIgPT09ICc6OicgfHwgX3JlZjIgPT09ICc/OjonKSB8fCAhcHJldi5zcGFjZWQgJiYgcHJldlswXSA9PT0gJ0AnKSAmJiBpZCAhPT0gJ2RlZmVyJztcbiAgICAgIHRhZyA9ICdJREVOVElGSUVSJztcbiAgICAgIGlmICghZm9yY2VkSWRlbnRpZmllciAmJiAoX19pbmRleE9mLmNhbGwoSlNfS0VZV09SRFMsIGlkKSA+PSAwIHx8IF9faW5kZXhPZi5jYWxsKENPRkZFRV9LRVlXT1JEUywgaWQpID49IDApKSB7XG4gICAgICAgIHRhZyA9IGlkLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmICh0YWcgPT09ICdXSEVOJyAmJiAoX3JlZjMgPSB0aGlzLnRhZygpLCBfX2luZGV4T2YuY2FsbChMSU5FX0JSRUFLLCBfcmVmMykgPj0gMCkpIHtcbiAgICAgICAgICB0YWcgPSAnTEVBRElOR19XSEVOJztcbiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdGT1InKSB7XG4gICAgICAgICAgdGhpcy5zZWVuRm9yID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdVTkxFU1MnKSB7XG4gICAgICAgICAgdGFnID0gJ0lGJztcbiAgICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChVTkFSWSwgdGFnKSA+PSAwKSB7XG4gICAgICAgICAgdGFnID0gJ1VOQVJZJztcbiAgICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChSRUxBVElPTiwgdGFnKSA+PSAwKSB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gJ0lOU1RBTkNFT0YnICYmIHRoaXMuc2VlbkZvcikge1xuICAgICAgICAgICAgdGFnID0gJ0ZPUicgKyB0YWc7XG4gICAgICAgICAgICB0aGlzLnNlZW5Gb3IgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFnID0gJ1JFTEFUSU9OJztcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlKCkgPT09ICchJykge1xuICAgICAgICAgICAgICBwb3BwZWRUb2tlbiA9IHRoaXMudG9rZW5zLnBvcCgpO1xuICAgICAgICAgICAgICBpZCA9ICchJyArIGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKEpTX0ZPUkJJRERFTiwgaWQpID49IDApIHtcbiAgICAgICAgaWYgKGZvcmNlZElkZW50aWZpZXIpIHtcbiAgICAgICAgICB0YWcgPSAnSURFTlRJRklFUic7XG4gICAgICAgICAgaWQgPSBuZXcgU3RyaW5nKGlkKTtcbiAgICAgICAgICBpZC5yZXNlcnZlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoUkVTRVJWRUQsIGlkKSA+PSAwKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihcInJlc2VydmVkIHdvcmQgXFxcIlwiICsgaWQgKyBcIlxcXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghZm9yY2VkSWRlbnRpZmllcikge1xuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwoQ09GRkVFX0FMSUFTRVMsIGlkKSA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBDT0ZGRUVfQUxJQVNfTUFQW2lkXTtcbiAgICAgICAgfVxuICAgICAgICB0YWcgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc3dpdGNoIChpZCkge1xuICAgICAgICAgICAgY2FzZSAnISc6XG4gICAgICAgICAgICAgIHJldHVybiAnVU5BUlknO1xuICAgICAgICAgICAgY2FzZSAnPT0nOlxuICAgICAgICAgICAgY2FzZSAnIT0nOlxuICAgICAgICAgICAgICByZXR1cm4gJ0NPTVBBUkUnO1xuICAgICAgICAgICAgY2FzZSAnJiYnOlxuICAgICAgICAgICAgY2FzZSAnfHwnOlxuICAgICAgICAgICAgICByZXR1cm4gJ0xPR0lDJztcbiAgICAgICAgICAgIGNhc2UgJ3RydWUnOlxuICAgICAgICAgICAgY2FzZSAnZmFsc2UnOlxuICAgICAgICAgICAgICByZXR1cm4gJ0JPT0wnO1xuICAgICAgICAgICAgY2FzZSAnYnJlYWsnOlxuICAgICAgICAgICAgY2FzZSAnY29udGludWUnOlxuICAgICAgICAgICAgICByZXR1cm4gJ1NUQVRFTUVOVCc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gdGFnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICAgIH1cbiAgICAgIHRhZ1Rva2VuID0gdGhpcy50b2tlbih0YWcsIGlkLCAwLCBpZExlbmd0aCk7XG4gICAgICBpZiAocG9wcGVkVG9rZW4pIHtcbiAgICAgICAgX3JlZjQgPSBbcG9wcGVkVG9rZW5bMl0uZmlyc3RfbGluZSwgcG9wcGVkVG9rZW5bMl0uZmlyc3RfY29sdW1uXSwgdGFnVG9rZW5bMl0uZmlyc3RfbGluZSA9IF9yZWY0WzBdLCB0YWdUb2tlblsyXS5maXJzdF9jb2x1bW4gPSBfcmVmNFsxXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb2xvbikge1xuICAgICAgICBjb2xvbk9mZnNldCA9IGlucHV0Lmxhc3RJbmRleE9mKCc6Jyk7XG4gICAgICAgIHRoaXMudG9rZW4oJzonLCAnOicsIGNvbG9uT2Zmc2V0LCBjb2xvbi5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0Lmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLm51bWJlclRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmluYXJ5TGl0ZXJhbCwgbGV4ZWRMZW5ndGgsIG1hdGNoLCBudW1iZXIsIG9jdGFsTGl0ZXJhbDtcbiAgICAgIGlmICghKG1hdGNoID0gTlVNQkVSLmV4ZWModGhpcy5jaHVuaykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgbnVtYmVyID0gbWF0Y2hbMF07XG4gICAgICBpZiAoL14wW0JPWF0vLnRlc3QobnVtYmVyKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwicmFkaXggcHJlZml4ICdcIiArIG51bWJlciArIFwiJyBtdXN0IGJlIGxvd2VyY2FzZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAoL0UvLnRlc3QobnVtYmVyKSAmJiAhL14weC8udGVzdChudW1iZXIpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJleHBvbmVudGlhbCBub3RhdGlvbiAnXCIgKyBudW1iZXIgKyBcIicgbXVzdCBiZSBpbmRpY2F0ZWQgd2l0aCBhIGxvd2VyY2FzZSAnZSdcIik7XG4gICAgICB9IGVsc2UgaWYgKC9eMFxcZCpbODldLy50ZXN0KG51bWJlcikpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcImRlY2ltYWwgbGl0ZXJhbCAnXCIgKyBudW1iZXIgKyBcIicgbXVzdCBub3QgYmUgcHJlZml4ZWQgd2l0aCAnMCdcIik7XG4gICAgICB9IGVsc2UgaWYgKC9eMFxcZCsvLnRlc3QobnVtYmVyKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwib2N0YWwgbGl0ZXJhbCAnXCIgKyBudW1iZXIgKyBcIicgbXVzdCBiZSBwcmVmaXhlZCB3aXRoICcwbydcIik7XG4gICAgICB9XG4gICAgICBsZXhlZExlbmd0aCA9IG51bWJlci5sZW5ndGg7XG4gICAgICBpZiAob2N0YWxMaXRlcmFsID0gL14wbyhbMC03XSspLy5leGVjKG51bWJlcikpIHtcbiAgICAgICAgbnVtYmVyID0gJzB4JyArIHBhcnNlSW50KG9jdGFsTGl0ZXJhbFsxXSwgOCkudG9TdHJpbmcoMTYpO1xuICAgICAgfVxuICAgICAgaWYgKGJpbmFyeUxpdGVyYWwgPSAvXjBiKFswMV0rKS8uZXhlYyhudW1iZXIpKSB7XG4gICAgICAgIG51bWJlciA9ICcweCcgKyBwYXJzZUludChiaW5hcnlMaXRlcmFsWzFdLCAyKS50b1N0cmluZygxNik7XG4gICAgICB9XG4gICAgICB0aGlzLnRva2VuKCdOVU1CRVInLCBudW1iZXIsIDAsIGxleGVkTGVuZ3RoKTtcbiAgICAgIHJldHVybiBsZXhlZExlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnN0cmluZ1Rva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5uZXIsIGlubmVyTGVuLCBudW1CcmVhaywgb2N0YWxFc2MsIHBvcywgcXVvdGUsIHN0cmluZywgdHJpbW1lZDtcbiAgICAgIHN3aXRjaCAocXVvdGUgPSB0aGlzLmNodW5rLmNoYXJBdCgwKSkge1xuICAgICAgICBjYXNlIFwiJ1wiOlxuICAgICAgICAgIHN0cmluZyA9IChTSU1QTEVTVFIuZXhlYyh0aGlzLmNodW5rKSB8fCBbXSlbMF07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1wiJzpcbiAgICAgICAgICBzdHJpbmcgPSB0aGlzLmJhbGFuY2VkU3RyaW5nKHRoaXMuY2h1bmssICdcIicpO1xuICAgICAgfVxuICAgICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpbm5lciA9IHN0cmluZy5zbGljZSgxLCAtMSk7XG4gICAgICB0cmltbWVkID0gdGhpcy5yZW1vdmVOZXdsaW5lcyhpbm5lcik7XG4gICAgICBpZiAocXVvdGUgPT09ICdcIicgJiYgMCA8IHN0cmluZy5pbmRleE9mKCcjeycsIDEpKSB7XG4gICAgICAgIG51bUJyZWFrID0gcG9zID0gMDtcbiAgICAgICAgaW5uZXJMZW4gPSBpbm5lci5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpbm5lci5jaGFyQXQocG9zKyspID09PSAnXFxuJyAmJiBwb3MgPCBpbm5lckxlbikge1xuICAgICAgICAgIG51bUJyZWFrKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZVN0cmluZyh0cmltbWVkLCB7XG4gICAgICAgICAgc3RyT2Zmc2V0OiAxICsgbnVtQnJlYWssXG4gICAgICAgICAgbGV4ZWRMZW5ndGg6IHN0cmluZy5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRva2VuKCdTVFJJTkcnLCBxdW90ZSArIHRoaXMuZXNjYXBlTGluZXModHJpbW1lZCkgKyBxdW90ZSwgMCwgc3RyaW5nLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICBpZiAob2N0YWxFc2MgPSAvXig/OlxcXFwufFteXFxcXF0pKlxcXFwoPzowWzAtN118WzEtN10pLy50ZXN0KHN0cmluZykpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcIm9jdGFsIGVzY2FwZSBzZXF1ZW5jZXMgXCIgKyBzdHJpbmcgKyBcIiBhcmUgbm90IGFsbG93ZWRcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmhlcmVkb2NUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRvYywgaGVyZWRvYywgbWF0Y2gsIHF1b3RlLCBzdHJPZmZzZXQ7XG4gICAgICBpZiAoIShtYXRjaCA9IEhFUkVET0MuZXhlYyh0aGlzLmNodW5rKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBoZXJlZG9jID0gbWF0Y2hbMF07XG4gICAgICBxdW90ZSA9IGhlcmVkb2MuY2hhckF0KDApO1xuICAgICAgZG9jID0gdGhpcy5zYW5pdGl6ZUhlcmVkb2MobWF0Y2hbMl0sIHtcbiAgICAgICAgcXVvdGU6IHF1b3RlLFxuICAgICAgICBpbmRlbnQ6IG51bGxcbiAgICAgIH0pO1xuICAgICAgaWYgKHF1b3RlID09PSAnXCInICYmIDAgPD0gZG9jLmluZGV4T2YoJyN7JykpIHtcbiAgICAgICAgc3RyT2Zmc2V0ID0gbWF0Y2hbMl0uY2hhckF0KDApID09PSAnXFxuJyA/IDQgOiAzO1xuICAgICAgICB0aGlzLmludGVycG9sYXRlU3RyaW5nKGRvYywge1xuICAgICAgICAgIGhlcmVkb2M6IHRydWUsXG4gICAgICAgICAgc3RyT2Zmc2V0OiBzdHJPZmZzZXQsXG4gICAgICAgICAgbGV4ZWRMZW5ndGg6IGhlcmVkb2MubGVuZ3RoXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b2tlbignU1RSSU5HJywgdGhpcy5tYWtlU3RyaW5nKGRvYywgcXVvdGUsIHRydWUpLCAwLCBoZXJlZG9jLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGVyZWRvYy5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5jb21tZW50VG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb21tZW50LCBoZXJlLCBtYXRjaDtcbiAgICAgIGlmICghKG1hdGNoID0gdGhpcy5jaHVuay5tYXRjaChDT01NRU5UKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBjb21tZW50ID0gbWF0Y2hbMF0sIGhlcmUgPSBtYXRjaFsxXTtcbiAgICAgIGlmIChoZXJlKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ0hFUkVDT01NRU5UJywgdGhpcy5zYW5pdGl6ZUhlcmVkb2MoaGVyZSwge1xuICAgICAgICAgIGhlcmVjb21tZW50OiB0cnVlLFxuICAgICAgICAgIGluZGVudDogcmVwZWF0KCcgJywgdGhpcy5pbmRlbnQpXG4gICAgICAgIH0pLCAwLCBjb21tZW50Lmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29tbWVudC5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5qc1Rva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWF0Y2gsIHNjcmlwdDtcbiAgICAgIGlmICghKHRoaXMuY2h1bmsuY2hhckF0KDApID09PSAnYCcgJiYgKG1hdGNoID0gSlNUT0tFTi5leGVjKHRoaXMuY2h1bmspKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICB0aGlzLnRva2VuKCdKUycsIChzY3JpcHQgPSBtYXRjaFswXSkuc2xpY2UoMSwgLTEpLCAwLCBzY3JpcHQubGVuZ3RoKTtcbiAgICAgIHJldHVybiBzY3JpcHQubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUucmVnZXhUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGZsYWdzLCBsZW5ndGgsIG1hdGNoLCBwcmV2LCByZWdleCwgX3JlZjIsIF9yZWYzO1xuICAgICAgaWYgKHRoaXMuY2h1bmsuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpZiAobGVuZ3RoID0gdGhpcy5oZXJlZ2V4VG9rZW4oKSkge1xuICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgcHJldiA9IGxhc3QodGhpcy50b2tlbnMpO1xuICAgICAgaWYgKHByZXYgJiYgKF9yZWYyID0gcHJldlswXSwgX19pbmRleE9mLmNhbGwoKHByZXYuc3BhY2VkID8gTk9UX1JFR0VYIDogTk9UX1NQQUNFRF9SRUdFWCksIF9yZWYyKSA+PSAwKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmICghKG1hdGNoID0gUkVHRVguZXhlYyh0aGlzLmNodW5rKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBfcmVmMyA9IG1hdGNoLCBtYXRjaCA9IF9yZWYzWzBdLCByZWdleCA9IF9yZWYzWzFdLCBmbGFncyA9IF9yZWYzWzJdO1xuICAgICAgaWYgKHJlZ2V4ID09PSAnLy8nKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKHJlZ2V4LnNsaWNlKDAsIDIpID09PSAnLyonKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoJ3JlZ3VsYXIgZXhwcmVzc2lvbnMgY2Fubm90IGJlZ2luIHdpdGggYCpgJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnRva2VuKCdSRUdFWCcsIFwiXCIgKyByZWdleCArIGZsYWdzLCAwLCBtYXRjaC5sZW5ndGgpO1xuICAgICAgcmV0dXJuIG1hdGNoLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmhlcmVnZXhUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJvZHksIGZsYWdzLCBmbGFnc09mZnNldCwgaGVyZWdleCwgbWF0Y2gsIHBsdXNUb2tlbiwgcHJldiwgcmUsIHRhZywgdG9rZW4sIHRva2VucywgdmFsdWUsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgaWYgKCEobWF0Y2ggPSBIRVJFR0VYLmV4ZWModGhpcy5jaHVuaykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaGVyZWdleCA9IG1hdGNoWzBdLCBib2R5ID0gbWF0Y2hbMV0sIGZsYWdzID0gbWF0Y2hbMl07XG4gICAgICBpZiAoMCA+IGJvZHkuaW5kZXhPZignI3snKSkge1xuICAgICAgICByZSA9IHRoaXMuZXNjYXBlTGluZXMoYm9keS5yZXBsYWNlKEhFUkVHRVhfT01JVCwgJyQxJDInKS5yZXBsYWNlKC9cXC8vZywgJ1xcXFwvJyksIHRydWUpO1xuICAgICAgICBpZiAocmUubWF0Y2goL15cXCovKSkge1xuICAgICAgICAgIHRoaXMuZXJyb3IoJ3JlZ3VsYXIgZXhwcmVzc2lvbnMgY2Fubm90IGJlZ2luIHdpdGggYCpgJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b2tlbignUkVHRVgnLCBcIi9cIiArIChyZSB8fCAnKD86KScpICsgXCIvXCIgKyBmbGFncywgMCwgaGVyZWdleC5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gaGVyZWdleC5sZW5ndGg7XG4gICAgICB9XG4gICAgICB0aGlzLnRva2VuKCdJREVOVElGSUVSJywgJ1JlZ0V4cCcsIDAsIDApO1xuICAgICAgdGhpcy50b2tlbignQ0FMTF9TVEFSVCcsICcoJywgMCwgMCk7XG4gICAgICB0b2tlbnMgPSBbXTtcbiAgICAgIF9yZWYyID0gdGhpcy5pbnRlcnBvbGF0ZVN0cmluZyhib2R5LCB7XG4gICAgICAgIHJlZ2V4OiB0cnVlLFxuICAgICAgICBzdHJPZmZzZXQ6IDNcbiAgICAgIH0pO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB0b2tlbiA9IF9yZWYyW19pXTtcbiAgICAgICAgdGFnID0gdG9rZW5bMF0sIHZhbHVlID0gdG9rZW5bMV07XG4gICAgICAgIGlmICh0YWcgPT09ICdUT0tFTlMnKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2guYXBwbHkodG9rZW5zLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAnTkVPU1RSSU5HJykge1xuICAgICAgICAgIGlmICghKHZhbHVlID0gdmFsdWUucmVwbGFjZShIRVJFR0VYX09NSVQsICckMSQyJykpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpO1xuICAgICAgICAgIHRva2VuWzBdID0gJ1NUUklORyc7XG4gICAgICAgICAgdG9rZW5bMV0gPSB0aGlzLm1ha2VTdHJpbmcodmFsdWUsICdcIicsIHRydWUpO1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFwiVW5leHBlY3RlZCBcIiArIHRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgcHJldiA9IGxhc3QodGhpcy50b2tlbnMpO1xuICAgICAgICBwbHVzVG9rZW4gPSBbJysnLCAnKyddO1xuICAgICAgICBwbHVzVG9rZW5bMl0gPSBwcmV2WzJdO1xuICAgICAgICB0b2tlbnMucHVzaChwbHVzVG9rZW4pO1xuICAgICAgfVxuICAgICAgdG9rZW5zLnBvcCgpO1xuICAgICAgaWYgKCgoX3JlZjMgPSB0b2tlbnNbMF0pICE9IG51bGwgPyBfcmVmM1swXSA6IHZvaWQgMCkgIT09ICdTVFJJTkcnKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ1NUUklORycsICdcIlwiJywgMCwgMCk7XG4gICAgICAgIHRoaXMudG9rZW4oJysnLCAnKycsIDAsIDApO1xuICAgICAgfVxuICAgICAgKF9yZWY0ID0gdGhpcy50b2tlbnMpLnB1c2guYXBwbHkoX3JlZjQsIHRva2Vucyk7XG4gICAgICBpZiAoZmxhZ3MpIHtcbiAgICAgICAgZmxhZ3NPZmZzZXQgPSBoZXJlZ2V4Lmxhc3RJbmRleE9mKGZsYWdzKTtcbiAgICAgICAgdGhpcy50b2tlbignLCcsICcsJywgZmxhZ3NPZmZzZXQsIDApO1xuICAgICAgICB0aGlzLnRva2VuKCdTVFJJTkcnLCAnXCInICsgZmxhZ3MgKyAnXCInLCBmbGFnc09mZnNldCwgZmxhZ3MubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW4oJyknLCAnKScsIGhlcmVnZXgubGVuZ3RoIC0gMSwgMCk7XG4gICAgICByZXR1cm4gaGVyZWdleC5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5saW5lVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkaWZmLCBpbmRlbnQsIG1hdGNoLCBub05ld2xpbmVzLCBzaXplO1xuICAgICAgaWYgKCEobWF0Y2ggPSBNVUxUSV9ERU5ULmV4ZWModGhpcy5jaHVuaykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaW5kZW50ID0gbWF0Y2hbMF07XG4gICAgICB0aGlzLnNlZW5Gb3IgPSBmYWxzZTtcbiAgICAgIHNpemUgPSBpbmRlbnQubGVuZ3RoIC0gMSAtIGluZGVudC5sYXN0SW5kZXhPZignXFxuJyk7XG4gICAgICBub05ld2xpbmVzID0gdGhpcy51bmZpbmlzaGVkKCk7XG4gICAgICBpZiAoc2l6ZSAtIHRoaXMuaW5kZWJ0ID09PSB0aGlzLmluZGVudCkge1xuICAgICAgICBpZiAobm9OZXdsaW5lcykge1xuICAgICAgICAgIHRoaXMuc3VwcHJlc3NOZXdsaW5lcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubmV3bGluZVRva2VuKDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRlbnQubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKHNpemUgPiB0aGlzLmluZGVudCkge1xuICAgICAgICBpZiAobm9OZXdsaW5lcykge1xuICAgICAgICAgIHRoaXMuaW5kZWJ0ID0gc2l6ZSAtIHRoaXMuaW5kZW50O1xuICAgICAgICAgIHRoaXMuc3VwcHJlc3NOZXdsaW5lcygpO1xuICAgICAgICAgIHJldHVybiBpbmRlbnQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy50b2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5iYXNlSW5kZW50ID0gdGhpcy5pbmRlbnQgPSBzaXplO1xuICAgICAgICAgIHJldHVybiBpbmRlbnQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGRpZmYgPSBzaXplIC0gdGhpcy5pbmRlbnQgKyB0aGlzLm91dGRlYnQ7XG4gICAgICAgIHRoaXMudG9rZW4oJ0lOREVOVCcsIGRpZmYsIGluZGVudC5sZW5ndGggLSBzaXplLCBzaXplKTtcbiAgICAgICAgdGhpcy5pbmRlbnRzLnB1c2goZGlmZik7XG4gICAgICAgIHRoaXMuZW5kcy5wdXNoKCdPVVRERU5UJyk7XG4gICAgICAgIHRoaXMub3V0ZGVidCA9IHRoaXMuaW5kZWJ0ID0gMDtcbiAgICAgICAgdGhpcy5pbmRlbnQgPSBzaXplO1xuICAgICAgfSBlbHNlIGlmIChzaXplIDwgdGhpcy5iYXNlSW5kZW50KSB7XG4gICAgICAgIHRoaXMuZXJyb3IoJ21pc3NpbmcgaW5kZW50YXRpb24nLCBpbmRlbnQubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5kZWJ0ID0gMDtcbiAgICAgICAgdGhpcy5vdXRkZW50VG9rZW4odGhpcy5pbmRlbnQgLSBzaXplLCBub05ld2xpbmVzLCBpbmRlbnQubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbmRlbnQubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUub3V0ZGVudFRva2VuID0gZnVuY3Rpb24obW92ZU91dCwgbm9OZXdsaW5lcywgb3V0ZGVudExlbmd0aCkge1xuICAgICAgdmFyIGRlY3JlYXNlZEluZGVudCwgZGVudCwgbGFzdEluZGVudCwgX3JlZjI7XG4gICAgICBkZWNyZWFzZWRJbmRlbnQgPSB0aGlzLmluZGVudCAtIG1vdmVPdXQ7XG4gICAgICB3aGlsZSAobW92ZU91dCA+IDApIHtcbiAgICAgICAgbGFzdEluZGVudCA9IHRoaXMuaW5kZW50c1t0aGlzLmluZGVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmICghbGFzdEluZGVudCkge1xuICAgICAgICAgIG1vdmVPdXQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGxhc3RJbmRlbnQgPT09IHRoaXMub3V0ZGVidCkge1xuICAgICAgICAgIG1vdmVPdXQgLT0gdGhpcy5vdXRkZWJ0O1xuICAgICAgICAgIHRoaXMub3V0ZGVidCA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAobGFzdEluZGVudCA8IHRoaXMub3V0ZGVidCkge1xuICAgICAgICAgIHRoaXMub3V0ZGVidCAtPSBsYXN0SW5kZW50O1xuICAgICAgICAgIG1vdmVPdXQgLT0gbGFzdEluZGVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZW50ID0gdGhpcy5pbmRlbnRzLnBvcCgpICsgdGhpcy5vdXRkZWJ0O1xuICAgICAgICAgIGlmIChvdXRkZW50TGVuZ3RoICYmIChfcmVmMiA9IHRoaXMuY2h1bmtbb3V0ZGVudExlbmd0aF0sIF9faW5kZXhPZi5jYWxsKElOREVOVEFCTEVfQ0xPU0VSUywgX3JlZjIpID49IDApKSB7XG4gICAgICAgICAgICBkZWNyZWFzZWRJbmRlbnQgLT0gZGVudCAtIG1vdmVPdXQ7XG4gICAgICAgICAgICBtb3ZlT3V0ID0gZGVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5vdXRkZWJ0ID0gMDtcbiAgICAgICAgICB0aGlzLnBhaXIoJ09VVERFTlQnKTtcbiAgICAgICAgICB0aGlzLnRva2VuKCdPVVRERU5UJywgbW92ZU91dCwgMCwgb3V0ZGVudExlbmd0aCk7XG4gICAgICAgICAgbW92ZU91dCAtPSBkZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVudCkge1xuICAgICAgICB0aGlzLm91dGRlYnQgLT0gbW92ZU91dDtcbiAgICAgIH1cbiAgICAgIHdoaWxlICh0aGlzLnZhbHVlKCkgPT09ICc7Jykge1xuICAgICAgICB0aGlzLnRva2Vucy5wb3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICghKHRoaXMudGFnKCkgPT09ICdURVJNSU5BVE9SJyB8fCBub05ld2xpbmVzKSkge1xuICAgICAgICB0aGlzLnRva2VuKCdURVJNSU5BVE9SJywgJ1xcbicsIG91dGRlbnRMZW5ndGgsIDApO1xuICAgICAgfVxuICAgICAgdGhpcy5pbmRlbnQgPSBkZWNyZWFzZWRJbmRlbnQ7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLndoaXRlc3BhY2VUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hdGNoLCBubGluZSwgcHJldjtcbiAgICAgIGlmICghKChtYXRjaCA9IFdISVRFU1BBQ0UuZXhlYyh0aGlzLmNodW5rKSkgfHwgKG5saW5lID0gdGhpcy5jaHVuay5jaGFyQXQoMCkgPT09ICdcXG4nKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBwcmV2ID0gbGFzdCh0aGlzLnRva2Vucyk7XG4gICAgICBpZiAocHJldikge1xuICAgICAgICBwcmV2W21hdGNoID8gJ3NwYWNlZCcgOiAnbmV3TGluZSddID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5uZXdsaW5lVG9rZW4gPSBmdW5jdGlvbihvZmZzZXQpIHtcbiAgICAgIHdoaWxlICh0aGlzLnZhbHVlKCkgPT09ICc7Jykge1xuICAgICAgICB0aGlzLnRva2Vucy5wb3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnRhZygpICE9PSAnVEVSTUlOQVRPUicpIHtcbiAgICAgICAgdGhpcy50b2tlbignVEVSTUlOQVRPUicsICdcXG4nLCBvZmZzZXQsIDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5zdXBwcmVzc05ld2xpbmVzID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSgpID09PSAnXFxcXCcpIHtcbiAgICAgICAgdGhpcy50b2tlbnMucG9wKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmxpdGVyYWxUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hdGNoLCBwcmV2LCB0YWcsIHZhbHVlLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNTtcbiAgICAgIGlmIChtYXRjaCA9IE9QRVJBVE9SLmV4ZWModGhpcy5jaHVuaykpIHtcbiAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgaWYgKENPREUudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLnRhZ1BhcmFtZXRlcnMoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmNodW5rLmNoYXJBdCgwKTtcbiAgICAgIH1cbiAgICAgIHRhZyA9IHZhbHVlO1xuICAgICAgcHJldiA9IGxhc3QodGhpcy50b2tlbnMpO1xuICAgICAgaWYgKHZhbHVlID09PSAnPScgJiYgcHJldikge1xuICAgICAgICBpZiAoIXByZXZbMV0ucmVzZXJ2ZWQgJiYgKF9yZWYyID0gcHJldlsxXSwgX19pbmRleE9mLmNhbGwoSlNfRk9SQklEREVOLCBfcmVmMikgPj0gMCkpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFwicmVzZXJ2ZWQgd29yZCBcXFwiXCIgKyAodGhpcy52YWx1ZSgpKSArIFwiXFxcIiBjYW4ndCBiZSBhc3NpZ25lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9yZWYzID0gcHJldlsxXSkgPT09ICd8fCcgfHwgX3JlZjMgPT09ICcmJicpIHtcbiAgICAgICAgICBwcmV2WzBdID0gJ0NPTVBPVU5EX0FTU0lHTic7XG4gICAgICAgICAgcHJldlsxXSArPSAnPSc7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID09PSAnOycpIHtcbiAgICAgICAgdGhpcy5zZWVuRm9yID0gZmFsc2U7XG4gICAgICAgIHRhZyA9ICdURVJNSU5BVE9SJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoTUFUSCwgdmFsdWUpID49IDApIHtcbiAgICAgICAgdGFnID0gJ01BVEgnO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChDT01QQVJFLCB2YWx1ZSkgPj0gMCkge1xuICAgICAgICB0YWcgPSAnQ09NUEFSRSc7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKENPTVBPVU5EX0FTU0lHTiwgdmFsdWUpID49IDApIHtcbiAgICAgICAgdGFnID0gJ0NPTVBPVU5EX0FTU0lHTic7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKFVOQVJZLCB2YWx1ZSkgPj0gMCkge1xuICAgICAgICB0YWcgPSAnVU5BUlknO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChVTkFSWV9NQVRILCB2YWx1ZSkgPj0gMCkge1xuICAgICAgICB0YWcgPSAnVU5BUllfTUFUSCc7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKFNISUZULCB2YWx1ZSkgPj0gMCkge1xuICAgICAgICB0YWcgPSAnU0hJRlQnO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChMT0dJQywgdmFsdWUpID49IDAgfHwgdmFsdWUgPT09ICc/JyAmJiAocHJldiAhPSBudWxsID8gcHJldi5zcGFjZWQgOiB2b2lkIDApKSB7XG4gICAgICAgIHRhZyA9ICdMT0dJQyc7XG4gICAgICB9IGVsc2UgaWYgKHByZXYgJiYgIXByZXYuc3BhY2VkKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJygnICYmIChfcmVmNCA9IHByZXZbMF0sIF9faW5kZXhPZi5jYWxsKENBTExBQkxFLCBfcmVmNCkgPj0gMCkpIHtcbiAgICAgICAgICBpZiAocHJldlswXSA9PT0gJz8nKSB7XG4gICAgICAgICAgICBwcmV2WzBdID0gJ0ZVTkNfRVhJU1QnO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0YWcgPSAnQ0FMTF9TVEFSVCc7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdbJyAmJiAoX3JlZjUgPSBwcmV2WzBdLCBfX2luZGV4T2YuY2FsbChJTkRFWEFCTEUsIF9yZWY1KSA+PSAwKSkge1xuICAgICAgICAgIHRhZyA9ICdJTkRFWF9TVEFSVCc7XG4gICAgICAgICAgc3dpdGNoIChwcmV2WzBdKSB7XG4gICAgICAgICAgICBjYXNlICc/JzpcbiAgICAgICAgICAgICAgcHJldlswXSA9ICdJTkRFWF9TT0FLJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgY2FzZSAnKCc6XG4gICAgICAgIGNhc2UgJ3snOlxuICAgICAgICBjYXNlICdbJzpcbiAgICAgICAgICB0aGlzLmVuZHMucHVzaChJTlZFUlNFU1t2YWx1ZV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcpJzpcbiAgICAgICAgY2FzZSAnfSc6XG4gICAgICAgIGNhc2UgJ10nOlxuICAgICAgICAgIHRoaXMucGFpcih2YWx1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLnRva2VuKHRhZywgdmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnNhbml0aXplSGVyZWRvYyA9IGZ1bmN0aW9uKGRvYywgb3B0aW9ucykge1xuICAgICAgdmFyIGF0dGVtcHQsIGhlcmVjb21tZW50LCBpbmRlbnQsIG1hdGNoLCBfcmVmMjtcbiAgICAgIGluZGVudCA9IG9wdGlvbnMuaW5kZW50LCBoZXJlY29tbWVudCA9IG9wdGlvbnMuaGVyZWNvbW1lbnQ7XG4gICAgICBpZiAoaGVyZWNvbW1lbnQpIHtcbiAgICAgICAgaWYgKEhFUkVET0NfSUxMRUdBTC50ZXN0KGRvYykpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFwiYmxvY2sgY29tbWVudCBjYW5ub3QgY29udGFpbiBcXFwiKi9cXFwiLCBzdGFydGluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jLmluZGV4T2YoJ1xcbicpIDwgMCkge1xuICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlIChtYXRjaCA9IEhFUkVET0NfSU5ERU5ULmV4ZWMoZG9jKSkge1xuICAgICAgICAgIGF0dGVtcHQgPSBtYXRjaFsxXTtcbiAgICAgICAgICBpZiAoaW5kZW50ID09PSBudWxsIHx8ICgwIDwgKF9yZWYyID0gYXR0ZW1wdC5sZW5ndGgpICYmIF9yZWYyIDwgaW5kZW50Lmxlbmd0aCkpIHtcbiAgICAgICAgICAgIGluZGVudCA9IGF0dGVtcHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgIGRvYyA9IGRvYy5yZXBsYWNlKFJlZ0V4cChcIlxcXFxuXCIgKyBpbmRlbnQsIFwiZ1wiKSwgJ1xcbicpO1xuICAgICAgfVxuICAgICAgaWYgKCFoZXJlY29tbWVudCkge1xuICAgICAgICBkb2MgPSBkb2MucmVwbGFjZSgvXlxcbi8sICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb2M7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS50YWdQYXJhbWV0ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgc3RhY2ssIHRvaywgdG9rZW5zO1xuICAgICAgaWYgKHRoaXMudGFnKCkgIT09ICcpJykge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHN0YWNrID0gW107XG4gICAgICB0b2tlbnMgPSB0aGlzLnRva2VucztcbiAgICAgIGkgPSB0b2tlbnMubGVuZ3RoO1xuICAgICAgdG9rZW5zWy0taV1bMF0gPSAnUEFSQU1fRU5EJztcbiAgICAgIHdoaWxlICh0b2sgPSB0b2tlbnNbLS1pXSkge1xuICAgICAgICBzd2l0Y2ggKHRva1swXSkge1xuICAgICAgICAgIGNhc2UgJyknOlxuICAgICAgICAgICAgc3RhY2sucHVzaCh0b2spO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnKCc6XG4gICAgICAgICAgY2FzZSAnQ0FMTF9TVEFSVCc6XG4gICAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0b2tbMF0gPT09ICcoJykge1xuICAgICAgICAgICAgICB0b2tbMF0gPSAnUEFSQU1fU1RBUlQnO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmNsb3NlSW5kZW50YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm91dGRlbnRUb2tlbih0aGlzLmluZGVudCk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5iYWxhbmNlZFN0cmluZyA9IGZ1bmN0aW9uKHN0ciwgZW5kKSB7XG4gICAgICB2YXIgY29udGludWVDb3VudCwgaSwgbGV0dGVyLCBtYXRjaCwgcHJldiwgc3RhY2ssIF9pLCBfcmVmMjtcbiAgICAgIGNvbnRpbnVlQ291bnQgPSAwO1xuICAgICAgc3RhY2sgPSBbZW5kXTtcbiAgICAgIGZvciAoaSA9IF9pID0gMSwgX3JlZjIgPSBzdHIubGVuZ3RoOyAxIDw9IF9yZWYyID8gX2kgPCBfcmVmMiA6IF9pID4gX3JlZjI7IGkgPSAxIDw9IF9yZWYyID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgaWYgKGNvbnRpbnVlQ291bnQpIHtcbiAgICAgICAgICAtLWNvbnRpbnVlQ291bnQ7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChsZXR0ZXIgPSBzdHIuY2hhckF0KGkpKSB7XG4gICAgICAgICAgY2FzZSAnXFxcXCc6XG4gICAgICAgICAgICArK2NvbnRpbnVlQ291bnQ7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBjYXNlIGVuZDpcbiAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgaWYgKCFzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCAraSArIDEgfHwgOWU5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVuZCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZCA9PT0gJ30nICYmIChsZXR0ZXIgPT09ICdcIicgfHwgbGV0dGVyID09PSBcIidcIikpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKGVuZCA9IGxldHRlcik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAnfScgJiYgbGV0dGVyID09PSAnLycgJiYgKG1hdGNoID0gSEVSRUdFWC5leGVjKHN0ci5zbGljZShpKSkgfHwgUkVHRVguZXhlYyhzdHIuc2xpY2UoaSkpKSkge1xuICAgICAgICAgIGNvbnRpbnVlQ291bnQgKz0gbWF0Y2hbMF0ubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChlbmQgPT09ICd9JyAmJiBsZXR0ZXIgPT09ICd7Jykge1xuICAgICAgICAgIHN0YWNrLnB1c2goZW5kID0gJ30nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbmQgPT09ICdcIicgJiYgcHJldiA9PT0gJyMnICYmIGxldHRlciA9PT0gJ3snKSB7XG4gICAgICAgICAgc3RhY2sucHVzaChlbmQgPSAnfScpO1xuICAgICAgICB9XG4gICAgICAgIHByZXYgPSBsZXR0ZXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5lcnJvcihcIm1pc3NpbmcgXCIgKyAoc3RhY2sucG9wKCkpICsgXCIsIHN0YXJ0aW5nXCIpO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuaW50ZXJwb2xhdGVTdHJpbmcgPSBmdW5jdGlvbihzdHIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjb2x1bW4sIGVycm9yVG9rZW4sIGV4cHIsIGhlcmVkb2MsIGksIGlubmVyLCBpbnRlcnBvbGF0ZWQsIGxlbiwgbGV0dGVyLCBsZXhlZExlbmd0aCwgbGluZSwgbG9jYXRpb25Ub2tlbiwgbmVzdGVkLCBvZmZzZXRJbkNodW5rLCBwaSwgcGx1c1Rva2VuLCBwb3BwZWQsIHJlZ2V4LCBycGFyZW4sIHN0ck9mZnNldCwgdGFnLCB0b2tlbiwgdG9rZW5zLCB2YWx1ZSwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGhlcmVkb2MgPSBvcHRpb25zLmhlcmVkb2MsIHJlZ2V4ID0gb3B0aW9ucy5yZWdleCwgb2Zmc2V0SW5DaHVuayA9IG9wdGlvbnMub2Zmc2V0SW5DaHVuaywgc3RyT2Zmc2V0ID0gb3B0aW9ucy5zdHJPZmZzZXQsIGxleGVkTGVuZ3RoID0gb3B0aW9ucy5sZXhlZExlbmd0aDtcbiAgICAgIG9mZnNldEluQ2h1bmsgfHwgKG9mZnNldEluQ2h1bmsgPSAwKTtcbiAgICAgIHN0ck9mZnNldCB8fCAoc3RyT2Zmc2V0ID0gMCk7XG4gICAgICBsZXhlZExlbmd0aCB8fCAobGV4ZWRMZW5ndGggPSBzdHIubGVuZ3RoKTtcbiAgICAgIHRva2VucyA9IFtdO1xuICAgICAgcGkgPSAwO1xuICAgICAgaSA9IC0xO1xuICAgICAgd2hpbGUgKGxldHRlciA9IHN0ci5jaGFyQXQoaSArPSAxKSkge1xuICAgICAgICBpZiAobGV0dGVyID09PSAnXFxcXCcpIHtcbiAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEobGV0dGVyID09PSAnIycgJiYgc3RyLmNoYXJBdChpICsgMSkgPT09ICd7JyAmJiAoZXhwciA9IHRoaXMuYmFsYW5jZWRTdHJpbmcoc3RyLnNsaWNlKGkgKyAxKSwgJ30nKSkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBpIDwgaSkge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRoaXMubWFrZVRva2VuKCdORU9TVFJJTkcnLCBzdHIuc2xpY2UocGksIGkpLCBzdHJPZmZzZXQgKyBwaSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXJyb3JUb2tlbikge1xuICAgICAgICAgIGVycm9yVG9rZW4gPSB0aGlzLm1ha2VUb2tlbignJywgJ3N0cmluZyBpbnRlcnBvbGF0aW9uJywgb2Zmc2V0SW5DaHVuayArIGkgKyAxLCAyKTtcbiAgICAgICAgfVxuICAgICAgICBpbm5lciA9IGV4cHIuc2xpY2UoMSwgLTEpO1xuICAgICAgICBpZiAoaW5uZXIubGVuZ3RoKSB7XG4gICAgICAgICAgX3JlZjIgPSB0aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsoc3RyT2Zmc2V0ICsgaSArIDIpLCBsaW5lID0gX3JlZjJbMF0sIGNvbHVtbiA9IF9yZWYyWzFdO1xuICAgICAgICAgIG5lc3RlZCA9IG5ldyBMZXhlcigpLnRva2VuaXplKGlubmVyLCB7XG4gICAgICAgICAgICBsaW5lOiBsaW5lLFxuICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sXG4gICAgICAgICAgICByZXdyaXRlOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBvcHBlZCA9IG5lc3RlZC5wb3AoKTtcbiAgICAgICAgICBpZiAoKChfcmVmMyA9IG5lc3RlZFswXSkgIT0gbnVsbCA/IF9yZWYzWzBdIDogdm9pZCAwKSA9PT0gJ1RFUk1JTkFUT1InKSB7XG4gICAgICAgICAgICBwb3BwZWQgPSBuZXN0ZWQuc2hpZnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxlbiA9IG5lc3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICAgICAgIG5lc3RlZC51bnNoaWZ0KHRoaXMubWFrZVRva2VuKCcoJywgJygnLCBzdHJPZmZzZXQgKyBpICsgMSwgMCkpO1xuICAgICAgICAgICAgICBuZXN0ZWQucHVzaCh0aGlzLm1ha2VUb2tlbignKScsICcpJywgc3RyT2Zmc2V0ICsgaSArIDEgKyBpbm5lci5sZW5ndGgsIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2Vucy5wdXNoKFsnVE9LRU5TJywgbmVzdGVkXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGkgKz0gZXhwci5sZW5ndGg7XG4gICAgICAgIHBpID0gaSArIDE7XG4gICAgICB9XG4gICAgICBpZiAoKGkgPiBwaSAmJiBwaSA8IHN0ci5sZW5ndGgpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHRoaXMubWFrZVRva2VuKCdORU9TVFJJTkcnLCBzdHIuc2xpY2UocGkpLCBzdHJPZmZzZXQgKyBwaSkpO1xuICAgICAgfVxuICAgICAgaWYgKHJlZ2V4KSB7XG4gICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW4oJ1NUUklORycsICdcIlwiJywgb2Zmc2V0SW5DaHVuaywgbGV4ZWRMZW5ndGgpO1xuICAgICAgfVxuICAgICAgaWYgKHRva2Vuc1swXVswXSAhPT0gJ05FT1NUUklORycpIHtcbiAgICAgICAgdG9rZW5zLnVuc2hpZnQodGhpcy5tYWtlVG9rZW4oJ05FT1NUUklORycsICcnLCBvZmZzZXRJbkNodW5rKSk7XG4gICAgICB9XG4gICAgICBpZiAoaW50ZXJwb2xhdGVkID0gdG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy50b2tlbignKCcsICcoJywgb2Zmc2V0SW5DaHVuaywgMCwgZXJyb3JUb2tlbik7XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSB0b2tlbnMubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICB0YWcgPSB0b2tlblswXSwgdmFsdWUgPSB0b2tlblsxXTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgcGx1c1Rva2VuID0gdGhpcy50b2tlbignKycsICcrJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvY2F0aW9uVG9rZW4gPSB0YWcgPT09ICdUT0tFTlMnID8gdmFsdWVbMF0gOiB0b2tlbjtcbiAgICAgICAgICBwbHVzVG9rZW5bMl0gPSB7XG4gICAgICAgICAgICBmaXJzdF9saW5lOiBsb2NhdGlvblRva2VuWzJdLmZpcnN0X2xpbmUsXG4gICAgICAgICAgICBmaXJzdF9jb2x1bW46IGxvY2F0aW9uVG9rZW5bMl0uZmlyc3RfY29sdW1uLFxuICAgICAgICAgICAgbGFzdF9saW5lOiBsb2NhdGlvblRva2VuWzJdLmZpcnN0X2xpbmUsXG4gICAgICAgICAgICBsYXN0X2NvbHVtbjogbG9jYXRpb25Ub2tlblsyXS5maXJzdF9jb2x1bW5cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT09ICdUT0tFTlMnKSB7XG4gICAgICAgICAgKF9yZWY0ID0gdGhpcy50b2tlbnMpLnB1c2guYXBwbHkoX3JlZjQsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdORU9TVFJJTkcnKSB7XG4gICAgICAgICAgdG9rZW5bMF0gPSAnU1RSSU5HJztcbiAgICAgICAgICB0b2tlblsxXSA9IHRoaXMubWFrZVN0cmluZyh2YWx1ZSwgJ1wiJywgaGVyZWRvYyk7XG4gICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihcIlVuZXhwZWN0ZWQgXCIgKyB0YWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW50ZXJwb2xhdGVkKSB7XG4gICAgICAgIHJwYXJlbiA9IHRoaXMubWFrZVRva2VuKCcpJywgJyknLCBvZmZzZXRJbkNodW5rICsgbGV4ZWRMZW5ndGgsIDApO1xuICAgICAgICBycGFyZW4uc3RyaW5nRW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50b2tlbnMucHVzaChycGFyZW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VucztcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnBhaXIgPSBmdW5jdGlvbih0YWcpIHtcbiAgICAgIHZhciB3YW50ZWQ7XG4gICAgICBpZiAodGFnICE9PSAod2FudGVkID0gbGFzdCh0aGlzLmVuZHMpKSkge1xuICAgICAgICBpZiAoJ09VVERFTlQnICE9PSB3YW50ZWQpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFwidW5tYXRjaGVkIFwiICsgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm91dGRlbnRUb2tlbihsYXN0KHRoaXMuaW5kZW50cyksIHRydWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYWlyKHRhZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5lbmRzLnBvcCgpO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayA9IGZ1bmN0aW9uKG9mZnNldCkge1xuICAgICAgdmFyIGNvbHVtbiwgbGluZUNvdW50LCBsaW5lcywgc3RyaW5nO1xuICAgICAgaWYgKG9mZnNldCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW3RoaXMuY2h1bmtMaW5lLCB0aGlzLmNodW5rQ29sdW1uXTtcbiAgICAgIH1cbiAgICAgIGlmIChvZmZzZXQgPj0gdGhpcy5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgc3RyaW5nID0gdGhpcy5jaHVuaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmluZyA9IHRoaXMuY2h1bmsuc2xpY2UoMCwgKyhvZmZzZXQgLSAxKSArIDEgfHwgOWU5KTtcbiAgICAgIH1cbiAgICAgIGxpbmVDb3VudCA9IGNvdW50KHN0cmluZywgJ1xcbicpO1xuICAgICAgY29sdW1uID0gdGhpcy5jaHVua0NvbHVtbjtcbiAgICAgIGlmIChsaW5lQ291bnQgPiAwKSB7XG4gICAgICAgIGxpbmVzID0gc3RyaW5nLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgY29sdW1uID0gbGFzdChsaW5lcykubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sdW1uICs9IHN0cmluZy5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3RoaXMuY2h1bmtMaW5lICsgbGluZUNvdW50LCBjb2x1bW5dO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUubWFrZVRva2VuID0gZnVuY3Rpb24odGFnLCB2YWx1ZSwgb2Zmc2V0SW5DaHVuaywgbGVuZ3RoKSB7XG4gICAgICB2YXIgbGFzdENoYXJhY3RlciwgbG9jYXRpb25EYXRhLCB0b2tlbiwgX3JlZjIsIF9yZWYzO1xuICAgICAgaWYgKG9mZnNldEluQ2h1bmsgPT0gbnVsbCkge1xuICAgICAgICBvZmZzZXRJbkNodW5rID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChsZW5ndGggPT0gbnVsbCkge1xuICAgICAgICBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBsb2NhdGlvbkRhdGEgPSB7fTtcbiAgICAgIF9yZWYyID0gdGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKG9mZnNldEluQ2h1bmspLCBsb2NhdGlvbkRhdGEuZmlyc3RfbGluZSA9IF9yZWYyWzBdLCBsb2NhdGlvbkRhdGEuZmlyc3RfY29sdW1uID0gX3JlZjJbMV07XG4gICAgICBsYXN0Q2hhcmFjdGVyID0gTWF0aC5tYXgoMCwgbGVuZ3RoIC0gMSk7XG4gICAgICBfcmVmMyA9IHRoaXMuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayhvZmZzZXRJbkNodW5rICsgbGFzdENoYXJhY3RlciksIGxvY2F0aW9uRGF0YS5sYXN0X2xpbmUgPSBfcmVmM1swXSwgbG9jYXRpb25EYXRhLmxhc3RfY29sdW1uID0gX3JlZjNbMV07XG4gICAgICB0b2tlbiA9IFt0YWcsIHZhbHVlLCBsb2NhdGlvbkRhdGFdO1xuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUudG9rZW4gPSBmdW5jdGlvbih0YWcsIHZhbHVlLCBvZmZzZXRJbkNodW5rLCBsZW5ndGgsIG9yaWdpbikge1xuICAgICAgdmFyIHRva2VuO1xuICAgICAgdG9rZW4gPSB0aGlzLm1ha2VUb2tlbih0YWcsIHZhbHVlLCBvZmZzZXRJbkNodW5rLCBsZW5ndGgpO1xuICAgICAgaWYgKG9yaWdpbikge1xuICAgICAgICB0b2tlbi5vcmlnaW4gPSBvcmlnaW47XG4gICAgICB9XG4gICAgICB0aGlzLnRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnRhZyA9IGZ1bmN0aW9uKGluZGV4LCB0YWcpIHtcbiAgICAgIHZhciB0b2s7XG4gICAgICByZXR1cm4gKHRvayA9IGxhc3QodGhpcy50b2tlbnMsIGluZGV4KSkgJiYgKHRhZyA/IHRva1swXSA9IHRhZyA6IHRva1swXSk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKGluZGV4LCB2YWwpIHtcbiAgICAgIHZhciB0b2s7XG4gICAgICByZXR1cm4gKHRvayA9IGxhc3QodGhpcy50b2tlbnMsIGluZGV4KSkgJiYgKHZhbCA/IHRva1sxXSA9IHZhbCA6IHRva1sxXSk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS51bmZpbmlzaGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gTElORV9DT05USU5VRVIudGVzdCh0aGlzLmNodW5rKSB8fCAoKF9yZWYyID0gdGhpcy50YWcoKSkgPT09ICdcXFxcJyB8fCBfcmVmMiA9PT0gJy4nIHx8IF9yZWYyID09PSAnPy4nIHx8IF9yZWYyID09PSAnPzo6JyB8fCBfcmVmMiA9PT0gJ1VOQVJZJyB8fCBfcmVmMiA9PT0gJ01BVEgnIHx8IF9yZWYyID09PSAnVU5BUllfTUFUSCcgfHwgX3JlZjIgPT09ICcrJyB8fCBfcmVmMiA9PT0gJy0nIHx8IF9yZWYyID09PSAnWUlFTEQnIHx8IF9yZWYyID09PSAnKionIHx8IF9yZWYyID09PSAnU0hJRlQnIHx8IF9yZWYyID09PSAnUkVMQVRJT04nIHx8IF9yZWYyID09PSAnQ09NUEFSRScgfHwgX3JlZjIgPT09ICdMT0dJQycgfHwgX3JlZjIgPT09ICdUSFJPVycgfHwgX3JlZjIgPT09ICdFWFRFTkRTJyk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5yZW1vdmVOZXdsaW5lcyA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKlxcblxccyovLCAnJykucmVwbGFjZSgvKFteXFxcXF18XFxcXFxcXFwpXFxzKlxcblxccyokLywgJyQxJyk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5lc2NhcGVMaW5lcyA9IGZ1bmN0aW9uKHN0ciwgaGVyZWRvYykge1xuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xcXFxbXlxcU1xcbl0qKFxcbnxcXFxcKVxccyovZywgZnVuY3Rpb24oZXNjYXBlZCwgY2hhcmFjdGVyKSB7XG4gICAgICAgIGlmIChjaGFyYWN0ZXIgPT09ICdcXG4nKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBlc2NhcGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChoZXJlZG9jKSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZShNVUxUSUxJTkVSLCAnXFxcXG4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXFxzKlxcblxccyovZywgJyAnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLm1ha2VTdHJpbmcgPSBmdW5jdGlvbihib2R5LCBxdW90ZSwgaGVyZWRvYykge1xuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIHJldHVybiBxdW90ZSArIHF1b3RlO1xuICAgICAgfVxuICAgICAgYm9keSA9IGJvZHkucmVwbGFjZShSZWdFeHAoXCJcXFxcXFxcXChcIiArIHF1b3RlICsgXCJ8XFxcXFxcXFwpXCIsIFwiZ1wiKSwgZnVuY3Rpb24obWF0Y2gsIGNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChjb250ZW50cyA9PT0gcXVvdGUpIHtcbiAgICAgICAgICByZXR1cm4gY29udGVudHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoUmVnRXhwKFwiXCIgKyBxdW90ZSwgXCJnXCIpLCAnXFxcXCQmJyk7XG4gICAgICByZXR1cm4gcXVvdGUgKyB0aGlzLmVzY2FwZUxpbmVzKGJvZHksIGhlcmVkb2MpICsgcXVvdGU7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG9mZnNldCkge1xuICAgICAgdmFyIGZpcnN0X2NvbHVtbiwgZmlyc3RfbGluZSwgX3JlZjI7XG4gICAgICBpZiAob2Zmc2V0ID09IG51bGwpIHtcbiAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgIH1cbiAgICAgIF9yZWYyID0gdGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKG9mZnNldCksIGZpcnN0X2xpbmUgPSBfcmVmMlswXSwgZmlyc3RfY29sdW1uID0gX3JlZjJbMV07XG4gICAgICByZXR1cm4gdGhyb3dTeW50YXhFcnJvcihtZXNzYWdlLCB7XG4gICAgICAgIGZpcnN0X2xpbmU6IGZpcnN0X2xpbmUsXG4gICAgICAgIGZpcnN0X2NvbHVtbjogZmlyc3RfY29sdW1uXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExleGVyO1xuXG4gIH0pKCk7XG5cbiAgSlNfS0VZV09SRFMgPSBbJ3RydWUnLCAnZmFsc2UnLCAnbnVsbCcsICd0aGlzJywgJ25ldycsICdkZWxldGUnLCAndHlwZW9mJywgJ2luJywgJ2luc3RhbmNlb2YnLCAncmV0dXJuJywgJ3Rocm93JywgJ2JyZWFrJywgJ2NvbnRpbnVlJywgJ2RlYnVnZ2VyJywgJ3lpZWxkJywgJ2lmJywgJ2Vsc2UnLCAnc3dpdGNoJywgJ2ZvcicsICd3aGlsZScsICdkbycsICd0cnknLCAnY2F0Y2gnLCAnZmluYWxseScsICdjbGFzcycsICdleHRlbmRzJywgJ3N1cGVyJ107XG5cbiAgQ09GRkVFX0tFWVdPUkRTID0gWyd1bmRlZmluZWQnLCAndGhlbicsICd1bmxlc3MnLCAndW50aWwnLCAnbG9vcCcsICdvZicsICdieScsICd3aGVuJ107XG5cbiAgQ09GRkVFX0tFWVdPUkRTID0gQ09GRkVFX0tFWVdPUkRTLmNvbmNhdChbJ2F3YWl0JywgJ2RlZmVyJ10pO1xuXG4gIENPRkZFRV9BTElBU19NQVAgPSB7XG4gICAgYW5kOiAnJiYnLFxuICAgIG9yOiAnfHwnLFxuICAgIGlzOiAnPT0nLFxuICAgIGlzbnQ6ICchPScsXG4gICAgbm90OiAnIScsXG4gICAgeWVzOiAndHJ1ZScsXG4gICAgbm86ICdmYWxzZScsXG4gICAgb246ICd0cnVlJyxcbiAgICBvZmY6ICdmYWxzZSdcbiAgfTtcblxuICBDT0ZGRUVfQUxJQVNFUyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgX3Jlc3VsdHM7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGtleSBpbiBDT0ZGRUVfQUxJQVNfTUFQKSB7XG4gICAgICBfcmVzdWx0cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfSkoKTtcblxuICBDT0ZGRUVfS0VZV09SRFMgPSBDT0ZGRUVfS0VZV09SRFMuY29uY2F0KENPRkZFRV9BTElBU0VTKTtcblxuICBSRVNFUlZFRCA9IFsnY2FzZScsICdkZWZhdWx0JywgJ2Z1bmN0aW9uJywgJ3ZhcicsICd2b2lkJywgJ3dpdGgnLCAnY29uc3QnLCAnbGV0JywgJ2VudW0nLCAnZXhwb3J0JywgJ2ltcG9ydCcsICduYXRpdmUnLCAnX19oYXNQcm9wJywgJ19fZXh0ZW5kcycsICdfX3NsaWNlJywgJ19fYmluZCcsICdfX2luZGV4T2YnLCAnaW1wbGVtZW50cycsICdpbnRlcmZhY2UnLCAncGFja2FnZScsICdwcml2YXRlJywgJ3Byb3RlY3RlZCcsICdwdWJsaWMnLCAnc3RhdGljJ107XG5cbiAgU1RSSUNUX1BST1NDUklCRUQgPSBbJ2FyZ3VtZW50cycsICdldmFsJywgJ3lpZWxkKiddO1xuXG4gIEpTX0ZPUkJJRERFTiA9IEpTX0tFWVdPUkRTLmNvbmNhdChSRVNFUlZFRCkuY29uY2F0KFNUUklDVF9QUk9TQ1JJQkVEKTtcblxuICBleHBvcnRzLlJFU0VSVkVEID0gUkVTRVJWRUQuY29uY2F0KEpTX0tFWVdPUkRTKS5jb25jYXQoQ09GRkVFX0tFWVdPUkRTKS5jb25jYXQoU1RSSUNUX1BST1NDUklCRUQpO1xuXG4gIGV4cG9ydHMuU1RSSUNUX1BST1NDUklCRUQgPSBTVFJJQ1RfUFJPU0NSSUJFRDtcblxuICBCT00gPSA2NTI3OTtcblxuICBJREVOVElGSUVSID0gL14oWyRBLVphLXpfXFx4N2YtXFx1ZmZmZl1bJFxcd1xceDdmLVxcdWZmZmZdKikoW15cXG5cXFNdKjooPyE6KSk/LztcblxuICBOVU1CRVIgPSAvXjBiWzAxXSt8XjBvWzAtN10rfF4weFtcXGRhLWZdK3xeXFxkKlxcLj9cXGQrKD86ZVsrLV0/XFxkKyk/L2k7XG5cbiAgSEVSRURPQyA9IC9eKFwiXCJcInwnJycpKCg/OlxcXFxbXFxzXFxTXXxbXlxcXFxdKSo/KSg/OlxcblteXFxuXFxTXSopP1xcMS87XG5cbiAgT1BFUkFUT1IgPSAvXig/OlstPV0+fFstKypcXC8lPD4mfF4hPz1dPXw+Pj49P3woWy0rOl0pXFwxfChbJnw8PipcXC8lXSlcXDI9P3xcXD8oXFwufDo6KXxcXC57MiwzfSkvO1xuXG4gIFdISVRFU1BBQ0UgPSAvXlteXFxuXFxTXSsvO1xuXG4gIENPTU1FTlQgPSAvXiMjIyhbXiNdW1xcc1xcU10qPykoPzojIyNbXlxcblxcU10qfCMjIyQpfF4oPzpcXHMqIyg/ISMjW14jXSkuKikrLztcblxuICBDT0RFID0gL15bLT1dPi87XG5cbiAgTVVMVElfREVOVCA9IC9eKD86XFxuW15cXG5cXFNdKikrLztcblxuICBTSU1QTEVTVFIgPSAvXidbXlxcXFwnXSooPzpcXFxcW1xcc1xcU11bXlxcXFwnXSopKicvO1xuXG4gIEpTVE9LRU4gPSAvXmBbXlxcXFxgXSooPzpcXFxcLlteXFxcXGBdKikqYC87XG5cbiAgUkVHRVggPSAvXihcXC8oPyFbXFxzPV0pW15bXFwvXFxuXFxcXF0qKD86KD86XFxcXFtcXHNcXFNdfFxcW1teXFxdXFxuXFxcXF0qKD86XFxcXFtcXHNcXFNdW15cXF1cXG5cXFxcXSopKl0pW15bXFwvXFxuXFxcXF0qKSpcXC8pKFtpbWd5XXswLDR9KSg/IVxcdykvO1xuXG4gIEhFUkVHRVggPSAvXlxcL3szfSgoPzpcXFxcP1tcXHNcXFNdKSs/KVxcL3szfShbaW1neV17MCw0fSkoPyFcXHcpLztcblxuICBIRVJFR0VYX09NSVQgPSAvKCg/OlxcXFxcXFxcKSspfFxcXFwoXFxzfFxcLyl8XFxzKyg/OiMuKik/L2c7XG5cbiAgTVVMVElMSU5FUiA9IC9cXG4vZztcblxuICBIRVJFRE9DX0lOREVOVCA9IC9cXG4rKFteXFxuXFxTXSopL2c7XG5cbiAgSEVSRURPQ19JTExFR0FMID0gL1xcKlxcLy87XG5cbiAgTElORV9DT05USU5VRVIgPSAvXlxccyooPzosfFxcPz9cXC4oPyFbLlxcZF0pfDo6KS87XG5cbiAgVFJBSUxJTkdfU1BBQ0VTID0gL1xccyskLztcblxuICBDT01QT1VORF9BU1NJR04gPSBbJy09JywgJys9JywgJy89JywgJyo9JywgJyU9JywgJ3x8PScsICcmJj0nLCAnPz0nLCAnPDw9JywgJz4+PScsICc+Pj49JywgJyY9JywgJ149JywgJ3w9JywgJyoqPScsICcvLz0nLCAnJSU9J107XG5cbiAgVU5BUlkgPSBbJ05FVycsICdUWVBFT0YnLCAnREVMRVRFJywgJ0RPJ107XG5cbiAgVU5BUllfTUFUSCA9IFsnIScsICd+J107XG5cbiAgTE9HSUMgPSBbJyYmJywgJ3x8JywgJyYnLCAnfCcsICdeJ107XG5cbiAgU0hJRlQgPSBbJzw8JywgJz4+JywgJz4+PiddO1xuXG4gIENPTVBBUkUgPSBbJz09JywgJyE9JywgJzwnLCAnPicsICc8PScsICc+PSddO1xuXG4gIE1BVEggPSBbJyonLCAnLycsICclJywgJy8vJywgJyUlJ107XG5cbiAgUkVMQVRJT04gPSBbJ0lOJywgJ09GJywgJ0lOU1RBTkNFT0YnXTtcblxuICBCT09MID0gWydUUlVFJywgJ0ZBTFNFJ107XG5cbiAgTk9UX1JFR0VYID0gWydOVU1CRVInLCAnUkVHRVgnLCAnQk9PTCcsICdOVUxMJywgJ1VOREVGSU5FRCcsICcrKycsICctLSddO1xuXG4gIE5PVF9TUEFDRURfUkVHRVggPSBOT1RfUkVHRVguY29uY2F0KCcpJywgJ30nLCAnVEhJUycsICdJREVOVElGSUVSJywgJ1NUUklORycsICddJyk7XG5cbiAgQ0FMTEFCTEUgPSBbJ0lERU5USUZJRVInLCAnU1RSSU5HJywgJ1JFR0VYJywgJyknLCAnXScsICd9JywgJz8nLCAnOjonLCAnQCcsICdUSElTJywgJ1NVUEVSJ107XG5cbiAgSU5ERVhBQkxFID0gQ0FMTEFCTEUuY29uY2F0KCdOVU1CRVInLCAnQk9PTCcsICdOVUxMJywgJ1VOREVGSU5FRCcpO1xuXG4gIExJTkVfQlJFQUsgPSBbJ0lOREVOVCcsICdPVVRERU5UJywgJ1RFUk1JTkFUT1InXTtcblxuICBJTkRFTlRBQkxFX0NMT1NFUlMgPSBbJyknLCAnfScsICddJ107XG5cbiAgQ0FMTEFCTEUucHVzaCgnREVGRVInKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBBY2Nlc3MsIEFyciwgQXNzaWduLCBBd2FpdCwgQmFzZSwgQmxvY2ssIENhbGwsIENsYXNzLCBDbG9zdXJlLCBDb2RlLCBDb2RlRnJhZ21lbnQsIENvbW1lbnQsIENwc0Nhc2NhZGUsIERlZmVyLCBFeGlzdGVuY2UsIEV4cGFuc2lvbiwgRXh0ZW5kcywgRm9yLCBIRVhOVU0sIElERU5USUZJRVIsIElERU5USUZJRVJfU1RSLCBJU19SRUdFWCwgSVNfU1RSSU5HLCBJY2VkUmV0dXJuVmFsdWUsIEljZWRSdW50aW1lLCBJY2VkVGFpbENhbGwsIElmLCBJbiwgSW5kZXgsIElubGluZVJ1bnRpbWUsIExFVkVMX0FDQ0VTUywgTEVWRUxfQ09ORCwgTEVWRUxfTElTVCwgTEVWRUxfT1AsIExFVkVMX1BBUkVOLCBMRVZFTF9UT1AsIExpdGVyYWwsIE1FVEhPRF9ERUYsIE5FR0FURSwgTk8sIE5VTEwsIE5VTUJFUiwgT2JqLCBPcCwgUGFyYW0sIFBhcmVucywgUkVTRVJWRUQsIFJhbmdlLCBSZXR1cm4sIFNJTVBMRU5VTSwgU1RSSUNUX1BST1NDUklCRUQsIFNjb3BlLCBTbGljZSwgU2xvdCwgU3BsYXQsIFN3aXRjaCwgVEFCLCBUSElTLCBUaHJvdywgVHJ5LCBVVElMSVRJRVMsIFZhbHVlLCBXaGlsZSwgWUVTLCBhZGRMb2NhdGlvbkRhdGFGbiwgY29tcGFjdCwgZGVsLCBlbmRzLCBleHRlbmQsIGZsYXR0ZW4sIGZyYWdtZW50c1RvVGV4dCwgaWNlZCwgaXNMaXRlcmFsQXJndW1lbnRzLCBpc0xpdGVyYWxUaGlzLCBsYXN0LCBsb2NhdGlvbkRhdGFUb1N0cmluZywgbWVyZ2UsIG11bHRpZGVudCwgcGFyc2VOdW0sIHBhdGhtb2QsIHF1b3RlX2Z1bmNuYW1lX2Zvcl9kZWJ1ZywgcXVvdGVfcGF0aF9mb3JfZW1pc3Npb24sIHJlcXVpcmVfdG9wX2Rpciwgc29tZSwgc3RhcnRzLCB0aHJvd1N5bnRheEVycm9yLCB1bmZvbGRTb2FrLCB1dGlsaXR5LCBfcmVmLCBfcmVmMSxcbiAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfSxcbiAgICBfX3NsaWNlID0gW10uc2xpY2U7XG5cbiAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gSW5maW5pdHk7XG5cbiAgU2NvcGUgPSByZXF1aXJlKCcuL3Njb3BlJykuU2NvcGU7XG5cbiAgX3JlZiA9IHJlcXVpcmUoJy4vbGV4ZXInKSwgUkVTRVJWRUQgPSBfcmVmLlJFU0VSVkVELCBTVFJJQ1RfUFJPU0NSSUJFRCA9IF9yZWYuU1RSSUNUX1BST1NDUklCRUQ7XG5cbiAgaWNlZCA9IHJlcXVpcmUoJ2ljZWQtcnVudGltZScpO1xuXG4gIHBhdGhtb2QgPSByZXF1aXJlKCdwYXRoJyk7XG5cbiAgX3JlZjEgPSByZXF1aXJlKCcuL2hlbHBlcnMnKSwgY29tcGFjdCA9IF9yZWYxLmNvbXBhY3QsIGZsYXR0ZW4gPSBfcmVmMS5mbGF0dGVuLCBleHRlbmQgPSBfcmVmMS5leHRlbmQsIG1lcmdlID0gX3JlZjEubWVyZ2UsIGRlbCA9IF9yZWYxLmRlbCwgc3RhcnRzID0gX3JlZjEuc3RhcnRzLCBlbmRzID0gX3JlZjEuZW5kcywgbGFzdCA9IF9yZWYxLmxhc3QsIHNvbWUgPSBfcmVmMS5zb21lLCBhZGRMb2NhdGlvbkRhdGFGbiA9IF9yZWYxLmFkZExvY2F0aW9uRGF0YUZuLCBsb2NhdGlvbkRhdGFUb1N0cmluZyA9IF9yZWYxLmxvY2F0aW9uRGF0YVRvU3RyaW5nLCB0aHJvd1N5bnRheEVycm9yID0gX3JlZjEudGhyb3dTeW50YXhFcnJvcjtcblxuICBleHBvcnRzLmV4dGVuZCA9IGV4dGVuZDtcblxuICBleHBvcnRzLmFkZExvY2F0aW9uRGF0YUZuID0gYWRkTG9jYXRpb25EYXRhRm47XG5cbiAgWUVTID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgTk8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgVEhJUyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIE5FR0FURSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubmVnYXRlZCA9ICF0aGlzLm5lZ2F0ZWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTlVMTCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVmFsdWUobmV3IExpdGVyYWwoJ251bGwnKSk7XG4gIH07XG5cbiAgZXhwb3J0cy5Db2RlRnJhZ21lbnQgPSBDb2RlRnJhZ21lbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQ29kZUZyYWdtZW50KHBhcmVudCwgY29kZSkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgdGhpcy5jb2RlID0gXCJcIiArIGNvZGU7XG4gICAgICB0aGlzLmxvY2F0aW9uRGF0YSA9IHBhcmVudCAhPSBudWxsID8gcGFyZW50LmxvY2F0aW9uRGF0YSA6IHZvaWQgMDtcbiAgICAgIHRoaXMudHlwZSA9IChwYXJlbnQgIT0gbnVsbCA/IChfcmVmMiA9IHBhcmVudC5jb25zdHJ1Y3RvcikgIT0gbnVsbCA/IF9yZWYyLm5hbWUgOiB2b2lkIDAgOiB2b2lkIDApIHx8ICd1bmtub3duJztcbiAgICB9XG5cbiAgICBDb2RlRnJhZ21lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJcIiArIHRoaXMuY29kZSArICh0aGlzLmxvY2F0aW9uRGF0YSA/IFwiOiBcIiArIGxvY2F0aW9uRGF0YVRvU3RyaW5nKHRoaXMubG9jYXRpb25EYXRhKSA6ICcnKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvZGVGcmFnbWVudDtcblxuICB9KSgpO1xuXG4gIGZyYWdtZW50c1RvVGV4dCA9IGZ1bmN0aW9uKGZyYWdtZW50cykge1xuICAgIHZhciBmcmFnbWVudDtcbiAgICByZXR1cm4gKChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfaSwgX2xlbiwgX3Jlc3VsdHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBmcmFnbWVudHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudHNbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKGZyYWdtZW50LmNvZGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0pKCkpLmpvaW4oJycpO1xuICB9O1xuXG4gIGV4cG9ydHMuQmFzZSA9IEJhc2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQmFzZSgpIHtcbiAgICAgIHRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrID0gbnVsbDtcbiAgICAgIHRoaXMuaWNlZExvb3BGbGFnID0gZmFsc2U7XG4gICAgICB0aGlzLmljZWROb2RlRmxhZyA9IGZhbHNlO1xuICAgICAgdGhpcy5pY2VkR290Q3BzU3BsaXRGbGFnID0gZmFsc2U7XG4gICAgICB0aGlzLmljZWRDcHNQaXZvdEZsYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaWNlZEZvdW5kQXJndW1lbnRzID0gZmFsc2U7XG4gICAgICB0aGlzLmljZWRQYXJlbnRBd2FpdCA9IG51bGw7XG4gICAgICB0aGlzLmljZWRDYWxsQ29udGludWF0aW9uRmxhZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIEJhc2UucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbihvLCBsdmwpIHtcbiAgICAgIHJldHVybiBmcmFnbWVudHNUb1RleHQodGhpcy5jb21waWxlVG9GcmFnbWVudHMobywgbHZsKSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8sIGx2bCkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICBvID0gZXh0ZW5kKHt9LCBvKTtcbiAgICAgIGlmIChsdmwpIHtcbiAgICAgICAgby5sZXZlbCA9IGx2bDtcbiAgICAgIH1cbiAgICAgIG5vZGUgPSB0aGlzLnVuZm9sZFNvYWsobykgfHwgdGhpcztcbiAgICAgIG5vZGUudGFiID0gby5pbmRlbnQ7XG4gICAgICBpZiAobm9kZS5pY2VkSGFzQ29udGludWF0aW9uKCkgJiYgIW5vZGUuaWNlZEdvdENwc1NwbGl0RmxhZykge1xuICAgICAgICByZXR1cm4gbm9kZS5pY2VkQ29tcGlsZUNwcyhvKTtcbiAgICAgIH0gZWxzZSBpZiAoby5sZXZlbCA9PT0gTEVWRUxfVE9QIHx8ICFub2RlLmlzU3RhdGVtZW50KG8pKSB7XG4gICAgICAgIHJldHVybiBub2RlLmNvbXBpbGVOb2RlKG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuY29tcGlsZUNsb3N1cmUobyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmNvbXBpbGVDbG9zdXJlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFyZ3MsIGFyZ3VtZW50c05vZGUsIGZ1bmMsIGp1bXBOb2RlLCBtZXRoO1xuICAgICAgaWYgKGp1bXBOb2RlID0gdGhpcy5qdW1wcygpKSB7XG4gICAgICAgIGp1bXBOb2RlLmVycm9yKCdjYW5ub3QgdXNlIGEgcHVyZSBzdGF0ZW1lbnQgaW4gYW4gZXhwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgby5zaGFyZWRTY29wZSA9IHRydWU7XG4gICAgICB0aGlzLmljZWRDbGVhckF1dG9jYkZsYWdzKCk7XG4gICAgICBmdW5jID0gbmV3IENvZGUoW10sIEJsb2NrLndyYXAoW3RoaXNdKSk7XG4gICAgICBhcmdzID0gW107XG4gICAgICBpZiAoKGFyZ3VtZW50c05vZGUgPSB0aGlzLmNvbnRhaW5zKGlzTGl0ZXJhbEFyZ3VtZW50cykpIHx8IHRoaXMuY29udGFpbnMoaXNMaXRlcmFsVGhpcykpIHtcbiAgICAgICAgYXJncyA9IFtuZXcgTGl0ZXJhbCgndGhpcycpXTtcbiAgICAgICAgaWYgKGFyZ3VtZW50c05vZGUpIHtcbiAgICAgICAgICBtZXRoID0gJ2FwcGx5JztcbiAgICAgICAgICBhcmdzLnB1c2gobmV3IExpdGVyYWwoJ2FyZ3VtZW50cycpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXRoID0gJ2NhbGwnO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmMgPSBuZXcgVmFsdWUoZnVuYywgW25ldyBBY2Nlc3MobmV3IExpdGVyYWwobWV0aCkpXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKG5ldyBDYWxsKGZ1bmMsIGFyZ3MpKS5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuY2FjaGUgPSBmdW5jdGlvbihvLCBsZXZlbCwgcmV1c2VkKSB7XG4gICAgICB2YXIgcmVmLCBzdWI7XG4gICAgICBpZiAoIXRoaXMuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgcmVmID0gbGV2ZWwgPyB0aGlzLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBsZXZlbCkgOiB0aGlzO1xuICAgICAgICByZXR1cm4gW3JlZiwgcmVmXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZiA9IG5ldyBMaXRlcmFsKHJldXNlZCB8fCBvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJykpO1xuICAgICAgICBzdWIgPSBuZXcgQXNzaWduKHJlZiwgdGhpcyk7XG4gICAgICAgIGlmIChsZXZlbCkge1xuICAgICAgICAgIHJldHVybiBbc3ViLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBsZXZlbCksIFt0aGlzLm1ha2VDb2RlKHJlZi52YWx1ZSldXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW3N1YiwgcmVmXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jYWNoZVRvQ29kZUZyYWdtZW50cyA9IGZ1bmN0aW9uKGNhY2hlVmFsdWVzKSB7XG4gICAgICByZXR1cm4gW2ZyYWdtZW50c1RvVGV4dChjYWNoZVZhbHVlc1swXSksIGZyYWdtZW50c1RvVGV4dChjYWNoZVZhbHVlc1sxXSldO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgbWU7XG4gICAgICBtZSA9IHRoaXMudW53cmFwQWxsKCk7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbChuZXcgTGl0ZXJhbChcIlwiICsgcmVzICsgXCIucHVzaFwiKSwgW21lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFJldHVybihtZSwgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24ocHJlZCkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICBub2RlID0gdm9pZCAwO1xuICAgICAgdGhpcy50cmF2ZXJzZUNoaWxkcmVuKGZhbHNlLCBmdW5jdGlvbihuKSB7XG4gICAgICAgIGlmIChwcmVkKG4pKSB7XG4gICAgICAgICAgbm9kZSA9IG47XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5sYXN0Tm9uQ29tbWVudCA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgIHZhciBpO1xuICAgICAgaSA9IGxpc3QubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAoIShsaXN0W2ldIGluc3RhbmNlb2YgQ29tbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gbGlzdFtpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oaWR0LCBuYW1lKSB7XG4gICAgICB2YXIgZXh0cmFzLCB0cmVlO1xuICAgICAgaWYgKGlkdCA9PSBudWxsKSB7XG4gICAgICAgIGlkdCA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgfVxuICAgICAgZXh0cmFzID0gW107XG4gICAgICBpZiAodGhpcy5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJBXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZExvb3BGbGFnKSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiTFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRDcHNQaXZvdEZsYWcpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJQXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZElzQXV0b2NiQ29kZSkge1xuICAgICAgICBleHRyYXMucHVzaChcIkJcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkSGFzQXV0b2NiRmxhZykge1xuICAgICAgICBleHRyYXMucHVzaChcIkNcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkUGFyZW50QXdhaXQpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJEXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZEZvdW5kQXJndW1lbnRzKSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiR1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChleHRyYXMubGVuZ3RoKSB7XG4gICAgICAgIGV4dHJhcyA9IFwiIChcIiArIGV4dHJhcy5qb2luKCcnKSArIFwiKVwiO1xuICAgICAgfVxuICAgICAgdHJlZSA9ICdcXG4nICsgaWR0ICsgbmFtZTtcbiAgICAgIHRyZWUgPSAnXFxuJyArIGlkdCArIG5hbWU7XG4gICAgICBpZiAodGhpcy5zb2FrKSB7XG4gICAgICAgIHRyZWUgKz0gJz8nO1xuICAgICAgfVxuICAgICAgdHJlZSArPSBleHRyYXM7XG4gICAgICB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiB0cmVlICs9IG5vZGUudG9TdHJpbmcoaWR0ICsgVEFCKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrKSB7XG4gICAgICAgIGlkdCArPSBUQUI7XG4gICAgICAgIHRyZWUgKz0gJ1xcbicgKyBpZHQgKyBcIkNvbnRpbnVhdGlvblwiO1xuICAgICAgICB0cmVlICs9IHRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrLnRvU3RyaW5nKGlkdCArIFRBQik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJlZTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuZWFjaENoaWxkID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgdmFyIGF0dHIsIGNoaWxkLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMiwgX3JlZjM7XG4gICAgICBpZiAoIXRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBfcmVmMiA9IHRoaXMuY2hpbGRyZW47XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGF0dHIgPSBfcmVmMltfaV07XG4gICAgICAgIGlmICh0aGlzW2F0dHJdKSB7XG4gICAgICAgICAgX3JlZjMgPSBmbGF0dGVuKFt0aGlzW2F0dHJdXSk7XG4gICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IF9yZWYzW19qXTtcbiAgICAgICAgICAgIGlmIChmdW5jKGNoaWxkKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUudHJhdmVyc2VDaGlsZHJlbiA9IGZ1bmN0aW9uKGNyb3NzU2NvcGUsIGZ1bmMpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICB2YXIgcmVjdXI7XG4gICAgICAgIHJlY3VyID0gZnVuYyhjaGlsZCk7XG4gICAgICAgIGlmIChyZWN1ciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQudHJhdmVyc2VDaGlsZHJlbihjcm9zc1Njb3BlLCBmdW5jKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBPcCgnIScsIHRoaXMpO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS51bndyYXBBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgbm9kZSA9IHRoaXM7XG4gICAgICB3aGlsZSAobm9kZSAhPT0gKG5vZGUgPSBub2RlLnVud3JhcCgpKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5mbGF0dGVuQ2hpbGRyZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhdHRyLCBjaGlsZCwgb3V0LCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMiwgX3JlZjM7XG4gICAgICBvdXQgPSBbXTtcbiAgICAgIF9yZWYyID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYXR0ciA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKHRoaXNbYXR0cl0pIHtcbiAgICAgICAgICBfcmVmMyA9IGZsYXR0ZW4oW3RoaXNbYXR0cl1dKTtcbiAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgIGNoaWxkID0gX3JlZjNbX2pdO1xuICAgICAgICAgICAgb3V0LnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZENvbXBpbGVDcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY29kZTtcbiAgICAgIHRoaXMuaWNlZEdvdENwc1NwbGl0RmxhZyA9IHRydWU7XG4gICAgICBjb2RlID0gQ3BzQ2FzY2FkZS53cmFwKHRoaXMsIHRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrLCBudWxsLCBvKTtcbiAgICAgIG8uc2hhcmVkU2NvcGUgPSB0cnVlO1xuICAgICAgcmV0dXJuIGNvZGUuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRXYWxrQXN0ID0gZnVuY3Rpb24ocCwgbykge1xuICAgICAgdmFyIGNoaWxkLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICB0aGlzLmljZWRQYXJlbnRBd2FpdCA9IHA7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gby5mb3VuZEF1dG9jYjtcbiAgICAgIF9yZWYyID0gdGhpcy5mbGF0dGVuQ2hpbGRyZW4oKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgY2hpbGQgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChjaGlsZC5pY2VkV2Fsa0FzdChwLCBvKSkge1xuICAgICAgICAgIHRoaXMuaWNlZE5vZGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaWNlZE5vZGVGbGFnO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkV2Fsa0FzdExvb3BzID0gZnVuY3Rpb24oZmxvb2QpIHtcbiAgICAgIHZhciBjaGlsZCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgaWYgKHRoaXMuaXNMb29wKCkgJiYgdGhpcy5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgZmxvb2QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNMb29wKCkgJiYgIXRoaXMuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgIGZsb29kID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLmljZWRMb29wRmxhZyA9IGZsb29kO1xuICAgICAgX3JlZjIgPSB0aGlzLmZsYXR0ZW5DaGlsZHJlbigpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBjaGlsZCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKGNoaWxkLmljZWRXYWxrQXN0TG9vcHMoZmxvb2QpKSB7XG4gICAgICAgICAgdGhpcy5pY2VkTG9vcEZsYWcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5pY2VkTG9vcEZsYWc7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRXYWxrQ3BzUGl2b3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hpbGQsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIGlmICh0aGlzLmljZWROb2RlRmxhZyB8fCAodGhpcy5pY2VkTG9vcEZsYWcgJiYgdGhpcy5pY2VkSXNKdW1wKCkpKSB7XG4gICAgICAgIHRoaXMuaWNlZENwc1Bpdm90RmxhZyA9IHRydWU7XG4gICAgICB9XG4gICAgICBfcmVmMiA9IHRoaXMuZmxhdHRlbkNoaWxkcmVuKCk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGNoaWxkID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAoY2hpbGQuaWNlZFdhbGtDcHNQaXZvdHMoKSkge1xuICAgICAgICAgIHRoaXMuaWNlZENwc1Bpdm90RmxhZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmljZWRDcHNQaXZvdEZsYWc7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRDbGVhckF1dG9jYkZsYWdzID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcy50cmF2ZXJzZUNoaWxkcmVuKGZhbHNlLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIG5vZGUuaWNlZEhhc0F1dG9jYkZsYWcgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZENwc1JvdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoaWxkLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMuZmxhdHRlbkNoaWxkcmVuKCk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGNoaWxkID0gX3JlZjJbX2ldO1xuICAgICAgICBjaGlsZC5pY2VkQ3BzUm90YXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZElzQ3BzUGl2b3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmljZWRDcHNQaXZvdEZsYWc7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWROZXN0Q29udGludWF0aW9uQmxvY2sgPSBmdW5jdGlvbihiKSB7XG4gICAgICByZXR1cm4gdGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2sgPSBiO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkSGFzQ29udGludWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmljZWRDb250aW51YXRpb25CbG9jaztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZENhbGxDb250aW51YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmljZWRDYWxsQ29udGludWF0aW9uRmxhZyA9IHRydWU7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRXcmFwQ29udGludWF0aW9uID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkSXNKdW1wID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkVW53cmFwID0gZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuaWNlZEhhc0NvbnRpbnVhdGlvbigpICYmIHRoaXMuaWNlZEhhc0NvbnRpbnVhdGlvbigpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuaWNlZEhhc0NvbnRpbnVhdGlvbigpKSB7XG4gICAgICAgICAgZS5pY2VkQ29udGludWF0aW9uQmxvY2sgPSB0aGlzLmljZWRDb250aW51YXRpb25CbG9jaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZFN0YXRlbWVudEFzc2VydGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuaWNlZElzQ3BzUGl2b3QoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihcImF3YWl0J2VkIHN0YXRlbWVudHMgY2FuJ3QgYWN0IGFzIGV4cHJlc3Npb25zXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFtdO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmp1bXBzID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pc0NvbXBsZXggPSBZRVM7XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pc0NoYWluYWJsZSA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pc0xvb3AgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLnVud3JhcCA9IFRISVM7XG5cbiAgICBCYXNlLnByb3RvdHlwZS51bmZvbGRTb2FrID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5hc3NpZ25zID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcgPSBmdW5jdGlvbihsb2NhdGlvbkRhdGEpIHtcbiAgICAgIGlmICh0aGlzLmxvY2F0aW9uRGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHRoaXMubG9jYXRpb25EYXRhID0gbG9jYXRpb25EYXRhO1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaENoaWxkKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiBjaGlsZC51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcobG9jYXRpb25EYXRhKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiB0aHJvd1N5bnRheEVycm9yKG1lc3NhZ2UsIHRoaXMubG9jYXRpb25EYXRhKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUubWFrZUNvZGUgPSBmdW5jdGlvbihjb2RlKSB7XG4gICAgICByZXR1cm4gbmV3IENvZGVGcmFnbWVudCh0aGlzLCBjb2RlKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUud3JhcEluQnJhY2VzID0gZnVuY3Rpb24oZnJhZ21lbnRzKSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoJygnKSwgZnJhZ21lbnRzLCB0aGlzLm1ha2VDb2RlKCcpJykpO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5qb2luRnJhZ21lbnRBcnJheXMgPSBmdW5jdGlvbihmcmFnbWVudHNMaXN0LCBqb2luU3RyKSB7XG4gICAgICB2YXIgYW5zd2VyLCBmcmFnbWVudHMsIGksIF9pLCBfbGVuO1xuICAgICAgYW5zd2VyID0gW107XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBmcmFnbWVudHNMaXN0Lmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBmcmFnbWVudHMgPSBmcmFnbWVudHNMaXN0W2ldO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoam9pblN0cikpO1xuICAgICAgICB9XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQoZnJhZ21lbnRzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfTtcblxuICAgIHJldHVybiBCYXNlO1xuXG4gIH0pKCk7XG5cbiAgZXhwb3J0cy5CbG9jayA9IEJsb2NrID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCbG9jaywgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEJsb2NrKG5vZGVzKSB7XG4gICAgICBCbG9jay5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBjb21wYWN0KGZsYXR0ZW4obm9kZXMgfHwgW10pKTtcbiAgICB9XG5cbiAgICBCbG9jay5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2V4cHJlc3Npb25zJ107XG5cbiAgICBCbG9jay5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbnMucHVzaChub2RlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9ucy5wb3AoKTtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb25zLnVuc2hpZnQobm9kZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLnVud3JhcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljZWRVbndyYXAodGhpcy5leHByZXNzaW9uc1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5leHByZXNzaW9ucy5sZW5ndGg7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBleHAsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgZXhwID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAoZXhwLmlzU3RhdGVtZW50KG8pKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGV4cCwganVtcE5vZGUsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgZXhwID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAoanVtcE5vZGUgPSBleHAuanVtcHMobykpIHtcbiAgICAgICAgICByZXR1cm4ganVtcE5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBleHByLCBmb3VuZFJldHVybiwgbGVuO1xuICAgICAgbGVuID0gdGhpcy5leHByZXNzaW9ucy5sZW5ndGg7XG4gICAgICBmb3VuZFJldHVybiA9IGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbi0tKSB7XG4gICAgICAgIGV4cHIgPSB0aGlzLmV4cHJlc3Npb25zW2xlbl07XG4gICAgICAgIGlmICghKGV4cHIgaW5zdGFuY2VvZiBDb21tZW50KSkge1xuICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnNbbGVuXSA9IGV4cHIubWFrZVJldHVybihyZXMpO1xuICAgICAgICAgIGlmIChleHByIGluc3RhbmNlb2YgUmV0dXJuICYmICFleHByLmV4cHJlc3Npb24gJiYgIWV4cHIuaWNlZEhhc0F1dG9jYkZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnMuc3BsaWNlKGxlbiwgMSk7XG4gICAgICAgICAgICBmb3VuZFJldHVybiA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICghKGV4cHIgaW5zdGFuY2VvZiBJZikgfHwgZXhwci5lbHNlQm9keSkge1xuICAgICAgICAgICAgZm91bmRSZXR1cm4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgJiYgIXRoaXMuaWNlZE5vZGVGbGFnICYmICFmb3VuZFJldHVybikge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zLnB1c2gobmV3IFJldHVybihudWxsLCB0cnVlKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8sIGxldmVsKSB7XG4gICAgICBpZiAobyA9PSBudWxsKSB7XG4gICAgICAgIG8gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvLnNjb3BlKSB7XG4gICAgICAgIHJldHVybiBCbG9jay5fX3N1cGVyX18uY29tcGlsZVRvRnJhZ21lbnRzLmNhbGwodGhpcywgbywgbGV2ZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVJvb3Qobyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGNvbXBpbGVkTm9kZXMsIGZyYWdtZW50cywgaW5kZXgsIG5vZGUsIHRvcCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgdGhpcy50YWIgPSBvLmluZGVudDtcbiAgICAgIHRvcCA9IG8ubGV2ZWwgPT09IExFVkVMX1RPUDtcbiAgICAgIGNvbXBpbGVkTm9kZXMgPSBbXTtcbiAgICAgIF9yZWYyID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgIGZvciAoaW5kZXggPSBfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgaW5kZXggPSArK19pKSB7XG4gICAgICAgIG5vZGUgPSBfcmVmMltpbmRleF07XG4gICAgICAgIG5vZGUgPSBub2RlLnVud3JhcEFsbCgpO1xuICAgICAgICBub2RlID0gbm9kZS51bmZvbGRTb2FrKG8pIHx8IG5vZGU7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgQmxvY2spIHtcbiAgICAgICAgICBjb21waWxlZE5vZGVzLnB1c2gobm9kZS5jb21waWxlTm9kZShvKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodG9wKSB7XG4gICAgICAgICAgbm9kZS5mcm9udCA9IHRydWU7XG4gICAgICAgICAgZnJhZ21lbnRzID0gbm9kZS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICAgICAgaWYgKCFub2RlLmlzU3RhdGVtZW50KG8pKSB7XG4gICAgICAgICAgICBmcmFnbWVudHMudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiXCIgKyB0aGlzLnRhYikpO1xuICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIjtcIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb21waWxlZE5vZGVzLnB1c2goZnJhZ21lbnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb21waWxlZE5vZGVzLnB1c2gobm9kZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG9wKSB7XG4gICAgICAgIGlmICh0aGlzLnNwYWNlZCkge1xuICAgICAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5qb2luRnJhZ21lbnRBcnJheXMoY29tcGlsZWROb2RlcywgJ1xcblxcbicpLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5qb2luRnJhZ21lbnRBcnJheXMoY29tcGlsZWROb2RlcywgJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY29tcGlsZWROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgYW5zd2VyID0gdGhpcy5qb2luRnJhZ21lbnRBcnJheXMoY29tcGlsZWROb2RlcywgJywgJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbnN3ZXIgPSBbdGhpcy5tYWtlQ29kZShcInZvaWQgMFwiKV07XG4gICAgICB9XG4gICAgICBpZiAoY29tcGlsZWROb2Rlcy5sZW5ndGggPiAxICYmIG8ubGV2ZWwgPj0gTEVWRUxfTElTVCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoYW5zd2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5jb21waWxlUm9vdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBleHAsIGZyYWdtZW50cywgaSwgbmFtZSwgcHJlbHVkZSwgcHJlbHVkZUV4cHMsIHJlc3QsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIG8uaW5kZW50ID0gby5iYXJlID8gJycgOiBUQUI7XG4gICAgICBvLmxldmVsID0gTEVWRUxfVE9QO1xuICAgICAgdGhpcy5zcGFjZWQgPSB0cnVlO1xuICAgICAgby5zY29wZSA9IG5ldyBTY29wZShudWxsLCB0aGlzLCBudWxsKTtcbiAgICAgIF9yZWYyID0gby5sb2NhbHMgfHwgW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG5hbWUgPSBfcmVmMltfaV07XG4gICAgICAgIG8uc2NvcGUucGFyYW1ldGVyKG5hbWUpO1xuICAgICAgfVxuICAgICAgcHJlbHVkZSA9IFtdO1xuICAgICAgaWYgKCFvLmJhcmUpIHtcbiAgICAgICAgcHJlbHVkZUV4cHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9qLCBfbGVuMSwgX3JlZjMsIF9yZXN1bHRzO1xuICAgICAgICAgIF9yZWYzID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoaSA9IF9qID0gMCwgX2xlbjEgPSBfcmVmMy5sZW5ndGg7IF9qIDwgX2xlbjE7IGkgPSArK19qKSB7XG4gICAgICAgICAgICBleHAgPSBfcmVmM1tpXTtcbiAgICAgICAgICAgIGlmICghKGV4cC51bndyYXAoKSBpbnN0YW5jZW9mIENvbW1lbnQpKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChleHApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIHJlc3QgPSB0aGlzLmV4cHJlc3Npb25zLnNsaWNlKHByZWx1ZGVFeHBzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBwcmVsdWRlRXhwcztcbiAgICAgICAgaWYgKHByZWx1ZGVFeHBzLmxlbmd0aCkge1xuICAgICAgICAgIHByZWx1ZGUgPSB0aGlzLmNvbXBpbGVOb2RlKG1lcmdlKG8sIHtcbiAgICAgICAgICAgIGluZGVudDogJydcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgcHJlbHVkZS5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSByZXN0O1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzID0gdGhpcy5jb21waWxlV2l0aERlY2xhcmF0aW9ucyhvKTtcbiAgICAgIGlmIChvLmJhcmUpIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXS5jb25jYXQocHJlbHVkZSwgdGhpcy5tYWtlQ29kZShcIihmdW5jdGlvbigpIHtcXG5cIiksIGZyYWdtZW50cywgdGhpcy5tYWtlQ29kZShcIlxcbn0pLmNhbGwodGhpcyk7XFxuXCIpKTtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmNvbXBpbGVXaXRoRGVjbGFyYXRpb25zID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFzc2lnbnMsIGRlY2xhcnMsIGV4cCwgZnJhZ21lbnRzLCBpLCBwb3N0LCByZXN0LCBzY29wZSwgc3BhY2VkLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIGZyYWdtZW50cyA9IFtdO1xuICAgICAgcG9zdCA9IFtdO1xuICAgICAgX3JlZjIgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIGV4cCA9IF9yZWYyW2ldO1xuICAgICAgICBleHAgPSBleHAudW53cmFwKCk7XG4gICAgICAgIGlmICghKGV4cCBpbnN0YW5jZW9mIENvbW1lbnQgfHwgZXhwIGluc3RhbmNlb2YgTGl0ZXJhbCkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbyA9IG1lcmdlKG8sIHtcbiAgICAgICAgbGV2ZWw6IExFVkVMX1RPUFxuICAgICAgfSk7XG4gICAgICBpZiAoaSkge1xuICAgICAgICByZXN0ID0gdGhpcy5leHByZXNzaW9ucy5zcGxpY2UoaSwgOWU5KTtcbiAgICAgICAgX3JlZjMgPSBbdGhpcy5zcGFjZWQsIGZhbHNlXSwgc3BhY2VkID0gX3JlZjNbMF0sIHRoaXMuc3BhY2VkID0gX3JlZjNbMV07XG4gICAgICAgIF9yZWY0ID0gW3RoaXMuY29tcGlsZU5vZGUobyksIHNwYWNlZF0sIGZyYWdtZW50cyA9IF9yZWY0WzBdLCB0aGlzLnNwYWNlZCA9IF9yZWY0WzFdO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zID0gcmVzdDtcbiAgICAgIH1cbiAgICAgIHBvc3QgPSB0aGlzLmNvbXBpbGVOb2RlKG8pO1xuICAgICAgc2NvcGUgPSBvLnNjb3BlO1xuICAgICAgaWYgKHNjb3BlLmV4cHJlc3Npb25zID09PSB0aGlzKSB7XG4gICAgICAgIGRlY2xhcnMgPSBvLnNjb3BlLmhhc0RlY2xhcmF0aW9ucygpO1xuICAgICAgICBhc3NpZ25zID0gc2NvcGUuaGFzQXNzaWdubWVudHM7XG4gICAgICAgIGlmIChkZWNsYXJzIHx8IGFzc2lnbnMpIHtcbiAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZSgnXFxuJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiXCIgKyB0aGlzLnRhYiArIFwidmFyIFwiKSk7XG4gICAgICAgICAgaWYgKGRlY2xhcnMpIHtcbiAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoc2NvcGUuZGVjbGFyZWRWYXJpYWJsZXMoKS5qb2luKCcsICcpKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhc3NpZ25zKSB7XG4gICAgICAgICAgICBpZiAoZGVjbGFycykge1xuICAgICAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiLFxcblwiICsgKHRoaXMudGFiICsgVEFCKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShzY29wZS5hc3NpZ25lZFZhcmlhYmxlcygpLmpvaW4oXCIsXFxuXCIgKyAodGhpcy50YWIgKyBUQUIpKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiO1xcblwiICsgKHRoaXMuc3BhY2VkID8gJ1xcbicgOiAnJykpKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcmFnbWVudHMubGVuZ3RoICYmIHBvc3QubGVuZ3RoKSB7XG4gICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmcmFnbWVudHMuY29uY2F0KHBvc3QpO1xuICAgIH07XG5cbiAgICBCbG9jay53cmFwID0gZnVuY3Rpb24obm9kZXMpIHtcbiAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0gaW5zdGFuY2VvZiBCbG9jaykge1xuICAgICAgICByZXR1cm4gbm9kZXNbMF07XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEJsb2NrKG5vZGVzKTtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmljZWRUaHJlYWRSZXR1cm4gPSBmdW5jdGlvbihjYWxsKSB7XG4gICAgICB2YXIgZXhwciwgbGVuO1xuICAgICAgY2FsbCA9IGNhbGwgfHwgbmV3IEljZWRUYWlsQ2FsbDtcbiAgICAgIGxlbiA9IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGxlbi0tKSB7XG4gICAgICAgIGV4cHIgPSB0aGlzLmV4cHJlc3Npb25zW2xlbl07XG4gICAgICAgIGlmIChleHByLmlzU3RhdGVtZW50KCkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShleHByIGluc3RhbmNlb2YgQ29tbWVudCkgJiYgIShleHByIGluc3RhbmNlb2YgUmV0dXJuKSkge1xuICAgICAgICAgIGNhbGwuYXNzaWduVmFsdWUoZXhwcik7XG4gICAgICAgICAgdGhpcy5leHByZXNzaW9uc1tsZW5dID0gY2FsbDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25zLnB1c2goY2FsbCk7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pY2VkQ29tcGlsZUNwcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHRoaXMuaWNlZEdvdENwc1NwbGl0RmxhZyA9IHRydWU7XG4gICAgICBpZiAodGhpcy5leHByZXNzaW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybiBCbG9jay5fX3N1cGVyX18uaWNlZENvbXBpbGVDcHMuY2FsbCh0aGlzLCBvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVOb2RlKG8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaWNlZENwc1JvdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoaWxkLCBlLCBpLCBwaXZvdCwgcmVzdCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjI7XG4gICAgICBwaXZvdCA9IG51bGw7XG4gICAgICBfcmVmMiA9IHRoaXMuZXhwcmVzc2lvbnM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgZSA9IF9yZWYyW2ldO1xuICAgICAgICBpZiAoZS5pY2VkSXNDcHNQaXZvdCgpKSB7XG4gICAgICAgICAgcGl2b3QgPSBlO1xuICAgICAgICAgIHBpdm90LmljZWRDYWxsQ29udGludWF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZS5pY2VkQ3BzUm90YXRlKCk7XG4gICAgICAgIGlmIChwaXZvdCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXBpdm90KSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKHBpdm90LmljZWRDb250aW51YXRpb25CbG9jaykge1xuICAgICAgICB0aHJvdyBTeW50YXhFcnJvcihcInVuZXhwZWN0ZWQgY29udGludWF0aW9uIGJsb2NrIGluIG5vZGVcIik7XG4gICAgICB9XG4gICAgICByZXN0ID0gdGhpcy5leHByZXNzaW9ucy5zbGljZShpICsgMSk7XG4gICAgICB0aGlzLmV4cHJlc3Npb25zID0gdGhpcy5leHByZXNzaW9ucy5zbGljZSgwLCBpICsgMSk7XG4gICAgICBpZiAocmVzdC5sZW5ndGgpIHtcbiAgICAgICAgY2hpbGQgPSBuZXcgQmxvY2socmVzdCk7XG4gICAgICAgIHBpdm90LmljZWROZXN0Q29udGludWF0aW9uQmxvY2soY2hpbGQpO1xuICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSByZXN0Lmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgIGUgPSByZXN0W19qXTtcbiAgICAgICAgICBpZiAoZS5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgICAgIGNoaWxkLmljZWROb2RlRmxhZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlLmljZWRMb29wRmxhZykge1xuICAgICAgICAgICAgY2hpbGQuaWNlZExvb3BGbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGUuaWNlZENwc1Bpdm90RmxhZykge1xuICAgICAgICAgICAgY2hpbGQuaWNlZENwc1Bpdm90RmxhZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlLmljZWRIYXNBdXRvY2JGbGFnKSB7XG4gICAgICAgICAgICBjaGlsZC5pY2VkSGFzQXV0b2NiRmxhZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkLmljZWRDcHNSb3RhdGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaWNlZEFkZFJ1bnRpbWUgPSBmdW5jdGlvbihmb3VuZERlZmVyLCBmb3VuZEF3YWl0KSB7XG4gICAgICB2YXIgaW5kZXgsIG5vZGU7XG4gICAgICBpbmRleCA9IDA7XG4gICAgICB3aGlsZSAoKG5vZGUgPSB0aGlzLmV4cHJlc3Npb25zW2luZGV4XSkgJiYgbm9kZSBpbnN0YW5jZW9mIENvbW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIFZhbHVlICYmIG5vZGUuaXNTdHJpbmcoKSkge1xuICAgICAgICBpbmRleCsrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbnMuc3BsaWNlKGluZGV4LCAwLCBuZXcgSWNlZFJ1bnRpbWUoZm91bmREZWZlciwgZm91bmRBd2FpdCkpO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaWNlZFRyYW5zZm9ybSA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgIHZhciBvYmo7XG4gICAgICBvYmogPSB7fTtcbiAgICAgIHRoaXMuaWNlZFdhbGtBc3QobnVsbCwgb2JqKTtcbiAgICAgIGlmICghKG9wdHMgIT0gbnVsbCA/IG9wdHMucmVwbCA6IHZvaWQgMCkgJiYgKG9iai5mb3VuZERlZmVyIHx8IG9iai5mb3VuZEF3YWl0IHx8IG9wdHMucnVuZm9yY2UpKSB7XG4gICAgICAgIHRoaXMuaWNlZEFkZFJ1bnRpbWUob2JqLmZvdW5kRGVmZXIsIG9iai5mb3VuZEF3YWl0KTtcbiAgICAgIH1cbiAgICAgIGlmIChvYmouZm91bmRBd2FpdCkge1xuICAgICAgICB0aGlzLmljZWRXYWxrQXN0TG9vcHMoZmFsc2UpO1xuICAgICAgICB0aGlzLmljZWRXYWxrQ3BzUGl2b3RzKCk7XG4gICAgICAgIHRoaXMuaWNlZENwc1JvdGF0ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pY2VkR2V0U2luZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5leHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbnNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEJsb2NrO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuTGl0ZXJhbCA9IExpdGVyYWwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpdGVyYWwsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBMaXRlcmFsKHZhbHVlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIndob29wcyFcIik7XG4gICAgICB9XG4gICAgICBMaXRlcmFsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIExpdGVyYWwucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmlzU3RhdGVtZW50KCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gTGl0ZXJhbC5fX3N1cGVyX18ubWFrZVJldHVybi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBJREVOVElGSUVSLnRlc3QodGhpcy52YWx1ZSk7XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKF9yZWYyID0gdGhpcy52YWx1ZSkgPT09ICdicmVhaycgfHwgX3JlZjIgPT09ICdjb250aW51ZScgfHwgX3JlZjIgPT09ICdkZWJ1Z2dlcic7XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmlzQ29tcGxleCA9IE5PO1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuYXNzaWducyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBuYW1lID09PSB0aGlzLnZhbHVlO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnYnJlYWsnICYmICEoKG8gIT0gbnVsbCA/IG8ubG9vcCA6IHZvaWQgMCkgfHwgKG8gIT0gbnVsbCA/IG8uYmxvY2sgOiB2b2lkIDApKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnY29udGludWUnICYmICEobyAhPSBudWxsID8gby5sb29wIDogdm9pZCAwKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBjb2RlLCBfcmVmMjtcbiAgICAgIGlmICh0aGlzLmljZWRMb29wRmxhZyAmJiB0aGlzLmljZWRJc0p1bXAoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pY2VkQ29tcGlsZUljZWQobyk7XG4gICAgICB9XG4gICAgICBjb2RlID0gdGhpcy52YWx1ZSA9PT0gJ3RoaXMnID8gKChfcmVmMiA9IG8uc2NvcGUubWV0aG9kKSAhPSBudWxsID8gX3JlZjIuYm91bmQgOiB2b2lkIDApID8gby5zY29wZS5tZXRob2QuY29udGV4dCA6IHRoaXMudmFsdWUgOiB0aGlzLnZhbHVlLnJlc2VydmVkID8gXCJcXFwiXCIgKyB0aGlzLnZhbHVlICsgXCJcXFwiXCIgOiB0aGlzLnZhbHVlO1xuICAgICAgYW5zd2VyID0gdGhpcy5pc1N0YXRlbWVudCgpID8gXCJcIiArIHRoaXMudGFiICsgY29kZSArIFwiO1wiIDogY29kZTtcbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShhbnN3ZXIpXTtcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnIFwiJyArIHRoaXMudmFsdWUgKyAnXCInO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5pY2VkV2Fsa0FzdCA9IGZ1bmN0aW9uKHBhcmVudCwgbykge1xuICAgICAgaWYgKHRoaXMudmFsdWUgPT09ICdhcmd1bWVudHMnICYmIG8uZm91bmRBd2FpdEZ1bmMpIHtcbiAgICAgICAgby5mb3VuZEFyZ3VtZW50cyA9IHRydWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIl9hcmd1bWVudHNcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuaWNlZElzSnVtcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChfcmVmMiA9IHRoaXMudmFsdWUpID09PSAnYnJlYWsnIHx8IF9yZWYyID09PSAnY29udGludWUnO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5pY2VkQ29tcGlsZUljZWQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY2FsbCwgZCwgZnVuYywgbDtcbiAgICAgIGQgPSB7XG4gICAgICAgICdjb250aW51ZSc6IGljZWRbXCJjb25zdFwiXS5jX3doaWxlLFxuICAgICAgICAnYnJlYWsnOiBpY2VkW1wiY29uc3RcIl0uYl93aGlsZVxuICAgICAgfTtcbiAgICAgIGwgPSBkW3RoaXMudmFsdWVdO1xuICAgICAgZnVuYyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChsKSk7XG4gICAgICBjYWxsID0gbmV3IENhbGwoZnVuYywgW10pO1xuICAgICAgcmV0dXJuIGNhbGwuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBMaXRlcmFsO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuVW5kZWZpbmVkID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVbmRlZmluZWQsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBVbmRlZmluZWQoKSB7XG4gICAgICByZXR1cm4gVW5kZWZpbmVkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIFVuZGVmaW5lZC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gTk87XG5cbiAgICBVbmRlZmluZWQucHJvdG90eXBlLmlzQ29tcGxleCA9IE5PO1xuXG4gICAgVW5kZWZpbmVkLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShvLmxldmVsID49IExFVkVMX0FDQ0VTUyA/ICcodm9pZCAwKScgOiAndm9pZCAwJyldO1xuICAgIH07XG5cbiAgICByZXR1cm4gVW5kZWZpbmVkO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuTnVsbCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTnVsbCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIE51bGwoKSB7XG4gICAgICByZXR1cm4gTnVsbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBOdWxsLnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBOTztcblxuICAgIE51bGwucHJvdG90eXBlLmlzQ29tcGxleCA9IE5PO1xuXG4gICAgTnVsbC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShcIm51bGxcIildO1xuICAgIH07XG5cbiAgICByZXR1cm4gTnVsbDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkJvb2wgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJvb2wsIF9zdXBlcik7XG5cbiAgICBCb29sLnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBOTztcblxuICAgIEJvb2wucHJvdG90eXBlLmlzQ29tcGxleCA9IE5PO1xuXG4gICAgQm9vbC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZSh0aGlzLnZhbCldO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBCb29sKHZhbCkge1xuICAgICAgdGhpcy52YWwgPSB2YWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIEJvb2w7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5SZXR1cm4gPSBSZXR1cm4gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJldHVybiwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFJldHVybihleHByZXNzaW9uLCBhdXRvKSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICAgICAgUmV0dXJuLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IGF1dG87XG4gICAgfVxuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnZXhwcmVzc2lvbiddO1xuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IFlFUztcblxuICAgIFJldHVybi5wcm90b3R5cGUubWFrZVJldHVybiA9IFRISVM7XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLmp1bXBzID0gVEhJUztcblxuICAgIFJldHVybi5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obywgbGV2ZWwpIHtcbiAgICAgIHZhciBleHByLCBfcmVmMjtcbiAgICAgIGV4cHIgPSAoX3JlZjIgPSB0aGlzLmV4cHJlc3Npb24pICE9IG51bGwgPyBfcmVmMi5tYWtlUmV0dXJuKCkgOiB2b2lkIDA7XG4gICAgICBpZiAoZXhwciAmJiAhKGV4cHIgaW5zdGFuY2VvZiBSZXR1cm4pKSB7XG4gICAgICAgIHJldHVybiBleHByLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBsZXZlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmV0dXJuLl9fc3VwZXJfXy5jb21waWxlVG9GcmFnbWVudHMuY2FsbCh0aGlzLCBvLCBsZXZlbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJldHVybi5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyO1xuICAgICAgaWYgKHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNlZENvbXBpbGVJY2VkKG8pO1xuICAgICAgfVxuICAgICAgYW5zd2VyID0gW107XG4gICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiICsgKFwicmV0dXJuXCIgKyAodGhpcy5leHByZXNzaW9uID8gXCIgXCIgOiBcIlwiKSkpKTtcbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb24pIHtcbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdCh0aGlzLmV4cHJlc3Npb24uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKSk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiO1wiKSk7XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH07XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLmljZWRDb21waWxlSWNlZCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhcmdzLCBibG9jaywgY2FsbCwgY2IsIHJldDtcbiAgICAgIGNiID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5hdXRvY2IpKTtcbiAgICAgIGFyZ3MgPSB0aGlzLmV4cHJlc3Npb24gPyBbdGhpcy5leHByZXNzaW9uXSA6IFtdO1xuICAgICAgY2FsbCA9IG5ldyBDYWxsKGNiLCBhcmdzKTtcbiAgICAgIHJldCA9IG5ldyBMaXRlcmFsKFwicmV0dXJuXCIpO1xuICAgICAgYmxvY2sgPSBuZXcgQmxvY2soW2NhbGwsIHJldF0pO1xuICAgICAgcmV0dXJuIGJsb2NrLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmV0dXJuO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuVmFsdWUgPSBWYWx1ZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmFsdWUsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBWYWx1ZShiYXNlLCBwcm9wcywgdGFnKSB7XG4gICAgICBWYWx1ZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIGlmICghcHJvcHMgJiYgYmFzZSBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgICAgfVxuICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgIHRoaXMucHJvcGVydGllcyA9IHByb3BzIHx8IFtdO1xuICAgICAgaWYgKHRhZykge1xuICAgICAgICB0aGlzW3RhZ10gPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgVmFsdWUucHJvdG90eXBlLmNoaWxkcmVuID0gWydiYXNlJywgJ3Byb3BlcnRpZXMnXTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IFZhbHVlKHRoaXMuYmFzZSwgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gICAgICB0aGlzLnByb3BlcnRpZXMgPSB0aGlzLnByb3BlcnRpZXMuY29uY2F0KHByb3BzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaGFzUHJvcGVydGllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmJhcmVMaXRlcmFsID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgcmV0dXJuICF0aGlzLnByb3BlcnRpZXMubGVuZ3RoICYmIHRoaXMuYmFzZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc0FycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5iYXJlTGl0ZXJhbChBcnIpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYmFyZUxpdGVyYWwoUmFuZ2UpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNDb21wbGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNQcm9wZXJ0aWVzKCkgfHwgdGhpcy5iYXNlLmlzQ29tcGxleCgpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNQcm9wZXJ0aWVzKCkgfHwgdGhpcy5iYXNlLmlzQXNzaWduYWJsZSgpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNTaW1wbGVOdW1iZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJhcmVMaXRlcmFsKExpdGVyYWwpICYmIFNJTVBMRU5VTS50ZXN0KHRoaXMuYmFzZS52YWx1ZSk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYmFyZUxpdGVyYWwoTGl0ZXJhbCkgJiYgSVNfU1RSSU5HLnRlc3QodGhpcy5iYXNlLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzUmVnZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJhcmVMaXRlcmFsKExpdGVyYWwpICYmIElTX1JFR0VYLnRlc3QodGhpcy5iYXNlLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzQXRvbWljID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm9kZSwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLnByb3BlcnRpZXMuY29uY2F0KHRoaXMuYmFzZSk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG5vZGUgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChub2RlLnNvYWsgfHwgbm9kZSBpbnN0YW5jZW9mIENhbGwpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNOb3RDYWxsYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNTaW1wbGVOdW1iZXIoKSB8fCB0aGlzLmlzU3RyaW5nKCkgfHwgdGhpcy5pc1JlZ2V4KCkgfHwgdGhpcy5pc0FycmF5KCkgfHwgdGhpcy5pc1JhbmdlKCkgfHwgdGhpcy5pc1NwbGljZSgpIHx8IHRoaXMuaXNPYmplY3QoKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuICF0aGlzLnByb3BlcnRpZXMubGVuZ3RoICYmIHRoaXMuYmFzZS5pc1N0YXRlbWVudChvKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmFzc2lnbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gIXRoaXMucHJvcGVydGllcy5sZW5ndGggJiYgdGhpcy5iYXNlLmFzc2lnbnMobmFtZSk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiAhdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCAmJiB0aGlzLmJhc2UuanVtcHMobyk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc09iamVjdCA9IGZ1bmN0aW9uKG9ubHlHZW5lcmF0ZWQpIHtcbiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAodGhpcy5iYXNlIGluc3RhbmNlb2YgT2JqKSAmJiAoIW9ubHlHZW5lcmF0ZWQgfHwgdGhpcy5iYXNlLmdlbmVyYXRlZCk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc1NwbGljZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGxhc3QodGhpcy5wcm9wZXJ0aWVzKSBpbnN0YW5jZW9mIFNsaWNlO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUubG9va3NTdGF0aWMgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiB0aGlzLmJhc2UudmFsdWUgPT09IGNsYXNzTmFtZSAmJiB0aGlzLnByb3BlcnRpZXMubGVuZ3RoICYmICgoX3JlZjIgPSB0aGlzLnByb3BlcnRpZXNbMF0ubmFtZSkgIT0gbnVsbCA/IF9yZWYyLnZhbHVlIDogdm9pZCAwKSAhPT0gJ3Byb3RvdHlwZSc7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS51bndyYXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmNhY2hlUmVmZXJlbmNlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGJhc2UsIGJyZWYsIG5hbWUsIG5yZWY7XG4gICAgICBuYW1lID0gbGFzdCh0aGlzLnByb3BlcnRpZXMpO1xuICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5sZW5ndGggPCAyICYmICF0aGlzLmJhc2UuaXNDb21wbGV4KCkgJiYgIShuYW1lICE9IG51bGwgPyBuYW1lLmlzQ29tcGxleCgpIDogdm9pZCAwKSkge1xuICAgICAgICByZXR1cm4gW3RoaXMsIHRoaXNdO1xuICAgICAgfVxuICAgICAgYmFzZSA9IG5ldyBWYWx1ZSh0aGlzLmJhc2UsIHRoaXMucHJvcGVydGllcy5zbGljZSgwLCAtMSkpO1xuICAgICAgaWYgKGJhc2UuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgYnJlZiA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdiYXNlJykpO1xuICAgICAgICBiYXNlID0gbmV3IFZhbHVlKG5ldyBQYXJlbnMobmV3IEFzc2lnbihicmVmLCBiYXNlKSkpO1xuICAgICAgfVxuICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHJldHVybiBbYmFzZSwgYnJlZl07XG4gICAgICB9XG4gICAgICBpZiAobmFtZS5pc0NvbXBsZXgoKSkge1xuICAgICAgICBucmVmID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoJ25hbWUnKSk7XG4gICAgICAgIG5hbWUgPSBuZXcgSW5kZXgobmV3IEFzc2lnbihucmVmLCBuYW1lLmluZGV4KSk7XG4gICAgICAgIG5yZWYgPSBuZXcgSW5kZXgobnJlZik7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2Jhc2UuYWRkKG5hbWUpLCBuZXcgVmFsdWUoYnJlZiB8fCBiYXNlLmJhc2UsIFtucmVmIHx8IG5hbWVdKV07XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBmcmFnbWVudHMsIHByb3AsIHByb3BzLCBfaSwgX2xlbjtcbiAgICAgIHRoaXMuYmFzZS5mcm9udCA9IHRoaXMuZnJvbnQ7XG4gICAgICBwcm9wcyA9IHRoaXMucHJvcGVydGllcztcbiAgICAgIGZyYWdtZW50cyA9IHRoaXMuYmFzZS5jb21waWxlVG9GcmFnbWVudHMobywgKHByb3BzLmxlbmd0aCA/IExFVkVMX0FDQ0VTUyA6IG51bGwpKTtcbiAgICAgIGlmICgodGhpcy5iYXNlIGluc3RhbmNlb2YgUGFyZW5zIHx8IHByb3BzLmxlbmd0aCkgJiYgU0lNUExFTlVNLnRlc3QoZnJhZ21lbnRzVG9UZXh0KGZyYWdtZW50cykpKSB7XG4gICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoJy4nKSk7XG4gICAgICB9XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IHByb3BzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHByb3AgPSBwcm9wc1tfaV07XG4gICAgICAgIGZyYWdtZW50cy5wdXNoLmFwcGx5KGZyYWdtZW50cywgcHJvcC5jb21waWxlVG9GcmFnbWVudHMobykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLnVuZm9sZFNvYWsgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy51bmZvbGRlZFNvYWsgIT0gbnVsbCA/IHRoaXMudW5mb2xkZWRTb2FrIDogdGhpcy51bmZvbGRlZFNvYWsgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBmc3QsIGksIGlmbiwgcHJvcCwgcmVmLCBzbmQsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjM7XG4gICAgICAgICAgaWYgKGlmbiA9IF90aGlzLmJhc2UudW5mb2xkU29hayhvKSkge1xuICAgICAgICAgICAgKF9yZWYyID0gaWZuLmJvZHkucHJvcGVydGllcykucHVzaC5hcHBseShfcmVmMiwgX3RoaXMucHJvcGVydGllcyk7XG4gICAgICAgICAgICByZXR1cm4gaWZuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfcmVmMyA9IF90aGlzLnByb3BlcnRpZXM7XG4gICAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgICAgICBwcm9wID0gX3JlZjNbaV07XG4gICAgICAgICAgICBpZiAoIXByb3Auc29haykge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3Auc29hayA9IGZhbHNlO1xuICAgICAgICAgICAgZnN0ID0gbmV3IFZhbHVlKF90aGlzLmJhc2UsIF90aGlzLnByb3BlcnRpZXMuc2xpY2UoMCwgaSkpO1xuICAgICAgICAgICAgc25kID0gbmV3IFZhbHVlKF90aGlzLmJhc2UsIF90aGlzLnByb3BlcnRpZXMuc2xpY2UoaSkpO1xuICAgICAgICAgICAgaWYgKGZzdC5pc0NvbXBsZXgoKSkge1xuICAgICAgICAgICAgICByZWYgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJykpO1xuICAgICAgICAgICAgICBmc3QgPSBuZXcgUGFyZW5zKG5ldyBBc3NpZ24ocmVmLCBmc3QpKTtcbiAgICAgICAgICAgICAgc25kLmJhc2UgPSByZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IElmKG5ldyBFeGlzdGVuY2UoZnN0KSwgc25kLCB7XG4gICAgICAgICAgICAgIHNvYWs6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSgpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaWNlZFRvU2xvdCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgIHZhciBzdWZmZml4LCBzdWZmaXg7XG4gICAgICBpZiAodGhpcy5iYXNlIGluc3RhbmNlb2YgT2JqKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2UuaWNlZFRvU2xvdChpKTtcbiAgICAgIH1cbiAgICAgIHN1ZmZmaXggPSBudWxsO1xuICAgICAgaWYgKHRoaXMucHJvcGVydGllcyAmJiB0aGlzLnByb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgIHN1ZmZpeCA9IHRoaXMucHJvcGVydGllcy5wb3AoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgU2xvdChpLCB0aGlzLCBzdWZmaXgpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaWNlZFRvU2xvdEFjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXNbXCJ0aGlzXCJdKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IEFjY2Vzcyh0aGlzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFZhbHVlO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQ29tbWVudCA9IENvbW1lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbW1lbnQsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBDb21tZW50KGNvbW1lbnQpIHtcbiAgICAgIHRoaXMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICBDb21tZW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENvbW1lbnQucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gWUVTO1xuXG4gICAgQ29tbWVudC5wcm90b3R5cGUubWFrZVJldHVybiA9IFRISVM7XG5cbiAgICBDb21tZW50LnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8sIGxldmVsKSB7XG4gICAgICB2YXIgY29kZSwgY29tbWVudDtcbiAgICAgIGNvbW1lbnQgPSB0aGlzLmNvbW1lbnQucmVwbGFjZSgvXihcXHMqKSMgL2dtLCBcIiQxICogXCIpO1xuICAgICAgY29kZSA9IFwiLypcIiArIChtdWx0aWRlbnQoY29tbWVudCwgdGhpcy50YWIpKSArIChfX2luZGV4T2YuY2FsbChjb21tZW50LCAnXFxuJykgPj0gMCA/IFwiXFxuXCIgKyB0aGlzLnRhYiA6ICcnKSArIFwiICovXCI7XG4gICAgICBpZiAoKGxldmVsIHx8IG8ubGV2ZWwpID09PSBMRVZFTF9UT1ApIHtcbiAgICAgICAgY29kZSA9IG8uaW5kZW50ICsgY29kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShcIlxcblwiKSwgdGhpcy5tYWtlQ29kZShjb2RlKV07XG4gICAgfTtcblxuICAgIHJldHVybiBDb21tZW50O1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQ2FsbCA9IENhbGwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbGwsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBDYWxsKHZhcmlhYmxlLCBhcmdzLCBzb2FrKSB7XG4gICAgICB0aGlzLmFyZ3MgPSBhcmdzICE9IG51bGwgPyBhcmdzIDogW107XG4gICAgICB0aGlzLnNvYWsgPSBzb2FrO1xuICAgICAgQ2FsbC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaXNOZXcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNTdXBlciA9IHZhcmlhYmxlID09PSAnc3VwZXInO1xuICAgICAgdGhpcy52YXJpYWJsZSA9IHRoaXMuaXNTdXBlciA/IG51bGwgOiB2YXJpYWJsZTtcbiAgICAgIGlmICh2YXJpYWJsZSBpbnN0YW5jZW9mIFZhbHVlICYmIHZhcmlhYmxlLmlzTm90Q2FsbGFibGUoKSkge1xuICAgICAgICB2YXJpYWJsZS5lcnJvcihcImxpdGVyYWwgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQ2FsbC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3ZhcmlhYmxlJywgJ2FyZ3MnXTtcblxuICAgIENhbGwucHJvdG90eXBlLm5ld0luc3RhbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmFzZSwgX3JlZjI7XG4gICAgICBiYXNlID0gKChfcmVmMiA9IHRoaXMudmFyaWFibGUpICE9IG51bGwgPyBfcmVmMi5iYXNlIDogdm9pZCAwKSB8fCB0aGlzLnZhcmlhYmxlO1xuICAgICAgaWYgKGJhc2UgaW5zdGFuY2VvZiBDYWxsICYmICFiYXNlLmlzTmV3KSB7XG4gICAgICAgIGJhc2UubmV3SW5zdGFuY2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNOZXcgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIENhbGwucHJvdG90eXBlLnN1cGVyUmVmZXJlbmNlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFjY2Vzc2VzLCBtZXRob2Q7XG4gICAgICBtZXRob2QgPSBvLnNjb3BlLm5hbWVkTWV0aG9kKCk7XG4gICAgICBpZiAobWV0aG9kICE9IG51bGwgPyBtZXRob2Qua2xhc3MgOiB2b2lkIDApIHtcbiAgICAgICAgYWNjZXNzZXMgPSBbbmV3IEFjY2VzcyhuZXcgTGl0ZXJhbCgnX19zdXBlcl9fJykpXTtcbiAgICAgICAgaWYgKG1ldGhvZFtcInN0YXRpY1wiXSkge1xuICAgICAgICAgIGFjY2Vzc2VzLnB1c2gobmV3IEFjY2VzcyhuZXcgTGl0ZXJhbCgnY29uc3RydWN0b3InKSkpO1xuICAgICAgICB9XG4gICAgICAgIGFjY2Vzc2VzLnB1c2gobmV3IEFjY2VzcyhuZXcgTGl0ZXJhbChtZXRob2QubmFtZSkpKTtcbiAgICAgICAgcmV0dXJuIChuZXcgVmFsdWUobmV3IExpdGVyYWwobWV0aG9kLmtsYXNzKSwgYWNjZXNzZXMpKS5jb21waWxlKG8pO1xuICAgICAgfSBlbHNlIGlmIChtZXRob2QgIT0gbnVsbCA/IG1ldGhvZC5jdG9yIDogdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBcIlwiICsgbWV0aG9kLm5hbWUgKyBcIi5fX3N1cGVyX18uY29uc3RydWN0b3JcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yKCdjYW5ub3QgY2FsbCBzdXBlciBvdXRzaWRlIG9mIGFuIGluc3RhbmNlIG1ldGhvZC4nKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2FsbC5wcm90b3R5cGUuc3VwZXJUaGlzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIG1ldGhvZDtcbiAgICAgIGlmIChvLnNjb3BlLmljZWRnZW4pIHtcbiAgICAgICAgcmV0dXJuIFwiX3RoaXNcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1ldGhvZCA9IG8uc2NvcGUubWV0aG9kO1xuICAgICAgICByZXR1cm4gKG1ldGhvZCAmJiAhbWV0aG9kLmtsYXNzICYmIG1ldGhvZC5jb250ZXh0KSB8fCBcInRoaXNcIjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2FsbC5wcm90b3R5cGUudW5mb2xkU29hayA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjYWxsLCBpZm4sIGxlZnQsIGxpc3QsIHJpdGUsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjM7XG4gICAgICBpZiAodGhpcy5zb2FrKSB7XG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlKSB7XG4gICAgICAgICAgaWYgKGlmbiA9IHVuZm9sZFNvYWsobywgdGhpcywgJ3ZhcmlhYmxlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBpZm47XG4gICAgICAgICAgfVxuICAgICAgICAgIF9yZWYyID0gbmV3IFZhbHVlKHRoaXMudmFyaWFibGUpLmNhY2hlUmVmZXJlbmNlKG8pLCBsZWZ0ID0gX3JlZjJbMF0sIHJpdGUgPSBfcmVmMlsxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZWZ0ID0gbmV3IExpdGVyYWwodGhpcy5zdXBlclJlZmVyZW5jZShvKSk7XG4gICAgICAgICAgcml0ZSA9IG5ldyBWYWx1ZShsZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICByaXRlID0gbmV3IENhbGwocml0ZSwgdGhpcy5hcmdzKTtcbiAgICAgICAgcml0ZS5pc05ldyA9IHRoaXMuaXNOZXc7XG4gICAgICAgIGxlZnQgPSBuZXcgTGl0ZXJhbChcInR5cGVvZiBcIiArIChsZWZ0LmNvbXBpbGUobykpICsgXCIgPT09IFxcXCJmdW5jdGlvblxcXCJcIik7XG4gICAgICAgIHJldHVybiBuZXcgSWYobGVmdCwgbmV3IFZhbHVlKHJpdGUpLCB7XG4gICAgICAgICAgc29hazogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNhbGwgPSB0aGlzO1xuICAgICAgbGlzdCA9IFtdO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKGNhbGwudmFyaWFibGUgaW5zdGFuY2VvZiBDYWxsKSB7XG4gICAgICAgICAgbGlzdC5wdXNoKGNhbGwpO1xuICAgICAgICAgIGNhbGwgPSBjYWxsLnZhcmlhYmxlO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGNhbGwudmFyaWFibGUgaW5zdGFuY2VvZiBWYWx1ZSkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnB1c2goY2FsbCk7XG4gICAgICAgIGlmICghKChjYWxsID0gY2FsbC52YXJpYWJsZS5iYXNlKSBpbnN0YW5jZW9mIENhbGwpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIF9yZWYzID0gbGlzdC5yZXZlcnNlKCk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGNhbGwgPSBfcmVmM1tfaV07XG4gICAgICAgIGlmIChpZm4pIHtcbiAgICAgICAgICBpZiAoY2FsbC52YXJpYWJsZSBpbnN0YW5jZW9mIENhbGwpIHtcbiAgICAgICAgICAgIGNhbGwudmFyaWFibGUgPSBpZm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGwudmFyaWFibGUuYmFzZSA9IGlmbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWZuID0gdW5mb2xkU29hayhvLCBjYWxsLCAndmFyaWFibGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpZm47XG4gICAgfTtcblxuICAgIENhbGwucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFyZywgYXJnSW5kZXgsIGNvbXBpbGVkQXJncywgY29tcGlsZWRBcnJheSwgZnJhZ21lbnRzLCBwcmVmYWNlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzO1xuICAgICAgaWYgKChfcmVmMiA9IHRoaXMudmFyaWFibGUpICE9IG51bGwpIHtcbiAgICAgICAgX3JlZjIuZnJvbnQgPSB0aGlzLmZyb250O1xuICAgICAgfVxuICAgICAgY29tcGlsZWRBcnJheSA9IFNwbGF0LmNvbXBpbGVTcGxhdHRlZEFycmF5KG8sIHRoaXMuYXJncywgdHJ1ZSk7XG4gICAgICBpZiAoY29tcGlsZWRBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVNwbGF0KG8sIGNvbXBpbGVkQXJyYXkpO1xuICAgICAgfVxuICAgICAgY29tcGlsZWRBcmdzID0gW107XG4gICAgICBfcmVmMyA9IHRoaXMuYXJncztcbiAgICAgIGZvciAoYXJnSW5kZXggPSBfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgYXJnSW5kZXggPSArK19pKSB7XG4gICAgICAgIGFyZyA9IF9yZWYzW2FyZ0luZGV4XTtcbiAgICAgICAgYXJnLmljZWRTdGF0ZW1lbnRBc3NlcnRpb24oKTtcbiAgICAgICAgaWYgKGFyZ0luZGV4KSB7XG4gICAgICAgICAgY29tcGlsZWRBcmdzLnB1c2godGhpcy5tYWtlQ29kZShcIiwgXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb21waWxlZEFyZ3MucHVzaC5hcHBseShjb21waWxlZEFyZ3MsIGFyZy5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkpO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzID0gW107XG4gICAgICBpZiAodGhpcy5pc1N1cGVyKSB7XG4gICAgICAgIHByZWZhY2UgPSB0aGlzLnN1cGVyUmVmZXJlbmNlKG8pICsgKFwiLmNhbGwoXCIgKyAodGhpcy5zdXBlclRoaXMobykpKTtcbiAgICAgICAgaWYgKGNvbXBpbGVkQXJncy5sZW5ndGgpIHtcbiAgICAgICAgICBwcmVmYWNlICs9IFwiLCBcIjtcbiAgICAgICAgfVxuICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKHByZWZhY2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmlzTmV3KSB7XG4gICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZSgnbmV3ICcpKTtcbiAgICAgICAgfVxuICAgICAgICBmcmFnbWVudHMucHVzaC5hcHBseShmcmFnbWVudHMsIHRoaXMudmFyaWFibGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0FDQ0VTUykpO1xuICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiKFwiKSk7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMucHVzaC5hcHBseShmcmFnbWVudHMsIGNvbXBpbGVkQXJncyk7XG4gICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiKVwiKSk7XG4gICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgIH07XG5cbiAgICBDYWxsLnByb3RvdHlwZS5jb21waWxlU3BsYXQgPSBmdW5jdGlvbihvLCBzcGxhdEFyZ3MpIHtcbiAgICAgIHZhciBhbnN3ZXIsIGJhc2UsIGZ1biwgaWR0LCBuYW1lLCByZWY7XG4gICAgICBpZiAodGhpcy5pc1N1cGVyKSB7XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIlwiICsgKHRoaXMuc3VwZXJSZWZlcmVuY2UobykpICsgXCIuYXBwbHkoXCIgKyAodGhpcy5zdXBlclRoaXMobykpICsgXCIsIFwiKSwgc3BsYXRBcmdzLCB0aGlzLm1ha2VDb2RlKFwiKVwiKSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc05ldykge1xuICAgICAgICBpZHQgPSB0aGlzLnRhYiArIFRBQjtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiKGZ1bmN0aW9uKGZ1bmMsIGFyZ3MsIGN0b3IpIHtcXG5cIiArIGlkdCArIFwiY3Rvci5wcm90b3R5cGUgPSBmdW5jLnByb3RvdHlwZTtcXG5cIiArIGlkdCArIFwidmFyIGNoaWxkID0gbmV3IGN0b3IsIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY2hpbGQsIGFyZ3MpO1xcblwiICsgaWR0ICsgXCJyZXR1cm4gT2JqZWN0KHJlc3VsdCkgPT09IHJlc3VsdCA/IHJlc3VsdCA6IGNoaWxkO1xcblwiICsgdGhpcy50YWIgKyBcIn0pKFwiKSwgdGhpcy52YXJpYWJsZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCksIHRoaXMubWFrZUNvZGUoXCIsIFwiKSwgc3BsYXRBcmdzLCB0aGlzLm1ha2VDb2RlKFwiLCBmdW5jdGlvbigpe30pXCIpKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlciA9IFtdO1xuICAgICAgYmFzZSA9IG5ldyBWYWx1ZSh0aGlzLnZhcmlhYmxlKTtcbiAgICAgIGlmICgobmFtZSA9IGJhc2UucHJvcGVydGllcy5wb3AoKSkgJiYgYmFzZS5pc0NvbXBsZXgoKSkge1xuICAgICAgICByZWYgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJyk7XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQodGhpcy5tYWtlQ29kZShcIihcIiArIHJlZiArIFwiID0gXCIpLCBiYXNlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSwgdGhpcy5tYWtlQ29kZShcIilcIiksIG5hbWUuY29tcGlsZVRvRnJhZ21lbnRzKG8pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1biA9IGJhc2UuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0FDQ0VTUyk7XG4gICAgICAgIGlmIChTSU1QTEVOVU0udGVzdChmcmFnbWVudHNUb1RleHQoZnVuKSkpIHtcbiAgICAgICAgICBmdW4gPSB0aGlzLndyYXBJbkJyYWNlcyhmdW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgcmVmID0gZnJhZ21lbnRzVG9UZXh0KGZ1bik7XG4gICAgICAgICAgZnVuLnB1c2guYXBwbHkoZnVuLCBuYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhvKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVmID0gJ251bGwnO1xuICAgICAgICB9XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQoZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIuYXBwbHkoXCIgKyByZWYgKyBcIiwgXCIpLCBzcGxhdEFyZ3MsIHRoaXMubWFrZUNvZGUoXCIpXCIpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhbGw7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5FeHRlbmRzID0gRXh0ZW5kcyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXh0ZW5kcywgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEV4dGVuZHMoY2hpbGQsIHBhcmVudCkge1xuICAgICAgdGhpcy5jaGlsZCA9IGNoaWxkO1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBFeHRlbmRzLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV4dGVuZHMucHJvdG90eXBlLmNoaWxkcmVuID0gWydjaGlsZCcsICdwYXJlbnQnXTtcblxuICAgIEV4dGVuZHMucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQ2FsbChuZXcgVmFsdWUobmV3IExpdGVyYWwodXRpbGl0eSgnZXh0ZW5kcycpKSksIFt0aGlzLmNoaWxkLCB0aGlzLnBhcmVudF0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4dGVuZHM7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5BY2Nlc3MgPSBBY2Nlc3MgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFjY2VzcywgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEFjY2VzcyhuYW1lLCB0YWcpIHtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICBBY2Nlc3MuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLm5hbWUuYXNLZXkgPSB0cnVlO1xuICAgICAgdGhpcy5zb2FrID0gdGFnID09PSAnc29hayc7XG4gICAgfVxuXG4gICAgQWNjZXNzLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnbmFtZSddO1xuXG4gICAgQWNjZXNzLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgbmFtZTtcbiAgICAgIG5hbWUgPSB0aGlzLm5hbWUuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgaWYgKChJREVOVElGSUVSLnRlc3QoZnJhZ21lbnRzVG9UZXh0KG5hbWUpKSkgfHwgdGhpcy5uYW1lIGluc3RhbmNlb2YgRGVmZXIpIHtcbiAgICAgICAgbmFtZS51bnNoaWZ0KHRoaXMubWFrZUNvZGUoXCIuXCIpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hbWUudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiW1wiKSk7XG4gICAgICAgIG5hbWUucHVzaCh0aGlzLm1ha2VDb2RlKFwiXVwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9O1xuXG4gICAgQWNjZXNzLnByb3RvdHlwZS5pc0NvbXBsZXggPSBOTztcblxuICAgIHJldHVybiBBY2Nlc3M7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5JbmRleCA9IEluZGV4ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbmRleCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEluZGV4KGluZGV4KSB7XG4gICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICBJbmRleC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbmRleC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2luZGV4J107XG5cbiAgICBJbmRleC5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiW1wiKSwgdGhpcy5pbmRleC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pLCB0aGlzLm1ha2VDb2RlKFwiXVwiKSk7XG4gICAgfTtcblxuICAgIEluZGV4LnByb3RvdHlwZS5pc0NvbXBsZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmluZGV4LmlzQ29tcGxleCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSW5kZXg7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5SYW5nZSA9IFJhbmdlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYW5nZSwgX3N1cGVyKTtcblxuICAgIFJhbmdlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnZnJvbScsICd0byddO1xuXG4gICAgZnVuY3Rpb24gUmFuZ2UoZnJvbSwgdG8sIHRhZykge1xuICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgIFJhbmdlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5leGNsdXNpdmUgPSB0YWcgPT09ICdleGNsdXNpdmUnO1xuICAgICAgdGhpcy5lcXVhbHMgPSB0aGlzLmV4Y2x1c2l2ZSA/ICcnIDogJz0nO1xuICAgIH1cblxuICAgIFJhbmdlLnByb3RvdHlwZS5jb21waWxlVmFyaWFibGVzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHN0ZXAsIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuICAgICAgbyA9IG1lcmdlKG8sIHtcbiAgICAgICAgdG9wOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIF9yZWYyID0gdGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyh0aGlzLmZyb20uY2FjaGUobywgTEVWRUxfTElTVCkpLCB0aGlzLmZyb21DID0gX3JlZjJbMF0sIHRoaXMuZnJvbVZhciA9IF9yZWYyWzFdO1xuICAgICAgX3JlZjMgPSB0aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKHRoaXMudG8uY2FjaGUobywgTEVWRUxfTElTVCkpLCB0aGlzLnRvQyA9IF9yZWYzWzBdLCB0aGlzLnRvVmFyID0gX3JlZjNbMV07XG4gICAgICBpZiAoc3RlcCA9IGRlbChvLCAnc3RlcCcpKSB7XG4gICAgICAgIF9yZWY0ID0gdGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyhzdGVwLmNhY2hlKG8sIExFVkVMX0xJU1QpKSwgdGhpcy5zdGVwID0gX3JlZjRbMF0sIHRoaXMuc3RlcFZhciA9IF9yZWY0WzFdO1xuICAgICAgfVxuICAgICAgX3JlZjUgPSBbdGhpcy5mcm9tVmFyLm1hdGNoKE5VTUJFUiksIHRoaXMudG9WYXIubWF0Y2goTlVNQkVSKV0sIHRoaXMuZnJvbU51bSA9IF9yZWY1WzBdLCB0aGlzLnRvTnVtID0gX3JlZjVbMV07XG4gICAgICBpZiAodGhpcy5zdGVwVmFyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBOdW0gPSB0aGlzLnN0ZXBWYXIubWF0Y2goTlVNQkVSKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmFuZ2UucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNvbmQsIGNvbmRQYXJ0LCBmcm9tLCBndCwgaWR4LCBpZHhOYW1lLCBrbm93biwgbHQsIG5hbWVkSW5kZXgsIHN0ZXBQYXJ0LCB0bywgdmFyUGFydCwgX3JlZjIsIF9yZWYzO1xuICAgICAgaWYgKCF0aGlzLmZyb21WYXIpIHtcbiAgICAgICAgdGhpcy5jb21waWxlVmFyaWFibGVzKG8pO1xuICAgICAgfVxuICAgICAgaWYgKCFvLmluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVBcnJheShvKTtcbiAgICAgIH1cbiAgICAgIGtub3duID0gdGhpcy5mcm9tTnVtICYmIHRoaXMudG9OdW07XG4gICAgICBpZHggPSBkZWwobywgJ2luZGV4Jyk7XG4gICAgICBpZHhOYW1lID0gZGVsKG8sICduYW1lJyk7XG4gICAgICBuYW1lZEluZGV4ID0gaWR4TmFtZSAmJiBpZHhOYW1lICE9PSBpZHg7XG4gICAgICB2YXJQYXJ0ID0gXCJcIiArIGlkeCArIFwiID0gXCIgKyB0aGlzLmZyb21DO1xuICAgICAgaWYgKHRoaXMudG9DICE9PSB0aGlzLnRvVmFyKSB7XG4gICAgICAgIHZhclBhcnQgKz0gXCIsIFwiICsgdGhpcy50b0M7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdGVwICE9PSB0aGlzLnN0ZXBWYXIpIHtcbiAgICAgICAgdmFyUGFydCArPSBcIiwgXCIgKyB0aGlzLnN0ZXA7XG4gICAgICB9XG4gICAgICBfcmVmMiA9IFtcIlwiICsgaWR4ICsgXCIgPFwiICsgdGhpcy5lcXVhbHMsIFwiXCIgKyBpZHggKyBcIiA+XCIgKyB0aGlzLmVxdWFsc10sIGx0ID0gX3JlZjJbMF0sIGd0ID0gX3JlZjJbMV07XG4gICAgICBjb25kUGFydCA9IHRoaXMuc3RlcE51bSA/IHBhcnNlTnVtKHRoaXMuc3RlcE51bVswXSkgPiAwID8gXCJcIiArIGx0ICsgXCIgXCIgKyB0aGlzLnRvVmFyIDogXCJcIiArIGd0ICsgXCIgXCIgKyB0aGlzLnRvVmFyIDoga25vd24gPyAoKF9yZWYzID0gW3BhcnNlTnVtKHRoaXMuZnJvbU51bVswXSksIHBhcnNlTnVtKHRoaXMudG9OdW1bMF0pXSwgZnJvbSA9IF9yZWYzWzBdLCB0byA9IF9yZWYzWzFdLCBfcmVmMyksIGZyb20gPD0gdG8gPyBcIlwiICsgbHQgKyBcIiBcIiArIHRvIDogXCJcIiArIGd0ICsgXCIgXCIgKyB0bykgOiAoY29uZCA9IHRoaXMuc3RlcFZhciA/IFwiXCIgKyB0aGlzLnN0ZXBWYXIgKyBcIiA+IDBcIiA6IFwiXCIgKyB0aGlzLmZyb21WYXIgKyBcIiA8PSBcIiArIHRoaXMudG9WYXIsIFwiXCIgKyBjb25kICsgXCIgPyBcIiArIGx0ICsgXCIgXCIgKyB0aGlzLnRvVmFyICsgXCIgOiBcIiArIGd0ICsgXCIgXCIgKyB0aGlzLnRvVmFyKTtcbiAgICAgIHN0ZXBQYXJ0ID0gdGhpcy5zdGVwVmFyID8gXCJcIiArIGlkeCArIFwiICs9IFwiICsgdGhpcy5zdGVwVmFyIDoga25vd24gPyBuYW1lZEluZGV4ID8gZnJvbSA8PSB0byA/IFwiKytcIiArIGlkeCA6IFwiLS1cIiArIGlkeCA6IGZyb20gPD0gdG8gPyBcIlwiICsgaWR4ICsgXCIrK1wiIDogXCJcIiArIGlkeCArIFwiLS1cIiA6IG5hbWVkSW5kZXggPyBcIlwiICsgY29uZCArIFwiID8gKytcIiArIGlkeCArIFwiIDogLS1cIiArIGlkeCA6IFwiXCIgKyBjb25kICsgXCIgPyBcIiArIGlkeCArIFwiKysgOiBcIiArIGlkeCArIFwiLS1cIjtcbiAgICAgIGlmIChuYW1lZEluZGV4KSB7XG4gICAgICAgIHZhclBhcnQgPSBcIlwiICsgaWR4TmFtZSArIFwiID0gXCIgKyB2YXJQYXJ0O1xuICAgICAgfVxuICAgICAgaWYgKG5hbWVkSW5kZXgpIHtcbiAgICAgICAgc3RlcFBhcnQgPSBcIlwiICsgaWR4TmFtZSArIFwiID0gXCIgKyBzdGVwUGFydDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShcIlwiICsgdmFyUGFydCArIFwiOyBcIiArIGNvbmRQYXJ0ICsgXCI7IFwiICsgc3RlcFBhcnQpXTtcbiAgICB9O1xuXG4gICAgUmFuZ2UucHJvdG90eXBlLmNvbXBpbGVBcnJheSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhcmdzLCBib2R5LCBjb25kLCBoYXNBcmdzLCBpLCBpZHQsIHBvc3QsIHByZSwgcmFuZ2UsIHJlc3VsdCwgdmFycywgX2ksIF9yZWYyLCBfcmVmMywgX3Jlc3VsdHM7XG4gICAgICBpZiAodGhpcy5mcm9tTnVtICYmIHRoaXMudG9OdW0gJiYgTWF0aC5hYnModGhpcy5mcm9tTnVtIC0gdGhpcy50b051bSkgPD0gMjApIHtcbiAgICAgICAgcmFuZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBfaSA9IF9yZWYyID0gK3RoaXMuZnJvbU51bSwgX3JlZjMgPSArdGhpcy50b051bTsgX3JlZjIgPD0gX3JlZjMgPyBfaSA8PSBfcmVmMyA6IF9pID49IF9yZWYzOyBfcmVmMiA8PSBfcmVmMyA/IF9pKysgOiBfaS0tKXsgX3Jlc3VsdHMucHVzaChfaSk7IH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmFwcGx5KHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5leGNsdXNpdmUpIHtcbiAgICAgICAgICByYW5nZS5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoXCJbXCIgKyAocmFuZ2Uuam9pbignLCAnKSkgKyBcIl1cIildO1xuICAgICAgfVxuICAgICAgaWR0ID0gdGhpcy50YWIgKyBUQUI7XG4gICAgICBpID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ2knKTtcbiAgICAgIHJlc3VsdCA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZXN1bHRzJyk7XG4gICAgICBwcmUgPSBcIlxcblwiICsgaWR0ICsgcmVzdWx0ICsgXCIgPSBbXTtcIjtcbiAgICAgIGlmICh0aGlzLmZyb21OdW0gJiYgdGhpcy50b051bSkge1xuICAgICAgICBvLmluZGV4ID0gaTtcbiAgICAgICAgYm9keSA9IGZyYWdtZW50c1RvVGV4dCh0aGlzLmNvbXBpbGVOb2RlKG8pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhcnMgPSAoXCJcIiArIGkgKyBcIiA9IFwiICsgdGhpcy5mcm9tQykgKyAodGhpcy50b0MgIT09IHRoaXMudG9WYXIgPyBcIiwgXCIgKyB0aGlzLnRvQyA6ICcnKTtcbiAgICAgICAgY29uZCA9IFwiXCIgKyB0aGlzLmZyb21WYXIgKyBcIiA8PSBcIiArIHRoaXMudG9WYXI7XG4gICAgICAgIGJvZHkgPSBcInZhciBcIiArIHZhcnMgKyBcIjsgXCIgKyBjb25kICsgXCIgPyBcIiArIGkgKyBcIiA8XCIgKyB0aGlzLmVxdWFscyArIFwiIFwiICsgdGhpcy50b1ZhciArIFwiIDogXCIgKyBpICsgXCIgPlwiICsgdGhpcy5lcXVhbHMgKyBcIiBcIiArIHRoaXMudG9WYXIgKyBcIjsgXCIgKyBjb25kICsgXCIgPyBcIiArIGkgKyBcIisrIDogXCIgKyBpICsgXCItLVwiO1xuICAgICAgfVxuICAgICAgcG9zdCA9IFwieyBcIiArIHJlc3VsdCArIFwiLnB1c2goXCIgKyBpICsgXCIpOyB9XFxuXCIgKyBpZHQgKyBcInJldHVybiBcIiArIHJlc3VsdCArIFwiO1xcblwiICsgby5pbmRlbnQ7XG4gICAgICBoYXNBcmdzID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5jb250YWlucyhpc0xpdGVyYWxBcmd1bWVudHMpIDogdm9pZCAwO1xuICAgICAgfTtcbiAgICAgIGlmIChoYXNBcmdzKHRoaXMuZnJvbSkgfHwgaGFzQXJncyh0aGlzLnRvKSkge1xuICAgICAgICBhcmdzID0gJywgYXJndW1lbnRzJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShcIihmdW5jdGlvbigpIHtcIiArIHByZSArIFwiXFxuXCIgKyBpZHQgKyBcImZvciAoXCIgKyBib2R5ICsgXCIpXCIgKyBwb3N0ICsgXCJ9KS5hcHBseSh0aGlzXCIgKyAoYXJncyAhPSBudWxsID8gYXJncyA6ICcnKSArIFwiKVwiKV07XG4gICAgfTtcblxuICAgIHJldHVybiBSYW5nZTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlNsaWNlID0gU2xpY2UgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNsaWNlLCBfc3VwZXIpO1xuXG4gICAgU2xpY2UucHJvdG90eXBlLmNoaWxkcmVuID0gWydyYW5nZSddO1xuXG4gICAgZnVuY3Rpb24gU2xpY2UocmFuZ2UpIHtcbiAgICAgIHRoaXMucmFuZ2UgPSByYW5nZTtcbiAgICAgIFNsaWNlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNsaWNlLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjb21waWxlZCwgY29tcGlsZWRUZXh0LCBmcm9tLCBmcm9tQ29tcGlsZWQsIHRvLCB0b1N0ciwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMucmFuZ2UsIHRvID0gX3JlZjIudG8sIGZyb20gPSBfcmVmMi5mcm9tO1xuICAgICAgZnJvbUNvbXBpbGVkID0gZnJvbSAmJiBmcm9tLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTikgfHwgW3RoaXMubWFrZUNvZGUoJzAnKV07XG4gICAgICBpZiAodG8pIHtcbiAgICAgICAgY29tcGlsZWQgPSB0by5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pO1xuICAgICAgICBjb21waWxlZFRleHQgPSBmcmFnbWVudHNUb1RleHQoY29tcGlsZWQpO1xuICAgICAgICBpZiAoISghdGhpcy5yYW5nZS5leGNsdXNpdmUgJiYgK2NvbXBpbGVkVGV4dCA9PT0gLTEpKSB7XG4gICAgICAgICAgdG9TdHIgPSAnLCAnICsgKHRoaXMucmFuZ2UuZXhjbHVzaXZlID8gY29tcGlsZWRUZXh0IDogU0lNUExFTlVNLnRlc3QoY29tcGlsZWRUZXh0KSA/IFwiXCIgKyAoK2NvbXBpbGVkVGV4dCArIDEpIDogKGNvbXBpbGVkID0gdG8uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0FDQ0VTUyksIFwiK1wiICsgKGZyYWdtZW50c1RvVGV4dChjb21waWxlZCkpICsgXCIgKyAxIHx8IDllOVwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShcIi5zbGljZShcIiArIChmcmFnbWVudHNUb1RleHQoZnJvbUNvbXBpbGVkKSkgKyAodG9TdHIgfHwgJycpICsgXCIpXCIpXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNsaWNlO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuT2JqID0gT2JqID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYmosIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBPYmoocHJvcHMsIGdlbmVyYXRlZCkge1xuICAgICAgdGhpcy5nZW5lcmF0ZWQgPSBnZW5lcmF0ZWQgIT0gbnVsbCA/IGdlbmVyYXRlZCA6IGZhbHNlO1xuICAgICAgdGhpcy5vYmplY3RzID0gdGhpcy5wcm9wZXJ0aWVzID0gcHJvcHMgfHwgW107XG4gICAgICBPYmouX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgT2JqLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsncHJvcGVydGllcyddO1xuXG4gICAgT2JqLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGksIGlkdCwgaW5kZW50LCBqb2luLCBsYXN0Tm9uY29tLCBub2RlLCBwcm9wLCBwcm9wcywgX2ksIF9qLCBfbGVuLCBfbGVuMTtcbiAgICAgIHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgaWYgKCFwcm9wcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKHRoaXMuZnJvbnQgPyAnKHt9KScgOiAne30nKV07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5nZW5lcmF0ZWQpIHtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBwcm9wcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIG5vZGUgPSBwcm9wc1tfaV07XG4gICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICAgICAgbm9kZS5lcnJvcignY2Fubm90IGhhdmUgYW4gaW1wbGljaXQgdmFsdWUgaW4gYW4gaW1wbGljaXQgb2JqZWN0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZHQgPSBvLmluZGVudCArPSBUQUI7XG4gICAgICBsYXN0Tm9uY29tID0gdGhpcy5sYXN0Tm9uQ29tbWVudCh0aGlzLnByb3BlcnRpZXMpO1xuICAgICAgYW5zd2VyID0gW107XG4gICAgICBmb3IgKGkgPSBfaiA9IDAsIF9sZW4xID0gcHJvcHMubGVuZ3RoOyBfaiA8IF9sZW4xOyBpID0gKytfaikge1xuICAgICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICAgIGpvaW4gPSBpID09PSBwcm9wcy5sZW5ndGggLSAxID8gJycgOiBwcm9wID09PSBsYXN0Tm9uY29tIHx8IHByb3AgaW5zdGFuY2VvZiBDb21tZW50ID8gJ1xcbicgOiAnLFxcbic7XG4gICAgICAgIGluZGVudCA9IHByb3AgaW5zdGFuY2VvZiBDb21tZW50ID8gJycgOiBpZHQ7XG4gICAgICAgIGlmIChwcm9wIGluc3RhbmNlb2YgQXNzaWduICYmIHByb3AudmFyaWFibGUgaW5zdGFuY2VvZiBWYWx1ZSAmJiBwcm9wLnZhcmlhYmxlLmhhc1Byb3BlcnRpZXMoKSkge1xuICAgICAgICAgIHByb3AudmFyaWFibGUuZXJyb3IoJ0ludmFsaWQgb2JqZWN0IGtleScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wIGluc3RhbmNlb2YgVmFsdWUgJiYgcHJvcFtcInRoaXNcIl0pIHtcbiAgICAgICAgICBwcm9wID0gbmV3IEFzc2lnbihwcm9wLnByb3BlcnRpZXNbMF0ubmFtZSwgcHJvcCwgJ29iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHByb3AgaW5zdGFuY2VvZiBDb21tZW50KSkge1xuICAgICAgICAgIGlmICghKHByb3AgaW5zdGFuY2VvZiBBc3NpZ24pKSB7XG4gICAgICAgICAgICBwcm9wID0gbmV3IEFzc2lnbihwcm9wLCBwcm9wLCAnb2JqZWN0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIChwcm9wLnZhcmlhYmxlLmJhc2UgfHwgcHJvcC52YXJpYWJsZSkuYXNLZXkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRlbnQpIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKGluZGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIGFuc3dlci5wdXNoLmFwcGx5KGFuc3dlciwgcHJvcC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSk7XG4gICAgICAgIGlmIChqb2luKSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShqb2luKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFuc3dlci51bnNoaWZ0KHRoaXMubWFrZUNvZGUoXCJ7XCIgKyAocHJvcHMubGVuZ3RoICYmICdcXG4nKSkpO1xuICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIlwiICsgKHByb3BzLmxlbmd0aCAmJiAnXFxuJyArIHRoaXMudGFiKSArIFwifVwiKSk7XG4gICAgICBpZiAodGhpcy5mcm9udCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoYW5zd2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE9iai5wcm90b3R5cGUuYXNzaWducyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBwcm9wLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMucHJvcGVydGllcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcHJvcCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKHByb3AuYXNzaWducyhuYW1lKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIE9iai5wcm90b3R5cGUuaWNlZFRvU2xvdCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgIHZhciBhY2Nlc3MsIHByb3AsIF9pLCBfbGVuLCBfcmVmMiwgX3Jlc3VsdHM7XG4gICAgICBfcmVmMiA9IHRoaXMucHJvcGVydGllcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHByb3AgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChwcm9wIGluc3RhbmNlb2YgQXNzaWduKSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCgocHJvcC52YWx1ZS5pY2VkVG9TbG90KGkpKS5hZGRBY2Nlc3MocHJvcC52YXJpYWJsZS5pY2VkVG9TbG90QWNjZXNzKCkpKTtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wIGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgICBhY2Nlc3MgPSBwcm9wLmljZWRUb1Nsb3RBY2Nlc3MoKTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKChwcm9wLmljZWRUb1Nsb3QoaSkpLmFkZEFjY2VzcyhhY2Nlc3MpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9iajtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkFyciA9IEFyciA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXJyLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQXJyKG9ianMpIHtcbiAgICAgIHRoaXMub2JqZWN0cyA9IG9ianMgfHwgW107XG4gICAgICBBcnIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQXJyLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnb2JqZWN0cyddO1xuXG4gICAgQXJyLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGNvbXBpbGVkT2JqcywgZnJhZ21lbnRzLCBpbmRleCwgb2JqLCBfaSwgX2xlbjtcbiAgICAgIGlmICghdGhpcy5vYmplY3RzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoJ1tdJyldO1xuICAgICAgfVxuICAgICAgby5pbmRlbnQgKz0gVEFCO1xuICAgICAgYW5zd2VyID0gU3BsYXQuY29tcGlsZVNwbGF0dGVkQXJyYXkobywgdGhpcy5vYmplY3RzKTtcbiAgICAgIGlmIChhbnN3ZXIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICB9XG4gICAgICBhbnN3ZXIgPSBbXTtcbiAgICAgIGNvbXBpbGVkT2JqcyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmMiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYyID0gdGhpcy5vYmplY3RzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgb2JqID0gX3JlZjJbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gob2JqLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIGZvciAoaW5kZXggPSBfaSA9IDAsIF9sZW4gPSBjb21waWxlZE9ianMubGVuZ3RoOyBfaSA8IF9sZW47IGluZGV4ID0gKytfaSkge1xuICAgICAgICBmcmFnbWVudHMgPSBjb21waWxlZE9ianNbaW5kZXhdO1xuICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiLCBcIikpO1xuICAgICAgICB9XG4gICAgICAgIGFuc3dlci5wdXNoLmFwcGx5KGFuc3dlciwgZnJhZ21lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmIChmcmFnbWVudHNUb1RleHQoYW5zd2VyKS5pbmRleE9mKCdcXG4nKSA+PSAwKSB7XG4gICAgICAgIGFuc3dlci51bnNoaWZ0KHRoaXMubWFrZUNvZGUoXCJbXFxuXCIgKyBvLmluZGVudCkpO1xuICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwiXVwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbnN3ZXIudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiW1wiKSk7XG4gICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCJdXCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfTtcblxuICAgIEFyci5wcm90b3R5cGUuYXNzaWducyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBvYmosIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5vYmplY3RzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBvYmogPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChvYmouYXNzaWducyhuYW1lKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBBcnI7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5DbGFzcyA9IENsYXNzID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDbGFzcywgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIENsYXNzKHZhcmlhYmxlLCBwYXJlbnQsIGJvZHkpIHtcbiAgICAgIHRoaXMudmFyaWFibGUgPSB2YXJpYWJsZTtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5ib2R5ID0gYm9keSAhPSBudWxsID8gYm9keSA6IG5ldyBCbG9jaztcbiAgICAgIENsYXNzLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5ib3VuZEZ1bmNzID0gW107XG4gICAgICB0aGlzLmJvZHkuY2xhc3NCb2R5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3ZhcmlhYmxlJywgJ3BhcmVudCcsICdib2R5J107XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuZGV0ZXJtaW5lTmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRlY2wsIHRhaWw7XG4gICAgICBpZiAoIXRoaXMudmFyaWFibGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBkZWNsID0gKHRhaWwgPSBsYXN0KHRoaXMudmFyaWFibGUucHJvcGVydGllcykpID8gdGFpbCBpbnN0YW5jZW9mIEFjY2VzcyAmJiB0YWlsLm5hbWUudmFsdWUgOiB0aGlzLnZhcmlhYmxlLmJhc2UudmFsdWU7XG4gICAgICBpZiAoX19pbmRleE9mLmNhbGwoU1RSSUNUX1BST1NDUklCRUQsIGRlY2wpID49IDApIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZS5lcnJvcihcImNsYXNzIHZhcmlhYmxlIG5hbWUgbWF5IG5vdCBiZSBcIiArIGRlY2wpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlY2wgJiYgKGRlY2wgPSBJREVOVElGSUVSLnRlc3QoZGVjbCkgJiYgZGVjbCk7XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5zZXRDb250ZXh0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuYm9keS50cmF2ZXJzZUNoaWxkcmVuKGZhbHNlLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmNsYXNzQm9keSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgbm9kZS52YWx1ZSA9PT0gJ3RoaXMnKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUudmFsdWUgPSBuYW1lO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBDb2RlKSB7XG4gICAgICAgICAgbm9kZS5rbGFzcyA9IG5hbWU7XG4gICAgICAgICAgaWYgKG5vZGUuYm91bmQpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNvbnRleHQgPSBuYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5hZGRCb3VuZEZ1bmN0aW9ucyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBidmFyLCBsaHMsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5ib3VuZEZ1bmNzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBidmFyID0gX3JlZjJbX2ldO1xuICAgICAgICBsaHMgPSAobmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwidGhpc1wiKSwgW25ldyBBY2Nlc3MoYnZhcildKSkuY29tcGlsZShvKTtcbiAgICAgICAgdGhpcy5jdG9yLmJvZHkudW5zaGlmdChuZXcgTGl0ZXJhbChcIlwiICsgbGhzICsgXCIgPSBcIiArICh1dGlsaXR5KCdiaW5kJykpICsgXCIoXCIgKyBsaHMgKyBcIiwgdGhpcylcIikpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuYWRkUHJvcGVydGllcyA9IGZ1bmN0aW9uKG5vZGUsIG5hbWUsIG8pIHtcbiAgICAgIHZhciBhc3NpZ24sIGJhc2UsIGV4cHJzLCBmdW5jLCBwcm9wcztcbiAgICAgIHByb3BzID0gbm9kZS5iYXNlLnByb3BlcnRpZXMuc2xpY2UoMCk7XG4gICAgICBleHBycyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9yZXN1bHRzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICB3aGlsZSAoYXNzaWduID0gcHJvcHMuc2hpZnQoKSkge1xuICAgICAgICAgIGlmIChhc3NpZ24gaW5zdGFuY2VvZiBBc3NpZ24pIHtcbiAgICAgICAgICAgIGJhc2UgPSBhc3NpZ24udmFyaWFibGUuYmFzZTtcbiAgICAgICAgICAgIGRlbGV0ZSBhc3NpZ24uY29udGV4dDtcbiAgICAgICAgICAgIGZ1bmMgPSBhc3NpZ24udmFsdWU7XG4gICAgICAgICAgICBpZiAoYmFzZS52YWx1ZSA9PT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgICAgICBpZiAodGhpcy5jdG9yKSB7XG4gICAgICAgICAgICAgICAgYXNzaWduLmVycm9yKCdjYW5ub3QgZGVmaW5lIG1vcmUgdGhhbiBvbmUgY29uc3RydWN0b3IgaW4gYSBjbGFzcycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChmdW5jLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgYXNzaWduLmVycm9yKCdjYW5ub3QgZGVmaW5lIGEgY29uc3RydWN0b3IgYXMgYSBib3VuZCBmdW5jdGlvbicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChmdW5jIGluc3RhbmNlb2YgQ29kZSkge1xuICAgICAgICAgICAgICAgIGFzc2lnbiA9IHRoaXMuY3RvciA9IGZ1bmM7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbEN0b3IgPSBvLmNsYXNzU2NvcGUuZnJlZVZhcmlhYmxlKCdjbGFzcycpO1xuICAgICAgICAgICAgICAgIGFzc2lnbiA9IG5ldyBBc3NpZ24obmV3IExpdGVyYWwodGhpcy5leHRlcm5hbEN0b3IpLCBmdW5jKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGFzc2lnbi52YXJpYWJsZVtcInRoaXNcIl0pIHtcbiAgICAgICAgICAgICAgICBmdW5jW1wic3RhdGljXCJdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NpZ24udmFyaWFibGUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwobmFtZSksIFtuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKCdwcm90b3R5cGUnKSksIG5ldyBBY2Nlc3MoYmFzZSldKTtcbiAgICAgICAgICAgICAgICBpZiAoZnVuYyBpbnN0YW5jZW9mIENvZGUgJiYgZnVuYy5ib3VuZCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5ib3VuZEZ1bmNzLnB1c2goYmFzZSk7XG4gICAgICAgICAgICAgICAgICBmdW5jLmJvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYXNzaWduKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgcmV0dXJuIGNvbXBhY3QoZXhwcnMpO1xuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUud2Fsa0JvZHkgPSBmdW5jdGlvbihuYW1lLCBvKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmF2ZXJzZUNoaWxkcmVuKGZhbHNlLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgICAgdmFyIGNvbnQsIGV4cHMsIGksIG5vZGUsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgICAgICBjb250ID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBDbGFzcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBCbG9jaykge1xuICAgICAgICAgICAgX3JlZjIgPSBleHBzID0gY2hpbGQuZXhwcmVzc2lvbnM7XG4gICAgICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgICAgICAgbm9kZSA9IF9yZWYyW2ldO1xuICAgICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEFzc2lnbiAmJiBub2RlLnZhcmlhYmxlLmxvb2tzU3RhdGljKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgbm9kZS52YWx1ZVtcInN0YXRpY1wiXSA9IHRydWU7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFZhbHVlICYmIG5vZGUuaXNPYmplY3QodHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb250ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZXhwc1tpXSA9IF90aGlzLmFkZFByb3BlcnRpZXMobm9kZSwgbmFtZSwgbyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoaWxkLmV4cHJlc3Npb25zID0gZXhwcyA9IGZsYXR0ZW4oZXhwcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb250ICYmICEoY2hpbGQgaW5zdGFuY2VvZiBDbGFzcyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5ob2lzdERpcmVjdGl2ZVByb2xvZ3VlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZXhwcmVzc2lvbnMsIGluZGV4LCBub2RlO1xuICAgICAgaW5kZXggPSAwO1xuICAgICAgZXhwcmVzc2lvbnMgPSB0aGlzLmJvZHkuZXhwcmVzc2lvbnM7XG4gICAgICB3aGlsZSAoKG5vZGUgPSBleHByZXNzaW9uc1tpbmRleF0pICYmIG5vZGUgaW5zdGFuY2VvZiBDb21tZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBWYWx1ZSAmJiBub2RlLmlzU3RyaW5nKCkpIHtcbiAgICAgICAgKytpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmRpcmVjdGl2ZXMgPSBleHByZXNzaW9ucy5zcGxpY2UoMCwgaW5kZXgpO1xuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuZW5zdXJlQ29uc3RydWN0b3IgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAoIXRoaXMuY3Rvcikge1xuICAgICAgICB0aGlzLmN0b3IgPSBuZXcgQ29kZTtcbiAgICAgICAgaWYgKHRoaXMuZXh0ZXJuYWxDdG9yKSB7XG4gICAgICAgICAgdGhpcy5jdG9yLmJvZHkucHVzaChuZXcgTGl0ZXJhbChcIlwiICsgdGhpcy5leHRlcm5hbEN0b3IgKyBcIi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXCIpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICAgIHRoaXMuY3Rvci5ib2R5LnB1c2gobmV3IExpdGVyYWwoXCJcIiArIG5hbWUgKyBcIi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdG9yLmJvZHkubWFrZVJldHVybigpO1xuICAgICAgICB0aGlzLmJvZHkuZXhwcmVzc2lvbnMudW5zaGlmdCh0aGlzLmN0b3IpO1xuICAgICAgfVxuICAgICAgdGhpcy5jdG9yLmN0b3IgPSB0aGlzLmN0b3IubmFtZSA9IG5hbWU7XG4gICAgICB0aGlzLmN0b3Iua2xhc3MgPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuY3Rvci5ub1JldHVybiA9IHRydWU7XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhcmdzLCBhcmd1bWVudHNOb2RlLCBmdW5jLCBqdW1wTm9kZSwga2xhc3MsIGxuYW1lLCBuYW1lLCBzdXBlckNsYXNzLCBfcmVmMjtcbiAgICAgIGlmIChqdW1wTm9kZSA9IHRoaXMuYm9keS5qdW1wcygpKSB7XG4gICAgICAgIGp1bXBOb2RlLmVycm9yKCdDbGFzcyBib2RpZXMgY2Fubm90IGNvbnRhaW4gcHVyZSBzdGF0ZW1lbnRzJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXJndW1lbnRzTm9kZSA9IHRoaXMuYm9keS5jb250YWlucyhpc0xpdGVyYWxBcmd1bWVudHMpKSB7XG4gICAgICAgIGFyZ3VtZW50c05vZGUuZXJyb3IoXCJDbGFzcyBib2RpZXMgc2hvdWxkbid0IHJlZmVyZW5jZSBhcmd1bWVudHNcIik7XG4gICAgICB9XG4gICAgICBuYW1lID0gdGhpcy5kZXRlcm1pbmVOYW1lKCkgfHwgJ19DbGFzcyc7XG4gICAgICBpZiAobmFtZS5yZXNlcnZlZCkge1xuICAgICAgICBuYW1lID0gXCJfXCIgKyBuYW1lO1xuICAgICAgfVxuICAgICAgbG5hbWUgPSBuZXcgTGl0ZXJhbChuYW1lKTtcbiAgICAgIGZ1bmMgPSBuZXcgQ29kZShbXSwgQmxvY2sud3JhcChbdGhpcy5ib2R5XSkpO1xuICAgICAgYXJncyA9IFtdO1xuICAgICAgby5jbGFzc1Njb3BlID0gZnVuYy5tYWtlU2NvcGUoby5zY29wZSk7XG4gICAgICB0aGlzLmhvaXN0RGlyZWN0aXZlUHJvbG9ndWUoKTtcbiAgICAgIHRoaXMuc2V0Q29udGV4dChuYW1lKTtcbiAgICAgIHRoaXMud2Fsa0JvZHkobmFtZSwgbyk7XG4gICAgICB0aGlzLmVuc3VyZUNvbnN0cnVjdG9yKG5hbWUpO1xuICAgICAgdGhpcy5hZGRCb3VuZEZ1bmN0aW9ucyhvKTtcbiAgICAgIHRoaXMuYm9keS5zcGFjZWQgPSB0cnVlO1xuICAgICAgdGhpcy5ib2R5LmV4cHJlc3Npb25zLnB1c2gobG5hbWUpO1xuICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgIHN1cGVyQ2xhc3MgPSBuZXcgTGl0ZXJhbChvLmNsYXNzU2NvcGUuZnJlZVZhcmlhYmxlKCdzdXBlcicsIGZhbHNlKSk7XG4gICAgICAgIHRoaXMuYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KG5ldyBFeHRlbmRzKGxuYW1lLCBzdXBlckNsYXNzKSk7XG4gICAgICAgIGZ1bmMucGFyYW1zLnB1c2gobmV3IFBhcmFtKHN1cGVyQ2xhc3MpKTtcbiAgICAgICAgYXJncy5wdXNoKHRoaXMucGFyZW50KTtcbiAgICAgIH1cbiAgICAgIChfcmVmMiA9IHRoaXMuYm9keS5leHByZXNzaW9ucykudW5zaGlmdC5hcHBseShfcmVmMiwgdGhpcy5kaXJlY3RpdmVzKTtcbiAgICAgIGtsYXNzID0gbmV3IFBhcmVucyhuZXcgQ2FsbChmdW5jLCBhcmdzKSk7XG4gICAgICBpZiAodGhpcy52YXJpYWJsZSkge1xuICAgICAgICBrbGFzcyA9IG5ldyBBc3NpZ24odGhpcy52YXJpYWJsZSwga2xhc3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtsYXNzLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENsYXNzO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQXNzaWduID0gQXNzaWduID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc3NpZ24sIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBBc3NpZ24odmFyaWFibGUsIHZhbHVlLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgZm9yYmlkZGVuLCBuYW1lLCBfcmVmMjtcbiAgICAgIHRoaXMudmFyaWFibGUgPSB2YXJpYWJsZTtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICBBc3NpZ24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnBhcmFtID0gb3B0aW9ucyAmJiBvcHRpb25zLnBhcmFtO1xuICAgICAgdGhpcy5zdWJwYXR0ZXJuID0gb3B0aW9ucyAmJiBvcHRpb25zLnN1YnBhdHRlcm47XG4gICAgICBmb3JiaWRkZW4gPSAoX3JlZjIgPSAobmFtZSA9IHRoaXMudmFyaWFibGUudW53cmFwQWxsKCkudmFsdWUpLCBfX2luZGV4T2YuY2FsbChTVFJJQ1RfUFJPU0NSSUJFRCwgX3JlZjIpID49IDApO1xuICAgICAgaWYgKGZvcmJpZGRlbiAmJiB0aGlzLmNvbnRleHQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGUuZXJyb3IoXCJ2YXJpYWJsZSBuYW1lIG1heSBub3QgYmUgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaWNlZGxvY2FsID0gb3B0aW9ucyAmJiBvcHRpb25zLmljZWRsb2NhbDtcbiAgICB9XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmNoaWxkcmVuID0gWyd2YXJpYWJsZScsICd2YWx1ZSddO1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiAobyAhPSBudWxsID8gby5sZXZlbCA6IHZvaWQgMCkgPT09IExFVkVMX1RPUCAmJiAodGhpcy5jb250ZXh0ICE9IG51bGwpICYmIF9faW5kZXhPZi5jYWxsKHRoaXMuY29udGV4dCwgXCI/XCIpID49IDA7XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuYXNzaWducyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzW3RoaXMuY29udGV4dCA9PT0gJ29iamVjdCcgPyAndmFsdWUnIDogJ3ZhcmlhYmxlJ10uYXNzaWducyhuYW1lKTtcbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS51bmZvbGRTb2FrID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHVuZm9sZFNvYWsobywgdGhpcywgJ3ZhcmlhYmxlJyk7XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBjb21waWxlZE5hbWUsIGlzVmFsdWUsIG1hdGNoLCBuYW1lLCB2YWwsIHZhckJhc2UsIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuICAgICAgdGhpcy52YWx1ZS5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uKCk7XG4gICAgICBpZiAoaXNWYWx1ZSA9IHRoaXMudmFyaWFibGUgaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy52YXJpYWJsZS5pc0FycmF5KCkgfHwgdGhpcy52YXJpYWJsZS5pc09iamVjdCgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVBhdHRlcm5NYXRjaChvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YXJpYWJsZS5pc1NwbGljZSgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVNwbGljZShvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9yZWYyID0gdGhpcy5jb250ZXh0KSA9PT0gJ3x8PScgfHwgX3JlZjIgPT09ICcmJj0nIHx8IF9yZWYyID09PSAnPz0nKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUNvbmRpdGlvbmFsKG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX3JlZjMgPSB0aGlzLmNvbnRleHQpID09PSAnKio9JyB8fCBfcmVmMyA9PT0gJy8vPScgfHwgX3JlZjMgPT09ICclJT0nKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVNwZWNpYWxNYXRoKG8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb21waWxlZE5hbWUgPSB0aGlzLnZhcmlhYmxlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICAgIG5hbWUgPSBmcmFnbWVudHNUb1RleHQoY29tcGlsZWROYW1lKTtcbiAgICAgIGlmICghdGhpcy5jb250ZXh0KSB7XG4gICAgICAgIHZhckJhc2UgPSB0aGlzLnZhcmlhYmxlLnVud3JhcEFsbCgpO1xuICAgICAgICBpZiAoIXZhckJhc2UuaXNBc3NpZ25hYmxlKCkpIHtcbiAgICAgICAgICB0aGlzLnZhcmlhYmxlLmVycm9yKFwiXFxcIlwiICsgKHRoaXMudmFyaWFibGUuY29tcGlsZShvKSkgKyBcIlxcXCIgY2Fubm90IGJlIGFzc2lnbmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHR5cGVvZiB2YXJCYXNlLmhhc1Byb3BlcnRpZXMgPT09IFwiZnVuY3Rpb25cIiA/IHZhckJhc2UuaGFzUHJvcGVydGllcygpIDogdm9pZCAwKSkge1xuICAgICAgICAgIGlmICh0aGlzLnBhcmFtIHx8IHRoaXMuaWNlZGxvY2FsKSB7XG4gICAgICAgICAgICBvLnNjb3BlLmFkZChuYW1lLCAndmFyJywgdGhpcy5pY2VkbG9jYWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLnNjb3BlLmZpbmQobmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy52YWx1ZSBpbnN0YW5jZW9mIENvZGUgJiYgKG1hdGNoID0gTUVUSE9EX0RFRi5leGVjKG5hbWUpKSkge1xuICAgICAgICBpZiAobWF0Y2hbMl0pIHtcbiAgICAgICAgICB0aGlzLnZhbHVlLmtsYXNzID0gbWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZS5uYW1lID0gKF9yZWY0ID0gKF9yZWY1ID0gbWF0Y2hbM10pICE9IG51bGwgPyBfcmVmNSA6IG1hdGNoWzRdKSAhPSBudWxsID8gX3JlZjQgOiBtYXRjaFs1XTtcbiAgICAgIH1cbiAgICAgIHZhbCA9IHRoaXMudmFsdWUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgICAgaWYgKHRoaXMuY29udGV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBpbGVkTmFtZS5jb25jYXQodGhpcy5tYWtlQ29kZShcIjogXCIpLCB2YWwpO1xuICAgICAgfVxuICAgICAgYW5zd2VyID0gY29tcGlsZWROYW1lLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiIFwiICsgKHRoaXMuY29udGV4dCB8fCAnPScpICsgXCIgXCIpLCB2YWwpO1xuICAgICAgaWYgKG8ubGV2ZWwgPD0gTEVWRUxfTElTVCkge1xuICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGFuc3dlcik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuY29tcGlsZVBhdHRlcm5NYXRjaCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhY2MsIGFzc2lnbnMsIGNvZGUsIGV4cGFuZGVkSWR4LCBmcmFnbWVudHMsIGksIGlkeCwgaXNPYmplY3QsIGl2YXIsIG5hbWUsIG9iaiwgb2JqZWN0cywgb2xlbiwgcmVmLCByZXN0LCB0b3AsIHZhbCwgdmFsdWUsIHZ2YXIsIHZ2YXJUZXh0LCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjUsIF9yZWY2LCBfcmVmNztcbiAgICAgIHRvcCA9IG8ubGV2ZWwgPT09IExFVkVMX1RPUDtcbiAgICAgIHZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgIG9iamVjdHMgPSB0aGlzLnZhcmlhYmxlLmJhc2Uub2JqZWN0cztcbiAgICAgIGlmICghKG9sZW4gPSBvYmplY3RzLmxlbmd0aCkpIHtcbiAgICAgICAgY29kZSA9IHZhbHVlLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgICAgaWYgKG8ubGV2ZWwgPj0gTEVWRUxfT1ApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoY29kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlzT2JqZWN0ID0gdGhpcy52YXJpYWJsZS5pc09iamVjdCgpO1xuICAgICAgaWYgKHRvcCAmJiBvbGVuID09PSAxICYmICEoKG9iaiA9IG9iamVjdHNbMF0pIGluc3RhbmNlb2YgU3BsYXQpKSB7XG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBc3NpZ24pIHtcbiAgICAgICAgICBfcmVmMiA9IG9iaiwgKF9yZWYzID0gX3JlZjIudmFyaWFibGUsIGlkeCA9IF9yZWYzLmJhc2UpLCBvYmogPSBfcmVmMi52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZHggPSBpc09iamVjdCA/IG9ialtcInRoaXNcIl0gPyBvYmoucHJvcGVydGllc1swXS5uYW1lIDogb2JqIDogbmV3IExpdGVyYWwoMCk7XG4gICAgICAgIH1cbiAgICAgICAgYWNjID0gSURFTlRJRklFUi50ZXN0KGlkeC51bndyYXAoKS52YWx1ZSB8fCAwKTtcbiAgICAgICAgdmFsdWUgPSBuZXcgVmFsdWUodmFsdWUpO1xuICAgICAgICB2YWx1ZS5wcm9wZXJ0aWVzLnB1c2gobmV3IChhY2MgPyBBY2Nlc3MgOiBJbmRleCkoaWR4KSk7XG4gICAgICAgIGlmIChfcmVmNCA9IG9iai51bndyYXAoKS52YWx1ZSwgX19pbmRleE9mLmNhbGwoUkVTRVJWRUQsIF9yZWY0KSA+PSAwKSB7XG4gICAgICAgICAgb2JqLmVycm9yKFwiYXNzaWdubWVudCB0byBhIHJlc2VydmVkIHdvcmQ6IFwiICsgKG9iai5jb21waWxlKG8pKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBc3NpZ24ob2JqLCB2YWx1ZSwgbnVsbCwge1xuICAgICAgICAgIHBhcmFtOiB0aGlzLnBhcmFtXG4gICAgICAgIH0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApO1xuICAgICAgfVxuICAgICAgdnZhciA9IHZhbHVlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICAgIHZ2YXJUZXh0ID0gZnJhZ21lbnRzVG9UZXh0KHZ2YXIpO1xuICAgICAgYXNzaWducyA9IFtdO1xuICAgICAgZXhwYW5kZWRJZHggPSBmYWxzZTtcbiAgICAgIGlmICghSURFTlRJRklFUi50ZXN0KHZ2YXJUZXh0KSB8fCB0aGlzLnZhcmlhYmxlLmFzc2lnbnModnZhclRleHQpKSB7XG4gICAgICAgIGFzc2lnbnMucHVzaChbdGhpcy5tYWtlQ29kZShcIlwiICsgKHJlZiA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKSkgKyBcIiA9IFwiKV0uY29uY2F0KF9fc2xpY2UuY2FsbCh2dmFyKSkpO1xuICAgICAgICB2dmFyID0gW3RoaXMubWFrZUNvZGUocmVmKV07XG4gICAgICAgIHZ2YXJUZXh0ID0gcmVmO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gb2JqZWN0cy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgb2JqID0gb2JqZWN0c1tpXTtcbiAgICAgICAgaWR4ID0gaTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KSB7XG4gICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEFzc2lnbikge1xuICAgICAgICAgICAgX3JlZjUgPSBvYmosIChfcmVmNiA9IF9yZWY1LnZhcmlhYmxlLCBpZHggPSBfcmVmNi5iYXNlKSwgb2JqID0gX3JlZjUudmFsdWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvYmouYmFzZSBpbnN0YW5jZW9mIFBhcmVucykge1xuICAgICAgICAgICAgICBfcmVmNyA9IG5ldyBWYWx1ZShvYmoudW53cmFwQWxsKCkpLmNhY2hlUmVmZXJlbmNlKG8pLCBvYmogPSBfcmVmN1swXSwgaWR4ID0gX3JlZjdbMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZHggPSBvYmpbXCJ0aGlzXCJdID8gb2JqLnByb3BlcnRpZXNbMF0ubmFtZSA6IG9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFleHBhbmRlZElkeCAmJiBvYmogaW5zdGFuY2VvZiBTcGxhdCkge1xuICAgICAgICAgIG5hbWUgPSBvYmoubmFtZS51bndyYXAoKS52YWx1ZTtcbiAgICAgICAgICBvYmogPSBvYmoudW53cmFwKCk7XG4gICAgICAgICAgdmFsID0gXCJcIiArIG9sZW4gKyBcIiA8PSBcIiArIHZ2YXJUZXh0ICsgXCIubGVuZ3RoID8gXCIgKyAodXRpbGl0eSgnc2xpY2UnKSkgKyBcIi5jYWxsKFwiICsgdnZhclRleHQgKyBcIiwgXCIgKyBpO1xuICAgICAgICAgIGlmIChyZXN0ID0gb2xlbiAtIGkgLSAxKSB7XG4gICAgICAgICAgICBpdmFyID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ2knKTtcbiAgICAgICAgICAgIHZhbCArPSBcIiwgXCIgKyBpdmFyICsgXCIgPSBcIiArIHZ2YXJUZXh0ICsgXCIubGVuZ3RoIC0gXCIgKyByZXN0ICsgXCIpIDogKFwiICsgaXZhciArIFwiID0gXCIgKyBpICsgXCIsIFtdKVwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgKz0gXCIpIDogW11cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsID0gbmV3IExpdGVyYWwodmFsKTtcbiAgICAgICAgICBleHBhbmRlZElkeCA9IFwiXCIgKyBpdmFyICsgXCIrK1wiO1xuICAgICAgICB9IGVsc2UgaWYgKCFleHBhbmRlZElkeCAmJiBvYmogaW5zdGFuY2VvZiBFeHBhbnNpb24pIHtcbiAgICAgICAgICBpZiAocmVzdCA9IG9sZW4gLSBpIC0gMSkge1xuICAgICAgICAgICAgaWYgKHJlc3QgPT09IDEpIHtcbiAgICAgICAgICAgICAgZXhwYW5kZWRJZHggPSBcIlwiICsgdnZhclRleHQgKyBcIi5sZW5ndGggLSAxXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpdmFyID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ2knKTtcbiAgICAgICAgICAgICAgdmFsID0gbmV3IExpdGVyYWwoXCJcIiArIGl2YXIgKyBcIiA9IFwiICsgdnZhclRleHQgKyBcIi5sZW5ndGggLSBcIiArIHJlc3QpO1xuICAgICAgICAgICAgICBleHBhbmRlZElkeCA9IFwiXCIgKyBpdmFyICsgXCIrK1wiO1xuICAgICAgICAgICAgICBhc3NpZ25zLnB1c2godmFsLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBvYmoudW53cmFwKCkudmFsdWU7XG4gICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFNwbGF0IHx8IG9iaiBpbnN0YW5jZW9mIEV4cGFuc2lvbikge1xuICAgICAgICAgICAgb2JqLmVycm9yKFwibXVsdGlwbGUgc3BsYXRzL2V4cGFuc2lvbnMgYXJlIGRpc2FsbG93ZWQgaW4gYW4gYXNzaWdubWVudFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBpZHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpZHggPSBuZXcgTGl0ZXJhbChleHBhbmRlZElkeCB8fCBpZHgpO1xuICAgICAgICAgICAgYWNjID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjYyA9IGlzT2JqZWN0ICYmIElERU5USUZJRVIudGVzdChpZHgudW53cmFwKCkudmFsdWUgfHwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh2dmFyVGV4dCksIFtuZXcgKGFjYyA/IEFjY2VzcyA6IEluZGV4KShpZHgpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChuYW1lICE9IG51bGwpICYmIF9faW5kZXhPZi5jYWxsKFJFU0VSVkVELCBuYW1lKSA+PSAwKSB7XG4gICAgICAgICAgb2JqLmVycm9yKFwiYXNzaWdubWVudCB0byBhIHJlc2VydmVkIHdvcmQ6IFwiICsgKG9iai5jb21waWxlKG8pKSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWducy5wdXNoKG5ldyBBc3NpZ24ob2JqLCB2YWwsIG51bGwsIHtcbiAgICAgICAgICBwYXJhbTogdGhpcy5wYXJhbSxcbiAgICAgICAgICBzdWJwYXR0ZXJuOiB0cnVlXG4gICAgICAgIH0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSk7XG4gICAgICB9XG4gICAgICBpZiAoISh0b3AgfHwgdGhpcy5zdWJwYXR0ZXJuKSkge1xuICAgICAgICBhc3NpZ25zLnB1c2godnZhcik7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMgPSB0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhhc3NpZ25zLCAnLCAnKTtcbiAgICAgIGlmIChvLmxldmVsIDwgTEVWRUxfTElTVCkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGZyYWdtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuY29tcGlsZUNvbmRpdGlvbmFsID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGZyYWdtZW50cywgbGVmdCwgcmlnaHQsIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLnZhcmlhYmxlLmNhY2hlUmVmZXJlbmNlKG8pLCBsZWZ0ID0gX3JlZjJbMF0sIHJpZ2h0ID0gX3JlZjJbMV07XG4gICAgICBpZiAoIWxlZnQucHJvcGVydGllcy5sZW5ndGggJiYgbGVmdC5iYXNlIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBsZWZ0LmJhc2UudmFsdWUgIT09IFwidGhpc1wiICYmICFvLnNjb3BlLmNoZWNrKGxlZnQuYmFzZS52YWx1ZSkpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZS5lcnJvcihcInRoZSB2YXJpYWJsZSBcXFwiXCIgKyBsZWZ0LmJhc2UudmFsdWUgKyBcIlxcXCIgY2FuJ3QgYmUgYXNzaWduZWQgd2l0aCBcIiArIHRoaXMuY29udGV4dCArIFwiIGJlY2F1c2UgaXQgaGFzIG5vdCBiZWVuIGRlY2xhcmVkIGJlZm9yZVwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChfX2luZGV4T2YuY2FsbCh0aGlzLmNvbnRleHQsIFwiP1wiKSA+PSAwKSB7XG4gICAgICAgIG8uaXNFeGlzdGVudGlhbEVxdWFscyA9IHRydWU7XG4gICAgICAgIHJldHVybiBuZXcgSWYobmV3IEV4aXN0ZW5jZShsZWZ0KSwgcmlnaHQsIHtcbiAgICAgICAgICB0eXBlOiAnaWYnXG4gICAgICAgIH0pLmFkZEVsc2UobmV3IEFzc2lnbihyaWdodCwgdGhpcy52YWx1ZSwgJz0nKSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJhZ21lbnRzID0gbmV3IE9wKHRoaXMuY29udGV4dC5zbGljZSgwLCAtMSksIGxlZnQsIG5ldyBBc3NpZ24ocmlnaHQsIHRoaXMudmFsdWUsICc9JykpLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgICAgaWYgKG8ubGV2ZWwgPD0gTEVWRUxfTElTVCkge1xuICAgICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGZyYWdtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5jb21waWxlU3BlY2lhbE1hdGggPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgbGVmdCwgcmlnaHQsIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLnZhcmlhYmxlLmNhY2hlUmVmZXJlbmNlKG8pLCBsZWZ0ID0gX3JlZjJbMF0sIHJpZ2h0ID0gX3JlZjJbMV07XG4gICAgICByZXR1cm4gbmV3IEFzc2lnbihsZWZ0LCBuZXcgT3AodGhpcy5jb250ZXh0LnNsaWNlKDAsIC0xKSwgcmlnaHQsIHRoaXMudmFsdWUpKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuY29tcGlsZVNwbGljZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGV4Y2x1c2l2ZSwgZnJvbSwgZnJvbURlY2wsIGZyb21SZWYsIG5hbWUsIHRvLCB2YWxEZWYsIHZhbFJlZiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIF9yZWYyID0gdGhpcy52YXJpYWJsZS5wcm9wZXJ0aWVzLnBvcCgpLnJhbmdlLCBmcm9tID0gX3JlZjIuZnJvbSwgdG8gPSBfcmVmMi50bywgZXhjbHVzaXZlID0gX3JlZjIuZXhjbHVzaXZlO1xuICAgICAgbmFtZSA9IHRoaXMudmFyaWFibGUuY29tcGlsZShvKTtcbiAgICAgIGlmIChmcm9tKSB7XG4gICAgICAgIF9yZWYzID0gdGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyhmcm9tLmNhY2hlKG8sIExFVkVMX09QKSksIGZyb21EZWNsID0gX3JlZjNbMF0sIGZyb21SZWYgPSBfcmVmM1sxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyb21EZWNsID0gZnJvbVJlZiA9ICcwJztcbiAgICAgIH1cbiAgICAgIGlmICh0bykge1xuICAgICAgICBpZiAoZnJvbSBpbnN0YW5jZW9mIFZhbHVlICYmIGZyb20uaXNTaW1wbGVOdW1iZXIoKSAmJiB0byBpbnN0YW5jZW9mIFZhbHVlICYmIHRvLmlzU2ltcGxlTnVtYmVyKCkpIHtcbiAgICAgICAgICB0byA9IHRvLmNvbXBpbGUobykgLSBmcm9tUmVmO1xuICAgICAgICAgIGlmICghZXhjbHVzaXZlKSB7XG4gICAgICAgICAgICB0byArPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0byA9IHRvLmNvbXBpbGUobywgTEVWRUxfQUNDRVNTKSArICcgLSAnICsgZnJvbVJlZjtcbiAgICAgICAgICBpZiAoIWV4Y2x1c2l2ZSkge1xuICAgICAgICAgICAgdG8gKz0gJyArIDEnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG8gPSBcIjllOVwiO1xuICAgICAgfVxuICAgICAgX3JlZjQgPSB0aGlzLnZhbHVlLmNhY2hlKG8sIExFVkVMX0xJU1QpLCB2YWxEZWYgPSBfcmVmNFswXSwgdmFsUmVmID0gX3JlZjRbMV07XG4gICAgICBhbnN3ZXIgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIltdLnNwbGljZS5hcHBseShcIiArIG5hbWUgKyBcIiwgW1wiICsgZnJvbURlY2wgKyBcIiwgXCIgKyB0byArIFwiXS5jb25jYXQoXCIpLCB2YWxEZWYsIHRoaXMubWFrZUNvZGUoXCIpKSwgXCIpLCB2YWxSZWYpO1xuICAgICAgaWYgKG8ubGV2ZWwgPiBMRVZFTF9UT1ApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGFuc3dlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQXNzaWduO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQ29kZSA9IENvZGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvZGUsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBDb2RlKHBhcmFtcywgYm9keSwgdGFnKSB7XG4gICAgICBDb2RlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXMgfHwgW107XG4gICAgICB0aGlzLmJvZHkgPSBib2R5IHx8IG5ldyBCbG9jaztcbiAgICAgIHRoaXMuaWNlZGdlbiA9IHRhZyA9PT0gJ2ljZWRnZW4nO1xuICAgICAgdGhpcy5pY2VkUGFzc2VkRGVmZXJyYWwgPSBudWxsO1xuICAgICAgdGhpcy5ib3VuZCA9IHRhZyA9PT0gJ2JvdW5kZnVuYycgfHwgdGhpcy5pY2VkZ2VuO1xuICAgICAgdGhpcy5pc0dlbmVyYXRvciA9IHRoaXMuYm9keS5jb250YWlucyhmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciBfcmVmMjtcbiAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPcCAmJiAoKF9yZWYyID0gbm9kZS5vcGVyYXRvcikgPT09ICd5aWVsZCcgfHwgX3JlZjIgPT09ICd5aWVsZConKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIENvZGUucHJvdG90eXBlLmNoaWxkcmVuID0gWydwYXJhbXMnLCAnYm9keSddO1xuXG4gICAgQ29kZS5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3RvcjtcbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuanVtcHMgPSBOTztcblxuICAgIENvZGUucHJvdG90eXBlLm1ha2VTY29wZSA9IGZ1bmN0aW9uKHBhcmVudFNjb3BlKSB7XG4gICAgICByZXR1cm4gbmV3IFNjb3BlKHBhcmVudFNjb3BlLCB0aGlzLmJvZHksIHRoaXMpO1xuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGJvdW5kZnVuYywgY29kZSwgZXhwcnMsIGksIGxpdCwgcCwgcGFyYW0sIHBhcmFtcywgcmVmLCBzcGxhdHMsIHVuaXFzLCB2YWwsIHdhc0VtcHR5LCB3cmFwcGVyLCBfaSwgX2osIF9rLCBfbCwgX2xlbiwgX2xlbjEsIF9sZW4yLCBfbGVuMywgX2xlbjQsIF9sZW41LCBfbSwgX24sIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1LCBfcmVmNiwgX3JlZjc7XG4gICAgICBpZiAodGhpcy5ib3VuZCAmJiAoKF9yZWYyID0gby5zY29wZS5tZXRob2QpICE9IG51bGwgPyBfcmVmMi5ib3VuZCA6IHZvaWQgMCkpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gby5zY29wZS5tZXRob2QuY29udGV4dDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmJvdW5kICYmICF0aGlzLmNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gJ190aGlzJztcbiAgICAgICAgd3JhcHBlciA9IG5ldyBDb2RlKFtuZXcgUGFyYW0obmV3IExpdGVyYWwodGhpcy5jb250ZXh0KSldLCBuZXcgQmxvY2soW3RoaXNdKSk7XG4gICAgICAgIGJvdW5kZnVuYyA9IG5ldyBDYWxsKHdyYXBwZXIsIFtuZXcgTGl0ZXJhbCgndGhpcycpXSk7XG4gICAgICAgIGJvdW5kZnVuYy51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcodGhpcy5sb2NhdGlvbkRhdGEpO1xuICAgICAgICByZXR1cm4gYm91bmRmdW5jLmNvbXBpbGVOb2RlKG8pO1xuICAgICAgfVxuICAgICAgby5zY29wZSA9IGRlbChvLCAnY2xhc3NTY29wZScpIHx8IHRoaXMubWFrZVNjb3BlKG8uc2NvcGUpO1xuICAgICAgby5zY29wZS5zaGFyZWQgPSBkZWwobywgJ3NoYXJlZFNjb3BlJykgfHwgdGhpcy5pY2VkZ2VuO1xuICAgICAgby5zY29wZS5pY2VkZ2VuID0gdGhpcy5pY2VkZ2VuO1xuICAgICAgby5pbmRlbnQgKz0gVEFCO1xuICAgICAgZGVsZXRlIG8uYmFyZTtcbiAgICAgIGRlbGV0ZSBvLmlzRXhpc3RlbnRpYWxFcXVhbHM7XG4gICAgICBwYXJhbXMgPSBbXTtcbiAgICAgIGV4cHJzID0gW107XG4gICAgICBfcmVmMyA9IHRoaXMucGFyYW1zO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwYXJhbSA9IF9yZWYzW19pXTtcbiAgICAgICAgaWYgKCEocGFyYW0gaW5zdGFuY2VvZiBFeHBhbnNpb24pKSB7XG4gICAgICAgICAgby5zY29wZS5wYXJhbWV0ZXIocGFyYW0uYXNSZWZlcmVuY2UobykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBfcmVmNCA9IHRoaXMucGFyYW1zO1xuICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjQubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjRbX2pdO1xuICAgICAgICBpZiAoIShwYXJhbS5zcGxhdCB8fCBwYXJhbSBpbnN0YW5jZW9mIEV4cGFuc2lvbikpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBfcmVmNSA9IHRoaXMucGFyYW1zO1xuICAgICAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmNS5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHtcbiAgICAgICAgICBwID0gX3JlZjVbX2tdLm5hbWU7XG4gICAgICAgICAgaWYgKCEoIShwYXJhbSBpbnN0YW5jZW9mIEV4cGFuc2lvbikpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBbXCJ0aGlzXCJdKSB7XG4gICAgICAgICAgICBwID0gcC5wcm9wZXJ0aWVzWzBdLm5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwLnZhbHVlKSB7XG4gICAgICAgICAgICBvLnNjb3BlLmFkZChwLnZhbHVlLCAndmFyJywgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNwbGF0cyA9IG5ldyBBc3NpZ24obmV3IFZhbHVlKG5ldyBBcnIoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfbCwgX2xlbjMsIF9yZWY2LCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVmNiA9IHRoaXMucGFyYW1zO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChfbCA9IDAsIF9sZW4zID0gX3JlZjYubGVuZ3RoOyBfbCA8IF9sZW4zOyBfbCsrKSB7XG4gICAgICAgICAgICBwID0gX3JlZjZbX2xdO1xuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChwLmFzUmVmZXJlbmNlKG8pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9KS5jYWxsKHRoaXMpKSksIG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgnYXJndW1lbnRzJykpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBfcmVmNiA9IHRoaXMucGFyYW1zO1xuICAgICAgZm9yIChfbCA9IDAsIF9sZW4zID0gX3JlZjYubGVuZ3RoOyBfbCA8IF9sZW4zOyBfbCsrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjZbX2xdO1xuICAgICAgICBpZiAocGFyYW0uaXNDb21wbGV4KCkpIHtcbiAgICAgICAgICB2YWwgPSByZWYgPSBwYXJhbS5hc1JlZmVyZW5jZShvKTtcbiAgICAgICAgICBpZiAocGFyYW0udmFsdWUpIHtcbiAgICAgICAgICAgIHZhbCA9IG5ldyBPcCgnPycsIHJlZiwgcGFyYW0udmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHBycy5wdXNoKG5ldyBBc3NpZ24obmV3IFZhbHVlKHBhcmFtLm5hbWUpLCB2YWwsICc9Jywge1xuICAgICAgICAgICAgcGFyYW06IHRydWVcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVmID0gcGFyYW07XG4gICAgICAgICAgaWYgKHBhcmFtLnZhbHVlKSB7XG4gICAgICAgICAgICBsaXQgPSBuZXcgTGl0ZXJhbChyZWYubmFtZS52YWx1ZSArICcgPT0gbnVsbCcpO1xuICAgICAgICAgICAgdmFsID0gbmV3IEFzc2lnbihuZXcgVmFsdWUocGFyYW0ubmFtZSksIHBhcmFtLnZhbHVlLCAnPScpO1xuICAgICAgICAgICAgZXhwcnMucHVzaChuZXcgSWYobGl0LCB2YWwpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzcGxhdHMpIHtcbiAgICAgICAgICBwYXJhbXMucHVzaChyZWYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3YXNFbXB0eSA9IHRoaXMuYm9keS5pc0VtcHR5KCk7XG4gICAgICBpZiAoc3BsYXRzKSB7XG4gICAgICAgIGV4cHJzLnVuc2hpZnQoc3BsYXRzKTtcbiAgICAgIH1cbiAgICAgIGlmIChleHBycy5sZW5ndGgpIHtcbiAgICAgICAgKF9yZWY3ID0gdGhpcy5ib2R5LmV4cHJlc3Npb25zKS51bnNoaWZ0LmFwcGx5KF9yZWY3LCBleHBycyk7XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSBfbSA9IDAsIF9sZW40ID0gcGFyYW1zLmxlbmd0aDsgX20gPCBfbGVuNDsgaSA9ICsrX20pIHtcbiAgICAgICAgcCA9IHBhcmFtc1tpXTtcbiAgICAgICAgcGFyYW1zW2ldID0gcC5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICAgIG8uc2NvcGUucGFyYW1ldGVyKGZyYWdtZW50c1RvVGV4dChwYXJhbXNbaV0pKTtcbiAgICAgIH1cbiAgICAgIHVuaXFzID0gW107XG4gICAgICB0aGlzLmVhY2hQYXJhbU5hbWUoZnVuY3Rpb24obmFtZSwgbm9kZSkge1xuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwodW5pcXMsIG5hbWUpID49IDApIHtcbiAgICAgICAgICBub2RlLmVycm9yKFwibXVsdGlwbGUgcGFyYW1ldGVycyBuYW1lZCAnXCIgKyBuYW1lICsgXCInXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmlxcy5wdXNoKG5hbWUpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5pY2VkSXNBdXRvY2JDb2RlKSB7XG4gICAgICAgIHdhc0VtcHR5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoISh3YXNFbXB0eSB8fCB0aGlzLm5vUmV0dXJuKSkge1xuICAgICAgICB0aGlzLmJvZHkubWFrZVJldHVybigpO1xuICAgICAgfVxuICAgICAgY29kZSA9ICdmdW5jdGlvbic7XG4gICAgICBpZiAodGhpcy5pc0dlbmVyYXRvcikge1xuICAgICAgICBjb2RlICs9ICcqJztcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN0b3IpIHtcbiAgICAgICAgY29kZSArPSAnICcgKyB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgICBjb2RlICs9ICcoJztcbiAgICAgIGFuc3dlciA9IFt0aGlzLm1ha2VDb2RlKGNvZGUpXTtcbiAgICAgIGZvciAoaSA9IF9uID0gMCwgX2xlbjUgPSBwYXJhbXMubGVuZ3RoOyBfbiA8IF9sZW41OyBpID0gKytfbikge1xuICAgICAgICBwID0gcGFyYW1zW2ldO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCIsIFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5zd2VyLnB1c2guYXBwbHkoYW5zd2VyLCBwKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoJykgeycpKTtcbiAgICAgIHRoaXMuaWNlZFBhdGNoQm9keShvKTtcbiAgICAgIGlmICghdGhpcy5ib2R5LmlzRW1wdHkoKSkge1xuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcXG5cIiksIHRoaXMuYm9keS5jb21waWxlV2l0aERlY2xhcmF0aW9ucyhvKSwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIpKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoJ30nKSk7XG4gICAgICBpZiAodGhpcy5jdG9yKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZSh0aGlzLnRhYildLmNvbmNhdChfX3NsaWNlLmNhbGwoYW5zd2VyKSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5mcm9udCB8fCAoby5sZXZlbCA+PSBMRVZFTF9BQ0NFU1MpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhhbnN3ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuZWFjaFBhcmFtTmFtZSA9IGZ1bmN0aW9uKGl0ZXJhdG9yKSB7XG4gICAgICB2YXIgcGFyYW0sIF9pLCBfbGVuLCBfcmVmMiwgX3Jlc3VsdHM7XG4gICAgICBfcmVmMiA9IHRoaXMucGFyYW1zO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmMltfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2gocGFyYW0uZWFjaE5hbWUoaXRlcmF0b3IpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUudHJhdmVyc2VDaGlsZHJlbiA9IGZ1bmN0aW9uKGNyb3NzU2NvcGUsIGZ1bmMpIHtcbiAgICAgIGlmIChjcm9zc1Njb3BlKSB7XG4gICAgICAgIHJldHVybiBDb2RlLl9fc3VwZXJfXy50cmF2ZXJzZUNoaWxkcmVuLmNhbGwodGhpcywgY3Jvc3NTY29wZSwgZnVuYyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmljZWRQYXRjaEJvZHkgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZiwgbGhzLCByLCByaHM7XG4gICAgICBpZiAodGhpcy5pY2VkRm91bmRBcmd1bWVudHMgJiYgdGhpcy5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgby5zY29wZS5hc3NpZ24oJ19hcmd1bWVudHMnLCAnYXJndW1lbnRzJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkTm9kZUZsYWcgJiYgIXRoaXMuaWNlZGdlbikge1xuICAgICAgICB0aGlzLmljZWRQYXNzZWREZWZlcnJhbCA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKGljZWRbXCJjb25zdFwiXS5wYXNzZWRfZGVmZXJyYWwpO1xuICAgICAgICBsaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwodGhpcy5pY2VkUGFzc2VkRGVmZXJyYWwpKTtcbiAgICAgICAgZiA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubnMpKTtcbiAgICAgICAgZi5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZpbmREZWZlcnJhbCkpKSk7XG4gICAgICAgIHJocyA9IG5ldyBDYWxsKGYsIFtuZXcgVmFsdWUobmV3IExpdGVyYWwoJ2FyZ3VtZW50cycpKV0pO1xuICAgICAgICB0aGlzLmJvZHkudW5zaGlmdChuZXcgQXNzaWduKGxocywgcmhzKSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkTm9kZUZsYWcgJiYgIXRoaXMuaWNlZGdlbikge1xuICAgICAgICByID0gdGhpcy5pY2VkSXNBdXRvY2JDb2RlID8gaWNlZFtcImNvbnN0XCJdLmF1dG9jYiA6IGljZWRbXCJjb25zdFwiXS5rX25vb3A7XG4gICAgICAgIHJocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChyKSk7XG4gICAgICAgIGxocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uaykpO1xuICAgICAgICByZXR1cm4gdGhpcy5ib2R5LnVuc2hpZnQobmV3IEFzc2lnbihsaHMsIHJocywgbnVsbCwge1xuICAgICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmljZWRXYWxrQXN0ID0gZnVuY3Rpb24ocGFyZW50LCBvKSB7XG4gICAgICB2YXIgY2ZfcHJldiwgZmFfcHJldiwgZmFmX3ByZXYsIGZnX3ByZXYsIHBhcmFtLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICB0aGlzLmljZWRQYXJlbnRBd2FpdCA9IHBhcmVudDtcbiAgICAgIGZhX3ByZXYgPSBvLmZvdW5kQXV0b2NiO1xuICAgICAgY2ZfcHJldiA9IG8uY3VyckZ1bmM7XG4gICAgICBmZ19wcmV2ID0gby5mb3VuZEFyZ3VtZW50cztcbiAgICAgIGZhZl9wcmV2ID0gby5mb3VuZEF3YWl0RnVuYztcbiAgICAgIG8uZm91bmRBdXRvY2IgPSBmYWxzZTtcbiAgICAgIG8uZm91bmRBcmd1bWVudHMgPSBmYWxzZTtcbiAgICAgIG8uZm91bmRBd2FpdEZ1bmMgPSBmYWxzZTtcbiAgICAgIG8uY3VyckZ1bmMgPSB0aGlzO1xuICAgICAgX3JlZjIgPSB0aGlzLnBhcmFtcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChwYXJhbS5uYW1lIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBwYXJhbS5uYW1lLnZhbHVlID09PSBpY2VkW1wiY29uc3RcIl0uYXV0b2NiKSB7XG4gICAgICAgICAgby5mb3VuZEF1dG9jYiA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIENvZGUuX19zdXBlcl9fLmljZWRXYWxrQXN0LmNhbGwodGhpcywgcGFyZW50LCBvKTtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBmYV9wcmV2O1xuICAgICAgdGhpcy5pY2VkSXNBdXRvY2JDb2RlID0gby5mb3VuZEF1dG9jYjtcbiAgICAgIHRoaXMuaWNlZEZvdW5kQXJndW1lbnRzID0gby5mb3VuZEFyZ3VtZW50cztcbiAgICAgIG8uZm91bmRBd2FpdEZ1bmMgPSBmYWZfcHJldjtcbiAgICAgIG8uZm91bmRBcmd1bWVudHMgPSBmZ19wcmV2O1xuICAgICAgby5mb3VuZEF1dG9jYiA9IGZhX3ByZXY7XG4gICAgICBvLmN1cnJGdW5jID0gY2ZfcHJldjtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuaWNlZFdhbGtBc3RMb29wcyA9IGZ1bmN0aW9uKGZsb29kKSB7XG4gICAgICBpZiAoQ29kZS5fX3N1cGVyX18uaWNlZFdhbGtBc3RMb29wcy5jYWxsKHRoaXMsIGZhbHNlKSkge1xuICAgICAgICB0aGlzLmljZWRMb29wRmxhZyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmljZWRXYWxrQ3BzUGl2b3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICBDb2RlLl9fc3VwZXJfXy5pY2VkV2Fsa0Nwc1Bpdm90cy5jYWxsKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuaWNlZENwc1Bpdm90RmxhZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5pY2VkVHJhY2VOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFydHM7XG4gICAgICBwYXJ0cyA9IFtdO1xuICAgICAgaWYgKHRoaXMua2xhc3MpIHtcbiAgICAgICAgcGFydHMucHVzaCh0aGlzLmtsYXNzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm5hbWUpIHtcbiAgICAgICAgcGFydHMucHVzaCh0aGlzLm5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJy4nKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvZGU7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5QYXJhbSA9IFBhcmFtID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQYXJhbSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFBhcmFtKG5hbWUsIHZhbHVlLCBzcGxhdCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuc3BsYXQgPSBzcGxhdDtcbiAgICAgIFBhcmFtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgaWYgKF9yZWYyID0gKG5hbWUgPSB0aGlzLm5hbWUudW53cmFwQWxsKCkudmFsdWUpLCBfX2luZGV4T2YuY2FsbChTVFJJQ1RfUFJPU0NSSUJFRCwgX3JlZjIpID49IDApIHtcbiAgICAgICAgdGhpcy5uYW1lLmVycm9yKFwicGFyYW1ldGVyIG5hbWUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBpcyBub3QgYWxsb3dlZFwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBQYXJhbS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ25hbWUnLCAndmFsdWUnXTtcblxuICAgIFBhcmFtLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICB9O1xuXG4gICAgUGFyYW0ucHJvdG90eXBlLmFzUmVmZXJlbmNlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICBpZiAodGhpcy5yZWZlcmVuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlO1xuICAgICAgfVxuICAgICAgbm9kZSA9IHRoaXMubmFtZTtcbiAgICAgIGlmIChub2RlW1widGhpc1wiXSkge1xuICAgICAgICBub2RlID0gbm9kZS5wcm9wZXJ0aWVzWzBdLm5hbWU7XG4gICAgICAgIGlmIChub2RlLnZhbHVlLnJlc2VydmVkKSB7XG4gICAgICAgICAgbm9kZSA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKG5vZGUudmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChub2RlLmlzQ29tcGxleCgpKSB7XG4gICAgICAgIG5vZGUgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZSgnYXJnJykpO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5ldyBWYWx1ZShub2RlKTtcbiAgICAgIGlmICh0aGlzLnNwbGF0KSB7XG4gICAgICAgIG5vZGUgPSBuZXcgU3BsYXQobm9kZSk7XG4gICAgICB9XG4gICAgICBub2RlLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyh0aGlzLmxvY2F0aW9uRGF0YSk7XG4gICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2UgPSBub2RlO1xuICAgIH07XG5cbiAgICBQYXJhbS5wcm90b3R5cGUuaXNDb21wbGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lLmlzQ29tcGxleCgpO1xuICAgIH07XG5cbiAgICBQYXJhbS5wcm90b3R5cGUuZWFjaE5hbWUgPSBmdW5jdGlvbihpdGVyYXRvciwgbmFtZSkge1xuICAgICAgdmFyIGF0UGFyYW0sIG5vZGUsIG9iaiwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gdGhpcy5uYW1lO1xuICAgICAgfVxuICAgICAgYXRQYXJhbSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgbm9kZSA9IG9iai5wcm9wZXJ0aWVzWzBdLm5hbWU7XG4gICAgICAgIGlmICghbm9kZS52YWx1ZS5yZXNlcnZlZCkge1xuICAgICAgICAgIHJldHVybiBpdGVyYXRvcihub2RlLnZhbHVlLCBub2RlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmIChuYW1lIGluc3RhbmNlb2YgTGl0ZXJhbCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3IobmFtZS52YWx1ZSwgbmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAobmFtZSBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhdFBhcmFtKG5hbWUpO1xuICAgICAgfVxuICAgICAgX3JlZjIgPSBuYW1lLm9iamVjdHM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG9iaiA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEFzc2lnbikge1xuICAgICAgICAgIHRoaXMuZWFjaE5hbWUoaXRlcmF0b3IsIG9iai52YWx1ZS51bndyYXAoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgU3BsYXQpIHtcbiAgICAgICAgICBub2RlID0gb2JqLm5hbWUudW53cmFwKCk7XG4gICAgICAgICAgaXRlcmF0b3Iobm9kZS52YWx1ZSwgbm9kZSk7XG4gICAgICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgICBpZiAob2JqLmlzQXJyYXkoKSB8fCBvYmouaXNPYmplY3QoKSkge1xuICAgICAgICAgICAgdGhpcy5lYWNoTmFtZShpdGVyYXRvciwgb2JqLmJhc2UpO1xuICAgICAgICAgIH0gZWxzZSBpZiAob2JqW1widGhpc1wiXSkge1xuICAgICAgICAgICAgYXRQYXJhbShvYmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVyYXRvcihvYmouYmFzZS52YWx1ZSwgb2JqLmJhc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghKG9iaiBpbnN0YW5jZW9mIEV4cGFuc2lvbikpIHtcbiAgICAgICAgICBvYmouZXJyb3IoXCJpbGxlZ2FsIHBhcmFtZXRlciBcIiArIChvYmouY29tcGlsZSgpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhcmFtO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuU3BsYXQgPSBTcGxhdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3BsYXQsIF9zdXBlcik7XG5cbiAgICBTcGxhdC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ25hbWUnXTtcblxuICAgIFNwbGF0LnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBZRVM7XG5cbiAgICBmdW5jdGlvbiBTcGxhdChuYW1lKSB7XG4gICAgICBTcGxhdC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWUuY29tcGlsZSA/IG5hbWUgOiBuZXcgTGl0ZXJhbChuYW1lKTtcbiAgICB9XG5cbiAgICBTcGxhdC5wcm90b3R5cGUuYXNzaWducyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUuYXNzaWducyhuYW1lKTtcbiAgICB9O1xuXG4gICAgU3BsYXQucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICBTcGxhdC5wcm90b3R5cGUudW53cmFwID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH07XG5cbiAgICBTcGxhdC5jb21waWxlU3BsYXR0ZWRBcnJheSA9IGZ1bmN0aW9uKG8sIGxpc3QsIGFwcGx5KSB7XG4gICAgICB2YXIgYXJncywgYmFzZSwgY29tcGlsZWROb2RlLCBjb25jYXRQYXJ0LCBmcmFnbWVudHMsIGksIGluZGV4LCBub2RlLCBfaSwgX2xlbjtcbiAgICAgIGluZGV4ID0gLTE7XG4gICAgICB3aGlsZSAoKG5vZGUgPSBsaXN0WysraW5kZXhdKSAmJiAhKG5vZGUgaW5zdGFuY2VvZiBTcGxhdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggPj0gbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG5vZGUgPSBsaXN0WzBdO1xuICAgICAgICBmcmFnbWVudHMgPSBub2RlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICAgICAgaWYgKGFwcGx5KSB7XG4gICAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW10uY29uY2F0KG5vZGUubWFrZUNvZGUoXCJcIiArICh1dGlsaXR5KCdzbGljZScpKSArIFwiLmNhbGwoXCIpLCBmcmFnbWVudHMsIG5vZGUubWFrZUNvZGUoXCIpXCIpKTtcbiAgICAgIH1cbiAgICAgIGFyZ3MgPSBsaXN0LnNsaWNlKGluZGV4KTtcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IGFyZ3MubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIG5vZGUgPSBhcmdzW2ldO1xuICAgICAgICBjb21waWxlZE5vZGUgPSBub2RlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICAgICAgYXJnc1tpXSA9IG5vZGUgaW5zdGFuY2VvZiBTcGxhdCA/IFtdLmNvbmNhdChub2RlLm1ha2VDb2RlKFwiXCIgKyAodXRpbGl0eSgnc2xpY2UnKSkgKyBcIi5jYWxsKFwiKSwgY29tcGlsZWROb2RlLCBub2RlLm1ha2VDb2RlKFwiKVwiKSkgOiBbXS5jb25jYXQobm9kZS5tYWtlQ29kZShcIltcIiksIGNvbXBpbGVkTm9kZSwgbm9kZS5tYWtlQ29kZShcIl1cIikpO1xuICAgICAgfVxuICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIG5vZGUgPSBsaXN0WzBdO1xuICAgICAgICBjb25jYXRQYXJ0ID0gbm9kZS5qb2luRnJhZ21lbnRBcnJheXMoYXJncy5zbGljZSgxKSwgJywgJyk7XG4gICAgICAgIHJldHVybiBhcmdzWzBdLmNvbmNhdChub2RlLm1ha2VDb2RlKFwiLmNvbmNhdChcIiksIGNvbmNhdFBhcnQsIG5vZGUubWFrZUNvZGUoXCIpXCIpKTtcbiAgICAgIH1cbiAgICAgIGJhc2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgICAgX3JlZjIgPSBsaXN0LnNsaWNlKDAsIGluZGV4KTtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjIubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgbm9kZSA9IF9yZWYyW19qXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKG5vZGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgICAgYmFzZSA9IGxpc3RbMF0uam9pbkZyYWdtZW50QXJyYXlzKGJhc2UsICcsICcpO1xuICAgICAgY29uY2F0UGFydCA9IGxpc3RbaW5kZXhdLmpvaW5GcmFnbWVudEFycmF5cyhhcmdzLCAnLCAnKTtcbiAgICAgIHJldHVybiBbXS5jb25jYXQobGlzdFswXS5tYWtlQ29kZShcIltcIiksIGJhc2UsIGxpc3RbaW5kZXhdLm1ha2VDb2RlKFwiXS5jb25jYXQoXCIpLCBjb25jYXRQYXJ0LCAobGFzdChsaXN0KSkubWFrZUNvZGUoXCIpXCIpKTtcbiAgICB9O1xuXG4gICAgU3BsYXQucHJvdG90eXBlLmljZWRUb1Nsb3QgPSBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gbmV3IFNsb3QoaSwgbmV3IFZhbHVlKHRoaXMubmFtZSksIG51bGwsIHRydWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3BsYXQ7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5FeHBhbnNpb24gPSBFeHBhbnNpb24gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV4cGFuc2lvbiwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEV4cGFuc2lvbigpIHtcbiAgICAgIHJldHVybiBFeHBhbnNpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgRXhwYW5zaW9uLnByb3RvdHlwZS5pc0NvbXBsZXggPSBOTztcblxuICAgIEV4cGFuc2lvbi5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5lcnJvcignRXhwYW5zaW9uIG11c3QgYmUgdXNlZCBpbnNpZGUgYSBkZXN0cnVjdHVyaW5nIGFzc2lnbm1lbnQgb3IgcGFyYW1ldGVyIGxpc3QnKTtcbiAgICB9O1xuXG4gICAgRXhwYW5zaW9uLnByb3RvdHlwZS5hc1JlZmVyZW5jZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBFeHBhbnNpb24ucHJvdG90eXBlLmVhY2hOYW1lID0gZnVuY3Rpb24oaXRlcmF0b3IpIHt9O1xuXG4gICAgcmV0dXJuIEV4cGFuc2lvbjtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLldoaWxlID0gV2hpbGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdoaWxlLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gV2hpbGUoY29uZGl0aW9uLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLmNvbmRpdGlvbiA9IChvcHRpb25zICE9IG51bGwgPyBvcHRpb25zLmludmVydCA6IHZvaWQgMCkgPyBjb25kaXRpb24uaW52ZXJ0KCkgOiBjb25kaXRpb247XG4gICAgICB0aGlzLmd1YXJkID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5ndWFyZCA6IHZvaWQgMDtcbiAgICB9XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2NvbmRpdGlvbicsICdndWFyZCcsICdib2R5J107XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBZRVM7XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuaXNMb29wID0gWUVTO1xuXG4gICAgV2hpbGUucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgcmV0dXJuIFdoaWxlLl9fc3VwZXJfXy5tYWtlUmV0dXJuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJldHVybnMgPSAhdGhpcy5qdW1wcyh7XG4gICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5hZGRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBleHByZXNzaW9ucywganVtcE5vZGUsIG5vZGUsIF9pLCBfbGVuO1xuICAgICAgZXhwcmVzc2lvbnMgPSB0aGlzLmJvZHkuZXhwcmVzc2lvbnM7XG4gICAgICBpZiAoIWV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGV4cHJlc3Npb25zLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG5vZGUgPSBleHByZXNzaW9uc1tfaV07XG4gICAgICAgIGlmIChqdW1wTm9kZSA9IG5vZGUuanVtcHMoe1xuICAgICAgICAgIGxvb3A6IHRydWVcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICByZXR1cm4ganVtcE5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgYm9keSwgcnZhciwgc2V0O1xuICAgICAgdGhpcy5jb25kaXRpb24uaWNlZFN0YXRlbWVudEFzc2VydGlvbigpO1xuICAgICAgaWYgKHRoaXMuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljZWRDb21waWxlSWNlZChvKTtcbiAgICAgIH1cbiAgICAgIG8uaW5kZW50ICs9IFRBQjtcbiAgICAgIHNldCA9ICcnO1xuICAgICAgYm9keSA9IHRoaXMuYm9keTtcbiAgICAgIGlmIChib2R5LmlzRW1wdHkoKSkge1xuICAgICAgICBib2R5ID0gdGhpcy5tYWtlQ29kZSgnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5yZXR1cm5zKSB7XG4gICAgICAgICAgYm9keS5tYWtlUmV0dXJuKHJ2YXIgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVzdWx0cycpKTtcbiAgICAgICAgICBzZXQgPSBcIlwiICsgdGhpcy50YWIgKyBydmFyICsgXCIgPSBbXTtcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ndWFyZCkge1xuICAgICAgICAgIGlmIChib2R5LmV4cHJlc3Npb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGJvZHkuZXhwcmVzc2lvbnMudW5zaGlmdChuZXcgSWYoKG5ldyBQYXJlbnModGhpcy5ndWFyZCkpLmludmVydCgpLCBuZXcgTGl0ZXJhbChcImNvbnRpbnVlXCIpKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmd1YXJkKSB7XG4gICAgICAgICAgICAgIGJvZHkgPSBCbG9jay53cmFwKFtuZXcgSWYodGhpcy5ndWFyZCwgYm9keSldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYm9keSA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpLCBib2R5LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYikpO1xuICAgICAgfVxuICAgICAgYW5zd2VyID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoc2V0ICsgdGhpcy50YWIgKyBcIndoaWxlIChcIiksIHRoaXMuY29uZGl0aW9uLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTiksIHRoaXMubWFrZUNvZGUoXCIpIHtcIiksIGJvZHksIHRoaXMubWFrZUNvZGUoXCJ9XCIpKTtcbiAgICAgIGlmICh0aGlzLnJldHVybnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcpIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIGljZWRbXCJjb25zdFwiXS5hdXRvY2IgKyBcIihcIiArIHJ2YXIgKyBcIik7XCIpKTtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwicmV0dXJuO1wiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcInJldHVybiBcIiArIHJ2YXIgKyBcIjtcIikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH07XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuaWNlZFdyYXAgPSBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgYm9keSwgYnJlYWtfYXNzaWduLCBicmVha19pZCwgY29uZCwgY29uZGl0aW9uLCBjb250aW51ZV9hc3NpZ24sIGNvbnRpbnVlX2Jsb2NrLCBjb250aW51ZV9ibG9ja19pbm5lciwgY29udGludWVfYm9keSwgY29udGludWVfZm4sIGNvbnRpbnVlX2lkLCBndWFyZF9pZiwga19pZCwga19wYXJhbSwgbmV4dF9hc3NpZ24sIG5leHRfaWQsIG91dFN0YXRlbWVudHMsIHRvcF9hc3NpZ24sIHRvcF9ibG9jaywgdG9wX2JvZHksIHRvcF9jYWxsLCB0b3BfZnVuYywgdG9wX2lkLCB0b3Bfc3RhdGVtZW50cywgdHJhbXA7XG4gICAgICBjb25kaXRpb24gPSBkLmNvbmRpdGlvbjtcbiAgICAgIGJvZHkgPSBkLmJvZHk7XG4gICAgICBvdXRTdGF0ZW1lbnRzID0gW107XG4gICAgICB0b3BfaWQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLnRfd2hpbGUpKTtcbiAgICAgIGtfaWQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmspKTtcbiAgICAgIGtfcGFyYW0gPSBuZXcgUGFyYW0obmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmspKTtcbiAgICAgIGJyZWFrX2lkID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5iX3doaWxlKSk7XG4gICAgICBicmVha19hc3NpZ24gPSBuZXcgQXNzaWduKGJyZWFrX2lkLCBrX2lkLCBudWxsLCB7XG4gICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjb250aW51ZV9pZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uY193aGlsZSkpO1xuICAgICAgY29udGludWVfYmxvY2tfaW5uZXIgPSBuZXcgQmxvY2soW25ldyBDYWxsKHRvcF9pZCwgW2tfaWRdKV0pO1xuICAgICAgaWYgKGQuc3RlcCkge1xuICAgICAgICBjb250aW51ZV9ibG9ja19pbm5lci51bnNoaWZ0KGQuc3RlcCk7XG4gICAgICB9XG4gICAgICBjb250aW51ZV9mbiA9IG5ldyBDb2RlKFtdLCBjb250aW51ZV9ibG9ja19pbm5lcik7XG4gICAgICB0cmFtcCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubnMpKTtcbiAgICAgIHRyYW1wLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0udHJhbXBvbGluZSkpKSk7XG4gICAgICBjb250aW51ZV9ibG9jayA9IG5ldyBCbG9jayhbbmV3IENhbGwodHJhbXAsIFtjb250aW51ZV9mbl0pXSk7XG4gICAgICBjb250aW51ZV9ib2R5ID0gbmV3IENvZGUoW10sIGNvbnRpbnVlX2Jsb2NrLCAnaWNlZGdlbicpO1xuICAgICAgY29udGludWVfYXNzaWduID0gbmV3IEFzc2lnbihjb250aW51ZV9pZCwgY29udGludWVfYm9keSwgbnVsbCwge1xuICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgIH0pO1xuICAgICAgbmV4dF9pZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubl93aGlsZSkpO1xuICAgICAgbmV4dF9hc3NpZ24gPSBuZXcgQXNzaWduKG5leHRfaWQsIGNvbnRpbnVlX2lkLCBudWxsLCB7XG4gICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjb25kID0gbmV3IElmKGNvbmRpdGlvbi5pbnZlcnQoKSwgbmV3IEJsb2NrKFtuZXcgQ2FsbChicmVha19pZCwgW10pXSkpO1xuICAgICAgaWYgKGQuZ3VhcmQpIHtcbiAgICAgICAgY29udGludWVfYmxvY2sgPSBuZXcgQmxvY2soW25ldyBDYWxsKGNvbnRpbnVlX2lkLCBbXSldKTtcbiAgICAgICAgZ3VhcmRfaWYgPSBuZXcgSWYoZC5ndWFyZCwgYm9keSk7XG4gICAgICAgIGd1YXJkX2lmLmFkZEVsc2UoY29udGludWVfYmxvY2spO1xuICAgICAgICBjb25kLmFkZEVsc2UobmV3IEJsb2NrKFtkLnByZV9ib2R5LCBndWFyZF9pZl0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmQuYWRkRWxzZShuZXcgQmxvY2soW2QucHJlX2JvZHksIGJvZHldKSk7XG4gICAgICB9XG4gICAgICB0b3BfYm9keSA9IG5ldyBCbG9jayhbYnJlYWtfYXNzaWduLCBjb250aW51ZV9hc3NpZ24sIG5leHRfYXNzaWduLCBjb25kXSk7XG4gICAgICB0b3BfZnVuYyA9IG5ldyBDb2RlKFtrX3BhcmFtXSwgdG9wX2JvZHksICdpY2VkZ2VuJyk7XG4gICAgICB0b3BfYXNzaWduID0gbmV3IEFzc2lnbih0b3BfaWQsIHRvcF9mdW5jLCBudWxsLCB7XG4gICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB0b3BfY2FsbCA9IG5ldyBDYWxsKHRvcF9pZCwgW2tfaWRdKTtcbiAgICAgIHRvcF9zdGF0ZW1lbnRzID0gW107XG4gICAgICBpZiAoZC5pbml0KSB7XG4gICAgICAgIHRvcF9zdGF0ZW1lbnRzID0gdG9wX3N0YXRlbWVudHMuY29uY2F0KGQuaW5pdCk7XG4gICAgICB9XG4gICAgICB0b3Bfc3RhdGVtZW50cyA9IHRvcF9zdGF0ZW1lbnRzLmNvbmNhdChbdG9wX2Fzc2lnbiwgdG9wX2NhbGxdKTtcbiAgICAgIHJldHVybiB0b3BfYmxvY2sgPSBuZXcgQmxvY2sodG9wX3N0YXRlbWVudHMpO1xuICAgIH07XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuaWNlZENhbGxDb250aW51YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJvZHkuaWNlZFRocmVhZFJldHVybihuZXcgSWNlZFRhaWxDYWxsKGljZWRbXCJjb25zdFwiXS5uX3doaWxlKSk7XG4gICAgfTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5pY2VkQ29tcGlsZUljZWQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYiwgb3B0cztcbiAgICAgIG9wdHMgPSB7XG4gICAgICAgIGNvbmRpdGlvbjogdGhpcy5jb25kaXRpb24sXG4gICAgICAgIGJvZHk6IHRoaXMuYm9keSxcbiAgICAgICAgZ3VhcmQ6IHRoaXMuZ3VhcmRcbiAgICAgIH07XG4gICAgICBiID0gdGhpcy5pY2VkV3JhcChvcHRzKTtcbiAgICAgIHJldHVybiBiLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2hpbGU7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5PcCA9IE9wID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHZhciBDT05WRVJTSU9OUywgSU5WRVJTSU9OUztcblxuICAgIF9fZXh0ZW5kcyhPcCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIE9wKG9wLCBmaXJzdCwgc2Vjb25kLCBmbGlwKSB7XG4gICAgICBPcC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIGlmIChvcCA9PT0gJ2luJykge1xuICAgICAgICByZXR1cm4gbmV3IEluKGZpcnN0LCBzZWNvbmQpO1xuICAgICAgfVxuICAgICAgaWYgKG9wID09PSAnZG8nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlRG8oZmlyc3QpO1xuICAgICAgfVxuICAgICAgaWYgKG9wID09PSAnbmV3Jykge1xuICAgICAgICBpZiAoZmlyc3QgaW5zdGFuY2VvZiBDYWxsICYmICFmaXJzdFtcImRvXCJdICYmICFmaXJzdC5pc05ldykge1xuICAgICAgICAgIHJldHVybiBmaXJzdC5uZXdJbnN0YW5jZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJzdCBpbnN0YW5jZW9mIENvZGUgJiYgZmlyc3QuYm91bmQgfHwgZmlyc3RbXCJkb1wiXSkge1xuICAgICAgICAgIGZpcnN0ID0gbmV3IFBhcmVucyhmaXJzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMub3BlcmF0b3IgPSBDT05WRVJTSU9OU1tvcF0gfHwgb3A7XG4gICAgICB0aGlzLmZpcnN0ID0gZmlyc3Q7XG4gICAgICB0aGlzLnNlY29uZCA9IHNlY29uZDtcbiAgICAgIHRoaXMuZmxpcCA9ICEhZmxpcDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIENPTlZFUlNJT05TID0ge1xuICAgICAgJz09JzogJz09PScsXG4gICAgICAnIT0nOiAnIT09JyxcbiAgICAgICdvZic6ICdpbicsXG4gICAgICAneWllbGRmcm9tJzogJ3lpZWxkKidcbiAgICB9O1xuXG4gICAgSU5WRVJTSU9OUyA9IHtcbiAgICAgICchPT0nOiAnPT09JyxcbiAgICAgICc9PT0nOiAnIT09J1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2ZpcnN0JywgJ3NlY29uZCddO1xuXG4gICAgT3AucHJvdG90eXBlLmlzU2ltcGxlTnVtYmVyID0gTk87XG5cbiAgICBPcC5wcm90b3R5cGUuaXNZaWVsZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChfcmVmMiA9IHRoaXMub3BlcmF0b3IpID09PSAneWllbGQnIHx8IF9yZWYyID09PSAneWllbGQqJztcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmlzVW5hcnkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5zZWNvbmQ7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5pc0NvbXBsZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAhKHRoaXMuaXNVbmFyeSgpICYmICgoX3JlZjIgPSB0aGlzLm9wZXJhdG9yKSA9PT0gJysnIHx8IF9yZWYyID09PSAnLScpKSB8fCB0aGlzLmZpcnN0LmlzQ29tcGxleCgpO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuaXNDaGFpbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoX3JlZjIgPSB0aGlzLm9wZXJhdG9yKSA9PT0gJzwnIHx8IF9yZWYyID09PSAnPicgfHwgX3JlZjIgPT09ICc+PScgfHwgX3JlZjIgPT09ICc8PScgfHwgX3JlZjIgPT09ICc9PT0nIHx8IF9yZWYyID09PSAnIT09JztcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFsbEludmVydGFibGUsIGN1cnIsIGZzdCwgb3AsIF9yZWYyO1xuICAgICAgaWYgKHRoaXMuaXNDaGFpbmFibGUoKSAmJiB0aGlzLmZpcnN0LmlzQ2hhaW5hYmxlKCkpIHtcbiAgICAgICAgYWxsSW52ZXJ0YWJsZSA9IHRydWU7XG4gICAgICAgIGN1cnIgPSB0aGlzO1xuICAgICAgICB3aGlsZSAoY3VyciAmJiBjdXJyLm9wZXJhdG9yKSB7XG4gICAgICAgICAgYWxsSW52ZXJ0YWJsZSAmJiAoYWxsSW52ZXJ0YWJsZSA9IGN1cnIub3BlcmF0b3IgaW4gSU5WRVJTSU9OUyk7XG4gICAgICAgICAgY3VyciA9IGN1cnIuZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhbGxJbnZlcnRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQYXJlbnModGhpcykuaW52ZXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyciA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChjdXJyICYmIGN1cnIub3BlcmF0b3IpIHtcbiAgICAgICAgICBjdXJyLmludmVydCA9ICFjdXJyLmludmVydDtcbiAgICAgICAgICBjdXJyLm9wZXJhdG9yID0gSU5WRVJTSU9OU1tjdXJyLm9wZXJhdG9yXTtcbiAgICAgICAgICBjdXJyID0gY3Vyci5maXJzdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSBpZiAob3AgPSBJTlZFUlNJT05TW3RoaXMub3BlcmF0b3JdKSB7XG4gICAgICAgIHRoaXMub3BlcmF0b3IgPSBvcDtcbiAgICAgICAgaWYgKHRoaXMuZmlyc3QudW53cmFwKCkgaW5zdGFuY2VvZiBPcCkge1xuICAgICAgICAgIHRoaXMuZmlyc3QuaW52ZXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyZW5zKHRoaXMpLmludmVydCgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wZXJhdG9yID09PSAnIScgJiYgKGZzdCA9IHRoaXMuZmlyc3QudW53cmFwKCkpIGluc3RhbmNlb2YgT3AgJiYgKChfcmVmMiA9IGZzdC5vcGVyYXRvcikgPT09ICchJyB8fCBfcmVmMiA9PT0gJ2luJyB8fCBfcmVmMiA9PT0gJ2luc3RhbmNlb2YnKSkge1xuICAgICAgICByZXR1cm4gZnN0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPcCgnIScsIHRoaXMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUudW5mb2xkU29hayA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoKF9yZWYyID0gdGhpcy5vcGVyYXRvcikgPT09ICcrKycgfHwgX3JlZjIgPT09ICctLScgfHwgX3JlZjIgPT09ICdkZWxldGUnKSAmJiB1bmZvbGRTb2FrKG8sIHRoaXMsICdmaXJzdCcpO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuZ2VuZXJhdGVEbyA9IGZ1bmN0aW9uKGV4cCkge1xuICAgICAgdmFyIGNhbGwsIGZ1bmMsIHBhcmFtLCBwYXNzZWRQYXJhbXMsIHJlZiwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgcGFzc2VkUGFyYW1zID0gW107XG4gICAgICBmdW5jID0gZXhwIGluc3RhbmNlb2YgQXNzaWduICYmIChyZWYgPSBleHAudmFsdWUudW53cmFwKCkpIGluc3RhbmNlb2YgQ29kZSA/IHJlZiA6IGV4cDtcbiAgICAgIF9yZWYyID0gZnVuYy5wYXJhbXMgfHwgW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAocGFyYW0udmFsdWUpIHtcbiAgICAgICAgICBwYXNzZWRQYXJhbXMucHVzaChwYXJhbS52YWx1ZSk7XG4gICAgICAgICAgZGVsZXRlIHBhcmFtLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhc3NlZFBhcmFtcy5wdXNoKHBhcmFtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FsbCA9IG5ldyBDYWxsKGV4cCwgcGFzc2VkUGFyYW1zKTtcbiAgICAgIGNhbGxbXCJkb1wiXSA9IHRydWU7XG4gICAgICByZXR1cm4gY2FsbDtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgaXNDaGFpbiwgbGhzLCByaHMsIF9yZWYyLCBfcmVmMztcbiAgICAgIGlzQ2hhaW4gPSB0aGlzLmlzQ2hhaW5hYmxlKCkgJiYgdGhpcy5maXJzdC5pc0NoYWluYWJsZSgpO1xuICAgICAgaWYgKCFpc0NoYWluKSB7XG4gICAgICAgIHRoaXMuZmlyc3QuZnJvbnQgPSB0aGlzLmZyb250O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3BlcmF0b3IgPT09ICdkZWxldGUnICYmIG8uc2NvcGUuY2hlY2sodGhpcy5maXJzdC51bndyYXBBbGwoKS52YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5lcnJvcignZGVsZXRlIG9wZXJhbmQgbWF5IG5vdCBiZSBhcmd1bWVudCBvciB2YXInKTtcbiAgICAgIH1cbiAgICAgIGlmICgoKF9yZWYyID0gdGhpcy5vcGVyYXRvcikgPT09ICctLScgfHwgX3JlZjIgPT09ICcrKycpICYmIChfcmVmMyA9IHRoaXMuZmlyc3QudW53cmFwQWxsKCkudmFsdWUsIF9faW5kZXhPZi5jYWxsKFNUUklDVF9QUk9TQ1JJQkVELCBfcmVmMykgPj0gMCkpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcImNhbm5vdCBpbmNyZW1lbnQvZGVjcmVtZW50IFxcXCJcIiArICh0aGlzLmZpcnN0LnVud3JhcEFsbCgpLnZhbHVlKSArIFwiXFxcIlwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzWWllbGQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlWWllbGQobyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc1VuYXJ5KCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVVuYXJ5KG8pO1xuICAgICAgfVxuICAgICAgaWYgKGlzQ2hhaW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUNoYWluKG8pO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0aGlzLm9wZXJhdG9yKSB7XG4gICAgICAgIGNhc2UgJz8nOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVFeGlzdGVuY2Uobyk7XG4gICAgICAgIGNhc2UgJyoqJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlUG93ZXIobyk7XG4gICAgICAgIGNhc2UgJy8vJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlRmxvb3JEaXZpc2lvbihvKTtcbiAgICAgICAgY2FzZSAnJSUnOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVNb2R1bG8obyk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGhzID0gdGhpcy5maXJzdC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApO1xuICAgICAgICAgIHJocyA9IHRoaXMuc2Vjb25kLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCk7XG4gICAgICAgICAgYW5zd2VyID0gW10uY29uY2F0KGxocywgdGhpcy5tYWtlQ29kZShcIiBcIiArIHRoaXMub3BlcmF0b3IgKyBcIiBcIiksIHJocyk7XG4gICAgICAgICAgaWYgKG8ubGV2ZWwgPD0gTEVWRUxfT1ApIHtcbiAgICAgICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhhbnN3ZXIpO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVDaGFpbiA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBmcmFnbWVudHMsIGZzdCwgc2hhcmVkLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5maXJzdC5zZWNvbmQuY2FjaGUobyksIHRoaXMuZmlyc3Quc2Vjb25kID0gX3JlZjJbMF0sIHNoYXJlZCA9IF9yZWYyWzFdO1xuICAgICAgZnN0ID0gdGhpcy5maXJzdC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApO1xuICAgICAgZnJhZ21lbnRzID0gZnN0LmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiIFwiICsgKHRoaXMuaW52ZXJ0ID8gJyYmJyA6ICd8fCcpICsgXCIgXCIpLCBzaGFyZWQuY29tcGlsZVRvRnJhZ21lbnRzKG8pLCB0aGlzLm1ha2VDb2RlKFwiIFwiICsgdGhpcy5vcGVyYXRvciArIFwiIFwiKSwgdGhpcy5zZWNvbmQuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKSk7XG4gICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoZnJhZ21lbnRzKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVFeGlzdGVuY2UgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZnN0LCByZWY7XG4gICAgICBpZiAodGhpcy5maXJzdC5pc0NvbXBsZXgoKSkge1xuICAgICAgICByZWYgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJykpO1xuICAgICAgICBmc3QgPSBuZXcgUGFyZW5zKG5ldyBBc3NpZ24ocmVmLCB0aGlzLmZpcnN0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmc3QgPSB0aGlzLmZpcnN0O1xuICAgICAgICByZWYgPSBmc3Q7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IElmKG5ldyBFeGlzdGVuY2UoZnN0KSwgcmVmLCB7XG4gICAgICAgIHR5cGU6ICdpZidcbiAgICAgIH0pLmFkZEVsc2UodGhpcy5zZWNvbmQpLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVVbmFyeSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBvcCwgcGFydHMsIHBsdXNNaW51cztcbiAgICAgIHBhcnRzID0gW107XG4gICAgICBvcCA9IHRoaXMub3BlcmF0b3I7XG4gICAgICBwYXJ0cy5wdXNoKFt0aGlzLm1ha2VDb2RlKG9wKV0pO1xuICAgICAgaWYgKG9wID09PSAnIScgJiYgdGhpcy5maXJzdCBpbnN0YW5jZW9mIEV4aXN0ZW5jZSkge1xuICAgICAgICB0aGlzLmZpcnN0Lm5lZ2F0ZWQgPSAhdGhpcy5maXJzdC5uZWdhdGVkO1xuICAgICAgICByZXR1cm4gdGhpcy5maXJzdC5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICB9XG4gICAgICBpZiAoby5sZXZlbCA+PSBMRVZFTF9BQ0NFU1MpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgUGFyZW5zKHRoaXMpKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICB9XG4gICAgICBwbHVzTWludXMgPSBvcCA9PT0gJysnIHx8IG9wID09PSAnLSc7XG4gICAgICBpZiAoKG9wID09PSAnbmV3JyB8fCBvcCA9PT0gJ3R5cGVvZicgfHwgb3AgPT09ICdkZWxldGUnKSB8fCBwbHVzTWludXMgJiYgdGhpcy5maXJzdCBpbnN0YW5jZW9mIE9wICYmIHRoaXMuZmlyc3Qub3BlcmF0b3IgPT09IG9wKSB7XG4gICAgICAgIHBhcnRzLnB1c2goW3RoaXMubWFrZUNvZGUoJyAnKV0pO1xuICAgICAgfVxuICAgICAgaWYgKChwbHVzTWludXMgJiYgdGhpcy5maXJzdCBpbnN0YW5jZW9mIE9wKSB8fCAob3AgPT09ICduZXcnICYmIHRoaXMuZmlyc3QuaXNTdGF0ZW1lbnQobykpKSB7XG4gICAgICAgIHRoaXMuZmlyc3QgPSBuZXcgUGFyZW5zKHRoaXMuZmlyc3QpO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaCh0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCkpO1xuICAgICAgaWYgKHRoaXMuZmxpcCkge1xuICAgICAgICBwYXJ0cy5yZXZlcnNlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5qb2luRnJhZ21lbnRBcnJheXMocGFydHMsICcnKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVZaWVsZCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBvcCwgcGFydHM7XG4gICAgICBwYXJ0cyA9IFtdO1xuICAgICAgb3AgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgaWYgKG8uc2NvcGUucGFyZW50ID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5lcnJvcigneWllbGQgc3RhdGVtZW50cyBtdXN0IG9jY3VyIHdpdGhpbiBhIGZ1bmN0aW9uIGdlbmVyYXRvci4nKTtcbiAgICAgIH1cbiAgICAgIGlmIChfX2luZGV4T2YuY2FsbChPYmplY3Qua2V5cyh0aGlzLmZpcnN0KSwgJ2V4cHJlc3Npb24nKSA+PSAwKSB7XG4gICAgICAgIGlmICh0aGlzLmZpcnN0LmV4cHJlc3Npb24gIT0gbnVsbCkge1xuICAgICAgICAgIHBhcnRzLnB1c2godGhpcy5maXJzdC5leHByZXNzaW9uLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0cy5wdXNoKFt0aGlzLm1ha2VDb2RlKFwiKFwiICsgb3AgKyBcIiBcIildKTtcbiAgICAgICAgcGFydHMucHVzaCh0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCkpO1xuICAgICAgICBwYXJ0cy5wdXNoKFt0aGlzLm1ha2VDb2RlKFwiKVwiKV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKHBhcnRzLCAnJyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlUG93ZXIgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgcG93O1xuICAgICAgcG93ID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKCdNYXRoJyksIFtuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKCdwb3cnKSldKTtcbiAgICAgIHJldHVybiBuZXcgQ2FsbChwb3csIFt0aGlzLmZpcnN0LCB0aGlzLnNlY29uZF0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVGbG9vckRpdmlzaW9uID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGRpdiwgZmxvb3I7XG4gICAgICBmbG9vciA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgnTWF0aCcpLCBbbmV3IEFjY2VzcyhuZXcgTGl0ZXJhbCgnZmxvb3InKSldKTtcbiAgICAgIGRpdiA9IG5ldyBPcCgnLycsIHRoaXMuZmlyc3QsIHRoaXMuc2Vjb25kKTtcbiAgICAgIHJldHVybiBuZXcgQ2FsbChmbG9vciwgW2Rpdl0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVNb2R1bG8gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgbW9kO1xuICAgICAgbW9kID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHV0aWxpdHkoJ21vZHVsbycpKSk7XG4gICAgICByZXR1cm4gbmV3IENhbGwobW9kLCBbdGhpcy5maXJzdCwgdGhpcy5zZWNvbmRdKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKGlkdCkge1xuICAgICAgcmV0dXJuIE9wLl9fc3VwZXJfXy50b1N0cmluZy5jYWxsKHRoaXMsIGlkdCwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnICsgdGhpcy5vcGVyYXRvcik7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5pY2VkV3JhcENvbnRpbnVhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWNlZENhbGxDb250aW51YXRpb25GbGFnO1xuICAgIH07XG5cbiAgICByZXR1cm4gT3A7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5JbiA9IEluID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbiwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEluKG9iamVjdCwgYXJyYXkpIHtcbiAgICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0O1xuICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuICAgICAgSW4uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW4ucHJvdG90eXBlLmNoaWxkcmVuID0gWydvYmplY3QnLCAnYXJyYXknXTtcblxuICAgIEluLnByb3RvdHlwZS5pbnZlcnQgPSBORUdBVEU7XG5cbiAgICBJbi5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgaGFzU3BsYXQsIG9iaiwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgaWYgKHRoaXMuYXJyYXkgaW5zdGFuY2VvZiBWYWx1ZSAmJiB0aGlzLmFycmF5LmlzQXJyYXkoKSAmJiB0aGlzLmFycmF5LmJhc2Uub2JqZWN0cy5sZW5ndGgpIHtcbiAgICAgICAgX3JlZjIgPSB0aGlzLmFycmF5LmJhc2Uub2JqZWN0cztcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIG9iaiA9IF9yZWYyW19pXTtcbiAgICAgICAgICBpZiAoIShvYmogaW5zdGFuY2VvZiBTcGxhdCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoYXNTcGxhdCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXNTcGxhdCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVPclRlc3Qobyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVMb29wVGVzdChvKTtcbiAgICB9O1xuXG4gICAgSW4ucHJvdG90eXBlLmNvbXBpbGVPclRlc3QgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY21wLCBjbmosIGksIGl0ZW0sIHJlZiwgc3ViLCB0ZXN0cywgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBfcmVmMiA9IHRoaXMub2JqZWN0LmNhY2hlKG8sIExFVkVMX09QKSwgc3ViID0gX3JlZjJbMF0sIHJlZiA9IF9yZWYyWzFdO1xuICAgICAgX3JlZjMgPSB0aGlzLm5lZ2F0ZWQgPyBbJyAhPT0gJywgJyAmJiAnXSA6IFsnID09PSAnLCAnIHx8ICddLCBjbXAgPSBfcmVmM1swXSwgY25qID0gX3JlZjNbMV07XG4gICAgICB0ZXN0cyA9IFtdO1xuICAgICAgX3JlZjQgPSB0aGlzLmFycmF5LmJhc2Uub2JqZWN0cztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWY0Lmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBpdGVtID0gX3JlZjRbaV07XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgdGVzdHMucHVzaCh0aGlzLm1ha2VDb2RlKGNuaikpO1xuICAgICAgICB9XG4gICAgICAgIHRlc3RzID0gdGVzdHMuY29uY2F0KChpID8gcmVmIDogc3ViKSwgdGhpcy5tYWtlQ29kZShjbXApLCBpdGVtLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9BQ0NFU1MpKTtcbiAgICAgIH1cbiAgICAgIGlmIChvLmxldmVsIDwgTEVWRUxfT1ApIHtcbiAgICAgICAgcmV0dXJuIHRlc3RzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKHRlc3RzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSW4ucHJvdG90eXBlLmNvbXBpbGVMb29wVGVzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBmcmFnbWVudHMsIHJlZiwgc3ViLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5vYmplY3QuY2FjaGUobywgTEVWRUxfTElTVCksIHN1YiA9IF9yZWYyWzBdLCByZWYgPSBfcmVmMlsxXTtcbiAgICAgIGZyYWdtZW50cyA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHV0aWxpdHkoJ2luZGV4T2YnKSArIFwiLmNhbGwoXCIpLCB0aGlzLmFycmF5LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSwgdGhpcy5tYWtlQ29kZShcIiwgXCIpLCByZWYsIHRoaXMubWFrZUNvZGUoXCIpIFwiICsgKHRoaXMubmVnYXRlZCA/ICc8IDAnIDogJz49IDAnKSkpO1xuICAgICAgaWYgKGZyYWdtZW50c1RvVGV4dChzdWIpID09PSBmcmFnbWVudHNUb1RleHQocmVmKSkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzID0gc3ViLmNvbmNhdCh0aGlzLm1ha2VDb2RlKCcsICcpLCBmcmFnbWVudHMpO1xuICAgICAgaWYgKG8ubGV2ZWwgPCBMRVZFTF9MSVNUKSB7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoZnJhZ21lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSW4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oaWR0KSB7XG4gICAgICByZXR1cm4gSW4uX19zdXBlcl9fLnRvU3RyaW5nLmNhbGwodGhpcywgaWR0LCB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAodGhpcy5uZWdhdGVkID8gJyEnIDogJycpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEluO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuU2xvdCA9IFNsb3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNsb3QsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBTbG90KGluZGV4LCB2YWx1ZSwgc3VmZml4LCBzcGxhdCkge1xuICAgICAgU2xvdC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuc3VmZml4ID0gc3VmZml4O1xuICAgICAgdGhpcy5zcGxhdCA9IHNwbGF0O1xuICAgICAgdGhpcy5hY2Nlc3MgPSBudWxsO1xuICAgIH1cblxuICAgIFNsb3QucHJvdG90eXBlLmFkZEFjY2VzcyA9IGZ1bmN0aW9uKGEpIHtcbiAgICAgIHRoaXMuYWNjZXNzID0gYTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBTbG90LnByb3RvdHlwZS5jaGlsZHJlbiA9IFsndmFsdWUnLCAnc3VmZml4J107XG5cbiAgICByZXR1cm4gU2xvdDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkRlZmVyID0gRGVmZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERlZmVyLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gRGVmZXIoYXJncywgbGluZW5vKSB7XG4gICAgICB2YXIgYSwgaTtcbiAgICAgIHRoaXMubGluZW5vID0gbGluZW5vO1xuICAgICAgRGVmZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNsb3RzID0gZmxhdHRlbigoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IGFyZ3MubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgICAgYSA9IGFyZ3NbaV07XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChhLmljZWRUb1Nsb3QoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pKCkpO1xuICAgICAgdGhpcy5wYXJhbXMgPSBbXTtcbiAgICAgIHRoaXMudmFycyA9IFtdO1xuICAgICAgdGhpcy5jdXN0b20gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBEZWZlci5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3Nsb3RzJ107XG5cbiAgICBEZWZlci5wcm90b3R5cGUuc2V0Q3VzdG9tID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmN1c3RvbSA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgRGVmZXIucHJvdG90eXBlLm5ld1BhcmFtID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbDtcbiAgICAgIGwgPSBcIlwiICsgaWNlZFtcImNvbnN0XCJdLnNsb3QgKyBcIl9cIiArICh0aGlzLnBhcmFtcy5sZW5ndGggKyAxKTtcbiAgICAgIHRoaXMucGFyYW1zLnB1c2gobmV3IFBhcmFtKG5ldyBMaXRlcmFsKGwpKSk7XG4gICAgICByZXR1cm4gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGwpKTtcbiAgICB9O1xuXG4gICAgRGVmZXIucHJvdG90eXBlLm1ha2VBc3NpZ25GbiA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhLCBhcmdzLCBhc3NpZ24sIGFzc2lnbm1lbnRzLCBibG9jaywgY2FsbCwgZnVuYywgaSwgaV9saXQsIGlubmVyX2ZuLCBsaXQsIG91dGVyX2Jsb2NrLCBvdXRlcl9mbiwgcHJvcCwgcywgc2xvdCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgaWYgKHRoaXMuc2xvdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgYXNzaWdubWVudHMgPSBbXTtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGkgPSAwO1xuICAgICAgX3JlZjIgPSB0aGlzLnNsb3RzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBzID0gX3JlZjJbX2ldO1xuICAgICAgICBpID0gcy5pbmRleDtcbiAgICAgICAgYSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcImFyZ3VtZW50c1wiKSk7XG4gICAgICAgIGlfbGl0ID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGkpKTtcbiAgICAgICAgaWYgKHMuc3BsYXQpIHtcbiAgICAgICAgICBmdW5jID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHV0aWxpdHkoJ3NsaWNlJykpKTtcbiAgICAgICAgICBmdW5jLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgnY2FsbCcpKSkpO1xuICAgICAgICAgIGNhbGwgPSBuZXcgQ2FsbChmdW5jLCBbYSwgaV9saXRdKTtcbiAgICAgICAgICBzbG90ID0gcy52YWx1ZTtcbiAgICAgICAgICB0aGlzLnZhcnMucHVzaChzbG90KTtcbiAgICAgICAgICBhc3NpZ24gPSBuZXcgQXNzaWduKHNsb3QsIGNhbGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGEuYWRkKG5ldyBJbmRleChpX2xpdCkpO1xuICAgICAgICAgIGlmIChzLmFjY2Vzcykge1xuICAgICAgICAgICAgYS5hZGQocy5hY2Nlc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXMuc3VmZml4KSB7XG4gICAgICAgICAgICBsaXQgPSBzLnZhbHVlLmNvbXBpbGUobywgTEVWRUxfVE9QKTtcbiAgICAgICAgICAgIGlmIChsaXQgPT09IFwiX1wiKSB7XG4gICAgICAgICAgICAgIHNsb3QgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmRlZmVycmFscykpO1xuICAgICAgICAgICAgICBzbG90LmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ucmV0c2xvdCkpKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzbG90ID0gcy52YWx1ZTtcbiAgICAgICAgICAgICAgdGhpcy52YXJzLnB1c2goc2xvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZ3MucHVzaChzLnZhbHVlKTtcbiAgICAgICAgICAgIHNsb3QgPSB0aGlzLm5ld1BhcmFtKCk7XG4gICAgICAgICAgICBpZiAocy5zdWZmaXggaW5zdGFuY2VvZiBJbmRleCkge1xuICAgICAgICAgICAgICBwcm9wID0gbmV3IEluZGV4KHRoaXMubmV3UGFyYW0oKSk7XG4gICAgICAgICAgICAgIGFyZ3MucHVzaChzLnN1ZmZpeC5pbmRleCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwcm9wID0gcy5zdWZmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzbG90LmFkZChwcm9wKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXNzaWduID0gbmV3IEFzc2lnbihzbG90LCBhKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ25tZW50cy5wdXNoKGFzc2lnbik7XG4gICAgICB9XG4gICAgICBibG9jayA9IG5ldyBCbG9jayhhc3NpZ25tZW50cyk7XG4gICAgICBpbm5lcl9mbiA9IG5ldyBDb2RlKFtdLCBibG9jaywgJ2ljZWRnZW4nKTtcbiAgICAgIG91dGVyX2Jsb2NrID0gbmV3IEJsb2NrKFtuZXcgUmV0dXJuKGlubmVyX2ZuKV0pO1xuICAgICAgb3V0ZXJfZm4gPSBuZXcgQ29kZSh0aGlzLnBhcmFtcywgb3V0ZXJfYmxvY2ssICdpY2VkZ2VuJyk7XG4gICAgICByZXR1cm4gY2FsbCA9IG5ldyBDYWxsKG91dGVyX2ZuLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgRGVmZXIucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhc3NpZ25fZm4sIGFzc2lnbm1lbnRzLCBjb250ZXh0X2Fzc2lnbiwgY29udGV4dF9saHMsIGNvbnRleHRfcmhzLCBmbiwgbG5fYXNzaWduLCBsbl9saHMsIGxuX3JocywgbWV0aDtcbiAgICAgIG1ldGggPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmRlZmVyX21ldGhvZCkpO1xuICAgICAgaWYgKHRoaXMuY3VzdG9tKSB7XG4gICAgICAgIGZuID0gbWV0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZuID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5kZWZlcnJhbHMpKTtcbiAgICAgICAgZm4uYWRkKG5ldyBBY2Nlc3MobWV0aCkpO1xuICAgICAgfVxuICAgICAgYXNzaWdubWVudHMgPSBbXTtcbiAgICAgIGlmICgoYXNzaWduX2ZuID0gdGhpcy5tYWtlQXNzaWduRm4obykpKSB7XG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2gobmV3IEFzc2lnbihuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmFzc2lnbl9mbikpLCBhc3NpZ25fZm4sIFwib2JqZWN0XCIpKTtcbiAgICAgIH1cbiAgICAgIGxuX2xocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubGluZW5vKSk7XG4gICAgICBsbl9yaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwodGhpcy5saW5lbm8pKTtcbiAgICAgIGxuX2Fzc2lnbiA9IG5ldyBBc3NpZ24obG5fbGhzLCBsbl9yaHMsIFwib2JqZWN0XCIpO1xuICAgICAgYXNzaWdubWVudHMucHVzaChsbl9hc3NpZ24pO1xuICAgICAgaWYgKHRoaXMuY3VzdG9tKSB7XG4gICAgICAgIGNvbnRleHRfbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5jb250ZXh0KSk7XG4gICAgICAgIGNvbnRleHRfcmhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5kZWZlcnJhbHMpKTtcbiAgICAgICAgY29udGV4dF9hc3NpZ24gPSBuZXcgQXNzaWduKGNvbnRleHRfbGhzLCBjb250ZXh0X3JocywgXCJvYmplY3RcIik7XG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2goY29udGV4dF9hc3NpZ24pO1xuICAgICAgfVxuICAgICAgbyA9IG5ldyBPYmooYXNzaWdubWVudHMpO1xuICAgICAgcmV0dXJuIG5ldyBDYWxsKGZuLCBbbmV3IFZhbHVlKG8pXSk7XG4gICAgfTtcblxuICAgIERlZmVyLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjYWxsLCBuYW1lLCBzY29wZSwgdiwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgY2FsbCA9IHRoaXMudHJhbnNmb3JtKG8pO1xuICAgICAgX3JlZjIgPSB0aGlzLnZhcnM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHYgPSBfcmVmMltfaV07XG4gICAgICAgIG5hbWUgPSB2LmNvbXBpbGUobywgTEVWRUxfTElTVCk7XG4gICAgICAgIHNjb3BlID0gby5zY29wZTtcbiAgICAgICAgc2NvcGUuZmluZChuYW1lLCAndmFyJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbC5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgRGVmZXIucHJvdG90eXBlLmljZWRXYWxrQXN0ID0gZnVuY3Rpb24ocCwgbykge1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IG8uZm91bmRBdXRvY2I7XG4gICAgICBvLmZvdW5kRGVmZXIgPSB0cnVlO1xuICAgICAgdGhpcy5wYXJlbnRGdW5jID0gby5jdXJyRnVuYztcbiAgICAgIHJldHVybiBEZWZlci5fX3N1cGVyX18uaWNlZFdhbGtBc3QuY2FsbCh0aGlzLCBwLCBvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmVyO1xuXG4gIH0pKEJhc2UpO1xuXG4gIHF1b3RlX3BhdGhfZm9yX2VtaXNzaW9uID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiAnXCInICsgbi5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpICsgJ1wiJztcbiAgfTtcblxuICBxdW90ZV9mdW5jbmFtZV9mb3JfZGVidWcgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuICdcIicgKyBuLnJlcGxhY2UoL1tcIiddL2csICcnKSArICdcIic7XG4gIH07XG5cbiAgcmVxdWlyZV90b3BfZGlyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHF1b3RlX3BhdGhfZm9yX2VtaXNzaW9uKHBhdGhtb2Quam9pbihfX2Rpcm5hbWUsIFwiLi5cIiwgXCIuLlwiKSk7XG4gIH07XG5cbiAgZXhwb3J0cy5Bd2FpdCA9IEF3YWl0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBd2FpdCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEF3YWl0KGJvZHkpIHtcbiAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICBBd2FpdC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBBd2FpdC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFzc2lnbiwgYXNzaWdubWVudHMsIGJvZHksIGNhbGwsIGNiX2Fzc2lnbm1lbnQsIGNiX2xocywgY2JfcmhzLCBjbHMsIGZuX2Fzc2lnbm1lbnQsIGZuX2xocywgZm5fcmhzLCBmdW5jX2Fzc2lnbm1lbnQsIGZ1bmNfbGhzLCBmdW5jX3JocywgbGhzLCBtZXRoLCBuLCBuYW1lLCByaHMsIHRyYWNlLCBfcmVmMiwgX3JlZjM7XG4gICAgICBib2R5ID0gdGhpcy5ib2R5O1xuICAgICAgbmFtZSA9IGljZWRbXCJjb25zdFwiXS5kZWZlcnJhbHM7XG4gICAgICBvLnNjb3BlLmFkZChuYW1lLCAndmFyJyk7XG4gICAgICBsaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwobmFtZSkpO1xuICAgICAgY2xzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5ucykpO1xuICAgICAgY2xzLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uRGVmZXJyYWxzKSkpKTtcbiAgICAgIGFzc2lnbm1lbnRzID0gW107XG4gICAgICBpZiAobiA9IChfcmVmMiA9IHRoaXMucGFyZW50RnVuYykgIT0gbnVsbCA/IF9yZWYyLmljZWRQYXNzZWREZWZlcnJhbCA6IHZvaWQgMCkge1xuICAgICAgICBjYl9saHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLnBhcmVudCkpO1xuICAgICAgICBjYl9yaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwobikpO1xuICAgICAgICBjYl9hc3NpZ25tZW50ID0gbmV3IEFzc2lnbihjYl9saHMsIGNiX3JocywgXCJvYmplY3RcIik7XG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2goY2JfYXNzaWdubWVudCk7XG4gICAgICB9XG4gICAgICBpZiAoby5maWxlbmFtZSAhPSBudWxsKSB7XG4gICAgICAgIGZuX2xocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZmlsZW5hbWUpKTtcbiAgICAgICAgZm5fcmhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHF1b3RlX3BhdGhfZm9yX2VtaXNzaW9uKG8uZmlsZW5hbWUpKSk7XG4gICAgICAgIGZuX2Fzc2lnbm1lbnQgPSBuZXcgQXNzaWduKGZuX2xocywgZm5fcmhzLCBcIm9iamVjdFwiKTtcbiAgICAgICAgYXNzaWdubWVudHMucHVzaChmbl9hc3NpZ25tZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChuID0gKF9yZWYzID0gdGhpcy5wYXJlbnRGdW5jKSAhPSBudWxsID8gX3JlZjMuaWNlZFRyYWNlTmFtZSgpIDogdm9pZCAwKSB7XG4gICAgICAgIGZ1bmNfbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5mdW5jbmFtZSkpO1xuICAgICAgICBmdW5jX3JocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChxdW90ZV9mdW5jbmFtZV9mb3JfZGVidWcobikpKTtcbiAgICAgICAgZnVuY19hc3NpZ25tZW50ID0gbmV3IEFzc2lnbihmdW5jX2xocywgZnVuY19yaHMsIFwib2JqZWN0XCIpO1xuICAgICAgICBhc3NpZ25tZW50cy5wdXNoKGZ1bmNfYXNzaWdubWVudCk7XG4gICAgICB9XG4gICAgICB0cmFjZSA9IG5ldyBPYmooYXNzaWdubWVudHMsIHRydWUpO1xuICAgICAgY2FsbCA9IG5ldyBDYWxsKGNscywgW25ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uaykpLCB0cmFjZV0pO1xuICAgICAgcmhzID0gbmV3IE9wKFwibmV3XCIsIGNhbGwpO1xuICAgICAgYXNzaWduID0gbmV3IEFzc2lnbihsaHMsIHJocyk7XG4gICAgICBib2R5LnVuc2hpZnQoYXNzaWduKTtcbiAgICAgIG1ldGggPSBsaHMuY29weSgpLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZnVsZmlsbCkpKSk7XG4gICAgICBjYWxsID0gbmV3IENhbGwobWV0aCwgW10pO1xuICAgICAgYm9keS5wdXNoKGNhbGwpO1xuICAgICAgcmV0dXJuIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgfTtcblxuICAgIEF3YWl0LnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnYm9keSddO1xuXG4gICAgQXdhaXQucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gWUVTO1xuICAgIH07XG5cbiAgICBBd2FpdC5wcm90b3R5cGUubWFrZVJldHVybiA9IFRISVM7XG5cbiAgICBBd2FpdC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB0aGlzLnRyYW5zZm9ybShvKTtcbiAgICAgIHJldHVybiB0aGlzLmJvZHkuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIEF3YWl0LnByb3RvdHlwZS5pY2VkV2Fsa0FzdCA9IGZ1bmN0aW9uKHAsIG8pIHtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBvLmZvdW5kQXV0b2NiO1xuICAgICAgdGhpcy5wYXJlbnRGdW5jID0gby5jdXJyRnVuYztcbiAgICAgIHAgPSBwIHx8IHRoaXM7XG4gICAgICB0aGlzLmljZWRQYXJlbnRBd2FpdCA9IHA7XG4gICAgICBBd2FpdC5fX3N1cGVyX18uaWNlZFdhbGtBc3QuY2FsbCh0aGlzLCBwLCBvKTtcbiAgICAgIHJldHVybiB0aGlzLmljZWROb2RlRmxhZyA9IG8uZm91bmRBd2FpdEZ1bmMgPSBvLmZvdW5kQXdhaXQgPSB0cnVlO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXdhaXQ7XG5cbiAgfSkoQmFzZSk7XG5cbiAgSWNlZFJ1bnRpbWUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEljZWRSdW50aW1lLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gSWNlZFJ1bnRpbWUoZm91bmREZWZlciwgZm91bmRBd2FpdCkge1xuICAgICAgdGhpcy5mb3VuZERlZmVyID0gZm91bmREZWZlcjtcbiAgICAgIHRoaXMuZm91bmRBd2FpdCA9IGZvdW5kQXdhaXQ7XG4gICAgICBJY2VkUnVudGltZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJY2VkUnVudGltZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvLCBsZXZlbCkge1xuICAgICAgdmFyIGFjY2VzcywgYWNjZXNzbmFtZSwgYXNzaWduLCBjYWxsLCBjYWxsdiwgZmlsZSwgaW5jLCBpbnRlcnAsIGssIGtsYXNzLCBsaHNfdmVjLCBucywgcW1vZG5hbWUsIHJlcSwgcmhzLCB2LCB2YWwsIHdpbmRvd19tb2RlLCB3aW5kb3dfdmFsLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMjtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBbXTtcbiAgICAgIHYgPSBvLnJ1bnRpbWUgPyBvLnJ1bnRpbWUgOiBvLmJhcmUgPyBcIm5vbmVcIiA6IHRoaXMuZm91bmREZWZlciA/IFwibm9kZVwiIDogXCJub25lXCI7XG4gICAgICBpZiAoby5ydW50aW1lICYmICF0aGlzLmZvdW5kRGVmZXIgJiYgIW8ucnVuZm9yY2UpIHtcbiAgICAgICAgdiA9IFwibm9uZVwiO1xuICAgICAgfVxuICAgICAgd2luZG93X21vZGUgPSBmYWxzZTtcbiAgICAgIHdpbmRvd192YWwgPSBudWxsO1xuICAgICAgaW5jID0gbnVsbDtcbiAgICAgIGluYyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgc3dpdGNoICh2KSB7XG4gICAgICAgICAgY2FzZSBcImlubGluZVwiOlxuICAgICAgICAgIGNhc2UgXCJ3aW5kb3dcIjpcbiAgICAgICAgICAgIGlmICh2ID09PSBcIndpbmRvd1wiKSB7XG4gICAgICAgICAgICAgIHdpbmRvd19tb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aW5kb3dfbW9kZSkge1xuICAgICAgICAgICAgICB3aW5kb3dfdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBJbmxpbmVSdW50aW1lLmdlbmVyYXRlKHdpbmRvd192YWwgPyB3aW5kb3dfdmFsLmNvcHkoKSA6IG51bGwpO1xuICAgICAgICAgIGNhc2UgXCJub2RlXCI6XG4gICAgICAgICAgY2FzZSBcImJyb3dzZXJpZnlcIjpcbiAgICAgICAgICBjYXNlIFwiaW50ZXJwXCI6XG4gICAgICAgICAgICBpbnRlcnAgPSB2ID09PSBcImludGVycFwiO1xuICAgICAgICAgICAgcW1vZG5hbWUgPSBpbnRlcnAgPyByZXF1aXJlX3RvcF9kaXIoKSA6IFwiJ2ljZWQtcnVudGltZSdcIjtcbiAgICAgICAgICAgIGFjY2Vzc25hbWUgPSBpY2VkW1wiY29uc3RcIl0ubnM7XG4gICAgICAgICAgICBmaWxlID0gbmV3IExpdGVyYWwocW1vZG5hbWUpO1xuICAgICAgICAgICAgYWNjZXNzID0gbmV3IEFjY2VzcyhuZXcgTGl0ZXJhbChhY2Nlc3NuYW1lKSk7XG4gICAgICAgICAgICByZXEgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJyZXF1aXJlXCIpKTtcbiAgICAgICAgICAgIGNhbGwgPSBuZXcgQ2FsbChyZXEsIFtmaWxlXSk7XG4gICAgICAgICAgICBjYWxsdiA9IG5ldyBWYWx1ZShjYWxsKTtcbiAgICAgICAgICAgIGlmIChpbnRlcnApIHtcbiAgICAgICAgICAgICAgY2FsbHYuYWRkKGFjY2Vzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBucyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubnMpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXNzaWduKG5zLCBjYWxsdik7XG4gICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBTeW50YXhFcnJvcihcInVuZXhwZWN0ZWQgZmxhZyBJY2VkUnVudGltZSBcIiArIHYpO1xuICAgICAgICB9XG4gICAgICB9KSgpO1xuICAgICAgaWYgKGluYykge1xuICAgICAgICB0aGlzLnB1c2goaW5jKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZvdW5kQXdhaXQpIHtcbiAgICAgICAgcmhzID0gbmV3IENvZGUoW10sIG5ldyBCbG9jayhbXSkpO1xuICAgICAgICBsaHNfdmVjID0gW107XG4gICAgICAgIF9yZWYyID0gW2ljZWRbXCJjb25zdFwiXS5rX25vb3AsIGljZWRbXCJjb25zdFwiXS5rXTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGsgPSBfcmVmMltfaV07XG4gICAgICAgICAgdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGspKTtcbiAgICAgICAgICBpZiAod2luZG93X3ZhbCkge1xuICAgICAgICAgICAga2xhc3MgPSB3aW5kb3dfdmFsLmNvcHkoKTtcbiAgICAgICAgICAgIGtsYXNzLmFkZChuZXcgQWNjZXNzKHZhbCkpO1xuICAgICAgICAgICAgdmFsID0ga2xhc3M7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxoc192ZWMucHVzaCh2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbiA9IHJocztcbiAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gbGhzX3ZlYy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICB2ID0gbGhzX3ZlY1tfal07XG4gICAgICAgICAgYXNzaWduID0gbmV3IEFzc2lnbih2LCBhc3NpZ24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHVzaChhc3NpZ24pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNFbXB0eSgpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBJY2VkUnVudGltZS5fX3N1cGVyX18uY29tcGlsZU5vZGUuY2FsbCh0aGlzLCBvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSWNlZFJ1bnRpbWUucHJvdG90eXBlLmljZWRXYWxrQXN0ID0gZnVuY3Rpb24ocCwgbykge1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IG8uZm91bmRBdXRvY2I7XG4gICAgICByZXR1cm4gSWNlZFJ1bnRpbWUuX19zdXBlcl9fLmljZWRXYWxrQXN0LmNhbGwodGhpcywgcCwgbyk7XG4gICAgfTtcblxuICAgIHJldHVybiBJY2VkUnVudGltZTtcblxuICB9KShCbG9jayk7XG5cbiAgZXhwb3J0cy5UcnkgPSBUcnkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRyeSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFRyeShhdHRlbXB0LCBlcnJvclZhcmlhYmxlLCByZWNvdmVyeSwgZW5zdXJlKSB7XG4gICAgICB0aGlzLmF0dGVtcHQgPSBhdHRlbXB0O1xuICAgICAgdGhpcy5lcnJvclZhcmlhYmxlID0gZXJyb3JWYXJpYWJsZTtcbiAgICAgIHRoaXMucmVjb3ZlcnkgPSByZWNvdmVyeTtcbiAgICAgIHRoaXMuZW5zdXJlID0gZW5zdXJlO1xuICAgIH1cblxuICAgIFRyeS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2F0dGVtcHQnLCAncmVjb3ZlcnknLCAnZW5zdXJlJ107XG5cbiAgICBUcnkucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gWUVTO1xuXG4gICAgVHJ5LnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiB0aGlzLmF0dGVtcHQuanVtcHMobykgfHwgKChfcmVmMiA9IHRoaXMucmVjb3ZlcnkpICE9IG51bGwgPyBfcmVmMi5qdW1wcyhvKSA6IHZvaWQgMCk7XG4gICAgfTtcblxuICAgIFRyeS5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgaWYgKHRoaXMuYXR0ZW1wdCkge1xuICAgICAgICB0aGlzLmF0dGVtcHQgPSB0aGlzLmF0dGVtcHQubWFrZVJldHVybihyZXMpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmVjb3ZlcnkpIHtcbiAgICAgICAgdGhpcy5yZWNvdmVyeSA9IHRoaXMucmVjb3ZlcnkubWFrZVJldHVybihyZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFRyeS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY2F0Y2hQYXJ0LCBlbnN1cmVQYXJ0LCBwbGFjZWhvbGRlciwgdHJ5UGFydDtcbiAgICAgIG8uaW5kZW50ICs9IFRBQjtcbiAgICAgIHRyeVBhcnQgPSB0aGlzLmF0dGVtcHQuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCk7XG4gICAgICBjYXRjaFBhcnQgPSB0aGlzLnJlY292ZXJ5ID8gKHBsYWNlaG9sZGVyID0gbmV3IExpdGVyYWwoJ19lcnJvcicpLCB0aGlzLmVycm9yVmFyaWFibGUgPyB0aGlzLnJlY292ZXJ5LnVuc2hpZnQobmV3IEFzc2lnbih0aGlzLmVycm9yVmFyaWFibGUsIHBsYWNlaG9sZGVyKSkgOiB2b2lkIDAsIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiIGNhdGNoIChcIiksIHBsYWNlaG9sZGVyLmNvbXBpbGVUb0ZyYWdtZW50cyhvKSwgdGhpcy5tYWtlQ29kZShcIikge1xcblwiKSwgdGhpcy5yZWNvdmVyeS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcIn1cIikpKSA6ICEodGhpcy5lbnN1cmUgfHwgdGhpcy5yZWNvdmVyeSkgPyBbdGhpcy5tYWtlQ29kZSgnIGNhdGNoIChfZXJyb3IpIHt9JyldIDogW107XG4gICAgICBlbnN1cmVQYXJ0ID0gdGhpcy5lbnN1cmUgPyBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIiBmaW5hbGx5IHtcXG5cIiksIHRoaXMuZW5zdXJlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwifVwiKSkgOiBbXTtcbiAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIlwiICsgdGhpcy50YWIgKyBcInRyeSB7XFxuXCIpLCB0cnlQYXJ0LCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwifVwiKSwgY2F0Y2hQYXJ0LCBlbnN1cmVQYXJ0KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRyeTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlRocm93ID0gVGhyb3cgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRocm93LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gVGhyb3coZXhwcmVzc2lvbikge1xuICAgICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICAgIFRocm93Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRocm93LnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnZXhwcmVzc2lvbiddO1xuXG4gICAgVGhyb3cucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gWUVTO1xuXG4gICAgVGhyb3cucHJvdG90eXBlLmp1bXBzID0gTk87XG5cbiAgICBUaHJvdy5wcm90b3R5cGUubWFrZVJldHVybiA9IFRISVM7XG5cbiAgICBUaHJvdy5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMubWFrZUNvZGUodGhpcy50YWIgKyBcInRocm93IFwiKSwgdGhpcy5leHByZXNzaW9uLmNvbXBpbGVUb0ZyYWdtZW50cyhvKSwgdGhpcy5tYWtlQ29kZShcIjtcIikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGhyb3c7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5FeGlzdGVuY2UgPSBFeGlzdGVuY2UgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV4aXN0ZW5jZSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEV4aXN0ZW5jZShleHByZXNzaW9uKSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICAgICAgRXhpc3RlbmNlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV4aXN0ZW5jZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2V4cHJlc3Npb24nXTtcblxuICAgIEV4aXN0ZW5jZS5wcm90b3R5cGUuaW52ZXJ0ID0gTkVHQVRFO1xuXG4gICAgRXhpc3RlbmNlLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjbXAsIGNuaiwgY29kZSwgX3JlZjI7XG4gICAgICB0aGlzLmV4cHJlc3Npb24uZnJvbnQgPSB0aGlzLmZyb250O1xuICAgICAgY29kZSA9IHRoaXMuZXhwcmVzc2lvbi5jb21waWxlKG8sIExFVkVMX09QKTtcbiAgICAgIGlmIChJREVOVElGSUVSLnRlc3QoY29kZSkgJiYgIW8uc2NvcGUuY2hlY2soY29kZSkpIHtcbiAgICAgICAgX3JlZjIgPSB0aGlzLm5lZ2F0ZWQgPyBbJz09PScsICd8fCddIDogWychPT0nLCAnJiYnXSwgY21wID0gX3JlZjJbMF0sIGNuaiA9IF9yZWYyWzFdO1xuICAgICAgICBjb2RlID0gXCJ0eXBlb2YgXCIgKyBjb2RlICsgXCIgXCIgKyBjbXAgKyBcIiBcXFwidW5kZWZpbmVkXFxcIiBcIiArIGNuaiArIFwiIFwiICsgY29kZSArIFwiIFwiICsgY21wICsgXCIgbnVsbFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29kZSA9IFwiXCIgKyBjb2RlICsgXCIgXCIgKyAodGhpcy5uZWdhdGVkID8gJz09JyA6ICchPScpICsgXCIgbnVsbFwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKG8ubGV2ZWwgPD0gTEVWRUxfQ09ORCA/IGNvZGUgOiBcIihcIiArIGNvZGUgKyBcIilcIildO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXhpc3RlbmNlO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuUGFyZW5zID0gUGFyZW5zID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQYXJlbnMsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBQYXJlbnMoYm9keSkge1xuICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgIFBhcmVucy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYXJlbnMucHJvdG90eXBlLmNoaWxkcmVuID0gWydib2R5J107XG5cbiAgICBQYXJlbnMucHJvdG90eXBlLnVud3JhcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYm9keTtcbiAgICB9O1xuXG4gICAgUGFyZW5zLnByb3RvdHlwZS5pc0NvbXBsZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJvZHkuaXNDb21wbGV4KCk7XG4gICAgfTtcblxuICAgIFBhcmVucy5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYmFyZSwgZXhwciwgZnJhZ21lbnRzO1xuICAgICAgZXhwciA9IHRoaXMuYm9keS51bndyYXAoKTtcbiAgICAgIGlmIChleHByIGluc3RhbmNlb2YgVmFsdWUgJiYgZXhwci5pc0F0b21pYygpKSB7XG4gICAgICAgIGV4cHIuZnJvbnQgPSB0aGlzLmZyb250O1xuICAgICAgICByZXR1cm4gZXhwci5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMgPSBleHByLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTik7XG4gICAgICBiYXJlID0gby5sZXZlbCA8IExFVkVMX09QICYmIChleHByIGluc3RhbmNlb2YgT3AgfHwgZXhwciBpbnN0YW5jZW9mIENhbGwgfHwgKGV4cHIgaW5zdGFuY2VvZiBGb3IgJiYgZXhwci5yZXR1cm5zKSk7XG4gICAgICBpZiAoYmFyZSkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGZyYWdtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBQYXJlbnM7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5Gb3IgPSBGb3IgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZvciwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEZvcihib2R5LCBzb3VyY2UpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIEZvci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlLnNvdXJjZSwgdGhpcy5ndWFyZCA9IHNvdXJjZS5ndWFyZCwgdGhpcy5zdGVwID0gc291cmNlLnN0ZXAsIHRoaXMubmFtZSA9IHNvdXJjZS5uYW1lLCB0aGlzLmluZGV4ID0gc291cmNlLmluZGV4O1xuICAgICAgdGhpcy5ib2R5ID0gQmxvY2sud3JhcChbYm9keV0pO1xuICAgICAgdGhpcy5vd24gPSAhIXNvdXJjZS5vd247XG4gICAgICB0aGlzLm9iamVjdCA9ICEhc291cmNlLm9iamVjdDtcbiAgICAgIGlmICh0aGlzLm9iamVjdCkge1xuICAgICAgICBfcmVmMiA9IFt0aGlzLmluZGV4LCB0aGlzLm5hbWVdLCB0aGlzLm5hbWUgPSBfcmVmMlswXSwgdGhpcy5pbmRleCA9IF9yZWYyWzFdO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaW5kZXggaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICB0aGlzLmluZGV4LmVycm9yKCdpbmRleCBjYW5ub3QgYmUgYSBwYXR0ZXJuIG1hdGNoaW5nIGV4cHJlc3Npb24nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmFuZ2UgPSB0aGlzLnNvdXJjZSBpbnN0YW5jZW9mIFZhbHVlICYmIHRoaXMuc291cmNlLmJhc2UgaW5zdGFuY2VvZiBSYW5nZSAmJiAhdGhpcy5zb3VyY2UucHJvcGVydGllcy5sZW5ndGg7XG4gICAgICB0aGlzLnBhdHRlcm4gPSB0aGlzLm5hbWUgaW5zdGFuY2VvZiBWYWx1ZTtcbiAgICAgIGlmICh0aGlzLnJhbmdlICYmIHRoaXMuaW5kZXgpIHtcbiAgICAgICAgdGhpcy5pbmRleC5lcnJvcignaW5kZXhlcyBkbyBub3QgYXBwbHkgdG8gcmFuZ2UgbG9vcHMnKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJhbmdlICYmIHRoaXMucGF0dGVybikge1xuICAgICAgICB0aGlzLm5hbWUuZXJyb3IoJ2Nhbm5vdCBwYXR0ZXJuIG1hdGNoIG92ZXIgcmFuZ2UgbG9vcHMnKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm93biAmJiAhdGhpcy5vYmplY3QpIHtcbiAgICAgICAgdGhpcy5uYW1lLmVycm9yKCdjYW5ub3QgdXNlIG93biB3aXRoIGZvci1pbicpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXR1cm5zID0gZmFsc2U7XG4gICAgfVxuXG4gICAgRm9yLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnYm9keScsICdzb3VyY2UnLCAnZ3VhcmQnLCAnc3RlcCddO1xuXG4gICAgRm9yLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBib2R5LCBib2R5RnJhZ21lbnRzLCBjb21wYXJlLCBjb21wYXJlRG93biwgZGVjbGFyZSwgZGVjbGFyZURvd24sIGRlZlBhcnQsIGRlZlBhcnRGcmFnbWVudHMsIGRvd24sIGZvclBhcnRGcmFnbWVudHMsIGd1YXJkUGFydCwgaWR0MSwgaW5jcmVtZW50LCBpbmRleCwgaXZhciwga3Zhciwga3ZhckFzc2lnbiwgbGFzdEp1bXBzLCBsdmFyLCBuYW1lLCBuYW1lUGFydCwgcmVmLCByZXN1bHRQYXJ0LCByZXR1cm5SZXN1bHQsIHJ2YXIsIHNjb3BlLCBzb3VyY2UsIHN0ZXAsIHN0ZXBOdW0sIHN0ZXBWYXIsIHN2YXIsIHZhclBhcnQsIF9yZWYyLCBfcmVmMztcbiAgICAgIGJvZHkgPSBCbG9jay53cmFwKFt0aGlzLmJvZHldKTtcbiAgICAgIGxhc3RKdW1wcyA9IChfcmVmMiA9IGxhc3QoYm9keS5leHByZXNzaW9ucykpICE9IG51bGwgPyBfcmVmMi5qdW1wcygpIDogdm9pZCAwO1xuICAgICAgaWYgKGxhc3RKdW1wcyAmJiBsYXN0SnVtcHMgaW5zdGFuY2VvZiBSZXR1cm4pIHtcbiAgICAgICAgdGhpcy5yZXR1cm5zID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBzb3VyY2UgPSB0aGlzLnJhbmdlID8gdGhpcy5zb3VyY2UuYmFzZSA6IHRoaXMuc291cmNlO1xuICAgICAgc2NvcGUgPSBvLnNjb3BlO1xuICAgICAgaWYgKCF0aGlzLnBhdHRlcm4pIHtcbiAgICAgICAgbmFtZSA9IHRoaXMubmFtZSAmJiAodGhpcy5uYW1lLmNvbXBpbGUobywgTEVWRUxfTElTVCkpO1xuICAgICAgfVxuICAgICAgaW5kZXggPSB0aGlzLmluZGV4ICYmICh0aGlzLmluZGV4LmNvbXBpbGUobywgTEVWRUxfTElTVCkpO1xuICAgICAgaWYgKG5hbWUgJiYgIXRoaXMucGF0dGVybikge1xuICAgICAgICBzY29wZS5maW5kKG5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgIHNjb3BlLmZpbmQoaW5kZXgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmV0dXJucykge1xuICAgICAgICBydmFyID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdyZXN1bHRzJyk7XG4gICAgICB9XG4gICAgICBpdmFyID0gKHRoaXMub2JqZWN0ICYmIGluZGV4KSB8fCBzY29wZS5mcmVlVmFyaWFibGUoJ2knKTtcbiAgICAgIGt2YXIgPSAodGhpcy5yYW5nZSAmJiBuYW1lKSB8fCBpbmRleCB8fCBpdmFyO1xuICAgICAga3ZhckFzc2lnbiA9IGt2YXIgIT09IGl2YXIgPyBcIlwiICsga3ZhciArIFwiID0gXCIgOiBcIlwiO1xuICAgICAgaWYgKHRoaXMuc3RlcCAmJiAhdGhpcy5yYW5nZSkge1xuICAgICAgICBfcmVmMyA9IHRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHModGhpcy5zdGVwLmNhY2hlKG8sIExFVkVMX0xJU1QpKSwgc3RlcCA9IF9yZWYzWzBdLCBzdGVwVmFyID0gX3JlZjNbMV07XG4gICAgICAgIHN0ZXBOdW0gPSBzdGVwVmFyLm1hdGNoKE5VTUJFUik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wYXR0ZXJuKSB7XG4gICAgICAgIG5hbWUgPSBpdmFyO1xuICAgICAgfVxuICAgICAgdmFyUGFydCA9ICcnO1xuICAgICAgZ3VhcmRQYXJ0ID0gJyc7XG4gICAgICBkZWZQYXJ0ID0gJyc7XG4gICAgICBpZHQxID0gdGhpcy50YWIgKyBUQUI7XG4gICAgICBzb3VyY2UuaWNlZFN0YXRlbWVudEFzc2VydGlvbigpO1xuICAgICAgaWYgKHRoaXMuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljZWRDb21waWxlSWNlZChvLCB7XG4gICAgICAgICAgc3RlcFZhcjogc3RlcFZhcixcbiAgICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICAgIGt2YXI6IGt2YXIsXG4gICAgICAgICAgZ3VhcmQ6IHRoaXMuZ3VhcmRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yYW5nZSkge1xuICAgICAgICBmb3JQYXJ0RnJhZ21lbnRzID0gc291cmNlLmNvbXBpbGVUb0ZyYWdtZW50cyhtZXJnZShvLCB7XG4gICAgICAgICAgaW5kZXg6IGl2YXIsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBzdGVwOiB0aGlzLnN0ZXBcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3ZhciA9IHRoaXMuc291cmNlLmNvbXBpbGUobywgTEVWRUxfTElTVCk7XG4gICAgICAgIGlmICgobmFtZSB8fCB0aGlzLm93bikgJiYgIUlERU5USUZJRVIudGVzdChzdmFyKSkge1xuICAgICAgICAgIGRlZlBhcnQgKz0gXCJcIiArIHRoaXMudGFiICsgKHJlZiA9IHNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJykpICsgXCIgPSBcIiArIHN2YXIgKyBcIjtcXG5cIjtcbiAgICAgICAgICBzdmFyID0gcmVmO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuYW1lICYmICF0aGlzLnBhdHRlcm4pIHtcbiAgICAgICAgICBuYW1lUGFydCA9IFwiXCIgKyBuYW1lICsgXCIgPSBcIiArIHN2YXIgKyBcIltcIiArIGt2YXIgKyBcIl1cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMub2JqZWN0KSB7XG4gICAgICAgICAgaWYgKHN0ZXAgIT09IHN0ZXBWYXIpIHtcbiAgICAgICAgICAgIGRlZlBhcnQgKz0gXCJcIiArIHRoaXMudGFiICsgc3RlcCArIFwiO1xcblwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoISh0aGlzLnN0ZXAgJiYgc3RlcE51bSAmJiAoZG93biA9IHBhcnNlTnVtKHN0ZXBOdW1bMF0pIDwgMCkpKSB7XG4gICAgICAgICAgICBsdmFyID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdsZW4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVjbGFyZSA9IFwiXCIgKyBrdmFyQXNzaWduICsgaXZhciArIFwiID0gMCwgXCIgKyBsdmFyICsgXCIgPSBcIiArIHN2YXIgKyBcIi5sZW5ndGhcIjtcbiAgICAgICAgICBkZWNsYXJlRG93biA9IFwiXCIgKyBrdmFyQXNzaWduICsgaXZhciArIFwiID0gXCIgKyBzdmFyICsgXCIubGVuZ3RoIC0gMVwiO1xuICAgICAgICAgIGNvbXBhcmUgPSBcIlwiICsgaXZhciArIFwiIDwgXCIgKyBsdmFyO1xuICAgICAgICAgIGNvbXBhcmVEb3duID0gXCJcIiArIGl2YXIgKyBcIiA+PSAwXCI7XG4gICAgICAgICAgaWYgKHRoaXMuc3RlcCkge1xuICAgICAgICAgICAgaWYgKHN0ZXBOdW0pIHtcbiAgICAgICAgICAgICAgaWYgKGRvd24pIHtcbiAgICAgICAgICAgICAgICBjb21wYXJlID0gY29tcGFyZURvd247XG4gICAgICAgICAgICAgICAgZGVjbGFyZSA9IGRlY2xhcmVEb3duO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb21wYXJlID0gXCJcIiArIHN0ZXBWYXIgKyBcIiA+IDAgPyBcIiArIGNvbXBhcmUgKyBcIiA6IFwiICsgY29tcGFyZURvd247XG4gICAgICAgICAgICAgIGRlY2xhcmUgPSBcIihcIiArIHN0ZXBWYXIgKyBcIiA+IDAgPyAoXCIgKyBkZWNsYXJlICsgXCIpIDogXCIgKyBkZWNsYXJlRG93biArIFwiKVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5jcmVtZW50ID0gXCJcIiArIGl2YXIgKyBcIiArPSBcIiArIHN0ZXBWYXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluY3JlbWVudCA9IFwiXCIgKyAoa3ZhciAhPT0gaXZhciA/IFwiKytcIiArIGl2YXIgOiBcIlwiICsgaXZhciArIFwiKytcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvclBhcnRGcmFnbWVudHMgPSBbdGhpcy5tYWtlQ29kZShcIlwiICsgZGVjbGFyZSArIFwiOyBcIiArIGNvbXBhcmUgKyBcIjsgXCIgKyBrdmFyQXNzaWduICsgaW5jcmVtZW50KV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJldHVybnMpIHtcbiAgICAgICAgcmVzdWx0UGFydCA9IFwiXCIgKyB0aGlzLnRhYiArIHJ2YXIgKyBcIiA9IFtdO1xcblwiO1xuICAgICAgICByZXR1cm5SZXN1bHQgPSB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID8gXCJcXG5cIiArIHRoaXMudGFiICsgaWNlZFtcImNvbnN0XCJdLmF1dG9jYiArIFwiKFwiICsgcnZhciArIFwiKTsgcmV0dXJuO1wiIDogXCJcXG5cIiArIHRoaXMudGFiICsgXCJyZXR1cm4gXCIgKyBydmFyICsgXCI7XCI7XG4gICAgICAgIGJvZHkubWFrZVJldHVybihydmFyKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmd1YXJkKSB7XG4gICAgICAgIGlmIChib2R5LmV4cHJlc3Npb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBib2R5LmV4cHJlc3Npb25zLnVuc2hpZnQobmV3IElmKChuZXcgUGFyZW5zKHRoaXMuZ3VhcmQpKS5pbnZlcnQoKSwgbmV3IExpdGVyYWwoXCJjb250aW51ZVwiKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLmd1YXJkKSB7XG4gICAgICAgICAgICBib2R5ID0gQmxvY2sud3JhcChbbmV3IElmKHRoaXMuZ3VhcmQsIGJvZHkpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wYXR0ZXJuKSB7XG4gICAgICAgIGJvZHkuZXhwcmVzc2lvbnMudW5zaGlmdChuZXcgQXNzaWduKHRoaXMubmFtZSwgbmV3IExpdGVyYWwoXCJcIiArIHN2YXIgKyBcIltcIiArIGt2YXIgKyBcIl1cIikpKTtcbiAgICAgIH1cbiAgICAgIGRlZlBhcnRGcmFnbWVudHMgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShkZWZQYXJ0KSwgdGhpcy5wbHVja0RpcmVjdENhbGwobywgYm9keSkpO1xuICAgICAgaWYgKG5hbWVQYXJ0KSB7XG4gICAgICAgIHZhclBhcnQgPSBcIlxcblwiICsgaWR0MSArIG5hbWVQYXJ0ICsgXCI7XCI7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QpIHtcbiAgICAgICAgZm9yUGFydEZyYWdtZW50cyA9IFt0aGlzLm1ha2VDb2RlKFwiXCIgKyBrdmFyICsgXCIgaW4gXCIgKyBzdmFyKV07XG4gICAgICAgIGlmICh0aGlzLm93bikge1xuICAgICAgICAgIGd1YXJkUGFydCA9IFwiXFxuXCIgKyBpZHQxICsgXCJpZiAoIVwiICsgKHV0aWxpdHkoJ2hhc1Byb3AnKSkgKyBcIi5jYWxsKFwiICsgc3ZhciArIFwiLCBcIiArIGt2YXIgKyBcIikpIGNvbnRpbnVlO1wiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBib2R5RnJhZ21lbnRzID0gYm9keS5jb21waWxlVG9GcmFnbWVudHMobWVyZ2Uobywge1xuICAgICAgICBpbmRlbnQ6IGlkdDFcbiAgICAgIH0pLCBMRVZFTF9UT1ApO1xuICAgICAgaWYgKGJvZHlGcmFnbWVudHMgJiYgKGJvZHlGcmFnbWVudHMubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgYm9keUZyYWdtZW50cyA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpLCBib2R5RnJhZ21lbnRzLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXS5jb25jYXQoZGVmUGFydEZyYWdtZW50cywgdGhpcy5tYWtlQ29kZShcIlwiICsgKHJlc3VsdFBhcnQgfHwgJycpICsgdGhpcy50YWIgKyBcImZvciAoXCIpLCBmb3JQYXJ0RnJhZ21lbnRzLCB0aGlzLm1ha2VDb2RlKFwiKSB7XCIgKyBndWFyZFBhcnQgKyB2YXJQYXJ0KSwgYm9keUZyYWdtZW50cywgdGhpcy5tYWtlQ29kZShcIlwiICsgdGhpcy50YWIgKyBcIn1cIiArIChyZXR1cm5SZXN1bHQgfHwgJycpKSk7XG4gICAgfTtcblxuICAgIEZvci5wcm90b3R5cGUucGx1Y2tEaXJlY3RDYWxsID0gZnVuY3Rpb24obywgYm9keSkge1xuICAgICAgdmFyIGJhc2UsIGRlZnMsIGV4cHIsIGZuLCBpZHgsIHJlZiwgdmFsLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjUsIF9yZWY2LCBfcmVmNywgX3JlZjg7XG4gICAgICBkZWZzID0gW107XG4gICAgICBfcmVmMiA9IGJvZHkuZXhwcmVzc2lvbnM7XG4gICAgICBmb3IgKGlkeCA9IF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBpZHggPSArK19pKSB7XG4gICAgICAgIGV4cHIgPSBfcmVmMltpZHhdO1xuICAgICAgICBleHByID0gZXhwci51bndyYXBBbGwoKTtcbiAgICAgICAgaWYgKCEoZXhwciBpbnN0YW5jZW9mIENhbGwpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsID0gKF9yZWYzID0gZXhwci52YXJpYWJsZSkgIT0gbnVsbCA/IF9yZWYzLnVud3JhcEFsbCgpIDogdm9pZCAwO1xuICAgICAgICBpZiAoISgodmFsIGluc3RhbmNlb2YgQ29kZSkgfHwgKHZhbCBpbnN0YW5jZW9mIFZhbHVlICYmICgoX3JlZjQgPSB2YWwuYmFzZSkgIT0gbnVsbCA/IF9yZWY0LnVud3JhcEFsbCgpIDogdm9pZCAwKSBpbnN0YW5jZW9mIENvZGUgJiYgdmFsLnByb3BlcnRpZXMubGVuZ3RoID09PSAxICYmICgoX3JlZjUgPSAoX3JlZjYgPSB2YWwucHJvcGVydGllc1swXS5uYW1lKSAhPSBudWxsID8gX3JlZjYudmFsdWUgOiB2b2lkIDApID09PSAnY2FsbCcgfHwgX3JlZjUgPT09ICdhcHBseScpKSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmbiA9ICgoX3JlZjcgPSB2YWwuYmFzZSkgIT0gbnVsbCA/IF9yZWY3LnVud3JhcEFsbCgpIDogdm9pZCAwKSB8fCB2YWw7XG4gICAgICAgIHJlZiA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdmbicpKTtcbiAgICAgICAgYmFzZSA9IG5ldyBWYWx1ZShyZWYpO1xuICAgICAgICBpZiAodmFsLmJhc2UpIHtcbiAgICAgICAgICBfcmVmOCA9IFtiYXNlLCB2YWxdLCB2YWwuYmFzZSA9IF9yZWY4WzBdLCBiYXNlID0gX3JlZjhbMV07XG4gICAgICAgIH1cbiAgICAgICAgYm9keS5leHByZXNzaW9uc1tpZHhdID0gbmV3IENhbGwoYmFzZSwgZXhwci5hcmdzKTtcbiAgICAgICAgZGVmcyA9IGRlZnMuY29uY2F0KHRoaXMubWFrZUNvZGUodGhpcy50YWIpLCBuZXcgQXNzaWduKHJlZiwgZm4pLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApLCB0aGlzLm1ha2VDb2RlKCc7XFxuJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZnM7XG4gICAgfTtcblxuICAgIEZvci5wcm90b3R5cGUuaWNlZENvbXBpbGVJY2VkID0gZnVuY3Rpb24obywgZCkge1xuICAgICAgdmFyIGExLCBhMiwgYTMsIGE0LCBhNSwgYV9wb3NpdGl2ZSwgYV9zdGVwVmFsLCBiLCBiZWdpbiwgYm9keSwgY29uZGl0aW9uLCBkb3duLCBlbXB0eV9hcnIsIGVuZCwgZXhjbCwgZ3VhcmQsIGluYW1lLCBpbml0LCBpbml0X3N0ZXAsIGlzX3Bvc2l0aXZlLCBpc19zdGVwX3Bvc2l0aXZlLCBpdmFsLCBrZXksIGtleV9saXQsIGtleV92YWwsIGtleXMsIGtleXNfYWNjZXNzLCBrZXlzX2xlbiwga2V5c192YWwsIGt2YWwsIGxlbiwgbGVuX3JocywgbGVuX3ZhbCwgbG9vcF9ib2R5LCBsb29wX2tleXMsIGxvb3Bfc291cmNlLCBuZWcsIHBvcywgcG9zaXRpdmUsIHByZV9ib2R5LCByZWYsIHJlZl92YWwsIHJlZl92YWxfY29weSwgc2NvcGUsIHNvdXJjZV9hY2Nlc3MsIHN0YXJ0X3Jocywgc3RlcCwgc3RlcE51bSwgc3RlcFZhbCwgc3RlcFZhciwgc3RlcF92YXIsIHN0ZXBfdmFyX3ZhbCwgXywgX3JlZjI7XG4gICAgICBib2R5ID0gZC5ib2R5O1xuICAgICAgY29uZGl0aW9uID0gbnVsbDtcbiAgICAgIGluaXQgPSBbXTtcbiAgICAgIHN0ZXAgPSBudWxsO1xuICAgICAgc2NvcGUgPSBvLnNjb3BlO1xuICAgICAgcHJlX2JvZHkgPSBuZXcgQmxvY2soW10pO1xuICAgICAgaWYgKHRoaXMub2JqZWN0KSB7XG4gICAgICAgIHJlZiA9IHNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJyk7XG4gICAgICAgIHJlZl92YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwocmVmKSk7XG4gICAgICAgIGExID0gbmV3IEFzc2lnbihyZWZfdmFsLCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIGtleXMgPSBzY29wZS5mcmVlVmFyaWFibGUoJ2tleXMnKTtcbiAgICAgICAga2V5c192YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoa2V5cykpO1xuICAgICAgICBrZXkgPSBzY29wZS5mcmVlVmFyaWFibGUoJ2snKTtcbiAgICAgICAga2V5X2xpdCA9IG5ldyBMaXRlcmFsKGtleSk7XG4gICAgICAgIGtleV92YWwgPSBuZXcgVmFsdWUoa2V5X2xpdCk7XG4gICAgICAgIGVtcHR5X2FyciA9IG5ldyBWYWx1ZShuZXcgQXJyKTtcbiAgICAgICAgbG9vcF9ib2R5ID0gbmV3IEJsb2NrKFtrZXlfdmFsXSk7XG4gICAgICAgIGxvb3Bfc291cmNlID0ge1xuICAgICAgICAgIG9iamVjdDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiBrZXlfbGl0LFxuICAgICAgICAgIHNvdXJjZTogcmVmX3ZhbFxuICAgICAgICB9O1xuICAgICAgICBsb29wX2tleXMgPSBuZXcgRm9yKGxvb3BfYm9keSwgbG9vcF9zb3VyY2UpO1xuICAgICAgICBhMiA9IG5ldyBBc3NpZ24oa2V5c192YWwsIGxvb3Bfa2V5cyk7XG4gICAgICAgIGluYW1lID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdpJyk7XG4gICAgICAgIGl2YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaW5hbWUpKTtcbiAgICAgICAgYTMgPSBuZXcgQXNzaWduKGl2YWwsIG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgwKSkpO1xuICAgICAgICBpbml0ID0gW2ExLCBhMiwgYTNdO1xuICAgICAgICBrZXlzX2xlbiA9IGtleXNfdmFsLmNvcHkoKTtcbiAgICAgICAga2V5c19sZW4uYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwibGVuZ3RoXCIpKSkpO1xuICAgICAgICBjb25kaXRpb24gPSBuZXcgT3AoJzwnLCBpdmFsLCBrZXlzX2xlbik7XG4gICAgICAgIHN0ZXAgPSBuZXcgT3AoJysrJywgaXZhbCk7XG4gICAgICAgIGlmICh0aGlzLm5hbWUpIHtcbiAgICAgICAgICBzb3VyY2VfYWNjZXNzID0gcmVmX3ZhbC5jb3B5KCk7XG4gICAgICAgICAgc291cmNlX2FjY2Vzcy5hZGQobmV3IEluZGV4KHRoaXMuaW5kZXgpKTtcbiAgICAgICAgICBhNSA9IG5ldyBBc3NpZ24odGhpcy5uYW1lLCBzb3VyY2VfYWNjZXNzKTtcbiAgICAgICAgICBwcmVfYm9keS51bnNoaWZ0KGE1KTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzX2FjY2VzcyA9IGtleXNfdmFsLmNvcHkoKTtcbiAgICAgICAga2V5c19hY2Nlc3MuYWRkKG5ldyBJbmRleChpdmFsKSk7XG4gICAgICAgIGE0ID0gbmV3IEFzc2lnbih0aGlzLmluZGV4LCBrZXlzX2FjY2Vzcyk7XG4gICAgICAgIHByZV9ib2R5LnVuc2hpZnQoYTQpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnJhbmdlKSB7XG4gICAgICAgIGlmICghdGhpcy5uYW1lKSB7XG4gICAgICAgICAgdGhpcy5uYW1lID0gbmV3IExpdGVyYWwoZC5rdmFyKTtcbiAgICAgICAgfVxuICAgICAgICBiZWdpbiA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZShcImJlZ2luXCIpKSk7XG4gICAgICAgIGVuZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZShcImVuZFwiKSkpO1xuICAgICAgICBwb3NpdGl2ZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZShcInBvc2l0aXZlXCIpKSk7XG4gICAgICAgIHN0ZXBWYWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoXCJzdGVwXCIpKSk7XG4gICAgICAgIGlmICh0aGlzLnN0ZXApIHtcbiAgICAgICAgICBhX3N0ZXBWYWwgPSBuZXcgQXNzaWduKHN0ZXBWYWwsIHRoaXMuc3RlcCk7XG4gICAgICAgICAgYV9wb3NpdGl2ZSA9IG5ldyBBc3NpZ24ocG9zaXRpdmUsIG5ldyBPcChcIj5cIiwgc3RlcFZhbCwgbmV3IExpdGVyYWwoMCkpLCBudWxsLCB7XG4gICAgICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpc19wb3NpdGl2ZSA9IG5ldyBPcChcIj5cIiwgZW5kLCBiZWdpbik7XG4gICAgICAgICAgYV9zdGVwVmFsID0gbmV3IElmKGlzX3Bvc2l0aXZlLCBuZXcgQXNzaWduKHN0ZXBWYWwsIG5ldyBMaXRlcmFsKDEpKSk7XG4gICAgICAgICAgYV9zdGVwVmFsLmFkZEVsc2UobmV3IEFzc2lnbihzdGVwVmFsLCBuZXcgTGl0ZXJhbCgtMSkpKTtcbiAgICAgICAgICBhX3Bvc2l0aXZlID0gbmV3IEFzc2lnbihwb3NpdGl2ZSwgaXNfcG9zaXRpdmUsIG51bGwsIHtcbiAgICAgICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN0ZXAgPSBuZXcgT3AoJys9JywgdGhpcy5uYW1lLCBzdGVwVmFsKTtcbiAgICAgICAgZXhjbCA9IHRoaXMuc291cmNlLmJhc2UuZXhjbHVzaXZlID8gXCI9XCIgOiAnJztcbiAgICAgICAgcG9zID0gbmV3IE9wKFwiJiZcIiwgbmV3IE9wKFwiPT09XCIsIHBvc2l0aXZlLCBuZXcgTGl0ZXJhbCh0cnVlKSksIG5ldyBPcChcIj5cIiArIGV4Y2wsIHRoaXMubmFtZSwgdGhpcy5zb3VyY2UuYmFzZS50bykpO1xuICAgICAgICBuZWcgPSBuZXcgT3AoXCImJlwiLCBuZXcgT3AoXCI9PT1cIiwgcG9zaXRpdmUsIG5ldyBMaXRlcmFsKGZhbHNlKSksIG5ldyBPcChcIjxcIiArIGV4Y2wsIHRoaXMubmFtZSwgdGhpcy5zb3VyY2UuYmFzZS50bykpO1xuICAgICAgICBjb25kaXRpb24gPSBuZXcgT3AoXCJ8fFwiLCBuZXcgUGFyZW5zKHBvcyksIG5ldyBQYXJlbnMobmVnKSk7XG4gICAgICAgIGNvbmRpdGlvbiA9IGNvbmRpdGlvbi5pbnZlcnQoKTtcbiAgICAgICAgaW5pdCA9IFtcbiAgICAgICAgICBuZXcgQXNzaWduKHRoaXMubmFtZSwgdGhpcy5zb3VyY2UuYmFzZS5mcm9tKSwgbmV3IEFzc2lnbihiZWdpbiwgdGhpcy5zb3VyY2UuYmFzZS5mcm9tLCBudWxsLCB7XG4gICAgICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgICAgICB9KSwgbmV3IEFzc2lnbihlbmQsIHRoaXMuc291cmNlLmJhc2UudG8sIG51bGwsIHtcbiAgICAgICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgICAgIH0pLCBhX3N0ZXBWYWwsIGFfcG9zaXRpdmVcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMucmFuZ2UgJiYgdGhpcy5uYW1lKSB7XG4gICAgICAgIGt2YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoZC5rdmFyKSk7XG4gICAgICAgIGxlbiA9IHNjb3BlLmZyZWVWYXJpYWJsZSgnbGVuJyk7XG4gICAgICAgIHJlZiA9IHNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJyk7XG4gICAgICAgIHJlZl92YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwocmVmKSk7XG4gICAgICAgIGxlbl92YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwobGVuKSk7XG4gICAgICAgIGExID0gbmV3IEFzc2lnbihyZWZfdmFsLCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIGxlbl9yaHMgPSByZWZfdmFsLmNvcHkoKS5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJsZW5ndGhcIikpKSk7XG4gICAgICAgIGEyID0gbmV3IEFzc2lnbihsZW5fdmFsLCBsZW5fcmhzKTtcbiAgICAgICAgaW5pdCA9IFthMSwgYTJdO1xuICAgICAgICBpZiAoIXRoaXMuc3RlcCkge1xuICAgICAgICAgIGEzID0gbmV3IEFzc2lnbihrdmFsLCBuZXcgTGl0ZXJhbCgwKSk7XG4gICAgICAgICAgc3RlcCA9IG5ldyBPcCgnKysnLCBrdmFsKTtcbiAgICAgICAgICBjb25kaXRpb24gPSBuZXcgT3AoJzwnLCBrdmFsLCBsZW5fdmFsKTtcbiAgICAgICAgICBpbml0LnB1c2goYTMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9yZWYyID0gdGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyh0aGlzLnN0ZXAuY2FjaGUobywgTEVWRUxfTElTVCkpLCBfID0gX3JlZjJbMF0sIHN0ZXBWYXIgPSBfcmVmMlsxXTtcbiAgICAgICAgICBzdGVwTnVtID0gc3RlcFZhci5tYXRjaChOVU1CRVIpO1xuICAgICAgICAgIGlmIChzdGVwTnVtKSB7XG4gICAgICAgICAgICBzdGVwID0gbmV3IEFzc2lnbihrdmFsLCBuZXcgT3AoJysnLCBrdmFsLCB0aGlzLnN0ZXApKTtcbiAgICAgICAgICAgIGRvd24gPSBwYXJzZU51bShzdGVwTnVtWzBdKSA8IDA7XG4gICAgICAgICAgICBpZiAoZG93bikge1xuICAgICAgICAgICAgICBhMyA9IG5ldyBBc3NpZ24oa3ZhbCwgbmV3IE9wKCctJywgbGVuX3ZhbCwgbmV3IExpdGVyYWwoMSkpKTtcbiAgICAgICAgICAgICAgY29uZGl0aW9uID0gbmV3IE9wKCc+PScsIGt2YWwsIG5ldyBMaXRlcmFsKDApKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGEzID0gbmV3IEFzc2lnbihrdmFsLCBuZXcgTGl0ZXJhbCgwKSk7XG4gICAgICAgICAgICAgIGNvbmRpdGlvbiA9IG5ldyBPcCgnPCcsIGt2YWwsIGxlbl92YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdC5wdXNoKGEzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RlcF92YXIgPSBzY29wZS5mcmVlVmFyaWFibGUoJ3N0ZXAnKTtcbiAgICAgICAgICAgIHN0ZXBfdmFyX3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChzdGVwX3ZhcikpO1xuICAgICAgICAgICAgaW5pdF9zdGVwID0gbmV3IEFzc2lnbihzdGVwX3Zhcl92YWwsIG5ldyBWYWx1ZSh0aGlzLnN0ZXApKTtcbiAgICAgICAgICAgIGlzX3N0ZXBfcG9zaXRpdmUgPSBuZXcgT3AoJz4nLCBzdGVwX3Zhcl92YWwsIG5ldyBMaXRlcmFsKDApKTtcbiAgICAgICAgICAgIHN0YXJ0X3JocyA9IG5ldyBJZihpc19zdGVwX3Bvc2l0aXZlLCBuZXcgVmFsdWUobmV3IExpdGVyYWwoMCkpKTtcbiAgICAgICAgICAgIHN0YXJ0X3Jocy5hZGRFbHNlKG5ldyBPcCgnLScsIGxlbl92YWwsIG5ldyBMaXRlcmFsKDEpKSk7XG4gICAgICAgICAgICBzdGVwID0gbmV3IEFzc2lnbihrdmFsLCBuZXcgT3AoJysnLCBrdmFsLCBzdGVwX3Zhcl92YWwpKTtcbiAgICAgICAgICAgIGEzID0gbmV3IEFzc2lnbihrdmFsLCBzdGFydF9yaHMpO1xuICAgICAgICAgICAgY29uZGl0aW9uID0gbmV3IE9wKCcmJicsIG5ldyBPcCgnPj0nLCBrdmFsLCBuZXcgTGl0ZXJhbCgwKSksIG5ldyBPcCgnPCcsIGt2YWwsIGxlbl92YWwpKTtcbiAgICAgICAgICAgIGluaXQucHVzaChpbml0X3N0ZXAsIGEzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVmX3ZhbF9jb3B5ID0gcmVmX3ZhbC5jb3B5KCk7XG4gICAgICAgIHJlZl92YWxfY29weS5hZGQobmV3IEluZGV4KGt2YWwpKTtcbiAgICAgICAgYTQgPSBuZXcgQXNzaWduKHRoaXMubmFtZSwgcmVmX3ZhbF9jb3B5KTtcbiAgICAgICAgcHJlX2JvZHkudW5zaGlmdChhNCk7XG4gICAgICB9XG4gICAgICBndWFyZCA9IGQuZ3VhcmQ7XG4gICAgICBiID0gdGhpcy5pY2VkV3JhcCh7XG4gICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICBzdGVwOiBzdGVwLFxuICAgICAgICBndWFyZDogZ3VhcmQsXG4gICAgICAgIHByZV9ib2R5OiBwcmVfYm9keVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYi5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZvcjtcblxuICB9KShXaGlsZSk7XG5cbiAgZXhwb3J0cy5Td2l0Y2ggPSBTd2l0Y2ggPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN3aXRjaCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFN3aXRjaChzdWJqZWN0LCBjYXNlcywgb3RoZXJ3aXNlKSB7XG4gICAgICB0aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgdGhpcy5jYXNlcyA9IGNhc2VzO1xuICAgICAgdGhpcy5vdGhlcndpc2UgPSBvdGhlcndpc2U7XG4gICAgICBTd2l0Y2guX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnc3ViamVjdCcsICdjYXNlcycsICdvdGhlcndpc2UnXTtcblxuICAgIFN3aXRjaC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBZRVM7XG5cbiAgICBTd2l0Y2gucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGJsb2NrLCBjb25kcywganVtcE5vZGUsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgaWYgKG8gPT0gbnVsbCkge1xuICAgICAgICBvID0ge1xuICAgICAgICAgIGJsb2NrOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBfcmVmMiA9IHRoaXMuY2FzZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIF9yZWYzID0gX3JlZjJbX2ldLCBjb25kcyA9IF9yZWYzWzBdLCBibG9jayA9IF9yZWYzWzFdO1xuICAgICAgICBpZiAoanVtcE5vZGUgPSBibG9jay5qdW1wcyhvKSkge1xuICAgICAgICAgIHJldHVybiBqdW1wTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIChfcmVmNCA9IHRoaXMub3RoZXJ3aXNlKSAhPSBudWxsID8gX3JlZjQuanVtcHMobykgOiB2b2lkIDA7XG4gICAgfTtcblxuICAgIFN3aXRjaC5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgdmFyIHBhaXIsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjM7XG4gICAgICBfcmVmMiA9IHRoaXMuY2FzZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHBhaXIgPSBfcmVmMltfaV07XG4gICAgICAgIHBhaXJbMV0ubWFrZVJldHVybihyZXMpO1xuICAgICAgfVxuICAgICAgaWYgKHJlcykge1xuICAgICAgICB0aGlzLm90aGVyd2lzZSB8fCAodGhpcy5vdGhlcndpc2UgPSBuZXcgQmxvY2soW25ldyBMaXRlcmFsKCd2b2lkIDAnKV0pKTtcbiAgICAgIH1cbiAgICAgIGlmICgoX3JlZjMgPSB0aGlzLm90aGVyd2lzZSkgIT0gbnVsbCkge1xuICAgICAgICBfcmVmMy5tYWtlUmV0dXJuKHJlcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgU3dpdGNoLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBibG9jaywgYm9keSwgY29uZCwgY29uZGl0aW9ucywgZXhwciwgZnJhZ21lbnRzLCBpLCBpZHQxLCBpZHQyLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgaWYgKHRoaXMuc3ViamVjdCkge1xuICAgICAgICB0aGlzLnN1YmplY3QuaWNlZFN0YXRlbWVudEFzc2VydGlvbigpO1xuICAgICAgfVxuICAgICAgaWR0MSA9IG8uaW5kZW50ICsgVEFCO1xuICAgICAgaWR0MiA9IG8uaW5kZW50ID0gaWR0MSArIFRBQjtcbiAgICAgIGZyYWdtZW50cyA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiICsgXCJzd2l0Y2ggKFwiKSwgKHRoaXMuc3ViamVjdCA/IHRoaXMuc3ViamVjdC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pIDogdGhpcy5tYWtlQ29kZShcImZhbHNlXCIpKSwgdGhpcy5tYWtlQ29kZShcIikge1xcblwiKSk7XG4gICAgICBfcmVmMiA9IHRoaXMuY2FzZXM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgX3JlZjMgPSBfcmVmMltpXSwgY29uZGl0aW9ucyA9IF9yZWYzWzBdLCBibG9jayA9IF9yZWYzWzFdO1xuICAgICAgICBfcmVmNCA9IGZsYXR0ZW4oW2NvbmRpdGlvbnNdKTtcbiAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjQubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgY29uZCA9IF9yZWY0W19qXTtcbiAgICAgICAgICBpZiAoIXRoaXMuc3ViamVjdCkge1xuICAgICAgICAgICAgY29uZCA9IGNvbmQuaW52ZXJ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZyYWdtZW50cyA9IGZyYWdtZW50cy5jb25jYXQodGhpcy5tYWtlQ29kZShpZHQxICsgXCJjYXNlIFwiKSwgY29uZC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pLCB0aGlzLm1ha2VDb2RlKFwiOlxcblwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChib2R5ID0gYmxvY2suY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmcmFnbWVudHMgPSBmcmFnbWVudHMuY29uY2F0KGJvZHksIHRoaXMubWFrZUNvZGUoJ1xcbicpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA9PT0gdGhpcy5jYXNlcy5sZW5ndGggLSAxICYmICF0aGlzLm90aGVyd2lzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGV4cHIgPSB0aGlzLmxhc3ROb25Db21tZW50KGJsb2NrLmV4cHJlc3Npb25zKTtcbiAgICAgICAgaWYgKGV4cHIgaW5zdGFuY2VvZiBSZXR1cm4gfHwgKGV4cHIgaW5zdGFuY2VvZiBMaXRlcmFsICYmIGV4cHIuanVtcHMoKSAmJiBleHByLnZhbHVlICE9PSAnZGVidWdnZXInKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZyYWdtZW50cy5wdXNoKGNvbmQubWFrZUNvZGUoaWR0MiArICdicmVhaztcXG4nKSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vdGhlcndpc2UgJiYgdGhpcy5vdGhlcndpc2UuZXhwcmVzc2lvbnMubGVuZ3RoKSB7XG4gICAgICAgIGZyYWdtZW50cy5wdXNoLmFwcGx5KGZyYWdtZW50cywgW3RoaXMubWFrZUNvZGUoaWR0MSArIFwiZGVmYXVsdDpcXG5cIildLmNvbmNhdChfX3NsaWNlLmNhbGwodGhpcy5vdGhlcndpc2UuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCkpLCBbdGhpcy5tYWtlQ29kZShcIlxcblwiKV0pKTtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUodGhpcy50YWIgKyAnfScpKTtcbiAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgfTtcblxuICAgIFN3aXRjaC5wcm90b3R5cGUuaWNlZENhbGxDb250aW51YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBibG9jaywgY29uZGl0aW9uLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzO1xuICAgICAgX3JlZjIgPSB0aGlzLmNhc2VzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBfcmVmMyA9IF9yZWYyW19pXSwgY29uZGl0aW9uID0gX3JlZjNbMF0sIGJsb2NrID0gX3JlZjNbMV07XG4gICAgICAgIGJsb2NrLmljZWRUaHJlYWRSZXR1cm4oKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm90aGVyd2lzZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm90aGVyd2lzZS5pY2VkVGhyZWFkUmV0dXJuKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vdGhlcndpc2UgPSBuZXcgQmxvY2soW25ldyBJY2VkVGFpbENhbGxdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFN3aXRjaDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLklmID0gSWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKElmLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gSWYoY29uZGl0aW9uLCBib2R5LCBvcHRpb25zKSB7XG4gICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBJZi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuY29uZGl0aW9uID0gb3B0aW9ucy50eXBlID09PSAndW5sZXNzJyA/IGNvbmRpdGlvbi5pbnZlcnQoKSA6IGNvbmRpdGlvbjtcbiAgICAgIHRoaXMuZWxzZUJvZHkgPSBudWxsO1xuICAgICAgdGhpcy5pc0NoYWluID0gZmFsc2U7XG4gICAgICB0aGlzLnNvYWsgPSBvcHRpb25zLnNvYWs7XG4gICAgfVxuXG4gICAgSWYucHJvdG90eXBlLmNoaWxkcmVuID0gWydjb25kaXRpb24nLCAnYm9keScsICdlbHNlQm9keSddO1xuXG4gICAgSWYucHJvdG90eXBlLmJvZHlOb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKF9yZWYyID0gdGhpcy5ib2R5KSAhPSBudWxsID8gX3JlZjIudW53cmFwKCkgOiB2b2lkIDA7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5lbHNlQm9keU5vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoX3JlZjIgPSB0aGlzLmVsc2VCb2R5KSAhPSBudWxsID8gX3JlZjIudW53cmFwKCkgOiB2b2lkIDA7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5hZGRFbHNlID0gZnVuY3Rpb24oZWxzZUJvZHkpIHtcbiAgICAgIGlmICh0aGlzLmlzQ2hhaW4pIHtcbiAgICAgICAgdGhpcy5lbHNlQm9keU5vZGUoKS5hZGRFbHNlKGVsc2VCb2R5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNDaGFpbiA9IGVsc2VCb2R5IGluc3RhbmNlb2YgSWY7XG4gICAgICAgIHRoaXMuZWxzZUJvZHkgPSB0aGlzLmVuc3VyZUJsb2NrKGVsc2VCb2R5KTtcbiAgICAgICAgdGhpcy5lbHNlQm9keS51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcoZWxzZUJvZHkubG9jYXRpb25EYXRhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKG8gIT0gbnVsbCA/IG8ubGV2ZWwgOiB2b2lkIDApID09PSBMRVZFTF9UT1AgfHwgdGhpcy5ib2R5Tm9kZSgpLmlzU3RhdGVtZW50KG8pIHx8ICgoX3JlZjIgPSB0aGlzLmVsc2VCb2R5Tm9kZSgpKSAhPSBudWxsID8gX3JlZjIuaXNTdGF0ZW1lbnQobykgOiB2b2lkIDApO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5Lmp1bXBzKG8pIHx8ICgoX3JlZjIgPSB0aGlzLmVsc2VCb2R5KSAhPSBudWxsID8gX3JlZjIuanVtcHMobykgOiB2b2lkIDApO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB0aGlzLmNvbmRpdGlvbi5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uKCk7XG4gICAgICBpZiAodGhpcy5pc1N0YXRlbWVudChvIHx8IHRoaXMuaWNlZElzQ3BzUGl2b3QoKSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVN0YXRlbWVudChvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVFeHByZXNzaW9uKG8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgaWYgKHJlcykge1xuICAgICAgICB0aGlzLmVsc2VCb2R5IHx8ICh0aGlzLmVsc2VCb2R5ID0gbmV3IEJsb2NrKFtuZXcgTGl0ZXJhbCgndm9pZCAwJyldKSk7XG4gICAgICB9XG4gICAgICB0aGlzLmJvZHkgJiYgKHRoaXMuYm9keSA9IG5ldyBCbG9jayhbdGhpcy5ib2R5Lm1ha2VSZXR1cm4ocmVzKV0pKTtcbiAgICAgIHRoaXMuZWxzZUJvZHkgJiYgKHRoaXMuZWxzZUJvZHkgPSBuZXcgQmxvY2soW3RoaXMuZWxzZUJvZHkubWFrZVJldHVybihyZXMpXSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5lbnN1cmVCbG9jayA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgQmxvY2spIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrKFtub2RlXSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5jb21waWxlU3RhdGVtZW50ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgYm9keSwgY2hpbGQsIGNvbmQsIGV4ZXEsIGlmUGFydCwgaW5kZW50O1xuICAgICAgY2hpbGQgPSBkZWwobywgJ2NoYWluQ2hpbGQnKTtcbiAgICAgIGV4ZXEgPSBkZWwobywgJ2lzRXhpc3RlbnRpYWxFcXVhbHMnKTtcbiAgICAgIGlmIChleGVxKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWYodGhpcy5jb25kaXRpb24uaW52ZXJ0KCksIHRoaXMuZWxzZUJvZHlOb2RlKCksIHtcbiAgICAgICAgICB0eXBlOiAnaWYnXG4gICAgICAgIH0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgIH1cbiAgICAgIGluZGVudCA9IG8uaW5kZW50ICsgVEFCO1xuICAgICAgY29uZCA9IHRoaXMuY29uZGl0aW9uLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTik7XG4gICAgICBib2R5ID0gdGhpcy5lbnN1cmVCbG9jayh0aGlzLmJvZHkpLmNvbXBpbGVUb0ZyYWdtZW50cyhtZXJnZShvLCB7XG4gICAgICAgIGluZGVudDogaW5kZW50XG4gICAgICB9KSk7XG4gICAgICBpZlBhcnQgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcImlmIChcIiksIGNvbmQsIHRoaXMubWFrZUNvZGUoXCIpIHtcXG5cIiksIGJvZHksIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJ9XCIpKTtcbiAgICAgIGlmICghY2hpbGQpIHtcbiAgICAgICAgaWZQYXJ0LnVuc2hpZnQodGhpcy5tYWtlQ29kZSh0aGlzLnRhYikpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmVsc2VCb2R5KSB7XG4gICAgICAgIHJldHVybiBpZlBhcnQ7XG4gICAgICB9XG4gICAgICBhbnN3ZXIgPSBpZlBhcnQuY29uY2F0KHRoaXMubWFrZUNvZGUoJyBlbHNlICcpKTtcbiAgICAgIGlmICh0aGlzLmlzQ2hhaW4pIHtcbiAgICAgICAgby5jaGFpbkNoaWxkID0gdHJ1ZTtcbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdCh0aGlzLmVsc2VCb2R5LnVud3JhcCgpLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQodGhpcy5tYWtlQ29kZShcIntcXG5cIiksIHRoaXMuZWxzZUJvZHkuY29tcGlsZVRvRnJhZ21lbnRzKG1lcmdlKG8sIHtcbiAgICAgICAgICBpbmRlbnQ6IGluZGVudFxuICAgICAgICB9KSwgTEVWRUxfVE9QKSwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcIn1cIikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmNvbXBpbGVFeHByZXNzaW9uID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFsdCwgYm9keSwgY29uZCwgZnJhZ21lbnRzO1xuICAgICAgY29uZCA9IHRoaXMuY29uZGl0aW9uLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9DT05EKTtcbiAgICAgIGJvZHkgPSB0aGlzLmJvZHlOb2RlKCkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgICAgYWx0ID0gdGhpcy5lbHNlQm9keU5vZGUoKSA/IHRoaXMuZWxzZUJvZHlOb2RlKCkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpIDogW3RoaXMubWFrZUNvZGUoJ3ZvaWQgMCcpXTtcbiAgICAgIGZyYWdtZW50cyA9IGNvbmQuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgPyBcIiksIGJvZHksIHRoaXMubWFrZUNvZGUoXCIgOiBcIiksIGFsdCk7XG4gICAgICBpZiAoby5sZXZlbCA+PSBMRVZFTF9DT05EKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhmcmFnbWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLnVuZm9sZFNvYWsgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnNvYWsgJiYgdGhpcztcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmljZWRDYWxsQ29udGludWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5lbHNlQm9keSkge1xuICAgICAgICB0aGlzLmVsc2VCb2R5LmljZWRUaHJlYWRSZXR1cm4oKTtcbiAgICAgICAgdGhpcy5pc0NoYWluID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkZEVsc2UobmV3IEljZWRUYWlsQ2FsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5ib2R5LmljZWRUaHJlYWRSZXR1cm4oKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElmO1xuXG4gIH0pKEJhc2UpO1xuXG4gIENsb3N1cmUgPSB7XG4gICAgd3JhcDogZnVuY3Rpb24oZXhwcmVzc2lvbnMsIHN0YXRlbWVudCwgbm9SZXR1cm4pIHtcbiAgICAgIHZhciBhcmdzLCBhcmd1bWVudHNOb2RlLCBjYWxsLCBmdW5jLCBtZXRoO1xuICAgICAgaWYgKGV4cHJlc3Npb25zLmp1bXBzKCkpIHtcbiAgICAgICAgcmV0dXJuIGV4cHJlc3Npb25zO1xuICAgICAgfVxuICAgICAgZnVuYyA9IG5ldyBDb2RlKFtdLCBCbG9jay53cmFwKFtleHByZXNzaW9uc10pKTtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGFyZ3VtZW50c05vZGUgPSBleHByZXNzaW9ucy5jb250YWlucyh0aGlzLmlzTGl0ZXJhbEFyZ3VtZW50cyk7XG4gICAgICBpZiAoYXJndW1lbnRzTm9kZSAmJiBleHByZXNzaW9ucy5jbGFzc0JvZHkpIHtcbiAgICAgICAgYXJndW1lbnRzTm9kZS5lcnJvcihcIkNsYXNzIGJvZGllcyBzaG91bGRuJ3QgcmVmZXJlbmNlIGFyZ3VtZW50c1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmd1bWVudHNOb2RlIHx8IGV4cHJlc3Npb25zLmNvbnRhaW5zKHRoaXMuaXNMaXRlcmFsVGhpcykpIHtcbiAgICAgICAgbWV0aCA9IG5ldyBMaXRlcmFsKGFyZ3VtZW50c05vZGUgPyAnYXBwbHknIDogJ2NhbGwnKTtcbiAgICAgICAgYXJncyA9IFtuZXcgTGl0ZXJhbCgndGhpcycpXTtcbiAgICAgICAgaWYgKGFyZ3VtZW50c05vZGUpIHtcbiAgICAgICAgICBhcmdzLnB1c2gobmV3IExpdGVyYWwoJ2FyZ3VtZW50cycpKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jID0gbmV3IFZhbHVlKGZ1bmMsIFtuZXcgQWNjZXNzKG1ldGgpXSk7XG4gICAgICB9XG4gICAgICBmdW5jLm5vUmV0dXJuID0gbm9SZXR1cm47XG4gICAgICBjYWxsID0gbmV3IENhbGwoZnVuYywgYXJncyk7XG4gICAgICBpZiAoc3RhdGVtZW50KSB7XG4gICAgICAgIHJldHVybiBCbG9jay53cmFwKFtjYWxsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2FsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIGlzTGl0ZXJhbEFyZ3VtZW50czogZnVuY3Rpb24obm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBMaXRlcmFsICYmIG5vZGUudmFsdWUgPT09ICdhcmd1bWVudHMnICYmICFub2RlLmFzS2V5O1xuICAgIH0sXG4gICAgaXNMaXRlcmFsVGhpczogZnVuY3Rpb24obm9kZSkge1xuICAgICAgcmV0dXJuIChub2RlIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBub2RlLnZhbHVlID09PSAndGhpcycgJiYgIW5vZGUuYXNLZXkpIHx8IChub2RlIGluc3RhbmNlb2YgQ29kZSAmJiBub2RlLmJvdW5kKSB8fCAobm9kZSBpbnN0YW5jZW9mIENhbGwgJiYgbm9kZS5pc1N1cGVyKTtcbiAgICB9XG4gIH07XG5cbiAgdW5mb2xkU29hayA9IGZ1bmN0aW9uKG8sIHBhcmVudCwgbmFtZSkge1xuICAgIHZhciBpZm47XG4gICAgaWYgKCEoaWZuID0gcGFyZW50W25hbWVdLnVuZm9sZFNvYWsobykpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHBhcmVudFtuYW1lXSA9IGlmbi5ib2R5O1xuICAgIGlmbi5ib2R5ID0gbmV3IFZhbHVlKHBhcmVudCk7XG4gICAgcmV0dXJuIGlmbjtcbiAgfTtcblxuICBDcHNDYXNjYWRlID0ge1xuICAgIHdyYXA6IGZ1bmN0aW9uKHN0YXRlbWVudCwgcmVzdCwgcmV0dXJuVmFsdWUsIG8pIHtcbiAgICAgIHZhciBhcmdzLCBibG9jaywgY2FsbCwgY29udCwgZSwgZnVuYztcbiAgICAgIGZ1bmMgPSBuZXcgQ29kZShbbmV3IFBhcmFtKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5rKSldLCBCbG9jay53cmFwKFtzdGF0ZW1lbnRdKSwgJ2ljZWRnZW4nKTtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGlmIChyZXR1cm5WYWx1ZSkge1xuICAgICAgICByZXR1cm5WYWx1ZS5iaW5kTmFtZShvKTtcbiAgICAgICAgYXJncy5wdXNoKHJldHVyblZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGJsb2NrID0gQmxvY2sud3JhcChbcmVzdF0pO1xuICAgICAgaWYgKChlID0gYmxvY2suaWNlZEdldFNpbmdsZSgpKSAmJiBlIGluc3RhbmNlb2YgSWNlZFRhaWxDYWxsICYmIGUuY2FuSW5saW5lKCkpIHtcbiAgICAgICAgY29udCA9IGUuZXh0cmFjdEZ1bmMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnQgPSBuZXcgQ29kZShhcmdzLCBibG9jaywgJ2ljZWRnZW4nKTtcbiAgICAgIH1cbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChmdW5jLCBbY29udF0pO1xuICAgICAgcmV0dXJuIG5ldyBCbG9jayhbY2FsbF0pO1xuICAgIH1cbiAgfTtcblxuICBJY2VkVGFpbENhbGwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEljZWRUYWlsQ2FsbCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEljZWRUYWlsQ2FsbChmdW5jLCB2YWwpIHtcbiAgICAgIHRoaXMuZnVuYyA9IGZ1bmM7XG4gICAgICBpZiAodmFsID09IG51bGwpIHtcbiAgICAgICAgdmFsID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIEljZWRUYWlsQ2FsbC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIGlmICghdGhpcy5mdW5jKSB7XG4gICAgICAgIHRoaXMuZnVuYyA9IGljZWRbXCJjb25zdFwiXS5rO1xuICAgICAgfVxuICAgICAgdGhpcy52YWx1ZSA9IHZhbDtcbiAgICB9XG5cbiAgICBJY2VkVGFpbENhbGwucHJvdG90eXBlLmNoaWxkcmVuID0gWyd2YWx1ZSddO1xuXG4gICAgSWNlZFRhaWxDYWxsLnByb3RvdHlwZS5hc3NpZ25WYWx1ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlID0gdjtcbiAgICB9O1xuXG4gICAgSWNlZFRhaWxDYWxsLnByb3RvdHlwZS5jYW5JbmxpbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy52YWx1ZSB8fCB0aGlzLnZhbHVlIGluc3RhbmNlb2YgSWNlZFJldHVyblZhbHVlO1xuICAgIH07XG5cbiAgICBJY2VkVGFpbENhbGwucHJvdG90eXBlLmxpdGVyYWxGdW5jID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IExpdGVyYWwodGhpcy5mdW5jKTtcbiAgICB9O1xuXG4gICAgSWNlZFRhaWxDYWxsLnByb3RvdHlwZS5leHRyYWN0RnVuYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBWYWx1ZSh0aGlzLmxpdGVyYWxGdW5jKCkpO1xuICAgIH07XG5cbiAgICBJY2VkVGFpbENhbGwucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFyZ3MsIGYsIG91dDtcbiAgICAgIGYgPSB0aGlzLmxpdGVyYWxGdW5jKCk7XG4gICAgICBvdXQgPSBvLmxldmVsID09PSBMRVZFTF9UT1AgPyB0aGlzLnZhbHVlID8gbmV3IEJsb2NrKFt0aGlzLnZhbHVlLCBuZXcgQ2FsbChmKV0pIDogbmV3IENhbGwoZikgOiAoYXJncyA9IHRoaXMudmFsdWUgPyBbdGhpcy52YWx1ZV0gOiBbXSwgbmV3IENhbGwoZiwgYXJncykpO1xuICAgICAgcmV0dXJuIG91dC5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEljZWRUYWlsQ2FsbDtcblxuICB9KShCYXNlKTtcblxuICBJY2VkUmV0dXJuVmFsdWUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEljZWRSZXR1cm5WYWx1ZSwgX3N1cGVyKTtcblxuICAgIEljZWRSZXR1cm5WYWx1ZS5jb3VudGVyID0gMDtcblxuICAgIGZ1bmN0aW9uIEljZWRSZXR1cm5WYWx1ZSgpIHtcbiAgICAgIEljZWRSZXR1cm5WYWx1ZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBudWxsLCBudWxsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgSWNlZFJldHVyblZhbHVlLnByb3RvdHlwZS5iaW5kTmFtZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBsO1xuICAgICAgbCA9IFwiXCIgKyAoby5zY29wZS5mcmVlVmFyaWFibGUoaWNlZFtcImNvbnN0XCJdLnBhcmFtLCBmYWxzZSkpICsgXCJfXCIgKyAoSWNlZFJldHVyblZhbHVlLmNvdW50ZXIrKyk7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lID0gbmV3IExpdGVyYWwobCk7XG4gICAgfTtcblxuICAgIEljZWRSZXR1cm5WYWx1ZS5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIGlmICghdGhpcy5uYW1lKSB7XG4gICAgICAgIHRoaXMuYmluZE5hbWUobyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gSWNlZFJldHVyblZhbHVlLl9fc3VwZXJfXy5jb21waWxlLmNhbGwodGhpcywgbyk7XG4gICAgfTtcblxuICAgIHJldHVybiBJY2VkUmV0dXJuVmFsdWU7XG5cbiAgfSkoUGFyYW0pO1xuXG4gIElubGluZVJ1bnRpbWUgPSB7XG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uKG5zX3dpbmRvdykge1xuICAgICAgdmFyIGExLCBhMiwgYWYsIGFwcGx5X2NhbGwsIGFzc2lnbm1lbnRzLCBib2R5LCBjYWxsX21ldGgsIGNuLCBjbnQsIGNudF9tZW1iZXIsIGNvbnN0cnVjdG9yX2Fzc2lnbiwgY29uc3RydWN0b3JfYm9keSwgY29uc3RydWN0b3JfY29kZSwgY29uc3RydWN0b3JfbmFtZSwgY29uc3RydWN0b3JfcGFyYW1zLCBkZWNyLCBkZWZlcl9hc3NpZ24sIGRlZmVyX2JvZHksIGRlZmVyX2NvZGUsIGRlZmVyX25hbWUsIGRlZmVyX3BhcmFtcywgZHAsIGRwX3ZhbHVlLCBmbiwgZm5fYXNzaWduLCBmbl9jb2RlLCBmbl9uYW1lLCBpZl9ib2R5LCBpZl9jb25kLCBpZl9leHByLCBpbmMsIGlubmVyX2JvZHksIGlubmVyX2NvZGUsIGlubmVyX3BhcmFtcywgaXAsIGssIGtfbWVtYmVyLCBrbGFzcywga2xhc3NfYXNzaWduLCBteV9hcHBseSwgbXlfaWYsIG15X251bGwsIG5zLCBuc19vYmosIG5zX3ZhbCwgb2JqLCBvdXRlcl9ibG9jaywgcDEsIHJldF9tZW1iZXIsIHRyX2Fzc2lnbiwgdHJfYmxvY2ssIHRyX2NvZGUsIHRyX25hbWUsIHRyX3BhcmFtcywgX2Z1bGZpbGxfYXNzaWduLCBfZnVsZmlsbF9ib2R5LCBfZnVsZmlsbF9jYWxsLCBfZnVsZmlsbF9jb2RlLCBfZnVsZmlsbF9tZXRob2QsIF9mdWxmaWxsX25hbWU7XG4gICAgICBrID0gbmV3IExpdGVyYWwoXCJjb250aW51YXRpb25cIik7XG4gICAgICBjbnQgPSBuZXcgTGl0ZXJhbChcImNvdW50XCIpO1xuICAgICAgY24gPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLkRlZmVycmFscykpO1xuICAgICAgbnMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLm5zKSk7XG4gICAgICBpZiAobnNfd2luZG93KSB7XG4gICAgICAgIG5zX3dpbmRvdy5hZGQobmV3IEFjY2VzcyhucykpO1xuICAgICAgICBucyA9IG5zX3dpbmRvdztcbiAgICAgIH1cbiAgICAgIGtfbWVtYmVyID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwidGhpc1wiKSk7XG4gICAgICBrX21lbWJlci5hZGQobmV3IEFjY2VzcyhrKSk7XG4gICAgICBwMSA9IG5ldyBQYXJhbShrX21lbWJlcik7XG4gICAgICBjbnRfbWVtYmVyID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwidGhpc1wiKSk7XG4gICAgICBjbnRfbWVtYmVyLmFkZChuZXcgQWNjZXNzKGNudCkpO1xuICAgICAgcmV0X21lbWJlciA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcInRoaXNcIikpO1xuICAgICAgcmV0X21lbWJlci5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLnJldHNsb3QpKSkpO1xuICAgICAgYTEgPSBuZXcgQXNzaWduKGNudF9tZW1iZXIsIG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgxKSkpO1xuICAgICAgYTIgPSBuZXcgQXNzaWduKHJldF9tZW1iZXIsIE5VTEwoKSk7XG4gICAgICBjb25zdHJ1Y3Rvcl9wYXJhbXMgPSBbcDFdO1xuICAgICAgY29uc3RydWN0b3JfYm9keSA9IG5ldyBCbG9jayhbYTEsIGEyXSk7XG4gICAgICBjb25zdHJ1Y3Rvcl9jb2RlID0gbmV3IENvZGUoY29uc3RydWN0b3JfcGFyYW1zLCBjb25zdHJ1Y3Rvcl9ib2R5KTtcbiAgICAgIGNvbnN0cnVjdG9yX25hbWUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJjb25zdHJ1Y3RvclwiKSk7XG4gICAgICBjb25zdHJ1Y3Rvcl9hc3NpZ24gPSBuZXcgQXNzaWduKGNvbnN0cnVjdG9yX25hbWUsIGNvbnN0cnVjdG9yX2NvZGUpO1xuICAgICAgaWZfZXhwciA9IG5ldyBDYWxsKGtfbWVtYmVyLCBbcmV0X21lbWJlcl0pO1xuICAgICAgaWZfYm9keSA9IG5ldyBCbG9jayhbaWZfZXhwcl0pO1xuICAgICAgZGVjciA9IG5ldyBPcCgnLS0nLCBjbnRfbWVtYmVyKTtcbiAgICAgIGlmX2NvbmQgPSBuZXcgT3AoJyEnLCBkZWNyKTtcbiAgICAgIG15X2lmID0gbmV3IElmKGlmX2NvbmQsIGlmX2JvZHkpO1xuICAgICAgX2Z1bGZpbGxfYm9keSA9IG5ldyBCbG9jayhbbXlfaWZdKTtcbiAgICAgIF9mdWxmaWxsX2NvZGUgPSBuZXcgQ29kZShbXSwgX2Z1bGZpbGxfYm9keSk7XG4gICAgICBfZnVsZmlsbF9uYW1lID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5mdWxmaWxsKSk7XG4gICAgICBfZnVsZmlsbF9hc3NpZ24gPSBuZXcgQXNzaWduKF9mdWxmaWxsX25hbWUsIF9mdWxmaWxsX2NvZGUpO1xuICAgICAgaW5jID0gbmV3IE9wKFwiKytcIiwgY250X21lbWJlcik7XG4gICAgICBpcCA9IG5ldyBMaXRlcmFsKFwiaW5uZXJfcGFyYW1zXCIpO1xuICAgICAgZHAgPSBuZXcgTGl0ZXJhbChcImRlZmVyX3BhcmFtc1wiKTtcbiAgICAgIGRwX3ZhbHVlID0gbmV3IFZhbHVlKGRwKTtcbiAgICAgIGNhbGxfbWV0aCA9IG5ldyBWYWx1ZShkcCk7XG4gICAgICBhZiA9IG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5hc3NpZ25fZm4pO1xuICAgICAgY2FsbF9tZXRoLmFkZChuZXcgQWNjZXNzKGFmLCBcInNvYWtcIikpO1xuICAgICAgbXlfYXBwbHkgPSBuZXcgTGl0ZXJhbChcImFwcGx5XCIpO1xuICAgICAgY2FsbF9tZXRoLmFkZChuZXcgQWNjZXNzKG15X2FwcGx5LCBcInNvYWtcIikpO1xuICAgICAgbXlfbnVsbCA9IE5VTEwoKTtcbiAgICAgIGFwcGx5X2NhbGwgPSBuZXcgQ2FsbChjYWxsX21ldGgsIFtteV9udWxsLCBuZXcgVmFsdWUoaXApXSk7XG4gICAgICBfZnVsZmlsbF9tZXRob2QgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJ0aGlzXCIpKTtcbiAgICAgIF9mdWxmaWxsX21ldGhvZC5hZGQobmV3IEFjY2VzcyhuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZnVsZmlsbCkpKTtcbiAgICAgIF9mdWxmaWxsX2NhbGwgPSBuZXcgQ2FsbChfZnVsZmlsbF9tZXRob2QsIFtdKTtcbiAgICAgIGlubmVyX2JvZHkgPSBuZXcgQmxvY2soW2FwcGx5X2NhbGwsIF9mdWxmaWxsX2NhbGxdKTtcbiAgICAgIGlubmVyX3BhcmFtcyA9IFtuZXcgUGFyYW0oaXAsIG51bGwsIHRydWUpXTtcbiAgICAgIGlubmVyX2NvZGUgPSBuZXcgQ29kZShpbm5lcl9wYXJhbXMsIGlubmVyX2JvZHksIFwiYm91bmRmdW5jXCIpO1xuICAgICAgZGVmZXJfYm9keSA9IG5ldyBCbG9jayhbaW5jLCBpbm5lcl9jb2RlXSk7XG4gICAgICBkZWZlcl9wYXJhbXMgPSBbbmV3IFBhcmFtKGRwKV07XG4gICAgICBkZWZlcl9jb2RlID0gbmV3IENvZGUoZGVmZXJfcGFyYW1zLCBkZWZlcl9ib2R5KTtcbiAgICAgIGRlZmVyX25hbWUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmRlZmVyX21ldGhvZCkpO1xuICAgICAgZGVmZXJfYXNzaWduID0gbmV3IEFzc2lnbihkZWZlcl9uYW1lLCBkZWZlcl9jb2RlKTtcbiAgICAgIGFzc2lnbm1lbnRzID0gW2NvbnN0cnVjdG9yX2Fzc2lnbiwgX2Z1bGZpbGxfYXNzaWduLCBkZWZlcl9hc3NpZ25dO1xuICAgICAgb2JqID0gbmV3IE9iaihhc3NpZ25tZW50cywgdHJ1ZSk7XG4gICAgICBib2R5ID0gbmV3IEJsb2NrKFtuZXcgVmFsdWUob2JqKV0pO1xuICAgICAga2xhc3MgPSBuZXcgQ2xhc3MobnVsbCwgbnVsbCwgYm9keSk7XG4gICAgICBrbGFzc19hc3NpZ24gPSBuZXcgQXNzaWduKGNuLCBrbGFzcywgXCJvYmplY3RcIik7XG4gICAgICBvdXRlcl9ibG9jayA9IG5ldyBCbG9jayhbTlVMTCgpXSk7XG4gICAgICBmbl9jb2RlID0gbmV3IENvZGUoW10sIG91dGVyX2Jsb2NrKTtcbiAgICAgIGZuX25hbWUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZpbmREZWZlcnJhbCkpO1xuICAgICAgZm5fYXNzaWduID0gbmV3IEFzc2lnbihmbl9uYW1lLCBmbl9jb2RlLCBcIm9iamVjdFwiKTtcbiAgICAgIGZuID0gbmV3IExpdGVyYWwoXCJfZm5cIik7XG4gICAgICB0cl9ibG9jayA9IG5ldyBCbG9jayhbbmV3IENhbGwobmV3IFZhbHVlKGZuKSwgW10pXSk7XG4gICAgICB0cl9wYXJhbXMgPSBbbmV3IFBhcmFtKGZuKV07XG4gICAgICB0cl9jb2RlID0gbmV3IENvZGUodHJfcGFyYW1zLCB0cl9ibG9jayk7XG4gICAgICB0cl9uYW1lID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS50cmFtcG9saW5lKSk7XG4gICAgICB0cl9hc3NpZ24gPSBuZXcgQXNzaWduKHRyX25hbWUsIHRyX2NvZGUsIFwib2JqZWN0XCIpO1xuICAgICAgbnNfb2JqID0gbmV3IE9iaihba2xhc3NfYXNzaWduLCBmbl9hc3NpZ24sIHRyX2Fzc2lnbl0sIHRydWUpO1xuICAgICAgbnNfdmFsID0gbmV3IFZhbHVlKG5zX29iaik7XG4gICAgICByZXR1cm4gbmV3IEFzc2lnbihucywgbnNfdmFsKTtcbiAgICB9XG4gIH07XG5cbiAgVVRJTElUSUVTID0ge1xuICAgIFwiZXh0ZW5kc1wiOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcImZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoXCIgKyAodXRpbGl0eSgnaGFzUHJvcCcpKSArIFwiLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9XCI7XG4gICAgfSxcbiAgICBiaW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSc7XG4gICAgfSxcbiAgICBpbmRleE9mOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIltdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9XCI7XG4gICAgfSxcbiAgICBtb2R1bG86IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gKCthICUgKGIgPSArYikgKyBiKSAlIGI7IH1cIjtcbiAgICB9LFxuICAgIGhhc1Byb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICd7fS5oYXNPd25Qcm9wZXJ0eSc7XG4gICAgfSxcbiAgICBzbGljZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJ1tdLnNsaWNlJztcbiAgICB9XG4gIH07XG5cbiAgTEVWRUxfVE9QID0gMTtcblxuICBMRVZFTF9QQVJFTiA9IDI7XG5cbiAgTEVWRUxfTElTVCA9IDM7XG5cbiAgTEVWRUxfQ09ORCA9IDQ7XG5cbiAgTEVWRUxfT1AgPSA1O1xuXG4gIExFVkVMX0FDQ0VTUyA9IDY7XG5cbiAgVEFCID0gJyAgJztcblxuICBJREVOVElGSUVSX1NUUiA9IFwiWyRBLVphLXpfXFxcXHg3Zi1cXFxcdWZmZmZdWyRcXFxcd1xcXFx4N2YtXFxcXHVmZmZmXSpcIjtcblxuICBJREVOVElGSUVSID0gUmVnRXhwKFwiXlwiICsgSURFTlRJRklFUl9TVFIgKyBcIiRcIik7XG5cbiAgU0lNUExFTlVNID0gL15bKy1dP1xcZCskLztcblxuICBIRVhOVU0gPSAvXlsrLV0/MHhbXFxkYS1mXSsvaTtcblxuICBOVU1CRVIgPSAvXlsrLV0/KD86MHhbXFxkYS1mXSt8XFxkKlxcLj9cXGQrKD86ZVsrLV0/XFxkKyk/KSQvaTtcblxuICBNRVRIT0RfREVGID0gUmVnRXhwKFwiXihcIiArIElERU5USUZJRVJfU1RSICsgXCIpKFxcXFwucHJvdG90eXBlKT8oPzpcXFxcLihcIiArIElERU5USUZJRVJfU1RSICsgXCIpfFxcXFxbKFxcXCIoPzpbXlxcXFxcXFxcXFxcIlxcXFxyXFxcXG5dfFxcXFxcXFxcLikqXFxcInwnKD86W15cXFxcXFxcXCdcXFxcclxcXFxuXXxcXFxcXFxcXC4pKicpXFxcXF18XFxcXFsoMHhbXFxcXGRhLWZBLUZdK3xcXFxcZCpcXFxcLj9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPylcXFxcXSkkXCIpO1xuXG4gIElTX1NUUklORyA9IC9eWydcIl0vO1xuXG4gIElTX1JFR0VYID0gL15cXC8vO1xuXG4gIHV0aWxpdHkgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIHJlZjtcbiAgICByZWYgPSBcIl9fXCIgKyBuYW1lO1xuICAgIFNjb3BlLnJvb3QuYXNzaWduKHJlZiwgVVRJTElUSUVTW25hbWVdKCkpO1xuICAgIHJldHVybiByZWY7XG4gIH07XG5cbiAgbXVsdGlkZW50ID0gZnVuY3Rpb24oY29kZSwgdGFiKSB7XG4gICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFxuL2csICckJicgKyB0YWIpO1xuICAgIHJldHVybiBjb2RlLnJlcGxhY2UoL1xccyskLywgJycpO1xuICB9O1xuXG4gIHBhcnNlTnVtID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09IG51bGwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAoeC5tYXRjaChIRVhOVU0pKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoeCwgMTYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFyc2VGbG9hdCh4KTtcbiAgICB9XG4gIH07XG5cbiAgaXNMaXRlcmFsQXJndW1lbnRzID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBub2RlLnZhbHVlID09PSAnYXJndW1lbnRzJyAmJiAhbm9kZS5hc0tleTtcbiAgfTtcblxuICBpc0xpdGVyYWxUaGlzID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiAobm9kZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgbm9kZS52YWx1ZSA9PT0gJ3RoaXMnICYmICFub2RlLmFzS2V5KSB8fCAobm9kZSBpbnN0YW5jZW9mIENvZGUgJiYgbm9kZS5ib3VuZCkgfHwgKG5vZGUgaW5zdGFuY2VvZiBDYWxsICYmIG5vZGUuaXNTdXBlcik7XG4gIH07XG5cbiAgdW5mb2xkU29hayA9IGZ1bmN0aW9uKG8sIHBhcmVudCwgbmFtZSkge1xuICAgIHZhciBpZm47XG4gICAgaWYgKCEoaWZuID0gcGFyZW50W25hbWVdLnVuZm9sZFNvYWsobykpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHBhcmVudFtuYW1lXSA9IGlmbi5ib2R5O1xuICAgIGlmbi5ib2R5ID0gbmV3IFZhbHVlKHBhcmVudCk7XG4gICAgcmV0dXJuIGlmbjtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8qIHBhcnNlciBnZW5lcmF0ZWQgYnkgamlzb24gMC40LjEzICovXG4vKlxuICBSZXR1cm5zIGEgUGFyc2VyIG9iamVjdCBvZiB0aGUgZm9sbG93aW5nIHN0cnVjdHVyZTpcblxuICBQYXJzZXI6IHtcbiAgICB5eToge31cbiAgfVxuXG4gIFBhcnNlci5wcm90b3R5cGU6IHtcbiAgICB5eToge30sXG4gICAgdHJhY2U6IGZ1bmN0aW9uKCksXG4gICAgc3ltYm9sc186IHthc3NvY2lhdGl2ZSBsaXN0OiBuYW1lID09PiBudW1iZXJ9LFxuICAgIHRlcm1pbmFsc186IHthc3NvY2lhdGl2ZSBsaXN0OiBudW1iZXIgPT0+IG5hbWV9LFxuICAgIHByb2R1Y3Rpb25zXzogWy4uLl0sXG4gICAgcGVyZm9ybUFjdGlvbjogZnVuY3Rpb24gYW5vbnltb3VzKHl5dGV4dCwgeXlsZW5nLCB5eWxpbmVubywgeXksIHl5c3RhdGUsICQkLCBfJCksXG4gICAgdGFibGU6IFsuLi5dLFxuICAgIGRlZmF1bHRBY3Rpb25zOiB7Li4ufSxcbiAgICBwYXJzZUVycm9yOiBmdW5jdGlvbihzdHIsIGhhc2gpLFxuICAgIHBhcnNlOiBmdW5jdGlvbihpbnB1dCksXG5cbiAgICBsZXhlcjoge1xuICAgICAgICBFT0Y6IDEsXG4gICAgICAgIHBhcnNlRXJyb3I6IGZ1bmN0aW9uKHN0ciwgaGFzaCksXG4gICAgICAgIHNldElucHV0OiBmdW5jdGlvbihpbnB1dCksXG4gICAgICAgIGlucHV0OiBmdW5jdGlvbigpLFxuICAgICAgICB1bnB1dDogZnVuY3Rpb24oc3RyKSxcbiAgICAgICAgbW9yZTogZnVuY3Rpb24oKSxcbiAgICAgICAgbGVzczogZnVuY3Rpb24obiksXG4gICAgICAgIHBhc3RJbnB1dDogZnVuY3Rpb24oKSxcbiAgICAgICAgdXBjb21pbmdJbnB1dDogZnVuY3Rpb24oKSxcbiAgICAgICAgc2hvd1Bvc2l0aW9uOiBmdW5jdGlvbigpLFxuICAgICAgICB0ZXN0X21hdGNoOiBmdW5jdGlvbihyZWdleF9tYXRjaF9hcnJheSwgcnVsZV9pbmRleCksXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uKCksXG4gICAgICAgIGxleDogZnVuY3Rpb24oKSxcbiAgICAgICAgYmVnaW46IGZ1bmN0aW9uKGNvbmRpdGlvbiksXG4gICAgICAgIHBvcFN0YXRlOiBmdW5jdGlvbigpLFxuICAgICAgICBfY3VycmVudFJ1bGVzOiBmdW5jdGlvbigpLFxuICAgICAgICB0b3BTdGF0ZTogZnVuY3Rpb24oKSxcbiAgICAgICAgcHVzaFN0YXRlOiBmdW5jdGlvbihjb25kaXRpb24pLFxuXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHJhbmdlczogYm9vbGVhbiAgICAgICAgICAgKG9wdGlvbmFsOiB0cnVlID09PiB0b2tlbiBsb2NhdGlvbiBpbmZvIHdpbGwgaW5jbHVkZSBhIC5yYW5nZVtdIG1lbWJlcilcbiAgICAgICAgICAgIGZsZXg6IGJvb2xlYW4gICAgICAgICAgICAgKG9wdGlvbmFsOiB0cnVlID09PiBmbGV4LWxpa2UgbGV4aW5nIGJlaGF2aW91ciB3aGVyZSB0aGUgcnVsZXMgYXJlIHRlc3RlZCBleGhhdXN0aXZlbHkgdG8gZmluZCB0aGUgbG9uZ2VzdCBtYXRjaClcbiAgICAgICAgICAgIGJhY2t0cmFja19sZXhlcjogYm9vbGVhbiAgKG9wdGlvbmFsOiB0cnVlID09PiBsZXhlciByZWdleGVzIGFyZSB0ZXN0ZWQgaW4gb3JkZXIgYW5kIGZvciBlYWNoIG1hdGNoaW5nIHJlZ2V4IHRoZSBhY3Rpb24gY29kZSBpcyBpbnZva2VkOyB0aGUgbGV4ZXIgdGVybWluYXRlcyB0aGUgc2NhbiB3aGVuIGEgdG9rZW4gaXMgcmV0dXJuZWQgYnkgdGhlIGFjdGlvbiBjb2RlKVxuICAgICAgICB9LFxuXG4gICAgICAgIHBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uKHl5LCB5eV8sICRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMsIFlZX1NUQVJUKSxcbiAgICAgICAgcnVsZXM6IFsuLi5dLFxuICAgICAgICBjb25kaXRpb25zOiB7YXNzb2NpYXRpdmUgbGlzdDogbmFtZSA9PT4gc2V0fSxcbiAgICB9XG4gIH1cblxuXG4gIHRva2VuIGxvY2F0aW9uIGluZm8gKEAkLCBfJCwgZXRjLik6IHtcbiAgICBmaXJzdF9saW5lOiBuLFxuICAgIGxhc3RfbGluZTogbixcbiAgICBmaXJzdF9jb2x1bW46IG4sXG4gICAgbGFzdF9jb2x1bW46IG4sXG4gICAgcmFuZ2U6IFtzdGFydF9udW1iZXIsIGVuZF9udW1iZXJdICAgICAgICh3aGVyZSB0aGUgbnVtYmVycyBhcmUgaW5kZXhlcyBpbnRvIHRoZSBpbnB1dCBzdHJpbmcsIHJlZ3VsYXIgemVyby1iYXNlZClcbiAgfVxuXG5cbiAgdGhlIHBhcnNlRXJyb3IgZnVuY3Rpb24gcmVjZWl2ZXMgYSAnaGFzaCcgb2JqZWN0IHdpdGggdGhlc2UgbWVtYmVycyBmb3IgbGV4ZXIgYW5kIHBhcnNlciBlcnJvcnM6IHtcbiAgICB0ZXh0OiAgICAgICAgKG1hdGNoZWQgdGV4dClcbiAgICB0b2tlbjogICAgICAgKHRoZSBwcm9kdWNlZCB0ZXJtaW5hbCB0b2tlbiwgaWYgYW55KVxuICAgIGxpbmU6ICAgICAgICAoeXlsaW5lbm8pXG4gIH1cbiAgd2hpbGUgcGFyc2VyIChncmFtbWFyKSBlcnJvcnMgd2lsbCBhbHNvIHByb3ZpZGUgdGhlc2UgbWVtYmVycywgaS5lLiBwYXJzZXIgZXJyb3JzIGRlbGl2ZXIgYSBzdXBlcnNldCBvZiBhdHRyaWJ1dGVzOiB7XG4gICAgbG9jOiAgICAgICAgICh5eWxsb2MpXG4gICAgZXhwZWN0ZWQ6ICAgIChzdHJpbmcgZGVzY3JpYmluZyB0aGUgc2V0IG9mIGV4cGVjdGVkIHRva2VucylcbiAgICByZWNvdmVyYWJsZTogKGJvb2xlYW46IFRSVUUgd2hlbiB0aGUgcGFyc2VyIGhhcyBhIGVycm9yIHJlY292ZXJ5IHJ1bGUgYXZhaWxhYmxlIGZvciB0aGlzIHBhcnRpY3VsYXIgZXJyb3IpXG4gIH1cbiovXG52YXIgcGFyc2VyID0gKGZ1bmN0aW9uKCl7XG52YXIgcGFyc2VyID0ge3RyYWNlOiBmdW5jdGlvbiB0cmFjZSgpIHsgfSxcbnl5OiB7fSxcbnN5bWJvbHNfOiB7XCJlcnJvclwiOjIsXCJSb290XCI6MyxcIkJvZHlcIjo0LFwiTGluZVwiOjUsXCJURVJNSU5BVE9SXCI6NixcIkV4cHJlc3Npb25cIjo3LFwiU3RhdGVtZW50XCI6OCxcIlJldHVyblwiOjksXCJDb21tZW50XCI6MTAsXCJTVEFURU1FTlRcIjoxMSxcIkF3YWl0XCI6MTIsXCJBV0FJVFwiOjEzLFwiQmxvY2tcIjoxNCxcIlZhbHVlXCI6MTUsXCJJbnZvY2F0aW9uXCI6MTYsXCJDb2RlXCI6MTcsXCJPcGVyYXRpb25cIjoxOCxcIkFzc2lnblwiOjE5LFwiSWZcIjoyMCxcIlRyeVwiOjIxLFwiV2hpbGVcIjoyMixcIkZvclwiOjIzLFwiU3dpdGNoXCI6MjQsXCJDbGFzc1wiOjI1LFwiVGhyb3dcIjoyNixcIkRlZmVyXCI6MjcsXCJJTkRFTlRcIjoyOCxcIk9VVERFTlRcIjoyOSxcIklkZW50aWZpZXJcIjozMCxcIklERU5USUZJRVJcIjozMSxcIkFscGhhTnVtZXJpY1wiOjMyLFwiTlVNQkVSXCI6MzMsXCJTVFJJTkdcIjozNCxcIkxpdGVyYWxcIjozNSxcIkpTXCI6MzYsXCJSRUdFWFwiOjM3LFwiREVCVUdHRVJcIjozOCxcIlVOREVGSU5FRFwiOjM5LFwiTlVMTFwiOjQwLFwiQk9PTFwiOjQxLFwiQXNzaWduYWJsZVwiOjQyLFwiPVwiOjQzLFwiQXNzaWduT2JqXCI6NDQsXCJPYmpBc3NpZ25hYmxlXCI6NDUsXCI6XCI6NDYsXCJUaGlzUHJvcGVydHlcIjo0NyxcIlJFVFVSTlwiOjQ4LFwiSEVSRUNPTU1FTlRcIjo0OSxcIlBBUkFNX1NUQVJUXCI6NTAsXCJQYXJhbUxpc3RcIjo1MSxcIlBBUkFNX0VORFwiOjUyLFwiRnVuY0dseXBoXCI6NTMsXCItPlwiOjU0LFwiPT5cIjo1NSxcIk9wdENvbW1hXCI6NTYsXCIsXCI6NTcsXCJQYXJhbVwiOjU4LFwiUGFyYW1WYXJcIjo1OSxcIi4uLlwiOjYwLFwiQXJyYXlcIjo2MSxcIk9iamVjdFwiOjYyLFwiU3BsYXRcIjo2MyxcIlNpbXBsZUFzc2lnbmFibGVcIjo2NCxcIkFjY2Vzc29yXCI6NjUsXCJQYXJlbnRoZXRpY2FsXCI6NjYsXCJSYW5nZVwiOjY3LFwiVGhpc1wiOjY4LFwiLlwiOjY5LFwiPy5cIjo3MCxcIjo6XCI6NzEsXCI/OjpcIjo3MixcIkluZGV4XCI6NzMsXCJJTkRFWF9TVEFSVFwiOjc0LFwiSW5kZXhWYWx1ZVwiOjc1LFwiSU5ERVhfRU5EXCI6NzYsXCJJTkRFWF9TT0FLXCI6NzcsXCJTbGljZVwiOjc4LFwie1wiOjc5LFwiQXNzaWduTGlzdFwiOjgwLFwifVwiOjgxLFwiQ0xBU1NcIjo4MixcIkVYVEVORFNcIjo4MyxcIk9wdEZ1bmNFeGlzdFwiOjg0LFwiQXJndW1lbnRzXCI6ODUsXCJTVVBFUlwiOjg2LFwiREVGRVJcIjo4NyxcIkZVTkNfRVhJU1RcIjo4OCxcIkNBTExfU1RBUlRcIjo4OSxcIkNBTExfRU5EXCI6OTAsXCJBcmdMaXN0XCI6OTEsXCJUSElTXCI6OTIsXCJAXCI6OTMsXCJbXCI6OTQsXCJdXCI6OTUsXCJSYW5nZURvdHNcIjo5NixcIi4uXCI6OTcsXCJBcmdcIjo5OCxcIlNpbXBsZUFyZ3NcIjo5OSxcIlRSWVwiOjEwMCxcIkNhdGNoXCI6MTAxLFwiRklOQUxMWVwiOjEwMixcIkNBVENIXCI6MTAzLFwiVEhST1dcIjoxMDQsXCIoXCI6MTA1LFwiKVwiOjEwNixcIldoaWxlU291cmNlXCI6MTA3LFwiV0hJTEVcIjoxMDgsXCJXSEVOXCI6MTA5LFwiVU5USUxcIjoxMTAsXCJMb29wXCI6MTExLFwiTE9PUFwiOjExMixcIkZvckJvZHlcIjoxMTMsXCJGT1JcIjoxMTQsXCJGb3JTdGFydFwiOjExNSxcIkZvclNvdXJjZVwiOjExNixcIkZvclZhcmlhYmxlc1wiOjExNyxcIk9XTlwiOjExOCxcIkZvclZhbHVlXCI6MTE5LFwiRk9SSU5cIjoxMjAsXCJGT1JPRlwiOjEyMSxcIkJZXCI6MTIyLFwiU1dJVENIXCI6MTIzLFwiV2hlbnNcIjoxMjQsXCJFTFNFXCI6MTI1LFwiV2hlblwiOjEyNixcIkxFQURJTkdfV0hFTlwiOjEyNyxcIklmQmxvY2tcIjoxMjgsXCJJRlwiOjEyOSxcIlBPU1RfSUZcIjoxMzAsXCJVTkFSWVwiOjEzMSxcIlVOQVJZX01BVEhcIjoxMzIsXCItXCI6MTMzLFwiK1wiOjEzNCxcIllJRUxEXCI6MTM1LFwiRlJPTVwiOjEzNixcIi0tXCI6MTM3LFwiKytcIjoxMzgsXCI/XCI6MTM5LFwiTUFUSFwiOjE0MCxcIioqXCI6MTQxLFwiU0hJRlRcIjoxNDIsXCJDT01QQVJFXCI6MTQzLFwiTE9HSUNcIjoxNDQsXCJSRUxBVElPTlwiOjE0NSxcIkNPTVBPVU5EX0FTU0lHTlwiOjE0NixcIiRhY2NlcHRcIjowLFwiJGVuZFwiOjF9LFxudGVybWluYWxzXzogezI6XCJlcnJvclwiLDY6XCJURVJNSU5BVE9SXCIsMTE6XCJTVEFURU1FTlRcIiwxMzpcIkFXQUlUXCIsMjg6XCJJTkRFTlRcIiwyOTpcIk9VVERFTlRcIiwzMTpcIklERU5USUZJRVJcIiwzMzpcIk5VTUJFUlwiLDM0OlwiU1RSSU5HXCIsMzY6XCJKU1wiLDM3OlwiUkVHRVhcIiwzODpcIkRFQlVHR0VSXCIsMzk6XCJVTkRFRklORURcIiw0MDpcIk5VTExcIiw0MTpcIkJPT0xcIiw0MzpcIj1cIiw0NjpcIjpcIiw0ODpcIlJFVFVSTlwiLDQ5OlwiSEVSRUNPTU1FTlRcIiw1MDpcIlBBUkFNX1NUQVJUXCIsNTI6XCJQQVJBTV9FTkRcIiw1NDpcIi0+XCIsNTU6XCI9PlwiLDU3OlwiLFwiLDYwOlwiLi4uXCIsNjk6XCIuXCIsNzA6XCI/LlwiLDcxOlwiOjpcIiw3MjpcIj86OlwiLDc0OlwiSU5ERVhfU1RBUlRcIiw3NjpcIklOREVYX0VORFwiLDc3OlwiSU5ERVhfU09BS1wiLDc5Olwie1wiLDgxOlwifVwiLDgyOlwiQ0xBU1NcIiw4MzpcIkVYVEVORFNcIiw4NjpcIlNVUEVSXCIsODc6XCJERUZFUlwiLDg4OlwiRlVOQ19FWElTVFwiLDg5OlwiQ0FMTF9TVEFSVFwiLDkwOlwiQ0FMTF9FTkRcIiw5MjpcIlRISVNcIiw5MzpcIkBcIiw5NDpcIltcIiw5NTpcIl1cIiw5NzpcIi4uXCIsMTAwOlwiVFJZXCIsMTAyOlwiRklOQUxMWVwiLDEwMzpcIkNBVENIXCIsMTA0OlwiVEhST1dcIiwxMDU6XCIoXCIsMTA2OlwiKVwiLDEwODpcIldISUxFXCIsMTA5OlwiV0hFTlwiLDExMDpcIlVOVElMXCIsMTEyOlwiTE9PUFwiLDExNDpcIkZPUlwiLDExODpcIk9XTlwiLDEyMDpcIkZPUklOXCIsMTIxOlwiRk9ST0ZcIiwxMjI6XCJCWVwiLDEyMzpcIlNXSVRDSFwiLDEyNTpcIkVMU0VcIiwxMjc6XCJMRUFESU5HX1dIRU5cIiwxMjk6XCJJRlwiLDEzMDpcIlBPU1RfSUZcIiwxMzE6XCJVTkFSWVwiLDEzMjpcIlVOQVJZX01BVEhcIiwxMzM6XCItXCIsMTM0OlwiK1wiLDEzNTpcIllJRUxEXCIsMTM2OlwiRlJPTVwiLDEzNzpcIi0tXCIsMTM4OlwiKytcIiwxMzk6XCI/XCIsMTQwOlwiTUFUSFwiLDE0MTpcIioqXCIsMTQyOlwiU0hJRlRcIiwxNDM6XCJDT01QQVJFXCIsMTQ0OlwiTE9HSUNcIiwxNDU6XCJSRUxBVElPTlwiLDE0NjpcIkNPTVBPVU5EX0FTU0lHTlwifSxcbnByb2R1Y3Rpb25zXzogWzAsWzMsMF0sWzMsMV0sWzQsMV0sWzQsM10sWzQsMl0sWzUsMV0sWzUsMV0sWzgsMV0sWzgsMV0sWzgsMV0sWzgsMV0sWzEyLDJdLFsxMiwyXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbNywxXSxbMTQsMl0sWzE0LDNdLFszMCwxXSxbMzIsMV0sWzMyLDFdLFszNSwxXSxbMzUsMV0sWzM1LDFdLFszNSwxXSxbMzUsMV0sWzM1LDFdLFszNSwxXSxbMTksM10sWzE5LDRdLFsxOSw1XSxbNDQsMV0sWzQ0LDNdLFs0NCw1XSxbNDQsMV0sWzQ1LDFdLFs0NSwxXSxbNDUsMV0sWzksMl0sWzksMV0sWzEwLDFdLFsxNyw1XSxbMTcsMl0sWzUzLDFdLFs1MywxXSxbNTYsMF0sWzU2LDFdLFs1MSwwXSxbNTEsMV0sWzUxLDNdLFs1MSw0XSxbNTEsNl0sWzU4LDFdLFs1OCwyXSxbNTgsM10sWzU4LDFdLFs1OSwxXSxbNTksMV0sWzU5LDFdLFs1OSwxXSxbNjMsMl0sWzY0LDFdLFs2NCwyXSxbNjQsMl0sWzY0LDFdLFs0MiwxXSxbNDIsMV0sWzQyLDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzY1LDJdLFs2NSwyXSxbNjUsMl0sWzY1LDJdLFs2NSwyXSxbNjUsMV0sWzY1LDFdLFs3MywzXSxbNzMsMl0sWzc1LDFdLFs3NSwxXSxbNjIsNF0sWzgwLDBdLFs4MCwxXSxbODAsM10sWzgwLDRdLFs4MCw2XSxbMjUsMV0sWzI1LDJdLFsyNSwzXSxbMjUsNF0sWzI1LDJdLFsyNSwzXSxbMjUsNF0sWzI1LDVdLFsxNiwzXSxbMTYsM10sWzE2LDFdLFsxNiwyXSxbMjcsMl0sWzg0LDBdLFs4NCwxXSxbODUsMl0sWzg1LDRdLFs2OCwxXSxbNjgsMV0sWzQ3LDJdLFs2MSwyXSxbNjEsNF0sWzk2LDFdLFs5NiwxXSxbNjcsNV0sWzc4LDNdLFs3OCwyXSxbNzgsMl0sWzc4LDFdLFs5MSwxXSxbOTEsM10sWzkxLDRdLFs5MSw0XSxbOTEsNl0sWzk4LDFdLFs5OCwxXSxbOTgsMV0sWzk5LDFdLFs5OSwzXSxbMjEsMl0sWzIxLDNdLFsyMSw0XSxbMjEsNV0sWzEwMSwzXSxbMTAxLDNdLFsxMDEsMl0sWzI2LDJdLFs2NiwzXSxbNjYsNV0sWzEwNywyXSxbMTA3LDRdLFsxMDcsMl0sWzEwNyw0XSxbMjIsMl0sWzIyLDJdLFsyMiwyXSxbMjIsMV0sWzExMSwyXSxbMTExLDJdLFsyMywyXSxbMjMsMl0sWzIzLDJdLFsxMTMsMl0sWzExMywyXSxbMTE1LDJdLFsxMTUsM10sWzExOSwxXSxbMTE5LDFdLFsxMTksMV0sWzExOSwxXSxbMTE3LDFdLFsxMTcsM10sWzExNiwyXSxbMTE2LDJdLFsxMTYsNF0sWzExNiw0XSxbMTE2LDRdLFsxMTYsNl0sWzExNiw2XSxbMjQsNV0sWzI0LDddLFsyNCw0XSxbMjQsNl0sWzEyNCwxXSxbMTI0LDJdLFsxMjYsM10sWzEyNiw0XSxbMTI4LDNdLFsxMjgsNV0sWzIwLDFdLFsyMCwzXSxbMjAsM10sWzIwLDNdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwzXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCw1XSxbMTgsNF0sWzE4LDNdXSxcbnBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uIGFub255bW91cyh5eXRleHQsIHl5bGVuZywgeXlsaW5lbm8sIHl5LCB5eXN0YXRlIC8qIGFjdGlvblsxXSAqLywgJCQgLyogdnN0YWNrICovLCBfJCAvKiBsc3RhY2sgKi9cbi8qKi8pIHtcbi8qIHRoaXMgPT0geXl2YWwgKi9cblxudmFyICQwID0gJCQubGVuZ3RoIC0gMTtcbnN3aXRjaCAoeXlzdGF0ZSkge1xuY2FzZSAxOnJldHVybiB0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkJsb2NrKTtcbmJyZWFrO1xuY2FzZSAyOnJldHVybiB0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoeXkuQmxvY2sud3JhcChbJCRbJDBdXSkpO1xuYnJlYWs7XG5jYXNlIDQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMl0ucHVzaCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA1OnRoaXMuJCA9ICQkWyQwLTFdO1xuYnJlYWs7XG5jYXNlIDY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDc6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDg6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDk6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkF3YWl0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5Bd2FpdCh5eS5CbG9jay53cmFwKFskJFskMF1dKSkpO1xuYnJlYWs7XG5jYXNlIDE0OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxNTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE3OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxODp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTk6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDIwOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyMTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjI6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDIzOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyNDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjU6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDI2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQmxvY2spO1xuYnJlYWs7XG5jYXNlIDI4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTFdKTtcbmJyZWFrO1xuY2FzZSAyOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDMxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzMjp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMzM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDM0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzNTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5VbmRlZmluZWQpO1xuYnJlYWs7XG5jYXNlIDM3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTnVsbCk7XG5icmVhaztcbmNhc2UgMzg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5Cb29sKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDM5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDQwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oJCRbJDAtM10sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDQxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oJCRbJDAtNF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgNDI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA0Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdKShuZXcgeXkuVmFsdWUoJCRbJDAtMl0pKSwgJCRbJDBdLCAnb2JqZWN0JykpO1xuYnJlYWs7XG5jYXNlIDQ0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0pKG5ldyB5eS5WYWx1ZSgkJFskMC00XSkpLCAkJFskMC0xXSwgJ29iamVjdCcpKTtcbmJyZWFrO1xuY2FzZSA0NTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNDY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDQ3OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA0ODp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNDk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlJldHVybigkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA1MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlJldHVybik7XG5icmVhaztcbmNhc2UgNTE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5Db21tZW50KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDUyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5Db2RlKCQkWyQwLTNdLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgNTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkNvZGUoW10sICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSA1NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoJ2Z1bmMnKTtcbmJyZWFrO1xuY2FzZSA1NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoJ2JvdW5kZnVuYycpO1xuYnJlYWs7XG5jYXNlIDU2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA1Nzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNTg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKFtdKTtcbmJyZWFrO1xuY2FzZSA1OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoWyQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDYwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTJdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA2MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSgkJFskMC0zXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNjI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNV0sIF8kWyQwXSkoJCRbJDAtNV0uY29uY2F0KCQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgNjM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5QYXJhbSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA2NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuUGFyYW0oJCRbJDAtMV0sIG51bGwsIHRydWUpKTtcbmJyZWFrO1xuY2FzZSA2NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuUGFyYW0oJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDY2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuRXhwYW5zaW9uKTtcbmJyZWFrO1xuY2FzZSA2Nzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNjg6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDY5OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA3MDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNzE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlNwbGF0KCQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgNzI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA3Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgkJFskMC0xXS5hZGQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNzQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwLTFdLCBbXS5jb25jYXQoJCRbJDBdKSkpO1xuYnJlYWs7XG5jYXNlIDc1OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA3Njp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNzc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA3ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDc5OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA4MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDgxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgODI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA4Mzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgODQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkFjY2VzcygkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA4NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQWNjZXNzKCQkWyQwXS5zZXRDdXN0b20oKSkpO1xuYnJlYWs7XG5jYXNlIDg2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5BY2Nlc3MoJCRbJDBdLCAnc29haycpKTtcbmJyZWFrO1xuY2FzZSA4Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShbeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKG5ldyB5eS5BY2Nlc3MobmV3IHl5LkxpdGVyYWwoJ3Byb3RvdHlwZScpKSksIHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSkobmV3IHl5LkFjY2VzcygkJFskMF0pKV0pO1xuYnJlYWs7XG5jYXNlIDg4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKFt5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkobmV3IHl5LkFjY2VzcyhuZXcgeXkuTGl0ZXJhbCgncHJvdG90eXBlJyksICdzb2FrJykpLCB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0pKG5ldyB5eS5BY2Nlc3MoJCRbJDBdKSldKTtcbmJyZWFrO1xuY2FzZSA4OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkFjY2VzcyhuZXcgeXkuTGl0ZXJhbCgncHJvdG90eXBlJykpKTtcbmJyZWFrO1xuY2FzZSA5MDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgOTE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMV0pO1xuYnJlYWs7XG5jYXNlIDkyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKHl5LmV4dGVuZCgkJFskMF0sIHtcbiAgICAgICAgICBzb2FrOiB0cnVlXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSA5Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkluZGV4KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDk0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuU2xpY2UoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgOTU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5Lk9iaigkJFskMC0yXSwgJCRbJDAtM10uZ2VuZXJhdGVkKSk7XG5icmVhaztcbmNhc2UgOTY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKFtdKTtcbmJyZWFrO1xuY2FzZSA5Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoWyQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDk4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTJdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA5OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSgkJFskMC0zXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTAwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTVdLCBfJFskMF0pKCQkWyQwLTVdLmNvbmNhdCgkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDEwMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkNsYXNzKTtcbmJyZWFrO1xuY2FzZSAxMDI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkNsYXNzKG51bGwsIG51bGwsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MobnVsbCwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTA0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5DbGFzcyhudWxsLCAkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTA1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5DbGFzcygkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkNsYXNzKCQkWyQwLTFdLCBudWxsLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LkNsYXNzKCQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LkNsYXNzKCQkWyQwLTNdLCAkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTA5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5DYWxsKCQkWyQwLTJdLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTEwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5DYWxsKCQkWyQwLTJdLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTExOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuQ2FsbCgnc3VwZXInLCBbbmV3IHl5LlNwbGF0KG5ldyB5eS5MaXRlcmFsKCdhcmd1bWVudHMnKSldKSk7XG5icmVhaztcbmNhc2UgMTEyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5DYWxsKCdzdXBlcicsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDExMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuRGVmZXIoJCRbJDBdLCB5eWxpbmVubykpO1xuYnJlYWs7XG5jYXNlIDExNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoZmFsc2UpO1xuYnJlYWs7XG5jYXNlIDExNTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkodHJ1ZSk7XG5icmVhaztcbmNhc2UgMTE2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKFtdKTtcbmJyZWFrO1xuY2FzZSAxMTc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoJCRbJDAtMl0pO1xuYnJlYWs7XG5jYXNlIDExODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKG5ldyB5eS5MaXRlcmFsKCd0aGlzJykpKTtcbmJyZWFrO1xuY2FzZSAxMTk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZShuZXcgeXkuTGl0ZXJhbCgndGhpcycpKSk7XG5icmVhaztcbmNhc2UgMTIwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkobmV3IHl5LkxpdGVyYWwoJ3RoaXMnKSksIFt5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0pKG5ldyB5eS5BY2Nlc3MoJCRbJDBdKSldLCAndGhpcycpKTtcbmJyZWFrO1xuY2FzZSAxMjE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkFycihbXSkpO1xuYnJlYWs7XG5jYXNlIDEyMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuQXJyKCQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgMTIzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSgnaW5jbHVzaXZlJyk7XG5icmVhaztcbmNhc2UgMTI0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSgnZXhjbHVzaXZlJyk7XG5icmVhaztcbmNhc2UgMTI1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5SYW5nZSgkJFskMC0zXSwgJCRbJDAtMV0sICQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgMTI2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5SYW5nZSgkJFskMC0yXSwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDEyNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuUmFuZ2UoJCRbJDAtMV0sIG51bGwsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEyODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuUmFuZ2UobnVsbCwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDEyOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlJhbmdlKG51bGwsIG51bGwsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEzMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoWyQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDEzMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0yXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTMyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKCQkWyQwLTNdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMzM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoJCRbJDAtMl0pO1xuYnJlYWs7XG5jYXNlIDEzNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC01XSwgXyRbJDBdKSgkJFskMC01XS5jb25jYXQoJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSAxMzU6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEzNjp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTM3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuRXhwYW5zaW9uKTtcbmJyZWFrO1xuY2FzZSAxMzg6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEzOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShbXS5jb25jYXQoJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE0MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuVHJ5KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE0MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuVHJ5KCQkWyQwLTFdLCAkJFskMF1bMF0sICQkWyQwXVsxXSkpO1xuYnJlYWs7XG5jYXNlIDE0Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuVHJ5KCQkWyQwLTJdLCBudWxsLCBudWxsLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNDM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LlRyeSgkJFskMC0zXSwgJCRbJDAtMl1bMF0sICQkWyQwLTJdWzFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNDQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoWyQkWyQwLTFdLCAkJFskMF1dKTtcbmJyZWFrO1xuY2FzZSAxNDU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoW3l5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKShuZXcgeXkuVmFsdWUoJCRbJDAtMV0pKSwgJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgMTQ2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKFtudWxsLCAkJFskMF1dKTtcbmJyZWFrO1xuY2FzZSAxNDc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlRocm93KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE0ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuUGFyZW5zKCQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTQ5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5QYXJlbnMoJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSAxNTA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LldoaWxlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE1MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuV2hpbGUoJCRbJDAtMl0sIHtcbiAgICAgICAgICBndWFyZDogJCRbJDBdXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSAxNTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LldoaWxlKCQkWyQwXSwge1xuICAgICAgICAgIGludmVydDogdHJ1ZVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgMTUzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5XaGlsZSgkJFskMC0yXSwge1xuICAgICAgICAgIGludmVydDogdHJ1ZSxcbiAgICAgICAgICBndWFyZDogJCRbJDBdXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSAxNTQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoJCRbJDAtMV0uYWRkQm9keSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNTU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoJCRbJDBdLmFkZEJvZHkoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKHl5LkJsb2NrLndyYXAoWyQkWyQwLTFdXSkpKSk7XG5icmVhaztcbmNhc2UgMTU2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKCQkWyQwXS5hZGRCb2R5KHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKSh5eS5CbG9jay53cmFwKFskJFskMC0xXV0pKSkpO1xuYnJlYWs7XG5jYXNlIDE1Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoJCRbJDBdKTtcbmJyZWFrO1xuY2FzZSAxNTg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LldoaWxlKHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKShuZXcgeXkuTGl0ZXJhbCgndHJ1ZScpKSkuYWRkQm9keSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNTk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LldoaWxlKHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKShuZXcgeXkuTGl0ZXJhbCgndHJ1ZScpKSkuYWRkQm9keSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0pKHl5LkJsb2NrLndyYXAoWyQkWyQwXV0pKSkpO1xuYnJlYWs7XG5jYXNlIDE2MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuRm9yKCQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNjE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkZvcigkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTYyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5Gb3IoJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDE2Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNjQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCRbJDBdLm93biA9ICQkWyQwLTFdLm93bjtcbiAgICAgICAgJCRbJDBdLm5hbWUgPSAkJFskMC0xXVswXTtcbiAgICAgICAgJCRbJDBdLmluZGV4ID0gJCRbJDAtMV1bMV07XG4gICAgICAgIHJldHVybiAkJFskMF07XG4gICAgICB9KCkpKTtcbmJyZWFrO1xuY2FzZSAxNjU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoJCRbJDBdKTtcbmJyZWFrO1xuY2FzZSAxNjY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCRbJDBdLm93biA9IHRydWU7XG4gICAgICAgIHJldHVybiAkJFskMF07XG4gICAgICB9KCkpKTtcbmJyZWFrO1xuY2FzZSAxNjc6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE2ODp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTY5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTcwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTcxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShbJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgMTcyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKFskJFskMC0yXSwgJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgMTczOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwXVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNzQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDBdLFxuICAgICAgICAgIG9iamVjdDogdHJ1ZVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNzU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDAtMl0sXG4gICAgICAgICAgZ3VhcmQ6ICQkWyQwXVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNzY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDAtMl0sXG4gICAgICAgICAgZ3VhcmQ6ICQkWyQwXSxcbiAgICAgICAgICBvYmplY3Q6IHRydWVcbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTc3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwLTJdLFxuICAgICAgICAgIHN0ZXA6ICQkWyQwXVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNzg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNV0sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDAtNF0sXG4gICAgICAgICAgZ3VhcmQ6ICQkWyQwLTJdLFxuICAgICAgICAgIHN0ZXA6ICQkWyQwXVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNzk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNV0sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDAtNF0sXG4gICAgICAgICAgc3RlcDogJCRbJDAtMl0sXG4gICAgICAgICAgZ3VhcmQ6ICQkWyQwXVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxODA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LlN3aXRjaCgkJFskMC0zXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxODE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNl0sIF8kWyQwXSkobmV3IHl5LlN3aXRjaCgkJFskMC01XSwgJCRbJDAtM10sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTgyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5Td2l0Y2gobnVsbCwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxODM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNV0sIF8kWyQwXSkobmV3IHl5LlN3aXRjaChudWxsLCAkJFskMC0zXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxODQ6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE4NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgkJFskMC0xXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTg2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKFtbJCRbJDAtMV0sICQkWyQwXV1dKTtcbmJyZWFrO1xuY2FzZSAxODc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoW1skJFskMC0yXSwgJCRbJDAtMV1dXSk7XG5icmVhaztcbmNhc2UgMTg4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5JZigkJFskMC0xXSwgJCRbJDBdLCB7XG4gICAgICAgICAgdHlwZTogJCRbJDAtMl1cbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDE4OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKSgkJFskMC00XS5hZGRFbHNlKHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5JZigkJFskMC0xXSwgJCRbJDBdLCB7XG4gICAgICAgICAgdHlwZTogJCRbJDAtMl1cbiAgICAgICAgfSkpKSk7XG5icmVhaztcbmNhc2UgMTkwOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxOTE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMl0uYWRkRWxzZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxOTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LklmKCQkWyQwXSwgeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0pKHl5LkJsb2NrLndyYXAoWyQkWyQwLTJdXSkpLCB7XG4gICAgICAgICAgdHlwZTogJCRbJDAtMV0sXG4gICAgICAgICAgc3RhdGVtZW50OiB0cnVlXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSAxOTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LklmKCQkWyQwXSwgeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0pKHl5LkJsb2NrLndyYXAoWyQkWyQwLTJdXSkpLCB7XG4gICAgICAgICAgdHlwZTogJCRbJDAtMV0sXG4gICAgICAgICAgc3RhdGVtZW50OiB0cnVlXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSAxOTQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxOTU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxOTY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCctJywgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTk3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgnKycsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE5ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE5OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMl0uY29uY2F0KCQkWyQwLTFdKSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjAxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgnLS0nLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCcrKycsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJy0tJywgJCRbJDAtMV0sIG51bGwsIHRydWUpKTtcbmJyZWFrO1xuY2FzZSAyMDQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCcrKycsICQkWyQwLTFdLCBudWxsLCB0cnVlKSk7XG5icmVhaztcbmNhc2UgMjA1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5FeGlzdGVuY2UoJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAyMDY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCcrJywgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJy0nLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjA4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMTA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjExOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIxMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQkWyQwLTFdLmNoYXJBdCgwKSA9PT0gJyEnKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyB5eS5PcCgkJFskMC0xXS5zbGljZSgxKSwgJCRbJDAtMl0sICQkWyQwXSkuaW52ZXJ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDAtMl0sICQkWyQwXSk7XG4gICAgICAgIH1cbiAgICAgIH0oKSkpO1xuYnJlYWs7XG5jYXNlIDIxNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKCQkWyQwLTJdLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMjE1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oJCRbJDAtNF0sICQkWyQwLTFdLCAkJFskMC0zXSkpO1xuYnJlYWs7XG5jYXNlIDIxNjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKCQkWyQwLTNdLCAkJFskMF0sICQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgMjE3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5FeHRlbmRzKCQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xufVxufSxcbnRhYmxlOiBbezE6WzIsMV0sMzoxLDQ6Miw1OjMsNzo0LDg6NSw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlszXX0sezE6WzIsMl0sNjpbMSw3OF19LHsxOlsyLDNdLDY6WzIsM10sMjk6WzIsM10sMTA2OlsyLDNdfSx7MTpbMiw2XSw2OlsyLDZdLDI5OlsyLDZdLDEwNjpbMiw2XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiw3XSw2OlsyLDddLDI5OlsyLDddLDEwNjpbMiw3XSwxMDc6OTIsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MywxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsOTFdfSx7MTpbMiwxNF0sNjpbMiwxNF0sMjg6WzIsMTRdLDI5OlsyLDE0XSw1MjpbMiwxNF0sNTc6WzIsMTRdLDYwOlsyLDE0XSw2NTo5NSw2OTpbMSw5N10sNzA6WzEsOThdLDcxOlsxLDk5XSw3MjpbMSwxMDBdLDczOjEwMSw3NDpbMSwxMDJdLDc2OlsyLDE0XSw3NzpbMSwxMDNdLDgxOlsyLDE0XSw4NDo5NCw4ODpbMSw5Nl0sODk6WzIsMTE0XSw5MDpbMiwxNF0sOTU6WzIsMTRdLDk3OlsyLDE0XSwxMDY6WzIsMTRdLDEwODpbMiwxNF0sMTA5OlsyLDE0XSwxMTA6WzIsMTRdLDExNDpbMiwxNF0sMTIyOlsyLDE0XSwxMzA6WzIsMTRdLDEzMzpbMiwxNF0sMTM0OlsyLDE0XSwxMzk6WzIsMTRdLDE0MDpbMiwxNF0sMTQxOlsyLDE0XSwxNDI6WzIsMTRdLDE0MzpbMiwxNF0sMTQ0OlsyLDE0XSwxNDU6WzIsMTRdfSx7MTpbMiwxNV0sNjpbMiwxNV0sMjg6WzIsMTVdLDI5OlsyLDE1XSw1MjpbMiwxNV0sNTc6WzIsMTVdLDYwOlsyLDE1XSw2NToxMDUsNjk6WzEsOTddLDcwOlsxLDk4XSw3MTpbMSw5OV0sNzI6WzEsMTAwXSw3MzoxMDEsNzQ6WzEsMTAyXSw3NjpbMiwxNV0sNzc6WzEsMTAzXSw4MTpbMiwxNV0sODQ6MTA0LDg4OlsxLDk2XSw4OTpbMiwxMTRdLDkwOlsyLDE1XSw5NTpbMiwxNV0sOTc6WzIsMTVdLDEwNjpbMiwxNV0sMTA4OlsyLDE1XSwxMDk6WzIsMTVdLDExMDpbMiwxNV0sMTE0OlsyLDE1XSwxMjI6WzIsMTVdLDEzMDpbMiwxNV0sMTMzOlsyLDE1XSwxMzQ6WzIsMTVdLDEzOTpbMiwxNV0sMTQwOlsyLDE1XSwxNDE6WzIsMTVdLDE0MjpbMiwxNV0sMTQzOlsyLDE1XSwxNDQ6WzIsMTVdLDE0NTpbMiwxNV19LHsxOlsyLDE2XSw2OlsyLDE2XSwyODpbMiwxNl0sMjk6WzIsMTZdLDUyOlsyLDE2XSw1NzpbMiwxNl0sNjA6WzIsMTZdLDc2OlsyLDE2XSw4MTpbMiwxNl0sOTA6WzIsMTZdLDk1OlsyLDE2XSw5NzpbMiwxNl0sMTA2OlsyLDE2XSwxMDg6WzIsMTZdLDEwOTpbMiwxNl0sMTEwOlsyLDE2XSwxMTQ6WzIsMTZdLDEyMjpbMiwxNl0sMTMwOlsyLDE2XSwxMzM6WzIsMTZdLDEzNDpbMiwxNl0sMTM5OlsyLDE2XSwxNDA6WzIsMTZdLDE0MTpbMiwxNl0sMTQyOlsyLDE2XSwxNDM6WzIsMTZdLDE0NDpbMiwxNl0sMTQ1OlsyLDE2XX0sezE6WzIsMTddLDY6WzIsMTddLDI4OlsyLDE3XSwyOTpbMiwxN10sNTI6WzIsMTddLDU3OlsyLDE3XSw2MDpbMiwxN10sNzY6WzIsMTddLDgxOlsyLDE3XSw5MDpbMiwxN10sOTU6WzIsMTddLDk3OlsyLDE3XSwxMDY6WzIsMTddLDEwODpbMiwxN10sMTA5OlsyLDE3XSwxMTA6WzIsMTddLDExNDpbMiwxN10sMTIyOlsyLDE3XSwxMzA6WzIsMTddLDEzMzpbMiwxN10sMTM0OlsyLDE3XSwxMzk6WzIsMTddLDE0MDpbMiwxN10sMTQxOlsyLDE3XSwxNDI6WzIsMTddLDE0MzpbMiwxN10sMTQ0OlsyLDE3XSwxNDU6WzIsMTddfSx7MTpbMiwxOF0sNjpbMiwxOF0sMjg6WzIsMThdLDI5OlsyLDE4XSw1MjpbMiwxOF0sNTc6WzIsMThdLDYwOlsyLDE4XSw3NjpbMiwxOF0sODE6WzIsMThdLDkwOlsyLDE4XSw5NTpbMiwxOF0sOTc6WzIsMThdLDEwNjpbMiwxOF0sMTA4OlsyLDE4XSwxMDk6WzIsMThdLDExMDpbMiwxOF0sMTE0OlsyLDE4XSwxMjI6WzIsMThdLDEzMDpbMiwxOF0sMTMzOlsyLDE4XSwxMzQ6WzIsMThdLDEzOTpbMiwxOF0sMTQwOlsyLDE4XSwxNDE6WzIsMThdLDE0MjpbMiwxOF0sMTQzOlsyLDE4XSwxNDQ6WzIsMThdLDE0NTpbMiwxOF19LHsxOlsyLDE5XSw2OlsyLDE5XSwyODpbMiwxOV0sMjk6WzIsMTldLDUyOlsyLDE5XSw1NzpbMiwxOV0sNjA6WzIsMTldLDc2OlsyLDE5XSw4MTpbMiwxOV0sOTA6WzIsMTldLDk1OlsyLDE5XSw5NzpbMiwxOV0sMTA2OlsyLDE5XSwxMDg6WzIsMTldLDEwOTpbMiwxOV0sMTEwOlsyLDE5XSwxMTQ6WzIsMTldLDEyMjpbMiwxOV0sMTMwOlsyLDE5XSwxMzM6WzIsMTldLDEzNDpbMiwxOV0sMTM5OlsyLDE5XSwxNDA6WzIsMTldLDE0MTpbMiwxOV0sMTQyOlsyLDE5XSwxNDM6WzIsMTldLDE0NDpbMiwxOV0sMTQ1OlsyLDE5XX0sezE6WzIsMjBdLDY6WzIsMjBdLDI4OlsyLDIwXSwyOTpbMiwyMF0sNTI6WzIsMjBdLDU3OlsyLDIwXSw2MDpbMiwyMF0sNzY6WzIsMjBdLDgxOlsyLDIwXSw5MDpbMiwyMF0sOTU6WzIsMjBdLDk3OlsyLDIwXSwxMDY6WzIsMjBdLDEwODpbMiwyMF0sMTA5OlsyLDIwXSwxMTA6WzIsMjBdLDExNDpbMiwyMF0sMTIyOlsyLDIwXSwxMzA6WzIsMjBdLDEzMzpbMiwyMF0sMTM0OlsyLDIwXSwxMzk6WzIsMjBdLDE0MDpbMiwyMF0sMTQxOlsyLDIwXSwxNDI6WzIsMjBdLDE0MzpbMiwyMF0sMTQ0OlsyLDIwXSwxNDU6WzIsMjBdfSx7MTpbMiwyMV0sNjpbMiwyMV0sMjg6WzIsMjFdLDI5OlsyLDIxXSw1MjpbMiwyMV0sNTc6WzIsMjFdLDYwOlsyLDIxXSw3NjpbMiwyMV0sODE6WzIsMjFdLDkwOlsyLDIxXSw5NTpbMiwyMV0sOTc6WzIsMjFdLDEwNjpbMiwyMV0sMTA4OlsyLDIxXSwxMDk6WzIsMjFdLDExMDpbMiwyMV0sMTE0OlsyLDIxXSwxMjI6WzIsMjFdLDEzMDpbMiwyMV0sMTMzOlsyLDIxXSwxMzQ6WzIsMjFdLDEzOTpbMiwyMV0sMTQwOlsyLDIxXSwxNDE6WzIsMjFdLDE0MjpbMiwyMV0sMTQzOlsyLDIxXSwxNDQ6WzIsMjFdLDE0NTpbMiwyMV19LHsxOlsyLDIyXSw2OlsyLDIyXSwyODpbMiwyMl0sMjk6WzIsMjJdLDUyOlsyLDIyXSw1NzpbMiwyMl0sNjA6WzIsMjJdLDc2OlsyLDIyXSw4MTpbMiwyMl0sOTA6WzIsMjJdLDk1OlsyLDIyXSw5NzpbMiwyMl0sMTA2OlsyLDIyXSwxMDg6WzIsMjJdLDEwOTpbMiwyMl0sMTEwOlsyLDIyXSwxMTQ6WzIsMjJdLDEyMjpbMiwyMl0sMTMwOlsyLDIyXSwxMzM6WzIsMjJdLDEzNDpbMiwyMl0sMTM5OlsyLDIyXSwxNDA6WzIsMjJdLDE0MTpbMiwyMl0sMTQyOlsyLDIyXSwxNDM6WzIsMjJdLDE0NDpbMiwyMl0sMTQ1OlsyLDIyXX0sezE6WzIsMjNdLDY6WzIsMjNdLDI4OlsyLDIzXSwyOTpbMiwyM10sNTI6WzIsMjNdLDU3OlsyLDIzXSw2MDpbMiwyM10sNzY6WzIsMjNdLDgxOlsyLDIzXSw5MDpbMiwyM10sOTU6WzIsMjNdLDk3OlsyLDIzXSwxMDY6WzIsMjNdLDEwODpbMiwyM10sMTA5OlsyLDIzXSwxMTA6WzIsMjNdLDExNDpbMiwyM10sMTIyOlsyLDIzXSwxMzA6WzIsMjNdLDEzMzpbMiwyM10sMTM0OlsyLDIzXSwxMzk6WzIsMjNdLDE0MDpbMiwyM10sMTQxOlsyLDIzXSwxNDI6WzIsMjNdLDE0MzpbMiwyM10sMTQ0OlsyLDIzXSwxNDU6WzIsMjNdfSx7MTpbMiwyNF0sNjpbMiwyNF0sMjg6WzIsMjRdLDI5OlsyLDI0XSw1MjpbMiwyNF0sNTc6WzIsMjRdLDYwOlsyLDI0XSw3NjpbMiwyNF0sODE6WzIsMjRdLDkwOlsyLDI0XSw5NTpbMiwyNF0sOTc6WzIsMjRdLDEwNjpbMiwyNF0sMTA4OlsyLDI0XSwxMDk6WzIsMjRdLDExMDpbMiwyNF0sMTE0OlsyLDI0XSwxMjI6WzIsMjRdLDEzMDpbMiwyNF0sMTMzOlsyLDI0XSwxMzQ6WzIsMjRdLDEzOTpbMiwyNF0sMTQwOlsyLDI0XSwxNDE6WzIsMjRdLDE0MjpbMiwyNF0sMTQzOlsyLDI0XSwxNDQ6WzIsMjRdLDE0NTpbMiwyNF19LHsxOlsyLDI1XSw2OlsyLDI1XSwyODpbMiwyNV0sMjk6WzIsMjVdLDUyOlsyLDI1XSw1NzpbMiwyNV0sNjA6WzIsMjVdLDc2OlsyLDI1XSw4MTpbMiwyNV0sOTA6WzIsMjVdLDk1OlsyLDI1XSw5NzpbMiwyNV0sMTA2OlsyLDI1XSwxMDg6WzIsMjVdLDEwOTpbMiwyNV0sMTEwOlsyLDI1XSwxMTQ6WzIsMjVdLDEyMjpbMiwyNV0sMTMwOlsyLDI1XSwxMzM6WzIsMjVdLDEzNDpbMiwyNV0sMTM5OlsyLDI1XSwxNDA6WzIsMjVdLDE0MTpbMiwyNV0sMTQyOlsyLDI1XSwxNDM6WzIsMjVdLDE0NDpbMiwyNV0sMTQ1OlsyLDI1XX0sezE6WzIsMjZdLDY6WzIsMjZdLDI4OlsyLDI2XSwyOTpbMiwyNl0sNTI6WzIsMjZdLDU3OlsyLDI2XSw2MDpbMiwyNl0sNzY6WzIsMjZdLDgxOlsyLDI2XSw5MDpbMiwyNl0sOTU6WzIsMjZdLDk3OlsyLDI2XSwxMDY6WzIsMjZdLDEwODpbMiwyNl0sMTA5OlsyLDI2XSwxMTA6WzIsMjZdLDExNDpbMiwyNl0sMTIyOlsyLDI2XSwxMzA6WzIsMjZdLDEzMzpbMiwyNl0sMTM0OlsyLDI2XSwxMzk6WzIsMjZdLDE0MDpbMiwyNl0sMTQxOlsyLDI2XSwxNDI6WzIsMjZdLDE0MzpbMiwyNl0sMTQ0OlsyLDI2XSwxNDU6WzIsMjZdfSx7MTpbMiw4XSw2OlsyLDhdLDI4OlsyLDhdLDI5OlsyLDhdLDUyOlsyLDhdLDU3OlsyLDhdLDYwOlsyLDhdLDc2OlsyLDhdLDgxOlsyLDhdLDkwOlsyLDhdLDk1OlsyLDhdLDk3OlsyLDhdLDEwNjpbMiw4XSwxMDg6WzIsOF0sMTA5OlsyLDhdLDExMDpbMiw4XSwxMTQ6WzIsOF0sMTIyOlsyLDhdLDEzMDpbMiw4XSwxMzM6WzIsOF0sMTM0OlsyLDhdLDEzOTpbMiw4XSwxNDA6WzIsOF0sMTQxOlsyLDhdLDE0MjpbMiw4XSwxNDM6WzIsOF0sMTQ0OlsyLDhdLDE0NTpbMiw4XX0sezE6WzIsOV0sNjpbMiw5XSwyODpbMiw5XSwyOTpbMiw5XSw1MjpbMiw5XSw1NzpbMiw5XSw2MDpbMiw5XSw3NjpbMiw5XSw4MTpbMiw5XSw5MDpbMiw5XSw5NTpbMiw5XSw5NzpbMiw5XSwxMDY6WzIsOV0sMTA4OlsyLDldLDEwOTpbMiw5XSwxMTA6WzIsOV0sMTE0OlsyLDldLDEyMjpbMiw5XSwxMzA6WzIsOV0sMTMzOlsyLDldLDEzNDpbMiw5XSwxMzk6WzIsOV0sMTQwOlsyLDldLDE0MTpbMiw5XSwxNDI6WzIsOV0sMTQzOlsyLDldLDE0NDpbMiw5XSwxNDU6WzIsOV19LHsxOlsyLDEwXSw2OlsyLDEwXSwyODpbMiwxMF0sMjk6WzIsMTBdLDUyOlsyLDEwXSw1NzpbMiwxMF0sNjA6WzIsMTBdLDc2OlsyLDEwXSw4MTpbMiwxMF0sOTA6WzIsMTBdLDk1OlsyLDEwXSw5NzpbMiwxMF0sMTA2OlsyLDEwXSwxMDg6WzIsMTBdLDEwOTpbMiwxMF0sMTEwOlsyLDEwXSwxMTQ6WzIsMTBdLDEyMjpbMiwxMF0sMTMwOlsyLDEwXSwxMzM6WzIsMTBdLDEzNDpbMiwxMF0sMTM5OlsyLDEwXSwxNDA6WzIsMTBdLDE0MTpbMiwxMF0sMTQyOlsyLDEwXSwxNDM6WzIsMTBdLDE0NDpbMiwxMF0sMTQ1OlsyLDEwXX0sezE6WzIsMTFdLDY6WzIsMTFdLDI4OlsyLDExXSwyOTpbMiwxMV0sNTI6WzIsMTFdLDU3OlsyLDExXSw2MDpbMiwxMV0sNzY6WzIsMTFdLDgxOlsyLDExXSw5MDpbMiwxMV0sOTU6WzIsMTFdLDk3OlsyLDExXSwxMDY6WzIsMTFdLDEwODpbMiwxMV0sMTA5OlsyLDExXSwxMTA6WzIsMTFdLDExNDpbMiwxMV0sMTIyOlsyLDExXSwxMzA6WzIsMTFdLDEzMzpbMiwxMV0sMTM0OlsyLDExXSwxMzk6WzIsMTFdLDE0MDpbMiwxMV0sMTQxOlsyLDExXSwxNDI6WzIsMTFdLDE0MzpbMiwxMV0sMTQ0OlsyLDExXSwxNDU6WzIsMTFdfSx7MTpbMiw3OV0sNjpbMiw3OV0sMjg6WzIsNzldLDI5OlsyLDc5XSw0MzpbMSwxMDZdLDUyOlsyLDc5XSw1NzpbMiw3OV0sNjA6WzIsNzldLDY5OlsyLDc5XSw3MDpbMiw3OV0sNzE6WzIsNzldLDcyOlsyLDc5XSw3NDpbMiw3OV0sNzY6WzIsNzldLDc3OlsyLDc5XSw4MTpbMiw3OV0sODg6WzIsNzldLDg5OlsyLDc5XSw5MDpbMiw3OV0sOTU6WzIsNzldLDk3OlsyLDc5XSwxMDY6WzIsNzldLDEwODpbMiw3OV0sMTA5OlsyLDc5XSwxMTA6WzIsNzldLDExNDpbMiw3OV0sMTIyOlsyLDc5XSwxMzA6WzIsNzldLDEzMzpbMiw3OV0sMTM0OlsyLDc5XSwxMzk6WzIsNzldLDE0MDpbMiw3OV0sMTQxOlsyLDc5XSwxNDI6WzIsNzldLDE0MzpbMiw3OV0sMTQ0OlsyLDc5XSwxNDU6WzIsNzldfSx7MTpbMiw4MF0sNjpbMiw4MF0sMjg6WzIsODBdLDI5OlsyLDgwXSw1MjpbMiw4MF0sNTc6WzIsODBdLDYwOlsyLDgwXSw2OTpbMiw4MF0sNzA6WzIsODBdLDcxOlsyLDgwXSw3MjpbMiw4MF0sNzQ6WzIsODBdLDc2OlsyLDgwXSw3NzpbMiw4MF0sODE6WzIsODBdLDg4OlsyLDgwXSw4OTpbMiw4MF0sOTA6WzIsODBdLDk1OlsyLDgwXSw5NzpbMiw4MF0sMTA2OlsyLDgwXSwxMDg6WzIsODBdLDEwOTpbMiw4MF0sMTEwOlsyLDgwXSwxMTQ6WzIsODBdLDEyMjpbMiw4MF0sMTMwOlsyLDgwXSwxMzM6WzIsODBdLDEzNDpbMiw4MF0sMTM5OlsyLDgwXSwxNDA6WzIsODBdLDE0MTpbMiw4MF0sMTQyOlsyLDgwXSwxNDM6WzIsODBdLDE0NDpbMiw4MF0sMTQ1OlsyLDgwXX0sezE6WzIsODFdLDY6WzIsODFdLDI4OlsyLDgxXSwyOTpbMiw4MV0sNTI6WzIsODFdLDU3OlsyLDgxXSw2MDpbMiw4MV0sNjk6WzIsODFdLDcwOlsyLDgxXSw3MTpbMiw4MV0sNzI6WzIsODFdLDc0OlsyLDgxXSw3NjpbMiw4MV0sNzc6WzIsODFdLDgxOlsyLDgxXSw4ODpbMiw4MV0sODk6WzIsODFdLDkwOlsyLDgxXSw5NTpbMiw4MV0sOTc6WzIsODFdLDEwNjpbMiw4MV0sMTA4OlsyLDgxXSwxMDk6WzIsODFdLDExMDpbMiw4MV0sMTE0OlsyLDgxXSwxMjI6WzIsODFdLDEzMDpbMiw4MV0sMTMzOlsyLDgxXSwxMzQ6WzIsODFdLDEzOTpbMiw4MV0sMTQwOlsyLDgxXSwxNDE6WzIsODFdLDE0MjpbMiw4MV0sMTQzOlsyLDgxXSwxNDQ6WzIsODFdLDE0NTpbMiw4MV19LHsxOlsyLDgyXSw2OlsyLDgyXSwyODpbMiw4Ml0sMjk6WzIsODJdLDUyOlsyLDgyXSw1NzpbMiw4Ml0sNjA6WzIsODJdLDY5OlsyLDgyXSw3MDpbMiw4Ml0sNzE6WzIsODJdLDcyOlsyLDgyXSw3NDpbMiw4Ml0sNzY6WzIsODJdLDc3OlsyLDgyXSw4MTpbMiw4Ml0sODg6WzIsODJdLDg5OlsyLDgyXSw5MDpbMiw4Ml0sOTU6WzIsODJdLDk3OlsyLDgyXSwxMDY6WzIsODJdLDEwODpbMiw4Ml0sMTA5OlsyLDgyXSwxMTA6WzIsODJdLDExNDpbMiw4Ml0sMTIyOlsyLDgyXSwxMzA6WzIsODJdLDEzMzpbMiw4Ml0sMTM0OlsyLDgyXSwxMzk6WzIsODJdLDE0MDpbMiw4Ml0sMTQxOlsyLDgyXSwxNDI6WzIsODJdLDE0MzpbMiw4Ml0sMTQ0OlsyLDgyXSwxNDU6WzIsODJdfSx7MTpbMiw4M10sNjpbMiw4M10sMjg6WzIsODNdLDI5OlsyLDgzXSw1MjpbMiw4M10sNTc6WzIsODNdLDYwOlsyLDgzXSw2OTpbMiw4M10sNzA6WzIsODNdLDcxOlsyLDgzXSw3MjpbMiw4M10sNzQ6WzIsODNdLDc2OlsyLDgzXSw3NzpbMiw4M10sODE6WzIsODNdLDg4OlsyLDgzXSw4OTpbMiw4M10sOTA6WzIsODNdLDk1OlsyLDgzXSw5NzpbMiw4M10sMTA2OlsyLDgzXSwxMDg6WzIsODNdLDEwOTpbMiw4M10sMTEwOlsyLDgzXSwxMTQ6WzIsODNdLDEyMjpbMiw4M10sMTMwOlsyLDgzXSwxMzM6WzIsODNdLDEzNDpbMiw4M10sMTM5OlsyLDgzXSwxNDA6WzIsODNdLDE0MTpbMiw4M10sMTQyOlsyLDgzXSwxNDM6WzIsODNdLDE0NDpbMiw4M10sMTQ1OlsyLDgzXX0sezE6WzIsMTExXSw2OlsyLDExMV0sMjg6WzIsMTExXSwyOTpbMiwxMTFdLDUyOlsyLDExMV0sNTc6WzIsMTExXSw2MDpbMiwxMTFdLDY5OlsyLDExMV0sNzA6WzIsMTExXSw3MTpbMiwxMTFdLDcyOlsyLDExMV0sNzQ6WzIsMTExXSw3NjpbMiwxMTFdLDc3OlsyLDExMV0sODE6WzIsMTExXSw4NToxMDcsODg6WzIsMTExXSw4OTpbMSwxMDhdLDkwOlsyLDExMV0sOTU6WzIsMTExXSw5NzpbMiwxMTFdLDEwNjpbMiwxMTFdLDEwODpbMiwxMTFdLDEwOTpbMiwxMTFdLDExMDpbMiwxMTFdLDExNDpbMiwxMTFdLDEyMjpbMiwxMTFdLDEzMDpbMiwxMTFdLDEzMzpbMiwxMTFdLDEzNDpbMiwxMTFdLDEzOTpbMiwxMTFdLDE0MDpbMiwxMTFdLDE0MTpbMiwxMTFdLDE0MjpbMiwxMTFdLDE0MzpbMiwxMTFdLDE0NDpbMiwxMTFdLDE0NTpbMiwxMTFdfSx7NjpbMiw1OF0sMjg6WzIsNThdLDMwOjExMywzMTpbMSw3N10sNDc6MTE0LDUxOjEwOSw1MjpbMiw1OF0sNTc6WzIsNThdLDU4OjExMCw1OToxMTEsNjA6WzEsMTEyXSw2MToxMTUsNjI6MTE2LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDExOF19LHsxNDoxMTksMjg6WzEsMTIwXX0sezc6MTIxLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTIzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTI0LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTI1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTI3LDg6MTI2LDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNjpbMSwxMjhdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE1OjEzMCwxNjoxMzEsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MTMyLDQ3OjY3LDYxOjUxLDYyOjUyLDY0OjEyOSw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODY6WzEsMjhdLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwNTpbMSw2MF19LHsxNToxMzAsMTY6MTMxLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjEzMiw0Nzo2Nyw2MTo1MSw2Mjo1Miw2NDoxMzMsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDg2OlsxLDI4XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDU6WzEsNjBdfSx7MTpbMiw3Nl0sNjpbMiw3Nl0sMjg6WzIsNzZdLDI5OlsyLDc2XSw0MzpbMiw3Nl0sNTI6WzIsNzZdLDU3OlsyLDc2XSw2MDpbMiw3Nl0sNjk6WzIsNzZdLDcwOlsyLDc2XSw3MTpbMiw3Nl0sNzI6WzIsNzZdLDc0OlsyLDc2XSw3NjpbMiw3Nl0sNzc6WzIsNzZdLDgxOlsyLDc2XSw4MzpbMSwxMzddLDg4OlsyLDc2XSw4OTpbMiw3Nl0sOTA6WzIsNzZdLDk1OlsyLDc2XSw5NzpbMiw3Nl0sMTA2OlsyLDc2XSwxMDg6WzIsNzZdLDEwOTpbMiw3Nl0sMTEwOlsyLDc2XSwxMTQ6WzIsNzZdLDEyMjpbMiw3Nl0sMTMwOlsyLDc2XSwxMzM6WzIsNzZdLDEzNDpbMiw3Nl0sMTM3OlsxLDEzNF0sMTM4OlsxLDEzNV0sMTM5OlsyLDc2XSwxNDA6WzIsNzZdLDE0MTpbMiw3Nl0sMTQyOlsyLDc2XSwxNDM6WzIsNzZdLDE0NDpbMiw3Nl0sMTQ1OlsyLDc2XSwxNDY6WzEsMTM2XX0sezE6WzIsMTkwXSw2OlsyLDE5MF0sMjg6WzIsMTkwXSwyOTpbMiwxOTBdLDUyOlsyLDE5MF0sNTc6WzIsMTkwXSw2MDpbMiwxOTBdLDc2OlsyLDE5MF0sODE6WzIsMTkwXSw5MDpbMiwxOTBdLDk1OlsyLDE5MF0sOTc6WzIsMTkwXSwxMDY6WzIsMTkwXSwxMDg6WzIsMTkwXSwxMDk6WzIsMTkwXSwxMTA6WzIsMTkwXSwxMTQ6WzIsMTkwXSwxMjI6WzIsMTkwXSwxMjU6WzEsMTM4XSwxMzA6WzIsMTkwXSwxMzM6WzIsMTkwXSwxMzQ6WzIsMTkwXSwxMzk6WzIsMTkwXSwxNDA6WzIsMTkwXSwxNDE6WzIsMTkwXSwxNDI6WzIsMTkwXSwxNDM6WzIsMTkwXSwxNDQ6WzIsMTkwXSwxNDU6WzIsMTkwXX0sezE0OjEzOSwyODpbMSwxMjBdfSx7MTQ6MTQwLDI4OlsxLDEyMF19LHsxOlsyLDE1N10sNjpbMiwxNTddLDI4OlsyLDE1N10sMjk6WzIsMTU3XSw1MjpbMiwxNTddLDU3OlsyLDE1N10sNjA6WzIsMTU3XSw3NjpbMiwxNTddLDgxOlsyLDE1N10sOTA6WzIsMTU3XSw5NTpbMiwxNTddLDk3OlsyLDE1N10sMTA2OlsyLDE1N10sMTA4OlsyLDE1N10sMTA5OlsyLDE1N10sMTEwOlsyLDE1N10sMTE0OlsyLDE1N10sMTIyOlsyLDE1N10sMTMwOlsyLDE1N10sMTMzOlsyLDE1N10sMTM0OlsyLDE1N10sMTM5OlsyLDE1N10sMTQwOlsyLDE1N10sMTQxOlsyLDE1N10sMTQyOlsyLDE1N10sMTQzOlsyLDE1N10sMTQ0OlsyLDE1N10sMTQ1OlsyLDE1N119LHsxNDoxNDEsMjg6WzEsMTIwXX0sezc6MTQyLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE0M10sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMDFdLDY6WzIsMTAxXSwxNDoxNDQsMTU6MTMwLDE2OjEzMSwyODpbMSwxMjBdLDI5OlsyLDEwMV0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MTMyLDQ3OjY3LDUyOlsyLDEwMV0sNTc6WzIsMTAxXSw2MDpbMiwxMDFdLDYxOjUxLDYyOjUyLDY0OjE0Niw2NjoyNSw2NzoyNiw2ODoyNyw3NjpbMiwxMDFdLDc5OlsxLDc0XSw4MTpbMiwxMDFdLDgzOlsxLDE0NV0sODY6WzEsMjhdLDkwOlsyLDEwMV0sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTU6WzIsMTAxXSw5NzpbMiwxMDFdLDEwNTpbMSw2MF0sMTA2OlsyLDEwMV0sMTA4OlsyLDEwMV0sMTA5OlsyLDEwMV0sMTEwOlsyLDEwMV0sMTE0OlsyLDEwMV0sMTIyOlsyLDEwMV0sMTMwOlsyLDEwMV0sMTMzOlsyLDEwMV0sMTM0OlsyLDEwMV0sMTM5OlsyLDEwMV0sMTQwOlsyLDEwMV0sMTQxOlsyLDEwMV0sMTQyOlsyLDEwMV0sMTQzOlsyLDEwMV0sMTQ0OlsyLDEwMV0sMTQ1OlsyLDEwMV19LHs3OjE0Nyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs4NToxNDgsODk6WzEsMTA4XX0sezE6WzIsNTBdLDY6WzIsNTBdLDc6MTQ5LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsyLDUwXSwyOTpbMiw1MF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTI6WzIsNTBdLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNTc6WzIsNTBdLDYwOlsyLDUwXSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3NjpbMiw1MF0sNzk6WzEsNzRdLDgxOlsyLDUwXSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MDpbMiw1MF0sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTU6WzIsNTBdLDk3OlsyLDUwXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDY6WzIsNTBdLDEwNzo0MSwxMDg6WzIsNTBdLDEwOTpbMiw1MF0sMTEwOlsyLDUwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsyLDUwXSwxMTU6NzMsMTIyOlsyLDUwXSwxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMDpbMiw1MF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XSwxMzk6WzIsNTBdLDE0MDpbMiw1MF0sMTQxOlsyLDUwXSwxNDI6WzIsNTBdLDE0MzpbMiw1MF0sMTQ0OlsyLDUwXSwxNDU6WzIsNTBdfSx7MTpbMiw1MV0sNjpbMiw1MV0sMjg6WzIsNTFdLDI5OlsyLDUxXSw1MjpbMiw1MV0sNTc6WzIsNTFdLDYwOlsyLDUxXSw3NjpbMiw1MV0sODE6WzIsNTFdLDkwOlsyLDUxXSw5NTpbMiw1MV0sOTc6WzIsNTFdLDEwNjpbMiw1MV0sMTA4OlsyLDUxXSwxMDk6WzIsNTFdLDExMDpbMiw1MV0sMTE0OlsyLDUxXSwxMjI6WzIsNTFdLDEzMDpbMiw1MV0sMTMzOlsyLDUxXSwxMzQ6WzIsNTFdLDEzOTpbMiw1MV0sMTQwOlsyLDUxXSwxNDE6WzIsNTFdLDE0MjpbMiw1MV0sMTQzOlsyLDUxXSwxNDQ6WzIsNTFdLDE0NTpbMiw1MV19LHs3OjE1MSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTQ6MTUwLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTIwXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDc3XSw2OlsyLDc3XSwyODpbMiw3N10sMjk6WzIsNzddLDQzOlsyLDc3XSw1MjpbMiw3N10sNTc6WzIsNzddLDYwOlsyLDc3XSw2OTpbMiw3N10sNzA6WzIsNzddLDcxOlsyLDc3XSw3MjpbMiw3N10sNzQ6WzIsNzddLDc2OlsyLDc3XSw3NzpbMiw3N10sODE6WzIsNzddLDg4OlsyLDc3XSw4OTpbMiw3N10sOTA6WzIsNzddLDk1OlsyLDc3XSw5NzpbMiw3N10sMTA2OlsyLDc3XSwxMDg6WzIsNzddLDEwOTpbMiw3N10sMTEwOlsyLDc3XSwxMTQ6WzIsNzddLDEyMjpbMiw3N10sMTMwOlsyLDc3XSwxMzM6WzIsNzddLDEzNDpbMiw3N10sMTM5OlsyLDc3XSwxNDA6WzIsNzddLDE0MTpbMiw3N10sMTQyOlsyLDc3XSwxNDM6WzIsNzddLDE0NDpbMiw3N10sMTQ1OlsyLDc3XX0sezE6WzIsNzhdLDY6WzIsNzhdLDI4OlsyLDc4XSwyOTpbMiw3OF0sNDM6WzIsNzhdLDUyOlsyLDc4XSw1NzpbMiw3OF0sNjA6WzIsNzhdLDY5OlsyLDc4XSw3MDpbMiw3OF0sNzE6WzIsNzhdLDcyOlsyLDc4XSw3NDpbMiw3OF0sNzY6WzIsNzhdLDc3OlsyLDc4XSw4MTpbMiw3OF0sODg6WzIsNzhdLDg5OlsyLDc4XSw5MDpbMiw3OF0sOTU6WzIsNzhdLDk3OlsyLDc4XSwxMDY6WzIsNzhdLDEwODpbMiw3OF0sMTA5OlsyLDc4XSwxMTA6WzIsNzhdLDExNDpbMiw3OF0sMTIyOlsyLDc4XSwxMzA6WzIsNzhdLDEzMzpbMiw3OF0sMTM0OlsyLDc4XSwxMzk6WzIsNzhdLDE0MDpbMiw3OF0sMTQxOlsyLDc4XSwxNDI6WzIsNzhdLDE0MzpbMiw3OF0sMTQ0OlsyLDc4XSwxNDU6WzIsNzhdfSx7MTpbMiwzMl0sNjpbMiwzMl0sMjg6WzIsMzJdLDI5OlsyLDMyXSw1MjpbMiwzMl0sNTc6WzIsMzJdLDYwOlsyLDMyXSw2OTpbMiwzMl0sNzA6WzIsMzJdLDcxOlsyLDMyXSw3MjpbMiwzMl0sNzQ6WzIsMzJdLDc2OlsyLDMyXSw3NzpbMiwzMl0sODE6WzIsMzJdLDg4OlsyLDMyXSw4OTpbMiwzMl0sOTA6WzIsMzJdLDk1OlsyLDMyXSw5NzpbMiwzMl0sMTA2OlsyLDMyXSwxMDg6WzIsMzJdLDEwOTpbMiwzMl0sMTEwOlsyLDMyXSwxMTQ6WzIsMzJdLDEyMjpbMiwzMl0sMTMwOlsyLDMyXSwxMzM6WzIsMzJdLDEzNDpbMiwzMl0sMTM5OlsyLDMyXSwxNDA6WzIsMzJdLDE0MTpbMiwzMl0sMTQyOlsyLDMyXSwxNDM6WzIsMzJdLDE0NDpbMiwzMl0sMTQ1OlsyLDMyXX0sezE6WzIsMzNdLDY6WzIsMzNdLDI4OlsyLDMzXSwyOTpbMiwzM10sNTI6WzIsMzNdLDU3OlsyLDMzXSw2MDpbMiwzM10sNjk6WzIsMzNdLDcwOlsyLDMzXSw3MTpbMiwzM10sNzI6WzIsMzNdLDc0OlsyLDMzXSw3NjpbMiwzM10sNzc6WzIsMzNdLDgxOlsyLDMzXSw4ODpbMiwzM10sODk6WzIsMzNdLDkwOlsyLDMzXSw5NTpbMiwzM10sOTc6WzIsMzNdLDEwNjpbMiwzM10sMTA4OlsyLDMzXSwxMDk6WzIsMzNdLDExMDpbMiwzM10sMTE0OlsyLDMzXSwxMjI6WzIsMzNdLDEzMDpbMiwzM10sMTMzOlsyLDMzXSwxMzQ6WzIsMzNdLDEzOTpbMiwzM10sMTQwOlsyLDMzXSwxNDE6WzIsMzNdLDE0MjpbMiwzM10sMTQzOlsyLDMzXSwxNDQ6WzIsMzNdLDE0NTpbMiwzM119LHsxOlsyLDM0XSw2OlsyLDM0XSwyODpbMiwzNF0sMjk6WzIsMzRdLDUyOlsyLDM0XSw1NzpbMiwzNF0sNjA6WzIsMzRdLDY5OlsyLDM0XSw3MDpbMiwzNF0sNzE6WzIsMzRdLDcyOlsyLDM0XSw3NDpbMiwzNF0sNzY6WzIsMzRdLDc3OlsyLDM0XSw4MTpbMiwzNF0sODg6WzIsMzRdLDg5OlsyLDM0XSw5MDpbMiwzNF0sOTU6WzIsMzRdLDk3OlsyLDM0XSwxMDY6WzIsMzRdLDEwODpbMiwzNF0sMTA5OlsyLDM0XSwxMTA6WzIsMzRdLDExNDpbMiwzNF0sMTIyOlsyLDM0XSwxMzA6WzIsMzRdLDEzMzpbMiwzNF0sMTM0OlsyLDM0XSwxMzk6WzIsMzRdLDE0MDpbMiwzNF0sMTQxOlsyLDM0XSwxNDI6WzIsMzRdLDE0MzpbMiwzNF0sMTQ0OlsyLDM0XSwxNDU6WzIsMzRdfSx7MTpbMiwzNV0sNjpbMiwzNV0sMjg6WzIsMzVdLDI5OlsyLDM1XSw1MjpbMiwzNV0sNTc6WzIsMzVdLDYwOlsyLDM1XSw2OTpbMiwzNV0sNzA6WzIsMzVdLDcxOlsyLDM1XSw3MjpbMiwzNV0sNzQ6WzIsMzVdLDc2OlsyLDM1XSw3NzpbMiwzNV0sODE6WzIsMzVdLDg4OlsyLDM1XSw4OTpbMiwzNV0sOTA6WzIsMzVdLDk1OlsyLDM1XSw5NzpbMiwzNV0sMTA2OlsyLDM1XSwxMDg6WzIsMzVdLDEwOTpbMiwzNV0sMTEwOlsyLDM1XSwxMTQ6WzIsMzVdLDEyMjpbMiwzNV0sMTMwOlsyLDM1XSwxMzM6WzIsMzVdLDEzNDpbMiwzNV0sMTM5OlsyLDM1XSwxNDA6WzIsMzVdLDE0MTpbMiwzNV0sMTQyOlsyLDM1XSwxNDM6WzIsMzVdLDE0NDpbMiwzNV0sMTQ1OlsyLDM1XX0sezE6WzIsMzZdLDY6WzIsMzZdLDI4OlsyLDM2XSwyOTpbMiwzNl0sNTI6WzIsMzZdLDU3OlsyLDM2XSw2MDpbMiwzNl0sNjk6WzIsMzZdLDcwOlsyLDM2XSw3MTpbMiwzNl0sNzI6WzIsMzZdLDc0OlsyLDM2XSw3NjpbMiwzNl0sNzc6WzIsMzZdLDgxOlsyLDM2XSw4ODpbMiwzNl0sODk6WzIsMzZdLDkwOlsyLDM2XSw5NTpbMiwzNl0sOTc6WzIsMzZdLDEwNjpbMiwzNl0sMTA4OlsyLDM2XSwxMDk6WzIsMzZdLDExMDpbMiwzNl0sMTE0OlsyLDM2XSwxMjI6WzIsMzZdLDEzMDpbMiwzNl0sMTMzOlsyLDM2XSwxMzQ6WzIsMzZdLDEzOTpbMiwzNl0sMTQwOlsyLDM2XSwxNDE6WzIsMzZdLDE0MjpbMiwzNl0sMTQzOlsyLDM2XSwxNDQ6WzIsMzZdLDE0NTpbMiwzNl19LHsxOlsyLDM3XSw2OlsyLDM3XSwyODpbMiwzN10sMjk6WzIsMzddLDUyOlsyLDM3XSw1NzpbMiwzN10sNjA6WzIsMzddLDY5OlsyLDM3XSw3MDpbMiwzN10sNzE6WzIsMzddLDcyOlsyLDM3XSw3NDpbMiwzN10sNzY6WzIsMzddLDc3OlsyLDM3XSw4MTpbMiwzN10sODg6WzIsMzddLDg5OlsyLDM3XSw5MDpbMiwzN10sOTU6WzIsMzddLDk3OlsyLDM3XSwxMDY6WzIsMzddLDEwODpbMiwzN10sMTA5OlsyLDM3XSwxMTA6WzIsMzddLDExNDpbMiwzN10sMTIyOlsyLDM3XSwxMzA6WzIsMzddLDEzMzpbMiwzN10sMTM0OlsyLDM3XSwxMzk6WzIsMzddLDE0MDpbMiwzN10sMTQxOlsyLDM3XSwxNDI6WzIsMzddLDE0MzpbMiwzN10sMTQ0OlsyLDM3XSwxNDU6WzIsMzddfSx7MTpbMiwzOF0sNjpbMiwzOF0sMjg6WzIsMzhdLDI5OlsyLDM4XSw1MjpbMiwzOF0sNTc6WzIsMzhdLDYwOlsyLDM4XSw2OTpbMiwzOF0sNzA6WzIsMzhdLDcxOlsyLDM4XSw3MjpbMiwzOF0sNzQ6WzIsMzhdLDc2OlsyLDM4XSw3NzpbMiwzOF0sODE6WzIsMzhdLDg4OlsyLDM4XSw4OTpbMiwzOF0sOTA6WzIsMzhdLDk1OlsyLDM4XSw5NzpbMiwzOF0sMTA2OlsyLDM4XSwxMDg6WzIsMzhdLDEwOTpbMiwzOF0sMTEwOlsyLDM4XSwxMTQ6WzIsMzhdLDEyMjpbMiwzOF0sMTMwOlsyLDM4XSwxMzM6WzIsMzhdLDEzNDpbMiwzOF0sMTM5OlsyLDM4XSwxNDA6WzIsMzhdLDE0MTpbMiwzOF0sMTQyOlsyLDM4XSwxNDM6WzIsMzhdLDE0NDpbMiwzOF0sMTQ1OlsyLDM4XX0sezQ6MTUyLDU6Myw3OjQsODo1LDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE1M10sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxNTQsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTU4XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MToxNTYsOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTU6WzEsMTU1XSw5ODoxNTcsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMThdLDY6WzIsMTE4XSwyODpbMiwxMThdLDI5OlsyLDExOF0sNTI6WzIsMTE4XSw1NzpbMiwxMThdLDYwOlsyLDExOF0sNjk6WzIsMTE4XSw3MDpbMiwxMThdLDcxOlsyLDExOF0sNzI6WzIsMTE4XSw3NDpbMiwxMThdLDc2OlsyLDExOF0sNzc6WzIsMTE4XSw4MTpbMiwxMThdLDg4OlsyLDExOF0sODk6WzIsMTE4XSw5MDpbMiwxMThdLDk1OlsyLDExOF0sOTc6WzIsMTE4XSwxMDY6WzIsMTE4XSwxMDg6WzIsMTE4XSwxMDk6WzIsMTE4XSwxMTA6WzIsMTE4XSwxMTQ6WzIsMTE4XSwxMjI6WzIsMTE4XSwxMzA6WzIsMTE4XSwxMzM6WzIsMTE4XSwxMzQ6WzIsMTE4XSwxMzk6WzIsMTE4XSwxNDA6WzIsMTE4XSwxNDE6WzIsMTE4XSwxNDI6WzIsMTE4XSwxNDM6WzIsMTE4XSwxNDQ6WzIsMTE4XSwxNDU6WzIsMTE4XX0sezE6WzIsMTE5XSw2OlsyLDExOV0sMjg6WzIsMTE5XSwyOTpbMiwxMTldLDMwOjE2MSwzMTpbMSw3N10sNTI6WzIsMTE5XSw1NzpbMiwxMTldLDYwOlsyLDExOV0sNjk6WzIsMTE5XSw3MDpbMiwxMTldLDcxOlsyLDExOV0sNzI6WzIsMTE5XSw3NDpbMiwxMTldLDc2OlsyLDExOV0sNzc6WzIsMTE5XSw4MTpbMiwxMTldLDg4OlsyLDExOV0sODk6WzIsMTE5XSw5MDpbMiwxMTldLDk1OlsyLDExOV0sOTc6WzIsMTE5XSwxMDY6WzIsMTE5XSwxMDg6WzIsMTE5XSwxMDk6WzIsMTE5XSwxMTA6WzIsMTE5XSwxMTQ6WzIsMTE5XSwxMjI6WzIsMTE5XSwxMzA6WzIsMTE5XSwxMzM6WzIsMTE5XSwxMzQ6WzIsMTE5XSwxMzk6WzIsMTE5XSwxNDA6WzIsMTE5XSwxNDE6WzIsMTE5XSwxNDI6WzIsMTE5XSwxNDM6WzIsMTE5XSwxNDQ6WzIsMTE5XSwxNDU6WzIsMTE5XX0sezI4OlsyLDU0XX0sezI4OlsyLDU1XX0sezE6WzIsNzJdLDY6WzIsNzJdLDI4OlsyLDcyXSwyOTpbMiw3Ml0sNDM6WzIsNzJdLDUyOlsyLDcyXSw1NzpbMiw3Ml0sNjA6WzIsNzJdLDY5OlsyLDcyXSw3MDpbMiw3Ml0sNzE6WzIsNzJdLDcyOlsyLDcyXSw3NDpbMiw3Ml0sNzY6WzIsNzJdLDc3OlsyLDcyXSw4MTpbMiw3Ml0sODM6WzIsNzJdLDg4OlsyLDcyXSw4OTpbMiw3Ml0sOTA6WzIsNzJdLDk1OlsyLDcyXSw5NzpbMiw3Ml0sMTA2OlsyLDcyXSwxMDg6WzIsNzJdLDEwOTpbMiw3Ml0sMTEwOlsyLDcyXSwxMTQ6WzIsNzJdLDEyMjpbMiw3Ml0sMTMwOlsyLDcyXSwxMzM6WzIsNzJdLDEzNDpbMiw3Ml0sMTM3OlsyLDcyXSwxMzg6WzIsNzJdLDEzOTpbMiw3Ml0sMTQwOlsyLDcyXSwxNDE6WzIsNzJdLDE0MjpbMiw3Ml0sMTQzOlsyLDcyXSwxNDQ6WzIsNzJdLDE0NTpbMiw3Ml0sMTQ2OlsyLDcyXX0sezE6WzIsNzVdLDY6WzIsNzVdLDI4OlsyLDc1XSwyOTpbMiw3NV0sNDM6WzIsNzVdLDUyOlsyLDc1XSw1NzpbMiw3NV0sNjA6WzIsNzVdLDY5OlsyLDc1XSw3MDpbMiw3NV0sNzE6WzIsNzVdLDcyOlsyLDc1XSw3NDpbMiw3NV0sNzY6WzIsNzVdLDc3OlsyLDc1XSw4MTpbMiw3NV0sODM6WzIsNzVdLDg4OlsyLDc1XSw4OTpbMiw3NV0sOTA6WzIsNzVdLDk1OlsyLDc1XSw5NzpbMiw3NV0sMTA2OlsyLDc1XSwxMDg6WzIsNzVdLDEwOTpbMiw3NV0sMTEwOlsyLDc1XSwxMTQ6WzIsNzVdLDEyMjpbMiw3NV0sMTMwOlsyLDc1XSwxMzM6WzIsNzVdLDEzNDpbMiw3NV0sMTM3OlsyLDc1XSwxMzg6WzIsNzVdLDEzOTpbMiw3NV0sMTQwOlsyLDc1XSwxNDE6WzIsNzVdLDE0MjpbMiw3NV0sMTQzOlsyLDc1XSwxNDQ6WzIsNzVdLDE0NTpbMiw3NV0sMTQ2OlsyLDc1XX0sezc6MTYyLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTYzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTY0LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTY2LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNDoxNjUsMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxMjBdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezMwOjE3MSwzMTpbMSw3N10sNDc6MTcyLDYxOjE3Myw2MjoxNzQsNjc6MTY3LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDYxXSwxMTc6MTY4LDExODpbMSwxNjldLDExOToxNzB9LHsxMTY6MTc1LDEyMDpbMSwxNzZdLDEyMTpbMSwxNzddfSx7NjpbMiw5Nl0sMTA6MTgxLDI4OlsyLDk2XSwzMDoxODIsMzE6WzEsNzddLDMyOjE4MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDQ0OjE3OSw0NToxODAsNDc6MTg0LDQ5OlsxLDQ5XSw1NzpbMiw5Nl0sODA6MTc4LDgxOlsyLDk2XSw5MzpbMSwxMTddfSx7MTpbMiwzMF0sNjpbMiwzMF0sMjg6WzIsMzBdLDI5OlsyLDMwXSw0NjpbMiwzMF0sNTI6WzIsMzBdLDU3OlsyLDMwXSw2MDpbMiwzMF0sNjk6WzIsMzBdLDcwOlsyLDMwXSw3MTpbMiwzMF0sNzI6WzIsMzBdLDc0OlsyLDMwXSw3NjpbMiwzMF0sNzc6WzIsMzBdLDgxOlsyLDMwXSw4ODpbMiwzMF0sODk6WzIsMzBdLDkwOlsyLDMwXSw5NTpbMiwzMF0sOTc6WzIsMzBdLDEwNjpbMiwzMF0sMTA4OlsyLDMwXSwxMDk6WzIsMzBdLDExMDpbMiwzMF0sMTE0OlsyLDMwXSwxMjI6WzIsMzBdLDEzMDpbMiwzMF0sMTMzOlsyLDMwXSwxMzQ6WzIsMzBdLDEzOTpbMiwzMF0sMTQwOlsyLDMwXSwxNDE6WzIsMzBdLDE0MjpbMiwzMF0sMTQzOlsyLDMwXSwxNDQ6WzIsMzBdLDE0NTpbMiwzMF19LHsxOlsyLDMxXSw2OlsyLDMxXSwyODpbMiwzMV0sMjk6WzIsMzFdLDQ2OlsyLDMxXSw1MjpbMiwzMV0sNTc6WzIsMzFdLDYwOlsyLDMxXSw2OTpbMiwzMV0sNzA6WzIsMzFdLDcxOlsyLDMxXSw3MjpbMiwzMV0sNzQ6WzIsMzFdLDc2OlsyLDMxXSw3NzpbMiwzMV0sODE6WzIsMzFdLDg4OlsyLDMxXSw4OTpbMiwzMV0sOTA6WzIsMzFdLDk1OlsyLDMxXSw5NzpbMiwzMV0sMTA2OlsyLDMxXSwxMDg6WzIsMzFdLDEwOTpbMiwzMV0sMTEwOlsyLDMxXSwxMTQ6WzIsMzFdLDEyMjpbMiwzMV0sMTMwOlsyLDMxXSwxMzM6WzIsMzFdLDEzNDpbMiwzMV0sMTM5OlsyLDMxXSwxNDA6WzIsMzFdLDE0MTpbMiwzMV0sMTQyOlsyLDMxXSwxNDM6WzIsMzFdLDE0NDpbMiwzMV0sMTQ1OlsyLDMxXX0sezE6WzIsMjldLDY6WzIsMjldLDI4OlsyLDI5XSwyOTpbMiwyOV0sNDM6WzIsMjldLDQ2OlsyLDI5XSw1MjpbMiwyOV0sNTc6WzIsMjldLDYwOlsyLDI5XSw2OTpbMiwyOV0sNzA6WzIsMjldLDcxOlsyLDI5XSw3MjpbMiwyOV0sNzQ6WzIsMjldLDc2OlsyLDI5XSw3NzpbMiwyOV0sODE6WzIsMjldLDgzOlsyLDI5XSw4ODpbMiwyOV0sODk6WzIsMjldLDkwOlsyLDI5XSw5NTpbMiwyOV0sOTc6WzIsMjldLDEwNjpbMiwyOV0sMTA4OlsyLDI5XSwxMDk6WzIsMjldLDExMDpbMiwyOV0sMTE0OlsyLDI5XSwxMjA6WzIsMjldLDEyMTpbMiwyOV0sMTIyOlsyLDI5XSwxMzA6WzIsMjldLDEzMzpbMiwyOV0sMTM0OlsyLDI5XSwxMzc6WzIsMjldLDEzODpbMiwyOV0sMTM5OlsyLDI5XSwxNDA6WzIsMjldLDE0MTpbMiwyOV0sMTQyOlsyLDI5XSwxNDM6WzIsMjldLDE0NDpbMiwyOV0sMTQ1OlsyLDI5XSwxNDY6WzIsMjldfSx7MTpbMiw1XSw1OjE4NSw2OlsyLDVdLDc6NCw4OjUsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjk6WzIsNV0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA2OlsyLDVdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMjA1XSw2OlsyLDIwNV0sMjg6WzIsMjA1XSwyOTpbMiwyMDVdLDUyOlsyLDIwNV0sNTc6WzIsMjA1XSw2MDpbMiwyMDVdLDc2OlsyLDIwNV0sODE6WzIsMjA1XSw5MDpbMiwyMDVdLDk1OlsyLDIwNV0sOTc6WzIsMjA1XSwxMDY6WzIsMjA1XSwxMDg6WzIsMjA1XSwxMDk6WzIsMjA1XSwxMTA6WzIsMjA1XSwxMTQ6WzIsMjA1XSwxMjI6WzIsMjA1XSwxMzA6WzIsMjA1XSwxMzM6WzIsMjA1XSwxMzQ6WzIsMjA1XSwxMzk6WzIsMjA1XSwxNDA6WzIsMjA1XSwxNDE6WzIsMjA1XSwxNDI6WzIsMjA1XSwxNDM6WzIsMjA1XSwxNDQ6WzIsMjA1XSwxNDU6WzIsMjA1XX0sezc6MTg2LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTg3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTg4LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTg5LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTkwLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTkxLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTkyLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTkzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTk0LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTU2XSw2OlsyLDE1Nl0sMjg6WzIsMTU2XSwyOTpbMiwxNTZdLDUyOlsyLDE1Nl0sNTc6WzIsMTU2XSw2MDpbMiwxNTZdLDc2OlsyLDE1Nl0sODE6WzIsMTU2XSw5MDpbMiwxNTZdLDk1OlsyLDE1Nl0sOTc6WzIsMTU2XSwxMDY6WzIsMTU2XSwxMDg6WzIsMTU2XSwxMDk6WzIsMTU2XSwxMTA6WzIsMTU2XSwxMTQ6WzIsMTU2XSwxMjI6WzIsMTU2XSwxMzA6WzIsMTU2XSwxMzM6WzIsMTU2XSwxMzQ6WzIsMTU2XSwxMzk6WzIsMTU2XSwxNDA6WzIsMTU2XSwxNDE6WzIsMTU2XSwxNDI6WzIsMTU2XSwxNDM6WzIsMTU2XSwxNDQ6WzIsMTU2XSwxNDU6WzIsMTU2XX0sezE6WzIsMTYxXSw2OlsyLDE2MV0sMjg6WzIsMTYxXSwyOTpbMiwxNjFdLDUyOlsyLDE2MV0sNTc6WzIsMTYxXSw2MDpbMiwxNjFdLDc2OlsyLDE2MV0sODE6WzIsMTYxXSw5MDpbMiwxNjFdLDk1OlsyLDE2MV0sOTc6WzIsMTYxXSwxMDY6WzIsMTYxXSwxMDg6WzIsMTYxXSwxMDk6WzIsMTYxXSwxMTA6WzIsMTYxXSwxMTQ6WzIsMTYxXSwxMjI6WzIsMTYxXSwxMzA6WzIsMTYxXSwxMzM6WzIsMTYxXSwxMzQ6WzIsMTYxXSwxMzk6WzIsMTYxXSwxNDA6WzIsMTYxXSwxNDE6WzIsMTYxXSwxNDI6WzIsMTYxXSwxNDM6WzIsMTYxXSwxNDQ6WzIsMTYxXSwxNDU6WzIsMTYxXX0sezc6MTk1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTU1XSw2OlsyLDE1NV0sMjg6WzIsMTU1XSwyOTpbMiwxNTVdLDUyOlsyLDE1NV0sNTc6WzIsMTU1XSw2MDpbMiwxNTVdLDc2OlsyLDE1NV0sODE6WzIsMTU1XSw5MDpbMiwxNTVdLDk1OlsyLDE1NV0sOTc6WzIsMTU1XSwxMDY6WzIsMTU1XSwxMDg6WzIsMTU1XSwxMDk6WzIsMTU1XSwxMTA6WzIsMTU1XSwxMTQ6WzIsMTU1XSwxMjI6WzIsMTU1XSwxMzA6WzIsMTU1XSwxMzM6WzIsMTU1XSwxMzQ6WzIsMTU1XSwxMzk6WzIsMTU1XSwxNDA6WzIsMTU1XSwxNDE6WzIsMTU1XSwxNDI6WzIsMTU1XSwxNDM6WzIsMTU1XSwxNDQ6WzIsMTU1XSwxNDU6WzIsMTU1XX0sezE6WzIsMTYwXSw2OlsyLDE2MF0sMjg6WzIsMTYwXSwyOTpbMiwxNjBdLDUyOlsyLDE2MF0sNTc6WzIsMTYwXSw2MDpbMiwxNjBdLDc2OlsyLDE2MF0sODE6WzIsMTYwXSw5MDpbMiwxNjBdLDk1OlsyLDE2MF0sOTc6WzIsMTYwXSwxMDY6WzIsMTYwXSwxMDg6WzIsMTYwXSwxMDk6WzIsMTYwXSwxMTA6WzIsMTYwXSwxMTQ6WzIsMTYwXSwxMjI6WzIsMTYwXSwxMzA6WzIsMTYwXSwxMzM6WzIsMTYwXSwxMzQ6WzIsMTYwXSwxMzk6WzIsMTYwXSwxNDA6WzIsMTYwXSwxNDE6WzIsMTYwXSwxNDI6WzIsMTYwXSwxNDM6WzIsMTYwXSwxNDQ6WzIsMTYwXSwxNDU6WzIsMTYwXX0sezg1OjE5Niw4OTpbMSwxMDhdfSx7MTpbMiw3M10sNjpbMiw3M10sMjg6WzIsNzNdLDI5OlsyLDczXSw0MzpbMiw3M10sNTI6WzIsNzNdLDU3OlsyLDczXSw2MDpbMiw3M10sNjk6WzIsNzNdLDcwOlsyLDczXSw3MTpbMiw3M10sNzI6WzIsNzNdLDc0OlsyLDczXSw3NjpbMiw3M10sNzc6WzIsNzNdLDgxOlsyLDczXSw4MzpbMiw3M10sODg6WzIsNzNdLDg5OlsyLDczXSw5MDpbMiw3M10sOTU6WzIsNzNdLDk3OlsyLDczXSwxMDY6WzIsNzNdLDEwODpbMiw3M10sMTA5OlsyLDczXSwxMTA6WzIsNzNdLDExNDpbMiw3M10sMTIyOlsyLDczXSwxMzA6WzIsNzNdLDEzMzpbMiw3M10sMTM0OlsyLDczXSwxMzc6WzIsNzNdLDEzODpbMiw3M10sMTM5OlsyLDczXSwxNDA6WzIsNzNdLDE0MTpbMiw3M10sMTQyOlsyLDczXSwxNDM6WzIsNzNdLDE0NDpbMiw3M10sMTQ1OlsyLDczXSwxNDY6WzIsNzNdfSx7ODk6WzIsMTE1XX0sezI3OjE5OCwzMDoxOTcsMzE6WzEsNzddLDg3OlsxLDQ3XX0sezMwOjE5OSwzMTpbMSw3N119LHsxOlsyLDg5XSw2OlsyLDg5XSwyODpbMiw4OV0sMjk6WzIsODldLDMwOjIwMCwzMTpbMSw3N10sNDM6WzIsODldLDUyOlsyLDg5XSw1NzpbMiw4OV0sNjA6WzIsODldLDY5OlsyLDg5XSw3MDpbMiw4OV0sNzE6WzIsODldLDcyOlsyLDg5XSw3NDpbMiw4OV0sNzY6WzIsODldLDc3OlsyLDg5XSw4MTpbMiw4OV0sODM6WzIsODldLDg4OlsyLDg5XSw4OTpbMiw4OV0sOTA6WzIsODldLDk1OlsyLDg5XSw5NzpbMiw4OV0sMTA2OlsyLDg5XSwxMDg6WzIsODldLDEwOTpbMiw4OV0sMTEwOlsyLDg5XSwxMTQ6WzIsODldLDEyMjpbMiw4OV0sMTMwOlsyLDg5XSwxMzM6WzIsODldLDEzNDpbMiw4OV0sMTM3OlsyLDg5XSwxMzg6WzIsODldLDEzOTpbMiw4OV0sMTQwOlsyLDg5XSwxNDE6WzIsODldLDE0MjpbMiw4OV0sMTQzOlsyLDg5XSwxNDQ6WzIsODldLDE0NTpbMiw4OV0sMTQ2OlsyLDg5XX0sezMwOjIwMSwzMTpbMSw3N119LHsxOlsyLDkwXSw2OlsyLDkwXSwyODpbMiw5MF0sMjk6WzIsOTBdLDQzOlsyLDkwXSw1MjpbMiw5MF0sNTc6WzIsOTBdLDYwOlsyLDkwXSw2OTpbMiw5MF0sNzA6WzIsOTBdLDcxOlsyLDkwXSw3MjpbMiw5MF0sNzQ6WzIsOTBdLDc2OlsyLDkwXSw3NzpbMiw5MF0sODE6WzIsOTBdLDgzOlsyLDkwXSw4ODpbMiw5MF0sODk6WzIsOTBdLDkwOlsyLDkwXSw5NTpbMiw5MF0sOTc6WzIsOTBdLDEwNjpbMiw5MF0sMTA4OlsyLDkwXSwxMDk6WzIsOTBdLDExMDpbMiw5MF0sMTE0OlsyLDkwXSwxMjI6WzIsOTBdLDEzMDpbMiw5MF0sMTMzOlsyLDkwXSwxMzQ6WzIsOTBdLDEzNzpbMiw5MF0sMTM4OlsyLDkwXSwxMzk6WzIsOTBdLDE0MDpbMiw5MF0sMTQxOlsyLDkwXSwxNDI6WzIsOTBdLDE0MzpbMiw5MF0sMTQ0OlsyLDkwXSwxNDU6WzIsOTBdLDE0NjpbMiw5MF19LHs3OjIwMyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDIwN10sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzU6MjAyLDc4OjIwNCw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTY6MjA1LDk3OlsxLDIwNl0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzM6MjA4LDc0OlsxLDEwMl0sNzc6WzEsMTAzXX0sezg1OjIwOSw4OTpbMSwxMDhdfSx7MTpbMiw3NF0sNjpbMiw3NF0sMjg6WzIsNzRdLDI5OlsyLDc0XSw0MzpbMiw3NF0sNTI6WzIsNzRdLDU3OlsyLDc0XSw2MDpbMiw3NF0sNjk6WzIsNzRdLDcwOlsyLDc0XSw3MTpbMiw3NF0sNzI6WzIsNzRdLDc0OlsyLDc0XSw3NjpbMiw3NF0sNzc6WzIsNzRdLDgxOlsyLDc0XSw4MzpbMiw3NF0sODg6WzIsNzRdLDg5OlsyLDc0XSw5MDpbMiw3NF0sOTU6WzIsNzRdLDk3OlsyLDc0XSwxMDY6WzIsNzRdLDEwODpbMiw3NF0sMTA5OlsyLDc0XSwxMTA6WzIsNzRdLDExNDpbMiw3NF0sMTIyOlsyLDc0XSwxMzA6WzIsNzRdLDEzMzpbMiw3NF0sMTM0OlsyLDc0XSwxMzc6WzIsNzRdLDEzODpbMiw3NF0sMTM5OlsyLDc0XSwxNDA6WzIsNzRdLDE0MTpbMiw3NF0sMTQyOlsyLDc0XSwxNDM6WzIsNzRdLDE0NDpbMiw3NF0sMTQ1OlsyLDc0XSwxNDY6WzIsNzRdfSx7NjpbMSwyMTFdLDc6MjEwLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDIxMl0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMTJdLDY6WzIsMTEyXSwyODpbMiwxMTJdLDI5OlsyLDExMl0sNTI6WzIsMTEyXSw1NzpbMiwxMTJdLDYwOlsyLDExMl0sNjk6WzIsMTEyXSw3MDpbMiwxMTJdLDcxOlsyLDExMl0sNzI6WzIsMTEyXSw3NDpbMiwxMTJdLDc2OlsyLDExMl0sNzc6WzIsMTEyXSw4MTpbMiwxMTJdLDg4OlsyLDExMl0sODk6WzIsMTEyXSw5MDpbMiwxMTJdLDk1OlsyLDExMl0sOTc6WzIsMTEyXSwxMDY6WzIsMTEyXSwxMDg6WzIsMTEyXSwxMDk6WzIsMTEyXSwxMTA6WzIsMTEyXSwxMTQ6WzIsMTEyXSwxMjI6WzIsMTEyXSwxMzA6WzIsMTEyXSwxMzM6WzIsMTEyXSwxMzQ6WzIsMTEyXSwxMzk6WzIsMTEyXSwxNDA6WzIsMTEyXSwxNDE6WzIsMTEyXSwxNDI6WzIsMTEyXSwxNDM6WzIsMTEyXSwxNDQ6WzIsMTEyXSwxNDU6WzIsMTEyXX0sezc6MjE1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE1OF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTA6WzEsMjEzXSw5MToyMTQsOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTg6MTU3LDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsNTZdLDI4OlsyLDU2XSw1MjpbMSwyMTZdLDU2OjIxOCw1NzpbMSwyMTddfSx7NjpbMiw1OV0sMjg6WzIsNTldLDI5OlsyLDU5XSw1MjpbMiw1OV0sNTc6WzIsNTldfSx7NjpbMiw2M10sMjg6WzIsNjNdLDI5OlsyLDYzXSw0MzpbMSwyMjBdLDUyOlsyLDYzXSw1NzpbMiw2M10sNjA6WzEsMjE5XX0sezY6WzIsNjZdLDI4OlsyLDY2XSwyOTpbMiw2Nl0sNTI6WzIsNjZdLDU3OlsyLDY2XX0sezY6WzIsNjddLDI4OlsyLDY3XSwyOTpbMiw2N10sNDM6WzIsNjddLDUyOlsyLDY3XSw1NzpbMiw2N10sNjA6WzIsNjddfSx7NjpbMiw2OF0sMjg6WzIsNjhdLDI5OlsyLDY4XSw0MzpbMiw2OF0sNTI6WzIsNjhdLDU3OlsyLDY4XSw2MDpbMiw2OF19LHs2OlsyLDY5XSwyODpbMiw2OV0sMjk6WzIsNjldLDQzOlsyLDY5XSw1MjpbMiw2OV0sNTc6WzIsNjldLDYwOlsyLDY5XX0sezY6WzIsNzBdLDI4OlsyLDcwXSwyOTpbMiw3MF0sNDM6WzIsNzBdLDUyOlsyLDcwXSw1NzpbMiw3MF0sNjA6WzIsNzBdfSx7MzA6MTYxLDMxOlsxLDc3XX0sezc6MjE1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE1OF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTE6MTU2LDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk1OlsxLDE1NV0sOTg6MTU3LDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsNTNdLDY6WzIsNTNdLDI4OlsyLDUzXSwyOTpbMiw1M10sNTI6WzIsNTNdLDU3OlsyLDUzXSw2MDpbMiw1M10sNzY6WzIsNTNdLDgxOlsyLDUzXSw5MDpbMiw1M10sOTU6WzIsNTNdLDk3OlsyLDUzXSwxMDY6WzIsNTNdLDEwODpbMiw1M10sMTA5OlsyLDUzXSwxMTA6WzIsNTNdLDExNDpbMiw1M10sMTIyOlsyLDUzXSwxMzA6WzIsNTNdLDEzMzpbMiw1M10sMTM0OlsyLDUzXSwxMzk6WzIsNTNdLDE0MDpbMiw1M10sMTQxOlsyLDUzXSwxNDI6WzIsNTNdLDE0MzpbMiw1M10sMTQ0OlsyLDUzXSwxNDU6WzIsNTNdfSx7NDoyMjIsNTozLDc6NCw4OjUsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjk6WzEsMjIxXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDE5NF0sNjpbMiwxOTRdLDI4OlsyLDE5NF0sMjk6WzIsMTk0XSw1MjpbMiwxOTRdLDU3OlsyLDE5NF0sNjA6WzIsMTk0XSw3NjpbMiwxOTRdLDgxOlsyLDE5NF0sOTA6WzIsMTk0XSw5NTpbMiwxOTRdLDk3OlsyLDE5NF0sMTA2OlsyLDE5NF0sMTA3Ojg5LDEwODpbMiwxOTRdLDEwOTpbMiwxOTRdLDExMDpbMiwxOTRdLDExMzo5MCwxMTQ6WzIsMTk0XSwxMTU6NzMsMTIyOlsyLDE5NF0sMTMwOlsyLDE5NF0sMTMzOlsyLDE5NF0sMTM0OlsyLDE5NF0sMTM5OlsxLDc5XSwxNDA6WzIsMTk0XSwxNDE6WzIsMTk0XSwxNDI6WzIsMTk0XSwxNDM6WzIsMTk0XSwxNDQ6WzIsMTk0XSwxNDU6WzIsMTk0XX0sezEwNzo5MiwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkzLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw5MV19LHsxOlsyLDE5NV0sNjpbMiwxOTVdLDI4OlsyLDE5NV0sMjk6WzIsMTk1XSw1MjpbMiwxOTVdLDU3OlsyLDE5NV0sNjA6WzIsMTk1XSw3NjpbMiwxOTVdLDgxOlsyLDE5NV0sOTA6WzIsMTk1XSw5NTpbMiwxOTVdLDk3OlsyLDE5NV0sMTA2OlsyLDE5NV0sMTA3Ojg5LDEwODpbMiwxOTVdLDEwOTpbMiwxOTVdLDExMDpbMiwxOTVdLDExMzo5MCwxMTQ6WzIsMTk1XSwxMTU6NzMsMTIyOlsyLDE5NV0sMTMwOlsyLDE5NV0sMTMzOlsyLDE5NV0sMTM0OlsyLDE5NV0sMTM5OlsxLDc5XSwxNDA6WzIsMTk1XSwxNDE6WzEsODNdLDE0MjpbMiwxOTVdLDE0MzpbMiwxOTVdLDE0NDpbMiwxOTVdLDE0NTpbMiwxOTVdfSx7MTpbMiwxOTZdLDY6WzIsMTk2XSwyODpbMiwxOTZdLDI5OlsyLDE5Nl0sNTI6WzIsMTk2XSw1NzpbMiwxOTZdLDYwOlsyLDE5Nl0sNzY6WzIsMTk2XSw4MTpbMiwxOTZdLDkwOlsyLDE5Nl0sOTU6WzIsMTk2XSw5NzpbMiwxOTZdLDEwNjpbMiwxOTZdLDEwNzo4OSwxMDg6WzIsMTk2XSwxMDk6WzIsMTk2XSwxMTA6WzIsMTk2XSwxMTM6OTAsMTE0OlsyLDE5Nl0sMTE1OjczLDEyMjpbMiwxOTZdLDEzMDpbMiwxOTZdLDEzMzpbMiwxOTZdLDEzNDpbMiwxOTZdLDEzOTpbMSw3OV0sMTQwOlsyLDE5Nl0sMTQxOlsxLDgzXSwxNDI6WzIsMTk2XSwxNDM6WzIsMTk2XSwxNDQ6WzIsMTk2XSwxNDU6WzIsMTk2XX0sezE6WzIsMTk3XSw2OlsyLDE5N10sMjg6WzIsMTk3XSwyOTpbMiwxOTddLDUyOlsyLDE5N10sNTc6WzIsMTk3XSw2MDpbMiwxOTddLDc2OlsyLDE5N10sODE6WzIsMTk3XSw5MDpbMiwxOTddLDk1OlsyLDE5N10sOTc6WzIsMTk3XSwxMDY6WzIsMTk3XSwxMDc6ODksMTA4OlsyLDE5N10sMTA5OlsyLDE5N10sMTEwOlsyLDE5N10sMTEzOjkwLDExNDpbMiwxOTddLDExNTo3MywxMjI6WzIsMTk3XSwxMzA6WzIsMTk3XSwxMzM6WzIsMTk3XSwxMzQ6WzIsMTk3XSwxMzk6WzEsNzldLDE0MDpbMiwxOTddLDE0MTpbMSw4M10sMTQyOlsyLDE5N10sMTQzOlsyLDE5N10sMTQ0OlsyLDE5N10sMTQ1OlsyLDE5N119LHsxOlsyLDE5OF0sNjpbMiwxOThdLDI4OlsyLDE5OF0sMjk6WzIsMTk4XSw1MjpbMiwxOThdLDU3OlsyLDE5OF0sNjA6WzIsMTk4XSw3NjpbMiwxOThdLDgxOlsyLDE5OF0sOTA6WzIsMTk4XSw5NTpbMiwxOThdLDk3OlsyLDE5OF0sMTA2OlsyLDE5OF0sMTA3OjkyLDEwODpbMiwxOThdLDEwOTpbMiwxOThdLDExMDpbMiwxOThdLDExMzo5MywxMTQ6WzIsMTk4XSwxMTU6NzMsMTIyOlsyLDE5OF0sMTMwOlsyLDE5OF0sMTMzOlsyLDE5OF0sMTM0OlsyLDE5OF0sMTM5OlsyLDE5OF0sMTQwOlsyLDE5OF0sMTQxOlsyLDE5OF0sMTQyOlsyLDE5OF0sMTQzOlsyLDE5OF0sMTQ0OlsyLDE5OF0sMTQ1OlsyLDE5OF19LHsxOlsyLDE5OV0sNjpbMiwxOTldLDI4OlsyLDE5OV0sMjk6WzIsMTk5XSw1MjpbMiwxOTldLDU3OlsyLDE5OV0sNjA6WzIsMTk5XSw3NjpbMiwxOTldLDgxOlsyLDE5OV0sOTA6WzIsMTk5XSw5NTpbMiwxOTldLDk3OlsyLDE5OV0sMTA2OlsyLDE5OV0sMTA3Ojg5LDEwODpbMiwxOTldLDEwOTpbMiwxOTldLDExMDpbMiwxOTldLDExMzo5MCwxMTQ6WzIsMTk5XSwxMTU6NzMsMTIyOlsyLDE5OV0sMTMwOlsyLDE5OV0sMTMzOlsyLDE5OV0sMTM0OlsyLDE5OV0sMTM5OlsxLDc5XSwxNDA6WzIsMTk5XSwxNDE6WzIsMTk5XSwxNDI6WzIsMTk5XSwxNDM6WzIsMTk5XSwxNDQ6WzIsMTk5XSwxNDU6WzIsMTk5XX0sezc6MjIzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMjAxXSw2OlsyLDIwMV0sMjg6WzIsMjAxXSwyOTpbMiwyMDFdLDUyOlsyLDIwMV0sNTc6WzIsMjAxXSw2MDpbMiwyMDFdLDY5OlsyLDc2XSw3MDpbMiw3Nl0sNzE6WzIsNzZdLDcyOlsyLDc2XSw3NDpbMiw3Nl0sNzY6WzIsMjAxXSw3NzpbMiw3Nl0sODE6WzIsMjAxXSw4ODpbMiw3Nl0sODk6WzIsNzZdLDkwOlsyLDIwMV0sOTU6WzIsMjAxXSw5NzpbMiwyMDFdLDEwNjpbMiwyMDFdLDEwODpbMiwyMDFdLDEwOTpbMiwyMDFdLDExMDpbMiwyMDFdLDExNDpbMiwyMDFdLDEyMjpbMiwyMDFdLDEzMDpbMiwyMDFdLDEzMzpbMiwyMDFdLDEzNDpbMiwyMDFdLDEzOTpbMiwyMDFdLDE0MDpbMiwyMDFdLDE0MTpbMiwyMDFdLDE0MjpbMiwyMDFdLDE0MzpbMiwyMDFdLDE0NDpbMiwyMDFdLDE0NTpbMiwyMDFdfSx7NjU6OTUsNjk6WzEsOTddLDcwOlsxLDk4XSw3MTpbMSw5OV0sNzI6WzEsMTAwXSw3MzoxMDEsNzQ6WzEsMTAyXSw3NzpbMSwxMDNdLDg0Ojk0LDg4OlsxLDk2XSw4OTpbMiwxMTRdfSx7NjU6MTA1LDY5OlsxLDk3XSw3MDpbMSw5OF0sNzE6WzEsOTldLDcyOlsxLDEwMF0sNzM6MTAxLDc0OlsxLDEwMl0sNzc6WzEsMTAzXSw4NDoxMDQsODg6WzEsOTZdLDg5OlsyLDExNF19LHs2OTpbMiw3OV0sNzA6WzIsNzldLDcxOlsyLDc5XSw3MjpbMiw3OV0sNzQ6WzIsNzldLDc3OlsyLDc5XSw4ODpbMiw3OV0sODk6WzIsNzldfSx7MTpbMiwyMDJdLDY6WzIsMjAyXSwyODpbMiwyMDJdLDI5OlsyLDIwMl0sNTI6WzIsMjAyXSw1NzpbMiwyMDJdLDYwOlsyLDIwMl0sNjk6WzIsNzZdLDcwOlsyLDc2XSw3MTpbMiw3Nl0sNzI6WzIsNzZdLDc0OlsyLDc2XSw3NjpbMiwyMDJdLDc3OlsyLDc2XSw4MTpbMiwyMDJdLDg4OlsyLDc2XSw4OTpbMiw3Nl0sOTA6WzIsMjAyXSw5NTpbMiwyMDJdLDk3OlsyLDIwMl0sMTA2OlsyLDIwMl0sMTA4OlsyLDIwMl0sMTA5OlsyLDIwMl0sMTEwOlsyLDIwMl0sMTE0OlsyLDIwMl0sMTIyOlsyLDIwMl0sMTMwOlsyLDIwMl0sMTMzOlsyLDIwMl0sMTM0OlsyLDIwMl0sMTM5OlsyLDIwMl0sMTQwOlsyLDIwMl0sMTQxOlsyLDIwMl0sMTQyOlsyLDIwMl0sMTQzOlsyLDIwMl0sMTQ0OlsyLDIwMl0sMTQ1OlsyLDIwMl19LHsxOlsyLDIwM10sNjpbMiwyMDNdLDI4OlsyLDIwM10sMjk6WzIsMjAzXSw1MjpbMiwyMDNdLDU3OlsyLDIwM10sNjA6WzIsMjAzXSw3NjpbMiwyMDNdLDgxOlsyLDIwM10sOTA6WzIsMjAzXSw5NTpbMiwyMDNdLDk3OlsyLDIwM10sMTA2OlsyLDIwM10sMTA4OlsyLDIwM10sMTA5OlsyLDIwM10sMTEwOlsyLDIwM10sMTE0OlsyLDIwM10sMTIyOlsyLDIwM10sMTMwOlsyLDIwM10sMTMzOlsyLDIwM10sMTM0OlsyLDIwM10sMTM5OlsyLDIwM10sMTQwOlsyLDIwM10sMTQxOlsyLDIwM10sMTQyOlsyLDIwM10sMTQzOlsyLDIwM10sMTQ0OlsyLDIwM10sMTQ1OlsyLDIwM119LHsxOlsyLDIwNF0sNjpbMiwyMDRdLDI4OlsyLDIwNF0sMjk6WzIsMjA0XSw1MjpbMiwyMDRdLDU3OlsyLDIwNF0sNjA6WzIsMjA0XSw3NjpbMiwyMDRdLDgxOlsyLDIwNF0sOTA6WzIsMjA0XSw5NTpbMiwyMDRdLDk3OlsyLDIwNF0sMTA2OlsyLDIwNF0sMTA4OlsyLDIwNF0sMTA5OlsyLDIwNF0sMTEwOlsyLDIwNF0sMTE0OlsyLDIwNF0sMTIyOlsyLDIwNF0sMTMwOlsyLDIwNF0sMTMzOlsyLDIwNF0sMTM0OlsyLDIwNF0sMTM5OlsyLDIwNF0sMTQwOlsyLDIwNF0sMTQxOlsyLDIwNF0sMTQyOlsyLDIwNF0sMTQzOlsyLDIwNF0sMTQ0OlsyLDIwNF0sMTQ1OlsyLDIwNF19LHs2OlsxLDIyNl0sNzoyMjQsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMjI1XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjIyNyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxNDoyMjgsMjg6WzEsMTIwXSwxMjk6WzEsMjI5XX0sezE6WzIsMTQwXSw2OlsyLDE0MF0sMjg6WzIsMTQwXSwyOTpbMiwxNDBdLDUyOlsyLDE0MF0sNTc6WzIsMTQwXSw2MDpbMiwxNDBdLDc2OlsyLDE0MF0sODE6WzIsMTQwXSw5MDpbMiwxNDBdLDk1OlsyLDE0MF0sOTc6WzIsMTQwXSwxMDE6MjMwLDEwMjpbMSwyMzFdLDEwMzpbMSwyMzJdLDEwNjpbMiwxNDBdLDEwODpbMiwxNDBdLDEwOTpbMiwxNDBdLDExMDpbMiwxNDBdLDExNDpbMiwxNDBdLDEyMjpbMiwxNDBdLDEzMDpbMiwxNDBdLDEzMzpbMiwxNDBdLDEzNDpbMiwxNDBdLDEzOTpbMiwxNDBdLDE0MDpbMiwxNDBdLDE0MTpbMiwxNDBdLDE0MjpbMiwxNDBdLDE0MzpbMiwxNDBdLDE0NDpbMiwxNDBdLDE0NTpbMiwxNDBdfSx7MTpbMiwxNTRdLDY6WzIsMTU0XSwyODpbMiwxNTRdLDI5OlsyLDE1NF0sNTI6WzIsMTU0XSw1NzpbMiwxNTRdLDYwOlsyLDE1NF0sNzY6WzIsMTU0XSw4MTpbMiwxNTRdLDkwOlsyLDE1NF0sOTU6WzIsMTU0XSw5NzpbMiwxNTRdLDEwNjpbMiwxNTRdLDEwODpbMiwxNTRdLDEwOTpbMiwxNTRdLDExMDpbMiwxNTRdLDExNDpbMiwxNTRdLDEyMjpbMiwxNTRdLDEzMDpbMiwxNTRdLDEzMzpbMiwxNTRdLDEzNDpbMiwxNTRdLDEzOTpbMiwxNTRdLDE0MDpbMiwxNTRdLDE0MTpbMiwxNTRdLDE0MjpbMiwxNTRdLDE0MzpbMiwxNTRdLDE0NDpbMiwxNTRdLDE0NTpbMiwxNTRdfSx7MTpbMiwxNjJdLDY6WzIsMTYyXSwyODpbMiwxNjJdLDI5OlsyLDE2Ml0sNTI6WzIsMTYyXSw1NzpbMiwxNjJdLDYwOlsyLDE2Ml0sNzY6WzIsMTYyXSw4MTpbMiwxNjJdLDkwOlsyLDE2Ml0sOTU6WzIsMTYyXSw5NzpbMiwxNjJdLDEwNjpbMiwxNjJdLDEwODpbMiwxNjJdLDEwOTpbMiwxNjJdLDExMDpbMiwxNjJdLDExNDpbMiwxNjJdLDEyMjpbMiwxNjJdLDEzMDpbMiwxNjJdLDEzMzpbMiwxNjJdLDEzNDpbMiwxNjJdLDEzOTpbMiwxNjJdLDE0MDpbMiwxNjJdLDE0MTpbMiwxNjJdLDE0MjpbMiwxNjJdLDE0MzpbMiwxNjJdLDE0NDpbMiwxNjJdLDE0NTpbMiwxNjJdfSx7Mjg6WzEsMjMzXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTI0OjIzNCwxMjY6MjM1LDEyNzpbMSwyMzZdfSx7MTpbMiwxMDJdLDY6WzIsMTAyXSwyODpbMiwxMDJdLDI5OlsyLDEwMl0sNTI6WzIsMTAyXSw1NzpbMiwxMDJdLDYwOlsyLDEwMl0sNzY6WzIsMTAyXSw4MTpbMiwxMDJdLDkwOlsyLDEwMl0sOTU6WzIsMTAyXSw5NzpbMiwxMDJdLDEwNjpbMiwxMDJdLDEwODpbMiwxMDJdLDEwOTpbMiwxMDJdLDExMDpbMiwxMDJdLDExNDpbMiwxMDJdLDEyMjpbMiwxMDJdLDEzMDpbMiwxMDJdLDEzMzpbMiwxMDJdLDEzNDpbMiwxMDJdLDEzOTpbMiwxMDJdLDE0MDpbMiwxMDJdLDE0MTpbMiwxMDJdLDE0MjpbMiwxMDJdLDE0MzpbMiwxMDJdLDE0NDpbMiwxMDJdLDE0NTpbMiwxMDJdfSx7NzoyMzcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMDVdLDY6WzIsMTA1XSwxNDoyMzgsMjg6WzEsMTIwXSwyOTpbMiwxMDVdLDUyOlsyLDEwNV0sNTc6WzIsMTA1XSw2MDpbMiwxMDVdLDY5OlsyLDc2XSw3MDpbMiw3Nl0sNzE6WzIsNzZdLDcyOlsyLDc2XSw3NDpbMiw3Nl0sNzY6WzIsMTA1XSw3NzpbMiw3Nl0sODE6WzIsMTA1XSw4MzpbMSwyMzldLDg4OlsyLDc2XSw4OTpbMiw3Nl0sOTA6WzIsMTA1XSw5NTpbMiwxMDVdLDk3OlsyLDEwNV0sMTA2OlsyLDEwNV0sMTA4OlsyLDEwNV0sMTA5OlsyLDEwNV0sMTEwOlsyLDEwNV0sMTE0OlsyLDEwNV0sMTIyOlsyLDEwNV0sMTMwOlsyLDEwNV0sMTMzOlsyLDEwNV0sMTM0OlsyLDEwNV0sMTM5OlsyLDEwNV0sMTQwOlsyLDEwNV0sMTQxOlsyLDEwNV0sMTQyOlsyLDEwNV0sMTQzOlsyLDEwNV0sMTQ0OlsyLDEwNV0sMTQ1OlsyLDEwNV19LHsxOlsyLDE0N10sNjpbMiwxNDddLDI4OlsyLDE0N10sMjk6WzIsMTQ3XSw1MjpbMiwxNDddLDU3OlsyLDE0N10sNjA6WzIsMTQ3XSw3NjpbMiwxNDddLDgxOlsyLDE0N10sOTA6WzIsMTQ3XSw5NTpbMiwxNDddLDk3OlsyLDE0N10sMTA2OlsyLDE0N10sMTA3Ojg5LDEwODpbMiwxNDddLDEwOTpbMiwxNDddLDExMDpbMiwxNDddLDExMzo5MCwxMTQ6WzIsMTQ3XSwxMTU6NzMsMTIyOlsyLDE0N10sMTMwOlsyLDE0N10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDExM10sNjpbMiwxMTNdLDI4OlsyLDExM10sMjk6WzIsMTEzXSw0MzpbMiwxMTNdLDUyOlsyLDExM10sNTc6WzIsMTEzXSw2MDpbMiwxMTNdLDY5OlsyLDExM10sNzA6WzIsMTEzXSw3MTpbMiwxMTNdLDcyOlsyLDExM10sNzQ6WzIsMTEzXSw3NjpbMiwxMTNdLDc3OlsyLDExM10sODE6WzIsMTEzXSw4MzpbMiwxMTNdLDg4OlsyLDExM10sODk6WzIsMTEzXSw5MDpbMiwxMTNdLDk1OlsyLDExM10sOTc6WzIsMTEzXSwxMDY6WzIsMTEzXSwxMDg6WzIsMTEzXSwxMDk6WzIsMTEzXSwxMTA6WzIsMTEzXSwxMTQ6WzIsMTEzXSwxMjI6WzIsMTEzXSwxMzA6WzIsMTEzXSwxMzM6WzIsMTEzXSwxMzQ6WzIsMTEzXSwxMzc6WzIsMTEzXSwxMzg6WzIsMTEzXSwxMzk6WzIsMTEzXSwxNDA6WzIsMTEzXSwxNDE6WzIsMTEzXSwxNDI6WzIsMTEzXSwxNDM6WzIsMTEzXSwxNDQ6WzIsMTEzXSwxNDU6WzIsMTEzXSwxNDY6WzIsMTEzXX0sezE6WzIsNDldLDY6WzIsNDldLDI4OlsyLDQ5XSwyOTpbMiw0OV0sNTI6WzIsNDldLDU3OlsyLDQ5XSw2MDpbMiw0OV0sNzY6WzIsNDldLDgxOlsyLDQ5XSw5MDpbMiw0OV0sOTU6WzIsNDldLDk3OlsyLDQ5XSwxMDY6WzIsNDldLDEwNzo4OSwxMDg6WzIsNDldLDEwOTpbMiw0OV0sMTEwOlsyLDQ5XSwxMTM6OTAsMTE0OlsyLDQ5XSwxMTU6NzMsMTIyOlsyLDQ5XSwxMzA6WzIsNDldLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMl0sNjpbMiwxMl0sMjg6WzIsMTJdLDI5OlsyLDEyXSw1MjpbMiwxMl0sNTc6WzIsMTJdLDYwOlsyLDEyXSw3NjpbMiwxMl0sODE6WzIsMTJdLDkwOlsyLDEyXSw5NTpbMiwxMl0sOTc6WzIsMTJdLDEwNjpbMiwxMl0sMTA4OlsyLDEyXSwxMDk6WzIsMTJdLDExMDpbMiwxMl0sMTE0OlsyLDEyXSwxMjI6WzIsMTJdLDEzMDpbMiwxMl0sMTMzOlsyLDEyXSwxMzQ6WzIsMTJdLDEzOTpbMiwxMl0sMTQwOlsyLDEyXSwxNDE6WzIsMTJdLDE0MjpbMiwxMl0sMTQzOlsyLDEyXSwxNDQ6WzIsMTJdLDE0NTpbMiwxMl19LHsxOlsyLDEzXSw2OlsyLDEzXSwyODpbMiwxM10sMjk6WzIsMTNdLDUyOlsyLDEzXSw1NzpbMiwxM10sNjA6WzIsMTNdLDc2OlsyLDEzXSw4MTpbMiwxM10sOTA6WzIsMTNdLDk1OlsyLDEzXSw5NzpbMiwxM10sMTA2OlsyLDEzXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTNdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxM10sMTMwOlsyLDEzXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzEsNzhdLDEwNjpbMSwyNDBdfSx7NDoyNDEsNTozLDc6NCw4OjUsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiwxMzVdLDI4OlsyLDEzNV0sNTc6WzIsMTM1XSw2MDpbMSwyNDNdLDk1OlsyLDEzNV0sOTY6MjQyLDk3OlsxLDIwNl0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTIxXSw2OlsyLDEyMV0sMjg6WzIsMTIxXSwyOTpbMiwxMjFdLDQzOlsyLDEyMV0sNTI6WzIsMTIxXSw1NzpbMiwxMjFdLDYwOlsyLDEyMV0sNjk6WzIsMTIxXSw3MDpbMiwxMjFdLDcxOlsyLDEyMV0sNzI6WzIsMTIxXSw3NDpbMiwxMjFdLDc2OlsyLDEyMV0sNzc6WzIsMTIxXSw4MTpbMiwxMjFdLDg4OlsyLDEyMV0sODk6WzIsMTIxXSw5MDpbMiwxMjFdLDk1OlsyLDEyMV0sOTc6WzIsMTIxXSwxMDY6WzIsMTIxXSwxMDg6WzIsMTIxXSwxMDk6WzIsMTIxXSwxMTA6WzIsMTIxXSwxMTQ6WzIsMTIxXSwxMjA6WzIsMTIxXSwxMjE6WzIsMTIxXSwxMjI6WzIsMTIxXSwxMzA6WzIsMTIxXSwxMzM6WzIsMTIxXSwxMzQ6WzIsMTIxXSwxMzk6WzIsMTIxXSwxNDA6WzIsMTIxXSwxNDE6WzIsMTIxXSwxNDI6WzIsMTIxXSwxNDM6WzIsMTIxXSwxNDQ6WzIsMTIxXSwxNDU6WzIsMTIxXX0sezY6WzIsNTZdLDI4OlsyLDU2XSw1NjoyNDQsNTc6WzEsMjQ1XSw5NTpbMiw1Nl19LHs2OlsyLDEzMF0sMjg6WzIsMTMwXSwyOTpbMiwxMzBdLDU3OlsyLDEzMF0sOTA6WzIsMTMwXSw5NTpbMiwxMzBdfSx7NzoyMTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTU4XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MToyNDYsOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTg6MTU3LDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsMTM2XSwyODpbMiwxMzZdLDI5OlsyLDEzNl0sNTc6WzIsMTM2XSw5MDpbMiwxMzZdLDk1OlsyLDEzNl19LHs2OlsyLDEzN10sMjg6WzIsMTM3XSwyOTpbMiwxMzddLDU3OlsyLDEzN10sOTA6WzIsMTM3XSw5NTpbMiwxMzddfSx7MTpbMiwxMjBdLDY6WzIsMTIwXSwyODpbMiwxMjBdLDI5OlsyLDEyMF0sNDM6WzIsMTIwXSw0NjpbMiwxMjBdLDUyOlsyLDEyMF0sNTc6WzIsMTIwXSw2MDpbMiwxMjBdLDY5OlsyLDEyMF0sNzA6WzIsMTIwXSw3MTpbMiwxMjBdLDcyOlsyLDEyMF0sNzQ6WzIsMTIwXSw3NjpbMiwxMjBdLDc3OlsyLDEyMF0sODE6WzIsMTIwXSw4MzpbMiwxMjBdLDg4OlsyLDEyMF0sODk6WzIsMTIwXSw5MDpbMiwxMjBdLDk1OlsyLDEyMF0sOTc6WzIsMTIwXSwxMDY6WzIsMTIwXSwxMDg6WzIsMTIwXSwxMDk6WzIsMTIwXSwxMTA6WzIsMTIwXSwxMTQ6WzIsMTIwXSwxMjA6WzIsMTIwXSwxMjE6WzIsMTIwXSwxMjI6WzIsMTIwXSwxMzA6WzIsMTIwXSwxMzM6WzIsMTIwXSwxMzQ6WzIsMTIwXSwxMzc6WzIsMTIwXSwxMzg6WzIsMTIwXSwxMzk6WzIsMTIwXSwxNDA6WzIsMTIwXSwxNDE6WzIsMTIwXSwxNDI6WzIsMTIwXSwxNDM6WzIsMTIwXSwxNDQ6WzIsMTIwXSwxNDU6WzIsMTIwXSwxNDY6WzIsMTIwXX0sezE0OjI0NywyODpbMSwxMjBdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE1MF0sNjpbMiwxNTBdLDI4OlsyLDE1MF0sMjk6WzIsMTUwXSw1MjpbMiwxNTBdLDU3OlsyLDE1MF0sNjA6WzIsMTUwXSw3NjpbMiwxNTBdLDgxOlsyLDE1MF0sOTA6WzIsMTUwXSw5NTpbMiwxNTBdLDk3OlsyLDE1MF0sMTA2OlsyLDE1MF0sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsxLDI0OF0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE1MF0sMTMwOlsyLDE1MF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE1Ml0sNjpbMiwxNTJdLDI4OlsyLDE1Ml0sMjk6WzIsMTUyXSw1MjpbMiwxNTJdLDU3OlsyLDE1Ml0sNjA6WzIsMTUyXSw3NjpbMiwxNTJdLDgxOlsyLDE1Ml0sOTA6WzIsMTUyXSw5NTpbMiwxNTJdLDk3OlsyLDE1Ml0sMTA2OlsyLDE1Ml0sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsxLDI0OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE1Ml0sMTMwOlsyLDE1Ml0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE1OF0sNjpbMiwxNThdLDI4OlsyLDE1OF0sMjk6WzIsMTU4XSw1MjpbMiwxNThdLDU3OlsyLDE1OF0sNjA6WzIsMTU4XSw3NjpbMiwxNThdLDgxOlsyLDE1OF0sOTA6WzIsMTU4XSw5NTpbMiwxNThdLDk3OlsyLDE1OF0sMTA2OlsyLDE1OF0sMTA4OlsyLDE1OF0sMTA5OlsyLDE1OF0sMTEwOlsyLDE1OF0sMTE0OlsyLDE1OF0sMTIyOlsyLDE1OF0sMTMwOlsyLDE1OF0sMTMzOlsyLDE1OF0sMTM0OlsyLDE1OF0sMTM5OlsyLDE1OF0sMTQwOlsyLDE1OF0sMTQxOlsyLDE1OF0sMTQyOlsyLDE1OF0sMTQzOlsyLDE1OF0sMTQ0OlsyLDE1OF0sMTQ1OlsyLDE1OF19LHsxOlsyLDE1OV0sNjpbMiwxNTldLDI4OlsyLDE1OV0sMjk6WzIsMTU5XSw1MjpbMiwxNTldLDU3OlsyLDE1OV0sNjA6WzIsMTU5XSw3NjpbMiwxNTldLDgxOlsyLDE1OV0sOTA6WzIsMTU5XSw5NTpbMiwxNTldLDk3OlsyLDE1OV0sMTA2OlsyLDE1OV0sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDE1OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE1OV0sMTMwOlsyLDE1OV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE2M10sNjpbMiwxNjNdLDI4OlsyLDE2M10sMjk6WzIsMTYzXSw1MjpbMiwxNjNdLDU3OlsyLDE2M10sNjA6WzIsMTYzXSw3NjpbMiwxNjNdLDgxOlsyLDE2M10sOTA6WzIsMTYzXSw5NTpbMiwxNjNdLDk3OlsyLDE2M10sMTA2OlsyLDE2M10sMTA4OlsyLDE2M10sMTA5OlsyLDE2M10sMTEwOlsyLDE2M10sMTE0OlsyLDE2M10sMTIyOlsyLDE2M10sMTMwOlsyLDE2M10sMTMzOlsyLDE2M10sMTM0OlsyLDE2M10sMTM5OlsyLDE2M10sMTQwOlsyLDE2M10sMTQxOlsyLDE2M10sMTQyOlsyLDE2M10sMTQzOlsyLDE2M10sMTQ0OlsyLDE2M10sMTQ1OlsyLDE2M119LHsxMjA6WzIsMTY1XSwxMjE6WzIsMTY1XX0sezMwOjE3MSwzMTpbMSw3N10sNDc6MTcyLDYxOjE3Myw2MjoxNzQsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsMTE4XSwxMTc6MjUwLDExOToxNzB9LHs1NzpbMSwyNTFdLDEyMDpbMiwxNzFdLDEyMTpbMiwxNzFdfSx7NTc6WzIsMTY3XSwxMjA6WzIsMTY3XSwxMjE6WzIsMTY3XX0sezU3OlsyLDE2OF0sMTIwOlsyLDE2OF0sMTIxOlsyLDE2OF19LHs1NzpbMiwxNjldLDEyMDpbMiwxNjldLDEyMTpbMiwxNjldfSx7NTc6WzIsMTcwXSwxMjA6WzIsMTcwXSwxMjE6WzIsMTcwXX0sezE6WzIsMTY0XSw2OlsyLDE2NF0sMjg6WzIsMTY0XSwyOTpbMiwxNjRdLDUyOlsyLDE2NF0sNTc6WzIsMTY0XSw2MDpbMiwxNjRdLDc2OlsyLDE2NF0sODE6WzIsMTY0XSw5MDpbMiwxNjRdLDk1OlsyLDE2NF0sOTc6WzIsMTY0XSwxMDY6WzIsMTY0XSwxMDg6WzIsMTY0XSwxMDk6WzIsMTY0XSwxMTA6WzIsMTY0XSwxMTQ6WzIsMTY0XSwxMjI6WzIsMTY0XSwxMzA6WzIsMTY0XSwxMzM6WzIsMTY0XSwxMzQ6WzIsMTY0XSwxMzk6WzIsMTY0XSwxNDA6WzIsMTY0XSwxNDE6WzIsMTY0XSwxNDI6WzIsMTY0XSwxNDM6WzIsMTY0XSwxNDQ6WzIsMTY0XSwxNDU6WzIsMTY0XX0sezc6MjUyLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MjUzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsNTZdLDI4OlsyLDU2XSw1NjoyNTQsNTc6WzEsMjU1XSw4MTpbMiw1Nl19LHs2OlsyLDk3XSwyODpbMiw5N10sMjk6WzIsOTddLDU3OlsyLDk3XSw4MTpbMiw5N119LHs2OlsyLDQyXSwyODpbMiw0Ml0sMjk6WzIsNDJdLDQ2OlsxLDI1Nl0sNTc6WzIsNDJdLDgxOlsyLDQyXX0sezY6WzIsNDVdLDI4OlsyLDQ1XSwyOTpbMiw0NV0sNTc6WzIsNDVdLDgxOlsyLDQ1XX0sezY6WzIsNDZdLDI4OlsyLDQ2XSwyOTpbMiw0Nl0sNDY6WzIsNDZdLDU3OlsyLDQ2XSw4MTpbMiw0Nl19LHs2OlsyLDQ3XSwyODpbMiw0N10sMjk6WzIsNDddLDQ2OlsyLDQ3XSw1NzpbMiw0N10sODE6WzIsNDddfSx7NjpbMiw0OF0sMjg6WzIsNDhdLDI5OlsyLDQ4XSw0NjpbMiw0OF0sNTc6WzIsNDhdLDgxOlsyLDQ4XX0sezE6WzIsNF0sNjpbMiw0XSwyOTpbMiw0XSwxMDY6WzIsNF19LHsxOlsyLDIwNl0sNjpbMiwyMDZdLDI4OlsyLDIwNl0sMjk6WzIsMjA2XSw1MjpbMiwyMDZdLDU3OlsyLDIwNl0sNjA6WzIsMjA2XSw3NjpbMiwyMDZdLDgxOlsyLDIwNl0sOTA6WzIsMjA2XSw5NTpbMiwyMDZdLDk3OlsyLDIwNl0sMTA2OlsyLDIwNl0sMTA3Ojg5LDEwODpbMiwyMDZdLDEwOTpbMiwyMDZdLDExMDpbMiwyMDZdLDExMzo5MCwxMTQ6WzIsMjA2XSwxMTU6NzMsMTIyOlsyLDIwNl0sMTMwOlsyLDIwNl0sMTMzOlsyLDIwNl0sMTM0OlsyLDIwNl0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsyLDIwNl0sMTQzOlsyLDIwNl0sMTQ0OlsyLDIwNl0sMTQ1OlsyLDIwNl19LHsxOlsyLDIwN10sNjpbMiwyMDddLDI4OlsyLDIwN10sMjk6WzIsMjA3XSw1MjpbMiwyMDddLDU3OlsyLDIwN10sNjA6WzIsMjA3XSw3NjpbMiwyMDddLDgxOlsyLDIwN10sOTA6WzIsMjA3XSw5NTpbMiwyMDddLDk3OlsyLDIwN10sMTA2OlsyLDIwN10sMTA3Ojg5LDEwODpbMiwyMDddLDEwOTpbMiwyMDddLDExMDpbMiwyMDddLDExMzo5MCwxMTQ6WzIsMjA3XSwxMTU6NzMsMTIyOlsyLDIwN10sMTMwOlsyLDIwN10sMTMzOlsyLDIwN10sMTM0OlsyLDIwN10sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsyLDIwN10sMTQzOlsyLDIwN10sMTQ0OlsyLDIwN10sMTQ1OlsyLDIwN119LHsxOlsyLDIwOF0sNjpbMiwyMDhdLDI4OlsyLDIwOF0sMjk6WzIsMjA4XSw1MjpbMiwyMDhdLDU3OlsyLDIwOF0sNjA6WzIsMjA4XSw3NjpbMiwyMDhdLDgxOlsyLDIwOF0sOTA6WzIsMjA4XSw5NTpbMiwyMDhdLDk3OlsyLDIwOF0sMTA2OlsyLDIwOF0sMTA3Ojg5LDEwODpbMiwyMDhdLDEwOTpbMiwyMDhdLDExMDpbMiwyMDhdLDExMzo5MCwxMTQ6WzIsMjA4XSwxMTU6NzMsMTIyOlsyLDIwOF0sMTMwOlsyLDIwOF0sMTMzOlsyLDIwOF0sMTM0OlsyLDIwOF0sMTM5OlsxLDc5XSwxNDA6WzIsMjA4XSwxNDE6WzEsODNdLDE0MjpbMiwyMDhdLDE0MzpbMiwyMDhdLDE0NDpbMiwyMDhdLDE0NTpbMiwyMDhdfSx7MTpbMiwyMDldLDY6WzIsMjA5XSwyODpbMiwyMDldLDI5OlsyLDIwOV0sNTI6WzIsMjA5XSw1NzpbMiwyMDldLDYwOlsyLDIwOV0sNzY6WzIsMjA5XSw4MTpbMiwyMDldLDkwOlsyLDIwOV0sOTU6WzIsMjA5XSw5NzpbMiwyMDldLDEwNjpbMiwyMDldLDEwNzo4OSwxMDg6WzIsMjA5XSwxMDk6WzIsMjA5XSwxMTA6WzIsMjA5XSwxMTM6OTAsMTE0OlsyLDIwOV0sMTE1OjczLDEyMjpbMiwyMDldLDEzMDpbMiwyMDldLDEzMzpbMiwyMDldLDEzNDpbMiwyMDldLDEzOTpbMSw3OV0sMTQwOlsyLDIwOV0sMTQxOlsxLDgzXSwxNDI6WzIsMjA5XSwxNDM6WzIsMjA5XSwxNDQ6WzIsMjA5XSwxNDU6WzIsMjA5XX0sezE6WzIsMjEwXSw2OlsyLDIxMF0sMjg6WzIsMjEwXSwyOTpbMiwyMTBdLDUyOlsyLDIxMF0sNTc6WzIsMjEwXSw2MDpbMiwyMTBdLDc2OlsyLDIxMF0sODE6WzIsMjEwXSw5MDpbMiwyMTBdLDk1OlsyLDIxMF0sOTc6WzIsMjEwXSwxMDY6WzIsMjEwXSwxMDc6ODksMTA4OlsyLDIxMF0sMTA5OlsyLDIxMF0sMTEwOlsyLDIxMF0sMTEzOjkwLDExNDpbMiwyMTBdLDExNTo3MywxMjI6WzIsMjEwXSwxMzA6WzIsMjEwXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsyLDIxMF0sMTQzOlsyLDIxMF0sMTQ0OlsyLDIxMF0sMTQ1OlsyLDIxMF19LHsxOlsyLDIxMV0sNjpbMiwyMTFdLDI4OlsyLDIxMV0sMjk6WzIsMjExXSw1MjpbMiwyMTFdLDU3OlsyLDIxMV0sNjA6WzIsMjExXSw3NjpbMiwyMTFdLDgxOlsyLDIxMV0sOTA6WzIsMjExXSw5NTpbMiwyMTFdLDk3OlsyLDIxMV0sMTA2OlsyLDIxMV0sMTA3Ojg5LDEwODpbMiwyMTFdLDEwOTpbMiwyMTFdLDExMDpbMiwyMTFdLDExMzo5MCwxMTQ6WzIsMjExXSwxMTU6NzMsMTIyOlsyLDIxMV0sMTMwOlsyLDIxMV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsyLDIxMV0sMTQ0OlsyLDIxMV0sMTQ1OlsxLDg3XX0sezE6WzIsMjEyXSw2OlsyLDIxMl0sMjg6WzIsMjEyXSwyOTpbMiwyMTJdLDUyOlsyLDIxMl0sNTc6WzIsMjEyXSw2MDpbMiwyMTJdLDc2OlsyLDIxMl0sODE6WzIsMjEyXSw5MDpbMiwyMTJdLDk1OlsyLDIxMl0sOTc6WzIsMjEyXSwxMDY6WzIsMjEyXSwxMDc6ODksMTA4OlsyLDIxMl0sMTA5OlsyLDIxMl0sMTEwOlsyLDIxMl0sMTEzOjkwLDExNDpbMiwyMTJdLDExNTo3MywxMjI6WzIsMjEyXSwxMzA6WzIsMjEyXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMiwyMTJdLDE0NTpbMSw4N119LHsxOlsyLDIxM10sNjpbMiwyMTNdLDI4OlsyLDIxM10sMjk6WzIsMjEzXSw1MjpbMiwyMTNdLDU3OlsyLDIxM10sNjA6WzIsMjEzXSw3NjpbMiwyMTNdLDgxOlsyLDIxM10sOTA6WzIsMjEzXSw5NTpbMiwyMTNdLDk3OlsyLDIxM10sMTA2OlsyLDIxM10sMTA3Ojg5LDEwODpbMiwyMTNdLDEwOTpbMiwyMTNdLDExMDpbMiwyMTNdLDExMzo5MCwxMTQ6WzIsMjEzXSwxMTU6NzMsMTIyOlsyLDIxM10sMTMwOlsyLDIxM10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsyLDIxM10sMTQ0OlsyLDIxM10sMTQ1OlsyLDIxM119LHsxOlsyLDE5M10sNjpbMiwxOTNdLDI4OlsyLDE5M10sMjk6WzIsMTkzXSw1MjpbMiwxOTNdLDU3OlsyLDE5M10sNjA6WzIsMTkzXSw3NjpbMiwxOTNdLDgxOlsyLDE5M10sOTA6WzIsMTkzXSw5NTpbMiwxOTNdLDk3OlsyLDE5M10sMTA2OlsyLDE5M10sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDE5M10sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE5M10sMTMwOlsyLDE5M10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE5Ml0sNjpbMiwxOTJdLDI4OlsyLDE5Ml0sMjk6WzIsMTkyXSw1MjpbMiwxOTJdLDU3OlsyLDE5Ml0sNjA6WzIsMTkyXSw3NjpbMiwxOTJdLDgxOlsyLDE5Ml0sOTA6WzIsMTkyXSw5NTpbMiwxOTJdLDk3OlsyLDE5Ml0sMTA2OlsyLDE5Ml0sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDE5Ml0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE5Ml0sMTMwOlsyLDE5Ml0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDEwOV0sNjpbMiwxMDldLDI4OlsyLDEwOV0sMjk6WzIsMTA5XSw1MjpbMiwxMDldLDU3OlsyLDEwOV0sNjA6WzIsMTA5XSw2OTpbMiwxMDldLDcwOlsyLDEwOV0sNzE6WzIsMTA5XSw3MjpbMiwxMDldLDc0OlsyLDEwOV0sNzY6WzIsMTA5XSw3NzpbMiwxMDldLDgxOlsyLDEwOV0sODg6WzIsMTA5XSw4OTpbMiwxMDldLDkwOlsyLDEwOV0sOTU6WzIsMTA5XSw5NzpbMiwxMDldLDEwNjpbMiwxMDldLDEwODpbMiwxMDldLDEwOTpbMiwxMDldLDExMDpbMiwxMDldLDExNDpbMiwxMDldLDEyMjpbMiwxMDldLDEzMDpbMiwxMDldLDEzMzpbMiwxMDldLDEzNDpbMiwxMDldLDEzOTpbMiwxMDldLDE0MDpbMiwxMDldLDE0MTpbMiwxMDldLDE0MjpbMiwxMDldLDE0MzpbMiwxMDldLDE0NDpbMiwxMDldLDE0NTpbMiwxMDldfSx7MTpbMiw4NF0sNjpbMiw4NF0sMjg6WzIsODRdLDI5OlsyLDg0XSw0MzpbMiw4NF0sNTI6WzIsODRdLDU3OlsyLDg0XSw2MDpbMiw4NF0sNjk6WzIsODRdLDcwOlsyLDg0XSw3MTpbMiw4NF0sNzI6WzIsODRdLDc0OlsyLDg0XSw3NjpbMiw4NF0sNzc6WzIsODRdLDgxOlsyLDg0XSw4MzpbMiw4NF0sODg6WzIsODRdLDg5OlsyLDg0XSw5MDpbMiw4NF0sOTU6WzIsODRdLDk3OlsyLDg0XSwxMDY6WzIsODRdLDEwODpbMiw4NF0sMTA5OlsyLDg0XSwxMTA6WzIsODRdLDExNDpbMiw4NF0sMTIyOlsyLDg0XSwxMzA6WzIsODRdLDEzMzpbMiw4NF0sMTM0OlsyLDg0XSwxMzc6WzIsODRdLDEzODpbMiw4NF0sMTM5OlsyLDg0XSwxNDA6WzIsODRdLDE0MTpbMiw4NF0sMTQyOlsyLDg0XSwxNDM6WzIsODRdLDE0NDpbMiw4NF0sMTQ1OlsyLDg0XSwxNDY6WzIsODRdfSx7MTpbMiw4NV0sNjpbMiw4NV0sMjg6WzIsODVdLDI5OlsyLDg1XSw0MzpbMiw4NV0sNTI6WzIsODVdLDU3OlsyLDg1XSw2MDpbMiw4NV0sNjk6WzIsODVdLDcwOlsyLDg1XSw3MTpbMiw4NV0sNzI6WzIsODVdLDc0OlsyLDg1XSw3NjpbMiw4NV0sNzc6WzIsODVdLDgxOlsyLDg1XSw4MzpbMiw4NV0sODg6WzIsODVdLDg5OlsyLDg1XSw5MDpbMiw4NV0sOTU6WzIsODVdLDk3OlsyLDg1XSwxMDY6WzIsODVdLDEwODpbMiw4NV0sMTA5OlsyLDg1XSwxMTA6WzIsODVdLDExNDpbMiw4NV0sMTIyOlsyLDg1XSwxMzA6WzIsODVdLDEzMzpbMiw4NV0sMTM0OlsyLDg1XSwxMzc6WzIsODVdLDEzODpbMiw4NV0sMTM5OlsyLDg1XSwxNDA6WzIsODVdLDE0MTpbMiw4NV0sMTQyOlsyLDg1XSwxNDM6WzIsODVdLDE0NDpbMiw4NV0sMTQ1OlsyLDg1XSwxNDY6WzIsODVdfSx7MTpbMiw4Nl0sNjpbMiw4Nl0sMjg6WzIsODZdLDI5OlsyLDg2XSw0MzpbMiw4Nl0sNTI6WzIsODZdLDU3OlsyLDg2XSw2MDpbMiw4Nl0sNjk6WzIsODZdLDcwOlsyLDg2XSw3MTpbMiw4Nl0sNzI6WzIsODZdLDc0OlsyLDg2XSw3NjpbMiw4Nl0sNzc6WzIsODZdLDgxOlsyLDg2XSw4MzpbMiw4Nl0sODg6WzIsODZdLDg5OlsyLDg2XSw5MDpbMiw4Nl0sOTU6WzIsODZdLDk3OlsyLDg2XSwxMDY6WzIsODZdLDEwODpbMiw4Nl0sMTA5OlsyLDg2XSwxMTA6WzIsODZdLDExNDpbMiw4Nl0sMTIyOlsyLDg2XSwxMzA6WzIsODZdLDEzMzpbMiw4Nl0sMTM0OlsyLDg2XSwxMzc6WzIsODZdLDEzODpbMiw4Nl0sMTM5OlsyLDg2XSwxNDA6WzIsODZdLDE0MTpbMiw4Nl0sMTQyOlsyLDg2XSwxNDM6WzIsODZdLDE0NDpbMiw4Nl0sMTQ1OlsyLDg2XSwxNDY6WzIsODZdfSx7MTpbMiw4N10sNjpbMiw4N10sMjg6WzIsODddLDI5OlsyLDg3XSw0MzpbMiw4N10sNTI6WzIsODddLDU3OlsyLDg3XSw2MDpbMiw4N10sNjk6WzIsODddLDcwOlsyLDg3XSw3MTpbMiw4N10sNzI6WzIsODddLDc0OlsyLDg3XSw3NjpbMiw4N10sNzc6WzIsODddLDgxOlsyLDg3XSw4MzpbMiw4N10sODg6WzIsODddLDg5OlsyLDg3XSw5MDpbMiw4N10sOTU6WzIsODddLDk3OlsyLDg3XSwxMDY6WzIsODddLDEwODpbMiw4N10sMTA5OlsyLDg3XSwxMTA6WzIsODddLDExNDpbMiw4N10sMTIyOlsyLDg3XSwxMzA6WzIsODddLDEzMzpbMiw4N10sMTM0OlsyLDg3XSwxMzc6WzIsODddLDEzODpbMiw4N10sMTM5OlsyLDg3XSwxNDA6WzIsODddLDE0MTpbMiw4N10sMTQyOlsyLDg3XSwxNDM6WzIsODddLDE0NDpbMiw4N10sMTQ1OlsyLDg3XSwxNDY6WzIsODddfSx7MTpbMiw4OF0sNjpbMiw4OF0sMjg6WzIsODhdLDI5OlsyLDg4XSw0MzpbMiw4OF0sNTI6WzIsODhdLDU3OlsyLDg4XSw2MDpbMiw4OF0sNjk6WzIsODhdLDcwOlsyLDg4XSw3MTpbMiw4OF0sNzI6WzIsODhdLDc0OlsyLDg4XSw3NjpbMiw4OF0sNzc6WzIsODhdLDgxOlsyLDg4XSw4MzpbMiw4OF0sODg6WzIsODhdLDg5OlsyLDg4XSw5MDpbMiw4OF0sOTU6WzIsODhdLDk3OlsyLDg4XSwxMDY6WzIsODhdLDEwODpbMiw4OF0sMTA5OlsyLDg4XSwxMTA6WzIsODhdLDExNDpbMiw4OF0sMTIyOlsyLDg4XSwxMzA6WzIsODhdLDEzMzpbMiw4OF0sMTM0OlsyLDg4XSwxMzc6WzIsODhdLDEzODpbMiw4OF0sMTM5OlsyLDg4XSwxNDA6WzIsODhdLDE0MTpbMiw4OF0sMTQyOlsyLDg4XSwxNDM6WzIsODhdLDE0NDpbMiw4OF0sMTQ1OlsyLDg4XSwxNDY6WzIsODhdfSx7NzY6WzEsMjU3XX0sezYwOlsxLDIwN10sNzY6WzIsOTNdLDk2OjI1OCw5NzpbMSwyMDZdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs3NjpbMiw5NF19LHs3OjI1OSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc2OlsyLDEyOV0sNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezExOlsyLDEyM10sMTM6WzIsMTIzXSwzMTpbMiwxMjNdLDMzOlsyLDEyM10sMzQ6WzIsMTIzXSwzNjpbMiwxMjNdLDM3OlsyLDEyM10sMzg6WzIsMTIzXSwzOTpbMiwxMjNdLDQwOlsyLDEyM10sNDE6WzIsMTIzXSw0ODpbMiwxMjNdLDQ5OlsyLDEyM10sNTA6WzIsMTIzXSw1NDpbMiwxMjNdLDU1OlsyLDEyM10sNzY6WzIsMTIzXSw3OTpbMiwxMjNdLDgyOlsyLDEyM10sODY6WzIsMTIzXSw4NzpbMiwxMjNdLDkyOlsyLDEyM10sOTM6WzIsMTIzXSw5NDpbMiwxMjNdLDEwMDpbMiwxMjNdLDEwNDpbMiwxMjNdLDEwNTpbMiwxMjNdLDEwODpbMiwxMjNdLDExMDpbMiwxMjNdLDExMjpbMiwxMjNdLDExNDpbMiwxMjNdLDEyMzpbMiwxMjNdLDEyOTpbMiwxMjNdLDEzMTpbMiwxMjNdLDEzMjpbMiwxMjNdLDEzMzpbMiwxMjNdLDEzNDpbMiwxMjNdLDEzNTpbMiwxMjNdLDEzNzpbMiwxMjNdLDEzODpbMiwxMjNdfSx7MTE6WzIsMTI0XSwxMzpbMiwxMjRdLDMxOlsyLDEyNF0sMzM6WzIsMTI0XSwzNDpbMiwxMjRdLDM2OlsyLDEyNF0sMzc6WzIsMTI0XSwzODpbMiwxMjRdLDM5OlsyLDEyNF0sNDA6WzIsMTI0XSw0MTpbMiwxMjRdLDQ4OlsyLDEyNF0sNDk6WzIsMTI0XSw1MDpbMiwxMjRdLDU0OlsyLDEyNF0sNTU6WzIsMTI0XSw3NjpbMiwxMjRdLDc5OlsyLDEyNF0sODI6WzIsMTI0XSw4NjpbMiwxMjRdLDg3OlsyLDEyNF0sOTI6WzIsMTI0XSw5MzpbMiwxMjRdLDk0OlsyLDEyNF0sMTAwOlsyLDEyNF0sMTA0OlsyLDEyNF0sMTA1OlsyLDEyNF0sMTA4OlsyLDEyNF0sMTEwOlsyLDEyNF0sMTEyOlsyLDEyNF0sMTE0OlsyLDEyNF0sMTIzOlsyLDEyNF0sMTI5OlsyLDEyNF0sMTMxOlsyLDEyNF0sMTMyOlsyLDEyNF0sMTMzOlsyLDEyNF0sMTM0OlsyLDEyNF0sMTM1OlsyLDEyNF0sMTM3OlsyLDEyNF0sMTM4OlsyLDEyNF19LHsxOlsyLDkyXSw2OlsyLDkyXSwyODpbMiw5Ml0sMjk6WzIsOTJdLDQzOlsyLDkyXSw1MjpbMiw5Ml0sNTc6WzIsOTJdLDYwOlsyLDkyXSw2OTpbMiw5Ml0sNzA6WzIsOTJdLDcxOlsyLDkyXSw3MjpbMiw5Ml0sNzQ6WzIsOTJdLDc2OlsyLDkyXSw3NzpbMiw5Ml0sODE6WzIsOTJdLDgzOlsyLDkyXSw4ODpbMiw5Ml0sODk6WzIsOTJdLDkwOlsyLDkyXSw5NTpbMiw5Ml0sOTc6WzIsOTJdLDEwNjpbMiw5Ml0sMTA4OlsyLDkyXSwxMDk6WzIsOTJdLDExMDpbMiw5Ml0sMTE0OlsyLDkyXSwxMjI6WzIsOTJdLDEzMDpbMiw5Ml0sMTMzOlsyLDkyXSwxMzQ6WzIsOTJdLDEzNzpbMiw5Ml0sMTM4OlsyLDkyXSwxMzk6WzIsOTJdLDE0MDpbMiw5Ml0sMTQxOlsyLDkyXSwxNDI6WzIsOTJdLDE0MzpbMiw5Ml0sMTQ0OlsyLDkyXSwxNDU6WzIsOTJdLDE0NjpbMiw5Ml19LHsxOlsyLDExMF0sNjpbMiwxMTBdLDI4OlsyLDExMF0sMjk6WzIsMTEwXSw1MjpbMiwxMTBdLDU3OlsyLDExMF0sNjA6WzIsMTEwXSw2OTpbMiwxMTBdLDcwOlsyLDExMF0sNzE6WzIsMTEwXSw3MjpbMiwxMTBdLDc0OlsyLDExMF0sNzY6WzIsMTEwXSw3NzpbMiwxMTBdLDgxOlsyLDExMF0sODg6WzIsMTEwXSw4OTpbMiwxMTBdLDkwOlsyLDExMF0sOTU6WzIsMTEwXSw5NzpbMiwxMTBdLDEwNjpbMiwxMTBdLDEwODpbMiwxMTBdLDEwOTpbMiwxMTBdLDExMDpbMiwxMTBdLDExNDpbMiwxMTBdLDEyMjpbMiwxMTBdLDEzMDpbMiwxMTBdLDEzMzpbMiwxMTBdLDEzNDpbMiwxMTBdLDEzOTpbMiwxMTBdLDE0MDpbMiwxMTBdLDE0MTpbMiwxMTBdLDE0MjpbMiwxMTBdLDE0MzpbMiwxMTBdLDE0NDpbMiwxMTBdLDE0NTpbMiwxMTBdfSx7MTpbMiwzOV0sNjpbMiwzOV0sMjg6WzIsMzldLDI5OlsyLDM5XSw1MjpbMiwzOV0sNTc6WzIsMzldLDYwOlsyLDM5XSw3NjpbMiwzOV0sODE6WzIsMzldLDkwOlsyLDM5XSw5NTpbMiwzOV0sOTc6WzIsMzldLDEwNjpbMiwzOV0sMTA3Ojg5LDEwODpbMiwzOV0sMTA5OlsyLDM5XSwxMTA6WzIsMzldLDExMzo5MCwxMTQ6WzIsMzldLDExNTo3MywxMjI6WzIsMzldLDEzMDpbMiwzOV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs3OjI2MCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjI2MSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDExNl0sNjpbMiwxMTZdLDI4OlsyLDExNl0sMjk6WzIsMTE2XSw0MzpbMiwxMTZdLDUyOlsyLDExNl0sNTc6WzIsMTE2XSw2MDpbMiwxMTZdLDY5OlsyLDExNl0sNzA6WzIsMTE2XSw3MTpbMiwxMTZdLDcyOlsyLDExNl0sNzQ6WzIsMTE2XSw3NjpbMiwxMTZdLDc3OlsyLDExNl0sODE6WzIsMTE2XSw4MzpbMiwxMTZdLDg4OlsyLDExNl0sODk6WzIsMTE2XSw5MDpbMiwxMTZdLDk1OlsyLDExNl0sOTc6WzIsMTE2XSwxMDY6WzIsMTE2XSwxMDg6WzIsMTE2XSwxMDk6WzIsMTE2XSwxMTA6WzIsMTE2XSwxMTQ6WzIsMTE2XSwxMjI6WzIsMTE2XSwxMzA6WzIsMTE2XSwxMzM6WzIsMTE2XSwxMzQ6WzIsMTE2XSwxMzc6WzIsMTE2XSwxMzg6WzIsMTE2XSwxMzk6WzIsMTE2XSwxNDA6WzIsMTE2XSwxNDE6WzIsMTE2XSwxNDI6WzIsMTE2XSwxNDM6WzIsMTE2XSwxNDQ6WzIsMTE2XSwxNDU6WzIsMTE2XSwxNDY6WzIsMTE2XX0sezY6WzIsNTZdLDI4OlsyLDU2XSw1NjoyNjIsNTc6WzEsMjQ1XSw5MDpbMiw1Nl19LHs2OlsyLDEzNV0sMjg6WzIsMTM1XSwyOTpbMiwxMzVdLDU3OlsyLDEzNV0sNjA6WzEsMjYzXSw5MDpbMiwxMzVdLDk1OlsyLDEzNV0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezUzOjI2NCw1NDpbMSw2NF0sNTU6WzEsNjVdfSx7NjpbMiw1N10sMjg6WzIsNTddLDI5OlsyLDU3XSwzMDoxMTMsMzE6WzEsNzddLDQ3OjExNCw1ODoyNjUsNTk6MTExLDYwOlsxLDExMl0sNjE6MTE1LDYyOjExNiw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSwxMThdfSx7NjpbMSwyNjZdLDI4OlsxLDI2N119LHs2OlsyLDY0XSwyODpbMiw2NF0sMjk6WzIsNjRdLDUyOlsyLDY0XSw1NzpbMiw2NF19LHs3OjI2OCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDI3XSw2OlsyLDI3XSwyODpbMiwyN10sMjk6WzIsMjddLDUyOlsyLDI3XSw1NzpbMiwyN10sNjA6WzIsMjddLDc2OlsyLDI3XSw4MTpbMiwyN10sOTA6WzIsMjddLDk1OlsyLDI3XSw5NzpbMiwyN10sMTAyOlsyLDI3XSwxMDM6WzIsMjddLDEwNjpbMiwyN10sMTA4OlsyLDI3XSwxMDk6WzIsMjddLDExMDpbMiwyN10sMTE0OlsyLDI3XSwxMjI6WzIsMjddLDEyNTpbMiwyN10sMTI3OlsyLDI3XSwxMzA6WzIsMjddLDEzMzpbMiwyN10sMTM0OlsyLDI3XSwxMzk6WzIsMjddLDE0MDpbMiwyN10sMTQxOlsyLDI3XSwxNDI6WzIsMjddLDE0MzpbMiwyN10sMTQ0OlsyLDI3XSwxNDU6WzIsMjddfSx7NjpbMSw3OF0sMjk6WzEsMjY5XX0sezE6WzIsMjAwXSw2OlsyLDIwMF0sMjg6WzIsMjAwXSwyOTpbMiwyMDBdLDUyOlsyLDIwMF0sNTc6WzIsMjAwXSw2MDpbMiwyMDBdLDc2OlsyLDIwMF0sODE6WzIsMjAwXSw5MDpbMiwyMDBdLDk1OlsyLDIwMF0sOTc6WzIsMjAwXSwxMDY6WzIsMjAwXSwxMDc6ODksMTA4OlsyLDIwMF0sMTA5OlsyLDIwMF0sMTEwOlsyLDIwMF0sMTEzOjkwLDExNDpbMiwyMDBdLDExNTo3MywxMjI6WzIsMjAwXSwxMzA6WzIsMjAwXSwxMzM6WzIsMjAwXSwxMzQ6WzIsMjAwXSwxMzk6WzEsNzldLDE0MDpbMiwyMDBdLDE0MTpbMiwyMDBdLDE0MjpbMiwyMDBdLDE0MzpbMiwyMDBdLDE0NDpbMiwyMDBdLDE0NTpbMiwyMDBdfSx7MTpbMiwyMTRdLDY6WzIsMjE0XSwyODpbMiwyMTRdLDI5OlsyLDIxNF0sNTI6WzIsMjE0XSw1NzpbMiwyMTRdLDYwOlsyLDIxNF0sNzY6WzIsMjE0XSw4MTpbMiwyMTRdLDkwOlsyLDIxNF0sOTU6WzIsMjE0XSw5NzpbMiwyMTRdLDEwNjpbMiwyMTRdLDEwNzo4OSwxMDg6WzIsMjE0XSwxMDk6WzIsMjE0XSwxMTA6WzIsMjE0XSwxMTM6OTAsMTE0OlsyLDIxNF0sMTE1OjczLDEyMjpbMiwyMTRdLDEzMDpbMiwyMTRdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NzoyNzAsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoyNzEsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwyMTddLDY6WzIsMjE3XSwyODpbMiwyMTddLDI5OlsyLDIxN10sNTI6WzIsMjE3XSw1NzpbMiwyMTddLDYwOlsyLDIxN10sNzY6WzIsMjE3XSw4MTpbMiwyMTddLDkwOlsyLDIxN10sOTU6WzIsMjE3XSw5NzpbMiwyMTddLDEwNjpbMiwyMTddLDEwNzo4OSwxMDg6WzIsMjE3XSwxMDk6WzIsMjE3XSwxMTA6WzIsMjE3XSwxMTM6OTAsMTE0OlsyLDIxN10sMTE1OjczLDEyMjpbMiwyMTddLDEzMDpbMiwyMTddLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxOTFdLDY6WzIsMTkxXSwyODpbMiwxOTFdLDI5OlsyLDE5MV0sNTI6WzIsMTkxXSw1NzpbMiwxOTFdLDYwOlsyLDE5MV0sNzY6WzIsMTkxXSw4MTpbMiwxOTFdLDkwOlsyLDE5MV0sOTU6WzIsMTkxXSw5NzpbMiwxOTFdLDEwNjpbMiwxOTFdLDEwODpbMiwxOTFdLDEwOTpbMiwxOTFdLDExMDpbMiwxOTFdLDExNDpbMiwxOTFdLDEyMjpbMiwxOTFdLDEzMDpbMiwxOTFdLDEzMzpbMiwxOTFdLDEzNDpbMiwxOTFdLDEzOTpbMiwxOTFdLDE0MDpbMiwxOTFdLDE0MTpbMiwxOTFdLDE0MjpbMiwxOTFdLDE0MzpbMiwxOTFdLDE0NDpbMiwxOTFdLDE0NTpbMiwxOTFdfSx7NzoyNzIsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxNDFdLDY6WzIsMTQxXSwyODpbMiwxNDFdLDI5OlsyLDE0MV0sNTI6WzIsMTQxXSw1NzpbMiwxNDFdLDYwOlsyLDE0MV0sNzY6WzIsMTQxXSw4MTpbMiwxNDFdLDkwOlsyLDE0MV0sOTU6WzIsMTQxXSw5NzpbMiwxNDFdLDEwMjpbMSwyNzNdLDEwNjpbMiwxNDFdLDEwODpbMiwxNDFdLDEwOTpbMiwxNDFdLDExMDpbMiwxNDFdLDExNDpbMiwxNDFdLDEyMjpbMiwxNDFdLDEzMDpbMiwxNDFdLDEzMzpbMiwxNDFdLDEzNDpbMiwxNDFdLDEzOTpbMiwxNDFdLDE0MDpbMiwxNDFdLDE0MTpbMiwxNDFdLDE0MjpbMiwxNDFdLDE0MzpbMiwxNDFdLDE0NDpbMiwxNDFdLDE0NTpbMiwxNDFdfSx7MTQ6Mjc0LDI4OlsxLDEyMF19LHsxNDoyNzcsMjg6WzEsMTIwXSwzMDoyNzUsMzE6WzEsNzddLDYyOjI3Niw3OTpbMSw3NF19LHsxMjQ6Mjc4LDEyNjoyMzUsMTI3OlsxLDIzNl19LHsyOTpbMSwyNzldLDEyNTpbMSwyODBdLDEyNjoyODEsMTI3OlsxLDIzNl19LHsyOTpbMiwxODRdLDEyNTpbMiwxODRdLDEyNzpbMiwxODRdfSx7NzoyODMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTk6MjgyLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTAzXSw2OlsyLDEwM10sMTQ6Mjg0LDI4OlsxLDEyMF0sMjk6WzIsMTAzXSw1MjpbMiwxMDNdLDU3OlsyLDEwM10sNjA6WzIsMTAzXSw3NjpbMiwxMDNdLDgxOlsyLDEwM10sOTA6WzIsMTAzXSw5NTpbMiwxMDNdLDk3OlsyLDEwM10sMTA2OlsyLDEwM10sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDEwM10sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDEwM10sMTMwOlsyLDEwM10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDEwNl0sNjpbMiwxMDZdLDI4OlsyLDEwNl0sMjk6WzIsMTA2XSw1MjpbMiwxMDZdLDU3OlsyLDEwNl0sNjA6WzIsMTA2XSw3NjpbMiwxMDZdLDgxOlsyLDEwNl0sOTA6WzIsMTA2XSw5NTpbMiwxMDZdLDk3OlsyLDEwNl0sMTA2OlsyLDEwNl0sMTA4OlsyLDEwNl0sMTA5OlsyLDEwNl0sMTEwOlsyLDEwNl0sMTE0OlsyLDEwNl0sMTIyOlsyLDEwNl0sMTMwOlsyLDEwNl0sMTMzOlsyLDEwNl0sMTM0OlsyLDEwNl0sMTM5OlsyLDEwNl0sMTQwOlsyLDEwNl0sMTQxOlsyLDEwNl0sMTQyOlsyLDEwNl0sMTQzOlsyLDEwNl0sMTQ0OlsyLDEwNl0sMTQ1OlsyLDEwNl19LHs3OjI4NSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDE0OF0sNjpbMiwxNDhdLDI4OlsyLDE0OF0sMjk6WzIsMTQ4XSw1MjpbMiwxNDhdLDU3OlsyLDE0OF0sNjA6WzIsMTQ4XSw2OTpbMiwxNDhdLDcwOlsyLDE0OF0sNzE6WzIsMTQ4XSw3MjpbMiwxNDhdLDc0OlsyLDE0OF0sNzY6WzIsMTQ4XSw3NzpbMiwxNDhdLDgxOlsyLDE0OF0sODg6WzIsMTQ4XSw4OTpbMiwxNDhdLDkwOlsyLDE0OF0sOTU6WzIsMTQ4XSw5NzpbMiwxNDhdLDEwNjpbMiwxNDhdLDEwODpbMiwxNDhdLDEwOTpbMiwxNDhdLDExMDpbMiwxNDhdLDExNDpbMiwxNDhdLDEyMjpbMiwxNDhdLDEzMDpbMiwxNDhdLDEzMzpbMiwxNDhdLDEzNDpbMiwxNDhdLDEzOTpbMiwxNDhdLDE0MDpbMiwxNDhdLDE0MTpbMiwxNDhdLDE0MjpbMiwxNDhdLDE0MzpbMiwxNDhdLDE0NDpbMiwxNDhdLDE0NTpbMiwxNDhdfSx7NjpbMSw3OF0sMjk6WzEsMjg2XX0sezc6Mjg3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsNzFdLDExOlsyLDEyNF0sMTM6WzIsMTI0XSwyODpbMiw3MV0sMzE6WzIsMTI0XSwzMzpbMiwxMjRdLDM0OlsyLDEyNF0sMzY6WzIsMTI0XSwzNzpbMiwxMjRdLDM4OlsyLDEyNF0sMzk6WzIsMTI0XSw0MDpbMiwxMjRdLDQxOlsyLDEyNF0sNDg6WzIsMTI0XSw0OTpbMiwxMjRdLDUwOlsyLDEyNF0sNTQ6WzIsMTI0XSw1NTpbMiwxMjRdLDU3OlsyLDcxXSw3OTpbMiwxMjRdLDgyOlsyLDEyNF0sODY6WzIsMTI0XSw4NzpbMiwxMjRdLDkyOlsyLDEyNF0sOTM6WzIsMTI0XSw5NDpbMiwxMjRdLDk1OlsyLDcxXSwxMDA6WzIsMTI0XSwxMDQ6WzIsMTI0XSwxMDU6WzIsMTI0XSwxMDg6WzIsMTI0XSwxMTA6WzIsMTI0XSwxMTI6WzIsMTI0XSwxMTQ6WzIsMTI0XSwxMjM6WzIsMTI0XSwxMjk6WzIsMTI0XSwxMzE6WzIsMTI0XSwxMzI6WzIsMTI0XSwxMzM6WzIsMTI0XSwxMzQ6WzIsMTI0XSwxMzU6WzIsMTI0XSwxMzc6WzIsMTI0XSwxMzg6WzIsMTI0XX0sezY6WzEsMjg5XSwyODpbMSwyOTBdLDk1OlsxLDI4OF19LHs2OlsyLDU3XSw3OjIxNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMiw1N10sMjk6WzIsNTddLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkwOlsyLDU3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5NTpbMiw1N10sOTg6MjkxLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsNTZdLDI4OlsyLDU2XSwyOTpbMiw1Nl0sNTY6MjkyLDU3OlsxLDI0NV19LHsxOlsyLDE4OF0sNjpbMiwxODhdLDI4OlsyLDE4OF0sMjk6WzIsMTg4XSw1MjpbMiwxODhdLDU3OlsyLDE4OF0sNjA6WzIsMTg4XSw3NjpbMiwxODhdLDgxOlsyLDE4OF0sOTA6WzIsMTg4XSw5NTpbMiwxODhdLDk3OlsyLDE4OF0sMTA2OlsyLDE4OF0sMTA4OlsyLDE4OF0sMTA5OlsyLDE4OF0sMTEwOlsyLDE4OF0sMTE0OlsyLDE4OF0sMTIyOlsyLDE4OF0sMTI1OlsyLDE4OF0sMTMwOlsyLDE4OF0sMTMzOlsyLDE4OF0sMTM0OlsyLDE4OF0sMTM5OlsyLDE4OF0sMTQwOlsyLDE4OF0sMTQxOlsyLDE4OF0sMTQyOlsyLDE4OF0sMTQzOlsyLDE4OF0sMTQ0OlsyLDE4OF0sMTQ1OlsyLDE4OF19LHs3OjI5Myw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjI5NCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxMjA6WzIsMTY2XSwxMjE6WzIsMTY2XX0sezMwOjE3MSwzMTpbMSw3N10sNDc6MTcyLDYxOjE3Myw2MjoxNzQsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsMTE4XSwxMTk6Mjk1fSx7MTpbMiwxNzNdLDY6WzIsMTczXSwyODpbMiwxNzNdLDI5OlsyLDE3M10sNTI6WzIsMTczXSw1NzpbMiwxNzNdLDYwOlsyLDE3M10sNzY6WzIsMTczXSw4MTpbMiwxNzNdLDkwOlsyLDE3M10sOTU6WzIsMTczXSw5NzpbMiwxNzNdLDEwNjpbMiwxNzNdLDEwNzo4OSwxMDg6WzIsMTczXSwxMDk6WzEsMjk2XSwxMTA6WzIsMTczXSwxMTM6OTAsMTE0OlsyLDE3M10sMTE1OjczLDEyMjpbMSwyOTddLDEzMDpbMiwxNzNdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNzRdLDY6WzIsMTc0XSwyODpbMiwxNzRdLDI5OlsyLDE3NF0sNTI6WzIsMTc0XSw1NzpbMiwxNzRdLDYwOlsyLDE3NF0sNzY6WzIsMTc0XSw4MTpbMiwxNzRdLDkwOlsyLDE3NF0sOTU6WzIsMTc0XSw5NzpbMiwxNzRdLDEwNjpbMiwxNzRdLDEwNzo4OSwxMDg6WzIsMTc0XSwxMDk6WzEsMjk4XSwxMTA6WzIsMTc0XSwxMTM6OTAsMTE0OlsyLDE3NF0sMTE1OjczLDEyMjpbMiwxNzRdLDEzMDpbMiwxNzRdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMSwzMDBdLDI4OlsxLDMwMV0sODE6WzEsMjk5XX0sezY6WzIsNTddLDEwOjE4MSwyODpbMiw1N10sMjk6WzIsNTddLDMwOjE4MiwzMTpbMSw3N10sMzI6MTgzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sNDQ6MzAyLDQ1OjE4MCw0NzoxODQsNDk6WzEsNDldLDgxOlsyLDU3XSw5MzpbMSwxMTddfSx7NzozMDMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMzA0XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDkxXSw2OlsyLDkxXSwyODpbMiw5MV0sMjk6WzIsOTFdLDQzOlsyLDkxXSw1MjpbMiw5MV0sNTc6WzIsOTFdLDYwOlsyLDkxXSw2OTpbMiw5MV0sNzA6WzIsOTFdLDcxOlsyLDkxXSw3MjpbMiw5MV0sNzQ6WzIsOTFdLDc2OlsyLDkxXSw3NzpbMiw5MV0sODE6WzIsOTFdLDgzOlsyLDkxXSw4ODpbMiw5MV0sODk6WzIsOTFdLDkwOlsyLDkxXSw5NTpbMiw5MV0sOTc6WzIsOTFdLDEwNjpbMiw5MV0sMTA4OlsyLDkxXSwxMDk6WzIsOTFdLDExMDpbMiw5MV0sMTE0OlsyLDkxXSwxMjI6WzIsOTFdLDEzMDpbMiw5MV0sMTMzOlsyLDkxXSwxMzQ6WzIsOTFdLDEzNzpbMiw5MV0sMTM4OlsyLDkxXSwxMzk6WzIsOTFdLDE0MDpbMiw5MV0sMTQxOlsyLDkxXSwxNDI6WzIsOTFdLDE0MzpbMiw5MV0sMTQ0OlsyLDkxXSwxNDU6WzIsOTFdLDE0NjpbMiw5MV19LHs3OjMwNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc2OlsyLDEyN10sNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc2OlsyLDEyOF0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsNDBdLDY6WzIsNDBdLDI4OlsyLDQwXSwyOTpbMiw0MF0sNTI6WzIsNDBdLDU3OlsyLDQwXSw2MDpbMiw0MF0sNzY6WzIsNDBdLDgxOlsyLDQwXSw5MDpbMiw0MF0sOTU6WzIsNDBdLDk3OlsyLDQwXSwxMDY6WzIsNDBdLDEwNzo4OSwxMDg6WzIsNDBdLDEwOTpbMiw0MF0sMTEwOlsyLDQwXSwxMTM6OTAsMTE0OlsyLDQwXSwxMTU6NzMsMTIyOlsyLDQwXSwxMzA6WzIsNDBdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7Mjk6WzEsMzA2XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMSwyODldLDI4OlsxLDI5MF0sOTA6WzEsMzA3XX0sezY6WzIsNzFdLDI4OlsyLDcxXSwyOTpbMiw3MV0sNTc6WzIsNzFdLDkwOlsyLDcxXSw5NTpbMiw3MV19LHsxNDozMDgsMjg6WzEsMTIwXX0sezY6WzIsNjBdLDI4OlsyLDYwXSwyOTpbMiw2MF0sNTI6WzIsNjBdLDU3OlsyLDYwXX0sezMwOjExMywzMTpbMSw3N10sNDc6MTE0LDU4OjMwOSw1OToxMTEsNjA6WzEsMTEyXSw2MToxMTUsNjI6MTE2LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDExOF19LHs2OlsyLDU4XSwyODpbMiw1OF0sMjk6WzIsNThdLDMwOjExMywzMTpbMSw3N10sNDc6MTE0LDUxOjMxMCw1NzpbMiw1OF0sNTg6MTEwLDU5OjExMSw2MDpbMSwxMTJdLDYxOjExNSw2MjoxMTYsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsMTE4XX0sezY6WzIsNjVdLDI4OlsyLDY1XSwyOTpbMiw2NV0sNTI6WzIsNjVdLDU3OlsyLDY1XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwyOF0sNjpbMiwyOF0sMjg6WzIsMjhdLDI5OlsyLDI4XSw1MjpbMiwyOF0sNTc6WzIsMjhdLDYwOlsyLDI4XSw3NjpbMiwyOF0sODE6WzIsMjhdLDkwOlsyLDI4XSw5NTpbMiwyOF0sOTc6WzIsMjhdLDEwMjpbMiwyOF0sMTAzOlsyLDI4XSwxMDY6WzIsMjhdLDEwODpbMiwyOF0sMTA5OlsyLDI4XSwxMTA6WzIsMjhdLDExNDpbMiwyOF0sMTIyOlsyLDI4XSwxMjU6WzIsMjhdLDEyNzpbMiwyOF0sMTMwOlsyLDI4XSwxMzM6WzIsMjhdLDEzNDpbMiwyOF0sMTM5OlsyLDI4XSwxNDA6WzIsMjhdLDE0MTpbMiwyOF0sMTQyOlsyLDI4XSwxNDM6WzIsMjhdLDE0NDpbMiwyOF0sMTQ1OlsyLDI4XX0sezI5OlsxLDMxMV0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMjE2XSw2OlsyLDIxNl0sMjg6WzIsMjE2XSwyOTpbMiwyMTZdLDUyOlsyLDIxNl0sNTc6WzIsMjE2XSw2MDpbMiwyMTZdLDc2OlsyLDIxNl0sODE6WzIsMjE2XSw5MDpbMiwyMTZdLDk1OlsyLDIxNl0sOTc6WzIsMjE2XSwxMDY6WzIsMjE2XSwxMDc6ODksMTA4OlsyLDIxNl0sMTA5OlsyLDIxNl0sMTEwOlsyLDIxNl0sMTEzOjkwLDExNDpbMiwyMTZdLDExNTo3MywxMjI6WzIsMjE2XSwxMzA6WzIsMjE2XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE0OjMxMiwyODpbMSwxMjBdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxNDozMTMsMjg6WzEsMTIwXX0sezE6WzIsMTQyXSw2OlsyLDE0Ml0sMjg6WzIsMTQyXSwyOTpbMiwxNDJdLDUyOlsyLDE0Ml0sNTc6WzIsMTQyXSw2MDpbMiwxNDJdLDc2OlsyLDE0Ml0sODE6WzIsMTQyXSw5MDpbMiwxNDJdLDk1OlsyLDE0Ml0sOTc6WzIsMTQyXSwxMDY6WzIsMTQyXSwxMDg6WzIsMTQyXSwxMDk6WzIsMTQyXSwxMTA6WzIsMTQyXSwxMTQ6WzIsMTQyXSwxMjI6WzIsMTQyXSwxMzA6WzIsMTQyXSwxMzM6WzIsMTQyXSwxMzQ6WzIsMTQyXSwxMzk6WzIsMTQyXSwxNDA6WzIsMTQyXSwxNDE6WzIsMTQyXSwxNDI6WzIsMTQyXSwxNDM6WzIsMTQyXSwxNDQ6WzIsMTQyXSwxNDU6WzIsMTQyXX0sezE0OjMxNCwyODpbMSwxMjBdfSx7MTQ6MzE1LDI4OlsxLDEyMF19LHsxOlsyLDE0Nl0sNjpbMiwxNDZdLDI4OlsyLDE0Nl0sMjk6WzIsMTQ2XSw1MjpbMiwxNDZdLDU3OlsyLDE0Nl0sNjA6WzIsMTQ2XSw3NjpbMiwxNDZdLDgxOlsyLDE0Nl0sOTA6WzIsMTQ2XSw5NTpbMiwxNDZdLDk3OlsyLDE0Nl0sMTAyOlsyLDE0Nl0sMTA2OlsyLDE0Nl0sMTA4OlsyLDE0Nl0sMTA5OlsyLDE0Nl0sMTEwOlsyLDE0Nl0sMTE0OlsyLDE0Nl0sMTIyOlsyLDE0Nl0sMTMwOlsyLDE0Nl0sMTMzOlsyLDE0Nl0sMTM0OlsyLDE0Nl0sMTM5OlsyLDE0Nl0sMTQwOlsyLDE0Nl0sMTQxOlsyLDE0Nl0sMTQyOlsyLDE0Nl0sMTQzOlsyLDE0Nl0sMTQ0OlsyLDE0Nl0sMTQ1OlsyLDE0Nl19LHsyOTpbMSwzMTZdLDEyNTpbMSwzMTddLDEyNjoyODEsMTI3OlsxLDIzNl19LHsxOlsyLDE4Ml0sNjpbMiwxODJdLDI4OlsyLDE4Ml0sMjk6WzIsMTgyXSw1MjpbMiwxODJdLDU3OlsyLDE4Ml0sNjA6WzIsMTgyXSw3NjpbMiwxODJdLDgxOlsyLDE4Ml0sOTA6WzIsMTgyXSw5NTpbMiwxODJdLDk3OlsyLDE4Ml0sMTA2OlsyLDE4Ml0sMTA4OlsyLDE4Ml0sMTA5OlsyLDE4Ml0sMTEwOlsyLDE4Ml0sMTE0OlsyLDE4Ml0sMTIyOlsyLDE4Ml0sMTMwOlsyLDE4Ml0sMTMzOlsyLDE4Ml0sMTM0OlsyLDE4Ml0sMTM5OlsyLDE4Ml0sMTQwOlsyLDE4Ml0sMTQxOlsyLDE4Ml0sMTQyOlsyLDE4Ml0sMTQzOlsyLDE4Ml0sMTQ0OlsyLDE4Ml0sMTQ1OlsyLDE4Ml19LHsxNDozMTgsMjg6WzEsMTIwXX0sezI5OlsyLDE4NV0sMTI1OlsyLDE4NV0sMTI3OlsyLDE4NV19LHsxNDozMTksMjg6WzEsMTIwXSw1NzpbMSwzMjBdfSx7Mjg6WzIsMTM4XSw1NzpbMiwxMzhdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDEwNF0sNjpbMiwxMDRdLDI4OlsyLDEwNF0sMjk6WzIsMTA0XSw1MjpbMiwxMDRdLDU3OlsyLDEwNF0sNjA6WzIsMTA0XSw3NjpbMiwxMDRdLDgxOlsyLDEwNF0sOTA6WzIsMTA0XSw5NTpbMiwxMDRdLDk3OlsyLDEwNF0sMTA2OlsyLDEwNF0sMTA4OlsyLDEwNF0sMTA5OlsyLDEwNF0sMTEwOlsyLDEwNF0sMTE0OlsyLDEwNF0sMTIyOlsyLDEwNF0sMTMwOlsyLDEwNF0sMTMzOlsyLDEwNF0sMTM0OlsyLDEwNF0sMTM5OlsyLDEwNF0sMTQwOlsyLDEwNF0sMTQxOlsyLDEwNF0sMTQyOlsyLDEwNF0sMTQzOlsyLDEwNF0sMTQ0OlsyLDEwNF0sMTQ1OlsyLDEwNF19LHsxOlsyLDEwN10sNjpbMiwxMDddLDE0OjMyMSwyODpbMSwxMjBdLDI5OlsyLDEwN10sNTI6WzIsMTA3XSw1NzpbMiwxMDddLDYwOlsyLDEwN10sNzY6WzIsMTA3XSw4MTpbMiwxMDddLDkwOlsyLDEwN10sOTU6WzIsMTA3XSw5NzpbMiwxMDddLDEwNjpbMiwxMDddLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxMDddLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxMDddLDEzMDpbMiwxMDddLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTA2OlsxLDMyMl19LHs5NTpbMSwzMjNdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDEyMl0sNjpbMiwxMjJdLDI4OlsyLDEyMl0sMjk6WzIsMTIyXSw0MzpbMiwxMjJdLDUyOlsyLDEyMl0sNTc6WzIsMTIyXSw2MDpbMiwxMjJdLDY5OlsyLDEyMl0sNzA6WzIsMTIyXSw3MTpbMiwxMjJdLDcyOlsyLDEyMl0sNzQ6WzIsMTIyXSw3NjpbMiwxMjJdLDc3OlsyLDEyMl0sODE6WzIsMTIyXSw4ODpbMiwxMjJdLDg5OlsyLDEyMl0sOTA6WzIsMTIyXSw5NTpbMiwxMjJdLDk3OlsyLDEyMl0sMTA2OlsyLDEyMl0sMTA4OlsyLDEyMl0sMTA5OlsyLDEyMl0sMTEwOlsyLDEyMl0sMTE0OlsyLDEyMl0sMTIwOlsyLDEyMl0sMTIxOlsyLDEyMl0sMTIyOlsyLDEyMl0sMTMwOlsyLDEyMl0sMTMzOlsyLDEyMl0sMTM0OlsyLDEyMl0sMTM5OlsyLDEyMl0sMTQwOlsyLDEyMl0sMTQxOlsyLDEyMl0sMTQyOlsyLDEyMl0sMTQzOlsyLDEyMl0sMTQ0OlsyLDEyMl0sMTQ1OlsyLDEyMl19LHs3OjIxNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5ODozMjQsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoyMTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTU4XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MTozMjUsOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTg6MTU3LDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsMTMxXSwyODpbMiwxMzFdLDI5OlsyLDEzMV0sNTc6WzIsMTMxXSw5MDpbMiwxMzFdLDk1OlsyLDEzMV19LHs2OlsxLDI4OV0sMjg6WzEsMjkwXSwyOTpbMSwzMjZdfSx7MTpbMiwxNTFdLDY6WzIsMTUxXSwyODpbMiwxNTFdLDI5OlsyLDE1MV0sNTI6WzIsMTUxXSw1NzpbMiwxNTFdLDYwOlsyLDE1MV0sNzY6WzIsMTUxXSw4MTpbMiwxNTFdLDkwOlsyLDE1MV0sOTU6WzIsMTUxXSw5NzpbMiwxNTFdLDEwNjpbMiwxNTFdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxNTFdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxNTFdLDEzMDpbMiwxNTFdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNTNdLDY6WzIsMTUzXSwyODpbMiwxNTNdLDI5OlsyLDE1M10sNTI6WzIsMTUzXSw1NzpbMiwxNTNdLDYwOlsyLDE1M10sNzY6WzIsMTUzXSw4MTpbMiwxNTNdLDkwOlsyLDE1M10sOTU6WzIsMTUzXSw5NzpbMiwxNTNdLDEwNjpbMiwxNTNdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxNTNdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxNTNdLDEzMDpbMiwxNTNdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTIwOlsyLDE3Ml0sMTIxOlsyLDE3Ml19LHs3OjMyNyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjMyOCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjMyOSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDk1XSw2OlsyLDk1XSwyODpbMiw5NV0sMjk6WzIsOTVdLDQzOlsyLDk1XSw1MjpbMiw5NV0sNTc6WzIsOTVdLDYwOlsyLDk1XSw2OTpbMiw5NV0sNzA6WzIsOTVdLDcxOlsyLDk1XSw3MjpbMiw5NV0sNzQ6WzIsOTVdLDc2OlsyLDk1XSw3NzpbMiw5NV0sODE6WzIsOTVdLDg4OlsyLDk1XSw4OTpbMiw5NV0sOTA6WzIsOTVdLDk1OlsyLDk1XSw5NzpbMiw5NV0sMTA2OlsyLDk1XSwxMDg6WzIsOTVdLDEwOTpbMiw5NV0sMTEwOlsyLDk1XSwxMTQ6WzIsOTVdLDEyMDpbMiw5NV0sMTIxOlsyLDk1XSwxMjI6WzIsOTVdLDEzMDpbMiw5NV0sMTMzOlsyLDk1XSwxMzQ6WzIsOTVdLDEzOTpbMiw5NV0sMTQwOlsyLDk1XSwxNDE6WzIsOTVdLDE0MjpbMiw5NV0sMTQzOlsyLDk1XSwxNDQ6WzIsOTVdLDE0NTpbMiw5NV19LHsxMDoxODEsMzA6MTgyLDMxOlsxLDc3XSwzMjoxODMsMzM6WzEsNzVdLDM0OlsxLDc2XSw0NDozMzAsNDU6MTgwLDQ3OjE4NCw0OTpbMSw0OV0sOTM6WzEsMTE3XX0sezY6WzIsOTZdLDEwOjE4MSwyODpbMiw5Nl0sMjk6WzIsOTZdLDMwOjE4MiwzMTpbMSw3N10sMzI6MTgzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sNDQ6MTc5LDQ1OjE4MCw0NzoxODQsNDk6WzEsNDldLDU3OlsyLDk2XSw4MDozMzEsOTM6WzEsMTE3XX0sezY6WzIsOThdLDI4OlsyLDk4XSwyOTpbMiw5OF0sNTc6WzIsOThdLDgxOlsyLDk4XX0sezY6WzIsNDNdLDI4OlsyLDQzXSwyOTpbMiw0M10sNTc6WzIsNDNdLDgxOlsyLDQzXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NzozMzIsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzY6WzIsMTI2XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiw0MV0sNjpbMiw0MV0sMjg6WzIsNDFdLDI5OlsyLDQxXSw1MjpbMiw0MV0sNTc6WzIsNDFdLDYwOlsyLDQxXSw3NjpbMiw0MV0sODE6WzIsNDFdLDkwOlsyLDQxXSw5NTpbMiw0MV0sOTc6WzIsNDFdLDEwNjpbMiw0MV0sMTA4OlsyLDQxXSwxMDk6WzIsNDFdLDExMDpbMiw0MV0sMTE0OlsyLDQxXSwxMjI6WzIsNDFdLDEzMDpbMiw0MV0sMTMzOlsyLDQxXSwxMzQ6WzIsNDFdLDEzOTpbMiw0MV0sMTQwOlsyLDQxXSwxNDE6WzIsNDFdLDE0MjpbMiw0MV0sMTQzOlsyLDQxXSwxNDQ6WzIsNDFdLDE0NTpbMiw0MV19LHsxOlsyLDExN10sNjpbMiwxMTddLDI4OlsyLDExN10sMjk6WzIsMTE3XSw0MzpbMiwxMTddLDUyOlsyLDExN10sNTc6WzIsMTE3XSw2MDpbMiwxMTddLDY5OlsyLDExN10sNzA6WzIsMTE3XSw3MTpbMiwxMTddLDcyOlsyLDExN10sNzQ6WzIsMTE3XSw3NjpbMiwxMTddLDc3OlsyLDExN10sODE6WzIsMTE3XSw4MzpbMiwxMTddLDg4OlsyLDExN10sODk6WzIsMTE3XSw5MDpbMiwxMTddLDk1OlsyLDExN10sOTc6WzIsMTE3XSwxMDY6WzIsMTE3XSwxMDg6WzIsMTE3XSwxMDk6WzIsMTE3XSwxMTA6WzIsMTE3XSwxMTQ6WzIsMTE3XSwxMjI6WzIsMTE3XSwxMzA6WzIsMTE3XSwxMzM6WzIsMTE3XSwxMzQ6WzIsMTE3XSwxMzc6WzIsMTE3XSwxMzg6WzIsMTE3XSwxMzk6WzIsMTE3XSwxNDA6WzIsMTE3XSwxNDE6WzIsMTE3XSwxNDI6WzIsMTE3XSwxNDM6WzIsMTE3XSwxNDQ6WzIsMTE3XSwxNDU6WzIsMTE3XSwxNDY6WzIsMTE3XX0sezE6WzIsNTJdLDY6WzIsNTJdLDI4OlsyLDUyXSwyOTpbMiw1Ml0sNTI6WzIsNTJdLDU3OlsyLDUyXSw2MDpbMiw1Ml0sNzY6WzIsNTJdLDgxOlsyLDUyXSw5MDpbMiw1Ml0sOTU6WzIsNTJdLDk3OlsyLDUyXSwxMDY6WzIsNTJdLDEwODpbMiw1Ml0sMTA5OlsyLDUyXSwxMTA6WzIsNTJdLDExNDpbMiw1Ml0sMTIyOlsyLDUyXSwxMzA6WzIsNTJdLDEzMzpbMiw1Ml0sMTM0OlsyLDUyXSwxMzk6WzIsNTJdLDE0MDpbMiw1Ml0sMTQxOlsyLDUyXSwxNDI6WzIsNTJdLDE0MzpbMiw1Ml0sMTQ0OlsyLDUyXSwxNDU6WzIsNTJdfSx7NjpbMiw2MV0sMjg6WzIsNjFdLDI5OlsyLDYxXSw1MjpbMiw2MV0sNTc6WzIsNjFdfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDI5OlsyLDU2XSw1NjozMzMsNTc6WzEsMjE3XX0sezE6WzIsMjE1XSw2OlsyLDIxNV0sMjg6WzIsMjE1XSwyOTpbMiwyMTVdLDUyOlsyLDIxNV0sNTc6WzIsMjE1XSw2MDpbMiwyMTVdLDc2OlsyLDIxNV0sODE6WzIsMjE1XSw5MDpbMiwyMTVdLDk1OlsyLDIxNV0sOTc6WzIsMjE1XSwxMDY6WzIsMjE1XSwxMDg6WzIsMjE1XSwxMDk6WzIsMjE1XSwxMTA6WzIsMjE1XSwxMTQ6WzIsMjE1XSwxMjI6WzIsMjE1XSwxMzA6WzIsMjE1XSwxMzM6WzIsMjE1XSwxMzQ6WzIsMjE1XSwxMzk6WzIsMjE1XSwxNDA6WzIsMjE1XSwxNDE6WzIsMjE1XSwxNDI6WzIsMjE1XSwxNDM6WzIsMjE1XSwxNDQ6WzIsMjE1XSwxNDU6WzIsMjE1XX0sezE6WzIsMTg5XSw2OlsyLDE4OV0sMjg6WzIsMTg5XSwyOTpbMiwxODldLDUyOlsyLDE4OV0sNTc6WzIsMTg5XSw2MDpbMiwxODldLDc2OlsyLDE4OV0sODE6WzIsMTg5XSw5MDpbMiwxODldLDk1OlsyLDE4OV0sOTc6WzIsMTg5XSwxMDY6WzIsMTg5XSwxMDg6WzIsMTg5XSwxMDk6WzIsMTg5XSwxMTA6WzIsMTg5XSwxMTQ6WzIsMTg5XSwxMjI6WzIsMTg5XSwxMjU6WzIsMTg5XSwxMzA6WzIsMTg5XSwxMzM6WzIsMTg5XSwxMzQ6WzIsMTg5XSwxMzk6WzIsMTg5XSwxNDA6WzIsMTg5XSwxNDE6WzIsMTg5XSwxNDI6WzIsMTg5XSwxNDM6WzIsMTg5XSwxNDQ6WzIsMTg5XSwxNDU6WzIsMTg5XX0sezE6WzIsMTQzXSw2OlsyLDE0M10sMjg6WzIsMTQzXSwyOTpbMiwxNDNdLDUyOlsyLDE0M10sNTc6WzIsMTQzXSw2MDpbMiwxNDNdLDc2OlsyLDE0M10sODE6WzIsMTQzXSw5MDpbMiwxNDNdLDk1OlsyLDE0M10sOTc6WzIsMTQzXSwxMDY6WzIsMTQzXSwxMDg6WzIsMTQzXSwxMDk6WzIsMTQzXSwxMTA6WzIsMTQzXSwxMTQ6WzIsMTQzXSwxMjI6WzIsMTQzXSwxMzA6WzIsMTQzXSwxMzM6WzIsMTQzXSwxMzQ6WzIsMTQzXSwxMzk6WzIsMTQzXSwxNDA6WzIsMTQzXSwxNDE6WzIsMTQzXSwxNDI6WzIsMTQzXSwxNDM6WzIsMTQzXSwxNDQ6WzIsMTQzXSwxNDU6WzIsMTQzXX0sezE6WzIsMTQ0XSw2OlsyLDE0NF0sMjg6WzIsMTQ0XSwyOTpbMiwxNDRdLDUyOlsyLDE0NF0sNTc6WzIsMTQ0XSw2MDpbMiwxNDRdLDc2OlsyLDE0NF0sODE6WzIsMTQ0XSw5MDpbMiwxNDRdLDk1OlsyLDE0NF0sOTc6WzIsMTQ0XSwxMDI6WzIsMTQ0XSwxMDY6WzIsMTQ0XSwxMDg6WzIsMTQ0XSwxMDk6WzIsMTQ0XSwxMTA6WzIsMTQ0XSwxMTQ6WzIsMTQ0XSwxMjI6WzIsMTQ0XSwxMzA6WzIsMTQ0XSwxMzM6WzIsMTQ0XSwxMzQ6WzIsMTQ0XSwxMzk6WzIsMTQ0XSwxNDA6WzIsMTQ0XSwxNDE6WzIsMTQ0XSwxNDI6WzIsMTQ0XSwxNDM6WzIsMTQ0XSwxNDQ6WzIsMTQ0XSwxNDU6WzIsMTQ0XX0sezE6WzIsMTQ1XSw2OlsyLDE0NV0sMjg6WzIsMTQ1XSwyOTpbMiwxNDVdLDUyOlsyLDE0NV0sNTc6WzIsMTQ1XSw2MDpbMiwxNDVdLDc2OlsyLDE0NV0sODE6WzIsMTQ1XSw5MDpbMiwxNDVdLDk1OlsyLDE0NV0sOTc6WzIsMTQ1XSwxMDI6WzIsMTQ1XSwxMDY6WzIsMTQ1XSwxMDg6WzIsMTQ1XSwxMDk6WzIsMTQ1XSwxMTA6WzIsMTQ1XSwxMTQ6WzIsMTQ1XSwxMjI6WzIsMTQ1XSwxMzA6WzIsMTQ1XSwxMzM6WzIsMTQ1XSwxMzQ6WzIsMTQ1XSwxMzk6WzIsMTQ1XSwxNDA6WzIsMTQ1XSwxNDE6WzIsMTQ1XSwxNDI6WzIsMTQ1XSwxNDM6WzIsMTQ1XSwxNDQ6WzIsMTQ1XSwxNDU6WzIsMTQ1XX0sezE6WzIsMTgwXSw2OlsyLDE4MF0sMjg6WzIsMTgwXSwyOTpbMiwxODBdLDUyOlsyLDE4MF0sNTc6WzIsMTgwXSw2MDpbMiwxODBdLDc2OlsyLDE4MF0sODE6WzIsMTgwXSw5MDpbMiwxODBdLDk1OlsyLDE4MF0sOTc6WzIsMTgwXSwxMDY6WzIsMTgwXSwxMDg6WzIsMTgwXSwxMDk6WzIsMTgwXSwxMTA6WzIsMTgwXSwxMTQ6WzIsMTgwXSwxMjI6WzIsMTgwXSwxMzA6WzIsMTgwXSwxMzM6WzIsMTgwXSwxMzQ6WzIsMTgwXSwxMzk6WzIsMTgwXSwxNDA6WzIsMTgwXSwxNDE6WzIsMTgwXSwxNDI6WzIsMTgwXSwxNDM6WzIsMTgwXSwxNDQ6WzIsMTgwXSwxNDU6WzIsMTgwXX0sezE0OjMzNCwyODpbMSwxMjBdfSx7Mjk6WzEsMzM1XX0sezY6WzEsMzM2XSwyOTpbMiwxODZdLDEyNTpbMiwxODZdLDEyNzpbMiwxODZdfSx7NzozMzcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMDhdLDY6WzIsMTA4XSwyODpbMiwxMDhdLDI5OlsyLDEwOF0sNTI6WzIsMTA4XSw1NzpbMiwxMDhdLDYwOlsyLDEwOF0sNzY6WzIsMTA4XSw4MTpbMiwxMDhdLDkwOlsyLDEwOF0sOTU6WzIsMTA4XSw5NzpbMiwxMDhdLDEwNjpbMiwxMDhdLDEwODpbMiwxMDhdLDEwOTpbMiwxMDhdLDExMDpbMiwxMDhdLDExNDpbMiwxMDhdLDEyMjpbMiwxMDhdLDEzMDpbMiwxMDhdLDEzMzpbMiwxMDhdLDEzNDpbMiwxMDhdLDEzOTpbMiwxMDhdLDE0MDpbMiwxMDhdLDE0MTpbMiwxMDhdLDE0MjpbMiwxMDhdLDE0MzpbMiwxMDhdLDE0NDpbMiwxMDhdLDE0NTpbMiwxMDhdfSx7MTpbMiwxNDldLDY6WzIsMTQ5XSwyODpbMiwxNDldLDI5OlsyLDE0OV0sNTI6WzIsMTQ5XSw1NzpbMiwxNDldLDYwOlsyLDE0OV0sNjk6WzIsMTQ5XSw3MDpbMiwxNDldLDcxOlsyLDE0OV0sNzI6WzIsMTQ5XSw3NDpbMiwxNDldLDc2OlsyLDE0OV0sNzc6WzIsMTQ5XSw4MTpbMiwxNDldLDg4OlsyLDE0OV0sODk6WzIsMTQ5XSw5MDpbMiwxNDldLDk1OlsyLDE0OV0sOTc6WzIsMTQ5XSwxMDY6WzIsMTQ5XSwxMDg6WzIsMTQ5XSwxMDk6WzIsMTQ5XSwxMTA6WzIsMTQ5XSwxMTQ6WzIsMTQ5XSwxMjI6WzIsMTQ5XSwxMzA6WzIsMTQ5XSwxMzM6WzIsMTQ5XSwxMzQ6WzIsMTQ5XSwxMzk6WzIsMTQ5XSwxNDA6WzIsMTQ5XSwxNDE6WzIsMTQ5XSwxNDI6WzIsMTQ5XSwxNDM6WzIsMTQ5XSwxNDQ6WzIsMTQ5XSwxNDU6WzIsMTQ5XX0sezE6WzIsMTI1XSw2OlsyLDEyNV0sMjg6WzIsMTI1XSwyOTpbMiwxMjVdLDUyOlsyLDEyNV0sNTc6WzIsMTI1XSw2MDpbMiwxMjVdLDY5OlsyLDEyNV0sNzA6WzIsMTI1XSw3MTpbMiwxMjVdLDcyOlsyLDEyNV0sNzQ6WzIsMTI1XSw3NjpbMiwxMjVdLDc3OlsyLDEyNV0sODE6WzIsMTI1XSw4ODpbMiwxMjVdLDg5OlsyLDEyNV0sOTA6WzIsMTI1XSw5NTpbMiwxMjVdLDk3OlsyLDEyNV0sMTA2OlsyLDEyNV0sMTA4OlsyLDEyNV0sMTA5OlsyLDEyNV0sMTEwOlsyLDEyNV0sMTE0OlsyLDEyNV0sMTIyOlsyLDEyNV0sMTMwOlsyLDEyNV0sMTMzOlsyLDEyNV0sMTM0OlsyLDEyNV0sMTM5OlsyLDEyNV0sMTQwOlsyLDEyNV0sMTQxOlsyLDEyNV0sMTQyOlsyLDEyNV0sMTQzOlsyLDEyNV0sMTQ0OlsyLDEyNV0sMTQ1OlsyLDEyNV19LHs2OlsyLDEzMl0sMjg6WzIsMTMyXSwyOTpbMiwxMzJdLDU3OlsyLDEzMl0sOTA6WzIsMTMyXSw5NTpbMiwxMzJdfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDI5OlsyLDU2XSw1NjozMzgsNTc6WzEsMjQ1XX0sezY6WzIsMTMzXSwyODpbMiwxMzNdLDI5OlsyLDEzM10sNTc6WzIsMTMzXSw5MDpbMiwxMzNdLDk1OlsyLDEzM119LHsxOlsyLDE3NV0sNjpbMiwxNzVdLDI4OlsyLDE3NV0sMjk6WzIsMTc1XSw1MjpbMiwxNzVdLDU3OlsyLDE3NV0sNjA6WzIsMTc1XSw3NjpbMiwxNzVdLDgxOlsyLDE3NV0sOTA6WzIsMTc1XSw5NTpbMiwxNzVdLDk3OlsyLDE3NV0sMTA2OlsyLDE3NV0sMTA3Ojg5LDEwODpbMiwxNzVdLDEwOTpbMiwxNzVdLDExMDpbMiwxNzVdLDExMzo5MCwxMTQ6WzIsMTc1XSwxMTU6NzMsMTIyOlsxLDMzOV0sMTMwOlsyLDE3NV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE3N10sNjpbMiwxNzddLDI4OlsyLDE3N10sMjk6WzIsMTc3XSw1MjpbMiwxNzddLDU3OlsyLDE3N10sNjA6WzIsMTc3XSw3NjpbMiwxNzddLDgxOlsyLDE3N10sOTA6WzIsMTc3XSw5NTpbMiwxNzddLDk3OlsyLDE3N10sMTA2OlsyLDE3N10sMTA3Ojg5LDEwODpbMiwxNzddLDEwOTpbMSwzNDBdLDExMDpbMiwxNzddLDExMzo5MCwxMTQ6WzIsMTc3XSwxMTU6NzMsMTIyOlsyLDE3N10sMTMwOlsyLDE3N10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE3Nl0sNjpbMiwxNzZdLDI4OlsyLDE3Nl0sMjk6WzIsMTc2XSw1MjpbMiwxNzZdLDU3OlsyLDE3Nl0sNjA6WzIsMTc2XSw3NjpbMiwxNzZdLDgxOlsyLDE3Nl0sOTA6WzIsMTc2XSw5NTpbMiwxNzZdLDk3OlsyLDE3Nl0sMTA2OlsyLDE3Nl0sMTA3Ojg5LDEwODpbMiwxNzZdLDEwOTpbMiwxNzZdLDExMDpbMiwxNzZdLDExMzo5MCwxMTQ6WzIsMTc2XSwxMTU6NzMsMTIyOlsyLDE3Nl0sMTMwOlsyLDE3Nl0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsyLDk5XSwyODpbMiw5OV0sMjk6WzIsOTldLDU3OlsyLDk5XSw4MTpbMiw5OV19LHs2OlsyLDU2XSwyODpbMiw1Nl0sMjk6WzIsNTZdLDU2OjM0MSw1NzpbMSwyNTVdfSx7Mjk6WzEsMzQyXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMSwyNjZdLDI4OlsxLDI2N10sMjk6WzEsMzQzXX0sezI5OlsxLDM0NF19LHsxOlsyLDE4M10sNjpbMiwxODNdLDI4OlsyLDE4M10sMjk6WzIsMTgzXSw1MjpbMiwxODNdLDU3OlsyLDE4M10sNjA6WzIsMTgzXSw3NjpbMiwxODNdLDgxOlsyLDE4M10sOTA6WzIsMTgzXSw5NTpbMiwxODNdLDk3OlsyLDE4M10sMTA2OlsyLDE4M10sMTA4OlsyLDE4M10sMTA5OlsyLDE4M10sMTEwOlsyLDE4M10sMTE0OlsyLDE4M10sMTIyOlsyLDE4M10sMTMwOlsyLDE4M10sMTMzOlsyLDE4M10sMTM0OlsyLDE4M10sMTM5OlsyLDE4M10sMTQwOlsyLDE4M10sMTQxOlsyLDE4M10sMTQyOlsyLDE4M10sMTQzOlsyLDE4M10sMTQ0OlsyLDE4M10sMTQ1OlsyLDE4M119LHsyOTpbMiwxODddLDEyNTpbMiwxODddLDEyNzpbMiwxODddfSx7Mjg6WzIsMTM5XSw1NzpbMiwxMzldLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsxLDI4OV0sMjg6WzEsMjkwXSwyOTpbMSwzNDVdfSx7NzozNDYsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzozNDcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMSwzMDBdLDI4OlsxLDMwMV0sMjk6WzEsMzQ4XX0sezY6WzIsNDRdLDI4OlsyLDQ0XSwyOTpbMiw0NF0sNTc6WzIsNDRdLDgxOlsyLDQ0XX0sezY6WzIsNjJdLDI4OlsyLDYyXSwyOTpbMiw2Ml0sNTI6WzIsNjJdLDU3OlsyLDYyXX0sezE6WzIsMTgxXSw2OlsyLDE4MV0sMjg6WzIsMTgxXSwyOTpbMiwxODFdLDUyOlsyLDE4MV0sNTc6WzIsMTgxXSw2MDpbMiwxODFdLDc2OlsyLDE4MV0sODE6WzIsMTgxXSw5MDpbMiwxODFdLDk1OlsyLDE4MV0sOTc6WzIsMTgxXSwxMDY6WzIsMTgxXSwxMDg6WzIsMTgxXSwxMDk6WzIsMTgxXSwxMTA6WzIsMTgxXSwxMTQ6WzIsMTgxXSwxMjI6WzIsMTgxXSwxMzA6WzIsMTgxXSwxMzM6WzIsMTgxXSwxMzQ6WzIsMTgxXSwxMzk6WzIsMTgxXSwxNDA6WzIsMTgxXSwxNDE6WzIsMTgxXSwxNDI6WzIsMTgxXSwxNDM6WzIsMTgxXSwxNDQ6WzIsMTgxXSwxNDU6WzIsMTgxXX0sezY6WzIsMTM0XSwyODpbMiwxMzRdLDI5OlsyLDEzNF0sNTc6WzIsMTM0XSw5MDpbMiwxMzRdLDk1OlsyLDEzNF19LHsxOlsyLDE3OF0sNjpbMiwxNzhdLDI4OlsyLDE3OF0sMjk6WzIsMTc4XSw1MjpbMiwxNzhdLDU3OlsyLDE3OF0sNjA6WzIsMTc4XSw3NjpbMiwxNzhdLDgxOlsyLDE3OF0sOTA6WzIsMTc4XSw5NTpbMiwxNzhdLDk3OlsyLDE3OF0sMTA2OlsyLDE3OF0sMTA3Ojg5LDEwODpbMiwxNzhdLDEwOTpbMiwxNzhdLDExMDpbMiwxNzhdLDExMzo5MCwxMTQ6WzIsMTc4XSwxMTU6NzMsMTIyOlsyLDE3OF0sMTMwOlsyLDE3OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE3OV0sNjpbMiwxNzldLDI4OlsyLDE3OV0sMjk6WzIsMTc5XSw1MjpbMiwxNzldLDU3OlsyLDE3OV0sNjA6WzIsMTc5XSw3NjpbMiwxNzldLDgxOlsyLDE3OV0sOTA6WzIsMTc5XSw5NTpbMiwxNzldLDk3OlsyLDE3OV0sMTA2OlsyLDE3OV0sMTA3Ojg5LDEwODpbMiwxNzldLDEwOTpbMiwxNzldLDExMDpbMiwxNzldLDExMzo5MCwxMTQ6WzIsMTc5XSwxMTU6NzMsMTIyOlsyLDE3OV0sMTMwOlsyLDE3OV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsyLDEwMF0sMjg6WzIsMTAwXSwyOTpbMiwxMDBdLDU3OlsyLDEwMF0sODE6WzIsMTAwXX1dLFxuZGVmYXVsdEFjdGlvbnM6IHs2NDpbMiw1NF0sNjU6WzIsNTVdLDk2OlsyLDExNV0sMjA0OlsyLDk0XX0sXG5wYXJzZUVycm9yOiBmdW5jdGlvbiBwYXJzZUVycm9yKHN0ciwgaGFzaCkge1xuICAgIGlmIChoYXNoLnJlY292ZXJhYmxlKSB7XG4gICAgICAgIHRoaXMudHJhY2Uoc3RyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3RyKTtcbiAgICB9XG59LFxucGFyc2U6IGZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLCBzdGFjayA9IFswXSwgdnN0YWNrID0gW251bGxdLCBsc3RhY2sgPSBbXSwgdGFibGUgPSB0aGlzLnRhYmxlLCB5eXRleHQgPSAnJywgeXlsaW5lbm8gPSAwLCB5eWxlbmcgPSAwLCByZWNvdmVyaW5nID0gMCwgVEVSUk9SID0gMiwgRU9GID0gMTtcbiAgICB2YXIgYXJncyA9IGxzdGFjay5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdGhpcy5sZXhlci5zZXRJbnB1dChpbnB1dCk7XG4gICAgdGhpcy5sZXhlci55eSA9IHRoaXMueXk7XG4gICAgdGhpcy55eS5sZXhlciA9IHRoaXMubGV4ZXI7XG4gICAgdGhpcy55eS5wYXJzZXIgPSB0aGlzO1xuICAgIGlmICh0eXBlb2YgdGhpcy5sZXhlci55eWxsb2MgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5sZXhlci55eWxsb2MgPSB7fTtcbiAgICB9XG4gICAgdmFyIHl5bG9jID0gdGhpcy5sZXhlci55eWxsb2M7XG4gICAgbHN0YWNrLnB1c2goeXlsb2MpO1xuICAgIHZhciByYW5nZXMgPSB0aGlzLmxleGVyLm9wdGlvbnMgJiYgdGhpcy5sZXhlci5vcHRpb25zLnJhbmdlcztcbiAgICBpZiAodHlwZW9mIHRoaXMueXkucGFyc2VFcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3IgPSB0aGlzLnl5LnBhcnNlRXJyb3I7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9yID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLnBhcnNlRXJyb3I7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvcFN0YWNrKG4pIHtcbiAgICAgICAgc3RhY2subGVuZ3RoID0gc3RhY2subGVuZ3RoIC0gMiAqIG47XG4gICAgICAgIHZzdGFjay5sZW5ndGggPSB2c3RhY2subGVuZ3RoIC0gbjtcbiAgICAgICAgbHN0YWNrLmxlbmd0aCA9IGxzdGFjay5sZW5ndGggLSBuO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsZXgoKSB7XG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdG9rZW4gPSBzZWxmLmxleGVyLmxleCgpIHx8IEVPRjtcbiAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRva2VuID0gc2VsZi5zeW1ib2xzX1t0b2tlbl0gfHwgdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cbiAgICB2YXIgc3ltYm9sLCBwcmVFcnJvclN5bWJvbCwgc3RhdGUsIGFjdGlvbiwgYSwgciwgeXl2YWwgPSB7fSwgcCwgbGVuLCBuZXdTdGF0ZSwgZXhwZWN0ZWQ7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgc3RhdGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdEFjdGlvbnNbc3RhdGVdKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSB0aGlzLmRlZmF1bHRBY3Rpb25zW3N0YXRlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzeW1ib2wgPT09IG51bGwgfHwgdHlwZW9mIHN5bWJvbCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHN5bWJvbCA9IGxleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0aW9uID0gdGFibGVbc3RhdGVdICYmIHRhYmxlW3N0YXRlXVtzeW1ib2xdO1xuICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uID09PSAndW5kZWZpbmVkJyB8fCAhYWN0aW9uLmxlbmd0aCB8fCAhYWN0aW9uWzBdKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVyclN0ciA9ICcnO1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChwIGluIHRhYmxlW3N0YXRlXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXJtaW5hbHNfW3BdICYmIHAgPiBURVJST1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkLnB1c2goJ1xcJycgKyB0aGlzLnRlcm1pbmFsc19bcF0gKyAnXFwnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGV4ZXIuc2hvd1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGVyclN0ciA9ICdQYXJzZSBlcnJvciBvbiBsaW5lICcgKyAoeXlsaW5lbm8gKyAxKSArICc6XFxuJyArIHRoaXMubGV4ZXIuc2hvd1Bvc2l0aW9uKCkgKyAnXFxuRXhwZWN0aW5nICcgKyBleHBlY3RlZC5qb2luKCcsICcpICsgJywgZ290IFxcJycgKyAodGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sKSArICdcXCcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVyclN0ciA9ICdQYXJzZSBlcnJvciBvbiBsaW5lICcgKyAoeXlsaW5lbm8gKyAxKSArICc6IFVuZXhwZWN0ZWQgJyArIChzeW1ib2wgPT0gRU9GID8gJ2VuZCBvZiBpbnB1dCcgOiAnXFwnJyArICh0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wpICsgJ1xcJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlRXJyb3IoZXJyU3RyLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMubGV4ZXIubWF0Y2gsXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wsXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IHRoaXMubGV4ZXIueXlsaW5lbm8sXG4gICAgICAgICAgICAgICAgICAgIGxvYzogeXlsb2MsXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aW9uWzBdIGluc3RhbmNlb2YgQXJyYXkgJiYgYWN0aW9uLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGFyc2UgRXJyb3I6IG11bHRpcGxlIGFjdGlvbnMgcG9zc2libGUgYXQgc3RhdGU6ICcgKyBzdGF0ZSArICcsIHRva2VuOiAnICsgc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGFjdGlvblswXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBzdGFjay5wdXNoKHN5bWJvbCk7XG4gICAgICAgICAgICB2c3RhY2sucHVzaCh0aGlzLmxleGVyLnl5dGV4dCk7XG4gICAgICAgICAgICBsc3RhY2sucHVzaCh0aGlzLmxleGVyLnl5bGxvYyk7XG4gICAgICAgICAgICBzdGFjay5wdXNoKGFjdGlvblsxXSk7XG4gICAgICAgICAgICBzeW1ib2wgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCFwcmVFcnJvclN5bWJvbCkge1xuICAgICAgICAgICAgICAgIHl5bGVuZyA9IHRoaXMubGV4ZXIueXlsZW5nO1xuICAgICAgICAgICAgICAgIHl5dGV4dCA9IHRoaXMubGV4ZXIueXl0ZXh0O1xuICAgICAgICAgICAgICAgIHl5bGluZW5vID0gdGhpcy5sZXhlci55eWxpbmVubztcbiAgICAgICAgICAgICAgICB5eWxvYyA9IHRoaXMubGV4ZXIueXlsbG9jO1xuICAgICAgICAgICAgICAgIGlmIChyZWNvdmVyaW5nID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZWNvdmVyaW5nLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzeW1ib2wgPSBwcmVFcnJvclN5bWJvbDtcbiAgICAgICAgICAgICAgICBwcmVFcnJvclN5bWJvbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgbGVuID0gdGhpcy5wcm9kdWN0aW9uc19bYWN0aW9uWzFdXVsxXTtcbiAgICAgICAgICAgIHl5dmFsLiQgPSB2c3RhY2tbdnN0YWNrLmxlbmd0aCAtIGxlbl07XG4gICAgICAgICAgICB5eXZhbC5fJCA9IHtcbiAgICAgICAgICAgICAgICBmaXJzdF9saW5lOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLmZpcnN0X2xpbmUsXG4gICAgICAgICAgICAgICAgbGFzdF9saW5lOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLmxhc3RfbGluZSxcbiAgICAgICAgICAgICAgICBmaXJzdF9jb2x1bW46IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gKGxlbiB8fCAxKV0uZmlyc3RfY29sdW1uLFxuICAgICAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLmxhc3RfY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHJhbmdlcykge1xuICAgICAgICAgICAgICAgIHl5dmFsLl8kLnJhbmdlID0gW1xuICAgICAgICAgICAgICAgICAgICBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLnJhbmdlWzBdLFxuICAgICAgICAgICAgICAgICAgICBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLnJhbmdlWzFdXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIgPSB0aGlzLnBlcmZvcm1BY3Rpb24uYXBwbHkoeXl2YWwsIFtcbiAgICAgICAgICAgICAgICB5eXRleHQsXG4gICAgICAgICAgICAgICAgeXlsZW5nLFxuICAgICAgICAgICAgICAgIHl5bGluZW5vLFxuICAgICAgICAgICAgICAgIHRoaXMueXksXG4gICAgICAgICAgICAgICAgYWN0aW9uWzFdLFxuICAgICAgICAgICAgICAgIHZzdGFjayxcbiAgICAgICAgICAgICAgICBsc3RhY2tcbiAgICAgICAgICAgIF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrLnNsaWNlKDAsIC0xICogbGVuICogMik7XG4gICAgICAgICAgICAgICAgdnN0YWNrID0gdnN0YWNrLnNsaWNlKDAsIC0xICogbGVuKTtcbiAgICAgICAgICAgICAgICBsc3RhY2sgPSBsc3RhY2suc2xpY2UoMCwgLTEgKiBsZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhY2sucHVzaCh0aGlzLnByb2R1Y3Rpb25zX1thY3Rpb25bMV1dWzBdKTtcbiAgICAgICAgICAgIHZzdGFjay5wdXNoKHl5dmFsLiQpO1xuICAgICAgICAgICAgbHN0YWNrLnB1c2goeXl2YWwuXyQpO1xuICAgICAgICAgICAgbmV3U3RhdGUgPSB0YWJsZVtzdGFja1tzdGFjay5sZW5ndGggLSAyXV1bc3RhY2tbc3RhY2subGVuZ3RoIC0gMV1dO1xuICAgICAgICAgICAgc3RhY2sucHVzaChuZXdTdGF0ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59fTtcblxuZnVuY3Rpb24gUGFyc2VyICgpIHtcbiAgdGhpcy55eSA9IHt9O1xufVxuUGFyc2VyLnByb3RvdHlwZSA9IHBhcnNlcjtwYXJzZXIuUGFyc2VyID0gUGFyc2VyO1xucmV0dXJuIG5ldyBQYXJzZXI7XG59KSgpO1xuXG5cbmlmICh0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG5leHBvcnRzLnBhcnNlciA9IHBhcnNlcjtcbmV4cG9ydHMuUGFyc2VyID0gcGFyc2VyLlBhcnNlcjtcbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXJzZXIucGFyc2UuYXBwbHkocGFyc2VyLCBhcmd1bWVudHMpOyB9O1xuZXhwb3J0cy5tYWluID0gZnVuY3Rpb24gY29tbW9uanNNYWluKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3NbMV0pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzYWdlOiAnK2FyZ3NbMF0rJyBGSUxFJyk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IHJlcXVpcmUoJ2ZzJykucmVhZEZpbGVTeW5jKHJlcXVpcmUoJ3BhdGgnKS5ub3JtYWxpemUoYXJnc1sxXSksIFwidXRmOFwiKTtcbiAgICByZXR1cm4gZXhwb3J0cy5wYXJzZXIucGFyc2Uoc291cmNlKTtcbn07XG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgcmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcbiAgZXhwb3J0cy5tYWluKHByb2Nlc3MuYXJndi5zbGljZSgxKSk7XG59XG59IiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIENvZmZlZVNjcmlwdCwgTW9kdWxlLCBiaW5hcnksIGNoaWxkX3Byb2Nlc3MsIGV4dCwgZmluZEV4dGVuc2lvbiwgZm9yaywgaGVscGVycywgbG9hZEZpbGUsIHBhdGgsIF9pLCBfbGVuLCBfcmVmO1xuXG4gIENvZmZlZVNjcmlwdCA9IHJlcXVpcmUoJy4vY29mZmVlLXNjcmlwdCcpO1xuXG4gIGNoaWxkX3Byb2Nlc3MgPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJyk7XG5cbiAgaGVscGVycyA9IHJlcXVpcmUoJy4vaGVscGVycycpO1xuXG4gIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbiAgbG9hZEZpbGUgPSBmdW5jdGlvbihtb2R1bGUsIGZpbGVuYW1lKSB7XG4gICAgdmFyIGFuc3dlcjtcbiAgICBhbnN3ZXIgPSBDb2ZmZWVTY3JpcHQuX2NvbXBpbGVGaWxlKGZpbGVuYW1lLCBmYWxzZSwge1xuICAgICAgcnVudGltZTogXCJpbnRlcnBcIlxuICAgIH0pO1xuICAgIHJldHVybiBtb2R1bGUuX2NvbXBpbGUoYW5zd2VyLCBmaWxlbmFtZSk7XG4gIH07XG5cbiAgaWYgKHJlcXVpcmUuZXh0ZW5zaW9ucykge1xuICAgIF9yZWYgPSBDb2ZmZWVTY3JpcHQuRklMRV9FWFRFTlNJT05TO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgZXh0ID0gX3JlZltfaV07XG4gICAgICByZXF1aXJlLmV4dGVuc2lvbnNbZXh0XSA9IGxvYWRGaWxlO1xuICAgIH1cbiAgICBNb2R1bGUgPSByZXF1aXJlKCdtb2R1bGUnKTtcbiAgICBmaW5kRXh0ZW5zaW9uID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICAgIHZhciBjdXJFeHRlbnNpb24sIGV4dGVuc2lvbnM7XG4gICAgICBleHRlbnNpb25zID0gcGF0aC5iYXNlbmFtZShmaWxlbmFtZSkuc3BsaXQoJy4nKTtcbiAgICAgIGlmIChleHRlbnNpb25zWzBdID09PSAnJykge1xuICAgICAgICBleHRlbnNpb25zLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgICB3aGlsZSAoZXh0ZW5zaW9ucy5zaGlmdCgpKSB7XG4gICAgICAgIGN1ckV4dGVuc2lvbiA9ICcuJyArIGV4dGVuc2lvbnMuam9pbignLicpO1xuICAgICAgICBpZiAoTW9kdWxlLl9leHRlbnNpb25zW2N1ckV4dGVuc2lvbl0pIHtcbiAgICAgICAgICByZXR1cm4gY3VyRXh0ZW5zaW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJy5qcyc7XG4gICAgfTtcbiAgICBNb2R1bGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgICAgdmFyIGV4dGVuc2lvbjtcbiAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgIHRoaXMucGF0aHMgPSBNb2R1bGUuX25vZGVNb2R1bGVQYXRocyhwYXRoLmRpcm5hbWUoZmlsZW5hbWUpKTtcbiAgICAgIGV4dGVuc2lvbiA9IGZpbmRFeHRlbnNpb24oZmlsZW5hbWUpO1xuICAgICAgTW9kdWxlLl9leHRlbnNpb25zW2V4dGVuc2lvbl0odGhpcywgZmlsZW5hbWUpO1xuICAgICAgcmV0dXJuIHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKGNoaWxkX3Byb2Nlc3MpIHtcbiAgICBmb3JrID0gY2hpbGRfcHJvY2Vzcy5mb3JrO1xuICAgIGJpbmFyeSA9IHJlcXVpcmUucmVzb2x2ZSgnLi4vLi4vYmluL2NvZmZlZScpO1xuICAgIGNoaWxkX3Byb2Nlc3MuZm9yayA9IGZ1bmN0aW9uKHBhdGgsIGFyZ3MsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChoZWxwZXJzLmlzQ29mZmVlKHBhdGgpKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcmdzKSkge1xuICAgICAgICAgIG9wdGlvbnMgPSBhcmdzIHx8IHt9O1xuICAgICAgICAgIGFyZ3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBhcmdzID0gW3BhdGhdLmNvbmNhdChhcmdzKTtcbiAgICAgICAgcGF0aCA9IGJpbmFyeTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3JrKHBhdGgsIGFyZ3MsIG9wdGlvbnMpO1xuICAgIH07XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBCQUxBTkNFRF9QQUlSUywgQ0FMTF9DTE9TRVJTLCBFWFBSRVNTSU9OX0NMT1NFLCBFWFBSRVNTSU9OX0VORCwgRVhQUkVTU0lPTl9TVEFSVCwgSU1QTElDSVRfQ0FMTCwgSU1QTElDSVRfRU5ELCBJTVBMSUNJVF9GVU5DLCBJTVBMSUNJVF9VTlNQQUNFRF9DQUxMLCBJTlZFUlNFUywgTElORUJSRUFLUywgU0lOR0xFX0NMT1NFUlMsIFNJTkdMRV9MSU5FUlMsIGdlbmVyYXRlLCBsZWZ0LCByaXRlLCBfaSwgX2xlbiwgX3JlZixcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfSxcbiAgICBfX3NsaWNlID0gW10uc2xpY2U7XG5cbiAgZ2VuZXJhdGUgPSBmdW5jdGlvbih0YWcsIHZhbHVlLCBvcmlnaW4pIHtcbiAgICB2YXIgdG9rO1xuICAgIHRvayA9IFt0YWcsIHZhbHVlXTtcbiAgICB0b2suZ2VuZXJhdGVkID0gdHJ1ZTtcbiAgICBpZiAob3JpZ2luKSB7XG4gICAgICB0b2sub3JpZ2luID0gb3JpZ2luO1xuICAgIH1cbiAgICByZXR1cm4gdG9rO1xuICB9O1xuXG4gIGV4cG9ydHMuUmV3cml0ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gUmV3cml0ZXIoKSB7fVxuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLnJld3JpdGUgPSBmdW5jdGlvbih0b2tlbnMpIHtcbiAgICAgIHRoaXMudG9rZW5zID0gdG9rZW5zO1xuICAgICAgdGhpcy5yZW1vdmVMZWFkaW5nTmV3bGluZXMoKTtcbiAgICAgIHRoaXMuY2xvc2VPcGVuQ2FsbHMoKTtcbiAgICAgIHRoaXMuY2xvc2VPcGVuSW5kZXhlcygpO1xuICAgICAgdGhpcy5ub3JtYWxpemVMaW5lcygpO1xuICAgICAgdGhpcy50YWdQb3N0Zml4Q29uZGl0aW9uYWxzKCk7XG4gICAgICB0aGlzLmFkZEltcGxpY2l0QnJhY2VzQW5kUGFyZW5zKCk7XG4gICAgICB0aGlzLmFkZExvY2F0aW9uRGF0YVRvR2VuZXJhdGVkVG9rZW5zKCk7XG4gICAgICByZXR1cm4gdGhpcy50b2tlbnM7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5zY2FuVG9rZW5zID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgIHZhciBpLCB0b2tlbiwgdG9rZW5zO1xuICAgICAgdG9rZW5zID0gdGhpcy50b2tlbnM7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlICh0b2tlbiA9IHRva2Vuc1tpXSkge1xuICAgICAgICBpICs9IGJsb2NrLmNhbGwodGhpcywgdG9rZW4sIGksIHRva2Vucyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmRldGVjdEVuZCA9IGZ1bmN0aW9uKGksIGNvbmRpdGlvbiwgYWN0aW9uKSB7XG4gICAgICB2YXIgbGV2ZWxzLCB0b2tlbiwgdG9rZW5zLCBfcmVmLCBfcmVmMTtcbiAgICAgIHRva2VucyA9IHRoaXMudG9rZW5zO1xuICAgICAgbGV2ZWxzID0gMDtcbiAgICAgIHdoaWxlICh0b2tlbiA9IHRva2Vuc1tpXSkge1xuICAgICAgICBpZiAobGV2ZWxzID09PSAwICYmIGNvbmRpdGlvbi5jYWxsKHRoaXMsIHRva2VuLCBpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24uY2FsbCh0aGlzLCB0b2tlbiwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0b2tlbiB8fCBsZXZlbHMgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGlvbi5jYWxsKHRoaXMsIHRva2VuLCBpIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9yZWYgPSB0b2tlblswXSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9TVEFSVCwgX3JlZikgPj0gMCkge1xuICAgICAgICAgIGxldmVscyArPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKF9yZWYxID0gdG9rZW5bMF0sIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fRU5ELCBfcmVmMSkgPj0gMCkge1xuICAgICAgICAgIGxldmVscyAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIGkgKz0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpIC0gMTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLnJlbW92ZUxlYWRpbmdOZXdsaW5lcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIHRhZywgX2ksIF9sZW4sIF9yZWY7XG4gICAgICBfcmVmID0gdGhpcy50b2tlbnM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICB0YWcgPSBfcmVmW2ldWzBdO1xuICAgICAgICBpZiAodGFnICE9PSAnVEVSTUlOQVRPUicpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zLnNwbGljZSgwLCBpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmNsb3NlT3BlbkNhbGxzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWN0aW9uLCBjb25kaXRpb247XG4gICAgICBjb25kaXRpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgcmV0dXJuICgoX3JlZiA9IHRva2VuWzBdKSA9PT0gJyknIHx8IF9yZWYgPT09ICdDQUxMX0VORCcpIHx8IHRva2VuWzBdID09PSAnT1VUREVOVCcgJiYgdGhpcy50YWcoaSAtIDEpID09PSAnKSc7XG4gICAgICB9O1xuICAgICAgYWN0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zW3Rva2VuWzBdID09PSAnT1VUREVOVCcgPyBpIC0gMSA6IGldWzBdID0gJ0NBTExfRU5EJztcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIGlmICh0b2tlblswXSA9PT0gJ0NBTExfU1RBUlQnKSB7XG4gICAgICAgICAgdGhpcy5kZXRlY3RFbmQoaSArIDEsIGNvbmRpdGlvbiwgYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuY2xvc2VPcGVuSW5kZXhlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFjdGlvbiwgY29uZGl0aW9uO1xuICAgICAgY29uZGl0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgIHJldHVybiAoX3JlZiA9IHRva2VuWzBdKSA9PT0gJ10nIHx8IF9yZWYgPT09ICdJTkRFWF9FTkQnO1xuICAgICAgfTtcbiAgICAgIGFjdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHJldHVybiB0b2tlblswXSA9ICdJTkRFWF9FTkQnO1xuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgaWYgKHRva2VuWzBdID09PSAnSU5ERVhfU1RBUlQnKSB7XG4gICAgICAgICAgdGhpcy5kZXRlY3RFbmQoaSArIDEsIGNvbmRpdGlvbiwgYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUubWF0Y2hUYWdzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZnV6eiwgaSwgaiwgcGF0dGVybiwgX2ksIF9yZWYsIF9yZWYxO1xuICAgICAgaSA9IGFyZ3VtZW50c1swXSwgcGF0dGVybiA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgICBmdXp6ID0gMDtcbiAgICAgIGZvciAoaiA9IF9pID0gMCwgX3JlZiA9IHBhdHRlcm4ubGVuZ3RoOyAwIDw9IF9yZWYgPyBfaSA8IF9yZWYgOiBfaSA+IF9yZWY7IGogPSAwIDw9IF9yZWYgPyArK19pIDogLS1faSkge1xuICAgICAgICB3aGlsZSAodGhpcy50YWcoaSArIGogKyBmdXp6KSA9PT0gJ0hFUkVDT01NRU5UJykge1xuICAgICAgICAgIGZ1enogKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0dGVybltqXSA9PSBudWxsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXR0ZXJuW2pdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHBhdHRlcm5bal0gPSBbcGF0dGVybltqXV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9yZWYxID0gdGhpcy50YWcoaSArIGogKyBmdXp6KSwgX19pbmRleE9mLmNhbGwocGF0dGVybltqXSwgX3JlZjEpIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5sb29rc09iamVjdGlzaCA9IGZ1bmN0aW9uKGopIHtcbiAgICAgIHJldHVybiB0aGlzLm1hdGNoVGFncyhqLCAnQCcsIG51bGwsICc6JykgfHwgdGhpcy5tYXRjaFRhZ3MoaiwgbnVsbCwgJzonKTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmZpbmRUYWdzQmFja3dhcmRzID0gZnVuY3Rpb24oaSwgdGFncykge1xuICAgICAgdmFyIGJhY2tTdGFjaywgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuICAgICAgYmFja1N0YWNrID0gW107XG4gICAgICB3aGlsZSAoaSA+PSAwICYmIChiYWNrU3RhY2subGVuZ3RoIHx8IChfcmVmMiA9IHRoaXMudGFnKGkpLCBfX2luZGV4T2YuY2FsbCh0YWdzLCBfcmVmMikgPCAwKSAmJiAoKF9yZWYzID0gdGhpcy50YWcoaSksIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fU1RBUlQsIF9yZWYzKSA8IDApIHx8IHRoaXMudG9rZW5zW2ldLmdlbmVyYXRlZCkgJiYgKF9yZWY0ID0gdGhpcy50YWcoaSksIF9faW5kZXhPZi5jYWxsKExJTkVCUkVBS1MsIF9yZWY0KSA8IDApKSkge1xuICAgICAgICBpZiAoX3JlZiA9IHRoaXMudGFnKGkpLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX0VORCwgX3JlZikgPj0gMCkge1xuICAgICAgICAgIGJhY2tTdGFjay5wdXNoKHRoaXMudGFnKGkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9yZWYxID0gdGhpcy50YWcoaSksIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fU1RBUlQsIF9yZWYxKSA+PSAwKSAmJiBiYWNrU3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgYmFja1N0YWNrLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGkgLT0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVmNSA9IHRoaXMudGFnKGkpLCBfX2luZGV4T2YuY2FsbCh0YWdzLCBfcmVmNSkgPj0gMDtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmFkZEltcGxpY2l0QnJhY2VzQW5kUGFyZW5zID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3RhY2s7XG4gICAgICBzdGFjayA9IFtdO1xuICAgICAgcmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbih0b2tlbiwgaSwgdG9rZW5zKSB7XG4gICAgICAgIHZhciBlbmRJbXBsaWNpdENhbGwsIGVuZEltcGxpY2l0T2JqZWN0LCBmb3J3YXJkLCBpbkltcGxpY2l0LCBpbkltcGxpY2l0Q2FsbCwgaW5JbXBsaWNpdENvbnRyb2wsIGluSW1wbGljaXRPYmplY3QsIG5ld0xpbmUsIG5leHRUYWcsIG9mZnNldCwgcHJldlRhZywgcHJldlRva2VuLCByZXQsIHMsIHNhbWVMaW5lLCBzdGFja0lkeCwgc3RhY2tUYWcsIHN0YWNrVG9wLCBzdGFydElkeCwgc3RhcnRJbXBsaWNpdENhbGwsIHN0YXJ0SW1wbGljaXRPYmplY3QsIHN0YXJ0c0xpbmUsIHRhZywgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuICAgICAgICB0YWcgPSB0b2tlblswXTtcbiAgICAgICAgcHJldlRhZyA9IChwcmV2VG9rZW4gPSBpID4gMCA/IHRva2Vuc1tpIC0gMV0gOiBbXSlbMF07XG4gICAgICAgIG5leHRUYWcgPSAoaSA8IHRva2Vucy5sZW5ndGggLSAxID8gdG9rZW5zW2kgKyAxXSA6IFtdKVswXTtcbiAgICAgICAgc3RhY2tUb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIH07XG4gICAgICAgIHN0YXJ0SWR4ID0gaTtcbiAgICAgICAgZm9yd2FyZCA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICByZXR1cm4gaSAtIHN0YXJ0SWR4ICsgbjtcbiAgICAgICAgfTtcbiAgICAgICAgaW5JbXBsaWNpdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfcmVmLCBfcmVmMTtcbiAgICAgICAgICByZXR1cm4gKF9yZWYgPSBzdGFja1RvcCgpKSAhPSBudWxsID8gKF9yZWYxID0gX3JlZlsyXSkgIT0gbnVsbCA/IF9yZWYxLm91cnMgOiB2b2lkIDAgOiB2b2lkIDA7XG4gICAgICAgIH07XG4gICAgICAgIGluSW1wbGljaXRDYWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgICAgcmV0dXJuIGluSW1wbGljaXQoKSAmJiAoKF9yZWYgPSBzdGFja1RvcCgpKSAhPSBudWxsID8gX3JlZlswXSA6IHZvaWQgMCkgPT09ICcoJztcbiAgICAgICAgfTtcbiAgICAgICAgaW5JbXBsaWNpdE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgIHJldHVybiBpbkltcGxpY2l0KCkgJiYgKChfcmVmID0gc3RhY2tUb3AoKSkgIT0gbnVsbCA/IF9yZWZbMF0gOiB2b2lkIDApID09PSAneyc7XG4gICAgICAgIH07XG4gICAgICAgIGluSW1wbGljaXRDb250cm9sID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgICAgcmV0dXJuIGluSW1wbGljaXQgJiYgKChfcmVmID0gc3RhY2tUb3AoKSkgIT0gbnVsbCA/IF9yZWZbMF0gOiB2b2lkIDApID09PSAnQ09OVFJPTCc7XG4gICAgICAgIH07XG4gICAgICAgIHN0YXJ0SW1wbGljaXRDYWxsID0gZnVuY3Rpb24oaikge1xuICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgaWR4ID0gaiAhPSBudWxsID8gaiA6IGk7XG4gICAgICAgICAgc3RhY2sucHVzaChbXG4gICAgICAgICAgICAnKCcsIGlkeCwge1xuICAgICAgICAgICAgICBvdXJzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSk7XG4gICAgICAgICAgdG9rZW5zLnNwbGljZShpZHgsIDAsIGdlbmVyYXRlKCdDQUxMX1NUQVJUJywgJygnKSk7XG4gICAgICAgICAgaWYgKGogPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGkgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGVuZEltcGxpY2l0Q2FsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgIHRva2Vucy5zcGxpY2UoaSwgMCwgZ2VuZXJhdGUoJ0NBTExfRU5EJywgJyknKSk7XG4gICAgICAgICAgcmV0dXJuIGkgKz0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgc3RhcnRJbXBsaWNpdE9iamVjdCA9IGZ1bmN0aW9uKGosIHN0YXJ0c0xpbmUpIHtcbiAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgIGlmIChzdGFydHNMaW5lID09IG51bGwpIHtcbiAgICAgICAgICAgIHN0YXJ0c0xpbmUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZHggPSBqICE9IG51bGwgPyBqIDogaTtcbiAgICAgICAgICBzdGFjay5wdXNoKFtcbiAgICAgICAgICAgICd7JywgaWR4LCB7XG4gICAgICAgICAgICAgIHNhbWVMaW5lOiB0cnVlLFxuICAgICAgICAgICAgICBzdGFydHNMaW5lOiBzdGFydHNMaW5lLFxuICAgICAgICAgICAgICBvdXJzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSk7XG4gICAgICAgICAgdG9rZW5zLnNwbGljZShpZHgsIDAsIGdlbmVyYXRlKCd7JywgZ2VuZXJhdGUobmV3IFN0cmluZygneycpKSwgdG9rZW4pKTtcbiAgICAgICAgICBpZiAoaiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaSArPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZW5kSW1wbGljaXRPYmplY3QgPSBmdW5jdGlvbihqKSB7XG4gICAgICAgICAgaiA9IGogIT0gbnVsbCA/IGogOiBpO1xuICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgIHRva2Vucy5zcGxpY2UoaiwgMCwgZ2VuZXJhdGUoJ30nLCAnfScsIHRva2VuKSk7XG4gICAgICAgICAgcmV0dXJuIGkgKz0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGluSW1wbGljaXRDYWxsKCkgJiYgKHRhZyA9PT0gJ0lGJyB8fCB0YWcgPT09ICdUUlknIHx8IHRhZyA9PT0gJ0ZJTkFMTFknIHx8IHRhZyA9PT0gJ0NBVENIJyB8fCB0YWcgPT09ICdDTEFTUycgfHwgdGFnID09PSAnU1dJVENIJykpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKFtcbiAgICAgICAgICAgICdDT05UUk9MJywgaSwge1xuICAgICAgICAgICAgICBvdXJzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSk7XG4gICAgICAgICAgcmV0dXJuIGZvcndhcmQoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZyA9PT0gJ0lOREVOVCcgJiYgaW5JbXBsaWNpdCgpKSB7XG4gICAgICAgICAgaWYgKHByZXZUYWcgIT09ICc9PicgJiYgcHJldlRhZyAhPT0gJy0+JyAmJiBwcmV2VGFnICE9PSAnWycgJiYgcHJldlRhZyAhPT0gJygnICYmIHByZXZUYWcgIT09ICcsJyAmJiBwcmV2VGFnICE9PSAneycgJiYgcHJldlRhZyAhPT0gJ1RSWScgJiYgcHJldlRhZyAhPT0gJ0VMU0UnICYmIHByZXZUYWcgIT09ICc9Jykge1xuICAgICAgICAgICAgd2hpbGUgKGluSW1wbGljaXRDYWxsKCkpIHtcbiAgICAgICAgICAgICAgZW5kSW1wbGljaXRDYWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbkltcGxpY2l0Q29udHJvbCgpKSB7XG4gICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhY2sucHVzaChbdGFnLCBpXSk7XG4gICAgICAgICAgcmV0dXJuIGZvcndhcmQoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fU1RBUlQsIHRhZykgPj0gMCkge1xuICAgICAgICAgIHN0YWNrLnB1c2goW3RhZywgaV0pO1xuICAgICAgICAgIHJldHVybiBmb3J3YXJkKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX0VORCwgdGFnKSA+PSAwKSB7XG4gICAgICAgICAgd2hpbGUgKGluSW1wbGljaXQoKSkge1xuICAgICAgICAgICAgaWYgKGluSW1wbGljaXRDYWxsKCkpIHtcbiAgICAgICAgICAgICAgZW5kSW1wbGljaXRDYWxsKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluSW1wbGljaXRPYmplY3QoKSkge1xuICAgICAgICAgICAgICBlbmRJbXBsaWNpdE9iamVjdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX19pbmRleE9mLmNhbGwoSU1QTElDSVRfRlVOQywgdGFnKSA+PSAwICYmIHRva2VuLnNwYWNlZCAmJiAhdG9rZW4uc3RyaW5nRW5kIHx8IHRhZyA9PT0gJz8nICYmIGkgPiAwICYmICF0b2tlbnNbaSAtIDFdLnNwYWNlZCkgJiYgKF9faW5kZXhPZi5jYWxsKElNUExJQ0lUX0NBTEwsIG5leHRUYWcpID49IDAgfHwgX19pbmRleE9mLmNhbGwoSU1QTElDSVRfVU5TUEFDRURfQ0FMTCwgbmV4dFRhZykgPj0gMCAmJiAhKChfcmVmID0gdG9rZW5zW2kgKyAxXSkgIT0gbnVsbCA/IF9yZWYuc3BhY2VkIDogdm9pZCAwKSAmJiAhKChfcmVmMSA9IHRva2Vuc1tpICsgMV0pICE9IG51bGwgPyBfcmVmMS5uZXdMaW5lIDogdm9pZCAwKSkpIHtcbiAgICAgICAgICBpZiAodGFnID09PSAnPycpIHtcbiAgICAgICAgICAgIHRhZyA9IHRva2VuWzBdID0gJ0ZVTkNfRVhJU1QnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFydEltcGxpY2l0Q2FsbChpICsgMSk7XG4gICAgICAgICAgcmV0ID0gZm9yd2FyZCgyKTtcbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbChJTVBMSUNJVF9GVU5DLCB0YWcpID49IDAgJiYgdGhpcy5tYXRjaFRhZ3MoaSArIDEsICdJTkRFTlQnLCBudWxsLCAnOicpICYmICF0aGlzLmZpbmRUYWdzQmFja3dhcmRzKGksIFsnQ0xBU1MnLCAnRVhURU5EUycsICdJRicsICdDQVRDSCcsICdTV0lUQ0gnLCAnTEVBRElOR19XSEVOJywgJ0ZPUicsICdXSElMRScsICdVTlRJTCddKSkge1xuICAgICAgICAgIHN0YXJ0SW1wbGljaXRDYWxsKGkgKyAxKTtcbiAgICAgICAgICBzdGFjay5wdXNoKFsnSU5ERU5UJywgaSArIDJdKTtcbiAgICAgICAgICByZXR1cm4gZm9yd2FyZCgzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnID09PSAnOicpIHtcbiAgICAgICAgICBpZiAodGhpcy50YWcoaSAtIDIpID09PSAnQCcpIHtcbiAgICAgICAgICAgIHMgPSBpIC0gMjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcyA9IGkgLSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aGlsZSAodGhpcy50YWcocyAtIDIpID09PSAnSEVSRUNPTU1FTlQnKSB7XG4gICAgICAgICAgICBzIC09IDI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuaW5zaWRlRm9yRGVjbGFyYXRpb24gPSBuZXh0VGFnID09PSAnRk9SJztcbiAgICAgICAgICBzdGFydHNMaW5lID0gcyA9PT0gMCB8fCAoX3JlZjIgPSB0aGlzLnRhZyhzIC0gMSksIF9faW5kZXhPZi5jYWxsKExJTkVCUkVBS1MsIF9yZWYyKSA+PSAwKSB8fCB0b2tlbnNbcyAtIDFdLm5ld0xpbmU7XG4gICAgICAgICAgaWYgKHN0YWNrVG9wKCkpIHtcbiAgICAgICAgICAgIF9yZWYzID0gc3RhY2tUb3AoKSwgc3RhY2tUYWcgPSBfcmVmM1swXSwgc3RhY2tJZHggPSBfcmVmM1sxXTtcbiAgICAgICAgICAgIGlmICgoc3RhY2tUYWcgPT09ICd7JyB8fCBzdGFja1RhZyA9PT0gJ0lOREVOVCcgJiYgdGhpcy50YWcoc3RhY2tJZHggLSAxKSA9PT0gJ3snKSAmJiAoc3RhcnRzTGluZSB8fCB0aGlzLnRhZyhzIC0gMSkgPT09ICcsJyB8fCB0aGlzLnRhZyhzIC0gMSkgPT09ICd7JykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZvcndhcmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXJ0SW1wbGljaXRPYmplY3QocywgISFzdGFydHNMaW5lKTtcbiAgICAgICAgICByZXR1cm4gZm9yd2FyZCgyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5JbXBsaWNpdE9iamVjdCgpICYmIF9faW5kZXhPZi5jYWxsKExJTkVCUkVBS1MsIHRhZykgPj0gMCkge1xuICAgICAgICAgIHN0YWNrVG9wKClbMl0uc2FtZUxpbmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBuZXdMaW5lID0gcHJldlRhZyA9PT0gJ09VVERFTlQnIHx8IHByZXZUb2tlbi5uZXdMaW5lO1xuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwoSU1QTElDSVRfRU5ELCB0YWcpID49IDAgfHwgX19pbmRleE9mLmNhbGwoQ0FMTF9DTE9TRVJTLCB0YWcpID49IDAgJiYgbmV3TGluZSkge1xuICAgICAgICAgIHdoaWxlIChpbkltcGxpY2l0KCkpIHtcbiAgICAgICAgICAgIF9yZWY0ID0gc3RhY2tUb3AoKSwgc3RhY2tUYWcgPSBfcmVmNFswXSwgc3RhY2tJZHggPSBfcmVmNFsxXSwgKF9yZWY1ID0gX3JlZjRbMl0sIHNhbWVMaW5lID0gX3JlZjUuc2FtZUxpbmUsIHN0YXJ0c0xpbmUgPSBfcmVmNS5zdGFydHNMaW5lKTtcbiAgICAgICAgICAgIGlmIChpbkltcGxpY2l0Q2FsbCgpICYmIHByZXZUYWcgIT09ICcsJykge1xuICAgICAgICAgICAgICBlbmRJbXBsaWNpdENhbGwoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5JbXBsaWNpdE9iamVjdCgpICYmICF0aGlzLmluc2lkZUZvckRlY2xhcmF0aW9uICYmIHNhbWVMaW5lICYmIHRhZyAhPT0gJ1RFUk1JTkFUT1InICYmIHByZXZUYWcgIT09ICc6JyAmJiBlbmRJbXBsaWNpdE9iamVjdCgpKSB7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5JbXBsaWNpdE9iamVjdCgpICYmIHRhZyA9PT0gJ1RFUk1JTkFUT1InICYmIHByZXZUYWcgIT09ICcsJyAmJiAhKHN0YXJ0c0xpbmUgJiYgdGhpcy5sb29rc09iamVjdGlzaChpICsgMSkpKSB7XG4gICAgICAgICAgICAgIGVuZEltcGxpY2l0T2JqZWN0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZyA9PT0gJywnICYmICF0aGlzLmxvb2tzT2JqZWN0aXNoKGkgKyAxKSAmJiBpbkltcGxpY2l0T2JqZWN0KCkgJiYgIXRoaXMuaW5zaWRlRm9yRGVjbGFyYXRpb24gJiYgKG5leHRUYWcgIT09ICdURVJNSU5BVE9SJyB8fCAhdGhpcy5sb29rc09iamVjdGlzaChpICsgMikpKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gbmV4dFRhZyA9PT0gJ09VVERFTlQnID8gMSA6IDA7XG4gICAgICAgICAgd2hpbGUgKGluSW1wbGljaXRPYmplY3QoKSkge1xuICAgICAgICAgICAgZW5kSW1wbGljaXRPYmplY3QoaSArIG9mZnNldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3J3YXJkKDEpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5hZGRMb2NhdGlvbkRhdGFUb0dlbmVyYXRlZFRva2VucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbih0b2tlbiwgaSwgdG9rZW5zKSB7XG4gICAgICAgIHZhciBjb2x1bW4sIGxpbmUsIG5leHRMb2NhdGlvbiwgcHJldkxvY2F0aW9uLCBfcmVmLCBfcmVmMTtcbiAgICAgICAgaWYgKHRva2VuWzJdKSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEodG9rZW4uZ2VuZXJhdGVkIHx8IHRva2VuLmV4cGxpY2l0KSkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlblswXSA9PT0gJ3snICYmIChuZXh0TG9jYXRpb24gPSAoX3JlZiA9IHRva2Vuc1tpICsgMV0pICE9IG51bGwgPyBfcmVmWzJdIDogdm9pZCAwKSkge1xuICAgICAgICAgIGxpbmUgPSBuZXh0TG9jYXRpb24uZmlyc3RfbGluZSwgY29sdW1uID0gbmV4dExvY2F0aW9uLmZpcnN0X2NvbHVtbjtcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2TG9jYXRpb24gPSAoX3JlZjEgPSB0b2tlbnNbaSAtIDFdKSAhPSBudWxsID8gX3JlZjFbMl0gOiB2b2lkIDApIHtcbiAgICAgICAgICBsaW5lID0gcHJldkxvY2F0aW9uLmxhc3RfbGluZSwgY29sdW1uID0gcHJldkxvY2F0aW9uLmxhc3RfY29sdW1uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmUgPSBjb2x1bW4gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRva2VuWzJdID0ge1xuICAgICAgICAgIGZpcnN0X2xpbmU6IGxpbmUsXG4gICAgICAgICAgZmlyc3RfY29sdW1uOiBjb2x1bW4sXG4gICAgICAgICAgbGFzdF9saW5lOiBsaW5lLFxuICAgICAgICAgIGxhc3RfY29sdW1uOiBjb2x1bW5cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLm5vcm1hbGl6ZUxpbmVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWN0aW9uLCBjb25kaXRpb24sIGluZGVudCwgb3V0ZGVudCwgc3RhcnRlcjtcbiAgICAgIHN0YXJ0ZXIgPSBpbmRlbnQgPSBvdXRkZW50ID0gbnVsbDtcbiAgICAgIGNvbmRpdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHZhciBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzO1xuICAgICAgICByZXR1cm4gdG9rZW5bMV0gIT09ICc7JyAmJiAoX3JlZiA9IHRva2VuWzBdLCBfX2luZGV4T2YuY2FsbChTSU5HTEVfQ0xPU0VSUywgX3JlZikgPj0gMCkgJiYgISh0b2tlblswXSA9PT0gJ1RFUk1JTkFUT1InICYmIChfcmVmMSA9IHRoaXMudGFnKGkgKyAxKSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9DTE9TRSwgX3JlZjEpID49IDApKSAmJiAhKHRva2VuWzBdID09PSAnRUxTRScgJiYgc3RhcnRlciAhPT0gJ1RIRU4nKSAmJiAhKCgoX3JlZjIgPSB0b2tlblswXSkgPT09ICdDQVRDSCcgfHwgX3JlZjIgPT09ICdGSU5BTExZJykgJiYgKHN0YXJ0ZXIgPT09ICctPicgfHwgc3RhcnRlciA9PT0gJz0+JykpIHx8IChfcmVmMyA9IHRva2VuWzBdLCBfX2luZGV4T2YuY2FsbChDQUxMX0NMT1NFUlMsIF9yZWYzKSA+PSAwKSAmJiB0aGlzLnRva2Vuc1tpIC0gMV0ubmV3TGluZTtcbiAgICAgIH07XG4gICAgICBhY3Rpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbnMuc3BsaWNlKCh0aGlzLnRhZyhpIC0gMSkgPT09ICcsJyA/IGkgLSAxIDogaSksIDAsIG91dGRlbnQpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24odG9rZW4sIGksIHRva2Vucykge1xuICAgICAgICB2YXIgaiwgdGFnLCBfaSwgX3JlZiwgX3JlZjEsIF9yZWYyO1xuICAgICAgICB0YWcgPSB0b2tlblswXTtcbiAgICAgICAgaWYgKHRhZyA9PT0gJ1RFUk1JTkFUT1InKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGFnKGkgKyAxKSA9PT0gJ0VMU0UnICYmIHRoaXMudGFnKGkgLSAxKSAhPT0gJ09VVERFTlQnKSB7XG4gICAgICAgICAgICB0b2tlbnMuc3BsaWNlLmFwcGx5KHRva2VucywgW2ksIDFdLmNvbmNhdChfX3NsaWNlLmNhbGwodGhpcy5pbmRlbnRhdGlvbigpKSkpO1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfcmVmID0gdGhpcy50YWcoaSArIDEpLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX0NMT1NFLCBfcmVmKSA+PSAwKSB7XG4gICAgICAgICAgICB0b2tlbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT09ICdDQVRDSCcpIHtcbiAgICAgICAgICBmb3IgKGogPSBfaSA9IDE7IF9pIDw9IDI7IGogPSArK19pKSB7XG4gICAgICAgICAgICBpZiAoISgoX3JlZjEgPSB0aGlzLnRhZyhpICsgaikpID09PSAnT1VUREVOVCcgfHwgX3JlZjEgPT09ICdURVJNSU5BVE9SJyB8fCBfcmVmMSA9PT0gJ0ZJTkFMTFknKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UuYXBwbHkodG9rZW5zLCBbaSArIGosIDBdLmNvbmNhdChfX3NsaWNlLmNhbGwodGhpcy5pbmRlbnRhdGlvbigpKSkpO1xuICAgICAgICAgICAgcmV0dXJuIDIgKyBqO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwoU0lOR0xFX0xJTkVSUywgdGFnKSA+PSAwICYmIHRoaXMudGFnKGkgKyAxKSAhPT0gJ0lOREVOVCcgJiYgISh0YWcgPT09ICdFTFNFJyAmJiB0aGlzLnRhZyhpICsgMSkgPT09ICdJRicpKSB7XG4gICAgICAgICAgc3RhcnRlciA9IHRhZztcbiAgICAgICAgICBfcmVmMiA9IHRoaXMuaW5kZW50YXRpb24odG9rZW5zW2ldKSwgaW5kZW50ID0gX3JlZjJbMF0sIG91dGRlbnQgPSBfcmVmMlsxXTtcbiAgICAgICAgICBpZiAoc3RhcnRlciA9PT0gJ1RIRU4nKSB7XG4gICAgICAgICAgICBpbmRlbnQuZnJvbVRoZW4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0b2tlbnMuc3BsaWNlKGkgKyAxLCAwLCBpbmRlbnQpO1xuICAgICAgICAgIHRoaXMuZGV0ZWN0RW5kKGkgKyAyLCBjb25kaXRpb24sIGFjdGlvbik7XG4gICAgICAgICAgaWYgKHRhZyA9PT0gJ1RIRU4nKSB7XG4gICAgICAgICAgICB0b2tlbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUudGFnUG9zdGZpeENvbmRpdGlvbmFscyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFjdGlvbiwgY29uZGl0aW9uLCBvcmlnaW5hbDtcbiAgICAgIG9yaWdpbmFsID0gbnVsbDtcbiAgICAgIGNvbmRpdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHZhciBwcmV2VGFnLCB0YWc7XG4gICAgICAgIHRhZyA9IHRva2VuWzBdO1xuICAgICAgICBwcmV2VGFnID0gdGhpcy50b2tlbnNbaSAtIDFdWzBdO1xuICAgICAgICByZXR1cm4gdGFnID09PSAnVEVSTUlOQVRPUicgfHwgKHRhZyA9PT0gJ0lOREVOVCcgJiYgX19pbmRleE9mLmNhbGwoU0lOR0xFX0xJTkVSUywgcHJldlRhZykgPCAwKTtcbiAgICAgIH07XG4gICAgICBhY3Rpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICBpZiAodG9rZW5bMF0gIT09ICdJTkRFTlQnIHx8ICh0b2tlbi5nZW5lcmF0ZWQgJiYgIXRva2VuLmZyb21UaGVuKSkge1xuICAgICAgICAgIHJldHVybiBvcmlnaW5hbFswXSA9ICdQT1NUXycgKyBvcmlnaW5hbFswXTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgaWYgKHRva2VuWzBdICE9PSAnSUYnKSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgb3JpZ2luYWwgPSB0b2tlbjtcbiAgICAgICAgdGhpcy5kZXRlY3RFbmQoaSArIDEsIGNvbmRpdGlvbiwgYWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmluZGVudGF0aW9uID0gZnVuY3Rpb24ob3JpZ2luKSB7XG4gICAgICB2YXIgaW5kZW50LCBvdXRkZW50O1xuICAgICAgaW5kZW50ID0gWydJTkRFTlQnLCAyXTtcbiAgICAgIG91dGRlbnQgPSBbJ09VVERFTlQnLCAyXTtcbiAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgaW5kZW50LmdlbmVyYXRlZCA9IG91dGRlbnQuZ2VuZXJhdGVkID0gdHJ1ZTtcbiAgICAgICAgaW5kZW50Lm9yaWdpbiA9IG91dGRlbnQub3JpZ2luID0gb3JpZ2luO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZW50LmV4cGxpY2l0ID0gb3V0ZGVudC5leHBsaWNpdCA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2luZGVudCwgb3V0ZGVudF07XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGdlbmVyYXRlO1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLnRhZyA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgIHZhciBfcmVmO1xuICAgICAgcmV0dXJuIChfcmVmID0gdGhpcy50b2tlbnNbaV0pICE9IG51bGwgPyBfcmVmWzBdIDogdm9pZCAwO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmV3cml0ZXI7XG5cbiAgfSkoKTtcblxuICBCQUxBTkNFRF9QQUlSUyA9IFtbJygnLCAnKSddLCBbJ1snLCAnXSddLCBbJ3snLCAnfSddLCBbJ0lOREVOVCcsICdPVVRERU5UJ10sIFsnQ0FMTF9TVEFSVCcsICdDQUxMX0VORCddLCBbJ1BBUkFNX1NUQVJUJywgJ1BBUkFNX0VORCddLCBbJ0lOREVYX1NUQVJUJywgJ0lOREVYX0VORCddXTtcblxuICBleHBvcnRzLklOVkVSU0VTID0gSU5WRVJTRVMgPSB7fTtcblxuICBFWFBSRVNTSU9OX1NUQVJUID0gW107XG5cbiAgRVhQUkVTU0lPTl9FTkQgPSBbXTtcblxuICBmb3IgKF9pID0gMCwgX2xlbiA9IEJBTEFOQ0VEX1BBSVJTLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgX3JlZiA9IEJBTEFOQ0VEX1BBSVJTW19pXSwgbGVmdCA9IF9yZWZbMF0sIHJpdGUgPSBfcmVmWzFdO1xuICAgIEVYUFJFU1NJT05fU1RBUlQucHVzaChJTlZFUlNFU1tyaXRlXSA9IGxlZnQpO1xuICAgIEVYUFJFU1NJT05fRU5ELnB1c2goSU5WRVJTRVNbbGVmdF0gPSByaXRlKTtcbiAgfVxuXG4gIEVYUFJFU1NJT05fQ0xPU0UgPSBbJ0NBVENIJywgJ1RIRU4nLCAnRUxTRScsICdGSU5BTExZJ10uY29uY2F0KEVYUFJFU1NJT05fRU5EKTtcblxuICBJTVBMSUNJVF9GVU5DID0gWydJREVOVElGSUVSJywgJ1NVUEVSJywgJyknLCAnQ0FMTF9FTkQnLCAnXScsICdJTkRFWF9FTkQnLCAnQCcsICdUSElTJ107XG5cbiAgSU1QTElDSVRfQ0FMTCA9IFsnSURFTlRJRklFUicsICdOVU1CRVInLCAnU1RSSU5HJywgJ0pTJywgJ1JFR0VYJywgJ05FVycsICdQQVJBTV9TVEFSVCcsICdDTEFTUycsICdJRicsICdUUlknLCAnU1dJVENIJywgJ1RISVMnLCAnQk9PTCcsICdOVUxMJywgJ1VOREVGSU5FRCcsICdVTkFSWScsICdZSUVMRCcsICdVTkFSWV9NQVRIJywgJ1NVUEVSJywgJ1RIUk9XJywgJ0AnLCAnLT4nLCAnPT4nLCAnWycsICcoJywgJ3snLCAnLS0nLCAnKysnXTtcblxuICBJTVBMSUNJVF9VTlNQQUNFRF9DQUxMID0gWycrJywgJy0nXTtcblxuICBJTVBMSUNJVF9FTkQgPSBbJ1BPU1RfSUYnLCAnRk9SJywgJ1dISUxFJywgJ1VOVElMJywgJ1dIRU4nLCAnQlknLCAnTE9PUCcsICdURVJNSU5BVE9SJ107XG5cbiAgU0lOR0xFX0xJTkVSUyA9IFsnRUxTRScsICctPicsICc9PicsICdUUlknLCAnRklOQUxMWScsICdUSEVOJ107XG5cbiAgU0lOR0xFX0NMT1NFUlMgPSBbJ1RFUk1JTkFUT1InLCAnQ0FUQ0gnLCAnRklOQUxMWScsICdFTFNFJywgJ09VVERFTlQnLCAnTEVBRElOR19XSEVOJ107XG5cbiAgTElORUJSRUFLUyA9IFsnVEVSTUlOQVRPUicsICdJTkRFTlQnLCAnT1VUREVOVCddO1xuXG4gIENBTExfQ0xPU0VSUyA9IFsnLicsICc/LicsICc6OicsICc/OjonXTtcblxuICBJTVBMSUNJVF9GVU5DLnB1c2goJ0RFRkVSJyk7XG5cbiAgSU1QTElDSVRfQ0FMTC5wdXNoKCdERUZFUicpO1xuXG4gIElNUExJQ0lUX0VORC5wdXNoKCdBV0FJVCcpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIFNjb3BlLCBleHRlbmQsIGljZWQsIGxhc3QsIF9yZWY7XG5cbiAgX3JlZiA9IHJlcXVpcmUoJy4vaGVscGVycycpLCBleHRlbmQgPSBfcmVmLmV4dGVuZCwgbGFzdCA9IF9yZWYubGFzdDtcblxuICBpY2VkID0gcmVxdWlyZSgnaWNlZC1ydW50aW1lJyk7XG5cbiAgZXhwb3J0cy5TY29wZSA9IFNjb3BlID0gKGZ1bmN0aW9uKCkge1xuICAgIFNjb3BlLnJvb3QgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gU2NvcGUocGFyZW50LCBleHByZXNzaW9ucywgbWV0aG9kKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBleHByZXNzaW9ucztcbiAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xuICAgICAgdGhpcy52YXJpYWJsZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnYXJndW1lbnRzJyxcbiAgICAgICAgICB0eXBlOiAnYXJndW1lbnRzJ1xuICAgICAgICB9XG4gICAgICBdO1xuICAgICAgdGhpcy5wb3NpdGlvbnMgPSB7fTtcbiAgICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgICAgU2NvcGUucm9vdCA9IHRoaXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgU2NvcGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGltbWVkaWF0ZSkge1xuICAgICAgaWYgKHRoaXMuc2hhcmVkICYmICFpbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmFkZChuYW1lLCB0eXBlLCBpbW1lZGlhdGUpO1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnBvc2l0aW9ucywgbmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFyaWFibGVzW3RoaXMucG9zaXRpb25zW25hbWVdXS50eXBlID0gdHlwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uc1tuYW1lXSA9IHRoaXMudmFyaWFibGVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICB9KSAtIDE7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5uYW1lZE1ldGhvZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYxO1xuICAgICAgaWYgKCgoX3JlZjEgPSB0aGlzLm1ldGhvZCkgIT0gbnVsbCA/IF9yZWYxLm5hbWUgOiB2b2lkIDApIHx8ICF0aGlzLnBhcmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRob2Q7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQubmFtZWRNZXRob2QoKTtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAodGhpcy5jaGVjayhuYW1lKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWRkKG5hbWUsICd2YXInKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLnBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLnNoYXJlZCAmJiB0aGlzLnBhcmVudC5jaGVjayhuYW1lLCB0cnVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hZGQobmFtZSwgJ3BhcmFtJyk7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBfcmVmMTtcbiAgICAgIHJldHVybiAhISh0aGlzLnR5cGUobmFtZSkgfHwgKChfcmVmMSA9IHRoaXMucGFyZW50KSAhPSBudWxsID8gX3JlZjEuY2hlY2sobmFtZSkgOiB2b2lkIDApKTtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLnRlbXBvcmFyeSA9IGZ1bmN0aW9uKG5hbWUsIGluZGV4KSB7XG4gICAgICBpZiAobmFtZS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybiAnXycgKyBuYW1lICsgKGluZGV4ID4gMSA/IGluZGV4IC0gMSA6ICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnXycgKyAoaW5kZXggKyBwYXJzZUludChuYW1lLCAzNikpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9cXGQvZywgJ2EnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgdiwgX2ksIF9sZW4sIF9yZWYxO1xuICAgICAgX3JlZjEgPSB0aGlzLnZhcmlhYmxlcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgdiA9IF9yZWYxW19pXTtcbiAgICAgICAgaWYgKHYubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgIHJldHVybiB2LnR5cGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuZnJlZVZhcmlhYmxlID0gZnVuY3Rpb24obmFtZSwgcmVzZXJ2ZSkge1xuICAgICAgdmFyIGluZGV4LCB0ZW1wO1xuICAgICAgaWYgKHJlc2VydmUgPT0gbnVsbCkge1xuICAgICAgICByZXNlcnZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGluZGV4ID0gMDtcbiAgICAgIHdoaWxlICh0aGlzLmNoZWNrKCh0ZW1wID0gdGhpcy50ZW1wb3JhcnkobmFtZSwgaW5kZXgpKSkpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICAgIGlmIChyZXNlcnZlKSB7XG4gICAgICAgIHRoaXMuYWRkKHRlbXAsICd2YXInLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZW1wO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuYXNzaWduID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHRoaXMuYWRkKG5hbWUsIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBhc3NpZ25lZDogdHJ1ZVxuICAgICAgfSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gdGhpcy5oYXNBc3NpZ25tZW50cyA9IHRydWU7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5oYXNEZWNsYXJhdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuZGVjbGFyZWRWYXJpYWJsZXMoKS5sZW5ndGg7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5kZWNsYXJlZFZhcmlhYmxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlYWxWYXJzLCB0ZW1wVmFycywgdiwgX2ksIF9sZW4sIF9yZWYxO1xuICAgICAgcmVhbFZhcnMgPSBbXTtcbiAgICAgIHRlbXBWYXJzID0gW107XG4gICAgICBfcmVmMSA9IHRoaXMudmFyaWFibGVzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ID0gX3JlZjFbX2ldO1xuICAgICAgICBpZiAodi50eXBlID09PSAndmFyJykge1xuICAgICAgICAgICh2Lm5hbWUuY2hhckF0KDApID09PSAnXycgPyB0ZW1wVmFycyA6IHJlYWxWYXJzKS5wdXNoKHYubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZWFsVmFycy5zb3J0KCkuY29uY2F0KHRlbXBWYXJzLnNvcnQoKSk7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5hc3NpZ25lZFZhcmlhYmxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHYsIF9pLCBfbGVuLCBfcmVmMSwgX3Jlc3VsdHM7XG4gICAgICBfcmVmMSA9IHRoaXMudmFyaWFibGVzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgdiA9IF9yZWYxW19pXTtcbiAgICAgICAgaWYgKHYudHlwZS5hc3NpZ25lZCkge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goXCJcIiArIHYubmFtZSArIFwiID0gXCIgKyB2LnR5cGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIHJldHVybiBTY29wZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIExpbmVNYXAsIFNvdXJjZU1hcDtcblxuICBMaW5lTWFwID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIExpbmVNYXAobGluZSkge1xuICAgICAgdGhpcy5saW5lID0gbGluZTtcbiAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgIH1cblxuICAgIExpbmVNYXAucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNvbHVtbiwgX2FyZywgb3B0aW9ucykge1xuICAgICAgdmFyIHNvdXJjZUNvbHVtbiwgc291cmNlTGluZTtcbiAgICAgIHNvdXJjZUxpbmUgPSBfYXJnWzBdLCBzb3VyY2VDb2x1bW4gPSBfYXJnWzFdO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jb2x1bW5zW2NvbHVtbl0gJiYgb3B0aW9ucy5ub1JlcGxhY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY29sdW1uc1tjb2x1bW5dID0ge1xuICAgICAgICBsaW5lOiB0aGlzLmxpbmUsXG4gICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICBzb3VyY2VMaW5lOiBzb3VyY2VMaW5lLFxuICAgICAgICBzb3VyY2VDb2x1bW46IHNvdXJjZUNvbHVtblxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgTGluZU1hcC5wcm90b3R5cGUuc291cmNlTG9jYXRpb24gPSBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgIHZhciBtYXBwaW5nO1xuICAgICAgd2hpbGUgKCEoKG1hcHBpbmcgPSB0aGlzLmNvbHVtbnNbY29sdW1uXSkgfHwgKGNvbHVtbiA8PSAwKSkpIHtcbiAgICAgICAgY29sdW1uLS07XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFwcGluZyAmJiBbbWFwcGluZy5zb3VyY2VMaW5lLCBtYXBwaW5nLnNvdXJjZUNvbHVtbl07XG4gICAgfTtcblxuICAgIHJldHVybiBMaW5lTWFwO1xuXG4gIH0pKCk7XG5cbiAgU291cmNlTWFwID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBCQVNFNjRfQ0hBUlMsIFZMUV9DT05USU5VQVRJT05fQklULCBWTFFfU0hJRlQsIFZMUV9WQUxVRV9NQVNLO1xuXG4gICAgZnVuY3Rpb24gU291cmNlTWFwKCkge1xuICAgICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIH1cblxuICAgIFNvdXJjZU1hcC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oc291cmNlTG9jYXRpb24sIGdlbmVyYXRlZExvY2F0aW9uLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY29sdW1uLCBsaW5lLCBsaW5lTWFwLCBfYmFzZTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgbGluZSA9IGdlbmVyYXRlZExvY2F0aW9uWzBdLCBjb2x1bW4gPSBnZW5lcmF0ZWRMb2NhdGlvblsxXTtcbiAgICAgIGxpbmVNYXAgPSAoKF9iYXNlID0gdGhpcy5saW5lcylbbGluZV0gfHwgKF9iYXNlW2xpbmVdID0gbmV3IExpbmVNYXAobGluZSkpKTtcbiAgICAgIHJldHVybiBsaW5lTWFwLmFkZChjb2x1bW4sIHNvdXJjZUxvY2F0aW9uLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgU291cmNlTWFwLnByb3RvdHlwZS5zb3VyY2VMb2NhdGlvbiA9IGZ1bmN0aW9uKF9hcmcpIHtcbiAgICAgIHZhciBjb2x1bW4sIGxpbmUsIGxpbmVNYXA7XG4gICAgICBsaW5lID0gX2FyZ1swXSwgY29sdW1uID0gX2FyZ1sxXTtcbiAgICAgIHdoaWxlICghKChsaW5lTWFwID0gdGhpcy5saW5lc1tsaW5lXSkgfHwgKGxpbmUgPD0gMCkpKSB7XG4gICAgICAgIGxpbmUtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsaW5lTWFwICYmIGxpbmVNYXAuc291cmNlTG9jYXRpb24oY29sdW1uKTtcbiAgICB9O1xuXG4gICAgU291cmNlTWFwLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNvZGUpIHtcbiAgICAgIHZhciBidWZmZXIsIGxhc3RDb2x1bW4sIGxhc3RTb3VyY2VDb2x1bW4sIGxhc3RTb3VyY2VMaW5lLCBsaW5lTWFwLCBsaW5lTnVtYmVyLCBtYXBwaW5nLCBuZWVkQ29tbWEsIHYzLCB3cml0aW5nbGluZSwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZiwgX3JlZjE7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChjb2RlID09IG51bGwpIHtcbiAgICAgICAgY29kZSA9IG51bGw7XG4gICAgICB9XG4gICAgICB3cml0aW5nbGluZSA9IDA7XG4gICAgICBsYXN0Q29sdW1uID0gMDtcbiAgICAgIGxhc3RTb3VyY2VMaW5lID0gMDtcbiAgICAgIGxhc3RTb3VyY2VDb2x1bW4gPSAwO1xuICAgICAgbmVlZENvbW1hID0gZmFsc2U7XG4gICAgICBidWZmZXIgPSBcIlwiO1xuICAgICAgX3JlZiA9IHRoaXMubGluZXM7XG4gICAgICBmb3IgKGxpbmVOdW1iZXIgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBsaW5lTnVtYmVyID0gKytfaSkge1xuICAgICAgICBsaW5lTWFwID0gX3JlZltsaW5lTnVtYmVyXTtcbiAgICAgICAgaWYgKGxpbmVNYXApIHtcbiAgICAgICAgICBfcmVmMSA9IGxpbmVNYXAuY29sdW1ucztcbiAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMS5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgIG1hcHBpbmcgPSBfcmVmMVtfal07XG4gICAgICAgICAgICBpZiAoIShtYXBwaW5nKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICh3cml0aW5nbGluZSA8IG1hcHBpbmcubGluZSkge1xuICAgICAgICAgICAgICBsYXN0Q29sdW1uID0gMDtcbiAgICAgICAgICAgICAgbmVlZENvbW1hID0gZmFsc2U7XG4gICAgICAgICAgICAgIGJ1ZmZlciArPSBcIjtcIjtcbiAgICAgICAgICAgICAgd3JpdGluZ2xpbmUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZWVkQ29tbWEpIHtcbiAgICAgICAgICAgICAgYnVmZmVyICs9IFwiLFwiO1xuICAgICAgICAgICAgICBuZWVkQ29tbWEgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlciArPSB0aGlzLmVuY29kZVZscShtYXBwaW5nLmNvbHVtbiAtIGxhc3RDb2x1bW4pO1xuICAgICAgICAgICAgbGFzdENvbHVtbiA9IG1hcHBpbmcuY29sdW1uO1xuICAgICAgICAgICAgYnVmZmVyICs9IHRoaXMuZW5jb2RlVmxxKDApO1xuICAgICAgICAgICAgYnVmZmVyICs9IHRoaXMuZW5jb2RlVmxxKG1hcHBpbmcuc291cmNlTGluZSAtIGxhc3RTb3VyY2VMaW5lKTtcbiAgICAgICAgICAgIGxhc3RTb3VyY2VMaW5lID0gbWFwcGluZy5zb3VyY2VMaW5lO1xuICAgICAgICAgICAgYnVmZmVyICs9IHRoaXMuZW5jb2RlVmxxKG1hcHBpbmcuc291cmNlQ29sdW1uIC0gbGFzdFNvdXJjZUNvbHVtbik7XG4gICAgICAgICAgICBsYXN0U291cmNlQ29sdW1uID0gbWFwcGluZy5zb3VyY2VDb2x1bW47XG4gICAgICAgICAgICBuZWVkQ29tbWEgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdjMgPSB7XG4gICAgICAgIHZlcnNpb246IDMsXG4gICAgICAgIGZpbGU6IG9wdGlvbnMuZ2VuZXJhdGVkRmlsZSB8fCAnJyxcbiAgICAgICAgc291cmNlUm9vdDogb3B0aW9ucy5zb3VyY2VSb290IHx8ICcnLFxuICAgICAgICBzb3VyY2VzOiBvcHRpb25zLnNvdXJjZUZpbGVzIHx8IFsnJ10sXG4gICAgICAgIG5hbWVzOiBbXSxcbiAgICAgICAgbWFwcGluZ3M6IGJ1ZmZlclxuICAgICAgfTtcbiAgICAgIGlmIChvcHRpb25zLmlubGluZSkge1xuICAgICAgICB2My5zb3VyY2VzQ29udGVudCA9IFtjb2RlXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2MywgbnVsbCwgMik7XG4gICAgfTtcblxuICAgIFZMUV9TSElGVCA9IDU7XG5cbiAgICBWTFFfQ09OVElOVUFUSU9OX0JJVCA9IDEgPDwgVkxRX1NISUZUO1xuXG4gICAgVkxRX1ZBTFVFX01BU0sgPSBWTFFfQ09OVElOVUFUSU9OX0JJVCAtIDE7XG5cbiAgICBTb3VyY2VNYXAucHJvdG90eXBlLmVuY29kZVZscSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgYW5zd2VyLCBuZXh0Q2h1bmssIHNpZ25CaXQsIHZhbHVlVG9FbmNvZGU7XG4gICAgICBhbnN3ZXIgPSAnJztcbiAgICAgIHNpZ25CaXQgPSB2YWx1ZSA8IDAgPyAxIDogMDtcbiAgICAgIHZhbHVlVG9FbmNvZGUgPSAoTWF0aC5hYnModmFsdWUpIDw8IDEpICsgc2lnbkJpdDtcbiAgICAgIHdoaWxlICh2YWx1ZVRvRW5jb2RlIHx8ICFhbnN3ZXIpIHtcbiAgICAgICAgbmV4dENodW5rID0gdmFsdWVUb0VuY29kZSAmIFZMUV9WQUxVRV9NQVNLO1xuICAgICAgICB2YWx1ZVRvRW5jb2RlID0gdmFsdWVUb0VuY29kZSA+PiBWTFFfU0hJRlQ7XG4gICAgICAgIGlmICh2YWx1ZVRvRW5jb2RlKSB7XG4gICAgICAgICAgbmV4dENodW5rIHw9IFZMUV9DT05USU5VQVRJT05fQklUO1xuICAgICAgICB9XG4gICAgICAgIGFuc3dlciArPSB0aGlzLmVuY29kZUJhc2U2NChuZXh0Q2h1bmspO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICB9O1xuXG4gICAgQkFTRTY0X0NIQVJTID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG4gICAgU291cmNlTWFwLnByb3RvdHlwZS5lbmNvZGVCYXNlNjQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIEJBU0U2NF9DSEFSU1t2YWx1ZV0gfHwgKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgQmFzZTY0IGVuY29kZSB2YWx1ZTogXCIgKyB2YWx1ZSk7XG4gICAgICB9KSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU291cmNlTWFwO1xuXG4gIH0pKCk7XG5cbiAgZXhwb3J0cy5Tb3VyY2VNYXAgPSBTb3VyY2VNYXA7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC44XG4oZnVuY3Rpb24oKSB7XG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGs6IFwiX19pY2VkX2tcIixcbiAgICBrX25vb3A6IFwiX19pY2VkX2tfbm9vcFwiLFxuICAgIHBhcmFtOiBcIl9faWNlZF9wX1wiLFxuICAgIG5zOiBcImljZWRcIixcbiAgICBydW50aW1lOiBcInJ1bnRpbWVcIixcbiAgICBEZWZlcnJhbHM6IFwiRGVmZXJyYWxzXCIsXG4gICAgZGVmZXJyYWxzOiBcIl9faWNlZF9kZWZlcnJhbHNcIixcbiAgICBmdWxmaWxsOiBcIl9mdWxmaWxsXCIsXG4gICAgYl93aGlsZTogXCJfYnJlYWtcIixcbiAgICB0X3doaWxlOiBcIl93aGlsZVwiLFxuICAgIGNfd2hpbGU6IFwiX2NvbnRpbnVlXCIsXG4gICAgbl93aGlsZTogXCJfbmV4dFwiLFxuICAgIG5fYXJnOiBcIl9faWNlZF9uZXh0X2FyZ1wiLFxuICAgIGRlZmVyX21ldGhvZDogXCJkZWZlclwiLFxuICAgIHNsb3Q6IFwiX19zbG90XCIsXG4gICAgYXNzaWduX2ZuOiBcImFzc2lnbl9mblwiLFxuICAgIGF1dG9jYjogXCJhdXRvY2JcIixcbiAgICByZXRzbG90OiBcInJldFwiLFxuICAgIHRyYWNlOiBcIl9faWNlZF90cmFjZVwiLFxuICAgIHBhc3NlZF9kZWZlcnJhbDogXCJfX2ljZWRfcGFzc2VkX2RlZmVycmFsXCIsXG4gICAgZmluZERlZmVycmFsOiBcImZpbmREZWZlcnJhbFwiLFxuICAgIGxpbmVubzogXCJsaW5lbm9cIixcbiAgICBwYXJlbnQ6IFwicGFyZW50XCIsXG4gICAgZmlsZW5hbWU6IFwiZmlsZW5hbWVcIixcbiAgICBmdW5jbmFtZTogXCJmdW5jbmFtZVwiLFxuICAgIGNhdGNoRXhjZXB0aW9uczogJ2NhdGNoRXhjZXB0aW9ucycsXG4gICAgcnVudGltZV9tb2RlczogW1wibm9kZVwiLCBcImlubGluZVwiLCBcIndpbmRvd1wiLCBcIm5vbmVcIiwgXCJicm93c2VyaWZ5XCIsIFwiaW50ZXJwXCJdLFxuICAgIHRyYW1wb2xpbmU6IFwidHJhbXBvbGluZVwiLFxuICAgIGNvbnRleHQ6IFwiY29udGV4dFwiLFxuICAgIGRlZmVyX2FyZzogXCJfX2ljZWRfZGVmZXJfXCJcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjhcbihmdW5jdGlvbigpIHtcbiAgdmFyIEMsIFBpcGVsaW5lciwgaWNlZCwgX19pY2VkX2ssIF9faWNlZF9rX25vb3AsIF9pYW5kLCBfaW9yLCBfdGltZW91dCxcbiAgICBfX3NsaWNlID0gW10uc2xpY2U7XG5cbiAgX19pY2VkX2sgPSBfX2ljZWRfa19ub29wID0gZnVuY3Rpb24oKSB7fTtcblxuICBDID0gcmVxdWlyZSgnLi9jb25zdCcpO1xuXG4gIGV4cG9ydHMuaWNlZCA9IGljZWQgPSByZXF1aXJlKCcuL3J1bnRpbWUnKTtcblxuICBfdGltZW91dCA9IGZ1bmN0aW9uKGNiLCB0LCByZXMsIHRtcCkge1xuICAgIHZhciBhcnIsIHJ2LCB3aGljaCwgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsIF9faWNlZF9kZWZlcnJhbHMsIF9faWNlZF9rO1xuICAgIF9faWNlZF9rID0gX19pY2VkX2tfbm9vcDtcbiAgICBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCA9IGljZWQuZmluZERlZmVycmFsKGFyZ3VtZW50cyk7XG4gICAgcnYgPSBuZXcgaWNlZC5SZW5kZXp2b3VzO1xuICAgIHRtcFswXSA9IHJ2LmlkKHRydWUpLmRlZmVyKHtcbiAgICAgIGFzc2lnbl9mbjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyID0gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKCksXG4gICAgICBsaW5lbm86IDIwLFxuICAgICAgY29udGV4dDogX19pY2VkX2RlZmVycmFsc1xuICAgIH0pO1xuICAgIHNldFRpbWVvdXQocnYuaWQoZmFsc2UpLmRlZmVyKHtcbiAgICAgIGxpbmVubzogMjEsXG4gICAgICBjb250ZXh0OiBfX2ljZWRfZGVmZXJyYWxzXG4gICAgfSksIHQpO1xuICAgIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHJ2LndhaXQoX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgYXNzaWduX2ZuOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB3aGljaCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkoKSxcbiAgICAgICAgICBsaW5lbm86IDIyXG4gICAgICAgIH0pKTtcbiAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgfSk7XG4gICAgfSkodGhpcykoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICByZXNbMF0gPSB3aGljaDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2IuYXBwbHkobnVsbCwgYXJyKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIGV4cG9ydHMudGltZW91dCA9IGZ1bmN0aW9uKGNiLCB0LCByZXMpIHtcbiAgICB2YXIgdG1wO1xuICAgIHRtcCA9IFtdO1xuICAgIF90aW1lb3V0KGNiLCB0LCByZXMsIHRtcCk7XG4gICAgcmV0dXJuIHRtcFswXTtcbiAgfTtcblxuICBfaWFuZCA9IGZ1bmN0aW9uKGNiLCByZXMsIHRtcCkge1xuICAgIHZhciBvaywgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsIF9faWNlZF9kZWZlcnJhbHMsIF9faWNlZF9rO1xuICAgIF9faWNlZF9rID0gX19pY2VkX2tfbm9vcDtcbiAgICBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCA9IGljZWQuZmluZERlZmVycmFsKGFyZ3VtZW50cyk7XG4gICAgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgdG1wWzBdID0gX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgYXNzaWduX2ZuOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvayA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkoKSxcbiAgICAgICAgICBsaW5lbm86IDM5XG4gICAgICAgIH0pO1xuICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICB9KTtcbiAgICB9KSh0aGlzKSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgIHJlc1swXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYigpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgZXhwb3J0cy5pYW5kID0gZnVuY3Rpb24oY2IsIHJlcykge1xuICAgIHZhciB0bXA7XG4gICAgdG1wID0gW107XG4gICAgX2lhbmQoY2IsIHJlcywgdG1wKTtcbiAgICByZXR1cm4gdG1wWzBdO1xuICB9O1xuXG4gIF9pb3IgPSBmdW5jdGlvbihjYiwgcmVzLCB0bXApIHtcbiAgICB2YXIgb2ssIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLCBfX2ljZWRfZGVmZXJyYWxzLCBfX2ljZWRfaztcbiAgICBfX2ljZWRfayA9IF9faWNlZF9rX25vb3A7XG4gICAgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwgPSBpY2VkLmZpbmREZWZlcnJhbChhcmd1bWVudHMpO1xuICAgIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRtcFswXSA9IF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgIGFzc2lnbl9mbjogKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gb2sgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKCksXG4gICAgICAgICAgbGluZW5vOiA1OFxuICAgICAgICB9KTtcbiAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgfSk7XG4gICAgfSkodGhpcykoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHJlc1swXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNiKCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBleHBvcnRzLmlvciA9IGZ1bmN0aW9uKGNiLCByZXMpIHtcbiAgICB2YXIgdG1wO1xuICAgIHRtcCA9IFtdO1xuICAgIF9pb3IoY2IsIHJlcywgdG1wKTtcbiAgICByZXR1cm4gdG1wWzBdO1xuICB9O1xuXG4gIGV4cG9ydHMuUGlwZWxpbmVyID0gUGlwZWxpbmVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFBpcGVsaW5lcih3aW5kb3csIGRlbGF5KSB7XG4gICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdyB8fCAxO1xuICAgICAgdGhpcy5kZWxheSA9IGRlbGF5IHx8IDA7XG4gICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICB0aGlzLm5fb3V0ID0gMDtcbiAgICAgIHRoaXMuY2IgPSBudWxsO1xuICAgICAgdGhpc1tDLmRlZmVycmFsc10gPSB0aGlzO1xuICAgICAgdGhpc1tcImRlZmVyXCJdID0gdGhpcy5fZGVmZXI7XG4gICAgfVxuXG4gICAgUGlwZWxpbmVyLnByb3RvdHlwZS53YWl0SW5RdWV1ZSA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgICB2YXIgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsIF9faWNlZF9kZWZlcnJhbHMsIF9faWNlZF9rO1xuICAgICAgX19pY2VkX2sgPSBfX2ljZWRfa19ub29wO1xuICAgICAgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwgPSBpY2VkLmZpbmREZWZlcnJhbChhcmd1bWVudHMpO1xuICAgICAgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICB2YXIgX3doaWxlO1xuICAgICAgICAgIF93aGlsZSA9IGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgICB2YXIgX2JyZWFrLCBfY29udGludWUsIF9uZXh0O1xuICAgICAgICAgICAgX2JyZWFrID0gX19pY2VkX2s7XG4gICAgICAgICAgICBfY29udGludWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGljZWQudHJhbXBvbGluZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3doaWxlKF9faWNlZF9rKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX25leHQgPSBfY29udGludWU7XG4gICAgICAgICAgICBpZiAoIShfdGhpcy5uX291dCA+PSBfdGhpcy53aW5kb3cpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfYnJlYWsoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCIsXG4gICAgICAgICAgICAgICAgICBmdW5jbmFtZTogXCJQaXBlbGluZXIud2FpdEluUXVldWVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF90aGlzLmNiID0gX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgICAgICAgICBsaW5lbm86IDEwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgICAgICAgICAgfSkoX25leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgX3doaWxlKF9faWNlZF9rKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSh0aGlzKSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLm5fb3V0Kys7XG4gICAgICAgICAgKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuZGVsYXkpIHtcbiAgICAgICAgICAgICAgKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIixcbiAgICAgICAgICAgICAgICAgIGZ1bmNuYW1lOiBcIlBpcGVsaW5lci53YWl0SW5RdWV1ZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICAgICAgICAgIGxpbmVubzogMTA4XG4gICAgICAgICAgICAgICAgfSksIF90aGlzLmRlbGF5KTtcbiAgICAgICAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICAgICAgICAgIH0pKF9faWNlZF9rKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBfX2ljZWRfaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNiKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFBpcGVsaW5lci5wcm90b3R5cGUuX19kZWZlciA9IGZ1bmN0aW9uKG91dCwgZGVmZXJBcmdzKSB7XG4gICAgICB2YXIgdG1wLCB2b2lkQ2IsIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLCBfX2ljZWRfZGVmZXJyYWxzLCBfX2ljZWRfaztcbiAgICAgIF9faWNlZF9rID0gX19pY2VkX2tfbm9vcDtcbiAgICAgIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsID0gaWNlZC5maW5kRGVmZXJyYWwoYXJndW1lbnRzKTtcbiAgICAgIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIixcbiAgICAgICAgICAgIGZ1bmNuYW1lOiBcIlBpcGVsaW5lci5fX2RlZmVyXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2b2lkQ2IgPSBfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICAgIGxpbmVubzogMTIyXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb3V0WzBdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgYXJncywgX3JlZjtcbiAgICAgICAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgICAgICAgaWYgKChfcmVmID0gZGVmZXJBcmdzLmFzc2lnbl9mbikgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBfcmVmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZvaWRDYigpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pKHRoaXMpKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMubl9vdXQtLTtcbiAgICAgICAgICBpZiAoX3RoaXMuY2IpIHtcbiAgICAgICAgICAgIHRtcCA9IF90aGlzLmNiO1xuICAgICAgICAgICAgX3RoaXMuY2IgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRtcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgUGlwZWxpbmVyLnByb3RvdHlwZS5fZGVmZXIgPSBmdW5jdGlvbihkZWZlckFyZ3MpIHtcbiAgICAgIHZhciB0bXA7XG4gICAgICB0bXAgPSBbXTtcbiAgICAgIHRoaXMuX19kZWZlcih0bXAsIGRlZmVyQXJncyk7XG4gICAgICByZXR1cm4gdG1wWzBdO1xuICAgIH07XG5cbiAgICBQaXBlbGluZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24oYXV0b2NiKSB7XG4gICAgICB2YXIgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsIF9faWNlZF9rLCBfd2hpbGU7XG4gICAgICBfX2ljZWRfayA9IGF1dG9jYjtcbiAgICAgIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsID0gaWNlZC5maW5kRGVmZXJyYWwoYXJndW1lbnRzKTtcbiAgICAgIF93aGlsZSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICB2YXIgX19pY2VkX2RlZmVycmFscztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgdmFyIF9icmVhaywgX2NvbnRpbnVlLCBfbmV4dDtcbiAgICAgICAgICBfYnJlYWsgPSBfX2ljZWRfaztcbiAgICAgICAgICBfY29udGludWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBpY2VkLnRyYW1wb2xpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfd2hpbGUoX19pY2VkX2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBfbmV4dCA9IF9jb250aW51ZTtcbiAgICAgICAgICBpZiAoIV90aGlzLm5fb3V0KSB7XG4gICAgICAgICAgICByZXR1cm4gX2JyZWFrKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCIsXG4gICAgICAgICAgICAgICAgZnVuY25hbWU6IFwiUGlwZWxpbmVyLmZsdXNoXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIF90aGlzLmNiID0gX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgICAgICAgbGluZW5vOiAxNTFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgICAgICAgIH0pKF9uZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIF93aGlsZShfX2ljZWRfayk7XG4gICAgfTtcblxuICAgIHJldHVybiBQaXBlbGluZXI7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjhcbihmdW5jdGlvbigpIHtcbiAgdmFyIGssIG1vZCwgbW9kcywgdiwgX2ksIF9sZW47XG5cbiAgZXhwb3J0c1tcImNvbnN0XCJdID0gcmVxdWlyZSgnLi9jb25zdCcpO1xuXG4gIG1vZHMgPSBbcmVxdWlyZSgnLi9ydW50aW1lJyksIHJlcXVpcmUoJy4vbGlicmFyeScpXTtcblxuICBmb3IgKF9pID0gMCwgX2xlbiA9IG1vZHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICBtb2QgPSBtb2RzW19pXTtcbiAgICBmb3IgKGsgaW4gbW9kKSB7XG4gICAgICB2ID0gbW9kW2tdO1xuICAgICAgZXhwb3J0c1trXSA9IHY7XG4gICAgfVxuICB9XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC44XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBDLCBEZWZlcnJhbHMsIFJlbmRlenZvdXMsIGV4Y2VwdGlvbkhhbmRsZXIsIGZpbmREZWZlcnJhbCwgbWFrZV9kZWZlcl9yZXR1cm4sIHN0YWNrV2FsaywgdGlja19jb3VudGVyLCB0cmFtcG9saW5lLCB3YXJuLCBfX2FjdGl2ZV90cmFjZSwgX19jLCBfdHJhY2VfdG9fc3RyaW5nLFxuICAgIF9fc2xpY2UgPSBbXS5zbGljZTtcblxuICBDID0gcmVxdWlyZSgnLi9jb25zdCcpO1xuXG4gIG1ha2VfZGVmZXJfcmV0dXJuID0gZnVuY3Rpb24ob2JqLCBkZWZlcl9hcmdzLCBpZCwgdHJhY2VfdGVtcGxhdGUsIG11bHRpKSB7XG4gICAgdmFyIGssIHJldCwgdHJhY2UsIHY7XG4gICAgdHJhY2UgPSB7fTtcbiAgICBmb3IgKGsgaW4gdHJhY2VfdGVtcGxhdGUpIHtcbiAgICAgIHYgPSB0cmFjZV90ZW1wbGF0ZVtrXTtcbiAgICAgIHRyYWNlW2tdID0gdjtcbiAgICB9XG4gICAgdHJhY2VbQy5saW5lbm9dID0gZGVmZXJfYXJncyAhPSBudWxsID8gZGVmZXJfYXJnc1tDLmxpbmVub10gOiB2b2lkIDA7XG4gICAgcmV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5uZXJfYXJncywgbywgX3JlZjtcbiAgICAgIGlubmVyX2FyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgaWYgKGRlZmVyX2FyZ3MgIT0gbnVsbCkge1xuICAgICAgICBpZiAoKF9yZWYgPSBkZWZlcl9hcmdzLmFzc2lnbl9mbikgIT0gbnVsbCkge1xuICAgICAgICAgIF9yZWYuYXBwbHkobnVsbCwgaW5uZXJfYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvYmopIHtcbiAgICAgICAgbyA9IG9iajtcbiAgICAgICAgaWYgKCFtdWx0aSkge1xuICAgICAgICAgIG9iaiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG8uX2Z1bGZpbGwoaWQsIHRyYWNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB3YXJuKFwib3ZlcnVzZWQgZGVmZXJyYWwgYXQgXCIgKyAoX3RyYWNlX3RvX3N0cmluZyh0cmFjZSkpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldFtDLnRyYWNlXSA9IHRyYWNlO1xuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgX19jID0gMDtcblxuICB0aWNrX2NvdW50ZXIgPSBmdW5jdGlvbihtb2QpIHtcbiAgICBfX2MrKztcbiAgICBpZiAoKF9fYyAlIG1vZCkgPT09IDApIHtcbiAgICAgIF9fYyA9IDA7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBfX2FjdGl2ZV90cmFjZSA9IG51bGw7XG5cbiAgX3RyYWNlX3RvX3N0cmluZyA9IGZ1bmN0aW9uKHRyKSB7XG4gICAgdmFyIGZuO1xuICAgIGZuID0gdHJbQy5mdW5jbmFtZV0gfHwgXCI8YW5vbnltb3VzPlwiO1xuICAgIHJldHVybiBcIlwiICsgZm4gKyBcIiAoXCIgKyB0cltDLmZpbGVuYW1lXSArIFwiOlwiICsgKHRyW0MubGluZW5vXSArIDEpICsgXCIpXCI7XG4gIH07XG5cbiAgd2FybiA9IGZ1bmN0aW9uKG0pIHtcbiAgICByZXR1cm4gdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCA/IGNvbnNvbGUuZXJyb3IoXCJJQ0VEIHdhcm5pbmc6IFwiICsgbSkgOiB2b2lkIDA7XG4gIH07XG5cbiAgZXhwb3J0cy50cmFtcG9saW5lID0gdHJhbXBvbGluZSA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKCF0aWNrX2NvdW50ZXIoNTAwKSkge1xuICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCA/IHByb2Nlc3MubmV4dFRpY2sgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZm4pO1xuICAgIH1cbiAgfTtcblxuICBleHBvcnRzLkRlZmVycmFscyA9IERlZmVycmFscyA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBEZWZlcnJhbHMoaywgdHJhY2UpIHtcbiAgICAgIHRoaXMudHJhY2UgPSB0cmFjZTtcbiAgICAgIHRoaXMuY29udGludWF0aW9uID0gaztcbiAgICAgIHRoaXMuY291bnQgPSAxO1xuICAgICAgdGhpcy5yZXQgPSBudWxsO1xuICAgIH1cblxuICAgIERlZmVycmFscy5wcm90b3R5cGUuX2NhbGwgPSBmdW5jdGlvbih0cmFjZSkge1xuICAgICAgdmFyIGM7XG4gICAgICBpZiAodGhpcy5jb250aW51YXRpb24pIHtcbiAgICAgICAgX19hY3RpdmVfdHJhY2UgPSB0cmFjZTtcbiAgICAgICAgYyA9IHRoaXMuY29udGludWF0aW9uO1xuICAgICAgICB0aGlzLmNvbnRpbnVhdGlvbiA9IG51bGw7XG4gICAgICAgIHJldHVybiBjKHRoaXMucmV0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB3YXJuKFwiRW50ZXJlZCBkZWFkIGF3YWl0IGF0IFwiICsgKF90cmFjZV90b19zdHJpbmcodHJhY2UpKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIERlZmVycmFscy5wcm90b3R5cGUuX2Z1bGZpbGwgPSBmdW5jdGlvbihpZCwgdHJhY2UpIHtcbiAgICAgIGlmICgtLXRoaXMuY291bnQgPiAwKSB7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cmFtcG9saW5lKCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuX2NhbGwodHJhY2UpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKHRoaXMpKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIERlZmVycmFscy5wcm90b3R5cGUuZGVmZXIgPSBmdW5jdGlvbihhcmdzKSB7XG4gICAgICB2YXIgc2VsZjtcbiAgICAgIHRoaXMuY291bnQrKztcbiAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgcmV0dXJuIG1ha2VfZGVmZXJfcmV0dXJuKHNlbGYsIGFyZ3MsIG51bGwsIHRoaXMudHJhY2UpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVmZXJyYWxzO1xuXG4gIH0pKCk7XG5cbiAgZXhwb3J0cy5maW5kRGVmZXJyYWwgPSBmaW5kRGVmZXJyYWwgPSBmdW5jdGlvbihhcmdzKSB7XG4gICAgdmFyIGEsIF9pLCBfbGVuO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYXJncy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgYSA9IGFyZ3NbX2ldO1xuICAgICAgaWYgKGEgIT0gbnVsbCA/IGFbQy50cmFjZV0gOiB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGV4cG9ydHMuUmVuZGV6dm91cyA9IFJlbmRlenZvdXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIFJ2SWQ7XG5cbiAgICBmdW5jdGlvbiBSZW5kZXp2b3VzKCkge1xuICAgICAgdGhpcy5jb21wbGV0ZWQgPSBbXTtcbiAgICAgIHRoaXMud2FpdGVycyA9IFtdO1xuICAgICAgdGhpcy5kZWZlcl9pZCA9IDA7XG4gICAgfVxuXG4gICAgUnZJZCA9IChmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFJ2SWQocnYsIGlkLCBtdWx0aSkge1xuICAgICAgICB0aGlzLnJ2ID0gcnY7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5tdWx0aSA9IG11bHRpO1xuICAgICAgfVxuXG4gICAgICBSdklkLnByb3RvdHlwZS5kZWZlciA9IGZ1bmN0aW9uKGRlZmVyX2FyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnYuX2RlZmVyX3dpdGhfaWQodGhpcy5pZCwgZGVmZXJfYXJncywgdGhpcy5tdWx0aSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gUnZJZDtcblxuICAgIH0pKCk7XG5cbiAgICBSZW5kZXp2b3VzLnByb3RvdHlwZS53YWl0ID0gZnVuY3Rpb24oY2IpIHtcbiAgICAgIHZhciB4O1xuICAgICAgaWYgKHRoaXMuY29tcGxldGVkLmxlbmd0aCkge1xuICAgICAgICB4ID0gdGhpcy5jb21wbGV0ZWQuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIGNiKHgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2FpdGVycy5wdXNoKGNiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmVuZGV6dm91cy5wcm90b3R5cGUuZGVmZXIgPSBmdW5jdGlvbihkZWZlcl9hcmdzKSB7XG4gICAgICB2YXIgaWQ7XG4gICAgICBpZCA9IHRoaXMuZGVmZXJfaWQrKztcbiAgICAgIHJldHVybiB0aGlzLl9kZWZlcl93aXRoX2lkKGlkLCBkZWZlcl9hcmdzKTtcbiAgICB9O1xuXG4gICAgUmVuZGV6dm91cy5wcm90b3R5cGUuaWQgPSBmdW5jdGlvbihpLCBtdWx0aSkge1xuICAgICAgbXVsdGkgPSAhIW11bHRpO1xuICAgICAgcmV0dXJuIG5ldyBSdklkKHRoaXMsIGksIG11bHRpKTtcbiAgICB9O1xuXG4gICAgUmVuZGV6dm91cy5wcm90b3R5cGUuX2Z1bGZpbGwgPSBmdW5jdGlvbihpZCwgdHJhY2UpIHtcbiAgICAgIHZhciBjYjtcbiAgICAgIGlmICh0aGlzLndhaXRlcnMubGVuZ3RoKSB7XG4gICAgICAgIGNiID0gdGhpcy53YWl0ZXJzLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiBjYihpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZWQucHVzaChpZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJlbmRlenZvdXMucHJvdG90eXBlLl9kZWZlcl93aXRoX2lkID0gZnVuY3Rpb24oaWQsIGRlZmVyX2FyZ3MsIG11bHRpKSB7XG4gICAgICB0aGlzLmNvdW50Kys7XG4gICAgICByZXR1cm4gbWFrZV9kZWZlcl9yZXR1cm4odGhpcywgZGVmZXJfYXJncywgaWQsIHt9LCBtdWx0aSk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZW5kZXp2b3VzO1xuXG4gIH0pKCk7XG5cbiAgZXhwb3J0cy5zdGFja1dhbGsgPSBzdGFja1dhbGsgPSBmdW5jdGlvbihjYikge1xuICAgIHZhciBsaW5lLCByZXQsIHRyLCBfcmVmO1xuICAgIHJldCA9IFtdO1xuICAgIHRyID0gY2IgPyBjYltDLnRyYWNlXSA6IF9fYWN0aXZlX3RyYWNlO1xuICAgIHdoaWxlICh0cikge1xuICAgICAgbGluZSA9IFwiICAgYXQgXCIgKyAoX3RyYWNlX3RvX3N0cmluZyh0cikpO1xuICAgICAgcmV0LnB1c2gobGluZSk7XG4gICAgICB0ciA9IHRyICE9IG51bGwgPyAoX3JlZiA9IHRyW0MucGFyZW50XSkgIT0gbnVsbCA/IF9yZWZbQy50cmFjZV0gOiB2b2lkIDAgOiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgZXhwb3J0cy5leGNlcHRpb25IYW5kbGVyID0gZXhjZXB0aW9uSGFuZGxlciA9IGZ1bmN0aW9uKGVyciwgbG9nZ2VyKSB7XG4gICAgdmFyIHN0YWNrO1xuICAgIGlmICghbG9nZ2VyKSB7XG4gICAgICBsb2dnZXIgPSBjb25zb2xlLmVycm9yO1xuICAgIH1cbiAgICBsb2dnZXIoZXJyLnN0YWNrKTtcbiAgICBzdGFjayA9IHN0YWNrV2FsaygpO1xuICAgIGlmIChzdGFjay5sZW5ndGgpIHtcbiAgICAgIGxvZ2dlcihcIkljZWQgJ3N0YWNrJyB0cmFjZSAody8gcmVhbCBsaW5lIG51bWJlcnMpOlwiKTtcbiAgICAgIHJldHVybiBsb2dnZXIoc3RhY2suam9pbihcIlxcblwiKSk7XG4gICAgfVxuICB9O1xuXG4gIGV4cG9ydHMuY2F0Y2hFeGNlcHRpb25zID0gZnVuY3Rpb24obG9nZ2VyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MgIT09IG51bGwgPyBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIGZ1bmN0aW9uKGVycikge1xuICAgICAgZXhjZXB0aW9uSGFuZGxlcihlcnIsIGxvZ2dlcik7XG4gICAgICByZXR1cm4gcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pIDogdm9pZCAwO1xuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiXG52YXIgaW5kZXhPZiA9IFtdLmluZGV4T2Y7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJyLCBvYmope1xuICBpZiAoaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59OyIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwiIWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3Q9d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/dD1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJih0PXNlbGYpLHQuanMyY29mZmVlPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGUsdCx1O3JldHVybiBmdW5jdGlvbiBuKGUsdCx1KXtmdW5jdGlvbiByKG8scyl7aWYoIXRbb10pe2lmKCFlW29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCFzJiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGw9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBsLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsbH12YXIgZj10W29dPXtleHBvcnRzOnt9fTtlW29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciB1PWVbb11bMV1bdF07cmV0dXJuIHIodT91OnQpfSxmLGYuZXhwb3J0cyxuLGUsdCx1KX1yZXR1cm4gdFtvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzx1Lmxlbmd0aDtvKyspcih1W29dKTtyZXR1cm4gcn0oezE6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzO2k9ZShcIi4vbGliL3RyYW5zZm9ybXMvYmFzZVwiKTtyPWUoXCIuL2xpYi9idWlsZGVyL2Jhc2VcIik7bj1lKFwiLi9saWIvYnVpbGRlclwiKTtvPWUoXCIuL2xpYi9oZWxwZXJzXCIpLmJ1aWxkRXJyb3I7dC5leHBvcnRzPXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcy5idWlsZChlLHQpLmNvZGV9O3MuYnVpbGQ9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvLGE7aWYodD09bnVsbCl7dD17fX1pZih0LmZpbGVuYW1lPT1udWxsKXt0LmZpbGVuYW1lPVwiaW5wdXQuanNcIn1pZih0LmluZGVudD09bnVsbCl7dC5pbmRlbnQ9Mn10LnNvdXJjZT1lO3U9cy5wYXJzZUpTKGUsdCk7aT1zLnRyYW5zZm9ybSh1LHQpLHU9aS5hc3QsYT1pLndhcm5pbmdzO289cy5nZW5lcmF0ZSh1LHQpLG49by5jb2RlLHI9by5tYXA7cmV0dXJue2NvZGU6bixhc3Q6dSxtYXA6cix3YXJuaW5nczphfX07cy5wYXJzZUpTPWZ1bmN0aW9uKHQsdSl7dmFyIG4scixpO2lmKHU9PW51bGwpe3U9e319dHJ5e249ZShcImVzcHJpbWFcIik7cmV0dXJuIG4ucGFyc2UodCx7bG9jOnRydWUscmFuZ2U6dHJ1ZSxjb21tZW50OnRydWV9KX1jYXRjaChpKXtyPWk7dGhyb3cgbyhyLHQsdS5maWxlbmFtZSl9fTtzLnRyYW5zZm9ybT1mdW5jdGlvbih0LHUpe3ZhciBuLHIsbztpZih1PT1udWxsKXt1PXt9fXI9e307bz1mdW5jdGlvbihlKXtyZXR1cm4gaS5ydW4odCx1LGUscil9O249ISh1LmNvbW1lbnRzPT09ZmFsc2UpO2lmKG4pe28oW2UoXCIuL2xpYi90cmFuc2Zvcm1zL2NvbW1lbnRzXCIpXSl9byhbZShcIi4vbGliL3RyYW5zZm9ybXMvZnVuY3Rpb25zXCIpXSk7byhbZShcIi4vbGliL3RyYW5zZm9ybXMvZXhwb25lbnRzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL2lmc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9paWZlXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL2xpdGVyYWxzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL2xvb3BzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL21lbWJlcnNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvb2JqZWN0c1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9iaW5hcnlcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvZW1wdHlfc3RhdGVtZW50c1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9vdGhlcnNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvcHJlY2VkZW5jZVwiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9yZXR1cm5zXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL3N3aXRjaGVzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL3Vuc3VwcG9ydGVkXCIpXSk7byhbZShcIi4vbGliL3RyYW5zZm9ybXMvYmxvY2tzXCIpXSk7cmV0dXJue2FzdDp0LHdhcm5pbmdzOnIud2FybmluZ3N9fTtzLmdlbmVyYXRlPWZ1bmN0aW9uKGUsdCl7aWYodD09bnVsbCl7dD17fX1yZXR1cm4gbmV3IG4oZSx0KS5nZXQoKX07cy52ZXJzaW9uPWUoXCIuL3BhY2thZ2UuanNvblwiKS52ZXJzaW9ufSx7XCIuL2xpYi9idWlsZGVyXCI6MyxcIi4vbGliL2J1aWxkZXIvYmFzZVwiOjIsXCIuL2xpYi9oZWxwZXJzXCI6NSxcIi4vbGliL3RyYW5zZm9ybXMvYmFzZVwiOjYsXCIuL2xpYi90cmFuc2Zvcm1zL2JpbmFyeVwiOjcsXCIuL2xpYi90cmFuc2Zvcm1zL2Jsb2Nrc1wiOjgsXCIuL2xpYi90cmFuc2Zvcm1zL2NvbW1lbnRzXCI6OSxcIi4vbGliL3RyYW5zZm9ybXMvZW1wdHlfc3RhdGVtZW50c1wiOjEwLFwiLi9saWIvdHJhbnNmb3Jtcy9leHBvbmVudHNcIjoxMSxcIi4vbGliL3RyYW5zZm9ybXMvZnVuY3Rpb25zXCI6MTIsXCIuL2xpYi90cmFuc2Zvcm1zL2lmc1wiOjEzLFwiLi9saWIvdHJhbnNmb3Jtcy9paWZlXCI6MTQsXCIuL2xpYi90cmFuc2Zvcm1zL2xpdGVyYWxzXCI6MTUsXCIuL2xpYi90cmFuc2Zvcm1zL2xvb3BzXCI6MTYsXCIuL2xpYi90cmFuc2Zvcm1zL21lbWJlcnNcIjoxNyxcIi4vbGliL3RyYW5zZm9ybXMvb2JqZWN0c1wiOjE4LFwiLi9saWIvdHJhbnNmb3Jtcy9vdGhlcnNcIjoxOSxcIi4vbGliL3RyYW5zZm9ybXMvcHJlY2VkZW5jZVwiOjIwLFwiLi9saWIvdHJhbnNmb3Jtcy9yZXR1cm5zXCI6MjEsXCIuL2xpYi90cmFuc2Zvcm1zL3N3aXRjaGVzXCI6MjIsXCIuL2xpYi90cmFuc2Zvcm1zL3Vuc3VwcG9ydGVkXCI6MjMsXCIuL3BhY2thZ2UuanNvblwiOjYxLGVzcHJpbWE6NDh9XSwyOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX07cj1lKFwiLi9zdHJpcF9zcGFjZXNcIik7bj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSx0KXt0aGlzLnJvb3Q9ZTt0aGlzLm9wdGlvbnM9dCE9bnVsbD90Ont9O3RoaXMud2Fsaz1pKHRoaXMud2Fsayx0aGlzKTt0aGlzLnBhdGg9W119dC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Fsayh0aGlzLnJvb3QpfTt0LnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyO249dGhpcy5wYXRoLmxlbmd0aDt0aGlzLnBhdGgucHVzaChlKTtpZih0eXBlb2YgdCE9PVwic3RyaW5nXCIpe3Q9dm9pZCAwfXR8fCh0PWUudHlwZSk7dGhpcy5jdHg9e3BhdGg6dGhpcy5wYXRoLHR5cGU6dCxwYXJlbnQ6dGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMl19O3U9dGhpc1t0XTtpZih1KXtyPXUuY2FsbCh0aGlzLGUsdGhpcy5jdHgpO2lmKHRoaXMuZGVjb3JhdG9yIT1udWxsKXtyPXRoaXMuZGVjb3JhdG9yKGUscil9fWVsc2V7cj10aGlzLm9uVW5rbm93bk5vZGUoZSx0aGlzLmN0eCl9dGhpcy5wYXRoLnNwbGljZShuKTtyZXR1cm4gcn07dC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGU7ZT10aGlzLnJ1bigpO2U9cihlKTtyZXR1cm4gZS50b1N0cmluZ1dpdGhTb3VyY2VNYXAoKX07dC5wcm90b3R5cGUuZGVjb3JhdG9yPWZ1bmN0aW9uKHQsdSl7dmFyIG4scixpLG8scztuPWUoXCJzb3VyY2UtbWFwXCIpLlNvdXJjZU5vZGU7cmV0dXJuIG5ldyBuKHQhPW51bGw/KHI9dC5sb2MpIT1udWxsPyhpPXIuc3RhcnQpIT1udWxsP2kubGluZTp2b2lkIDA6dm9pZCAwOnZvaWQgMCx0IT1udWxsPyhvPXQubG9jKSE9bnVsbD8ocz1vLnN0YXJ0KSE9bnVsbD9zLmNvbHVtbjp2b2lkIDA6dm9pZCAwOnZvaWQgMCx0aGlzLm9wdGlvbnMuZmlsZW5hbWUsdSl9O3JldHVybiB0fSgpO3QuZXhwb3J0cz1ufSx7XCIuL3N0cmlwX3NwYWNlc1wiOjQsXCJzb3VyY2UtbWFwXCI6NTB9XSwzOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhLGwsZixjLHAsRCxoLG09ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoZC5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGQ9e30uaGFzT3duUHJvcGVydHk7cD1lKFwiLi4vaGVscGVyc1wiKSxmPXAucHJlcGVuZEFsbCxjPXAucXVvdGUsbD1wLm5ld2xpbmUsRD1wLnNwYWNlLHM9cC5kZWxpbWl0LG89cC5jb21tYURlbGltaXQsaD1wLnRvSW5kZW50LGE9cC5qb2luTGluZXM7aT1lKFwiLi4vdHJhbnNmb3Jtcy9iYXNlXCIpO3I9ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9bj1mdW5jdGlvbihlKXttKHQsZSk7ZnVuY3Rpb24gdChlLHUpe2lmKHU9PW51bGwpe3U9e319dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX2luZGVudD0wfXQucHJvdG90eXBlLlByb2dyYW09ZnVuY3Rpb24oZSl7dGhpcy5jb21tZW50cz1lLmNvbW1lbnRzO3JldHVybiB0aGlzLkJsb2NrU3RhdGVtZW50KGUpfTt0LnByb3RvdHlwZS5FeHByZXNzaW9uU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBsKHRoaXMud2FsayhlLmV4cHJlc3Npb24pKX07dC5wcm90b3R5cGUuQXNzaWdubWVudEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ7dD10aGlzLnBhcmVuKEQoW3RoaXMud2FsayhlLmxlZnQpLGUub3BlcmF0b3IsdGhpcy53YWxrKGUucmlnaHQpXSkpO2lmKGUucmlnaHQudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCIpe3Q9W1wiXFxuXCIsdGhpcy5pbmRlbnQoKSx0LFwiXFxuXCJdfXJldHVybiB0fTt0LnByb3RvdHlwZS5JZGVudGlmaWVyPWZ1bmN0aW9uKGUpe3JldHVybltlLm5hbWVdfTt0LnByb3RvdHlwZS5VbmFyeUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXJndW1lbnQudHlwZT09PVwiVW5hcnlFeHByZXNzaW9uXCJ9O3U9ZnVuY3Rpb24oKXtyZXR1cm4vXlthLXpdKyQvaS50ZXN0KGUub3BlcmF0b3IpfTtpZih0KCl8fHUoKSl7cmV0dXJuIHRoaXMucGFyZW4oW2Uub3BlcmF0b3IsXCIgXCIsdGhpcy53YWxrKGUuYXJndW1lbnQpXSl9ZWxzZXtyZXR1cm4gdGhpcy5wYXJlbihbZS5vcGVyYXRvcix0aGlzLndhbGsoZS5hcmd1bWVudCldKX19O3QucHJvdG90eXBlLkJpbmFyeUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLm9wZXJhdG9yO2lmKHQ9PT1cImluXCIpe3Q9XCJvZlwifXJldHVybiB0aGlzLnBhcmVuKEQoW3RoaXMud2FsayhlLmxlZnQpLHQsdGhpcy53YWxrKGUucmlnaHQpXSkpfTt0LnByb3RvdHlwZS5MaXRlcmFsPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlLnZhbHVlPT09XCJzdHJpbmdcIil7cmV0dXJuW2MoZS52YWx1ZSldfWVsc2V7cmV0dXJuW2UucmF3XX19O3QucHJvdG90eXBlLk1lbWJlckV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLmNvbXB1dGVkP1tcIltcIix0aGlzLndhbGsoZS5wcm9wZXJ0eSksXCJdXCJdOmUuX3ByZWZpeGVkP1t0aGlzLndhbGsoZS5wcm9wZXJ0eSldOltcIi5cIix0aGlzLndhbGsoZS5wcm9wZXJ0eSldO3JldHVybiB0aGlzLnBhcmVuKFt0aGlzLndhbGsoZS5vYmplY3QpLHRdKX07dC5wcm90b3R5cGUuTG9naWNhbEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQsdTt1PXtcInx8XCI6XCJvclwiLFwiJiZcIjpcImFuZFwifTt0PXVbZS5vcGVyYXRvcl07cmV0dXJuIHRoaXMucGFyZW4oW3RoaXMud2FsayhlLmxlZnQpLFwiIFwiLHQsXCIgXCIsdGhpcy53YWxrKGUucmlnaHQpXSl9O3QucHJvdG90eXBlLlRoaXNFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKGUuX3ByZWZpeCl7cmV0dXJuW1wiQFwiXX1lbHNle3JldHVybltcInRoaXNcIl19fTt0LnByb3RvdHlwZS5DYWxsRXhwcmVzc2lvbj1mdW5jdGlvbihlLHQpe3ZhciB1LG4scjt1PXRoaXMud2FsayhlLmNhbGxlZSk7cj10aGlzLm1ha2VTZXF1ZW5jZShlW1wiYXJndW1lbnRzXCJdKTtlLl9pc1N0YXRlbWVudD10LnBhcmVudC50eXBlPT09XCJFeHByZXNzaW9uU3RhdGVtZW50XCI7bj1yLmxlbmd0aD4wO2lmKGUuX2lzU3RhdGVtZW50JiZuKXtyZXR1cm4gRChbdSxyXSl9ZWxzZXtyZXR1cm5bdSx0aGlzLnBhcmVuKHIsdHJ1ZSldfX07dC5wcm90b3R5cGUuSWZTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PWUuYWx0ZXJuYXRlO2lmKCh0IT1udWxsP3QudHlwZTp2b2lkIDApPT09XCJJZlN0YXRlbWVudFwiKXt1PXRoaXMuaW5kZW50KFtcImVsc2UgXCIsdGhpcy53YWxrKGUuYWx0ZXJuYXRlLFwiSWZTdGF0ZW1lbnRcIildKX1lbHNlIGlmKCh0IT1udWxsP3QudHlwZTp2b2lkIDApPT09XCJCbG9ja1N0YXRlbWVudFwiKXt1PXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm5bdSxcImVsc2VcIixcIlxcblwiLHQud2FsayhlLmFsdGVybmF0ZSldfX0odGhpcykpfWVsc2UgaWYodCE9bnVsbCl7dT10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuW3UsXCJlbHNlXCIsXCJcXG5cIix0LmluZGVudCh0LndhbGsoZS5hbHRlcm5hdGUpKV19fSh0aGlzKSl9ZWxzZXt1PVtdfXJldHVybiB0aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHIsaSxvO2k9dC53YWxrKGUudGVzdCk7cj10LndhbGsoZS5jb25zZXF1ZW50KTtpZihlLmNvbnNlcXVlbnQudHlwZSE9PVwiQmxvY2tTdGF0ZW1lbnRcIil7cj10LmluZGVudChyKX1vPWUuX25lZ2F0aXZlP1widW5sZXNzXCI6XCJpZlwiO3JldHVybltvLFwiIFwiLGksXCJcXG5cIixyLHVdfX0odGhpcykpfTt0LnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYWtlU3RhdGVtZW50cyhlLGUuYm9keSl9O3QucHJvdG90eXBlLm1ha2VTdGF0ZW1lbnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbyxzO3M9dC5tYXAodGhpcy53YWxrKTtvPVtdO2Zvcih1PXI9MCxpPXMubGVuZ3RoO3I8aTt1PSsrcil7bj1zW3VdO2lmKHRbdV0udHlwZSE9PVwiQmxvY2tTdGF0ZW1lbnRcIil7by5wdXNoKHRoaXMuaW5kZW50KCkpfW8ucHVzaChuKX1yZXR1cm4gb307dC5wcm90b3R5cGUuTGluZUNvbW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1wiI1wiLGUudmFsdWUsXCJcXG5cIl19O3QucHJvdG90eXBlLkJsb2NrQ29tbWVudD1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9KFwiIyMjXCIrZS52YWx1ZStcIiMjI1wiKS5zcGxpdChcIlxcblwiKTt1PVtzKHQsW1wiXFxuXCIsdGhpcy5pbmRlbnQoKV0pLFwiXFxuXCJdO3JldHVybltcIlxcblwiLHRoaXMuaW5kZW50KCksdSxcIlxcblwiXX07dC5wcm90b3R5cGUuUmV0dXJuU3RhdGVtZW50PWZ1bmN0aW9uKGUpe2lmKGUuYXJndW1lbnQpe3JldHVybiBEKFtcInJldHVyblwiLFt0aGlzLndhbGsoZS5hcmd1bWVudCksXCJcXG5cIl1dKX1lbHNle3JldHVybltcInJldHVyblwiLFwiXFxuXCJdfX07dC5wcm90b3R5cGUuQXJyYXlFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dT1lLmVsZW1lbnRzLmxlbmd0aDt0PXU9PT0xO2lmKHU9PT0wKXtyZXR1cm5bXCJbXVwiXX1lbHNlIGlmKHQpe3JldHVybiBEKFtcIltcIixlLmVsZW1lbnRzLm1hcCh0aGlzLndhbGspLFwiXVwiXSl9ZWxzZXtyZXR1cm4gdGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHUpe3ZhciBuLHI7cj1lLmVsZW1lbnRzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbCh0LndhbGsoZSkpfSk7bj1mKHIsdC5pbmRlbnQoKSk7cmV0dXJuW1wiW1wiLFwiXFxuXCIsbix1LFwiXVwiXX19KHRoaXMpKX19O3QucHJvdG90eXBlLk9iamVjdEV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO249ZS5wcm9wZXJ0aWVzLmxlbmd0aDt1PWUuX2JyYWNlZDtpZihuPT09MCl7cmV0dXJuW1wie31cIl19ZWxzZSBpZihuPT09MSl7bj1lLnByb3BlcnRpZXMubWFwKHRoaXMud2Fsayk7aWYodSl7cmV0dXJuIHRoaXMucGFyZW4oRChbXCJ7XCIsbixcIn1cIl0pKX1lbHNle3JldHVybiB0aGlzLnBhcmVuKFtuXSl9fWVsc2UgaWYoZS5fbGFzdCl7bj1lLnByb3BlcnRpZXMubWFwKHRoaXMud2Fsayk7cmV0dXJuIHMobixbXCJcXG5cIix0aGlzLmluZGVudCgpXSl9ZWxzZXtuPXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe249ZS5wcm9wZXJ0aWVzLm1hcCh0LndhbGspO3JldHVybltcIlxcblwiLGEobix0LmluZGVudCgpKV19fSh0aGlzKSk7aWYodSl7cmV0dXJuIHRoaXMucGFyZW4oW1wie1wiLG4sXCJcXG5cIix0aGlzLmluZGVudCgpLFwifVwiXSl9ZWxzZXtyZXR1cm4gdGhpcy5wYXJlbihbbl0pfX19O3QucHJvdG90eXBlLlByb3BlcnR5PWZ1bmN0aW9uKGUpe2lmKGUua2luZCE9PVwiaW5pdFwiKXt0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eTogbm90IHN1cmUgYWJvdXQga2luZCBcIitlLmtpbmQpfXJldHVybiBEKFtbdGhpcy53YWxrKGUua2V5KSxcIjpcIl0sdGhpcy53YWxrKGUudmFsdWUpXSl9O3QucHJvdG90eXBlLlZhcmlhYmxlRGVjbGFyYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLmRlY2xhcmF0aW9ucy5tYXAodGhpcy53YWxrKTtyZXR1cm4gcyh0LHRoaXMuaW5kZW50KCkpfTt0LnByb3RvdHlwZS5WYXJpYWJsZURlY2xhcmF0b3I9ZnVuY3Rpb24oZSl7dmFyIHQ7dD1bdGhpcy53YWxrKGUuaWQpLFwiID0gXCIsbCh0aGlzLndhbGsoZS5pbml0KSldO2lmKGUuaW5pdC50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIil7dD1bXCJcXG5cIix0aGlzLmluZGVudCgpLHQsXCJcXG5cIl19cmV0dXJuIHR9O3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbj1mdW5jdGlvbihlLHQpe3ZhciB1LG47bj10aGlzLm1ha2VQYXJhbXMoZS5wYXJhbXMsZS5kZWZhdWx0cyk7dT10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuW24sXCItPlwiLFwiXFxuXCIsdC53YWxrKGUuYm9keSldfX0odGhpcykpO2lmKGUuX3BhcmVudGhlc2l6ZWQpe3JldHVybltcIihcIix1LHRoaXMuaW5kZW50KCksXCIpXCJdfWVsc2V7cmV0dXJuIHV9fTt0LnByb3RvdHlwZS5FbXB0eVN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXX07dC5wcm90b3R5cGUuU2VxdWVuY2VFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5leHByZXNzaW9ucy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybltlLndhbGsodCksXCJcXG5cIl19fSh0aGlzKSk7cmV0dXJuIHModCx0aGlzLmluZGVudCgpKX07dC5wcm90b3R5cGUuTmV3RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdCx1LG4scjt1PSgobj1lLmNhbGxlZSkhPW51bGw/bi50eXBlOnZvaWQgMCk9PT1cIklkZW50aWZpZXJcIj9bdGhpcy53YWxrKGUuY2FsbGVlKV06W1wiKFwiLHRoaXMud2FsayhlLmNhbGxlZSksXCIpXCJdO3Q9KChyPWVbXCJhcmd1bWVudHNcIl0pIT1udWxsP3IubGVuZ3RoOnZvaWQgMCk/W1wiKFwiLHRoaXMubWFrZVNlcXVlbmNlKGVbXCJhcmd1bWVudHNcIl0pLFwiKVwiXTpbXTtyZXR1cm4gdGhpcy5wYXJlbihbXCJuZXcgXCIsdSx0XSl9O3QucHJvdG90eXBlLldoaWxlU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltcIndoaWxlIFwiLHRoaXMud2FsayhlLnRlc3QpLFwiXFxuXCIsdGhpcy5tYWtlTG9vcEJvZHkoZS5ib2R5KV19O3QucHJvdG90eXBlLkNvZmZlZUxvb3BTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1wibG9vcFwiLFwiXFxuXCIsdGhpcy5tYWtlTG9vcEJvZHkoZS5ib2R5KV19O3QucHJvdG90eXBlLkJyZWFrU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltcImJyZWFrXCIsXCJcXG5cIl19O3QucHJvdG90eXBlLkNvbnRpbnVlU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltcImNvbnRpbnVlXCIsXCJcXG5cIl19O3QucHJvdG90eXBlLkRlYnVnZ2VyU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltcImRlYnVnZ2VyXCIsXCJcXG5cIl19O3QucHJvdG90eXBlLlRyeVN0YXRlbWVudD1mdW5jdGlvbihlKXt2YXIgdCx1LG47bj10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm5bXCJ0cnlcIixcIlxcblwiLHQud2FsayhlLmJsb2NrKV19fSh0aGlzKSk7dD10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuW3UsdC53YWxrKGUuaGFuZGxlcildfX0odGhpcykpO3U9ZS5maW5hbGl6ZXIhPW51bGw/dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHUpe3JldHVyblt1LFwiZmluYWxseVwiLFwiXFxuXCIsdC53YWxrKGUuZmluYWxpemVyKV19fSh0aGlzKSk6W107cmV0dXJuW24sdCx1XX07dC5wcm90b3R5cGUuQ2F0Y2hDbGF1c2U9ZnVuY3Rpb24oZSl7cmV0dXJuW1wiY2F0Y2ggXCIsdGhpcy53YWxrKGUucGFyYW0pLFwiXFxuXCIsdGhpcy53YWxrKGUuYm9keSldfTt0LnByb3RvdHlwZS5UaHJvd1N0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCJ0aHJvdyBcIix0aGlzLndhbGsoZS5hcmd1bWVudCksXCJcXG5cIl19O3QucHJvdG90eXBlLkNvbmRpdGlvbmFsRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbihEKFtcImlmXCIsdGhpcy53YWxrKGUudGVzdCksXCJ0aGVuXCIsdGhpcy53YWxrKGUuY29uc2VxdWVudCksXCJlbHNlXCIsdGhpcy53YWxrKGUuYWx0ZXJuYXRlKV0pKX07dC5wcm90b3R5cGUuVXBkYXRlRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtpZihlLnByZWZpeCl7cmV0dXJuW2Uub3BlcmF0b3IsdGhpcy53YWxrKGUuYXJndW1lbnQpXX1lbHNle3JldHVyblt0aGlzLndhbGsoZS5hcmd1bWVudCksZS5vcGVyYXRvcl19fTt0LnByb3RvdHlwZS5Td2l0Y2hTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0Lm1ha2VTdGF0ZW1lbnRzKGUsZS5jYXNlcyl9fSh0aGlzKSk7dT10aGlzLndhbGsoZS5kaXNjcmltaW5hbnQpO2lmKGUuZGlzY3JpbWluYW50LnR5cGU9PT1cIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiKXt1PVtcIihcIix1LFwiKVwiXX1yZXR1cm5bXCJzd2l0Y2ggXCIsdSxcIlxcblwiLHRdfTt0LnByb3RvdHlwZS5Db2ZmZWVMaXN0RXhwcmVzc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYWtlU2VxdWVuY2UoZS5leHByZXNzaW9ucyl9O3QucHJvdG90eXBlLlN3aXRjaENhc2U9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PWUudGVzdD9bXCJ3aGVuIFwiLHRoaXMud2FsayhlLnRlc3QpXTpbXCJlbHNlXCJdO3U9dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQubWFrZVN0YXRlbWVudHMoZSxlLmNvbnNlcXVlbnQpfX0odGhpcykpO3JldHVyblt0LFwiXFxuXCIsdV19O3QucHJvdG90eXBlLkZvckluU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjtpZihlLmxlZnQudHlwZSE9PVwiVmFyaWFibGVEZWNsYXJhdGlvblwiKXt1PXRoaXMud2FsayhlLmxlZnQpO249e3R5cGU6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsZXhwcmVzc2lvbjp7dHlwZTpcIkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uXCIscmF3OnUrXCIgPSBcIit1fX07ZS5ib2R5LmJvZHk9W25dLmNvbmNhdChlLmJvZHkuYm9keSl9ZWxzZXt1PXRoaXMud2FsayhlLmxlZnQuZGVjbGFyYXRpb25zWzBdLmlkKX10PXRoaXMubWFrZUxvb3BCb2R5KGUuYm9keSk7cmV0dXJuW1wiZm9yIFwiLHUsXCIgb2YgXCIsdGhpcy53YWxrKGUucmlnaHQpLFwiXFxuXCIsdF19O3QucHJvdG90eXBlLm1ha2VMb29wQm9keT1mdW5jdGlvbihlKXt2YXIgdDt0PShlIT1udWxsP2UudHlwZTp2b2lkIDApPT09XCJCbG9ja1N0YXRlbWVudFwiO2lmKCFlfHx0JiZlLmJvZHkubGVuZ3RoPT09MCl7cmV0dXJuIHRoaXMuaW5kZW50KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybltlLmluZGVudCgpLFwiY29udGludWVcIixcIlxcblwiXX19KHRoaXMpKX1lbHNlIGlmKHQpe3JldHVybiB0aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC53YWxrKGUpfX0odGhpcykpfWVsc2V7cmV0dXJuIHRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVyblt0LmluZGVudCgpLHQud2FsayhlKV19fSh0aGlzKSl9fTt0LnByb3RvdHlwZS5Db2ZmZWVFc2NhcGVkRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtpZihlLl9wYXJlbnRoZXNpemVkKXtyZXR1cm5bXCIoYFwiLGUucmF3LFwiYClcIl19ZWxzZXtyZXR1cm5bXCJgXCIsZS5yYXcsXCJgXCJdfX07dC5wcm90b3R5cGUuQ29mZmVlUHJvdG90eXBlRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtpZihlLmNvbXB1dGVkKXtyZXR1cm5bdGhpcy53YWxrKGUub2JqZWN0KSxcIjo6W1wiLHRoaXMud2FsayhlLnByb3BlcnR5KSxcIl1cIl19ZWxzZXtyZXR1cm5bdGhpcy53YWxrKGUub2JqZWN0KSxcIjo6XCIsdGhpcy53YWxrKGUucHJvcGVydHkpXX19O3QucHJvdG90eXBlLkNvZmZlZURvRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gRChbXCJkb1wiLHRoaXMud2FsayhlW1wiZnVuY3Rpb25cIl0pXSl9O3QucHJvdG90eXBlLm1ha2VTZXF1ZW5jZT1mdW5jdGlvbihlKXt2YXIgdCx1LG4scixpO2Zvcih1PXI9MCxpPWUubGVuZ3RoO3I8aTt1PSsrcil7dD1lW3VdO249dT09PWUubGVuZ3RoLTE7aWYoIW4pe2lmKHQudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCIpe3QuX3BhcmVudGhlc2l6ZWQ9dHJ1ZX1lbHNlIGlmKHQudHlwZT09PVwiT2JqZWN0RXhwcmVzc2lvblwiKXt0Ll9icmFjZWQ9dHJ1ZX19fXJldHVybiBvKGUubWFwKHRoaXMud2FsaykpfTt0LnByb3RvdHlwZS5tYWtlUGFyYW1zPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbyxhO289W107Zm9yKG49cj0wLGk9ZS5sZW5ndGg7cjxpO249KytyKXthPWVbbl07aWYodFtuXSl7dT10aGlzLndhbGsodFtuXSk7by5wdXNoKFt0aGlzLndhbGsoYSksXCIgPSBcIix1XSl9ZWxzZXtvLnB1c2godGhpcy53YWxrKGEpKX19aWYoZS5sZW5ndGgpe3JldHVybltcIihcIixzKG8sXCIsIFwiKSxcIikgXCJdfWVsc2V7cmV0dXJuW119fTt0LnByb3RvdHlwZS5wYXJlbnRoZXNpemVBcmd1bWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHIsaSxvLHM7bz1lW1wiYXJndW1lbnRzXCJdO3M9W107Zm9yKHU9cj0wLGk9by5sZW5ndGg7cjxpO3U9KytyKXt0PW9bdV07bj11PT09ZVtcImFyZ3VtZW50c1wiXS5sZW5ndGgtMTtpZih0LnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiKXtpZighbil7cy5wdXNoKHQuX3BhcmVudGhlc2l6ZWQ9dHJ1ZSl9ZWxzZXtzLnB1c2godm9pZCAwKX19ZWxzZXtzLnB1c2godm9pZCAwKX19cmV0dXJuIHN9O3QucHJvdG90eXBlLmluZGVudD1mdW5jdGlvbihlKXt2YXIgdCx1LG47aWYodHlwZW9mIGU9PT1cImZ1bmN0aW9uXCIpe3Q9dGhpcy5pbmRlbnQoKTt0aGlzLl9pbmRlbnQrPTE7dT1lKHQpO3RoaXMuX2luZGVudC09MTtyZXR1cm4gdX1lbHNlIGlmKGUpe3JldHVyblt0aGlzLmluZGVudCgpLGVdfWVsc2V7bj1oKHRoaXMub3B0aW9ucy5pbmRlbnQpO3JldHVybiBBcnJheSh0aGlzLl9pbmRlbnQrMSkuam9pbihuKX19O3QucHJvdG90eXBlLnBhcmVuPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjtpZih0PT1udWxsKXt0PShuPXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdKSE9bnVsbD9uLl9wYXJlbnRoZXNpemVkOnZvaWQgMH11PWUudG9TdHJpbmcoKS5tYXRjaCgvXFxuJC8pO2lmKHQpe2lmKHUpe3JldHVybltcIihcIixlLHRoaXMuaW5kZW50KCksXCIpXCJdfWVsc2V7cmV0dXJuW1wiKFwiLGUsXCIpXCJdfX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUub25Vbmtub3duTm9kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnN5bnRheEVycm9yKGUsZS50eXBlK1wiIGlzIG5vdCBzdXBwb3J0ZWRcIil9O3QucHJvdG90eXBlLnN5bnRheEVycm9yPWkucHJvdG90eXBlLnN5bnRheEVycm9yO3JldHVybiB0fShyKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuLi90cmFuc2Zvcm1zL2Jhc2VcIjo2LFwiLi9iYXNlXCI6Mn1dLDQ6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGEsbDtuPS9eXFxzKlxcbitcXHMqJC87bD1mdW5jdGlvbihlKXtlPWEoZSk7ZT1zKGUpO2U9byhlKTtlPWkoZSk7cmV0dXJuIGV9O2k9ZnVuY3Rpb24oZSl7dmFyIHQsdTt1PTA7dD1udWxsO3JldHVybiByKGUse30sZnVuY3Rpb24oZSl7aWYodT09PTB8fHU9PT0xJiZlLm1hdGNoKG4pKXt1PTE7cmV0dXJuIGV9ZWxzZSBpZih1PT09MSYmZS5tYXRjaCgvXlsgXFx0XSskLykpe3Q9ZTt1PTI7cmV0dXJuXCJcIn1lbHNlIGlmKHU9PT0yKXt1PTE7aWYoZS5tYXRjaChuKSl7cmV0dXJuIGV9ZWxzZXtyZXR1cm4gdCtlfX1lbHNle3U9MDtyZXR1cm4gZX19KX07YT1mdW5jdGlvbihlKXtyZXR1cm4gcihlLHt9LGZ1bmN0aW9uKGUpe2lmKGUubWF0Y2gobikpe3JldHVyblwiXCJ9ZWxzZXt0aGlzW1wiYnJlYWtcIl0oKTtyZXR1cm4gZX19KX07cz1mdW5jdGlvbihlKXtyZXR1cm4gcihlLHtyZXZlcnNlOnRydWV9LGZ1bmN0aW9uKGUpe2lmKGUubWF0Y2gobikpe3JldHVyblwiXCJ9ZWxzZXt0aGlzW1wiYnJlYWtcIl0oKTtyZXR1cm4gZStcIlxcblwifX0pfTtvPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9MDtyZXR1cm4gcihlLHt9LGZ1bmN0aW9uKGUpe2lmKGU9PT1cIlxcblwiKXt0Kz0xfWVsc2UgaWYoZS5tYXRjaCgvXlxccyokLykpe31lbHNle3Q9MH1pZih0Pj0zKXtyZXR1cm5cIlwifWVsc2V7cmV0dXJuIGV9fSl9O3I9ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaTtpZih0PT1udWxsKXt0PXt9fW49ZmFsc2U7cj17XCJicmVha1wiOmZ1bmN0aW9uKGUpe3JldHVybiBuPXRydWV9fTtpPWZ1bmN0aW9uKGUsdCx1KXt2YXIgbyxzLGEsbCxmLGMscCxELGgsbSxkLEE7aWYodD09bnVsbCl7dD17fX1EPXQucmV2ZXJzZT9mdW5jdGlvbigpe2Q9W107Zm9yKHZhciB0PWg9ZS5jaGlsZHJlbi5sZW5ndGgtMTtoPD0wP3Q8PTA6dD49MDtoPD0wP3QrKzp0LS0pe2QucHVzaCh0KX1yZXR1cm4gZH0uYXBwbHkodGhpcyk6ZnVuY3Rpb24oKXtBPVtdO2Zvcih2YXIgdD0wLHU9ZS5jaGlsZHJlbi5sZW5ndGg7MDw9dT90PHU6dD51OzA8PXU/dCsrOnQtLSl7QS5wdXNoKHQpfXJldHVybiBBfS5hcHBseSh0aGlzKTtmb3IoZj0wLGM9RC5sZW5ndGg7ZjxjO2YrKyl7cz1EW2ZdO2lmKG4pe3JldHVybiBlfW89ZS5jaGlsZHJlbltzXTtpZighbyl7fWVsc2UgaWYoby5jaGlsZHJlbil7aShvLHQsdSl9ZWxzZSBpZihvIT09XCJcIil7cD11LmNhbGwocixvKTtlLmNoaWxkcmVuW3NdPXB9fXJldHVybiBlfTtyZXR1cm4gaS5jYWxsKHIsZSx0LHUpfTt0LmV4cG9ydHM9bH0se31dLDU6W2Z1bmN0aW9uKGUsdCx1KXt1LmRlbGltaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvO289W107Zm9yKHU9cj0wLGk9ZS5sZW5ndGg7cjxpO3U9KytyKXtuPWVbdV07aWYodT4wKXtvLnB1c2godCl9by5wdXNoKG4pfXJldHVybiBvfTt1LmNvbW1hRGVsaW1pdD1mdW5jdGlvbihlKXt2YXIgdCx1LG4scixpO2k9W107Zm9yKHQ9bj0wLHI9ZS5sZW5ndGg7bjxyO3Q9KytuKXt1PWVbdF07aWYodD4wKXtpZigvXlxcbi8udGVzdCh1LnRvU3RyaW5nKCkpKXtpLnB1c2goXCIsXCIpfWVsc2V7aS5wdXNoKFwiLCBcIil9fWkucHVzaCh1KX1yZXR1cm4gaX07dS5wcmVwZW5kQWxsPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbztvPVtdO2Zvcih1PXI9MCxpPWUubGVuZ3RoO3I8aTt1PSsrcil7bj1lW3VdO28ucHVzaCh0KTtvLnB1c2gobil9cmV0dXJuIG99O3UuYnVpbGRFcnJvcj1mdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhLGwsZixjLHAsRCxoLG0sZCxBLEMsRTtpZih1PT1udWxsKXt1PVwiXCJ9aWYoZS5qczJjb2ZmZWUpe3JldHVybiBlfWk9ZS5kZXNjcmlwdGlvbjtsPShtPShkPWUuc3RhcnQpIT1udWxsP2QubGluZTp2b2lkIDApIT1udWxsP206ZS5saW5lTnVtYmVyO3I9KEE9KEM9KEU9ZS5zdGFydCkhPW51bGw/RS5jb2x1bW46dm9pZCAwKSE9bnVsbD9DOmUuY29sdW1uJiZlLmNvbHVtbi0xKSE9bnVsbD9BOjA7cz11K1wiOlwiK2wrXCI6XCIrcitcIjogXCIraTtmPXQuc3BsaXQoXCJcXG5cIik7RD1NYXRoLm1heChsLTMsMCk7Yz1sLTE7bz1jLnRvU3RyaW5nKCkubGVuZ3RoO2E9MTtpZihlLmVuZCl7YT1NYXRoLm1heChlLmVuZC5jb2x1bW4tZS5zdGFydC5jb2x1bW4sMSl9aD1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkoMStvLWUudG9TdHJpbmcoKS5sZW5ndGgpLmpvaW4oXCIgXCIpK2V9O3Q9Zi5zbGljZShELCtjKzF8fDllOSkubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGgoMSt0K0QpK1wiICBcIitlfSk7dC5wdXNoKEFycmF5KG8rMykuam9pbihcIiBcIikrQXJyYXkocisxKS5qb2luKFwiIFwiKStBcnJheShhKzEpLmpvaW4oXCJeXCIpKTt0PXQuam9pbihcIlxcblwiKTtwPXMrXCJcXG5cXG5cIit0O249ZTtlPW5ldyBFcnJvcihwKTtlLmZpbGVuYW1lPXU7ZS5kZXNjcmlwdGlvbj1uLmRlc2NyaXB0aW9uO2Uuc3RhcnQ9e2xpbmU6bCxjb2x1bW46cn07ZS5lbmQ9bi5lbmQ7ZS5zb3VyY2VQcmV2aWV3PXQ7ZS5qczJjb2ZmZWU9dHJ1ZTtyZXR1cm4gZX07dS5zcGFjZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSx0LHUpe2lmKHU9PT0wKXtyZXR1cm4gZS5jb25jYXQoW3RdKX1lbHNlIGlmKHQudG9TdHJpbmcoKS5zdWJzdHIoMCwxKT09PVwiXFxuXCIpe3JldHVybiBlLmNvbmNhdChbdF0pfWVsc2V7cmV0dXJuIGUuY29uY2F0KFtcIiBcIix0XSl9fSxbXSl9O3UubmV3bGluZT1mdW5jdGlvbihlKXtpZigvXFxuJC8udGVzdChlLnRvU3RyaW5nKCkpKXtyZXR1cm4gZX1lbHNle3JldHVybltlLFwiXFxuXCJdfX07dS5pbnNwZWN0PWZ1bmN0aW9uKHQpe3JldHVyblwifn5+flxcblwiK2UoXCJ1dGlsXCIpLmluc3BlY3QodCx7ZGVwdGg6MWUzLGNvbG9yczp0cnVlfSkrXCJcXG5+fn5+XCJ9O3UucmVwbGFjZT1mdW5jdGlvbihlLHQpe3QucmFuZ2U9ZS5yYW5nZTt0LmxvYz1lLmxvYztyZXR1cm4gdH07dS5jbG9uZT1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSl9O3UucXVvdGU9ZnVuY3Rpb24oZSl7dmFyIHQsdTtpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpO3Q9ZnVuY3Rpb24oKXt2YXIgZSx1LG47bj1bXTtmb3IoZT0wLHU9NC10Lmxlbmd0aDswPD11P2U8dTplPnU7MDw9dT9lKys6ZS0tKXtuLnB1c2goXCIwXCIpfXJldHVybiBufSgpLmpvaW4oXCJcIikrdDtyZXR1cm5cIlxcXFx1XCIrdH07dT1lLnJlcGxhY2UoL1xcXFwvZyxcIlxcXFxcXFxcXCIpLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpLnJlcGxhY2UoL1xcbi9nLFwiXFxcXG5cIikucmVwbGFjZSgvW1xcdTAwMDAtXFx1MDAxOVxcdTAwYWRcXHUyMDBiXFx1MjAyOFxcdTIwMjlcXHVmZWZmXS9nLHQpO3JldHVyblwiJ1wiK3UrXCInXCJ9ZWxzZXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9fTt1LmdldFByZWNlZGVuY2U9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHI7cj1lLnR5cGU7dT1mdW5jdGlvbih0KXtyZXR1cm4gdC5pbmRleE9mKGUub3BlcmF0b3IpPi0xfTt0PXtcIioqXCI6MTcsXCIqXCI6MTQsXCIvXCI6MTQsXCIlXCI6MTQsXCIrXCI6MTMsXCItXCI6MTMsXCI8PFwiOjEyLFwiPj5cIjoxMixcIj4+PlwiOjEyLFwiPFwiOjExLFwiPlwiOjExLFwiPD1cIjoxMSxcIj49XCI6MTEsXCJpblwiOjExLFwiaW5zdGFuY2VvZlwiOjExLFwiPT1cIjoxMCxcIj09PVwiOjEwLFwiIT1cIjoxMCxcIiE9PVwiOjEwLFwiJlwiOjksXCJeXCI6OCxcInxcIjo3fTtuPXtcIiYmXCI6NixcInx8XCI6NX07c3dpdGNoKHIpe2Nhc2VcIkxpdGVyYWxcIjpjYXNlXCJJZGVudGlmaWVyXCI6cmV0dXJuIDk5O2Nhc2VcIk1lbWJlckV4cHJlc3Npb25cIjpjYXNlXCJDYWxsRXhwcmVzc2lvblwiOnJldHVybiAxODtjYXNlXCJOZXdFeHByZXNzaW9uXCI6aWYoZVtcImFyZ3VtZW50c1wiXS5sZW5ndGg9PT0wKXtyZXR1cm4gMTd9ZWxzZXtyZXR1cm4gMTh9YnJlYWs7Y2FzZVwiVXBkYXRlRXhwcmVzc2lvblwiOmlmKGUucHJlZml4KXtyZXR1cm4gMTV9ZWxzZXtyZXR1cm4gMTZ9YnJlYWs7Y2FzZVwiVW5hcnlFeHByZXNzaW9uXCI6cmV0dXJuIDE1O2Nhc2VcIkJpbmFyeUV4cHJlc3Npb25cIjpyZXR1cm4gdFtlLm9wZXJhdG9yXTtjYXNlXCJMb2dpY2FsRXhwcmVzc2lvblwiOnJldHVybiBuW2Uub3BlcmF0b3JdO2Nhc2VcIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiOnJldHVybiA0O2Nhc2VcIkFzc2lnbm1lbnRFeHByZXNzaW9uXCI6cmV0dXJuIDM7Y2FzZVwiU2VxdWVuY2VFeHByZXNzaW9uXCI6cmV0dXJuIDA7ZGVmYXVsdDpyZXR1cm4tMX19O3UubGFzdFN0YXRlbWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaTtmb3IodD1uPWk9ZS5sZW5ndGgtMTtpPD0wP248PTA6bj49MDt0PWk8PTA/KytuOi0tbil7cj1lW3RdO2lmKCFyKXtjb250aW51ZX1pZighdS5pc0NvbW1lbnQocikpe3JldHVybiByfX19O3UuZ2V0UmV0dXJuU3RhdGVtZW50cz1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvO3I9dS5nZXRSZXR1cm5TdGF0ZW1lbnRzLGk9dS5sYXN0U3RhdGVtZW50O2lmKCFlKXtyZXR1cm59ZWxzZSBpZihlLmxlbmd0aCl7bz1pKGUpfWVsc2V7bz1lfWlmKCFvKXtyZXR1cm5bXX1lbHNlIGlmKG8udHlwZT09PVwiUmV0dXJuU3RhdGVtZW50XCIpe3JldHVybltvXX1lbHNlIGlmKG8udHlwZT09PVwiQmxvY2tTdGF0ZW1lbnRcIil7cmV0dXJuIHIoby5ib2R5KX1lbHNlIGlmKG8udHlwZT09PVwiSWZTdGF0ZW1lbnRcIiYmby5jb25zZXF1ZW50JiZvLmFsdGVybmF0ZSl7bj1yKG8uY29uc2VxdWVudCk7dD1yKG8uYWx0ZXJuYXRlKTtpZihuLmxlbmd0aD4wJiZ0Lmxlbmd0aD4wKXtyZXR1cm4gbi5jb25jYXQodCl9ZWxzZXtyZXR1cm5bXX19ZWxzZXtyZXR1cm5bXX19O3Uuam9pbkxpbmVzPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbyxzO3M9W107Zm9yKHU9aT0wLG89ZS5sZW5ndGg7aTxvO3U9KytpKXtyPWVbdV07cy5wdXNoKHQpO3MucHVzaChyKTtuPXUhPT1lLmxlbmd0aC0xO2lmKCFyLnRvU3RyaW5nKCkubWF0Y2goL1xcbiQvKSYmbil7cy5wdXNoKFwiXFxuXCIpfX1yZXR1cm4gc307dS5yZXNlcnZlZD17a2V5d29yZHM6W1widGhlblwiLFwidW5sZXNzXCIsXCJ1bnRpbFwiLFwibG9vcFwiLFwib2ZcIixcImJ5XCIsXCJ3aGVuXCJdLHJlc2VydmVkOltcImNhc2VcIixcImRlZmF1bHRcIixcImZ1bmN0aW9uXCIsXCJ2YXJcIixcInZvaWRcIixcIndpdGhcIixcImNvbnN0XCIsXCJsZXRcIixcImVudW1cIixcImV4cG9ydFwiLFwiaW1wb3J0XCIsXCJuYXRpdmVcIixcIl9faGFzUHJvcFwiLFwiX19leHRlbmRzXCIsXCJfX3NsaWNlXCIsXCJfX2JpbmRcIixcIl9faW5kZXhPZlwiLFwiaW1wbGVtZW50c1wiLFwiaW50ZXJmYWNlXCIsXCJwYWNrYWdlXCIsXCJwcml2YXRlXCIsXCJwcm90ZWN0ZWRcIixcInB1YmxpY1wiLFwic3RhdGljXCIsXCJ5aWVsZFwiXSxhbGlhc2VzOltcImFuZFwiLFwib3JcIixcImlzXCIsXCJpc250XCIsXCJub3RcIixcInllc1wiLFwibm9cIixcIm9uXCIsXCJvZmZcIl19O3UucmVzZXJ2ZWRXb3Jkcz11LnJlc2VydmVkLmtleXdvcmRzLmNvbmNhdCh1LnJlc2VydmVkLnJlc2VydmVkLmNvbmNhdCh1LnJlc2VydmVkLmFsaWFzZXMpKTt1Lm5leHRVbnRpbD1mdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhO3I9ZS5pbmRleE9mKHQpO2ZvcihuPWk9cz1yKzEsYT1lLmxlbmd0aDtzPD1hP2k8PWE6aT49YTtuPXM8PWE/KytpOi0taSl7bz1lW25dO2lmKChvIT1udWxsP28udHlwZTp2b2lkIDApJiZ1KG8pKXtyZXR1cm4gb319fTt1Lm5leHROb25Db21tZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUubmV4dFVudGlsKGUsdCxmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlIT09XCJCbG9ja0NvbW1lbnRcIiYmZS50eXBlIT09XCJMaW5lQ29tbWVudFwifSl9O3UuaXNMb29wPWZ1bmN0aW9uKGUpe3JldHVybiBlLnRlc3Q9PW51bGx8fHUuaXNUcnV0aHkoZS50ZXN0KX07dS5pc1RydXRoeT1mdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09XCJMaXRlcmFsXCImJmUudmFsdWV9O3UuZXNjYXBlSnM9ZnVuY3Rpb24odCl7cmV0dXJuIHUucmVwbGFjZSh0LHt0eXBlOlwiQ29mZmVlRXNjYXBlZEV4cHJlc3Npb25cIixyYXc6ZShcImVzY29kZWdlblwiKS5nZW5lcmF0ZSh0KX0pfTt1Lm5vbkNvbW1lbnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hdS5pc0NvbW1lbnQoZSl9KX07dS5pc0NvbW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PVwiTGluZUNvbW1lbnRcInx8ZS50eXBlPT09XCJCbG9ja0NvbW1lbnRcIn07dS50b0luZGVudD1mdW5jdGlvbihlKXtpZihlPT09XCJ0YWJcInx8ZT09PVwidFwiKXtyZXR1cm5cIlx0XCJ9ZWxzZSBpZih0eXBlb2YgZT09PVwic3RyaW5nXCImJlwiXCIrICtlIT09ZSl7cmV0dXJuIGV9ZWxzZXtyZXR1cm4gQXJyYXkoK2UrMSkuam9pbihcIiBcIil9fX0se2VzY29kZWdlbjoyOSx1dGlsOjI4fV0sNjpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYSxsLGYsYz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihwLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0scD17fS5oYXNPd25Qcm9wZXJ0eSxEPVtdLnNsaWNlO3M9ZShcIi4uL2hlbHBlcnNcIikscj1zLmJ1aWxkRXJyb3Isbz1zLmNsb25lLGE9cy5yZXBsYWNlLGY9cy50b0luZGVudDt0LmV4cG9ydHM9bj1mdW5jdGlvbigpe3QucnVuPWZ1bmN0aW9uKGUsdSxuLHIpe3ZhciBpLG8scztpPWZ1bmN0aW9uKGUpe2ModCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdH0odCk7bChpLG4pO3M9bmV3IGkoZSx1KTtvPXMucnVuKCk7aWYoci53YXJuaW5ncz09bnVsbCl7ci53YXJuaW5ncz1bXX1yLndhcm5pbmdzPXIud2FybmluZ3MuY29uY2F0KHMud2FybmluZ3MpO3JldHVybiBvfTtmdW5jdGlvbiB0KGUsdCl7dGhpcy5hc3Q9ZTt0aGlzLm9wdGlvbnM9dDt0aGlzLnNjb3Blcz1bXTt0aGlzLmN0eD17dmFyczpbXX07dGhpcy53YXJuaW5ncz1bXX10LnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWN1cnNlKHRoaXMuYXN0KX07dC5wcm90b3R5cGUucmVjdXJzZT1mdW5jdGlvbihlKXt2YXIgdCx1O3U9dGhpczt0aGlzLmRlcHRoPTA7dD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCx1LG4pe3ZhciByLGksbyxzO2Uubm9kZT11O2UuZGVwdGgrPXQ9PT1cIkVudGVyXCI/KzE6LTE7cj10PT09XCJFbnRlclwiP1wiXCIrdS50eXBlOnUudHlwZStcIkV4aXRcIjtpZih0eXBlb2YgZVtpPVwib25CZWZvcmVcIit0XT09PVwiZnVuY3Rpb25cIil7ZVtpXSh1LG4pfXM9dHlwZW9mIGVbcl09PT1cImZ1bmN0aW9uXCI/ZVtyXSh1LG4pOnZvaWQgMDtpZih0eXBlb2YgZVtvPVwib25cIit0XT09PVwiZnVuY3Rpb25cIil7ZVtvXSh1LG4pfXJldHVybiBzfX0odGhpcyk7dGhpcy5lc3RyYXZlcnNlKCkucmVwbGFjZShlLHtlbnRlcjpmdW5jdGlvbihlLG4pe3UuY29udHJvbGxlcj10aGlzO3JldHVybiB0KFwiRW50ZXJcIixlLG4pfSxsZWF2ZTpmdW5jdGlvbihlLHUpe3JldHVybiB0KFwiRXhpdFwiLGUsdSl9fSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLnNraXA9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4oZT10aGlzLmNvbnRyb2xsZXIpIT1udWxsP2Uuc2tpcCgpOnZvaWQgMH07dC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5jb250cm9sbGVyKSE9bnVsbD9lLnJlbW92ZSgpOnZvaWQgMH07dC5wcm90b3R5cGUuZXN0cmF2ZXJzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lc3RyYXZlcnNlIT1udWxsP3RoaXMuX2VzdHJhdmVyc2U6dGhpcy5fZXN0cmF2ZXJzZT1mdW5jdGlvbigpe3ZhciB0O3Q9ZShcImVzdHJhdmVyc2VcIik7dC5WaXNpdG9yS2V5cy5Db2ZmZWVFc2NhcGVkRXhwcmVzc2lvbj1bXTt0LlZpc2l0b3JLZXlzLkNvZmZlZUxpc3RFeHByZXNzaW9uPVtcInRlc3RcIixcImJvZHlcIl07dC5WaXNpdG9yS2V5cy5Db2ZmZWVQcm90b3R5cGVFeHByZXNzaW9uPVtcIm9iamVjdFwiLFwicHJvcGVydHlcIixcImNvbXB1dGVkXCJdO3QuVmlzaXRvcktleXMuQ29mZmVlTG9vcFN0YXRlbWVudD1bXCJib2R5XCJdO3QuVmlzaXRvcktleXMuQ29mZmVlRG9FeHByZXNzaW9uPVtcImZ1bmN0aW9uXCJdO3QuVmlzaXRvcktleXMuQmxvY2tDb21tZW50PVtdO3QuVmlzaXRvcktleXMuTGluZUNvbW1lbnQ9W107cmV0dXJuIHR9KCl9O3QucHJvdG90eXBlLnB1c2hTdGFjaz1mdW5jdGlvbihlKXt2YXIgdCx1LG47bj1bdGhpcy5zY29wZSx0aGlzLmN0eF0sdT1uWzBdLHQ9blsxXTt0aGlzLnNjb3Blcy5wdXNoKFt0aGlzLnNjb3BlLHRoaXMuY3R4XSk7dGhpcy5jdHg9byh0aGlzLmN0eCk7dGhpcy5zY29wZT1lO3JldHVybiB0eXBlb2YgdGhpcy5vblNjb3BlRW50ZXI9PT1cImZ1bmN0aW9uXCI/dGhpcy5vblNjb3BlRW50ZXIodGhpcy5zY29wZSx0aGlzLmN0eCx1LHQpOnZvaWQgMH07dC5wcm90b3R5cGUucG9wU3RhY2s9ZnVuY3Rpb24oKXt2YXIgZSx0LHUsbjt1PVt0aGlzLnNjb3BlLHRoaXMuY3R4XSx0PXVbMF0sZT11WzFdO249dGhpcy5zY29wZXMucG9wKCksdGhpcy5zY29wZT1uWzBdLHRoaXMuY3R4PW5bMV07cmV0dXJuIHR5cGVvZiB0aGlzLm9uU2NvcGVFeGl0PT09XCJmdW5jdGlvblwiP3RoaXMub25TY29wZUV4aXQodGhpcy5zY29wZSx0aGlzLmN0eCx0LGUpOnZvaWQgMH07dC5wcm90b3R5cGUuc3ludGF4RXJyb3I9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLGk7dT1yKHtzdGFydDoobj1lLmxvYykhPW51bGw/bi5zdGFydDp2b2lkIDAsZW5kOihpPWUubG9jKSE9bnVsbD9pLmVuZDp2b2lkIDAsZGVzY3JpcHRpb246dH0sdGhpcy5vcHRpb25zLnNvdXJjZSx0aGlzLm9wdGlvbnMuZmlsZW5hbWUpO3Rocm93IHV9O3QucHJvdG90eXBlLndhcm49ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO3JldHVybiB0aGlzLndhcm5pbmdzLnB1c2goe3N0YXJ0Oih1PWUubG9jKSE9bnVsbD91LnN0YXJ0OnZvaWQgMCxlbmQ6KG49ZS5sb2MpIT1udWxsP24uZW5kOnZvaWQgMCxmaWxlbmFtZTp0aGlzLm9wdGlvbnMuZmlsZW5hbWUsZGVzY3JpcHRpb246dH0pfTt0LnByb3RvdHlwZS5Qcm9ncmFtPWZ1bmN0aW9uKGUpe3RoaXMucHVzaFN0YWNrKGUpO3JldHVybiBlfTt0LnByb3RvdHlwZS5Qcm9ncmFtRXhpdD1mdW5jdGlvbihlKXt0aGlzLnBvcFN0YWNrKCk7cmV0dXJuIGV9O3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt0aGlzLnB1c2hTdGFjayhlLmJvZHkpO3JldHVybiBlfTt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb25FeGl0PWZ1bmN0aW9uKGUpe3RoaXMucG9wU3RhY2soKTtyZXR1cm4gZX07dC5wcm90b3R5cGUuZXNjYXBlSnM9ZnVuY3Rpb24odCx1KXtpZih1PT1udWxsKXt1PXt9fXJldHVybiBhKHQse3R5cGU6XCJDb2ZmZWVFc2NhcGVkRXhwcmVzc2lvblwiLF9wYXJlbnRoZXNpemVkOnUucGFyZW50aGVzaXplZCxyYXc6ZShcImVzY29kZWdlblwiKS5nZW5lcmF0ZSh0LHtmb3JtYXQ6e2luZGVudDp7c3R5bGU6Zih0aGlzLm9wdGlvbnMuaW5kZW50KX19fSl9KX07cmV0dXJuIHR9KCk7bD1mdW5jdGlvbihlLHQpe3ZhciB1O3U9e307dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxzO289dC5wcm90b3R5cGU7cz1bXTtmb3IociBpbiBvKXtuPW9bcl07aWYodC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkocikpe2lmKHVbcl0mJnIhPT1cImNvbnN0cnVjdG9yXCIpe2UucHJvdG90eXBlW3JdPWkoZS5wcm90b3R5cGVbcl0sbil9ZWxzZXtlLnByb3RvdHlwZVtyXT1ufXMucHVzaCh1W3JdPXRydWUpfWVsc2V7cy5wdXNoKHZvaWQgMCl9fXJldHVybiBzfSk7cmV0dXJuIGV9O2k9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdSxuLHIsaTtuPWFyZ3VtZW50c1swXSx1PTI8PWFyZ3VtZW50cy5sZW5ndGg/RC5jYWxsKGFyZ3VtZW50cywxKTpbXTtpPW4udHlwZTtyPWUuYmluZCh0aGlzKS5hcHBseShudWxsLFtuXS5jb25jYXQoRC5jYWxsKHUpKSk7aWYoci50eXBlPT09aSl7cj10LmJpbmQodGhpcykuYXBwbHkobnVsbCxbcl0uY29uY2F0KEQuY2FsbCh1KSkpfXJldHVybiByfX19LHtcIi4uL2hlbHBlcnNcIjo1LGVzY29kZWdlbjoyOSxlc3RyYXZlcnNlOjQ5fV0sNzpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoaS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGk9e30uaGFzT3duUHJvcGVydHk7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuQmluYXJ5RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt0aGlzLndhcm5BYm91dEVxdWFscyhlKTt0aGlzLnVwZGF0ZUVxdWFscyhlKTtyZXR1cm4gdGhpcy5lc2NhcGVFcXVhbHNGb3JDb21wYXRpYmlsaXR5KGUpfTt0LnByb3RvdHlwZS51cGRhdGVFcXVhbHM9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PXtcIj09PVwiOlwiPT1cIixcIiE9PVwiOlwiIT1cIn07dT1lLm9wZXJhdG9yO2lmKHRbdV0pe2Uub3BlcmF0b3I9dFt1XX1yZXR1cm4gZX07dC5wcm90b3R5cGUuZXNjYXBlRXF1YWxzRm9yQ29tcGF0aWJpbGl0eT1mdW5jdGlvbihlKXt2YXIgdDt0PWUub3BlcmF0b3I9PT1cIj09XCJ8fGUub3BlcmF0b3I9PT1cIiE9XCI7aWYodGhpcy5vcHRpb25zLmNvbXBhdCYmdCl7cmV0dXJuIHRoaXMuZXNjYXBlSnMoZSl9ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLndhcm5BYm91dEVxdWFscz1mdW5jdGlvbihlKXt2YXIgdCx1LG47dD1lLm9wZXJhdG9yO249e1wiPT1cIjpcIj09PVwiLFwiIT1cIjpcIiE9PVwifTtpZih0PT09XCI9PVwifHx0PT09XCIhPVwiKXt1PW5bdF07dGhpcy53YXJuKGUsXCJPcGVyYXRvciAnXCIrdCtcIicgaXMgbm90IHN1cHBvcnRlZCBpbiBDb2ZmZWVTY3JpcHQsIFwiKyhcInVzZSAnXCIrdStcIicgaW5zdGVhZFwiKSl9cmV0dXJuIGV9O3JldHVybiB0fShuKX0se1wiLi9iYXNlXCI6Nn1dLDg6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoby5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LG89e30uaGFzT3duUHJvcGVydHkscz1bXS5zbGljZTtyPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPW49ZnVuY3Rpb24oZSl7aSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkJsb2NrU3RhdGVtZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY29uc29saWRhdGVCbG9ja0ludG9QYXJlbnQoZSx0KX07dC5wcm90b3R5cGUuY29uc29saWRhdGVCbG9ja0ludG9QYXJlbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO249ZmFsc2U7dT1mdW5jdGlvbih1KXtyZXR1cm4gZnVuY3Rpb24odSxyKXt2YXIgaSxvLGE7aWYodC50eXBlPT09dSYmKChvPXRbcl0pIT1udWxsP28uaW5kZXhPZjp2b2lkIDApKXtpPXRbcl0uaW5kZXhPZihlKTtpZih0W3JdJiZ+aSl7KGE9dFtyXSkuc3BsaWNlLmFwcGx5KGEsW2ksMV0uY29uY2F0KHMuY2FsbChlLmJvZHkpKSk7bj10cnVlO3JldHVybiB0cnVlfX19fSh0aGlzKTt1KFwiQmxvY2tTdGF0ZW1lbnRcIixcImJvZHlcIil8fHUoXCJTd2l0Y2hDYXNlXCIsXCJjb25zZXF1ZW50XCIpfHx1KFwiSWZTdGF0ZW1lbnRcIixcImNvbnNlcXVlbnRcIil8fHUoXCJJZlN0YXRlbWVudFwiLFwiYWx0ZXJuYXRlXCIpO2lmKG4pe3JldHVybiB0aGlzLnNraXAoKX1lbHNle3JldHVybiBlfX07cmV0dXJuIHR9KHIpfSx7XCIuL2Jhc2VcIjo2fV0sOTpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoaS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGk9e30uaGFzT3duUHJvcGVydHk7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuUHJvZ3JhbUV4aXQ9bnVsbDt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb249bnVsbDt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb25FeGl0PW51bGw7dC5wcm90b3R5cGUuUHJvZ3JhbT1mdW5jdGlvbihlKXt0aGlzLmNvbW1lbnRzPWUuY29tbWVudHM7dGhpcy51cGRhdGVDb21tZW50VHlwZXMoKTtlLmJvZHk9dGhpcy5hZGRDb21tZW50c1RvTGlzdChbMCxJbmZpbml0eV0sZS5ib2R5KTtyZXR1cm4gZX07dC5wcm90b3R5cGUuQmxvY2tTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5qZWN0Q29tbWVudHMoZSxcImJvZHlcIil9O3QucHJvdG90eXBlLlN3aXRjaFN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbmplY3RDb21tZW50cyhlLFwiY2FzZXNcIil9O3QucHJvdG90eXBlLlN3aXRjaENhc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5qZWN0Q29tbWVudHMoZSxcImNvbnNlcXVlbnRcIil9O3QucHJvdG90eXBlLkJsb2NrQ29tbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29tbWVudFByZWZpeGVzKGUpfTt0LnByb3RvdHlwZS51cGRhdGVDb21tZW50VHlwZXM9ZnVuY3Rpb24oKXt2YXIgZSx0LHUsbixyO249dGhpcy5jb21tZW50cztyPVtdO2Zvcih0PTAsdT1uLmxlbmd0aDt0PHU7dCsrKXtlPW5bdF07c3dpdGNoKGUudHlwZSl7Y2FzZVwiQmxvY2tcIjpyLnB1c2goZS50eXBlPVwiQmxvY2tDb21tZW50XCIpO2JyZWFrO2Nhc2VcIkxpbmVcIjpyLnB1c2goZS50eXBlPVwiTGluZUNvbW1lbnRcIik7YnJlYWs7ZGVmYXVsdDpyLnB1c2godm9pZCAwKX19cmV0dXJuIHJ9O3QucHJvdG90eXBlLmluamVjdENvbW1lbnRzPWZ1bmN0aW9uKGUsdCl7aWYodD09bnVsbCl7dD1cImJvZHlcIn1lW3RdPXRoaXMuYWRkQ29tbWVudHNUb0xpc3QoZS5yYW5nZSxlW3RdKTtyZXR1cm4gZX07dC5wcm90b3R5cGUuYWRkQ29tbWVudHNUb0xpc3Q9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvLHMsYSxsLGY7aWYoZT09bnVsbCl7cmV0dXJuIHR9YT1bXTtvPWVbMF07Zj1lWzFdO3U9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsdSl7cmV0dXJuIGUuY29tbWVudHMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJhbmdlWzBdPj10JiZlLnJhbmdlWzFdPD11fSl9fSh0aGlzKTtpZih0Lmxlbmd0aD4wKXtmb3Iobj1pPTAscz10Lmxlbmd0aDtpPHM7bj0rK2kpe3I9dFtuXTtpZihyLnJhbmdlKXtsPXUobyxyLnJhbmdlWzBdKTthPWEuY29uY2F0KGwpfWEucHVzaChyKTtpZihyLnJhbmdlKXtvPXIucmFuZ2VbMV19fX1sPXUobyxmKTthPWEuY29uY2F0KGwpO3JldHVybiBhfTt0LnByb3RvdHlwZS5jb252ZXJ0Q29tbWVudFByZWZpeGVzPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dT1lLnZhbHVlLnNwbGl0KFwiXFxuXCIpO3Q9ZS5sb2Muc3RhcnQuY29sdW1uO3U9dS5tYXAoZnVuY3Rpb24oZSxuKXt2YXIgcixpLG87aT1uPT09dS5sZW5ndGgtMSYmZS5tYXRjaCgvXlxccyokLyk7cj1uPT09MCYmdS5sZW5ndGg9PT0xO289ZS5zdWJzdHIoMCx0KTtpZihvLm1hdGNoKC9eXFxzKyQvKSl7ZT1lLnN1YnN0cih0KX1pZihpKXtyZXR1cm5cIlwifWVsc2UgaWYocil7cmV0dXJuIGV9ZWxzZXtlPWUucmVwbGFjZSgvXiBcXCovLFwiI1wiKTtyZXR1cm4gZStcIlxcblwifX0pO2UudmFsdWU9dS5qb2luKFwiXCIpO3JldHVybiBlfTtyZXR1cm4gdH0obil9LHtcIi4vYmFzZVwiOjZ9XSwxMDpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoaS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGk9e30uaGFzT3duUHJvcGVydHk7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuQmxvY2tTdGF0ZW1lbnRFeGl0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZUVtcHR5U3RhdGVtZW50c0Zyb21Cb2R5KGUpfTt0LnByb3RvdHlwZS5Td2l0Y2hDYXNlRXhpdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmVFbXB0eVN0YXRlbWVudHNGcm9tQm9keShlLFwiY29uc2VxdWVudFwiKX07dC5wcm90b3R5cGUuU3dpdGNoU3RhdGVtZW50RXhpdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmVFbXB0eVN0YXRlbWVudHNGcm9tQm9keShlLFwiY2FzZXNcIil9O3QucHJvdG90eXBlLlByb2dyYW1FeGl0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZUVtcHR5U3RhdGVtZW50c0Zyb21Cb2R5KGUsXCJib2R5XCIpfTt0LnByb3RvdHlwZS5yZW1vdmVFbXB0eVN0YXRlbWVudHNGcm9tQm9keT1mdW5jdGlvbihlLHQpe2lmKHQ9PW51bGwpe3Q9XCJib2R5XCJ9ZVt0XT1lW3RdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlIT09XCJFbXB0eVN0YXRlbWVudFwifSk7cmV0dXJuIGV9O3JldHVybiB0fShuKX0se1wiLi9iYXNlXCI6Nn1dLDExOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKG8uY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxvPXt9Lmhhc093blByb3BlcnR5O3I9ZShcIi4uL2hlbHBlcnNcIikucmVwbGFjZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2kodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5DYWxsRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdCx1LG4saSxvLHMsYSxsLGYsYyxwO3Q9KCh1PWUuY2FsbGVlKSE9bnVsbD91LnR5cGU6dm9pZCAwKT09PVwiTWVtYmVyRXhwcmVzc2lvblwiJiYoKG49ZS5jYWxsZWUpIT1udWxsPyhpPW4ub2JqZWN0KSE9bnVsbD9pLnR5cGU6dm9pZCAwOnZvaWQgMCk9PT1cIklkZW50aWZpZXJcIiYmKChvPWUuY2FsbGVlKSE9bnVsbD8ocz1vLm9iamVjdCkhPW51bGw/cy5uYW1lOnZvaWQgMDp2b2lkIDApPT09XCJNYXRoXCImJigoYT1lLmNhbGxlZSkhPW51bGw/KGw9YS5wcm9wZXJ0eSkhPW51bGw/bC50eXBlOnZvaWQgMDp2b2lkIDApPT09XCJJZGVudGlmaWVyXCImJigoZj1lLmNhbGxlZSkhPW51bGw/KGM9Zi5wcm9wZXJ0eSkhPW51bGw/Yy5uYW1lOnZvaWQgMDp2b2lkIDApPT09XCJwb3dcIiYmKChwPWVbXCJhcmd1bWVudHNcIl0pIT1udWxsP3AubGVuZ3RoOnZvaWQgMCk9PT0yO2lmKCF0KXtyZXR1cm4gZX1yZXR1cm4gcihlLHt0eXBlOlwiQmluYXJ5RXhwcmVzc2lvblwiLGxlZnQ6ZVtcImFyZ3VtZW50c1wiXVswXSxvcGVyYXRvcjpcIioqXCIscmlnaHQ6ZVtcImFyZ3VtZW50c1wiXVsxXX0pfTtyZXR1cm4gdH0obil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDEyOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhLGw9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoZi5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGY9e30uaGFzT3duUHJvcGVydHksYz1bXS5zbGljZTtzPWUoXCIuLi9oZWxwZXJzXCIpLGk9cy5pc0NvbW1lbnQsbz1zLm5leHROb25Db21tZW50LGE9cy5yZXBsYWNlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7bCh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLm9uU2NvcGVFbnRlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0LnByZWJvZHk9W119O3QucHJvdG90eXBlLm9uU2NvcGVFeGl0PWZ1bmN0aW9uKGUsdCx1LG4pe2lmKG4ucHJlYm9keS5sZW5ndGgpe3JldHVybiB0aGlzLnByZXBlbmRJbnRvQm9keSh1LmJvZHksbi5wcmVib2R5KX19O3QucHJvdG90eXBlLnByZXBlbmRJbnRvQm9keT1mdW5jdGlvbihlLHQpe3ZhciB1O3U9cihlKTtyZXR1cm4gZS5zcGxpY2UuYXBwbHkoZSxbdSwwXS5jb25jYXQoYy5jYWxsKHQpKSl9O3QucHJvdG90eXBlLkZ1bmN0aW9uRGVjbGFyYXRpb249ZnVuY3Rpb24oZSl7dGhpcy5jdHgucHJlYm9keS5wdXNoKHRoaXMuYnVpbGRGdW5jdGlvbkRlY2xhcmF0aW9uKGUpKTt0aGlzLnB1c2hTdGFjayhlLmJvZHkpfTt0LnByb3RvdHlwZS5GdW5jdGlvbkRlY2xhcmF0aW9uRXhpdD1mdW5jdGlvbihlKXt0aGlzLnBvcFN0YWNrKGUpO3JldHVybiB0aGlzLnJlbW92ZSgpfTt0LnByb3RvdHlwZS5MaW5lQ29tbWVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdmVGdW5jdGlvbkNvbW1lbnRzKGUsdCl9O3QucHJvdG90eXBlLkJsb2NrQ29tbWVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdmVGdW5jdGlvbkNvbW1lbnRzKGUsdCl9O3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt0aGlzLnB1c2hTdGFjayhlLmJvZHkpfTt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb25FeGl0PWZ1bmN0aW9uKGUpe3RoaXMucG9wU3RhY2soKTtpZihlLmlkKXtpZih0aGlzLm9wdGlvbnMuY29tcGF0KXtyZXR1cm4gdGhpcy5lc2NhcGVKcyhlLHtwYXJlbnRoZXNpemVkOnRydWV9KX1lbHNle3RoaXMud2FybihlLFwiTmFtZWQgZnVuY3Rpb24gZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ29mZmVlU2NyaXB0XCIpO3JldHVybiBlfX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUubW92ZUZ1bmN0aW9uQ29tbWVudHM9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO2lmKCF0LmJvZHkpe3JldHVybn1uPW8odC5ib2R5LGUpO2lmKCFuKXtyZXR1cm59dT1uLnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiJiZuLmlkO3V8fCh1PW4udHlwZT09PVwiRnVuY3Rpb25EZWNsYXJhdGlvblwiKTtpZih1KXt0aGlzLmN0eC5wcmVib2R5LnB1c2goZSk7cmV0dXJuIHRoaXMucmVtb3ZlKCl9fTt0LnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uRGVjbGFyYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSx7dHlwZTpcIlZhcmlhYmxlRGVjbGFyYXRpb25cIixkZWNsYXJhdGlvbnM6W3t0eXBlOlwiVmFyaWFibGVEZWNsYXJhdG9yXCIsaWQ6ZS5pZCxpbml0Ont0eXBlOlwiRnVuY3Rpb25FeHByZXNzaW9uXCIscGFyYW1zOmUucGFyYW1zLGRlZmF1bHRzOmUuZGVmYXVsdHMsYm9keTplLmJvZHl9fV19KX07cmV0dXJuIHR9KG4pO3I9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHI7dD0wO2Zvcih0PXU9MCxuPWUubGVuZ3RoO3U8bjt0PSsrdSl7cj1lW3RdO2lmKHIudHlwZSE9PVwiVmFyaWFibGVEZWNsYXJhdGlvblwiJiYhaShyKSl7cmV0dXJuIHR9fXJldHVybiB0fX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTM6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGEuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxhPXt9Lmhhc093blByb3BlcnR5O289ZShcIi4uL2hlbHBlcnNcIikubm9uQ29tbWVudHM7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtzKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuSWZTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVCbGFua0lmcyhlKTt0aGlzLnBhcmVudGhlc2l6ZUNvbmRpdGlvbmFscyhlLnRlc3QpO3JldHVybiBlfTt0LnByb3RvdHlwZS5Db25kaXRpb25hbEV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wYXJlbnRoZXNpemVGdW5jdGlvbnMoZSx0KX07dC5wcm90b3R5cGUucGFyZW50aGVzaXplRnVuY3Rpb25zPWZ1bmN0aW9uKGUsdCl7dGhpcy5lc3RyYXZlcnNlKCkudHJhdmVyc2UoZSx7XG5lbnRlcjpmdW5jdGlvbihlLHQpe3ZhciB1O3U9ZS50eXBlPT09XCJGdW5jdGlvbkRlY2xhcmF0aW9uXCJ8fGUudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCI7aWYodSl7cmV0dXJuIGUuX3BhcmVudGhlc2l6ZWQ9dHJ1ZX19fSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLnBhcmVudGhlc2l6ZUNvbmRpdGlvbmFscz1mdW5jdGlvbihlKXt2YXIgdDt0PVtcIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiLFwiRnVuY3Rpb25FeHByZXNzaW9uXCJdO3JldHVybiB0aGlzLmVzdHJhdmVyc2UoKS50cmF2ZXJzZShlLHtlbnRlcjpmdW5jdGlvbihlLHUpe2lmKH50LmluZGV4T2YoZS50eXBlKSl7cmV0dXJuIGUuX3BhcmVudGhlc2l6ZWQ9dHJ1ZX19fSl9O3QucHJvdG90eXBlLmhhbmRsZUJsYW5rSWZzPWZ1bmN0aW9uKGUpe2lmKGkoZSl8fHIoZSkmJiFlLmFsdGVybmF0ZSl7ZS5hbHRlcm5hdGU9e3R5cGU6XCJCbG9ja1N0YXRlbWVudFwiLGJvZHk6W119fXJldHVybiBlfTtyZXR1cm4gdH0obik7aT1mdW5jdGlvbihlKXtyZXR1cm4hZS5jb25zZXF1ZW50fTtyPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD1lLmNvbnNlcXVlbnQ7cmV0dXJuIHU9dCYmdC50eXBlPT09XCJCbG9ja1N0YXRlbWVudFwiJiZvKHQuYm9keSkubGVuZ3RoPT09MH19LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDE0OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGwuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxsPXt9Lmhhc093blByb3BlcnR5O289ZShcIi4uL2hlbHBlcnNcIikucmVwbGFjZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2EodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5DYWxsRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdDt0PWkoZSkmJnIoZVtcImFyZ3VtZW50c1wiXSkmJnMoZS5jYWxsZWUucGFyYW1zLGVbXCJhcmd1bWVudHNcIl0pO2lmKCF0KXtyZXR1cm4gZX1yZXR1cm4gbyhlLHt0eXBlOlwiQ29mZmVlRG9FeHByZXNzaW9uXCIsXCJmdW5jdGlvblwiOmUuY2FsbGVlLGFyZ3VtZW50czplW1wiYXJndW1lbnRzXCJdfSl9O3JldHVybiB0fShuKTtyPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjtmb3IodT0wLG49ZS5sZW5ndGg7dTxuO3UrKyl7dD1lW3VdO2lmKHQudHlwZSE9PVwiSWRlbnRpZmllclwiKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTtpPWZ1bmN0aW9uKGUpe3ZhciB0LHU7cmV0dXJuKCh0PWUuY2FsbGVlKSE9bnVsbD90LnR5cGU6dm9pZCAwKT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCImJigodT1lLmNhbGxlZSkhPW51bGw/dS5pZDp2b2lkIDApPT09bnVsbH07cz1mdW5jdGlvbihlLHQpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lfSkuam9pbihcIi9cIik9PT10Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lfSkuam9pbihcIi9cIil9fSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxNTpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoYS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGE9e30uaGFzT3duUHJvcGVydHk7aT1lKFwiLi4vaGVscGVyc1wiKSxvPWkucmVwbGFjZSxyPWkucXVvdGU7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtzKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuTGl0ZXJhbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy51bnBhY2tSZWdleHBJZk5lZWRlZChlKX07dC5wcm90b3R5cGUudW5wYWNrUmVnZXhwSWZOZWVkZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIShlLnZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSl7cmV0dXJufXQ9ZS52YWx1ZS50b1N0cmluZygpLm1hdGNoKC9eXFwvKFtcXHNcXD1dLiopXFwvKFthLXpdKikkLyk7aWYodCl7ZT1vKGUse3R5cGU6XCJDYWxsRXhwcmVzc2lvblwiLGNhbGxlZTp7dHlwZTpcIklkZW50aWZpZXJcIixuYW1lOlwiUmVnRXhwXCJ9LGFyZ3VtZW50czpbe3R5cGU6XCJMaXRlcmFsXCIsdmFsdWU6dFsxXSxyYXc6cih0WzFdKX1dfSk7aWYodFsyXSl7ZVtcImFyZ3VtZW50c1wiXS5wdXNoKHt0eXBlOlwiTGl0ZXJhbFwiLHZhbHVlOnRbMl0scmF3OnIodFsyXSl9KX1yZXR1cm4gZX19O3JldHVybiB0fShuKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTY6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGEuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxhPXt9Lmhhc093blByb3BlcnR5O2k9ZShcIi4uL2hlbHBlcnNcIiksbz1pLnJlcGxhY2Uscj1pLmlzTG9vcDtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ModCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5Gb3JTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZm9yPT1udWxsKXt0aGlzLl9mb3I9W119dGhpcy5fZm9yLnB1c2goZSk7dGhpcy5pbmplY3RVcGRhdGVJbnRvQm9keShlKTtyZXR1cm4gdGhpcy5jb252ZXJ0Rm9yVG9XaGlsZShlKX07dC5wcm90b3R5cGUuRm9yU3RhdGVtZW50RXhpdD1mdW5jdGlvbihlKXt2YXIgdDt0PXRoaXMuX2Zvci5wb3AoKTtkZWxldGUgdC5fdXBkYXRlO3JldHVybiBlfTt0LnByb3RvdHlwZS5Gb3JJblN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy53YXJuSWZOb1ZhcihlKX07dC5wcm90b3R5cGUuV2hpbGVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udmVydFdoaWxlVG9Mb29wKGUpfTt0LnByb3RvdHlwZS5Eb1doaWxlU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnZlcnREb1doaWxlVG9Mb29wKGUpfTt0LnByb3RvdHlwZS5Db250aW51ZVN0YXRlbWVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmluamVjdFVwZGF0ZUludG9Db250aW51ZShlLHQpfTt0LnByb3RvdHlwZS5pbmplY3RVcGRhdGVJbnRvQ29udGludWU9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO3U9KG49dGhpcy5fZm9yKSE9bnVsbD9uW3RoaXMuX2Zvci5sZW5ndGgtMV06dm9pZCAwO2lmKCEodSE9bnVsbD91Ll91cGRhdGU6dm9pZCAwKSl7cmV0dXJuIGV9dGhpcy5za2lwKCk7cmV0dXJue3R5cGU6XCJCbG9ja1N0YXRlbWVudFwiLGJvZHk6W3t0eXBlOlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLGV4cHJlc3Npb246dS5fdXBkYXRlfSxlXX19O3QucHJvdG90eXBlLmNvbnZlcnREb1doaWxlVG9Mb29wPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD1lLmJvZHk7dT10LmJvZHk7dS5wdXNoKG8oZS50ZXN0LHt0eXBlOlwiSWZTdGF0ZW1lbnRcIixfbmVnYXRpdmU6dHJ1ZSx0ZXN0OmUudGVzdCxjb25zZXF1ZW50Ont0eXBlOlwiQnJlYWtTdGF0ZW1lbnRcIn19KSk7cmV0dXJuIG8oZSx7dHlwZTpcIkNvZmZlZUxvb3BTdGF0ZW1lbnRcIixib2R5OnR9KX07dC5wcm90b3R5cGUud2FybklmTm9WYXI9ZnVuY3Rpb24oZSl7aWYoZS5sZWZ0LnR5cGUhPT1cIlZhcmlhYmxlRGVjbGFyYXRpb25cIil7dGhpcy53YXJuKGUsXCJVc2luZyAnZm9yLi5pbicgbG9vcHMgd2l0aG91dCBcIitcIid2YXInIGNhbiBwcm9kdWNlIHVuZXhwZWN0ZWQgcmVzdWx0c1wiKX1yZXR1cm4gZX07dC5wcm90b3R5cGUuY29udmVydEZvclRvV2hpbGU9ZnVuY3Rpb24oZSl7dmFyIHQ7ZS50eXBlPXIoZSk/XCJDb2ZmZWVMb29wU3RhdGVtZW50XCI6XCJXaGlsZVN0YXRlbWVudFwiO3Q9ZS5pbml0O2RlbGV0ZSBlLmluaXQ7aWYodCE9bnVsbCl7cmV0dXJue3R5cGU6XCJCbG9ja1N0YXRlbWVudFwiLGJvZHk6W3t0eXBlOlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLGV4cHJlc3Npb246dH0sZV19fWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5jb252ZXJ0V2hpbGVUb0xvb3A9ZnVuY3Rpb24oZSl7aWYocihlKSl7cmV0dXJuIG8oZSx7dHlwZTpcIkNvZmZlZUxvb3BTdGF0ZW1lbnRcIixib2R5OmUuYm9keX0pfWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5pbmplY3RVcGRhdGVJbnRvQm9keT1mdW5jdGlvbihlKXt2YXIgdCx1O2lmKGUudXBkYXRlKXt1PXt0eXBlOlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLGV4cHJlc3Npb246ZS51cGRhdGV9O2lmKGUuYm9keT09bnVsbCl7aWYoZS5ib2R5PT1udWxsKXtlLmJvZHk9e3R5cGU6XCJCbG9ja1N0YXRlbWVudFwiLGJvZHk6W119fX1lbHNlIGlmKGUuYm9keS50eXBlIT09XCJCbG9ja1N0YXRlbWVudFwiKXt0PWUuYm9keTtlLmJvZHk9e3R5cGU6XCJCbG9ja1N0YXRlbWVudFwiLGJvZHk6W3RdfX1lLmJvZHkuYm9keT1lLmJvZHkuYm9keS5jb25jYXQoW3VdKTtlLl91cGRhdGU9ZS51cGRhdGU7ZGVsZXRlIGUudXBkYXRlfXJldHVybiBlfTtyZXR1cm4gdH0obil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDE3OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKG8uY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxvPXt9Lmhhc093blByb3BlcnR5O3I9ZShcIi4uL2hlbHBlcnNcIikucmVwbGFjZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2kodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5NZW1iZXJFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMudHJhbnNmb3JtVGhpc1RvQXRTaWduKGUpO3RoaXMuYnJhY2VPYmplY3RPbkxlZnQoZSk7cmV0dXJuIHRoaXMucmVwbGFjZVdpdGhQcm90b3R5cGUoZSl8fHRoaXMucGFyZW50aGVzaXplT2JqZWN0SWZGdW5jdGlvbihlKX07dC5wcm90b3R5cGUuQ29mZmVlUHJvdG90eXBlRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm1UaGlzVG9BdFNpZ24oZSl9O3QucHJvdG90eXBlLnRyYW5zZm9ybVRoaXNUb0F0U2lnbj1mdW5jdGlvbihlKXtpZihlLm9iamVjdC50eXBlPT09XCJUaGlzRXhwcmVzc2lvblwiKXtlLl9wcmVmaXhlZD10cnVlO2Uub2JqZWN0Ll9wcmVmaXg9dHJ1ZX1yZXR1cm4gZX07dC5wcm90b3R5cGUuYnJhY2VPYmplY3RPbkxlZnQ9ZnVuY3Rpb24oZSl7aWYoZS5vYmplY3QudHlwZT09PVwiT2JqZWN0RXhwcmVzc2lvblwiKXtlLm9iamVjdC5fYnJhY2VkPXRydWV9fTt0LnByb3RvdHlwZS5yZXBsYWNlV2l0aFByb3RvdHlwZT1mdW5jdGlvbihlKXt2YXIgdDt0PWUuY29tcHV0ZWQ9PT1mYWxzZSYmZS5vYmplY3QudHlwZT09PVwiTWVtYmVyRXhwcmVzc2lvblwiJiZlLm9iamVjdC5wcm9wZXJ0eS50eXBlPT09XCJJZGVudGlmaWVyXCImJmUub2JqZWN0LnByb3BlcnR5Lm5hbWU9PT1cInByb3RvdHlwZVwiO2lmKHQpe3JldHVybiB0aGlzLnJlY3Vyc2UocihlLHt0eXBlOlwiQ29mZmVlUHJvdG90eXBlRXhwcmVzc2lvblwiLG9iamVjdDplLm9iamVjdC5vYmplY3QscHJvcGVydHk6ZS5wcm9wZXJ0eX0pKX19O3QucHJvdG90eXBlLnBhcmVudGhlc2l6ZU9iamVjdElmRnVuY3Rpb249ZnVuY3Rpb24oZSl7aWYoZS5vYmplY3QudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCIpe2Uub2JqZWN0Ll9wYXJlbnRoZXNpemVkPXRydWV9cmV0dXJuIGV9O3JldHVybiB0fShuKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTg6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoby5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LG89e30uaGFzT3duUHJvcGVydHk7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuQXJyYXlFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMuYnJhY2VPYmplY3RzSW5FbGVtZW50cyhlKTtyZXR1cm4gdGhpcy5jYXRjaEVtcHR5QXJyYXlTbG90cyhlKX07dC5wcm90b3R5cGUuT2JqZWN0RXhwcmVzc2lvbj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmJyYWNlT2JqZWN0SW5FeHByZXNzaW9uKGUsdCl9O3QucHJvdG90eXBlLmJyYWNlT2JqZWN0SW5FeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyO2lmKHQudHlwZT09PVwiRXhwcmVzc2lvblN0YXRlbWVudFwiKXt1PSgobj10aGlzLnNjb3BlLmJvZHkpIT1udWxsP25bKChyPXRoaXMuc2NvcGUuYm9keSkhPW51bGw/ci5sZW5ndGg6dm9pZCAwKS0xXTp2b2lkIDApPT09dDtpZih1KXtlLl9sYXN0PXRydWV9ZWxzZXtlLl9icmFjZWQ9dHJ1ZX19fTt0LnByb3RvdHlwZS5icmFjZU9iamVjdHNJbkVsZW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyO3I9ZS5lbGVtZW50cztmb3IodD0wLG49ci5sZW5ndGg7dDxuO3QrKyl7dT1yW3RdO2lmKCh1IT1udWxsP3UudHlwZTp2b2lkIDApPT09XCJPYmplY3RFeHByZXNzaW9uXCIpe3UuX2JyYWNlZD10cnVlfX1yZXR1cm4gZX07dC5wcm90b3R5cGUuY2F0Y2hFbXB0eUFycmF5U2xvdHM9ZnVuY3Rpb24oZSl7aWYocihlLmVsZW1lbnRzKSl7aWYodGhpcy5vcHRpb25zLmNvbXBhdCl7cmV0dXJuIHRoaXMuZXNjYXBlSnMoZSl9ZWxzZXtyZXR1cm4gdGhpcy5zeW50YXhFcnJvcihlLFwiRW1wdHkgYXJyYXkgc2xvdHMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ29mZmVlU2NyaXB0XCIpfX19O3JldHVybiB0fShuKTtyPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjtmb3IodD0wLHU9ZS5sZW5ndGg7dDx1O3QrKyl7bj1lW3RdO2lmKG49PT1udWxsKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfX0se1wiLi9iYXNlXCI6Nn1dLDE5OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGwuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxsPXt9Lmhhc093blByb3BlcnR5LGY9W10uc2xpY2U7aT1lKFwiLi4vaGVscGVyc1wiKSxzPWkucmVzZXJ2ZWRXb3JkcyxvPWkucmVwbGFjZSxyPWkucXVvdGU7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXthKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uPWZ1bmN0aW9uKGUsdSl7dC5fX3N1cGVyX18uRnVuY3Rpb25FeHByZXNzaW9uLmNhbGwodGhpcyxlKTtlLnBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtpZih0LnR5cGU9PT1cIklkZW50aWZpZXJcIil7ZS5jdHgudmFycy5wdXNoKHQubmFtZSl9cmV0dXJuIGUucHJldmVudFJlc2VydmVkV29yZHModCl9fSh0aGlzKSk7dGhpcy5wcmV2ZW50UmVzZXJ2ZWRXb3JkcyhlLmlkKTtyZXR1cm4gdGhpcy5yZW1vdmVVbmRlZmluZWRQYXJhbWV0ZXIoZSl9O3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbkV4aXQ9ZnVuY3Rpb24oZSl7dmFyIHUsbjt0Ll9fc3VwZXJfXy5GdW5jdGlvbkV4cHJlc3Npb25FeGl0LmNhbGwodGhpcyxlKTsobj1lLmJvZHkuYm9keSkuc3BsaWNlLmFwcGx5KG4sWzAsMF0uY29uY2F0KGYuY2FsbCgodT1lLmJvZHkuc2hhZG93cykhPW51bGw/dTpbXSkpKTtyZXR1cm4gZX07dC5wcm90b3R5cGUuQ2FsbEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGFyZW50aGVzaXplQ2FsbGVlKGUpfTt0LnByb3RvdHlwZS5JZGVudGlmaWVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVzY2FwZVVuZGVmaW5lZChlKX07dC5wcm90b3R5cGUuVW5hcnlFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMuYnJhY2VPYmplY3RCZXNpZGVVbmFyeShlKTtyZXR1cm4gdGhpcy51cGRhdGVWb2lkVG9VbmRlZmluZWQoZSl9O3QucHJvdG90eXBlLlZhcmlhYmxlRGVjbGFyYXRvcj1mdW5jdGlvbihlKXt0aGlzLnByZXZlbnRSZXNlcnZlZFdvcmRzKGUuaWQpO3RoaXMuYWRkU2hhZG93aW5nSWZOZWVkZWQoZSk7cmV0dXJuIHRoaXMuYWRkRXhwbGljaXRVbmRlZmluZWRJbml0aWFsaXplcihlKX07dC5wcm90b3R5cGUuQXNzaWdubWVudEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7aWYodGhpcy5pc1Jlc2VydmVkSWRlbnRpZmllcihlLmxlZnQpKXtpZih0aGlzLm9wdGlvbnMuY29tcGF0KXtyZXR1cm4gdGhpcy5lc2NhcGVKcyhlKX1lbHNle3JldHVybiB0aGlzLnByZXZlbnRSZXNlcnZlZFdvcmRzKGUubGVmdCl9fWVsc2UgaWYoZS5sZWZ0LnR5cGU9PT1cIklkZW50aWZpZXJcIiYmdGhpcy5jdHgudmFycy5pbmRleE9mKGUubGVmdC5uYW1lKT09PS0xKXtpZih0aGlzLm9wdGlvbnMuY29tcGF0KXtyZXR1cm4gdGhpcy5lc2NhcGVKcyhlKX1lbHNle3RoaXMud2FybihlLFwiQXNzaWdubWVudCBvZiBnbG9iYWwgdmFyaWFibGUgJ1wiK2UubGVmdC5uYW1lK1wiJ1wiKTtyZXR1cm4gZX19ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLlJldHVyblN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnRoZXNpemVPYmplY3RzSW5Bcmd1bWVudChlKX07dC5wcm90b3R5cGUuYnJhY2VPYmplY3RCZXNpZGVVbmFyeT1mdW5jdGlvbihlKXtpZihlLmFyZ3VtZW50LnR5cGU9PT1cIk9iamVjdEV4cHJlc3Npb25cIil7ZS5hcmd1bWVudC5fYnJhY2VkPXRydWV9fTt0LnByb3RvdHlwZS5wcmV2ZW50UmVzZXJ2ZWRXb3Jkcz1mdW5jdGlvbihlKXtpZih0aGlzLmlzUmVzZXJ2ZWRJZGVudGlmaWVyKGUpKXtyZXR1cm4gdGhpcy5zeW50YXhFcnJvcihlLFwiJ1wiK2UubmFtZStcIicgaXMgYSByZXNlcnZlZCBDb2ZmZWVTY3JpcHQga2V5d29yZFwiKX19O3QucHJvdG90eXBlLmlzUmVzZXJ2ZWRJZGVudGlmaWVyPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZSE9bnVsbD9lLm5hbWU6dm9pZCAwO3JldHVybiB0JiZ+cy5pbmRleE9mKHQpfTt0LnByb3RvdHlwZS5wYXJlbnRoZXNpemVPYmplY3RzSW5Bcmd1bWVudD1mdW5jdGlvbihlKXtpZihlLmFyZ3VtZW50KXtpZihlLmFyZ3VtZW50LnR5cGU9PT1cIk9iamVjdEV4cHJlc3Npb25cIil7ZS5hcmd1bWVudC5fYnJhY2VkPXRydWV9fXJldHVybiBlfTt0LnByb3RvdHlwZS5hZGRTaGFkb3dpbmdJZk5lZWRlZD1mdW5jdGlvbihlKXt2YXIgdCx1LG47dT1lLmlkLm5hbWU7aWYofnRoaXMuY3R4LnZhcnMuaW5kZXhPZih1KSl7dGhpcy53YXJuKGUsXCJWYXJpYWJsZSBzaGFkb3dpbmcgKCdcIit1K1wiJykgaXMgbm90IGZ1bGx5IHN1cHBvcnRlZCBpbiBDb2ZmZWVTY3JpcHRcIik7bj1vKGUse3R5cGU6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsZXhwcmVzc2lvbjp7dHlwZTpcIkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uXCIscmF3OlwidmFyIFwiK3V9fSk7aWYoKHQ9dGhpcy5zY29wZSkuc2hhZG93cz09bnVsbCl7dC5zaGFkb3dzPVtdfXJldHVybiB0aGlzLnNjb3BlLnNoYWRvd3MucHVzaChuKX1lbHNle3JldHVybiB0aGlzLmN0eC52YXJzLnB1c2godSl9fTt0LnByb3RvdHlwZS5hZGRFeHBsaWNpdFVuZGVmaW5lZEluaXRpYWxpemVyPWZ1bmN0aW9uKGUpe2lmKGUuaW5pdD09bnVsbCl7ZS5pbml0PXt0eXBlOlwiSWRlbnRpZmllclwiLG5hbWU6XCJ1bmRlZmluZWRcIn07dGhpcy5za2lwKCl9cmV0dXJuIGV9O3QucHJvdG90eXBlLnVwZGF0ZVZvaWRUb1VuZGVmaW5lZD1mdW5jdGlvbihlKXtpZihlLm9wZXJhdG9yPT09XCJ2b2lkXCIpe3JldHVybiBvKGUse3R5cGU6XCJJZGVudGlmaWVyXCIsbmFtZTpcInVuZGVmaW5lZFwifSl9ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLmVzY2FwZVVuZGVmaW5lZD1mdW5jdGlvbihlKXtpZihlLm5hbWU9PT1cInVuZGVmaW5lZFwiJiZ0aGlzLm9wdGlvbnMuY29tcGF0KXtyZXR1cm4gbyhlLHt0eXBlOlwiQ29mZmVlRXNjYXBlZEV4cHJlc3Npb25cIixyYXc6XCJ1bmRlZmluZWRcIn0pfWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5yZW1vdmVVbmRlZmluZWRQYXJhbWV0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHIsaSxvLHM7aWYoZS5wYXJhbXMpe3M9ZS5wYXJhbXM7Zm9yKHQ9cj0wLGk9cy5sZW5ndGg7cjxpO3Q9KytyKXtvPXNbdF07dT10PT09ZS5wYXJhbXMubGVuZ3RoLTE7bj1vLnR5cGU9PT1cIklkZW50aWZpZXJcIiYmby5uYW1lPT09XCJ1bmRlZmluZWRcIjtpZihuKXtpZih1KXtlLnBhcmFtcy5wb3AoKX1lbHNle3RoaXMuc3ludGF4RXJyb3IobyxcIid1bmRlZmluZWQnIGlzIG5vdCBhbGxvd2VkIGluIGZ1bmN0aW9uIHBhcmFtZXRlcnNcIil9fX19cmV0dXJuIGV9O3QucHJvdG90eXBlLnBhcmVudGhlc2l6ZUNhbGxlZT1mdW5jdGlvbihlKXtpZihlLmNhbGxlZS50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIil7ZS5jYWxsZWUuX3BhcmVudGhlc2l6ZWQ9dHJ1ZTtyZXR1cm4gZX19O3JldHVybiB0fShuKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMjA6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGEsbD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihmLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sZj17fS5oYXNPd25Qcm9wZXJ0eTtyPWUoXCIuLi9oZWxwZXJzXCIpLmdldFByZWNlZGVuY2U7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtsKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUub25FbnRlcj1mdW5jdGlvbihlLHQpe3ZhciB1LG4scztpZighdCl7cmV0dXJufXM9dC50eXBlO2lmKHM9PT1cIkNhbGxFeHByZXNzaW9uXCImJnRbXCJhcmd1bWVudHNcIl0uaW5kZXhPZihlKT4tMSl7cmV0dXJufWlmKHM9PT1cIk5ld0V4cHJlc3Npb25cIiYmdFtcImFyZ3VtZW50c1wiXS5pbmRleE9mKGUpPi0xKXtyZXR1cm59aWYocz09PVwiTWVtYmVyRXhwcmVzc2lvblwiJiZ0LnByb3BlcnR5PT09ZSl7cmV0dXJufW49cihlKTtpZihuPT09LTEpe3JldHVybn11PW8odCxlKXx8aSh0LGUpfHxhKHQsZSl8fG48cih0KTtpZih1KXtyZXR1cm4gZS5fcGFyZW50aGVzaXplZD10cnVlfX07cmV0dXJuIHR9KG4pO289ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLFwiLVwiKSYmZS5yaWdodD09PXR9O2k9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLFwiL1wiKSYmKHModCxcIi9cIil8fHModCxcIipcIikpJiZlLnJpZ2h0PT09dH07cz1mdW5jdGlvbihlLHQpe3JldHVybiBlLnR5cGU9PT1cIkJpbmFyeUV4cHJlc3Npb25cIiYmZS5vcGVyYXRvcj09PXR9O2E9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS50eXBlPT09XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIiYmdC50eXBlPT09XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIiYmZS5hbHRlcm5hdGUhPT10fX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMjE6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoby5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LG89e30uaGFzT3duUHJvcGVydHk7cj1lKFwiLi4vaGVscGVyc1wiKS5nZXRSZXR1cm5TdGF0ZW1lbnRzO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLm9uU2NvcGVFeGl0PWZ1bmN0aW9uKGUsdCx1LG4pe3JldHVybiB0aGlzLnVucmV0dXJuaWZ5KHUpfTt0LnByb3RvdHlwZS51bnJldHVybmlmeT1mdW5jdGlvbihlLHQpe3ZhciB1O2lmKHQ9PW51bGwpe3Q9XCJib2R5XCJ9aWYoZVt0XS5sZW5ndGg+MCl7dT1yKGVbdF0pO2lmKHUubGVuZ3RoPT09MCl7ZVt0XS5wdXNoKHt0eXBlOlwiUmV0dXJuU3RhdGVtZW50XCJ9KX1lbHNle3UuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlLmFyZ3VtZW50KXtlLnR5cGU9XCJFeHByZXNzaW9uU3RhdGVtZW50XCI7cmV0dXJuIGUuZXhwcmVzc2lvbj1lLmFyZ3VtZW50fX0pfX19O3JldHVybiB0fShuKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMjI6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGkuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxpPXt9Lmhhc093blByb3BlcnR5O249ZShcIi4vYmFzZS5jb2ZmZWVcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3IodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5Td2l0Y2hTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5jb25zb2xpZGF0ZUNhc2VzKGUpO3JldHVybiB0aGlzLmVuc3VyZUxhc3RDYXNlSXNEZWZhdWx0KGUpfTt0LnByb3RvdHlwZS5Td2l0Y2hDYXNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZUJyZWFrc0Zyb21Db25zZXF1ZW50cyhlKX07dC5wcm90b3R5cGUuZW5zdXJlTGFzdENhc2VJc0RlZmF1bHQ9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHIsaSxvLHMsYTt0PWUuY2FzZXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1cIlN3aXRjaENhc2VcIn0pO3M9dC5sZW5ndGg7Zm9yKHU9aT0wLGE9dC5sZW5ndGg7aTxhO3U9KytpKXtvPXRbdV07cj11PT09cy0xO249by50ZXN0PT1udWxsO2lmKG4mJiFyKXt0aGlzLnN5bnRheEVycm9yKG8sXCJkZWZhdWx0IGNhc2VzIG9ubHkgYWxsb3dlZCBhdCB0aGUgZW5kXCIpfX1yZXR1cm4gZX07dC5wcm90b3R5cGUuY29uc29saWRhdGVDYXNlcz1mdW5jdGlvbihlKXt2YXIgdCx1LG4scixpLG8scztpPVtdO3M9W107bz1lLmNhc2VzO2Zvcih0PXU9MCxyPW8ubGVuZ3RoO3U8cjt0PSsrdSl7bj1vW3RdO2lmKG4udHlwZT09PVwiU3dpdGNoQ2FzZVwiKXtpZihuLnRlc3Qpe3MucHVzaChuLnRlc3QpfWlmKG4uY29uc2VxdWVudC5sZW5ndGg+MCl7aWYobi50ZXN0KXtuLnRlc3Q9e3R5cGU6XCJDb2ZmZWVMaXN0RXhwcmVzc2lvblwiLGV4cHJlc3Npb25zOnN9fXM9W107aS5wdXNoKG4pfX1lbHNle2kucHVzaChuKX19ZS5jYXNlcz1pO3JldHVybiBlfTt0LnByb3RvdHlwZS5yZW1vdmVCcmVha3NGcm9tQ29uc2VxdWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQsdTtpZihlLnRlc3Qpe3Q9ZS5jb25zZXF1ZW50Lmxlbmd0aC0xO3U9ZS5jb25zZXF1ZW50W3RdO2lmKCh1IT1udWxsP3UudHlwZTp2b2lkIDApPT09XCJCcmVha1N0YXRlbWVudFwiKXtkZWxldGUgZS5jb25zZXF1ZW50W3RdO2UuY29uc2VxdWVudC5sZW5ndGgtPTF9ZWxzZSBpZigodSE9bnVsbD91LnR5cGU6dm9pZCAwKT09PVwiQ29udGludWVTdGF0ZW1lbnRcIil7fWVsc2UgaWYoKHUhPW51bGw/dS50eXBlOnZvaWQgMCkhPT1cIlJldHVyblN0YXRlbWVudFwiKXt0aGlzLnN5bnRheEVycm9yKGUsXCJObyBicmVhayBvciByZXR1cm4gc3RhdGVtZW50IGZvdW5kIGluIGEgY2FzZVwiKX1yZXR1cm4gZX19O3JldHVybiB0fShuKX0se1wiLi9iYXNlLmNvZmZlZVwiOjZ9XSwyMzpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoaS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGk9e30uaGFzT3duUHJvcGVydHk7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuTGFiZWxlZFN0YXRlbWVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnN5bnRheEVycm9yKGUsXCJMYWJlbGVkIHN0YXRlbWVudHMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ29mZmVlU2NpcnB0XCIpfTt0LnByb3RvdHlwZS5XaXRoU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnN5bnRheEVycm9yKGUsXCInd2l0aCcgaXMgbm90IHN1cHBvcnRlZCBpbiBDb2ZmZWVTY3JpcHRcIil9O3JldHVybiB0fShuKX0se1wiLi9iYXNlXCI6Nn1dLDI0OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIE9iamVjdC5jcmVhdGU9PT1cImZ1bmN0aW9uXCIpe3QuZXhwb3J0cz1mdW5jdGlvbiBuKGUsdCl7ZS5zdXBlcl89dDtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSl9fWVsc2V7dC5leHBvcnRzPWZ1bmN0aW9uIHIoZSx0KXtlLnN1cGVyXz10O3ZhciB1PWZ1bmN0aW9uKCl7fTt1LnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgdTtlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lfX19LHt9XSwyNTpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIHU9MDtmb3IodmFyIG49ZS5sZW5ndGgtMTtuPj0wO24tLSl7dmFyIHI9ZVtuXTtpZihyPT09XCIuXCIpe2Uuc3BsaWNlKG4sMSl9ZWxzZSBpZihyPT09XCIuLlwiKXtlLnNwbGljZShuLDEpO3UrK31lbHNlIGlmKHUpe2Uuc3BsaWNlKG4sMSk7dS0tfX1pZih0KXtmb3IoO3UtLTt1KXtlLnVuc2hpZnQoXCIuLlwiKX19cmV0dXJuIGV9dmFyIG49L14oXFwvP3wpKFtcXHNcXFNdKj8pKCg/OlxcLnsxLDJ9fFteXFwvXSs/fCkoXFwuW14uXFwvXSp8KSkoPzpbXFwvXSopJC87dmFyIHI9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uZXhlYyhlKS5zbGljZSgxKX07dS5yZXNvbHZlPWZ1bmN0aW9uKCl7dmFyIHU9XCJcIixuPWZhbHNlO2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLTE7cj49LTEmJiFuO3ItLSl7dmFyIG89cj49MD9hcmd1bWVudHNbcl06ZS5jd2QoKTtpZih0eXBlb2YgbyE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5nc1wiKX1lbHNlIGlmKCFvKXtjb250aW51ZX11PW8rXCIvXCIrdTtuPW8uY2hhckF0KDApPT09XCIvXCJ9dT10KGkodS5zcGxpdChcIi9cIiksZnVuY3Rpb24oZSl7cmV0dXJuISFlfSksIW4pLmpvaW4oXCIvXCIpO3JldHVybihuP1wiL1wiOlwiXCIpK3V8fFwiLlwifTt1Lm5vcm1hbGl6ZT1mdW5jdGlvbihlKXt2YXIgbj11LmlzQWJzb2x1dGUoZSkscj1vKGUsLTEpPT09XCIvXCI7ZT10KGkoZS5zcGxpdChcIi9cIiksZnVuY3Rpb24oZSl7cmV0dXJuISFlfSksIW4pLmpvaW4oXCIvXCIpO2lmKCFlJiYhbil7ZT1cIi5cIn1pZihlJiZyKXtlKz1cIi9cIn1yZXR1cm4obj9cIi9cIjpcIlwiKStlfTt1LmlzQWJzb2x1dGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApPT09XCIvXCJ9O3Uuam9pbj1mdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gdS5ub3JtYWxpemUoaShlLGZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIGUhPT1cInN0cmluZ1wiKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnRzIHRvIHBhdGguam9pbiBtdXN0IGJlIHN0cmluZ3NcIil9cmV0dXJuIGV9KS5qb2luKFwiL1wiKSl9O3UucmVsYXRpdmU9ZnVuY3Rpb24oZSx0KXtlPXUucmVzb2x2ZShlKS5zdWJzdHIoMSk7dD11LnJlc29sdmUodCkuc3Vic3RyKDEpO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9MDtmb3IoO3Q8ZS5sZW5ndGg7dCsrKXtpZihlW3RdIT09XCJcIilicmVha312YXIgdT1lLmxlbmd0aC0xO2Zvcig7dT49MDt1LS0pe2lmKGVbdV0hPT1cIlwiKWJyZWFrfWlmKHQ+dSlyZXR1cm5bXTtyZXR1cm4gZS5zbGljZSh0LHUtdCsxKX12YXIgcj1uKGUuc3BsaXQoXCIvXCIpKTt2YXIgaT1uKHQuc3BsaXQoXCIvXCIpKTt2YXIgbz1NYXRoLm1pbihyLmxlbmd0aCxpLmxlbmd0aCk7dmFyIHM9bztmb3IodmFyIGE9MDthPG87YSsrKXtpZihyW2FdIT09aVthXSl7cz1hO2JyZWFrfX12YXIgbD1bXTtmb3IodmFyIGE9czthPHIubGVuZ3RoO2ErKyl7bC5wdXNoKFwiLi5cIil9bD1sLmNvbmNhdChpLnNsaWNlKHMpKTtyZXR1cm4gbC5qb2luKFwiL1wiKX07dS5zZXA9XCIvXCI7dS5kZWxpbWl0ZXI9XCI6XCI7dS5kaXJuYW1lPWZ1bmN0aW9uKGUpe3ZhciB0PXIoZSksdT10WzBdLG49dFsxXTtpZighdSYmIW4pe3JldHVyblwiLlwifWlmKG4pe249bi5zdWJzdHIoMCxuLmxlbmd0aC0xKX1yZXR1cm4gdStufTt1LmJhc2VuYW1lPWZ1bmN0aW9uKGUsdCl7dmFyIHU9cihlKVsyXTtpZih0JiZ1LnN1YnN0cigtMSp0Lmxlbmd0aCk9PT10KXt1PXUuc3Vic3RyKDAsdS5sZW5ndGgtdC5sZW5ndGgpfXJldHVybiB1fTt1LmV4dG5hbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSlbM119O2Z1bmN0aW9uIGkoZSx0KXtpZihlLmZpbHRlcilyZXR1cm4gZS5maWx0ZXIodCk7dmFyIHU9W107Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe2lmKHQoZVtuXSxuLGUpKXUucHVzaChlW25dKX1yZXR1cm4gdX12YXIgbz1cImFiXCIuc3Vic3RyKC0xKT09PVwiYlwiP2Z1bmN0aW9uKGUsdCx1KXtyZXR1cm4gZS5zdWJzdHIodCx1KX06ZnVuY3Rpb24oZSx0LHUpe2lmKHQ8MCl0PWUubGVuZ3RoK3Q7cmV0dXJuIGUuc3Vic3RyKHQsdSl9fSkuY2FsbCh0aGlzLGUoXCJfcHJvY2Vzc1wiKSl9LHtfcHJvY2VzczoyNn1dLDI2OltmdW5jdGlvbihlLHQsdSl7dmFyIG49dC5leHBvcnRzPXt9O24ubmV4dFRpY2s9ZnVuY3Rpb24oKXt2YXIgZT10eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIiYmd2luZG93LnNldEltbWVkaWF0ZTt2YXIgdD10eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIiYmd2luZG93LnBvc3RNZXNzYWdlJiZ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcjtpZihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5zZXRJbW1lZGlhdGUoZSl9fWlmKHQpe3ZhciB1PVtdO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUuc291cmNlO2lmKCh0PT09d2luZG93fHx0PT09bnVsbCkmJmUuZGF0YT09PVwicHJvY2Vzcy10aWNrXCIpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7aWYodS5sZW5ndGg+MCl7dmFyIG49dS5zaGlmdCgpO24oKX19fSx0cnVlKTtyZXR1cm4gZnVuY3Rpb24gbihlKXt1LnB1c2goZSk7d2luZG93LnBvc3RNZXNzYWdlKFwicHJvY2Vzcy10aWNrXCIsXCIqXCIpfX1yZXR1cm4gZnVuY3Rpb24gcihlKXtzZXRUaW1lb3V0KGUsMCl9fSgpO24udGl0bGU9XCJicm93c2VyXCI7bi5icm93c2VyPXRydWU7bi5lbnY9e307bi5hcmd2PVtdO2Z1bmN0aW9uIHIoKXt9bi5vbj1yO24uYWRkTGlzdGVuZXI9cjtuLm9uY2U9cjtuLm9mZj1yO24ucmVtb3ZlTGlzdGVuZXI9cjtuLnJlbW92ZUFsbExpc3RlbmVycz1yO24uZW1pdD1yO24uYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX07bi5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn07bi5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9fSx7fV0sMjc6W2Z1bmN0aW9uKGUsdCx1KXt0LmV4cG9ydHM9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmdHlwZW9mIGU9PT1cIm9iamVjdFwiJiZ0eXBlb2YgZS5jb3B5PT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgZS5maWxsPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgZS5yZWFkVUludDg9PT1cImZ1bmN0aW9uXCJ9fSx7fV0sMjg6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24odCxuKXt2YXIgcj0vJVtzZGolXS9nO3UuZm9ybWF0PWZ1bmN0aW9uKGUpe2lmKCF5KGUpKXt2YXIgdD1bXTtmb3IodmFyIHU9MDt1PGFyZ3VtZW50cy5sZW5ndGg7dSsrKXt0LnB1c2gocyhhcmd1bWVudHNbdV0pKX1yZXR1cm4gdC5qb2luKFwiIFwiKX12YXIgdT0xO3ZhciBuPWFyZ3VtZW50czt2YXIgaT1uLmxlbmd0aDt2YXIgbz1TdHJpbmcoZSkucmVwbGFjZShyLGZ1bmN0aW9uKGUpe2lmKGU9PT1cIiUlXCIpcmV0dXJuXCIlXCI7aWYodT49aSlyZXR1cm4gZTtzd2l0Y2goZSl7Y2FzZVwiJXNcIjpyZXR1cm4gU3RyaW5nKG5bdSsrXSk7Y2FzZVwiJWRcIjpyZXR1cm4gTnVtYmVyKG5bdSsrXSk7Y2FzZVwiJWpcIjp0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KG5bdSsrXSl9Y2F0Y2godCl7cmV0dXJuXCJbQ2lyY3VsYXJdXCJ9ZGVmYXVsdDpyZXR1cm4gZX19KTtmb3IodmFyIGE9blt1XTt1PGk7YT1uWysrdV0pe2lmKEUoYSl8fCFTKGEpKXtvKz1cIiBcIithfWVsc2V7bys9XCIgXCIrcyhhKX19cmV0dXJuIG99O3UuZGVwcmVjYXRlPWZ1bmN0aW9uKGUscil7aWYodihuLnByb2Nlc3MpKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdS5kZXByZWNhdGUoZSxyKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWlmKHQubm9EZXByZWNhdGlvbj09PXRydWUpe3JldHVybiBlfXZhciBpPWZhbHNlO2Z1bmN0aW9uIG8oKXtpZighaSl7aWYodC50aHJvd0RlcHJlY2F0aW9uKXt0aHJvdyBuZXcgRXJyb3Iocil9ZWxzZSBpZih0LnRyYWNlRGVwcmVjYXRpb24pe2NvbnNvbGUudHJhY2Uocil9ZWxzZXtjb25zb2xlLmVycm9yKHIpfWk9dHJ1ZX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG99O3ZhciBpPXt9O3ZhciBvO3UuZGVidWdsb2c9ZnVuY3Rpb24oZSl7aWYodihvKSlvPXQuZW52Lk5PREVfREVCVUd8fFwiXCI7ZT1lLnRvVXBwZXJDYXNlKCk7aWYoIWlbZV0pe2lmKG5ldyBSZWdFeHAoXCJcXFxcYlwiK2UrXCJcXFxcYlwiLFwiaVwiKS50ZXN0KG8pKXt2YXIgbj10LnBpZDtpW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9dS5mb3JtYXQuYXBwbHkodSxhcmd1bWVudHMpO2NvbnNvbGUuZXJyb3IoXCIlcyAlZDogJXNcIixlLG4sdCl9fWVsc2V7aVtlXT1mdW5jdGlvbigpe319fXJldHVybiBpW2VdfTtmdW5jdGlvbiBzKGUsdCl7dmFyIG49e3NlZW46W10sc3R5bGl6ZTpsfTtpZihhcmd1bWVudHMubGVuZ3RoPj0zKW4uZGVwdGg9YXJndW1lbnRzWzJdO2lmKGFyZ3VtZW50cy5sZW5ndGg+PTQpbi5jb2xvcnM9YXJndW1lbnRzWzNdO2lmKEModCkpe24uc2hvd0hpZGRlbj10fWVsc2UgaWYodCl7dS5fZXh0ZW5kKG4sdCl9aWYodihuLnNob3dIaWRkZW4pKW4uc2hvd0hpZGRlbj1mYWxzZTtpZih2KG4uZGVwdGgpKW4uZGVwdGg9MjtpZih2KG4uY29sb3JzKSluLmNvbG9ycz1mYWxzZTtpZih2KG4uY3VzdG9tSW5zcGVjdCkpbi5jdXN0b21JbnNwZWN0PXRydWU7aWYobi5jb2xvcnMpbi5zdHlsaXplPWE7cmV0dXJuIGMobixlLG4uZGVwdGgpfXUuaW5zcGVjdD1zO3MuY29sb3JzPXtib2xkOlsxLDIyXSxpdGFsaWM6WzMsMjNdLHVuZGVybGluZTpbNCwyNF0saW52ZXJzZTpbNywyN10sd2hpdGU6WzM3LDM5XSxncmV5Ols5MCwzOV0sYmxhY2s6WzMwLDM5XSxibHVlOlszNCwzOV0sY3lhbjpbMzYsMzldLGdyZWVuOlszMiwzOV0sbWFnZW50YTpbMzUsMzldLHJlZDpbMzEsMzldLHllbGxvdzpbMzMsMzldfTtzLnN0eWxlcz17c3BlY2lhbDpcImN5YW5cIixudW1iZXI6XCJ5ZWxsb3dcIixcImJvb2xlYW5cIjpcInllbGxvd1wiLHVuZGVmaW5lZDpcImdyZXlcIixcIm51bGxcIjpcImJvbGRcIixzdHJpbmc6XCJncmVlblwiLGRhdGU6XCJtYWdlbnRhXCIscmVnZXhwOlwicmVkXCJ9O2Z1bmN0aW9uIGEoZSx0KXt2YXIgdT1zLnN0eWxlc1t0XTtpZih1KXtyZXR1cm5cIlx1MDAxYltcIitzLmNvbG9yc1t1XVswXStcIm1cIitlK1wiXHUwMDFiW1wiK3MuY29sb3JzW3VdWzFdK1wibVwifWVsc2V7cmV0dXJuIGV9fWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gZX1mdW5jdGlvbiBmKGUpe3ZhciB0PXt9O2UuZm9yRWFjaChmdW5jdGlvbihlLHUpe3RbZV09dHJ1ZX0pO3JldHVybiB0fWZ1bmN0aW9uIGMoZSx0LG4pe2lmKGUuY3VzdG9tSW5zcGVjdCYmdCYmXyh0Lmluc3BlY3QpJiZ0Lmluc3BlY3QhPT11Lmluc3BlY3QmJiEodC5jb25zdHJ1Y3RvciYmdC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU9PT10KSl7dmFyIHI9dC5pbnNwZWN0KG4sZSk7aWYoIXkocikpe3I9YyhlLHIsbil9cmV0dXJuIHJ9dmFyIGk9cChlLHQpO2lmKGkpe3JldHVybiBpfXZhciBvPU9iamVjdC5rZXlzKHQpO3ZhciBzPWYobyk7aWYoZS5zaG93SGlkZGVuKXtvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpfWlmKHcodCkmJihvLmluZGV4T2YoXCJtZXNzYWdlXCIpPj0wfHxvLmluZGV4T2YoXCJkZXNjcmlwdGlvblwiKT49MCkpe3JldHVybiBEKHQpfWlmKG8ubGVuZ3RoPT09MCl7aWYoXyh0KSl7dmFyIGE9dC5uYW1lP1wiOiBcIit0Lm5hbWU6XCJcIjtyZXR1cm4gZS5zdHlsaXplKFwiW0Z1bmN0aW9uXCIrYStcIl1cIixcInNwZWNpYWxcIil9aWYoYih0KSl7cmV0dXJuIGUuc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCksXCJyZWdleHBcIil9aWYoeCh0KSl7cmV0dXJuIGUuc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLFwiZGF0ZVwiKX1pZih3KHQpKXtyZXR1cm4gRCh0KX19dmFyIGw9XCJcIixDPWZhbHNlLEU9W1wie1wiLFwifVwiXTtpZihBKHQpKXtDPXRydWU7RT1bXCJbXCIsXCJdXCJdfWlmKF8odCkpe3ZhciBGPXQubmFtZT9cIjogXCIrdC5uYW1lOlwiXCI7bD1cIiBbRnVuY3Rpb25cIitGK1wiXVwifWlmKGIodCkpe2w9XCIgXCIrUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWlmKHgodCkpe2w9XCIgXCIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh0KX1pZih3KHQpKXtsPVwiIFwiK0QodCl9aWYoby5sZW5ndGg9PT0wJiYoIUN8fHQubGVuZ3RoPT0wKSl7cmV0dXJuIEVbMF0rbCtFWzFdfWlmKG48MCl7aWYoYih0KSl7cmV0dXJuIGUuc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCksXCJyZWdleHBcIil9ZWxzZXtyZXR1cm4gZS5zdHlsaXplKFwiW09iamVjdF1cIixcInNwZWNpYWxcIil9fWUuc2Vlbi5wdXNoKHQpO3ZhciBnO2lmKEMpe2c9aChlLHQsbixzLG8pfWVsc2V7Zz1vLm1hcChmdW5jdGlvbih1KXtyZXR1cm4gbShlLHQsbixzLHUsQyl9KX1lLnNlZW4ucG9wKCk7cmV0dXJuIGQoZyxsLEUpfWZ1bmN0aW9uIHAoZSx0KXtpZih2KHQpKXJldHVybiBlLnN0eWxpemUoXCJ1bmRlZmluZWRcIixcInVuZGVmaW5lZFwiKTtpZih5KHQpKXt2YXIgdT1cIidcIitKU09OLnN0cmluZ2lmeSh0KS5yZXBsYWNlKC9eXCJ8XCIkL2csXCJcIikucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykrXCInXCI7cmV0dXJuIGUuc3R5bGl6ZSh1LFwic3RyaW5nXCIpfWlmKGcodCkpcmV0dXJuIGUuc3R5bGl6ZShcIlwiK3QsXCJudW1iZXJcIik7aWYoQyh0KSlyZXR1cm4gZS5zdHlsaXplKFwiXCIrdCxcImJvb2xlYW5cIik7aWYoRSh0KSlyZXR1cm4gZS5zdHlsaXplKFwibnVsbFwiLFwibnVsbFwiKX1mdW5jdGlvbiBEKGUpe3JldHVyblwiW1wiK0Vycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpK1wiXVwifWZ1bmN0aW9uIGgoZSx0LHUsbixyKXt2YXIgaT1bXTtmb3IodmFyIG89MCxzPXQubGVuZ3RoO288czsrK28pe2lmKGoodCxTdHJpbmcobykpKXtpLnB1c2gobShlLHQsdSxuLFN0cmluZyhvKSx0cnVlKSl9ZWxzZXtpLnB1c2goXCJcIil9fXIuZm9yRWFjaChmdW5jdGlvbihyKXtpZighci5tYXRjaCgvXlxcZCskLykpe2kucHVzaChtKGUsdCx1LG4scix0cnVlKSl9fSk7cmV0dXJuIGl9ZnVuY3Rpb24gbShlLHQsdSxuLHIsaSl7dmFyIG8scyxhO2E9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpfHx7dmFsdWU6dFtyXX07aWYoYS5nZXQpe2lmKGEuc2V0KXtzPWUuc3R5bGl6ZShcIltHZXR0ZXIvU2V0dGVyXVwiLFwic3BlY2lhbFwiKX1lbHNle3M9ZS5zdHlsaXplKFwiW0dldHRlcl1cIixcInNwZWNpYWxcIil9fWVsc2V7aWYoYS5zZXQpe3M9ZS5zdHlsaXplKFwiW1NldHRlcl1cIixcInNwZWNpYWxcIil9fWlmKCFqKG4scikpe289XCJbXCIrcitcIl1cIn1pZighcyl7aWYoZS5zZWVuLmluZGV4T2YoYS52YWx1ZSk8MCl7aWYoRSh1KSl7cz1jKGUsYS52YWx1ZSxudWxsKX1lbHNle3M9YyhlLGEudmFsdWUsdS0xKX1pZihzLmluZGV4T2YoXCJcXG5cIik+LTEpe2lmKGkpe3M9cy5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCIgIFwiK2V9KS5qb2luKFwiXFxuXCIpLnN1YnN0cigyKX1lbHNle3M9XCJcXG5cIitzLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5cIiAgIFwiK2V9KS5qb2luKFwiXFxuXCIpfX19ZWxzZXtzPWUuc3R5bGl6ZShcIltDaXJjdWxhcl1cIixcInNwZWNpYWxcIil9fWlmKHYobykpe2lmKGkmJnIubWF0Y2goL15cXGQrJC8pKXtyZXR1cm4gc31vPUpTT04uc3RyaW5naWZ5KFwiXCIrcik7aWYoby5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpe289by5zdWJzdHIoMSxvLmxlbmd0aC0yKTtvPWUuc3R5bGl6ZShvLFwibmFtZVwiKX1lbHNle289by5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKS5yZXBsYWNlKC8oXlwifFwiJCkvZyxcIidcIik7bz1lLnN0eWxpemUobyxcInN0cmluZ1wiKX19cmV0dXJuIG8rXCI6IFwiK3N9ZnVuY3Rpb24gZChlLHQsdSl7dmFyIG49MDt2YXIgcj1lLnJlZHVjZShmdW5jdGlvbihlLHQpe24rKztpZih0LmluZGV4T2YoXCJcXG5cIik+PTApbisrO3JldHVybiBlK3QucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csXCJcIikubGVuZ3RoKzF9LDApO2lmKHI+NjApe3JldHVybiB1WzBdKyh0PT09XCJcIj9cIlwiOnQrXCJcXG4gXCIpK1wiIFwiK2Uuam9pbihcIixcXG4gIFwiKStcIiBcIit1WzFdfXJldHVybiB1WzBdK3QrXCIgXCIrZS5qb2luKFwiLCBcIikrXCIgXCIrdVsxXX1mdW5jdGlvbiBBKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpfXUuaXNBcnJheT1BO2Z1bmN0aW9uIEMoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJib29sZWFuXCJ9dS5pc0Jvb2xlYW49QztmdW5jdGlvbiBFKGUpe3JldHVybiBlPT09bnVsbH11LmlzTnVsbD1FO2Z1bmN0aW9uIEYoZSl7cmV0dXJuIGU9PW51bGx9dS5pc051bGxPclVuZGVmaW5lZD1GO2Z1bmN0aW9uIGcoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJudW1iZXJcIn11LmlzTnVtYmVyPWc7ZnVuY3Rpb24geShlKXtyZXR1cm4gdHlwZW9mIGU9PT1cInN0cmluZ1wifXUuaXNTdHJpbmc9eTtmdW5jdGlvbiBCKGUpe3JldHVybiB0eXBlb2YgZT09PVwic3ltYm9sXCJ9dS5pc1N5bWJvbD1CO2Z1bmN0aW9uIHYoZSl7cmV0dXJuIGU9PT12b2lkIDB9dS5pc1VuZGVmaW5lZD12O2Z1bmN0aW9uIGIoZSl7cmV0dXJuIFMoZSkmJkkoZSk9PT1cIltvYmplY3QgUmVnRXhwXVwifXUuaXNSZWdFeHA9YjtmdW5jdGlvbiBTKGUpe3JldHVybiB0eXBlb2YgZT09PVwib2JqZWN0XCImJmUhPT1udWxsfXUuaXNPYmplY3Q9UztmdW5jdGlvbiB4KGUpe3JldHVybiBTKGUpJiZJKGUpPT09XCJbb2JqZWN0IERhdGVdXCJ9dS5pc0RhdGU9eDtmdW5jdGlvbiB3KGUpe3JldHVybiBTKGUpJiYoSShlKT09PVwiW29iamVjdCBFcnJvcl1cInx8ZSBpbnN0YW5jZW9mIEVycm9yKX11LmlzRXJyb3I9dztmdW5jdGlvbiBfKGUpe3JldHVybiB0eXBlb2YgZT09PVwiZnVuY3Rpb25cIn11LmlzRnVuY3Rpb249XztmdW5jdGlvbiBrKGUpe3JldHVybiBlPT09bnVsbHx8dHlwZW9mIGU9PT1cImJvb2xlYW5cInx8dHlwZW9mIGU9PT1cIm51bWJlclwifHx0eXBlb2YgZT09PVwic3RyaW5nXCJ8fHR5cGVvZiBlPT09XCJzeW1ib2xcInx8dHlwZW9mIGU9PT1cInVuZGVmaW5lZFwifXUuaXNQcmltaXRpdmU9azt1LmlzQnVmZmVyPWUoXCIuL3N1cHBvcnQvaXNCdWZmZXJcIik7ZnVuY3Rpb24gSShlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIFAoZSl7cmV0dXJuIGU8MTA/XCIwXCIrZS50b1N0cmluZygxMCk6ZS50b1N0cmluZygxMCl9dmFyIEw9W1wiSmFuXCIsXCJGZWJcIixcIk1hclwiLFwiQXByXCIsXCJNYXlcIixcIkp1blwiLFwiSnVsXCIsXCJBdWdcIixcIlNlcFwiLFwiT2N0XCIsXCJOb3ZcIixcIkRlY1wiXTtmdW5jdGlvbiBPKCl7dmFyIGU9bmV3IERhdGU7dmFyIHQ9W1AoZS5nZXRIb3VycygpKSxQKGUuZ2V0TWludXRlcygpKSxQKGUuZ2V0U2Vjb25kcygpKV0uam9pbihcIjpcIik7cmV0dXJuW2UuZ2V0RGF0ZSgpLExbZS5nZXRNb250aCgpXSx0XS5qb2luKFwiIFwiKX11LmxvZz1mdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiJXMgLSAlc1wiLE8oKSx1LmZvcm1hdC5hcHBseSh1LGFyZ3VtZW50cykpfTt1LmluaGVyaXRzPWUoXCJpbmhlcml0c1wiKTt1Ll9leHRlbmQ9ZnVuY3Rpb24oZSx0KXtpZighdHx8IVModCkpcmV0dXJuIGU7dmFyIHU9T2JqZWN0LmtleXModCk7dmFyIG49dS5sZW5ndGg7d2hpbGUobi0tKXtlW3Vbbl1dPXRbdVtuXV19cmV0dXJuIGV9O2Z1bmN0aW9uIGooZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9fSkuY2FsbCh0aGlzLGUoXCJfcHJvY2Vzc1wiKSx0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93Ont9KX0se1wiLi9zdXBwb3J0L2lzQnVmZmVyXCI6MjcsX3Byb2Nlc3M6MjYsaW5oZXJpdHM6MjR9XSwyOTpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbih0KXsoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgbixyLGksbyxzLGEsbCxmLGMscCxELGgsbSxkLEEsQyxFLEYsZyx5LEIsdixiLFMseCx3LF87cz1lKFwiZXN0cmF2ZXJzZVwiKTthPWUoXCJlc3V0aWxzXCIpO249cy5TeW50YXg7ZnVuY3Rpb24gayhlKXtyZXR1cm4geWUuRXhwcmVzc2lvbi5oYXNPd25Qcm9wZXJ0eShlLnR5cGUpfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIHllLlN0YXRlbWVudC5oYXNPd25Qcm9wZXJ0eShlLnR5cGUpfXI9e1NlcXVlbmNlOjAsWWllbGQ6MSxBd2FpdDoxLEFzc2lnbm1lbnQ6MSxDb25kaXRpb25hbDoyLEFycm93RnVuY3Rpb246MixMb2dpY2FsT1I6MyxMb2dpY2FsQU5EOjQsQml0d2lzZU9SOjUsQml0d2lzZVhPUjo2LEJpdHdpc2VBTkQ6NyxFcXVhbGl0eTo4LFJlbGF0aW9uYWw6OSxCaXR3aXNlU0hJRlQ6MTAsQWRkaXRpdmU6MTEsTXVsdGlwbGljYXRpdmU6MTIsVW5hcnk6MTMsUG9zdGZpeDoxNCxDYWxsOjE1LE5ldzoxNixUYWdnZWRUZW1wbGF0ZToxNyxNZW1iZXI6MTgsUHJpbWFyeToxOX07aT17XCJ8fFwiOnIuTG9naWNhbE9SLFwiJiZcIjpyLkxvZ2ljYWxBTkQsXCJ8XCI6ci5CaXR3aXNlT1IsXCJeXCI6ci5CaXR3aXNlWE9SLFwiJlwiOnIuQml0d2lzZUFORCxcIj09XCI6ci5FcXVhbGl0eSxcIiE9XCI6ci5FcXVhbGl0eSxcIj09PVwiOnIuRXF1YWxpdHksXCIhPT1cIjpyLkVxdWFsaXR5LGlzOnIuRXF1YWxpdHksaXNudDpyLkVxdWFsaXR5LFwiPFwiOnIuUmVsYXRpb25hbCxcIj5cIjpyLlJlbGF0aW9uYWwsXCI8PVwiOnIuUmVsYXRpb25hbCxcIj49XCI6ci5SZWxhdGlvbmFsLFwiaW5cIjpyLlJlbGF0aW9uYWwsXCJpbnN0YW5jZW9mXCI6ci5SZWxhdGlvbmFsLFwiPDxcIjpyLkJpdHdpc2VTSElGVCxcIj4+XCI6ci5CaXR3aXNlU0hJRlQsXCI+Pj5cIjpyLkJpdHdpc2VTSElGVCxcIitcIjpyLkFkZGl0aXZlLFwiLVwiOnIuQWRkaXRpdmUsXCIqXCI6ci5NdWx0aXBsaWNhdGl2ZSxcIiVcIjpyLk11bHRpcGxpY2F0aXZlLFwiL1wiOnIuTXVsdGlwbGljYXRpdmV9O3ZhciBQPTEsTD0xPDwxLE89MTw8MixqPTE8PDMsTT0xPDw0LFI9MTw8NTt2YXIgVD1MfE8sTj1QfEwscT1QfEx8TyxVPVAsej1PLFc9UHxPO3ZhciBWPVAsWT1QfFIsRz0wLEs9UHxNLCQ9UHxqO2Z1bmN0aW9uIEgoKXtyZXR1cm57aW5kZW50Om51bGwsYmFzZTpudWxsLHBhcnNlOm51bGwsY29tbWVudDpmYWxzZSxmb3JtYXQ6e2luZGVudDp7c3R5bGU6XCIgICAgXCIsYmFzZTowLGFkanVzdE11bHRpbGluZUNvbW1lbnQ6ZmFsc2V9LG5ld2xpbmU6XCJcXG5cIixzcGFjZTpcIiBcIixqc29uOmZhbHNlLHJlbnVtYmVyOmZhbHNlLGhleGFkZWNpbWFsOmZhbHNlLHF1b3RlczpcInNpbmdsZVwiLGVzY2FwZWxlc3M6ZmFsc2UsY29tcGFjdDpmYWxzZSxwYXJlbnRoZXNlczp0cnVlLHNlbWljb2xvbnM6dHJ1ZSxzYWZlQ29uY2F0ZW5hdGlvbjpmYWxzZSxwcmVzZXJ2ZUJsYW5rTGluZXM6ZmFsc2V9LG1vejp7Y29tcHJlaGVuc2lvbkV4cHJlc3Npb25TdGFydHNXaXRoQXNzaWdubWVudDpmYWxzZSxzdGFybGVzc0dlbmVyYXRvcjpmYWxzZX0sc291cmNlTWFwOm51bGwsc291cmNlTWFwUm9vdDpudWxsLHNvdXJjZU1hcFdpdGhDb2RlOmZhbHNlLGRpcmVjdGl2ZTpmYWxzZSxyYXc6dHJ1ZSx2ZXJiYXRpbTpudWxsLHNvdXJjZUNvZGU6bnVsbH19ZnVuY3Rpb24gSihlLHQpe3ZhciB1PVwiXCI7Zm9yKHR8PTA7dD4wO3Q+Pj49MSxlKz1lKXtpZih0JjEpe3UrPWV9fXJldHVybiB1fWw9QXJyYXkuaXNBcnJheTtpZighbCl7bD1mdW5jdGlvbiBfZShlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpPT09XCJbb2JqZWN0IEFycmF5XVwifX1mdW5jdGlvbiBYKGUpe3JldHVybi9bXFxyXFxuXS9nLnRlc3QoZSl9ZnVuY3Rpb24gWihlKXt2YXIgdD1lLmxlbmd0aDtyZXR1cm4gdCYmYS5jb2RlLmlzTGluZVRlcm1pbmF0b3IoZS5jaGFyQ29kZUF0KHQtMSkpfWZ1bmN0aW9uIFEoZSx0KXt2YXIgdTtmb3IodSBpbiB0KXtpZih0Lmhhc093blByb3BlcnR5KHUpKXtlW3VdPXRbdV19fXJldHVybiBlfWZ1bmN0aW9uIGVlKGUsdCl7dmFyIHUsbjtmdW5jdGlvbiByKGUpe3JldHVybiB0eXBlb2YgZT09PVwib2JqZWN0XCImJmUgaW5zdGFuY2VvZiBPYmplY3QmJiEoZSBpbnN0YW5jZW9mIFJlZ0V4cCl9Zm9yKHUgaW4gdCl7aWYodC5oYXNPd25Qcm9wZXJ0eSh1KSl7bj10W3VdO2lmKHIobikpe2lmKHIoZVt1XSkpe2VlKGVbdV0sbil9ZWxzZXtlW3VdPWVlKHt9LG4pfX1lbHNle2VbdV09bn19fXJldHVybiBlfWZ1bmN0aW9uIHRlKGUpe3ZhciB0LHUsbixyLGk7aWYoZSE9PWUpe3Rocm93IG5ldyBFcnJvcihcIk51bWVyaWMgbGl0ZXJhbCB3aG9zZSB2YWx1ZSBpcyBOYU5cIil9aWYoZTwwfHxlPT09MCYmMS9lPDApe3Rocm93IG5ldyBFcnJvcihcIk51bWVyaWMgbGl0ZXJhbCB3aG9zZSB2YWx1ZSBpcyBuZWdhdGl2ZVwiKX1pZihlPT09MS8wKXtyZXR1cm4gcD9cIm51bGxcIjpEP1wiMWU0MDBcIjpcIjFlKzQwMFwifXQ9XCJcIitlO2lmKCFEfHx0Lmxlbmd0aDwzKXtyZXR1cm4gdH11PXQuaW5kZXhPZihcIi5cIik7aWYoIXAmJnQuY2hhckNvZGVBdCgwKT09PTQ4JiZ1PT09MSl7dT0wO3Q9dC5zbGljZSgxKX1uPXQ7dD10LnJlcGxhY2UoXCJlK1wiLFwiZVwiKTtyPTA7aWYoKGk9bi5pbmRleE9mKFwiZVwiKSk+MCl7cj0rbi5zbGljZShpKzEpO249bi5zbGljZSgwLGkpfWlmKHU+PTApe3ItPW4ubGVuZ3RoLXUtMTtuPSsobi5zbGljZSgwLHUpK24uc2xpY2UodSsxKSkrXCJcIn1pPTA7d2hpbGUobi5jaGFyQ29kZUF0KG4ubGVuZ3RoK2ktMSk9PT00OCl7LS1pfWlmKGkhPT0wKXtyLT1pO249bi5zbGljZSgwLGkpfWlmKHIhPT0wKXtuKz1cImVcIityfWlmKChuLmxlbmd0aDx0Lmxlbmd0aHx8aCYmZT4xZTEyJiZNYXRoLmZsb29yKGUpPT09ZSYmKG49XCIweFwiK2UudG9TdHJpbmcoMTYpKS5sZW5ndGg8dC5sZW5ndGgpJiYrbj09PWUpe3Q9bn1yZXR1cm4gdH1mdW5jdGlvbiB1ZShlLHQpe2lmKChlJn4xKT09PTgyMzIpe3JldHVybih0P1widVwiOlwiXFxcXHVcIikrKGU9PT04MjMyP1wiMjAyOFwiOlwiMjAyOVwiKX1lbHNlIGlmKGU9PT0xMHx8ZT09PTEzKXtyZXR1cm4odD9cIlwiOlwiXFxcXFwiKSsoZT09PTEwP1wiblwiOlwiclwiKX1yZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlKX1mdW5jdGlvbiBuZShlKXt2YXIgdCx1LG4scixpLG8scyxhO3U9ZS50b1N0cmluZygpO2lmKGUuc291cmNlKXt0PXUubWF0Y2goL1xcLyhbXlxcL10qKSQvKTtpZighdCl7cmV0dXJuIHV9bj10WzFdO3U9XCJcIjtzPWZhbHNlO2E9ZmFsc2U7Zm9yKHI9MCxpPWUuc291cmNlLmxlbmd0aDtyPGk7KytyKXtvPWUuc291cmNlLmNoYXJDb2RlQXQocik7aWYoIWEpe2lmKHMpe2lmKG89PT05Myl7cz1mYWxzZX19ZWxzZXtpZihvPT09NDcpe3UrPVwiXFxcXFwifWVsc2UgaWYobz09PTkxKXtzPXRydWV9fXUrPXVlKG8sYSk7YT1vPT09OTJ9ZWxzZXt1Kz11ZShvLGEpO2E9ZmFsc2V9fXJldHVyblwiL1wiK3UrXCIvXCIrbn1yZXR1cm4gdX1mdW5jdGlvbiByZShlLHQpe3ZhciB1O2lmKGU9PT04KXtyZXR1cm5cIlxcXFxiXCJ9aWYoZT09PTEyKXtyZXR1cm5cIlxcXFxmXCJ9aWYoZT09PTkpe3JldHVyblwiXFxcXHRcIn11PWUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7aWYocHx8ZT4yNTUpe3JldHVyblwiXFxcXHVcIitcIjAwMDBcIi5zbGljZSh1Lmxlbmd0aCkrdX1lbHNlIGlmKGU9PT0wJiYhYS5jb2RlLmlzRGVjaW1hbERpZ2l0KHQpKXtyZXR1cm5cIlxcXFwwXCJ9ZWxzZSBpZihlPT09MTEpe3JldHVyblwiXFxcXHgwQlwifWVsc2V7cmV0dXJuXCJcXFxceFwiK1wiMDBcIi5zbGljZSh1Lmxlbmd0aCkrdX19ZnVuY3Rpb24gaWUoZSl7aWYoZT09PTkyKXtyZXR1cm5cIlxcXFxcXFxcXCJ9aWYoZT09PTEwKXtyZXR1cm5cIlxcXFxuXCJ9aWYoZT09PTEzKXtyZXR1cm5cIlxcXFxyXCJ9aWYoZT09PTgyMzIpe3JldHVyblwiXFxcXHUyMDI4XCJ9aWYoZT09PTgyMzMpe3JldHVyblwiXFxcXHUyMDI5XCJ9dGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0bHkgY2xhc3NpZmllZCBjaGFyYWN0ZXJcIil9ZnVuY3Rpb24gb2UoZSl7dmFyIHQsdSxuLHI7cj1tPT09XCJkb3VibGVcIj8nXCInOlwiJ1wiO2Zvcih0PTAsdT1lLmxlbmd0aDt0PHU7Kyt0KXtuPWUuY2hhckNvZGVBdCh0KTtpZihuPT09Mzkpe3I9J1wiJzticmVha31lbHNlIGlmKG49PT0zNCl7cj1cIidcIjticmVha31lbHNlIGlmKG49PT05Mil7Kyt0fX1yZXR1cm4gcitlK3J9ZnVuY3Rpb24gc2UoZSl7dmFyIHQ9XCJcIix1LG4scixpPTAsbz0wLHMsbDtmb3IodT0wLG49ZS5sZW5ndGg7dTxuOysrdSl7cj1lLmNoYXJDb2RlQXQodSk7aWYocj09PTM5KXsrK2l9ZWxzZSBpZihyPT09MzQpeysrb31lbHNlIGlmKHI9PT00NyYmcCl7dCs9XCJcXFxcXCJ9ZWxzZSBpZihhLmNvZGUuaXNMaW5lVGVybWluYXRvcihyKXx8cj09PTkyKXt0Kz1pZShyKTtjb250aW51ZX1lbHNlIGlmKCFhLmNvZGUuaXNJZGVudGlmaWVyUGFydEVTNShyKSYmKHAmJnI8MzJ8fCFwJiYhZCYmKHI8MzJ8fHI+MTI2KSkpe3QrPXJlKHIsZS5jaGFyQ29kZUF0KHUrMSkpO2NvbnRpbnVlfXQrPVN0cmluZy5mcm9tQ2hhckNvZGUocil9cz0hKG09PT1cImRvdWJsZVwifHxtPT09XCJhdXRvXCImJm88aSk7bD1zP1wiJ1wiOidcIic7aWYoIShzP2k6bykpe3JldHVybiBsK3QrbH1lPXQ7dD1sO2Zvcih1PTAsbj1lLmxlbmd0aDt1PG47Kyt1KXtyPWUuY2hhckNvZGVBdCh1KTtpZihyPT09MzkmJnN8fHI9PT0zNCYmIXMpe3QrPVwiXFxcXFwifXQrPVN0cmluZy5mcm9tQ2hhckNvZGUocil9cmV0dXJuIHQrbH1mdW5jdGlvbiBhZShlKXt2YXIgdCx1LG4scj1cIlwiO2Zvcih0PTAsdT1lLmxlbmd0aDt0PHU7Kyt0KXtuPWVbdF07cis9bChuKT9hZShuKTpufXJldHVybiByfWZ1bmN0aW9uIGxlKGUsdCl7aWYoIWIpe2lmKGwoZSkpe3JldHVybiBhZShlKX1lbHNle3JldHVybiBlfX1pZih0PT1udWxsKXtpZihlIGluc3RhbmNlb2Ygbyl7cmV0dXJuIGV9ZWxzZXt0PXt9fX1pZih0LmxvYz09bnVsbCl7cmV0dXJuIG5ldyBvKG51bGwsbnVsbCxiLGUsdC5uYW1lfHxudWxsKX1yZXR1cm4gbmV3IG8odC5sb2Muc3RhcnQubGluZSx0LmxvYy5zdGFydC5jb2x1bW4sYj09PXRydWU/dC5sb2Muc291cmNlfHxudWxsOmIsZSx0Lm5hbWV8fG51bGwpfWZ1bmN0aW9uIGZlKCl7cmV0dXJuIEM/QzpcIiBcIn1mdW5jdGlvbiBjZShlLHQpe3ZhciB1LG4scixpO3U9bGUoZSkudG9TdHJpbmcoKTtpZih1Lmxlbmd0aD09PTApe3JldHVyblt0XX1uPWxlKHQpLnRvU3RyaW5nKCk7aWYobi5sZW5ndGg9PT0wKXtyZXR1cm5bZV19cj11LmNoYXJDb2RlQXQodS5sZW5ndGgtMSk7aT1uLmNoYXJDb2RlQXQoMCk7aWYoKHI9PT00M3x8cj09PTQ1KSYmcj09PWl8fGEuY29kZS5pc0lkZW50aWZpZXJQYXJ0RVM1KHIpJiZhLmNvZGUuaXNJZGVudGlmaWVyUGFydEVTNShpKXx8cj09PTQ3JiZpPT09MTA1KXtyZXR1cm5bZSxmZSgpLHRdfWVsc2UgaWYoYS5jb2RlLmlzV2hpdGVTcGFjZShyKXx8YS5jb2RlLmlzTGluZVRlcm1pbmF0b3Iocil8fGEuY29kZS5pc1doaXRlU3BhY2UoaSl8fGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKGkpKXtyZXR1cm5bZSx0XX1yZXR1cm5bZSxDLHRdfWZ1bmN0aW9uIHBlKGUpe3JldHVybltmLGVdfWZ1bmN0aW9uIERlKGUpe3ZhciB0O3Q9ZjtmKz1jO2UoZik7Zj10fWZ1bmN0aW9uIGhlKGUpe3ZhciB0O2Zvcih0PWUubGVuZ3RoLTE7dD49MDstLXQpe2lmKGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKGUuY2hhckNvZGVBdCh0KSkpe2JyZWFrfX1yZXR1cm4gZS5sZW5ndGgtMS10fWZ1bmN0aW9uIG1lKGUsdCl7dmFyIHUsbixyLGksbyxzLGwsYzt1PWUuc3BsaXQoL1xcclxcbnxbXFxyXFxuXS8pO3M9TnVtYmVyLk1BWF9WQUxVRTtmb3Iobj0xLHI9dS5sZW5ndGg7bjxyOysrbil7aT11W25dO289MDt3aGlsZShvPGkubGVuZ3RoJiZhLmNvZGUuaXNXaGl0ZVNwYWNlKGkuY2hhckNvZGVBdChvKSkpeysrb31pZihzPm8pe3M9b319aWYodHlwZW9mIHQhPT1cInVuZGVmaW5lZFwiKXtsPWY7aWYodVsxXVtzXT09PVwiKlwiKXt0Kz1cIiBcIn1mPXR9ZWxzZXtpZihzJjEpey0tc31sPWZ9Zm9yKG49MSxyPXUubGVuZ3RoO248cjsrK24pe2M9bGUocGUodVtuXS5zbGljZShzKSkpO3Vbbl09Yj9jLmpvaW4oXCJcIik6Y31mPWw7cmV0dXJuIHUuam9pbihcIlxcblwiKX1mdW5jdGlvbiBkZShlLHQpe2lmKGUudHlwZT09PVwiTGluZVwiKXtpZihaKGUudmFsdWUpKXtyZXR1cm5cIi8vXCIrZS52YWx1ZX1lbHNle3ZhciB1PVwiLy9cIitlLnZhbHVlO2lmKCF4KXt1Kz1cIlxcblwifXJldHVybiB1fX1pZihCLmZvcm1hdC5pbmRlbnQuYWRqdXN0TXVsdGlsaW5lQ29tbWVudCYmL1tcXG5cXHJdLy50ZXN0KGUudmFsdWUpKXtyZXR1cm4gbWUoXCIvKlwiK2UudmFsdWUrXCIqL1wiLHQpfXJldHVyblwiLypcIitlLnZhbHVlK1wiKi9cIn1mdW5jdGlvbiBBZShlLHQpe3ZhciB1LHIsaSxvLHMsYSxsLHAsRCxoLG0sZCxBLEM7aWYoZS5sZWFkaW5nQ29tbWVudHMmJmUubGVhZGluZ0NvbW1lbnRzLmxlbmd0aD4wKXtvPXQ7aWYoeCl7aT1lLmxlYWRpbmdDb21tZW50c1swXTt0PVtdO3A9aS5leHRlbmRlZFJhbmdlO0Q9aS5yYW5nZTttPVMuc3Vic3RyaW5nKHBbMF0sRFswXSk7Qz0obS5tYXRjaCgvXFxuL2cpfHxbXSkubGVuZ3RoO2lmKEM+MCl7dC5wdXNoKEooXCJcXG5cIixDKSk7dC5wdXNoKHBlKGRlKGkpKSl9ZWxzZXt0LnB1c2gobSk7dC5wdXNoKGRlKGkpKX1oPUQ7Zm9yKHU9MSxyPWUubGVhZGluZ0NvbW1lbnRzLmxlbmd0aDt1PHI7dSsrKXtpPWUubGVhZGluZ0NvbW1lbnRzW3VdO0Q9aS5yYW5nZTtkPVMuc3Vic3RyaW5nKGhbMV0sRFswXSk7Qz0oZC5tYXRjaCgvXFxuL2cpfHxbXSkubGVuZ3RoO3QucHVzaChKKFwiXFxuXCIsQykpO3QucHVzaChwZShkZShpKSkpO2g9RH1BPVMuc3Vic3RyaW5nKERbMV0scFsxXSk7Qz0oQS5tYXRjaCgvXFxuL2cpfHxbXSkubGVuZ3RoO3QucHVzaChKKFwiXFxuXCIsQykpfWVsc2V7aT1lLmxlYWRpbmdDb21tZW50c1swXTt0PVtdO2lmKGcmJmUudHlwZT09PW4uUHJvZ3JhbSYmZS5ib2R5Lmxlbmd0aD09PTApe3QucHVzaChcIlxcblwiKX10LnB1c2goZGUoaSkpO2lmKCFaKGxlKHQpLnRvU3RyaW5nKCkpKXt0LnB1c2goXCJcXG5cIil9Zm9yKHU9MSxyPWUubGVhZGluZ0NvbW1lbnRzLmxlbmd0aDt1PHI7Kyt1KXtpPWUubGVhZGluZ0NvbW1lbnRzW3VdO2w9W2RlKGkpXTtcbmlmKCFaKGxlKGwpLnRvU3RyaW5nKCkpKXtsLnB1c2goXCJcXG5cIil9dC5wdXNoKHBlKGwpKX19dC5wdXNoKHBlKG8pKX1pZihlLnRyYWlsaW5nQ29tbWVudHMpe2lmKHgpe2k9ZS50cmFpbGluZ0NvbW1lbnRzWzBdO3A9aS5leHRlbmRlZFJhbmdlO0Q9aS5yYW5nZTttPVMuc3Vic3RyaW5nKHBbMF0sRFswXSk7Qz0obS5tYXRjaCgvXFxuL2cpfHxbXSkubGVuZ3RoO2lmKEM+MCl7dC5wdXNoKEooXCJcXG5cIixDKSk7dC5wdXNoKHBlKGRlKGkpKSl9ZWxzZXt0LnB1c2gobSk7dC5wdXNoKGRlKGkpKX19ZWxzZXtzPSFaKGxlKHQpLnRvU3RyaW5nKCkpO2E9SihcIiBcIixoZShsZShbZix0LGNdKS50b1N0cmluZygpKSk7Zm9yKHU9MCxyPWUudHJhaWxpbmdDb21tZW50cy5sZW5ndGg7dTxyOysrdSl7aT1lLnRyYWlsaW5nQ29tbWVudHNbdV07aWYocyl7aWYodT09PTApe3Q9W3QsY119ZWxzZXt0PVt0LGFdfXQucHVzaChkZShpLGEpKX1lbHNle3Q9W3QscGUoZGUoaSkpXX1pZih1IT09ci0xJiYhWihsZSh0KS50b1N0cmluZygpKSl7dD1bdCxcIlxcblwiXX19fX1yZXR1cm4gdH1mdW5jdGlvbiBDZShlLHQsdSl7dmFyIG4scj0wO2ZvcihuPWU7bjx0O24rKyl7aWYoU1tuXT09PVwiXFxuXCIpe3IrK319Zm9yKG49MTtuPHI7bisrKXt1LnB1c2goQSl9fWZ1bmN0aW9uIEVlKGUsdCx1KXtpZih0PHUpe3JldHVybltcIihcIixlLFwiKVwiXX1yZXR1cm4gZX1mdW5jdGlvbiBGZShlKXt2YXIgdCx1LG47bj1lLnNwbGl0KC9cXHJcXG58XFxuLyk7Zm9yKHQ9MSx1PW4ubGVuZ3RoO3Q8dTt0Kyspe25bdF09QStmK25bdF19cmV0dXJuIG59ZnVuY3Rpb24gZ2UoZSx0KXt2YXIgdSxuLGk7dT1lW0IudmVyYmF0aW1dO2lmKHR5cGVvZiB1PT09XCJzdHJpbmdcIil7bj1FZShGZSh1KSxyLlNlcXVlbmNlLHQpfWVsc2V7bj1GZSh1LmNvbnRlbnQpO2k9dS5wcmVjZWRlbmNlIT1udWxsP3UucHJlY2VkZW5jZTpyLlNlcXVlbmNlO249RWUobixpLHQpfXJldHVybiBsZShuLGUpfWZ1bmN0aW9uIHllKCl7fXllLnByb3RvdHlwZS5tYXliZUJsb2NrPWZ1bmN0aW9uKGUsdCl7dmFyIHUscixpPXRoaXM7cj0hQi5jb21tZW50fHwhZS5sZWFkaW5nQ29tbWVudHM7aWYoZS50eXBlPT09bi5CbG9ja1N0YXRlbWVudCYmcil7cmV0dXJuW0MsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLHQpXX1pZihlLnR5cGU9PT1uLkVtcHR5U3RhdGVtZW50JiZyKXtyZXR1cm5cIjtcIn1EZShmdW5jdGlvbigpe3U9W0EscGUoaS5nZW5lcmF0ZVN0YXRlbWVudChlLHQpKV19KTtyZXR1cm4gdX07eWUucHJvdG90eXBlLm1heWJlQmxvY2tTdWZmaXg9ZnVuY3Rpb24oZSx0KXt2YXIgdT1aKGxlKHQpLnRvU3RyaW5nKCkpO2lmKGUudHlwZT09PW4uQmxvY2tTdGF0ZW1lbnQmJighQi5jb21tZW50fHwhZS5sZWFkaW5nQ29tbWVudHMpJiYhdSl7cmV0dXJuW3QsQ119aWYodSl7cmV0dXJuW3QsZl19cmV0dXJuW3QsQSxmXX07ZnVuY3Rpb24gQmUoZSl7cmV0dXJuIGxlKGUubmFtZSxlKX1mdW5jdGlvbiB2ZShlLHQpe3JldHVybiBlLmFzeW5jP1wiYXN5bmNcIisodD9mZSgpOkMpOlwiXCJ9ZnVuY3Rpb24gYmUoZSl7dmFyIHQ9ZS5nZW5lcmF0b3ImJiFCLm1vei5zdGFybGVzc0dlbmVyYXRvcjtyZXR1cm4gdD9cIipcIitDOlwiXCJ9ZnVuY3Rpb24gU2UoZSl7dmFyIHQ9ZS52YWx1ZTtpZih0LmFzeW5jKXtyZXR1cm4gdmUodCwhZS5jb21wdXRlZCl9ZWxzZXtyZXR1cm4gYmUodCk/XCIqXCI6XCJcIn19eWUucHJvdG90eXBlLmdlbmVyYXRlUGF0dGVybj1mdW5jdGlvbihlLHQsdSl7aWYoZS50eXBlPT09bi5JZGVudGlmaWVyKXtyZXR1cm4gQmUoZSl9cmV0dXJuIHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUsdCx1KX07eWUucHJvdG90eXBlLmdlbmVyYXRlRnVuY3Rpb25QYXJhbXM9ZnVuY3Rpb24oZSl7dmFyIHQsdSxpLG87bz1mYWxzZTtpZihlLnR5cGU9PT1uLkFycm93RnVuY3Rpb25FeHByZXNzaW9uJiYhZS5yZXN0JiYoIWUuZGVmYXVsdHN8fGUuZGVmYXVsdHMubGVuZ3RoPT09MCkmJmUucGFyYW1zLmxlbmd0aD09PTEmJmUucGFyYW1zWzBdLnR5cGU9PT1uLklkZW50aWZpZXIpe2k9W3ZlKGUsdHJ1ZSksQmUoZS5wYXJhbXNbMF0pXX1lbHNle2k9ZS50eXBlPT09bi5BcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbj9bdmUoZSxmYWxzZSldOltdO2kucHVzaChcIihcIik7aWYoZS5kZWZhdWx0cyl7bz10cnVlfWZvcih0PTAsdT1lLnBhcmFtcy5sZW5ndGg7dDx1OysrdCl7aWYobyYmZS5kZWZhdWx0c1t0XSl7aS5wdXNoKHRoaXMuZ2VuZXJhdGVBc3NpZ25tZW50KGUucGFyYW1zW3RdLGUuZGVmYXVsdHNbdF0sXCI9XCIsci5Bc3NpZ25tZW50LHEpKX1lbHNle2kucHVzaCh0aGlzLmdlbmVyYXRlUGF0dGVybihlLnBhcmFtc1t0XSxyLkFzc2lnbm1lbnQscSkpfWlmKHQrMTx1KXtpLnB1c2goXCIsXCIrQyl9fWlmKGUucmVzdCl7aWYoZS5wYXJhbXMubGVuZ3RoKXtpLnB1c2goXCIsXCIrQyl9aS5wdXNoKFwiLi4uXCIpO2kucHVzaChCZShlLnJlc3QpKX1pLnB1c2goXCIpXCIpfXJldHVybiBpfTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVGdW5jdGlvbkJvZHk9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PXRoaXMuZ2VuZXJhdGVGdW5jdGlvblBhcmFtcyhlKTtpZihlLnR5cGU9PT1uLkFycm93RnVuY3Rpb25FeHByZXNzaW9uKXt0LnB1c2goQyk7dC5wdXNoKFwiPT5cIil9aWYoZS5leHByZXNzaW9uKXt0LnB1c2goQyk7dT10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmJvZHksci5Bc3NpZ25tZW50LHEpO2lmKHUudG9TdHJpbmcoKS5jaGFyQXQoMCk9PT1cIntcIil7dT1bXCIoXCIsdSxcIilcIl19dC5wdXNoKHUpfWVsc2V7dC5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmJvZHksJCkpfXJldHVybiB0fTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVJdGVyYXRpb25Gb3JTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSx0LHUpe3ZhciBpPVtcImZvclwiK0MrXCIoXCJdLG89dGhpcztEZShmdW5jdGlvbigpe2lmKHQubGVmdC50eXBlPT09bi5WYXJpYWJsZURlY2xhcmF0aW9uKXtEZShmdW5jdGlvbigpe2kucHVzaCh0LmxlZnQua2luZCtmZSgpKTtpLnB1c2goby5nZW5lcmF0ZVN0YXRlbWVudCh0LmxlZnQuZGVjbGFyYXRpb25zWzBdLEcpKX0pfWVsc2V7aS5wdXNoKG8uZ2VuZXJhdGVFeHByZXNzaW9uKHQubGVmdCxyLkNhbGwscSkpfWk9Y2UoaSxlKTtpPVtjZShpLG8uZ2VuZXJhdGVFeHByZXNzaW9uKHQucmlnaHQsci5TZXF1ZW5jZSxxKSksXCIpXCJdfSk7aS5wdXNoKHRoaXMubWF5YmVCbG9jayh0LmJvZHksdSkpO3JldHVybiBpfTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVQcm9wZXJ0eUtleT1mdW5jdGlvbihlLHQpe3ZhciB1PVtdO2lmKHQpe3UucHVzaChcIltcIil9dS5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUsci5TZXF1ZW5jZSxxKSk7aWYodCl7dS5wdXNoKFwiXVwiKX1yZXR1cm4gdX07eWUucHJvdG90eXBlLmdlbmVyYXRlQXNzaWdubWVudD1mdW5jdGlvbihlLHQsdSxuLGkpe2lmKHIuQXNzaWdubWVudDxuKXtpfD1QfXJldHVybiBFZShbdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZSxyLkNhbGwsaSksQyt1K0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24odCxyLkFzc2lnbm1lbnQsaSldLHIuQXNzaWdubWVudCxuKX07eWUucHJvdG90eXBlLnNlbWljb2xvbj1mdW5jdGlvbihlKXtpZighRiYmZSZSKXtyZXR1cm5cIlwifXJldHVyblwiO1wifTt5ZS5TdGF0ZW1lbnQ9e0Jsb2NrU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyPVtcIntcIixBXSxpPXRoaXM7RGUoZnVuY3Rpb24oKXtpZihlLmJvZHkubGVuZ3RoPT09MCYmeCl7dT1lLnJhbmdlO2lmKHVbMV0tdVswXT4yKXtuPVMuc3Vic3RyaW5nKHVbMF0rMSx1WzFdLTEpO2lmKG5bMF09PT1cIlxcblwiKXtyPVtcIntcIl19ci5wdXNoKG4pfX12YXIgbyxzLGEsbDtsPVY7aWYodCZqKXtsfD1NfWZvcihvPTAscz1lLmJvZHkubGVuZ3RoO288czsrK28pe2lmKHgpe2lmKG89PT0wKXtpZihlLmJvZHlbMF0ubGVhZGluZ0NvbW1lbnRzKXt1PWUuYm9keVswXS5sZWFkaW5nQ29tbWVudHNbMF0uZXh0ZW5kZWRSYW5nZTtuPVMuc3Vic3RyaW5nKHVbMF0sdVsxXSk7aWYoblswXT09PVwiXFxuXCIpe3I9W1wie1wiXX19aWYoIWUuYm9keVswXS5sZWFkaW5nQ29tbWVudHMpe0NlKGUucmFuZ2VbMF0sZS5ib2R5WzBdLnJhbmdlWzBdLHIpfX1pZihvPjApe2lmKCFlLmJvZHlbby0xXS50cmFpbGluZ0NvbW1lbnRzJiYhZS5ib2R5W29dLmxlYWRpbmdDb21tZW50cyl7Q2UoZS5ib2R5W28tMV0ucmFuZ2VbMV0sZS5ib2R5W29dLnJhbmdlWzBdLHIpfX19aWYobz09PXMtMSl7bHw9Un1pZihlLmJvZHlbb10ubGVhZGluZ0NvbW1lbnRzJiZ4KXthPWkuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5ib2R5W29dLGwpfWVsc2V7YT1wZShpLmdlbmVyYXRlU3RhdGVtZW50KGUuYm9keVtvXSxsKSl9ci5wdXNoKGEpO2lmKCFaKGxlKGEpLnRvU3RyaW5nKCkpKXtpZih4JiZvPHMtMSl7aWYoIWUuYm9keVtvKzFdLmxlYWRpbmdDb21tZW50cyl7ci5wdXNoKEEpfX1lbHNle3IucHVzaChBKX19aWYoeCl7aWYobz09PXMtMSl7aWYoIWUuYm9keVtvXS50cmFpbGluZ0NvbW1lbnRzKXtDZShlLmJvZHlbb10ucmFuZ2VbMV0sZS5yYW5nZVsxXSxyKX19fX19KTtyLnB1c2gocGUoXCJ9XCIpKTtyZXR1cm4gcn0sQnJlYWtTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtpZihlLmxhYmVsKXtyZXR1cm5cImJyZWFrIFwiK2UubGFiZWwubmFtZSt0aGlzLnNlbWljb2xvbih0KX1yZXR1cm5cImJyZWFrXCIrdGhpcy5zZW1pY29sb24odCl9LENvbnRpbnVlU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7aWYoZS5sYWJlbCl7cmV0dXJuXCJjb250aW51ZSBcIitlLmxhYmVsLm5hbWUrdGhpcy5zZW1pY29sb24odCl9cmV0dXJuXCJjb250aW51ZVwiK3RoaXMuc2VtaWNvbG9uKHQpfSxDbGFzc0JvZHk6ZnVuY3Rpb24oZSx0KXt2YXIgdT1bXCJ7XCIsQV0sbj10aGlzO0RlKGZ1bmN0aW9uKHQpe3ZhciBpLG87Zm9yKGk9MCxvPWUuYm9keS5sZW5ndGg7aTxvOysraSl7dS5wdXNoKHQpO3UucHVzaChuLmdlbmVyYXRlRXhwcmVzc2lvbihlLmJvZHlbaV0sci5TZXF1ZW5jZSxxKSk7aWYoaSsxPG8pe3UucHVzaChBKX19fSk7aWYoIVoobGUodSkudG9TdHJpbmcoKSkpe3UucHVzaChBKX11LnB1c2goZik7dS5wdXNoKFwifVwiKTtyZXR1cm4gdX0sQ2xhc3NEZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3ZhciB1LG47dT1bXCJjbGFzcyBcIitlLmlkLm5hbWVdO2lmKGUuc3VwZXJDbGFzcyl7bj1jZShcImV4dGVuZHNcIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnN1cGVyQ2xhc3Msci5Bc3NpZ25tZW50LHEpKTt1PWNlKHUsbil9dS5wdXNoKEMpO3UucHVzaCh0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuYm9keSxZKSk7cmV0dXJuIHV9LERpcmVjdGl2ZVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe2lmKEIucmF3JiZlLnJhdyl7cmV0dXJuIGUucmF3K3RoaXMuc2VtaWNvbG9uKHQpfXJldHVybiBvZShlLmRpcmVjdGl2ZSkrdGhpcy5zZW1pY29sb24odCl9LERvV2hpbGVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdT1jZShcImRvXCIsdGhpcy5tYXliZUJsb2NrKGUuYm9keSxWKSk7dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoZS5ib2R5LHUpO3JldHVybiBjZSh1LFtcIndoaWxlXCIrQytcIihcIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRlc3Qsci5TZXF1ZW5jZSxxKSxcIilcIit0aGlzLnNlbWljb2xvbih0KV0pfSxDYXRjaENsYXVzZTpmdW5jdGlvbihlLHQpe3ZhciB1LG49dGhpcztEZShmdW5jdGlvbigpe3ZhciB0O3U9W1wiY2F0Y2hcIitDK1wiKFwiLG4uZ2VuZXJhdGVFeHByZXNzaW9uKGUucGFyYW0sci5TZXF1ZW5jZSxxKSxcIilcIl07aWYoZS5ndWFyZCl7dD1uLmdlbmVyYXRlRXhwcmVzc2lvbihlLmd1YXJkLHIuU2VxdWVuY2UscSk7dS5zcGxpY2UoMiwwLFwiIGlmIFwiLHQpfX0pO3UucHVzaCh0aGlzLm1heWJlQmxvY2soZS5ib2R5LFYpKTtyZXR1cm4gdX0sRGVidWdnZXJTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImRlYnVnZ2VyXCIrdGhpcy5zZW1pY29sb24odCl9LEVtcHR5U3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCI7XCJ9LEV4cG9ydERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHU9W1wiZXhwb3J0XCJdLGksbz10aGlzO2k9dCZSP1k6VjtpZihlW1wiZGVmYXVsdFwiXSl7dT1jZSh1LFwiZGVmYXVsdFwiKTtpZihJKGUuZGVjbGFyYXRpb24pKXt1PWNlKHUsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmRlY2xhcmF0aW9uLGkpKX1lbHNle3U9Y2UodSx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmRlY2xhcmF0aW9uLHIuQXNzaWdubWVudCxxKSt0aGlzLnNlbWljb2xvbih0KSl9cmV0dXJuIHV9aWYoZS5kZWNsYXJhdGlvbil7cmV0dXJuIGNlKHUsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmRlY2xhcmF0aW9uLGkpKX1pZihlLnNwZWNpZmllcnMpe2lmKGUuc3BlY2lmaWVycy5sZW5ndGg9PT0wKXt1PWNlKHUsXCJ7XCIrQytcIn1cIil9ZWxzZSBpZihlLnNwZWNpZmllcnNbMF0udHlwZT09PW4uRXhwb3J0QmF0Y2hTcGVjaWZpZXIpe3U9Y2UodSx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNwZWNpZmllcnNbMF0sci5TZXF1ZW5jZSxxKSl9ZWxzZXt1PWNlKHUsXCJ7XCIpO0RlKGZ1bmN0aW9uKHQpe3ZhciBuLGk7dS5wdXNoKEEpO2ZvcihuPTAsaT1lLnNwZWNpZmllcnMubGVuZ3RoO248aTsrK24pe3UucHVzaCh0KTt1LnB1c2goby5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zcGVjaWZpZXJzW25dLHIuU2VxdWVuY2UscSkpO2lmKG4rMTxpKXt1LnB1c2goXCIsXCIrQSl9fX0pO2lmKCFaKGxlKHUpLnRvU3RyaW5nKCkpKXt1LnB1c2goQSl9dS5wdXNoKGYrXCJ9XCIpfWlmKGUuc291cmNlKXt1PWNlKHUsW1wiZnJvbVwiK0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zb3VyY2Usci5TZXF1ZW5jZSxxKSx0aGlzLnNlbWljb2xvbih0KV0pfWVsc2V7dS5wdXNoKHRoaXMuc2VtaWNvbG9uKHQpKX19cmV0dXJuIHV9LEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe2UuZGVmYXVsdD10cnVlO3JldHVybiB0aGlzLkV4cG9ydERlY2xhcmF0aW9uKGUsdCl9LEV4cG9ydE5hbWVkRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5FeHBvcnREZWNsYXJhdGlvbihlLHQpfSxFeHByZXNzaW9uU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsaTtmdW5jdGlvbiBvKGUpe3ZhciB0O2lmKGUuc2xpY2UoMCw1KSE9PVwiY2xhc3NcIil7cmV0dXJuIGZhbHNlfXQ9ZS5jaGFyQ29kZUF0KDUpO3JldHVybiB0PT09MTIzfHxhLmNvZGUuaXNXaGl0ZVNwYWNlKHQpfHxhLmNvZGUuaXNMaW5lVGVybWluYXRvcih0KX1mdW5jdGlvbiBzKGUpe3ZhciB0O2lmKGUuc2xpY2UoMCw4KSE9PVwiZnVuY3Rpb25cIil7cmV0dXJuIGZhbHNlfXQ9ZS5jaGFyQ29kZUF0KDgpO3JldHVybiB0PT09NDB8fGEuY29kZS5pc1doaXRlU3BhY2UodCl8fHQ9PT00Mnx8YS5jb2RlLmlzTGluZVRlcm1pbmF0b3IodCl9ZnVuY3Rpb24gbChlKXt2YXIgdCx1LG47aWYoZS5zbGljZSgwLDUpIT09XCJhc3luY1wiKXtyZXR1cm4gZmFsc2V9aWYoIWEuY29kZS5pc1doaXRlU3BhY2UoZS5jaGFyQ29kZUF0KDUpKSl7cmV0dXJuIGZhbHNlfWZvcih1PTYsbj1lLmxlbmd0aDt1PG47Kyt1KXtpZighYS5jb2RlLmlzV2hpdGVTcGFjZShlLmNoYXJDb2RlQXQodSkpKXticmVha319aWYodT09PW4pe3JldHVybiBmYWxzZX1pZihlLnNsaWNlKHUsdSs4KSE9PVwiZnVuY3Rpb25cIil7cmV0dXJuIGZhbHNlfXQ9ZS5jaGFyQ29kZUF0KHUrOCk7cmV0dXJuIHQ9PT00MHx8YS5jb2RlLmlzV2hpdGVTcGFjZSh0KXx8dD09PTQyfHxhLmNvZGUuaXNMaW5lVGVybWluYXRvcih0KX11PVt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmV4cHJlc3Npb24sci5TZXF1ZW5jZSxxKV07aT1sZSh1KS50b1N0cmluZygpO2lmKGkuY2hhckNvZGVBdCgwKT09PTEyM3x8byhpKXx8cyhpKXx8bChpKXx8eSYmdCZNJiZlLmV4cHJlc3Npb24udHlwZT09PW4uTGl0ZXJhbCYmdHlwZW9mIGUuZXhwcmVzc2lvbi52YWx1ZT09PVwic3RyaW5nXCIpe3U9W1wiKFwiLHUsXCIpXCIrdGhpcy5zZW1pY29sb24odCldfWVsc2V7dS5wdXNoKHRoaXMuc2VtaWNvbG9uKHQpKX1yZXR1cm4gdX0sSW1wb3J0RGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgdSxpLG89dGhpcztpZihlLnNwZWNpZmllcnMubGVuZ3RoPT09MCl7cmV0dXJuW1wiaW1wb3J0XCIsQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNvdXJjZSxyLlNlcXVlbmNlLHEpLHRoaXMuc2VtaWNvbG9uKHQpXX11PVtcImltcG9ydFwiXTtpPTA7aWYoZS5zcGVjaWZpZXJzW2ldLnR5cGU9PT1uLkltcG9ydERlZmF1bHRTcGVjaWZpZXIpe3U9Y2UodSxbdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zcGVjaWZpZXJzW2ldLHIuU2VxdWVuY2UscSldKTsrK2l9aWYoZS5zcGVjaWZpZXJzW2ldKXtpZihpIT09MCl7dS5wdXNoKFwiLFwiKX1pZihlLnNwZWNpZmllcnNbaV0udHlwZT09PW4uSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyKXt1PWNlKHUsW0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zcGVjaWZpZXJzW2ldLHIuU2VxdWVuY2UscSldKX1lbHNle3UucHVzaChDK1wie1wiKTtpZihlLnNwZWNpZmllcnMubGVuZ3RoLWk9PT0xKXt1LnB1c2goQyk7dS5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3BlY2lmaWVyc1tpXSxyLlNlcXVlbmNlLHEpKTt1LnB1c2goQytcIn1cIitDKX1lbHNle0RlKGZ1bmN0aW9uKHQpe3ZhciBuLHM7dS5wdXNoKEEpO2ZvcihuPWkscz1lLnNwZWNpZmllcnMubGVuZ3RoO248czsrK24pe3UucHVzaCh0KTt1LnB1c2goby5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zcGVjaWZpZXJzW25dLHIuU2VxdWVuY2UscSkpO2lmKG4rMTxzKXt1LnB1c2goXCIsXCIrQSl9fX0pO2lmKCFaKGxlKHUpLnRvU3RyaW5nKCkpKXt1LnB1c2goQSl9dS5wdXNoKGYrXCJ9XCIrQyl9fX11PWNlKHUsW1wiZnJvbVwiK0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zb3VyY2Usci5TZXF1ZW5jZSxxKSx0aGlzLnNlbWljb2xvbih0KV0pO3JldHVybiB1fSxWYXJpYWJsZURlY2xhcmF0b3I6ZnVuY3Rpb24oZSx0KXt2YXIgdT10JlA/cTpUO2lmKGUuaW5pdCl7cmV0dXJuW3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuaWQsci5Bc3NpZ25tZW50LHUpLEMsXCI9XCIsQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmluaXQsci5Bc3NpZ25tZW50LHUpXX1yZXR1cm4gdGhpcy5nZW5lcmF0ZVBhdHRlcm4oZS5pZCxyLkFzc2lnbm1lbnQsdSl9LFZhcmlhYmxlRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvLHM9dGhpczt1PVtlLmtpbmRdO289dCZQP1Y6RztmdW5jdGlvbiBhKCl7aT1lLmRlY2xhcmF0aW9uc1swXTtpZihCLmNvbW1lbnQmJmkubGVhZGluZ0NvbW1lbnRzKXt1LnB1c2goXCJcXG5cIik7dS5wdXNoKHBlKHMuZ2VuZXJhdGVTdGF0ZW1lbnQoaSxvKSkpfWVsc2V7dS5wdXNoKGZlKCkpO3UucHVzaChzLmdlbmVyYXRlU3RhdGVtZW50KGksbykpfWZvcihuPTEscj1lLmRlY2xhcmF0aW9ucy5sZW5ndGg7bjxyOysrbil7aT1lLmRlY2xhcmF0aW9uc1tuXTtpZihCLmNvbW1lbnQmJmkubGVhZGluZ0NvbW1lbnRzKXt1LnB1c2goXCIsXCIrQSk7dS5wdXNoKHBlKHMuZ2VuZXJhdGVTdGF0ZW1lbnQoaSxvKSkpfWVsc2V7dS5wdXNoKFwiLFwiK0MpO3UucHVzaChzLmdlbmVyYXRlU3RhdGVtZW50KGksbykpfX19aWYoZS5kZWNsYXJhdGlvbnMubGVuZ3RoPjEpe0RlKGEpfWVsc2V7YSgpfXUucHVzaCh0aGlzLnNlbWljb2xvbih0KSk7cmV0dXJuIHV9LFRocm93U3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuW2NlKFwidGhyb3dcIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuU2VxdWVuY2UscSkpLHRoaXMuc2VtaWNvbG9uKHQpXX0sVHJ5U3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGk7dT1bXCJ0cnlcIix0aGlzLm1heWJlQmxvY2soZS5ibG9jayxWKV07dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoZS5ibG9jayx1KTtpZihlLmhhbmRsZXJzKXtmb3Iobj0wLHI9ZS5oYW5kbGVycy5sZW5ndGg7bjxyOysrbil7dT1jZSh1LHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5oYW5kbGVyc1tuXSxWKSk7aWYoZS5maW5hbGl6ZXJ8fG4rMSE9PXIpe3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGUuaGFuZGxlcnNbbl0uYm9keSx1KX19fWVsc2V7aT1lLmd1YXJkZWRIYW5kbGVyc3x8W107Zm9yKG49MCxyPWkubGVuZ3RoO248cjsrK24pe3U9Y2UodSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGlbbl0sVikpO2lmKGUuZmluYWxpemVyfHxuKzEhPT1yKXt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChpW25dLmJvZHksdSl9fWlmKGUuaGFuZGxlcil7aWYobChlLmhhbmRsZXIpKXtmb3Iobj0wLHI9ZS5oYW5kbGVyLmxlbmd0aDtuPHI7KytuKXt1PWNlKHUsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmhhbmRsZXJbbl0sVikpO2lmKGUuZmluYWxpemVyfHxuKzEhPT1yKXt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChlLmhhbmRsZXJbbl0uYm9keSx1KX19fWVsc2V7dT1jZSh1LHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5oYW5kbGVyLFYpKTtpZihlLmZpbmFsaXplcil7dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoZS5oYW5kbGVyLmJvZHksdSl9fX19aWYoZS5maW5hbGl6ZXIpe3U9Y2UodSxbXCJmaW5hbGx5XCIsdGhpcy5tYXliZUJsb2NrKGUuZmluYWxpemVyLFYpXSl9cmV0dXJuIHV9LFN3aXRjaFN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LG4saSxvLHMsYT10aGlzO0RlKGZ1bmN0aW9uKCl7dT1bXCJzd2l0Y2hcIitDK1wiKFwiLGEuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZGlzY3JpbWluYW50LHIuU2VxdWVuY2UscSksXCIpXCIrQytcIntcIitBXX0pO2lmKGUuY2FzZXMpe3M9Vjtmb3IoaT0wLG89ZS5jYXNlcy5sZW5ndGg7aTxvOysraSl7aWYoaT09PW8tMSl7c3w9Un1uPXBlKHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5jYXNlc1tpXSxzKSk7dS5wdXNoKG4pO2lmKCFaKGxlKG4pLnRvU3RyaW5nKCkpKXt1LnB1c2goQSl9fX11LnB1c2gocGUoXCJ9XCIpKTtyZXR1cm4gdX0sU3dpdGNoQ2FzZTpmdW5jdGlvbihlLHQpe3ZhciB1LGksbyxzLGEsbD10aGlzO0RlKGZ1bmN0aW9uKCl7aWYoZS50ZXN0KXt1PVtjZShcImNhc2VcIixsLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRlc3Qsci5TZXF1ZW5jZSxxKSksXCI6XCJdfWVsc2V7dT1bXCJkZWZhdWx0OlwiXX1vPTA7cz1lLmNvbnNlcXVlbnQubGVuZ3RoO2lmKHMmJmUuY29uc2VxdWVudFswXS50eXBlPT09bi5CbG9ja1N0YXRlbWVudCl7aT1sLm1heWJlQmxvY2soZS5jb25zZXF1ZW50WzBdLFYpO3UucHVzaChpKTtvPTF9aWYobyE9PXMmJiFaKGxlKHUpLnRvU3RyaW5nKCkpKXt1LnB1c2goQSl9YT1WO2Zvcig7bzxzOysrbyl7aWYobz09PXMtMSYmdCZSKXthfD1SfWk9cGUobC5nZW5lcmF0ZVN0YXRlbWVudChlLmNvbnNlcXVlbnRbb10sYSkpO3UucHVzaChpKTtpZihvKzEhPT1zJiYhWihsZShpKS50b1N0cmluZygpKSl7dS5wdXNoKEEpfX19KTtyZXR1cm4gdX0sSWZTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxpLG8scz10aGlzO0RlKGZ1bmN0aW9uKCl7dT1bXCJpZlwiK0MrXCIoXCIscy5nZW5lcmF0ZUV4cHJlc3Npb24oZS50ZXN0LHIuU2VxdWVuY2UscSksXCIpXCJdfSk7bz10JlI7aT1WO2lmKG8pe2l8PVJ9aWYoZS5hbHRlcm5hdGUpe3UucHVzaCh0aGlzLm1heWJlQmxvY2soZS5jb25zZXF1ZW50LFYpKTt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChlLmNvbnNlcXVlbnQsdSk7aWYoZS5hbHRlcm5hdGUudHlwZT09PW4uSWZTdGF0ZW1lbnQpe3U9Y2UodSxbXCJlbHNlIFwiLHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5hbHRlcm5hdGUsaSldKX1lbHNle3U9Y2UodSxjZShcImVsc2VcIix0aGlzLm1heWJlQmxvY2soZS5hbHRlcm5hdGUsaSkpKX19ZWxzZXt1LnB1c2godGhpcy5tYXliZUJsb2NrKGUuY29uc2VxdWVudCxpKSl9cmV0dXJuIHV9LEZvclN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LGk9dGhpcztEZShmdW5jdGlvbigpe3U9W1wiZm9yXCIrQytcIihcIl07aWYoZS5pbml0KXtpZihlLmluaXQudHlwZT09PW4uVmFyaWFibGVEZWNsYXJhdGlvbil7dS5wdXNoKGkuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5pbml0LEcpKX1lbHNle3UucHVzaChpLmdlbmVyYXRlRXhwcmVzc2lvbihlLmluaXQsci5TZXF1ZW5jZSxUKSk7dS5wdXNoKFwiO1wiKX19ZWxzZXt1LnB1c2goXCI7XCIpfWlmKGUudGVzdCl7dS5wdXNoKEMpO3UucHVzaChpLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRlc3Qsci5TZXF1ZW5jZSxxKSk7dS5wdXNoKFwiO1wiKX1lbHNle3UucHVzaChcIjtcIil9aWYoZS51cGRhdGUpe3UucHVzaChDKTt1LnB1c2goaS5nZW5lcmF0ZUV4cHJlc3Npb24oZS51cGRhdGUsci5TZXF1ZW5jZSxxKSk7dS5wdXNoKFwiKVwiKX1lbHNle3UucHVzaChcIilcIil9fSk7dS5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmJvZHksdCZSP1k6VikpO3JldHVybiB1fSxGb3JJblN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdlbmVyYXRlSXRlcmF0aW9uRm9yU3RhdGVtZW50KFwiaW5cIixlLHQmUj9ZOlYpfSxGb3JPZlN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdlbmVyYXRlSXRlcmF0aW9uRm9yU3RhdGVtZW50KFwib2ZcIixlLHQmUj9ZOlYpfSxMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuW2UubGFiZWwubmFtZStcIjpcIix0aGlzLm1heWJlQmxvY2soZS5ib2R5LHQmUj9ZOlYpXX0sUHJvZ3JhbTpmdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG87aT1lLmJvZHkubGVuZ3RoO3U9W2cmJmk+MD9cIlxcblwiOlwiXCJdO289Sztmb3Iocj0wO3I8aTsrK3Ipe2lmKCFnJiZyPT09aS0xKXtvfD1SfWlmKHgpe2lmKHI9PT0wKXtpZighZS5ib2R5WzBdLmxlYWRpbmdDb21tZW50cyl7Q2UoZS5yYW5nZVswXSxlLmJvZHlbcl0ucmFuZ2VbMF0sdSl9fWlmKHI+MCl7aWYoIWUuYm9keVtyLTFdLnRyYWlsaW5nQ29tbWVudHMmJiFlLmJvZHlbcl0ubGVhZGluZ0NvbW1lbnRzKXtDZShlLmJvZHlbci0xXS5yYW5nZVsxXSxlLmJvZHlbcl0ucmFuZ2VbMF0sdSl9fX1uPXBlKHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5ib2R5W3JdLG8pKTt1LnB1c2gobik7aWYocisxPGkmJiFaKGxlKG4pLnRvU3RyaW5nKCkpKXtpZih4KXtpZighZS5ib2R5W3IrMV0ubGVhZGluZ0NvbW1lbnRzKXt1LnB1c2goQSl9fWVsc2V7dS5wdXNoKEEpfX1pZih4KXtpZihyPT09aS0xKXtpZighZS5ib2R5W3JdLnRyYWlsaW5nQ29tbWVudHMpe0NlKGUuYm9keVtyXS5yYW5nZVsxXSxlLnJhbmdlWzFdLHUpfX19fXJldHVybiB1fSxGdW5jdGlvbkRlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuW3ZlKGUsdHJ1ZSksXCJmdW5jdGlvblwiLGJlKGUpfHxmZSgpLEJlKGUuaWQpLHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZSldfSxSZXR1cm5TdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtpZihlLmFyZ3VtZW50KXtyZXR1cm5bY2UoXCJyZXR1cm5cIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuU2VxdWVuY2UscSkpLHRoaXMuc2VtaWNvbG9uKHQpXX1yZXR1cm5bXCJyZXR1cm5cIit0aGlzLnNlbWljb2xvbih0KV19LFdoaWxlU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsbj10aGlzO0RlKGZ1bmN0aW9uKCl7dT1bXCJ3aGlsZVwiK0MrXCIoXCIsbi5nZW5lcmF0ZUV4cHJlc3Npb24oZS50ZXN0LHIuU2VxdWVuY2UscSksXCIpXCJdfSk7dS5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmJvZHksdCZSP1k6VikpO3JldHVybiB1fSxXaXRoU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsbj10aGlzO0RlKGZ1bmN0aW9uKCl7dT1bXCJ3aXRoXCIrQytcIihcIixuLmdlbmVyYXRlRXhwcmVzc2lvbihlLm9iamVjdCxyLlNlcXVlbmNlLHEpLFwiKVwiXX0pO3UucHVzaCh0aGlzLm1heWJlQmxvY2soZS5ib2R5LHQmUj9ZOlYpKTtyZXR1cm4gdX19O1EoeWUucHJvdG90eXBlLHllLlN0YXRlbWVudCk7eWUuRXhwcmVzc2lvbj17U2VxdWVuY2VFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpLG87aWYoci5TZXF1ZW5jZTx0KXt1fD1QfW49W107Zm9yKGk9MCxvPWUuZXhwcmVzc2lvbnMubGVuZ3RoO2k8bzsrK2kpe24ucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmV4cHJlc3Npb25zW2ldLHIuQXNzaWdubWVudCx1KSk7aWYoaSsxPG8pe24ucHVzaChcIixcIitDKX19cmV0dXJuIEVlKG4sci5TZXF1ZW5jZSx0KX0sQXNzaWdubWVudEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3JldHVybiB0aGlzLmdlbmVyYXRlQXNzaWdubWVudChlLmxlZnQsZS5yaWdodCxlLm9wZXJhdG9yLHQsdSl9LEFycm93RnVuY3Rpb25FeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gRWUodGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlKSxyLkFycm93RnVuY3Rpb24sdCl9LENvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7aWYoci5Db25kaXRpb25hbDx0KXt1fD1QfXJldHVybiBFZShbdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS50ZXN0LHIuTG9naWNhbE9SLHUpLEMrXCI/XCIrQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmNvbnNlcXVlbnQsci5Bc3NpZ25tZW50LHUpLEMrXCI6XCIrQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFsdGVybmF0ZSxyLkFzc2lnbm1lbnQsdSldLHIuQ29uZGl0aW9uYWwsdCl9LExvZ2ljYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gdGhpcy5CaW5hcnlFeHByZXNzaW9uKGUsdCx1KX0sQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4scixvLHM7cj1pW2Uub3BlcmF0b3JdO2lmKHI8dCl7dXw9UH1vPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUubGVmdCxyLHUpO3M9by50b1N0cmluZygpO2lmKHMuY2hhckNvZGVBdChzLmxlbmd0aC0xKT09PTQ3JiZhLmNvZGUuaXNJZGVudGlmaWVyUGFydEVTNShlLm9wZXJhdG9yLmNoYXJDb2RlQXQoMCkpKXtuPVtvLGZlKCksZS5vcGVyYXRvcl19ZWxzZXtuPWNlKG8sZS5vcGVyYXRvcil9bz10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnJpZ2h0LHIrMSx1KTtpZihlLm9wZXJhdG9yPT09XCIvXCImJm8udG9TdHJpbmcoKS5jaGFyQXQoMCk9PT1cIi9cInx8ZS5vcGVyYXRvci5zbGljZSgtMSk9PT1cIjxcIiYmby50b1N0cmluZygpLnNsaWNlKDAsMyk9PT1cIiEtLVwiKXtuLnB1c2goZmUoKSk7bi5wdXNoKG8pfWVsc2V7bj1jZShuLG8pfWlmKGUub3BlcmF0b3I9PT1cImluXCImJiEodSZQKSl7cmV0dXJuW1wiKFwiLG4sXCIpXCJdfXJldHVybiBFZShuLHIsdCl9LENhbGxFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpLG87bj1bdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5jYWxsZWUsci5DYWxsLE4pXTtuLnB1c2goXCIoXCIpO2ZvcihpPTAsbz1lW1wiYXJndW1lbnRzXCJdLmxlbmd0aDtpPG87KytpKXtuLnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZVtcImFyZ3VtZW50c1wiXVtpXSxyLkFzc2lnbm1lbnQscSkpO2lmKGkrMTxvKXtuLnB1c2goXCIsXCIrQyl9fW4ucHVzaChcIilcIik7aWYoISh1JkwpKXtyZXR1cm5bXCIoXCIsbixcIilcIl19cmV0dXJuIEVlKG4sci5DYWxsLHQpfSxOZXdFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpLG8scyxhO2k9ZVtcImFyZ3VtZW50c1wiXS5sZW5ndGg7YT11Jk8mJiFFJiZpPT09MD9XOlU7bj1jZShcIm5ld1wiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuY2FsbGVlLHIuTmV3LGEpKTtpZighKHUmTyl8fEV8fGk+MCl7bi5wdXNoKFwiKFwiKTtmb3Iobz0wLHM9aTtvPHM7KytvKXtuLnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZVtcImFyZ3VtZW50c1wiXVtvXSxyLkFzc2lnbm1lbnQscSkpO2lmKG8rMTxzKXtuLnB1c2goXCIsXCIrQyl9fW4ucHVzaChcIilcIil9cmV0dXJuIEVlKG4sci5OZXcsdCl9LE1lbWJlckV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBpLG87aT1bdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5vYmplY3Qsci5DYWxsLHUmTD9OOlUpXTtpZihlLmNvbXB1dGVkKXtpLnB1c2goXCJbXCIpO2kucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnByb3BlcnR5LHIuU2VxdWVuY2UsdSZMP3E6VykpO2kucHVzaChcIl1cIil9ZWxzZXtpZihlLm9iamVjdC50eXBlPT09bi5MaXRlcmFsJiZ0eXBlb2YgZS5vYmplY3QudmFsdWU9PT1cIm51bWJlclwiKXtvPWxlKGkpLnRvU3RyaW5nKCk7aWYoby5pbmRleE9mKFwiLlwiKTwwJiYhL1tlRXhYXS8udGVzdChvKSYmYS5jb2RlLmlzRGVjaW1hbERpZ2l0KG8uY2hhckNvZGVBdChvLmxlbmd0aC0xKSkmJiEoby5sZW5ndGg+PTImJm8uY2hhckNvZGVBdCgwKT09PTQ4KSl7aS5wdXNoKFwiLlwiKX19aS5wdXNoKFwiLlwiKTtpLnB1c2goQmUoZS5wcm9wZXJ0eSkpfXJldHVybiBFZShpLHIuTWVtYmVyLHQpfSxVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGksbyxzLGw7aT10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuVW5hcnkscSk7aWYoQz09PVwiXCIpe249Y2UoZS5vcGVyYXRvcixpKX1lbHNle249W2Uub3BlcmF0b3JdO2lmKGUub3BlcmF0b3IubGVuZ3RoPjIpe249Y2UobixpKX1lbHNle3M9bGUobikudG9TdHJpbmcoKTtsPXMuY2hhckNvZGVBdChzLmxlbmd0aC0xKTtvPWkudG9TdHJpbmcoKS5jaGFyQ29kZUF0KDApO2lmKChsPT09NDN8fGw9PT00NSkmJmw9PT1vfHxhLmNvZGUuaXNJZGVudGlmaWVyUGFydEVTNShsKSYmYS5jb2RlLmlzSWRlbnRpZmllclBhcnRFUzUobykpe24ucHVzaChmZSgpKTtuLnB1c2goaSl9ZWxzZXtuLnB1c2goaSl9fX1yZXR1cm4gRWUobixyLlVuYXJ5LHQpfSxZaWVsZEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuO2lmKGUuZGVsZWdhdGUpe249XCJ5aWVsZCpcIn1lbHNle249XCJ5aWVsZFwifWlmKGUuYXJndW1lbnQpe249Y2Uobix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuWWllbGQscSkpfXJldHVybiBFZShuLHIuWWllbGQsdCl9LEF3YWl0RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG49Y2UoZS5hbGw/XCJhd2FpdCpcIjpcImF3YWl0XCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLkF3YWl0LHEpKTtyZXR1cm4gRWUobixyLkF3YWl0LHQpfSxVcGRhdGVFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtpZihlLnByZWZpeCl7cmV0dXJuIEVlKFtlLm9wZXJhdG9yLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5VbmFyeSxxKV0sci5VbmFyeSx0KX1yZXR1cm4gRWUoW3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5Qb3N0Zml4LHEpLGUub3BlcmF0b3JdLHIuUG9zdGZpeCx0KX0sRnVuY3Rpb25FeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1bdmUoZSx0cnVlKSxcImZ1bmN0aW9uXCJdO2lmKGUuaWQpe24ucHVzaChiZShlKXx8ZmUoKSk7bi5wdXNoKEJlKGUuaWQpKX1lbHNle24ucHVzaChiZShlKXx8Qyl9bi5wdXNoKHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZSkpO3JldHVybiBufSxFeHBvcnRCYXRjaFNwZWNpZmllcjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuXCIqXCJ9LEFycmF5UGF0dGVybjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIHRoaXMuQXJyYXlFeHByZXNzaW9uKGUsdCx1LHRydWUpfSxBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUsbil7dmFyIGksbyxzPXRoaXM7aWYoIWUuZWxlbWVudHMubGVuZ3RoKXtyZXR1cm5cIltdXCJ9bz1uP2ZhbHNlOmUuZWxlbWVudHMubGVuZ3RoPjE7aT1bXCJbXCIsbz9BOlwiXCJdO0RlKGZ1bmN0aW9uKHQpe3ZhciB1LG47Zm9yKHU9MCxuPWUuZWxlbWVudHMubGVuZ3RoO3U8bjsrK3Upe2lmKCFlLmVsZW1lbnRzW3VdKXtpZihvKXtpLnB1c2godCl9aWYodSsxPT09bil7aS5wdXNoKFwiLFwiKX19ZWxzZXtpLnB1c2gobz90OlwiXCIpO2kucHVzaChzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmVsZW1lbnRzW3VdLHIuQXNzaWdubWVudCxxKSl9aWYodSsxPG4pe2kucHVzaChcIixcIisobz9BOkMpKX19fSk7aWYobyYmIVoobGUoaSkudG9TdHJpbmcoKSkpe2kucHVzaChBKX1pLnB1c2gobz9mOlwiXCIpO2kucHVzaChcIl1cIik7cmV0dXJuIGl9LFJlc3RFbGVtZW50OmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm5cIi4uLlwiK3RoaXMuZ2VuZXJhdGVQYXR0ZXJuKGUuYXJndW1lbnQpfSxDbGFzc0V4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGk7bj1bXCJjbGFzc1wiXTtpZihlLmlkKXtuPWNlKG4sdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5pZCxyLlNlcXVlbmNlLHEpKX1pZihlLnN1cGVyQ2xhc3Mpe2k9Y2UoXCJleHRlbmRzXCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zdXBlckNsYXNzLHIuQXNzaWdubWVudCxxKSk7bj1jZShuLGkpfW4ucHVzaChDKTtuLnB1c2godGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmJvZHksWSkpO3JldHVybiBufSxNZXRob2REZWZpbml0aW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixyO2lmKGVbXCJzdGF0aWNcIl0pe249W1wic3RhdGljXCIrQ119ZWxzZXtuPVtdfWlmKGUua2luZD09PVwiZ2V0XCJ8fGUua2luZD09PVwic2V0XCIpe3I9W2NlKGUua2luZCx0aGlzLmdlbmVyYXRlUHJvcGVydHlLZXkoZS5rZXksZS5jb21wdXRlZCkpLHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZS52YWx1ZSldfWVsc2V7cj1bU2UoZSksdGhpcy5nZW5lcmF0ZVByb3BlcnR5S2V5KGUua2V5LGUuY29tcHV0ZWQpLHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZS52YWx1ZSldfXJldHVybiBjZShuLHIpfSxQcm9wZXJ0eTpmdW5jdGlvbihlLHQsdSl7aWYoZS5raW5kPT09XCJnZXRcInx8ZS5raW5kPT09XCJzZXRcIil7cmV0dXJuW2Uua2luZCxmZSgpLHRoaXMuZ2VuZXJhdGVQcm9wZXJ0eUtleShlLmtleSxlLmNvbXB1dGVkKSx0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUudmFsdWUpXX1pZihlLnNob3J0aGFuZCl7cmV0dXJuIHRoaXMuZ2VuZXJhdGVQcm9wZXJ0eUtleShlLmtleSxlLmNvbXB1dGVkKX1pZihlLm1ldGhvZCl7cmV0dXJuW1NlKGUpLHRoaXMuZ2VuZXJhdGVQcm9wZXJ0eUtleShlLmtleSxlLmNvbXB1dGVkKSx0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUudmFsdWUpXX1yZXR1cm5bdGhpcy5nZW5lcmF0ZVByb3BlcnR5S2V5KGUua2V5LGUuY29tcHV0ZWQpLFwiOlwiK0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS52YWx1ZSxyLkFzc2lnbm1lbnQscSldfSxPYmplY3RFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpLG8scz10aGlzO2lmKCFlLnByb3BlcnRpZXMubGVuZ3RoKXtyZXR1cm5cInt9XCJ9bj1lLnByb3BlcnRpZXMubGVuZ3RoPjE7RGUoZnVuY3Rpb24oKXtvPXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucHJvcGVydGllc1swXSxyLlNlcXVlbmNlLHEpfSk7aWYoIW4pe2lmKCFYKGxlKG8pLnRvU3RyaW5nKCkpKXtyZXR1cm5bXCJ7XCIsQyxvLEMsXCJ9XCJdfX1EZShmdW5jdGlvbih0KXt2YXIgdSxhO2k9W1wie1wiLEEsdCxvXTtpZihuKXtpLnB1c2goXCIsXCIrQSk7Zm9yKHU9MSxhPWUucHJvcGVydGllcy5sZW5ndGg7dTxhOysrdSl7aS5wdXNoKHQpO2kucHVzaChzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnByb3BlcnRpZXNbdV0sci5TZXF1ZW5jZSxxKSk7aWYodSsxPGEpe2kucHVzaChcIixcIitBKX19fX0pO2lmKCFaKGxlKGkpLnRvU3RyaW5nKCkpKXtpLnB1c2goQSl9aS5wdXNoKGYpO2kucHVzaChcIn1cIik7cmV0dXJuIGl9LE9iamVjdFBhdHRlcm46ZnVuY3Rpb24oZSx0LHUpe3ZhciBpLG8scyxhLGwsYz10aGlzO2lmKCFlLnByb3BlcnRpZXMubGVuZ3RoKXtyZXR1cm5cInt9XCJ9YT1mYWxzZTtpZihlLnByb3BlcnRpZXMubGVuZ3RoPT09MSl7bD1lLnByb3BlcnRpZXNbMF07aWYobC52YWx1ZS50eXBlIT09bi5JZGVudGlmaWVyKXthPXRydWV9fWVsc2V7Zm9yKG89MCxzPWUucHJvcGVydGllcy5sZW5ndGg7bzxzOysrbyl7bD1lLnByb3BlcnRpZXNbb107aWYoIWwuc2hvcnRoYW5kKXthPXRydWU7YnJlYWt9fX1pPVtcIntcIixhP0E6XCJcIl07RGUoZnVuY3Rpb24odCl7dmFyIHUsbjtmb3IodT0wLG49ZS5wcm9wZXJ0aWVzLmxlbmd0aDt1PG47Kyt1KXtpLnB1c2goYT90OlwiXCIpO2kucHVzaChjLmdlbmVyYXRlRXhwcmVzc2lvbihlLnByb3BlcnRpZXNbdV0sci5TZXF1ZW5jZSxxKSk7aWYodSsxPG4pe2kucHVzaChcIixcIisoYT9BOkMpKX19fSk7aWYoYSYmIVoobGUoaSkudG9TdHJpbmcoKSkpe2kucHVzaChBKX1pLnB1c2goYT9mOlwiXCIpO2kucHVzaChcIn1cIik7cmV0dXJuIGl9LFRoaXNFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm5cInRoaXNcIn0sU3VwZXI6ZnVuY3Rpb24oZSx0LHUpe3JldHVyblwic3VwZXJcIn0sSWRlbnRpZmllcjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIEJlKGUpfSxJbXBvcnREZWZhdWx0U3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gQmUoZS5pZHx8ZS5sb2NhbCl9LEltcG9ydE5hbWVzcGFjZVNwZWNpZmllcjpmdW5jdGlvbihlLHQsdSl7dmFyIG49W1wiKlwiXTt2YXIgcj1lLmlkfHxlLmxvY2FsO2lmKHIpe24ucHVzaChDK1wiYXNcIitmZSgpK0JlKHIpKX1yZXR1cm4gbn0sSW1wb3J0U3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gdGhpcy5FeHBvcnRTcGVjaWZpZXIoZSx0LHUpfSxFeHBvcnRTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3ZhciBuPVsoZS5pZHx8ZS5sb2NhbCkubmFtZV07aWYoZS5uYW1lKXtuLnB1c2goZmUoKStcImFzXCIrZmUoKStCZShlLm5hbWUpKX1yZXR1cm4gbn0sTGl0ZXJhbDpmdW5jdGlvbihlLHQsdSl7dmFyIHI7aWYoZS5oYXNPd25Qcm9wZXJ0eShcInJhd1wiKSYmdiYmQi5yYXcpe3RyeXtyPXYoZS5yYXcpLmJvZHlbMF0uZXhwcmVzc2lvbjtpZihyLnR5cGU9PT1uLkxpdGVyYWwpe2lmKHIudmFsdWU9PT1lLnZhbHVlKXtyZXR1cm4gZS5yYXd9fX1jYXRjaChpKXt9fWlmKGUudmFsdWU9PT1udWxsKXtyZXR1cm5cIm51bGxcIn1pZih0eXBlb2YgZS52YWx1ZT09PVwic3RyaW5nXCIpe3JldHVybiBzZShlLnZhbHVlKX1pZih0eXBlb2YgZS52YWx1ZT09PVwibnVtYmVyXCIpe3JldHVybiB0ZShlLnZhbHVlKX1pZih0eXBlb2YgZS52YWx1ZT09PVwiYm9vbGVhblwiKXtyZXR1cm4gZS52YWx1ZT9cInRydWVcIjpcImZhbHNlXCJ9cmV0dXJuIG5lKGUudmFsdWUpfSxHZW5lcmF0b3JFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gdGhpcy5Db21wcmVoZW5zaW9uRXhwcmVzc2lvbihlLHQsdSl9LENvbXByZWhlbnNpb25FeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgaSxvLHMsYSxsPXRoaXM7aT1lLnR5cGU9PT1uLkdlbmVyYXRvckV4cHJlc3Npb24/W1wiKFwiXTpbXCJbXCJdO2lmKEIubW96LmNvbXByZWhlbnNpb25FeHByZXNzaW9uU3RhcnRzV2l0aEFzc2lnbm1lbnQpe2E9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5ib2R5LHIuQXNzaWdubWVudCxxKTtpLnB1c2goYSl9aWYoZS5ibG9ja3Mpe0RlKGZ1bmN0aW9uKCl7Zm9yKG89MCxzPWUuYmxvY2tzLmxlbmd0aDtvPHM7KytvKXthPWwuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYmxvY2tzW29dLHIuU2VxdWVuY2UscSk7aWYobz4wfHxCLm1vei5jb21wcmVoZW5zaW9uRXhwcmVzc2lvblN0YXJ0c1dpdGhBc3NpZ25tZW50KXtpPWNlKGksYSl9ZWxzZXtpLnB1c2goYSl9fX0pfWlmKGUuZmlsdGVyKXtpPWNlKGksXCJpZlwiK0MpO2E9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5maWx0ZXIsci5TZXF1ZW5jZSxxKTtpPWNlKGksW1wiKFwiLGEsXCIpXCJdKX1pZighQi5tb3ouY29tcHJlaGVuc2lvbkV4cHJlc3Npb25TdGFydHNXaXRoQXNzaWdubWVudCl7YT10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmJvZHksci5Bc3NpZ25tZW50LHEpO2k9Y2UoaSxhKX1pLnB1c2goZS50eXBlPT09bi5HZW5lcmF0b3JFeHByZXNzaW9uP1wiKVwiOlwiXVwiKTtyZXR1cm4gaX0sQ29tcHJlaGVuc2lvbkJsb2NrOmZ1bmN0aW9uKGUsdCx1KXt2YXIgaTtpZihlLmxlZnQudHlwZT09PW4uVmFyaWFibGVEZWNsYXJhdGlvbil7aT1bZS5sZWZ0LmtpbmQsZmUoKSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUubGVmdC5kZWNsYXJhdGlvbnNbMF0sRyldfWVsc2V7aT10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmxlZnQsci5DYWxsLHEpfWk9Y2UoaSxlLm9mP1wib2ZcIjpcImluXCIpO2k9Y2UoaSx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnJpZ2h0LHIuU2VxdWVuY2UscSkpO3JldHVybltcImZvclwiK0MrXCIoXCIsaSxcIilcIl19LFNwcmVhZEVsZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3JldHVybltcIi4uLlwiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5Bc3NpZ25tZW50LHEpXX0sVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1OO2lmKCEodSZMKSl7bj1VfXZhciBpPVt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRhZyxyLkNhbGwsbiksdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5xdWFzaSxyLlByaW1hcnkseildO3JldHVybiBFZShpLHIuVGFnZ2VkVGVtcGxhdGUsdCl9LFRlbXBsYXRlRWxlbWVudDpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIGUudmFsdWUucmF3fSxUZW1wbGF0ZUxpdGVyYWw6ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGksbztuPVtcImBcIl07Zm9yKGk9MCxvPWUucXVhc2lzLmxlbmd0aDtpPG87KytpKXtuLnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5xdWFzaXNbaV0sci5QcmltYXJ5LHEpKTtpZihpKzE8byl7bi5wdXNoKFwiJHtcIitDKTtuLnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5leHByZXNzaW9uc1tpXSxyLlNlcXVlbmNlLHEpKTtuLnB1c2goQytcIn1cIil9fW4ucHVzaChcImBcIik7cmV0dXJuIG59LE1vZHVsZVNwZWNpZmllcjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIHRoaXMuTGl0ZXJhbChlLHQsdSl9fTtRKHllLnByb3RvdHlwZSx5ZS5FeHByZXNzaW9uKTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVFeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCx1KXt2YXIgcixpO2k9ZS50eXBlfHxuLlByb3BlcnR5O2lmKEIudmVyYmF0aW0mJmUuaGFzT3duUHJvcGVydHkoQi52ZXJiYXRpbSkpe3JldHVybiBnZShlLHQpfXI9dGhpc1tpXShlLHQsdSk7aWYoQi5jb21tZW50KXtyPUFlKGUscil9cmV0dXJuIGxlKHIsZSl9O3llLnByb3RvdHlwZS5nZW5lcmF0ZVN0YXRlbWVudD1mdW5jdGlvbihlLHQpe3ZhciB1LHI7dT10aGlzW2UudHlwZV0oZSx0KTtpZihCLmNvbW1lbnQpe3U9QWUoZSx1KX1yPWxlKHUpLnRvU3RyaW5nKCk7aWYoZS50eXBlPT09bi5Qcm9ncmFtJiYhZyYmQT09PVwiXCImJnIuY2hhckF0KHIubGVuZ3RoLTEpPT09XCJcXG5cIil7dT1iP2xlKHUpLnJlcGxhY2VSaWdodCgvXFxzKyQvLFwiXCIpOnIucmVwbGFjZSgvXFxzKyQvLFwiXCIpfXJldHVybiBsZSh1LGUpfTtmdW5jdGlvbiB4ZShlKXt2YXIgdDt0PW5ldyB5ZTtpZihJKGUpKXtyZXR1cm4gdC5nZW5lcmF0ZVN0YXRlbWVudChlLFYpfWlmKGsoZSkpe3JldHVybiB0LmdlbmVyYXRlRXhwcmVzc2lvbihlLHIuU2VxdWVuY2UscSl9dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBub2RlIHR5cGU6IFwiK2UudHlwZSl9ZnVuY3Rpb24gd2UobixyKXt2YXIgaT1IKCkscyxhO2lmKHIhPW51bGwpe2lmKHR5cGVvZiByLmluZGVudD09PVwic3RyaW5nXCIpe2kuZm9ybWF0LmluZGVudC5zdHlsZT1yLmluZGVudH1pZih0eXBlb2Ygci5iYXNlPT09XCJudW1iZXJcIil7aS5mb3JtYXQuaW5kZW50LmJhc2U9ci5iYXNlfXI9ZWUoaSxyKTtjPXIuZm9ybWF0LmluZGVudC5zdHlsZTtpZih0eXBlb2Ygci5iYXNlPT09XCJzdHJpbmdcIil7Zj1yLmJhc2V9ZWxzZXtmPUooYyxyLmZvcm1hdC5pbmRlbnQuYmFzZSl9fWVsc2V7cj1pO2M9ci5mb3JtYXQuaW5kZW50LnN0eWxlO2Y9SihjLHIuZm9ybWF0LmluZGVudC5iYXNlKX1wPXIuZm9ybWF0Lmpzb247RD1yLmZvcm1hdC5yZW51bWJlcjtoPXA/ZmFsc2U6ci5mb3JtYXQuaGV4YWRlY2ltYWw7bT1wP1wiZG91YmxlXCI6ci5mb3JtYXQucXVvdGVzO2Q9ci5mb3JtYXQuZXNjYXBlbGVzcztBPXIuZm9ybWF0Lm5ld2xpbmU7Qz1yLmZvcm1hdC5zcGFjZTtpZihyLmZvcm1hdC5jb21wYWN0KXtBPUM9Yz1mPVwiXCJ9RT1yLmZvcm1hdC5wYXJlbnRoZXNlcztGPXIuZm9ybWF0LnNlbWljb2xvbnM7Zz1yLmZvcm1hdC5zYWZlQ29uY2F0ZW5hdGlvbjt5PXIuZGlyZWN0aXZlO3Y9cD9udWxsOnIucGFyc2U7Yj1yLnNvdXJjZU1hcDtTPXIuc291cmNlQ29kZTt4PXIuZm9ybWF0LnByZXNlcnZlQmxhbmtMaW5lcyYmUyE9PW51bGw7Qj1yO2lmKGIpe2lmKCF1LmJyb3dzZXIpe289ZShcInNvdXJjZS1tYXBcIikuU291cmNlTm9kZX1lbHNle289dC5zb3VyY2VNYXAuU291cmNlTm9kZX19cz14ZShuKTtpZighYil7YT17Y29kZTpzLnRvU3RyaW5nKCksbWFwOm51bGx9O3JldHVybiByLnNvdXJjZU1hcFdpdGhDb2RlP2E6YS5jb2RlfWE9cy50b1N0cmluZ1dpdGhTb3VyY2VNYXAoe2ZpbGU6ci5maWxlLHNvdXJjZVJvb3Q6ci5zb3VyY2VNYXBSb290fSk7aWYoci5zb3VyY2VDb250ZW50KXthLm1hcC5zZXRTb3VyY2VDb250ZW50KHIuc291cmNlTWFwLHIuc291cmNlQ29udGVudCl9aWYoci5zb3VyY2VNYXBXaXRoQ29kZSl7cmV0dXJuIGF9cmV0dXJuIGEubWFwLnRvU3RyaW5nKCl9dz17aW5kZW50OntzdHlsZTpcIlwiLGJhc2U6MH0scmVudW1iZXI6dHJ1ZSxoZXhhZGVjaW1hbDp0cnVlLHF1b3RlczpcImF1dG9cIixlc2NhcGVsZXNzOnRydWUsY29tcGFjdDp0cnVlLHBhcmVudGhlc2VzOmZhbHNlLHNlbWljb2xvbnM6ZmFsc2V9O189SCgpLmZvcm1hdDt1LnZlcnNpb249ZShcIi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb247dS5nZW5lcmF0ZT13ZTt1LmF0dGFjaENvbW1lbnRzPXMuYXR0YWNoQ29tbWVudHM7dS5QcmVjZWRlbmNlPWVlKHt9LHIpO3UuYnJvd3Nlcj1mYWxzZTt1LkZPUk1BVF9NSU5JRlk9dzt1LkZPUk1BVF9ERUZBVUxUUz1ffSkoKX0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93Ont9KX0se1wiLi9wYWNrYWdlLmpzb25cIjo0Nyxlc3RyYXZlcnNlOjQ5LGVzdXRpbHM6MzMsXCJzb3VyY2UtbWFwXCI6MzR9XSwzMDpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSl7aWYoZT09bnVsbCl7cmV0dXJuIGZhbHNlfXN3aXRjaChlLnR5cGUpe2Nhc2VcIkFycmF5RXhwcmVzc2lvblwiOmNhc2VcIkFzc2lnbm1lbnRFeHByZXNzaW9uXCI6Y2FzZVwiQmluYXJ5RXhwcmVzc2lvblwiOmNhc2VcIkNhbGxFeHByZXNzaW9uXCI6Y2FzZVwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCI6Y2FzZVwiRnVuY3Rpb25FeHByZXNzaW9uXCI6Y2FzZVwiSWRlbnRpZmllclwiOmNhc2VcIkxpdGVyYWxcIjpjYXNlXCJMb2dpY2FsRXhwcmVzc2lvblwiOmNhc2VcIk1lbWJlckV4cHJlc3Npb25cIjpjYXNlXCJOZXdFeHByZXNzaW9uXCI6Y2FzZVwiT2JqZWN0RXhwcmVzc2lvblwiOmNhc2VcIlNlcXVlbmNlRXhwcmVzc2lvblwiOmNhc2VcIlRoaXNFeHByZXNzaW9uXCI6Y2FzZVwiVW5hcnlFeHByZXNzaW9uXCI6Y2FzZVwiVXBkYXRlRXhwcmVzc2lvblwiOnJldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiB1KGUpe2lmKGU9PW51bGwpe3JldHVybiBmYWxzZX1zd2l0Y2goZS50eXBlKXtjYXNlXCJEb1doaWxlU3RhdGVtZW50XCI6Y2FzZVwiRm9ySW5TdGF0ZW1lbnRcIjpjYXNlXCJGb3JTdGF0ZW1lbnRcIjpjYXNlXCJXaGlsZVN0YXRlbWVudFwiOnJldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiBuKGUpe2lmKGU9PW51bGwpe3JldHVybiBmYWxzZX1zd2l0Y2goZS50eXBlKXtjYXNlXCJCbG9ja1N0YXRlbWVudFwiOmNhc2VcIkJyZWFrU3RhdGVtZW50XCI6Y2FzZVwiQ29udGludWVTdGF0ZW1lbnRcIjpjYXNlXCJEZWJ1Z2dlclN0YXRlbWVudFwiOmNhc2VcIkRvV2hpbGVTdGF0ZW1lbnRcIjpjYXNlXCJFbXB0eVN0YXRlbWVudFwiOmNhc2VcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIjpjYXNlXCJGb3JJblN0YXRlbWVudFwiOmNhc2VcIkZvclN0YXRlbWVudFwiOmNhc2VcIklmU3RhdGVtZW50XCI6Y2FzZVwiTGFiZWxlZFN0YXRlbWVudFwiOmNhc2VcIlJldHVyblN0YXRlbWVudFwiOmNhc2VcIlN3aXRjaFN0YXRlbWVudFwiOmNhc2VcIlRocm93U3RhdGVtZW50XCI6Y2FzZVwiVHJ5U3RhdGVtZW50XCI6Y2FzZVwiVmFyaWFibGVEZWNsYXJhdGlvblwiOmNhc2VcIldoaWxlU3RhdGVtZW50XCI6Y2FzZVwiV2l0aFN0YXRlbWVudFwiOnJldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiByKGUpe3JldHVybiBuKGUpfHxlIT1udWxsJiZlLnR5cGU9PT1cIkZ1bmN0aW9uRGVjbGFyYXRpb25cIn1mdW5jdGlvbiBpKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcIklmU3RhdGVtZW50XCI6aWYoZS5hbHRlcm5hdGUhPW51bGwpe3JldHVybiBlLmFsdGVybmF0ZX1yZXR1cm4gZS5jb25zZXF1ZW50O2Nhc2VcIkxhYmVsZWRTdGF0ZW1lbnRcIjpjYXNlXCJGb3JTdGF0ZW1lbnRcIjpjYXNlXCJGb3JJblN0YXRlbWVudFwiOmNhc2VcIldoaWxlU3RhdGVtZW50XCI6Y2FzZVwiV2l0aFN0YXRlbWVudFwiOnJldHVybiBlLmJvZHl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gbyhlKXt2YXIgdDtpZihlLnR5cGUhPT1cIklmU3RhdGVtZW50XCIpe3JldHVybiBmYWxzZX1pZihlLmFsdGVybmF0ZT09bnVsbCl7cmV0dXJuIGZhbHNlfXQ9ZS5jb25zZXF1ZW50O2Rve2lmKHQudHlwZT09PVwiSWZTdGF0ZW1lbnRcIil7aWYodC5hbHRlcm5hdGU9PW51bGwpe3JldHVybiB0cnVlfX10PWkodCl9d2hpbGUodCk7cmV0dXJuIGZhbHNlfXQuZXhwb3J0cz17aXNFeHByZXNzaW9uOmUsaXNTdGF0ZW1lbnQ6bixpc0l0ZXJhdGlvblN0YXRlbWVudDp1LGlzU291cmNlRWxlbWVudDpyLGlzUHJvYmxlbWF0aWNJZlN0YXRlbWVudDpvLHRyYWlsaW5nU3RhdGVtZW50Oml9fSkoKX0se31dLDMxOltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsdSxuLHIsaSxvO3U9e05vbkFzY2lpSWRlbnRpZmllclN0YXJ0Oi9bXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzNzAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOEEwLVxcdTA4QjJcXHUwOTA0LVxcdTA5MzlcXHUwOTNEXFx1MDk1MFxcdTA5NTgtXFx1MDk2MVxcdTA5NzEtXFx1MDk4MFxcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkRcXHUwOUNFXFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTFcXHUwOUYwXFx1MDlGMVxcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNzItXFx1MEE3NFxcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCRFxcdTBBRDBcXHUwQUUwXFx1MEFFMVxcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNEXFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjFcXHUwQjcxXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkQwXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRFxcdTBDNThcXHUwQzU5XFx1MEM2MFxcdTBDNjFcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JEXFx1MENERVxcdTBDRTBcXHUwQ0UxXFx1MENGMVxcdTBDRjJcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNEXFx1MEQ0RVxcdTBENjBcXHUwRDYxXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBFMDEtXFx1MEUzMFxcdTBFMzJcXHUwRTMzXFx1MEU0MC1cXHUwRTQ2XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjBcXHUwRUIyXFx1MEVCM1xcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGNDAtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGODgtXFx1MEY4Q1xcdTEwMDAtXFx1MTAyQVxcdTEwM0ZcXHUxMDUwLVxcdTEwNTVcXHUxMDVBLVxcdTEwNURcXHUxMDYxXFx1MTA2NVxcdTEwNjZcXHUxMDZFLVxcdTEwNzBcXHUxMDc1LVxcdTEwODFcXHUxMDhFXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxMVxcdTE3MjAtXFx1MTczMVxcdTE3NDAtXFx1MTc1MVxcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3ODAtXFx1MTdCM1xcdTE3RDdcXHUxN0RDXFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEE4XFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5NTAtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QzEtXFx1MTlDN1xcdTFBMDAtXFx1MUExNlxcdTFBMjAtXFx1MUE1NFxcdTFBQTdcXHUxQjA1LVxcdTFCMzNcXHUxQjQ1LVxcdTFCNEJcXHUxQjgzLVxcdTFCQTBcXHUxQkFFXFx1MUJBRlxcdTFCQkEtXFx1MUJFNVxcdTFDMDAtXFx1MUMyM1xcdTFDNEQtXFx1MUM0RlxcdTFDNUEtXFx1MUM3RFxcdTFDRTktXFx1MUNFQ1xcdTFDRUUtXFx1MUNGMVxcdTFDRjVcXHUxQ0Y2XFx1MUQwMC1cXHUxREJGXFx1MUUwMC1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOS1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTJEXFx1MjEyRi1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxNjAtXFx1MjE4OFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNFRVxcdTJDRjJcXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ4MC1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkUyRlxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyOVxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOUQtXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYxRlxcdUE2MkFcXHVBNjJCXFx1QTY0MC1cXHVBNjZFXFx1QTY3Ri1cXHVBNjlEXFx1QTZBMC1cXHVBNkVGXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBN0FEXFx1QTdCMFxcdUE3QjFcXHVBN0Y3LVxcdUE4MDFcXHVBODAzLVxcdUE4MDVcXHVBODA3LVxcdUE4MEFcXHVBODBDLVxcdUE4MjJcXHVBODQwLVxcdUE4NzNcXHVBODgyLVxcdUE4QjNcXHVBOEYyLVxcdUE4RjdcXHVBOEZCXFx1QTkwQS1cXHVBOTI1XFx1QTkzMC1cXHVBOTQ2XFx1QTk2MC1cXHVBOTdDXFx1QTk4NC1cXHVBOUIyXFx1QTlDRlxcdUE5RTAtXFx1QTlFNFxcdUE5RTYtXFx1QTlFRlxcdUE5RkEtXFx1QTlGRVxcdUFBMDAtXFx1QUEyOFxcdUFBNDAtXFx1QUE0MlxcdUFBNDQtXFx1QUE0QlxcdUFBNjAtXFx1QUE3NlxcdUFBN0FcXHVBQTdFLVxcdUFBQUZcXHVBQUIxXFx1QUFCNVxcdUFBQjZcXHVBQUI5LVxcdUFBQkRcXHVBQUMwXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFQVxcdUFBRjItXFx1QUFGNFxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCMzAtXFx1QUI1QVxcdUFCNUMtXFx1QUI1RlxcdUFCNjRcXHVBQjY1XFx1QUJDMC1cXHVBQkUyXFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRFxcdUZCMUYtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYyMS1cXHVGRjNBXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXS8sTm9uQXNjaWlJZGVudGlmaWVyUGFydDovW1xceEFBXFx4QjVcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzAwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0ODMtXFx1MDQ4N1xcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNTkxLVxcdTA1QkRcXHUwNUJGXFx1MDVDMVxcdTA1QzJcXHUwNUM0XFx1MDVDNVxcdTA1QzdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjEwLVxcdTA2MUFcXHUwNjIwLVxcdTA2NjlcXHUwNjZFLVxcdTA2RDNcXHUwNkQ1LVxcdTA2RENcXHUwNkRGLVxcdTA2RThcXHUwNkVBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMC1cXHUwNzRBXFx1MDc0RC1cXHUwN0IxXFx1MDdDMC1cXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgyRFxcdTA4NDAtXFx1MDg1QlxcdTA4QTAtXFx1MDhCMlxcdTA4RTQtXFx1MDk2M1xcdTA5NjYtXFx1MDk2RlxcdTA5NzEtXFx1MDk4M1xcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkMtXFx1MDlDNFxcdTA5QzdcXHUwOUM4XFx1MDlDQi1cXHUwOUNFXFx1MDlEN1xcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUzXFx1MDlFNi1cXHUwOUYxXFx1MEEwMS1cXHUwQTAzXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTNDXFx1MEEzRS1cXHUwQTQyXFx1MEE0N1xcdTBBNDhcXHUwQTRCLVxcdTBBNERcXHUwQTUxXFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNjYtXFx1MEE3NVxcdTBBODEtXFx1MEE4M1xcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCQy1cXHUwQUM1XFx1MEFDNy1cXHUwQUM5XFx1MEFDQi1cXHUwQUNEXFx1MEFEMFxcdTBBRTAtXFx1MEFFM1xcdTBBRTYtXFx1MEFFRlxcdTBCMDEtXFx1MEIwM1xcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNDLVxcdTBCNDRcXHUwQjQ3XFx1MEI0OFxcdTBCNEItXFx1MEI0RFxcdTBCNTZcXHUwQjU3XFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjNcXHUwQjY2LVxcdTBCNkZcXHUwQjcxXFx1MEI4MlxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJCRS1cXHUwQkMyXFx1MEJDNi1cXHUwQkM4XFx1MEJDQS1cXHUwQkNEXFx1MEJEMFxcdTBCRDdcXHUwQkU2LVxcdTBCRUZcXHUwQzAwLVxcdTBDMDNcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNELVxcdTBDNDRcXHUwQzQ2LVxcdTBDNDhcXHUwQzRBLVxcdTBDNERcXHUwQzU1XFx1MEM1NlxcdTBDNThcXHUwQzU5XFx1MEM2MC1cXHUwQzYzXFx1MEM2Ni1cXHUwQzZGXFx1MEM4MS1cXHUwQzgzXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCQy1cXHUwQ0M0XFx1MENDNi1cXHUwQ0M4XFx1MENDQS1cXHUwQ0NEXFx1MENENVxcdTBDRDZcXHUwQ0RFXFx1MENFMC1cXHUwQ0UzXFx1MENFNi1cXHUwQ0VGXFx1MENGMVxcdTBDRjJcXHUwRDAxLVxcdTBEMDNcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNELVxcdTBENDRcXHUwRDQ2LVxcdTBENDhcXHUwRDRBLVxcdTBENEVcXHUwRDU3XFx1MEQ2MC1cXHUwRDYzXFx1MEQ2Ni1cXHUwRDZGXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4MlxcdTBEODNcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MERDQVxcdTBEQ0YtXFx1MERENFxcdTBERDZcXHUwREQ4LVxcdTBEREZcXHUwREU2LVxcdTBERUZcXHUwREYyXFx1MERGM1xcdTBFMDEtXFx1MEUzQVxcdTBFNDAtXFx1MEU0RVxcdTBFNTAtXFx1MEU1OVxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUI5XFx1MEVCQi1cXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFQzgtXFx1MEVDRFxcdTBFRDAtXFx1MEVEOVxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjE4XFx1MEYxOVxcdTBGMjAtXFx1MEYyOVxcdTBGMzVcXHUwRjM3XFx1MEYzOVxcdTBGM0UtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGNzEtXFx1MEY4NFxcdTBGODYtXFx1MEY5N1xcdTBGOTktXFx1MEZCQ1xcdTBGQzZcXHUxMDAwLVxcdTEwNDlcXHUxMDUwLVxcdTEwOURcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM1RC1cXHUxMzVGXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzE0XFx1MTcyMC1cXHUxNzM0XFx1MTc0MC1cXHUxNzUzXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc3MlxcdTE3NzNcXHUxNzgwLVxcdTE3RDNcXHUxN0Q3XFx1MTdEQ1xcdTE3RERcXHUxN0UwLVxcdTE3RTlcXHUxODBCLVxcdTE4MERcXHUxODEwLVxcdTE4MTlcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUVcXHUxOTIwLVxcdTE5MkJcXHUxOTMwLVxcdTE5M0JcXHUxOTQ2LVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUIwLVxcdTE5QzlcXHUxOUQwLVxcdTE5RDlcXHUxQTAwLVxcdTFBMUJcXHUxQTIwLVxcdTFBNUVcXHUxQTYwLVxcdTFBN0NcXHUxQTdGLVxcdTFBODlcXHUxQTkwLVxcdTFBOTlcXHUxQUE3XFx1MUFCMC1cXHUxQUJEXFx1MUIwMC1cXHUxQjRCXFx1MUI1MC1cXHUxQjU5XFx1MUI2Qi1cXHUxQjczXFx1MUI4MC1cXHUxQkYzXFx1MUMwMC1cXHUxQzM3XFx1MUM0MC1cXHUxQzQ5XFx1MUM0RC1cXHUxQzdEXFx1MUNEMC1cXHUxQ0QyXFx1MUNENC1cXHUxQ0Y2XFx1MUNGOFxcdTFDRjlcXHUxRDAwLVxcdTFERjVcXHUxREZDLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjAwQ1xcdTIwMERcXHUyMDNGXFx1MjA0MFxcdTIwNTRcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIwRDAtXFx1MjBEQ1xcdTIwRTFcXHUyMEU1LVxcdTIwRjBcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ3Ri1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkRFMC1cXHUyREZGXFx1MkUyRlxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyRlxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOTlcXHUzMDlBXFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjJCXFx1QTY0MC1cXHVBNjZGXFx1QTY3NC1cXHVBNjdEXFx1QTY3Ri1cXHVBNjlEXFx1QTY5Ri1cXHVBNkYxXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBN0FEXFx1QTdCMFxcdUE3QjFcXHVBN0Y3LVxcdUE4MjdcXHVBODQwLVxcdUE4NzNcXHVBODgwLVxcdUE4QzRcXHVBOEQwLVxcdUE4RDlcXHVBOEUwLVxcdUE4RjdcXHVBOEZCXFx1QTkwMC1cXHVBOTJEXFx1QTkzMC1cXHVBOTUzXFx1QTk2MC1cXHVBOTdDXFx1QTk4MC1cXHVBOUMwXFx1QTlDRi1cXHVBOUQ5XFx1QTlFMC1cXHVBOUZFXFx1QUEwMC1cXHVBQTM2XFx1QUE0MC1cXHVBQTREXFx1QUE1MC1cXHVBQTU5XFx1QUE2MC1cXHVBQTc2XFx1QUE3QS1cXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVGXFx1QUFGMi1cXHVBQUY2XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUIzMC1cXHVBQjVBXFx1QUI1Qy1cXHVBQjVGXFx1QUI2NFxcdUFCNjVcXHVBQkMwLVxcdUFCRUFcXHVBQkVDXFx1QUJFRFxcdUFCRjAtXFx1QUJGOVxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMUQtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkUwMC1cXHVGRTBGXFx1RkUyMC1cXHVGRTJEXFx1RkUzM1xcdUZFMzRcXHVGRTRELVxcdUZFNEZcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjEwLVxcdUZGMTlcXHVGRjIxLVxcdUZGM0FcXHVGRjNGXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXS9cbn07ZT17Tm9uQXNjaWlJZGVudGlmaWVyU3RhcnQ6L1tcXHhBQVxceEI1XFx4QkFcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDM3MC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzdGXFx1MDM4NlxcdTAzODgtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDhBLVxcdTA1MkZcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYyMC1cXHUwNjRBXFx1MDY2RVxcdTA2NkZcXHUwNjcxLVxcdTA2RDNcXHUwNkQ1XFx1MDZFNVxcdTA2RTZcXHUwNkVFXFx1MDZFRlxcdTA2RkEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwXFx1MDcxMi1cXHUwNzJGXFx1MDc0RC1cXHUwN0E1XFx1MDdCMVxcdTA3Q0EtXFx1MDdFQVxcdTA3RjRcXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgxNVxcdTA4MUFcXHUwODI0XFx1MDgyOFxcdTA4NDAtXFx1MDg1OFxcdTA4QTAtXFx1MDhCMlxcdTA5MDQtXFx1MDkzOVxcdTA5M0RcXHUwOTUwXFx1MDk1OC1cXHUwOTYxXFx1MDk3MS1cXHUwOTgwXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCRFxcdTA5Q0VcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFMVxcdTA5RjBcXHUwOUYxXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE3Mi1cXHUwQTc0XFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJEXFx1MEFEMFxcdTBBRTBcXHUwQUUxXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0RcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2MVxcdTBCNzFcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCRDBcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNEXFx1MEM1OFxcdTBDNTlcXHUwQzYwXFx1MEM2MVxcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkRcXHUwQ0RFXFx1MENFMFxcdTBDRTFcXHUwQ0YxXFx1MENGMlxcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0RcXHUwRDRFXFx1MEQ2MFxcdTBENjFcXHUwRDdBLVxcdTBEN0ZcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MEUwMS1cXHUwRTMwXFx1MEUzMlxcdTBFMzNcXHUwRTQwLVxcdTBFNDZcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCMFxcdTBFQjJcXHUwRUIzXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEY0MC1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY4OC1cXHUwRjhDXFx1MTAwMC1cXHUxMDJBXFx1MTAzRlxcdTEwNTAtXFx1MTA1NVxcdTEwNUEtXFx1MTA1RFxcdTEwNjFcXHUxMDY1XFx1MTA2NlxcdTEwNkUtXFx1MTA3MFxcdTEwNzUtXFx1MTA4MVxcdTEwOEVcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzExXFx1MTcyMC1cXHUxNzMxXFx1MTc0MC1cXHUxNzUxXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc4MC1cXHUxN0IzXFx1MTdEN1xcdTE3RENcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QThcXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTk1MC1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlDMS1cXHUxOUM3XFx1MUEwMC1cXHUxQTE2XFx1MUEyMC1cXHUxQTU0XFx1MUFBN1xcdTFCMDUtXFx1MUIzM1xcdTFCNDUtXFx1MUI0QlxcdTFCODMtXFx1MUJBMFxcdTFCQUVcXHUxQkFGXFx1MUJCQS1cXHUxQkU1XFx1MUMwMC1cXHUxQzIzXFx1MUM0RC1cXHUxQzRGXFx1MUM1QS1cXHUxQzdEXFx1MUNFOS1cXHUxQ0VDXFx1MUNFRS1cXHUxQ0YxXFx1MUNGNVxcdTFDRjZcXHUxRDAwLVxcdTFEQkZcXHUxRTAwLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE4LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0VFXFx1MkNGMlxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDgwLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDlCLVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MUZcXHVBNjJBXFx1QTYyQlxcdUE2NDAtXFx1QTY2RVxcdUE2N0YtXFx1QTY5RFxcdUE2QTAtXFx1QTZFRlxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTdBRFxcdUE3QjBcXHVBN0IxXFx1QTdGNy1cXHVBODAxXFx1QTgwMy1cXHVBODA1XFx1QTgwNy1cXHVBODBBXFx1QTgwQy1cXHVBODIyXFx1QTg0MC1cXHVBODczXFx1QTg4Mi1cXHVBOEIzXFx1QThGMi1cXHVBOEY3XFx1QThGQlxcdUE5MEEtXFx1QTkyNVxcdUE5MzAtXFx1QTk0NlxcdUE5NjAtXFx1QTk3Q1xcdUE5ODQtXFx1QTlCMlxcdUE5Q0ZcXHVBOUUwLVxcdUE5RTRcXHVBOUU2LVxcdUE5RUZcXHVBOUZBLVxcdUE5RkVcXHVBQTAwLVxcdUFBMjhcXHVBQTQwLVxcdUFBNDJcXHVBQTQ0LVxcdUFBNEJcXHVBQTYwLVxcdUFBNzZcXHVBQTdBXFx1QUE3RS1cXHVBQUFGXFx1QUFCMVxcdUFBQjVcXHVBQUI2XFx1QUFCOS1cXHVBQUJEXFx1QUFDMFxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUFcXHVBQUYyLVxcdUFBRjRcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFMlxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMURcXHVGQjFGLVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMjEtXFx1RkYzQVxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ118XFx1RDgwMFtcXHVEQzAwLVxcdURDMEJcXHVEQzBELVxcdURDMjZcXHVEQzI4LVxcdURDM0FcXHVEQzNDXFx1REMzRFxcdURDM0YtXFx1REM0RFxcdURDNTAtXFx1REM1RFxcdURDODAtXFx1RENGQVxcdURENDAtXFx1REQ3NFxcdURFODAtXFx1REU5Q1xcdURFQTAtXFx1REVEMFxcdURGMDAtXFx1REYxRlxcdURGMzAtXFx1REY0QVxcdURGNTAtXFx1REY3NVxcdURGODAtXFx1REY5RFxcdURGQTAtXFx1REZDM1xcdURGQzgtXFx1REZDRlxcdURGRDEtXFx1REZENV18XFx1RDgwMVtcXHVEQzAwLVxcdURDOURcXHVERDAwLVxcdUREMjdcXHVERDMwLVxcdURENjNcXHVERTAwLVxcdURGMzZcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNjddfFxcdUQ4MDJbXFx1REMwMC1cXHVEQzA1XFx1REMwOFxcdURDMEEtXFx1REMzNVxcdURDMzdcXHVEQzM4XFx1REMzQ1xcdURDM0YtXFx1REM1NVxcdURDNjAtXFx1REM3NlxcdURDODAtXFx1REM5RVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMFxcdURFMTAtXFx1REUxM1xcdURFMTUtXFx1REUxN1xcdURFMTktXFx1REUzM1xcdURFNjAtXFx1REU3Q1xcdURFODAtXFx1REU5Q1xcdURFQzAtXFx1REVDN1xcdURFQzktXFx1REVFNFxcdURGMDAtXFx1REYzNVxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY3MlxcdURGODAtXFx1REY5MV18XFx1RDgwM1tcXHVEQzAwLVxcdURDNDhdfFxcdUQ4MDRbXFx1REMwMy1cXHVEQzM3XFx1REM4My1cXHVEQ0FGXFx1RENEMC1cXHVEQ0U4XFx1REQwMy1cXHVERDI2XFx1REQ1MC1cXHVERDcyXFx1REQ3NlxcdUREODMtXFx1RERCMlxcdUREQzEtXFx1RERDNFxcdUREREFcXHVERTAwLVxcdURFMTFcXHVERTEzLVxcdURFMkJcXHVERUIwLVxcdURFREVcXHVERjA1LVxcdURGMENcXHVERjBGXFx1REYxMFxcdURGMTMtXFx1REYyOFxcdURGMkEtXFx1REYzMFxcdURGMzJcXHVERjMzXFx1REYzNS1cXHVERjM5XFx1REYzRFxcdURGNUQtXFx1REY2MV18XFx1RDgwNVtcXHVEQzgwLVxcdURDQUZcXHVEQ0M0XFx1RENDNVxcdURDQzdcXHVERDgwLVxcdUREQUVcXHVERTAwLVxcdURFMkZcXHVERTQ0XFx1REU4MC1cXHVERUFBXXxcXHVEODA2W1xcdURDQTAtXFx1RENERlxcdURDRkZcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDhbXFx1REMwMC1cXHVERjk4XXxcXHVEODA5W1xcdURDMDAtXFx1REM2RV18W1xcdUQ4MENcXHVEODQwLVxcdUQ4NjhcXHVEODZBLVxcdUQ4NkNdW1xcdURDMDAtXFx1REZGRl18XFx1RDgwRFtcXHVEQzAwLVxcdURDMkVdfFxcdUQ4MUFbXFx1REMwMC1cXHVERTM4XFx1REU0MC1cXHVERTVFXFx1REVEMC1cXHVERUVEXFx1REYwMC1cXHVERjJGXFx1REY0MC1cXHVERjQzXFx1REY2My1cXHVERjc3XFx1REY3RC1cXHVERjhGXXxcXHVEODFCW1xcdURGMDAtXFx1REY0NFxcdURGNTBcXHVERjkzLVxcdURGOUZdfFxcdUQ4MkNbXFx1REMwMFxcdURDMDFdfFxcdUQ4MkZbXFx1REMwMC1cXHVEQzZBXFx1REM3MC1cXHVEQzdDXFx1REM4MC1cXHVEQzg4XFx1REM5MC1cXHVEQzk5XXxcXHVEODM1W1xcdURDMDAtXFx1REM1NFxcdURDNTYtXFx1REM5Q1xcdURDOUVcXHVEQzlGXFx1RENBMlxcdURDQTVcXHVEQ0E2XFx1RENBOS1cXHVEQ0FDXFx1RENBRS1cXHVEQ0I5XFx1RENCQlxcdURDQkQtXFx1RENDM1xcdURDQzUtXFx1REQwNVxcdUREMDctXFx1REQwQVxcdUREMEQtXFx1REQxNFxcdUREMTYtXFx1REQxQ1xcdUREMUUtXFx1REQzOVxcdUREM0ItXFx1REQzRVxcdURENDAtXFx1REQ0NFxcdURENDZcXHVERDRBLVxcdURENTBcXHVERDUyLVxcdURFQTVcXHVERUE4LVxcdURFQzBcXHVERUMyLVxcdURFREFcXHVERURDLVxcdURFRkFcXHVERUZDLVxcdURGMTRcXHVERjE2LVxcdURGMzRcXHVERjM2LVxcdURGNEVcXHVERjUwLVxcdURGNkVcXHVERjcwLVxcdURGODhcXHVERjhBLVxcdURGQThcXHVERkFBLVxcdURGQzJcXHVERkM0LVxcdURGQ0JdfFxcdUQ4M0FbXFx1REMwMC1cXHVEQ0M0XXxcXHVEODNCW1xcdURFMDAtXFx1REUwM1xcdURFMDUtXFx1REUxRlxcdURFMjFcXHVERTIyXFx1REUyNFxcdURFMjdcXHVERTI5LVxcdURFMzJcXHVERTM0LVxcdURFMzdcXHVERTM5XFx1REUzQlxcdURFNDJcXHVERTQ3XFx1REU0OVxcdURFNEJcXHVERTRELVxcdURFNEZcXHVERTUxXFx1REU1MlxcdURFNTRcXHVERTU3XFx1REU1OVxcdURFNUJcXHVERTVEXFx1REU1RlxcdURFNjFcXHVERTYyXFx1REU2NFxcdURFNjctXFx1REU2QVxcdURFNkMtXFx1REU3MlxcdURFNzQtXFx1REU3N1xcdURFNzktXFx1REU3Q1xcdURFN0VcXHVERTgwLVxcdURFODlcXHVERThCLVxcdURFOUJcXHVERUExLVxcdURFQTNcXHVERUE1LVxcdURFQTlcXHVERUFCLVxcdURFQkJdfFxcdUQ4NjlbXFx1REMwMC1cXHVERUQ2XFx1REYwMC1cXHVERkZGXXxcXHVEODZEW1xcdURDMDAtXFx1REYzNFxcdURGNDAtXFx1REZGRl18XFx1RDg2RVtcXHVEQzAwLVxcdURDMURdfFxcdUQ4N0VbXFx1REMwMC1cXHVERTFEXS8sTm9uQXNjaWlJZGVudGlmaWVyUGFydDovW1xceEFBXFx4QjVcXHhCN1xceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzMDAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODYtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDgzLVxcdTA0ODdcXHUwNDhBLVxcdTA1MkZcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDU5MS1cXHUwNUJEXFx1MDVCRlxcdTA1QzFcXHUwNUMyXFx1MDVDNFxcdTA1QzVcXHUwNUM3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYxMC1cXHUwNjFBXFx1MDYyMC1cXHUwNjY5XFx1MDY2RS1cXHUwNkQzXFx1MDZENS1cXHUwNkRDXFx1MDZERi1cXHUwNkU4XFx1MDZFQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTAtXFx1MDc0QVxcdTA3NEQtXFx1MDdCMVxcdTA3QzAtXFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MkRcXHUwODQwLVxcdTA4NUJcXHUwOEEwLVxcdTA4QjJcXHUwOEU0LVxcdTA5NjNcXHUwOTY2LVxcdTA5NkZcXHUwOTcxLVxcdTA5ODNcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJDLVxcdTA5QzRcXHUwOUM3XFx1MDlDOFxcdTA5Q0ItXFx1MDlDRVxcdTA5RDdcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFM1xcdTA5RTYtXFx1MDlGMVxcdTBBMDEtXFx1MEEwM1xcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEEzQ1xcdTBBM0UtXFx1MEE0MlxcdTBBNDdcXHUwQTQ4XFx1MEE0Qi1cXHUwQTREXFx1MEE1MVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTY2LVxcdTBBNzVcXHUwQTgxLVxcdTBBODNcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkMtXFx1MEFDNVxcdTBBQzctXFx1MEFDOVxcdTBBQ0ItXFx1MEFDRFxcdTBBRDBcXHUwQUUwLVxcdTBBRTNcXHUwQUU2LVxcdTBBRUZcXHUwQjAxLVxcdTBCMDNcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzQy1cXHUwQjQ0XFx1MEI0N1xcdTBCNDhcXHUwQjRCLVxcdTBCNERcXHUwQjU2XFx1MEI1N1xcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYzXFx1MEI2Ni1cXHUwQjZGXFx1MEI3MVxcdTBCODJcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCQkUtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDRFxcdTBCRDBcXHUwQkQ3XFx1MEJFNi1cXHUwQkVGXFx1MEMwMC1cXHUwQzAzXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRC1cXHUwQzQ0XFx1MEM0Ni1cXHUwQzQ4XFx1MEM0QS1cXHUwQzREXFx1MEM1NVxcdTBDNTZcXHUwQzU4XFx1MEM1OVxcdTBDNjAtXFx1MEM2M1xcdTBDNjYtXFx1MEM2RlxcdTBDODEtXFx1MEM4M1xcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkMtXFx1MENDNFxcdTBDQzYtXFx1MENDOFxcdTBDQ0EtXFx1MENDRFxcdTBDRDVcXHUwQ0Q2XFx1MENERVxcdTBDRTAtXFx1MENFM1xcdTBDRTYtXFx1MENFRlxcdTBDRjFcXHUwQ0YyXFx1MEQwMS1cXHUwRDAzXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRC1cXHUwRDQ0XFx1MEQ0Ni1cXHUwRDQ4XFx1MEQ0QS1cXHUwRDRFXFx1MEQ1N1xcdTBENjAtXFx1MEQ2M1xcdTBENjYtXFx1MEQ2RlxcdTBEN0EtXFx1MEQ3RlxcdTBEODJcXHUwRDgzXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBEQ0FcXHUwRENGLVxcdTBERDRcXHUwREQ2XFx1MEREOC1cXHUwRERGXFx1MERFNi1cXHUwREVGXFx1MERGMlxcdTBERjNcXHUwRTAxLVxcdTBFM0FcXHUwRTQwLVxcdTBFNEVcXHUwRTUwLVxcdTBFNTlcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCOVxcdTBFQkItXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRUM4LVxcdTBFQ0RcXHUwRUQwLVxcdTBFRDlcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEYxOFxcdTBGMTlcXHUwRjIwLVxcdTBGMjlcXHUwRjM1XFx1MEYzN1xcdTBGMzlcXHUwRjNFLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjcxLVxcdTBGODRcXHUwRjg2LVxcdTBGOTdcXHUwRjk5LVxcdTBGQkNcXHUwRkM2XFx1MTAwMC1cXHUxMDQ5XFx1MTA1MC1cXHUxMDlEXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzNUQtXFx1MTM1RlxcdTEzNjktXFx1MTM3MVxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxNFxcdTE3MjAtXFx1MTczNFxcdTE3NDAtXFx1MTc1M1xcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3NzJcXHUxNzczXFx1MTc4MC1cXHUxN0QzXFx1MTdEN1xcdTE3RENcXHUxN0REXFx1MTdFMC1cXHUxN0U5XFx1MTgwQi1cXHUxODBEXFx1MTgxMC1cXHUxODE5XFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTkyMC1cXHUxOTJCXFx1MTkzMC1cXHUxOTNCXFx1MTk0Ni1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MTlEMC1cXHUxOURBXFx1MUEwMC1cXHUxQTFCXFx1MUEyMC1cXHUxQTVFXFx1MUE2MC1cXHUxQTdDXFx1MUE3Ri1cXHUxQTg5XFx1MUE5MC1cXHUxQTk5XFx1MUFBN1xcdTFBQjAtXFx1MUFCRFxcdTFCMDAtXFx1MUI0QlxcdTFCNTAtXFx1MUI1OVxcdTFCNkItXFx1MUI3M1xcdTFCODAtXFx1MUJGM1xcdTFDMDAtXFx1MUMzN1xcdTFDNDAtXFx1MUM0OVxcdTFDNEQtXFx1MUM3RFxcdTFDRDAtXFx1MUNEMlxcdTFDRDQtXFx1MUNGNlxcdTFDRjhcXHUxQ0Y5XFx1MUQwMC1cXHUxREY1XFx1MURGQy1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwMENcXHUyMDBEXFx1MjAzRlxcdTIwNDBcXHUyMDU0XFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMEQwLVxcdTIwRENcXHUyMEUxXFx1MjBFNS1cXHUyMEYwXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOC1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxNjAtXFx1MjE4OFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEN0YtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTJERTAtXFx1MkRGRlxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyRlxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOTktXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYyQlxcdUE2NDAtXFx1QTY2RlxcdUE2NzQtXFx1QTY3RFxcdUE2N0YtXFx1QTY5RFxcdUE2OUYtXFx1QTZGMVxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTdBRFxcdUE3QjBcXHVBN0IxXFx1QTdGNy1cXHVBODI3XFx1QTg0MC1cXHVBODczXFx1QTg4MC1cXHVBOEM0XFx1QThEMC1cXHVBOEQ5XFx1QThFMC1cXHVBOEY3XFx1QThGQlxcdUE5MDAtXFx1QTkyRFxcdUE5MzAtXFx1QTk1M1xcdUE5NjAtXFx1QTk3Q1xcdUE5ODAtXFx1QTlDMFxcdUE5Q0YtXFx1QTlEOVxcdUE5RTAtXFx1QTlGRVxcdUFBMDAtXFx1QUEzNlxcdUFBNDAtXFx1QUE0RFxcdUFBNTAtXFx1QUE1OVxcdUFBNjAtXFx1QUE3NlxcdUFBN0EtXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFRlxcdUFBRjItXFx1QUFGNlxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCMzAtXFx1QUI1QVxcdUFCNUMtXFx1QUI1RlxcdUFCNjRcXHVBQjY1XFx1QUJDMC1cXHVBQkVBXFx1QUJFQ1xcdUFCRURcXHVBQkYwLVxcdUFCRjlcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFELVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFMDAtXFx1RkUwRlxcdUZFMjAtXFx1RkUyRFxcdUZFMzNcXHVGRTM0XFx1RkU0RC1cXHVGRTRGXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYxMC1cXHVGRjE5XFx1RkYyMS1cXHVGRjNBXFx1RkYzRlxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ118XFx1RDgwMFtcXHVEQzAwLVxcdURDMEJcXHVEQzBELVxcdURDMjZcXHVEQzI4LVxcdURDM0FcXHVEQzNDXFx1REMzRFxcdURDM0YtXFx1REM0RFxcdURDNTAtXFx1REM1RFxcdURDODAtXFx1RENGQVxcdURENDAtXFx1REQ3NFxcdURERkRcXHVERTgwLVxcdURFOUNcXHVERUEwLVxcdURFRDBcXHVERUUwXFx1REYwMC1cXHVERjFGXFx1REYzMC1cXHVERjRBXFx1REY1MC1cXHVERjdBXFx1REY4MC1cXHVERjlEXFx1REZBMC1cXHVERkMzXFx1REZDOC1cXHVERkNGXFx1REZEMS1cXHVERkQ1XXxcXHVEODAxW1xcdURDMDAtXFx1REM5RFxcdURDQTAtXFx1RENBOVxcdUREMDAtXFx1REQyN1xcdUREMzAtXFx1REQ2M1xcdURFMDAtXFx1REYzNlxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY2N118XFx1RDgwMltcXHVEQzAwLVxcdURDMDVcXHVEQzA4XFx1REMwQS1cXHVEQzM1XFx1REMzN1xcdURDMzhcXHVEQzNDXFx1REMzRi1cXHVEQzU1XFx1REM2MC1cXHVEQzc2XFx1REM4MC1cXHVEQzlFXFx1REQwMC1cXHVERDE1XFx1REQyMC1cXHVERDM5XFx1REQ4MC1cXHVEREI3XFx1RERCRVxcdUREQkZcXHVERTAwLVxcdURFMDNcXHVERTA1XFx1REUwNlxcdURFMEMtXFx1REUxM1xcdURFMTUtXFx1REUxN1xcdURFMTktXFx1REUzM1xcdURFMzgtXFx1REUzQVxcdURFM0ZcXHVERTYwLVxcdURFN0NcXHVERTgwLVxcdURFOUNcXHVERUMwLVxcdURFQzdcXHVERUM5LVxcdURFRTZcXHVERjAwLVxcdURGMzVcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNzJcXHVERjgwLVxcdURGOTFdfFxcdUQ4MDNbXFx1REMwMC1cXHVEQzQ4XXxcXHVEODA0W1xcdURDMDAtXFx1REM0NlxcdURDNjYtXFx1REM2RlxcdURDN0YtXFx1RENCQVxcdURDRDAtXFx1RENFOFxcdURDRjAtXFx1RENGOVxcdUREMDAtXFx1REQzNFxcdUREMzYtXFx1REQzRlxcdURENTAtXFx1REQ3M1xcdURENzZcXHVERDgwLVxcdUREQzRcXHVEREQwLVxcdUREREFcXHVERTAwLVxcdURFMTFcXHVERTEzLVxcdURFMzdcXHVERUIwLVxcdURFRUFcXHVERUYwLVxcdURFRjlcXHVERjAxLVxcdURGMDNcXHVERjA1LVxcdURGMENcXHVERjBGXFx1REYxMFxcdURGMTMtXFx1REYyOFxcdURGMkEtXFx1REYzMFxcdURGMzJcXHVERjMzXFx1REYzNS1cXHVERjM5XFx1REYzQy1cXHVERjQ0XFx1REY0N1xcdURGNDhcXHVERjRCLVxcdURGNERcXHVERjU3XFx1REY1RC1cXHVERjYzXFx1REY2Ni1cXHVERjZDXFx1REY3MC1cXHVERjc0XXxcXHVEODA1W1xcdURDODAtXFx1RENDNVxcdURDQzdcXHVEQ0QwLVxcdURDRDlcXHVERDgwLVxcdUREQjVcXHVEREI4LVxcdUREQzBcXHVERTAwLVxcdURFNDBcXHVERTQ0XFx1REU1MC1cXHVERTU5XFx1REU4MC1cXHVERUI3XFx1REVDMC1cXHVERUM5XXxcXHVEODA2W1xcdURDQTAtXFx1RENFOVxcdURDRkZcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDhbXFx1REMwMC1cXHVERjk4XXxcXHVEODA5W1xcdURDMDAtXFx1REM2RV18W1xcdUQ4MENcXHVEODQwLVxcdUQ4NjhcXHVEODZBLVxcdUQ4NkNdW1xcdURDMDAtXFx1REZGRl18XFx1RDgwRFtcXHVEQzAwLVxcdURDMkVdfFxcdUQ4MUFbXFx1REMwMC1cXHVERTM4XFx1REU0MC1cXHVERTVFXFx1REU2MC1cXHVERTY5XFx1REVEMC1cXHVERUVEXFx1REVGMC1cXHVERUY0XFx1REYwMC1cXHVERjM2XFx1REY0MC1cXHVERjQzXFx1REY1MC1cXHVERjU5XFx1REY2My1cXHVERjc3XFx1REY3RC1cXHVERjhGXXxcXHVEODFCW1xcdURGMDAtXFx1REY0NFxcdURGNTAtXFx1REY3RVxcdURGOEYtXFx1REY5Rl18XFx1RDgyQ1tcXHVEQzAwXFx1REMwMV18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTlcXHVEQzlEXFx1REM5RV18XFx1RDgzNFtcXHVERDY1LVxcdURENjlcXHVERDZELVxcdURENzJcXHVERDdCLVxcdUREODJcXHVERDg1LVxcdUREOEJcXHVEREFBLVxcdUREQURcXHVERTQyLVxcdURFNDRdfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQlxcdURGQ0UtXFx1REZGRl18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRcXHVEQ0QwLVxcdURDRDZdfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRF18XFx1RDg3RVtcXHVEQzAwLVxcdURFMURdfFxcdURCNDBbXFx1REQwMC1cXHVEREVGXS99O2Z1bmN0aW9uIHMoZSl7cmV0dXJuIDQ4PD1lJiZlPD01N31mdW5jdGlvbiBhKGUpe3JldHVybiA0ODw9ZSYmZTw9NTd8fDk3PD1lJiZlPD0xMDJ8fDY1PD1lJiZlPD03MH1mdW5jdGlvbiBsKGUpe3JldHVybiBlPj00OCYmZTw9NTV9bj1bNTc2MCw2MTU4LDgxOTIsODE5Myw4MTk0LDgxOTUsODE5Niw4MTk3LDgxOTgsODE5OSw4MjAwLDgyMDEsODIwMiw4MjM5LDgyODcsMTIyODgsNjUyNzldO2Z1bmN0aW9uIGYoZSl7cmV0dXJuIGU9PT0zMnx8ZT09PTl8fGU9PT0xMXx8ZT09PTEyfHxlPT09MTYwfHxlPj01NzYwJiZuLmluZGV4T2YoZSk+PTB9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZT09PTEwfHxlPT09MTN8fGU9PT04MjMyfHxlPT09ODIzM31mdW5jdGlvbiBwKGUpe2lmKGU8PTY1NTM1KXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlKX12YXIgdD1TdHJpbmcuZnJvbUNoYXJDb2RlKE1hdGguZmxvb3IoKGUtNjU1MzYpLzEwMjQpKzU1Mjk2KTt2YXIgdT1TdHJpbmcuZnJvbUNoYXJDb2RlKChlLTY1NTM2KSUxMDI0KzU2MzIwKTtyZXR1cm4gdCt1fXI9bmV3IEFycmF5KDEyOCk7Zm9yKG89MDtvPDEyODsrK28pe3Jbb109bz49OTcmJm88PTEyMnx8bz49NjUmJm88PTkwfHxvPT09MzZ8fG89PT05NX1pPW5ldyBBcnJheSgxMjgpO2ZvcihvPTA7bzwxMjg7KytvKXtpW29dPW8+PTk3JiZvPD0xMjJ8fG8+PTY1JiZvPD05MHx8bz49NDgmJm88PTU3fHxvPT09MzZ8fG89PT05NX1mdW5jdGlvbiBEKGUpe3JldHVybiBlPDEyOD9yW2VdOnUuTm9uQXNjaWlJZGVudGlmaWVyU3RhcnQudGVzdChwKGUpKX1mdW5jdGlvbiBoKGUpe3JldHVybiBlPDEyOD9pW2VdOnUuTm9uQXNjaWlJZGVudGlmaWVyUGFydC50ZXN0KHAoZSkpfWZ1bmN0aW9uIG0odCl7cmV0dXJuIHQ8MTI4P3JbdF06ZS5Ob25Bc2NpaUlkZW50aWZpZXJTdGFydC50ZXN0KHAodCkpfWZ1bmN0aW9uIGQodCl7cmV0dXJuIHQ8MTI4P2lbdF06ZS5Ob25Bc2NpaUlkZW50aWZpZXJQYXJ0LnRlc3QocCh0KSl9dC5leHBvcnRzPXtpc0RlY2ltYWxEaWdpdDpzLGlzSGV4RGlnaXQ6YSxpc09jdGFsRGlnaXQ6bCxpc1doaXRlU3BhY2U6Zixpc0xpbmVUZXJtaW5hdG9yOmMsaXNJZGVudGlmaWVyU3RhcnRFUzU6RCxpc0lkZW50aWZpZXJQYXJ0RVM1OmgsaXNJZGVudGlmaWVyU3RhcnRFUzY6bSxpc0lkZW50aWZpZXJQYXJ0RVM2OmR9fSkoKX0se31dLDMyOltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHU9ZShcIi4vY29kZVwiKTtmdW5jdGlvbiBuKGUpe3N3aXRjaChlKXtjYXNlXCJpbXBsZW1lbnRzXCI6Y2FzZVwiaW50ZXJmYWNlXCI6Y2FzZVwicGFja2FnZVwiOmNhc2VcInByaXZhdGVcIjpjYXNlXCJwcm90ZWN0ZWRcIjpjYXNlXCJwdWJsaWNcIjpjYXNlXCJzdGF0aWNcIjpjYXNlXCJsZXRcIjpyZXR1cm4gdHJ1ZTtkZWZhdWx0OnJldHVybiBmYWxzZX19ZnVuY3Rpb24gcihlLHQpe2lmKCF0JiZlPT09XCJ5aWVsZFwiKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGkoZSx0KX1mdW5jdGlvbiBpKGUsdCl7aWYodCYmbihlKSl7cmV0dXJuIHRydWV9c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDI6cmV0dXJuIGU9PT1cImlmXCJ8fGU9PT1cImluXCJ8fGU9PT1cImRvXCI7Y2FzZSAzOnJldHVybiBlPT09XCJ2YXJcInx8ZT09PVwiZm9yXCJ8fGU9PT1cIm5ld1wifHxlPT09XCJ0cnlcIjtjYXNlIDQ6cmV0dXJuIGU9PT1cInRoaXNcInx8ZT09PVwiZWxzZVwifHxlPT09XCJjYXNlXCJ8fGU9PT1cInZvaWRcInx8ZT09PVwid2l0aFwifHxlPT09XCJlbnVtXCI7Y2FzZSA1OnJldHVybiBlPT09XCJ3aGlsZVwifHxlPT09XCJicmVha1wifHxlPT09XCJjYXRjaFwifHxlPT09XCJ0aHJvd1wifHxlPT09XCJjb25zdFwifHxlPT09XCJ5aWVsZFwifHxlPT09XCJjbGFzc1wifHxlPT09XCJzdXBlclwiO2Nhc2UgNjpyZXR1cm4gZT09PVwicmV0dXJuXCJ8fGU9PT1cInR5cGVvZlwifHxlPT09XCJkZWxldGVcInx8ZT09PVwic3dpdGNoXCJ8fGU9PT1cImV4cG9ydFwifHxlPT09XCJpbXBvcnRcIjtjYXNlIDc6cmV0dXJuIGU9PT1cImRlZmF1bHRcInx8ZT09PVwiZmluYWxseVwifHxlPT09XCJleHRlbmRzXCI7Y2FzZSA4OnJldHVybiBlPT09XCJmdW5jdGlvblwifHxlPT09XCJjb250aW51ZVwifHxlPT09XCJkZWJ1Z2dlclwiO2Nhc2UgMTA6cmV0dXJuIGU9PT1cImluc3RhbmNlb2ZcIjtkZWZhdWx0OnJldHVybiBmYWxzZX19ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBlPT09XCJudWxsXCJ8fGU9PT1cInRydWVcInx8ZT09PVwiZmFsc2VcInx8cihlLHQpfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4gZT09PVwibnVsbFwifHxlPT09XCJ0cnVlXCJ8fGU9PT1cImZhbHNlXCJ8fGkoZSx0KX1mdW5jdGlvbiBhKGUpe3JldHVybiBlPT09XCJldmFsXCJ8fGU9PT1cImFyZ3VtZW50c1wifWZ1bmN0aW9uIGwoZSl7dmFyIHQsbixyO2lmKGUubGVuZ3RoPT09MCl7cmV0dXJuIGZhbHNlfXI9ZS5jaGFyQ29kZUF0KDApO2lmKCF1LmlzSWRlbnRpZmllclN0YXJ0RVM1KHIpKXtyZXR1cm4gZmFsc2V9Zm9yKHQ9MSxuPWUubGVuZ3RoO3Q8bjsrK3Qpe3I9ZS5jaGFyQ29kZUF0KHQpO2lmKCF1LmlzSWRlbnRpZmllclBhcnRFUzUocikpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9ZnVuY3Rpb24gZihlLHQpe3JldHVybihlLTU1Mjk2KSoxMDI0Kyh0LTU2MzIwKSs2NTUzNn1mdW5jdGlvbiBjKGUpe3ZhciB0LG4scixpLG87aWYoZS5sZW5ndGg9PT0wKXtyZXR1cm4gZmFsc2V9bz11LmlzSWRlbnRpZmllclN0YXJ0RVM2O2Zvcih0PTAsbj1lLmxlbmd0aDt0PG47Kyt0KXtyPWUuY2hhckNvZGVBdCh0KTtpZig1NTI5Njw9ciYmcjw9NTYzMTkpeysrdDtpZih0Pj1uKXtyZXR1cm4gZmFsc2V9aT1lLmNoYXJDb2RlQXQodCk7aWYoISg1NjMyMDw9aSYmaTw9NTczNDMpKXtyZXR1cm4gZmFsc2V9cj1mKHIsaSl9aWYoIW8ocikpe3JldHVybiBmYWxzZX1vPXUuaXNJZGVudGlmaWVyUGFydEVTNn1yZXR1cm4gdHJ1ZX1mdW5jdGlvbiBwKGUsdCl7cmV0dXJuIGwoZSkmJiFvKGUsdCl9ZnVuY3Rpb24gRChlLHQpe3JldHVybiBjKGUpJiYhcyhlLHQpfXQuZXhwb3J0cz17aXNLZXl3b3JkRVM1OnIsaXNLZXl3b3JkRVM2OmksaXNSZXNlcnZlZFdvcmRFUzU6byxpc1Jlc2VydmVkV29yZEVTNjpzLGlzUmVzdHJpY3RlZFdvcmQ6YSxpc0lkZW50aWZpZXJOYW1lRVM1OmwsaXNJZGVudGlmaWVyTmFtZUVTNjpjLGlzSWRlbnRpZmllckVTNTpwLGlzSWRlbnRpZmllckVTNjpEfX0pKCl9LHtcIi4vY29kZVwiOjMxfV0sMzM6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt1LmFzdD1lKFwiLi9hc3RcIik7dS5jb2RlPWUoXCIuL2NvZGVcIik7dS5rZXl3b3JkPWUoXCIuL2tleXdvcmRcIil9KSgpfSx7XCIuL2FzdFwiOjMwLFwiLi9jb2RlXCI6MzEsXCIuL2tleXdvcmRcIjozMn1dLDM0OltmdW5jdGlvbihlLHQsdSl7dS5Tb3VyY2VNYXBHZW5lcmF0b3I9ZShcIi4vc291cmNlLW1hcC9zb3VyY2UtbWFwLWdlbmVyYXRvclwiKS5Tb3VyY2VNYXBHZW5lcmF0b3I7dS5Tb3VyY2VNYXBDb25zdW1lcj1lKFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtY29uc3VtZXJcIikuU291cmNlTWFwQ29uc3VtZXI7dS5Tb3VyY2VOb2RlPWUoXCIuL3NvdXJjZS1tYXAvc291cmNlLW5vZGVcIikuU291cmNlTm9kZX0se1wiLi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtY29uc3VtZXJcIjo0MixcIi4vc291cmNlLW1hcC9zb3VyY2UtbWFwLWdlbmVyYXRvclwiOjQzLFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1ub2RlXCI6NDR9XSwzNTpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi91dGlsXCIpO2Z1bmN0aW9uIHIoKXt0aGlzLl9hcnJheT1bXTt0aGlzLl9zZXQ9e319ci5mcm9tQXJyYXk9ZnVuY3Rpb24gaShlLHQpe3ZhciB1PW5ldyByO2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7bjxpO24rKyl7dS5hZGQoZVtuXSx0KX1yZXR1cm4gdX07ci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uIG8oZSx0KXt2YXIgdT10aGlzLmhhcyhlKTt2YXIgcj10aGlzLl9hcnJheS5sZW5ndGg7aWYoIXV8fHQpe3RoaXMuX2FycmF5LnB1c2goZSl9aWYoIXUpe3RoaXMuX3NldFtuLnRvU2V0U3RyaW5nKGUpXT1yfX07ci5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uIHMoZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLl9zZXQsbi50b1NldFN0cmluZyhlKSl9O3IucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24gYShlKXtpZih0aGlzLmhhcyhlKSl7cmV0dXJuIHRoaXMuX3NldFtuLnRvU2V0U3RyaW5nKGUpXX10aHJvdyBuZXcgRXJyb3IoJ1wiJytlKydcIiBpcyBub3QgaW4gdGhlIHNldC4nKX07ci5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24gbChlKXtpZihlPj0wJiZlPHRoaXMuX2FycmF5Lmxlbmd0aCl7cmV0dXJuIHRoaXMuX2FycmF5W2VdfXRocm93IG5ldyBFcnJvcihcIk5vIGVsZW1lbnQgaW5kZXhlZCBieSBcIitlKX07ci5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbiBmKCl7cmV0dXJuIHRoaXMuX2FycmF5LnNsaWNlKCl9O3QuQXJyYXlTZXQ9cn0pfSx7XCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDM2OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL2Jhc2U2NFwiKTt2YXIgcj01O3ZhciBpPTE8PHI7dmFyIG89aS0xO3ZhciBzPWk7ZnVuY3Rpb24gYShlKXtyZXR1cm4gZTwwPygtZTw8MSkrMTooZTw8MSkrMH1mdW5jdGlvbiBsKGUpe3ZhciB0PShlJjEpPT09MTt2YXIgdT1lPj4xO3JldHVybiB0Py11OnV9dC5lbmNvZGU9ZnVuY3Rpb24gZihlKXt2YXIgdD1cIlwiO3ZhciB1O3ZhciBpPWEoZSk7ZG97dT1pJm87aT4+Pj1yO2lmKGk+MCl7dXw9c310Kz1uLmVuY29kZSh1KX13aGlsZShpPjApO3JldHVybiB0fTt0LmRlY29kZT1mdW5jdGlvbiBjKGUsdCl7dmFyIHU9MDt2YXIgaT1lLmxlbmd0aDt2YXIgYT0wO3ZhciBmPTA7dmFyIGMscDtkb3tpZih1Pj1pKXt0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBtb3JlIGRpZ2l0cyBpbiBiYXNlIDY0IFZMUSB2YWx1ZS5cIil9cD1uLmRlY29kZShlLmNoYXJBdCh1KyspKTtjPSEhKHAmcyk7cCY9bzthPWErKHA8PGYpO2YrPXJ9d2hpbGUoYyk7dC52YWx1ZT1sKGEpO3QucmVzdD1lLnNsaWNlKHUpfX0pfSx7XCIuL2Jhc2U2NFwiOjM3LGFtZGVmaW5lOjQ2fV0sMzc6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49e307dmFyIHI9e307XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIuc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbihlLHQpe25bZV09dDtyW3RdPWV9KTt0LmVuY29kZT1mdW5jdGlvbiBpKGUpe2lmKGUgaW4gcil7cmV0dXJuIHJbZV19dGhyb3cgbmV3IFR5cGVFcnJvcihcIk11c3QgYmUgYmV0d2VlbiAwIGFuZCA2MzogXCIrZSl9O3QuZGVjb2RlPWZ1bmN0aW9uIG8oZSl7aWYoZSBpbiBuKXtyZXR1cm4gbltlXX10aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGEgdmFsaWQgYmFzZSA2NCBkaWdpdDogXCIrZSl9fSl9LHthbWRlZmluZTo0Nn1dLDM4OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3V0aWxcIik7dmFyIHI9ZShcIi4vYmluYXJ5LXNlYXJjaFwiKTt2YXIgaT1lKFwiLi9hcnJheS1zZXRcIikuQXJyYXlTZXQ7dmFyIG89ZShcIi4vYmFzZTY0LXZscVwiKTt2YXIgcz1lKFwiLi9zb3VyY2UtbWFwLWNvbnN1bWVyXCIpLlNvdXJjZU1hcENvbnN1bWVyO2Z1bmN0aW9uIGEoZSl7dmFyIHQ9ZTtpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe3Q9SlNPTi5wYXJzZShlLnJlcGxhY2UoL15cXClcXF1cXH0nLyxcIlwiKSl9dmFyIHU9bi5nZXRBcmcodCxcInZlcnNpb25cIik7dmFyIHI9bi5nZXRBcmcodCxcInNvdXJjZXNcIik7dmFyIG89bi5nZXRBcmcodCxcIm5hbWVzXCIsW10pO3ZhciBzPW4uZ2V0QXJnKHQsXCJzb3VyY2VSb290XCIsbnVsbCk7dmFyIGE9bi5nZXRBcmcodCxcInNvdXJjZXNDb250ZW50XCIsbnVsbCk7dmFyIGw9bi5nZXRBcmcodCxcIm1hcHBpbmdzXCIpO3ZhciBmPW4uZ2V0QXJnKHQsXCJmaWxlXCIsbnVsbCk7aWYodSE9dGhpcy5fdmVyc2lvbil7dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmVyc2lvbjogXCIrdSl9cj1yLm1hcChuLm5vcm1hbGl6ZSk7dGhpcy5fbmFtZXM9aS5mcm9tQXJyYXkobyx0cnVlKTt0aGlzLl9zb3VyY2VzPWkuZnJvbUFycmF5KHIsdHJ1ZSk7dGhpcy5zb3VyY2VSb290PXM7dGhpcy5zb3VyY2VzQ29udGVudD1hO3RoaXMuX21hcHBpbmdzPWw7dGhpcy5maWxlPWZ9YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuY29uc3VtZXI9czthLmZyb21Tb3VyY2VNYXA9ZnVuY3Rpb24gbChlKXt2YXIgdD1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTt0Ll9uYW1lcz1pLmZyb21BcnJheShlLl9uYW1lcy50b0FycmF5KCksdHJ1ZSk7dC5fc291cmNlcz1pLmZyb21BcnJheShlLl9zb3VyY2VzLnRvQXJyYXkoKSx0cnVlKTt0LnNvdXJjZVJvb3Q9ZS5fc291cmNlUm9vdDt0LnNvdXJjZXNDb250ZW50PWUuX2dlbmVyYXRlU291cmNlc0NvbnRlbnQodC5fc291cmNlcy50b0FycmF5KCksdC5zb3VyY2VSb290KTt0LmZpbGU9ZS5fZmlsZTt0Ll9fZ2VuZXJhdGVkTWFwcGluZ3M9ZS5fbWFwcGluZ3MudG9BcnJheSgpLnNsaWNlKCk7dC5fX29yaWdpbmFsTWFwcGluZ3M9ZS5fbWFwcGluZ3MudG9BcnJheSgpLnNsaWNlKCkuc29ydChuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtyZXR1cm4gdH07YS5wcm90b3R5cGUuX3ZlcnNpb249MztPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsXCJzb3VyY2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VzLnRvQXJyYXkoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc291cmNlUm9vdCE9bnVsbD9uLmpvaW4odGhpcy5zb3VyY2VSb290LGUpOmV9LHRoaXMpfX0pO2EucHJvdG90eXBlLl9wYXJzZU1hcHBpbmdzPWZ1bmN0aW9uIGYoZSx0KXt2YXIgdT0xO3ZhciByPTA7dmFyIGk9MDt2YXIgcz0wO3ZhciBhPTA7dmFyIGw9MDt2YXIgZj1lO3ZhciBjPXt9O3ZhciBwO3doaWxlKGYubGVuZ3RoPjApe2lmKGYuY2hhckF0KDApPT09XCI7XCIpe3UrKztmPWYuc2xpY2UoMSk7cj0wfWVsc2UgaWYoZi5jaGFyQXQoMCk9PT1cIixcIil7Zj1mLnNsaWNlKDEpfWVsc2V7cD17fTtwLmdlbmVyYXRlZExpbmU9dTtvLmRlY29kZShmLGMpO3AuZ2VuZXJhdGVkQ29sdW1uPXIrYy52YWx1ZTtyPXAuZ2VuZXJhdGVkQ29sdW1uO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPjAmJiF0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7by5kZWNvZGUoZixjKTtwLnNvdXJjZT10aGlzLl9zb3VyY2VzLmF0KGErYy52YWx1ZSk7YSs9Yy52YWx1ZTtmPWMucmVzdDtpZihmLmxlbmd0aD09PTB8fHRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXt0aHJvdyBuZXcgRXJyb3IoXCJGb3VuZCBhIHNvdXJjZSwgYnV0IG5vIGxpbmUgYW5kIGNvbHVtblwiKX1vLmRlY29kZShmLGMpO3Aub3JpZ2luYWxMaW5lPWkrYy52YWx1ZTtpPXAub3JpZ2luYWxMaW5lO3Aub3JpZ2luYWxMaW5lKz0xO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPT09MHx8dGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe3Rocm93IG5ldyBFcnJvcihcIkZvdW5kIGEgc291cmNlIGFuZCBsaW5lLCBidXQgbm8gY29sdW1uXCIpfW8uZGVjb2RlKGYsYyk7cC5vcmlnaW5hbENvbHVtbj1zK2MudmFsdWU7cz1wLm9yaWdpbmFsQ29sdW1uO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPjAmJiF0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7by5kZWNvZGUoZixjKTtwLm5hbWU9dGhpcy5fbmFtZXMuYXQobCtjLnZhbHVlKTtsKz1jLnZhbHVlO2Y9Yy5yZXN0fX10aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3MucHVzaChwKTtpZih0eXBlb2YgcC5vcmlnaW5hbExpbmU9PT1cIm51bWJlclwiKXt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncy5wdXNoKHApfX19dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzLnNvcnQobi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMpO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzLnNvcnQobi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyl9O2EucHJvdG90eXBlLl9maW5kTWFwcGluZz1mdW5jdGlvbiBjKGUsdCx1LG4saSl7aWYoZVt1XTw9MCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkxpbmUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMSwgZ290IFwiK2VbdV0pfWlmKGVbbl08MCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbHVtbiBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAwLCBnb3QgXCIrZVtuXSl9cmV0dXJuIHIuc2VhcmNoKGUsdCxpKX07YS5wcm90b3R5cGUuY29tcHV0ZUNvbHVtblNwYW5zPWZ1bmN0aW9uIHAoKXtmb3IodmFyIGU9MDtlPHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLmxlbmd0aDsrK2Upe3ZhciB0PXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzW2VdO2lmKGUrMTx0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncy5sZW5ndGgpe3ZhciB1PXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzW2UrMV07aWYodC5nZW5lcmF0ZWRMaW5lPT09dS5nZW5lcmF0ZWRMaW5lKXt0Lmxhc3RHZW5lcmF0ZWRDb2x1bW49dS5nZW5lcmF0ZWRDb2x1bW4tMTtjb250aW51ZX19dC5sYXN0R2VuZXJhdGVkQ29sdW1uPUluZmluaXR5fX07YS5wcm90b3R5cGUub3JpZ2luYWxQb3NpdGlvbkZvcj1mdW5jdGlvbiBEKGUpe3ZhciB0PXtnZW5lcmF0ZWRMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLGdlbmVyYXRlZENvbHVtbjpuLmdldEFyZyhlLFwiY29sdW1uXCIpfTt2YXIgdT10aGlzLl9maW5kTWFwcGluZyh0LHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLFwiZ2VuZXJhdGVkTGluZVwiLFwiZ2VuZXJhdGVkQ29sdW1uXCIsbi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMpO2lmKHU+PTApe3ZhciByPXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzW3VdO2lmKHIuZ2VuZXJhdGVkTGluZT09PXQuZ2VuZXJhdGVkTGluZSl7dmFyIGk9bi5nZXRBcmcocixcInNvdXJjZVwiLG51bGwpO2lmKGkhPW51bGwmJnRoaXMuc291cmNlUm9vdCE9bnVsbCl7aT1uLmpvaW4odGhpcy5zb3VyY2VSb290LGkpfXJldHVybntzb3VyY2U6aSxsaW5lOm4uZ2V0QXJnKHIsXCJvcmlnaW5hbExpbmVcIixudWxsKSxjb2x1bW46bi5nZXRBcmcocixcIm9yaWdpbmFsQ29sdW1uXCIsbnVsbCksbmFtZTpuLmdldEFyZyhyLFwibmFtZVwiLG51bGwpfX19cmV0dXJue3NvdXJjZTpudWxsLGxpbmU6bnVsbCxjb2x1bW46bnVsbCxuYW1lOm51bGx9fTthLnByb3RvdHlwZS5zb3VyY2VDb250ZW50Rm9yPWZ1bmN0aW9uIGgoZSx0KXtpZighdGhpcy5zb3VyY2VzQ29udGVudCl7cmV0dXJuIG51bGx9aWYodGhpcy5zb3VyY2VSb290IT1udWxsKXtlPW4ucmVsYXRpdmUodGhpcy5zb3VyY2VSb290LGUpfWlmKHRoaXMuX3NvdXJjZXMuaGFzKGUpKXtyZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFt0aGlzLl9zb3VyY2VzLmluZGV4T2YoZSldfXZhciB1O2lmKHRoaXMuc291cmNlUm9vdCE9bnVsbCYmKHU9bi51cmxQYXJzZSh0aGlzLnNvdXJjZVJvb3QpKSl7dmFyIHI9ZS5yZXBsYWNlKC9eZmlsZTpcXC9cXC8vLFwiXCIpO2lmKHUuc2NoZW1lPT1cImZpbGVcIiYmdGhpcy5fc291cmNlcy5oYXMocikpe3JldHVybiB0aGlzLnNvdXJjZXNDb250ZW50W3RoaXMuX3NvdXJjZXMuaW5kZXhPZihyKV19aWYoKCF1LnBhdGh8fHUucGF0aD09XCIvXCIpJiZ0aGlzLl9zb3VyY2VzLmhhcyhcIi9cIitlKSl7cmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKFwiL1wiK2UpXX19aWYodCl7cmV0dXJuIG51bGx9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ1wiJytlKydcIiBpcyBub3QgaW4gdGhlIFNvdXJjZU1hcC4nKX19O2EucHJvdG90eXBlLmdlbmVyYXRlZFBvc2l0aW9uRm9yPWZ1bmN0aW9uIG0oZSl7dmFyIHQ9e3NvdXJjZTpuLmdldEFyZyhlLFwic291cmNlXCIpLG9yaWdpbmFsTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxvcmlnaW5hbENvbHVtbjpuLmdldEFyZyhlLFwiY29sdW1uXCIpfTtpZih0aGlzLnNvdXJjZVJvb3QhPW51bGwpe3Quc291cmNlPW4ucmVsYXRpdmUodGhpcy5zb3VyY2VSb290LHQuc291cmNlKX12YXIgdT10aGlzLl9maW5kTWFwcGluZyh0LHRoaXMuX29yaWdpbmFsTWFwcGluZ3MsXCJvcmlnaW5hbExpbmVcIixcIm9yaWdpbmFsQ29sdW1uXCIsbi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyk7aWYodT49MCl7dmFyIHI9dGhpcy5fb3JpZ2luYWxNYXBwaW5nc1t1XTtyZXR1cm57bGluZTpuLmdldEFyZyhyLFwiZ2VuZXJhdGVkTGluZVwiLG51bGwpLGNvbHVtbjpuLmdldEFyZyhyLFwiZ2VuZXJhdGVkQ29sdW1uXCIsbnVsbCksbGFzdENvbHVtbjpuLmdldEFyZyhyLFwibGFzdEdlbmVyYXRlZENvbHVtblwiLG51bGwpfX1yZXR1cm57bGluZTpudWxsLGNvbHVtbjpudWxsLGxhc3RDb2x1bW46bnVsbH19O3QuQmFzaWNTb3VyY2VNYXBDb25zdW1lcj1hfSl9LHtcIi4vYXJyYXktc2V0XCI6MzUsXCIuL2Jhc2U2NC12bHFcIjozNixcIi4vYmluYXJ5LXNlYXJjaFwiOjM5LFwiLi9zb3VyY2UtbWFwLWNvbnN1bWVyXCI6NDIsXCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDM5OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe2Z1bmN0aW9uIG4oZSx0LHUscixpKXt2YXIgbz1NYXRoLmZsb29yKCh0LWUpLzIpK2U7dmFyIHM9aSh1LHJbb10sdHJ1ZSk7aWYocz09PTApe3JldHVybiBvfWVsc2UgaWYocz4wKXtpZih0LW8+MSl7cmV0dXJuIG4obyx0LHUscixpKX1yZXR1cm4gb31lbHNle2lmKG8tZT4xKXtyZXR1cm4gbihlLG8sdSxyLGkpfXJldHVybiBlPDA/LTE6ZX19dC5zZWFyY2g9ZnVuY3Rpb24gcihlLHQsdSl7aWYodC5sZW5ndGg9PT0wKXtyZXR1cm4tMX1yZXR1cm4gbigtMSx0Lmxlbmd0aCxlLHQsdSl9fSl9LHthbWRlZmluZTo0Nn1dLDQwOltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3V0aWxcIik7dmFyIHI9ZShcIi4vYmluYXJ5LXNlYXJjaFwiKTt2YXIgaT1lKFwiLi9zb3VyY2UtbWFwLWNvbnN1bWVyXCIpLlNvdXJjZU1hcENvbnN1bWVyO3ZhciBvPWUoXCIuL2Jhc2ljLXNvdXJjZS1tYXAtY29uc3VtZXJcIikuQmFzaWNTb3VyY2VNYXBDb25zdW1lcjtmdW5jdGlvbiBzKGUpe3ZhciB0PWU7aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0PUpTT04ucGFyc2UoZS5yZXBsYWNlKC9eXFwpXFxdXFx9Jy8sXCJcIikpfXZhciB1PW4uZ2V0QXJnKHQsXCJ2ZXJzaW9uXCIpO3ZhciByPW4uZ2V0QXJnKHQsXCJzZWN0aW9uc1wiKTtpZih1IT10aGlzLl92ZXJzaW9uKXt0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCB2ZXJzaW9uOiBcIit1KX12YXIgbz17bGluZTotMSxjb2x1bW46MH07dGhpcy5fc2VjdGlvbnM9ci5tYXAoZnVuY3Rpb24oZSl7aWYoZS51cmwpe3Rocm93IG5ldyBFcnJvcihcIlN1cHBvcnQgZm9yIHVybCBmaWVsZCBpbiBzZWN0aW9ucyBub3QgaW1wbGVtZW50ZWQuXCIpfXZhciB0PW4uZ2V0QXJnKGUsXCJvZmZzZXRcIik7dmFyIHU9bi5nZXRBcmcodCxcImxpbmVcIik7dmFyIHI9bi5nZXRBcmcodCxcImNvbHVtblwiKTtpZih1PG8ubGluZXx8dT09PW8ubGluZSYmcjxvLmNvbHVtbil7dGhyb3cgbmV3IEVycm9yKFwiU2VjdGlvbiBvZmZzZXRzIG11c3QgYmUgb3JkZXJlZCBhbmQgbm9uLW92ZXJsYXBwaW5nLlwiKX1vPXQ7cmV0dXJue2dlbmVyYXRlZE9mZnNldDp7Z2VuZXJhdGVkTGluZTp1KzEsZ2VuZXJhdGVkQ29sdW1uOnIrMX0sY29uc3VtZXI6bmV3IGkobi5nZXRBcmcoZSxcIm1hcFwiKSl9fSl9cy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShpLnByb3RvdHlwZSk7cy5wcm90b3R5cGUuY29uc3RydWN0b3I9aTtzLnByb3RvdHlwZS5fdmVyc2lvbj0zO09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcInNvdXJjZXNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7dCsrKXtmb3IodmFyIHU9MDt1PHRoaXMuX3NlY3Rpb25zW3RdLmNvbnN1bWVyLnNvdXJjZXMubGVuZ3RoO3UrKyl7ZS5wdXNoKHRoaXMuX3NlY3Rpb25zW3RdLmNvbnN1bWVyLnNvdXJjZXNbdV0pfX1yZXR1cm4gZX19KTtzLnByb3RvdHlwZS5vcmlnaW5hbFBvc2l0aW9uRm9yPWZ1bmN0aW9uIGEoZSl7dmFyIHQ9e2dlbmVyYXRlZExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksZ2VuZXJhdGVkQ29sdW1uOm4uZ2V0QXJnKGUsXCJjb2x1bW5cIil9O3ZhciB1PXIuc2VhcmNoKHQsdGhpcy5fc2VjdGlvbnMsZnVuY3Rpb24oZSx0KXt2YXIgdT1lLmdlbmVyYXRlZExpbmUtdC5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZTtpZih1KXtyZXR1cm4gdX1yZXR1cm4gZS5nZW5lcmF0ZWRDb2x1bW4tdC5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkQ29sdW1ufSk7dmFyIGk9dGhpcy5fc2VjdGlvbnNbdV07aWYoIWkpe3JldHVybntzb3VyY2U6bnVsbCxsaW5lOm51bGwsY29sdW1uOm51bGwsbmFtZTpudWxsfX1yZXR1cm4gaS5jb25zdW1lci5vcmlnaW5hbFBvc2l0aW9uRm9yKHtsaW5lOnQuZ2VuZXJhdGVkTGluZS0oaS5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZS0xKSxjb2x1bW46dC5nZW5lcmF0ZWRDb2x1bW4tKGkuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmU9PT10LmdlbmVyYXRlZExpbmU/aS5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkQ29sdW1uLTE6MCl9KX07cy5wcm90b3R5cGUuc291cmNlQ29udGVudEZvcj1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciB1PTA7dTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7dSsrKXt2YXIgbj10aGlzLl9zZWN0aW9uc1t1XTt2YXIgcj1uLmNvbnN1bWVyLnNvdXJjZUNvbnRlbnRGb3IoZSx0cnVlKTtpZihyKXtyZXR1cm4gcn19aWYodCl7cmV0dXJuIG51bGx9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ1wiJytlKydcIiBpcyBub3QgaW4gdGhlIFNvdXJjZU1hcC4nKX19O3MucHJvdG90eXBlLmdlbmVyYXRlZFBvc2l0aW9uRm9yPWZ1bmN0aW9uIGYoZSl7Zm9yKHZhciB0PTA7dDx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7dCsrKXt2YXIgdT10aGlzLl9zZWN0aW9uc1t0XTtpZih1LmNvbnN1bWVyLnNvdXJjZXMuaW5kZXhPZihuLmdldEFyZyhlLFwic291cmNlXCIpKT09PS0xKXtjb250aW51ZX12YXIgcj11LmNvbnN1bWVyLmdlbmVyYXRlZFBvc2l0aW9uRm9yKGUpO2lmKHIpe3ZhciBpPXtsaW5lOnIubGluZSsodS5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZS0xKSxjb2x1bW46ci5jb2x1bW4rKHUuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmU9PT1yLmxpbmU/dS5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkQ29sdW1uLTE6MCl9O3JldHVybiBpfX1yZXR1cm57bGluZTpudWxsLGNvbHVtbjpudWxsfX07cy5wcm90b3R5cGUuX3BhcnNlTWFwcGluZ3M9ZnVuY3Rpb24gYyhlLHQpe3RoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncz1bXTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncz1bXTtmb3IodmFyIHU9MDt1PHRoaXMuX3NlY3Rpb25zLmxlbmd0aDt1Kyspe3ZhciByPXRoaXMuX3NlY3Rpb25zW3VdO3ZhciBpPXIuY29uc3VtZXIuX2dlbmVyYXRlZE1hcHBpbmdzO2Zvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcz1pW3VdO3ZhciBhPXMuc291cmNlO3ZhciBsPXIuY29uc3VtZXIuc291cmNlUm9vdDtpZihhIT1udWxsJiZsIT1udWxsKXthPW4uam9pbihsLGEpfXZhciBmPXtzb3VyY2U6YSxnZW5lcmF0ZWRMaW5lOnMuZ2VuZXJhdGVkTGluZSsoci5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZS0xKSxnZW5lcmF0ZWRDb2x1bW46cy5jb2x1bW4rKHIuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmU9PT1zLmdlbmVyYXRlZExpbmUpP3IuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZENvbHVtbi0xOjAsb3JpZ2luYWxMaW5lOnMub3JpZ2luYWxMaW5lLG9yaWdpbmFsQ29sdW1uOnMub3JpZ2luYWxDb2x1bW4sbmFtZTpzLm5hbWV9O3RoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncy5wdXNoKGYpO2lmKHR5cGVvZiBmLm9yaWdpbmFsTGluZT09PVwibnVtYmVyXCIpe3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzLnB1c2goZil9fX10aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3Muc29ydChuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyk7dGhpcy5fX29yaWdpbmFsTWFwcGluZ3Muc29ydChuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKX07dC5JbmRleGVkU291cmNlTWFwQ29uc3VtZXI9c30pfSx7XCIuL2Jhc2ljLXNvdXJjZS1tYXAtY29uc3VtZXJcIjozOCxcIi4vYmluYXJ5LXNlYXJjaFwiOjM5LFwiLi9zb3VyY2UtbWFwLWNvbnN1bWVyXCI6NDIsXCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDQxOltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3V0aWxcIik7ZnVuY3Rpb24gcihlLHQpe3ZhciB1PWUuZ2VuZXJhdGVkTGluZTt2YXIgcj10LmdlbmVyYXRlZExpbmU7dmFyIGk9ZS5nZW5lcmF0ZWRDb2x1bW47dmFyIG89dC5nZW5lcmF0ZWRDb2x1bW47cmV0dXJuIHI+dXx8cj09dSYmbz49aXx8bi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMoZSx0KTw9MH1mdW5jdGlvbiBpKCl7dGhpcy5fYXJyYXk9W107dGhpcy5fc29ydGVkPXRydWU7dGhpcy5fbGFzdD17Z2VuZXJhdGVkTGluZTotMSxnZW5lcmF0ZWRDb2x1bW46MH19aS5wcm90b3R5cGUudW5zb3J0ZWRGb3JFYWNoPWZ1bmN0aW9uIG8oZSx0KXt0aGlzLl9hcnJheS5mb3JFYWNoKGUsdCl9O2kucHJvdG90eXBlLmFkZD1mdW5jdGlvbiBzKGUpe3ZhciB0O2lmKHIodGhpcy5fbGFzdCxlKSl7dGhpcy5fbGFzdD1lO3RoaXMuX2FycmF5LnB1c2goZSl9ZWxzZXt0aGlzLl9zb3J0ZWQ9ZmFsc2U7dGhpcy5fYXJyYXkucHVzaChlKX19O2kucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24gYSgpe2lmKCF0aGlzLl9zb3J0ZWQpe3RoaXMuX2FycmF5LnNvcnQobi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMpO3RoaXMuX3NvcnRlZD10cnVlfXJldHVybiB0aGlzLl9hcnJheX07dC5NYXBwaW5nTGlzdD1pfSl9LHtcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sNDI6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vdXRpbFwiKTtmdW5jdGlvbiByKHQpe3ZhciB1PXQ7aWYodHlwZW9mIHQ9PT1cInN0cmluZ1wiKXt1PUpTT04ucGFyc2UodC5yZXBsYWNlKC9eXFwpXFxdXFx9Jy8sXCJcIikpfWlmKHUuc2VjdGlvbnMhPW51bGwpe3ZhciBuPWUoXCIuL2luZGV4ZWQtc291cmNlLW1hcC1jb25zdW1lclwiKTtyZXR1cm4gbmV3IG4uSW5kZXhlZFNvdXJjZU1hcENvbnN1bWVyKHUpfWVsc2V7dmFyIHI9ZShcIi4vYmFzaWMtc291cmNlLW1hcC1jb25zdW1lclwiKTtyZXR1cm4gbmV3IHIuQmFzaWNTb3VyY2VNYXBDb25zdW1lcih1KX19ci5mcm9tU291cmNlTWFwPWZ1bmN0aW9uKHQpe3ZhciB1PWUoXCIuL2Jhc2ljLXNvdXJjZS1tYXAtY29uc3VtZXJcIik7cmV0dXJuIHUuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5mcm9tU291cmNlTWFwKHQpfTtyLnByb3RvdHlwZS5fdmVyc2lvbj0zO3IucHJvdG90eXBlLl9fZ2VuZXJhdGVkTWFwcGluZ3M9bnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJfZ2VuZXJhdGVkTWFwcGluZ3NcIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncyl7dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzPVtdO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzPVtdO3RoaXMuX3BhcnNlTWFwcGluZ3ModGhpcy5fbWFwcGluZ3MsdGhpcy5zb3VyY2VSb290KX1yZXR1cm4gdGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzfX0pO3IucHJvdG90eXBlLl9fb3JpZ2luYWxNYXBwaW5ncz1udWxsO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIl9vcmlnaW5hbE1hcHBpbmdzXCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncyl7dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzPVtdO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzPVtdO3RoaXMuX3BhcnNlTWFwcGluZ3ModGhpcy5fbWFwcGluZ3MsdGhpcy5zb3VyY2VSb290KX1yZXR1cm4gdGhpcy5fX29yaWdpbmFsTWFwcGluZ3N9fSk7ci5wcm90b3R5cGUuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yPWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5jaGFyQXQoMCk7cmV0dXJuIHQ9PT1cIjtcInx8dD09PVwiLFwifTtyLnByb3RvdHlwZS5fcGFyc2VNYXBwaW5ncz1mdW5jdGlvbiBvKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiU3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudCBfcGFyc2VNYXBwaW5nc1wiKX07ci5HRU5FUkFURURfT1JERVI9MTtyLk9SSUdJTkFMX09SREVSPTI7ci5wcm90b3R5cGUuZWFjaE1hcHBpbmc9ZnVuY3Rpb24gcyhlLHQsdSl7dmFyIGk9dHx8bnVsbDt2YXIgbz11fHxyLkdFTkVSQVRFRF9PUkRFUjt2YXIgcztzd2l0Y2gobyl7Y2FzZSByLkdFTkVSQVRFRF9PUkRFUjpzPXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzO2JyZWFrO2Nhc2Ugci5PUklHSU5BTF9PUkRFUjpzPXRoaXMuX29yaWdpbmFsTWFwcGluZ3M7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG9yZGVyIG9mIGl0ZXJhdGlvbi5cIil9dmFyIGE9dGhpcy5zb3VyY2VSb290O3MubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc291cmNlO2lmKHQhPW51bGwmJmEhPW51bGwpe3Q9bi5qb2luKGEsdCl9cmV0dXJue3NvdXJjZTp0LGdlbmVyYXRlZExpbmU6ZS5nZW5lcmF0ZWRMaW5lLGdlbmVyYXRlZENvbHVtbjplLmdlbmVyYXRlZENvbHVtbixvcmlnaW5hbExpbmU6ZS5vcmlnaW5hbExpbmUsb3JpZ2luYWxDb2x1bW46ZS5vcmlnaW5hbENvbHVtbixuYW1lOmUubmFtZX19KS5mb3JFYWNoKGUsaSl9O3IucHJvdG90eXBlLmFsbEdlbmVyYXRlZFBvc2l0aW9uc0Zvcj1mdW5jdGlvbiBhKGUpe3ZhciB0PXtzb3VyY2U6bi5nZXRBcmcoZSxcInNvdXJjZVwiKSxvcmlnaW5hbExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksb3JpZ2luYWxDb2x1bW46SW5maW5pdHl9O2lmKHRoaXMuc291cmNlUm9vdCE9bnVsbCl7dC5zb3VyY2U9bi5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsdC5zb3VyY2UpfXZhciB1PVtdO3ZhciByPXRoaXMuX2ZpbmRNYXBwaW5nKHQsdGhpcy5fb3JpZ2luYWxNYXBwaW5ncyxcIm9yaWdpbmFsTGluZVwiLFwib3JpZ2luYWxDb2x1bW5cIixuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtpZihyPj0wKXt2YXIgaT10aGlzLl9vcmlnaW5hbE1hcHBpbmdzW3JdO3doaWxlKGkmJmkub3JpZ2luYWxMaW5lPT09dC5vcmlnaW5hbExpbmUpe3UucHVzaCh7bGluZTpuLmdldEFyZyhpLFwiZ2VuZXJhdGVkTGluZVwiLG51bGwpLGNvbHVtbjpuLmdldEFyZyhpLFwiZ2VuZXJhdGVkQ29sdW1uXCIsbnVsbCksbGFzdENvbHVtbjpuLmdldEFyZyhpLFwibGFzdEdlbmVyYXRlZENvbHVtblwiLG51bGwpfSk7aT10aGlzLl9vcmlnaW5hbE1hcHBpbmdzWy0tcl19fXJldHVybiB1LnJldmVyc2UoKX07dC5Tb3VyY2VNYXBDb25zdW1lcj1yfSl9LHtcIi4vYmFzaWMtc291cmNlLW1hcC1jb25zdW1lclwiOjM4LFwiLi9pbmRleGVkLXNvdXJjZS1tYXAtY29uc3VtZXJcIjo0MCxcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sNDM6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vYmFzZTY0LXZscVwiKTt2YXIgcj1lKFwiLi91dGlsXCIpO1xudmFyIGk9ZShcIi4vYXJyYXktc2V0XCIpLkFycmF5U2V0O3ZhciBvPWUoXCIuL21hcHBpbmctbGlzdFwiKS5NYXBwaW5nTGlzdDtmdW5jdGlvbiBzKGUpe2lmKCFlKXtlPXt9fXRoaXMuX2ZpbGU9ci5nZXRBcmcoZSxcImZpbGVcIixudWxsKTt0aGlzLl9zb3VyY2VSb290PXIuZ2V0QXJnKGUsXCJzb3VyY2VSb290XCIsbnVsbCk7dGhpcy5fc2tpcFZhbGlkYXRpb249ci5nZXRBcmcoZSxcInNraXBWYWxpZGF0aW9uXCIsZmFsc2UpO3RoaXMuX3NvdXJjZXM9bmV3IGk7dGhpcy5fbmFtZXM9bmV3IGk7dGhpcy5fbWFwcGluZ3M9bmV3IG87dGhpcy5fc291cmNlc0NvbnRlbnRzPW51bGx9cy5wcm90b3R5cGUuX3ZlcnNpb249MztzLmZyb21Tb3VyY2VNYXA9ZnVuY3Rpb24gYShlKXt2YXIgdD1lLnNvdXJjZVJvb3Q7dmFyIHU9bmV3IHMoe2ZpbGU6ZS5maWxlLHNvdXJjZVJvb3Q6dH0pO2UuZWFjaE1hcHBpbmcoZnVuY3Rpb24oZSl7dmFyIG49e2dlbmVyYXRlZDp7bGluZTplLmdlbmVyYXRlZExpbmUsY29sdW1uOmUuZ2VuZXJhdGVkQ29sdW1ufX07aWYoZS5zb3VyY2UhPW51bGwpe24uc291cmNlPWUuc291cmNlO2lmKHQhPW51bGwpe24uc291cmNlPXIucmVsYXRpdmUodCxuLnNvdXJjZSl9bi5vcmlnaW5hbD17bGluZTplLm9yaWdpbmFsTGluZSxjb2x1bW46ZS5vcmlnaW5hbENvbHVtbn07aWYoZS5uYW1lIT1udWxsKXtuLm5hbWU9ZS5uYW1lfX11LmFkZE1hcHBpbmcobil9KTtlLnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lLnNvdXJjZUNvbnRlbnRGb3IodCk7aWYobiE9bnVsbCl7dS5zZXRTb3VyY2VDb250ZW50KHQsbil9fSk7cmV0dXJuIHV9O3MucHJvdG90eXBlLmFkZE1hcHBpbmc9ZnVuY3Rpb24gbChlKXt2YXIgdD1yLmdldEFyZyhlLFwiZ2VuZXJhdGVkXCIpO3ZhciB1PXIuZ2V0QXJnKGUsXCJvcmlnaW5hbFwiLG51bGwpO3ZhciBuPXIuZ2V0QXJnKGUsXCJzb3VyY2VcIixudWxsKTt2YXIgaT1yLmdldEFyZyhlLFwibmFtZVwiLG51bGwpO2lmKCF0aGlzLl9za2lwVmFsaWRhdGlvbil7dGhpcy5fdmFsaWRhdGVNYXBwaW5nKHQsdSxuLGkpfWlmKG4hPW51bGwmJiF0aGlzLl9zb3VyY2VzLmhhcyhuKSl7dGhpcy5fc291cmNlcy5hZGQobil9aWYoaSE9bnVsbCYmIXRoaXMuX25hbWVzLmhhcyhpKSl7dGhpcy5fbmFtZXMuYWRkKGkpfXRoaXMuX21hcHBpbmdzLmFkZCh7Z2VuZXJhdGVkTGluZTp0LmxpbmUsZ2VuZXJhdGVkQ29sdW1uOnQuY29sdW1uLG9yaWdpbmFsTGluZTp1IT1udWxsJiZ1LmxpbmUsb3JpZ2luYWxDb2x1bW46dSE9bnVsbCYmdS5jb2x1bW4sc291cmNlOm4sbmFtZTppfSl9O3MucHJvdG90eXBlLnNldFNvdXJjZUNvbnRlbnQ9ZnVuY3Rpb24gZihlLHQpe3ZhciB1PWU7aWYodGhpcy5fc291cmNlUm9vdCE9bnVsbCl7dT1yLnJlbGF0aXZlKHRoaXMuX3NvdXJjZVJvb3QsdSl9aWYodCE9bnVsbCl7aWYoIXRoaXMuX3NvdXJjZXNDb250ZW50cyl7dGhpcy5fc291cmNlc0NvbnRlbnRzPXt9fXRoaXMuX3NvdXJjZXNDb250ZW50c1tyLnRvU2V0U3RyaW5nKHUpXT10fWVsc2UgaWYodGhpcy5fc291cmNlc0NvbnRlbnRzKXtkZWxldGUgdGhpcy5fc291cmNlc0NvbnRlbnRzW3IudG9TZXRTdHJpbmcodSldO2lmKE9iamVjdC5rZXlzKHRoaXMuX3NvdXJjZXNDb250ZW50cykubGVuZ3RoPT09MCl7dGhpcy5fc291cmNlc0NvbnRlbnRzPW51bGx9fX07cy5wcm90b3R5cGUuYXBwbHlTb3VyY2VNYXA9ZnVuY3Rpb24gYyhlLHQsdSl7dmFyIG49dDtpZih0PT1udWxsKXtpZihlLmZpbGU9PW51bGwpe3Rocm93IG5ldyBFcnJvcihcIlNvdXJjZU1hcEdlbmVyYXRvci5wcm90b3R5cGUuYXBwbHlTb3VyY2VNYXAgcmVxdWlyZXMgZWl0aGVyIGFuIGV4cGxpY2l0IHNvdXJjZSBmaWxlLCBcIisnb3IgdGhlIHNvdXJjZSBtYXBcXCdzIFwiZmlsZVwiIHByb3BlcnR5LiBCb3RoIHdlcmUgb21pdHRlZC4nKX1uPWUuZmlsZX12YXIgbz10aGlzLl9zb3VyY2VSb290O2lmKG8hPW51bGwpe249ci5yZWxhdGl2ZShvLG4pfXZhciBzPW5ldyBpO3ZhciBhPW5ldyBpO3RoaXMuX21hcHBpbmdzLnVuc29ydGVkRm9yRWFjaChmdW5jdGlvbih0KXtpZih0LnNvdXJjZT09PW4mJnQub3JpZ2luYWxMaW5lIT1udWxsKXt2YXIgaT1lLm9yaWdpbmFsUG9zaXRpb25Gb3Ioe2xpbmU6dC5vcmlnaW5hbExpbmUsY29sdW1uOnQub3JpZ2luYWxDb2x1bW59KTtpZihpLnNvdXJjZSE9bnVsbCl7dC5zb3VyY2U9aS5zb3VyY2U7aWYodSE9bnVsbCl7dC5zb3VyY2U9ci5qb2luKHUsdC5zb3VyY2UpfWlmKG8hPW51bGwpe3Quc291cmNlPXIucmVsYXRpdmUobyx0LnNvdXJjZSl9dC5vcmlnaW5hbExpbmU9aS5saW5lO3Qub3JpZ2luYWxDb2x1bW49aS5jb2x1bW47aWYoaS5uYW1lIT1udWxsKXt0Lm5hbWU9aS5uYW1lfX19dmFyIGw9dC5zb3VyY2U7aWYobCE9bnVsbCYmIXMuaGFzKGwpKXtzLmFkZChsKX12YXIgZj10Lm5hbWU7aWYoZiE9bnVsbCYmIWEuaGFzKGYpKXthLmFkZChmKX19LHRoaXMpO3RoaXMuX3NvdXJjZXM9czt0aGlzLl9uYW1lcz1hO2Uuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuc291cmNlQ29udGVudEZvcih0KTtpZihuIT1udWxsKXtpZih1IT1udWxsKXt0PXIuam9pbih1LHQpfWlmKG8hPW51bGwpe3Q9ci5yZWxhdGl2ZShvLHQpfXRoaXMuc2V0U291cmNlQ29udGVudCh0LG4pfX0sdGhpcyl9O3MucHJvdG90eXBlLl92YWxpZGF0ZU1hcHBpbmc9ZnVuY3Rpb24gcChlLHQsdSxuKXtpZihlJiZcImxpbmVcImluIGUmJlwiY29sdW1uXCJpbiBlJiZlLmxpbmU+MCYmZS5jb2x1bW4+PTAmJiF0JiYhdSYmIW4pe3JldHVybn1lbHNlIGlmKGUmJlwibGluZVwiaW4gZSYmXCJjb2x1bW5cImluIGUmJnQmJlwibGluZVwiaW4gdCYmXCJjb2x1bW5cImluIHQmJmUubGluZT4wJiZlLmNvbHVtbj49MCYmdC5saW5lPjAmJnQuY29sdW1uPj0wJiZ1KXtyZXR1cm59ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG1hcHBpbmc6IFwiK0pTT04uc3RyaW5naWZ5KHtnZW5lcmF0ZWQ6ZSxzb3VyY2U6dSxvcmlnaW5hbDp0LG5hbWU6bn0pKX19O3MucHJvdG90eXBlLl9zZXJpYWxpemVNYXBwaW5ncz1mdW5jdGlvbiBEKCl7dmFyIGU9MDt2YXIgdD0xO3ZhciB1PTA7dmFyIGk9MDt2YXIgbz0wO3ZhciBzPTA7dmFyIGE9XCJcIjt2YXIgbDt2YXIgZj10aGlzLl9tYXBwaW5ncy50b0FycmF5KCk7Zm9yKHZhciBjPTAscD1mLmxlbmd0aDtjPHA7YysrKXtsPWZbY107aWYobC5nZW5lcmF0ZWRMaW5lIT09dCl7ZT0wO3doaWxlKGwuZ2VuZXJhdGVkTGluZSE9PXQpe2ErPVwiO1wiO3QrK319ZWxzZXtpZihjPjApe2lmKCFyLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyhsLGZbYy0xXSkpe2NvbnRpbnVlfWErPVwiLFwifX1hKz1uLmVuY29kZShsLmdlbmVyYXRlZENvbHVtbi1lKTtlPWwuZ2VuZXJhdGVkQ29sdW1uO2lmKGwuc291cmNlIT1udWxsKXthKz1uLmVuY29kZSh0aGlzLl9zb3VyY2VzLmluZGV4T2YobC5zb3VyY2UpLXMpO3M9dGhpcy5fc291cmNlcy5pbmRleE9mKGwuc291cmNlKTthKz1uLmVuY29kZShsLm9yaWdpbmFsTGluZS0xLWkpO2k9bC5vcmlnaW5hbExpbmUtMTthKz1uLmVuY29kZShsLm9yaWdpbmFsQ29sdW1uLXUpO3U9bC5vcmlnaW5hbENvbHVtbjtpZihsLm5hbWUhPW51bGwpe2ErPW4uZW5jb2RlKHRoaXMuX25hbWVzLmluZGV4T2YobC5uYW1lKS1vKTtvPXRoaXMuX25hbWVzLmluZGV4T2YobC5uYW1lKX19fXJldHVybiBhfTtzLnByb3RvdHlwZS5fZ2VuZXJhdGVTb3VyY2VzQ29udGVudD1mdW5jdGlvbiBoKGUsdCl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9zb3VyY2VzQ29udGVudHMpe3JldHVybiBudWxsfWlmKHQhPW51bGwpe2U9ci5yZWxhdGl2ZSh0LGUpfXZhciB1PXIudG9TZXRTdHJpbmcoZSk7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLl9zb3VyY2VzQ29udGVudHMsdSk/dGhpcy5fc291cmNlc0NvbnRlbnRzW3VdOm51bGx9LHRoaXMpfTtzLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24gbSgpe3ZhciBlPXt2ZXJzaW9uOnRoaXMuX3ZlcnNpb24sc291cmNlczp0aGlzLl9zb3VyY2VzLnRvQXJyYXkoKSxuYW1lczp0aGlzLl9uYW1lcy50b0FycmF5KCksbWFwcGluZ3M6dGhpcy5fc2VyaWFsaXplTWFwcGluZ3MoKX07aWYodGhpcy5fZmlsZSE9bnVsbCl7ZS5maWxlPXRoaXMuX2ZpbGV9aWYodGhpcy5fc291cmNlUm9vdCE9bnVsbCl7ZS5zb3VyY2VSb290PXRoaXMuX3NvdXJjZVJvb3R9aWYodGhpcy5fc291cmNlc0NvbnRlbnRzKXtlLnNvdXJjZXNDb250ZW50PXRoaXMuX2dlbmVyYXRlU291cmNlc0NvbnRlbnQoZS5zb3VyY2VzLGUuc291cmNlUm9vdCl9cmV0dXJuIGV9O3MucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uIGQoKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyl9O3QuU291cmNlTWFwR2VuZXJhdG9yPXN9KX0se1wiLi9hcnJheS1zZXRcIjozNSxcIi4vYmFzZTY0LXZscVwiOjM2LFwiLi9tYXBwaW5nLWxpc3RcIjo0MSxcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sNDQ6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vc291cmNlLW1hcC1nZW5lcmF0b3JcIikuU291cmNlTWFwR2VuZXJhdG9yO3ZhciByPWUoXCIuL3V0aWxcIik7dmFyIGk9LyhcXHI/XFxuKS87dmFyIG89MTA7dmFyIHM9XCIkJCRpc1NvdXJjZU5vZGUkJCRcIjtmdW5jdGlvbiBhKGUsdCx1LG4scil7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnNvdXJjZUNvbnRlbnRzPXt9O3RoaXMubGluZT1lPT1udWxsP251bGw6ZTt0aGlzLmNvbHVtbj10PT1udWxsP251bGw6dDt0aGlzLnNvdXJjZT11PT1udWxsP251bGw6dTt0aGlzLm5hbWU9cj09bnVsbD9udWxsOnI7dGhpc1tzXT10cnVlO2lmKG4hPW51bGwpdGhpcy5hZGQobil9YS5mcm9tU3RyaW5nV2l0aFNvdXJjZU1hcD1mdW5jdGlvbiBsKGUsdCx1KXt2YXIgbj1uZXcgYTt2YXIgbz1lLnNwbGl0KGkpO3ZhciBzPWZ1bmN0aW9uKCl7dmFyIGU9by5zaGlmdCgpO3ZhciB0PW8uc2hpZnQoKXx8XCJcIjtyZXR1cm4gZSt0fTt2YXIgbD0xLGY9MDt2YXIgYz1udWxsO3QuZWFjaE1hcHBpbmcoZnVuY3Rpb24oZSl7aWYoYyE9PW51bGwpe2lmKGw8ZS5nZW5lcmF0ZWRMaW5lKXt2YXIgdD1cIlwiO3AoYyxzKCkpO2wrKztmPTB9ZWxzZXt2YXIgdT1vWzBdO3ZhciB0PXUuc3Vic3RyKDAsZS5nZW5lcmF0ZWRDb2x1bW4tZik7b1swXT11LnN1YnN0cihlLmdlbmVyYXRlZENvbHVtbi1mKTtmPWUuZ2VuZXJhdGVkQ29sdW1uO3AoYyx0KTtjPWU7cmV0dXJufX13aGlsZShsPGUuZ2VuZXJhdGVkTGluZSl7bi5hZGQocygpKTtsKyt9aWYoZjxlLmdlbmVyYXRlZENvbHVtbil7dmFyIHU9b1swXTtuLmFkZCh1LnN1YnN0cigwLGUuZ2VuZXJhdGVkQ29sdW1uKSk7b1swXT11LnN1YnN0cihlLmdlbmVyYXRlZENvbHVtbik7Zj1lLmdlbmVyYXRlZENvbHVtbn1jPWV9LHRoaXMpO2lmKG8ubGVuZ3RoPjApe2lmKGMpe3AoYyxzKCkpfW4uYWRkKG8uam9pbihcIlwiKSl9dC5zb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGk9dC5zb3VyY2VDb250ZW50Rm9yKGUpO2lmKGkhPW51bGwpe2lmKHUhPW51bGwpe2U9ci5qb2luKHUsZSl9bi5zZXRTb3VyY2VDb250ZW50KGUsaSl9fSk7cmV0dXJuIG47ZnVuY3Rpb24gcChlLHQpe2lmKGU9PT1udWxsfHxlLnNvdXJjZT09PXVuZGVmaW5lZCl7bi5hZGQodCl9ZWxzZXt2YXIgaT11P3Iuam9pbih1LGUuc291cmNlKTplLnNvdXJjZTtuLmFkZChuZXcgYShlLm9yaWdpbmFsTGluZSxlLm9yaWdpbmFsQ29sdW1uLGksdCxlLm5hbWUpKX19fTthLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24gZihlKXtpZihBcnJheS5pc0FycmF5KGUpKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5hZGQoZSl9LHRoaXMpfWVsc2UgaWYoZVtzXXx8dHlwZW9mIGU9PT1cInN0cmluZ1wiKXtpZihlKXt0aGlzLmNoaWxkcmVuLnB1c2goZSl9fWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGEgU291cmNlTm9kZSwgc3RyaW5nLCBvciBhbiBhcnJheSBvZiBTb3VyY2VOb2RlcyBhbmQgc3RyaW5ncy4gR290IFwiK2UpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5wcmVwZW5kPWZ1bmN0aW9uIGMoZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PWUubGVuZ3RoLTE7dD49MDt0LS0pe3RoaXMucHJlcGVuZChlW3RdKX19ZWxzZSBpZihlW3NdfHx0eXBlb2YgZT09PVwic3RyaW5nXCIpe3RoaXMuY2hpbGRyZW4udW5zaGlmdChlKX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBhIFNvdXJjZU5vZGUsIHN0cmluZywgb3IgYW4gYXJyYXkgb2YgU291cmNlTm9kZXMgYW5kIHN0cmluZ3MuIEdvdCBcIitlKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUud2Fsaz1mdW5jdGlvbiBwKGUpe3ZhciB0O2Zvcih2YXIgdT0wLG49dGhpcy5jaGlsZHJlbi5sZW5ndGg7dTxuO3UrKyl7dD10aGlzLmNoaWxkcmVuW3VdO2lmKHRbc10pe3Qud2FsayhlKX1lbHNle2lmKHQhPT1cIlwiKXtlKHQse3NvdXJjZTp0aGlzLnNvdXJjZSxsaW5lOnRoaXMubGluZSxjb2x1bW46dGhpcy5jb2x1bW4sbmFtZTp0aGlzLm5hbWV9KX19fX07YS5wcm90b3R5cGUuam9pbj1mdW5jdGlvbiBEKGUpe3ZhciB0O3ZhciB1O3ZhciBuPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2lmKG4+MCl7dD1bXTtmb3IodT0wO3U8bi0xO3UrKyl7dC5wdXNoKHRoaXMuY2hpbGRyZW5bdV0pO3QucHVzaChlKX10LnB1c2godGhpcy5jaGlsZHJlblt1XSk7dGhpcy5jaGlsZHJlbj10fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5yZXBsYWNlUmlnaHQ9ZnVuY3Rpb24gaChlLHQpe3ZhciB1PXRoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGgtMV07aWYodVtzXSl7dS5yZXBsYWNlUmlnaHQoZSx0KX1lbHNlIGlmKHR5cGVvZiB1PT09XCJzdHJpbmdcIil7dGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXT11LnJlcGxhY2UoZSx0KX1lbHNle3RoaXMuY2hpbGRyZW4ucHVzaChcIlwiLnJlcGxhY2UoZSx0KSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldFNvdXJjZUNvbnRlbnQ9ZnVuY3Rpb24gbShlLHQpe3RoaXMuc291cmNlQ29udGVudHNbci50b1NldFN0cmluZyhlKV09dH07YS5wcm90b3R5cGUud2Fsa1NvdXJjZUNvbnRlbnRzPWZ1bmN0aW9uIGQoZSl7Zm9yKHZhciB0PTAsdT10aGlzLmNoaWxkcmVuLmxlbmd0aDt0PHU7dCsrKXtpZih0aGlzLmNoaWxkcmVuW3RdW3NdKXt0aGlzLmNoaWxkcmVuW3RdLndhbGtTb3VyY2VDb250ZW50cyhlKX19dmFyIG49T2JqZWN0LmtleXModGhpcy5zb3VyY2VDb250ZW50cyk7Zm9yKHZhciB0PTAsdT1uLmxlbmd0aDt0PHU7dCsrKXtlKHIuZnJvbVNldFN0cmluZyhuW3RdKSx0aGlzLnNvdXJjZUNvbnRlbnRzW25bdF1dKX19O2EucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uIEEoKXt2YXIgZT1cIlwiO3RoaXMud2FsayhmdW5jdGlvbih0KXtlKz10fSk7cmV0dXJuIGV9O2EucHJvdG90eXBlLnRvU3RyaW5nV2l0aFNvdXJjZU1hcD1mdW5jdGlvbiBDKGUpe3ZhciB0PXtjb2RlOlwiXCIsbGluZToxLGNvbHVtbjowfTt2YXIgdT1uZXcgbihlKTt2YXIgcj1mYWxzZTt2YXIgaT1udWxsO3ZhciBzPW51bGw7dmFyIGE9bnVsbDt2YXIgbD1udWxsO3RoaXMud2FsayhmdW5jdGlvbihlLG4pe3QuY29kZSs9ZTtpZihuLnNvdXJjZSE9PW51bGwmJm4ubGluZSE9PW51bGwmJm4uY29sdW1uIT09bnVsbCl7aWYoaSE9PW4uc291cmNlfHxzIT09bi5saW5lfHxhIT09bi5jb2x1bW58fGwhPT1uLm5hbWUpe3UuYWRkTWFwcGluZyh7c291cmNlOm4uc291cmNlLG9yaWdpbmFsOntsaW5lOm4ubGluZSxjb2x1bW46bi5jb2x1bW59LGdlbmVyYXRlZDp7bGluZTp0LmxpbmUsY29sdW1uOnQuY29sdW1ufSxuYW1lOm4ubmFtZX0pfWk9bi5zb3VyY2U7cz1uLmxpbmU7YT1uLmNvbHVtbjtsPW4ubmFtZTtyPXRydWV9ZWxzZSBpZihyKXt1LmFkZE1hcHBpbmcoe2dlbmVyYXRlZDp7bGluZTp0LmxpbmUsY29sdW1uOnQuY29sdW1ufX0pO2k9bnVsbDtyPWZhbHNlfWZvcih2YXIgZj0wLGM9ZS5sZW5ndGg7ZjxjO2YrKyl7aWYoZS5jaGFyQ29kZUF0KGYpPT09byl7dC5saW5lKys7dC5jb2x1bW49MDtpZihmKzE9PT1jKXtpPW51bGw7cj1mYWxzZX1lbHNlIGlmKHIpe3UuYWRkTWFwcGluZyh7c291cmNlOm4uc291cmNlLG9yaWdpbmFsOntsaW5lOm4ubGluZSxjb2x1bW46bi5jb2x1bW59LGdlbmVyYXRlZDp7bGluZTp0LmxpbmUsY29sdW1uOnQuY29sdW1ufSxuYW1lOm4ubmFtZX0pfX1lbHNle3QuY29sdW1uKyt9fX0pO3RoaXMud2Fsa1NvdXJjZUNvbnRlbnRzKGZ1bmN0aW9uKGUsdCl7dS5zZXRTb3VyY2VDb250ZW50KGUsdCl9KTtyZXR1cm57Y29kZTp0LmNvZGUsbWFwOnV9fTt0LlNvdXJjZU5vZGU9YX0pfSx7XCIuL3NvdXJjZS1tYXAtZ2VuZXJhdG9yXCI6NDMsXCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDQ1OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe2Z1bmN0aW9uIG4oZSx0LHUpe2lmKHQgaW4gZSl7cmV0dXJuIGVbdF19ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09Myl7cmV0dXJuIHV9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ1wiJyt0KydcIiBpcyBhIHJlcXVpcmVkIGFyZ3VtZW50LicpfX10LmdldEFyZz1uO3ZhciByPS9eKD86KFtcXHcrXFwtLl0rKTopP1xcL1xcLyg/OihcXHcrOlxcdyspQCk/KFtcXHcuXSopKD86OihcXGQrKSk/KFxcUyopJC87dmFyIGk9L15kYXRhOi4rXFwsLiskLztmdW5jdGlvbiBvKGUpe3ZhciB0PWUubWF0Y2gocik7aWYoIXQpe3JldHVybiBudWxsfXJldHVybntzY2hlbWU6dFsxXSxhdXRoOnRbMl0saG9zdDp0WzNdLHBvcnQ6dFs0XSxwYXRoOnRbNV19fXQudXJsUGFyc2U9bztmdW5jdGlvbiBzKGUpe3ZhciB0PVwiXCI7aWYoZS5zY2hlbWUpe3QrPWUuc2NoZW1lK1wiOlwifXQrPVwiLy9cIjtpZihlLmF1dGgpe3QrPWUuYXV0aCtcIkBcIn1pZihlLmhvc3Qpe3QrPWUuaG9zdH1pZihlLnBvcnQpe3QrPVwiOlwiK2UucG9ydH1pZihlLnBhdGgpe3QrPWUucGF0aH1yZXR1cm4gdH10LnVybEdlbmVyYXRlPXM7ZnVuY3Rpb24gYShlKXt2YXIgdD1lO3ZhciB1PW8oZSk7aWYodSl7aWYoIXUucGF0aCl7cmV0dXJuIGV9dD11LnBhdGh9dmFyIG49dC5jaGFyQXQoMCk9PT1cIi9cIjt2YXIgcj10LnNwbGl0KC9cXC8rLyk7Zm9yKHZhciBpLGE9MCxsPXIubGVuZ3RoLTE7bD49MDtsLS0pe2k9cltsXTtpZihpPT09XCIuXCIpe3Iuc3BsaWNlKGwsMSl9ZWxzZSBpZihpPT09XCIuLlwiKXthKyt9ZWxzZSBpZihhPjApe2lmKGk9PT1cIlwiKXtyLnNwbGljZShsKzEsYSk7YT0wfWVsc2V7ci5zcGxpY2UobCwyKTthLS19fX10PXIuam9pbihcIi9cIik7aWYodD09PVwiXCIpe3Q9bj9cIi9cIjpcIi5cIn1pZih1KXt1LnBhdGg9dDtyZXR1cm4gcyh1KX1yZXR1cm4gdH10Lm5vcm1hbGl6ZT1hO2Z1bmN0aW9uIGwoZSx0KXtpZihlPT09XCJcIil7ZT1cIi5cIn1pZih0PT09XCJcIil7dD1cIi5cIn12YXIgdT1vKHQpO3ZhciBuPW8oZSk7aWYobil7ZT1uLnBhdGh8fFwiL1wifWlmKHUmJiF1LnNjaGVtZSl7aWYobil7dS5zY2hlbWU9bi5zY2hlbWV9cmV0dXJuIHModSl9aWYodXx8dC5tYXRjaChpKSl7cmV0dXJuIHR9aWYobiYmIW4uaG9zdCYmIW4ucGF0aCl7bi5ob3N0PXQ7cmV0dXJuIHMobil9dmFyIHI9dC5jaGFyQXQoMCk9PT1cIi9cIj90OmEoZS5yZXBsYWNlKC9cXC8rJC8sXCJcIikrXCIvXCIrdCk7aWYobil7bi5wYXRoPXI7cmV0dXJuIHMobil9cmV0dXJuIHJ9dC5qb2luPWw7ZnVuY3Rpb24gZihlLHQpe2lmKGU9PT1cIlwiKXtlPVwiLlwifWU9ZS5yZXBsYWNlKC9cXC8kLyxcIlwiKTt2YXIgdT1vKGUpO2lmKHQuY2hhckF0KDApPT1cIi9cIiYmdSYmdS5wYXRoPT1cIi9cIil7cmV0dXJuIHQuc2xpY2UoMSl9cmV0dXJuIHQuaW5kZXhPZihlK1wiL1wiKT09PTA/dC5zdWJzdHIoZS5sZW5ndGgrMSk6dH10LnJlbGF0aXZlPWY7ZnVuY3Rpb24gYyhlKXtyZXR1cm5cIiRcIitlfXQudG9TZXRTdHJpbmc9YztmdW5jdGlvbiBwKGUpe3JldHVybiBlLnN1YnN0cigxKX10LmZyb21TZXRTdHJpbmc9cDtmdW5jdGlvbiBEKGUsdCl7dmFyIHU9ZXx8XCJcIjt2YXIgbj10fHxcIlwiO3JldHVybih1Pm4pLSh1PG4pfWZ1bmN0aW9uIGgoZSx0LHUpe3ZhciBuO249RChlLnNvdXJjZSx0LnNvdXJjZSk7aWYobil7cmV0dXJuIG59bj1lLm9yaWdpbmFsTGluZS10Lm9yaWdpbmFsTGluZTtpZihuKXtyZXR1cm4gbn1uPWUub3JpZ2luYWxDb2x1bW4tdC5vcmlnaW5hbENvbHVtbjtpZihufHx1KXtyZXR1cm4gbn1uPUQoZS5uYW1lLHQubmFtZSk7aWYobil7cmV0dXJuIG59bj1lLmdlbmVyYXRlZExpbmUtdC5nZW5lcmF0ZWRMaW5lO2lmKG4pe3JldHVybiBufXJldHVybiBlLmdlbmVyYXRlZENvbHVtbi10LmdlbmVyYXRlZENvbHVtbn10LmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zPWg7ZnVuY3Rpb24gbShlLHQsdSl7dmFyIG47bj1lLmdlbmVyYXRlZExpbmUtdC5nZW5lcmF0ZWRMaW5lO2lmKG4pe3JldHVybiBufW49ZS5nZW5lcmF0ZWRDb2x1bW4tdC5nZW5lcmF0ZWRDb2x1bW47aWYobnx8dSl7cmV0dXJuIG59bj1EKGUuc291cmNlLHQuc291cmNlKTtpZihuKXtyZXR1cm4gbn1uPWUub3JpZ2luYWxMaW5lLXQub3JpZ2luYWxMaW5lO2lmKG4pe3JldHVybiBufW49ZS5vcmlnaW5hbENvbHVtbi10Lm9yaWdpbmFsQ29sdW1uO2lmKG4pe3JldHVybiBufXJldHVybiBEKGUubmFtZSx0Lm5hbWUpfXQuY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zPW19KX0se2FtZGVmaW5lOjQ2fV0sNDY6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24odSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9e30sbz17fSxzPWZhbHNlLGE9ZShcInBhdGhcIiksbCxmO2Z1bmN0aW9uIGMoZSl7dmFyIHQsdTtmb3IodD0wO2VbdF07dCs9MSl7dT1lW3RdO2lmKHU9PT1cIi5cIil7ZS5zcGxpY2UodCwxKTt0LT0xfWVsc2UgaWYodT09PVwiLi5cIil7aWYodD09PTEmJihlWzJdPT09XCIuLlwifHxlWzBdPT09XCIuLlwiKSl7YnJlYWt9ZWxzZSBpZih0PjApe2Uuc3BsaWNlKHQtMSwyKTt0LT0yfX19fWZ1bmN0aW9uIHAoZSx0KXt2YXIgdTtpZihlJiZlLmNoYXJBdCgwKT09PVwiLlwiKXtpZih0KXt1PXQuc3BsaXQoXCIvXCIpO3U9dS5zbGljZSgwLHUubGVuZ3RoLTEpO3U9dS5jb25jYXQoZS5zcGxpdChcIi9cIikpO2ModSk7ZT11LmpvaW4oXCIvXCIpfX1yZXR1cm4gZX1mdW5jdGlvbiBEKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gcCh0LGUpfX1mdW5jdGlvbiBoKGUpe2Z1bmN0aW9uIHQodCl7b1tlXT10fXQuZnJvbVRleHQ9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJhbWRlZmluZSBkb2VzIG5vdCBpbXBsZW1lbnQgbG9hZC5mcm9tVGV4dFwiKX07cmV0dXJuIHR9bD1mdW5jdGlvbihlLHQsbixyKXtmdW5jdGlvbiBpKGksbyl7aWYodHlwZW9mIGk9PT1cInN0cmluZ1wiKXtyZXR1cm4gZihlLHQsbixpLHIpfWVsc2V7aT1pLm1hcChmdW5jdGlvbih1KXtyZXR1cm4gZihlLHQsbix1LHIpfSk7aWYobyl7dS5uZXh0VGljayhmdW5jdGlvbigpe28uYXBwbHkobnVsbCxpKX0pfX19aS50b1VybD1mdW5jdGlvbihlKXtpZihlLmluZGV4T2YoXCIuXCIpPT09MCl7cmV0dXJuIHAoZSxhLmRpcm5hbWUobi5maWxlbmFtZSkpfWVsc2V7cmV0dXJuIGV9fTtyZXR1cm4gaX07cj1yfHxmdW5jdGlvbiBBKCl7cmV0dXJuIHQucmVxdWlyZS5hcHBseSh0LGFyZ3VtZW50cyl9O2Z1bmN0aW9uIG0oZSx1LGkpe3ZhciBhLGYsYyxwO2lmKGUpe2Y9b1tlXT17fTtjPXtpZDplLHVyaTpuLGV4cG9ydHM6Zn07YT1sKHIsZixjLGUpfWVsc2V7aWYocyl7dGhyb3cgbmV3IEVycm9yKFwiYW1kZWZpbmUgd2l0aCBubyBtb2R1bGUgSUQgY2Fubm90IGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBwZXIgZmlsZS5cIil9cz10cnVlO2Y9dC5leHBvcnRzO2M9dDthPWwocixmLGMsdC5pZCl9aWYodSl7dT11Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0pfWlmKHR5cGVvZiBpPT09XCJmdW5jdGlvblwiKXtwPWkuYXBwbHkoYy5leHBvcnRzLHUpfWVsc2V7cD1pfWlmKHAhPT11bmRlZmluZWQpe2MuZXhwb3J0cz1wO2lmKGUpe29bZV09Yy5leHBvcnRzfX19Zj1mdW5jdGlvbihlLHQsdSxuLHIpe3ZhciBzPW4uaW5kZXhPZihcIiFcIiksYT1uLGMsZDtpZihzPT09LTEpe249cChuLHIpO2lmKG49PT1cInJlcXVpcmVcIil7cmV0dXJuIGwoZSx0LHUscil9ZWxzZSBpZihuPT09XCJleHBvcnRzXCIpe3JldHVybiB0fWVsc2UgaWYobj09PVwibW9kdWxlXCIpe3JldHVybiB1fWVsc2UgaWYoby5oYXNPd25Qcm9wZXJ0eShuKSl7cmV0dXJuIG9bbl19ZWxzZSBpZihpW25dKXttLmFwcGx5KG51bGwsaVtuXSk7cmV0dXJuIG9bbl19ZWxzZXtpZihlKXtyZXR1cm4gZShhKX1lbHNle3Rocm93IG5ldyBFcnJvcihcIk5vIG1vZHVsZSB3aXRoIElEOiBcIituKX19fWVsc2V7Yz1uLnN1YnN0cmluZygwLHMpO249bi5zdWJzdHJpbmcocysxLG4ubGVuZ3RoKTtkPWYoZSx0LHUsYyxyKTtpZihkLm5vcm1hbGl6ZSl7bj1kLm5vcm1hbGl6ZShuLEQocikpfWVsc2V7bj1wKG4scil9aWYob1tuXSl7cmV0dXJuIG9bbl19ZWxzZXtkLmxvYWQobixsKGUsdCx1LHIpLGgobikse30pO3JldHVybiBvW25dfX19O2Z1bmN0aW9uIGQoZSx0LHUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe3U9dDt0PWU7ZT11bmRlZmluZWR9ZWxzZSBpZih0eXBlb2YgZSE9PVwic3RyaW5nXCIpe3U9ZTtlPXQ9dW5kZWZpbmVkfWlmKHQmJiFBcnJheS5pc0FycmF5KHQpKXt1PXQ7dD11bmRlZmluZWR9aWYoIXQpe3Q9W1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdfWlmKGUpe2lbZV09W2UsdCx1XX1lbHNle20oZSx0LHUpfX1kLnJlcXVpcmU9ZnVuY3Rpb24oZSl7aWYob1tlXSl7cmV0dXJuIG9bZV19aWYoaVtlXSl7bS5hcHBseShudWxsLGlbZV0pO3JldHVybiBvW2VdfX07ZC5hbWQ9e307cmV0dXJuIGR9dC5leHBvcnRzPXJ9KS5jYWxsKHRoaXMsZShcIl9wcm9jZXNzXCIpLFwiL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbm9kZV9tb2R1bGVzL2FtZGVmaW5lL2FtZGVmaW5lLmpzXCIpfSx7X3Byb2Nlc3M6MjYscGF0aDoyNX1dLDQ3OltmdW5jdGlvbihlLHQsdSl7dC5leHBvcnRzPXtuYW1lOlwiZXNjb2RlZ2VuXCIsZGVzY3JpcHRpb246XCJFQ01BU2NyaXB0IGNvZGUgZ2VuZXJhdG9yXCIsaG9tZXBhZ2U6XCJodHRwOi8vZ2l0aHViLmNvbS9lc3Rvb2xzL2VzY29kZWdlblwiLG1haW46XCJlc2NvZGVnZW4uanNcIixiaW46e2VzZ2VuZXJhdGU6XCIuL2Jpbi9lc2dlbmVyYXRlLmpzXCIsZXNjb2RlZ2VuOlwiLi9iaW4vZXNjb2RlZ2VuLmpzXCJ9LGZpbGVzOltcIkxJQ0VOU0UuQlNEXCIsXCJMSUNFTlNFLnNvdXJjZS1tYXBcIixcIlJFQURNRS5tZFwiLFwiYmluXCIsXCJlc2NvZGVnZW4uanNcIixcInBhY2thZ2UuanNvblwiXSx2ZXJzaW9uOlwiMS43LjBcIixlbmdpbmVzOntub2RlOlwiPj0wLjEwLjBcIn0sbWFpbnRhaW5lcnM6W3tuYW1lOlwiY29uc3RlbGxhdGlvblwiLGVtYWlsOlwidXRhdGFuZS50ZWFAZ21haWwuY29tXCJ9LHtuYW1lOlwibWljaGFlbGZpY2FycmFcIixlbWFpbDpcIm5wbUBtaWNoYWVsLmZpY2FycmEubWVcIn1dLHJlcG9zaXRvcnk6e3R5cGU6XCJnaXRcIix1cmw6XCJnaXQrc3NoOi8vZ2l0QGdpdGh1Yi5jb20vZXN0b29scy9lc2NvZGVnZW4uZ2l0XCJ9LGRlcGVuZGVuY2llczp7ZXN0cmF2ZXJzZTpcIl4xLjkuMVwiLGVzdXRpbHM6XCJeMi4wLjJcIixlc3ByaW1hOlwiXjEuMi4yXCIsb3B0aW9uYXRvcjpcIl4wLjUuMFwiLFwic291cmNlLW1hcFwiOlwifjAuMi4wXCJ9LG9wdGlvbmFsRGVwZW5kZW5jaWVzOntcInNvdXJjZS1tYXBcIjpcIn4wLjIuMFwifSxkZXZEZXBlbmRlbmNpZXM6e1wiYWNvcm4tNnRvNVwiOlwiXjAuMTEuMS0yNVwiLGJsdWViaXJkOlwiXjIuMy4xMVwiLFwiYm93ZXItcmVnaXN0cnktY2xpZW50XCI6XCJeMC4yLjFcIixjaGFpOlwiXjEuMTAuMFwiLFwiY29tbW9uanMtZXZlcnl3aGVyZVwiOlwiXjAuOS43XCIsXCJlc3ByaW1hLW1velwiOlwiMS4wLjAtZGV2LWhhcm1vbnktbW96XCIsZ3VscDpcIl4zLjguMTBcIixcImd1bHAtZXNsaW50XCI6XCJeMC4yLjBcIixcImd1bHAtbW9jaGFcIjpcIl4yLjAuMFwiLHNlbXZlcjpcIl40LjEuMFwifSxsaWNlbnNlOlwiQlNELTItQ2xhdXNlXCIsc2NyaXB0czp7dGVzdDpcImd1bHAgdHJhdmlzXCIsXCJ1bml0LXRlc3RcIjpcImd1bHAgdGVzdFwiLGxpbnQ6XCJndWxwIGxpbnRcIixyZWxlYXNlOlwibm9kZSB0b29scy9yZWxlYXNlLmpzXCIsXCJidWlsZC1taW5cIjpcImNqc2lmeSAtbWEgcGF0aDogdG9vbHMvZW50cnktcG9pbnQuanMgPiBlc2NvZGVnZW4uYnJvd3Nlci5taW4uanNcIixidWlsZDpcImNqc2lmeSAtYSBwYXRoOiB0b29scy9lbnRyeS1wb2ludC5qcyA+IGVzY29kZWdlbi5icm93c2VyLmpzXCJ9LGdpdEhlYWQ6XCI1ZGFiYmM1NDQxYjM5NmZlYmQwYWZiOTI1MmE5YWZkZmE3MDUxNjU3XCIsYnVnczp7dXJsOlwiaHR0cHM6Ly9naXRodWIuY29tL2VzdG9vbHMvZXNjb2RlZ2VuL2lzc3Vlc1wifSxfaWQ6XCJlc2NvZGVnZW5AMS43LjBcIixfc2hhc3VtOlwiNGUyOTlkOGNjMzMwODdiN2YyOWMxOWUyYjllODQzNjJhYmUzNTQ1M1wiLF9mcm9tOlwiZXNjb2RlZ2VuQD49MS42LjAgPDIuMC4wXCIsX25wbVZlcnNpb246XCIyLjExLjNcIixfbm9kZVZlcnNpb246XCIwLjEyLjdcIixfbnBtVXNlcjp7bmFtZTpcIm1pY2hhZWxmaWNhcnJhXCIsZW1haWw6XCJucG1AbWljaGFlbC5maWNhcnJhLm1lXCJ9LGRpc3Q6e3NoYXN1bTpcIjRlMjk5ZDhjYzMzMDg3YjdmMjljMTllMmI5ZTg0MzYyYWJlMzU0NTNcIix0YXJiYWxsOlwiaHR0cDovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9lc2NvZGVnZW4vLS9lc2NvZGVnZW4tMS43LjAudGd6XCJ9LGRpcmVjdG9yaWVzOnt9LF9yZXNvbHZlZDpcImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL2VzY29kZWdlbi8tL2VzY29kZWdlbi0xLjcuMC50Z3pcIixyZWFkbWU6XCJFUlJPUjogTm8gUkVBRE1FIGRhdGEgZm91bmQhXCJ9fSx7fV0sNDg6W2Z1bmN0aW9uKHQsdSxuKXsoZnVuY3Rpb24odCx1KXtcInVzZSBzdHJpY3RcIjtpZih0eXBlb2YgZT09PVwiZnVuY3Rpb25cIiYmZS5hbWQpe2UoW1wiZXhwb3J0c1wiXSx1KX1lbHNlIGlmKHR5cGVvZiBuIT09XCJ1bmRlZmluZWRcIil7dShuKX1lbHNle3UodC5lc3ByaW1hPXt9KX19KSh0aGlzLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0LHUsbixyLGksbyxzLGEsbCxmLGMscCxELGgsbSxkLEEsQyxFLEYsZyx5LEIsdixiLFMseDt0PXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjgsUmVndWxhckV4cHJlc3Npb246OSxUZW1wbGF0ZToxMH07dT17fTt1W3QuQm9vbGVhbkxpdGVyYWxdPVwiQm9vbGVhblwiO3VbdC5FT0ZdPVwiPGVuZD5cIjt1W3QuSWRlbnRpZmllcl09XCJJZGVudGlmaWVyXCI7dVt0LktleXdvcmRdPVwiS2V5d29yZFwiO3VbdC5OdWxsTGl0ZXJhbF09XCJOdWxsXCI7dVt0Lk51bWVyaWNMaXRlcmFsXT1cIk51bWVyaWNcIjt1W3QuUHVuY3R1YXRvcl09XCJQdW5jdHVhdG9yXCI7dVt0LlN0cmluZ0xpdGVyYWxdPVwiU3RyaW5nXCI7dVt0LlJlZ3VsYXJFeHByZXNzaW9uXT1cIlJlZ3VsYXJFeHByZXNzaW9uXCI7dVt0LlRlbXBsYXRlXT1cIlRlbXBsYXRlXCI7bj1bXCIoXCIsXCJ7XCIsXCJbXCIsXCJpblwiLFwidHlwZW9mXCIsXCJpbnN0YW5jZW9mXCIsXCJuZXdcIixcInJldHVyblwiLFwiY2FzZVwiLFwiZGVsZXRlXCIsXCJ0aHJvd1wiLFwidm9pZFwiLFwiPVwiLFwiKz1cIixcIi09XCIsXCIqPVwiLFwiLz1cIixcIiU9XCIsXCI8PD1cIixcIj4+PVwiLFwiPj4+PVwiLFwiJj1cIixcInw9XCIsXCJePVwiLFwiLFwiLFwiK1wiLFwiLVwiLFwiKlwiLFwiL1wiLFwiJVwiLFwiKytcIixcIi0tXCIsXCI8PFwiLFwiPj5cIixcIj4+PlwiLFwiJlwiLFwifFwiLFwiXlwiLFwiIVwiLFwiflwiLFwiJiZcIixcInx8XCIsXCI/XCIsXCI6XCIsXCI9PT1cIixcIj09XCIsXCI+PVwiLFwiPD1cIixcIjxcIixcIj5cIixcIiE9XCIsXCIhPT1cIl07cj17QXNzaWdubWVudEV4cHJlc3Npb246XCJBc3NpZ25tZW50RXhwcmVzc2lvblwiLEFzc2lnbm1lbnRQYXR0ZXJuOlwiQXNzaWdubWVudFBhdHRlcm5cIixBcnJheUV4cHJlc3Npb246XCJBcnJheUV4cHJlc3Npb25cIixBcnJheVBhdHRlcm46XCJBcnJheVBhdHRlcm5cIixBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjpcIkFycm93RnVuY3Rpb25FeHByZXNzaW9uXCIsQmxvY2tTdGF0ZW1lbnQ6XCJCbG9ja1N0YXRlbWVudFwiLEJpbmFyeUV4cHJlc3Npb246XCJCaW5hcnlFeHByZXNzaW9uXCIsQnJlYWtTdGF0ZW1lbnQ6XCJCcmVha1N0YXRlbWVudFwiLENhbGxFeHByZXNzaW9uOlwiQ2FsbEV4cHJlc3Npb25cIixDYXRjaENsYXVzZTpcIkNhdGNoQ2xhdXNlXCIsQ2xhc3NCb2R5OlwiQ2xhc3NCb2R5XCIsQ2xhc3NEZWNsYXJhdGlvbjpcIkNsYXNzRGVjbGFyYXRpb25cIixDbGFzc0V4cHJlc3Npb246XCJDbGFzc0V4cHJlc3Npb25cIixDb25kaXRpb25hbEV4cHJlc3Npb246XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIixDb250aW51ZVN0YXRlbWVudDpcIkNvbnRpbnVlU3RhdGVtZW50XCIsRG9XaGlsZVN0YXRlbWVudDpcIkRvV2hpbGVTdGF0ZW1lbnRcIixEZWJ1Z2dlclN0YXRlbWVudDpcIkRlYnVnZ2VyU3RhdGVtZW50XCIsRW1wdHlTdGF0ZW1lbnQ6XCJFbXB0eVN0YXRlbWVudFwiLEV4cG9ydEFsbERlY2xhcmF0aW9uOlwiRXhwb3J0QWxsRGVjbGFyYXRpb25cIixFeHBvcnREZWZhdWx0RGVjbGFyYXRpb246XCJFeHBvcnREZWZhdWx0RGVjbGFyYXRpb25cIixFeHBvcnROYW1lZERlY2xhcmF0aW9uOlwiRXhwb3J0TmFtZWREZWNsYXJhdGlvblwiLEV4cG9ydFNwZWNpZmllcjpcIkV4cG9ydFNwZWNpZmllclwiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsRm9yU3RhdGVtZW50OlwiRm9yU3RhdGVtZW50XCIsRm9yT2ZTdGF0ZW1lbnQ6XCJGb3JPZlN0YXRlbWVudFwiLEZvckluU3RhdGVtZW50OlwiRm9ySW5TdGF0ZW1lbnRcIixGdW5jdGlvbkRlY2xhcmF0aW9uOlwiRnVuY3Rpb25EZWNsYXJhdGlvblwiLEZ1bmN0aW9uRXhwcmVzc2lvbjpcIkZ1bmN0aW9uRXhwcmVzc2lvblwiLElkZW50aWZpZXI6XCJJZGVudGlmaWVyXCIsSWZTdGF0ZW1lbnQ6XCJJZlN0YXRlbWVudFwiLEltcG9ydERlY2xhcmF0aW9uOlwiSW1wb3J0RGVjbGFyYXRpb25cIixJbXBvcnREZWZhdWx0U3BlY2lmaWVyOlwiSW1wb3J0RGVmYXVsdFNwZWNpZmllclwiLEltcG9ydE5hbWVzcGFjZVNwZWNpZmllcjpcIkltcG9ydE5hbWVzcGFjZVNwZWNpZmllclwiLEltcG9ydFNwZWNpZmllcjpcIkltcG9ydFNwZWNpZmllclwiLExpdGVyYWw6XCJMaXRlcmFsXCIsTGFiZWxlZFN0YXRlbWVudDpcIkxhYmVsZWRTdGF0ZW1lbnRcIixMb2dpY2FsRXhwcmVzc2lvbjpcIkxvZ2ljYWxFeHByZXNzaW9uXCIsTWVtYmVyRXhwcmVzc2lvbjpcIk1lbWJlckV4cHJlc3Npb25cIixNZXRhUHJvcGVydHk6XCJNZXRhUHJvcGVydHlcIixNZXRob2REZWZpbml0aW9uOlwiTWV0aG9kRGVmaW5pdGlvblwiLE5ld0V4cHJlc3Npb246XCJOZXdFeHByZXNzaW9uXCIsT2JqZWN0RXhwcmVzc2lvbjpcIk9iamVjdEV4cHJlc3Npb25cIixPYmplY3RQYXR0ZXJuOlwiT2JqZWN0UGF0dGVyblwiLFByb2dyYW06XCJQcm9ncmFtXCIsUHJvcGVydHk6XCJQcm9wZXJ0eVwiLFJlc3RFbGVtZW50OlwiUmVzdEVsZW1lbnRcIixSZXR1cm5TdGF0ZW1lbnQ6XCJSZXR1cm5TdGF0ZW1lbnRcIixTZXF1ZW5jZUV4cHJlc3Npb246XCJTZXF1ZW5jZUV4cHJlc3Npb25cIixTcHJlYWRFbGVtZW50OlwiU3ByZWFkRWxlbWVudFwiLFN1cGVyOlwiU3VwZXJcIixTd2l0Y2hDYXNlOlwiU3dpdGNoQ2FzZVwiLFN3aXRjaFN0YXRlbWVudDpcIlN3aXRjaFN0YXRlbWVudFwiLFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjpcIlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvblwiLFRlbXBsYXRlRWxlbWVudDpcIlRlbXBsYXRlRWxlbWVudFwiLFRlbXBsYXRlTGl0ZXJhbDpcIlRlbXBsYXRlTGl0ZXJhbFwiLFRoaXNFeHByZXNzaW9uOlwiVGhpc0V4cHJlc3Npb25cIixUaHJvd1N0YXRlbWVudDpcIlRocm93U3RhdGVtZW50XCIsVHJ5U3RhdGVtZW50OlwiVHJ5U3RhdGVtZW50XCIsVW5hcnlFeHByZXNzaW9uOlwiVW5hcnlFeHByZXNzaW9uXCIsVXBkYXRlRXhwcmVzc2lvbjpcIlVwZGF0ZUV4cHJlc3Npb25cIixWYXJpYWJsZURlY2xhcmF0aW9uOlwiVmFyaWFibGVEZWNsYXJhdGlvblwiLFZhcmlhYmxlRGVjbGFyYXRvcjpcIlZhcmlhYmxlRGVjbGFyYXRvclwiLFdoaWxlU3RhdGVtZW50OlwiV2hpbGVTdGF0ZW1lbnRcIixXaXRoU3RhdGVtZW50OlwiV2l0aFN0YXRlbWVudFwiLFlpZWxkRXhwcmVzc2lvbjpcIllpZWxkRXhwcmVzc2lvblwifTtpPXtBcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyOlwiQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlclwifTtvPXtVbmV4cGVjdGVkVG9rZW46XCJVbmV4cGVjdGVkIHRva2VuICUwXCIsVW5leHBlY3RlZE51bWJlcjpcIlVuZXhwZWN0ZWQgbnVtYmVyXCIsVW5leHBlY3RlZFN0cmluZzpcIlVuZXhwZWN0ZWQgc3RyaW5nXCIsVW5leHBlY3RlZElkZW50aWZpZXI6XCJVbmV4cGVjdGVkIGlkZW50aWZpZXJcIixVbmV4cGVjdGVkUmVzZXJ2ZWQ6XCJVbmV4cGVjdGVkIHJlc2VydmVkIHdvcmRcIixVbmV4cGVjdGVkVGVtcGxhdGU6XCJVbmV4cGVjdGVkIHF1YXNpICUwXCIsVW5leHBlY3RlZEVPUzpcIlVuZXhwZWN0ZWQgZW5kIG9mIGlucHV0XCIsTmV3bGluZUFmdGVyVGhyb3c6XCJJbGxlZ2FsIG5ld2xpbmUgYWZ0ZXIgdGhyb3dcIixJbnZhbGlkUmVnRXhwOlwiSW52YWxpZCByZWd1bGFyIGV4cHJlc3Npb25cIixVbnRlcm1pbmF0ZWRSZWdFeHA6XCJJbnZhbGlkIHJlZ3VsYXIgZXhwcmVzc2lvbjogbWlzc2luZyAvXCIsSW52YWxpZExIU0luQXNzaWdubWVudDpcIkludmFsaWQgbGVmdC1oYW5kIHNpZGUgaW4gYXNzaWdubWVudFwiLEludmFsaWRMSFNJbkZvckluOlwiSW52YWxpZCBsZWZ0LWhhbmQgc2lkZSBpbiBmb3ItaW5cIixJbnZhbGlkTEhTSW5Gb3JMb29wOlwiSW52YWxpZCBsZWZ0LWhhbmQgc2lkZSBpbiBmb3ItbG9vcFwiLE11bHRpcGxlRGVmYXVsdHNJblN3aXRjaDpcIk1vcmUgdGhhbiBvbmUgZGVmYXVsdCBjbGF1c2UgaW4gc3dpdGNoIHN0YXRlbWVudFwiLE5vQ2F0Y2hPckZpbmFsbHk6XCJNaXNzaW5nIGNhdGNoIG9yIGZpbmFsbHkgYWZ0ZXIgdHJ5XCIsVW5rbm93bkxhYmVsOlwiVW5kZWZpbmVkIGxhYmVsICclMCdcIixSZWRlY2xhcmF0aW9uOlwiJTAgJyUxJyBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkXCIsSWxsZWdhbENvbnRpbnVlOlwiSWxsZWdhbCBjb250aW51ZSBzdGF0ZW1lbnRcIixJbGxlZ2FsQnJlYWs6XCJJbGxlZ2FsIGJyZWFrIHN0YXRlbWVudFwiLElsbGVnYWxSZXR1cm46XCJJbGxlZ2FsIHJldHVybiBzdGF0ZW1lbnRcIixTdHJpY3RNb2RlV2l0aDpcIlN0cmljdCBtb2RlIGNvZGUgbWF5IG5vdCBpbmNsdWRlIGEgd2l0aCBzdGF0ZW1lbnRcIixTdHJpY3RDYXRjaFZhcmlhYmxlOlwiQ2F0Y2ggdmFyaWFibGUgbWF5IG5vdCBiZSBldmFsIG9yIGFyZ3VtZW50cyBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdFZhck5hbWU6XCJWYXJpYWJsZSBuYW1lIG1heSBub3QgYmUgZXZhbCBvciBhcmd1bWVudHMgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RQYXJhbU5hbWU6XCJQYXJhbWV0ZXIgbmFtZSBldmFsIG9yIGFyZ3VtZW50cyBpcyBub3QgYWxsb3dlZCBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdFBhcmFtRHVwZTpcIlN0cmljdCBtb2RlIGZ1bmN0aW9uIG1heSBub3QgaGF2ZSBkdXBsaWNhdGUgcGFyYW1ldGVyIG5hbWVzXCIsU3RyaWN0RnVuY3Rpb25OYW1lOlwiRnVuY3Rpb24gbmFtZSBtYXkgbm90IGJlIGV2YWwgb3IgYXJndW1lbnRzIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0T2N0YWxMaXRlcmFsOlwiT2N0YWwgbGl0ZXJhbHMgYXJlIG5vdCBhbGxvd2VkIGluIHN0cmljdCBtb2RlLlwiLFN0cmljdERlbGV0ZTpcIkRlbGV0ZSBvZiBhbiB1bnF1YWxpZmllZCBpZGVudGlmaWVyIGluIHN0cmljdCBtb2RlLlwiLFN0cmljdExIU0Fzc2lnbm1lbnQ6XCJBc3NpZ25tZW50IHRvIGV2YWwgb3IgYXJndW1lbnRzIGlzIG5vdCBhbGxvd2VkIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0TEhTUG9zdGZpeDpcIlBvc3RmaXggaW5jcmVtZW50L2RlY3JlbWVudCBtYXkgbm90IGhhdmUgZXZhbCBvciBhcmd1bWVudHMgb3BlcmFuZCBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdExIU1ByZWZpeDpcIlByZWZpeCBpbmNyZW1lbnQvZGVjcmVtZW50IG1heSBub3QgaGF2ZSBldmFsIG9yIGFyZ3VtZW50cyBvcGVyYW5kIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0UmVzZXJ2ZWRXb3JkOlwiVXNlIG9mIGZ1dHVyZSByZXNlcnZlZCB3b3JkIGluIHN0cmljdCBtb2RlXCIsVGVtcGxhdGVPY3RhbExpdGVyYWw6XCJPY3RhbCBsaXRlcmFscyBhcmUgbm90IGFsbG93ZWQgaW4gdGVtcGxhdGUgc3RyaW5ncy5cIixQYXJhbWV0ZXJBZnRlclJlc3RQYXJhbWV0ZXI6XCJSZXN0IHBhcmFtZXRlciBtdXN0IGJlIGxhc3QgZm9ybWFsIHBhcmFtZXRlclwiLERlZmF1bHRSZXN0UGFyYW1ldGVyOlwiVW5leHBlY3RlZCB0b2tlbiA9XCIsT2JqZWN0UGF0dGVybkFzUmVzdFBhcmFtZXRlcjpcIlVuZXhwZWN0ZWQgdG9rZW4ge1wiLER1cGxpY2F0ZVByb3RvUHJvcGVydHk6XCJEdXBsaWNhdGUgX19wcm90b19fIGZpZWxkcyBhcmUgbm90IGFsbG93ZWQgaW4gb2JqZWN0IGxpdGVyYWxzXCIsQ29uc3RydWN0b3JTcGVjaWFsTWV0aG9kOlwiQ2xhc3MgY29uc3RydWN0b3IgbWF5IG5vdCBiZSBhbiBhY2Nlc3NvclwiLER1cGxpY2F0ZUNvbnN0cnVjdG9yOlwiQSBjbGFzcyBtYXkgb25seSBoYXZlIG9uZSBjb25zdHJ1Y3RvclwiLFN0YXRpY1Byb3RvdHlwZTpcIkNsYXNzZXMgbWF5IG5vdCBoYXZlIHN0YXRpYyBwcm9wZXJ0eSBuYW1lZCBwcm90b3R5cGVcIixNaXNzaW5nRnJvbUNsYXVzZTpcIlVuZXhwZWN0ZWQgdG9rZW5cIixOb0FzQWZ0ZXJJbXBvcnROYW1lc3BhY2U6XCJVbmV4cGVjdGVkIHRva2VuXCIsSW52YWxpZE1vZHVsZVNwZWNpZmllcjpcIlVuZXhwZWN0ZWQgdG9rZW5cIixJbGxlZ2FsSW1wb3J0RGVjbGFyYXRpb246XCJVbmV4cGVjdGVkIHRva2VuXCIsSWxsZWdhbEV4cG9ydERlY2xhcmF0aW9uOlwiVW5leHBlY3RlZCB0b2tlblwiLER1cGxpY2F0ZUJpbmRpbmc6XCJEdXBsaWNhdGUgYmluZGluZyAlMFwifTtzPXtOb25Bc2NpaUlkZW50aWZpZXJTdGFydDovW1xceEFBXFx4QjVcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjIwLVxcdTA2NEFcXHUwNjZFXFx1MDY2RlxcdTA2NzEtXFx1MDZEM1xcdTA2RDVcXHUwNkU1XFx1MDZFNlxcdTA2RUVcXHUwNkVGXFx1MDZGQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTBcXHUwNzEyLVxcdTA3MkZcXHUwNzRELVxcdTA3QTVcXHUwN0IxXFx1MDdDQS1cXHUwN0VBXFx1MDdGNFxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODE1XFx1MDgxQVxcdTA4MjRcXHUwODI4XFx1MDg0MC1cXHUwODU4XFx1MDhBMC1cXHUwOEIyXFx1MDkwNC1cXHUwOTM5XFx1MDkzRFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5ODBcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJEXFx1MDlDRVxcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUxXFx1MDlGMFxcdTA5RjFcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzRFxcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYxXFx1MEI3MVxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJEMFxcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0RcXHUwQzU4XFx1MEM1OVxcdTBDNjBcXHUwQzYxXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDYwXFx1MEQ2MVxcdTBEN0EtXFx1MEQ3RlxcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRTAxLVxcdTBFMzBcXHUwRTMyXFx1MEUzM1xcdTBFNDAtXFx1MEU0NlxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUIwXFx1MEVCMlxcdTBFQjNcXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjQwLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjg4LVxcdTBGOENcXHUxMDAwLVxcdTEwMkFcXHUxMDNGXFx1MTA1MC1cXHUxMDU1XFx1MTA1QS1cXHUxMDVEXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2RS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4RVxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzgwLVxcdTE3QjNcXHUxN0Q3XFx1MTdEQ1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBOFxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUVcXHUxOTUwLVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUMxLVxcdTE5QzdcXHUxQTAwLVxcdTFBMTZcXHUxQTIwLVxcdTFBNTRcXHUxQUE3XFx1MUIwNS1cXHUxQjMzXFx1MUI0NS1cXHUxQjRCXFx1MUI4My1cXHUxQkEwXFx1MUJBRVxcdTFCQUZcXHUxQkJBLVxcdTFCRTVcXHUxQzAwLVxcdTFDMjNcXHUxQzRELVxcdTFDNEZcXHUxQzVBLVxcdTFDN0RcXHUxQ0U5LVxcdTFDRUNcXHUxQ0VFLVxcdTFDRjFcXHUxQ0Y1XFx1MUNGNlxcdTFEMDAtXFx1MURCRlxcdTFFMDAtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTgtXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRUVcXHUyQ0YyXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEODAtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyOVxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOUItXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYxRlxcdUE2MkFcXHVBNjJCXFx1QTY0MC1cXHVBNjZFXFx1QTY3Ri1cXHVBNjlEXFx1QTZBMC1cXHVBNkVGXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBN0FEXFx1QTdCMFxcdUE3QjFcXHVBN0Y3LVxcdUE4MDFcXHVBODAzLVxcdUE4MDVcXHVBODA3LVxcdUE4MEFcXHVBODBDLVxcdUE4MjJcXHVBODQwLVxcdUE4NzNcXHVBODgyLVxcdUE4QjNcXHVBOEYyLVxcdUE4RjdcXHVBOEZCXFx1QTkwQS1cXHVBOTI1XFx1QTkzMC1cXHVBOTQ2XFx1QTk2MC1cXHVBOTdDXFx1QTk4NC1cXHVBOUIyXFx1QTlDRlxcdUE5RTAtXFx1QTlFNFxcdUE5RTYtXFx1QTlFRlxcdUE5RkEtXFx1QTlGRVxcdUFBMDAtXFx1QUEyOFxcdUFBNDAtXFx1QUE0MlxcdUFBNDQtXFx1QUE0QlxcdUFBNjAtXFx1QUE3NlxcdUFBN0FcXHVBQTdFLVxcdUFBQUZcXHVBQUIxXFx1QUFCNVxcdUFBQjZcXHVBQUI5LVxcdUFBQkRcXHVBQUMwXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFQVxcdUFBRjItXFx1QUFGNFxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCMzAtXFx1QUI1QVxcdUFCNUMtXFx1QUI1RlxcdUFCNjRcXHVBQjY1XFx1QUJDMC1cXHVBQkUyXFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRFxcdUZCMUYtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYyMS1cXHVGRjNBXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXXxcXHVEODAwW1xcdURDMDAtXFx1REMwQlxcdURDMEQtXFx1REMyNlxcdURDMjgtXFx1REMzQVxcdURDM0NcXHVEQzNEXFx1REMzRi1cXHVEQzREXFx1REM1MC1cXHVEQzVEXFx1REM4MC1cXHVEQ0ZBXFx1REQ0MC1cXHVERDc0XFx1REU4MC1cXHVERTlDXFx1REVBMC1cXHVERUQwXFx1REYwMC1cXHVERjFGXFx1REYzMC1cXHVERjRBXFx1REY1MC1cXHVERjc1XFx1REY4MC1cXHVERjlEXFx1REZBMC1cXHVERkMzXFx1REZDOC1cXHVERkNGXFx1REZEMS1cXHVERkQ1XXxcXHVEODAxW1xcdURDMDAtXFx1REM5RFxcdUREMDAtXFx1REQyN1xcdUREMzAtXFx1REQ2M1xcdURFMDAtXFx1REYzNlxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY2N118XFx1RDgwMltcXHVEQzAwLVxcdURDMDVcXHVEQzA4XFx1REMwQS1cXHVEQzM1XFx1REMzN1xcdURDMzhcXHVEQzNDXFx1REMzRi1cXHVEQzU1XFx1REM2MC1cXHVEQzc2XFx1REM4MC1cXHVEQzlFXFx1REQwMC1cXHVERDE1XFx1REQyMC1cXHVERDM5XFx1REQ4MC1cXHVEREI3XFx1RERCRVxcdUREQkZcXHVERTAwXFx1REUxMC1cXHVERTEzXFx1REUxNS1cXHVERTE3XFx1REUxOS1cXHVERTMzXFx1REU2MC1cXHVERTdDXFx1REU4MC1cXHVERTlDXFx1REVDMC1cXHVERUM3XFx1REVDOS1cXHVERUU0XFx1REYwMC1cXHVERjM1XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjcyXFx1REY4MC1cXHVERjkxXXxcXHVEODAzW1xcdURDMDAtXFx1REM0OF18XFx1RDgwNFtcXHVEQzAzLVxcdURDMzdcXHVEQzgzLVxcdURDQUZcXHVEQ0QwLVxcdURDRThcXHVERDAzLVxcdUREMjZcXHVERDUwLVxcdURENzJcXHVERDc2XFx1REQ4My1cXHVEREIyXFx1RERDMS1cXHVEREM0XFx1REREQVxcdURFMDAtXFx1REUxMVxcdURFMTMtXFx1REUyQlxcdURFQjAtXFx1REVERVxcdURGMDUtXFx1REYwQ1xcdURGMEZcXHVERjEwXFx1REYxMy1cXHVERjI4XFx1REYyQS1cXHVERjMwXFx1REYzMlxcdURGMzNcXHVERjM1LVxcdURGMzlcXHVERjNEXFx1REY1RC1cXHVERjYxXXxcXHVEODA1W1xcdURDODAtXFx1RENBRlxcdURDQzRcXHVEQ0M1XFx1RENDN1xcdUREODAtXFx1RERBRVxcdURFMDAtXFx1REUyRlxcdURFNDRcXHVERTgwLVxcdURFQUFdfFxcdUQ4MDZbXFx1RENBMC1cXHVEQ0RGXFx1RENGRlxcdURFQzAtXFx1REVGOF18XFx1RDgwOFtcXHVEQzAwLVxcdURGOThdfFxcdUQ4MDlbXFx1REMwMC1cXHVEQzZFXXxbXFx1RDgwQ1xcdUQ4NDAtXFx1RDg2OFxcdUQ4NkEtXFx1RDg2Q11bXFx1REMwMC1cXHVERkZGXXxcXHVEODBEW1xcdURDMDAtXFx1REMyRV18XFx1RDgxQVtcXHVEQzAwLVxcdURFMzhcXHVERTQwLVxcdURFNUVcXHVERUQwLVxcdURFRURcXHVERjAwLVxcdURGMkZcXHVERjQwLVxcdURGNDNcXHVERjYzLVxcdURGNzdcXHVERjdELVxcdURGOEZdfFxcdUQ4MUJbXFx1REYwMC1cXHVERjQ0XFx1REY1MFxcdURGOTMtXFx1REY5Rl18XFx1RDgyQ1tcXHVEQzAwXFx1REMwMV18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTldfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQl18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRdfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRF18XFx1RDg3RVtcXHVEQzAwLVxcdURFMURdLyxOb25Bc2NpaUlkZW50aWZpZXJQYXJ0Oi9bXFx4QUFcXHhCNVxceEI3XFx4QkFcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDMwMC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzdGXFx1MDM4Ni1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0ODMtXFx1MDQ4N1xcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNTkxLVxcdTA1QkRcXHUwNUJGXFx1MDVDMVxcdTA1QzJcXHUwNUM0XFx1MDVDNVxcdTA1QzdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjEwLVxcdTA2MUFcXHUwNjIwLVxcdTA2NjlcXHUwNjZFLVxcdTA2RDNcXHUwNkQ1LVxcdTA2RENcXHUwNkRGLVxcdTA2RThcXHUwNkVBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMC1cXHUwNzRBXFx1MDc0RC1cXHUwN0IxXFx1MDdDMC1cXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgyRFxcdTA4NDAtXFx1MDg1QlxcdTA4QTAtXFx1MDhCMlxcdTA4RTQtXFx1MDk2M1xcdTA5NjYtXFx1MDk2RlxcdTA5NzEtXFx1MDk4M1xcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkMtXFx1MDlDNFxcdTA5QzdcXHUwOUM4XFx1MDlDQi1cXHUwOUNFXFx1MDlEN1xcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUzXFx1MDlFNi1cXHUwOUYxXFx1MEEwMS1cXHUwQTAzXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTNDXFx1MEEzRS1cXHUwQTQyXFx1MEE0N1xcdTBBNDhcXHUwQTRCLVxcdTBBNERcXHUwQTUxXFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNjYtXFx1MEE3NVxcdTBBODEtXFx1MEE4M1xcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCQy1cXHUwQUM1XFx1MEFDNy1cXHUwQUM5XFx1MEFDQi1cXHUwQUNEXFx1MEFEMFxcdTBBRTAtXFx1MEFFM1xcdTBBRTYtXFx1MEFFRlxcdTBCMDEtXFx1MEIwM1xcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNDLVxcdTBCNDRcXHUwQjQ3XFx1MEI0OFxcdTBCNEItXFx1MEI0RFxcdTBCNTZcXHUwQjU3XFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjNcXHUwQjY2LVxcdTBCNkZcXHUwQjcxXFx1MEI4MlxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJCRS1cXHUwQkMyXFx1MEJDNi1cXHUwQkM4XFx1MEJDQS1cXHUwQkNEXFx1MEJEMFxcdTBCRDdcXHUwQkU2LVxcdTBCRUZcXHUwQzAwLVxcdTBDMDNcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNELVxcdTBDNDRcXHUwQzQ2LVxcdTBDNDhcXHUwQzRBLVxcdTBDNERcXHUwQzU1XFx1MEM1NlxcdTBDNThcXHUwQzU5XFx1MEM2MC1cXHUwQzYzXFx1MEM2Ni1cXHUwQzZGXFx1MEM4MS1cXHUwQzgzXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCQy1cXHUwQ0M0XFx1MENDNi1cXHUwQ0M4XFx1MENDQS1cXHUwQ0NEXFx1MENENVxcdTBDRDZcXHUwQ0RFXFx1MENFMC1cXHUwQ0UzXFx1MENFNi1cXHUwQ0VGXFx1MENGMVxcdTBDRjJcXHUwRDAxLVxcdTBEMDNcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNELVxcdTBENDRcXHUwRDQ2LVxcdTBENDhcXHUwRDRBLVxcdTBENEVcXHUwRDU3XFx1MEQ2MC1cXHUwRDYzXFx1MEQ2Ni1cXHUwRDZGXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4MlxcdTBEODNcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MERDQVxcdTBEQ0YtXFx1MERENFxcdTBERDZcXHUwREQ4LVxcdTBEREZcXHUwREU2LVxcdTBERUZcXHUwREYyXFx1MERGM1xcdTBFMDEtXFx1MEUzQVxcdTBFNDAtXFx1MEU0RVxcdTBFNTAtXFx1MEU1OVxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUI5XFx1MEVCQi1cXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFQzgtXFx1MEVDRFxcdTBFRDAtXFx1MEVEOVxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjE4XFx1MEYxOVxcdTBGMjAtXFx1MEYyOVxcdTBGMzVcXHUwRjM3XFx1MEYzOVxcdTBGM0UtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGNzEtXFx1MEY4NFxcdTBGODYtXFx1MEY5N1xcdTBGOTktXFx1MEZCQ1xcdTBGQzZcXHUxMDAwLVxcdTEwNDlcXHUxMDUwLVxcdTEwOURcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM1RC1cXHUxMzVGXFx1MTM2OS1cXHUxMzcxXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzE0XFx1MTcyMC1cXHUxNzM0XFx1MTc0MC1cXHUxNzUzXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc3MlxcdTE3NzNcXHUxNzgwLVxcdTE3RDNcXHUxN0Q3XFx1MTdEQ1xcdTE3RERcXHUxN0UwLVxcdTE3RTlcXHUxODBCLVxcdTE4MERcXHUxODEwLVxcdTE4MTlcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUVcXHUxOTIwLVxcdTE5MkJcXHUxOTMwLVxcdTE5M0JcXHUxOTQ2LVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUIwLVxcdTE5QzlcXHUxOUQwLVxcdTE5REFcXHUxQTAwLVxcdTFBMUJcXHUxQTIwLVxcdTFBNUVcXHUxQTYwLVxcdTFBN0NcXHUxQTdGLVxcdTFBODlcXHUxQTkwLVxcdTFBOTlcXHUxQUE3XFx1MUFCMC1cXHUxQUJEXFx1MUIwMC1cXHUxQjRCXFx1MUI1MC1cXHUxQjU5XFx1MUI2Qi1cXHUxQjczXFx1MUI4MC1cXHUxQkYzXFx1MUMwMC1cXHUxQzM3XFx1MUM0MC1cXHUxQzQ5XFx1MUM0RC1cXHUxQzdEXFx1MUNEMC1cXHUxQ0QyXFx1MUNENC1cXHUxQ0Y2XFx1MUNGOFxcdTFDRjlcXHUxRDAwLVxcdTFERjVcXHUxREZDLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjAwQ1xcdTIwMERcXHUyMDNGXFx1MjA0MFxcdTIwNTRcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIwRDAtXFx1MjBEQ1xcdTIwRTFcXHUyMEU1LVxcdTIwRjBcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE4LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ3Ri1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkRFMC1cXHUyREZGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDJGXFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5OS1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjJCXFx1QTY0MC1cXHVBNjZGXFx1QTY3NC1cXHVBNjdEXFx1QTY3Ri1cXHVBNjlEXFx1QTY5Ri1cXHVBNkYxXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBN0FEXFx1QTdCMFxcdUE3QjFcXHVBN0Y3LVxcdUE4MjdcXHVBODQwLVxcdUE4NzNcXHVBODgwLVxcdUE4QzRcXHVBOEQwLVxcdUE4RDlcXHVBOEUwLVxcdUE4RjdcXHVBOEZCXFx1QTkwMC1cXHVBOTJEXFx1QTkzMC1cXHVBOTUzXFx1QTk2MC1cXHVBOTdDXFx1QTk4MC1cXHVBOUMwXFx1QTlDRi1cXHVBOUQ5XFx1QTlFMC1cXHVBOUZFXFx1QUEwMC1cXHVBQTM2XFx1QUE0MC1cXHVBQTREXFx1QUE1MC1cXHVBQTU5XFx1QUE2MC1cXHVBQTc2XFx1QUE3QS1cXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVGXFx1QUFGMi1cXHVBQUY2XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUIzMC1cXHVBQjVBXFx1QUI1Qy1cXHVBQjVGXFx1QUI2NFxcdUFCNjVcXHVBQkMwLVxcdUFCRUFcXHVBQkVDXFx1QUJFRFxcdUFCRjAtXFx1QUJGOVxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMUQtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkUwMC1cXHVGRTBGXFx1RkUyMC1cXHVGRTJEXFx1RkUzM1xcdUZFMzRcXHVGRTRELVxcdUZFNEZcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjEwLVxcdUZGMTlcXHVGRjIxLVxcdUZGM0FcXHVGRjNGXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXXxcXHVEODAwW1xcdURDMDAtXFx1REMwQlxcdURDMEQtXFx1REMyNlxcdURDMjgtXFx1REMzQVxcdURDM0NcXHVEQzNEXFx1REMzRi1cXHVEQzREXFx1REM1MC1cXHVEQzVEXFx1REM4MC1cXHVEQ0ZBXFx1REQ0MC1cXHVERDc0XFx1RERGRFxcdURFODAtXFx1REU5Q1xcdURFQTAtXFx1REVEMFxcdURFRTBcXHVERjAwLVxcdURGMUZcXHVERjMwLVxcdURGNEFcXHVERjUwLVxcdURGN0FcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1RENBMC1cXHVEQ0E5XFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVERDAwLVxcdUREMTVcXHVERDIwLVxcdUREMzlcXHVERDgwLVxcdUREQjdcXHVEREJFXFx1RERCRlxcdURFMDAtXFx1REUwM1xcdURFMDVcXHVERTA2XFx1REUwQy1cXHVERTEzXFx1REUxNS1cXHVERTE3XFx1REUxOS1cXHVERTMzXFx1REUzOC1cXHVERTNBXFx1REUzRlxcdURFNjAtXFx1REU3Q1xcdURFODAtXFx1REU5Q1xcdURFQzAtXFx1REVDN1xcdURFQzktXFx1REVFNlxcdURGMDAtXFx1REYzNVxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY3MlxcdURGODAtXFx1REY5MV18XFx1RDgwM1tcXHVEQzAwLVxcdURDNDhdfFxcdUQ4MDRbXFx1REMwMC1cXHVEQzQ2XFx1REM2Ni1cXHVEQzZGXFx1REM3Ri1cXHVEQ0JBXFx1RENEMC1cXHVEQ0U4XFx1RENGMC1cXHVEQ0Y5XFx1REQwMC1cXHVERDM0XFx1REQzNi1cXHVERDNGXFx1REQ1MC1cXHVERDczXFx1REQ3NlxcdUREODAtXFx1RERDNFxcdURERDAtXFx1REREQVxcdURFMDAtXFx1REUxMVxcdURFMTMtXFx1REUzN1xcdURFQjAtXFx1REVFQVxcdURFRjAtXFx1REVGOVxcdURGMDEtXFx1REYwM1xcdURGMDUtXFx1REYwQ1xcdURGMEZcXHVERjEwXFx1REYxMy1cXHVERjI4XFx1REYyQS1cXHVERjMwXFx1REYzMlxcdURGMzNcXHVERjM1LVxcdURGMzlcXHVERjNDLVxcdURGNDRcXHVERjQ3XFx1REY0OFxcdURGNEItXFx1REY0RFxcdURGNTdcXHVERjVELVxcdURGNjNcXHVERjY2LVxcdURGNkNcXHVERjcwLVxcdURGNzRdfFxcdUQ4MDVbXFx1REM4MC1cXHVEQ0M1XFx1RENDN1xcdURDRDAtXFx1RENEOVxcdUREODAtXFx1RERCNVxcdUREQjgtXFx1RERDMFxcdURFMDAtXFx1REU0MFxcdURFNDRcXHVERTUwLVxcdURFNTlcXHVERTgwLVxcdURFQjdcXHVERUMwLVxcdURFQzldfFxcdUQ4MDZbXFx1RENBMC1cXHVEQ0U5XFx1RENGRlxcdURFQzAtXFx1REVGOF18XFx1RDgwOFtcXHVEQzAwLVxcdURGOThdfFxcdUQ4MDlbXFx1REMwMC1cXHVEQzZFXXxbXFx1RDgwQ1xcdUQ4NDAtXFx1RDg2OFxcdUQ4NkEtXFx1RDg2Q11bXFx1REMwMC1cXHVERkZGXXxcXHVEODBEW1xcdURDMDAtXFx1REMyRV18XFx1RDgxQVtcXHVEQzAwLVxcdURFMzhcXHVERTQwLVxcdURFNUVcXHVERTYwLVxcdURFNjlcXHVERUQwLVxcdURFRURcXHVERUYwLVxcdURFRjRcXHVERjAwLVxcdURGMzZcXHVERjQwLVxcdURGNDNcXHVERjUwLVxcdURGNTlcXHVERjYzLVxcdURGNzdcXHVERjdELVxcdURGOEZdfFxcdUQ4MUJbXFx1REYwMC1cXHVERjQ0XFx1REY1MC1cXHVERjdFXFx1REY4Ri1cXHVERjlGXXxcXHVEODJDW1xcdURDMDBcXHVEQzAxXXxcXHVEODJGW1xcdURDMDAtXFx1REM2QVxcdURDNzAtXFx1REM3Q1xcdURDODAtXFx1REM4OFxcdURDOTAtXFx1REM5OVxcdURDOURcXHVEQzlFXXxcXHVEODM0W1xcdURENjUtXFx1REQ2OVxcdURENkQtXFx1REQ3MlxcdUREN0ItXFx1REQ4MlxcdUREODUtXFx1REQ4QlxcdUREQUEtXFx1RERBRFxcdURFNDItXFx1REU0NF18XFx1RDgzNVtcXHVEQzAwLVxcdURDNTRcXHVEQzU2LVxcdURDOUNcXHVEQzlFXFx1REM5RlxcdURDQTJcXHVEQ0E1XFx1RENBNlxcdURDQTktXFx1RENBQ1xcdURDQUUtXFx1RENCOVxcdURDQkJcXHVEQ0JELVxcdURDQzNcXHVEQ0M1LVxcdUREMDVcXHVERDA3LVxcdUREMEFcXHVERDBELVxcdUREMTRcXHVERDE2LVxcdUREMUNcXHVERDFFLVxcdUREMzlcXHVERDNCLVxcdUREM0VcXHVERDQwLVxcdURENDRcXHVERDQ2XFx1REQ0QS1cXHVERDUwXFx1REQ1Mi1cXHVERUE1XFx1REVBOC1cXHVERUMwXFx1REVDMi1cXHVERURBXFx1REVEQy1cXHVERUZBXFx1REVGQy1cXHVERjE0XFx1REYxNi1cXHVERjM0XFx1REYzNi1cXHVERjRFXFx1REY1MC1cXHVERjZFXFx1REY3MC1cXHVERjg4XFx1REY4QS1cXHVERkE4XFx1REZBQS1cXHVERkMyXFx1REZDNC1cXHVERkNCXFx1REZDRS1cXHVERkZGXXxcXHVEODNBW1xcdURDMDAtXFx1RENDNFxcdURDRDAtXFx1RENENl18XFx1RDgzQltcXHVERTAwLVxcdURFMDNcXHVERTA1LVxcdURFMUZcXHVERTIxXFx1REUyMlxcdURFMjRcXHVERTI3XFx1REUyOS1cXHVERTMyXFx1REUzNC1cXHVERTM3XFx1REUzOVxcdURFM0JcXHVERTQyXFx1REU0N1xcdURFNDlcXHVERTRCXFx1REU0RC1cXHVERTRGXFx1REU1MVxcdURFNTJcXHVERTU0XFx1REU1N1xcdURFNTlcXHVERTVCXFx1REU1RFxcdURFNUZcXHVERTYxXFx1REU2MlxcdURFNjRcXHVERTY3LVxcdURFNkFcXHVERTZDLVxcdURFNzJcXHVERTc0LVxcdURFNzdcXHVERTc5LVxcdURFN0NcXHVERTdFXFx1REU4MC1cXHVERTg5XFx1REU4Qi1cXHVERTlCXFx1REVBMS1cXHVERUEzXFx1REVBNS1cXHVERUE5XFx1REVBQi1cXHVERUJCXXxcXHVEODY5W1xcdURDMDAtXFx1REVENlxcdURGMDAtXFx1REZGRl18XFx1RDg2RFtcXHVEQzAwLVxcdURGMzRcXHVERjQwLVxcdURGRkZdfFxcdUQ4NkVbXFx1REMwMC1cXHVEQzFEXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF18XFx1REI0MFtcXHVERDAwLVxcdURERUZdL1xufTtmdW5jdGlvbiB3KGUsdCl7aWYoIWUpe3Rocm93IG5ldyBFcnJvcihcIkFTU0VSVDogXCIrdCl9fWZ1bmN0aW9uIF8oZSl7cmV0dXJuIGU+PTQ4JiZlPD01N31mdW5jdGlvbiBrKGUpe3JldHVyblwiMDEyMzQ1Njc4OWFiY2RlZkFCQ0RFRlwiLmluZGV4T2YoZSk+PTB9ZnVuY3Rpb24gSShlKXtyZXR1cm5cIjAxMjM0NTY3XCIuaW5kZXhPZihlKT49MH1mdW5jdGlvbiBQKGUpe3ZhciB0PWUhPT1cIjBcIix1PVwiMDEyMzQ1NjdcIi5pbmRleE9mKGUpO2lmKGY8ZyYmSShhW2ZdKSl7dD10cnVlO3U9dSo4K1wiMDEyMzQ1NjdcIi5pbmRleE9mKGFbZisrXSk7aWYoXCIwMTIzXCIuaW5kZXhPZihlKT49MCYmZjxnJiZJKGFbZl0pKXt1PXUqOCtcIjAxMjM0NTY3XCIuaW5kZXhPZihhW2YrK10pfX1yZXR1cm57Y29kZTp1LG9jdGFsOnR9fWZ1bmN0aW9uIEwoZSl7cmV0dXJuIGU9PT0zMnx8ZT09PTl8fGU9PT0xMXx8ZT09PTEyfHxlPT09MTYwfHxlPj01NzYwJiZbNTc2MCw2MTU4LDgxOTIsODE5Myw4MTk0LDgxOTUsODE5Niw4MTk3LDgxOTgsODE5OSw4MjAwLDgyMDEsODIwMiw4MjM5LDgyODcsMTIyODgsNjUyNzldLmluZGV4T2YoZSk+PTB9ZnVuY3Rpb24gTyhlKXtyZXR1cm4gZT09PTEwfHxlPT09MTN8fGU9PT04MjMyfHxlPT09ODIzM31mdW5jdGlvbiBqKGUpe3JldHVybiBlPDY1NTM2P1N0cmluZy5mcm9tQ2hhckNvZGUoZSk6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NisoZS02NTUzNj4+MTApKStTdHJpbmcuZnJvbUNoYXJDb2RlKDU2MzIwKyhlLTY1NTM2JjEwMjMpKX1mdW5jdGlvbiBNKGUpe3JldHVybiBlPT09MzZ8fGU9PT05NXx8ZT49NjUmJmU8PTkwfHxlPj05NyYmZTw9MTIyfHxlPT09OTJ8fGU+PTEyOCYmcy5Ob25Bc2NpaUlkZW50aWZpZXJTdGFydC50ZXN0KGooZSkpfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIGU9PT0zNnx8ZT09PTk1fHxlPj02NSYmZTw9OTB8fGU+PTk3JiZlPD0xMjJ8fGU+PTQ4JiZlPD01N3x8ZT09PTkyfHxlPj0xMjgmJnMuTm9uQXNjaWlJZGVudGlmaWVyUGFydC50ZXN0KGooZSkpfWZ1bmN0aW9uIFQoZSl7c3dpdGNoKGUpe2Nhc2VcImVudW1cIjpjYXNlXCJleHBvcnRcIjpjYXNlXCJpbXBvcnRcIjpjYXNlXCJzdXBlclwiOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1mdW5jdGlvbiBOKGUpe3N3aXRjaChlKXtjYXNlXCJpbXBsZW1lbnRzXCI6Y2FzZVwiaW50ZXJmYWNlXCI6Y2FzZVwicGFja2FnZVwiOmNhc2VcInByaXZhdGVcIjpjYXNlXCJwcm90ZWN0ZWRcIjpjYXNlXCJwdWJsaWNcIjpjYXNlXCJzdGF0aWNcIjpjYXNlXCJ5aWVsZFwiOmNhc2VcImxldFwiOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1mdW5jdGlvbiBxKGUpe3JldHVybiBlPT09XCJldmFsXCJ8fGU9PT1cImFyZ3VtZW50c1wifWZ1bmN0aW9uIFUoZSl7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDI6cmV0dXJuIGU9PT1cImlmXCJ8fGU9PT1cImluXCJ8fGU9PT1cImRvXCI7Y2FzZSAzOnJldHVybiBlPT09XCJ2YXJcInx8ZT09PVwiZm9yXCJ8fGU9PT1cIm5ld1wifHxlPT09XCJ0cnlcInx8ZT09PVwibGV0XCI7Y2FzZSA0OnJldHVybiBlPT09XCJ0aGlzXCJ8fGU9PT1cImVsc2VcInx8ZT09PVwiY2FzZVwifHxlPT09XCJ2b2lkXCJ8fGU9PT1cIndpdGhcInx8ZT09PVwiZW51bVwiO2Nhc2UgNTpyZXR1cm4gZT09PVwid2hpbGVcInx8ZT09PVwiYnJlYWtcInx8ZT09PVwiY2F0Y2hcInx8ZT09PVwidGhyb3dcInx8ZT09PVwiY29uc3RcInx8ZT09PVwieWllbGRcInx8ZT09PVwiY2xhc3NcInx8ZT09PVwic3VwZXJcIjtjYXNlIDY6cmV0dXJuIGU9PT1cInJldHVyblwifHxlPT09XCJ0eXBlb2ZcInx8ZT09PVwiZGVsZXRlXCJ8fGU9PT1cInN3aXRjaFwifHxlPT09XCJleHBvcnRcInx8ZT09PVwiaW1wb3J0XCI7Y2FzZSA3OnJldHVybiBlPT09XCJkZWZhdWx0XCJ8fGU9PT1cImZpbmFsbHlcInx8ZT09PVwiZXh0ZW5kc1wiO2Nhc2UgODpyZXR1cm4gZT09PVwiZnVuY3Rpb25cInx8ZT09PVwiY29udGludWVcInx8ZT09PVwiZGVidWdnZXJcIjtjYXNlIDEwOnJldHVybiBlPT09XCJpbnN0YW5jZW9mXCI7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fWZ1bmN0aW9uIHooZSx0LHUsbixyKXt2YXIgaTt3KHR5cGVvZiB1PT09XCJudW1iZXJcIixcIkNvbW1lbnQgbXVzdCBoYXZlIHZhbGlkIHBvc2l0aW9uXCIpO0IubGFzdENvbW1lbnRTdGFydD11O2k9e3R5cGU6ZSx2YWx1ZTp0fTtpZih2LnJhbmdlKXtpLnJhbmdlPVt1LG5dfWlmKHYubG9jKXtpLmxvYz1yfXYuY29tbWVudHMucHVzaChpKTtpZih2LmF0dGFjaENvbW1lbnQpe3YubGVhZGluZ0NvbW1lbnRzLnB1c2goaSk7di50cmFpbGluZ0NvbW1lbnRzLnB1c2goaSl9fWZ1bmN0aW9uIFcoZSl7dmFyIHQsdSxuLHI7dD1mLWU7dT17c3RhcnQ6e2xpbmU6Yyxjb2x1bW46Zi1wLWV9fTt3aGlsZShmPGcpe249YS5jaGFyQ29kZUF0KGYpOysrZjtpZihPKG4pKXtEPXRydWU7aWYodi5jb21tZW50cyl7cj1hLnNsaWNlKHQrZSxmLTEpO3UuZW5kPXtsaW5lOmMsY29sdW1uOmYtcC0xfTt6KFwiTGluZVwiLHIsdCxmLTEsdSl9aWYobj09PTEzJiZhLmNoYXJDb2RlQXQoZik9PT0xMCl7KytmfSsrYztwPWY7cmV0dXJufX1pZih2LmNvbW1lbnRzKXtyPWEuc2xpY2UodCtlLGYpO3UuZW5kPXtsaW5lOmMsY29sdW1uOmYtcH07eihcIkxpbmVcIixyLHQsZix1KX19ZnVuY3Rpb24gVigpe3ZhciBlLHQsdSxuO2lmKHYuY29tbWVudHMpe2U9Zi0yO3Q9e3N0YXJ0OntsaW5lOmMsY29sdW1uOmYtcC0yfX19d2hpbGUoZjxnKXt1PWEuY2hhckNvZGVBdChmKTtpZihPKHUpKXtpZih1PT09MTMmJmEuY2hhckNvZGVBdChmKzEpPT09MTApeysrZn1EPXRydWU7KytjOysrZjtwPWZ9ZWxzZSBpZih1PT09NDIpe2lmKGEuY2hhckNvZGVBdChmKzEpPT09NDcpeysrZjsrK2Y7aWYodi5jb21tZW50cyl7bj1hLnNsaWNlKGUrMixmLTIpO3QuZW5kPXtsaW5lOmMsY29sdW1uOmYtcH07eihcIkJsb2NrXCIsbixlLGYsdCl9cmV0dXJufSsrZn1lbHNleysrZn19aWYodi5jb21tZW50cyl7dC5lbmQ9e2xpbmU6Yyxjb2x1bW46Zi1wfTtuPWEuc2xpY2UoZSsyLGYpO3ooXCJCbG9ja1wiLG4sZSxmLHQpfV9lKCl9ZnVuY3Rpb24gWSgpe3ZhciBlLHQ7RD1mYWxzZTt0PWY9PT0wO3doaWxlKGY8Zyl7ZT1hLmNoYXJDb2RlQXQoZik7aWYoTChlKSl7KytmfWVsc2UgaWYoTyhlKSl7RD10cnVlOysrZjtpZihlPT09MTMmJmEuY2hhckNvZGVBdChmKT09PTEwKXsrK2Z9KytjO3A9Zjt0PXRydWV9ZWxzZSBpZihlPT09NDcpe2U9YS5jaGFyQ29kZUF0KGYrMSk7aWYoZT09PTQ3KXsrK2Y7KytmO1coMik7dD10cnVlfWVsc2UgaWYoZT09PTQyKXsrK2Y7KytmO1YoKX1lbHNle2JyZWFrfX1lbHNlIGlmKHQmJmU9PT00NSl7aWYoYS5jaGFyQ29kZUF0KGYrMSk9PT00NSYmYS5jaGFyQ29kZUF0KGYrMik9PT02Mil7Zis9MztXKDMpfWVsc2V7YnJlYWt9fWVsc2UgaWYoZT09PTYwKXtpZihhLnNsaWNlKGYrMSxmKzQpPT09XCIhLS1cIil7KytmOysrZjsrK2Y7KytmO1coNCl9ZWxzZXticmVha319ZWxzZXticmVha319fWZ1bmN0aW9uIEcoZSl7dmFyIHQsdSxuLHI9MDt1PWU9PT1cInVcIj80OjI7Zm9yKHQ9MDt0PHU7Kyt0KXtpZihmPGcmJmsoYVtmXSkpe249YVtmKytdO3I9cioxNitcIjAxMjM0NTY3ODlhYmNkZWZcIi5pbmRleE9mKG4udG9Mb3dlckNhc2UoKSl9ZWxzZXtyZXR1cm5cIlwifX1yZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShyKX1mdW5jdGlvbiBLKCl7dmFyIGUsdDtlPWFbZl07dD0wO2lmKGU9PT1cIn1cIil7d2UoKX13aGlsZShmPGcpe2U9YVtmKytdO2lmKCFrKGUpKXticmVha310PXQqMTYrXCIwMTIzNDU2Nzg5YWJjZGVmXCIuaW5kZXhPZihlLnRvTG93ZXJDYXNlKCkpfWlmKHQ+MTExNDExMXx8ZSE9PVwifVwiKXt3ZSgpfXJldHVybiBqKHQpfWZ1bmN0aW9uICQoZSl7dmFyIHQsdSxuO3Q9YS5jaGFyQ29kZUF0KGUpO2lmKHQ+PTU1Mjk2JiZ0PD01NjMxOSl7bj1hLmNoYXJDb2RlQXQoZSsxKTtpZihuPj01NjMyMCYmbjw9NTczNDMpe3U9dDt0PSh1LTU1Mjk2KSoxMDI0K24tNTYzMjArNjU1MzZ9fXJldHVybiB0fWZ1bmN0aW9uIEgoKXt2YXIgZSx0LHU7ZT0kKGYpO3U9aihlKTtmKz11Lmxlbmd0aDtpZihlPT09OTIpe2lmKGEuY2hhckNvZGVBdChmKSE9PTExNyl7d2UoKX0rK2Y7aWYoYVtmXT09PVwie1wiKXsrK2Y7dD1LKCl9ZWxzZXt0PUcoXCJ1XCIpO2U9dC5jaGFyQ29kZUF0KDApO2lmKCF0fHx0PT09XCJcXFxcXCJ8fCFNKGUpKXt3ZSgpfX11PXR9d2hpbGUoZjxnKXtlPSQoZik7aWYoIVIoZSkpe2JyZWFrfXQ9aihlKTt1Kz10O2YrPXQubGVuZ3RoO2lmKGU9PT05Mil7dT11LnN1YnN0cigwLHUubGVuZ3RoLTEpO2lmKGEuY2hhckNvZGVBdChmKSE9PTExNyl7d2UoKX0rK2Y7aWYoYVtmXT09PVwie1wiKXsrK2Y7dD1LKCl9ZWxzZXt0PUcoXCJ1XCIpO2U9dC5jaGFyQ29kZUF0KDApO2lmKCF0fHx0PT09XCJcXFxcXCJ8fCFSKGUpKXt3ZSgpfX11Kz10fX1yZXR1cm4gdX1mdW5jdGlvbiBKKCl7dmFyIGUsdDtlPWYrKzt3aGlsZShmPGcpe3Q9YS5jaGFyQ29kZUF0KGYpO2lmKHQ9PT05Mil7Zj1lO3JldHVybiBIKCl9ZWxzZSBpZih0Pj01NTI5NiYmdDw1NzM0Myl7Zj1lO3JldHVybiBIKCl9aWYoUih0KSl7KytmfWVsc2V7YnJlYWt9fXJldHVybiBhLnNsaWNlKGUsZil9ZnVuY3Rpb24gWCgpe3ZhciBlLHUsbjtlPWY7dT1hLmNoYXJDb2RlQXQoZik9PT05Mj9IKCk6SigpO2lmKHUubGVuZ3RoPT09MSl7bj10LklkZW50aWZpZXJ9ZWxzZSBpZihVKHUpKXtuPXQuS2V5d29yZH1lbHNlIGlmKHU9PT1cIm51bGxcIil7bj10Lk51bGxMaXRlcmFsfWVsc2UgaWYodT09PVwidHJ1ZVwifHx1PT09XCJmYWxzZVwiKXtuPXQuQm9vbGVhbkxpdGVyYWx9ZWxzZXtuPXQuSWRlbnRpZmllcn1yZXR1cm57dHlwZTpuLHZhbHVlOnUsbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OmUsZW5kOmZ9fWZ1bmN0aW9uIFooKXt2YXIgZSx1O2U9e3R5cGU6dC5QdW5jdHVhdG9yLHZhbHVlOlwiXCIsbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OmYsZW5kOmZ9O3U9YVtmXTtzd2l0Y2godSl7Y2FzZVwiKFwiOmlmKHYudG9rZW5pemUpe3Yub3BlblBhcmVuVG9rZW49di50b2tlbnMubGVuZ3RofSsrZjticmVhaztjYXNlXCJ7XCI6aWYodi50b2tlbml6ZSl7di5vcGVuQ3VybHlUb2tlbj12LnRva2Vucy5sZW5ndGh9Qi5jdXJseVN0YWNrLnB1c2goXCJ7XCIpOysrZjticmVhaztjYXNlXCIuXCI6KytmO2lmKGFbZl09PT1cIi5cIiYmYVtmKzFdPT09XCIuXCIpe2YrPTI7dT1cIi4uLlwifWJyZWFrO2Nhc2VcIn1cIjorK2Y7Qi5jdXJseVN0YWNrLnBvcCgpO2JyZWFrO2Nhc2VcIilcIjpjYXNlXCI7XCI6Y2FzZVwiLFwiOmNhc2VcIltcIjpjYXNlXCJdXCI6Y2FzZVwiOlwiOmNhc2VcIj9cIjpjYXNlXCJ+XCI6KytmO2JyZWFrO2RlZmF1bHQ6dT1hLnN1YnN0cihmLDQpO2lmKHU9PT1cIj4+Pj1cIil7Zis9NH1lbHNle3U9dS5zdWJzdHIoMCwzKTtpZih1PT09XCI9PT1cInx8dT09PVwiIT09XCJ8fHU9PT1cIj4+PlwifHx1PT09XCI8PD1cInx8dT09PVwiPj49XCIpe2YrPTN9ZWxzZXt1PXUuc3Vic3RyKDAsMik7aWYodT09PVwiJiZcInx8dT09PVwifHxcInx8dT09PVwiPT1cInx8dT09PVwiIT1cInx8dT09PVwiKz1cInx8dT09PVwiLT1cInx8dT09PVwiKj1cInx8dT09PVwiLz1cInx8dT09PVwiKytcInx8dT09PVwiLS1cInx8dT09PVwiPDxcInx8dT09PVwiPj5cInx8dT09PVwiJj1cInx8dT09PVwifD1cInx8dT09PVwiXj1cInx8dT09PVwiJT1cInx8dT09PVwiPD1cInx8dT09PVwiPj1cInx8dT09PVwiPT5cIil7Zis9Mn1lbHNle3U9YVtmXTtpZihcIjw+PSErLSolJnxeL1wiLmluZGV4T2YodSk+PTApeysrZn19fX19aWYoZj09PWUuc3RhcnQpe3dlKCl9ZS5lbmQ9ZjtlLnZhbHVlPXU7cmV0dXJuIGV9ZnVuY3Rpb24gUShlKXt2YXIgdT1cIlwiO3doaWxlKGY8Zyl7aWYoIWsoYVtmXSkpe2JyZWFrfXUrPWFbZisrXX1pZih1Lmxlbmd0aD09PTApe3dlKCl9aWYoTShhLmNoYXJDb2RlQXQoZikpKXt3ZSgpfXJldHVybnt0eXBlOnQuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VJbnQoXCIweFwiK3UsMTYpLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDplLGVuZDpmfX1mdW5jdGlvbiBlZShlKXt2YXIgdSxuO249XCJcIjt3aGlsZShmPGcpe3U9YVtmXTtpZih1IT09XCIwXCImJnUhPT1cIjFcIil7YnJlYWt9bis9YVtmKytdfWlmKG4ubGVuZ3RoPT09MCl7d2UoKX1pZihmPGcpe3U9YS5jaGFyQ29kZUF0KGYpO2lmKE0odSl8fF8odSkpe3dlKCl9fXJldHVybnt0eXBlOnQuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VJbnQobiwyKSxsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6ZSxlbmQ6Zn19ZnVuY3Rpb24gdGUoZSx1KXt2YXIgbixyO2lmKEkoZSkpe3I9dHJ1ZTtuPVwiMFwiK2FbZisrXX1lbHNle3I9ZmFsc2U7KytmO249XCJcIn13aGlsZShmPGcpe2lmKCFJKGFbZl0pKXticmVha31uKz1hW2YrK119aWYoIXImJm4ubGVuZ3RoPT09MCl7d2UoKX1pZihNKGEuY2hhckNvZGVBdChmKSl8fF8oYS5jaGFyQ29kZUF0KGYpKSl7d2UoKX1yZXR1cm57dHlwZTp0Lk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlSW50KG4sOCksb2N0YWw6cixsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6dSxlbmQ6Zn19ZnVuY3Rpb24gdWUoKXt2YXIgZSx0O2ZvcihlPWYrMTtlPGc7KytlKXt0PWFbZV07aWYodD09PVwiOFwifHx0PT09XCI5XCIpe3JldHVybiBmYWxzZX1pZighSSh0KSl7cmV0dXJuIHRydWV9fXJldHVybiB0cnVlfWZ1bmN0aW9uIG5lKCl7dmFyIGUsdSxuO249YVtmXTt3KF8obi5jaGFyQ29kZUF0KDApKXx8bj09PVwiLlwiLFwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50XCIpO3U9ZjtlPVwiXCI7aWYobiE9PVwiLlwiKXtlPWFbZisrXTtuPWFbZl07aWYoZT09PVwiMFwiKXtpZihuPT09XCJ4XCJ8fG49PT1cIlhcIil7KytmO3JldHVybiBRKHUpfWlmKG49PT1cImJcInx8bj09PVwiQlwiKXsrK2Y7cmV0dXJuIGVlKHUpfWlmKG49PT1cIm9cInx8bj09PVwiT1wiKXtyZXR1cm4gdGUobix1KX1pZihJKG4pKXtpZih1ZSgpKXtyZXR1cm4gdGUobix1KX19fXdoaWxlKF8oYS5jaGFyQ29kZUF0KGYpKSl7ZSs9YVtmKytdfW49YVtmXX1pZihuPT09XCIuXCIpe2UrPWFbZisrXTt3aGlsZShfKGEuY2hhckNvZGVBdChmKSkpe2UrPWFbZisrXX1uPWFbZl19aWYobj09PVwiZVwifHxuPT09XCJFXCIpe2UrPWFbZisrXTtuPWFbZl07aWYobj09PVwiK1wifHxuPT09XCItXCIpe2UrPWFbZisrXX1pZihfKGEuY2hhckNvZGVBdChmKSkpe3doaWxlKF8oYS5jaGFyQ29kZUF0KGYpKSl7ZSs9YVtmKytdfX1lbHNle3dlKCl9fWlmKE0oYS5jaGFyQ29kZUF0KGYpKSl7d2UoKX1yZXR1cm57dHlwZTp0Lk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoZSksbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OnUsZW5kOmZ9fWZ1bmN0aW9uIHJlKCl7dmFyIGU9XCJcIix1LG4scixpLG8scz1mYWxzZTt1PWFbZl07dyh1PT09XCInXCJ8fHU9PT0nXCInLFwiU3RyaW5nIGxpdGVyYWwgbXVzdCBzdGFydHMgd2l0aCBhIHF1b3RlXCIpO249ZjsrK2Y7d2hpbGUoZjxnKXtyPWFbZisrXTtpZihyPT09dSl7dT1cIlwiO2JyZWFrfWVsc2UgaWYocj09PVwiXFxcXFwiKXtyPWFbZisrXTtpZighcnx8IU8oci5jaGFyQ29kZUF0KDApKSl7c3dpdGNoKHIpe2Nhc2VcInVcIjpjYXNlXCJ4XCI6aWYoYVtmXT09PVwie1wiKXsrK2Y7ZSs9SygpfWVsc2V7aT1HKHIpO2lmKCFpKXt0aHJvdyB3ZSgpfWUrPWl9YnJlYWs7Y2FzZVwiblwiOmUrPVwiXFxuXCI7YnJlYWs7Y2FzZVwiclwiOmUrPVwiXFxyXCI7YnJlYWs7Y2FzZVwidFwiOmUrPVwiXHRcIjticmVhaztjYXNlXCJiXCI6ZSs9XCJcXGJcIjticmVhaztjYXNlXCJmXCI6ZSs9XCJcXGZcIjticmVhaztjYXNlXCJ2XCI6ZSs9XCJcdTAwMGJcIjticmVhaztjYXNlXCI4XCI6Y2FzZVwiOVwiOmUrPXI7X2UoKTticmVhaztkZWZhdWx0OmlmKEkocikpe289UChyKTtzPW8ub2N0YWx8fHM7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZShvLmNvZGUpfWVsc2V7ZSs9cn1icmVha319ZWxzZXsrK2M7aWYocj09PVwiXFxyXCImJmFbZl09PT1cIlxcblwiKXsrK2Z9cD1mfX1lbHNlIGlmKE8oci5jaGFyQ29kZUF0KDApKSl7YnJlYWt9ZWxzZXtlKz1yfX1pZih1IT09XCJcIil7d2UoKX1yZXR1cm57dHlwZTp0LlN0cmluZ0xpdGVyYWwsdmFsdWU6ZSxvY3RhbDpzLGxpbmVOdW1iZXI6QyxsaW5lU3RhcnQ6RSxzdGFydDpuLGVuZDpmfX1mdW5jdGlvbiBpZSgpe3ZhciBlPVwiXCIsdSxuLHIsaSxzLGwsRCxoO2k9ZmFsc2U7bD1mYWxzZTtuPWY7cz1hW2ZdPT09XCJgXCI7cj0yOysrZjt3aGlsZShmPGcpe3U9YVtmKytdO2lmKHU9PT1cImBcIil7cj0xO2w9dHJ1ZTtpPXRydWU7YnJlYWt9ZWxzZSBpZih1PT09XCIkXCIpe2lmKGFbZl09PT1cIntcIil7Qi5jdXJseVN0YWNrLnB1c2goXCIke1wiKTsrK2Y7aT10cnVlO2JyZWFrfWUrPXV9ZWxzZSBpZih1PT09XCJcXFxcXCIpe3U9YVtmKytdO2lmKCFPKHUuY2hhckNvZGVBdCgwKSkpe3N3aXRjaCh1KXtjYXNlXCJuXCI6ZSs9XCJcXG5cIjticmVhaztjYXNlXCJyXCI6ZSs9XCJcXHJcIjticmVhaztjYXNlXCJ0XCI6ZSs9XCJcdFwiO2JyZWFrO2Nhc2VcInVcIjpjYXNlXCJ4XCI6aWYoYVtmXT09PVwie1wiKXsrK2Y7ZSs9SygpfWVsc2V7RD1mO2g9Ryh1KTtpZihoKXtlKz1ofWVsc2V7Zj1EO2UrPXV9fWJyZWFrO2Nhc2VcImJcIjplKz1cIlxcYlwiO2JyZWFrO2Nhc2VcImZcIjplKz1cIlxcZlwiO2JyZWFrO2Nhc2VcInZcIjplKz1cIlx1MDAwYlwiO2JyZWFrO2RlZmF1bHQ6aWYodT09PVwiMFwiKXtpZihfKGEuY2hhckNvZGVBdChmKSkpe2JlKG8uVGVtcGxhdGVPY3RhbExpdGVyYWwpfWUrPVwiXFx4MDBcIn1lbHNlIGlmKEkodSkpe2JlKG8uVGVtcGxhdGVPY3RhbExpdGVyYWwpfWVsc2V7ZSs9dX1icmVha319ZWxzZXsrK2M7aWYodT09PVwiXFxyXCImJmFbZl09PT1cIlxcblwiKXsrK2Z9cD1mfX1lbHNlIGlmKE8odS5jaGFyQ29kZUF0KDApKSl7KytjO2lmKHU9PT1cIlxcclwiJiZhW2ZdPT09XCJcXG5cIil7KytmfXA9ZjtlKz1cIlxcblwifWVsc2V7ZSs9dX19aWYoIWkpe3dlKCl9aWYoIXMpe0IuY3VybHlTdGFjay5wb3AoKX1yZXR1cm57dHlwZTp0LlRlbXBsYXRlLHZhbHVlOntjb29rZWQ6ZSxyYXc6YS5zbGljZShuKzEsZi1yKX0saGVhZDpzLHRhaWw6bCxsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6bixlbmQ6Zn19ZnVuY3Rpb24gb2UoZSx0KXt2YXIgdT1cIu+/v1wiLG49ZTtpZih0LmluZGV4T2YoXCJ1XCIpPj0wKXtuPW4ucmVwbGFjZSgvXFxcXHVcXHsoWzAtOWEtZkEtRl0rKVxcfXxcXFxcdShbYS1mQS1GMC05XXs0fSkvZyxmdW5jdGlvbihlLHQsbil7dmFyIHI9cGFyc2VJbnQodHx8biwxNik7aWYocj4xMTE0MTExKXt3ZShudWxsLG8uSW52YWxpZFJlZ0V4cCl9aWYocjw9NjU1MzUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHIpfXJldHVybiB1fSkucmVwbGFjZSgvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nLHUpfXRyeXtSZWdFeHAobil9Y2F0Y2gocil7d2UobnVsbCxvLkludmFsaWRSZWdFeHApfXRyeXtyZXR1cm4gbmV3IFJlZ0V4cChlLHQpfWNhdGNoKGkpe3JldHVybiBudWxsfX1mdW5jdGlvbiBzZSgpe3ZhciBlLHQsdSxuLHI7ZT1hW2ZdO3coZT09PVwiL1wiLFwiUmVndWxhciBleHByZXNzaW9uIGxpdGVyYWwgbXVzdCBzdGFydCB3aXRoIGEgc2xhc2hcIik7dD1hW2YrK107dT1mYWxzZTtuPWZhbHNlO3doaWxlKGY8Zyl7ZT1hW2YrK107dCs9ZTtpZihlPT09XCJcXFxcXCIpe2U9YVtmKytdO2lmKE8oZS5jaGFyQ29kZUF0KDApKSl7d2UobnVsbCxvLlVudGVybWluYXRlZFJlZ0V4cCl9dCs9ZX1lbHNlIGlmKE8oZS5jaGFyQ29kZUF0KDApKSl7d2UobnVsbCxvLlVudGVybWluYXRlZFJlZ0V4cCl9ZWxzZSBpZih1KXtpZihlPT09XCJdXCIpe3U9ZmFsc2V9fWVsc2V7aWYoZT09PVwiL1wiKXtuPXRydWU7YnJlYWt9ZWxzZSBpZihlPT09XCJbXCIpe3U9dHJ1ZX19fWlmKCFuKXt3ZShudWxsLG8uVW50ZXJtaW5hdGVkUmVnRXhwKX1yPXQuc3Vic3RyKDEsdC5sZW5ndGgtMik7cmV0dXJue3ZhbHVlOnIsbGl0ZXJhbDp0fX1mdW5jdGlvbiBhZSgpe3ZhciBlLHQsdSxuO3Q9XCJcIjt1PVwiXCI7d2hpbGUoZjxnKXtlPWFbZl07aWYoIVIoZS5jaGFyQ29kZUF0KDApKSl7YnJlYWt9KytmO2lmKGU9PT1cIlxcXFxcIiYmZjxnKXtlPWFbZl07aWYoZT09PVwidVwiKXsrK2Y7bj1mO2U9RyhcInVcIik7aWYoZSl7dSs9ZTtmb3IodCs9XCJcXFxcdVwiO248ZjsrK24pe3QrPWFbbl19fWVsc2V7Zj1uO3UrPVwidVwiO3QrPVwiXFxcXHVcIn1fZSgpfWVsc2V7dCs9XCJcXFxcXCI7X2UoKX19ZWxzZXt1Kz1lO3QrPWV9fXJldHVybnt2YWx1ZTp1LGxpdGVyYWw6dH19ZnVuY3Rpb24gbGUoKXt2YXIgZSx1LG4scjtGPXRydWU7eT1udWxsO1koKTtlPWY7dT1zZSgpO249YWUoKTtyPW9lKHUudmFsdWUsbi52YWx1ZSk7Rj1mYWxzZTtpZih2LnRva2VuaXplKXtyZXR1cm57dHlwZTp0LlJlZ3VsYXJFeHByZXNzaW9uLHZhbHVlOnIscmVnZXg6e3BhdHRlcm46dS52YWx1ZSxmbGFnczpuLnZhbHVlfSxsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6ZSxlbmQ6Zn19cmV0dXJue2xpdGVyYWw6dS5saXRlcmFsK24ubGl0ZXJhbCx2YWx1ZTpyLHJlZ2V4OntwYXR0ZXJuOnUudmFsdWUsZmxhZ3M6bi52YWx1ZX0sc3RhcnQ6ZSxlbmQ6Zn19ZnVuY3Rpb24gZmUoKXt2YXIgZSx0LHUsbjtZKCk7ZT1mO3Q9e3N0YXJ0OntsaW5lOmMsY29sdW1uOmYtcH19O3U9bGUoKTt0LmVuZD17bGluZTpjLGNvbHVtbjpmLXB9O2lmKCF2LnRva2VuaXplKXtpZih2LnRva2Vucy5sZW5ndGg+MCl7bj12LnRva2Vuc1t2LnRva2Vucy5sZW5ndGgtMV07aWYobi5yYW5nZVswXT09PWUmJm4udHlwZT09PVwiUHVuY3R1YXRvclwiKXtpZihuLnZhbHVlPT09XCIvXCJ8fG4udmFsdWU9PT1cIi89XCIpe3YudG9rZW5zLnBvcCgpfX19di50b2tlbnMucHVzaCh7dHlwZTpcIlJlZ3VsYXJFeHByZXNzaW9uXCIsdmFsdWU6dS5saXRlcmFsLHJlZ2V4OnUucmVnZXgscmFuZ2U6W2UsZl0sbG9jOnR9KX1yZXR1cm4gdX1mdW5jdGlvbiBjZShlKXtyZXR1cm4gZS50eXBlPT09dC5JZGVudGlmaWVyfHxlLnR5cGU9PT10LktleXdvcmR8fGUudHlwZT09PXQuQm9vbGVhbkxpdGVyYWx8fGUudHlwZT09PXQuTnVsbExpdGVyYWx9ZnVuY3Rpb24gcGUoKXt2YXIgZSx0O2U9di50b2tlbnNbdi50b2tlbnMubGVuZ3RoLTFdO2lmKCFlKXtyZXR1cm4gZmUoKX1pZihlLnR5cGU9PT1cIlB1bmN0dWF0b3JcIil7aWYoZS52YWx1ZT09PVwiXVwiKXtyZXR1cm4gWigpfWlmKGUudmFsdWU9PT1cIilcIil7dD12LnRva2Vuc1t2Lm9wZW5QYXJlblRva2VuLTFdO2lmKHQmJnQudHlwZT09PVwiS2V5d29yZFwiJiYodC52YWx1ZT09PVwiaWZcInx8dC52YWx1ZT09PVwid2hpbGVcInx8dC52YWx1ZT09PVwiZm9yXCJ8fHQudmFsdWU9PT1cIndpdGhcIikpe3JldHVybiBmZSgpfXJldHVybiBaKCl9aWYoZS52YWx1ZT09PVwifVwiKXtpZih2LnRva2Vuc1t2Lm9wZW5DdXJseVRva2VuLTNdJiZ2LnRva2Vuc1t2Lm9wZW5DdXJseVRva2VuLTNdLnR5cGU9PT1cIktleXdvcmRcIil7dD12LnRva2Vuc1t2Lm9wZW5DdXJseVRva2VuLTRdO2lmKCF0KXtyZXR1cm4gWigpfX1lbHNlIGlmKHYudG9rZW5zW3Yub3BlbkN1cmx5VG9rZW4tNF0mJnYudG9rZW5zW3Yub3BlbkN1cmx5VG9rZW4tNF0udHlwZT09PVwiS2V5d29yZFwiKXt0PXYudG9rZW5zW3Yub3BlbkN1cmx5VG9rZW4tNV07aWYoIXQpe3JldHVybiBmZSgpfX1lbHNle3JldHVybiBaKCl9aWYobi5pbmRleE9mKHQudmFsdWUpPj0wKXtyZXR1cm4gWigpfXJldHVybiBmZSgpfXJldHVybiBmZSgpfWlmKGUudHlwZT09PVwiS2V5d29yZFwiJiZlLnZhbHVlIT09XCJ0aGlzXCIpe3JldHVybiBmZSgpfXJldHVybiBaKCl9ZnVuY3Rpb24gRGUoKXt2YXIgZSx1O2lmKGY+PWcpe3JldHVybnt0eXBlOnQuRU9GLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDpmLGVuZDpmfX1lPWEuY2hhckNvZGVBdChmKTtpZihNKGUpKXt1PVgoKTtpZihsJiZOKHUudmFsdWUpKXt1LnR5cGU9dC5LZXl3b3JkfXJldHVybiB1fWlmKGU9PT00MHx8ZT09PTQxfHxlPT09NTkpe3JldHVybiBaKCl9aWYoZT09PTM5fHxlPT09MzQpe3JldHVybiByZSgpfWlmKGU9PT00Nil7aWYoXyhhLmNoYXJDb2RlQXQoZisxKSkpe3JldHVybiBuZSgpfXJldHVybiBaKCl9aWYoXyhlKSl7cmV0dXJuIG5lKCl9aWYodi50b2tlbml6ZSYmZT09PTQ3KXtyZXR1cm4gcGUoKX1pZihlPT09OTZ8fGU9PT0xMjUmJkIuY3VybHlTdGFja1tCLmN1cmx5U3RhY2subGVuZ3RoLTFdPT09XCIke1wiKXtyZXR1cm4gaWUoKX1pZihlPj01NTI5NiYmZTw1NzM0Myl7ZT0kKGYpO2lmKE0oZSkpe3JldHVybiBYKCl9fXJldHVybiBaKCl9ZnVuY3Rpb24gaGUoKXt2YXIgZSxuLHIsaTtlPXtzdGFydDp7bGluZTpjLGNvbHVtbjpmLXB9fTtuPURlKCk7ZS5lbmQ9e2xpbmU6Yyxjb2x1bW46Zi1wfTtpZihuLnR5cGUhPT10LkVPRil7cj1hLnNsaWNlKG4uc3RhcnQsbi5lbmQpO2k9e3R5cGU6dVtuLnR5cGVdLHZhbHVlOnIscmFuZ2U6W24uc3RhcnQsbi5lbmRdLGxvYzplfTtpZihuLnJlZ2V4KXtpLnJlZ2V4PXtwYXR0ZXJuOm4ucmVnZXgucGF0dGVybixmbGFnczpuLnJlZ2V4LmZsYWdzfX12LnRva2Vucy5wdXNoKGkpfXJldHVybiBufWZ1bmN0aW9uIG1lKCl7dmFyIGU7Rj10cnVlO2g9ZjttPWM7ZD1wO1koKTtlPXk7QT1mO0M9YztFPXA7eT10eXBlb2Ygdi50b2tlbnMhPT1cInVuZGVmaW5lZFwiP2hlKCk6RGUoKTtGPWZhbHNlO3JldHVybiBlfWZ1bmN0aW9uIGRlKCl7Rj10cnVlO1koKTtoPWY7bT1jO2Q9cDtBPWY7Qz1jO0U9cDt5PXR5cGVvZiB2LnRva2VucyE9PVwidW5kZWZpbmVkXCI/aGUoKTpEZSgpO0Y9ZmFsc2V9ZnVuY3Rpb24gQWUoKXt0aGlzLmxpbmU9Qzt0aGlzLmNvbHVtbj1BLUV9ZnVuY3Rpb24gQ2UoKXt0aGlzLnN0YXJ0PW5ldyBBZTt0aGlzLmVuZD1udWxsfWZ1bmN0aW9uIEVlKGUpe3RoaXMuc3RhcnQ9e2xpbmU6ZS5saW5lTnVtYmVyLGNvbHVtbjplLnN0YXJ0LWUubGluZVN0YXJ0fTt0aGlzLmVuZD1udWxsfWZ1bmN0aW9uIEZlKCl7aWYodi5yYW5nZSl7dGhpcy5yYW5nZT1bQSwwXX1pZih2LmxvYyl7dGhpcy5sb2M9bmV3IENlfX1mdW5jdGlvbiBnZShlKXtpZih2LnJhbmdlKXt0aGlzLnJhbmdlPVtlLnN0YXJ0LDBdfWlmKHYubG9jKXt0aGlzLmxvYz1uZXcgRWUoZSl9fWdlLnByb3RvdHlwZT1GZS5wcm90b3R5cGU9e3Byb2Nlc3NDb21tZW50OmZ1bmN0aW9uKCl7dmFyIGUsdCx1LG49di5ib3R0b21SaWdodFN0YWNrLGksbyxzPW5bbi5sZW5ndGgtMV07aWYodGhpcy50eXBlPT09ci5Qcm9ncmFtKXtpZih0aGlzLmJvZHkubGVuZ3RoPjApe3JldHVybn19aWYodi50cmFpbGluZ0NvbW1lbnRzLmxlbmd0aD4wKXt1PVtdO2ZvcihpPXYudHJhaWxpbmdDb21tZW50cy5sZW5ndGgtMTtpPj0wOy0taSl7bz12LnRyYWlsaW5nQ29tbWVudHNbaV07aWYoby5yYW5nZVswXT49dGhpcy5yYW5nZVsxXSl7dS51bnNoaWZ0KG8pO3YudHJhaWxpbmdDb21tZW50cy5zcGxpY2UoaSwxKX19di50cmFpbGluZ0NvbW1lbnRzPVtdfWVsc2V7aWYocyYmcy50cmFpbGluZ0NvbW1lbnRzJiZzLnRyYWlsaW5nQ29tbWVudHNbMF0ucmFuZ2VbMF0+PXRoaXMucmFuZ2VbMV0pe3U9cy50cmFpbGluZ0NvbW1lbnRzO2RlbGV0ZSBzLnRyYWlsaW5nQ29tbWVudHN9fXdoaWxlKHMmJnMucmFuZ2VbMF0+PXRoaXMucmFuZ2VbMF0pe2U9bi5wb3AoKTtzPW5bbi5sZW5ndGgtMV19aWYoZSl7aWYoZS5sZWFkaW5nQ29tbWVudHMpe3Q9W107Zm9yKGk9ZS5sZWFkaW5nQ29tbWVudHMubGVuZ3RoLTE7aT49MDstLWkpe289ZS5sZWFkaW5nQ29tbWVudHNbaV07aWYoby5yYW5nZVsxXTw9dGhpcy5yYW5nZVswXSl7dC51bnNoaWZ0KG8pO2UubGVhZGluZ0NvbW1lbnRzLnNwbGljZShpLDEpfX1pZighZS5sZWFkaW5nQ29tbWVudHMubGVuZ3RoKXtlLmxlYWRpbmdDb21tZW50cz11bmRlZmluZWR9fX1lbHNlIGlmKHYubGVhZGluZ0NvbW1lbnRzLmxlbmd0aD4wKXt0PVtdO2ZvcihpPXYubGVhZGluZ0NvbW1lbnRzLmxlbmd0aC0xO2k+PTA7LS1pKXtvPXYubGVhZGluZ0NvbW1lbnRzW2ldO2lmKG8ucmFuZ2VbMV08PXRoaXMucmFuZ2VbMF0pe3QudW5zaGlmdChvKTt2LmxlYWRpbmdDb21tZW50cy5zcGxpY2UoaSwxKX19fWlmKHQmJnQubGVuZ3RoPjApe3RoaXMubGVhZGluZ0NvbW1lbnRzPXR9aWYodSYmdS5sZW5ndGg+MCl7dGhpcy50cmFpbGluZ0NvbW1lbnRzPXV9bi5wdXNoKHRoaXMpfSxmaW5pc2g6ZnVuY3Rpb24oKXtpZih2LnJhbmdlKXt0aGlzLnJhbmdlWzFdPWh9aWYodi5sb2Mpe3RoaXMubG9jLmVuZD17bGluZTptLGNvbHVtbjpoLWR9O2lmKHYuc291cmNlKXt0aGlzLmxvYy5zb3VyY2U9di5zb3VyY2V9fWlmKHYuYXR0YWNoQ29tbWVudCl7dGhpcy5wcm9jZXNzQ29tbWVudCgpfX0sZmluaXNoQXJyYXlFeHByZXNzaW9uOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkFycmF5RXhwcmVzc2lvbjt0aGlzLmVsZW1lbnRzPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQXJyYXlQYXR0ZXJuOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkFycmF5UGF0dGVybjt0aGlzLmVsZW1lbnRzPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQXJyb3dGdW5jdGlvbkV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUsbil7dGhpcy50eXBlPXIuQXJyb3dGdW5jdGlvbkV4cHJlc3Npb247dGhpcy5pZD1udWxsO3RoaXMucGFyYW1zPWU7dGhpcy5kZWZhdWx0cz10O3RoaXMuYm9keT11O3RoaXMuZ2VuZXJhdG9yPWZhbHNlO3RoaXMuZXhwcmVzc2lvbj1uO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEFzc2lnbm1lbnRFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5Bc3NpZ25tZW50RXhwcmVzc2lvbjt0aGlzLm9wZXJhdG9yPWU7dGhpcy5sZWZ0PXQ7dGhpcy5yaWdodD11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEFzc2lnbm1lbnRQYXR0ZXJuOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuQXNzaWdubWVudFBhdHRlcm47dGhpcy5sZWZ0PWU7dGhpcy5yaWdodD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEJpbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1lPT09XCJ8fFwifHxlPT09XCImJlwiP3IuTG9naWNhbEV4cHJlc3Npb246ci5CaW5hcnlFeHByZXNzaW9uO3RoaXMub3BlcmF0b3I9ZTt0aGlzLmxlZnQ9dDt0aGlzLnJpZ2h0PXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQmxvY2tTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuQmxvY2tTdGF0ZW1lbnQ7dGhpcy5ib2R5PWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQnJlYWtTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuQnJlYWtTdGF0ZW1lbnQ7dGhpcy5sYWJlbD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENhbGxFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuQ2FsbEV4cHJlc3Npb247dGhpcy5jYWxsZWU9ZTt0aGlzLmFyZ3VtZW50cz10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENhdGNoQ2xhdXNlOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuQ2F0Y2hDbGF1c2U7dGhpcy5wYXJhbT1lO3RoaXMuYm9keT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENsYXNzQm9keTpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5DbGFzc0JvZHk7dGhpcy5ib2R5PWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ2xhc3NEZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuQ2xhc3NEZWNsYXJhdGlvbjt0aGlzLmlkPWU7dGhpcy5zdXBlckNsYXNzPXQ7dGhpcy5ib2R5PXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ2xhc3NFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5DbGFzc0V4cHJlc3Npb247dGhpcy5pZD1lO3RoaXMuc3VwZXJDbGFzcz10O3RoaXMuYm9keT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuQ29uZGl0aW9uYWxFeHByZXNzaW9uO3RoaXMudGVzdD1lO3RoaXMuY29uc2VxdWVudD10O3RoaXMuYWx0ZXJuYXRlPXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ29udGludWVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuQ29udGludWVTdGF0ZW1lbnQ7dGhpcy5sYWJlbD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaERlYnVnZ2VyU3RhdGVtZW50OmZ1bmN0aW9uKCl7dGhpcy50eXBlPXIuRGVidWdnZXJTdGF0ZW1lbnQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRG9XaGlsZVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkRvV2hpbGVTdGF0ZW1lbnQ7dGhpcy5ib2R5PWU7dGhpcy50ZXN0PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRW1wdHlTdGF0ZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLnR5cGU9ci5FbXB0eVN0YXRlbWVudDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hFeHByZXNzaW9uU3RhdGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkV4cHJlc3Npb25TdGF0ZW1lbnQ7dGhpcy5leHByZXNzaW9uPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRm9yU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCx1LG4pe3RoaXMudHlwZT1yLkZvclN0YXRlbWVudDt0aGlzLmluaXQ9ZTt0aGlzLnRlc3Q9dDt0aGlzLnVwZGF0ZT11O3RoaXMuYm9keT1uO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEZvck9mU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5Gb3JPZlN0YXRlbWVudDt0aGlzLmxlZnQ9ZTt0aGlzLnJpZ2h0PXQ7dGhpcy5ib2R5PXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRm9ySW5TdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkZvckluU3RhdGVtZW50O3RoaXMubGVmdD1lO3RoaXMucmlnaHQ9dDt0aGlzLmJvZHk9dTt0aGlzLmVhY2g9ZmFsc2U7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRnVuY3Rpb25EZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQsdSxuLGkpe3RoaXMudHlwZT1yLkZ1bmN0aW9uRGVjbGFyYXRpb247dGhpcy5pZD1lO3RoaXMucGFyYW1zPXQ7dGhpcy5kZWZhdWx0cz11O3RoaXMuYm9keT1uO3RoaXMuZ2VuZXJhdG9yPWk7dGhpcy5leHByZXNzaW9uPWZhbHNlO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEZ1bmN0aW9uRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSxuLGkpe3RoaXMudHlwZT1yLkZ1bmN0aW9uRXhwcmVzc2lvbjt0aGlzLmlkPWU7dGhpcy5wYXJhbXM9dDt0aGlzLmRlZmF1bHRzPXU7dGhpcy5ib2R5PW47dGhpcy5nZW5lcmF0b3I9aTt0aGlzLmV4cHJlc3Npb249ZmFsc2U7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoSWRlbnRpZmllcjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5JZGVudGlmaWVyO3RoaXMubmFtZT1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaElmU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5JZlN0YXRlbWVudDt0aGlzLnRlc3Q9ZTt0aGlzLmNvbnNlcXVlbnQ9dDt0aGlzLmFsdGVybmF0ZT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaExhYmVsZWRTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5MYWJlbGVkU3RhdGVtZW50O3RoaXMubGFiZWw9ZTt0aGlzLmJvZHk9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hMaXRlcmFsOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkxpdGVyYWw7dGhpcy52YWx1ZT1lLnZhbHVlO3RoaXMucmF3PWEuc2xpY2UoZS5zdGFydCxlLmVuZCk7aWYoZS5yZWdleCl7dGhpcy5yZWdleD1lLnJlZ2V4fXRoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaE1lbWJlckV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLk1lbWJlckV4cHJlc3Npb247dGhpcy5jb21wdXRlZD1lPT09XCJbXCI7dGhpcy5vYmplY3Q9dDt0aGlzLnByb3BlcnR5PXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoTWV0YVByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuTWV0YVByb3BlcnR5O3RoaXMubWV0YT1lO3RoaXMucHJvcGVydHk9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hOZXdFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuTmV3RXhwcmVzc2lvbjt0aGlzLmNhbGxlZT1lO3RoaXMuYXJndW1lbnRzPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5PYmplY3RFeHByZXNzaW9uO3RoaXMucHJvcGVydGllcz1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaE9iamVjdFBhdHRlcm46ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuT2JqZWN0UGF0dGVybjt0aGlzLnByb3BlcnRpZXM9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hQb3N0Zml4RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlVwZGF0ZUV4cHJlc3Npb247dGhpcy5vcGVyYXRvcj1lO3RoaXMuYXJndW1lbnQ9dDt0aGlzLnByZWZpeD1mYWxzZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hQcm9ncmFtOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuUHJvZ3JhbTt0aGlzLmJvZHk9ZTt0aGlzLnNvdXJjZVR5cGU9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hQcm9wZXJ0eTpmdW5jdGlvbihlLHQsdSxuLGksbyl7dGhpcy50eXBlPXIuUHJvcGVydHk7dGhpcy5rZXk9dDt0aGlzLmNvbXB1dGVkPXU7dGhpcy52YWx1ZT1uO3RoaXMua2luZD1lO3RoaXMubWV0aG9kPWk7dGhpcy5zaG9ydGhhbmQ9bzt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hSZXN0RWxlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5SZXN0RWxlbWVudDt0aGlzLmFyZ3VtZW50PWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoUmV0dXJuU3RhdGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLlJldHVyblN0YXRlbWVudDt0aGlzLmFyZ3VtZW50PWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoU2VxdWVuY2VFeHByZXNzaW9uOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLlNlcXVlbmNlRXhwcmVzc2lvbjt0aGlzLmV4cHJlc3Npb25zPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoU3ByZWFkRWxlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5TcHJlYWRFbGVtZW50O3RoaXMuYXJndW1lbnQ9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hTd2l0Y2hDYXNlOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuU3dpdGNoQ2FzZTt0aGlzLnRlc3Q9ZTt0aGlzLmNvbnNlcXVlbnQ9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hTdXBlcjpmdW5jdGlvbigpe3RoaXMudHlwZT1yLlN1cGVyO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFN3aXRjaFN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlN3aXRjaFN0YXRlbWVudDt0aGlzLmRpc2NyaW1pbmFudD1lO3RoaXMuY2FzZXM9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5UYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb247dGhpcy50YWc9ZTt0aGlzLnF1YXNpPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVGVtcGxhdGVFbGVtZW50OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuVGVtcGxhdGVFbGVtZW50O3RoaXMudmFsdWU9ZTt0aGlzLnRhaWw9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hUZW1wbGF0ZUxpdGVyYWw6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5UZW1wbGF0ZUxpdGVyYWw7dGhpcy5xdWFzaXM9ZTt0aGlzLmV4cHJlc3Npb25zPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVGhpc0V4cHJlc3Npb246ZnVuY3Rpb24oKXt0aGlzLnR5cGU9ci5UaGlzRXhwcmVzc2lvbjt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hUaHJvd1N0YXRlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5UaHJvd1N0YXRlbWVudDt0aGlzLmFyZ3VtZW50PWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVHJ5U3RhdGVtZW50OmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5UcnlTdGF0ZW1lbnQ7dGhpcy5ibG9jaz1lO3RoaXMuZ3VhcmRlZEhhbmRsZXJzPVtdO3RoaXMuaGFuZGxlcnM9dD9bdF06W107dGhpcy5oYW5kbGVyPXQ7dGhpcy5maW5hbGl6ZXI9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ZT09PVwiKytcInx8ZT09PVwiLS1cIj9yLlVwZGF0ZUV4cHJlc3Npb246ci5VbmFyeUV4cHJlc3Npb247dGhpcy5vcGVyYXRvcj1lO3RoaXMuYXJndW1lbnQ9dDt0aGlzLnByZWZpeD10cnVlO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFZhcmlhYmxlRGVjbGFyYXRpb246ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuVmFyaWFibGVEZWNsYXJhdGlvbjt0aGlzLmRlY2xhcmF0aW9ucz1lO3RoaXMua2luZD1cInZhclwiO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaExleGljYWxEZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlZhcmlhYmxlRGVjbGFyYXRpb247dGhpcy5kZWNsYXJhdGlvbnM9ZTt0aGlzLmtpbmQ9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hWYXJpYWJsZURlY2xhcmF0b3I6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5WYXJpYWJsZURlY2xhcmF0b3I7dGhpcy5pZD1lO3RoaXMuaW5pdD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFdoaWxlU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuV2hpbGVTdGF0ZW1lbnQ7dGhpcy50ZXN0PWU7dGhpcy5ib2R5PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoV2l0aFN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLldpdGhTdGF0ZW1lbnQ7dGhpcy5vYmplY3Q9ZTt0aGlzLmJvZHk9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hFeHBvcnRTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5FeHBvcnRTcGVjaWZpZXI7dGhpcy5leHBvcnRlZD10fHxlO3RoaXMubG9jYWw9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hJbXBvcnREZWZhdWx0U3BlY2lmaWVyOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkltcG9ydERlZmF1bHRTcGVjaWZpZXI7dGhpcy5sb2NhbD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEltcG9ydE5hbWVzcGFjZVNwZWNpZmllcjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5JbXBvcnROYW1lc3BhY2VTcGVjaWZpZXI7dGhpcy5sb2NhbD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEV4cG9ydE5hbWVkRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkV4cG9ydE5hbWVkRGVjbGFyYXRpb247dGhpcy5kZWNsYXJhdGlvbj1lO3RoaXMuc3BlY2lmaWVycz10O3RoaXMuc291cmNlPXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkV4cG9ydERlZmF1bHREZWNsYXJhdGlvbjt0aGlzLmRlY2xhcmF0aW9uPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRXhwb3J0QWxsRGVjbGFyYXRpb246ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuRXhwb3J0QWxsRGVjbGFyYXRpb247dGhpcy5zb3VyY2U9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hJbXBvcnRTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5JbXBvcnRTcGVjaWZpZXI7dGhpcy5sb2NhbD1lfHx0O3RoaXMuaW1wb3J0ZWQ9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hJbXBvcnREZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkltcG9ydERlY2xhcmF0aW9uO3RoaXMuc3BlY2lmaWVycz1lO3RoaXMuc291cmNlPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoWWllbGRFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuWWllbGRFeHByZXNzaW9uO3RoaXMuYXJndW1lbnQ9ZTt0aGlzLmRlbGVnYXRlPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc319O2Z1bmN0aW9uIHllKGUpe3ZhciB0LHU7Zm9yKHQ9MDt0PHYuZXJyb3JzLmxlbmd0aDt0Kyspe3U9di5lcnJvcnNbdF07aWYodS5pbmRleD09PWUuaW5kZXgmJnUubWVzc2FnZT09PWUubWVzc2FnZSl7cmV0dXJufX12LmVycm9ycy5wdXNoKGUpfWZ1bmN0aW9uIEJlKGUsdCl7dmFyIHU9bmV3IEVycm9yKGUpO3RyeXt0aHJvdyB1fWNhdGNoKG4pe2lmKE9iamVjdC5jcmVhdGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSl7dT1PYmplY3QuY3JlYXRlKG4pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LFwiY29sdW1uXCIse3ZhbHVlOnR9KX19ZmluYWxseXtyZXR1cm4gdX19ZnVuY3Rpb24gdmUoZSx0LHUpe3ZhciBuLHIsaTtuPVwiTGluZSBcIitlK1wiOiBcIit1O3I9dC0oRj9wOmQpKzE7aT1CZShuLHIpO2kubGluZU51bWJlcj1lO2kuZGVzY3JpcHRpb249dTtpLmluZGV4PXQ7cmV0dXJuIGl9ZnVuY3Rpb24gYmUoZSl7dmFyIHQsdTt0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt1PWUucmVwbGFjZSgvJShcXGQpL2csZnVuY3Rpb24oZSx1KXt3KHU8dC5sZW5ndGgsXCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlXCIpO3JldHVybiB0W3VdfSk7dGhyb3cgdmUobSxoLHUpfWZ1bmN0aW9uIFNlKGUpe3ZhciB0LHUsbjt0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt1PWUucmVwbGFjZSgvJShcXGQpL2csZnVuY3Rpb24oZSx1KXt3KHU8dC5sZW5ndGgsXCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlXCIpO3JldHVybiB0W3VdfSk7bj12ZShjLGgsdSk7aWYodi5lcnJvcnMpe3llKG4pfWVsc2V7dGhyb3cgbn19ZnVuY3Rpb24geGUoZSx1KXt2YXIgbixyPXV8fG8uVW5leHBlY3RlZFRva2VuO2lmKGUpe2lmKCF1KXtyPWUudHlwZT09PXQuRU9GP28uVW5leHBlY3RlZEVPUzplLnR5cGU9PT10LklkZW50aWZpZXI/by5VbmV4cGVjdGVkSWRlbnRpZmllcjplLnR5cGU9PT10Lk51bWVyaWNMaXRlcmFsP28uVW5leHBlY3RlZE51bWJlcjplLnR5cGU9PT10LlN0cmluZ0xpdGVyYWw/by5VbmV4cGVjdGVkU3RyaW5nOmUudHlwZT09PXQuVGVtcGxhdGU/by5VbmV4cGVjdGVkVGVtcGxhdGU6by5VbmV4cGVjdGVkVG9rZW47aWYoZS50eXBlPT09dC5LZXl3b3JkKXtpZihUKGUudmFsdWUpKXtyPW8uVW5leHBlY3RlZFJlc2VydmVkfWVsc2UgaWYobCYmTihlLnZhbHVlKSl7cj1vLlN0cmljdFJlc2VydmVkV29yZH19fW49ZS50eXBlPT09dC5UZW1wbGF0ZT9lLnZhbHVlLnJhdzplLnZhbHVlfWVsc2V7bj1cIklMTEVHQUxcIn1yPXIucmVwbGFjZShcIiUwXCIsbik7cmV0dXJuIGUmJnR5cGVvZiBlLmxpbmVOdW1iZXI9PT1cIm51bWJlclwiP3ZlKGUubGluZU51bWJlcixlLnN0YXJ0LHIpOnZlKEY/YzptLEY/ZjpoLHIpfWZ1bmN0aW9uIHdlKGUsdCl7dGhyb3cgeGUoZSx0KX1mdW5jdGlvbiBfZShlLHQpe3ZhciB1PXhlKGUsdCk7aWYodi5lcnJvcnMpe3llKHUpfWVsc2V7dGhyb3cgdX19ZnVuY3Rpb24ga2UoZSl7dmFyIHU9bWUoKTtpZih1LnR5cGUhPT10LlB1bmN0dWF0b3J8fHUudmFsdWUhPT1lKXt3ZSh1KX19ZnVuY3Rpb24gSWUoKXt2YXIgZTtpZih2LmVycm9ycyl7ZT15O2lmKGUudHlwZT09PXQuUHVuY3R1YXRvciYmZS52YWx1ZT09PVwiLFwiKXttZSgpfWVsc2UgaWYoZS50eXBlPT09dC5QdW5jdHVhdG9yJiZlLnZhbHVlPT09XCI7XCIpe21lKCk7X2UoZSl9ZWxzZXtfZShlLG8uVW5leHBlY3RlZFRva2VuKX19ZWxzZXtrZShcIixcIil9fWZ1bmN0aW9uIFBlKGUpe3ZhciB1PW1lKCk7aWYodS50eXBlIT09dC5LZXl3b3JkfHx1LnZhbHVlIT09ZSl7d2UodSl9fWZ1bmN0aW9uIExlKGUpe3JldHVybiB5LnR5cGU9PT10LlB1bmN0dWF0b3ImJnkudmFsdWU9PT1lfWZ1bmN0aW9uIE9lKGUpe3JldHVybiB5LnR5cGU9PT10LktleXdvcmQmJnkudmFsdWU9PT1lfWZ1bmN0aW9uIGplKGUpe3JldHVybiB5LnR5cGU9PT10LklkZW50aWZpZXImJnkudmFsdWU9PT1lfWZ1bmN0aW9uIE1lKCl7dmFyIGU7aWYoeS50eXBlIT09dC5QdW5jdHVhdG9yKXtyZXR1cm4gZmFsc2V9ZT15LnZhbHVlO3JldHVybiBlPT09XCI9XCJ8fGU9PT1cIio9XCJ8fGU9PT1cIi89XCJ8fGU9PT1cIiU9XCJ8fGU9PT1cIis9XCJ8fGU9PT1cIi09XCJ8fGU9PT1cIjw8PVwifHxlPT09XCI+Pj1cInx8ZT09PVwiPj4+PVwifHxlPT09XCImPVwifHxlPT09XCJePVwifHxlPT09XCJ8PVwifWZ1bmN0aW9uIFJlKCl7aWYoYS5jaGFyQ29kZUF0KEEpPT09NTl8fExlKFwiO1wiKSl7bWUoKTtyZXR1cm59aWYoRCl7cmV0dXJufWg9QTttPUM7ZD1FO2lmKHkudHlwZSE9PXQuRU9GJiYhTGUoXCJ9XCIpKXt3ZSh5KX19ZnVuY3Rpb24gVGUoZSl7dmFyIHQ9Yix1PVMsbj14LHI7Yj10cnVlO1M9dHJ1ZTt4PW51bGw7cj1lKCk7aWYoeCE9PW51bGwpe3dlKHgpfWI9dDtTPXU7eD1uO3JldHVybiByfWZ1bmN0aW9uIE5lKGUpe3ZhciB0PWIsdT1TLG49eCxyO2I9dHJ1ZTtTPXRydWU7eD1udWxsO3I9ZSgpO2I9YiYmdDtTPVMmJnU7eD1ufHx4O3JldHVybiByfWZ1bmN0aW9uIHFlKGUsdCl7dmFyIHU9bmV3IEZlLG49W10scixpO2tlKFwiW1wiKTt3aGlsZSghTGUoXCJdXCIpKXtpZihMZShcIixcIikpe21lKCk7bi5wdXNoKG51bGwpfWVsc2V7aWYoTGUoXCIuLi5cIikpe2k9bmV3IEZlO21lKCk7ZS5wdXNoKHkpO3I9U3QoZSx0KTtuLnB1c2goaS5maW5pc2hSZXN0RWxlbWVudChyKSk7YnJlYWt9ZWxzZXtuLnB1c2goVmUoZSx0KSl9aWYoIUxlKFwiXVwiKSl7a2UoXCIsXCIpfX19a2UoXCJdXCIpO3JldHVybiB1LmZpbmlzaEFycmF5UGF0dGVybihuKX1mdW5jdGlvbiBVZShlLHUpe3ZhciBuPW5ldyBGZSxyLGksbz1MZShcIltcIikscztpZih5LnR5cGU9PT10LklkZW50aWZpZXIpe2k9eTtyPVN0KCk7aWYoTGUoXCI9XCIpKXtlLnB1c2goaSk7bWUoKTtzPWd0KCk7cmV0dXJuIG4uZmluaXNoUHJvcGVydHkoXCJpbml0XCIscixmYWxzZSxuZXcgZ2UoaSkuZmluaXNoQXNzaWdubWVudFBhdHRlcm4ocixzKSxmYWxzZSxmYWxzZSl9ZWxzZSBpZighTGUoXCI6XCIpKXtlLnB1c2goaSk7cmV0dXJuIG4uZmluaXNoUHJvcGVydHkoXCJpbml0XCIscixmYWxzZSxyLGZhbHNlLHRydWUpfX1lbHNle3I9JGUoZSx1KX1rZShcIjpcIik7cz1WZShlLHUpO3JldHVybiBuLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHIsbyxzLGZhbHNlLGZhbHNlKX1mdW5jdGlvbiB6ZShlLHQpe3ZhciB1PW5ldyBGZSxuPVtdO2tlKFwie1wiKTt3aGlsZSghTGUoXCJ9XCIpKXtuLnB1c2goVWUoZSx0KSk7aWYoIUxlKFwifVwiKSl7a2UoXCIsXCIpfX1tZSgpO3JldHVybiB1LmZpbmlzaE9iamVjdFBhdHRlcm4obil9ZnVuY3Rpb24gV2UoZSx0KXtpZihMZShcIltcIikpe3JldHVybiBxZShlLHQpfWVsc2UgaWYoTGUoXCJ7XCIpKXtyZXR1cm4gemUoZSx0KX1lLnB1c2goeSk7cmV0dXJuIFN0KHQpfWZ1bmN0aW9uIFZlKGUsdCl7dmFyIHU9eSxuLHIsaTtuPVdlKGUsdCk7aWYoTGUoXCI9XCIpKXttZSgpO3I9Qi5hbGxvd1lpZWxkO0IuYWxsb3dZaWVsZD10cnVlO2k9VGUoZ3QpO0IuYWxsb3dZaWVsZD1yO249bmV3IGdlKHUpLmZpbmlzaEFzc2lnbm1lbnRQYXR0ZXJuKG4saSl9cmV0dXJuIG59ZnVuY3Rpb24gWWUoKXt2YXIgZT1bXSx0PW5ldyBGZSx1O2tlKFwiW1wiKTt3aGlsZSghTGUoXCJdXCIpKXtpZihMZShcIixcIikpe21lKCk7ZS5wdXNoKG51bGwpfWVsc2UgaWYoTGUoXCIuLi5cIikpe3U9bmV3IEZlO21lKCk7dS5maW5pc2hTcHJlYWRFbGVtZW50KE5lKGd0KSk7aWYoIUxlKFwiXVwiKSl7Uz1iPWZhbHNlO2tlKFwiLFwiKX1lLnB1c2godSl9ZWxzZXtlLnB1c2goTmUoZ3QpKTtpZighTGUoXCJdXCIpKXtrZShcIixcIil9fX1tZSgpO3JldHVybiB0LmZpbmlzaEFycmF5RXhwcmVzc2lvbihlKX1mdW5jdGlvbiBHZShlLHQsdSl7dmFyIG4scjtTPWI9ZmFsc2U7bj1sO3I9VGUoWHQpO2lmKGwmJnQuZmlyc3RSZXN0cmljdGVkKXtfZSh0LmZpcnN0UmVzdHJpY3RlZCx0Lm1lc3NhZ2UpfWlmKGwmJnQuc3RyaWN0ZWQpe19lKHQuc3RyaWN0ZWQsdC5tZXNzYWdlKX1sPW47cmV0dXJuIGUuZmluaXNoRnVuY3Rpb25FeHByZXNzaW9uKG51bGwsdC5wYXJhbXMsdC5kZWZhdWx0cyxyLHUpfWZ1bmN0aW9uIEtlKCl7dmFyIGUsdCx1PW5ldyBGZSxuPUIuYWxsb3dZaWVsZDtCLmFsbG93WWllbGQ9ZmFsc2U7ZT1ldSgpO0IuYWxsb3dZaWVsZD1uO0IuYWxsb3dZaWVsZD1mYWxzZTt0PUdlKHUsZSxmYWxzZSk7Qi5hbGxvd1lpZWxkPW47cmV0dXJuIHR9ZnVuY3Rpb24gJGUoKXt2YXIgZSx1PW5ldyBGZSxuO2U9bWUoKTtzd2l0Y2goZS50eXBlKXtjYXNlIHQuU3RyaW5nTGl0ZXJhbDpjYXNlIHQuTnVtZXJpY0xpdGVyYWw6aWYobCYmZS5vY3RhbCl7X2UoZSxvLlN0cmljdE9jdGFsTGl0ZXJhbCl9cmV0dXJuIHUuZmluaXNoTGl0ZXJhbChlKTtjYXNlIHQuSWRlbnRpZmllcjpjYXNlIHQuQm9vbGVhbkxpdGVyYWw6Y2FzZSB0Lk51bGxMaXRlcmFsOmNhc2UgdC5LZXl3b3JkOnJldHVybiB1LmZpbmlzaElkZW50aWZpZXIoZS52YWx1ZSk7Y2FzZSB0LlB1bmN0dWF0b3I6aWYoZS52YWx1ZT09PVwiW1wiKXtuPVRlKGd0KTtrZShcIl1cIik7cmV0dXJuIG59YnJlYWt9d2UoZSl9ZnVuY3Rpb24gSGUoKXtzd2l0Y2goeS50eXBlKXtjYXNlIHQuSWRlbnRpZmllcjpjYXNlIHQuU3RyaW5nTGl0ZXJhbDpjYXNlIHQuQm9vbGVhbkxpdGVyYWw6Y2FzZSB0Lk51bGxMaXRlcmFsOmNhc2UgdC5OdW1lcmljTGl0ZXJhbDpjYXNlIHQuS2V5d29yZDpyZXR1cm4gdHJ1ZTtjYXNlIHQuUHVuY3R1YXRvcjpyZXR1cm4geS52YWx1ZT09PVwiW1wifXJldHVybiBmYWxzZX1mdW5jdGlvbiBKZShlLHUsbixyKXt2YXIgaSxvLHMsYSxsPUIuYWxsb3dZaWVsZDtpZihlLnR5cGU9PT10LklkZW50aWZpZXIpe2lmKGUudmFsdWU9PT1cImdldFwiJiZIZSgpKXtuPUxlKFwiW1wiKTt1PSRlKCk7cz1uZXcgRmU7a2UoXCIoXCIpO2tlKFwiKVwiKTtCLmFsbG93WWllbGQ9ZmFsc2U7aT1HZShzLHtwYXJhbXM6W10sZGVmYXVsdHM6W10sc3RyaWN0ZWQ6bnVsbCxmaXJzdFJlc3RyaWN0ZWQ6bnVsbCxtZXNzYWdlOm51bGx9LGZhbHNlKTtCLmFsbG93WWllbGQ9bDtyZXR1cm4gci5maW5pc2hQcm9wZXJ0eShcImdldFwiLHUsbixpLGZhbHNlLGZhbHNlKX1lbHNlIGlmKGUudmFsdWU9PT1cInNldFwiJiZIZSgpKXtuPUxlKFwiW1wiKTt1PSRlKCk7cz1uZXcgRmU7a2UoXCIoXCIpO289e3BhcmFtczpbXSxkZWZhdWx0Q291bnQ6MCxkZWZhdWx0czpbXSxmaXJzdFJlc3RyaWN0ZWQ6bnVsbCxwYXJhbVNldDp7fX07aWYoTGUoXCIpXCIpKXtfZSh5KX1lbHNle0IuYWxsb3dZaWVsZD1mYWxzZTtRdChvKTtCLmFsbG93WWllbGQ9bDtpZihvLmRlZmF1bHRDb3VudD09PTApe28uZGVmYXVsdHM9W119fWtlKFwiKVwiKTtCLmFsbG93WWllbGQ9ZmFsc2U7aT1HZShzLG8sZmFsc2UpO0IuYWxsb3dZaWVsZD1sO3JldHVybiByLmZpbmlzaFByb3BlcnR5KFwic2V0XCIsdSxuLGksZmFsc2UsZmFsc2UpfX1lbHNlIGlmKGUudHlwZT09PXQuUHVuY3R1YXRvciYmZS52YWx1ZT09PVwiKlwiJiZIZSgpKXtuPUxlKFwiW1wiKTt1PSRlKCk7cz1uZXcgRmU7Qi5hbGxvd1lpZWxkPXRydWU7YT1ldSgpO0IuYWxsb3dZaWVsZD1sO0IuYWxsb3dZaWVsZD1mYWxzZTtpPUdlKHMsYSx0cnVlKTtCLmFsbG93WWllbGQ9bDtyZXR1cm4gci5maW5pc2hQcm9wZXJ0eShcImluaXRcIix1LG4saSx0cnVlLGZhbHNlKX1pZih1JiZMZShcIihcIikpe2k9S2UoKTtyZXR1cm4gci5maW5pc2hQcm9wZXJ0eShcImluaXRcIix1LG4saSx0cnVlLGZhbHNlKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBYZShlKXt2YXIgdT15LG49bmV3IEZlLGkscyxhLGwsZjtpPUxlKFwiW1wiKTtpZihMZShcIipcIikpe21lKCl9ZWxzZXtzPSRlKCl9YT1KZSh1LHMsaSxuKTtpZihhKXtyZXR1cm4gYX1pZighcyl7d2UoeSl9aWYoIWkpe2w9cy50eXBlPT09ci5JZGVudGlmaWVyJiZzLm5hbWU9PT1cIl9fcHJvdG9fX1wifHxzLnR5cGU9PT1yLkxpdGVyYWwmJnMudmFsdWU9PT1cIl9fcHJvdG9fX1wiO2lmKGUudmFsdWUmJmwpe1NlKG8uRHVwbGljYXRlUHJvdG9Qcm9wZXJ0eSl9ZS52YWx1ZXw9bH1pZihMZShcIjpcIikpe21lKCk7Zj1OZShndCk7cmV0dXJuIG4uZmluaXNoUHJvcGVydHkoXCJpbml0XCIscyxpLGYsZmFsc2UsZmFsc2UpfWlmKHUudHlwZT09PXQuSWRlbnRpZmllcil7aWYoTGUoXCI9XCIpKXt4PXk7bWUoKTtmPVRlKGd0KTtyZXR1cm4gbi5maW5pc2hQcm9wZXJ0eShcImluaXRcIixzLGksbmV3IGdlKHUpLmZpbmlzaEFzc2lnbm1lbnRQYXR0ZXJuKHMsZiksZmFsc2UsdHJ1ZSl9cmV0dXJuIG4uZmluaXNoUHJvcGVydHkoXCJpbml0XCIscyxpLHMsZmFsc2UsdHJ1ZSl9d2UoeSl9ZnVuY3Rpb24gWmUoKXt2YXIgZT1bXSx0PXt2YWx1ZTpmYWxzZX0sdT1uZXcgRmU7a2UoXCJ7XCIpO3doaWxlKCFMZShcIn1cIikpe2UucHVzaChYZSh0KSk7aWYoIUxlKFwifVwiKSl7SWUoKX19a2UoXCJ9XCIpO3JldHVybiB1LmZpbmlzaE9iamVjdEV4cHJlc3Npb24oZSl9ZnVuY3Rpb24gUWUoZSl7dmFyIHQ7c3dpdGNoKGUudHlwZSl7Y2FzZSByLklkZW50aWZpZXI6Y2FzZSByLk1lbWJlckV4cHJlc3Npb246Y2FzZSByLlJlc3RFbGVtZW50OmNhc2Ugci5Bc3NpZ25tZW50UGF0dGVybjpicmVhaztjYXNlIHIuU3ByZWFkRWxlbWVudDplLnR5cGU9ci5SZXN0RWxlbWVudDtRZShlLmFyZ3VtZW50KTticmVhaztjYXNlIHIuQXJyYXlFeHByZXNzaW9uOmUudHlwZT1yLkFycmF5UGF0dGVybjtmb3IodD0wO3Q8ZS5lbGVtZW50cy5sZW5ndGg7dCsrKXtpZihlLmVsZW1lbnRzW3RdIT09bnVsbCl7UWUoZS5lbGVtZW50c1t0XSl9fWJyZWFrO2Nhc2Ugci5PYmplY3RFeHByZXNzaW9uOmUudHlwZT1yLk9iamVjdFBhdHRlcm47Zm9yKHQ9MDt0PGUucHJvcGVydGllcy5sZW5ndGg7dCsrKXtRZShlLnByb3BlcnRpZXNbdF0udmFsdWUpfWJyZWFrO2Nhc2Ugci5Bc3NpZ25tZW50RXhwcmVzc2lvbjplLnR5cGU9ci5Bc3NpZ25tZW50UGF0dGVybjtRZShlLmxlZnQpO2JyZWFrO2RlZmF1bHQ6YnJlYWt9fWZ1bmN0aW9uIGV0KGUpe3ZhciB1LG47aWYoeS50eXBlIT09dC5UZW1wbGF0ZXx8ZS5oZWFkJiYheS5oZWFkKXt3ZSgpfXU9bmV3IEZlO249bWUoKTtyZXR1cm4gdS5maW5pc2hUZW1wbGF0ZUVsZW1lbnQoe3JhdzpuLnZhbHVlLnJhdyxjb29rZWQ6bi52YWx1ZS5jb29rZWR9LG4udGFpbCl9ZnVuY3Rpb24gdHQoKXt2YXIgZSx0LHUsbj1uZXcgRmU7ZT1ldCh7aGVhZDp0cnVlfSk7dD1bZV07dT1bXTt3aGlsZSghZS50YWlsKXt1LnB1c2goeXQoKSk7ZT1ldCh7aGVhZDpmYWxzZX0pO3QucHVzaChlKX1yZXR1cm4gbi5maW5pc2hUZW1wbGF0ZUxpdGVyYWwodCx1KX1mdW5jdGlvbiB1dCgpe3ZhciBlLHQsdSxuLG89W107a2UoXCIoXCIpO2lmKExlKFwiKVwiKSl7bWUoKTtpZighTGUoXCI9PlwiKSl7a2UoXCI9PlwiKX1yZXR1cm57dHlwZTppLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXIscGFyYW1zOltdLHJhd1BhcmFtczpbXX19dT15O2lmKExlKFwiLi4uXCIpKXtlPUx0KG8pO2tlKFwiKVwiKTtpZighTGUoXCI9PlwiKSl7a2UoXCI9PlwiKX1yZXR1cm57dHlwZTppLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXIscGFyYW1zOltlXX19Yj10cnVlO2U9TmUoZ3QpO2lmKExlKFwiLFwiKSl7Uz1mYWxzZTt0PVtlXTt3aGlsZShBPGcpe2lmKCFMZShcIixcIikpe2JyZWFrfW1lKCk7aWYoTGUoXCIuLi5cIikpe2lmKCFiKXt3ZSh5KX10LnB1c2goTHQobykpO2tlKFwiKVwiKTtpZighTGUoXCI9PlwiKSl7a2UoXCI9PlwiKX1iPWZhbHNlO2ZvcihuPTA7bjx0Lmxlbmd0aDtuKyspe1FlKHRbbl0pfXJldHVybnt0eXBlOmkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcixwYXJhbXM6dH19dC5wdXNoKE5lKGd0KSl9ZT1uZXcgZ2UodSkuZmluaXNoU2VxdWVuY2VFeHByZXNzaW9uKHQpfWtlKFwiKVwiKTtpZihMZShcIj0+XCIpKXtpZihlLnR5cGU9PT1yLklkZW50aWZpZXImJmUubmFtZT09PVwieWllbGRcIil7cmV0dXJue3R5cGU6aS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyLHBhcmFtczpbZV19fWlmKCFiKXt3ZSh5KX1pZihlLnR5cGU9PT1yLlNlcXVlbmNlRXhwcmVzc2lvbil7Zm9yKG49MDtuPGUuZXhwcmVzc2lvbnMubGVuZ3RoO24rKyl7UWUoZS5leHByZXNzaW9uc1tuXSl9fWVsc2V7UWUoZSl9ZT17dHlwZTppLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXIscGFyYW1zOmUudHlwZT09PXIuU2VxdWVuY2VFeHByZXNzaW9uP2UuZXhwcmVzc2lvbnM6W2VdfX1iPWZhbHNlO3JldHVybiBlfWZ1bmN0aW9uIG50KCl7dmFyIGUsdSxuLHI7aWYoTGUoXCIoXCIpKXtiPWZhbHNlO3JldHVybiBOZSh1dCl9aWYoTGUoXCJbXCIpKXtyZXR1cm4gTmUoWWUpfWlmKExlKFwie1wiKSl7cmV0dXJuIE5lKFplKX1lPXkudHlwZTtyPW5ldyBGZTtpZihlPT09dC5JZGVudGlmaWVyKXtpZihCLnNvdXJjZVR5cGU9PT1cIm1vZHVsZVwiJiZ5LnZhbHVlPT09XCJhd2FpdFwiKXtfZSh5KX1uPXIuZmluaXNoSWRlbnRpZmllcihtZSgpLnZhbHVlKX1lbHNlIGlmKGU9PT10LlN0cmluZ0xpdGVyYWx8fGU9PT10Lk51bWVyaWNMaXRlcmFsKXtTPWI9ZmFsc2U7aWYobCYmeS5vY3RhbCl7X2UoeSxvLlN0cmljdE9jdGFsTGl0ZXJhbCl9bj1yLmZpbmlzaExpdGVyYWwobWUoKSl9ZWxzZSBpZihlPT09dC5LZXl3b3JkKXtpZighbCYmQi5hbGxvd1lpZWxkJiZPZShcInlpZWxkXCIpKXtyZXR1cm4gaXQoKX1TPWI9ZmFsc2U7aWYoT2UoXCJmdW5jdGlvblwiKSl7cmV0dXJuIHV1KCl9aWYoT2UoXCJ0aGlzXCIpKXttZSgpO3JldHVybiByLmZpbmlzaFRoaXNFeHByZXNzaW9uKCl9aWYoT2UoXCJjbGFzc1wiKSl7cmV0dXJuIGl1KCl9d2UobWUoKSl9ZWxzZSBpZihlPT09dC5Cb29sZWFuTGl0ZXJhbCl7Uz1iPWZhbHNlO3U9bWUoKTt1LnZhbHVlPXUudmFsdWU9PT1cInRydWVcIjtuPXIuZmluaXNoTGl0ZXJhbCh1KX1lbHNlIGlmKGU9PT10Lk51bGxMaXRlcmFsKXtTPWI9ZmFsc2U7dT1tZSgpO3UudmFsdWU9bnVsbDtuPXIuZmluaXNoTGl0ZXJhbCh1KX1lbHNlIGlmKExlKFwiL1wiKXx8TGUoXCIvPVwiKSl7Uz1iPWZhbHNlO2Y9QTtpZih0eXBlb2Ygdi50b2tlbnMhPT1cInVuZGVmaW5lZFwiKXt1PWZlKCl9ZWxzZXt1PWxlKCl9bWUoKTtuPXIuZmluaXNoTGl0ZXJhbCh1KX1lbHNlIGlmKGU9PT10LlRlbXBsYXRlKXtuPXR0KCl9ZWxzZXt3ZShtZSgpKX1yZXR1cm4gbn1mdW5jdGlvbiBydCgpe3ZhciBlPVtdLHQ7a2UoXCIoXCIpO2lmKCFMZShcIilcIikpe3doaWxlKEE8Zyl7aWYoTGUoXCIuLi5cIikpe3Q9bmV3IEZlO21lKCk7dC5maW5pc2hTcHJlYWRFbGVtZW50KFRlKGd0KSl9ZWxzZXt0PVRlKGd0KX1lLnB1c2godCk7aWYoTGUoXCIpXCIpKXticmVha31JZSgpfX1rZShcIilcIik7cmV0dXJuIGV9ZnVuY3Rpb24gaXQoKXt2YXIgZSx0PW5ldyBGZTtlPW1lKCk7aWYoIWNlKGUpKXt3ZShlKX1yZXR1cm4gdC5maW5pc2hJZGVudGlmaWVyKGUudmFsdWUpfWZ1bmN0aW9uIG90KCl7a2UoXCIuXCIpO3JldHVybiBpdCgpfWZ1bmN0aW9uIHN0KCl7dmFyIGU7a2UoXCJbXCIpO2U9VGUoeXQpO2tlKFwiXVwiKTtyZXR1cm4gZX1mdW5jdGlvbiBhdCgpe3ZhciBlLHUsbj1uZXcgRmU7UGUoXCJuZXdcIik7aWYoTGUoXCIuXCIpKXttZSgpO2lmKHkudHlwZT09PXQuSWRlbnRpZmllciYmeS52YWx1ZT09PVwidGFyZ2V0XCIpe2lmKEIuaW5GdW5jdGlvbkJvZHkpe21lKCk7cmV0dXJuIG4uZmluaXNoTWV0YVByb3BlcnR5KFwibmV3XCIsXCJ0YXJnZXRcIil9fXdlKHkpfWU9VGUoZnQpO3U9TGUoXCIoXCIpP3J0KCk6W107Uz1iPWZhbHNlO3JldHVybiBuLmZpbmlzaE5ld0V4cHJlc3Npb24oZSx1KX1mdW5jdGlvbiBsdCgpe3ZhciBlLHUsbixyLGksbz1CLmFsbG93SW47aT15O0IuYWxsb3dJbj10cnVlO2lmKE9lKFwic3VwZXJcIikmJkIuaW5GdW5jdGlvbkJvZHkpe3U9bmV3IEZlO21lKCk7dT11LmZpbmlzaFN1cGVyKCk7aWYoIUxlKFwiKFwiKSYmIUxlKFwiLlwiKSYmIUxlKFwiW1wiKSl7d2UoeSl9fWVsc2V7dT1OZShPZShcIm5ld1wiKT9hdDpudCl9Zm9yKDs7KXtpZihMZShcIi5cIikpe2I9ZmFsc2U7Uz10cnVlO3I9b3QoKTt1PW5ldyBnZShpKS5maW5pc2hNZW1iZXJFeHByZXNzaW9uKFwiLlwiLHUscil9ZWxzZSBpZihMZShcIihcIikpe2I9ZmFsc2U7Uz1mYWxzZTtuPXJ0KCk7dT1uZXcgZ2UoaSkuZmluaXNoQ2FsbEV4cHJlc3Npb24odSxuKTtcbn1lbHNlIGlmKExlKFwiW1wiKSl7Yj1mYWxzZTtTPXRydWU7cj1zdCgpO3U9bmV3IGdlKGkpLmZpbmlzaE1lbWJlckV4cHJlc3Npb24oXCJbXCIsdSxyKX1lbHNlIGlmKHkudHlwZT09PXQuVGVtcGxhdGUmJnkuaGVhZCl7ZT10dCgpO3U9bmV3IGdlKGkpLmZpbmlzaFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbih1LGUpfWVsc2V7YnJlYWt9fUIuYWxsb3dJbj1vO3JldHVybiB1fWZ1bmN0aW9uIGZ0KCl7dmFyIGUsdSxuLHI7dyhCLmFsbG93SW4sXCJjYWxsZWUgb2YgbmV3IGV4cHJlc3Npb24gYWx3YXlzIGFsbG93IGluIGtleXdvcmQuXCIpO3I9eTtpZihPZShcInN1cGVyXCIpJiZCLmluRnVuY3Rpb25Cb2R5KXt1PW5ldyBGZTttZSgpO3U9dS5maW5pc2hTdXBlcigpO2lmKCFMZShcIltcIikmJiFMZShcIi5cIikpe3dlKHkpfX1lbHNle3U9TmUoT2UoXCJuZXdcIik/YXQ6bnQpfWZvcig7Oyl7aWYoTGUoXCJbXCIpKXtiPWZhbHNlO1M9dHJ1ZTtuPXN0KCk7dT1uZXcgZ2UocikuZmluaXNoTWVtYmVyRXhwcmVzc2lvbihcIltcIix1LG4pfWVsc2UgaWYoTGUoXCIuXCIpKXtiPWZhbHNlO1M9dHJ1ZTtuPW90KCk7dT1uZXcgZ2UocikuZmluaXNoTWVtYmVyRXhwcmVzc2lvbihcIi5cIix1LG4pfWVsc2UgaWYoeS50eXBlPT09dC5UZW1wbGF0ZSYmeS5oZWFkKXtlPXR0KCk7dT1uZXcgZ2UocikuZmluaXNoVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKHUsZSl9ZWxzZXticmVha319cmV0dXJuIHV9ZnVuY3Rpb24gY3QoKXt2YXIgZSx1LG49eTtlPU5lKGx0KTtpZighRCYmeS50eXBlPT09dC5QdW5jdHVhdG9yKXtpZihMZShcIisrXCIpfHxMZShcIi0tXCIpKXtpZihsJiZlLnR5cGU9PT1yLklkZW50aWZpZXImJnEoZS5uYW1lKSl7U2Uoby5TdHJpY3RMSFNQb3N0Zml4KX1pZighUyl7U2Uoby5JbnZhbGlkTEhTSW5Bc3NpZ25tZW50KX1TPWI9ZmFsc2U7dT1tZSgpO2U9bmV3IGdlKG4pLmZpbmlzaFBvc3RmaXhFeHByZXNzaW9uKHUudmFsdWUsZSl9fXJldHVybiBlfWZ1bmN0aW9uIHB0KCl7dmFyIGUsdSxuO2lmKHkudHlwZSE9PXQuUHVuY3R1YXRvciYmeS50eXBlIT09dC5LZXl3b3JkKXt1PWN0KCl9ZWxzZSBpZihMZShcIisrXCIpfHxMZShcIi0tXCIpKXtuPXk7ZT1tZSgpO3U9TmUocHQpO2lmKGwmJnUudHlwZT09PXIuSWRlbnRpZmllciYmcSh1Lm5hbWUpKXtTZShvLlN0cmljdExIU1ByZWZpeCl9aWYoIVMpe1NlKG8uSW52YWxpZExIU0luQXNzaWdubWVudCl9dT1uZXcgZ2UobikuZmluaXNoVW5hcnlFeHByZXNzaW9uKGUudmFsdWUsdSk7Uz1iPWZhbHNlfWVsc2UgaWYoTGUoXCIrXCIpfHxMZShcIi1cIil8fExlKFwiflwiKXx8TGUoXCIhXCIpKXtuPXk7ZT1tZSgpO3U9TmUocHQpO3U9bmV3IGdlKG4pLmZpbmlzaFVuYXJ5RXhwcmVzc2lvbihlLnZhbHVlLHUpO1M9Yj1mYWxzZX1lbHNlIGlmKE9lKFwiZGVsZXRlXCIpfHxPZShcInZvaWRcIil8fE9lKFwidHlwZW9mXCIpKXtuPXk7ZT1tZSgpO3U9TmUocHQpO3U9bmV3IGdlKG4pLmZpbmlzaFVuYXJ5RXhwcmVzc2lvbihlLnZhbHVlLHUpO2lmKGwmJnUub3BlcmF0b3I9PT1cImRlbGV0ZVwiJiZ1LmFyZ3VtZW50LnR5cGU9PT1yLklkZW50aWZpZXIpe1NlKG8uU3RyaWN0RGVsZXRlKX1TPWI9ZmFsc2V9ZWxzZXt1PWN0KCl9cmV0dXJuIHV9ZnVuY3Rpb24gRHQoZSx1KXt2YXIgbj0wO2lmKGUudHlwZSE9PXQuUHVuY3R1YXRvciYmZS50eXBlIT09dC5LZXl3b3JkKXtyZXR1cm4gMH1zd2l0Y2goZS52YWx1ZSl7Y2FzZVwifHxcIjpuPTE7YnJlYWs7Y2FzZVwiJiZcIjpuPTI7YnJlYWs7Y2FzZVwifFwiOm49MzticmVhaztjYXNlXCJeXCI6bj00O2JyZWFrO2Nhc2VcIiZcIjpuPTU7YnJlYWs7Y2FzZVwiPT1cIjpjYXNlXCIhPVwiOmNhc2VcIj09PVwiOmNhc2VcIiE9PVwiOm49NjticmVhaztjYXNlXCI8XCI6Y2FzZVwiPlwiOmNhc2VcIjw9XCI6Y2FzZVwiPj1cIjpjYXNlXCJpbnN0YW5jZW9mXCI6bj03O2JyZWFrO2Nhc2VcImluXCI6bj11Pzc6MDticmVhaztjYXNlXCI8PFwiOmNhc2VcIj4+XCI6Y2FzZVwiPj4+XCI6bj04O2JyZWFrO2Nhc2VcIitcIjpjYXNlXCItXCI6bj05O2JyZWFrO2Nhc2VcIipcIjpjYXNlXCIvXCI6Y2FzZVwiJVwiOm49MTE7YnJlYWs7ZGVmYXVsdDpicmVha31yZXR1cm4gbn1mdW5jdGlvbiBodCgpe3ZhciBlLHQsdSxuLHIsaSxvLHMsYSxsO2U9eTthPU5lKHB0KTtuPXk7cj1EdChuLEIuYWxsb3dJbik7aWYocj09PTApe3JldHVybiBhfVM9Yj1mYWxzZTtuLnByZWM9cjttZSgpO3Q9W2UseV07bz1UZShwdCk7aT1bYSxuLG9dO3doaWxlKChyPUR0KHksQi5hbGxvd0luKSk+MCl7d2hpbGUoaS5sZW5ndGg+MiYmcjw9aVtpLmxlbmd0aC0yXS5wcmVjKXtvPWkucG9wKCk7cz1pLnBvcCgpLnZhbHVlO2E9aS5wb3AoKTt0LnBvcCgpO3U9bmV3IGdlKHRbdC5sZW5ndGgtMV0pLmZpbmlzaEJpbmFyeUV4cHJlc3Npb24ocyxhLG8pO2kucHVzaCh1KX1uPW1lKCk7bi5wcmVjPXI7aS5wdXNoKG4pO3QucHVzaCh5KTt1PVRlKHB0KTtpLnB1c2godSl9bD1pLmxlbmd0aC0xO3U9aVtsXTt0LnBvcCgpO3doaWxlKGw+MSl7dT1uZXcgZ2UodC5wb3AoKSkuZmluaXNoQmluYXJ5RXhwcmVzc2lvbihpW2wtMV0udmFsdWUsaVtsLTJdLHUpO2wtPTJ9cmV0dXJuIHV9ZnVuY3Rpb24gbXQoKXt2YXIgZSx0LHUsbixyO3I9eTtlPU5lKGh0KTtpZihMZShcIj9cIikpe21lKCk7dD1CLmFsbG93SW47Qi5hbGxvd0luPXRydWU7dT1UZShndCk7Qi5hbGxvd0luPXQ7a2UoXCI6XCIpO249VGUoZ3QpO2U9bmV3IGdlKHIpLmZpbmlzaENvbmRpdGlvbmFsRXhwcmVzc2lvbihlLHUsbik7Uz1iPWZhbHNlfXJldHVybiBlfWZ1bmN0aW9uIGR0KCl7aWYoTGUoXCJ7XCIpKXtyZXR1cm4gWHQoKX1yZXR1cm4gVGUoZ3QpfWZ1bmN0aW9uIEF0KGUsdCl7dmFyIHU7c3dpdGNoKHQudHlwZSl7Y2FzZSByLklkZW50aWZpZXI6WnQoZSx0LHQubmFtZSk7YnJlYWs7Y2FzZSByLlJlc3RFbGVtZW50OkF0KGUsdC5hcmd1bWVudCk7YnJlYWs7Y2FzZSByLkFzc2lnbm1lbnRQYXR0ZXJuOkF0KGUsdC5sZWZ0KTticmVhaztjYXNlIHIuQXJyYXlQYXR0ZXJuOmZvcih1PTA7dTx0LmVsZW1lbnRzLmxlbmd0aDt1Kyspe2lmKHQuZWxlbWVudHNbdV0hPT1udWxsKXtBdChlLHQuZWxlbWVudHNbdV0pfX1icmVhaztjYXNlIHIuWWllbGRFeHByZXNzaW9uOmJyZWFrO2RlZmF1bHQ6dyh0LnR5cGU9PT1yLk9iamVjdFBhdHRlcm4sXCJJbnZhbGlkIHR5cGVcIik7Zm9yKHU9MDt1PHQucHJvcGVydGllcy5sZW5ndGg7dSsrKXtBdChlLHQucHJvcGVydGllc1t1XS52YWx1ZSl9YnJlYWt9fWZ1bmN0aW9uIEN0KGUpe3ZhciB0LHUsbixzLGEsZixjLHA7YT1bXTtmPTA7cz1bZV07c3dpdGNoKGUudHlwZSl7Y2FzZSByLklkZW50aWZpZXI6YnJlYWs7Y2FzZSBpLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXI6cz1lLnBhcmFtczticmVhaztkZWZhdWx0OnJldHVybiBudWxsfWM9e3BhcmFtU2V0Ont9fTtmb3IodD0wLHU9cy5sZW5ndGg7dDx1O3QrPTEpe249c1t0XTtzd2l0Y2gobi50eXBlKXtjYXNlIHIuQXNzaWdubWVudFBhdHRlcm46c1t0XT1uLmxlZnQ7aWYobi5yaWdodC50eXBlPT09ci5ZaWVsZEV4cHJlc3Npb24pe2lmKG4ucmlnaHQuYXJndW1lbnQpe3dlKHkpfW4ucmlnaHQudHlwZT1yLklkZW50aWZpZXI7bi5yaWdodC5uYW1lPVwieWllbGRcIjtkZWxldGUgbi5yaWdodC5hcmd1bWVudDtkZWxldGUgbi5yaWdodC5kZWxlZ2F0ZX1hLnB1c2gobi5yaWdodCk7KytmO0F0KGMsbi5sZWZ0KTticmVhaztkZWZhdWx0OkF0KGMsbik7c1t0XT1uO2EucHVzaChudWxsKTticmVha319aWYobHx8IUIuYWxsb3dZaWVsZCl7Zm9yKHQ9MCx1PXMubGVuZ3RoO3Q8dTt0Kz0xKXtuPXNbdF07aWYobi50eXBlPT09ci5ZaWVsZEV4cHJlc3Npb24pe3dlKHkpfX19aWYoYy5tZXNzYWdlPT09by5TdHJpY3RQYXJhbUR1cGUpe3A9bD9jLnN0cmljdGVkOmMuZmlyc3RSZXN0cmljdGVkO3dlKHAsYy5tZXNzYWdlKX1pZihmPT09MCl7YT1bXX1yZXR1cm57cGFyYW1zOnMsZGVmYXVsdHM6YSxzdHJpY3RlZDpjLnN0cmljdGVkLGZpcnN0UmVzdHJpY3RlZDpjLmZpcnN0UmVzdHJpY3RlZCxtZXNzYWdlOmMubWVzc2FnZX19ZnVuY3Rpb24gRXQoZSx0KXt2YXIgdSxuLGk7aWYoRCl7X2UoeSl9a2UoXCI9PlwiKTt1PWw7bj1CLmFsbG93WWllbGQ7Qi5hbGxvd1lpZWxkPXRydWU7aT1kdCgpO2lmKGwmJmUuZmlyc3RSZXN0cmljdGVkKXt3ZShlLmZpcnN0UmVzdHJpY3RlZCxlLm1lc3NhZ2UpfWlmKGwmJmUuc3RyaWN0ZWQpe19lKGUuc3RyaWN0ZWQsZS5tZXNzYWdlKX1sPXU7Qi5hbGxvd1lpZWxkPW47cmV0dXJuIHQuZmluaXNoQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24oZS5wYXJhbXMsZS5kZWZhdWx0cyxpLGkudHlwZSE9PXIuQmxvY2tTdGF0ZW1lbnQpfWZ1bmN0aW9uIEZ0KCl7dmFyIGUsdSxuLHI7ZT1udWxsO3U9bmV3IEZlO1BlKFwieWllbGRcIik7aWYoIUQpe3I9Qi5hbGxvd1lpZWxkO0IuYWxsb3dZaWVsZD1mYWxzZTtuPUxlKFwiKlwiKTtpZihuKXttZSgpO2U9Z3QoKX1lbHNle2lmKCFMZShcIjtcIikmJiFMZShcIn1cIikmJiFMZShcIilcIikmJnkudHlwZSE9PXQuRU9GKXtlPWd0KCl9fUIuYWxsb3dZaWVsZD1yfXJldHVybiB1LmZpbmlzaFlpZWxkRXhwcmVzc2lvbihlLG4pfWZ1bmN0aW9uIGd0KCl7dmFyIGUsdCx1LG4scztzPXk7ZT15O2lmKCFCLmFsbG93WWllbGQmJk9lKFwieWllbGRcIikpe3JldHVybiBGdCgpfXQ9bXQoKTtpZih0LnR5cGU9PT1pLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXJ8fExlKFwiPT5cIikpe1M9Yj1mYWxzZTtuPUN0KHQpO2lmKG4pe3g9bnVsbDtyZXR1cm4gRXQobixuZXcgZ2UocykpfXJldHVybiB0fWlmKE1lKCkpe2lmKCFTKXtTZShvLkludmFsaWRMSFNJbkFzc2lnbm1lbnQpfWlmKGwmJnQudHlwZT09PXIuSWRlbnRpZmllcil7aWYocSh0Lm5hbWUpKXtfZShlLG8uU3RyaWN0TEhTQXNzaWdubWVudCl9aWYoTih0Lm5hbWUpKXtfZShlLG8uU3RyaWN0UmVzZXJ2ZWRXb3JkKX19aWYoIUxlKFwiPVwiKSl7Uz1iPWZhbHNlfWVsc2V7UWUodCl9ZT1tZSgpO3U9VGUoZ3QpO3Q9bmV3IGdlKHMpLmZpbmlzaEFzc2lnbm1lbnRFeHByZXNzaW9uKGUudmFsdWUsdCx1KTt4PW51bGx9cmV0dXJuIHR9ZnVuY3Rpb24geXQoKXt2YXIgZSx0PXksdTtlPVRlKGd0KTtpZihMZShcIixcIikpe3U9W2VdO3doaWxlKEE8Zyl7aWYoIUxlKFwiLFwiKSl7YnJlYWt9bWUoKTt1LnB1c2goVGUoZ3QpKX1lPW5ldyBnZSh0KS5maW5pc2hTZXF1ZW5jZUV4cHJlc3Npb24odSl9cmV0dXJuIGV9ZnVuY3Rpb24gQnQoKXtpZih5LnR5cGU9PT10LktleXdvcmQpe3N3aXRjaCh5LnZhbHVlKXtjYXNlXCJleHBvcnRcIjppZihCLnNvdXJjZVR5cGUhPT1cIm1vZHVsZVwiKXtfZSh5LG8uSWxsZWdhbEV4cG9ydERlY2xhcmF0aW9uKX1yZXR1cm4gY3UoKTtjYXNlXCJpbXBvcnRcIjppZihCLnNvdXJjZVR5cGUhPT1cIm1vZHVsZVwiKXtfZSh5LG8uSWxsZWdhbEltcG9ydERlY2xhcmF0aW9uKX1yZXR1cm4gZHUoKTtjYXNlXCJjb25zdFwiOmNhc2VcImxldFwiOnJldHVybiBQdCh7aW5Gb3I6ZmFsc2V9KTtjYXNlXCJmdW5jdGlvblwiOnJldHVybiB0dShuZXcgRmUpO2Nhc2VcImNsYXNzXCI6cmV0dXJuIHJ1KCl9fXJldHVybiBKdCgpfWZ1bmN0aW9uIHZ0KCl7dmFyIGU9W107d2hpbGUoQTxnKXtpZihMZShcIn1cIikpe2JyZWFrfWUucHVzaChCdCgpKX1yZXR1cm4gZX1mdW5jdGlvbiBidCgpe3ZhciBlLHQ9bmV3IEZlO2tlKFwie1wiKTtlPXZ0KCk7a2UoXCJ9XCIpO3JldHVybiB0LmZpbmlzaEJsb2NrU3RhdGVtZW50KGUpfWZ1bmN0aW9uIFN0KGUpe3ZhciB1LG49bmV3IEZlO3U9bWUoKTtpZih1LnR5cGU9PT10LktleXdvcmQmJnUudmFsdWU9PT1cInlpZWxkXCIpe2lmKGwpe19lKHUsby5TdHJpY3RSZXNlcnZlZFdvcmQpfWlmKCFCLmFsbG93WWllbGQpe3dlKHUpfX1lbHNlIGlmKHUudHlwZSE9PXQuSWRlbnRpZmllcil7aWYobCYmdS50eXBlPT09dC5LZXl3b3JkJiZOKHUudmFsdWUpKXtfZSh1LG8uU3RyaWN0UmVzZXJ2ZWRXb3JkKX1lbHNle2lmKGx8fHUudmFsdWUhPT1cImxldFwifHxlIT09XCJ2YXJcIil7d2UodSl9fX1lbHNlIGlmKEIuc291cmNlVHlwZT09PVwibW9kdWxlXCImJnUudHlwZT09PXQuSWRlbnRpZmllciYmdS52YWx1ZT09PVwiYXdhaXRcIil7X2UodSl9cmV0dXJuIG4uZmluaXNoSWRlbnRpZmllcih1LnZhbHVlKX1mdW5jdGlvbiB4dChlKXt2YXIgdD1udWxsLHUsbj1uZXcgRmUsaT1bXTt1PVdlKGksXCJ2YXJcIik7aWYobCYmcSh1Lm5hbWUpKXtTZShvLlN0cmljdFZhck5hbWUpfWlmKExlKFwiPVwiKSl7bWUoKTt0PVRlKGd0KX1lbHNlIGlmKHUudHlwZSE9PXIuSWRlbnRpZmllciYmIWUuaW5Gb3Ipe2tlKFwiPVwiKX1yZXR1cm4gbi5maW5pc2hWYXJpYWJsZURlY2xhcmF0b3IodSx0KX1mdW5jdGlvbiB3dChlKXt2YXIgdD1bXTtkb3t0LnB1c2goeHQoe2luRm9yOmUuaW5Gb3J9KSk7aWYoIUxlKFwiLFwiKSl7YnJlYWt9bWUoKX13aGlsZShBPGcpO3JldHVybiB0fWZ1bmN0aW9uIF90KGUpe3ZhciB0O1BlKFwidmFyXCIpO3Q9d3Qoe2luRm9yOmZhbHNlfSk7UmUoKTtyZXR1cm4gZS5maW5pc2hWYXJpYWJsZURlY2xhcmF0aW9uKHQpfWZ1bmN0aW9uIGt0KGUsdCl7dmFyIHU9bnVsbCxuLGk9bmV3IEZlLHM9W107bj1XZShzLGUpO2lmKGwmJm4udHlwZT09PXIuSWRlbnRpZmllciYmcShuLm5hbWUpKXtTZShvLlN0cmljdFZhck5hbWUpfWlmKGU9PT1cImNvbnN0XCIpe2lmKCFPZShcImluXCIpJiYhamUoXCJvZlwiKSl7a2UoXCI9XCIpO3U9VGUoZ3QpfX1lbHNlIGlmKCF0LmluRm9yJiZuLnR5cGUhPT1yLklkZW50aWZpZXJ8fExlKFwiPVwiKSl7a2UoXCI9XCIpO3U9VGUoZ3QpfXJldHVybiBpLmZpbmlzaFZhcmlhYmxlRGVjbGFyYXRvcihuLHUpfWZ1bmN0aW9uIEl0KGUsdCl7dmFyIHU9W107ZG97dS5wdXNoKGt0KGUsdCkpO2lmKCFMZShcIixcIikpe2JyZWFrfW1lKCl9d2hpbGUoQTxnKTtyZXR1cm4gdX1mdW5jdGlvbiBQdChlKXt2YXIgdCx1LG49bmV3IEZlO3Q9bWUoKS52YWx1ZTt3KHQ9PT1cImxldFwifHx0PT09XCJjb25zdFwiLFwiTGV4aWNhbCBkZWNsYXJhdGlvbiBtdXN0IGJlIGVpdGhlciBsZXQgb3IgY29uc3RcIik7dT1JdCh0LGUpO1JlKCk7cmV0dXJuIG4uZmluaXNoTGV4aWNhbERlY2xhcmF0aW9uKHUsdCl9ZnVuY3Rpb24gTHQoZSl7dmFyIHQsdT1uZXcgRmU7bWUoKTtpZihMZShcIntcIikpe2JlKG8uT2JqZWN0UGF0dGVybkFzUmVzdFBhcmFtZXRlcil9ZS5wdXNoKHkpO3Q9U3QoKTtpZihMZShcIj1cIikpe2JlKG8uRGVmYXVsdFJlc3RQYXJhbWV0ZXIpfWlmKCFMZShcIilcIikpe2JlKG8uUGFyYW1ldGVyQWZ0ZXJSZXN0UGFyYW1ldGVyKX1yZXR1cm4gdS5maW5pc2hSZXN0RWxlbWVudCh0KX1mdW5jdGlvbiBPdChlKXtrZShcIjtcIik7cmV0dXJuIGUuZmluaXNoRW1wdHlTdGF0ZW1lbnQoKX1mdW5jdGlvbiBqdChlKXt2YXIgdD15dCgpO1JlKCk7cmV0dXJuIGUuZmluaXNoRXhwcmVzc2lvblN0YXRlbWVudCh0KX1mdW5jdGlvbiBNdChlKXt2YXIgdCx1LG47UGUoXCJpZlwiKTtrZShcIihcIik7dD15dCgpO2tlKFwiKVwiKTt1PUp0KCk7aWYoT2UoXCJlbHNlXCIpKXttZSgpO249SnQoKX1lbHNle249bnVsbH1yZXR1cm4gZS5maW5pc2hJZlN0YXRlbWVudCh0LHUsbil9ZnVuY3Rpb24gUnQoZSl7dmFyIHQsdSxuO1BlKFwiZG9cIik7bj1CLmluSXRlcmF0aW9uO0IuaW5JdGVyYXRpb249dHJ1ZTt0PUp0KCk7Qi5pbkl0ZXJhdGlvbj1uO1BlKFwid2hpbGVcIik7a2UoXCIoXCIpO3U9eXQoKTtrZShcIilcIik7aWYoTGUoXCI7XCIpKXttZSgpfXJldHVybiBlLmZpbmlzaERvV2hpbGVTdGF0ZW1lbnQodCx1KX1mdW5jdGlvbiBUdChlKXt2YXIgdCx1LG47UGUoXCJ3aGlsZVwiKTtrZShcIihcIik7dD15dCgpO2tlKFwiKVwiKTtuPUIuaW5JdGVyYXRpb247Qi5pbkl0ZXJhdGlvbj10cnVlO3U9SnQoKTtCLmluSXRlcmF0aW9uPW47cmV0dXJuIGUuZmluaXNoV2hpbGVTdGF0ZW1lbnQodCx1KX1mdW5jdGlvbiBOdChlKXt2YXIgdCx1LG4scixpLHMsYSxsLGYsYyxwLEQsaD1CLmFsbG93SW47dD1pPXM9bnVsbDt1PXRydWU7UGUoXCJmb3JcIik7a2UoXCIoXCIpO2lmKExlKFwiO1wiKSl7bWUoKX1lbHNle2lmKE9lKFwidmFyXCIpKXt0PW5ldyBGZTttZSgpO0IuYWxsb3dJbj1mYWxzZTtjPXd0KHtpbkZvcjp0cnVlfSk7Qi5hbGxvd0luPWg7aWYoYy5sZW5ndGg9PT0xJiZPZShcImluXCIpKXt0PXQuZmluaXNoVmFyaWFibGVEZWNsYXJhdGlvbihjKTttZSgpO2E9dDtsPXl0KCk7dD1udWxsfWVsc2UgaWYoYy5sZW5ndGg9PT0xJiZjWzBdLmluaXQ9PT1udWxsJiZqZShcIm9mXCIpKXt0PXQuZmluaXNoVmFyaWFibGVEZWNsYXJhdGlvbihjKTttZSgpO2E9dDtsPWd0KCk7dD1udWxsO3U9ZmFsc2V9ZWxzZXt0PXQuZmluaXNoVmFyaWFibGVEZWNsYXJhdGlvbihjKTtrZShcIjtcIil9fWVsc2UgaWYoT2UoXCJjb25zdFwiKXx8T2UoXCJsZXRcIikpe3Q9bmV3IEZlO2Y9bWUoKS52YWx1ZTtCLmFsbG93SW49ZmFsc2U7Yz1JdChmLHtpbkZvcjp0cnVlfSk7Qi5hbGxvd0luPWg7aWYoYy5sZW5ndGg9PT0xJiZjWzBdLmluaXQ9PT1udWxsJiZPZShcImluXCIpKXt0PXQuZmluaXNoTGV4aWNhbERlY2xhcmF0aW9uKGMsZik7bWUoKTthPXQ7bD15dCgpO3Q9bnVsbH1lbHNlIGlmKGMubGVuZ3RoPT09MSYmY1swXS5pbml0PT09bnVsbCYmamUoXCJvZlwiKSl7dD10LmZpbmlzaExleGljYWxEZWNsYXJhdGlvbihjLGYpO21lKCk7YT10O2w9Z3QoKTt0PW51bGw7dT1mYWxzZX1lbHNle1JlKCk7dD10LmZpbmlzaExleGljYWxEZWNsYXJhdGlvbihjLGYpfX1lbHNle3I9eTtCLmFsbG93SW49ZmFsc2U7dD1OZShndCk7Qi5hbGxvd0luPWg7aWYoT2UoXCJpblwiKSl7aWYoIVMpe1NlKG8uSW52YWxpZExIU0luRm9ySW4pfW1lKCk7UWUodCk7YT10O2w9eXQoKTt0PW51bGx9ZWxzZSBpZihqZShcIm9mXCIpKXtpZighUyl7U2Uoby5JbnZhbGlkTEhTSW5Gb3JMb29wKX1tZSgpO1FlKHQpO2E9dDtsPWd0KCk7dD1udWxsO3U9ZmFsc2V9ZWxzZXtpZihMZShcIixcIikpe249W3RdO3doaWxlKExlKFwiLFwiKSl7bWUoKTtuLnB1c2goVGUoZ3QpKX10PW5ldyBnZShyKS5maW5pc2hTZXF1ZW5jZUV4cHJlc3Npb24obil9a2UoXCI7XCIpfX19aWYodHlwZW9mIGE9PT1cInVuZGVmaW5lZFwiKXtpZighTGUoXCI7XCIpKXtpPXl0KCl9a2UoXCI7XCIpO2lmKCFMZShcIilcIikpe3M9eXQoKX19a2UoXCIpXCIpO0Q9Qi5pbkl0ZXJhdGlvbjtCLmluSXRlcmF0aW9uPXRydWU7cD1UZShKdCk7Qi5pbkl0ZXJhdGlvbj1EO3JldHVybiB0eXBlb2YgYT09PVwidW5kZWZpbmVkXCI/ZS5maW5pc2hGb3JTdGF0ZW1lbnQodCxpLHMscCk6dT9lLmZpbmlzaEZvckluU3RhdGVtZW50KGEsbCxwKTplLmZpbmlzaEZvck9mU3RhdGVtZW50KGEsbCxwKX1mdW5jdGlvbiBxdChlKXt2YXIgdT1udWxsLG47UGUoXCJjb250aW51ZVwiKTtpZihhLmNoYXJDb2RlQXQoQSk9PT01OSl7bWUoKTtpZighQi5pbkl0ZXJhdGlvbil7YmUoby5JbGxlZ2FsQ29udGludWUpfXJldHVybiBlLmZpbmlzaENvbnRpbnVlU3RhdGVtZW50KG51bGwpfWlmKEQpe2lmKCFCLmluSXRlcmF0aW9uKXtiZShvLklsbGVnYWxDb250aW51ZSl9cmV0dXJuIGUuZmluaXNoQ29udGludWVTdGF0ZW1lbnQobnVsbCl9aWYoeS50eXBlPT09dC5JZGVudGlmaWVyKXt1PVN0KCk7bj1cIiRcIit1Lm5hbWU7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChCLmxhYmVsU2V0LG4pKXtiZShvLlVua25vd25MYWJlbCx1Lm5hbWUpfX1SZSgpO2lmKHU9PT1udWxsJiYhQi5pbkl0ZXJhdGlvbil7YmUoby5JbGxlZ2FsQ29udGludWUpfXJldHVybiBlLmZpbmlzaENvbnRpbnVlU3RhdGVtZW50KHUpfWZ1bmN0aW9uIFV0KGUpe3ZhciB1PW51bGwsbjtQZShcImJyZWFrXCIpO2lmKGEuY2hhckNvZGVBdChoKT09PTU5KXttZSgpO2lmKCEoQi5pbkl0ZXJhdGlvbnx8Qi5pblN3aXRjaCkpe2JlKG8uSWxsZWdhbEJyZWFrKX1yZXR1cm4gZS5maW5pc2hCcmVha1N0YXRlbWVudChudWxsKX1pZihEKXtpZighKEIuaW5JdGVyYXRpb258fEIuaW5Td2l0Y2gpKXtiZShvLklsbGVnYWxCcmVhayl9cmV0dXJuIGUuZmluaXNoQnJlYWtTdGF0ZW1lbnQobnVsbCl9aWYoeS50eXBlPT09dC5JZGVudGlmaWVyKXt1PVN0KCk7bj1cIiRcIit1Lm5hbWU7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChCLmxhYmVsU2V0LG4pKXtiZShvLlVua25vd25MYWJlbCx1Lm5hbWUpfX1SZSgpO2lmKHU9PT1udWxsJiYhKEIuaW5JdGVyYXRpb258fEIuaW5Td2l0Y2gpKXtiZShvLklsbGVnYWxCcmVhayl9cmV0dXJuIGUuZmluaXNoQnJlYWtTdGF0ZW1lbnQodSl9ZnVuY3Rpb24genQoZSl7dmFyIHU9bnVsbDtQZShcInJldHVyblwiKTtpZighQi5pbkZ1bmN0aW9uQm9keSl7U2Uoby5JbGxlZ2FsUmV0dXJuKX1pZihhLmNoYXJDb2RlQXQoaCk9PT0zMil7aWYoTShhLmNoYXJDb2RlQXQoaCsxKSkpe3U9eXQoKTtSZSgpO3JldHVybiBlLmZpbmlzaFJldHVyblN0YXRlbWVudCh1KX19aWYoRCl7cmV0dXJuIGUuZmluaXNoUmV0dXJuU3RhdGVtZW50KG51bGwpfWlmKCFMZShcIjtcIikpe2lmKCFMZShcIn1cIikmJnkudHlwZSE9PXQuRU9GKXt1PXl0KCl9fVJlKCk7cmV0dXJuIGUuZmluaXNoUmV0dXJuU3RhdGVtZW50KHUpfWZ1bmN0aW9uIFd0KGUpe3ZhciB0LHU7aWYobCl7U2Uoby5TdHJpY3RNb2RlV2l0aCl9UGUoXCJ3aXRoXCIpO2tlKFwiKFwiKTt0PXl0KCk7a2UoXCIpXCIpO3U9SnQoKTtyZXR1cm4gZS5maW5pc2hXaXRoU3RhdGVtZW50KHQsdSl9ZnVuY3Rpb24gVnQoKXt2YXIgZSx0PVtdLHUsbj1uZXcgRmU7aWYoT2UoXCJkZWZhdWx0XCIpKXttZSgpO2U9bnVsbH1lbHNle1BlKFwiY2FzZVwiKTtlPXl0KCl9a2UoXCI6XCIpO3doaWxlKEE8Zyl7aWYoTGUoXCJ9XCIpfHxPZShcImRlZmF1bHRcIil8fE9lKFwiY2FzZVwiKSl7YnJlYWt9dT1CdCgpO3QucHVzaCh1KX1yZXR1cm4gbi5maW5pc2hTd2l0Y2hDYXNlKGUsdCl9ZnVuY3Rpb24gWXQoZSl7dmFyIHQsdSxuLHIsaTtQZShcInN3aXRjaFwiKTtrZShcIihcIik7dD15dCgpO2tlKFwiKVwiKTtrZShcIntcIik7dT1bXTtpZihMZShcIn1cIikpe21lKCk7cmV0dXJuIGUuZmluaXNoU3dpdGNoU3RhdGVtZW50KHQsdSl9cj1CLmluU3dpdGNoO0IuaW5Td2l0Y2g9dHJ1ZTtpPWZhbHNlO3doaWxlKEE8Zyl7aWYoTGUoXCJ9XCIpKXticmVha31uPVZ0KCk7aWYobi50ZXN0PT09bnVsbCl7aWYoaSl7YmUoby5NdWx0aXBsZURlZmF1bHRzSW5Td2l0Y2gpfWk9dHJ1ZX11LnB1c2gobil9Qi5pblN3aXRjaD1yO2tlKFwifVwiKTtyZXR1cm4gZS5maW5pc2hTd2l0Y2hTdGF0ZW1lbnQodCx1KX1mdW5jdGlvbiBHdChlKXt2YXIgdDtQZShcInRocm93XCIpO2lmKEQpe2JlKG8uTmV3bGluZUFmdGVyVGhyb3cpfXQ9eXQoKTtSZSgpO3JldHVybiBlLmZpbmlzaFRocm93U3RhdGVtZW50KHQpfWZ1bmN0aW9uIEt0KCl7dmFyIGUsdD1bXSx1PXt9LG4scixpLHM9bmV3IEZlO1BlKFwiY2F0Y2hcIik7a2UoXCIoXCIpO2lmKExlKFwiKVwiKSl7d2UoeSl9ZT1XZSh0KTtmb3Iocj0wO3I8dC5sZW5ndGg7cisrKXtuPVwiJFwiK3Rbcl0udmFsdWU7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHUsbikpe1NlKG8uRHVwbGljYXRlQmluZGluZyx0W3JdLnZhbHVlKX11W25dPXRydWV9aWYobCYmcShlLm5hbWUpKXtTZShvLlN0cmljdENhdGNoVmFyaWFibGUpfWtlKFwiKVwiKTtpPWJ0KCk7cmV0dXJuIHMuZmluaXNoQ2F0Y2hDbGF1c2UoZSxpKX1mdW5jdGlvbiAkdChlKXt2YXIgdCx1PW51bGwsbj1udWxsO1BlKFwidHJ5XCIpO3Q9YnQoKTtpZihPZShcImNhdGNoXCIpKXt1PUt0KCl9aWYoT2UoXCJmaW5hbGx5XCIpKXttZSgpO249YnQoKX1pZighdSYmIW4pe2JlKG8uTm9DYXRjaE9yRmluYWxseSl9cmV0dXJuIGUuZmluaXNoVHJ5U3RhdGVtZW50KHQsdSxuKX1mdW5jdGlvbiBIdChlKXtQZShcImRlYnVnZ2VyXCIpO1JlKCk7cmV0dXJuIGUuZmluaXNoRGVidWdnZXJTdGF0ZW1lbnQoKX1mdW5jdGlvbiBKdCgpe3ZhciBlPXkudHlwZSx1LG4saSxzO2lmKGU9PT10LkVPRil7d2UoeSl9aWYoZT09PXQuUHVuY3R1YXRvciYmeS52YWx1ZT09PVwie1wiKXtyZXR1cm4gYnQoKX1TPWI9dHJ1ZTtzPW5ldyBGZTtpZihlPT09dC5QdW5jdHVhdG9yKXtzd2l0Y2goeS52YWx1ZSl7Y2FzZVwiO1wiOnJldHVybiBPdChzKTtjYXNlXCIoXCI6cmV0dXJuIGp0KHMpO2RlZmF1bHQ6YnJlYWt9fWVsc2UgaWYoZT09PXQuS2V5d29yZCl7c3dpdGNoKHkudmFsdWUpe2Nhc2VcImJyZWFrXCI6cmV0dXJuIFV0KHMpO2Nhc2VcImNvbnRpbnVlXCI6cmV0dXJuIHF0KHMpO2Nhc2VcImRlYnVnZ2VyXCI6cmV0dXJuIEh0KHMpO2Nhc2VcImRvXCI6cmV0dXJuIFJ0KHMpO2Nhc2VcImZvclwiOnJldHVybiBOdChzKTtjYXNlXCJmdW5jdGlvblwiOnJldHVybiB0dShzKTtjYXNlXCJpZlwiOnJldHVybiBNdChzKTtjYXNlXCJyZXR1cm5cIjpyZXR1cm4genQocyk7Y2FzZVwic3dpdGNoXCI6cmV0dXJuIFl0KHMpO2Nhc2VcInRocm93XCI6cmV0dXJuIEd0KHMpO2Nhc2VcInRyeVwiOnJldHVybiAkdChzKTtjYXNlXCJ2YXJcIjpyZXR1cm4gX3Qocyk7Y2FzZVwid2hpbGVcIjpyZXR1cm4gVHQocyk7Y2FzZVwid2l0aFwiOnJldHVybiBXdChzKTtkZWZhdWx0OmJyZWFrfX11PXl0KCk7aWYodS50eXBlPT09ci5JZGVudGlmaWVyJiZMZShcIjpcIikpe21lKCk7aT1cIiRcIit1Lm5hbWU7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEIubGFiZWxTZXQsaSkpe2JlKG8uUmVkZWNsYXJhdGlvbixcIkxhYmVsXCIsdS5uYW1lKX1CLmxhYmVsU2V0W2ldPXRydWU7bj1KdCgpO2RlbGV0ZSBCLmxhYmVsU2V0W2ldO3JldHVybiBzLmZpbmlzaExhYmVsZWRTdGF0ZW1lbnQodSxuKX1SZSgpO3JldHVybiBzLmZpbmlzaEV4cHJlc3Npb25TdGF0ZW1lbnQodSl9ZnVuY3Rpb24gWHQoKXt2YXIgZSx1PVtdLG4saSxzLGYsYyxwLEQsaCxtPW5ldyBGZTtrZShcIntcIik7d2hpbGUoQTxnKXtpZih5LnR5cGUhPT10LlN0cmluZ0xpdGVyYWwpe2JyZWFrfW49eTtlPUJ0KCk7dS5wdXNoKGUpO2lmKGUuZXhwcmVzc2lvbi50eXBlIT09ci5MaXRlcmFsKXticmVha31pPWEuc2xpY2Uobi5zdGFydCsxLG4uZW5kLTEpO2lmKGk9PT1cInVzZSBzdHJpY3RcIil7bD10cnVlO2lmKHMpe19lKHMsby5TdHJpY3RPY3RhbExpdGVyYWwpfX1lbHNle2lmKCFzJiZuLm9jdGFsKXtzPW59fX1mPUIubGFiZWxTZXQ7Yz1CLmluSXRlcmF0aW9uO3A9Qi5pblN3aXRjaDtEPUIuaW5GdW5jdGlvbkJvZHk7aD1CLnBhcmVudGhlc2l6ZWRDb3VudDtCLmxhYmVsU2V0PXt9O0IuaW5JdGVyYXRpb249ZmFsc2U7Qi5pblN3aXRjaD1mYWxzZTtCLmluRnVuY3Rpb25Cb2R5PXRydWU7Qi5wYXJlbnRoZXNpemVkQ291bnQ9MDt3aGlsZShBPGcpe2lmKExlKFwifVwiKSl7YnJlYWt9dS5wdXNoKEJ0KCkpfWtlKFwifVwiKTtCLmxhYmVsU2V0PWY7Qi5pbkl0ZXJhdGlvbj1jO0IuaW5Td2l0Y2g9cDtCLmluRnVuY3Rpb25Cb2R5PUQ7Qi5wYXJlbnRoZXNpemVkQ291bnQ9aDtyZXR1cm4gbS5maW5pc2hCbG9ja1N0YXRlbWVudCh1KX1mdW5jdGlvbiBadChlLHQsdSl7dmFyIG49XCIkXCIrdTtpZihsKXtpZihxKHUpKXtlLnN0cmljdGVkPXQ7ZS5tZXNzYWdlPW8uU3RyaWN0UGFyYW1OYW1lfWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLnBhcmFtU2V0LG4pKXtlLnN0cmljdGVkPXQ7ZS5tZXNzYWdlPW8uU3RyaWN0UGFyYW1EdXBlfX1lbHNlIGlmKCFlLmZpcnN0UmVzdHJpY3RlZCl7aWYocSh1KSl7ZS5maXJzdFJlc3RyaWN0ZWQ9dDtlLm1lc3NhZ2U9by5TdHJpY3RQYXJhbU5hbWV9ZWxzZSBpZihOKHUpKXtlLmZpcnN0UmVzdHJpY3RlZD10O2UubWVzc2FnZT1vLlN0cmljdFJlc2VydmVkV29yZH1lbHNlIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLnBhcmFtU2V0LG4pKXtlLnN0cmljdGVkPXQ7ZS5tZXNzYWdlPW8uU3RyaWN0UGFyYW1EdXBlfX1lLnBhcmFtU2V0W25dPXRydWV9ZnVuY3Rpb24gUXQoZSl7dmFyIHQsdSxuPVtdLGksbzt0PXk7aWYodC52YWx1ZT09PVwiLi4uXCIpe3U9THQobik7WnQoZSx1LmFyZ3VtZW50LHUuYXJndW1lbnQubmFtZSk7ZS5wYXJhbXMucHVzaCh1KTtlLmRlZmF1bHRzLnB1c2gobnVsbCk7cmV0dXJuIGZhbHNlfXU9VmUobik7Zm9yKGk9MDtpPG4ubGVuZ3RoO2krKyl7WnQoZSxuW2ldLG5baV0udmFsdWUpfWlmKHUudHlwZT09PXIuQXNzaWdubWVudFBhdHRlcm4pe289dS5yaWdodDt1PXUubGVmdDsrK2UuZGVmYXVsdENvdW50fWUucGFyYW1zLnB1c2godSk7ZS5kZWZhdWx0cy5wdXNoKG8pO3JldHVybiFMZShcIilcIil9ZnVuY3Rpb24gZXUoZSl7dmFyIHQ7dD17cGFyYW1zOltdLGRlZmF1bHRDb3VudDowLGRlZmF1bHRzOltdLGZpcnN0UmVzdHJpY3RlZDplfTtrZShcIihcIik7aWYoIUxlKFwiKVwiKSl7dC5wYXJhbVNldD17fTt3aGlsZShBPGcpe2lmKCFRdCh0KSl7YnJlYWt9a2UoXCIsXCIpfX1rZShcIilcIik7aWYodC5kZWZhdWx0Q291bnQ9PT0wKXt0LmRlZmF1bHRzPVtdfXJldHVybntwYXJhbXM6dC5wYXJhbXMsZGVmYXVsdHM6dC5kZWZhdWx0cyxzdHJpY3RlZDp0LnN0cmljdGVkLGZpcnN0UmVzdHJpY3RlZDp0LmZpcnN0UmVzdHJpY3RlZCxtZXNzYWdlOnQubWVzc2FnZX19ZnVuY3Rpb24gdHUoZSx0KXt2YXIgdT1udWxsLG49W10scj1bXSxpLHMsYSxmLGMscCxELGgsbTttPUIuYWxsb3dZaWVsZDtQZShcImZ1bmN0aW9uXCIpO2g9TGUoXCIqXCIpO2lmKGgpe21lKCl9aWYoIXR8fCFMZShcIihcIikpe3M9eTt1PVN0KCk7aWYobCl7aWYocShzLnZhbHVlKSl7X2UocyxvLlN0cmljdEZ1bmN0aW9uTmFtZSl9fWVsc2V7aWYocShzLnZhbHVlKSl7Yz1zO3A9by5TdHJpY3RGdW5jdGlvbk5hbWV9ZWxzZSBpZihOKHMudmFsdWUpKXtjPXM7cD1vLlN0cmljdFJlc2VydmVkV29yZH19fUIuYWxsb3dZaWVsZD0haDtmPWV1KGMpO249Zi5wYXJhbXM7cj1mLmRlZmF1bHRzO2E9Zi5zdHJpY3RlZDtjPWYuZmlyc3RSZXN0cmljdGVkO2lmKGYubWVzc2FnZSl7cD1mLm1lc3NhZ2V9RD1sO2k9WHQoKTtpZihsJiZjKXt3ZShjLHApfWlmKGwmJmEpe19lKGEscCl9bD1EO0IuYWxsb3dZaWVsZD1tO3JldHVybiBlLmZpbmlzaEZ1bmN0aW9uRGVjbGFyYXRpb24odSxuLHIsaSxoKX1mdW5jdGlvbiB1dSgpe3ZhciBlLHQ9bnVsbCx1LG4scixpLHM9W10sYT1bXSxmLGMscD1uZXcgRmUsRCxoO2g9Qi5hbGxvd1lpZWxkO1BlKFwiZnVuY3Rpb25cIik7RD1MZShcIipcIik7aWYoRCl7bWUoKX1CLmFsbG93WWllbGQ9IUQ7aWYoIUxlKFwiKFwiKSl7ZT15O3Q9IWwmJiFEJiZPZShcInlpZWxkXCIpP2l0KCk6U3QoKTtpZihsKXtpZihxKGUudmFsdWUpKXtfZShlLG8uU3RyaWN0RnVuY3Rpb25OYW1lKX19ZWxzZXtpZihxKGUudmFsdWUpKXtuPWU7cj1vLlN0cmljdEZ1bmN0aW9uTmFtZX1lbHNlIGlmKE4oZS52YWx1ZSkpe249ZTtyPW8uU3RyaWN0UmVzZXJ2ZWRXb3JkfX19aT1ldShuKTtzPWkucGFyYW1zO2E9aS5kZWZhdWx0czt1PWkuc3RyaWN0ZWQ7bj1pLmZpcnN0UmVzdHJpY3RlZDtpZihpLm1lc3NhZ2Upe3I9aS5tZXNzYWdlfWM9bDtmPVh0KCk7aWYobCYmbil7d2UobixyKX1pZihsJiZ1KXtfZSh1LHIpfWw9YztCLmFsbG93WWllbGQ9aDtyZXR1cm4gcC5maW5pc2hGdW5jdGlvbkV4cHJlc3Npb24odCxzLGEsZixEKX1mdW5jdGlvbiBudSgpe3ZhciBlLHQsdSxuPWZhbHNlLGkscyxhLGw7ZT1uZXcgRmU7a2UoXCJ7XCIpO2k9W107d2hpbGUoIUxlKFwifVwiKSl7aWYoTGUoXCI7XCIpKXttZSgpfWVsc2V7cz1uZXcgRmU7dD15O3U9ZmFsc2U7YT1MZShcIltcIik7aWYoTGUoXCIqXCIpKXttZSgpfWVsc2V7bD0kZSgpO2lmKGwubmFtZT09PVwic3RhdGljXCImJihIZSgpfHxMZShcIipcIikpKXt0PXk7dT10cnVlO2E9TGUoXCJbXCIpO2lmKExlKFwiKlwiKSl7bWUoKX1lbHNle2w9JGUoKX19fXM9SmUodCxsLGEscyk7aWYocyl7c1tcInN0YXRpY1wiXT11O2lmKHMua2luZD09PVwiaW5pdFwiKXtzLmtpbmQ9XCJtZXRob2RcIn1pZighdSl7aWYoIXMuY29tcHV0ZWQmJihzLmtleS5uYW1lfHxzLmtleS52YWx1ZS50b1N0cmluZygpKT09PVwiY29uc3RydWN0b3JcIil7aWYocy5raW5kIT09XCJtZXRob2RcInx8IXMubWV0aG9kfHxzLnZhbHVlLmdlbmVyYXRvcil7d2UodCxvLkNvbnN0cnVjdG9yU3BlY2lhbE1ldGhvZCl9aWYobil7d2UodCxvLkR1cGxpY2F0ZUNvbnN0cnVjdG9yKX1lbHNle249dHJ1ZX1zLmtpbmQ9XCJjb25zdHJ1Y3RvclwifX1lbHNle2lmKCFzLmNvbXB1dGVkJiYocy5rZXkubmFtZXx8cy5rZXkudmFsdWUudG9TdHJpbmcoKSk9PT1cInByb3RvdHlwZVwiKXt3ZSh0LG8uU3RhdGljUHJvdG90eXBlKX19cy50eXBlPXIuTWV0aG9kRGVmaW5pdGlvbjtkZWxldGUgcy5tZXRob2Q7ZGVsZXRlIHMuc2hvcnRoYW5kO2kucHVzaChzKX1lbHNle3dlKHkpfX19bWUoKTtyZXR1cm4gZS5maW5pc2hDbGFzc0JvZHkoaSl9ZnVuY3Rpb24gcnUoZSl7dmFyIHU9bnVsbCxuPW51bGwscj1uZXcgRmUsaSxvPWw7bD10cnVlO1BlKFwiY2xhc3NcIik7aWYoIWV8fHkudHlwZT09PXQuSWRlbnRpZmllcil7dT1TdCgpfWlmKE9lKFwiZXh0ZW5kc1wiKSl7bWUoKTtuPVRlKGx0KX1pPW51KCk7bD1vO3JldHVybiByLmZpbmlzaENsYXNzRGVjbGFyYXRpb24odSxuLGkpfWZ1bmN0aW9uIGl1KCl7dmFyIGU9bnVsbCx1PW51bGwsbj1uZXcgRmUscixpPWw7bD10cnVlO1BlKFwiY2xhc3NcIik7aWYoeS50eXBlPT09dC5JZGVudGlmaWVyKXtlPVN0KCl9aWYoT2UoXCJleHRlbmRzXCIpKXttZSgpO3U9VGUobHQpfXI9bnUoKTtsPWk7cmV0dXJuIG4uZmluaXNoQ2xhc3NFeHByZXNzaW9uKGUsdSxyKX1mdW5jdGlvbiBvdSgpe3ZhciBlPW5ldyBGZTtpZih5LnR5cGUhPT10LlN0cmluZ0xpdGVyYWwpe2JlKG8uSW52YWxpZE1vZHVsZVNwZWNpZmllcil9cmV0dXJuIGUuZmluaXNoTGl0ZXJhbChtZSgpKX1mdW5jdGlvbiBzdSgpe3ZhciBlLHQsdT1uZXcgRmUsbjtpZihPZShcImRlZmF1bHRcIikpe249bmV3IEZlO21lKCk7dD1uLmZpbmlzaElkZW50aWZpZXIoXCJkZWZhdWx0XCIpfWVsc2V7dD1TdCgpfWlmKGplKFwiYXNcIikpe21lKCk7ZT1pdCgpfXJldHVybiB1LmZpbmlzaEV4cG9ydFNwZWNpZmllcih0LGUpfWZ1bmN0aW9uIGF1KGUpe3ZhciB1PW51bGwsbixyPW51bGwsaT1bXTtpZih5LnR5cGU9PT10LktleXdvcmQpe3N3aXRjaCh5LnZhbHVlKXtjYXNlXCJsZXRcIjpjYXNlXCJjb25zdFwiOmNhc2VcInZhclwiOmNhc2VcImNsYXNzXCI6Y2FzZVwiZnVuY3Rpb25cIjp1PUJ0KCk7cmV0dXJuIGUuZmluaXNoRXhwb3J0TmFtZWREZWNsYXJhdGlvbih1LGksbnVsbCl9fWtlKFwie1wiKTt3aGlsZSghTGUoXCJ9XCIpKXtuPW58fE9lKFwiZGVmYXVsdFwiKTtpLnB1c2goc3UoKSk7aWYoIUxlKFwifVwiKSl7a2UoXCIsXCIpO2lmKExlKFwifVwiKSl7YnJlYWt9fX1rZShcIn1cIik7aWYoamUoXCJmcm9tXCIpKXttZSgpO3I9b3UoKTtSZSgpfWVsc2UgaWYobil7YmUoeS52YWx1ZT9vLlVuZXhwZWN0ZWRUb2tlbjpvLk1pc3NpbmdGcm9tQ2xhdXNlLHkudmFsdWUpfWVsc2V7UmUoKX1yZXR1cm4gZS5maW5pc2hFeHBvcnROYW1lZERlY2xhcmF0aW9uKHUsaSxyKX1mdW5jdGlvbiBsdShlKXt2YXIgdD1udWxsLHU9bnVsbDtQZShcImRlZmF1bHRcIik7aWYoT2UoXCJmdW5jdGlvblwiKSl7dD10dShuZXcgRmUsdHJ1ZSk7cmV0dXJuIGUuZmluaXNoRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uKHQpfWlmKE9lKFwiY2xhc3NcIikpe3Q9cnUodHJ1ZSk7cmV0dXJuIGUuZmluaXNoRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uKHQpfWlmKGplKFwiZnJvbVwiKSl7YmUoby5VbmV4cGVjdGVkVG9rZW4seS52YWx1ZSl9aWYoTGUoXCJ7XCIpKXt1PVplKCl9ZWxzZSBpZihMZShcIltcIikpe3U9WWUoKX1lbHNle3U9Z3QoKX1SZSgpO3JldHVybiBlLmZpbmlzaEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbih1KX1mdW5jdGlvbiBmdShlKXt2YXIgdDtrZShcIipcIik7aWYoIWplKFwiZnJvbVwiKSl7YmUoeS52YWx1ZT9vLlVuZXhwZWN0ZWRUb2tlbjpvLk1pc3NpbmdGcm9tQ2xhdXNlLHkudmFsdWUpfW1lKCk7dD1vdSgpO1JlKCk7cmV0dXJuIGUuZmluaXNoRXhwb3J0QWxsRGVjbGFyYXRpb24odCl9ZnVuY3Rpb24gY3UoKXt2YXIgZT1uZXcgRmU7aWYoQi5pbkZ1bmN0aW9uQm9keSl7YmUoby5JbGxlZ2FsRXhwb3J0RGVjbGFyYXRpb24pfVBlKFwiZXhwb3J0XCIpO2lmKE9lKFwiZGVmYXVsdFwiKSl7cmV0dXJuIGx1KGUpfWlmKExlKFwiKlwiKSl7cmV0dXJuIGZ1KGUpfXJldHVybiBhdShlKX1mdW5jdGlvbiBwdSgpe3ZhciBlLHQsdT1uZXcgRmU7dD1pdCgpO2lmKGplKFwiYXNcIikpe21lKCk7ZT1TdCgpfXJldHVybiB1LmZpbmlzaEltcG9ydFNwZWNpZmllcihlLHQpfWZ1bmN0aW9uIER1KCl7dmFyIGU9W107a2UoXCJ7XCIpO3doaWxlKCFMZShcIn1cIikpe2UucHVzaChwdSgpKTtpZighTGUoXCJ9XCIpKXtrZShcIixcIik7aWYoTGUoXCJ9XCIpKXticmVha319fWtlKFwifVwiKTtyZXR1cm4gZX1mdW5jdGlvbiBodSgpe3ZhciBlLHQ9bmV3IEZlO2U9aXQoKTtyZXR1cm4gdC5maW5pc2hJbXBvcnREZWZhdWx0U3BlY2lmaWVyKGUpfWZ1bmN0aW9uIG11KCl7dmFyIGUsdD1uZXcgRmU7a2UoXCIqXCIpO2lmKCFqZShcImFzXCIpKXtiZShvLk5vQXNBZnRlckltcG9ydE5hbWVzcGFjZSl9bWUoKTtlPWl0KCk7cmV0dXJuIHQuZmluaXNoSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyKGUpfWZ1bmN0aW9uIGR1KCl7dmFyIGU9W10sdSxuPW5ldyBGZTtpZihCLmluRnVuY3Rpb25Cb2R5KXtiZShvLklsbGVnYWxJbXBvcnREZWNsYXJhdGlvbil9UGUoXCJpbXBvcnRcIik7aWYoeS50eXBlPT09dC5TdHJpbmdMaXRlcmFsKXt1PW91KCl9ZWxzZXtpZihMZShcIntcIikpe2U9ZS5jb25jYXQoRHUoKSl9ZWxzZSBpZihMZShcIipcIikpe2UucHVzaChtdSgpKX1lbHNlIGlmKGNlKHkpJiYhT2UoXCJkZWZhdWx0XCIpKXtlLnB1c2goaHUoKSk7aWYoTGUoXCIsXCIpKXttZSgpO2lmKExlKFwiKlwiKSl7ZS5wdXNoKG11KCkpfWVsc2UgaWYoTGUoXCJ7XCIpKXtlPWUuY29uY2F0KER1KCkpfWVsc2V7d2UoeSl9fX1lbHNle3dlKG1lKCkpfWlmKCFqZShcImZyb21cIikpe2JlKHkudmFsdWU/by5VbmV4cGVjdGVkVG9rZW46by5NaXNzaW5nRnJvbUNsYXVzZSx5LnZhbHVlKX1tZSgpO3U9b3UoKX1SZSgpO3JldHVybiBuLmZpbmlzaEltcG9ydERlY2xhcmF0aW9uKGUsdSl9ZnVuY3Rpb24gQXUoKXt2YXIgZSx1PVtdLG4saSxzO3doaWxlKEE8Zyl7bj15O2lmKG4udHlwZSE9PXQuU3RyaW5nTGl0ZXJhbCl7YnJlYWt9ZT1CdCgpO3UucHVzaChlKTtpZihlLmV4cHJlc3Npb24udHlwZSE9PXIuTGl0ZXJhbCl7YnJlYWt9aT1hLnNsaWNlKG4uc3RhcnQrMSxuLmVuZC0xKTtpZihpPT09XCJ1c2Ugc3RyaWN0XCIpe2w9dHJ1ZTtpZihzKXtfZShzLG8uU3RyaWN0T2N0YWxMaXRlcmFsKX19ZWxzZXtpZighcyYmbi5vY3RhbCl7cz1ufX19d2hpbGUoQTxnKXtlPUJ0KCk7aWYodHlwZW9mIGU9PT1cInVuZGVmaW5lZFwiKXticmVha311LnB1c2goZSl9cmV0dXJuIHV9ZnVuY3Rpb24gQ3UoKXt2YXIgZSx0O2RlKCk7dD1uZXcgRmU7ZT1BdSgpO3JldHVybiB0LmZpbmlzaFByb2dyYW0oZSxCLnNvdXJjZVR5cGUpfWZ1bmN0aW9uIEV1KCl7dmFyIGUsdCx1LG49W107Zm9yKGU9MDtlPHYudG9rZW5zLmxlbmd0aDsrK2Upe3Q9di50b2tlbnNbZV07dT17dHlwZTp0LnR5cGUsdmFsdWU6dC52YWx1ZX07aWYodC5yZWdleCl7dS5yZWdleD17cGF0dGVybjp0LnJlZ2V4LnBhdHRlcm4sZmxhZ3M6dC5yZWdleC5mbGFnc319aWYodi5yYW5nZSl7dS5yYW5nZT10LnJhbmdlfWlmKHYubG9jKXt1LmxvYz10LmxvY31uLnB1c2godSl9di50b2tlbnM9bn1mdW5jdGlvbiBGdShlLHUpe3ZhciBuLHI7bj1TdHJpbmc7aWYodHlwZW9mIGUhPT1cInN0cmluZ1wiJiYhKGUgaW5zdGFuY2VvZiBTdHJpbmcpKXtlPW4oZSl9YT1lO2Y9MDtjPWEubGVuZ3RoPjA/MTowO3A9MDtBPWY7Qz1jO0U9cDtnPWEubGVuZ3RoO3k9bnVsbDtCPXthbGxvd0luOnRydWUsYWxsb3dZaWVsZDp0cnVlLGxhYmVsU2V0Ont9LGluRnVuY3Rpb25Cb2R5OmZhbHNlLGluSXRlcmF0aW9uOmZhbHNlLGluU3dpdGNoOmZhbHNlLGxhc3RDb21tZW50U3RhcnQ6LTEsY3VybHlTdGFjazpbXX07dj17fTt1PXV8fHt9O3UudG9rZW5zPXRydWU7di50b2tlbnM9W107di50b2tlbml6ZT10cnVlO3Yub3BlblBhcmVuVG9rZW49LTE7di5vcGVuQ3VybHlUb2tlbj0tMTt2LnJhbmdlPXR5cGVvZiB1LnJhbmdlPT09XCJib29sZWFuXCImJnUucmFuZ2U7di5sb2M9dHlwZW9mIHUubG9jPT09XCJib29sZWFuXCImJnUubG9jO2lmKHR5cGVvZiB1LmNvbW1lbnQ9PT1cImJvb2xlYW5cIiYmdS5jb21tZW50KXt2LmNvbW1lbnRzPVtdfWlmKHR5cGVvZiB1LnRvbGVyYW50PT09XCJib29sZWFuXCImJnUudG9sZXJhbnQpe3YuZXJyb3JzPVtdfXRyeXtkZSgpO2lmKHkudHlwZT09PXQuRU9GKXtyZXR1cm4gdi50b2tlbnN9bWUoKTt3aGlsZSh5LnR5cGUhPT10LkVPRil7dHJ5e21lKCl9Y2F0Y2goaSl7aWYodi5lcnJvcnMpe3llKGkpO2JyZWFrfWVsc2V7dGhyb3cgaX19fUV1KCk7cj12LnRva2VucztpZih0eXBlb2Ygdi5jb21tZW50cyE9PVwidW5kZWZpbmVkXCIpe3IuY29tbWVudHM9di5jb21tZW50c31pZih0eXBlb2Ygdi5lcnJvcnMhPT1cInVuZGVmaW5lZFwiKXtyLmVycm9ycz12LmVycm9yc319Y2F0Y2gobyl7dGhyb3cgb31maW5hbGx5e3Y9e319cmV0dXJuIHJ9ZnVuY3Rpb24gZ3UoZSx0KXt2YXIgdSxuO249U3RyaW5nO2lmKHR5cGVvZiBlIT09XCJzdHJpbmdcIiYmIShlIGluc3RhbmNlb2YgU3RyaW5nKSl7ZT1uKGUpfWE9ZTtmPTA7Yz1hLmxlbmd0aD4wPzE6MDtwPTA7QT1mO0M9YztFPXA7Zz1hLmxlbmd0aDt5PW51bGw7Qj17YWxsb3dJbjp0cnVlLGFsbG93WWllbGQ6dHJ1ZSxsYWJlbFNldDp7fSxpbkZ1bmN0aW9uQm9keTpmYWxzZSxpbkl0ZXJhdGlvbjpmYWxzZSxpblN3aXRjaDpmYWxzZSxsYXN0Q29tbWVudFN0YXJ0Oi0xLGN1cmx5U3RhY2s6W10sc291cmNlVHlwZTpcInNjcmlwdFwifTtsPWZhbHNlO3Y9e307aWYodHlwZW9mIHQhPT1cInVuZGVmaW5lZFwiKXt2LnJhbmdlPXR5cGVvZiB0LnJhbmdlPT09XCJib29sZWFuXCImJnQucmFuZ2U7di5sb2M9dHlwZW9mIHQubG9jPT09XCJib29sZWFuXCImJnQubG9jO3YuYXR0YWNoQ29tbWVudD10eXBlb2YgdC5hdHRhY2hDb21tZW50PT09XCJib29sZWFuXCImJnQuYXR0YWNoQ29tbWVudDtpZih2LmxvYyYmdC5zb3VyY2UhPT1udWxsJiZ0LnNvdXJjZSE9PXVuZGVmaW5lZCl7di5zb3VyY2U9bih0LnNvdXJjZSl9aWYodHlwZW9mIHQudG9rZW5zPT09XCJib29sZWFuXCImJnQudG9rZW5zKXt2LnRva2Vucz1bXX1pZih0eXBlb2YgdC5jb21tZW50PT09XCJib29sZWFuXCImJnQuY29tbWVudCl7di5jb21tZW50cz1bXX1pZih0eXBlb2YgdC50b2xlcmFudD09PVwiYm9vbGVhblwiJiZ0LnRvbGVyYW50KXt2LmVycm9ycz1bXX1pZih2LmF0dGFjaENvbW1lbnQpe3YucmFuZ2U9dHJ1ZTt2LmNvbW1lbnRzPVtdO3YuYm90dG9tUmlnaHRTdGFjaz1bXTt2LnRyYWlsaW5nQ29tbWVudHM9W107di5sZWFkaW5nQ29tbWVudHM9W119aWYodC5zb3VyY2VUeXBlPT09XCJtb2R1bGVcIil7Qi5zb3VyY2VUeXBlPXQuc291cmNlVHlwZTtsPXRydWV9fXRyeXt1PUN1KCk7aWYodHlwZW9mIHYuY29tbWVudHMhPT1cInVuZGVmaW5lZFwiKXt1LmNvbW1lbnRzPXYuY29tbWVudHN9aWYodHlwZW9mIHYudG9rZW5zIT09XCJ1bmRlZmluZWRcIil7RXUoKTt1LnRva2Vucz12LnRva2Vuc31pZih0eXBlb2Ygdi5lcnJvcnMhPT1cInVuZGVmaW5lZFwiKXt1LmVycm9ycz12LmVycm9yc319Y2F0Y2gocil7dGhyb3cgcn1maW5hbGx5e3Y9e319cmV0dXJuIHV9ZS52ZXJzaW9uPVwiMi42LjBcIjtlLnRva2VuaXplPUZ1O2UucGFyc2U9Z3U7ZS5TeW50YXg9ZnVuY3Rpb24oKXt2YXIgZSx0PXt9O2lmKHR5cGVvZiBPYmplY3QuY3JlYXRlPT09XCJmdW5jdGlvblwiKXt0PU9iamVjdC5jcmVhdGUobnVsbCl9Zm9yKGUgaW4gcil7aWYoci5oYXNPd25Qcm9wZXJ0eShlKSl7dFtlXT1yW2VdfX1pZih0eXBlb2YgT2JqZWN0LmZyZWV6ZT09PVwiZnVuY3Rpb25cIil7T2JqZWN0LmZyZWV6ZSh0KX1yZXR1cm4gdH0oKX0pfSx7fV0sNDk6W2Z1bmN0aW9uKHQsdSxuKXsoZnVuY3Rpb24odCx1KXtcInVzZSBzdHJpY3RcIjtpZih0eXBlb2YgZT09PVwiZnVuY3Rpb25cIiYmZS5hbWQpe2UoW1wiZXhwb3J0c1wiXSx1KX1lbHNlIGlmKHR5cGVvZiBuIT09XCJ1bmRlZmluZWRcIil7dShuKX1lbHNle3UodC5lc3RyYXZlcnNlPXt9KX19KSh0aGlzLGZ1bmN0aW9uIHIoZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQsdSxuLGksbyxzLGEsbCxmO2Z1bmN0aW9uIGMoKXt9dT1BcnJheS5pc0FycmF5O2lmKCF1KXt1PWZ1bmN0aW9uIFMoZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKT09PVwiW29iamVjdCBBcnJheV1cIn19ZnVuY3Rpb24gcChlKXt2YXIgdD17fSx1LG47Zm9yKHUgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eSh1KSl7bj1lW3VdO2lmKHR5cGVvZiBuPT09XCJvYmplY3RcIiYmbiE9PW51bGwpe3RbdV09cChuKX1lbHNle3RbdV09bn19fXJldHVybiB0fWZ1bmN0aW9uIEQoZSl7dmFyIHQ9e30sdTtmb3IodSBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KHUpKXt0W3VdPWVbdV19fXJldHVybiB0fWMoRCk7ZnVuY3Rpb24gaChlLHQpe3ZhciB1LG4scixpO249ZS5sZW5ndGg7cj0wO3doaWxlKG4pe3U9bj4+PjE7aT1yK3U7aWYodChlW2ldKSl7bj11fWVsc2V7cj1pKzE7bi09dSsxfX1yZXR1cm4gcn1mdW5jdGlvbiBtKGUsdCl7dmFyIHUsbixyLGk7bj1lLmxlbmd0aDtyPTA7d2hpbGUobil7dT1uPj4+MTtpPXIrdTtpZih0KGVbaV0pKXtyPWkrMTtuLT11KzF9ZWxzZXtuPXV9fXJldHVybiByfWMobSk7bz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGZ1bmN0aW9uKHQpe2UucHJvdG90eXBlPXQ7cmV0dXJuIG5ldyBlfX0oKTtzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXt2YXIgdD1bXSx1O2Zvcih1IGluIGUpe3QucHVzaCh1KX1yZXR1cm4gdH07ZnVuY3Rpb24gZChlLHQpe3ZhciB1PXModCksbixyLGk7Zm9yKHI9MCxpPXUubGVuZ3RoO3I8aTtyKz0xKXtuPXVbcl07ZVtuXT10W25dfXJldHVybiBlfXQ9e0Fzc2lnbm1lbnRFeHByZXNzaW9uOlwiQXNzaWdubWVudEV4cHJlc3Npb25cIixBcnJheUV4cHJlc3Npb246XCJBcnJheUV4cHJlc3Npb25cIixBcnJheVBhdHRlcm46XCJBcnJheVBhdHRlcm5cIixBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjpcIkFycm93RnVuY3Rpb25FeHByZXNzaW9uXCIsQXdhaXRFeHByZXNzaW9uOlwiQXdhaXRFeHByZXNzaW9uXCIsQmxvY2tTdGF0ZW1lbnQ6XCJCbG9ja1N0YXRlbWVudFwiLEJpbmFyeUV4cHJlc3Npb246XCJCaW5hcnlFeHByZXNzaW9uXCIsQnJlYWtTdGF0ZW1lbnQ6XCJCcmVha1N0YXRlbWVudFwiLENhbGxFeHByZXNzaW9uOlwiQ2FsbEV4cHJlc3Npb25cIixDYXRjaENsYXVzZTpcIkNhdGNoQ2xhdXNlXCIsQ2xhc3NCb2R5OlwiQ2xhc3NCb2R5XCIsQ2xhc3NEZWNsYXJhdGlvbjpcIkNsYXNzRGVjbGFyYXRpb25cIixDbGFzc0V4cHJlc3Npb246XCJDbGFzc0V4cHJlc3Npb25cIixDb21wcmVoZW5zaW9uQmxvY2s6XCJDb21wcmVoZW5zaW9uQmxvY2tcIixDb21wcmVoZW5zaW9uRXhwcmVzc2lvbjpcIkNvbXByZWhlbnNpb25FeHByZXNzaW9uXCIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOlwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCIsQ29udGludWVTdGF0ZW1lbnQ6XCJDb250aW51ZVN0YXRlbWVudFwiLERlYnVnZ2VyU3RhdGVtZW50OlwiRGVidWdnZXJTdGF0ZW1lbnRcIixEaXJlY3RpdmVTdGF0ZW1lbnQ6XCJEaXJlY3RpdmVTdGF0ZW1lbnRcIixEb1doaWxlU3RhdGVtZW50OlwiRG9XaGlsZVN0YXRlbWVudFwiLEVtcHR5U3RhdGVtZW50OlwiRW1wdHlTdGF0ZW1lbnRcIixFeHBvcnRCYXRjaFNwZWNpZmllcjpcIkV4cG9ydEJhdGNoU3BlY2lmaWVyXCIsRXhwb3J0RGVjbGFyYXRpb246XCJFeHBvcnREZWNsYXJhdGlvblwiLEV4cG9ydFNwZWNpZmllcjpcIkV4cG9ydFNwZWNpZmllclwiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsRm9yU3RhdGVtZW50OlwiRm9yU3RhdGVtZW50XCIsRm9ySW5TdGF0ZW1lbnQ6XCJGb3JJblN0YXRlbWVudFwiLEZvck9mU3RhdGVtZW50OlwiRm9yT2ZTdGF0ZW1lbnRcIixGdW5jdGlvbkRlY2xhcmF0aW9uOlwiRnVuY3Rpb25EZWNsYXJhdGlvblwiLEZ1bmN0aW9uRXhwcmVzc2lvbjpcIkZ1bmN0aW9uRXhwcmVzc2lvblwiLEdlbmVyYXRvckV4cHJlc3Npb246XCJHZW5lcmF0b3JFeHByZXNzaW9uXCIsSWRlbnRpZmllcjpcIklkZW50aWZpZXJcIixJZlN0YXRlbWVudDpcIklmU3RhdGVtZW50XCIsSW1wb3J0RGVjbGFyYXRpb246XCJJbXBvcnREZWNsYXJhdGlvblwiLEltcG9ydERlZmF1bHRTcGVjaWZpZXI6XCJJbXBvcnREZWZhdWx0U3BlY2lmaWVyXCIsSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyOlwiSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyXCIsSW1wb3J0U3BlY2lmaWVyOlwiSW1wb3J0U3BlY2lmaWVyXCIsTGl0ZXJhbDpcIkxpdGVyYWxcIixMYWJlbGVkU3RhdGVtZW50OlwiTGFiZWxlZFN0YXRlbWVudFwiLExvZ2ljYWxFeHByZXNzaW9uOlwiTG9naWNhbEV4cHJlc3Npb25cIixNZW1iZXJFeHByZXNzaW9uOlwiTWVtYmVyRXhwcmVzc2lvblwiLE1ldGhvZERlZmluaXRpb246XCJNZXRob2REZWZpbml0aW9uXCIsTW9kdWxlU3BlY2lmaWVyOlwiTW9kdWxlU3BlY2lmaWVyXCIsTmV3RXhwcmVzc2lvbjpcIk5ld0V4cHJlc3Npb25cIixPYmplY3RFeHByZXNzaW9uOlwiT2JqZWN0RXhwcmVzc2lvblwiLE9iamVjdFBhdHRlcm46XCJPYmplY3RQYXR0ZXJuXCIsUHJvZ3JhbTpcIlByb2dyYW1cIixQcm9wZXJ0eTpcIlByb3BlcnR5XCIsUmV0dXJuU3RhdGVtZW50OlwiUmV0dXJuU3RhdGVtZW50XCIsU2VxdWVuY2VFeHByZXNzaW9uOlwiU2VxdWVuY2VFeHByZXNzaW9uXCIsU3ByZWFkRWxlbWVudDpcIlNwcmVhZEVsZW1lbnRcIixTd2l0Y2hTdGF0ZW1lbnQ6XCJTd2l0Y2hTdGF0ZW1lbnRcIixTd2l0Y2hDYXNlOlwiU3dpdGNoQ2FzZVwiLFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjpcIlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvblwiLFRlbXBsYXRlRWxlbWVudDpcIlRlbXBsYXRlRWxlbWVudFwiLFRlbXBsYXRlTGl0ZXJhbDpcIlRlbXBsYXRlTGl0ZXJhbFwiLFRoaXNFeHByZXNzaW9uOlwiVGhpc0V4cHJlc3Npb25cIixUaHJvd1N0YXRlbWVudDpcIlRocm93U3RhdGVtZW50XCIsVHJ5U3RhdGVtZW50OlwiVHJ5U3RhdGVtZW50XCIsVW5hcnlFeHByZXNzaW9uOlwiVW5hcnlFeHByZXNzaW9uXCIsVXBkYXRlRXhwcmVzc2lvbjpcIlVwZGF0ZUV4cHJlc3Npb25cIixWYXJpYWJsZURlY2xhcmF0aW9uOlwiVmFyaWFibGVEZWNsYXJhdGlvblwiLFZhcmlhYmxlRGVjbGFyYXRvcjpcIlZhcmlhYmxlRGVjbGFyYXRvclwiLFdoaWxlU3RhdGVtZW50OlwiV2hpbGVTdGF0ZW1lbnRcIixXaXRoU3RhdGVtZW50OlwiV2l0aFN0YXRlbWVudFwiLFlpZWxkRXhwcmVzc2lvbjpcIllpZWxkRXhwcmVzc2lvblwifTtpPXtBc3NpZ25tZW50RXhwcmVzc2lvbjpbXCJsZWZ0XCIsXCJyaWdodFwiXSxBcnJheUV4cHJlc3Npb246W1wiZWxlbWVudHNcIl0sQXJyYXlQYXR0ZXJuOltcImVsZW1lbnRzXCJdLEFycm93RnVuY3Rpb25FeHByZXNzaW9uOltcInBhcmFtc1wiLFwiZGVmYXVsdHNcIixcInJlc3RcIixcImJvZHlcIl0sQXdhaXRFeHByZXNzaW9uOltcImFyZ3VtZW50XCJdLEJsb2NrU3RhdGVtZW50OltcImJvZHlcIl0sQmluYXJ5RXhwcmVzc2lvbjpbXCJsZWZ0XCIsXCJyaWdodFwiXSxCcmVha1N0YXRlbWVudDpbXCJsYWJlbFwiXSxDYWxsRXhwcmVzc2lvbjpbXCJjYWxsZWVcIixcImFyZ3VtZW50c1wiXSxDYXRjaENsYXVzZTpbXCJwYXJhbVwiLFwiYm9keVwiXSxDbGFzc0JvZHk6W1wiYm9keVwiXSxDbGFzc0RlY2xhcmF0aW9uOltcImlkXCIsXCJib2R5XCIsXCJzdXBlckNsYXNzXCJdLENsYXNzRXhwcmVzc2lvbjpbXCJpZFwiLFwiYm9keVwiLFwic3VwZXJDbGFzc1wiXSxDb21wcmVoZW5zaW9uQmxvY2s6W1wibGVmdFwiLFwicmlnaHRcIl0sQ29tcHJlaGVuc2lvbkV4cHJlc3Npb246W1wiYmxvY2tzXCIsXCJmaWx0ZXJcIixcImJvZHlcIl0sQ29uZGl0aW9uYWxFeHByZXNzaW9uOltcInRlc3RcIixcImNvbnNlcXVlbnRcIixcImFsdGVybmF0ZVwiXSxDb250aW51ZVN0YXRlbWVudDpbXCJsYWJlbFwiXSxEZWJ1Z2dlclN0YXRlbWVudDpbXSxEaXJlY3RpdmVTdGF0ZW1lbnQ6W10sRG9XaGlsZVN0YXRlbWVudDpbXCJib2R5XCIsXCJ0ZXN0XCJdLEVtcHR5U3RhdGVtZW50OltdLEV4cG9ydEJhdGNoU3BlY2lmaWVyOltdLEV4cG9ydERlY2xhcmF0aW9uOltcImRlY2xhcmF0aW9uXCIsXCJzcGVjaWZpZXJzXCIsXCJzb3VyY2VcIl0sRXhwb3J0U3BlY2lmaWVyOltcImlkXCIsXCJuYW1lXCJdLEV4cHJlc3Npb25TdGF0ZW1lbnQ6W1wiZXhwcmVzc2lvblwiXSxGb3JTdGF0ZW1lbnQ6W1wiaW5pdFwiLFwidGVzdFwiLFwidXBkYXRlXCIsXCJib2R5XCJdLEZvckluU3RhdGVtZW50OltcImxlZnRcIixcInJpZ2h0XCIsXCJib2R5XCJdLEZvck9mU3RhdGVtZW50OltcImxlZnRcIixcInJpZ2h0XCIsXCJib2R5XCJdLEZ1bmN0aW9uRGVjbGFyYXRpb246W1wiaWRcIixcInBhcmFtc1wiLFwiZGVmYXVsdHNcIixcInJlc3RcIixcImJvZHlcIl0sRnVuY3Rpb25FeHByZXNzaW9uOltcImlkXCIsXCJwYXJhbXNcIixcImRlZmF1bHRzXCIsXCJyZXN0XCIsXCJib2R5XCJdLEdlbmVyYXRvckV4cHJlc3Npb246W1wiYmxvY2tzXCIsXCJmaWx0ZXJcIixcImJvZHlcIl0sSWRlbnRpZmllcjpbXSxJZlN0YXRlbWVudDpbXCJ0ZXN0XCIsXCJjb25zZXF1ZW50XCIsXCJhbHRlcm5hdGVcIl0sSW1wb3J0RGVjbGFyYXRpb246W1wic3BlY2lmaWVyc1wiLFwic291cmNlXCJdLEltcG9ydERlZmF1bHRTcGVjaWZpZXI6W1wiaWRcIl0sSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyOltcImlkXCJdLEltcG9ydFNwZWNpZmllcjpbXCJpZFwiLFwibmFtZVwiXSxMaXRlcmFsOltdLExhYmVsZWRTdGF0ZW1lbnQ6W1wibGFiZWxcIixcImJvZHlcIl0sTG9naWNhbEV4cHJlc3Npb246W1wibGVmdFwiLFwicmlnaHRcIl0sTWVtYmVyRXhwcmVzc2lvbjpbXCJvYmplY3RcIixcInByb3BlcnR5XCJdLE1ldGhvZERlZmluaXRpb246W1wia2V5XCIsXCJ2YWx1ZVwiXSxNb2R1bGVTcGVjaWZpZXI6W10sTmV3RXhwcmVzc2lvbjpbXCJjYWxsZWVcIixcImFyZ3VtZW50c1wiXSxPYmplY3RFeHByZXNzaW9uOltcInByb3BlcnRpZXNcIl0sT2JqZWN0UGF0dGVybjpbXCJwcm9wZXJ0aWVzXCJdLFByb2dyYW06W1wiYm9keVwiXSxQcm9wZXJ0eTpbXCJrZXlcIixcInZhbHVlXCJdLFJldHVyblN0YXRlbWVudDpbXCJhcmd1bWVudFwiXSxTZXF1ZW5jZUV4cHJlc3Npb246W1wiZXhwcmVzc2lvbnNcIl0sU3ByZWFkRWxlbWVudDpbXCJhcmd1bWVudFwiXSxTd2l0Y2hTdGF0ZW1lbnQ6W1wiZGlzY3JpbWluYW50XCIsXCJjYXNlc1wiXSxTd2l0Y2hDYXNlOltcInRlc3RcIixcImNvbnNlcXVlbnRcIl0sVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uOltcInRhZ1wiLFwicXVhc2lcIl0sVGVtcGxhdGVFbGVtZW50OltdLFRlbXBsYXRlTGl0ZXJhbDpbXCJxdWFzaXNcIixcImV4cHJlc3Npb25zXCJdLFRoaXNFeHByZXNzaW9uOltdLFRocm93U3RhdGVtZW50OltcImFyZ3VtZW50XCJdLFRyeVN0YXRlbWVudDpbXCJibG9ja1wiLFwiaGFuZGxlcnNcIixcImhhbmRsZXJcIixcImd1YXJkZWRIYW5kbGVyc1wiLFwiZmluYWxpemVyXCJdLFVuYXJ5RXhwcmVzc2lvbjpbXCJhcmd1bWVudFwiXSxVcGRhdGVFeHByZXNzaW9uOltcImFyZ3VtZW50XCJdLFZhcmlhYmxlRGVjbGFyYXRpb246W1wiZGVjbGFyYXRpb25zXCJdLFZhcmlhYmxlRGVjbGFyYXRvcjpbXCJpZFwiLFwiaW5pdFwiXSxXaGlsZVN0YXRlbWVudDpbXCJ0ZXN0XCIsXCJib2R5XCJdLFdpdGhTdGF0ZW1lbnQ6W1wib2JqZWN0XCIsXCJib2R5XCJdLFlpZWxkRXhwcmVzc2lvbjpbXCJhcmd1bWVudFwiXX07YT17fTtsPXt9O2Y9e307bj17QnJlYWs6YSxTa2lwOmwsUmVtb3ZlOmZ9O2Z1bmN0aW9uIEEoZSx0KXt0aGlzLnBhcmVudD1lO3RoaXMua2V5PXR9QS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbiB4KGUpe3RoaXMucGFyZW50W3RoaXMua2V5XT1lfTtBLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24gdygpe2lmKHUodGhpcy5wYXJlbnQpKXt0aGlzLnBhcmVudC5zcGxpY2UodGhpcy5rZXksMSk7cmV0dXJuIHRydWV9ZWxzZXt0aGlzLnJlcGxhY2UobnVsbCk7cmV0dXJuIGZhbHNlfX07ZnVuY3Rpb24gQyhlLHQsdSxuKXt0aGlzLm5vZGU9ZTt0aGlzLnBhdGg9dDt0aGlzLndyYXA9dTt0aGlzLnJlZj1ufWZ1bmN0aW9uIEUoKXt9RS5wcm90b3R5cGUucGF0aD1mdW5jdGlvbiBfKCl7dmFyIGUsdCxuLHIsaSxvO2Z1bmN0aW9uIHMoZSx0KXtpZih1KHQpKXtmb3Iobj0wLHI9dC5sZW5ndGg7bjxyOysrbil7ZS5wdXNoKHRbbl0pfX1lbHNle2UucHVzaCh0KX19aWYoIXRoaXMuX19jdXJyZW50LnBhdGgpe3JldHVybiBudWxsfWk9W107Zm9yKGU9Mix0PXRoaXMuX19sZWF2ZWxpc3QubGVuZ3RoO2U8dDsrK2Upe289dGhpcy5fX2xlYXZlbGlzdFtlXTtzKGksby5wYXRoKX1zKGksdGhpcy5fX2N1cnJlbnQucGF0aCk7cmV0dXJuIGl9O0UucHJvdG90eXBlLnR5cGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmN1cnJlbnQoKTtyZXR1cm4gZS50eXBlfHx0aGlzLl9fY3VycmVudC53cmFwfTtFLnByb3RvdHlwZS5wYXJlbnRzPWZ1bmN0aW9uIGsoKXt2YXIgZSx0LHU7dT1bXTtmb3IoZT0xLHQ9dGhpcy5fX2xlYXZlbGlzdC5sZW5ndGg7ZTx0OysrZSl7dS5wdXNoKHRoaXMuX19sZWF2ZWxpc3RbZV0ubm9kZSl9cmV0dXJuIHV9O0UucHJvdG90eXBlLmN1cnJlbnQ9ZnVuY3Rpb24gSSgpe3JldHVybiB0aGlzLl9fY3VycmVudC5ub2RlfTtFLnByb3RvdHlwZS5fX2V4ZWN1dGU9ZnVuY3Rpb24gUChlLHQpe3ZhciB1LG47bj11bmRlZmluZWQ7dT10aGlzLl9fY3VycmVudDt0aGlzLl9fY3VycmVudD10O3RoaXMuX19zdGF0ZT1udWxsO2lmKGUpe249ZS5jYWxsKHRoaXMsdC5ub2RlLHRoaXMuX19sZWF2ZWxpc3RbdGhpcy5fX2xlYXZlbGlzdC5sZW5ndGgtMV0ubm9kZSl9dGhpcy5fX2N1cnJlbnQ9dTtyZXR1cm4gbn07RS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uIEwoZSl7dGhpcy5fX3N0YXRlPWV9O0UucHJvdG90eXBlLnNraXA9ZnVuY3Rpb24oKXt0aGlzLm5vdGlmeShsKX07RS5wcm90b3R5cGVbXCJicmVha1wiXT1mdW5jdGlvbigpe3RoaXMubm90aWZ5KGEpfTtFLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLm5vdGlmeShmKX07RS5wcm90b3R5cGUuX19pbml0aWFsaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy52aXNpdG9yPXQ7dGhpcy5yb290PWU7dGhpcy5fX3dvcmtsaXN0PVtdO3RoaXMuX19sZWF2ZWxpc3Q9W107dGhpcy5fX2N1cnJlbnQ9bnVsbDt0aGlzLl9fc3RhdGU9bnVsbDt0aGlzLl9fZmFsbGJhY2s9dC5mYWxsYmFjaz09PVwiaXRlcmF0aW9uXCI7dGhpcy5fX2tleXM9aTtpZih0LmtleXMpe3RoaXMuX19rZXlzPWQobyh0aGlzLl9fa2V5cyksdC5rZXlzKX19O2Z1bmN0aW9uIEYoZSl7aWYoZT09bnVsbCl7cmV0dXJuIGZhbHNlfXJldHVybiB0eXBlb2YgZT09PVwib2JqZWN0XCImJnR5cGVvZiBlLnR5cGU9PT1cInN0cmluZ1wifWZ1bmN0aW9uIGcoZSx1KXtyZXR1cm4oZT09PXQuT2JqZWN0RXhwcmVzc2lvbnx8ZT09PXQuT2JqZWN0UGF0dGVybikmJlwicHJvcGVydGllc1wiPT09dX1FLnByb3RvdHlwZS50cmF2ZXJzZT1mdW5jdGlvbiBPKGUsdCl7dmFyIG4scixpLG8sZixjLHAsRCxoLG0sZCxBO3RoaXMuX19pbml0aWFsaXplKGUsdCk7QT17fTtuPXRoaXMuX193b3JrbGlzdDtyPXRoaXMuX19sZWF2ZWxpc3Q7bi5wdXNoKG5ldyBDKGUsbnVsbCxudWxsLG51bGwpKTtyLnB1c2gobmV3IEMobnVsbCxudWxsLG51bGwsbnVsbCkpO3doaWxlKG4ubGVuZ3RoKXtpPW4ucG9wKCk7aWYoaT09PUEpe2k9ci5wb3AoKTtjPXRoaXMuX19leGVjdXRlKHQubGVhdmUsaSk7aWYodGhpcy5fX3N0YXRlPT09YXx8Yz09PWEpe3JldHVybn1jb250aW51ZX1pZihpLm5vZGUpe2M9dGhpcy5fX2V4ZWN1dGUodC5lbnRlcixpKTtpZih0aGlzLl9fc3RhdGU9PT1hfHxjPT09YSl7cmV0dXJufW4ucHVzaChBKTtyLnB1c2goaSk7aWYodGhpcy5fX3N0YXRlPT09bHx8Yz09PWwpe2NvbnRpbnVlfW89aS5ub2RlO2Y9aS53cmFwfHxvLnR5cGU7bT10aGlzLl9fa2V5c1tmXTtpZighbSl7aWYodGhpcy5fX2ZhbGxiYWNrKXttPXMobyl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG5vZGUgdHlwZSBcIitmK1wiLlwiKX19RD1tLmxlbmd0aDt3aGlsZSgoRC09MSk+PTApe3A9bVtEXTtkPW9bcF07aWYoIWQpe2NvbnRpbnVlfWlmKHUoZCkpe2g9ZC5sZW5ndGg7d2hpbGUoKGgtPTEpPj0wKXtpZighZFtoXSl7Y29udGludWV9aWYoZyhmLG1bRF0pKXtpPW5ldyBDKGRbaF0sW3AsaF0sXCJQcm9wZXJ0eVwiLG51bGwpfWVsc2UgaWYoRihkW2hdKSl7aT1uZXcgQyhkW2hdLFtwLGhdLG51bGwsbnVsbCl9ZWxzZXtjb250aW51ZX1uLnB1c2goaSl9fWVsc2UgaWYoRihkKSl7bi5wdXNoKG5ldyBDKGQscCxudWxsLG51bGwpKX19fX19O0UucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24gaihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQsdSxuLGk7aWYoZS5yZWYucmVtb3ZlKCkpe3U9ZS5yZWYua2V5O2k9ZS5yZWYucGFyZW50O3Q9ci5sZW5ndGg7d2hpbGUodC0tKXtuPXJbdF07aWYobi5yZWYmJm4ucmVmLnBhcmVudD09PWkpe2lmKG4ucmVmLmtleTx1KXticmVha30tLW4ucmVmLmtleX19fX12YXIgcixpLG8sYyxwLEQsaCxtLGQsRSx5LEIsdjt0aGlzLl9faW5pdGlhbGl6ZShlLHQpO3k9e307cj10aGlzLl9fd29ya2xpc3Q7aT10aGlzLl9fbGVhdmVsaXN0O0I9e3Jvb3Q6ZX07RD1uZXcgQyhlLG51bGwsbnVsbCxuZXcgQShCLFwicm9vdFwiKSk7ci5wdXNoKEQpO2kucHVzaChEKTt3aGlsZShyLmxlbmd0aCl7RD1yLnBvcCgpO2lmKEQ9PT15KXtEPWkucG9wKCk7cD10aGlzLl9fZXhlY3V0ZSh0LmxlYXZlLEQpO2lmKHAhPT11bmRlZmluZWQmJnAhPT1hJiZwIT09bCYmcCE9PWYpe0QucmVmLnJlcGxhY2UocCl9aWYodGhpcy5fX3N0YXRlPT09Znx8cD09PWYpe24oRCl9aWYodGhpcy5fX3N0YXRlPT09YXx8cD09PWEpe3JldHVybiBCLnJvb3R9Y29udGludWV9cD10aGlzLl9fZXhlY3V0ZSh0LmVudGVyLEQpO2lmKHAhPT11bmRlZmluZWQmJnAhPT1hJiZwIT09bCYmcCE9PWYpe0QucmVmLnJlcGxhY2UocCk7RC5ub2RlPXB9aWYodGhpcy5fX3N0YXRlPT09Znx8cD09PWYpe24oRCk7RC5ub2RlPW51bGx9aWYodGhpcy5fX3N0YXRlPT09YXx8cD09PWEpe3JldHVybiBCLnJvb3R9bz1ELm5vZGU7aWYoIW8pe2NvbnRpbnVlfXIucHVzaCh5KTtpLnB1c2goRCk7aWYodGhpcy5fX3N0YXRlPT09bHx8cD09PWwpe2NvbnRpbnVlfWM9RC53cmFwfHxvLnR5cGU7ZD10aGlzLl9fa2V5c1tjXTtpZighZCl7aWYodGhpcy5fX2ZhbGxiYWNrKXtkPXMobyl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG5vZGUgdHlwZSBcIitjK1wiLlwiKX19aD1kLmxlbmd0aDt3aGlsZSgoaC09MSk+PTApe3Y9ZFtoXTtFPW9bdl07aWYoIUUpe2NvbnRpbnVlfWlmKHUoRSkpe209RS5sZW5ndGg7d2hpbGUoKG0tPTEpPj0wKXtpZighRVttXSl7Y29udGludWV9aWYoZyhjLGRbaF0pKXtEPW5ldyBDKEVbbV0sW3YsbV0sXCJQcm9wZXJ0eVwiLG5ldyBBKEUsbSkpfWVsc2UgaWYoRihFW21dKSl7RD1uZXcgQyhFW21dLFt2LG1dLG51bGwsbmV3IEEoRSxtKSl9ZWxzZXtjb250aW51ZX1yLnB1c2goRCl9fWVsc2UgaWYoRihFKSl7ci5wdXNoKG5ldyBDKEUsdixudWxsLG5ldyBBKG8sdikpKX19fXJldHVybiBCLnJvb3R9O2Z1bmN0aW9uIHkoZSx0KXt2YXIgdT1uZXcgRTtyZXR1cm4gdS50cmF2ZXJzZShlLHQpfWZ1bmN0aW9uIEIoZSx0KXt2YXIgdT1uZXcgRTtyZXR1cm4gdS5yZXBsYWNlKGUsdCl9ZnVuY3Rpb24gdihlLHQpe3ZhciB1O3U9aCh0LGZ1bmN0aW9uIG4odCl7cmV0dXJuIHQucmFuZ2VbMF0+ZS5yYW5nZVswXX0pO2UuZXh0ZW5kZWRSYW5nZT1bZS5yYW5nZVswXSxlLnJhbmdlWzFdXTtpZih1IT09dC5sZW5ndGgpe2UuZXh0ZW5kZWRSYW5nZVsxXT10W3VdLnJhbmdlWzBdfXUtPTE7aWYodT49MCl7ZS5leHRlbmRlZFJhbmdlWzBdPXRbdV0ucmFuZ2VbMV19cmV0dXJuIGV9ZnVuY3Rpb24gYihlLHQsdSl7dmFyIHI9W10saSxvLHMsYTtpZighZS5yYW5nZSl7dGhyb3cgbmV3IEVycm9yKFwiYXR0YWNoQ29tbWVudHMgbmVlZHMgcmFuZ2UgaW5mb3JtYXRpb25cIil9aWYoIXUubGVuZ3RoKXtpZih0Lmxlbmd0aCl7Zm9yKHM9MCxvPXQubGVuZ3RoO3M8bztzKz0xKXtpPXAodFtzXSk7aS5leHRlbmRlZFJhbmdlPVswLGUucmFuZ2VbMF1dO3IucHVzaChpKX1lLmxlYWRpbmdDb21tZW50cz1yfXJldHVybiBlfWZvcihzPTAsbz10Lmxlbmd0aDtzPG87cys9MSl7ci5wdXNoKHYocCh0W3NdKSx1KSl9YT0wO3koZSx7ZW50ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7d2hpbGUoYTxyLmxlbmd0aCl7dD1yW2FdO2lmKHQuZXh0ZW5kZWRSYW5nZVsxXT5lLnJhbmdlWzBdKXticmVha31pZih0LmV4dGVuZGVkUmFuZ2VbMV09PT1lLnJhbmdlWzBdKXtpZighZS5sZWFkaW5nQ29tbWVudHMpe2UubGVhZGluZ0NvbW1lbnRzPVtdfWUubGVhZGluZ0NvbW1lbnRzLnB1c2godCk7XG5yLnNwbGljZShhLDEpfWVsc2V7YSs9MX19aWYoYT09PXIubGVuZ3RoKXtyZXR1cm4gbi5CcmVha31pZihyW2FdLmV4dGVuZGVkUmFuZ2VbMF0+ZS5yYW5nZVsxXSl7cmV0dXJuIG4uU2tpcH19fSk7YT0wO3koZSx7bGVhdmU6ZnVuY3Rpb24oZSl7dmFyIHQ7d2hpbGUoYTxyLmxlbmd0aCl7dD1yW2FdO2lmKGUucmFuZ2VbMV08dC5leHRlbmRlZFJhbmdlWzBdKXticmVha31pZihlLnJhbmdlWzFdPT09dC5leHRlbmRlZFJhbmdlWzBdKXtpZighZS50cmFpbGluZ0NvbW1lbnRzKXtlLnRyYWlsaW5nQ29tbWVudHM9W119ZS50cmFpbGluZ0NvbW1lbnRzLnB1c2godCk7ci5zcGxpY2UoYSwxKX1lbHNle2ErPTF9fWlmKGE9PT1yLmxlbmd0aCl7cmV0dXJuIG4uQnJlYWt9aWYoclthXS5leHRlbmRlZFJhbmdlWzBdPmUucmFuZ2VbMV0pe3JldHVybiBuLlNraXB9fX0pO3JldHVybiBlfWUudmVyc2lvbj1cIjEuOC4xLWRldlwiO2UuU3ludGF4PXQ7ZS50cmF2ZXJzZT15O2UucmVwbGFjZT1CO2UuYXR0YWNoQ29tbWVudHM9YjtlLlZpc2l0b3JLZXlzPWk7ZS5WaXNpdG9yT3B0aW9uPW47ZS5Db250cm9sbGVyPUU7ZS5jbG9uZUVudmlyb25tZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHIoe30pfTtyZXR1cm4gZX0pfSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bMzRdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiLi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtY29uc3VtZXJcIjo1NixcIi4vc291cmNlLW1hcC9zb3VyY2UtbWFwLWdlbmVyYXRvclwiOjU3LFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1ub2RlXCI6NTgsXCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwLmpzXCI6MzR9XSw1MTpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVszNV1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIuL3V0aWxcIjo1OSxcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvYXJyYXktc2V0LmpzXCI6MzUsYW1kZWZpbmU6NjB9XSw1MjpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVszNl1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIuL2Jhc2U2NFwiOjUzLFwiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9iYXNlNjQtdmxxLmpzXCI6MzYsYW1kZWZpbmU6NjB9XSw1MzpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVszN11bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL2Jhc2U2NC5qc1wiOjM3LGFtZGVmaW5lOjYwfV0sNTQ6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bMzldWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9iaW5hcnktc2VhcmNoLmpzXCI6MzksYW1kZWZpbmU6NjB9XSw1NTpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVs0MV1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIuL3V0aWxcIjo1OSxcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvbWFwcGluZy1saXN0LmpzXCI6NDEsYW1kZWZpbmU6NjB9XSw1NjpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi91dGlsXCIpO3ZhciByPWUoXCIuL2JpbmFyeS1zZWFyY2hcIik7dmFyIGk9ZShcIi4vYXJyYXktc2V0XCIpLkFycmF5U2V0O3ZhciBvPWUoXCIuL2Jhc2U2NC12bHFcIik7ZnVuY3Rpb24gcyhlKXt2YXIgdD1lO2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7dD1KU09OLnBhcnNlKGUucmVwbGFjZSgvXlxcKVxcXVxcfScvLFwiXCIpKX12YXIgdT1uLmdldEFyZyh0LFwidmVyc2lvblwiKTt2YXIgcj1uLmdldEFyZyh0LFwic291cmNlc1wiKTt2YXIgbz1uLmdldEFyZyh0LFwibmFtZXNcIixbXSk7dmFyIHM9bi5nZXRBcmcodCxcInNvdXJjZVJvb3RcIixudWxsKTt2YXIgYT1uLmdldEFyZyh0LFwic291cmNlc0NvbnRlbnRcIixudWxsKTt2YXIgbD1uLmdldEFyZyh0LFwibWFwcGluZ3NcIik7dmFyIGY9bi5nZXRBcmcodCxcImZpbGVcIixudWxsKTtpZih1IT10aGlzLl92ZXJzaW9uKXt0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCB2ZXJzaW9uOiBcIit1KX1yPXIubWFwKG4ubm9ybWFsaXplKTt0aGlzLl9uYW1lcz1pLmZyb21BcnJheShvLHRydWUpO3RoaXMuX3NvdXJjZXM9aS5mcm9tQXJyYXkocix0cnVlKTt0aGlzLnNvdXJjZVJvb3Q9czt0aGlzLnNvdXJjZXNDb250ZW50PWE7dGhpcy5fbWFwcGluZ3M9bDt0aGlzLmZpbGU9Zn1zLmZyb21Tb3VyY2VNYXA9ZnVuY3Rpb24gYShlKXt2YXIgdD1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlKTt0Ll9uYW1lcz1pLmZyb21BcnJheShlLl9uYW1lcy50b0FycmF5KCksdHJ1ZSk7dC5fc291cmNlcz1pLmZyb21BcnJheShlLl9zb3VyY2VzLnRvQXJyYXkoKSx0cnVlKTt0LnNvdXJjZVJvb3Q9ZS5fc291cmNlUm9vdDt0LnNvdXJjZXNDb250ZW50PWUuX2dlbmVyYXRlU291cmNlc0NvbnRlbnQodC5fc291cmNlcy50b0FycmF5KCksdC5zb3VyY2VSb290KTt0LmZpbGU9ZS5fZmlsZTt0Ll9fZ2VuZXJhdGVkTWFwcGluZ3M9ZS5fbWFwcGluZ3MudG9BcnJheSgpLnNsaWNlKCk7dC5fX29yaWdpbmFsTWFwcGluZ3M9ZS5fbWFwcGluZ3MudG9BcnJheSgpLnNsaWNlKCkuc29ydChuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtyZXR1cm4gdH07cy5wcm90b3R5cGUuX3ZlcnNpb249MztPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJzb3VyY2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VzLnRvQXJyYXkoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc291cmNlUm9vdCE9bnVsbD9uLmpvaW4odGhpcy5zb3VyY2VSb290LGUpOmV9LHRoaXMpfX0pO3MucHJvdG90eXBlLl9fZ2VuZXJhdGVkTWFwcGluZ3M9bnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJfZ2VuZXJhdGVkTWFwcGluZ3NcIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncyl7dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzPVtdO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzPVtdO3RoaXMuX3BhcnNlTWFwcGluZ3ModGhpcy5fbWFwcGluZ3MsdGhpcy5zb3VyY2VSb290KX1yZXR1cm4gdGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzfX0pO3MucHJvdG90eXBlLl9fb3JpZ2luYWxNYXBwaW5ncz1udWxsO09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcIl9vcmlnaW5hbE1hcHBpbmdzXCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncyl7dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzPVtdO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzPVtdO3RoaXMuX3BhcnNlTWFwcGluZ3ModGhpcy5fbWFwcGluZ3MsdGhpcy5zb3VyY2VSb290KX1yZXR1cm4gdGhpcy5fX29yaWdpbmFsTWFwcGluZ3N9fSk7cy5wcm90b3R5cGUuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yPWZ1bmN0aW9uIGwoZSl7dmFyIHQ9ZS5jaGFyQXQoMCk7cmV0dXJuIHQ9PT1cIjtcInx8dD09PVwiLFwifTtzLnByb3RvdHlwZS5fcGFyc2VNYXBwaW5ncz1mdW5jdGlvbiBmKGUsdCl7dmFyIHU9MTt2YXIgcj0wO3ZhciBpPTA7dmFyIHM9MDt2YXIgYT0wO3ZhciBsPTA7dmFyIGY9ZTt2YXIgYz17fTt2YXIgcDt3aGlsZShmLmxlbmd0aD4wKXtpZihmLmNoYXJBdCgwKT09PVwiO1wiKXt1Kys7Zj1mLnNsaWNlKDEpO3I9MH1lbHNlIGlmKGYuY2hhckF0KDApPT09XCIsXCIpe2Y9Zi5zbGljZSgxKX1lbHNle3A9e307cC5nZW5lcmF0ZWRMaW5lPXU7by5kZWNvZGUoZixjKTtwLmdlbmVyYXRlZENvbHVtbj1yK2MudmFsdWU7cj1wLmdlbmVyYXRlZENvbHVtbjtmPWMucmVzdDtpZihmLmxlbmd0aD4wJiYhdGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe28uZGVjb2RlKGYsYyk7cC5zb3VyY2U9dGhpcy5fc291cmNlcy5hdChhK2MudmFsdWUpO2ErPWMudmFsdWU7Zj1jLnJlc3Q7aWYoZi5sZW5ndGg9PT0wfHx0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7dGhyb3cgbmV3IEVycm9yKFwiRm91bmQgYSBzb3VyY2UsIGJ1dCBubyBsaW5lIGFuZCBjb2x1bW5cIil9by5kZWNvZGUoZixjKTtwLm9yaWdpbmFsTGluZT1pK2MudmFsdWU7aT1wLm9yaWdpbmFsTGluZTtwLm9yaWdpbmFsTGluZSs9MTtmPWMucmVzdDtpZihmLmxlbmd0aD09PTB8fHRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXt0aHJvdyBuZXcgRXJyb3IoXCJGb3VuZCBhIHNvdXJjZSBhbmQgbGluZSwgYnV0IG5vIGNvbHVtblwiKX1vLmRlY29kZShmLGMpO3Aub3JpZ2luYWxDb2x1bW49cytjLnZhbHVlO3M9cC5vcmlnaW5hbENvbHVtbjtmPWMucmVzdDtpZihmLmxlbmd0aD4wJiYhdGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe28uZGVjb2RlKGYsYyk7cC5uYW1lPXRoaXMuX25hbWVzLmF0KGwrYy52YWx1ZSk7bCs9Yy52YWx1ZTtmPWMucmVzdH19dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzLnB1c2gocCk7aWYodHlwZW9mIHAub3JpZ2luYWxMaW5lPT09XCJudW1iZXJcIil7dGhpcy5fX29yaWdpbmFsTWFwcGluZ3MucHVzaChwKX19fXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncy5zb3J0KG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncy5zb3J0KG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpfTtzLnByb3RvdHlwZS5fZmluZE1hcHBpbmc9ZnVuY3Rpb24gYyhlLHQsdSxuLGkpe2lmKGVbdV08PTApe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJMaW5lIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDEsIGdvdCBcIitlW3VdKX1pZihlW25dPDApe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDb2x1bW4gbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMCwgZ290IFwiK2Vbbl0pfXJldHVybiByLnNlYXJjaChlLHQsaSl9O3MucHJvdG90eXBlLmNvbXB1dGVDb2x1bW5TcGFucz1mdW5jdGlvbiBwKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncy5sZW5ndGg7KytlKXt2YXIgdD10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1tlXTtpZihlKzE8dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3MubGVuZ3RoKXt2YXIgdT10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1tlKzFdO2lmKHQuZ2VuZXJhdGVkTGluZT09PXUuZ2VuZXJhdGVkTGluZSl7dC5sYXN0R2VuZXJhdGVkQ29sdW1uPXUuZ2VuZXJhdGVkQ29sdW1uLTE7Y29udGludWV9fXQubGFzdEdlbmVyYXRlZENvbHVtbj1JbmZpbml0eX19O3MucHJvdG90eXBlLm9yaWdpbmFsUG9zaXRpb25Gb3I9ZnVuY3Rpb24gRChlKXt2YXIgdD17Z2VuZXJhdGVkTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxnZW5lcmF0ZWRDb2x1bW46bi5nZXRBcmcoZSxcImNvbHVtblwiKX07dmFyIHU9dGhpcy5fZmluZE1hcHBpbmcodCx0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncyxcImdlbmVyYXRlZExpbmVcIixcImdlbmVyYXRlZENvbHVtblwiLG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKTtpZih1Pj0wKXt2YXIgcj10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1t1XTtpZihyLmdlbmVyYXRlZExpbmU9PT10LmdlbmVyYXRlZExpbmUpe3ZhciBpPW4uZ2V0QXJnKHIsXCJzb3VyY2VcIixudWxsKTtpZihpIT1udWxsJiZ0aGlzLnNvdXJjZVJvb3QhPW51bGwpe2k9bi5qb2luKHRoaXMuc291cmNlUm9vdCxpKX1yZXR1cm57c291cmNlOmksbGluZTpuLmdldEFyZyhyLFwib3JpZ2luYWxMaW5lXCIsbnVsbCksY29sdW1uOm4uZ2V0QXJnKHIsXCJvcmlnaW5hbENvbHVtblwiLG51bGwpLG5hbWU6bi5nZXRBcmcocixcIm5hbWVcIixudWxsKX19fXJldHVybntzb3VyY2U6bnVsbCxsaW5lOm51bGwsY29sdW1uOm51bGwsbmFtZTpudWxsfX07cy5wcm90b3R5cGUuc291cmNlQ29udGVudEZvcj1mdW5jdGlvbiBoKGUpe2lmKCF0aGlzLnNvdXJjZXNDb250ZW50KXtyZXR1cm4gbnVsbH1pZih0aGlzLnNvdXJjZVJvb3QhPW51bGwpe2U9bi5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsZSl9aWYodGhpcy5fc291cmNlcy5oYXMoZSkpe3JldHVybiB0aGlzLnNvdXJjZXNDb250ZW50W3RoaXMuX3NvdXJjZXMuaW5kZXhPZihlKV19dmFyIHQ7aWYodGhpcy5zb3VyY2VSb290IT1udWxsJiYodD1uLnVybFBhcnNlKHRoaXMuc291cmNlUm9vdCkpKXt2YXIgdT1lLnJlcGxhY2UoL15maWxlOlxcL1xcLy8sXCJcIik7aWYodC5zY2hlbWU9PVwiZmlsZVwiJiZ0aGlzLl9zb3VyY2VzLmhhcyh1KSl7cmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKHUpXX1pZigoIXQucGF0aHx8dC5wYXRoPT1cIi9cIikmJnRoaXMuX3NvdXJjZXMuaGFzKFwiL1wiK2UpKXtyZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFt0aGlzLl9zb3VyY2VzLmluZGV4T2YoXCIvXCIrZSldfX10aHJvdyBuZXcgRXJyb3IoJ1wiJytlKydcIiBpcyBub3QgaW4gdGhlIFNvdXJjZU1hcC4nKX07cy5wcm90b3R5cGUuZ2VuZXJhdGVkUG9zaXRpb25Gb3I9ZnVuY3Rpb24gbShlKXt2YXIgdD17c291cmNlOm4uZ2V0QXJnKGUsXCJzb3VyY2VcIiksb3JpZ2luYWxMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLG9yaWdpbmFsQ29sdW1uOm4uZ2V0QXJnKGUsXCJjb2x1bW5cIil9O2lmKHRoaXMuc291cmNlUm9vdCE9bnVsbCl7dC5zb3VyY2U9bi5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsdC5zb3VyY2UpfXZhciB1PXRoaXMuX2ZpbmRNYXBwaW5nKHQsdGhpcy5fb3JpZ2luYWxNYXBwaW5ncyxcIm9yaWdpbmFsTGluZVwiLFwib3JpZ2luYWxDb2x1bW5cIixuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtpZih1Pj0wKXt2YXIgcj10aGlzLl9vcmlnaW5hbE1hcHBpbmdzW3VdO3JldHVybntsaW5lOm4uZ2V0QXJnKHIsXCJnZW5lcmF0ZWRMaW5lXCIsbnVsbCksY29sdW1uOm4uZ2V0QXJnKHIsXCJnZW5lcmF0ZWRDb2x1bW5cIixudWxsKSxsYXN0Q29sdW1uOm4uZ2V0QXJnKHIsXCJsYXN0R2VuZXJhdGVkQ29sdW1uXCIsbnVsbCl9fXJldHVybntsaW5lOm51bGwsY29sdW1uOm51bGwsbGFzdENvbHVtbjpudWxsfX07cy5wcm90b3R5cGUuYWxsR2VuZXJhdGVkUG9zaXRpb25zRm9yPWZ1bmN0aW9uIGQoZSl7dmFyIHQ9e3NvdXJjZTpuLmdldEFyZyhlLFwic291cmNlXCIpLG9yaWdpbmFsTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxvcmlnaW5hbENvbHVtbjpJbmZpbml0eX07aWYodGhpcy5zb3VyY2VSb290IT1udWxsKXt0LnNvdXJjZT1uLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCx0LnNvdXJjZSl9dmFyIHU9W107dmFyIHI9dGhpcy5fZmluZE1hcHBpbmcodCx0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFwib3JpZ2luYWxMaW5lXCIsXCJvcmlnaW5hbENvbHVtblwiLG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO2lmKHI+PTApe3ZhciBpPXRoaXMuX29yaWdpbmFsTWFwcGluZ3Nbcl07d2hpbGUoaSYmaS5vcmlnaW5hbExpbmU9PT10Lm9yaWdpbmFsTGluZSl7dS5wdXNoKHtsaW5lOm4uZ2V0QXJnKGksXCJnZW5lcmF0ZWRMaW5lXCIsbnVsbCksY29sdW1uOm4uZ2V0QXJnKGksXCJnZW5lcmF0ZWRDb2x1bW5cIixudWxsKSxsYXN0Q29sdW1uOm4uZ2V0QXJnKGksXCJsYXN0R2VuZXJhdGVkQ29sdW1uXCIsbnVsbCl9KTtpPXRoaXMuX29yaWdpbmFsTWFwcGluZ3NbLS1yXX19cmV0dXJuIHUucmV2ZXJzZSgpfTtzLkdFTkVSQVRFRF9PUkRFUj0xO3MuT1JJR0lOQUxfT1JERVI9MjtzLnByb3RvdHlwZS5lYWNoTWFwcGluZz1mdW5jdGlvbiBBKGUsdCx1KXt2YXIgcj10fHxudWxsO3ZhciBpPXV8fHMuR0VORVJBVEVEX09SREVSO3ZhciBvO3N3aXRjaChpKXtjYXNlIHMuR0VORVJBVEVEX09SREVSOm89dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3M7YnJlYWs7Y2FzZSBzLk9SSUdJTkFMX09SREVSOm89dGhpcy5fb3JpZ2luYWxNYXBwaW5nczticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gb3JkZXIgb2YgaXRlcmF0aW9uLlwiKX12YXIgYT10aGlzLnNvdXJjZVJvb3Q7by5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zb3VyY2U7aWYodCE9bnVsbCYmYSE9bnVsbCl7dD1uLmpvaW4oYSx0KX1yZXR1cm57c291cmNlOnQsZ2VuZXJhdGVkTGluZTplLmdlbmVyYXRlZExpbmUsZ2VuZXJhdGVkQ29sdW1uOmUuZ2VuZXJhdGVkQ29sdW1uLG9yaWdpbmFsTGluZTplLm9yaWdpbmFsTGluZSxvcmlnaW5hbENvbHVtbjplLm9yaWdpbmFsQ29sdW1uLG5hbWU6ZS5uYW1lfX0pLmZvckVhY2goZSxyKX07dC5Tb3VyY2VNYXBDb25zdW1lcj1zfSl9LHtcIi4vYXJyYXktc2V0XCI6NTEsXCIuL2Jhc2U2NC12bHFcIjo1MixcIi4vYmluYXJ5LXNlYXJjaFwiOjU0LFwiLi91dGlsXCI6NTksYW1kZWZpbmU6NjB9XSw1NzpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVs0M11bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIuL2FycmF5LXNldFwiOjUxLFwiLi9iYXNlNjQtdmxxXCI6NTIsXCIuL21hcHBpbmctbGlzdFwiOjU1LFwiLi91dGlsXCI6NTksXCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtZ2VuZXJhdG9yLmpzXCI6NDMsYW1kZWZpbmU6NjB9XSw1ODpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVs0NF1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIuL3NvdXJjZS1tYXAtZ2VuZXJhdG9yXCI6NTcsXCIuL3V0aWxcIjo1OSxcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvc291cmNlLW5vZGUuanNcIjo0NCxhbWRlZmluZTo2MH1dLDU5OltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzQ1XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvdXRpbC5qc1wiOjQ1LGFtZGVmaW5lOjYwfV0sNjA6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24odSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9e30sbz17fSxzPWZhbHNlLGE9ZShcInBhdGhcIiksbCxmO2Z1bmN0aW9uIGMoZSl7dmFyIHQsdTtmb3IodD0wO2VbdF07dCs9MSl7dT1lW3RdO2lmKHU9PT1cIi5cIil7ZS5zcGxpY2UodCwxKTt0LT0xfWVsc2UgaWYodT09PVwiLi5cIil7aWYodD09PTEmJihlWzJdPT09XCIuLlwifHxlWzBdPT09XCIuLlwiKSl7YnJlYWt9ZWxzZSBpZih0PjApe2Uuc3BsaWNlKHQtMSwyKTt0LT0yfX19fWZ1bmN0aW9uIHAoZSx0KXt2YXIgdTtpZihlJiZlLmNoYXJBdCgwKT09PVwiLlwiKXtpZih0KXt1PXQuc3BsaXQoXCIvXCIpO3U9dS5zbGljZSgwLHUubGVuZ3RoLTEpO3U9dS5jb25jYXQoZS5zcGxpdChcIi9cIikpO2ModSk7ZT11LmpvaW4oXCIvXCIpfX1yZXR1cm4gZX1mdW5jdGlvbiBEKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gcCh0LGUpfX1mdW5jdGlvbiBoKGUpe2Z1bmN0aW9uIHQodCl7b1tlXT10fXQuZnJvbVRleHQ9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJhbWRlZmluZSBkb2VzIG5vdCBpbXBsZW1lbnQgbG9hZC5mcm9tVGV4dFwiKX07cmV0dXJuIHR9bD1mdW5jdGlvbihlLHQsbixyKXtmdW5jdGlvbiBpKGksbyl7aWYodHlwZW9mIGk9PT1cInN0cmluZ1wiKXtyZXR1cm4gZihlLHQsbixpLHIpfWVsc2V7aT1pLm1hcChmdW5jdGlvbih1KXtyZXR1cm4gZihlLHQsbix1LHIpfSk7aWYobyl7dS5uZXh0VGljayhmdW5jdGlvbigpe28uYXBwbHkobnVsbCxpKX0pfX19aS50b1VybD1mdW5jdGlvbihlKXtpZihlLmluZGV4T2YoXCIuXCIpPT09MCl7cmV0dXJuIHAoZSxhLmRpcm5hbWUobi5maWxlbmFtZSkpfWVsc2V7cmV0dXJuIGV9fTtyZXR1cm4gaX07cj1yfHxmdW5jdGlvbiBBKCl7cmV0dXJuIHQucmVxdWlyZS5hcHBseSh0LGFyZ3VtZW50cyl9O2Z1bmN0aW9uIG0oZSx1LGkpe3ZhciBhLGYsYyxwO2lmKGUpe2Y9b1tlXT17fTtjPXtpZDplLHVyaTpuLGV4cG9ydHM6Zn07YT1sKHIsZixjLGUpfWVsc2V7aWYocyl7dGhyb3cgbmV3IEVycm9yKFwiYW1kZWZpbmUgd2l0aCBubyBtb2R1bGUgSUQgY2Fubm90IGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBwZXIgZmlsZS5cIil9cz10cnVlO2Y9dC5leHBvcnRzO2M9dDthPWwocixmLGMsdC5pZCl9aWYodSl7dT11Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0pfWlmKHR5cGVvZiBpPT09XCJmdW5jdGlvblwiKXtwPWkuYXBwbHkoYy5leHBvcnRzLHUpfWVsc2V7cD1pfWlmKHAhPT11bmRlZmluZWQpe2MuZXhwb3J0cz1wO2lmKGUpe29bZV09Yy5leHBvcnRzfX19Zj1mdW5jdGlvbihlLHQsdSxuLHIpe3ZhciBzPW4uaW5kZXhPZihcIiFcIiksYT1uLGMsZDtpZihzPT09LTEpe249cChuLHIpO2lmKG49PT1cInJlcXVpcmVcIil7cmV0dXJuIGwoZSx0LHUscil9ZWxzZSBpZihuPT09XCJleHBvcnRzXCIpe3JldHVybiB0fWVsc2UgaWYobj09PVwibW9kdWxlXCIpe3JldHVybiB1fWVsc2UgaWYoby5oYXNPd25Qcm9wZXJ0eShuKSl7cmV0dXJuIG9bbl19ZWxzZSBpZihpW25dKXttLmFwcGx5KG51bGwsaVtuXSk7cmV0dXJuIG9bbl19ZWxzZXtpZihlKXtyZXR1cm4gZShhKX1lbHNle3Rocm93IG5ldyBFcnJvcihcIk5vIG1vZHVsZSB3aXRoIElEOiBcIituKX19fWVsc2V7Yz1uLnN1YnN0cmluZygwLHMpO249bi5zdWJzdHJpbmcocysxLG4ubGVuZ3RoKTtkPWYoZSx0LHUsYyxyKTtpZihkLm5vcm1hbGl6ZSl7bj1kLm5vcm1hbGl6ZShuLEQocikpfWVsc2V7bj1wKG4scil9aWYob1tuXSl7cmV0dXJuIG9bbl19ZWxzZXtkLmxvYWQobixsKGUsdCx1LHIpLGgobikse30pO3JldHVybiBvW25dfX19O2Z1bmN0aW9uIGQoZSx0LHUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe3U9dDt0PWU7ZT11bmRlZmluZWR9ZWxzZSBpZih0eXBlb2YgZSE9PVwic3RyaW5nXCIpe3U9ZTtlPXQ9dW5kZWZpbmVkfWlmKHQmJiFBcnJheS5pc0FycmF5KHQpKXt1PXQ7dD11bmRlZmluZWR9aWYoIXQpe3Q9W1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdfWlmKGUpe2lbZV09W2UsdCx1XX1lbHNle20oZSx0LHUpfX1kLnJlcXVpcmU9ZnVuY3Rpb24oZSl7aWYob1tlXSl7cmV0dXJuIG9bZV19aWYoaVtlXSl7bS5hcHBseShudWxsLGlbZV0pO3JldHVybiBvW2VdfX07ZC5hbWQ9e307cmV0dXJuIGR9dC5leHBvcnRzPXJ9KS5jYWxsKHRoaXMsZShcIl9wcm9jZXNzXCIpLFwiL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL25vZGVfbW9kdWxlcy9hbWRlZmluZS9hbWRlZmluZS5qc1wiKX0se19wcm9jZXNzOjI2LHBhdGg6MjV9XSw2MTpbZnVuY3Rpb24oZSx0LHUpe3QuZXhwb3J0cz17bmFtZTpcImpzMmNvZmZlZVwiLHZlcnNpb246XCIyLjIuMFwiLGRlc2NyaXB0aW9uOlwiSmF2YVNjcmlwdCB0byBDb2ZmZWVTY3JpcHQgY29tcGlsZXJcIixob21lcGFnZTpcImh0dHA6Ly9qczIuY29mZmVlXCIsbWFpbjpcImRpc3QvanMyY29mZmVlLmpzXCIsa2V5d29yZHM6W1wiamF2YXNjcmlwdFwiLFwiY29mZmVlc2NyaXB0XCIsXCJsYW5ndWFnZVwiLFwiY29tcGlsZXJcIl0sc2NyaXB0czp7dGVzdDpcIm1vY2hhXCIsYXV0b3Rlc3Q6XCJtb2NoYSAtUiBtaW4gLWIgLS13YXRjaFwiLHByZXB1Ymxpc2g6XCJtb2NoYSA+L2Rldi9udWxsICYmIG1ha2UgLUIgZGlzdFwifSxhdXRob3I6XCJSaWNvIFN0YS4gQ3J1eiA8aGlAcmljb3N0YWNydXouY29tPlwiLGxpY2Vuc2U6XCJNSVRcIixidWdzOnt1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vanMyY29mZmVlL2pzMmNvZmZlZS9pc3N1ZXNcIn0scmVwb3NpdG9yeTp7dHlwZTpcImdpdFwiLHVybDpcImh0dHBzOi8vZ2l0aHViLmNvbS9qczJjb2ZmZWUvanMyY29mZmVlLmdpdFwifSxicm93c2VyOlwianMyY29mZmVlLmNvZmZlZVwiLGJpbjp7anMyY29mZmVlOlwiLi9iaW4vanMyY29mZmVlXCJ9LGRlcGVuZGVuY2llczp7ZXNjb2RlZ2VuOlwiXjEuNi4wXCIsZXNwcmltYTpcIl4yLjUuMFwiLGVzdHJhdmVyc2U6XCJeNC4xLjFcIixtaW5pbWlzdDpcIl4xLjEuMFwiLFwicmVhZC1pbnB1dFwiOlwiXjAuMy4xXCIsXCJzb3VyY2UtbWFwXCI6XCJeMC41LjJcIn0sZGV2RGVwZW5kZW5jaWVzOnticm93c2VyaWZ5OlwiMTMuMC4wXCIsY2hhaTpcIl4zLjQuMFwiLFwiY29mZmVlLXNjcmlwdFwiOlwiXjEuOC4wXCIsY29mZmVlaWZ5OlwiXjIuMC4xXCIsY29mZmVlbGludDpcIl4xLjYuMFwiLGdsb2I6XCJeNy4wLjBcIixcImpzLXlhbWxcIjpcIl4zLjIuMVwiLG1vY2hhOlwiXjIuMS4wXCIsXCJtb2NoYS1jbGVhblwiOlwiXjEuMC4wXCIsXCJ1Z2xpZnktanNcIjpcIl4yLjQuMTZcIix1bmRlcnNjb3JlOlwiXjEuNy4wXCJ9fX0se31dfSx7fSxbMV0pKDEpfSk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gcmVzb2x2ZXMgLiBhbmQgLi4gZWxlbWVudHMgaW4gYSBwYXRoIGFycmF5IHdpdGggZGlyZWN0b3J5IG5hbWVzIHRoZXJlXG4vLyBtdXN0IGJlIG5vIHNsYXNoZXMsIGVtcHR5IGVsZW1lbnRzLCBvciBkZXZpY2UgbmFtZXMgKGM6XFwpIGluIHRoZSBhcnJheVxuLy8gKHNvIGFsc28gbm8gbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcyAtIGl0IGRvZXMgbm90IGRpc3Rpbmd1aXNoXG4vLyByZWxhdGl2ZSBhbmQgYWJzb2x1dGUgcGF0aHMpXG5mdW5jdGlvbiBub3JtYWxpemVBcnJheShwYXJ0cywgYWxsb3dBYm92ZVJvb3QpIHtcbiAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDBcbiAgdmFyIHVwID0gMDtcbiAgZm9yICh2YXIgaSA9IHBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIGxhc3QgPSBwYXJ0c1tpXTtcbiAgICBpZiAobGFzdCA9PT0gJy4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoYWxsb3dBYm92ZVJvb3QpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHBhcnRzLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG4vLyBTcGxpdCBhIGZpbGVuYW1lIGludG8gW3Jvb3QsIGRpciwgYmFzZW5hbWUsIGV4dF0sIHVuaXggdmVyc2lvblxuLy8gJ3Jvb3QnIGlzIGp1c3QgYSBzbGFzaCwgb3Igbm90aGluZy5cbnZhciBzcGxpdFBhdGhSZSA9XG4gICAgL14oXFwvP3wpKFtcXHNcXFNdKj8pKCg/OlxcLnsxLDJ9fFteXFwvXSs/fCkoXFwuW14uXFwvXSp8KSkoPzpbXFwvXSopJC87XG52YXIgc3BsaXRQYXRoID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aFJlLmV4ZWMoZmlsZW5hbWUpLnNsaWNlKDEpO1xufTtcblxuLy8gcGF0aC5yZXNvbHZlKFtmcm9tIC4uLl0sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZXNvbHZlID0gZnVuY3Rpb24oKSB7XG4gIHZhciByZXNvbHZlZFBhdGggPSAnJyxcbiAgICAgIHJlc29sdmVkQWJzb2x1dGUgPSBmYWxzZTtcblxuICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gLTEgJiYgIXJlc29sdmVkQWJzb2x1dGU7IGktLSkge1xuICAgIHZhciBwYXRoID0gKGkgPj0gMCkgPyBhcmd1bWVudHNbaV0gOiBwcm9jZXNzLmN3ZCgpO1xuXG4gICAgLy8gU2tpcCBlbXB0eSBhbmQgaW52YWxpZCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9IGVsc2UgaWYgKCFwYXRoKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXNvbHZlZFBhdGggPSBwYXRoICsgJy8nICsgcmVzb2x2ZWRQYXRoO1xuICAgIHJlc29sdmVkQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICB9XG5cbiAgLy8gQXQgdGhpcyBwb2ludCB0aGUgcGF0aCBzaG91bGQgYmUgcmVzb2x2ZWQgdG8gYSBmdWxsIGFic29sdXRlIHBhdGgsIGJ1dFxuICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscylcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcmVzb2x2ZWRQYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHJlc29sdmVkUGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFyZXNvbHZlZEFic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgcmV0dXJuICgocmVzb2x2ZWRBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHJlc29sdmVkUGF0aCkgfHwgJy4nO1xufTtcblxuLy8gcGF0aC5ub3JtYWxpemUocGF0aClcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMubm9ybWFsaXplID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgaXNBYnNvbHV0ZSA9IGV4cG9ydHMuaXNBYnNvbHV0ZShwYXRoKSxcbiAgICAgIHRyYWlsaW5nU2xhc2ggPSBzdWJzdHIocGF0aCwgLTEpID09PSAnLyc7XG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFpc0Fic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgaWYgKCFwYXRoICYmICFpc0Fic29sdXRlKSB7XG4gICAgcGF0aCA9ICcuJztcbiAgfVxuICBpZiAocGF0aCAmJiB0cmFpbGluZ1NsYXNoKSB7XG4gICAgcGF0aCArPSAnLyc7XG4gIH1cblxuICByZXR1cm4gKGlzQWJzb2x1dGUgPyAnLycgOiAnJykgKyBwYXRoO1xufTtcblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5pc0Fic29sdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuam9pbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGF0aHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICByZXR1cm4gZXhwb3J0cy5ub3JtYWxpemUoZmlsdGVyKHBhdGhzLCBmdW5jdGlvbihwLCBpbmRleCkge1xuICAgIGlmICh0eXBlb2YgcCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLmpvaW4gbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9KS5qb2luKCcvJykpO1xufTtcblxuXG4vLyBwYXRoLnJlbGF0aXZlKGZyb20sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZWxhdGl2ZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gIGZyb20gPSBleHBvcnRzLnJlc29sdmUoZnJvbSkuc3Vic3RyKDEpO1xuICB0byA9IGV4cG9ydHMucmVzb2x2ZSh0bykuc3Vic3RyKDEpO1xuXG4gIGZ1bmN0aW9uIHRyaW0oYXJyKSB7XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICBmb3IgKDsgc3RhcnQgPCBhcnIubGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBmb3IgKDsgZW5kID49IDA7IGVuZC0tKSB7XG4gICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gYXJyLnNsaWNlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpO1xuICB9XG5cbiAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTtcbiAgdmFyIHRvUGFydHMgPSB0cmltKHRvLnNwbGl0KCcvJykpO1xuXG4gIHZhciBsZW5ndGggPSBNYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLCB0b1BhcnRzLmxlbmd0aCk7XG4gIHZhciBzYW1lUGFydHNMZW5ndGggPSBsZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZnJvbVBhcnRzW2ldICE9PSB0b1BhcnRzW2ldKSB7XG4gICAgICBzYW1lUGFydHNMZW5ndGggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dHB1dFBhcnRzID0gW107XG4gIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRQYXJ0cy5wdXNoKCcuLicpO1xuICB9XG5cbiAgb3V0cHV0UGFydHMgPSBvdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtcblxuICByZXR1cm4gb3V0cHV0UGFydHMuam9pbignLycpO1xufTtcblxuZXhwb3J0cy5zZXAgPSAnLyc7XG5leHBvcnRzLmRlbGltaXRlciA9ICc6JztcblxuZXhwb3J0cy5kaXJuYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgcmVzdWx0ID0gc3BsaXRQYXRoKHBhdGgpLFxuICAgICAgcm9vdCA9IHJlc3VsdFswXSxcbiAgICAgIGRpciA9IHJlc3VsdFsxXTtcblxuICBpZiAoIXJvb3QgJiYgIWRpcikge1xuICAgIC8vIE5vIGRpcm5hbWUgd2hhdHNvZXZlclxuICAgIHJldHVybiAnLic7XG4gIH1cblxuICBpZiAoZGlyKSB7XG4gICAgLy8gSXQgaGFzIGEgZGlybmFtZSwgc3RyaXAgdHJhaWxpbmcgc2xhc2hcbiAgICBkaXIgPSBkaXIuc3Vic3RyKDAsIGRpci5sZW5ndGggLSAxKTtcbiAgfVxuXG4gIHJldHVybiByb290ICsgZGlyO1xufTtcblxuXG5leHBvcnRzLmJhc2VuYW1lID0gZnVuY3Rpb24ocGF0aCwgZXh0KSB7XG4gIHZhciBmID0gc3BsaXRQYXRoKHBhdGgpWzJdO1xuICAvLyBUT0RPOiBtYWtlIHRoaXMgY29tcGFyaXNvbiBjYXNlLWluc2Vuc2l0aXZlIG9uIHdpbmRvd3M/XG4gIGlmIChleHQgJiYgZi5zdWJzdHIoLTEgKiBleHQubGVuZ3RoKSA9PT0gZXh0KSB7XG4gICAgZiA9IGYuc3Vic3RyKDAsIGYubGVuZ3RoIC0gZXh0Lmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIGY7XG59O1xuXG5cbmV4cG9ydHMuZXh0bmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aChwYXRoKVszXTtcbn07XG5cbmZ1bmN0aW9uIGZpbHRlciAoeHMsIGYpIHtcbiAgICBpZiAoeHMuZmlsdGVyKSByZXR1cm4geHMuZmlsdGVyKGYpO1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChmKHhzW2ldLCBpLCB4cykpIHJlcy5wdXNoKHhzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuLy8gU3RyaW5nLnByb3RvdHlwZS5zdWJzdHIgLSBuZWdhdGl2ZSBpbmRleCBkb24ndCB3b3JrIGluIElFOFxudmFyIHN1YnN0ciA9ICdhYicuc3Vic3RyKC0xKSA9PT0gJ2InXG4gICAgPyBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7IHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW4pIH1cbiAgICA6IGZ1bmN0aW9uIChzdHIsIHN0YXJ0LCBsZW4pIHtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSBzdHIubGVuZ3RoICsgc3RhcnQ7XG4gICAgICAgIHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW4pO1xuICAgIH1cbjtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcbihmdW5jdGlvbigpIHtcbiAgdmFyIFNwaW5lO1xuXG4gIFNwaW5lID0gdGhpcy5TcGluZSB8fCByZXF1aXJlKCdzcGluZScpO1xuXG4gIFNwaW5lLk1vZGVsLkxvY2FsID0ge1xuICAgIGV4dGVuZGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlLCBlcnJvciwgdGVzdExvY2FsU3RvcmFnZTtcbiAgICAgIHRlc3RMb2NhbFN0b3JhZ2UgPSAnc3BpbmUnICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICB0cnkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0TG9jYWxTdG9yYWdlLCB0ZXN0TG9jYWxTdG9yYWdlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdExvY2FsU3RvcmFnZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBlID0gZXJyb3I7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuc2F2ZUxvY2FsKTtcbiAgICAgIHJldHVybiB0aGlzLmZldGNoKHRoaXMubG9hZExvY2FsKTtcbiAgICB9LFxuICAgIHNhdmVMb2NhbDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkodGhpcyk7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlW3RoaXMuY2xhc3NOYW1lXSA9IHJlc3VsdDtcbiAgICB9LFxuICAgIGxvYWRMb2NhbDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLmhhc093blByb3BlcnR5KCdjbGVhcicpKSB7XG4gICAgICAgIG9wdGlvbnMuY2xlYXIgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gbG9jYWxTdG9yYWdlW3RoaXMuY2xhc3NOYW1lXTtcbiAgICAgIHJldHVybiB0aGlzLnJlZnJlc2gocmVzdWx0IHx8IFtdLCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlICE9PSBudWxsKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBTcGluZS5Nb2RlbC5Mb2NhbDtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2NhbC5qcy5tYXBcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMC4wXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBTcGluZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIHNsaWNlID0gW10uc2xpY2UsXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lIHx8IHJlcXVpcmUoJ3NwaW5lJyk7XG5cbiAgJCA9IFNwaW5lLiQ7XG5cbiAgU3BpbmUuTWFuYWdlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKE1hbmFnZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgTWFuYWdlci5pbmNsdWRlKFNwaW5lLkV2ZW50cyk7XG5cbiAgICBmdW5jdGlvbiBNYW5hZ2VyKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVycyA9IFtdO1xuICAgICAgdGhpcy5iaW5kKCdjaGFuZ2UnLCB0aGlzLmNoYW5nZSk7XG4gICAgICB0aGlzLmFkZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIE1hbmFnZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbnQsIGNvbnRyb2xsZXJzLCBpLCBsZW4sIHJlc3VsdHM7XG4gICAgICBjb250cm9sbGVycyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gY29udHJvbGxlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29udCA9IGNvbnRyb2xsZXJzW2ldO1xuICAgICAgICByZXN1bHRzLnB1c2godGhpcy5hZGRPbmUoY29udCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1hbmFnZXIucHJvdG90eXBlLmFkZE9uZSA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnRyb2xsZXIuYmluZCgnYWN0aXZlJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYXJncztcbiAgICAgICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnRyaWdnZXIuYXBwbHkoX3RoaXMsIFsnY2hhbmdlJywgY29udHJvbGxlcl0uY29uY2F0KHNsaWNlLmNhbGwoYXJncykpKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIGNvbnRyb2xsZXIuYmluZCgncmVsZWFzZScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGM7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmNvbnRyb2xsZXJzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGksIGxlbiwgcmVmLCByZXN1bHRzO1xuICAgICAgICAgICAgcmVmID0gdGhpcy5jb250cm9sbGVycztcbiAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICBjID0gcmVmW2ldO1xuICAgICAgICAgICAgICBpZiAoYyAhPT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgfSkuY2FsbChfdGhpcyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICByZXR1cm4gdGhpcy5jb250cm9sbGVycy5wdXNoKGNvbnRyb2xsZXIpO1xuICAgIH07XG5cbiAgICBNYW5hZ2VyLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIFsnY2hhbmdlJywgZmFsc2VdLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xuXG4gICAgTWFuYWdlci5wcm90b3R5cGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgY29udCwgY3VycmVudCwgaSwgbGVuLCByZWY7XG4gICAgICBjdXJyZW50ID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgICByZWYgPSB0aGlzLmNvbnRyb2xsZXJzO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnQgPSByZWZbaV07XG4gICAgICAgIGlmIChjb250ICE9PSBjdXJyZW50KSB7XG4gICAgICAgICAgY29udC5kZWFjdGl2YXRlLmFwcGx5KGNvbnQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICByZXR1cm4gY3VycmVudC5hY3RpdmF0ZS5hcHBseShjdXJyZW50LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hbmFnZXI7XG5cbiAgfSkoU3BpbmUuTW9kdWxlKTtcblxuICBTcGluZS5Db250cm9sbGVyLmluY2x1ZGUoe1xuICAgIGFjdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncztcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmJpbmQoJ2FjdGl2ZScsIGFyZ3NbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJncy51bnNoaWZ0KCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBpc0FjdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5oYXNDbGFzcygnYWN0aXZlJyk7XG4gICAgfSxcbiAgICBhY3RpdmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSk7XG5cbiAgU3BpbmUuU3RhY2sgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChTdGFjaywgc3VwZXJDbGFzcyk7XG5cbiAgICBTdGFjay5wcm90b3R5cGUuY29udHJvbGxlcnMgPSB7fTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5yb3V0ZXMgPSB7fTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnc3BpbmUgc3RhY2snO1xuXG4gICAgZnVuY3Rpb24gU3RhY2soKSB7XG4gICAgICB0aGlzLnJlbGVhc2UgPSBiaW5kKHRoaXMucmVsZWFzZSwgdGhpcyk7XG4gICAgICB2YXIgZm4sIGtleSwgcmVmLCByZWYxLCByZWYyLCB2YWx1ZTtcbiAgICAgIFN0YWNrLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFNwaW5lLk1hbmFnZXI7XG4gICAgICB0aGlzLnJvdXRlciA9IChyZWYgPSBTcGluZS5Sb3V0ZSkgIT0gbnVsbCA/IHJlZi5jcmVhdGUoKSA6IHZvaWQgMDtcbiAgICAgIHJlZjEgPSB0aGlzLmNvbnRyb2xsZXJzO1xuICAgICAgZm9yIChrZXkgaW4gcmVmMSkge1xuICAgICAgICB2YWx1ZSA9IHJlZjFba2V5XTtcbiAgICAgICAgaWYgKHRoaXNba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoXCInQFwiICsga2V5ICsgXCInIGFscmVhZHkgYXNzaWduZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trZXldID0gbmV3IHZhbHVlKHtcbiAgICAgICAgICBzdGFjazogdGhpc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGQodGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIHJlZjIgPSB0aGlzLnJvdXRlcztcbiAgICAgIGZuID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGNhbGxiYWNrO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbGxiYWNrIHx8IChjYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlZjM7XG4gICAgICAgICAgICByZXR1cm4gKHJlZjMgPSBfdGhpc1t2YWx1ZV0pLmFjdGl2ZS5hcHBseShyZWYzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5yb3V0ZShrZXksIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgZm9yIChrZXkgaW4gcmVmMikge1xuICAgICAgICB2YWx1ZSA9IHJlZjJba2V5XTtcbiAgICAgICAgZm4oa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpc1tcImRlZmF1bHRcIl0pIHtcbiAgICAgICAgdGhpc1t0aGlzW1wiZGVmYXVsdFwiXV0uYWN0aXZlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgU3RhY2sucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMubWFuYWdlci5hZGQoY29udHJvbGxlcik7XG4gICAgICByZXR1cm4gdGhpcy5hcHBlbmQoY29udHJvbGxlcik7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgaWYgKChyZWYgPSB0aGlzLnJvdXRlcikgIT0gbnVsbCkge1xuICAgICAgICByZWYuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFN0YWNrLl9fc3VwZXJfXy5yZWxlYXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdGFjaztcblxuICB9KShTcGluZS5Db250cm9sbGVyKTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFNwaW5lLk1hbmFnZXI7XG4gIH1cblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cy5TdGFjayA9IFNwaW5lLlN0YWNrO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hbmFnZXIuanMubWFwXG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTAuMFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJCwgUGF0aCwgUm91dGUsIFNwaW5lLCBlc2NhcGVSZWdFeHAsIGhhc2hTdHJpcCwgbmFtZWRQYXJhbSwgc3BsYXRQYXJhbSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIHNsaWNlID0gW10uc2xpY2U7XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lIHx8IHJlcXVpcmUoJ3NwaW5lJyk7XG5cbiAgJCA9IFNwaW5lLiQ7XG5cbiAgaGFzaFN0cmlwID0gL14jKi87XG5cbiAgbmFtZWRQYXJhbSA9IC86KFtcXHdcXGRdKykvZztcblxuICBzcGxhdFBhcmFtID0gL1xcKihbXFx3XFxkXSspL2c7XG5cbiAgZXNjYXBlUmVnRXhwID0gL1stW1xcXXt9KCkrPy4sXFxcXF4kfCNcXHNdL2c7XG5cbiAgUGF0aCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFBhdGgsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gUGF0aChwYXRoLCBjYWxsYmFjaykge1xuICAgICAgdmFyIG1hdGNoO1xuICAgICAgdGhpcy5uYW1lcyA9IFtdO1xuICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbmFtZWRQYXJhbS5sYXN0SW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gbmFtZWRQYXJhbS5leGVjKHBhdGgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMubmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3BsYXRQYXJhbS5sYXN0SW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gc3BsYXRQYXJhbS5leGVjKHBhdGgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMubmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKS5yZXBsYWNlKG5hbWVkUGFyYW0sICcoW15cXC9dKiknKS5yZXBsYWNlKHNwbGF0UGFyYW0sICcoLio/KScpO1xuICAgICAgICB0aGlzLnJvdXRlID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhdGggKyBcIiRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvdXRlID0gcGF0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBQYXRoLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpLCBqLCBsZW4sIG1hdGNoLCBwYXJhbSwgcGFyYW1zO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBpZiAoIShtYXRjaCA9IHRoaXMucm91dGUuZXhlYyhwYXRoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5tYXRjaCA9IG1hdGNoO1xuICAgICAgcGFyYW1zID0gbWF0Y2guc2xpY2UoMSk7XG4gICAgICBpZiAodGhpcy5uYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHBhcmFtcy5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcbiAgICAgICAgICBwYXJhbSA9IHBhcmFtc1tpXTtcbiAgICAgICAgICBvcHRpb25zW3RoaXMubmFtZXNbaV1dID0gcGFyYW07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFJvdXRlLnRyaWdnZXIoJ2JlZm9yZScsIHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2suY2FsbChudWxsLCBvcHRpb25zKSAhPT0gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXRoO1xuXG4gIH0pKFNwaW5lLk1vZHVsZSk7XG5cbiAgUm91dGUgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIHZhciByZWY7XG5cbiAgICBleHRlbmQoUm91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gICAgUm91dGUuZXh0ZW5kKFNwaW5lLkV2ZW50cyk7XG5cbiAgICBSb3V0ZS5oaXN0b3J5U3VwcG9ydCA9ICgocmVmID0gd2luZG93Lmhpc3RvcnkpICE9IG51bGwgPyByZWYucHVzaFN0YXRlIDogdm9pZCAwKSAhPSBudWxsO1xuXG4gICAgUm91dGUub3B0aW9ucyA9IHtcbiAgICAgIHRyaWdnZXI6IHRydWUsXG4gICAgICBoaXN0b3J5OiBmYWxzZSxcbiAgICAgIHNoaW06IGZhbHNlLFxuICAgICAgcmVwbGFjZTogZmFsc2UsXG4gICAgICByZWRpcmVjdDogZmFsc2VcbiAgICB9O1xuXG4gICAgUm91dGUucm91dGVycyA9IFtdO1xuXG4gICAgUm91dGUuc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5oaXN0b3J5KSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeVN1cHBvcnQgJiYgdGhpcy5vcHRpb25zLmhpc3Rvcnk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnNoaW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGlzdG9yeSkge1xuICAgICAgICAkKHdpbmRvdykuYmluZCgncG9wc3RhdGUnLCB0aGlzLmNoYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHdpbmRvdykuYmluZCgnaGFzaGNoYW5nZScsIHRoaXMuY2hhbmdlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNoYW5nZSgpO1xuICAgIH07XG5cbiAgICBSb3V0ZS51bmJpbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB1bmJpbmRSZXN1bHQ7XG4gICAgICB1bmJpbmRSZXN1bHQgPSBTcGluZS5FdmVudHMudW5iaW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHVuYmluZFJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hpbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5KSB7XG4gICAgICAgIHJldHVybiAkKHdpbmRvdykudW5iaW5kKCdwb3BzdGF0ZScsIHRoaXMuY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkKHdpbmRvdykudW5iaW5kKCdoYXNoY2hhbmdlJywgdGhpcy5jaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSb3V0ZS5uYXZpZ2F0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MsIGxhc3RBcmcsIG9wdGlvbnMsIHBhdGgsIHJvdXRlcztcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIGxhc3RBcmcgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICBpZiAodHlwZW9mIGxhc3RBcmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG9wdGlvbnMgPSBhcmdzLnBvcCgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbGFzdEFyZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIG9wdGlvbnMudHJpZ2dlciA9IGFyZ3MucG9wKCk7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBwYXRoID0gYXJncy5qb2luKCcvJyk7XG4gICAgICBpZiAodGhpcy5wYXRoID09PSBwYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICBpZiAob3B0aW9ucy50cmlnZ2VyKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignbmF2aWdhdGUnLCB0aGlzLnBhdGgpO1xuICAgICAgICByb3V0ZXMgPSB0aGlzLm1hdGNoUm91dGVzKHRoaXMucGF0aCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghcm91dGVzLmxlbmd0aCkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWRpcmVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMucmVkaXJlY3QuYXBwbHkodGhpcywgW3RoaXMucGF0aCwgb3B0aW9uc10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWRpcmVjdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0KHRoaXMucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5zaGltKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnkgJiYgb3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAgIHJldHVybiBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHRoaXMucGF0aCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeSkge1xuICAgICAgICByZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB0aGlzLnBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdGhpcy5wYXRoO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSb3V0ZS5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByb3V0ZXI7XG4gICAgICByb3V0ZXIgPSBuZXcgdGhpcztcbiAgICAgIHRoaXMucm91dGVycy5wdXNoKHJvdXRlcik7XG4gICAgICByZXR1cm4gcm91dGVyO1xuICAgIH07XG5cbiAgICBSb3V0ZS5hZGQgPSBmdW5jdGlvbihwYXRoLCBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmFkZChwYXRoLCBjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIFJvdXRlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwYXRoLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGtleSwgcmVzdWx0cywgdmFsdWU7XG4gICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdvYmplY3QnICYmICEocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGtleSBpbiBwYXRoKSB7XG4gICAgICAgICAgdmFsdWUgPSBwYXRoW2tleV07XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuYWRkKGtleSwgdmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlcy5wdXNoKG5ldyBQYXRoKHBhdGgsIGNhbGxiYWNrKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJvdXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMucm91dGVzLmxlbmd0aCA9IDA7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5yb3V0ZXJzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaiwgbGVuLCByZWYxLCByZXN1bHRzO1xuICAgICAgICByZWYxID0gdGhpcy5jb25zdHJ1Y3Rvci5yb3V0ZXJzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICByID0gcmVmMVtqXTtcbiAgICAgICAgICBpZiAociAhPT0gdGhpcykge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgfTtcblxuICAgIFJvdXRlLmdldFBhdGggPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoO1xuICAgICAgaWYgKHRoaXMuaGlzdG9yeSkge1xuICAgICAgICBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICBpZiAocGF0aC5zdWJzdHIoMCwgMSkgIT09ICcvJykge1xuICAgICAgICAgIHBhdGggPSAnLycgKyBwYXRoO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoaGFzaFN0cmlwLCAnJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGF0aDtcbiAgICB9O1xuXG4gICAgUm91dGUuZ2V0SG9zdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgIH07XG5cbiAgICBSb3V0ZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoO1xuICAgICAgcGF0aCA9IFJvdXRlLmdldFBhdGgoKTtcbiAgICAgIGlmIChwYXRoID09PSBSb3V0ZS5wYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFJvdXRlLnBhdGggPSBwYXRoO1xuICAgICAgcmV0dXJuIFJvdXRlLm1hdGNoUm91dGVzKFJvdXRlLnBhdGgpO1xuICAgIH07XG5cbiAgICBSb3V0ZS5tYXRjaFJvdXRlcyA9IGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBqLCBsZW4sIG1hdGNoLCBtYXRjaGVzLCByZWYxLCByb3V0ZXI7XG4gICAgICBtYXRjaGVzID0gW107XG4gICAgICByZWYxID0gdGhpcy5yb3V0ZXJzLmNvbmNhdChbdGhpcy5yb3V0ZXJdKTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcm91dGVyID0gcmVmMVtqXTtcbiAgICAgICAgbWF0Y2ggPSByb3V0ZXIubWF0Y2hSb3V0ZShwYXRoLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgbWF0Y2hlcywgcGF0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICB9O1xuXG4gICAgUm91dGUucmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uID0gcGF0aDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUm91dGUoKSB7XG4gICAgICB0aGlzLnJvdXRlcyA9IFtdO1xuICAgIH1cblxuICAgIFJvdXRlLnByb3RvdHlwZS5tYXRjaFJvdXRlID0gZnVuY3Rpb24ocGF0aCwgb3B0aW9ucykge1xuICAgICAgdmFyIGosIGxlbiwgcmVmMSwgcm91dGU7XG4gICAgICByZWYxID0gdGhpcy5yb3V0ZXM7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJvdXRlID0gcmVmMVtqXTtcbiAgICAgICAgaWYgKHJvdXRlLm1hdGNoKHBhdGgsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJvdXRlLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgcmVmMTtcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGFyZ3Muc3BsaWNlKDEsIDAsIHRoaXMpO1xuICAgICAgcmV0dXJuIChyZWYxID0gdGhpcy5jb25zdHJ1Y3RvcikudHJpZ2dlci5hcHBseShyZWYxLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJvdXRlO1xuXG4gIH0pKFNwaW5lLk1vZHVsZSk7XG5cbiAgUm91dGUucm91dGVyID0gbmV3IFJvdXRlO1xuXG4gIFNwaW5lLkNvbnRyb2xsZXIuaW5jbHVkZSh7XG4gICAgcm91dGU6IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAodGhpcy5yb3V0ZXIgaW5zdGFuY2VvZiBTcGluZS5Sb3V0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuYWRkKHBhdGgsIHRoaXMucHJveHkoY2FsbGJhY2spKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBTcGluZS5Sb3V0ZS5hZGQocGF0aCwgdGhpcy5wcm94eShjYWxsYmFjaykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcm91dGVzOiBmdW5jdGlvbihyb3V0ZXMpIHtcbiAgICAgIHZhciBrZXksIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gcm91dGVzKSB7XG4gICAgICAgIHZhbHVlID0gcm91dGVzW2tleV07XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLnJvdXRlKGtleSwgdmFsdWUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFNwaW5lLlJvdXRlLm5hdmlnYXRlLmFwcGx5KFNwaW5lLlJvdXRlLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgUm91dGUuUGF0aCA9IFBhdGg7XG5cbiAgU3BpbmUuUm91dGUgPSBSb3V0ZTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFJvdXRlO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlLmpzLm1hcFxuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcblxuLypcblNwaW5lLmpzIE1WQyBsaWJyYXJ5XG5SZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBDb250cm9sbGVyLCBFdmVudHMsIExvZywgTW9kZWwsIE1vZHVsZSwgU3BpbmUsIGNyZWF0ZU9iamVjdCwgbWFrZUFycmF5LCBtb2R1bGVLZXl3b3JkcyxcbiAgICBzbGljZSA9IFtdLnNsaWNlLFxuICAgIGluZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG4gIEV2ZW50cyA9IHtcbiAgICBiaW5kOiBmdW5jdGlvbihldiwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBiYXNlLCBldnMsIGosIGxlbiwgbmFtZTtcbiAgICAgIGV2cyA9IGV2LnNwbGl0KCcgJyk7XG4gICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoJ19jYWxsYmFja3MnKSkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgfHwgKHRoaXMuX2NhbGxiYWNrcyA9IHt9KTtcbiAgICAgIH1cbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGV2cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBuYW1lID0gZXZzW2pdO1xuICAgICAgICAoYmFzZSA9IHRoaXMuX2NhbGxiYWNrcylbbmFtZV0gfHwgKGJhc2VbbmFtZV0gPSBbXSk7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgb25lOiBmdW5jdGlvbihldiwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBoYW5kbGVyO1xuICAgICAgcmV0dXJuIHRoaXMuYmluZChldiwgaGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnVuYmluZChldiwgaGFuZGxlcik7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzLCBjYWxsYmFjaywgZXYsIGosIGxlbiwgbGlzdCwgcmVmO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgZXYgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICBsaXN0ID0gKHJlZiA9IHRoaXMuX2NhbGxiYWNrcykgIT0gbnVsbCA/IHJlZltldl0gOiB2b2lkIDA7XG4gICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBjYWxsYmFjayA9IGxpc3Rbal07XG4gICAgICAgIGlmIChjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBsaXN0ZW5UbzogZnVuY3Rpb24ob2JqLCBldiwgY2FsbGJhY2spIHtcbiAgICAgIG9iai5iaW5kKGV2LCBjYWxsYmFjayk7XG4gICAgICB0aGlzLmxpc3RlbmluZ1RvIHx8ICh0aGlzLmxpc3RlbmluZ1RvID0gW10pO1xuICAgICAgdGhpcy5saXN0ZW5pbmdUby5wdXNoKHtcbiAgICAgICAgb2JqOiBvYmosXG4gICAgICAgIGV2OiBldixcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgbGlzdGVuVG9PbmNlOiBmdW5jdGlvbihvYmosIGV2LCBjYWxsYmFjaykge1xuICAgICAgdmFyIGhhbmRsZXIsIGxpc3RlbmluZ1RvT25jZTtcbiAgICAgIGxpc3RlbmluZ1RvT25jZSA9IHRoaXMubGlzdGVuaW5nVG9PbmNlIHx8ICh0aGlzLmxpc3RlbmluZ1RvT25jZSA9IFtdKTtcbiAgICAgIG9iai5iaW5kKGV2LCBoYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpLCBpZHgsIGosIGxlbiwgbHQ7XG4gICAgICAgIGlkeCA9IC0xO1xuICAgICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gbGlzdGVuaW5nVG9PbmNlLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICAgIGx0ID0gbGlzdGVuaW5nVG9PbmNlW2ldO1xuICAgICAgICAgIGlmIChsdC5vYmogPT09IG9iaikge1xuICAgICAgICAgICAgaWYgKGx0LmV2ID09PSBldiAmJiBsdC5jYWxsYmFjayA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgICBpZHggPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvYmoudW5iaW5kKGV2LCBoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICBsaXN0ZW5pbmdUb09uY2Uuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIGxpc3RlbmluZ1RvT25jZS5wdXNoKHtcbiAgICAgICAgb2JqOiBvYmosXG4gICAgICAgIGV2OiBldixcbiAgICAgICAgY2FsbGJhY2s6IGhhbmRsZXJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBzdG9wTGlzdGVuaW5nOiBmdW5jdGlvbihvYmosIGV2ZW50cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBlLCBldiwgZXZ0cywgaWR4LCBqLCBrLCBsLCBsZW4sIGxlbjEsIGxlbjIsIGxlbjMsIGxpc3RlbmluZ1RvLCBsdCwgbSwgbiwgcmVmLCByZWYxLCByZWYyO1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVmID0gW3RoaXMubGlzdGVuaW5nVG8sIHRoaXMubGlzdGVuaW5nVG9PbmNlXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgbGlzdGVuaW5nVG8gPSByZWZbal07XG4gICAgICAgICAgaWYgKCEobGlzdGVuaW5nVG8gIT0gbnVsbCA/IGxpc3RlbmluZ1RvLmxlbmd0aCA6IHZvaWQgMCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gbGlzdGVuaW5nVG8ubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICBsdCA9IGxpc3RlbmluZ1RvW2tdO1xuICAgICAgICAgICAgbHQub2JqLnVuYmluZChsdC5ldiwgbHQuY2FsbGJhY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmluZ1RvID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmxpc3RlbmluZ1RvT25jZSA9IHZvaWQgMDtcbiAgICAgIH0gZWxzZSBpZiAob2JqKSB7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cyA/IGV2ZW50cy5zcGxpdCgnICcpIDogW3ZvaWQgMF07XG4gICAgICAgIHJlZjEgPSBbdGhpcy5saXN0ZW5pbmdUbywgdGhpcy5saXN0ZW5pbmdUb09uY2VdO1xuICAgICAgICBmb3IgKGwgPSAwLCBsZW4yID0gcmVmMS5sZW5ndGg7IGwgPCBsZW4yOyBsKyspIHtcbiAgICAgICAgICBsaXN0ZW5pbmdUbyA9IHJlZjFbbF07XG4gICAgICAgICAgaWYgKCFsaXN0ZW5pbmdUbykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAobSA9IDAsIGxlbjMgPSBldmVudHMubGVuZ3RoOyBtIDwgbGVuMzsgbSsrKSB7XG4gICAgICAgICAgICBldiA9IGV2ZW50c1ttXTtcbiAgICAgICAgICAgIGZvciAoaWR4ID0gbiA9IHJlZjIgPSBsaXN0ZW5pbmdUby5sZW5ndGggLSAxOyByZWYyIDw9IDAgPyBuIDw9IDAgOiBuID49IDA7IGlkeCA9IHJlZjIgPD0gMCA/ICsrbiA6IC0tbikge1xuICAgICAgICAgICAgICBsdCA9IGxpc3RlbmluZ1RvW2lkeF07XG4gICAgICAgICAgICAgIGlmIChsdC5vYmogIT09IG9iaikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBsdC5jYWxsYmFjayAhPT0gY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoKCFldikgfHwgKGV2ID09PSBsdC5ldikpIHtcbiAgICAgICAgICAgICAgICBsdC5vYmoudW5iaW5kKGx0LmV2LCBsdC5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmluZ1RvLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChldikge1xuICAgICAgICAgICAgICAgIGV2dHMgPSBsdC5ldi5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleE9mLmNhbGwoZXZ0cywgZXYpID49IDApIHtcbiAgICAgICAgICAgICAgICAgIGV2dHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW40LCBwLCByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAocCA9IDAsIGxlbjQgPSBldnRzLmxlbmd0aDsgcCA8IGxlbjQ7IHArKykge1xuICAgICAgICAgICAgICAgICAgICAgIGUgPSBldnRzW3BdO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChlICE9PSBldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgICAgICBsdC5ldiA9ICQudHJpbShldnRzLmpvaW4oJyAnKSk7XG4gICAgICAgICAgICAgICAgICBsdC5vYmoudW5iaW5kKGV2LCBsdC5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHVuYmluZDogZnVuY3Rpb24oZXYsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY2IsIGV2cywgaSwgaiwgaywgbGVuLCBsZW4xLCBsaXN0LCBuYW1lLCByZWY7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBpZiAoIWV2KSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgZXZzID0gZXYuc3BsaXQoJyAnKTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGV2cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBuYW1lID0gZXZzW2pdO1xuICAgICAgICBsaXN0ID0gKHJlZiA9IHRoaXMuX2NhbGxiYWNrcykgIT0gbnVsbCA/IHJlZltuYW1lXSA6IHZvaWQgMDtcbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbbmFtZV07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gayA9IDAsIGxlbjEgPSBsaXN0Lmxlbmd0aDsgayA8IGxlbjE7IGkgPSArK2spIHtcbiAgICAgICAgICBjYiA9IGxpc3RbaV07XG4gICAgICAgICAgaWYgKCEoY2IgPT09IGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpc3QgPSBsaXN0LnNsaWNlKCk7XG4gICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgdGhpcy5fY2FsbGJhY2tzW25hbWVdID0gbGlzdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIEV2ZW50cy5vbiA9IEV2ZW50cy5iaW5kO1xuXG4gIEV2ZW50cy5vZmYgPSBFdmVudHMudW5iaW5kO1xuXG4gIExvZyA9IHtcbiAgICB0cmFjZTogdHJ1ZSxcbiAgICBsb2dQcmVmaXg6ICcoQXBwKScsXG4gICAgbG9nOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgaWYgKCF0aGlzLnRyYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxvZ1ByZWZpeCkge1xuICAgICAgICBhcmdzLnVuc2hpZnQodGhpcy5sb2dQcmVmaXgpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGVLZXl3b3JkcyA9IFsnaW5jbHVkZWQnLCAnZXh0ZW5kZWQnXTtcblxuICBNb2R1bGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgTW9kdWxlLmluY2x1ZGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBrZXksIHJlZiwgdmFsdWU7XG4gICAgICBpZiAoIW9iaikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luY2x1ZGUob2JqKSByZXF1aXJlcyBvYmonKTtcbiAgICAgIH1cbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICBpZiAoaW5kZXhPZi5jYWxsKG1vZHVsZUtleXdvcmRzLCBrZXkpIDwgMCkge1xuICAgICAgICAgIHRoaXMucHJvdG90eXBlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKChyZWYgPSBvYmouaW5jbHVkZWQpICE9IG51bGwpIHtcbiAgICAgICAgcmVmLmFwcGx5KHRoaXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZHVsZS5leHRlbmQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBrZXksIHJlZiwgdmFsdWU7XG4gICAgICBpZiAoIW9iaikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4dGVuZChvYmopIHJlcXVpcmVzIG9iaicpO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwobW9kdWxlS2V5d29yZHMsIGtleSkgPCAwKSB7XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgocmVmID0gb2JqLmV4dGVuZGVkKSAhPSBudWxsKSB7XG4gICAgICAgIHJlZi5hcHBseSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2R1bGUucHJveHkgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShfdGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgIH07XG5cbiAgICBNb2R1bGUucHJvdG90eXBlLnByb3h5ID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gTW9kdWxlKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTW9kdWxlO1xuXG4gIH0pKCk7XG5cbiAgTW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgICBNb2RlbC5leHRlbmQoRXZlbnRzKTtcblxuICAgIE1vZGVsLmluY2x1ZGUoRXZlbnRzKTtcblxuICAgIE1vZGVsLnJlY29yZHMgPSBbXTtcblxuICAgIE1vZGVsLmlyZWNvcmRzID0ge307XG5cbiAgICBNb2RlbC5hdHRyaWJ1dGVzID0gW107XG5cbiAgICBNb2RlbC5jb25maWd1cmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhdHRyaWJ1dGVzLCBuYW1lO1xuICAgICAgbmFtZSA9IGFyZ3VtZW50c1swXSwgYXR0cmlidXRlcyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgICAgdGhpcy5jbGFzc05hbWUgPSBuYW1lO1xuICAgICAgdGhpcy5kZWxldGVBbGwoKTtcbiAgICAgIGlmIChhdHRyaWJ1dGVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgfVxuICAgICAgdGhpcy5hdHRyaWJ1dGVzICYmICh0aGlzLmF0dHJpYnV0ZXMgPSBtYWtlQXJyYXkodGhpcy5hdHRyaWJ1dGVzKSk7XG4gICAgICB0aGlzLmF0dHJpYnV0ZXMgfHwgKHRoaXMuYXR0cmlidXRlcyA9IFtdKTtcbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZSArIFwiKFwiICsgKHRoaXMuYXR0cmlidXRlcy5qb2luKFwiLCBcIikpICsgXCIpXCI7XG4gICAgfTtcblxuICAgIE1vZGVsLmZpbmQgPSBmdW5jdGlvbihpZCwgbm90Rm91bmQpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAobm90Rm91bmQgPT0gbnVsbCkge1xuICAgICAgICBub3RGb3VuZCA9IHRoaXMubm90Rm91bmQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gKChyZWYgPSB0aGlzLmlyZWNvcmRzW2lkXSkgIT0gbnVsbCA/IHJlZi5jbG9uZSgpIDogdm9pZCAwKSB8fCAodHlwZW9mIG5vdEZvdW5kID09PSBcImZ1bmN0aW9uXCIgPyBub3RGb3VuZChpZCkgOiB2b2lkIDApO1xuICAgIH07XG5cbiAgICBNb2RlbC5maW5kQWxsID0gZnVuY3Rpb24oaWRzLCBub3RGb3VuZCkge1xuICAgICAgdmFyIGlkLCBqLCBsZW4sIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSBpZHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgaWQgPSBpZHNbal07XG4gICAgICAgIGlmICh0aGlzLmZpbmQoaWQsIG5vdEZvdW5kKSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmZpbmQoaWQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLm5vdEZvdW5kID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBNb2RlbC5leGlzdHMgPSBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pcmVjb3Jkc1tpZF0pO1xuICAgIH07XG5cbiAgICBNb2RlbC5hZGRSZWNvcmQgPSBmdW5jdGlvbihyZWNvcmQsIGlkeCkge1xuICAgICAgdmFyIHJvb3Q7XG4gICAgICBpZiAocm9vdCA9IHRoaXMuaXJlY29yZHNbcmVjb3JkLmlkIHx8IHJlY29yZC5jaWRdKSB7XG4gICAgICAgIHJvb3QucmVmcmVzaChyZWNvcmQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVjb3JkLmlkIHx8IChyZWNvcmQuaWQgPSByZWNvcmQuY2lkKTtcbiAgICAgICAgdGhpcy5pcmVjb3Jkc1tyZWNvcmQuaWRdID0gdGhpcy5pcmVjb3Jkc1tyZWNvcmQuY2lkXSA9IHJlY29yZDtcbiAgICAgICAgaWYgKGlkeCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGhpcy5yZWNvcmRzLnNwbGljZShpZHgsIDAsIHJlY29yZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucmVmcmVzaCA9IGZ1bmN0aW9uKHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWNvcmRzLCByZXN1bHQ7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmNsZWFyKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlQWxsKCk7XG4gICAgICB9XG4gICAgICByZWNvcmRzID0gdGhpcy5mcm9tSlNPTih2YWx1ZXMpO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlY29yZHMpKSB7XG4gICAgICAgIHJlY29yZHMgPSBbcmVjb3Jkc107XG4gICAgICB9XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWNvcmRzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJlY29yZCA9IHJlY29yZHNbal07XG4gICAgICAgIHRoaXMuYWRkUmVjb3JkKHJlY29yZCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNvcnQoKTtcbiAgICAgIHJlc3VsdCA9IHRoaXMuY2xvbmVBcnJheShyZWNvcmRzKTtcbiAgICAgIHRoaXMudHJpZ2dlcigncmVmcmVzaCcsIHJlc3VsdCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICBNb2RlbC5zZWxlY3QgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWYsIHJlc3VsdHM7XG4gICAgICByZWYgPSB0aGlzLnJlY29yZHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcmVjb3JkID0gcmVmW2pdO1xuICAgICAgICBpZiAoY2FsbGJhY2socmVjb3JkKSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChyZWNvcmQuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBNb2RlbC5maW5kQnlBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWY7XG4gICAgICByZWYgPSB0aGlzLnJlY29yZHM7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcmVjb3JkID0gcmVmW2pdO1xuICAgICAgICBpZiAocmVjb3JkW25hbWVdID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiByZWNvcmQuY2xvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIE1vZGVsLmZpbmRBbGxCeUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbVtuYW1lXSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTW9kZWwuZWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaiwgbGVuLCByZWNvcmQsIHJlZiwgcmVzdWx0cztcbiAgICAgIHJlZiA9IHRoaXMucmVjb3JkcztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICByZWNvcmQgPSByZWZbal07XG4gICAgICAgIHJlc3VsdHMucHVzaChjYWxsYmFjayhyZWNvcmQuY2xvbmUoKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLmFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xvbmVBcnJheSh0aGlzLnJlY29yZHMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5zbGljZSA9IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcbiAgICAgIGlmIChiZWdpbiA9PSBudWxsKSB7XG4gICAgICAgIGJlZ2luID0gMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNsb25lQXJyYXkodGhpcy5yZWNvcmRzLnNsaWNlKGJlZ2luLCBlbmQpKTtcbiAgICB9O1xuXG4gICAgTW9kZWwuZmlyc3QgPSBmdW5jdGlvbihlbmQpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgICAgZW5kID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmQgPiAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lQXJyYXkodGhpcy5yZWNvcmRzLnNsaWNlKDAsIGVuZCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChyZWYgPSB0aGlzLnJlY29yZHNbMF0pICE9IG51bGwgPyByZWYuY2xvbmUoKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwubGFzdCA9IGZ1bmN0aW9uKGJlZ2luKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgaWYgKHR5cGVvZiBiZWdpbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVBcnJheSh0aGlzLnJlY29yZHMuc2xpY2UoLWJlZ2luKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKHJlZiA9IHRoaXMucmVjb3Jkc1t0aGlzLnJlY29yZHMubGVuZ3RoIC0gMV0pICE9IG51bGwgPyByZWYuY2xvbmUoKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwuY291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlY29yZHMubGVuZ3RoO1xuICAgIH07XG5cbiAgICBNb2RlbC5kZWxldGVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMucmVjb3JkcyA9IFtdO1xuICAgICAgcmV0dXJuIHRoaXMuaXJlY29yZHMgPSB7fTtcbiAgICB9O1xuXG4gICAgTW9kZWwuZGVzdHJveUFsbCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlY29yZCwgcmVmLCByZXN1bHRzO1xuICAgICAgcmVmID0gdGhpcy5yZWNvcmRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJlY29yZCA9IHJlZltqXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHJlY29yZC5kZXN0cm95KG9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBNb2RlbC51cGRhdGUgPSBmdW5jdGlvbihpZCwgYXR0cywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuZmluZChpZCkudXBkYXRlQXR0cmlidXRlcyhhdHRzLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgTW9kZWwuY3JlYXRlID0gZnVuY3Rpb24oYXR0cywgb3B0aW9ucykge1xuICAgICAgdmFyIHJlY29yZDtcbiAgICAgIHJlY29yZCA9IG5ldyB0aGlzKGF0dHMpO1xuICAgICAgcmV0dXJuIHJlY29yZC5zYXZlKG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5kZXN0cm95ID0gZnVuY3Rpb24oaWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICByZXR1cm4gKHJlZiA9IHRoaXMuZmluZChpZCkpICE9IG51bGwgPyByZWYuZGVzdHJveShvcHRpb25zKSA6IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgTW9kZWwuY2hhbmdlID0gZnVuY3Rpb24oY2FsbGJhY2tPclBhcmFtcykge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFja09yUGFyYW1zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmQoJ2NoYW5nZScsIGNhbGxiYWNrT3JQYXJhbXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBbJ2NoYW5nZSddLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwuZmV0Y2ggPSBmdW5jdGlvbihjYWxsYmFja09yUGFyYW1zKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrT3JQYXJhbXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZCgnZmV0Y2gnLCBjYWxsYmFja09yUGFyYW1zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgWydmZXRjaCddLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWNvcmRzO1xuICAgIH07XG5cbiAgICBNb2RlbC5iZWZvcmVGcm9tSlNPTiA9IGZ1bmN0aW9uKG9iamVjdHMpIHtcbiAgICAgIHJldHVybiBvYmplY3RzO1xuICAgIH07XG5cbiAgICBNb2RlbC5mcm9tSlNPTiA9IGZ1bmN0aW9uKG9iamVjdHMpIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgaWYgKCFvYmplY3RzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb2JqZWN0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb2JqZWN0cyA9IEpTT04ucGFyc2Uob2JqZWN0cyk7XG4gICAgICB9XG4gICAgICBvYmplY3RzID0gdGhpcy5iZWZvcmVGcm9tSlNPTihvYmplY3RzKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdHMpKSB7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gb2JqZWN0cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHZhbHVlID0gb2JqZWN0c1tqXTtcbiAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiB0aGlzKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2godmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IHRoaXModmFsdWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAob2JqZWN0cyBpbnN0YW5jZW9mIHRoaXMpIHtcbiAgICAgICAgICByZXR1cm4gb2JqZWN0cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMob2JqZWN0cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE1vZGVsLmZyb21Gb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgcmV0dXJuIChyZWYgPSBuZXcgdGhpcykuZnJvbUZvcm0uYXBwbHkocmVmLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5zb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jb21wYXJhdG9yKSB7XG4gICAgICAgIHRoaXMucmVjb3Jkcy5zb3J0KHRoaXMuY29tcGFyYXRvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwuY2xvbmVBcnJheSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICB2YXIgaiwgbGVuLCByZXN1bHRzLCB2YWx1ZTtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHZhbHVlID0gYXJyYXlbal07XG4gICAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZS5jbG9uZSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBNb2RlbC5pZENvdW50ZXIgPSAwO1xuXG4gICAgTW9kZWwudWlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgICB2YXIgdWlkO1xuICAgICAgaWYgKHByZWZpeCA9PSBudWxsKSB7XG4gICAgICAgIHByZWZpeCA9ICcnO1xuICAgICAgfVxuICAgICAgdWlkID0gcHJlZml4ICsgdGhpcy5pZENvdW50ZXIrKztcbiAgICAgIGlmICh0aGlzLmV4aXN0cyh1aWQpKSB7XG4gICAgICAgIHVpZCA9IHRoaXMudWlkKHByZWZpeCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdWlkO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBNb2RlbChhdHRzKSB7XG4gICAgICBNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmICgodGhpcy5jb25zdHJ1Y3Rvci51dWlkICE9IG51bGwpICYmIHR5cGVvZiB0aGlzLmNvbnN0cnVjdG9yLnV1aWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5jaWQgPSB0aGlzLmNvbnN0cnVjdG9yLnV1aWQoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgdGhpcy5pZCA9IHRoaXMuY2lkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNpZCA9IChhdHRzICE9IG51bGwgPyBhdHRzLmNpZCA6IHZvaWQgMCkgfHwgdGhpcy5jb25zdHJ1Y3Rvci51aWQoJ2MtJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXR0cykge1xuICAgICAgICB0aGlzLmxvYWQoYXR0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTW9kZWwucHJvdG90eXBlLmlzTmV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuZXhpc3RzKCk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMudmFsaWRhdGUoKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oYXR0cykge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBpZiAoYXR0cy5pZCkge1xuICAgICAgICB0aGlzLmlkID0gYXR0cy5pZDtcbiAgICAgIH1cbiAgICAgIGZvciAoa2V5IGluIGF0dHMpIHtcbiAgICAgICAgdmFsdWUgPSBhdHRzW2tleV07XG4gICAgICAgIGlmIChrZXkgPT09ICdfY2FsbGJhY2tzJykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpc1trZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXNba2V5XSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuYXR0cmlidXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGosIGtleSwgbGVuLCByZWYsIHJlc3VsdDtcbiAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgcmVmID0gdGhpcy5jb25zdHJ1Y3Rvci5hdHRyaWJ1dGVzO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGtleSA9IHJlZltqXTtcbiAgICAgICAgaWYgKGtleSBpbiB0aGlzKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdGhpc1trZXldKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdGhpc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWQpIHtcbiAgICAgICAgcmVzdWx0LmlkID0gdGhpcy5pZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5lcWwgPSBmdW5jdGlvbihyZWMpIHtcbiAgICAgIHJldHVybiByZWMgJiYgcmVjLmNvbnN0cnVjdG9yID09PSB0aGlzLmNvbnN0cnVjdG9yICYmICgocmVjLmNpZCA9PT0gdGhpcy5jaWQpIHx8IChyZWMuaWQgJiYgcmVjLmlkID09PSB0aGlzLmlkKSk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGVycm9yLCByZWNvcmQ7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnZhbGlkYXRlICE9PSBmYWxzZSkge1xuICAgICAgICBlcnJvciA9IHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsIHRoaXMsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlU2F2ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmVjb3JkID0gdGhpcy5pc05ldygpID8gdGhpcy5jcmVhdGUob3B0aW9ucykgOiB0aGlzLnVwZGF0ZShvcHRpb25zKTtcbiAgICAgIHRoaXMuc3RyaXBDbG9uZUF0dHJzKCk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ3NhdmUnLCByZWNvcmQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnN0cmlwQ2xvbmVBdHRycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnY2lkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gdGhpcykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbCh0aGlzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSB0aGlzW2tleV07XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5jb25zdHJ1Y3Rvci5hdHRyaWJ1dGVzLCBrZXkpID49IDApIHtcbiAgICAgICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnVwZGF0ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cztcbiAgICAgIGF0dHMgPSB7fTtcbiAgICAgIGF0dHNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUF0dHJpYnV0ZXMoYXR0cywgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS51cGRhdGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24oYXR0cywgb3B0aW9ucykge1xuICAgICAgdGhpcy5sb2FkKGF0dHMpO1xuICAgICAgcmV0dXJuIHRoaXMuc2F2ZShvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmNoYW5nZUlEID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciByZWNvcmRzO1xuICAgICAgaWYgKGlkID09PSB0aGlzLmlkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlY29yZHMgPSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzO1xuICAgICAgcmVjb3Jkc1tpZF0gPSByZWNvcmRzW3RoaXMuaWRdO1xuICAgICAgaWYgKHRoaXMuY2lkICE9PSB0aGlzLmlkKSB7XG4gICAgICAgIGRlbGV0ZSByZWNvcmRzW3RoaXMuaWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaWQgPSBpZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBpLCBqLCBsZW4sIHJlY29yZCwgcmVjb3JkcztcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgcmVjb3JkcyA9IHRoaXMuY29uc3RydWN0b3IucmVjb3Jkcy5zbGljZSgwKTtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWNvcmRzLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgICBpZiAoISh0aGlzLmVxbChyZWNvcmQpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlY29yZHMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuY29uc3RydWN0b3IucmVjb3JkcyA9IHJlY29yZHM7XG4gICAgICBpZiAob3B0aW9ucy5jbGVhcikge1xuICAgICAgICBkZWxldGUgdGhpcy5jb25zdHJ1Y3Rvci5pcmVjb3Jkc1t0aGlzLmlkXTtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuY2lkXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmNsZWFyID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucy5jbGVhciA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZURlc3Ryb3knLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMucmVtb3ZlKG9wdGlvbnMpO1xuICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyKCdkZXN0cm95JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsICdkZXN0cm95Jywgb3B0aW9ucyk7XG4gICAgICBpZiAodGhpcy5saXN0ZW5pbmdUbykge1xuICAgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmR1cCA9IGZ1bmN0aW9uKG5ld1JlY29yZCkge1xuICAgICAgdmFyIGF0dHMsIHJlY29yZDtcbiAgICAgIGlmIChuZXdSZWNvcmQgPT0gbnVsbCkge1xuICAgICAgICBuZXdSZWNvcmQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgYXR0cyA9IHRoaXMuYXR0cmlidXRlcygpO1xuICAgICAgaWYgKG5ld1JlY29yZCkge1xuICAgICAgICBkZWxldGUgYXR0cy5pZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dHMuY2lkID0gdGhpcy5jaWQ7XG4gICAgICB9XG4gICAgICByZWNvcmQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihhdHRzKTtcbiAgICAgIGlmICghbmV3UmVjb3JkKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyAmJiAocmVjb3JkLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY3JlYXRlT2JqZWN0KHRoaXMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUucmVsb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3JpZ2luYWw7XG4gICAgICBpZiAodGhpcy5pc05ldygpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgb3JpZ2luYWwgPSB0aGlzLmNvbnN0cnVjdG9yLmZpbmQodGhpcy5pZCk7XG4gICAgICB0aGlzLmxvYWQob3JpZ2luYWwuYXR0cmlidXRlcygpKTtcbiAgICAgIHJldHVybiBvcmlnaW5hbDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbihhdHRzKSB7XG4gICAgICBhdHRzID0gdGhpcy5jb25zdHJ1Y3Rvci5mcm9tSlNPTihhdHRzKTtcbiAgICAgIGlmIChhdHRzLmlkICYmIHRoaXMuaWQgIT09IGF0dHMuaWQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VJRChhdHRzLmlkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5pZF0ubG9hZChhdHRzKTtcbiAgICAgIHRoaXMudHJpZ2dlcigncmVmcmVzaCcsIHRoaXMpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB0aGlzLCAncmVmcmVzaCcpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXMoKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCI8XCIgKyB0aGlzLmNvbnN0cnVjdG9yLmNsYXNzTmFtZSArIFwiIChcIiArIChKU09OLnN0cmluZ2lmeSh0aGlzKSkgKyBcIik+XCI7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5mcm9tRm9ybSA9IGZ1bmN0aW9uKGZvcm0pIHtcbiAgICAgIHZhciBjaGVja2JveCwgaiwgaywga2V5LCBsLCBsZW4sIGxlbjEsIGxlbjIsIG5hbWUsIG5hbWUxLCByZWYsIHJlZjEsIHJlZjIsIHJlc3VsdDtcbiAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgcmVmID0gJChmb3JtKS5maW5kKCdbdHlwZT1jaGVja2JveF06bm90KFt2YWx1ZV0pJyk7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgY2hlY2tib3ggPSByZWZbal07XG4gICAgICAgIHJlc3VsdFtjaGVja2JveC5uYW1lXSA9ICQoY2hlY2tib3gpLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgIH1cbiAgICAgIHJlZjEgPSAkKGZvcm0pLmZpbmQoJ1t0eXBlPWNoZWNrYm94XVtuYW1lJD1cIltdXCJdJyk7XG4gICAgICBmb3IgKGsgPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgY2hlY2tib3ggPSByZWYxW2tdO1xuICAgICAgICBuYW1lID0gY2hlY2tib3gubmFtZS5yZXBsYWNlKC9cXFtcXF0kLywgJycpO1xuICAgICAgICByZXN1bHRbbmFtZV0gfHwgKHJlc3VsdFtuYW1lXSA9IFtdKTtcbiAgICAgICAgaWYgKCQoY2hlY2tib3gpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgIHJlc3VsdFtuYW1lXS5wdXNoKGNoZWNrYm94LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVmMiA9ICQoZm9ybSkuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgIGZvciAobCA9IDAsIGxlbjIgPSByZWYyLmxlbmd0aDsgbCA8IGxlbjI7IGwrKykge1xuICAgICAgICBrZXkgPSByZWYyW2xdO1xuICAgICAgICByZXN1bHRbbmFtZTEgPSBrZXkubmFtZV0gfHwgKHJlc3VsdFtuYW1lMV0gPSBrZXkudmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubG9hZChyZXN1bHQpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuZXhpc3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5leGlzdHModGhpcy5pZCk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgY2xvbmUsIHJlY29yZHM7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZVVwZGF0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmVjb3JkcyA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHM7XG4gICAgICByZWNvcmRzW3RoaXMuaWRdLmxvYWQodGhpcy5hdHRyaWJ1dGVzKCkpO1xuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5zb3J0KCk7XG4gICAgICBjbG9uZSA9IHJlY29yZHNbdGhpcy5pZF0uY2xvbmUoKTtcbiAgICAgIGNsb25lLnRyaWdnZXIoJ3VwZGF0ZScsIGNsb25lLCBvcHRpb25zKTtcbiAgICAgIGNsb25lLnRyaWdnZXIoJ2NoYW5nZScsIGNsb25lLCAndXBkYXRlJywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gY2xvbmU7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgY2xvbmUsIHJlY29yZDtcbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlQ3JlYXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB0aGlzLmlkIHx8ICh0aGlzLmlkID0gdGhpcy5jaWQpO1xuICAgICAgcmVjb3JkID0gdGhpcy5kdXAoZmFsc2UpO1xuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5hZGRSZWNvcmQocmVjb3JkLCBvcHRpb25zLmlkeCk7XG4gICAgICB0aGlzLmNvbnN0cnVjdG9yLnNvcnQoKTtcbiAgICAgIGNsb25lID0gcmVjb3JkLmNsb25lKCk7XG4gICAgICBjbG9uZS50cmlnZ2VyKCdjcmVhdGUnLCBjbG9uZSwgb3B0aW9ucyk7XG4gICAgICBjbG9uZS50cmlnZ2VyKCdjaGFuZ2UnLCBjbG9uZSwgJ2NyZWF0ZScsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlY29yZDtcbiAgICAgIHJlY29yZCA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5pZF0gfHwgdGhpcztcbiAgICAgIHJldHVybiBFdmVudHMuYmluZC5hcHBseShyZWNvcmQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5vbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWNvcmQ7XG4gICAgICByZWNvcmQgPSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuaWRdIHx8IHRoaXM7XG4gICAgICByZXR1cm4gRXZlbnRzLm9uZS5hcHBseShyZWNvcmQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS51bmJpbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWNvcmQ7XG4gICAgICByZWNvcmQgPSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuaWRdIHx8IHRoaXM7XG4gICAgICByZXR1cm4gRXZlbnRzLnVuYmluZC5hcHBseShyZWNvcmQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgRXZlbnRzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmIChhcmd1bWVudHNbMF0gPT09ICdyZWZyZXNoJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAocmVmID0gdGhpcy5jb25zdHJ1Y3RvcikudHJpZ2dlci5hcHBseShyZWYsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2RlbDtcblxuICB9KShNb2R1bGUpO1xuXG4gIE1vZGVsLnByb3RvdHlwZS5vbiA9IE1vZGVsLnByb3RvdHlwZS5iaW5kO1xuXG4gIE1vZGVsLnByb3RvdHlwZS5vZmYgPSBNb2RlbC5wcm90b3R5cGUudW5iaW5kO1xuXG4gIENvbnRyb2xsZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChDb250cm9sbGVyLCBzdXBlckNsYXNzKTtcblxuICAgIENvbnRyb2xsZXIuaW5jbHVkZShFdmVudHMpO1xuXG4gICAgQ29udHJvbGxlci5pbmNsdWRlKExvZyk7XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5ldmVudFNwbGl0dGVyID0gL14oXFxTKylcXHMqKC4qKSQvO1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUudGFnID0gJ2Rpdic7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMucmVsZWFzZSA9IGJpbmQodGhpcy5yZWxlYXNlLCB0aGlzKTtcbiAgICAgIHZhciBjb250ZXh0LCBrZXksIHBhcmVudF9wcm90b3R5cGUsIHJlZiwgdmFsdWU7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgcmVmID0gdGhpcy5vcHRpb25zO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIHZhbHVlID0gcmVmW2tleV07XG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmVsKSB7XG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWwgPSAkKHRoaXMuZWwpO1xuICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSB7XG4gICAgICAgIHRoaXMuZWwuYWRkQ2xhc3ModGhpcy5jbGFzc05hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgICB0aGlzLmVsLmF0dHIodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5ldmVudHMpIHtcbiAgICAgICAgdGhpcy5ldmVudHMgPSB0aGlzLmNvbnN0cnVjdG9yLmV2ZW50cztcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5lbGVtZW50cykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gdGhpcy5jb25zdHJ1Y3Rvci5lbGVtZW50cztcbiAgICAgIH1cbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgd2hpbGUgKHBhcmVudF9wcm90b3R5cGUgPSBjb250ZXh0LmNvbnN0cnVjdG9yLl9fc3VwZXJfXykge1xuICAgICAgICBpZiAocGFyZW50X3Byb3RvdHlwZS5ldmVudHMpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50cyA9ICQuZXh0ZW5kKHt9LCBwYXJlbnRfcHJvdG90eXBlLmV2ZW50cywgdGhpcy5ldmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRfcHJvdG90eXBlLmVsZW1lbnRzKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50cyA9ICQuZXh0ZW5kKHt9LCBwYXJlbnRfcHJvdG90eXBlLmVsZW1lbnRzLCB0aGlzLmVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0ID0gcGFyZW50X3Byb3RvdHlwZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmV2ZW50cykge1xuICAgICAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKHRoaXMuZXZlbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmVsZW1lbnRzKSB7XG4gICAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICB9XG4gICAgICBDb250cm9sbGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMudHJpZ2dlcigncmVsZWFzZScsIHRoaXMpO1xuICAgICAgdGhpcy5lbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICByZXR1cm4gdGhpcy5zdG9wTGlzdGVuaW5nKCk7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLiQgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMuZWwuZmluZChzZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmRlbGVnYXRlRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzKSB7XG4gICAgICB2YXIgZXZlbnROYW1lLCBrZXksIG1hdGNoLCBtZXRob2QsIHJlc3VsdHMsIHNlbGVjdG9yO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIG1ldGhvZCA9IGV2ZW50c1trZXldO1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG1ldGhvZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSh0aGlzKShtZXRob2QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghdGhpc1ttZXRob2RdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWV0aG9kICsgXCIgZG9lc24ndCBleGlzdFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbWV0aG9kID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdGhpc1ttZXRob2RdLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSh0aGlzKShtZXRob2QpO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoID0ga2V5Lm1hdGNoKHRoaXMuZXZlbnRTcGxpdHRlcik7XG4gICAgICAgIGV2ZW50TmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICBzZWxlY3RvciA9IG1hdGNoWzJdO1xuICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZWwuYmluZChldmVudE5hbWUsIG1ldGhvZCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmVsLm9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIG1ldGhvZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUucmVmcmVzaEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIga2V5LCByZWYsIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgcmVmID0gdGhpcy5lbGVtZW50cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICByZXN1bHRzLnB1c2godGhpc1t2YWx1ZV0gPSB0aGlzLiQoa2V5KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB0aW1lb3V0KSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dCh0aGlzLnByb3h5KGZ1bmMpLCB0aW1lb3V0IHx8IDApO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdGhpcy5lbC5odG1sKGVsZW1lbnQuZWwgfHwgZWxlbWVudCk7XG4gICAgICB0aGlzLnJlZnJlc2hFbGVtZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGUsIGVsZW1lbnRzLCByZWY7XG4gICAgICBlbGVtZW50cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgZWxlbWVudHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqLCBsZW4sIHJlc3VsdHM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBlID0gZWxlbWVudHNbal07XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGUuZWwgfHwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgICAgKHJlZiA9IHRoaXMuZWwpLmFwcGVuZC5hcHBseShyZWYsIGVsZW1lbnRzKTtcbiAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuYXBwZW5kVG8gPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB0aGlzLmVsLmFwcGVuZFRvKGVsZW1lbnQuZWwgfHwgZWxlbWVudCk7XG4gICAgICB0aGlzLnJlZnJlc2hFbGVtZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLnByZXBlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlLCBlbGVtZW50cywgcmVmO1xuICAgICAgZWxlbWVudHMgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGVsZW1lbnRzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaiwgbGVuLCByZXN1bHRzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgZSA9IGVsZW1lbnRzW2pdO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChlLmVsIHx8IGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSkoKTtcbiAgICAgIChyZWYgPSB0aGlzLmVsKS5wcmVwZW5kLmFwcGx5KHJlZiwgZWxlbWVudHMpO1xuICAgICAgdGhpcy5yZWZyZXNoRWxlbWVudHMoKTtcbiAgICAgIHJldHVybiB0aGlzLmVsO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIHByZXZpb3VzLCByZWYsIHJlZjE7XG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5lbCB8fCBlbGVtZW50O1xuICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVsZW1lbnQgPSAkLnRyaW0oZWxlbWVudCk7XG4gICAgICB9XG4gICAgICByZWYxID0gW3RoaXMuZWwsICQoKChyZWYgPSAkLnBhcnNlSFRNTChlbGVtZW50KSkgIT0gbnVsbCA/IHJlZlswXSA6IHZvaWQgMCkgfHwgZWxlbWVudCldLCBwcmV2aW91cyA9IHJlZjFbMF0sIHRoaXMuZWwgPSByZWYxWzFdO1xuICAgICAgcHJldmlvdXMucmVwbGFjZVdpdGgodGhpcy5lbCk7XG4gICAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKHRoaXMuZXZlbnRzKTtcbiAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbnRyb2xsZXI7XG5cbiAgfSkoTW9kdWxlKTtcblxuICAkID0gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93ICE9PSBudWxsID8gd2luZG93LmpRdWVyeSA6IHZvaWQgMCkgfHwgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93ICE9PSBudWxsID8gd2luZG93LlplcHRvIDogdm9pZCAwKSB8fCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH07XG5cbiAgY3JlYXRlT2JqZWN0ID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIEZ1bmM7XG4gICAgRnVuYyA9IGZ1bmN0aW9uKCkge307XG4gICAgRnVuYy5wcm90b3R5cGUgPSBvO1xuICAgIHJldHVybiBuZXcgRnVuYygpO1xuICB9O1xuXG4gIG1ha2VBcnJheSA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMCk7XG4gIH07XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lID0ge307XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlICE9PSBudWxsKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBTcGluZTtcbiAgfVxuXG4gIFNwaW5lLnZlcnNpb24gPSAnMS42LjInO1xuXG4gIFNwaW5lLiQgPSAkO1xuXG4gIFNwaW5lLkV2ZW50cyA9IEV2ZW50cztcblxuICBTcGluZS5Mb2cgPSBMb2c7XG5cbiAgU3BpbmUuTW9kdWxlID0gTW9kdWxlO1xuXG4gIFNwaW5lLkNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xuXG4gIFNwaW5lLk1vZGVsID0gTW9kZWw7XG5cbiAgTW9kdWxlLmV4dGVuZC5jYWxsKFNwaW5lLCBFdmVudHMpO1xuXG4gIE1vZHVsZS5jcmVhdGUgPSBNb2R1bGUuc3ViID0gQ29udHJvbGxlci5jcmVhdGUgPSBDb250cm9sbGVyLnN1YiA9IE1vZGVsLnN1YiA9IGZ1bmN0aW9uKGluc3RhbmNlcywgc3RhdGljcykge1xuICAgIHZhciBSZXN1bHQ7XG4gICAgUmVzdWx0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICAgIGV4dGVuZChSZXN1bHQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgICBmdW5jdGlvbiBSZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBSZXN1bHQ7XG5cbiAgICB9KSh0aGlzKTtcbiAgICBpZiAoaW5zdGFuY2VzKSB7XG4gICAgICBSZXN1bHQuaW5jbHVkZShpbnN0YW5jZXMpO1xuICAgIH1cbiAgICBpZiAoc3RhdGljcykge1xuICAgICAgUmVzdWx0LmV4dGVuZChzdGF0aWNzKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBSZXN1bHQudW5iaW5kID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIFJlc3VsdC51bmJpbmQoKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdDtcbiAgfTtcblxuICBNb2RlbC5zZXR1cCA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICB2YXIgSW5zdGFuY2U7XG4gICAgaWYgKGF0dHJpYnV0ZXMgPT0gbnVsbCkge1xuICAgICAgYXR0cmlidXRlcyA9IFtdO1xuICAgIH1cbiAgICBJbnN0YW5jZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgICBleHRlbmQoSW5zdGFuY2UsIHN1cGVyQ2xhc3MpO1xuXG4gICAgICBmdW5jdGlvbiBJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gSW5zdGFuY2U7XG5cbiAgICB9KSh0aGlzKTtcbiAgICBJbnN0YW5jZS5jb25maWd1cmUuYXBwbHkoSW5zdGFuY2UsIFtuYW1lXS5jb25jYXQoc2xpY2UuY2FsbChhdHRyaWJ1dGVzKSkpO1xuICAgIHJldHVybiBJbnN0YW5jZTtcbiAgfTtcblxuICBTcGluZS5DbGFzcyA9IE1vZHVsZTtcblxufSkuY2FsbCh0aGlzKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3BpbmUuanMubWFwXG4iLCIvLyBzdGF0cy5qcyAtIGh0dHA6Ly9naXRodWIuY29tL21yZG9vYi9zdGF0cy5qc1xudmFyIFN0YXRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaChhKXtjLmFwcGVuZENoaWxkKGEuZG9tKTtyZXR1cm4gYX1mdW5jdGlvbiBrKGEpe2Zvcih2YXIgZD0wO2Q8Yy5jaGlsZHJlbi5sZW5ndGg7ZCsrKWMuY2hpbGRyZW5bZF0uc3R5bGUuZGlzcGxheT1kPT09YT9cImJsb2NrXCI6XCJub25lXCI7bD1hfXZhciBsPTAsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Muc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtjdXJzb3I6cG9pbnRlcjtvcGFjaXR5OjAuOTt6LWluZGV4OjEwMDAwXCI7Yy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7aygrK2wlYy5jaGlsZHJlbi5sZW5ndGgpfSwhMSk7dmFyIGc9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKSxlPWcsYT0wLHI9aChuZXcgU3RhdHMuUGFuZWwoXCJGUFNcIixcIiMwZmZcIixcIiMwMDJcIikpLGY9aChuZXcgU3RhdHMuUGFuZWwoXCJNU1wiLFwiIzBmMFwiLFwiIzAyMFwiKSk7XG5pZihzZWxmLnBlcmZvcm1hbmNlJiZzZWxmLnBlcmZvcm1hbmNlLm1lbW9yeSl2YXIgdD1oKG5ldyBTdGF0cy5QYW5lbChcIk1CXCIsXCIjZjA4XCIsXCIjMjAxXCIpKTtrKDApO3JldHVybntSRVZJU0lPTjoxNixkb206YyxhZGRQYW5lbDpoLHNob3dQYW5lbDprLGJlZ2luOmZ1bmN0aW9uKCl7Zz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpfSxlbmQ6ZnVuY3Rpb24oKXthKys7dmFyIGM9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKTtmLnVwZGF0ZShjLWcsMjAwKTtpZihjPmUrMUUzJiYoci51cGRhdGUoMUUzKmEvKGMtZSksMTAwKSxlPWMsYT0wLHQpKXt2YXIgZD1wZXJmb3JtYW5jZS5tZW1vcnk7dC51cGRhdGUoZC51c2VkSlNIZWFwU2l6ZS8xMDQ4NTc2LGQuanNIZWFwU2l6ZUxpbWl0LzEwNDg1NzYpfXJldHVybiBjfSx1cGRhdGU6ZnVuY3Rpb24oKXtnPXRoaXMuZW5kKCl9LGRvbUVsZW1lbnQ6YyxzZXRNb2RlOmt9fTtcblN0YXRzLlBhbmVsPWZ1bmN0aW9uKGgsayxsKXt2YXIgYz1JbmZpbml0eSxnPTAsZT1NYXRoLnJvdW5kLGE9ZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSkscj04MCphLGY9NDgqYSx0PTMqYSx1PTIqYSxkPTMqYSxtPTE1KmEsbj03NCphLHA9MzAqYSxxPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cS53aWR0aD1yO3EuaGVpZ2h0PWY7cS5zdHlsZS5jc3NUZXh0PVwid2lkdGg6ODBweDtoZWlnaHQ6NDhweFwiO3ZhciBiPXEuZ2V0Q29udGV4dChcIjJkXCIpO2IuZm9udD1cImJvbGQgXCIrOSphK1wicHggSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWZcIjtiLnRleHRCYXNlbGluZT1cInRvcFwiO2IuZmlsbFN0eWxlPWw7Yi5maWxsUmVjdCgwLDAscixmKTtiLmZpbGxTdHlsZT1rO2IuZmlsbFRleHQoaCx0LHUpO2IuZmlsbFJlY3QoZCxtLG4scCk7Yi5maWxsU3R5bGU9bDtiLmdsb2JhbEFscGhhPS45O2IuZmlsbFJlY3QoZCxtLG4scCk7cmV0dXJue2RvbTpxLHVwZGF0ZTpmdW5jdGlvbihmLFxudil7Yz1NYXRoLm1pbihjLGYpO2c9TWF0aC5tYXgoZyxmKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9MTtiLmZpbGxSZWN0KDAsMCxyLG0pO2IuZmlsbFN0eWxlPWs7Yi5maWxsVGV4dChlKGYpK1wiIFwiK2grXCIgKFwiK2UoYykrXCItXCIrZShnKStcIilcIix0LHUpO2IuZHJhd0ltYWdlKHEsZCthLG0sbi1hLHAsZCxtLG4tYSxwKTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxwKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9Ljk7Yi5maWxsUmVjdChkK24tYSxtLGEsZSgoMS1mL3YpKnApKX19fTtcIm9iamVjdFwiPT09dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPVN0YXRzKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7XG4gIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCdcbiAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJztcbn0iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG4iLCJ2YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcblxudmFyIE9iamVjdF9rZXlzID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGlmIChPYmplY3Qua2V5cykgcmV0dXJuIE9iamVjdC5rZXlzKG9iailcbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSByZXMucHVzaChrZXkpXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufTtcblxudmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoeHMsIGZuKSB7XG4gICAgaWYgKHhzLmZvckVhY2gpIHJldHVybiB4cy5mb3JFYWNoKGZuKVxuICAgIGVsc2UgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmbih4c1tpXSwgaSwgeHMpO1xuICAgIH1cbn07XG5cbnZhciBkZWZpbmVQcm9wID0gKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ18nLCB7fSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmosIG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIG9ialtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cbn0oKSk7XG5cbnZhciBnbG9iYWxzID0gWydBcnJheScsICdCb29sZWFuJywgJ0RhdGUnLCAnRXJyb3InLCAnRXZhbEVycm9yJywgJ0Z1bmN0aW9uJyxcbidJbmZpbml0eScsICdKU09OJywgJ01hdGgnLCAnTmFOJywgJ051bWJlcicsICdPYmplY3QnLCAnUmFuZ2VFcnJvcicsXG4nUmVmZXJlbmNlRXJyb3InLCAnUmVnRXhwJywgJ1N0cmluZycsICdTeW50YXhFcnJvcicsICdUeXBlRXJyb3InLCAnVVJJRXJyb3InLFxuJ2RlY29kZVVSSScsICdkZWNvZGVVUklDb21wb25lbnQnLCAnZW5jb2RlVVJJJywgJ2VuY29kZVVSSUNvbXBvbmVudCcsICdlc2NhcGUnLFxuJ2V2YWwnLCAnaXNGaW5pdGUnLCAnaXNOYU4nLCAncGFyc2VGbG9hdCcsICdwYXJzZUludCcsICd1bmRlZmluZWQnLCAndW5lc2NhcGUnXTtcblxuZnVuY3Rpb24gQ29udGV4dCgpIHt9XG5Db250ZXh0LnByb3RvdHlwZSA9IHt9O1xuXG52YXIgU2NyaXB0ID0gZXhwb3J0cy5TY3JpcHQgPSBmdW5jdGlvbiBOb2RlU2NyaXB0IChjb2RlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNjcmlwdCkpIHJldHVybiBuZXcgU2NyaXB0KGNvZGUpO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG59O1xuXG5TY3JpcHQucHJvdG90eXBlLnJ1bkluQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgaWYgKCEoY29udGV4dCBpbnN0YW5jZW9mIENvbnRleHQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJuZWVkcyBhICdjb250ZXh0JyBhcmd1bWVudC5cIik7XG4gICAgfVxuICAgIFxuICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZiAoIWlmcmFtZS5zdHlsZSkgaWZyYW1lLnN0eWxlID0ge307XG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgIFxuICAgIHZhciB3aW4gPSBpZnJhbWUuY29udGVudFdpbmRvdztcbiAgICB2YXIgd0V2YWwgPSB3aW4uZXZhbCwgd0V4ZWNTY3JpcHQgPSB3aW4uZXhlY1NjcmlwdDtcblxuICAgIGlmICghd0V2YWwgJiYgd0V4ZWNTY3JpcHQpIHtcbiAgICAgICAgLy8gd2luLmV2YWwoKSBtYWdpY2FsbHkgYXBwZWFycyB3aGVuIHRoaXMgaXMgY2FsbGVkIGluIElFOlxuICAgICAgICB3RXhlY1NjcmlwdC5jYWxsKHdpbiwgJ251bGwnKTtcbiAgICAgICAgd0V2YWwgPSB3aW4uZXZhbDtcbiAgICB9XG4gICAgXG4gICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjb250ZXh0KSwgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB3aW5ba2V5XSA9IGNvbnRleHRba2V5XTtcbiAgICB9KTtcbiAgICBmb3JFYWNoKGdsb2JhbHMsIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKGNvbnRleHRba2V5XSkge1xuICAgICAgICAgICAgd2luW2tleV0gPSBjb250ZXh0W2tleV07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICB2YXIgd2luS2V5cyA9IE9iamVjdF9rZXlzKHdpbik7XG5cbiAgICB2YXIgcmVzID0gd0V2YWwuY2FsbCh3aW4sIHRoaXMuY29kZSk7XG4gICAgXG4gICAgZm9yRWFjaChPYmplY3Rfa2V5cyh3aW4pLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgY2lyY3VsYXIgb2JqZWN0cyBsaWtlIGB0b3BgIGFuZCBgd2luZG93YCBieSBvbmx5XG4gICAgICAgIC8vIHVwZGF0aW5nIGV4aXN0aW5nIGNvbnRleHQgcHJvcGVydGllcyBvciBuZXcgcHJvcGVydGllcyBpbiB0aGUgYHdpbmBcbiAgICAgICAgLy8gdGhhdCB3YXMgb25seSBpbnRyb2R1Y2VkIGFmdGVyIHRoZSBldmFsLlxuICAgICAgICBpZiAoa2V5IGluIGNvbnRleHQgfHwgaW5kZXhPZih3aW5LZXlzLCBrZXkpID09PSAtMSkge1xuICAgICAgICAgICAgY29udGV4dFtrZXldID0gd2luW2tleV07XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZvckVhY2goZ2xvYmFscywgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gY29udGV4dCkpIHtcbiAgICAgICAgICAgIGRlZmluZVByb3AoY29udGV4dCwga2V5LCB3aW5ba2V5XSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgXG4gICAgcmV0dXJuIHJlcztcbn07XG5cblNjcmlwdC5wcm90b3R5cGUucnVuSW5UaGlzQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZXZhbCh0aGlzLmNvZGUpOyAvLyBtYXliZS4uLlxufTtcblxuU2NyaXB0LnByb3RvdHlwZS5ydW5Jbk5ld0NvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBjdHggPSBTY3JpcHQuY3JlYXRlQ29udGV4dChjb250ZXh0KTtcbiAgICB2YXIgcmVzID0gdGhpcy5ydW5JbkNvbnRleHQoY3R4KTtcblxuICAgIGZvckVhY2goT2JqZWN0X2tleXMoY3R4KSwgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBjb250ZXh0W2tleV0gPSBjdHhba2V5XTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXM7XG59O1xuXG5mb3JFYWNoKE9iamVjdF9rZXlzKFNjcmlwdC5wcm90b3R5cGUpLCBmdW5jdGlvbiAobmFtZSkge1xuICAgIGV4cG9ydHNbbmFtZV0gPSBTY3JpcHRbbmFtZV0gPSBmdW5jdGlvbiAoY29kZSkge1xuICAgICAgICB2YXIgcyA9IFNjcmlwdChjb2RlKTtcbiAgICAgICAgcmV0dXJuIHNbbmFtZV0uYXBwbHkocywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9O1xufSk7XG5cbmV4cG9ydHMuY3JlYXRlU2NyaXB0ID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgICByZXR1cm4gZXhwb3J0cy5TY3JpcHQoY29kZSk7XG59O1xuXG5leHBvcnRzLmNyZWF0ZUNvbnRleHQgPSBTY3JpcHQuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIGNvcHkgPSBuZXcgQ29udGV4dCgpO1xuICAgIGlmKHR5cGVvZiBjb250ZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGNvbnRleHQpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb3B5W2tleV0gPSBjb250ZXh0W2tleV07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY29weTtcbn07XG4iLCIvKipcbiAqIGRhdC1ndWkgSmF2YVNjcmlwdCBDb250cm9sbGVyIExpYnJhcnlcbiAqIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9kYXQtZ3VpXG4gKlxuICogQ29weXJpZ2h0IDIwMTEgRGF0YSBBcnRzIFRlYW0sIEdvb2dsZSBDcmVhdGl2ZSBMYWJcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKi9cbnZhciBkYXQ9ZGF0fHx7fTtkYXQuZ3VpPWRhdC5ndWl8fHt9O2RhdC51dGlscz1kYXQudXRpbHN8fHt9O2RhdC5jb250cm9sbGVycz1kYXQuY29udHJvbGxlcnN8fHt9O2RhdC5kb209ZGF0LmRvbXx8e307ZGF0LmNvbG9yPWRhdC5jb2xvcnx8e307ZGF0LnV0aWxzLmNzcz1mdW5jdGlvbigpe3JldHVybntsb2FkOmZ1bmN0aW9uKGYsYSl7YT1hfHxkb2N1bWVudDt2YXIgZD1hLmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO2QudHlwZT1cInRleHQvY3NzXCI7ZC5yZWw9XCJzdHlsZXNoZWV0XCI7ZC5ocmVmPWY7YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoZCl9LGluamVjdDpmdW5jdGlvbihmLGEpe2E9YXx8ZG9jdW1lbnQ7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO2QudHlwZT1cInRleHQvY3NzXCI7ZC5pbm5lckhUTUw9ZjthLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChkKX19fSgpO1xuZGF0LnV0aWxzLmNvbW1vbj1mdW5jdGlvbigpe3ZhciBmPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLGE9QXJyYXkucHJvdG90eXBlLnNsaWNlO3JldHVybntCUkVBSzp7fSxleHRlbmQ6ZnVuY3Rpb24oZCl7dGhpcy5lYWNoKGEuY2FsbChhcmd1bWVudHMsMSksZnVuY3Rpb24oYSl7Zm9yKHZhciBjIGluIGEpdGhpcy5pc1VuZGVmaW5lZChhW2NdKXx8KGRbY109YVtjXSl9LHRoaXMpO3JldHVybiBkfSxkZWZhdWx0czpmdW5jdGlvbihkKXt0aGlzLmVhY2goYS5jYWxsKGFyZ3VtZW50cywxKSxmdW5jdGlvbihhKXtmb3IodmFyIGMgaW4gYSl0aGlzLmlzVW5kZWZpbmVkKGRbY10pJiYoZFtjXT1hW2NdKX0sdGhpcyk7cmV0dXJuIGR9LGNvbXBvc2U6ZnVuY3Rpb24oKXt2YXIgZD1hLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGU9YS5jYWxsKGFyZ3VtZW50cyksYz1kLmxlbmd0aC0xOzA8PWM7Yy0tKWU9W2RbY10uYXBwbHkodGhpcyxlKV07cmV0dXJuIGVbMF19fSxcbmVhY2g6ZnVuY3Rpb24oYSxlLGMpe2lmKGEpaWYoZiYmYS5mb3JFYWNoJiZhLmZvckVhY2g9PT1mKWEuZm9yRWFjaChlLGMpO2Vsc2UgaWYoYS5sZW5ndGg9PT1hLmxlbmd0aCswKWZvcih2YXIgYj0wLHA9YS5sZW5ndGg7YjxwJiYhKGIgaW4gYSYmZS5jYWxsKGMsYVtiXSxiKT09PXRoaXMuQlJFQUspO2IrKyk7ZWxzZSBmb3IoYiBpbiBhKWlmKGUuY2FsbChjLGFbYl0sYik9PT10aGlzLkJSRUFLKWJyZWFrfSxkZWZlcjpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGEsMCl9LHRvQXJyYXk6ZnVuY3Rpb24oZCl7cmV0dXJuIGQudG9BcnJheT9kLnRvQXJyYXkoKTphLmNhbGwoZCl9LGlzVW5kZWZpbmVkOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hfSxpc051bGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hfSxpc05hTjpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PWF9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29uc3RydWN0b3I9PT1BcnJheX0sXG5pc09iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PU9iamVjdChhKX0saXNOdW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1hKzB9LGlzU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09YStcIlwifSxpc0Jvb2xlYW46ZnVuY3Rpb24oYSl7cmV0dXJuITE9PT1hfHwhMD09PWF9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfX19KCk7XG5kYXQuY29udHJvbGxlcnMuQ29udHJvbGxlcj1mdW5jdGlvbihmKXt2YXIgYT1mdW5jdGlvbihhLGUpe3RoaXMuaW5pdGlhbFZhbHVlPWFbZV07dGhpcy5kb21FbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5vYmplY3Q9YTt0aGlzLnByb3BlcnR5PWU7dGhpcy5fX29uRmluaXNoQ2hhbmdlPXRoaXMuX19vbkNoYW5nZT12b2lkIDB9O2YuZXh0ZW5kKGEucHJvdG90eXBlLHtvbkNoYW5nZTpmdW5jdGlvbihhKXt0aGlzLl9fb25DaGFuZ2U9YTtyZXR1cm4gdGhpc30sb25GaW5pc2hDaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5fX29uRmluaXNoQ2hhbmdlPWE7cmV0dXJuIHRoaXN9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMub2JqZWN0W3RoaXMucHJvcGVydHldPWE7dGhpcy5fX29uQ2hhbmdlJiZ0aGlzLl9fb25DaGFuZ2UuY2FsbCh0aGlzLGEpO3RoaXMudXBkYXRlRGlzcGxheSgpO3JldHVybiB0aGlzfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9iamVjdFt0aGlzLnByb3BlcnR5XX0sXG51cGRhdGVEaXNwbGF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGlzTW9kaWZpZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0aWFsVmFsdWUhPT10aGlzLmdldFZhbHVlKCl9fSk7cmV0dXJuIGF9KGRhdC51dGlscy5jb21tb24pO1xuZGF0LmRvbS5kb209ZnVuY3Rpb24oZil7ZnVuY3Rpb24gYShiKXtpZihcIjBcIj09PWJ8fGYuaXNVbmRlZmluZWQoYikpcmV0dXJuIDA7Yj1iLm1hdGNoKGUpO3JldHVybiBmLmlzTnVsbChiKT8wOnBhcnNlRmxvYXQoYlsxXSl9dmFyIGQ9e307Zi5lYWNoKHtIVE1MRXZlbnRzOltcImNoYW5nZVwiXSxNb3VzZUV2ZW50czpbXCJjbGlja1wiLFwibW91c2Vtb3ZlXCIsXCJtb3VzZWRvd25cIixcIm1vdXNldXBcIixcIm1vdXNlb3ZlclwiXSxLZXlib2FyZEV2ZW50czpbXCJrZXlkb3duXCJdfSxmdW5jdGlvbihiLGEpe2YuZWFjaChiLGZ1bmN0aW9uKGIpe2RbYl09YX0pfSk7dmFyIGU9LyhcXGQrKFxcLlxcZCspPylweC8sYz17bWFrZVNlbGVjdGFibGU6ZnVuY3Rpb24oYixhKXt2b2lkIDAhPT1iJiZ2b2lkIDAhPT1iLnN0eWxlJiYoYi5vbnNlbGVjdHN0YXJ0PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMX06ZnVuY3Rpb24oKXt9LGIuc3R5bGUuTW96VXNlclNlbGVjdD1hP1wiYXV0b1wiOlwibm9uZVwiLGIuc3R5bGUuS2h0bWxVc2VyU2VsZWN0PVxuYT9cImF1dG9cIjpcIm5vbmVcIixiLnVuc2VsZWN0YWJsZT1hP1wib25cIjpcIm9mZlwiKX0sbWFrZUZ1bGxzY3JlZW46ZnVuY3Rpb24oYixhLGMpe2YuaXNVbmRlZmluZWQoYSkmJihhPSEwKTtmLmlzVW5kZWZpbmVkKGMpJiYoYz0hMCk7Yi5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCI7YSYmKGIuc3R5bGUubGVmdD0wLGIuc3R5bGUucmlnaHQ9MCk7YyYmKGIuc3R5bGUudG9wPTAsYi5zdHlsZS5ib3R0b209MCl9LGZha2VFdmVudDpmdW5jdGlvbihiLGEsYyxlKXtjPWN8fHt9O3ZhciByPWRbYV07aWYoIXIpdGhyb3cgRXJyb3IoXCJFdmVudCB0eXBlIFwiK2ErXCIgbm90IHN1cHBvcnRlZC5cIik7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQocik7c3dpdGNoKHIpe2Nhc2UgXCJNb3VzZUV2ZW50c1wiOm4uaW5pdE1vdXNlRXZlbnQoYSxjLmJ1YmJsZXN8fCExLGMuY2FuY2VsYWJsZXx8ITAsd2luZG93LGMuY2xpY2tDb3VudHx8MSwwLDAsYy54fHxjLmNsaWVudFh8fDAsYy55fHxjLmNsaWVudFl8fDAsITEsXG4hMSwhMSwhMSwwLG51bGwpO2JyZWFrO2Nhc2UgXCJLZXlib2FyZEV2ZW50c1wiOnI9bi5pbml0S2V5Ym9hcmRFdmVudHx8bi5pbml0S2V5RXZlbnQ7Zi5kZWZhdWx0cyhjLHtjYW5jZWxhYmxlOiEwLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsa2V5Q29kZTp2b2lkIDAsY2hhckNvZGU6dm9pZCAwfSk7cihhLGMuYnViYmxlc3x8ITEsYy5jYW5jZWxhYmxlLHdpbmRvdyxjLmN0cmxLZXksYy5hbHRLZXksYy5zaGlmdEtleSxjLm1ldGFLZXksYy5rZXlDb2RlLGMuY2hhckNvZGUpO2JyZWFrO2RlZmF1bHQ6bi5pbml0RXZlbnQoYSxjLmJ1YmJsZXN8fCExLGMuY2FuY2VsYWJsZXx8ITApfWYuZGVmYXVsdHMobixlKTtiLmRpc3BhdGNoRXZlbnQobil9LGJpbmQ6ZnVuY3Rpb24oYSxlLGQsZil7YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihlLGQsZnx8ITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoXCJvblwiK2UsZCk7cmV0dXJuIGN9LFxudW5iaW5kOmZ1bmN0aW9uKGEsZSxkLGYpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcj9hLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxkLGZ8fCExKTphLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KFwib25cIitlLGQpO3JldHVybiBjfSxhZGRDbGFzczpmdW5jdGlvbihhLGUpe2lmKHZvaWQgMD09PWEuY2xhc3NOYW1lKWEuY2xhc3NOYW1lPWU7ZWxzZSBpZihhLmNsYXNzTmFtZSE9PWUpe3ZhciBkPWEuY2xhc3NOYW1lLnNwbGl0KC8gKy8pOy0xPT1kLmluZGV4T2YoZSkmJihkLnB1c2goZSksYS5jbGFzc05hbWU9ZC5qb2luKFwiIFwiKS5yZXBsYWNlKC9eXFxzKy8sXCJcIikucmVwbGFjZSgvXFxzKyQvLFwiXCIpKX1yZXR1cm4gY30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxlKXtpZihlKXtpZih2b2lkIDAhPT1hLmNsYXNzTmFtZSlpZihhLmNsYXNzTmFtZT09PWUpYS5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTtlbHNle3ZhciBkPWEuY2xhc3NOYW1lLnNwbGl0KC8gKy8pLGY9ZC5pbmRleE9mKGUpOy0xIT1cbmYmJihkLnNwbGljZShmLDEpLGEuY2xhc3NOYW1lPWQuam9pbihcIiBcIikpfX1lbHNlIGEuY2xhc3NOYW1lPXZvaWQgMDtyZXR1cm4gY30saGFzQ2xhc3M6ZnVuY3Rpb24oYSxjKXtyZXR1cm4obmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiK2MrXCIoPzpcXFxccyt8JClcIikpLnRlc3QoYS5jbGFzc05hbWUpfHwhMX0sZ2V0V2lkdGg6ZnVuY3Rpb24oYil7Yj1nZXRDb21wdXRlZFN0eWxlKGIpO3JldHVybiBhKGJbXCJib3JkZXItbGVmdC13aWR0aFwiXSkrYShiW1wiYm9yZGVyLXJpZ2h0LXdpZHRoXCJdKSthKGJbXCJwYWRkaW5nLWxlZnRcIl0pK2EoYltcInBhZGRpbmctcmlnaHRcIl0pK2EoYi53aWR0aCl9LGdldEhlaWdodDpmdW5jdGlvbihiKXtiPWdldENvbXB1dGVkU3R5bGUoYik7cmV0dXJuIGEoYltcImJvcmRlci10b3Atd2lkdGhcIl0pK2EoYltcImJvcmRlci1ib3R0b20td2lkdGhcIl0pK2EoYltcInBhZGRpbmctdG9wXCJdKSthKGJbXCJwYWRkaW5nLWJvdHRvbVwiXSkrYShiLmhlaWdodCl9LGdldE9mZnNldDpmdW5jdGlvbihhKXt2YXIgYz1cbntsZWZ0OjAsdG9wOjB9O2lmKGEub2Zmc2V0UGFyZW50KXtkbyBjLmxlZnQrPWEub2Zmc2V0TGVmdCxjLnRvcCs9YS5vZmZzZXRUb3A7d2hpbGUoYT1hLm9mZnNldFBhcmVudCl9cmV0dXJuIGN9LGlzQWN0aXZlOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmKGEudHlwZXx8YS5ocmVmKX19O3JldHVybiBjfShkYXQudXRpbHMuY29tbW9uKTtcbmRhdC5jb250cm9sbGVycy5PcHRpb25Db250cm9sbGVyPWZ1bmN0aW9uKGYsYSxkKXt2YXIgZT1mdW5jdGlvbihjLGIsZil7ZS5zdXBlcmNsYXNzLmNhbGwodGhpcyxjLGIpO3ZhciBxPXRoaXM7dGhpcy5fX3NlbGVjdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO2lmKGQuaXNBcnJheShmKSl7dmFyIGw9e307ZC5lYWNoKGYsZnVuY3Rpb24oYSl7bFthXT1hfSk7Zj1sfWQuZWFjaChmLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtjLmlubmVySFRNTD1iO2Muc2V0QXR0cmlidXRlKFwidmFsdWVcIixhKTtxLl9fc2VsZWN0LmFwcGVuZENoaWxkKGMpfSk7dGhpcy51cGRhdGVEaXNwbGF5KCk7YS5iaW5kKHRoaXMuX19zZWxlY3QsXCJjaGFuZ2VcIixmdW5jdGlvbigpe3Euc2V0VmFsdWUodGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0udmFsdWUpfSk7dGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX19zZWxlY3QpfTtcbmUuc3VwZXJjbGFzcz1mO2QuZXh0ZW5kKGUucHJvdG90eXBlLGYucHJvdG90eXBlLHtzZXRWYWx1ZTpmdW5jdGlvbihhKXthPWUuc3VwZXJjbGFzcy5wcm90b3R5cGUuc2V0VmFsdWUuY2FsbCh0aGlzLGEpO3RoaXMuX19vbkZpbmlzaENoYW5nZSYmdGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwodGhpcyx0aGlzLmdldFZhbHVlKCkpO3JldHVybiBhfSx1cGRhdGVEaXNwbGF5OmZ1bmN0aW9uKCl7dGhpcy5fX3NlbGVjdC52YWx1ZT10aGlzLmdldFZhbHVlKCk7cmV0dXJuIGUuc3VwZXJjbGFzcy5wcm90b3R5cGUudXBkYXRlRGlzcGxheS5jYWxsKHRoaXMpfX0pO3JldHVybiBlfShkYXQuY29udHJvbGxlcnMuQ29udHJvbGxlcixkYXQuZG9tLmRvbSxkYXQudXRpbHMuY29tbW9uKTtcbmRhdC5jb250cm9sbGVycy5OdW1iZXJDb250cm9sbGVyPWZ1bmN0aW9uKGYsYSl7ZnVuY3Rpb24gZChhKXthPWEudG9TdHJpbmcoKTtyZXR1cm4tMTxhLmluZGV4T2YoXCIuXCIpP2EubGVuZ3RoLWEuaW5kZXhPZihcIi5cIiktMTowfXZhciBlPWZ1bmN0aW9uKGMsYixmKXtlLnN1cGVyY2xhc3MuY2FsbCh0aGlzLGMsYik7Zj1mfHx7fTt0aGlzLl9fbWluPWYubWluO3RoaXMuX19tYXg9Zi5tYXg7dGhpcy5fX3N0ZXA9Zi5zdGVwO2EuaXNVbmRlZmluZWQodGhpcy5fX3N0ZXApP3RoaXMuX19pbXBsaWVkU3RlcD0wPT10aGlzLmluaXRpYWxWYWx1ZT8xOk1hdGgucG93KDEwLE1hdGguZmxvb3IoTWF0aC5sb2coTWF0aC5hYnModGhpcy5pbml0aWFsVmFsdWUpKS9NYXRoLkxOMTApKS8xMDp0aGlzLl9faW1wbGllZFN0ZXA9dGhpcy5fX3N0ZXA7dGhpcy5fX3ByZWNpc2lvbj1kKHRoaXMuX19pbXBsaWVkU3RlcCl9O2Uuc3VwZXJjbGFzcz1mO2EuZXh0ZW5kKGUucHJvdG90eXBlLGYucHJvdG90eXBlLFxue3NldFZhbHVlOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PXRoaXMuX19taW4mJmE8dGhpcy5fX21pbj9hPXRoaXMuX19taW46dm9pZCAwIT09dGhpcy5fX21heCYmYT50aGlzLl9fbWF4JiYoYT10aGlzLl9fbWF4KTt2b2lkIDAhPT10aGlzLl9fc3RlcCYmMCE9YSV0aGlzLl9fc3RlcCYmKGE9TWF0aC5yb3VuZChhL3RoaXMuX19zdGVwKSp0aGlzLl9fc3RlcCk7cmV0dXJuIGUuc3VwZXJjbGFzcy5wcm90b3R5cGUuc2V0VmFsdWUuY2FsbCh0aGlzLGEpfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy5fX21pbj1hO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy5fX21heD1hO3JldHVybiB0aGlzfSxzdGVwOmZ1bmN0aW9uKGEpe3RoaXMuX19pbXBsaWVkU3RlcD10aGlzLl9fc3RlcD1hO3RoaXMuX19wcmVjaXNpb249ZChhKTtyZXR1cm4gdGhpc319KTtyZXR1cm4gZX0oZGF0LmNvbnRyb2xsZXJzLkNvbnRyb2xsZXIsZGF0LnV0aWxzLmNvbW1vbik7XG5kYXQuY29udHJvbGxlcnMuTnVtYmVyQ29udHJvbGxlckJveD1mdW5jdGlvbihmLGEsZCl7dmFyIGU9ZnVuY3Rpb24oYyxiLGYpe2Z1bmN0aW9uIHEoKXt2YXIgYT1wYXJzZUZsb2F0KG4uX19pbnB1dC52YWx1ZSk7ZC5pc05hTihhKXx8bi5zZXRWYWx1ZShhKX1mdW5jdGlvbiBsKGEpe3ZhciBiPXUtYS5jbGllbnRZO24uc2V0VmFsdWUobi5nZXRWYWx1ZSgpK2Iqbi5fX2ltcGxpZWRTdGVwKTt1PWEuY2xpZW50WX1mdW5jdGlvbiByKCl7YS51bmJpbmQod2luZG93LFwibW91c2Vtb3ZlXCIsbCk7YS51bmJpbmQod2luZG93LFwibW91c2V1cFwiLHIpfXRoaXMuX190cnVuY2F0aW9uU3VzcGVuZGVkPSExO2Uuc3VwZXJjbGFzcy5jYWxsKHRoaXMsYyxiLGYpO3ZhciBuPXRoaXMsdTt0aGlzLl9faW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO3RoaXMuX19pbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0XCIpO2EuYmluZCh0aGlzLl9faW5wdXQsXCJjaGFuZ2VcIixxKTthLmJpbmQodGhpcy5fX2lucHV0LFxuXCJibHVyXCIsZnVuY3Rpb24oKXtxKCk7bi5fX29uRmluaXNoQ2hhbmdlJiZuLl9fb25GaW5pc2hDaGFuZ2UuY2FsbChuLG4uZ2V0VmFsdWUoKSl9KTthLmJpbmQodGhpcy5fX2lucHV0LFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7YS5iaW5kKHdpbmRvdyxcIm1vdXNlbW92ZVwiLGwpO2EuYmluZCh3aW5kb3csXCJtb3VzZXVwXCIscik7dT1iLmNsaWVudFl9KTthLmJpbmQodGhpcy5fX2lucHV0LFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpezEzPT09YS5rZXlDb2RlJiYobi5fX3RydW5jYXRpb25TdXNwZW5kZWQ9ITAsdGhpcy5ibHVyKCksbi5fX3RydW5jYXRpb25TdXNwZW5kZWQ9ITEpfSk7dGhpcy51cGRhdGVEaXNwbGF5KCk7dGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX19pbnB1dCl9O2Uuc3VwZXJjbGFzcz1mO2QuZXh0ZW5kKGUucHJvdG90eXBlLGYucHJvdG90eXBlLHt1cGRhdGVEaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fX2lucHV0LGI7aWYodGhpcy5fX3RydW5jYXRpb25TdXNwZW5kZWQpYj1cbnRoaXMuZ2V0VmFsdWUoKTtlbHNle2I9dGhpcy5nZXRWYWx1ZSgpO3ZhciBkPU1hdGgucG93KDEwLHRoaXMuX19wcmVjaXNpb24pO2I9TWF0aC5yb3VuZChiKmQpL2R9YS52YWx1ZT1iO3JldHVybiBlLnN1cGVyY2xhc3MucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkuY2FsbCh0aGlzKX19KTtyZXR1cm4gZX0oZGF0LmNvbnRyb2xsZXJzLk51bWJlckNvbnRyb2xsZXIsZGF0LmRvbS5kb20sZGF0LnV0aWxzLmNvbW1vbik7XG5kYXQuY29udHJvbGxlcnMuTnVtYmVyQ29udHJvbGxlclNsaWRlcj1mdW5jdGlvbihmLGEsZCxlLGMpe2Z1bmN0aW9uIGIoYSxiLGMsZSxkKXtyZXR1cm4gZSsoYS1iKS8oYy1iKSooZC1lKX12YXIgcD1mdW5jdGlvbihjLGUsZCxmLHUpe2Z1bmN0aW9uIEEoYyl7Yy5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPWEuZ2V0T2Zmc2V0KGsuX19iYWNrZ3JvdW5kKSxkPWEuZ2V0V2lkdGgoay5fX2JhY2tncm91bmQpO2suc2V0VmFsdWUoYihjLmNsaWVudFgsZS5sZWZ0LGUubGVmdCtkLGsuX19taW4say5fX21heCkpO3JldHVybiExfWZ1bmN0aW9uIGcoKXthLnVuYmluZCh3aW5kb3csXCJtb3VzZW1vdmVcIixBKTthLnVuYmluZCh3aW5kb3csXCJtb3VzZXVwXCIsZyk7ay5fX29uRmluaXNoQ2hhbmdlJiZrLl9fb25GaW5pc2hDaGFuZ2UuY2FsbChrLGsuZ2V0VmFsdWUoKSl9cC5zdXBlcmNsYXNzLmNhbGwodGhpcyxjLGUse21pbjpkLG1heDpmLHN0ZXA6dX0pO3ZhciBrPXRoaXM7dGhpcy5fX2JhY2tncm91bmQ9XG5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RoaXMuX19mb3JlZ3JvdW5kPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5iaW5kKHRoaXMuX19iYWNrZ3JvdW5kLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7YS5iaW5kKHdpbmRvdyxcIm1vdXNlbW92ZVwiLEEpO2EuYmluZCh3aW5kb3csXCJtb3VzZXVwXCIsZyk7QShiKX0pO2EuYWRkQ2xhc3ModGhpcy5fX2JhY2tncm91bmQsXCJzbGlkZXJcIik7YS5hZGRDbGFzcyh0aGlzLl9fZm9yZWdyb3VuZCxcInNsaWRlci1mZ1wiKTt0aGlzLnVwZGF0ZURpc3BsYXkoKTt0aGlzLl9fYmFja2dyb3VuZC5hcHBlbmRDaGlsZCh0aGlzLl9fZm9yZWdyb3VuZCk7dGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX19iYWNrZ3JvdW5kKX07cC5zdXBlcmNsYXNzPWY7cC51c2VEZWZhdWx0U3R5bGVzPWZ1bmN0aW9uKCl7ZC5pbmplY3QoYyl9O2UuZXh0ZW5kKHAucHJvdG90eXBlLGYucHJvdG90eXBlLHt1cGRhdGVEaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIGE9XG4odGhpcy5nZXRWYWx1ZSgpLXRoaXMuX19taW4pLyh0aGlzLl9fbWF4LXRoaXMuX19taW4pO3RoaXMuX19mb3JlZ3JvdW5kLnN0eWxlLndpZHRoPTEwMCphK1wiJVwiO3JldHVybiBwLnN1cGVyY2xhc3MucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkuY2FsbCh0aGlzKX19KTtyZXR1cm4gcH0oZGF0LmNvbnRyb2xsZXJzLk51bWJlckNvbnRyb2xsZXIsZGF0LmRvbS5kb20sZGF0LnV0aWxzLmNzcyxkYXQudXRpbHMuY29tbW9uLFwiLyoqXFxuICogZGF0LWd1aSBKYXZhU2NyaXB0IENvbnRyb2xsZXIgTGlicmFyeVxcbiAqIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9kYXQtZ3VpXFxuICpcXG4gKiBDb3B5cmlnaHQgMjAxMSBEYXRhIEFydHMgVGVhbSwgR29vZ2xlIENyZWF0aXZlIExhYlxcbiAqXFxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFxcXCJMaWNlbnNlXFxcIik7XFxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxcbiAqXFxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICovXFxuXFxuLnNsaWRlciB7XFxuICBib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjE1KTtcXG4gIGhlaWdodDogMWVtO1xcbiAgYm9yZGVyLXJhZGl1czogMWVtO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXG4gIHBhZGRpbmc6IDAgMC41ZW07XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbn1cXG5cXG4uc2xpZGVyLWZnIHtcXG4gIHBhZGRpbmc6IDFweCAwIDJweCAwO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2FhYTtcXG4gIGhlaWdodDogMWVtO1xcbiAgbWFyZ2luLWxlZnQ6IC0wLjVlbTtcXG4gIHBhZGRpbmctcmlnaHQ6IDAuNWVtO1xcbiAgYm9yZGVyLXJhZGl1czogMWVtIDAgMCAxZW07XFxufVxcblxcbi5zbGlkZXItZmc6YWZ0ZXIge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYm9yZGVyLXJhZGl1czogMWVtO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGJvcmRlcjogIDFweCBzb2xpZCAjYWFhO1xcbiAgY29udGVudDogJyc7XFxuICBmbG9hdDogcmlnaHQ7XFxuICBtYXJnaW4tcmlnaHQ6IC0xZW07XFxuICBtYXJnaW4tdG9wOiAtMXB4O1xcbiAgaGVpZ2h0OiAwLjllbTtcXG4gIHdpZHRoOiAwLjllbTtcXG59XCIpO1xuZGF0LmNvbnRyb2xsZXJzLkZ1bmN0aW9uQ29udHJvbGxlcj1mdW5jdGlvbihmLGEsZCl7dmFyIGU9ZnVuY3Rpb24oYyxiLGQpe2Uuc3VwZXJjbGFzcy5jYWxsKHRoaXMsYyxiKTt2YXIgZj10aGlzO3RoaXMuX19idXR0b249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0aGlzLl9fYnV0dG9uLmlubmVySFRNTD12b2lkIDA9PT1kP1wiRmlyZVwiOmQ7YS5iaW5kKHRoaXMuX19idXR0b24sXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtmLmZpcmUoKTtyZXR1cm4hMX0pO2EuYWRkQ2xhc3ModGhpcy5fX2J1dHRvbixcImJ1dHRvblwiKTt0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX2J1dHRvbil9O2Uuc3VwZXJjbGFzcz1mO2QuZXh0ZW5kKGUucHJvdG90eXBlLGYucHJvdG90eXBlLHtmaXJlOmZ1bmN0aW9uKCl7dGhpcy5fX29uQ2hhbmdlJiZ0aGlzLl9fb25DaGFuZ2UuY2FsbCh0aGlzKTt0aGlzLmdldFZhbHVlKCkuY2FsbCh0aGlzLm9iamVjdCk7XG50aGlzLl9fb25GaW5pc2hDaGFuZ2UmJnRoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKHRoaXMsdGhpcy5nZXRWYWx1ZSgpKX19KTtyZXR1cm4gZX0oZGF0LmNvbnRyb2xsZXJzLkNvbnRyb2xsZXIsZGF0LmRvbS5kb20sZGF0LnV0aWxzLmNvbW1vbik7XG5kYXQuY29udHJvbGxlcnMuQm9vbGVhbkNvbnRyb2xsZXI9ZnVuY3Rpb24oZixhLGQpe3ZhciBlPWZ1bmN0aW9uKGMsYil7ZS5zdXBlcmNsYXNzLmNhbGwodGhpcyxjLGIpO3ZhciBkPXRoaXM7dGhpcy5fX3ByZXY9dGhpcy5nZXRWYWx1ZSgpO3RoaXMuX19jaGVja2JveD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7dGhpcy5fX2NoZWNrYm94LnNldEF0dHJpYnV0ZShcInR5cGVcIixcImNoZWNrYm94XCIpO2EuYmluZCh0aGlzLl9fY2hlY2tib3gsXCJjaGFuZ2VcIixmdW5jdGlvbigpe2Quc2V0VmFsdWUoIWQuX19wcmV2KX0sITEpO3RoaXMuZG9tRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9fY2hlY2tib3gpO3RoaXMudXBkYXRlRGlzcGxheSgpfTtlLnN1cGVyY2xhc3M9ZjtkLmV4dGVuZChlLnByb3RvdHlwZSxmLnByb3RvdHlwZSx7c2V0VmFsdWU6ZnVuY3Rpb24oYSl7YT1lLnN1cGVyY2xhc3MucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcyxhKTt0aGlzLl9fb25GaW5pc2hDaGFuZ2UmJlxudGhpcy5fX29uRmluaXNoQ2hhbmdlLmNhbGwodGhpcyx0aGlzLmdldFZhbHVlKCkpO3RoaXMuX19wcmV2PXRoaXMuZ2V0VmFsdWUoKTtyZXR1cm4gYX0sdXBkYXRlRGlzcGxheTpmdW5jdGlvbigpeyEwPT09dGhpcy5nZXRWYWx1ZSgpPyh0aGlzLl9fY2hlY2tib3guc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSx0aGlzLl9fY2hlY2tib3guY2hlY2tlZD0hMCk6dGhpcy5fX2NoZWNrYm94LmNoZWNrZWQ9ITE7cmV0dXJuIGUuc3VwZXJjbGFzcy5wcm90b3R5cGUudXBkYXRlRGlzcGxheS5jYWxsKHRoaXMpfX0pO3JldHVybiBlfShkYXQuY29udHJvbGxlcnMuQ29udHJvbGxlcixkYXQuZG9tLmRvbSxkYXQudXRpbHMuY29tbW9uKTtcbmRhdC5jb2xvci50b1N0cmluZz1mdW5jdGlvbihmKXtyZXR1cm4gZnVuY3Rpb24oYSl7aWYoMT09YS5hfHxmLmlzVW5kZWZpbmVkKGEuYSkpe2ZvcihhPWEuaGV4LnRvU3RyaW5nKDE2KTs2PmEubGVuZ3RoOylhPVwiMFwiK2E7cmV0dXJuXCIjXCIrYX1yZXR1cm5cInJnYmEoXCIrTWF0aC5yb3VuZChhLnIpK1wiLFwiK01hdGgucm91bmQoYS5nKStcIixcIitNYXRoLnJvdW5kKGEuYikrXCIsXCIrYS5hK1wiKVwifX0oZGF0LnV0aWxzLmNvbW1vbik7XG5kYXQuY29sb3IuaW50ZXJwcmV0PWZ1bmN0aW9uKGYsYSl7dmFyIGQsZSxjPVt7bGl0bXVzOmEuaXNTdHJpbmcsY29udmVyc2lvbnM6e1RIUkVFX0NIQVJfSEVYOntyZWFkOmZ1bmN0aW9uKGEpe2E9YS5tYXRjaCgvXiMoW0EtRjAtOV0pKFtBLUYwLTldKShbQS1GMC05XSkkL2kpO3JldHVybiBudWxsPT09YT8hMTp7c3BhY2U6XCJIRVhcIixoZXg6cGFyc2VJbnQoXCIweFwiK2FbMV0udG9TdHJpbmcoKSthWzFdLnRvU3RyaW5nKCkrYVsyXS50b1N0cmluZygpK2FbMl0udG9TdHJpbmcoKSthWzNdLnRvU3RyaW5nKCkrYVszXS50b1N0cmluZygpKX19LHdyaXRlOmZ9LFNJWF9DSEFSX0hFWDp7cmVhZDpmdW5jdGlvbihhKXthPWEubWF0Y2goL14jKFtBLUYwLTldezZ9KSQvaSk7cmV0dXJuIG51bGw9PT1hPyExOntzcGFjZTpcIkhFWFwiLGhleDpwYXJzZUludChcIjB4XCIrYVsxXS50b1N0cmluZygpKX19LHdyaXRlOmZ9LENTU19SR0I6e3JlYWQ6ZnVuY3Rpb24oYSl7YT1hLm1hdGNoKC9ecmdiXFwoXFxzKiguKylcXHMqLFxccyooLispXFxzKixcXHMqKC4rKVxccypcXCkvKTtcbnJldHVybiBudWxsPT09YT8hMTp7c3BhY2U6XCJSR0JcIixyOnBhcnNlRmxvYXQoYVsxXSksZzpwYXJzZUZsb2F0KGFbMl0pLGI6cGFyc2VGbG9hdChhWzNdKX19LHdyaXRlOmZ9LENTU19SR0JBOntyZWFkOmZ1bmN0aW9uKGEpe2E9YS5tYXRjaCgvXnJnYmFcXChcXHMqKC4rKVxccyosXFxzKiguKylcXHMqLFxccyooLispXFxzKlxcLFxccyooLispXFxzKlxcKS8pO3JldHVybiBudWxsPT09YT8hMTp7c3BhY2U6XCJSR0JcIixyOnBhcnNlRmxvYXQoYVsxXSksZzpwYXJzZUZsb2F0KGFbMl0pLGI6cGFyc2VGbG9hdChhWzNdKSxhOnBhcnNlRmxvYXQoYVs0XSl9fSx3cml0ZTpmfX19LHtsaXRtdXM6YS5pc051bWJlcixjb252ZXJzaW9uczp7SEVYOntyZWFkOmZ1bmN0aW9uKGEpe3JldHVybntzcGFjZTpcIkhFWFwiLGhleDphLGNvbnZlcnNpb25OYW1lOlwiSEVYXCJ9fSx3cml0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5oZXh9fX19LHtsaXRtdXM6YS5pc0FycmF5LGNvbnZlcnNpb25zOntSR0JfQVJSQVk6e3JlYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIDMhPVxuYS5sZW5ndGg/ITE6e3NwYWNlOlwiUkdCXCIscjphWzBdLGc6YVsxXSxiOmFbMl19fSx3cml0ZTpmdW5jdGlvbihhKXtyZXR1cm5bYS5yLGEuZyxhLmJdfX0sUkdCQV9BUlJBWTp7cmVhZDpmdW5jdGlvbihhKXtyZXR1cm4gNCE9YS5sZW5ndGg/ITE6e3NwYWNlOlwiUkdCXCIscjphWzBdLGc6YVsxXSxiOmFbMl0sYTphWzNdfX0sd3JpdGU6ZnVuY3Rpb24oYSl7cmV0dXJuW2EucixhLmcsYS5iLGEuYV19fX19LHtsaXRtdXM6YS5pc09iamVjdCxjb252ZXJzaW9uczp7UkdCQV9PQko6e3JlYWQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaXNOdW1iZXIoYi5yKSYmYS5pc051bWJlcihiLmcpJiZhLmlzTnVtYmVyKGIuYikmJmEuaXNOdW1iZXIoYi5hKT97c3BhY2U6XCJSR0JcIixyOmIucixnOmIuZyxiOmIuYixhOmIuYX06ITF9LHdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybntyOmEucixnOmEuZyxiOmEuYixhOmEuYX19fSxSR0JfT0JKOntyZWFkOmZ1bmN0aW9uKGIpe3JldHVybiBhLmlzTnVtYmVyKGIucikmJlxuYS5pc051bWJlcihiLmcpJiZhLmlzTnVtYmVyKGIuYik/e3NwYWNlOlwiUkdCXCIscjpiLnIsZzpiLmcsYjpiLmJ9OiExfSx3cml0ZTpmdW5jdGlvbihhKXtyZXR1cm57cjphLnIsZzphLmcsYjphLmJ9fX0sSFNWQV9PQko6e3JlYWQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaXNOdW1iZXIoYi5oKSYmYS5pc051bWJlcihiLnMpJiZhLmlzTnVtYmVyKGIudikmJmEuaXNOdW1iZXIoYi5hKT97c3BhY2U6XCJIU1ZcIixoOmIuaCxzOmIucyx2OmIudixhOmIuYX06ITF9LHdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybntoOmEuaCxzOmEucyx2OmEudixhOmEuYX19fSxIU1ZfT0JKOntyZWFkOmZ1bmN0aW9uKGIpe3JldHVybiBhLmlzTnVtYmVyKGIuaCkmJmEuaXNOdW1iZXIoYi5zKSYmYS5pc051bWJlcihiLnYpP3tzcGFjZTpcIkhTVlwiLGg6Yi5oLHM6Yi5zLHY6Yi52fTohMX0sd3JpdGU6ZnVuY3Rpb24oYSl7cmV0dXJue2g6YS5oLHM6YS5zLHY6YS52fX19fX1dO3JldHVybiBmdW5jdGlvbigpe2U9ITE7XG52YXIgYj0xPGFyZ3VtZW50cy5sZW5ndGg/YS50b0FycmF5KGFyZ3VtZW50cyk6YXJndW1lbnRzWzBdO2EuZWFjaChjLGZ1bmN0aW9uKGMpe2lmKGMubGl0bXVzKGIpKXJldHVybiBhLmVhY2goYy5jb252ZXJzaW9ucyxmdW5jdGlvbihjLGYpe2Q9Yy5yZWFkKGIpO2lmKCExPT09ZSYmITEhPT1kKXJldHVybiBlPWQsZC5jb252ZXJzaW9uTmFtZT1mLGQuY29udmVyc2lvbj1jLGEuQlJFQUt9KSxhLkJSRUFLfSk7cmV0dXJuIGV9fShkYXQuY29sb3IudG9TdHJpbmcsZGF0LnV0aWxzLmNvbW1vbik7XG5kYXQuR1VJPWRhdC5ndWkuR1VJPWZ1bmN0aW9uKGYsYSxkLGUsYyxiLHAscSxsLHIsbix1LEEsZyxrKXtmdW5jdGlvbiB2KGEsYixoLGQpe2lmKHZvaWQgMD09PWJbaF0pdGhyb3cgRXJyb3IoXCJPYmplY3QgXCIrYisnIGhhcyBubyBwcm9wZXJ0eSBcIicraCsnXCInKTtkLmNvbG9yP2I9bmV3IG4oYixoKTooYj1bYixoXS5jb25jYXQoZC5mYWN0b3J5QXJncyksYj1lLmFwcGx5KGEsYikpO2QuYmVmb3JlIGluc3RhbmNlb2YgYyYmKGQuYmVmb3JlPWQuYmVmb3JlLl9fbGkpO3koYSxiKTtnLmFkZENsYXNzKGIuZG9tRWxlbWVudCxcImNcIik7aD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtnLmFkZENsYXNzKGgsXCJwcm9wZXJ0eS1uYW1lXCIpO2guaW5uZXJIVE1MPWIucHJvcGVydHk7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmLmFwcGVuZENoaWxkKGgpO2YuYXBwZW5kQ2hpbGQoYi5kb21FbGVtZW50KTtkPXcoYSxmLGQuYmVmb3JlKTtnLmFkZENsYXNzKGQsbS5DTEFTU19DT05UUk9MTEVSX1JPVyk7XG5nLmFkZENsYXNzKGQsdHlwZW9mIGIuZ2V0VmFsdWUoKSk7dChhLGQsYik7YS5fX2NvbnRyb2xsZXJzLnB1c2goYik7cmV0dXJuIGJ9ZnVuY3Rpb24gdyhhLGIsaCl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO2ImJmMuYXBwZW5kQ2hpbGQoYik7aD9hLl9fdWwuaW5zZXJ0QmVmb3JlKGMscGFyYW1zLmJlZm9yZSk6YS5fX3VsLmFwcGVuZENoaWxkKGMpO2Eub25SZXNpemUoKTtyZXR1cm4gY31mdW5jdGlvbiB0KGEsYyxoKXtoLl9fbGk9YztoLl9fZ3VpPWE7ay5leHRlbmQoaCx7b3B0aW9uczpmdW5jdGlvbihiKXtpZigxPGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGgucmVtb3ZlKCksdihhLGgub2JqZWN0LGgucHJvcGVydHkse2JlZm9yZTpoLl9fbGkubmV4dEVsZW1lbnRTaWJsaW5nLGZhY3RvcnlBcmdzOltrLnRvQXJyYXkoYXJndW1lbnRzKV19KTtpZihrLmlzQXJyYXkoYil8fGsuaXNPYmplY3QoYikpcmV0dXJuIGgucmVtb3ZlKCksdihhLGgub2JqZWN0LGgucHJvcGVydHksXG57YmVmb3JlOmguX19saS5uZXh0RWxlbWVudFNpYmxpbmcsZmFjdG9yeUFyZ3M6W2JdfSl9LG5hbWU6ZnVuY3Rpb24oYSl7aC5fX2xpLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTD1hO3JldHVybiBofSxsaXN0ZW46ZnVuY3Rpb24oKXtoLl9fZ3VpLmxpc3RlbihoKTtyZXR1cm4gaH0scmVtb3ZlOmZ1bmN0aW9uKCl7aC5fX2d1aS5yZW1vdmUoaCk7cmV0dXJuIGh9fSk7aWYoaCBpbnN0YW5jZW9mIGwpe3ZhciBkPW5ldyBxKGgub2JqZWN0LGgucHJvcGVydHkse21pbjpoLl9fbWluLG1heDpoLl9fbWF4LHN0ZXA6aC5fX3N0ZXB9KTtrLmVhY2goW1widXBkYXRlRGlzcGxheVwiLFwib25DaGFuZ2VcIixcIm9uRmluaXNoQ2hhbmdlXCJdLGZ1bmN0aW9uKGEpe3ZhciBLPWhbYV0sYj1kW2FdO2hbYV09ZFthXT1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7Sy5hcHBseShoLGEpO3JldHVybiBiLmFwcGx5KGQsYSl9fSk7XG5nLmFkZENsYXNzKGMsXCJoYXMtc2xpZGVyXCIpO2guZG9tRWxlbWVudC5pbnNlcnRCZWZvcmUoZC5kb21FbGVtZW50LGguZG9tRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCl9ZWxzZSBpZihoIGluc3RhbmNlb2YgcSl7dmFyIGU9ZnVuY3Rpb24oYil7cmV0dXJuIGsuaXNOdW1iZXIoaC5fX21pbikmJmsuaXNOdW1iZXIoaC5fX21heCk/KGgucmVtb3ZlKCksdihhLGgub2JqZWN0LGgucHJvcGVydHkse2JlZm9yZTpoLl9fbGkubmV4dEVsZW1lbnRTaWJsaW5nLGZhY3RvcnlBcmdzOltoLl9fbWluLGguX19tYXgsaC5fX3N0ZXBdfSkpOmJ9O2gubWluPWsuY29tcG9zZShlLGgubWluKTtoLm1heD1rLmNvbXBvc2UoZSxoLm1heCl9ZWxzZSBoIGluc3RhbmNlb2YgYj8oZy5iaW5kKGMsXCJjbGlja1wiLGZ1bmN0aW9uKCl7Zy5mYWtlRXZlbnQoaC5fX2NoZWNrYm94LFwiY2xpY2tcIil9KSxnLmJpbmQoaC5fX2NoZWNrYm94LFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSkpOlxuaCBpbnN0YW5jZW9mIHA/KGcuYmluZChjLFwiY2xpY2tcIixmdW5jdGlvbigpe2cuZmFrZUV2ZW50KGguX19idXR0b24sXCJjbGlja1wiKX0pLGcuYmluZChjLFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXtnLmFkZENsYXNzKGguX19idXR0b24sXCJob3ZlclwiKX0pLGcuYmluZChjLFwibW91c2VvdXRcIixmdW5jdGlvbigpe2cucmVtb3ZlQ2xhc3MoaC5fX2J1dHRvbixcImhvdmVyXCIpfSkpOmggaW5zdGFuY2VvZiBuJiYoZy5hZGRDbGFzcyhjLFwiY29sb3JcIiksaC51cGRhdGVEaXNwbGF5PWsuY29tcG9zZShmdW5jdGlvbihhKXtjLnN0eWxlLmJvcmRlckxlZnRDb2xvcj1oLl9fY29sb3IudG9TdHJpbmcoKTtyZXR1cm4gYX0saC51cGRhdGVEaXNwbGF5KSxoLnVwZGF0ZURpc3BsYXkoKSk7aC5zZXRWYWx1ZT1rLmNvbXBvc2UoZnVuY3Rpb24oYil7YS5nZXRSb290KCkuX19wcmVzZXRfc2VsZWN0JiZoLmlzTW9kaWZpZWQoKSYmRShhLmdldFJvb3QoKSwhMCk7cmV0dXJuIGJ9LGguc2V0VmFsdWUpfWZ1bmN0aW9uIHkoYSxcbmIpe3ZhciBjPWEuZ2V0Um9vdCgpLGQ9Yy5fX3JlbWVtYmVyZWRPYmplY3RzLmluZGV4T2YoYi5vYmplY3QpO2lmKC0xIT1kKXt2YXIgZT1jLl9fcmVtZW1iZXJlZE9iamVjdEluZGVjZXNUb0NvbnRyb2xsZXJzW2RdO3ZvaWQgMD09PWUmJihlPXt9LGMuX19yZW1lbWJlcmVkT2JqZWN0SW5kZWNlc1RvQ29udHJvbGxlcnNbZF09ZSk7ZVtiLnByb3BlcnR5XT1iO2lmKGMubG9hZCYmYy5sb2FkLnJlbWVtYmVyZWQpe2M9Yy5sb2FkLnJlbWVtYmVyZWQ7aWYoY1thLnByZXNldF0pYz1jW2EucHJlc2V0XTtlbHNlIGlmKGMuRGVmYXVsdCljPWMuRGVmYXVsdDtlbHNlIHJldHVybjtjW2RdJiZ2b2lkIDAhPT1jW2RdW2IucHJvcGVydHldJiYoZD1jW2RdW2IucHJvcGVydHldLGIuaW5pdGlhbFZhbHVlPWQsYi5zZXRWYWx1ZShkKSl9fX1mdW5jdGlvbiBMKGEpe3ZhciBiPWEuX19zYXZlX3Jvdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7Zy5hZGRDbGFzcyhhLmRvbUVsZW1lbnQsXCJoYXMtc2F2ZVwiKTtcbmEuX191bC5pbnNlcnRCZWZvcmUoYixhLl9fdWwuZmlyc3RDaGlsZCk7Zy5hZGRDbGFzcyhiLFwic2F2ZS1yb3dcIik7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7Yy5pbm5lckhUTUw9XCImbmJzcDtcIjtnLmFkZENsYXNzKGMsXCJidXR0b24gZ2VhcnNcIik7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ZC5pbm5lckhUTUw9XCJTYXZlXCI7Zy5hZGRDbGFzcyhkLFwiYnV0dG9uXCIpO2cuYWRkQ2xhc3MoZCxcInNhdmVcIik7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ZS5pbm5lckhUTUw9XCJOZXdcIjtnLmFkZENsYXNzKGUsXCJidXR0b25cIik7Zy5hZGRDbGFzcyhlLFwic2F2ZS1hc1wiKTt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtmLmlubmVySFRNTD1cIlJldmVydFwiO2cuYWRkQ2xhc3MoZixcImJ1dHRvblwiKTtnLmFkZENsYXNzKGYsXCJyZXZlcnRcIik7dmFyIHI9YS5fX3ByZXNldF9zZWxlY3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbmEubG9hZCYmYS5sb2FkLnJlbWVtYmVyZWQ/ay5lYWNoKGEubG9hZC5yZW1lbWJlcmVkLGZ1bmN0aW9uKGIsYyl7RihhLGMsYz09YS5wcmVzZXQpfSk6RihhLFwiRGVmYXVsdFwiLCExKTtnLmJpbmQocixcImNoYW5nZVwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBiPTA7YjxhLl9fcHJlc2V0X3NlbGVjdC5sZW5ndGg7YisrKWEuX19wcmVzZXRfc2VsZWN0W2JdLmlubmVySFRNTD1hLl9fcHJlc2V0X3NlbGVjdFtiXS52YWx1ZTthLnByZXNldD10aGlzLnZhbHVlfSk7Yi5hcHBlbmRDaGlsZChyKTtiLmFwcGVuZENoaWxkKGMpO2IuYXBwZW5kQ2hpbGQoZCk7Yi5hcHBlbmRDaGlsZChlKTtiLmFwcGVuZENoaWxkKGYpO2lmKHgpe3ZhciBuPWZ1bmN0aW9uKCl7dS5zdHlsZS5kaXNwbGF5PWEudXNlTG9jYWxTdG9yYWdlP1wiYmxvY2tcIjpcIm5vbmVcIn0sYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRnLXNhdmUtbG9jYWxseVwiKSx1PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGctbG9jYWwtZXhwbGFpblwiKTtcbmIuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7Yj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRnLWxvY2FsLXN0b3JhZ2VcIik7XCJ0cnVlXCI9PT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShkb2N1bWVudC5sb2NhdGlvbi5ocmVmK1wiLmlzTG9jYWxcIikmJmIuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKTtuKCk7Zy5iaW5kKGIsXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EudXNlTG9jYWxTdG9yYWdlPSFhLnVzZUxvY2FsU3RvcmFnZTtuKCl9KX12YXIgbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRnLW5ldy1jb25zdHJ1Y3RvclwiKTtnLmJpbmQobSxcImtleWRvd25cIixmdW5jdGlvbihhKXshYS5tZXRhS2V5fHw2NyE9PWEud2hpY2gmJjY3IT1hLmtleUNvZGV8fEIuaGlkZSgpfSk7Zy5iaW5kKGMsXCJjbGlja1wiLGZ1bmN0aW9uKCl7bS5pbm5lckhUTUw9SlNPTi5zdHJpbmdpZnkoYS5nZXRTYXZlT2JqZWN0KCksdm9pZCAwLDIpO0Iuc2hvdygpO20uZm9jdXMoKTttLnNlbGVjdCgpfSk7Zy5iaW5kKGQsXG5cImNsaWNrXCIsZnVuY3Rpb24oKXthLnNhdmUoKX0pO2cuYmluZChlLFwiY2xpY2tcIixmdW5jdGlvbigpe3ZhciBiPXByb21wdChcIkVudGVyIGEgbmV3IHByZXNldCBuYW1lLlwiKTtiJiZhLnNhdmVBcyhiKX0pO2cuYmluZChmLFwiY2xpY2tcIixmdW5jdGlvbigpe2EucmV2ZXJ0KCl9KX1mdW5jdGlvbiBNKGEpe2Z1bmN0aW9uIGIoZil7Zi5wcmV2ZW50RGVmYXVsdCgpO2U9Zi5jbGllbnRYO2cuYWRkQ2xhc3MoYS5fX2Nsb3NlQnV0dG9uLG0uQ0xBU1NfRFJBRyk7Zy5iaW5kKHdpbmRvdyxcIm1vdXNlbW92ZVwiLGMpO2cuYmluZCh3aW5kb3csXCJtb3VzZXVwXCIsZCk7cmV0dXJuITF9ZnVuY3Rpb24gYyhiKXtiLnByZXZlbnREZWZhdWx0KCk7YS53aWR0aCs9ZS1iLmNsaWVudFg7YS5vblJlc2l6ZSgpO2U9Yi5jbGllbnRYO3JldHVybiExfWZ1bmN0aW9uIGQoKXtnLnJlbW92ZUNsYXNzKGEuX19jbG9zZUJ1dHRvbixtLkNMQVNTX0RSQUcpO2cudW5iaW5kKHdpbmRvdyxcIm1vdXNlbW92ZVwiLGMpO2cudW5iaW5kKHdpbmRvdyxcblwibW91c2V1cFwiLGQpfWEuX19yZXNpemVfaGFuZGxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ay5leHRlbmQoYS5fX3Jlc2l6ZV9oYW5kbGUuc3R5bGUse3dpZHRoOlwiNnB4XCIsbWFyZ2luTGVmdDpcIi0zcHhcIixoZWlnaHQ6XCIyMDBweFwiLGN1cnNvcjpcImV3LXJlc2l6ZVwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIn0pO3ZhciBlO2cuYmluZChhLl9fcmVzaXplX2hhbmRsZSxcIm1vdXNlZG93blwiLGIpO2cuYmluZChhLl9fY2xvc2VCdXR0b24sXCJtb3VzZWRvd25cIixiKTthLmRvbUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGEuX19yZXNpemVfaGFuZGxlLGEuZG9tRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCl9ZnVuY3Rpb24gRyhhLGIpe2EuZG9tRWxlbWVudC5zdHlsZS53aWR0aD1iK1wicHhcIjthLl9fc2F2ZV9yb3cmJmEuYXV0b1BsYWNlJiYoYS5fX3NhdmVfcm93LnN0eWxlLndpZHRoPWIrXCJweFwiKTthLl9fY2xvc2VCdXR0b24mJihhLl9fY2xvc2VCdXR0b24uc3R5bGUud2lkdGg9YitcInB4XCIpfVxuZnVuY3Rpb24gQyhhLGIpe3ZhciBjPXt9O2suZWFjaChhLl9fcmVtZW1iZXJlZE9iamVjdHMsZnVuY3Rpb24oZCxlKXt2YXIgZj17fTtrLmVhY2goYS5fX3JlbWVtYmVyZWRPYmplY3RJbmRlY2VzVG9Db250cm9sbGVyc1tlXSxmdW5jdGlvbihhLGMpe2ZbY109Yj9hLmluaXRpYWxWYWx1ZTphLmdldFZhbHVlKCl9KTtjW2VdPWZ9KTtyZXR1cm4gY31mdW5jdGlvbiBGKGEsYixjKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO2QuaW5uZXJIVE1MPWI7ZC52YWx1ZT1iO2EuX19wcmVzZXRfc2VsZWN0LmFwcGVuZENoaWxkKGQpO2MmJihhLl9fcHJlc2V0X3NlbGVjdC5zZWxlY3RlZEluZGV4PWEuX19wcmVzZXRfc2VsZWN0Lmxlbmd0aC0xKX1mdW5jdGlvbiBFKGEsYil7dmFyIGM9YS5fX3ByZXNldF9zZWxlY3RbYS5fX3ByZXNldF9zZWxlY3Quc2VsZWN0ZWRJbmRleF07Yy5pbm5lckhUTUw9Yj9jLnZhbHVlK1wiKlwiOmMudmFsdWV9ZnVuY3Rpb24gSChhKXswIT1hLmxlbmd0aCYmXG51KGZ1bmN0aW9uKCl7SChhKX0pO2suZWFjaChhLGZ1bmN0aW9uKGEpe2EudXBkYXRlRGlzcGxheSgpfSl9Zi5pbmplY3QoZCk7dmFyIHg7dHJ5e3g9XCJsb2NhbFN0b3JhZ2VcImluIHdpbmRvdyYmbnVsbCE9PXdpbmRvdy5sb2NhbFN0b3JhZ2V9Y2F0Y2goTil7eD0hMX12YXIgQixJPSEwLHosRD0hMSxKPVtdLG09ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBhPWMuZ2V0Um9vdCgpO2Eud2lkdGgrPTE7ay5kZWZlcihmdW5jdGlvbigpey0tYS53aWR0aH0pfXZhciBjPXRoaXM7dGhpcy5kb21FbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5fX3VsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTt0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX3VsKTtnLmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCxcImRnXCIpO3RoaXMuX19mb2xkZXJzPXt9O3RoaXMuX19jb250cm9sbGVycz1bXTt0aGlzLl9fcmVtZW1iZXJlZE9iamVjdHM9W107dGhpcy5fX3JlbWVtYmVyZWRPYmplY3RJbmRlY2VzVG9Db250cm9sbGVycz1cbltdO3RoaXMuX19saXN0ZW5pbmc9W107YT1hfHx7fTthPWsuZGVmYXVsdHMoYSx7YXV0b1BsYWNlOiEwLHdpZHRoOm0uREVGQVVMVF9XSURUSH0pO2E9ay5kZWZhdWx0cyhhLHtyZXNpemFibGU6YS5hdXRvUGxhY2UsaGlkZWFibGU6YS5hdXRvUGxhY2V9KTtrLmlzVW5kZWZpbmVkKGEubG9hZCk/YS5sb2FkPXtwcmVzZXQ6XCJEZWZhdWx0XCJ9OmEucHJlc2V0JiYoYS5sb2FkLnByZXNldD1hLnByZXNldCk7ay5pc1VuZGVmaW5lZChhLnBhcmVudCkmJmEuaGlkZWFibGUmJkoucHVzaCh0aGlzKTthLnJlc2l6YWJsZT1rLmlzVW5kZWZpbmVkKGEucGFyZW50KSYmYS5yZXNpemFibGU7YS5hdXRvUGxhY2UmJmsuaXNVbmRlZmluZWQoYS5zY3JvbGxhYmxlKSYmKGEuc2Nyb2xsYWJsZT0hMCk7dmFyIGQ9eCYmXCJ0cnVlXCI9PT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShkb2N1bWVudC5sb2NhdGlvbi5ocmVmK1wiLmlzTG9jYWxcIiksZTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtwYXJlbnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBhLnBhcmVudH19LFxuc2Nyb2xsYWJsZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuc2Nyb2xsYWJsZX19LGF1dG9QbGFjZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuYXV0b1BsYWNlfX0scHJlc2V0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5wYXJlbnQ/Yy5nZXRSb290KCkucHJlc2V0OmEubG9hZC5wcmVzZXR9LHNldDpmdW5jdGlvbihiKXtjLnBhcmVudD9jLmdldFJvb3QoKS5wcmVzZXQ9YjphLmxvYWQucHJlc2V0PWI7Zm9yKGI9MDtiPHRoaXMuX19wcmVzZXRfc2VsZWN0Lmxlbmd0aDtiKyspdGhpcy5fX3ByZXNldF9zZWxlY3RbYl0udmFsdWU9PXRoaXMucHJlc2V0JiYodGhpcy5fX3ByZXNldF9zZWxlY3Quc2VsZWN0ZWRJbmRleD1iKTtjLnJldmVydCgpfX0sd2lkdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiBhLndpZHRofSxzZXQ6ZnVuY3Rpb24oYil7YS53aWR0aD1iO0coYyxiKX19LG5hbWU6e2dldDpmdW5jdGlvbigpe3JldHVybiBhLm5hbWV9LHNldDpmdW5jdGlvbihiKXthLm5hbWU9XG5iO3ImJihyLmlubmVySFRNTD1hLm5hbWUpfX0sY2xvc2VkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5jbG9zZWR9LHNldDpmdW5jdGlvbihiKXthLmNsb3NlZD1iO2EuY2xvc2VkP2cuYWRkQ2xhc3MoYy5fX3VsLG0uQ0xBU1NfQ0xPU0VEKTpnLnJlbW92ZUNsYXNzKGMuX191bCxtLkNMQVNTX0NMT1NFRCk7dGhpcy5vblJlc2l6ZSgpO2MuX19jbG9zZUJ1dHRvbiYmKGMuX19jbG9zZUJ1dHRvbi5pbm5lckhUTUw9Yj9tLlRFWFRfT1BFTjptLlRFWFRfQ0xPU0VEKX19LGxvYWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBhLmxvYWR9fSx1c2VMb2NhbFN0b3JhZ2U6e2dldDpmdW5jdGlvbigpe3JldHVybiBkfSxzZXQ6ZnVuY3Rpb24oYSl7eCYmKChkPWEpP2cuYmluZCh3aW5kb3csXCJ1bmxvYWRcIixlKTpnLnVuYmluZCh3aW5kb3csXCJ1bmxvYWRcIixlKSxsb2NhbFN0b3JhZ2Uuc2V0SXRlbShkb2N1bWVudC5sb2NhdGlvbi5ocmVmK1wiLmlzTG9jYWxcIixhKSl9fX0pO2lmKGsuaXNVbmRlZmluZWQoYS5wYXJlbnQpKXthLmNsb3NlZD1cbiExO2cuYWRkQ2xhc3ModGhpcy5kb21FbGVtZW50LG0uQ0xBU1NfTUFJTik7Zy5tYWtlU2VsZWN0YWJsZSh0aGlzLmRvbUVsZW1lbnQsITEpO2lmKHgmJmQpe2MudXNlTG9jYWxTdG9yYWdlPSEwO3ZhciBmPWxvY2FsU3RvcmFnZS5nZXRJdGVtKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYrXCIuZ3VpXCIpO2YmJihhLmxvYWQ9SlNPTi5wYXJzZShmKSl9dGhpcy5fX2Nsb3NlQnV0dG9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5fX2Nsb3NlQnV0dG9uLmlubmVySFRNTD1tLlRFWFRfQ0xPU0VEO2cuYWRkQ2xhc3ModGhpcy5fX2Nsb3NlQnV0dG9uLG0uQ0xBU1NfQ0xPU0VfQlVUVE9OKTt0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX2Nsb3NlQnV0dG9uKTtnLmJpbmQodGhpcy5fX2Nsb3NlQnV0dG9uLFwiY2xpY2tcIixmdW5jdGlvbigpe2MuY2xvc2VkPSFjLmNsb3NlZH0pfWVsc2V7dm9pZCAwPT09YS5jbG9zZWQmJihhLmNsb3NlZD0hMCk7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYS5uYW1lKTtcbmcuYWRkQ2xhc3MocixcImNvbnRyb2xsZXItbmFtZVwiKTtmPXcoYyxyKTtnLmFkZENsYXNzKHRoaXMuX191bCxtLkNMQVNTX0NMT1NFRCk7Zy5hZGRDbGFzcyhmLFwidGl0bGVcIik7Zy5iaW5kKGYsXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtjLmNsb3NlZD0hYy5jbG9zZWQ7cmV0dXJuITF9KTthLmNsb3NlZHx8KHRoaXMuY2xvc2VkPSExKX1hLmF1dG9QbGFjZSYmKGsuaXNVbmRlZmluZWQoYS5wYXJlbnQpJiYoSSYmKHo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxnLmFkZENsYXNzKHosXCJkZ1wiKSxnLmFkZENsYXNzKHosbS5DTEFTU19BVVRPX1BMQUNFX0NPTlRBSU5FUiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh6KSxJPSExKSx6LmFwcGVuZENoaWxkKHRoaXMuZG9tRWxlbWVudCksZy5hZGRDbGFzcyh0aGlzLmRvbUVsZW1lbnQsbS5DTEFTU19BVVRPX1BMQUNFKSksdGhpcy5wYXJlbnR8fEcoYyxhLndpZHRoKSk7Zy5iaW5kKHdpbmRvdyxcInJlc2l6ZVwiLFxuZnVuY3Rpb24oKXtjLm9uUmVzaXplKCl9KTtnLmJpbmQodGhpcy5fX3VsLFwid2Via2l0VHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7Yy5vblJlc2l6ZSgpfSk7Zy5iaW5kKHRoaXMuX191bCxcInRyYW5zaXRpb25lbmRcIixmdW5jdGlvbigpe2Mub25SZXNpemUoKX0pO2cuYmluZCh0aGlzLl9fdWwsXCJvVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7Yy5vblJlc2l6ZSgpfSk7dGhpcy5vblJlc2l6ZSgpO2EucmVzaXphYmxlJiZNKHRoaXMpO3RoaXMuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZT1lPWZ1bmN0aW9uKCl7eCYmXCJ0cnVlXCI9PT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShkb2N1bWVudC5sb2NhdGlvbi5ocmVmK1wiLmlzTG9jYWxcIikmJmxvY2FsU3RvcmFnZS5zZXRJdGVtKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYrXCIuZ3VpXCIsSlNPTi5zdHJpbmdpZnkoYy5nZXRTYXZlT2JqZWN0KCkpKX07Yy5nZXRSb290KCk7YS5wYXJlbnR8fGIoKX07bS50b2dnbGVIaWRlPWZ1bmN0aW9uKCl7RD1cbiFEO2suZWFjaChKLGZ1bmN0aW9uKGEpe2EuZG9tRWxlbWVudC5zdHlsZS56SW5kZXg9RD8tOTk5Ojk5OTthLmRvbUVsZW1lbnQuc3R5bGUub3BhY2l0eT1EPzA6MX0pfTttLkNMQVNTX0FVVE9fUExBQ0U9XCJhXCI7bS5DTEFTU19BVVRPX1BMQUNFX0NPTlRBSU5FUj1cImFjXCI7bS5DTEFTU19NQUlOPVwibWFpblwiO20uQ0xBU1NfQ09OVFJPTExFUl9ST1c9XCJjclwiO20uQ0xBU1NfVE9PX1RBTEw9XCJ0YWxsZXItdGhhbi13aW5kb3dcIjttLkNMQVNTX0NMT1NFRD1cImNsb3NlZFwiO20uQ0xBU1NfQ0xPU0VfQlVUVE9OPVwiY2xvc2UtYnV0dG9uXCI7bS5DTEFTU19EUkFHPVwiZHJhZ1wiO20uREVGQVVMVF9XSURUSD0yNDU7bS5URVhUX0NMT1NFRD1cIkNsb3NlIENvbnRyb2xzXCI7bS5URVhUX09QRU49XCJPcGVuIENvbnRyb2xzXCI7Zy5iaW5kKHdpbmRvdyxcImtleWRvd25cIixmdW5jdGlvbihhKXtcInRleHRcIj09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudHlwZXx8NzIhPT1hLndoaWNoJiY3MiE9YS5rZXlDb2RlfHxcbm0udG9nZ2xlSGlkZSgpfSwhMSk7ay5leHRlbmQobS5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpe3JldHVybiB2KHRoaXMsYSxiLHtmYWN0b3J5QXJnczpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMil9KX0sYWRkQ29sb3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdih0aGlzLGEsYix7Y29sb3I6ITB9KX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuX191bC5yZW1vdmVDaGlsZChhLl9fbGkpO3RoaXMuX19jb250cm9sbGVycy5zcGxpY2UodGhpcy5fX2NvbnRyb2xsZXJzLmluZGV4T2YoYSksMSk7dmFyIGI9dGhpcztrLmRlZmVyKGZ1bmN0aW9uKCl7Yi5vblJlc2l6ZSgpfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmF1dG9QbGFjZSYmei5yZW1vdmVDaGlsZCh0aGlzLmRvbUVsZW1lbnQpfSxhZGRGb2xkZXI6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09dGhpcy5fX2ZvbGRlcnNbYV0pdGhyb3cgRXJyb3IoJ1lvdSBhbHJlYWR5IGhhdmUgYSBmb2xkZXIgaW4gdGhpcyBHVUkgYnkgdGhlIG5hbWUgXCInK1xuYSsnXCInKTt2YXIgYj17bmFtZTphLHBhcmVudDp0aGlzfTtiLmF1dG9QbGFjZT10aGlzLmF1dG9QbGFjZTt0aGlzLmxvYWQmJnRoaXMubG9hZC5mb2xkZXJzJiZ0aGlzLmxvYWQuZm9sZGVyc1thXSYmKGIuY2xvc2VkPXRoaXMubG9hZC5mb2xkZXJzW2FdLmNsb3NlZCxiLmxvYWQ9dGhpcy5sb2FkLmZvbGRlcnNbYV0pO2I9bmV3IG0oYik7dGhpcy5fX2ZvbGRlcnNbYV09YjthPXcodGhpcyxiLmRvbUVsZW1lbnQpO2cuYWRkQ2xhc3MoYSxcImZvbGRlclwiKTtyZXR1cm4gYn0sb3BlbjpmdW5jdGlvbigpe3RoaXMuY2xvc2VkPSExfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkPSEwfSxvblJlc2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Um9vdCgpO2lmKGEuc2Nyb2xsYWJsZSl7dmFyIGI9Zy5nZXRPZmZzZXQoYS5fX3VsKS50b3AsYz0wO2suZWFjaChhLl9fdWwuY2hpbGROb2RlcyxmdW5jdGlvbihiKXthLmF1dG9QbGFjZSYmYj09PWEuX19zYXZlX3Jvd3x8KGMrPWcuZ2V0SGVpZ2h0KGIpKX0pO1xud2luZG93LmlubmVySGVpZ2h0LWItMjA8Yz8oZy5hZGRDbGFzcyhhLmRvbUVsZW1lbnQsbS5DTEFTU19UT09fVEFMTCksYS5fX3VsLnN0eWxlLmhlaWdodD13aW5kb3cuaW5uZXJIZWlnaHQtYi0yMCtcInB4XCIpOihnLnJlbW92ZUNsYXNzKGEuZG9tRWxlbWVudCxtLkNMQVNTX1RPT19UQUxMKSxhLl9fdWwuc3R5bGUuaGVpZ2h0PVwiYXV0b1wiKX1hLl9fcmVzaXplX2hhbmRsZSYmay5kZWZlcihmdW5jdGlvbigpe2EuX19yZXNpemVfaGFuZGxlLnN0eWxlLmhlaWdodD1hLl9fdWwub2Zmc2V0SGVpZ2h0K1wicHhcIn0pO2EuX19jbG9zZUJ1dHRvbiYmKGEuX19jbG9zZUJ1dHRvbi5zdHlsZS53aWR0aD1hLndpZHRoK1wicHhcIil9LHJlbWVtYmVyOmZ1bmN0aW9uKCl7ay5pc1VuZGVmaW5lZChCKSYmKEI9bmV3IEEsQi5kb21FbGVtZW50LmlubmVySFRNTD1hKTtpZih0aGlzLnBhcmVudCl0aHJvdyBFcnJvcihcIllvdSBjYW4gb25seSBjYWxsIHJlbWVtYmVyIG9uIGEgdG9wIGxldmVsIEdVSS5cIik7dmFyIGI9XG50aGlzO2suZWFjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGZ1bmN0aW9uKGEpezA9PWIuX19yZW1lbWJlcmVkT2JqZWN0cy5sZW5ndGgmJkwoYik7LTE9PWIuX19yZW1lbWJlcmVkT2JqZWN0cy5pbmRleE9mKGEpJiZiLl9fcmVtZW1iZXJlZE9iamVjdHMucHVzaChhKX0pO3RoaXMuYXV0b1BsYWNlJiZHKHRoaXMsdGhpcy53aWR0aCl9LGdldFJvb3Q6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpczthLnBhcmVudDspYT1hLnBhcmVudDtyZXR1cm4gYX0sZ2V0U2F2ZU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubG9hZDthLmNsb3NlZD10aGlzLmNsb3NlZDswPHRoaXMuX19yZW1lbWJlcmVkT2JqZWN0cy5sZW5ndGgmJihhLnByZXNldD10aGlzLnByZXNldCxhLnJlbWVtYmVyZWR8fChhLnJlbWVtYmVyZWQ9e30pLGEucmVtZW1iZXJlZFt0aGlzLnByZXNldF09Qyh0aGlzKSk7YS5mb2xkZXJzPXt9O2suZWFjaCh0aGlzLl9fZm9sZGVycyxmdW5jdGlvbihiLFxuYyl7YS5mb2xkZXJzW2NdPWIuZ2V0U2F2ZU9iamVjdCgpfSk7cmV0dXJuIGF9LHNhdmU6ZnVuY3Rpb24oKXt0aGlzLmxvYWQucmVtZW1iZXJlZHx8KHRoaXMubG9hZC5yZW1lbWJlcmVkPXt9KTt0aGlzLmxvYWQucmVtZW1iZXJlZFt0aGlzLnByZXNldF09Qyh0aGlzKTtFKHRoaXMsITEpO3RoaXMuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZSgpfSxzYXZlQXM6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkLnJlbWVtYmVyZWR8fCh0aGlzLmxvYWQucmVtZW1iZXJlZD17fSx0aGlzLmxvYWQucmVtZW1iZXJlZC5EZWZhdWx0PUModGhpcywhMCkpO3RoaXMubG9hZC5yZW1lbWJlcmVkW2FdPUModGhpcyk7dGhpcy5wcmVzZXQ9YTtGKHRoaXMsYSwhMCk7dGhpcy5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlKCl9LHJldmVydDpmdW5jdGlvbihhKXtrLmVhY2godGhpcy5fX2NvbnRyb2xsZXJzLGZ1bmN0aW9uKGIpe3RoaXMuZ2V0Um9vdCgpLmxvYWQucmVtZW1iZXJlZD95KGF8fHRoaXMuZ2V0Um9vdCgpLFxuYik6Yi5zZXRWYWx1ZShiLmluaXRpYWxWYWx1ZSl9LHRoaXMpO2suZWFjaCh0aGlzLl9fZm9sZGVycyxmdW5jdGlvbihhKXthLnJldmVydChhKX0pO2F8fEUodGhpcy5nZXRSb290KCksITEpfSxsaXN0ZW46ZnVuY3Rpb24oYSl7dmFyIGI9MD09dGhpcy5fX2xpc3RlbmluZy5sZW5ndGg7dGhpcy5fX2xpc3RlbmluZy5wdXNoKGEpO2ImJkgodGhpcy5fX2xpc3RlbmluZyl9fSk7cmV0dXJuIG19KGRhdC51dGlscy5jc3MsJzxkaXYgaWQ9XCJkZy1zYXZlXCIgY2xhc3M9XCJkZyBkaWFsb2d1ZVwiPlxcblxcbiAgSGVyZVxcJ3MgdGhlIG5ldyBsb2FkIHBhcmFtZXRlciBmb3IgeW91ciA8Y29kZT5HVUk8L2NvZGU+XFwncyBjb25zdHJ1Y3RvcjpcXG5cXG4gIDx0ZXh0YXJlYSBpZD1cImRnLW5ldy1jb25zdHJ1Y3RvclwiPjwvdGV4dGFyZWE+XFxuXFxuICA8ZGl2IGlkPVwiZGctc2F2ZS1sb2NhbGx5XCI+XFxuXFxuICAgIDxpbnB1dCBpZD1cImRnLWxvY2FsLXN0b3JhZ2VcIiB0eXBlPVwiY2hlY2tib3hcIi8+IEF1dG9tYXRpY2FsbHkgc2F2ZVxcbiAgICB2YWx1ZXMgdG8gPGNvZGU+bG9jYWxTdG9yYWdlPC9jb2RlPiBvbiBleGl0LlxcblxcbiAgICA8ZGl2IGlkPVwiZGctbG9jYWwtZXhwbGFpblwiPlRoZSB2YWx1ZXMgc2F2ZWQgdG8gPGNvZGU+bG9jYWxTdG9yYWdlPC9jb2RlPiB3aWxsXFxuICAgICAgb3ZlcnJpZGUgdGhvc2UgcGFzc2VkIHRvIDxjb2RlPmRhdC5HVUk8L2NvZGU+XFwncyBjb25zdHJ1Y3Rvci4gVGhpcyBtYWtlcyBpdFxcbiAgICAgIGVhc2llciB0byB3b3JrIGluY3JlbWVudGFsbHksIGJ1dCA8Y29kZT5sb2NhbFN0b3JhZ2U8L2NvZGU+IGlzIGZyYWdpbGUsXFxuICAgICAgYW5kIHlvdXIgZnJpZW5kcyBtYXkgbm90IHNlZSB0aGUgc2FtZSB2YWx1ZXMgeW91IGRvLlxcbiAgICAgIFxcbiAgICA8L2Rpdj5cXG4gICAgXFxuICA8L2Rpdj5cXG5cXG48L2Rpdj4nLFxuXCIuZGcge1xcbiAgLyoqIENsZWFyIGxpc3Qgc3R5bGVzICovXFxuICAvKiBBdXRvLXBsYWNlIGNvbnRhaW5lciAqL1xcbiAgLyogQXV0by1wbGFjZWQgR1VJJ3MgKi9cXG4gIC8qIExpbmUgaXRlbXMgdGhhdCBkb24ndCBjb250YWluIGZvbGRlcnMuICovXFxuICAvKiogRm9sZGVyIG5hbWVzICovXFxuICAvKiogSGlkZXMgY2xvc2VkIGl0ZW1zICovXFxuICAvKiogQ29udHJvbGxlciByb3cgKi9cXG4gIC8qKiBOYW1lLWhhbGYgKGxlZnQpICovXFxuICAvKiogQ29udHJvbGxlci1oYWxmIChyaWdodCkgKi9cXG4gIC8qKiBDb250cm9sbGVyIHBsYWNlbWVudCAqL1xcbiAgLyoqIFNob3J0ZXIgbnVtYmVyIGJveGVzIHdoZW4gc2xpZGVyIGlzIHByZXNlbnQuICovXFxuICAvKiogRW5zdXJlIHRoZSBlbnRpcmUgYm9vbGVhbiBhbmQgZnVuY3Rpb24gcm93IHNob3dzIGEgaGFuZCAqLyB9XFxuICAuZGcgdWwge1xcbiAgICBsaXN0LXN0eWxlOiBub25lO1xcbiAgICBtYXJnaW46IDA7XFxuICAgIHBhZGRpbmc6IDA7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBjbGVhcjogYm90aDsgfVxcbiAgLmRnLmFjIHtcXG4gICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICB0b3A6IDA7XFxuICAgIGxlZnQ6IDA7XFxuICAgIHJpZ2h0OiAwO1xcbiAgICBoZWlnaHQ6IDA7XFxuICAgIHotaW5kZXg6IDA7IH1cXG4gIC5kZzpub3QoLmFjKSAubWFpbiB7XFxuICAgIC8qKiBFeGNsdWRlIG1haW5zIGluIGFjIHNvIHRoYXQgd2UgZG9uJ3QgaGlkZSBjbG9zZSBidXR0b24gKi9cXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjsgfVxcbiAgLmRnLm1haW4ge1xcbiAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4xcyBsaW5lYXI7XFxuICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMC4xcyBsaW5lYXI7XFxuICAgIC1tb3otdHJhbnNpdGlvbjogb3BhY2l0eSAwLjFzIGxpbmVhcjtcXG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjFzIGxpbmVhcjsgfVxcbiAgICAuZGcubWFpbi50YWxsZXItdGhhbi13aW5kb3cge1xcbiAgICAgIG92ZXJmbG93LXk6IGF1dG87IH1cXG4gICAgICAuZGcubWFpbi50YWxsZXItdGhhbi13aW5kb3cgLmNsb3NlLWJ1dHRvbiB7XFxuICAgICAgICBvcGFjaXR5OiAxO1xcbiAgICAgICAgLyogVE9ETywgdGhlc2UgYXJlIHN0eWxlIG5vdGVzICovXFxuICAgICAgICBtYXJnaW4tdG9wOiAtMXB4O1xcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMyYzJjMmM7IH1cXG4gICAgLmRnLm1haW4gdWwuY2xvc2VkIC5jbG9zZS1idXR0b24ge1xcbiAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDsgfVxcbiAgICAuZGcubWFpbjpob3ZlciAuY2xvc2UtYnV0dG9uLFxcbiAgICAuZGcubWFpbiAuY2xvc2UtYnV0dG9uLmRyYWcge1xcbiAgICAgIG9wYWNpdHk6IDE7IH1cXG4gICAgLmRnLm1haW4gLmNsb3NlLWJ1dHRvbiB7XFxuICAgICAgLypvcGFjaXR5OiAwOyovXFxuICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMXMgbGluZWFyO1xcbiAgICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMC4xcyBsaW5lYXI7XFxuICAgICAgLW1vei10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMXMgbGluZWFyO1xcbiAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xcyBsaW5lYXI7XFxuICAgICAgYm9yZGVyOiAwO1xcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICBsaW5lLWhlaWdodDogMTlweDtcXG4gICAgICBoZWlnaHQ6IDIwcHg7XFxuICAgICAgLyogVE9ETywgdGhlc2UgYXJlIHN0eWxlIG5vdGVzICovXFxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB9XFxuICAgICAgLmRnLm1haW4gLmNsb3NlLWJ1dHRvbjpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExOyB9XFxuICAuZGcuYSB7XFxuICAgIGZsb2F0OiByaWdodDtcXG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xcbiAgICBvdmVyZmxvdy14OiBoaWRkZW47IH1cXG4gICAgLmRnLmEuaGFzLXNhdmUgPiB1bCB7XFxuICAgICAgbWFyZ2luLXRvcDogMjdweDsgfVxcbiAgICAgIC5kZy5hLmhhcy1zYXZlID4gdWwuY2xvc2VkIHtcXG4gICAgICAgIG1hcmdpbi10b3A6IDA7IH1cXG4gICAgLmRnLmEgLnNhdmUtcm93IHtcXG4gICAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgICAgdG9wOiAwO1xcbiAgICAgIHotaW5kZXg6IDEwMDI7IH1cXG4gIC5kZyBsaSB7XFxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogaGVpZ2h0IDAuMXMgZWFzZS1vdXQ7XFxuICAgIC1vLXRyYW5zaXRpb246IGhlaWdodCAwLjFzIGVhc2Utb3V0O1xcbiAgICAtbW96LXRyYW5zaXRpb246IGhlaWdodCAwLjFzIGVhc2Utb3V0O1xcbiAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMC4xcyBlYXNlLW91dDsgfVxcbiAgLmRnIGxpOm5vdCguZm9sZGVyKSB7XFxuICAgIGN1cnNvcjogYXV0bztcXG4gICAgaGVpZ2h0OiAyN3B4O1xcbiAgICBsaW5lLWhlaWdodDogMjdweDtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgcGFkZGluZzogMCA0cHggMCA1cHg7IH1cXG4gIC5kZyBsaS5mb2xkZXIge1xcbiAgICBwYWRkaW5nOiAwO1xcbiAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMCk7IH1cXG4gIC5kZyBsaS50aXRsZSB7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgbWFyZ2luLWxlZnQ6IC00cHg7IH1cXG4gIC5kZyAuY2xvc2VkIGxpOm5vdCgudGl0bGUpLFxcbiAgLmRnIC5jbG9zZWQgdWwgbGksXFxuICAuZGcgLmNsb3NlZCB1bCBsaSA+ICoge1xcbiAgICBoZWlnaHQ6IDA7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIGJvcmRlcjogMDsgfVxcbiAgLmRnIC5jciB7XFxuICAgIGNsZWFyOiBib3RoO1xcbiAgICBwYWRkaW5nLWxlZnQ6IDNweDtcXG4gICAgaGVpZ2h0OiAyN3B4OyB9XFxuICAuZGcgLnByb3BlcnR5LW5hbWUge1xcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XFxuICAgIGZsb2F0OiBsZWZ0O1xcbiAgICBjbGVhcjogbGVmdDtcXG4gICAgd2lkdGg6IDQwJTtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IH1cXG4gIC5kZyAuYyB7XFxuICAgIGZsb2F0OiBsZWZ0O1xcbiAgICB3aWR0aDogNjAlOyB9XFxuICAuZGcgLmMgaW5wdXRbdHlwZT10ZXh0XSB7XFxuICAgIGJvcmRlcjogMDtcXG4gICAgbWFyZ2luLXRvcDogNHB4O1xcbiAgICBwYWRkaW5nOiAzcHg7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBmbG9hdDogcmlnaHQ7IH1cXG4gIC5kZyAuaGFzLXNsaWRlciBpbnB1dFt0eXBlPXRleHRdIHtcXG4gICAgd2lkdGg6IDMwJTtcXG4gICAgLypkaXNwbGF5OiBub25lOyovXFxuICAgIG1hcmdpbi1sZWZ0OiAwOyB9XFxuICAuZGcgLnNsaWRlciB7XFxuICAgIGZsb2F0OiBsZWZ0O1xcbiAgICB3aWR0aDogNjYlO1xcbiAgICBtYXJnaW4tbGVmdDogLTVweDtcXG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xcbiAgICBoZWlnaHQ6IDE5cHg7XFxuICAgIG1hcmdpbi10b3A6IDRweDsgfVxcbiAgLmRnIC5zbGlkZXItZmcge1xcbiAgICBoZWlnaHQ6IDEwMCU7IH1cXG4gIC5kZyAuYyBpbnB1dFt0eXBlPWNoZWNrYm94XSB7XFxuICAgIG1hcmdpbi10b3A6IDlweDsgfVxcbiAgLmRnIC5jIHNlbGVjdCB7XFxuICAgIG1hcmdpbi10b3A6IDVweDsgfVxcbiAgLmRnIC5jci5mdW5jdGlvbixcXG4gIC5kZyAuY3IuZnVuY3Rpb24gLnByb3BlcnR5LW5hbWUsXFxuICAuZGcgLmNyLmZ1bmN0aW9uICosXFxuICAuZGcgLmNyLmJvb2xlYW4sXFxuICAuZGcgLmNyLmJvb2xlYW4gKiB7XFxuICAgIGN1cnNvcjogcG9pbnRlcjsgfVxcbiAgLmRnIC5zZWxlY3RvciB7XFxuICAgIGRpc3BsYXk6IG5vbmU7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgbWFyZ2luLWxlZnQ6IC05cHg7XFxuICAgIG1hcmdpbi10b3A6IDIzcHg7XFxuICAgIHotaW5kZXg6IDEwOyB9XFxuICAuZGcgLmM6aG92ZXIgLnNlbGVjdG9yLFxcbiAgLmRnIC5zZWxlY3Rvci5kcmFnIHtcXG4gICAgZGlzcGxheTogYmxvY2s7IH1cXG4gIC5kZyBsaS5zYXZlLXJvdyB7XFxuICAgIHBhZGRpbmc6IDA7IH1cXG4gICAgLmRnIGxpLnNhdmUtcm93IC5idXR0b24ge1xcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gICAgICBwYWRkaW5nOiAwcHggNnB4OyB9XFxuICAuZGcuZGlhbG9ndWUge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyO1xcbiAgICB3aWR0aDogNDYwcHg7XFxuICAgIHBhZGRpbmc6IDE1cHg7XFxuICAgIGZvbnQtc2l6ZTogMTNweDtcXG4gICAgbGluZS1oZWlnaHQ6IDE1cHg7IH1cXG5cXG4vKiBUT0RPIFNlcGFyYXRlIHN0eWxlIGFuZCBzdHJ1Y3R1cmUgKi9cXG4jZGctbmV3LWNvbnN0cnVjdG9yIHtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBjb2xvcjogIzIyMjtcXG4gIGZvbnQtZmFtaWx5OiBNb25hY28sIG1vbm9zcGFjZTtcXG4gIGZvbnQtc2l6ZTogMTBweDtcXG4gIGJvcmRlcjogMDtcXG4gIHJlc2l6ZTogbm9uZTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDFweCAxcHggMXB4ICM4ODg7XFxuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XFxuICBtYXJnaW46IDEycHggMDtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgd2lkdGg6IDQ0MHB4O1xcbiAgb3ZlcmZsb3cteTogc2Nyb2xsO1xcbiAgaGVpZ2h0OiAxMDBweDtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTsgfVxcblxcbiNkZy1sb2NhbC1leHBsYWluIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBmb250LXNpemU6IDExcHg7XFxuICBsaW5lLWhlaWdodDogMTdweDtcXG4gIGJvcmRlci1yYWRpdXM6IDNweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XFxuICBwYWRkaW5nOiA4cHg7XFxuICBtYXJnaW4tdG9wOiAxMHB4OyB9XFxuICAjZGctbG9jYWwtZXhwbGFpbiBjb2RlIHtcXG4gICAgZm9udC1zaXplOiAxMHB4OyB9XFxuXFxuI2RhdC1ndWktc2F2ZS1sb2NhbGx5IHtcXG4gIGRpc3BsYXk6IG5vbmU7IH1cXG5cXG4vKiogTWFpbiB0eXBlICovXFxuLmRnIHtcXG4gIGNvbG9yOiAjZWVlO1xcbiAgZm9udDogMTFweCAnTHVjaWRhIEdyYW5kZScsIHNhbnMtc2VyaWY7XFxuICB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgIzExMTtcXG4gIC8qKiBBdXRvIHBsYWNlICovXFxuICAvKiBDb250cm9sbGVyIHJvdywgPGxpPiAqL1xcbiAgLyoqIENvbnRyb2xsZXJzICovIH1cXG4gIC5kZy5tYWluIHtcXG4gICAgLyoqIFNjcm9sbGJhciAqLyB9XFxuICAgIC5kZy5tYWluOjotd2Via2l0LXNjcm9sbGJhciB7XFxuICAgICAgd2lkdGg6IDVweDtcXG4gICAgICBiYWNrZ3JvdW5kOiAjMWExYTFhOyB9XFxuICAgIC5kZy5tYWluOjotd2Via2l0LXNjcm9sbGJhci1jb3JuZXIge1xcbiAgICAgIGhlaWdodDogMDtcXG4gICAgICBkaXNwbGF5OiBub25lOyB9XFxuICAgIC5kZy5tYWluOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XFxuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xcbiAgICAgIGJhY2tncm91bmQ6ICM2NzY3Njc7IH1cXG4gIC5kZyBsaTpub3QoLmZvbGRlcikge1xcbiAgICBiYWNrZ3JvdW5kOiAjMWExYTFhO1xcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzJjMmMyYzsgfVxcbiAgLmRnIGxpLnNhdmUtcm93IHtcXG4gICAgbGluZS1oZWlnaHQ6IDI1cHg7XFxuICAgIGJhY2tncm91bmQ6ICNkYWQ1Y2I7XFxuICAgIGJvcmRlcjogMDsgfVxcbiAgICAuZGcgbGkuc2F2ZS1yb3cgc2VsZWN0IHtcXG4gICAgICBtYXJnaW4tbGVmdDogNXB4O1xcbiAgICAgIHdpZHRoOiAxMDhweDsgfVxcbiAgICAuZGcgbGkuc2F2ZS1yb3cgLmJ1dHRvbiB7XFxuICAgICAgbWFyZ2luLWxlZnQ6IDVweDtcXG4gICAgICBtYXJnaW4tdG9wOiAxcHg7XFxuICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgICAgIGZvbnQtc2l6ZTogOXB4O1xcbiAgICAgIGxpbmUtaGVpZ2h0OiA3cHg7XFxuICAgICAgcGFkZGluZzogNHB4IDRweCA1cHggNHB4O1xcbiAgICAgIGJhY2tncm91bmQ6ICNjNWJkYWQ7XFxuICAgICAgY29sb3I6ICNmZmY7XFxuICAgICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2IwYTU4ZjtcXG4gICAgICBib3gtc2hhZG93OiAwIC0xcHggMCAjYjBhNThmO1xcbiAgICAgIGN1cnNvcjogcG9pbnRlcjsgfVxcbiAgICAgIC5kZyBsaS5zYXZlLXJvdyAuYnV0dG9uLmdlYXJzIHtcXG4gICAgICAgIGJhY2tncm91bmQ6ICNjNWJkYWQgdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQXNBQUFBTkNBWUFBQUIvOVpRN0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBUUpKUkVGVWVOcGlZS0FVL1AvL1B3R0lDL0FwQ0FCaUJTQVcrSThBQ2xBY2dLeFE0VDlob01BRVVyeHgyUVNHTjYrZWdEWCsvdldUNGU3TjgyQU1Zb1BBeC9ldndXb1lvU1liQUNYMnM3S3hDeHpjc2V6RGgzZXZGb0RFQllURUVxeWNnZ1dBekE5QXVVU1FRZ2VZUGE5ZlB2Ni9ZV20vQWN4NUlQYjd0eS9mdytRWmJsdzY3dkRzOFIwWUh5UWhnT2J4K3lBSmtCcW1HNWRQUERoMWFQT0dSL2V1Z1cwRzR2bElvVElmeUZjQStRZWtoaEhKaFBkUXhiaUFJZ3VNQlRRWnJQRDcxMDhNNnJvV1lERlFpSUFBdjZBb3cvMWJGd1hnaXMrZjJMVUF5bndvSWFOY3o4WE54M0RsN01FSlVER1FweDlndFE4WUN1ZUIrRDI2T0VDQUFRRGFkdDdlNDZENDJRQUFBQUJKUlU1RXJrSmdnZz09KSAycHggMXB4IG5vLXJlcGVhdDtcXG4gICAgICAgIGhlaWdodDogN3B4O1xcbiAgICAgICAgd2lkdGg6IDhweDsgfVxcbiAgICAgIC5kZyBsaS5zYXZlLXJvdyAuYnV0dG9uOmhvdmVyIHtcXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNiYWIxOWU7XFxuICAgICAgICBib3gtc2hhZG93OiAwIC0xcHggMCAjYjBhNThmOyB9XFxuICAuZGcgbGkuZm9sZGVyIHtcXG4gICAgYm9yZGVyLWJvdHRvbTogMDsgfVxcbiAgLmRnIGxpLnRpdGxlIHtcXG4gICAgcGFkZGluZy1sZWZ0OiAxNnB4O1xcbiAgICBiYWNrZ3JvdW5kOiBibGFjayB1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQlFBRkFKRUFBUC8vLy9QejgvLy8vLy8vL3lINUJBRUFBQUlBTEFBQUFBQUZBQVVBQUFJSWxJK2hLZ0Z4b0NnQU93PT0pIDZweCAxMHB4IG5vLXJlcGVhdDtcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOyB9XFxuICAuZGcgLmNsb3NlZCBsaS50aXRsZSB7XFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhCUUFGQUpFQUFQLy8vL1B6OC8vLy8vLy8veUg1QkFFQUFBSUFMQUFBQUFBRkFBVUFBQUlJbEdJV3FNQ2JXQUVBT3c9PSk7IH1cXG4gIC5kZyAuY3IuYm9vbGVhbiB7XFxuICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzgwNjc4NzsgfVxcbiAgLmRnIC5jci5mdW5jdGlvbiB7XFxuICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2U2MWQ1ZjsgfVxcbiAgLmRnIC5jci5udW1iZXIge1xcbiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkICMyZmExZDY7IH1cXG4gICAgLmRnIC5jci5udW1iZXIgaW5wdXRbdHlwZT10ZXh0XSB7XFxuICAgICAgY29sb3I6ICMyZmExZDY7IH1cXG4gIC5kZyAuY3Iuc3RyaW5nIHtcXG4gICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjMWVkMzZmOyB9XFxuICAgIC5kZyAuY3Iuc3RyaW5nIGlucHV0W3R5cGU9dGV4dF0ge1xcbiAgICAgIGNvbG9yOiAjMWVkMzZmOyB9XFxuICAuZGcgLmNyLmZ1bmN0aW9uOmhvdmVyLCAuZGcgLmNyLmJvb2xlYW46aG92ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjMTExOyB9XFxuICAuZGcgLmMgaW5wdXRbdHlwZT10ZXh0XSB7XFxuICAgIGJhY2tncm91bmQ6ICMzMDMwMzA7XFxuICAgIG91dGxpbmU6IG5vbmU7IH1cXG4gICAgLmRnIC5jIGlucHV0W3R5cGU9dGV4dF06aG92ZXIge1xcbiAgICAgIGJhY2tncm91bmQ6ICMzYzNjM2M7IH1cXG4gICAgLmRnIC5jIGlucHV0W3R5cGU9dGV4dF06Zm9jdXMge1xcbiAgICAgIGJhY2tncm91bmQ6ICM0OTQ5NDk7XFxuICAgICAgY29sb3I6ICNmZmY7IH1cXG4gIC5kZyAuYyAuc2xpZGVyIHtcXG4gICAgYmFja2dyb3VuZDogIzMwMzAzMDtcXG4gICAgY3Vyc29yOiBldy1yZXNpemU7IH1cXG4gIC5kZyAuYyAuc2xpZGVyLWZnIHtcXG4gICAgYmFja2dyb3VuZDogIzJmYTFkNjsgfVxcbiAgLmRnIC5jIC5zbGlkZXI6aG92ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjM2MzYzNjOyB9XFxuICAgIC5kZyAuYyAuc2xpZGVyOmhvdmVyIC5zbGlkZXItZmcge1xcbiAgICAgIGJhY2tncm91bmQ6ICM0NGFiZGE7IH1cXG5cIixcbmRhdC5jb250cm9sbGVycy5mYWN0b3J5PWZ1bmN0aW9uKGYsYSxkLGUsYyxiLHApe3JldHVybiBmdW5jdGlvbihxLGwscixuKXt2YXIgdT1xW2xdO2lmKHAuaXNBcnJheShyKXx8cC5pc09iamVjdChyKSlyZXR1cm4gbmV3IGYocSxsLHIpO2lmKHAuaXNOdW1iZXIodSkpcmV0dXJuIHAuaXNOdW1iZXIocikmJnAuaXNOdW1iZXIobik/bmV3IGQocSxsLHIsbik6bmV3IGEocSxsLHttaW46cixtYXg6bn0pO2lmKHAuaXNTdHJpbmcodSkpcmV0dXJuIG5ldyBlKHEsbCk7aWYocC5pc0Z1bmN0aW9uKHUpKXJldHVybiBuZXcgYyhxLGwsXCJcIik7aWYocC5pc0Jvb2xlYW4odSkpcmV0dXJuIG5ldyBiKHEsbCl9fShkYXQuY29udHJvbGxlcnMuT3B0aW9uQ29udHJvbGxlcixkYXQuY29udHJvbGxlcnMuTnVtYmVyQ29udHJvbGxlckJveCxkYXQuY29udHJvbGxlcnMuTnVtYmVyQ29udHJvbGxlclNsaWRlcixkYXQuY29udHJvbGxlcnMuU3RyaW5nQ29udHJvbGxlcj1mdW5jdGlvbihmLGEsZCl7dmFyIGU9XG5mdW5jdGlvbihjLGIpe2Z1bmN0aW9uIGQoKXtmLnNldFZhbHVlKGYuX19pbnB1dC52YWx1ZSl9ZS5zdXBlcmNsYXNzLmNhbGwodGhpcyxjLGIpO3ZhciBmPXRoaXM7dGhpcy5fX2lucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTt0aGlzLl9faW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dFwiKTthLmJpbmQodGhpcy5fX2lucHV0LFwia2V5dXBcIixkKTthLmJpbmQodGhpcy5fX2lucHV0LFwiY2hhbmdlXCIsZCk7YS5iaW5kKHRoaXMuX19pbnB1dCxcImJsdXJcIixmdW5jdGlvbigpe2YuX19vbkZpbmlzaENoYW5nZSYmZi5fX29uRmluaXNoQ2hhbmdlLmNhbGwoZixmLmdldFZhbHVlKCkpfSk7YS5iaW5kKHRoaXMuX19pbnB1dCxcImtleWRvd25cIixmdW5jdGlvbihhKXsxMz09PWEua2V5Q29kZSYmdGhpcy5ibHVyKCl9KTt0aGlzLnVwZGF0ZURpc3BsYXkoKTt0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX2lucHV0KX07ZS5zdXBlcmNsYXNzPWY7ZC5leHRlbmQoZS5wcm90b3R5cGUsXG5mLnByb3RvdHlwZSx7dXBkYXRlRGlzcGxheTpmdW5jdGlvbigpe2EuaXNBY3RpdmUodGhpcy5fX2lucHV0KXx8KHRoaXMuX19pbnB1dC52YWx1ZT10aGlzLmdldFZhbHVlKCkpO3JldHVybiBlLnN1cGVyY2xhc3MucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkuY2FsbCh0aGlzKX19KTtyZXR1cm4gZX0oZGF0LmNvbnRyb2xsZXJzLkNvbnRyb2xsZXIsZGF0LmRvbS5kb20sZGF0LnV0aWxzLmNvbW1vbiksZGF0LmNvbnRyb2xsZXJzLkZ1bmN0aW9uQ29udHJvbGxlcixkYXQuY29udHJvbGxlcnMuQm9vbGVhbkNvbnRyb2xsZXIsZGF0LnV0aWxzLmNvbW1vbiksZGF0LmNvbnRyb2xsZXJzLkNvbnRyb2xsZXIsZGF0LmNvbnRyb2xsZXJzLkJvb2xlYW5Db250cm9sbGVyLGRhdC5jb250cm9sbGVycy5GdW5jdGlvbkNvbnRyb2xsZXIsZGF0LmNvbnRyb2xsZXJzLk51bWJlckNvbnRyb2xsZXJCb3gsZGF0LmNvbnRyb2xsZXJzLk51bWJlckNvbnRyb2xsZXJTbGlkZXIsZGF0LmNvbnRyb2xsZXJzLk9wdGlvbkNvbnRyb2xsZXIsXG5kYXQuY29udHJvbGxlcnMuQ29sb3JDb250cm9sbGVyPWZ1bmN0aW9uKGYsYSxkLGUsYyl7ZnVuY3Rpb24gYihhLGIsZCxlKXthLnN0eWxlLmJhY2tncm91bmQ9XCJcIjtjLmVhY2gobCxmdW5jdGlvbihjKXthLnN0eWxlLmNzc1RleHQrPVwiYmFja2dyb3VuZDogXCIrYytcImxpbmVhci1ncmFkaWVudChcIitiK1wiLCBcIitkK1wiIDAlLCBcIitlK1wiIDEwMCUpOyBcIn0pfWZ1bmN0aW9uIHAoYSl7YS5zdHlsZS5iYWNrZ3JvdW5kPVwiXCI7YS5zdHlsZS5jc3NUZXh0Kz1cImJhY2tncm91bmQ6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgICNmZjAwMDAgMCUsICNmZjAwZmYgMTclLCAjMDAwMGZmIDM0JSwgIzAwZmZmZiA1MCUsICMwMGZmMDAgNjclLCAjZmZmZjAwIDg0JSwgI2ZmMDAwMCAxMDAlKTtcIjthLnN0eWxlLmNzc1RleHQrPVwiYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpO1wiO1xuYS5zdHlsZS5jc3NUZXh0Kz1cImJhY2tncm91bmQ6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICAjZmYwMDAwIDAlLCNmZjAwZmYgMTclLCMwMDAwZmYgMzQlLCMwMGZmZmYgNTAlLCMwMGZmMDAgNjclLCNmZmZmMDAgODQlLCNmZjAwMDAgMTAwJSk7XCI7YS5zdHlsZS5jc3NUZXh0Kz1cImJhY2tncm91bmQ6IC1tcy1saW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpO1wiO2Euc3R5bGUuY3NzVGV4dCs9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpO1wifXZhciBxPWZ1bmN0aW9uKGYsbil7ZnVuY3Rpb24gdShiKXt2KGIpO2EuYmluZCh3aW5kb3csXCJtb3VzZW1vdmVcIix2KTthLmJpbmQod2luZG93LFxuXCJtb3VzZXVwXCIsbCl9ZnVuY3Rpb24gbCgpe2EudW5iaW5kKHdpbmRvdyxcIm1vdXNlbW92ZVwiLHYpO2EudW5iaW5kKHdpbmRvdyxcIm1vdXNldXBcIixsKX1mdW5jdGlvbiBnKCl7dmFyIGE9ZSh0aGlzLnZhbHVlKTshMSE9PWE/KHQuX19jb2xvci5fX3N0YXRlPWEsdC5zZXRWYWx1ZSh0Ll9fY29sb3IudG9PcmlnaW5hbCgpKSk6dGhpcy52YWx1ZT10Ll9fY29sb3IudG9TdHJpbmcoKX1mdW5jdGlvbiBrKCl7YS51bmJpbmQod2luZG93LFwibW91c2Vtb3ZlXCIsdyk7YS51bmJpbmQod2luZG93LFwibW91c2V1cFwiLGspfWZ1bmN0aW9uIHYoYil7Yi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPWEuZ2V0V2lkdGgodC5fX3NhdHVyYXRpb25fZmllbGQpLGQ9YS5nZXRPZmZzZXQodC5fX3NhdHVyYXRpb25fZmllbGQpLGU9KGIuY2xpZW50WC1kLmxlZnQrZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0KS9jO2I9MS0oYi5jbGllbnRZLWQudG9wK2RvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKS9jOzE8Yj9iPTE6MD5cbmImJihiPTApOzE8ZT9lPTE6MD5lJiYoZT0wKTt0Ll9fY29sb3Iudj1iO3QuX19jb2xvci5zPWU7dC5zZXRWYWx1ZSh0Ll9fY29sb3IudG9PcmlnaW5hbCgpKTtyZXR1cm4hMX1mdW5jdGlvbiB3KGIpe2IucHJldmVudERlZmF1bHQoKTt2YXIgYz1hLmdldEhlaWdodCh0Ll9faHVlX2ZpZWxkKSxkPWEuZ2V0T2Zmc2V0KHQuX19odWVfZmllbGQpO2I9MS0oYi5jbGllbnRZLWQudG9wK2RvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKS9jOzE8Yj9iPTE6MD5iJiYoYj0wKTt0Ll9fY29sb3IuaD0zNjAqYjt0LnNldFZhbHVlKHQuX19jb2xvci50b09yaWdpbmFsKCkpO3JldHVybiExfXEuc3VwZXJjbGFzcy5jYWxsKHRoaXMsZixuKTt0aGlzLl9fY29sb3I9bmV3IGQodGhpcy5nZXRWYWx1ZSgpKTt0aGlzLl9fdGVtcD1uZXcgZCgwKTt2YXIgdD10aGlzO3RoaXMuZG9tRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EubWFrZVNlbGVjdGFibGUodGhpcy5kb21FbGVtZW50LCExKTtcbnRoaXMuX19zZWxlY3Rvcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RoaXMuX19zZWxlY3Rvci5jbGFzc05hbWU9XCJzZWxlY3RvclwiO3RoaXMuX19zYXR1cmF0aW9uX2ZpZWxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5fX3NhdHVyYXRpb25fZmllbGQuY2xhc3NOYW1lPVwic2F0dXJhdGlvbi1maWVsZFwiO3RoaXMuX19maWVsZF9rbm9iPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5fX2ZpZWxkX2tub2IuY2xhc3NOYW1lPVwiZmllbGQta25vYlwiO3RoaXMuX19maWVsZF9rbm9iX2JvcmRlcj1cIjJweCBzb2xpZCBcIjt0aGlzLl9faHVlX2tub2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0aGlzLl9faHVlX2tub2IuY2xhc3NOYW1lPVwiaHVlLWtub2JcIjt0aGlzLl9faHVlX2ZpZWxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5fX2h1ZV9maWVsZC5jbGFzc05hbWU9XCJodWUtZmllbGRcIjt0aGlzLl9faW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xudGhpcy5fX2lucHV0LnR5cGU9XCJ0ZXh0XCI7dGhpcy5fX2lucHV0X3RleHRTaGFkb3c9XCIwIDFweCAxcHggXCI7YS5iaW5kKHRoaXMuX19pbnB1dCxcImtleWRvd25cIixmdW5jdGlvbihhKXsxMz09PWEua2V5Q29kZSYmZy5jYWxsKHRoaXMpfSk7YS5iaW5kKHRoaXMuX19pbnB1dCxcImJsdXJcIixnKTthLmJpbmQodGhpcy5fX3NlbGVjdG9yLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7YS5hZGRDbGFzcyh0aGlzLFwiZHJhZ1wiKS5iaW5kKHdpbmRvdyxcIm1vdXNldXBcIixmdW5jdGlvbihiKXthLnJlbW92ZUNsYXNzKHQuX19zZWxlY3RvcixcImRyYWdcIil9KX0pO3ZhciB5PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5leHRlbmQodGhpcy5fX3NlbGVjdG9yLnN0eWxlLHt3aWR0aDpcIjEyMnB4XCIsaGVpZ2h0OlwiMTAycHhcIixwYWRkaW5nOlwiM3B4XCIsYmFja2dyb3VuZENvbG9yOlwiIzIyMlwiLGJveFNoYWRvdzpcIjBweCAxcHggM3B4IHJnYmEoMCwwLDAsMC4zKVwifSk7Yy5leHRlbmQodGhpcy5fX2ZpZWxkX2tub2Iuc3R5bGUsXG57cG9zaXRpb246XCJhYnNvbHV0ZVwiLHdpZHRoOlwiMTJweFwiLGhlaWdodDpcIjEycHhcIixib3JkZXI6dGhpcy5fX2ZpZWxkX2tub2JfYm9yZGVyKyguNT50aGlzLl9fY29sb3Iudj9cIiNmZmZcIjpcIiMwMDBcIiksYm94U2hhZG93OlwiMHB4IDFweCAzcHggcmdiYSgwLDAsMCwwLjUpXCIsYm9yZGVyUmFkaXVzOlwiMTJweFwiLHpJbmRleDoxfSk7Yy5leHRlbmQodGhpcy5fX2h1ZV9rbm9iLnN0eWxlLHtwb3NpdGlvbjpcImFic29sdXRlXCIsd2lkdGg6XCIxNXB4XCIsaGVpZ2h0OlwiMnB4XCIsYm9yZGVyUmlnaHQ6XCI0cHggc29saWQgI2ZmZlwiLHpJbmRleDoxfSk7Yy5leHRlbmQodGhpcy5fX3NhdHVyYXRpb25fZmllbGQuc3R5bGUse3dpZHRoOlwiMTAwcHhcIixoZWlnaHQ6XCIxMDBweFwiLGJvcmRlcjpcIjFweCBzb2xpZCAjNTU1XCIsbWFyZ2luUmlnaHQ6XCIzcHhcIixkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsY3Vyc29yOlwicG9pbnRlclwifSk7Yy5leHRlbmQoeS5zdHlsZSx7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwiLFxuYmFja2dyb3VuZDpcIm5vbmVcIn0pO2IoeSxcInRvcFwiLFwicmdiYSgwLDAsMCwwKVwiLFwiIzAwMFwiKTtjLmV4dGVuZCh0aGlzLl9faHVlX2ZpZWxkLnN0eWxlLHt3aWR0aDpcIjE1cHhcIixoZWlnaHQ6XCIxMDBweFwiLGRpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIixib3JkZXI6XCIxcHggc29saWQgIzU1NVwiLGN1cnNvcjpcIm5zLXJlc2l6ZVwifSk7cCh0aGlzLl9faHVlX2ZpZWxkKTtjLmV4dGVuZCh0aGlzLl9faW5wdXQuc3R5bGUse291dGxpbmU6XCJub25lXCIsdGV4dEFsaWduOlwiY2VudGVyXCIsY29sb3I6XCIjZmZmXCIsYm9yZGVyOjAsZm9udFdlaWdodDpcImJvbGRcIix0ZXh0U2hhZG93OnRoaXMuX19pbnB1dF90ZXh0U2hhZG93K1wicmdiYSgwLDAsMCwwLjcpXCJ9KTthLmJpbmQodGhpcy5fX3NhdHVyYXRpb25fZmllbGQsXCJtb3VzZWRvd25cIix1KTthLmJpbmQodGhpcy5fX2ZpZWxkX2tub2IsXCJtb3VzZWRvd25cIix1KTthLmJpbmQodGhpcy5fX2h1ZV9maWVsZCxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGIpe3coYik7YS5iaW5kKHdpbmRvdyxcblwibW91c2Vtb3ZlXCIsdyk7YS5iaW5kKHdpbmRvdyxcIm1vdXNldXBcIixrKX0pO3RoaXMuX19zYXR1cmF0aW9uX2ZpZWxkLmFwcGVuZENoaWxkKHkpO3RoaXMuX19zZWxlY3Rvci5hcHBlbmRDaGlsZCh0aGlzLl9fZmllbGRfa25vYik7dGhpcy5fX3NlbGVjdG9yLmFwcGVuZENoaWxkKHRoaXMuX19zYXR1cmF0aW9uX2ZpZWxkKTt0aGlzLl9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQodGhpcy5fX2h1ZV9maWVsZCk7dGhpcy5fX2h1ZV9maWVsZC5hcHBlbmRDaGlsZCh0aGlzLl9faHVlX2tub2IpO3RoaXMuZG9tRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9faW5wdXQpO3RoaXMuZG9tRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9fc2VsZWN0b3IpO3RoaXMudXBkYXRlRGlzcGxheSgpfTtxLnN1cGVyY2xhc3M9ZjtjLmV4dGVuZChxLnByb3RvdHlwZSxmLnByb3RvdHlwZSx7dXBkYXRlRGlzcGxheTpmdW5jdGlvbigpe3ZhciBhPWUodGhpcy5nZXRWYWx1ZSgpKTtpZighMSE9PWEpe3ZhciBmPSExO1xuYy5lYWNoKGQuQ09NUE9ORU5UUyxmdW5jdGlvbihiKXtpZighYy5pc1VuZGVmaW5lZChhW2JdKSYmIWMuaXNVbmRlZmluZWQodGhpcy5fX2NvbG9yLl9fc3RhdGVbYl0pJiZhW2JdIT09dGhpcy5fX2NvbG9yLl9fc3RhdGVbYl0pcmV0dXJuIGY9ITAse319LHRoaXMpO2YmJmMuZXh0ZW5kKHRoaXMuX19jb2xvci5fX3N0YXRlLGEpfWMuZXh0ZW5kKHRoaXMuX190ZW1wLl9fc3RhdGUsdGhpcy5fX2NvbG9yLl9fc3RhdGUpO3RoaXMuX190ZW1wLmE9MTt2YXIgbD0uNT50aGlzLl9fY29sb3Iudnx8LjU8dGhpcy5fX2NvbG9yLnM/MjU1OjAscD0yNTUtbDtjLmV4dGVuZCh0aGlzLl9fZmllbGRfa25vYi5zdHlsZSx7bWFyZ2luTGVmdDoxMDAqdGhpcy5fX2NvbG9yLnMtNytcInB4XCIsbWFyZ2luVG9wOjEwMCooMS10aGlzLl9fY29sb3IudiktNytcInB4XCIsYmFja2dyb3VuZENvbG9yOnRoaXMuX190ZW1wLnRvU3RyaW5nKCksYm9yZGVyOnRoaXMuX19maWVsZF9rbm9iX2JvcmRlcitcInJnYihcIitsK1xuXCIsXCIrbCtcIixcIitsK1wiKVwifSk7dGhpcy5fX2h1ZV9rbm9iLnN0eWxlLm1hcmdpblRvcD0xMDAqKDEtdGhpcy5fX2NvbG9yLmgvMzYwKStcInB4XCI7dGhpcy5fX3RlbXAucz0xO3RoaXMuX190ZW1wLnY9MTtiKHRoaXMuX19zYXR1cmF0aW9uX2ZpZWxkLFwibGVmdFwiLFwiI2ZmZlwiLHRoaXMuX190ZW1wLnRvU3RyaW5nKCkpO2MuZXh0ZW5kKHRoaXMuX19pbnB1dC5zdHlsZSx7YmFja2dyb3VuZENvbG9yOnRoaXMuX19pbnB1dC52YWx1ZT10aGlzLl9fY29sb3IudG9TdHJpbmcoKSxjb2xvcjpcInJnYihcIitsK1wiLFwiK2wrXCIsXCIrbCtcIilcIix0ZXh0U2hhZG93OnRoaXMuX19pbnB1dF90ZXh0U2hhZG93K1wicmdiYShcIitwK1wiLFwiK3ArXCIsXCIrcCtcIiwuNylcIn0pfX0pO3ZhciBsPVtcIi1tb3otXCIsXCItby1cIixcIi13ZWJraXQtXCIsXCItbXMtXCIsXCJcIl07cmV0dXJuIHF9KGRhdC5jb250cm9sbGVycy5Db250cm9sbGVyLGRhdC5kb20uZG9tLGRhdC5jb2xvci5Db2xvcj1mdW5jdGlvbihmLGEsZCxlKXtmdW5jdGlvbiBjKGEsXG5iLGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2dldDpmdW5jdGlvbigpe2lmKFwiUkdCXCI9PT10aGlzLl9fc3RhdGUuc3BhY2UpcmV0dXJuIHRoaXMuX19zdGF0ZVtiXTtwKHRoaXMsYixjKTtyZXR1cm4gdGhpcy5fX3N0YXRlW2JdfSxzZXQ6ZnVuY3Rpb24oYSl7XCJSR0JcIiE9PXRoaXMuX19zdGF0ZS5zcGFjZSYmKHAodGhpcyxiLGMpLHRoaXMuX19zdGF0ZS5zcGFjZT1cIlJHQlwiKTt0aGlzLl9fc3RhdGVbYl09YX19KX1mdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7aWYoXCJIU1ZcIj09PXRoaXMuX19zdGF0ZS5zcGFjZSlyZXR1cm4gdGhpcy5fX3N0YXRlW2JdO3EodGhpcyk7cmV0dXJuIHRoaXMuX19zdGF0ZVtiXX0sc2V0OmZ1bmN0aW9uKGEpe1wiSFNWXCIhPT10aGlzLl9fc3RhdGUuc3BhY2UmJihxKHRoaXMpLHRoaXMuX19zdGF0ZS5zcGFjZT1cIkhTVlwiKTt0aGlzLl9fc3RhdGVbYl09YX19KX1mdW5jdGlvbiBwKGIsYyxkKXtpZihcIkhFWFwiPT09XG5iLl9fc3RhdGUuc3BhY2UpYi5fX3N0YXRlW2NdPWEuY29tcG9uZW50X2Zyb21faGV4KGIuX19zdGF0ZS5oZXgsZCk7ZWxzZSBpZihcIkhTVlwiPT09Yi5fX3N0YXRlLnNwYWNlKWUuZXh0ZW5kKGIuX19zdGF0ZSxhLmhzdl90b19yZ2IoYi5fX3N0YXRlLmgsYi5fX3N0YXRlLnMsYi5fX3N0YXRlLnYpKTtlbHNlIHRocm93XCJDb3JydXB0ZWQgY29sb3Igc3RhdGVcIjt9ZnVuY3Rpb24gcShiKXt2YXIgYz1hLnJnYl90b19oc3YoYi5yLGIuZyxiLmIpO2UuZXh0ZW5kKGIuX19zdGF0ZSx7czpjLnMsdjpjLnZ9KTtlLmlzTmFOKGMuaCk/ZS5pc1VuZGVmaW5lZChiLl9fc3RhdGUuaCkmJihiLl9fc3RhdGUuaD0wKTpiLl9fc3RhdGUuaD1jLmh9dmFyIGw9ZnVuY3Rpb24oKXt0aGlzLl9fc3RhdGU9Zi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoITE9PT10aGlzLl9fc3RhdGUpdGhyb3dcIkZhaWxlZCB0byBpbnRlcnByZXQgY29sb3IgYXJndW1lbnRzXCI7dGhpcy5fX3N0YXRlLmE9dGhpcy5fX3N0YXRlLmF8fFxuMX07bC5DT01QT05FTlRTPVwiciBnIGIgaCBzIHYgaGV4IGFcIi5zcGxpdChcIiBcIik7ZS5leHRlbmQobC5wcm90b3R5cGUse3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGQodGhpcyl9LHRvT3JpZ2luYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX3N0YXRlLmNvbnZlcnNpb24ud3JpdGUodGhpcyl9fSk7YyhsLnByb3RvdHlwZSxcInJcIiwyKTtjKGwucHJvdG90eXBlLFwiZ1wiLDEpO2MobC5wcm90b3R5cGUsXCJiXCIsMCk7YihsLnByb3RvdHlwZSxcImhcIik7YihsLnByb3RvdHlwZSxcInNcIik7YihsLnByb3RvdHlwZSxcInZcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX3N0YXRlLmF9LHNldDpmdW5jdGlvbihhKXt0aGlzLl9fc3RhdGUuYT1hfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSxcImhleFwiLHtnZXQ6ZnVuY3Rpb24oKXtcIkhFWFwiIT09IXRoaXMuX19zdGF0ZS5zcGFjZSYmKHRoaXMuX19zdGF0ZS5oZXg9XG5hLnJnYl90b19oZXgodGhpcy5yLHRoaXMuZyx0aGlzLmIpKTtyZXR1cm4gdGhpcy5fX3N0YXRlLmhleH0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX19zdGF0ZS5zcGFjZT1cIkhFWFwiO3RoaXMuX19zdGF0ZS5oZXg9YX19KTtyZXR1cm4gbH0oZGF0LmNvbG9yLmludGVycHJldCxkYXQuY29sb3IubWF0aD1mdW5jdGlvbigpe3ZhciBmO3JldHVybntoc3ZfdG9fcmdiOmZ1bmN0aW9uKGEsZCxlKXt2YXIgYz1hLzYwLU1hdGguZmxvb3IoYS82MCksYj1lKigxLWQpLGY9ZSooMS1jKmQpO2Q9ZSooMS0oMS1jKSpkKTthPVtbZSxkLGJdLFtmLGUsYl0sW2IsZSxkXSxbYixmLGVdLFtkLGIsZV0sW2UsYixmXV1bTWF0aC5mbG9vcihhLzYwKSU2XTtyZXR1cm57cjoyNTUqYVswXSxnOjI1NSphWzFdLGI6MjU1KmFbMl19fSxyZ2JfdG9faHN2OmZ1bmN0aW9uKGEsZCxlKXt2YXIgYz1NYXRoLm1pbihhLGQsZSksYj1NYXRoLm1heChhLGQsZSksYz1iLWM7aWYoMD09YilyZXR1cm57aDpOYU4sczowLHY6MH07XG5hPShhPT1iPyhkLWUpL2M6ZD09Yj8yKyhlLWEpL2M6NCsoYS1kKS9jKS82OzA+YSYmKGErPTEpO3JldHVybntoOjM2MCphLHM6Yy9iLHY6Yi8yNTV9fSxyZ2JfdG9faGV4OmZ1bmN0aW9uKGEsZCxlKXthPXRoaXMuaGV4X3dpdGhfY29tcG9uZW50KDAsMixhKTthPXRoaXMuaGV4X3dpdGhfY29tcG9uZW50KGEsMSxkKTtyZXR1cm4gYT10aGlzLmhleF93aXRoX2NvbXBvbmVudChhLDAsZSl9LGNvbXBvbmVudF9mcm9tX2hleDpmdW5jdGlvbihhLGQpe3JldHVybiBhPj44KmQmMjU1fSxoZXhfd2l0aF9jb21wb25lbnQ6ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBlPDwoZj04KmQpfGEmfigyNTU8PGYpfX19KCksZGF0LmNvbG9yLnRvU3RyaW5nLGRhdC51dGlscy5jb21tb24pLGRhdC5jb2xvci5pbnRlcnByZXQsZGF0LnV0aWxzLmNvbW1vbiksZGF0LnV0aWxzLnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxcbndpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGYsYSl7d2luZG93LnNldFRpbWVvdXQoZiwxRTMvNjApfX0oKSxkYXQuZG9tLkNlbnRlcmVkRGl2PWZ1bmN0aW9uKGYsYSl7dmFyIGQ9ZnVuY3Rpb24oKXt0aGlzLmJhY2tncm91bmRFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5leHRlbmQodGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZSx7YmFja2dyb3VuZENvbG9yOlwicmdiYSgwLDAsMCwwLjgpXCIsdG9wOjAsbGVmdDowLGRpc3BsYXk6XCJub25lXCIsekluZGV4OlwiMTAwMFwiLG9wYWNpdHk6MCxXZWJraXRUcmFuc2l0aW9uOlwib3BhY2l0eSAwLjJzIGxpbmVhclwiLHRyYW5zaXRpb246XCJvcGFjaXR5IDAuMnMgbGluZWFyXCJ9KTtmLm1ha2VGdWxsc2NyZWVuKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQpO3RoaXMuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUucG9zaXRpb249XG5cImZpeGVkXCI7dGhpcy5kb21FbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5leHRlbmQodGhpcy5kb21FbGVtZW50LnN0eWxlLHtwb3NpdGlvbjpcImZpeGVkXCIsZGlzcGxheTpcIm5vbmVcIix6SW5kZXg6XCIxMDAxXCIsb3BhY2l0eTowLFdlYmtpdFRyYW5zaXRpb246XCItd2Via2l0LXRyYW5zZm9ybSAwLjJzIGVhc2Utb3V0LCBvcGFjaXR5IDAuMnMgbGluZWFyXCIsdHJhbnNpdGlvbjpcInRyYW5zZm9ybSAwLjJzIGVhc2Utb3V0LCBvcGFjaXR5IDAuMnMgbGluZWFyXCJ9KTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kb21FbGVtZW50KTt2YXIgZD10aGlzO2YuYmluZCh0aGlzLmJhY2tncm91bmRFbGVtZW50LFwiY2xpY2tcIixmdW5jdGlvbigpe2QuaGlkZSgpfSl9O2QucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgZD10aGlzO3RoaXMuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUuZGlzcGxheT1cblwiYmxvY2tcIjt0aGlzLmRvbUVsZW1lbnQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7dGhpcy5kb21FbGVtZW50LnN0eWxlLm9wYWNpdHk9MDt0aGlzLmRvbUVsZW1lbnQuc3R5bGUud2Via2l0VHJhbnNmb3JtPVwic2NhbGUoMS4xKVwiO3RoaXMubGF5b3V0KCk7YS5kZWZlcihmdW5jdGlvbigpe2QuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUub3BhY2l0eT0xO2QuZG9tRWxlbWVudC5zdHlsZS5vcGFjaXR5PTE7ZC5kb21FbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybT1cInNjYWxlKDEpXCJ9KX07ZC5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYz1mdW5jdGlvbigpe2EuZG9tRWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2EuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtmLnVuYmluZChhLmRvbUVsZW1lbnQsXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsYyk7Zi51bmJpbmQoYS5kb21FbGVtZW50LFwidHJhbnNpdGlvbmVuZFwiLGMpO2YudW5iaW5kKGEuZG9tRWxlbWVudCxcblwib1RyYW5zaXRpb25FbmRcIixjKX07Zi5iaW5kKHRoaXMuZG9tRWxlbWVudCxcIndlYmtpdFRyYW5zaXRpb25FbmRcIixjKTtmLmJpbmQodGhpcy5kb21FbGVtZW50LFwidHJhbnNpdGlvbmVuZFwiLGMpO2YuYmluZCh0aGlzLmRvbUVsZW1lbnQsXCJvVHJhbnNpdGlvbkVuZFwiLGMpO3RoaXMuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUub3BhY2l0eT0wO3RoaXMuZG9tRWxlbWVudC5zdHlsZS5vcGFjaXR5PTA7dGhpcy5kb21FbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybT1cInNjYWxlKDEuMSlcIn07ZC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5kb21FbGVtZW50LnN0eWxlLmxlZnQ9d2luZG93LmlubmVyV2lkdGgvMi1mLmdldFdpZHRoKHRoaXMuZG9tRWxlbWVudCkvMitcInB4XCI7dGhpcy5kb21FbGVtZW50LnN0eWxlLnRvcD13aW5kb3cuaW5uZXJIZWlnaHQvMi1mLmdldEhlaWdodCh0aGlzLmRvbUVsZW1lbnQpLzIrXCJweFwifTtyZXR1cm4gZH0oZGF0LmRvbS5kb20sZGF0LnV0aWxzLmNvbW1vbiksXG5kYXQuZG9tLmRvbSxkYXQudXRpbHMuY29tbW9uKTttb2R1bGUuZXhwb3J0cz1kYXQ7IiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIExleGVyLCBTb3VyY2VNYXAsIGNvbXBpbGUsIGV4dCwgZm9ybWF0U291cmNlUG9zaXRpb24sIGZzLCBnZXRTb3VyY2VNYXAsIGhlbHBlcnMsIGljZWRfcnVudGltZSwgaWNlZF90cmFuc2Zvcm0sIGxleGVyLCBwYXJzZXIsIHBhdGgsIHNvdXJjZU1hcHMsIHZtLCB3aXRoUHJldHR5RXJyb3JzLCBfYmFzZSwgX2ksIF9sZW4sIF9yZWYsXG4gICAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgZnMgPSByZXF1aXJlKCdmcycpO1xuXG4gIHZtID0gcmVxdWlyZSgndm0nKTtcblxuICBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4gIExleGVyID0gcmVxdWlyZSgnLi9sZXhlcicpLkxleGVyO1xuXG4gIHBhcnNlciA9IHJlcXVpcmUoJy4vcGFyc2VyJykucGFyc2VyO1xuXG4gIGhlbHBlcnMgPSByZXF1aXJlKCcuL2hlbHBlcnMnKTtcblxuICBTb3VyY2VNYXAgPSByZXF1aXJlKCcuL3NvdXJjZW1hcCcpLlNvdXJjZU1hcDtcblxuICBpY2VkX3RyYW5zZm9ybSA9IHJlcXVpcmUoJy4vaWNlZCcpLnRyYW5zZm9ybTtcblxuICBpY2VkX3J1bnRpbWUgPSByZXF1aXJlKCdpY2VkLXJ1bnRpbWUnKTtcblxuICBleHBvcnRzLlZFUlNJT04gPSAnMTA4LjAuMTEnO1xuXG4gIGV4cG9ydHMuRklMRV9FWFRFTlNJT05TID0gWycuY29mZmVlJywgJy5saXRjb2ZmZWUnLCAnLmNvZmZlZS5tZCcsICcuaWNlZCcsICcubGl0aWNlZCcsICcuaWNlZC5tZCddO1xuXG4gIGV4cG9ydHMuaGVscGVycyA9IGhlbHBlcnM7XG5cbiAgd2l0aFByZXR0eUVycm9ycyA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNvZGUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBlcnI7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGNvZGUsIG9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgdGhyb3cgaGVscGVycy51cGRhdGVTeW50YXhFcnJvcihlcnIsIGNvZGUsIG9wdGlvbnMuZmlsZW5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZXhwb3J0cy5jb21waWxlID0gY29tcGlsZSA9IHdpdGhQcmV0dHlFcnJvcnMoZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgIHZhciBhbnN3ZXIsIGN1cnJlbnRDb2x1bW4sIGN1cnJlbnRMaW5lLCBleHRlbmQsIGZyYWdtZW50LCBmcmFnbWVudHMsIGhlYWRlciwganMsIG1hcCwgbWVyZ2UsIG5ld0xpbmVzLCBfaSwgX2xlbjtcbiAgICBtZXJnZSA9IGhlbHBlcnMubWVyZ2UsIGV4dGVuZCA9IGhlbHBlcnMuZXh0ZW5kO1xuICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCkge1xuICAgICAgbWFwID0gbmV3IFNvdXJjZU1hcDtcbiAgICB9XG4gICAgZnJhZ21lbnRzID0gKGljZWRfdHJhbnNmb3JtKHBhcnNlci5wYXJzZShsZXhlci50b2tlbml6ZShjb2RlLCBvcHRpb25zKSksIG9wdGlvbnMpKS5jb21waWxlVG9GcmFnbWVudHMob3B0aW9ucyk7XG4gICAgY3VycmVudExpbmUgPSAwO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcikge1xuICAgICAgY3VycmVudExpbmUgKz0gMTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2hpZnRMaW5lKSB7XG4gICAgICBjdXJyZW50TGluZSArPSAxO1xuICAgIH1cbiAgICBjdXJyZW50Q29sdW1uID0gMDtcbiAgICBqcyA9IFwiXCI7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBmcmFnbWVudHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnRzW19pXTtcbiAgICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCkge1xuICAgICAgICBpZiAoZnJhZ21lbnQubG9jYXRpb25EYXRhKSB7XG4gICAgICAgICAgbWFwLmFkZChbZnJhZ21lbnQubG9jYXRpb25EYXRhLmZpcnN0X2xpbmUsIGZyYWdtZW50LmxvY2F0aW9uRGF0YS5maXJzdF9jb2x1bW5dLCBbY3VycmVudExpbmUsIGN1cnJlbnRDb2x1bW5dLCB7XG4gICAgICAgICAgICBub1JlcGxhY2U6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdMaW5lcyA9IGhlbHBlcnMuY291bnQoZnJhZ21lbnQuY29kZSwgXCJcXG5cIik7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IG5ld0xpbmVzO1xuICAgICAgICBpZiAobmV3TGluZXMpIHtcbiAgICAgICAgICBjdXJyZW50Q29sdW1uID0gZnJhZ21lbnQuY29kZS5sZW5ndGggLSAoZnJhZ21lbnQuY29kZS5sYXN0SW5kZXhPZihcIlxcblwiKSArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRDb2x1bW4gKz0gZnJhZ21lbnQuY29kZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGpzICs9IGZyYWdtZW50LmNvZGU7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmhlYWRlcikge1xuICAgICAgaGVhZGVyID0gXCJHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCBcIiArIHRoaXMuVkVSU0lPTjtcbiAgICAgIGpzID0gXCIvLyBcIiArIGhlYWRlciArIFwiXFxuXCIgKyBqcztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc291cmNlTWFwKSB7XG4gICAgICBhbnN3ZXIgPSB7XG4gICAgICAgIGpzOiBqc1xuICAgICAgfTtcbiAgICAgIGFuc3dlci5zb3VyY2VNYXAgPSBtYXA7XG4gICAgICBhbnN3ZXIudjNTb3VyY2VNYXAgPSBtYXAuZ2VuZXJhdGUob3B0aW9ucywgY29kZSk7XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ganM7XG4gICAgfVxuICB9KTtcblxuICBleHBvcnRzLnRva2VucyA9IHdpdGhQcmV0dHlFcnJvcnMoZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBsZXhlci50b2tlbml6ZShjb2RlLCBvcHRpb25zKTtcbiAgfSk7XG5cbiAgZXhwb3J0cy5ub2RlcyA9IHdpdGhQcmV0dHlFcnJvcnMoZnVuY3Rpb24oc291cmNlLCBvcHRpb25zKSB7XG4gICAgdmFyIGFzdDtcbiAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFzdCA9IHBhcnNlci5wYXJzZShsZXhlci50b2tlbml6ZShzb3VyY2UsIG9wdGlvbnMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXN0ID0gcGFyc2VyLnBhcnNlKHNvdXJjZSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5ub0ljZWRUcmFuc2Zvcm0pIHtcbiAgICAgIGFzdCA9IGljZWRfdHJhbnNmb3JtKGFzdCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBhc3Q7XG4gIH0pO1xuXG4gIGV4cG9ydHMucnVuID0gZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgIHZhciBhbnN3ZXIsIGRpciwgbWFpbk1vZHVsZSwgX3JlZjtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIG1haW5Nb2R1bGUgPSByZXF1aXJlLm1haW47XG4gICAgbWFpbk1vZHVsZS5maWxlbmFtZSA9IHByb2Nlc3MuYXJndlsxXSA9IG9wdGlvbnMuZmlsZW5hbWUgPyBmcy5yZWFscGF0aFN5bmMob3B0aW9ucy5maWxlbmFtZSkgOiAnLic7XG4gICAgbWFpbk1vZHVsZS5tb2R1bGVDYWNoZSAmJiAobWFpbk1vZHVsZS5tb2R1bGVDYWNoZSA9IHt9KTtcbiAgICBkaXIgPSBvcHRpb25zLmZpbGVuYW1lID8gcGF0aC5kaXJuYW1lKGZzLnJlYWxwYXRoU3luYyhvcHRpb25zLmZpbGVuYW1lKSkgOiBmcy5yZWFscGF0aFN5bmMoJy4nKTtcbiAgICBtYWluTW9kdWxlLnBhdGhzID0gcmVxdWlyZSgnbW9kdWxlJykuX25vZGVNb2R1bGVQYXRocyhkaXIpO1xuICAgIGlmICghaGVscGVycy5pc0NvZmZlZShtYWluTW9kdWxlLmZpbGVuYW1lKSB8fCByZXF1aXJlLmV4dGVuc2lvbnMpIHtcbiAgICAgIG9wdGlvbnMucnVudGltZSA9IFwiaW50ZXJwXCI7XG4gICAgICBhbnN3ZXIgPSBjb21waWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgICAgY29kZSA9IChfcmVmID0gYW5zd2VyLmpzKSAhPSBudWxsID8gX3JlZiA6IGFuc3dlcjtcbiAgICB9XG4gICAgcmV0dXJuIG1haW5Nb2R1bGUuX2NvbXBpbGUoY29kZSwgbWFpbk1vZHVsZS5maWxlbmFtZSk7XG4gIH07XG5cbiAgZXhwb3J0c1tcImV2YWxcIl0gPSBmdW5jdGlvbihjb2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIE1vZHVsZSwgU2NyaXB0LCBqcywgaywgbywgciwgc2FuZGJveCwgdiwgX2ksIF9sZW4sIF9tb2R1bGUsIF9yZWYsIF9yZWYxLCBfcmVxdWlyZTtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghKGNvZGUgPSBjb2RlLnRyaW0oKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU2NyaXB0ID0gdm0uU2NyaXB0O1xuICAgIGlmIChTY3JpcHQpIHtcbiAgICAgIGlmIChvcHRpb25zLnNhbmRib3ggIT0gbnVsbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5zYW5kYm94IGluc3RhbmNlb2YgU2NyaXB0LmNyZWF0ZUNvbnRleHQoKS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgIHNhbmRib3ggPSBvcHRpb25zLnNhbmRib3g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuZGJveCA9IFNjcmlwdC5jcmVhdGVDb250ZXh0KCk7XG4gICAgICAgICAgX3JlZiA9IG9wdGlvbnMuc2FuZGJveDtcbiAgICAgICAgICBmb3IgKGsgaW4gX3JlZikge1xuICAgICAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChfcmVmLCBrKSkgY29udGludWU7XG4gICAgICAgICAgICB2ID0gX3JlZltrXTtcbiAgICAgICAgICAgIHNhbmRib3hba10gPSB2O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzYW5kYm94Lmdsb2JhbCA9IHNhbmRib3gucm9vdCA9IHNhbmRib3guR0xPQkFMID0gc2FuZGJveDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNhbmRib3ggPSBnbG9iYWw7XG4gICAgICB9XG4gICAgICBzYW5kYm94Ll9fZmlsZW5hbWUgPSBvcHRpb25zLmZpbGVuYW1lIHx8ICdldmFsJztcbiAgICAgIHNhbmRib3guX19kaXJuYW1lID0gcGF0aC5kaXJuYW1lKHNhbmRib3guX19maWxlbmFtZSk7XG4gICAgICBpZiAoIShzYW5kYm94ICE9PSBnbG9iYWwgfHwgc2FuZGJveC5tb2R1bGUgfHwgc2FuZGJveC5yZXF1aXJlKSkge1xuICAgICAgICBNb2R1bGUgPSByZXF1aXJlKCdtb2R1bGUnKTtcbiAgICAgICAgc2FuZGJveC5tb2R1bGUgPSBfbW9kdWxlID0gbmV3IE1vZHVsZShvcHRpb25zLm1vZHVsZW5hbWUgfHwgJ2V2YWwnKTtcbiAgICAgICAgc2FuZGJveC5yZXF1aXJlID0gX3JlcXVpcmUgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgICAgcmV0dXJuIE1vZHVsZS5fbG9hZChwYXRoLCBfbW9kdWxlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgX21vZHVsZS5maWxlbmFtZSA9IHNhbmRib3guX19maWxlbmFtZTtcbiAgICAgICAgX3JlZjEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhyZXF1aXJlKTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIHIgPSBfcmVmMVtfaV07XG4gICAgICAgICAgaWYgKHIgIT09ICdwYXRocycpIHtcbiAgICAgICAgICAgIF9yZXF1aXJlW3JdID0gcmVxdWlyZVtyXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3JlcXVpcmUucGF0aHMgPSBfbW9kdWxlLnBhdGhzID0gTW9kdWxlLl9ub2RlTW9kdWxlUGF0aHMocHJvY2Vzcy5jd2QoKSk7XG4gICAgICAgIF9yZXF1aXJlLnJlc29sdmUgPSBmdW5jdGlvbihyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIE1vZHVsZS5fcmVzb2x2ZUZpbGVuYW1lKHJlcXVlc3QsIF9tb2R1bGUpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBvID0ge307XG4gICAgZm9yIChrIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmICghX19oYXNQcm9wLmNhbGwob3B0aW9ucywgaykpIGNvbnRpbnVlO1xuICAgICAgdiA9IG9wdGlvbnNba107XG4gICAgICBvW2tdID0gdjtcbiAgICB9XG4gICAgby5iYXJlID0gdHJ1ZTtcbiAgICBqcyA9IGNvbXBpbGUoY29kZSwgbyk7XG4gICAgaWYgKHNhbmRib3ggPT09IGdsb2JhbCkge1xuICAgICAgcmV0dXJuIHZtLnJ1bkluVGhpc0NvbnRleHQoanMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdm0ucnVuSW5Db250ZXh0KGpzLCBzYW5kYm94KTtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiByZXF1aXJlKCcuL3JlZ2lzdGVyJyk7XG4gIH07XG5cbiAgaWYgKHJlcXVpcmUuZXh0ZW5zaW9ucykge1xuICAgIF9yZWYgPSB0aGlzLkZJTEVfRVhURU5TSU9OUztcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGV4dCA9IF9yZWZbX2ldO1xuICAgICAgaWYgKChfYmFzZSA9IHJlcXVpcmUuZXh0ZW5zaW9ucylbZXh0XSA9PSBudWxsKSB7XG4gICAgICAgIF9iYXNlW2V4dF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgQ29mZmVlU2NyaXB0LnJlZ2lzdGVyKCkgb3IgcmVxdWlyZSB0aGUgY29mZmVlLXNjcmlwdC9yZWdpc3RlciBtb2R1bGUgdG8gcmVxdWlyZSBcIiArIGV4dCArIFwiIGZpbGVzLlwiKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBleHBvcnRzLl9jb21waWxlRmlsZSA9IGZ1bmN0aW9uKGZpbGVuYW1lLCBzb3VyY2VNYXAsIG9wdHNfcGFzc2VkKSB7XG4gICAgdmFyIGFuc3dlciwgZXJyLCBrLCBvcHRzLCByYXcsIHN0cmlwcGVkLCB2O1xuICAgIGlmIChzb3VyY2VNYXAgPT0gbnVsbCkge1xuICAgICAgc291cmNlTWFwID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChvcHRzX3Bhc3NlZCA9PSBudWxsKSB7XG4gICAgICBvcHRzX3Bhc3NlZCA9IHt9O1xuICAgIH1cbiAgICByYXcgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGY4Jyk7XG4gICAgc3RyaXBwZWQgPSByYXcuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGID8gcmF3LnN1YnN0cmluZygxKSA6IHJhdztcbiAgICBvcHRzID0ge1xuICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lLFxuICAgICAgc291cmNlTWFwOiBzb3VyY2VNYXAsXG4gICAgICBsaXRlcmF0ZTogaGVscGVycy5pc0xpdGVyYXRlKGZpbGVuYW1lKVxuICAgIH07XG4gICAgZm9yIChrIGluIG9wdHNfcGFzc2VkKSB7XG4gICAgICB2ID0gb3B0c19wYXNzZWRba107XG4gICAgICBvcHRzW2tdID0gdjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGFuc3dlciA9IGNvbXBpbGUoc3RyaXBwZWQsIG9wdHMpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgdGhyb3cgaGVscGVycy51cGRhdGVTeW50YXhFcnJvcihlcnIsIHN0cmlwcGVkLCBmaWxlbmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBhbnN3ZXI7XG4gIH07XG5cbiAgbGV4ZXIgPSBuZXcgTGV4ZXI7XG5cbiAgcGFyc2VyLmxleGVyID0ge1xuICAgIGxleDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGFnLCB0b2tlbjtcbiAgICAgIHRva2VuID0gdGhpcy50b2tlbnNbdGhpcy5wb3MrK107XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgdGFnID0gdG9rZW5bMF0sIHRoaXMueXl0ZXh0ID0gdG9rZW5bMV0sIHRoaXMueXlsbG9jID0gdG9rZW5bMl07XG4gICAgICAgIHRoaXMuZXJyb3JUb2tlbiA9IHRva2VuLm9yaWdpbiB8fCB0b2tlbjtcbiAgICAgICAgdGhpcy55eWxpbmVubyA9IHRoaXMueXlsbG9jLmZpcnN0X2xpbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWcgPSAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YWc7XG4gICAgfSxcbiAgICBzZXRJbnB1dDogZnVuY3Rpb24odG9rZW5zKSB7XG4gICAgICB0aGlzLnRva2VucyA9IHRva2VucztcbiAgICAgIHJldHVybiB0aGlzLnBvcyA9IDA7XG4gICAgfSxcbiAgICB1cGNvbWluZ0lucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfTtcblxuICBwYXJzZXIueXkgPSByZXF1aXJlKCcuL25vZGVzJyk7XG5cbiAgZXhwb3J0cy5pY2VkID0gaWNlZF9ydW50aW1lO1xuXG4gIHBhcnNlci55eS5wYXJzZUVycm9yID0gZnVuY3Rpb24obWVzc2FnZSwgX2FyZykge1xuICAgIHZhciBlcnJvckxvYywgZXJyb3JUYWcsIGVycm9yVGV4dCwgZXJyb3JUb2tlbiwgdG9rZW4sIHRva2VucywgX3JlZjE7XG4gICAgdG9rZW4gPSBfYXJnLnRva2VuO1xuICAgIF9yZWYxID0gcGFyc2VyLmxleGVyLCBlcnJvclRva2VuID0gX3JlZjEuZXJyb3JUb2tlbiwgdG9rZW5zID0gX3JlZjEudG9rZW5zO1xuICAgIGVycm9yVGFnID0gZXJyb3JUb2tlblswXSwgZXJyb3JUZXh0ID0gZXJyb3JUb2tlblsxXSwgZXJyb3JMb2MgPSBlcnJvclRva2VuWzJdO1xuICAgIGVycm9yVGV4dCA9IGVycm9yVG9rZW4gPT09IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV0gPyAnZW5kIG9mIGlucHV0JyA6IGVycm9yVGFnID09PSAnSU5ERU5UJyB8fCBlcnJvclRhZyA9PT0gJ09VVERFTlQnID8gJ2luZGVudGF0aW9uJyA6IGhlbHBlcnMubmFtZVdoaXRlc3BhY2VDaGFyYWN0ZXIoZXJyb3JUZXh0KTtcbiAgICByZXR1cm4gaGVscGVycy50aHJvd1N5bnRheEVycm9yKFwidW5leHBlY3RlZCBcIiArIGVycm9yVGV4dCwgZXJyb3JMb2MpO1xuICB9O1xuXG4gIGZvcm1hdFNvdXJjZVBvc2l0aW9uID0gZnVuY3Rpb24oZnJhbWUsIGdldFNvdXJjZU1hcHBpbmcpIHtcbiAgICB2YXIgYXMsIGNvbHVtbiwgZmlsZUxvY2F0aW9uLCBmaWxlTmFtZSwgZnVuY3Rpb25OYW1lLCBpc0NvbnN0cnVjdG9yLCBpc01ldGhvZENhbGwsIGxpbmUsIG1ldGhvZE5hbWUsIHNvdXJjZSwgdHAsIHR5cGVOYW1lO1xuICAgIGZpbGVOYW1lID0gdm9pZCAwO1xuICAgIGZpbGVMb2NhdGlvbiA9ICcnO1xuICAgIGlmIChmcmFtZS5pc05hdGl2ZSgpKSB7XG4gICAgICBmaWxlTG9jYXRpb24gPSBcIm5hdGl2ZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZnJhbWUuaXNFdmFsKCkpIHtcbiAgICAgICAgZmlsZU5hbWUgPSBmcmFtZS5nZXRTY3JpcHROYW1lT3JTb3VyY2VVUkwoKTtcbiAgICAgICAgaWYgKCFmaWxlTmFtZSkge1xuICAgICAgICAgIGZpbGVMb2NhdGlvbiA9IFwiXCIgKyAoZnJhbWUuZ2V0RXZhbE9yaWdpbigpKSArIFwiLCBcIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsZU5hbWUgPSBmcmFtZS5nZXRGaWxlTmFtZSgpO1xuICAgICAgfVxuICAgICAgZmlsZU5hbWUgfHwgKGZpbGVOYW1lID0gXCI8YW5vbnltb3VzPlwiKTtcbiAgICAgIGxpbmUgPSBmcmFtZS5nZXRMaW5lTnVtYmVyKCk7XG4gICAgICBjb2x1bW4gPSBmcmFtZS5nZXRDb2x1bW5OdW1iZXIoKTtcbiAgICAgIHNvdXJjZSA9IGdldFNvdXJjZU1hcHBpbmcoZmlsZU5hbWUsIGxpbmUsIGNvbHVtbik7XG4gICAgICBmaWxlTG9jYXRpb24gPSBzb3VyY2UgPyBcIlwiICsgZmlsZU5hbWUgKyBcIjpcIiArIHNvdXJjZVswXSArIFwiOlwiICsgc291cmNlWzFdIDogXCJcIiArIGZpbGVOYW1lICsgXCI6XCIgKyBsaW5lICsgXCI6XCIgKyBjb2x1bW47XG4gICAgfVxuICAgIGZ1bmN0aW9uTmFtZSA9IGZyYW1lLmdldEZ1bmN0aW9uTmFtZSgpO1xuICAgIGlzQ29uc3RydWN0b3IgPSBmcmFtZS5pc0NvbnN0cnVjdG9yKCk7XG4gICAgaXNNZXRob2RDYWxsID0gIShmcmFtZS5pc1RvcGxldmVsKCkgfHwgaXNDb25zdHJ1Y3Rvcik7XG4gICAgaWYgKGlzTWV0aG9kQ2FsbCkge1xuICAgICAgbWV0aG9kTmFtZSA9IGZyYW1lLmdldE1ldGhvZE5hbWUoKTtcbiAgICAgIHR5cGVOYW1lID0gZnJhbWUuZ2V0VHlwZU5hbWUoKTtcbiAgICAgIGlmIChmdW5jdGlvbk5hbWUpIHtcbiAgICAgICAgdHAgPSBhcyA9ICcnO1xuICAgICAgICBpZiAodHlwZU5hbWUgJiYgZnVuY3Rpb25OYW1lLmluZGV4T2YodHlwZU5hbWUpKSB7XG4gICAgICAgICAgdHAgPSBcIlwiICsgdHlwZU5hbWUgKyBcIi5cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kTmFtZSAmJiBmdW5jdGlvbk5hbWUuaW5kZXhPZihcIi5cIiArIG1ldGhvZE5hbWUpICE9PSBmdW5jdGlvbk5hbWUubGVuZ3RoIC0gbWV0aG9kTmFtZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgYXMgPSBcIiBbYXMgXCIgKyBtZXRob2ROYW1lICsgXCJdXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCIgKyB0cCArIGZ1bmN0aW9uTmFtZSArIGFzICsgXCIgKFwiICsgZmlsZUxvY2F0aW9uICsgXCIpXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJcIiArIHR5cGVOYW1lICsgXCIuXCIgKyAobWV0aG9kTmFtZSB8fCAnPGFub255bW91cz4nKSArIFwiIChcIiArIGZpbGVMb2NhdGlvbiArIFwiKVwiO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNDb25zdHJ1Y3Rvcikge1xuICAgICAgcmV0dXJuIFwibmV3IFwiICsgKGZ1bmN0aW9uTmFtZSB8fCAnPGFub255bW91cz4nKSArIFwiIChcIiArIGZpbGVMb2NhdGlvbiArIFwiKVwiO1xuICAgIH0gZWxzZSBpZiAoZnVuY3Rpb25OYW1lKSB7XG4gICAgICByZXR1cm4gXCJcIiArIGZ1bmN0aW9uTmFtZSArIFwiIChcIiArIGZpbGVMb2NhdGlvbiArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsZUxvY2F0aW9uO1xuICAgIH1cbiAgfTtcblxuICBzb3VyY2VNYXBzID0ge307XG5cbiAgZ2V0U291cmNlTWFwID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICB2YXIgYW5zd2VyLCBfcmVmMTtcbiAgICBpZiAoc291cmNlTWFwc1tmaWxlbmFtZV0pIHtcbiAgICAgIHJldHVybiBzb3VyY2VNYXBzW2ZpbGVuYW1lXTtcbiAgICB9XG4gICAgaWYgKF9yZWYxID0gcGF0aCAhPSBudWxsID8gcGF0aC5leHRuYW1lKGZpbGVuYW1lKSA6IHZvaWQgMCwgX19pbmRleE9mLmNhbGwoZXhwb3J0cy5GSUxFX0VYVEVOU0lPTlMsIF9yZWYxKSA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYW5zd2VyID0gZXhwb3J0cy5fY29tcGlsZUZpbGUoZmlsZW5hbWUsIHRydWUpO1xuICAgIHJldHVybiBzb3VyY2VNYXBzW2ZpbGVuYW1lXSA9IGFuc3dlci5zb3VyY2VNYXA7XG4gIH07XG5cbiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBmdW5jdGlvbihlcnIsIHN0YWNrKSB7XG4gICAgdmFyIGZyYW1lLCBmcmFtZXMsIGdldFNvdXJjZU1hcHBpbmc7XG4gICAgZ2V0U291cmNlTWFwcGluZyA9IGZ1bmN0aW9uKGZpbGVuYW1lLCBsaW5lLCBjb2x1bW4pIHtcbiAgICAgIHZhciBhbnN3ZXIsIHNvdXJjZU1hcDtcbiAgICAgIHNvdXJjZU1hcCA9IGdldFNvdXJjZU1hcChmaWxlbmFtZSk7XG4gICAgICBpZiAoc291cmNlTWFwKSB7XG4gICAgICAgIGFuc3dlciA9IHNvdXJjZU1hcC5zb3VyY2VMb2NhdGlvbihbbGluZSAtIDEsIGNvbHVtbiAtIDFdKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbnN3ZXIpIHtcbiAgICAgICAgcmV0dXJuIFthbnN3ZXJbMF0gKyAxLCBhbnN3ZXJbMV0gKyAxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG4gICAgZnJhbWVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9qLCBfbGVuMSwgX3Jlc3VsdHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gc3RhY2subGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgIGZyYW1lID0gc3RhY2tbX2pdO1xuICAgICAgICBpZiAoZnJhbWUuZ2V0RnVuY3Rpb24oKSA9PT0gZXhwb3J0cy5ydW4pIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBfcmVzdWx0cy5wdXNoKFwiICBhdCBcIiArIChmb3JtYXRTb3VyY2VQb3NpdGlvbihmcmFtZSwgZ2V0U291cmNlTWFwcGluZykpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHJldHVybiBcIlwiICsgKGVyci50b1N0cmluZygpKSArIFwiXFxuXCIgKyAoZnJhbWVzLmpvaW4oJ1xcbicpKSArIFwiXFxuXCI7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3NwaW5lJyk7IiwiLyoqXG4gKiBUd2Vlbi5qcyAtIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL3R3ZWVuanMvdHdlZW4uanNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3R3ZWVuanMvdHdlZW4uanMvZ3JhcGhzL2NvbnRyaWJ1dG9ycyBmb3IgdGhlIGZ1bGwgbGlzdCBvZiBjb250cmlidXRvcnMuXG4gKiBUaGFuayB5b3UgYWxsLCB5b3UncmUgYXdlc29tZSFcbiAqL1xuXG4vLyBJbmNsdWRlIGEgcGVyZm9ybWFuY2Uubm93IHBvbHlmaWxsXG4oZnVuY3Rpb24gKCkge1xuXG5cdGlmICgncGVyZm9ybWFuY2UnIGluIHdpbmRvdyA9PT0gZmFsc2UpIHtcblx0XHR3aW5kb3cucGVyZm9ybWFuY2UgPSB7fTtcblx0fVxuXG5cdC8vIElFIDhcblx0RGF0ZS5ub3cgPSAoRGF0ZS5ub3cgfHwgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0fSk7XG5cblx0aWYgKCdub3cnIGluIHdpbmRvdy5wZXJmb3JtYW5jZSA9PT0gZmFsc2UpIHtcblx0XHR2YXIgb2Zmc2V0ID0gd2luZG93LnBlcmZvcm1hbmNlLnRpbWluZyAmJiB3aW5kb3cucGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCA/IHdpbmRvdy5wZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBEYXRlLm5vdygpO1xuXG5cdFx0d2luZG93LnBlcmZvcm1hbmNlLm5vdyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBEYXRlLm5vdygpIC0gb2Zmc2V0O1xuXHRcdH07XG5cdH1cblxufSkoKTtcblxudmFyIFRXRUVOID0gVFdFRU4gfHwgKGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgX3R3ZWVucyA9IFtdO1xuXG5cdHJldHVybiB7XG5cblx0XHRnZXRBbGw6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIF90d2VlbnM7XG5cblx0XHR9LFxuXG5cdFx0cmVtb3ZlQWxsOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdF90d2VlbnMgPSBbXTtcblxuXHRcdH0sXG5cblx0XHRhZGQ6IGZ1bmN0aW9uICh0d2Vlbikge1xuXG5cdFx0XHRfdHdlZW5zLnB1c2godHdlZW4pO1xuXG5cdFx0fSxcblxuXHRcdHJlbW92ZTogZnVuY3Rpb24gKHR3ZWVuKSB7XG5cblx0XHRcdHZhciBpID0gX3R3ZWVucy5pbmRleE9mKHR3ZWVuKTtcblxuXHRcdFx0aWYgKGkgIT09IC0xKSB7XG5cdFx0XHRcdF90d2VlbnMuc3BsaWNlKGksIDEpO1xuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gKHRpbWUpIHtcblxuXHRcdFx0aWYgKF90d2VlbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHR0aW1lID0gdGltZSAhPT0gdW5kZWZpbmVkID8gdGltZSA6IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTtcblxuXHRcdFx0d2hpbGUgKGkgPCBfdHdlZW5zLmxlbmd0aCkge1xuXG5cdFx0XHRcdGlmIChfdHdlZW5zW2ldLnVwZGF0ZSh0aW1lKSkge1xuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRfdHdlZW5zLnNwbGljZShpLCAxKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0fVxuXHR9O1xuXG59KSgpO1xuXG5UV0VFTi5Ud2VlbiA9IGZ1bmN0aW9uIChvYmplY3QpIHtcblxuXHR2YXIgX29iamVjdCA9IG9iamVjdDtcblx0dmFyIF92YWx1ZXNTdGFydCA9IHt9O1xuXHR2YXIgX3ZhbHVlc0VuZCA9IHt9O1xuXHR2YXIgX3ZhbHVlc1N0YXJ0UmVwZWF0ID0ge307XG5cdHZhciBfZHVyYXRpb24gPSAxMDAwO1xuXHR2YXIgX3JlcGVhdCA9IDA7XG5cdHZhciBfeW95byA9IGZhbHNlO1xuXHR2YXIgX2lzUGxheWluZyA9IGZhbHNlO1xuXHR2YXIgX3JldmVyc2VkID0gZmFsc2U7XG5cdHZhciBfZGVsYXlUaW1lID0gMDtcblx0dmFyIF9zdGFydFRpbWUgPSBudWxsO1xuXHR2YXIgX2Vhc2luZ0Z1bmN0aW9uID0gVFdFRU4uRWFzaW5nLkxpbmVhci5Ob25lO1xuXHR2YXIgX2ludGVycG9sYXRpb25GdW5jdGlvbiA9IFRXRUVOLkludGVycG9sYXRpb24uTGluZWFyO1xuXHR2YXIgX2NoYWluZWRUd2VlbnMgPSBbXTtcblx0dmFyIF9vblN0YXJ0Q2FsbGJhY2sgPSBudWxsO1xuXHR2YXIgX29uU3RhcnRDYWxsYmFja0ZpcmVkID0gZmFsc2U7XG5cdHZhciBfb25VcGRhdGVDYWxsYmFjayA9IG51bGw7XG5cdHZhciBfb25Db21wbGV0ZUNhbGxiYWNrID0gbnVsbDtcblx0dmFyIF9vblN0b3BDYWxsYmFjayA9IG51bGw7XG5cblx0Ly8gU2V0IGFsbCBzdGFydGluZyB2YWx1ZXMgcHJlc2VudCBvbiB0aGUgdGFyZ2V0IG9iamVjdFxuXHRmb3IgKHZhciBmaWVsZCBpbiBvYmplY3QpIHtcblx0XHRfdmFsdWVzU3RhcnRbZmllbGRdID0gcGFyc2VGbG9hdChvYmplY3RbZmllbGRdLCAxMCk7XG5cdH1cblxuXHR0aGlzLnRvID0gZnVuY3Rpb24gKHByb3BlcnRpZXMsIGR1cmF0aW9uKSB7XG5cblx0XHRpZiAoZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0X2R1cmF0aW9uID0gZHVyYXRpb247XG5cdFx0fVxuXG5cdFx0X3ZhbHVlc0VuZCA9IHByb3BlcnRpZXM7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAodGltZSkge1xuXG5cdFx0VFdFRU4uYWRkKHRoaXMpO1xuXG5cdFx0X2lzUGxheWluZyA9IHRydWU7XG5cblx0XHRfb25TdGFydENhbGxiYWNrRmlyZWQgPSBmYWxzZTtcblxuXHRcdF9zdGFydFRpbWUgPSB0aW1lICE9PSB1bmRlZmluZWQgPyB0aW1lIDogd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuXHRcdF9zdGFydFRpbWUgKz0gX2RlbGF5VGltZTtcblxuXHRcdGZvciAodmFyIHByb3BlcnR5IGluIF92YWx1ZXNFbmQpIHtcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgYW4gQXJyYXkgd2FzIHByb3ZpZGVkIGFzIHByb3BlcnR5IHZhbHVlXG5cdFx0XHRpZiAoX3ZhbHVlc0VuZFtwcm9wZXJ0eV0gaW5zdGFuY2VvZiBBcnJheSkge1xuXG5cdFx0XHRcdGlmIChfdmFsdWVzRW5kW3Byb3BlcnR5XS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENyZWF0ZSBhIGxvY2FsIGNvcHkgb2YgdGhlIEFycmF5IHdpdGggdGhlIHN0YXJ0IHZhbHVlIGF0IHRoZSBmcm9udFxuXHRcdFx0XHRfdmFsdWVzRW5kW3Byb3BlcnR5XSA9IFtfb2JqZWN0W3Byb3BlcnR5XV0uY29uY2F0KF92YWx1ZXNFbmRbcHJvcGVydHldKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBgdG8oKWAgc3BlY2lmaWVzIGEgcHJvcGVydHkgdGhhdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBzb3VyY2Ugb2JqZWN0LFxuXHRcdFx0Ly8gd2Ugc2hvdWxkIG5vdCBzZXQgdGhhdCBwcm9wZXJ0eSBpbiB0aGUgb2JqZWN0XG5cdFx0XHRpZiAoX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRfdmFsdWVzU3RhcnRbcHJvcGVydHldID0gX29iamVjdFtwcm9wZXJ0eV07XG5cblx0XHRcdGlmICgoX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSBpbnN0YW5jZW9mIEFycmF5KSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0X3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSAqPSAxLjA7IC8vIEVuc3VyZXMgd2UncmUgdXNpbmcgbnVtYmVycywgbm90IHN0cmluZ3Ncblx0XHRcdH1cblxuXHRcdFx0X3ZhbHVlc1N0YXJ0UmVwZWF0W3Byb3BlcnR5XSA9IF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gfHwgMDtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5zdG9wID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0aWYgKCFfaXNQbGF5aW5nKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRUV0VFTi5yZW1vdmUodGhpcyk7XG5cdFx0X2lzUGxheWluZyA9IGZhbHNlO1xuXG5cdFx0aWYgKF9vblN0b3BDYWxsYmFjayAhPT0gbnVsbCkge1xuXHRcdFx0X29uU3RvcENhbGxiYWNrLmNhbGwoX29iamVjdCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wQ2hhaW5lZFR3ZWVucygpO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5zdG9wQ2hhaW5lZFR3ZWVucyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGZvciAodmFyIGkgPSAwLCBudW1DaGFpbmVkVHdlZW5zID0gX2NoYWluZWRUd2VlbnMubGVuZ3RoOyBpIDwgbnVtQ2hhaW5lZFR3ZWVuczsgaSsrKSB7XG5cdFx0XHRfY2hhaW5lZFR3ZWVuc1tpXS5zdG9wKCk7XG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5kZWxheSA9IGZ1bmN0aW9uIChhbW91bnQpIHtcblxuXHRcdF9kZWxheVRpbWUgPSBhbW91bnQ7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uICh0aW1lcykge1xuXG5cdFx0X3JlcGVhdCA9IHRpbWVzO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy55b3lvID0gZnVuY3Rpb24gKHlveW8pIHtcblxuXHRcdF95b3lvID0geW95bztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cblx0dGhpcy5lYXNpbmcgPSBmdW5jdGlvbiAoZWFzaW5nKSB7XG5cblx0XHRfZWFzaW5nRnVuY3Rpb24gPSBlYXNpbmc7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLmludGVycG9sYXRpb24gPSBmdW5jdGlvbiAoaW50ZXJwb2xhdGlvbikge1xuXG5cdFx0X2ludGVycG9sYXRpb25GdW5jdGlvbiA9IGludGVycG9sYXRpb247XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLmNoYWluID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0X2NoYWluZWRUd2VlbnMgPSBhcmd1bWVudHM7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLm9uU3RhcnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblxuXHRcdF9vblN0YXJ0Q2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMub25VcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblxuXHRcdF9vblVwZGF0ZUNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLm9uQ29tcGxldGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblxuXHRcdF9vbkNvbXBsZXRlQ2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMub25TdG9wID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cblx0XHRfb25TdG9wQ2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKHRpbWUpIHtcblxuXHRcdHZhciBwcm9wZXJ0eTtcblx0XHR2YXIgZWxhcHNlZDtcblx0XHR2YXIgdmFsdWU7XG5cblx0XHRpZiAodGltZSA8IF9zdGFydFRpbWUpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGlmIChfb25TdGFydENhbGxiYWNrRmlyZWQgPT09IGZhbHNlKSB7XG5cblx0XHRcdGlmIChfb25TdGFydENhbGxiYWNrICE9PSBudWxsKSB7XG5cdFx0XHRcdF9vblN0YXJ0Q2FsbGJhY2suY2FsbChfb2JqZWN0KTtcblx0XHRcdH1cblxuXHRcdFx0X29uU3RhcnRDYWxsYmFja0ZpcmVkID0gdHJ1ZTtcblxuXHRcdH1cblxuXHRcdGVsYXBzZWQgPSAodGltZSAtIF9zdGFydFRpbWUpIC8gX2R1cmF0aW9uO1xuXHRcdGVsYXBzZWQgPSBlbGFwc2VkID4gMSA/IDEgOiBlbGFwc2VkO1xuXG5cdFx0dmFsdWUgPSBfZWFzaW5nRnVuY3Rpb24oZWxhcHNlZCk7XG5cblx0XHRmb3IgKHByb3BlcnR5IGluIF92YWx1ZXNFbmQpIHtcblxuXHRcdFx0Ly8gRG9uJ3QgdXBkYXRlIHByb3BlcnRpZXMgdGhhdCBkbyBub3QgZXhpc3QgaW4gdGhlIHNvdXJjZSBvYmplY3Rcblx0XHRcdGlmIChfdmFsdWVzU3RhcnRbcHJvcGVydHldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzdGFydCA9IF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gfHwgMDtcblx0XHRcdHZhciBlbmQgPSBfdmFsdWVzRW5kW3Byb3BlcnR5XTtcblxuXHRcdFx0aWYgKGVuZCBpbnN0YW5jZW9mIEFycmF5KSB7XG5cblx0XHRcdFx0X29iamVjdFtwcm9wZXJ0eV0gPSBfaW50ZXJwb2xhdGlvbkZ1bmN0aW9uKGVuZCwgdmFsdWUpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFBhcnNlcyByZWxhdGl2ZSBlbmQgdmFsdWVzIHdpdGggc3RhcnQgYXMgYmFzZSAoZS5nLjogKzEwLCAtMylcblx0XHRcdFx0aWYgKHR5cGVvZiAoZW5kKSA9PT0gJ3N0cmluZycpIHtcblxuXHRcdFx0XHRcdGlmIChlbmQuc3RhcnRzV2l0aCgnKycpIHx8IGVuZC5zdGFydHNXaXRoKCctJykpIHtcblx0XHRcdFx0XHRcdGVuZCA9IHN0YXJ0ICsgcGFyc2VGbG9hdChlbmQsIDEwKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZW5kID0gcGFyc2VGbG9hdChlbmQsIDEwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQcm90ZWN0IGFnYWluc3Qgbm9uIG51bWVyaWMgcHJvcGVydGllcy5cblx0XHRcdFx0aWYgKHR5cGVvZiAoZW5kKSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRfb2JqZWN0W3Byb3BlcnR5XSA9IHN0YXJ0ICsgKGVuZCAtIHN0YXJ0KSAqIHZhbHVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmIChfb25VcGRhdGVDYWxsYmFjayAhPT0gbnVsbCkge1xuXHRcdFx0X29uVXBkYXRlQ2FsbGJhY2suY2FsbChfb2JqZWN0LCB2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKGVsYXBzZWQgPT09IDEpIHtcblxuXHRcdFx0aWYgKF9yZXBlYXQgPiAwKSB7XG5cblx0XHRcdFx0aWYgKGlzRmluaXRlKF9yZXBlYXQpKSB7XG5cdFx0XHRcdFx0X3JlcGVhdC0tO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVhc3NpZ24gc3RhcnRpbmcgdmFsdWVzLCByZXN0YXJ0IGJ5IG1ha2luZyBzdGFydFRpbWUgPSBub3dcblx0XHRcdFx0Zm9yIChwcm9wZXJ0eSBpbiBfdmFsdWVzU3RhcnRSZXBlYXQpIHtcblxuXHRcdFx0XHRcdGlmICh0eXBlb2YgKF92YWx1ZXNFbmRbcHJvcGVydHldKSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRcdF92YWx1ZXNTdGFydFJlcGVhdFtwcm9wZXJ0eV0gPSBfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldICsgcGFyc2VGbG9hdChfdmFsdWVzRW5kW3Byb3BlcnR5XSwgMTApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChfeW95bykge1xuXHRcdFx0XHRcdFx0dmFyIHRtcCA9IF92YWx1ZXNTdGFydFJlcGVhdFtwcm9wZXJ0eV07XG5cblx0XHRcdFx0XHRcdF92YWx1ZXNTdGFydFJlcGVhdFtwcm9wZXJ0eV0gPSBfdmFsdWVzRW5kW3Byb3BlcnR5XTtcblx0XHRcdFx0XHRcdF92YWx1ZXNFbmRbcHJvcGVydHldID0gdG1wO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gPSBfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoX3lveW8pIHtcblx0XHRcdFx0XHRfcmV2ZXJzZWQgPSAhX3JldmVyc2VkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0X3N0YXJ0VGltZSA9IHRpbWUgKyBfZGVsYXlUaW1lO1xuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmIChfb25Db21wbGV0ZUNhbGxiYWNrICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0X29uQ29tcGxldGVDYWxsYmFjay5jYWxsKF9vYmplY3QpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIG51bUNoYWluZWRUd2VlbnMgPSBfY2hhaW5lZFR3ZWVucy5sZW5ndGg7IGkgPCBudW1DaGFpbmVkVHdlZW5zOyBpKyspIHtcblx0XHRcdFx0XHQvLyBNYWtlIHRoZSBjaGFpbmVkIHR3ZWVucyBzdGFydCBleGFjdGx5IGF0IHRoZSB0aW1lIHRoZXkgc2hvdWxkLFxuXHRcdFx0XHRcdC8vIGV2ZW4gaWYgdGhlIGB1cGRhdGUoKWAgbWV0aG9kIHdhcyBjYWxsZWQgd2F5IHBhc3QgdGhlIGR1cmF0aW9uIG9mIHRoZSB0d2VlblxuXHRcdFx0XHRcdF9jaGFpbmVkVHdlZW5zW2ldLnN0YXJ0KF9zdGFydFRpbWUgKyBfZHVyYXRpb24pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblxuXHR9O1xuXG59O1xuXG5cblRXRUVOLkVhc2luZyA9IHtcblxuXHRMaW5lYXI6IHtcblxuXHRcdE5vbmU6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdHJldHVybiBrO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0UXVhZHJhdGljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKGspIHtcblxuXHRcdFx0cmV0dXJuIGsgKiBrO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcblxuXHRcdFx0cmV0dXJuIGsgKiAoMiAtIGspO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRpZiAoKGsgKj0gMikgPCAxKSB7XG5cdFx0XHRcdHJldHVybiAwLjUgKiBrICogaztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIC0gMC41ICogKC0tayAqIChrIC0gMikgLSAxKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEN1YmljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKGspIHtcblxuXHRcdFx0cmV0dXJuIGsgKiBrICogaztcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdHJldHVybiAtLWsgKiBrICogayArIDE7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcblx0XHRcdFx0cmV0dXJuIDAuNSAqIGsgKiBrICogaztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICsgMik7XG5cblx0XHR9XG5cblx0fSxcblxuXHRRdWFydGljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKGspIHtcblxuXHRcdFx0cmV0dXJuIGsgKiBrICogayAqIGs7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gMSAtICgtLWsgKiBrICogayAqIGspO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRpZiAoKGsgKj0gMikgPCAxKSB7XG5cdFx0XHRcdHJldHVybiAwLjUgKiBrICogayAqIGsgKiBrO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gLSAwLjUgKiAoKGsgLT0gMikgKiBrICogayAqIGsgLSAyKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdFF1aW50aWM6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gayAqIGsgKiBrICogayAqIGs7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gLS1rICogayAqIGsgKiBrICogayArIDE7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcblx0XHRcdFx0cmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGsgKiBrO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gMC41ICogKChrIC09IDIpICogayAqIGsgKiBrICogayArIDIpO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0U2ludXNvaWRhbDoge1xuXG5cdFx0SW46IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdHJldHVybiAxIC0gTWF0aC5jb3MoayAqIE1hdGguUEkgLyAyKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdHJldHVybiBNYXRoLnNpbihrICogTWF0aC5QSSAvIDIpO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gMC41ICogKDEgLSBNYXRoLmNvcyhNYXRoLlBJICogaykpO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0RXhwb25lbnRpYWw6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gayA9PT0gMCA/IDAgOiBNYXRoLnBvdygxMDI0LCBrIC0gMSk7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gayA9PT0gMSA/IDEgOiAxIC0gTWF0aC5wb3coMiwgLSAxMCAqIGspO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRpZiAoayA9PT0gMCkge1xuXHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGsgPT09IDEpIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcblx0XHRcdFx0cmV0dXJuIDAuNSAqIE1hdGgucG93KDEwMjQsIGsgLSAxKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIDAuNSAqICgtIE1hdGgucG93KDIsIC0gMTAgKiAoayAtIDEpKSArIDIpO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0Q2lyY3VsYXI6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gMSAtIE1hdGguc3FydCgxIC0gayAqIGspO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcblxuXHRcdFx0cmV0dXJuIE1hdGguc3FydCgxIC0gKC0tayAqIGspKTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcblxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xuXHRcdFx0XHRyZXR1cm4gLSAwLjUgKiAoTWF0aC5zcXJ0KDEgLSBrICogaykgLSAxKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIDAuNSAqIChNYXRoLnNxcnQoMSAtIChrIC09IDIpICogaykgKyAxKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEVsYXN0aWM6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHR2YXIgcztcblx0XHRcdHZhciBhID0gMC4xO1xuXHRcdFx0dmFyIHAgPSAwLjQ7XG5cblx0XHRcdGlmIChrID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoayA9PT0gMSkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFhIHx8IGEgPCAxKSB7XG5cdFx0XHRcdGEgPSAxO1xuXHRcdFx0XHRzID0gcCAvIDQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzID0gcCAqIE1hdGguYXNpbigxIC8gYSkgLyAoMiAqIE1hdGguUEkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gLSAoYSAqIE1hdGgucG93KDIsIDEwICogKGsgLT0gMSkpICogTWF0aC5zaW4oKGsgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSk7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHR2YXIgcztcblx0XHRcdHZhciBhID0gMC4xO1xuXHRcdFx0dmFyIHAgPSAwLjQ7XG5cblx0XHRcdGlmIChrID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoayA9PT0gMSkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFhIHx8IGEgPCAxKSB7XG5cdFx0XHRcdGEgPSAxO1xuXHRcdFx0XHRzID0gcCAvIDQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzID0gcCAqIE1hdGguYXNpbigxIC8gYSkgLyAoMiAqIE1hdGguUEkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKGEgKiBNYXRoLnBvdygyLCAtIDEwICogaykgKiBNYXRoLnNpbigoayAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgMSk7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdHZhciBzO1xuXHRcdFx0dmFyIGEgPSAwLjE7XG5cdFx0XHR2YXIgcCA9IDAuNDtcblxuXHRcdFx0aWYgKGsgPT09IDApIHtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChrID09PSAxKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWEgfHwgYSA8IDEpIHtcblx0XHRcdFx0YSA9IDE7XG5cdFx0XHRcdHMgPSBwIC8gNDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHMgPSBwICogTWF0aC5hc2luKDEgLyBhKSAvICgyICogTWF0aC5QSSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcblx0XHRcdFx0cmV0dXJuIC0gMC41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqIChrIC09IDEpKSAqIE1hdGguc2luKChrIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqIChrIC09IDEpKSAqIE1hdGguc2luKChrIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKiAwLjUgKyAxO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0QmFjazoge1xuXG5cdFx0SW46IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdHZhciBzID0gMS43MDE1ODtcblxuXHRcdFx0cmV0dXJuIGsgKiBrICogKChzICsgMSkgKiBrIC0gcyk7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHR2YXIgcyA9IDEuNzAxNTg7XG5cblx0XHRcdHJldHVybiAtLWsgKiBrICogKChzICsgMSkgKiBrICsgcykgKyAxO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHR2YXIgcyA9IDEuNzAxNTggKiAxLjUyNTtcblxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xuXHRcdFx0XHRyZXR1cm4gMC41ICogKGsgKiBrICogKChzICsgMSkgKiBrIC0gcykpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gMC41ICogKChrIC09IDIpICogayAqICgocyArIDEpICogayArIHMpICsgMik7XG5cblx0XHR9XG5cblx0fSxcblxuXHRCb3VuY2U6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xuXG5cdFx0XHRyZXR1cm4gMSAtIFRXRUVOLkVhc2luZy5Cb3VuY2UuT3V0KDEgLSBrKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdGlmIChrIDwgKDEgLyAyLjc1KSkge1xuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogayAqIGs7XG5cdFx0XHR9IGVsc2UgaWYgKGsgPCAoMiAvIDIuNzUpKSB7XG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoayAtPSAoMS41IC8gMi43NSkpICogayArIDAuNzU7XG5cdFx0XHR9IGVsc2UgaWYgKGsgPCAoMi41IC8gMi43NSkpIHtcblx0XHRcdFx0cmV0dXJuIDcuNTYyNSAqIChrIC09ICgyLjI1IC8gMi43NSkpICogayArIDAuOTM3NTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoayAtPSAoMi42MjUgLyAyLjc1KSkgKiBrICsgMC45ODQzNzU7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG5cblx0XHRcdGlmIChrIDwgMC41KSB7XG5cdFx0XHRcdHJldHVybiBUV0VFTi5FYXNpbmcuQm91bmNlLkluKGsgKiAyKSAqIDAuNTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIFRXRUVOLkVhc2luZy5Cb3VuY2UuT3V0KGsgKiAyIC0gMSkgKiAwLjUgKyAwLjU7XG5cblx0XHR9XG5cblx0fVxuXG59O1xuXG5UV0VFTi5JbnRlcnBvbGF0aW9uID0ge1xuXG5cdExpbmVhcjogZnVuY3Rpb24gKHYsIGspIHtcblxuXHRcdHZhciBtID0gdi5sZW5ndGggLSAxO1xuXHRcdHZhciBmID0gbSAqIGs7XG5cdFx0dmFyIGkgPSBNYXRoLmZsb29yKGYpO1xuXHRcdHZhciBmbiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuTGluZWFyO1xuXG5cdFx0aWYgKGsgPCAwKSB7XG5cdFx0XHRyZXR1cm4gZm4odlswXSwgdlsxXSwgZik7XG5cdFx0fVxuXG5cdFx0aWYgKGsgPiAxKSB7XG5cdFx0XHRyZXR1cm4gZm4odlttXSwgdlttIC0gMV0sIG0gLSBmKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZm4odltpXSwgdltpICsgMSA+IG0gPyBtIDogaSArIDFdLCBmIC0gaSk7XG5cblx0fSxcblxuXHRCZXppZXI6IGZ1bmN0aW9uICh2LCBrKSB7XG5cblx0XHR2YXIgYiA9IDA7XG5cdFx0dmFyIG4gPSB2Lmxlbmd0aCAtIDE7XG5cdFx0dmFyIHB3ID0gTWF0aC5wb3c7XG5cdFx0dmFyIGJuID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5CZXJuc3RlaW47XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8PSBuOyBpKyspIHtcblx0XHRcdGIgKz0gcHcoMSAtIGssIG4gLSBpKSAqIHB3KGssIGkpICogdltpXSAqIGJuKG4sIGkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBiO1xuXG5cdH0sXG5cblx0Q2F0bXVsbFJvbTogZnVuY3Rpb24gKHYsIGspIHtcblxuXHRcdHZhciBtID0gdi5sZW5ndGggLSAxO1xuXHRcdHZhciBmID0gbSAqIGs7XG5cdFx0dmFyIGkgPSBNYXRoLmZsb29yKGYpO1xuXHRcdHZhciBmbiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuQ2F0bXVsbFJvbTtcblxuXHRcdGlmICh2WzBdID09PSB2W21dKSB7XG5cblx0XHRcdGlmIChrIDwgMCkge1xuXHRcdFx0XHRpID0gTWF0aC5mbG9vcihmID0gbSAqICgxICsgaykpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZm4odlsoaSAtIDEgKyBtKSAlIG1dLCB2W2ldLCB2WyhpICsgMSkgJSBtXSwgdlsoaSArIDIpICUgbV0sIGYgLSBpKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGlmIChrIDwgMCkge1xuXHRcdFx0XHRyZXR1cm4gdlswXSAtIChmbih2WzBdLCB2WzBdLCB2WzFdLCB2WzFdLCAtZikgLSB2WzBdKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGsgPiAxKSB7XG5cdFx0XHRcdHJldHVybiB2W21dIC0gKGZuKHZbbV0sIHZbbV0sIHZbbSAtIDFdLCB2W20gLSAxXSwgZiAtIG0pIC0gdlttXSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbih2W2kgPyBpIC0gMSA6IDBdLCB2W2ldLCB2W20gPCBpICsgMSA/IG0gOiBpICsgMV0sIHZbbSA8IGkgKyAyID8gbSA6IGkgKyAyXSwgZiAtIGkpO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0VXRpbHM6IHtcblxuXHRcdExpbmVhcjogZnVuY3Rpb24gKHAwLCBwMSwgdCkge1xuXG5cdFx0XHRyZXR1cm4gKHAxIC0gcDApICogdCArIHAwO1xuXG5cdFx0fSxcblxuXHRcdEJlcm5zdGVpbjogZnVuY3Rpb24gKG4sIGkpIHtcblxuXHRcdFx0dmFyIGZjID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5GYWN0b3JpYWw7XG5cblx0XHRcdHJldHVybiBmYyhuKSAvIGZjKGkpIC8gZmMobiAtIGkpO1xuXG5cdFx0fSxcblxuXHRcdEZhY3RvcmlhbDogKGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIGEgPSBbMV07XG5cblx0XHRcdHJldHVybiBmdW5jdGlvbiAobikge1xuXG5cdFx0XHRcdHZhciBzID0gMTtcblxuXHRcdFx0XHRpZiAoYVtuXSkge1xuXHRcdFx0XHRcdHJldHVybiBhW25dO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICh2YXIgaSA9IG47IGkgPiAxOyBpLS0pIHtcblx0XHRcdFx0XHRzICo9IGk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhW25dID0gcztcblx0XHRcdFx0cmV0dXJuIHM7XG5cblx0XHRcdH07XG5cblx0XHR9KSgpLFxuXG5cdFx0Q2F0bXVsbFJvbTogZnVuY3Rpb24gKHAwLCBwMSwgcDIsIHAzLCB0KSB7XG5cblx0XHRcdHZhciB2MCA9IChwMiAtIHAwKSAqIDAuNTtcblx0XHRcdHZhciB2MSA9IChwMyAtIHAxKSAqIDAuNTtcblx0XHRcdHZhciB0MiA9IHQgKiB0O1xuXHRcdFx0dmFyIHQzID0gdCAqIHQyO1xuXG5cdFx0XHRyZXR1cm4gKDIgKiBwMSAtIDIgKiBwMiArIHYwICsgdjEpICogdDMgKyAoLSAzICogcDEgKyAzICogcDIgLSAyICogdjAgLSB2MSkgKiB0MiArIHYwICogdCArIHAxO1xuXG5cdFx0fVxuXG5cdH1cblxufTtcblxuLy8gVU1EIChVbml2ZXJzYWwgTW9kdWxlIERlZmluaXRpb24pXG4oZnVuY3Rpb24gKHJvb3QpIHtcblxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cblx0XHQvLyBBTURcblx0XHRkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBUV0VFTjtcblx0XHR9KTtcblxuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXG5cdFx0Ly8gTm9kZS5qc1xuXHRcdG1vZHVsZS5leHBvcnRzID0gVFdFRU47XG5cblx0fSBlbHNlIGlmIChyb290ICE9PSB1bmRlZmluZWQpIHtcblxuXHRcdC8vIEdsb2JhbCB2YXJpYWJsZVxuXHRcdHJvb3QuVFdFRU4gPSBUV0VFTjtcblxuXHR9XG5cbn0pKHRoaXMpO1xuIl19
