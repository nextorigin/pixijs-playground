(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function() {
  var Console, Iced, Spine, inspect,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice;

  Spine = require("spine");

  Iced = require('iced-coffee-script');

  inspect = require("util").inspect;

  Console = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Console, _super);

    Console.prototype.logPrefix = "(Playground:Console)";

    DEFAULT_SETTINGS = {
      lastVariable: '$_',
      maxLines: 8,
      maxDepth: 2,
      showHidden: false,
      colorize: false
    };

    Console.prototype.elements = {
      "button.refresh-console": "buttonRefreshConsole"
    };

    Console.prototype.addToHistory = function(s) {
      this.history.unshift(s);
      return this.historyi = -1;
    };

    Console.prototype.addToSaved = function(s) {
      this.saved += s.slice(0, -1) === '\\' ? s.slice(0, -1) : s;
      this.saved += '\n';
      return this.addToHistory(s);
    };

    Console.prototype.handleKeypress = function(e) {
      var input;
      switch (e.which) {
        case 13:
          e.preventDefault();
          input = this.input.val();
          if (input) {
            this.addToSaved(input);
            if (input.slice(0, -1) !== '\\' && !this.multiline) {
              return this.processSaved();
            }
          }
          break;
        case 27:
          e.preventDefault();
          input = this.input.val();
          if (input && this.multiline && this.saved) {
            input = this.input.val();
            this.addToSaved(input);
            this.processSaved();
          } else if (this.multiline && this.saved) {
            this.processSaved();
          }
          return this.multiline = !this.multiline;
        case 38:
          e.preventDefault();
          if (this.historyi < this.history.length - 1) {
            this.historyi += 1;
            return this.input.val(this.history[this.historyi]);
          }
          break;
        case 40:
          e.preventDefault();
          if (this.historyi > 0) {
            this.historyi += -1;
            return this.input.val(this.history[this.historyi]);
          }
      }
    };

    Console.prototype.mouseenterConsoleRefresh = function() {
      return this.buttonRefreshConsole.fadeIn(180);
    };

    Console.prototype.mouseenterKeepConsoleRefresh = function() {
      return this.buttonRefreshConsole.stop(true).fadeTo(1, 1);
    };

    Console.prototype.mouseleaveConsoleRefresh = function() {
      return this.buttonRefreshConsole.fadeOut(180);
    };

    Console.prototype.events = {
      "mouseenter aside#output": "mouseenterConsoleRefresh",
      "mouseenter button.refresh-console": "mouseenterKeepConsoleRefresh",
      "mouseleave aside#output": "mouseleaveConsoleRefresh"
    };

    function Console(options, settings) {
      var k, v, _ref;
      if (settings == null) {
        settings = {};
      }
      this.printValue = __bind(this.printValue, this);
      this.print = __bind(this.print, this);
      this.handleKeypress = __bind(this.handleKeypress, this);
      this.addToSaved = __bind(this.addToSaved, this);
      this.addToHistory = __bind(this.addToHistory, this);
      this.history = [];
      this.historyi = -1;
      this.saved = '';
      this.multiline = false;
      Console.__super__.constructor.apply(this, arguments);
      this.input.keydown(this.handleKeypress);
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
    }

    Console.prototype.lang = function(name) {
      if (name) {
        return this._lang = name;
      } else {
        return this._lang;
      }
    };

    Console.prototype.processSaved = function() {
      var compiled, e, value;
      try {
        compiled = (function() {
          switch (this.lang()) {
            case "coffee":
              return Iced.compile(this.saved, {
                bare: true
              });
            case "vanilla":
              return this.saved;
          }
        }).call(this);
        value = eval.call(window, compiled);
        window[this.settings.lastVariable] = value;
        return this.printValue(value);
      } catch (_error) {
        e = _error;
        return this.printCompileError(e);
      } finally {
        this.saved = '';
      }
    };

    Console.prototype.print = function() {
      var args, o, s;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      s = args.join(' ') || ' ';
      o = this.el.html() + s + '\n';
      this.html(o.split('\n').slice(-this.settings.maxLines).join('\n'));
      return void 0;
    };

    Console.prototype.printValue = function(value) {
      return this.print(inspect(value, this.settings.showHidden, this.settings.maxDepth, this.settings.colorize));
    };

    Console.prototype.printCompileError = function(e) {
      var output;
      if (e.stack) {
        output = e.stack;
      }
      if ((output != null ? output.split('\n')[0] : void 0) !== e.toString()) {
        output = "" + (e.toString()) + "\n" + e.stack;
      } else {
        output = e.toString();
      }
      return this.print(output);
    };

    return Console;

  })(Spine.Controller);

  module.exports = Console;

}).call(this);


},{"iced-coffee-script":20,"spine":39,"util":46}],2:[function(require,module,exports){
(function() {
  var CodeMirror, Editor, FileQueue, Iced, IcedMirror, Spine, iced, js2coffee, __iced_k, __iced_k_noop,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = require('spine');

  Iced = require('iced-coffee-script');

  CodeMirror = require("codemirror");

  IcedMirror = require("codemirror-iced-coffee-script");

  js2coffee = require("js2coffee/dist/js2coffee");

  FileQueue = require('../lib/filequeue');

  Editor = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Editor, _super);

    Editor.prototype.logPrefix = "(Playground:Editor)";

    DEFAULT_SETTINGS = {
      lastVariable: '$_'
    };

    Editor.prototype.elements = {
      "nav.sandbox": "navSandbox",
      "textarea.sandbox": "placeholder",
      "footer": "footer",
      "aside#help": "help"
    };

    Editor.prototype.toggleHelp = function() {
      if (this.help.is(":visible")) {
        return this.help.fadeOut(300);
      } else {
        return this.help.fadeIn(300);
      }
    };

    Editor.prototype.saveSettings = function() {
      var input;
      input = this.val();
      this.addToSaved(input);
      return localStorage.settings = JSON.stringify($.extend({}, this.settings, {
        assets: window.assets,
        script: this.saved
      }));
    };

    Editor.prototype.runOrStopUserScript = function(e) {
      var button;
      button = $(e.target).closest('button');
      if (button.is(".selected")) {
        this.stopUserScript();
        button.text("run!");
      } else {
        this.runUserScript();
        button.text("stop!");
      }
      return button.toggleClass("selected");
    };

    Editor.prototype.runUserScript = function() {
      var input;
      if (!(input = this.val())) {
        return;
      }
      this.addToSaved(input);
      return this.processSaved();
    };

    Editor.prototype.stopUserScript = function() {
      return window.cancelAnimationFrame(window.frame);
    };

    Editor.prototype.processSaved = function() {
      var compiled, e, value;
      this.trigger("presave");
      try {
        compiled = (function() {
          switch (this.lang()) {
            case "coffee":
              return Iced.compile(this.saved, {
                bare: true,
                runtime: "inline"
              });
            case "vanilla":
              return this.saved;
          }
        }).call(this);
        value = eval.call(window, compiled);
        window[this.settings.lastVariable] = value;
        this.console.printValue(value);
      } catch (_error) {
        e = _error;
        this.console.printCompileError(e);
      }
      return this.saved = '';
    };

    Editor.prototype.addToHistory = function(s) {
      this.history.unshift(s);
      return this.historyi = -1;
    };

    Editor.prototype.addToSaved = function(s) {
      this.saved += s.slice(0, -1) === '\\' ? s.slice(0, -1) : s;
      this.saved += '\n';
      return this.addToHistory(s);
    };

    Editor.prototype.mouseenterExampleNav = function() {
      return this.navSandbox.fadeIn(180);
    };

    Editor.prototype.mouseenterKeepExampleNav = function() {
      return this.navSandbox.stop(true).fadeTo(1, 1);
    };

    Editor.prototype.mouseleaveExampleNav = function() {
      return this.navSandbox.fadeOut(180);
    };

    Editor.prototype.switchLang = function(e) {
      var el;
      el = $(e.target).closest('button');
      if (el.is(".selected")) {
        return;
      }
      if (((el.is(".langswitch-coffee")) && this.switchToCoffee()) || this.switchToVanilla()) {
        return el.addClass("selected").siblings().removeClass("selected");
      }
    };

    Editor.prototype.lang = function(name) {
      if (name) {
        return this.trigger("langchange", this._lang = name);
      } else {
        return this._lang;
      }
    };

    Editor.prototype.events = {
      "click button.help": "toggleHelp",
      "click button.save": "saveSettings",
      "click button.run": "runOrStopUserScript",
      "click button.refresh-example": "refreshExample",
      "mouseenter .CodeMirror": "mouseenterExampleNav",
      "mouseenter nav.sandbox": "mouseenterKeepExampleNav",
      "mouseleave .CodeMirror": "mouseleaveExampleNav",
      "click button.langswitch-coffee": "switchLang",
      "click button.langswitch-vanilla": "switchLang",
      "dragover footer": "fileDragHover",
      "dragleave footer": "fileDragHover",
      "drop footer": "fileSelectHandler"
    };

    function Editor(options, settings) {
      var k, v, _ref;
      if (settings == null) {
        settings = {};
      }
      this.addToSaved = __bind(this.addToSaved, this);
      this.addToHistory = __bind(this.addToHistory, this);
      this.history = [];
      this.historyi = -1;
      this.saved = '';
      Editor.__super__.constructor.apply(this, arguments);
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
          switch (k) {
            case "assets":
            case "userscripts":
              window[k] = v;
          }
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
      CodeMirror.keyMap.tabSpace = {
        fallthrough: ['default'],
        Tab: function(cm) {
          var spaces;
          spaces = Array(cm.getOption("indentUnit") + 1).join(" ");
          return cm.replaceSelection(spaces, "end", "+input");
        }
      };
      this.codemirror || (this.codemirror = CodeMirror.fromTextArea(this.placeholder[0], {
        mode: "icedcoffeescript",
        theme: "monokai",
        lineNumbers: true,
        tabSize: 2,
        keyMap: "tabSpace"
      }));
      this.wrapper = $(this.codemirror.getWrapperElement());
      this.wrapper.addClass("sandbox");
      if (this.settings.script) {
        this.val(this.settings.script);
        this.scrollToEnd();
      }
    }

    Editor.prototype.render = function(examplename) {
      return this.loadExample(examplename);
    };

    Editor.prototype.val = function(value) {
      if (value) {
        return this.codemirror.doc.setValue("" + value + "\n\n\n\n");
      } else {
        return this.codemirror.doc.getValue();
      }
    };

    Editor.prototype.loadExample = function(name) {
      var example, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.example = name;
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.loadExample"
          });
          _this.examples[name](__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return example = arguments[0];
              };
            })(),
            lineno: 147
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          _this.val(example);
          return _this.scrollToEnd();
        };
      })(this));
    };

    Editor.prototype.scrollToEnd = function() {
      return this.codemirror.scrollIntoView(this.codemirror.doc.lineCount() - 1);
    };

    Editor.prototype.refreshExample = function() {
      return this.loadExample(this.example);
    };

    Editor.prototype.clear = function() {
      return this.val("");
    };

    Editor.prototype.switchToVanilla = function() {
      var compiled, e, input;
      if (!(input = this.val())) {
        this.lang("vanilla");
        return true;
      }
      try {
        compiled = Iced.compile(input, {
          bare: true,
          runtime: "inline"
        });
        this.val(compiled);
        this.lang("vanilla");
        return true;
      } catch (_error) {
        e = _error;
        this.console.printCompileError(e);
        return false;
      }
    };

    Editor.prototype.switchToCoffee = function() {
      var compiled, e, input, output;
      if (!(input = this.val())) {
        this.lang("coffee");
        return true;
      }
      try {
        compiled = js2coffee.build(input, {
          show_src_lineno: true,
          indent: "  "
        });
        this.val("" + compiled.code);
        this.lang("coffee");
        return true;
      } catch (_error) {
        e = _error;
        output = this.console.printCompileError(e);
        this.print(output);
        return false;
      }
    };

    Editor.prototype.fileDragHover = function(e) {
      e.stopPropagation();
      e.preventDefault();
      return this.footer.toggleClass("draghover", e.type === "dragover");
    };

    Editor.prototype.fileSelectHandler = function(e) {
      var file, files, _i, _len, _results;
      this.fileDragHover(e);
      if (e.originalEvent != null) {
        e = e.originalEvent;
      }
      files = e.target.files || e.dataTransfer.files;
      _results = [];
      for (_i = 0, _len = files.length; _i < _len; _i++) {
        file = files[_i];
        _results.push(this.parseFile(file));
      }
      return _results;
    };

    Editor.prototype.parseFile = function(file) {
      var type;
      type = file.type;
      if (/(png|gif|jpeg|jpg)/.test(type)) {
        return this.parseImage(file);
      } else if (/(javascript|js|coffee|iced)/.test(type)) {
        return this.parseScript(file);
      } else {
        return this.console.print("Unknown filetype: " + type);
      }
    };

    Editor.prototype.parseImage = function(file) {
      var dataurl, name, status, value, varname, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      name = file.name;
      window.assets || (window.assets = []);
      varname = "window.assets[" + window.assets.length + "]";
      this.console.print("Adding " + name + " as " + varname);
      this.fileQueue || (this.fileQueue = new FileQueue);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.parseImage"
          });
          _this.fileQueue.awaitRead({
            file: file
          }, __iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                status = arguments[0];
                return dataurl = arguments[1];
              };
            })(),
            lineno: 218
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          if (status === "error") {
            return _this.log("Error: " + dataurl);
          }
          window.assets.push(dataurl);
          value = (function() {
            switch (this.lang()) {
              case "coffee":
                return "# " + name + "\nnewimage = " + varname + "\n" + (this.val().trim());
              case "vanilla":
                return "// " + name + "\nvar newimage = " + varname + "\n" + (this.val().trim());
            }
          }).call(_this);
          _this.val(value);
          return _this.codemirror.scrollIntoView(0);
        };
      })(this));
    };

    Editor.prototype.parseScript = function(file) {
      var name, status, text, value, varname, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      name = file.name;
      if (window.userscripts == null) {
        window.userscripts = [];
      }
      varname = "window.userscripts[" + window.userscripts.length + "]";
      this.console.print("Adding " + name + " as " + varname);
      this.fileQueue || (this.fileQueue = new FileQueue);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.parseScript"
          });
          _this.fileQueue.awaitRead({
            file: file,
            readAs: "Text"
          }, __iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                status = arguments[0];
                return text = arguments[1];
              };
            })(),
            lineno: 241
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          if (status === "error") {
            return _this.log("Error: " + text);
          }
          window.userscripts.push(text);
          value = (function() {
            switch (this.lang()) {
              case "coffee":
                return "# " + name + "\n# if this is a CommonJS module, run:\n# require.define \"module-name\": eval " + varname + "\n#\n# to save this in localStorage with the script, run:\n# app.editor.saveUserScript " + varname + "\nnewscript = " + varname + "\n" + (this.val().trim());
              case "vanilla":
                return "// " + name + "\n// if this is a CommonJS module, run:\n// require.define({\"module-name\": eval(" + varname + ")})\n//\n// to save this in localStorage with the script, run:\n// app.editor.saveUserScript(" + varname + ")\nvar newscript = " + varname + "\n" + (this.val().trim());
            }
          }).call(_this);
          _this.val(value);
          return _this.codemirror.scrollIntoView(0);
        };
      })(this));
    };

    Editor.prototype.saveUserScript = function(script) {
      var _base;
      if ((_base = this.settings).userscripts == null) {
        _base.userscripts = [];
      }
      if (__indexOf.call(this.settings.userscripts, script) < 0) {
        return this.settings.userscripts.push(script);
      }
    };

    return Editor;

  })(Spine.Controller);

  module.exports = Editor;

}).call(this);


},{"../lib/filequeue":5,"codemirror":17,"codemirror-iced-coffee-script":16,"iced-coffee-script":20,"iced-runtime":32,"js2coffee/dist/js2coffee":36,"spine":39}],3:[function(require,module,exports){
(function() {
  var PIXI, Spine, Stage, Stats, extend,
    __slice = [].slice,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Spine = require("spine");

  PIXI = require("../lib/pixi.dev.js");

  Stats = require("stats.js");

  extend = function() {
    var base, key, obj, objs, value, _i, _len;
    base = arguments[0], objs = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    for (_i = 0, _len = objs.length; _i < _len; _i++) {
      obj = objs[_i];
      for (key in obj) {
        value = obj[key];
        base[key] = value;
      }
    }
    return base;
  };

  Stage = (function(_super) {
    __extends(Stage, _super);

    Stage.prototype.logPrefix = "(Playground:Stage)";

    Stage.prototype.pixidefaults = {
      backgroundColor: 0xFFFFFF,
      transparent: false,
      antialias: false
    };

    Stage.prototype.resize = function() {};

    Stage.prototype.bindResize = function() {
      $(window).resize(this.resize);
      return $(window).on("onorientationchange", this.resize);
    };

    Stage.prototype.release = function() {
      $(window).off("resize", this.resize);
      return $(window).off("onorientationchange", this.resize);
    };

    Stage.prototype._frameFns = [];

    Stage.prototype.addFrameFn = function(fn) {
      return this._frameFns.push(fn);
    };

    Stage.prototype.removeFrameFn = function(fn) {
      return this._frameFns.splice(this._frameFns.indexOf(fn), 1);
    };

    Stage.prototype.ani = function(loopfn) {
      var recursiveloop;
      if (loopfn == null) {
        loopfn = function() {};
      }
      this.addFrameFn(loopfn);
      recursiveloop = (function(_this) {
        return function() {
          var fn, _i, _len, _ref;
          _this.stats.begin();
          _ref = _this._frameFns;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            fn = _ref[_i];
            fn();
          }
          _this.renderer.render(_this.stage);
          _this.frame = requestAnimFrame(recursiveloop);
          return _this.stats.end();
        };
      })(this);
      return this.frame = requestAnimFrame(recursiveloop);
    };

    function Stage(options, pixisettings) {
      if (pixisettings == null) {
        pixisettings = {};
      }
      Stage.__super__.constructor.apply(this, arguments);
      this.pixisettings = extend({}, this.pixidefaults, pixisettings);
      this.stage = new PIXI.Stage(this.pixisettings.backgroundColor);
      this.stage.width = this.el.width();
      this.stage.height = this.el.height();
      this.stage.interactive = this.pixisettings.interactive;
      window.stage = this.stage;
      window.ani = this.proxy(this.ani);
      window.PIXI = PIXI;
      this.render();
      this.bindResize();
      this.addChild = this.append;
      this.removeChildren = this.remove;
    }

    Stage.prototype.render = function() {
      this.renderer = PIXI.autoDetectRenderer(this.stage.width, this.stage.height, null, this.pixisettings.transparent, this.pixisettings.antialias);
      this.stats = new Stats;
      this.$stats = $(this.stats.domElement);
      window.renderer = this.renderer;
      window.stats = this.stats;
      this.el.append(this.renderer.view);
      this.hideStats();
      return this.el.append(this.$stats);
    };

    Stage.prototype.hideStats = function() {
      return this.$stats.css({
        display: "none"
      });
    };

    Stage.prototype.showStats = function() {
      return this.$stats.css({
        display: "block",
        position: "absolute"
      });
    };

    Stage.prototype.append = function() {
      var child, children, _i, _len;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      for (_i = 0, _len = children.length; _i < _len; _i++) {
        child = children[_i];
        if (child.display) {
          child.stage = this;
          child = child.display;
        }
        this.stage.addChild(child);
      }
      return this;
    };

    Stage.prototype.addChild = function() {};

    Stage.prototype.remove = function() {
      var child, children, _i;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      if (!children.length) {
        children = this.stage.children;
      }
      for (_i = children.length - 1; _i >= 0; _i += -1) {
        child = children[_i];
        if (child.display) {
          child.stage = null;
          child = child.display;
        }
        this.stage.removeChild(child);
      }
      return this;
    };

    Stage.prototype.removeChildren = function() {};

    Stage.prototype.refresh = function() {
      this.removeChildren();
      this.stats.end();
      return this.renderer.render(this.stage);
    };

    Stage.prototype.stackLevel = function(child) {
      return this.stage.children.indexOf(child.display || child);
    };

    Stage.prototype.bringToFront = function() {
      var children;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      this.removeChildren.apply(this, children);
      return this.append.apply(this, children);
    };

    Stage.prototype.sendToBack = function() {
      var children;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      return this.moveInStack.apply(this, __slice.call(children).concat([0]));
    };

    Stage.prototype.moveInStack = function() {
      var children, newLevel, _i;
      children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), newLevel = arguments[_i++];
      this.removeChildren.apply(this, children);
      return this.addChildrenAt.apply(this, __slice.call(children).concat([newLevel]));
    };

    Stage.prototype.addChildrenAt = function() {
      var child, children, newLevel, _i, _j, _k, _len, _len1;
      children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), newLevel = arguments[_i++];
      for (_j = 0, _len = children.length; _j < _len; _j++) {
        child = children[_j];
        if (child.display) {
          child.stage = this;
          child = child.display;
        }
      }
      for (_k = 0, _len1 = children.length; _k < _len1; _k++) {
        child = children[_k];
        this.stage.addChildAt(child.display || child, newLevel);
      }
      return this;
    };

    return Stage;

  })(Spine.Controller);

  module.exports = Stage;

}).call(this);


},{"../lib/pixi.dev.js":6,"spine":39,"stats.js":44}],4:[function(require,module,exports){
(function() {
  var Math2;

  Math2 = {
    random: function(from, to) {
      return Math.random() * (to - from) + from;
    },
    map: function(val, inputMin, inputMax, outputMin, outputMax) {
      return ((outputMax - outputMin) * ((val - inputMin) / (inputMax - inputMin))) + outputMin;
    },
    randomPlusMinus: function(chance) {
      chance = chance ? chance : 0.5;
      if (Math.random() > chance) {
        return -1;
      } else {
        return 1;
      }
    },
    randomInt: function(from, to) {
      return Math.floor(Math.random() * (++to - from) + from);
    },
    randomBool: function(chance) {
      chance = chance ? chance : 0.5;
      return Math.random() < chance;
    }
  };

  module.exports = Math2;

}).call(this);


},{}],5:[function(require,module,exports){
(function() {
  var FileQueue, iced, __iced_k, __iced_k_noop;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  FileQueue = (function() {
    function FileQueue() {}

    FileQueue.prototype.enabled = true;

    FileQueue.prototype.disable = function(callback) {
      var e;
      if (this.enabled) {
        this.enabled = false;
        try {
          return callback();
        } catch (_error) {
          e = _error;
          throw e;
        } finally {
          this.enabled = true;
        }
      } else {
        return callback();
      }
    };

    FileQueue.prototype.max = 100;

    FileQueue.prototype.throttle = 0;

    FileQueue.prototype.queue = function(request) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.pipeliner || (this.pipeliner = new Pipeliner(this.max, this.throttle));
      if (!request) {
        return this.pipeliner.queue;
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced",
            funcname: "FileQueue.queue"
          });
          _this.pipeliner.waitInQueue(__iced_deferrals.defer({
            lineno: 21
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return request(_this.pipeliner.defer({
            lineno: 22,
            context: __iced_deferrals
          }));
        };
      })(this));
    };

    FileQueue.prototype.clearQueue = function() {
      this.pipeliner.queue = [];
      return this.pipeliner.n_out = 0;
    };

    FileQueue.prototype.defaults = {
      readAs: "DataURL",
      encoding: "UTF-8"
    };

    FileQueue.prototype.readFile = function(params, defaults) {
      var read, reader, settings;
      if (params == null) {
        params = {};
      }
      if (defaults == null) {
        defaults = {};
      }
      if (defaults !== true) {
        settings = $.extend({}, this.defaults, defaults, params);
      }
      reader = new FileReader;
      reader.onload = function(e) {
        return settings.success(reader.result);
      };
      reader.onerror = settings.error;
      read = (function() {
        switch (settings.readAs) {
          case "ArrayBuffer":
            return reader.readAsArrayBuffer(settings.file, settings.encoding);
          case "BinaryString":
            return reader.readAsBinaryString(settings.file, settings.encoding);
          case "DataURL":
            return reader.readAsDataURL(settings.file, settings.encoding);
          case "Text":
            return reader.readAsText(settings.file, settings.encoding);
        }
      })();
      return reader;
    };

    FileQueue.prototype.queueFile = function(params, defaults) {
      var defererror, defersuccess, e, request, rv, settings;
      if (params == null) {
        params = {};
      }
      if (defaults == null) {
        defaults = {};
      }
      rv = new iced.Rendezvous;
      settings = $.extend({}, this.defaults, defaults, params);
      defersuccess = settings.success;
      defererror = settings.error;
      settings.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 53,
        context: __iced_deferrals
      });
      settings.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 54,
        context: __iced_deferrals
      });
      request = function(next) {
        var reader, status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
        __iced_k = __iced_k_noop;
        ___iced_passed_deferral = iced.findDeferral(arguments);
        reader = this.readFile(settings, true);
        (function(_this) {
          return (function(__iced_k) {
            __iced_deferrals = new iced.Deferrals(__iced_k, {
              parent: ___iced_passed_deferral,
              filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced"
            });
            rv.wait(__iced_deferrals.defer({
              assign_fn: (function() {
                return function() {
                  return status = arguments[0];
                };
              })(),
              lineno: 58
            }));
            __iced_deferrals._fulfill();
          });
        })(this)((function(_this) {
          return function() {
            switch (status) {
              case 'success':
                defersuccess(reader.result);
                break;
              case 'error':
                defererror(e);
            }
            return next();
          };
        })(this));
      };
      request.abort = function(statusText) {
        var index;
        if (reader) {
          return reader.abort(statusText);
        }
        index = this.queue().indexOf(request);
        if (index > -1) {
          this.queue().splice(index, 1);
        }
        if (this.pipeliner) {
          this.pipeliner.n_out--;
        }
        return request;
      };
      if (!this.enabled) {
        return request;
      }
      this.queue(request);
      return request;
    };

    FileQueue.prototype.awaitRead = function(options, cb, queue) {
      var e, result, rv, status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      if (queue == null) {
        queue = false;
      }
      rv = new iced.Rendezvous();
      options.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return result = arguments[0];
            };
          };
        })(this)(),
        lineno: 83,
        context: __iced_deferrals
      });
      options.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 84,
        context: __iced_deferrals
      });
      if (queue) {
        this.fileQueue(options);
      } else {
        this.readFile(options);
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced",
            funcname: "FileQueue.awaitRead"
          });
          rv.wait(__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return status = arguments[0];
              };
            })(),
            lineno: 89
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return cb(status, result || e);
        };
      })(this));
    };

    return FileQueue;

  })();

  module.exports = FileQueue;

}).call(this);


},{"iced-runtime":32}],6:[function(require,module,exports){
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

(function(){

	var root = this;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * @module PIXI
 */
var PIXI = PIXI || {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The Point object represents a location in a two-dimensional coordinate system, where x represents the horizontal axis and y represents the vertical axis.
 *
 * @class Point
 * @constructor
 * @param x {Number} position of the point
 * @param y {Number} position of the point
 */
PIXI.Point = function(x, y)
{
	/**
	 * @property x
	 * @type Number
	 * @default 0
	 */
	this.x = x || 0;

	/**
	 * @property y
	 * @type Number
	 * @default 0
	 */
	this.y = y || 0;
}

/**
 * Creates a clone of this point
 *
 * @method clone
 * @return {Point} a copy of the point
 */
PIXI.Point.prototype.clone = function()
{
	return new PIXI.Point(this.x, this.y);
}

// constructor
PIXI.Point.prototype.constructor = PIXI.Point;


/**
 * @author Mat Groves http://matgroves.com/
 */

/**
 * the Rectangle object is an area defined by its position, as indicated by its top-left corner point (x, y) and by its width and its height.
 *
 * @class Rectangle
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the rectangle
 * @param y {Number} The Y coord of the upper-left corner of the rectangle
 * @param width {Number} The overall width of this rectangle
 * @param height {Number} The overall height of this rectangle
 */
PIXI.Rectangle = function(x, y, width, height)
{
	/**
	 * @property x
	 * @type Number
	 * @default 0
	 */
	this.x = x || 0;

	/**
	 * @property y
	 * @type Number
	 * @default 0
	 */
	this.y = y || 0;

	/**
	 * @property width
	 * @type Number
	 * @default 0
	 */
	this.width = width || 0;

	/**
	 * @property height
	 * @type Number
	 * @default 0
	 */
	this.height = height || 0;
}

/**
 * Creates a clone of this Rectangle
 *
 * @method clone
 * @return {Rectangle} a copy of the rectangle
 */
PIXI.Rectangle.prototype.clone = function()
{
	return new PIXI.Rectangle(this.x, this.y, this.width, this.height);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this Rectangle
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this Rectangle
 */
PIXI.Rectangle.prototype.contains = function(x, y)
{
    if(this.width <= 0 || this.height <= 0)
        return false;

	var x1 = this.x;
	if(x >= x1 && x <= x1 + this.width)
	{
		var y1 = this.y;

		if(y >= y1 && y <= y1 + this.height)
		{
			return true;
		}
	}

	return false;
}

// constructor
PIXI.Rectangle.prototype.constructor = PIXI.Rectangle;


/**
 * @author Adrien Brault <adrien.brault@gmail.com>
 */

/**
 * @class Polygon
 * @constructor
 * @param points* {Array<Point>|Array<Number>|Point...|Number...} This can be an array of Points that form the polygon,
 *      a flat array of numbers that will be interpreted as [x,y, x,y, ...], or the arguments passed can be
 *      all the points of the polygon e.g. `new PIXI.Polygon(new PIXI.Point(), new PIXI.Point(), ...)`, or the
 *      arguments passed can be flat x,y values e.g. `new PIXI.Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are
 *      Numbers.
 */
PIXI.Polygon = function(points)
{
    //if points isn't an array, use arguments as the array
    if(!(points instanceof Array))
        points = Array.prototype.slice.call(arguments);

    //if this is a flat array of numbers, convert it to points
    if(typeof points[0] === 'number') {
        var p = [];
        for(var i = 0, il = points.length; i < il; i+=2) {
            p.push(
                new PIXI.Point(points[i], points[i + 1])
            );
        }

        points = p;
    }

	this.points = points;
}

/**
 * Creates a clone of this polygon
 *
 * @method clone
 * @return {Polygon} a copy of the polygon
 */
PIXI.Polygon.prototype.clone = function()
{
	var points = [];
	for (var i=0; i<this.points.length; i++) {
		points.push(this.points[i].clone());
	}

	return new PIXI.Polygon(points);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this polygon
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this polygon
 */
PIXI.Polygon.prototype.contains = function(x, y)
{
    var inside = false;

    // use some raycasting to test hits
    // https://github.com/substack/point-in-polygon/blob/master/index.js
    for(var i = 0, j = this.points.length - 1; i < this.points.length; j = i++) {
        var xi = this.points[i].x, yi = this.points[i].y,
            xj = this.points[j].x, yj = this.points[j].y,
            intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);

        if(intersect) inside = !inside;
    }

    return inside;
}

// constructor
PIXI.Polygon.prototype.constructor = PIXI.Polygon;

/**
 * @author Chad Engler <chad@pantherdev.com>
 */

/**
 * The Circle object can be used to specify a hit area for displayobjects
 *
 * @class Circle
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the framing rectangle of this circle
 * @param y {Number} The Y coord of the upper-left corner of the framing rectangle of this circle
 * @param radius {Number} The radius of the circle
 */
PIXI.Circle = function(x, y, radius)
{
    /**
     * @property x
     * @type Number
     * @default 0
     */
    this.x = x || 0;

    /**
     * @property y
     * @type Number
     * @default 0
     */
    this.y = y || 0;

    /**
     * @property radius
     * @type Number
     * @default 0
     */
    this.radius = radius || 0;
}

/**
 * Creates a clone of this Circle instance
 *
 * @method clone
 * @return {Circle} a copy of the polygon
 */
PIXI.Circle.prototype.clone = function()
{
    return new PIXI.Circle(this.x, this.y, this.radius);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this circle
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this polygon
 */
PIXI.Circle.prototype.contains = function(x, y)
{
    if(this.radius <= 0)
        return false;

    var dx = (this.x - x),
        dy = (this.y - y),
        r2 = this.radius * this.radius;

    dx *= dx;
    dy *= dy;

    return (dx + dy <= r2);
}

// constructor
PIXI.Circle.prototype.constructor = PIXI.Circle;


/**
 * @author Chad Engler <chad@pantherdev.com>
 */

/**
 * The Ellipse object can be used to specify a hit area for displayobjects
 *
 * @class Ellipse
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the framing rectangle of this ellipse
 * @param y {Number} The Y coord of the upper-left corner of the framing rectangle of this ellipse
 * @param width {Number} The overall width of this ellipse
 * @param height {Number} The overall height of this ellipse
 */
PIXI.Ellipse = function(x, y, width, height)
{
    /**
     * @property x
     * @type Number
     * @default 0
     */
    this.x = x || 0;

    /**
     * @property y
     * @type Number
     * @default 0
     */
    this.y = y || 0;

    /**
     * @property width
     * @type Number
     * @default 0
     */
    this.width = width || 0;

    /**
     * @property height
     * @type Number
     * @default 0
     */
    this.height = height || 0;
}

/**
 * Creates a clone of this Ellipse instance
 *
 * @method clone
 * @return {Ellipse} a copy of the ellipse
 */
PIXI.Ellipse.prototype.clone = function()
{
    return new PIXI.Ellipse(this.x, this.y, this.width, this.height);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this ellipse
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this ellipse
 */
PIXI.Ellipse.prototype.contains = function(x, y)
{
    if(this.width <= 0 || this.height <= 0)
        return false;

    //normalize the coords to an ellipse with center 0,0
    //and a radius of 0.5
    var normx = ((x - this.x) / this.width) - 0.5,
        normy = ((y - this.y) / this.height) - 0.5;

    normx *= normx;
    normy *= normy;

    return (normx + normy < 0.25);
}

PIXI.Ellipse.getBounds = function()
{
    return new PIXI.Rectangle(this.x, this.y, this.width, this.height);
}

// constructor
PIXI.Ellipse.prototype.constructor = PIXI.Ellipse;



/*
 * A lighter version of the rad gl-matrix created by Brandon Jones, Colin MacKenzie IV
 * you both rock!
 */

function determineMatrixArrayType() {
    PIXI.Matrix = (typeof Float32Array !== 'undefined') ? Float32Array : Array;
    return PIXI.Matrix;
}

determineMatrixArrayType();

PIXI.mat3 = {};

PIXI.mat3.create = function()
{
	var matrix = new PIXI.Matrix(9);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 1;
	matrix[5] = 0;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 1;

	return matrix;
}


PIXI.mat3.identity = function(matrix)
{
	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 1;
	matrix[5] = 0;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 1;

	return matrix;
}


PIXI.mat4 = {};

PIXI.mat4.create = function()
{
	var matrix = new PIXI.Matrix(16);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 0;
	matrix[5] = 1;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 0;
	matrix[9] = 0;
	matrix[10] = 1;
	matrix[11] = 0;
	matrix[12] = 0;
	matrix[13] = 0;
	matrix[14] = 0;
	matrix[15] = 1;

	return matrix;
}

PIXI.mat3.multiply = function (mat, mat2, dest)
{
	if (!dest) { dest = mat; }

	// Cache the matrix values (makes for huge speed increases!)
	var a00 = mat[0], a01 = mat[1], a02 = mat[2],
	    a10 = mat[3], a11 = mat[4], a12 = mat[5],
	    a20 = mat[6], a21 = mat[7], a22 = mat[8],

	    b00 = mat2[0], b01 = mat2[1], b02 = mat2[2],
	    b10 = mat2[3], b11 = mat2[4], b12 = mat2[5],
	    b20 = mat2[6], b21 = mat2[7], b22 = mat2[8];

	dest[0] = b00 * a00 + b01 * a10 + b02 * a20;
	dest[1] = b00 * a01 + b01 * a11 + b02 * a21;
	dest[2] = b00 * a02 + b01 * a12 + b02 * a22;

	dest[3] = b10 * a00 + b11 * a10 + b12 * a20;
	dest[4] = b10 * a01 + b11 * a11 + b12 * a21;
	dest[5] = b10 * a02 + b11 * a12 + b12 * a22;

	dest[6] = b20 * a00 + b21 * a10 + b22 * a20;
	dest[7] = b20 * a01 + b21 * a11 + b22 * a21;
	dest[8] = b20 * a02 + b21 * a12 + b22 * a22;

	return dest;
}

PIXI.mat3.clone = function(mat)
{
	var matrix = new PIXI.Matrix(9);

	matrix[0] = mat[0];
	matrix[1] = mat[1];
	matrix[2] = mat[2];
	matrix[3] = mat[3];
	matrix[4] = mat[4];
	matrix[5] = mat[5];
	matrix[6] = mat[6];
	matrix[7] = mat[7];
	matrix[8] = mat[8];

	return matrix;
}

PIXI.mat3.transpose = function (mat, dest)
{
 	// If we are transposing ourselves we can skip a few steps but have to cache some values
    if (!dest || mat === dest) {
        var a01 = mat[1], a02 = mat[2],
            a12 = mat[5];

        mat[1] = mat[3];
        mat[2] = mat[6];
        mat[3] = a01;
        mat[5] = mat[7];
        mat[6] = a02;
        mat[7] = a12;
        return mat;
    }

    dest[0] = mat[0];
    dest[1] = mat[3];
    dest[2] = mat[6];
    dest[3] = mat[1];
    dest[4] = mat[4];
    dest[5] = mat[7];
    dest[6] = mat[2];
    dest[7] = mat[5];
    dest[8] = mat[8];
    return dest;
}

PIXI.mat3.toMat4 = function (mat, dest)
{
	if (!dest) { dest = PIXI.mat4.create(); }

	dest[15] = 1;
	dest[14] = 0;
	dest[13] = 0;
	dest[12] = 0;

	dest[11] = 0;
	dest[10] = mat[8];
	dest[9] = mat[7];
	dest[8] = mat[6];

	dest[7] = 0;
	dest[6] = mat[5];
	dest[5] = mat[4];
	dest[4] = mat[3];

	dest[3] = 0;
	dest[2] = mat[2];
	dest[1] = mat[1];
	dest[0] = mat[0];

	return dest;
}


/////


PIXI.mat4.create = function()
{
	var matrix = new PIXI.Matrix(16);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 0;
	matrix[5] = 1;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 0;
	matrix[9] = 0;
	matrix[10] = 1;
	matrix[11] = 0;
	matrix[12] = 0;
	matrix[13] = 0;
	matrix[14] = 0;
	matrix[15] = 1;

	return matrix;
}

PIXI.mat4.transpose = function (mat, dest)
{
	// If we are transposing ourselves we can skip a few steps but have to cache some values
	if (!dest || mat === dest)
	{
	    var a01 = mat[1], a02 = mat[2], a03 = mat[3],
	        a12 = mat[6], a13 = mat[7],
	        a23 = mat[11];

	    mat[1] = mat[4];
	    mat[2] = mat[8];
	    mat[3] = mat[12];
	    mat[4] = a01;
	    mat[6] = mat[9];
	    mat[7] = mat[13];
	    mat[8] = a02;
	    mat[9] = a12;
	    mat[11] = mat[14];
	    mat[12] = a03;
	    mat[13] = a13;
	    mat[14] = a23;
	    return mat;
	}

	dest[0] = mat[0];
	dest[1] = mat[4];
	dest[2] = mat[8];
	dest[3] = mat[12];
	dest[4] = mat[1];
	dest[5] = mat[5];
	dest[6] = mat[9];
	dest[7] = mat[13];
	dest[8] = mat[2];
	dest[9] = mat[6];
	dest[10] = mat[10];
	dest[11] = mat[14];
	dest[12] = mat[3];
	dest[13] = mat[7];
	dest[14] = mat[11];
	dest[15] = mat[15];
	return dest;
}

PIXI.mat4.multiply = function (mat, mat2, dest)
{
	if (!dest) { dest = mat; }

	// Cache the matrix values (makes for huge speed increases!)
	var a00 = mat[ 0], a01 = mat[ 1], a02 = mat[ 2], a03 = mat[3];
	var a10 = mat[ 4], a11 = mat[ 5], a12 = mat[ 6], a13 = mat[7];
	var a20 = mat[ 8], a21 = mat[ 9], a22 = mat[10], a23 = mat[11];
	var a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];

	// Cache only the current line of the second matrix
    var b0  = mat2[0], b1 = mat2[1], b2 = mat2[2], b3 = mat2[3];
    dest[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[4];
    b1 = mat2[5];
    b2 = mat2[6];
    b3 = mat2[7];
    dest[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[8];
    b1 = mat2[9];
    b2 = mat2[10];
    b3 = mat2[11];
    dest[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[12];
    b1 = mat2[13];
    b2 = mat2[14];
    b3 = mat2[15];
    dest[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    return dest;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The base class for all objects that are rendered on the screen.
 *
 * @class DisplayObject
 * @constructor
 */
PIXI.DisplayObject = function()
{
	this.last = this;
	this.first = this;
	/**
	 * The coordinate of the object relative to the local coordinates of the parent.
	 *
	 * @property position
	 * @type Point
	 */
	this.position = new PIXI.Point();

	/**
	 * The scale factor of the object.
	 *
	 * @property scale
	 * @type Point
	 */
	this.scale = new PIXI.Point(1,1);//{x:1, y:1};

	/**
	 * The pivot point of the displayObject that it rotates around
	 *
	 * @property pivot
	 * @type Point
	 */
	this.pivot = new PIXI.Point(0,0);

	/**
	 * The rotation of the object in radians.
	 *
	 * @property rotation
	 * @type Number
	 */
	this.rotation = 0;

	/**
	 * The opacity of the object.
	 *
	 * @property alpha
	 * @type Number
	 */	
	this.alpha = 1;

	/**
	 * The visibility of the object.
	 *
	 * @property visible
	 * @type Boolean
	 */	
	this.visible = true;

	/**
	 * This is the defined area that will pick up mouse / touch events. It is null by default.
	 * Setting it is a neat way of optimising the hitTest function that the interactionManager will use (as it will not need to hit test all the children)
	 *
	 * @property hitArea
	 * @type Rectangle|Circle|Ellipse|Polygon
	 */	
	this.hitArea = null;

	/**
	 * This is used to indicate if the displayObject should display a mouse hand cursor on rollover
	 *
	 * @property buttonMode
	 * @type Boolean
	 */
	this.buttonMode = false;

	/**
	 * Can this object be rendered
	 *
	 * @property renderable
	 * @type Boolean
	 */
	this.renderable = false;

	/**
	 * [read-only] The display object container that contains this display object.
	 *
	 * @property parent
	 * @type DisplayObjectContainer
	 * @readOnly
	 */	
	this.parent = null;

	/**
	 * [read-only] The stage the display object is connected to, or undefined if it is not connected to the stage.
	 *
	 * @property stage
	 * @type Stage
	 * @readOnly
	 */	
	this.stage = null;

	/**
	 * [read-only] The multiplied alpha of the displayobject
	 *
	 * @property worldAlpha
	 * @type Number
	 * @readOnly
	 */
	this.worldAlpha = 1;

	/**
	 * [read-only] Whether or not the object is interactive, do not toggle directly! use the `interactive` property
	 *
	 * @property _interactive
	 * @type Boolean
	 * @readOnly
	 * @private
	 */
	this._interactive = false;

	/**
	 * [read-only] Current transform of the object based on world (parent) factors
	 *
	 * @property worldTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.worldTransform = PIXI.mat3.create()//mat3.identity();

	/**
	 * [read-only] Current transform of the object locally
	 *
	 * @property localTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.localTransform = PIXI.mat3.create()//mat3.identity();

	/**
	 * [NYI] Unkown
	 *
	 * @property color
	 * @type Array<>
	 * @private
	 */
	this.color = [];

	/**
	 * [NYI] Holds whether or not this object is dynamic, for rendering optimization
	 *
	 * @property dynamic
	 * @type Boolean
	 * @private
	 */
	this.dynamic = true;

	// chach that puppy!
	this._sr = 0;
	this._cr = 1;


	this.filterArea = new PIXI.Rectangle(0,0,1,1);
	
	/*
	 * MOUSE Callbacks
	 */

	/**
	 * A callback that is used when the users clicks on the displayObject with their mouse
	 * @method click
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user clicks the mouse down over the sprite
	 * @method mousedown
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the mouse that was over the displayObject
	 * for this callback to be fired the mouse must have been pressed down over the displayObject
	 * @method mouseup
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the mouse that was over the displayObject but is no longer over the displayObject
	 * for this callback to be fired, The touch must have started over the displayObject
	 * @method mouseupoutside
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the users mouse rolls over the displayObject
	 * @method mouseover
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the users mouse leaves the displayObject
	 * @method mouseout
	 * @param interactionData {InteractionData}
	 */


	/*
	 * TOUCH Callbacks
	 */

	/**
	 * A callback that is used when the users taps on the sprite with their finger
	 * basically a touch version of click
	 * @method tap
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user touch's over the displayObject
	 * @method touchstart
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases a touch over the displayObject
	 * @method touchend
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the touch that was over the displayObject
	 * for this callback to be fired, The touch must have started over the sprite
	 * @method touchendoutside
	 * @param interactionData {InteractionData}
	 */
}

// constructor
PIXI.DisplayObject.prototype.constructor = PIXI.DisplayObject;

/**
 * [Deprecated] Indicates if the sprite will have touch and mouse interactivity. It is false by default
 * Instead of using this function you can now simply set the interactive property to true or false
 *
 * @method setInteractive
 * @param interactive {Boolean}
 * @deprecated Simply set the `interactive` property directly
 */
PIXI.DisplayObject.prototype.setInteractive = function(interactive)
{
	this.interactive = interactive;
}

/**
 * Indicates if the sprite will have touch and mouse interactivity. It is false by default
 *
 * @property interactive
 * @type Boolean
 * @default false
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'interactive', {
    get: function() {
        return this._interactive;
    },
    set: function(value) {
    	this._interactive = value;
    	
    	// TODO more to be done here..
		// need to sort out a re-crawl!
		if(this.stage)this.stage.dirty = true;
    }
});

/**
 * Sets a mask for the displayObject. A mask is an object that limits the visibility of an object to the shape of the mask applied to it.
 * In PIXI a regular mask must be a PIXI.Ggraphics object. This allows for much faster masking in canvas as it utilises shape clipping.
 * To remove a mask, set this property to null.
 *
 * @property mask
 * @type Graphics
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'mask', {
    get: function() {
        return this._mask;
    },
    set: function(value) {
    	
    	
        if(value)
        {
        	if(this._mask)
	    	{
	    		value.start = this._mask.start;
	    		value.end = this._mask.end;
	    	}
    		else
    		{
		        this.addFilter(value);
		        value.renderable = false;
    		}
        }
        else
        {
        	 this.removeFilter(this._mask);
			 this._mask.renderable = true;
        }
        
        this._mask = value;
    }
});

/**
 * Sets the filters for the displayObject. 
 * * IMPORTANT: This is a webGL only feature and will be ignored by the canvas renderer.
 * To remove filters simply set this property to 'null'
 * @property filters
 * @type Array An array of filters
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'filters', {
    get: function() {
        return this._filters;
    },
    set: function(value) {
    	
        if(value)
        {
        	if(this._filters)this.removeFilter(this._filters);
	        this.addFilter(value);

		    // now put all the passes in one place..
	        var passes = [];
	        for (var i = 0; i < value.length; i++) 
	        {
	        	var filterPasses = value[i].passes;
	        	for (var j = 0; j < filterPasses.length; j++) 
	        	{
	        		passes.push(filterPasses[j]);
	        	};
	        };

	        value.start.filterPasses = passes;
        }
        else
        {
        	if(this._filters)this.removeFilter(this._filters);
        }
        
        this._filters = value;

       

        
    }
});

/*
 * Adds a filter to this displayObject
 *
 * @method addFilter
 * @param mask {Graphics} the graphics object to use as a filter
 * @private
 */
PIXI.DisplayObject.prototype.addFilter = function(data)
{
	//if(this.filter)return;
	//this.filter = true;
//	data[0].target = this;
	

	// insert a filter block..
	// TODO Onject pool thease bad boys..
	var start = new PIXI.FilterBlock();
	var end = new PIXI.FilterBlock();
	
	data.start = start;
	data.end = end;
	
	start.data = data;
	end.data = data;
	
	start.first = start.last =  this;
	end.first = end.last = this;
	
	start.open = true;
	
	start.target = this;
	
	/*
	 * insert start
	 */
	
	var childFirst = start
	var childLast = start
	var nextObject;
	var previousObject;
		
	previousObject = this.first._iPrev;
	
	if(previousObject)
	{
		nextObject = previousObject._iNext;
		childFirst._iPrev = previousObject;
		previousObject._iNext = childFirst;		
	}
	else
	{
		nextObject = this;
	}	
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	
	// now insert the end filter block..
	
	/*
	 * insert end filter
	 */
	var childFirst = end
	var childLast = end
	var nextObject = null;
	var previousObject = null;
		
	previousObject = this.last;
	nextObject = previousObject._iNext;
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	childFirst._iPrev = previousObject;
	previousObject._iNext = childFirst;	
	
	var updateLast = this;
	
	var prevLast = this.last;
	while(updateLast)
	{
		if(updateLast.last == prevLast)
		{
			updateLast.last = end;
		}
		updateLast = updateLast.parent;
	}
	
	this.first = start;
	
	// if webGL...
	if(this.__renderGroup)
	{
		this.__renderGroup.addFilterBlocks(start, end);
	}
	
}

/*
 * Removes the filter to this displayObject
 *
 * @method removeFilter
 * @private
 */
PIXI.DisplayObject.prototype.removeFilter = function(data)
{
	//if(!this.filter)return;
	//this.filter = false;
	console.log("YUOIO")
	// modify the list..
	var startBlock = data.start;
	
	
	var nextObject = startBlock._iNext;
	var previousObject = startBlock._iPrev;
		
	if(nextObject)nextObject._iPrev = previousObject;
	if(previousObject)previousObject._iNext = nextObject;		
	
	this.first = startBlock._iNext;
	
	// remove the end filter
	var lastBlock = data.end;
	
	var nextObject = lastBlock._iNext;
	var previousObject = lastBlock._iPrev;
		
	if(nextObject)nextObject._iPrev = previousObject;
	previousObject._iNext = nextObject;		
	
	// this is always true too!
	var tempLast =  lastBlock._iPrev;	
	// need to make sure the parents last is updated too
	var updateLast = this;
	while(updateLast.last == lastBlock)
	{
		updateLast.last = tempLast;
		updateLast = updateLast.parent;
		if(!updateLast)break;
	}
	
	// if webGL...
	if(this.__renderGroup)
	{
		this.__renderGroup.removeFilterBlocks(startBlock, lastBlock);
	}
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.DisplayObject.prototype.updateTransform = function()
{
	// TODO OPTIMIZE THIS!! with dirty
	if(this.rotation !== this.rotationCache)
	{
		this.rotationCache = this.rotation;
		this._sr =  Math.sin(this.rotation);
		this._cr =  Math.cos(this.rotation);
	}	
	
	var localTransform = this.localTransform;
	var parentTransform = this.parent.worldTransform;
	var worldTransform = this.worldTransform;
	//console.log(localTransform)
	localTransform[0] = this._cr * this.scale.x;
	localTransform[1] = -this._sr * this.scale.y
	localTransform[3] = this._sr * this.scale.x;
	localTransform[4] = this._cr * this.scale.y;
	
	// TODO --> do we even need a local matrix???
	
	var px = this.pivot.x;
	var py = this.pivot.y;
   	
    // Cache the matrix values (makes for huge speed increases!)
    var a00 = localTransform[0], a01 = localTransform[1], a02 = this.position.x - localTransform[0] * px - py * localTransform[1],
        a10 = localTransform[3], a11 = localTransform[4], a12 = this.position.y - localTransform[4] * py - px * localTransform[3],

        b00 = parentTransform[0], b01 = parentTransform[1], b02 = parentTransform[2],
        b10 = parentTransform[3], b11 = parentTransform[4], b12 = parentTransform[5];

	localTransform[2] = a02
	localTransform[5] = a12
	
    worldTransform[0] = b00 * a00 + b01 * a10;
    worldTransform[1] = b00 * a01 + b01 * a11;
    worldTransform[2] = b00 * a02 + b01 * a12 + b02;

    worldTransform[3] = b10 * a00 + b11 * a10;
    worldTransform[4] = b10 * a01 + b11 * a11;
    worldTransform[5] = b10 * a02 + b11 * a12 + b12;

	// because we are using affine transformation, we can optimise the matrix concatenation process.. wooo!
	// mat3.multiply(this.localTransform, this.parent.worldTransform, this.worldTransform);
	this.worldAlpha = this.alpha * this.parent.worldAlpha;
	
	this.vcount = PIXI.visibleCount;

}

PIXI.visibleCount = 0;
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * A DisplayObjectContainer represents a collection of display objects.
 * It is the base class of all display objects that act as a container for other objects.
 *
 * @class DisplayObjectContainer 
 * @extends DisplayObject
 * @constructor
 */
PIXI.DisplayObjectContainer = function()
{
	PIXI.DisplayObject.call( this );
	
	/**
	 * [read-only] The of children of this container.
	 *
	 * @property children
	 * @type Array<DisplayObject>
	 * @readOnly
	 */	
	this.children = [];
}

// constructor
PIXI.DisplayObjectContainer.prototype = Object.create( PIXI.DisplayObject.prototype );
PIXI.DisplayObjectContainer.prototype.constructor = PIXI.DisplayObjectContainer;

/**
 * Adds a child to the container.
 *
 * @method addChild
 * @param child {DisplayObject} The DisplayObject to add to the container
 */
PIXI.DisplayObjectContainer.prototype.addChild = function(child)
{
	if(child.parent != undefined)
	{
		
		//// COULD BE THIS???
		child.parent.removeChild(child);
	//	return;
	}

	child.parent = this;
	
	this.children.push(child);	
	
	// update the stage refference..
	
	if(this.stage)
	{
		var tmpChild = child;
		do
		{
			if(tmpChild.interactive)this.stage.dirty = true;
			tmpChild.stage = this.stage;
			tmpChild = tmpChild._iNext;
		}	
		while(tmpChild)
	}
	
	// LINKED LIST //
	
	// modify the list..
	var childFirst = child.first
	var childLast = child.last;
	var nextObject;
	var previousObject;
	
	// this could be wrong if there is a filter??
	if(this._filters || this._mask)
	{
		previousObject =  this.last._iPrev;
	}
	else
	{
		previousObject = this.last;
	}

	nextObject = previousObject._iNext;
	
	// always true in this case
	// need to make sure the parents last is updated too
	var updateLast = this;
	var prevLast = previousObject;
	
	while(updateLast)
	{
		if(updateLast.last == prevLast)
		{
			updateLast.last = child.last;
		}
		updateLast = updateLast.parent;
	}
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	childFirst._iPrev = previousObject;
	previousObject._iNext = childFirst;		

	// need to remove any render groups..
	if(this.__renderGroup)
	{
		// being used by a renderTexture.. if it exists then it must be from a render texture;
		if(child.__renderGroup)child.__renderGroup.removeDisplayObjectAndChildren(child);
		// add them to the new render group..
		this.__renderGroup.addDisplayObjectAndChildren(child);
	}
	
}

/**
 * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown
 *
 * @method addChildAt
 * @param child {DisplayObject} The child to add
 * @param index {Number} The index to place the child in
 */
PIXI.DisplayObjectContainer.prototype.addChildAt = function(child, index)
{
	if(index >= 0 && index <= this.children.length)
	{
		if(child.parent != undefined)
		{
			child.parent.removeChild(child);
		}
		child.parent = this;
		
		if(this.stage)
		{
			var tmpChild = child;
			do
			{
				if(tmpChild.interactive)this.stage.dirty = true;
				tmpChild.stage = this.stage;
				tmpChild = tmpChild._iNext;
			}
			while(tmpChild)
		}
		
		// modify the list..
		var childFirst = child.first;
		var childLast = child.last;
		var nextObject;
		var previousObject;
		
		if(index == this.children.length)
		{
			previousObject =  this.last;
			var updateLast = this;
			var prevLast = this.last;
			while(updateLast)
			{
				if(updateLast.last == prevLast)
				{
					updateLast.last = child.last;
				}
				updateLast = updateLast.parent;
			}
		}
		else if(index == 0)
		{
			previousObject = this;
		}
		else
		{
			previousObject = this.children[index-1].last;
		}
		
		nextObject = previousObject._iNext;
		
		// always true in this case
		if(nextObject)
		{
			nextObject._iPrev = childLast;
			childLast._iNext = nextObject;
		}
		
		childFirst._iPrev = previousObject;
		previousObject._iNext = childFirst;		

		this.children.splice(index, 0, child);
		// need to remove any render groups..
		if(this.__renderGroup)
		{
			// being used by a renderTexture.. if it exists then it must be from a render texture;
			if(child.__renderGroup)child.__renderGroup.removeDisplayObjectAndChildren(child);
			// add them to the new render group..
			this.__renderGroup.addDisplayObjectAndChildren(child);
		}
		
	}
	else
	{
		throw new Error(child + " The index "+ index +" supplied is out of bounds " + this.children.length);
	}
}

/**
 * [NYI] Swaps the depth of 2 displayObjects
 *
 * @method swapChildren
 * @param child {DisplayObject}
 * @param child2 {DisplayObject}
 * @private
 */
PIXI.DisplayObjectContainer.prototype.swapChildren = function(child, child2)
{
	/*
	 * this funtion needs to be recoded.. 
	 * can be done a lot faster..
	 */
	return;
	
	// need to fix this function :/
	/*
	// TODO I already know this??
	var index = this.children.indexOf( child );
	var index2 = this.children.indexOf( child2 );
	
	if ( index !== -1 && index2 !== -1 ) 
	{
		// cool
		
		/*
		if(this.stage)
		{
			// this is to satisfy the webGL batching..
			// TODO sure there is a nicer way to achieve this!
			this.stage.__removeChild(child);
			this.stage.__removeChild(child2);
			
			this.stage.__addChild(child);
			this.stage.__addChild(child2);
		}
		
		// swap the positions..
		this.children[index] = child2;
		this.children[index2] = child;
		
	}
	else
	{
		throw new Error(child + " Both the supplied DisplayObjects must be a child of the caller " + this);
	}*/
}

/**
 * Returns the Child at the specified index
 *
 * @method getChildAt
 * @param index {Number} The index to get the child from
 */
PIXI.DisplayObjectContainer.prototype.getChildAt = function(index)
{
	if(index >= 0 && index < this.children.length)
	{
		return this.children[index];
	}
	else
	{
		throw new Error(child + " Both the supplied DisplayObjects must be a child of the caller " + this);
	}
}

/**
 * Removes a child from the container.
 *
 * @method removeChild
 * @param child {DisplayObject} The DisplayObject to remove
 */
PIXI.DisplayObjectContainer.prototype.removeChild = function(child)
{
	var index = this.children.indexOf( child );
	if ( index !== -1 ) 
	{
		// unlink //
		// modify the list..
		var childFirst = child.first;
		var childLast = child.last;
		
		var nextObject = childLast._iNext;
		var previousObject = childFirst._iPrev;
			
		if(nextObject)nextObject._iPrev = previousObject;
		previousObject._iNext = nextObject;		
		
		if(this.last == childLast)
		{
			var tempLast =  childFirst._iPrev;	
			// need to make sure the parents last is updated too
			var updateLast = this;
			while(updateLast.last == childLast.last)
			{
				updateLast.last = tempLast;
				updateLast = updateLast.parent;
				if(!updateLast)break;
			}
		}
		
		childLast._iNext = null;
		childFirst._iPrev = null;
		 
		// update the stage reference..
		if(this.stage)
		{
			var tmpChild = child;
			do
			{
				if(tmpChild.interactive)this.stage.dirty = true;
				tmpChild.stage = null;
				tmpChild = tmpChild._iNext;
			}	
			while(tmpChild)
		}
	
		// webGL trim
		if(child.__renderGroup)
		{
			child.__renderGroup.removeDisplayObjectAndChildren(child);
		}
		
		child.parent = undefined;
		this.children.splice( index, 1 );
	}
	else
	{
		throw new Error(child + " The supplied DisplayObject must be a child of the caller " + this);
	}
}

/*
 * Updates the container's children's transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.DisplayObjectContainer.prototype.updateTransform = function()
{
	if(!this.visible)return;
	
	PIXI.DisplayObject.prototype.updateTransform.call( this );
	
	for(var i=0,j=this.children.length; i<j; i++)
	{
		this.children[i].updateTransform();	
	}
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.blendModes = {};
PIXI.blendModes.NORMAL = 0;
PIXI.blendModes.SCREEN = 1;


/**
 * The SPrite object is the base for all textured objects that are rendered to the screen
 *
 * @class Sprite
 * @extends DisplayObjectContainer
 * @constructor
 * @param texture {Texture} The texture for this sprite
 * @type String
 */
PIXI.Sprite = function(texture)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * The anchor sets the origin point of the texture.
	 * The default is 0,0 this means the textures origin is the top left 
	 * Setting than anchor to 0.5,0.5 means the textures origin is centered
	 * Setting the anchor to 1,1 would mean the textures origin points will be the bottom right
	 *
     * @property anchor
     * @type Point
     */
	this.anchor = new PIXI.Point();

	/**
	 * The texture that the sprite is using
	 *
	 * @property texture
	 * @type Texture
	 */
	this.texture = texture;

	/**
	 * The blend mode of sprite.
	 * currently supports PIXI.blendModes.NORMAL and PIXI.blendModes.SCREEN
	 *
	 * @property blendMode
	 * @type Number
	 */
	this.blendMode = PIXI.blendModes.NORMAL;

	/**
	 * The width of the sprite (this is initially set by the texture)
	 *
	 * @property _width
	 * @type Number
	 * @private
	 */
	this._width = 0;

	/**
	 * The height of the sprite (this is initially set by the texture)
	 *
	 * @property _height
	 * @type Number
	 * @private
	 */
	this._height = 0;

	if(texture.baseTexture.hasLoaded)
	{
		this.updateFrame = true;
	}
	else
	{
		this.onTextureUpdateBind = this.onTextureUpdate.bind(this);
		this.texture.addEventListener( 'update', this.onTextureUpdateBind );
	}

	this.renderable = true;
}

// constructor
PIXI.Sprite.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Sprite.prototype.constructor = PIXI.Sprite;

/**
 * The width of the sprite, setting this will actually modify the scale to acheive the value set
 *
 * @property width
 * @type Number
 */
Object.defineProperty(PIXI.Sprite.prototype, 'width', {
    get: function() {
        return this.scale.x * this.texture.frame.width;
    },
    set: function(value) {
    	this.scale.x = value / this.texture.frame.width
        this._width = value;
    }
});

/**
 * The height of the sprite, setting this will actually modify the scale to acheive the value set
 *
 * @property height
 * @type Number
 */
Object.defineProperty(PIXI.Sprite.prototype, 'height', {
    get: function() {
        return  this.scale.y * this.texture.frame.height;
    },
    set: function(value) {
    	this.scale.y = value / this.texture.frame.height
        this._height = value;
    }
});

/**
 * Sets the texture of the sprite
 *
 * @method setTexture
 * @param texture {Texture} The PIXI texture that is displayed by the sprite
 */
PIXI.Sprite.prototype.setTexture = function(texture)
{
	// stop current texture;
	if(this.texture.baseTexture != texture.baseTexture)
	{
		this.textureChange = true;	
		this.texture = texture;
		
		if(this.__renderGroup)
		{
			this.__renderGroup.updateTexture(this);
		}
	}
	else
	{
		this.texture = texture;
	}
	
	this.updateFrame = true;
}

/**
 * When the texture is updated, this event will fire to update the scale and frame
 *
 * @method onTextureUpdate
 * @param event
 * @private
 */
PIXI.Sprite.prototype.onTextureUpdate = function(event)
{
	//this.texture.removeEventListener( 'update', this.onTextureUpdateBind );
	
	// so if _width is 0 then width was not set..
	if(this._width)this.scale.x = this._width / this.texture.frame.width;
	if(this._height)this.scale.y = this._height / this.texture.frame.height;
	
	this.updateFrame = true;
}

// some helper functions..

/**
 * 
 * Helper function that creates a sprite that will contain a texture from the TextureCache based on the frameId
 * The frame ids are created when a Texture packer file has been loaded
 *
 * @method fromFrame
 * @static
 * @param frameId {String} The frame Id of the texture in the cache
 * @return {Sprite} A new Sprite using a texture from the texture cache matching the frameId
 */
PIXI.Sprite.fromFrame = function(frameId)
{
	var texture = PIXI.TextureCache[frameId];
	if(!texture)throw new Error("The frameId '"+ frameId +"' does not exist in the texture cache" + this);
	return new PIXI.Sprite(texture);
}

/**
 * 
 * Helper function that creates a sprite that will contain a texture based on an image url
 * If the image is not in the texture cache it will be loaded
 *
 * @method fromImage
 * @static
 * @param imageId {String} The image url of the texture
 * @return {Sprite} A new Sprite using a texture from the texture cache matching the image id
 */
PIXI.Sprite.fromImage = function(imageId)
{
	var texture = PIXI.Texture.fromImage(imageId);
	return new PIXI.Sprite(texture);
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A MovieClip is a simple way to display an animation depicted by a list of textures.
 *
 * @class MovieClip
 * @extends Sprite
 * @constructor
 * @param textures {Array<Texture>} an array of {Texture} objects that make up the animation
 */
PIXI.MovieClip = function(textures)
{
	PIXI.Sprite.call(this, textures[0]);

	/**
	 * The array of textures that make up the animation
	 *
	 * @property textures
	 * @type Array
	 */
	this.textures = textures;

	/**
	 * The speed that the MovieClip will play at. Higher is faster, lower is slower
	 *
	 * @property animationSpeed
	 * @type Number
	 * @default 1
	 */
	this.animationSpeed = 1;

	/**
	 * Whether or not the movie clip repeats after playing.
	 *
	 * @property loop
	 * @type Boolean
	 * @default true
	 */
	this.loop = true;

	/**
	 * Function to call when a MovieClip finishes playing
	 *
	 * @property onComplete
	 * @type Function
	 */
	this.onComplete = null;

	/**
	 * [read-only] The index MovieClips current frame (this may not have to be a whole number)
	 *
	 * @property currentFrame
	 * @type Number
	 * @default 0
	 * @readOnly
	 */
	this.currentFrame = 0;

	/**
	 * [read-only] Indicates if the MovieClip is currently playing
	 *
	 * @property playing
	 * @type Boolean
	 * @readOnly
	 */
	this.playing = false;
}

// constructor
PIXI.MovieClip.prototype = Object.create( PIXI.Sprite.prototype );
PIXI.MovieClip.prototype.constructor = PIXI.MovieClip;

/**
* [read-only] totalFrames is the total number of frames in the MovieClip. This is the same as number of textures
* assigned to the MovieClip.
*
* @property totalFrames
* @type Number
* @default 0
* @readOnly
*/
Object.defineProperty( PIXI.MovieClip.prototype, 'totalFrames', {
	get: function() {

		return this.textures.length;
	}
});


/**
 * Stops the MovieClip
 *
 * @method stop
 */
PIXI.MovieClip.prototype.stop = function()
{
	this.playing = false;
}

/**
 * Plays the MovieClip
 *
 * @method play
 */
PIXI.MovieClip.prototype.play = function()
{
	this.playing = true;
}

/**
 * Stops the MovieClip and goes to a specific frame
 *
 * @method gotoAndStop
 * @param frameNumber {Number} frame index to stop at
 */
PIXI.MovieClip.prototype.gotoAndStop = function(frameNumber)
{
	this.playing = false;
	this.currentFrame = frameNumber;
	var round = (this.currentFrame + 0.5) | 0;
	this.setTexture(this.textures[round % this.textures.length]);
}

/**
 * Goes to a specific frame and begins playing the MovieClip
 *
 * @method gotoAndPlay
 * @param frameNumber {Number} frame index to start at
 */
PIXI.MovieClip.prototype.gotoAndPlay = function(frameNumber)
{
	this.currentFrame = frameNumber;
	this.playing = true;
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.MovieClip.prototype.updateTransform = function()
{
	PIXI.Sprite.prototype.updateTransform.call(this);

	if(!this.playing)return;

	this.currentFrame += this.animationSpeed;

	var round = (this.currentFrame + 0.5) | 0;

	if(this.loop || round < this.textures.length)
	{
		this.setTexture(this.textures[round % this.textures.length]);
	}
	else if(round >= this.textures.length)
	{
		this.gotoAndStop(this.textures.length - 1);
		if(this.onComplete)
		{
			this.onComplete();
		}
	}
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.FilterBlock = function()
{
	this.visible = true;
	this.renderable = true;
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Text Object will create a line(s) of text to split a line you can use "\n"
 *
 * @class Text
 * @extends Sprite
 * @constructor
 * @param text {String} The copy that you would like the text to display
 * @param [style] {Object} The style parameters
 * @param [style.font] {String} default "bold 20pt Arial" The style and size of the font
 * @param [style.fill="black"] {Object} A canvas fillstyle that will be used on the text eg "red", "#00FF00"
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 * @param [style.stroke] {String} A canvas fillstyle that will be used on the text stroke eg "blue", "#FCFF00"
 * @param [style.strokeThickness=0] {Number} A number that represents the thickness of the stroke. Default is 0 (no stroke)
 * @param [style.wordWrap=false] {Boolean} Indicates if word wrap should be used
 * @param [style.wordWrapWidth=100] {Number} The width at which text will wrap
 */
PIXI.Text = function(text, style)
{
    this.canvas = document.createElement("canvas");
    this.context = this.canvas.getContext("2d");
    PIXI.Sprite.call(this, PIXI.Texture.fromCanvas(this.canvas));

    this.setText(text);
    this.setStyle(style);

    this.updateText();
    this.dirty = false;
};

// constructor
PIXI.Text.prototype = Object.create(PIXI.Sprite.prototype);
PIXI.Text.prototype.constructor = PIXI.Text;

/**
 * Set the style of the text
 *
 * @method setStyle
 * @param [style] {Object} The style parameters
 * @param [style.font="bold 20pt Arial"] {String} The style and size of the font
 * @param [style.fill="black"] {Object} A canvas fillstyle that will be used on the text eg "red", "#00FF00"
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 * @param [style.stroke="black"] {String} A canvas fillstyle that will be used on the text stroke eg "blue", "#FCFF00"
 * @param [style.strokeThickness=0] {Number} A number that represents the thickness of the stroke. Default is 0 (no stroke)
 * @param [style.wordWrap=false] {Boolean} Indicates if word wrap should be used
 * @param [style.wordWrapWidth=100] {Number} The width at which text will wrap
 */
PIXI.Text.prototype.setStyle = function(style)
{
    style = style || {};
    style.font = style.font || "bold 20pt Arial";
    style.fill = style.fill || "black";
    style.align = style.align || "left";
    style.stroke = style.stroke || "black"; //provide a default, see: https://github.com/GoodBoyDigital/pixi.js/issues/136
    style.strokeThickness = style.strokeThickness || 0;
    style.wordWrap = style.wordWrap || false;
    style.wordWrapWidth = style.wordWrapWidth || 100;
    this.style = style;
    this.dirty = true;
};

/**
 * Set the copy for the text object. To split a line you can use "\n"
 *
 * @methos setText
 * @param {String} text The copy that you would like the text to display
 */
PIXI.Text.prototype.setText = function(text)
{
    this.text = text.toString() || " ";
    this.dirty = true;
};

/**
 * Renders text
 *
 * @method updateText
 * @private
 */
PIXI.Text.prototype.updateText = function()
{
	this.context.font = this.style.font;

	var outputText = this.text;

	// word wrap
	// preserve original text
	if(this.style.wordWrap)outputText = this.wordWrap(this.text);

	//split text into lines
	var lines = outputText.split(/(?:\r\n|\r|\n)/);

	//calculate text width
	var lineWidths = [];
	var maxLineWidth = 0;
	for (var i = 0; i < lines.length; i++)
	{
		var lineWidth = this.context.measureText(lines[i]).width;
		lineWidths[i] = lineWidth;
		maxLineWidth = Math.max(maxLineWidth, lineWidth);
	}
	this.canvas.width = maxLineWidth + this.style.strokeThickness;

	//calculate text height
	var lineHeight = this.determineFontHeight("font: " + this.style.font  + ";") + this.style.strokeThickness;
	this.canvas.height = lineHeight * lines.length;

	//set canvas text styles
	this.context.fillStyle = this.style.fill;
	this.context.font = this.style.font;

	this.context.strokeStyle = this.style.stroke;
	this.context.lineWidth = this.style.strokeThickness;

	this.context.textBaseline = "top";

	//draw lines line by line
	for (i = 0; i < lines.length; i++)
	{
		var linePosition = new PIXI.Point(this.style.strokeThickness / 2, this.style.strokeThickness / 2 + i * lineHeight);

		if(this.style.align == "right")
		{
			linePosition.x += maxLineWidth - lineWidths[i];
		}
		else if(this.style.align == "center")
		{
			linePosition.x += (maxLineWidth - lineWidths[i]) / 2;
		}

		if(this.style.stroke && this.style.strokeThickness)
		{
			this.context.strokeText(lines[i], linePosition.x, linePosition.y);
		}

		if(this.style.fill)
		{
			this.context.fillText(lines[i], linePosition.x, linePosition.y);
		}
	}

    this.updateTexture();
};

/**
 * Updates texture size based on canvas size
 *
 * @method updateTexture
 * @private
 */
PIXI.Text.prototype.updateTexture = function()
{
    this.texture.baseTexture.width = this.canvas.width;
    this.texture.baseTexture.height = this.canvas.height;
    this.texture.frame.width = this.canvas.width;
    this.texture.frame.height = this.canvas.height;

  	this._width = this.canvas.width;
    this._height = this.canvas.height;

    PIXI.texturesToUpdate.push(this.texture.baseTexture);
};

/**
 * Updates the transfor of this object
 *
 * @method updateTransform
 * @private
 */
PIXI.Text.prototype.updateTransform = function()
{
	if(this.dirty)
	{
		this.updateText();
		this.dirty = false;
	}

	PIXI.Sprite.prototype.updateTransform.call(this);
};

/*
 * http://stackoverflow.com/users/34441/ellisbben
 * great solution to the problem!
 *
 * @method determineFontHeight
 * @param fontStyle {Object}
 * @private
 */
PIXI.Text.prototype.determineFontHeight = function(fontStyle)
{
	// build a little reference dictionary so if the font style has been used return a
	// cached version...
	var result = PIXI.Text.heightCache[fontStyle];

	if(!result)
	{
		var body = document.getElementsByTagName("body")[0];
		var dummy = document.createElement("div");
		var dummyText = document.createTextNode("M");
		dummy.appendChild(dummyText);
		dummy.setAttribute("style", fontStyle + ';position:absolute;top:0;left:0');
		body.appendChild(dummy);

		result = dummy.offsetHeight;
		PIXI.Text.heightCache[fontStyle] = result;

		body.removeChild(dummy);
	}

	return result;
};

/**
 * Applies newlines to a string to have it optimally fit into the horizontal
 * bounds set by the Text object's wordWrapWidth property.
 *
 * @method wordWrap
 * @param text {String}
 * @private
 */
PIXI.Text.prototype.wordWrap = function(text)
{
	// Greedy wrapping algorithm that will wrap words as the line grows longer
	// than its horizontal bounds.
	var result = "";
	var lines = text.split("\n");
	for (var i = 0; i < lines.length; i++)
	{
		var spaceLeft = this.style.wordWrapWidth;
		var words = lines[i].split(" ");
		for (var j = 0; j < words.length; j++)
		{
			var wordWidth = this.context.measureText(words[j]).width;
			var wordWidthWithSpace = wordWidth + this.context.measureText(" ").width;
			if(wordWidthWithSpace > spaceLeft)
			{
				// Skip printing the newline if it's the first word of the line that is
				// greater than the word wrap width.
				if(j > 0)
				{
					result += "\n";
				}
				result += words[j] + " ";
				spaceLeft = this.style.wordWrapWidth - wordWidth;
			}
			else
			{
				spaceLeft -= wordWidthWithSpace;
				result += words[j] + " ";
			}
		}
		result += "\n";
	}
	return result;
};

/**
 * Destroys this text object
 *
 * @method destroy
 * @param destroyTexture {Boolean}
 */
PIXI.Text.prototype.destroy = function(destroyTexture)
{
	if(destroyTexture)
	{
		this.texture.destroy();
	}

};

PIXI.Text.heightCache = {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Text Object will create a line(s) of text using bitmap font. To split a line you can use "\n", "\r" or "\r\n"
 * You can generate the fnt files using
 * http://www.angelcode.com/products/bmfont/ for windows or
 * http://www.bmglyph.com/ for mac.
 *
 * @class BitmapText
 * @extends DisplayObjectContainer
 * @constructor
 * @param text {String} The copy that you would like the text to display
 * @param style {Object} The style parameters
 * @param style.font {String} The size (optional) and bitmap font id (required) eq "Arial" or "20px Arial" (must have loaded previously)
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 */
PIXI.BitmapText = function(text, style)
{
    PIXI.DisplayObjectContainer.call(this);

    this.setText(text);
    this.setStyle(style);
    this.updateText();
    this.dirty = false

};

// constructor
PIXI.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype);
PIXI.BitmapText.prototype.constructor = PIXI.BitmapText;

/**
 * Set the copy for the text object
 *
 * @method setText
 * @param text {String} The copy that you would like the text to display
 */
PIXI.BitmapText.prototype.setText = function(text)
{
    this.text = text || " ";
    this.dirty = true;
};

/**
 * Set the style of the text
 *
 * @method setStyle
 * @param style {Object} The style parameters
 * @param style.font {String} The size (optional) and bitmap font id (required) eq "Arial" or "20px Arial" (must have loaded previously)
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 */
PIXI.BitmapText.prototype.setStyle = function(style)
{
    style = style || {};
    style.align = style.align || "left";
    this.style = style;

    var font = style.font.split(" ");
    this.fontName = font[font.length - 1];
    this.fontSize = font.length >= 2 ? parseInt(font[font.length - 2], 10) : PIXI.BitmapText.fonts[this.fontName].size;

    this.dirty = true;
};

/**
 * Renders text
 *
 * @method updateText
 * @private
 */
PIXI.BitmapText.prototype.updateText = function()
{
    var data = PIXI.BitmapText.fonts[this.fontName];
    var pos = new PIXI.Point();
    var prevCharCode = null;
    var chars = [];
    var maxLineWidth = 0;
    var lineWidths = [];
    var line = 0;
    var scale = this.fontSize / data.size;
    for(var i = 0; i < this.text.length; i++)
    {
        var charCode = this.text.charCodeAt(i);
        if(/(?:\r\n|\r|\n)/.test(this.text.charAt(i)))
        {
            lineWidths.push(pos.x);
            maxLineWidth = Math.max(maxLineWidth, pos.x);
            line++;

            pos.x = 0;
            pos.y += data.lineHeight;
            prevCharCode = null;
            continue;
        }

        var charData = data.chars[charCode];
        if(!charData) continue;

        if(prevCharCode && charData[prevCharCode])
        {
           pos.x += charData.kerning[prevCharCode];
        }
        chars.push({texture:charData.texture, line: line, charCode: charCode, position: new PIXI.Point(pos.x + charData.xOffset, pos.y + charData.yOffset)});
        pos.x += charData.xAdvance;

        prevCharCode = charCode;
    }

    lineWidths.push(pos.x);
    maxLineWidth = Math.max(maxLineWidth, pos.x);

    var lineAlignOffsets = [];
    for(i = 0; i <= line; i++)
    {
        var alignOffset = 0;
        if(this.style.align == "right")
        {
            alignOffset = maxLineWidth - lineWidths[i];
        }
        else if(this.style.align == "center")
        {
            alignOffset = (maxLineWidth - lineWidths[i]) / 2;
        }
        lineAlignOffsets.push(alignOffset);
    }

    for(i = 0; i < chars.length; i++)
    {
        var c = new PIXI.Sprite(chars[i].texture)//PIXI.Sprite.fromFrame(chars[i].charCode);
        c.position.x = (chars[i].position.x + lineAlignOffsets[chars[i].line]) * scale;
        c.position.y = chars[i].position.y * scale;
        c.scale.x = c.scale.y = scale;
        this.addChild(c);
    }

    this.width = pos.x * scale;
    this.height = (pos.y + data.lineHeight) * scale;
};

/**
 * Updates the transfor of this object
 *
 * @method updateTransform
 * @private
 */
PIXI.BitmapText.prototype.updateTransform = function()
{
	if(this.dirty)
	{
        while(this.children.length > 0)
        {
            this.removeChild(this.getChildAt(0));
        }
        this.updateText();

        this.dirty = false;
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
};

PIXI.BitmapText.fonts = {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */
 
 /**
 * The interaction manager deals with mouse and touch events. Any DisplayObject can be interactive
 * This manager also supports multitouch.
 *
 * @class InteractionManager
 * @constructor
 * @param stage {Stage} The stage to handle interactions
 */
PIXI.InteractionManager = function(stage)
{
	/**
	 * a refference to the stage
	 *
	 * @property stage
	 * @type Stage
	 */
	this.stage = stage;

	/**
	 * the mouse data
	 *
	 * @property mouse
	 * @type InteractionData
	 */
	this.mouse = new PIXI.InteractionData();

	/**
	 * an object that stores current touches (InteractionData) by id reference
	 *
	 * @property touchs
	 * @type Object
	 */
	this.touchs = {};


	
	// helpers
	this.tempPoint = new PIXI.Point();
	//this.tempMatrix =  mat3.create();

	this.mouseoverEnabled = true;

	//tiny little interactiveData pool!
	this.pool = [];

	this.interactiveItems = [];
	this.interactionDOMElement = null;

	//this will make it so that you dont have to call bind all the time
	this.onMouseMove = this.onMouseMove.bind( this );
	this.onMouseDown = this.onMouseDown.bind(this);
	this.onMouseOut = this.onMouseOut.bind(this);
	this.onMouseUp = this.onMouseUp.bind(this);

	this.onTouchStart = this.onTouchStart.bind(this);
	this.onTouchEnd = this.onTouchEnd.bind(this);
	this.onTouchMove = this.onTouchMove.bind(this);
	
	
	this.last = 0;
}

// constructor
PIXI.InteractionManager.prototype.constructor = PIXI.InteractionManager;

/**
 * Collects an interactive sprite recursively to have their interactions managed
 *
 * @method collectInteractiveSprite
 * @param displayObject {DisplayObject} the displayObject to collect
 * @param iParent {DisplayObject}
 * @private
 */
PIXI.InteractionManager.prototype.collectInteractiveSprite = function(displayObject, iParent)
{
	var children = displayObject.children;
	var length = children.length;
	
	/// make an interaction tree... {item.__interactiveParent}
	for (var i = length-1; i >= 0; i--)
	{
		var child = children[i];
		
//		if(child.visible) {
			// push all interactive bits
			if(child.interactive)
			{
				iParent.interactiveChildren = true;
				//child.__iParent = iParent;
				this.interactiveItems.push(child);

				if(child.children.length > 0)
				{
					this.collectInteractiveSprite(child, child);
				}
			}
			else
			{
				child.__iParent = null;

				if(child.children.length > 0)
				{
					this.collectInteractiveSprite(child, iParent);
				}
			}
//		}
	}
}

/**
 * Sets the target for event delegation
 *
 * @method setTarget
 * @param target {WebGLRenderer|CanvasRenderer} the renderer to bind events to
 * @private
 */
PIXI.InteractionManager.prototype.setTarget = function(target)
{
	this.target = target;

	//check if the dom element has been set. If it has don't do anything
	if( this.interactionDOMElement === null ) {

		this.setTargetDomElement( target.view );
	}

 	document.body.addEventListener('mouseup',  this.onMouseUp, true);
}


/**
 * Sets the dom element which will receive mouse/touch events. This is useful for when you have other DOM
 * elements ontop of the renderers Canvas element. With this you'll be able to delegate another dom element
 * to receive those events
 *
 * @method setTargetDomElement
 * @param domElement {DOMElement} the dom element which will receive mouse and touch events
 * @private
 */
PIXI.InteractionManager.prototype.setTargetDomElement = function(domElement)
{
	//remove previouse listeners
	if( this.interactionDOMElement !== null ) 
	{
		this.interactionDOMElement.style['-ms-content-zooming'] = '';
    	this.interactionDOMElement.style['-ms-touch-action'] = '';

		this.interactionDOMElement.removeEventListener('mousemove',  this.onMouseMove, true);
		this.interactionDOMElement.removeEventListener('mousedown',  this.onMouseDown, true);
	 	this.interactionDOMElement.removeEventListener('mouseout',   this.onMouseOut, true);

	 	// aint no multi touch just yet!
		this.interactionDOMElement.removeEventListener('touchstart', this.onTouchStart, true);
		this.interactionDOMElement.removeEventListener('touchend', this.onTouchEnd, true);
		this.interactionDOMElement.removeEventListener('touchmove', this.onTouchMove, true);
	}


	if (window.navigator.msPointerEnabled) 
	{
		// time to remove some of that zoom in ja..
		domElement.style['-ms-content-zooming'] = 'none';
    	domElement.style['-ms-touch-action'] = 'none';
    
		// DO some window specific touch!
	}

	this.interactionDOMElement = domElement;

	domElement.addEventListener('mousemove',  this.onMouseMove, true);
	domElement.addEventListener('mousedown',  this.onMouseDown, true);
 	domElement.addEventListener('mouseout',   this.onMouseOut, true);

 	// aint no multi touch just yet!
	domElement.addEventListener('touchstart', this.onTouchStart, true);
	domElement.addEventListener('touchend', this.onTouchEnd, true);
	domElement.addEventListener('touchmove', this.onTouchMove, true);
}


/**
 * updates the state of interactive objects
 *
 * @method update
 * @private
 */
PIXI.InteractionManager.prototype.update = function()
{
	if(!this.target)return;
	
	// frequency of 30fps??
	var now = Date.now();
	var diff = now - this.last;
	diff = (diff * 30) / 1000;
	if(diff < 1)return;
	this.last = now;
	//
	
	// ok.. so mouse events??
	// yes for now :)
	// OPTIMSE - how often to check??
	if(this.dirty)
	{
		this.dirty = false;
		
		var len = this.interactiveItems.length;
		
		for (var i=0; i < len; i++) {
		  this.interactiveItems[i].interactiveChildren = false;
		}
		
		this.interactiveItems = [];
		
		if(this.stage.interactive)this.interactiveItems.push(this.stage);
		// go through and collect all the objects that are interactive..
		this.collectInteractiveSprite(this.stage, this.stage);
	}
	
	// loop through interactive objects!
	var length = this.interactiveItems.length;
	
	this.interactionDOMElement.style.cursor = "default";	
				
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		
		//if(!item.visible)continue;
		
		// OPTIMISATION - only calculate every time if the mousemove function exists..
		// OK so.. does the object have any other interactive functions?
		// hit-test the clip!
		
		
		if(item.mouseover || item.mouseout || item.buttonMode)
		{
			// ok so there are some functions so lets hit test it..
			item.__hit = this.hitTest(item, this.mouse);
			this.mouse.target = item;
			// ok so deal with interactions..
			// loks like there was a hit!
			if(item.__hit)
			{
				if(item.buttonMode) this.interactionDOMElement.style.cursor = "pointer";	
				
				if(!item.__isOver)
				{
					
					if(item.mouseover)item.mouseover(this.mouse);
					item.__isOver = true;	
				}
			}
			else
			{
				if(item.__isOver)
				{
					// roll out!
					if(item.mouseout)item.mouseout(this.mouse);
					item.__isOver = false;	
				}
			}
		}
		
		// --->
	}
}

/**
 * Is called when the mouse moves accross the renderer element
 *
 * @method onMouseMove
 * @param event {Event} The DOM event of the mouse moving
 * @private
 */
PIXI.InteractionManager.prototype.onMouseMove = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	// TODO optimize by not check EVERY TIME! maybe half as often? //
	var rect = this.interactionDOMElement.getBoundingClientRect();
	
	this.mouse.global.x = (event.clientX - rect.left) * (this.target.width / rect.width);
	this.mouse.global.y = (event.clientY - rect.top) * ( this.target.height / rect.height);
	
	var length = this.interactiveItems.length;
	var global = this.mouse.global;
	
	
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mousemove)
		{
			//call the function!
			item.mousemove(this.mouse);
		}
	}
}

/**
 * Is called when the mouse button is pressed down on the renderer element
 *
 * @method onMouseDown
 * @param event {Event} The DOM event of a mouse button being pressed down
 * @private
 */
PIXI.InteractionManager.prototype.onMouseDown = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	
	// loop through inteaction tree...
	// hit test each item! -> 
	// get interactive items under point??
	//stage.__i
	var length = this.interactiveItems.length;
	var global = this.mouse.global;
	
	var index = 0;
	var parent = this.stage;
	
	// while 
	// hit test 
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mousedown || item.click)
		{
			item.__mouseIsDown = true;
			item.__hit = this.hitTest(item, this.mouse);
			
			if(item.__hit)
			{
				//call the function!
				if(item.mousedown)item.mousedown(this.mouse);
				item.__isDown = true;
				
				// just the one!
				if(!item.interactiveChildren)break;
			}
		}
	}
}


PIXI.InteractionManager.prototype.onMouseOut = function(event)
{
	var length = this.interactiveItems.length;
	
	this.interactionDOMElement.style.cursor = "default";	
				
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.__isOver)
		{
			this.mouse.target = item;
			if(item.mouseout)item.mouseout(this.mouse);
			item.__isOver = false;	
		}
	}
}

/**
 * Is called when the mouse button is released on the renderer element
 *
 * @method onMouseUp
 * @param event {Event} The DOM event of a mouse button being released
 * @private
 */
PIXI.InteractionManager.prototype.onMouseUp = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	
	var global = this.mouse.global;
	
	
	var length = this.interactiveItems.length;
	var up = false;
	
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mouseup || item.mouseupoutside || item.click)
		{
			item.__hit = this.hitTest(item, this.mouse);
			
			if(item.__hit && !up)
			{
				//call the function!
				if(item.mouseup)
				{
					item.mouseup(this.mouse);
				}
				if(item.__isDown)
				{
					if(item.click)item.click(this.mouse);
				}
				
				if(!item.interactiveChildren)up = true;
			}
			else
			{
				if(item.__isDown)
				{
					if(item.mouseupoutside)item.mouseupoutside(this.mouse);
				}
			}
		
			item.__isDown = false;	
		}
	}
}

/**
 * Tests if the current mouse coords hit a sprite
 *
 * @method hitTest
 * @param item {DisplayObject} The displayObject to test for a hit
 * @param interactionData {InteractionData} The interactiondata object to update in the case of a hit
 * @private
 */
PIXI.InteractionManager.prototype.hitTest = function(item, interactionData)
{
	var global = interactionData.global;
	
	if(item.vcount !== PIXI.visibleCount)return false;

	var isSprite = (item instanceof PIXI.Sprite),
		worldTransform = item.worldTransform,
		a00 = worldTransform[0], a01 = worldTransform[1], a02 = worldTransform[2],
		a10 = worldTransform[3], a11 = worldTransform[4], a12 = worldTransform[5],
		id = 1 / (a00 * a11 + a01 * -a10),
		x = a11 * id * global.x + -a01 * id * global.y + (a12 * a01 - a02 * a11) * id,
		y = a00 * id * global.y + -a10 * id * global.x + (-a12 * a00 + a02 * a10) * id;

	interactionData.target = item;
	
	//a sprite or display object with a hit area defined
	if(item.hitArea && item.hitArea.contains) {
		if(item.hitArea.contains(x, y)) {
			//if(isSprite)
			interactionData.target = item;

			return true;
		}
		
		return false;
	}
	// a sprite with no hitarea defined
	else if(isSprite)
	{
		var width = item.texture.frame.width,
			height = item.texture.frame.height,
			x1 = -width * item.anchor.x,
			y1;
		
		if(x > x1 && x < x1 + width)
		{
			y1 = -height * item.anchor.y;
		
			if(y > y1 && y < y1 + height)
			{
				// set the target property if a hit is true!
				interactionData.target = item
				return true;
			}
		}
	}

	var length = item.children.length;
	
	for (var i = 0; i < length; i++)
	{
		var tempItem = item.children[i];
		var hit = this.hitTest(tempItem, interactionData);
		if(hit)
		{
			// hmm.. TODO SET CORRECT TARGET?
			interactionData.target = item
			return true;
		}
	}

	return false;	
}

/**
 * Is called when a touch is moved accross the renderer element
 *
 * @method onTouchMove
 * @param event {Event} The DOM event of a touch moving accross the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchMove = function(event)
{
	var rect = this.interactionDOMElement.getBoundingClientRect();
	var changedTouches = event.changedTouches;
	
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		var touchData = this.touchs[touchEvent.identifier];
		touchData.originalEvent =  event || window.event;
		
		// update the touch position
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
	}
	
	var length = this.interactiveItems.length;
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		if(item.touchmove)item.touchmove(touchData);
	}
}

/**
 * Is called when a touch is started on the renderer element
 *
 * @method onTouchStart
 * @param event {Event} The DOM event of a touch starting on the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchStart = function(event)
{
	var rect = this.interactionDOMElement.getBoundingClientRect();
	
	var changedTouches = event.changedTouches;
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		
		var touchData = this.pool.pop();
		if(!touchData)touchData = new PIXI.InteractionData();
		
		touchData.originalEvent =  event || window.event;
		
		this.touchs[touchEvent.identifier] = touchData;
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
		
		var length = this.interactiveItems.length;
		
		for (var j = 0; j < length; j++)
		{
			var item = this.interactiveItems[j];
			
			if(item.touchstart || item.tap)
			{
				item.__hit = this.hitTest(item, touchData);
				
				if(item.__hit)
				{
					//call the function!
					if(item.touchstart)item.touchstart(touchData);
					item.__isDown = true;
					item.__touchData = touchData;
					
					if(!item.interactiveChildren)break;
				}
			}
		}
	}
}

/**
 * Is called when a touch is ended on the renderer element
 *
 * @method onTouchEnd
 * @param event {Event} The DOM event of a touch ending on the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchEnd = function(event)
{
	//this.mouse.originalEvent = event || window.event; //IE uses window.event
	var rect = this.interactionDOMElement.getBoundingClientRect();
	var changedTouches = event.changedTouches;
	
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		var touchData = this.touchs[touchEvent.identifier];
		var up = false;
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
		
		var length = this.interactiveItems.length;
		for (var j = 0; j < length; j++)
		{
			var item = this.interactiveItems[j];
			var itemTouchData = item.__touchData; // <-- Here!
			item.__hit = this.hitTest(item, touchData);
		
			if(itemTouchData == touchData)
			{
				// so this one WAS down...
				touchData.originalEvent =  event || window.event;
				// hitTest??
				
				if(item.touchend || item.tap)
				{
					if(item.__hit && !up)
					{
						if(item.touchend)item.touchend(touchData);
						if(item.__isDown)
						{
							if(item.tap)item.tap(touchData);
						}
						
						if(!item.interactiveChildren)up = true;
					}
					else
					{
						if(item.__isDown)
						{
							if(item.touchendoutside)item.touchendoutside(touchData);
						}
					}
					
					item.__isDown = false;
				}
				
				item.__touchData = null;
					
			}
			else
			{
				
			}
		}
		// remove the touch..
		this.pool.push(touchData);
		this.touchs[touchEvent.identifier] = null;
	}
}

/**
 * Holds all information related to an Interaction event
 *
 * @class InteractionData
 * @constructor
 */
PIXI.InteractionData = function()
{
	/**
	 * This point stores the global coords of where the touch/mouse event happened
	 *
	 * @property global 
	 * @type Point
	 */
	this.global = new PIXI.Point();
	
	// this is here for legacy... but will remove
	this.local = new PIXI.Point();

	/**
	 * The target Sprite that was interacted with
	 *
	 * @property target
	 * @type Sprite
	 */
	this.target;

	/**
	 * When passed to an event handler, this will be the original DOM Event that was captured
	 *
	 * @property originalEvent
	 * @type Event
	 */
	this.originalEvent;
}

/**
 * This will return the local coords of the specified displayObject for this InteractionData
 *
 * @method getLocalPosition
 * @param displayObject {DisplayObject} The DisplayObject that you would like the local coords off
 * @return {Point} A point containing the coords of the InteractionData position relative to the DisplayObject
 */
PIXI.InteractionData.prototype.getLocalPosition = function(displayObject)
{
	var worldTransform = displayObject.worldTransform;
	var global = this.global;
	
	// do a cheeky transform to get the mouse coords;
	var a00 = worldTransform[0], a01 = worldTransform[1], a02 = worldTransform[2],
        a10 = worldTransform[3], a11 = worldTransform[4], a12 = worldTransform[5],
        id = 1 / (a00 * a11 + a01 * -a10);
	// set the mouse coords...
	return new PIXI.Point(a11 * id * global.x + -a01 * id * global.y + (a12 * a01 - a02 * a11) * id,
							   a00 * id * global.y + -a10 * id * global.x + (-a12 * a00 + a02 * a10) * id)
}

// constructor
PIXI.InteractionData.prototype.constructor = PIXI.InteractionData;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Stage represents the root of the display tree. Everything connected to the stage is rendered
 *
 * @class Stage
 * @extends DisplayObjectContainer
 * @constructor
 * @param backgroundColor {Number} the background color of the stage, easiest way to pass this in is in hex format
 *		like: 0xFFFFFF for white
 */
PIXI.Stage = function(backgroundColor)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * [read-only] Current transform of the object based on world (parent) factors
	 *
	 * @property worldTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.worldTransform = PIXI.mat3.create();

	/**
	 * Whether or not the stage is interactive
	 *
	 * @property interactive
	 * @type Boolean
	 */
	this.interactive = true;

	/**
	 * The interaction manage for this stage, manages all interactive activity on the stage
	 *
	 * @property interactive
	 * @type InteractionManager
	 */
	this.interactionManager = new PIXI.InteractionManager(this);

	/**
	 * Whether the stage is dirty and needs to have interactions updated
	 *
	 * @property dirty
	 * @type Boolean
	 * @private
	 */
	this.dirty = true;

	this.__childrenAdded = [];
	this.__childrenRemoved = [];

	//the stage is it's own stage
	this.stage = this;

	//optimize hit detection a bit
	this.stage.hitArea = new PIXI.Rectangle(0,0,100000, 100000);

	this.setBackgroundColor(backgroundColor);
	this.worldVisible = true;
}

// constructor
PIXI.Stage.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Stage.prototype.constructor = PIXI.Stage;

/**
 * Sets another DOM element which can receive mouse/touch interactions instead of the default Canvas element.
 * This is useful for when you have other DOM elements ontop of the Canvas element.
 *
 * @method setInteractionDelegate
 * @param domElement {DOMElement} This new domElement which will receive mouse/touch events
 */
PIXI.Stage.prototype.setInteractionDelegate = function(domElement)
{
	this.interactionManager.setTargetDomElement( domElement );
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.Stage.prototype.updateTransform = function()
{
	this.worldAlpha = 1;		
	this.vcount = PIXI.visibleCount;
	
	for(var i=0,j=this.children.length; i<j; i++)
	{
		this.children[i].updateTransform();	
	}
	
	if(this.dirty)
	{
		this.dirty = false;
		// update interactive!
		this.interactionManager.dirty = true;
	}
	
	
	if(this.interactive)this.interactionManager.update();
}

/**
 * Sets the background color for the stage
 *
 * @method setBackgroundColor
 * @param backgroundColor {Number} the color of the background, easiest way to pass this in is in hex format
 *		like: 0xFFFFFF for white
 */
PIXI.Stage.prototype.setBackgroundColor = function(backgroundColor)
{
	this.backgroundColor = backgroundColor || 0x000000;
	this.backgroundColorSplit = HEXtoRGB(this.backgroundColor);
	var hex = this.backgroundColor.toString(16);
	hex = "000000".substr(0, 6 - hex.length) + hex;
	this.backgroundColorString = "#" + hex;
}

/**
 * This will return the point containing global coords of the mouse.
 *
 * @method getMousePosition
 * @return {Point} The point containing the coords of the global InteractionData position.
 */
PIXI.Stage.prototype.getMousePosition = function()
{
	return this.interactionManager.mouse.global;
}

// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating

// requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel

// MIT license

/**
 * A polyfill for requestAnimationFrame
 *
 * @method requestAnimationFrame
 */
/**
 * A polyfill for cancelAnimationFrame
 *
 * @method cancelAnimationFrame
 */
var lastTime = 0;
var vendors = ['ms', 'moz', 'webkit', 'o'];
for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']
                               || window[vendors[x]+'CancelRequestAnimationFrame'];
}

if (!window.requestAnimationFrame)
    window.requestAnimationFrame = function(callback, element) {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function() { callback(currTime + timeToCall); },
          timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };

if (!window.cancelAnimationFrame)
    window.cancelAnimationFrame = function(id) {
        clearTimeout(id);
    };

window.requestAnimFrame = window.requestAnimationFrame;

/**
 * Converts a hex color number to an [R, G, B] array
 *
 * @method HEXtoRGB
 * @param hex {Number}
 */
function HEXtoRGB(hex) {
	return [(hex >> 16 & 0xFF) / 255, ( hex >> 8 & 0xFF) / 255, (hex & 0xFF)/ 255];
}

/**
 * A polyfill for Function.prototype.bind
 *
 * @method bind
 */
if (typeof Function.prototype.bind != 'function') {
  Function.prototype.bind = (function () {
    var slice = Array.prototype.slice;
    return function (thisArg) {
      var target = this, boundArgs = slice.call(arguments, 1);

      if (typeof target != 'function') throw new TypeError();

      function bound() {
	var args = boundArgs.concat(slice.call(arguments));
	target.apply(this instanceof bound ? this : thisArg, args);
      }

      bound.prototype = (function F(proto) {
          proto && (F.prototype = proto);
          if (!(this instanceof F)) return new F;
	})(target.prototype);

      return bound;
    };
  })();
}

/**
 * A wrapper for ajax requests to be handled cross browser
 *
 * @class AjaxRequest
 * @constructor
 */
var AjaxRequest = PIXI.AjaxRequest = function()
{
	var activexmodes = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"] //activeX versions to check for in IE

	if (window.ActiveXObject)
	{ //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
		for (var i=0; i<activexmodes.length; i++)
		{
			try{
				return new ActiveXObject(activexmodes[i])
			}
   			catch(e){
    			//suppress error
   			}
		}
	}
	else if (window.XMLHttpRequest) // if Mozilla, Safari etc
  	{
  		return new XMLHttpRequest()
 	}
 	else
 	{
		return false;
 	}
}

/*
 * DEBUGGING ONLY
 */
PIXI.runList = function(item)
{
	console.log(">>>>>>>>>")
	console.log("_")
	var safe = 0;
	var tmp = item.first;
	console.log(tmp);

	while(tmp._iNext)
	{
		safe++;
		tmp = tmp._iNext;
		console.log(tmp);
	//	console.log(tmp);

		if(safe > 100)
		{
			console.log("BREAK")
			break
		}
	}
}






/**
 * https://github.com/mrdoob/eventtarget.js/
 * THankS mr DOob!
 */

/**
 * Adds event emitter functionality to a class
 *
 * @class EventTarget
 * @example
 *		function MyEmitter() {
 *			PIXI.EventTarget.call(this); //mixes in event target stuff
 *		}
 *
 *		var em = new MyEmitter();
 *		em.emit({ type: 'eventName', data: 'some data' });
 */
PIXI.EventTarget = function () {

	var listeners = {};

	this.addEventListener = this.on = function ( type, listener ) {


		if ( listeners[ type ] === undefined ) {

			listeners[ type ] = [];

		}

		if ( listeners[ type ].indexOf( listener ) === - 1 ) {

			listeners[ type ].push( listener );
		}

	};

	this.dispatchEvent = this.emit = function ( event ) {

		if ( !listeners[ event.type ] || !listeners[ event.type ].length ) {

			return;

		}

		for(var i = 0, l = listeners[ event.type ].length; i < l; i++) {

			listeners[ event.type ][ i ]( event );

		}

	};

	this.removeEventListener = this.off = function ( type, listener ) {

		var index = listeners[ type ].indexOf( listener );

		if ( index !== - 1 ) {

			listeners[ type ].splice( index, 1 );

		}

	};

};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * This helper function will automatically detect which renderer you should be using.
 * WebGL is the preferred renderer as it is a lot fastest. If webGL is not supported by
 * the browser then this function will return a canvas renderer
 *
 * @method autoDetectRenderer
 * @static
 * @param width {Number} the width of the renderers view
 * @param height {Number} the height of the renderers view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 * @param antialias=false {Boolean} sets antialias (only applicable in webGL chrome at the moment)
 *
 * antialias
 */
PIXI.autoDetectRenderer = function(width, height, view, transparent, antialias)
{
	if(!width)width = 800;
	if(!height)height = 600;

	// BORROWED from Mr Doob (mrdoob.com)
	var webgl = ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )();

	if(webgl)
	{
		var ie =  (navigator.userAgent.toLowerCase().indexOf('msie') != -1);
		 webgl = !ie;
	}
	
	//console.log(webgl);
	if( webgl )
	{
		return new PIXI.WebGLRenderer(width, height, view, transparent, antialias);
	}

	return	new PIXI.CanvasRenderer(width, height, view, transparent);
};



/*
	PolyK library
	url: http://polyk.ivank.net
	Released under MIT licence.

	Copyright (c) 2012 Ivan Kuckir

	Permission is hereby granted, free of charge, to any person
	obtaining a copy of this software and associated documentation
	files (the "Software"), to deal in the Software without
	restriction, including without limitation the rights to use,
	copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following
	conditions:

	The above copyright notice and this permission notice shall be
	included in all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
	OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
	WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.

	This is an amazing lib!

	slightly modified by mat groves (matgroves.com);
*/

PIXI.PolyK = {};

/**
 * Triangulates shapes for webGL graphic fills
 *
 * @method Triangulate
 * @namespace PolyK
 * @constructor
 */
PIXI.PolyK.Triangulate = function(p)
{
	var sign = true;

	var n = p.length>>1;
	if(n<3) return [];
	var tgs = [];
	var avl = [];
	for(var i=0; i<n; i++) avl.push(i);

	var i = 0;
	var al = n;
	while(al > 3)
	{
		var i0 = avl[(i+0)%al];
		var i1 = avl[(i+1)%al];
		var i2 = avl[(i+2)%al];

		var ax = p[2*i0],  ay = p[2*i0+1];
		var bx = p[2*i1],  by = p[2*i1+1];
		var cx = p[2*i2],  cy = p[2*i2+1];

		var earFound = false;
		if(PIXI.PolyK._convex(ax, ay, bx, by, cx, cy, sign))
		{
			earFound = true;
			for(var j=0; j<al; j++)
			{
				var vi = avl[j];
				if(vi==i0 || vi==i1 || vi==i2) continue;
				if(PIXI.PolyK._PointInTriangle(p[2*vi], p[2*vi+1], ax, ay, bx, by, cx, cy)) {earFound = false; break;}
			}
		}
		if(earFound)
		{
			tgs.push(i0, i1, i2);
			avl.splice((i+1)%al, 1);
			al--;
			i = 0;
		}
		else if(i++ > 3*al)
		{
			// need to flip flip reverse it!
			// reset!
			if(sign)
			{
				var tgs = [];
				avl = [];
				for(var i=0; i<n; i++) avl.push(i);

				i = 0;
				al = n;

				sign = false;
			}
			else
			{
				console.log("PIXI Warning: shape too complex to fill")
				return [];
			}
		}
	}
	tgs.push(avl[0], avl[1], avl[2]);
	return tgs;
}

/**
 * Checks if a point is within a triangle
 *
 * @class _PointInTriangle
 * @namespace PolyK
 * @private
 */
PIXI.PolyK._PointInTriangle = function(px, py, ax, ay, bx, by, cx, cy)
{
	var v0x = cx-ax;
	var v0y = cy-ay;
	var v1x = bx-ax;
	var v1y = by-ay;
	var v2x = px-ax;
	var v2y = py-ay;

	var dot00 = v0x*v0x+v0y*v0y;
	var dot01 = v0x*v1x+v0y*v1y;
	var dot02 = v0x*v2x+v0y*v2y;
	var dot11 = v1x*v1x+v1y*v1y;
	var dot12 = v1x*v2x+v1y*v2y;

	var invDenom = 1 / (dot00 * dot11 - dot01 * dot01);
	var u = (dot11 * dot02 - dot01 * dot12) * invDenom;
	var v = (dot00 * dot12 - dot01 * dot02) * invDenom;

	// Check if point is in triangle
	return (u >= 0) && (v >= 0) && (u + v < 1);
}

/**
 * Checks if a shape is convex
 *
 * @class _convex
 * @namespace PolyK
 * @private
 */
PIXI.PolyK._convex = function(ax, ay, bx, by, cx, cy, sign)
{
	return ((ay-by)*(cx-bx) + (bx-ax)*(cy-by) >= 0) == sign;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.initDefaultShaders = function() 
{
	PIXI.primitiveShader = new PIXI.PrimitiveShader();
  PIXI.primitiveShader.init();

  PIXI.stripShader = new PIXI.StripShader();
  PIXI.stripShader.init();

	PIXI.defaultShader = new PIXI.PixiShader();
	PIXI.defaultShader.init();

  var gl = PIXI.gl; 
  var shaderProgram = PIXI.defaultShader.program;
 

  gl.useProgram(shaderProgram);
  
  gl.enableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
}

PIXI.activatePrimitiveShader = function()
{
  var gl = PIXI.gl;
  
  gl.useProgram(PIXI.primitiveShader.program);
  
  gl.disableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.disableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.disableVertexAttribArray(PIXI.defaultShader.aTextureCoord);

  gl.enableVertexAttribArray(PIXI.primitiveShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.primitiveShader.colorAttribute);
} 

PIXI.deactivatePrimitiveShader = function()
{
  var gl = PIXI.gl;

  gl.useProgram(PIXI.defaultShader.program);
  
  gl.disableVertexAttribArray(PIXI.primitiveShader.aVertexPosition);
  gl.disableVertexAttribArray(PIXI.primitiveShader.colorAttribute);

  gl.enableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);

}

PIXI.activateStripShader = function()
{
  var gl = PIXI.gl;
  
  gl.useProgram(PIXI.stripShader.program);
 // gl.disableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
} 

PIXI.deactivateStripShader = function()
{
  var gl = PIXI.gl;

  gl.useProgram(PIXI.defaultShader.program);
  //gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
}

/*

SHADER COMPILER HELPERS
*/

PIXI.CompileVertexShader = function(gl, shaderSrc)
{
  return PIXI._CompileShader(gl, shaderSrc, gl.VERTEX_SHADER);
}

PIXI.CompileFragmentShader = function(gl, shaderSrc)
{
  return PIXI._CompileShader(gl, shaderSrc, gl.FRAGMENT_SHADER);
}

PIXI._CompileShader = function(gl, shaderSrc, shaderType)
{
  var src = shaderSrc.join("\n");
  var shader = gl.createShader(shaderType);
  gl.shaderSource(shader, src);
  gl.compileShader(shader);

  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    console.log(gl.getShaderInfoLog(shader));
    return null;
  }

  return shader;
}


PIXI.compileProgram = function(vertexSrc, fragmentSrc)
{
	var gl = PIXI.gl;
	var fragmentShader = PIXI.CompileFragmentShader(gl, fragmentSrc);
	var vertexShader = PIXI.CompileVertexShader(gl, vertexSrc);
	
	var shaderProgram = gl.createProgram();
	
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        console.log("Could not initialise shaders");
    }

	return shaderProgram;
} 

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.PixiShader = function()
{
	// the webGL program..
	this.program;
	
	this.fragmentSrc = [
	  "precision lowp float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;",
	  "}"
	];
	
}

PIXI.PixiShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc || PIXI.PixiShader.defaultVertexSrc, this.fragmentSrc)
	
	var gl = PIXI.gl;
	
    gl.useProgram(program);
	
	// get and store the uniforms for the shader
	this.uSampler = gl.getUniformLocation(program, "uSampler");
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
    //this.dimensions = gl.getUniformLocation(this.program, "dimensions");
    
    // get and store the attributes
    this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	this.aTextureCoord = gl.getAttribLocation(program, "aTextureCoord");
	  
    // add those custom shaders!
    for (var key in this.uniforms)
    {
       
    	// get the uniform locations..
	//	program[key] = 
        this.uniforms[key].uniformLocation = gl.getUniformLocation(program, key);

      
    }
  
	this.program = program;
}

PIXI.PixiShader.prototype.syncUniforms = function()
{
	var gl = PIXI.gl;
	
	for (var key in this.uniforms) 
    {
    	//var 
    	var type = this.uniforms[key].type;
    	
    	// need to grow this!
    	if(type == "f")
    	{
			gl.uniform1f(this.uniforms[key].uniformLocation, this.uniforms[key].value);
    	}
    	if(type == "f2")
    	{
    	//	console.log(this.program[key])
			gl.uniform2f(this.uniforms[key].uniformLocation, this.uniforms[key].value.x, this.uniforms[key].value.y);
    	}
        else if(type == "f4")
        {
           // console.log(this.uniforms[key].value)
            gl.uniform4fv(this.uniforms[key].uniformLocation, this.uniforms[key].value);
        }
    	else if(type == "mat4")
    	{
    		gl.uniformMatrix4fv(this.uniforms[key].uniformLocation, false, this.uniforms[key].value);
    	}
    	else if(type == "sampler2D")
    	{
    		// first texture...
    		var texture = this.uniforms[key].value;
    		
    		gl.activeTexture(gl.TEXTURE1);
	    	gl.bindTexture(gl.TEXTURE_2D, texture.baseTexture._glTexture);
	    	
    		gl.uniform1i(this.uniforms[key].uniformLocation, 1);
    		
    		// activate texture..
    		// gl.uniformMatrix4fv(this.program[key], false, this.uniforms[key].value);
    		// gl.uniformMatrix4fv(this.program[key], false, this.uniforms[key].value);
    	}
    }
    
}

PIXI.PixiShader.defaultVertexSrc = [
  "attribute vec2 aVertexPosition;",
  "attribute vec2 aTextureCoord;",
  "attribute float aColor;",
  
  "uniform vec2 projectionVector;",
 "uniform vec2 offsetVector;",
  "varying vec2 vTextureCoord;",
  
  "varying float vColor;",

  "const vec2 center = vec2(-1.0, 1.0);",
  "void main(void) {",
    "gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);",
    "vTextureCoord = aTextureCoord;",
    "vColor = aColor;",
  "}"
];

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.StripShader = function()
{
	// the webGL program..
	this.program;
	
    this.fragmentSrc = [
      "precision mediump float;",
      "varying vec2 vTextureCoord;",
      "varying float vColor;",
      "uniform float alpha;",
      "uniform sampler2D uSampler;",
      "void main(void) {",
        "gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));",
        "gl_FragColor = gl_FragColor * alpha;",
      "}"
    ];

    this.vertexSrc = [
      "attribute vec2 aVertexPosition;",
      "attribute vec2 aTextureCoord;",
      "attribute float aColor;",
      "uniform mat3 translationMatrix;",
      "uniform vec2 projectionVector;",
      "varying vec2 vTextureCoord;",
      "varying vec2 offsetVector;",
      "varying float vColor;",
      "void main(void) {",
        "vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);",
        "v -= offsetVector.xyx;",
        "gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);",
        "vTextureCoord = aTextureCoord;",
        "vColor = aColor;",
      "}"
    ];
}

PIXI.StripShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc, this.fragmentSrc)
	
	var gl = PIXI.gl;
	
    gl.useProgram(program);

	// get and store the uniforms for the shader
	this.uSampler = gl.getUniformLocation(program, "uSampler");
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	//this.dimensions = gl.getUniformLocation(this.program, "dimensions");
	
	// get and store the attributes
	this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.aTextureCoord = gl.getAttribLocation(program, "aTextureCoord");
	  
    this.translationMatrix = gl.getUniformLocation(program, "translationMatrix");
    this.alpha = gl.getUniformLocation(program, "alpha");
  
	this.program = program;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.PrimitiveShader = function()
{
	// the webGL program..
	this.program;
    	
    this.fragmentSrc = [
      "precision mediump float;",
      "varying vec4 vColor;",
      "void main(void) {",
        "gl_FragColor = vColor;",
      "}"
    ];

    this.vertexSrc  = [
      "attribute vec2 aVertexPosition;",
      "attribute vec4 aColor;",
      "uniform mat3 translationMatrix;",
      "uniform vec2 projectionVector;",
      "uniform vec2 offsetVector;",
      "uniform float alpha;",
      "varying vec4 vColor;",
      "void main(void) {",
        "vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
        "v -= offsetVector.xyx;",
        "gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);",
        "vColor = aColor  * alpha;",
      "}"
    ];
	
}

PIXI.PrimitiveShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc, this.fragmentSrc);
	
	var gl = PIXI.gl;
	
  gl.useProgram(program);
	
	// get and store the uniforms for the shader
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
  
  // get and store the attributes
  this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	
  this.translationMatrix = gl.getUniformLocation(program, "translationMatrix");
  this.alpha = gl.getUniformLocation(program, "alpha");

	this.program = program;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A set of functions used by the webGL renderer to draw the primitive graphics data
 *
 * @class CanvasGraphics
 */
PIXI.WebGLGraphics = function()
{
	
}

/**
 * Renders the graphics object
 *
 * @static
 * @private
 * @method renderGraphics
 * @param graphics {Graphics}
 * @param projection {Object}
 */
PIXI.WebGLGraphics.renderGraphics = function(graphics, projection)
{
	var gl = PIXI.gl;
	
	if(!graphics._webGL)graphics._webGL = {points:[], indices:[], lastIndex:0, 
										   buffer:gl.createBuffer(),
										   indexBuffer:gl.createBuffer()};
	
	if(graphics.dirty)
	{
		graphics.dirty = false;
		
		if(graphics.clearDirty)
		{
			graphics.clearDirty = false;
			
			graphics._webGL.lastIndex = 0;
			graphics._webGL.points = [];
			graphics._webGL.indices = [];
			
		}
		
		PIXI.WebGLGraphics.updateGraphics(graphics);
	}
	
	PIXI.activatePrimitiveShader();
	
	// This  could be speeded up fo sure!
	var m = PIXI.mat3.clone(graphics.worldTransform);
	
	PIXI.mat3.transpose(m);
	
	// set the matrix transform for the 
 	gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);

 	gl.uniformMatrix3fv(PIXI.primitiveShader.translationMatrix, false, m);
 	
	gl.uniform2f(PIXI.primitiveShader.projectionVector, projection.x, -projection.y);
	gl.uniform2f(PIXI.primitiveShader.offsetVector, -PIXI.offset.x, -PIXI.offset.y);
	
	gl.uniform1f(PIXI.primitiveShader.alpha, graphics.worldAlpha);
	gl.bindBuffer(gl.ARRAY_BUFFER, graphics._webGL.buffer);
	
	gl.vertexAttribPointer(PIXI.primitiveShader.aVertexPosition, 2, gl.FLOAT, false, 4 * 6, 0);
	gl.vertexAttribPointer(PIXI.primitiveShader.colorAttribute, 4, gl.FLOAT, false,4 * 6, 2 * 4);
	
	// set the index buffer!
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.indexBuffer);
	

	gl.drawElements(gl.TRIANGLE_STRIP,  graphics._webGL.indices.length, gl.UNSIGNED_SHORT, 0 );
	
	PIXI.deactivatePrimitiveShader();
	
	
	// return to default shader...
//	PIXI.activateShader(PIXI.defaultShader);
}

/**
 * Updates the graphics object
 *
 * @static
 * @private
 * @method updateGraphics
 * @param graphics {Graphics}
 */
PIXI.WebGLGraphics.updateGraphics = function(graphics)
{
	for (var i=graphics._webGL.lastIndex; i < graphics.graphicsData.length; i++) 
	{
		var data = graphics.graphicsData[i];
		
		if(data.type == PIXI.Graphics.POLY)
		{
			if(data.fill)
			{
				if(data.points.length>3) 
				PIXI.WebGLGraphics.buildPoly(data, graphics._webGL);
			}
			
			if(data.lineWidth > 0)
			{
				PIXI.WebGLGraphics.buildLine(data, graphics._webGL);
			}
		}
		else if(data.type == PIXI.Graphics.RECT)
		{
			PIXI.WebGLGraphics.buildRectangle(data, graphics._webGL);
		}
		else if(data.type == PIXI.Graphics.CIRC || data.type == PIXI.Graphics.ELIP)
		{
			PIXI.WebGLGraphics.buildCircle(data, graphics._webGL);
		}
	};
	
	graphics._webGL.lastIndex = graphics.graphicsData.length;
	
	var gl = PIXI.gl;

	graphics._webGL.glPoints = new Float32Array(graphics._webGL.points);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, graphics._webGL.buffer);
	gl.bufferData(gl.ARRAY_BUFFER, graphics._webGL.glPoints, gl.STATIC_DRAW);
	
	graphics._webGL.glIndicies = new Uint16Array(graphics._webGL.indices);
	
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.glIndicies, gl.STATIC_DRAW);
}

/**
 * Builds a rectangle to draw
 *
 * @static
 * @private
 * @method buildRectangle
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildRectangle = function(graphicsData, webGLData)
{
	// --- //
	// need to convert points to a nice regular data
	// 
	var rectData = graphicsData.points;
	var x = rectData[0];
	var y = rectData[1];
	var width = rectData[2];
	var height = rectData[3];
	
	
	if(graphicsData.fill)
	{
		var color = HEXtoRGB(graphicsData.fillColor);
		var alpha = graphicsData.fillAlpha;
		
		var r = color[0] * alpha;
		var g = color[1] * alpha;
		var b = color[2] * alpha;
	
		var verts = webGLData.points;
		var indices = webGLData.indices;
	
		var vertPos = verts.length/6;
		
		// start
		verts.push(x, y);
		verts.push(r, g, b, alpha);
		
		verts.push(x + width, y);
		verts.push(r, g, b, alpha);
		
		verts.push(x , y + height);
		verts.push(r, g, b, alpha);
		
		verts.push(x + width, y + height);
		verts.push(r, g, b, alpha);
		
		// insert 2 dead triangles..
		indices.push(vertPos, vertPos, vertPos+1, vertPos+2, vertPos+3, vertPos+3)
	}
	
	if(graphicsData.lineWidth)
	{
		graphicsData.points = [x, y,
				  x + width, y,
				  x + width, y + height,
				  x, y + height,
				  x, y];
	
		PIXI.WebGLGraphics.buildLine(graphicsData, webGLData);
	}
	
}

/**
 * Builds a circle to draw
 *
 * @static
 * @private
 * @method buildCircle
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildCircle = function(graphicsData, webGLData)
{
	// --- //
	// need to convert points to a nice regular data
	// 
	var rectData = graphicsData.points;
	var x = rectData[0];
	var y = rectData[1];
	var width = rectData[2];
	var height = rectData[3];
	
	var totalSegs = 40;
	var seg = (Math.PI * 2) / totalSegs ;
		
	if(graphicsData.fill)
	{
		var color = HEXtoRGB(graphicsData.fillColor);
		var alpha = graphicsData.fillAlpha;

		var r = color[0] * alpha;
		var g = color[1] * alpha;
		var b = color[2] * alpha;
	
		var verts = webGLData.points;
		var indices = webGLData.indices;
	
		var vecPos = verts.length/6;
		
		indices.push(vecPos);
		
		for (var i=0; i < totalSegs + 1 ; i++) 
		{
			verts.push(x,y, r, g, b, alpha);
			
			verts.push(x + Math.sin(seg * i) * width,
					   y + Math.cos(seg * i) * height,
					   r, g, b, alpha);
		
			indices.push(vecPos++, vecPos++);
		};
		
		indices.push(vecPos-1);
	}
	
	if(graphicsData.lineWidth)
	{
		graphicsData.points = [];
		
		for (var i=0; i < totalSegs + 1; i++) 
		{
			graphicsData.points.push(x + Math.sin(seg * i) * width,
									 y + Math.cos(seg * i) * height)
		};
		
		PIXI.WebGLGraphics.buildLine(graphicsData, webGLData);
	}
	
}

/**
 * Builds a line to draw
 *
 * @static
 * @private
 * @method buildLine
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildLine = function(graphicsData, webGLData)
{
	// TODO OPTIMISE!
	
	var wrap = true;
	var points = graphicsData.points;
	if(points.length == 0)return;
	
	// if the line width is an odd number add 0.5 to align to a whole pixel
	if(graphicsData.lineWidth%2)
	{
		for (var i = 0; i < points.length; i++) {
			points[i] += 0.5;
		};
	}

	// get first and last point.. figure out the middle!
	var firstPoint = new PIXI.Point( points[0], points[1] );
	var lastPoint = new PIXI.Point( points[points.length - 2], points[points.length - 1] );
	
	// if the first point is the last point - goona have issues :)
	if(firstPoint.x == lastPoint.x && firstPoint.y == lastPoint.y)
	{
		points.pop();
		points.pop();
		
		lastPoint = new PIXI.Point( points[points.length - 2], points[points.length - 1] );
		
		var midPointX = lastPoint.x + (firstPoint.x - lastPoint.x) *0.5;
		var midPointY = lastPoint.y + (firstPoint.y - lastPoint.y) *0.5;
		
		points.unshift(midPointX, midPointY);
		points.push(midPointX, midPointY)
	}
	
	var verts = webGLData.points;
	var indices = webGLData.indices;
	var length = points.length / 2;
	var indexCount = points.length;
	var indexStart = verts.length/6;
	
	// DRAW the Line
	var width = graphicsData.lineWidth / 2;
	
	// sort color
	var color = HEXtoRGB(graphicsData.lineColor);
	var alpha = graphicsData.lineAlpha;
	var r = color[0] * alpha;
	var g = color[1] * alpha;
	var b = color[2] * alpha;
	
	var p1x, p1y, p2x, p2y, p3x, p3y;
	var perpx, perpy, perp2x, perp2y, perp3x, perp3y;
	var ipx, ipy;
	var a1, b1, c1, a2, b2, c2;
	var denom, pdist, dist;
	
	p1x = points[0];
	p1y = points[1];
	
	p2x = points[2];
	p2y = points[3];
	
	perpx = -(p1y - p2y);
	perpy =  p1x - p2x;
	
	dist = Math.sqrt(perpx*perpx + perpy*perpy);
	
	perpx /= dist;
	perpy /= dist;
	perpx *= width;
	perpy *= width;
	
	// start
	verts.push(p1x - perpx , p1y - perpy,
				r, g, b, alpha);
	
	verts.push(p1x + perpx , p1y + perpy,
				r, g, b, alpha);
	
	for (var i = 1; i < length-1; i++) 
	{
		p1x = points[(i-1)*2];
		p1y = points[(i-1)*2 + 1];
		
		p2x = points[(i)*2]
		p2y = points[(i)*2 + 1]
		
		p3x = points[(i+1)*2];
		p3y = points[(i+1)*2 + 1];
		
		perpx = -(p1y - p2y);
		perpy = p1x - p2x;
		
		dist = Math.sqrt(perpx*perpx + perpy*perpy);
		perpx /= dist;
		perpy /= dist;
		perpx *= width;
		perpy *= width;

		perp2x = -(p2y - p3y);
		perp2y = p2x - p3x;
		
		dist = Math.sqrt(perp2x*perp2x + perp2y*perp2y);
		perp2x /= dist;
		perp2y /= dist;
		perp2x *= width;
		perp2y *= width;
		
		a1 = (-perpy + p1y) - (-perpy + p2y);
	    b1 = (-perpx + p2x) - (-perpx + p1x);
	    c1 = (-perpx + p1x) * (-perpy + p2y) - (-perpx + p2x) * (-perpy + p1y);
	    a2 = (-perp2y + p3y) - (-perp2y + p2y);
	    b2 = (-perp2x + p2x) - (-perp2x + p3x);
	    c2 = (-perp2x + p3x) * (-perp2y + p2y) - (-perp2x + p2x) * (-perp2y + p3y);
	 
	    denom = a1*b2 - a2*b1;

	   if(Math.abs(denom) < 0.1 )
		{
		
			denom+=10.1;
			verts.push(p2x - perpx , p2y - perpy,
				r, g, b, alpha);
	
			verts.push(p2x + perpx , p2y + perpy,
				r, g, b, alpha);
			
			continue;
		}
	    
	    px = (b1*c2 - b2*c1)/denom;
	    py = (a2*c1 - a1*c2)/denom;
		
			
		pdist = (px -p2x) * (px -p2x) + (py -p2y) + (py -p2y);
		

		if(pdist > 140 * 140)
		{
			perp3x = perpx - perp2x;
			perp3y = perpy - perp2y;
			
			dist = Math.sqrt(perp3x*perp3x + perp3y*perp3y);
			perp3x /= dist;
			perp3y /= dist;
			perp3x *= width;
			perp3y *= width;
			
			verts.push(p2x - perp3x, p2y -perp3y);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x + perp3x, p2y +perp3y);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x - perp3x, p2y -perp3y);
			verts.push(r, g, b, alpha);
			
			indexCount++;
		}
		else
		{

			verts.push(px , py);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x - (px-p2x), p2y - (py - p2y));
			verts.push(r, g, b, alpha);
		}
	}
	
	p1x = points[(length-2)*2]
	p1y = points[(length-2)*2 + 1] 
	
	p2x = points[(length-1)*2]
	p2y = points[(length-1)*2 + 1]
	
	perpx = -(p1y - p2y)
	perpy = p1x - p2x;
	
	dist = Math.sqrt(perpx*perpx + perpy*perpy);
	perpx /= dist;
	perpy /= dist;
	perpx *= width;
	perpy *= width;
	
	verts.push(p2x - perpx , p2y - perpy)
	verts.push(r, g, b, alpha);
	
	verts.push(p2x + perpx , p2y + perpy)
	verts.push(r, g, b, alpha);
	
	indices.push(indexStart);
	
	for (var i=0; i < indexCount; i++) 
	{
		indices.push(indexStart++);
	};
	
	indices.push(indexStart-1);
}

/**
 * Builds a polygon to draw
 *
 * @static
 * @private
 * @method buildPoly
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildPoly = function(graphicsData, webGLData)
{
	var points = graphicsData.points;
	if(points.length < 6)return;
	
	// get first and last point.. figure out the middle!
	var verts = webGLData.points;
	var indices = webGLData.indices;
	
	var length = points.length / 2;
	
	// sort color
	var color = HEXtoRGB(graphicsData.fillColor);
	var alpha = graphicsData.fillAlpha;
	var r = color[0] * alpha;
	var g = color[1] * alpha;
	var b = color[2] * alpha;
	
	var triangles = PIXI.PolyK.Triangulate(points);
	
	var vertPos = verts.length / 6;
	
	for (var i=0; i < triangles.length; i+=3) 
	{
		indices.push(triangles[i] + vertPos);
		indices.push(triangles[i] + vertPos);
		indices.push(triangles[i+1] + vertPos);
		indices.push(triangles[i+2] +vertPos);
		indices.push(triangles[i+2] + vertPos);
	};
	
	for (var i = 0; i < length; i++) 
	{
		verts.push(points[i * 2], points[i * 2 + 1],
				   r, g, b, alpha);
	};
}

function HEXtoRGB(hex) {
	return [(hex >> 16 & 0xFF) / 255, ( hex >> 8 & 0xFF) / 255, (hex & 0xFF)/ 255];
}





/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI._defaultFrame = new PIXI.Rectangle(0,0,1,1);

// an instance of the gl context..
// only one at the moment :/
PIXI.gl;

/**
 * the WebGLRenderer is draws the stage and all its content onto a webGL enabled canvas. This renderer
 * should be used for browsers support webGL. This Render works by automatically managing webGLBatchs.
 * So no need for Sprite Batch's or Sprite Cloud's
 * Dont forget to add the view to your DOM or you will not see anything :)
 *
 * @class WebGLRenderer
 * @constructor
 * @param width=0 {Number} the width of the canvas view
 * @param height=0 {Number} the height of the canvas view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 * @param antialias=false {Boolean} sets antialias (only applicable in chrome at the moment)
 * 
 */
PIXI.WebGLRenderer = function(width, height, view, transparent, antialias)
{
	// do a catch.. only 1 webGL renderer..

	this.transparent = !!transparent;

	this.width = width || 800;
	this.height = height || 600;

	this.view = view || document.createElement( 'canvas' ); 
    this.view.width = this.width;
	this.view.height = this.height;

	// deal with losing context..	
    var scope = this;
	this.view.addEventListener('webglcontextlost', function(event) { scope.handleContextLost(event); }, false)
	this.view.addEventListener('webglcontextrestored', function(event) { scope.handleContextRestored(event); }, false)

	this.batchs = [];

	var options = {
		alpha: this.transparent,
		antialias:!!antialias, // SPEED UP??
		premultipliedAlpha:false,
		stencil:true
	}

	//try 'experimental-webgl'
	try {
		PIXI.gl = this.gl = this.view.getContext("experimental-webgl",  options);
	} catch (e) {
		//try 'webgl'
		try {
			PIXI.gl = this.gl = this.view.getContext("webgl",  options);
		} catch (e) {
			// fail, not able to get a context
			throw new Error(" This browser does not support webGL. Try using the canvas renderer" + this);
		}
	}

    PIXI.initDefaultShaders();
 

	

   // PIXI.activateDefaultShader();

    var gl = this.gl;
    
    gl.useProgram(PIXI.defaultShader.program);


    PIXI.WebGLRenderer.gl = gl;

    this.batch = new PIXI.WebGLBatch(gl);
   	gl.disable(gl.DEPTH_TEST);
   	gl.disable(gl.CULL_FACE);

    gl.enable(gl.BLEND);
    gl.colorMask(true, true, true, this.transparent); 

    PIXI.projection = new PIXI.Point(400, 300);
    PIXI.offset = new PIXI.Point(0, 0);

    // TODO remove thease globals..

    this.resize(this.width, this.height);
    this.contextLost = false;

	//PIXI.pushShader(PIXI.defaultShader);

    this.stageRenderGroup = new PIXI.WebGLRenderGroup(this.gl, this.transparent);
  //  this.stageRenderGroup. = this.transparent
}

// constructor
PIXI.WebGLRenderer.prototype.constructor = PIXI.WebGLRenderer;

/**
 * Gets a new WebGLBatch from the pool
 *
 * @static
 * @method getBatch
 * @return {WebGLBatch}
 * @private 
 */
PIXI.WebGLRenderer.getBatch = function()
{
	if(PIXI._batchs.length == 0)
	{
		return new PIXI.WebGLBatch(PIXI.WebGLRenderer.gl);
	}
	else
	{
		return PIXI._batchs.pop();
	}
}

/**
 * Puts a batch back into the pool
 *
 * @static
 * @method returnBatch
 * @param batch {WebGLBatch} The batch to return
 * @private
 */
PIXI.WebGLRenderer.returnBatch = function(batch)
{
	batch.clean();	
	PIXI._batchs.push(batch);
}

/**
 * Renders the stage to its webGL view
 *
 * @method render
 * @param stage {Stage} the Stage element to be rendered
 */
PIXI.WebGLRenderer.prototype.render = function(stage)
{
	if(this.contextLost)return;
	
	
	// if rendering a new stage clear the batchs..
	if(this.__stage !== stage)
	{
		// TODO make this work
		// dont think this is needed any more?
		this.__stage = stage;
		this.stageRenderGroup.setRenderable(stage);
	}

	// update any textures	
	PIXI.WebGLRenderer.updateTextures();
		
	// update the scene graph	
	PIXI.visibleCount++;
	stage.updateTransform();
	
	var gl = this.gl;
	
	// -- Does this need to be set every frame? -- //
	gl.colorMask(true, true, true, this.transparent); 
	gl.viewport(0, 0, this.width, this.height);	
	
   	gl.bindFramebuffer(gl.FRAMEBUFFER, null);
		
	gl.clearColor(stage.backgroundColorSplit[0],stage.backgroundColorSplit[1],stage.backgroundColorSplit[2], !this.transparent);     
	gl.clear(gl.COLOR_BUFFER_BIT);

	// HACK TO TEST
	
	this.stageRenderGroup.backgroundColor = stage.backgroundColorSplit;
	
	PIXI.projection.x =  this.width/2;
	PIXI.projection.y =  -this.height/2;
	
	this.stageRenderGroup.render(PIXI.projection);
	
	// interaction
	// run interaction!
	if(stage.interactive)
	{
		//need to add some events!
		if(!stage._interactiveEventsAdded)
		{
			stage._interactiveEventsAdded = true;
			stage.interactionManager.setTarget(this);
		}
	}
	
	// after rendering lets confirm all frames that have been uodated..
	if(PIXI.Texture.frameUpdates.length > 0)
	{
		for (var i=0; i < PIXI.Texture.frameUpdates.length; i++) 
		{
		  	PIXI.Texture.frameUpdates[i].updateFrame = false;
		};
		
		PIXI.Texture.frameUpdates = [];
	}
}

/**
 * Updates the textures loaded into this webgl renderer
 *
 * @static
 * @method updateTextures
 * @private
 */
PIXI.WebGLRenderer.updateTextures = function()
{
	//TODO break this out into a texture manager...
	for (var i=0; i < PIXI.texturesToUpdate.length; i++) PIXI.WebGLRenderer.updateTexture(PIXI.texturesToUpdate[i]);
	for (var i=0; i < PIXI.texturesToDestroy.length; i++) PIXI.WebGLRenderer.destroyTexture(PIXI.texturesToDestroy[i]);
	PIXI.texturesToUpdate = [];
	PIXI.texturesToDestroy = [];
}

/**
 * Updates a loaded webgl texture
 *
 * @static
 * @method updateTexture
 * @param texture {Texture} The texture to update
 * @private
 */
PIXI.WebGLRenderer.updateTexture = function(texture)
{
	//TODO break this out into a texture manager...
	var gl = PIXI.gl;
	
	if(!texture._glTexture)
	{
		texture._glTexture = gl.createTexture();
	}

	if(texture.hasLoaded)
	{
		gl.bindTexture(gl.TEXTURE_2D, texture._glTexture);
	 	gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);

		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

		// reguler...

		if(!texture._powerOf2)
		{
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
		}
		else
		{
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
		}

		gl.bindTexture(gl.TEXTURE_2D, null);
	}
}

/**
 * Destroys a loaded webgl texture
 *
 * @method destroyTexture
 * @param texture {Texture} The texture to update
 * @private
 */
PIXI.WebGLRenderer.destroyTexture = function(texture)
{
	//TODO break this out into a texture manager...
	var gl = PIXI.gl;

	if(texture._glTexture)
	{
		texture._glTexture = gl.createTexture();
		gl.deleteTexture(gl.TEXTURE_2D, texture._glTexture);
	}
}

/**
 * resizes the webGL view to the specified width and height
 *
 * @method resize
 * @param width {Number} the new width of the webGL view
 * @param height {Number} the new height of the webGL view
 */
PIXI.WebGLRenderer.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;

	this.view.width = width;
	this.view.height = height;

	this.gl.viewport(0, 0, this.width, this.height);	

	//var projectionMatrix = this.projectionMatrix;

	PIXI.projection.x =  this.width/2;
	PIXI.projection.y =  -this.height/2;
	
	//PIXI.size.x =  this.width/2;
	//PIXI.size.y =  -this.height/2;

//	projectionMatrix[0] = 2/this.width;
//	projectionMatrix[5] = -2/this.height;
//	projectionMatrix[12] = -1;
//	projectionMatrix[13] = 1;
}

/**
 * Handles a lost webgl context
 *
 * @method handleContextLost
 * @param event {Event}
 * @private
 */
PIXI.WebGLRenderer.prototype.handleContextLost = function(event)
{
	event.preventDefault();
	this.contextLost = true;
}

/**
 * Handles a restored webgl context
 *
 * @method handleContextRestored
 * @param event {Event}
 * @private
 */
PIXI.WebGLRenderer.prototype.handleContextRestored = function(event)
{
	this.gl = this.view.getContext("experimental-webgl",  {  	
		alpha: true
    });

	this.initShaders();	

	for(var key in PIXI.TextureCache) 
	{
        	var texture = PIXI.TextureCache[key].baseTexture;
        	texture._glTexture = null;
        	PIXI.WebGLRenderer.updateTexture(texture);
	};

	for (var i=0; i <  this.batchs.length; i++) 
	{
		this.batchs[i].restoreLostContext(this.gl)//
		this.batchs[i].dirty = true;
	};

	PIXI._restoreBatchs(this.gl);

	this.contextLost = false;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI._batchs = [];

/**
 * @private
 */
PIXI._getBatch = function(gl)
{
	if(PIXI._batchs.length == 0)
	{
		return new PIXI.WebGLBatch(gl);
	}
	else
	{
		return PIXI._batchs.pop();
	}
}

/**
 * @private
 */
PIXI._returnBatch = function(batch)
{
	batch.clean();	
	PIXI._batchs.push(batch);
}

/**
 * @private
 */
PIXI._restoreBatchs = function(gl)
{
	for (var i=0; i < PIXI._batchs.length; i++) 
	{
	  PIXI._batchs[i].restoreLostContext(gl);
	};
}

/**
 * A WebGLBatch Enables a group of sprites to be drawn using the same settings.
 * if a group of sprites all have the same baseTexture and blendMode then they can be grouped into a batch.
 * All the sprites in a batch can then be drawn in one go by the GPU which is hugely efficient. ALL sprites
 * in the webGL renderer are added to a batch even if the batch only contains one sprite. Batching is handled
 * automatically by the webGL renderer. A good tip is: the smaller the number of batchs there are, the faster
 * the webGL renderer will run.
 *
 * @class WebGLBatch
 * @constructor
 * @param gl {WebGLContext} an instance of the webGL context
 */
PIXI.WebGLBatch = function(gl)
{
	this.gl = gl;
	
	this.size = 0;

	this.vertexBuffer =  gl.createBuffer();
	this.indexBuffer =  gl.createBuffer();
	this.uvBuffer =  gl.createBuffer();
	this.colorBuffer =  gl.createBuffer();
	this.blendMode = PIXI.blendModes.NORMAL;
	this.dynamicSize = 1;
}

// constructor
PIXI.WebGLBatch.prototype.constructor = PIXI.WebGLBatch;

/**
 * Cleans the batch so that is can be returned to an object pool and reused
 *
 * @method clean
 */
PIXI.WebGLBatch.prototype.clean = function()
{
	this.verticies = [];
	this.uvs = [];
	this.indices = [];
	this.colors = [];
	this.dynamicSize = 1;
	this.texture = null;
	this.last = null;
	this.size = 0;
	this.head;
	this.tail;
}

/**
 * Recreates the buffers in the event of a context loss
 *
 * @method restoreLostContext
 * @param gl {WebGLContext}
 */
PIXI.WebGLBatch.prototype.restoreLostContext = function(gl)
{
	this.gl = gl;
	this.vertexBuffer =  gl.createBuffer();
	this.indexBuffer =  gl.createBuffer();
	this.uvBuffer =  gl.createBuffer();
	this.colorBuffer =  gl.createBuffer();
}

/**
 * inits the batch's texture and blend mode based if the supplied sprite
 *
 * @method init
 * @param sprite {Sprite} the first sprite to be added to the batch. Only sprites with
 *		the same base texture and blend mode will be allowed to be added to this batch
 */	
PIXI.WebGLBatch.prototype.init = function(sprite)
{
	sprite.batch = this;
	this.dirty = true;
	this.blendMode = sprite.blendMode;
	this.texture = sprite.texture.baseTexture;
	this.head = sprite;
	this.tail = sprite;
	this.size = 1;

	this.growBatch();
}

/**
 * inserts a sprite before the specified sprite
 *
 * @method insertBefore
 * @param sprite {Sprite} the sprite to be added
 * @param nextSprite {nextSprite} the first sprite will be inserted before this sprite
 */	
PIXI.WebGLBatch.prototype.insertBefore = function(sprite, nextSprite)
{
	this.size++;

	sprite.batch = this;
	this.dirty = true;
	var tempPrev = nextSprite.__prev;
	nextSprite.__prev = sprite;
	sprite.__next = nextSprite;

	if(tempPrev)
	{
		sprite.__prev = tempPrev;
		tempPrev.__next = sprite;
	}
	else
	{
		this.head = sprite;
	}
}

/**
 * inserts a sprite after the specified sprite
 *
 * @method insertAfter
 * @param sprite {Sprite} the sprite to be added
 * @param  previousSprite {Sprite} the first sprite will be inserted after this sprite
 */	
PIXI.WebGLBatch.prototype.insertAfter = function(sprite, previousSprite)
{
	this.size++;

	sprite.batch = this;
	this.dirty = true;

	var tempNext = previousSprite.__next;
	previousSprite.__next = sprite;
	sprite.__prev = previousSprite;

	if(tempNext)
	{
		sprite.__next = tempNext;
		tempNext.__prev = sprite;
	}
	else
	{
		this.tail = sprite
	}
}

/**
 * removes a sprite from the batch
 *
 * @method remove
 * @param sprite {Sprite} the sprite to be removed
 */	
PIXI.WebGLBatch.prototype.remove = function(sprite)
{
	this.size--;

	if(this.size == 0)
	{
		sprite.batch = null;
		sprite.__prev = null;
		sprite.__next = null;
		return;
	}

	if(sprite.__prev)
	{
		sprite.__prev.__next = sprite.__next;
	}
	else
	{
		this.head = sprite.__next;
		this.head.__prev = null;
	}

	if(sprite.__next)
	{
		sprite.__next.__prev = sprite.__prev;
	}
	else
	{
		this.tail = sprite.__prev;
		this.tail.__next = null
	}

	sprite.batch = null;
	sprite.__next = null;
	sprite.__prev = null;
	this.dirty = true;
}

/**
 * Splits the batch into two with the specified sprite being the start of the new batch.
 *
 * @method split
 * @param sprite {Sprite} the sprite that indicates where the batch should be split
 * @return {WebGLBatch} the new batch
 */
PIXI.WebGLBatch.prototype.split = function(sprite)
{
	this.dirty = true;

	var batch = new PIXI.WebGLBatch(this.gl);
	batch.init(sprite);
	batch.texture = this.texture;
	batch.tail = this.tail;

	this.tail = sprite.__prev;
	this.tail.__next = null;

	sprite.__prev = null;
	// return a splite batch!

	// TODO this size is wrong!
	// need to recalculate :/ problem with a linked list!
	// unless it gets calculated in the "clean"?

	// need to loop through items as there is no way to know the length on a linked list :/
	var tempSize = 0;
	while(sprite)
	{
		tempSize++;
		sprite.batch = batch;
		sprite = sprite.__next;
	}

	batch.size = tempSize;
	this.size -= tempSize;

	return batch;
}

/**
 * Merges two batchs together
 *
 * @method merge
 * @param batch {WebGLBatch} the batch that will be merged 
 */
PIXI.WebGLBatch.prototype.merge = function(batch)
{
	this.dirty = true;

	this.tail.__next = batch.head;
	batch.head.__prev = this.tail;

	this.size += batch.size;

	this.tail = batch.tail;

	var sprite = batch.head;
	while(sprite)
	{
		sprite.batch = this;
		sprite = sprite.__next;
	}
}

/**
 * Grows the size of the batch. As the elements in the batch cannot have a dynamic size this
 * function is used to increase the size of the batch. It also creates a little extra room so
 * that the batch does not need to be resized every time a sprite is added
 *
 * @method growBatch
 */
PIXI.WebGLBatch.prototype.growBatch = function()
{
	var gl = this.gl;
	if( this.size == 1)
	{
		this.dynamicSize = 1;
	}
	else
	{
		this.dynamicSize = this.size * 1.5
	}
	// grow verts
	this.verticies = new Float32Array(this.dynamicSize * 8);

	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER,this.verticies , gl.DYNAMIC_DRAW);

	this.uvs  = new Float32Array( this.dynamicSize * 8 );
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, this.uvs , gl.DYNAMIC_DRAW);

	this.dirtyUVS = true;

	this.colors  = new Float32Array( this.dynamicSize * 4 );
	gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, this.colors , gl.DYNAMIC_DRAW);

	this.dirtyColors = true;

	this.indices = new Uint16Array(this.dynamicSize * 6); 
	var length = this.indices.length/6;

	for (var i=0; i < length; i++) 
	{
	    var index2 = i * 6;
	    var index3 = i * 4;
		this.indices[index2 + 0] = index3 + 0;
		this.indices[index2 + 1] = index3 + 1;
		this.indices[index2 + 2] = index3 + 2;
		this.indices[index2 + 3] = index3 + 0;
		this.indices[index2 + 4] = index3 + 2;
		this.indices[index2 + 5] = index3 + 3;
	};

	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);
}

/**
 * Refresh's all the data in the batch and sync's it with the webGL buffers
 *
 * @method refresh
 */
PIXI.WebGLBatch.prototype.refresh = function()
{
	var gl = this.gl;

	if (this.dynamicSize < this.size)
	{
		this.growBatch();
	}

	var indexRun = 0;
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index;
	var a, b, c, d, tx, ty;

	var displayObject = this.head;

	while(displayObject)
	{
		index = indexRun * 8;

		var texture = displayObject.texture;

		var frame = texture.frame;
		var tw = texture.baseTexture.width;
		var th = texture.baseTexture.height;

		this.uvs[index + 0] = frame.x / tw;
		this.uvs[index +1] = frame.y / th;

		this.uvs[index +2] = (frame.x + frame.width) / tw;
		this.uvs[index +3] = frame.y / th;

		this.uvs[index +4] = (frame.x + frame.width) / tw;
		this.uvs[index +5] = (frame.y + frame.height) / th; 

		this.uvs[index +6] = frame.x / tw;
		this.uvs[index +7] = (frame.y + frame.height) / th;

		displayObject.updateFrame = false;

		colorIndex = indexRun * 4;
		this.colors[colorIndex] = this.colors[colorIndex + 1] = this.colors[colorIndex + 2] = this.colors[colorIndex + 3] = displayObject.worldAlpha;

		displayObject = displayObject.__next;

		indexRun ++;
	}

	this.dirtyUVS = true;
	this.dirtyColors = true;
}

/**
 * Updates all the relevant geometry and uploads the data to the GPU
 *
 * @method update
 */
PIXI.WebGLBatch.prototype.update = function()
{
	var gl = this.gl;
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index, index2, index3

	var a, b, c, d, tx, ty;

	var indexRun = 0;

	var displayObject = this.head;
	var verticies = this.verticies;
	var uvs = this.uvs;
	var colors = this.colors;
	
	while(displayObject)
	{
		if(displayObject.vcount === PIXI.visibleCount)
		{
			width = displayObject.texture.frame.width;
			height = displayObject.texture.frame.height;

			// TODO trim??
			aX = displayObject.anchor.x;// - displayObject.texture.trim.x
			aY = displayObject.anchor.y; //- displayObject.texture.trim.y
			w0 = width * (1-aX);
			w1 = width * -aX;

			h0 = height * (1-aY);
			h1 = height * -aY;

			index = indexRun * 8;

			worldTransform = displayObject.worldTransform;

			a = worldTransform[0];
			b = worldTransform[3];
			c = worldTransform[1];
			d = worldTransform[4];
			tx = worldTransform[2];
			ty = worldTransform[5];

			verticies[index + 0 ] = a * w1 + c * h1 + tx; 
			verticies[index + 1 ] = d * h1 + b * w1 + ty;

			verticies[index + 2 ] = a * w0 + c * h1 + tx; 
			verticies[index + 3 ] = d * h1 + b * w0 + ty; 

			verticies[index + 4 ] = a * w0 + c * h0 + tx; 
			verticies[index + 5 ] = d * h0 + b * w0 + ty; 

			verticies[index + 6] =  a * w1 + c * h0 + tx; 
			verticies[index + 7] =  d * h0 + b * w1 + ty; 

			if(displayObject.updateFrame || displayObject.texture.updateFrame)
			{
				this.dirtyUVS = true;

				var texture = displayObject.texture;

				var frame = texture.frame;
				var tw = texture.baseTexture.width;
				var th = texture.baseTexture.height;

				uvs[index + 0] = frame.x / tw;
				uvs[index +1] = frame.y / th;

				uvs[index +2] = (frame.x + frame.width) / tw;
				uvs[index +3] = frame.y / th;

				uvs[index +4] = (frame.x + frame.width) / tw;
				uvs[index +5] = (frame.y + frame.height) / th; 

				uvs[index +6] = frame.x / tw;
				uvs[index +7] = (frame.y + frame.height) / th;

				displayObject.updateFrame = false;
			}

			// TODO this probably could do with some optimisation....
			if(displayObject.cacheAlpha != displayObject.worldAlpha)
			{
				displayObject.cacheAlpha = displayObject.worldAlpha;

				var colorIndex = indexRun * 4;
				colors[colorIndex] = colors[colorIndex + 1] = colors[colorIndex + 2] = colors[colorIndex + 3] = displayObject.worldAlpha;
				this.dirtyColors = true;
			}
		}
		else
		{
			index = indexRun * 8;

			verticies[index + 0 ] = verticies[index + 1 ] = verticies[index + 2 ] = verticies[index + 3 ] = verticies[index + 4 ] = verticies[index + 5 ] = verticies[index + 6] = 	verticies[index + 7] = 0;
		}

		indexRun++;
		displayObject = displayObject.__next;
   }
}

/**
 * Draws the batch to the frame buffer
 *
 * @method render
 */
PIXI.WebGLBatch.prototype.render = function(start, end)
{
	start = start || 0;

	if(end == undefined)end = this.size;
	
	if(this.dirty)
	{
		this.refresh();
		this.dirty = false;
	}

	if (this.size == 0)return;

	this.update();
	var gl = this.gl;

	//TODO optimize this!

	var shaderProgram = PIXI.defaultShader;
	
	//gl.useProgram(shaderProgram);

	// update the verts..
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	// ok..
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.verticies)
    gl.vertexAttribPointer(shaderProgram.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
	// update the uvs
	//var isDefault = (shaderProgram == PIXI.shaderProgram)

   	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);

    if(this.dirtyUVS)
    {
    	this.dirtyUVS = false;
    	gl.bufferSubData(gl.ARRAY_BUFFER,  0, this.uvs);
    }

    gl.vertexAttribPointer(shaderProgram.aTextureCoord, 2, gl.FLOAT, false, 0, 0);

    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, this.texture._glTexture);

	// update color!
	gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);

	if(this.dirtyColors)
    {
    	this.dirtyColors = false;
    	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.colors);
	}

    gl.vertexAttribPointer(shaderProgram.colorAttribute, 1, gl.FLOAT, false, 0, 0);
	// dont need to upload!
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);

	var len = end - start;

    // DRAW THAT this!
    gl.drawElements(gl.TRIANGLES, len * 6, gl.UNSIGNED_SHORT, start * 2 * 6 );
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A WebGLBatch Enables a group of sprites to be drawn using the same settings.
 * if a group of sprites all have the same baseTexture and blendMode then they can be
 * grouped into a batch. All the sprites in a batch can then be drawn in one go by the
 * GPU which is hugely efficient. ALL sprites in the webGL renderer are added to a batch
 * even if the batch only contains one sprite. Batching is handled automatically by the
 * webGL renderer. A good tip is: the smaller the number of batchs there are, the faster
 * the webGL renderer will run.
 *
 * @class WebGLBatch
 * @contructor
 * @param gl {WebGLContext} An instance of the webGL context
 */
PIXI.WebGLRenderGroup = function(gl, transparent)
{
	this.gl = gl;
	this.root;
	
	this.backgroundColor;
	this.transparent = transparent == undefined ? true : transparent;
	
	this.batchs = [];
	this.toRemove = [];
	console.log(this.transparent)
	this.filterManager = new PIXI.WebGLFilterManager(this.transparent);
}

// constructor
PIXI.WebGLRenderGroup.prototype.constructor = PIXI.WebGLRenderGroup;

/**
 * Add a display object to the webgl renderer
 *
 * @method setRenderable
 * @param displayObject {DisplayObject}
 * @private 
 */
PIXI.WebGLRenderGroup.prototype.setRenderable = function(displayObject)
{
	// has this changed??
	if(this.root)this.removeDisplayObjectAndChildren(this.root);
	
	displayObject.worldVisible = displayObject.visible;
	
	// soooooo //
	// to check if any batchs exist already??
	
	// TODO what if its already has an object? should remove it
	this.root = displayObject;
	this.addDisplayObjectAndChildren(displayObject);
}

/**
 * Renders the stage to its webgl view
 *
 * @method render
 * @param projection {Object}
 */
PIXI.WebGLRenderGroup.prototype.render = function(projection, buffer)
{
	PIXI.WebGLRenderer.updateTextures();
	
	var gl = this.gl;
	gl.uniform2f(PIXI.defaultShader.projectionVector, projection.x, projection.y);

	this.filterManager.begin(projection, buffer);

	
	gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
	// will render all the elements in the group
	var renderable;

	for (var i=0; i < this.batchs.length; i++) 
	{
		
		renderable = this.batchs[i];
		if(renderable instanceof PIXI.WebGLBatch)
		{
			this.batchs[i].render();
			continue;
		}
		
		// render special
		this.renderSpecial(renderable, projection);
	}
	
}

/**
 * Renders a specific displayObject
 *
 * @method renderSpecific
 * @param displayObject {DisplayObject}
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderSpecific = function(displayObject, projection, buffer)
{
	PIXI.WebGLRenderer.updateTextures();
	var gl = this.gl;

	gl.uniform2f(PIXI.defaultShader.projectionVector, projection.x, projection.y);

	this.filterManager.begin(projection, buffer);

	// to do!
	// render part of the scene...
	
	var startIndex;
	var startBatchIndex;
	
	var endIndex;
	var endBatchIndex;
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.first;
	while(nextRenderable._iNext)
	{
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
		nextRenderable = nextRenderable._iNext;
	}
	var startBatch = nextRenderable.batch;
	//console.log(nextRenderable);
	
	//console.log(renderable)
	if(nextRenderable instanceof PIXI.Sprite)
	{
		startBatch = nextRenderable.batch;
		
		var head = startBatch.head;
		var next = head;
		
		// ok now we have the batch.. need to find the start index!
		if(head == nextRenderable)
		{
			startIndex = 0;
		}
		else
		{
			startIndex = 1;
			
			while(head.__next != nextRenderable)
			{
				startIndex++;
				head = head.__next;
			}
		}
	}
	else
	{
		startBatch = nextRenderable;
	}
	
	// Get the LAST renderable object
	var lastRenderable = displayObject.last;
	while(lastRenderable._iPrev)
	{
		if(lastRenderable.renderable && lastRenderable.__renderGroup)break;
		lastRenderable = lastRenderable._iNext;
	}
	
	if(lastRenderable instanceof PIXI.Sprite)
	{
		endBatch = lastRenderable.batch;
		
		var head = endBatch.head;
		
		if(head == lastRenderable)
		{
			endIndex = 0;
		}
		else
		{
			endIndex = 1;
			
			while(head.__next != lastRenderable)
			{
				endIndex++;
				head = head.__next;
			}
		}
	}
	else
	{
		endBatch = lastRenderable;
	}
	
	//console.log(endBatch);
	// TODO - need to fold this up a bit!
	
	if(startBatch == endBatch)
	{
		if(startBatch instanceof PIXI.WebGLBatch)
		{
			startBatch.render(startIndex, endIndex+1);
		}
		else
		{
			this.renderSpecial(startBatch, projection);
		}
		return;
	}
	
	// now we have first and last!
	startBatchIndex = this.batchs.indexOf(startBatch);
	endBatchIndex = this.batchs.indexOf(endBatch);
	
	// DO the first batch
	if(startBatch instanceof PIXI.WebGLBatch)
	{
		startBatch.render(startIndex);
	}
	else
	{
		this.renderSpecial(startBatch, projection);
	}
	
	// DO the middle batchs..
	for (var i=startBatchIndex+1; i < endBatchIndex; i++) 
	{
		renderable = this.batchs[i];
	
		if(renderable instanceof PIXI.WebGLBatch)
		{
			this.batchs[i].render();
		}
		else
		{
			this.renderSpecial(renderable, projection);
		}
	}
	
	// DO the last batch..
	if(endBatch instanceof PIXI.WebGLBatch)
	{
		endBatch.render(0, endIndex+1);
	}
	else
	{
		this.renderSpecial(endBatch, projection);
	}
}

/**
 * Renders a specific renderable
 *
 * @method renderSpecial
 * @param renderable {DisplayObject}
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderSpecial = function(renderable, projection)
{
	
	var worldVisible = renderable.vcount === PIXI.visibleCount


	if(renderable instanceof PIXI.TilingSprite)
	{
		if(worldVisible)this.renderTilingSprite(renderable, projection);
	}
	else if(renderable instanceof PIXI.Strip)
	{
		if(worldVisible)this.renderStrip(renderable, projection);
	}
	else if(renderable instanceof PIXI.CustomRenderable)
	{
		if(worldVisible) renderable.renderWebGL(this, projection);
	}
	else if(renderable instanceof PIXI.Graphics)
	{
		if(worldVisible && renderable.renderable) PIXI.WebGLGraphics.renderGraphics(renderable, projection);
	}
	else if(renderable instanceof PIXI.FilterBlock)
	{
		this.handleFilterBlock(renderable, projection);
	}
}

flip = false;
var maskStack = [];
var maskPosition = 0;

//var usedMaskStack = [];

PIXI.WebGLRenderGroup.prototype.handleFilterBlock = function(filterBlock, projection)
{
	/*
	 * for now only masks are supported..
	 */
	var gl = PIXI.gl;
	
	if(filterBlock.open)
	{
		if(filterBlock.data instanceof Array)
		{
			this.filterManager.pushFilter(filterBlock);
			// ok so..
			
		}
		else
		{	
			maskPosition++;

			maskStack.push(filterBlock)
	
			gl.enable(gl.STENCIL_TEST);
			
			gl.colorMask(false, false, false, false);
			
			gl.stencilFunc(gl.ALWAYS,1,1);
			gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR);
	
			PIXI.WebGLGraphics.renderGraphics(filterBlock.data, projection);
			
			gl.colorMask(true, true, true, true);
			gl.stencilFunc(gl.NOTEQUAL,0,maskStack.length);
			gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);
		}
	}
	else
	{
		if(filterBlock.data instanceof Array)
		{
			this.filterManager.popFilter();
		}
		else
		{
			var maskData = maskStack.pop(filterBlock)


			if(maskData)
			{
				gl.colorMask(false, false, false, false);
			
				gl.stencilFunc(gl.ALWAYS,1,1);
				gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR);

				PIXI.WebGLGraphics.renderGraphics(maskData.data, projection);
			
				gl.colorMask(true, true, true, true);
				gl.stencilFunc(gl.NOTEQUAL,0,maskStack.length);
				gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);
			};

			gl.disable(gl.STENCIL_TEST);
		}
	}
}

/**
 * Updates a webgl texture
 *
 * @method updateTexture
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.updateTexture = function(displayObject)
{
	
	// TODO definitely can optimse this function..
	
	this.removeObject(displayObject);
	
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	var previousRenderable = displayObject.first;
	while(previousRenderable != this.root)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.last;
	while(nextRenderable._iNext)
	{
		nextRenderable = nextRenderable._iNext;
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
	}
	
	this.insertObject(displayObject, previousRenderable, nextRenderable);
}

/**
 * Adds filter blocks
 *
 * @method addFilterBlocks
 * @param start {FilterBlock}
 * @param end {FilterBlock}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.addFilterBlocks = function(start, end)
{
	start.__renderGroup = this;
	end.__renderGroup = this;
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	var previousRenderable = start;
	while(previousRenderable != this.root.first)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	this.insertAfter(start, previousRenderable);
		
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var previousRenderable2 = end;
	while(previousRenderable2 != this.root.first)
	{
		previousRenderable2 = previousRenderable2._iPrev;
		if(previousRenderable2.renderable && previousRenderable2.__renderGroup)break;
	}
	this.insertAfter(end, previousRenderable2);
}

/**
 * Remove filter blocks
 *
 * @method removeFilterBlocks
 * @param start {FilterBlock}
 * @param end {FilterBlock}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeFilterBlocks = function(start, end)
{
	this.removeObject(start);
	this.removeObject(end);
}

/**
 * Adds a display object and children to the webgl context
 *
 * @method addDisplayObjectAndChildren
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.addDisplayObjectAndChildren = function(displayObject)
{
	if(displayObject.__renderGroup)displayObject.__renderGroup.removeDisplayObjectAndChildren(displayObject);
	
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	
	var previousRenderable = displayObject.first;
	while(previousRenderable != this.root.first)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.last;
	while(nextRenderable._iNext)
	{
		nextRenderable = nextRenderable._iNext;
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
	}
	
	// one the display object hits this. we can break the loop	
	
	var tempObject = displayObject.first;
	var testObject = displayObject.last._iNext;
	do	
	{
		tempObject.__renderGroup = this;
		
		if(tempObject.renderable)
		{
		
			this.insertObject(tempObject, previousRenderable, nextRenderable);
			previousRenderable = tempObject;
		}
		
		tempObject = tempObject._iNext;
	}
	while(tempObject != testObject)
}

/**
 * Removes a display object and children to the webgl context
 *
 * @method removeDisplayObjectAndChildren
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeDisplayObjectAndChildren = function(displayObject)
{
	if(displayObject.__renderGroup != this)return;
	
//	var displayObject = displayObject.first;
	var lastObject = displayObject.last;
	do	
	{
		displayObject.__renderGroup = null;
		if(displayObject.renderable)this.removeObject(displayObject);
		displayObject = displayObject._iNext;
	}
	while(displayObject)
}

/**
 * Inserts a displayObject into the linked list
 *
 * @method insertObject
 * @param displayObject {DisplayObject}
 * @param previousObject {DisplayObject}
 * @param nextObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.insertObject = function(displayObject, previousObject, nextObject)
{
	// while looping below THE OBJECT MAY NOT HAVE BEEN ADDED
	var previousSprite = previousObject;
	var nextSprite = nextObject;
	
	/*
	 * so now we have the next renderable and the previous renderable
	 * 
	 */
	if(displayObject instanceof PIXI.Sprite)
	{
		var previousBatch
		var nextBatch
		
		if(previousSprite instanceof PIXI.Sprite)
		{
			previousBatch = previousSprite.batch;
			if(previousBatch)
			{
				if(previousBatch.texture == displayObject.texture.baseTexture && previousBatch.blendMode == displayObject.blendMode)
				{
					previousBatch.insertAfter(displayObject, previousSprite);
					return;
				}
			}
		}
		else
		{
			// TODO reword!
			previousBatch = previousSprite;
		}
	
		if(nextSprite)
		{
			if(nextSprite instanceof PIXI.Sprite)
			{
				nextBatch = nextSprite.batch;
			
				//batch may not exist if item was added to the display list but not to the webGL
				if(nextBatch)
				{
					if(nextBatch.texture == displayObject.texture.baseTexture && nextBatch.blendMode == displayObject.blendMode)
					{
						nextBatch.insertBefore(displayObject, nextSprite);
						return;
					}
					else
					{
						if(nextBatch == previousBatch)
						{
							// THERE IS A SPLIT IN THIS BATCH! //
							var splitBatch = previousBatch.split(nextSprite);
							// COOL!
							// add it back into the array	
							/*
							 * OOPS!
							 * seems the new sprite is in the middle of a batch
							 * lets split it.. 
							 */
							var batch = PIXI.WebGLRenderer.getBatch();

							var index = this.batchs.indexOf( previousBatch );
							batch.init(displayObject);
							this.batchs.splice(index+1, 0, batch, splitBatch);
							
							return;
						}
					}
				}
			}
			else
			{
				// TODO re-word!
				
				nextBatch = nextSprite;
			}
		}
		
		/*
		 * looks like it does not belong to any batch!
		 * but is also not intersecting one..
		 * time to create anew one!
		 */
		
		var batch =  PIXI.WebGLRenderer.getBatch();
		batch.init(displayObject);

		if(previousBatch) // if this is invalid it means 
		{
			var index = this.batchs.indexOf( previousBatch );
			this.batchs.splice(index+1, 0, batch);
		}
		else
		{
			this.batchs.push(batch);
		}
		
		return;
	}
	else if(displayObject instanceof PIXI.TilingSprite)
	{
		
		// add to a batch!!
		this.initTilingSprite(displayObject);
	//	this.batchs.push(displayObject);
		
	}
	else if(displayObject instanceof PIXI.Strip)
	{
		// add to a batch!!
		this.initStrip(displayObject);
	//	this.batchs.push(displayObject);
	}
	else if(displayObject)// instanceof PIXI.Graphics)
	{
		//displayObject.initWebGL(this);
		
		// add to a batch!!
		//this.initStrip(displayObject);
		//this.batchs.push(displayObject);
	}
	
	this.insertAfter(displayObject, previousSprite);
			
	// insert and SPLIT!

}

/**
 * Inserts a displayObject into the linked list
 *
 * @method insertAfter
 * @param item {DisplayObject}
 * @param displayObject {DisplayObject} The object to insert
 * @private
 */
PIXI.WebGLRenderGroup.prototype.insertAfter = function(item, displayObject)
{
	if(displayObject instanceof PIXI.Sprite)
	{
		var previousBatch = displayObject.batch;
		
		if(previousBatch)
		{
			// so this object is in a batch!
			
			// is it not? need to split the batch
			if(previousBatch.tail == displayObject)
			{
				// is it tail? insert in to batchs	
				var index = this.batchs.indexOf( previousBatch );
				this.batchs.splice(index+1, 0, item);
			}
			else
			{
				// TODO MODIFY ADD / REMOVE CHILD TO ACCOUNT FOR FILTERS (also get prev and next) //
				
				// THERE IS A SPLIT IN THIS BATCH! //
				var splitBatch = previousBatch.split(displayObject.__next);
				
				// COOL!
				// add it back into the array	
				/*
				 * OOPS!
				 * seems the new sprite is in the middle of a batch
				 * lets split it.. 
				 */
				var index = this.batchs.indexOf( previousBatch );
				this.batchs.splice(index+1, 0, item, splitBatch);
			}
		}
		else
		{
			this.batchs.push(item);
		}
	}
	else
	{
		var index = this.batchs.indexOf( displayObject );
		this.batchs.splice(index+1, 0, item);
	}
}

/**
 * Removes a displayObject from the linked list
 *
 * @method removeObject
 * @param displayObject {DisplayObject} The object to remove
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeObject = function(displayObject)
{
	// loop through children..
	// display object //
	
	// add a child from the render group..
	// remove it and all its children!
	//displayObject.cacheVisible = false;//displayObject.visible;

	/*
	 * removing is a lot quicker..
	 * 
	 */
	var batchToRemove;
	
	if(displayObject instanceof PIXI.Sprite)
	{
		// should always have a batch!
		var batch = displayObject.batch;
		if(!batch)return; // this means the display list has been altered befre rendering
		
		batch.remove(displayObject);
		
		if(batch.size==0)
		{
			batchToRemove = batch;
		}
	}
	else
	{
		batchToRemove = displayObject;
	}
	
	/*
	 * Looks like there is somthing that needs removing!
	 */
	if(batchToRemove)	
	{
		var index = this.batchs.indexOf( batchToRemove );
		if(index == -1)return;// this means it was added then removed before rendered
		
		// ok so.. check to see if you adjacent batchs should be joined.
		// TODO may optimise?
		if(index == 0 || index == this.batchs.length-1)
		{
			// wha - eva! just get of the empty batch!
			this.batchs.splice(index, 1);
			if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
		
			return;
		}
		
		if(this.batchs[index-1] instanceof PIXI.WebGLBatch && this.batchs[index+1] instanceof PIXI.WebGLBatch)
		{
			if(this.batchs[index-1].texture == this.batchs[index+1].texture && this.batchs[index-1].blendMode == this.batchs[index+1].blendMode)
			{
				//console.log("MERGE")
				this.batchs[index-1].merge(this.batchs[index+1]);
				
				if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
				PIXI.WebGLRenderer.returnBatch(this.batchs[index+1]);
				this.batchs.splice(index, 2);
				return;
			}
		}
		
		this.batchs.splice(index, 1);
		if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
	}
}


/**
 * Initializes a tiling sprite
 *
 * @method initTilingSprite
 * @param sprite {TilingSprite} The tiling sprite to initialize
 * @private
 */
PIXI.WebGLRenderGroup.prototype.initTilingSprite = function(sprite)
{
	var gl = this.gl;

	// make the texture tilable..
			
	sprite.verticies = new Float32Array([0, 0,
										  sprite.width, 0,
										  sprite.width,  sprite.height,
										 0,  sprite.height]);
					
	sprite.uvs = new Float32Array([0, 0,
									1, 0,
									1, 1,
									0, 1]);
				
	sprite.colors = new Float32Array([1,1,1,1]);
	
	sprite.indices =  new Uint16Array([0, 1, 3,2])//, 2]);
	
	sprite._vertexBuffer = gl.createBuffer();
	sprite._indexBuffer = gl.createBuffer();
	sprite._uvBuffer = gl.createBuffer();
	sprite._colorBuffer = gl.createBuffer();
						
	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, sprite.verticies, gl.STATIC_DRAW);

	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._uvBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,  sprite.uvs, gl.DYNAMIC_DRAW);

    gl.bindBuffer(gl.ARRAY_BUFFER, sprite._colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, sprite.colors, gl.STATIC_DRAW);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sprite._indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, sprite.indices, gl.STATIC_DRAW);
    
//    return ( (x > 0) && ((x & (x - 1)) == 0) );

	if(sprite.texture.baseTexture._glTexture)
	{
    	gl.bindTexture(gl.TEXTURE_2D, sprite.texture.baseTexture._glTexture);
    	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
		sprite.texture.baseTexture._powerOf2 = true;
	}
	else
	{
		sprite.texture.baseTexture._powerOf2 = true;
	}
}

/**
 * Renders a Strip
 *
 * @method renderStrip
 * @param strip {Strip} The strip to render
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderStrip = function(strip, projection)
{
	var gl = this.gl;

	PIXI.activateStripShader();

	var shader = PIXI.stripShader;

	var program = shader.program;
	
	var m = PIXI.mat3.clone(strip.worldTransform);
	
	PIXI.mat3.transpose(m);
	
//	console.log(projection)
	// set the matrix transform for the 
 	gl.uniformMatrix3fv(shader.translationMatrix, false, m);
	gl.uniform2f(shader.projectionVector, projection.x, projection.y);
	gl.uniform2f(shader.offsetVector, -PIXI.offset.x, -PIXI.offset.y);
	
	gl.uniform1f(shader.alpha, strip.worldAlpha);

	/*
	if(strip.blendMode == PIXI.blendModes.NORMAL)
	{
		gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
	}
	else
	{
		gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_COLOR);
	}
	*/
	
	//console.log("!!")
	if(!strip.dirty)
	{	
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
		gl.bufferSubData(gl.ARRAY_BUFFER, 0, strip.verticies)
	    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
		
		// update the uvs
	   	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
	    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
			
	    gl.activeTexture(gl.TEXTURE0);
	    gl.bindTexture(gl.TEXTURE_2D, strip.texture.baseTexture._glTexture);
		
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
	    gl.vertexAttribPointer(shader.colorAttribute, 1, gl.FLOAT, false, 0, 0);
		
		// dont need to upload!
	    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
	}
	else
	{
		strip.dirty = false;
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
		gl.bufferData(gl.ARRAY_BUFFER, strip.verticies, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
		
		// update the uvs
	   	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
	   	gl.bufferData(gl.ARRAY_BUFFER, strip.uvs, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
			
	    gl.activeTexture(gl.TEXTURE0);
	    gl.bindTexture(gl.TEXTURE_2D, strip.texture.baseTexture._glTexture);
	//	console.log(strip.texture.baseTexture._glTexture)
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
		gl.bufferData(gl.ARRAY_BUFFER, strip.colors, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.colorAttribute, 1, gl.FLOAT, false, 0, 0);
		
		// dont need to upload!
	    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
	    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, strip.indices, gl.STATIC_DRAW);
	    
	}
	
	gl.drawElements(gl.TRIANGLE_STRIP, strip.indices.length, gl.UNSIGNED_SHORT, 0);
    
    PIXI.deactivateStripShader();
  	//gl.useProgram(PIXI.currentProgram);
}

/**
 * Renders a TilingSprite
 *
 * @method renderTilingSprite
 * @param sprite {TilingSprite} The tiling sprite to render
 * @param projectionMatrix {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderTilingSprite = function(sprite, projectionMatrix)
{
	var gl = this.gl;


	var shaderProgram = PIXI.shaderProgram;
	
	var tilePosition = sprite.tilePosition;
	var tileScale = sprite.tileScale;
	
	var offsetX =  tilePosition.x/sprite.texture.baseTexture.width;
	var offsetY =  tilePosition.y/sprite.texture.baseTexture.height;
	
	var scaleX =  (sprite.width / sprite.texture.baseTexture.width)  / tileScale.x;
	var scaleY =  (sprite.height / sprite.texture.baseTexture.height) / tileScale.y;

	sprite.uvs[0] = 0 - offsetX;
	sprite.uvs[1] = 0 - offsetY;
	
	sprite.uvs[2] = (1 * scaleX)  -offsetX;
	sprite.uvs[3] = 0 - offsetY;
	
	sprite.uvs[4] = (1 *scaleX) - offsetX;
	sprite.uvs[5] = (1 *scaleY) - offsetY;
	
	sprite.uvs[6] = 0 - offsetX;
	sprite.uvs[7] = (1 *scaleY) - offsetY;
	
	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._uvBuffer);
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, sprite.uvs)
	
	this.renderStrip(sprite, projectionMatrix);
}

/**
 * Initializes a strip to be rendered
 *
 * @method initStrip
 * @param strip {Strip} The strip to initialize
 * @private
 */
PIXI.WebGLRenderGroup.prototype.initStrip = function(strip)
{
	// build the strip!
	var gl = this.gl;
	var shaderProgram = this.shaderProgram;
	
	strip._vertexBuffer = gl.createBuffer();
	strip._indexBuffer = gl.createBuffer();
	strip._uvBuffer = gl.createBuffer();
	strip._colorBuffer = gl.createBuffer();
	
	gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, strip.verticies, gl.DYNAMIC_DRAW);

	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,  strip.uvs, gl.STATIC_DRAW);

    gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, strip.colors, gl.STATIC_DRAW);

	
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, strip.indices, gl.STATIC_DRAW);
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.WebGLFilterManager = function(transparent)
{
	this.transparent = transparent;
	
	this.filterStack = [];
	this.texturePool = [];
	
	this.offsetX = 0;
	this.offsetY = 0;
	
	this.initShaderBuffers();
}

// API

PIXI.WebGLFilterManager.prototype.begin = function(projection, buffer)
{
	this.width = projection.x * 2;
	this.height = -projection.y * 2;
	this.buffer = buffer;
}

PIXI.WebGLFilterManager.prototype.pushFilter = function(filterBlock)
{
	var gl = PIXI.gl;

	// filter program
	// OPTIMISATION - the first filter is free if its a simple color change?
	this.filterStack.push(filterBlock);

	var filter = filterBlock.filterPasses[0];

	

	this.offsetX += filterBlock.target.filterArea.x;
	this.offsetY += filterBlock.target.filterArea.y;
	
	
	
	
	
	var texture = this.texturePool.pop();
	if(!texture)texture = new PIXI.FilterTexture(this.width, this.height);
	
	gl.bindTexture(gl.TEXTURE_2D,  texture.texture);
	
	this.getBounds(filterBlock.target);
		
	// addpadding?
	//displayObject.filterArea.x

	var filterArea = filterBlock.target.filterArea;

	var padidng = filter.padding;
	filterArea.x -= padidng;
	filterArea.y -= padidng;
	filterArea.width += padidng * 2;
	filterArea.height += padidng * 2;

	// cap filter to screen size..
	if(filterArea.x < 0)filterArea.x = 0;	
	if(filterArea.width > this.width)filterArea.width = this.width;
	if(filterArea.y < 0)filterArea.y = 0;	
	if(filterArea.height > this.height)filterArea.height = this.height;


	//gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  filterArea.width, filterArea.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	gl.bindFramebuffer(gl.FRAMEBUFFER, texture.frameBuffer);
   
  // console.log(filterArea)
	// set view port
	gl.viewport(0, 0, filterArea.width, filterArea.height);	
	
	PIXI.projection.x = filterArea.width/2;
	PIXI.projection.y = -filterArea.height/2;
	
	PIXI.offset.x = -filterArea.x; 
	PIXI.offset.y = -filterArea.y;

	//console.log(PIXI.defaultShader.projectionVector)
	// update projection
	gl.uniform2f(PIXI.defaultShader.projectionVector, filterArea.width/2, -filterArea.height/2);
	gl.uniform2f(PIXI.defaultShader.offsetVector, -filterArea.x, -filterArea.y);
	//PIXI.primitiveProgram

	gl.colorMask(true, true, true, true); 
	gl.clearColor(0,0,0, 0);     
	gl.clear(gl.COLOR_BUFFER_BIT);
	
	//filter.texture = texture;
	filterBlock._glFilterTexture = texture;

	//console.log("PUSH")
}


PIXI.WebGLFilterManager.prototype.popFilter = function()
{
	
	var gl = PIXI.gl;
	
	var filterBlock = this.filterStack.pop();



	var filterArea = filterBlock.target.filterArea;

	var texture = filterBlock._glFilterTexture;

	if(filterBlock.filterPasses.length > 1)
	{
		gl.viewport(0, 0, filterArea.width, filterArea.height);

		gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	
		this.vertexArray[0] = 0;
		this.vertexArray[1] = filterArea.height;
		
		this.vertexArray[2] = filterArea.width;
		this.vertexArray[3] = filterArea.height;
		
		this.vertexArray[4] = 0;
		this.vertexArray[5] = 0;
		
		this.vertexArray[6] = filterArea.width;
		this.vertexArray[7] = 0;


		gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexArray);

	
		gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
		// nnow set the uvs..
		this.uvArray[2] = filterArea.width/this.width;
		this.uvArray[5] = filterArea.height/this.height;
		this.uvArray[6] = filterArea.width/this.width;
		this.uvArray[7] = filterArea.height/this.height;
		
		gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.uvArray);

		var inputTexture = texture;
		var outputTexture = this.texturePool.pop();
		if(!outputTexture)outputTexture = new PIXI.FilterTexture(this.width, this.height);
		
		// need to clear this FBO as it may have some left over elements from a prvious filter.
		gl.bindFramebuffer(gl.FRAMEBUFFER, outputTexture.frameBuffer );     
		gl.clear(gl.COLOR_BUFFER_BIT);
	 
		gl.disable(gl.BLEND);
		
		for (var i = 0; i < filterBlock.filterPasses.length-1; i++) 
		{
			var filterPass = filterBlock.filterPasses[i];
	
			gl.bindFramebuffer(gl.FRAMEBUFFER, outputTexture.frameBuffer );
			
			// set texture
		    gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, inputTexture.texture);
			
			// draw texture..
			//filterPass.applyFilterPass(filterArea.width, filterArea.height);
			this.applyFilterPass(filterPass, filterArea, filterArea.width, filterArea.height);

			// swap the textures..
			var temp = inputTexture;
			inputTexture = outputTexture;
			outputTexture = temp;
			
		};

		gl.enable(gl.BLEND);

		texture = inputTexture;
		this.texturePool.push(outputTexture);
	}

	var filter = filterBlock.filterPasses[filterBlock.filterPasses.length-1];
	
	this.offsetX -= filterArea.x;
	this.offsetY -= filterArea.y;

	
	var sizeX = this.width;
	var sizeY = this.height;
	
	var offsetX = 0;
	var offsetY = 0;
	
	var buffer = this.buffer;
	
	// time to render the filters texture to the previous scene
	if(this.filterStack.length === 0)
	{
		gl.colorMask(true, true, true, this.transparent); 
	}
	else
	{
		var currentFilter = this.filterStack[this.filterStack.length-1];
		var filterArea = currentFilter.target.filterArea;
		
		sizeX = filterArea.width;
		sizeY = filterArea.height;
		
		offsetX = filterArea.x;
		offsetY = filterArea.y;
		
		buffer =  currentFilter._glFilterTexture.frameBuffer;
	}
	
	

	// TODO need toremove thease global elements..
	PIXI.projection.x = sizeX/2;
	PIXI.projection.y = -sizeY/2;

	PIXI.offset.x = offsetX;
	PIXI.offset.y = offsetY; 
	

	var filterArea =  filterBlock.target.filterArea;
	var x = filterArea.x-offsetX;
	var y = filterArea.y-offsetY;
	
	// update the buffers..	
	// make sure to flip the y!
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	
	this.vertexArray[0] = x;
	this.vertexArray[1] = y + filterArea.height;
	
	this.vertexArray[2] = x + filterArea.width;
	this.vertexArray[3] = y + filterArea.height;
	
	this.vertexArray[4] = x;
	this.vertexArray[5] = y;
	
	this.vertexArray[6] = x + filterArea.width;
	this.vertexArray[7] = y;

	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexArray);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);

	this.uvArray[2] = filterArea.width/this.width;
	this.uvArray[5] = filterArea.height/this.height;
	this.uvArray[6] = filterArea.width/this.width;
	this.uvArray[7] = filterArea.height/this.height;
	
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.uvArray);

	gl.viewport(0, 0, sizeX, sizeY);	
	// bind the buffer
	gl.bindFramebuffer(gl.FRAMEBUFFER, buffer );
	
	// set texture
    gl.activeTexture(gl.TEXTURE0);
	gl.bindTexture(gl.TEXTURE_2D, texture.texture);
	
	// apply!
	//filter.applyFilterPass(sizeX, sizeY);
	this.applyFilterPass(filter, filterArea, sizeX, sizeY);

	// now restore the regular shader..
    gl.useProgram(PIXI.defaultShader.program);
	gl.uniform2f(PIXI.defaultShader.projectionVector, sizeX/2, -sizeY/2);
	gl.uniform2f(PIXI.defaultShader.offsetVector, -offsetX, -offsetY);

	// return the texture to the pool
	this.texturePool.push(texture);
	filterBlock._glFilterTexture = null;	
}

PIXI.WebGLFilterManager.prototype.applyFilterPass = function(filter, filterArea, width, height)
{
	// use program
	var gl = PIXI.gl;

	if(!filter.shader)
	{
		var shader = new PIXI.PixiShader();
				
		shader.fragmentSrc = filter.fragmentSrc;
		shader.uniforms = filter.uniforms;
		shader.init();
		
		filter.shader = shader;
	}

	var shader = filter.shader;
	
	// set the shader
	gl.useProgram(shader.program);

	gl.uniform2f(shader.projectionVector, width/2, -height/2);
	gl.uniform2f(shader.offsetVector, 0,0)

	if(filter.uniforms.dimensions)
	{
		//console.log(filter.uniforms.dimensions)
		filter.uniforms.dimensions.value[0] = this.width;//width;
		filter.uniforms.dimensions.value[1] = this.height;//height;
		filter.uniforms.dimensions.value[2] = this.vertexArray[0];
		filter.uniforms.dimensions.value[3] = this.vertexArray[5];//filterArea.height;
	//	console.log(this.vertexArray[5])
	}

	shader.syncUniforms();
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
   
   	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
	
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    
	// draw the filter...
    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );
}

PIXI.WebGLFilterManager.prototype.initShaderBuffers = function()
{
	var gl = PIXI.gl;
	
	// create some buffers
	this.vertexBuffer = gl.createBuffer();	
	this.uvBuffer = gl.createBuffer();
	this.indexBuffer = gl.createBuffer();
	
	// bind and upload the vertexs..
	// keep a refferance to the vertexFloatData..
	this.vertexArray = new Float32Array([0.0, 0.0, 
								         1.0, 0.0, 
								         0.0, 1.0, 
								         1.0, 1.0]);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	gl.bufferData(
    gl.ARRAY_BUFFER, 
    this.vertexArray, 
    gl.STATIC_DRAW);
    
    
    // bind and upload the uv buffer
	this.uvArray = new Float32Array([0.0, 0.0, 
								     1.0, 0.0, 
								     0.0, 1.0, 
								     1.0, 1.0]);
								         
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
	gl.bufferData(
    gl.ARRAY_BUFFER, 
    this.uvArray, 
    gl.STATIC_DRAW);
    
	// bind and upload the index
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
	gl.bufferData(
    gl.ELEMENT_ARRAY_BUFFER, 
    new Uint16Array([0, 1, 2, 1, 3, 2]), 
    gl.STATIC_DRAW);
}

PIXI.WebGLFilterManager.prototype.getBounds = function(displayObject)
{
	// time to get the width and height of the object!
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index, doTest;
	var a, b, c, d, tx, ty, x1, x2, x3, x4, y1, y2, y3, y4;

	var tempObject = displayObject.first;
	var testObject = displayObject.last._iNext;
	
	var maxX = -Infinity;
	var maxY = -Infinity;
	
	var minX = Infinity;
	var minY = Infinity;
	
	do	
	{
		// TODO can be optimized! - what if there is no scale / rotation?
		
		if(tempObject.visible)
		{
			if(tempObject instanceof PIXI.Sprite)
			{
				width = tempObject.texture.frame.width;
				height = tempObject.texture.frame.height;

				// TODO trim??
				aX = tempObject.anchor.x;
				aY = tempObject.anchor.y;
				w0 = width * (1-aX);
				w1 = width * -aX;

				h0 = height * (1-aY);
				h1 = height * -aY;

				doTest = true;
			}
			else if(tempObject instanceof PIXI.Graphics)
			{
				tempObject.updateFilterBounds();

				var bounds = tempObject.bounds;

				width = bounds.width;
				height = bounds.height;

				w0 = bounds.x
				w1 = bounds.x + bounds.width;

				h0 = bounds.y
				h1 = bounds.y + bounds.height;

				doTest = true;	
			}
		}
		
		if(doTest)
		{
			worldTransform = tempObject.worldTransform;

			a = worldTransform[0];
			b = worldTransform[3];
			c = worldTransform[1];
			d = worldTransform[4];
			tx = worldTransform[2];
			ty = worldTransform[5];

			x1 = a * w1 + c * h1 + tx; 
			y1 = d * h1 + b * w1 + ty;

			x2 = a * w0 + c * h1 + tx; 
			y2 = d * h1 + b * w0 + ty; 

			x3 = a * w0 + c * h0 + tx; 
			y3 = d * h0 + b * w0 + ty; 

			x4 =  a * w1 + c * h0 + tx; 
			y4 =  d * h0 + b * w1 + ty; 

			minX = x1 < minX ? x1 : minX;
			minX = x2 < minX ? x2 : minX;
			minX = x3 < minX ? x3 : minX;
			minX = x4 < minX ? x4 : minX;
			
			minY = y1 < minY ? y1 : minY;
			minY = y2 < minY ? y2 : minY;
			minY = y3 < minY ? y3 : minY;
			minY = y4 < minY ? y4 : minY;
			
			maxX = x1 > maxX ? x1 : maxX;
			maxX = x2 > maxX ? x2 : maxX;
			maxX = x3 > maxX ? x3 : maxX;
			maxX = x4 > maxX ? x4 : maxX;
			
			maxY = y1 > maxY ? y1 : maxY;
			maxY = y2 > maxY ? y2 : maxY;
			maxY = y3 > maxY ? y3 : maxY;
			maxY = y4 > maxY ? y4 : maxY;
		}

		doTest = false;
		tempObject = tempObject._iNext;

	}
	while(tempObject != testObject)
	
	// maximum bounds is the size of the screen..
	//minX = minX > 0 ? minX : 0;
	//minY = minY > 0 ? minY : 0;

	displayObject.filterArea.x = minX;
	displayObject.filterArea.y = minY;

//	console.log(maxX+ " : " + minX)
	displayObject.filterArea.width = maxX - minX;
	displayObject.filterArea.height = maxY - minY;
}

PIXI.FilterTexture = function(width, height)
{
	var gl = PIXI.gl;
	
    // next time to create a frame buffer and texture
	this.frameBuffer = gl.createFramebuffer();
    this.texture = gl.createTexture();

    gl.bindTexture(gl.TEXTURE_2D,  this.texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
	gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer );
	
	gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer );
	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);
	
	this.resize(width, height);
}

PIXI.FilterTexture.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;

	var gl = PIXI.gl;

	gl.bindTexture(gl.TEXTURE_2D,  this.texture);
	gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * the CanvasRenderer draws the stage and all its content onto a 2d canvas. This renderer should be used for browsers that do not support webGL.
 * Dont forget to add the view to your DOM or you will not see anything :)
 *
 * @class CanvasRenderer
 * @constructor
 * @param width=0 {Number} the width of the canvas view
 * @param height=0 {Number} the height of the canvas view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 */
PIXI.CanvasRenderer = function(width, height, view, transparent)
{
	this.transparent = transparent;

	/**
	 * The width of the canvas view
	 *
	 * @property width
	 * @type Number
	 * @default 800
	 */
	this.width = width || 800;

	/**
	 * The height of the canvas view
	 *
	 * @property height
	 * @type Number
	 * @default 600
	 */
	this.height = height || 600;

	/**
	 * The canvas element that the everything is drawn to
	 *
	 * @property view
	 * @type Canvas
	 */
	this.view = view || document.createElement( 'canvas' );

	/**
	 * The canvas context that the everything is drawn to
	 * @property context
	 * @type Canvas 2d Context
	 */
	this.context = this.view.getContext("2d");

	this.refresh = true;
	// hack to enable some hardware acceleration!
	//this.view.style["transform"] = "translatez(0)";
	
    this.view.width = this.width;
	this.view.height = this.height;  
	this.count = 0;
}

// constructor
PIXI.CanvasRenderer.prototype.constructor = PIXI.CanvasRenderer;

/**
 * Renders the stage to its canvas view
 *
 * @method render
 * @param stage {Stage} the Stage element to be rendered
 */
PIXI.CanvasRenderer.prototype.render = function(stage)
{
	
	//stage.__childrenAdded = [];
	//stage.__childrenRemoved = [];
	
	// update textures if need be
	PIXI.texturesToUpdate = [];
	PIXI.texturesToDestroy = [];
	
	PIXI.visibleCount++;
	stage.updateTransform();
	
	// update the background color
	if(this.view.style.backgroundColor!=stage.backgroundColorString && !this.transparent)this.view.style.backgroundColor = stage.backgroundColorString;

	this.context.setTransform(1,0,0,1,0,0); 
	this.context.clearRect(0, 0, this.width, this.height)
    this.renderDisplayObject(stage);
    //as
   
    // run interaction!
	if(stage.interactive)
	{
		//need to add some events!
		if(!stage._interactiveEventsAdded)
		{
			stage._interactiveEventsAdded = true;
			stage.interactionManager.setTarget(this);
		}
	}
	
	// remove frame updates..
	if(PIXI.Texture.frameUpdates.length > 0)
	{
		PIXI.Texture.frameUpdates = [];
	}
	
	
}

/**
 * resizes the canvas view to the specified width and height
 *
 * @method resize
 * @param width {Number} the new width of the canvas view
 * @param height {Number} the new height of the canvas view
 */
PIXI.CanvasRenderer.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;
	
	this.view.width = width;
	this.view.height = height;
}

/**
 * Renders a display object
 *
 * @method renderDisplayObject
 * @param displayObject {DisplayObject} The displayObject to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderDisplayObject = function(displayObject)
{
	// no loger recurrsive!
	var transform;
	var context = this.context;
	
	context.globalCompositeOperation = 'source-over';
	
	// one the display object hits this. we can break the loop	
	var testObject = displayObject.last._iNext;
	displayObject = displayObject.first;
	
	do	
	{
		transform = displayObject.worldTransform;
		
		if(!displayObject.visible)
		{
			displayObject = displayObject.last._iNext;
			continue;
		}
		
		if(!displayObject.renderable)
		{
			displayObject = displayObject._iNext;
			continue;
		}
		
		if(displayObject instanceof PIXI.Sprite)
		{
				
			var frame = displayObject.texture.frame;
			
			if(frame && frame.width && frame.height)
			{
				context.globalAlpha = displayObject.worldAlpha;
				
				context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5]);
					
				context.drawImage(displayObject.texture.baseTexture.source, 
								   frame.x,
								   frame.y,
								   frame.width,
								   frame.height,
								   (displayObject.anchor.x) * -frame.width, 
								   (displayObject.anchor.y) * -frame.height,
								   frame.width,
								   frame.height);
			}					   
	   	}
	   	else if(displayObject instanceof PIXI.Strip)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			this.renderStrip(displayObject);
		}
		else if(displayObject instanceof PIXI.TilingSprite)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			this.renderTilingSprite(displayObject);
		}
		else if(displayObject instanceof PIXI.CustomRenderable)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5]);
			displayObject.renderCanvas(this);
		}
		else if(displayObject instanceof PIXI.Graphics)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			PIXI.CanvasGraphics.renderGraphics(displayObject, context);
		}
		else if(displayObject instanceof PIXI.FilterBlock)
		{
			if(displayObject.data instanceof PIXI.Graphics)
 			{
				var mask = displayObject.data;

				if(displayObject.open)
				{
					context.save();
					
					var cacheAlpha = mask.alpha;
					var maskTransform = mask.worldTransform;
					
					context.setTransform(maskTransform[0], maskTransform[3], maskTransform[1], maskTransform[4], maskTransform[2], maskTransform[5])
					
					mask.worldAlpha = 0.5;
					
					context.worldAlpha = 0;
					
					PIXI.CanvasGraphics.renderGraphicsMask(mask, context);
					context.clip();
					
					mask.worldAlpha = cacheAlpha;
				}
				else
				{
					context.restore();
				}
			}
			else
			{
				// only masks supported right now!
			}
		}
	//	count++
		displayObject = displayObject._iNext;
		
		
	}
	while(displayObject != testObject)

	
}

/**
 * Renders a flat strip
 *
 * @method renderStripFlat
 * @param strip {Strip} The Strip to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderStripFlat = function(strip)
{
	var context = this.context;
	var verticies = strip.verticies;
	var uvs = strip.uvs;
	
	var length = verticies.length/2;
	this.count++;
	
	context.beginPath();
	for (var i=1; i < length-2; i++) 
	{
		
		// draw some triangles!
		var index = i*2;
		
		 var x0 = verticies[index],   x1 = verticies[index+2], x2 = verticies[index+4];
 		 var y0 = verticies[index+1], y1 = verticies[index+3], y2 = verticies[index+5];
 		 
		context.moveTo(x0, y0);
		context.lineTo(x1, y1);
		context.lineTo(x2, y2);
		
	};	
	
	context.fillStyle = "#FF0000";
	context.fill();
	context.closePath();
}

/**
 * Renders a tiling sprite
 *
 * @method renderTilingSprite
 * @param sprite {TilingSprite} The tilingsprite to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderTilingSprite = function(sprite)
{
	var context = this.context;
	
	context.globalAlpha = sprite.worldAlpha;
	
 	if(!sprite.__tilePattern) sprite.__tilePattern = context.createPattern(sprite.texture.baseTexture.source, "repeat");
 	
	context.beginPath();
	
	var tilePosition = sprite.tilePosition;
	var tileScale = sprite.tileScale;
	
    // offset
    context.scale(tileScale.x,tileScale.y);
    context.translate(tilePosition.x, tilePosition.y);
 	
	context.fillStyle = sprite.__tilePattern;
	context.fillRect(-tilePosition.x,-tilePosition.y,sprite.width / tileScale.x, sprite.height / tileScale.y);
	
	context.scale(1/tileScale.x, 1/tileScale.y);
    context.translate(-tilePosition.x, -tilePosition.y);
    
    context.closePath();
}

/**
 * Renders a strip
 *
 * @method renderStrip
 * @param strip {Strip} The Strip to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderStrip = function(strip)
{
	var context = this.context;

	// draw triangles!!
	var verticies = strip.verticies;
	var uvs = strip.uvs;
	
	var length = verticies.length/2;
	this.count++;
	for (var i=1; i < length-2; i++) 
	{
		
		// draw some triangles!
		var index = i*2;
		
		 var x0 = verticies[index],   x1 = verticies[index+2], x2 = verticies[index+4];
 		 var y0 = verticies[index+1], y1 = verticies[index+3], y2 = verticies[index+5];
 		 
  		 var u0 = uvs[index] * strip.texture.width,   u1 = uvs[index+2] * strip.texture.width, u2 = uvs[index+4]* strip.texture.width;
   		 var v0 = uvs[index+1]* strip.texture.height, v1 = uvs[index+3] * strip.texture.height, v2 = uvs[index+5]* strip.texture.height;


		context.save();
		context.beginPath();
		context.moveTo(x0, y0);
		context.lineTo(x1, y1);
		context.lineTo(x2, y2);
		context.closePath();
		
		context.clip();
		
		
        // Compute matrix transform
        var delta = u0*v1 + v0*u2 + u1*v2 - v1*u2 - v0*u1 - u0*v2;
        var delta_a = x0*v1 + v0*x2 + x1*v2 - v1*x2 - v0*x1 - x0*v2;
        var delta_b = u0*x1 + x0*u2 + u1*x2 - x1*u2 - x0*u1 - u0*x2;
        var delta_c = u0*v1*x2 + v0*x1*u2 + x0*u1*v2 - x0*v1*u2 - v0*u1*x2 - u0*x1*v2;
        var delta_d = y0*v1 + v0*y2 + y1*v2 - v1*y2 - v0*y1 - y0*v2;
        var delta_e = u0*y1 + y0*u2 + u1*y2 - y1*u2 - y0*u1 - u0*y2;
        var delta_f = u0*v1*y2 + v0*y1*u2 + y0*u1*v2 - y0*v1*u2 - v0*u1*y2 - u0*y1*v2;
		
		
		
		    
        context.transform(delta_a/delta, delta_d/delta,
                      delta_b/delta, delta_e/delta,
                      delta_c/delta, delta_f/delta);
                 
		context.drawImage(strip.texture.baseTexture.source, 0, 0);
	  	context.restore();
	};
	
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * A set of functions used by the canvas renderer to draw the primitive graphics data
 *
 * @class CanvasGraphics
 */
PIXI.CanvasGraphics = function()
{

}


/*
 * Renders the graphics object
 *
 * @static
 * @private
 * @method renderGraphics
 * @param graphics {Graphics}
 * @param context {Context2D}
 */
PIXI.CanvasGraphics.renderGraphics = function(graphics, context)
{
	var worldAlpha = graphics.worldAlpha;

	for (var i=0; i < graphics.graphicsData.length; i++)
	{
		var data = graphics.graphicsData[i];
		var points = data.points;

		context.strokeStyle = color = '#' + ('00000' + ( data.lineColor | 0).toString(16)).substr(-6);

		context.lineWidth = data.lineWidth;

		if(data.type == PIXI.Graphics.POLY)
		{
			context.beginPath();

			context.moveTo(points[0], points[1]);

			for (var j=1; j < points.length/2; j++)
			{
				context.lineTo(points[j * 2], points[j * 2 + 1]);
			}

	      	// if the first and last point are the same close the path - much neater :)
	      	if(points[0] == points[points.length-2] && points[1] == points[points.length-1])
	      	{
	      		context.closePath();
	      	}

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}
		else if(data.type == PIXI.Graphics.RECT)
		{

			if(data.fillColor || data.fillColor === 0)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
				context.fillRect(points[0], points[1], points[2], points[3]);

			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
				context.strokeRect(points[0], points[1], points[2], points[3]);
			}

		}
		else if(data.type == PIXI.Graphics.CIRC)
		{
			// TODO - need to be Undefined!
      		context.beginPath();
			context.arc(points[0], points[1], points[2],0,2*Math.PI);
			context.closePath();

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}
		else if(data.type == PIXI.Graphics.ELIP)
		{

			// elipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas

			var elipseData =  data.points;

			var w = elipseData[2] * 2;
			var h = elipseData[3] * 2;

			var x = elipseData[0] - w/2;
			var y = elipseData[1] - h/2;

      		context.beginPath();

			var kappa = .5522848,
			ox = (w / 2) * kappa, // control point offset horizontal
			oy = (h / 2) * kappa, // control point offset vertical
			xe = x + w,           // x-end
			ye = y + h,           // y-end
			xm = x + w / 2,       // x-middle
			ym = y + h / 2;       // y-middle

			context.moveTo(x, ym);
			context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);
			context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
			context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
			context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);

			context.closePath();

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}

	};
}

/*
 * Renders a graphics mask
 *
 * @static
 * @private
 * @method renderGraphicsMask
 * @param graphics {Graphics}
 * @param context {Context2D}
 */
PIXI.CanvasGraphics.renderGraphicsMask = function(graphics, context)
{
	var worldAlpha = graphics.worldAlpha;

	var len = graphics.graphicsData.length;
	if(len === 0)return;

	if(len > 1)
	{
		len = 1;
		console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object")
	}

	for (var i=0; i < 1; i++)
	{
		var data = graphics.graphicsData[i];
		var points = data.points;

		if(data.type == PIXI.Graphics.POLY)
		{
			context.beginPath();
			context.moveTo(points[0], points[1]);

			for (var j=1; j < points.length/2; j++)
			{
				context.lineTo(points[j * 2], points[j * 2 + 1]);
			}

	      	// if the first and last point are the same close the path - much neater :)
	      	if(points[0] == points[points.length-2] && points[1] == points[points.length-1])
	      	{
	      		context.closePath();
	      	}

		}
		else if(data.type == PIXI.Graphics.RECT)
		{
			context.beginPath();
			context.rect(points[0], points[1], points[2], points[3]);
			context.closePath();
		}
		else if(data.type == PIXI.Graphics.CIRC)
		{
			// TODO - need to be Undefined!
      		context.beginPath();
			context.arc(points[0], points[1], points[2],0,2*Math.PI);
			context.closePath();
		}
		else if(data.type == PIXI.Graphics.ELIP)
		{

			// elipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas
			var elipseData =  data.points;

			var w = elipseData[2] * 2;
			var h = elipseData[3] * 2;

			var x = elipseData[0] - w/2;
			var y = elipseData[1] - h/2;

      		context.beginPath();

			var kappa = .5522848,
			ox = (w / 2) * kappa, // control point offset horizontal
			oy = (h / 2) * kappa, // control point offset vertical
			xe = x + w,           // x-end
			ye = y + h,           // y-end
			xm = x + w / 2,       // x-middle
			ym = y + h / 2;       // y-middle

			context.moveTo(x, ym);
			context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);
			context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
			context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
			context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);
			context.closePath();
		}


	};
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * The Graphics class contains a set of methods that you can use to create primitive shapes and lines.
 * It is important to know that with the webGL renderer only simple polys can be filled at this stage
 * Complex polys will not be filled. Heres an example of a complex poly: http://www.goodboydigital.com/wp-content/uploads/2013/06/complexPolygon.png
 *
 * @class Graphics
 * @extends DisplayObjectContainer
 * @constructor
 */
PIXI.Graphics = function()
{
	PIXI.DisplayObjectContainer.call( this );

	this.renderable = true;

    /**
     * The alpha of the fill of this graphics object
     *
     * @property fillAlpha
     * @type Number
     */
	this.fillAlpha = 1;

    /**
     * The width of any lines drawn
     *
     * @property lineWidth
     * @type Number
     */
	this.lineWidth = 0;

    /**
     * The color of any lines drawn
     *
     * @property lineColor
     * @type String
     */
	this.lineColor = "black";

    /**
     * Graphics data
     *
     * @property graphicsData
     * @type Array
     * @private
     */
	this.graphicsData = [];

    /**
     * Current path
     *
     * @property currentPath
     * @type Object
     * @private
     */
	this.currentPath = {points:[]};
}

// constructor
PIXI.Graphics.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Graphics.prototype.constructor = PIXI.Graphics;

/**
 * Specifies a line style used for subsequent calls to Graphics methods such as the lineTo() method or the drawCircle() method.
 *
 * @method lineStyle
 * @param lineWidth {Number} width of the line to draw, will update the object's stored style
 * @param color {Number} color of the line to draw, will update the object's stored style
 * @param alpha {Number} alpha of the line to draw, will update the object's stored style
 */
PIXI.Graphics.prototype.lineStyle = function(lineWidth, color, alpha)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.lineWidth = lineWidth || 0;
	this.lineColor = color || 0;
	this.lineAlpha = (alpha == undefined) ? 1 : alpha;

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling, points:[], type:PIXI.Graphics.POLY};

	this.graphicsData.push(this.currentPath);
}

/**
 * Moves the current drawing position to (x, y).
 *
 * @method moveTo
 * @param x {Number} the X coord to move to
 * @param y {Number} the Y coord to move to
 */
PIXI.Graphics.prototype.moveTo = function(x, y)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling, points:[], type:PIXI.Graphics.POLY};

	this.currentPath.points.push(x, y);

	this.graphicsData.push(this.currentPath);
}

/**
 * Draws a line using the current line style from the current drawing position to (x, y);
 * the current drawing position is then set to (x, y).
 *
 * @method lineTo
 * @param x {Number} the X coord to draw to
 * @param y {Number} the Y coord to draw to
 */
PIXI.Graphics.prototype.lineTo = function(x, y)
{
	this.currentPath.points.push(x, y);
	this.dirty = true;
}

/**
 * Specifies a simple one-color fill that subsequent calls to other Graphics methods
 * (such as lineTo() or drawCircle()) use when drawing.
 *
 * @method beginFill
 * @param color {uint} the color of the fill
 * @param alpha {Number} the alpha
 */
PIXI.Graphics.prototype.beginFill = function(color, alpha)
{
	this.filling = true;
	this.fillColor = color || 0;
	this.fillAlpha = (alpha == undefined) ? 1 : alpha;
}

/**
 * Applies a fill to the lines and shapes that were added since the last call to the beginFill() method.
 *
 * @method endFill
 */
PIXI.Graphics.prototype.endFill = function()
{
	this.filling = false;
	this.fillColor = null;
	this.fillAlpha = 1;
}

/**
 * @method drawRect
 *
 * @param x {Number} The X coord of the top-left of the rectangle
 * @param y {Number} The Y coord of the top-left of the rectangle
 * @param width {Number} The width of the rectangle
 * @param height {Number} The height of the rectangle
 */
PIXI.Graphics.prototype.drawRect = function( x, y, width, height )
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, width, height], type:PIXI.Graphics.RECT};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Draws a circle.
 *
 * @method drawCircle
 * @param x {Number} The X coord of the center of the circle
 * @param y {Number} The Y coord of the center of the circle
 * @param radius {Number} The radius of the circle
 */
PIXI.Graphics.prototype.drawCircle = function( x, y, radius)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, radius, radius], type:PIXI.Graphics.CIRC};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Draws an elipse.
 *
 * @method drawElipse
 * @param x {Number}
 * @param y {Number}
 * @param width {Number}
 * @param height {Number}
 */
PIXI.Graphics.prototype.drawElipse = function( x, y, width, height)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, width, height], type:PIXI.Graphics.ELIP};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Clears the graphics that were drawn to this Graphics object, and resets fill and line style settings.
 *
 * @method clear
 */
PIXI.Graphics.prototype.clear = function()
{
	this.lineWidth = 0;
	this.filling = false;

	this.dirty = true;
	this.clearDirty = true;
	this.graphicsData = [];

	this.bounds = null//new PIXI.Rectangle();
}


PIXI.Graphics.prototype.updateFilterBounds = function()
{
	if(!this.bounds)
	{
		var minX = Infinity;
		var maxX = -Infinity;

		var minY = Infinity;
		var maxY = -Infinity;

		var points, x, y;

		for (var i = 0; i < this.graphicsData.length; i++) {
			

			var data = this.graphicsData[i];
			var type = data.type;
			var lineWidth = data.lineWidth;

			points = data.points;

			if(type === PIXI.Graphics.RECT)
			{
				x = points.x - lineWidth/2;
				y = points.y - lineWidth/2;
				var width = points.width + lineWidth;
				var height = points.height + lineWidth;

				minX = x < minX ? x : minX;
				maxX = x + width > maxX ? x + width : maxX;

				minY = y < minY ? x : minY;
				maxY = y + height > maxY ? y + height : maxY;
			}
			else if(type === PIXI.Graphics.CIRC || type === PIXI.Graphics.ELIP)
			{
				x = points.x;
				y = points.y;
				var radius = points.radius + lineWidth/2;
				
				minX = x - radius < minX ? x - radius : minX;
				maxX = x + radius > maxX ? x + radius : maxX;

				minY = y - radius < minY ? y - radius : minY;
				maxY = y + radius > maxY ? y + radius : maxY;
			}
			else
			{
				// POLY
				for (var j = 0; j < points.length; j+=2) 
				{
					
					x = points[j];
					y = points[j+1];

					minX = x-lineWidth < minX ? x-lineWidth : minX;
					maxX = x+lineWidth > maxX ? x+lineWidth : maxX;

					minY = y-lineWidth < minY ? y-lineWidth : minY;
					maxY = y+lineWidth > maxY ? y+lineWidth : maxY;
				};
			}

		};

		this.bounds = new PIXI.Rectangle(minX, minY, maxX - minX, maxY - minY);

	}

//	console.log(this.bounds);
}

// SOME TYPES:
PIXI.Graphics.POLY = 0;
PIXI.Graphics.RECT = 1;
PIXI.Graphics.CIRC = 2;
PIXI.Graphics.ELIP = 3;

/**
 * @author Mat Groves http://matgroves.com/
 */

PIXI.Strip = function(texture, width, height)
{
	PIXI.DisplayObjectContainer.call( this );
	this.texture = texture;
	this.blendMode = PIXI.blendModes.NORMAL;

	try
	{
		this.uvs = new Float32Array([0, 1,
				1, 1,
				1, 0, 0,1]);

		this.verticies = new Float32Array([0, 0,
						  0,0,
						  0,0, 0,
						  0, 0]);

		this.colors = new Float32Array([1, 1, 1, 1]);

		this.indices = new Uint16Array([0, 1, 2, 3]);
	}
	catch(error)
	{
		this.uvs = [0, 1,
				1, 1,
				1, 0, 0,1];

		this.verticies = [0, 0,
						  0,0,
						  0,0, 0,
						  0, 0];

		this.colors = [1, 1, 1, 1];

		this.indices = [0, 1, 2, 3];
	}


	/*
	this.uvs = new Float32Array()
	this.verticies = new Float32Array()
	this.colors = new Float32Array()
	this.indices = new Uint16Array()
*/
	this.width = width;
	this.height = height;

	// load the texture!
	if(texture.baseTexture.hasLoaded)
	{
		this.width   = this.texture.frame.width;
		this.height  = this.texture.frame.height;
		this.updateFrame = true;
	}
	else
	{
		this.onTextureUpdateBind = this.onTextureUpdate.bind(this);
		this.texture.addEventListener( 'update', this.onTextureUpdateBind );
	}

	this.renderable = true;
}

// constructor
PIXI.Strip.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Strip.prototype.constructor = PIXI.Strip;

PIXI.Strip.prototype.setTexture = function(texture)
{
	//TODO SET THE TEXTURES
	//TODO VISIBILITY

	// stop current texture
	this.texture = texture;
	this.width   = texture.frame.width;
	this.height  = texture.frame.height;
	this.updateFrame = true;
}

PIXI.Strip.prototype.onTextureUpdate = function(event)
{
	this.updateFrame = true;
}
// some helper functions..


/**
 * @author Mat Groves http://matgroves.com/
 */


PIXI.Rope = function(texture, points)
{
	PIXI.Strip.call( this, texture );
	this.points = points;

	try
	{
		this.verticies = new Float32Array( points.length * 4);
		this.uvs = new Float32Array( points.length * 4);
		this.colors = new Float32Array(  points.length * 2);
		this.indices = new Uint16Array( points.length * 2);
	}
	catch(error)
	{
		this.verticies = verticies

		this.uvs = uvs
		this.colors = colors
		this.indices = indices
	}

	this.refresh();
}


// constructor
PIXI.Rope.prototype = Object.create( PIXI.Strip.prototype );
PIXI.Rope.prototype.constructor = PIXI.Rope;

PIXI.Rope.prototype.refresh = function()
{
	var points = this.points;
	if(points.length < 1)return;

	var uvs = this.uvs
	var indices = this.indices;
	var colors = this.colors;

	var lastPoint = points[0];
	var nextPoint;
	var perp = {x:0, y:0};
	var point = points[0];

	this.count-=0.2;


	uvs[0] = 0
	uvs[1] = 1
	uvs[2] = 0
	uvs[3] = 1

	colors[0] = 1;
	colors[1] = 1;

	indices[0] = 0;
	indices[1] = 1;

	var total = points.length;

	for (var i =  1; i < total; i++)
	{

		var point = points[i];
		var index = i * 4;
		// time to do some smart drawing!
		var amount = i/(total-1)

		if(i%2)
		{
			uvs[index] = amount;
			uvs[index+1] = 0;

			uvs[index+2] = amount
			uvs[index+3] = 1

		}
		else
		{
			uvs[index] = amount
			uvs[index+1] = 0

			uvs[index+2] = amount
			uvs[index+3] = 1
		}

		index = i * 2;
		colors[index] = 1;
		colors[index+1] = 1;

		index = i * 2;
		indices[index] = index;
		indices[index + 1] = index + 1;

		lastPoint = point;
	}
}

PIXI.Rope.prototype.updateTransform = function()
{

	var points = this.points;
	if(points.length < 1)return;

	var verticies = this.verticies

	var lastPoint = points[0];
	var nextPoint;
	var perp = {x:0, y:0};
	var point = points[0];

	this.count-=0.2;

	verticies[0] = point.x + perp.x
	verticies[1] = point.y + perp.y //+ 200
	verticies[2] = point.x - perp.x
	verticies[3] = point.y - perp.y//+200
	// time to do some smart drawing!

	var total = points.length;

	for (var i =  1; i < total; i++)
	{

		var point = points[i];
		var index = i * 4;

		if(i < points.length-1)
		{
			nextPoint = points[i+1];
		}
		else
		{
			nextPoint = point
		}

		perp.y = -(nextPoint.x - lastPoint.x);
		perp.x = nextPoint.y - lastPoint.y;

		var ratio = (1 - (i / (total-1))) * 10;
				if(ratio > 1)ratio = 1;

		var perpLength = Math.sqrt(perp.x * perp.x + perp.y * perp.y);
		var num = this.texture.height/2//(20 + Math.abs(Math.sin((i + this.count) * 0.3) * 50) )* ratio;
		perp.x /= perpLength;
		perp.y /= perpLength;

		perp.x *= num;
		perp.y *= num;

		verticies[index] = point.x + perp.x
		verticies[index+1] = point.y + perp.y
		verticies[index+2] = point.x - perp.x
		verticies[index+3] = point.y - perp.y

		lastPoint = point;
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call( this );
}

PIXI.Rope.prototype.setTexture = function(texture)
{
	// stop current texture
	this.texture = texture;
	this.updateFrame = true;
}





/**
 * @author Mat Groves http://matgroves.com/
 */

/**
 * A tiling sprite is a fast way of rendering a tiling image
 *
 * @class TilingSprite
 * @extends DisplayObjectContainer
 * @constructor
 * @param texture {Texture} the texture of the tiling sprite
 * @param width {Number}  the width of the tiling sprite
 * @param height {Number} the height of the tiling sprite
 */
PIXI.TilingSprite = function(texture, width, height)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * The texture that the sprite is using
	 *
	 * @property texture
	 * @type Texture
	 */
	this.texture = texture;

	/**
	 * The width of the tiling sprite
	 *
	 * @property width
	 * @type Number
	 */
	this.width = width;

	/**
	 * The height of the tiling sprite
	 *
	 * @property height
	 * @type Number
	 */
	this.height = height;

	/**
	 * The scaling of the image that is being tiled
	 *
	 * @property tileScale
	 * @type Point
	 */
	this.tileScale = new PIXI.Point(1,1);

	/**
	 * The offset position of the image that is being tiled
	 *
	 * @property tilePosition
	 * @type Point
	 */
	this.tilePosition = new PIXI.Point(0,0);

	this.renderable = true;

	this.blendMode = PIXI.blendModes.NORMAL
}

// constructor
PIXI.TilingSprite.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.TilingSprite.prototype.constructor = PIXI.TilingSprite;

/**
 * Sets the texture of the tiling sprite
 *
 * @method setTexture
 * @param texture {Texture} The PIXI texture that is displayed by the sprite
 */
PIXI.TilingSprite.prototype.setTexture = function(texture)
{
	//TODO SET THE TEXTURES
	//TODO VISIBILITY

	// stop current texture
	this.texture = texture;
	this.updateFrame = true;
}

/**
 * When the texture is updated, this event will fire to update the frame
 *
 * @method onTextureUpdate
 * @param event
 * @private
 */
PIXI.TilingSprite.prototype.onTextureUpdate = function(event)
{
	this.updateFrame = true;
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) https://github.com/ekelokorpi
 *
 * Awesome JS run time provided by EsotericSoftware
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

/**
 * A class that enables the you to import and run your spine animations in pixi.
 * Spine animation data needs to be loaded using the PIXI.AssetLoader or PIXI.SpineLoader before it can be used by this class
 * See example 12 (http://www.goodboydigital.com/pixijs/examples/12/) to see a working example and check out the source
 *
 * @class Spine
 * @extends DisplayObjectContainer
 * @constructor
 * @param url {String} The url of the spine anim file to be used
 */
PIXI.Spine = function (url) {
	PIXI.DisplayObjectContainer.call(this);

	this.spineData = PIXI.AnimCache[url];

	if (!this.spineData) {
		throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: " + url);
	}

	this.skeleton = new spine.Skeleton(this.spineData);
	this.skeleton.updateWorldTransform();

	this.stateData = new spine.AnimationStateData(this.spineData);
	this.state = new spine.AnimationState(this.stateData);

	this.slotContainers = [];

	for (var i = 0, n = this.skeleton.drawOrder.length; i < n; i++) {
		var slot = this.skeleton.drawOrder[i];
		var attachment = slot.attachment;
		var slotContainer = new PIXI.DisplayObjectContainer();
		this.slotContainers.push(slotContainer);
		this.addChild(slotContainer);
		if (!(attachment instanceof spine.RegionAttachment)) {
			continue;
		}
		var spriteName = attachment.rendererObject.name;
		var sprite = this.createSprite(slot, attachment.rendererObject);
		slot.currentSprite = sprite;
		slot.currentSpriteName = spriteName;
		slotContainer.addChild(sprite);
	}
};

PIXI.Spine.prototype = Object.create(PIXI.DisplayObjectContainer.prototype);
PIXI.Spine.prototype.constructor = PIXI.Spine;

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.Spine.prototype.updateTransform = function () {
	this.lastTime = this.lastTime || Date.now();
	var timeDelta = (Date.now() - this.lastTime) * 0.001;
	this.lastTime = Date.now();
	this.state.update(timeDelta);
	this.state.apply(this.skeleton);
	this.skeleton.updateWorldTransform();

	var drawOrder = this.skeleton.drawOrder;
	for (var i = 0, n = drawOrder.length; i < n; i++) {
		var slot = drawOrder[i];
		var attachment = slot.attachment;
		var slotContainer = this.slotContainers[i];
		if (!(attachment instanceof spine.RegionAttachment)) {
			slotContainer.visible = false;
			continue;
		}

		if (attachment.rendererObject) {
			if (!slot.currentSpriteName || slot.currentSpriteName != attachment.name) {
				var spriteName = attachment.rendererObject.name;
				if (slot.currentSprite !== undefined) {
					slot.currentSprite.visible = false;
				}
				slot.sprites = slot.sprites || {};
				if (slot.sprites[spriteName] !== undefined) {
					slot.sprites[spriteName].visible = true;
				} else {
					var sprite = this.createSprite(slot, attachment.rendererObject);
					slotContainer.addChild(sprite);
				}
				slot.currentSprite = slot.sprites[spriteName];
				slot.currentSpriteName = spriteName;
			}
		}
		slotContainer.visible = true;

		var bone = slot.bone;

		slotContainer.position.x = bone.worldX + attachment.x * bone.m00 + attachment.y * bone.m01;
		slotContainer.position.y = bone.worldY + attachment.x * bone.m10 + attachment.y * bone.m11;
		slotContainer.scale.x = bone.worldScaleX;
		slotContainer.scale.y = bone.worldScaleY;

		slotContainer.rotation = -(slot.bone.worldRotation * Math.PI / 180);
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
};


PIXI.Spine.prototype.createSprite = function (slot, descriptor) {
	var name = PIXI.TextureCache[descriptor.name] ? descriptor.name : descriptor.name + ".png";
	var sprite = new PIXI.Sprite(PIXI.Texture.fromFrame(name));
	sprite.scale = descriptor.scale;
	sprite.rotation = descriptor.rotation;
	sprite.anchor.x = sprite.anchor.y = 0.5;

	slot.sprites = slot.sprites || {};
	slot.sprites[descriptor.name] = sprite;
	return sprite;
};

/*
 * Awesome JS run time provided by EsotericSoftware
 *
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

var spine = {};

spine.BoneData = function (name, parent) {
	this.name = name;
	this.parent = parent;
};
spine.BoneData.prototype = {
	length: 0,
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1
};

spine.SlotData = function (name, boneData) {
	this.name = name;
	this.boneData = boneData;
};
spine.SlotData.prototype = {
	r: 1, g: 1, b: 1, a: 1,
	attachmentName: null
};

spine.Bone = function (boneData, parent) {
	this.data = boneData;
	this.parent = parent;
	this.setToSetupPose();
};
spine.Bone.yDown = false;
spine.Bone.prototype = {
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1,
	m00: 0, m01: 0, worldX: 0, // a b x
	m10: 0, m11: 0, worldY: 0, // c d y
	worldRotation: 0,
	worldScaleX: 1, worldScaleY: 1,
	updateWorldTransform: function (flipX, flipY) {
		var parent = this.parent;
		if (parent != null) {
			this.worldX = this.x * parent.m00 + this.y * parent.m01 + parent.worldX;
			this.worldY = this.x * parent.m10 + this.y * parent.m11 + parent.worldY;
			this.worldScaleX = parent.worldScaleX * this.scaleX;
			this.worldScaleY = parent.worldScaleY * this.scaleY;
			this.worldRotation = parent.worldRotation + this.rotation;
		} else {
			this.worldX = this.x;
			this.worldY = this.y;
			this.worldScaleX = this.scaleX;
			this.worldScaleY = this.scaleY;
			this.worldRotation = this.rotation;
		}
		var radians = this.worldRotation * Math.PI / 180;
		var cos = Math.cos(radians);
		var sin = Math.sin(radians);
		this.m00 = cos * this.worldScaleX;
		this.m10 = sin * this.worldScaleX;
		this.m01 = -sin * this.worldScaleY;
		this.m11 = cos * this.worldScaleY;
		if (flipX) {
			this.m00 = -this.m00;
			this.m01 = -this.m01;
		}
		if (flipY) {
			this.m10 = -this.m10;
			this.m11 = -this.m11;
		}
		if (spine.Bone.yDown) {
			this.m10 = -this.m10;
			this.m11 = -this.m11;
		}
	},
	setToSetupPose: function () {
		var data = this.data;
		this.x = data.x;
		this.y = data.y;
		this.rotation = data.rotation;
		this.scaleX = data.scaleX;
		this.scaleY = data.scaleY;
	}
};

spine.Slot = function (slotData, skeleton, bone) {
	this.data = slotData;
	this.skeleton = skeleton;
	this.bone = bone;
	this.setToSetupPose();
};
spine.Slot.prototype = {
	r: 1, g: 1, b: 1, a: 1,
	_attachmentTime: 0,
	attachment: null,
	setAttachment: function (attachment) {
		this.attachment = attachment;
		this._attachmentTime = this.skeleton.time;
	},
	setAttachmentTime: function (time) {
		this._attachmentTime = this.skeleton.time - time;
	},
	getAttachmentTime: function () {
		return this.skeleton.time - this._attachmentTime;
	},
	setToSetupPose: function () {
		var data = this.data;
		this.r = data.r;
		this.g = data.g;
		this.b = data.b;
		this.a = data.a;

		var slotDatas = this.skeleton.data.slots;
		for (var i = 0, n = slotDatas.length; i < n; i++) {
			if (slotDatas[i] == data) {
				this.setAttachment(!data.attachmentName ? null : this.skeleton.getAttachmentBySlotIndex(i, data.attachmentName));
				break;
			}
		}
	}
};

spine.Skin = function (name) {
	this.name = name;
	this.attachments = {};
};
spine.Skin.prototype = {
	addAttachment: function (slotIndex, name, attachment) {
		this.attachments[slotIndex + ":" + name] = attachment;
	},
	getAttachment: function (slotIndex, name) {
		return this.attachments[slotIndex + ":" + name];
	},
	_attachAll: function (skeleton, oldSkin) {
		for (var key in oldSkin.attachments) {
			var colon = key.indexOf(":");
			var slotIndex = parseInt(key.substring(0, colon));
			var name = key.substring(colon + 1);
			var slot = skeleton.slots[slotIndex];
			if (slot.attachment && slot.attachment.name == name) {
				var attachment = this.getAttachment(slotIndex, name);
				if (attachment) slot.setAttachment(attachment);
			}
		}
	}
};

spine.Animation = function (name, timelines, duration) {
	this.name = name;
	this.timelines = timelines;
	this.duration = duration;
};
spine.Animation.prototype = {
	apply: function (skeleton, time, loop) {
		if (loop && this.duration != 0) time %= this.duration;
		var timelines = this.timelines;
		for (var i = 0, n = timelines.length; i < n; i++)
			timelines[i].apply(skeleton, time, 1);
	},
	mix: function (skeleton, time, loop, alpha) {
		if (loop && this.duration != 0) time %= this.duration;
		var timelines = this.timelines;
		for (var i = 0, n = timelines.length; i < n; i++)
			timelines[i].apply(skeleton, time, alpha);
	}
};

spine.binarySearch = function (values, target, step) {
	var low = 0;
	var high = Math.floor(values.length / step) - 2;
	if (high == 0) return step;
	var current = high >>> 1;
	while (true) {
		if (values[(current + 1) * step] <= target)
			low = current + 1;
		else
			high = current;
		if (low == high) return (low + 1) * step;
		current = (low + high) >>> 1;
	}
};
spine.linearSearch = function (values, target, step) {
	for (var i = 0, last = values.length - step; i <= last; i += step)
		if (values[i] > target) return i;
	return -1;
};

spine.Curves = function (frameCount) {
	this.curves = []; // dfx, dfy, ddfx, ddfy, dddfx, dddfy, ...
	this.curves.length = (frameCount - 1) * 6;
};
spine.Curves.prototype = {
	setLinear: function (frameIndex) {
		this.curves[frameIndex * 6] = 0/*LINEAR*/;
	},
	setStepped: function (frameIndex) {
		this.curves[frameIndex * 6] = -1/*STEPPED*/;
	},
	/** Sets the control handle positions for an interpolation bezier curve used to transition from this keyframe to the next.
	 * cx1 and cx2 are from 0 to 1, representing the percent of time between the two keyframes. cy1 and cy2 are the percent of
	 * the difference between the keyframe's values. */
	setCurve: function (frameIndex, cx1, cy1, cx2, cy2) {
		var subdiv_step = 1 / 10/*BEZIER_SEGMENTS*/;
		var subdiv_step2 = subdiv_step * subdiv_step;
		var subdiv_step3 = subdiv_step2 * subdiv_step;
		var pre1 = 3 * subdiv_step;
		var pre2 = 3 * subdiv_step2;
		var pre4 = 6 * subdiv_step2;
		var pre5 = 6 * subdiv_step3;
		var tmp1x = -cx1 * 2 + cx2;
		var tmp1y = -cy1 * 2 + cy2;
		var tmp2x = (cx1 - cx2) * 3 + 1;
		var tmp2y = (cy1 - cy2) * 3 + 1;
		var i = frameIndex * 6;
		var curves = this.curves;
		curves[i] = cx1 * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;
		curves[i + 1] = cy1 * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;
		curves[i + 2] = tmp1x * pre4 + tmp2x * pre5;
		curves[i + 3] = tmp1y * pre4 + tmp2y * pre5;
		curves[i + 4] = tmp2x * pre5;
		curves[i + 5] = tmp2y * pre5;
	},
	getCurvePercent: function (frameIndex, percent) {
		percent = percent < 0 ? 0 : (percent > 1 ? 1 : percent);
		var curveIndex = frameIndex * 6;
		var curves = this.curves;
		var dfx = curves[curveIndex];
		if (!dfx/*LINEAR*/) return percent;
		if (dfx == -1/*STEPPED*/) return 0;
		var dfy = curves[curveIndex + 1];
		var ddfx = curves[curveIndex + 2];
		var ddfy = curves[curveIndex + 3];
		var dddfx = curves[curveIndex + 4];
		var dddfy = curves[curveIndex + 5];
		var x = dfx, y = dfy;
		var i = 10/*BEZIER_SEGMENTS*/ - 2;
		while (true) {
			if (x >= percent) {
				var lastX = x - dfx;
				var lastY = y - dfy;
				return lastY + (y - lastY) * (percent - lastX) / (x - lastX);
			}
			if (i == 0) break;
			i--;
			dfx += ddfx;
			dfy += ddfy;
			ddfx += dddfx;
			ddfy += dddfy;
			x += dfx;
			y += dfy;
		}
		return y + (1 - y) * (percent - x) / (1 - x); // Last point is 1,1.
	}
};

spine.RotateTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, angle, ...
	this.frames.length = frameCount * 2;
};
spine.RotateTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 2;
	},
	setFrame: function (frameIndex, time, angle) {
		frameIndex *= 2;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = angle;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 2]) { // Time is after last frame.
			var amount = bone.data.rotation + frames[frames.length - 1] - bone.rotation;
			while (amount > 180)
				amount -= 360;
			while (amount < -180)
				amount += 360;
			bone.rotation += amount * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 2);
		var lastFrameValue = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex - 2/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 2 - 1, percent);

		var amount = frames[frameIndex + 1/*FRAME_VALUE*/] - lastFrameValue;
		while (amount > 180)
			amount -= 360;
		while (amount < -180)
			amount += 360;
		amount = bone.data.rotation + (lastFrameValue + amount * percent) - bone.rotation;
		while (amount > 180)
			amount -= 360;
		while (amount < -180)
			amount += 360;
		bone.rotation += amount * alpha;
	}
};

spine.TranslateTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, x, y, ...
	this.frames.length = frameCount * 3;
};
spine.TranslateTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 3;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 3;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = x;
		this.frames[frameIndex + 2] = y;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 3]) { // Time is after last frame.
			bone.x += (bone.data.x + frames[frames.length - 2] - bone.x) * alpha;
			bone.y += (bone.data.y + frames[frames.length - 1] - bone.y) * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 3);
		var lastFrameX = frames[frameIndex - 2];
		var lastFrameY = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex + -3/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 3 - 1, percent);

		bone.x += (bone.data.x + lastFrameX + (frames[frameIndex + 1/*FRAME_X*/] - lastFrameX) * percent - bone.x) * alpha;
		bone.y += (bone.data.y + lastFrameY + (frames[frameIndex + 2/*FRAME_Y*/] - lastFrameY) * percent - bone.y) * alpha;
	}
};

spine.ScaleTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, x, y, ...
	this.frames.length = frameCount * 3;
};
spine.ScaleTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 3;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 3;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = x;
		this.frames[frameIndex + 2] = y;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 3]) { // Time is after last frame.
			bone.scaleX += (bone.data.scaleX - 1 + frames[frames.length - 2] - bone.scaleX) * alpha;
			bone.scaleY += (bone.data.scaleY - 1 + frames[frames.length - 1] - bone.scaleY) * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 3);
		var lastFrameX = frames[frameIndex - 2];
		var lastFrameY = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex + -3/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 3 - 1, percent);

		bone.scaleX += (bone.data.scaleX - 1 + lastFrameX + (frames[frameIndex + 1/*FRAME_X*/] - lastFrameX) * percent - bone.scaleX) * alpha;
		bone.scaleY += (bone.data.scaleY - 1 + lastFrameY + (frames[frameIndex + 2/*FRAME_Y*/] - lastFrameY) * percent - bone.scaleY) * alpha;
	}
};

spine.ColorTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, r, g, b, a, ...
	this.frames.length = frameCount * 5;
};
spine.ColorTimeline.prototype = {
	slotIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 2;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 5;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = r;
		this.frames[frameIndex + 2] = g;
		this.frames[frameIndex + 3] = b;
		this.frames[frameIndex + 4] = a;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var slot = skeleton.slots[this.slotIndex];

		if (time >= frames[frames.length - 5]) { // Time is after last frame.
			var i = frames.length - 1;
			slot.r = frames[i - 3];
			slot.g = frames[i - 2];
			slot.b = frames[i - 1];
			slot.a = frames[i];
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 5);
		var lastFrameR = frames[frameIndex - 4];
		var lastFrameG = frames[frameIndex - 3];
		var lastFrameB = frames[frameIndex - 2];
		var lastFrameA = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex - 5/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 5 - 1, percent);

		var r = lastFrameR + (frames[frameIndex + 1/*FRAME_R*/] - lastFrameR) * percent;
		var g = lastFrameG + (frames[frameIndex + 2/*FRAME_G*/] - lastFrameG) * percent;
		var b = lastFrameB + (frames[frameIndex + 3/*FRAME_B*/] - lastFrameB) * percent;
		var a = lastFrameA + (frames[frameIndex + 4/*FRAME_A*/] - lastFrameA) * percent;
		if (alpha < 1) {
			slot.r += (r - slot.r) * alpha;
			slot.g += (g - slot.g) * alpha;
			slot.b += (b - slot.b) * alpha;
			slot.a += (a - slot.a) * alpha;
		} else {
			slot.r = r;
			slot.g = g;
			slot.b = b;
			slot.a = a;
		}
	}
};

spine.AttachmentTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, ...
	this.frames.length = frameCount;
	this.attachmentNames = []; // time, ...
	this.attachmentNames.length = frameCount;
};
spine.AttachmentTimeline.prototype = {
	slotIndex: 0,
	getFrameCount: function () {
            return this.frames.length;
	},
	setFrame: function (frameIndex, time, attachmentName) {
		this.frames[frameIndex] = time;
		this.attachmentNames[frameIndex] = attachmentName;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var frameIndex;
		if (time >= frames[frames.length - 1]) // Time is after last frame.
			frameIndex = frames.length - 1;
		else
			frameIndex = spine.binarySearch(frames, time, 1) - 1;

		var attachmentName = this.attachmentNames[frameIndex];
		skeleton.slots[this.slotIndex].setAttachment(!attachmentName ? null : skeleton.getAttachmentBySlotIndex(this.slotIndex, attachmentName));
	}
};

spine.SkeletonData = function () {
	this.bones = [];
	this.slots = [];
	this.skins = [];
	this.animations = [];
};
spine.SkeletonData.prototype = {
	defaultSkin: null,
	/** @return May be null. */
	findBone: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].name == boneName) return bones[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findBoneIndex: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].name == boneName) return i;
		return -1;
	},
	/** @return May be null. */
	findSlot: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++) {
			if (slots[i].name == slotName) return slot[i];
		}
		return null;
	},
	/** @return -1 if the bone was not found. */
	findSlotIndex: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].name == slotName) return i;
		return -1;
	},
	/** @return May be null. */
	findSkin: function (skinName) {
		var skins = this.skins;
		for (var i = 0, n = skins.length; i < n; i++)
			if (skins[i].name == skinName) return skins[i];
		return null;
	},
	/** @return May be null. */
	findAnimation: function (animationName) {
		var animations = this.animations;
		for (var i = 0, n = animations.length; i < n; i++)
			if (animations[i].name == animationName) return animations[i];
		return null;
	}
};

spine.Skeleton = function (skeletonData) {
	this.data = skeletonData;

	this.bones = [];
	for (var i = 0, n = skeletonData.bones.length; i < n; i++) {
		var boneData = skeletonData.bones[i];
		var parent = !boneData.parent ? null : this.bones[skeletonData.bones.indexOf(boneData.parent)];
		this.bones.push(new spine.Bone(boneData, parent));
	}

	this.slots = [];
	this.drawOrder = [];
	for (var i = 0, n = skeletonData.slots.length; i < n; i++) {
		var slotData = skeletonData.slots[i];
		var bone = this.bones[skeletonData.bones.indexOf(slotData.boneData)];
		var slot = new spine.Slot(slotData, this, bone);
		this.slots.push(slot);
		this.drawOrder.push(slot);
	}
};
spine.Skeleton.prototype = {
	x: 0, y: 0,
	skin: null,
	r: 1, g: 1, b: 1, a: 1,
	time: 0,
	flipX: false, flipY: false,
	/** Updates the world transform for each bone. */
	updateWorldTransform: function () {
		var flipX = this.flipX;
		var flipY = this.flipY;
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			bones[i].updateWorldTransform(flipX, flipY);
	},
	/** Sets the bones and slots to their setup pose values. */
	setToSetupPose: function () {
		this.setBonesToSetupPose();
		this.setSlotsToSetupPose();
	},
	setBonesToSetupPose: function () {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			bones[i].setToSetupPose();
	},
	setSlotsToSetupPose: function () {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			slots[i].setToSetupPose(i);
	},
	/** @return May return null. */
	getRootBone: function () {
		return this.bones.length == 0 ? null : this.bones[0];
	},
	/** @return May be null. */
	findBone: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].data.name == boneName) return bones[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findBoneIndex: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].data.name == boneName) return i;
		return -1;
	},
	/** @return May be null. */
	findSlot: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].data.name == slotName) return slots[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findSlotIndex: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].data.name == slotName) return i;
		return -1;
	},
	setSkinByName: function (skinName) {
		var skin = this.data.findSkin(skinName);
		if (!skin) throw "Skin not found: " + skinName;
		this.setSkin(skin);
	},
	/** Sets the skin used to look up attachments not found in the {@link SkeletonData#getDefaultSkin() default skin}. Attachments
	 * from the new skin are attached if the corresponding attachment from the old skin was attached.
	 * @param newSkin May be null. */
	setSkin: function (newSkin) {
		if (this.skin && newSkin) newSkin._attachAll(this, this.skin);
		this.skin = newSkin;
	},
	/** @return May be null. */
	getAttachmentBySlotName: function (slotName, attachmentName) {
		return this.getAttachmentBySlotIndex(this.data.findSlotIndex(slotName), attachmentName);
	},
	/** @return May be null. */
	getAttachmentBySlotIndex: function (slotIndex, attachmentName) {
		if (this.skin) {
			var attachment = this.skin.getAttachment(slotIndex, attachmentName);
			if (attachment) return attachment;
		}
		if (this.data.defaultSkin) return this.data.defaultSkin.getAttachment(slotIndex, attachmentName);
		return null;
	},
	/** @param attachmentName May be null. */
	setAttachment: function (slotName, attachmentName) {
		var slots = this.slots;
		for (var i = 0, n = slots.size; i < n; i++) {
			var slot = slots[i];
			if (slot.data.name == slotName) {
				var attachment = null;
				if (attachmentName) {
					attachment = this.getAttachment(i, attachmentName);
					if (attachment == null) throw "Attachment not found: " + attachmentName + ", for slot: " + slotName;
				}
				slot.setAttachment(attachment);
				return;
			}
		}
		throw "Slot not found: " + slotName;
	},
	update: function (delta) {
		time += delta;
	}
};

spine.AttachmentType = {
	region: 0
};

spine.RegionAttachment = function () {
	this.offset = [];
	this.offset.length = 8;
	this.uvs = [];
	this.uvs.length = 8;
};
spine.RegionAttachment.prototype = {
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1,
	width: 0, height: 0,
	rendererObject: null,
	regionOffsetX: 0, regionOffsetY: 0,
	regionWidth: 0, regionHeight: 0,
	regionOriginalWidth: 0, regionOriginalHeight: 0,
	setUVs: function (u, v, u2, v2, rotate) {
		var uvs = this.uvs;
		if (rotate) {
			uvs[2/*X2*/] = u;
			uvs[3/*Y2*/] = v2;
			uvs[4/*X3*/] = u;
			uvs[5/*Y3*/] = v;
			uvs[6/*X4*/] = u2;
			uvs[7/*Y4*/] = v;
			uvs[0/*X1*/] = u2;
			uvs[1/*Y1*/] = v2;
		} else {
			uvs[0/*X1*/] = u;
			uvs[1/*Y1*/] = v2;
			uvs[2/*X2*/] = u;
			uvs[3/*Y2*/] = v;
			uvs[4/*X3*/] = u2;
			uvs[5/*Y3*/] = v;
			uvs[6/*X4*/] = u2;
			uvs[7/*Y4*/] = v2;
		}
	},
	updateOffset: function () {
		var regionScaleX = this.width / this.regionOriginalWidth * this.scaleX;
		var regionScaleY = this.height / this.regionOriginalHeight * this.scaleY;
		var localX = -this.width / 2 * this.scaleX + this.regionOffsetX * regionScaleX;
		var localY = -this.height / 2 * this.scaleY + this.regionOffsetY * regionScaleY;
		var localX2 = localX + this.regionWidth * regionScaleX;
		var localY2 = localY + this.regionHeight * regionScaleY;
		var radians = this.rotation * Math.PI / 180;
		var cos = Math.cos(radians);
		var sin = Math.sin(radians);
		var localXCos = localX * cos + this.x;
		var localXSin = localX * sin;
		var localYCos = localY * cos + this.y;
		var localYSin = localY * sin;
		var localX2Cos = localX2 * cos + this.x;
		var localX2Sin = localX2 * sin;
		var localY2Cos = localY2 * cos + this.y;
		var localY2Sin = localY2 * sin;
		var offset = this.offset;
		offset[0/*X1*/] = localXCos - localYSin;
		offset[1/*Y1*/] = localYCos + localXSin;
		offset[2/*X2*/] = localXCos - localY2Sin;
		offset[3/*Y2*/] = localY2Cos + localXSin;
		offset[4/*X3*/] = localX2Cos - localY2Sin;
		offset[5/*Y3*/] = localY2Cos + localX2Sin;
		offset[6/*X4*/] = localX2Cos - localYSin;
		offset[7/*Y4*/] = localYCos + localX2Sin;
	},
	computeVertices: function (x, y, bone, vertices) {
		x += bone.worldX;
		y += bone.worldY;
		var m00 = bone.m00;
		var m01 = bone.m01;
		var m10 = bone.m10;
		var m11 = bone.m11;
		var offset = this.offset;
		vertices[0/*X1*/] = offset[0/*X1*/] * m00 + offset[1/*Y1*/] * m01 + x;
		vertices[1/*Y1*/] = offset[0/*X1*/] * m10 + offset[1/*Y1*/] * m11 + y;
		vertices[2/*X2*/] = offset[2/*X2*/] * m00 + offset[3/*Y2*/] * m01 + x;
		vertices[3/*Y2*/] = offset[2/*X2*/] * m10 + offset[3/*Y2*/] * m11 + y;
		vertices[4/*X3*/] = offset[4/*X3*/] * m00 + offset[5/*X3*/] * m01 + x;
		vertices[5/*X3*/] = offset[4/*X3*/] * m10 + offset[5/*X3*/] * m11 + y;
		vertices[6/*X4*/] = offset[6/*X4*/] * m00 + offset[7/*Y4*/] * m01 + x;
		vertices[7/*Y4*/] = offset[6/*X4*/] * m10 + offset[7/*Y4*/] * m11 + y;
	}
}

spine.AnimationStateData = function (skeletonData) {
	this.skeletonData = skeletonData;
	this.animationToMixTime = {};
};
spine.AnimationStateData.prototype = {
        defaultMix: 0,
	setMixByName: function (fromName, toName, duration) {
		var from = this.skeletonData.findAnimation(fromName);
		if (!from) throw "Animation not found: " + fromName;
		var to = this.skeletonData.findAnimation(toName);
		if (!to) throw "Animation not found: " + toName;
		this.setMix(from, to, duration);
	},
	setMix: function (from, to, duration) {
		this.animationToMixTime[from.name + ":" + to.name] = duration;
	},
	getMix: function (from, to) {
		var time = this.animationToMixTime[from.name + ":" + to.name];
            return time ? time : this.defaultMix;
	}
};

spine.AnimationState = function (stateData) {
	this.data = stateData;
	this.queue = [];
};
spine.AnimationState.prototype = {
	current: null,
	previous: null,
	currentTime: 0,
	previousTime: 0,
	currentLoop: false,
	previousLoop: false,
	mixTime: 0,
	mixDuration: 0,
	update: function (delta) {
		this.currentTime += delta;
		this.previousTime += delta;
		this.mixTime += delta;

		if (this.queue.length > 0) {
			var entry = this.queue[0];
			if (this.currentTime >= entry.delay) {
				this._setAnimation(entry.animation, entry.loop);
				this.queue.shift();
			}
		}
	},
	apply: function (skeleton) {
		if (!this.current) return;
		if (this.previous) {
			this.previous.apply(skeleton, this.previousTime, this.previousLoop);
			var alpha = this.mixTime / this.mixDuration;
			if (alpha >= 1) {
				alpha = 1;
				this.previous = null;
			}
			this.current.mix(skeleton, this.currentTime, this.currentLoop, alpha);
		} else
			this.current.apply(skeleton, this.currentTime, this.currentLoop);
	},
	clearAnimation: function () {
		this.previous = null;
		this.current = null;
		this.queue.length = 0;
	},
	_setAnimation: function (animation, loop) {
		this.previous = null;
		if (animation && this.current) {
			this.mixDuration = this.data.getMix(this.current, animation);
			if (this.mixDuration > 0) {
				this.mixTime = 0;
				this.previous = this.current;
				this.previousTime = this.currentTime;
				this.previousLoop = this.currentLoop;
			}
		}
		this.current = animation;
		this.currentLoop = loop;
		this.currentTime = 0;
	},
	/** @see #setAnimation(Animation, Boolean) */
	setAnimationByName: function (animationName, loop) {
		var animation = this.data.skeletonData.findAnimation(animationName);
		if (!animation) throw "Animation not found: " + animationName;
		this.setAnimation(animation, loop);
	},
	/** Set the current animation. Any queued animations are cleared and the current animation time is set to 0.
	 * @param animation May be null. */
	setAnimation: function (animation, loop) {
		this.queue.length = 0;
		this._setAnimation(animation, loop);
	},
	/** @see #addAnimation(Animation, Boolean, Number) */
	addAnimationByName: function (animationName, loop, delay) {
		var animation = this.data.skeletonData.findAnimation(animationName);
		if (!animation) throw "Animation not found: " + animationName;
		this.addAnimation(animation, loop, delay);
	},
	/** Adds an animation to be played delay seconds after the current or last queued animation.
	 * @param delay May be <= 0 to use duration of previous animation minus any mix duration plus the negative delay. */
	addAnimation: function (animation, loop, delay) {
		var entry = {};
		entry.animation = animation;
		entry.loop = loop;

		if (!delay || delay <= 0) {
			var previousAnimation = this.queue.length == 0 ? this.current : this.queue[this.queue.length - 1].animation;
			if (previousAnimation != null)
				delay = previousAnimation.duration - this.data.getMix(previousAnimation, animation) + (delay || 0);
			else
				delay = 0;
		}
		entry.delay = delay;

		this.queue.push(entry);
	},
	/** Returns true if no animation is set or if the current time is greater than the animation duration, regardless of looping. */
	isComplete: function () {
		return !this.current || this.currentTime >= this.current.duration;
	}
};

spine.SkeletonJson = function (attachmentLoader) {
	this.attachmentLoader = attachmentLoader;
};
spine.SkeletonJson.prototype = {
	scale: 1,
	readSkeletonData: function (root) {
		var skeletonData = new spine.SkeletonData();

		// Bones.
		var bones = root["bones"];
		for (var i = 0, n = bones.length; i < n; i++) {
			var boneMap = bones[i];
			var parent = null;
			if (boneMap["parent"]) {
				parent = skeletonData.findBone(boneMap["parent"]);
				if (!parent) throw "Parent bone not found: " + boneMap["parent"];
			}
			var boneData = new spine.BoneData(boneMap["name"], parent);
			boneData.length = (boneMap["length"] || 0) * this.scale;
			boneData.x = (boneMap["x"] || 0) * this.scale;
			boneData.y = (boneMap["y"] || 0) * this.scale;
			boneData.rotation = (boneMap["rotation"] || 0);
			boneData.scaleX = boneMap["scaleX"] || 1;
			boneData.scaleY = boneMap["scaleY"] || 1;
			skeletonData.bones.push(boneData);
		}

		// Slots.
		var slots = root["slots"];
		for (var i = 0, n = slots.length; i < n; i++) {
			var slotMap = slots[i];
			var boneData = skeletonData.findBone(slotMap["bone"]);
			if (!boneData) throw "Slot bone not found: " + slotMap["bone"];
			var slotData = new spine.SlotData(slotMap["name"], boneData);

			var color = slotMap["color"];
			if (color) {
				slotData.r = spine.SkeletonJson.toColor(color, 0);
				slotData.g = spine.SkeletonJson.toColor(color, 1);
				slotData.b = spine.SkeletonJson.toColor(color, 2);
				slotData.a = spine.SkeletonJson.toColor(color, 3);
			}

			slotData.attachmentName = slotMap["attachment"];

			skeletonData.slots.push(slotData);
		}

		// Skins.
		var skins = root["skins"];
		for (var skinName in skins) {
			if (!skins.hasOwnProperty(skinName)) continue;
			var skinMap = skins[skinName];
			var skin = new spine.Skin(skinName);
			for (var slotName in skinMap) {
				if (!skinMap.hasOwnProperty(slotName)) continue;
				var slotIndex = skeletonData.findSlotIndex(slotName);
				var slotEntry = skinMap[slotName];
				for (var attachmentName in slotEntry) {
					if (!slotEntry.hasOwnProperty(attachmentName)) continue;
					var attachment = this.readAttachment(skin, attachmentName, slotEntry[attachmentName]);
					if (attachment != null) skin.addAttachment(slotIndex, attachmentName, attachment);
				}
			}
			skeletonData.skins.push(skin);
			if (skin.name == "default") skeletonData.defaultSkin = skin;
		}

		// Animations.
		var animations = root["animations"];
		for (var animationName in animations) {
			if (!animations.hasOwnProperty(animationName)) continue;
			this.readAnimation(animationName, animations[animationName], skeletonData);
		}

		return skeletonData;
	},
	readAttachment: function (skin, name, map) {
		name = map["name"] || name;

		var type = spine.AttachmentType[map["type"] || "region"];

		if (type == spine.AttachmentType.region) {
			var attachment = new spine.RegionAttachment();
			attachment.x = (map["x"] || 0) * this.scale;
			attachment.y = (map["y"] || 0) * this.scale;
			attachment.scaleX = map["scaleX"] || 1;
			attachment.scaleY = map["scaleY"] || 1;
			attachment.rotation = map["rotation"] || 0;
			attachment.width = (map["width"] || 32) * this.scale;
			attachment.height = (map["height"] || 32) * this.scale;
			attachment.updateOffset();

			attachment.rendererObject = {};
			attachment.rendererObject.name = name;
			attachment.rendererObject.scale = {};
			attachment.rendererObject.scale.x = attachment.scaleX;
			attachment.rendererObject.scale.y = attachment.scaleY;
			attachment.rendererObject.rotation = -attachment.rotation * Math.PI / 180;
			return attachment;
		}

            throw "Unknown attachment type: " + type;
	},

	readAnimation: function (name, map, skeletonData) {
		var timelines = [];
		var duration = 0;

		var bones = map["bones"];
		for (var boneName in bones) {
			if (!bones.hasOwnProperty(boneName)) continue;
			var boneIndex = skeletonData.findBoneIndex(boneName);
			if (boneIndex == -1) throw "Bone not found: " + boneName;
			var boneMap = bones[boneName];

			for (var timelineName in boneMap) {
				if (!boneMap.hasOwnProperty(timelineName)) continue;
				var values = boneMap[timelineName];
				if (timelineName == "rotate") {
					var timeline = new spine.RotateTimeline(values.length);
					timeline.boneIndex = boneIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						timeline.setFrame(frameIndex, valueMap["time"], valueMap["angle"]);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 2 - 2]);

				} else if (timelineName == "translate" || timelineName == "scale") {
					var timeline;
					var timelineScale = 1;
					if (timelineName == "scale")
						timeline = new spine.ScaleTimeline(values.length);
					else {
						timeline = new spine.TranslateTimeline(values.length);
						timelineScale = this.scale;
					}
					timeline.boneIndex = boneIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						var x = (valueMap["x"] || 0) * timelineScale;
						var y = (valueMap["y"] || 0) * timelineScale;
						timeline.setFrame(frameIndex, valueMap["time"], x, y);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 3 - 3]);

				} else
					throw "Invalid timeline type for a bone: " + timelineName + " (" + boneName + ")";
			}
		}
		var slots = map["slots"];
		for (var slotName in slots) {
			if (!slots.hasOwnProperty(slotName)) continue;
			var slotMap = slots[slotName];
			var slotIndex = skeletonData.findSlotIndex(slotName);

			for (var timelineName in slotMap) {
				if (!slotMap.hasOwnProperty(timelineName)) continue;
				var values = slotMap[timelineName];
				if (timelineName == "color") {
					var timeline = new spine.ColorTimeline(values.length);
					timeline.slotIndex = slotIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						var color = valueMap["color"];
						var r = spine.SkeletonJson.toColor(color, 0);
						var g = spine.SkeletonJson.toColor(color, 1);
						var b = spine.SkeletonJson.toColor(color, 2);
						var a = spine.SkeletonJson.toColor(color, 3);
						timeline.setFrame(frameIndex, valueMap["time"], r, g, b, a);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 5 - 5]);

				} else if (timelineName == "attachment") {
					var timeline = new spine.AttachmentTimeline(values.length);
					timeline.slotIndex = slotIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						timeline.setFrame(frameIndex++, valueMap["time"], valueMap["name"]);
					}
					timelines.push(timeline);
                        duration = Math.max(duration, timeline.frames[timeline.getFrameCount() - 1]);

				} else
					throw "Invalid timeline type for a slot: " + timelineName + " (" + slotName + ")";
			}
		}
		skeletonData.animations.push(new spine.Animation(name, timelines, duration));
	}
};
spine.SkeletonJson.readCurve = function (timeline, frameIndex, valueMap) {
	var curve = valueMap["curve"];
	if (!curve) return;
	if (curve == "stepped")
		timeline.curves.setStepped(frameIndex);
	else if (curve instanceof Array)
		timeline.curves.setCurve(frameIndex, curve[0], curve[1], curve[2], curve[3]);
};
spine.SkeletonJson.toColor = function (hexString, colorIndex) {
	if (hexString.length != 8) throw "Color hexidecimal length must be 8, recieved: " + hexString;
	return parseInt(hexString.substring(colorIndex * 2, 2), 16) / 255;
};

spine.Atlas = function (atlasText, textureLoader) {
	this.textureLoader = textureLoader;
	this.pages = [];
	this.regions = [];

	var reader = new spine.AtlasReader(atlasText);
	var tuple = [];
	tuple.length = 4;
	var page = null;
	while (true) {
		var line = reader.readLine();
		if (line == null) break;
		line = reader.trim(line);
		if (line.length == 0)
			page = null;
		else if (!page) {
			page = new spine.AtlasPage();
			page.name = line;

			page.format = spine.Atlas.Format[reader.readValue()];

			reader.readTuple(tuple);
			page.minFilter = spine.Atlas.TextureFilter[tuple[0]];
			page.magFilter = spine.Atlas.TextureFilter[tuple[1]];

			var direction = reader.readValue();
			page.uWrap = spine.Atlas.TextureWrap.clampToEdge;
			page.vWrap = spine.Atlas.TextureWrap.clampToEdge;
			if (direction == "x")
				page.uWrap = spine.Atlas.TextureWrap.repeat;
			else if (direction == "y")
				page.vWrap = spine.Atlas.TextureWrap.repeat;
			else if (direction == "xy")
				page.uWrap = page.vWrap = spine.Atlas.TextureWrap.repeat;

			textureLoader.load(page, line);

			this.pages.push(page);

		} else {
			var region = new spine.AtlasRegion();
			region.name = line;
			region.page = page;

			region.rotate = reader.readValue() == "true";

			reader.readTuple(tuple);
			var x = parseInt(tuple[0]);
			var y = parseInt(tuple[1]);

			reader.readTuple(tuple);
			var width = parseInt(tuple[0]);
			var height = parseInt(tuple[1]);

			region.u = x / page.width;
			region.v = y / page.height;
			if (region.rotate) {
				region.u2 = (x + height) / page.width;
				region.v2 = (y + width) / page.height;
			} else {
				region.u2 = (x + width) / page.width;
				region.v2 = (y + height) / page.height;
			}
			region.x = x;
			region.y = y;
			region.width = Math.abs(width);
			region.height = Math.abs(height);

			if (reader.readTuple(tuple) == 4) { // split is optional
				region.splits = [parseInt(tuple[0]), parseInt(tuple[1]), parseInt(tuple[2]), parseInt(tuple[3])];

				if (reader.readTuple(tuple) == 4) { // pad is optional, but only present with splits
					region.pads = [parseInt(tuple[0]), parseInt(tuple[1]), parseInt(tuple[2]), parseInt(tuple[3])];

					reader.readTuple(tuple);
				}
			}

			region.originalWidth = parseInt(tuple[0]);
			region.originalHeight = parseInt(tuple[1]);

			reader.readTuple(tuple);
			region.offsetX = parseInt(tuple[0]);
			region.offsetY = parseInt(tuple[1]);

			region.index = parseInt(reader.readValue());

			this.regions.push(region);
		}
	}
};
spine.Atlas.prototype = {
	findRegion: function (name) {
		var regions = this.regions;
		for (var i = 0, n = regions.length; i < n; i++)
			if (regions[i].name == name) return regions[i];
		return null;
	},
	dispose: function () {
		var pages = this.pages;
		for (var i = 0, n = pages.length; i < n; i++)
			this.textureLoader.unload(pages[i].rendererObject);
	},
	updateUVs: function (page) {
		var regions = this.regions;
		for (var i = 0, n = regions.length; i < n; i++) {
			var region = regions[i];
			if (region.page != page) continue;
			region.u = region.x / page.width;
			region.v = region.y / page.height;
			if (region.rotate) {
				region.u2 = (region.x + region.height) / page.width;
				region.v2 = (region.y + region.width) / page.height;
			} else {
				region.u2 = (region.x + region.width) / page.width;
				region.v2 = (region.y + region.height) / page.height;
			}
		}
	}
};

spine.Atlas.Format = {
	alpha: 0,
	intensity: 1,
	luminanceAlpha: 2,
	rgb565: 3,
	rgba4444: 4,
	rgb888: 5,
	rgba8888: 6
};

spine.Atlas.TextureFilter = {
	nearest: 0,
	linear: 1,
	mipMap: 2,
	mipMapNearestNearest: 3,
	mipMapLinearNearest: 4,
	mipMapNearestLinear: 5,
	mipMapLinearLinear: 6
};

spine.Atlas.TextureWrap = {
	mirroredRepeat: 0,
	clampToEdge: 1,
	repeat: 2
};

spine.AtlasPage = function () {};
spine.AtlasPage.prototype = {
	name: null,
	format: null,
	minFilter: null,
	magFilter: null,
	uWrap: null,
	vWrap: null,
	rendererObject: null,
	width: 0,
	height: 0
};

spine.AtlasRegion = function () {};
spine.AtlasRegion.prototype = {
	page: null,
	name: null,
	x: 0, y: 0,
	width: 0, height: 0,
	u: 0, v: 0, u2: 0, v2: 0,
	offsetX: 0, offsetY: 0,
	originalWidth: 0, originalHeight: 0,
	index: 0,
	rotate: false,
	splits: null,
	pads: null,
};

spine.AtlasReader = function (text) {
	this.lines = text.split(/\r\n|\r|\n/);
};
spine.AtlasReader.prototype = {
	index: 0,
	trim: function (value) {
		return value.replace(/^\s+|\s+$/g, "");
	},
	readLine: function () {
		if (this.index >= this.lines.length) return null;
		return this.lines[this.index++];
	},
	readValue: function () {
		var line = this.readLine();
		var colon = line.indexOf(":");
		if (colon == -1) throw "Invalid line: " + line;
		return this.trim(line.substring(colon + 1));
	},
	/** Returns the number of tuple values read (2 or 4). */
	readTuple: function (tuple) {
		var line = this.readLine();
		var colon = line.indexOf(":");
		if (colon == -1) throw "Invalid line: " + line;
		var i = 0, lastMatch= colon + 1;
		for (; i < 3; i++) {
			var comma = line.indexOf(",", lastMatch);
			if (comma == -1) {
				if (i == 0) throw "Invalid line: " + line;
				break;
			}
			tuple[i] = this.trim(line.substr(lastMatch, comma - lastMatch));
			lastMatch = comma + 1;
		}
		tuple[i] = this.trim(line.substring(lastMatch));
		return i + 1;
	}
}

spine.AtlasAttachmentLoader = function (atlas) {
	this.atlas = atlas;
}
spine.AtlasAttachmentLoader.prototype = {
	newAttachment: function (skin, type, name) {
		switch (type) {
		case spine.AttachmentType.region:
			var region = this.atlas.findRegion(name);
			if (!region) throw "Region not found in atlas: " + name + " (" + type + ")";
			var attachment = new spine.RegionAttachment(name);
			attachment.rendererObject = region;
			attachment.setUVs(region.u, region.v, region.u2, region.v2, region.rotate);
			attachment.regionOffsetX = region.offsetX;
			attachment.regionOffsetY = region.offsetY;
			attachment.regionWidth = region.width;
			attachment.regionHeight = region.height;
			attachment.regionOriginalWidth = region.originalWidth;
			attachment.regionOriginalHeight = region.originalHeight;
			return attachment;
		}
		throw "Unknown attachment type: " + type;
	}
}

PIXI.AnimCache = {};
spine.Bone.yDown = true;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * This object is one that will allow you to specify custom rendering functions based on render type
 *
 * @class CustomRenderable
 * @extends DisplayObject
 * @constructor
 */
PIXI.CustomRenderable = function()
{
	PIXI.DisplayObject.call( this );
	
	this.renderable = true;
}

// constructor
PIXI.CustomRenderable.prototype = Object.create( PIXI.DisplayObject.prototype );
PIXI.CustomRenderable.prototype.constructor = PIXI.CustomRenderable;

/**
 * If this object is being rendered by a CanvasRenderer it will call this callback
 *
 * @method renderCanvas
 * @param renderer {CanvasRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.renderCanvas = function(renderer)
{
	// override!
}

/**
 * If this object is being rendered by a WebGLRenderer it will call this callback to initialize
 *
 * @method initWebGL
 * @param renderer {WebGLRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.initWebGL = function(renderer)
{
	// override!
}

/**
 * If this object is being rendered by a WebGLRenderer it will call this callback
 *
 * @method renderWebGL
 * @param renderer {WebGLRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.renderWebGL = function(renderGroup, projectionMatrix)
{
	// not sure if both needed? but ya have for now!
	// override!
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.BaseTextureCache = {};
PIXI.texturesToUpdate = [];
PIXI.texturesToDestroy = [];

/**
 * A texture stores the information that represents an image. All textures have a base texture
 *
 * @class BaseTexture
 * @uses EventTarget
 * @constructor
 * @param source {String} the source object (image or canvas)
 */
PIXI.BaseTexture = function(source)
{
	PIXI.EventTarget.call( this );

	/**
	 * [read-only] The width of the base texture set when the image has loaded
	 *
	 * @property width
	 * @type Number
	 * @readOnly
	 */
	this.width = 100;

	/**
	 * [read-only] The height of the base texture set when the image has loaded
	 *
	 * @property height
	 * @type Number
	 * @readOnly
	 */
	this.height = 100;

	/**
	 * [read-only] Describes if the base texture has loaded or not
	 *
	 * @property hasLoaded
	 * @type Boolean
	 * @readOnly
	 */
	this.hasLoaded = false;

	/**
	 * The source that is loaded to create the texture
	 *
	 * @property source
	 * @type Image
	 */
	this.source = source;

	if(!source)return;

	if(this.source instanceof Image || this.source instanceof HTMLImageElement)
	{
		if(this.source.complete)
		{
			this.hasLoaded = true;
			this.width = this.source.width;
			this.height = this.source.height;

			PIXI.texturesToUpdate.push(this);
		}
		else
		{

			var scope = this;
			this.source.onload = function(){

				scope.hasLoaded = true;
				scope.width = scope.source.width;
				scope.height = scope.source.height;

				// add it to somewhere...
				PIXI.texturesToUpdate.push(scope);
				scope.dispatchEvent( { type: 'loaded', content: scope } );
			}
			//	this.image.src = imageUrl;
		}
	}
	else
	{
		this.hasLoaded = true;
		this.width = this.source.width;
		this.height = this.source.height;

		PIXI.texturesToUpdate.push(this);
	}

	this._powerOf2 = false;
}

PIXI.BaseTexture.prototype.constructor = PIXI.BaseTexture;

/**
 * Destroys this base texture
 *
 * @method destroy
 */
PIXI.BaseTexture.prototype.destroy = function()
{
	if(this.source instanceof Image)
	{
		this.source.src = null;
	}
	this.source = null;
	PIXI.texturesToDestroy.push(this);
}

/**
 * Helper function that returns a base texture based on an image url
 * If the image is not in the base texture cache it will be  created and loaded
 *
 * @static
 * @method fromImage
 * @param imageUrl {String} The image url of the texture
 * @return BaseTexture
 */
PIXI.BaseTexture.fromImage = function(imageUrl, crossorigin)
{
	var baseTexture = PIXI.BaseTextureCache[imageUrl];
	if(!baseTexture)
	{
		// new Image() breaks tex loading in some versions of Chrome.
		// See https://code.google.com/p/chromium/issues/detail?id=238071
		var image = new Image();//document.createElement('img');
		if (crossorigin)
		{
			image.crossOrigin = '';
		}
		image.src = imageUrl;
		baseTexture = new PIXI.BaseTexture(image);
		PIXI.BaseTextureCache[imageUrl] = baseTexture;
	}

	return baseTexture;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.TextureCache = {};
PIXI.FrameCache = {};

/**
 * A texture stores the information that represents an image or part of an image. It cannot be added
 * to the display list directly. To do this use PIXI.Sprite. If no frame is provided then the whole image is used
 *
 * @class Texture
 * @uses EventTarget
 * @constructor
 * @param baseTexture {BaseTexture} The base texture source to create the texture from
 * @param frame {Rectangle} The rectangle frame of the texture to show
 */
PIXI.Texture = function(baseTexture, frame)
{
	PIXI.EventTarget.call( this );

	if(!frame)
	{
		this.noFrame = true;
		frame = new PIXI.Rectangle(0,0,1,1);
	}

	if(baseTexture instanceof PIXI.Texture)
		baseTexture = baseTexture.baseTexture;

	/**
	 * The base texture of this texture
	 *
	 * @property baseTexture
	 * @type BaseTexture
	 */
	this.baseTexture = baseTexture;

	/**
	 * The frame specifies the region of the base texture that this texture uses
	 *
	 * @property frame
	 * @type Rectangle
	 */
	this.frame = frame;

	/**
	 * The trim point
	 *
	 * @property trim
	 * @type Point
	 */
	this.trim = new PIXI.Point();

	this.scope = this;

	if(baseTexture.hasLoaded)
	{
		if(this.noFrame)frame = new PIXI.Rectangle(0,0, baseTexture.width, baseTexture.height);
		//console.log(frame)

		this.setFrame(frame);
	}
	else
	{
		var scope = this;
		baseTexture.addEventListener( 'loaded', function(){ scope.onBaseTextureLoaded()} );
	}
}

PIXI.Texture.prototype.constructor = PIXI.Texture;

/**
 * Called when the base texture is loaded
 *
 * @method onBaseTextureLoaded
 * @param event
 * @private
 */
PIXI.Texture.prototype.onBaseTextureLoaded = function(event)
{
	var baseTexture = this.baseTexture;
	baseTexture.removeEventListener( 'loaded', this.onLoaded );

	if(this.noFrame)this.frame = new PIXI.Rectangle(0,0, baseTexture.width, baseTexture.height);
	this.noFrame = false;
	this.width = this.frame.width;
	this.height = this.frame.height;

	this.scope.dispatchEvent( { type: 'update', content: this } );
}

/**
 * Destroys this texture
 *
 * @method destroy
 * @param destroyBase {Boolean} Whether to destroy the base texture as well
 */
PIXI.Texture.prototype.destroy = function(destroyBase)
{
	if(destroyBase)this.baseTexture.destroy();
}

/**
 * Specifies the rectangle region of the baseTexture
 *
 * @method setFrame
 * @param frame {Rectangle} The frame of the texture to set it to
 */
PIXI.Texture.prototype.setFrame = function(frame)
{
	this.frame = frame;
	this.width = frame.width;
	this.height = frame.height;

	if(frame.x + frame.width > this.baseTexture.width || frame.y + frame.height > this.baseTexture.height)
	{
		throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
	}

	this.updateFrame = true;

	PIXI.Texture.frameUpdates.push(this);
	//this.dispatchEvent( { type: 'update', content: this } );
}

/**
 * Helper function that returns a texture based on an image url
 * If the image is not in the texture cache it will be  created and loaded
 *
 * @static
 * @method fromImage
 * @param imageUrl {String} The image url of the texture
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 * @return Texture
 */
PIXI.Texture.fromImage = function(imageUrl, crossorigin)
{
	var texture = PIXI.TextureCache[imageUrl];

	if(!texture)
	{
		texture = new PIXI.Texture(PIXI.BaseTexture.fromImage(imageUrl, crossorigin));
		PIXI.TextureCache[imageUrl] = texture;
	}

	return texture;
}

/**
 * Helper function that returns a texture based on a frame id
 * If the frame id is not in the texture cache an error will be thrown
 *
 * @static
 * @method fromFrame
 * @param frameId {String} The frame id of the texture
 * @return Texture
 */
PIXI.Texture.fromFrame = function(frameId)
{
	var texture = PIXI.TextureCache[frameId];
	if(!texture)throw new Error("The frameId '"+ frameId +"' does not exist in the texture cache " + this);
	return texture;
}

/**
 * Helper function that returns a texture based on a canvas element
 * If the canvas is not in the texture cache it will be  created and loaded
 *
 * @static
 * @method fromCanvas
 * @param canvas {Canvas} The canvas element source of the texture
 * @return Texture
 */
PIXI.Texture.fromCanvas = function(canvas)
{
	var	baseTexture = new PIXI.BaseTexture(canvas);
	return new PIXI.Texture(baseTexture);
}


/**
 * Adds a texture to the textureCache.
 *
 * @static
 * @method addTextureToCache
 * @param texture {Texture}
 * @param id {String} the id that the texture will be stored against.
 */
PIXI.Texture.addTextureToCache = function(texture, id)
{
	PIXI.TextureCache[id] = texture;
}

/**
 * Remove a texture from the textureCache.
 *
 * @static
 * @method removeTextureFromCache
 * @param id {String} the id of the texture to be removed
 * @return {Texture} the texture that was removed
 */
PIXI.Texture.removeTextureFromCache = function(id)
{
	var texture = PIXI.TextureCache[id]
	PIXI.TextureCache[id] = null;
	return texture;
}

// this is more for webGL.. it contains updated frames..
PIXI.Texture.frameUpdates = [];


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 A RenderTexture is a special texture that allows any pixi displayObject to be rendered to it.

 __Hint__: All DisplayObjects (exmpl. Sprites) that renders on RenderTexture should be preloaded. 
 Otherwise black rectangles will be drawn instead.  
 
 RenderTexture takes snapshot of DisplayObject passed to render method. If DisplayObject is passed to render method, position and rotation of it will be ignored. For example:
 
	var renderTexture = new PIXI.RenderTexture(800, 600);
	var sprite = PIXI.Sprite.fromImage("spinObj_01.png");
	sprite.position.x = 800/2;
	sprite.position.y = 600/2;
	sprite.anchor.x = 0.5;
	sprite.anchor.y = 0.5;
	renderTexture.render(sprite);

 Sprite in this case will be rendered to 0,0 position. To render this sprite at center DisplayObjectContainer should be used:

	var doc = new PIXI.DisplayObjectContainer();
	doc.addChild(sprite);
	renderTexture.render(doc);  // Renders to center of renderTexture

 @class RenderTexture
 @extends Texture
 @constructor
 @param width {Number} The width of the render texture
 @param height {Number} The height of the render texture
 */
PIXI.RenderTexture = function(width, height)
{
	PIXI.EventTarget.call( this );

	this.width = width || 100;
	this.height = height || 100;

	this.indetityMatrix = PIXI.mat3.create();

	this.frame = new PIXI.Rectangle(0, 0, this.width, this.height);	

	if(PIXI.gl)
	{
		this.initWebGL();
	}
	else
	{
		this.initCanvas();
	}
}

PIXI.RenderTexture.prototype = Object.create( PIXI.Texture.prototype );
PIXI.RenderTexture.prototype.constructor = PIXI.RenderTexture;

/**
 * Initializes the webgl data for this texture
 *
 * @method initWebGL
 * @private
 */
PIXI.RenderTexture.prototype.initWebGL = function()
{
	var gl = PIXI.gl;
	this.glFramebuffer = gl.createFramebuffer();

   	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );

    this.glFramebuffer.width = this.width;
    this.glFramebuffer.height = this.height;	

	this.baseTexture = new PIXI.BaseTexture();

	this.baseTexture.width = this.width;
	this.baseTexture.height = this.height;

    this.baseTexture._glTexture = gl.createTexture();
    gl.bindTexture(gl.TEXTURE_2D, this.baseTexture._glTexture);

	gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  this.width,  this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

	this.baseTexture.isRender = true;

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );
	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.baseTexture._glTexture, 0);

	// create a projection matrix..
	this.projection = new PIXI.Point(this.width/2 , -this.height/2);

	// set the correct render function..
	this.render = this.renderWebGL;
}


PIXI.RenderTexture.prototype.resize = function(width, height)
{

	this.width = width;
	this.height = height;
	
	if(PIXI.gl)
	{
		this.projection.x = this.width/2
		this.projection.y = -this.height/2;
	
		var gl = PIXI.gl;
		gl.bindTexture(gl.TEXTURE_2D, this.baseTexture._glTexture);
		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  this.width,  this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	}
	else
	{
		
		this.frame.width = this.width
		this.frame.height = this.height;
		this.renderer.resize(this.width, this.height);
	}
}

/**
 * Initializes the canvas data for this texture
 *
 * @method initCanvas
 * @private
 */
PIXI.RenderTexture.prototype.initCanvas = function()
{
	this.renderer = new PIXI.CanvasRenderer(this.width, this.height, null, 0);

	this.baseTexture = new PIXI.BaseTexture(this.renderer.view);
	this.frame = new PIXI.Rectangle(0, 0, this.width, this.height);

	this.render = this.renderCanvas;
}

/**
 * This function will draw the display object to the texture.
 *
 * @method renderWebGL
 * @param displayObject {DisplayObject} The display object to render this texture on
 * @param clear {Boolean} If true the texture will be cleared before the displayObject is drawn
 * @private
 */
PIXI.RenderTexture.prototype.renderWebGL = function(displayObject, position, clear)
{
	var gl = PIXI.gl;

	// enable the alpha color mask..
	gl.colorMask(true, true, true, true); 

	gl.viewport(0, 0, this.width, this.height);	

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );

	if(clear)
	{
		gl.clearColor(0,0,0, 0);     
		gl.clear(gl.COLOR_BUFFER_BIT);
	}

	// THIS WILL MESS WITH HIT TESTING!
	var children = displayObject.children;

	//TODO -? create a new one??? dont think so!
	var originalWorldTransform = displayObject.worldTransform;
	displayObject.worldTransform = PIXI.mat3.create();//sthis.indetityMatrix;
	// modify to flip...
	displayObject.worldTransform[4] = -1;
	displayObject.worldTransform[5] = this.projection.y * -2;

	if(position)
	{
		displayObject.worldTransform[2] = position.x;
		displayObject.worldTransform[5] -= position.y;
	}
	
	PIXI.visibleCount++;
	displayObject.vcount = PIXI.visibleCount;
	
	for(var i=0,j=children.length; i<j; i++)
	{
		children[i].updateTransform();	
	}

	var renderGroup = displayObject.__renderGroup;

	if(renderGroup)
	{
		if(displayObject == renderGroup.root)
		{
			renderGroup.render(this.projection, this.glFramebuffer);
		}
		else
		{
			renderGroup.renderSpecific(displayObject, this.projection, this.glFramebuffer);
		}
	}
	else
	{
		if(!this.renderGroup)this.renderGroup = new PIXI.WebGLRenderGroup(gl);
		this.renderGroup.setRenderable(displayObject);
		this.renderGroup.render(this.projection, this.glFramebuffer);
	}
	
	displayObject.worldTransform = originalWorldTransform;
}


/**
 * This function will draw the display object to the texture.
 *
 * @method renderCanvas
 * @param displayObject {DisplayObject} The display object to render this texture on
 * @param clear {Boolean} If true the texture will be cleared before the displayObject is drawn
 * @private
 */
PIXI.RenderTexture.prototype.renderCanvas = function(displayObject, position, clear)
{
	var children = displayObject.children;

	displayObject.worldTransform = PIXI.mat3.create();
	
	if(position)
	{
		displayObject.worldTransform[2] = position.x;
		displayObject.worldTransform[5] = position.y;
	}
	

	for(var i=0,j=children.length; i<j; i++)
	{
		children[i].updateTransform();	
	}

	if(clear)this.renderer.context.clearRect(0,0, this.width, this.height);
	
    this.renderer.renderDisplayObject(displayObject);
    
    this.renderer.context.setTransform(1,0,0,1,0,0); 
    

  //  PIXI.texturesToUpdate.push(this.baseTexture);
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Class that loads a bunch of images / sprite sheet / bitmap font files. Once the
 * assets have been loaded they are added to the PIXI Texture cache and can be accessed
 * easily through PIXI.Texture.fromImage() and PIXI.Sprite.fromImage()
 * When all items have been loaded this class will dispatch a "onLoaded" event
 * As each individual item is loaded this class will dispatch a "onProgress" event
 *
 * @class AssetLoader
 * @constructor
 * @uses EventTarget
 * @param {Array<String>} assetURLs an array of image/sprite sheet urls that you would like loaded
 *      supported. Supported image formats include "jpeg", "jpg", "png", "gif". Supported
 *      sprite sheet data formats only include "JSON" at this time. Supported bitmap font
 *      data formats include "xml" and "fnt".
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.AssetLoader = function(assetURLs, crossorigin)
{
	PIXI.EventTarget.call(this);

	/**
	 * The array of asset URLs that are going to be loaded
     *
	 * @property assetURLs
	 * @type Array<String>
	 */
	this.assetURLs = assetURLs;

    /**
     * Whether the requests should be treated as cross origin
     *
     * @property crossorigin
     * @type Boolean
     */
	this.crossorigin = crossorigin;

    /**
     * Maps file extension to loader types
     *
     * @property loadersByType
     * @type Object
     */
    this.loadersByType = {
        "jpg":  PIXI.ImageLoader,
        "jpeg": PIXI.ImageLoader,
        "png":  PIXI.ImageLoader,
        "gif":  PIXI.ImageLoader,
        "json": PIXI.JsonLoader,
        "anim": PIXI.SpineLoader,
        "xml":  PIXI.BitmapFontLoader,
        "fnt":  PIXI.BitmapFontLoader
    };


};

/**
 * Fired when an item has loaded
 * @event onProgress
 */

/**
 * Fired when all the assets have loaded
 * @event onComplete
 */

// constructor
PIXI.AssetLoader.prototype.constructor = PIXI.AssetLoader;

/**
 * Starts loading the assets sequentially
 *
 * @method load
 */
PIXI.AssetLoader.prototype.load = function()
{
    var scope = this;

	this.loadCount = this.assetURLs.length;

    for (var i=0; i < this.assetURLs.length; i++)
	{
		var fileName = this.assetURLs[i];
		var fileType = fileName.split(".").pop().toLowerCase();

        var loaderClass = this.loadersByType[fileType];
        if(!loaderClass)
            throw new Error(fileType + " is an unsupported file type");

        var loader = new loaderClass(fileName, this.crossorigin);

        loader.addEventListener("loaded", function()
        {
            scope.onAssetLoaded();
        });
        loader.load();
	}
};

/**
 * Invoked after each file is loaded
 *
 * @method onAssetLoaded
 * @private
 */
PIXI.AssetLoader.prototype.onAssetLoaded = function()
{
    this.loadCount--;
	this.dispatchEvent({type: "onProgress", content: this});
	if(this.onProgress) this.onProgress();

	if(this.loadCount == 0)
	{
		this.dispatchEvent({type: "onComplete", content: this});
		if(this.onComplete) this.onComplete();
	}
};


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The json file loader is used to load in JSON data and parsing it
 * When loaded this class will dispatch a "loaded" event
 * If load failed this class will dispatch a "error" event
 *
 * @class JsonLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.JsonLoader = function (url, crossorigin) {
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] The base url of the bitmap font data
	 *
	 * @property baseUrl
	 * @type String
	 * @readOnly
	 */
	this.baseUrl = url.replace(/[^\/]*$/, "");

	/**
	 * [read-only] Whether the data has loaded yet
	 *
	 * @property loaded
	 * @type Boolean
	 * @readOnly
	 */
	this.loaded = false;

};

// constructor
PIXI.JsonLoader.prototype.constructor = PIXI.JsonLoader;

/**
 * Loads the JSON data
 *
 * @method load
 */
PIXI.JsonLoader.prototype.load = function () {
	this.ajaxRequest = new AjaxRequest();
	var scope = this;
	this.ajaxRequest.onreadystatechange = function () {
		scope.onJSONLoaded();
	};

	this.ajaxRequest.open("GET", this.url, true);
	if (this.ajaxRequest.overrideMimeType) this.ajaxRequest.overrideMimeType("application/json");
	this.ajaxRequest.send(null);
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.JsonLoader.prototype.onJSONLoaded = function () {
	if (this.ajaxRequest.readyState == 4) {
		if (this.ajaxRequest.status == 200 || window.location.href.indexOf("http") == -1) {
			this.json = JSON.parse(this.ajaxRequest.responseText);

			if(this.json.frames)
			{
				// sprite sheet
				var scope = this;
				var textureUrl = this.baseUrl + this.json.meta.image;
				var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
				var frameData = this.json.frames;

				this.texture = image.texture.baseTexture;
				image.addEventListener("loaded", function (event) {
					scope.onLoaded();
				});

				for (var i in frameData) {
					var rect = frameData[i].frame;
					if (rect) {
						PIXI.TextureCache[i] = new PIXI.Texture(this.texture, {
							x: rect.x,
							y: rect.y,
							width: rect.w,
							height: rect.h
						});
						if (frameData[i].trimmed) {
							//var realSize = frameData[i].spriteSourceSize;
							PIXI.TextureCache[i].realSize = frameData[i].spriteSourceSize;
							PIXI.TextureCache[i].trim.x = 0; // (realSize.x / rect.w)
							// calculate the offset!
						}
					}
				}

				image.load();

			}
			else if(this.json.bones)
			{
				// spine animation
				var spineJsonParser = new spine.SkeletonJson();
				var skeletonData = spineJsonParser.readSkeletonData(this.json);
				PIXI.AnimCache[this.url] = skeletonData;
				this.onLoaded();
			}
			else
			{
				this.onLoaded();
			}
		}
		else
		{
			this.onError();
		}
	}
};

/**
 * Invoke when json file loaded
 *
 * @method onLoaded
 * @private
 */
PIXI.JsonLoader.prototype.onLoaded = function () {
	this.loaded = true;
	this.dispatchEvent({
		type: "loaded",
		content: this
	});
};

/**
 * Invoke when error occured
 *
 * @method onError
 * @private
 */
PIXI.JsonLoader.prototype.onError = function () {
	this.dispatchEvent({
		type: "error",
		content: this
	});
};
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The sprite sheet loader is used to load in JSON sprite sheet data
 * To generate the data you can use http://www.codeandweb.com/texturepacker and publish the "JSON" format
 * There is a free version so thats nice, although the paid version is great value for money.
 * It is highly recommended to use Sprite sheets (also know as texture atlas") as it means sprite"s can be batched and drawn together for highly increased rendering speed.
 * Once the data has been loaded the frames are stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFromeId()
 * This loader will also load the image file that the Spritesheet points to as well as the data.
 * When loaded this class will dispatch a "loaded" event
 *
 * @class SpriteSheetLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the sprite sheet JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */

PIXI.SpriteSheetLoader = function (url, crossorigin) {
	/*
	 * i use texture packer to load the assets..
	 * http://www.codeandweb.com/texturepacker
	 * make sure to set the format as "JSON"
	 */
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] The base url of the bitmap font data
	 *
	 * @property baseUrl
	 * @type String
	 * @readOnly
	 */
	this.baseUrl = url.replace(/[^\/]*$/, "");

    /**
     * The texture being loaded
     *
     * @property texture
     * @type Texture
     */
    this.texture = null;

    /**
     * The frames of the sprite sheet
     *
     * @property frames
     * @type Object
     */
	this.frames = {};
};

// constructor
PIXI.SpriteSheetLoader.prototype.constructor = PIXI.SpriteSheetLoader;

/**
 * This will begin loading the JSON file
 *
 * @method load
 */
PIXI.SpriteSheetLoader.prototype.load = function () {
	var scope = this;
	var jsonLoader = new PIXI.JsonLoader(this.url, this.crossorigin);
	jsonLoader.addEventListener("loaded", function (event) {
		scope.json = event.content.json;
		scope.onJSONLoaded();
	});
	jsonLoader.load();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.SpriteSheetLoader.prototype.onJSONLoaded = function () {
	var scope = this;
	var textureUrl = this.baseUrl + this.json.meta.image;
	var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
	var frameData = this.json.frames;

	this.texture = image.texture.baseTexture;
	image.addEventListener("loaded", function (event) {
		scope.onLoaded();
	});

	for (var i in frameData) {
		var rect = frameData[i].frame;
		if (rect) {
			PIXI.TextureCache[i] = new PIXI.Texture(this.texture, {
				x: rect.x,
				y: rect.y,
				width: rect.w,
				height: rect.h
			});
			if (frameData[i].trimmed) {
				//var realSize = frameData[i].spriteSourceSize;
				PIXI.TextureCache[i].realSize = frameData[i].spriteSourceSize;
				PIXI.TextureCache[i].trim.x = 0; // (realSize.x / rect.w)
				// calculate the offset!
			}
		}
	}

	image.load();
};
/**
 * Invoke when all files are loaded (json and texture)
 *
 * @method onLoaded
 * @private
 */
PIXI.SpriteSheetLoader.prototype.onLoaded = function () {
	this.dispatchEvent({
		type: "loaded",
		content: this
	});
};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The image loader class is responsible for loading images file formats ("jpeg", "jpg", "png" and "gif")
 * Once the image has been loaded it is stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFromeId()
 * When loaded this class will dispatch a 'loaded' event
 *
 * @class ImageLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the image
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.ImageLoader = function(url, crossorigin)
{
    PIXI.EventTarget.call(this);

    /**
     * The texture being loaded
     *
     * @property texture
     * @type Texture
     */
    this.texture = PIXI.Texture.fromImage(url, crossorigin);

    /**
     * if the image is loaded with loadFramedSpriteSheet
     * frames will contain the sprite sheet frames
     *
     */
    this.frames = [];
};

// constructor
PIXI.ImageLoader.prototype.constructor = PIXI.ImageLoader;

/**
 * Loads image or takes it from cache
 *
 * @method load
 */
PIXI.ImageLoader.prototype.load = function()
{
    if(!this.texture.baseTexture.hasLoaded)
    {
        var scope = this;
        this.texture.baseTexture.addEventListener("loaded", function()
        {
            scope.onLoaded();
        });
    }
    else
    {
        this.onLoaded();
    }
};

/**
 * Invoked when image file is loaded or it is already cached and ready to use
 *
 * @method onLoaded
 * @private
 */
PIXI.ImageLoader.prototype.onLoaded = function()
{
    this.dispatchEvent({type: "loaded", content: this});
};

/**
 * Loads image and split it to uniform sized frames
 *
 *
 * @method loadFramedSpriteSheet
 * @param frameWidth {Number} with of each frame
 * @param frameHeight {Number} height of each frame
 * @param textureName {String} if given, the frames will be cached in <textureName>-<ord> format 
 */
PIXI.ImageLoader.prototype.loadFramedSpriteSheet = function(frameWidth, frameHeight, textureName)
{
    this.frames = [];
    var cols = Math.floor(this.texture.width / frameWidth);
    var rows = Math.floor(this.texture.height / frameHeight);

    var i=0;
    for (var y=0; y<rows; y++)
    {
        for (var x=0; x<cols; x++,i++)
        {
            var texture = new PIXI.Texture(this.texture, {
                x: x*frameWidth,
                y: y*frameHeight,
                width: frameWidth,
                height: frameHeight
            });

            this.frames.push(texture);
            if (textureName) PIXI.TextureCache[textureName+'-'+i] = texture;
        }
    }

    if(!this.texture.baseTexture.hasLoaded)
    {
        var scope = this;
        this.texture.baseTexture.addEventListener("loaded", function() {
            scope.onLoaded();
        });
    }
    else
    {
        this.onLoaded();
    }
};
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The xml loader is used to load in XML bitmap font data ("xml" or "fnt")
 * To generate the data you can use http://www.angelcode.com/products/bmfont/
 * This loader will also load the image file as the data.
 * When loaded this class will dispatch a "loaded" event
 *
 * @class BitmapFontLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the sprite sheet JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.BitmapFontLoader = function(url, crossorigin)
{
    /*
     * i use texture packer to load the assets..
     * http://www.codeandweb.com/texturepacker
     * make sure to set the format as "JSON"
     */
    PIXI.EventTarget.call(this);

    /**
     * The url of the bitmap font data
     *
     * @property url
     * @type String
     */
    this.url = url;

    /**
     * Whether the requests should be treated as cross origin
     *
     * @property crossorigin
     * @type Boolean
     */
    this.crossorigin = crossorigin;

    /**
     * [read-only] The base url of the bitmap font data
     *
     * @property baseUrl
     * @type String
     * @readOnly
     */
    this.baseUrl = url.replace(/[^\/]*$/, "");

    /**
     * [read-only] The texture of the bitmap font
     *
     * @property baseUrl
     * @type String
     */
    this.texture = null;
};

// constructor
PIXI.BitmapFontLoader.prototype.constructor = PIXI.BitmapFontLoader;

/**
 * Loads the XML font data
 *
 * @method load
 */
PIXI.BitmapFontLoader.prototype.load = function()
{
    this.ajaxRequest = new XMLHttpRequest();
    var scope = this;
    this.ajaxRequest.onreadystatechange = function()
    {
        scope.onXMLLoaded();
    };

    this.ajaxRequest.open("GET", this.url, true);
    if (this.ajaxRequest.overrideMimeType) this.ajaxRequest.overrideMimeType("application/xml");
    this.ajaxRequest.send(null)
};

/**
 * Invoked when XML file is loaded, parses the data
 *
 * @method onXMLLoaded
 * @private
 */
PIXI.BitmapFontLoader.prototype.onXMLLoaded = function()
{
    if (this.ajaxRequest.readyState == 4)
    {
        if (this.ajaxRequest.status == 200 || window.location.href.indexOf("http") == -1)
        {
            var textureUrl = this.baseUrl + this.ajaxRequest.responseXML.getElementsByTagName("page")[0].attributes.getNamedItem("file").nodeValue;
            var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
            this.texture = image.texture.baseTexture;

            var data = {};
            var info = this.ajaxRequest.responseXML.getElementsByTagName("info")[0];
            var common = this.ajaxRequest.responseXML.getElementsByTagName("common")[0];
            data.font = info.attributes.getNamedItem("face").nodeValue;
            data.size = parseInt(info.attributes.getNamedItem("size").nodeValue, 10);
            data.lineHeight = parseInt(common.attributes.getNamedItem("lineHeight").nodeValue, 10);
            data.chars = {};

            //parse letters
            var letters = this.ajaxRequest.responseXML.getElementsByTagName("char");

            for (var i = 0; i < letters.length; i++)
            {
                var charCode = parseInt(letters[i].attributes.getNamedItem("id").nodeValue, 10);

                var textureRect = new PIXI.Rectangle(
                    parseInt(letters[i].attributes.getNamedItem("x").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("y").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("width").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("height").nodeValue, 10)
                );

                data.chars[charCode] = {
                    xOffset: parseInt(letters[i].attributes.getNamedItem("xoffset").nodeValue, 10),
                    yOffset: parseInt(letters[i].attributes.getNamedItem("yoffset").nodeValue, 10),
                    xAdvance: parseInt(letters[i].attributes.getNamedItem("xadvance").nodeValue, 10),
                    kerning: {},
                    texture: PIXI.TextureCache[charCode] = new PIXI.Texture(this.texture, textureRect)

                };
            }

            //parse kernings
            var kernings = this.ajaxRequest.responseXML.getElementsByTagName("kerning");
            for (i = 0; i < kernings.length; i++)
            {
               var first = parseInt(kernings[i].attributes.getNamedItem("first").nodeValue, 10);
               var second = parseInt(kernings[i].attributes.getNamedItem("second").nodeValue, 10);
               var amount = parseInt(kernings[i].attributes.getNamedItem("amount").nodeValue, 10);

                data.chars[second].kerning[first] = amount;

            }

            PIXI.BitmapText.fonts[data.font] = data;

            var scope = this;
            image.addEventListener("loaded", function() {
                scope.onLoaded();
            });
            image.load();
        }
    }
};

/**
 * Invoked when all files are loaded (xml/fnt and texture)
 *
 * @method onLoaded
 * @private
 */
PIXI.BitmapFontLoader.prototype.onLoaded = function()
{
    this.dispatchEvent({type: "loaded", content: this});
};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) https://github.com/ekelokorpi
 *
 * Awesome JS run time provided by EsotericSoftware
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

/**
 * The Spine loader is used to load in JSON spine data
 * To generate the data you need to use http://esotericsoftware.com/ and export the "JSON" format
 * Due to a clash of names  You will need to change the extension of the spine file from *.json to *.anim for it to load
 * See example 12 (http://www.goodboydigital.com/pixijs/examples/12/) to see a working example and check out the source
 * You will need to generate a sprite sheet to accompany the spine data
 * When loaded this class will dispatch a "loaded" event
 *
 * @class Spine
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.SpineLoader = function(url, crossorigin)
{
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] Whether the data has loaded yet
	 *
	 * @property loaded
	 * @type Boolean
	 * @readOnly
	 */
	this.loaded = false;
}

PIXI.SpineLoader.prototype.constructor = PIXI.SpineLoader;

/**
 * Loads the JSON data
 *
 * @method load
 */
PIXI.SpineLoader.prototype.load = function () {

	var scope = this;
	var jsonLoader = new PIXI.JsonLoader(this.url, this.crossorigin);
	jsonLoader.addEventListener("loaded", function (event) {
		scope.json = event.content.json;
		scope.onJSONLoaded();
	});
	jsonLoader.load();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.SpineLoader.prototype.onJSONLoaded = function (event) {
	var spineJsonParser = new spine.SkeletonJson();
	var skeletonData = spineJsonParser.readSkeletonData(this.json);

	PIXI.AnimCache[this.url] = skeletonData;

	this.onLoaded();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onLoaded
 * @private
 */
PIXI.SpineLoader.prototype.onLoaded = function () {
	this.loaded = true;
    this.dispatchEvent({type: "loaded", content: this});
};


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * This is the base class for  creating a pixi.js filter. Currently only webGL supports filters.
 * If you want to make a custom filter this should be your base class.
 * @class AbstractFilter
 * @constructor
 * @param fragmentSrc
 * @param unifroms  
 */
PIXI.AbstractFilter = function(fragmentSrc, unifroms)
{
	/**
	* An array of passes - some filters contain a few steps this array simply stores the steps in a liniear fashion.
	* For example the blur filter has two passes blurX and blurY.
	* @property passes
	* @type Array an array of filter objects
	* @private
	*/
	this.passes = [this];


	this.dirty = true;
	this.padding = 0;

	/**
	@property uniforms
	@private
	*/
	this.uniforms = unifroms || {};
	
	this.fragmentSrc = fragmentSrc || [];
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * The ColorMatrixFilter class lets you apply a 4x4 matrix transformation on the RGBA 
 * color and alpha values of every pixel on your displayObject to produce a result 
 * with a new set of RGBA color and alpha values. Its pretty powerful!
 * @class ColorMatrixFilter
 * @contructor
 */
PIXI.ColorMatrixFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		matrix: {type: 'mat4', value: [1,0,0,0,
									   0,1,0,0,
									   0,0,1,0,
									   0,0,0,1]},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float invert;",
	  "uniform mat4 matrix;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.ColorMatrixFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.ColorMatrixFilter.prototype.constructor = PIXI.ColorMatrixFilter;

/**
 * Sets the matrix of the color matrix filter
 *
 * @property matrix
 * @type Array and array of 26 numbers
 * @default [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
 */
Object.defineProperty(PIXI.ColorMatrixFilter.prototype, 'matrix', {
    get: function() {
        return this.uniforms.matrix.value;
    },
    set: function(value) {
    	this.uniforms.matrix.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This turns your displayObjects to black and white.
 * @class GreyFilter
 * @contructor
 */
PIXI.GreyFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		grey: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "uniform float grey;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), grey);",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
}

PIXI.GreyFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.GreyFilter.prototype.constructor = PIXI.GreyFilter;

/**
The strength of the grey. 1 will make the object black and white, 0 will make the object its normal color
@property grey
*/
Object.defineProperty(PIXI.GreyFilter.prototype, 'grey', {
    get: function() {
        return this.uniforms.grey.value;
    },
    set: function(value) {
    	this.uniforms.grey.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * The DisplacementFilter class uses the pixel values from the specified texture (called the displacement map) to perform a displacement of an object. 
 * You can use this filter to apply all manor of crazy warping effects
 * Currently the r property of the texture is used offset the x and the g propery of the texture is used to offset the y.
 * @class DisplacementFilter
 * @contructor
 * @param texture {Texture} The texture used for the displacemtent map * must be power of 2 texture at the moment
 */
PIXI.DisplacementFilter = function(texture)
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	texture.baseTexture._powerOf2 = true;

	// set the uniforms
	//console.log()
	this.uniforms = {
		displacementMap: {type: 'sampler2D', value:texture},
		scale:			 {type: 'f2', value:{x:30, y:30}},
		offset:			 {type: 'f2', value:{x:0, y:0}},
		mapDimensions:   {type: 'f2', value:{x:1, y:5112}},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};
	

	if(texture.baseTexture.hasLoaded)
	{
		this.uniforms.mapDimensions.value.x = texture.width;
		this.uniforms.mapDimensions.value.y = texture.height;
	}
	else
	{
		this.boundLoadedFunction = this.onTextureLoaded.bind(this);

		texture.baseTexture.on("loaded", this.boundLoadedFunction);
	}

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D displacementMap;",
	  "uniform sampler2D uSampler;",
	  "uniform vec2 scale;",
	  "uniform vec2 offset;",
	  "uniform vec4 dimensions;",
	  "uniform vec2 mapDimensions;",// = vec2(256.0, 256.0);",
	 // "const vec2 textureDimensions = vec2(750.0, 750.0);",
	  
	  "void main(void) {",
	  	"vec2 mapCords = vTextureCoord.xy;",
//	  	"mapCords -= ;",
	 	"mapCords += (dimensions.zw + offset)/ dimensions.xy ;",
	 	"mapCords.y *= -1.0;",
	 	"mapCords.y += 1.0;",
	  	"vec2 matSample = texture2D(displacementMap, mapCords).xy;",
		"matSample -= 0.5;",	  
	 	"matSample *= scale;",
	 	"matSample /= mapDimensions;",
	    "gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));",
		"gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);",
		"vec2 cord = vTextureCoord;",
		
		//"gl_FragColor =  texture2D(displacementMap, cord);",
	    "gl_FragColor = gl_FragColor * vColor;",
	    
	  "}"
	];
	
}

PIXI.DisplacementFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.DisplacementFilter.prototype.constructor = PIXI.DisplacementFilter;

PIXI.DisplacementFilter.prototype.onTextureLoaded = function()
{
	
	this.uniforms.mapDimensions.value.x = this.uniforms.displacementMap.value.width;
	this.uniforms.mapDimensions.value.y = this.uniforms.displacementMap.value.height;

	this.uniforms.displacementMap.value.baseTexture.off("loaded", this.boundLoadedFunction)

}

/**
 * The texture used for the displacemtent map * must be power of 2 texture at the moment
 *
 * @property map
 * @type Texture
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'map', {
    get: function() {
        return this.uniforms.displacementMap.value;
    },
    set: function(value) {
    	this.uniforms.displacementMap.value = value;
    }
});

/**
 * The multiplier used to scale the displacement result from the map calculation.
 *
 * @property scale
 * @type Point
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'scale', {
    get: function() {
        return this.uniforms.scale.value;
    },
    set: function(value) {
    	this.uniforms.scale.value = value;
    }
});

/**
 * The offset used to move the displacement map.
 *
 * @property offset
 * @type Point
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'offset', {
    get: function() {
        return this.uniforms.offset.value;
    },
    set: function(value) {
    	this.uniforms.offset.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.PixelateFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		invert: {type: 'f', value: 0},
		dimensions: {type: 'f4', value:new Float32Array([10000, 100, 10, 10])},
		pixelSize: {type: 'f2', value:{x:10, y:10}},
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec2 testDim;",
	  "uniform vec4 dimensions;",
	  "uniform vec2 pixelSize;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	 	"vec2 coord = vTextureCoord;",

	 	"vec2 size = dimensions.xy/pixelSize;",

	 	"vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;",
	    "gl_FragColor = texture2D(uSampler, color);",
	  "}"
	];
	

}

PIXI.PixelateFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.PixelateFilter.prototype.constructor = PIXI.PixelateFilter;

/**
 * 
 * This a point that describes the size of the blocs. x is the width of the block and y is the the height
 * @property size
 * @type Point
 */
Object.defineProperty(PIXI.PixelateFilter.prototype, 'size', {
    get: function() {
        return this.uniforms.pixelSize.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.pixelSize.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.BlurXFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	"vec4 sum = vec4(0.0);",

	  	"sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;",
	 
		"gl_FragColor = sum;",

	  "}"
	];
}

PIXI.BlurXFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.BlurXFilter.prototype.constructor = PIXI.BlurXFilter;


Object.defineProperty(PIXI.BlurXFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    
    	this.dirty = true;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.BlurYFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	"vec4 sum = vec4(0.0);",

	  	"sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;",
	 
		"gl_FragColor = sum;",

	  "}"
	];
}

PIXI.BlurYFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.BlurYFilter.prototype.constructor = PIXI.BlurYFilter;

Object.defineProperty(PIXI.BlurYFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * The BlurFilter applies a Gaussian blur to an object. 
 * The strength of the blur can be set for x- and y-axis separately (always relative to the stage).
 *
 * @class BlurFilter
 * @contructor
 */
PIXI.BlurFilter = function()
{
    
	this.blurXFilter = new PIXI.BlurXFilter();
	this.blurYFilter = new PIXI.BlurYFilter();

	this.passes =[this.blurXFilter, this.blurYFilter];
	
}

/**
 * Sets the strength of both the blurX and blurY properties simultaneously
 *
 * @property blur
 * @type Number the strength of the blur
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blur', {
    get: function() {
        return this.blurXFilter.blur;
    },
    set: function(value) {
  		this.blurXFilter.blur = this.blurYFilter.blur = value;
    }
});

/**
 * Sets the strength of the blurX property simultaneously
 *
 * @property blurX
 * @type Number the strength of the blurX
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blurX', {
    get: function() {
        return this.blurXFilter.blur;
    },
    set: function(value) {
    	this.blurXFilter.blur = value;
    }
});

/**
 * Sets the strength of the blurX property simultaneously
 *
 * @property blurY
 * @type Number the strength of the blurY
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blurY', {
    get: function() {
        return this.blurYFilter.blur;
    },
    set: function(value) {
    	this.blurYFilter.blur = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This inverts your displayObjects colors.
 * @class InvertFilter
 * @contructor
 */
PIXI.InvertFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		invert: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float invert;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);",
		//"gl_FragColor.rgb = gl_FragColor.rgb  * gl_FragColor.a;",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.InvertFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.InvertFilter.prototype.constructor = PIXI.InvertFilter;

/**
The strength of the invert. 1 will fully invert the colors, 0 will make the object its normal color
@property invert
*/
Object.defineProperty(PIXI.InvertFilter.prototype, 'invert', {
    get: function() {
        return this.uniforms.invert.value;
    },
    set: function(value) {
    	this.uniforms.invert.value = value;
    }
});
/**
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This applies a sepia effect to your displayObjects.
 * @class SepiaFilter
 * @contructor
 */
PIXI.SepiaFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		sepia: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float sepia;",
	  "uniform sampler2D uSampler;",
	 	   
	  "const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.SepiaFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.SepiaFilter.prototype.constructor = PIXI.SepiaFilter;

/**
The strength of the sepia. 1 will apply the full sepia effect, 0 will make the object its normal color
@property sepia
*/
Object.defineProperty(PIXI.SepiaFilter.prototype, 'sepia', {
    get: function() {
        return this.uniforms.sepia.value;
    },
    set: function(value) {
    	this.uniforms.sepia.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.TwistFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		radius: {type: 'f', value:0.5},
		angle: {type: 'f', value:5},
		offset: {type: 'f2', value:{x:0.5, y:0.5}},
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",
	  
	  "uniform float radius;",
      "uniform float angle;",
      "uniform vec2 offset;",

	  "void main(void) {",
	 	"vec2 coord = vTextureCoord - offset;",
		"float distance = length(coord);",
	 	
	 	"if (distance < radius){",

		 	"float ratio = (radius - distance) / radius;",
		 	"float angleMod = ratio * ratio * angle;",
		 	"float s = sin(angleMod);",
		 	"float c = cos(angleMod);",
		 	"coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);",

	 	"}",

	    "gl_FragColor = texture2D(uSampler, coord+offset);",
	  "}"
	];
}

PIXI.TwistFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.TwistFilter.prototype.constructor = PIXI.TwistFilter;

/**
 * 
 * This point describes the the offset of the twist
 * @property size
 * @type Point
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'offset', {
    get: function() {
        return this.uniforms.offset.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.offset.value = value;
    }
});

/**
 * 
 * This radius describes size of the twist
 * @property size
 * @type Number
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'radius', {
    get: function() {
        return this.uniforms.radius.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.radius.value = value;
    }
});

/**
 * 
 * This radius describes angle of the twist
 * @property angle
 * @type Number
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.angle.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.angle.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This turns your displayObjects to black and white.
 * @class GreyFilter
 * @contructor
 */
PIXI.ColorStepFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		step: {type: 'f', value: 5},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "uniform float step;",
	  "void main(void) {",
	    "vec4 color = texture2D(uSampler, vTextureCoord);",
	    "color = floor(color * step) / step;",
	    "gl_FragColor = color * vColor;",
	  "}"
	];
}

PIXI.ColorStepFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.ColorStepFilter.prototype.constructor = PIXI.ColorStepFilter;

/**
The number of steps.
@property step
*/
Object.defineProperty(PIXI.ColorStepFilter.prototype, 'step', {
    get: function() {
        return this.uniforms.step.value;
    },
    set: function(value) {
    	this.uniforms.step.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * original filter: https://github.com/evanw/glfx.js/blob/master/src/filters/fun/dotscreen.js
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.DotScreenFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		scale: {type: 'f', value:1},
		angle: {type: 'f', value:5},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",

	    "uniform float angle;",
	    "uniform float scale;",

	    "float pattern() {",
	    	"float s = sin(angle), c = cos(angle);",
	    	"vec2 tex = vTextureCoord * dimensions.xy;",
	    	"vec2 point = vec2(",
	    		"c * tex.x - s * tex.y,",
	    		"s * tex.x + c * tex.y",
	    	") * scale;",
	    	"return (sin(point.x) * sin(point.y)) * 4.0;",
	    "}",

	    "void main() {",
            "vec4 color = texture2D(uSampler, vTextureCoord);",
            "float average = (color.r + color.g + color.b) / 3.0;",
            "gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);",
        "}",
	];
}

PIXI.DotScreenFilter.prototype = Object.create( PIXI.DotScreenFilter.prototype );
PIXI.DotScreenFilter.prototype.constructor = PIXI.DotScreenFilter;

/**
 * 
 * This describes the the scale
 * @property scale
 * @type Number
 */
Object.defineProperty(PIXI.DotScreenFilter.prototype, 'scale', {
    get: function() {
        return this.uniforms.scale.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.scale.value = value;
    }
});

/**
 * 
 * This radius describes angle
 * @property angle
 * @type Number
 */
Object.defineProperty(PIXI.DotScreenFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.angle.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.angle.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.CrossHatchFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	
	    
		"    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);",
		"     ",
		"    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);",
		"     ",
		"    if (lum < 1.00) {",
		"        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.75) {",
		"        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.50) {",
		"        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.3) {",
		"        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"}"
	];
}

PIXI.CrossHatchFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.CrossHatchFilter.prototype.constructor = PIXI.BlurYFilter;

Object.defineProperty(PIXI.CrossHatchFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.RGBSplitFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		red: {type: 'f2', value: {x:20, y:20}},
		green: {type: 'f2', value: {x:-20, y:20}},
		blue: {type: 'f2', value: {x:20, y:-20}},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec2 red;",
	  "uniform vec2 green;",
	  "uniform vec2 blue;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	  "gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;",
	  	  "gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;",
	  	  "gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;",
	  	  "gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;",
	  "}"
	];
}

PIXI.RGBSplitFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.RGBSplitFilter.prototype.constructor = PIXI.RGBSplitFilter;

Object.defineProperty(PIXI.RGBSplitFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

    if (typeof exports !== 'undefined') {
        if (typeof module !== 'undefined' && module.exports) {
            exports = module.exports = PIXI;
        }
        exports.PIXI = PIXI;
    } else if (typeof define !== 'undefined' && define.amd) {
        define(PIXI);
    } else {
        root.PIXI = PIXI;
    }
}).call(this);

},{}],7:[function(require,module,exports){
(function() {
  require('es5-shimify');

  require('spine');

  require('spine/lib/local');

  require('spine/lib/manager');

  require('spine/lib/route');

  require('./spine.ajax');

  require('./spine.awaitajax');

  window.Math2 = require('./Math2');

  $(function() {
    var App;
    if (window.app) {
      return;
    }
    App = require("../pixijs-playground");
    return window.app = new App({
      el: $("body")
    });
  });

}).call(this);


},{"../pixijs-playground":11,"./Math2":4,"./spine.ajax":8,"./spine.awaitajax":9,"es5-shimify":19,"spine":39,"spine/lib/local":40,"spine/lib/manager":41,"spine/lib/route":42}],8:[function(require,module,exports){
(function() {
  var Ajax, Base, Collection, Extend, Include, Model, Singleton, Spine, iced, __iced_k, __iced_k_noop,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = this.Spine || require("spine");

  Model = Spine.Model;

  Ajax = {
    getURL: function(object) {
      return object && (typeof object.url === "function" ? object.url() : void 0) || object.url;
    },
    enabled: true,
    disable: function(callback) {
      var e;
      if (this.enabled) {
        this.enabled = false;
        try {
          return callback();
        } catch (_error) {
          e = _error;
          throw e;
        } finally {
          this.enabled = true;
        }
      } else {
        return callback();
      }
    },
    max: 100,
    throttle: 0,
    queue: function(request) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.pipeliner || (this.pipeliner = new Pipeliner(this.max, this.throttle));
      if (!request) {
        return this.pipeliner.queue;
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/spine.ajax.iced"
          });
          _this.pipeliner.waitInQueue(__iced_deferrals.defer({
            lineno: 29
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return request(_this.pipeliner.defer({
            lineno: 30,
            context: __iced_deferrals
          }));
        };
      })(this));
    },
    clearQueue: function() {
      this.pipeliner.queue = [];
      return this.pipeliner.n_out = 0;
    }
  };

  Base = (function() {
    function Base() {}

    Base.prototype.defaults = {
      contentType: 'application/json',
      dataType: 'json',
      processData: false,
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    };

    Base.prototype.queue = Ajax.queue;

    Base.prototype.ajax = function(params, defaults) {
      return new $.ajax(this.ajaxSettings(params, defaults));
    };

    Base.prototype.ajaxQueue = function(params, defaults) {
      var data, defererror, defersuccess, error, request, rv, settings, statusText, xhr;
      xhr = null;
      rv = new iced.Rendezvous;
      settings = this.ajaxSettings(params, defaults);
      defersuccess = settings.success;
      defererror = settings.error;
      settings.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              data = arguments[0];
              statusText = arguments[1];
              return xhr = arguments[2];
            };
          };
        })(this)(),
        lineno: 56,
        context: __iced_deferrals
      });
      settings.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              xhr = arguments[0];
              statusText = arguments[1];
              return error = arguments[2];
            };
          };
        })(this)(),
        lineno: 57,
        context: __iced_deferrals
      });
      request = function(next) {
        var status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
        __iced_k = __iced_k_noop;
        ___iced_passed_deferral = iced.findDeferral(arguments);
        xhr = new $.Ajax(settings);
        (function(_this) {
          return (function(__iced_k) {
            __iced_deferrals = new iced.Deferrals(__iced_k, {
              parent: ___iced_passed_deferral,
              filename: "/home/charles/source/pixijs-playground/app/lib/spine.ajax.iced"
            });
            rv.wait(__iced_deferrals.defer({
              assign_fn: (function() {
                return function() {
                  return status = arguments[0];
                };
              })(),
              lineno: 61
            }));
            __iced_deferrals._fulfill();
          });
        })(this)((function(_this) {
          return function() {
            switch (status) {
              case 'success':
                defersuccess(data, statusText, xhr);
                break;
              case 'error':
                defererror(xhr, statusText, error);
            }
            return next();
          };
        })(this));
      };
      request.abort = function(statusText) {
        var index;
        if (xhr) {
          return xhr.abort(statusText);
        }
        index = this.queue().indexOf(request);
        if (index > -1) {
          this.queue().splice(index, 1);
        }
        if (Ajax.pipeliner) {
          Ajax.pipeliner.n_out--;
        }
        return request;
      };
      if (!Ajax.enabled) {
        return request;
      }
      this.queue(request);
      return request;
    };

    Base.prototype.ajaxSettings = function(params, defaults) {
      return $.extend({}, this.defaults, defaults, params);
    };

    return Base;

  })();

  Collection = (function(_super) {
    __extends(Collection, _super);

    function Collection(model) {
      this.model = model;
      this.failResponse = __bind(this.failResponse, this);
      this.recordsResponse = __bind(this.recordsResponse, this);
    }

    Collection.prototype.find = function(id, params) {
      var record;
      record = new this.model({
        id: id
      });
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(record),
        success: this.recordsResponse,
        error: this.failResponse
      });
    };

    Collection.prototype.all = function(params) {
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(this.model),
        success: this.recordsResponse,
        error: this.failResponse
      });
    };

    Collection.prototype.fetch = function(params, options) {
      var id;
      if (params == null) {
        params = {};
      }
      if (options == null) {
        options = {};
      }
      if (id = params.id) {
        delete params.id;
        return this.find(id, params).done((function(_this) {
          return function(record) {
            return _this.model.refresh(record, options);
          };
        })(this));
      } else {
        return this.all(params).done((function(_this) {
          return function(records) {
            return _this.model.refresh(records, options);
          };
        })(this));
      }
    };

    Collection.prototype.recordsResponse = function(data, status, xhr) {
      return this.model.trigger('ajaxSuccess', null, status, xhr);
    };

    Collection.prototype.failResponse = function(xhr, statusText, error) {
      return this.model.trigger('ajaxError', null, xhr, statusText, error);
    };

    return Collection;

  })(Base);

  Singleton = (function(_super) {
    __extends(Singleton, _super);

    function Singleton(record) {
      this.record = record;
      this.failResponse = __bind(this.failResponse, this);
      this.recordResponse = __bind(this.recordResponse, this);
      this.model = this.record.constructor;
    }

    Singleton.prototype.reload = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.create = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'POST',
        data: JSON.stringify(this.record),
        url: Ajax.getURL(this.model),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.update = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'PUT',
        data: JSON.stringify(this.record),
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.destroy = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'DELETE',
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.recordResponse = function(options) {
      if (options == null) {
        options = {};
      }
      return (function(_this) {
        return function(data, status, xhr) {
          var _ref, _ref1;
          if (Spine.isBlank(data)) {
            data = false;
          } else {
            data = _this.model.fromJSON(data);
          }
          Ajax.disable(function() {
            if (data) {
              if (data.id && _this.record.id !== data.id) {
                _this.record.changeID(data.id);
              }
              return _this.record.updateAttributes(data.attributes());
            }
          });
          _this.record.trigger('ajaxSuccess', data, status, xhr);
          if ((_ref = options.success) != null) {
            _ref.apply(_this.record);
          }
          return (_ref1 = options.done) != null ? _ref1.apply(_this.record) : void 0;
        };
      })(this);
    };

    Singleton.prototype.failResponse = function(options) {
      if (options == null) {
        options = {};
      }
      return (function(_this) {
        return function(xhr, statusText, error) {
          var _ref, _ref1;
          _this.record.trigger('ajaxError', xhr, statusText, error);
          if ((_ref = options.error) != null) {
            _ref.apply(_this.record);
          }
          return (_ref1 = options.fail) != null ? _ref1.apply(_this.record) : void 0;
        };
      })(this);
    };

    return Singleton;

  })(Base);

  Model.host = '';

  Include = {
    ajax: function() {
      return new Singleton(this);
    },
    url: function() {
      var args, url;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      url = Ajax.getURL(this.constructor);
      if (url.charAt(url.length - 1) !== '/') {
        url += '/';
      }
      url += Tiger.Ajax.encode(this.id);
      args.unshift(url);
      return args.join('/');
    }
  };

  Extend = {
    ajax: function() {
      return new Collection(this);
    },
    url: function() {
      var args;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      args.unshift(this.className.toLowerCase() + 's');
      args.unshift(Model.host);
      return args.join('/');
    }
  };

  Model.Ajax = {
    extended: function() {
      this.fetch(this.ajaxFetch);
      this.change(this.ajaxChange);
      this.extend(Extend);
      return this.include(Include);
    },
    ajaxFetch: function() {
      var _ref;
      return (_ref = this.ajax()).fetch.apply(_ref, arguments);
    },
    ajaxChange: function(record, type, options) {
      if (options == null) {
        options = {};
      }
      if (options.ajax === false) {
        return;
      }
      return record.ajax()[type](options.ajax, options);
    }
  };

  Model.Ajax.Methods = {
    extended: function() {
      this.extend(Extend);
      return this.include(Include);
    }
  };

  Ajax.defaults = Base.prototype.defaults;

  Ajax.Base = Base;

  Ajax.Singleton = Singleton;

  Ajax.Collection = Collection;

  Spine.Ajax = Ajax;

  Spine.Ajax.ModelAdapter = Ajax;

  Spine.Ajax.Q = Base;

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Ajax;
  }

}).call(this);


},{"iced-runtime":32,"spine":39}],9:[function(require,module,exports){
(function() {
  var Spine, awaitAjax, iced, __iced_k, __iced_k_noop;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = this.Spine || require("spine");

  awaitAjax = {
    awaitAjax: function(options, cb, queue) {
      var data, rv, status, statusText, xhr, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      if (queue == null) {
        queue = false;
      }
      rv = new iced.Rendezvous();
      options.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              data = arguments[0];
              statusText = arguments[1];
              return xhr = arguments[2];
            };
          };
        })(this)(),
        lineno: 7,
        context: __iced_deferrals
      });
      options.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              xhr = arguments[0];
              statusText = arguments[1];
              return data = arguments[2];
            };
          };
        })(this)(),
        lineno: 8,
        context: __iced_deferrals
      });
      if (queue) {
        this.Q.ajaxQueue(options);
      } else {
        new $.ajax(options);
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/spine.awaitajax.iced"
          });
          rv.wait(__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return status = arguments[0];
              };
            })(),
            lineno: 13
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return cb(status, xhr, statusText, data);
        };
      })(this));
    },
    awaitGet: function(options, cb, queue) {
      options.method = 'GET';
      return this.awaitAjax(options, cb, queue);
    },
    awaitPost: function(options, cb, queue) {
      options.method = 'GET';
      return this.awaitAjax(options, cb, queue);
    },
    awaitQueuedAjax: function(options, cb) {
      return this.awaitAjax(options, cb, true);
    },
    awaitQueuedGet: function(options, cb) {
      return this.awaitGet(options, cb, true);
    },
    awaitQueuedPost: function(options, cb) {
      return this.awaitPost(options, cb, true);
    }
  };

  Spine.Class.extend.call(Spine.Ajax, awaitAjax);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = awaitAjax;
  }

}).call(this);


},{"iced-runtime":32,"spine":39}],10:[function(require,module,exports){
(function() {
  var Spine, exampleList, examples, iced, loadExample, name, path, __iced_k, __iced_k_noop, _fn;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = require("spine");

  loadExample = function(url, autocb) {
    var data, status, statusText, xhr, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = autocb;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/home/charles/source/pixijs-playground/app/models/examples.iced"
        });
        Spine.Ajax.awaitGet({
          url: url
        }, __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              status = arguments[0];
              xhr = arguments[1];
              statusText = arguments[2];
              return data = arguments[3];
            };
          })(),
          lineno: 4
        }));
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        switch (status) {
          case "error":
            autocb("Error " + statusText + ": " + data);
            return;
          case "success":
            autocb(data);
            return;
        }
      };
    })(this));
  };

  exampleList = {
    bunny: "./examples/bunny.coffee",
    "bunny-short": "./examples/bunny-short.coffee",
    dragging: "./examples/dragging.coffee",
    balls: "./examples/balls.coffee",
    bunnymark: "./examples/bunnymark.coffee",
    morph: "./examples/morph.coffee",
    primitives: "./examples/primitives.coffee",
    rendertexture: "./examples/rendertexture.coffee",
    text: "./examples/text.iced",
    filters: "./examples/filters.coffee"
  };

  examples = {};

  _fn = function(path) {
    return examples[name] = function(cb) {
      return loadExample(path, cb);
    };
  };
  for (name in exampleList) {
    path = exampleList[name];
    _fn(path);
  }

  module.exports = examples;

}).call(this);


},{"iced-runtime":32,"spine":39}],11:[function(require,module,exports){
(function() {
  var Console, Editor, Playground, Spine, Stage, emoji, escapeHTML, examples,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  require('./lib/setup');

  emoji = require('emoji-images');

  Spine = require('spine');

  Stage = require('./controllers/stage');

  Console = require('./controllers/console');

  Editor = require('./controllers/editor');

  examples = require('./models/examples');

  escapeHTML = function(s) {
    return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
  };

  Playground = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Playground, _super);

    Playground.prototype.logPrefix = "(Playground:App)";

    DEFAULT_SETTINGS = {
      example: "bunnymark",
      lang: "coffee"
    };

    Playground.prototype.elements = {
      "aside#output": "output",
      "section.playground": "playground",
      "button.refresh-playground": "buttonRefreshPlayground"
    };

    Playground.prototype.refreshPlayground = function() {
      var button;
      button = $("button.run");
      if (button.is(".selected")) {
        button.trigger("click", {
          target: button[0]
        });
      }
      this.stage.refresh();
      return this.$(".dg.main").add(".counter").remove();
    };

    Playground.prototype.selectExample = function(e) {
      return this.editor.render($(e.target).val());
    };

    Playground.prototype.mouseenterPlaygroundRefresh = function() {
      if (this.stage) {
        return this.buttonRefreshPlayground.fadeIn(180);
      }
    };

    Playground.prototype.mouseenterKeepPlaygroundRefresh = function() {
      return this.buttonRefreshPlayground.stop(true).fadeTo(1, 1);
    };

    Playground.prototype.mouseleavePlaygroundRefresh = function() {
      return this.buttonRefreshPlayground.fadeOut(180);
    };

    Playground.prototype.events = {
      "click button.refresh-playground": "refreshPlayground",
      "change select.examples": "selectExample",
      "mouseenter section.playground": "mouseenterPlaygroundRefresh",
      "mouseenter button.refresh-playground": "mouseenterKeepPlaygroundRefresh",
      "mouseleave section.playground": "mouseleavePlaygroundRefresh"
    };

    function Playground(options, settings) {
      var examplelist, k, name, v, _ref;
      if (settings == null) {
        settings = {};
      }
      Playground.__super__.constructor.apply(this, arguments);
      this.log("initializing");
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
          switch (k) {
            case "script":
              (function(v) {
                return examples["local-saved"] = function(cb) {
                  return cb(v);
                };
              })(v);
          }
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
      examplelist = (function() {
        var _results;
        _results = [];
        for (name in examples) {
          if (!__hasProp.call(examples, name)) continue;
          _results.push(name);
        }
        return _results;
      })();
      this.render(examplelist, this.settings.example);
    }

    Playground.prototype.initStage = function() {
      if (this.stage == null) {
        this.stage = new Stage({
          el: this.playground
        });
      }
      this.stage.showStats();
      return this.buttonRefreshPlayground.show();
    };

    Playground.prototype.render = function(examplelist, example) {
      if (examplelist == null) {
        examplelist = [];
      }
      this.view = (require("./views/templates")).index({
        examples: examplelist,
        example: example
      });
      this.view = emoji(this.view, "images/emoji", 20);
      this.html(this.view);
      this.console = new Console({
        el: this.output,
        input: this.$("input.repl")
      });
      this.editor = new Editor({
        el: this.el,
        examples: examples,
        console: this.console
      });
      this.editor.on("presave", this.proxy(this.initStage));
      this.editor.on("langchange", this.console.proxy(this.console.lang));
      this.editor.lang(this.settings.lang);
      if (this.stage) {
        this.refreshPlayground();
      }
      if (!(this.settings.script && this.settings.script.trim() !== "")) {
        return this.editor.render(example);
      }
    };

    Playground.prototype.langChange = function(name) {
      return this.settings.lang = name;
    };

    return Playground;

  })(Spine.Controller);

  module.exports = Playground;

}).call(this);


},{"./controllers/console":1,"./controllers/editor":2,"./controllers/stage":3,"./lib/setup":7,"./models/examples":10,"./views/templates":12,"emoji-images":18,"spine":39}],12:[function(require,module,exports){
var jade = require('@lukekarrys/jade-runtime');

var templatizer = {};



// help.jade compiled template
templatizer["help"] = function tmpl_help() {
    return '<aside id="help"><h4>Editor</h4><dl><dt>:icecream:</dt><dd>switch code to vanilla JS (compiles)</dd><dt>:coffee:</dt><dd>switch code to Iced CoffeeScript (does not compile)</dd><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Refresh example from CoffeeScript source</dd><dt><button class="glyphicon glyphicon-floppy-disk"></button></dt><dd>Save script and assets to in-browser Local Storage</dd></dl><h4>Stage/Canvas</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Remove children from stage (and stop animation)</dd></dl><h4>Console</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Clear console</dd><dt>:arrow_up::arrow_down:</dt><dd>Browse REPL history</dd><dt>:leftwards_arrow_with_hook:</dt><dd>Run command</dd></dl><h4>Global variables</h4><dl class="globals"><dt>app</dt><dd>instance of this pixijs-playground webapp</dd><dt>stats</dt><dd>instance of Mr. Doob\'s&nbsp;<a href="https://github.com/mrdoob/stats.js">stats.js</a></dd><dt>frame</dt><dd>id of animation frame (useful with&nbsp;<tt>cancelAnimationFrame(frame)</tt>)</dd><dt>stage</dt><dd>current instance of&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/Stage.html">PIXI.Stage</a>&nbsp;(when running)</dd><dt>renderer</dt><dd>current instance of either&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/WebGLRenderer.html">PIXI.WebGLRenderer</a>&nbsp;or&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/CanvasRenderer.html">PIXI.CanvasRenderer</a>, depending on the result of <tt>PIXI.autoDetectRenderer</tt> (when running)</dd><dt>ani</dt><dd><em>(function)</em> Animation Loop wrapper. Starts/ends stats, calls frame fn,\nrenders frame to stage, and loops.<pre>ani: (loopfn) ->\n  recursiveloop = ->\n    @stats.begin()\n    loopfn()\n    @renderer.render @stage\n    window.frame = requestAnimFrame recursiveloop\n    @stats.end()\n  window.frame = requestAnimFrame recursiveloop</pre></dd><a href="https://github.com/nextorigin/pixijs-playground" class="forkme"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/></a></dl></aside>';
};

// index.jade compiled template
templatizer["index"] = function tmpl_index(locals) {
    var buf = [];
    var jade_mixins = {};
    var jade_interp;
    var locals_for_with = locals || {};
    (function(example, examples, undefined) {
        buf.push('<header><h2>Pixi.js Playground</h2></header><section class="playground"></section><button class="refresh-playground glyphicon glyphicon-refresh"></button><aside id="output"></aside><input type="text" class="repl"/><span class="console-label">Console</span><textarea value="// Pixi.js Playground" class="sandbox"></textarea><select class="examples">');
        (function() {
            var $$obj = examples;
            if ("number" == typeof $$obj.length) {
                for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
                    var name = $$obj[$index];
                    buf.push("<option" + jade.attr("value", name, true, false) + jade.attr("selected", example == name, true, false) + ">" + jade.escape((jade_interp = name) == null ? "" : jade_interp) + "</option>");
                }
            } else {
                var $$l = 0;
                for (var $index in $$obj) {
                    $$l++;
                    var name = $$obj[$index];
                    buf.push("<option" + jade.attr("value", name, true, false) + jade.attr("selected", example == name, true, false) + ">" + jade.escape((jade_interp = name) == null ? "" : jade_interp) + "</option>");
                }
            }
        }).call(this);
        buf.push('</select><button class="run">Run!</button><nav class="sandbox"><button class="help glyphicon glyphicon-question-sign"></button><button class="save glyphicon glyphicon-floppy-disk"></button><button class="langswitch-coffee selected">:coffee:</button><button class="langswitch-vanilla">:icecream:</button><button class="refresh-example glyphicon glyphicon-refresh"></button></nav><aside id="help"><h4>Editor</h4><dl><dt>:icecream:</dt><dd>switch code to vanilla JS (compiles)</dd><dt>:coffee:</dt><dd>switch code to Iced CoffeeScript (does not compile)</dd><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Refresh example from CoffeeScript source</dd><dt><button class="glyphicon glyphicon-floppy-disk"></button></dt><dd>Save script and assets to in-browser Local Storage</dd></dl><h4>Stage/Canvas</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Remove children from stage (and stop animation)</dd></dl><h4>Console</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Clear console</dd><dt>:arrow_up::arrow_down:</dt><dd>Browse REPL history</dd><dt>:leftwards_arrow_with_hook:</dt><dd>Run command</dd></dl><h4>Global variables</h4><dl class="globals"><dt>app</dt><dd>instance of this pixijs-playground webapp</dd><dt>stats</dt><dd>instance of Mr. Doob\'s&nbsp;<a href="https://github.com/mrdoob/stats.js">stats.js</a></dd><dt>frame</dt><dd>id of animation frame (useful with&nbsp;<tt>cancelAnimationFrame(frame)</tt>)</dd><dt>stage</dt><dd>current instance of&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/Stage.html">PIXI.Stage</a>&nbsp;(when running)</dd><dt>renderer</dt><dd>current instance of either&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/WebGLRenderer.html">PIXI.WebGLRenderer</a>&nbsp;or&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/CanvasRenderer.html">PIXI.CanvasRenderer</a>, depending on the result of <tt>PIXI.autoDetectRenderer</tt> (when running)</dd><dt>ani</dt><dd><em>(function)</em> Animation Loop wrapper. Starts/ends stats, calls frame fn,\nrenders frame to stage, and loops.<pre>ani: (loopfn) ->\n  recursiveloop = ->\n    @stats.begin()\n    loopfn()\n    @renderer.render @stage\n    window.frame = requestAnimFrame recursiveloop\n    @stats.end()\n  window.frame = requestAnimFrame recursiveloop</pre></dd><a href="https://github.com/nextorigin/pixijs-playground" class="forkme"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/></a></dl></aside><a id="pixi" href="//pixijs.com"></a><footer><h3>drag files here</h3><span>&copy; 2013&nbsp;<a href="http://nextorig.in">Next Origin</a></span></footer>');
    }).call(this, "example" in locals_for_with ? locals_for_with.example : typeof example !== "undefined" ? example : undefined, "examples" in locals_for_with ? locals_for_with.examples : typeof examples !== "undefined" ? examples : undefined, "undefined" in locals_for_with ? locals_for_with.undefined : typeof undefined !== "undefined" ? undefined : undefined);
    return buf.join("");
};


module.exports = templatizer;

},{"@lukekarrys/jade-runtime":14}],13:[function(require,module,exports){
/**
 * @author sole / http://soledadpenades.com
 * @author mrdoob / http://mrdoob.com
 * @author Robert Eisele / http://www.xarg.org
 * @author Philippe / http://philippe.elsass.me
 * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html
 * @author Paul Lewis / http://www.aerotwist.com/
 * @author lechecacharro
 * @author Josh Faul / http://jocafa.com/
 * @author egraether / http://egraether.com/
 * @author endel / http://endel.me
 * @author Ben Delarre / http://delarre.net
 */

// Date.now shim for (ahem) Internet Explo(d|r)er
if ( Date.now === undefined ) {

	Date.now = function () {

		return new Date().valueOf();

	};

}

var TWEEN = TWEEN || ( function () {

	var _tweens = [];

	return {

		REVISION: '12',

		getAll: function () {

			return _tweens;

		},

		removeAll: function () {

			_tweens = [];

		},

		add: function ( tween ) {

			_tweens.push( tween );

		},

		remove: function ( tween ) {

			var i = _tweens.indexOf( tween );

			if ( i !== -1 ) {

				_tweens.splice( i, 1 );

			}

		},

		update: function ( time ) {

			if ( _tweens.length === 0 ) return false;

			var i = 0;

			time = time !== undefined ? time : ( typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined ? window.performance.now() : Date.now() );

			while ( i < _tweens.length ) {

				if ( _tweens[ i ].update( time ) ) {

					i++;

				} else {

					_tweens.splice( i, 1 );

				}

			}

			return true;

		}
	};

} )();

TWEEN.Tween = function ( object ) {

	var _object = object;
	var _valuesStart = {};
	var _valuesEnd = {};
	var _valuesStartRepeat = {};
	var _duration = 1000;
	var _repeat = 0;
	var _yoyo = false;
	var _isPlaying = false;
	var _reversed = false;
	var _delayTime = 0;
	var _startTime = null;
	var _easingFunction = TWEEN.Easing.Linear.None;
	var _interpolationFunction = TWEEN.Interpolation.Linear;
	var _chainedTweens = [];
	var _onStartCallback = null;
	var _onStartCallbackFired = false;
	var _onUpdateCallback = null;
	var _onCompleteCallback = null;

	// Set all starting values present on the target object
	for ( var field in object ) {

		_valuesStart[ field ] = parseFloat(object[field], 10);

	}

	this.to = function ( properties, duration ) {

		if ( duration !== undefined ) {

			_duration = duration;

		}

		_valuesEnd = properties;

		return this;

	};

	this.start = function ( time ) {

		TWEEN.add( this );

		_isPlaying = true;

		_onStartCallbackFired = false;

		_startTime = time !== undefined ? time : ( typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined ? window.performance.now() : Date.now() );
		_startTime += _delayTime;

		for ( var property in _valuesEnd ) {

			// check if an Array was provided as property value
			if ( _valuesEnd[ property ] instanceof Array ) {

				if ( _valuesEnd[ property ].length === 0 ) {

					continue;

				}

				// create a local copy of the Array with the start value at the front
				_valuesEnd[ property ] = [ _object[ property ] ].concat( _valuesEnd[ property ] );

			}

			_valuesStart[ property ] = _object[ property ];

			if( ( _valuesStart[ property ] instanceof Array ) === false ) {
				_valuesStart[ property ] *= 1.0; // Ensures we're using numbers, not strings
			}

			_valuesStartRepeat[ property ] = _valuesStart[ property ] || 0;

		}

		return this;

	};

	this.stop = function () {

		if ( !_isPlaying ) {
			return this;
		}

		TWEEN.remove( this );
		_isPlaying = false;
		this.stopChainedTweens();
		return this;

	};

	this.stopChainedTweens = function () {

		for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++ ) {

			_chainedTweens[ i ].stop();

		}

	};

	this.delay = function ( amount ) {

		_delayTime = amount;
		return this;

	};

	this.repeat = function ( times ) {

		_repeat = times;
		return this;

	};

	this.yoyo = function( yoyo ) {

		_yoyo = yoyo;
		return this;

	};


	this.easing = function ( easing ) {

		_easingFunction = easing;
		return this;

	};

	this.interpolation = function ( interpolation ) {

		_interpolationFunction = interpolation;
		return this;

	};

	this.chain = function () {

		_chainedTweens = arguments;
		return this;

	};

	this.onStart = function ( callback ) {

		_onStartCallback = callback;
		return this;

	};

	this.onUpdate = function ( callback ) {

		_onUpdateCallback = callback;
		return this;

	};

	this.onComplete = function ( callback ) {

		_onCompleteCallback = callback;
		return this;

	};

	this.update = function ( time ) {

		var property;

		if ( time < _startTime ) {

			return true;

		}

		if ( _onStartCallbackFired === false ) {

			if ( _onStartCallback !== null ) {

				_onStartCallback.call( _object );

			}

			_onStartCallbackFired = true;

		}

		var elapsed = ( time - _startTime ) / _duration;
		elapsed = elapsed > 1 ? 1 : elapsed;

		var value = _easingFunction( elapsed );

		for ( property in _valuesEnd ) {

			var start = _valuesStart[ property ] || 0;
			var end = _valuesEnd[ property ];

			if ( end instanceof Array ) {

				_object[ property ] = _interpolationFunction( end, value );

			} else {

                // Parses relative end values with start as base (e.g.: +10, -3)
				if ( typeof(end) === "string" ) {
					end = start + parseFloat(end, 10);
				}

				// protect against non numeric properties.
                if ( typeof(end) === "number" ) {
					_object[ property ] = start + ( end - start ) * value;
				}

			}

		}

		if ( _onUpdateCallback !== null ) {

			_onUpdateCallback.call( _object, value );

		}

		if ( elapsed == 1 ) {

			if ( _repeat > 0 ) {

				if( isFinite( _repeat ) ) {
					_repeat--;
				}

				// reassign starting values, restart by making startTime = now
				for( property in _valuesStartRepeat ) {

					if ( typeof( _valuesEnd[ property ] ) === "string" ) {
						_valuesStartRepeat[ property ] = _valuesStartRepeat[ property ] + parseFloat(_valuesEnd[ property ], 10);
					}

					if (_yoyo) {
						var tmp = _valuesStartRepeat[ property ];
						_valuesStartRepeat[ property ] = _valuesEnd[ property ];
						_valuesEnd[ property ] = tmp;
						_reversed = !_reversed;
					}
					_valuesStart[ property ] = _valuesStartRepeat[ property ];

				}

				_startTime = time + _delayTime;

				return true;

			} else {

				if ( _onCompleteCallback !== null ) {

					_onCompleteCallback.call( _object );

				}

				for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++ ) {

					_chainedTweens[ i ].start( time );

				}

				return false;

			}

		}

		return true;

	};

};


TWEEN.Easing = {

	Linear: {

		None: function ( k ) {

			return k;

		}

	},

	Quadratic: {

		In: function ( k ) {

			return k * k;

		},

		Out: function ( k ) {

			return k * ( 2 - k );

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;
			return - 0.5 * ( --k * ( k - 2 ) - 1 );

		}

	},

	Cubic: {

		In: function ( k ) {

			return k * k * k;

		},

		Out: function ( k ) {

			return --k * k * k + 1;

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;
			return 0.5 * ( ( k -= 2 ) * k * k + 2 );

		}

	},

	Quartic: {

		In: function ( k ) {

			return k * k * k * k;

		},

		Out: function ( k ) {

			return 1 - ( --k * k * k * k );

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;
			return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );

		}

	},

	Quintic: {

		In: function ( k ) {

			return k * k * k * k * k;

		},

		Out: function ( k ) {

			return --k * k * k * k * k + 1;

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;
			return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );

		}

	},

	Sinusoidal: {

		In: function ( k ) {

			return 1 - Math.cos( k * Math.PI / 2 );

		},

		Out: function ( k ) {

			return Math.sin( k * Math.PI / 2 );

		},

		InOut: function ( k ) {

			return 0.5 * ( 1 - Math.cos( Math.PI * k ) );

		}

	},

	Exponential: {

		In: function ( k ) {

			return k === 0 ? 0 : Math.pow( 1024, k - 1 );

		},

		Out: function ( k ) {

			return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );

		},

		InOut: function ( k ) {

			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );
			return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );

		}

	},

	Circular: {

		In: function ( k ) {

			return 1 - Math.sqrt( 1 - k * k );

		},

		Out: function ( k ) {

			return Math.sqrt( 1 - ( --k * k ) );

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);
			return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);

		}

	},

	Elastic: {

		In: function ( k ) {

			var s, a = 0.1, p = 0.4;
			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( !a || a < 1 ) { a = 1; s = p / 4; }
			else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );
			return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );

		},

		Out: function ( k ) {

			var s, a = 0.1, p = 0.4;
			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( !a || a < 1 ) { a = 1; s = p / 4; }
			else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );
			return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );

		},

		InOut: function ( k ) {

			var s, a = 0.1, p = 0.4;
			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( !a || a < 1 ) { a = 1; s = p / 4; }
			else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );
			if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );
			return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;

		}

	},

	Back: {

		In: function ( k ) {

			var s = 1.70158;
			return k * k * ( ( s + 1 ) * k - s );

		},

		Out: function ( k ) {

			var s = 1.70158;
			return --k * k * ( ( s + 1 ) * k + s ) + 1;

		},

		InOut: function ( k ) {

			var s = 1.70158 * 1.525;
			if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );
			return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );

		}

	},

	Bounce: {

		In: function ( k ) {

			return 1 - TWEEN.Easing.Bounce.Out( 1 - k );

		},

		Out: function ( k ) {

			if ( k < ( 1 / 2.75 ) ) {

				return 7.5625 * k * k;

			} else if ( k < ( 2 / 2.75 ) ) {

				return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;

			} else if ( k < ( 2.5 / 2.75 ) ) {

				return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;

			} else {

				return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;

			}

		},

		InOut: function ( k ) {

			if ( k < 0.5 ) return TWEEN.Easing.Bounce.In( k * 2 ) * 0.5;
			return TWEEN.Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;

		}

	}

};

TWEEN.Interpolation = {

	Linear: function ( v, k ) {

		var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.Linear;

		if ( k < 0 ) return fn( v[ 0 ], v[ 1 ], f );
		if ( k > 1 ) return fn( v[ m ], v[ m - 1 ], m - f );

		return fn( v[ i ], v[ i + 1 > m ? m : i + 1 ], f - i );

	},

	Bezier: function ( v, k ) {

		var b = 0, n = v.length - 1, pw = Math.pow, bn = TWEEN.Interpolation.Utils.Bernstein, i;

		for ( i = 0; i <= n; i++ ) {
			b += pw( 1 - k, n - i ) * pw( k, i ) * v[ i ] * bn( n, i );
		}

		return b;

	},

	CatmullRom: function ( v, k ) {

		var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.CatmullRom;

		if ( v[ 0 ] === v[ m ] ) {

			if ( k < 0 ) i = Math.floor( f = m * ( 1 + k ) );

			return fn( v[ ( i - 1 + m ) % m ], v[ i ], v[ ( i + 1 ) % m ], v[ ( i + 2 ) % m ], f - i );

		} else {

			if ( k < 0 ) return v[ 0 ] - ( fn( v[ 0 ], v[ 0 ], v[ 1 ], v[ 1 ], -f ) - v[ 0 ] );
			if ( k > 1 ) return v[ m ] - ( fn( v[ m ], v[ m ], v[ m - 1 ], v[ m - 1 ], f - m ) - v[ m ] );

			return fn( v[ i ? i - 1 : 0 ], v[ i ], v[ m < i + 1 ? m : i + 1 ], v[ m < i + 2 ? m : i + 2 ], f - i );

		}

	},

	Utils: {

		Linear: function ( p0, p1, t ) {

			return ( p1 - p0 ) * t + p0;

		},

		Bernstein: function ( n , i ) {

			var fc = TWEEN.Interpolation.Utils.Factorial;
			return fc( n ) / fc( i ) / fc( n - i );

		},

		Factorial: ( function () {

			var a = [ 1 ];

			return function ( n ) {

				var s = 1, i;
				if ( a[ n ] ) return a[ n ];
				for ( i = n; i > 1; i-- ) s *= i;
				return a[ n ] = s;

			};

		} )(),

		CatmullRom: function ( p0, p1, p2, p3, t ) {

			var v0 = ( p2 - p0 ) * 0.5, v1 = ( p3 - p1 ) * 0.5, t2 = t * t, t3 = t * t2;
			return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;

		}

	}

};

},{}],14:[function(require,module,exports){
'use strict';

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = function merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = merge(attrs, a[i]);
    }
    return attrs;
  }
  var ac = a['class'];
  var bc = b['class'];

  if (ac || bc) {
    ac = ac || [];
    bc = bc || [];
    if (!Array.isArray(ac)) ac = [ac];
    if (!Array.isArray(bc)) bc = [bc];
    a['class'] = ac.concat(bc).filter(nulls);
  }

  for (var key in b) {
    if (key != 'class') {
      a[key] = b[key];
    }
  }

  return a;
};

/**
 * Filter null `val`s.
 *
 * @param {*} val
 * @return {Boolean}
 * @api private
 */

function nulls(val) {
  return val != null && val !== '';
}

/**
 * join array as classes.
 *
 * @param {*} val
 * @return {String}
 */
exports.joinClasses = joinClasses;
function joinClasses(val) {
  return (Array.isArray(val) ? val.map(joinClasses) :
    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :
    [val]).filter(nulls).join(' ');
}

/**
 * Render the given classes.
 *
 * @param {Array} classes
 * @param {Array.<Boolean>} escaped
 * @return {String}
 */
exports.cls = function cls(classes, escaped) {
  var buf = [];
  for (var i = 0; i < classes.length; i++) {
    if (escaped && escaped[i]) {
      buf.push(exports.escape(joinClasses([classes[i]])));
    } else {
      buf.push(joinClasses(classes[i]));
    }
  }
  var text = joinClasses(buf);
  if (text.length) {
    return ' class="' + text + '"';
  } else {
    return '';
  }
};


exports.style = function (val) {
  if (val && typeof val === 'object') {
    return Object.keys(val).map(function (style) {
      return style + ':' + val[style];
    }).join(';');
  } else {
    return val;
  }
};
/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = function attr(key, val, escaped, terse) {
  if (key === 'style') {
    val = exports.style(val);
  }
  if ('boolean' == typeof val || null == val) {
    if (val) {
      return ' ' + (terse ? key : key + '="' + key + '"');
    } else {
      return '';
    }
  } else if (0 == key.indexOf('data') && 'string' != typeof val) {
    if (JSON.stringify(val).indexOf('&') !== -1) {
      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +
                   'will be escaped to `&amp;`');
    };
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will eliminate the double quotes around dates in ' +
                   'ISO form after 2.0.0');
    }
    return ' ' + key + "='" + JSON.stringify(val).replace(/'/g, '&apos;') + "'";
  } else if (escaped) {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + exports.escape(val) + '"';
  } else {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + val + '"';
  }
};

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} escaped
 * @return {String}
 */
exports.attrs = function attrs(obj, terse){
  var buf = [];

  var keys = Object.keys(obj);

  if (keys.length) {
    for (var i = 0; i < keys.length; ++i) {
      var key = keys[i]
        , val = obj[key];

      if ('class' == key) {
        if (val = joinClasses(val)) {
          buf.push(' ' + key + '="' + val + '"');
        }
      } else {
        buf.push(exports.attr(key, val, false, terse));
      }
    }
  }

  return buf.join('');
};

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var jade_encode_html_rules = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;'
};
var jade_match_html = /[&<>"]/g;

function jade_encode_char(c) {
  return jade_encode_html_rules[c] || c;
}

exports.escape = jade_escape;
function jade_escape(html){
  var result = String(html).replace(jade_match_html, jade_encode_char);
  if (result === '' + html) return html;
  else return result;
};

/**
 * Re-throw the given `err` in context to the
 * the jade in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @api private
 */

exports.rethrow = function rethrow(err, filename, lineno, str){
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  try {
    str = str || require('fs').readFileSync(filename, 'utf8')
  } catch (ex) {
    rethrow(err, null, lineno)
  }
  var context = 3
    , lines = str.split('\n')
    , start = Math.max(lineno - context, 0)
    , end = Math.min(lines.length, lineno + context);

  // Error context
  var context = lines.slice(start, end).map(function(line, i){
    var curr = i + start + 1;
    return (curr == lineno ? '  > ' : '    ')
      + curr
      + '| '
      + line;
  }).join('\n');

  // Alter exception message
  err.path = filename;
  err.message = (filename || 'Jade') + ':' + lineno
    + '\n' + context + '\n\n' + err.message;
  throw err;
};

exports.DebugItem = function DebugItem(lineno, filename) {
  this.lineno = lineno;
  this.filename = filename;
}
},{"fs":15}],15:[function(require,module,exports){

},{}],16:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
/*
Based off sources from the following codebases:
https://github.com/pickhardt/coffeescript-codemirror-mode
https://github.com/xixixao/TeaTable/blob/master/scripts/compilers/icedcoffeescript/highlighter.coffee
*/


(function() {
  var CodeMirrorIcedCoffeeScript = function (conf) {
    var ERRORCLASS, anyIs, boundaryToken, classIdentifiers, commonConstants, commonKeywords, constantIdentifiers, constants, dedent, doubleDelimiters, doubleOperators, field, functionDeclaration, functionIdentifier, icedKeywords, identifiers, indent, indentKeywords, keywords, longComment, otherKeywords, parenConstructors, regexPrefixes, regexToken, simpleTokenMatcher, singleDelimiters, singleOperators, stringPrefixes, tokenBase, tokenFactory, tokenLexer, tripleDelimiters, wordOperators, wordRegexp;
    ERRORCLASS = 'error';
    wordRegexp = function(words) {
      return new RegExp("^((" + words.join(")|(") + "))\\b");
    };
    singleOperators = new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]");
    singleDelimiters = new RegExp("^[\\(\\)@,`;\\.]");
    doubleOperators = new RegExp("^((=)|(:)|(->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))");
    doubleDelimiters = new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=)|(&&=)|(\\||=))");
    tripleDelimiters = new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))");
    parenConstructors = new RegExp("^[\\[\\]\\{\\}]");
    constantIdentifiers = new RegExp("^[_A-Z$][_A-Z$0-9]+\\b");
    classIdentifiers = new RegExp("^[_A-Z$][_A-Za-z$0-9]*");
    identifiers = new RegExp("^[_a-z$][_A-Za-z$0-9]*");
    field = new RegExp("^@[_A-Za-z$][_A-Za-z$0-9]*");
    functionIdentifier = new RegExp("^[_a-z$][_A-Za-z$0-9]*\\s?(:|=)\\s?(\\([_A-Za-z$0-9@,=\\.\\[\\]\\s]*\\)\\s*)?((->)|(=>))");
    functionDeclaration = new RegExp("^(\\([_A-Za-z$0-9@,=\\.\\[\\]\\s]*\\)\\s*)?((->)|(=>))");
    wordOperators = wordRegexp(['and', 'or', 'not', 'is', 'isnt', 'in', 'instanceof', 'typeof']);
    indentKeywords = ['for', 'while', 'loop', 'if', 'unless', 'else', 'switch', 'try', 'catch', 'finally', 'class'];
    commonKeywords = ['break', 'by', 'continue', 'delete', 'do', 'in', 'of', 'new', 'return', 'then', 'throw', 'when', 'until', 'extends'];
    otherKeywords = wordRegexp(['debugger', 'this']);
    icedKeywords = wordRegexp(['await', 'defer']);
    keywords = wordRegexp(indentKeywords.concat(commonKeywords));
    indentKeywords = wordRegexp(indentKeywords);
    stringPrefixes = new RegExp("^('{3}|\"{3}|['\"])");
    regexPrefixes = new RegExp("^(/{3}|/)");
    commonConstants = ["Infinity", "NaN", "undefined", "null", "true", "false", "on", "off", "yes", "no"];
    constants = wordRegexp(commonConstants);
    tokenBase = function(stream, state) {
      var ch, floatLiteral, lineOffset, scopeOffset, token;
      if (stream.sol()) {
        scopeOffset = state.scopes[0].offset;
        if (stream.eatSpace()) {
          lineOffset = stream.indentation();
          if (lineOffset > scopeOffset) {
            return 'indent';
          } else if (lineOffset < scopeOffset) {
            return 'dedent';
          }
          return null;
        } else if (scopeOffset > 0) {
          dedent(stream, state);
        }
      }
      if (stream.eatSpace()) {
        return null;
      }
      ch = stream.peek();
      if (stream.match("###")) {
        state.tokenize = longComment;
        return state.tokenize(stream, state);
      }
      if (ch === "#") {
        stream.skipToEnd();
        return "comment";
      }
      if (stream.match(/^-?[0-9\.]/, false)) {
        floatLiteral = false;
        if ((stream.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)) || (stream.match(/^-?\d+\.\d*/)) || (stream.match(/^-?\.\d+/))) {
          floatLiteral = true;
        }
        if (floatLiteral) {
          if (stream.peek() === ".") {
            stream.backUp(1);
          }
          return "number";
        }
        if ((stream.match(/^-?0x[0-9a-f]+/i)) || (stream.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)) || (stream.match(/^-?0(?![\dx])/i))) {
          return "number";
        }
      }
      if (stream.match(stringPrefixes)) {
        state.tokenize = tokenFactory(stream.current(), "string");
        return state.tokenize(stream, state);
      }
      if (stream.match(regexPrefixes)) {
        if (stream.current() !== "/" || stream.match(/^.*\//, false)) {
          state.tokenize = regexToken(stream.current(), "string-2");
          return state.tokenize(stream, state);
        } else {
          stream.backUp(1);
        }
      }
      if (stream.match(functionIdentifier, false)) {
        stream.match(identifiers);
        return "functionid";
      }
      token = simpleTokenMatcher(stream, ["functiondec", functionDeclaration, "field", field, "operator", tripleDelimiters, doubleDelimiters, "operator", doubleOperators, singleOperators, wordOperators, "punctuation", singleDelimiters, "atom", constants, "keyword", keywords, "keyword2", otherKeywords, "keyword3", icedKeywords, "constructor", parenConstructors, "constant", constantIdentifiers, "classname", classIdentifiers, "variable", identifiers]);
      if (token) {
        return token;
      }
      stream.next();
      return ERRORCLASS;
    };
    simpleTokenMatcher = function(stream, keysForPatterns) {
      var item, token, tokenMatches, _i, _len;
      token = "";
      tokenMatches = false;
      for (_i = 0, _len = keysForPatterns.length; _i < _len; _i++) {
        item = keysForPatterns[_i];
        if (typeof item === 'string') {
          if (tokenMatches) {
            break;
          }
          token = item;
          tokenMatches = false;
        } else {
          tokenMatches || (tokenMatches = stream.match(item));
        }
      }
      if (tokenMatches) {
        return token;
      } else {
        return null;
      }
    };
    tokenFactory = function(delimiter, outclass) {
      return boundaryToken(delimiter, outclass);
    };
    regexToken = function(delimiter, outclass) {
      return boundaryToken(delimiter, outclass, function(stream) {
        return stream.match(/^[igm]*\b/);
      });
    };
    boundaryToken = function(delimiter, outclass, suffix) {
      var singleline;
      singleline = delimiter.length === 1;
      return function(stream, state) {
        while (!stream.eol()) {
          stream.eatWhile(/[^'"\/\\]/);
          if (stream.eat("\\")) {
            stream.next();
            if (singleline && stream.eol()) {
              return outclass;
            }
          } else if (stream.match(delimiter)) {
            state.tokenize = tokenBase;
            if (suffix) {
              suffix(stream);
            }
            return outclass;
          } else {
            stream.eat(/['"\/]/);
          }
        }
        if (singleline) {
          if (conf.mode.singleLineStringErrors) {
            outclass = ERRORCLASS;
          } else {
            state.tokenize = tokenBase;
          }
        }
        return outclass;
      };
    };
    longComment = function(stream, state) {
      while (!stream.eol()) {
        stream.eatWhile(/[^#]/);
        if (stream.match("###")) {
          state.tokenize = tokenBase;
          break;
        }
        stream.eatWhile("#");
      }
      return "comment";
    };
    indent = function(stream, state, type) {
      var indentUnit, scope, _i, _len, _ref;
      type = type || "coffee";
      indentUnit = 0;
      if (type === "coffee") {
        _ref = state.scopes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          scope = _ref[_i];
          if (scope.type === "coffee") {
            indentUnit = scope.offset + conf.indentUnit;
            break;
          }
        }
      } else {
        indentUnit = stream.column() + stream.current().length;
      }
      return state.scopes.unshift({
        offset: indentUnit,
        type: type
      });
    };
    dedent = function(stream, state) {
      var i, scope, _i, _indent, _indent_index, _len, _ref;
      if (state.scopes.length === 1) {
        return;
      }
      if (state.scopes[0].type === "coffee") {
        _indent = stream.indentation();
        _indent_index = -1;
        _ref = state.scopes;
        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
          scope = _ref[i];
          if (_indent === scope.offset) {
            _indent_index = i;
            break;
          }
        }
        if (_indent_index === -1) {
          return true;
        }
        while (state.scopes[0].offset !== _indent) {
          state.scopes.shift();
        }
        return false;
      } else {
        state.scopes.shift();
        return false;
      }
    };
    tokenLexer = function(stream, state) {
      var current, delimiter_index, style;
      style = state.tokenize(stream, state);
      current = stream.current();
      if (current === ".") {
        style = state.tokenize(stream, state);
        current = stream.current();
        if (anyIs(["variable", "constant", "classname", "functionid"], style)) {
          return style;
        } else {
          return ERRORCLASS;
        }
      }
      if (current === "@") {
        stream.eat("@");
        return "keyword";
      }
      if (current === "return") {
        state.dedent += 1;
      }
      if (((current === "->" || current === "=>") && !state.lambda && state.scopes[0].type === "coffee" && stream.peek() === "") || style === "indent") {
        indent(stream, state);
      }
      delimiter_index = "[({".indexOf(current);
      if (delimiter_index !== -1) {
        indent(stream, state, "])}".slice(delimiter_index, delimiter_index + 1));
      }
      if (indentKeywords.exec(current)) {
        indent(stream, state);
      }
      if (current === "then") {
        dedent(stream, state);
      }
      if (style === "dedent" && dedent(stream, state)) {
        return ERRORCLASS;
      }
      delimiter_index = "])}".indexOf(current);
      if (delimiter_index !== -1 && dedent(stream, state)) {
        return ERRORCLASS;
      }
      if (state.dedent > 0 && stream.eol() && state.scopes[0].type === "coffee") {
        if (state.scopes.length > 1) {
          state.scopes.shift();
        }
        state.dedent -= 1;
      }
      return style;
    };
    anyIs = function(list, what) {
      var item, _i, _len;
      for (_i = 0, _len = list.length; _i < _len; _i++) {
        item = list[_i];
        if (item === what) {
          return true;
        }
      }
      return false;
    };
    return {
      startState: function(basecolumn) {
        return {
          tokenize: tokenBase,
          scopes: [
            {
              offset: basecolumn || 0,
              type: "coffee"
            }
          ],
          lastToken: null,
          lambda: false,
          dedent: 0
        };
      },
      token: function(stream, state) {
        var style;
        style = tokenLexer(stream, state);
        state.lastToken = {
          style: style,
          content: stream.current()
        };
        if (stream.eol() && stream.lambda) {
          state.lambda = false;
        }
        return style;
      },
      indent: function(state, textAfter) {
        if (state.tokenize !== tokenBase) {
          return 0;
        }
        return state.scopes[0].offset;
      }
    };
  };

  if (!CodeMirror && !window.CodeMirror) var CodeMirror = window.CodeMirror = require("codemirror");
  CodeMirror.defineMode("icedcoffeescript", CodeMirrorIcedCoffeeScript);
  CodeMirror.defineMIME("text/x-icedcoffeescript", "icedcoffeescript");
  if (typeof exports == "object" && typeof module == "object") module.exports = CodeMirrorIcedCoffeeScript;

}).call(this);

},{"codemirror":17}],17:[function(require,module,exports){
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// This is CodeMirror (http://codemirror.net), a code editor
// implemented in JavaScript on top of the browser's DOM.
//
// You can find some technical background for some of the code below
// at http://marijnhaverbeke.nl/blog/#cm-internals .

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    module.exports = mod();
  else if (typeof define == "function" && define.amd) // AMD
    return define([], mod);
  else // Plain browser env
    (this || window).CodeMirror = mod();
})(function() {
  "use strict";

  // BROWSER SNIFFING

  // Kludges for bugs and behavior differences that can't be feature
  // detected are enabled based on userAgent etc sniffing.
  var userAgent = navigator.userAgent;
  var platform = navigator.platform;

  var gecko = /gecko\/\d/i.test(userAgent);
  var ie_upto10 = /MSIE \d/.test(userAgent);
  var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);
  var ie = ie_upto10 || ie_11up;
  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);
  var webkit = /WebKit\//.test(userAgent);
  var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(userAgent);
  var chrome = /Chrome\//.test(userAgent);
  var presto = /Opera\//.test(userAgent);
  var safari = /Apple Computer/.test(navigator.vendor);
  var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);
  var phantom = /PhantomJS/.test(userAgent);

  var ios = /AppleWebKit/.test(userAgent) && /Mobile\/\w+/.test(userAgent);
  // This is woefully incomplete. Suggestions for alternative methods welcome.
  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);
  var mac = ios || /Mac/.test(platform);
  var chromeOS = /\bCrOS\b/.test(userAgent);
  var windows = /win/i.test(platform);

  var presto_version = presto && userAgent.match(/Version\/(\d*\.\d*)/);
  if (presto_version) presto_version = Number(presto_version[1]);
  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }
  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X
  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
  var captureRightClick = gecko || (ie && ie_version >= 9);

  // Optimize some code when these features are not used.
  var sawReadOnlySpans = false, sawCollapsedSpans = false;

  // EDITOR CONSTRUCTOR

  // A CodeMirror instance represents an editor. This is the object
  // that user code is usually dealing with.

  function CodeMirror(place, options) {
    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);

    this.options = options = options ? copyObj(options) : {};
    // Determine effective options based on given values and defaults.
    copyObj(defaults, options, false);
    setGuttersForLineNumbers(options);

    var doc = options.value;
    if (typeof doc == "string") doc = new Doc(doc, options.mode, null, options.lineSeparator);
    this.doc = doc;

    var input = new CodeMirror.inputStyles[options.inputStyle](this);
    var display = this.display = new Display(place, doc, input);
    display.wrapper.CodeMirror = this;
    updateGutters(this);
    themeChanged(this);
    if (options.lineWrapping)
      this.display.wrapper.className += " CodeMirror-wrap";
    if (options.autofocus && !mobile) display.input.focus();
    initScrollbars(this);

    this.state = {
      keyMaps: [],  // stores maps added by addKeyMap
      overlays: [], // highlighting overlays, as added by addOverlay
      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info
      overwrite: false,
      delayingBlurEvent: false,
      focused: false,
      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode
      pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll
      selectingText: false,
      draggingText: false,
      highlight: new Delayed(), // stores highlight worker timeout
      keySeq: null,  // Unfinished key sequence
      specialChars: null
    };

    var cm = this;

    // Override magic textarea content restore that IE sometimes does
    // on our hidden textarea on reload
    if (ie && ie_version < 11) setTimeout(function() { cm.display.input.reset(true); }, 20);

    registerEventHandlers(this);
    ensureGlobalHandlers();

    startOperation(this);
    this.curOp.forceUpdate = true;
    attachDoc(this, doc);

    if ((options.autofocus && !mobile) || cm.hasFocus())
      setTimeout(bind(onFocus, this), 20);
    else
      onBlur(this);

    for (var opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))
      optionHandlers[opt](this, options[opt], Init);
    maybeUpdateLineNumberWidth(this);
    if (options.finishInit) options.finishInit(this);
    for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);
    endOperation(this);
    // Suppress optimizelegibility in Webkit, since it breaks text
    // measuring on line wrapping boundaries.
    if (webkit && options.lineWrapping &&
        getComputedStyle(display.lineDiv).textRendering == "optimizelegibility")
      display.lineDiv.style.textRendering = "auto";
  }

  // DISPLAY CONSTRUCTOR

  // The display handles the DOM integration, both for input reading
  // and content drawing. It holds references to DOM nodes and
  // display-related state.

  function Display(place, doc, input) {
    var d = this;
    this.input = input;

    // Covers bottom-right square when both scrollbars are present.
    d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
    d.scrollbarFiller.setAttribute("cm-not-content", "true");
    // Covers bottom of gutter when coverGutterNextToScrollbar is on
    // and h scrollbar is present.
    d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
    d.gutterFiller.setAttribute("cm-not-content", "true");
    // Will contain the actual code, positioned to cover the viewport.
    d.lineDiv = elt("div", null, "CodeMirror-code");
    // Elements are added to these to represent selection and cursors.
    d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
    d.cursorDiv = elt("div", null, "CodeMirror-cursors");
    // A visibility: hidden element used to find the size of things.
    d.measure = elt("div", null, "CodeMirror-measure");
    // When lines outside of the viewport are measured, they are drawn in this.
    d.lineMeasure = elt("div", null, "CodeMirror-measure");
    // Wraps everything that needs to exist inside the vertically-padded coordinate system
    d.lineSpace = elt("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],
                      null, "position: relative; outline: none");
    // Moved around its parent to cover visible view.
    d.mover = elt("div", [elt("div", [d.lineSpace], "CodeMirror-lines")], null, "position: relative");
    // Set to the height of the document, allowing scrolling.
    d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
    d.sizerWidth = null;
    // Behavior of elts with overflow: auto and padding is
    // inconsistent across browsers. This is used to ensure the
    // scrollable area is big enough.
    d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;");
    // Will contain the gutters, if any.
    d.gutters = elt("div", null, "CodeMirror-gutters");
    d.lineGutter = null;
    // Actual scrollable element.
    d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
    d.scroller.setAttribute("tabIndex", "-1");
    // The element in which the editor lives.
    d.wrapper = elt("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");

    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)
    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }
    if (!webkit && !(gecko && mobile)) d.scroller.draggable = true;

    if (place) {
      if (place.appendChild) place.appendChild(d.wrapper);
      else place(d.wrapper);
    }

    // Current rendered range (may be bigger than the view window).
    d.viewFrom = d.viewTo = doc.first;
    d.reportedViewFrom = d.reportedViewTo = doc.first;
    // Information about the rendered lines.
    d.view = [];
    d.renderedView = null;
    // Holds info about a single rendered line when it was rendered
    // for measurement, while not in view.
    d.externalMeasured = null;
    // Empty space (in pixels) above the view
    d.viewOffset = 0;
    d.lastWrapHeight = d.lastWrapWidth = 0;
    d.updateLineNumbers = null;

    d.nativeBarWidth = d.barHeight = d.barWidth = 0;
    d.scrollbarsClipped = false;

    // Used to only resize the line number gutter when necessary (when
    // the amount of lines crosses a boundary that makes its width change)
    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
    // Set to true when a non-horizontal-scrolling line widget is
    // added. As an optimization, line widget aligning is skipped when
    // this is false.
    d.alignWidgets = false;

    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;

    // Tracks the maximum line length so that the horizontal scrollbar
    // can be kept static when scrolling.
    d.maxLine = null;
    d.maxLineLength = 0;
    d.maxLineChanged = false;

    // Used for measuring wheel scrolling granularity
    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;

    // True when shift is held down.
    d.shift = false;

    // Used to track whether anything happened since the context menu
    // was opened.
    d.selForContextMenu = null;

    d.activeTouch = null;

    input.init(d);
  }

  // STATE UPDATES

  // Used to get the editor into a consistent state again when options change.

  function loadMode(cm) {
    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);
    resetModeState(cm);
  }

  function resetModeState(cm) {
    cm.doc.iter(function(line) {
      if (line.stateAfter) line.stateAfter = null;
      if (line.styles) line.styles = null;
    });
    cm.doc.frontier = cm.doc.first;
    startWorker(cm, 100);
    cm.state.modeGen++;
    if (cm.curOp) regChange(cm);
  }

  function wrappingChanged(cm) {
    if (cm.options.lineWrapping) {
      addClass(cm.display.wrapper, "CodeMirror-wrap");
      cm.display.sizer.style.minWidth = "";
      cm.display.sizerWidth = null;
    } else {
      rmClass(cm.display.wrapper, "CodeMirror-wrap");
      findMaxLine(cm);
    }
    estimateLineHeights(cm);
    regChange(cm);
    clearCaches(cm);
    setTimeout(function(){updateScrollbars(cm);}, 100);
  }

  // Returns a function that estimates the height of a line, to use as
  // first approximation until the line becomes visible (and is thus
  // properly measurable).
  function estimateHeight(cm) {
    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
    return function(line) {
      if (lineIsHidden(cm.doc, line)) return 0;

      var widgetsHeight = 0;
      if (line.widgets) for (var i = 0; i < line.widgets.length; i++) {
        if (line.widgets[i].height) widgetsHeight += line.widgets[i].height;
      }

      if (wrapping)
        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
      else
        return widgetsHeight + th;
    };
  }

  function estimateLineHeights(cm) {
    var doc = cm.doc, est = estimateHeight(cm);
    doc.iter(function(line) {
      var estHeight = est(line);
      if (estHeight != line.height) updateLineHeight(line, estHeight);
    });
  }

  function themeChanged(cm) {
    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") +
      cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
    clearCaches(cm);
  }

  function guttersChanged(cm) {
    updateGutters(cm);
    regChange(cm);
    setTimeout(function(){alignHorizontally(cm);}, 20);
  }

  // Rebuild the gutter elements, ensure the margin to the left of the
  // code matches their width.
  function updateGutters(cm) {
    var gutters = cm.display.gutters, specs = cm.options.gutters;
    removeChildren(gutters);
    for (var i = 0; i < specs.length; ++i) {
      var gutterClass = specs[i];
      var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + gutterClass));
      if (gutterClass == "CodeMirror-linenumbers") {
        cm.display.lineGutter = gElt;
        gElt.style.width = (cm.display.lineNumWidth || 1) + "px";
      }
    }
    gutters.style.display = i ? "" : "none";
    updateGutterSpace(cm);
  }

  function updateGutterSpace(cm) {
    var width = cm.display.gutters.offsetWidth;
    cm.display.sizer.style.marginLeft = width + "px";
  }

  // Compute the character length of a line, taking into account
  // collapsed ranges (see markText) that might hide parts, and join
  // other lines onto it.
  function lineLength(line) {
    if (line.height == 0) return 0;
    var len = line.text.length, merged, cur = line;
    while (merged = collapsedSpanAtStart(cur)) {
      var found = merged.find(0, true);
      cur = found.from.line;
      len += found.from.ch - found.to.ch;
    }
    cur = line;
    while (merged = collapsedSpanAtEnd(cur)) {
      var found = merged.find(0, true);
      len -= cur.text.length - found.from.ch;
      cur = found.to.line;
      len += cur.text.length - found.to.ch;
    }
    return len;
  }

  // Find the longest line in the document.
  function findMaxLine(cm) {
    var d = cm.display, doc = cm.doc;
    d.maxLine = getLine(doc, doc.first);
    d.maxLineLength = lineLength(d.maxLine);
    d.maxLineChanged = true;
    doc.iter(function(line) {
      var len = lineLength(line);
      if (len > d.maxLineLength) {
        d.maxLineLength = len;
        d.maxLine = line;
      }
    });
  }

  // Make sure the gutters options contains the element
  // "CodeMirror-linenumbers" when the lineNumbers option is true.
  function setGuttersForLineNumbers(options) {
    var found = indexOf(options.gutters, "CodeMirror-linenumbers");
    if (found == -1 && options.lineNumbers) {
      options.gutters = options.gutters.concat(["CodeMirror-linenumbers"]);
    } else if (found > -1 && !options.lineNumbers) {
      options.gutters = options.gutters.slice(0);
      options.gutters.splice(found, 1);
    }
  }

  // SCROLLBARS

  // Prepare DOM reads needed to update the scrollbars. Done in one
  // shot to minimize update/measure roundtrips.
  function measureForScrollbars(cm) {
    var d = cm.display, gutterW = d.gutters.offsetWidth;
    var docH = Math.round(cm.doc.height + paddingVert(cm.display));
    return {
      clientHeight: d.scroller.clientHeight,
      viewHeight: d.wrapper.clientHeight,
      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,
      viewWidth: d.wrapper.clientWidth,
      barLeft: cm.options.fixedGutter ? gutterW : 0,
      docHeight: docH,
      scrollHeight: docH + scrollGap(cm) + d.barHeight,
      nativeBarWidth: d.nativeBarWidth,
      gutterWidth: gutterW
    };
  }

  function NativeScrollbars(place, scroll, cm) {
    this.cm = cm;
    var vert = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
    var horiz = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
    place(vert); place(horiz);

    on(vert, "scroll", function() {
      if (vert.clientHeight) scroll(vert.scrollTop, "vertical");
    });
    on(horiz, "scroll", function() {
      if (horiz.clientWidth) scroll(horiz.scrollLeft, "horizontal");
    });

    this.checkedZeroWidth = false;
    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).
    if (ie && ie_version < 8) this.horiz.style.minHeight = this.vert.style.minWidth = "18px";
  }

  NativeScrollbars.prototype = copyObj({
    update: function(measure) {
      var needsH = measure.scrollWidth > measure.clientWidth + 1;
      var needsV = measure.scrollHeight > measure.clientHeight + 1;
      var sWidth = measure.nativeBarWidth;

      if (needsV) {
        this.vert.style.display = "block";
        this.vert.style.bottom = needsH ? sWidth + "px" : "0";
        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
        // A bug in IE8 can cause this value to be negative, so guard it.
        this.vert.firstChild.style.height =
          Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
      } else {
        this.vert.style.display = "";
        this.vert.firstChild.style.height = "0";
      }

      if (needsH) {
        this.horiz.style.display = "block";
        this.horiz.style.right = needsV ? sWidth + "px" : "0";
        this.horiz.style.left = measure.barLeft + "px";
        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
        this.horiz.firstChild.style.width =
          (measure.scrollWidth - measure.clientWidth + totalWidth) + "px";
      } else {
        this.horiz.style.display = "";
        this.horiz.firstChild.style.width = "0";
      }

      if (!this.checkedZeroWidth && measure.clientHeight > 0) {
        if (sWidth == 0) this.zeroWidthHack();
        this.checkedZeroWidth = true;
      }

      return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0};
    },
    setScrollLeft: function(pos) {
      if (this.horiz.scrollLeft != pos) this.horiz.scrollLeft = pos;
      if (this.disableHoriz) this.enableZeroWidthBar(this.horiz, this.disableHoriz);
    },
    setScrollTop: function(pos) {
      if (this.vert.scrollTop != pos) this.vert.scrollTop = pos;
      if (this.disableVert) this.enableZeroWidthBar(this.vert, this.disableVert);
    },
    zeroWidthHack: function() {
      var w = mac && !mac_geMountainLion ? "12px" : "18px";
      this.horiz.style.height = this.vert.style.width = w;
      this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none";
      this.disableHoriz = new Delayed;
      this.disableVert = new Delayed;
    },
    enableZeroWidthBar: function(bar, delay) {
      bar.style.pointerEvents = "auto";
      function maybeDisable() {
        // To find out whether the scrollbar is still visible, we
        // check whether the element under the pixel in the bottom
        // left corner of the scrollbar box is the scrollbar box
        // itself (when the bar is still visible) or its filler child
        // (when the bar is hidden). If it is still visible, we keep
        // it enabled, if it's hidden, we disable pointer events.
        var box = bar.getBoundingClientRect();
        var elt = document.elementFromPoint(box.left + 1, box.bottom - 1);
        if (elt != bar) bar.style.pointerEvents = "none";
        else delay.set(1000, maybeDisable);
      }
      delay.set(1000, maybeDisable);
    },
    clear: function() {
      var parent = this.horiz.parentNode;
      parent.removeChild(this.horiz);
      parent.removeChild(this.vert);
    }
  }, NativeScrollbars.prototype);

  function NullScrollbars() {}

  NullScrollbars.prototype = copyObj({
    update: function() { return {bottom: 0, right: 0}; },
    setScrollLeft: function() {},
    setScrollTop: function() {},
    clear: function() {}
  }, NullScrollbars.prototype);

  CodeMirror.scrollbarModel = {"native": NativeScrollbars, "null": NullScrollbars};

  function initScrollbars(cm) {
    if (cm.display.scrollbars) {
      cm.display.scrollbars.clear();
      if (cm.display.scrollbars.addClass)
        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);
    }

    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {
      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);
      // Prevent clicks in the scrollbars from killing focus
      on(node, "mousedown", function() {
        if (cm.state.focused) setTimeout(function() { cm.display.input.focus(); }, 0);
      });
      node.setAttribute("cm-not-content", "true");
    }, function(pos, axis) {
      if (axis == "horizontal") setScrollLeft(cm, pos);
      else setScrollTop(cm, pos);
    }, cm);
    if (cm.display.scrollbars.addClass)
      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
  }

  function updateScrollbars(cm, measure) {
    if (!measure) measure = measureForScrollbars(cm);
    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
    updateScrollbarsInner(cm, measure);
    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {
      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)
        updateHeightsInViewport(cm);
      updateScrollbarsInner(cm, measureForScrollbars(cm));
      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;
    }
  }

  // Re-synchronize the fake scrollbars with the actual size of the
  // content.
  function updateScrollbarsInner(cm, measure) {
    var d = cm.display;
    var sizes = d.scrollbars.update(measure);

    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px";
    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px";
    d.heightForcer.style.borderBottom = sizes.bottom + "px solid transparent"

    if (sizes.right && sizes.bottom) {
      d.scrollbarFiller.style.display = "block";
      d.scrollbarFiller.style.height = sizes.bottom + "px";
      d.scrollbarFiller.style.width = sizes.right + "px";
    } else d.scrollbarFiller.style.display = "";
    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
      d.gutterFiller.style.display = "block";
      d.gutterFiller.style.height = sizes.bottom + "px";
      d.gutterFiller.style.width = measure.gutterWidth + "px";
    } else d.gutterFiller.style.display = "";
  }

  // Compute the lines that are visible in a given viewport (defaults
  // the the current scroll position). viewport may contain top,
  // height, and ensure (see op.scrollToPos) properties.
  function visibleLines(display, doc, viewport) {
    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
    top = Math.floor(top - paddingTop(display));
    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;

    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and
    // forces those lines into the viewport (if possible).
    if (viewport && viewport.ensure) {
      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
      if (ensureFrom < from) {
        from = ensureFrom;
        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);
      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {
        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);
        to = ensureTo;
      }
    }
    return {from: from, to: Math.max(to, from + 1)};
  }

  // LINE NUMBERS

  // Re-align line numbers and gutter marks to compensate for
  // horizontal scrolling.
  function alignHorizontally(cm) {
    var display = cm.display, view = display.view;
    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;
    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
    var gutterW = display.gutters.offsetWidth, left = comp + "px";
    for (var i = 0; i < view.length; i++) if (!view[i].hidden) {
      if (cm.options.fixedGutter && view[i].gutter)
        view[i].gutter.style.left = left;
      var align = view[i].alignable;
      if (align) for (var j = 0; j < align.length; j++)
        align[j].style.left = left;
    }
    if (cm.options.fixedGutter)
      display.gutters.style.left = (comp + gutterW) + "px";
  }

  // Used to ensure that the line number gutter is still the right
  // size for the current document size. Returns true when an update
  // is needed.
  function maybeUpdateLineNumberWidth(cm) {
    if (!cm.options.lineNumbers) return false;
    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
    if (last.length != display.lineNumChars) {
      var test = display.measure.appendChild(elt("div", [elt("div", last)],
                                                 "CodeMirror-linenumber CodeMirror-gutter-elt"));
      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
      display.lineGutter.style.width = "";
      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;
      display.lineNumWidth = display.lineNumInnerWidth + padding;
      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
      display.lineGutter.style.width = display.lineNumWidth + "px";
      updateGutterSpace(cm);
      return true;
    }
    return false;
  }

  function lineNumberFor(options, i) {
    return String(options.lineNumberFormatter(i + options.firstLineNumber));
  }

  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,
  // but using getBoundingClientRect to get a sub-pixel-accurate
  // result.
  function compensateForHScroll(display) {
    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
  }

  // DISPLAY DRAWING

  function DisplayUpdate(cm, viewport, force) {
    var display = cm.display;

    this.viewport = viewport;
    // Store some values that we'll need later (but don't want to force a relayout for)
    this.visible = visibleLines(display, cm.doc, viewport);
    this.editorIsHidden = !display.wrapper.offsetWidth;
    this.wrapperHeight = display.wrapper.clientHeight;
    this.wrapperWidth = display.wrapper.clientWidth;
    this.oldDisplayWidth = displayWidth(cm);
    this.force = force;
    this.dims = getDimensions(cm);
    this.events = [];
  }

  DisplayUpdate.prototype.signal = function(emitter, type) {
    if (hasHandler(emitter, type))
      this.events.push(arguments);
  };
  DisplayUpdate.prototype.finish = function() {
    for (var i = 0; i < this.events.length; i++)
      signal.apply(null, this.events[i]);
  };

  function maybeClipScrollbars(cm) {
    var display = cm.display;
    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {
      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;
      display.heightForcer.style.height = scrollGap(cm) + "px";
      display.sizer.style.marginBottom = -display.nativeBarWidth + "px";
      display.sizer.style.borderRightWidth = scrollGap(cm) + "px";
      display.scrollbarsClipped = true;
    }
  }

  // Does the actual updating of the line display. Bails out
  // (returning false) when there is nothing to be done and forced is
  // false.
  function updateDisplayIfNeeded(cm, update) {
    var display = cm.display, doc = cm.doc;

    if (update.editorIsHidden) {
      resetView(cm);
      return false;
    }

    // Bail out if the visible area is already rendered and nothing changed.
    if (!update.force &&
        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&
        display.renderedView == display.view && countDirtyView(cm) == 0)
      return false;

    if (maybeUpdateLineNumberWidth(cm)) {
      resetView(cm);
      update.dims = getDimensions(cm);
    }

    // Compute a suitable new viewport (from & to)
    var end = doc.first + doc.size;
    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);
    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
    if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom);
    if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo);
    if (sawCollapsedSpans) {
      from = visualLineNo(cm.doc, from);
      to = visualLineEndNo(cm.doc, to);
    }

    var different = from != display.viewFrom || to != display.viewTo ||
      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
    adjustView(cm, from, to);

    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
    // Position the mover div to align with the current scroll position
    cm.display.mover.style.top = display.viewOffset + "px";

    var toUpdate = countDirtyView(cm);
    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))
      return false;

    // For big changes, we hide the enclosing element during the
    // update, since that speeds up the operations on most browsers.
    var focused = activeElt();
    if (toUpdate > 4) display.lineDiv.style.display = "none";
    patchDisplay(cm, display.updateLineNumbers, update.dims);
    if (toUpdate > 4) display.lineDiv.style.display = "";
    display.renderedView = display.view;
    // There might have been a widget with a focused element that got
    // hidden or updated, if so re-focus it.
    if (focused && activeElt() != focused && focused.offsetHeight) focused.focus();

    // Prevent selection and cursors from interfering with the scroll
    // width and height.
    removeChildren(display.cursorDiv);
    removeChildren(display.selectionDiv);
    display.gutters.style.height = display.sizer.style.minHeight = 0;

    if (different) {
      display.lastWrapHeight = update.wrapperHeight;
      display.lastWrapWidth = update.wrapperWidth;
      startWorker(cm, 400);
    }

    display.updateLineNumbers = null;

    return true;
  }

  function postUpdateDisplay(cm, update) {
    var viewport = update.viewport;

    for (var first = true;; first = false) {
      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {
        // Clip forced viewport to actual scrollable area.
        if (viewport && viewport.top != null)
          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};
        // Updated line heights might result in the drawn area not
        // actually covering the viewport. Keep looping until it does.
        update.visible = visibleLines(cm.display, cm.doc, viewport);
        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)
          break;
      }
      if (!updateDisplayIfNeeded(cm, update)) break;
      updateHeightsInViewport(cm);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      updateScrollbars(cm, barMeasure);
      setDocumentHeight(cm, barMeasure);
    }

    update.signal(cm, "update", cm);
    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {
      update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;
    }
  }

  function updateDisplaySimple(cm, viewport) {
    var update = new DisplayUpdate(cm, viewport);
    if (updateDisplayIfNeeded(cm, update)) {
      updateHeightsInViewport(cm);
      postUpdateDisplay(cm, update);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      updateScrollbars(cm, barMeasure);
      setDocumentHeight(cm, barMeasure);
      update.finish();
    }
  }

  function setDocumentHeight(cm, measure) {
    cm.display.sizer.style.minHeight = measure.docHeight + "px";
    cm.display.heightForcer.style.top = measure.docHeight + "px";
    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + "px";
  }

  // Read the actual heights of the rendered lines, and update their
  // stored heights to match.
  function updateHeightsInViewport(cm) {
    var display = cm.display;
    var prevBottom = display.lineDiv.offsetTop;
    for (var i = 0; i < display.view.length; i++) {
      var cur = display.view[i], height;
      if (cur.hidden) continue;
      if (ie && ie_version < 8) {
        var bot = cur.node.offsetTop + cur.node.offsetHeight;
        height = bot - prevBottom;
        prevBottom = bot;
      } else {
        var box = cur.node.getBoundingClientRect();
        height = box.bottom - box.top;
      }
      var diff = cur.line.height - height;
      if (height < 2) height = textHeight(display);
      if (diff > .001 || diff < -.001) {
        updateLineHeight(cur.line, height);
        updateWidgetHeight(cur.line);
        if (cur.rest) for (var j = 0; j < cur.rest.length; j++)
          updateWidgetHeight(cur.rest[j]);
      }
    }
  }

  // Read and store the height of line widgets associated with the
  // given line.
  function updateWidgetHeight(line) {
    if (line.widgets) for (var i = 0; i < line.widgets.length; ++i)
      line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;
  }

  // Do a bulk-read of the DOM positions and sizes needed to draw the
  // view, so that we don't interleave reading and writing to the DOM.
  function getDimensions(cm) {
    var d = cm.display, left = {}, width = {};
    var gutterLeft = d.gutters.clientLeft;
    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {
      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;
      width[cm.options.gutters[i]] = n.clientWidth;
    }
    return {fixedPos: compensateForHScroll(d),
            gutterTotalWidth: d.gutters.offsetWidth,
            gutterLeft: left,
            gutterWidth: width,
            wrapperWidth: d.wrapper.clientWidth};
  }

  // Sync the actual display DOM structure with display.view, removing
  // nodes for lines that are no longer in view, and creating the ones
  // that are not there yet, and updating the ones that are out of
  // date.
  function patchDisplay(cm, updateNumbersFrom, dims) {
    var display = cm.display, lineNumbers = cm.options.lineNumbers;
    var container = display.lineDiv, cur = container.firstChild;

    function rm(node) {
      var next = node.nextSibling;
      // Works around a throw-scroll bug in OS X Webkit
      if (webkit && mac && cm.display.currentWheelTarget == node)
        node.style.display = "none";
      else
        node.parentNode.removeChild(node);
      return next;
    }

    var view = display.view, lineN = display.viewFrom;
    // Loop over the elements in the view, syncing cur (the DOM nodes
    // in display.lineDiv) with the view as we go.
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (lineView.hidden) {
      } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet
        var node = buildLineElement(cm, lineView, lineN, dims);
        container.insertBefore(node, cur);
      } else { // Already drawn
        while (cur != lineView.node) cur = rm(cur);
        var updateNumber = lineNumbers && updateNumbersFrom != null &&
          updateNumbersFrom <= lineN && lineView.lineNumber;
        if (lineView.changes) {
          if (indexOf(lineView.changes, "gutter") > -1) updateNumber = false;
          updateLineForChanges(cm, lineView, lineN, dims);
        }
        if (updateNumber) {
          removeChildren(lineView.lineNumber);
          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
        }
        cur = lineView.node.nextSibling;
      }
      lineN += lineView.size;
    }
    while (cur) cur = rm(cur);
  }

  // When an aspect of a line changes, a string is added to
  // lineView.changes. This updates the relevant part of the line's
  // DOM structure.
  function updateLineForChanges(cm, lineView, lineN, dims) {
    for (var j = 0; j < lineView.changes.length; j++) {
      var type = lineView.changes[j];
      if (type == "text") updateLineText(cm, lineView);
      else if (type == "gutter") updateLineGutter(cm, lineView, lineN, dims);
      else if (type == "class") updateLineClasses(lineView);
      else if (type == "widget") updateLineWidgets(cm, lineView, dims);
    }
    lineView.changes = null;
  }

  // Lines with gutter elements, widgets or a background class need to
  // be wrapped, and have the extra elements added to the wrapper div
  function ensureLineWrapped(lineView) {
    if (lineView.node == lineView.text) {
      lineView.node = elt("div", null, null, "position: relative");
      if (lineView.text.parentNode)
        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
      lineView.node.appendChild(lineView.text);
      if (ie && ie_version < 8) lineView.node.style.zIndex = 2;
    }
    return lineView.node;
  }

  function updateLineBackground(lineView) {
    var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
    if (cls) cls += " CodeMirror-linebackground";
    if (lineView.background) {
      if (cls) lineView.background.className = cls;
      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }
    } else if (cls) {
      var wrap = ensureLineWrapped(lineView);
      lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
    }
  }

  // Wrapper around buildLineContent which will reuse the structure
  // in display.externalMeasured when possible.
  function getLineContent(cm, lineView) {
    var ext = cm.display.externalMeasured;
    if (ext && ext.line == lineView.line) {
      cm.display.externalMeasured = null;
      lineView.measure = ext.measure;
      return ext.built;
    }
    return buildLineContent(cm, lineView);
  }

  // Redraw the line's text. Interacts with the background and text
  // classes because the mode may output tokens that influence these
  // classes.
  function updateLineText(cm, lineView) {
    var cls = lineView.text.className;
    var built = getLineContent(cm, lineView);
    if (lineView.text == lineView.node) lineView.node = built.pre;
    lineView.text.parentNode.replaceChild(built.pre, lineView.text);
    lineView.text = built.pre;
    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
      lineView.bgClass = built.bgClass;
      lineView.textClass = built.textClass;
      updateLineClasses(lineView);
    } else if (cls) {
      lineView.text.className = cls;
    }
  }

  function updateLineClasses(lineView) {
    updateLineBackground(lineView);
    if (lineView.line.wrapClass)
      ensureLineWrapped(lineView).className = lineView.line.wrapClass;
    else if (lineView.node != lineView.text)
      lineView.node.className = "";
    var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
    lineView.text.className = textClass || "";
  }

  function updateLineGutter(cm, lineView, lineN, dims) {
    if (lineView.gutter) {
      lineView.node.removeChild(lineView.gutter);
      lineView.gutter = null;
    }
    if (lineView.gutterBackground) {
      lineView.node.removeChild(lineView.gutterBackground);
      lineView.gutterBackground = null;
    }
    if (lineView.line.gutterClass) {
      var wrap = ensureLineWrapped(lineView);
      lineView.gutterBackground = elt("div", null, "CodeMirror-gutter-background " + lineView.line.gutterClass,
                                      "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) +
                                      "px; width: " + dims.gutterTotalWidth + "px");
      wrap.insertBefore(lineView.gutterBackground, lineView.text);
    }
    var markers = lineView.line.gutterMarkers;
    if (cm.options.lineNumbers || markers) {
      var wrap = ensureLineWrapped(lineView);
      var gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " +
                                             (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px");
      cm.display.input.setUneditable(gutterWrap);
      wrap.insertBefore(gutterWrap, lineView.text);
      if (lineView.line.gutterClass)
        gutterWrap.className += " " + lineView.line.gutterClass;
      if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"]))
        lineView.lineNumber = gutterWrap.appendChild(
          elt("div", lineNumberFor(cm.options, lineN),
              "CodeMirror-linenumber CodeMirror-gutter-elt",
              "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: "
              + cm.display.lineNumInnerWidth + "px"));
      if (markers) for (var k = 0; k < cm.options.gutters.length; ++k) {
        var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];
        if (found)
          gutterWrap.appendChild(elt("div", [found], "CodeMirror-gutter-elt", "left: " +
                                     dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
      }
    }
  }

  function updateLineWidgets(cm, lineView, dims) {
    if (lineView.alignable) lineView.alignable = null;
    for (var node = lineView.node.firstChild, next; node; node = next) {
      var next = node.nextSibling;
      if (node.className == "CodeMirror-linewidget")
        lineView.node.removeChild(node);
    }
    insertLineWidgets(cm, lineView, dims);
  }

  // Build a line's DOM representation from scratch
  function buildLineElement(cm, lineView, lineN, dims) {
    var built = getLineContent(cm, lineView);
    lineView.text = lineView.node = built.pre;
    if (built.bgClass) lineView.bgClass = built.bgClass;
    if (built.textClass) lineView.textClass = built.textClass;

    updateLineClasses(lineView);
    updateLineGutter(cm, lineView, lineN, dims);
    insertLineWidgets(cm, lineView, dims);
    return lineView.node;
  }

  // A lineView may contain multiple logical lines (when merged by
  // collapsed spans). The widgets for all of them need to be drawn.
  function insertLineWidgets(cm, lineView, dims) {
    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);
    if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
      insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);
  }

  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
    if (!line.widgets) return;
    var wrap = ensureLineWrapped(lineView);
    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {
      var widget = ws[i], node = elt("div", [widget.node], "CodeMirror-linewidget");
      if (!widget.handleMouseEvents) node.setAttribute("cm-ignore-events", "true");
      positionLineWidget(widget, node, lineView, dims);
      cm.display.input.setUneditable(node);
      if (allowAbove && widget.above)
        wrap.insertBefore(node, lineView.gutter || lineView.text);
      else
        wrap.appendChild(node);
      signalLater(widget, "redraw");
    }
  }

  function positionLineWidget(widget, node, lineView, dims) {
    if (widget.noHScroll) {
      (lineView.alignable || (lineView.alignable = [])).push(node);
      var width = dims.wrapperWidth;
      node.style.left = dims.fixedPos + "px";
      if (!widget.coverGutter) {
        width -= dims.gutterTotalWidth;
        node.style.paddingLeft = dims.gutterTotalWidth + "px";
      }
      node.style.width = width + "px";
    }
    if (widget.coverGutter) {
      node.style.zIndex = 5;
      node.style.position = "relative";
      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + "px";
    }
  }

  // POSITION OBJECT

  // A Pos instance represents a position within the text.
  var Pos = CodeMirror.Pos = function(line, ch) {
    if (!(this instanceof Pos)) return new Pos(line, ch);
    this.line = line; this.ch = ch;
  };

  // Compare two positions, return 0 if they are the same, a negative
  // number when a is less, and a positive number otherwise.
  var cmp = CodeMirror.cmpPos = function(a, b) { return a.line - b.line || a.ch - b.ch; };

  function copyPos(x) {return Pos(x.line, x.ch);}
  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a; }
  function minPos(a, b) { return cmp(a, b) < 0 ? a : b; }

  // INPUT HANDLING

  function ensureFocus(cm) {
    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }
  }

  // This will be set to an array of strings when copying, so that,
  // when pasting, we know what kind of selections the copied text
  // was made out of.
  var lastCopied = null;

  function applyTextInput(cm, inserted, deleted, sel, origin) {
    var doc = cm.doc;
    cm.display.shift = false;
    if (!sel) sel = doc.sel;

    var paste = cm.state.pasteIncoming || origin == "paste";
    var textLines = doc.splitLines(inserted), multiPaste = null;
    // When pasing N lines into N selections, insert one line per selection
    if (paste && sel.ranges.length > 1) {
      if (lastCopied && lastCopied.join("\n") == inserted) {
        if (sel.ranges.length % lastCopied.length == 0) {
          multiPaste = [];
          for (var i = 0; i < lastCopied.length; i++)
            multiPaste.push(doc.splitLines(lastCopied[i]));
        }
      } else if (textLines.length == sel.ranges.length) {
        multiPaste = map(textLines, function(l) { return [l]; });
      }
    }

    // Normal behavior is to insert the new text into every selection
    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      var from = range.from(), to = range.to();
      if (range.empty()) {
        if (deleted && deleted > 0) // Handle deletion
          from = Pos(from.line, from.ch - deleted);
        else if (cm.state.overwrite && !paste) // Handle overwrite
          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));
      }
      var updateInput = cm.curOp.updateInput;
      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,
                         origin: origin || (paste ? "paste" : cm.state.cutIncoming ? "cut" : "+input")};
      makeChange(cm.doc, changeEvent);
      signalLater(cm, "inputRead", cm, changeEvent);
    }
    if (inserted && !paste)
      triggerElectric(cm, inserted);

    ensureCursorVisible(cm);
    cm.curOp.updateInput = updateInput;
    cm.curOp.typing = true;
    cm.state.pasteIncoming = cm.state.cutIncoming = false;
  }

  function handlePaste(e, cm) {
    var pasted = e.clipboardData && e.clipboardData.getData("text/plain");
    if (pasted) {
      e.preventDefault();
      if (!cm.isReadOnly() && !cm.options.disableInput)
        runInOp(cm, function() { applyTextInput(cm, pasted, 0, null, "paste"); });
      return true;
    }
  }

  function triggerElectric(cm, inserted) {
    // When an 'electric' character is inserted, immediately trigger a reindent
    if (!cm.options.electricChars || !cm.options.smartIndent) return;
    var sel = cm.doc.sel;

    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) continue;
      var mode = cm.getModeAt(range.head);
      var indented = false;
      if (mode.electricChars) {
        for (var j = 0; j < mode.electricChars.length; j++)
          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
            indented = indentLine(cm, range.head.line, "smart");
            break;
          }
      } else if (mode.electricInput) {
        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))
          indented = indentLine(cm, range.head.line, "smart");
      }
      if (indented) signalLater(cm, "electricInput", cm, range.head.line);
    }
  }

  function copyableRanges(cm) {
    var text = [], ranges = [];
    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {
      var line = cm.doc.sel.ranges[i].head.line;
      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};
      ranges.push(lineRange);
      text.push(cm.getRange(lineRange.anchor, lineRange.head));
    }
    return {text: text, ranges: ranges};
  }

  function disableBrowserMagic(field) {
    field.setAttribute("autocorrect", "off");
    field.setAttribute("autocapitalize", "off");
    field.setAttribute("spellcheck", "false");
  }

  // TEXTAREA INPUT STYLE

  function TextareaInput(cm) {
    this.cm = cm;
    // See input.poll and input.reset
    this.prevInput = "";

    // Flag that indicates whether we expect input to appear real soon
    // now (after some event like 'keypress' or 'input') and are
    // polling intensively.
    this.pollingFast = false;
    // Self-resetting timeout for the poller
    this.polling = new Delayed();
    // Tracks when input.reset has punted to just putting a short
    // string into the textarea instead of the full selection.
    this.inaccurateSelection = false;
    // Used to work around IE issue with selection being forgotten when focus moves away from textarea
    this.hasSelection = false;
    this.composing = null;
  };

  function hiddenTextarea() {
    var te = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none");
    var div = elt("div", [te], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
    // The textarea is kept positioned near the cursor to prevent the
    // fact that it'll be scrolled into view on input from scrolling
    // our fake cursor out of view. On webkit, when wrap=off, paste is
    // very slow. So make the area wide instead.
    if (webkit) te.style.width = "1000px";
    else te.setAttribute("wrap", "off");
    // If border: 0; -- iOS fails to open keyboard (issue #1287)
    if (ios) te.style.border = "1px solid black";
    disableBrowserMagic(te);
    return div;
  }

  TextareaInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = this.cm;

      // Wraps and hides input textarea
      var div = this.wrapper = hiddenTextarea();
      // The semihidden textarea that is focused when the editor is
      // focused, and receives input.
      var te = this.textarea = div.firstChild;
      display.wrapper.insertBefore(div, display.wrapper.firstChild);

      // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)
      if (ios) te.style.width = "0px";

      on(te, "input", function() {
        if (ie && ie_version >= 9 && input.hasSelection) input.hasSelection = null;
        input.poll();
      });

      on(te, "paste", function(e) {
        if (signalDOMEvent(cm, e) || handlePaste(e, cm)) return

        cm.state.pasteIncoming = true;
        input.fastPoll();
      });

      function prepareCopyCut(e) {
        if (signalDOMEvent(cm, e)) return
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (input.inaccurateSelection) {
            input.prevInput = "";
            input.inaccurateSelection = false;
            te.value = lastCopied.join("\n");
            selectInput(te);
          }
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.setSelections(ranges.ranges, null, sel_dontScroll);
          } else {
            input.prevInput = "";
            te.value = ranges.text.join("\n");
            selectInput(te);
          }
        }
        if (e.type == "cut") cm.state.cutIncoming = true;
      }
      on(te, "cut", prepareCopyCut);
      on(te, "copy", prepareCopyCut);

      on(display.scroller, "paste", function(e) {
        if (eventInWidget(display, e) || signalDOMEvent(cm, e)) return;
        cm.state.pasteIncoming = true;
        input.focus();
      });

      // Prevent normal selection in the editor (we handle our own)
      on(display.lineSpace, "selectstart", function(e) {
        if (!eventInWidget(display, e)) e_preventDefault(e);
      });

      on(te, "compositionstart", function() {
        var start = cm.getCursor("from");
        if (input.composing) input.composing.range.clear()
        input.composing = {
          start: start,
          range: cm.markText(start, cm.getCursor("to"), {className: "CodeMirror-composing"})
        };
      });
      on(te, "compositionend", function() {
        if (input.composing) {
          input.poll();
          input.composing.range.clear();
          input.composing = null;
        }
      });
    },

    prepareSelection: function() {
      // Redraw the selection and/or cursor
      var cm = this.cm, display = cm.display, doc = cm.doc;
      var result = prepareSelection(cm);

      // Move the hidden textarea near the cursor to prevent scrolling artifacts
      if (cm.options.moveInputWithCursor) {
        var headPos = cursorCoords(cm, doc.sel.primary().head, "div");
        var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,
                                            headPos.top + lineOff.top - wrapOff.top));
        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,
                                             headPos.left + lineOff.left - wrapOff.left));
      }

      return result;
    },

    showSelection: function(drawn) {
      var cm = this.cm, display = cm.display;
      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);
      removeChildrenAndAdd(display.selectionDiv, drawn.selection);
      if (drawn.teTop != null) {
        this.wrapper.style.top = drawn.teTop + "px";
        this.wrapper.style.left = drawn.teLeft + "px";
      }
    },

    // Reset the input to correspond to the selection (or to be empty,
    // when not typing and nothing is selected)
    reset: function(typing) {
      if (this.contextMenuPending) return;
      var minimal, selected, cm = this.cm, doc = cm.doc;
      if (cm.somethingSelected()) {
        this.prevInput = "";
        var range = doc.sel.primary();
        minimal = hasCopyEvent &&
          (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);
        var content = minimal ? "-" : selected || cm.getSelection();
        this.textarea.value = content;
        if (cm.state.focused) selectInput(this.textarea);
        if (ie && ie_version >= 9) this.hasSelection = content;
      } else if (!typing) {
        this.prevInput = this.textarea.value = "";
        if (ie && ie_version >= 9) this.hasSelection = null;
      }
      this.inaccurateSelection = minimal;
    },

    getField: function() { return this.textarea; },

    supportsTouch: function() { return false; },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor" && (!mobile || activeElt() != this.textarea)) {
        try { this.textarea.focus(); }
        catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM
      }
    },

    blur: function() { this.textarea.blur(); },

    resetPosition: function() {
      this.wrapper.style.top = this.wrapper.style.left = 0;
    },

    receivedFocus: function() { this.slowPoll(); },

    // Poll for input changes, using the normal rate of polling. This
    // runs as long as the editor is focused.
    slowPoll: function() {
      var input = this;
      if (input.pollingFast) return;
      input.polling.set(this.cm.options.pollInterval, function() {
        input.poll();
        if (input.cm.state.focused) input.slowPoll();
      });
    },

    // When an event has just come in that is likely to add or change
    // something in the input textarea, we poll faster, to ensure that
    // the change appears on the screen quickly.
    fastPoll: function() {
      var missed = false, input = this;
      input.pollingFast = true;
      function p() {
        var changed = input.poll();
        if (!changed && !missed) {missed = true; input.polling.set(60, p);}
        else {input.pollingFast = false; input.slowPoll();}
      }
      input.polling.set(20, p);
    },

    // Read input from the textarea, and update the document to match.
    // When something is selected, it is present in the textarea, and
    // selected (unless it is huge, in which case a placeholder is
    // used). When nothing is selected, the cursor sits after previously
    // seen text (can be empty), which is stored in prevInput (we must
    // not reset the textarea when typing, because that breaks IME).
    poll: function() {
      var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
      // Since this is called a *lot*, try to bail out as cheaply as
      // possible when it is clear that nothing happened. hasSelection
      // will be the case when there is a lot of text in the textarea,
      // in which case reading its value would be expensive.
      if (this.contextMenuPending || !cm.state.focused ||
          (hasSelection(input) && !prevInput && !this.composing) ||
          cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)
        return false;

      var text = input.value;
      // If nothing changed, bail.
      if (text == prevInput && !cm.somethingSelected()) return false;
      // Work around nonsensical selection resetting in IE9/10, and
      // inexplicable appearance of private area unicode characters on
      // some key combos in Mac (#2689).
      if (ie && ie_version >= 9 && this.hasSelection === text ||
          mac && /[\uf700-\uf7ff]/.test(text)) {
        cm.display.input.reset();
        return false;
      }

      if (cm.doc.sel == cm.display.selForContextMenu) {
        var first = text.charCodeAt(0);
        if (first == 0x200b && !prevInput) prevInput = "\u200b";
        if (first == 0x21da) { this.reset(); return this.cm.execCommand("undo"); }
      }
      // Find the part of the input that is actually new
      var same = 0, l = Math.min(prevInput.length, text.length);
      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;

      var self = this;
      runInOp(cm, function() {
        applyTextInput(cm, text.slice(same), prevInput.length - same,
                       null, self.composing ? "*compose" : null);

        // Don't leave long text in the textarea, since it makes further polling slow
        if (text.length > 1000 || text.indexOf("\n") > -1) input.value = self.prevInput = "";
        else self.prevInput = text;

        if (self.composing) {
          self.composing.range.clear();
          self.composing.range = cm.markText(self.composing.start, cm.getCursor("to"),
                                             {className: "CodeMirror-composing"});
        }
      });
      return true;
    },

    ensurePolled: function() {
      if (this.pollingFast && this.poll()) this.pollingFast = false;
    },

    onKeyPress: function() {
      if (ie && ie_version >= 9) this.hasSelection = null;
      this.fastPoll();
    },

    onContextMenu: function(e) {
      var input = this, cm = input.cm, display = cm.display, te = input.textarea;
      var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
      if (!pos || presto) return; // Opera is difficult.

      // Reset the current text selection only if the click is done outside of the selection
      // and 'resetSelectionOnContextMenu' option is true.
      var reset = cm.options.resetSelectionOnContextMenu;
      if (reset && cm.doc.sel.contains(pos) == -1)
        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);

      var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;
      input.wrapper.style.cssText = "position: absolute"
      var wrapperBox = input.wrapper.getBoundingClientRect()
      te.style.cssText = "position: absolute; width: 30px; height: 30px; top: " + (e.clientY - wrapperBox.top - 5) +
        "px; left: " + (e.clientX - wrapperBox.left - 5) + "px; z-index: 1000; background: " +
        (ie ? "rgba(255, 255, 255, .05)" : "transparent") +
        "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
      if (webkit) var oldScrollY = window.scrollY; // Work around Chrome issue (#2712)
      display.input.focus();
      if (webkit) window.scrollTo(null, oldScrollY);
      display.input.reset();
      // Adds "Select all" to context menu in FF
      if (!cm.somethingSelected()) te.value = input.prevInput = " ";
      input.contextMenuPending = true;
      display.selForContextMenu = cm.doc.sel;
      clearTimeout(display.detectingSelectAll);

      // Select-all will be greyed out if there's nothing to select, so
      // this adds a zero-width space so that we can later check whether
      // it got selected.
      function prepareSelectAllHack() {
        if (te.selectionStart != null) {
          var selected = cm.somethingSelected();
          var extval = "\u200b" + (selected ? te.value : "");
          te.value = "\u21da"; // Used to catch context-menu undo
          te.value = extval;
          input.prevInput = selected ? "" : "\u200b";
          te.selectionStart = 1; te.selectionEnd = extval.length;
          // Re-set this, in case some other handler touched the
          // selection in the meantime.
          display.selForContextMenu = cm.doc.sel;
        }
      }
      function rehide() {
        input.contextMenuPending = false;
        input.wrapper.style.cssText = oldWrapperCSS
        te.style.cssText = oldCSS;
        if (ie && ie_version < 9) display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);

        // Try to detect the user choosing select-all
        if (te.selectionStart != null) {
          if (!ie || (ie && ie_version < 9)) prepareSelectAllHack();
          var i = 0, poll = function() {
            if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&
                te.selectionEnd > 0 && input.prevInput == "\u200b")
              operation(cm, commands.selectAll)(cm);
            else if (i++ < 10) display.detectingSelectAll = setTimeout(poll, 500);
            else display.input.reset();
          };
          display.detectingSelectAll = setTimeout(poll, 200);
        }
      }

      if (ie && ie_version >= 9) prepareSelectAllHack();
      if (captureRightClick) {
        e_stop(e);
        var mouseup = function() {
          off(window, "mouseup", mouseup);
          setTimeout(rehide, 20);
        };
        on(window, "mouseup", mouseup);
      } else {
        setTimeout(rehide, 50);
      }
    },

    readOnlyChanged: function(val) {
      if (!val) this.reset();
    },

    setUneditable: nothing,

    needsContentAttribute: false
  }, TextareaInput.prototype);

  // CONTENTEDITABLE INPUT STYLE

  function ContentEditableInput(cm) {
    this.cm = cm;
    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
    this.polling = new Delayed();
    this.gracePeriod = false;
  }

  ContentEditableInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = input.cm;
      var div = input.div = display.lineDiv;
      disableBrowserMagic(div);

      on(div, "paste", function(e) {
        if (!signalDOMEvent(cm, e)) handlePaste(e, cm);
      })

      on(div, "compositionstart", function(e) {
        var data = e.data;
        input.composing = {sel: cm.doc.sel, data: data, startData: data};
        if (!data) return;
        var prim = cm.doc.sel.primary();
        var line = cm.getLine(prim.head.line);
        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));
        if (found > -1 && found <= prim.head.ch)
          input.composing.sel = simpleSelection(Pos(prim.head.line, found),
                                                Pos(prim.head.line, found + data.length));
      });
      on(div, "compositionupdate", function(e) {
        input.composing.data = e.data;
      });
      on(div, "compositionend", function(e) {
        var ours = input.composing;
        if (!ours) return;
        if (e.data != ours.startData && !/\u200b/.test(e.data))
          ours.data = e.data;
        // Need a small delay to prevent other code (input event,
        // selection polling) from doing damage when fired right after
        // compositionend.
        setTimeout(function() {
          if (!ours.handled)
            input.applyComposition(ours);
          if (input.composing == ours)
            input.composing = null;
        }, 50);
      });

      on(div, "touchstart", function() {
        input.forceCompositionEnd();
      });

      on(div, "input", function() {
        if (input.composing) return;
        if (cm.isReadOnly() || !input.pollContent())
          runInOp(input.cm, function() {regChange(cm);});
      });

      function onCopyCut(e) {
        if (signalDOMEvent(cm, e)) return
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (e.type == "cut") cm.replaceSelection("", null, "cut");
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.operation(function() {
              cm.setSelections(ranges.ranges, 0, sel_dontScroll);
              cm.replaceSelection("", null, "cut");
            });
          }
        }
        // iOS exposes the clipboard API, but seems to discard content inserted into it
        if (e.clipboardData && !ios) {
          e.preventDefault();
          e.clipboardData.clearData();
          e.clipboardData.setData("text/plain", lastCopied.join("\n"));
        } else {
          // Old-fashioned briefly-focus-a-textarea hack
          var kludge = hiddenTextarea(), te = kludge.firstChild;
          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);
          te.value = lastCopied.join("\n");
          var hadFocus = document.activeElement;
          selectInput(te);
          setTimeout(function() {
            cm.display.lineSpace.removeChild(kludge);
            hadFocus.focus();
          }, 50);
        }
      }
      on(div, "copy", onCopyCut);
      on(div, "cut", onCopyCut);
    },

    prepareSelection: function() {
      var result = prepareSelection(this.cm, false);
      result.focus = this.cm.state.focused;
      return result;
    },

    showSelection: function(info) {
      if (!info || !this.cm.display.view.length) return;
      if (info.focus) this.showPrimarySelection();
      this.showMultipleSelections(info);
    },

    showPrimarySelection: function() {
      var sel = window.getSelection(), prim = this.cm.doc.sel.primary();
      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);
      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);
      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&
          cmp(minPos(curAnchor, curFocus), prim.from()) == 0 &&
          cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)
        return;

      var start = posToDOM(this.cm, prim.from());
      var end = posToDOM(this.cm, prim.to());
      if (!start && !end) return;

      var view = this.cm.display.view;
      var old = sel.rangeCount && sel.getRangeAt(0);
      if (!start) {
        start = {node: view[0].measure.map[2], offset: 0};
      } else if (!end) { // FIXME dangerously hacky
        var measure = view[view.length - 1].measure;
        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
        end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};
      }

      try { var rng = range(start.node, start.offset, end.offset, end.node); }
      catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible
      if (rng) {
        if (!gecko && this.cm.state.focused) {
          sel.collapse(start.node, start.offset);
          if (!rng.collapsed) sel.addRange(rng);
        } else {
          sel.removeAllRanges();
          sel.addRange(rng);
        }
        if (old && sel.anchorNode == null) sel.addRange(old);
        else if (gecko) this.startGracePeriod();
      }
      this.rememberSelection();
    },

    startGracePeriod: function() {
      var input = this;
      clearTimeout(this.gracePeriod);
      this.gracePeriod = setTimeout(function() {
        input.gracePeriod = false;
        if (input.selectionChanged())
          input.cm.operation(function() { input.cm.curOp.selectionChanged = true; });
      }, 20);
    },

    showMultipleSelections: function(info) {
      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);
      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
    },

    rememberSelection: function() {
      var sel = window.getSelection();
      this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;
      this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;
    },

    selectionInEditor: function() {
      var sel = window.getSelection();
      if (!sel.rangeCount) return false;
      var node = sel.getRangeAt(0).commonAncestorContainer;
      return contains(this.div, node);
    },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor") this.div.focus();
    },
    blur: function() { this.div.blur(); },
    getField: function() { return this.div; },

    supportsTouch: function() { return true; },

    receivedFocus: function() {
      var input = this;
      if (this.selectionInEditor())
        this.pollSelection();
      else
        runInOp(this.cm, function() { input.cm.curOp.selectionChanged = true; });

      function poll() {
        if (input.cm.state.focused) {
          input.pollSelection();
          input.polling.set(input.cm.options.pollInterval, poll);
        }
      }
      this.polling.set(this.cm.options.pollInterval, poll);
    },

    selectionChanged: function() {
      var sel = window.getSelection();
      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||
        sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
    },

    pollSelection: function() {
      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
        var sel = window.getSelection(), cm = this.cm;
        this.rememberSelection();
        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
        var head = domToPos(cm, sel.focusNode, sel.focusOffset);
        if (anchor && head) runInOp(cm, function() {
          setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);
          if (anchor.bad || head.bad) cm.curOp.selectionChanged = true;
        });
      }
    },

    pollContent: function() {
      var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();
      var from = sel.from(), to = sel.to();
      if (from.line < display.viewFrom || to.line > display.viewTo - 1) return false;

      var fromIndex;
      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {
        var fromLine = lineNo(display.view[0].line);
        var fromNode = display.view[0].node;
      } else {
        var fromLine = lineNo(display.view[fromIndex].line);
        var fromNode = display.view[fromIndex - 1].node.nextSibling;
      }
      var toIndex = findViewIndex(cm, to.line);
      if (toIndex == display.view.length - 1) {
        var toLine = display.viewTo - 1;
        var toNode = display.lineDiv.lastChild;
      } else {
        var toLine = lineNo(display.view[toIndex + 1].line) - 1;
        var toNode = display.view[toIndex + 1].node.previousSibling;
      }

      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));
      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));
      while (newText.length > 1 && oldText.length > 1) {
        if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }
        else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }
        else break;
      }

      var cutFront = 0, cutEnd = 0;
      var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);
      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))
        ++cutFront;
      var newBot = lst(newText), oldBot = lst(oldText);
      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),
                               oldBot.length - (oldText.length == 1 ? cutFront : 0));
      while (cutEnd < maxCutEnd &&
             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))
        ++cutEnd;

      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);
      newText[0] = newText[0].slice(cutFront);

      var chFrom = Pos(fromLine, cutFront);
      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {
        replaceRange(cm.doc, newText, chFrom, chTo, "+input");
        return true;
      }
    },

    ensurePolled: function() {
      this.forceCompositionEnd();
    },
    reset: function() {
      this.forceCompositionEnd();
    },
    forceCompositionEnd: function() {
      if (!this.composing || this.composing.handled) return;
      this.applyComposition(this.composing);
      this.composing.handled = true;
      this.div.blur();
      this.div.focus();
    },
    applyComposition: function(composing) {
      if (this.cm.isReadOnly())
        operation(this.cm, regChange)(this.cm)
      else if (composing.data && composing.data != composing.startData)
        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);
    },

    setUneditable: function(node) {
      node.contentEditable = "false"
    },

    onKeyPress: function(e) {
      e.preventDefault();
      if (!this.cm.isReadOnly())
        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);
    },

    readOnlyChanged: function(val) {
      this.div.contentEditable = String(val != "nocursor")
    },

    onContextMenu: nothing,
    resetPosition: nothing,

    needsContentAttribute: true
  }, ContentEditableInput.prototype);

  function posToDOM(cm, pos) {
    var view = findViewForLine(cm, pos.line);
    if (!view || view.hidden) return null;
    var line = getLine(cm.doc, pos.line);
    var info = mapFromLineView(view, line, pos.line);

    var order = getOrder(line), side = "left";
    if (order) {
      var partPos = getBidiPartAt(order, pos.ch);
      side = partPos % 2 ? "right" : "left";
    }
    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
    result.offset = result.collapse == "right" ? result.end : result.start;
    return result;
  }

  function badPos(pos, bad) { if (bad) pos.bad = true; return pos; }

  function domToPos(cm, node, offset) {
    var lineNode;
    if (node == cm.display.lineDiv) {
      lineNode = cm.display.lineDiv.childNodes[offset];
      if (!lineNode) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);
      node = null; offset = 0;
    } else {
      for (lineNode = node;; lineNode = lineNode.parentNode) {
        if (!lineNode || lineNode == cm.display.lineDiv) return null;
        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break;
      }
    }
    for (var i = 0; i < cm.display.view.length; i++) {
      var lineView = cm.display.view[i];
      if (lineView.node == lineNode)
        return locateNodeInLineView(lineView, node, offset);
    }
  }

  function locateNodeInLineView(lineView, node, offset) {
    var wrapper = lineView.text.firstChild, bad = false;
    if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), true);
    if (node == wrapper) {
      bad = true;
      node = wrapper.childNodes[offset];
      offset = 0;
      if (!node) {
        var line = lineView.rest ? lst(lineView.rest) : lineView.line;
        return badPos(Pos(lineNo(line), line.text.length), bad);
      }
    }

    var textNode = node.nodeType == 3 ? node : null, topNode = node;
    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {
      textNode = node.firstChild;
      if (offset) offset = textNode.nodeValue.length;
    }
    while (topNode.parentNode != wrapper) topNode = topNode.parentNode;
    var measure = lineView.measure, maps = measure.maps;

    function find(textNode, topNode, offset) {
      for (var i = -1; i < (maps ? maps.length : 0); i++) {
        var map = i < 0 ? measure.map : maps[i];
        for (var j = 0; j < map.length; j += 3) {
          var curNode = map[j + 2];
          if (curNode == textNode || curNode == topNode) {
            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);
            var ch = map[j] + offset;
            if (offset < 0 || curNode != textNode) ch = map[j + (offset ? 1 : 0)];
            return Pos(line, ch);
          }
        }
      }
    }
    var found = find(textNode, topNode, offset);
    if (found) return badPos(found, bad);

    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems
    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
      found = find(after, after.firstChild, 0);
      if (found)
        return badPos(Pos(found.line, found.ch - dist), bad);
      else
        dist += after.textContent.length;
    }
    for (var before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {
      found = find(before, before.firstChild, -1);
      if (found)
        return badPos(Pos(found.line, found.ch + dist), bad);
      else
        dist += after.textContent.length;
    }
  }

  function domTextBetween(cm, from, to, fromLine, toLine) {
    var text = "", closing = false, lineSep = cm.doc.lineSeparator();
    function recognizeMarker(id) { return function(marker) { return marker.id == id; }; }
    function walk(node) {
      if (node.nodeType == 1) {
        var cmText = node.getAttribute("cm-text");
        if (cmText != null) {
          if (cmText == "") cmText = node.textContent.replace(/\u200b/g, "");
          text += cmText;
          return;
        }
        var markerID = node.getAttribute("cm-marker"), range;
        if (markerID) {
          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
          if (found.length && (range = found[0].find()))
            text += getBetween(cm.doc, range.from, range.to).join(lineSep);
          return;
        }
        if (node.getAttribute("contenteditable") == "false") return;
        for (var i = 0; i < node.childNodes.length; i++)
          walk(node.childNodes[i]);
        if (/^(pre|div|p)$/i.test(node.nodeName))
          closing = true;
      } else if (node.nodeType == 3) {
        var val = node.nodeValue;
        if (!val) return;
        if (closing) {
          text += lineSep;
          closing = false;
        }
        text += val;
      }
    }
    for (;;) {
      walk(from);
      if (from == to) break;
      from = from.nextSibling;
    }
    return text;
  }

  CodeMirror.inputStyles = {"textarea": TextareaInput, "contenteditable": ContentEditableInput};

  // SELECTION / CURSOR

  // Selection objects are immutable. A new one is created every time
  // the selection changes. A selection is one or more non-overlapping
  // (and non-touching) ranges, sorted, and an integer that indicates
  // which one is the primary selection (the one that's scrolled into
  // view, that getCursor returns, etc).
  function Selection(ranges, primIndex) {
    this.ranges = ranges;
    this.primIndex = primIndex;
  }

  Selection.prototype = {
    primary: function() { return this.ranges[this.primIndex]; },
    equals: function(other) {
      if (other == this) return true;
      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false;
      for (var i = 0; i < this.ranges.length; i++) {
        var here = this.ranges[i], there = other.ranges[i];
        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0) return false;
      }
      return true;
    },
    deepCopy: function() {
      for (var out = [], i = 0; i < this.ranges.length; i++)
        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));
      return new Selection(out, this.primIndex);
    },
    somethingSelected: function() {
      for (var i = 0; i < this.ranges.length; i++)
        if (!this.ranges[i].empty()) return true;
      return false;
    },
    contains: function(pos, end) {
      if (!end) end = pos;
      for (var i = 0; i < this.ranges.length; i++) {
        var range = this.ranges[i];
        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)
          return i;
      }
      return -1;
    }
  };

  function Range(anchor, head) {
    this.anchor = anchor; this.head = head;
  }

  Range.prototype = {
    from: function() { return minPos(this.anchor, this.head); },
    to: function() { return maxPos(this.anchor, this.head); },
    empty: function() {
      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
    }
  };

  // Take an unsorted, potentially overlapping set of ranges, and
  // build a selection out of it. 'Consumes' ranges array (modifying
  // it).
  function normalizeSelection(ranges, primIndex) {
    var prim = ranges[primIndex];
    ranges.sort(function(a, b) { return cmp(a.from(), b.from()); });
    primIndex = indexOf(ranges, prim);
    for (var i = 1; i < ranges.length; i++) {
      var cur = ranges[i], prev = ranges[i - 1];
      if (cmp(prev.to(), cur.from()) >= 0) {
        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
        if (i <= primIndex) --primIndex;
        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));
      }
    }
    return new Selection(ranges, primIndex);
  }

  function simpleSelection(anchor, head) {
    return new Selection([new Range(anchor, head || anchor)], 0);
  }

  // Most of the external API clips given positions to make sure they
  // actually exist within the document.
  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}
  function clipPos(doc, pos) {
    if (pos.line < doc.first) return Pos(doc.first, 0);
    var last = doc.first + doc.size - 1;
    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);
    return clipToLen(pos, getLine(doc, pos.line).text.length);
  }
  function clipToLen(pos, linelen) {
    var ch = pos.ch;
    if (ch == null || ch > linelen) return Pos(pos.line, linelen);
    else if (ch < 0) return Pos(pos.line, 0);
    else return pos;
  }
  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}
  function clipPosArray(doc, array) {
    for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);
    return out;
  }

  // SELECTION UPDATES

  // The 'scroll' parameter given to many of these indicated whether
  // the new cursor position should be scrolled into view after
  // modifying the selection.

  // If shift is held or the extend flag is set, extends a range to
  // include a given position (and optionally a second position).
  // Otherwise, simply returns the range between the given positions.
  // Used for cursor motion and such.
  function extendRange(doc, range, head, other) {
    if (doc.cm && doc.cm.display.shift || doc.extend) {
      var anchor = range.anchor;
      if (other) {
        var posBefore = cmp(head, anchor) < 0;
        if (posBefore != (cmp(other, anchor) < 0)) {
          anchor = head;
          head = other;
        } else if (posBefore != (cmp(head, other) < 0)) {
          head = other;
        }
      }
      return new Range(anchor, head);
    } else {
      return new Range(other || head, head);
    }
  }

  // Extend the primary selection range, discard the rest.
  function extendSelection(doc, head, other, options) {
    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);
  }

  // Extend all selections (pos is an array of selections with length
  // equal the number of selections)
  function extendSelections(doc, heads, options) {
    for (var out = [], i = 0; i < doc.sel.ranges.length; i++)
      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);
    var newSel = normalizeSelection(out, doc.sel.primIndex);
    setSelection(doc, newSel, options);
  }

  // Updates a single range in the selection.
  function replaceOneSelection(doc, i, range, options) {
    var ranges = doc.sel.ranges.slice(0);
    ranges[i] = range;
    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);
  }

  // Reset the selection to a single range.
  function setSimpleSelection(doc, anchor, head, options) {
    setSelection(doc, simpleSelection(anchor, head), options);
  }

  // Give beforeSelectionChange handlers a change to influence a
  // selection update.
  function filterSelectionChange(doc, sel, options) {
    var obj = {
      ranges: sel.ranges,
      update: function(ranges) {
        this.ranges = [];
        for (var i = 0; i < ranges.length; i++)
          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),
                                     clipPos(doc, ranges[i].head));
      },
      origin: options && options.origin
    };
    signal(doc, "beforeSelectionChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeSelectionChange", doc.cm, obj);
    if (obj.ranges != sel.ranges) return normalizeSelection(obj.ranges, obj.ranges.length - 1);
    else return sel;
  }

  function setSelectionReplaceHistory(doc, sel, options) {
    var done = doc.history.done, last = lst(done);
    if (last && last.ranges) {
      done[done.length - 1] = sel;
      setSelectionNoUndo(doc, sel, options);
    } else {
      setSelection(doc, sel, options);
    }
  }

  // Set a new selection.
  function setSelection(doc, sel, options) {
    setSelectionNoUndo(doc, sel, options);
    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
  }

  function setSelectionNoUndo(doc, sel, options) {
    if (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange"))
      sel = filterSelectionChange(doc, sel, options);

    var bias = options && options.bias ||
      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);
    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));

    if (!(options && options.scroll === false) && doc.cm)
      ensureCursorVisible(doc.cm);
  }

  function setSelectionInner(doc, sel) {
    if (sel.equals(doc.sel)) return;

    doc.sel = sel;

    if (doc.cm) {
      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;
      signalCursorActivity(doc.cm);
    }
    signalLater(doc, "cursorActivity", doc);
  }

  // Verify that the selection does not partially select any atomic
  // marked ranges.
  function reCheckSelection(doc) {
    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);
  }

  // Return a selection that does not partially select any atomic
  // ranges.
  function skipAtomicInSelection(doc, sel, bias, mayClear) {
    var out;
    for (var i = 0; i < sel.ranges.length; i++) {
      var range = sel.ranges[i];
      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];
      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);
      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);
      if (out || newAnchor != range.anchor || newHead != range.head) {
        if (!out) out = sel.ranges.slice(0, i);
        out[i] = new Range(newAnchor, newHead);
      }
    }
    return out ? normalizeSelection(out, sel.primIndex) : sel;
  }

  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {
    var line = getLine(doc, pos.line);
    if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
      var sp = line.markedSpans[i], m = sp.marker;
      if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&
          (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {
        if (mayClear) {
          signal(m, "beforeCursorEnter");
          if (m.explicitlyCleared) {
            if (!line.markedSpans) break;
            else {--i; continue;}
          }
        }
        if (!m.atomic) continue;

        if (oldPos) {
          var near = m.find(dir < 0 ? 1 : -1), diff;
          if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)
            near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);
          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))
            return skipAtomicInner(doc, near, pos, dir, mayClear);
        }

        var far = m.find(dir < 0 ? -1 : 1);
        if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)
          far = movePos(doc, far, dir, far.line == pos.line ? line : null);
        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;
      }
    }
    return pos;
  }

  // Ensure a given position is not inside an atomic range.
  function skipAtomic(doc, pos, oldPos, bias, mayClear) {
    var dir = bias || 1;
    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||
        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||
        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||
        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));
    if (!found) {
      doc.cantEdit = true;
      return Pos(doc.first, 0);
    }
    return found;
  }

  function movePos(doc, pos, dir, line) {
    if (dir < 0 && pos.ch == 0) {
      if (pos.line > doc.first) return clipPos(doc, Pos(pos.line - 1));
      else return null;
    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {
      if (pos.line < doc.first + doc.size - 1) return Pos(pos.line + 1, 0);
      else return null;
    } else {
      return new Pos(pos.line, pos.ch + dir);
    }
  }

  // SELECTION DRAWING

  function updateSelection(cm) {
    cm.display.input.showSelection(cm.display.input.prepareSelection());
  }

  function prepareSelection(cm, primary) {
    var doc = cm.doc, result = {};
    var curFragment = result.cursors = document.createDocumentFragment();
    var selFragment = result.selection = document.createDocumentFragment();

    for (var i = 0; i < doc.sel.ranges.length; i++) {
      if (primary === false && i == doc.sel.primIndex) continue;
      var range = doc.sel.ranges[i];
      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) continue;
      var collapsed = range.empty();
      if (collapsed || cm.options.showCursorWhenSelecting)
        drawSelectionCursor(cm, range.head, curFragment);
      if (!collapsed)
        drawSelectionRange(cm, range, selFragment);
    }
    return result;
  }

  // Draws a cursor for the given range
  function drawSelectionCursor(cm, head, output) {
    var pos = cursorCoords(cm, head, "div", null, null, !cm.options.singleCursorHeightPerLine);

    var cursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor"));
    cursor.style.left = pos.left + "px";
    cursor.style.top = pos.top + "px";
    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";

    if (pos.other) {
      // Secondary cursor, shown when on a 'jump' in bi-directional text
      var otherCursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor CodeMirror-secondarycursor"));
      otherCursor.style.display = "";
      otherCursor.style.left = pos.other.left + "px";
      otherCursor.style.top = pos.other.top + "px";
      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + "px";
    }
  }

  // Draws the given range as a highlighted selection
  function drawSelectionRange(cm, range, output) {
    var display = cm.display, doc = cm.doc;
    var fragment = document.createDocumentFragment();
    var padding = paddingH(cm.display), leftSide = padding.left;
    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;

    function add(left, top, width, bottom) {
      if (top < 0) top = 0;
      top = Math.round(top);
      bottom = Math.round(bottom);
      fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left +
                               "px; top: " + top + "px; width: " + (width == null ? rightSide - left : width) +
                               "px; height: " + (bottom - top) + "px"));
    }

    function drawForLine(line, fromArg, toArg) {
      var lineObj = getLine(doc, line);
      var lineLen = lineObj.text.length;
      var start, end;
      function coords(ch, bias) {
        return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
      }

      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {
        var leftPos = coords(from, "left"), rightPos, left, right;
        if (from == to) {
          rightPos = leftPos;
          left = right = leftPos.left;
        } else {
          rightPos = coords(to - 1, "right");
          if (dir == "rtl") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }
          left = leftPos.left;
          right = rightPos.right;
        }
        if (fromArg == null && from == 0) left = leftSide;
        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part
          add(left, leftPos.top, null, leftPos.bottom);
          left = leftSide;
          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);
        }
        if (toArg == null && to == lineLen) right = rightSide;
        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)
          start = leftPos;
        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)
          end = rightPos;
        if (left < leftSide + 1) left = leftSide;
        add(left, rightPos.top, right - left, rightPos.bottom);
      });
      return {start: start, end: end};
    }

    var sFrom = range.from(), sTo = range.to();
    if (sFrom.line == sTo.line) {
      drawForLine(sFrom.line, sFrom.ch, sTo.ch);
    } else {
      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);
      var singleVLine = visualLine(fromLine) == visualLine(toLine);
      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
      if (singleVLine) {
        if (leftEnd.top < rightStart.top - 2) {
          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
        } else {
          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
        }
      }
      if (leftEnd.bottom < rightStart.top)
        add(leftSide, leftEnd.bottom, null, rightStart.top);
    }

    output.appendChild(fragment);
  }

  // Cursor-blinking
  function restartBlink(cm) {
    if (!cm.state.focused) return;
    var display = cm.display;
    clearInterval(display.blinker);
    var on = true;
    display.cursorDiv.style.visibility = "";
    if (cm.options.cursorBlinkRate > 0)
      display.blinker = setInterval(function() {
        display.cursorDiv.style.visibility = (on = !on) ? "" : "hidden";
      }, cm.options.cursorBlinkRate);
    else if (cm.options.cursorBlinkRate < 0)
      display.cursorDiv.style.visibility = "hidden";
  }

  // HIGHLIGHT WORKER

  function startWorker(cm, time) {
    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)
      cm.state.highlight.set(time, bind(highlightWorker, cm));
  }

  function highlightWorker(cm) {
    var doc = cm.doc;
    if (doc.frontier < doc.first) doc.frontier = doc.first;
    if (doc.frontier >= cm.display.viewTo) return;
    var end = +new Date + cm.options.workTime;
    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));
    var changedLines = [];

    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
      if (doc.frontier >= cm.display.viewFrom) { // Visible
        var oldStyles = line.styles, tooLong = line.text.length > cm.options.maxHighlightLength;
        var highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, true);
        line.styles = highlighted.styles;
        var oldCls = line.styleClasses, newCls = highlighted.classes;
        if (newCls) line.styleClasses = newCls;
        else if (oldCls) line.styleClasses = null;
        var ischange = !oldStyles || oldStyles.length != line.styles.length ||
          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];
        if (ischange) changedLines.push(doc.frontier);
        line.stateAfter = tooLong ? state : copyState(doc.mode, state);
      } else {
        if (line.text.length <= cm.options.maxHighlightLength)
          processLine(cm, line.text, state);
        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;
      }
      ++doc.frontier;
      if (+new Date > end) {
        startWorker(cm, cm.options.workDelay);
        return true;
      }
    });
    if (changedLines.length) runInOp(cm, function() {
      for (var i = 0; i < changedLines.length; i++)
        regLineChange(cm, changedLines[i], "text");
    });
  }

  // Finds the line to start with when starting a parse. Tries to
  // find a line with a stateAfter, so that it can start with a
  // valid state. If that fails, it returns the line with the
  // smallest indentation, which tends to need the least context to
  // parse correctly.
  function findStartLine(cm, n, precise) {
    var minindent, minline, doc = cm.doc;
    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);
    for (var search = n; search > lim; --search) {
      if (search <= doc.first) return doc.first;
      var line = getLine(doc, search - 1);
      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;
      var indented = countColumn(line.text, null, cm.options.tabSize);
      if (minline == null || minindent > indented) {
        minline = search - 1;
        minindent = indented;
      }
    }
    return minline;
  }

  function getStateBefore(cm, n, precise) {
    var doc = cm.doc, display = cm.display;
    if (!doc.mode.startState) return true;
    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;
    if (!state) state = startState(doc.mode);
    else state = copyState(doc.mode, state);
    doc.iter(pos, n, function(line) {
      processLine(cm, line.text, state);
      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;
      line.stateAfter = save ? copyState(doc.mode, state) : null;
      ++pos;
    });
    if (precise) doc.frontier = pos;
    return state;
  }

  // POSITION MEASUREMENT

  function paddingTop(display) {return display.lineSpace.offsetTop;}
  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}
  function paddingH(display) {
    if (display.cachedPaddingH) return display.cachedPaddingH;
    var e = removeChildrenAndAdd(display.measure, elt("pre", "x"));
    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};
    if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data;
    return data;
  }

  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth; }
  function displayWidth(cm) {
    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
  }
  function displayHeight(cm) {
    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
  }

  // Ensure the lineView.wrapping.heights array is populated. This is
  // an array of bottom offsets for the lines that make up a drawn
  // line. When lineWrapping is on, there might be more than one
  // height.
  function ensureLineHeights(cm, lineView, rect) {
    var wrapping = cm.options.lineWrapping;
    var curWidth = wrapping && displayWidth(cm);
    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
      var heights = lineView.measure.heights = [];
      if (wrapping) {
        lineView.measure.width = curWidth;
        var rects = lineView.text.firstChild.getClientRects();
        for (var i = 0; i < rects.length - 1; i++) {
          var cur = rects[i], next = rects[i + 1];
          if (Math.abs(cur.bottom - next.bottom) > 2)
            heights.push((cur.bottom + next.top) / 2 - rect.top);
        }
      }
      heights.push(rect.bottom - rect.top);
    }
  }

  // Find a line map (mapping character offsets to text nodes) and a
  // measurement cache for the given line number. (A line view might
  // contain multiple lines when collapsed ranges are present.)
  function mapFromLineView(lineView, line, lineN) {
    if (lineView.line == line)
      return {map: lineView.measure.map, cache: lineView.measure.cache};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineView.rest[i] == line)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineNo(lineView.rest[i]) > lineN)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true};
  }

  // Render a line into the hidden node display.externalMeasured. Used
  // when measurement is needed for a line that's not in the viewport.
  function updateExternalMeasurement(cm, line) {
    line = visualLine(line);
    var lineN = lineNo(line);
    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
    view.lineN = lineN;
    var built = view.built = buildLineContent(cm, view);
    view.text = built.pre;
    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
    return view;
  }

  // Get a {top, bottom, left, right} box (in line-local coordinates)
  // for a given character.
  function measureChar(cm, line, ch, bias) {
    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
  }

  // Find a line view that corresponds to the given line number.
  function findViewForLine(cm, lineN) {
    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)
      return cm.display.view[findViewIndex(cm, lineN)];
    var ext = cm.display.externalMeasured;
    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)
      return ext;
  }

  // Measurement can be split in two steps, the set-up work that
  // applies to the whole line, and the measurement of the actual
  // character. Functions like coordsChar, that need to do a lot of
  // measurements in a row, can thus ensure that the set-up work is
  // only done once.
  function prepareMeasureForLine(cm, line) {
    var lineN = lineNo(line);
    var view = findViewForLine(cm, lineN);
    if (view && !view.text) {
      view = null;
    } else if (view && view.changes) {
      updateLineForChanges(cm, view, lineN, getDimensions(cm));
      cm.curOp.forceUpdate = true;
    }
    if (!view)
      view = updateExternalMeasurement(cm, line);

    var info = mapFromLineView(view, line, lineN);
    return {
      line: line, view: view, rect: null,
      map: info.map, cache: info.cache, before: info.before,
      hasHeights: false
    };
  }

  // Given a prepared measurement object, measures the position of an
  // actual character (or fetches it from the cache).
  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
    if (prepared.before) ch = -1;
    var key = ch + (bias || ""), found;
    if (prepared.cache.hasOwnProperty(key)) {
      found = prepared.cache[key];
    } else {
      if (!prepared.rect)
        prepared.rect = prepared.view.text.getBoundingClientRect();
      if (!prepared.hasHeights) {
        ensureLineHeights(cm, prepared.view, prepared.rect);
        prepared.hasHeights = true;
      }
      found = measureCharInner(cm, prepared, ch, bias);
      if (!found.bogus) prepared.cache[key] = found;
    }
    return {left: found.left, right: found.right,
            top: varHeight ? found.rtop : found.top,
            bottom: varHeight ? found.rbottom : found.bottom};
  }

  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};

  function nodeAndOffsetInLineMap(map, ch, bias) {
    var node, start, end, collapse;
    // First, search the line map for the text node corresponding to,
    // or closest to, the target character.
    for (var i = 0; i < map.length; i += 3) {
      var mStart = map[i], mEnd = map[i + 1];
      if (ch < mStart) {
        start = 0; end = 1;
        collapse = "left";
      } else if (ch < mEnd) {
        start = ch - mStart;
        end = start + 1;
      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {
        end = mEnd - mStart;
        start = end - 1;
        if (ch >= mEnd) collapse = "right";
      }
      if (start != null) {
        node = map[i + 2];
        if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right"))
          collapse = bias;
        if (bias == "left" && start == 0)
          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {
            node = map[(i -= 3) + 2];
            collapse = "left";
          }
        if (bias == "right" && start == mEnd - mStart)
          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {
            node = map[(i += 3) + 2];
            collapse = "right";
          }
        break;
      }
    }
    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd};
  }

  function measureCharInner(cm, prepared, ch, bias) {
    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);
    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;

    var rect;
    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.
      for (var i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned
        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) --start;
        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) ++end;
        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {
          rect = node.parentNode.getBoundingClientRect();
        } else if (ie && cm.options.lineWrapping) {
          var rects = range(node, start, end).getClientRects();
          if (rects.length)
            rect = rects[bias == "right" ? rects.length - 1 : 0];
          else
            rect = nullRect;
        } else {
          rect = range(node, start, end).getBoundingClientRect() || nullRect;
        }
        if (rect.left || rect.right || start == 0) break;
        end = start;
        start = start - 1;
        collapse = "right";
      }
      if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect);
    } else { // If it is a widget, simply get the box for the whole widget.
      if (start > 0) collapse = bias = "right";
      var rects;
      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)
        rect = rects[bias == "right" ? rects.length - 1 : 0];
      else
        rect = node.getBoundingClientRect();
    }
    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
      var rSpan = node.parentNode.getClientRects()[0];
      if (rSpan)
        rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};
      else
        rect = nullRect;
    }

    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
    var mid = (rtop + rbot) / 2;
    var heights = prepared.view.measure.heights;
    for (var i = 0; i < heights.length - 1; i++)
      if (mid < heights[i]) break;
    var top = i ? heights[i - 1] : 0, bot = heights[i];
    var result = {left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
                  right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
                  top: top, bottom: bot};
    if (!rect.left && !rect.right) result.bogus = true;
    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }

    return result;
  }

  // Work around problem with bounding client rects on ranges being
  // returned incorrectly when zoomed on IE10 and below.
  function maybeUpdateRectForZooming(measure, rect) {
    if (!window.screen || screen.logicalXDPI == null ||
        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))
      return rect;
    var scaleX = screen.logicalXDPI / screen.deviceXDPI;
    var scaleY = screen.logicalYDPI / screen.deviceYDPI;
    return {left: rect.left * scaleX, right: rect.right * scaleX,
            top: rect.top * scaleY, bottom: rect.bottom * scaleY};
  }

  function clearLineMeasurementCacheFor(lineView) {
    if (lineView.measure) {
      lineView.measure.cache = {};
      lineView.measure.heights = null;
      if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
        lineView.measure.caches[i] = {};
    }
  }

  function clearLineMeasurementCache(cm) {
    cm.display.externalMeasure = null;
    removeChildren(cm.display.lineMeasure);
    for (var i = 0; i < cm.display.view.length; i++)
      clearLineMeasurementCacheFor(cm.display.view[i]);
  }

  function clearCaches(cm) {
    clearLineMeasurementCache(cm);
    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;
    cm.display.lineNumChars = null;
  }

  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }
  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }

  // Converts a {top, bottom, left, right} box from line-local
  // coordinates into another coordinate system. Context may be one of
  // "line", "div" (display.lineDiv), "local"/null (editor), "window",
  // or "page".
  function intoCoordSystem(cm, lineObj, rect, context) {
    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {
      var size = widgetHeight(lineObj.widgets[i]);
      rect.top += size; rect.bottom += size;
    }
    if (context == "line") return rect;
    if (!context) context = "local";
    var yOff = heightAtLine(lineObj);
    if (context == "local") yOff += paddingTop(cm.display);
    else yOff -= cm.display.viewOffset;
    if (context == "page" || context == "window") {
      var lOff = cm.display.lineSpace.getBoundingClientRect();
      yOff += lOff.top + (context == "window" ? 0 : pageScrollY());
      var xOff = lOff.left + (context == "window" ? 0 : pageScrollX());
      rect.left += xOff; rect.right += xOff;
    }
    rect.top += yOff; rect.bottom += yOff;
    return rect;
  }

  // Coverts a box from "div" coords to another coordinate system.
  // Context may be "window", "page", "div", or "local"/null.
  function fromCoordSystem(cm, coords, context) {
    if (context == "div") return coords;
    var left = coords.left, top = coords.top;
    // First move into "page" coordinate system
    if (context == "page") {
      left -= pageScrollX();
      top -= pageScrollY();
    } else if (context == "local" || !context) {
      var localBox = cm.display.sizer.getBoundingClientRect();
      left += localBox.left;
      top += localBox.top;
    }

    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};
  }

  function charCoords(cm, pos, context, lineObj, bias) {
    if (!lineObj) lineObj = getLine(cm.doc, pos.line);
    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
  }

  // Returns a box for a given cursor position, which may have an
  // 'other' property containing the position of the secondary cursor
  // on a bidi boundary.
  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
    lineObj = lineObj || getLine(cm.doc, pos.line);
    if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj);
    function get(ch, right) {
      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? "right" : "left", varHeight);
      if (right) m.left = m.right; else m.right = m.left;
      return intoCoordSystem(cm, lineObj, m, context);
    }
    function getBidi(ch, partPos) {
      var part = order[partPos], right = part.level % 2;
      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {
        part = order[--partPos];
        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);
        right = true;
      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {
        part = order[++partPos];
        ch = bidiLeft(part) - part.level % 2;
        right = false;
      }
      if (right && ch == part.to && ch > part.from) return get(ch - 1);
      return get(ch, right);
    }
    var order = getOrder(lineObj), ch = pos.ch;
    if (!order) return get(ch);
    var partPos = getBidiPartAt(order, ch);
    var val = getBidi(ch, partPos);
    if (bidiOther != null) val.other = getBidi(ch, bidiOther);
    return val;
  }

  // Used to cheaply estimate the coordinates for a position. Used for
  // intermediate scroll updates.
  function estimateCoords(cm, pos) {
    var left = 0, pos = clipPos(cm.doc, pos);
    if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch;
    var lineObj = getLine(cm.doc, pos.line);
    var top = heightAtLine(lineObj) + paddingTop(cm.display);
    return {left: left, right: left, top: top, bottom: top + lineObj.height};
  }

  // Positions returned by coordsChar contain some extra information.
  // xRel is the relative x position of the input coordinates compared
  // to the found position (so xRel > 0 means the coordinates are to
  // the right of the character position, for example). When outside
  // is true, that means the coordinates lie outside the line's
  // vertical range.
  function PosWithInfo(line, ch, outside, xRel) {
    var pos = Pos(line, ch);
    pos.xRel = xRel;
    if (outside) pos.outside = true;
    return pos;
  }

  // Compute the character position closest to the given coordinates.
  // Input must be lineSpace-local ("div" coordinate system).
  function coordsChar(cm, x, y) {
    var doc = cm.doc;
    y += cm.display.viewOffset;
    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);
    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
    if (lineN > last)
      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);
    if (x < 0) x = 0;

    var lineObj = getLine(doc, lineN);
    for (;;) {
      var found = coordsCharInner(cm, lineObj, lineN, x, y);
      var merged = collapsedSpanAtEnd(lineObj);
      var mergedPos = merged && merged.find(0, true);
      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))
        lineN = lineNo(lineObj = mergedPos.to.line);
      else
        return found;
    }
  }

  function coordsCharInner(cm, lineObj, lineNo, x, y) {
    var innerOff = y - heightAtLine(lineObj);
    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;
    var preparedMeasure = prepareMeasureForLine(cm, lineObj);

    function getX(ch) {
      var sp = cursorCoords(cm, Pos(lineNo, ch), "line", lineObj, preparedMeasure);
      wrongLine = true;
      if (innerOff > sp.bottom) return sp.left - adjust;
      else if (innerOff < sp.top) return sp.left + adjust;
      else wrongLine = false;
      return sp.left;
    }

    var bidi = getOrder(lineObj), dist = lineObj.text.length;
    var from = lineLeft(lineObj), to = lineRight(lineObj);
    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;

    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);
    // Do a binary search between these bounds.
    for (;;) {
      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {
        var ch = x < fromX || x - fromX <= toX - x ? from : to;
        var xDiff = x - (ch == from ? fromX : toX);
        while (isExtendingChar(lineObj.text.charAt(ch))) ++ch;
        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,
                              xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);
        return pos;
      }
      var step = Math.ceil(dist / 2), middle = from + step;
      if (bidi) {
        middle = from;
        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);
      }
      var middleX = getX(middle);
      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}
      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}
    }
  }

  var measureText;
  // Compute the default text height.
  function textHeight(display) {
    if (display.cachedTextHeight != null) return display.cachedTextHeight;
    if (measureText == null) {
      measureText = elt("pre");
      // Measure a bunch of lines, for browsers that compute
      // fractional heights.
      for (var i = 0; i < 49; ++i) {
        measureText.appendChild(document.createTextNode("x"));
        measureText.appendChild(elt("br"));
      }
      measureText.appendChild(document.createTextNode("x"));
    }
    removeChildrenAndAdd(display.measure, measureText);
    var height = measureText.offsetHeight / 50;
    if (height > 3) display.cachedTextHeight = height;
    removeChildren(display.measure);
    return height || 1;
  }

  // Compute the default character width.
  function charWidth(display) {
    if (display.cachedCharWidth != null) return display.cachedCharWidth;
    var anchor = elt("span", "xxxxxxxxxx");
    var pre = elt("pre", [anchor]);
    removeChildrenAndAdd(display.measure, pre);
    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
    if (width > 2) display.cachedCharWidth = width;
    return width || 10;
  }

  // OPERATIONS

  // Operations are used to wrap a series of changes to the editor
  // state in such a way that each change won't have to update the
  // cursor and display (which would be awkward, slow, and
  // error-prone). Instead, display updates are batched and then all
  // combined and executed at once.

  var operationGroup = null;

  var nextOpId = 0;
  // Start a new operation.
  function startOperation(cm) {
    cm.curOp = {
      cm: cm,
      viewChanged: false,      // Flag that indicates that lines might need to be redrawn
      startHeight: cm.doc.height, // Used to detect need to update scrollbar
      forceUpdate: false,      // Used to force a redraw
      updateInput: null,       // Whether to reset the input textarea
      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)
      changeObjs: null,        // Accumulated changes, for firing change events
      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on
      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already
      selectionChanged: false, // Whether the selection needs to be redrawn
      updateMaxLine: false,    // Set when the widest line needs to be determined anew
      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet
      scrollToPos: null,       // Used to scroll to a specific position
      focus: false,
      id: ++nextOpId           // Unique ID
    };
    if (operationGroup) {
      operationGroup.ops.push(cm.curOp);
    } else {
      cm.curOp.ownsGroup = operationGroup = {
        ops: [cm.curOp],
        delayedCallbacks: []
      };
    }
  }

  function fireCallbacksForOps(group) {
    // Calls delayed callbacks and cursorActivity handlers until no
    // new ones appear
    var callbacks = group.delayedCallbacks, i = 0;
    do {
      for (; i < callbacks.length; i++)
        callbacks[i].call(null);
      for (var j = 0; j < group.ops.length; j++) {
        var op = group.ops[j];
        if (op.cursorActivityHandlers)
          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)
            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);
      }
    } while (i < callbacks.length);
  }

  // Finish an operation, updating the display and signalling delayed events
  function endOperation(cm) {
    var op = cm.curOp, group = op.ownsGroup;
    if (!group) return;

    try { fireCallbacksForOps(group); }
    finally {
      operationGroup = null;
      for (var i = 0; i < group.ops.length; i++)
        group.ops[i].cm.curOp = null;
      endOperations(group);
    }
  }

  // The DOM updates done when an operation finishes are batched so
  // that the minimum number of relayouts are required.
  function endOperations(group) {
    var ops = group.ops;
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_finish(ops[i]);
  }

  function endOperation_R1(op) {
    var cm = op.cm, display = cm.display;
    maybeClipScrollbars(cm);
    if (op.updateMaxLine) findMaxLine(cm);

    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||
      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||
                         op.scrollToPos.to.line >= display.viewTo) ||
      display.maxLineChanged && cm.options.lineWrapping;
    op.update = op.mustUpdate &&
      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);
  }

  function endOperation_W1(op) {
    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
  }

  function endOperation_R2(op) {
    var cm = op.cm, display = cm.display;
    if (op.updatedDisplay) updateHeightsInViewport(cm);

    op.barMeasure = measureForScrollbars(cm);

    // If the max line changed since it was last measured, measure it,
    // and ensure the document's width matches it.
    // updateDisplay_W2 will use these properties to do the actual resizing
    if (display.maxLineChanged && !cm.options.lineWrapping) {
      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
      cm.display.sizerWidth = op.adjustWidthTo;
      op.barMeasure.scrollWidth =
        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);
      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));
    }

    if (op.updatedDisplay || op.selectionChanged)
      op.preparedSelection = display.input.prepareSelection();
  }

  function endOperation_W2(op) {
    var cm = op.cm;

    if (op.adjustWidthTo != null) {
      cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
      if (op.maxScrollLeft < cm.doc.scrollLeft)
        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
      cm.display.maxLineChanged = false;
    }

    if (op.preparedSelection)
      cm.display.input.showSelection(op.preparedSelection);
    if (op.updatedDisplay || op.startHeight != cm.doc.height)
      updateScrollbars(cm, op.barMeasure);
    if (op.updatedDisplay)
      setDocumentHeight(cm, op.barMeasure);

    if (op.selectionChanged) restartBlink(cm);

    if (cm.state.focused && op.updateInput)
      cm.display.input.reset(op.typing);
    if (op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus()))
      ensureFocus(op.cm);
  }

  function endOperation_finish(op) {
    var cm = op.cm, display = cm.display, doc = cm.doc;

    if (op.updatedDisplay) postUpdateDisplay(cm, op.update);

    // Abort mouse wheel delta measurement, when scrolling explicitly
    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))
      display.wheelStartX = display.wheelStartY = null;

    // Propagate the scroll position to the actual DOM scroller
    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {
      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));
      display.scrollbars.setScrollTop(doc.scrollTop);
      display.scroller.scrollTop = doc.scrollTop;
    }
    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {
      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - display.scroller.clientWidth, op.scrollLeft));
      display.scrollbars.setScrollLeft(doc.scrollLeft);
      display.scroller.scrollLeft = doc.scrollLeft;
      alignHorizontally(cm);
    }
    // If we need to scroll a specific position into view, do so.
    if (op.scrollToPos) {
      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),
                                     clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
      if (op.scrollToPos.isCursor && cm.state.focused) maybeScrollWindow(cm, coords);
    }

    // Fire events for markers that are hidden/unidden by editing or
    // undoing
    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
    if (hidden) for (var i = 0; i < hidden.length; ++i)
      if (!hidden[i].lines.length) signal(hidden[i], "hide");
    if (unhidden) for (var i = 0; i < unhidden.length; ++i)
      if (unhidden[i].lines.length) signal(unhidden[i], "unhide");

    if (display.wrapper.offsetHeight)
      doc.scrollTop = cm.display.scroller.scrollTop;

    // Fire change events, and delayed event handlers
    if (op.changeObjs)
      signal(cm, "changes", cm, op.changeObjs);
    if (op.update)
      op.update.finish();
  }

  // Run the given function in an operation
  function runInOp(cm, f) {
    if (cm.curOp) return f();
    startOperation(cm);
    try { return f(); }
    finally { endOperation(cm); }
  }
  // Wraps a function in an operation. Returns the wrapped function.
  function operation(cm, f) {
    return function() {
      if (cm.curOp) return f.apply(cm, arguments);
      startOperation(cm);
      try { return f.apply(cm, arguments); }
      finally { endOperation(cm); }
    };
  }
  // Used to add methods to editor and doc instances, wrapping them in
  // operations.
  function methodOp(f) {
    return function() {
      if (this.curOp) return f.apply(this, arguments);
      startOperation(this);
      try { return f.apply(this, arguments); }
      finally { endOperation(this); }
    };
  }
  function docMethodOp(f) {
    return function() {
      var cm = this.cm;
      if (!cm || cm.curOp) return f.apply(this, arguments);
      startOperation(cm);
      try { return f.apply(this, arguments); }
      finally { endOperation(cm); }
    };
  }

  // VIEW TRACKING

  // These objects are used to represent the visible (currently drawn)
  // part of the document. A LineView may correspond to multiple
  // logical lines, if those are connected by collapsed ranges.
  function LineView(doc, line, lineN) {
    // The starting line
    this.line = line;
    // Continuing lines, if any
    this.rest = visualLineContinued(line);
    // Number of logical lines in this visual line
    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
    this.node = this.text = null;
    this.hidden = lineIsHidden(doc, line);
  }

  // Create a range of LineView objects for the given lines.
  function buildViewArray(cm, from, to) {
    var array = [], nextPos;
    for (var pos = from; pos < to; pos = nextPos) {
      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
      nextPos = pos + view.size;
      array.push(view);
    }
    return array;
  }

  // Updates the display.view data structure for a given change to the
  // document. From and to are in pre-change coordinates. Lendiff is
  // the amount of lines added or subtracted by the change. This is
  // used for changes that span multiple lines, or change the way
  // lines are divided into visual lines. regLineChange (below)
  // registers single-line changes.
  function regChange(cm, from, to, lendiff) {
    if (from == null) from = cm.doc.first;
    if (to == null) to = cm.doc.first + cm.doc.size;
    if (!lendiff) lendiff = 0;

    var display = cm.display;
    if (lendiff && to < display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers > from))
      display.updateLineNumbers = from;

    cm.curOp.viewChanged = true;

    if (from >= display.viewTo) { // Change after
      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)
        resetView(cm);
    } else if (to <= display.viewFrom) { // Change before
      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
        resetView(cm);
      } else {
        display.viewFrom += lendiff;
        display.viewTo += lendiff;
      }
    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap
      resetView(cm);
    } else if (from <= display.viewFrom) { // Top overlap
      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cut) {
        display.view = display.view.slice(cut.index);
        display.viewFrom = cut.lineN;
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    } else if (to >= display.viewTo) { // Bottom overlap
      var cut = viewCuttingPoint(cm, from, from, -1);
      if (cut) {
        display.view = display.view.slice(0, cut.index);
        display.viewTo = cut.lineN;
      } else {
        resetView(cm);
      }
    } else { // Gap in the middle
      var cutTop = viewCuttingPoint(cm, from, from, -1);
      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cutTop && cutBot) {
        display.view = display.view.slice(0, cutTop.index)
          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))
          .concat(display.view.slice(cutBot.index));
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    }

    var ext = display.externalMeasured;
    if (ext) {
      if (to < ext.lineN)
        ext.lineN += lendiff;
      else if (from < ext.lineN + ext.size)
        display.externalMeasured = null;
    }
  }

  // Register a change to a single line. Type must be one of "text",
  // "gutter", "class", "widget"
  function regLineChange(cm, line, type) {
    cm.curOp.viewChanged = true;
    var display = cm.display, ext = cm.display.externalMeasured;
    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)
      display.externalMeasured = null;

    if (line < display.viewFrom || line >= display.viewTo) return;
    var lineView = display.view[findViewIndex(cm, line)];
    if (lineView.node == null) return;
    var arr = lineView.changes || (lineView.changes = []);
    if (indexOf(arr, type) == -1) arr.push(type);
  }

  // Clear the view.
  function resetView(cm) {
    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
    cm.display.view = [];
    cm.display.viewOffset = 0;
  }

  // Find the view element corresponding to a given line. Return null
  // when the line isn't visible.
  function findViewIndex(cm, n) {
    if (n >= cm.display.viewTo) return null;
    n -= cm.display.viewFrom;
    if (n < 0) return null;
    var view = cm.display.view;
    for (var i = 0; i < view.length; i++) {
      n -= view[i].size;
      if (n < 0) return i;
    }
  }

  function viewCuttingPoint(cm, oldN, newN, dir) {
    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)
      return {index: index, lineN: newN};
    for (var i = 0, n = cm.display.viewFrom; i < index; i++)
      n += view[i].size;
    if (n != oldN) {
      if (dir > 0) {
        if (index == view.length - 1) return null;
        diff = (n + view[index].size) - oldN;
        index++;
      } else {
        diff = n - oldN;
      }
      oldN += diff; newN += diff;
    }
    while (visualLineNo(cm.doc, newN) != newN) {
      if (index == (dir < 0 ? 0 : view.length - 1)) return null;
      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
      index += dir;
    }
    return {index: index, lineN: newN};
  }

  // Force the view to cover a given range, adding empty view element
  // or clipping off existing ones as needed.
  function adjustView(cm, from, to) {
    var display = cm.display, view = display.view;
    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
      display.view = buildViewArray(cm, from, to);
      display.viewFrom = from;
    } else {
      if (display.viewFrom > from)
        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
      else if (display.viewFrom < from)
        display.view = display.view.slice(findViewIndex(cm, from));
      display.viewFrom = from;
      if (display.viewTo < to)
        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
      else if (display.viewTo > to)
        display.view = display.view.slice(0, findViewIndex(cm, to));
    }
    display.viewTo = to;
  }

  // Count the number of lines in the view whose DOM representation is
  // out of date (or nonexistent).
  function countDirtyView(cm) {
    var view = cm.display.view, dirty = 0;
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty;
    }
    return dirty;
  }

  // EVENT HANDLERS

  // Attach the necessary event handlers when initializing the editor
  function registerEventHandlers(cm) {
    var d = cm.display;
    on(d.scroller, "mousedown", operation(cm, onMouseDown));
    // Older IE's will not fire a second mousedown for a double click
    if (ie && ie_version < 11)
      on(d.scroller, "dblclick", operation(cm, function(e) {
        if (signalDOMEvent(cm, e)) return;
        var pos = posFromMouse(cm, e);
        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;
        e_preventDefault(e);
        var word = cm.findWordAt(pos);
        extendSelection(cm.doc, word.anchor, word.head);
      }));
    else
      on(d.scroller, "dblclick", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });
    // Some browsers fire contextmenu *after* opening the menu, at
    // which point we can't mess with it anymore. Context menu is
    // handled in onMouseDown for these browsers.
    if (!captureRightClick) on(d.scroller, "contextmenu", function(e) {onContextMenu(cm, e);});

    // Used to suppress mouse event handling when a touch happens
    var touchFinished, prevTouch = {end: 0};
    function finishTouch() {
      if (d.activeTouch) {
        touchFinished = setTimeout(function() {d.activeTouch = null;}, 1000);
        prevTouch = d.activeTouch;
        prevTouch.end = +new Date;
      }
    };
    function isMouseLikeTouchEvent(e) {
      if (e.touches.length != 1) return false;
      var touch = e.touches[0];
      return touch.radiusX <= 1 && touch.radiusY <= 1;
    }
    function farAway(touch, other) {
      if (other.left == null) return true;
      var dx = other.left - touch.left, dy = other.top - touch.top;
      return dx * dx + dy * dy > 20 * 20;
    }
    on(d.scroller, "touchstart", function(e) {
      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {
        clearTimeout(touchFinished);
        var now = +new Date;
        d.activeTouch = {start: now, moved: false,
                         prev: now - prevTouch.end <= 300 ? prevTouch : null};
        if (e.touches.length == 1) {
          d.activeTouch.left = e.touches[0].pageX;
          d.activeTouch.top = e.touches[0].pageY;
        }
      }
    });
    on(d.scroller, "touchmove", function() {
      if (d.activeTouch) d.activeTouch.moved = true;
    });
    on(d.scroller, "touchend", function(e) {
      var touch = d.activeTouch;
      if (touch && !eventInWidget(d, e) && touch.left != null &&
          !touch.moved && new Date - touch.start < 300) {
        var pos = cm.coordsChar(d.activeTouch, "page"), range;
        if (!touch.prev || farAway(touch, touch.prev)) // Single tap
          range = new Range(pos, pos);
        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap
          range = cm.findWordAt(pos);
        else // Triple tap
          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
        cm.setSelection(range.anchor, range.head);
        cm.focus();
        e_preventDefault(e);
      }
      finishTouch();
    });
    on(d.scroller, "touchcancel", finishTouch);

    // Sync scrolling between fake scrollbars and real scrollable
    // area, ensure viewport is updated when scrolling.
    on(d.scroller, "scroll", function() {
      if (d.scroller.clientHeight) {
        setScrollTop(cm, d.scroller.scrollTop);
        setScrollLeft(cm, d.scroller.scrollLeft, true);
        signal(cm, "scroll", cm);
      }
    });

    // Listen to wheel events in order to try and update the viewport on time.
    on(d.scroller, "mousewheel", function(e){onScrollWheel(cm, e);});
    on(d.scroller, "DOMMouseScroll", function(e){onScrollWheel(cm, e);});

    // Prevent wrapper from ever scrolling
    on(d.wrapper, "scroll", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });

    d.dragFunctions = {
      enter: function(e) {if (!signalDOMEvent(cm, e)) e_stop(e);},
      over: function(e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},
      start: function(e){onDragStart(cm, e);},
      drop: operation(cm, onDrop),
      leave: function(e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}
    };

    var inp = d.input.getField();
    on(inp, "keyup", function(e) { onKeyUp.call(cm, e); });
    on(inp, "keydown", operation(cm, onKeyDown));
    on(inp, "keypress", operation(cm, onKeyPress));
    on(inp, "focus", bind(onFocus, cm));
    on(inp, "blur", bind(onBlur, cm));
  }

  function dragDropChanged(cm, value, old) {
    var wasOn = old && old != CodeMirror.Init;
    if (!value != !wasOn) {
      var funcs = cm.display.dragFunctions;
      var toggle = value ? on : off;
      toggle(cm.display.scroller, "dragstart", funcs.start);
      toggle(cm.display.scroller, "dragenter", funcs.enter);
      toggle(cm.display.scroller, "dragover", funcs.over);
      toggle(cm.display.scroller, "dragleave", funcs.leave);
      toggle(cm.display.scroller, "drop", funcs.drop);
    }
  }

  // Called when the window resizes
  function onResize(cm) {
    var d = cm.display;
    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)
      return;
    // Might be a text scaling operation, clear size caches.
    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
    d.scrollbarsClipped = false;
    cm.setSize();
  }

  // MOUSE EVENTS

  // Return true when the given mouse event happened in a widget
  function eventInWidget(display, e) {
    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
      if (!n || (n.nodeType == 1 && n.getAttribute("cm-ignore-events") == "true") ||
          (n.parentNode == display.sizer && n != display.mover))
        return true;
    }
  }

  // Given a mouse event, find the corresponding position. If liberal
  // is false, it checks whether a gutter or scrollbar was clicked,
  // and returns null if it was. forRect is used by rectangular
  // selections, and tries to estimate a character position even for
  // coordinates beyond the right of the text.
  function posFromMouse(cm, e, liberal, forRect) {
    var display = cm.display;
    if (!liberal && e_target(e).getAttribute("cm-not-content") == "true") return null;

    var x, y, space = display.lineSpace.getBoundingClientRect();
    // Fails unpredictably on IE[67] when mouse is dragged around quickly.
    try { x = e.clientX - space.left; y = e.clientY - space.top; }
    catch (e) { return null; }
    var coords = coordsChar(cm, x, y), line;
    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
    }
    return coords;
  }

  // A mouse down can be a single click, double click, triple click,
  // start of selection drag, start of text drag, new cursor
  // (ctrl-click), rectangle drag (alt-drag), or xwin
  // middle-click-paste. Or it might be a click on something we should
  // not interfere with, such as a scrollbar or widget.
  function onMouseDown(e) {
    var cm = this, display = cm.display;
    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) return;
    display.shift = e.shiftKey;

    if (eventInWidget(display, e)) {
      if (!webkit) {
        // Briefly turn off draggability, to allow widgets to do
        // normal dragging things.
        display.scroller.draggable = false;
        setTimeout(function(){display.scroller.draggable = true;}, 100);
      }
      return;
    }
    if (clickInGutter(cm, e)) return;
    var start = posFromMouse(cm, e);
    window.focus();

    switch (e_button(e)) {
    case 1:
      // #3261: make sure, that we're not starting a second selection
      if (cm.state.selectingText)
        cm.state.selectingText(e);
      else if (start)
        leftButtonDown(cm, e, start);
      else if (e_target(e) == display.scroller)
        e_preventDefault(e);
      break;
    case 2:
      if (webkit) cm.state.lastMiddleDown = +new Date;
      if (start) extendSelection(cm.doc, start);
      setTimeout(function() {display.input.focus();}, 20);
      e_preventDefault(e);
      break;
    case 3:
      if (captureRightClick) onContextMenu(cm, e);
      else delayBlurEvent(cm);
      break;
    }
  }

  var lastClick, lastDoubleClick;
  function leftButtonDown(cm, e, start) {
    if (ie) setTimeout(bind(ensureFocus, cm), 0);
    else cm.curOp.focus = activeElt();

    var now = +new Date, type;
    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {
      type = "triple";
    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {
      type = "double";
      lastDoubleClick = {time: now, pos: start};
    } else {
      type = "single";
      lastClick = {time: now, pos: start};
    }

    var sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey, contained;
    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&
        type == "single" && (contained = sel.contains(start)) > -1 &&
        (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) &&
        (cmp(contained.to(), start) > 0 || start.xRel < 0))
      leftButtonStartDrag(cm, e, start, modifier);
    else
      leftButtonSelect(cm, e, start, type, modifier);
  }

  // Start a text drag. When it ends, see if any dragging actually
  // happen, and treat as a click if it didn't.
  function leftButtonStartDrag(cm, e, start, modifier) {
    var display = cm.display, startTime = +new Date;
    var dragEnd = operation(cm, function(e2) {
      if (webkit) display.scroller.draggable = false;
      cm.state.draggingText = false;
      off(document, "mouseup", dragEnd);
      off(display.scroller, "drop", dragEnd);
      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {
        e_preventDefault(e2);
        if (!modifier && +new Date - 200 < startTime)
          extendSelection(cm.doc, start);
        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)
        if (webkit || ie && ie_version == 9)
          setTimeout(function() {document.body.focus(); display.input.focus();}, 20);
        else
          display.input.focus();
      }
    });
    // Let the drag handler handle this.
    if (webkit) display.scroller.draggable = true;
    cm.state.draggingText = dragEnd;
    // IE's approach to draggable
    if (display.scroller.dragDrop) display.scroller.dragDrop();
    on(document, "mouseup", dragEnd);
    on(display.scroller, "drop", dragEnd);
  }

  // Normal selection, as opposed to text dragging.
  function leftButtonSelect(cm, e, start, type, addNew) {
    var display = cm.display, doc = cm.doc;
    e_preventDefault(e);

    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;
    if (addNew && !e.shiftKey) {
      ourIndex = doc.sel.contains(start);
      if (ourIndex > -1)
        ourRange = ranges[ourIndex];
      else
        ourRange = new Range(start, start);
    } else {
      ourRange = doc.sel.primary();
      ourIndex = doc.sel.primIndex;
    }

    if (chromeOS ? e.shiftKey && e.metaKey : e.altKey) {
      type = "rect";
      if (!addNew) ourRange = new Range(start, start);
      start = posFromMouse(cm, e, true, true);
      ourIndex = -1;
    } else if (type == "double") {
      var word = cm.findWordAt(start);
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, word.anchor, word.head);
      else
        ourRange = word;
    } else if (type == "triple") {
      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, line.anchor, line.head);
      else
        ourRange = line;
    } else {
      ourRange = extendRange(doc, ourRange, start);
    }

    if (!addNew) {
      ourIndex = 0;
      setSelection(doc, new Selection([ourRange], 0), sel_mouse);
      startSel = doc.sel;
    } else if (ourIndex == -1) {
      ourIndex = ranges.length;
      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),
                   {scroll: false, origin: "*mouse"});
    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == "single" && !e.shiftKey) {
      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),
                   {scroll: false, origin: "*mouse"});
      startSel = doc.sel;
    } else {
      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);
    }

    var lastPos = start;
    function extendTo(pos) {
      if (cmp(lastPos, pos) == 0) return;
      lastPos = pos;

      if (type == "rect") {
        var ranges = [], tabSize = cm.options.tabSize;
        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);
        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);
        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));
             line <= end; line++) {
          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
          if (left == right)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
          else if (text.length > leftPos)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
        }
        if (!ranges.length) ranges.push(new Range(start, start));
        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),
                     {origin: "*mouse", scroll: false});
        cm.scrollIntoView(pos);
      } else {
        var oldRange = ourRange;
        var anchor = oldRange.anchor, head = pos;
        if (type != "single") {
          if (type == "double")
            var range = cm.findWordAt(pos);
          else
            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));
          if (cmp(range.anchor, anchor) > 0) {
            head = range.head;
            anchor = minPos(oldRange.from(), range.anchor);
          } else {
            head = range.anchor;
            anchor = maxPos(oldRange.to(), range.head);
          }
        }
        var ranges = startSel.ranges.slice(0);
        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);
        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);
      }
    }

    var editorSize = display.wrapper.getBoundingClientRect();
    // Used to ensure timeout re-tries don't fire when another extend
    // happened in the meantime (clearTimeout isn't reliable -- at
    // least on Chrome, the timeouts still happen even when cleared,
    // if the clear happens after their scheduled firing time).
    var counter = 0;

    function extend(e) {
      var curCount = ++counter;
      var cur = posFromMouse(cm, e, true, type == "rect");
      if (!cur) return;
      if (cmp(cur, lastPos) != 0) {
        cm.curOp.focus = activeElt();
        extendTo(cur);
        var visible = visibleLines(display, doc);
        if (cur.line >= visible.to || cur.line < visible.from)
          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);
      } else {
        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
        if (outside) setTimeout(operation(cm, function() {
          if (counter != curCount) return;
          display.scroller.scrollTop += outside;
          extend(e);
        }), 50);
      }
    }

    function done(e) {
      cm.state.selectingText = false;
      counter = Infinity;
      e_preventDefault(e);
      display.input.focus();
      off(document, "mousemove", move);
      off(document, "mouseup", up);
      doc.history.lastSelOrigin = null;
    }

    var move = operation(cm, function(e) {
      if (!e_button(e)) done(e);
      else extend(e);
    });
    var up = operation(cm, done);
    cm.state.selectingText = up;
    on(document, "mousemove", move);
    on(document, "mouseup", up);
  }

  // Determines whether an event happened in the gutter, and fires the
  // handlers for the corresponding event.
  function gutterEvent(cm, e, type, prevent) {
    try { var mX = e.clientX, mY = e.clientY; }
    catch(e) { return false; }
    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false;
    if (prevent) e_preventDefault(e);

    var display = cm.display;
    var lineBox = display.lineDiv.getBoundingClientRect();

    if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);
    mY -= lineBox.top - display.viewOffset;

    for (var i = 0; i < cm.options.gutters.length; ++i) {
      var g = display.gutters.childNodes[i];
      if (g && g.getBoundingClientRect().right >= mX) {
        var line = lineAtHeight(cm.doc, mY);
        var gutter = cm.options.gutters[i];
        signal(cm, type, cm, line, gutter, e);
        return e_defaultPrevented(e);
      }
    }
  }

  function clickInGutter(cm, e) {
    return gutterEvent(cm, e, "gutterClick", true);
  }

  // Kludge to work around strange IE behavior where it'll sometimes
  // re-fire a series of drag-related events right after the drop (#1551)
  var lastDrop = 0;

  function onDrop(e) {
    var cm = this;
    clearDragCursor(cm);
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))
      return;
    e_preventDefault(e);
    if (ie) lastDrop = +new Date;
    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
    if (!pos || cm.isReadOnly()) return;
    // Might be a file drop, in which case we simply extract the text
    // and insert it.
    if (files && files.length && window.FileReader && window.File) {
      var n = files.length, text = Array(n), read = 0;
      var loadFile = function(file, i) {
        if (cm.options.allowDropFileTypes &&
            indexOf(cm.options.allowDropFileTypes, file.type) == -1)
          return;

        var reader = new FileReader;
        reader.onload = operation(cm, function() {
          var content = reader.result;
          if (/[\x00-\x08\x0e-\x1f]{2}/.test(content)) content = "";
          text[i] = content;
          if (++read == n) {
            pos = clipPos(cm.doc, pos);
            var change = {from: pos, to: pos,
                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),
                          origin: "paste"};
            makeChange(cm.doc, change);
            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));
          }
        });
        reader.readAsText(file);
      };
      for (var i = 0; i < n; ++i) loadFile(files[i], i);
    } else { // Normal drop
      // Don't do a replace if the drop happened inside of the selected text.
      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
        cm.state.draggingText(e);
        // Ensure the editor is re-focused
        setTimeout(function() {cm.display.input.focus();}, 20);
        return;
      }
      try {
        var text = e.dataTransfer.getData("Text");
        if (text) {
          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))
            var selected = cm.listSelections();
          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
          if (selected) for (var i = 0; i < selected.length; ++i)
            replaceRange(cm.doc, "", selected[i].anchor, selected[i].head, "drag");
          cm.replaceSelection(text, "around", "paste");
          cm.display.input.focus();
        }
      }
      catch(e){}
    }
  }

  function onDragStart(cm, e) {
    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;

    e.dataTransfer.setData("Text", cm.getSelection());
    e.dataTransfer.effectAllowed = "copyMove"

    // Use dummy image instead of default browsers image.
    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.
    if (e.dataTransfer.setDragImage && !safari) {
      var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
      img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
      if (presto) {
        img.width = img.height = 1;
        cm.display.wrapper.appendChild(img);
        // Force a relayout, or Opera won't use our image for some obscure reason
        img._top = img.offsetTop;
      }
      e.dataTransfer.setDragImage(img, 0, 0);
      if (presto) img.parentNode.removeChild(img);
    }
  }

  function onDragOver(cm, e) {
    var pos = posFromMouse(cm, e);
    if (!pos) return;
    var frag = document.createDocumentFragment();
    drawSelectionCursor(cm, pos, frag);
    if (!cm.display.dragCursor) {
      cm.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors");
      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);
    }
    removeChildrenAndAdd(cm.display.dragCursor, frag);
  }

  function clearDragCursor(cm) {
    if (cm.display.dragCursor) {
      cm.display.lineSpace.removeChild(cm.display.dragCursor);
      cm.display.dragCursor = null;
    }
  }

  // SCROLL EVENTS

  // Sync the scrollable area and scrollbars, ensure the viewport
  // covers the visible area.
  function setScrollTop(cm, val) {
    if (Math.abs(cm.doc.scrollTop - val) < 2) return;
    cm.doc.scrollTop = val;
    if (!gecko) updateDisplaySimple(cm, {top: val});
    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;
    cm.display.scrollbars.setScrollTop(val);
    if (gecko) updateDisplaySimple(cm);
    startWorker(cm, 100);
  }
  // Sync scroller and scrollbar, ensure the gutter elements are
  // aligned.
  function setScrollLeft(cm, val, isScroller) {
    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;
    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);
    cm.doc.scrollLeft = val;
    alignHorizontally(cm);
    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;
    cm.display.scrollbars.setScrollLeft(val);
  }

  // Since the delta values reported on mouse wheel events are
  // unstandardized between browsers and even browser versions, and
  // generally horribly unpredictable, this code starts by measuring
  // the scroll effect that the first few mouse wheel events have,
  // and, from that, detects the way it can convert deltas to pixel
  // offsets afterwards.
  //
  // The reason we want to know the amount a wheel event will scroll
  // is that it gives us a chance to update the display before the
  // actual scrolling happens, reducing flickering.

  var wheelSamples = 0, wheelPixelsPerUnit = null;
  // Fill in a browser-detected starting value on browsers where we
  // know one. These don't have to be accurate -- the result of them
  // being wrong would just be a slight flicker on the first wheel
  // scroll (if it is large enough).
  if (ie) wheelPixelsPerUnit = -.53;
  else if (gecko) wheelPixelsPerUnit = 15;
  else if (chrome) wheelPixelsPerUnit = -.7;
  else if (safari) wheelPixelsPerUnit = -1/3;

  var wheelEventDelta = function(e) {
    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;
    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;
    else if (dy == null) dy = e.wheelDelta;
    return {x: dx, y: dy};
  };
  CodeMirror.wheelEventPixels = function(e) {
    var delta = wheelEventDelta(e);
    delta.x *= wheelPixelsPerUnit;
    delta.y *= wheelPixelsPerUnit;
    return delta;
  };

  function onScrollWheel(cm, e) {
    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;

    var display = cm.display, scroll = display.scroller;
    // Quit if there's nothing to scroll here
    var canScrollX = scroll.scrollWidth > scroll.clientWidth;
    var canScrollY = scroll.scrollHeight > scroll.clientHeight;
    if (!(dx && canScrollX || dy && canScrollY)) return;

    // Webkit browsers on OS X abort momentum scrolls when the target
    // of the scroll event is removed from the scrollable element.
    // This hack (see related code in patchDisplay) makes sure the
    // element is kept around.
    if (dy && mac && webkit) {
      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
        for (var i = 0; i < view.length; i++) {
          if (view[i].node == cur) {
            cm.display.currentWheelTarget = cur;
            break outer;
          }
        }
      }
    }

    // On some browsers, horizontal scrolling will cause redraws to
    // happen before the gutter has been realigned, causing it to
    // wriggle around in a most unseemly way. When we have an
    // estimated pixels/delta value, we just handle horizontal
    // scrolling entirely here. It'll be slightly off from native, but
    // better than glitching out.
    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {
      if (dy && canScrollY)
        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));
      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));
      // Only prevent default scrolling if vertical scrolling is
      // actually possible. Otherwise, it causes vertical scroll
      // jitter on OSX trackpads when deltaX is small and deltaY
      // is large (issue #3579)
      if (!dy || (dy && canScrollY))
        e_preventDefault(e);
      display.wheelStartX = null; // Abort measurement, if in progress
      return;
    }

    // 'Project' the visible viewport to cover the area that is being
    // scrolled into view (if we know enough to estimate it).
    if (dy && wheelPixelsPerUnit != null) {
      var pixels = dy * wheelPixelsPerUnit;
      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
      if (pixels < 0) top = Math.max(0, top + pixels - 50);
      else bot = Math.min(cm.doc.height, bot + pixels + 50);
      updateDisplaySimple(cm, {top: top, bottom: bot});
    }

    if (wheelSamples < 20) {
      if (display.wheelStartX == null) {
        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;
        display.wheelDX = dx; display.wheelDY = dy;
        setTimeout(function() {
          if (display.wheelStartX == null) return;
          var movedX = scroll.scrollLeft - display.wheelStartX;
          var movedY = scroll.scrollTop - display.wheelStartY;
          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||
            (movedX && display.wheelDX && movedX / display.wheelDX);
          display.wheelStartX = display.wheelStartY = null;
          if (!sample) return;
          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
          ++wheelSamples;
        }, 200);
      } else {
        display.wheelDX += dx; display.wheelDY += dy;
      }
    }
  }

  // KEY EVENTS

  // Run a handler that was bound to a key.
  function doHandleBinding(cm, bound, dropShift) {
    if (typeof bound == "string") {
      bound = commands[bound];
      if (!bound) return false;
    }
    // Ensure previous input has been read, so that the handler sees a
    // consistent view of the document
    cm.display.input.ensurePolled();
    var prevShift = cm.display.shift, done = false;
    try {
      if (cm.isReadOnly()) cm.state.suppressEdits = true;
      if (dropShift) cm.display.shift = false;
      done = bound(cm) != Pass;
    } finally {
      cm.display.shift = prevShift;
      cm.state.suppressEdits = false;
    }
    return done;
  }

  function lookupKeyForEditor(cm, name, handle) {
    for (var i = 0; i < cm.state.keyMaps.length; i++) {
      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);
      if (result) return result;
    }
    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))
      || lookupKey(name, cm.options.keyMap, handle, cm);
  }

  var stopSeq = new Delayed;
  function dispatchKey(cm, name, e, handle) {
    var seq = cm.state.keySeq;
    if (seq) {
      if (isModifierKey(name)) return "handled";
      stopSeq.set(50, function() {
        if (cm.state.keySeq == seq) {
          cm.state.keySeq = null;
          cm.display.input.reset();
        }
      });
      name = seq + " " + name;
    }
    var result = lookupKeyForEditor(cm, name, handle);

    if (result == "multi")
      cm.state.keySeq = name;
    if (result == "handled")
      signalLater(cm, "keyHandled", cm, name, e);

    if (result == "handled" || result == "multi") {
      e_preventDefault(e);
      restartBlink(cm);
    }

    if (seq && !result && /\'$/.test(name)) {
      e_preventDefault(e);
      return true;
    }
    return !!result;
  }

  // Handle a key from the keydown event.
  function handleKeyBinding(cm, e) {
    var name = keyName(e, true);
    if (!name) return false;

    if (e.shiftKey && !cm.state.keySeq) {
      // First try to resolve full name (including 'Shift-'). Failing
      // that, see if there is a cursor-motion command (starting with
      // 'go') bound to the keyname without 'Shift-'.
      return dispatchKey(cm, "Shift-" + name, e, function(b) {return doHandleBinding(cm, b, true);})
          || dispatchKey(cm, name, e, function(b) {
               if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion)
                 return doHandleBinding(cm, b);
             });
    } else {
      return dispatchKey(cm, name, e, function(b) { return doHandleBinding(cm, b); });
    }
  }

  // Handle a key from the keypress event
  function handleCharBinding(cm, e, ch) {
    return dispatchKey(cm, "'" + ch + "'", e,
                       function(b) { return doHandleBinding(cm, b, true); });
  }

  var lastStoppedKey = null;
  function onKeyDown(e) {
    var cm = this;
    cm.curOp.focus = activeElt();
    if (signalDOMEvent(cm, e)) return;
    // IE does strange things with escape.
    if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false;
    var code = e.keyCode;
    cm.display.shift = code == 16 || e.shiftKey;
    var handled = handleKeyBinding(cm, e);
    if (presto) {
      lastStoppedKey = handled ? code : null;
      // Opera has no cut event... we try to at least catch the key combo
      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))
        cm.replaceSelection("", null, "cut");
    }

    // Turn mouse into crosshair when Alt is held on Mac.
    if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
      showCrossHair(cm);
  }

  function showCrossHair(cm) {
    var lineDiv = cm.display.lineDiv;
    addClass(lineDiv, "CodeMirror-crosshair");

    function up(e) {
      if (e.keyCode == 18 || !e.altKey) {
        rmClass(lineDiv, "CodeMirror-crosshair");
        off(document, "keyup", up);
        off(document, "mouseover", up);
      }
    }
    on(document, "keyup", up);
    on(document, "mouseover", up);
  }

  function onKeyUp(e) {
    if (e.keyCode == 16) this.doc.sel.shift = false;
    signalDOMEvent(this, e);
  }

  function onKeyPress(e) {
    var cm = this;
    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return;
    var keyCode = e.keyCode, charCode = e.charCode;
    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}
    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) return;
    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
    if (handleCharBinding(cm, e, ch)) return;
    cm.display.input.onKeyPress(e);
  }

  // FOCUS/BLUR EVENTS

  function delayBlurEvent(cm) {
    cm.state.delayingBlurEvent = true;
    setTimeout(function() {
      if (cm.state.delayingBlurEvent) {
        cm.state.delayingBlurEvent = false;
        onBlur(cm);
      }
    }, 100);
  }

  function onFocus(cm) {
    if (cm.state.delayingBlurEvent) cm.state.delayingBlurEvent = false;

    if (cm.options.readOnly == "nocursor") return;
    if (!cm.state.focused) {
      signal(cm, "focus", cm);
      cm.state.focused = true;
      addClass(cm.display.wrapper, "CodeMirror-focused");
      // This test prevents this from firing when a context
      // menu is closed (since the input reset would kill the
      // select-all detection hack)
      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
        cm.display.input.reset();
        if (webkit) setTimeout(function() { cm.display.input.reset(true); }, 20); // Issue #1730
      }
      cm.display.input.receivedFocus();
    }
    restartBlink(cm);
  }
  function onBlur(cm) {
    if (cm.state.delayingBlurEvent) return;

    if (cm.state.focused) {
      signal(cm, "blur", cm);
      cm.state.focused = false;
      rmClass(cm.display.wrapper, "CodeMirror-focused");
    }
    clearInterval(cm.display.blinker);
    setTimeout(function() {if (!cm.state.focused) cm.display.shift = false;}, 150);
  }

  // CONTEXT MENU HANDLING

  // To make the context menu work, we need to briefly unhide the
  // textarea (making it as unobtrusive as possible) to let the
  // right-click take effect on it.
  function onContextMenu(cm, e) {
    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) return;
    if (signalDOMEvent(cm, e, "contextmenu")) return;
    cm.display.input.onContextMenu(e);
  }

  function contextMenuInGutter(cm, e) {
    if (!hasHandler(cm, "gutterContextMenu")) return false;
    return gutterEvent(cm, e, "gutterContextMenu", false);
  }

  // UPDATING

  // Compute the position of the end of a change (its 'to' property
  // refers to the pre-change end).
  var changeEnd = CodeMirror.changeEnd = function(change) {
    if (!change.text) return change.to;
    return Pos(change.from.line + change.text.length - 1,
               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));
  };

  // Adjust a position to refer to the post-change position of the
  // same text, or the end of the change if the change covers it.
  function adjustForChange(pos, change) {
    if (cmp(pos, change.from) < 0) return pos;
    if (cmp(pos, change.to) <= 0) return changeEnd(change);

    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
    if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch;
    return Pos(line, ch);
  }

  function computeSelAfterChange(doc, change) {
    var out = [];
    for (var i = 0; i < doc.sel.ranges.length; i++) {
      var range = doc.sel.ranges[i];
      out.push(new Range(adjustForChange(range.anchor, change),
                         adjustForChange(range.head, change)));
    }
    return normalizeSelection(out, doc.sel.primIndex);
  }

  function offsetPos(pos, old, nw) {
    if (pos.line == old.line)
      return Pos(nw.line, pos.ch - old.ch + nw.ch);
    else
      return Pos(nw.line + (pos.line - old.line), pos.ch);
  }

  // Used by replaceSelections to allow moving the selection to the
  // start or around the replaced test. Hint may be "start" or "around".
  function computeReplacedSel(doc, changes, hint) {
    var out = [];
    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;
    for (var i = 0; i < changes.length; i++) {
      var change = changes[i];
      var from = offsetPos(change.from, oldPrev, newPrev);
      var to = offsetPos(changeEnd(change), oldPrev, newPrev);
      oldPrev = change.to;
      newPrev = to;
      if (hint == "around") {
        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;
        out[i] = new Range(inv ? to : from, inv ? from : to);
      } else {
        out[i] = new Range(from, from);
      }
    }
    return new Selection(out, doc.sel.primIndex);
  }

  // Allow "beforeChange" event handlers to influence a change
  function filterChange(doc, change, update) {
    var obj = {
      canceled: false,
      from: change.from,
      to: change.to,
      text: change.text,
      origin: change.origin,
      cancel: function() { this.canceled = true; }
    };
    if (update) obj.update = function(from, to, text, origin) {
      if (from) this.from = clipPos(doc, from);
      if (to) this.to = clipPos(doc, to);
      if (text) this.text = text;
      if (origin !== undefined) this.origin = origin;
    };
    signal(doc, "beforeChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeChange", doc.cm, obj);

    if (obj.canceled) return null;
    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};
  }

  // Apply a change to a document, and add it to the document's
  // history, and propagating it to all linked documents.
  function makeChange(doc, change, ignoreReadOnly) {
    if (doc.cm) {
      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
      if (doc.cm.state.suppressEdits) return;
    }

    if (hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) {
      change = filterChange(doc, change, true);
      if (!change) return;
    }

    // Possibly split or suppress the update based on the presence
    // of read-only spans in its range.
    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
    if (split) {
      for (var i = split.length - 1; i >= 0; --i)
        makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [""] : change.text});
    } else {
      makeChangeInner(doc, change);
    }
  }

  function makeChangeInner(doc, change) {
    if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) return;
    var selAfter = computeSelAfterChange(doc, change);
    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);

    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
    var rebased = [];

    linkedDocs(doc, function(doc, sharedHist) {
      if (!sharedHist && indexOf(rebased, doc.history) == -1) {
        rebaseHist(doc.history, change);
        rebased.push(doc.history);
      }
      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));
    });
  }

  // Revert a change stored in a document's history.
  function makeChangeFromHistory(doc, type, allowSelectionOnly) {
    if (doc.cm && doc.cm.state.suppressEdits) return;

    var hist = doc.history, event, selAfter = doc.sel;
    var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;

    // Verify that there is a useable event (so that ctrl-z won't
    // needlessly clear selection events)
    for (var i = 0; i < source.length; i++) {
      event = source[i];
      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)
        break;
    }
    if (i == source.length) return;
    hist.lastOrigin = hist.lastSelOrigin = null;

    for (;;) {
      event = source.pop();
      if (event.ranges) {
        pushSelectionToHistory(event, dest);
        if (allowSelectionOnly && !event.equals(doc.sel)) {
          setSelection(doc, event, {clearRedo: false});
          return;
        }
        selAfter = event;
      }
      else break;
    }

    // Build up a reverse change object to add to the opposite history
    // stack (redo when undoing, and vice versa).
    var antiChanges = [];
    pushSelectionToHistory(selAfter, dest);
    dest.push({changes: antiChanges, generation: hist.generation});
    hist.generation = event.generation || ++hist.maxGeneration;

    var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange");

    for (var i = event.changes.length - 1; i >= 0; --i) {
      var change = event.changes[i];
      change.origin = type;
      if (filter && !filterChange(doc, change, false)) {
        source.length = 0;
        return;
      }

      antiChanges.push(historyChangeFromChange(doc, change));

      var after = i ? computeSelAfterChange(doc, change) : lst(source);
      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));
      if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});
      var rebased = [];

      // Propagate to the linked documents
      linkedDocs(doc, function(doc, sharedHist) {
        if (!sharedHist && indexOf(rebased, doc.history) == -1) {
          rebaseHist(doc.history, change);
          rebased.push(doc.history);
        }
        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));
      });
    }
  }

  // Sub-views need their line numbers shifted when text is added
  // above or below them in the parent document.
  function shiftDoc(doc, distance) {
    if (distance == 0) return;
    doc.first += distance;
    doc.sel = new Selection(map(doc.sel.ranges, function(range) {
      return new Range(Pos(range.anchor.line + distance, range.anchor.ch),
                       Pos(range.head.line + distance, range.head.ch));
    }), doc.sel.primIndex);
    if (doc.cm) {
      regChange(doc.cm, doc.first, doc.first - distance, distance);
      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)
        regLineChange(doc.cm, l, "gutter");
    }
  }

  // More lower-level change function, handling only a single document
  // (not linked ones).
  function makeChangeSingleDoc(doc, change, selAfter, spans) {
    if (doc.cm && !doc.cm.curOp)
      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);

    if (change.to.line < doc.first) {
      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));
      return;
    }
    if (change.from.line > doc.lastLine()) return;

    // Clip the change to the size of this doc
    if (change.from.line < doc.first) {
      var shift = change.text.length - 1 - (doc.first - change.from.line);
      shiftDoc(doc, shift);
      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),
                text: [lst(change.text)], origin: change.origin};
    }
    var last = doc.lastLine();
    if (change.to.line > last) {
      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),
                text: [change.text[0]], origin: change.origin};
    }

    change.removed = getBetween(doc, change.from, change.to);

    if (!selAfter) selAfter = computeSelAfterChange(doc, change);
    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans);
    else updateDoc(doc, change, spans);
    setSelectionNoUndo(doc, selAfter, sel_dontScroll);
  }

  // Handle the interaction of a change to a document with the editor
  // that this document is part of.
  function makeChangeSingleDocInEditor(cm, change, spans) {
    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;

    var recomputeMaxLength = false, checkWidthStart = from.line;
    if (!cm.options.lineWrapping) {
      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));
      doc.iter(checkWidthStart, to.line + 1, function(line) {
        if (line == display.maxLine) {
          recomputeMaxLength = true;
          return true;
        }
      });
    }

    if (doc.sel.contains(change.from, change.to) > -1)
      signalCursorActivity(cm);

    updateDoc(doc, change, spans, estimateHeight(cm));

    if (!cm.options.lineWrapping) {
      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
        var len = lineLength(line);
        if (len > display.maxLineLength) {
          display.maxLine = line;
          display.maxLineLength = len;
          display.maxLineChanged = true;
          recomputeMaxLength = false;
        }
      });
      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;
    }

    // Adjust frontier, schedule worker
    doc.frontier = Math.min(doc.frontier, from.line);
    startWorker(cm, 400);

    var lendiff = change.text.length - (to.line - from.line) - 1;
    // Remember that these lines changed, for updating the display
    if (change.full)
      regChange(cm);
    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))
      regLineChange(cm, from.line, "text");
    else
      regChange(cm, from.line, to.line + 1, lendiff);

    var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
    if (changeHandler || changesHandler) {
      var obj = {
        from: from, to: to,
        text: change.text,
        removed: change.removed,
        origin: change.origin
      };
      if (changeHandler) signalLater(cm, "change", cm, obj);
      if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
    }
    cm.display.selForContextMenu = null;
  }

  function replaceRange(doc, code, from, to, origin) {
    if (!to) to = from;
    if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }
    if (typeof code == "string") code = doc.splitLines(code);
    makeChange(doc, {from: from, to: to, text: code, origin: origin});
  }

  // SCROLLING THINGS INTO VIEW

  // If an editor sits on the top or bottom of the window, partially
  // scrolled out of view, this ensures that the cursor is visible.
  function maybeScrollWindow(cm, coords) {
    if (signalDOMEvent(cm, "scrollCursorIntoView")) return;

    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
    if (coords.top + box.top < 0) doScroll = true;
    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;
    if (doScroll != null && !phantom) {
      var scrollNode = elt("div", "\u200b", null, "position: absolute; top: " +
                           (coords.top - display.viewOffset - paddingTop(cm.display)) + "px; height: " +
                           (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + "px; left: " +
                           coords.left + "px; width: 2px;");
      cm.display.lineSpace.appendChild(scrollNode);
      scrollNode.scrollIntoView(doScroll);
      cm.display.lineSpace.removeChild(scrollNode);
    }
  }

  // Scroll a given position into view (immediately), verifying that
  // it actually became visible (as line heights are accurately
  // measured, the position of something may 'drift' during drawing).
  function scrollPosIntoView(cm, pos, end, margin) {
    if (margin == null) margin = 0;
    for (var limit = 0; limit < 5; limit++) {
      var changed = false, coords = cursorCoords(cm, pos);
      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left),
                                         Math.min(coords.top, endCoords.top) - margin,
                                         Math.max(coords.left, endCoords.left),
                                         Math.max(coords.bottom, endCoords.bottom) + margin);
      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
      if (scrollPos.scrollTop != null) {
        setScrollTop(cm, scrollPos.scrollTop);
        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;
      }
      if (scrollPos.scrollLeft != null) {
        setScrollLeft(cm, scrollPos.scrollLeft);
        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;
      }
      if (!changed) break;
    }
    return coords;
  }

  // Scroll a given set of coordinates into view (immediately).
  function scrollIntoView(cm, x1, y1, x2, y2) {
    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);
    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);
    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);
  }

  // Calculate a new scroll position needed to scroll the given
  // rectangle into view. Returns an object with scrollTop and
  // scrollLeft properties. When these are undefined, the
  // vertical/horizontal position does not need to be adjusted.
  function calculateScrollPos(cm, x1, y1, x2, y2) {
    var display = cm.display, snapMargin = textHeight(cm.display);
    if (y1 < 0) y1 = 0;
    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
    var screen = displayHeight(cm), result = {};
    if (y2 - y1 > screen) y2 = y1 + screen;
    var docBottom = cm.doc.height + paddingVert(display);
    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;
    if (y1 < screentop) {
      result.scrollTop = atTop ? 0 : y1;
    } else if (y2 > screentop + screen) {
      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);
      if (newTop != screentop) result.scrollTop = newTop;
    }

    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;
    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);
    var tooWide = x2 - x1 > screenw;
    if (tooWide) x2 = x1 + screenw;
    if (x1 < 10)
      result.scrollLeft = 0;
    else if (x1 < screenleft)
      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));
    else if (x2 > screenw + screenleft - 3)
      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;
    return result;
  }

  // Store a relative adjustment to the scroll position in the current
  // operation (to be applied when the operation finishes).
  function addToScrollPos(cm, left, top) {
    if (left != null || top != null) resolveScrollToPos(cm);
    if (left != null)
      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;
    if (top != null)
      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
  }

  // Make sure that at the end of the operation the current cursor is
  // shown.
  function ensureCursorVisible(cm) {
    resolveScrollToPos(cm);
    var cur = cm.getCursor(), from = cur, to = cur;
    if (!cm.options.lineWrapping) {
      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;
      to = Pos(cur.line, cur.ch + 1);
    }
    cm.curOp.scrollToPos = {from: from, to: to, margin: cm.options.cursorScrollMargin, isCursor: true};
  }

  // When an operation has its scrollToPos property set, and another
  // scroll action is applied before the end of the operation, this
  // 'simulates' scrolling that position into view in a cheap way, so
  // that the effect of intermediate scroll commands is not ignored.
  function resolveScrollToPos(cm) {
    var range = cm.curOp.scrollToPos;
    if (range) {
      cm.curOp.scrollToPos = null;
      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);
      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left),
                                    Math.min(from.top, to.top) - range.margin,
                                    Math.max(from.right, to.right),
                                    Math.max(from.bottom, to.bottom) + range.margin);
      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);
    }
  }

  // API UTILITIES

  // Indent the given line. The how parameter can be "smart",
  // "add"/null, "subtract", or "prev". When aggressive is false
  // (typically set to true for forced single-line indents), empty
  // lines are not indented, and places where the mode returns Pass
  // are left alone.
  function indentLine(cm, n, how, aggressive) {
    var doc = cm.doc, state;
    if (how == null) how = "add";
    if (how == "smart") {
      // Fall back to "prev" when the mode doesn't have an indentation
      // method.
      if (!doc.mode.indent) how = "prev";
      else state = getStateBefore(cm, n);
    }

    var tabSize = cm.options.tabSize;
    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
    if (line.stateAfter) line.stateAfter = null;
    var curSpaceString = line.text.match(/^\s*/)[0], indentation;
    if (!aggressive && !/\S/.test(line.text)) {
      indentation = 0;
      how = "not";
    } else if (how == "smart") {
      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
      if (indentation == Pass || indentation > 150) {
        if (!aggressive) return;
        how = "prev";
      }
    }
    if (how == "prev") {
      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);
      else indentation = 0;
    } else if (how == "add") {
      indentation = curSpace + cm.options.indentUnit;
    } else if (how == "subtract") {
      indentation = curSpace - cm.options.indentUnit;
    } else if (typeof how == "number") {
      indentation = curSpace + how;
    }
    indentation = Math.max(0, indentation);

    var indentString = "", pos = 0;
    if (cm.options.indentWithTabs)
      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += "\t";}
    if (pos < indentation) indentString += spaceStr(indentation - pos);

    if (indentString != curSpaceString) {
      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
      line.stateAfter = null;
      return true;
    } else {
      // Ensure that, if the cursor was in the whitespace at the start
      // of the line, it is moved to the end of that space.
      for (var i = 0; i < doc.sel.ranges.length; i++) {
        var range = doc.sel.ranges[i];
        if (range.head.line == n && range.head.ch < curSpaceString.length) {
          var pos = Pos(n, curSpaceString.length);
          replaceOneSelection(doc, i, new Range(pos, pos));
          break;
        }
      }
    }
  }

  // Utility for applying a change to a line by handle or number,
  // returning the number and optionally registering the line as
  // changed.
  function changeLine(doc, handle, changeType, op) {
    var no = handle, line = handle;
    if (typeof handle == "number") line = getLine(doc, clipLine(doc, handle));
    else no = lineNo(handle);
    if (no == null) return null;
    if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType);
    return line;
  }

  // Helper for deleting text near the selection(s), used to implement
  // backspace, delete, and similar functionality.
  function deleteNearSelection(cm, compute) {
    var ranges = cm.doc.sel.ranges, kill = [];
    // Build up a set of ranges to kill first, merging overlapping
    // ranges.
    for (var i = 0; i < ranges.length; i++) {
      var toKill = compute(ranges[i]);
      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
        var replaced = kill.pop();
        if (cmp(replaced.from, toKill.from) < 0) {
          toKill.from = replaced.from;
          break;
        }
      }
      kill.push(toKill);
    }
    // Next, remove those actual ranges.
    runInOp(cm, function() {
      for (var i = kill.length - 1; i >= 0; i--)
        replaceRange(cm.doc, "", kill[i].from, kill[i].to, "+delete");
      ensureCursorVisible(cm);
    });
  }

  // Used for horizontal relative motion. Dir is -1 or 1 (left or
  // right), unit can be "char", "column" (like char, but doesn't
  // cross line boundaries), "word" (across next word), or "group" (to
  // the start of next group of word or non-word-non-whitespace
  // chars). The visually param controls whether, in right-to-left
  // text, direction 1 means to move towards the next index in the
  // string, or towards the character to the right of the current
  // position. The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosH(doc, pos, dir, unit, visually) {
    var line = pos.line, ch = pos.ch, origDir = dir;
    var lineObj = getLine(doc, line);
    function findNextLine() {
      var l = line + dir;
      if (l < doc.first || l >= doc.first + doc.size) return false
      line = l;
      return lineObj = getLine(doc, l);
    }
    function moveOnce(boundToLine) {
      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);
      if (next == null) {
        if (!boundToLine && findNextLine()) {
          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);
          else ch = dir < 0 ? lineObj.text.length : 0;
        } else return false
      } else ch = next;
      return true;
    }

    if (unit == "char") {
      moveOnce()
    } else if (unit == "column") {
      moveOnce(true)
    } else if (unit == "word" || unit == "group") {
      var sawType = null, group = unit == "group";
      var helper = doc.cm && doc.cm.getHelper(pos, "wordChars");
      for (var first = true;; first = false) {
        if (dir < 0 && !moveOnce(!first)) break;
        var cur = lineObj.text.charAt(ch) || "\n";
        var type = isWordChar(cur, helper) ? "w"
          : group && cur == "\n" ? "n"
          : !group || /\s/.test(cur) ? null
          : "p";
        if (group && !first && !type) type = "s";
        if (sawType && sawType != type) {
          if (dir < 0) {dir = 1; moveOnce();}
          break;
        }

        if (type) sawType = type;
        if (dir > 0 && !moveOnce(!first)) break;
      }
    }
    var result = skipAtomic(doc, Pos(line, ch), pos, origDir, true);
    if (!cmp(pos, result)) result.hitSide = true;
    return result;
  }

  // For relative vertical movement. Dir may be -1 or 1. Unit can be
  // "page" or "line". The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosV(cm, pos, dir, unit) {
    var doc = cm.doc, x = pos.left, y;
    if (unit == "page") {
      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));
    } else if (unit == "line") {
      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
    }
    for (;;) {
      var target = coordsChar(cm, x, y);
      if (!target.outside) break;
      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }
      y += dir * 5;
    }
    return target;
  }

  // EDITOR METHODS

  // The publicly visible API. Note that methodOp(f) means
  // 'wrap f in an operation, performed on its `this` parameter'.

  // This is not the complete set of editor methods. Most of the
  // methods defined on the Doc type are also injected into
  // CodeMirror.prototype, for backwards compatibility and
  // convenience.

  CodeMirror.prototype = {
    constructor: CodeMirror,
    focus: function(){window.focus(); this.display.input.focus();},

    setOption: function(option, value) {
      var options = this.options, old = options[option];
      if (options[option] == value && option != "mode") return;
      options[option] = value;
      if (optionHandlers.hasOwnProperty(option))
        operation(this, optionHandlers[option])(this, value, old);
    },

    getOption: function(option) {return this.options[option];},
    getDoc: function() {return this.doc;},

    addKeyMap: function(map, bottom) {
      this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map));
    },
    removeKeyMap: function(map) {
      var maps = this.state.keyMaps;
      for (var i = 0; i < maps.length; ++i)
        if (maps[i] == map || maps[i].name == map) {
          maps.splice(i, 1);
          return true;
        }
    },

    addOverlay: methodOp(function(spec, options) {
      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);
      if (mode.startState) throw new Error("Overlays may not be stateful.");
      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});
      this.state.modeGen++;
      regChange(this);
    }),
    removeOverlay: methodOp(function(spec) {
      var overlays = this.state.overlays;
      for (var i = 0; i < overlays.length; ++i) {
        var cur = overlays[i].modeSpec;
        if (cur == spec || typeof spec == "string" && cur.name == spec) {
          overlays.splice(i, 1);
          this.state.modeGen++;
          regChange(this);
          return;
        }
      }
    }),

    indentLine: methodOp(function(n, dir, aggressive) {
      if (typeof dir != "string" && typeof dir != "number") {
        if (dir == null) dir = this.options.smartIndent ? "smart" : "prev";
        else dir = dir ? "add" : "subtract";
      }
      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);
    }),
    indentSelection: methodOp(function(how) {
      var ranges = this.doc.sel.ranges, end = -1;
      for (var i = 0; i < ranges.length; i++) {
        var range = ranges[i];
        if (!range.empty()) {
          var from = range.from(), to = range.to();
          var start = Math.max(end, from.line);
          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
          for (var j = start; j < end; ++j)
            indentLine(this, j, how);
          var newRanges = this.doc.sel.ranges;
          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)
            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);
        } else if (range.head.line > end) {
          indentLine(this, range.head.line, how, true);
          end = range.head.line;
          if (i == this.doc.sel.primIndex) ensureCursorVisible(this);
        }
      }
    }),

    // Fetch the parser token for a given character. Useful for hacks
    // that want to inspect the mode state (say, for completion).
    getTokenAt: function(pos, precise) {
      return takeToken(this, pos, precise);
    },

    getLineTokens: function(line, precise) {
      return takeToken(this, Pos(line), precise, true);
    },

    getTokenTypeAt: function(pos) {
      pos = clipPos(this.doc, pos);
      var styles = getLineStyles(this, getLine(this.doc, pos.line));
      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
      var type;
      if (ch == 0) type = styles[2];
      else for (;;) {
        var mid = (before + after) >> 1;
        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;
        else if (styles[mid * 2 + 1] < ch) before = mid + 1;
        else { type = styles[mid * 2 + 2]; break; }
      }
      var cut = type ? type.indexOf("cm-overlay ") : -1;
      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
    },

    getModeAt: function(pos) {
      var mode = this.doc.mode;
      if (!mode.innerMode) return mode;
      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;
    },

    getHelper: function(pos, type) {
      return this.getHelpers(pos, type)[0];
    },

    getHelpers: function(pos, type) {
      var found = [];
      if (!helpers.hasOwnProperty(type)) return found;
      var help = helpers[type], mode = this.getModeAt(pos);
      if (typeof mode[type] == "string") {
        if (help[mode[type]]) found.push(help[mode[type]]);
      } else if (mode[type]) {
        for (var i = 0; i < mode[type].length; i++) {
          var val = help[mode[type][i]];
          if (val) found.push(val);
        }
      } else if (mode.helperType && help[mode.helperType]) {
        found.push(help[mode.helperType]);
      } else if (help[mode.name]) {
        found.push(help[mode.name]);
      }
      for (var i = 0; i < help._global.length; i++) {
        var cur = help._global[i];
        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)
          found.push(cur.val);
      }
      return found;
    },

    getStateAfter: function(line, precise) {
      var doc = this.doc;
      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);
      return getStateBefore(this, line + 1, precise);
    },

    cursorCoords: function(start, mode) {
      var pos, range = this.doc.sel.primary();
      if (start == null) pos = range.head;
      else if (typeof start == "object") pos = clipPos(this.doc, start);
      else pos = start ? range.from() : range.to();
      return cursorCoords(this, pos, mode || "page");
    },

    charCoords: function(pos, mode) {
      return charCoords(this, clipPos(this.doc, pos), mode || "page");
    },

    coordsChar: function(coords, mode) {
      coords = fromCoordSystem(this, coords, mode || "page");
      return coordsChar(this, coords.left, coords.top);
    },

    lineAtHeight: function(height, mode) {
      height = fromCoordSystem(this, {top: height, left: 0}, mode || "page").top;
      return lineAtHeight(this.doc, height + this.display.viewOffset);
    },
    heightAtLine: function(line, mode) {
      var end = false, lineObj;
      if (typeof line == "number") {
        var last = this.doc.first + this.doc.size - 1;
        if (line < this.doc.first) line = this.doc.first;
        else if (line > last) { line = last; end = true; }
        lineObj = getLine(this.doc, line);
      } else {
        lineObj = line;
      }
      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || "page").top +
        (end ? this.doc.height - heightAtLine(lineObj) : 0);
    },

    defaultTextHeight: function() { return textHeight(this.display); },
    defaultCharWidth: function() { return charWidth(this.display); },

    setGutterMarker: methodOp(function(line, gutterID, value) {
      return changeLine(this.doc, line, "gutter", function(line) {
        var markers = line.gutterMarkers || (line.gutterMarkers = {});
        markers[gutterID] = value;
        if (!value && isEmpty(markers)) line.gutterMarkers = null;
        return true;
      });
    }),

    clearGutter: methodOp(function(gutterID) {
      var cm = this, doc = cm.doc, i = doc.first;
      doc.iter(function(line) {
        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
          line.gutterMarkers[gutterID] = null;
          regLineChange(cm, i, "gutter");
          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;
        }
        ++i;
      });
    }),

    lineInfo: function(line) {
      if (typeof line == "number") {
        if (!isLine(this.doc, line)) return null;
        var n = line;
        line = getLine(this.doc, line);
        if (!line) return null;
      } else {
        var n = lineNo(line);
        if (n == null) return null;
      }
      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,
              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,
              widgets: line.widgets};
    },

    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo};},

    addWidget: function(pos, node, scroll, vert, horiz) {
      var display = this.display;
      pos = cursorCoords(this, clipPos(this.doc, pos));
      var top = pos.bottom, left = pos.left;
      node.style.position = "absolute";
      node.setAttribute("cm-ignore-events", "true");
      this.display.input.setUneditable(node);
      display.sizer.appendChild(node);
      if (vert == "over") {
        top = pos.top;
      } else if (vert == "above" || vert == "near") {
        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),
        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
        // Default to positioning above (if specified and possible); otherwise default to positioning below
        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)
          top = pos.top - node.offsetHeight;
        else if (pos.bottom + node.offsetHeight <= vspace)
          top = pos.bottom;
        if (left + node.offsetWidth > hspace)
          left = hspace - node.offsetWidth;
      }
      node.style.top = top + "px";
      node.style.left = node.style.right = "";
      if (horiz == "right") {
        left = display.sizer.clientWidth - node.offsetWidth;
        node.style.right = "0px";
      } else {
        if (horiz == "left") left = 0;
        else if (horiz == "middle") left = (display.sizer.clientWidth - node.offsetWidth) / 2;
        node.style.left = left + "px";
      }
      if (scroll)
        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);
    },

    triggerOnKeyDown: methodOp(onKeyDown),
    triggerOnKeyPress: methodOp(onKeyPress),
    triggerOnKeyUp: onKeyUp,

    execCommand: function(cmd) {
      if (commands.hasOwnProperty(cmd))
        return commands[cmd].call(null, this);
    },

    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),

    findPosH: function(from, amount, unit, visually) {
      var dir = 1;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        cur = findPosH(this.doc, cur, dir, unit, visually);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveH: methodOp(function(dir, unit) {
      var cm = this;
      cm.extendSelectionsBy(function(range) {
        if (cm.display.shift || cm.doc.extend || range.empty())
          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);
        else
          return dir < 0 ? range.from() : range.to();
      }, sel_move);
    }),

    deleteH: methodOp(function(dir, unit) {
      var sel = this.doc.sel, doc = this.doc;
      if (sel.somethingSelected())
        doc.replaceSelection("", null, "+delete");
      else
        deleteNearSelection(this, function(range) {
          var other = findPosH(doc, range.head, dir, unit, false);
          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other};
        });
    }),

    findPosV: function(from, amount, unit, goalColumn) {
      var dir = 1, x = goalColumn;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        var coords = cursorCoords(this, cur, "div");
        if (x == null) x = coords.left;
        else coords.left = x;
        cur = findPosV(this, coords, dir, unit);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveV: methodOp(function(dir, unit) {
      var cm = this, doc = this.doc, goals = [];
      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();
      doc.extendSelectionsBy(function(range) {
        if (collapse)
          return dir < 0 ? range.from() : range.to();
        var headPos = cursorCoords(cm, range.head, "div");
        if (range.goalColumn != null) headPos.left = range.goalColumn;
        goals.push(headPos.left);
        var pos = findPosV(cm, headPos, dir, unit);
        if (unit == "page" && range == doc.sel.primary())
          addToScrollPos(cm, null, charCoords(cm, pos, "div").top - headPos.top);
        return pos;
      }, sel_move);
      if (goals.length) for (var i = 0; i < doc.sel.ranges.length; i++)
        doc.sel.ranges[i].goalColumn = goals[i];
    }),

    // Find the word at the given position (as returned by coordsChar).
    findWordAt: function(pos) {
      var doc = this.doc, line = getLine(doc, pos.line).text;
      var start = pos.ch, end = pos.ch;
      if (line) {
        var helper = this.getHelper(pos, "wordChars");
        if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;
        var startChar = line.charAt(start);
        var check = isWordChar(startChar, helper)
          ? function(ch) { return isWordChar(ch, helper); }
          : /\s/.test(startChar) ? function(ch) {return /\s/.test(ch);}
          : function(ch) {return !/\s/.test(ch) && !isWordChar(ch);};
        while (start > 0 && check(line.charAt(start - 1))) --start;
        while (end < line.length && check(line.charAt(end))) ++end;
      }
      return new Range(Pos(pos.line, start), Pos(pos.line, end));
    },

    toggleOverwrite: function(value) {
      if (value != null && value == this.state.overwrite) return;
      if (this.state.overwrite = !this.state.overwrite)
        addClass(this.display.cursorDiv, "CodeMirror-overwrite");
      else
        rmClass(this.display.cursorDiv, "CodeMirror-overwrite");

      signal(this, "overwriteToggle", this, this.state.overwrite);
    },
    hasFocus: function() { return this.display.input.getField() == activeElt(); },
    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit); },

    scrollTo: methodOp(function(x, y) {
      if (x != null || y != null) resolveScrollToPos(this);
      if (x != null) this.curOp.scrollLeft = x;
      if (y != null) this.curOp.scrollTop = y;
    }),
    getScrollInfo: function() {
      var scroller = this.display.scroller;
      return {left: scroller.scrollLeft, top: scroller.scrollTop,
              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
              clientHeight: displayHeight(this), clientWidth: displayWidth(this)};
    },

    scrollIntoView: methodOp(function(range, margin) {
      if (range == null) {
        range = {from: this.doc.sel.primary().head, to: null};
        if (margin == null) margin = this.options.cursorScrollMargin;
      } else if (typeof range == "number") {
        range = {from: Pos(range, 0), to: null};
      } else if (range.from == null) {
        range = {from: range, to: null};
      }
      if (!range.to) range.to = range.from;
      range.margin = margin || 0;

      if (range.from.line != null) {
        resolveScrollToPos(this);
        this.curOp.scrollToPos = range;
      } else {
        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left),
                                      Math.min(range.from.top, range.to.top) - range.margin,
                                      Math.max(range.from.right, range.to.right),
                                      Math.max(range.from.bottom, range.to.bottom) + range.margin);
        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);
      }
    }),

    setSize: methodOp(function(width, height) {
      var cm = this;
      function interpret(val) {
        return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
      }
      if (width != null) cm.display.wrapper.style.width = interpret(width);
      if (height != null) cm.display.wrapper.style.height = interpret(height);
      if (cm.options.lineWrapping) clearLineMeasurementCache(this);
      var lineNo = cm.display.viewFrom;
      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {
        if (line.widgets) for (var i = 0; i < line.widgets.length; i++)
          if (line.widgets[i].noHScroll) { regLineChange(cm, lineNo, "widget"); break; }
        ++lineNo;
      });
      cm.curOp.forceUpdate = true;
      signal(cm, "refresh", this);
    }),

    operation: function(f){return runInOp(this, f);},

    refresh: methodOp(function() {
      var oldHeight = this.display.cachedTextHeight;
      regChange(this);
      this.curOp.forceUpdate = true;
      clearCaches(this);
      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);
      updateGutterSpace(this);
      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)
        estimateLineHeights(this);
      signal(this, "refresh", this);
    }),

    swapDoc: methodOp(function(doc) {
      var old = this.doc;
      old.cm = null;
      attachDoc(this, doc);
      clearCaches(this);
      this.display.input.reset();
      this.scrollTo(doc.scrollLeft, doc.scrollTop);
      this.curOp.forceScroll = true;
      signalLater(this, "swapDoc", this, old);
      return old;
    }),

    getInputField: function(){return this.display.input.getField();},
    getWrapperElement: function(){return this.display.wrapper;},
    getScrollerElement: function(){return this.display.scroller;},
    getGutterElement: function(){return this.display.gutters;}
  };
  eventMixin(CodeMirror);

  // OPTION DEFAULTS

  // The default configuration options.
  var defaults = CodeMirror.defaults = {};
  // Functions to run when options are changed.
  var optionHandlers = CodeMirror.optionHandlers = {};

  function option(name, deflt, handle, notOnInit) {
    CodeMirror.defaults[name] = deflt;
    if (handle) optionHandlers[name] =
      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;
  }

  // Passed to option handlers when there is no old value.
  var Init = CodeMirror.Init = {toString: function(){return "CodeMirror.Init";}};

  // These two are, on init, called from the constructor because they
  // have to be initialized before the editor can start at all.
  option("value", "", function(cm, val) {
    cm.setValue(val);
  }, true);
  option("mode", null, function(cm, val) {
    cm.doc.modeOption = val;
    loadMode(cm);
  }, true);

  option("indentUnit", 2, loadMode, true);
  option("indentWithTabs", false);
  option("smartIndent", true);
  option("tabSize", 4, function(cm) {
    resetModeState(cm);
    clearCaches(cm);
    regChange(cm);
  }, true);
  option("lineSeparator", null, function(cm, val) {
    cm.doc.lineSep = val;
    if (!val) return;
    var newBreaks = [], lineNo = cm.doc.first;
    cm.doc.iter(function(line) {
      for (var pos = 0;;) {
        var found = line.text.indexOf(val, pos);
        if (found == -1) break;
        pos = found + val.length;
        newBreaks.push(Pos(lineNo, found));
      }
      lineNo++;
    });
    for (var i = newBreaks.length - 1; i >= 0; i--)
      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length))
  });
  option("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(cm, val, old) {
    cm.state.specialChars = new RegExp(val.source + (val.test("\t") ? "" : "|\t"), "g");
    if (old != CodeMirror.Init) cm.refresh();
  });
  option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {cm.refresh();}, true);
  option("electricChars", true);
  option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
    throw new Error("inputStyle can not (yet) be changed in a running editor"); // FIXME
  }, true);
  option("rtlMoveVisually", !windows);
  option("wholeLineUpdateBefore", true);

  option("theme", "default", function(cm) {
    themeChanged(cm);
    guttersChanged(cm);
  }, true);
  option("keyMap", "default", function(cm, val, old) {
    var next = getKeyMap(val);
    var prev = old != CodeMirror.Init && getKeyMap(old);
    if (prev && prev.detach) prev.detach(cm, next);
    if (next.attach) next.attach(cm, prev || null);
  });
  option("extraKeys", null);

  option("lineWrapping", false, wrappingChanged, true);
  option("gutters", [], function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("fixedGutter", true, function(cm, val) {
    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
    cm.refresh();
  }, true);
  option("coverGutterNextToScrollbar", false, function(cm) {updateScrollbars(cm);}, true);
  option("scrollbarStyle", "native", function(cm) {
    initScrollbars(cm);
    updateScrollbars(cm);
    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);
    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
  }, true);
  option("lineNumbers", false, function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("firstLineNumber", 1, guttersChanged, true);
  option("lineNumberFormatter", function(integer) {return integer;}, guttersChanged, true);
  option("showCursorWhenSelecting", false, updateSelection, true);

  option("resetSelectionOnContextMenu", true);
  option("lineWiseCopyCut", true);

  option("readOnly", false, function(cm, val) {
    if (val == "nocursor") {
      onBlur(cm);
      cm.display.input.blur();
      cm.display.disabled = true;
    } else {
      cm.display.disabled = false;
    }
    cm.display.input.readOnlyChanged(val)
  });
  option("disableInput", false, function(cm, val) {if (!val) cm.display.input.reset();}, true);
  option("dragDrop", true, dragDropChanged);
  option("allowDropFileTypes", null);

  option("cursorBlinkRate", 530);
  option("cursorScrollMargin", 0);
  option("cursorHeight", 1, updateSelection, true);
  option("singleCursorHeightPerLine", true, updateSelection, true);
  option("workTime", 100);
  option("workDelay", 100);
  option("flattenSpans", true, resetModeState, true);
  option("addModeClass", false, resetModeState, true);
  option("pollInterval", 100);
  option("undoDepth", 200, function(cm, val){cm.doc.history.undoDepth = val;});
  option("historyEventDelay", 1250);
  option("viewportMargin", 10, function(cm){cm.refresh();}, true);
  option("maxHighlightLength", 10000, resetModeState, true);
  option("moveInputWithCursor", true, function(cm, val) {
    if (!val) cm.display.input.resetPosition();
  });

  option("tabindex", null, function(cm, val) {
    cm.display.input.getField().tabIndex = val || "";
  });
  option("autofocus", null);

  // MODE DEFINITION AND QUERYING

  // Known modes, by name and by MIME
  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};

  // Extra arguments are stored as the mode's dependencies, which is
  // used by (legacy) mechanisms like loadmode.js to automatically
  // load a mode. (Preferred mechanism is the require/define calls.)
  CodeMirror.defineMode = function(name, mode) {
    if (!CodeMirror.defaults.mode && name != "null") CodeMirror.defaults.mode = name;
    if (arguments.length > 2)
      mode.dependencies = Array.prototype.slice.call(arguments, 2);
    modes[name] = mode;
  };

  CodeMirror.defineMIME = function(mime, spec) {
    mimeModes[mime] = spec;
  };

  // Given a MIME type, a {name, ...options} config object, or a name
  // string, return a mode config object.
  CodeMirror.resolveMode = function(spec) {
    if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
      spec = mimeModes[spec];
    } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
      var found = mimeModes[spec.name];
      if (typeof found == "string") found = {name: found};
      spec = createObj(found, spec);
      spec.name = found.name;
    } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
      return CodeMirror.resolveMode("application/xml");
    }
    if (typeof spec == "string") return {name: spec};
    else return spec || {name: "null"};
  };

  // Given a mode spec (anything that resolveMode accepts), find and
  // initialize an actual mode object.
  CodeMirror.getMode = function(options, spec) {
    var spec = CodeMirror.resolveMode(spec);
    var mfactory = modes[spec.name];
    if (!mfactory) return CodeMirror.getMode(options, "text/plain");
    var modeObj = mfactory(options, spec);
    if (modeExtensions.hasOwnProperty(spec.name)) {
      var exts = modeExtensions[spec.name];
      for (var prop in exts) {
        if (!exts.hasOwnProperty(prop)) continue;
        if (modeObj.hasOwnProperty(prop)) modeObj["_" + prop] = modeObj[prop];
        modeObj[prop] = exts[prop];
      }
    }
    modeObj.name = spec.name;
    if (spec.helperType) modeObj.helperType = spec.helperType;
    if (spec.modeProps) for (var prop in spec.modeProps)
      modeObj[prop] = spec.modeProps[prop];

    return modeObj;
  };

  // Minimal default mode.
  CodeMirror.defineMode("null", function() {
    return {token: function(stream) {stream.skipToEnd();}};
  });
  CodeMirror.defineMIME("text/plain", "null");

  // This can be used to attach properties to mode objects from
  // outside the actual mode definition.
  var modeExtensions = CodeMirror.modeExtensions = {};
  CodeMirror.extendMode = function(mode, properties) {
    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});
    copyObj(properties, exts);
  };

  // EXTENSIONS

  CodeMirror.defineExtension = function(name, func) {
    CodeMirror.prototype[name] = func;
  };
  CodeMirror.defineDocExtension = function(name, func) {
    Doc.prototype[name] = func;
  };
  CodeMirror.defineOption = option;

  var initHooks = [];
  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};

  var helpers = CodeMirror.helpers = {};
  CodeMirror.registerHelper = function(type, name, value) {
    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []};
    helpers[type][name] = value;
  };
  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {
    CodeMirror.registerHelper(type, name, value);
    helpers[type]._global.push({pred: predicate, val: value});
  };

  // MODE STATE HANDLING

  // Utility functions for working with state. Exported because nested
  // modes need to do this for their inner modes.

  var copyState = CodeMirror.copyState = function(mode, state) {
    if (state === true) return state;
    if (mode.copyState) return mode.copyState(state);
    var nstate = {};
    for (var n in state) {
      var val = state[n];
      if (val instanceof Array) val = val.concat([]);
      nstate[n] = val;
    }
    return nstate;
  };

  var startState = CodeMirror.startState = function(mode, a1, a2) {
    return mode.startState ? mode.startState(a1, a2) : true;
  };

  // Given a mode and a state (for that mode), find the inner mode and
  // state at the position that the state refers to.
  CodeMirror.innerMode = function(mode, state) {
    while (mode.innerMode) {
      var info = mode.innerMode(state);
      if (!info || info.mode == mode) break;
      state = info.state;
      mode = info.mode;
    }
    return info || {mode: mode, state: state};
  };

  // STANDARD COMMANDS

  // Commands are parameter-less actions that can be performed on an
  // editor, mostly used for keybindings.
  var commands = CodeMirror.commands = {
    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);},
    singleSelection: function(cm) {
      cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
    },
    killLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        if (range.empty()) {
          var len = getLine(cm.doc, range.head.line).text.length;
          if (range.head.ch == len && range.head.line < cm.lastLine())
            return {from: range.head, to: Pos(range.head.line + 1, 0)};
          else
            return {from: range.head, to: Pos(range.head.line, len)};
        } else {
          return {from: range.from(), to: range.to()};
        }
      });
    },
    deleteLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0),
                to: clipPos(cm.doc, Pos(range.to().line + 1, 0))};
      });
    },
    delLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0), to: range.from()};
      });
    },
    delWrappedLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var leftPos = cm.coordsChar({left: 0, top: top}, "div");
        return {from: leftPos, to: range.from()};
      });
    },
    delWrappedLineRight: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
        return {from: range.from(), to: rightPos };
      });
    },
    undo: function(cm) {cm.undo();},
    redo: function(cm) {cm.redo();},
    undoSelection: function(cm) {cm.undoSelection();},
    redoSelection: function(cm) {cm.redoSelection();},
    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},
    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},
    goLineStart: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineStart(cm, range.head.line); },
                            {origin: "+move", bias: 1});
    },
    goLineStartSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        return lineStartSmart(cm, range.head);
      }, {origin: "+move", bias: 1});
    },
    goLineEnd: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineEnd(cm, range.head.line); },
                            {origin: "+move", bias: -1});
    },
    goLineRight: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
      }, sel_move);
    },
    goLineLeft: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: 0, top: top}, "div");
      }, sel_move);
    },
    goLineLeftSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var pos = cm.coordsChar({left: 0, top: top}, "div");
        if (pos.ch < cm.getLine(pos.line).search(/\S/)) return lineStartSmart(cm, range.head);
        return pos;
      }, sel_move);
    },
    goLineUp: function(cm) {cm.moveV(-1, "line");},
    goLineDown: function(cm) {cm.moveV(1, "line");},
    goPageUp: function(cm) {cm.moveV(-1, "page");},
    goPageDown: function(cm) {cm.moveV(1, "page");},
    goCharLeft: function(cm) {cm.moveH(-1, "char");},
    goCharRight: function(cm) {cm.moveH(1, "char");},
    goColumnLeft: function(cm) {cm.moveH(-1, "column");},
    goColumnRight: function(cm) {cm.moveH(1, "column");},
    goWordLeft: function(cm) {cm.moveH(-1, "word");},
    goGroupRight: function(cm) {cm.moveH(1, "group");},
    goGroupLeft: function(cm) {cm.moveH(-1, "group");},
    goWordRight: function(cm) {cm.moveH(1, "word");},
    delCharBefore: function(cm) {cm.deleteH(-1, "char");},
    delCharAfter: function(cm) {cm.deleteH(1, "char");},
    delWordBefore: function(cm) {cm.deleteH(-1, "word");},
    delWordAfter: function(cm) {cm.deleteH(1, "word");},
    delGroupBefore: function(cm) {cm.deleteH(-1, "group");},
    delGroupAfter: function(cm) {cm.deleteH(1, "group");},
    indentAuto: function(cm) {cm.indentSelection("smart");},
    indentMore: function(cm) {cm.indentSelection("add");},
    indentLess: function(cm) {cm.indentSelection("subtract");},
    insertTab: function(cm) {cm.replaceSelection("\t");},
    insertSoftTab: function(cm) {
      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
      for (var i = 0; i < ranges.length; i++) {
        var pos = ranges[i].from();
        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
        spaces.push(new Array(tabSize - col % tabSize + 1).join(" "));
      }
      cm.replaceSelections(spaces);
    },
    defaultTab: function(cm) {
      if (cm.somethingSelected()) cm.indentSelection("add");
      else cm.execCommand("insertTab");
    },
    transposeChars: function(cm) {
      runInOp(cm, function() {
        var ranges = cm.listSelections(), newSel = [];
        for (var i = 0; i < ranges.length; i++) {
          var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;
          if (line) {
            if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1);
            if (cur.ch > 0) {
              cur = new Pos(cur.line, cur.ch + 1);
              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),
                              Pos(cur.line, cur.ch - 2), cur, "+transpose");
            } else if (cur.line > cm.doc.first) {
              var prev = getLine(cm.doc, cur.line - 1).text;
              if (prev)
                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +
                                prev.charAt(prev.length - 1),
                                Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), "+transpose");
            }
          }
          newSel.push(new Range(cur, cur));
        }
        cm.setSelections(newSel);
      });
    },
    newlineAndIndent: function(cm) {
      runInOp(cm, function() {
        var len = cm.listSelections().length;
        for (var i = 0; i < len; i++) {
          var range = cm.listSelections()[i];
          cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, "+input");
          cm.indentLine(range.from().line + 1, null, true);
        }
        ensureCursorVisible(cm);
      });
    },
    toggleOverwrite: function(cm) {cm.toggleOverwrite();}
  };


  // STANDARD KEYMAPS

  var keyMap = CodeMirror.keyMap = {};

  keyMap.basic = {
    "Left": "goCharLeft", "Right": "goCharRight", "Up": "goLineUp", "Down": "goLineDown",
    "End": "goLineEnd", "Home": "goLineStartSmart", "PageUp": "goPageUp", "PageDown": "goPageDown",
    "Delete": "delCharAfter", "Backspace": "delCharBefore", "Shift-Backspace": "delCharBefore",
    "Tab": "defaultTab", "Shift-Tab": "indentAuto",
    "Enter": "newlineAndIndent", "Insert": "toggleOverwrite",
    "Esc": "singleSelection"
  };
  // Note that the save and find-related commands aren't defined by
  // default. User code or addons can define them. Unknown commands
  // are simply ignored.
  keyMap.pcDefault = {
    "Ctrl-A": "selectAll", "Ctrl-D": "deleteLine", "Ctrl-Z": "undo", "Shift-Ctrl-Z": "redo", "Ctrl-Y": "redo",
    "Ctrl-Home": "goDocStart", "Ctrl-End": "goDocEnd", "Ctrl-Up": "goLineUp", "Ctrl-Down": "goLineDown",
    "Ctrl-Left": "goGroupLeft", "Ctrl-Right": "goGroupRight", "Alt-Left": "goLineStart", "Alt-Right": "goLineEnd",
    "Ctrl-Backspace": "delGroupBefore", "Ctrl-Delete": "delGroupAfter", "Ctrl-S": "save", "Ctrl-F": "find",
    "Ctrl-G": "findNext", "Shift-Ctrl-G": "findPrev", "Shift-Ctrl-F": "replace", "Shift-Ctrl-R": "replaceAll",
    "Ctrl-[": "indentLess", "Ctrl-]": "indentMore",
    "Ctrl-U": "undoSelection", "Shift-Ctrl-U": "redoSelection", "Alt-U": "redoSelection",
    fallthrough: "basic"
  };
  // Very basic readline/emacs-style bindings, which are standard on Mac.
  keyMap.emacsy = {
    "Ctrl-F": "goCharRight", "Ctrl-B": "goCharLeft", "Ctrl-P": "goLineUp", "Ctrl-N": "goLineDown",
    "Alt-F": "goWordRight", "Alt-B": "goWordLeft", "Ctrl-A": "goLineStart", "Ctrl-E": "goLineEnd",
    "Ctrl-V": "goPageDown", "Shift-Ctrl-V": "goPageUp", "Ctrl-D": "delCharAfter", "Ctrl-H": "delCharBefore",
    "Alt-D": "delWordAfter", "Alt-Backspace": "delWordBefore", "Ctrl-K": "killLine", "Ctrl-T": "transposeChars"
  };
  keyMap.macDefault = {
    "Cmd-A": "selectAll", "Cmd-D": "deleteLine", "Cmd-Z": "undo", "Shift-Cmd-Z": "redo", "Cmd-Y": "redo",
    "Cmd-Home": "goDocStart", "Cmd-Up": "goDocStart", "Cmd-End": "goDocEnd", "Cmd-Down": "goDocEnd", "Alt-Left": "goGroupLeft",
    "Alt-Right": "goGroupRight", "Cmd-Left": "goLineLeft", "Cmd-Right": "goLineRight", "Alt-Backspace": "delGroupBefore",
    "Ctrl-Alt-Backspace": "delGroupAfter", "Alt-Delete": "delGroupAfter", "Cmd-S": "save", "Cmd-F": "find",
    "Cmd-G": "findNext", "Shift-Cmd-G": "findPrev", "Cmd-Alt-F": "replace", "Shift-Cmd-Alt-F": "replaceAll",
    "Cmd-[": "indentLess", "Cmd-]": "indentMore", "Cmd-Backspace": "delWrappedLineLeft", "Cmd-Delete": "delWrappedLineRight",
    "Cmd-U": "undoSelection", "Shift-Cmd-U": "redoSelection", "Ctrl-Up": "goDocStart", "Ctrl-Down": "goDocEnd",
    fallthrough: ["basic", "emacsy"]
  };
  keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;

  // KEYMAP DISPATCH

  function normalizeKeyName(name) {
    var parts = name.split(/-(?!$)/), name = parts[parts.length - 1];
    var alt, ctrl, shift, cmd;
    for (var i = 0; i < parts.length - 1; i++) {
      var mod = parts[i];
      if (/^(cmd|meta|m)$/i.test(mod)) cmd = true;
      else if (/^a(lt)?$/i.test(mod)) alt = true;
      else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;
      else if (/^s(hift)$/i.test(mod)) shift = true;
      else throw new Error("Unrecognized modifier name: " + mod);
    }
    if (alt) name = "Alt-" + name;
    if (ctrl) name = "Ctrl-" + name;
    if (cmd) name = "Cmd-" + name;
    if (shift) name = "Shift-" + name;
    return name;
  }

  // This is a kludge to keep keymaps mostly working as raw objects
  // (backwards compatibility) while at the same time support features
  // like normalization and multi-stroke key bindings. It compiles a
  // new normalized keymap, and then updates the old object to reflect
  // this.
  CodeMirror.normalizeKeyMap = function(keymap) {
    var copy = {};
    for (var keyname in keymap) if (keymap.hasOwnProperty(keyname)) {
      var value = keymap[keyname];
      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue;
      if (value == "...") { delete keymap[keyname]; continue; }

      var keys = map(keyname.split(" "), normalizeKeyName);
      for (var i = 0; i < keys.length; i++) {
        var val, name;
        if (i == keys.length - 1) {
          name = keys.join(" ");
          val = value;
        } else {
          name = keys.slice(0, i + 1).join(" ");
          val = "...";
        }
        var prev = copy[name];
        if (!prev) copy[name] = val;
        else if (prev != val) throw new Error("Inconsistent bindings for " + name);
      }
      delete keymap[keyname];
    }
    for (var prop in copy) keymap[prop] = copy[prop];
    return keymap;
  };

  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {
    map = getKeyMap(map);
    var found = map.call ? map.call(key, context) : map[key];
    if (found === false) return "nothing";
    if (found === "...") return "multi";
    if (found != null && handle(found)) return "handled";

    if (map.fallthrough) {
      if (Object.prototype.toString.call(map.fallthrough) != "[object Array]")
        return lookupKey(key, map.fallthrough, handle, context);
      for (var i = 0; i < map.fallthrough.length; i++) {
        var result = lookupKey(key, map.fallthrough[i], handle, context);
        if (result) return result;
      }
    }
  };

  // Modifier key presses don't count as 'real' key presses for the
  // purpose of keymap fallthrough.
  var isModifierKey = CodeMirror.isModifierKey = function(value) {
    var name = typeof value == "string" ? value : keyNames[value.keyCode];
    return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
  };

  // Look up the name of a key as indicated by an event object.
  var keyName = CodeMirror.keyName = function(event, noShift) {
    if (presto && event.keyCode == 34 && event["char"]) return false;
    var base = keyNames[event.keyCode], name = base;
    if (name == null || event.altGraphKey) return false;
    if (event.altKey && base != "Alt") name = "Alt-" + name;
    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != "Ctrl") name = "Ctrl-" + name;
    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != "Cmd") name = "Cmd-" + name;
    if (!noShift && event.shiftKey && base != "Shift") name = "Shift-" + name;
    return name;
  };

  function getKeyMap(val) {
    return typeof val == "string" ? keyMap[val] : val;
  }

  // FROMTEXTAREA

  CodeMirror.fromTextArea = function(textarea, options) {
    options = options ? copyObj(options) : {};
    options.value = textarea.value;
    if (!options.tabindex && textarea.tabIndex)
      options.tabindex = textarea.tabIndex;
    if (!options.placeholder && textarea.placeholder)
      options.placeholder = textarea.placeholder;
    // Set autofocus to true if this textarea is focused, or if it has
    // autofocus and no other element is focused.
    if (options.autofocus == null) {
      var hasFocus = activeElt();
      options.autofocus = hasFocus == textarea ||
        textarea.getAttribute("autofocus") != null && hasFocus == document.body;
    }

    function save() {textarea.value = cm.getValue();}
    if (textarea.form) {
      on(textarea.form, "submit", save);
      // Deplorable hack to make the submit method do the right thing.
      if (!options.leaveSubmitMethodAlone) {
        var form = textarea.form, realSubmit = form.submit;
        try {
          var wrappedSubmit = form.submit = function() {
            save();
            form.submit = realSubmit;
            form.submit();
            form.submit = wrappedSubmit;
          };
        } catch(e) {}
      }
    }

    options.finishInit = function(cm) {
      cm.save = save;
      cm.getTextArea = function() { return textarea; };
      cm.toTextArea = function() {
        cm.toTextArea = isNaN; // Prevent this from being ran twice
        save();
        textarea.parentNode.removeChild(cm.getWrapperElement());
        textarea.style.display = "";
        if (textarea.form) {
          off(textarea.form, "submit", save);
          if (typeof textarea.form.submit == "function")
            textarea.form.submit = realSubmit;
        }
      };
    };

    textarea.style.display = "none";
    var cm = CodeMirror(function(node) {
      textarea.parentNode.insertBefore(node, textarea.nextSibling);
    }, options);
    return cm;
  };

  // STRING STREAM

  // Fed to the mode parsers, provides helper functions to make
  // parsers more succinct.

  var StringStream = CodeMirror.StringStream = function(string, tabSize) {
    this.pos = this.start = 0;
    this.string = string;
    this.tabSize = tabSize || 8;
    this.lastColumnPos = this.lastColumnValue = 0;
    this.lineStart = 0;
  };

  StringStream.prototype = {
    eol: function() {return this.pos >= this.string.length;},
    sol: function() {return this.pos == this.lineStart;},
    peek: function() {return this.string.charAt(this.pos) || undefined;},
    next: function() {
      if (this.pos < this.string.length)
        return this.string.charAt(this.pos++);
    },
    eat: function(match) {
      var ch = this.string.charAt(this.pos);
      if (typeof match == "string") var ok = ch == match;
      else var ok = ch && (match.test ? match.test(ch) : match(ch));
      if (ok) {++this.pos; return ch;}
    },
    eatWhile: function(match) {
      var start = this.pos;
      while (this.eat(match)){}
      return this.pos > start;
    },
    eatSpace: function() {
      var start = this.pos;
      while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;
      return this.pos > start;
    },
    skipToEnd: function() {this.pos = this.string.length;},
    skipTo: function(ch) {
      var found = this.string.indexOf(ch, this.pos);
      if (found > -1) {this.pos = found; return true;}
    },
    backUp: function(n) {this.pos -= n;},
    column: function() {
      if (this.lastColumnPos < this.start) {
        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
        this.lastColumnPos = this.start;
      }
      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    indentation: function() {
      return countColumn(this.string, null, this.tabSize) -
        (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    match: function(pattern, consume, caseInsensitive) {
      if (typeof pattern == "string") {
        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};
        var substr = this.string.substr(this.pos, pattern.length);
        if (cased(substr) == cased(pattern)) {
          if (consume !== false) this.pos += pattern.length;
          return true;
        }
      } else {
        var match = this.string.slice(this.pos).match(pattern);
        if (match && match.index > 0) return null;
        if (match && consume !== false) this.pos += match[0].length;
        return match;
      }
    },
    current: function(){return this.string.slice(this.start, this.pos);},
    hideFirstChars: function(n, inner) {
      this.lineStart += n;
      try { return inner(); }
      finally { this.lineStart -= n; }
    }
  };

  // TEXTMARKERS

  // Created with markText and setBookmark methods. A TextMarker is a
  // handle that can be used to clear or find a marked position in the
  // document. Line objects hold arrays (markedSpans) containing
  // {from, to, marker} object pointing to such marker objects, and
  // indicating that such a marker is present on that line. Multiple
  // lines may point to the same marker when it spans across lines.
  // The spans will have null for their from/to properties when the
  // marker continues beyond the start/end of the line. Markers have
  // links back to the lines they currently touch.

  var nextMarkerId = 0;

  var TextMarker = CodeMirror.TextMarker = function(doc, type) {
    this.lines = [];
    this.type = type;
    this.doc = doc;
    this.id = ++nextMarkerId;
  };
  eventMixin(TextMarker);

  // Clear the marker.
  TextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    var cm = this.doc.cm, withOp = cm && !cm.curOp;
    if (withOp) startOperation(cm);
    if (hasHandler(this, "clear")) {
      var found = this.find();
      if (found) signalLater(this, "clear", found.from, found.to);
    }
    var min = null, max = null;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), "text");
      else if (cm) {
        if (span.to != null) max = lineNo(line);
        if (span.from != null) min = lineNo(line);
      }
      line.markedSpans = removeMarkedSpan(line.markedSpans, span);
      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)
        updateLineHeight(line, textHeight(cm.display));
    }
    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {
      var visual = visualLine(this.lines[i]), len = lineLength(visual);
      if (len > cm.display.maxLineLength) {
        cm.display.maxLine = visual;
        cm.display.maxLineLength = len;
        cm.display.maxLineChanged = true;
      }
    }

    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1);
    this.lines.length = 0;
    this.explicitlyCleared = true;
    if (this.atomic && this.doc.cantEdit) {
      this.doc.cantEdit = false;
      if (cm) reCheckSelection(cm.doc);
    }
    if (cm) signalLater(cm, "markerCleared", cm, this);
    if (withOp) endOperation(cm);
    if (this.parent) this.parent.clear();
  };

  // Find the position of the marker in the document. Returns a {from,
  // to} object by default. Side can be passed to get a specific side
  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the
  // Pos objects returned contain a line object, rather than a line
  // number (used to prevent looking up the same line twice).
  TextMarker.prototype.find = function(side, lineObj) {
    if (side == null && this.type == "bookmark") side = 1;
    var from, to;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (span.from != null) {
        from = Pos(lineObj ? line : lineNo(line), span.from);
        if (side == -1) return from;
      }
      if (span.to != null) {
        to = Pos(lineObj ? line : lineNo(line), span.to);
        if (side == 1) return to;
      }
    }
    return from && {from: from, to: to};
  };

  // Signals that the marker's widget changed, and surrounding layout
  // should be recomputed.
  TextMarker.prototype.changed = function() {
    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
    if (!pos || !cm) return;
    runInOp(cm, function() {
      var line = pos.line, lineN = lineNo(pos.line);
      var view = findViewForLine(cm, lineN);
      if (view) {
        clearLineMeasurementCacheFor(view);
        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
      }
      cm.curOp.updateMaxLine = true;
      if (!lineIsHidden(widget.doc, line) && widget.height != null) {
        var oldHeight = widget.height;
        widget.height = null;
        var dHeight = widgetHeight(widget) - oldHeight;
        if (dHeight)
          updateLineHeight(line, line.height + dHeight);
      }
    });
  };

  TextMarker.prototype.attachLine = function(line) {
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)
        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
    }
    this.lines.push(line);
  };
  TextMarker.prototype.detachLine = function(line) {
    this.lines.splice(indexOf(this.lines, line), 1);
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
    }
  };

  // Collapsed markers have unique ids, in order to be able to order
  // them, which is needed for uniquely determining an outer marker
  // when they overlap (they may nest, but not partially overlap).
  var nextMarkerId = 0;

  // Create a marker, wire it up to the right lines, and
  function markText(doc, from, to, options, type) {
    // Shared markers (across linked documents) are handled separately
    // (markTextShared will call out to this again, once per
    // document).
    if (options && options.shared) return markTextShared(doc, from, to, options, type);
    // Ensure we are in an operation.
    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);

    var marker = new TextMarker(doc, type), diff = cmp(from, to);
    if (options) copyObj(options, marker, false);
    // Don't connect empty markers unless clearWhenEmpty is false
    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)
      return marker;
    if (marker.replacedWith) {
      // Showing up as a widget implies collapsed (widget replaces text)
      marker.collapsed = true;
      marker.widgetNode = elt("span", [marker.replacedWith], "CodeMirror-widget");
      if (!options.handleMouseEvents) marker.widgetNode.setAttribute("cm-ignore-events", "true");
      if (options.insertLeft) marker.widgetNode.insertLeft = true;
    }
    if (marker.collapsed) {
      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||
          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))
        throw new Error("Inserting collapsed marker partially overlapping an existing one");
      sawCollapsedSpans = true;
    }

    if (marker.addToHistory)
      addChangeToHistory(doc, {from: from, to: to, origin: "markText"}, doc.sel, NaN);

    var curLine = from.line, cm = doc.cm, updateMaxLine;
    doc.iter(curLine, to.line + 1, function(line) {
      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)
        updateMaxLine = true;
      if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0);
      addMarkedSpan(line, new MarkedSpan(marker,
                                         curLine == from.line ? from.ch : null,
                                         curLine == to.line ? to.ch : null));
      ++curLine;
    });
    // lineIsHidden depends on the presence of the spans, so needs a second pass
    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {
      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);
    });

    if (marker.clearOnEnter) on(marker, "beforeCursorEnter", function() { marker.clear(); });

    if (marker.readOnly) {
      sawReadOnlySpans = true;
      if (doc.history.done.length || doc.history.undone.length)
        doc.clearHistory();
    }
    if (marker.collapsed) {
      marker.id = ++nextMarkerId;
      marker.atomic = true;
    }
    if (cm) {
      // Sync editor state
      if (updateMaxLine) cm.curOp.updateMaxLine = true;
      if (marker.collapsed)
        regChange(cm, from.line, to.line + 1);
      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)
        for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, "text");
      if (marker.atomic) reCheckSelection(cm.doc);
      signalLater(cm, "markerAdded", cm, marker);
    }
    return marker;
  }

  // SHARED TEXTMARKERS

  // A shared marker spans multiple linked documents. It is
  // implemented as a meta-marker-object controlling multiple normal
  // markers.
  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {
    this.markers = markers;
    this.primary = primary;
    for (var i = 0; i < markers.length; ++i)
      markers[i].parent = this;
  };
  eventMixin(SharedTextMarker);

  SharedTextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    this.explicitlyCleared = true;
    for (var i = 0; i < this.markers.length; ++i)
      this.markers[i].clear();
    signalLater(this, "clear");
  };
  SharedTextMarker.prototype.find = function(side, lineObj) {
    return this.primary.find(side, lineObj);
  };

  function markTextShared(doc, from, to, options, type) {
    options = copyObj(options);
    options.shared = false;
    var markers = [markText(doc, from, to, options, type)], primary = markers[0];
    var widget = options.widgetNode;
    linkedDocs(doc, function(doc) {
      if (widget) options.widgetNode = widget.cloneNode(true);
      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));
      for (var i = 0; i < doc.linked.length; ++i)
        if (doc.linked[i].isParent) return;
      primary = lst(markers);
    });
    return new SharedTextMarker(markers, primary);
  }

  function findSharedMarkers(doc) {
    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())),
                         function(m) { return m.parent; });
  }

  function copySharedMarkers(doc, markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], pos = marker.find();
      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
      if (cmp(mFrom, mTo)) {
        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
        marker.markers.push(subMark);
        subMark.parent = marker;
      }
    }
  }

  function detachSharedMarkers(markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], linked = [marker.primary.doc];;
      linkedDocs(marker.primary.doc, function(d) { linked.push(d); });
      for (var j = 0; j < marker.markers.length; j++) {
        var subMarker = marker.markers[j];
        if (indexOf(linked, subMarker.doc) == -1) {
          subMarker.parent = null;
          marker.markers.splice(j--, 1);
        }
      }
    }
  }

  // TEXTMARKER SPANS

  function MarkedSpan(marker, from, to) {
    this.marker = marker;
    this.from = from; this.to = to;
  }

  // Search an array of spans for a span matching the given marker.
  function getMarkedSpanFor(spans, marker) {
    if (spans) for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.marker == marker) return span;
    }
  }
  // Remove a span from an array, returning undefined if no spans are
  // left (we don't store arrays for lines without spans).
  function removeMarkedSpan(spans, span) {
    for (var r, i = 0; i < spans.length; ++i)
      if (spans[i] != span) (r || (r = [])).push(spans[i]);
    return r;
  }
  // Add a span to a line.
  function addMarkedSpan(line, span) {
    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
    span.marker.attachLine(line);
  }

  // Used for the algorithm that adjusts markers for a change in the
  // document. These functions cut an array of spans at a given
  // character position, returning an array of remaining chunks (or
  // undefined if nothing remains).
  function markedSpansBefore(old, startCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
      if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
      }
    }
    return nw;
  }
  function markedSpansAfter(old, endCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
      if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,
                                              span.to == null ? null : span.to - endCh));
      }
    }
    return nw;
  }

  // Given a change object, compute the new set of marker spans that
  // cover the line in which the change took place. Removes spans
  // entirely within the change, reconnects spans belonging to the
  // same marker that appear on both sides of the change, and cuts off
  // spans partially within the change. Returns an array of span
  // arrays with one element for each line in (after) the change.
  function stretchSpansOverChange(doc, change) {
    if (change.full) return null;
    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;
    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
    if (!oldFirst && !oldLast) return null;

    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
    // Get the spans that 'stick out' on both sides
    var first = markedSpansBefore(oldFirst, startCh, isInsert);
    var last = markedSpansAfter(oldLast, endCh, isInsert);

    // Next, merge those two ends
    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
    if (first) {
      // Fix up .to properties of first
      for (var i = 0; i < first.length; ++i) {
        var span = first[i];
        if (span.to == null) {
          var found = getMarkedSpanFor(last, span.marker);
          if (!found) span.to = startCh;
          else if (sameLine) span.to = found.to == null ? null : found.to + offset;
        }
      }
    }
    if (last) {
      // Fix up .from in last (or move them into first in case of sameLine)
      for (var i = 0; i < last.length; ++i) {
        var span = last[i];
        if (span.to != null) span.to += offset;
        if (span.from == null) {
          var found = getMarkedSpanFor(first, span.marker);
          if (!found) {
            span.from = offset;
            if (sameLine) (first || (first = [])).push(span);
          }
        } else {
          span.from += offset;
          if (sameLine) (first || (first = [])).push(span);
        }
      }
    }
    // Make sure we didn't create any zero-length spans
    if (first) first = clearEmptySpans(first);
    if (last && last != first) last = clearEmptySpans(last);

    var newMarkers = [first];
    if (!sameLine) {
      // Fill gap with whole-line-spans
      var gap = change.text.length - 2, gapMarkers;
      if (gap > 0 && first)
        for (var i = 0; i < first.length; ++i)
          if (first[i].to == null)
            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));
      for (var i = 0; i < gap; ++i)
        newMarkers.push(gapMarkers);
      newMarkers.push(last);
    }
    return newMarkers;
  }

  // Remove spans that are empty and don't have a clearWhenEmpty
  // option of false.
  function clearEmptySpans(spans) {
    for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)
        spans.splice(i--, 1);
    }
    if (!spans.length) return null;
    return spans;
  }

  // Used for un/re-doing changes from the history. Combines the
  // result of computing the existing spans with the set of spans that
  // existed in the history (so that deleting around a span and then
  // undoing brings back the span).
  function mergeOldSpans(doc, change) {
    var old = getOldSpans(doc, change);
    var stretched = stretchSpansOverChange(doc, change);
    if (!old) return stretched;
    if (!stretched) return old;

    for (var i = 0; i < old.length; ++i) {
      var oldCur = old[i], stretchCur = stretched[i];
      if (oldCur && stretchCur) {
        spans: for (var j = 0; j < stretchCur.length; ++j) {
          var span = stretchCur[j];
          for (var k = 0; k < oldCur.length; ++k)
            if (oldCur[k].marker == span.marker) continue spans;
          oldCur.push(span);
        }
      } else if (stretchCur) {
        old[i] = stretchCur;
      }
    }
    return old;
  }

  // Used to 'clip' out readOnly ranges when making a change.
  function removeReadOnlyRanges(doc, from, to) {
    var markers = null;
    doc.iter(from.line, to.line + 1, function(line) {
      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
        var mark = line.markedSpans[i].marker;
        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))
          (markers || (markers = [])).push(mark);
      }
    });
    if (!markers) return null;
    var parts = [{from: from, to: to}];
    for (var i = 0; i < markers.length; ++i) {
      var mk = markers[i], m = mk.find(0);
      for (var j = 0; j < parts.length; ++j) {
        var p = parts[j];
        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue;
        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)
          newParts.push({from: p.from, to: m.from});
        if (dto > 0 || !mk.inclusiveRight && !dto)
          newParts.push({from: m.to, to: p.to});
        parts.splice.apply(parts, newParts);
        j += newParts.length - 1;
      }
    }
    return parts;
  }

  // Connect or disconnect spans from a line.
  function detachMarkedSpans(line) {
    var spans = line.markedSpans;
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.detachLine(line);
    line.markedSpans = null;
  }
  function attachMarkedSpans(line, spans) {
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.attachLine(line);
    line.markedSpans = spans;
  }

  // Helpers used when computing which overlapping collapsed span
  // counts as the larger one.
  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0; }
  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0; }

  // Returns a number indicating which of two overlapping collapsed
  // spans is larger (and thus includes the other). Falls back to
  // comparing ids when the spans cover exactly the same range.
  function compareCollapsedMarkers(a, b) {
    var lenDiff = a.lines.length - b.lines.length;
    if (lenDiff != 0) return lenDiff;
    var aPos = a.find(), bPos = b.find();
    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
    if (fromCmp) return -fromCmp;
    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
    if (toCmp) return toCmp;
    return b.id - a.id;
  }

  // Find out whether a line ends or starts in a collapsed span. If
  // so, return the marker for that span.
  function collapsedSpanAtSide(line, start) {
    var sps = sawCollapsedSpans && line.markedSpans, found;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&
          (!found || compareCollapsedMarkers(found, sp.marker) < 0))
        found = sp.marker;
    }
    return found;
  }
  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true); }
  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false); }

  // Test whether there exists a collapsed span that partially
  // overlaps (covers the start or end, but not both) of a new span.
  // Such overlap is not allowed.
  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {
    var line = getLine(doc, lineNo);
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var i = 0; i < sps.length; ++i) {
      var sp = sps[i];
      if (!sp.marker.collapsed) continue;
      var found = sp.marker.find(0);
      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue;
      if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) ||
          fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))
        return true;
    }
  }

  // A visual line is a line as drawn on the screen. Folding, for
  // example, can cause multiple logical lines to appear on the same
  // visual line. This finds the start of the visual line that the
  // given line is part of (usually that is the line itself).
  function visualLine(line) {
    var merged;
    while (merged = collapsedSpanAtStart(line))
      line = merged.find(-1, true).line;
    return line;
  }

  // Returns an array of logical lines that continue the visual line
  // started by the argument, or undefined if there are no such lines.
  function visualLineContinued(line) {
    var merged, lines;
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      (lines || (lines = [])).push(line);
    }
    return lines;
  }

  // Get the line number of the start of the visual line that the
  // given line number is part of.
  function visualLineNo(doc, lineN) {
    var line = getLine(doc, lineN), vis = visualLine(line);
    if (line == vis) return lineN;
    return lineNo(vis);
  }
  // Get the line number of the start of the next visual line after
  // the given line.
  function visualLineEndNo(doc, lineN) {
    if (lineN > doc.lastLine()) return lineN;
    var line = getLine(doc, lineN), merged;
    if (!lineIsHidden(doc, line)) return lineN;
    while (merged = collapsedSpanAtEnd(line))
      line = merged.find(1, true).line;
    return lineNo(line) + 1;
  }

  // Compute whether a line is hidden. Lines count as hidden when they
  // are part of a visual line that starts with another line, or when
  // they are entirely covered by collapsed, non-widget span.
  function lineIsHidden(doc, line) {
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (!sp.marker.collapsed) continue;
      if (sp.from == null) return true;
      if (sp.marker.widgetNode) continue;
      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))
        return true;
    }
  }
  function lineIsHiddenInner(doc, line, span) {
    if (span.to == null) {
      var end = span.marker.find(1, true);
      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
    }
    if (span.marker.inclusiveRight && span.to == line.text.length)
      return true;
    for (var sp, i = 0; i < line.markedSpans.length; ++i) {
      sp = line.markedSpans[i];
      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&
          (sp.to == null || sp.to != span.from) &&
          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&
          lineIsHiddenInner(doc, line, sp)) return true;
    }
  }

  // LINE WIDGETS

  // Line widgets are block elements displayed above or below a line.

  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {
    if (options) for (var opt in options) if (options.hasOwnProperty(opt))
      this[opt] = options[opt];
    this.doc = doc;
    this.node = node;
  };
  eventMixin(LineWidget);

  function adjustScrollWhenAboveVisible(cm, line, diff) {
    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))
      addToScrollPos(cm, null, diff);
  }

  LineWidget.prototype.clear = function() {
    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
    if (no == null || !ws) return;
    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);
    if (!ws.length) line.widgets = null;
    var height = widgetHeight(this);
    updateLineHeight(line, Math.max(0, line.height - height));
    if (cm) runInOp(cm, function() {
      adjustScrollWhenAboveVisible(cm, line, -height);
      regLineChange(cm, no, "widget");
    });
  };
  LineWidget.prototype.changed = function() {
    var oldH = this.height, cm = this.doc.cm, line = this.line;
    this.height = null;
    var diff = widgetHeight(this) - oldH;
    if (!diff) return;
    updateLineHeight(line, line.height + diff);
    if (cm) runInOp(cm, function() {
      cm.curOp.forceUpdate = true;
      adjustScrollWhenAboveVisible(cm, line, diff);
    });
  };

  function widgetHeight(widget) {
    if (widget.height != null) return widget.height;
    var cm = widget.doc.cm;
    if (!cm) return 0;
    if (!contains(document.body, widget.node)) {
      var parentStyle = "position: relative;";
      if (widget.coverGutter)
        parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;";
      if (widget.noHScroll)
        parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;";
      removeChildrenAndAdd(cm.display.measure, elt("div", [widget.node], null, parentStyle));
    }
    return widget.height = widget.node.parentNode.offsetHeight;
  }

  function addLineWidget(doc, handle, node, options) {
    var widget = new LineWidget(doc, node, options);
    var cm = doc.cm;
    if (cm && widget.noHScroll) cm.display.alignWidgets = true;
    changeLine(doc, handle, "widget", function(line) {
      var widgets = line.widgets || (line.widgets = []);
      if (widget.insertAt == null) widgets.push(widget);
      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);
      widget.line = line;
      if (cm && !lineIsHidden(doc, line)) {
        var aboveVisible = heightAtLine(line) < doc.scrollTop;
        updateLineHeight(line, line.height + widgetHeight(widget));
        if (aboveVisible) addToScrollPos(cm, null, widget.height);
        cm.curOp.forceUpdate = true;
      }
      return true;
    });
    return widget;
  }

  // LINE DATA STRUCTURE

  // Line objects. These hold state related to a line, including
  // highlighting info (the styles array).
  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {
    this.text = text;
    attachMarkedSpans(this, markedSpans);
    this.height = estimateHeight ? estimateHeight(this) : 1;
  };
  eventMixin(Line);
  Line.prototype.lineNo = function() { return lineNo(this); };

  // Change the content (text, markers) of a line. Automatically
  // invalidates cached information and tries to re-estimate the
  // line's height.
  function updateLine(line, text, markedSpans, estimateHeight) {
    line.text = text;
    if (line.stateAfter) line.stateAfter = null;
    if (line.styles) line.styles = null;
    if (line.order != null) line.order = null;
    detachMarkedSpans(line);
    attachMarkedSpans(line, markedSpans);
    var estHeight = estimateHeight ? estimateHeight(line) : 1;
    if (estHeight != line.height) updateLineHeight(line, estHeight);
  }

  // Detach a line from the document tree and its markers.
  function cleanUpLine(line) {
    line.parent = null;
    detachMarkedSpans(line);
  }

  function extractLineClasses(type, output) {
    if (type) for (;;) {
      var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
      if (!lineClass) break;
      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
      var prop = lineClass[1] ? "bgClass" : "textClass";
      if (output[prop] == null)
        output[prop] = lineClass[2];
      else if (!(new RegExp("(?:^|\s)" + lineClass[2] + "(?:$|\s)")).test(output[prop]))
        output[prop] += " " + lineClass[2];
    }
    return type;
  }

  function callBlankLine(mode, state) {
    if (mode.blankLine) return mode.blankLine(state);
    if (!mode.innerMode) return;
    var inner = CodeMirror.innerMode(mode, state);
    if (inner.mode.blankLine) return inner.mode.blankLine(inner.state);
  }

  function readToken(mode, stream, state, inner) {
    for (var i = 0; i < 10; i++) {
      if (inner) inner[0] = CodeMirror.innerMode(mode, state).mode;
      var style = mode.token(stream, state);
      if (stream.pos > stream.start) return style;
    }
    throw new Error("Mode " + mode.name + " failed to advance stream.");
  }

  // Utility for getTokenAt and getLineTokens
  function takeToken(cm, pos, precise, asArray) {
    function getObj(copy) {
      return {start: stream.start, end: stream.pos,
              string: stream.current(),
              type: style || null,
              state: copy ? copyState(doc.mode, state) : state};
    }

    var doc = cm.doc, mode = doc.mode, style;
    pos = clipPos(doc, pos);
    var line = getLine(doc, pos.line), state = getStateBefore(cm, pos.line, precise);
    var stream = new StringStream(line.text, cm.options.tabSize), tokens;
    if (asArray) tokens = [];
    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {
      stream.start = stream.pos;
      style = readToken(mode, stream, state);
      if (asArray) tokens.push(getObj(true));
    }
    return asArray ? tokens : getObj();
  }

  // Run the given mode's parser over a line, calling f for each token.
  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {
    var flattenSpans = mode.flattenSpans;
    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;
    var curStart = 0, curStyle = null;
    var stream = new StringStream(text, cm.options.tabSize), style;
    var inner = cm.options.addModeClass && [null];
    if (text == "") extractLineClasses(callBlankLine(mode, state), lineClasses);
    while (!stream.eol()) {
      if (stream.pos > cm.options.maxHighlightLength) {
        flattenSpans = false;
        if (forceToEnd) processLine(cm, text, state, stream.pos);
        stream.pos = text.length;
        style = null;
      } else {
        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);
      }
      if (inner) {
        var mName = inner[0].name;
        if (mName) style = "m-" + (style ? mName + " " + style : mName);
      }
      if (!flattenSpans || curStyle != style) {
        while (curStart < stream.start) {
          curStart = Math.min(stream.start, curStart + 50000);
          f(curStart, curStyle);
        }
        curStyle = style;
      }
      stream.start = stream.pos;
    }
    while (curStart < stream.pos) {
      // Webkit seems to refuse to render text nodes longer than 57444 characters
      var pos = Math.min(stream.pos, curStart + 50000);
      f(pos, curStyle);
      curStart = pos;
    }
  }

  // Compute a style array (an array starting with a mode generation
  // -- for invalidation -- followed by pairs of end positions and
  // style strings), which is used to highlight the tokens on the
  // line.
  function highlightLine(cm, line, state, forceToEnd) {
    // A styles array always starts with a number identifying the
    // mode/overlays that it is based on (for easy invalidation).
    var st = [cm.state.modeGen], lineClasses = {};
    // Compute the base array of styles
    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {
      st.push(end, style);
    }, lineClasses, forceToEnd);

    // Run overlays, adjust style array.
    for (var o = 0; o < cm.state.overlays.length; ++o) {
      var overlay = cm.state.overlays[o], i = 1, at = 0;
      runMode(cm, line.text, overlay.mode, true, function(end, style) {
        var start = i;
        // Ensure there's a token end at the current position, and that i points at it
        while (at < end) {
          var i_end = st[i];
          if (i_end > end)
            st.splice(i, 1, end, st[i+1], i_end);
          i += 2;
          at = Math.min(end, i_end);
        }
        if (!style) return;
        if (overlay.opaque) {
          st.splice(start, i - start, end, "cm-overlay " + style);
          i = start + 2;
        } else {
          for (; start < i; start += 2) {
            var cur = st[start+1];
            st[start+1] = (cur ? cur + " " : "") + "cm-overlay " + style;
          }
        }
      }, lineClasses);
    }

    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};
  }

  function getLineStyles(cm, line, updateFrontier) {
    if (!line.styles || line.styles[0] != cm.state.modeGen) {
      var state = getStateBefore(cm, lineNo(line));
      var result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);
      line.stateAfter = state;
      line.styles = result.styles;
      if (result.classes) line.styleClasses = result.classes;
      else if (line.styleClasses) line.styleClasses = null;
      if (updateFrontier === cm.doc.frontier) cm.doc.frontier++;
    }
    return line.styles;
  }

  // Lightweight form of highlight -- proceed over this line and
  // update state, but don't save a style array. Used for lines that
  // aren't currently visible.
  function processLine(cm, text, state, startAt) {
    var mode = cm.doc.mode;
    var stream = new StringStream(text, cm.options.tabSize);
    stream.start = stream.pos = startAt || 0;
    if (text == "") callBlankLine(mode, state);
    while (!stream.eol()) {
      readToken(mode, stream, state);
      stream.start = stream.pos;
    }
  }

  // Convert a style as returned by a mode (either null, or a string
  // containing one or more styles) to a CSS style. This is cached,
  // and also looks for line-wide styles.
  var styleToClassCache = {}, styleToClassCacheWithMode = {};
  function interpretTokenStyle(style, options) {
    if (!style || /^\s*$/.test(style)) return null;
    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
    return cache[style] ||
      (cache[style] = style.replace(/\S+/g, "cm-$&"));
  }

  // Render the DOM representation of the text of a line. Also builds
  // up a 'line map', which points at the DOM nodes that represent
  // specific stretches of text, and is used by the measuring code.
  // The returned object contains the DOM node, this map, and
  // information about line-wide styles that were set by the mode.
  function buildLineContent(cm, lineView) {
    // The padding-right forces the element to have a 'border', which
    // is needed on Webkit to be able to get line-level bounding
    // rectangles for it (in measureChar).
    var content = elt("span", null, null, webkit ? "padding-right: .1px" : null);
    var builder = {pre: elt("pre", [content], "CodeMirror-line"), content: content,
                   col: 0, pos: 0, cm: cm,
                   splitSpaces: (ie || webkit) && cm.getOption("lineWrapping")};
    lineView.measure = {};

    // Iterate over the logical lines that make up this visual line.
    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {
      var line = i ? lineView.rest[i - 1] : lineView.line, order;
      builder.pos = 0;
      builder.addToken = buildToken;
      // Optionally wire in some hacks into the token-rendering
      // algorithm, to deal with browser quirks.
      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))
        builder.addToken = buildTokenBadBidi(builder.addToken, order);
      builder.map = [];
      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);
      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));
      if (line.styleClasses) {
        if (line.styleClasses.bgClass)
          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
        if (line.styleClasses.textClass)
          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
      }

      // Ensure at least a single node is present, for measuring.
      if (builder.map.length == 0)
        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));

      // Store the map and a cache object for the current logical line
      if (i == 0) {
        lineView.measure.map = builder.map;
        lineView.measure.cache = {};
      } else {
        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
        (lineView.measure.caches || (lineView.measure.caches = [])).push({});
      }
    }

    // See issue #2901
    if (webkit && /\bcm-tab\b/.test(builder.content.lastChild.className))
      builder.content.className = "cm-tab-wrap-hack";

    signal(cm, "renderLine", cm, lineView.line, builder.pre);
    if (builder.pre.className)
      builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");

    return builder;
  }

  function defaultSpecialCharPlaceholder(ch) {
    var token = elt("span", "\u2022", "cm-invalidchar");
    token.title = "\\u" + ch.charCodeAt(0).toString(16);
    token.setAttribute("aria-label", token.title);
    return token;
  }

  // Build up the DOM representation for a single token, and add it to
  // the line map. Takes care to render special characters separately.
  function buildToken(builder, text, style, startStyle, endStyle, title, css) {
    if (!text) return;
    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;
    var special = builder.cm.state.specialChars, mustWrap = false;
    if (!special.test(text)) {
      builder.col += text.length;
      var content = document.createTextNode(displayText);
      builder.map.push(builder.pos, builder.pos + text.length, content);
      if (ie && ie_version < 9) mustWrap = true;
      builder.pos += text.length;
    } else {
      var content = document.createDocumentFragment(), pos = 0;
      while (true) {
        special.lastIndex = pos;
        var m = special.exec(text);
        var skipped = m ? m.index - pos : text.length - pos;
        if (skipped) {
          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.map.push(builder.pos, builder.pos + skipped, txt);
          builder.col += skipped;
          builder.pos += skipped;
        }
        if (!m) break;
        pos += skipped + 1;
        if (m[0] == "\t") {
          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
          var txt = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
          txt.setAttribute("role", "presentation");
          txt.setAttribute("cm-text", "\t");
          builder.col += tabWidth;
        } else if (m[0] == "\r" || m[0] == "\n") {
          var txt = content.appendChild(elt("span", m[0] == "\r" ? "\u240d" : "\u2424", "cm-invalidchar"));
          txt.setAttribute("cm-text", m[0]);
          builder.col += 1;
        } else {
          var txt = builder.cm.options.specialCharPlaceholder(m[0]);
          txt.setAttribute("cm-text", m[0]);
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.col += 1;
        }
        builder.map.push(builder.pos, builder.pos + 1, txt);
        builder.pos++;
      }
    }
    if (style || startStyle || endStyle || mustWrap || css) {
      var fullStyle = style || "";
      if (startStyle) fullStyle += startStyle;
      if (endStyle) fullStyle += endStyle;
      var token = elt("span", [content], fullStyle, css);
      if (title) token.title = title;
      return builder.content.appendChild(token);
    }
    builder.content.appendChild(content);
  }

  function splitSpaces(old) {
    var out = " ";
    for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? " " : "\u00a0";
    out += " ";
    return out;
  }

  // Work around nonsense dimensions being reported for stretches of
  // right-to-left text.
  function buildTokenBadBidi(inner, order) {
    return function(builder, text, style, startStyle, endStyle, title, css) {
      style = style ? style + " cm-force-border" : "cm-force-border";
      var start = builder.pos, end = start + text.length;
      for (;;) {
        // Find the part that overlaps with the start of this text
        for (var i = 0; i < order.length; i++) {
          var part = order[i];
          if (part.to > start && part.from <= start) break;
        }
        if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title, css);
        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);
        startStyle = null;
        text = text.slice(part.to - start);
        start = part.to;
      }
    };
  }

  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
    var widget = !ignoreWidget && marker.widgetNode;
    if (widget) builder.map.push(builder.pos, builder.pos + size, widget);
    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {
      if (!widget)
        widget = builder.content.appendChild(document.createElement("span"));
      widget.setAttribute("cm-marker", marker.id);
    }
    if (widget) {
      builder.cm.display.input.setUneditable(widget);
      builder.content.appendChild(widget);
    }
    builder.pos += size;
  }

  // Outputs a number of spans to make up a line, taking highlighting
  // and marked text into account.
  function insertLineContent(line, builder, styles) {
    var spans = line.markedSpans, allText = line.text, at = 0;
    if (!spans) {
      for (var i = 1; i < styles.length; i+=2)
        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options));
      return;
    }

    var len = allText.length, pos = 0, i = 1, text = "", style, css;
    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;
    for (;;) {
      if (nextChange == pos) { // Update current marker set
        spanStyle = spanEndStyle = spanStartStyle = title = css = "";
        collapsed = null; nextChange = Infinity;
        var foundBookmarks = [], endStyles
        for (var j = 0; j < spans.length; ++j) {
          var sp = spans[j], m = sp.marker;
          if (m.type == "bookmark" && sp.from == pos && m.widgetNode) {
            foundBookmarks.push(m);
          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {
            if (sp.to != null && sp.to != pos && nextChange > sp.to) {
              nextChange = sp.to;
              spanEndStyle = "";
            }
            if (m.className) spanStyle += " " + m.className;
            if (m.css) css = (css ? css + ";" : "") + m.css;
            if (m.startStyle && sp.from == pos) spanStartStyle += " " + m.startStyle;
            if (m.endStyle && sp.to == nextChange) (endStyles || (endStyles = [])).push(m.endStyle, sp.to)
            if (m.title && !title) title = m.title;
            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))
              collapsed = sp;
          } else if (sp.from > pos && nextChange > sp.from) {
            nextChange = sp.from;
          }
        }
        if (endStyles) for (var j = 0; j < endStyles.length; j += 2)
          if (endStyles[j + 1] == nextChange) spanEndStyle += " " + endStyles[j]

        if (!collapsed || collapsed.from == pos) for (var j = 0; j < foundBookmarks.length; ++j)
          buildCollapsedSpan(builder, 0, foundBookmarks[j]);
        if (collapsed && (collapsed.from || 0) == pos) {
          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,
                             collapsed.marker, collapsed.from == null);
          if (collapsed.to == null) return;
          if (collapsed.to == pos) collapsed = false;
        }
      }
      if (pos >= len) break;

      var upto = Math.min(len, nextChange);
      while (true) {
        if (text) {
          var end = pos + text.length;
          if (!collapsed) {
            var tokenText = end > upto ? text.slice(0, upto - pos) : text;
            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,
                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", title, css);
          }
          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}
          pos = end;
          spanStartStyle = "";
        }
        text = allText.slice(at, at = styles[i++]);
        style = interpretTokenStyle(styles[i++], builder.cm.options);
      }
    }
  }

  // DOCUMENT DATA STRUCTURE

  // By default, updates that start and end at the beginning of a line
  // are treated specially, in order to make the association of line
  // widgets and marker elements with the text behave more intuitive.
  function isWholeLineUpdate(doc, change) {
    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" &&
      (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
  }

  // Perform a change on the document data structure.
  function updateDoc(doc, change, markedSpans, estimateHeight) {
    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}
    function update(line, text, spans) {
      updateLine(line, text, spans, estimateHeight);
      signalLater(line, "change", line, change);
    }
    function linesFor(start, end) {
      for (var i = start, result = []; i < end; ++i)
        result.push(new Line(text[i], spansFor(i), estimateHeight));
      return result;
    }

    var from = change.from, to = change.to, text = change.text;
    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);
    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;

    // Adjust the line structure
    if (change.full) {
      doc.insert(0, linesFor(0, text.length));
      doc.remove(text.length, doc.size - text.length);
    } else if (isWholeLineUpdate(doc, change)) {
      // This is a whole-line replace. Treated specially to make
      // sure line objects move the way they are supposed to.
      var added = linesFor(0, text.length - 1);
      update(lastLine, lastLine.text, lastSpans);
      if (nlines) doc.remove(from.line, nlines);
      if (added.length) doc.insert(from.line, added);
    } else if (firstLine == lastLine) {
      if (text.length == 1) {
        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
      } else {
        var added = linesFor(1, text.length - 1);
        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
        doc.insert(from.line + 1, added);
      }
    } else if (text.length == 1) {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
      doc.remove(from.line + 1, nlines);
    } else {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
      var added = linesFor(1, text.length - 1);
      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);
      doc.insert(from.line + 1, added);
    }

    signalLater(doc, "change", doc, change);
  }

  // The document is represented as a BTree consisting of leaves, with
  // chunk of lines in them, and branches, with up to ten leaves or
  // other branch nodes below them. The top node is always a branch
  // node, and is the document object itself (meaning it has
  // additional methods and properties).
  //
  // All nodes have parent links. The tree is used both to go from
  // line numbers to line objects, and to go from objects to numbers.
  // It also indexes by height, and is used to convert between height
  // and line object, and to find the total height of the document.
  //
  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html

  function LeafChunk(lines) {
    this.lines = lines;
    this.parent = null;
    for (var i = 0, height = 0; i < lines.length; ++i) {
      lines[i].parent = this;
      height += lines[i].height;
    }
    this.height = height;
  }

  LeafChunk.prototype = {
    chunkSize: function() { return this.lines.length; },
    // Remove the n lines at offset 'at'.
    removeInner: function(at, n) {
      for (var i = at, e = at + n; i < e; ++i) {
        var line = this.lines[i];
        this.height -= line.height;
        cleanUpLine(line);
        signalLater(line, "delete");
      }
      this.lines.splice(at, n);
    },
    // Helper used to collapse a small branch into a single leaf.
    collapse: function(lines) {
      lines.push.apply(lines, this.lines);
    },
    // Insert the given array of lines at offset 'at', count them as
    // having the given height.
    insertInner: function(at, lines, height) {
      this.height += height;
      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
      for (var i = 0; i < lines.length; ++i) lines[i].parent = this;
    },
    // Used to iterate over a part of the tree.
    iterN: function(at, n, op) {
      for (var e = at + n; at < e; ++at)
        if (op(this.lines[at])) return true;
    }
  };

  function BranchChunk(children) {
    this.children = children;
    var size = 0, height = 0;
    for (var i = 0; i < children.length; ++i) {
      var ch = children[i];
      size += ch.chunkSize(); height += ch.height;
      ch.parent = this;
    }
    this.size = size;
    this.height = height;
    this.parent = null;
  }

  BranchChunk.prototype = {
    chunkSize: function() { return this.size; },
    removeInner: function(at, n) {
      this.size -= n;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var rm = Math.min(n, sz - at), oldHeight = child.height;
          child.removeInner(at, rm);
          this.height -= oldHeight - child.height;
          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }
          if ((n -= rm) == 0) break;
          at = 0;
        } else at -= sz;
      }
      // If the result is smaller than 25 lines, ensure that it is a
      // single leaf node.
      if (this.size - n < 25 &&
          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
        var lines = [];
        this.collapse(lines);
        this.children = [new LeafChunk(lines)];
        this.children[0].parent = this;
      }
    },
    collapse: function(lines) {
      for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);
    },
    insertInner: function(at, lines, height) {
      this.size += lines.length;
      this.height += height;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at <= sz) {
          child.insertInner(at, lines, height);
          if (child.lines && child.lines.length > 50) {
            while (child.lines.length > 50) {
              var spilled = child.lines.splice(child.lines.length - 25, 25);
              var newleaf = new LeafChunk(spilled);
              child.height -= newleaf.height;
              this.children.splice(i + 1, 0, newleaf);
              newleaf.parent = this;
            }
            this.maybeSpill();
          }
          break;
        }
        at -= sz;
      }
    },
    // When a node has grown, check whether it should be split.
    maybeSpill: function() {
      if (this.children.length <= 10) return;
      var me = this;
      do {
        var spilled = me.children.splice(me.children.length - 5, 5);
        var sibling = new BranchChunk(spilled);
        if (!me.parent) { // Become the parent node
          var copy = new BranchChunk(me.children);
          copy.parent = me;
          me.children = [copy, sibling];
          me = copy;
        } else {
          me.size -= sibling.size;
          me.height -= sibling.height;
          var myIndex = indexOf(me.parent.children, me);
          me.parent.children.splice(myIndex + 1, 0, sibling);
        }
        sibling.parent = me.parent;
      } while (me.children.length > 10);
      me.parent.maybeSpill();
    },
    iterN: function(at, n, op) {
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var used = Math.min(n, sz - at);
          if (child.iterN(at, used, op)) return true;
          if ((n -= used) == 0) break;
          at = 0;
        } else at -= sz;
      }
    }
  };

  var nextDocId = 0;
  var Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {
    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine, lineSep);
    if (firstLine == null) firstLine = 0;

    BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
    this.first = firstLine;
    this.scrollTop = this.scrollLeft = 0;
    this.cantEdit = false;
    this.cleanGeneration = 1;
    this.frontier = firstLine;
    var start = Pos(firstLine, 0);
    this.sel = simpleSelection(start);
    this.history = new History(null);
    this.id = ++nextDocId;
    this.modeOption = mode;
    this.lineSep = lineSep;
    this.extend = false;

    if (typeof text == "string") text = this.splitLines(text);
    updateDoc(this, {from: start, to: start, text: text});
    setSelection(this, simpleSelection(start), sel_dontScroll);
  };

  Doc.prototype = createObj(BranchChunk.prototype, {
    constructor: Doc,
    // Iterate over the document. Supports two forms -- with only one
    // argument, it calls that for each line in the document. With
    // three, it iterates over the range given by the first two (with
    // the second being non-inclusive).
    iter: function(from, to, op) {
      if (op) this.iterN(from - this.first, to - from, op);
      else this.iterN(this.first, this.first + this.size, from);
    },

    // Non-public interface for adding and removing lines.
    insert: function(at, lines) {
      var height = 0;
      for (var i = 0; i < lines.length; ++i) height += lines[i].height;
      this.insertInner(at - this.first, lines, height);
    },
    remove: function(at, n) { this.removeInner(at - this.first, n); },

    // From here, the methods are part of the public interface. Most
    // are also available from CodeMirror (editor) instances.

    getValue: function(lineSep) {
      var lines = getLines(this, this.first, this.first + this.size);
      if (lineSep === false) return lines;
      return lines.join(lineSep || this.lineSeparator());
    },
    setValue: docMethodOp(function(code) {
      var top = Pos(this.first, 0), last = this.first + this.size - 1;
      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),
                        text: this.splitLines(code), origin: "setValue", full: true}, true);
      setSelection(this, simpleSelection(top));
    }),
    replaceRange: function(code, from, to, origin) {
      from = clipPos(this, from);
      to = to ? clipPos(this, to) : from;
      replaceRange(this, code, from, to, origin);
    },
    getRange: function(from, to, lineSep) {
      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
      if (lineSep === false) return lines;
      return lines.join(lineSep || this.lineSeparator());
    },

    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},

    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},
    getLineNumber: function(line) {return lineNo(line);},

    getLineHandleVisualStart: function(line) {
      if (typeof line == "number") line = getLine(this, line);
      return visualLine(line);
    },

    lineCount: function() {return this.size;},
    firstLine: function() {return this.first;},
    lastLine: function() {return this.first + this.size - 1;},

    clipPos: function(pos) {return clipPos(this, pos);},

    getCursor: function(start) {
      var range = this.sel.primary(), pos;
      if (start == null || start == "head") pos = range.head;
      else if (start == "anchor") pos = range.anchor;
      else if (start == "end" || start == "to" || start === false) pos = range.to();
      else pos = range.from();
      return pos;
    },
    listSelections: function() { return this.sel.ranges; },
    somethingSelected: function() {return this.sel.somethingSelected();},

    setCursor: docMethodOp(function(line, ch, options) {
      setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
    }),
    setSelection: docMethodOp(function(anchor, head, options) {
      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
    }),
    extendSelection: docMethodOp(function(head, other, options) {
      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
    }),
    extendSelections: docMethodOp(function(heads, options) {
      extendSelections(this, clipPosArray(this, heads), options);
    }),
    extendSelectionsBy: docMethodOp(function(f, options) {
      var heads = map(this.sel.ranges, f);
      extendSelections(this, clipPosArray(this, heads), options);
    }),
    setSelections: docMethodOp(function(ranges, primary, options) {
      if (!ranges.length) return;
      for (var i = 0, out = []; i < ranges.length; i++)
        out[i] = new Range(clipPos(this, ranges[i].anchor),
                           clipPos(this, ranges[i].head));
      if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex);
      setSelection(this, normalizeSelection(out, primary), options);
    }),
    addSelection: docMethodOp(function(anchor, head, options) {
      var ranges = this.sel.ranges.slice(0);
      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);
    }),

    getSelection: function(lineSep) {
      var ranges = this.sel.ranges, lines;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        lines = lines ? lines.concat(sel) : sel;
      }
      if (lineSep === false) return lines;
      else return lines.join(lineSep || this.lineSeparator());
    },
    getSelections: function(lineSep) {
      var parts = [], ranges = this.sel.ranges;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        if (lineSep !== false) sel = sel.join(lineSep || this.lineSeparator());
        parts[i] = sel;
      }
      return parts;
    },
    replaceSelection: function(code, collapse, origin) {
      var dup = [];
      for (var i = 0; i < this.sel.ranges.length; i++)
        dup[i] = code;
      this.replaceSelections(dup, collapse, origin || "+input");
    },
    replaceSelections: docMethodOp(function(code, collapse, origin) {
      var changes = [], sel = this.sel;
      for (var i = 0; i < sel.ranges.length; i++) {
        var range = sel.ranges[i];
        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};
      }
      var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
      for (var i = changes.length - 1; i >= 0; i--)
        makeChange(this, changes[i]);
      if (newSel) setSelectionReplaceHistory(this, newSel);
      else if (this.cm) ensureCursorVisible(this.cm);
    }),
    undo: docMethodOp(function() {makeChangeFromHistory(this, "undo");}),
    redo: docMethodOp(function() {makeChangeFromHistory(this, "redo");}),
    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, "undo", true);}),
    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, "redo", true);}),

    setExtending: function(val) {this.extend = val;},
    getExtending: function() {return this.extend;},

    historySize: function() {
      var hist = this.history, done = 0, undone = 0;
      for (var i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done;
      for (var i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone;
      return {undo: done, redo: undone};
    },
    clearHistory: function() {this.history = new History(this.history.maxGeneration);},

    markClean: function() {
      this.cleanGeneration = this.changeGeneration(true);
    },
    changeGeneration: function(forceSplit) {
      if (forceSplit)
        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
      return this.history.generation;
    },
    isClean: function (gen) {
      return this.history.generation == (gen || this.cleanGeneration);
    },

    getHistory: function() {
      return {done: copyHistoryArray(this.history.done),
              undone: copyHistoryArray(this.history.undone)};
    },
    setHistory: function(histData) {
      var hist = this.history = new History(this.history.maxGeneration);
      hist.done = copyHistoryArray(histData.done.slice(0), null, true);
      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
    },

    addLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        if (!line[prop]) line[prop] = cls;
        else if (classTest(cls).test(line[prop])) return false;
        else line[prop] += " " + cls;
        return true;
      });
    }),
    removeLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        var cur = line[prop];
        if (!cur) return false;
        else if (cls == null) line[prop] = null;
        else {
          var found = cur.match(classTest(cls));
          if (!found) return false;
          var end = found.index + found[0].length;
          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
        }
        return true;
      });
    }),

    addLineWidget: docMethodOp(function(handle, node, options) {
      return addLineWidget(this, handle, node, options);
    }),
    removeLineWidget: function(widget) { widget.clear(); },

    markText: function(from, to, options) {
      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || "range");
    },
    setBookmark: function(pos, options) {
      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),
                      insertLeft: options && options.insertLeft,
                      clearWhenEmpty: false, shared: options && options.shared,
                      handleMouseEvents: options && options.handleMouseEvents};
      pos = clipPos(this, pos);
      return markText(this, pos, pos, realOpts, "bookmark");
    },
    findMarksAt: function(pos) {
      pos = clipPos(this, pos);
      var markers = [], spans = getLine(this, pos.line).markedSpans;
      if (spans) for (var i = 0; i < spans.length; ++i) {
        var span = spans[i];
        if ((span.from == null || span.from <= pos.ch) &&
            (span.to == null || span.to >= pos.ch))
          markers.push(span.marker.parent || span.marker);
      }
      return markers;
    },
    findMarks: function(from, to, filter) {
      from = clipPos(this, from); to = clipPos(this, to);
      var found = [], lineNo = from.line;
      this.iter(from.line, to.line + 1, function(line) {
        var spans = line.markedSpans;
        if (spans) for (var i = 0; i < spans.length; i++) {
          var span = spans[i];
          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||
                span.from == null && lineNo != from.line ||
                span.from != null && lineNo == to.line && span.from >= to.ch) &&
              (!filter || filter(span.marker)))
            found.push(span.marker.parent || span.marker);
        }
        ++lineNo;
      });
      return found;
    },
    getAllMarks: function() {
      var markers = [];
      this.iter(function(line) {
        var sps = line.markedSpans;
        if (sps) for (var i = 0; i < sps.length; ++i)
          if (sps[i].from != null) markers.push(sps[i].marker);
      });
      return markers;
    },

    posFromIndex: function(off) {
      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;
      this.iter(function(line) {
        var sz = line.text.length + sepSize;
        if (sz > off) { ch = off; return true; }
        off -= sz;
        ++lineNo;
      });
      return clipPos(this, Pos(lineNo, ch));
    },
    indexFromPos: function (coords) {
      coords = clipPos(this, coords);
      var index = coords.ch;
      if (coords.line < this.first || coords.ch < 0) return 0;
      var sepSize = this.lineSeparator().length;
      this.iter(this.first, coords.line, function (line) {
        index += line.text.length + sepSize;
      });
      return index;
    },

    copy: function(copyHistory) {
      var doc = new Doc(getLines(this, this.first, this.first + this.size),
                        this.modeOption, this.first, this.lineSep);
      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;
      doc.sel = this.sel;
      doc.extend = false;
      if (copyHistory) {
        doc.history.undoDepth = this.history.undoDepth;
        doc.setHistory(this.getHistory());
      }
      return doc;
    },

    linkedDoc: function(options) {
      if (!options) options = {};
      var from = this.first, to = this.first + this.size;
      if (options.from != null && options.from > from) from = options.from;
      if (options.to != null && options.to < to) to = options.to;
      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);
      if (options.sharedHist) copy.history = this.history;
      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});
      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];
      copySharedMarkers(copy, findSharedMarkers(this));
      return copy;
    },
    unlinkDoc: function(other) {
      if (other instanceof CodeMirror) other = other.doc;
      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {
        var link = this.linked[i];
        if (link.doc != other) continue;
        this.linked.splice(i, 1);
        other.unlinkDoc(this);
        detachSharedMarkers(findSharedMarkers(this));
        break;
      }
      // If the histories were shared, split them again
      if (other.history == this.history) {
        var splitIds = [other.id];
        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);
        other.history = new History(null);
        other.history.done = copyHistoryArray(this.history.done, splitIds);
        other.history.undone = copyHistoryArray(this.history.undone, splitIds);
      }
    },
    iterLinkedDocs: function(f) {linkedDocs(this, f);},

    getMode: function() {return this.mode;},
    getEditor: function() {return this.cm;},

    splitLines: function(str) {
      if (this.lineSep) return str.split(this.lineSep);
      return splitLinesAuto(str);
    },
    lineSeparator: function() { return this.lineSep || "\n"; }
  });

  // Public alias.
  Doc.prototype.eachLine = Doc.prototype.iter;

  // Set up methods on CodeMirror's prototype to redirect to the editor's document.
  var dontDelegate = "iter insert remove copy getEditor constructor".split(" ");
  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)
    CodeMirror.prototype[prop] = (function(method) {
      return function() {return method.apply(this.doc, arguments);};
    })(Doc.prototype[prop]);

  eventMixin(Doc);

  // Call f for all linked documents.
  function linkedDocs(doc, f, sharedHistOnly) {
    function propagate(doc, skip, sharedHist) {
      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {
        var rel = doc.linked[i];
        if (rel.doc == skip) continue;
        var shared = sharedHist && rel.sharedHist;
        if (sharedHistOnly && !shared) continue;
        f(rel.doc, shared);
        propagate(rel.doc, doc, shared);
      }
    }
    propagate(doc, null, true);
  }

  // Attach a document to an editor.
  function attachDoc(cm, doc) {
    if (doc.cm) throw new Error("This document is already in use.");
    cm.doc = doc;
    doc.cm = cm;
    estimateLineHeights(cm);
    loadMode(cm);
    if (!cm.options.lineWrapping) findMaxLine(cm);
    cm.options.mode = doc.modeOption;
    regChange(cm);
  }

  // LINE UTILITIES

  // Find the line object corresponding to the given line number.
  function getLine(doc, n) {
    n -= doc.first;
    if (n < 0 || n >= doc.size) throw new Error("There is no line " + (n + doc.first) + " in the document.");
    for (var chunk = doc; !chunk.lines;) {
      for (var i = 0;; ++i) {
        var child = chunk.children[i], sz = child.chunkSize();
        if (n < sz) { chunk = child; break; }
        n -= sz;
      }
    }
    return chunk.lines[n];
  }

  // Get the part of a document between two positions, as an array of
  // strings.
  function getBetween(doc, start, end) {
    var out = [], n = start.line;
    doc.iter(start.line, end.line + 1, function(line) {
      var text = line.text;
      if (n == end.line) text = text.slice(0, end.ch);
      if (n == start.line) text = text.slice(start.ch);
      out.push(text);
      ++n;
    });
    return out;
  }
  // Get the lines between from and to, as array of strings.
  function getLines(doc, from, to) {
    var out = [];
    doc.iter(from, to, function(line) { out.push(line.text); });
    return out;
  }

  // Update the height of a line, propagating the height change
  // upwards to parent nodes.
  function updateLineHeight(line, height) {
    var diff = height - line.height;
    if (diff) for (var n = line; n; n = n.parent) n.height += diff;
  }

  // Given a line object, find its line number by walking up through
  // its parent links.
  function lineNo(line) {
    if (line.parent == null) return null;
    var cur = line.parent, no = indexOf(cur.lines, line);
    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
      for (var i = 0;; ++i) {
        if (chunk.children[i] == cur) break;
        no += chunk.children[i].chunkSize();
      }
    }
    return no + cur.first;
  }

  // Find the line at the given vertical position, using the height
  // information in the document tree.
  function lineAtHeight(chunk, h) {
    var n = chunk.first;
    outer: do {
      for (var i = 0; i < chunk.children.length; ++i) {
        var child = chunk.children[i], ch = child.height;
        if (h < ch) { chunk = child; continue outer; }
        h -= ch;
        n += child.chunkSize();
      }
      return n;
    } while (!chunk.lines);
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i], lh = line.height;
      if (h < lh) break;
      h -= lh;
    }
    return n + i;
  }


  // Find the height above the given line.
  function heightAtLine(lineObj) {
    lineObj = visualLine(lineObj);

    var h = 0, chunk = lineObj.parent;
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i];
      if (line == lineObj) break;
      else h += line.height;
    }
    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
      for (var i = 0; i < p.children.length; ++i) {
        var cur = p.children[i];
        if (cur == chunk) break;
        else h += cur.height;
      }
    }
    return h;
  }

  // Get the bidi ordering for the given line (and cache it). Returns
  // false for lines that are fully left-to-right, and an array of
  // BidiSpan objects otherwise.
  function getOrder(line) {
    var order = line.order;
    if (order == null) order = line.order = bidiOrdering(line.text);
    return order;
  }

  // HISTORY

  function History(startGen) {
    // Arrays of change events and selections. Doing something adds an
    // event to done and clears undo. Undoing moves events from done
    // to undone, redoing moves them in the other direction.
    this.done = []; this.undone = [];
    this.undoDepth = Infinity;
    // Used to track when changes can be merged into a single undo
    // event
    this.lastModTime = this.lastSelTime = 0;
    this.lastOp = this.lastSelOp = null;
    this.lastOrigin = this.lastSelOrigin = null;
    // Used by the isClean() method
    this.generation = this.maxGeneration = startGen || 1;
  }

  // Create a history change event from an updateDoc-style change
  // object.
  function historyChangeFromChange(doc, change) {
    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};
    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);
    return histChange;
  }

  // Pop all selection events off the end of a history array. Stop at
  // a change event.
  function clearSelectionEvents(array) {
    while (array.length) {
      var last = lst(array);
      if (last.ranges) array.pop();
      else break;
    }
  }

  // Find the top change event in the history. Pop off selection
  // events that are in the way.
  function lastChangeEvent(hist, force) {
    if (force) {
      clearSelectionEvents(hist.done);
      return lst(hist.done);
    } else if (hist.done.length && !lst(hist.done).ranges) {
      return lst(hist.done);
    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
      hist.done.pop();
      return lst(hist.done);
    }
  }

  // Register a change in the history. Merges changes that are within
  // a single operation, ore are close together with an origin that
  // allows merging (starting with "+") into a single event.
  function addChangeToHistory(doc, change, selAfter, opId) {
    var hist = doc.history;
    hist.undone.length = 0;
    var time = +new Date, cur;

    if ((hist.lastOp == opId ||
         hist.lastOrigin == change.origin && change.origin &&
         ((change.origin.charAt(0) == "+" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||
          change.origin.charAt(0) == "*")) &&
        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
      // Merge this change into the last event
      var last = lst(cur.changes);
      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
        // Optimized case for simple insertion -- don't want to add
        // new changesets for every character typed
        last.to = changeEnd(change);
      } else {
        // Add new sub-event
        cur.changes.push(historyChangeFromChange(doc, change));
      }
    } else {
      // Can not be merged, start a new event.
      var before = lst(hist.done);
      if (!before || !before.ranges)
        pushSelectionToHistory(doc.sel, hist.done);
      cur = {changes: [historyChangeFromChange(doc, change)],
             generation: hist.generation};
      hist.done.push(cur);
      while (hist.done.length > hist.undoDepth) {
        hist.done.shift();
        if (!hist.done[0].ranges) hist.done.shift();
      }
    }
    hist.done.push(selAfter);
    hist.generation = ++hist.maxGeneration;
    hist.lastModTime = hist.lastSelTime = time;
    hist.lastOp = hist.lastSelOp = opId;
    hist.lastOrigin = hist.lastSelOrigin = change.origin;

    if (!last) signal(doc, "historyAdded");
  }

  function selectionEventCanBeMerged(doc, origin, prev, sel) {
    var ch = origin.charAt(0);
    return ch == "*" ||
      ch == "+" &&
      prev.ranges.length == sel.ranges.length &&
      prev.somethingSelected() == sel.somethingSelected() &&
      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
  }

  // Called whenever the selection changes, sets the new selection as
  // the pending selection in the history, and pushes the old pending
  // selection into the 'done' array when it was significantly
  // different (in number of selected ranges, emptiness, or time).
  function addSelectionToHistory(doc, sel, opId, options) {
    var hist = doc.history, origin = options && options.origin;

    // A new event is started when the previous origin does not match
    // the current, or the origins don't allow matching. Origins
    // starting with * are always merged, those starting with + are
    // merged when similar and close together in time.
    if (opId == hist.lastSelOp ||
        (origin && hist.lastSelOrigin == origin &&
         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||
          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))
      hist.done[hist.done.length - 1] = sel;
    else
      pushSelectionToHistory(sel, hist.done);

    hist.lastSelTime = +new Date;
    hist.lastSelOrigin = origin;
    hist.lastSelOp = opId;
    if (options && options.clearRedo !== false)
      clearSelectionEvents(hist.undone);
  }

  function pushSelectionToHistory(sel, dest) {
    var top = lst(dest);
    if (!(top && top.ranges && top.equals(sel)))
      dest.push(sel);
  }

  // Used to store marked span information in the history.
  function attachLocalSpans(doc, change, from, to) {
    var existing = change["spans_" + doc.id], n = 0;
    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
      if (line.markedSpans)
        (existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans;
      ++n;
    });
  }

  // When un/re-doing restores text containing marked spans, those
  // that have been explicitly cleared should not be restored.
  function removeClearedSpans(spans) {
    if (!spans) return null;
    for (var i = 0, out; i < spans.length; ++i) {
      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }
      else if (out) out.push(spans[i]);
    }
    return !out ? spans : out.length ? out : null;
  }

  // Retrieve and filter the old marked spans stored in a change event.
  function getOldSpans(doc, change) {
    var found = change["spans_" + doc.id];
    if (!found) return null;
    for (var i = 0, nw = []; i < change.text.length; ++i)
      nw.push(removeClearedSpans(found[i]));
    return nw;
  }

  // Used both to provide a JSON-safe object in .getHistory, and, when
  // detaching a document, to split the history in two
  function copyHistoryArray(events, newGroup, instantiateSel) {
    for (var i = 0, copy = []; i < events.length; ++i) {
      var event = events[i];
      if (event.ranges) {
        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
        continue;
      }
      var changes = event.changes, newChanges = [];
      copy.push({changes: newChanges});
      for (var j = 0; j < changes.length; ++j) {
        var change = changes[j], m;
        newChanges.push({from: change.from, to: change.to, text: change.text});
        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\d+)$/)) {
          if (indexOf(newGroup, Number(m[1])) > -1) {
            lst(newChanges)[prop] = change[prop];
            delete change[prop];
          }
        }
      }
    }
    return copy;
  }

  // Rebasing/resetting history to deal with externally-sourced changes

  function rebaseHistSelSingle(pos, from, to, diff) {
    if (to < pos.line) {
      pos.line += diff;
    } else if (from < pos.line) {
      pos.line = from;
      pos.ch = 0;
    }
  }

  // Tries to rebase an array of history events given a change in the
  // document. If the change touches the same lines as the event, the
  // event, and everything 'behind' it, is discarded. If the change is
  // before the event, the event's positions are updated. Uses a
  // copy-on-write scheme for the positions, to avoid having to
  // reallocate them all on every rebase, but also avoid problems with
  // shared position objects being unsafely updated.
  function rebaseHistArray(array, from, to, diff) {
    for (var i = 0; i < array.length; ++i) {
      var sub = array[i], ok = true;
      if (sub.ranges) {
        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }
        for (var j = 0; j < sub.ranges.length; j++) {
          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
        }
        continue;
      }
      for (var j = 0; j < sub.changes.length; ++j) {
        var cur = sub.changes[j];
        if (to < cur.from.line) {
          cur.from = Pos(cur.from.line + diff, cur.from.ch);
          cur.to = Pos(cur.to.line + diff, cur.to.ch);
        } else if (from <= cur.to.line) {
          ok = false;
          break;
        }
      }
      if (!ok) {
        array.splice(0, i + 1);
        i = 0;
      }
    }
  }

  function rebaseHist(hist, change) {
    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
    rebaseHistArray(hist.done, from, to, diff);
    rebaseHistArray(hist.undone, from, to, diff);
  }

  // EVENT UTILITIES

  // Due to the fact that we still support jurassic IE versions, some
  // compatibility wrappers are needed.

  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {
    if (e.preventDefault) e.preventDefault();
    else e.returnValue = false;
  };
  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {
    if (e.stopPropagation) e.stopPropagation();
    else e.cancelBubble = true;
  };
  function e_defaultPrevented(e) {
    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
  }
  var e_stop = CodeMirror.e_stop = function(e) {e_preventDefault(e); e_stopPropagation(e);};

  function e_target(e) {return e.target || e.srcElement;}
  function e_button(e) {
    var b = e.which;
    if (b == null) {
      if (e.button & 1) b = 1;
      else if (e.button & 2) b = 3;
      else if (e.button & 4) b = 2;
    }
    if (mac && e.ctrlKey && b == 1) b = 3;
    return b;
  }

  // EVENT HANDLING

  // Lightweight event framework. on/off also work on DOM nodes,
  // registering native DOM handlers.

  var on = CodeMirror.on = function(emitter, type, f) {
    if (emitter.addEventListener)
      emitter.addEventListener(type, f, false);
    else if (emitter.attachEvent)
      emitter.attachEvent("on" + type, f);
    else {
      var map = emitter._handlers || (emitter._handlers = {});
      var arr = map[type] || (map[type] = []);
      arr.push(f);
    }
  };

  var noHandlers = []
  function getHandlers(emitter, type, copy) {
    var arr = emitter._handlers && emitter._handlers[type]
    if (copy) return arr && arr.length > 0 ? arr.slice() : noHandlers
    else return arr || noHandlers
  }

  var off = CodeMirror.off = function(emitter, type, f) {
    if (emitter.removeEventListener)
      emitter.removeEventListener(type, f, false);
    else if (emitter.detachEvent)
      emitter.detachEvent("on" + type, f);
    else {
      var handlers = getHandlers(emitter, type, false)
      for (var i = 0; i < handlers.length; ++i)
        if (handlers[i] == f) { handlers.splice(i, 1); break; }
    }
  };

  var signal = CodeMirror.signal = function(emitter, type /*, values...*/) {
    var handlers = getHandlers(emitter, type, true)
    if (!handlers.length) return;
    var args = Array.prototype.slice.call(arguments, 2);
    for (var i = 0; i < handlers.length; ++i) handlers[i].apply(null, args);
  };

  var orphanDelayedCallbacks = null;

  // Often, we want to signal events at a point where we are in the
  // middle of some work, but don't want the handler to start calling
  // other methods on the editor, which might be in an inconsistent
  // state or simply not expect any other events to happen.
  // signalLater looks whether there are any handlers, and schedules
  // them to be executed when the last operation ends, or, if no
  // operation is active, when a timeout fires.
  function signalLater(emitter, type /*, values...*/) {
    var arr = getHandlers(emitter, type, false)
    if (!arr.length) return;
    var args = Array.prototype.slice.call(arguments, 2), list;
    if (operationGroup) {
      list = operationGroup.delayedCallbacks;
    } else if (orphanDelayedCallbacks) {
      list = orphanDelayedCallbacks;
    } else {
      list = orphanDelayedCallbacks = [];
      setTimeout(fireOrphanDelayed, 0);
    }
    function bnd(f) {return function(){f.apply(null, args);};};
    for (var i = 0; i < arr.length; ++i)
      list.push(bnd(arr[i]));
  }

  function fireOrphanDelayed() {
    var delayed = orphanDelayedCallbacks;
    orphanDelayedCallbacks = null;
    for (var i = 0; i < delayed.length; ++i) delayed[i]();
  }

  // The DOM events that CodeMirror handles can be overridden by
  // registering a (non-DOM) handler on the editor for the event name,
  // and preventDefault-ing the event in that handler.
  function signalDOMEvent(cm, e, override) {
    if (typeof e == "string")
      e = {type: e, preventDefault: function() { this.defaultPrevented = true; }};
    signal(cm, override || e.type, cm, e);
    return e_defaultPrevented(e) || e.codemirrorIgnore;
  }

  function signalCursorActivity(cm) {
    var arr = cm._handlers && cm._handlers.cursorActivity;
    if (!arr) return;
    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
    for (var i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)
      set.push(arr[i]);
  }

  function hasHandler(emitter, type) {
    return getHandlers(emitter, type).length > 0
  }

  // Add on and off methods to a constructor's prototype, to make
  // registering events on such objects more convenient.
  function eventMixin(ctor) {
    ctor.prototype.on = function(type, f) {on(this, type, f);};
    ctor.prototype.off = function(type, f) {off(this, type, f);};
  }

  // MISC UTILITIES

  // Number of pixels added to scroller and sizer to hide scrollbar
  var scrollerGap = 30;

  // Returned or thrown by various protocols to signal 'I'm not
  // handling this'.
  var Pass = CodeMirror.Pass = {toString: function(){return "CodeMirror.Pass";}};

  // Reused option objects for setSelection & friends
  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: "*mouse"}, sel_move = {origin: "+move"};

  function Delayed() {this.id = null;}
  Delayed.prototype.set = function(ms, f) {
    clearTimeout(this.id);
    this.id = setTimeout(f, ms);
  };

  // Counts the column offset in a string, taking tabs into account.
  // Used mostly to find indentation.
  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {
    if (end == null) {
      end = string.search(/[^\s\u00a0]/);
      if (end == -1) end = string.length;
    }
    for (var i = startIndex || 0, n = startValue || 0;;) {
      var nextTab = string.indexOf("\t", i);
      if (nextTab < 0 || nextTab >= end)
        return n + (end - i);
      n += nextTab - i;
      n += tabSize - (n % tabSize);
      i = nextTab + 1;
    }
  };

  // The inverse of countColumn -- find the offset that corresponds to
  // a particular column.
  var findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {
    for (var pos = 0, col = 0;;) {
      var nextTab = string.indexOf("\t", pos);
      if (nextTab == -1) nextTab = string.length;
      var skipped = nextTab - pos;
      if (nextTab == string.length || col + skipped >= goal)
        return pos + Math.min(skipped, goal - col);
      col += nextTab - pos;
      col += tabSize - (col % tabSize);
      pos = nextTab + 1;
      if (col >= goal) return pos;
    }
  }

  var spaceStrs = [""];
  function spaceStr(n) {
    while (spaceStrs.length <= n)
      spaceStrs.push(lst(spaceStrs) + " ");
    return spaceStrs[n];
  }

  function lst(arr) { return arr[arr.length-1]; }

  var selectInput = function(node) { node.select(); };
  if (ios) // Mobile Safari apparently has a bug where select() is broken.
    selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; };
  else if (ie) // Suppress mysterious IE10 errors
    selectInput = function(node) { try { node.select(); } catch(_e) {} };

  function indexOf(array, elt) {
    for (var i = 0; i < array.length; ++i)
      if (array[i] == elt) return i;
    return -1;
  }
  function map(array, f) {
    var out = [];
    for (var i = 0; i < array.length; i++) out[i] = f(array[i], i);
    return out;
  }

  function nothing() {}

  function createObj(base, props) {
    var inst;
    if (Object.create) {
      inst = Object.create(base);
    } else {
      nothing.prototype = base;
      inst = new nothing();
    }
    if (props) copyObj(props, inst);
    return inst;
  };

  function copyObj(obj, target, overwrite) {
    if (!target) target = {};
    for (var prop in obj)
      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))
        target[prop] = obj[prop];
    return target;
  }

  function bind(f) {
    var args = Array.prototype.slice.call(arguments, 1);
    return function(){return f.apply(null, args);};
  }

  var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {
    return /\w/.test(ch) || ch > "\x80" &&
      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
  };
  function isWordChar(ch, helper) {
    if (!helper) return isWordCharBasic(ch);
    if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) return true;
    return helper.test(ch);
  }

  function isEmpty(obj) {
    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;
    return true;
  }

  // Extending unicode characters. A series of a non-extending char +
  // any number of extending chars is treated as a single unit as far
  // as editing and measuring is concerned. This is not fully correct,
  // since some scripts/fonts/browsers also treat other configurations
  // of code points as a group.
  var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch); }

  // DOM UTILITIES

  function elt(tag, content, className, style) {
    var e = document.createElement(tag);
    if (className) e.className = className;
    if (style) e.style.cssText = style;
    if (typeof content == "string") e.appendChild(document.createTextNode(content));
    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);
    return e;
  }

  var range;
  if (document.createRange) range = function(node, start, end, endNode) {
    var r = document.createRange();
    r.setEnd(endNode || node, end);
    r.setStart(node, start);
    return r;
  };
  else range = function(node, start, end) {
    var r = document.body.createTextRange();
    try { r.moveToElementText(node.parentNode); }
    catch(e) { return r; }
    r.collapse(true);
    r.moveEnd("character", end);
    r.moveStart("character", start);
    return r;
  };

  function removeChildren(e) {
    for (var count = e.childNodes.length; count > 0; --count)
      e.removeChild(e.firstChild);
    return e;
  }

  function removeChildrenAndAdd(parent, e) {
    return removeChildren(parent).appendChild(e);
  }

  var contains = CodeMirror.contains = function(parent, child) {
    if (child.nodeType == 3) // Android browser always returns false when child is a textnode
      child = child.parentNode;
    if (parent.contains)
      return parent.contains(child);
    do {
      if (child.nodeType == 11) child = child.host;
      if (child == parent) return true;
    } while (child = child.parentNode);
  };

  function activeElt() {
    var activeElement = document.activeElement;
    while (activeElement && activeElement.root && activeElement.root.activeElement)
      activeElement = activeElement.root.activeElement;
    return activeElement;
  }
  // Older versions of IE throws unspecified error when touching
  // document.activeElement in some cases (during loading, in iframe)
  if (ie && ie_version < 11) activeElt = function() {
    try { return document.activeElement; }
    catch(e) { return document.body; }
  };

  function classTest(cls) { return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*"); }
  var rmClass = CodeMirror.rmClass = function(node, cls) {
    var current = node.className;
    var match = classTest(cls).exec(current);
    if (match) {
      var after = current.slice(match.index + match[0].length);
      node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
    }
  };
  var addClass = CodeMirror.addClass = function(node, cls) {
    var current = node.className;
    if (!classTest(cls).test(current)) node.className += (current ? " " : "") + cls;
  };
  function joinClasses(a, b) {
    var as = a.split(" ");
    for (var i = 0; i < as.length; i++)
      if (as[i] && !classTest(as[i]).test(b)) b += " " + as[i];
    return b;
  }

  // WINDOW-WIDE EVENTS

  // These must be handled carefully, because naively registering a
  // handler for each editor will cause the editors to never be
  // garbage collected.

  function forEachCodeMirror(f) {
    if (!document.body.getElementsByClassName) return;
    var byClass = document.body.getElementsByClassName("CodeMirror");
    for (var i = 0; i < byClass.length; i++) {
      var cm = byClass[i].CodeMirror;
      if (cm) f(cm);
    }
  }

  var globalsRegistered = false;
  function ensureGlobalHandlers() {
    if (globalsRegistered) return;
    registerGlobalHandlers();
    globalsRegistered = true;
  }
  function registerGlobalHandlers() {
    // When the window resizes, we need to refresh active editors.
    var resizeTimer;
    on(window, "resize", function() {
      if (resizeTimer == null) resizeTimer = setTimeout(function() {
        resizeTimer = null;
        forEachCodeMirror(onResize);
      }, 100);
    });
    // When the window loses focus, we want to show the editor as blurred
    on(window, "blur", function() {
      forEachCodeMirror(onBlur);
    });
  }

  // FEATURE DETECTION

  // Detect drag-and-drop
  var dragAndDrop = function() {
    // There is *some* kind of drag-and-drop support in IE6-8, but I
    // couldn't get it to work yet.
    if (ie && ie_version < 9) return false;
    var div = elt('div');
    return "draggable" in div || "dragDrop" in div;
  }();

  var zwspSupported;
  function zeroWidthElement(measure) {
    if (zwspSupported == null) {
      var test = elt("span", "\u200b");
      removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
      if (measure.firstChild.offsetHeight != 0)
        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
    }
    var node = zwspSupported ? elt("span", "\u200b") :
      elt("span", "\u00a0", null, "display: inline-block; width: 1px; margin-right: -1px");
    node.setAttribute("cm-text", "");
    return node;
  }

  // Feature-detect IE's crummy client rect reporting for bidi text
  var badBidiRects;
  function hasBadBidiRects(measure) {
    if (badBidiRects != null) return badBidiRects;
    var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062eA"));
    var r0 = range(txt, 0, 1).getBoundingClientRect();
    if (!r0 || r0.left == r0.right) return false; // Safari returns null in some cases (#2780)
    var r1 = range(txt, 1, 2).getBoundingClientRect();
    return badBidiRects = (r1.right - r0.right < 3);
  }

  // See if "".split is the broken IE version, if so, provide an
  // alternative way to split lines.
  var splitLinesAuto = CodeMirror.splitLines = "\n\nb".split(/\n/).length != 3 ? function(string) {
    var pos = 0, result = [], l = string.length;
    while (pos <= l) {
      var nl = string.indexOf("\n", pos);
      if (nl == -1) nl = string.length;
      var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
      var rt = line.indexOf("\r");
      if (rt != -1) {
        result.push(line.slice(0, rt));
        pos += rt + 1;
      } else {
        result.push(line);
        pos = nl + 1;
      }
    }
    return result;
  } : function(string){return string.split(/\r\n?|\n/);};

  var hasSelection = window.getSelection ? function(te) {
    try { return te.selectionStart != te.selectionEnd; }
    catch(e) { return false; }
  } : function(te) {
    try {var range = te.ownerDocument.selection.createRange();}
    catch(e) {}
    if (!range || range.parentElement() != te) return false;
    return range.compareEndPoints("StartToEnd", range) != 0;
  };

  var hasCopyEvent = (function() {
    var e = elt("div");
    if ("oncopy" in e) return true;
    e.setAttribute("oncopy", "return;");
    return typeof e.oncopy == "function";
  })();

  var badZoomedRects = null;
  function hasBadZoomedRects(measure) {
    if (badZoomedRects != null) return badZoomedRects;
    var node = removeChildrenAndAdd(measure, elt("span", "x"));
    var normal = node.getBoundingClientRect();
    var fromRange = range(node, 0, 1).getBoundingClientRect();
    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
  }

  // KEY NAMES

  var keyNames = CodeMirror.keyNames = {
    3: "Enter", 8: "Backspace", 9: "Tab", 13: "Enter", 16: "Shift", 17: "Ctrl", 18: "Alt",
    19: "Pause", 20: "CapsLock", 27: "Esc", 32: "Space", 33: "PageUp", 34: "PageDown", 35: "End",
    36: "Home", 37: "Left", 38: "Up", 39: "Right", 40: "Down", 44: "PrintScrn", 45: "Insert",
    46: "Delete", 59: ";", 61: "=", 91: "Mod", 92: "Mod", 93: "Mod",
    106: "*", 107: "=", 109: "-", 110: ".", 111: "/", 127: "Delete",
    173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\",
    221: "]", 222: "'", 63232: "Up", 63233: "Down", 63234: "Left", 63235: "Right", 63272: "Delete",
    63273: "Home", 63275: "End", 63276: "PageUp", 63277: "PageDown", 63302: "Insert"
  };
  (function() {
    // Number keys
    for (var i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);
    // Alphabetic keys
    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);
    // Function keys
    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = "F" + i;
  })();

  // BIDI HELPERS

  function iterateBidiSections(order, from, to, f) {
    if (!order) return f(from, to, "ltr");
    var found = false;
    for (var i = 0; i < order.length; ++i) {
      var part = order[i];
      if (part.from < to && part.to > from || from == to && part.to == from) {
        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr");
        found = true;
      }
    }
    if (!found) f(from, to, "ltr");
  }

  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }
  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }

  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }
  function lineRight(line) {
    var order = getOrder(line);
    if (!order) return line.text.length;
    return bidiRight(lst(order));
  }

  function lineStart(cm, lineN) {
    var line = getLine(cm.doc, lineN);
    var visual = visualLine(line);
    if (visual != line) lineN = lineNo(visual);
    var order = getOrder(visual);
    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);
    return Pos(lineN, ch);
  }
  function lineEnd(cm, lineN) {
    var merged, line = getLine(cm.doc, lineN);
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      lineN = null;
    }
    var order = getOrder(line);
    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);
    return Pos(lineN == null ? lineNo(line) : lineN, ch);
  }
  function lineStartSmart(cm, pos) {
    var start = lineStart(cm, pos.line);
    var line = getLine(cm.doc, start.line);
    var order = getOrder(line);
    if (!order || order[0].level == 0) {
      var firstNonWS = Math.max(0, line.text.search(/\S/));
      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
      return Pos(start.line, inWS ? 0 : firstNonWS);
    }
    return start;
  }

  function compareBidiLevel(order, a, b) {
    var linedir = order[0].level;
    if (a == linedir) return true;
    if (b == linedir) return false;
    return a < b;
  }
  var bidiOther;
  function getBidiPartAt(order, pos) {
    bidiOther = null;
    for (var i = 0, found; i < order.length; ++i) {
      var cur = order[i];
      if (cur.from < pos && cur.to > pos) return i;
      if ((cur.from == pos || cur.to == pos)) {
        if (found == null) {
          found = i;
        } else if (compareBidiLevel(order, cur.level, order[found].level)) {
          if (cur.from != cur.to) bidiOther = found;
          return i;
        } else {
          if (cur.from != cur.to) bidiOther = i;
          return found;
        }
      }
    }
    return found;
  }

  function moveInLine(line, pos, dir, byUnit) {
    if (!byUnit) return pos + dir;
    do pos += dir;
    while (pos > 0 && isExtendingChar(line.text.charAt(pos)));
    return pos;
  }

  // This is needed in order to move 'visually' through bi-directional
  // text -- i.e., pressing left should make the cursor go left, even
  // when in RTL text. The tricky part is the 'jumps', where RTL and
  // LTR text touch each other. This often requires the cursor offset
  // to move more than one unit, in order to visually move one unit.
  function moveVisually(line, start, dir, byUnit) {
    var bidi = getOrder(line);
    if (!bidi) return moveLogically(line, start, dir, byUnit);
    var pos = getBidiPartAt(bidi, start), part = bidi[pos];
    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);

    for (;;) {
      if (target > part.from && target < part.to) return target;
      if (target == part.from || target == part.to) {
        if (getBidiPartAt(bidi, target) == pos) return target;
        part = bidi[pos += dir];
        return (dir > 0) == part.level % 2 ? part.to : part.from;
      } else {
        part = bidi[pos += dir];
        if (!part) return null;
        if ((dir > 0) == part.level % 2)
          target = moveInLine(line, part.to, -1, byUnit);
        else
          target = moveInLine(line, part.from, 1, byUnit);
      }
    }
  }

  function moveLogically(line, start, dir, byUnit) {
    var target = start + dir;
    if (byUnit) while (target > 0 && isExtendingChar(line.text.charAt(target))) target += dir;
    return target < 0 || target > line.text.length ? null : target;
  }

  // Bidirectional ordering algorithm
  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm
  // that this (partially) implements.

  // One-char codes used for character types:
  // L (L):   Left-to-Right
  // R (R):   Right-to-Left
  // r (AL):  Right-to-Left Arabic
  // 1 (EN):  European Number
  // + (ES):  European Number Separator
  // % (ET):  European Number Terminator
  // n (AN):  Arabic Number
  // , (CS):  Common Number Separator
  // m (NSM): Non-Spacing Mark
  // b (BN):  Boundary Neutral
  // s (B):   Paragraph Separator
  // t (S):   Segment Separator
  // w (WS):  Whitespace
  // N (ON):  Other Neutrals

  // Returns null if characters are ordered as they appear
  // (left-to-right), or an array of sections ({from, to, level}
  // objects) in the order in which they occur visually.
  var bidiOrdering = (function() {
    // Character types for codepoints 0 to 0xff
    var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
    // Character types for codepoints 0x600 to 0x6ff
    var arabicTypes = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";
    function charType(code) {
      if (code <= 0xf7) return lowTypes.charAt(code);
      else if (0x590 <= code && code <= 0x5f4) return "R";
      else if (0x600 <= code && code <= 0x6ed) return arabicTypes.charAt(code - 0x600);
      else if (0x6ee <= code && code <= 0x8ac) return "r";
      else if (0x2000 <= code && code <= 0x200b) return "w";
      else if (code == 0x200c) return "b";
      else return "L";
    }

    var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
    // Browsers seem to always treat the boundaries of block elements as being L.
    var outerType = "L";

    function BidiSpan(level, from, to) {
      this.level = level;
      this.from = from; this.to = to;
    }

    return function(str) {
      if (!bidiRE.test(str)) return false;
      var len = str.length, types = [];
      for (var i = 0, type; i < len; ++i)
        types.push(type = charType(str.charCodeAt(i)));

      // W1. Examine each non-spacing mark (NSM) in the level run, and
      // change the type of the NSM to the type of the previous
      // character. If the NSM is at the start of the level run, it will
      // get the type of sor.
      for (var i = 0, prev = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "m") types[i] = prev;
        else prev = type;
      }

      // W2. Search backwards from each instance of a European number
      // until the first strong type (R, L, AL, or sor) is found. If an
      // AL is found, change the type of the European number to Arabic
      // number.
      // W3. Change all ALs to R.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "1" && cur == "r") types[i] = "n";
        else if (isStrong.test(type)) { cur = type; if (type == "r") types[i] = "R"; }
      }

      // W4. A single European separator between two European numbers
      // changes to a European number. A single common separator between
      // two numbers of the same type changes to that type.
      for (var i = 1, prev = types[0]; i < len - 1; ++i) {
        var type = types[i];
        if (type == "+" && prev == "1" && types[i+1] == "1") types[i] = "1";
        else if (type == "," && prev == types[i+1] &&
                 (prev == "1" || prev == "n")) types[i] = prev;
        prev = type;
      }

      // W5. A sequence of European terminators adjacent to European
      // numbers changes to all European numbers.
      // W6. Otherwise, separators and terminators change to Other
      // Neutral.
      for (var i = 0; i < len; ++i) {
        var type = types[i];
        if (type == ",") types[i] = "N";
        else if (type == "%") {
          for (var end = i + 1; end < len && types[end] == "%"; ++end) {}
          var replace = (i && types[i-1] == "!") || (end < len && types[end] == "1") ? "1" : "N";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // W7. Search backwards from each instance of a European number
      // until the first strong type (R, L, or sor) is found. If an L is
      // found, then change the type of the European number to L.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (cur == "L" && type == "1") types[i] = "L";
        else if (isStrong.test(type)) cur = type;
      }

      // N1. A sequence of neutrals takes the direction of the
      // surrounding strong text if the text on both sides has the same
      // direction. European and Arabic numbers act as if they were R in
      // terms of their influence on neutrals. Start-of-level-run (sor)
      // and end-of-level-run (eor) are used at level run boundaries.
      // N2. Any remaining neutrals take the embedding direction.
      for (var i = 0; i < len; ++i) {
        if (isNeutral.test(types[i])) {
          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}
          var before = (i ? types[i-1] : outerType) == "L";
          var after = (end < len ? types[end] : outerType) == "L";
          var replace = before || after ? "L" : "R";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // Here we depart from the documented algorithm, in order to avoid
      // building up an actual levels array. Since there are only three
      // levels (0, 1, 2) in an implementation that doesn't take
      // explicit embedding into account, we can build up the order on
      // the fly, without following the level-based algorithm.
      var order = [], m;
      for (var i = 0; i < len;) {
        if (countsAsLeft.test(types[i])) {
          var start = i;
          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}
          order.push(new BidiSpan(0, start, i));
        } else {
          var pos = i, at = order.length;
          for (++i; i < len && types[i] != "L"; ++i) {}
          for (var j = pos; j < i;) {
            if (countsAsNum.test(types[j])) {
              if (pos < j) order.splice(at, 0, new BidiSpan(1, pos, j));
              var nstart = j;
              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}
              order.splice(at, 0, new BidiSpan(2, nstart, j));
              pos = j;
            } else ++j;
          }
          if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i));
        }
      }
      if (order[0].level == 1 && (m = str.match(/^\s+/))) {
        order[0].from = m[0].length;
        order.unshift(new BidiSpan(0, 0, m[0].length));
      }
      if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
        lst(order).to -= m[0].length;
        order.push(new BidiSpan(0, len - m[0].length, len));
      }
      if (order[0].level == 2)
        order.unshift(new BidiSpan(1, order[0].to, order[0].to));
      if (order[0].level != lst(order).level)
        order.push(new BidiSpan(order[0].level, len, len));

      return order;
    };
  })();

  // THE END

  CodeMirror.version = "5.14.2";

  return CodeMirror;
});

},{}],18:[function(require,module,exports){
// universal module definition: https://github.com/umdjs/umd/blob/master/returnExports.js#L41
(function (root, factory) {
    if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else {
        // Browser globals (root is window)
        root.emoji = factory();
  }
}(this, function () {
    var emojis = [":blush:",":scream:",":smirk:",":smiley:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":rage:",":disappointed:",":sob:",":kissing_heart:",":wink:",":pensive:",":confounded:",":flushed:",":relaxed:",":mask:",":heart:",":broken_heart:",":sunny:",":umbrella:",":cloud:",":snowflake:",":snowman:",":zap:",":cyclone:",":foggy:",":ocean:",":cat:",":dog:",":mouse:",":hamster:",":rabbit:",":wolf:",":frog:",":tiger:",":koala:",":bear:",":pig:",":pig_nose:",":cow:",":boar:",":monkey_face:",":monkey:",":horse:",":racehorse:",":camel:",":sheep:",":elephant:",":panda_face:",":snake:",":bird:",":baby_chick:",":hatched_chick:",":hatching_chick:",":chicken:",":penguin:",":turtle:",":bug:",":honeybee:",":ant:",":beetle:",":snail:",":octopus:",":tropical_fish:",":fish:",":whale:",":whale2:",":dolphin:",":cow2:",":ram:",":rat:",":water_buffalo:",":tiger2:",":rabbit2:",":dragon:",":goat:",":rooster:",":dog2:",":pig2:",":mouse2:",":ox:",":dragon_face:",":blowfish:",":crocodile:",":dromedary_camel:",":leopard:",":cat2:",":poodle:",":paw_prints:",":bouquet:",":cherry_blossom:",":tulip:",":four_leaf_clover:",":rose:",":sunflower:",":hibiscus:",":maple_leaf:",":leaves:",":fallen_leaf:",":herb:",":mushroom:",":cactus:",":palm_tree:",":evergreen_tree:",":deciduous_tree:",":chestnut:",":seedling:",":blossom:",":ear_of_rice:",":shell:",":globe_with_meridians:",":sun_with_face:",":full_moon_with_face:",":new_moon_with_face:",":new_moon:",":waxing_crescent_moon:",":first_quarter_moon:",":waxing_gibbous_moon:",":full_moon:",":waning_gibbous_moon:",":last_quarter_moon:",":waning_crescent_moon:",":last_quarter_moon_with_face:",":first_quarter_moon_with_face:",":moon:",":earth_africa:",":earth_americas:",":earth_asia:",":volcano:",":milky_way:",":partly_sunny:",":octocat:",":squirrel:",":bamboo:",":gift_heart:",":dolls:",":school_satchel:",":mortar_board:",":flags:",":fireworks:",":sparkler:",":wind_chime:",":rice_scene:",":jack_o_lantern:",":ghost:",":santa:",":christmas_tree:",":gift:",":bell:",":no_bell:",":tanabata_tree:",":tada:",":confetti_ball:",":balloon:",":crystal_ball:",":cd:",":dvd:",":floppy_disk:",":camera:",":video_camera:",":movie_camera:",":computer:",":tv:",":iphone:",":phone:",":telephone:",":telephone_receiver:",":pager:",":fax:",":minidisc:",":vhs:",":sound:",":speaker:",":mute:",":loudspeaker:",":mega:",":hourglass:",":hourglass_flowing_sand:",":alarm_clock:",":watch:",":radio:",":satellite:",":loop:",":mag:",":mag_right:",":unlock:",":lock:",":lock_with_ink_pen:",":closed_lock_with_key:",":key:",":bulb:",":flashlight:",":high_brightness:",":low_brightness:",":electric_plug:",":battery:",":calling:",":email:",":mailbox:",":postbox:",":bath:",":bathtub:",":shower:",":toilet:",":wrench:",":nut_and_bolt:",":hammer:",":seat:",":moneybag:",":yen:",":dollar:",":pound:",":euro:",":credit_card:",":money_with_wings:",":e-mail:",":inbox_tray:",":outbox_tray:",":envelope:",":incoming_envelope:",":postal_horn:",":mailbox_closed:",":mailbox_with_mail:",":mailbox_with_no_mail:",":door:",":smoking:",":bomb:",":gun:",":hocho:",":pill:",":syringe:",":page_facing_up:",":page_with_curl:",":bookmark_tabs:",":bar_chart:",":chart_with_upwards_trend:",":chart_with_downwards_trend:",":scroll:",":clipboard:",":calendar:",":date:",":card_index:",":file_folder:",":open_file_folder:",":scissors:",":pushpin:",":paperclip:",":black_nib:",":pencil2:",":straight_ruler:",":triangular_ruler:",":closed_book:",":green_book:",":blue_book:",":orange_book:",":notebook:",":notebook_with_decorative_cover:",":ledger:",":books:",":bookmark:",":name_badge:",":microscope:",":telescope:",":newspaper:",":football:",":basketball:",":soccer:",":baseball:",":tennis:",":8ball:",":rugby_football:",":bowling:",":golf:",":mountain_bicyclist:",":bicyclist:",":horse_racing:",":snowboarder:",":swimmer:",":surfer:",":ski:",":spades:",":hearts:",":clubs:",":diamonds:",":gem:",":ring:",":trophy:",":musical_score:",":musical_keyboard:",":violin:",":space_invader:",":video_game:",":black_joker:",":flower_playing_cards:",":game_die:",":dart:",":mahjong:",":clapper:",":memo:",":pencil:",":book:",":art:",":microphone:",":headphones:",":trumpet:",":saxophone:",":guitar:",":shoe:",":sandal:",":high_heel:",":lipstick:",":boot:",":shirt:",":tshirt:",":necktie:",":womans_clothes:",":dress:",":running_shirt_with_sash:",":jeans:",":kimono:",":bikini:",":ribbon:",":tophat:",":crown:",":womans_hat:",":mans_shoe:",":closed_umbrella:",":briefcase:",":handbag:",":pouch:",":purse:",":eyeglasses:",":fishing_pole_and_fish:",":coffee:",":tea:",":sake:",":baby_bottle:",":beer:",":beers:",":cocktail:",":tropical_drink:",":wine_glass:",":fork_and_knife:",":pizza:",":hamburger:",":fries:",":poultry_leg:",":meat_on_bone:",":spaghetti:",":curry:",":fried_shrimp:",":bento:",":sushi:",":fish_cake:",":rice_ball:",":rice_cracker:",":rice:",":ramen:",":stew:",":oden:",":dango:",":egg:",":bread:",":doughnut:",":custard:",":icecream:",":ice_cream:",":shaved_ice:",":birthday:",":cake:",":cookie:",":chocolate_bar:",":candy:",":lollipop:",":honey_pot:",":apple:",":green_apple:",":tangerine:",":lemon:",":cherries:",":grapes:",":watermelon:",":strawberry:",":peach:",":melon:",":banana:",":pear:",":pineapple:",":sweet_potato:",":eggplant:",":tomato:",":corn:",":alien:",":angel:",":anger:",":angry:",":anguished:",":astonished:",":baby:",":blue_heart:",":blush:",":boom:",":bow:",":bowtie:",":boy:",":bride_with_veil:",":broken_heart:",":bust_in_silhouette:",":busts_in_silhouette:",":clap:",":cold_sweat:",":collision:",":confounded:",":confused:",":construction_worker:",":cop:",":couple_with_heart:",":couple:",":couplekiss:",":cry:",":crying_cat_face:",":cupid:",":dancer:",":dancers:",":dash:",":disappointed:",":dizzy_face:",":dizzy:",":droplet:",":ear:",":exclamation:",":expressionless:",":eyes:",":facepunch:",":family:",":fearful:",":feelsgood:",":feet:",":finnadie:",":fire:",":fist:",":flushed:",":frowning:",":girl:",":goberserk:",":godmode:",":green_heart:",":grey_exclamation:",":grey_question:",":grimacing:",":grin:",":grinning:",":guardsman:",":haircut:",":hand:",":hankey:",":hear_no_evil:",":heart_eyes_cat:",":heart_eyes:",":heart:",":heartbeat:",":heartpulse:",":hurtrealbad:",":hushed:",":imp:",":information_desk_person:",":innocent:",":japanese_goblin:",":japanese_ogre:",":joy_cat:",":joy:",":kiss:",":kissing_cat:",":kissing_closed_eyes:",":kissing_heart:",":kissing_smiling_eyes:",":kissing:",":laughing:",":lips:",":love_letter:",":man_with_gua_pi_mao:",":man_with_turban:",":man:",":mask:",":massage:",":metal:",":muscle:",":musical_note:",":nail_care:",":neckbeard:",":neutral_face:",":no_good:",":no_mouth:",":nose:",":notes:",":ok_hand:",":ok_woman:",":older_man:",":older_woman:",":open_hands:",":open_mouth:",":pensive:",":persevere:",":person_frowning:",":person_with_blond_hair:",":person_with_pouting_face:",":point_down:",":point_left:",":point_right:",":point_up_2:",":point_up:",":poop:",":pouting_cat:",":pray:",":princess:",":punch:",":purple_heart:",":question:",":rage:",":rage1:",":rage2:",":rage3:",":rage4:",":raised_hand:",":raised_hands:",":relaxed:",":relieved:",":revolving_hearts:",":runner:",":running:",":satisfied:",":scream_cat:",":scream:",":see_no_evil:",":shit:",":skull:",":sleeping:",":sleepy:",":smile_cat:",":smile:",":smiley_cat:",":smiley:",":smiling_imp:",":smirk_cat:",":smirk:",":sob:",":sparkling_heart:",":sparkles:",":speak_no_evil:",":speech_balloon:",":star:",":star2:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":stuck_out_tongue:",":sunglasses:",":suspect:",":sweat_drops:",":sweat_smile:",":sweat:",":thought_balloon:",":-1:",":thumbsdown:",":thumbsup:",":+1:",":tired_face:",":tongue:",":triumph:",":trollface:",":two_hearts:",":two_men_holding_hands:",":two_women_holding_hands:",":unamused:",":v:",":walking:",":wave:",":weary:",":wink2:",":wink:",":woman:",":worried:",":yellow_heart:",":yum:",":zzz:",":109:",":house:",":house_with_garden:",":school:",":office:",":post_office:",":hospital:",":bank:",":convenience_store:",":love_hotel:",":hotel:",":wedding:",":church:",":department_store:",":european_post_office:",":city_sunrise:",":city_sunset:",":japanese_castle:",":european_castle:",":tent:",":factory:",":tokyo_tower:",":japan:",":mount_fuji:",":sunrise_over_mountains:",":sunrise:",":stars:",":statue_of_liberty:",":bridge_at_night:",":carousel_horse:",":rainbow:",":ferris_wheel:",":fountain:",":roller_coaster:",":ship:",":speedboat:",":boat:",":sailboat:",":rowboat:",":anchor:",":rocket:",":airplane:",":helicopter:",":steam_locomotive:",":tram:",":mountain_railway:",":bike:",":aerial_tramway:",":suspension_railway:",":mountain_cableway:",":tractor:",":blue_car:",":oncoming_automobile:",":car:",":red_car:",":taxi:",":oncoming_taxi:",":articulated_lorry:",":bus:",":oncoming_bus:",":rotating_light:",":police_car:",":oncoming_police_car:",":fire_engine:",":ambulance:",":minibus:",":truck:",":train:",":station:",":train2:",":bullettrain_front:",":bullettrain_side:",":light_rail:",":monorail:",":railway_car:",":trolleybus:",":ticket:",":fuelpump:",":vertical_traffic_light:",":traffic_light:",":warning:",":construction:",":beginner:",":atm:",":slot_machine:",":busstop:",":barber:",":hotsprings:",":checkered_flag:",":crossed_flags:",":izakaya_lantern:",":moyai:",":circus_tent:",":performing_arts:",":round_pushpin:",":triangular_flag_on_post:",":jp:",":kr:",":cn:",":us:",":fr:",":es:",":it:",":ru:",":gb:",":uk:",":de:",":100:",":1234:",":one:",":two:",":three:",":four:",":five:",":six:",":seven:",":eight:",":nine:",":keycap_ten:",":zero:",":hash:",":symbols:",":arrow_backward:",":arrow_down:",":arrow_forward:",":arrow_left:",":capital_abcd:",":abcd:",":abc:",":arrow_lower_left:",":arrow_lower_right:",":arrow_right:",":arrow_up:",":arrow_upper_left:",":arrow_upper_right:",":arrow_double_down:",":arrow_double_up:",":arrow_down_small:",":arrow_heading_down:",":arrow_heading_up:",":leftwards_arrow_with_hook:",":arrow_right_hook:",":left_right_arrow:",":arrow_up_down:",":arrow_up_small:",":arrows_clockwise:",":arrows_counterclockwise:",":rewind:",":fast_forward:",":information_source:",":ok:",":twisted_rightwards_arrows:",":repeat:",":repeat_one:",":new:",":top:",":up:",":cool:",":free:",":ng:",":cinema:",":koko:",":signal_strength:",":u5272:",":u5408:",":u55b6:",":u6307:",":u6708:",":u6709:",":u6e80:",":u7121:",":u7533:",":u7a7a:",":u7981:",":sa:",":restroom:",":mens:",":womens:",":baby_symbol:",":no_smoking:",":parking:",":wheelchair:",":metro:",":baggage_claim:",":accept:",":wc:",":potable_water:",":put_litter_in_its_place:",":secret:",":congratulations:",":m:",":passport_control:",":left_luggage:",":customs:",":ideograph_advantage:",":cl:",":sos:",":id:",":no_entry_sign:",":underage:",":no_mobile_phones:",":do_not_litter:",":non-potable_water:",":no_bicycles:",":no_pedestrians:",":children_crossing:",":no_entry:",":eight_spoked_asterisk:",":eight_pointed_black_star:",":heart_decoration:",":vs:",":vibration_mode:",":mobile_phone_off:",":chart:",":currency_exchange:",":aries:",":taurus:",":gemini:",":cancer:",":leo:",":virgo:",":libra:",":scorpius:",":sagittarius:",":capricorn:",":aquarius:",":pisces:",":ophiuchus:",":six_pointed_star:",":negative_squared_cross_mark:",":a:",":b:",":ab:",":o2:",":diamond_shape_with_a_dot_inside:",":recycle:",":end:",":on:",":soon:",":clock1:",":clock130:",":clock10:",":clock1030:",":clock11:",":clock1130:",":clock12:",":clock1230:",":clock2:",":clock230:",":clock3:",":clock330:",":clock4:",":clock430:",":clock5:",":clock530:",":clock6:",":clock630:",":clock7:",":clock730:",":clock8:",":clock830:",":clock9:",":clock930:",":heavy_dollar_sign:",":copyright:",":registered:",":tm:",":x:",":heavy_exclamation_mark:",":bangbang:",":interrobang:",":o:",":heavy_multiplication_x:",":heavy_plus_sign:",":heavy_minus_sign:",":heavy_division_sign:",":white_flower:",":heavy_check_mark:",":ballot_box_with_check:",":radio_button:",":link:",":curly_loop:",":wavy_dash:",":part_alternation_mark:",":trident:",":black_square:",":white_square:",":white_check_mark:",":black_square_button:",":white_square_button:",":black_circle:",":white_circle:",":red_circle:",":large_blue_circle:",":large_blue_diamond:",":large_orange_diamond:",":small_blue_diamond:",":small_orange_diamond:",":small_red_triangle:",":small_red_triangle_down:",":shipit:"],
        test = /\:[a-z0-9_\-\+]+\:/g;

    function emoji(someString, url, size) {
        return someString.replace(test, function (match) {
            if (emojis.indexOf(match) !== -1) {
                var name = String(match).slice(1, -1);
                return '<img class="emoji" title=":' + name + ':" alt="' + name + '" src="' + url + '/' + encodeURIComponent(name) + '.png"' + (size ? (' height="' + size + '"') : '') + ' />';
            } else {
                return match;
            }
        });
    };

    emoji.list = emojis;

    return emoji;
}));

},{}],19:[function(require,module,exports){
// Copyright 2009-2012 by contributors, MIT License
// vim: ts=4 sts=4 sw=4 expandtab

//Add semicolon to prevent IIFE from being passed as argument to concated code.
;
// Module systems magic dance
(function (definition) {
    // RequireJS
    if (typeof define == "function") {
        define(definition);
    // YUI3
    } else if (typeof YUI == "function") {
        YUI.add("es5", definition);
    // CommonJS and <script>
    } else {
        definition();
    }
})(function () {

/**
 * Brings an environment as close to ECMAScript 5 compliance
 * as is possible with the facilities of erstwhile engines.
 *
 * Annotated ES5: http://es5.github.com/ (specific links below)
 * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf
 * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/
 */

// ES-5 15.1.2.2
if (parseInt('08') !== 8) {
    parseInt = (function (origParseInt) {
        var hexRegex = /^0[xX]/;
        return function parseIntES5(str, radix) {
            str = String(str).trim();
            if (!+radix) {
                radix = hexRegex.test(str) ? 16 : 10;
            }
            return origParseInt(str, radix);
        };
    }(parseInt));
}

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

function Empty() {}

if (!Function.prototype.bind) {
    Function.prototype.bind = function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (typeof target != "function") {
            throw new TypeError("Function.prototype.bind called on incompatible " + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = _Array_slice_.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(_Array_slice_.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(_Array_slice_.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push("$" + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only 
        // way to set the length property of a function. 
        // In environments where Content Security Policies enabled (Chrome extensions, 
        // for ex.) all use of eval or Function costructor throws an exception. 
        // However in all of these environments Function.prototype.bind exists 
        // and so this code will never be executed.
        var bound = Function("binder", "return function(" + boundArgs.join(",") + "){return binder.apply(this,arguments)}")(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    };
}

// Shortcut to an often accessed properties, in order to avoid multiple
// dereference that costs universally.
// _Please note: Shortcuts are defined after `Function.prototype.bind` as we
// us it in defining shortcuts.
var call = Function.prototype.call;
var prototypeOfArray = Array.prototype;
var prototypeOfObject = Object.prototype;
var _Array_slice_ = prototypeOfArray.slice;
// Having a toString local variable name breaks in Opera so use _toString.
var _toString = call.bind(prototypeOfObject.toString);
var owns = call.bind(prototypeOfObject.hasOwnProperty);

// If JS engine supports accessors creating shortcuts.
var defineGetter;
var defineSetter;
var lookupGetter;
var lookupSetter;
var supportsAccessors;
if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__"))) {
    defineGetter = call.bind(prototypeOfObject.__defineGetter__);
    defineSetter = call.bind(prototypeOfObject.__defineSetter__);
    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);
    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);
}

//
// Array
// =====
//

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.12
// Default value for second param
// [bugfix, ielt9, old browsers]
// IE < 9 bug: [1,2].splice(0).join("") == "" but should be "12"
if ([1,2].splice(0).length != 2) {
    var array_splice = Array.prototype.splice;
    var array_push = Array.prototype.push;
    var array_unshift = Array.prototype.unshift;

    if (function() { // test IE < 9 to splice bug - see issue #138
        function makeArray(l) {
            var a = [];
            while (l--) {
                a.unshift(l)
            }
            return a
        }

        var array = []
            , lengthBefore
        ;

        array.splice.bind(array, 0, 0).apply(null, makeArray(20));
        array.splice.bind(array, 0, 0).apply(null, makeArray(26));

        lengthBefore = array.length; //20
        array.splice(5, 0, "XXX"); // add one element

        if (lengthBefore + 1 == array.length) {
            return true;// has right splice implementation without bugs
        }
        // else {
        //    IE8 bug
        // }
    }()) {//IE 6/7
        Array.prototype.splice = function(start, deleteCount) {
            if (!arguments.length) {
                return [];
            } else {
                return array_splice.apply(this, [
                    start === void 0 ? 0 : start,
                    deleteCount === void 0 ? (this.length - start) : deleteCount
                ].concat(_Array_slice_.call(arguments, 2)))
            }
        };
    }
    else {//IE8
        Array.prototype.splice = function(start, deleteCount) {
            var result
                , args = _Array_slice_.call(arguments, 2)
                , addElementsCount = args.length
            ;

            if (!arguments.length) {
                return [];
            }

            if (start === void 0) { // default
                start = 0;
            }
            if (deleteCount === void 0) { // default
                deleteCount = this.length - start;
            }

            if (addElementsCount > 0) {
                if (deleteCount <= 0) {
                    if (start == this.length) { // tiny optimisation #1
                        array_push.apply(this, args);
                        return [];
                    }

                    if (start == 0) { // tiny optimisation #2
                        array_unshift.apply(this, args);
                        return [];
                    }
                }

                // Array.prototype.splice implementation
                result = _Array_slice_.call(this, start, start + deleteCount);// delete part
                args.push.apply(args, _Array_slice_.call(this, start + deleteCount, this.length));// right part
                args.unshift.apply(args, _Array_slice_.call(this, 0, start));// left part

                // delete all items from this array and replace it to 'left part' + _Array_slice_.call(arguments, 2) + 'right part'
                args.unshift(0, this.length);

                array_splice.apply(this, args);

                return result;
            }

            return array_splice.call(this, start, deleteCount);
        }

    }
}

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.13
// Return len+argCount.
// [bugfix, ielt8]
// IE < 8 bug: [].unshift(0) == undefined but should be "1"
if ([].unshift(0) != 1) {
    var array_unshift = Array.prototype.unshift;
    Array.prototype.unshift = function() {
        array_unshift.apply(this, arguments);
        return this.length;
    };
}

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
if (!Array.isArray) {
    Array.isArray = function isArray(obj) {
        return _toString(obj) == "[object Array]";
    };
}

// The IsCallable() check in the Array functions
// has been replaced with a strict check on the
// internal class of the object to trap cases where
// the provided function was actually a regular
// expression literal, which in V8 and
// JavaScriptCore is a typeof "function".  Only in
// V8 are regular expression literals permitted as
// reduce parameters, so it is desirable in the
// general case for the shim to match the more
// strict and common behavior of rejecting regular
// expressions.

// ES5 15.4.4.18
// http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach

// Check failure of by-index access of string characters (IE < 9)
// and failure of `0 in boxedString` (Rhino)
var boxedString = Object("a"),
    splitString = boxedString[0] != "a" || !(0 in boxedString);
// Check node 0.6.21 bug where third parameter is not boxed
var boxedForEach = true;
if (Array.prototype.forEach) {
    Array.prototype.forEach.call("foo", function(item, i, obj) {
        if (typeof obj !== 'object') boxedForEach = false;
    });
}

if (!Array.prototype.forEach || !boxedForEach) {
    Array.prototype.forEach = function forEach(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    };
}

// ES5 15.4.4.19
// http://es5.github.com/#x15.4.4.19
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map
if (!Array.prototype.map) {
    Array.prototype.map = function map(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            result = Array(length),
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self)
                result[i] = fun.call(thisp, self[i], i, object);
        }
        return result;
    };
}

// ES5 15.4.4.20
// http://es5.github.com/#x15.4.4.20
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter
if (!Array.prototype.filter) {
    Array.prototype.filter = function filter(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                    object,
            length = self.length >>> 0,
            result = [],
            value,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self) {
                value = self[i];
                if (fun.call(thisp, value, i, object)) {
                    result.push(value);
                }
            }
        }
        return result;
    };
}

// ES5 15.4.4.16
// http://es5.github.com/#x15.4.4.16
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every
if (!Array.prototype.every) {
    Array.prototype.every = function every(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self && !fun.call(thisp, self[i], i, object)) {
                return false;
            }
        }
        return true;
    };
}

// ES5 15.4.4.17
// http://es5.github.com/#x15.4.4.17
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some
if (!Array.prototype.some) {
    Array.prototype.some = function some(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self && fun.call(thisp, self[i], i, object)) {
                return true;
            }
        }
        return false;
    };
}

// ES5 15.4.4.21
// http://es5.github.com/#x15.4.4.21
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce
if (!Array.prototype.reduce) {
    Array.prototype.reduce = function reduce(fun /*, initial*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        // no value to return if no initial value and an empty array
        if (!length && arguments.length == 1) {
            throw new TypeError("reduce of empty array with no initial value");
        }

        var i = 0;
        var result;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i++];
                    break;
                }

                // if array contains no values, no initial value to return
                if (++i >= length) {
                    throw new TypeError("reduce of empty array with no initial value");
                }
            } while (true);
        }

        for (; i < length; i++) {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        }

        return result;
    };
}

// ES5 15.4.4.22
// http://es5.github.com/#x15.4.4.22
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight
if (!Array.prototype.reduceRight) {
    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        // no value to return if no initial value, empty array
        if (!length && arguments.length == 1) {
            throw new TypeError("reduceRight of empty array with no initial value");
        }

        var result, i = length - 1;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i--];
                    break;
                }

                // if array contains no values, no initial value to return
                if (--i < 0) {
                    throw new TypeError("reduceRight of empty array with no initial value");
                }
            } while (true);
        }

        if (i < 0) {
            return result;
        }

        do {
            if (i in this) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        } while (i--);

        return result;
    };
}

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
if (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {
    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {
        var self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    };
}

// ES5 15.4.4.15
// http://es5.github.com/#x15.4.4.15
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf
if (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {
    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {
        var self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }
        var i = length - 1;
        if (arguments.length > 1) {
            i = Math.min(i, toInteger(arguments[1]));
        }
        // handle negative indices
        i = i >= 0 ? i : length - Math.abs(i);
        for (; i >= 0; i--) {
            if (i in self && sought === self[i]) {
                return i;
            }
        }
        return -1;
    };
}

//
// Object
// ======
//

// ES5 15.2.3.14
// http://es5.github.com/#x15.2.3.14
if (!Object.keys) {
    // http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation
    var hasDontEnumBug = true,
        dontEnums = [
            "toString",
            "toLocaleString",
            "valueOf",
            "hasOwnProperty",
            "isPrototypeOf",
            "propertyIsEnumerable",
            "constructor"
        ],
        dontEnumsLength = dontEnums.length;

    for (var key in {"toString": null}) {
        hasDontEnumBug = false;
    }

    Object.keys = function keys(object) {

        if (
            (typeof object != "object" && typeof object != "function") ||
            object === null
        ) {
            throw new TypeError("Object.keys called on a non-object");
        }

        var keys = [];
        for (var name in object) {
            if (owns(object, name)) {
                keys.push(name);
            }
        }

        if (hasDontEnumBug) {
            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {
                var dontEnum = dontEnums[i];
                if (owns(object, dontEnum)) {
                    keys.push(dontEnum);
                }
            }
        }
        return keys;
    };

}

//
// Date
// ====
//

// ES5 15.9.5.43
// http://es5.github.com/#x15.9.5.43
// This function returns a String value represent the instance in time
// represented by this Date object. The format of the String is the Date Time
// string format defined in 15.9.1.15. All fields are present in the String.
// The time zone is always UTC, denoted by the suffix Z. If the time value of
// this object is not a finite Number a RangeError exception is thrown.
var negativeDate = -62198755200000,
    negativeYearString = "-000001";
if (
    !Date.prototype.toISOString ||
    (new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1)
) {
    Date.prototype.toISOString = function toISOString() {
        var result, length, value, year, month;
        if (!isFinite(this)) {
            throw new RangeError("Date.prototype.toISOString called on non-finite value.");
        }

        year = this.getUTCFullYear();

        month = this.getUTCMonth();
        // see https://github.com/es-shims/es5-shim/issues/111
        year += Math.floor(month / 12);
        month = (month % 12 + 12) % 12;

        // the date time string format is specified in 15.9.1.15.
        result = [month + 1, this.getUTCDate(),
            this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];
        year = (
            (year < 0 ? "-" : (year > 9999 ? "+" : "")) +
            ("00000" + Math.abs(year))
            .slice(0 <= year && year <= 9999 ? -4 : -6)
        );

        length = result.length;
        while (length--) {
            value = result[length];
            // pad months, days, hours, minutes, and seconds to have two
            // digits.
            if (value < 10) {
                result[length] = "0" + value;
            }
        }
        // pad milliseconds to have three digits.
        return (
            year + "-" + result.slice(0, 2).join("-") +
            "T" + result.slice(2).join(":") + "." +
            ("000" + this.getUTCMilliseconds()).slice(-3) + "Z"
        );
    };
}


// ES5 15.9.5.44
// http://es5.github.com/#x15.9.5.44
// This function provides a String representation of a Date object for use by
// JSON.stringify (15.12.3).
var dateToJSONIsSupported = false;
try {
    dateToJSONIsSupported = (
        Date.prototype.toJSON &&
        new Date(NaN).toJSON() === null &&
        new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&
        Date.prototype.toJSON.call({ // generic
            toISOString: function () {
                return true;
            }
        })
    );
} catch (e) {
}
if (!dateToJSONIsSupported) {
    Date.prototype.toJSON = function toJSON(key) {
        // When the toJSON method is called with argument key, the following
        // steps are taken:

        // 1.  Let O be the result of calling ToObject, giving it the this
        // value as its argument.
        // 2. Let tv be toPrimitive(O, hint Number).
        var o = Object(this),
            tv = toPrimitive(o),
            toISO;
        // 3. If tv is a Number and is not finite, return null.
        if (typeof tv === "number" && !isFinite(tv)) {
            return null;
        }
        // 4. Let toISO be the result of calling the [[Get]] internal method of
        // O with argument "toISOString".
        toISO = o.toISOString;
        // 5. If IsCallable(toISO) is false, throw a TypeError exception.
        if (typeof toISO != "function") {
            throw new TypeError("toISOString property is not callable");
        }
        // 6. Return the result of calling the [[Call]] internal method of
        //  toISO with O as the this value and an empty argument list.
        return toISO.call(o);

        // NOTE 1 The argument is ignored.

        // NOTE 2 The toJSON function is intentionally generic; it does not
        // require that its this value be a Date object. Therefore, it can be
        // transferred to other kinds of objects for use as a method. However,
        // it does require that any such object have a toISOString method. An
        // object is free to use the argument key to filter its
        // stringification.
    };
}

// ES5 15.9.4.2
// http://es5.github.com/#x15.9.4.2
// based on work shared by Daniel Friesen (dantman)
// http://gist.github.com/303249
if (!Date.parse || "Date.parse is buggy") {
    // XXX global assignment won't work in embeddings that use
    // an alternate object for the context.
    Date = (function(NativeDate) {

        // Date.length === 7
        function Date(Y, M, D, h, m, s, ms) {
            var length = arguments.length;
            if (this instanceof NativeDate) {
                var date = length == 1 && String(Y) === Y ? // isString(Y)
                    // We explicitly pass it through parse:
                    new NativeDate(Date.parse(Y)) :
                    // We have to manually make calls depending on argument
                    // length here
                    length >= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :
                    length >= 6 ? new NativeDate(Y, M, D, h, m, s) :
                    length >= 5 ? new NativeDate(Y, M, D, h, m) :
                    length >= 4 ? new NativeDate(Y, M, D, h) :
                    length >= 3 ? new NativeDate(Y, M, D) :
                    length >= 2 ? new NativeDate(Y, M) :
                    length >= 1 ? new NativeDate(Y) :
                                  new NativeDate();
                // Prevent mixups with unfixed Date object
                date.constructor = Date;
                return date;
            }
            return NativeDate.apply(this, arguments);
        };

        // 15.9.1.15 Date Time String Format.
        var isoDateExpression = new RegExp("^" +
            "(\\d{4}|[\+\-]\\d{6})" + // four-digit year capture or sign +
                                      // 6-digit extended year
            "(?:-(\\d{2})" + // optional month capture
            "(?:-(\\d{2})" + // optional day capture
            "(?:" + // capture hours:minutes:seconds.milliseconds
                "T(\\d{2})" + // hours capture
                ":(\\d{2})" + // minutes capture
                "(?:" + // optional :seconds.milliseconds
                    ":(\\d{2})" + // seconds capture
                    "(?:(\\.\\d{1,}))?" + // milliseconds capture
                ")?" +
            "(" + // capture UTC offset component
                "Z|" + // UTC capture
                "(?:" + // offset specifier +/-hours:minutes
                    "([-+])" + // sign capture
                    "(\\d{2})" + // hours offset capture
                    ":(\\d{2})" + // minutes offset capture
                ")" +
            ")?)?)?)?" +
        "$");

        var months = [
            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365
        ];

        function dayFromMonth(year, month) {
            var t = month > 1 ? 1 : 0;
            return (
                months[month] +
                Math.floor((year - 1969 + t) / 4) -
                Math.floor((year - 1901 + t) / 100) +
                Math.floor((year - 1601 + t) / 400) +
                365 * (year - 1970)
            );
        }

        function toUTC(t) {
            return Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));
        }

        // Copy any custom methods a 3rd party library may have added
        for (var key in NativeDate) {
            Date[key] = NativeDate[key];
        }

        // Copy "native" methods explicitly; they may be non-enumerable
        Date.now = NativeDate.now;
        Date.UTC = NativeDate.UTC;
        Date.prototype = NativeDate.prototype;
        Date.prototype.constructor = Date;

        // Upgrade Date.parse to handle simplified ISO 8601 strings
        Date.parse = function parse(string) {
            var match = isoDateExpression.exec(string);
            if (match) {
                // parse months, days, hours, minutes, seconds, and milliseconds
                // provide default values if necessary
                // parse the UTC offset component
                var year = Number(match[1]),
                    month = Number(match[2] || 1) - 1,
                    day = Number(match[3] || 1) - 1,
                    hour = Number(match[4] || 0),
                    minute = Number(match[5] || 0),
                    second = Number(match[6] || 0),
                    millisecond = Math.floor(Number(match[7] || 0) * 1000),
                    // When time zone is missed, local offset should be used
                    // (ES 5.1 bug)
                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112
                    isLocalTime = Boolean(match[4] && !match[8]),
                    signOffset = match[9] === "-" ? 1 : -1,
                    hourOffset = Number(match[10] || 0),
                    minuteOffset = Number(match[11] || 0),
                    result;
                if (
                    hour < (
                        minute > 0 || second > 0 || millisecond > 0 ?
                        24 : 25
                    ) &&
                    minute < 60 && second < 60 && millisecond < 1000 &&
                    month > -1 && month < 12 && hourOffset < 24 &&
                    minuteOffset < 60 && // detect invalid offsets
                    day > -1 &&
                    day < (
                        dayFromMonth(year, month + 1) -
                        dayFromMonth(year, month)
                    )
                ) {
                    result = (
                        (dayFromMonth(year, month) + day) * 24 +
                        hour +
                        hourOffset * signOffset
                    ) * 60;
                    result = (
                        (result + minute + minuteOffset * signOffset) * 60 +
                        second
                    ) * 1000 + millisecond;
                    if (isLocalTime) {
                        result = toUTC(result);
                    }
                    if (-8.64e15 <= result && result <= 8.64e15) {
                        return result;
                    }
                }
                return NaN;
            }
            return NativeDate.parse.apply(this, arguments);
        };

        return Date;
    })(Date);
}

// ES5 15.9.4.4
// http://es5.github.com/#x15.9.4.4
if (!Date.now) {
    Date.now = function now() {
        return new Date().getTime();
    };
}


//
// Number
// ======
//

// ES5.1 15.7.4.5
// http://es5.github.com/#x15.7.4.5
if (!Number.prototype.toFixed || (0.00008).toFixed(3) !== '0.000' || (0.9).toFixed(0) === '0' || (1.255).toFixed(2) !== '1.25' || (1000000000000000128).toFixed(0) !== "1000000000000000128") {
    // Hide these variables and functions
    (function () {
        var base, size, data, i;

        base = 1e7;
        size = 6;
        data = [0, 0, 0, 0, 0, 0];

        function multiply(n, c) {
            var i = -1;
            while (++i < size) {
                c += n * data[i];
                data[i] = c % base;
                c = Math.floor(c / base);
            }
        }

        function divide(n) {
            var i = size, c = 0;
            while (--i >= 0) {
                c += data[i];
                data[i] = Math.floor(c / n);
                c = (c % n) * base;
            }
        }

        function toString() {
            var i = size;
            var s = '';
            while (--i >= 0) {
                if (s !== '' || i === 0 || data[i] !== 0) {
                    var t = String(data[i]);
                    if (s === '') {
                        s = t;
                    } else {
                        s += '0000000'.slice(0, 7 - t.length) + t;
                    }
                }
            }
            return s;
        }

        function pow(x, n, acc) {
            return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));
        }

        function log(x) {
            var n = 0;
            while (x >= 4096) {
                n += 12;
                x /= 4096;
            }
            while (x >= 2) {
                n += 1;
                x /= 2;
            }
            return n;
        }

        Number.prototype.toFixed = function (fractionDigits) {
            var f, x, s, m, e, z, j, k;

            // Test for NaN and round fractionDigits down
            f = Number(fractionDigits);
            f = f !== f ? 0 : Math.floor(f);

            if (f < 0 || f > 20) {
                throw new RangeError("Number.toFixed called with invalid number of decimals");
            }

            x = Number(this);

            // Test for NaN
            if (x !== x) {
                return "NaN";
            }

            // If it is too big or small, return the string value of the number
            if (x <= -1e21 || x >= 1e21) {
                return String(x);
            }

            s = "";

            if (x < 0) {
                s = "-";
                x = -x;
            }

            m = "0";

            if (x > 1e-21) {
                // 1e-21 < x < 1e21
                // -70 < log2(x) < 70
                e = log(x * pow(2, 69, 1)) - 69;
                z = (e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1));
                z *= 0x10000000000000; // Math.pow(2, 52);
                e = 52 - e;

                // -18 < e < 122
                // x = z / 2 ^ e
                if (e > 0) {
                    multiply(0, z);
                    j = f;

                    while (j >= 7) {
                        multiply(1e7, 0);
                        j -= 7;
                    }

                    multiply(pow(10, j, 1), 0);
                    j = e - 1;

                    while (j >= 23) {
                        divide(1 << 23);
                        j -= 23;
                    }

                    divide(1 << j);
                    multiply(1, 1);
                    divide(2);
                    m = toString();
                } else {
                    multiply(0, z);
                    multiply(1 << (-e), 0);
                    m = toString() + '0.00000000000000000000'.slice(2, 2 + f);
                }
            }

            if (f > 0) {
                k = m.length;

                if (k <= f) {
                    m = s + '0.0000000000000000000'.slice(0, f - k + 2) + m;
                } else {
                    m = s + m.slice(0, k - f) + '.' + m.slice(k - f);
                }
            } else {
                m = s + m;
            }

            return m;
        }
    }());
}


//
// String
// ======
//


// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = String.prototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === "t" ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = /()??/.exec("")[1] === void 0; // NPCG: nonparticipating capturing group

        String.prototype.split = function (separator, limit) {
            var string = this;
            if (separator === void 0 && limit === 0)
                return [];

            // If `separator` is not a regex, use native split
            if (Object.prototype.toString.call(separator) !== "[object RegExp]") {
                return string_split.apply(this, arguments);
            }

            var output = [],
                flags = (separator.ignoreCase ? "i" : "") +
                        (separator.multiline  ? "m" : "") +
                        (separator.extended   ? "x" : "") + // Proposed for ES6
                        (separator.sticky     ? "y" : ""), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator = new RegExp(separator.source, flags + "g"),
                separator2, match, lastIndex, lastLength;
            string += ""; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp("^" + separator.source + "$(?!\\s)", flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = limit === void 0 ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                limit >>> 0; // ToUint32(limit)
            while (match = separator.exec(string)) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (arguments[i] === void 0) {
                                    match[i] = void 0;
                                }
                            }
                        });
                    }
                    if (match.length > 1 && match.index < string.length) {
                        Array.prototype.push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test("")) {
                    output.push("");
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ("0".split(void 0, 0).length) {
    String.prototype.split = function(separator, limit) {
        if (separator === void 0 && limit === 0) return [];
        return string_split.apply(this, arguments);
    }
}


// ECMA-262, 3rd B.2.3
// Note an ECMAScript standart, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
if ("".substr && "0b".substr(-1) !== "b") {
    var string_substr = String.prototype.substr;
    /**
     *  Get the substring of a string
     *  @param  {integer}  start   where to start the substring
     *  @param  {integer}  length  how many characters to return
     *  @return {string}
     */
    String.prototype.substr = function(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}

// ES5 15.5.4.20
// http://es5.github.com/#x15.5.4.20
var ws = "\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003" +
    "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028" +
    "\u2029\uFEFF";
if (!String.prototype.trim || ws.trim()) {
    // http://blog.stevenlevithan.com/archives/faster-trim-javascript
    // http://perfectionkills.com/whitespace-deviations/
    ws = "[" + ws + "]";
    var trimBeginRegexp = new RegExp("^" + ws + ws + "*"),
        trimEndRegexp = new RegExp(ws + ws + "*$");
    String.prototype.trim = function trim() {
        if (this === void 0 || this === null) {
            throw new TypeError("can't convert "+this+" to object");
        }
        return String(this)
            .replace(trimBeginRegexp, "")
            .replace(trimEndRegexp, "");
    };
}

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(n) {
    n = +n;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function isPrimitive(input) {
    var type = typeof input;
    return (
        input === null ||
        type === "undefined" ||
        type === "boolean" ||
        type === "number" ||
        type === "string"
    );
}

function toPrimitive(input) {
    var val, valueOf, toString;
    if (isPrimitive(input)) {
        return input;
    }
    valueOf = input.valueOf;
    if (typeof valueOf === "function") {
        val = valueOf.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    toString = input.toString;
    if (typeof toString === "function") {
        val = toString.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    throw new TypeError();
}

// ES5 9.9
// http://es5.github.com/#x9.9
var toObject = function (o) {
    if (o == null) { // this matches both null and undefined
        throw new TypeError("can't convert "+o+" to object");
    }
    return Object(o);
};

});


},{}],20:[function(require,module,exports){
(function (process,global){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Lexer, SourceMap, compile, ext, formatSourcePosition, fs, getSourceMap, helpers, iced_runtime, iced_transform, lexer, parser, path, sourceMaps, vm, withPrettyErrors, _base, _i, _len, _ref,
    __hasProp = {}.hasOwnProperty,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  fs = require('fs');

  vm = require('vm');

  path = require('path');

  Lexer = require('./lexer').Lexer;

  parser = require('./parser').parser;

  helpers = require('./helpers');

  SourceMap = require('./sourcemap').SourceMap;

  iced_transform = require('./iced').transform;

  iced_runtime = require('iced-runtime');

  exports.VERSION = '108.0.11';

  exports.FILE_EXTENSIONS = ['.coffee', '.litcoffee', '.coffee.md', '.iced', '.liticed', '.iced.md'];

  exports.helpers = helpers;

  withPrettyErrors = function(fn) {
    return function(code, options) {
      var err;
      if (options == null) {
        options = {};
      }
      try {
        return fn.call(this, code, options);
      } catch (_error) {
        err = _error;
        throw helpers.updateSyntaxError(err, code, options.filename);
      }
    };
  };

  exports.compile = compile = withPrettyErrors(function(code, options) {
    var answer, currentColumn, currentLine, extend, fragment, fragments, header, js, map, merge, newLines, _i, _len;
    merge = helpers.merge, extend = helpers.extend;
    options = extend({}, options);
    if (options.sourceMap) {
      map = new SourceMap;
    }
    fragments = (iced_transform(parser.parse(lexer.tokenize(code, options)), options)).compileToFragments(options);
    currentLine = 0;
    if (options.header) {
      currentLine += 1;
    }
    if (options.shiftLine) {
      currentLine += 1;
    }
    currentColumn = 0;
    js = "";
    for (_i = 0, _len = fragments.length; _i < _len; _i++) {
      fragment = fragments[_i];
      if (options.sourceMap) {
        if (fragment.locationData) {
          map.add([fragment.locationData.first_line, fragment.locationData.first_column], [currentLine, currentColumn], {
            noReplace: true
          });
        }
        newLines = helpers.count(fragment.code, "\n");
        currentLine += newLines;
        if (newLines) {
          currentColumn = fragment.code.length - (fragment.code.lastIndexOf("\n") + 1);
        } else {
          currentColumn += fragment.code.length;
        }
      }
      js += fragment.code;
    }
    if (options.header) {
      header = "Generated by IcedCoffeeScript " + this.VERSION;
      js = "// " + header + "\n" + js;
    }
    if (options.sourceMap) {
      answer = {
        js: js
      };
      answer.sourceMap = map;
      answer.v3SourceMap = map.generate(options, code);
      return answer;
    } else {
      return js;
    }
  });

  exports.tokens = withPrettyErrors(function(code, options) {
    return lexer.tokenize(code, options);
  });

  exports.nodes = withPrettyErrors(function(source, options) {
    var ast;
    if (typeof source === 'string') {
      ast = parser.parse(lexer.tokenize(source, options));
    } else {
      ast = parser.parse(source);
    }
    if (!options.noIcedTransform) {
      ast = iced_transform(ast, options);
    }
    return ast;
  });

  exports.run = function(code, options) {
    var answer, dir, mainModule, _ref;
    if (options == null) {
      options = {};
    }
    mainModule = require.main;
    mainModule.filename = process.argv[1] = options.filename ? fs.realpathSync(options.filename) : '.';
    mainModule.moduleCache && (mainModule.moduleCache = {});
    dir = options.filename ? path.dirname(fs.realpathSync(options.filename)) : fs.realpathSync('.');
    mainModule.paths = require('module')._nodeModulePaths(dir);
    if (!helpers.isCoffee(mainModule.filename) || require.extensions) {
      options.runtime = "interp";
      answer = compile(code, options);
      code = (_ref = answer.js) != null ? _ref : answer;
    }
    return mainModule._compile(code, mainModule.filename);
  };

  exports["eval"] = function(code, options) {
    var Module, Script, js, k, o, r, sandbox, v, _i, _len, _module, _ref, _ref1, _require;
    if (options == null) {
      options = {};
    }
    if (!(code = code.trim())) {
      return;
    }
    Script = vm.Script;
    if (Script) {
      if (options.sandbox != null) {
        if (options.sandbox instanceof Script.createContext().constructor) {
          sandbox = options.sandbox;
        } else {
          sandbox = Script.createContext();
          _ref = options.sandbox;
          for (k in _ref) {
            if (!__hasProp.call(_ref, k)) continue;
            v = _ref[k];
            sandbox[k] = v;
          }
        }
        sandbox.global = sandbox.root = sandbox.GLOBAL = sandbox;
      } else {
        sandbox = global;
      }
      sandbox.__filename = options.filename || 'eval';
      sandbox.__dirname = path.dirname(sandbox.__filename);
      if (!(sandbox !== global || sandbox.module || sandbox.require)) {
        Module = require('module');
        sandbox.module = _module = new Module(options.modulename || 'eval');
        sandbox.require = _require = function(path) {
          return Module._load(path, _module, true);
        };
        _module.filename = sandbox.__filename;
        _ref1 = Object.getOwnPropertyNames(require);
        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
          r = _ref1[_i];
          if (r !== 'paths') {
            _require[r] = require[r];
          }
        }
        _require.paths = _module.paths = Module._nodeModulePaths(process.cwd());
        _require.resolve = function(request) {
          return Module._resolveFilename(request, _module);
        };
      }
    }
    o = {};
    for (k in options) {
      if (!__hasProp.call(options, k)) continue;
      v = options[k];
      o[k] = v;
    }
    o.bare = true;
    js = compile(code, o);
    if (sandbox === global) {
      return vm.runInThisContext(js);
    } else {
      return vm.runInContext(js, sandbox);
    }
  };

  exports.register = function() {
    return require('./register');
  };

  if (require.extensions) {
    _ref = this.FILE_EXTENSIONS;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ext = _ref[_i];
      if ((_base = require.extensions)[ext] == null) {
        _base[ext] = function() {
          throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require " + ext + " files.");
        };
      }
    }
  }

  exports._compileFile = function(filename, sourceMap, opts_passed) {
    var answer, err, k, opts, raw, stripped, v;
    if (sourceMap == null) {
      sourceMap = false;
    }
    if (opts_passed == null) {
      opts_passed = {};
    }
    raw = fs.readFileSync(filename, 'utf8');
    stripped = raw.charCodeAt(0) === 0xFEFF ? raw.substring(1) : raw;
    opts = {
      filename: filename,
      sourceMap: sourceMap,
      literate: helpers.isLiterate(filename)
    };
    for (k in opts_passed) {
      v = opts_passed[k];
      opts[k] = v;
    }
    try {
      answer = compile(stripped, opts);
    } catch (_error) {
      err = _error;
      throw helpers.updateSyntaxError(err, stripped, filename);
    }
    return answer;
  };

  lexer = new Lexer;

  parser.lexer = {
    lex: function() {
      var tag, token;
      token = this.tokens[this.pos++];
      if (token) {
        tag = token[0], this.yytext = token[1], this.yylloc = token[2];
        this.errorToken = token.origin || token;
        this.yylineno = this.yylloc.first_line;
      } else {
        tag = '';
      }
      return tag;
    },
    setInput: function(tokens) {
      this.tokens = tokens;
      return this.pos = 0;
    },
    upcomingInput: function() {
      return "";
    }
  };

  parser.yy = require('./nodes');

  exports.iced = iced_runtime;

  parser.yy.parseError = function(message, _arg) {
    var errorLoc, errorTag, errorText, errorToken, token, tokens, _ref1;
    token = _arg.token;
    _ref1 = parser.lexer, errorToken = _ref1.errorToken, tokens = _ref1.tokens;
    errorTag = errorToken[0], errorText = errorToken[1], errorLoc = errorToken[2];
    errorText = errorToken === tokens[tokens.length - 1] ? 'end of input' : errorTag === 'INDENT' || errorTag === 'OUTDENT' ? 'indentation' : helpers.nameWhitespaceCharacter(errorText);
    return helpers.throwSyntaxError("unexpected " + errorText, errorLoc);
  };

  formatSourcePosition = function(frame, getSourceMapping) {
    var as, column, fileLocation, fileName, functionName, isConstructor, isMethodCall, line, methodName, source, tp, typeName;
    fileName = void 0;
    fileLocation = '';
    if (frame.isNative()) {
      fileLocation = "native";
    } else {
      if (frame.isEval()) {
        fileName = frame.getScriptNameOrSourceURL();
        if (!fileName) {
          fileLocation = "" + (frame.getEvalOrigin()) + ", ";
        }
      } else {
        fileName = frame.getFileName();
      }
      fileName || (fileName = "<anonymous>");
      line = frame.getLineNumber();
      column = frame.getColumnNumber();
      source = getSourceMapping(fileName, line, column);
      fileLocation = source ? "" + fileName + ":" + source[0] + ":" + source[1] : "" + fileName + ":" + line + ":" + column;
    }
    functionName = frame.getFunctionName();
    isConstructor = frame.isConstructor();
    isMethodCall = !(frame.isToplevel() || isConstructor);
    if (isMethodCall) {
      methodName = frame.getMethodName();
      typeName = frame.getTypeName();
      if (functionName) {
        tp = as = '';
        if (typeName && functionName.indexOf(typeName)) {
          tp = "" + typeName + ".";
        }
        if (methodName && functionName.indexOf("." + methodName) !== functionName.length - methodName.length - 1) {
          as = " [as " + methodName + "]";
        }
        return "" + tp + functionName + as + " (" + fileLocation + ")";
      } else {
        return "" + typeName + "." + (methodName || '<anonymous>') + " (" + fileLocation + ")";
      }
    } else if (isConstructor) {
      return "new " + (functionName || '<anonymous>') + " (" + fileLocation + ")";
    } else if (functionName) {
      return "" + functionName + " (" + fileLocation + ")";
    } else {
      return fileLocation;
    }
  };

  sourceMaps = {};

  getSourceMap = function(filename) {
    var answer, _ref1;
    if (sourceMaps[filename]) {
      return sourceMaps[filename];
    }
    if (_ref1 = path != null ? path.extname(filename) : void 0, __indexOf.call(exports.FILE_EXTENSIONS, _ref1) < 0) {
      return;
    }
    answer = exports._compileFile(filename, true);
    return sourceMaps[filename] = answer.sourceMap;
  };

  Error.prepareStackTrace = function(err, stack) {
    var frame, frames, getSourceMapping;
    getSourceMapping = function(filename, line, column) {
      var answer, sourceMap;
      sourceMap = getSourceMap(filename);
      if (sourceMap) {
        answer = sourceMap.sourceLocation([line - 1, column - 1]);
      }
      if (answer) {
        return [answer[0] + 1, answer[1] + 1];
      } else {
        return null;
      }
    };
    frames = (function() {
      var _j, _len1, _results;
      _results = [];
      for (_j = 0, _len1 = stack.length; _j < _len1; _j++) {
        frame = stack[_j];
        if (frame.getFunction() === exports.run) {
          break;
        }
        _results.push("  at " + (formatSourcePosition(frame, getSourceMapping)));
      }
      return _results;
    })();
    return "" + (err.toString()) + "\n" + (frames.join('\n')) + "\n";
  };

}).call(this);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./helpers":21,"./iced":22,"./lexer":23,"./nodes":24,"./parser":25,"./register":26,"./sourcemap":29,"_process":38,"fs":15,"iced-runtime":32,"module":15,"path":37,"vm":47}],21:[function(require,module,exports){
(function (process){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var buildLocationData, extend, flatten, last, repeat, syntaxErrorToString, _ref;

  exports.starts = function(string, literal, start) {
    return literal === string.substr(start, literal.length);
  };

  exports.ends = function(string, literal, back) {
    var len;
    len = literal.length;
    return literal === string.substr(string.length - len - (back || 0), len);
  };

  exports.repeat = repeat = function(str, n) {
    var res;
    res = '';
    while (n > 0) {
      if (n & 1) {
        res += str;
      }
      n >>>= 1;
      str += str;
    }
    return res;
  };

  exports.compact = function(array) {
    var item, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      item = array[_i];
      if (item) {
        _results.push(item);
      }
    }
    return _results;
  };

  exports.count = function(string, substr) {
    var num, pos;
    num = pos = 0;
    if (!substr.length) {
      return 1 / 0;
    }
    while (pos = 1 + string.indexOf(substr, pos)) {
      num++;
    }
    return num;
  };

  exports.merge = function(options, overrides) {
    return extend(extend({}, options), overrides);
  };

  extend = exports.extend = function(object, properties) {
    var key, val;
    for (key in properties) {
      val = properties[key];
      object[key] = val;
    }
    return object;
  };

  exports.flatten = flatten = function(array) {
    var element, flattened, _i, _len;
    flattened = [];
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      element = array[_i];
      if (element instanceof Array) {
        flattened = flattened.concat(flatten(element));
      } else {
        flattened.push(element);
      }
    }
    return flattened;
  };

  exports.del = function(obj, key) {
    var val;
    val = obj[key];
    delete obj[key];
    return val;
  };

  exports.last = last = function(array, back) {
    return array[array.length - (back || 0) - 1];
  };

  exports.some = (_ref = Array.prototype.some) != null ? _ref : function(fn) {
    var e, _i, _len;
    for (_i = 0, _len = this.length; _i < _len; _i++) {
      e = this[_i];
      if (fn(e)) {
        return true;
      }
    }
    return false;
  };

  exports.invertLiterate = function(code) {
    var line, lines, maybe_code;
    maybe_code = true;
    lines = (function() {
      var _i, _len, _ref1, _results;
      _ref1 = code.split('\n');
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        line = _ref1[_i];
        if (maybe_code && /^([ ]{4}|[ ]{0,3}\t)/.test(line)) {
          _results.push(line);
        } else if (maybe_code = /^\s*$/.test(line)) {
          _results.push(line);
        } else {
          _results.push('# ' + line);
        }
      }
      return _results;
    })();
    return lines.join('\n');
  };

  buildLocationData = function(first, last) {
    if (!last) {
      return first;
    } else {
      return {
        first_line: first.first_line,
        first_column: first.first_column,
        last_line: last.last_line,
        last_column: last.last_column
      };
    }
  };

  exports.addLocationDataFn = function(first, last) {
    return function(obj) {
      if (((typeof obj) === 'object') && (!!obj['updateLocationDataIfMissing'])) {
        obj.updateLocationDataIfMissing(buildLocationData(first, last));
      }
      return obj;
    };
  };

  exports.locationDataToString = function(obj) {
    var locationData;
    if (("2" in obj) && ("first_line" in obj[2])) {
      locationData = obj[2];
    } else if ("first_line" in obj) {
      locationData = obj;
    }
    if (locationData) {
      return ("" + (locationData.first_line + 1) + ":" + (locationData.first_column + 1) + "-") + ("" + (locationData.last_line + 1) + ":" + (locationData.last_column + 1));
    } else {
      return "No location data";
    }
  };

  exports.baseFileName = function(file, stripExt, useWinPathSep) {
    var parts, pathSep;
    if (stripExt == null) {
      stripExt = false;
    }
    if (useWinPathSep == null) {
      useWinPathSep = false;
    }
    pathSep = useWinPathSep ? /\\|\// : /\//;
    parts = file.split(pathSep);
    file = parts[parts.length - 1];
    if (!(stripExt && file.indexOf('.') >= 0)) {
      return file;
    }
    parts = file.split('.');
    parts.pop();
    if (parts[parts.length - 1] === 'coffee' && parts.length > 1) {
      parts.pop();
    }
    return parts.join('.');
  };

  exports.isCoffee = function(file) {
    return /\.((lit)?coffee|coffee\.md|iced|liticed|iced\.md)$/.test(file);
  };

  exports.isLiterate = function(file) {
    return /\.(litcoffee|coffee\.md|liticed|iced\.md)$/.test(file);
  };

  exports.throwSyntaxError = function(message, location) {
    var error;
    error = new SyntaxError(message);
    error.location = location;
    error.toString = syntaxErrorToString;
    error.stack = error.toString();
    throw error;
  };

  exports.updateSyntaxError = function(error, code, filename) {
    if (error.toString === syntaxErrorToString) {
      error.code || (error.code = code);
      error.filename || (error.filename = filename);
      error.stack = error.toString();
    }
    return error;
  };

  syntaxErrorToString = function() {
    var codeLine, colorize, colorsEnabled, end, filename, first_column, first_line, last_column, last_line, marker, start, _ref1, _ref2;
    if (!(this.code && this.location)) {
      return Error.prototype.toString.call(this);
    }
    _ref1 = this.location, first_line = _ref1.first_line, first_column = _ref1.first_column, last_line = _ref1.last_line, last_column = _ref1.last_column;
    if (last_line == null) {
      last_line = first_line;
    }
    if (last_column == null) {
      last_column = first_column;
    }
    filename = this.filename || '[stdin]';
    codeLine = this.code.split('\n')[first_line];
    start = first_column;
    end = first_line === last_line ? last_column + 1 : codeLine.length;
    marker = codeLine.slice(0, start).replace(/[^\s]/g, ' ') + repeat('^', end - start);
    if ((typeof process !== "undefined" && process !== null ? process.stdout : void 0) != null) {
      colorsEnabled = process.stdout.isTTY && !process.env.NODE_DISABLE_COLORS;
    }
    if ((_ref2 = this.colorful) != null ? _ref2 : colorsEnabled) {
      colorize = function(str) {
        return "\x1B[1;31m" + str + "\x1B[0m";
      };
      codeLine = codeLine.slice(0, start) + colorize(codeLine.slice(start, end)) + codeLine.slice(end);
      marker = colorize(marker);
    }
    return "" + filename + ":" + (first_line + 1) + ":" + (first_column + 1) + ": error: " + this.message + "\n" + codeLine + "\n" + marker;
  };

  exports.nameWhitespaceCharacter = function(string) {
    switch (string) {
      case ' ':
        return 'space';
      case '\n':
        return 'newline';
      case '\r':
        return 'carriage return';
      case '\t':
        return 'tab';
      default:
        return string;
    }
  };

}).call(this);

}).call(this,require('_process'))

},{"_process":38}],22:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  exports.transform = function(x, options) {
    return x.icedTransform(options);
  };

  exports.runtime = require('iced-runtime');

}).call(this);

},{"iced-runtime":32}],23:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var BOM, BOOL, CALLABLE, CODE, COFFEE_ALIASES, COFFEE_ALIAS_MAP, COFFEE_KEYWORDS, COMMENT, COMPARE, COMPOUND_ASSIGN, HEREDOC, HEREDOC_ILLEGAL, HEREDOC_INDENT, HEREGEX, HEREGEX_OMIT, IDENTIFIER, INDENTABLE_CLOSERS, INDEXABLE, INVERSES, JSTOKEN, JS_FORBIDDEN, JS_KEYWORDS, LINE_BREAK, LINE_CONTINUER, LOGIC, Lexer, MATH, MULTILINER, MULTI_DENT, NOT_REGEX, NOT_SPACED_REGEX, NUMBER, OPERATOR, REGEX, RELATION, RESERVED, Rewriter, SHIFT, SIMPLESTR, STRICT_PROSCRIBED, TRAILING_SPACES, UNARY, UNARY_MATH, WHITESPACE, compact, count, invertLiterate, key, last, locationDataToString, repeat, starts, throwSyntaxError, _ref, _ref1,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  _ref = require('./rewriter'), Rewriter = _ref.Rewriter, INVERSES = _ref.INVERSES;

  _ref1 = require('./helpers'), count = _ref1.count, starts = _ref1.starts, compact = _ref1.compact, last = _ref1.last, repeat = _ref1.repeat, invertLiterate = _ref1.invertLiterate, locationDataToString = _ref1.locationDataToString, throwSyntaxError = _ref1.throwSyntaxError;

  exports.Lexer = Lexer = (function() {
    function Lexer() {}

    Lexer.prototype.tokenize = function(code, opts) {
      var consumed, i, tag, _ref2;
      if (opts == null) {
        opts = {};
      }
      this.literate = opts.literate;
      this.indent = 0;
      this.baseIndent = 0;
      this.indebt = 0;
      this.outdebt = 0;
      this.indents = [];
      this.ends = [];
      this.tokens = [];
      this.chunkLine = opts.line || 0;
      this.chunkColumn = opts.column || 0;
      code = this.clean(code);
      i = 0;
      while (this.chunk = code.slice(i)) {
        consumed = this.identifierToken() || this.commentToken() || this.whitespaceToken() || this.lineToken() || this.heredocToken() || this.stringToken() || this.numberToken() || this.regexToken() || this.jsToken() || this.literalToken();
        _ref2 = this.getLineAndColumnFromChunk(consumed), this.chunkLine = _ref2[0], this.chunkColumn = _ref2[1];
        i += consumed;
      }
      this.closeIndentation();
      if (tag = this.ends.pop()) {
        this.error("missing " + tag);
      }
      if (opts.rewrite === false) {
        return this.tokens;
      }
      return (new Rewriter).rewrite(this.tokens);
    };

    Lexer.prototype.clean = function(code) {
      if (code.charCodeAt(0) === BOM) {
        code = code.slice(1);
      }
      code = code.replace(/\r/g, '').replace(TRAILING_SPACES, '');
      if (WHITESPACE.test(code)) {
        code = "\n" + code;
        this.chunkLine--;
      }
      if (this.literate) {
        code = invertLiterate(code);
      }
      return code;
    };

    Lexer.prototype.identifierToken = function() {
      var colon, colonOffset, forcedIdentifier, id, idLength, input, match, poppedToken, prev, tag, tagToken, _ref2, _ref3, _ref4;
      if (!(match = IDENTIFIER.exec(this.chunk))) {
        return 0;
      }
      input = match[0], id = match[1], colon = match[2];
      idLength = id.length;
      poppedToken = void 0;
      if (id === 'own' && this.tag() === 'FOR') {
        this.token('OWN', id);
        return id.length;
      }
      if (id === 'from' && this.tag() === 'YIELD') {
        this.token('FROM', id);
        return id.length;
      }
      forcedIdentifier = colon || (prev = last(this.tokens)) && (((_ref2 = prev[0]) === '.' || _ref2 === '?.' || _ref2 === '::' || _ref2 === '?::') || !prev.spaced && prev[0] === '@') && id !== 'defer';
      tag = 'IDENTIFIER';
      if (!forcedIdentifier && (__indexOf.call(JS_KEYWORDS, id) >= 0 || __indexOf.call(COFFEE_KEYWORDS, id) >= 0)) {
        tag = id.toUpperCase();
        if (tag === 'WHEN' && (_ref3 = this.tag(), __indexOf.call(LINE_BREAK, _ref3) >= 0)) {
          tag = 'LEADING_WHEN';
        } else if (tag === 'FOR') {
          this.seenFor = true;
        } else if (tag === 'UNLESS') {
          tag = 'IF';
        } else if (__indexOf.call(UNARY, tag) >= 0) {
          tag = 'UNARY';
        } else if (__indexOf.call(RELATION, tag) >= 0) {
          if (tag !== 'INSTANCEOF' && this.seenFor) {
            tag = 'FOR' + tag;
            this.seenFor = false;
          } else {
            tag = 'RELATION';
            if (this.value() === '!') {
              poppedToken = this.tokens.pop();
              id = '!' + id;
            }
          }
        }
      }
      if (__indexOf.call(JS_FORBIDDEN, id) >= 0) {
        if (forcedIdentifier) {
          tag = 'IDENTIFIER';
          id = new String(id);
          id.reserved = true;
        } else if (__indexOf.call(RESERVED, id) >= 0) {
          this.error("reserved word \"" + id + "\"");
        }
      }
      if (!forcedIdentifier) {
        if (__indexOf.call(COFFEE_ALIASES, id) >= 0) {
          id = COFFEE_ALIAS_MAP[id];
        }
        tag = (function() {
          switch (id) {
            case '!':
              return 'UNARY';
            case '==':
            case '!=':
              return 'COMPARE';
            case '&&':
            case '||':
              return 'LOGIC';
            case 'true':
            case 'false':
              return 'BOOL';
            case 'break':
            case 'continue':
              return 'STATEMENT';
            default:
              return tag;
          }
        })();
      }
      tagToken = this.token(tag, id, 0, idLength);
      if (poppedToken) {
        _ref4 = [poppedToken[2].first_line, poppedToken[2].first_column], tagToken[2].first_line = _ref4[0], tagToken[2].first_column = _ref4[1];
      }
      if (colon) {
        colonOffset = input.lastIndexOf(':');
        this.token(':', ':', colonOffset, colon.length);
      }
      return input.length;
    };

    Lexer.prototype.numberToken = function() {
      var binaryLiteral, lexedLength, match, number, octalLiteral;
      if (!(match = NUMBER.exec(this.chunk))) {
        return 0;
      }
      number = match[0];
      if (/^0[BOX]/.test(number)) {
        this.error("radix prefix '" + number + "' must be lowercase");
      } else if (/E/.test(number) && !/^0x/.test(number)) {
        this.error("exponential notation '" + number + "' must be indicated with a lowercase 'e'");
      } else if (/^0\d*[89]/.test(number)) {
        this.error("decimal literal '" + number + "' must not be prefixed with '0'");
      } else if (/^0\d+/.test(number)) {
        this.error("octal literal '" + number + "' must be prefixed with '0o'");
      }
      lexedLength = number.length;
      if (octalLiteral = /^0o([0-7]+)/.exec(number)) {
        number = '0x' + parseInt(octalLiteral[1], 8).toString(16);
      }
      if (binaryLiteral = /^0b([01]+)/.exec(number)) {
        number = '0x' + parseInt(binaryLiteral[1], 2).toString(16);
      }
      this.token('NUMBER', number, 0, lexedLength);
      return lexedLength;
    };

    Lexer.prototype.stringToken = function() {
      var inner, innerLen, numBreak, octalEsc, pos, quote, string, trimmed;
      switch (quote = this.chunk.charAt(0)) {
        case "'":
          string = (SIMPLESTR.exec(this.chunk) || [])[0];
          break;
        case '"':
          string = this.balancedString(this.chunk, '"');
      }
      if (!string) {
        return 0;
      }
      inner = string.slice(1, -1);
      trimmed = this.removeNewlines(inner);
      if (quote === '"' && 0 < string.indexOf('#{', 1)) {
        numBreak = pos = 0;
        innerLen = inner.length;
        while (inner.charAt(pos++) === '\n' && pos < innerLen) {
          numBreak++;
        }
        this.interpolateString(trimmed, {
          strOffset: 1 + numBreak,
          lexedLength: string.length
        });
      } else {
        this.token('STRING', quote + this.escapeLines(trimmed) + quote, 0, string.length);
      }
      if (octalEsc = /^(?:\\.|[^\\])*\\(?:0[0-7]|[1-7])/.test(string)) {
        this.error("octal escape sequences " + string + " are not allowed");
      }
      return string.length;
    };

    Lexer.prototype.heredocToken = function() {
      var doc, heredoc, match, quote, strOffset;
      if (!(match = HEREDOC.exec(this.chunk))) {
        return 0;
      }
      heredoc = match[0];
      quote = heredoc.charAt(0);
      doc = this.sanitizeHeredoc(match[2], {
        quote: quote,
        indent: null
      });
      if (quote === '"' && 0 <= doc.indexOf('#{')) {
        strOffset = match[2].charAt(0) === '\n' ? 4 : 3;
        this.interpolateString(doc, {
          heredoc: true,
          strOffset: strOffset,
          lexedLength: heredoc.length
        });
      } else {
        this.token('STRING', this.makeString(doc, quote, true), 0, heredoc.length);
      }
      return heredoc.length;
    };

    Lexer.prototype.commentToken = function() {
      var comment, here, match;
      if (!(match = this.chunk.match(COMMENT))) {
        return 0;
      }
      comment = match[0], here = match[1];
      if (here) {
        this.token('HERECOMMENT', this.sanitizeHeredoc(here, {
          herecomment: true,
          indent: repeat(' ', this.indent)
        }), 0, comment.length);
      }
      return comment.length;
    };

    Lexer.prototype.jsToken = function() {
      var match, script;
      if (!(this.chunk.charAt(0) === '`' && (match = JSTOKEN.exec(this.chunk)))) {
        return 0;
      }
      this.token('JS', (script = match[0]).slice(1, -1), 0, script.length);
      return script.length;
    };

    Lexer.prototype.regexToken = function() {
      var flags, length, match, prev, regex, _ref2, _ref3;
      if (this.chunk.charAt(0) !== '/') {
        return 0;
      }
      if (length = this.heregexToken()) {
        return length;
      }
      prev = last(this.tokens);
      if (prev && (_ref2 = prev[0], __indexOf.call((prev.spaced ? NOT_REGEX : NOT_SPACED_REGEX), _ref2) >= 0)) {
        return 0;
      }
      if (!(match = REGEX.exec(this.chunk))) {
        return 0;
      }
      _ref3 = match, match = _ref3[0], regex = _ref3[1], flags = _ref3[2];
      if (regex === '//') {
        return 0;
      }
      if (regex.slice(0, 2) === '/*') {
        this.error('regular expressions cannot begin with `*`');
      }
      this.token('REGEX', "" + regex + flags, 0, match.length);
      return match.length;
    };

    Lexer.prototype.heregexToken = function() {
      var body, flags, flagsOffset, heregex, match, plusToken, prev, re, tag, token, tokens, value, _i, _len, _ref2, _ref3, _ref4;
      if (!(match = HEREGEX.exec(this.chunk))) {
        return 0;
      }
      heregex = match[0], body = match[1], flags = match[2];
      if (0 > body.indexOf('#{')) {
        re = this.escapeLines(body.replace(HEREGEX_OMIT, '$1$2').replace(/\//g, '\\/'), true);
        if (re.match(/^\*/)) {
          this.error('regular expressions cannot begin with `*`');
        }
        this.token('REGEX', "/" + (re || '(?:)') + "/" + flags, 0, heregex.length);
        return heregex.length;
      }
      this.token('IDENTIFIER', 'RegExp', 0, 0);
      this.token('CALL_START', '(', 0, 0);
      tokens = [];
      _ref2 = this.interpolateString(body, {
        regex: true,
        strOffset: 3
      });
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        token = _ref2[_i];
        tag = token[0], value = token[1];
        if (tag === 'TOKENS') {
          tokens.push.apply(tokens, value);
        } else if (tag === 'NEOSTRING') {
          if (!(value = value.replace(HEREGEX_OMIT, '$1$2'))) {
            continue;
          }
          value = value.replace(/\\/g, '\\\\');
          token[0] = 'STRING';
          token[1] = this.makeString(value, '"', true);
          tokens.push(token);
        } else {
          this.error("Unexpected " + tag);
        }
        prev = last(this.tokens);
        plusToken = ['+', '+'];
        plusToken[2] = prev[2];
        tokens.push(plusToken);
      }
      tokens.pop();
      if (((_ref3 = tokens[0]) != null ? _ref3[0] : void 0) !== 'STRING') {
        this.token('STRING', '""', 0, 0);
        this.token('+', '+', 0, 0);
      }
      (_ref4 = this.tokens).push.apply(_ref4, tokens);
      if (flags) {
        flagsOffset = heregex.lastIndexOf(flags);
        this.token(',', ',', flagsOffset, 0);
        this.token('STRING', '"' + flags + '"', flagsOffset, flags.length);
      }
      this.token(')', ')', heregex.length - 1, 0);
      return heregex.length;
    };

    Lexer.prototype.lineToken = function() {
      var diff, indent, match, noNewlines, size;
      if (!(match = MULTI_DENT.exec(this.chunk))) {
        return 0;
      }
      indent = match[0];
      this.seenFor = false;
      size = indent.length - 1 - indent.lastIndexOf('\n');
      noNewlines = this.unfinished();
      if (size - this.indebt === this.indent) {
        if (noNewlines) {
          this.suppressNewlines();
        } else {
          this.newlineToken(0);
        }
        return indent.length;
      }
      if (size > this.indent) {
        if (noNewlines) {
          this.indebt = size - this.indent;
          this.suppressNewlines();
          return indent.length;
        }
        if (!this.tokens.length) {
          this.baseIndent = this.indent = size;
          return indent.length;
        }
        diff = size - this.indent + this.outdebt;
        this.token('INDENT', diff, indent.length - size, size);
        this.indents.push(diff);
        this.ends.push('OUTDENT');
        this.outdebt = this.indebt = 0;
        this.indent = size;
      } else if (size < this.baseIndent) {
        this.error('missing indentation', indent.length);
      } else {
        this.indebt = 0;
        this.outdentToken(this.indent - size, noNewlines, indent.length);
      }
      return indent.length;
    };

    Lexer.prototype.outdentToken = function(moveOut, noNewlines, outdentLength) {
      var decreasedIndent, dent, lastIndent, _ref2;
      decreasedIndent = this.indent - moveOut;
      while (moveOut > 0) {
        lastIndent = this.indents[this.indents.length - 1];
        if (!lastIndent) {
          moveOut = 0;
        } else if (lastIndent === this.outdebt) {
          moveOut -= this.outdebt;
          this.outdebt = 0;
        } else if (lastIndent < this.outdebt) {
          this.outdebt -= lastIndent;
          moveOut -= lastIndent;
        } else {
          dent = this.indents.pop() + this.outdebt;
          if (outdentLength && (_ref2 = this.chunk[outdentLength], __indexOf.call(INDENTABLE_CLOSERS, _ref2) >= 0)) {
            decreasedIndent -= dent - moveOut;
            moveOut = dent;
          }
          this.outdebt = 0;
          this.pair('OUTDENT');
          this.token('OUTDENT', moveOut, 0, outdentLength);
          moveOut -= dent;
        }
      }
      if (dent) {
        this.outdebt -= moveOut;
      }
      while (this.value() === ';') {
        this.tokens.pop();
      }
      if (!(this.tag() === 'TERMINATOR' || noNewlines)) {
        this.token('TERMINATOR', '\n', outdentLength, 0);
      }
      this.indent = decreasedIndent;
      return this;
    };

    Lexer.prototype.whitespaceToken = function() {
      var match, nline, prev;
      if (!((match = WHITESPACE.exec(this.chunk)) || (nline = this.chunk.charAt(0) === '\n'))) {
        return 0;
      }
      prev = last(this.tokens);
      if (prev) {
        prev[match ? 'spaced' : 'newLine'] = true;
      }
      if (match) {
        return match[0].length;
      } else {
        return 0;
      }
    };

    Lexer.prototype.newlineToken = function(offset) {
      while (this.value() === ';') {
        this.tokens.pop();
      }
      if (this.tag() !== 'TERMINATOR') {
        this.token('TERMINATOR', '\n', offset, 0);
      }
      return this;
    };

    Lexer.prototype.suppressNewlines = function() {
      if (this.value() === '\\') {
        this.tokens.pop();
      }
      return this;
    };

    Lexer.prototype.literalToken = function() {
      var match, prev, tag, value, _ref2, _ref3, _ref4, _ref5;
      if (match = OPERATOR.exec(this.chunk)) {
        value = match[0];
        if (CODE.test(value)) {
          this.tagParameters();
        }
      } else {
        value = this.chunk.charAt(0);
      }
      tag = value;
      prev = last(this.tokens);
      if (value === '=' && prev) {
        if (!prev[1].reserved && (_ref2 = prev[1], __indexOf.call(JS_FORBIDDEN, _ref2) >= 0)) {
          this.error("reserved word \"" + (this.value()) + "\" can't be assigned");
        }
        if ((_ref3 = prev[1]) === '||' || _ref3 === '&&') {
          prev[0] = 'COMPOUND_ASSIGN';
          prev[1] += '=';
          return value.length;
        }
      }
      if (value === ';') {
        this.seenFor = false;
        tag = 'TERMINATOR';
      } else if (__indexOf.call(MATH, value) >= 0) {
        tag = 'MATH';
      } else if (__indexOf.call(COMPARE, value) >= 0) {
        tag = 'COMPARE';
      } else if (__indexOf.call(COMPOUND_ASSIGN, value) >= 0) {
        tag = 'COMPOUND_ASSIGN';
      } else if (__indexOf.call(UNARY, value) >= 0) {
        tag = 'UNARY';
      } else if (__indexOf.call(UNARY_MATH, value) >= 0) {
        tag = 'UNARY_MATH';
      } else if (__indexOf.call(SHIFT, value) >= 0) {
        tag = 'SHIFT';
      } else if (__indexOf.call(LOGIC, value) >= 0 || value === '?' && (prev != null ? prev.spaced : void 0)) {
        tag = 'LOGIC';
      } else if (prev && !prev.spaced) {
        if (value === '(' && (_ref4 = prev[0], __indexOf.call(CALLABLE, _ref4) >= 0)) {
          if (prev[0] === '?') {
            prev[0] = 'FUNC_EXIST';
          }
          tag = 'CALL_START';
        } else if (value === '[' && (_ref5 = prev[0], __indexOf.call(INDEXABLE, _ref5) >= 0)) {
          tag = 'INDEX_START';
          switch (prev[0]) {
            case '?':
              prev[0] = 'INDEX_SOAK';
          }
        }
      }
      switch (value) {
        case '(':
        case '{':
        case '[':
          this.ends.push(INVERSES[value]);
          break;
        case ')':
        case '}':
        case ']':
          this.pair(value);
      }
      this.token(tag, value);
      return value.length;
    };

    Lexer.prototype.sanitizeHeredoc = function(doc, options) {
      var attempt, herecomment, indent, match, _ref2;
      indent = options.indent, herecomment = options.herecomment;
      if (herecomment) {
        if (HEREDOC_ILLEGAL.test(doc)) {
          this.error("block comment cannot contain \"*/\", starting");
        }
        if (doc.indexOf('\n') < 0) {
          return doc;
        }
      } else {
        while (match = HEREDOC_INDENT.exec(doc)) {
          attempt = match[1];
          if (indent === null || (0 < (_ref2 = attempt.length) && _ref2 < indent.length)) {
            indent = attempt;
          }
        }
      }
      if (indent) {
        doc = doc.replace(RegExp("\\n" + indent, "g"), '\n');
      }
      if (!herecomment) {
        doc = doc.replace(/^\n/, '');
      }
      return doc;
    };

    Lexer.prototype.tagParameters = function() {
      var i, stack, tok, tokens;
      if (this.tag() !== ')') {
        return this;
      }
      stack = [];
      tokens = this.tokens;
      i = tokens.length;
      tokens[--i][0] = 'PARAM_END';
      while (tok = tokens[--i]) {
        switch (tok[0]) {
          case ')':
            stack.push(tok);
            break;
          case '(':
          case 'CALL_START':
            if (stack.length) {
              stack.pop();
            } else if (tok[0] === '(') {
              tok[0] = 'PARAM_START';
              return this;
            } else {
              return this;
            }
        }
      }
      return this;
    };

    Lexer.prototype.closeIndentation = function() {
      return this.outdentToken(this.indent);
    };

    Lexer.prototype.balancedString = function(str, end) {
      var continueCount, i, letter, match, prev, stack, _i, _ref2;
      continueCount = 0;
      stack = [end];
      for (i = _i = 1, _ref2 = str.length; 1 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 1 <= _ref2 ? ++_i : --_i) {
        if (continueCount) {
          --continueCount;
          continue;
        }
        switch (letter = str.charAt(i)) {
          case '\\':
            ++continueCount;
            continue;
          case end:
            stack.pop();
            if (!stack.length) {
              return str.slice(0, +i + 1 || 9e9);
            }
            end = stack[stack.length - 1];
            continue;
        }
        if (end === '}' && (letter === '"' || letter === "'")) {
          stack.push(end = letter);
        } else if (end === '}' && letter === '/' && (match = HEREGEX.exec(str.slice(i)) || REGEX.exec(str.slice(i)))) {
          continueCount += match[0].length - 1;
        } else if (end === '}' && letter === '{') {
          stack.push(end = '}');
        } else if (end === '"' && prev === '#' && letter === '{') {
          stack.push(end = '}');
        }
        prev = letter;
      }
      return this.error("missing " + (stack.pop()) + ", starting");
    };

    Lexer.prototype.interpolateString = function(str, options) {
      var column, errorToken, expr, heredoc, i, inner, interpolated, len, letter, lexedLength, line, locationToken, nested, offsetInChunk, pi, plusToken, popped, regex, rparen, strOffset, tag, token, tokens, value, _i, _len, _ref2, _ref3, _ref4;
      if (options == null) {
        options = {};
      }
      heredoc = options.heredoc, regex = options.regex, offsetInChunk = options.offsetInChunk, strOffset = options.strOffset, lexedLength = options.lexedLength;
      offsetInChunk || (offsetInChunk = 0);
      strOffset || (strOffset = 0);
      lexedLength || (lexedLength = str.length);
      tokens = [];
      pi = 0;
      i = -1;
      while (letter = str.charAt(i += 1)) {
        if (letter === '\\') {
          i += 1;
          continue;
        }
        if (!(letter === '#' && str.charAt(i + 1) === '{' && (expr = this.balancedString(str.slice(i + 1), '}')))) {
          continue;
        }
        if (pi < i) {
          tokens.push(this.makeToken('NEOSTRING', str.slice(pi, i), strOffset + pi));
        }
        if (!errorToken) {
          errorToken = this.makeToken('', 'string interpolation', offsetInChunk + i + 1, 2);
        }
        inner = expr.slice(1, -1);
        if (inner.length) {
          _ref2 = this.getLineAndColumnFromChunk(strOffset + i + 2), line = _ref2[0], column = _ref2[1];
          nested = new Lexer().tokenize(inner, {
            line: line,
            column: column,
            rewrite: false
          });
          popped = nested.pop();
          if (((_ref3 = nested[0]) != null ? _ref3[0] : void 0) === 'TERMINATOR') {
            popped = nested.shift();
          }
          if (len = nested.length) {
            if (len > 1) {
              nested.unshift(this.makeToken('(', '(', strOffset + i + 1, 0));
              nested.push(this.makeToken(')', ')', strOffset + i + 1 + inner.length, 0));
            }
            tokens.push(['TOKENS', nested]);
          }
        }
        i += expr.length;
        pi = i + 1;
      }
      if ((i > pi && pi < str.length)) {
        tokens.push(this.makeToken('NEOSTRING', str.slice(pi), strOffset + pi));
      }
      if (regex) {
        return tokens;
      }
      if (!tokens.length) {
        return this.token('STRING', '""', offsetInChunk, lexedLength);
      }
      if (tokens[0][0] !== 'NEOSTRING') {
        tokens.unshift(this.makeToken('NEOSTRING', '', offsetInChunk));
      }
      if (interpolated = tokens.length > 1) {
        this.token('(', '(', offsetInChunk, 0, errorToken);
      }
      for (i = _i = 0, _len = tokens.length; _i < _len; i = ++_i) {
        token = tokens[i];
        tag = token[0], value = token[1];
        if (i) {
          if (i) {
            plusToken = this.token('+', '+');
          }
          locationToken = tag === 'TOKENS' ? value[0] : token;
          plusToken[2] = {
            first_line: locationToken[2].first_line,
            first_column: locationToken[2].first_column,
            last_line: locationToken[2].first_line,
            last_column: locationToken[2].first_column
          };
        }
        if (tag === 'TOKENS') {
          (_ref4 = this.tokens).push.apply(_ref4, value);
        } else if (tag === 'NEOSTRING') {
          token[0] = 'STRING';
          token[1] = this.makeString(value, '"', heredoc);
          this.tokens.push(token);
        } else {
          this.error("Unexpected " + tag);
        }
      }
      if (interpolated) {
        rparen = this.makeToken(')', ')', offsetInChunk + lexedLength, 0);
        rparen.stringEnd = true;
        this.tokens.push(rparen);
      }
      return tokens;
    };

    Lexer.prototype.pair = function(tag) {
      var wanted;
      if (tag !== (wanted = last(this.ends))) {
        if ('OUTDENT' !== wanted) {
          this.error("unmatched " + tag);
        }
        this.outdentToken(last(this.indents), true);
        return this.pair(tag);
      }
      return this.ends.pop();
    };

    Lexer.prototype.getLineAndColumnFromChunk = function(offset) {
      var column, lineCount, lines, string;
      if (offset === 0) {
        return [this.chunkLine, this.chunkColumn];
      }
      if (offset >= this.chunk.length) {
        string = this.chunk;
      } else {
        string = this.chunk.slice(0, +(offset - 1) + 1 || 9e9);
      }
      lineCount = count(string, '\n');
      column = this.chunkColumn;
      if (lineCount > 0) {
        lines = string.split('\n');
        column = last(lines).length;
      } else {
        column += string.length;
      }
      return [this.chunkLine + lineCount, column];
    };

    Lexer.prototype.makeToken = function(tag, value, offsetInChunk, length) {
      var lastCharacter, locationData, token, _ref2, _ref3;
      if (offsetInChunk == null) {
        offsetInChunk = 0;
      }
      if (length == null) {
        length = value.length;
      }
      locationData = {};
      _ref2 = this.getLineAndColumnFromChunk(offsetInChunk), locationData.first_line = _ref2[0], locationData.first_column = _ref2[1];
      lastCharacter = Math.max(0, length - 1);
      _ref3 = this.getLineAndColumnFromChunk(offsetInChunk + lastCharacter), locationData.last_line = _ref3[0], locationData.last_column = _ref3[1];
      token = [tag, value, locationData];
      return token;
    };

    Lexer.prototype.token = function(tag, value, offsetInChunk, length, origin) {
      var token;
      token = this.makeToken(tag, value, offsetInChunk, length);
      if (origin) {
        token.origin = origin;
      }
      this.tokens.push(token);
      return token;
    };

    Lexer.prototype.tag = function(index, tag) {
      var tok;
      return (tok = last(this.tokens, index)) && (tag ? tok[0] = tag : tok[0]);
    };

    Lexer.prototype.value = function(index, val) {
      var tok;
      return (tok = last(this.tokens, index)) && (val ? tok[1] = val : tok[1]);
    };

    Lexer.prototype.unfinished = function() {
      var _ref2;
      return LINE_CONTINUER.test(this.chunk) || ((_ref2 = this.tag()) === '\\' || _ref2 === '.' || _ref2 === '?.' || _ref2 === '?::' || _ref2 === 'UNARY' || _ref2 === 'MATH' || _ref2 === 'UNARY_MATH' || _ref2 === '+' || _ref2 === '-' || _ref2 === 'YIELD' || _ref2 === '**' || _ref2 === 'SHIFT' || _ref2 === 'RELATION' || _ref2 === 'COMPARE' || _ref2 === 'LOGIC' || _ref2 === 'THROW' || _ref2 === 'EXTENDS');
    };

    Lexer.prototype.removeNewlines = function(str) {
      return str.replace(/^\s*\n\s*/, '').replace(/([^\\]|\\\\)\s*\n\s*$/, '$1');
    };

    Lexer.prototype.escapeLines = function(str, heredoc) {
      str = str.replace(/\\[^\S\n]*(\n|\\)\s*/g, function(escaped, character) {
        if (character === '\n') {
          return '';
        } else {
          return escaped;
        }
      });
      if (heredoc) {
        return str.replace(MULTILINER, '\\n');
      } else {
        return str.replace(/\s*\n\s*/g, ' ');
      }
    };

    Lexer.prototype.makeString = function(body, quote, heredoc) {
      if (!body) {
        return quote + quote;
      }
      body = body.replace(RegExp("\\\\(" + quote + "|\\\\)", "g"), function(match, contents) {
        if (contents === quote) {
          return contents;
        } else {
          return match;
        }
      });
      body = body.replace(RegExp("" + quote, "g"), '\\$&');
      return quote + this.escapeLines(body, heredoc) + quote;
    };

    Lexer.prototype.error = function(message, offset) {
      var first_column, first_line, _ref2;
      if (offset == null) {
        offset = 0;
      }
      _ref2 = this.getLineAndColumnFromChunk(offset), first_line = _ref2[0], first_column = _ref2[1];
      return throwSyntaxError(message, {
        first_line: first_line,
        first_column: first_column
      });
    };

    return Lexer;

  })();

  JS_KEYWORDS = ['true', 'false', 'null', 'this', 'new', 'delete', 'typeof', 'in', 'instanceof', 'return', 'throw', 'break', 'continue', 'debugger', 'yield', 'if', 'else', 'switch', 'for', 'while', 'do', 'try', 'catch', 'finally', 'class', 'extends', 'super'];

  COFFEE_KEYWORDS = ['undefined', 'then', 'unless', 'until', 'loop', 'of', 'by', 'when'];

  COFFEE_KEYWORDS = COFFEE_KEYWORDS.concat(['await', 'defer']);

  COFFEE_ALIAS_MAP = {
    and: '&&',
    or: '||',
    is: '==',
    isnt: '!=',
    not: '!',
    yes: 'true',
    no: 'false',
    on: 'true',
    off: 'false'
  };

  COFFEE_ALIASES = (function() {
    var _results;
    _results = [];
    for (key in COFFEE_ALIAS_MAP) {
      _results.push(key);
    }
    return _results;
  })();

  COFFEE_KEYWORDS = COFFEE_KEYWORDS.concat(COFFEE_ALIASES);

  RESERVED = ['case', 'default', 'function', 'var', 'void', 'with', 'const', 'let', 'enum', 'export', 'import', 'native', '__hasProp', '__extends', '__slice', '__bind', '__indexOf', 'implements', 'interface', 'package', 'private', 'protected', 'public', 'static'];

  STRICT_PROSCRIBED = ['arguments', 'eval', 'yield*'];

  JS_FORBIDDEN = JS_KEYWORDS.concat(RESERVED).concat(STRICT_PROSCRIBED);

  exports.RESERVED = RESERVED.concat(JS_KEYWORDS).concat(COFFEE_KEYWORDS).concat(STRICT_PROSCRIBED);

  exports.STRICT_PROSCRIBED = STRICT_PROSCRIBED;

  BOM = 65279;

  IDENTIFIER = /^([$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)([^\n\S]*:(?!:))?/;

  NUMBER = /^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i;

  HEREDOC = /^("""|''')((?:\\[\s\S]|[^\\])*?)(?:\n[^\n\S]*)?\1/;

  OPERATOR = /^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/;

  WHITESPACE = /^[^\n\S]+/;

  COMMENT = /^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/;

  CODE = /^[-=]>/;

  MULTI_DENT = /^(?:\n[^\n\S]*)+/;

  SIMPLESTR = /^'[^\\']*(?:\\[\s\S][^\\']*)*'/;

  JSTOKEN = /^`[^\\`]*(?:\\.[^\\`]*)*`/;

  REGEX = /^(\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)([imgy]{0,4})(?!\w)/;

  HEREGEX = /^\/{3}((?:\\?[\s\S])+?)\/{3}([imgy]{0,4})(?!\w)/;

  HEREGEX_OMIT = /((?:\\\\)+)|\\(\s|\/)|\s+(?:#.*)?/g;

  MULTILINER = /\n/g;

  HEREDOC_INDENT = /\n+([^\n\S]*)/g;

  HEREDOC_ILLEGAL = /\*\//;

  LINE_CONTINUER = /^\s*(?:,|\??\.(?![.\d])|::)/;

  TRAILING_SPACES = /\s+$/;

  COMPOUND_ASSIGN = ['-=', '+=', '/=', '*=', '%=', '||=', '&&=', '?=', '<<=', '>>=', '>>>=', '&=', '^=', '|=', '**=', '//=', '%%='];

  UNARY = ['NEW', 'TYPEOF', 'DELETE', 'DO'];

  UNARY_MATH = ['!', '~'];

  LOGIC = ['&&', '||', '&', '|', '^'];

  SHIFT = ['<<', '>>', '>>>'];

  COMPARE = ['==', '!=', '<', '>', '<=', '>='];

  MATH = ['*', '/', '%', '//', '%%'];

  RELATION = ['IN', 'OF', 'INSTANCEOF'];

  BOOL = ['TRUE', 'FALSE'];

  NOT_REGEX = ['NUMBER', 'REGEX', 'BOOL', 'NULL', 'UNDEFINED', '++', '--'];

  NOT_SPACED_REGEX = NOT_REGEX.concat(')', '}', 'THIS', 'IDENTIFIER', 'STRING', ']');

  CALLABLE = ['IDENTIFIER', 'STRING', 'REGEX', ')', ']', '}', '?', '::', '@', 'THIS', 'SUPER'];

  INDEXABLE = CALLABLE.concat('NUMBER', 'BOOL', 'NULL', 'UNDEFINED');

  LINE_BREAK = ['INDENT', 'OUTDENT', 'TERMINATOR'];

  INDENTABLE_CLOSERS = [')', '}', ']'];

  CALLABLE.push('DEFER');

}).call(this);

},{"./helpers":21,"./rewriter":27}],24:[function(require,module,exports){
(function (__dirname){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Access, Arr, Assign, Await, Base, Block, Call, Class, Closure, Code, CodeFragment, Comment, CpsCascade, Defer, Existence, Expansion, Extends, For, HEXNUM, IDENTIFIER, IDENTIFIER_STR, IS_REGEX, IS_STRING, IcedReturnValue, IcedRuntime, IcedTailCall, If, In, Index, InlineRuntime, LEVEL_ACCESS, LEVEL_COND, LEVEL_LIST, LEVEL_OP, LEVEL_PAREN, LEVEL_TOP, Literal, METHOD_DEF, NEGATE, NO, NULL, NUMBER, Obj, Op, Param, Parens, RESERVED, Range, Return, SIMPLENUM, STRICT_PROSCRIBED, Scope, Slice, Slot, Splat, Switch, TAB, THIS, Throw, Try, UTILITIES, Value, While, YES, addLocationDataFn, compact, del, ends, extend, flatten, fragmentsToText, iced, isLiteralArguments, isLiteralThis, last, locationDataToString, merge, multident, parseNum, pathmod, quote_funcname_for_debug, quote_path_for_emission, require_top_dir, some, starts, throwSyntaxError, unfoldSoak, utility, _ref, _ref1,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice;

  Error.stackTraceLimit = Infinity;

  Scope = require('./scope').Scope;

  _ref = require('./lexer'), RESERVED = _ref.RESERVED, STRICT_PROSCRIBED = _ref.STRICT_PROSCRIBED;

  iced = require('iced-runtime');

  pathmod = require('path');

  _ref1 = require('./helpers'), compact = _ref1.compact, flatten = _ref1.flatten, extend = _ref1.extend, merge = _ref1.merge, del = _ref1.del, starts = _ref1.starts, ends = _ref1.ends, last = _ref1.last, some = _ref1.some, addLocationDataFn = _ref1.addLocationDataFn, locationDataToString = _ref1.locationDataToString, throwSyntaxError = _ref1.throwSyntaxError;

  exports.extend = extend;

  exports.addLocationDataFn = addLocationDataFn;

  YES = function() {
    return true;
  };

  NO = function() {
    return false;
  };

  THIS = function() {
    return this;
  };

  NEGATE = function() {
    this.negated = !this.negated;
    return this;
  };

  NULL = function() {
    return new Value(new Literal('null'));
  };

  exports.CodeFragment = CodeFragment = (function() {
    function CodeFragment(parent, code) {
      var _ref2;
      this.code = "" + code;
      this.locationData = parent != null ? parent.locationData : void 0;
      this.type = (parent != null ? (_ref2 = parent.constructor) != null ? _ref2.name : void 0 : void 0) || 'unknown';
    }

    CodeFragment.prototype.toString = function() {
      return "" + this.code + (this.locationData ? ": " + locationDataToString(this.locationData) : '');
    };

    return CodeFragment;

  })();

  fragmentsToText = function(fragments) {
    var fragment;
    return ((function() {
      var _i, _len, _results;
      _results = [];
      for (_i = 0, _len = fragments.length; _i < _len; _i++) {
        fragment = fragments[_i];
        _results.push(fragment.code);
      }
      return _results;
    })()).join('');
  };

  exports.Base = Base = (function() {
    function Base() {
      this.icedContinuationBlock = null;
      this.icedLoopFlag = false;
      this.icedNodeFlag = false;
      this.icedGotCpsSplitFlag = false;
      this.icedCpsPivotFlag = false;
      this.icedHasAutocbFlag = false;
      this.icedFoundArguments = false;
      this.icedParentAwait = null;
      this.icedCallContinuationFlag = false;
    }

    Base.prototype.compile = function(o, lvl) {
      return fragmentsToText(this.compileToFragments(o, lvl));
    };

    Base.prototype.compileToFragments = function(o, lvl) {
      var node;
      o = extend({}, o);
      if (lvl) {
        o.level = lvl;
      }
      node = this.unfoldSoak(o) || this;
      node.tab = o.indent;
      if (node.icedHasContinuation() && !node.icedGotCpsSplitFlag) {
        return node.icedCompileCps(o);
      } else if (o.level === LEVEL_TOP || !node.isStatement(o)) {
        return node.compileNode(o);
      } else {
        return node.compileClosure(o);
      }
    };

    Base.prototype.compileClosure = function(o) {
      var args, argumentsNode, func, jumpNode, meth;
      if (jumpNode = this.jumps()) {
        jumpNode.error('cannot use a pure statement in an expression');
      }
      o.sharedScope = true;
      this.icedClearAutocbFlags();
      func = new Code([], Block.wrap([this]));
      args = [];
      if ((argumentsNode = this.contains(isLiteralArguments)) || this.contains(isLiteralThis)) {
        args = [new Literal('this')];
        if (argumentsNode) {
          meth = 'apply';
          args.push(new Literal('arguments'));
        } else {
          meth = 'call';
        }
        func = new Value(func, [new Access(new Literal(meth))]);
      }
      return (new Call(func, args)).compileNode(o);
    };

    Base.prototype.cache = function(o, level, reused) {
      var ref, sub;
      if (!this.isComplex()) {
        ref = level ? this.compileToFragments(o, level) : this;
        return [ref, ref];
      } else {
        ref = new Literal(reused || o.scope.freeVariable('ref'));
        sub = new Assign(ref, this);
        if (level) {
          return [sub.compileToFragments(o, level), [this.makeCode(ref.value)]];
        } else {
          return [sub, ref];
        }
      }
    };

    Base.prototype.cacheToCodeFragments = function(cacheValues) {
      return [fragmentsToText(cacheValues[0]), fragmentsToText(cacheValues[1])];
    };

    Base.prototype.makeReturn = function(res) {
      var me;
      me = this.unwrapAll();
      if (res) {
        return new Call(new Literal("" + res + ".push"), [me]);
      } else {
        return new Return(me, this.icedHasAutocbFlag);
      }
    };

    Base.prototype.contains = function(pred) {
      var node;
      node = void 0;
      this.traverseChildren(false, function(n) {
        if (pred(n)) {
          node = n;
          return false;
        }
      });
      return node;
    };

    Base.prototype.lastNonComment = function(list) {
      var i;
      i = list.length;
      while (i--) {
        if (!(list[i] instanceof Comment)) {
          return list[i];
        }
      }
      return null;
    };

    Base.prototype.toString = function(idt, name) {
      var extras, tree;
      if (idt == null) {
        idt = '';
      }
      if (name == null) {
        name = this.constructor.name;
      }
      extras = [];
      if (this.icedNodeFlag) {
        extras.push("A");
      }
      if (this.icedLoopFlag) {
        extras.push("L");
      }
      if (this.icedCpsPivotFlag) {
        extras.push("P");
      }
      if (this.icedIsAutocbCode) {
        extras.push("B");
      }
      if (this.icedHasAutocbFlag) {
        extras.push("C");
      }
      if (this.icedParentAwait) {
        extras.push("D");
      }
      if (this.icedFoundArguments) {
        extras.push("G");
      }
      if (extras.length) {
        extras = " (" + extras.join('') + ")";
      }
      tree = '\n' + idt + name;
      tree = '\n' + idt + name;
      if (this.soak) {
        tree += '?';
      }
      tree += extras;
      this.eachChild(function(node) {
        return tree += node.toString(idt + TAB);
      });
      if (this.icedContinuationBlock) {
        idt += TAB;
        tree += '\n' + idt + "Continuation";
        tree += this.icedContinuationBlock.toString(idt + TAB);
      }
      return tree;
    };

    Base.prototype.eachChild = function(func) {
      var attr, child, _i, _j, _len, _len1, _ref2, _ref3;
      if (!this.children) {
        return this;
      }
      _ref2 = this.children;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        attr = _ref2[_i];
        if (this[attr]) {
          _ref3 = flatten([this[attr]]);
          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
            child = _ref3[_j];
            if (func(child) === false) {
              return this;
            }
          }
        }
      }
      return this;
    };

    Base.prototype.traverseChildren = function(crossScope, func) {
      return this.eachChild(function(child) {
        var recur;
        recur = func(child);
        if (recur !== false) {
          return child.traverseChildren(crossScope, func);
        }
      });
    };

    Base.prototype.invert = function() {
      return new Op('!', this);
    };

    Base.prototype.unwrapAll = function() {
      var node;
      node = this;
      while (node !== (node = node.unwrap())) {
        continue;
      }
      return node;
    };

    Base.prototype.flattenChildren = function() {
      var attr, child, out, _i, _j, _len, _len1, _ref2, _ref3;
      out = [];
      _ref2 = this.children;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        attr = _ref2[_i];
        if (this[attr]) {
          _ref3 = flatten([this[attr]]);
          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
            child = _ref3[_j];
            out.push(child);
          }
        }
      }
      return out;
    };

    Base.prototype.icedCompileCps = function(o) {
      var code;
      this.icedGotCpsSplitFlag = true;
      code = CpsCascade.wrap(this, this.icedContinuationBlock, null, o);
      o.sharedScope = true;
      return code.compileNode(o);
    };

    Base.prototype.icedWalkAst = function(p, o) {
      var child, _i, _len, _ref2;
      this.icedParentAwait = p;
      this.icedHasAutocbFlag = o.foundAutocb;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkAst(p, o)) {
          this.icedNodeFlag = true;
        }
      }
      return this.icedNodeFlag;
    };

    Base.prototype.icedWalkAstLoops = function(flood) {
      var child, _i, _len, _ref2;
      if (this.isLoop() && this.icedNodeFlag) {
        flood = true;
      }
      if (this.isLoop() && !this.icedNodeFlag) {
        flood = false;
      }
      this.icedLoopFlag = flood;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkAstLoops(flood)) {
          this.icedLoopFlag = true;
        }
      }
      return this.icedLoopFlag;
    };

    Base.prototype.icedWalkCpsPivots = function() {
      var child, _i, _len, _ref2;
      if (this.icedNodeFlag || (this.icedLoopFlag && this.icedIsJump())) {
        this.icedCpsPivotFlag = true;
      }
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkCpsPivots()) {
          this.icedCpsPivotFlag = true;
        }
      }
      return this.icedCpsPivotFlag;
    };

    Base.prototype.icedClearAutocbFlags = function() {
      this.icedHasAutocbFlag = false;
      return this.traverseChildren(false, function(node) {
        node.icedHasAutocbFlag = false;
        return true;
      });
    };

    Base.prototype.icedCpsRotate = function() {
      var child, _i, _len, _ref2;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        child.icedCpsRotate();
      }
      return this;
    };

    Base.prototype.icedIsCpsPivot = function() {
      return this.icedCpsPivotFlag;
    };

    Base.prototype.icedNestContinuationBlock = function(b) {
      return this.icedContinuationBlock = b;
    };

    Base.prototype.icedHasContinuation = function() {
      return !!this.icedContinuationBlock;
    };

    Base.prototype.icedCallContinuation = function() {
      return this.icedCallContinuationFlag = true;
    };

    Base.prototype.icedWrapContinuation = NO;

    Base.prototype.icedIsJump = NO;

    Base.prototype.icedUnwrap = function(e) {
      if (e.icedHasContinuation() && this.icedHasContinuation()) {
        return this;
      } else {
        if (this.icedHasContinuation()) {
          e.icedContinuationBlock = this.icedContinuationBlock;
        }
        return e;
      }
    };

    Base.prototype.icedStatementAssertion = function() {
      if (this.icedIsCpsPivot()) {
        return this.error("await'ed statements can't act as expressions");
      }
    };

    Base.prototype.children = [];

    Base.prototype.isStatement = NO;

    Base.prototype.jumps = NO;

    Base.prototype.isComplex = YES;

    Base.prototype.isChainable = NO;

    Base.prototype.isAssignable = NO;

    Base.prototype.isLoop = NO;

    Base.prototype.unwrap = THIS;

    Base.prototype.unfoldSoak = NO;

    Base.prototype.assigns = NO;

    Base.prototype.updateLocationDataIfMissing = function(locationData) {
      if (this.locationData) {
        return this;
      }
      this.locationData = locationData;
      return this.eachChild(function(child) {
        return child.updateLocationDataIfMissing(locationData);
      });
    };

    Base.prototype.error = function(message) {
      return throwSyntaxError(message, this.locationData);
    };

    Base.prototype.makeCode = function(code) {
      return new CodeFragment(this, code);
    };

    Base.prototype.wrapInBraces = function(fragments) {
      return [].concat(this.makeCode('('), fragments, this.makeCode(')'));
    };

    Base.prototype.joinFragmentArrays = function(fragmentsList, joinStr) {
      var answer, fragments, i, _i, _len;
      answer = [];
      for (i = _i = 0, _len = fragmentsList.length; _i < _len; i = ++_i) {
        fragments = fragmentsList[i];
        if (i) {
          answer.push(this.makeCode(joinStr));
        }
        answer = answer.concat(fragments);
      }
      return answer;
    };

    return Base;

  })();

  exports.Block = Block = (function(_super) {
    __extends(Block, _super);

    function Block(nodes) {
      Block.__super__.constructor.call(this);
      this.expressions = compact(flatten(nodes || []));
    }

    Block.prototype.children = ['expressions'];

    Block.prototype.push = function(node) {
      this.expressions.push(node);
      return this;
    };

    Block.prototype.pop = function() {
      return this.expressions.pop();
    };

    Block.prototype.unshift = function(node) {
      this.expressions.unshift(node);
      return this;
    };

    Block.prototype.unwrap = function() {
      if (this.expressions.length === 1) {
        return this.icedUnwrap(this.expressions[0]);
      } else {
        return this;
      }
    };

    Block.prototype.isEmpty = function() {
      return !this.expressions.length;
    };

    Block.prototype.isStatement = function(o) {
      var exp, _i, _len, _ref2;
      _ref2 = this.expressions;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        exp = _ref2[_i];
        if (exp.isStatement(o)) {
          return true;
        }
      }
      return false;
    };

    Block.prototype.jumps = function(o) {
      var exp, jumpNode, _i, _len, _ref2;
      _ref2 = this.expressions;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        exp = _ref2[_i];
        if (jumpNode = exp.jumps(o)) {
          return jumpNode;
        }
      }
    };

    Block.prototype.makeReturn = function(res) {
      var expr, foundReturn, len;
      len = this.expressions.length;
      foundReturn = false;
      while (len--) {
        expr = this.expressions[len];
        if (!(expr instanceof Comment)) {
          this.expressions[len] = expr.makeReturn(res);
          if (expr instanceof Return && !expr.expression && !expr.icedHasAutocbFlag) {
            this.expressions.splice(len, 1);
            foundReturn = true;
          } else if (!(expr instanceof If) || expr.elseBody) {
            foundReturn = true;
          }
          break;
        }
      }
      if (this.icedHasAutocbFlag && !this.icedNodeFlag && !foundReturn) {
        this.expressions.push(new Return(null, true));
      }
      return this;
    };

    Block.prototype.compileToFragments = function(o, level) {
      if (o == null) {
        o = {};
      }
      if (o.scope) {
        return Block.__super__.compileToFragments.call(this, o, level);
      } else {
        return this.compileRoot(o);
      }
    };

    Block.prototype.compileNode = function(o) {
      var answer, compiledNodes, fragments, index, node, top, _i, _len, _ref2;
      this.tab = o.indent;
      top = o.level === LEVEL_TOP;
      compiledNodes = [];
      _ref2 = this.expressions;
      for (index = _i = 0, _len = _ref2.length; _i < _len; index = ++_i) {
        node = _ref2[index];
        node = node.unwrapAll();
        node = node.unfoldSoak(o) || node;
        if (node instanceof Block) {
          compiledNodes.push(node.compileNode(o));
        } else if (top) {
          node.front = true;
          fragments = node.compileToFragments(o);
          if (!node.isStatement(o)) {
            fragments.unshift(this.makeCode("" + this.tab));
            fragments.push(this.makeCode(";"));
          }
          compiledNodes.push(fragments);
        } else {
          compiledNodes.push(node.compileToFragments(o, LEVEL_LIST));
        }
      }
      if (top) {
        if (this.spaced) {
          return [].concat(this.joinFragmentArrays(compiledNodes, '\n\n'), this.makeCode("\n"));
        } else {
          return this.joinFragmentArrays(compiledNodes, '\n');
        }
      }
      if (compiledNodes.length) {
        answer = this.joinFragmentArrays(compiledNodes, ', ');
      } else {
        answer = [this.makeCode("void 0")];
      }
      if (compiledNodes.length > 1 && o.level >= LEVEL_LIST) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Block.prototype.compileRoot = function(o) {
      var exp, fragments, i, name, prelude, preludeExps, rest, _i, _len, _ref2;
      o.indent = o.bare ? '' : TAB;
      o.level = LEVEL_TOP;
      this.spaced = true;
      o.scope = new Scope(null, this, null);
      _ref2 = o.locals || [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        name = _ref2[_i];
        o.scope.parameter(name);
      }
      prelude = [];
      if (!o.bare) {
        preludeExps = (function() {
          var _j, _len1, _ref3, _results;
          _ref3 = this.expressions;
          _results = [];
          for (i = _j = 0, _len1 = _ref3.length; _j < _len1; i = ++_j) {
            exp = _ref3[i];
            if (!(exp.unwrap() instanceof Comment)) {
              break;
            }
            _results.push(exp);
          }
          return _results;
        }).call(this);
        rest = this.expressions.slice(preludeExps.length);
        this.expressions = preludeExps;
        if (preludeExps.length) {
          prelude = this.compileNode(merge(o, {
            indent: ''
          }));
          prelude.push(this.makeCode("\n"));
        }
        this.expressions = rest;
      }
      fragments = this.compileWithDeclarations(o);
      if (o.bare) {
        return fragments;
      }
      return [].concat(prelude, this.makeCode("(function() {\n"), fragments, this.makeCode("\n}).call(this);\n"));
    };

    Block.prototype.compileWithDeclarations = function(o) {
      var assigns, declars, exp, fragments, i, post, rest, scope, spaced, _i, _len, _ref2, _ref3, _ref4;
      fragments = [];
      post = [];
      _ref2 = this.expressions;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        exp = _ref2[i];
        exp = exp.unwrap();
        if (!(exp instanceof Comment || exp instanceof Literal)) {
          break;
        }
      }
      o = merge(o, {
        level: LEVEL_TOP
      });
      if (i) {
        rest = this.expressions.splice(i, 9e9);
        _ref3 = [this.spaced, false], spaced = _ref3[0], this.spaced = _ref3[1];
        _ref4 = [this.compileNode(o), spaced], fragments = _ref4[0], this.spaced = _ref4[1];
        this.expressions = rest;
      }
      post = this.compileNode(o);
      scope = o.scope;
      if (scope.expressions === this) {
        declars = o.scope.hasDeclarations();
        assigns = scope.hasAssignments;
        if (declars || assigns) {
          if (i) {
            fragments.push(this.makeCode('\n'));
          }
          fragments.push(this.makeCode("" + this.tab + "var "));
          if (declars) {
            fragments.push(this.makeCode(scope.declaredVariables().join(', ')));
          }
          if (assigns) {
            if (declars) {
              fragments.push(this.makeCode(",\n" + (this.tab + TAB)));
            }
            fragments.push(this.makeCode(scope.assignedVariables().join(",\n" + (this.tab + TAB))));
          }
          fragments.push(this.makeCode(";\n" + (this.spaced ? '\n' : '')));
        } else if (fragments.length && post.length) {
          fragments.push(this.makeCode("\n"));
        }
      }
      return fragments.concat(post);
    };

    Block.wrap = function(nodes) {
      if (nodes.length === 1 && nodes[0] instanceof Block) {
        return nodes[0];
      }
      return new Block(nodes);
    };

    Block.prototype.icedThreadReturn = function(call) {
      var expr, len;
      call = call || new IcedTailCall;
      len = this.expressions.length;
      while (len--) {
        expr = this.expressions[len];
        if (expr.isStatement()) {
          break;
        }
        if (!(expr instanceof Comment) && !(expr instanceof Return)) {
          call.assignValue(expr);
          this.expressions[len] = call;
          return;
        }
      }
      return this.expressions.push(call);
    };

    Block.prototype.icedCompileCps = function(o) {
      this.icedGotCpsSplitFlag = true;
      if (this.expressions.length > 1) {
        return Block.__super__.icedCompileCps.call(this, o);
      } else {
        return this.compileNode(o);
      }
    };

    Block.prototype.icedCpsRotate = function() {
      var child, e, i, pivot, rest, _i, _j, _len, _len1, _ref2;
      pivot = null;
      _ref2 = this.expressions;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        e = _ref2[i];
        if (e.icedIsCpsPivot()) {
          pivot = e;
          pivot.icedCallContinuation();
        }
        e.icedCpsRotate();
        if (pivot) {
          break;
        }
      }
      if (!pivot) {
        return this;
      }
      if (pivot.icedContinuationBlock) {
        throw SyntaxError("unexpected continuation block in node");
      }
      rest = this.expressions.slice(i + 1);
      this.expressions = this.expressions.slice(0, i + 1);
      if (rest.length) {
        child = new Block(rest);
        pivot.icedNestContinuationBlock(child);
        for (_j = 0, _len1 = rest.length; _j < _len1; _j++) {
          e = rest[_j];
          if (e.icedNodeFlag) {
            child.icedNodeFlag = true;
          }
          if (e.icedLoopFlag) {
            child.icedLoopFlag = true;
          }
          if (e.icedCpsPivotFlag) {
            child.icedCpsPivotFlag = true;
          }
          if (e.icedHasAutocbFlag) {
            child.icedHasAutocbFlag = true;
          }
        }
        child.icedCpsRotate();
      }
      return this;
    };

    Block.prototype.icedAddRuntime = function(foundDefer, foundAwait) {
      var index, node;
      index = 0;
      while ((node = this.expressions[index]) && node instanceof Comment || node instanceof Value && node.isString()) {
        index++;
      }
      return this.expressions.splice(index, 0, new IcedRuntime(foundDefer, foundAwait));
    };

    Block.prototype.icedTransform = function(opts) {
      var obj;
      obj = {};
      this.icedWalkAst(null, obj);
      if (!(opts != null ? opts.repl : void 0) && (obj.foundDefer || obj.foundAwait || opts.runforce)) {
        this.icedAddRuntime(obj.foundDefer, obj.foundAwait);
      }
      if (obj.foundAwait) {
        this.icedWalkAstLoops(false);
        this.icedWalkCpsPivots();
        this.icedCpsRotate();
      }
      return this;
    };

    Block.prototype.icedGetSingle = function() {
      if (this.expressions.length === 1) {
        return this.expressions[0];
      } else {
        return null;
      }
    };

    return Block;

  })(Base);

  exports.Literal = Literal = (function(_super) {
    __extends(Literal, _super);

    function Literal(value) {
      this.value = value;
      if (this.value == null) {
        throw new Error("whoops!");
      }
      Literal.__super__.constructor.call(this);
    }

    Literal.prototype.makeReturn = function() {
      if (this.isStatement()) {
        return this;
      } else {
        return Literal.__super__.makeReturn.apply(this, arguments);
      }
    };

    Literal.prototype.isAssignable = function() {
      return IDENTIFIER.test(this.value);
    };

    Literal.prototype.isStatement = function() {
      var _ref2;
      return (_ref2 = this.value) === 'break' || _ref2 === 'continue' || _ref2 === 'debugger';
    };

    Literal.prototype.isComplex = NO;

    Literal.prototype.assigns = function(name) {
      return name === this.value;
    };

    Literal.prototype.jumps = function(o) {
      if (this.value === 'break' && !((o != null ? o.loop : void 0) || (o != null ? o.block : void 0))) {
        return this;
      }
      if (this.value === 'continue' && !(o != null ? o.loop : void 0)) {
        return this;
      }
    };

    Literal.prototype.compileNode = function(o) {
      var answer, code, _ref2;
      if (this.icedLoopFlag && this.icedIsJump()) {
        return this.icedCompileIced(o);
      }
      code = this.value === 'this' ? ((_ref2 = o.scope.method) != null ? _ref2.bound : void 0) ? o.scope.method.context : this.value : this.value.reserved ? "\"" + this.value + "\"" : this.value;
      answer = this.isStatement() ? "" + this.tab + code + ";" : code;
      return [this.makeCode(answer)];
    };

    Literal.prototype.toString = function() {
      return ' "' + this.value + '"';
    };

    Literal.prototype.icedWalkAst = function(parent, o) {
      if (this.value === 'arguments' && o.foundAwaitFunc) {
        o.foundArguments = true;
        this.value = "_arguments";
      }
      return false;
    };

    Literal.prototype.icedIsJump = function() {
      var _ref2;
      return (_ref2 = this.value) === 'break' || _ref2 === 'continue';
    };

    Literal.prototype.icedCompileIced = function(o) {
      var call, d, func, l;
      d = {
        'continue': iced["const"].c_while,
        'break': iced["const"].b_while
      };
      l = d[this.value];
      func = new Value(new Literal(l));
      call = new Call(func, []);
      return call.compileNode(o);
    };

    return Literal;

  })(Base);

  exports.Undefined = (function(_super) {
    __extends(Undefined, _super);

    function Undefined() {
      return Undefined.__super__.constructor.apply(this, arguments);
    }

    Undefined.prototype.isAssignable = NO;

    Undefined.prototype.isComplex = NO;

    Undefined.prototype.compileNode = function(o) {
      return [this.makeCode(o.level >= LEVEL_ACCESS ? '(void 0)' : 'void 0')];
    };

    return Undefined;

  })(Base);

  exports.Null = (function(_super) {
    __extends(Null, _super);

    function Null() {
      return Null.__super__.constructor.apply(this, arguments);
    }

    Null.prototype.isAssignable = NO;

    Null.prototype.isComplex = NO;

    Null.prototype.compileNode = function() {
      return [this.makeCode("null")];
    };

    return Null;

  })(Base);

  exports.Bool = (function(_super) {
    __extends(Bool, _super);

    Bool.prototype.isAssignable = NO;

    Bool.prototype.isComplex = NO;

    Bool.prototype.compileNode = function() {
      return [this.makeCode(this.val)];
    };

    function Bool(val) {
      this.val = val;
    }

    return Bool;

  })(Base);

  exports.Return = Return = (function(_super) {
    __extends(Return, _super);

    function Return(expression, auto) {
      this.expression = expression;
      Return.__super__.constructor.call(this);
      this.icedHasAutocbFlag = auto;
    }

    Return.prototype.children = ['expression'];

    Return.prototype.isStatement = YES;

    Return.prototype.makeReturn = THIS;

    Return.prototype.jumps = THIS;

    Return.prototype.compileToFragments = function(o, level) {
      var expr, _ref2;
      expr = (_ref2 = this.expression) != null ? _ref2.makeReturn() : void 0;
      if (expr && !(expr instanceof Return)) {
        return expr.compileToFragments(o, level);
      } else {
        return Return.__super__.compileToFragments.call(this, o, level);
      }
    };

    Return.prototype.compileNode = function(o) {
      var answer;
      if (this.icedHasAutocbFlag) {
        return this.icedCompileIced(o);
      }
      answer = [];
      answer.push(this.makeCode(this.tab + ("return" + (this.expression ? " " : ""))));
      if (this.expression) {
        answer = answer.concat(this.expression.compileToFragments(o, LEVEL_PAREN));
      }
      answer.push(this.makeCode(";"));
      return answer;
    };

    Return.prototype.icedCompileIced = function(o) {
      var args, block, call, cb, ret;
      cb = new Value(new Literal(iced["const"].autocb));
      args = this.expression ? [this.expression] : [];
      call = new Call(cb, args);
      ret = new Literal("return");
      block = new Block([call, ret]);
      return block.compileNode(o);
    };

    return Return;

  })(Base);

  exports.Value = Value = (function(_super) {
    __extends(Value, _super);

    function Value(base, props, tag) {
      Value.__super__.constructor.call(this);
      if (!props && base instanceof Value) {
        return base;
      }
      this.base = base;
      this.properties = props || [];
      if (tag) {
        this[tag] = true;
      }
      return this;
    }

    Value.prototype.children = ['base', 'properties'];

    Value.prototype.copy = function() {
      return new Value(this.base, this.properties);
    };

    Value.prototype.add = function(props) {
      this.properties = this.properties.concat(props);
      return this;
    };

    Value.prototype.hasProperties = function() {
      return !!this.properties.length;
    };

    Value.prototype.bareLiteral = function(type) {
      return !this.properties.length && this.base instanceof type;
    };

    Value.prototype.isArray = function() {
      return this.bareLiteral(Arr);
    };

    Value.prototype.isRange = function() {
      return this.bareLiteral(Range);
    };

    Value.prototype.isComplex = function() {
      return this.hasProperties() || this.base.isComplex();
    };

    Value.prototype.isAssignable = function() {
      return this.hasProperties() || this.base.isAssignable();
    };

    Value.prototype.isSimpleNumber = function() {
      return this.bareLiteral(Literal) && SIMPLENUM.test(this.base.value);
    };

    Value.prototype.isString = function() {
      return this.bareLiteral(Literal) && IS_STRING.test(this.base.value);
    };

    Value.prototype.isRegex = function() {
      return this.bareLiteral(Literal) && IS_REGEX.test(this.base.value);
    };

    Value.prototype.isAtomic = function() {
      var node, _i, _len, _ref2;
      _ref2 = this.properties.concat(this.base);
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        node = _ref2[_i];
        if (node.soak || node instanceof Call) {
          return false;
        }
      }
      return true;
    };

    Value.prototype.isNotCallable = function() {
      return this.isSimpleNumber() || this.isString() || this.isRegex() || this.isArray() || this.isRange() || this.isSplice() || this.isObject();
    };

    Value.prototype.isStatement = function(o) {
      return !this.properties.length && this.base.isStatement(o);
    };

    Value.prototype.assigns = function(name) {
      return !this.properties.length && this.base.assigns(name);
    };

    Value.prototype.jumps = function(o) {
      return !this.properties.length && this.base.jumps(o);
    };

    Value.prototype.isObject = function(onlyGenerated) {
      if (this.properties.length) {
        return false;
      }
      return (this.base instanceof Obj) && (!onlyGenerated || this.base.generated);
    };

    Value.prototype.isSplice = function() {
      return last(this.properties) instanceof Slice;
    };

    Value.prototype.looksStatic = function(className) {
      var _ref2;
      return this.base.value === className && this.properties.length && ((_ref2 = this.properties[0].name) != null ? _ref2.value : void 0) !== 'prototype';
    };

    Value.prototype.unwrap = function() {
      if (this.properties.length) {
        return this;
      } else {
        return this.base;
      }
    };

    Value.prototype.cacheReference = function(o) {
      var base, bref, name, nref;
      name = last(this.properties);
      if (this.properties.length < 2 && !this.base.isComplex() && !(name != null ? name.isComplex() : void 0)) {
        return [this, this];
      }
      base = new Value(this.base, this.properties.slice(0, -1));
      if (base.isComplex()) {
        bref = new Literal(o.scope.freeVariable('base'));
        base = new Value(new Parens(new Assign(bref, base)));
      }
      if (!name) {
        return [base, bref];
      }
      if (name.isComplex()) {
        nref = new Literal(o.scope.freeVariable('name'));
        name = new Index(new Assign(nref, name.index));
        nref = new Index(nref);
      }
      return [base.add(name), new Value(bref || base.base, [nref || name])];
    };

    Value.prototype.compileNode = function(o) {
      var fragments, prop, props, _i, _len;
      this.base.front = this.front;
      props = this.properties;
      fragments = this.base.compileToFragments(o, (props.length ? LEVEL_ACCESS : null));
      if ((this.base instanceof Parens || props.length) && SIMPLENUM.test(fragmentsToText(fragments))) {
        fragments.push(this.makeCode('.'));
      }
      for (_i = 0, _len = props.length; _i < _len; _i++) {
        prop = props[_i];
        fragments.push.apply(fragments, prop.compileToFragments(o));
      }
      return fragments;
    };

    Value.prototype.unfoldSoak = function(o) {
      return this.unfoldedSoak != null ? this.unfoldedSoak : this.unfoldedSoak = (function(_this) {
        return function() {
          var fst, i, ifn, prop, ref, snd, _i, _len, _ref2, _ref3;
          if (ifn = _this.base.unfoldSoak(o)) {
            (_ref2 = ifn.body.properties).push.apply(_ref2, _this.properties);
            return ifn;
          }
          _ref3 = _this.properties;
          for (i = _i = 0, _len = _ref3.length; _i < _len; i = ++_i) {
            prop = _ref3[i];
            if (!prop.soak) {
              continue;
            }
            prop.soak = false;
            fst = new Value(_this.base, _this.properties.slice(0, i));
            snd = new Value(_this.base, _this.properties.slice(i));
            if (fst.isComplex()) {
              ref = new Literal(o.scope.freeVariable('ref'));
              fst = new Parens(new Assign(ref, fst));
              snd.base = ref;
            }
            return new If(new Existence(fst), snd, {
              soak: true
            });
          }
          return false;
        };
      })(this)();
    };

    Value.prototype.icedToSlot = function(i) {
      var sufffix, suffix;
      if (this.base instanceof Obj) {
        return this.base.icedToSlot(i);
      }
      sufffix = null;
      if (this.properties && this.properties.length) {
        suffix = this.properties.pop();
      }
      return new Slot(i, this, suffix);
    };

    Value.prototype.icedToSlotAccess = function() {
      if (this["this"]) {
        return this.properties[0];
      } else {
        return new Access(this);
      }
    };

    return Value;

  })(Base);

  exports.Comment = Comment = (function(_super) {
    __extends(Comment, _super);

    function Comment(comment) {
      this.comment = comment;
      Comment.__super__.constructor.call(this);
    }

    Comment.prototype.isStatement = YES;

    Comment.prototype.makeReturn = THIS;

    Comment.prototype.compileNode = function(o, level) {
      var code, comment;
      comment = this.comment.replace(/^(\s*)# /gm, "$1 * ");
      code = "/*" + (multident(comment, this.tab)) + (__indexOf.call(comment, '\n') >= 0 ? "\n" + this.tab : '') + " */";
      if ((level || o.level) === LEVEL_TOP) {
        code = o.indent + code;
      }
      return [this.makeCode("\n"), this.makeCode(code)];
    };

    return Comment;

  })(Base);

  exports.Call = Call = (function(_super) {
    __extends(Call, _super);

    function Call(variable, args, soak) {
      this.args = args != null ? args : [];
      this.soak = soak;
      Call.__super__.constructor.call(this);
      this.isNew = false;
      this.isSuper = variable === 'super';
      this.variable = this.isSuper ? null : variable;
      if (variable instanceof Value && variable.isNotCallable()) {
        variable.error("literal is not a function");
      }
    }

    Call.prototype.children = ['variable', 'args'];

    Call.prototype.newInstance = function() {
      var base, _ref2;
      base = ((_ref2 = this.variable) != null ? _ref2.base : void 0) || this.variable;
      if (base instanceof Call && !base.isNew) {
        base.newInstance();
      } else {
        this.isNew = true;
      }
      return this;
    };

    Call.prototype.superReference = function(o) {
      var accesses, method;
      method = o.scope.namedMethod();
      if (method != null ? method.klass : void 0) {
        accesses = [new Access(new Literal('__super__'))];
        if (method["static"]) {
          accesses.push(new Access(new Literal('constructor')));
        }
        accesses.push(new Access(new Literal(method.name)));
        return (new Value(new Literal(method.klass), accesses)).compile(o);
      } else if (method != null ? method.ctor : void 0) {
        return "" + method.name + ".__super__.constructor";
      } else {
        return this.error('cannot call super outside of an instance method.');
      }
    };

    Call.prototype.superThis = function(o) {
      var method;
      if (o.scope.icedgen) {
        return "_this";
      } else {
        method = o.scope.method;
        return (method && !method.klass && method.context) || "this";
      }
    };

    Call.prototype.unfoldSoak = function(o) {
      var call, ifn, left, list, rite, _i, _len, _ref2, _ref3;
      if (this.soak) {
        if (this.variable) {
          if (ifn = unfoldSoak(o, this, 'variable')) {
            return ifn;
          }
          _ref2 = new Value(this.variable).cacheReference(o), left = _ref2[0], rite = _ref2[1];
        } else {
          left = new Literal(this.superReference(o));
          rite = new Value(left);
        }
        rite = new Call(rite, this.args);
        rite.isNew = this.isNew;
        left = new Literal("typeof " + (left.compile(o)) + " === \"function\"");
        return new If(left, new Value(rite), {
          soak: true
        });
      }
      call = this;
      list = [];
      while (true) {
        if (call.variable instanceof Call) {
          list.push(call);
          call = call.variable;
          continue;
        }
        if (!(call.variable instanceof Value)) {
          break;
        }
        list.push(call);
        if (!((call = call.variable.base) instanceof Call)) {
          break;
        }
      }
      _ref3 = list.reverse();
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        call = _ref3[_i];
        if (ifn) {
          if (call.variable instanceof Call) {
            call.variable = ifn;
          } else {
            call.variable.base = ifn;
          }
        }
        ifn = unfoldSoak(o, call, 'variable');
      }
      return ifn;
    };

    Call.prototype.compileNode = function(o) {
      var arg, argIndex, compiledArgs, compiledArray, fragments, preface, _i, _len, _ref2, _ref3;
      if ((_ref2 = this.variable) != null) {
        _ref2.front = this.front;
      }
      compiledArray = Splat.compileSplattedArray(o, this.args, true);
      if (compiledArray.length) {
        return this.compileSplat(o, compiledArray);
      }
      compiledArgs = [];
      _ref3 = this.args;
      for (argIndex = _i = 0, _len = _ref3.length; _i < _len; argIndex = ++_i) {
        arg = _ref3[argIndex];
        arg.icedStatementAssertion();
        if (argIndex) {
          compiledArgs.push(this.makeCode(", "));
        }
        compiledArgs.push.apply(compiledArgs, arg.compileToFragments(o, LEVEL_LIST));
      }
      fragments = [];
      if (this.isSuper) {
        preface = this.superReference(o) + (".call(" + (this.superThis(o)));
        if (compiledArgs.length) {
          preface += ", ";
        }
        fragments.push(this.makeCode(preface));
      } else {
        if (this.isNew) {
          fragments.push(this.makeCode('new '));
        }
        fragments.push.apply(fragments, this.variable.compileToFragments(o, LEVEL_ACCESS));
        fragments.push(this.makeCode("("));
      }
      fragments.push.apply(fragments, compiledArgs);
      fragments.push(this.makeCode(")"));
      return fragments;
    };

    Call.prototype.compileSplat = function(o, splatArgs) {
      var answer, base, fun, idt, name, ref;
      if (this.isSuper) {
        return [].concat(this.makeCode("" + (this.superReference(o)) + ".apply(" + (this.superThis(o)) + ", "), splatArgs, this.makeCode(")"));
      }
      if (this.isNew) {
        idt = this.tab + TAB;
        return [].concat(this.makeCode("(function(func, args, ctor) {\n" + idt + "ctor.prototype = func.prototype;\n" + idt + "var child = new ctor, result = func.apply(child, args);\n" + idt + "return Object(result) === result ? result : child;\n" + this.tab + "})("), this.variable.compileToFragments(o, LEVEL_LIST), this.makeCode(", "), splatArgs, this.makeCode(", function(){})"));
      }
      answer = [];
      base = new Value(this.variable);
      if ((name = base.properties.pop()) && base.isComplex()) {
        ref = o.scope.freeVariable('ref');
        answer = answer.concat(this.makeCode("(" + ref + " = "), base.compileToFragments(o, LEVEL_LIST), this.makeCode(")"), name.compileToFragments(o));
      } else {
        fun = base.compileToFragments(o, LEVEL_ACCESS);
        if (SIMPLENUM.test(fragmentsToText(fun))) {
          fun = this.wrapInBraces(fun);
        }
        if (name) {
          ref = fragmentsToText(fun);
          fun.push.apply(fun, name.compileToFragments(o));
        } else {
          ref = 'null';
        }
        answer = answer.concat(fun);
      }
      return answer = answer.concat(this.makeCode(".apply(" + ref + ", "), splatArgs, this.makeCode(")"));
    };

    return Call;

  })(Base);

  exports.Extends = Extends = (function(_super) {
    __extends(Extends, _super);

    function Extends(child, parent) {
      this.child = child;
      this.parent = parent;
      Extends.__super__.constructor.call(this);
    }

    Extends.prototype.children = ['child', 'parent'];

    Extends.prototype.compileToFragments = function(o) {
      return new Call(new Value(new Literal(utility('extends'))), [this.child, this.parent]).compileToFragments(o);
    };

    return Extends;

  })(Base);

  exports.Access = Access = (function(_super) {
    __extends(Access, _super);

    function Access(name, tag) {
      this.name = name;
      Access.__super__.constructor.call(this);
      this.name.asKey = true;
      this.soak = tag === 'soak';
    }

    Access.prototype.children = ['name'];

    Access.prototype.compileToFragments = function(o) {
      var name;
      name = this.name.compileToFragments(o);
      if ((IDENTIFIER.test(fragmentsToText(name))) || this.name instanceof Defer) {
        name.unshift(this.makeCode("."));
      } else {
        name.unshift(this.makeCode("["));
        name.push(this.makeCode("]"));
      }
      return name;
    };

    Access.prototype.isComplex = NO;

    return Access;

  })(Base);

  exports.Index = Index = (function(_super) {
    __extends(Index, _super);

    function Index(index) {
      this.index = index;
      Index.__super__.constructor.call(this);
    }

    Index.prototype.children = ['index'];

    Index.prototype.compileToFragments = function(o) {
      return [].concat(this.makeCode("["), this.index.compileToFragments(o, LEVEL_PAREN), this.makeCode("]"));
    };

    Index.prototype.isComplex = function() {
      return this.index.isComplex();
    };

    return Index;

  })(Base);

  exports.Range = Range = (function(_super) {
    __extends(Range, _super);

    Range.prototype.children = ['from', 'to'];

    function Range(from, to, tag) {
      this.from = from;
      this.to = to;
      Range.__super__.constructor.call(this);
      this.exclusive = tag === 'exclusive';
      this.equals = this.exclusive ? '' : '=';
    }

    Range.prototype.compileVariables = function(o) {
      var step, _ref2, _ref3, _ref4, _ref5;
      o = merge(o, {
        top: true
      });
      _ref2 = this.cacheToCodeFragments(this.from.cache(o, LEVEL_LIST)), this.fromC = _ref2[0], this.fromVar = _ref2[1];
      _ref3 = this.cacheToCodeFragments(this.to.cache(o, LEVEL_LIST)), this.toC = _ref3[0], this.toVar = _ref3[1];
      if (step = del(o, 'step')) {
        _ref4 = this.cacheToCodeFragments(step.cache(o, LEVEL_LIST)), this.step = _ref4[0], this.stepVar = _ref4[1];
      }
      _ref5 = [this.fromVar.match(NUMBER), this.toVar.match(NUMBER)], this.fromNum = _ref5[0], this.toNum = _ref5[1];
      if (this.stepVar) {
        return this.stepNum = this.stepVar.match(NUMBER);
      }
    };

    Range.prototype.compileNode = function(o) {
      var cond, condPart, from, gt, idx, idxName, known, lt, namedIndex, stepPart, to, varPart, _ref2, _ref3;
      if (!this.fromVar) {
        this.compileVariables(o);
      }
      if (!o.index) {
        return this.compileArray(o);
      }
      known = this.fromNum && this.toNum;
      idx = del(o, 'index');
      idxName = del(o, 'name');
      namedIndex = idxName && idxName !== idx;
      varPart = "" + idx + " = " + this.fromC;
      if (this.toC !== this.toVar) {
        varPart += ", " + this.toC;
      }
      if (this.step !== this.stepVar) {
        varPart += ", " + this.step;
      }
      _ref2 = ["" + idx + " <" + this.equals, "" + idx + " >" + this.equals], lt = _ref2[0], gt = _ref2[1];
      condPart = this.stepNum ? parseNum(this.stepNum[0]) > 0 ? "" + lt + " " + this.toVar : "" + gt + " " + this.toVar : known ? ((_ref3 = [parseNum(this.fromNum[0]), parseNum(this.toNum[0])], from = _ref3[0], to = _ref3[1], _ref3), from <= to ? "" + lt + " " + to : "" + gt + " " + to) : (cond = this.stepVar ? "" + this.stepVar + " > 0" : "" + this.fromVar + " <= " + this.toVar, "" + cond + " ? " + lt + " " + this.toVar + " : " + gt + " " + this.toVar);
      stepPart = this.stepVar ? "" + idx + " += " + this.stepVar : known ? namedIndex ? from <= to ? "++" + idx : "--" + idx : from <= to ? "" + idx + "++" : "" + idx + "--" : namedIndex ? "" + cond + " ? ++" + idx + " : --" + idx : "" + cond + " ? " + idx + "++ : " + idx + "--";
      if (namedIndex) {
        varPart = "" + idxName + " = " + varPart;
      }
      if (namedIndex) {
        stepPart = "" + idxName + " = " + stepPart;
      }
      return [this.makeCode("" + varPart + "; " + condPart + "; " + stepPart)];
    };

    Range.prototype.compileArray = function(o) {
      var args, body, cond, hasArgs, i, idt, post, pre, range, result, vars, _i, _ref2, _ref3, _results;
      if (this.fromNum && this.toNum && Math.abs(this.fromNum - this.toNum) <= 20) {
        range = (function() {
          _results = [];
          for (var _i = _ref2 = +this.fromNum, _ref3 = +this.toNum; _ref2 <= _ref3 ? _i <= _ref3 : _i >= _ref3; _ref2 <= _ref3 ? _i++ : _i--){ _results.push(_i); }
          return _results;
        }).apply(this);
        if (this.exclusive) {
          range.pop();
        }
        return [this.makeCode("[" + (range.join(', ')) + "]")];
      }
      idt = this.tab + TAB;
      i = o.scope.freeVariable('i');
      result = o.scope.freeVariable('results');
      pre = "\n" + idt + result + " = [];";
      if (this.fromNum && this.toNum) {
        o.index = i;
        body = fragmentsToText(this.compileNode(o));
      } else {
        vars = ("" + i + " = " + this.fromC) + (this.toC !== this.toVar ? ", " + this.toC : '');
        cond = "" + this.fromVar + " <= " + this.toVar;
        body = "var " + vars + "; " + cond + " ? " + i + " <" + this.equals + " " + this.toVar + " : " + i + " >" + this.equals + " " + this.toVar + "; " + cond + " ? " + i + "++ : " + i + "--";
      }
      post = "{ " + result + ".push(" + i + "); }\n" + idt + "return " + result + ";\n" + o.indent;
      hasArgs = function(node) {
        return node != null ? node.contains(isLiteralArguments) : void 0;
      };
      if (hasArgs(this.from) || hasArgs(this.to)) {
        args = ', arguments';
      }
      return [this.makeCode("(function() {" + pre + "\n" + idt + "for (" + body + ")" + post + "}).apply(this" + (args != null ? args : '') + ")")];
    };

    return Range;

  })(Base);

  exports.Slice = Slice = (function(_super) {
    __extends(Slice, _super);

    Slice.prototype.children = ['range'];

    function Slice(range) {
      this.range = range;
      Slice.__super__.constructor.call(this);
    }

    Slice.prototype.compileNode = function(o) {
      var compiled, compiledText, from, fromCompiled, to, toStr, _ref2;
      _ref2 = this.range, to = _ref2.to, from = _ref2.from;
      fromCompiled = from && from.compileToFragments(o, LEVEL_PAREN) || [this.makeCode('0')];
      if (to) {
        compiled = to.compileToFragments(o, LEVEL_PAREN);
        compiledText = fragmentsToText(compiled);
        if (!(!this.range.exclusive && +compiledText === -1)) {
          toStr = ', ' + (this.range.exclusive ? compiledText : SIMPLENUM.test(compiledText) ? "" + (+compiledText + 1) : (compiled = to.compileToFragments(o, LEVEL_ACCESS), "+" + (fragmentsToText(compiled)) + " + 1 || 9e9"));
        }
      }
      return [this.makeCode(".slice(" + (fragmentsToText(fromCompiled)) + (toStr || '') + ")")];
    };

    return Slice;

  })(Base);

  exports.Obj = Obj = (function(_super) {
    __extends(Obj, _super);

    function Obj(props, generated) {
      this.generated = generated != null ? generated : false;
      this.objects = this.properties = props || [];
      Obj.__super__.constructor.call(this);
    }

    Obj.prototype.children = ['properties'];

    Obj.prototype.compileNode = function(o) {
      var answer, i, idt, indent, join, lastNoncom, node, prop, props, _i, _j, _len, _len1;
      props = this.properties;
      if (!props.length) {
        return [this.makeCode(this.front ? '({})' : '{}')];
      }
      if (this.generated) {
        for (_i = 0, _len = props.length; _i < _len; _i++) {
          node = props[_i];
          if (node instanceof Value) {
            node.error('cannot have an implicit value in an implicit object');
          }
        }
      }
      idt = o.indent += TAB;
      lastNoncom = this.lastNonComment(this.properties);
      answer = [];
      for (i = _j = 0, _len1 = props.length; _j < _len1; i = ++_j) {
        prop = props[i];
        join = i === props.length - 1 ? '' : prop === lastNoncom || prop instanceof Comment ? '\n' : ',\n';
        indent = prop instanceof Comment ? '' : idt;
        if (prop instanceof Assign && prop.variable instanceof Value && prop.variable.hasProperties()) {
          prop.variable.error('Invalid object key');
        }
        if (prop instanceof Value && prop["this"]) {
          prop = new Assign(prop.properties[0].name, prop, 'object');
        }
        if (!(prop instanceof Comment)) {
          if (!(prop instanceof Assign)) {
            prop = new Assign(prop, prop, 'object');
          }
          (prop.variable.base || prop.variable).asKey = true;
        }
        if (indent) {
          answer.push(this.makeCode(indent));
        }
        answer.push.apply(answer, prop.compileToFragments(o, LEVEL_TOP));
        if (join) {
          answer.push(this.makeCode(join));
        }
      }
      answer.unshift(this.makeCode("{" + (props.length && '\n')));
      answer.push(this.makeCode("" + (props.length && '\n' + this.tab) + "}"));
      if (this.front) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Obj.prototype.assigns = function(name) {
      var prop, _i, _len, _ref2;
      _ref2 = this.properties;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        prop = _ref2[_i];
        if (prop.assigns(name)) {
          return true;
        }
      }
      return false;
    };

    Obj.prototype.icedToSlot = function(i) {
      var access, prop, _i, _len, _ref2, _results;
      _ref2 = this.properties;
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        prop = _ref2[_i];
        if (prop instanceof Assign) {
          _results.push((prop.value.icedToSlot(i)).addAccess(prop.variable.icedToSlotAccess()));
        } else if (prop instanceof Value) {
          access = prop.icedToSlotAccess();
          _results.push((prop.icedToSlot(i)).addAccess(access));
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    return Obj;

  })(Base);

  exports.Arr = Arr = (function(_super) {
    __extends(Arr, _super);

    function Arr(objs) {
      this.objects = objs || [];
      Arr.__super__.constructor.call(this);
    }

    Arr.prototype.children = ['objects'];

    Arr.prototype.compileNode = function(o) {
      var answer, compiledObjs, fragments, index, obj, _i, _len;
      if (!this.objects.length) {
        return [this.makeCode('[]')];
      }
      o.indent += TAB;
      answer = Splat.compileSplattedArray(o, this.objects);
      if (answer.length) {
        return answer;
      }
      answer = [];
      compiledObjs = (function() {
        var _i, _len, _ref2, _results;
        _ref2 = this.objects;
        _results = [];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          obj = _ref2[_i];
          _results.push(obj.compileToFragments(o, LEVEL_LIST));
        }
        return _results;
      }).call(this);
      for (index = _i = 0, _len = compiledObjs.length; _i < _len; index = ++_i) {
        fragments = compiledObjs[index];
        if (index) {
          answer.push(this.makeCode(", "));
        }
        answer.push.apply(answer, fragments);
      }
      if (fragmentsToText(answer).indexOf('\n') >= 0) {
        answer.unshift(this.makeCode("[\n" + o.indent));
        answer.push(this.makeCode("\n" + this.tab + "]"));
      } else {
        answer.unshift(this.makeCode("["));
        answer.push(this.makeCode("]"));
      }
      return answer;
    };

    Arr.prototype.assigns = function(name) {
      var obj, _i, _len, _ref2;
      _ref2 = this.objects;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        obj = _ref2[_i];
        if (obj.assigns(name)) {
          return true;
        }
      }
      return false;
    };

    return Arr;

  })(Base);

  exports.Class = Class = (function(_super) {
    __extends(Class, _super);

    function Class(variable, parent, body) {
      this.variable = variable;
      this.parent = parent;
      this.body = body != null ? body : new Block;
      Class.__super__.constructor.call(this);
      this.boundFuncs = [];
      this.body.classBody = true;
    }

    Class.prototype.children = ['variable', 'parent', 'body'];

    Class.prototype.determineName = function() {
      var decl, tail;
      if (!this.variable) {
        return null;
      }
      decl = (tail = last(this.variable.properties)) ? tail instanceof Access && tail.name.value : this.variable.base.value;
      if (__indexOf.call(STRICT_PROSCRIBED, decl) >= 0) {
        this.variable.error("class variable name may not be " + decl);
      }
      return decl && (decl = IDENTIFIER.test(decl) && decl);
    };

    Class.prototype.setContext = function(name) {
      return this.body.traverseChildren(false, function(node) {
        if (node.classBody) {
          return false;
        }
        if (node instanceof Literal && node.value === 'this') {
          return node.value = name;
        } else if (node instanceof Code) {
          node.klass = name;
          if (node.bound) {
            return node.context = name;
          }
        }
      });
    };

    Class.prototype.addBoundFunctions = function(o) {
      var bvar, lhs, _i, _len, _ref2;
      _ref2 = this.boundFuncs;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        bvar = _ref2[_i];
        lhs = (new Value(new Literal("this"), [new Access(bvar)])).compile(o);
        this.ctor.body.unshift(new Literal("" + lhs + " = " + (utility('bind')) + "(" + lhs + ", this)"));
      }
    };

    Class.prototype.addProperties = function(node, name, o) {
      var assign, base, exprs, func, props;
      props = node.base.properties.slice(0);
      exprs = (function() {
        var _results;
        _results = [];
        while (assign = props.shift()) {
          if (assign instanceof Assign) {
            base = assign.variable.base;
            delete assign.context;
            func = assign.value;
            if (base.value === 'constructor') {
              if (this.ctor) {
                assign.error('cannot define more than one constructor in a class');
              }
              if (func.bound) {
                assign.error('cannot define a constructor as a bound function');
              }
              if (func instanceof Code) {
                assign = this.ctor = func;
              } else {
                this.externalCtor = o.classScope.freeVariable('class');
                assign = new Assign(new Literal(this.externalCtor), func);
              }
            } else {
              if (assign.variable["this"]) {
                func["static"] = true;
              } else {
                assign.variable = new Value(new Literal(name), [new Access(new Literal('prototype')), new Access(base)]);
                if (func instanceof Code && func.bound) {
                  this.boundFuncs.push(base);
                  func.bound = false;
                }
              }
            }
          }
          _results.push(assign);
        }
        return _results;
      }).call(this);
      return compact(exprs);
    };

    Class.prototype.walkBody = function(name, o) {
      return this.traverseChildren(false, (function(_this) {
        return function(child) {
          var cont, exps, i, node, _i, _len, _ref2;
          cont = true;
          if (child instanceof Class) {
            return false;
          }
          if (child instanceof Block) {
            _ref2 = exps = child.expressions;
            for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
              node = _ref2[i];
              if (node instanceof Assign && node.variable.looksStatic(name)) {
                node.value["static"] = true;
              } else if (node instanceof Value && node.isObject(true)) {
                cont = false;
                exps[i] = _this.addProperties(node, name, o);
              }
            }
            child.expressions = exps = flatten(exps);
          }
          return cont && !(child instanceof Class);
        };
      })(this));
    };

    Class.prototype.hoistDirectivePrologue = function() {
      var expressions, index, node;
      index = 0;
      expressions = this.body.expressions;
      while ((node = expressions[index]) && node instanceof Comment || node instanceof Value && node.isString()) {
        ++index;
      }
      return this.directives = expressions.splice(0, index);
    };

    Class.prototype.ensureConstructor = function(name) {
      if (!this.ctor) {
        this.ctor = new Code;
        if (this.externalCtor) {
          this.ctor.body.push(new Literal("" + this.externalCtor + ".apply(this, arguments)"));
        } else if (this.parent) {
          this.ctor.body.push(new Literal("" + name + ".__super__.constructor.apply(this, arguments)"));
        }
        this.ctor.body.makeReturn();
        this.body.expressions.unshift(this.ctor);
      }
      this.ctor.ctor = this.ctor.name = name;
      this.ctor.klass = null;
      return this.ctor.noReturn = true;
    };

    Class.prototype.compileNode = function(o) {
      var args, argumentsNode, func, jumpNode, klass, lname, name, superClass, _ref2;
      if (jumpNode = this.body.jumps()) {
        jumpNode.error('Class bodies cannot contain pure statements');
      }
      if (argumentsNode = this.body.contains(isLiteralArguments)) {
        argumentsNode.error("Class bodies shouldn't reference arguments");
      }
      name = this.determineName() || '_Class';
      if (name.reserved) {
        name = "_" + name;
      }
      lname = new Literal(name);
      func = new Code([], Block.wrap([this.body]));
      args = [];
      o.classScope = func.makeScope(o.scope);
      this.hoistDirectivePrologue();
      this.setContext(name);
      this.walkBody(name, o);
      this.ensureConstructor(name);
      this.addBoundFunctions(o);
      this.body.spaced = true;
      this.body.expressions.push(lname);
      if (this.parent) {
        superClass = new Literal(o.classScope.freeVariable('super', false));
        this.body.expressions.unshift(new Extends(lname, superClass));
        func.params.push(new Param(superClass));
        args.push(this.parent);
      }
      (_ref2 = this.body.expressions).unshift.apply(_ref2, this.directives);
      klass = new Parens(new Call(func, args));
      if (this.variable) {
        klass = new Assign(this.variable, klass);
      }
      return klass.compileToFragments(o);
    };

    return Class;

  })(Base);

  exports.Assign = Assign = (function(_super) {
    __extends(Assign, _super);

    function Assign(variable, value, context, options) {
      var forbidden, name, _ref2;
      this.variable = variable;
      this.value = value;
      this.context = context;
      Assign.__super__.constructor.call(this);
      this.param = options && options.param;
      this.subpattern = options && options.subpattern;
      forbidden = (_ref2 = (name = this.variable.unwrapAll().value), __indexOf.call(STRICT_PROSCRIBED, _ref2) >= 0);
      if (forbidden && this.context !== 'object') {
        this.variable.error("variable name may not be \"" + name + "\"");
      }
      this.icedlocal = options && options.icedlocal;
    }

    Assign.prototype.children = ['variable', 'value'];

    Assign.prototype.isStatement = function(o) {
      return (o != null ? o.level : void 0) === LEVEL_TOP && (this.context != null) && __indexOf.call(this.context, "?") >= 0;
    };

    Assign.prototype.assigns = function(name) {
      return this[this.context === 'object' ? 'value' : 'variable'].assigns(name);
    };

    Assign.prototype.unfoldSoak = function(o) {
      return unfoldSoak(o, this, 'variable');
    };

    Assign.prototype.compileNode = function(o) {
      var answer, compiledName, isValue, match, name, val, varBase, _ref2, _ref3, _ref4, _ref5;
      this.value.icedStatementAssertion();
      if (isValue = this.variable instanceof Value) {
        if (this.variable.isArray() || this.variable.isObject()) {
          return this.compilePatternMatch(o);
        }
        if (this.variable.isSplice()) {
          return this.compileSplice(o);
        }
        if ((_ref2 = this.context) === '||=' || _ref2 === '&&=' || _ref2 === '?=') {
          return this.compileConditional(o);
        }
        if ((_ref3 = this.context) === '**=' || _ref3 === '//=' || _ref3 === '%%=') {
          return this.compileSpecialMath(o);
        }
      }
      compiledName = this.variable.compileToFragments(o, LEVEL_LIST);
      name = fragmentsToText(compiledName);
      if (!this.context) {
        varBase = this.variable.unwrapAll();
        if (!varBase.isAssignable()) {
          this.variable.error("\"" + (this.variable.compile(o)) + "\" cannot be assigned");
        }
        if (!(typeof varBase.hasProperties === "function" ? varBase.hasProperties() : void 0)) {
          if (this.param || this.icedlocal) {
            o.scope.add(name, 'var', this.icedlocal);
          } else {
            o.scope.find(name);
          }
        }
      }
      if (this.value instanceof Code && (match = METHOD_DEF.exec(name))) {
        if (match[2]) {
          this.value.klass = match[1];
        }
        this.value.name = (_ref4 = (_ref5 = match[3]) != null ? _ref5 : match[4]) != null ? _ref4 : match[5];
      }
      val = this.value.compileToFragments(o, LEVEL_LIST);
      if (this.context === 'object') {
        return compiledName.concat(this.makeCode(": "), val);
      }
      answer = compiledName.concat(this.makeCode(" " + (this.context || '=') + " "), val);
      if (o.level <= LEVEL_LIST) {
        return answer;
      } else {
        return this.wrapInBraces(answer);
      }
    };

    Assign.prototype.compilePatternMatch = function(o) {
      var acc, assigns, code, expandedIdx, fragments, i, idx, isObject, ivar, name, obj, objects, olen, ref, rest, top, val, value, vvar, vvarText, _i, _len, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
      top = o.level === LEVEL_TOP;
      value = this.value;
      objects = this.variable.base.objects;
      if (!(olen = objects.length)) {
        code = value.compileToFragments(o);
        if (o.level >= LEVEL_OP) {
          return this.wrapInBraces(code);
        } else {
          return code;
        }
      }
      isObject = this.variable.isObject();
      if (top && olen === 1 && !((obj = objects[0]) instanceof Splat)) {
        if (obj instanceof Assign) {
          _ref2 = obj, (_ref3 = _ref2.variable, idx = _ref3.base), obj = _ref2.value;
        } else {
          idx = isObject ? obj["this"] ? obj.properties[0].name : obj : new Literal(0);
        }
        acc = IDENTIFIER.test(idx.unwrap().value || 0);
        value = new Value(value);
        value.properties.push(new (acc ? Access : Index)(idx));
        if (_ref4 = obj.unwrap().value, __indexOf.call(RESERVED, _ref4) >= 0) {
          obj.error("assignment to a reserved word: " + (obj.compile(o)));
        }
        return new Assign(obj, value, null, {
          param: this.param
        }).compileToFragments(o, LEVEL_TOP);
      }
      vvar = value.compileToFragments(o, LEVEL_LIST);
      vvarText = fragmentsToText(vvar);
      assigns = [];
      expandedIdx = false;
      if (!IDENTIFIER.test(vvarText) || this.variable.assigns(vvarText)) {
        assigns.push([this.makeCode("" + (ref = o.scope.freeVariable('ref')) + " = ")].concat(__slice.call(vvar)));
        vvar = [this.makeCode(ref)];
        vvarText = ref;
      }
      for (i = _i = 0, _len = objects.length; _i < _len; i = ++_i) {
        obj = objects[i];
        idx = i;
        if (isObject) {
          if (obj instanceof Assign) {
            _ref5 = obj, (_ref6 = _ref5.variable, idx = _ref6.base), obj = _ref5.value;
          } else {
            if (obj.base instanceof Parens) {
              _ref7 = new Value(obj.unwrapAll()).cacheReference(o), obj = _ref7[0], idx = _ref7[1];
            } else {
              idx = obj["this"] ? obj.properties[0].name : obj;
            }
          }
        }
        if (!expandedIdx && obj instanceof Splat) {
          name = obj.name.unwrap().value;
          obj = obj.unwrap();
          val = "" + olen + " <= " + vvarText + ".length ? " + (utility('slice')) + ".call(" + vvarText + ", " + i;
          if (rest = olen - i - 1) {
            ivar = o.scope.freeVariable('i');
            val += ", " + ivar + " = " + vvarText + ".length - " + rest + ") : (" + ivar + " = " + i + ", [])";
          } else {
            val += ") : []";
          }
          val = new Literal(val);
          expandedIdx = "" + ivar + "++";
        } else if (!expandedIdx && obj instanceof Expansion) {
          if (rest = olen - i - 1) {
            if (rest === 1) {
              expandedIdx = "" + vvarText + ".length - 1";
            } else {
              ivar = o.scope.freeVariable('i');
              val = new Literal("" + ivar + " = " + vvarText + ".length - " + rest);
              expandedIdx = "" + ivar + "++";
              assigns.push(val.compileToFragments(o, LEVEL_LIST));
            }
          }
          continue;
        } else {
          name = obj.unwrap().value;
          if (obj instanceof Splat || obj instanceof Expansion) {
            obj.error("multiple splats/expansions are disallowed in an assignment");
          }
          if (typeof idx === 'number') {
            idx = new Literal(expandedIdx || idx);
            acc = false;
          } else {
            acc = isObject && IDENTIFIER.test(idx.unwrap().value || 0);
          }
          val = new Value(new Literal(vvarText), [new (acc ? Access : Index)(idx)]);
        }
        if ((name != null) && __indexOf.call(RESERVED, name) >= 0) {
          obj.error("assignment to a reserved word: " + (obj.compile(o)));
        }
        assigns.push(new Assign(obj, val, null, {
          param: this.param,
          subpattern: true
        }).compileToFragments(o, LEVEL_LIST));
      }
      if (!(top || this.subpattern)) {
        assigns.push(vvar);
      }
      fragments = this.joinFragmentArrays(assigns, ', ');
      if (o.level < LEVEL_LIST) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    Assign.prototype.compileConditional = function(o) {
      var fragments, left, right, _ref2;
      _ref2 = this.variable.cacheReference(o), left = _ref2[0], right = _ref2[1];
      if (!left.properties.length && left.base instanceof Literal && left.base.value !== "this" && !o.scope.check(left.base.value)) {
        this.variable.error("the variable \"" + left.base.value + "\" can't be assigned with " + this.context + " because it has not been declared before");
      }
      if (__indexOf.call(this.context, "?") >= 0) {
        o.isExistentialEquals = true;
        return new If(new Existence(left), right, {
          type: 'if'
        }).addElse(new Assign(right, this.value, '=')).compileToFragments(o);
      } else {
        fragments = new Op(this.context.slice(0, -1), left, new Assign(right, this.value, '=')).compileToFragments(o);
        if (o.level <= LEVEL_LIST) {
          return fragments;
        } else {
          return this.wrapInBraces(fragments);
        }
      }
    };

    Assign.prototype.compileSpecialMath = function(o) {
      var left, right, _ref2;
      _ref2 = this.variable.cacheReference(o), left = _ref2[0], right = _ref2[1];
      return new Assign(left, new Op(this.context.slice(0, -1), right, this.value)).compileToFragments(o);
    };

    Assign.prototype.compileSplice = function(o) {
      var answer, exclusive, from, fromDecl, fromRef, name, to, valDef, valRef, _ref2, _ref3, _ref4;
      _ref2 = this.variable.properties.pop().range, from = _ref2.from, to = _ref2.to, exclusive = _ref2.exclusive;
      name = this.variable.compile(o);
      if (from) {
        _ref3 = this.cacheToCodeFragments(from.cache(o, LEVEL_OP)), fromDecl = _ref3[0], fromRef = _ref3[1];
      } else {
        fromDecl = fromRef = '0';
      }
      if (to) {
        if (from instanceof Value && from.isSimpleNumber() && to instanceof Value && to.isSimpleNumber()) {
          to = to.compile(o) - fromRef;
          if (!exclusive) {
            to += 1;
          }
        } else {
          to = to.compile(o, LEVEL_ACCESS) + ' - ' + fromRef;
          if (!exclusive) {
            to += ' + 1';
          }
        }
      } else {
        to = "9e9";
      }
      _ref4 = this.value.cache(o, LEVEL_LIST), valDef = _ref4[0], valRef = _ref4[1];
      answer = [].concat(this.makeCode("[].splice.apply(" + name + ", [" + fromDecl + ", " + to + "].concat("), valDef, this.makeCode(")), "), valRef);
      if (o.level > LEVEL_TOP) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    return Assign;

  })(Base);

  exports.Code = Code = (function(_super) {
    __extends(Code, _super);

    function Code(params, body, tag) {
      Code.__super__.constructor.call(this);
      this.params = params || [];
      this.body = body || new Block;
      this.icedgen = tag === 'icedgen';
      this.icedPassedDeferral = null;
      this.bound = tag === 'boundfunc' || this.icedgen;
      this.isGenerator = this.body.contains(function(node) {
        var _ref2;
        return node instanceof Op && ((_ref2 = node.operator) === 'yield' || _ref2 === 'yield*');
      });
    }

    Code.prototype.children = ['params', 'body'];

    Code.prototype.isStatement = function() {
      return !!this.ctor;
    };

    Code.prototype.jumps = NO;

    Code.prototype.makeScope = function(parentScope) {
      return new Scope(parentScope, this.body, this);
    };

    Code.prototype.compileNode = function(o) {
      var answer, boundfunc, code, exprs, i, lit, p, param, params, ref, splats, uniqs, val, wasEmpty, wrapper, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _m, _n, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
      if (this.bound && ((_ref2 = o.scope.method) != null ? _ref2.bound : void 0)) {
        this.context = o.scope.method.context;
      }
      if (this.bound && !this.context) {
        this.context = '_this';
        wrapper = new Code([new Param(new Literal(this.context))], new Block([this]));
        boundfunc = new Call(wrapper, [new Literal('this')]);
        boundfunc.updateLocationDataIfMissing(this.locationData);
        return boundfunc.compileNode(o);
      }
      o.scope = del(o, 'classScope') || this.makeScope(o.scope);
      o.scope.shared = del(o, 'sharedScope') || this.icedgen;
      o.scope.icedgen = this.icedgen;
      o.indent += TAB;
      delete o.bare;
      delete o.isExistentialEquals;
      params = [];
      exprs = [];
      _ref3 = this.params;
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        param = _ref3[_i];
        if (!(param instanceof Expansion)) {
          o.scope.parameter(param.asReference(o));
        }
      }
      _ref4 = this.params;
      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
        param = _ref4[_j];
        if (!(param.splat || param instanceof Expansion)) {
          continue;
        }
        _ref5 = this.params;
        for (_k = 0, _len2 = _ref5.length; _k < _len2; _k++) {
          p = _ref5[_k].name;
          if (!(!(param instanceof Expansion))) {
            continue;
          }
          if (p["this"]) {
            p = p.properties[0].name;
          }
          if (p.value) {
            o.scope.add(p.value, 'var', true);
          }
        }
        splats = new Assign(new Value(new Arr((function() {
          var _l, _len3, _ref6, _results;
          _ref6 = this.params;
          _results = [];
          for (_l = 0, _len3 = _ref6.length; _l < _len3; _l++) {
            p = _ref6[_l];
            _results.push(p.asReference(o));
          }
          return _results;
        }).call(this))), new Value(new Literal('arguments')));
        break;
      }
      _ref6 = this.params;
      for (_l = 0, _len3 = _ref6.length; _l < _len3; _l++) {
        param = _ref6[_l];
        if (param.isComplex()) {
          val = ref = param.asReference(o);
          if (param.value) {
            val = new Op('?', ref, param.value);
          }
          exprs.push(new Assign(new Value(param.name), val, '=', {
            param: true
          }));
        } else {
          ref = param;
          if (param.value) {
            lit = new Literal(ref.name.value + ' == null');
            val = new Assign(new Value(param.name), param.value, '=');
            exprs.push(new If(lit, val));
          }
        }
        if (!splats) {
          params.push(ref);
        }
      }
      wasEmpty = this.body.isEmpty();
      if (splats) {
        exprs.unshift(splats);
      }
      if (exprs.length) {
        (_ref7 = this.body.expressions).unshift.apply(_ref7, exprs);
      }
      for (i = _m = 0, _len4 = params.length; _m < _len4; i = ++_m) {
        p = params[i];
        params[i] = p.compileToFragments(o);
        o.scope.parameter(fragmentsToText(params[i]));
      }
      uniqs = [];
      this.eachParamName(function(name, node) {
        if (__indexOf.call(uniqs, name) >= 0) {
          node.error("multiple parameters named '" + name + "'");
        }
        return uniqs.push(name);
      });
      if (this.icedIsAutocbCode) {
        wasEmpty = false;
      }
      if (!(wasEmpty || this.noReturn)) {
        this.body.makeReturn();
      }
      code = 'function';
      if (this.isGenerator) {
        code += '*';
      }
      if (this.ctor) {
        code += ' ' + this.name;
      }
      code += '(';
      answer = [this.makeCode(code)];
      for (i = _n = 0, _len5 = params.length; _n < _len5; i = ++_n) {
        p = params[i];
        if (i) {
          answer.push(this.makeCode(", "));
        }
        answer.push.apply(answer, p);
      }
      answer.push(this.makeCode(') {'));
      this.icedPatchBody(o);
      if (!this.body.isEmpty()) {
        answer = answer.concat(this.makeCode("\n"), this.body.compileWithDeclarations(o), this.makeCode("\n" + this.tab));
      }
      answer.push(this.makeCode('}'));
      if (this.ctor) {
        return [this.makeCode(this.tab)].concat(__slice.call(answer));
      }
      if (this.front || (o.level >= LEVEL_ACCESS)) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Code.prototype.eachParamName = function(iterator) {
      var param, _i, _len, _ref2, _results;
      _ref2 = this.params;
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        _results.push(param.eachName(iterator));
      }
      return _results;
    };

    Code.prototype.traverseChildren = function(crossScope, func) {
      if (crossScope) {
        return Code.__super__.traverseChildren.call(this, crossScope, func);
      }
    };

    Code.prototype.icedPatchBody = function(o) {
      var f, lhs, r, rhs;
      if (this.icedFoundArguments && this.icedNodeFlag) {
        o.scope.assign('_arguments', 'arguments');
      }
      if (this.icedNodeFlag && !this.icedgen) {
        this.icedPassedDeferral = o.scope.freeVariable(iced["const"].passed_deferral);
        lhs = new Value(new Literal(this.icedPassedDeferral));
        f = new Value(new Literal(iced["const"].ns));
        f.add(new Access(new Value(new Literal(iced["const"].findDeferral))));
        rhs = new Call(f, [new Value(new Literal('arguments'))]);
        this.body.unshift(new Assign(lhs, rhs));
      }
      if (this.icedNodeFlag && !this.icedgen) {
        r = this.icedIsAutocbCode ? iced["const"].autocb : iced["const"].k_noop;
        rhs = new Value(new Literal(r));
        lhs = new Value(new Literal(iced["const"].k));
        return this.body.unshift(new Assign(lhs, rhs, null, {
          icedlocal: true
        }));
      }
    };

    Code.prototype.icedWalkAst = function(parent, o) {
      var cf_prev, fa_prev, faf_prev, fg_prev, param, _i, _len, _ref2;
      this.icedParentAwait = parent;
      fa_prev = o.foundAutocb;
      cf_prev = o.currFunc;
      fg_prev = o.foundArguments;
      faf_prev = o.foundAwaitFunc;
      o.foundAutocb = false;
      o.foundArguments = false;
      o.foundAwaitFunc = false;
      o.currFunc = this;
      _ref2 = this.params;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        if (param.name instanceof Literal && param.name.value === iced["const"].autocb) {
          o.foundAutocb = true;
          break;
        }
      }
      Code.__super__.icedWalkAst.call(this, parent, o);
      this.icedHasAutocbFlag = fa_prev;
      this.icedIsAutocbCode = o.foundAutocb;
      this.icedFoundArguments = o.foundArguments;
      o.foundAwaitFunc = faf_prev;
      o.foundArguments = fg_prev;
      o.foundAutocb = fa_prev;
      o.currFunc = cf_prev;
      return false;
    };

    Code.prototype.icedWalkAstLoops = function(flood) {
      if (Code.__super__.icedWalkAstLoops.call(this, false)) {
        this.icedLoopFlag = true;
      }
      return false;
    };

    Code.prototype.icedWalkCpsPivots = function() {
      Code.__super__.icedWalkCpsPivots.call(this);
      return this.icedCpsPivotFlag = false;
    };

    Code.prototype.icedTraceName = function() {
      var parts;
      parts = [];
      if (this.klass) {
        parts.push(this.klass);
      }
      if (this.name) {
        parts.push(this.name);
      }
      return parts.join('.');
    };

    return Code;

  })(Base);

  exports.Param = Param = (function(_super) {
    __extends(Param, _super);

    function Param(name, value, splat) {
      var _ref2;
      this.name = name;
      this.value = value;
      this.splat = splat;
      Param.__super__.constructor.call(this);
      if (_ref2 = (name = this.name.unwrapAll().value), __indexOf.call(STRICT_PROSCRIBED, _ref2) >= 0) {
        this.name.error("parameter name \"" + name + "\" is not allowed");
      }
    }

    Param.prototype.children = ['name', 'value'];

    Param.prototype.compileToFragments = function(o) {
      return this.name.compileToFragments(o, LEVEL_LIST);
    };

    Param.prototype.asReference = function(o) {
      var node;
      if (this.reference) {
        return this.reference;
      }
      node = this.name;
      if (node["this"]) {
        node = node.properties[0].name;
        if (node.value.reserved) {
          node = new Literal(o.scope.freeVariable(node.value));
        }
      } else if (node.isComplex()) {
        node = new Literal(o.scope.freeVariable('arg'));
      }
      node = new Value(node);
      if (this.splat) {
        node = new Splat(node);
      }
      node.updateLocationDataIfMissing(this.locationData);
      return this.reference = node;
    };

    Param.prototype.isComplex = function() {
      return this.name.isComplex();
    };

    Param.prototype.eachName = function(iterator, name) {
      var atParam, node, obj, _i, _len, _ref2;
      if (name == null) {
        name = this.name;
      }
      atParam = function(obj) {
        var node;
        node = obj.properties[0].name;
        if (!node.value.reserved) {
          return iterator(node.value, node);
        }
      };
      if (name instanceof Literal) {
        return iterator(name.value, name);
      }
      if (name instanceof Value) {
        return atParam(name);
      }
      _ref2 = name.objects;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        obj = _ref2[_i];
        if (obj instanceof Assign) {
          this.eachName(iterator, obj.value.unwrap());
        } else if (obj instanceof Splat) {
          node = obj.name.unwrap();
          iterator(node.value, node);
        } else if (obj instanceof Value) {
          if (obj.isArray() || obj.isObject()) {
            this.eachName(iterator, obj.base);
          } else if (obj["this"]) {
            atParam(obj);
          } else {
            iterator(obj.base.value, obj.base);
          }
        } else if (!(obj instanceof Expansion)) {
          obj.error("illegal parameter " + (obj.compile()));
        }
      }
    };

    return Param;

  })(Base);

  exports.Splat = Splat = (function(_super) {
    __extends(Splat, _super);

    Splat.prototype.children = ['name'];

    Splat.prototype.isAssignable = YES;

    function Splat(name) {
      Splat.__super__.constructor.call(this);
      this.name = name.compile ? name : new Literal(name);
    }

    Splat.prototype.assigns = function(name) {
      return this.name.assigns(name);
    };

    Splat.prototype.compileToFragments = function(o) {
      return this.name.compileToFragments(o);
    };

    Splat.prototype.unwrap = function() {
      return this.name;
    };

    Splat.compileSplattedArray = function(o, list, apply) {
      var args, base, compiledNode, concatPart, fragments, i, index, node, _i, _len;
      index = -1;
      while ((node = list[++index]) && !(node instanceof Splat)) {
        continue;
      }
      if (index >= list.length) {
        return [];
      }
      if (list.length === 1) {
        node = list[0];
        fragments = node.compileToFragments(o, LEVEL_LIST);
        if (apply) {
          return fragments;
        }
        return [].concat(node.makeCode("" + (utility('slice')) + ".call("), fragments, node.makeCode(")"));
      }
      args = list.slice(index);
      for (i = _i = 0, _len = args.length; _i < _len; i = ++_i) {
        node = args[i];
        compiledNode = node.compileToFragments(o, LEVEL_LIST);
        args[i] = node instanceof Splat ? [].concat(node.makeCode("" + (utility('slice')) + ".call("), compiledNode, node.makeCode(")")) : [].concat(node.makeCode("["), compiledNode, node.makeCode("]"));
      }
      if (index === 0) {
        node = list[0];
        concatPart = node.joinFragmentArrays(args.slice(1), ', ');
        return args[0].concat(node.makeCode(".concat("), concatPart, node.makeCode(")"));
      }
      base = (function() {
        var _j, _len1, _ref2, _results;
        _ref2 = list.slice(0, index);
        _results = [];
        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
          node = _ref2[_j];
          _results.push(node.compileToFragments(o, LEVEL_LIST));
        }
        return _results;
      })();
      base = list[0].joinFragmentArrays(base, ', ');
      concatPart = list[index].joinFragmentArrays(args, ', ');
      return [].concat(list[0].makeCode("["), base, list[index].makeCode("].concat("), concatPart, (last(list)).makeCode(")"));
    };

    Splat.prototype.icedToSlot = function(i) {
      return new Slot(i, new Value(this.name), null, true);
    };

    return Splat;

  })(Base);

  exports.Expansion = Expansion = (function(_super) {
    __extends(Expansion, _super);

    function Expansion() {
      return Expansion.__super__.constructor.apply(this, arguments);
    }

    Expansion.prototype.isComplex = NO;

    Expansion.prototype.compileNode = function(o) {
      return this.error('Expansion must be used inside a destructuring assignment or parameter list');
    };

    Expansion.prototype.asReference = function(o) {
      return this;
    };

    Expansion.prototype.eachName = function(iterator) {};

    return Expansion;

  })(Base);

  exports.While = While = (function(_super) {
    __extends(While, _super);

    function While(condition, options) {
      this.condition = (options != null ? options.invert : void 0) ? condition.invert() : condition;
      this.guard = options != null ? options.guard : void 0;
    }

    While.prototype.children = ['condition', 'guard', 'body'];

    While.prototype.isStatement = YES;

    While.prototype.isLoop = YES;

    While.prototype.makeReturn = function(res) {
      if (res) {
        return While.__super__.makeReturn.apply(this, arguments);
      } else {
        this.returns = !this.jumps({
          loop: true
        });
        return this;
      }
    };

    While.prototype.addBody = function(body) {
      this.body = body;
      return this;
    };

    While.prototype.jumps = function() {
      var expressions, jumpNode, node, _i, _len;
      expressions = this.body.expressions;
      if (!expressions.length) {
        return false;
      }
      for (_i = 0, _len = expressions.length; _i < _len; _i++) {
        node = expressions[_i];
        if (jumpNode = node.jumps({
          loop: true
        })) {
          return jumpNode;
        }
      }
      return false;
    };

    While.prototype.compileNode = function(o) {
      var answer, body, rvar, set;
      this.condition.icedStatementAssertion();
      if (this.icedNodeFlag) {
        return this.icedCompileIced(o);
      }
      o.indent += TAB;
      set = '';
      body = this.body;
      if (body.isEmpty()) {
        body = this.makeCode('');
      } else {
        if (this.returns) {
          body.makeReturn(rvar = o.scope.freeVariable('results'));
          set = "" + this.tab + rvar + " = [];\n";
        }
        if (this.guard) {
          if (body.expressions.length > 1) {
            body.expressions.unshift(new If((new Parens(this.guard)).invert(), new Literal("continue")));
          } else {
            if (this.guard) {
              body = Block.wrap([new If(this.guard, body)]);
            }
          }
        }
        body = [].concat(this.makeCode("\n"), body.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab));
      }
      answer = [].concat(this.makeCode(set + this.tab + "while ("), this.condition.compileToFragments(o, LEVEL_PAREN), this.makeCode(") {"), body, this.makeCode("}"));
      if (this.returns) {
        if (this.icedHasAutocbFlag) {
          answer.push(this.makeCode("\n" + this.tab + iced["const"].autocb + "(" + rvar + ");"));
          answer.push(this.makeCode("\n" + this.tab + "return;"));
        } else {
          answer.push(this.makeCode("\n" + this.tab + "return " + rvar + ";"));
        }
      }
      return answer;
    };

    While.prototype.icedWrap = function(d) {
      var body, break_assign, break_id, cond, condition, continue_assign, continue_block, continue_block_inner, continue_body, continue_fn, continue_id, guard_if, k_id, k_param, next_assign, next_id, outStatements, top_assign, top_block, top_body, top_call, top_func, top_id, top_statements, tramp;
      condition = d.condition;
      body = d.body;
      outStatements = [];
      top_id = new Value(new Literal(iced["const"].t_while));
      k_id = new Value(new Literal(iced["const"].k));
      k_param = new Param(new Literal(iced["const"].k));
      break_id = new Value(new Literal(iced["const"].b_while));
      break_assign = new Assign(break_id, k_id, null, {
        icedlocal: true
      });
      continue_id = new Value(new Literal(iced["const"].c_while));
      continue_block_inner = new Block([new Call(top_id, [k_id])]);
      if (d.step) {
        continue_block_inner.unshift(d.step);
      }
      continue_fn = new Code([], continue_block_inner);
      tramp = new Value(new Literal(iced["const"].ns));
      tramp.add(new Access(new Value(new Literal(iced["const"].trampoline))));
      continue_block = new Block([new Call(tramp, [continue_fn])]);
      continue_body = new Code([], continue_block, 'icedgen');
      continue_assign = new Assign(continue_id, continue_body, null, {
        icedlocal: true
      });
      next_id = new Value(new Literal(iced["const"].n_while));
      next_assign = new Assign(next_id, continue_id, null, {
        icedlocal: true
      });
      cond = new If(condition.invert(), new Block([new Call(break_id, [])]));
      if (d.guard) {
        continue_block = new Block([new Call(continue_id, [])]);
        guard_if = new If(d.guard, body);
        guard_if.addElse(continue_block);
        cond.addElse(new Block([d.pre_body, guard_if]));
      } else {
        cond.addElse(new Block([d.pre_body, body]));
      }
      top_body = new Block([break_assign, continue_assign, next_assign, cond]);
      top_func = new Code([k_param], top_body, 'icedgen');
      top_assign = new Assign(top_id, top_func, null, {
        icedlocal: true
      });
      top_call = new Call(top_id, [k_id]);
      top_statements = [];
      if (d.init) {
        top_statements = top_statements.concat(d.init);
      }
      top_statements = top_statements.concat([top_assign, top_call]);
      return top_block = new Block(top_statements);
    };

    While.prototype.icedCallContinuation = function() {
      return this.body.icedThreadReturn(new IcedTailCall(iced["const"].n_while));
    };

    While.prototype.icedCompileIced = function(o) {
      var b, opts;
      opts = {
        condition: this.condition,
        body: this.body,
        guard: this.guard
      };
      b = this.icedWrap(opts);
      return b.compileNode(o);
    };

    return While;

  })(Base);

  exports.Op = Op = (function(_super) {
    var CONVERSIONS, INVERSIONS;

    __extends(Op, _super);

    function Op(op, first, second, flip) {
      Op.__super__.constructor.call(this);
      if (op === 'in') {
        return new In(first, second);
      }
      if (op === 'do') {
        return this.generateDo(first);
      }
      if (op === 'new') {
        if (first instanceof Call && !first["do"] && !first.isNew) {
          return first.newInstance();
        }
        if (first instanceof Code && first.bound || first["do"]) {
          first = new Parens(first);
        }
      }
      this.operator = CONVERSIONS[op] || op;
      this.first = first;
      this.second = second;
      this.flip = !!flip;
      return this;
    }

    CONVERSIONS = {
      '==': '===',
      '!=': '!==',
      'of': 'in',
      'yieldfrom': 'yield*'
    };

    INVERSIONS = {
      '!==': '===',
      '===': '!=='
    };

    Op.prototype.children = ['first', 'second'];

    Op.prototype.isSimpleNumber = NO;

    Op.prototype.isYield = function() {
      var _ref2;
      return (_ref2 = this.operator) === 'yield' || _ref2 === 'yield*';
    };

    Op.prototype.isUnary = function() {
      return !this.second;
    };

    Op.prototype.isComplex = function() {
      var _ref2;
      return !(this.isUnary() && ((_ref2 = this.operator) === '+' || _ref2 === '-')) || this.first.isComplex();
    };

    Op.prototype.isChainable = function() {
      var _ref2;
      return (_ref2 = this.operator) === '<' || _ref2 === '>' || _ref2 === '>=' || _ref2 === '<=' || _ref2 === '===' || _ref2 === '!==';
    };

    Op.prototype.invert = function() {
      var allInvertable, curr, fst, op, _ref2;
      if (this.isChainable() && this.first.isChainable()) {
        allInvertable = true;
        curr = this;
        while (curr && curr.operator) {
          allInvertable && (allInvertable = curr.operator in INVERSIONS);
          curr = curr.first;
        }
        if (!allInvertable) {
          return new Parens(this).invert();
        }
        curr = this;
        while (curr && curr.operator) {
          curr.invert = !curr.invert;
          curr.operator = INVERSIONS[curr.operator];
          curr = curr.first;
        }
        return this;
      } else if (op = INVERSIONS[this.operator]) {
        this.operator = op;
        if (this.first.unwrap() instanceof Op) {
          this.first.invert();
        }
        return this;
      } else if (this.second) {
        return new Parens(this).invert();
      } else if (this.operator === '!' && (fst = this.first.unwrap()) instanceof Op && ((_ref2 = fst.operator) === '!' || _ref2 === 'in' || _ref2 === 'instanceof')) {
        return fst;
      } else {
        return new Op('!', this);
      }
    };

    Op.prototype.unfoldSoak = function(o) {
      var _ref2;
      return ((_ref2 = this.operator) === '++' || _ref2 === '--' || _ref2 === 'delete') && unfoldSoak(o, this, 'first');
    };

    Op.prototype.generateDo = function(exp) {
      var call, func, param, passedParams, ref, _i, _len, _ref2;
      passedParams = [];
      func = exp instanceof Assign && (ref = exp.value.unwrap()) instanceof Code ? ref : exp;
      _ref2 = func.params || [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        if (param.value) {
          passedParams.push(param.value);
          delete param.value;
        } else {
          passedParams.push(param);
        }
      }
      call = new Call(exp, passedParams);
      call["do"] = true;
      return call;
    };

    Op.prototype.compileNode = function(o) {
      var answer, isChain, lhs, rhs, _ref2, _ref3;
      isChain = this.isChainable() && this.first.isChainable();
      if (!isChain) {
        this.first.front = this.front;
      }
      if (this.operator === 'delete' && o.scope.check(this.first.unwrapAll().value)) {
        this.error('delete operand may not be argument or var');
      }
      if (((_ref2 = this.operator) === '--' || _ref2 === '++') && (_ref3 = this.first.unwrapAll().value, __indexOf.call(STRICT_PROSCRIBED, _ref3) >= 0)) {
        this.error("cannot increment/decrement \"" + (this.first.unwrapAll().value) + "\"");
      }
      if (this.isYield()) {
        return this.compileYield(o);
      }
      if (this.isUnary()) {
        return this.compileUnary(o);
      }
      if (isChain) {
        return this.compileChain(o);
      }
      switch (this.operator) {
        case '?':
          return this.compileExistence(o);
        case '**':
          return this.compilePower(o);
        case '//':
          return this.compileFloorDivision(o);
        case '%%':
          return this.compileModulo(o);
        default:
          lhs = this.first.compileToFragments(o, LEVEL_OP);
          rhs = this.second.compileToFragments(o, LEVEL_OP);
          answer = [].concat(lhs, this.makeCode(" " + this.operator + " "), rhs);
          if (o.level <= LEVEL_OP) {
            return answer;
          } else {
            return this.wrapInBraces(answer);
          }
      }
    };

    Op.prototype.compileChain = function(o) {
      var fragments, fst, shared, _ref2;
      _ref2 = this.first.second.cache(o), this.first.second = _ref2[0], shared = _ref2[1];
      fst = this.first.compileToFragments(o, LEVEL_OP);
      fragments = fst.concat(this.makeCode(" " + (this.invert ? '&&' : '||') + " "), shared.compileToFragments(o), this.makeCode(" " + this.operator + " "), this.second.compileToFragments(o, LEVEL_OP));
      return this.wrapInBraces(fragments);
    };

    Op.prototype.compileExistence = function(o) {
      var fst, ref;
      if (this.first.isComplex()) {
        ref = new Literal(o.scope.freeVariable('ref'));
        fst = new Parens(new Assign(ref, this.first));
      } else {
        fst = this.first;
        ref = fst;
      }
      return new If(new Existence(fst), ref, {
        type: 'if'
      }).addElse(this.second).compileToFragments(o);
    };

    Op.prototype.compileUnary = function(o) {
      var op, parts, plusMinus;
      parts = [];
      op = this.operator;
      parts.push([this.makeCode(op)]);
      if (op === '!' && this.first instanceof Existence) {
        this.first.negated = !this.first.negated;
        return this.first.compileToFragments(o);
      }
      if (o.level >= LEVEL_ACCESS) {
        return (new Parens(this)).compileToFragments(o);
      }
      plusMinus = op === '+' || op === '-';
      if ((op === 'new' || op === 'typeof' || op === 'delete') || plusMinus && this.first instanceof Op && this.first.operator === op) {
        parts.push([this.makeCode(' ')]);
      }
      if ((plusMinus && this.first instanceof Op) || (op === 'new' && this.first.isStatement(o))) {
        this.first = new Parens(this.first);
      }
      parts.push(this.first.compileToFragments(o, LEVEL_OP));
      if (this.flip) {
        parts.reverse();
      }
      return this.joinFragmentArrays(parts, '');
    };

    Op.prototype.compileYield = function(o) {
      var op, parts;
      parts = [];
      op = this.operator;
      if (o.scope.parent == null) {
        this.error('yield statements must occur within a function generator.');
      }
      if (__indexOf.call(Object.keys(this.first), 'expression') >= 0) {
        if (this.first.expression != null) {
          parts.push(this.first.expression.compileToFragments(o, LEVEL_OP));
        }
      } else {
        parts.push([this.makeCode("(" + op + " ")]);
        parts.push(this.first.compileToFragments(o, LEVEL_OP));
        parts.push([this.makeCode(")")]);
      }
      return this.joinFragmentArrays(parts, '');
    };

    Op.prototype.compilePower = function(o) {
      var pow;
      pow = new Value(new Literal('Math'), [new Access(new Literal('pow'))]);
      return new Call(pow, [this.first, this.second]).compileToFragments(o);
    };

    Op.prototype.compileFloorDivision = function(o) {
      var div, floor;
      floor = new Value(new Literal('Math'), [new Access(new Literal('floor'))]);
      div = new Op('/', this.first, this.second);
      return new Call(floor, [div]).compileToFragments(o);
    };

    Op.prototype.compileModulo = function(o) {
      var mod;
      mod = new Value(new Literal(utility('modulo')));
      return new Call(mod, [this.first, this.second]).compileToFragments(o);
    };

    Op.prototype.toString = function(idt) {
      return Op.__super__.toString.call(this, idt, this.constructor.name + ' ' + this.operator);
    };

    Op.prototype.icedWrapContinuation = function() {
      return this.icedCallContinuationFlag;
    };

    return Op;

  })(Base);

  exports.In = In = (function(_super) {
    __extends(In, _super);

    function In(object, array) {
      this.object = object;
      this.array = array;
      In.__super__.constructor.call(this);
    }

    In.prototype.children = ['object', 'array'];

    In.prototype.invert = NEGATE;

    In.prototype.compileNode = function(o) {
      var hasSplat, obj, _i, _len, _ref2;
      if (this.array instanceof Value && this.array.isArray() && this.array.base.objects.length) {
        _ref2 = this.array.base.objects;
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          obj = _ref2[_i];
          if (!(obj instanceof Splat)) {
            continue;
          }
          hasSplat = true;
          break;
        }
        if (!hasSplat) {
          return this.compileOrTest(o);
        }
      }
      return this.compileLoopTest(o);
    };

    In.prototype.compileOrTest = function(o) {
      var cmp, cnj, i, item, ref, sub, tests, _i, _len, _ref2, _ref3, _ref4;
      _ref2 = this.object.cache(o, LEVEL_OP), sub = _ref2[0], ref = _ref2[1];
      _ref3 = this.negated ? [' !== ', ' && '] : [' === ', ' || '], cmp = _ref3[0], cnj = _ref3[1];
      tests = [];
      _ref4 = this.array.base.objects;
      for (i = _i = 0, _len = _ref4.length; _i < _len; i = ++_i) {
        item = _ref4[i];
        if (i) {
          tests.push(this.makeCode(cnj));
        }
        tests = tests.concat((i ? ref : sub), this.makeCode(cmp), item.compileToFragments(o, LEVEL_ACCESS));
      }
      if (o.level < LEVEL_OP) {
        return tests;
      } else {
        return this.wrapInBraces(tests);
      }
    };

    In.prototype.compileLoopTest = function(o) {
      var fragments, ref, sub, _ref2;
      _ref2 = this.object.cache(o, LEVEL_LIST), sub = _ref2[0], ref = _ref2[1];
      fragments = [].concat(this.makeCode(utility('indexOf') + ".call("), this.array.compileToFragments(o, LEVEL_LIST), this.makeCode(", "), ref, this.makeCode(") " + (this.negated ? '< 0' : '>= 0')));
      if (fragmentsToText(sub) === fragmentsToText(ref)) {
        return fragments;
      }
      fragments = sub.concat(this.makeCode(', '), fragments);
      if (o.level < LEVEL_LIST) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    In.prototype.toString = function(idt) {
      return In.__super__.toString.call(this, idt, this.constructor.name + (this.negated ? '!' : ''));
    };

    return In;

  })(Base);

  exports.Slot = Slot = (function(_super) {
    __extends(Slot, _super);

    function Slot(index, value, suffix, splat) {
      Slot.__super__.constructor.call(this);
      this.index = index;
      this.value = value;
      this.suffix = suffix;
      this.splat = splat;
      this.access = null;
    }

    Slot.prototype.addAccess = function(a) {
      this.access = a;
      return this;
    };

    Slot.prototype.children = ['value', 'suffix'];

    return Slot;

  })(Base);

  exports.Defer = Defer = (function(_super) {
    __extends(Defer, _super);

    function Defer(args, lineno) {
      var a, i;
      this.lineno = lineno;
      Defer.__super__.constructor.call(this);
      this.slots = flatten((function() {
        var _i, _len, _results;
        _results = [];
        for (i = _i = 0, _len = args.length; _i < _len; i = ++_i) {
          a = args[i];
          _results.push(a.icedToSlot(i));
        }
        return _results;
      })());
      this.params = [];
      this.vars = [];
      this.custom = false;
    }

    Defer.prototype.children = ['slots'];

    Defer.prototype.setCustom = function() {
      this.custom = true;
      return this;
    };

    Defer.prototype.newParam = function() {
      var l;
      l = "" + iced["const"].slot + "_" + (this.params.length + 1);
      this.params.push(new Param(new Literal(l)));
      return new Value(new Literal(l));
    };

    Defer.prototype.makeAssignFn = function(o) {
      var a, args, assign, assignments, block, call, func, i, i_lit, inner_fn, lit, outer_block, outer_fn, prop, s, slot, _i, _len, _ref2;
      if (this.slots.length === 0) {
        return null;
      }
      assignments = [];
      args = [];
      i = 0;
      _ref2 = this.slots;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        s = _ref2[_i];
        i = s.index;
        a = new Value(new Literal("arguments"));
        i_lit = new Value(new Literal(i));
        if (s.splat) {
          func = new Value(new Literal(utility('slice')));
          func.add(new Access(new Value(new Literal('call'))));
          call = new Call(func, [a, i_lit]);
          slot = s.value;
          this.vars.push(slot);
          assign = new Assign(slot, call);
        } else {
          a.add(new Index(i_lit));
          if (s.access) {
            a.add(s.access);
          }
          if (!s.suffix) {
            lit = s.value.compile(o, LEVEL_TOP);
            if (lit === "_") {
              slot = new Value(new Literal(iced["const"].deferrals));
              slot.add(new Access(new Value(new Literal(iced["const"].retslot))));
            } else {
              slot = s.value;
              this.vars.push(slot);
            }
          } else {
            args.push(s.value);
            slot = this.newParam();
            if (s.suffix instanceof Index) {
              prop = new Index(this.newParam());
              args.push(s.suffix.index);
            } else {
              prop = s.suffix;
            }
            slot.add(prop);
          }
          assign = new Assign(slot, a);
        }
        assignments.push(assign);
      }
      block = new Block(assignments);
      inner_fn = new Code([], block, 'icedgen');
      outer_block = new Block([new Return(inner_fn)]);
      outer_fn = new Code(this.params, outer_block, 'icedgen');
      return call = new Call(outer_fn, args);
    };

    Defer.prototype.transform = function(o) {
      var assign_fn, assignments, context_assign, context_lhs, context_rhs, fn, ln_assign, ln_lhs, ln_rhs, meth;
      meth = new Value(new Literal(iced["const"].defer_method));
      if (this.custom) {
        fn = meth;
      } else {
        fn = new Value(new Literal(iced["const"].deferrals));
        fn.add(new Access(meth));
      }
      assignments = [];
      if ((assign_fn = this.makeAssignFn(o))) {
        assignments.push(new Assign(new Value(new Literal(iced["const"].assign_fn)), assign_fn, "object"));
      }
      ln_lhs = new Value(new Literal(iced["const"].lineno));
      ln_rhs = new Value(new Literal(this.lineno));
      ln_assign = new Assign(ln_lhs, ln_rhs, "object");
      assignments.push(ln_assign);
      if (this.custom) {
        context_lhs = new Value(new Literal(iced["const"].context));
        context_rhs = new Value(new Literal(iced["const"].deferrals));
        context_assign = new Assign(context_lhs, context_rhs, "object");
        assignments.push(context_assign);
      }
      o = new Obj(assignments);
      return new Call(fn, [new Value(o)]);
    };

    Defer.prototype.compileNode = function(o) {
      var call, name, scope, v, _i, _len, _ref2;
      call = this.transform(o);
      _ref2 = this.vars;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        v = _ref2[_i];
        name = v.compile(o, LEVEL_LIST);
        scope = o.scope;
        scope.find(name, 'var');
      }
      return call.compileNode(o);
    };

    Defer.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      o.foundDefer = true;
      this.parentFunc = o.currFunc;
      return Defer.__super__.icedWalkAst.call(this, p, o);
    };

    return Defer;

  })(Base);

  quote_path_for_emission = function(n) {
    return '"' + n.replace(/\\/g, '\\\\') + '"';
  };

  quote_funcname_for_debug = function(n) {
    return '"' + n.replace(/["']/g, '') + '"';
  };

  require_top_dir = function() {
    return quote_path_for_emission(pathmod.join(__dirname, "..", ".."));
  };

  exports.Await = Await = (function(_super) {
    __extends(Await, _super);

    function Await(body) {
      this.body = body;
      Await.__super__.constructor.call(this);
    }

    Await.prototype.transform = function(o) {
      var assign, assignments, body, call, cb_assignment, cb_lhs, cb_rhs, cls, fn_assignment, fn_lhs, fn_rhs, func_assignment, func_lhs, func_rhs, lhs, meth, n, name, rhs, trace, _ref2, _ref3;
      body = this.body;
      name = iced["const"].deferrals;
      o.scope.add(name, 'var');
      lhs = new Value(new Literal(name));
      cls = new Value(new Literal(iced["const"].ns));
      cls.add(new Access(new Value(new Literal(iced["const"].Deferrals))));
      assignments = [];
      if (n = (_ref2 = this.parentFunc) != null ? _ref2.icedPassedDeferral : void 0) {
        cb_lhs = new Value(new Literal(iced["const"].parent));
        cb_rhs = new Value(new Literal(n));
        cb_assignment = new Assign(cb_lhs, cb_rhs, "object");
        assignments.push(cb_assignment);
      }
      if (o.filename != null) {
        fn_lhs = new Value(new Literal(iced["const"].filename));
        fn_rhs = new Value(new Literal(quote_path_for_emission(o.filename)));
        fn_assignment = new Assign(fn_lhs, fn_rhs, "object");
        assignments.push(fn_assignment);
      }
      if (n = (_ref3 = this.parentFunc) != null ? _ref3.icedTraceName() : void 0) {
        func_lhs = new Value(new Literal(iced["const"].funcname));
        func_rhs = new Value(new Literal(quote_funcname_for_debug(n)));
        func_assignment = new Assign(func_lhs, func_rhs, "object");
        assignments.push(func_assignment);
      }
      trace = new Obj(assignments, true);
      call = new Call(cls, [new Value(new Literal(iced["const"].k)), trace]);
      rhs = new Op("new", call);
      assign = new Assign(lhs, rhs);
      body.unshift(assign);
      meth = lhs.copy().add(new Access(new Value(new Literal(iced["const"].fulfill))));
      call = new Call(meth, []);
      body.push(call);
      return this.body = body;
    };

    Await.prototype.children = ['body'];

    Await.prototype.isStatement = function() {
      return YES;
    };

    Await.prototype.makeReturn = THIS;

    Await.prototype.compileNode = function(o) {
      this.transform(o);
      return this.body.compileNode(o);
    };

    Await.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      this.parentFunc = o.currFunc;
      p = p || this;
      this.icedParentAwait = p;
      Await.__super__.icedWalkAst.call(this, p, o);
      return this.icedNodeFlag = o.foundAwaitFunc = o.foundAwait = true;
    };

    return Await;

  })(Base);

  IcedRuntime = (function(_super) {
    __extends(IcedRuntime, _super);

    function IcedRuntime(foundDefer, foundAwait) {
      this.foundDefer = foundDefer;
      this.foundAwait = foundAwait;
      IcedRuntime.__super__.constructor.call(this);
    }

    IcedRuntime.prototype.compileNode = function(o, level) {
      var access, accessname, assign, call, callv, file, inc, interp, k, klass, lhs_vec, ns, qmodname, req, rhs, v, val, window_mode, window_val, _i, _j, _len, _len1, _ref2;
      this.expressions = [];
      v = o.runtime ? o.runtime : o.bare ? "none" : this.foundDefer ? "node" : "none";
      if (o.runtime && !this.foundDefer && !o.runforce) {
        v = "none";
      }
      window_mode = false;
      window_val = null;
      inc = null;
      inc = (function() {
        switch (v) {
          case "inline":
          case "window":
            if (v === "window") {
              window_mode = true;
            }
            if (window_mode) {
              window_val = new Value(new Literal(v));
            }
            return InlineRuntime.generate(window_val ? window_val.copy() : null);
          case "node":
          case "browserify":
          case "interp":
            interp = v === "interp";
            qmodname = interp ? require_top_dir() : "'iced-runtime'";
            accessname = iced["const"].ns;
            file = new Literal(qmodname);
            access = new Access(new Literal(accessname));
            req = new Value(new Literal("require"));
            call = new Call(req, [file]);
            callv = new Value(call);
            if (interp) {
              callv.add(access);
            }
            ns = new Value(new Literal(iced["const"].ns));
            return new Assign(ns, callv);
          case "none":
            return null;
          default:
            throw SyntaxError("unexpected flag IcedRuntime " + v);
        }
      })();
      if (inc) {
        this.push(inc);
      }
      if (this.foundAwait) {
        rhs = new Code([], new Block([]));
        lhs_vec = [];
        _ref2 = [iced["const"].k_noop, iced["const"].k];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          k = _ref2[_i];
          val = new Value(new Literal(k));
          if (window_val) {
            klass = window_val.copy();
            klass.add(new Access(val));
            val = klass;
          }
          lhs_vec.push(val);
        }
        assign = rhs;
        for (_j = 0, _len1 = lhs_vec.length; _j < _len1; _j++) {
          v = lhs_vec[_j];
          assign = new Assign(v, assign);
        }
        this.push(assign);
      }
      if (this.isEmpty()) {
        return [];
      } else {
        return IcedRuntime.__super__.compileNode.call(this, o);
      }
    };

    IcedRuntime.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      return IcedRuntime.__super__.icedWalkAst.call(this, p, o);
    };

    return IcedRuntime;

  })(Block);

  exports.Try = Try = (function(_super) {
    __extends(Try, _super);

    function Try(attempt, errorVariable, recovery, ensure) {
      this.attempt = attempt;
      this.errorVariable = errorVariable;
      this.recovery = recovery;
      this.ensure = ensure;
    }

    Try.prototype.children = ['attempt', 'recovery', 'ensure'];

    Try.prototype.isStatement = YES;

    Try.prototype.jumps = function(o) {
      var _ref2;
      return this.attempt.jumps(o) || ((_ref2 = this.recovery) != null ? _ref2.jumps(o) : void 0);
    };

    Try.prototype.makeReturn = function(res) {
      if (this.attempt) {
        this.attempt = this.attempt.makeReturn(res);
      }
      if (this.recovery) {
        this.recovery = this.recovery.makeReturn(res);
      }
      return this;
    };

    Try.prototype.compileNode = function(o) {
      var catchPart, ensurePart, placeholder, tryPart;
      o.indent += TAB;
      tryPart = this.attempt.compileToFragments(o, LEVEL_TOP);
      catchPart = this.recovery ? (placeholder = new Literal('_error'), this.errorVariable ? this.recovery.unshift(new Assign(this.errorVariable, placeholder)) : void 0, [].concat(this.makeCode(" catch ("), placeholder.compileToFragments(o), this.makeCode(") {\n"), this.recovery.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab + "}"))) : !(this.ensure || this.recovery) ? [this.makeCode(' catch (_error) {}')] : [];
      ensurePart = this.ensure ? [].concat(this.makeCode(" finally {\n"), this.ensure.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab + "}")) : [];
      return [].concat(this.makeCode("" + this.tab + "try {\n"), tryPart, this.makeCode("\n" + this.tab + "}"), catchPart, ensurePart);
    };

    return Try;

  })(Base);

  exports.Throw = Throw = (function(_super) {
    __extends(Throw, _super);

    function Throw(expression) {
      this.expression = expression;
      Throw.__super__.constructor.call(this);
    }

    Throw.prototype.children = ['expression'];

    Throw.prototype.isStatement = YES;

    Throw.prototype.jumps = NO;

    Throw.prototype.makeReturn = THIS;

    Throw.prototype.compileNode = function(o) {
      return [].concat(this.makeCode(this.tab + "throw "), this.expression.compileToFragments(o), this.makeCode(";"));
    };

    return Throw;

  })(Base);

  exports.Existence = Existence = (function(_super) {
    __extends(Existence, _super);

    function Existence(expression) {
      this.expression = expression;
      Existence.__super__.constructor.call(this);
    }

    Existence.prototype.children = ['expression'];

    Existence.prototype.invert = NEGATE;

    Existence.prototype.compileNode = function(o) {
      var cmp, cnj, code, _ref2;
      this.expression.front = this.front;
      code = this.expression.compile(o, LEVEL_OP);
      if (IDENTIFIER.test(code) && !o.scope.check(code)) {
        _ref2 = this.negated ? ['===', '||'] : ['!==', '&&'], cmp = _ref2[0], cnj = _ref2[1];
        code = "typeof " + code + " " + cmp + " \"undefined\" " + cnj + " " + code + " " + cmp + " null";
      } else {
        code = "" + code + " " + (this.negated ? '==' : '!=') + " null";
      }
      return [this.makeCode(o.level <= LEVEL_COND ? code : "(" + code + ")")];
    };

    return Existence;

  })(Base);

  exports.Parens = Parens = (function(_super) {
    __extends(Parens, _super);

    function Parens(body) {
      this.body = body;
      Parens.__super__.constructor.call(this);
    }

    Parens.prototype.children = ['body'];

    Parens.prototype.unwrap = function() {
      return this.body;
    };

    Parens.prototype.isComplex = function() {
      return this.body.isComplex();
    };

    Parens.prototype.compileNode = function(o) {
      var bare, expr, fragments;
      expr = this.body.unwrap();
      if (expr instanceof Value && expr.isAtomic()) {
        expr.front = this.front;
        return expr.compileToFragments(o);
      }
      fragments = expr.compileToFragments(o, LEVEL_PAREN);
      bare = o.level < LEVEL_OP && (expr instanceof Op || expr instanceof Call || (expr instanceof For && expr.returns));
      if (bare) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    return Parens;

  })(Base);

  exports.For = For = (function(_super) {
    __extends(For, _super);

    function For(body, source) {
      var _ref2;
      For.__super__.constructor.call(this);
      this.source = source.source, this.guard = source.guard, this.step = source.step, this.name = source.name, this.index = source.index;
      this.body = Block.wrap([body]);
      this.own = !!source.own;
      this.object = !!source.object;
      if (this.object) {
        _ref2 = [this.index, this.name], this.name = _ref2[0], this.index = _ref2[1];
      }
      if (this.index instanceof Value) {
        this.index.error('index cannot be a pattern matching expression');
      }
      this.range = this.source instanceof Value && this.source.base instanceof Range && !this.source.properties.length;
      this.pattern = this.name instanceof Value;
      if (this.range && this.index) {
        this.index.error('indexes do not apply to range loops');
      }
      if (this.range && this.pattern) {
        this.name.error('cannot pattern match over range loops');
      }
      if (this.own && !this.object) {
        this.name.error('cannot use own with for-in');
      }
      this.returns = false;
    }

    For.prototype.children = ['body', 'source', 'guard', 'step'];

    For.prototype.compileNode = function(o) {
      var body, bodyFragments, compare, compareDown, declare, declareDown, defPart, defPartFragments, down, forPartFragments, guardPart, idt1, increment, index, ivar, kvar, kvarAssign, lastJumps, lvar, name, namePart, ref, resultPart, returnResult, rvar, scope, source, step, stepNum, stepVar, svar, varPart, _ref2, _ref3;
      body = Block.wrap([this.body]);
      lastJumps = (_ref2 = last(body.expressions)) != null ? _ref2.jumps() : void 0;
      if (lastJumps && lastJumps instanceof Return) {
        this.returns = false;
      }
      source = this.range ? this.source.base : this.source;
      scope = o.scope;
      if (!this.pattern) {
        name = this.name && (this.name.compile(o, LEVEL_LIST));
      }
      index = this.index && (this.index.compile(o, LEVEL_LIST));
      if (name && !this.pattern) {
        scope.find(name);
      }
      if (index) {
        scope.find(index);
      }
      if (this.returns) {
        rvar = scope.freeVariable('results');
      }
      ivar = (this.object && index) || scope.freeVariable('i');
      kvar = (this.range && name) || index || ivar;
      kvarAssign = kvar !== ivar ? "" + kvar + " = " : "";
      if (this.step && !this.range) {
        _ref3 = this.cacheToCodeFragments(this.step.cache(o, LEVEL_LIST)), step = _ref3[0], stepVar = _ref3[1];
        stepNum = stepVar.match(NUMBER);
      }
      if (this.pattern) {
        name = ivar;
      }
      varPart = '';
      guardPart = '';
      defPart = '';
      idt1 = this.tab + TAB;
      source.icedStatementAssertion();
      if (this.icedNodeFlag) {
        return this.icedCompileIced(o, {
          stepVar: stepVar,
          body: body,
          kvar: kvar,
          guard: this.guard
        });
      }
      if (this.range) {
        forPartFragments = source.compileToFragments(merge(o, {
          index: ivar,
          name: name,
          step: this.step
        }));
      } else {
        svar = this.source.compile(o, LEVEL_LIST);
        if ((name || this.own) && !IDENTIFIER.test(svar)) {
          defPart += "" + this.tab + (ref = scope.freeVariable('ref')) + " = " + svar + ";\n";
          svar = ref;
        }
        if (name && !this.pattern) {
          namePart = "" + name + " = " + svar + "[" + kvar + "]";
        }
        if (!this.object) {
          if (step !== stepVar) {
            defPart += "" + this.tab + step + ";\n";
          }
          if (!(this.step && stepNum && (down = parseNum(stepNum[0]) < 0))) {
            lvar = scope.freeVariable('len');
          }
          declare = "" + kvarAssign + ivar + " = 0, " + lvar + " = " + svar + ".length";
          declareDown = "" + kvarAssign + ivar + " = " + svar + ".length - 1";
          compare = "" + ivar + " < " + lvar;
          compareDown = "" + ivar + " >= 0";
          if (this.step) {
            if (stepNum) {
              if (down) {
                compare = compareDown;
                declare = declareDown;
              }
            } else {
              compare = "" + stepVar + " > 0 ? " + compare + " : " + compareDown;
              declare = "(" + stepVar + " > 0 ? (" + declare + ") : " + declareDown + ")";
            }
            increment = "" + ivar + " += " + stepVar;
          } else {
            increment = "" + (kvar !== ivar ? "++" + ivar : "" + ivar + "++");
          }
          forPartFragments = [this.makeCode("" + declare + "; " + compare + "; " + kvarAssign + increment)];
        }
      }
      if (this.returns) {
        resultPart = "" + this.tab + rvar + " = [];\n";
        returnResult = this.icedHasAutocbFlag ? "\n" + this.tab + iced["const"].autocb + "(" + rvar + "); return;" : "\n" + this.tab + "return " + rvar + ";";
        body.makeReturn(rvar);
      }
      if (this.guard) {
        if (body.expressions.length > 1) {
          body.expressions.unshift(new If((new Parens(this.guard)).invert(), new Literal("continue")));
        } else {
          if (this.guard) {
            body = Block.wrap([new If(this.guard, body)]);
          }
        }
      }
      if (this.pattern) {
        body.expressions.unshift(new Assign(this.name, new Literal("" + svar + "[" + kvar + "]")));
      }
      defPartFragments = [].concat(this.makeCode(defPart), this.pluckDirectCall(o, body));
      if (namePart) {
        varPart = "\n" + idt1 + namePart + ";";
      }
      if (this.object) {
        forPartFragments = [this.makeCode("" + kvar + " in " + svar)];
        if (this.own) {
          guardPart = "\n" + idt1 + "if (!" + (utility('hasProp')) + ".call(" + svar + ", " + kvar + ")) continue;";
        }
      }
      bodyFragments = body.compileToFragments(merge(o, {
        indent: idt1
      }), LEVEL_TOP);
      if (bodyFragments && (bodyFragments.length > 0)) {
        bodyFragments = [].concat(this.makeCode("\n"), bodyFragments, this.makeCode("\n"));
      }
      return [].concat(defPartFragments, this.makeCode("" + (resultPart || '') + this.tab + "for ("), forPartFragments, this.makeCode(") {" + guardPart + varPart), bodyFragments, this.makeCode("" + this.tab + "}" + (returnResult || '')));
    };

    For.prototype.pluckDirectCall = function(o, body) {
      var base, defs, expr, fn, idx, ref, val, _i, _len, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8;
      defs = [];
      _ref2 = body.expressions;
      for (idx = _i = 0, _len = _ref2.length; _i < _len; idx = ++_i) {
        expr = _ref2[idx];
        expr = expr.unwrapAll();
        if (!(expr instanceof Call)) {
          continue;
        }
        val = (_ref3 = expr.variable) != null ? _ref3.unwrapAll() : void 0;
        if (!((val instanceof Code) || (val instanceof Value && ((_ref4 = val.base) != null ? _ref4.unwrapAll() : void 0) instanceof Code && val.properties.length === 1 && ((_ref5 = (_ref6 = val.properties[0].name) != null ? _ref6.value : void 0) === 'call' || _ref5 === 'apply')))) {
          continue;
        }
        fn = ((_ref7 = val.base) != null ? _ref7.unwrapAll() : void 0) || val;
        ref = new Literal(o.scope.freeVariable('fn'));
        base = new Value(ref);
        if (val.base) {
          _ref8 = [base, val], val.base = _ref8[0], base = _ref8[1];
        }
        body.expressions[idx] = new Call(base, expr.args);
        defs = defs.concat(this.makeCode(this.tab), new Assign(ref, fn).compileToFragments(o, LEVEL_TOP), this.makeCode(';\n'));
      }
      return defs;
    };

    For.prototype.icedCompileIced = function(o, d) {
      var a1, a2, a3, a4, a5, a_positive, a_stepVal, b, begin, body, condition, down, empty_arr, end, excl, guard, iname, init, init_step, is_positive, is_step_positive, ival, key, key_lit, key_val, keys, keys_access, keys_len, keys_val, kval, len, len_rhs, len_val, loop_body, loop_keys, loop_source, neg, pos, positive, pre_body, ref, ref_val, ref_val_copy, scope, source_access, start_rhs, step, stepNum, stepVal, stepVar, step_var, step_var_val, _, _ref2;
      body = d.body;
      condition = null;
      init = [];
      step = null;
      scope = o.scope;
      pre_body = new Block([]);
      if (this.object) {
        ref = scope.freeVariable('ref');
        ref_val = new Value(new Literal(ref));
        a1 = new Assign(ref_val, this.source);
        keys = scope.freeVariable('keys');
        keys_val = new Value(new Literal(keys));
        key = scope.freeVariable('k');
        key_lit = new Literal(key);
        key_val = new Value(key_lit);
        empty_arr = new Value(new Arr);
        loop_body = new Block([key_val]);
        loop_source = {
          object: true,
          name: key_lit,
          source: ref_val
        };
        loop_keys = new For(loop_body, loop_source);
        a2 = new Assign(keys_val, loop_keys);
        iname = scope.freeVariable('i');
        ival = new Value(new Literal(iname));
        a3 = new Assign(ival, new Value(new Literal(0)));
        init = [a1, a2, a3];
        keys_len = keys_val.copy();
        keys_len.add(new Access(new Value(new Literal("length"))));
        condition = new Op('<', ival, keys_len);
        step = new Op('++', ival);
        if (this.name) {
          source_access = ref_val.copy();
          source_access.add(new Index(this.index));
          a5 = new Assign(this.name, source_access);
          pre_body.unshift(a5);
        }
        keys_access = keys_val.copy();
        keys_access.add(new Index(ival));
        a4 = new Assign(this.index, keys_access);
        pre_body.unshift(a4);
      } else if (this.range) {
        if (!this.name) {
          this.name = new Literal(d.kvar);
        }
        begin = new Value(new Literal(o.scope.freeVariable("begin")));
        end = new Value(new Literal(o.scope.freeVariable("end")));
        positive = new Value(new Literal(o.scope.freeVariable("positive")));
        stepVal = new Value(new Literal(o.scope.freeVariable("step")));
        if (this.step) {
          a_stepVal = new Assign(stepVal, this.step);
          a_positive = new Assign(positive, new Op(">", stepVal, new Literal(0)), null, {
            icedlocal: true
          });
        } else {
          is_positive = new Op(">", end, begin);
          a_stepVal = new If(is_positive, new Assign(stepVal, new Literal(1)));
          a_stepVal.addElse(new Assign(stepVal, new Literal(-1)));
          a_positive = new Assign(positive, is_positive, null, {
            icedlocal: true
          });
        }
        step = new Op('+=', this.name, stepVal);
        excl = this.source.base.exclusive ? "=" : '';
        pos = new Op("&&", new Op("===", positive, new Literal(true)), new Op(">" + excl, this.name, this.source.base.to));
        neg = new Op("&&", new Op("===", positive, new Literal(false)), new Op("<" + excl, this.name, this.source.base.to));
        condition = new Op("||", new Parens(pos), new Parens(neg));
        condition = condition.invert();
        init = [
          new Assign(this.name, this.source.base.from), new Assign(begin, this.source.base.from, null, {
            icedlocal: true
          }), new Assign(end, this.source.base.to, null, {
            icedlocal: true
          }), a_stepVal, a_positive
        ];
      } else if (!this.range && this.name) {
        kval = new Value(new Literal(d.kvar));
        len = scope.freeVariable('len');
        ref = scope.freeVariable('ref');
        ref_val = new Value(new Literal(ref));
        len_val = new Value(new Literal(len));
        a1 = new Assign(ref_val, this.source);
        len_rhs = ref_val.copy().add(new Access(new Value(new Literal("length"))));
        a2 = new Assign(len_val, len_rhs);
        init = [a1, a2];
        if (!this.step) {
          a3 = new Assign(kval, new Literal(0));
          step = new Op('++', kval);
          condition = new Op('<', kval, len_val);
          init.push(a3);
        } else {
          _ref2 = this.cacheToCodeFragments(this.step.cache(o, LEVEL_LIST)), _ = _ref2[0], stepVar = _ref2[1];
          stepNum = stepVar.match(NUMBER);
          if (stepNum) {
            step = new Assign(kval, new Op('+', kval, this.step));
            down = parseNum(stepNum[0]) < 0;
            if (down) {
              a3 = new Assign(kval, new Op('-', len_val, new Literal(1)));
              condition = new Op('>=', kval, new Literal(0));
            } else {
              a3 = new Assign(kval, new Literal(0));
              condition = new Op('<', kval, len_val);
            }
            init.push(a3);
          } else {
            step_var = scope.freeVariable('step');
            step_var_val = new Value(new Literal(step_var));
            init_step = new Assign(step_var_val, new Value(this.step));
            is_step_positive = new Op('>', step_var_val, new Literal(0));
            start_rhs = new If(is_step_positive, new Value(new Literal(0)));
            start_rhs.addElse(new Op('-', len_val, new Literal(1)));
            step = new Assign(kval, new Op('+', kval, step_var_val));
            a3 = new Assign(kval, start_rhs);
            condition = new Op('&&', new Op('>=', kval, new Literal(0)), new Op('<', kval, len_val));
            init.push(init_step, a3);
          }
        }
        ref_val_copy = ref_val.copy();
        ref_val_copy.add(new Index(kval));
        a4 = new Assign(this.name, ref_val_copy);
        pre_body.unshift(a4);
      }
      guard = d.guard;
      b = this.icedWrap({
        condition: condition,
        body: body,
        init: init,
        step: step,
        guard: guard,
        pre_body: pre_body
      });
      return b.compileNode(o);
    };

    return For;

  })(While);

  exports.Switch = Switch = (function(_super) {
    __extends(Switch, _super);

    function Switch(subject, cases, otherwise) {
      this.subject = subject;
      this.cases = cases;
      this.otherwise = otherwise;
      Switch.__super__.constructor.call(this);
    }

    Switch.prototype.children = ['subject', 'cases', 'otherwise'];

    Switch.prototype.isStatement = YES;

    Switch.prototype.jumps = function(o) {
      var block, conds, jumpNode, _i, _len, _ref2, _ref3, _ref4;
      if (o == null) {
        o = {
          block: true
        };
      }
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], conds = _ref3[0], block = _ref3[1];
        if (jumpNode = block.jumps(o)) {
          return jumpNode;
        }
      }
      return (_ref4 = this.otherwise) != null ? _ref4.jumps(o) : void 0;
    };

    Switch.prototype.makeReturn = function(res) {
      var pair, _i, _len, _ref2, _ref3;
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        pair = _ref2[_i];
        pair[1].makeReturn(res);
      }
      if (res) {
        this.otherwise || (this.otherwise = new Block([new Literal('void 0')]));
      }
      if ((_ref3 = this.otherwise) != null) {
        _ref3.makeReturn(res);
      }
      return this;
    };

    Switch.prototype.compileNode = function(o) {
      var block, body, cond, conditions, expr, fragments, i, idt1, idt2, _i, _j, _len, _len1, _ref2, _ref3, _ref4;
      if (this.subject) {
        this.subject.icedStatementAssertion();
      }
      idt1 = o.indent + TAB;
      idt2 = o.indent = idt1 + TAB;
      fragments = [].concat(this.makeCode(this.tab + "switch ("), (this.subject ? this.subject.compileToFragments(o, LEVEL_PAREN) : this.makeCode("false")), this.makeCode(") {\n"));
      _ref2 = this.cases;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        _ref3 = _ref2[i], conditions = _ref3[0], block = _ref3[1];
        _ref4 = flatten([conditions]);
        for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
          cond = _ref4[_j];
          if (!this.subject) {
            cond = cond.invert();
          }
          fragments = fragments.concat(this.makeCode(idt1 + "case "), cond.compileToFragments(o, LEVEL_PAREN), this.makeCode(":\n"));
        }
        if ((body = block.compileToFragments(o, LEVEL_TOP)).length > 0) {
          fragments = fragments.concat(body, this.makeCode('\n'));
        }
        if (i === this.cases.length - 1 && !this.otherwise) {
          break;
        }
        expr = this.lastNonComment(block.expressions);
        if (expr instanceof Return || (expr instanceof Literal && expr.jumps() && expr.value !== 'debugger')) {
          continue;
        }
        fragments.push(cond.makeCode(idt2 + 'break;\n'));
      }
      if (this.otherwise && this.otherwise.expressions.length) {
        fragments.push.apply(fragments, [this.makeCode(idt1 + "default:\n")].concat(__slice.call(this.otherwise.compileToFragments(o, LEVEL_TOP)), [this.makeCode("\n")]));
      }
      fragments.push(this.makeCode(this.tab + '}'));
      return fragments;
    };

    Switch.prototype.icedCallContinuation = function() {
      var block, condition, _i, _len, _ref2, _ref3;
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], condition = _ref3[0], block = _ref3[1];
        block.icedThreadReturn();
      }
      if (this.otherwise != null) {
        return this.otherwise.icedThreadReturn();
      } else {
        return this.otherwise = new Block([new IcedTailCall]);
      }
    };

    return Switch;

  })(Base);

  exports.If = If = (function(_super) {
    __extends(If, _super);

    function If(condition, body, options) {
      this.body = body;
      if (options == null) {
        options = {};
      }
      If.__super__.constructor.call(this);
      this.condition = options.type === 'unless' ? condition.invert() : condition;
      this.elseBody = null;
      this.isChain = false;
      this.soak = options.soak;
    }

    If.prototype.children = ['condition', 'body', 'elseBody'];

    If.prototype.bodyNode = function() {
      var _ref2;
      return (_ref2 = this.body) != null ? _ref2.unwrap() : void 0;
    };

    If.prototype.elseBodyNode = function() {
      var _ref2;
      return (_ref2 = this.elseBody) != null ? _ref2.unwrap() : void 0;
    };

    If.prototype.addElse = function(elseBody) {
      if (this.isChain) {
        this.elseBodyNode().addElse(elseBody);
      } else {
        this.isChain = elseBody instanceof If;
        this.elseBody = this.ensureBlock(elseBody);
        this.elseBody.updateLocationDataIfMissing(elseBody.locationData);
      }
      return this;
    };

    If.prototype.isStatement = function(o) {
      var _ref2;
      return (o != null ? o.level : void 0) === LEVEL_TOP || this.bodyNode().isStatement(o) || ((_ref2 = this.elseBodyNode()) != null ? _ref2.isStatement(o) : void 0);
    };

    If.prototype.jumps = function(o) {
      var _ref2;
      return this.body.jumps(o) || ((_ref2 = this.elseBody) != null ? _ref2.jumps(o) : void 0);
    };

    If.prototype.compileNode = function(o) {
      this.condition.icedStatementAssertion();
      if (this.isStatement(o || this.icedIsCpsPivot())) {
        return this.compileStatement(o);
      } else {
        return this.compileExpression(o);
      }
    };

    If.prototype.makeReturn = function(res) {
      if (res) {
        this.elseBody || (this.elseBody = new Block([new Literal('void 0')]));
      }
      this.body && (this.body = new Block([this.body.makeReturn(res)]));
      this.elseBody && (this.elseBody = new Block([this.elseBody.makeReturn(res)]));
      return this;
    };

    If.prototype.ensureBlock = function(node) {
      if (node instanceof Block) {
        return node;
      } else {
        return new Block([node]);
      }
    };

    If.prototype.compileStatement = function(o) {
      var answer, body, child, cond, exeq, ifPart, indent;
      child = del(o, 'chainChild');
      exeq = del(o, 'isExistentialEquals');
      if (exeq) {
        return new If(this.condition.invert(), this.elseBodyNode(), {
          type: 'if'
        }).compileToFragments(o);
      }
      indent = o.indent + TAB;
      cond = this.condition.compileToFragments(o, LEVEL_PAREN);
      body = this.ensureBlock(this.body).compileToFragments(merge(o, {
        indent: indent
      }));
      ifPart = [].concat(this.makeCode("if ("), cond, this.makeCode(") {\n"), body, this.makeCode("\n" + this.tab + "}"));
      if (!child) {
        ifPart.unshift(this.makeCode(this.tab));
      }
      if (!this.elseBody) {
        return ifPart;
      }
      answer = ifPart.concat(this.makeCode(' else '));
      if (this.isChain) {
        o.chainChild = true;
        answer = answer.concat(this.elseBody.unwrap().compileToFragments(o, LEVEL_TOP));
      } else {
        answer = answer.concat(this.makeCode("{\n"), this.elseBody.compileToFragments(merge(o, {
          indent: indent
        }), LEVEL_TOP), this.makeCode("\n" + this.tab + "}"));
      }
      return answer;
    };

    If.prototype.compileExpression = function(o) {
      var alt, body, cond, fragments;
      cond = this.condition.compileToFragments(o, LEVEL_COND);
      body = this.bodyNode().compileToFragments(o, LEVEL_LIST);
      alt = this.elseBodyNode() ? this.elseBodyNode().compileToFragments(o, LEVEL_LIST) : [this.makeCode('void 0')];
      fragments = cond.concat(this.makeCode(" ? "), body, this.makeCode(" : "), alt);
      if (o.level >= LEVEL_COND) {
        return this.wrapInBraces(fragments);
      } else {
        return fragments;
      }
    };

    If.prototype.unfoldSoak = function() {
      return this.soak && this;
    };

    If.prototype.icedCallContinuation = function() {
      if (this.elseBody) {
        this.elseBody.icedThreadReturn();
        this.isChain = false;
      } else {
        this.addElse(new IcedTailCall);
      }
      return this.body.icedThreadReturn();
    };

    return If;

  })(Base);

  Closure = {
    wrap: function(expressions, statement, noReturn) {
      var args, argumentsNode, call, func, meth;
      if (expressions.jumps()) {
        return expressions;
      }
      func = new Code([], Block.wrap([expressions]));
      args = [];
      argumentsNode = expressions.contains(this.isLiteralArguments);
      if (argumentsNode && expressions.classBody) {
        argumentsNode.error("Class bodies shouldn't reference arguments");
      }
      if (argumentsNode || expressions.contains(this.isLiteralThis)) {
        meth = new Literal(argumentsNode ? 'apply' : 'call');
        args = [new Literal('this')];
        if (argumentsNode) {
          args.push(new Literal('arguments'));
        }
        func = new Value(func, [new Access(meth)]);
      }
      func.noReturn = noReturn;
      call = new Call(func, args);
      if (statement) {
        return Block.wrap([call]);
      } else {
        return call;
      }
    },
    isLiteralArguments: function(node) {
      return node instanceof Literal && node.value === 'arguments' && !node.asKey;
    },
    isLiteralThis: function(node) {
      return (node instanceof Literal && node.value === 'this' && !node.asKey) || (node instanceof Code && node.bound) || (node instanceof Call && node.isSuper);
    }
  };

  unfoldSoak = function(o, parent, name) {
    var ifn;
    if (!(ifn = parent[name].unfoldSoak(o))) {
      return;
    }
    parent[name] = ifn.body;
    ifn.body = new Value(parent);
    return ifn;
  };

  CpsCascade = {
    wrap: function(statement, rest, returnValue, o) {
      var args, block, call, cont, e, func;
      func = new Code([new Param(new Literal(iced["const"].k))], Block.wrap([statement]), 'icedgen');
      args = [];
      if (returnValue) {
        returnValue.bindName(o);
        args.push(returnValue);
      }
      block = Block.wrap([rest]);
      if ((e = block.icedGetSingle()) && e instanceof IcedTailCall && e.canInline()) {
        cont = e.extractFunc();
      } else {
        cont = new Code(args, block, 'icedgen');
      }
      call = new Call(func, [cont]);
      return new Block([call]);
    }
  };

  IcedTailCall = (function(_super) {
    __extends(IcedTailCall, _super);

    function IcedTailCall(func, val) {
      this.func = func;
      if (val == null) {
        val = null;
      }
      IcedTailCall.__super__.constructor.call(this);
      if (!this.func) {
        this.func = iced["const"].k;
      }
      this.value = val;
    }

    IcedTailCall.prototype.children = ['value'];

    IcedTailCall.prototype.assignValue = function(v) {
      return this.value = v;
    };

    IcedTailCall.prototype.canInline = function() {
      return !this.value || this.value instanceof IcedReturnValue;
    };

    IcedTailCall.prototype.literalFunc = function() {
      return new Literal(this.func);
    };

    IcedTailCall.prototype.extractFunc = function() {
      return new Value(this.literalFunc());
    };

    IcedTailCall.prototype.compileNode = function(o) {
      var args, f, out;
      f = this.literalFunc();
      out = o.level === LEVEL_TOP ? this.value ? new Block([this.value, new Call(f)]) : new Call(f) : (args = this.value ? [this.value] : [], new Call(f, args));
      return out.compileNode(o);
    };

    return IcedTailCall;

  })(Base);

  IcedReturnValue = (function(_super) {
    __extends(IcedReturnValue, _super);

    IcedReturnValue.counter = 0;

    function IcedReturnValue() {
      IcedReturnValue.__super__.constructor.call(this, null, null, false);
    }

    IcedReturnValue.prototype.bindName = function(o) {
      var l;
      l = "" + (o.scope.freeVariable(iced["const"].param, false)) + "_" + (IcedReturnValue.counter++);
      return this.name = new Literal(l);
    };

    IcedReturnValue.prototype.compile = function(o) {
      if (!this.name) {
        this.bindName(o);
      }
      return IcedReturnValue.__super__.compile.call(this, o);
    };

    return IcedReturnValue;

  })(Param);

  InlineRuntime = {
    generate: function(ns_window) {
      var a1, a2, af, apply_call, assignments, body, call_meth, cn, cnt, cnt_member, constructor_assign, constructor_body, constructor_code, constructor_name, constructor_params, decr, defer_assign, defer_body, defer_code, defer_name, defer_params, dp, dp_value, fn, fn_assign, fn_code, fn_name, if_body, if_cond, if_expr, inc, inner_body, inner_code, inner_params, ip, k, k_member, klass, klass_assign, my_apply, my_if, my_null, ns, ns_obj, ns_val, obj, outer_block, p1, ret_member, tr_assign, tr_block, tr_code, tr_name, tr_params, _fulfill_assign, _fulfill_body, _fulfill_call, _fulfill_code, _fulfill_method, _fulfill_name;
      k = new Literal("continuation");
      cnt = new Literal("count");
      cn = new Value(new Literal(iced["const"].Deferrals));
      ns = new Value(new Literal(iced["const"].ns));
      if (ns_window) {
        ns_window.add(new Access(ns));
        ns = ns_window;
      }
      k_member = new Value(new Literal("this"));
      k_member.add(new Access(k));
      p1 = new Param(k_member);
      cnt_member = new Value(new Literal("this"));
      cnt_member.add(new Access(cnt));
      ret_member = new Value(new Literal("this"));
      ret_member.add(new Access(new Value(new Literal(iced["const"].retslot))));
      a1 = new Assign(cnt_member, new Value(new Literal(1)));
      a2 = new Assign(ret_member, NULL());
      constructor_params = [p1];
      constructor_body = new Block([a1, a2]);
      constructor_code = new Code(constructor_params, constructor_body);
      constructor_name = new Value(new Literal("constructor"));
      constructor_assign = new Assign(constructor_name, constructor_code);
      if_expr = new Call(k_member, [ret_member]);
      if_body = new Block([if_expr]);
      decr = new Op('--', cnt_member);
      if_cond = new Op('!', decr);
      my_if = new If(if_cond, if_body);
      _fulfill_body = new Block([my_if]);
      _fulfill_code = new Code([], _fulfill_body);
      _fulfill_name = new Value(new Literal(iced["const"].fulfill));
      _fulfill_assign = new Assign(_fulfill_name, _fulfill_code);
      inc = new Op("++", cnt_member);
      ip = new Literal("inner_params");
      dp = new Literal("defer_params");
      dp_value = new Value(dp);
      call_meth = new Value(dp);
      af = new Literal(iced["const"].assign_fn);
      call_meth.add(new Access(af, "soak"));
      my_apply = new Literal("apply");
      call_meth.add(new Access(my_apply, "soak"));
      my_null = NULL();
      apply_call = new Call(call_meth, [my_null, new Value(ip)]);
      _fulfill_method = new Value(new Literal("this"));
      _fulfill_method.add(new Access(new Literal(iced["const"].fulfill)));
      _fulfill_call = new Call(_fulfill_method, []);
      inner_body = new Block([apply_call, _fulfill_call]);
      inner_params = [new Param(ip, null, true)];
      inner_code = new Code(inner_params, inner_body, "boundfunc");
      defer_body = new Block([inc, inner_code]);
      defer_params = [new Param(dp)];
      defer_code = new Code(defer_params, defer_body);
      defer_name = new Value(new Literal(iced["const"].defer_method));
      defer_assign = new Assign(defer_name, defer_code);
      assignments = [constructor_assign, _fulfill_assign, defer_assign];
      obj = new Obj(assignments, true);
      body = new Block([new Value(obj)]);
      klass = new Class(null, null, body);
      klass_assign = new Assign(cn, klass, "object");
      outer_block = new Block([NULL()]);
      fn_code = new Code([], outer_block);
      fn_name = new Value(new Literal(iced["const"].findDeferral));
      fn_assign = new Assign(fn_name, fn_code, "object");
      fn = new Literal("_fn");
      tr_block = new Block([new Call(new Value(fn), [])]);
      tr_params = [new Param(fn)];
      tr_code = new Code(tr_params, tr_block);
      tr_name = new Value(new Literal(iced["const"].trampoline));
      tr_assign = new Assign(tr_name, tr_code, "object");
      ns_obj = new Obj([klass_assign, fn_assign, tr_assign], true);
      ns_val = new Value(ns_obj);
      return new Assign(ns, ns_val);
    }
  };

  UTILITIES = {
    "extends": function() {
      return "function(child, parent) { for (var key in parent) { if (" + (utility('hasProp')) + ".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }";
    },
    bind: function() {
      return 'function(fn, me){ return function(){ return fn.apply(me, arguments); }; }';
    },
    indexOf: function() {
      return "[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }";
    },
    modulo: function() {
      return "function(a, b) { return (+a % (b = +b) + b) % b; }";
    },
    hasProp: function() {
      return '{}.hasOwnProperty';
    },
    slice: function() {
      return '[].slice';
    }
  };

  LEVEL_TOP = 1;

  LEVEL_PAREN = 2;

  LEVEL_LIST = 3;

  LEVEL_COND = 4;

  LEVEL_OP = 5;

  LEVEL_ACCESS = 6;

  TAB = '  ';

  IDENTIFIER_STR = "[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*";

  IDENTIFIER = RegExp("^" + IDENTIFIER_STR + "$");

  SIMPLENUM = /^[+-]?\d+$/;

  HEXNUM = /^[+-]?0x[\da-f]+/i;

  NUMBER = /^[+-]?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)$/i;

  METHOD_DEF = RegExp("^(" + IDENTIFIER_STR + ")(\\.prototype)?(?:\\.(" + IDENTIFIER_STR + ")|\\[(\"(?:[^\\\\\"\\r\\n]|\\\\.)*\"|'(?:[^\\\\'\\r\\n]|\\\\.)*')\\]|\\[(0x[\\da-fA-F]+|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\])$");

  IS_STRING = /^['"]/;

  IS_REGEX = /^\//;

  utility = function(name) {
    var ref;
    ref = "__" + name;
    Scope.root.assign(ref, UTILITIES[name]());
    return ref;
  };

  multident = function(code, tab) {
    code = code.replace(/\n/g, '$&' + tab);
    return code.replace(/\s+$/, '');
  };

  parseNum = function(x) {
    if (x == null) {
      return 0;
    } else if (x.match(HEXNUM)) {
      return parseInt(x, 16);
    } else {
      return parseFloat(x);
    }
  };

  isLiteralArguments = function(node) {
    return node instanceof Literal && node.value === 'arguments' && !node.asKey;
  };

  isLiteralThis = function(node) {
    return (node instanceof Literal && node.value === 'this' && !node.asKey) || (node instanceof Code && node.bound) || (node instanceof Call && node.isSuper);
  };

  unfoldSoak = function(o, parent, name) {
    var ifn;
    if (!(ifn = parent[name].unfoldSoak(o))) {
      return;
    }
    parent[name] = ifn.body;
    ifn.body = new Value(parent);
    return ifn;
  };

}).call(this);

}).call(this,"/node_modules/iced-coffee-script/lib/coffee-script")

},{"./helpers":21,"./lexer":23,"./scope":28,"iced-runtime":32,"path":37}],25:[function(require,module,exports){
(function (process){
/* parser generated by jison 0.4.13 */
/*
  Returns a Parser object of the following structure:

  Parser: {
    yy: {}
  }

  Parser.prototype: {
    yy: {},
    trace: function(),
    symbols_: {associative list: name ==> number},
    terminals_: {associative list: number ==> name},
    productions_: [...],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),
    table: [...],
    defaultActions: {...},
    parseError: function(str, hash),
    parse: function(input),

    lexer: {
        EOF: 1,
        parseError: function(str, hash),
        setInput: function(input),
        input: function(),
        unput: function(str),
        more: function(),
        less: function(n),
        pastInput: function(),
        upcomingInput: function(),
        showPosition: function(),
        test_match: function(regex_match_array, rule_index),
        next: function(),
        lex: function(),
        begin: function(condition),
        popState: function(),
        _currentRules: function(),
        topState: function(),
        pushState: function(condition),

        options: {
            ranges: boolean           (optional: true ==> token location info will include a .range[] member)
            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)
            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)
        },

        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),
        rules: [...],
        conditions: {associative list: name ==> set},
    }
  }


  token location info (@$, _$, etc.): {
    first_line: n,
    last_line: n,
    first_column: n,
    last_column: n,
    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)
  }


  the parseError function receives a 'hash' object with these members for lexer and parser errors: {
    text:        (matched text)
    token:       (the produced terminal token, if any)
    line:        (yylineno)
  }
  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {
    loc:         (yylloc)
    expected:    (string describing the set of expected tokens)
    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)
  }
*/
var parser = (function(){
var parser = {trace: function trace() { },
yy: {},
symbols_: {"error":2,"Root":3,"Body":4,"Line":5,"TERMINATOR":6,"Expression":7,"Statement":8,"Return":9,"Comment":10,"STATEMENT":11,"Await":12,"AWAIT":13,"Block":14,"Value":15,"Invocation":16,"Code":17,"Operation":18,"Assign":19,"If":20,"Try":21,"While":22,"For":23,"Switch":24,"Class":25,"Throw":26,"Defer":27,"INDENT":28,"OUTDENT":29,"Identifier":30,"IDENTIFIER":31,"AlphaNumeric":32,"NUMBER":33,"STRING":34,"Literal":35,"JS":36,"REGEX":37,"DEBUGGER":38,"UNDEFINED":39,"NULL":40,"BOOL":41,"Assignable":42,"=":43,"AssignObj":44,"ObjAssignable":45,":":46,"ThisProperty":47,"RETURN":48,"HERECOMMENT":49,"PARAM_START":50,"ParamList":51,"PARAM_END":52,"FuncGlyph":53,"->":54,"=>":55,"OptComma":56,",":57,"Param":58,"ParamVar":59,"...":60,"Array":61,"Object":62,"Splat":63,"SimpleAssignable":64,"Accessor":65,"Parenthetical":66,"Range":67,"This":68,".":69,"?.":70,"::":71,"?::":72,"Index":73,"INDEX_START":74,"IndexValue":75,"INDEX_END":76,"INDEX_SOAK":77,"Slice":78,"{":79,"AssignList":80,"}":81,"CLASS":82,"EXTENDS":83,"OptFuncExist":84,"Arguments":85,"SUPER":86,"DEFER":87,"FUNC_EXIST":88,"CALL_START":89,"CALL_END":90,"ArgList":91,"THIS":92,"@":93,"[":94,"]":95,"RangeDots":96,"..":97,"Arg":98,"SimpleArgs":99,"TRY":100,"Catch":101,"FINALLY":102,"CATCH":103,"THROW":104,"(":105,")":106,"WhileSource":107,"WHILE":108,"WHEN":109,"UNTIL":110,"Loop":111,"LOOP":112,"ForBody":113,"FOR":114,"ForStart":115,"ForSource":116,"ForVariables":117,"OWN":118,"ForValue":119,"FORIN":120,"FOROF":121,"BY":122,"SWITCH":123,"Whens":124,"ELSE":125,"When":126,"LEADING_WHEN":127,"IfBlock":128,"IF":129,"POST_IF":130,"UNARY":131,"UNARY_MATH":132,"-":133,"+":134,"YIELD":135,"FROM":136,"--":137,"++":138,"?":139,"MATH":140,"**":141,"SHIFT":142,"COMPARE":143,"LOGIC":144,"RELATION":145,"COMPOUND_ASSIGN":146,"$accept":0,"$end":1},
terminals_: {2:"error",6:"TERMINATOR",11:"STATEMENT",13:"AWAIT",28:"INDENT",29:"OUTDENT",31:"IDENTIFIER",33:"NUMBER",34:"STRING",36:"JS",37:"REGEX",38:"DEBUGGER",39:"UNDEFINED",40:"NULL",41:"BOOL",43:"=",46:":",48:"RETURN",49:"HERECOMMENT",50:"PARAM_START",52:"PARAM_END",54:"->",55:"=>",57:",",60:"...",69:".",70:"?.",71:"::",72:"?::",74:"INDEX_START",76:"INDEX_END",77:"INDEX_SOAK",79:"{",81:"}",82:"CLASS",83:"EXTENDS",86:"SUPER",87:"DEFER",88:"FUNC_EXIST",89:"CALL_START",90:"CALL_END",92:"THIS",93:"@",94:"[",95:"]",97:"..",100:"TRY",102:"FINALLY",103:"CATCH",104:"THROW",105:"(",106:")",108:"WHILE",109:"WHEN",110:"UNTIL",112:"LOOP",114:"FOR",118:"OWN",120:"FORIN",121:"FOROF",122:"BY",123:"SWITCH",125:"ELSE",127:"LEADING_WHEN",129:"IF",130:"POST_IF",131:"UNARY",132:"UNARY_MATH",133:"-",134:"+",135:"YIELD",136:"FROM",137:"--",138:"++",139:"?",140:"MATH",141:"**",142:"SHIFT",143:"COMPARE",144:"LOGIC",145:"RELATION",146:"COMPOUND_ASSIGN"},
productions_: [0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[12,2],[12,2],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[14,2],[14,3],[30,1],[32,1],[32,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[19,3],[19,4],[19,5],[44,1],[44,3],[44,5],[44,1],[45,1],[45,1],[45,1],[9,2],[9,1],[10,1],[17,5],[17,2],[53,1],[53,1],[56,0],[56,1],[51,0],[51,1],[51,3],[51,4],[51,6],[58,1],[58,2],[58,3],[58,1],[59,1],[59,1],[59,1],[59,1],[63,2],[64,1],[64,2],[64,2],[64,1],[42,1],[42,1],[42,1],[15,1],[15,1],[15,1],[15,1],[15,1],[65,2],[65,2],[65,2],[65,2],[65,2],[65,1],[65,1],[73,3],[73,2],[75,1],[75,1],[62,4],[80,0],[80,1],[80,3],[80,4],[80,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[16,3],[16,3],[16,1],[16,2],[27,2],[84,0],[84,1],[85,2],[85,4],[68,1],[68,1],[47,2],[61,2],[61,4],[96,1],[96,1],[67,5],[78,3],[78,2],[78,2],[78,1],[91,1],[91,3],[91,4],[91,4],[91,6],[98,1],[98,1],[98,1],[99,1],[99,3],[21,2],[21,3],[21,4],[21,5],[101,3],[101,3],[101,2],[26,2],[66,3],[66,5],[107,2],[107,4],[107,2],[107,4],[22,2],[22,2],[22,2],[22,1],[111,2],[111,2],[23,2],[23,2],[23,2],[113,2],[113,2],[115,2],[115,3],[119,1],[119,1],[119,1],[119,1],[117,1],[117,3],[116,2],[116,2],[116,4],[116,4],[116,4],[116,6],[116,6],[24,5],[24,7],[24,4],[24,6],[124,1],[124,2],[126,3],[126,4],[128,3],[128,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],
performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */
/**/) {
/* this == yyval */

var $0 = $$.length - 1;
switch (yystate) {
case 1:return this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Block);
break;
case 2:return this.$ = $$[$0];
break;
case 3:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(yy.Block.wrap([$$[$0]]));
break;
case 4:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].push($$[$0]));
break;
case 5:this.$ = $$[$0-1];
break;
case 6:this.$ = $$[$0];
break;
case 7:this.$ = $$[$0];
break;
case 8:this.$ = $$[$0];
break;
case 9:this.$ = $$[$0];
break;
case 10:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 11:this.$ = $$[$0];
break;
case 12:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Await($$[$0]));
break;
case 13:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Await(yy.Block.wrap([$$[$0]])));
break;
case 14:this.$ = $$[$0];
break;
case 15:this.$ = $$[$0];
break;
case 16:this.$ = $$[$0];
break;
case 17:this.$ = $$[$0];
break;
case 18:this.$ = $$[$0];
break;
case 19:this.$ = $$[$0];
break;
case 20:this.$ = $$[$0];
break;
case 21:this.$ = $$[$0];
break;
case 22:this.$ = $$[$0];
break;
case 23:this.$ = $$[$0];
break;
case 24:this.$ = $$[$0];
break;
case 25:this.$ = $$[$0];
break;
case 26:this.$ = $$[$0];
break;
case 27:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Block);
break;
case 28:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-1]);
break;
case 29:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 30:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 31:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 32:this.$ = $$[$0];
break;
case 33:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 34:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 35:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 36:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Undefined);
break;
case 37:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Null);
break;
case 38:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Bool($$[$0]));
break;
case 39:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign($$[$0-2], $$[$0]));
break;
case 40:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Assign($$[$0-3], $$[$0]));
break;
case 41:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign($$[$0-4], $$[$0-1]));
break;
case 42:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 43:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign(yy.addLocationDataFn(_$[$0-2])(new yy.Value($$[$0-2])), $$[$0], 'object'));
break;
case 44:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign(yy.addLocationDataFn(_$[$0-4])(new yy.Value($$[$0-4])), $$[$0-1], 'object'));
break;
case 45:this.$ = $$[$0];
break;
case 46:this.$ = $$[$0];
break;
case 47:this.$ = $$[$0];
break;
case 48:this.$ = $$[$0];
break;
case 49:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Return($$[$0]));
break;
case 50:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Return);
break;
case 51:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Comment($$[$0]));
break;
case 52:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Code($$[$0-3], $$[$0], $$[$0-1]));
break;
case 53:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Code([], $$[$0], $$[$0-1]));
break;
case 54:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('func');
break;
case 55:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('boundfunc');
break;
case 56:this.$ = $$[$0];
break;
case 57:this.$ = $$[$0];
break;
case 58:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([]);
break;
case 59:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 60:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 61:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 62:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 63:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Param($$[$0]));
break;
case 64:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Param($$[$0-1], null, true));
break;
case 65:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Param($$[$0-2], $$[$0]));
break;
case 66:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Expansion);
break;
case 67:this.$ = $$[$0];
break;
case 68:this.$ = $$[$0];
break;
case 69:this.$ = $$[$0];
break;
case 70:this.$ = $$[$0];
break;
case 71:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Splat($$[$0-1]));
break;
case 72:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 73:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].add($$[$0]));
break;
case 74:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Value($$[$0-1], [].concat($$[$0])));
break;
case 75:this.$ = $$[$0];
break;
case 76:this.$ = $$[$0];
break;
case 77:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 78:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 79:this.$ = $$[$0];
break;
case 80:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 81:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 82:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 83:this.$ = $$[$0];
break;
case 84:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0]));
break;
case 85:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0].setCustom()));
break;
case 86:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0], 'soak'));
break;
case 87:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Access(new yy.Literal('prototype'))), yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))]);
break;
case 88:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Access(new yy.Literal('prototype'), 'soak')), yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))]);
break;
case 89:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Access(new yy.Literal('prototype')));
break;
case 90:this.$ = $$[$0];
break;
case 91:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-1]);
break;
case 92:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(yy.extend($$[$0], {
          soak: true
        }));
break;
case 93:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Index($$[$0]));
break;
case 94:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Slice($$[$0]));
break;
case 95:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Obj($$[$0-2], $$[$0-3].generated));
break;
case 96:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([]);
break;
case 97:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 98:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 99:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 100:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 101:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Class);
break;
case 102:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Class(null, null, $$[$0]));
break;
case 103:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Class(null, $$[$0]));
break;
case 104:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Class(null, $$[$0-1], $$[$0]));
break;
case 105:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Class($$[$0]));
break;
case 106:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Class($$[$0-1], null, $$[$0]));
break;
case 107:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Class($$[$0-2], $$[$0]));
break;
case 108:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Class($$[$0-3], $$[$0-1], $$[$0]));
break;
case 109:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Call($$[$0-2], $$[$0], $$[$0-1]));
break;
case 110:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Call($$[$0-2], $$[$0], $$[$0-1]));
break;
case 111:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Call('super', [new yy.Splat(new yy.Literal('arguments'))]));
break;
case 112:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Call('super', $$[$0]));
break;
case 113:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Defer($$[$0], yylineno));
break;
case 114:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(false);
break;
case 115:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(true);
break;
case 116:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([]);
break;
case 117:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-2]);
break;
case 118:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value(new yy.Literal('this')));
break;
case 119:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value(new yy.Literal('this')));
break;
case 120:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Value(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('this')), [yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))], 'this'));
break;
case 121:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Arr([]));
break;
case 122:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Arr($$[$0-2]));
break;
case 123:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('inclusive');
break;
case 124:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('exclusive');
break;
case 125:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Range($$[$0-3], $$[$0-1], $$[$0-2]));
break;
case 126:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Range($$[$0-2], $$[$0], $$[$0-1]));
break;
case 127:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Range($$[$0-1], null, $$[$0]));
break;
case 128:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Range(null, $$[$0], $$[$0-1]));
break;
case 129:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Range(null, null, $$[$0]));
break;
case 130:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 131:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 132:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 133:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-2]);
break;
case 134:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 135:this.$ = $$[$0];
break;
case 136:this.$ = $$[$0];
break;
case 137:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Expansion);
break;
case 138:this.$ = $$[$0];
break;
case 139:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([].concat($$[$0-2], $$[$0]));
break;
case 140:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Try($$[$0]));
break;
case 141:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Try($$[$0-1], $$[$0][0], $$[$0][1]));
break;
case 142:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Try($$[$0-2], null, null, $$[$0]));
break;
case 143:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Try($$[$0-3], $$[$0-2][0], $$[$0-2][1], $$[$0]));
break;
case 144:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([$$[$0-1], $$[$0]]);
break;
case 145:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Value($$[$0-1])), $$[$0]]);
break;
case 146:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([null, $$[$0]]);
break;
case 147:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Throw($$[$0]));
break;
case 148:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Parens($$[$0-1]));
break;
case 149:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Parens($$[$0-2]));
break;
case 150:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While($$[$0]));
break;
case 151:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.While($$[$0-2], {
          guard: $$[$0]
        }));
break;
case 152:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While($$[$0], {
          invert: true
        }));
break;
case 153:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.While($$[$0-2], {
          invert: true,
          guard: $$[$0]
        }));
break;
case 154:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].addBody($$[$0]));
break;
case 155:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0].addBody(yy.addLocationDataFn(_$[$0-1])(yy.Block.wrap([$$[$0-1]]))));
break;
case 156:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0].addBody(yy.addLocationDataFn(_$[$0-1])(yy.Block.wrap([$$[$0-1]]))));
break;
case 157:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])($$[$0]);
break;
case 158:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('true'))).addBody($$[$0]));
break;
case 159:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('true'))).addBody(yy.addLocationDataFn(_$[$0])(yy.Block.wrap([$$[$0]]))));
break;
case 160:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0-1], $$[$0]));
break;
case 161:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0-1], $$[$0]));
break;
case 162:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0], $$[$0-1]));
break;
case 163:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: yy.addLocationDataFn(_$[$0])(new yy.Value($$[$0]))
        });
break;
case 164:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])((function () {
        $$[$0].own = $$[$0-1].own;
        $$[$0].name = $$[$0-1][0];
        $$[$0].index = $$[$0-1][1];
        return $$[$0];
      }()));
break;
case 165:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0]);
break;
case 166:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])((function () {
        $$[$0].own = true;
        return $$[$0];
      }()));
break;
case 167:this.$ = $$[$0];
break;
case 168:this.$ = $$[$0];
break;
case 169:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 170:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 171:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 172:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([$$[$0-2], $$[$0]]);
break;
case 173:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: $$[$0]
        });
break;
case 174:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: $$[$0],
          object: true
        });
break;
case 175:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          guard: $$[$0]
        });
break;
case 176:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          guard: $$[$0],
          object: true
        });
break;
case 177:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          step: $$[$0]
        });
break;
case 178:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])({
          source: $$[$0-4],
          guard: $$[$0-2],
          step: $$[$0]
        });
break;
case 179:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])({
          source: $$[$0-4],
          step: $$[$0-2],
          guard: $$[$0]
        });
break;
case 180:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Switch($$[$0-3], $$[$0-1]));
break;
case 181:this.$ = yy.addLocationDataFn(_$[$0-6], _$[$0])(new yy.Switch($$[$0-5], $$[$0-3], $$[$0-1]));
break;
case 182:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Switch(null, $$[$0-1]));
break;
case 183:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])(new yy.Switch(null, $$[$0-3], $$[$0-1]));
break;
case 184:this.$ = $$[$0];
break;
case 185:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].concat($$[$0]));
break;
case 186:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([[$$[$0-1], $$[$0]]]);
break;
case 187:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])([[$$[$0-2], $$[$0-1]]]);
break;
case 188:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0-1], $$[$0], {
          type: $$[$0-2]
        }));
break;
case 189:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])($$[$0-4].addElse(yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0-1], $$[$0], {
          type: $$[$0-2]
        }))));
break;
case 190:this.$ = $$[$0];
break;
case 191:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].addElse($$[$0]));
break;
case 192:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0], yy.addLocationDataFn(_$[$0-2])(yy.Block.wrap([$$[$0-2]])), {
          type: $$[$0-1],
          statement: true
        }));
break;
case 193:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0], yy.addLocationDataFn(_$[$0-2])(yy.Block.wrap([$$[$0-2]])), {
          type: $$[$0-1],
          statement: true
        }));
break;
case 194:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 195:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 196:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('-', $$[$0]));
break;
case 197:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('+', $$[$0]));
break;
case 198:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 199:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 200:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-2].concat($$[$0-1]), $$[$0]));
break;
case 201:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('--', $$[$0]));
break;
case 202:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('++', $$[$0]));
break;
case 203:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('--', $$[$0-1], null, true));
break;
case 204:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('++', $$[$0-1], null, true));
break;
case 205:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Existence($$[$0-1]));
break;
case 206:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op('+', $$[$0-2], $$[$0]));
break;
case 207:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op('-', $$[$0-2], $$[$0]));
break;
case 208:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 209:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 210:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 211:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 212:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 213:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])((function () {
        if ($$[$0-1].charAt(0) === '!') {
          return new yy.Op($$[$0-1].slice(1), $$[$0-2], $$[$0]).invert();
        } else {
          return new yy.Op($$[$0-1], $$[$0-2], $$[$0]);
        }
      }()));
break;
case 214:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign($$[$0-2], $$[$0], $$[$0-1]));
break;
case 215:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign($$[$0-4], $$[$0-1], $$[$0-3]));
break;
case 216:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Assign($$[$0-3], $$[$0], $$[$0-2]));
break;
case 217:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Extends($$[$0-2], $$[$0]));
break;
}
},
table: [{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[3]},{1:[2,2],6:[1,78]},{1:[2,3],6:[2,3],29:[2,3],106:[2,3]},{1:[2,6],6:[2,6],29:[2,6],106:[2,6],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,7],6:[2,7],29:[2,7],106:[2,7],107:92,108:[1,69],110:[1,70],113:93,114:[1,72],115:73,130:[1,91]},{1:[2,14],6:[2,14],28:[2,14],29:[2,14],52:[2,14],57:[2,14],60:[2,14],65:95,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],76:[2,14],77:[1,103],81:[2,14],84:94,88:[1,96],89:[2,114],90:[2,14],95:[2,14],97:[2,14],106:[2,14],108:[2,14],109:[2,14],110:[2,14],114:[2,14],122:[2,14],130:[2,14],133:[2,14],134:[2,14],139:[2,14],140:[2,14],141:[2,14],142:[2,14],143:[2,14],144:[2,14],145:[2,14]},{1:[2,15],6:[2,15],28:[2,15],29:[2,15],52:[2,15],57:[2,15],60:[2,15],65:105,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],76:[2,15],77:[1,103],81:[2,15],84:104,88:[1,96],89:[2,114],90:[2,15],95:[2,15],97:[2,15],106:[2,15],108:[2,15],109:[2,15],110:[2,15],114:[2,15],122:[2,15],130:[2,15],133:[2,15],134:[2,15],139:[2,15],140:[2,15],141:[2,15],142:[2,15],143:[2,15],144:[2,15],145:[2,15]},{1:[2,16],6:[2,16],28:[2,16],29:[2,16],52:[2,16],57:[2,16],60:[2,16],76:[2,16],81:[2,16],90:[2,16],95:[2,16],97:[2,16],106:[2,16],108:[2,16],109:[2,16],110:[2,16],114:[2,16],122:[2,16],130:[2,16],133:[2,16],134:[2,16],139:[2,16],140:[2,16],141:[2,16],142:[2,16],143:[2,16],144:[2,16],145:[2,16]},{1:[2,17],6:[2,17],28:[2,17],29:[2,17],52:[2,17],57:[2,17],60:[2,17],76:[2,17],81:[2,17],90:[2,17],95:[2,17],97:[2,17],106:[2,17],108:[2,17],109:[2,17],110:[2,17],114:[2,17],122:[2,17],130:[2,17],133:[2,17],134:[2,17],139:[2,17],140:[2,17],141:[2,17],142:[2,17],143:[2,17],144:[2,17],145:[2,17]},{1:[2,18],6:[2,18],28:[2,18],29:[2,18],52:[2,18],57:[2,18],60:[2,18],76:[2,18],81:[2,18],90:[2,18],95:[2,18],97:[2,18],106:[2,18],108:[2,18],109:[2,18],110:[2,18],114:[2,18],122:[2,18],130:[2,18],133:[2,18],134:[2,18],139:[2,18],140:[2,18],141:[2,18],142:[2,18],143:[2,18],144:[2,18],145:[2,18]},{1:[2,19],6:[2,19],28:[2,19],29:[2,19],52:[2,19],57:[2,19],60:[2,19],76:[2,19],81:[2,19],90:[2,19],95:[2,19],97:[2,19],106:[2,19],108:[2,19],109:[2,19],110:[2,19],114:[2,19],122:[2,19],130:[2,19],133:[2,19],134:[2,19],139:[2,19],140:[2,19],141:[2,19],142:[2,19],143:[2,19],144:[2,19],145:[2,19]},{1:[2,20],6:[2,20],28:[2,20],29:[2,20],52:[2,20],57:[2,20],60:[2,20],76:[2,20],81:[2,20],90:[2,20],95:[2,20],97:[2,20],106:[2,20],108:[2,20],109:[2,20],110:[2,20],114:[2,20],122:[2,20],130:[2,20],133:[2,20],134:[2,20],139:[2,20],140:[2,20],141:[2,20],142:[2,20],143:[2,20],144:[2,20],145:[2,20]},{1:[2,21],6:[2,21],28:[2,21],29:[2,21],52:[2,21],57:[2,21],60:[2,21],76:[2,21],81:[2,21],90:[2,21],95:[2,21],97:[2,21],106:[2,21],108:[2,21],109:[2,21],110:[2,21],114:[2,21],122:[2,21],130:[2,21],133:[2,21],134:[2,21],139:[2,21],140:[2,21],141:[2,21],142:[2,21],143:[2,21],144:[2,21],145:[2,21]},{1:[2,22],6:[2,22],28:[2,22],29:[2,22],52:[2,22],57:[2,22],60:[2,22],76:[2,22],81:[2,22],90:[2,22],95:[2,22],97:[2,22],106:[2,22],108:[2,22],109:[2,22],110:[2,22],114:[2,22],122:[2,22],130:[2,22],133:[2,22],134:[2,22],139:[2,22],140:[2,22],141:[2,22],142:[2,22],143:[2,22],144:[2,22],145:[2,22]},{1:[2,23],6:[2,23],28:[2,23],29:[2,23],52:[2,23],57:[2,23],60:[2,23],76:[2,23],81:[2,23],90:[2,23],95:[2,23],97:[2,23],106:[2,23],108:[2,23],109:[2,23],110:[2,23],114:[2,23],122:[2,23],130:[2,23],133:[2,23],134:[2,23],139:[2,23],140:[2,23],141:[2,23],142:[2,23],143:[2,23],144:[2,23],145:[2,23]},{1:[2,24],6:[2,24],28:[2,24],29:[2,24],52:[2,24],57:[2,24],60:[2,24],76:[2,24],81:[2,24],90:[2,24],95:[2,24],97:[2,24],106:[2,24],108:[2,24],109:[2,24],110:[2,24],114:[2,24],122:[2,24],130:[2,24],133:[2,24],134:[2,24],139:[2,24],140:[2,24],141:[2,24],142:[2,24],143:[2,24],144:[2,24],145:[2,24]},{1:[2,25],6:[2,25],28:[2,25],29:[2,25],52:[2,25],57:[2,25],60:[2,25],76:[2,25],81:[2,25],90:[2,25],95:[2,25],97:[2,25],106:[2,25],108:[2,25],109:[2,25],110:[2,25],114:[2,25],122:[2,25],130:[2,25],133:[2,25],134:[2,25],139:[2,25],140:[2,25],141:[2,25],142:[2,25],143:[2,25],144:[2,25],145:[2,25]},{1:[2,26],6:[2,26],28:[2,26],29:[2,26],52:[2,26],57:[2,26],60:[2,26],76:[2,26],81:[2,26],90:[2,26],95:[2,26],97:[2,26],106:[2,26],108:[2,26],109:[2,26],110:[2,26],114:[2,26],122:[2,26],130:[2,26],133:[2,26],134:[2,26],139:[2,26],140:[2,26],141:[2,26],142:[2,26],143:[2,26],144:[2,26],145:[2,26]},{1:[2,8],6:[2,8],28:[2,8],29:[2,8],52:[2,8],57:[2,8],60:[2,8],76:[2,8],81:[2,8],90:[2,8],95:[2,8],97:[2,8],106:[2,8],108:[2,8],109:[2,8],110:[2,8],114:[2,8],122:[2,8],130:[2,8],133:[2,8],134:[2,8],139:[2,8],140:[2,8],141:[2,8],142:[2,8],143:[2,8],144:[2,8],145:[2,8]},{1:[2,9],6:[2,9],28:[2,9],29:[2,9],52:[2,9],57:[2,9],60:[2,9],76:[2,9],81:[2,9],90:[2,9],95:[2,9],97:[2,9],106:[2,9],108:[2,9],109:[2,9],110:[2,9],114:[2,9],122:[2,9],130:[2,9],133:[2,9],134:[2,9],139:[2,9],140:[2,9],141:[2,9],142:[2,9],143:[2,9],144:[2,9],145:[2,9]},{1:[2,10],6:[2,10],28:[2,10],29:[2,10],52:[2,10],57:[2,10],60:[2,10],76:[2,10],81:[2,10],90:[2,10],95:[2,10],97:[2,10],106:[2,10],108:[2,10],109:[2,10],110:[2,10],114:[2,10],122:[2,10],130:[2,10],133:[2,10],134:[2,10],139:[2,10],140:[2,10],141:[2,10],142:[2,10],143:[2,10],144:[2,10],145:[2,10]},{1:[2,11],6:[2,11],28:[2,11],29:[2,11],52:[2,11],57:[2,11],60:[2,11],76:[2,11],81:[2,11],90:[2,11],95:[2,11],97:[2,11],106:[2,11],108:[2,11],109:[2,11],110:[2,11],114:[2,11],122:[2,11],130:[2,11],133:[2,11],134:[2,11],139:[2,11],140:[2,11],141:[2,11],142:[2,11],143:[2,11],144:[2,11],145:[2,11]},{1:[2,79],6:[2,79],28:[2,79],29:[2,79],43:[1,106],52:[2,79],57:[2,79],60:[2,79],69:[2,79],70:[2,79],71:[2,79],72:[2,79],74:[2,79],76:[2,79],77:[2,79],81:[2,79],88:[2,79],89:[2,79],90:[2,79],95:[2,79],97:[2,79],106:[2,79],108:[2,79],109:[2,79],110:[2,79],114:[2,79],122:[2,79],130:[2,79],133:[2,79],134:[2,79],139:[2,79],140:[2,79],141:[2,79],142:[2,79],143:[2,79],144:[2,79],145:[2,79]},{1:[2,80],6:[2,80],28:[2,80],29:[2,80],52:[2,80],57:[2,80],60:[2,80],69:[2,80],70:[2,80],71:[2,80],72:[2,80],74:[2,80],76:[2,80],77:[2,80],81:[2,80],88:[2,80],89:[2,80],90:[2,80],95:[2,80],97:[2,80],106:[2,80],108:[2,80],109:[2,80],110:[2,80],114:[2,80],122:[2,80],130:[2,80],133:[2,80],134:[2,80],139:[2,80],140:[2,80],141:[2,80],142:[2,80],143:[2,80],144:[2,80],145:[2,80]},{1:[2,81],6:[2,81],28:[2,81],29:[2,81],52:[2,81],57:[2,81],60:[2,81],69:[2,81],70:[2,81],71:[2,81],72:[2,81],74:[2,81],76:[2,81],77:[2,81],81:[2,81],88:[2,81],89:[2,81],90:[2,81],95:[2,81],97:[2,81],106:[2,81],108:[2,81],109:[2,81],110:[2,81],114:[2,81],122:[2,81],130:[2,81],133:[2,81],134:[2,81],139:[2,81],140:[2,81],141:[2,81],142:[2,81],143:[2,81],144:[2,81],145:[2,81]},{1:[2,82],6:[2,82],28:[2,82],29:[2,82],52:[2,82],57:[2,82],60:[2,82],69:[2,82],70:[2,82],71:[2,82],72:[2,82],74:[2,82],76:[2,82],77:[2,82],81:[2,82],88:[2,82],89:[2,82],90:[2,82],95:[2,82],97:[2,82],106:[2,82],108:[2,82],109:[2,82],110:[2,82],114:[2,82],122:[2,82],130:[2,82],133:[2,82],134:[2,82],139:[2,82],140:[2,82],141:[2,82],142:[2,82],143:[2,82],144:[2,82],145:[2,82]},{1:[2,83],6:[2,83],28:[2,83],29:[2,83],52:[2,83],57:[2,83],60:[2,83],69:[2,83],70:[2,83],71:[2,83],72:[2,83],74:[2,83],76:[2,83],77:[2,83],81:[2,83],88:[2,83],89:[2,83],90:[2,83],95:[2,83],97:[2,83],106:[2,83],108:[2,83],109:[2,83],110:[2,83],114:[2,83],122:[2,83],130:[2,83],133:[2,83],134:[2,83],139:[2,83],140:[2,83],141:[2,83],142:[2,83],143:[2,83],144:[2,83],145:[2,83]},{1:[2,111],6:[2,111],28:[2,111],29:[2,111],52:[2,111],57:[2,111],60:[2,111],69:[2,111],70:[2,111],71:[2,111],72:[2,111],74:[2,111],76:[2,111],77:[2,111],81:[2,111],85:107,88:[2,111],89:[1,108],90:[2,111],95:[2,111],97:[2,111],106:[2,111],108:[2,111],109:[2,111],110:[2,111],114:[2,111],122:[2,111],130:[2,111],133:[2,111],134:[2,111],139:[2,111],140:[2,111],141:[2,111],142:[2,111],143:[2,111],144:[2,111],145:[2,111]},{6:[2,58],28:[2,58],30:113,31:[1,77],47:114,51:109,52:[2,58],57:[2,58],58:110,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{14:119,28:[1,120]},{7:121,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:123,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:124,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:125,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:127,8:126,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],136:[1,128],137:[1,36],138:[1,37]},{15:130,16:131,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,61:51,62:52,64:129,66:25,67:26,68:27,79:[1,74],86:[1,28],92:[1,62],93:[1,63],94:[1,61],105:[1,60]},{15:130,16:131,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,61:51,62:52,64:133,66:25,67:26,68:27,79:[1,74],86:[1,28],92:[1,62],93:[1,63],94:[1,61],105:[1,60]},{1:[2,76],6:[2,76],28:[2,76],29:[2,76],43:[2,76],52:[2,76],57:[2,76],60:[2,76],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,76],77:[2,76],81:[2,76],83:[1,137],88:[2,76],89:[2,76],90:[2,76],95:[2,76],97:[2,76],106:[2,76],108:[2,76],109:[2,76],110:[2,76],114:[2,76],122:[2,76],130:[2,76],133:[2,76],134:[2,76],137:[1,134],138:[1,135],139:[2,76],140:[2,76],141:[2,76],142:[2,76],143:[2,76],144:[2,76],145:[2,76],146:[1,136]},{1:[2,190],6:[2,190],28:[2,190],29:[2,190],52:[2,190],57:[2,190],60:[2,190],76:[2,190],81:[2,190],90:[2,190],95:[2,190],97:[2,190],106:[2,190],108:[2,190],109:[2,190],110:[2,190],114:[2,190],122:[2,190],125:[1,138],130:[2,190],133:[2,190],134:[2,190],139:[2,190],140:[2,190],141:[2,190],142:[2,190],143:[2,190],144:[2,190],145:[2,190]},{14:139,28:[1,120]},{14:140,28:[1,120]},{1:[2,157],6:[2,157],28:[2,157],29:[2,157],52:[2,157],57:[2,157],60:[2,157],76:[2,157],81:[2,157],90:[2,157],95:[2,157],97:[2,157],106:[2,157],108:[2,157],109:[2,157],110:[2,157],114:[2,157],122:[2,157],130:[2,157],133:[2,157],134:[2,157],139:[2,157],140:[2,157],141:[2,157],142:[2,157],143:[2,157],144:[2,157],145:[2,157]},{14:141,28:[1,120]},{7:142,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,143],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,101],6:[2,101],14:144,15:130,16:131,28:[1,120],29:[2,101],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,52:[2,101],57:[2,101],60:[2,101],61:51,62:52,64:146,66:25,67:26,68:27,76:[2,101],79:[1,74],81:[2,101],83:[1,145],86:[1,28],90:[2,101],92:[1,62],93:[1,63],94:[1,61],95:[2,101],97:[2,101],105:[1,60],106:[2,101],108:[2,101],109:[2,101],110:[2,101],114:[2,101],122:[2,101],130:[2,101],133:[2,101],134:[2,101],139:[2,101],140:[2,101],141:[2,101],142:[2,101],143:[2,101],144:[2,101],145:[2,101]},{7:147,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{85:148,89:[1,108]},{1:[2,50],6:[2,50],7:149,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[2,50],29:[2,50],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],52:[2,50],53:30,54:[1,64],55:[1,65],57:[2,50],60:[2,50],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,50],79:[1,74],81:[2,50],82:[1,45],86:[1,28],87:[1,47],90:[2,50],92:[1,62],93:[1,63],94:[1,61],95:[2,50],97:[2,50],100:[1,40],104:[1,46],105:[1,60],106:[2,50],107:41,108:[2,50],109:[2,50],110:[2,50],111:42,112:[1,71],113:43,114:[2,50],115:73,122:[2,50],123:[1,44],128:39,129:[1,68],130:[2,50],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37],139:[2,50],140:[2,50],141:[2,50],142:[2,50],143:[2,50],144:[2,50],145:[2,50]},{1:[2,51],6:[2,51],28:[2,51],29:[2,51],52:[2,51],57:[2,51],60:[2,51],76:[2,51],81:[2,51],90:[2,51],95:[2,51],97:[2,51],106:[2,51],108:[2,51],109:[2,51],110:[2,51],114:[2,51],122:[2,51],130:[2,51],133:[2,51],134:[2,51],139:[2,51],140:[2,51],141:[2,51],142:[2,51],143:[2,51],144:[2,51],145:[2,51]},{7:151,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],14:150,15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,120],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,77],6:[2,77],28:[2,77],29:[2,77],43:[2,77],52:[2,77],57:[2,77],60:[2,77],69:[2,77],70:[2,77],71:[2,77],72:[2,77],74:[2,77],76:[2,77],77:[2,77],81:[2,77],88:[2,77],89:[2,77],90:[2,77],95:[2,77],97:[2,77],106:[2,77],108:[2,77],109:[2,77],110:[2,77],114:[2,77],122:[2,77],130:[2,77],133:[2,77],134:[2,77],139:[2,77],140:[2,77],141:[2,77],142:[2,77],143:[2,77],144:[2,77],145:[2,77]},{1:[2,78],6:[2,78],28:[2,78],29:[2,78],43:[2,78],52:[2,78],57:[2,78],60:[2,78],69:[2,78],70:[2,78],71:[2,78],72:[2,78],74:[2,78],76:[2,78],77:[2,78],81:[2,78],88:[2,78],89:[2,78],90:[2,78],95:[2,78],97:[2,78],106:[2,78],108:[2,78],109:[2,78],110:[2,78],114:[2,78],122:[2,78],130:[2,78],133:[2,78],134:[2,78],139:[2,78],140:[2,78],141:[2,78],142:[2,78],143:[2,78],144:[2,78],145:[2,78]},{1:[2,32],6:[2,32],28:[2,32],29:[2,32],52:[2,32],57:[2,32],60:[2,32],69:[2,32],70:[2,32],71:[2,32],72:[2,32],74:[2,32],76:[2,32],77:[2,32],81:[2,32],88:[2,32],89:[2,32],90:[2,32],95:[2,32],97:[2,32],106:[2,32],108:[2,32],109:[2,32],110:[2,32],114:[2,32],122:[2,32],130:[2,32],133:[2,32],134:[2,32],139:[2,32],140:[2,32],141:[2,32],142:[2,32],143:[2,32],144:[2,32],145:[2,32]},{1:[2,33],6:[2,33],28:[2,33],29:[2,33],52:[2,33],57:[2,33],60:[2,33],69:[2,33],70:[2,33],71:[2,33],72:[2,33],74:[2,33],76:[2,33],77:[2,33],81:[2,33],88:[2,33],89:[2,33],90:[2,33],95:[2,33],97:[2,33],106:[2,33],108:[2,33],109:[2,33],110:[2,33],114:[2,33],122:[2,33],130:[2,33],133:[2,33],134:[2,33],139:[2,33],140:[2,33],141:[2,33],142:[2,33],143:[2,33],144:[2,33],145:[2,33]},{1:[2,34],6:[2,34],28:[2,34],29:[2,34],52:[2,34],57:[2,34],60:[2,34],69:[2,34],70:[2,34],71:[2,34],72:[2,34],74:[2,34],76:[2,34],77:[2,34],81:[2,34],88:[2,34],89:[2,34],90:[2,34],95:[2,34],97:[2,34],106:[2,34],108:[2,34],109:[2,34],110:[2,34],114:[2,34],122:[2,34],130:[2,34],133:[2,34],134:[2,34],139:[2,34],140:[2,34],141:[2,34],142:[2,34],143:[2,34],144:[2,34],145:[2,34]},{1:[2,35],6:[2,35],28:[2,35],29:[2,35],52:[2,35],57:[2,35],60:[2,35],69:[2,35],70:[2,35],71:[2,35],72:[2,35],74:[2,35],76:[2,35],77:[2,35],81:[2,35],88:[2,35],89:[2,35],90:[2,35],95:[2,35],97:[2,35],106:[2,35],108:[2,35],109:[2,35],110:[2,35],114:[2,35],122:[2,35],130:[2,35],133:[2,35],134:[2,35],139:[2,35],140:[2,35],141:[2,35],142:[2,35],143:[2,35],144:[2,35],145:[2,35]},{1:[2,36],6:[2,36],28:[2,36],29:[2,36],52:[2,36],57:[2,36],60:[2,36],69:[2,36],70:[2,36],71:[2,36],72:[2,36],74:[2,36],76:[2,36],77:[2,36],81:[2,36],88:[2,36],89:[2,36],90:[2,36],95:[2,36],97:[2,36],106:[2,36],108:[2,36],109:[2,36],110:[2,36],114:[2,36],122:[2,36],130:[2,36],133:[2,36],134:[2,36],139:[2,36],140:[2,36],141:[2,36],142:[2,36],143:[2,36],144:[2,36],145:[2,36]},{1:[2,37],6:[2,37],28:[2,37],29:[2,37],52:[2,37],57:[2,37],60:[2,37],69:[2,37],70:[2,37],71:[2,37],72:[2,37],74:[2,37],76:[2,37],77:[2,37],81:[2,37],88:[2,37],89:[2,37],90:[2,37],95:[2,37],97:[2,37],106:[2,37],108:[2,37],109:[2,37],110:[2,37],114:[2,37],122:[2,37],130:[2,37],133:[2,37],134:[2,37],139:[2,37],140:[2,37],141:[2,37],142:[2,37],143:[2,37],144:[2,37],145:[2,37]},{1:[2,38],6:[2,38],28:[2,38],29:[2,38],52:[2,38],57:[2,38],60:[2,38],69:[2,38],70:[2,38],71:[2,38],72:[2,38],74:[2,38],76:[2,38],77:[2,38],81:[2,38],88:[2,38],89:[2,38],90:[2,38],95:[2,38],97:[2,38],106:[2,38],108:[2,38],109:[2,38],110:[2,38],114:[2,38],122:[2,38],130:[2,38],133:[2,38],134:[2,38],139:[2,38],140:[2,38],141:[2,38],142:[2,38],143:[2,38],144:[2,38],145:[2,38]},{4:152,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,153],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:154,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:156,92:[1,62],93:[1,63],94:[1,61],95:[1,155],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,118],6:[2,118],28:[2,118],29:[2,118],52:[2,118],57:[2,118],60:[2,118],69:[2,118],70:[2,118],71:[2,118],72:[2,118],74:[2,118],76:[2,118],77:[2,118],81:[2,118],88:[2,118],89:[2,118],90:[2,118],95:[2,118],97:[2,118],106:[2,118],108:[2,118],109:[2,118],110:[2,118],114:[2,118],122:[2,118],130:[2,118],133:[2,118],134:[2,118],139:[2,118],140:[2,118],141:[2,118],142:[2,118],143:[2,118],144:[2,118],145:[2,118]},{1:[2,119],6:[2,119],28:[2,119],29:[2,119],30:161,31:[1,77],52:[2,119],57:[2,119],60:[2,119],69:[2,119],70:[2,119],71:[2,119],72:[2,119],74:[2,119],76:[2,119],77:[2,119],81:[2,119],88:[2,119],89:[2,119],90:[2,119],95:[2,119],97:[2,119],106:[2,119],108:[2,119],109:[2,119],110:[2,119],114:[2,119],122:[2,119],130:[2,119],133:[2,119],134:[2,119],139:[2,119],140:[2,119],141:[2,119],142:[2,119],143:[2,119],144:[2,119],145:[2,119]},{28:[2,54]},{28:[2,55]},{1:[2,72],6:[2,72],28:[2,72],29:[2,72],43:[2,72],52:[2,72],57:[2,72],60:[2,72],69:[2,72],70:[2,72],71:[2,72],72:[2,72],74:[2,72],76:[2,72],77:[2,72],81:[2,72],83:[2,72],88:[2,72],89:[2,72],90:[2,72],95:[2,72],97:[2,72],106:[2,72],108:[2,72],109:[2,72],110:[2,72],114:[2,72],122:[2,72],130:[2,72],133:[2,72],134:[2,72],137:[2,72],138:[2,72],139:[2,72],140:[2,72],141:[2,72],142:[2,72],143:[2,72],144:[2,72],145:[2,72],146:[2,72]},{1:[2,75],6:[2,75],28:[2,75],29:[2,75],43:[2,75],52:[2,75],57:[2,75],60:[2,75],69:[2,75],70:[2,75],71:[2,75],72:[2,75],74:[2,75],76:[2,75],77:[2,75],81:[2,75],83:[2,75],88:[2,75],89:[2,75],90:[2,75],95:[2,75],97:[2,75],106:[2,75],108:[2,75],109:[2,75],110:[2,75],114:[2,75],122:[2,75],130:[2,75],133:[2,75],134:[2,75],137:[2,75],138:[2,75],139:[2,75],140:[2,75],141:[2,75],142:[2,75],143:[2,75],144:[2,75],145:[2,75],146:[2,75]},{7:162,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:163,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:164,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:166,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],14:165,15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,120],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{30:171,31:[1,77],47:172,61:173,62:174,67:167,79:[1,74],93:[1,117],94:[1,61],117:168,118:[1,169],119:170},{116:175,120:[1,176],121:[1,177]},{6:[2,96],10:181,28:[2,96],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:179,45:180,47:184,49:[1,49],57:[2,96],80:178,81:[2,96],93:[1,117]},{1:[2,30],6:[2,30],28:[2,30],29:[2,30],46:[2,30],52:[2,30],57:[2,30],60:[2,30],69:[2,30],70:[2,30],71:[2,30],72:[2,30],74:[2,30],76:[2,30],77:[2,30],81:[2,30],88:[2,30],89:[2,30],90:[2,30],95:[2,30],97:[2,30],106:[2,30],108:[2,30],109:[2,30],110:[2,30],114:[2,30],122:[2,30],130:[2,30],133:[2,30],134:[2,30],139:[2,30],140:[2,30],141:[2,30],142:[2,30],143:[2,30],144:[2,30],145:[2,30]},{1:[2,31],6:[2,31],28:[2,31],29:[2,31],46:[2,31],52:[2,31],57:[2,31],60:[2,31],69:[2,31],70:[2,31],71:[2,31],72:[2,31],74:[2,31],76:[2,31],77:[2,31],81:[2,31],88:[2,31],89:[2,31],90:[2,31],95:[2,31],97:[2,31],106:[2,31],108:[2,31],109:[2,31],110:[2,31],114:[2,31],122:[2,31],130:[2,31],133:[2,31],134:[2,31],139:[2,31],140:[2,31],141:[2,31],142:[2,31],143:[2,31],144:[2,31],145:[2,31]},{1:[2,29],6:[2,29],28:[2,29],29:[2,29],43:[2,29],46:[2,29],52:[2,29],57:[2,29],60:[2,29],69:[2,29],70:[2,29],71:[2,29],72:[2,29],74:[2,29],76:[2,29],77:[2,29],81:[2,29],83:[2,29],88:[2,29],89:[2,29],90:[2,29],95:[2,29],97:[2,29],106:[2,29],108:[2,29],109:[2,29],110:[2,29],114:[2,29],120:[2,29],121:[2,29],122:[2,29],130:[2,29],133:[2,29],134:[2,29],137:[2,29],138:[2,29],139:[2,29],140:[2,29],141:[2,29],142:[2,29],143:[2,29],144:[2,29],145:[2,29],146:[2,29]},{1:[2,5],5:185,6:[2,5],7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,29:[2,5],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],106:[2,5],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,205],6:[2,205],28:[2,205],29:[2,205],52:[2,205],57:[2,205],60:[2,205],76:[2,205],81:[2,205],90:[2,205],95:[2,205],97:[2,205],106:[2,205],108:[2,205],109:[2,205],110:[2,205],114:[2,205],122:[2,205],130:[2,205],133:[2,205],134:[2,205],139:[2,205],140:[2,205],141:[2,205],142:[2,205],143:[2,205],144:[2,205],145:[2,205]},{7:186,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:187,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:188,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:189,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:190,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:191,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:192,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:193,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:194,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,156],6:[2,156],28:[2,156],29:[2,156],52:[2,156],57:[2,156],60:[2,156],76:[2,156],81:[2,156],90:[2,156],95:[2,156],97:[2,156],106:[2,156],108:[2,156],109:[2,156],110:[2,156],114:[2,156],122:[2,156],130:[2,156],133:[2,156],134:[2,156],139:[2,156],140:[2,156],141:[2,156],142:[2,156],143:[2,156],144:[2,156],145:[2,156]},{1:[2,161],6:[2,161],28:[2,161],29:[2,161],52:[2,161],57:[2,161],60:[2,161],76:[2,161],81:[2,161],90:[2,161],95:[2,161],97:[2,161],106:[2,161],108:[2,161],109:[2,161],110:[2,161],114:[2,161],122:[2,161],130:[2,161],133:[2,161],134:[2,161],139:[2,161],140:[2,161],141:[2,161],142:[2,161],143:[2,161],144:[2,161],145:[2,161]},{7:195,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,155],6:[2,155],28:[2,155],29:[2,155],52:[2,155],57:[2,155],60:[2,155],76:[2,155],81:[2,155],90:[2,155],95:[2,155],97:[2,155],106:[2,155],108:[2,155],109:[2,155],110:[2,155],114:[2,155],122:[2,155],130:[2,155],133:[2,155],134:[2,155],139:[2,155],140:[2,155],141:[2,155],142:[2,155],143:[2,155],144:[2,155],145:[2,155]},{1:[2,160],6:[2,160],28:[2,160],29:[2,160],52:[2,160],57:[2,160],60:[2,160],76:[2,160],81:[2,160],90:[2,160],95:[2,160],97:[2,160],106:[2,160],108:[2,160],109:[2,160],110:[2,160],114:[2,160],122:[2,160],130:[2,160],133:[2,160],134:[2,160],139:[2,160],140:[2,160],141:[2,160],142:[2,160],143:[2,160],144:[2,160],145:[2,160]},{85:196,89:[1,108]},{1:[2,73],6:[2,73],28:[2,73],29:[2,73],43:[2,73],52:[2,73],57:[2,73],60:[2,73],69:[2,73],70:[2,73],71:[2,73],72:[2,73],74:[2,73],76:[2,73],77:[2,73],81:[2,73],83:[2,73],88:[2,73],89:[2,73],90:[2,73],95:[2,73],97:[2,73],106:[2,73],108:[2,73],109:[2,73],110:[2,73],114:[2,73],122:[2,73],130:[2,73],133:[2,73],134:[2,73],137:[2,73],138:[2,73],139:[2,73],140:[2,73],141:[2,73],142:[2,73],143:[2,73],144:[2,73],145:[2,73],146:[2,73]},{89:[2,115]},{27:198,30:197,31:[1,77],87:[1,47]},{30:199,31:[1,77]},{1:[2,89],6:[2,89],28:[2,89],29:[2,89],30:200,31:[1,77],43:[2,89],52:[2,89],57:[2,89],60:[2,89],69:[2,89],70:[2,89],71:[2,89],72:[2,89],74:[2,89],76:[2,89],77:[2,89],81:[2,89],83:[2,89],88:[2,89],89:[2,89],90:[2,89],95:[2,89],97:[2,89],106:[2,89],108:[2,89],109:[2,89],110:[2,89],114:[2,89],122:[2,89],130:[2,89],133:[2,89],134:[2,89],137:[2,89],138:[2,89],139:[2,89],140:[2,89],141:[2,89],142:[2,89],143:[2,89],144:[2,89],145:[2,89],146:[2,89]},{30:201,31:[1,77]},{1:[2,90],6:[2,90],28:[2,90],29:[2,90],43:[2,90],52:[2,90],57:[2,90],60:[2,90],69:[2,90],70:[2,90],71:[2,90],72:[2,90],74:[2,90],76:[2,90],77:[2,90],81:[2,90],83:[2,90],88:[2,90],89:[2,90],90:[2,90],95:[2,90],97:[2,90],106:[2,90],108:[2,90],109:[2,90],110:[2,90],114:[2,90],122:[2,90],130:[2,90],133:[2,90],134:[2,90],137:[2,90],138:[2,90],139:[2,90],140:[2,90],141:[2,90],142:[2,90],143:[2,90],144:[2,90],145:[2,90],146:[2,90]},{7:203,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,207],61:51,62:52,64:38,66:25,67:26,68:27,75:202,78:204,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],96:205,97:[1,206],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{73:208,74:[1,102],77:[1,103]},{85:209,89:[1,108]},{1:[2,74],6:[2,74],28:[2,74],29:[2,74],43:[2,74],52:[2,74],57:[2,74],60:[2,74],69:[2,74],70:[2,74],71:[2,74],72:[2,74],74:[2,74],76:[2,74],77:[2,74],81:[2,74],83:[2,74],88:[2,74],89:[2,74],90:[2,74],95:[2,74],97:[2,74],106:[2,74],108:[2,74],109:[2,74],110:[2,74],114:[2,74],122:[2,74],130:[2,74],133:[2,74],134:[2,74],137:[2,74],138:[2,74],139:[2,74],140:[2,74],141:[2,74],142:[2,74],143:[2,74],144:[2,74],145:[2,74],146:[2,74]},{6:[1,211],7:210,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,212],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,112],6:[2,112],28:[2,112],29:[2,112],52:[2,112],57:[2,112],60:[2,112],69:[2,112],70:[2,112],71:[2,112],72:[2,112],74:[2,112],76:[2,112],77:[2,112],81:[2,112],88:[2,112],89:[2,112],90:[2,112],95:[2,112],97:[2,112],106:[2,112],108:[2,112],109:[2,112],110:[2,112],114:[2,112],122:[2,112],130:[2,112],133:[2,112],134:[2,112],139:[2,112],140:[2,112],141:[2,112],142:[2,112],143:[2,112],144:[2,112],145:[2,112]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],90:[1,213],91:214,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],52:[1,216],56:218,57:[1,217]},{6:[2,59],28:[2,59],29:[2,59],52:[2,59],57:[2,59]},{6:[2,63],28:[2,63],29:[2,63],43:[1,220],52:[2,63],57:[2,63],60:[1,219]},{6:[2,66],28:[2,66],29:[2,66],52:[2,66],57:[2,66]},{6:[2,67],28:[2,67],29:[2,67],43:[2,67],52:[2,67],57:[2,67],60:[2,67]},{6:[2,68],28:[2,68],29:[2,68],43:[2,68],52:[2,68],57:[2,68],60:[2,68]},{6:[2,69],28:[2,69],29:[2,69],43:[2,69],52:[2,69],57:[2,69],60:[2,69]},{6:[2,70],28:[2,70],29:[2,70],43:[2,70],52:[2,70],57:[2,70],60:[2,70]},{30:161,31:[1,77]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:156,92:[1,62],93:[1,63],94:[1,61],95:[1,155],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,53],6:[2,53],28:[2,53],29:[2,53],52:[2,53],57:[2,53],60:[2,53],76:[2,53],81:[2,53],90:[2,53],95:[2,53],97:[2,53],106:[2,53],108:[2,53],109:[2,53],110:[2,53],114:[2,53],122:[2,53],130:[2,53],133:[2,53],134:[2,53],139:[2,53],140:[2,53],141:[2,53],142:[2,53],143:[2,53],144:[2,53],145:[2,53]},{4:222,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,29:[1,221],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,194],6:[2,194],28:[2,194],29:[2,194],52:[2,194],57:[2,194],60:[2,194],76:[2,194],81:[2,194],90:[2,194],95:[2,194],97:[2,194],106:[2,194],107:89,108:[2,194],109:[2,194],110:[2,194],113:90,114:[2,194],115:73,122:[2,194],130:[2,194],133:[2,194],134:[2,194],139:[1,79],140:[2,194],141:[2,194],142:[2,194],143:[2,194],144:[2,194],145:[2,194]},{107:92,108:[1,69],110:[1,70],113:93,114:[1,72],115:73,130:[1,91]},{1:[2,195],6:[2,195],28:[2,195],29:[2,195],52:[2,195],57:[2,195],60:[2,195],76:[2,195],81:[2,195],90:[2,195],95:[2,195],97:[2,195],106:[2,195],107:89,108:[2,195],109:[2,195],110:[2,195],113:90,114:[2,195],115:73,122:[2,195],130:[2,195],133:[2,195],134:[2,195],139:[1,79],140:[2,195],141:[1,83],142:[2,195],143:[2,195],144:[2,195],145:[2,195]},{1:[2,196],6:[2,196],28:[2,196],29:[2,196],52:[2,196],57:[2,196],60:[2,196],76:[2,196],81:[2,196],90:[2,196],95:[2,196],97:[2,196],106:[2,196],107:89,108:[2,196],109:[2,196],110:[2,196],113:90,114:[2,196],115:73,122:[2,196],130:[2,196],133:[2,196],134:[2,196],139:[1,79],140:[2,196],141:[1,83],142:[2,196],143:[2,196],144:[2,196],145:[2,196]},{1:[2,197],6:[2,197],28:[2,197],29:[2,197],52:[2,197],57:[2,197],60:[2,197],76:[2,197],81:[2,197],90:[2,197],95:[2,197],97:[2,197],106:[2,197],107:89,108:[2,197],109:[2,197],110:[2,197],113:90,114:[2,197],115:73,122:[2,197],130:[2,197],133:[2,197],134:[2,197],139:[1,79],140:[2,197],141:[1,83],142:[2,197],143:[2,197],144:[2,197],145:[2,197]},{1:[2,198],6:[2,198],28:[2,198],29:[2,198],52:[2,198],57:[2,198],60:[2,198],76:[2,198],81:[2,198],90:[2,198],95:[2,198],97:[2,198],106:[2,198],107:92,108:[2,198],109:[2,198],110:[2,198],113:93,114:[2,198],115:73,122:[2,198],130:[2,198],133:[2,198],134:[2,198],139:[2,198],140:[2,198],141:[2,198],142:[2,198],143:[2,198],144:[2,198],145:[2,198]},{1:[2,199],6:[2,199],28:[2,199],29:[2,199],52:[2,199],57:[2,199],60:[2,199],76:[2,199],81:[2,199],90:[2,199],95:[2,199],97:[2,199],106:[2,199],107:89,108:[2,199],109:[2,199],110:[2,199],113:90,114:[2,199],115:73,122:[2,199],130:[2,199],133:[2,199],134:[2,199],139:[1,79],140:[2,199],141:[2,199],142:[2,199],143:[2,199],144:[2,199],145:[2,199]},{7:223,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,201],6:[2,201],28:[2,201],29:[2,201],52:[2,201],57:[2,201],60:[2,201],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,201],77:[2,76],81:[2,201],88:[2,76],89:[2,76],90:[2,201],95:[2,201],97:[2,201],106:[2,201],108:[2,201],109:[2,201],110:[2,201],114:[2,201],122:[2,201],130:[2,201],133:[2,201],134:[2,201],139:[2,201],140:[2,201],141:[2,201],142:[2,201],143:[2,201],144:[2,201],145:[2,201]},{65:95,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],77:[1,103],84:94,88:[1,96],89:[2,114]},{65:105,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],77:[1,103],84:104,88:[1,96],89:[2,114]},{69:[2,79],70:[2,79],71:[2,79],72:[2,79],74:[2,79],77:[2,79],88:[2,79],89:[2,79]},{1:[2,202],6:[2,202],28:[2,202],29:[2,202],52:[2,202],57:[2,202],60:[2,202],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,202],77:[2,76],81:[2,202],88:[2,76],89:[2,76],90:[2,202],95:[2,202],97:[2,202],106:[2,202],108:[2,202],109:[2,202],110:[2,202],114:[2,202],122:[2,202],130:[2,202],133:[2,202],134:[2,202],139:[2,202],140:[2,202],141:[2,202],142:[2,202],143:[2,202],144:[2,202],145:[2,202]},{1:[2,203],6:[2,203],28:[2,203],29:[2,203],52:[2,203],57:[2,203],60:[2,203],76:[2,203],81:[2,203],90:[2,203],95:[2,203],97:[2,203],106:[2,203],108:[2,203],109:[2,203],110:[2,203],114:[2,203],122:[2,203],130:[2,203],133:[2,203],134:[2,203],139:[2,203],140:[2,203],141:[2,203],142:[2,203],143:[2,203],144:[2,203],145:[2,203]},{1:[2,204],6:[2,204],28:[2,204],29:[2,204],52:[2,204],57:[2,204],60:[2,204],76:[2,204],81:[2,204],90:[2,204],95:[2,204],97:[2,204],106:[2,204],108:[2,204],109:[2,204],110:[2,204],114:[2,204],122:[2,204],130:[2,204],133:[2,204],134:[2,204],139:[2,204],140:[2,204],141:[2,204],142:[2,204],143:[2,204],144:[2,204],145:[2,204]},{6:[1,226],7:224,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,225],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:227,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{14:228,28:[1,120],129:[1,229]},{1:[2,140],6:[2,140],28:[2,140],29:[2,140],52:[2,140],57:[2,140],60:[2,140],76:[2,140],81:[2,140],90:[2,140],95:[2,140],97:[2,140],101:230,102:[1,231],103:[1,232],106:[2,140],108:[2,140],109:[2,140],110:[2,140],114:[2,140],122:[2,140],130:[2,140],133:[2,140],134:[2,140],139:[2,140],140:[2,140],141:[2,140],142:[2,140],143:[2,140],144:[2,140],145:[2,140]},{1:[2,154],6:[2,154],28:[2,154],29:[2,154],52:[2,154],57:[2,154],60:[2,154],76:[2,154],81:[2,154],90:[2,154],95:[2,154],97:[2,154],106:[2,154],108:[2,154],109:[2,154],110:[2,154],114:[2,154],122:[2,154],130:[2,154],133:[2,154],134:[2,154],139:[2,154],140:[2,154],141:[2,154],142:[2,154],143:[2,154],144:[2,154],145:[2,154]},{1:[2,162],6:[2,162],28:[2,162],29:[2,162],52:[2,162],57:[2,162],60:[2,162],76:[2,162],81:[2,162],90:[2,162],95:[2,162],97:[2,162],106:[2,162],108:[2,162],109:[2,162],110:[2,162],114:[2,162],122:[2,162],130:[2,162],133:[2,162],134:[2,162],139:[2,162],140:[2,162],141:[2,162],142:[2,162],143:[2,162],144:[2,162],145:[2,162]},{28:[1,233],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{124:234,126:235,127:[1,236]},{1:[2,102],6:[2,102],28:[2,102],29:[2,102],52:[2,102],57:[2,102],60:[2,102],76:[2,102],81:[2,102],90:[2,102],95:[2,102],97:[2,102],106:[2,102],108:[2,102],109:[2,102],110:[2,102],114:[2,102],122:[2,102],130:[2,102],133:[2,102],134:[2,102],139:[2,102],140:[2,102],141:[2,102],142:[2,102],143:[2,102],144:[2,102],145:[2,102]},{7:237,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,105],6:[2,105],14:238,28:[1,120],29:[2,105],52:[2,105],57:[2,105],60:[2,105],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,105],77:[2,76],81:[2,105],83:[1,239],88:[2,76],89:[2,76],90:[2,105],95:[2,105],97:[2,105],106:[2,105],108:[2,105],109:[2,105],110:[2,105],114:[2,105],122:[2,105],130:[2,105],133:[2,105],134:[2,105],139:[2,105],140:[2,105],141:[2,105],142:[2,105],143:[2,105],144:[2,105],145:[2,105]},{1:[2,147],6:[2,147],28:[2,147],29:[2,147],52:[2,147],57:[2,147],60:[2,147],76:[2,147],81:[2,147],90:[2,147],95:[2,147],97:[2,147],106:[2,147],107:89,108:[2,147],109:[2,147],110:[2,147],113:90,114:[2,147],115:73,122:[2,147],130:[2,147],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,113],6:[2,113],28:[2,113],29:[2,113],43:[2,113],52:[2,113],57:[2,113],60:[2,113],69:[2,113],70:[2,113],71:[2,113],72:[2,113],74:[2,113],76:[2,113],77:[2,113],81:[2,113],83:[2,113],88:[2,113],89:[2,113],90:[2,113],95:[2,113],97:[2,113],106:[2,113],108:[2,113],109:[2,113],110:[2,113],114:[2,113],122:[2,113],130:[2,113],133:[2,113],134:[2,113],137:[2,113],138:[2,113],139:[2,113],140:[2,113],141:[2,113],142:[2,113],143:[2,113],144:[2,113],145:[2,113],146:[2,113]},{1:[2,49],6:[2,49],28:[2,49],29:[2,49],52:[2,49],57:[2,49],60:[2,49],76:[2,49],81:[2,49],90:[2,49],95:[2,49],97:[2,49],106:[2,49],107:89,108:[2,49],109:[2,49],110:[2,49],113:90,114:[2,49],115:73,122:[2,49],130:[2,49],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,12],6:[2,12],28:[2,12],29:[2,12],52:[2,12],57:[2,12],60:[2,12],76:[2,12],81:[2,12],90:[2,12],95:[2,12],97:[2,12],106:[2,12],108:[2,12],109:[2,12],110:[2,12],114:[2,12],122:[2,12],130:[2,12],133:[2,12],134:[2,12],139:[2,12],140:[2,12],141:[2,12],142:[2,12],143:[2,12],144:[2,12],145:[2,12]},{1:[2,13],6:[2,13],28:[2,13],29:[2,13],52:[2,13],57:[2,13],60:[2,13],76:[2,13],81:[2,13],90:[2,13],95:[2,13],97:[2,13],106:[2,13],107:89,108:[1,69],109:[2,13],110:[1,70],113:90,114:[1,72],115:73,122:[2,13],130:[2,13],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,78],106:[1,240]},{4:241,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,135],28:[2,135],57:[2,135],60:[1,243],95:[2,135],96:242,97:[1,206],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,121],6:[2,121],28:[2,121],29:[2,121],43:[2,121],52:[2,121],57:[2,121],60:[2,121],69:[2,121],70:[2,121],71:[2,121],72:[2,121],74:[2,121],76:[2,121],77:[2,121],81:[2,121],88:[2,121],89:[2,121],90:[2,121],95:[2,121],97:[2,121],106:[2,121],108:[2,121],109:[2,121],110:[2,121],114:[2,121],120:[2,121],121:[2,121],122:[2,121],130:[2,121],133:[2,121],134:[2,121],139:[2,121],140:[2,121],141:[2,121],142:[2,121],143:[2,121],144:[2,121],145:[2,121]},{6:[2,56],28:[2,56],56:244,57:[1,245],95:[2,56]},{6:[2,130],28:[2,130],29:[2,130],57:[2,130],90:[2,130],95:[2,130]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:246,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,136],28:[2,136],29:[2,136],57:[2,136],90:[2,136],95:[2,136]},{6:[2,137],28:[2,137],29:[2,137],57:[2,137],90:[2,137],95:[2,137]},{1:[2,120],6:[2,120],28:[2,120],29:[2,120],43:[2,120],46:[2,120],52:[2,120],57:[2,120],60:[2,120],69:[2,120],70:[2,120],71:[2,120],72:[2,120],74:[2,120],76:[2,120],77:[2,120],81:[2,120],83:[2,120],88:[2,120],89:[2,120],90:[2,120],95:[2,120],97:[2,120],106:[2,120],108:[2,120],109:[2,120],110:[2,120],114:[2,120],120:[2,120],121:[2,120],122:[2,120],130:[2,120],133:[2,120],134:[2,120],137:[2,120],138:[2,120],139:[2,120],140:[2,120],141:[2,120],142:[2,120],143:[2,120],144:[2,120],145:[2,120],146:[2,120]},{14:247,28:[1,120],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,150],6:[2,150],28:[2,150],29:[2,150],52:[2,150],57:[2,150],60:[2,150],76:[2,150],81:[2,150],90:[2,150],95:[2,150],97:[2,150],106:[2,150],107:89,108:[1,69],109:[1,248],110:[1,70],113:90,114:[1,72],115:73,122:[2,150],130:[2,150],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,152],6:[2,152],28:[2,152],29:[2,152],52:[2,152],57:[2,152],60:[2,152],76:[2,152],81:[2,152],90:[2,152],95:[2,152],97:[2,152],106:[2,152],107:89,108:[1,69],109:[1,249],110:[1,70],113:90,114:[1,72],115:73,122:[2,152],130:[2,152],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,158],6:[2,158],28:[2,158],29:[2,158],52:[2,158],57:[2,158],60:[2,158],76:[2,158],81:[2,158],90:[2,158],95:[2,158],97:[2,158],106:[2,158],108:[2,158],109:[2,158],110:[2,158],114:[2,158],122:[2,158],130:[2,158],133:[2,158],134:[2,158],139:[2,158],140:[2,158],141:[2,158],142:[2,158],143:[2,158],144:[2,158],145:[2,158]},{1:[2,159],6:[2,159],28:[2,159],29:[2,159],52:[2,159],57:[2,159],60:[2,159],76:[2,159],81:[2,159],90:[2,159],95:[2,159],97:[2,159],106:[2,159],107:89,108:[1,69],109:[2,159],110:[1,70],113:90,114:[1,72],115:73,122:[2,159],130:[2,159],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,163],6:[2,163],28:[2,163],29:[2,163],52:[2,163],57:[2,163],60:[2,163],76:[2,163],81:[2,163],90:[2,163],95:[2,163],97:[2,163],106:[2,163],108:[2,163],109:[2,163],110:[2,163],114:[2,163],122:[2,163],130:[2,163],133:[2,163],134:[2,163],139:[2,163],140:[2,163],141:[2,163],142:[2,163],143:[2,163],144:[2,163],145:[2,163]},{120:[2,165],121:[2,165]},{30:171,31:[1,77],47:172,61:173,62:174,79:[1,74],93:[1,117],94:[1,118],117:250,119:170},{57:[1,251],120:[2,171],121:[2,171]},{57:[2,167],120:[2,167],121:[2,167]},{57:[2,168],120:[2,168],121:[2,168]},{57:[2,169],120:[2,169],121:[2,169]},{57:[2,170],120:[2,170],121:[2,170]},{1:[2,164],6:[2,164],28:[2,164],29:[2,164],52:[2,164],57:[2,164],60:[2,164],76:[2,164],81:[2,164],90:[2,164],95:[2,164],97:[2,164],106:[2,164],108:[2,164],109:[2,164],110:[2,164],114:[2,164],122:[2,164],130:[2,164],133:[2,164],134:[2,164],139:[2,164],140:[2,164],141:[2,164],142:[2,164],143:[2,164],144:[2,164],145:[2,164]},{7:252,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:253,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],56:254,57:[1,255],81:[2,56]},{6:[2,97],28:[2,97],29:[2,97],57:[2,97],81:[2,97]},{6:[2,42],28:[2,42],29:[2,42],46:[1,256],57:[2,42],81:[2,42]},{6:[2,45],28:[2,45],29:[2,45],57:[2,45],81:[2,45]},{6:[2,46],28:[2,46],29:[2,46],46:[2,46],57:[2,46],81:[2,46]},{6:[2,47],28:[2,47],29:[2,47],46:[2,47],57:[2,47],81:[2,47]},{6:[2,48],28:[2,48],29:[2,48],46:[2,48],57:[2,48],81:[2,48]},{1:[2,4],6:[2,4],29:[2,4],106:[2,4]},{1:[2,206],6:[2,206],28:[2,206],29:[2,206],52:[2,206],57:[2,206],60:[2,206],76:[2,206],81:[2,206],90:[2,206],95:[2,206],97:[2,206],106:[2,206],107:89,108:[2,206],109:[2,206],110:[2,206],113:90,114:[2,206],115:73,122:[2,206],130:[2,206],133:[2,206],134:[2,206],139:[1,79],140:[1,82],141:[1,83],142:[2,206],143:[2,206],144:[2,206],145:[2,206]},{1:[2,207],6:[2,207],28:[2,207],29:[2,207],52:[2,207],57:[2,207],60:[2,207],76:[2,207],81:[2,207],90:[2,207],95:[2,207],97:[2,207],106:[2,207],107:89,108:[2,207],109:[2,207],110:[2,207],113:90,114:[2,207],115:73,122:[2,207],130:[2,207],133:[2,207],134:[2,207],139:[1,79],140:[1,82],141:[1,83],142:[2,207],143:[2,207],144:[2,207],145:[2,207]},{1:[2,208],6:[2,208],28:[2,208],29:[2,208],52:[2,208],57:[2,208],60:[2,208],76:[2,208],81:[2,208],90:[2,208],95:[2,208],97:[2,208],106:[2,208],107:89,108:[2,208],109:[2,208],110:[2,208],113:90,114:[2,208],115:73,122:[2,208],130:[2,208],133:[2,208],134:[2,208],139:[1,79],140:[2,208],141:[1,83],142:[2,208],143:[2,208],144:[2,208],145:[2,208]},{1:[2,209],6:[2,209],28:[2,209],29:[2,209],52:[2,209],57:[2,209],60:[2,209],76:[2,209],81:[2,209],90:[2,209],95:[2,209],97:[2,209],106:[2,209],107:89,108:[2,209],109:[2,209],110:[2,209],113:90,114:[2,209],115:73,122:[2,209],130:[2,209],133:[2,209],134:[2,209],139:[1,79],140:[2,209],141:[1,83],142:[2,209],143:[2,209],144:[2,209],145:[2,209]},{1:[2,210],6:[2,210],28:[2,210],29:[2,210],52:[2,210],57:[2,210],60:[2,210],76:[2,210],81:[2,210],90:[2,210],95:[2,210],97:[2,210],106:[2,210],107:89,108:[2,210],109:[2,210],110:[2,210],113:90,114:[2,210],115:73,122:[2,210],130:[2,210],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[2,210],143:[2,210],144:[2,210],145:[2,210]},{1:[2,211],6:[2,211],28:[2,211],29:[2,211],52:[2,211],57:[2,211],60:[2,211],76:[2,211],81:[2,211],90:[2,211],95:[2,211],97:[2,211],106:[2,211],107:89,108:[2,211],109:[2,211],110:[2,211],113:90,114:[2,211],115:73,122:[2,211],130:[2,211],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[2,211],144:[2,211],145:[1,87]},{1:[2,212],6:[2,212],28:[2,212],29:[2,212],52:[2,212],57:[2,212],60:[2,212],76:[2,212],81:[2,212],90:[2,212],95:[2,212],97:[2,212],106:[2,212],107:89,108:[2,212],109:[2,212],110:[2,212],113:90,114:[2,212],115:73,122:[2,212],130:[2,212],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[2,212],145:[1,87]},{1:[2,213],6:[2,213],28:[2,213],29:[2,213],52:[2,213],57:[2,213],60:[2,213],76:[2,213],81:[2,213],90:[2,213],95:[2,213],97:[2,213],106:[2,213],107:89,108:[2,213],109:[2,213],110:[2,213],113:90,114:[2,213],115:73,122:[2,213],130:[2,213],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[2,213],144:[2,213],145:[2,213]},{1:[2,193],6:[2,193],28:[2,193],29:[2,193],52:[2,193],57:[2,193],60:[2,193],76:[2,193],81:[2,193],90:[2,193],95:[2,193],97:[2,193],106:[2,193],107:89,108:[1,69],109:[2,193],110:[1,70],113:90,114:[1,72],115:73,122:[2,193],130:[2,193],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,192],6:[2,192],28:[2,192],29:[2,192],52:[2,192],57:[2,192],60:[2,192],76:[2,192],81:[2,192],90:[2,192],95:[2,192],97:[2,192],106:[2,192],107:89,108:[1,69],109:[2,192],110:[1,70],113:90,114:[1,72],115:73,122:[2,192],130:[2,192],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,109],6:[2,109],28:[2,109],29:[2,109],52:[2,109],57:[2,109],60:[2,109],69:[2,109],70:[2,109],71:[2,109],72:[2,109],74:[2,109],76:[2,109],77:[2,109],81:[2,109],88:[2,109],89:[2,109],90:[2,109],95:[2,109],97:[2,109],106:[2,109],108:[2,109],109:[2,109],110:[2,109],114:[2,109],122:[2,109],130:[2,109],133:[2,109],134:[2,109],139:[2,109],140:[2,109],141:[2,109],142:[2,109],143:[2,109],144:[2,109],145:[2,109]},{1:[2,84],6:[2,84],28:[2,84],29:[2,84],43:[2,84],52:[2,84],57:[2,84],60:[2,84],69:[2,84],70:[2,84],71:[2,84],72:[2,84],74:[2,84],76:[2,84],77:[2,84],81:[2,84],83:[2,84],88:[2,84],89:[2,84],90:[2,84],95:[2,84],97:[2,84],106:[2,84],108:[2,84],109:[2,84],110:[2,84],114:[2,84],122:[2,84],130:[2,84],133:[2,84],134:[2,84],137:[2,84],138:[2,84],139:[2,84],140:[2,84],141:[2,84],142:[2,84],143:[2,84],144:[2,84],145:[2,84],146:[2,84]},{1:[2,85],6:[2,85],28:[2,85],29:[2,85],43:[2,85],52:[2,85],57:[2,85],60:[2,85],69:[2,85],70:[2,85],71:[2,85],72:[2,85],74:[2,85],76:[2,85],77:[2,85],81:[2,85],83:[2,85],88:[2,85],89:[2,85],90:[2,85],95:[2,85],97:[2,85],106:[2,85],108:[2,85],109:[2,85],110:[2,85],114:[2,85],122:[2,85],130:[2,85],133:[2,85],134:[2,85],137:[2,85],138:[2,85],139:[2,85],140:[2,85],141:[2,85],142:[2,85],143:[2,85],144:[2,85],145:[2,85],146:[2,85]},{1:[2,86],6:[2,86],28:[2,86],29:[2,86],43:[2,86],52:[2,86],57:[2,86],60:[2,86],69:[2,86],70:[2,86],71:[2,86],72:[2,86],74:[2,86],76:[2,86],77:[2,86],81:[2,86],83:[2,86],88:[2,86],89:[2,86],90:[2,86],95:[2,86],97:[2,86],106:[2,86],108:[2,86],109:[2,86],110:[2,86],114:[2,86],122:[2,86],130:[2,86],133:[2,86],134:[2,86],137:[2,86],138:[2,86],139:[2,86],140:[2,86],141:[2,86],142:[2,86],143:[2,86],144:[2,86],145:[2,86],146:[2,86]},{1:[2,87],6:[2,87],28:[2,87],29:[2,87],43:[2,87],52:[2,87],57:[2,87],60:[2,87],69:[2,87],70:[2,87],71:[2,87],72:[2,87],74:[2,87],76:[2,87],77:[2,87],81:[2,87],83:[2,87],88:[2,87],89:[2,87],90:[2,87],95:[2,87],97:[2,87],106:[2,87],108:[2,87],109:[2,87],110:[2,87],114:[2,87],122:[2,87],130:[2,87],133:[2,87],134:[2,87],137:[2,87],138:[2,87],139:[2,87],140:[2,87],141:[2,87],142:[2,87],143:[2,87],144:[2,87],145:[2,87],146:[2,87]},{1:[2,88],6:[2,88],28:[2,88],29:[2,88],43:[2,88],52:[2,88],57:[2,88],60:[2,88],69:[2,88],70:[2,88],71:[2,88],72:[2,88],74:[2,88],76:[2,88],77:[2,88],81:[2,88],83:[2,88],88:[2,88],89:[2,88],90:[2,88],95:[2,88],97:[2,88],106:[2,88],108:[2,88],109:[2,88],110:[2,88],114:[2,88],122:[2,88],130:[2,88],133:[2,88],134:[2,88],137:[2,88],138:[2,88],139:[2,88],140:[2,88],141:[2,88],142:[2,88],143:[2,88],144:[2,88],145:[2,88],146:[2,88]},{76:[1,257]},{60:[1,207],76:[2,93],96:258,97:[1,206],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{76:[2,94]},{7:259,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,129],79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{11:[2,123],13:[2,123],31:[2,123],33:[2,123],34:[2,123],36:[2,123],37:[2,123],38:[2,123],39:[2,123],40:[2,123],41:[2,123],48:[2,123],49:[2,123],50:[2,123],54:[2,123],55:[2,123],76:[2,123],79:[2,123],82:[2,123],86:[2,123],87:[2,123],92:[2,123],93:[2,123],94:[2,123],100:[2,123],104:[2,123],105:[2,123],108:[2,123],110:[2,123],112:[2,123],114:[2,123],123:[2,123],129:[2,123],131:[2,123],132:[2,123],133:[2,123],134:[2,123],135:[2,123],137:[2,123],138:[2,123]},{11:[2,124],13:[2,124],31:[2,124],33:[2,124],34:[2,124],36:[2,124],37:[2,124],38:[2,124],39:[2,124],40:[2,124],41:[2,124],48:[2,124],49:[2,124],50:[2,124],54:[2,124],55:[2,124],76:[2,124],79:[2,124],82:[2,124],86:[2,124],87:[2,124],92:[2,124],93:[2,124],94:[2,124],100:[2,124],104:[2,124],105:[2,124],108:[2,124],110:[2,124],112:[2,124],114:[2,124],123:[2,124],129:[2,124],131:[2,124],132:[2,124],133:[2,124],134:[2,124],135:[2,124],137:[2,124],138:[2,124]},{1:[2,92],6:[2,92],28:[2,92],29:[2,92],43:[2,92],52:[2,92],57:[2,92],60:[2,92],69:[2,92],70:[2,92],71:[2,92],72:[2,92],74:[2,92],76:[2,92],77:[2,92],81:[2,92],83:[2,92],88:[2,92],89:[2,92],90:[2,92],95:[2,92],97:[2,92],106:[2,92],108:[2,92],109:[2,92],110:[2,92],114:[2,92],122:[2,92],130:[2,92],133:[2,92],134:[2,92],137:[2,92],138:[2,92],139:[2,92],140:[2,92],141:[2,92],142:[2,92],143:[2,92],144:[2,92],145:[2,92],146:[2,92]},{1:[2,110],6:[2,110],28:[2,110],29:[2,110],52:[2,110],57:[2,110],60:[2,110],69:[2,110],70:[2,110],71:[2,110],72:[2,110],74:[2,110],76:[2,110],77:[2,110],81:[2,110],88:[2,110],89:[2,110],90:[2,110],95:[2,110],97:[2,110],106:[2,110],108:[2,110],109:[2,110],110:[2,110],114:[2,110],122:[2,110],130:[2,110],133:[2,110],134:[2,110],139:[2,110],140:[2,110],141:[2,110],142:[2,110],143:[2,110],144:[2,110],145:[2,110]},{1:[2,39],6:[2,39],28:[2,39],29:[2,39],52:[2,39],57:[2,39],60:[2,39],76:[2,39],81:[2,39],90:[2,39],95:[2,39],97:[2,39],106:[2,39],107:89,108:[2,39],109:[2,39],110:[2,39],113:90,114:[2,39],115:73,122:[2,39],130:[2,39],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:260,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:261,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,116],6:[2,116],28:[2,116],29:[2,116],43:[2,116],52:[2,116],57:[2,116],60:[2,116],69:[2,116],70:[2,116],71:[2,116],72:[2,116],74:[2,116],76:[2,116],77:[2,116],81:[2,116],83:[2,116],88:[2,116],89:[2,116],90:[2,116],95:[2,116],97:[2,116],106:[2,116],108:[2,116],109:[2,116],110:[2,116],114:[2,116],122:[2,116],130:[2,116],133:[2,116],134:[2,116],137:[2,116],138:[2,116],139:[2,116],140:[2,116],141:[2,116],142:[2,116],143:[2,116],144:[2,116],145:[2,116],146:[2,116]},{6:[2,56],28:[2,56],56:262,57:[1,245],90:[2,56]},{6:[2,135],28:[2,135],29:[2,135],57:[2,135],60:[1,263],90:[2,135],95:[2,135],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{53:264,54:[1,64],55:[1,65]},{6:[2,57],28:[2,57],29:[2,57],30:113,31:[1,77],47:114,58:265,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[1,266],28:[1,267]},{6:[2,64],28:[2,64],29:[2,64],52:[2,64],57:[2,64]},{7:268,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,27],6:[2,27],28:[2,27],29:[2,27],52:[2,27],57:[2,27],60:[2,27],76:[2,27],81:[2,27],90:[2,27],95:[2,27],97:[2,27],102:[2,27],103:[2,27],106:[2,27],108:[2,27],109:[2,27],110:[2,27],114:[2,27],122:[2,27],125:[2,27],127:[2,27],130:[2,27],133:[2,27],134:[2,27],139:[2,27],140:[2,27],141:[2,27],142:[2,27],143:[2,27],144:[2,27],145:[2,27]},{6:[1,78],29:[1,269]},{1:[2,200],6:[2,200],28:[2,200],29:[2,200],52:[2,200],57:[2,200],60:[2,200],76:[2,200],81:[2,200],90:[2,200],95:[2,200],97:[2,200],106:[2,200],107:89,108:[2,200],109:[2,200],110:[2,200],113:90,114:[2,200],115:73,122:[2,200],130:[2,200],133:[2,200],134:[2,200],139:[1,79],140:[2,200],141:[2,200],142:[2,200],143:[2,200],144:[2,200],145:[2,200]},{1:[2,214],6:[2,214],28:[2,214],29:[2,214],52:[2,214],57:[2,214],60:[2,214],76:[2,214],81:[2,214],90:[2,214],95:[2,214],97:[2,214],106:[2,214],107:89,108:[2,214],109:[2,214],110:[2,214],113:90,114:[2,214],115:73,122:[2,214],130:[2,214],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:270,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:271,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,217],6:[2,217],28:[2,217],29:[2,217],52:[2,217],57:[2,217],60:[2,217],76:[2,217],81:[2,217],90:[2,217],95:[2,217],97:[2,217],106:[2,217],107:89,108:[2,217],109:[2,217],110:[2,217],113:90,114:[2,217],115:73,122:[2,217],130:[2,217],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,191],6:[2,191],28:[2,191],29:[2,191],52:[2,191],57:[2,191],60:[2,191],76:[2,191],81:[2,191],90:[2,191],95:[2,191],97:[2,191],106:[2,191],108:[2,191],109:[2,191],110:[2,191],114:[2,191],122:[2,191],130:[2,191],133:[2,191],134:[2,191],139:[2,191],140:[2,191],141:[2,191],142:[2,191],143:[2,191],144:[2,191],145:[2,191]},{7:272,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,141],6:[2,141],28:[2,141],29:[2,141],52:[2,141],57:[2,141],60:[2,141],76:[2,141],81:[2,141],90:[2,141],95:[2,141],97:[2,141],102:[1,273],106:[2,141],108:[2,141],109:[2,141],110:[2,141],114:[2,141],122:[2,141],130:[2,141],133:[2,141],134:[2,141],139:[2,141],140:[2,141],141:[2,141],142:[2,141],143:[2,141],144:[2,141],145:[2,141]},{14:274,28:[1,120]},{14:277,28:[1,120],30:275,31:[1,77],62:276,79:[1,74]},{124:278,126:235,127:[1,236]},{29:[1,279],125:[1,280],126:281,127:[1,236]},{29:[2,184],125:[2,184],127:[2,184]},{7:283,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],99:282,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,103],6:[2,103],14:284,28:[1,120],29:[2,103],52:[2,103],57:[2,103],60:[2,103],76:[2,103],81:[2,103],90:[2,103],95:[2,103],97:[2,103],106:[2,103],107:89,108:[1,69],109:[2,103],110:[1,70],113:90,114:[1,72],115:73,122:[2,103],130:[2,103],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,106],6:[2,106],28:[2,106],29:[2,106],52:[2,106],57:[2,106],60:[2,106],76:[2,106],81:[2,106],90:[2,106],95:[2,106],97:[2,106],106:[2,106],108:[2,106],109:[2,106],110:[2,106],114:[2,106],122:[2,106],130:[2,106],133:[2,106],134:[2,106],139:[2,106],140:[2,106],141:[2,106],142:[2,106],143:[2,106],144:[2,106],145:[2,106]},{7:285,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,148],6:[2,148],28:[2,148],29:[2,148],52:[2,148],57:[2,148],60:[2,148],69:[2,148],70:[2,148],71:[2,148],72:[2,148],74:[2,148],76:[2,148],77:[2,148],81:[2,148],88:[2,148],89:[2,148],90:[2,148],95:[2,148],97:[2,148],106:[2,148],108:[2,148],109:[2,148],110:[2,148],114:[2,148],122:[2,148],130:[2,148],133:[2,148],134:[2,148],139:[2,148],140:[2,148],141:[2,148],142:[2,148],143:[2,148],144:[2,148],145:[2,148]},{6:[1,78],29:[1,286]},{7:287,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,71],11:[2,124],13:[2,124],28:[2,71],31:[2,124],33:[2,124],34:[2,124],36:[2,124],37:[2,124],38:[2,124],39:[2,124],40:[2,124],41:[2,124],48:[2,124],49:[2,124],50:[2,124],54:[2,124],55:[2,124],57:[2,71],79:[2,124],82:[2,124],86:[2,124],87:[2,124],92:[2,124],93:[2,124],94:[2,124],95:[2,71],100:[2,124],104:[2,124],105:[2,124],108:[2,124],110:[2,124],112:[2,124],114:[2,124],123:[2,124],129:[2,124],131:[2,124],132:[2,124],133:[2,124],134:[2,124],135:[2,124],137:[2,124],138:[2,124]},{6:[1,289],28:[1,290],95:[1,288]},{6:[2,57],7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[2,57],29:[2,57],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],90:[2,57],92:[1,62],93:[1,63],94:[1,61],95:[2,57],98:291,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],29:[2,56],56:292,57:[1,245]},{1:[2,188],6:[2,188],28:[2,188],29:[2,188],52:[2,188],57:[2,188],60:[2,188],76:[2,188],81:[2,188],90:[2,188],95:[2,188],97:[2,188],106:[2,188],108:[2,188],109:[2,188],110:[2,188],114:[2,188],122:[2,188],125:[2,188],130:[2,188],133:[2,188],134:[2,188],139:[2,188],140:[2,188],141:[2,188],142:[2,188],143:[2,188],144:[2,188],145:[2,188]},{7:293,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:294,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{120:[2,166],121:[2,166]},{30:171,31:[1,77],47:172,61:173,62:174,79:[1,74],93:[1,117],94:[1,118],119:295},{1:[2,173],6:[2,173],28:[2,173],29:[2,173],52:[2,173],57:[2,173],60:[2,173],76:[2,173],81:[2,173],90:[2,173],95:[2,173],97:[2,173],106:[2,173],107:89,108:[2,173],109:[1,296],110:[2,173],113:90,114:[2,173],115:73,122:[1,297],130:[2,173],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,174],6:[2,174],28:[2,174],29:[2,174],52:[2,174],57:[2,174],60:[2,174],76:[2,174],81:[2,174],90:[2,174],95:[2,174],97:[2,174],106:[2,174],107:89,108:[2,174],109:[1,298],110:[2,174],113:90,114:[2,174],115:73,122:[2,174],130:[2,174],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,300],28:[1,301],81:[1,299]},{6:[2,57],10:181,28:[2,57],29:[2,57],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:302,45:180,47:184,49:[1,49],81:[2,57],93:[1,117]},{7:303,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,304],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,91],6:[2,91],28:[2,91],29:[2,91],43:[2,91],52:[2,91],57:[2,91],60:[2,91],69:[2,91],70:[2,91],71:[2,91],72:[2,91],74:[2,91],76:[2,91],77:[2,91],81:[2,91],83:[2,91],88:[2,91],89:[2,91],90:[2,91],95:[2,91],97:[2,91],106:[2,91],108:[2,91],109:[2,91],110:[2,91],114:[2,91],122:[2,91],130:[2,91],133:[2,91],134:[2,91],137:[2,91],138:[2,91],139:[2,91],140:[2,91],141:[2,91],142:[2,91],143:[2,91],144:[2,91],145:[2,91],146:[2,91]},{7:305,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,127],79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{76:[2,128],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,40],6:[2,40],28:[2,40],29:[2,40],52:[2,40],57:[2,40],60:[2,40],76:[2,40],81:[2,40],90:[2,40],95:[2,40],97:[2,40],106:[2,40],107:89,108:[2,40],109:[2,40],110:[2,40],113:90,114:[2,40],115:73,122:[2,40],130:[2,40],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{29:[1,306],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,289],28:[1,290],90:[1,307]},{6:[2,71],28:[2,71],29:[2,71],57:[2,71],90:[2,71],95:[2,71]},{14:308,28:[1,120]},{6:[2,60],28:[2,60],29:[2,60],52:[2,60],57:[2,60]},{30:113,31:[1,77],47:114,58:309,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[2,58],28:[2,58],29:[2,58],30:113,31:[1,77],47:114,51:310,57:[2,58],58:110,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[2,65],28:[2,65],29:[2,65],52:[2,65],57:[2,65],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,28],6:[2,28],28:[2,28],29:[2,28],52:[2,28],57:[2,28],60:[2,28],76:[2,28],81:[2,28],90:[2,28],95:[2,28],97:[2,28],102:[2,28],103:[2,28],106:[2,28],108:[2,28],109:[2,28],110:[2,28],114:[2,28],122:[2,28],125:[2,28],127:[2,28],130:[2,28],133:[2,28],134:[2,28],139:[2,28],140:[2,28],141:[2,28],142:[2,28],143:[2,28],144:[2,28],145:[2,28]},{29:[1,311],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,216],6:[2,216],28:[2,216],29:[2,216],52:[2,216],57:[2,216],60:[2,216],76:[2,216],81:[2,216],90:[2,216],95:[2,216],97:[2,216],106:[2,216],107:89,108:[2,216],109:[2,216],110:[2,216],113:90,114:[2,216],115:73,122:[2,216],130:[2,216],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{14:312,28:[1,120],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{14:313,28:[1,120]},{1:[2,142],6:[2,142],28:[2,142],29:[2,142],52:[2,142],57:[2,142],60:[2,142],76:[2,142],81:[2,142],90:[2,142],95:[2,142],97:[2,142],106:[2,142],108:[2,142],109:[2,142],110:[2,142],114:[2,142],122:[2,142],130:[2,142],133:[2,142],134:[2,142],139:[2,142],140:[2,142],141:[2,142],142:[2,142],143:[2,142],144:[2,142],145:[2,142]},{14:314,28:[1,120]},{14:315,28:[1,120]},{1:[2,146],6:[2,146],28:[2,146],29:[2,146],52:[2,146],57:[2,146],60:[2,146],76:[2,146],81:[2,146],90:[2,146],95:[2,146],97:[2,146],102:[2,146],106:[2,146],108:[2,146],109:[2,146],110:[2,146],114:[2,146],122:[2,146],130:[2,146],133:[2,146],134:[2,146],139:[2,146],140:[2,146],141:[2,146],142:[2,146],143:[2,146],144:[2,146],145:[2,146]},{29:[1,316],125:[1,317],126:281,127:[1,236]},{1:[2,182],6:[2,182],28:[2,182],29:[2,182],52:[2,182],57:[2,182],60:[2,182],76:[2,182],81:[2,182],90:[2,182],95:[2,182],97:[2,182],106:[2,182],108:[2,182],109:[2,182],110:[2,182],114:[2,182],122:[2,182],130:[2,182],133:[2,182],134:[2,182],139:[2,182],140:[2,182],141:[2,182],142:[2,182],143:[2,182],144:[2,182],145:[2,182]},{14:318,28:[1,120]},{29:[2,185],125:[2,185],127:[2,185]},{14:319,28:[1,120],57:[1,320]},{28:[2,138],57:[2,138],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,104],6:[2,104],28:[2,104],29:[2,104],52:[2,104],57:[2,104],60:[2,104],76:[2,104],81:[2,104],90:[2,104],95:[2,104],97:[2,104],106:[2,104],108:[2,104],109:[2,104],110:[2,104],114:[2,104],122:[2,104],130:[2,104],133:[2,104],134:[2,104],139:[2,104],140:[2,104],141:[2,104],142:[2,104],143:[2,104],144:[2,104],145:[2,104]},{1:[2,107],6:[2,107],14:321,28:[1,120],29:[2,107],52:[2,107],57:[2,107],60:[2,107],76:[2,107],81:[2,107],90:[2,107],95:[2,107],97:[2,107],106:[2,107],107:89,108:[1,69],109:[2,107],110:[1,70],113:90,114:[1,72],115:73,122:[2,107],130:[2,107],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{106:[1,322]},{95:[1,323],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,122],6:[2,122],28:[2,122],29:[2,122],43:[2,122],52:[2,122],57:[2,122],60:[2,122],69:[2,122],70:[2,122],71:[2,122],72:[2,122],74:[2,122],76:[2,122],77:[2,122],81:[2,122],88:[2,122],89:[2,122],90:[2,122],95:[2,122],97:[2,122],106:[2,122],108:[2,122],109:[2,122],110:[2,122],114:[2,122],120:[2,122],121:[2,122],122:[2,122],130:[2,122],133:[2,122],134:[2,122],139:[2,122],140:[2,122],141:[2,122],142:[2,122],143:[2,122],144:[2,122],145:[2,122]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],98:324,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:325,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,131],28:[2,131],29:[2,131],57:[2,131],90:[2,131],95:[2,131]},{6:[1,289],28:[1,290],29:[1,326]},{1:[2,151],6:[2,151],28:[2,151],29:[2,151],52:[2,151],57:[2,151],60:[2,151],76:[2,151],81:[2,151],90:[2,151],95:[2,151],97:[2,151],106:[2,151],107:89,108:[1,69],109:[2,151],110:[1,70],113:90,114:[1,72],115:73,122:[2,151],130:[2,151],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,153],6:[2,153],28:[2,153],29:[2,153],52:[2,153],57:[2,153],60:[2,153],76:[2,153],81:[2,153],90:[2,153],95:[2,153],97:[2,153],106:[2,153],107:89,108:[1,69],109:[2,153],110:[1,70],113:90,114:[1,72],115:73,122:[2,153],130:[2,153],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{120:[2,172],121:[2,172]},{7:327,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:328,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:329,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,95],6:[2,95],28:[2,95],29:[2,95],43:[2,95],52:[2,95],57:[2,95],60:[2,95],69:[2,95],70:[2,95],71:[2,95],72:[2,95],74:[2,95],76:[2,95],77:[2,95],81:[2,95],88:[2,95],89:[2,95],90:[2,95],95:[2,95],97:[2,95],106:[2,95],108:[2,95],109:[2,95],110:[2,95],114:[2,95],120:[2,95],121:[2,95],122:[2,95],130:[2,95],133:[2,95],134:[2,95],139:[2,95],140:[2,95],141:[2,95],142:[2,95],143:[2,95],144:[2,95],145:[2,95]},{10:181,30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:330,45:180,47:184,49:[1,49],93:[1,117]},{6:[2,96],10:181,28:[2,96],29:[2,96],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:179,45:180,47:184,49:[1,49],57:[2,96],80:331,93:[1,117]},{6:[2,98],28:[2,98],29:[2,98],57:[2,98],81:[2,98]},{6:[2,43],28:[2,43],29:[2,43],57:[2,43],81:[2,43],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:332,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{76:[2,126],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,41],6:[2,41],28:[2,41],29:[2,41],52:[2,41],57:[2,41],60:[2,41],76:[2,41],81:[2,41],90:[2,41],95:[2,41],97:[2,41],106:[2,41],108:[2,41],109:[2,41],110:[2,41],114:[2,41],122:[2,41],130:[2,41],133:[2,41],134:[2,41],139:[2,41],140:[2,41],141:[2,41],142:[2,41],143:[2,41],144:[2,41],145:[2,41]},{1:[2,117],6:[2,117],28:[2,117],29:[2,117],43:[2,117],52:[2,117],57:[2,117],60:[2,117],69:[2,117],70:[2,117],71:[2,117],72:[2,117],74:[2,117],76:[2,117],77:[2,117],81:[2,117],83:[2,117],88:[2,117],89:[2,117],90:[2,117],95:[2,117],97:[2,117],106:[2,117],108:[2,117],109:[2,117],110:[2,117],114:[2,117],122:[2,117],130:[2,117],133:[2,117],134:[2,117],137:[2,117],138:[2,117],139:[2,117],140:[2,117],141:[2,117],142:[2,117],143:[2,117],144:[2,117],145:[2,117],146:[2,117]},{1:[2,52],6:[2,52],28:[2,52],29:[2,52],52:[2,52],57:[2,52],60:[2,52],76:[2,52],81:[2,52],90:[2,52],95:[2,52],97:[2,52],106:[2,52],108:[2,52],109:[2,52],110:[2,52],114:[2,52],122:[2,52],130:[2,52],133:[2,52],134:[2,52],139:[2,52],140:[2,52],141:[2,52],142:[2,52],143:[2,52],144:[2,52],145:[2,52]},{6:[2,61],28:[2,61],29:[2,61],52:[2,61],57:[2,61]},{6:[2,56],28:[2,56],29:[2,56],56:333,57:[1,217]},{1:[2,215],6:[2,215],28:[2,215],29:[2,215],52:[2,215],57:[2,215],60:[2,215],76:[2,215],81:[2,215],90:[2,215],95:[2,215],97:[2,215],106:[2,215],108:[2,215],109:[2,215],110:[2,215],114:[2,215],122:[2,215],130:[2,215],133:[2,215],134:[2,215],139:[2,215],140:[2,215],141:[2,215],142:[2,215],143:[2,215],144:[2,215],145:[2,215]},{1:[2,189],6:[2,189],28:[2,189],29:[2,189],52:[2,189],57:[2,189],60:[2,189],76:[2,189],81:[2,189],90:[2,189],95:[2,189],97:[2,189],106:[2,189],108:[2,189],109:[2,189],110:[2,189],114:[2,189],122:[2,189],125:[2,189],130:[2,189],133:[2,189],134:[2,189],139:[2,189],140:[2,189],141:[2,189],142:[2,189],143:[2,189],144:[2,189],145:[2,189]},{1:[2,143],6:[2,143],28:[2,143],29:[2,143],52:[2,143],57:[2,143],60:[2,143],76:[2,143],81:[2,143],90:[2,143],95:[2,143],97:[2,143],106:[2,143],108:[2,143],109:[2,143],110:[2,143],114:[2,143],122:[2,143],130:[2,143],133:[2,143],134:[2,143],139:[2,143],140:[2,143],141:[2,143],142:[2,143],143:[2,143],144:[2,143],145:[2,143]},{1:[2,144],6:[2,144],28:[2,144],29:[2,144],52:[2,144],57:[2,144],60:[2,144],76:[2,144],81:[2,144],90:[2,144],95:[2,144],97:[2,144],102:[2,144],106:[2,144],108:[2,144],109:[2,144],110:[2,144],114:[2,144],122:[2,144],130:[2,144],133:[2,144],134:[2,144],139:[2,144],140:[2,144],141:[2,144],142:[2,144],143:[2,144],144:[2,144],145:[2,144]},{1:[2,145],6:[2,145],28:[2,145],29:[2,145],52:[2,145],57:[2,145],60:[2,145],76:[2,145],81:[2,145],90:[2,145],95:[2,145],97:[2,145],102:[2,145],106:[2,145],108:[2,145],109:[2,145],110:[2,145],114:[2,145],122:[2,145],130:[2,145],133:[2,145],134:[2,145],139:[2,145],140:[2,145],141:[2,145],142:[2,145],143:[2,145],144:[2,145],145:[2,145]},{1:[2,180],6:[2,180],28:[2,180],29:[2,180],52:[2,180],57:[2,180],60:[2,180],76:[2,180],81:[2,180],90:[2,180],95:[2,180],97:[2,180],106:[2,180],108:[2,180],109:[2,180],110:[2,180],114:[2,180],122:[2,180],130:[2,180],133:[2,180],134:[2,180],139:[2,180],140:[2,180],141:[2,180],142:[2,180],143:[2,180],144:[2,180],145:[2,180]},{14:334,28:[1,120]},{29:[1,335]},{6:[1,336],29:[2,186],125:[2,186],127:[2,186]},{7:337,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,108],6:[2,108],28:[2,108],29:[2,108],52:[2,108],57:[2,108],60:[2,108],76:[2,108],81:[2,108],90:[2,108],95:[2,108],97:[2,108],106:[2,108],108:[2,108],109:[2,108],110:[2,108],114:[2,108],122:[2,108],130:[2,108],133:[2,108],134:[2,108],139:[2,108],140:[2,108],141:[2,108],142:[2,108],143:[2,108],144:[2,108],145:[2,108]},{1:[2,149],6:[2,149],28:[2,149],29:[2,149],52:[2,149],57:[2,149],60:[2,149],69:[2,149],70:[2,149],71:[2,149],72:[2,149],74:[2,149],76:[2,149],77:[2,149],81:[2,149],88:[2,149],89:[2,149],90:[2,149],95:[2,149],97:[2,149],106:[2,149],108:[2,149],109:[2,149],110:[2,149],114:[2,149],122:[2,149],130:[2,149],133:[2,149],134:[2,149],139:[2,149],140:[2,149],141:[2,149],142:[2,149],143:[2,149],144:[2,149],145:[2,149]},{1:[2,125],6:[2,125],28:[2,125],29:[2,125],52:[2,125],57:[2,125],60:[2,125],69:[2,125],70:[2,125],71:[2,125],72:[2,125],74:[2,125],76:[2,125],77:[2,125],81:[2,125],88:[2,125],89:[2,125],90:[2,125],95:[2,125],97:[2,125],106:[2,125],108:[2,125],109:[2,125],110:[2,125],114:[2,125],122:[2,125],130:[2,125],133:[2,125],134:[2,125],139:[2,125],140:[2,125],141:[2,125],142:[2,125],143:[2,125],144:[2,125],145:[2,125]},{6:[2,132],28:[2,132],29:[2,132],57:[2,132],90:[2,132],95:[2,132]},{6:[2,56],28:[2,56],29:[2,56],56:338,57:[1,245]},{6:[2,133],28:[2,133],29:[2,133],57:[2,133],90:[2,133],95:[2,133]},{1:[2,175],6:[2,175],28:[2,175],29:[2,175],52:[2,175],57:[2,175],60:[2,175],76:[2,175],81:[2,175],90:[2,175],95:[2,175],97:[2,175],106:[2,175],107:89,108:[2,175],109:[2,175],110:[2,175],113:90,114:[2,175],115:73,122:[1,339],130:[2,175],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,177],6:[2,177],28:[2,177],29:[2,177],52:[2,177],57:[2,177],60:[2,177],76:[2,177],81:[2,177],90:[2,177],95:[2,177],97:[2,177],106:[2,177],107:89,108:[2,177],109:[1,340],110:[2,177],113:90,114:[2,177],115:73,122:[2,177],130:[2,177],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,176],6:[2,176],28:[2,176],29:[2,176],52:[2,176],57:[2,176],60:[2,176],76:[2,176],81:[2,176],90:[2,176],95:[2,176],97:[2,176],106:[2,176],107:89,108:[2,176],109:[2,176],110:[2,176],113:90,114:[2,176],115:73,122:[2,176],130:[2,176],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[2,99],28:[2,99],29:[2,99],57:[2,99],81:[2,99]},{6:[2,56],28:[2,56],29:[2,56],56:341,57:[1,255]},{29:[1,342],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,266],28:[1,267],29:[1,343]},{29:[1,344]},{1:[2,183],6:[2,183],28:[2,183],29:[2,183],52:[2,183],57:[2,183],60:[2,183],76:[2,183],81:[2,183],90:[2,183],95:[2,183],97:[2,183],106:[2,183],108:[2,183],109:[2,183],110:[2,183],114:[2,183],122:[2,183],130:[2,183],133:[2,183],134:[2,183],139:[2,183],140:[2,183],141:[2,183],142:[2,183],143:[2,183],144:[2,183],145:[2,183]},{29:[2,187],125:[2,187],127:[2,187]},{28:[2,139],57:[2,139],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,289],28:[1,290],29:[1,345]},{7:346,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:347,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[1,300],28:[1,301],29:[1,348]},{6:[2,44],28:[2,44],29:[2,44],57:[2,44],81:[2,44]},{6:[2,62],28:[2,62],29:[2,62],52:[2,62],57:[2,62]},{1:[2,181],6:[2,181],28:[2,181],29:[2,181],52:[2,181],57:[2,181],60:[2,181],76:[2,181],81:[2,181],90:[2,181],95:[2,181],97:[2,181],106:[2,181],108:[2,181],109:[2,181],110:[2,181],114:[2,181],122:[2,181],130:[2,181],133:[2,181],134:[2,181],139:[2,181],140:[2,181],141:[2,181],142:[2,181],143:[2,181],144:[2,181],145:[2,181]},{6:[2,134],28:[2,134],29:[2,134],57:[2,134],90:[2,134],95:[2,134]},{1:[2,178],6:[2,178],28:[2,178],29:[2,178],52:[2,178],57:[2,178],60:[2,178],76:[2,178],81:[2,178],90:[2,178],95:[2,178],97:[2,178],106:[2,178],107:89,108:[2,178],109:[2,178],110:[2,178],113:90,114:[2,178],115:73,122:[2,178],130:[2,178],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,179],6:[2,179],28:[2,179],29:[2,179],52:[2,179],57:[2,179],60:[2,179],76:[2,179],81:[2,179],90:[2,179],95:[2,179],97:[2,179],106:[2,179],107:89,108:[2,179],109:[2,179],110:[2,179],113:90,114:[2,179],115:73,122:[2,179],130:[2,179],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[2,100],28:[2,100],29:[2,100],57:[2,100],81:[2,100]}],
defaultActions: {64:[2,54],65:[2,55],96:[2,115],204:[2,94]},
parseError: function parseError(str, hash) {
    if (hash.recoverable) {
        this.trace(str);
    } else {
        throw new Error(str);
    }
},
parse: function parse(input) {
    var self = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
    var args = lstack.slice.call(arguments, 1);
    this.lexer.setInput(input);
    this.lexer.yy = this.yy;
    this.yy.lexer = this.lexer;
    this.yy.parser = this;
    if (typeof this.lexer.yylloc == 'undefined') {
        this.lexer.yylloc = {};
    }
    var yyloc = this.lexer.yylloc;
    lstack.push(yyloc);
    var ranges = this.lexer.options && this.lexer.options.ranges;
    if (typeof this.yy.parseError === 'function') {
        this.parseError = this.yy.parseError;
    } else {
        this.parseError = Object.getPrototypeOf(this).parseError;
    }
    function popStack(n) {
        stack.length = stack.length - 2 * n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }
    function lex() {
        var token;
        token = self.lexer.lex() || EOF;
        if (typeof token !== 'number') {
            token = self.symbols_[token] || token;
        }
        return token;
    }
    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
    while (true) {
        state = stack[stack.length - 1];
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol === null || typeof symbol == 'undefined') {
                symbol = lex();
            }
            action = table[state] && table[state][symbol];
        }
                    if (typeof action === 'undefined' || !action.length || !action[0]) {
                var errStr = '';
                expected = [];
                for (p in table[state]) {
                    if (this.terminals_[p] && p > TERROR) {
                        expected.push('\'' + this.terminals_[p] + '\'');
                    }
                }
                if (this.lexer.showPosition) {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\n' + this.lexer.showPosition() + '\nExpecting ' + expected.join(', ') + ', got \'' + (this.terminals_[symbol] || symbol) + '\'';
                } else {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\'' + (this.terminals_[symbol] || symbol) + '\'');
                }
                this.parseError(errStr, {
                    text: this.lexer.match,
                    token: this.terminals_[symbol] || symbol,
                    line: this.lexer.yylineno,
                    loc: yyloc,
                    expected: expected
                });
            }
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);
        }
        switch (action[0]) {
        case 1:
            stack.push(symbol);
            vstack.push(this.lexer.yytext);
            lstack.push(this.lexer.yylloc);
            stack.push(action[1]);
            symbol = null;
            if (!preErrorSymbol) {
                yyleng = this.lexer.yyleng;
                yytext = this.lexer.yytext;
                yylineno = this.lexer.yylineno;
                yyloc = this.lexer.yylloc;
                if (recovering > 0) {
                    recovering--;
                }
            } else {
                symbol = preErrorSymbol;
                preErrorSymbol = null;
            }
            break;
        case 2:
            len = this.productions_[action[1]][1];
            yyval.$ = vstack[vstack.length - len];
            yyval._$ = {
                first_line: lstack[lstack.length - (len || 1)].first_line,
                last_line: lstack[lstack.length - 1].last_line,
                first_column: lstack[lstack.length - (len || 1)].first_column,
                last_column: lstack[lstack.length - 1].last_column
            };
            if (ranges) {
                yyval._$.range = [
                    lstack[lstack.length - (len || 1)].range[0],
                    lstack[lstack.length - 1].range[1]
                ];
            }
            r = this.performAction.apply(yyval, [
                yytext,
                yyleng,
                yylineno,
                this.yy,
                action[1],
                vstack,
                lstack
            ].concat(args));
            if (typeof r !== 'undefined') {
                return r;
            }
            if (len) {
                stack = stack.slice(0, -1 * len * 2);
                vstack = vstack.slice(0, -1 * len);
                lstack = lstack.slice(0, -1 * len);
            }
            stack.push(this.productions_[action[1]][0]);
            vstack.push(yyval.$);
            lstack.push(yyval._$);
            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
            stack.push(newState);
            break;
        case 3:
            return true;
        }
    }
    return true;
}};

function Parser () {
  this.yy = {};
}
Parser.prototype = parser;parser.Parser = Parser;
return new Parser;
})();


if (typeof require !== 'undefined' && typeof exports !== 'undefined') {
exports.parser = parser;
exports.Parser = parser.Parser;
exports.parse = function () { return parser.parse.apply(parser, arguments); };
exports.main = function commonjsMain(args) {
    if (!args[1]) {
        console.log('Usage: '+args[0]+' FILE');
        process.exit(1);
    }
    var source = require('fs').readFileSync(require('path').normalize(args[1]), "utf8");
    return exports.parser.parse(source);
};
if (typeof module !== 'undefined' && require.main === module) {
  exports.main(process.argv.slice(1));
}
}
}).call(this,require('_process'))

},{"_process":38,"fs":15,"path":37}],26:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var CoffeeScript, Module, binary, child_process, ext, findExtension, fork, helpers, loadFile, path, _i, _len, _ref;

  CoffeeScript = require('./coffee-script');

  child_process = require('child_process');

  helpers = require('./helpers');

  path = require('path');

  loadFile = function(module, filename) {
    var answer;
    answer = CoffeeScript._compileFile(filename, false, {
      runtime: "interp"
    });
    return module._compile(answer, filename);
  };

  if (require.extensions) {
    _ref = CoffeeScript.FILE_EXTENSIONS;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ext = _ref[_i];
      require.extensions[ext] = loadFile;
    }
    Module = require('module');
    findExtension = function(filename) {
      var curExtension, extensions;
      extensions = path.basename(filename).split('.');
      if (extensions[0] === '') {
        extensions.shift();
      }
      while (extensions.shift()) {
        curExtension = '.' + extensions.join('.');
        if (Module._extensions[curExtension]) {
          return curExtension;
        }
      }
      return '.js';
    };
    Module.prototype.load = function(filename) {
      var extension;
      this.filename = filename;
      this.paths = Module._nodeModulePaths(path.dirname(filename));
      extension = findExtension(filename);
      Module._extensions[extension](this, filename);
      return this.loaded = true;
    };
  }

  if (child_process) {
    fork = child_process.fork;
    binary = require.resolve('../../bin/coffee');
    child_process.fork = function(path, args, options) {
      if (helpers.isCoffee(path)) {
        if (!Array.isArray(args)) {
          options = args || {};
          args = [];
        }
        args = [path].concat(args);
        path = binary;
      }
      return fork(path, args, options);
    };
  }

}).call(this);

},{"./coffee-script":20,"./helpers":21,"child_process":15,"module":15,"path":37}],27:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var BALANCED_PAIRS, CALL_CLOSERS, EXPRESSION_CLOSE, EXPRESSION_END, EXPRESSION_START, IMPLICIT_CALL, IMPLICIT_END, IMPLICIT_FUNC, IMPLICIT_UNSPACED_CALL, INVERSES, LINEBREAKS, SINGLE_CLOSERS, SINGLE_LINERS, generate, left, rite, _i, _len, _ref,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice;

  generate = function(tag, value, origin) {
    var tok;
    tok = [tag, value];
    tok.generated = true;
    if (origin) {
      tok.origin = origin;
    }
    return tok;
  };

  exports.Rewriter = (function() {
    function Rewriter() {}

    Rewriter.prototype.rewrite = function(tokens) {
      this.tokens = tokens;
      this.removeLeadingNewlines();
      this.closeOpenCalls();
      this.closeOpenIndexes();
      this.normalizeLines();
      this.tagPostfixConditionals();
      this.addImplicitBracesAndParens();
      this.addLocationDataToGeneratedTokens();
      return this.tokens;
    };

    Rewriter.prototype.scanTokens = function(block) {
      var i, token, tokens;
      tokens = this.tokens;
      i = 0;
      while (token = tokens[i]) {
        i += block.call(this, token, i, tokens);
      }
      return true;
    };

    Rewriter.prototype.detectEnd = function(i, condition, action) {
      var levels, token, tokens, _ref, _ref1;
      tokens = this.tokens;
      levels = 0;
      while (token = tokens[i]) {
        if (levels === 0 && condition.call(this, token, i)) {
          return action.call(this, token, i);
        }
        if (!token || levels < 0) {
          return action.call(this, token, i - 1);
        }
        if (_ref = token[0], __indexOf.call(EXPRESSION_START, _ref) >= 0) {
          levels += 1;
        } else if (_ref1 = token[0], __indexOf.call(EXPRESSION_END, _ref1) >= 0) {
          levels -= 1;
        }
        i += 1;
      }
      return i - 1;
    };

    Rewriter.prototype.removeLeadingNewlines = function() {
      var i, tag, _i, _len, _ref;
      _ref = this.tokens;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        tag = _ref[i][0];
        if (tag !== 'TERMINATOR') {
          break;
        }
      }
      if (i) {
        return this.tokens.splice(0, i);
      }
    };

    Rewriter.prototype.closeOpenCalls = function() {
      var action, condition;
      condition = function(token, i) {
        var _ref;
        return ((_ref = token[0]) === ')' || _ref === 'CALL_END') || token[0] === 'OUTDENT' && this.tag(i - 1) === ')';
      };
      action = function(token, i) {
        return this.tokens[token[0] === 'OUTDENT' ? i - 1 : i][0] = 'CALL_END';
      };
      return this.scanTokens(function(token, i) {
        if (token[0] === 'CALL_START') {
          this.detectEnd(i + 1, condition, action);
        }
        return 1;
      });
    };

    Rewriter.prototype.closeOpenIndexes = function() {
      var action, condition;
      condition = function(token, i) {
        var _ref;
        return (_ref = token[0]) === ']' || _ref === 'INDEX_END';
      };
      action = function(token, i) {
        return token[0] = 'INDEX_END';
      };
      return this.scanTokens(function(token, i) {
        if (token[0] === 'INDEX_START') {
          this.detectEnd(i + 1, condition, action);
        }
        return 1;
      });
    };

    Rewriter.prototype.matchTags = function() {
      var fuzz, i, j, pattern, _i, _ref, _ref1;
      i = arguments[0], pattern = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
      fuzz = 0;
      for (j = _i = 0, _ref = pattern.length; 0 <= _ref ? _i < _ref : _i > _ref; j = 0 <= _ref ? ++_i : --_i) {
        while (this.tag(i + j + fuzz) === 'HERECOMMENT') {
          fuzz += 2;
        }
        if (pattern[j] == null) {
          continue;
        }
        if (typeof pattern[j] === 'string') {
          pattern[j] = [pattern[j]];
        }
        if (_ref1 = this.tag(i + j + fuzz), __indexOf.call(pattern[j], _ref1) < 0) {
          return false;
        }
      }
      return true;
    };

    Rewriter.prototype.looksObjectish = function(j) {
      return this.matchTags(j, '@', null, ':') || this.matchTags(j, null, ':');
    };

    Rewriter.prototype.findTagsBackwards = function(i, tags) {
      var backStack, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
      backStack = [];
      while (i >= 0 && (backStack.length || (_ref2 = this.tag(i), __indexOf.call(tags, _ref2) < 0) && ((_ref3 = this.tag(i), __indexOf.call(EXPRESSION_START, _ref3) < 0) || this.tokens[i].generated) && (_ref4 = this.tag(i), __indexOf.call(LINEBREAKS, _ref4) < 0))) {
        if (_ref = this.tag(i), __indexOf.call(EXPRESSION_END, _ref) >= 0) {
          backStack.push(this.tag(i));
        }
        if ((_ref1 = this.tag(i), __indexOf.call(EXPRESSION_START, _ref1) >= 0) && backStack.length) {
          backStack.pop();
        }
        i -= 1;
      }
      return _ref5 = this.tag(i), __indexOf.call(tags, _ref5) >= 0;
    };

    Rewriter.prototype.addImplicitBracesAndParens = function() {
      var stack;
      stack = [];
      return this.scanTokens(function(token, i, tokens) {
        var endImplicitCall, endImplicitObject, forward, inImplicit, inImplicitCall, inImplicitControl, inImplicitObject, newLine, nextTag, offset, prevTag, prevToken, ret, s, sameLine, stackIdx, stackTag, stackTop, startIdx, startImplicitCall, startImplicitObject, startsLine, tag, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
        tag = token[0];
        prevTag = (prevToken = i > 0 ? tokens[i - 1] : [])[0];
        nextTag = (i < tokens.length - 1 ? tokens[i + 1] : [])[0];
        stackTop = function() {
          return stack[stack.length - 1];
        };
        startIdx = i;
        forward = function(n) {
          return i - startIdx + n;
        };
        inImplicit = function() {
          var _ref, _ref1;
          return (_ref = stackTop()) != null ? (_ref1 = _ref[2]) != null ? _ref1.ours : void 0 : void 0;
        };
        inImplicitCall = function() {
          var _ref;
          return inImplicit() && ((_ref = stackTop()) != null ? _ref[0] : void 0) === '(';
        };
        inImplicitObject = function() {
          var _ref;
          return inImplicit() && ((_ref = stackTop()) != null ? _ref[0] : void 0) === '{';
        };
        inImplicitControl = function() {
          var _ref;
          return inImplicit && ((_ref = stackTop()) != null ? _ref[0] : void 0) === 'CONTROL';
        };
        startImplicitCall = function(j) {
          var idx;
          idx = j != null ? j : i;
          stack.push([
            '(', idx, {
              ours: true
            }
          ]);
          tokens.splice(idx, 0, generate('CALL_START', '('));
          if (j == null) {
            return i += 1;
          }
        };
        endImplicitCall = function() {
          stack.pop();
          tokens.splice(i, 0, generate('CALL_END', ')'));
          return i += 1;
        };
        startImplicitObject = function(j, startsLine) {
          var idx;
          if (startsLine == null) {
            startsLine = true;
          }
          idx = j != null ? j : i;
          stack.push([
            '{', idx, {
              sameLine: true,
              startsLine: startsLine,
              ours: true
            }
          ]);
          tokens.splice(idx, 0, generate('{', generate(new String('{')), token));
          if (j == null) {
            return i += 1;
          }
        };
        endImplicitObject = function(j) {
          j = j != null ? j : i;
          stack.pop();
          tokens.splice(j, 0, generate('}', '}', token));
          return i += 1;
        };
        if (inImplicitCall() && (tag === 'IF' || tag === 'TRY' || tag === 'FINALLY' || tag === 'CATCH' || tag === 'CLASS' || tag === 'SWITCH')) {
          stack.push([
            'CONTROL', i, {
              ours: true
            }
          ]);
          return forward(1);
        }
        if (tag === 'INDENT' && inImplicit()) {
          if (prevTag !== '=>' && prevTag !== '->' && prevTag !== '[' && prevTag !== '(' && prevTag !== ',' && prevTag !== '{' && prevTag !== 'TRY' && prevTag !== 'ELSE' && prevTag !== '=') {
            while (inImplicitCall()) {
              endImplicitCall();
            }
          }
          if (inImplicitControl()) {
            stack.pop();
          }
          stack.push([tag, i]);
          return forward(1);
        }
        if (__indexOf.call(EXPRESSION_START, tag) >= 0) {
          stack.push([tag, i]);
          return forward(1);
        }
        if (__indexOf.call(EXPRESSION_END, tag) >= 0) {
          while (inImplicit()) {
            if (inImplicitCall()) {
              endImplicitCall();
            } else if (inImplicitObject()) {
              endImplicitObject();
            } else {
              stack.pop();
            }
          }
          stack.pop();
        }
        if ((__indexOf.call(IMPLICIT_FUNC, tag) >= 0 && token.spaced && !token.stringEnd || tag === '?' && i > 0 && !tokens[i - 1].spaced) && (__indexOf.call(IMPLICIT_CALL, nextTag) >= 0 || __indexOf.call(IMPLICIT_UNSPACED_CALL, nextTag) >= 0 && !((_ref = tokens[i + 1]) != null ? _ref.spaced : void 0) && !((_ref1 = tokens[i + 1]) != null ? _ref1.newLine : void 0))) {
          if (tag === '?') {
            tag = token[0] = 'FUNC_EXIST';
          }
          startImplicitCall(i + 1);
          ret = forward(2);
          return ret;
        }
        if (__indexOf.call(IMPLICIT_FUNC, tag) >= 0 && this.matchTags(i + 1, 'INDENT', null, ':') && !this.findTagsBackwards(i, ['CLASS', 'EXTENDS', 'IF', 'CATCH', 'SWITCH', 'LEADING_WHEN', 'FOR', 'WHILE', 'UNTIL'])) {
          startImplicitCall(i + 1);
          stack.push(['INDENT', i + 2]);
          return forward(3);
        }
        if (tag === ':') {
          if (this.tag(i - 2) === '@') {
            s = i - 2;
          } else {
            s = i - 1;
          }
          while (this.tag(s - 2) === 'HERECOMMENT') {
            s -= 2;
          }
          this.insideForDeclaration = nextTag === 'FOR';
          startsLine = s === 0 || (_ref2 = this.tag(s - 1), __indexOf.call(LINEBREAKS, _ref2) >= 0) || tokens[s - 1].newLine;
          if (stackTop()) {
            _ref3 = stackTop(), stackTag = _ref3[0], stackIdx = _ref3[1];
            if ((stackTag === '{' || stackTag === 'INDENT' && this.tag(stackIdx - 1) === '{') && (startsLine || this.tag(s - 1) === ',' || this.tag(s - 1) === '{')) {
              return forward(1);
            }
          }
          startImplicitObject(s, !!startsLine);
          return forward(2);
        }
        if (inImplicitObject() && __indexOf.call(LINEBREAKS, tag) >= 0) {
          stackTop()[2].sameLine = false;
        }
        newLine = prevTag === 'OUTDENT' || prevToken.newLine;
        if (__indexOf.call(IMPLICIT_END, tag) >= 0 || __indexOf.call(CALL_CLOSERS, tag) >= 0 && newLine) {
          while (inImplicit()) {
            _ref4 = stackTop(), stackTag = _ref4[0], stackIdx = _ref4[1], (_ref5 = _ref4[2], sameLine = _ref5.sameLine, startsLine = _ref5.startsLine);
            if (inImplicitCall() && prevTag !== ',') {
              endImplicitCall();
            } else if (inImplicitObject() && !this.insideForDeclaration && sameLine && tag !== 'TERMINATOR' && prevTag !== ':' && endImplicitObject()) {

            } else if (inImplicitObject() && tag === 'TERMINATOR' && prevTag !== ',' && !(startsLine && this.looksObjectish(i + 1))) {
              endImplicitObject();
            } else {
              break;
            }
          }
        }
        if (tag === ',' && !this.looksObjectish(i + 1) && inImplicitObject() && !this.insideForDeclaration && (nextTag !== 'TERMINATOR' || !this.looksObjectish(i + 2))) {
          offset = nextTag === 'OUTDENT' ? 1 : 0;
          while (inImplicitObject()) {
            endImplicitObject(i + offset);
          }
        }
        return forward(1);
      });
    };

    Rewriter.prototype.addLocationDataToGeneratedTokens = function() {
      return this.scanTokens(function(token, i, tokens) {
        var column, line, nextLocation, prevLocation, _ref, _ref1;
        if (token[2]) {
          return 1;
        }
        if (!(token.generated || token.explicit)) {
          return 1;
        }
        if (token[0] === '{' && (nextLocation = (_ref = tokens[i + 1]) != null ? _ref[2] : void 0)) {
          line = nextLocation.first_line, column = nextLocation.first_column;
        } else if (prevLocation = (_ref1 = tokens[i - 1]) != null ? _ref1[2] : void 0) {
          line = prevLocation.last_line, column = prevLocation.last_column;
        } else {
          line = column = 0;
        }
        token[2] = {
          first_line: line,
          first_column: column,
          last_line: line,
          last_column: column
        };
        return 1;
      });
    };

    Rewriter.prototype.normalizeLines = function() {
      var action, condition, indent, outdent, starter;
      starter = indent = outdent = null;
      condition = function(token, i) {
        var _ref, _ref1, _ref2, _ref3;
        return token[1] !== ';' && (_ref = token[0], __indexOf.call(SINGLE_CLOSERS, _ref) >= 0) && !(token[0] === 'TERMINATOR' && (_ref1 = this.tag(i + 1), __indexOf.call(EXPRESSION_CLOSE, _ref1) >= 0)) && !(token[0] === 'ELSE' && starter !== 'THEN') && !(((_ref2 = token[0]) === 'CATCH' || _ref2 === 'FINALLY') && (starter === '->' || starter === '=>')) || (_ref3 = token[0], __indexOf.call(CALL_CLOSERS, _ref3) >= 0) && this.tokens[i - 1].newLine;
      };
      action = function(token, i) {
        return this.tokens.splice((this.tag(i - 1) === ',' ? i - 1 : i), 0, outdent);
      };
      return this.scanTokens(function(token, i, tokens) {
        var j, tag, _i, _ref, _ref1, _ref2;
        tag = token[0];
        if (tag === 'TERMINATOR') {
          if (this.tag(i + 1) === 'ELSE' && this.tag(i - 1) !== 'OUTDENT') {
            tokens.splice.apply(tokens, [i, 1].concat(__slice.call(this.indentation())));
            return 1;
          }
          if (_ref = this.tag(i + 1), __indexOf.call(EXPRESSION_CLOSE, _ref) >= 0) {
            tokens.splice(i, 1);
            return 0;
          }
        }
        if (tag === 'CATCH') {
          for (j = _i = 1; _i <= 2; j = ++_i) {
            if (!((_ref1 = this.tag(i + j)) === 'OUTDENT' || _ref1 === 'TERMINATOR' || _ref1 === 'FINALLY')) {
              continue;
            }
            tokens.splice.apply(tokens, [i + j, 0].concat(__slice.call(this.indentation())));
            return 2 + j;
          }
        }
        if (__indexOf.call(SINGLE_LINERS, tag) >= 0 && this.tag(i + 1) !== 'INDENT' && !(tag === 'ELSE' && this.tag(i + 1) === 'IF')) {
          starter = tag;
          _ref2 = this.indentation(tokens[i]), indent = _ref2[0], outdent = _ref2[1];
          if (starter === 'THEN') {
            indent.fromThen = true;
          }
          tokens.splice(i + 1, 0, indent);
          this.detectEnd(i + 2, condition, action);
          if (tag === 'THEN') {
            tokens.splice(i, 1);
          }
          return 1;
        }
        return 1;
      });
    };

    Rewriter.prototype.tagPostfixConditionals = function() {
      var action, condition, original;
      original = null;
      condition = function(token, i) {
        var prevTag, tag;
        tag = token[0];
        prevTag = this.tokens[i - 1][0];
        return tag === 'TERMINATOR' || (tag === 'INDENT' && __indexOf.call(SINGLE_LINERS, prevTag) < 0);
      };
      action = function(token, i) {
        if (token[0] !== 'INDENT' || (token.generated && !token.fromThen)) {
          return original[0] = 'POST_' + original[0];
        }
      };
      return this.scanTokens(function(token, i) {
        if (token[0] !== 'IF') {
          return 1;
        }
        original = token;
        this.detectEnd(i + 1, condition, action);
        return 1;
      });
    };

    Rewriter.prototype.indentation = function(origin) {
      var indent, outdent;
      indent = ['INDENT', 2];
      outdent = ['OUTDENT', 2];
      if (origin) {
        indent.generated = outdent.generated = true;
        indent.origin = outdent.origin = origin;
      } else {
        indent.explicit = outdent.explicit = true;
      }
      return [indent, outdent];
    };

    Rewriter.prototype.generate = generate;

    Rewriter.prototype.tag = function(i) {
      var _ref;
      return (_ref = this.tokens[i]) != null ? _ref[0] : void 0;
    };

    return Rewriter;

  })();

  BALANCED_PAIRS = [['(', ')'], ['[', ']'], ['{', '}'], ['INDENT', 'OUTDENT'], ['CALL_START', 'CALL_END'], ['PARAM_START', 'PARAM_END'], ['INDEX_START', 'INDEX_END']];

  exports.INVERSES = INVERSES = {};

  EXPRESSION_START = [];

  EXPRESSION_END = [];

  for (_i = 0, _len = BALANCED_PAIRS.length; _i < _len; _i++) {
    _ref = BALANCED_PAIRS[_i], left = _ref[0], rite = _ref[1];
    EXPRESSION_START.push(INVERSES[rite] = left);
    EXPRESSION_END.push(INVERSES[left] = rite);
  }

  EXPRESSION_CLOSE = ['CATCH', 'THEN', 'ELSE', 'FINALLY'].concat(EXPRESSION_END);

  IMPLICIT_FUNC = ['IDENTIFIER', 'SUPER', ')', 'CALL_END', ']', 'INDEX_END', '@', 'THIS'];

  IMPLICIT_CALL = ['IDENTIFIER', 'NUMBER', 'STRING', 'JS', 'REGEX', 'NEW', 'PARAM_START', 'CLASS', 'IF', 'TRY', 'SWITCH', 'THIS', 'BOOL', 'NULL', 'UNDEFINED', 'UNARY', 'YIELD', 'UNARY_MATH', 'SUPER', 'THROW', '@', '->', '=>', '[', '(', '{', '--', '++'];

  IMPLICIT_UNSPACED_CALL = ['+', '-'];

  IMPLICIT_END = ['POST_IF', 'FOR', 'WHILE', 'UNTIL', 'WHEN', 'BY', 'LOOP', 'TERMINATOR'];

  SINGLE_LINERS = ['ELSE', '->', '=>', 'TRY', 'FINALLY', 'THEN'];

  SINGLE_CLOSERS = ['TERMINATOR', 'CATCH', 'FINALLY', 'ELSE', 'OUTDENT', 'LEADING_WHEN'];

  LINEBREAKS = ['TERMINATOR', 'INDENT', 'OUTDENT'];

  CALL_CLOSERS = ['.', '?.', '::', '?::'];

  IMPLICIT_FUNC.push('DEFER');

  IMPLICIT_CALL.push('DEFER');

  IMPLICIT_END.push('AWAIT');

}).call(this);

},{}],28:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Scope, extend, iced, last, _ref;

  _ref = require('./helpers'), extend = _ref.extend, last = _ref.last;

  iced = require('iced-runtime');

  exports.Scope = Scope = (function() {
    Scope.root = null;

    function Scope(parent, expressions, method) {
      this.parent = parent;
      this.expressions = expressions;
      this.method = method;
      this.variables = [
        {
          name: 'arguments',
          type: 'arguments'
        }
      ];
      this.positions = {};
      if (!this.parent) {
        Scope.root = this;
      }
    }

    Scope.prototype.add = function(name, type, immediate) {
      if (this.shared && !immediate) {
        return this.parent.add(name, type, immediate);
      }
      if (Object.prototype.hasOwnProperty.call(this.positions, name)) {
        return this.variables[this.positions[name]].type = type;
      } else {
        return this.positions[name] = this.variables.push({
          name: name,
          type: type
        }) - 1;
      }
    };

    Scope.prototype.namedMethod = function() {
      var _ref1;
      if (((_ref1 = this.method) != null ? _ref1.name : void 0) || !this.parent) {
        return this.method;
      }
      return this.parent.namedMethod();
    };

    Scope.prototype.find = function(name) {
      if (this.check(name)) {
        return true;
      }
      this.add(name, 'var');
      return false;
    };

    Scope.prototype.parameter = function(name) {
      if (this.shared && this.parent.check(name, true)) {
        return;
      }
      return this.add(name, 'param');
    };

    Scope.prototype.check = function(name) {
      var _ref1;
      return !!(this.type(name) || ((_ref1 = this.parent) != null ? _ref1.check(name) : void 0));
    };

    Scope.prototype.temporary = function(name, index) {
      if (name.length > 1) {
        return '_' + name + (index > 1 ? index - 1 : '');
      } else {
        return '_' + (index + parseInt(name, 36)).toString(36).replace(/\d/g, 'a');
      }
    };

    Scope.prototype.type = function(name) {
      var v, _i, _len, _ref1;
      _ref1 = this.variables;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.name === name) {
          return v.type;
        }
      }
      return null;
    };

    Scope.prototype.freeVariable = function(name, reserve) {
      var index, temp;
      if (reserve == null) {
        reserve = true;
      }
      index = 0;
      while (this.check((temp = this.temporary(name, index)))) {
        index++;
      }
      if (reserve) {
        this.add(temp, 'var', true);
      }
      return temp;
    };

    Scope.prototype.assign = function(name, value) {
      this.add(name, {
        value: value,
        assigned: true
      }, true);
      return this.hasAssignments = true;
    };

    Scope.prototype.hasDeclarations = function() {
      return !!this.declaredVariables().length;
    };

    Scope.prototype.declaredVariables = function() {
      var realVars, tempVars, v, _i, _len, _ref1;
      realVars = [];
      tempVars = [];
      _ref1 = this.variables;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.type === 'var') {
          (v.name.charAt(0) === '_' ? tempVars : realVars).push(v.name);
        }
      }
      return realVars.sort().concat(tempVars.sort());
    };

    Scope.prototype.assignedVariables = function() {
      var v, _i, _len, _ref1, _results;
      _ref1 = this.variables;
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.type.assigned) {
          _results.push("" + v.name + " = " + v.type.value);
        }
      }
      return _results;
    };

    return Scope;

  })();

}).call(this);

},{"./helpers":21,"iced-runtime":32}],29:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var LineMap, SourceMap;

  LineMap = (function() {
    function LineMap(line) {
      this.line = line;
      this.columns = [];
    }

    LineMap.prototype.add = function(column, _arg, options) {
      var sourceColumn, sourceLine;
      sourceLine = _arg[0], sourceColumn = _arg[1];
      if (options == null) {
        options = {};
      }
      if (this.columns[column] && options.noReplace) {
        return;
      }
      return this.columns[column] = {
        line: this.line,
        column: column,
        sourceLine: sourceLine,
        sourceColumn: sourceColumn
      };
    };

    LineMap.prototype.sourceLocation = function(column) {
      var mapping;
      while (!((mapping = this.columns[column]) || (column <= 0))) {
        column--;
      }
      return mapping && [mapping.sourceLine, mapping.sourceColumn];
    };

    return LineMap;

  })();

  SourceMap = (function() {
    var BASE64_CHARS, VLQ_CONTINUATION_BIT, VLQ_SHIFT, VLQ_VALUE_MASK;

    function SourceMap() {
      this.lines = [];
    }

    SourceMap.prototype.add = function(sourceLocation, generatedLocation, options) {
      var column, line, lineMap, _base;
      if (options == null) {
        options = {};
      }
      line = generatedLocation[0], column = generatedLocation[1];
      lineMap = ((_base = this.lines)[line] || (_base[line] = new LineMap(line)));
      return lineMap.add(column, sourceLocation, options);
    };

    SourceMap.prototype.sourceLocation = function(_arg) {
      var column, line, lineMap;
      line = _arg[0], column = _arg[1];
      while (!((lineMap = this.lines[line]) || (line <= 0))) {
        line--;
      }
      return lineMap && lineMap.sourceLocation(column);
    };

    SourceMap.prototype.generate = function(options, code) {
      var buffer, lastColumn, lastSourceColumn, lastSourceLine, lineMap, lineNumber, mapping, needComma, v3, writingline, _i, _j, _len, _len1, _ref, _ref1;
      if (options == null) {
        options = {};
      }
      if (code == null) {
        code = null;
      }
      writingline = 0;
      lastColumn = 0;
      lastSourceLine = 0;
      lastSourceColumn = 0;
      needComma = false;
      buffer = "";
      _ref = this.lines;
      for (lineNumber = _i = 0, _len = _ref.length; _i < _len; lineNumber = ++_i) {
        lineMap = _ref[lineNumber];
        if (lineMap) {
          _ref1 = lineMap.columns;
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            mapping = _ref1[_j];
            if (!(mapping)) {
              continue;
            }
            while (writingline < mapping.line) {
              lastColumn = 0;
              needComma = false;
              buffer += ";";
              writingline++;
            }
            if (needComma) {
              buffer += ",";
              needComma = false;
            }
            buffer += this.encodeVlq(mapping.column - lastColumn);
            lastColumn = mapping.column;
            buffer += this.encodeVlq(0);
            buffer += this.encodeVlq(mapping.sourceLine - lastSourceLine);
            lastSourceLine = mapping.sourceLine;
            buffer += this.encodeVlq(mapping.sourceColumn - lastSourceColumn);
            lastSourceColumn = mapping.sourceColumn;
            needComma = true;
          }
        }
      }
      v3 = {
        version: 3,
        file: options.generatedFile || '',
        sourceRoot: options.sourceRoot || '',
        sources: options.sourceFiles || [''],
        names: [],
        mappings: buffer
      };
      if (options.inline) {
        v3.sourcesContent = [code];
      }
      return JSON.stringify(v3, null, 2);
    };

    VLQ_SHIFT = 5;

    VLQ_CONTINUATION_BIT = 1 << VLQ_SHIFT;

    VLQ_VALUE_MASK = VLQ_CONTINUATION_BIT - 1;

    SourceMap.prototype.encodeVlq = function(value) {
      var answer, nextChunk, signBit, valueToEncode;
      answer = '';
      signBit = value < 0 ? 1 : 0;
      valueToEncode = (Math.abs(value) << 1) + signBit;
      while (valueToEncode || !answer) {
        nextChunk = valueToEncode & VLQ_VALUE_MASK;
        valueToEncode = valueToEncode >> VLQ_SHIFT;
        if (valueToEncode) {
          nextChunk |= VLQ_CONTINUATION_BIT;
        }
        answer += this.encodeBase64(nextChunk);
      }
      return answer;
    };

    BASE64_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

    SourceMap.prototype.encodeBase64 = function(value) {
      return BASE64_CHARS[value] || (function() {
        throw new Error("Cannot Base64 encode value: " + value);
      })();
    };

    return SourceMap;

  })();

  exports.SourceMap = SourceMap;

}).call(this);

},{}],30:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  module.exports = {
    k: "__iced_k",
    k_noop: "__iced_k_noop",
    param: "__iced_p_",
    ns: "iced",
    runtime: "runtime",
    Deferrals: "Deferrals",
    deferrals: "__iced_deferrals",
    fulfill: "_fulfill",
    b_while: "_break",
    t_while: "_while",
    c_while: "_continue",
    n_while: "_next",
    n_arg: "__iced_next_arg",
    defer_method: "defer",
    slot: "__slot",
    assign_fn: "assign_fn",
    autocb: "autocb",
    retslot: "ret",
    trace: "__iced_trace",
    passed_deferral: "__iced_passed_deferral",
    findDeferral: "findDeferral",
    lineno: "lineno",
    parent: "parent",
    filename: "filename",
    funcname: "funcname",
    catchExceptions: 'catchExceptions',
    runtime_modes: ["node", "inline", "window", "none", "browserify", "interp"],
    trampoline: "trampoline",
    context: "context",
    defer_arg: "__iced_defer_"
  };

}).call(this);

},{}],31:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var C, Pipeliner, iced, __iced_k, __iced_k_noop, _iand, _ior, _timeout,
    __slice = [].slice;

  __iced_k = __iced_k_noop = function() {};

  C = require('./const');

  exports.iced = iced = require('./runtime');

  _timeout = function(cb, t, res, tmp) {
    var arr, rv, which, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    rv = new iced.Rendezvous;
    tmp[0] = rv.id(true).defer({
      assign_fn: (function(_this) {
        return function() {
          return function() {
            return arr = __slice.call(arguments, 0);
          };
        };
      })(this)(),
      lineno: 20,
      context: __iced_deferrals
    });
    setTimeout(rv.id(false).defer({
      lineno: 21,
      context: __iced_deferrals
    }), t);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        rv.wait(__iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return which = arguments[0];
            };
          })(),
          lineno: 22
        }));
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (res) {
          res[0] = which;
        }
        return cb.apply(null, arr);
      };
    })(this));
  };

  exports.timeout = function(cb, t, res) {
    var tmp;
    tmp = [];
    _timeout(cb, t, res, tmp);
    return tmp[0];
  };

  _iand = function(cb, res, tmp) {
    var ok, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        tmp[0] = __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return ok = arguments[0];
            };
          })(),
          lineno: 39
        });
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (!ok) {
          res[0] = false;
        }
        return cb();
      };
    })(this));
  };

  exports.iand = function(cb, res) {
    var tmp;
    tmp = [];
    _iand(cb, res, tmp);
    return tmp[0];
  };

  _ior = function(cb, res, tmp) {
    var ok, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        tmp[0] = __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return ok = arguments[0];
            };
          })(),
          lineno: 58
        });
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (ok) {
          res[0] = true;
        }
        return cb();
      };
    })(this));
  };

  exports.ior = function(cb, res) {
    var tmp;
    tmp = [];
    _ior(cb, res, tmp);
    return tmp[0];
  };

  exports.Pipeliner = Pipeliner = (function() {
    function Pipeliner(window, delay) {
      this.window = window || 1;
      this.delay = delay || 0;
      this.queue = [];
      this.n_out = 0;
      this.cb = null;
      this[C.deferrals] = this;
      this["defer"] = this._defer;
    }

    Pipeliner.prototype.waitInQueue = function(cb) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      (function(_this) {
        return (function(__iced_k) {
          var _while;
          _while = function(__iced_k) {
            var _break, _continue, _next;
            _break = __iced_k;
            _continue = function() {
              return iced.trampoline(function() {
                return _while(__iced_k);
              });
            };
            _next = _continue;
            if (!(_this.n_out >= _this.window)) {
              return _break();
            } else {
              (function(__iced_k) {
                __iced_deferrals = new iced.Deferrals(__iced_k, {
                  parent: ___iced_passed_deferral,
                  filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                  funcname: "Pipeliner.waitInQueue"
                });
                _this.cb = __iced_deferrals.defer({
                  lineno: 100
                });
                __iced_deferrals._fulfill();
              })(_next);
            }
          };
          _while(__iced_k);
        });
      })(this)((function(_this) {
        return function() {
          _this.n_out++;
          (function(__iced_k) {
            if (_this.delay) {
              (function(__iced_k) {
                __iced_deferrals = new iced.Deferrals(__iced_k, {
                  parent: ___iced_passed_deferral,
                  filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                  funcname: "Pipeliner.waitInQueue"
                });
                setTimeout(__iced_deferrals.defer({
                  lineno: 108
                }), _this.delay);
                __iced_deferrals._fulfill();
              })(__iced_k);
            } else {
              return __iced_k();
            }
          })(function() {
            return cb();
          });
        };
      })(this));
    };

    Pipeliner.prototype.__defer = function(out, deferArgs) {
      var tmp, voidCb, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
            funcname: "Pipeliner.__defer"
          });
          voidCb = __iced_deferrals.defer({
            lineno: 122
          });
          out[0] = function() {
            var args, _ref;
            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
            if ((_ref = deferArgs.assign_fn) != null) {
              _ref.apply(null, args);
            }
            return voidCb();
          };
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          _this.n_out--;
          if (_this.cb) {
            tmp = _this.cb;
            _this.cb = null;
            return tmp();
          }
        };
      })(this));
    };

    Pipeliner.prototype._defer = function(deferArgs) {
      var tmp;
      tmp = [];
      this.__defer(tmp, deferArgs);
      return tmp[0];
    };

    Pipeliner.prototype.flush = function(autocb) {
      var ___iced_passed_deferral, __iced_k, _while;
      __iced_k = autocb;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      _while = (function(_this) {
        var __iced_deferrals;
        return function(__iced_k) {
          var _break, _continue, _next;
          _break = __iced_k;
          _continue = function() {
            return iced.trampoline(function() {
              return _while(__iced_k);
            });
          };
          _next = _continue;
          if (!_this.n_out) {
            return _break();
          } else {
            (function(__iced_k) {
              __iced_deferrals = new iced.Deferrals(__iced_k, {
                parent: ___iced_passed_deferral,
                filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                funcname: "Pipeliner.flush"
              });
              _this.cb = __iced_deferrals.defer({
                lineno: 151
              });
              __iced_deferrals._fulfill();
            })(_next);
          }
        };
      })(this);
      _while(__iced_k);
    };

    return Pipeliner;

  })();

}).call(this);

},{"./const":30,"./runtime":33}],32:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var k, mod, mods, v, _i, _len;

  exports["const"] = require('./const');

  mods = [require('./runtime'), require('./library')];

  for (_i = 0, _len = mods.length; _i < _len; _i++) {
    mod = mods[_i];
    for (k in mod) {
      v = mod[k];
      exports[k] = v;
    }
  }

}).call(this);

},{"./const":30,"./library":31,"./runtime":33}],33:[function(require,module,exports){
(function (process){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var C, Deferrals, Rendezvous, exceptionHandler, findDeferral, make_defer_return, stackWalk, tick_counter, trampoline, warn, __active_trace, __c, _trace_to_string,
    __slice = [].slice;

  C = require('./const');

  make_defer_return = function(obj, defer_args, id, trace_template, multi) {
    var k, ret, trace, v;
    trace = {};
    for (k in trace_template) {
      v = trace_template[k];
      trace[k] = v;
    }
    trace[C.lineno] = defer_args != null ? defer_args[C.lineno] : void 0;
    ret = function() {
      var inner_args, o, _ref;
      inner_args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      if (defer_args != null) {
        if ((_ref = defer_args.assign_fn) != null) {
          _ref.apply(null, inner_args);
        }
      }
      if (obj) {
        o = obj;
        if (!multi) {
          obj = null;
        }
        return o._fulfill(id, trace);
      } else {
        return warn("overused deferral at " + (_trace_to_string(trace)));
      }
    };
    ret[C.trace] = trace;
    return ret;
  };

  __c = 0;

  tick_counter = function(mod) {
    __c++;
    if ((__c % mod) === 0) {
      __c = 0;
      return true;
    } else {
      return false;
    }
  };

  __active_trace = null;

  _trace_to_string = function(tr) {
    var fn;
    fn = tr[C.funcname] || "<anonymous>";
    return "" + fn + " (" + tr[C.filename] + ":" + (tr[C.lineno] + 1) + ")";
  };

  warn = function(m) {
    return typeof console !== "undefined" && console !== null ? console.error("ICED warning: " + m) : void 0;
  };

  exports.trampoline = trampoline = function(fn) {
    if (!tick_counter(500)) {
      return fn();
    } else if ((typeof process !== "undefined" && process !== null ? process.nextTick : void 0) != null) {
      return process.nextTick(fn);
    } else {
      return setTimeout(fn);
    }
  };

  exports.Deferrals = Deferrals = (function() {
    function Deferrals(k, trace) {
      this.trace = trace;
      this.continuation = k;
      this.count = 1;
      this.ret = null;
    }

    Deferrals.prototype._call = function(trace) {
      var c;
      if (this.continuation) {
        __active_trace = trace;
        c = this.continuation;
        this.continuation = null;
        return c(this.ret);
      } else {
        return warn("Entered dead await at " + (_trace_to_string(trace)));
      }
    };

    Deferrals.prototype._fulfill = function(id, trace) {
      if (--this.count > 0) {

      } else {
        return trampoline(((function(_this) {
          return function() {
            return _this._call(trace);
          };
        })(this)));
      }
    };

    Deferrals.prototype.defer = function(args) {
      var self;
      this.count++;
      self = this;
      return make_defer_return(self, args, null, this.trace);
    };

    return Deferrals;

  })();

  exports.findDeferral = findDeferral = function(args) {
    var a, _i, _len;
    for (_i = 0, _len = args.length; _i < _len; _i++) {
      a = args[_i];
      if (a != null ? a[C.trace] : void 0) {
        return a;
      }
    }
    return null;
  };

  exports.Rendezvous = Rendezvous = (function() {
    var RvId;

    function Rendezvous() {
      this.completed = [];
      this.waiters = [];
      this.defer_id = 0;
    }

    RvId = (function() {
      function RvId(rv, id, multi) {
        this.rv = rv;
        this.id = id;
        this.multi = multi;
      }

      RvId.prototype.defer = function(defer_args) {
        return this.rv._defer_with_id(this.id, defer_args, this.multi);
      };

      return RvId;

    })();

    Rendezvous.prototype.wait = function(cb) {
      var x;
      if (this.completed.length) {
        x = this.completed.shift();
        return cb(x);
      } else {
        return this.waiters.push(cb);
      }
    };

    Rendezvous.prototype.defer = function(defer_args) {
      var id;
      id = this.defer_id++;
      return this._defer_with_id(id, defer_args);
    };

    Rendezvous.prototype.id = function(i, multi) {
      multi = !!multi;
      return new RvId(this, i, multi);
    };

    Rendezvous.prototype._fulfill = function(id, trace) {
      var cb;
      if (this.waiters.length) {
        cb = this.waiters.shift();
        return cb(id);
      } else {
        return this.completed.push(id);
      }
    };

    Rendezvous.prototype._defer_with_id = function(id, defer_args, multi) {
      this.count++;
      return make_defer_return(this, defer_args, id, {}, multi);
    };

    return Rendezvous;

  })();

  exports.stackWalk = stackWalk = function(cb) {
    var line, ret, tr, _ref;
    ret = [];
    tr = cb ? cb[C.trace] : __active_trace;
    while (tr) {
      line = "   at " + (_trace_to_string(tr));
      ret.push(line);
      tr = tr != null ? (_ref = tr[C.parent]) != null ? _ref[C.trace] : void 0 : void 0;
    }
    return ret;
  };

  exports.exceptionHandler = exceptionHandler = function(err, logger) {
    var stack;
    if (!logger) {
      logger = console.error;
    }
    logger(err.stack);
    stack = stackWalk();
    if (stack.length) {
      logger("Iced 'stack' trace (w/ real line numbers):");
      return logger(stack.join("\n"));
    }
  };

  exports.catchExceptions = function(logger) {
    return typeof process !== "undefined" && process !== null ? process.on('uncaughtException', function(err) {
      exceptionHandler(err, logger);
      return process.exit(1);
    }) : void 0;
  };

}).call(this);

}).call(this,require('_process'))

},{"./const":30,"_process":38}],34:[function(require,module,exports){

var indexOf = [].indexOf;

module.exports = function(arr, obj){
  if (indexOf) return arr.indexOf(obj);
  for (var i = 0; i < arr.length; ++i) {
    if (arr[i] === obj) return i;
  }
  return -1;
};
},{}],35:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],36:[function(require,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.js2coffee=e()}}(function(){var e,t,u;return function n(e,t,u){function r(o,s){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!s&&a)return a(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var u=e[o][1][t];return r(u?u:t)},f,f.exports,n,e,t,u)}return t[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<u.length;o++)r(u[o]);return r}({1:[function(e,t,u){var n,r,i,o,s;i=e("./lib/transforms/base");r=e("./lib/builder/base");n=e("./lib/builder");o=e("./lib/helpers").buildError;t.exports=s=function(e,t){return s.build(e,t).code};s.build=function(e,t){var u,n,r,i,o,a;if(t==null){t={}}if(t.filename==null){t.filename="input.js"}if(t.indent==null){t.indent=2}t.source=e;u=s.parseJS(e,t);i=s.transform(u,t),u=i.ast,a=i.warnings;o=s.generate(u,t),n=o.code,r=o.map;return{code:n,ast:u,map:r,warnings:a}};s.parseJS=function(t,u){var n,r,i;if(u==null){u={}}try{n=e("esprima");return n.parse(t,{loc:true,range:true,comment:true})}catch(i){r=i;throw o(r,t,u.filename)}};s.transform=function(t,u){var n,r,o;if(u==null){u={}}r={};o=function(e){return i.run(t,u,e,r)};n=!(u.comments===false);if(n){o([e("./lib/transforms/comments")])}o([e("./lib/transforms/functions")]);o([e("./lib/transforms/exponents"),e("./lib/transforms/ifs"),e("./lib/transforms/iife"),e("./lib/transforms/literals"),e("./lib/transforms/loops"),e("./lib/transforms/members"),e("./lib/transforms/objects"),e("./lib/transforms/binary"),e("./lib/transforms/empty_statements"),e("./lib/transforms/others"),e("./lib/transforms/precedence"),e("./lib/transforms/returns"),e("./lib/transforms/switches"),e("./lib/transforms/unsupported")]);o([e("./lib/transforms/blocks")]);return{ast:t,warnings:r.warnings}};s.generate=function(e,t){if(t==null){t={}}return new n(e,t).get()};s.version=e("./package.json").version},{"./lib/builder":3,"./lib/builder/base":2,"./lib/helpers":5,"./lib/transforms/base":6,"./lib/transforms/binary":7,"./lib/transforms/blocks":8,"./lib/transforms/comments":9,"./lib/transforms/empty_statements":10,"./lib/transforms/exponents":11,"./lib/transforms/functions":12,"./lib/transforms/ifs":13,"./lib/transforms/iife":14,"./lib/transforms/literals":15,"./lib/transforms/loops":16,"./lib/transforms/members":17,"./lib/transforms/objects":18,"./lib/transforms/others":19,"./lib/transforms/precedence":20,"./lib/transforms/returns":21,"./lib/transforms/switches":22,"./lib/transforms/unsupported":23,"./package.json":61,esprima:48}],2:[function(e,t,u){var n,r,i=function(e,t){return function(){return e.apply(t,arguments)}};r=e("./strip_spaces");n=function(){function t(e,t){this.root=e;this.options=t!=null?t:{};this.walk=i(this.walk,this);this.path=[]}t.prototype.run=function(){return this.walk(this.root)};t.prototype.walk=function(e,t){var u,n,r;n=this.path.length;this.path.push(e);if(typeof t!=="string"){t=void 0}t||(t=e.type);this.ctx={path:this.path,type:t,parent:this.path[this.path.length-2]};u=this[t];if(u){r=u.call(this,e,this.ctx);if(this.decorator!=null){r=this.decorator(e,r)}}else{r=this.onUnknownNode(e,this.ctx)}this.path.splice(n);return r};t.prototype.get=function(){var e;e=this.run();e=r(e);return e.toStringWithSourceMap()};t.prototype.decorator=function(t,u){var n,r,i,o,s;n=e("source-map").SourceNode;return new n(t!=null?(r=t.loc)!=null?(i=r.start)!=null?i.line:void 0:void 0:void 0,t!=null?(o=t.loc)!=null?(s=o.start)!=null?s.column:void 0:void 0:void 0,this.options.filename,u)};return t}();t.exports=n},{"./strip_spaces":4,"source-map":50}],3:[function(e,t,u){var n,r,i,o,s,a,l,f,c,p,D,h,m=function(e,t){for(var u in t){if(d.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},d={}.hasOwnProperty;p=e("../helpers"),f=p.prependAll,c=p.quote,l=p.newline,D=p.space,s=p.delimit,o=p.commaDelimit,h=p.toIndent,a=p.joinLines;i=e("../transforms/base");r=e("./base");t.exports=n=function(e){m(t,e);function t(e,u){if(u==null){u={}}t.__super__.constructor.apply(this,arguments);this._indent=0}t.prototype.Program=function(e){this.comments=e.comments;return this.BlockStatement(e)};t.prototype.ExpressionStatement=function(e){return l(this.walk(e.expression))};t.prototype.AssignmentExpression=function(e){var t;t=this.paren(D([this.walk(e.left),e.operator,this.walk(e.right)]));if(e.right.type==="FunctionExpression"){t=["\n",this.indent(),t,"\n"]}return t};t.prototype.Identifier=function(e){return[e.name]};t.prototype.UnaryExpression=function(e){var t,u;t=function(){return e.argument.type==="UnaryExpression"};u=function(){return/^[a-z]+$/i.test(e.operator)};if(t()||u()){return this.paren([e.operator," ",this.walk(e.argument)])}else{return this.paren([e.operator,this.walk(e.argument)])}};t.prototype.BinaryExpression=function(e){var t;t=e.operator;if(t==="in"){t="of"}return this.paren(D([this.walk(e.left),t,this.walk(e.right)]))};t.prototype.Literal=function(e){if(typeof e.value==="string"){return[c(e.value)]}else{return[e.raw]}};t.prototype.MemberExpression=function(e){var t;t=e.computed?["[",this.walk(e.property),"]"]:e._prefixed?[this.walk(e.property)]:[".",this.walk(e.property)];return this.paren([this.walk(e.object),t])};t.prototype.LogicalExpression=function(e){var t,u;u={"||":"or","&&":"and"};t=u[e.operator];return this.paren([this.walk(e.left)," ",t," ",this.walk(e.right)])};t.prototype.ThisExpression=function(e){if(e._prefix){return["@"]}else{return["this"]}};t.prototype.CallExpression=function(e,t){var u,n,r;u=this.walk(e.callee);r=this.makeSequence(e["arguments"]);e._isStatement=t.parent.type==="ExpressionStatement";n=r.length>0;if(e._isStatement&&n){return D([u,r])}else{return[u,this.paren(r,true)]}};t.prototype.IfStatement=function(e){var t,u;t=e.alternate;if((t!=null?t.type:void 0)==="IfStatement"){u=this.indent(["else ",this.walk(e.alternate,"IfStatement")])}else if((t!=null?t.type:void 0)==="BlockStatement"){u=this.indent(function(t){return function(u){return[u,"else","\n",t.walk(e.alternate)]}}(this))}else if(t!=null){u=this.indent(function(t){return function(u){return[u,"else","\n",t.indent(t.walk(e.alternate))]}}(this))}else{u=[]}return this.indent(function(t){return function(n){var r,i,o;i=t.walk(e.test);r=t.walk(e.consequent);if(e.consequent.type!=="BlockStatement"){r=t.indent(r)}o=e._negative?"unless":"if";return[o," ",i,"\n",r,u]}}(this))};t.prototype.BlockStatement=function(e){return this.makeStatements(e,e.body)};t.prototype.makeStatements=function(e,t){var u,n,r,i,o,s;s=t.map(this.walk);o=[];for(u=r=0,i=s.length;r<i;u=++r){n=s[u];if(t[u].type!=="BlockStatement"){o.push(this.indent())}o.push(n)}return o};t.prototype.LineComment=function(e){return["#",e.value,"\n"]};t.prototype.BlockComment=function(e){var t,u;t=("###"+e.value+"###").split("\n");u=[s(t,["\n",this.indent()]),"\n"];return["\n",this.indent(),u,"\n"]};t.prototype.ReturnStatement=function(e){if(e.argument){return D(["return",[this.walk(e.argument),"\n"]])}else{return["return","\n"]}};t.prototype.ArrayExpression=function(e){var t,u;u=e.elements.length;t=u===1;if(u===0){return["[]"]}else if(t){return D(["[",e.elements.map(this.walk),"]"])}else{return this.indent(function(t){return function(u){var n,r;r=e.elements.map(function(e){return l(t.walk(e))});n=f(r,t.indent());return["[","\n",n,u,"]"]}}(this))}};t.prototype.ObjectExpression=function(e,t){var u,n;n=e.properties.length;u=e._braced;if(n===0){return["{}"]}else if(n===1){n=e.properties.map(this.walk);if(u){return this.paren(D(["{",n,"}"]))}else{return this.paren([n])}}else if(e._last){n=e.properties.map(this.walk);return s(n,["\n",this.indent()])}else{n=this.indent(function(t){return function(){n=e.properties.map(t.walk);return["\n",a(n,t.indent())]}}(this));if(u){return this.paren(["{",n,"\n",this.indent(),"}"])}else{return this.paren([n])}}};t.prototype.Property=function(e){if(e.kind!=="init"){throw new Error("Property: not sure about kind "+e.kind)}return D([[this.walk(e.key),":"],this.walk(e.value)])};t.prototype.VariableDeclaration=function(e){var t;t=e.declarations.map(this.walk);return s(t,this.indent())};t.prototype.VariableDeclarator=function(e){var t;t=[this.walk(e.id)," = ",l(this.walk(e.init))];if(e.init.type==="FunctionExpression"){t=["\n",this.indent(),t,"\n"]}return t};t.prototype.FunctionExpression=function(e,t){var u,n;n=this.makeParams(e.params,e.defaults);u=this.indent(function(t){return function(u){return[n,"->","\n",t.walk(e.body)]}}(this));if(e._parenthesized){return["(",u,this.indent(),")"]}else{return u}};t.prototype.EmptyStatement=function(e){return[]};t.prototype.SequenceExpression=function(e){var t;t=e.expressions.map(function(e){return function(t){return[e.walk(t),"\n"]}}(this));return s(t,this.indent())};t.prototype.NewExpression=function(e){var t,u,n,r;u=((n=e.callee)!=null?n.type:void 0)==="Identifier"?[this.walk(e.callee)]:["(",this.walk(e.callee),")"];t=((r=e["arguments"])!=null?r.length:void 0)?["(",this.makeSequence(e["arguments"]),")"]:[];return this.paren(["new ",u,t])};t.prototype.WhileStatement=function(e){return["while ",this.walk(e.test),"\n",this.makeLoopBody(e.body)]};t.prototype.CoffeeLoopStatement=function(e){return["loop","\n",this.makeLoopBody(e.body)]};t.prototype.BreakStatement=function(e){return["break","\n"]};t.prototype.ContinueStatement=function(e){return["continue","\n"]};t.prototype.DebuggerStatement=function(e){return["debugger","\n"]};t.prototype.TryStatement=function(e){var t,u,n;n=this.indent(function(t){return function(){return["try","\n",t.walk(e.block)]}}(this));t=this.indent(function(t){return function(u){return[u,t.walk(e.handler)]}}(this));u=e.finalizer!=null?this.indent(function(t){return function(u){return[u,"finally","\n",t.walk(e.finalizer)]}}(this)):[];return[n,t,u]};t.prototype.CatchClause=function(e){return["catch ",this.walk(e.param),"\n",this.walk(e.body)]};t.prototype.ThrowStatement=function(e){return["throw ",this.walk(e.argument),"\n"]};t.prototype.ConditionalExpression=function(e){return this.paren(D(["if",this.walk(e.test),"then",this.walk(e.consequent),"else",this.walk(e.alternate)]))};t.prototype.UpdateExpression=function(e){if(e.prefix){return[e.operator,this.walk(e.argument)]}else{return[this.walk(e.argument),e.operator]}};t.prototype.SwitchStatement=function(e){var t,u;t=this.indent(function(t){return function(){return t.makeStatements(e,e.cases)}}(this));u=this.walk(e.discriminant);if(e.discriminant.type==="ConditionalExpression"){u=["(",u,")"]}return["switch ",u,"\n",t]};t.prototype.CoffeeListExpression=function(e){return this.makeSequence(e.expressions)};t.prototype.SwitchCase=function(e){var t,u;t=e.test?["when ",this.walk(e.test)]:["else"];u=this.indent(function(t){return function(){return t.makeStatements(e,e.consequent)}}(this));return[t,"\n",u]};t.prototype.ForInStatement=function(e){var t,u,n;if(e.left.type!=="VariableDeclaration"){u=this.walk(e.left);n={type:"ExpressionStatement",expression:{type:"CoffeeEscapedExpression",raw:u+" = "+u}};e.body.body=[n].concat(e.body.body)}else{u=this.walk(e.left.declarations[0].id)}t=this.makeLoopBody(e.body);return["for ",u," of ",this.walk(e.right),"\n",t]};t.prototype.makeLoopBody=function(e){var t;t=(e!=null?e.type:void 0)==="BlockStatement";if(!e||t&&e.body.length===0){return this.indent(function(e){return function(){return[e.indent(),"continue","\n"]}}(this))}else if(t){return this.indent(function(t){return function(){return t.walk(e)}}(this))}else{return this.indent(function(t){return function(){return[t.indent(),t.walk(e)]}}(this))}};t.prototype.CoffeeEscapedExpression=function(e){if(e._parenthesized){return["(`",e.raw,"`)"]}else{return["`",e.raw,"`"]}};t.prototype.CoffeePrototypeExpression=function(e){if(e.computed){return[this.walk(e.object),"::[",this.walk(e.property),"]"]}else{return[this.walk(e.object),"::",this.walk(e.property)]}};t.prototype.CoffeeDoExpression=function(e){return D(["do",this.walk(e["function"])])};t.prototype.makeSequence=function(e){var t,u,n,r,i;for(u=r=0,i=e.length;r<i;u=++r){t=e[u];n=u===e.length-1;if(!n){if(t.type==="FunctionExpression"){t._parenthesized=true}else if(t.type==="ObjectExpression"){t._braced=true}}}return o(e.map(this.walk))};t.prototype.makeParams=function(e,t){var u,n,r,i,o,a;o=[];for(n=r=0,i=e.length;r<i;n=++r){a=e[n];if(t[n]){u=this.walk(t[n]);o.push([this.walk(a)," = ",u])}else{o.push(this.walk(a))}}if(e.length){return["(",s(o,", "),") "]}else{return[]}};t.prototype.parenthesizeArguments=function(e){var t,u,n,r,i,o,s;o=e["arguments"];s=[];for(u=r=0,i=o.length;r<i;u=++r){t=o[u];n=u===e["arguments"].length-1;if(t.type==="FunctionExpression"){if(!n){s.push(t._parenthesized=true)}else{s.push(void 0)}}else{s.push(void 0)}}return s};t.prototype.indent=function(e){var t,u,n;if(typeof e==="function"){t=this.indent();this._indent+=1;u=e(t);this._indent-=1;return u}else if(e){return[this.indent(),e]}else{n=h(this.options.indent);return Array(this._indent+1).join(n)}};t.prototype.paren=function(e,t){var u,n;if(t==null){t=(n=this.path[this.path.length-1])!=null?n._parenthesized:void 0}u=e.toString().match(/\n$/);if(t){if(u){return["(",e,this.indent(),")"]}else{return["(",e,")"]}}else{return e}};t.prototype.onUnknownNode=function(e,t){return this.syntaxError(e,e.type+" is not supported")};t.prototype.syntaxError=i.prototype.syntaxError;return t}(r)},{"../helpers":5,"../transforms/base":6,"./base":2}],4:[function(e,t,u){var n,r,i,o,s,a,l;n=/^\s*\n+\s*$/;l=function(e){e=a(e);e=s(e);e=o(e);e=i(e);return e};i=function(e){var t,u;u=0;t=null;return r(e,{},function(e){if(u===0||u===1&&e.match(n)){u=1;return e}else if(u===1&&e.match(/^[ \t]+$/)){t=e;u=2;return""}else if(u===2){u=1;if(e.match(n)){return e}else{return t+e}}else{u=0;return e}})};a=function(e){return r(e,{},function(e){if(e.match(n)){return""}else{this["break"]();return e}})};s=function(e){return r(e,{reverse:true},function(e){if(e.match(n)){return""}else{this["break"]();return e+"\n"}})};o=function(e){var t;t=0;return r(e,{},function(e){if(e==="\n"){t+=1}else if(e.match(/^\s*$/)){}else{t=0}if(t>=3){return""}else{return e}})};r=function(e,t,u){var n,r,i;if(t==null){t={}}n=false;r={"break":function(e){return n=true}};i=function(e,t,u){var o,s,a,l,f,c,p,D,h,m,d,A;if(t==null){t={}}D=t.reverse?function(){d=[];for(var t=h=e.children.length-1;h<=0?t<=0:t>=0;h<=0?t++:t--){d.push(t)}return d}.apply(this):function(){A=[];for(var t=0,u=e.children.length;0<=u?t<u:t>u;0<=u?t++:t--){A.push(t)}return A}.apply(this);for(f=0,c=D.length;f<c;f++){s=D[f];if(n){return e}o=e.children[s];if(!o){}else if(o.children){i(o,t,u)}else if(o!==""){p=u.call(r,o);e.children[s]=p}}return e};return i.call(r,e,t,u)};t.exports=l},{}],5:[function(e,t,u){u.delimit=function(e,t){var u,n,r,i,o;o=[];for(u=r=0,i=e.length;r<i;u=++r){n=e[u];if(u>0){o.push(t)}o.push(n)}return o};u.commaDelimit=function(e){var t,u,n,r,i;i=[];for(t=n=0,r=e.length;n<r;t=++n){u=e[t];if(t>0){if(/^\n/.test(u.toString())){i.push(",")}else{i.push(", ")}}i.push(u)}return i};u.prependAll=function(e,t){var u,n,r,i,o;o=[];for(u=r=0,i=e.length;r<i;u=++r){n=e[u];o.push(t);o.push(n)}return o};u.buildError=function(e,t,u){var n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E;if(u==null){u=""}if(e.js2coffee){return e}i=e.description;l=(m=(d=e.start)!=null?d.line:void 0)!=null?m:e.lineNumber;r=(A=(C=(E=e.start)!=null?E.column:void 0)!=null?C:e.column&&e.column-1)!=null?A:0;s=u+":"+l+":"+r+": "+i;f=t.split("\n");D=Math.max(l-3,0);c=l-1;o=c.toString().length;a=1;if(e.end){a=Math.max(e.end.column-e.start.column,1)}h=function(e){return Array(1+o-e.toString().length).join(" ")+e};t=f.slice(D,+c+1||9e9).map(function(e,t){return h(1+t+D)+"  "+e});t.push(Array(o+3).join(" ")+Array(r+1).join(" ")+Array(a+1).join("^"));t=t.join("\n");p=s+"\n\n"+t;n=e;e=new Error(p);e.filename=u;e.description=n.description;e.start={line:l,column:r};e.end=n.end;e.sourcePreview=t;e.js2coffee=true;return e};u.space=function(e){return e.reduce(function(e,t,u){if(u===0){return e.concat([t])}else if(t.toString().substr(0,1)==="\n"){return e.concat([t])}else{return e.concat([" ",t])}},[])};u.newline=function(e){if(/\n$/.test(e.toString())){return e}else{return[e,"\n"]}};u.inspect=function(t){return"~~~~\n"+e("util").inspect(t,{depth:1e3,colors:true})+"\n~~~~"};u.replace=function(e,t){t.range=e.range;t.loc=e.loc;return t};u.clone=function(e){return JSON.parse(JSON.stringify(e))};u.quote=function(e){var t,u;if(typeof e==="string"){t=function(e){var t;t=e.charCodeAt(0).toString(16);t=function(){var e,u,n;n=[];for(e=0,u=4-t.length;0<=u?e<u:e>u;0<=u?e++:e--){n.push("0")}return n}().join("")+t;return"\\u"+t};u=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/\n/g,"\\n").replace(/[\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,t);return"'"+u+"'"}else{return JSON.stringify(e)}};u.getPrecedence=function(e){var t,u,n,r;r=e.type;u=function(t){return t.indexOf(e.operator)>-1};t={"**":17,"*":14,"/":14,"%":14,"+":13,"-":13,"<<":12,">>":12,">>>":12,"<":11,">":11,"<=":11,">=":11,"in":11,"instanceof":11,"==":10,"===":10,"!=":10,"!==":10,"&":9,"^":8,"|":7};n={"&&":6,"||":5};switch(r){case"Literal":case"Identifier":return 99;case"MemberExpression":case"CallExpression":return 18;case"NewExpression":if(e["arguments"].length===0){return 17}else{return 18}break;case"UpdateExpression":if(e.prefix){return 15}else{return 16}break;case"UnaryExpression":return 15;case"BinaryExpression":return t[e.operator];case"LogicalExpression":return n[e.operator];case"ConditionalExpression":return 4;case"AssignmentExpression":return 3;case"SequenceExpression":return 0;default:return-1}};u.lastStatement=function(e){var t,n,r,i;for(t=n=i=e.length-1;i<=0?n<=0:n>=0;t=i<=0?++n:--n){r=e[t];if(!r){continue}if(!u.isComment(r)){return r}}};u.getReturnStatements=function(e){var t,n,r,i,o;r=u.getReturnStatements,i=u.lastStatement;if(!e){return}else if(e.length){o=i(e)}else{o=e}if(!o){return[]}else if(o.type==="ReturnStatement"){return[o]}else if(o.type==="BlockStatement"){return r(o.body)}else if(o.type==="IfStatement"&&o.consequent&&o.alternate){n=r(o.consequent);t=r(o.alternate);if(n.length>0&&t.length>0){return n.concat(t)}else{return[]}}else{return[]}};u.joinLines=function(e,t){var u,n,r,i,o,s;s=[];for(u=i=0,o=e.length;i<o;u=++i){r=e[u];s.push(t);s.push(r);n=u!==e.length-1;if(!r.toString().match(/\n$/)&&n){s.push("\n")}}return s};u.reserved={keywords:["then","unless","until","loop","of","by","when"],reserved:["case","default","function","var","void","with","const","let","enum","export","import","native","__hasProp","__extends","__slice","__bind","__indexOf","implements","interface","package","private","protected","public","static","yield"],aliases:["and","or","is","isnt","not","yes","no","on","off"]};u.reservedWords=u.reserved.keywords.concat(u.reserved.reserved.concat(u.reserved.aliases));u.nextUntil=function(e,t,u){var n,r,i,o,s,a;r=e.indexOf(t);for(n=i=s=r+1,a=e.length;s<=a?i<=a:i>=a;n=s<=a?++i:--i){o=e[n];if((o!=null?o.type:void 0)&&u(o)){return o}}};u.nextNonComment=function(e,t){return u.nextUntil(e,t,function(e){return e.type!=="BlockComment"&&e.type!=="LineComment"})};u.isLoop=function(e){return e.test==null||u.isTruthy(e.test)};u.isTruthy=function(e){return e.type==="Literal"&&e.value};u.escapeJs=function(t){return u.replace(t,{type:"CoffeeEscapedExpression",raw:e("escodegen").generate(t)})};u.nonComments=function(e){return e.filter(function(e){return!u.isComment(e)})};u.isComment=function(e){return e.type==="LineComment"||e.type==="BlockComment"};u.toIndent=function(e){if(e==="tab"||e==="t"){return"	"}else if(typeof e==="string"&&""+ +e!==e){return e}else{return Array(+e+1).join(" ")}}},{escodegen:29,util:28}],6:[function(e,t,u){var n,r,i,o,s,a,l,f,c=function(e,t){for(var u in t){if(p.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},p={}.hasOwnProperty,D=[].slice;s=e("../helpers"),r=s.buildError,o=s.clone,a=s.replace,f=s.toIndent;t.exports=n=function(){t.run=function(e,u,n,r){var i,o,s;i=function(e){c(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}return t}(t);l(i,n);s=new i(e,u);o=s.run();if(r.warnings==null){r.warnings=[]}r.warnings=r.warnings.concat(s.warnings);return o};function t(e,t){this.ast=e;this.options=t;this.scopes=[];this.ctx={vars:[]};this.warnings=[]}t.prototype.run=function(){return this.recurse(this.ast)};t.prototype.recurse=function(e){var t,u;u=this;this.depth=0;t=function(e){return function(t,u,n){var r,i,o,s;e.node=u;e.depth+=t==="Enter"?+1:-1;r=t==="Enter"?""+u.type:u.type+"Exit";if(typeof e[i="onBefore"+t]==="function"){e[i](u,n)}s=typeof e[r]==="function"?e[r](u,n):void 0;if(typeof e[o="on"+t]==="function"){e[o](u,n)}return s}}(this);this.estraverse().replace(e,{enter:function(e,n){u.controller=this;return t("Enter",e,n)},leave:function(e,u){return t("Exit",e,u)}});return e};t.prototype.skip=function(){var e;return(e=this.controller)!=null?e.skip():void 0};t.prototype.remove=function(){var e;return(e=this.controller)!=null?e.remove():void 0};t.prototype.estraverse=function(){return this._estraverse!=null?this._estraverse:this._estraverse=function(){var t;t=e("estraverse");t.VisitorKeys.CoffeeEscapedExpression=[];t.VisitorKeys.CoffeeListExpression=["test","body"];t.VisitorKeys.CoffeePrototypeExpression=["object","property","computed"];t.VisitorKeys.CoffeeLoopStatement=["body"];t.VisitorKeys.CoffeeDoExpression=["function"];t.VisitorKeys.BlockComment=[];t.VisitorKeys.LineComment=[];return t}()};t.prototype.pushStack=function(e){var t,u,n;n=[this.scope,this.ctx],u=n[0],t=n[1];this.scopes.push([this.scope,this.ctx]);this.ctx=o(this.ctx);this.scope=e;return typeof this.onScopeEnter==="function"?this.onScopeEnter(this.scope,this.ctx,u,t):void 0};t.prototype.popStack=function(){var e,t,u,n;u=[this.scope,this.ctx],t=u[0],e=u[1];n=this.scopes.pop(),this.scope=n[0],this.ctx=n[1];return typeof this.onScopeExit==="function"?this.onScopeExit(this.scope,this.ctx,t,e):void 0};t.prototype.syntaxError=function(e,t){var u,n,i;u=r({start:(n=e.loc)!=null?n.start:void 0,end:(i=e.loc)!=null?i.end:void 0,description:t},this.options.source,this.options.filename);throw u};t.prototype.warn=function(e,t){var u,n;return this.warnings.push({start:(u=e.loc)!=null?u.start:void 0,end:(n=e.loc)!=null?n.end:void 0,filename:this.options.filename,description:t})};t.prototype.Program=function(e){this.pushStack(e);return e};t.prototype.ProgramExit=function(e){this.popStack();return e};t.prototype.FunctionExpression=function(e){this.pushStack(e.body);return e};t.prototype.FunctionExpressionExit=function(e){this.popStack();return e};t.prototype.escapeJs=function(t,u){if(u==null){u={}}return a(t,{type:"CoffeeEscapedExpression",_parenthesized:u.parenthesized,raw:e("escodegen").generate(t,{format:{indent:{style:f(this.options.indent)}}})})};return t}();l=function(e,t){var u;u={};t.forEach(function(t){var n,r,o,s;o=t.prototype;s=[];for(r in o){n=o[r];if(t.prototype.hasOwnProperty(r)){if(u[r]&&r!=="constructor"){e.prototype[r]=i(e.prototype[r],n)}else{e.prototype[r]=n}s.push(u[r]=true)}else{s.push(void 0)}}return s});return e};i=function(e,t){return function(){var u,n,r,i;n=arguments[0],u=2<=arguments.length?D.call(arguments,1):[];i=n.type;r=e.bind(this).apply(null,[n].concat(D.call(u)));if(r.type===i){r=t.bind(this).apply(null,[r].concat(D.call(u)))}return r}}},{"../helpers":5,escodegen:29,estraverse:49}],7:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BinaryExpression=function(e){this.warnAboutEquals(e);this.updateEquals(e);return this.escapeEqualsForCompatibility(e)};t.prototype.updateEquals=function(e){var t,u;t={"===":"==","!==":"!="};u=e.operator;if(t[u]){e.operator=t[u]}return e};t.prototype.escapeEqualsForCompatibility=function(e){var t;t=e.operator==="=="||e.operator==="!=";if(this.options.compat&&t){return this.escapeJs(e)}else{return e}};t.prototype.warnAboutEquals=function(e){var t,u,n;t=e.operator;n={"==":"===","!=":"!=="};if(t==="=="||t==="!="){u=n[t];this.warn(e,"Operator '"+t+"' is not supported in CoffeeScript, "+("use '"+u+"' instead"))}return e};return t}(n)},{"./base":6}],8:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty,s=[].slice;r=e("./base");t.exports=n=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BlockStatement=function(e,t){return this.consolidateBlockIntoParent(e,t)};t.prototype.consolidateBlockIntoParent=function(e,t){var u,n;n=false;u=function(u){return function(u,r){var i,o,a;if(t.type===u&&((o=t[r])!=null?o.indexOf:void 0)){i=t[r].indexOf(e);if(t[r]&&~i){(a=t[r]).splice.apply(a,[i,1].concat(s.call(e.body)));n=true;return true}}}}(this);u("BlockStatement","body")||u("SwitchCase","consequent")||u("IfStatement","consequent")||u("IfStatement","alternate");if(n){return this.skip()}else{return e}};return t}(r)},{"./base":6}],9:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ProgramExit=null;t.prototype.FunctionExpression=null;t.prototype.FunctionExpressionExit=null;t.prototype.Program=function(e){this.comments=e.comments;this.updateCommentTypes();e.body=this.addCommentsToList([0,Infinity],e.body);return e};t.prototype.BlockStatement=function(e){return this.injectComments(e,"body")};t.prototype.SwitchStatement=function(e){return this.injectComments(e,"cases")};t.prototype.SwitchCase=function(e){return this.injectComments(e,"consequent")};t.prototype.BlockComment=function(e){return this.convertCommentPrefixes(e)};t.prototype.updateCommentTypes=function(){var e,t,u,n,r;n=this.comments;r=[];for(t=0,u=n.length;t<u;t++){e=n[t];switch(e.type){case"Block":r.push(e.type="BlockComment");break;case"Line":r.push(e.type="LineComment");break;default:r.push(void 0)}}return r};t.prototype.injectComments=function(e,t){if(t==null){t="body"}e[t]=this.addCommentsToList(e.range,e[t]);return e};t.prototype.addCommentsToList=function(e,t){var u,n,r,i,o,s,a,l,f;if(e==null){return t}a=[];o=e[0];f=e[1];u=function(e){return function(t,u){return e.comments.filter(function(e){return e.range[0]>=t&&e.range[1]<=u})}}(this);if(t.length>0){for(n=i=0,s=t.length;i<s;n=++i){r=t[n];if(r.range){l=u(o,r.range[0]);a=a.concat(l)}a.push(r);if(r.range){o=r.range[1]}}}l=u(o,f);a=a.concat(l);return a};t.prototype.convertCommentPrefixes=function(e){var t,u;u=e.value.split("\n");t=e.loc.start.column;u=u.map(function(e,n){var r,i,o;i=n===u.length-1&&e.match(/^\s*$/);r=n===0&&u.length===1;o=e.substr(0,t);if(o.match(/^\s+$/)){e=e.substr(t)}if(i){return""}else if(r){return e}else{e=e.replace(/^ \*/,"#");return e+"\n"}});e.value=u.join("");return e};return t}(n)},{"./base":6}],10:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BlockStatementExit=function(e){return this.removeEmptyStatementsFromBody(e)};t.prototype.SwitchCaseExit=function(e){return this.removeEmptyStatementsFromBody(e,"consequent")};t.prototype.SwitchStatementExit=function(e){return this.removeEmptyStatementsFromBody(e,"cases")};t.prototype.ProgramExit=function(e){return this.removeEmptyStatementsFromBody(e,"body")};t.prototype.removeEmptyStatementsFromBody=function(e,t){if(t==null){t="body"}e[t]=e[t].filter(function(e){return e.type!=="EmptyStatement"});return e};return t}(n)},{"./base":6}],11:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").replace;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.CallExpression=function(e){var t,u,n,i,o,s,a,l,f,c,p;t=((u=e.callee)!=null?u.type:void 0)==="MemberExpression"&&((n=e.callee)!=null?(i=n.object)!=null?i.type:void 0:void 0)==="Identifier"&&((o=e.callee)!=null?(s=o.object)!=null?s.name:void 0:void 0)==="Math"&&((a=e.callee)!=null?(l=a.property)!=null?l.type:void 0:void 0)==="Identifier"&&((f=e.callee)!=null?(c=f.property)!=null?c.name:void 0:void 0)==="pow"&&((p=e["arguments"])!=null?p.length:void 0)===2;if(!t){return e}return r(e,{type:"BinaryExpression",left:e["arguments"][0],operator:"**",right:e["arguments"][1]})};return t}(n)},{"../helpers":5,"./base":6}],12:[function(e,t,u){var n,r,i,o,s,a,l=function(e,t){for(var u in t){if(f.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},f={}.hasOwnProperty,c=[].slice;s=e("../helpers"),i=s.isComment,o=s.nextNonComment,a=s.replace;n=e("./base");t.exports=function(e){l(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onScopeEnter=function(e,t){return t.prebody=[]};t.prototype.onScopeExit=function(e,t,u,n){if(n.prebody.length){return this.prependIntoBody(u.body,n.prebody)}};t.prototype.prependIntoBody=function(e,t){var u;u=r(e);return e.splice.apply(e,[u,0].concat(c.call(t)))};t.prototype.FunctionDeclaration=function(e){this.ctx.prebody.push(this.buildFunctionDeclaration(e));this.pushStack(e.body)};t.prototype.FunctionDeclarationExit=function(e){this.popStack(e);return this.remove()};t.prototype.LineComment=function(e,t){return this.moveFunctionComments(e,t)};t.prototype.BlockComment=function(e,t){return this.moveFunctionComments(e,t)};t.prototype.FunctionExpression=function(e){this.pushStack(e.body)};t.prototype.FunctionExpressionExit=function(e){this.popStack();if(e.id){if(this.options.compat){return this.escapeJs(e,{parenthesized:true})}else{this.warn(e,"Named function expressions are not supported in CoffeeScript");return e}}else{return e}};t.prototype.moveFunctionComments=function(e,t){var u,n;if(!t.body){return}n=o(t.body,e);if(!n){return}u=n.type==="FunctionExpression"&&n.id;u||(u=n.type==="FunctionDeclaration");if(u){this.ctx.prebody.push(e);return this.remove()}};t.prototype.buildFunctionDeclaration=function(e){return a(e,{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:e.id,init:{type:"FunctionExpression",params:e.params,defaults:e.defaults,body:e.body}}]})};return t}(n);r=function(e){var t,u,n,r;t=0;for(t=u=0,n=e.length;u<n;t=++u){r=e[t];if(r.type!=="VariableDeclaration"&&!i(r)){return t}}return t}},{"../helpers":5,"./base":6}],13:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;o=e("../helpers").nonComments;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.IfStatement=function(e){this.handleBlankIfs(e);this.parenthesizeConditionals(e.test);return e};t.prototype.ConditionalExpression=function(e,t){return this.parenthesizeFunctions(e,t)};t.prototype.parenthesizeFunctions=function(e,t){this.estraverse().traverse(e,{
enter:function(e,t){var u;u=e.type==="FunctionDeclaration"||e.type==="FunctionExpression";if(u){return e._parenthesized=true}}});return e};t.prototype.parenthesizeConditionals=function(e){var t;t=["ConditionalExpression","FunctionExpression"];return this.estraverse().traverse(e,{enter:function(e,u){if(~t.indexOf(e.type)){return e._parenthesized=true}}})};t.prototype.handleBlankIfs=function(e){if(i(e)||r(e)&&!e.alternate){e.alternate={type:"BlockStatement",body:[]}}return e};return t}(n);i=function(e){return!e.consequent};r=function(e){var t,u;t=e.consequent;return u=t&&t.type==="BlockStatement"&&o(t.body).length===0}},{"../helpers":5,"./base":6}],14:[function(e,t,u){var n,r,i,o,s,a=function(e,t){for(var u in t){if(l.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},l={}.hasOwnProperty;o=e("../helpers").replace;n=e("./base");t.exports=function(e){a(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.CallExpression=function(e){var t;t=i(e)&&r(e["arguments"])&&s(e.callee.params,e["arguments"]);if(!t){return e}return o(e,{type:"CoffeeDoExpression","function":e.callee,arguments:e["arguments"]})};return t}(n);r=function(e){var t,u,n;for(u=0,n=e.length;u<n;u++){t=e[u];if(t.type!=="Identifier"){return false}}return true};i=function(e){var t,u;return((t=e.callee)!=null?t.type:void 0)==="FunctionExpression"&&((u=e.callee)!=null?u.id:void 0)===null};s=function(e,t){return e.map(function(e){return e.name}).join("/")===t.map(function(e){return e.name}).join("/")}},{"../helpers":5,"./base":6}],15:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;i=e("../helpers"),o=i.replace,r=i.quote;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.Literal=function(e){return this.unpackRegexpIfNeeded(e)};t.prototype.unpackRegexpIfNeeded=function(e){var t;if(!(e.value instanceof RegExp)){return}t=e.value.toString().match(/^\/([\s\=].*)\/([a-z]*)$/);if(t){e=o(e,{type:"CallExpression",callee:{type:"Identifier",name:"RegExp"},arguments:[{type:"Literal",value:t[1],raw:r(t[1])}]});if(t[2]){e["arguments"].push({type:"Literal",value:t[2],raw:r(t[2])})}return e}};return t}(n)},{"../helpers":5,"./base":6}],16:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;i=e("../helpers"),o=i.replace,r=i.isLoop;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ForStatement=function(e){if(this._for==null){this._for=[]}this._for.push(e);this.injectUpdateIntoBody(e);return this.convertForToWhile(e)};t.prototype.ForStatementExit=function(e){var t;t=this._for.pop();delete t._update;return e};t.prototype.ForInStatement=function(e){return this.warnIfNoVar(e)};t.prototype.WhileStatement=function(e){return this.convertWhileToLoop(e)};t.prototype.DoWhileStatement=function(e){return this.convertDoWhileToLoop(e)};t.prototype.ContinueStatement=function(e,t){return this.injectUpdateIntoContinue(e,t)};t.prototype.injectUpdateIntoContinue=function(e,t){var u,n;u=(n=this._for)!=null?n[this._for.length-1]:void 0;if(!(u!=null?u._update:void 0)){return e}this.skip();return{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:u._update},e]}};t.prototype.convertDoWhileToLoop=function(e){var t,u;t=e.body;u=t.body;u.push(o(e.test,{type:"IfStatement",_negative:true,test:e.test,consequent:{type:"BreakStatement"}}));return o(e,{type:"CoffeeLoopStatement",body:t})};t.prototype.warnIfNoVar=function(e){if(e.left.type!=="VariableDeclaration"){this.warn(e,"Using 'for..in' loops without "+"'var' can produce unexpected results")}return e};t.prototype.convertForToWhile=function(e){var t;e.type=r(e)?"CoffeeLoopStatement":"WhileStatement";t=e.init;delete e.init;if(t!=null){return{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:t},e]}}else{return e}};t.prototype.convertWhileToLoop=function(e){if(r(e)){return o(e,{type:"CoffeeLoopStatement",body:e.body})}else{return e}};t.prototype.injectUpdateIntoBody=function(e){var t,u;if(e.update){u={type:"ExpressionStatement",expression:e.update};if(e.body==null){if(e.body==null){e.body={type:"BlockStatement",body:[]}}}else if(e.body.type!=="BlockStatement"){t=e.body;e.body={type:"BlockStatement",body:[t]}}e.body.body=e.body.body.concat([u]);e._update=e.update;delete e.update}return e};return t}(n)},{"../helpers":5,"./base":6}],17:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").replace;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.MemberExpression=function(e){this.transformThisToAtSign(e);this.braceObjectOnLeft(e);return this.replaceWithPrototype(e)||this.parenthesizeObjectIfFunction(e)};t.prototype.CoffeePrototypeExpression=function(e){return this.transformThisToAtSign(e)};t.prototype.transformThisToAtSign=function(e){if(e.object.type==="ThisExpression"){e._prefixed=true;e.object._prefix=true}return e};t.prototype.braceObjectOnLeft=function(e){if(e.object.type==="ObjectExpression"){e.object._braced=true}};t.prototype.replaceWithPrototype=function(e){var t;t=e.computed===false&&e.object.type==="MemberExpression"&&e.object.property.type==="Identifier"&&e.object.property.name==="prototype";if(t){return this.recurse(r(e,{type:"CoffeePrototypeExpression",object:e.object.object,property:e.property}))}};t.prototype.parenthesizeObjectIfFunction=function(e){if(e.object.type==="FunctionExpression"){e.object._parenthesized=true}return e};return t}(n)},{"../helpers":5,"./base":6}],18:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ArrayExpression=function(e){this.braceObjectsInElements(e);return this.catchEmptyArraySlots(e)};t.prototype.ObjectExpression=function(e,t){return this.braceObjectInExpression(e,t)};t.prototype.braceObjectInExpression=function(e,t){var u,n,r;if(t.type==="ExpressionStatement"){u=((n=this.scope.body)!=null?n[((r=this.scope.body)!=null?r.length:void 0)-1]:void 0)===t;if(u){e._last=true}else{e._braced=true}}};t.prototype.braceObjectsInElements=function(e){var t,u,n,r;r=e.elements;for(t=0,n=r.length;t<n;t++){u=r[t];if((u!=null?u.type:void 0)==="ObjectExpression"){u._braced=true}}return e};t.prototype.catchEmptyArraySlots=function(e){if(r(e.elements)){if(this.options.compat){return this.escapeJs(e)}else{return this.syntaxError(e,"Empty array slots are not supported in CoffeeScript")}}};return t}(n);r=function(e){var t,u,n;for(t=0,u=e.length;t<u;t++){n=e[t];if(n===null){return true}}return false}},{"./base":6}],19:[function(e,t,u){var n,r,i,o,s,a=function(e,t){for(var u in t){if(l.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},l={}.hasOwnProperty,f=[].slice;i=e("../helpers"),s=i.reservedWords,o=i.replace,r=i.quote;n=e("./base");t.exports=function(e){a(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.FunctionExpression=function(e,u){t.__super__.FunctionExpression.call(this,e);e.params.forEach(function(e){return function(t){if(t.type==="Identifier"){e.ctx.vars.push(t.name)}return e.preventReservedWords(t)}}(this));this.preventReservedWords(e.id);return this.removeUndefinedParameter(e)};t.prototype.FunctionExpressionExit=function(e){var u,n;t.__super__.FunctionExpressionExit.call(this,e);(n=e.body.body).splice.apply(n,[0,0].concat(f.call((u=e.body.shadows)!=null?u:[])));return e};t.prototype.CallExpression=function(e){return this.parenthesizeCallee(e)};t.prototype.Identifier=function(e){return this.escapeUndefined(e)};t.prototype.UnaryExpression=function(e){this.braceObjectBesideUnary(e);return this.updateVoidToUndefined(e)};t.prototype.VariableDeclarator=function(e){this.preventReservedWords(e.id);this.addShadowingIfNeeded(e);return this.addExplicitUndefinedInitializer(e)};t.prototype.AssignmentExpression=function(e){if(this.isReservedIdentifier(e.left)){if(this.options.compat){return this.escapeJs(e)}else{return this.preventReservedWords(e.left)}}else if(e.left.type==="Identifier"&&this.ctx.vars.indexOf(e.left.name)===-1){if(this.options.compat){return this.escapeJs(e)}else{this.warn(e,"Assignment of global variable '"+e.left.name+"'");return e}}else{return e}};t.prototype.ReturnStatement=function(e){return this.parenthesizeObjectsInArgument(e)};t.prototype.braceObjectBesideUnary=function(e){if(e.argument.type==="ObjectExpression"){e.argument._braced=true}};t.prototype.preventReservedWords=function(e){if(this.isReservedIdentifier(e)){return this.syntaxError(e,"'"+e.name+"' is a reserved CoffeeScript keyword")}};t.prototype.isReservedIdentifier=function(e){var t;t=e!=null?e.name:void 0;return t&&~s.indexOf(t)};t.prototype.parenthesizeObjectsInArgument=function(e){if(e.argument){if(e.argument.type==="ObjectExpression"){e.argument._braced=true}}return e};t.prototype.addShadowingIfNeeded=function(e){var t,u,n;u=e.id.name;if(~this.ctx.vars.indexOf(u)){this.warn(e,"Variable shadowing ('"+u+"') is not fully supported in CoffeeScript");n=o(e,{type:"ExpressionStatement",expression:{type:"CoffeeEscapedExpression",raw:"var "+u}});if((t=this.scope).shadows==null){t.shadows=[]}return this.scope.shadows.push(n)}else{return this.ctx.vars.push(u)}};t.prototype.addExplicitUndefinedInitializer=function(e){if(e.init==null){e.init={type:"Identifier",name:"undefined"};this.skip()}return e};t.prototype.updateVoidToUndefined=function(e){if(e.operator==="void"){return o(e,{type:"Identifier",name:"undefined"})}else{return e}};t.prototype.escapeUndefined=function(e){if(e.name==="undefined"&&this.options.compat){return o(e,{type:"CoffeeEscapedExpression",raw:"undefined"})}else{return e}};t.prototype.removeUndefinedParameter=function(e){var t,u,n,r,i,o,s;if(e.params){s=e.params;for(t=r=0,i=s.length;r<i;t=++r){o=s[t];u=t===e.params.length-1;n=o.type==="Identifier"&&o.name==="undefined";if(n){if(u){e.params.pop()}else{this.syntaxError(o,"'undefined' is not allowed in function parameters")}}}}return e};t.prototype.parenthesizeCallee=function(e){if(e.callee.type==="FunctionExpression"){e.callee._parenthesized=true;return e}};return t}(n)},{"../helpers":5,"./base":6}],20:[function(e,t,u){var n,r,i,o,s,a,l=function(e,t){for(var u in t){if(f.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},f={}.hasOwnProperty;r=e("../helpers").getPrecedence;n=e("./base");t.exports=function(e){l(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onEnter=function(e,t){var u,n,s;if(!t){return}s=t.type;if(s==="CallExpression"&&t["arguments"].indexOf(e)>-1){return}if(s==="NewExpression"&&t["arguments"].indexOf(e)>-1){return}if(s==="MemberExpression"&&t.property===e){return}n=r(e);if(n===-1){return}u=o(t,e)||i(t,e)||a(t,e)||n<r(t);if(u){return e._parenthesized=true}};return t}(n);o=function(e,t){return s(e,"-")&&e.right===t};i=function(e,t){return s(e,"/")&&(s(t,"/")||s(t,"*"))&&e.right===t};s=function(e,t){return e.type==="BinaryExpression"&&e.operator===t};a=function(e,t){return e.type==="ConditionalExpression"&&t.type==="ConditionalExpression"&&e.alternate!==t}},{"../helpers":5,"./base":6}],21:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").getReturnStatements;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onScopeExit=function(e,t,u,n){return this.unreturnify(u)};t.prototype.unreturnify=function(e,t){var u;if(t==null){t="body"}if(e[t].length>0){u=r(e[t]);if(u.length===0){e[t].push({type:"ReturnStatement"})}else{u.forEach(function(e){if(e.argument){e.type="ExpressionStatement";return e.expression=e.argument}})}}};return t}(n)},{"../helpers":5,"./base":6}],22:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base.coffee");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.SwitchStatement=function(e){this.consolidateCases(e);return this.ensureLastCaseIsDefault(e)};t.prototype.SwitchCase=function(e){return this.removeBreaksFromConsequents(e)};t.prototype.ensureLastCaseIsDefault=function(e){var t,u,n,r,i,o,s,a;t=e.cases.filter(function(e){return e.type==="SwitchCase"});s=t.length;for(u=i=0,a=t.length;i<a;u=++i){o=t[u];r=u===s-1;n=o.test==null;if(n&&!r){this.syntaxError(o,"default cases only allowed at the end")}}return e};t.prototype.consolidateCases=function(e){var t,u,n,r,i,o,s;i=[];s=[];o=e.cases;for(t=u=0,r=o.length;u<r;t=++u){n=o[t];if(n.type==="SwitchCase"){if(n.test){s.push(n.test)}if(n.consequent.length>0){if(n.test){n.test={type:"CoffeeListExpression",expressions:s}}s=[];i.push(n)}}else{i.push(n)}}e.cases=i;return e};t.prototype.removeBreaksFromConsequents=function(e){var t,u;if(e.test){t=e.consequent.length-1;u=e.consequent[t];if((u!=null?u.type:void 0)==="BreakStatement"){delete e.consequent[t];e.consequent.length-=1}else if((u!=null?u.type:void 0)==="ContinueStatement"){}else if((u!=null?u.type:void 0)!=="ReturnStatement"){this.syntaxError(e,"No break or return statement found in a case")}return e}};return t}(n)},{"./base.coffee":6}],23:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.LabeledStatement=function(e,t){return this.syntaxError(e,"Labeled statements are not supported in CoffeeScirpt")};t.prototype.WithStatement=function(e){return this.syntaxError(e,"'with' is not supported in CoffeeScript")};return t}(n)},{"./base":6}],24:[function(e,t,u){if(typeof Object.create==="function"){t.exports=function n(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function r(e,t){e.super_=t;var u=function(){};u.prototype=t.prototype;e.prototype=new u;e.prototype.constructor=e}}},{}],25:[function(e,t,u){(function(e){function t(e,t){var u=0;for(var n=e.length-1;n>=0;n--){var r=e[n];if(r==="."){e.splice(n,1)}else if(r===".."){e.splice(n,1);u++}else if(u){e.splice(n,1);u--}}if(t){for(;u--;u){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var r=function(e){return n.exec(e).slice(1)};u.resolve=function(){var u="",n=false;for(var r=arguments.length-1;r>=-1&&!n;r--){var o=r>=0?arguments[r]:e.cwd();if(typeof o!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!o){continue}u=o+"/"+u;n=o.charAt(0)==="/"}u=t(i(u.split("/"),function(e){return!!e}),!n).join("/");return(n?"/":"")+u||"."};u.normalize=function(e){var n=u.isAbsolute(e),r=o(e,-1)==="/";e=t(i(e.split("/"),function(e){return!!e}),!n).join("/");if(!e&&!n){e="."}if(e&&r){e+="/"}return(n?"/":"")+e};u.isAbsolute=function(e){return e.charAt(0)==="/"};u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(i(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};u.relative=function(e,t){e=u.resolve(e).substr(1);t=u.resolve(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var u=e.length-1;for(;u>=0;u--){if(e[u]!=="")break}if(t>u)return[];return e.slice(t,u-t+1)}var r=n(e.split("/"));var i=n(t.split("/"));var o=Math.min(r.length,i.length);var s=o;for(var a=0;a<o;a++){if(r[a]!==i[a]){s=a;break}}var l=[];for(var a=s;a<r.length;a++){l.push("..")}l=l.concat(i.slice(s));return l.join("/")};u.sep="/";u.delimiter=":";u.dirname=function(e){var t=r(e),u=t[0],n=t[1];if(!u&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return u+n};u.basename=function(e,t){var u=r(e)[2];if(t&&u.substr(-1*t.length)===t){u=u.substr(0,u.length-t.length)}return u};u.extname=function(e){return r(e)[3]};function i(e,t){if(e.filter)return e.filter(t);var u=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))u.push(e[n])}return u}var o="ab".substr(-1)==="b"?function(e,t,u){return e.substr(t,u)}:function(e,t,u){if(t<0)t=e.length+t;return e.substr(t,u)}}).call(this,e("_process"))},{_process:26}],26:[function(e,t,u){var n=t.exports={};n.nextTick=function(){var e=typeof window!=="undefined"&&window.setImmediate;var t=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(e){return function(e){return window.setImmediate(e)}}if(t){var u=[];window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(u.length>0){var n=u.shift();n()}}},true);return function n(e){u.push(e);window.postMessage("process-tick","*")}}return function r(e){setTimeout(e,0)}}();n.title="browser";n.browser=true;n.env={};n.argv=[];function r(){}n.on=r;n.addListener=r;n.once=r;n.off=r;n.removeListener=r;n.removeAllListeners=r;n.emit=r;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],27:[function(e,t,u){t.exports=function n(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],28:[function(e,t,u){(function(t,n){var r=/%[sdj%]/g;u.format=function(e){if(!y(e)){var t=[];for(var u=0;u<arguments.length;u++){t.push(s(arguments[u]))}return t.join(" ")}var u=1;var n=arguments;var i=n.length;var o=String(e).replace(r,function(e){if(e==="%%")return"%";if(u>=i)return e;switch(e){case"%s":return String(n[u++]);case"%d":return Number(n[u++]);case"%j":try{return JSON.stringify(n[u++])}catch(t){return"[Circular]"}default:return e}});for(var a=n[u];u<i;a=n[++u]){if(E(a)||!S(a)){o+=" "+a}else{o+=" "+s(a)}}return o};u.deprecate=function(e,r){if(v(n.process)){return function(){return u.deprecate(e,r).apply(this,arguments)}}if(t.noDeprecation===true){return e}var i=false;function o(){if(!i){if(t.throwDeprecation){throw new Error(r)}else if(t.traceDeprecation){console.trace(r)}else{console.error(r)}i=true}return e.apply(this,arguments)}return o};var i={};var o;u.debuglog=function(e){if(v(o))o=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!i[e]){if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;i[e]=function(){var t=u.format.apply(u,arguments);console.error("%s %d: %s",e,n,t)}}else{i[e]=function(){}}}return i[e]};function s(e,t){var n={seen:[],stylize:l};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(C(t)){n.showHidden=t}else if(t){u._extend(n,t)}if(v(n.showHidden))n.showHidden=false;if(v(n.depth))n.depth=2;if(v(n.colors))n.colors=false;if(v(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=a;return c(n,e,n.depth)}u.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function a(e,t){var u=s.styles[t];if(u){return"["+s.colors[u][0]+"m"+e+"["+s.colors[u][1]+"m"}else{return e}}function l(e,t){return e}function f(e){var t={};e.forEach(function(e,u){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&_(t.inspect)&&t.inspect!==u.inspect&&!(t.constructor&&t.constructor.prototype===t)){var r=t.inspect(n,e);if(!y(r)){r=c(e,r,n)}return r}var i=p(e,t);if(i){return i}var o=Object.keys(t);var s=f(o);if(e.showHidden){o=Object.getOwnPropertyNames(t)}if(w(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return D(t)}if(o.length===0){if(_(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(b(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(x(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(w(t)){return D(t)}}var l="",C=false,E=["{","}"];if(A(t)){C=true;E=["[","]"]}if(_(t)){var F=t.name?": "+t.name:"";l=" [Function"+F+"]"}if(b(t)){l=" "+RegExp.prototype.toString.call(t)}if(x(t)){l=" "+Date.prototype.toUTCString.call(t)}if(w(t)){l=" "+D(t)}if(o.length===0&&(!C||t.length==0)){return E[0]+l+E[1]}if(n<0){if(b(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var g;if(C){g=h(e,t,n,s,o)}else{g=o.map(function(u){return m(e,t,n,s,u,C)})}e.seen.pop();return d(g,l,E)}function p(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var u="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(u,"string")}if(g(t))return e.stylize(""+t,"number");if(C(t))return e.stylize(""+t,"boolean");if(E(t))return e.stylize("null","null")}function D(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,u,n,r){var i=[];for(var o=0,s=t.length;o<s;++o){if(j(t,String(o))){i.push(m(e,t,u,n,String(o),true))}else{i.push("")}}r.forEach(function(r){if(!r.match(/^\d+$/)){i.push(m(e,t,u,n,r,true))}});return i}function m(e,t,u,n,r,i){var o,s,a;a=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]};if(a.get){if(a.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(a.set){s=e.stylize("[Setter]","special")}}if(!j(n,r)){o="["+r+"]"}if(!s){if(e.seen.indexOf(a.value)<0){if(E(u)){s=c(e,a.value,null)}else{s=c(e,a.value,u-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(v(o)){if(i&&r.match(/^\d+$/)){return s}o=JSON.stringify(""+r);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function d(e,t,u){var n=0;var r=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(r>60){return u[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+u[1]}return u[0]+t+" "+e.join(", ")+" "+u[1]}function A(e){return Array.isArray(e)}u.isArray=A;function C(e){return typeof e==="boolean"}u.isBoolean=C;function E(e){return e===null}u.isNull=E;function F(e){return e==null}u.isNullOrUndefined=F;function g(e){return typeof e==="number"}u.isNumber=g;function y(e){return typeof e==="string"}u.isString=y;function B(e){return typeof e==="symbol"}u.isSymbol=B;function v(e){return e===void 0}u.isUndefined=v;function b(e){return S(e)&&I(e)==="[object RegExp]"}u.isRegExp=b;function S(e){return typeof e==="object"&&e!==null}u.isObject=S;function x(e){return S(e)&&I(e)==="[object Date]"}u.isDate=x;function w(e){return S(e)&&(I(e)==="[object Error]"||e instanceof Error)}u.isError=w;function _(e){return typeof e==="function"}u.isFunction=_;function k(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}u.isPrimitive=k;u.isBuffer=e("./support/isBuffer");function I(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date;var t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}u.log=function(){console.log("%s - %s",O(),u.format.apply(u,arguments))};u.inherits=e("inherits");u._extend=function(e,t){if(!t||!S(t))return e;var u=Object.keys(t);var n=u.length;while(n--){e[u[n]]=t[u[n]]}return e};function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":27,_process:26,inherits:24}],29:[function(e,t,u){(function(t){(function(){"use strict";var n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E,F,g,y,B,v,b,S,x,w,_;s=e("estraverse");a=e("esutils");n=s.Syntax;function k(e){return ye.Expression.hasOwnProperty(e.type)}function I(e){return ye.Statement.hasOwnProperty(e.type)}r={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};i={"||":r.LogicalOR,"&&":r.LogicalAND,"|":r.BitwiseOR,"^":r.BitwiseXOR,"&":r.BitwiseAND,"==":r.Equality,"!=":r.Equality,"===":r.Equality,"!==":r.Equality,is:r.Equality,isnt:r.Equality,"<":r.Relational,">":r.Relational,"<=":r.Relational,">=":r.Relational,"in":r.Relational,"instanceof":r.Relational,"<<":r.BitwiseSHIFT,">>":r.BitwiseSHIFT,">>>":r.BitwiseSHIFT,"+":r.Additive,"-":r.Additive,"*":r.Multiplicative,"%":r.Multiplicative,"/":r.Multiplicative};var P=1,L=1<<1,O=1<<2,j=1<<3,M=1<<4,R=1<<5;var T=L|O,N=P|L,q=P|L|O,U=P,z=O,W=P|O;var V=P,Y=P|R,G=0,K=P|M,$=P|j;function H(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function J(e,t){var u="";for(t|=0;t>0;t>>>=1,e+=e){if(t&1){u+=e}}return u}l=Array.isArray;if(!l){l=function _e(e){return Object.prototype.toString.call(e)==="[object Array]"}}function X(e){return/[\r\n]/g.test(e)}function Z(e){var t=e.length;return t&&a.code.isLineTerminator(e.charCodeAt(t-1))}function Q(e,t){var u;for(u in t){if(t.hasOwnProperty(u)){e[u]=t[u]}}return e}function ee(e,t){var u,n;function r(e){return typeof e==="object"&&e instanceof Object&&!(e instanceof RegExp)}for(u in t){if(t.hasOwnProperty(u)){n=t[u];if(r(n)){if(r(e[u])){ee(e[u],n)}else{e[u]=ee({},n)}}else{e[u]=n}}}return e}function te(e){var t,u,n,r,i;if(e!==e){throw new Error("Numeric literal whose value is NaN")}if(e<0||e===0&&1/e<0){throw new Error("Numeric literal whose value is negative")}if(e===1/0){return p?"null":D?"1e400":"1e+400"}t=""+e;if(!D||t.length<3){return t}u=t.indexOf(".");if(!p&&t.charCodeAt(0)===48&&u===1){u=0;t=t.slice(1)}n=t;t=t.replace("e+","e");r=0;if((i=n.indexOf("e"))>0){r=+n.slice(i+1);n=n.slice(0,i)}if(u>=0){r-=n.length-u-1;n=+(n.slice(0,u)+n.slice(u+1))+""}i=0;while(n.charCodeAt(n.length+i-1)===48){--i}if(i!==0){r-=i;n=n.slice(0,i)}if(r!==0){n+="e"+r}if((n.length<t.length||h&&e>1e12&&Math.floor(e)===e&&(n="0x"+e.toString(16)).length<t.length)&&+n===e){t=n}return t}function ue(e,t){if((e&~1)===8232){return(t?"u":"\\u")+(e===8232?"2028":"2029")}else if(e===10||e===13){return(t?"":"\\")+(e===10?"n":"r")}return String.fromCharCode(e)}function ne(e){var t,u,n,r,i,o,s,a;u=e.toString();if(e.source){t=u.match(/\/([^\/]*)$/);if(!t){return u}n=t[1];u="";s=false;a=false;for(r=0,i=e.source.length;r<i;++r){o=e.source.charCodeAt(r);if(!a){if(s){if(o===93){s=false}}else{if(o===47){u+="\\"}else if(o===91){s=true}}u+=ue(o,a);a=o===92}else{u+=ue(o,a);a=false}}return"/"+u+"/"+n}return u}function re(e,t){var u;if(e===8){return"\\b"}if(e===12){return"\\f"}if(e===9){return"\\t"}u=e.toString(16).toUpperCase();if(p||e>255){return"\\u"+"0000".slice(u.length)+u}else if(e===0&&!a.code.isDecimalDigit(t)){return"\\0"}else if(e===11){return"\\x0B"}else{return"\\x"+"00".slice(u.length)+u}}function ie(e){if(e===92){return"\\\\"}if(e===10){return"\\n"}if(e===13){return"\\r"}if(e===8232){return"\\u2028"}if(e===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function oe(e){var t,u,n,r;r=m==="double"?'"':"'";for(t=0,u=e.length;t<u;++t){n=e.charCodeAt(t);if(n===39){r='"';break}else if(n===34){r="'";break}else if(n===92){++t}}return r+e+r}function se(e){var t="",u,n,r,i=0,o=0,s,l;for(u=0,n=e.length;u<n;++u){r=e.charCodeAt(u);if(r===39){++i}else if(r===34){++o}else if(r===47&&p){t+="\\"}else if(a.code.isLineTerminator(r)||r===92){t+=ie(r);continue}else if(!a.code.isIdentifierPartES5(r)&&(p&&r<32||!p&&!d&&(r<32||r>126))){t+=re(r,e.charCodeAt(u+1));continue}t+=String.fromCharCode(r)}s=!(m==="double"||m==="auto"&&o<i);l=s?"'":'"';if(!(s?i:o)){return l+t+l}e=t;t=l;for(u=0,n=e.length;u<n;++u){r=e.charCodeAt(u);if(r===39&&s||r===34&&!s){t+="\\"}t+=String.fromCharCode(r)}return t+l}function ae(e){var t,u,n,r="";for(t=0,u=e.length;t<u;++t){n=e[t];r+=l(n)?ae(n):n}return r}function le(e,t){if(!b){if(l(e)){return ae(e)}else{return e}}if(t==null){if(e instanceof o){return e}else{t={}}}if(t.loc==null){return new o(null,null,b,e,t.name||null)}return new o(t.loc.start.line,t.loc.start.column,b===true?t.loc.source||null:b,e,t.name||null)}function fe(){return C?C:" "}function ce(e,t){var u,n,r,i;u=le(e).toString();if(u.length===0){return[t]}n=le(t).toString();if(n.length===0){return[e]}r=u.charCodeAt(u.length-1);i=n.charCodeAt(0);if((r===43||r===45)&&r===i||a.code.isIdentifierPartES5(r)&&a.code.isIdentifierPartES5(i)||r===47&&i===105){return[e,fe(),t]}else if(a.code.isWhiteSpace(r)||a.code.isLineTerminator(r)||a.code.isWhiteSpace(i)||a.code.isLineTerminator(i)){return[e,t]}return[e,C,t]}function pe(e){return[f,e]}function De(e){var t;t=f;f+=c;e(f);f=t}function he(e){var t;for(t=e.length-1;t>=0;--t){if(a.code.isLineTerminator(e.charCodeAt(t))){break}}return e.length-1-t}function me(e,t){var u,n,r,i,o,s,l,c;u=e.split(/\r\n|[\r\n]/);s=Number.MAX_VALUE;for(n=1,r=u.length;n<r;++n){i=u[n];o=0;while(o<i.length&&a.code.isWhiteSpace(i.charCodeAt(o))){++o}if(s>o){s=o}}if(typeof t!=="undefined"){l=f;if(u[1][s]==="*"){t+=" "}f=t}else{if(s&1){--s}l=f}for(n=1,r=u.length;n<r;++n){c=le(pe(u[n].slice(s)));u[n]=b?c.join(""):c}f=l;return u.join("\n")}function de(e,t){if(e.type==="Line"){if(Z(e.value)){return"//"+e.value}else{var u="//"+e.value;if(!x){u+="\n"}return u}}if(B.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)){return me("/*"+e.value+"*/",t)}return"/*"+e.value+"*/"}function Ae(e,t){var u,r,i,o,s,a,l,p,D,h,m,d,A,C;if(e.leadingComments&&e.leadingComments.length>0){o=t;if(x){i=e.leadingComments[0];t=[];p=i.extendedRange;D=i.range;m=S.substring(p[0],D[0]);C=(m.match(/\n/g)||[]).length;if(C>0){t.push(J("\n",C));t.push(pe(de(i)))}else{t.push(m);t.push(de(i))}h=D;for(u=1,r=e.leadingComments.length;u<r;u++){i=e.leadingComments[u];D=i.range;d=S.substring(h[1],D[0]);C=(d.match(/\n/g)||[]).length;t.push(J("\n",C));t.push(pe(de(i)));h=D}A=S.substring(D[1],p[1]);C=(A.match(/\n/g)||[]).length;t.push(J("\n",C))}else{i=e.leadingComments[0];t=[];if(g&&e.type===n.Program&&e.body.length===0){t.push("\n")}t.push(de(i));if(!Z(le(t).toString())){t.push("\n")}for(u=1,r=e.leadingComments.length;u<r;++u){i=e.leadingComments[u];l=[de(i)];
if(!Z(le(l).toString())){l.push("\n")}t.push(pe(l))}}t.push(pe(o))}if(e.trailingComments){if(x){i=e.trailingComments[0];p=i.extendedRange;D=i.range;m=S.substring(p[0],D[0]);C=(m.match(/\n/g)||[]).length;if(C>0){t.push(J("\n",C));t.push(pe(de(i)))}else{t.push(m);t.push(de(i))}}else{s=!Z(le(t).toString());a=J(" ",he(le([f,t,c]).toString()));for(u=0,r=e.trailingComments.length;u<r;++u){i=e.trailingComments[u];if(s){if(u===0){t=[t,c]}else{t=[t,a]}t.push(de(i,a))}else{t=[t,pe(de(i))]}if(u!==r-1&&!Z(le(t).toString())){t=[t,"\n"]}}}}return t}function Ce(e,t,u){var n,r=0;for(n=e;n<t;n++){if(S[n]==="\n"){r++}}for(n=1;n<r;n++){u.push(A)}}function Ee(e,t,u){if(t<u){return["(",e,")"]}return e}function Fe(e){var t,u,n;n=e.split(/\r\n|\n/);for(t=1,u=n.length;t<u;t++){n[t]=A+f+n[t]}return n}function ge(e,t){var u,n,i;u=e[B.verbatim];if(typeof u==="string"){n=Ee(Fe(u),r.Sequence,t)}else{n=Fe(u.content);i=u.precedence!=null?u.precedence:r.Sequence;n=Ee(n,i,t)}return le(n,e)}function ye(){}ye.prototype.maybeBlock=function(e,t){var u,r,i=this;r=!B.comment||!e.leadingComments;if(e.type===n.BlockStatement&&r){return[C,this.generateStatement(e,t)]}if(e.type===n.EmptyStatement&&r){return";"}De(function(){u=[A,pe(i.generateStatement(e,t))]});return u};ye.prototype.maybeBlockSuffix=function(e,t){var u=Z(le(t).toString());if(e.type===n.BlockStatement&&(!B.comment||!e.leadingComments)&&!u){return[t,C]}if(u){return[t,f]}return[t,A,f]};function Be(e){return le(e.name,e)}function ve(e,t){return e.async?"async"+(t?fe():C):""}function be(e){var t=e.generator&&!B.moz.starlessGenerator;return t?"*"+C:""}function Se(e){var t=e.value;if(t.async){return ve(t,!e.computed)}else{return be(t)?"*":""}}ye.prototype.generatePattern=function(e,t,u){if(e.type===n.Identifier){return Be(e)}return this.generateExpression(e,t,u)};ye.prototype.generateFunctionParams=function(e){var t,u,i,o;o=false;if(e.type===n.ArrowFunctionExpression&&!e.rest&&(!e.defaults||e.defaults.length===0)&&e.params.length===1&&e.params[0].type===n.Identifier){i=[ve(e,true),Be(e.params[0])]}else{i=e.type===n.ArrowFunctionExpression?[ve(e,false)]:[];i.push("(");if(e.defaults){o=true}for(t=0,u=e.params.length;t<u;++t){if(o&&e.defaults[t]){i.push(this.generateAssignment(e.params[t],e.defaults[t],"=",r.Assignment,q))}else{i.push(this.generatePattern(e.params[t],r.Assignment,q))}if(t+1<u){i.push(","+C)}}if(e.rest){if(e.params.length){i.push(","+C)}i.push("...");i.push(Be(e.rest))}i.push(")")}return i};ye.prototype.generateFunctionBody=function(e){var t,u;t=this.generateFunctionParams(e);if(e.type===n.ArrowFunctionExpression){t.push(C);t.push("=>")}if(e.expression){t.push(C);u=this.generateExpression(e.body,r.Assignment,q);if(u.toString().charAt(0)==="{"){u=["(",u,")"]}t.push(u)}else{t.push(this.maybeBlock(e.body,$))}return t};ye.prototype.generateIterationForStatement=function(e,t,u){var i=["for"+C+"("],o=this;De(function(){if(t.left.type===n.VariableDeclaration){De(function(){i.push(t.left.kind+fe());i.push(o.generateStatement(t.left.declarations[0],G))})}else{i.push(o.generateExpression(t.left,r.Call,q))}i=ce(i,e);i=[ce(i,o.generateExpression(t.right,r.Sequence,q)),")"]});i.push(this.maybeBlock(t.body,u));return i};ye.prototype.generatePropertyKey=function(e,t){var u=[];if(t){u.push("[")}u.push(this.generateExpression(e,r.Sequence,q));if(t){u.push("]")}return u};ye.prototype.generateAssignment=function(e,t,u,n,i){if(r.Assignment<n){i|=P}return Ee([this.generateExpression(e,r.Call,i),C+u+C,this.generateExpression(t,r.Assignment,i)],r.Assignment,n)};ye.prototype.semicolon=function(e){if(!F&&e&R){return""}return";"};ye.Statement={BlockStatement:function(e,t){var u,n,r=["{",A],i=this;De(function(){if(e.body.length===0&&x){u=e.range;if(u[1]-u[0]>2){n=S.substring(u[0]+1,u[1]-1);if(n[0]==="\n"){r=["{"]}r.push(n)}}var o,s,a,l;l=V;if(t&j){l|=M}for(o=0,s=e.body.length;o<s;++o){if(x){if(o===0){if(e.body[0].leadingComments){u=e.body[0].leadingComments[0].extendedRange;n=S.substring(u[0],u[1]);if(n[0]==="\n"){r=["{"]}}if(!e.body[0].leadingComments){Ce(e.range[0],e.body[0].range[0],r)}}if(o>0){if(!e.body[o-1].trailingComments&&!e.body[o].leadingComments){Ce(e.body[o-1].range[1],e.body[o].range[0],r)}}}if(o===s-1){l|=R}if(e.body[o].leadingComments&&x){a=i.generateStatement(e.body[o],l)}else{a=pe(i.generateStatement(e.body[o],l))}r.push(a);if(!Z(le(a).toString())){if(x&&o<s-1){if(!e.body[o+1].leadingComments){r.push(A)}}else{r.push(A)}}if(x){if(o===s-1){if(!e.body[o].trailingComments){Ce(e.body[o].range[1],e.range[1],r)}}}}});r.push(pe("}"));return r},BreakStatement:function(e,t){if(e.label){return"break "+e.label.name+this.semicolon(t)}return"break"+this.semicolon(t)},ContinueStatement:function(e,t){if(e.label){return"continue "+e.label.name+this.semicolon(t)}return"continue"+this.semicolon(t)},ClassBody:function(e,t){var u=["{",A],n=this;De(function(t){var i,o;for(i=0,o=e.body.length;i<o;++i){u.push(t);u.push(n.generateExpression(e.body[i],r.Sequence,q));if(i+1<o){u.push(A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f);u.push("}");return u},ClassDeclaration:function(e,t){var u,n;u=["class "+e.id.name];if(e.superClass){n=ce("extends",this.generateExpression(e.superClass,r.Assignment,q));u=ce(u,n)}u.push(C);u.push(this.generateStatement(e.body,Y));return u},DirectiveStatement:function(e,t){if(B.raw&&e.raw){return e.raw+this.semicolon(t)}return oe(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var u=ce("do",this.maybeBlock(e.body,V));u=this.maybeBlockSuffix(e.body,u);return ce(u,["while"+C+"(",this.generateExpression(e.test,r.Sequence,q),")"+this.semicolon(t)])},CatchClause:function(e,t){var u,n=this;De(function(){var t;u=["catch"+C+"(",n.generateExpression(e.param,r.Sequence,q),")"];if(e.guard){t=n.generateExpression(e.guard,r.Sequence,q);u.splice(2,0," if ",t)}});u.push(this.maybeBlock(e.body,V));return u},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDeclaration:function(e,t){var u=["export"],i,o=this;i=t&R?Y:V;if(e["default"]){u=ce(u,"default");if(I(e.declaration)){u=ce(u,this.generateStatement(e.declaration,i))}else{u=ce(u,this.generateExpression(e.declaration,r.Assignment,q)+this.semicolon(t))}return u}if(e.declaration){return ce(u,this.generateStatement(e.declaration,i))}if(e.specifiers){if(e.specifiers.length===0){u=ce(u,"{"+C+"}")}else if(e.specifiers[0].type===n.ExportBatchSpecifier){u=ce(u,this.generateExpression(e.specifiers[0],r.Sequence,q))}else{u=ce(u,"{");De(function(t){var n,i;u.push(A);for(n=0,i=e.specifiers.length;n<i;++n){u.push(t);u.push(o.generateExpression(e.specifiers[n],r.Sequence,q));if(n+1<i){u.push(","+A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f+"}")}if(e.source){u=ce(u,["from"+C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)])}else{u.push(this.semicolon(t))}}return u},ExportDefaultDeclaration:function(e,t){e.default=true;return this.ExportDeclaration(e,t)},ExportNamedDeclaration:function(e,t){return this.ExportDeclaration(e,t)},ExpressionStatement:function(e,t){var u,i;function o(e){var t;if(e.slice(0,5)!=="class"){return false}t=e.charCodeAt(5);return t===123||a.code.isWhiteSpace(t)||a.code.isLineTerminator(t)}function s(e){var t;if(e.slice(0,8)!=="function"){return false}t=e.charCodeAt(8);return t===40||a.code.isWhiteSpace(t)||t===42||a.code.isLineTerminator(t)}function l(e){var t,u,n;if(e.slice(0,5)!=="async"){return false}if(!a.code.isWhiteSpace(e.charCodeAt(5))){return false}for(u=6,n=e.length;u<n;++u){if(!a.code.isWhiteSpace(e.charCodeAt(u))){break}}if(u===n){return false}if(e.slice(u,u+8)!=="function"){return false}t=e.charCodeAt(u+8);return t===40||a.code.isWhiteSpace(t)||t===42||a.code.isLineTerminator(t)}u=[this.generateExpression(e.expression,r.Sequence,q)];i=le(u).toString();if(i.charCodeAt(0)===123||o(i)||s(i)||l(i)||y&&t&M&&e.expression.type===n.Literal&&typeof e.expression.value==="string"){u=["(",u,")"+this.semicolon(t)]}else{u.push(this.semicolon(t))}return u},ImportDeclaration:function(e,t){var u,i,o=this;if(e.specifiers.length===0){return["import",C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)]}u=["import"];i=0;if(e.specifiers[i].type===n.ImportDefaultSpecifier){u=ce(u,[this.generateExpression(e.specifiers[i],r.Sequence,q)]);++i}if(e.specifiers[i]){if(i!==0){u.push(",")}if(e.specifiers[i].type===n.ImportNamespaceSpecifier){u=ce(u,[C,this.generateExpression(e.specifiers[i],r.Sequence,q)])}else{u.push(C+"{");if(e.specifiers.length-i===1){u.push(C);u.push(this.generateExpression(e.specifiers[i],r.Sequence,q));u.push(C+"}"+C)}else{De(function(t){var n,s;u.push(A);for(n=i,s=e.specifiers.length;n<s;++n){u.push(t);u.push(o.generateExpression(e.specifiers[n],r.Sequence,q));if(n+1<s){u.push(","+A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f+"}"+C)}}}u=ce(u,["from"+C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)]);return u},VariableDeclarator:function(e,t){var u=t&P?q:T;if(e.init){return[this.generateExpression(e.id,r.Assignment,u),C,"=",C,this.generateExpression(e.init,r.Assignment,u)]}return this.generatePattern(e.id,r.Assignment,u)},VariableDeclaration:function(e,t){var u,n,r,i,o,s=this;u=[e.kind];o=t&P?V:G;function a(){i=e.declarations[0];if(B.comment&&i.leadingComments){u.push("\n");u.push(pe(s.generateStatement(i,o)))}else{u.push(fe());u.push(s.generateStatement(i,o))}for(n=1,r=e.declarations.length;n<r;++n){i=e.declarations[n];if(B.comment&&i.leadingComments){u.push(","+A);u.push(pe(s.generateStatement(i,o)))}else{u.push(","+C);u.push(s.generateStatement(i,o))}}}if(e.declarations.length>1){De(a)}else{a()}u.push(this.semicolon(t));return u},ThrowStatement:function(e,t){return[ce("throw",this.generateExpression(e.argument,r.Sequence,q)),this.semicolon(t)]},TryStatement:function(e,t){var u,n,r,i;u=["try",this.maybeBlock(e.block,V)];u=this.maybeBlockSuffix(e.block,u);if(e.handlers){for(n=0,r=e.handlers.length;n<r;++n){u=ce(u,this.generateStatement(e.handlers[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(e.handlers[n].body,u)}}}else{i=e.guardedHandlers||[];for(n=0,r=i.length;n<r;++n){u=ce(u,this.generateStatement(i[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(i[n].body,u)}}if(e.handler){if(l(e.handler)){for(n=0,r=e.handler.length;n<r;++n){u=ce(u,this.generateStatement(e.handler[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(e.handler[n].body,u)}}}else{u=ce(u,this.generateStatement(e.handler,V));if(e.finalizer){u=this.maybeBlockSuffix(e.handler.body,u)}}}}if(e.finalizer){u=ce(u,["finally",this.maybeBlock(e.finalizer,V)])}return u},SwitchStatement:function(e,t){var u,n,i,o,s,a=this;De(function(){u=["switch"+C+"(",a.generateExpression(e.discriminant,r.Sequence,q),")"+C+"{"+A]});if(e.cases){s=V;for(i=0,o=e.cases.length;i<o;++i){if(i===o-1){s|=R}n=pe(this.generateStatement(e.cases[i],s));u.push(n);if(!Z(le(n).toString())){u.push(A)}}}u.push(pe("}"));return u},SwitchCase:function(e,t){var u,i,o,s,a,l=this;De(function(){if(e.test){u=[ce("case",l.generateExpression(e.test,r.Sequence,q)),":"]}else{u=["default:"]}o=0;s=e.consequent.length;if(s&&e.consequent[0].type===n.BlockStatement){i=l.maybeBlock(e.consequent[0],V);u.push(i);o=1}if(o!==s&&!Z(le(u).toString())){u.push(A)}a=V;for(;o<s;++o){if(o===s-1&&t&R){a|=R}i=pe(l.generateStatement(e.consequent[o],a));u.push(i);if(o+1!==s&&!Z(le(i).toString())){u.push(A)}}});return u},IfStatement:function(e,t){var u,i,o,s=this;De(function(){u=["if"+C+"(",s.generateExpression(e.test,r.Sequence,q),")"]});o=t&R;i=V;if(o){i|=R}if(e.alternate){u.push(this.maybeBlock(e.consequent,V));u=this.maybeBlockSuffix(e.consequent,u);if(e.alternate.type===n.IfStatement){u=ce(u,["else ",this.generateStatement(e.alternate,i)])}else{u=ce(u,ce("else",this.maybeBlock(e.alternate,i)))}}else{u.push(this.maybeBlock(e.consequent,i))}return u},ForStatement:function(e,t){var u,i=this;De(function(){u=["for"+C+"("];if(e.init){if(e.init.type===n.VariableDeclaration){u.push(i.generateStatement(e.init,G))}else{u.push(i.generateExpression(e.init,r.Sequence,T));u.push(";")}}else{u.push(";")}if(e.test){u.push(C);u.push(i.generateExpression(e.test,r.Sequence,q));u.push(";")}else{u.push(";")}if(e.update){u.push(C);u.push(i.generateExpression(e.update,r.Sequence,q));u.push(")")}else{u.push(")")}});u.push(this.maybeBlock(e.body,t&R?Y:V));return u},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&R?Y:V)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&R?Y:V)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&R?Y:V)]},Program:function(e,t){var u,n,r,i,o;i=e.body.length;u=[g&&i>0?"\n":""];o=K;for(r=0;r<i;++r){if(!g&&r===i-1){o|=R}if(x){if(r===0){if(!e.body[0].leadingComments){Ce(e.range[0],e.body[r].range[0],u)}}if(r>0){if(!e.body[r-1].trailingComments&&!e.body[r].leadingComments){Ce(e.body[r-1].range[1],e.body[r].range[0],u)}}}n=pe(this.generateStatement(e.body[r],o));u.push(n);if(r+1<i&&!Z(le(n).toString())){if(x){if(!e.body[r+1].leadingComments){u.push(A)}}else{u.push(A)}}if(x){if(r===i-1){if(!e.body[r].trailingComments){Ce(e.body[r].range[1],e.range[1],u)}}}}return u},FunctionDeclaration:function(e,t){return[ve(e,true),"function",be(e)||fe(),Be(e.id),this.generateFunctionBody(e)]},ReturnStatement:function(e,t){if(e.argument){return[ce("return",this.generateExpression(e.argument,r.Sequence,q)),this.semicolon(t)]}return["return"+this.semicolon(t)]},WhileStatement:function(e,t){var u,n=this;De(function(){u=["while"+C+"(",n.generateExpression(e.test,r.Sequence,q),")"]});u.push(this.maybeBlock(e.body,t&R?Y:V));return u},WithStatement:function(e,t){var u,n=this;De(function(){u=["with"+C+"(",n.generateExpression(e.object,r.Sequence,q),")"]});u.push(this.maybeBlock(e.body,t&R?Y:V));return u}};Q(ye.prototype,ye.Statement);ye.Expression={SequenceExpression:function(e,t,u){var n,i,o;if(r.Sequence<t){u|=P}n=[];for(i=0,o=e.expressions.length;i<o;++i){n.push(this.generateExpression(e.expressions[i],r.Assignment,u));if(i+1<o){n.push(","+C)}}return Ee(n,r.Sequence,t)},AssignmentExpression:function(e,t,u){return this.generateAssignment(e.left,e.right,e.operator,t,u)},ArrowFunctionExpression:function(e,t,u){return Ee(this.generateFunctionBody(e),r.ArrowFunction,t)},ConditionalExpression:function(e,t,u){if(r.Conditional<t){u|=P}return Ee([this.generateExpression(e.test,r.LogicalOR,u),C+"?"+C,this.generateExpression(e.consequent,r.Assignment,u),C+":"+C,this.generateExpression(e.alternate,r.Assignment,u)],r.Conditional,t)},LogicalExpression:function(e,t,u){return this.BinaryExpression(e,t,u)},BinaryExpression:function(e,t,u){var n,r,o,s;r=i[e.operator];if(r<t){u|=P}o=this.generateExpression(e.left,r,u);s=o.toString();if(s.charCodeAt(s.length-1)===47&&a.code.isIdentifierPartES5(e.operator.charCodeAt(0))){n=[o,fe(),e.operator]}else{n=ce(o,e.operator)}o=this.generateExpression(e.right,r+1,u);if(e.operator==="/"&&o.toString().charAt(0)==="/"||e.operator.slice(-1)==="<"&&o.toString().slice(0,3)==="!--"){n.push(fe());n.push(o)}else{n=ce(n,o)}if(e.operator==="in"&&!(u&P)){return["(",n,")"]}return Ee(n,r,t)},CallExpression:function(e,t,u){var n,i,o;n=[this.generateExpression(e.callee,r.Call,N)];n.push("(");for(i=0,o=e["arguments"].length;i<o;++i){n.push(this.generateExpression(e["arguments"][i],r.Assignment,q));if(i+1<o){n.push(","+C)}}n.push(")");if(!(u&L)){return["(",n,")"]}return Ee(n,r.Call,t)},NewExpression:function(e,t,u){var n,i,o,s,a;i=e["arguments"].length;a=u&O&&!E&&i===0?W:U;n=ce("new",this.generateExpression(e.callee,r.New,a));if(!(u&O)||E||i>0){n.push("(");for(o=0,s=i;o<s;++o){n.push(this.generateExpression(e["arguments"][o],r.Assignment,q));if(o+1<s){n.push(","+C)}}n.push(")")}return Ee(n,r.New,t)},MemberExpression:function(e,t,u){var i,o;i=[this.generateExpression(e.object,r.Call,u&L?N:U)];if(e.computed){i.push("[");i.push(this.generateExpression(e.property,r.Sequence,u&L?q:W));i.push("]")}else{if(e.object.type===n.Literal&&typeof e.object.value==="number"){o=le(i).toString();if(o.indexOf(".")<0&&!/[eExX]/.test(o)&&a.code.isDecimalDigit(o.charCodeAt(o.length-1))&&!(o.length>=2&&o.charCodeAt(0)===48)){i.push(".")}}i.push(".");i.push(Be(e.property))}return Ee(i,r.Member,t)},UnaryExpression:function(e,t,u){var n,i,o,s,l;i=this.generateExpression(e.argument,r.Unary,q);if(C===""){n=ce(e.operator,i)}else{n=[e.operator];if(e.operator.length>2){n=ce(n,i)}else{s=le(n).toString();l=s.charCodeAt(s.length-1);o=i.toString().charCodeAt(0);if((l===43||l===45)&&l===o||a.code.isIdentifierPartES5(l)&&a.code.isIdentifierPartES5(o)){n.push(fe());n.push(i)}else{n.push(i)}}}return Ee(n,r.Unary,t)},YieldExpression:function(e,t,u){var n;if(e.delegate){n="yield*"}else{n="yield"}if(e.argument){n=ce(n,this.generateExpression(e.argument,r.Yield,q))}return Ee(n,r.Yield,t)},AwaitExpression:function(e,t,u){var n=ce(e.all?"await*":"await",this.generateExpression(e.argument,r.Await,q));return Ee(n,r.Await,t)},UpdateExpression:function(e,t,u){if(e.prefix){return Ee([e.operator,this.generateExpression(e.argument,r.Unary,q)],r.Unary,t)}return Ee([this.generateExpression(e.argument,r.Postfix,q),e.operator],r.Postfix,t)},FunctionExpression:function(e,t,u){var n=[ve(e,true),"function"];if(e.id){n.push(be(e)||fe());n.push(Be(e.id))}else{n.push(be(e)||C)}n.push(this.generateFunctionBody(e));return n},ExportBatchSpecifier:function(e,t,u){return"*"},ArrayPattern:function(e,t,u){return this.ArrayExpression(e,t,u,true)},ArrayExpression:function(e,t,u,n){var i,o,s=this;if(!e.elements.length){return"[]"}o=n?false:e.elements.length>1;i=["[",o?A:""];De(function(t){var u,n;for(u=0,n=e.elements.length;u<n;++u){if(!e.elements[u]){if(o){i.push(t)}if(u+1===n){i.push(",")}}else{i.push(o?t:"");i.push(s.generateExpression(e.elements[u],r.Assignment,q))}if(u+1<n){i.push(","+(o?A:C))}}});if(o&&!Z(le(i).toString())){i.push(A)}i.push(o?f:"");i.push("]");return i},RestElement:function(e,t,u){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,t,u){var n,i;n=["class"];if(e.id){n=ce(n,this.generateExpression(e.id,r.Sequence,q))}if(e.superClass){i=ce("extends",this.generateExpression(e.superClass,r.Assignment,q));n=ce(n,i)}n.push(C);n.push(this.generateStatement(e.body,Y));return n},MethodDefinition:function(e,t,u){var n,r;if(e["static"]){n=["static"+C]}else{n=[]}if(e.kind==="get"||e.kind==="set"){r=[ce(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]}else{r=[Se(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}return ce(n,r)},Property:function(e,t,u){if(e.kind==="get"||e.kind==="set"){return[e.kind,fe(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}if(e.shorthand){return this.generatePropertyKey(e.key,e.computed)}if(e.method){return[Se(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}return[this.generatePropertyKey(e.key,e.computed),":"+C,this.generateExpression(e.value,r.Assignment,q)]},ObjectExpression:function(e,t,u){var n,i,o,s=this;if(!e.properties.length){return"{}"}n=e.properties.length>1;De(function(){o=s.generateExpression(e.properties[0],r.Sequence,q)});if(!n){if(!X(le(o).toString())){return["{",C,o,C,"}"]}}De(function(t){var u,a;i=["{",A,t,o];if(n){i.push(","+A);for(u=1,a=e.properties.length;u<a;++u){i.push(t);i.push(s.generateExpression(e.properties[u],r.Sequence,q));if(u+1<a){i.push(","+A)}}}});if(!Z(le(i).toString())){i.push(A)}i.push(f);i.push("}");return i},ObjectPattern:function(e,t,u){var i,o,s,a,l,c=this;if(!e.properties.length){return"{}"}a=false;if(e.properties.length===1){l=e.properties[0];if(l.value.type!==n.Identifier){a=true}}else{for(o=0,s=e.properties.length;o<s;++o){l=e.properties[o];if(!l.shorthand){a=true;break}}}i=["{",a?A:""];De(function(t){var u,n;for(u=0,n=e.properties.length;u<n;++u){i.push(a?t:"");i.push(c.generateExpression(e.properties[u],r.Sequence,q));if(u+1<n){i.push(","+(a?A:C))}}});if(a&&!Z(le(i).toString())){i.push(A)}i.push(a?f:"");i.push("}");return i},ThisExpression:function(e,t,u){return"this"},Super:function(e,t,u){return"super"},Identifier:function(e,t,u){return Be(e)},ImportDefaultSpecifier:function(e,t,u){return Be(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,u){var n=["*"];var r=e.id||e.local;if(r){n.push(C+"as"+fe()+Be(r))}return n},ImportSpecifier:function(e,t,u){return this.ExportSpecifier(e,t,u)},ExportSpecifier:function(e,t,u){var n=[(e.id||e.local).name];if(e.name){n.push(fe()+"as"+fe()+Be(e.name))}return n},Literal:function(e,t,u){var r;if(e.hasOwnProperty("raw")&&v&&B.raw){try{r=v(e.raw).body[0].expression;if(r.type===n.Literal){if(r.value===e.value){return e.raw}}}catch(i){}}if(e.value===null){return"null"}if(typeof e.value==="string"){return se(e.value)}if(typeof e.value==="number"){return te(e.value)}if(typeof e.value==="boolean"){return e.value?"true":"false"}return ne(e.value)},GeneratorExpression:function(e,t,u){return this.ComprehensionExpression(e,t,u)},ComprehensionExpression:function(e,t,u){var i,o,s,a,l=this;i=e.type===n.GeneratorExpression?["("]:["["];if(B.moz.comprehensionExpressionStartsWithAssignment){a=this.generateExpression(e.body,r.Assignment,q);i.push(a)}if(e.blocks){De(function(){for(o=0,s=e.blocks.length;o<s;++o){a=l.generateExpression(e.blocks[o],r.Sequence,q);if(o>0||B.moz.comprehensionExpressionStartsWithAssignment){i=ce(i,a)}else{i.push(a)}}})}if(e.filter){i=ce(i,"if"+C);a=this.generateExpression(e.filter,r.Sequence,q);i=ce(i,["(",a,")"])}if(!B.moz.comprehensionExpressionStartsWithAssignment){a=this.generateExpression(e.body,r.Assignment,q);i=ce(i,a)}i.push(e.type===n.GeneratorExpression?")":"]");return i},ComprehensionBlock:function(e,t,u){var i;if(e.left.type===n.VariableDeclaration){i=[e.left.kind,fe(),this.generateStatement(e.left.declarations[0],G)]}else{i=this.generateExpression(e.left,r.Call,q)}i=ce(i,e.of?"of":"in");i=ce(i,this.generateExpression(e.right,r.Sequence,q));return["for"+C+"(",i,")"]},SpreadElement:function(e,t,u){return["...",this.generateExpression(e.argument,r.Assignment,q)]},TaggedTemplateExpression:function(e,t,u){var n=N;if(!(u&L)){n=U}var i=[this.generateExpression(e.tag,r.Call,n),this.generateExpression(e.quasi,r.Primary,z)];return Ee(i,r.TaggedTemplate,t)},TemplateElement:function(e,t,u){return e.value.raw},TemplateLiteral:function(e,t,u){var n,i,o;n=["`"];for(i=0,o=e.quasis.length;i<o;++i){n.push(this.generateExpression(e.quasis[i],r.Primary,q));if(i+1<o){n.push("${"+C);n.push(this.generateExpression(e.expressions[i],r.Sequence,q));n.push(C+"}")}}n.push("`");return n},ModuleSpecifier:function(e,t,u){return this.Literal(e,t,u)}};Q(ye.prototype,ye.Expression);ye.prototype.generateExpression=function(e,t,u){var r,i;i=e.type||n.Property;if(B.verbatim&&e.hasOwnProperty(B.verbatim)){return ge(e,t)}r=this[i](e,t,u);if(B.comment){r=Ae(e,r)}return le(r,e)};ye.prototype.generateStatement=function(e,t){var u,r;u=this[e.type](e,t);if(B.comment){u=Ae(e,u)}r=le(u).toString();if(e.type===n.Program&&!g&&A===""&&r.charAt(r.length-1)==="\n"){u=b?le(u).replaceRight(/\s+$/,""):r.replace(/\s+$/,"")}return le(u,e)};function xe(e){var t;t=new ye;if(I(e)){return t.generateStatement(e,V)}if(k(e)){return t.generateExpression(e,r.Sequence,q)}throw new Error("Unknown node type: "+e.type)}function we(n,r){var i=H(),s,a;if(r!=null){if(typeof r.indent==="string"){i.format.indent.style=r.indent}if(typeof r.base==="number"){i.format.indent.base=r.base}r=ee(i,r);c=r.format.indent.style;if(typeof r.base==="string"){f=r.base}else{f=J(c,r.format.indent.base)}}else{r=i;c=r.format.indent.style;f=J(c,r.format.indent.base)}p=r.format.json;D=r.format.renumber;h=p?false:r.format.hexadecimal;m=p?"double":r.format.quotes;d=r.format.escapeless;A=r.format.newline;C=r.format.space;if(r.format.compact){A=C=c=f=""}E=r.format.parentheses;F=r.format.semicolons;g=r.format.safeConcatenation;y=r.directive;v=p?null:r.parse;b=r.sourceMap;S=r.sourceCode;x=r.format.preserveBlankLines&&S!==null;B=r;if(b){if(!u.browser){o=e("source-map").SourceNode}else{o=t.sourceMap.SourceNode}}s=xe(n);if(!b){a={code:s.toString(),map:null};return r.sourceMapWithCode?a:a.code}a=s.toStringWithSourceMap({file:r.file,sourceRoot:r.sourceMapRoot});if(r.sourceContent){a.map.setSourceContent(r.sourceMap,r.sourceContent)}if(r.sourceMapWithCode){return a}return a.map.toString()}w={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};_=H().format;u.version=e("./package.json").version;u.generate=we;u.attachComments=s.attachComments;u.Precedence=ee({},r);u.browser=false;u.FORMAT_MINIFY=w;u.FORMAT_DEFAULTS=_})()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":47,estraverse:49,esutils:33,"source-map":34}],30:[function(e,t,u){(function(){"use strict";function e(e){if(e==null){return false}switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return true}return false}function u(e){if(e==null){return false}switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return true}return false}function n(e){if(e==null){return false}switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return true}return false}function r(e){return n(e)||e!=null&&e.type==="FunctionDeclaration"}function i(e){switch(e.type){case"IfStatement":if(e.alternate!=null){return e.alternate}return e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}function o(e){var t;if(e.type!=="IfStatement"){return false}if(e.alternate==null){return false}t=e.consequent;do{if(t.type==="IfStatement"){if(t.alternate==null){return true}}t=i(t)}while(t);return false}t.exports={isExpression:e,isStatement:n,isIterationStatement:u,isSourceElement:r,isProblematicIfStatement:o,trailingStatement:i}})()},{}],31:[function(e,t,u){(function(){"use strict";var e,u,n,r,i,o;u={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/
};e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function s(e){return 48<=e&&e<=57}function a(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70}function l(e){return e>=48&&e<=55}n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function f(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&n.indexOf(e)>=0}function c(e){return e===10||e===13||e===8232||e===8233}function p(e){if(e<=65535){return String.fromCharCode(e)}var t=String.fromCharCode(Math.floor((e-65536)/1024)+55296);var u=String.fromCharCode((e-65536)%1024+56320);return t+u}r=new Array(128);for(o=0;o<128;++o){r[o]=o>=97&&o<=122||o>=65&&o<=90||o===36||o===95}i=new Array(128);for(o=0;o<128;++o){i[o]=o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===36||o===95}function D(e){return e<128?r[e]:u.NonAsciiIdentifierStart.test(p(e))}function h(e){return e<128?i[e]:u.NonAsciiIdentifierPart.test(p(e))}function m(t){return t<128?r[t]:e.NonAsciiIdentifierStart.test(p(t))}function d(t){return t<128?i[t]:e.NonAsciiIdentifierPart.test(p(t))}t.exports={isDecimalDigit:s,isHexDigit:a,isOctalDigit:l,isWhiteSpace:f,isLineTerminator:c,isIdentifierStartES5:D,isIdentifierPartES5:h,isIdentifierStartES6:m,isIdentifierPartES6:d}})()},{}],32:[function(e,t,u){(function(){"use strict";var u=e("./code");function n(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function r(e,t){if(!t&&e==="yield"){return false}return i(e,t)}function i(e,t){if(t&&n(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function o(e,t){return e==="null"||e==="true"||e==="false"||r(e,t)}function s(e,t){return e==="null"||e==="true"||e==="false"||i(e,t)}function a(e){return e==="eval"||e==="arguments"}function l(e){var t,n,r;if(e.length===0){return false}r=e.charCodeAt(0);if(!u.isIdentifierStartES5(r)){return false}for(t=1,n=e.length;t<n;++t){r=e.charCodeAt(t);if(!u.isIdentifierPartES5(r)){return false}}return true}function f(e,t){return(e-55296)*1024+(t-56320)+65536}function c(e){var t,n,r,i,o;if(e.length===0){return false}o=u.isIdentifierStartES6;for(t=0,n=e.length;t<n;++t){r=e.charCodeAt(t);if(55296<=r&&r<=56319){++t;if(t>=n){return false}i=e.charCodeAt(t);if(!(56320<=i&&i<=57343)){return false}r=f(r,i)}if(!o(r)){return false}o=u.isIdentifierPartES6}return true}function p(e,t){return l(e)&&!o(e,t)}function D(e,t){return c(e)&&!s(e,t)}t.exports={isKeywordES5:r,isKeywordES6:i,isReservedWordES5:o,isReservedWordES6:s,isRestrictedWord:a,isIdentifierNameES5:l,isIdentifierNameES6:c,isIdentifierES5:p,isIdentifierES6:D}})()},{"./code":31}],33:[function(e,t,u){(function(){"use strict";u.ast=e("./ast");u.code=e("./code");u.keyword=e("./keyword")})()},{"./ast":30,"./code":31,"./keyword":32}],34:[function(e,t,u){u.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator;u.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer;u.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":42,"./source-map/source-map-generator":43,"./source-map/source-node":44}],35:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(){this._array=[];this._set={}}r.fromArray=function i(e,t){var u=new r;for(var n=0,i=e.length;n<i;n++){u.add(e[n],t)}return u};r.prototype.add=function o(e,t){var u=this.has(e);var r=this._array.length;if(!u||t){this._array.push(e)}if(!u){this._set[n.toSetString(e)]=r}};r.prototype.has=function s(e){return Object.prototype.hasOwnProperty.call(this._set,n.toSetString(e))};r.prototype.indexOf=function a(e){if(this.has(e)){return this._set[n.toSetString(e)]}throw new Error('"'+e+'" is not in the set.')};r.prototype.at=function l(e){if(e>=0&&e<this._array.length){return this._array[e]}throw new Error("No element indexed by "+e)};r.prototype.toArray=function f(){return this._array.slice()};t.ArraySet=r})},{"./util":45,amdefine:46}],36:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./base64");var r=5;var i=1<<r;var o=i-1;var s=i;function a(e){return e<0?(-e<<1)+1:(e<<1)+0}function l(e){var t=(e&1)===1;var u=e>>1;return t?-u:u}t.encode=function f(e){var t="";var u;var i=a(e);do{u=i&o;i>>>=r;if(i>0){u|=s}t+=n.encode(u)}while(i>0);return t};t.decode=function c(e,t){var u=0;var i=e.length;var a=0;var f=0;var c,p;do{if(u>=i){throw new Error("Expected more digits in base 64 VLQ value.")}p=n.decode(e.charAt(u++));c=!!(p&s);p&=o;a=a+(p<<f);f+=r}while(c);t.value=l(a);t.rest=e.slice(u)}})},{"./base64":37,amdefine:46}],37:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n={};var r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){n[e]=t;r[t]=e});t.encode=function i(e){if(e in r){return r[e]}throw new TypeError("Must be between 0 and 63: "+e)};t.decode=function o(e){if(e in n){return n[e]}throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:46}],38:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./array-set").ArraySet;var o=e("./base64-vlq");var s=e("./source-map-consumer").SourceMapConsumer;function a(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sources");var o=n.getArg(t,"names",[]);var s=n.getArg(t,"sourceRoot",null);var a=n.getArg(t,"sourcesContent",null);var l=n.getArg(t,"mappings");var f=n.getArg(t,"file",null);if(u!=this._version){throw new Error("Unsupported version: "+u)}r=r.map(n.normalize);this._names=i.fromArray(o,true);this._sources=i.fromArray(r,true);this.sourceRoot=s;this.sourcesContent=a;this._mappings=l;this.file=f}a.prototype=Object.create(s.prototype);a.prototype.consumer=s;a.fromSourceMap=function l(e){var t=Object.create(a.prototype);t._names=i.fromArray(e._names.toArray(),true);t._sources=i.fromArray(e._sources.toArray(),true);t.sourceRoot=e._sourceRoot;t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot);t.file=e._file;t.__generatedMappings=e._mappings.toArray().slice();t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions);return t};a.prototype._version=3;Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot!=null?n.join(this.sourceRoot,e):e},this)}});a.prototype._parseMappings=function f(e,t){var u=1;var r=0;var i=0;var s=0;var a=0;var l=0;var f=e;var c={};var p;while(f.length>0){if(f.charAt(0)===";"){u++;f=f.slice(1);r=0}else if(f.charAt(0)===","){f=f.slice(1)}else{p={};p.generatedLine=u;o.decode(f,c);p.generatedColumn=r+c.value;r=p.generatedColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.source=this._sources.at(a+c.value);a+=c.value;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source, but no line and column")}o.decode(f,c);p.originalLine=i+c.value;i=p.originalLine;p.originalLine+=1;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source and line, but no column")}o.decode(f,c);p.originalColumn=s+c.value;s=p.originalColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.name=this._names.at(l+c.value);l+=c.value;f=c.rest}}this.__generatedMappings.push(p);if(typeof p.originalLine==="number"){this.__originalMappings.push(p)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};a.prototype._findMapping=function c(e,t,u,n,i){if(e[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+e[u])}if(e[n]<0){throw new TypeError("Column must be greater than or equal to 0, got "+e[n])}return r.search(e,t,i)};a.prototype.computeColumnSpans=function p(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(t.generatedLine===u.generatedLine){t.lastGeneratedColumn=u.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}};a.prototype.originalPositionFor=function D(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===t.generatedLine){var i=n.getArg(r,"source",null);if(i!=null&&this.sourceRoot!=null){i=n.join(this.sourceRoot,i)}return{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}};a.prototype.sourceContentFor=function h(e,t){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){e=n.relative(this.sourceRoot,e)}if(this._sources.has(e)){return this.sourcesContent[this._sources.indexOf(e)]}var u;if(this.sourceRoot!=null&&(u=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if(u.scheme=="file"&&this._sources.has(r)){return this.sourcesContent[this._sources.indexOf(r)]}if((!u.path||u.path=="/")&&this._sources.has("/"+e)){return this.sourcesContent[this._sources.indexOf("/"+e)]}}if(t){return null}else{throw new Error('"'+e+'" is not in the SourceMap.')}};a.prototype.generatedPositionFor=function m(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(u>=0){var r=this._originalMappings[u];return{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null),lastColumn:n.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};t.BasicSourceMapConsumer=a})},{"./array-set":35,"./base64-vlq":36,"./binary-search":39,"./source-map-consumer":42,"./util":45,amdefine:46}],39:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){function n(e,t,u,r,i){var o=Math.floor((t-e)/2)+e;var s=i(u,r[o],true);if(s===0){return o}else if(s>0){if(t-o>1){return n(o,t,u,r,i)}return o}else{if(o-e>1){return n(e,o,u,r,i)}return e<0?-1:e}}t.search=function r(e,t,u){if(t.length===0){return-1}return n(-1,t.length,e,t,u)}})},{amdefine:46}],40:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./source-map-consumer").SourceMapConsumer;var o=e("./basic-source-map-consumer").BasicSourceMapConsumer;function s(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sections");if(u!=this._version){throw new Error("Unsupported version: "+u)}var o={line:-1,column:0};this._sections=r.map(function(e){if(e.url){throw new Error("Support for url field in sections not implemented.")}var t=n.getArg(e,"offset");var u=n.getArg(t,"line");var r=n.getArg(t,"column");if(u<o.line||u===o.line&&r<o.column){throw new Error("Section offsets must be ordered and non-overlapping.")}o=t;return{generatedOffset:{generatedLine:u+1,generatedColumn:r+1},consumer:new i(n.getArg(e,"map"))}})}s.prototype=Object.create(i.prototype);s.prototype.constructor=i;s.prototype._version=3;Object.defineProperty(s.prototype,"sources",{get:function(){var e=[];for(var t=0;t<this._sections.length;t++){for(var u=0;u<this._sections[t].consumer.sources.length;u++){e.push(this._sections[t].consumer.sources[u])}}return e}});s.prototype.originalPositionFor=function a(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=r.search(t,this._sections,function(e,t){var u=e.generatedLine-t.generatedOffset.generatedLine;if(u){return u}return e.generatedColumn-t.generatedOffset.generatedColumn});var i=this._sections[u];if(!i){return{source:null,line:null,column:null,name:null}}return i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0)})};s.prototype.sourceContentFor=function l(e,t){for(var u=0;u<this._sections.length;u++){var n=this._sections[u];var r=n.consumer.sourceContentFor(e,true);if(r){return r}}if(t){return null}else{throw new Error('"'+e+'" is not in the SourceMap.')}};s.prototype.generatedPositionFor=function f(e){for(var t=0;t<this._sections.length;t++){var u=this._sections[t];if(u.consumer.sources.indexOf(n.getArg(e,"source"))===-1){continue}var r=u.consumer.generatedPositionFor(e);if(r){var i={line:r.line+(u.generatedOffset.generatedLine-1),column:r.column+(u.generatedOffset.generatedLine===r.line?u.generatedOffset.generatedColumn-1:0)};return i}}return{line:null,column:null}};s.prototype._parseMappings=function c(e,t){this.__generatedMappings=[];this.__originalMappings=[];for(var u=0;u<this._sections.length;u++){var r=this._sections[u];var i=r.consumer._generatedMappings;for(var o=0;o<i.length;o++){var s=i[u];var a=s.source;var l=r.consumer.sourceRoot;if(a!=null&&l!=null){a=n.join(l,a)}var f={source:a,generatedLine:s.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:s.column+(r.generatedOffset.generatedLine===s.generatedLine)?r.generatedOffset.generatedColumn-1:0,originalLine:s.originalLine,originalColumn:s.originalColumn,name:s.name};this.__generatedMappings.push(f);if(typeof f.originalLine==="number"){this.__originalMappings.push(f)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};t.IndexedSourceMapConsumer=s})},{"./basic-source-map-consumer":38,"./binary-search":39,"./source-map-consumer":42,"./util":45,amdefine:46}],41:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(e,t){var u=e.generatedLine;var r=t.generatedLine;var i=e.generatedColumn;var o=t.generatedColumn;return r>u||r==u&&o>=i||n.compareByGeneratedPositions(e,t)<=0}function i(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function o(e,t){this._array.forEach(e,t)};i.prototype.add=function s(e){var t;if(r(this._last,e)){this._last=e;this._array.push(e)}else{this._sorted=false;this._array.push(e)}};i.prototype.toArray=function a(){if(!this._sorted){this._array.sort(n.compareByGeneratedPositions);this._sorted=true}return this._array};t.MappingList=i})},{"./util":45,amdefine:46}],42:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(t){var u=t;if(typeof t==="string"){u=JSON.parse(t.replace(/^\)\]\}'/,""))}if(u.sections!=null){var n=e("./indexed-source-map-consumer");return new n.IndexedSourceMapConsumer(u)}else{var r=e("./basic-source-map-consumer");return new r.BasicSourceMapConsumer(u)}}r.fromSourceMap=function(t){var u=e("./basic-source-map-consumer");return u.BasicSourceMapConsumer.fromSourceMap(t)};r.prototype._version=3;r.prototype.__generatedMappings=null;Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});r.prototype.__originalMappings=null;Object.defineProperty(r.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});r.prototype._nextCharIsMappingSeparator=function i(e){var t=e.charAt(0);return t===";"||t===","};r.prototype._parseMappings=function o(e,t){throw new Error("Subclasses must implement _parseMappings")};r.GENERATED_ORDER=1;r.ORIGINAL_ORDER=2;r.prototype.eachMapping=function s(e,t,u){var i=t||null;var o=u||r.GENERATED_ORDER;var s;switch(o){case r.GENERATED_ORDER:s=this._generatedMappings;break;case r.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(e){var t=e.source;if(t!=null&&a!=null){t=n.join(a,t)}return{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,i)};r.prototype.allGeneratedPositionsFor=function a(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=[];var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];while(i&&i.originalLine===t.originalLine){u.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)});i=this._originalMappings[--r]}}return u.reverse()};t.SourceMapConsumer=r})},{"./basic-source-map-consumer":38,"./indexed-source-map-consumer":40,"./util":45,amdefine:46}],43:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./base64-vlq");var r=e("./util");
var i=e("./array-set").ArraySet;var o=e("./mapping-list").MappingList;function s(e){if(!e){e={}}this._file=r.getArg(e,"file",null);this._sourceRoot=r.getArg(e,"sourceRoot",null);this._skipValidation=r.getArg(e,"skipValidation",false);this._sources=new i;this._names=new i;this._mappings=new o;this._sourcesContents=null}s.prototype._version=3;s.fromSourceMap=function a(e){var t=e.sourceRoot;var u=new s({file:e.file,sourceRoot:t});e.eachMapping(function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};if(e.source!=null){n.source=e.source;if(t!=null){n.source=r.relative(t,n.source)}n.original={line:e.originalLine,column:e.originalColumn};if(e.name!=null){n.name=e.name}}u.addMapping(n)});e.sources.forEach(function(t){var n=e.sourceContentFor(t);if(n!=null){u.setSourceContent(t,n)}});return u};s.prototype.addMapping=function l(e){var t=r.getArg(e,"generated");var u=r.getArg(e,"original",null);var n=r.getArg(e,"source",null);var i=r.getArg(e,"name",null);if(!this._skipValidation){this._validateMapping(t,u,n,i)}if(n!=null&&!this._sources.has(n)){this._sources.add(n)}if(i!=null&&!this._names.has(i)){this._names.add(i)}this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:u!=null&&u.line,originalColumn:u!=null&&u.column,source:n,name:i})};s.prototype.setSourceContent=function f(e,t){var u=e;if(this._sourceRoot!=null){u=r.relative(this._sourceRoot,u)}if(t!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[r.toSetString(u)]=t}else if(this._sourcesContents){delete this._sourcesContents[r.toSetString(u)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};s.prototype.applySourceMap=function c(e,t,u){var n=t;if(t==null){if(e.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}n=e.file}var o=this._sourceRoot;if(o!=null){n=r.relative(o,n)}var s=new i;var a=new i;this._mappings.unsortedForEach(function(t){if(t.source===n&&t.originalLine!=null){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});if(i.source!=null){t.source=i.source;if(u!=null){t.source=r.join(u,t.source)}if(o!=null){t.source=r.relative(o,t.source)}t.originalLine=i.line;t.originalColumn=i.column;if(i.name!=null){t.name=i.name}}}var l=t.source;if(l!=null&&!s.has(l)){s.add(l)}var f=t.name;if(f!=null&&!a.has(f)){a.add(f)}},this);this._sources=s;this._names=a;e.sources.forEach(function(t){var n=e.sourceContentFor(t);if(n!=null){if(u!=null){t=r.join(u,t)}if(o!=null){t=r.relative(o,t)}this.setSourceContent(t,n)}},this)};s.prototype._validateMapping=function p(e,t,u,n){if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!u&&!n){return}else if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&u){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:u,original:t,name:n}))}};s.prototype._serializeMappings=function D(){var e=0;var t=1;var u=0;var i=0;var o=0;var s=0;var a="";var l;var f=this._mappings.toArray();for(var c=0,p=f.length;c<p;c++){l=f[c];if(l.generatedLine!==t){e=0;while(l.generatedLine!==t){a+=";";t++}}else{if(c>0){if(!r.compareByGeneratedPositions(l,f[c-1])){continue}a+=","}}a+=n.encode(l.generatedColumn-e);e=l.generatedColumn;if(l.source!=null){a+=n.encode(this._sources.indexOf(l.source)-s);s=this._sources.indexOf(l.source);a+=n.encode(l.originalLine-1-i);i=l.originalLine-1;a+=n.encode(l.originalColumn-u);u=l.originalColumn;if(l.name!=null){a+=n.encode(this._names.indexOf(l.name)-o);o=this._names.indexOf(l.name)}}}return a};s.prototype._generateSourcesContent=function h(e,t){return e.map(function(e){if(!this._sourcesContents){return null}if(t!=null){e=r.relative(t,e)}var u=r.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)};s.prototype.toJSON=function m(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){e.file=this._file}if(this._sourceRoot!=null){e.sourceRoot=this._sourceRoot}if(this._sourcesContents){e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)}return e};s.prototype.toString=function d(){return JSON.stringify(this)};t.SourceMapGenerator=s})},{"./array-set":35,"./base64-vlq":36,"./mapping-list":41,"./util":45,amdefine:46}],44:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./source-map-generator").SourceMapGenerator;var r=e("./util");var i=/(\r?\n)/;var o=10;var s="$$$isSourceNode$$$";function a(e,t,u,n,r){this.children=[];this.sourceContents={};this.line=e==null?null:e;this.column=t==null?null:t;this.source=u==null?null:u;this.name=r==null?null:r;this[s]=true;if(n!=null)this.add(n)}a.fromStringWithSourceMap=function l(e,t,u){var n=new a;var o=e.split(i);var s=function(){var e=o.shift();var t=o.shift()||"";return e+t};var l=1,f=0;var c=null;t.eachMapping(function(e){if(c!==null){if(l<e.generatedLine){var t="";p(c,s());l++;f=0}else{var u=o[0];var t=u.substr(0,e.generatedColumn-f);o[0]=u.substr(e.generatedColumn-f);f=e.generatedColumn;p(c,t);c=e;return}}while(l<e.generatedLine){n.add(s());l++}if(f<e.generatedColumn){var u=o[0];n.add(u.substr(0,e.generatedColumn));o[0]=u.substr(e.generatedColumn);f=e.generatedColumn}c=e},this);if(o.length>0){if(c){p(c,s())}n.add(o.join(""))}t.sources.forEach(function(e){var i=t.sourceContentFor(e);if(i!=null){if(u!=null){e=r.join(u,e)}n.setSourceContent(e,i)}});return n;function p(e,t){if(e===null||e.source===undefined){n.add(t)}else{var i=u?r.join(u,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,i,t,e.name))}}};a.prototype.add=function f(e){if(Array.isArray(e)){e.forEach(function(e){this.add(e)},this)}else if(e[s]||typeof e==="string"){if(e){this.children.push(e)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e)}return this};a.prototype.prepend=function c(e){if(Array.isArray(e)){for(var t=e.length-1;t>=0;t--){this.prepend(e[t])}}else if(e[s]||typeof e==="string"){this.children.unshift(e)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e)}return this};a.prototype.walk=function p(e){var t;for(var u=0,n=this.children.length;u<n;u++){t=this.children[u];if(t[s]){t.walk(e)}else{if(t!==""){e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};a.prototype.join=function D(e){var t;var u;var n=this.children.length;if(n>0){t=[];for(u=0;u<n-1;u++){t.push(this.children[u]);t.push(e)}t.push(this.children[u]);this.children=t}return this};a.prototype.replaceRight=function h(e,t){var u=this.children[this.children.length-1];if(u[s]){u.replaceRight(e,t)}else if(typeof u==="string"){this.children[this.children.length-1]=u.replace(e,t)}else{this.children.push("".replace(e,t))}return this};a.prototype.setSourceContent=function m(e,t){this.sourceContents[r.toSetString(e)]=t};a.prototype.walkSourceContents=function d(e){for(var t=0,u=this.children.length;t<u;t++){if(this.children[t][s]){this.children[t].walkSourceContents(e)}}var n=Object.keys(this.sourceContents);for(var t=0,u=n.length;t<u;t++){e(r.fromSetString(n[t]),this.sourceContents[n[t]])}};a.prototype.toString=function A(){var e="";this.walk(function(t){e+=t});return e};a.prototype.toStringWithSourceMap=function C(e){var t={code:"",line:1,column:0};var u=new n(e);var r=false;var i=null;var s=null;var a=null;var l=null;this.walk(function(e,n){t.code+=e;if(n.source!==null&&n.line!==null&&n.column!==null){if(i!==n.source||s!==n.line||a!==n.column||l!==n.name){u.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})}i=n.source;s=n.line;a=n.column;l=n.name;r=true}else if(r){u.addMapping({generated:{line:t.line,column:t.column}});i=null;r=false}for(var f=0,c=e.length;f<c;f++){if(e.charCodeAt(f)===o){t.line++;t.column=0;if(f+1===c){i=null;r=false}else if(r){u.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})}}else{t.column++}}});this.walkSourceContents(function(e,t){u.setSourceContent(e,t)});return{code:t.code,map:u}};t.SourceNode=a})},{"./source-map-generator":43,"./util":45,amdefine:46}],45:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){function n(e,t,u){if(t in e){return e[t]}else if(arguments.length===3){return u}else{throw new Error('"'+t+'" is a required argument.')}}t.getArg=n;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var i=/^data:.+\,.+$/;function o(e){var t=e.match(r);if(!t){return null}return{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}}t.urlParse=o;function s(e){var t="";if(e.scheme){t+=e.scheme+":"}t+="//";if(e.auth){t+=e.auth+"@"}if(e.host){t+=e.host}if(e.port){t+=":"+e.port}if(e.path){t+=e.path}return t}t.urlGenerate=s;function a(e){var t=e;var u=o(e);if(u){if(!u.path){return e}t=u.path}var n=t.charAt(0)==="/";var r=t.split(/\/+/);for(var i,a=0,l=r.length-1;l>=0;l--){i=r[l];if(i==="."){r.splice(l,1)}else if(i===".."){a++}else if(a>0){if(i===""){r.splice(l+1,a);a=0}else{r.splice(l,2);a--}}}t=r.join("/");if(t===""){t=n?"/":"."}if(u){u.path=t;return s(u)}return t}t.normalize=a;function l(e,t){if(e===""){e="."}if(t===""){t="."}var u=o(t);var n=o(e);if(n){e=n.path||"/"}if(u&&!u.scheme){if(n){u.scheme=n.scheme}return s(u)}if(u||t.match(i)){return t}if(n&&!n.host&&!n.path){n.host=t;return s(n)}var r=t.charAt(0)==="/"?t:a(e.replace(/\/+$/,"")+"/"+t);if(n){n.path=r;return s(n)}return r}t.join=l;function f(e,t){if(e===""){e="."}e=e.replace(/\/$/,"");var u=o(e);if(t.charAt(0)=="/"&&u&&u.path=="/"){return t.slice(1)}return t.indexOf(e+"/")===0?t.substr(e.length+1):t}t.relative=f;function c(e){return"$"+e}t.toSetString=c;function p(e){return e.substr(1)}t.fromSetString=p;function D(e,t){var u=e||"";var n=t||"";return(u>n)-(u<n)}function h(e,t,u){var n;n=D(e.source,t.source);if(n){return n}n=e.originalLine-t.originalLine;if(n){return n}n=e.originalColumn-t.originalColumn;if(n||u){return n}n=D(e.name,t.name);if(n){return n}n=e.generatedLine-t.generatedLine;if(n){return n}return e.generatedColumn-t.generatedColumn}t.compareByOriginalPositions=h;function m(e,t,u){var n;n=e.generatedLine-t.generatedLine;if(n){return n}n=e.generatedColumn-t.generatedColumn;if(n||u){return n}n=D(e.source,t.source);if(n){return n}n=e.originalLine-t.originalLine;if(n){return n}n=e.originalColumn-t.originalColumn;if(n){return n}return D(e.name,t.name)}t.compareByGeneratedPositions=m})},{amdefine:46}],46:[function(e,t,u){(function(u,n){"use strict";function r(t,r){"use strict";var i={},o={},s=false,a=e("path"),l,f;function c(e){var t,u;for(t=0;e[t];t+=1){u=e[t];if(u==="."){e.splice(t,1);t-=1}else if(u===".."){if(t===1&&(e[2]===".."||e[0]==="..")){break}else if(t>0){e.splice(t-1,2);t-=2}}}}function p(e,t){var u;if(e&&e.charAt(0)==="."){if(t){u=t.split("/");u=u.slice(0,u.length-1);u=u.concat(e.split("/"));c(u);e=u.join("/")}}return e}function D(e){return function(t){return p(t,e)}}function h(e){function t(t){o[e]=t}t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")};return t}l=function(e,t,n,r){function i(i,o){if(typeof i==="string"){return f(e,t,n,i,r)}else{i=i.map(function(u){return f(e,t,n,u,r)});if(o){u.nextTick(function(){o.apply(null,i)})}}}i.toUrl=function(e){if(e.indexOf(".")===0){return p(e,a.dirname(n.filename))}else{return e}};return i};r=r||function A(){return t.require.apply(t,arguments)};function m(e,u,i){var a,f,c,p;if(e){f=o[e]={};c={id:e,uri:n,exports:f};a=l(r,f,c,e)}else{if(s){throw new Error("amdefine with no module ID cannot be called more than once per file.")}s=true;f=t.exports;c=t;a=l(r,f,c,t.id)}if(u){u=u.map(function(e){return a(e)})}if(typeof i==="function"){p=i.apply(c.exports,u)}else{p=i}if(p!==undefined){c.exports=p;if(e){o[e]=c.exports}}}f=function(e,t,u,n,r){var s=n.indexOf("!"),a=n,c,d;if(s===-1){n=p(n,r);if(n==="require"){return l(e,t,u,r)}else if(n==="exports"){return t}else if(n==="module"){return u}else if(o.hasOwnProperty(n)){return o[n]}else if(i[n]){m.apply(null,i[n]);return o[n]}else{if(e){return e(a)}else{throw new Error("No module with ID: "+n)}}}else{c=n.substring(0,s);n=n.substring(s+1,n.length);d=f(e,t,u,c,r);if(d.normalize){n=d.normalize(n,D(r))}else{n=p(n,r)}if(o[n]){return o[n]}else{d.load(n,l(e,t,u,r),h(n),{});return o[n]}}};function d(e,t,u){if(Array.isArray(e)){u=t;t=e;e=undefined}else if(typeof e!=="string"){u=e;e=t=undefined}if(t&&!Array.isArray(t)){u=t;t=undefined}if(!t){t=["require","exports","module"]}if(e){i[e]=[e,t,u]}else{m(e,t,u)}}d.require=function(e){if(o[e]){return o[e]}if(i[e]){m.apply(null,i[e]);return o[e]}};d.amd={};return d}t.exports=r}).call(this,e("_process"),"/node_modules/escodegen/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:26,path:25}],47:[function(e,t,u){t.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.7.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^2.0.2",esprima:"^1.2.2",optionator:"^0.5.0","source-map":"~0.2.0"},optionalDependencies:{"source-map":"~0.2.0"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"1.0.0-dev-harmony-moz",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js"},gitHead:"5dabbc5441b396febd0afb9252a9afdfa7051657",bugs:{url:"https://github.com/estools/escodegen/issues"},_id:"escodegen@1.7.0",_shasum:"4e299d8cc33087b7f29c19e2b9e84362abe35453",_from:"escodegen@>=1.6.0 <2.0.0",_npmVersion:"2.11.3",_nodeVersion:"0.12.7",_npmUser:{name:"michaelficarra",email:"npm@michael.ficarra.me"},dist:{shasum:"4e299d8cc33087b7f29c19e2b9e84362abe35453",tarball:"http://registry.npmjs.org/escodegen/-/escodegen-1.7.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.7.0.tgz",readme:"ERROR: No README data found!"}},{}],48:[function(t,u,n){(function(t,u){"use strict";if(typeof e==="function"&&e.amd){e(["exports"],u)}else if(typeof n!=="undefined"){u(n)}else{u(t.esprima={})}})(this,function(e){"use strict";var t,u,n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E,F,g,y,B,v,b,S,x;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10};u={};u[t.BooleanLiteral]="Boolean";u[t.EOF]="<end>";u[t.Identifier]="Identifier";u[t.Keyword]="Keyword";u[t.NullLiteral]="Null";u[t.NumericLiteral]="Numeric";u[t.Punctuator]="Punctuator";u[t.StringLiteral]="String";u[t.RegularExpression]="RegularExpression";u[t.Template]="Template";n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};i={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"};o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"};s={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/
};function w(e,t){if(!e){throw new Error("ASSERT: "+t)}}function _(e){return e>=48&&e<=57}function k(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function I(e){return"01234567".indexOf(e)>=0}function P(e){var t=e!=="0",u="01234567".indexOf(e);if(f<g&&I(a[f])){t=true;u=u*8+"01234567".indexOf(a[f++]);if("0123".indexOf(e)>=0&&f<g&&I(a[f])){u=u*8+"01234567".indexOf(a[f++])}}return{code:u,octal:t}}function L(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function O(e){return e===10||e===13||e===8232||e===8233}function j(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))}function M(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&s.NonAsciiIdentifierStart.test(j(e))}function R(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&s.NonAsciiIdentifierPart.test(j(e))}function T(e){switch(e){case"enum":case"export":case"import":case"super":return true;default:return false}}function N(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function q(e){return e==="eval"||e==="arguments"}function U(e){switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function z(e,t,u,n,r){var i;w(typeof u==="number","Comment must have valid position");B.lastCommentStart=u;i={type:e,value:t};if(v.range){i.range=[u,n]}if(v.loc){i.loc=r}v.comments.push(i);if(v.attachComment){v.leadingComments.push(i);v.trailingComments.push(i)}}function W(e){var t,u,n,r;t=f-e;u={start:{line:c,column:f-p-e}};while(f<g){n=a.charCodeAt(f);++f;if(O(n)){D=true;if(v.comments){r=a.slice(t+e,f-1);u.end={line:c,column:f-p-1};z("Line",r,t,f-1,u)}if(n===13&&a.charCodeAt(f)===10){++f}++c;p=f;return}}if(v.comments){r=a.slice(t+e,f);u.end={line:c,column:f-p};z("Line",r,t,f,u)}}function V(){var e,t,u,n;if(v.comments){e=f-2;t={start:{line:c,column:f-p-2}}}while(f<g){u=a.charCodeAt(f);if(O(u)){if(u===13&&a.charCodeAt(f+1)===10){++f}D=true;++c;++f;p=f}else if(u===42){if(a.charCodeAt(f+1)===47){++f;++f;if(v.comments){n=a.slice(e+2,f-2);t.end={line:c,column:f-p};z("Block",n,e,f,t)}return}++f}else{++f}}if(v.comments){t.end={line:c,column:f-p};n=a.slice(e+2,f);z("Block",n,e,f,t)}_e()}function Y(){var e,t;D=false;t=f===0;while(f<g){e=a.charCodeAt(f);if(L(e)){++f}else if(O(e)){D=true;++f;if(e===13&&a.charCodeAt(f)===10){++f}++c;p=f;t=true}else if(e===47){e=a.charCodeAt(f+1);if(e===47){++f;++f;W(2);t=true}else if(e===42){++f;++f;V()}else{break}}else if(t&&e===45){if(a.charCodeAt(f+1)===45&&a.charCodeAt(f+2)===62){f+=3;W(3)}else{break}}else if(e===60){if(a.slice(f+1,f+4)==="!--"){++f;++f;++f;++f;W(4)}else{break}}else{break}}}function G(e){var t,u,n,r=0;u=e==="u"?4:2;for(t=0;t<u;++t){if(f<g&&k(a[f])){n=a[f++];r=r*16+"0123456789abcdef".indexOf(n.toLowerCase())}else{return""}}return String.fromCharCode(r)}function K(){var e,t;e=a[f];t=0;if(e==="}"){we()}while(f<g){e=a[f++];if(!k(e)){break}t=t*16+"0123456789abcdef".indexOf(e.toLowerCase())}if(t>1114111||e!=="}"){we()}return j(t)}function $(e){var t,u,n;t=a.charCodeAt(e);if(t>=55296&&t<=56319){n=a.charCodeAt(e+1);if(n>=56320&&n<=57343){u=t;t=(u-55296)*1024+n-56320+65536}}return t}function H(){var e,t,u;e=$(f);u=j(e);f+=u.length;if(e===92){if(a.charCodeAt(f)!==117){we()}++f;if(a[f]==="{"){++f;t=K()}else{t=G("u");e=t.charCodeAt(0);if(!t||t==="\\"||!M(e)){we()}}u=t}while(f<g){e=$(f);if(!R(e)){break}t=j(e);u+=t;f+=t.length;if(e===92){u=u.substr(0,u.length-1);if(a.charCodeAt(f)!==117){we()}++f;if(a[f]==="{"){++f;t=K()}else{t=G("u");e=t.charCodeAt(0);if(!t||t==="\\"||!R(e)){we()}}u+=t}}return u}function J(){var e,t;e=f++;while(f<g){t=a.charCodeAt(f);if(t===92){f=e;return H()}else if(t>=55296&&t<57343){f=e;return H()}if(R(t)){++f}else{break}}return a.slice(e,f)}function X(){var e,u,n;e=f;u=a.charCodeAt(f)===92?H():J();if(u.length===1){n=t.Identifier}else if(U(u)){n=t.Keyword}else if(u==="null"){n=t.NullLiteral}else if(u==="true"||u==="false"){n=t.BooleanLiteral}else{n=t.Identifier}return{type:n,value:u,lineNumber:c,lineStart:p,start:e,end:f}}function Z(){var e,u;e={type:t.Punctuator,value:"",lineNumber:c,lineStart:p,start:f,end:f};u=a[f];switch(u){case"(":if(v.tokenize){v.openParenToken=v.tokens.length}++f;break;case"{":if(v.tokenize){v.openCurlyToken=v.tokens.length}B.curlyStack.push("{");++f;break;case".":++f;if(a[f]==="."&&a[f+1]==="."){f+=2;u="..."}break;case"}":++f;B.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++f;break;default:u=a.substr(f,4);if(u===">>>="){f+=4}else{u=u.substr(0,3);if(u==="==="||u==="!=="||u===">>>"||u==="<<="||u===">>="){f+=3}else{u=u.substr(0,2);if(u==="&&"||u==="||"||u==="=="||u==="!="||u==="+="||u==="-="||u==="*="||u==="/="||u==="++"||u==="--"||u==="<<"||u===">>"||u==="&="||u==="|="||u==="^="||u==="%="||u==="<="||u===">="||u==="=>"){f+=2}else{u=a[f];if("<>=!+-*%&|^/".indexOf(u)>=0){++f}}}}}if(f===e.start){we()}e.end=f;e.value=u;return e}function Q(e){var u="";while(f<g){if(!k(a[f])){break}u+=a[f++]}if(u.length===0){we()}if(M(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseInt("0x"+u,16),lineNumber:c,lineStart:p,start:e,end:f}}function ee(e){var u,n;n="";while(f<g){u=a[f];if(u!=="0"&&u!=="1"){break}n+=a[f++]}if(n.length===0){we()}if(f<g){u=a.charCodeAt(f);if(M(u)||_(u)){we()}}return{type:t.NumericLiteral,value:parseInt(n,2),lineNumber:c,lineStart:p,start:e,end:f}}function te(e,u){var n,r;if(I(e)){r=true;n="0"+a[f++]}else{r=false;++f;n=""}while(f<g){if(!I(a[f])){break}n+=a[f++]}if(!r&&n.length===0){we()}if(M(a.charCodeAt(f))||_(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseInt(n,8),octal:r,lineNumber:c,lineStart:p,start:u,end:f}}function ue(){var e,t;for(e=f+1;e<g;++e){t=a[e];if(t==="8"||t==="9"){return false}if(!I(t)){return true}}return true}function ne(){var e,u,n;n=a[f];w(_(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point");u=f;e="";if(n!=="."){e=a[f++];n=a[f];if(e==="0"){if(n==="x"||n==="X"){++f;return Q(u)}if(n==="b"||n==="B"){++f;return ee(u)}if(n==="o"||n==="O"){return te(n,u)}if(I(n)){if(ue()){return te(n,u)}}}while(_(a.charCodeAt(f))){e+=a[f++]}n=a[f]}if(n==="."){e+=a[f++];while(_(a.charCodeAt(f))){e+=a[f++]}n=a[f]}if(n==="e"||n==="E"){e+=a[f++];n=a[f];if(n==="+"||n==="-"){e+=a[f++]}if(_(a.charCodeAt(f))){while(_(a.charCodeAt(f))){e+=a[f++]}}else{we()}}if(M(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseFloat(e),lineNumber:c,lineStart:p,start:u,end:f}}function re(){var e="",u,n,r,i,o,s=false;u=a[f];w(u==="'"||u==='"',"String literal must starts with a quote");n=f;++f;while(f<g){r=a[f++];if(r===u){u="";break}else if(r==="\\"){r=a[f++];if(!r||!O(r.charCodeAt(0))){switch(r){case"u":case"x":if(a[f]==="{"){++f;e+=K()}else{i=G(r);if(!i){throw we()}e+=i}break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;case"8":case"9":e+=r;_e();break;default:if(I(r)){o=P(r);s=o.octal||s;e+=String.fromCharCode(o.code)}else{e+=r}break}}else{++c;if(r==="\r"&&a[f]==="\n"){++f}p=f}}else if(O(r.charCodeAt(0))){break}else{e+=r}}if(u!==""){we()}return{type:t.StringLiteral,value:e,octal:s,lineNumber:C,lineStart:E,start:n,end:f}}function ie(){var e="",u,n,r,i,s,l,D,h;i=false;l=false;n=f;s=a[f]==="`";r=2;++f;while(f<g){u=a[f++];if(u==="`"){r=1;l=true;i=true;break}else if(u==="$"){if(a[f]==="{"){B.curlyStack.push("${");++f;i=true;break}e+=u}else if(u==="\\"){u=a[f++];if(!O(u.charCodeAt(0))){switch(u){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":case"x":if(a[f]==="{"){++f;e+=K()}else{D=f;h=G(u);if(h){e+=h}else{f=D;e+=u}}break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;default:if(u==="0"){if(_(a.charCodeAt(f))){be(o.TemplateOctalLiteral)}e+="\x00"}else if(I(u)){be(o.TemplateOctalLiteral)}else{e+=u}break}}else{++c;if(u==="\r"&&a[f]==="\n"){++f}p=f}}else if(O(u.charCodeAt(0))){++c;if(u==="\r"&&a[f]==="\n"){++f}p=f;e+="\n"}else{e+=u}}if(!i){we()}if(!s){B.curlyStack.pop()}return{type:t.Template,value:{cooked:e,raw:a.slice(n+1,f-r)},head:s,tail:l,lineNumber:c,lineStart:p,start:n,end:f}}function oe(e,t){var u="￿",n=e;if(t.indexOf("u")>=0){n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,n){var r=parseInt(t||n,16);if(r>1114111){we(null,o.InvalidRegExp)}if(r<=65535){return String.fromCharCode(r)}return u}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u)}try{RegExp(n)}catch(r){we(null,o.InvalidRegExp)}try{return new RegExp(e,t)}catch(i){return null}}function se(){var e,t,u,n,r;e=a[f];w(e==="/","Regular expression literal must start with a slash");t=a[f++];u=false;n=false;while(f<g){e=a[f++];t+=e;if(e==="\\"){e=a[f++];if(O(e.charCodeAt(0))){we(null,o.UnterminatedRegExp)}t+=e}else if(O(e.charCodeAt(0))){we(null,o.UnterminatedRegExp)}else if(u){if(e==="]"){u=false}}else{if(e==="/"){n=true;break}else if(e==="["){u=true}}}if(!n){we(null,o.UnterminatedRegExp)}r=t.substr(1,t.length-2);return{value:r,literal:t}}function ae(){var e,t,u,n;t="";u="";while(f<g){e=a[f];if(!R(e.charCodeAt(0))){break}++f;if(e==="\\"&&f<g){e=a[f];if(e==="u"){++f;n=f;e=G("u");if(e){u+=e;for(t+="\\u";n<f;++n){t+=a[n]}}else{f=n;u+="u";t+="\\u"}_e()}else{t+="\\";_e()}}else{u+=e;t+=e}}return{value:u,literal:t}}function le(){var e,u,n,r;F=true;y=null;Y();e=f;u=se();n=ae();r=oe(u.value,n.value);F=false;if(v.tokenize){return{type:t.RegularExpression,value:r,regex:{pattern:u.value,flags:n.value},lineNumber:c,lineStart:p,start:e,end:f}}return{literal:u.literal+n.literal,value:r,regex:{pattern:u.value,flags:n.value},start:e,end:f}}function fe(){var e,t,u,n;Y();e=f;t={start:{line:c,column:f-p}};u=le();t.end={line:c,column:f-p};if(!v.tokenize){if(v.tokens.length>0){n=v.tokens[v.tokens.length-1];if(n.range[0]===e&&n.type==="Punctuator"){if(n.value==="/"||n.value==="/="){v.tokens.pop()}}}v.tokens.push({type:"RegularExpression",value:u.literal,regex:u.regex,range:[e,f],loc:t})}return u}function ce(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function pe(){var e,t;e=v.tokens[v.tokens.length-1];if(!e){return fe()}if(e.type==="Punctuator"){if(e.value==="]"){return Z()}if(e.value===")"){t=v.tokens[v.openParenToken-1];if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return fe()}return Z()}if(e.value==="}"){if(v.tokens[v.openCurlyToken-3]&&v.tokens[v.openCurlyToken-3].type==="Keyword"){t=v.tokens[v.openCurlyToken-4];if(!t){return Z()}}else if(v.tokens[v.openCurlyToken-4]&&v.tokens[v.openCurlyToken-4].type==="Keyword"){t=v.tokens[v.openCurlyToken-5];if(!t){return fe()}}else{return Z()}if(n.indexOf(t.value)>=0){return Z()}return fe()}return fe()}if(e.type==="Keyword"&&e.value!=="this"){return fe()}return Z()}function De(){var e,u;if(f>=g){return{type:t.EOF,lineNumber:c,lineStart:p,start:f,end:f}}e=a.charCodeAt(f);if(M(e)){u=X();if(l&&N(u.value)){u.type=t.Keyword}return u}if(e===40||e===41||e===59){return Z()}if(e===39||e===34){return re()}if(e===46){if(_(a.charCodeAt(f+1))){return ne()}return Z()}if(_(e)){return ne()}if(v.tokenize&&e===47){return pe()}if(e===96||e===125&&B.curlyStack[B.curlyStack.length-1]==="${"){return ie()}if(e>=55296&&e<57343){e=$(f);if(M(e)){return X()}}return Z()}function he(){var e,n,r,i;e={start:{line:c,column:f-p}};n=De();e.end={line:c,column:f-p};if(n.type!==t.EOF){r=a.slice(n.start,n.end);i={type:u[n.type],value:r,range:[n.start,n.end],loc:e};if(n.regex){i.regex={pattern:n.regex.pattern,flags:n.regex.flags}}v.tokens.push(i)}return n}function me(){var e;F=true;h=f;m=c;d=p;Y();e=y;A=f;C=c;E=p;y=typeof v.tokens!=="undefined"?he():De();F=false;return e}function de(){F=true;Y();h=f;m=c;d=p;A=f;C=c;E=p;y=typeof v.tokens!=="undefined"?he():De();F=false}function Ae(){this.line=C;this.column=A-E}function Ce(){this.start=new Ae;this.end=null}function Ee(e){this.start={line:e.lineNumber,column:e.start-e.lineStart};this.end=null}function Fe(){if(v.range){this.range=[A,0]}if(v.loc){this.loc=new Ce}}function ge(e){if(v.range){this.range=[e.start,0]}if(v.loc){this.loc=new Ee(e)}}ge.prototype=Fe.prototype={processComment:function(){var e,t,u,n=v.bottomRightStack,i,o,s=n[n.length-1];if(this.type===r.Program){if(this.body.length>0){return}}if(v.trailingComments.length>0){u=[];for(i=v.trailingComments.length-1;i>=0;--i){o=v.trailingComments[i];if(o.range[0]>=this.range[1]){u.unshift(o);v.trailingComments.splice(i,1)}}v.trailingComments=[]}else{if(s&&s.trailingComments&&s.trailingComments[0].range[0]>=this.range[1]){u=s.trailingComments;delete s.trailingComments}}while(s&&s.range[0]>=this.range[0]){e=n.pop();s=n[n.length-1]}if(e){if(e.leadingComments){t=[];for(i=e.leadingComments.length-1;i>=0;--i){o=e.leadingComments[i];if(o.range[1]<=this.range[0]){t.unshift(o);e.leadingComments.splice(i,1)}}if(!e.leadingComments.length){e.leadingComments=undefined}}}else if(v.leadingComments.length>0){t=[];for(i=v.leadingComments.length-1;i>=0;--i){o=v.leadingComments[i];if(o.range[1]<=this.range[0]){t.unshift(o);v.leadingComments.splice(i,1)}}}if(t&&t.length>0){this.leadingComments=t}if(u&&u.length>0){this.trailingComments=u}n.push(this)},finish:function(){if(v.range){this.range[1]=h}if(v.loc){this.loc.end={line:m,column:h-d};if(v.source){this.loc.source=v.source}}if(v.attachComment){this.processComment()}},finishArrayExpression:function(e){this.type=r.ArrayExpression;this.elements=e;this.finish();return this},finishArrayPattern:function(e){this.type=r.ArrayPattern;this.elements=e;this.finish();return this},finishArrowFunctionExpression:function(e,t,u,n){this.type=r.ArrowFunctionExpression;this.id=null;this.params=e;this.defaults=t;this.body=u;this.generator=false;this.expression=n;this.finish();return this},finishAssignmentExpression:function(e,t,u){this.type=r.AssignmentExpression;this.operator=e;this.left=t;this.right=u;this.finish();return this},finishAssignmentPattern:function(e,t){this.type=r.AssignmentPattern;this.left=e;this.right=t;this.finish();return this},finishBinaryExpression:function(e,t,u){this.type=e==="||"||e==="&&"?r.LogicalExpression:r.BinaryExpression;this.operator=e;this.left=t;this.right=u;this.finish();return this},finishBlockStatement:function(e){this.type=r.BlockStatement;this.body=e;this.finish();return this},finishBreakStatement:function(e){this.type=r.BreakStatement;this.label=e;this.finish();return this},finishCallExpression:function(e,t){this.type=r.CallExpression;this.callee=e;this.arguments=t;this.finish();return this},finishCatchClause:function(e,t){this.type=r.CatchClause;this.param=e;this.body=t;this.finish();return this},finishClassBody:function(e){this.type=r.ClassBody;this.body=e;this.finish();return this},finishClassDeclaration:function(e,t,u){this.type=r.ClassDeclaration;this.id=e;this.superClass=t;this.body=u;this.finish();return this},finishClassExpression:function(e,t,u){this.type=r.ClassExpression;this.id=e;this.superClass=t;this.body=u;this.finish();return this},finishConditionalExpression:function(e,t,u){this.type=r.ConditionalExpression;this.test=e;this.consequent=t;this.alternate=u;this.finish();return this},finishContinueStatement:function(e){this.type=r.ContinueStatement;this.label=e;this.finish();return this},finishDebuggerStatement:function(){this.type=r.DebuggerStatement;this.finish();return this},finishDoWhileStatement:function(e,t){this.type=r.DoWhileStatement;this.body=e;this.test=t;this.finish();return this},finishEmptyStatement:function(){this.type=r.EmptyStatement;this.finish();return this},finishExpressionStatement:function(e){this.type=r.ExpressionStatement;this.expression=e;this.finish();return this},finishForStatement:function(e,t,u,n){this.type=r.ForStatement;this.init=e;this.test=t;this.update=u;this.body=n;this.finish();return this},finishForOfStatement:function(e,t,u){this.type=r.ForOfStatement;this.left=e;this.right=t;this.body=u;this.finish();return this},finishForInStatement:function(e,t,u){this.type=r.ForInStatement;this.left=e;this.right=t;this.body=u;this.each=false;this.finish();return this},finishFunctionDeclaration:function(e,t,u,n,i){this.type=r.FunctionDeclaration;this.id=e;this.params=t;this.defaults=u;this.body=n;this.generator=i;this.expression=false;this.finish();return this},finishFunctionExpression:function(e,t,u,n,i){this.type=r.FunctionExpression;this.id=e;this.params=t;this.defaults=u;this.body=n;this.generator=i;this.expression=false;this.finish();return this},finishIdentifier:function(e){this.type=r.Identifier;this.name=e;this.finish();return this},finishIfStatement:function(e,t,u){this.type=r.IfStatement;this.test=e;this.consequent=t;this.alternate=u;this.finish();return this},finishLabeledStatement:function(e,t){this.type=r.LabeledStatement;this.label=e;this.body=t;this.finish();return this},finishLiteral:function(e){this.type=r.Literal;this.value=e.value;this.raw=a.slice(e.start,e.end);if(e.regex){this.regex=e.regex}this.finish();return this},finishMemberExpression:function(e,t,u){this.type=r.MemberExpression;this.computed=e==="[";this.object=t;this.property=u;this.finish();return this},finishMetaProperty:function(e,t){this.type=r.MetaProperty;this.meta=e;this.property=t;this.finish();return this},finishNewExpression:function(e,t){this.type=r.NewExpression;this.callee=e;this.arguments=t;this.finish();return this},finishObjectExpression:function(e){this.type=r.ObjectExpression;this.properties=e;this.finish();return this},finishObjectPattern:function(e){this.type=r.ObjectPattern;this.properties=e;this.finish();return this},finishPostfixExpression:function(e,t){this.type=r.UpdateExpression;this.operator=e;this.argument=t;this.prefix=false;this.finish();return this},finishProgram:function(e,t){this.type=r.Program;this.body=e;this.sourceType=t;this.finish();return this},finishProperty:function(e,t,u,n,i,o){this.type=r.Property;this.key=t;this.computed=u;this.value=n;this.kind=e;this.method=i;this.shorthand=o;this.finish();return this},finishRestElement:function(e){this.type=r.RestElement;this.argument=e;this.finish();return this},finishReturnStatement:function(e){this.type=r.ReturnStatement;this.argument=e;this.finish();return this},finishSequenceExpression:function(e){this.type=r.SequenceExpression;this.expressions=e;this.finish();return this},finishSpreadElement:function(e){this.type=r.SpreadElement;this.argument=e;this.finish();return this},finishSwitchCase:function(e,t){this.type=r.SwitchCase;this.test=e;this.consequent=t;this.finish();return this},finishSuper:function(){this.type=r.Super;this.finish();return this},finishSwitchStatement:function(e,t){this.type=r.SwitchStatement;this.discriminant=e;this.cases=t;this.finish();return this},finishTaggedTemplateExpression:function(e,t){this.type=r.TaggedTemplateExpression;this.tag=e;this.quasi=t;this.finish();return this},finishTemplateElement:function(e,t){this.type=r.TemplateElement;this.value=e;this.tail=t;this.finish();return this},finishTemplateLiteral:function(e,t){this.type=r.TemplateLiteral;this.quasis=e;this.expressions=t;this.finish();return this},finishThisExpression:function(){this.type=r.ThisExpression;this.finish();return this},finishThrowStatement:function(e){this.type=r.ThrowStatement;this.argument=e;this.finish();return this},finishTryStatement:function(e,t,u){this.type=r.TryStatement;this.block=e;this.guardedHandlers=[];this.handlers=t?[t]:[];this.handler=t;this.finalizer=u;this.finish();return this},finishUnaryExpression:function(e,t){this.type=e==="++"||e==="--"?r.UpdateExpression:r.UnaryExpression;this.operator=e;this.argument=t;this.prefix=true;this.finish();return this},finishVariableDeclaration:function(e){this.type=r.VariableDeclaration;this.declarations=e;this.kind="var";this.finish();return this},finishLexicalDeclaration:function(e,t){this.type=r.VariableDeclaration;this.declarations=e;this.kind=t;this.finish();return this},finishVariableDeclarator:function(e,t){this.type=r.VariableDeclarator;this.id=e;this.init=t;this.finish();return this},finishWhileStatement:function(e,t){this.type=r.WhileStatement;this.test=e;this.body=t;this.finish();return this},finishWithStatement:function(e,t){this.type=r.WithStatement;this.object=e;this.body=t;this.finish();return this},finishExportSpecifier:function(e,t){this.type=r.ExportSpecifier;this.exported=t||e;this.local=e;this.finish();return this},finishImportDefaultSpecifier:function(e){this.type=r.ImportDefaultSpecifier;this.local=e;this.finish();return this},finishImportNamespaceSpecifier:function(e){this.type=r.ImportNamespaceSpecifier;this.local=e;this.finish();return this},finishExportNamedDeclaration:function(e,t,u){this.type=r.ExportNamedDeclaration;this.declaration=e;this.specifiers=t;this.source=u;this.finish();return this},finishExportDefaultDeclaration:function(e){this.type=r.ExportDefaultDeclaration;this.declaration=e;this.finish();return this},finishExportAllDeclaration:function(e){this.type=r.ExportAllDeclaration;this.source=e;this.finish();return this},finishImportSpecifier:function(e,t){this.type=r.ImportSpecifier;this.local=e||t;this.imported=t;this.finish();return this},finishImportDeclaration:function(e,t){this.type=r.ImportDeclaration;this.specifiers=e;this.source=t;this.finish();return this},finishYieldExpression:function(e,t){this.type=r.YieldExpression;this.argument=e;this.delegate=t;this.finish();return this}};function ye(e){var t,u;for(t=0;t<v.errors.length;t++){u=v.errors[t];if(u.index===e.index&&u.message===e.message){return}}v.errors.push(e)}function Be(e,t){var u=new Error(e);try{throw u}catch(n){if(Object.create&&Object.defineProperty){u=Object.create(n);Object.defineProperty(u,"column",{value:t})}}finally{return u}}function ve(e,t,u){var n,r,i;n="Line "+e+": "+u;r=t-(F?p:d)+1;i=Be(n,r);i.lineNumber=e;i.description=u;i.index=t;return i}function be(e){var t,u;t=Array.prototype.slice.call(arguments,1);u=e.replace(/%(\d)/g,function(e,u){w(u<t.length,"Message reference must be in range");return t[u]});throw ve(m,h,u)}function Se(e){var t,u,n;t=Array.prototype.slice.call(arguments,1);u=e.replace(/%(\d)/g,function(e,u){w(u<t.length,"Message reference must be in range");return t[u]});n=ve(c,h,u);if(v.errors){ye(n)}else{throw n}}function xe(e,u){var n,r=u||o.UnexpectedToken;if(e){if(!u){r=e.type===t.EOF?o.UnexpectedEOS:e.type===t.Identifier?o.UnexpectedIdentifier:e.type===t.NumericLiteral?o.UnexpectedNumber:e.type===t.StringLiteral?o.UnexpectedString:e.type===t.Template?o.UnexpectedTemplate:o.UnexpectedToken;if(e.type===t.Keyword){if(T(e.value)){r=o.UnexpectedReserved}else if(l&&N(e.value)){r=o.StrictReservedWord}}}n=e.type===t.Template?e.value.raw:e.value}else{n="ILLEGAL"}r=r.replace("%0",n);return e&&typeof e.lineNumber==="number"?ve(e.lineNumber,e.start,r):ve(F?c:m,F?f:h,r)}function we(e,t){throw xe(e,t)}function _e(e,t){var u=xe(e,t);if(v.errors){ye(u)}else{throw u}}function ke(e){var u=me();if(u.type!==t.Punctuator||u.value!==e){we(u)}}function Ie(){var e;if(v.errors){e=y;if(e.type===t.Punctuator&&e.value===","){me()}else if(e.type===t.Punctuator&&e.value===";"){me();_e(e)}else{_e(e,o.UnexpectedToken)}}else{ke(",")}}function Pe(e){var u=me();if(u.type!==t.Keyword||u.value!==e){we(u)}}function Le(e){return y.type===t.Punctuator&&y.value===e}function Oe(e){return y.type===t.Keyword&&y.value===e}function je(e){return y.type===t.Identifier&&y.value===e}function Me(){var e;if(y.type!==t.Punctuator){return false}e=y.value;return e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|="}function Re(){if(a.charCodeAt(A)===59||Le(";")){me();return}if(D){return}h=A;m=C;d=E;if(y.type!==t.EOF&&!Le("}")){we(y)}}function Te(e){var t=b,u=S,n=x,r;b=true;S=true;x=null;r=e();if(x!==null){we(x)}b=t;S=u;x=n;return r}function Ne(e){var t=b,u=S,n=x,r;b=true;S=true;x=null;r=e();b=b&&t;S=S&&u;x=n||x;return r}function qe(e,t){var u=new Fe,n=[],r,i;ke("[");while(!Le("]")){if(Le(",")){me();n.push(null)}else{if(Le("...")){i=new Fe;me();e.push(y);r=St(e,t);n.push(i.finishRestElement(r));break}else{n.push(Ve(e,t))}if(!Le("]")){ke(",")}}}ke("]");return u.finishArrayPattern(n)}function Ue(e,u){var n=new Fe,r,i,o=Le("["),s;if(y.type===t.Identifier){i=y;r=St();if(Le("=")){e.push(i);me();s=gt();return n.finishProperty("init",r,false,new ge(i).finishAssignmentPattern(r,s),false,false)}else if(!Le(":")){e.push(i);return n.finishProperty("init",r,false,r,false,true)}}else{r=$e(e,u)}ke(":");s=Ve(e,u);return n.finishProperty("init",r,o,s,false,false)}function ze(e,t){var u=new Fe,n=[];ke("{");while(!Le("}")){n.push(Ue(e,t));if(!Le("}")){ke(",")}}me();return u.finishObjectPattern(n)}function We(e,t){if(Le("[")){return qe(e,t)}else if(Le("{")){return ze(e,t)}e.push(y);return St(t)}function Ve(e,t){var u=y,n,r,i;n=We(e,t);if(Le("=")){me();r=B.allowYield;B.allowYield=true;i=Te(gt);B.allowYield=r;n=new ge(u).finishAssignmentPattern(n,i)}return n}function Ye(){var e=[],t=new Fe,u;ke("[");while(!Le("]")){if(Le(",")){me();e.push(null)}else if(Le("...")){u=new Fe;me();u.finishSpreadElement(Ne(gt));if(!Le("]")){S=b=false;ke(",")}e.push(u)}else{e.push(Ne(gt));if(!Le("]")){ke(",")}}}me();return t.finishArrayExpression(e)}function Ge(e,t,u){var n,r;S=b=false;n=l;r=Te(Xt);if(l&&t.firstRestricted){_e(t.firstRestricted,t.message)}if(l&&t.stricted){_e(t.stricted,t.message)}l=n;return e.finishFunctionExpression(null,t.params,t.defaults,r,u)}function Ke(){var e,t,u=new Fe,n=B.allowYield;B.allowYield=false;e=eu();B.allowYield=n;B.allowYield=false;t=Ge(u,e,false);B.allowYield=n;return t}function $e(){var e,u=new Fe,n;e=me();switch(e.type){case t.StringLiteral:case t.NumericLiteral:if(l&&e.octal){_e(e,o.StrictOctalLiteral)}return u.finishLiteral(e);case t.Identifier:case t.BooleanLiteral:case t.NullLiteral:case t.Keyword:return u.finishIdentifier(e.value);case t.Punctuator:if(e.value==="["){n=Te(gt);ke("]");return n}break}we(e)}function He(){switch(y.type){case t.Identifier:case t.StringLiteral:case t.BooleanLiteral:case t.NullLiteral:case t.NumericLiteral:case t.Keyword:return true;case t.Punctuator:return y.value==="["}return false}function Je(e,u,n,r){var i,o,s,a,l=B.allowYield;if(e.type===t.Identifier){if(e.value==="get"&&He()){n=Le("[");u=$e();s=new Fe;ke("(");ke(")");B.allowYield=false;i=Ge(s,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null},false);B.allowYield=l;return r.finishProperty("get",u,n,i,false,false)}else if(e.value==="set"&&He()){n=Le("[");u=$e();s=new Fe;ke("(");o={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}};if(Le(")")){_e(y)}else{B.allowYield=false;Qt(o);B.allowYield=l;if(o.defaultCount===0){o.defaults=[]}}ke(")");B.allowYield=false;i=Ge(s,o,false);B.allowYield=l;return r.finishProperty("set",u,n,i,false,false)}}else if(e.type===t.Punctuator&&e.value==="*"&&He()){n=Le("[");u=$e();s=new Fe;B.allowYield=true;a=eu();B.allowYield=l;B.allowYield=false;i=Ge(s,a,true);B.allowYield=l;return r.finishProperty("init",u,n,i,true,false)}if(u&&Le("(")){i=Ke();return r.finishProperty("init",u,n,i,true,false)}return null}function Xe(e){var u=y,n=new Fe,i,s,a,l,f;i=Le("[");if(Le("*")){me()}else{s=$e()}a=Je(u,s,i,n);if(a){return a}if(!s){we(y)}if(!i){l=s.type===r.Identifier&&s.name==="__proto__"||s.type===r.Literal&&s.value==="__proto__";if(e.value&&l){Se(o.DuplicateProtoProperty)}e.value|=l}if(Le(":")){me();f=Ne(gt);return n.finishProperty("init",s,i,f,false,false)}if(u.type===t.Identifier){if(Le("=")){x=y;me();f=Te(gt);return n.finishProperty("init",s,i,new ge(u).finishAssignmentPattern(s,f),false,true)}return n.finishProperty("init",s,i,s,false,true)}we(y)}function Ze(){var e=[],t={value:false},u=new Fe;ke("{");while(!Le("}")){e.push(Xe(t));if(!Le("}")){Ie()}}ke("}");return u.finishObjectExpression(e)}function Qe(e){var t;switch(e.type){case r.Identifier:case r.MemberExpression:case r.RestElement:case r.AssignmentPattern:break;case r.SpreadElement:e.type=r.RestElement;Qe(e.argument);break;case r.ArrayExpression:e.type=r.ArrayPattern;for(t=0;t<e.elements.length;t++){if(e.elements[t]!==null){Qe(e.elements[t])}}break;case r.ObjectExpression:e.type=r.ObjectPattern;for(t=0;t<e.properties.length;t++){Qe(e.properties[t].value)}break;case r.AssignmentExpression:e.type=r.AssignmentPattern;Qe(e.left);break;default:break}}function et(e){var u,n;if(y.type!==t.Template||e.head&&!y.head){we()}u=new Fe;n=me();return u.finishTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail)}function tt(){var e,t,u,n=new Fe;e=et({head:true});t=[e];u=[];while(!e.tail){u.push(yt());e=et({head:false});t.push(e)}return n.finishTemplateLiteral(t,u)}function ut(){var e,t,u,n,o=[];ke("(");if(Le(")")){me();if(!Le("=>")){ke("=>")}return{type:i.ArrowParameterPlaceHolder,params:[],rawParams:[]}}u=y;if(Le("...")){e=Lt(o);ke(")");if(!Le("=>")){ke("=>")}return{type:i.ArrowParameterPlaceHolder,params:[e]}}b=true;e=Ne(gt);if(Le(",")){S=false;t=[e];while(A<g){if(!Le(",")){break}me();if(Le("...")){if(!b){we(y)}t.push(Lt(o));ke(")");if(!Le("=>")){ke("=>")}b=false;for(n=0;n<t.length;n++){Qe(t[n])}return{type:i.ArrowParameterPlaceHolder,params:t}}t.push(Ne(gt))}e=new ge(u).finishSequenceExpression(t)}ke(")");if(Le("=>")){if(e.type===r.Identifier&&e.name==="yield"){return{type:i.ArrowParameterPlaceHolder,params:[e]}}if(!b){we(y)}if(e.type===r.SequenceExpression){for(n=0;n<e.expressions.length;n++){Qe(e.expressions[n])}}else{Qe(e)}e={type:i.ArrowParameterPlaceHolder,params:e.type===r.SequenceExpression?e.expressions:[e]}}b=false;return e}function nt(){var e,u,n,r;if(Le("(")){b=false;return Ne(ut)}if(Le("[")){return Ne(Ye)}if(Le("{")){return Ne(Ze)}e=y.type;r=new Fe;if(e===t.Identifier){if(B.sourceType==="module"&&y.value==="await"){_e(y)}n=r.finishIdentifier(me().value)}else if(e===t.StringLiteral||e===t.NumericLiteral){S=b=false;if(l&&y.octal){_e(y,o.StrictOctalLiteral)}n=r.finishLiteral(me())}else if(e===t.Keyword){if(!l&&B.allowYield&&Oe("yield")){return it()}S=b=false;if(Oe("function")){return uu()}if(Oe("this")){me();return r.finishThisExpression()}if(Oe("class")){return iu()}we(me())}else if(e===t.BooleanLiteral){S=b=false;u=me();u.value=u.value==="true";n=r.finishLiteral(u)}else if(e===t.NullLiteral){S=b=false;u=me();u.value=null;n=r.finishLiteral(u)}else if(Le("/")||Le("/=")){S=b=false;f=A;if(typeof v.tokens!=="undefined"){u=fe()}else{u=le()}me();n=r.finishLiteral(u)}else if(e===t.Template){n=tt()}else{we(me())}return n}function rt(){var e=[],t;ke("(");if(!Le(")")){while(A<g){if(Le("...")){t=new Fe;me();t.finishSpreadElement(Te(gt))}else{t=Te(gt)}e.push(t);if(Le(")")){break}Ie()}}ke(")");return e}function it(){var e,t=new Fe;e=me();if(!ce(e)){we(e)}return t.finishIdentifier(e.value)}function ot(){ke(".");return it()}function st(){var e;ke("[");e=Te(yt);ke("]");return e}function at(){var e,u,n=new Fe;Pe("new");if(Le(".")){me();if(y.type===t.Identifier&&y.value==="target"){if(B.inFunctionBody){me();return n.finishMetaProperty("new","target")}}we(y)}e=Te(ft);u=Le("(")?rt():[];S=b=false;return n.finishNewExpression(e,u)}function lt(){var e,u,n,r,i,o=B.allowIn;i=y;B.allowIn=true;if(Oe("super")&&B.inFunctionBody){u=new Fe;me();u=u.finishSuper();if(!Le("(")&&!Le(".")&&!Le("[")){we(y)}}else{u=Ne(Oe("new")?at:nt)}for(;;){if(Le(".")){b=false;S=true;r=ot();u=new ge(i).finishMemberExpression(".",u,r)}else if(Le("(")){b=false;S=false;n=rt();u=new ge(i).finishCallExpression(u,n);
}else if(Le("[")){b=false;S=true;r=st();u=new ge(i).finishMemberExpression("[",u,r)}else if(y.type===t.Template&&y.head){e=tt();u=new ge(i).finishTaggedTemplateExpression(u,e)}else{break}}B.allowIn=o;return u}function ft(){var e,u,n,r;w(B.allowIn,"callee of new expression always allow in keyword.");r=y;if(Oe("super")&&B.inFunctionBody){u=new Fe;me();u=u.finishSuper();if(!Le("[")&&!Le(".")){we(y)}}else{u=Ne(Oe("new")?at:nt)}for(;;){if(Le("[")){b=false;S=true;n=st();u=new ge(r).finishMemberExpression("[",u,n)}else if(Le(".")){b=false;S=true;n=ot();u=new ge(r).finishMemberExpression(".",u,n)}else if(y.type===t.Template&&y.head){e=tt();u=new ge(r).finishTaggedTemplateExpression(u,e)}else{break}}return u}function ct(){var e,u,n=y;e=Ne(lt);if(!D&&y.type===t.Punctuator){if(Le("++")||Le("--")){if(l&&e.type===r.Identifier&&q(e.name)){Se(o.StrictLHSPostfix)}if(!S){Se(o.InvalidLHSInAssignment)}S=b=false;u=me();e=new ge(n).finishPostfixExpression(u.value,e)}}return e}function pt(){var e,u,n;if(y.type!==t.Punctuator&&y.type!==t.Keyword){u=ct()}else if(Le("++")||Le("--")){n=y;e=me();u=Ne(pt);if(l&&u.type===r.Identifier&&q(u.name)){Se(o.StrictLHSPrefix)}if(!S){Se(o.InvalidLHSInAssignment)}u=new ge(n).finishUnaryExpression(e.value,u);S=b=false}else if(Le("+")||Le("-")||Le("~")||Le("!")){n=y;e=me();u=Ne(pt);u=new ge(n).finishUnaryExpression(e.value,u);S=b=false}else if(Oe("delete")||Oe("void")||Oe("typeof")){n=y;e=me();u=Ne(pt);u=new ge(n).finishUnaryExpression(e.value,u);if(l&&u.operator==="delete"&&u.argument.type===r.Identifier){Se(o.StrictDelete)}S=b=false}else{u=ct()}return u}function Dt(e,u){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword){return 0}switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=u?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11;break;default:break}return n}function ht(){var e,t,u,n,r,i,o,s,a,l;e=y;a=Ne(pt);n=y;r=Dt(n,B.allowIn);if(r===0){return a}S=b=false;n.prec=r;me();t=[e,y];o=Te(pt);i=[a,n,o];while((r=Dt(y,B.allowIn))>0){while(i.length>2&&r<=i[i.length-2].prec){o=i.pop();s=i.pop().value;a=i.pop();t.pop();u=new ge(t[t.length-1]).finishBinaryExpression(s,a,o);i.push(u)}n=me();n.prec=r;i.push(n);t.push(y);u=Te(pt);i.push(u)}l=i.length-1;u=i[l];t.pop();while(l>1){u=new ge(t.pop()).finishBinaryExpression(i[l-1].value,i[l-2],u);l-=2}return u}function mt(){var e,t,u,n,r;r=y;e=Ne(ht);if(Le("?")){me();t=B.allowIn;B.allowIn=true;u=Te(gt);B.allowIn=t;ke(":");n=Te(gt);e=new ge(r).finishConditionalExpression(e,u,n);S=b=false}return e}function dt(){if(Le("{")){return Xt()}return Te(gt)}function At(e,t){var u;switch(t.type){case r.Identifier:Zt(e,t,t.name);break;case r.RestElement:At(e,t.argument);break;case r.AssignmentPattern:At(e,t.left);break;case r.ArrayPattern:for(u=0;u<t.elements.length;u++){if(t.elements[u]!==null){At(e,t.elements[u])}}break;case r.YieldExpression:break;default:w(t.type===r.ObjectPattern,"Invalid type");for(u=0;u<t.properties.length;u++){At(e,t.properties[u].value)}break}}function Ct(e){var t,u,n,s,a,f,c,p;a=[];f=0;s=[e];switch(e.type){case r.Identifier:break;case i.ArrowParameterPlaceHolder:s=e.params;break;default:return null}c={paramSet:{}};for(t=0,u=s.length;t<u;t+=1){n=s[t];switch(n.type){case r.AssignmentPattern:s[t]=n.left;if(n.right.type===r.YieldExpression){if(n.right.argument){we(y)}n.right.type=r.Identifier;n.right.name="yield";delete n.right.argument;delete n.right.delegate}a.push(n.right);++f;At(c,n.left);break;default:At(c,n);s[t]=n;a.push(null);break}}if(l||!B.allowYield){for(t=0,u=s.length;t<u;t+=1){n=s[t];if(n.type===r.YieldExpression){we(y)}}}if(c.message===o.StrictParamDupe){p=l?c.stricted:c.firstRestricted;we(p,c.message)}if(f===0){a=[]}return{params:s,defaults:a,stricted:c.stricted,firstRestricted:c.firstRestricted,message:c.message}}function Et(e,t){var u,n,i;if(D){_e(y)}ke("=>");u=l;n=B.allowYield;B.allowYield=true;i=dt();if(l&&e.firstRestricted){we(e.firstRestricted,e.message)}if(l&&e.stricted){_e(e.stricted,e.message)}l=u;B.allowYield=n;return t.finishArrowFunctionExpression(e.params,e.defaults,i,i.type!==r.BlockStatement)}function Ft(){var e,u,n,r;e=null;u=new Fe;Pe("yield");if(!D){r=B.allowYield;B.allowYield=false;n=Le("*");if(n){me();e=gt()}else{if(!Le(";")&&!Le("}")&&!Le(")")&&y.type!==t.EOF){e=gt()}}B.allowYield=r}return u.finishYieldExpression(e,n)}function gt(){var e,t,u,n,s;s=y;e=y;if(!B.allowYield&&Oe("yield")){return Ft()}t=mt();if(t.type===i.ArrowParameterPlaceHolder||Le("=>")){S=b=false;n=Ct(t);if(n){x=null;return Et(n,new ge(s))}return t}if(Me()){if(!S){Se(o.InvalidLHSInAssignment)}if(l&&t.type===r.Identifier){if(q(t.name)){_e(e,o.StrictLHSAssignment)}if(N(t.name)){_e(e,o.StrictReservedWord)}}if(!Le("=")){S=b=false}else{Qe(t)}e=me();u=Te(gt);t=new ge(s).finishAssignmentExpression(e.value,t,u);x=null}return t}function yt(){var e,t=y,u;e=Te(gt);if(Le(",")){u=[e];while(A<g){if(!Le(",")){break}me();u.push(Te(gt))}e=new ge(t).finishSequenceExpression(u)}return e}function Bt(){if(y.type===t.Keyword){switch(y.value){case"export":if(B.sourceType!=="module"){_e(y,o.IllegalExportDeclaration)}return cu();case"import":if(B.sourceType!=="module"){_e(y,o.IllegalImportDeclaration)}return du();case"const":case"let":return Pt({inFor:false});case"function":return tu(new Fe);case"class":return ru()}}return Jt()}function vt(){var e=[];while(A<g){if(Le("}")){break}e.push(Bt())}return e}function bt(){var e,t=new Fe;ke("{");e=vt();ke("}");return t.finishBlockStatement(e)}function St(e){var u,n=new Fe;u=me();if(u.type===t.Keyword&&u.value==="yield"){if(l){_e(u,o.StrictReservedWord)}if(!B.allowYield){we(u)}}else if(u.type!==t.Identifier){if(l&&u.type===t.Keyword&&N(u.value)){_e(u,o.StrictReservedWord)}else{if(l||u.value!=="let"||e!=="var"){we(u)}}}else if(B.sourceType==="module"&&u.type===t.Identifier&&u.value==="await"){_e(u)}return n.finishIdentifier(u.value)}function xt(e){var t=null,u,n=new Fe,i=[];u=We(i,"var");if(l&&q(u.name)){Se(o.StrictVarName)}if(Le("=")){me();t=Te(gt)}else if(u.type!==r.Identifier&&!e.inFor){ke("=")}return n.finishVariableDeclarator(u,t)}function wt(e){var t=[];do{t.push(xt({inFor:e.inFor}));if(!Le(",")){break}me()}while(A<g);return t}function _t(e){var t;Pe("var");t=wt({inFor:false});Re();return e.finishVariableDeclaration(t)}function kt(e,t){var u=null,n,i=new Fe,s=[];n=We(s,e);if(l&&n.type===r.Identifier&&q(n.name)){Se(o.StrictVarName)}if(e==="const"){if(!Oe("in")&&!je("of")){ke("=");u=Te(gt)}}else if(!t.inFor&&n.type!==r.Identifier||Le("=")){ke("=");u=Te(gt)}return i.finishVariableDeclarator(n,u)}function It(e,t){var u=[];do{u.push(kt(e,t));if(!Le(",")){break}me()}while(A<g);return u}function Pt(e){var t,u,n=new Fe;t=me().value;w(t==="let"||t==="const","Lexical declaration must be either let or const");u=It(t,e);Re();return n.finishLexicalDeclaration(u,t)}function Lt(e){var t,u=new Fe;me();if(Le("{")){be(o.ObjectPatternAsRestParameter)}e.push(y);t=St();if(Le("=")){be(o.DefaultRestParameter)}if(!Le(")")){be(o.ParameterAfterRestParameter)}return u.finishRestElement(t)}function Ot(e){ke(";");return e.finishEmptyStatement()}function jt(e){var t=yt();Re();return e.finishExpressionStatement(t)}function Mt(e){var t,u,n;Pe("if");ke("(");t=yt();ke(")");u=Jt();if(Oe("else")){me();n=Jt()}else{n=null}return e.finishIfStatement(t,u,n)}function Rt(e){var t,u,n;Pe("do");n=B.inIteration;B.inIteration=true;t=Jt();B.inIteration=n;Pe("while");ke("(");u=yt();ke(")");if(Le(";")){me()}return e.finishDoWhileStatement(t,u)}function Tt(e){var t,u,n;Pe("while");ke("(");t=yt();ke(")");n=B.inIteration;B.inIteration=true;u=Jt();B.inIteration=n;return e.finishWhileStatement(t,u)}function Nt(e){var t,u,n,r,i,s,a,l,f,c,p,D,h=B.allowIn;t=i=s=null;u=true;Pe("for");ke("(");if(Le(";")){me()}else{if(Oe("var")){t=new Fe;me();B.allowIn=false;c=wt({inFor:true});B.allowIn=h;if(c.length===1&&Oe("in")){t=t.finishVariableDeclaration(c);me();a=t;l=yt();t=null}else if(c.length===1&&c[0].init===null&&je("of")){t=t.finishVariableDeclaration(c);me();a=t;l=gt();t=null;u=false}else{t=t.finishVariableDeclaration(c);ke(";")}}else if(Oe("const")||Oe("let")){t=new Fe;f=me().value;B.allowIn=false;c=It(f,{inFor:true});B.allowIn=h;if(c.length===1&&c[0].init===null&&Oe("in")){t=t.finishLexicalDeclaration(c,f);me();a=t;l=yt();t=null}else if(c.length===1&&c[0].init===null&&je("of")){t=t.finishLexicalDeclaration(c,f);me();a=t;l=gt();t=null;u=false}else{Re();t=t.finishLexicalDeclaration(c,f)}}else{r=y;B.allowIn=false;t=Ne(gt);B.allowIn=h;if(Oe("in")){if(!S){Se(o.InvalidLHSInForIn)}me();Qe(t);a=t;l=yt();t=null}else if(je("of")){if(!S){Se(o.InvalidLHSInForLoop)}me();Qe(t);a=t;l=gt();t=null;u=false}else{if(Le(",")){n=[t];while(Le(",")){me();n.push(Te(gt))}t=new ge(r).finishSequenceExpression(n)}ke(";")}}}if(typeof a==="undefined"){if(!Le(";")){i=yt()}ke(";");if(!Le(")")){s=yt()}}ke(")");D=B.inIteration;B.inIteration=true;p=Te(Jt);B.inIteration=D;return typeof a==="undefined"?e.finishForStatement(t,i,s,p):u?e.finishForInStatement(a,l,p):e.finishForOfStatement(a,l,p)}function qt(e){var u=null,n;Pe("continue");if(a.charCodeAt(A)===59){me();if(!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(null)}if(D){if(!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(null)}if(y.type===t.Identifier){u=St();n="$"+u.name;if(!Object.prototype.hasOwnProperty.call(B.labelSet,n)){be(o.UnknownLabel,u.name)}}Re();if(u===null&&!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(u)}function Ut(e){var u=null,n;Pe("break");if(a.charCodeAt(h)===59){me();if(!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(null)}if(D){if(!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(null)}if(y.type===t.Identifier){u=St();n="$"+u.name;if(!Object.prototype.hasOwnProperty.call(B.labelSet,n)){be(o.UnknownLabel,u.name)}}Re();if(u===null&&!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(u)}function zt(e){var u=null;Pe("return");if(!B.inFunctionBody){Se(o.IllegalReturn)}if(a.charCodeAt(h)===32){if(M(a.charCodeAt(h+1))){u=yt();Re();return e.finishReturnStatement(u)}}if(D){return e.finishReturnStatement(null)}if(!Le(";")){if(!Le("}")&&y.type!==t.EOF){u=yt()}}Re();return e.finishReturnStatement(u)}function Wt(e){var t,u;if(l){Se(o.StrictModeWith)}Pe("with");ke("(");t=yt();ke(")");u=Jt();return e.finishWithStatement(t,u)}function Vt(){var e,t=[],u,n=new Fe;if(Oe("default")){me();e=null}else{Pe("case");e=yt()}ke(":");while(A<g){if(Le("}")||Oe("default")||Oe("case")){break}u=Bt();t.push(u)}return n.finishSwitchCase(e,t)}function Yt(e){var t,u,n,r,i;Pe("switch");ke("(");t=yt();ke(")");ke("{");u=[];if(Le("}")){me();return e.finishSwitchStatement(t,u)}r=B.inSwitch;B.inSwitch=true;i=false;while(A<g){if(Le("}")){break}n=Vt();if(n.test===null){if(i){be(o.MultipleDefaultsInSwitch)}i=true}u.push(n)}B.inSwitch=r;ke("}");return e.finishSwitchStatement(t,u)}function Gt(e){var t;Pe("throw");if(D){be(o.NewlineAfterThrow)}t=yt();Re();return e.finishThrowStatement(t)}function Kt(){var e,t=[],u={},n,r,i,s=new Fe;Pe("catch");ke("(");if(Le(")")){we(y)}e=We(t);for(r=0;r<t.length;r++){n="$"+t[r].value;if(Object.prototype.hasOwnProperty.call(u,n)){Se(o.DuplicateBinding,t[r].value)}u[n]=true}if(l&&q(e.name)){Se(o.StrictCatchVariable)}ke(")");i=bt();return s.finishCatchClause(e,i)}function $t(e){var t,u=null,n=null;Pe("try");t=bt();if(Oe("catch")){u=Kt()}if(Oe("finally")){me();n=bt()}if(!u&&!n){be(o.NoCatchOrFinally)}return e.finishTryStatement(t,u,n)}function Ht(e){Pe("debugger");Re();return e.finishDebuggerStatement()}function Jt(){var e=y.type,u,n,i,s;if(e===t.EOF){we(y)}if(e===t.Punctuator&&y.value==="{"){return bt()}S=b=true;s=new Fe;if(e===t.Punctuator){switch(y.value){case";":return Ot(s);case"(":return jt(s);default:break}}else if(e===t.Keyword){switch(y.value){case"break":return Ut(s);case"continue":return qt(s);case"debugger":return Ht(s);case"do":return Rt(s);case"for":return Nt(s);case"function":return tu(s);case"if":return Mt(s);case"return":return zt(s);case"switch":return Yt(s);case"throw":return Gt(s);case"try":return $t(s);case"var":return _t(s);case"while":return Tt(s);case"with":return Wt(s);default:break}}u=yt();if(u.type===r.Identifier&&Le(":")){me();i="$"+u.name;if(Object.prototype.hasOwnProperty.call(B.labelSet,i)){be(o.Redeclaration,"Label",u.name)}B.labelSet[i]=true;n=Jt();delete B.labelSet[i];return s.finishLabeledStatement(u,n)}Re();return s.finishExpressionStatement(u)}function Xt(){var e,u=[],n,i,s,f,c,p,D,h,m=new Fe;ke("{");while(A<g){if(y.type!==t.StringLiteral){break}n=y;e=Bt();u.push(e);if(e.expression.type!==r.Literal){break}i=a.slice(n.start+1,n.end-1);if(i==="use strict"){l=true;if(s){_e(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}f=B.labelSet;c=B.inIteration;p=B.inSwitch;D=B.inFunctionBody;h=B.parenthesizedCount;B.labelSet={};B.inIteration=false;B.inSwitch=false;B.inFunctionBody=true;B.parenthesizedCount=0;while(A<g){if(Le("}")){break}u.push(Bt())}ke("}");B.labelSet=f;B.inIteration=c;B.inSwitch=p;B.inFunctionBody=D;B.parenthesizedCount=h;return m.finishBlockStatement(u)}function Zt(e,t,u){var n="$"+u;if(l){if(q(u)){e.stricted=t;e.message=o.StrictParamName}if(Object.prototype.hasOwnProperty.call(e.paramSet,n)){e.stricted=t;e.message=o.StrictParamDupe}}else if(!e.firstRestricted){if(q(u)){e.firstRestricted=t;e.message=o.StrictParamName}else if(N(u)){e.firstRestricted=t;e.message=o.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(e.paramSet,n)){e.stricted=t;e.message=o.StrictParamDupe}}e.paramSet[n]=true}function Qt(e){var t,u,n=[],i,o;t=y;if(t.value==="..."){u=Lt(n);Zt(e,u.argument,u.argument.name);e.params.push(u);e.defaults.push(null);return false}u=Ve(n);for(i=0;i<n.length;i++){Zt(e,n[i],n[i].value)}if(u.type===r.AssignmentPattern){o=u.right;u=u.left;++e.defaultCount}e.params.push(u);e.defaults.push(o);return!Le(")")}function eu(e){var t;t={params:[],defaultCount:0,defaults:[],firstRestricted:e};ke("(");if(!Le(")")){t.paramSet={};while(A<g){if(!Qt(t)){break}ke(",")}}ke(")");if(t.defaultCount===0){t.defaults=[]}return{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function tu(e,t){var u=null,n=[],r=[],i,s,a,f,c,p,D,h,m;m=B.allowYield;Pe("function");h=Le("*");if(h){me()}if(!t||!Le("(")){s=y;u=St();if(l){if(q(s.value)){_e(s,o.StrictFunctionName)}}else{if(q(s.value)){c=s;p=o.StrictFunctionName}else if(N(s.value)){c=s;p=o.StrictReservedWord}}}B.allowYield=!h;f=eu(c);n=f.params;r=f.defaults;a=f.stricted;c=f.firstRestricted;if(f.message){p=f.message}D=l;i=Xt();if(l&&c){we(c,p)}if(l&&a){_e(a,p)}l=D;B.allowYield=m;return e.finishFunctionDeclaration(u,n,r,i,h)}function uu(){var e,t=null,u,n,r,i,s=[],a=[],f,c,p=new Fe,D,h;h=B.allowYield;Pe("function");D=Le("*");if(D){me()}B.allowYield=!D;if(!Le("(")){e=y;t=!l&&!D&&Oe("yield")?it():St();if(l){if(q(e.value)){_e(e,o.StrictFunctionName)}}else{if(q(e.value)){n=e;r=o.StrictFunctionName}else if(N(e.value)){n=e;r=o.StrictReservedWord}}}i=eu(n);s=i.params;a=i.defaults;u=i.stricted;n=i.firstRestricted;if(i.message){r=i.message}c=l;f=Xt();if(l&&n){we(n,r)}if(l&&u){_e(u,r)}l=c;B.allowYield=h;return p.finishFunctionExpression(t,s,a,f,D)}function nu(){var e,t,u,n=false,i,s,a,l;e=new Fe;ke("{");i=[];while(!Le("}")){if(Le(";")){me()}else{s=new Fe;t=y;u=false;a=Le("[");if(Le("*")){me()}else{l=$e();if(l.name==="static"&&(He()||Le("*"))){t=y;u=true;a=Le("[");if(Le("*")){me()}else{l=$e()}}}s=Je(t,l,a,s);if(s){s["static"]=u;if(s.kind==="init"){s.kind="method"}if(!u){if(!s.computed&&(s.key.name||s.key.value.toString())==="constructor"){if(s.kind!=="method"||!s.method||s.value.generator){we(t,o.ConstructorSpecialMethod)}if(n){we(t,o.DuplicateConstructor)}else{n=true}s.kind="constructor"}}else{if(!s.computed&&(s.key.name||s.key.value.toString())==="prototype"){we(t,o.StaticPrototype)}}s.type=r.MethodDefinition;delete s.method;delete s.shorthand;i.push(s)}else{we(y)}}}me();return e.finishClassBody(i)}function ru(e){var u=null,n=null,r=new Fe,i,o=l;l=true;Pe("class");if(!e||y.type===t.Identifier){u=St()}if(Oe("extends")){me();n=Te(lt)}i=nu();l=o;return r.finishClassDeclaration(u,n,i)}function iu(){var e=null,u=null,n=new Fe,r,i=l;l=true;Pe("class");if(y.type===t.Identifier){e=St()}if(Oe("extends")){me();u=Te(lt)}r=nu();l=i;return n.finishClassExpression(e,u,r)}function ou(){var e=new Fe;if(y.type!==t.StringLiteral){be(o.InvalidModuleSpecifier)}return e.finishLiteral(me())}function su(){var e,t,u=new Fe,n;if(Oe("default")){n=new Fe;me();t=n.finishIdentifier("default")}else{t=St()}if(je("as")){me();e=it()}return u.finishExportSpecifier(t,e)}function au(e){var u=null,n,r=null,i=[];if(y.type===t.Keyword){switch(y.value){case"let":case"const":case"var":case"class":case"function":u=Bt();return e.finishExportNamedDeclaration(u,i,null)}}ke("{");while(!Le("}")){n=n||Oe("default");i.push(su());if(!Le("}")){ke(",");if(Le("}")){break}}}ke("}");if(je("from")){me();r=ou();Re()}else if(n){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}else{Re()}return e.finishExportNamedDeclaration(u,i,r)}function lu(e){var t=null,u=null;Pe("default");if(Oe("function")){t=tu(new Fe,true);return e.finishExportDefaultDeclaration(t)}if(Oe("class")){t=ru(true);return e.finishExportDefaultDeclaration(t)}if(je("from")){be(o.UnexpectedToken,y.value)}if(Le("{")){u=Ze()}else if(Le("[")){u=Ye()}else{u=gt()}Re();return e.finishExportDefaultDeclaration(u)}function fu(e){var t;ke("*");if(!je("from")){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}me();t=ou();Re();return e.finishExportAllDeclaration(t)}function cu(){var e=new Fe;if(B.inFunctionBody){be(o.IllegalExportDeclaration)}Pe("export");if(Oe("default")){return lu(e)}if(Le("*")){return fu(e)}return au(e)}function pu(){var e,t,u=new Fe;t=it();if(je("as")){me();e=St()}return u.finishImportSpecifier(e,t)}function Du(){var e=[];ke("{");while(!Le("}")){e.push(pu());if(!Le("}")){ke(",");if(Le("}")){break}}}ke("}");return e}function hu(){var e,t=new Fe;e=it();return t.finishImportDefaultSpecifier(e)}function mu(){var e,t=new Fe;ke("*");if(!je("as")){be(o.NoAsAfterImportNamespace)}me();e=it();return t.finishImportNamespaceSpecifier(e)}function du(){var e=[],u,n=new Fe;if(B.inFunctionBody){be(o.IllegalImportDeclaration)}Pe("import");if(y.type===t.StringLiteral){u=ou()}else{if(Le("{")){e=e.concat(Du())}else if(Le("*")){e.push(mu())}else if(ce(y)&&!Oe("default")){e.push(hu());if(Le(",")){me();if(Le("*")){e.push(mu())}else if(Le("{")){e=e.concat(Du())}else{we(y)}}}else{we(me())}if(!je("from")){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}me();u=ou()}Re();return n.finishImportDeclaration(e,u)}function Au(){var e,u=[],n,i,s;while(A<g){n=y;if(n.type!==t.StringLiteral){break}e=Bt();u.push(e);if(e.expression.type!==r.Literal){break}i=a.slice(n.start+1,n.end-1);if(i==="use strict"){l=true;if(s){_e(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}while(A<g){e=Bt();if(typeof e==="undefined"){break}u.push(e)}return u}function Cu(){var e,t;de();t=new Fe;e=Au();return t.finishProgram(e,B.sourceType)}function Eu(){var e,t,u,n=[];for(e=0;e<v.tokens.length;++e){t=v.tokens[e];u={type:t.type,value:t.value};if(t.regex){u.regex={pattern:t.regex.pattern,flags:t.regex.flags}}if(v.range){u.range=t.range}if(v.loc){u.loc=t.loc}n.push(u)}v.tokens=n}function Fu(e,u){var n,r;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}a=e;f=0;c=a.length>0?1:0;p=0;A=f;C=c;E=p;g=a.length;y=null;B={allowIn:true,allowYield:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[]};v={};u=u||{};u.tokens=true;v.tokens=[];v.tokenize=true;v.openParenToken=-1;v.openCurlyToken=-1;v.range=typeof u.range==="boolean"&&u.range;v.loc=typeof u.loc==="boolean"&&u.loc;if(typeof u.comment==="boolean"&&u.comment){v.comments=[]}if(typeof u.tolerant==="boolean"&&u.tolerant){v.errors=[]}try{de();if(y.type===t.EOF){return v.tokens}me();while(y.type!==t.EOF){try{me()}catch(i){if(v.errors){ye(i);break}else{throw i}}}Eu();r=v.tokens;if(typeof v.comments!=="undefined"){r.comments=v.comments}if(typeof v.errors!=="undefined"){r.errors=v.errors}}catch(o){throw o}finally{v={}}return r}function gu(e,t){var u,n;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}a=e;f=0;c=a.length>0?1:0;p=0;A=f;C=c;E=p;g=a.length;y=null;B={allowIn:true,allowYield:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[],sourceType:"script"};l=false;v={};if(typeof t!=="undefined"){v.range=typeof t.range==="boolean"&&t.range;v.loc=typeof t.loc==="boolean"&&t.loc;v.attachComment=typeof t.attachComment==="boolean"&&t.attachComment;if(v.loc&&t.source!==null&&t.source!==undefined){v.source=n(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){v.tokens=[]}if(typeof t.comment==="boolean"&&t.comment){v.comments=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){v.errors=[]}if(v.attachComment){v.range=true;v.comments=[];v.bottomRightStack=[];v.trailingComments=[];v.leadingComments=[]}if(t.sourceType==="module"){B.sourceType=t.sourceType;l=true}}try{u=Cu();if(typeof v.comments!=="undefined"){u.comments=v.comments}if(typeof v.tokens!=="undefined"){Eu();u.tokens=v.tokens}if(typeof v.errors!=="undefined"){u.errors=v.errors}}catch(r){throw r}finally{v={}}return u}e.version="2.6.0";e.tokenize=Fu;e.parse=gu;e.Syntax=function(){var e,t={};if(typeof Object.create==="function"){t=Object.create(null)}for(e in r){if(r.hasOwnProperty(e)){t[e]=r[e]}}if(typeof Object.freeze==="function"){Object.freeze(t)}return t}()})},{}],49:[function(t,u,n){(function(t,u){"use strict";if(typeof e==="function"&&e.amd){e(["exports"],u)}else if(typeof n!=="undefined"){u(n)}else{u(t.estraverse={})}})(this,function r(e){"use strict";var t,u,n,i,o,s,a,l,f;function c(){}u=Array.isArray;if(!u){u=function S(e){return Object.prototype.toString.call(e)==="[object Array]"}}function p(e){var t={},u,n;for(u in e){if(e.hasOwnProperty(u)){n=e[u];if(typeof n==="object"&&n!==null){t[u]=p(n)}else{t[u]=n}}}return t}function D(e){var t={},u;for(u in e){if(e.hasOwnProperty(u)){t[u]=e[u]}}return t}c(D);function h(e,t){var u,n,r,i;n=e.length;r=0;while(n){u=n>>>1;i=r+u;if(t(e[i])){n=u}else{r=i+1;n-=u+1}}return r}function m(e,t){var u,n,r,i;n=e.length;r=0;while(n){u=n>>>1;i=r+u;if(t(e[i])){r=i+1;n-=u+1}else{n=u}}return r}c(m);o=Object.create||function(){function e(){}return function(t){e.prototype=t;return new e}}();s=Object.keys||function(e){var t=[],u;for(u in e){t.push(u)}return t};function d(e,t){var u=s(t),n,r,i;for(r=0,i=u.length;r<i;r+=1){n=u[r];e[n]=t[n]}return e}t={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};i={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};a={};l={};f={};n={Break:a,Skip:l,Remove:f};function A(e,t){this.parent=e;this.key=t}A.prototype.replace=function x(e){this.parent[this.key]=e};A.prototype.remove=function w(){if(u(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function C(e,t,u,n){this.node=e;this.path=t;this.wrap=u;this.ref=n}function E(){}E.prototype.path=function _(){var e,t,n,r,i,o;function s(e,t){if(u(t)){for(n=0,r=t.length;n<r;++n){e.push(t[n])}}else{e.push(t)}}if(!this.__current.path){return null}i=[];for(e=2,t=this.__leavelist.length;e<t;++e){o=this.__leavelist[e];s(i,o.path)}s(i,this.__current.path);return i};E.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap};E.prototype.parents=function k(){var e,t,u;u=[];for(e=1,t=this.__leavelist.length;e<t;++e){u.push(this.__leavelist[e].node)}return u};E.prototype.current=function I(){return this.__current.node};E.prototype.__execute=function P(e,t){var u,n;n=undefined;u=this.__current;this.__current=t;this.__state=null;if(e){n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=u;return n};E.prototype.notify=function L(e){this.__state=e};E.prototype.skip=function(){this.notify(l)};E.prototype["break"]=function(){this.notify(a)};E.prototype.remove=function(){this.notify(f)};E.prototype.__initialize=function(e,t){this.visitor=t;this.root=e;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=t.fallback==="iteration";this.__keys=i;if(t.keys){this.__keys=d(o(this.__keys),t.keys)}};function F(e){if(e==null){return false}return typeof e==="object"&&typeof e.type==="string"}function g(e,u){return(e===t.ObjectExpression||e===t.ObjectPattern)&&"properties"===u}E.prototype.traverse=function O(e,t){var n,r,i,o,f,c,p,D,h,m,d,A;this.__initialize(e,t);A={};n=this.__worklist;r=this.__leavelist;n.push(new C(e,null,null,null));r.push(new C(null,null,null,null));while(n.length){i=n.pop();if(i===A){i=r.pop();c=this.__execute(t.leave,i);if(this.__state===a||c===a){return}continue}if(i.node){c=this.__execute(t.enter,i);if(this.__state===a||c===a){return}n.push(A);r.push(i);if(this.__state===l||c===l){continue}o=i.node;f=i.wrap||o.type;m=this.__keys[f];if(!m){if(this.__fallback){m=s(o)}else{throw new Error("Unknown node type "+f+".")}}D=m.length;while((D-=1)>=0){p=m[D];d=o[p];if(!d){continue}if(u(d)){h=d.length;while((h-=1)>=0){if(!d[h]){continue}if(g(f,m[D])){i=new C(d[h],[p,h],"Property",null)}else if(F(d[h])){i=new C(d[h],[p,h],null,null)}else{continue}n.push(i)}}else if(F(d)){n.push(new C(d,p,null,null))}}}}};E.prototype.replace=function j(e,t){function n(e){var t,u,n,i;if(e.ref.remove()){u=e.ref.key;i=e.ref.parent;t=r.length;while(t--){n=r[t];if(n.ref&&n.ref.parent===i){if(n.ref.key<u){break}--n.ref.key}}}}var r,i,o,c,p,D,h,m,d,E,y,B,v;this.__initialize(e,t);y={};r=this.__worklist;i=this.__leavelist;B={root:e};D=new C(e,null,null,new A(B,"root"));r.push(D);i.push(D);while(r.length){D=r.pop();if(D===y){D=i.pop();p=this.__execute(t.leave,D);if(p!==undefined&&p!==a&&p!==l&&p!==f){D.ref.replace(p)}if(this.__state===f||p===f){n(D)}if(this.__state===a||p===a){return B.root}continue}p=this.__execute(t.enter,D);if(p!==undefined&&p!==a&&p!==l&&p!==f){D.ref.replace(p);D.node=p}if(this.__state===f||p===f){n(D);D.node=null}if(this.__state===a||p===a){return B.root}o=D.node;if(!o){continue}r.push(y);i.push(D);if(this.__state===l||p===l){continue}c=D.wrap||o.type;d=this.__keys[c];if(!d){if(this.__fallback){d=s(o)}else{throw new Error("Unknown node type "+c+".")}}h=d.length;while((h-=1)>=0){v=d[h];E=o[v];if(!E){continue}if(u(E)){m=E.length;while((m-=1)>=0){if(!E[m]){continue}if(g(c,d[h])){D=new C(E[m],[v,m],"Property",new A(E,m))}else if(F(E[m])){D=new C(E[m],[v,m],null,new A(E,m))}else{continue}r.push(D)}}else if(F(E)){r.push(new C(E,v,null,new A(o,v)))}}}return B.root};function y(e,t){var u=new E;return u.traverse(e,t)}function B(e,t){var u=new E;return u.replace(e,t)}function v(e,t){var u;u=h(t,function n(t){return t.range[0]>e.range[0]});e.extendedRange=[e.range[0],e.range[1]];if(u!==t.length){e.extendedRange[1]=t[u].range[0]}u-=1;if(u>=0){e.extendedRange[0]=t[u].range[1]}return e}function b(e,t,u){var r=[],i,o,s,a;if(!e.range){throw new Error("attachComments needs range information")}if(!u.length){if(t.length){for(s=0,o=t.length;s<o;s+=1){i=p(t[s]);i.extendedRange=[0,e.range[0]];r.push(i)}e.leadingComments=r}return e}for(s=0,o=t.length;s<o;s+=1){r.push(v(p(t[s]),u))}a=0;y(e,{enter:function(e){var t;while(a<r.length){t=r[a];if(t.extendedRange[1]>e.range[0]){break}if(t.extendedRange[1]===e.range[0]){if(!e.leadingComments){e.leadingComments=[]}e.leadingComments.push(t);
r.splice(a,1)}else{a+=1}}if(a===r.length){return n.Break}if(r[a].extendedRange[0]>e.range[1]){return n.Skip}}});a=0;y(e,{leave:function(e){var t;while(a<r.length){t=r[a];if(e.range[1]<t.extendedRange[0]){break}if(e.range[1]===t.extendedRange[0]){if(!e.trailingComments){e.trailingComments=[]}e.trailingComments.push(t);r.splice(a,1)}else{a+=1}}if(a===r.length){return n.Break}if(r[a].extendedRange[0]>e.range[1]){return n.Skip}}});return e}e.version="1.8.1-dev";e.Syntax=t;e.traverse=y;e.replace=B;e.attachComments=b;e.VisitorKeys=i;e.VisitorOption=n;e.Controller=E;e.cloneEnvironment=function(){return r({})};return e})},{}],50:[function(e,t,u){arguments[4][34][0].apply(u,arguments)},{"./source-map/source-map-consumer":56,"./source-map/source-map-generator":57,"./source-map/source-node":58,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map.js":34}],51:[function(e,t,u){arguments[4][35][0].apply(u,arguments)},{"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/array-set.js":35,amdefine:60}],52:[function(e,t,u){arguments[4][36][0].apply(u,arguments)},{"./base64":53,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/base64-vlq.js":36,amdefine:60}],53:[function(e,t,u){arguments[4][37][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/base64.js":37,amdefine:60}],54:[function(e,t,u){arguments[4][39][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/binary-search.js":39,amdefine:60}],55:[function(e,t,u){arguments[4][41][0].apply(u,arguments)},{"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/mapping-list.js":41,amdefine:60}],56:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./array-set").ArraySet;var o=e("./base64-vlq");function s(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sources");var o=n.getArg(t,"names",[]);var s=n.getArg(t,"sourceRoot",null);var a=n.getArg(t,"sourcesContent",null);var l=n.getArg(t,"mappings");var f=n.getArg(t,"file",null);if(u!=this._version){throw new Error("Unsupported version: "+u)}r=r.map(n.normalize);this._names=i.fromArray(o,true);this._sources=i.fromArray(r,true);this.sourceRoot=s;this.sourcesContent=a;this._mappings=l;this.file=f}s.fromSourceMap=function a(e){var t=Object.create(s.prototype);t._names=i.fromArray(e._names.toArray(),true);t._sources=i.fromArray(e._sources.toArray(),true);t.sourceRoot=e._sourceRoot;t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot);t.file=e._file;t.__generatedMappings=e._mappings.toArray().slice();t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions);return t};s.prototype._version=3;Object.defineProperty(s.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot!=null?n.join(this.sourceRoot,e):e},this)}});s.prototype.__generatedMappings=null;Object.defineProperty(s.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});s.prototype.__originalMappings=null;Object.defineProperty(s.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});s.prototype._nextCharIsMappingSeparator=function l(e){var t=e.charAt(0);return t===";"||t===","};s.prototype._parseMappings=function f(e,t){var u=1;var r=0;var i=0;var s=0;var a=0;var l=0;var f=e;var c={};var p;while(f.length>0){if(f.charAt(0)===";"){u++;f=f.slice(1);r=0}else if(f.charAt(0)===","){f=f.slice(1)}else{p={};p.generatedLine=u;o.decode(f,c);p.generatedColumn=r+c.value;r=p.generatedColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.source=this._sources.at(a+c.value);a+=c.value;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source, but no line and column")}o.decode(f,c);p.originalLine=i+c.value;i=p.originalLine;p.originalLine+=1;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source and line, but no column")}o.decode(f,c);p.originalColumn=s+c.value;s=p.originalColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.name=this._names.at(l+c.value);l+=c.value;f=c.rest}}this.__generatedMappings.push(p);if(typeof p.originalLine==="number"){this.__originalMappings.push(p)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};s.prototype._findMapping=function c(e,t,u,n,i){if(e[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+e[u])}if(e[n]<0){throw new TypeError("Column must be greater than or equal to 0, got "+e[n])}return r.search(e,t,i)};s.prototype.computeColumnSpans=function p(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(t.generatedLine===u.generatedLine){t.lastGeneratedColumn=u.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}};s.prototype.originalPositionFor=function D(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===t.generatedLine){var i=n.getArg(r,"source",null);if(i!=null&&this.sourceRoot!=null){i=n.join(this.sourceRoot,i)}return{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}};s.prototype.sourceContentFor=function h(e){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){e=n.relative(this.sourceRoot,e)}if(this._sources.has(e)){return this.sourcesContent[this._sources.indexOf(e)]}var t;if(this.sourceRoot!=null&&(t=n.urlParse(this.sourceRoot))){var u=e.replace(/^file:\/\//,"");if(t.scheme=="file"&&this._sources.has(u)){return this.sourcesContent[this._sources.indexOf(u)]}if((!t.path||t.path=="/")&&this._sources.has("/"+e)){return this.sourcesContent[this._sources.indexOf("/"+e)]}}throw new Error('"'+e+'" is not in the SourceMap.')};s.prototype.generatedPositionFor=function m(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(u>=0){var r=this._originalMappings[u];return{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null),lastColumn:n.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};s.prototype.allGeneratedPositionsFor=function d(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=[];var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];while(i&&i.originalLine===t.originalLine){u.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)});i=this._originalMappings[--r]}}return u.reverse()};s.GENERATED_ORDER=1;s.ORIGINAL_ORDER=2;s.prototype.eachMapping=function A(e,t,u){var r=t||null;var i=u||s.GENERATED_ORDER;var o;switch(i){case s.GENERATED_ORDER:o=this._generatedMappings;break;case s.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(e){var t=e.source;if(t!=null&&a!=null){t=n.join(a,t)}return{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,r)};t.SourceMapConsumer=s})},{"./array-set":51,"./base64-vlq":52,"./binary-search":54,"./util":59,amdefine:60}],57:[function(e,t,u){arguments[4][43][0].apply(u,arguments)},{"./array-set":51,"./base64-vlq":52,"./mapping-list":55,"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/source-map-generator.js":43,amdefine:60}],58:[function(e,t,u){arguments[4][44][0].apply(u,arguments)},{"./source-map-generator":57,"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/source-node.js":44,amdefine:60}],59:[function(e,t,u){arguments[4][45][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/util.js":45,amdefine:60}],60:[function(e,t,u){(function(u,n){"use strict";function r(t,r){"use strict";var i={},o={},s=false,a=e("path"),l,f;function c(e){var t,u;for(t=0;e[t];t+=1){u=e[t];if(u==="."){e.splice(t,1);t-=1}else if(u===".."){if(t===1&&(e[2]===".."||e[0]==="..")){break}else if(t>0){e.splice(t-1,2);t-=2}}}}function p(e,t){var u;if(e&&e.charAt(0)==="."){if(t){u=t.split("/");u=u.slice(0,u.length-1);u=u.concat(e.split("/"));c(u);e=u.join("/")}}return e}function D(e){return function(t){return p(t,e)}}function h(e){function t(t){o[e]=t}t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")};return t}l=function(e,t,n,r){function i(i,o){if(typeof i==="string"){return f(e,t,n,i,r)}else{i=i.map(function(u){return f(e,t,n,u,r)});if(o){u.nextTick(function(){o.apply(null,i)})}}}i.toUrl=function(e){if(e.indexOf(".")===0){return p(e,a.dirname(n.filename))}else{return e}};return i};r=r||function A(){return t.require.apply(t,arguments)};function m(e,u,i){var a,f,c,p;if(e){f=o[e]={};c={id:e,uri:n,exports:f};a=l(r,f,c,e)}else{if(s){throw new Error("amdefine with no module ID cannot be called more than once per file.")}s=true;f=t.exports;c=t;a=l(r,f,c,t.id)}if(u){u=u.map(function(e){return a(e)})}if(typeof i==="function"){p=i.apply(c.exports,u)}else{p=i}if(p!==undefined){c.exports=p;if(e){o[e]=c.exports}}}f=function(e,t,u,n,r){var s=n.indexOf("!"),a=n,c,d;if(s===-1){n=p(n,r);if(n==="require"){return l(e,t,u,r)}else if(n==="exports"){return t}else if(n==="module"){return u}else if(o.hasOwnProperty(n)){return o[n]}else if(i[n]){m.apply(null,i[n]);return o[n]}else{if(e){return e(a)}else{throw new Error("No module with ID: "+n)}}}else{c=n.substring(0,s);n=n.substring(s+1,n.length);d=f(e,t,u,c,r);if(d.normalize){n=d.normalize(n,D(r))}else{n=p(n,r)}if(o[n]){return o[n]}else{d.load(n,l(e,t,u,r),h(n),{});return o[n]}}};function d(e,t,u){if(Array.isArray(e)){u=t;t=e;e=undefined}else if(typeof e!=="string"){u=e;e=t=undefined}if(t&&!Array.isArray(t)){u=t;t=undefined}if(!t){t=["require","exports","module"]}if(e){i[e]=[e,t,u]}else{m(e,t,u)}}d.require=function(e){if(o[e]){return o[e]}if(i[e]){m.apply(null,i[e]);return o[e]}};d.amd={};return d}t.exports=r}).call(this,e("_process"),"/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:26,path:25}],61:[function(e,t,u){t.exports={name:"js2coffee",version:"2.2.0",description:"JavaScript to CoffeeScript compiler",homepage:"http://js2.coffee",main:"dist/js2coffee.js",keywords:["javascript","coffeescript","language","compiler"],scripts:{test:"mocha",autotest:"mocha -R min -b --watch",prepublish:"mocha >/dev/null && make -B dist"},author:"Rico Sta. Cruz <hi@ricostacruz.com>",license:"MIT",bugs:{url:"https://github.com/js2coffee/js2coffee/issues"},repository:{type:"git",url:"https://github.com/js2coffee/js2coffee.git"},browser:"js2coffee.coffee",bin:{js2coffee:"./bin/js2coffee"},dependencies:{escodegen:"^1.6.0",esprima:"^2.5.0",estraverse:"^4.1.1",minimist:"^1.1.0","read-input":"^0.3.1","source-map":"^0.5.2"},devDependencies:{browserify:"13.0.0",chai:"^3.4.0","coffee-script":"^1.8.0",coffeeify:"^2.0.1",coffeelint:"^1.6.0",glob:"^7.0.0","js-yaml":"^3.2.1",mocha:"^2.1.0","mocha-clean":"^1.0.0","uglify-js":"^2.4.16",underscore:"^1.7.0"}}},{}]},{},[1])(1)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],37:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))

},{"_process":38}],38:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],39:[function(require,module,exports){
module.exports = require('./lib/spine');
},{"./lib/spine":43}],40:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var Spine;

  Spine = this.Spine || require('spine');

  Spine.Model.Local = {
    extended: function() {
      var e, error, testLocalStorage;
      testLocalStorage = 'spine' + new Date().getTime();
      try {
        localStorage.setItem(testLocalStorage, testLocalStorage);
        localStorage.removeItem(testLocalStorage);
      } catch (error) {
        e = error;
        return;
      }
      this.change(this.saveLocal);
      return this.fetch(this.loadLocal);
    },
    saveLocal: function() {
      var result;
      result = JSON.stringify(this);
      return localStorage[this.className] = result;
    },
    loadLocal: function(options) {
      var result;
      if (options == null) {
        options = {};
      }
      if (!options.hasOwnProperty('clear')) {
        options.clear = true;
      }
      result = localStorage[this.className];
      return this.refresh(result || [], options);
    }
  };

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine.Model.Local;
  }

}).call(this);



},{"spine":39}],41:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var $, Spine,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Spine = this.Spine || require('spine');

  $ = Spine.$;

  Spine.Manager = (function(superClass) {
    extend(Manager, superClass);

    Manager.include(Spine.Events);

    function Manager() {
      this.controllers = [];
      this.bind('change', this.change);
      this.add.apply(this, arguments);
    }

    Manager.prototype.add = function() {
      var cont, controllers, i, len, results;
      controllers = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      results = [];
      for (i = 0, len = controllers.length; i < len; i++) {
        cont = controllers[i];
        results.push(this.addOne(cont));
      }
      return results;
    };

    Manager.prototype.addOne = function(controller) {
      controller.bind('active', (function(_this) {
        return function() {
          var args;
          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
          return _this.trigger.apply(_this, ['change', controller].concat(slice.call(args)));
        };
      })(this));
      controller.bind('release', (function(_this) {
        return function() {
          var c;
          return _this.controllers = (function() {
            var i, len, ref, results;
            ref = this.controllers;
            results = [];
            for (i = 0, len = ref.length; i < len; i++) {
              c = ref[i];
              if (c !== controller) {
                results.push(c);
              }
            }
            return results;
          }).call(_this);
        };
      })(this));
      return this.controllers.push(controller);
    };

    Manager.prototype.deactivate = function() {
      return this.trigger.apply(this, ['change', false].concat(slice.call(arguments)));
    };

    Manager.prototype.change = function() {
      var args, cont, current, i, len, ref;
      current = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      ref = this.controllers;
      for (i = 0, len = ref.length; i < len; i++) {
        cont = ref[i];
        if (cont !== current) {
          cont.deactivate.apply(cont, args);
        }
      }
      if (current) {
        return current.activate.apply(current, args);
      }
    };

    return Manager;

  })(Spine.Module);

  Spine.Controller.include({
    active: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (typeof args[0] === 'function') {
        this.bind('active', args[0]);
      } else {
        args.unshift('active');
        this.trigger.apply(this, args);
      }
      return this;
    },
    isActive: function() {
      return this.el.hasClass('active');
    },
    activate: function() {
      this.el.addClass('active');
      return this;
    },
    deactivate: function() {
      this.el.removeClass('active');
      return this;
    }
  });

  Spine.Stack = (function(superClass) {
    extend(Stack, superClass);

    Stack.prototype.controllers = {};

    Stack.prototype.routes = {};

    Stack.prototype.className = 'spine stack';

    function Stack() {
      this.release = bind(this.release, this);
      var fn, key, ref, ref1, ref2, value;
      Stack.__super__.constructor.apply(this, arguments);
      this.manager = new Spine.Manager;
      this.router = (ref = Spine.Route) != null ? ref.create() : void 0;
      ref1 = this.controllers;
      for (key in ref1) {
        value = ref1[key];
        if (this[key] != null) {
          throw Error("'@" + key + "' already assigned");
        }
        this[key] = new value({
          stack: this
        });
        this.add(this[key]);
      }
      ref2 = this.routes;
      fn = (function(_this) {
        return function(key, value) {
          var callback;
          if (typeof value === 'function') {
            callback = value;
          }
          callback || (callback = function() {
            var ref3;
            return (ref3 = _this[value]).active.apply(ref3, arguments);
          });
          return _this.route(key, callback);
        };
      })(this);
      for (key in ref2) {
        value = ref2[key];
        fn(key, value);
      }
      if (this["default"]) {
        this[this["default"]].active();
      }
    }

    Stack.prototype.add = function(controller) {
      this.manager.add(controller);
      return this.append(controller);
    };

    Stack.prototype.release = function() {
      var ref;
      if ((ref = this.router) != null) {
        ref.destroy();
      }
      return Stack.__super__.release.apply(this, arguments);
    };

    return Stack;

  })(Spine.Controller);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine.Manager;
  }

  if (typeof module !== "undefined" && module !== null) {
    module.exports.Stack = Spine.Stack;
  }

}).call(this);



},{"spine":39}],42:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var $, Path, Route, Spine, escapeRegExp, hashStrip, namedParam, splatParam,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  Spine = this.Spine || require('spine');

  $ = Spine.$;

  hashStrip = /^#*/;

  namedParam = /:([\w\d]+)/g;

  splatParam = /\*([\w\d]+)/g;

  escapeRegExp = /[-[\]{}()+?.,\\^$|#\s]/g;

  Path = (function(superClass) {
    extend(Path, superClass);

    function Path(path, callback) {
      var match;
      this.names = [];
      this.path = path;
      this.callback = callback;
      if (typeof path === 'string') {
        namedParam.lastIndex = 0;
        while ((match = namedParam.exec(path)) !== null) {
          this.names.push(match[1]);
        }
        splatParam.lastIndex = 0;
        while ((match = splatParam.exec(path)) !== null) {
          this.names.push(match[1]);
        }
        path = path.replace(escapeRegExp, '\\$&').replace(namedParam, '([^\/]*)').replace(splatParam, '(.*?)');
        this.route = new RegExp("^" + path + "$");
      } else {
        this.route = path;
      }
    }

    Path.prototype.match = function(path, options) {
      var i, j, len, match, param, params;
      if (options == null) {
        options = {};
      }
      if (!(match = this.route.exec(path))) {
        return false;
      }
      options.match = match;
      params = match.slice(1);
      if (this.names.length) {
        for (i = j = 0, len = params.length; j < len; i = ++j) {
          param = params[i];
          options[this.names[i]] = param;
        }
      }
      Route.trigger('before', this);
      return this.callback.call(null, options) !== false;
    };

    return Path;

  })(Spine.Module);

  Route = (function(superClass) {
    var ref;

    extend(Route, superClass);

    Route.extend(Spine.Events);

    Route.historySupport = ((ref = window.history) != null ? ref.pushState : void 0) != null;

    Route.options = {
      trigger: true,
      history: false,
      shim: false,
      replace: false,
      redirect: false
    };

    Route.routers = [];

    Route.setup = function(options) {
      if (options == null) {
        options = {};
      }
      this.options = $.extend({}, this.options, options);
      if (this.options.history) {
        this.history = this.historySupport && this.options.history;
      }
      if (this.options.shim) {
        return;
      }
      if (this.history) {
        $(window).bind('popstate', this.change);
      } else {
        $(window).bind('hashchange', this.change);
      }
      return this.change();
    };

    Route.unbind = function() {
      var unbindResult;
      unbindResult = Spine.Events.unbind.apply(this, arguments);
      if (arguments.length > 0) {
        return unbindResult;
      }
      if (this.options.shim) {
        return;
      }
      if (this.history) {
        return $(window).unbind('popstate', this.change);
      } else {
        return $(window).unbind('hashchange', this.change);
      }
    };

    Route.navigate = function() {
      var args, lastArg, options, path, routes;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      options = {};
      lastArg = args[args.length - 1];
      if (typeof lastArg === 'object') {
        options = args.pop();
      } else if (typeof lastArg === 'boolean') {
        options.trigger = args.pop();
      }
      options = $.extend({}, this.options, options);
      path = args.join('/');
      if (this.path === path) {
        return;
      }
      this.path = path;
      if (options.trigger) {
        this.trigger('navigate', this.path);
        routes = this.matchRoutes(this.path, options);
        if (!routes.length) {
          if (typeof options.redirect === 'function') {
            return options.redirect.apply(this, [this.path, options]);
          } else {
            if (options.redirect === true) {
              this.redirect(this.path);
            }
          }
        }
      }
      if (options.shim) {
        return true;
      } else if (this.history && options.replace) {
        return history.replaceState({}, document.title, this.path);
      } else if (this.history) {
        return history.pushState({}, document.title, this.path);
      } else {
        return window.location.hash = this.path;
      }
    };

    Route.create = function() {
      var router;
      router = new this;
      this.routers.push(router);
      return router;
    };

    Route.add = function(path, callback) {
      return this.router.add(path, callback);
    };

    Route.prototype.add = function(path, callback) {
      var key, results, value;
      if (typeof path === 'object' && !(path instanceof RegExp)) {
        results = [];
        for (key in path) {
          value = path[key];
          results.push(this.add(key, value));
        }
        return results;
      } else {
        return this.routes.push(new Path(path, callback));
      }
    };

    Route.prototype.destroy = function() {
      var r;
      this.routes.length = 0;
      return this.constructor.routers = (function() {
        var j, len, ref1, results;
        ref1 = this.constructor.routers;
        results = [];
        for (j = 0, len = ref1.length; j < len; j++) {
          r = ref1[j];
          if (r !== this) {
            results.push(r);
          }
        }
        return results;
      }).call(this);
    };

    Route.getPath = function() {
      var path;
      if (this.history) {
        path = window.location.pathname;
        if (path.substr(0, 1) !== '/') {
          path = '/' + path;
        }
      } else {
        path = window.location.hash;
        path = path.replace(hashStrip, '');
      }
      return path;
    };

    Route.getHost = function() {
      return window.location.protocol + "//" + window.location.host;
    };

    Route.change = function() {
      var path;
      path = Route.getPath();
      if (path === Route.path) {
        return;
      }
      Route.path = path;
      return Route.matchRoutes(Route.path);
    };

    Route.matchRoutes = function(path, options) {
      var j, len, match, matches, ref1, router;
      matches = [];
      ref1 = this.routers.concat([this.router]);
      for (j = 0, len = ref1.length; j < len; j++) {
        router = ref1[j];
        match = router.matchRoute(path, options);
        if (match) {
          matches.push(match);
        }
      }
      if (matches.length) {
        this.trigger('change', matches, path);
      }
      return matches;
    };

    Route.redirect = function(path) {
      return window.location = path;
    };

    function Route() {
      this.routes = [];
    }

    Route.prototype.matchRoute = function(path, options) {
      var j, len, ref1, route;
      ref1 = this.routes;
      for (j = 0, len = ref1.length; j < len; j++) {
        route = ref1[j];
        if (route.match(path, options)) {
          return route;
        }
      }
    };

    Route.prototype.trigger = function() {
      var args, ref1;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      args.splice(1, 0, this);
      return (ref1 = this.constructor).trigger.apply(ref1, args);
    };

    return Route;

  })(Spine.Module);

  Route.router = new Route;

  Spine.Controller.include({
    route: function(path, callback) {
      if (this.router instanceof Spine.Route) {
        return this.router.add(path, this.proxy(callback));
      } else {
        return Spine.Route.add(path, this.proxy(callback));
      }
    },
    routes: function(routes) {
      var key, results, value;
      results = [];
      for (key in routes) {
        value = routes[key];
        results.push(this.route(key, value));
      }
      return results;
    },
    navigate: function() {
      return Spine.Route.navigate.apply(Spine.Route, arguments);
    }
  });

  Route.Path = Path;

  Spine.Route = Route;

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Route;
  }

}).call(this);



},{"spine":39}],43:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0

/*
Spine.js MVC library
Released under the MIT License
 */

(function() {
  var $, Controller, Events, Log, Model, Module, Spine, createObject, makeArray, moduleKeywords,
    slice = [].slice,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Events = {
    bind: function(ev, callback) {
      var base, evs, j, len, name;
      evs = ev.split(' ');
      if (!this.hasOwnProperty('_callbacks')) {
        this._callbacks || (this._callbacks = {});
      }
      for (j = 0, len = evs.length; j < len; j++) {
        name = evs[j];
        (base = this._callbacks)[name] || (base[name] = []);
        this._callbacks[name].push(callback);
      }
      return this;
    },
    one: function(ev, callback) {
      var handler;
      return this.bind(ev, handler = function() {
        this.unbind(ev, handler);
        return callback.apply(this, arguments);
      });
    },
    trigger: function() {
      var args, callback, ev, j, len, list, ref;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      ev = args.shift();
      list = (ref = this._callbacks) != null ? ref[ev] : void 0;
      if (!list) {
        return;
      }
      for (j = 0, len = list.length; j < len; j++) {
        callback = list[j];
        if (callback.apply(this, args) === false) {
          break;
        }
      }
      return true;
    },
    listenTo: function(obj, ev, callback) {
      obj.bind(ev, callback);
      this.listeningTo || (this.listeningTo = []);
      this.listeningTo.push({
        obj: obj,
        ev: ev,
        callback: callback
      });
      return this;
    },
    listenToOnce: function(obj, ev, callback) {
      var handler, listeningToOnce;
      listeningToOnce = this.listeningToOnce || (this.listeningToOnce = []);
      obj.bind(ev, handler = function() {
        var i, idx, j, len, lt;
        idx = -1;
        for (i = j = 0, len = listeningToOnce.length; j < len; i = ++j) {
          lt = listeningToOnce[i];
          if (lt.obj === obj) {
            if (lt.ev === ev && lt.callback === handler) {
              idx = i;
            }
          }
        }
        obj.unbind(ev, handler);
        if (idx !== -1) {
          listeningToOnce.splice(idx, 1);
        }
        return callback.apply(this, arguments);
      });
      listeningToOnce.push({
        obj: obj,
        ev: ev,
        callback: handler
      });
      return this;
    },
    stopListening: function(obj, events, callback) {
      var e, ev, evts, idx, j, k, l, len, len1, len2, len3, listeningTo, lt, m, n, ref, ref1, ref2;
      if (arguments.length === 0) {
        ref = [this.listeningTo, this.listeningToOnce];
        for (j = 0, len = ref.length; j < len; j++) {
          listeningTo = ref[j];
          if (!(listeningTo != null ? listeningTo.length : void 0)) {
            continue;
          }
          for (k = 0, len1 = listeningTo.length; k < len1; k++) {
            lt = listeningTo[k];
            lt.obj.unbind(lt.ev, lt.callback);
          }
        }
        this.listeningTo = void 0;
        this.listeningToOnce = void 0;
      } else if (obj) {
        events = events ? events.split(' ') : [void 0];
        ref1 = [this.listeningTo, this.listeningToOnce];
        for (l = 0, len2 = ref1.length; l < len2; l++) {
          listeningTo = ref1[l];
          if (!listeningTo) {
            continue;
          }
          for (m = 0, len3 = events.length; m < len3; m++) {
            ev = events[m];
            for (idx = n = ref2 = listeningTo.length - 1; ref2 <= 0 ? n <= 0 : n >= 0; idx = ref2 <= 0 ? ++n : --n) {
              lt = listeningTo[idx];
              if (lt.obj !== obj) {
                continue;
              }
              if (callback && lt.callback !== callback) {
                continue;
              }
              if ((!ev) || (ev === lt.ev)) {
                lt.obj.unbind(lt.ev, lt.callback);
                if (idx !== -1) {
                  listeningTo.splice(idx, 1);
                }
              } else if (ev) {
                evts = lt.ev.split(' ');
                if (indexOf.call(evts, ev) >= 0) {
                  evts = (function() {
                    var len4, p, results;
                    results = [];
                    for (p = 0, len4 = evts.length; p < len4; p++) {
                      e = evts[p];
                      if (e !== ev) {
                        results.push(e);
                      }
                    }
                    return results;
                  })();
                  lt.ev = $.trim(evts.join(' '));
                  lt.obj.unbind(ev, lt.callback);
                }
              }
            }
          }
        }
      }
      return this;
    },
    unbind: function(ev, callback) {
      var cb, evs, i, j, k, len, len1, list, name, ref;
      if (arguments.length === 0) {
        this._callbacks = {};
        return this;
      }
      if (!ev) {
        return this;
      }
      evs = ev.split(' ');
      for (j = 0, len = evs.length; j < len; j++) {
        name = evs[j];
        list = (ref = this._callbacks) != null ? ref[name] : void 0;
        if (!list) {
          continue;
        }
        if (!callback) {
          delete this._callbacks[name];
          continue;
        }
        for (i = k = 0, len1 = list.length; k < len1; i = ++k) {
          cb = list[i];
          if (!(cb === callback)) {
            continue;
          }
          list = list.slice();
          list.splice(i, 1);
          this._callbacks[name] = list;
          break;
        }
      }
      return this;
    }
  };

  Events.on = Events.bind;

  Events.off = Events.unbind;

  Log = {
    trace: true,
    logPrefix: '(App)',
    log: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (!this.trace) {
        return;
      }
      if (this.logPrefix) {
        args.unshift(this.logPrefix);
      }
      if (typeof console !== "undefined" && console !== null) {
        if (typeof console.log === "function") {
          console.log.apply(console, args);
        }
      }
      return this;
    }
  };

  moduleKeywords = ['included', 'extended'];

  Module = (function() {
    Module.include = function(obj) {
      var key, ref, value;
      if (!obj) {
        throw new Error('include(obj) requires obj');
      }
      for (key in obj) {
        value = obj[key];
        if (indexOf.call(moduleKeywords, key) < 0) {
          this.prototype[key] = value;
        }
      }
      if ((ref = obj.included) != null) {
        ref.apply(this);
      }
      return this;
    };

    Module.extend = function(obj) {
      var key, ref, value;
      if (!obj) {
        throw new Error('extend(obj) requires obj');
      }
      for (key in obj) {
        value = obj[key];
        if (indexOf.call(moduleKeywords, key) < 0) {
          this[key] = value;
        }
      }
      if ((ref = obj.extended) != null) {
        ref.apply(this);
      }
      return this;
    };

    Module.proxy = function(func) {
      return (function(_this) {
        return function() {
          return func.apply(_this, arguments);
        };
      })(this);
    };

    Module.prototype.proxy = function(func) {
      return (function(_this) {
        return function() {
          return func.apply(_this, arguments);
        };
      })(this);
    };

    function Module() {
      if (typeof this.init === "function") {
        this.init.apply(this, arguments);
      }
    }

    return Module;

  })();

  Model = (function(superClass) {
    extend(Model, superClass);

    Model.extend(Events);

    Model.include(Events);

    Model.records = [];

    Model.irecords = {};

    Model.attributes = [];

    Model.configure = function() {
      var attributes, name;
      name = arguments[0], attributes = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      this.className = name;
      this.deleteAll();
      if (attributes.length) {
        this.attributes = attributes;
      }
      this.attributes && (this.attributes = makeArray(this.attributes));
      this.attributes || (this.attributes = []);
      this.unbind();
      return this;
    };

    Model.toString = function() {
      return this.className + "(" + (this.attributes.join(", ")) + ")";
    };

    Model.find = function(id, notFound) {
      var ref;
      if (notFound == null) {
        notFound = this.notFound;
      }
      return ((ref = this.irecords[id]) != null ? ref.clone() : void 0) || (typeof notFound === "function" ? notFound(id) : void 0);
    };

    Model.findAll = function(ids, notFound) {
      var id, j, len, results;
      results = [];
      for (j = 0, len = ids.length; j < len; j++) {
        id = ids[j];
        if (this.find(id, notFound)) {
          results.push(this.find(id));
        }
      }
      return results;
    };

    Model.notFound = function(id) {
      return null;
    };

    Model.exists = function(id) {
      return Boolean(this.irecords[id]);
    };

    Model.addRecord = function(record, idx) {
      var root;
      if (root = this.irecords[record.id || record.cid]) {
        root.refresh(record);
      } else {
        record.id || (record.id = record.cid);
        this.irecords[record.id] = this.irecords[record.cid] = record;
        if (idx !== void 0) {
          this.records.splice(idx, 0, record);
        } else {
          this.records.push(record);
        }
      }
      return record;
    };

    Model.refresh = function(values, options) {
      var j, len, record, records, result;
      if (options == null) {
        options = {};
      }
      if (options.clear) {
        this.deleteAll();
      }
      records = this.fromJSON(values);
      if (!Array.isArray(records)) {
        records = [records];
      }
      for (j = 0, len = records.length; j < len; j++) {
        record = records[j];
        this.addRecord(record);
      }
      this.sort();
      result = this.cloneArray(records);
      this.trigger('refresh', result, options);
      return result;
    };

    Model.select = function(callback) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        if (callback(record)) {
          results.push(record.clone());
        }
      }
      return results;
    };

    Model.findByAttribute = function(name, value) {
      var j, len, record, ref;
      ref = this.records;
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        if (record[name] === value) {
          return record.clone();
        }
      }
      return null;
    };

    Model.findAllByAttribute = function(name, value) {
      return this.select(function(item) {
        return item[name] === value;
      });
    };

    Model.each = function(callback) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        results.push(callback(record.clone()));
      }
      return results;
    };

    Model.all = function() {
      return this.cloneArray(this.records);
    };

    Model.slice = function(begin, end) {
      if (begin == null) {
        begin = 0;
      }
      return this.cloneArray(this.records.slice(begin, end));
    };

    Model.first = function(end) {
      var ref;
      if (end == null) {
        end = 1;
      }
      if (end > 1) {
        return this.cloneArray(this.records.slice(0, end));
      } else {
        return (ref = this.records[0]) != null ? ref.clone() : void 0;
      }
    };

    Model.last = function(begin) {
      var ref;
      if (typeof begin === 'number') {
        return this.cloneArray(this.records.slice(-begin));
      } else {
        return (ref = this.records[this.records.length - 1]) != null ? ref.clone() : void 0;
      }
    };

    Model.count = function() {
      return this.records.length;
    };

    Model.deleteAll = function() {
      this.records = [];
      return this.irecords = {};
    };

    Model.destroyAll = function(options) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        results.push(record.destroy(options));
      }
      return results;
    };

    Model.update = function(id, atts, options) {
      return this.find(id).updateAttributes(atts, options);
    };

    Model.create = function(atts, options) {
      var record;
      record = new this(atts);
      return record.save(options);
    };

    Model.destroy = function(id, options) {
      var ref;
      return (ref = this.find(id)) != null ? ref.destroy(options) : void 0;
    };

    Model.change = function(callbackOrParams) {
      if (typeof callbackOrParams === 'function') {
        return this.bind('change', callbackOrParams);
      } else {
        return this.trigger.apply(this, ['change'].concat(slice.call(arguments)));
      }
    };

    Model.fetch = function(callbackOrParams) {
      if (typeof callbackOrParams === 'function') {
        return this.bind('fetch', callbackOrParams);
      } else {
        return this.trigger.apply(this, ['fetch'].concat(slice.call(arguments)));
      }
    };

    Model.toJSON = function() {
      return this.records;
    };

    Model.beforeFromJSON = function(objects) {
      return objects;
    };

    Model.fromJSON = function(objects) {
      var j, len, results, value;
      if (!objects) {
        return;
      }
      if (typeof objects === 'string') {
        objects = JSON.parse(objects);
      }
      objects = this.beforeFromJSON(objects);
      if (Array.isArray(objects)) {
        results = [];
        for (j = 0, len = objects.length; j < len; j++) {
          value = objects[j];
          if (value instanceof this) {
            results.push(value);
          } else {
            results.push(new this(value));
          }
        }
        return results;
      } else {
        if (objects instanceof this) {
          return objects;
        }
        return new this(objects);
      }
    };

    Model.fromForm = function() {
      var ref;
      return (ref = new this).fromForm.apply(ref, arguments);
    };

    Model.sort = function() {
      if (this.comparator) {
        this.records.sort(this.comparator);
      }
      return this;
    };

    Model.cloneArray = function(array) {
      var j, len, results, value;
      results = [];
      for (j = 0, len = array.length; j < len; j++) {
        value = array[j];
        results.push(value.clone());
      }
      return results;
    };

    Model.idCounter = 0;

    Model.uid = function(prefix) {
      var uid;
      if (prefix == null) {
        prefix = '';
      }
      uid = prefix + this.idCounter++;
      if (this.exists(uid)) {
        uid = this.uid(prefix);
      }
      return uid;
    };

    function Model(atts) {
      Model.__super__.constructor.apply(this, arguments);
      if ((this.constructor.uuid != null) && typeof this.constructor.uuid === 'function') {
        this.cid = this.constructor.uuid();
        if (!this.id) {
          this.id = this.cid;
        }
      } else {
        this.cid = (atts != null ? atts.cid : void 0) || this.constructor.uid('c-');
      }
      if (atts) {
        this.load(atts);
      }
    }

    Model.prototype.isNew = function() {
      return !this.exists();
    };

    Model.prototype.isValid = function() {
      return !this.validate();
    };

    Model.prototype.validate = function() {};

    Model.prototype.load = function(atts) {
      var key, value;
      if (atts.id) {
        this.id = atts.id;
      }
      for (key in atts) {
        value = atts[key];
        if (key === '_callbacks') {
          continue;
        }
        if (typeof this[key] === 'function') {
          if (typeof value === 'function') {
            continue;
          }
          this[key](value);
        } else {
          this[key] = value;
        }
      }
      return this;
    };

    Model.prototype.attributes = function() {
      var j, key, len, ref, result;
      result = {};
      ref = this.constructor.attributes;
      for (j = 0, len = ref.length; j < len; j++) {
        key = ref[j];
        if (key in this) {
          if (typeof this[key] === 'function') {
            result[key] = this[key]();
          } else {
            result[key] = this[key];
          }
        }
      }
      if (this.id) {
        result.id = this.id;
      }
      return result;
    };

    Model.prototype.eql = function(rec) {
      return rec && rec.constructor === this.constructor && ((rec.cid === this.cid) || (rec.id && rec.id === this.id));
    };

    Model.prototype.save = function(options) {
      var error, record;
      if (options == null) {
        options = {};
      }
      if (options.validate !== false) {
        error = this.validate();
        if (error) {
          this.trigger('error', this, error);
          return false;
        }
      }
      this.trigger('beforeSave', this, options);
      record = this.isNew() ? this.create(options) : this.update(options);
      this.stripCloneAttrs();
      this.trigger('save', record, options);
      return record;
    };

    Model.prototype.stripCloneAttrs = function() {
      var key, value;
      if (this.hasOwnProperty('cid')) {
        return;
      }
      for (key in this) {
        if (!hasProp.call(this, key)) continue;
        value = this[key];
        if (indexOf.call(this.constructor.attributes, key) >= 0) {
          delete this[key];
        }
      }
      return this;
    };

    Model.prototype.updateAttribute = function(name, value, options) {
      var atts;
      atts = {};
      atts[name] = value;
      return this.updateAttributes(atts, options);
    };

    Model.prototype.updateAttributes = function(atts, options) {
      this.load(atts);
      return this.save(options);
    };

    Model.prototype.changeID = function(id) {
      var records;
      if (id === this.id) {
        return;
      }
      records = this.constructor.irecords;
      records[id] = records[this.id];
      if (this.cid !== this.id) {
        delete records[this.id];
      }
      return this.id = id;
    };

    Model.prototype.remove = function(options) {
      var i, j, len, record, records;
      if (options == null) {
        options = {};
      }
      records = this.constructor.records.slice(0);
      for (i = j = 0, len = records.length; j < len; i = ++j) {
        record = records[i];
        if (!(this.eql(record))) {
          continue;
        }
        records.splice(i, 1);
        break;
      }
      this.constructor.records = records;
      if (options.clear) {
        delete this.constructor.irecords[this.id];
        return delete this.constructor.irecords[this.cid];
      }
    };

    Model.prototype.destroy = function(options) {
      if (options == null) {
        options = {};
      }
      if (options.clear == null) {
        options.clear = true;
      }
      this.trigger('beforeDestroy', this, options);
      this.remove(options);
      this.destroyed = true;
      this.trigger('destroy', this, options);
      this.trigger('change', this, 'destroy', options);
      if (this.listeningTo) {
        this.stopListening();
      }
      this.unbind();
      return this;
    };

    Model.prototype.dup = function(newRecord) {
      var atts, record;
      if (newRecord == null) {
        newRecord = true;
      }
      atts = this.attributes();
      if (newRecord) {
        delete atts.id;
      } else {
        atts.cid = this.cid;
      }
      record = new this.constructor(atts);
      if (!newRecord) {
        this._callbacks && (record._callbacks = this._callbacks);
      }
      return record;
    };

    Model.prototype.clone = function() {
      return createObject(this);
    };

    Model.prototype.reload = function() {
      var original;
      if (this.isNew()) {
        return this;
      }
      original = this.constructor.find(this.id);
      this.load(original.attributes());
      return original;
    };

    Model.prototype.refresh = function(atts) {
      atts = this.constructor.fromJSON(atts);
      if (atts.id && this.id !== atts.id) {
        this.changeID(atts.id);
      }
      this.constructor.irecords[this.id].load(atts);
      this.trigger('refresh', this);
      this.trigger('change', this, 'refresh');
      return this;
    };

    Model.prototype.toJSON = function() {
      return this.attributes();
    };

    Model.prototype.toString = function() {
      return "<" + this.constructor.className + " (" + (JSON.stringify(this)) + ")>";
    };

    Model.prototype.fromForm = function(form) {
      var checkbox, j, k, key, l, len, len1, len2, name, name1, ref, ref1, ref2, result;
      result = {};
      ref = $(form).find('[type=checkbox]:not([value])');
      for (j = 0, len = ref.length; j < len; j++) {
        checkbox = ref[j];
        result[checkbox.name] = $(checkbox).prop('checked');
      }
      ref1 = $(form).find('[type=checkbox][name$="[]"]');
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        checkbox = ref1[k];
        name = checkbox.name.replace(/\[\]$/, '');
        result[name] || (result[name] = []);
        if ($(checkbox).prop('checked')) {
          result[name].push(checkbox.value);
        }
      }
      ref2 = $(form).serializeArray();
      for (l = 0, len2 = ref2.length; l < len2; l++) {
        key = ref2[l];
        result[name1 = key.name] || (result[name1] = key.value);
      }
      return this.load(result);
    };

    Model.prototype.exists = function() {
      return this.constructor.exists(this.id);
    };

    Model.prototype.update = function(options) {
      var clone, records;
      this.trigger('beforeUpdate', this, options);
      records = this.constructor.irecords;
      records[this.id].load(this.attributes());
      this.constructor.sort();
      clone = records[this.id].clone();
      clone.trigger('update', clone, options);
      clone.trigger('change', clone, 'update', options);
      return clone;
    };

    Model.prototype.create = function(options) {
      var clone, record;
      this.trigger('beforeCreate', this, options);
      this.id || (this.id = this.cid);
      record = this.dup(false);
      this.constructor.addRecord(record, options.idx);
      this.constructor.sort();
      clone = record.clone();
      clone.trigger('create', clone, options);
      clone.trigger('change', clone, 'create', options);
      return clone;
    };

    Model.prototype.bind = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.bind.apply(record, arguments);
    };

    Model.prototype.one = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.one.apply(record, arguments);
    };

    Model.prototype.unbind = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.unbind.apply(record, arguments);
    };

    Model.prototype.trigger = function() {
      var ref;
      Events.trigger.apply(this, arguments);
      if (arguments[0] === 'refresh') {
        return true;
      }
      return (ref = this.constructor).trigger.apply(ref, arguments);
    };

    return Model;

  })(Module);

  Model.prototype.on = Model.prototype.bind;

  Model.prototype.off = Model.prototype.unbind;

  Controller = (function(superClass) {
    extend(Controller, superClass);

    Controller.include(Events);

    Controller.include(Log);

    Controller.prototype.eventSplitter = /^(\S+)\s*(.*)$/;

    Controller.prototype.tag = 'div';

    function Controller(options) {
      this.release = bind(this.release, this);
      var context, key, parent_prototype, ref, value;
      this.options = options;
      ref = this.options;
      for (key in ref) {
        value = ref[key];
        this[key] = value;
      }
      if (!this.el) {
        this.el = document.createElement(this.tag);
      }
      this.el = $(this.el);
      if (this.className) {
        this.el.addClass(this.className);
      }
      if (this.attributes) {
        this.el.attr(this.attributes);
      }
      if (!this.events) {
        this.events = this.constructor.events;
      }
      if (!this.elements) {
        this.elements = this.constructor.elements;
      }
      context = this;
      while (parent_prototype = context.constructor.__super__) {
        if (parent_prototype.events) {
          this.events = $.extend({}, parent_prototype.events, this.events);
        }
        if (parent_prototype.elements) {
          this.elements = $.extend({}, parent_prototype.elements, this.elements);
        }
        context = parent_prototype;
      }
      if (this.events) {
        this.delegateEvents(this.events);
      }
      if (this.elements) {
        this.refreshElements();
      }
      Controller.__super__.constructor.apply(this, arguments);
    }

    Controller.prototype.release = function() {
      this.trigger('release', this);
      this.el.remove();
      this.unbind();
      return this.stopListening();
    };

    Controller.prototype.$ = function(selector) {
      return this.el.find(selector);
    };

    Controller.prototype.delegateEvents = function(events) {
      var eventName, key, match, method, results, selector;
      results = [];
      for (key in events) {
        method = events[key];
        if (typeof method === 'function') {
          method = (function(_this) {
            return function(method) {
              return function() {
                method.apply(_this, arguments);
                return true;
              };
            };
          })(this)(method);
        } else {
          if (!this[method]) {
            throw new Error(method + " doesn't exist");
          }
          method = (function(_this) {
            return function(method) {
              return function() {
                _this[method].apply(_this, arguments);
                return true;
              };
            };
          })(this)(method);
        }
        match = key.match(this.eventSplitter);
        eventName = match[1];
        selector = match[2];
        if (selector === '') {
          results.push(this.el.bind(eventName, method));
        } else {
          results.push(this.el.on(eventName, selector, method));
        }
      }
      return results;
    };

    Controller.prototype.refreshElements = function() {
      var key, ref, results, value;
      ref = this.elements;
      results = [];
      for (key in ref) {
        value = ref[key];
        results.push(this[value] = this.$(key));
      }
      return results;
    };

    Controller.prototype.delay = function(func, timeout) {
      return setTimeout(this.proxy(func), timeout || 0);
    };

    Controller.prototype.html = function(element) {
      this.el.html(element.el || element);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.append = function() {
      var e, elements, ref;
      elements = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      elements = (function() {
        var j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          e = elements[j];
          results.push(e.el || e);
        }
        return results;
      })();
      (ref = this.el).append.apply(ref, elements);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.appendTo = function(element) {
      this.el.appendTo(element.el || element);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.prepend = function() {
      var e, elements, ref;
      elements = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      elements = (function() {
        var j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          e = elements[j];
          results.push(e.el || e);
        }
        return results;
      })();
      (ref = this.el).prepend.apply(ref, elements);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.replace = function(element) {
      var previous, ref, ref1;
      element = element.el || element;
      if (typeof element === "string") {
        element = $.trim(element);
      }
      ref1 = [this.el, $(((ref = $.parseHTML(element)) != null ? ref[0] : void 0) || element)], previous = ref1[0], this.el = ref1[1];
      previous.replaceWith(this.el);
      this.delegateEvents(this.events);
      this.refreshElements();
      return this.el;
    };

    return Controller;

  })(Module);

  $ = (typeof window !== "undefined" && window !== null ? window.jQuery : void 0) || (typeof window !== "undefined" && window !== null ? window.Zepto : void 0) || function(element) {
    return element;
  };

  createObject = Object.create || function(o) {
    var Func;
    Func = function() {};
    Func.prototype = o;
    return new Func();
  };

  makeArray = function(args) {
    return Array.prototype.slice.call(args, 0);
  };

  Spine = this.Spine = {};

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine;
  }

  Spine.version = '1.6.2';

  Spine.$ = $;

  Spine.Events = Events;

  Spine.Log = Log;

  Spine.Module = Module;

  Spine.Controller = Controller;

  Spine.Model = Model;

  Module.extend.call(Spine, Events);

  Module.create = Module.sub = Controller.create = Controller.sub = Model.sub = function(instances, statics) {
    var Result;
    Result = (function(superClass) {
      extend(Result, superClass);

      function Result() {
        return Result.__super__.constructor.apply(this, arguments);
      }

      return Result;

    })(this);
    if (instances) {
      Result.include(instances);
    }
    if (statics) {
      Result.extend(statics);
    }
    if (typeof Result.unbind === "function") {
      Result.unbind();
    }
    return Result;
  };

  Model.setup = function(name, attributes) {
    var Instance;
    if (attributes == null) {
      attributes = [];
    }
    Instance = (function(superClass) {
      extend(Instance, superClass);

      function Instance() {
        return Instance.__super__.constructor.apply(this, arguments);
      }

      return Instance;

    })(this);
    Instance.configure.apply(Instance, [name].concat(slice.call(attributes)));
    return Instance;
  };

  Spine.Class = Module;

}).call(this);



},{}],44:[function(require,module,exports){
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";c.addEventListener("click",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel("FPS","#0ff","#002")),f=h(new Stats.Panel("MS","#0f0","#020"));
if(self.performance&&self.performance.memory)var t=h(new Stats.Panel("MB","#f08","#201"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};
Stats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r;q.height=f;q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");b.font="bold "+9*a+"px Helvetica,Arial,sans-serif";b.textBaseline="top";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,
v){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+" "+h+" ("+e(c)+"-"+e(g)+")",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};"object"===typeof module&&(module.exports=Stats);

},{}],45:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],46:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":45,"_process":38,"inherits":35}],47:[function(require,module,exports){
var indexOf = require('indexof');

var Object_keys = function (obj) {
    if (Object.keys) return Object.keys(obj)
    else {
        var res = [];
        for (var key in obj) res.push(key)
        return res;
    }
};

var forEach = function (xs, fn) {
    if (xs.forEach) return xs.forEach(fn)
    else for (var i = 0; i < xs.length; i++) {
        fn(xs[i], i, xs);
    }
};

var defineProp = (function() {
    try {
        Object.defineProperty({}, '_', {});
        return function(obj, name, value) {
            Object.defineProperty(obj, name, {
                writable: true,
                enumerable: false,
                configurable: true,
                value: value
            })
        };
    } catch(e) {
        return function(obj, name, value) {
            obj[name] = value;
        };
    }
}());

var globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',
'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',
'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',
'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',
'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];

function Context() {}
Context.prototype = {};

var Script = exports.Script = function NodeScript (code) {
    if (!(this instanceof Script)) return new Script(code);
    this.code = code;
};

Script.prototype.runInContext = function (context) {
    if (!(context instanceof Context)) {
        throw new TypeError("needs a 'context' argument.");
    }
    
    var iframe = document.createElement('iframe');
    if (!iframe.style) iframe.style = {};
    iframe.style.display = 'none';
    
    document.body.appendChild(iframe);
    
    var win = iframe.contentWindow;
    var wEval = win.eval, wExecScript = win.execScript;

    if (!wEval && wExecScript) {
        // win.eval() magically appears when this is called in IE:
        wExecScript.call(win, 'null');
        wEval = win.eval;
    }
    
    forEach(Object_keys(context), function (key) {
        win[key] = context[key];
    });
    forEach(globals, function (key) {
        if (context[key]) {
            win[key] = context[key];
        }
    });
    
    var winKeys = Object_keys(win);

    var res = wEval.call(win, this.code);
    
    forEach(Object_keys(win), function (key) {
        // Avoid copying circular objects like `top` and `window` by only
        // updating existing context properties or new properties in the `win`
        // that was only introduced after the eval.
        if (key in context || indexOf(winKeys, key) === -1) {
            context[key] = win[key];
        }
    });

    forEach(globals, function (key) {
        if (!(key in context)) {
            defineProp(context, key, win[key]);
        }
    });
    
    document.body.removeChild(iframe);
    
    return res;
};

Script.prototype.runInThisContext = function () {
    return eval(this.code); // maybe...
};

Script.prototype.runInNewContext = function (context) {
    var ctx = Script.createContext(context);
    var res = this.runInContext(ctx);

    forEach(Object_keys(ctx), function (key) {
        context[key] = ctx[key];
    });

    return res;
};

forEach(Object_keys(Script.prototype), function (name) {
    exports[name] = Script[name] = function (code) {
        var s = Script(code);
        return s[name].apply(s, [].slice.call(arguments, 1));
    };
});

exports.createScript = function (code) {
    return exports.Script(code);
};

exports.createContext = Script.createContext = function (context) {
    var copy = new Context();
    if(typeof context === 'object') {
        forEach(Object_keys(context), function (key) {
            copy[key] = context[key];
        });
    }
    return copy;
};

},{"indexof":34}]},{},[13,11])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9qcy9jb250cm9sbGVycy9jb250cm9sbGVycy9jb25zb2xlLmljZWQiLCJidWlsZC9qcy9jb250cm9sbGVycy9jb250cm9sbGVycy9lZGl0b3IuaWNlZCIsImJ1aWxkL2pzL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXJzL3N0YWdlLmljZWQiLCJidWlsZC9qcy9saWIvbGliL01hdGgyLmljZWQiLCJidWlsZC9qcy9saWIvbGliL2ZpbGVxdWV1ZS5pY2VkIiwiYnVpbGQvanMvbGliL3BpeGkuZGV2LmpzIiwiYnVpbGQvanMvbGliL2xpYi9zZXR1cC5pY2VkIiwiYnVpbGQvanMvbGliL2xpYi9zcGluZS5hamF4LmljZWQiLCJidWlsZC9qcy9saWIvbGliL3NwaW5lLmF3YWl0YWpheC5pY2VkIiwiYnVpbGQvanMvbW9kZWxzL21vZGVscy9leGFtcGxlcy5pY2VkIiwiYnVpbGQvanMvcGl4aWpzLXBsYXlncm91bmQuaWNlZCIsImJ1aWxkL2pzL3ZpZXdzL3RlbXBsYXRlcy5qcyIsImxpYi9Ud2Vlbi5qcyIsIm5vZGVfbW9kdWxlcy9AbHVrZWthcnJ5cy9qYWRlLXJ1bnRpbWUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0L2NvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuanMiLCJub2RlX21vZHVsZXMvZW1vamktaW1hZ2VzL2Vtb2ppLWltYWdlcy5qcyIsIm5vZGVfbW9kdWxlcy9lczUtc2hpbWlmeS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvY29mZmVlLXNjcmlwdC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvaGVscGVycy5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvaWNlZC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvbGV4ZXIuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L25vZGVzLmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtY29mZmVlLXNjcmlwdC9saWIvY29mZmVlLXNjcmlwdC9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L3JlZ2lzdGVyLmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtY29mZmVlLXNjcmlwdC9saWIvY29mZmVlLXNjcmlwdC9yZXdyaXRlci5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvc2NvcGUuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L3NvdXJjZW1hcC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLXJ1bnRpbWUvbGliL2NvbnN0LmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtcnVudGltZS9saWIvbGlicmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLXJ1bnRpbWUvbGliL21haW4uanMiLCJub2RlX21vZHVsZXMvaWNlZC1ydW50aW1lL2xpYi9ydW50aW1lLmpzIiwibm9kZV9tb2R1bGVzL2luZGV4b2YvaW5kZXguanMiLCJub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9qczJjb2ZmZWUvZGlzdC9qczJjb2ZmZWUuanMiLCJub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9zcGluZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zcGluZS9saWIvbG9jYWwuanMiLCJub2RlX21vZHVsZXMvc3BpbmUvbGliL21hbmFnZXIuanMiLCJub2RlX21vZHVsZXMvc3BpbmUvbGliL3JvdXRlLmpzIiwibm9kZV9tb2R1bGVzL3NwaW5lL2xpYi9zcGluZS5qcyIsIm5vZGVfbW9kdWxlcy9zdGF0cy5qcy9idWlsZC9zdGF0cy5taW4uanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJub2RlX21vZHVsZXMvdm0tYnJvd3NlcmlmeS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQUEsTUFBQSw2QkFBQTtJQUFBOzs7c0JBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQVksT0FBQSxDQUFRLE9BQVIsQ0FBWixDQUFBOztBQUFBLEVBQ0EsSUFBQSxHQUFZLE9BQUEsQ0FBUSxvQkFBUixDQURaLENBQUE7O0FBQUEsRUFFQyxVQUFXLE9BQUEsQ0FBUSxNQUFSLEVBQVgsT0FGRCxDQUFBOztBQUFBLEVBS007QUFDSixRQUFBLGdCQUFBOztBQUFBLDhCQUFBLENBQUE7O0FBQUEsc0JBQUEsU0FBQSxHQUFXLHNCQUFYLENBQUE7O0FBQUEsSUFFQSxnQkFBQSxHQUNFO0FBQUEsTUFBQSxZQUFBLEVBQWMsSUFBZDtBQUFBLE1BQ0EsUUFBQSxFQUFVLENBRFY7QUFBQSxNQUVBLFFBQUEsRUFBVSxDQUZWO0FBQUEsTUFHQSxVQUFBLEVBQVksS0FIWjtBQUFBLE1BSUEsUUFBQSxFQUFVLEtBSlY7S0FIRixDQUFBOztBQUFBLHNCQVNBLFFBQUEsR0FDRTtBQUFBLE1BQUEsd0JBQUEsRUFBMEIsc0JBQTFCO0tBVkYsQ0FBQTs7QUFBQSxzQkFZQSxZQUFBLEdBQWMsU0FBQyxDQUFELEdBQUE7QUFDWixNQUFBLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxDQUFpQixDQUFqQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUEsRUFGQTtJQUFBLENBWmQsQ0FBQTs7QUFBQSxzQkFnQkEsVUFBQSxHQUFZLFNBQUMsQ0FBRCxHQUFBO0FBQ1YsTUFBQSxJQUFDLENBQUEsS0FBRCxJQUFhLENBQUUsYUFBRixLQUFZLElBQWYsR0FBeUIsQ0FBRSxhQUEzQixHQUF3QyxDQUFsRCxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBRCxJQUFVLElBRFYsQ0FBQTthQUVBLElBQUMsQ0FBQSxZQUFELENBQWMsQ0FBZCxFQUhVO0lBQUEsQ0FoQlosQ0FBQTs7QUFBQSxzQkFxQkEsY0FBQSxHQUFnQixTQUFDLENBQUQsR0FBQTtBQUNkLFVBQUEsS0FBQTtBQUFBLGNBQU8sQ0FBQyxDQUFDLEtBQVQ7QUFBQSxhQUNPLEVBRFA7QUFFSSxVQUFBLENBQUMsQ0FBQyxjQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsVUFDQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQUEsQ0FEUixDQUFBO0FBR0EsVUFBQSxJQUFHLEtBQUg7QUFDRSxZQUFBLElBQUMsQ0FBQSxVQUFELENBQVksS0FBWixDQUFBLENBQUE7QUFDQSxZQUFBLElBQUcsS0FBTSxhQUFOLEtBQWtCLElBQWxCLElBQTJCLENBQUEsSUFBSyxDQUFBLFNBQW5DO3FCQUNFLElBQUMsQ0FBQSxZQUFELENBQUEsRUFERjthQUZGO1dBTEo7QUFDTztBQURQLGFBVU8sRUFWUDtBQVdJLFVBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7QUFBQSxVQUNBLEtBQUEsR0FBUSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBQSxDQURSLENBQUE7QUFHQSxVQUFBLElBQUcsS0FBQSxJQUFVLElBQUMsQ0FBQSxTQUFYLElBQXlCLElBQUMsQ0FBQSxLQUE3QjtBQUNFLFlBQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBQVIsQ0FBQTtBQUFBLFlBRUEsSUFBQyxDQUFBLFVBQUQsQ0FBWSxLQUFaLENBRkEsQ0FBQTtBQUFBLFlBR0EsSUFBQyxDQUFBLFlBQUQsQ0FBQSxDQUhBLENBREY7V0FBQSxNQUtLLElBQUcsSUFBQyxDQUFBLFNBQUQsSUFBZSxJQUFDLENBQUEsS0FBbkI7QUFDSCxZQUFBLElBQUMsQ0FBQSxZQUFELENBQUEsQ0FBQSxDQURHO1dBUkw7aUJBV0EsSUFBQyxDQUFBLFNBQUQsR0FBYSxDQUFBLElBQUssQ0FBQSxVQXRCdEI7QUFBQSxhQXlCTyxFQXpCUDtBQTBCSSxVQUFBLENBQUMsQ0FBQyxjQUFGLENBQUEsQ0FBQSxDQUFBO0FBRUEsVUFBQSxJQUFHLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULEdBQWdCLENBQS9CO0FBQ0UsWUFBQSxJQUFDLENBQUEsUUFBRCxJQUFhLENBQWIsQ0FBQTttQkFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsT0FBUSxDQUFBLElBQUMsQ0FBQSxRQUFELENBQXBCLEVBRkY7V0E1Qko7QUF5Qk87QUF6QlAsYUFnQ08sRUFoQ1A7QUFpQ0ksVUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTtBQUVBLFVBQUEsSUFBRyxJQUFDLENBQUEsUUFBRCxHQUFZLENBQWY7QUFDRSxZQUFBLElBQUMsQ0FBQSxRQUFELElBQWEsQ0FBQSxDQUFiLENBQUE7bUJBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE9BQVEsQ0FBQSxJQUFDLENBQUEsUUFBRCxDQUFwQixFQUZGO1dBbkNKO0FBQUEsT0FEYztJQUFBLENBckJoQixDQUFBOztBQUFBLHNCQTZEQSx3QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsb0JBQW9CLENBQUMsTUFBdEIsQ0FBNkIsR0FBN0IsRUFBSDtJQUFBLENBN0RqQyxDQUFBOztBQUFBLHNCQThEQSw0QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsb0JBQW9CLENBQUMsSUFBdEIsQ0FBMkIsSUFBM0IsQ0FBZ0MsQ0FBQyxNQUFqQyxDQUF3QyxDQUF4QyxFQUEyQyxDQUEzQyxFQUFIO0lBQUEsQ0E5RGpDLENBQUE7O0FBQUEsc0JBK0RBLHdCQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxvQkFBb0IsQ0FBQyxPQUF0QixDQUE4QixHQUE5QixFQUFIO0lBQUEsQ0EvRGpDLENBQUE7O0FBQUEsc0JBaUVBLE1BQUEsR0FDRTtBQUFBLE1BQUEseUJBQUEsRUFBMkIsMEJBQTNCO0FBQUEsTUFDQSxtQ0FBQSxFQUFxQyw4QkFEckM7QUFBQSxNQUVBLHlCQUFBLEVBQTJCLDBCQUYzQjtLQWxFRixDQUFBOztBQXNFYSxJQUFBLGlCQUFDLE9BQUQsRUFBVSxRQUFWLEdBQUE7QUFDWCxVQUFBLFVBQUE7O1FBRHFCLFdBQVc7T0FDaEM7QUFBQSxxREFBQSxDQUFBO0FBQUEsMkNBQUEsQ0FBQTtBQUFBLDZEQUFBLENBQUE7QUFBQSxxREFBQSxDQUFBO0FBQUEseURBQUEsQ0FBQTtBQUFBLE1BQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxFQUFYLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQSxDQURaLENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxLQUFELEdBQVMsRUFGVCxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsU0FBRCxHQUFhLEtBSGIsQ0FBQTtBQUFBLE1BS0EsMENBQUEsU0FBQSxDQUxBLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLElBQUMsQ0FBQSxjQUFoQixDQU5BLENBQUE7QUFBQSxNQVFBLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxFQUFULEVBQWEsZ0JBQWIsQ0FSWixDQUFBO0FBVUEsTUFBQSxJQUFHLFlBQUEsSUFBaUIsWUFBWSxDQUFDLFFBQWpDO0FBQ0U7QUFBQSxhQUFBLFNBQUE7c0JBQUE7QUFDRSxVQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQURGO0FBQUEsU0FERjtPQVZBO0FBY0EsV0FBQSxhQUFBOzt3QkFBQTtBQUNFLFFBQUEsSUFBQyxDQUFBLFFBQVMsQ0FBQSxDQUFBLENBQVYsR0FBZSxDQUFmLENBREY7QUFBQSxPQWZXO0lBQUEsQ0F0RWI7O0FBQUEsc0JBeUZBLElBQUEsR0FBTSxTQUFDLElBQUQsR0FBQTtBQUNKLE1BQUEsSUFBRyxJQUFIO2VBQWEsSUFBQyxDQUFBLEtBQUQsR0FBUyxLQUF0QjtPQUFBLE1BQUE7ZUFDSyxJQUFDLENBQUEsTUFETjtPQURJO0lBQUEsQ0F6Rk4sQ0FBQTs7QUFBQSxzQkE2RkEsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsa0JBQUE7QUFBQTtBQUNFLFFBQUEsUUFBQTtBQUFXLGtCQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLGlCQUNKLFFBREk7cUJBQ1UsSUFBSSxDQUFDLE9BQUwsQ0FBYSxJQUFDLENBQUEsS0FBZCxFQUFxQjtBQUFBLGdCQUFBLElBQUEsRUFBTSxJQUFOO2VBQXJCLEVBRFY7QUFBQSxpQkFFSixTQUZJO3FCQUVXLElBQUMsQ0FBQSxNQUZaO0FBQUE7cUJBQVgsQ0FBQTtBQUFBLFFBSUEsS0FBQSxHQUFRLElBQUksQ0FBQyxJQUFMLENBQVUsTUFBVixFQUFrQixRQUFsQixDQUpSLENBQUE7QUFBQSxRQUtBLE1BQU8sQ0FBQSxJQUFDLENBQUEsUUFBUSxDQUFDLFlBQVYsQ0FBUCxHQUFpQyxLQUxqQyxDQUFBO2VBTUEsSUFBQyxDQUFBLFVBQUQsQ0FBWSxLQUFaLEVBUEY7T0FBQSxjQUFBO0FBU0UsUUFESSxVQUNKLENBQUE7ZUFBQSxJQUFDLENBQUEsaUJBQUQsQ0FBbUIsQ0FBbkIsRUFURjtPQUFBO0FBV0UsUUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLEVBQVQsQ0FYRjtPQURZO0lBQUEsQ0E3RmQsQ0FBQTs7QUFBQSxzQkEyR0EsS0FBQSxHQUFPLFNBQUEsR0FBQTtBQUNMLFVBQUEsVUFBQTtBQUFBLE1BRE0sOERBQ04sQ0FBQTtBQUFBLE1BQUEsQ0FBQSxHQUFJLElBQUksQ0FBQyxJQUFMLENBQVUsR0FBVixDQUFBLElBQWtCLEdBQXRCLENBQUE7QUFBQSxNQUNBLENBQUEsR0FBSSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBQSxDQUFBLEdBQWEsQ0FBYixHQUFpQixJQURyQixDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsSUFBRCxDQUFNLENBQUMsQ0FBQyxLQUFGLENBQVEsSUFBUixDQUFjLCtCQUF1QixDQUFDLElBQXRDLENBQTJDLElBQTNDLENBQU4sQ0FGQSxDQUFBO2FBR0EsT0FKSztJQUFBLENBM0dQLENBQUE7O0FBQUEsc0JBaUhBLFVBQUEsR0FBWSxTQUFDLEtBQUQsR0FBQTthQUNWLElBQUMsQ0FBQSxLQUFELENBQU8sT0FBQSxDQUFRLEtBQVIsRUFBZSxJQUFDLENBQUEsUUFBUSxDQUFDLFVBQXpCLEVBQXFDLElBQUMsQ0FBQSxRQUFRLENBQUMsUUFBL0MsRUFBeUQsSUFBQyxDQUFBLFFBQVEsQ0FBQyxRQUFuRSxDQUFQLEVBRFU7SUFBQSxDQWpIWixDQUFBOztBQUFBLHNCQW9IQSxpQkFBQSxHQUFtQixTQUFDLENBQUQsR0FBQTtBQUNqQixVQUFBLE1BQUE7QUFBQSxNQUFBLElBQUcsQ0FBQyxDQUFDLEtBQUw7QUFDRSxRQUFBLE1BQUEsR0FBUyxDQUFDLENBQUMsS0FBWCxDQURGO09BQUE7QUFJQyxNQUFBLHNCQUFHLE1BQU0sQ0FBRSxLQUFSLENBQWMsSUFBZCxDQUFvQixDQUFBLENBQUEsV0FBcEIsS0FBNEIsQ0FBQyxDQUFDLFFBQUYsQ0FBQSxDQUEvQjtBQUNHLFFBQUEsTUFBQSxHQUFTLEVBQUEsR0FBRSxDQUFDLENBQUMsQ0FBQyxRQUFGLENBQUEsQ0FBRCxDQUFGLEdBQWdCLElBQWhCLEdBQW9CLENBQUMsQ0FBQyxLQUEvQixDQURIO09BQUEsTUFBQTtBQUdDLFFBQUEsTUFBQSxHQUFTLENBQUMsQ0FBQyxRQUFGLENBQUEsQ0FBVCxDQUhEO09BSkQ7YUFRQSxJQUFDLENBQUEsS0FBRCxDQUFPLE1BQVAsRUFUaUI7SUFBQSxDQXBIbkIsQ0FBQTs7bUJBQUE7O0tBRG9CLEtBQUssQ0FBQyxXQUw1QixDQUFBOztBQUFBLEVBdUlBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE9BdklqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLGdHQUFBO0lBQUE7Ozt5SkFBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFhLE9BQUEsQ0FBUSxPQUFSLENBQWIsQ0FBQTs7QUFBQSxFQUNBLElBQUEsR0FBYSxPQUFBLENBQVEsb0JBQVIsQ0FEYixDQUFBOztBQUFBLEVBRUEsVUFBQSxHQUFhLE9BQUEsQ0FBUSxZQUFSLENBRmIsQ0FBQTs7QUFBQSxFQUdBLFVBQUEsR0FBYSxPQUFBLENBQVEsK0JBQVIsQ0FIYixDQUFBOztBQUFBLEVBSUEsU0FBQSxHQUFhLE9BQUEsQ0FBUSwwQkFBUixDQUpiLENBQUE7O0FBQUEsRUFLQSxTQUFBLEdBQWEsT0FBQSxDQUFRLGtCQUFSLENBTGIsQ0FBQTs7QUFBQSxFQVFNO0FBQ0osUUFBQSxnQkFBQTs7QUFBQSw2QkFBQSxDQUFBOztBQUFBLHFCQUFBLFNBQUEsR0FBVyxxQkFBWCxDQUFBOztBQUFBLElBRUEsZ0JBQUEsR0FDRTtBQUFBLE1BQUEsWUFBQSxFQUFjLElBQWQ7S0FIRixDQUFBOztBQUFBLHFCQUtBLFFBQUEsR0FDRTtBQUFBLE1BQUEsYUFBQSxFQUFlLFlBQWY7QUFBQSxNQUNBLGtCQUFBLEVBQW9CLGFBRHBCO0FBQUEsTUFFQSxRQUFBLEVBQVUsUUFGVjtBQUFBLE1BR0EsWUFBQSxFQUFjLE1BSGQ7S0FORixDQUFBOztBQUFBLHFCQVdBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixNQUFBLElBQUcsSUFBQyxDQUFBLElBQUksQ0FBQyxFQUFOLENBQVMsVUFBVCxDQUFIO2VBQTRCLElBQUMsQ0FBQSxJQUFJLENBQUMsT0FBTixDQUFjLEdBQWQsRUFBNUI7T0FBQSxNQUFBO2VBQ0ssSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFOLENBQWEsR0FBYixFQURMO09BRFU7SUFBQSxDQVhaLENBQUE7O0FBQUEscUJBZUEsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsS0FBQTtBQUFBLE1BQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBUixDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FEQSxDQUFBO2FBRUEsWUFBWSxDQUFDLFFBQWIsR0FBd0IsSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QjtBQUFBLFFBQUEsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFmO0FBQUEsUUFBdUIsTUFBQSxFQUFRLElBQUMsQ0FBQSxLQUFoQztPQUF4QixDQUFmLEVBSFo7SUFBQSxDQWZkLENBQUE7O0FBQUEscUJBb0JBLG1CQUFBLEdBQXFCLFNBQUMsQ0FBRCxHQUFBO0FBQ25CLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixRQUFwQixDQUFULENBQUE7QUFDQSxNQUFBLElBQUcsTUFBTSxDQUFDLEVBQVAsQ0FBVSxXQUFWLENBQUg7QUFDRSxRQUFBLElBQUMsQ0FBQSxjQUFELENBQUEsQ0FBQSxDQUFBO0FBQUEsUUFDQSxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQVosQ0FEQSxDQURGO09BQUEsTUFBQTtBQUlFLFFBQUEsSUFBQyxDQUFBLGFBQUQsQ0FBQSxDQUFBLENBQUE7QUFBQSxRQUNBLE1BQU0sQ0FBQyxJQUFQLENBQVksT0FBWixDQURBLENBSkY7T0FEQTthQU9BLE1BQU0sQ0FBQyxXQUFQLENBQW1CLFVBQW5CLEVBUm1CO0lBQUEsQ0FwQnJCLENBQUE7O0FBQUEscUJBOEJBLGFBQUEsR0FBZSxTQUFBLEdBQUE7QUFDYixVQUFBLEtBQUE7QUFBQSxNQUFBLElBQUEsQ0FBQSxDQUFjLEtBQUEsR0FBUSxJQUFDLENBQUEsR0FBRCxDQUFBLENBQVIsQ0FBZDtBQUFBLGNBQUEsQ0FBQTtPQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FEQSxDQUFBO2FBRUEsSUFBQyxDQUFBLFlBQUQsQ0FBQSxFQUhhO0lBQUEsQ0E5QmYsQ0FBQTs7QUFBQSxxQkFtQ0EsY0FBQSxHQUFnQixTQUFBLEdBQUE7YUFBRyxNQUFNLENBQUMsb0JBQVAsQ0FBNEIsTUFBTSxDQUFDLEtBQW5DLEVBQUg7SUFBQSxDQW5DaEIsQ0FBQTs7QUFBQSxxQkFxQ0EsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsa0JBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELENBQVMsU0FBVCxDQUFBLENBQUE7QUFDQTtBQUNFLFFBQUEsUUFBQTtBQUFXLGtCQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLGlCQUNKLFFBREk7cUJBQ1UsSUFBSSxDQUFDLE9BQUwsQ0FBYSxJQUFDLENBQUEsS0FBZCxFQUFxQjtBQUFBLGdCQUFBLElBQUEsRUFBTSxJQUFOO0FBQUEsZ0JBQVUsT0FBQSxFQUFTLFFBQW5CO2VBQXJCLEVBRFY7QUFBQSxpQkFFSixTQUZJO3FCQUVXLElBQUMsQ0FBQSxNQUZaO0FBQUE7cUJBQVgsQ0FBQTtBQUFBLFFBSUEsS0FBQSxHQUFRLElBQUksQ0FBQyxJQUFMLENBQVUsTUFBVixFQUFrQixRQUFsQixDQUpSLENBQUE7QUFBQSxRQUtBLE1BQU8sQ0FBQSxJQUFDLENBQUEsUUFBUSxDQUFDLFlBQVYsQ0FBUCxHQUFpQyxLQUxqQyxDQUFBO0FBQUEsUUFNQSxJQUFDLENBQUEsT0FBTyxDQUFDLFVBQVQsQ0FBb0IsS0FBcEIsQ0FOQSxDQURGO09BQUEsY0FBQTtBQVNFLFFBREksVUFDSixDQUFBO0FBQUEsUUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLGlCQUFULENBQTJCLENBQTNCLENBQUEsQ0FURjtPQURBO2FBWUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxHQWJHO0lBQUEsQ0FyQ2QsQ0FBQTs7QUFBQSxxQkFvREEsWUFBQSxHQUFjLFNBQUMsQ0FBRCxHQUFBO0FBQ1osTUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBQSxDQUFBO2FBQ0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxDQUFBLEVBRkE7SUFBQSxDQXBEZCxDQUFBOztBQUFBLHFCQXdEQSxVQUFBLEdBQVksU0FBQyxDQUFELEdBQUE7QUFDVixNQUFBLElBQUMsQ0FBQSxLQUFELElBQWEsQ0FBRSxhQUFGLEtBQVksSUFBZixHQUF5QixDQUFFLGFBQTNCLEdBQXdDLENBQWxELENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxLQUFELElBQVUsSUFEVixDQUFBO2FBRUEsSUFBQyxDQUFBLFlBQUQsQ0FBYyxDQUFkLEVBSFU7SUFBQSxDQXhEWixDQUFBOztBQUFBLHFCQTZEQSxvQkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLE1BQVosQ0FBbUIsR0FBbkIsRUFBSDtJQUFBLENBN0RqQyxDQUFBOztBQUFBLHFCQThEQSx3QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsSUFBakIsQ0FBc0IsQ0FBQyxNQUF2QixDQUE4QixDQUE5QixFQUFpQyxDQUFqQyxFQUFIO0lBQUEsQ0E5RGpDLENBQUE7O0FBQUEscUJBK0RBLG9CQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxVQUFVLENBQUMsT0FBWixDQUFvQixHQUFwQixFQUFIO0lBQUEsQ0EvRGpDLENBQUE7O0FBQUEscUJBaUVBLFVBQUEsR0FBWSxTQUFDLENBQUQsR0FBQTtBQUNWLFVBQUEsRUFBQTtBQUFBLE1BQUEsRUFBQSxHQUFLLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixRQUFwQixDQUFMLENBQUE7QUFDQSxNQUFBLElBQVUsRUFBRSxDQUFDLEVBQUgsQ0FBTSxXQUFOLENBQVY7QUFBQSxjQUFBLENBQUE7T0FEQTtBQUdBLE1BQUEsSUFBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUgsQ0FBTSxvQkFBTixDQUFELENBQUEsSUFBaUMsSUFBQyxDQUFBLGNBQUQsQ0FBQSxDQUFsQyxDQUFBLElBQXdELElBQUMsQ0FBQSxlQUFELENBQUEsQ0FBM0Q7ZUFDRSxFQUFFLENBQUMsUUFBSCxDQUFZLFVBQVosQ0FBdUIsQ0FBQyxRQUF4QixDQUFBLENBQWtDLENBQUMsV0FBbkMsQ0FBK0MsVUFBL0MsRUFERjtPQUpVO0lBQUEsQ0FqRVosQ0FBQTs7QUFBQSxxQkF3RUEsSUFBQSxHQUFNLFNBQUMsSUFBRCxHQUFBO0FBQ0osTUFBQSxJQUFHLElBQUg7ZUFBYSxJQUFDLENBQUEsT0FBRCxDQUFTLFlBQVQsRUFBdUIsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFoQyxFQUFiO09BQUEsTUFBQTtlQUNLLElBQUMsQ0FBQSxNQUROO09BREk7SUFBQSxDQXhFTixDQUFBOztBQUFBLHFCQTRFQSxNQUFBLEdBQ0U7QUFBQSxNQUFBLG1CQUFBLEVBQXFCLFlBQXJCO0FBQUEsTUFDQSxtQkFBQSxFQUFxQixjQURyQjtBQUFBLE1BRUEsa0JBQUEsRUFBb0IscUJBRnBCO0FBQUEsTUFHQSw4QkFBQSxFQUFnQyxnQkFIaEM7QUFBQSxNQUlBLHdCQUFBLEVBQTBCLHNCQUoxQjtBQUFBLE1BS0Esd0JBQUEsRUFBMEIsMEJBTDFCO0FBQUEsTUFNQSx3QkFBQSxFQUEwQixzQkFOMUI7QUFBQSxNQU9BLGdDQUFBLEVBQWtDLFlBUGxDO0FBQUEsTUFRQSxpQ0FBQSxFQUFtQyxZQVJuQztBQUFBLE1BU0EsaUJBQUEsRUFBbUIsZUFUbkI7QUFBQSxNQVVBLGtCQUFBLEVBQW9CLGVBVnBCO0FBQUEsTUFXQSxhQUFBLEVBQWUsbUJBWGY7S0E3RUYsQ0FBQTs7QUEwRmEsSUFBQSxnQkFBQyxPQUFELEVBQVUsUUFBVixHQUFBO0FBQ1gsVUFBQSxVQUFBOztRQURxQixXQUFXO09BQ2hDO0FBQUEscURBQUEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsRUFBWCxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUEsQ0FEWixDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBRCxHQUFTLEVBRlQsQ0FBQTtBQUFBLE1BS0EseUNBQUEsU0FBQSxDQUxBLENBQUE7QUFBQSxNQU9BLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxFQUFULEVBQWEsZ0JBQWIsQ0FQWixDQUFBO0FBU0EsTUFBQSxJQUFHLFlBQUEsSUFBaUIsWUFBWSxDQUFDLFFBQWpDO0FBQ0U7QUFBQSxhQUFBLFNBQUE7c0JBQUE7QUFDRSxVQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQUFBO0FBQ0Esa0JBQU8sQ0FBUDtBQUFBLGlCQUNPLFFBRFA7QUFBQSxpQkFDaUIsYUFEakI7QUFFSSxjQUFBLE1BQU8sQ0FBQSxDQUFBLENBQVAsR0FBWSxDQUFaLENBRko7QUFBQSxXQUZGO0FBQUEsU0FERjtPQVRBO0FBZ0JBLFdBQUEsYUFBQTs7d0JBQUE7QUFDRSxRQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQURGO0FBQUEsT0FoQkE7QUFBQSxNQW1CQSxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQWxCLEdBQ0U7QUFBQSxRQUFBLFdBQUEsRUFBYSxDQUFDLFNBQUQsQ0FBYjtBQUFBLFFBQ0EsR0FBQSxFQUFLLFNBQUMsRUFBRCxHQUFBO0FBQ0gsY0FBQSxNQUFBO0FBQUEsVUFBQSxNQUFBLEdBQVMsS0FBQSxDQUFNLEVBQUUsQ0FBQyxTQUFILENBQWEsWUFBYixDQUFBLEdBQTZCLENBQW5DLENBQXFDLENBQUMsSUFBdEMsQ0FBMkMsR0FBM0MsQ0FBVCxDQUFBO2lCQUNBLEVBQUUsQ0FBQyxnQkFBSCxDQUFvQixNQUFwQixFQUE0QixLQUE1QixFQUFtQyxRQUFuQyxFQUZHO1FBQUEsQ0FETDtPQXBCRixDQUFBO0FBQUEsTUF5QkEsSUFBQyxDQUFBLGVBQUQsSUFBQyxDQUFBLGFBQWUsVUFBVSxDQUFDLFlBQVgsQ0FBd0IsSUFBQyxDQUFBLFdBQVksQ0FBQSxDQUFBLENBQXJDLEVBQXlDO0FBQUEsUUFDdkQsSUFBQSxFQUFNLGtCQURpRDtBQUFBLFFBRXZELEtBQUEsRUFBTyxTQUZnRDtBQUFBLFFBR3ZELFdBQUEsRUFBYSxJQUgwQztBQUFBLFFBSXZELE9BQUEsRUFBUyxDQUo4QztBQUFBLFFBS3ZELE1BQUEsRUFBUSxVQUwrQztPQUF6QyxFQXpCaEIsQ0FBQTtBQUFBLE1BZ0NBLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQSxDQUFFLElBQUMsQ0FBQSxVQUFVLENBQUMsaUJBQVosQ0FBQSxDQUFGLENBaENYLENBQUE7QUFBQSxNQWlDQSxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQVQsQ0FBa0IsU0FBbEIsQ0FqQ0EsQ0FBQTtBQWtDQSxNQUFBLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFiO0FBQ0UsUUFBQSxJQUFDLENBQUEsR0FBRCxDQUFLLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBZixDQUFBLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxXQUFELENBQUEsQ0FEQSxDQURGO09BbkNXO0lBQUEsQ0ExRmI7O0FBQUEscUJBaUlBLE1BQUEsR0FBUSxTQUFDLFdBQUQsR0FBQTthQUNOLElBQUMsQ0FBQSxXQUFELENBQWEsV0FBYixFQURNO0lBQUEsQ0FqSVIsQ0FBQTs7QUFBQSxxQkFvSUEsR0FBQSxHQUFLLFNBQUMsS0FBRCxHQUFBO0FBQ0gsTUFBQSxJQUFHLEtBQUg7ZUFBYyxJQUFDLENBQUEsVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFoQixDQUF5QixFQUFBLEdBQUcsS0FBSCxHQUFTLFVBQWxDLEVBQWQ7T0FBQSxNQUFBO2VBQ0ssSUFBQyxDQUFBLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBaEIsQ0FBQSxFQURMO09BREc7SUFBQSxDQXBJTCxDQUFBOztBQUFBLHFCQXdJQSxXQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWCxVQUFBLDREQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBWCxDQUFBOzs7QUFDQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEtBQUMsQ0FBQSxRQUFTLENBQUEsSUFBQSxDQUFWOzs7dUJBQXNCOzs7O1lBQXRCLENBQU4sQ0FBQTtBQUFBLHFDQUFBOzs7O1VBQ0EsS0FBQyxDQUFBLEdBQUQsQ0FBSyxPQUFMO2lCQUNBLEtBQUMsQ0FBQSxXQUFELENBQUE7O2dCQUpXO0lBQUEsQ0F4SWIsQ0FBQTs7QUFBQSxxQkE4SUEsV0FBQSxHQUFhLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxVQUFVLENBQUMsY0FBWixDQUEyQixJQUFDLENBQUEsVUFBVSxDQUFDLEdBQUcsQ0FBQyxTQUFoQixDQUFBLENBQUEsR0FBOEIsQ0FBekQsRUFBSDtJQUFBLENBOUliLENBQUE7O0FBQUEscUJBZ0pBLGNBQUEsR0FBZ0IsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLFdBQUQsQ0FBYSxJQUFDLENBQUEsT0FBZCxFQUFIO0lBQUEsQ0FoSmhCLENBQUE7O0FBQUEscUJBa0pBLEtBQUEsR0FBTyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsR0FBRCxDQUFLLEVBQUwsRUFBSDtJQUFBLENBbEpQLENBQUE7O0FBQUEscUJBb0pBLGVBQUEsR0FBaUIsU0FBQSxHQUFBO0FBQ2YsVUFBQSxrQkFBQTtBQUFBLE1BQUEsSUFBQSxDQUFBLENBQU8sS0FBQSxHQUFRLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBUixDQUFQO0FBQ0UsUUFBQSxJQUFDLENBQUEsSUFBRCxDQUFNLFNBQU4sQ0FBQSxDQUFBO0FBQ0EsZUFBTyxJQUFQLENBRkY7T0FBQTtBQUlBO0FBQ0UsUUFBQSxRQUFBLEdBQVcsSUFBSSxDQUFDLE9BQUwsQ0FBYSxLQUFiLEVBQW9CO0FBQUEsVUFBQSxJQUFBLEVBQU0sSUFBTjtBQUFBLFVBQVUsT0FBQSxFQUFTLFFBQW5CO1NBQXBCLENBQVgsQ0FBQTtBQUFBLFFBQ0EsSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLENBREEsQ0FBQTtBQUFBLFFBRUEsSUFBQyxDQUFBLElBQUQsQ0FBTSxTQUFOLENBRkEsQ0FBQTtBQUdBLGVBQU8sSUFBUCxDQUpGO09BQUEsY0FBQTtBQU1FLFFBREksVUFDSixDQUFBO0FBQUEsUUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLGlCQUFULENBQTJCLENBQTNCLENBQUEsQ0FBQTtBQUNBLGVBQU8sS0FBUCxDQVBGO09BTGU7SUFBQSxDQXBKakIsQ0FBQTs7QUFBQSxxQkFrS0EsY0FBQSxHQUFnQixTQUFBLEdBQUE7QUFDZCxVQUFBLDBCQUFBO0FBQUEsTUFBQSxJQUFBLENBQUEsQ0FBTyxLQUFBLEdBQVEsSUFBQyxDQUFBLEdBQUQsQ0FBQSxDQUFSLENBQVA7QUFDRSxRQUFBLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUFBLENBQUE7QUFDQSxlQUFPLElBQVAsQ0FGRjtPQUFBO0FBSUE7QUFDRSxRQUFBLFFBQUEsR0FBVyxTQUFTLENBQUMsS0FBVixDQUFnQixLQUFoQixFQUF1QjtBQUFBLFVBQUMsZUFBQSxFQUFpQixJQUFsQjtBQUFBLFVBQXdCLE1BQUEsRUFBUSxJQUFoQztTQUF2QixDQUFYLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxHQUFELENBQUssRUFBQSxHQUFHLFFBQVEsQ0FBQyxJQUFqQixDQURBLENBQUE7QUFBQSxRQUVBLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUZBLENBQUE7QUFHQSxlQUFPLElBQVAsQ0FKRjtPQUFBLGNBQUE7QUFNRSxRQURJLFVBQ0osQ0FBQTtBQUFBLFFBQUEsTUFBQSxHQUFTLElBQUMsQ0FBQSxPQUFPLENBQUMsaUJBQVQsQ0FBMkIsQ0FBM0IsQ0FBVCxDQUFBO0FBQUEsUUFDQSxJQUFDLENBQUEsS0FBRCxDQUFPLE1BQVAsQ0FEQSxDQUFBO0FBRUEsZUFBTyxLQUFQLENBUkY7T0FMYztJQUFBLENBbEtoQixDQUFBOztBQUFBLHFCQWlMQSxhQUFBLEdBQWUsU0FBQyxDQUFELEdBQUE7QUFDYixNQUFBLENBQUMsQ0FBQyxlQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxDQUFDLENBQUMsY0FBRixDQUFBLENBREEsQ0FBQTthQUVBLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBUixDQUFvQixXQUFwQixFQUFpQyxDQUFDLENBQUMsSUFBRixLQUFVLFVBQTNDLEVBSGE7SUFBQSxDQWpMZixDQUFBOztBQUFBLHFCQXNMQSxpQkFBQSxHQUFtQixTQUFDLENBQUQsR0FBQTtBQUVqQixVQUFBLCtCQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsYUFBRCxDQUFlLENBQWYsQ0FBQSxDQUFBO0FBR0EsTUFBQSxJQUF1Qix1QkFBdkI7QUFBQSxRQUFBLENBQUEsR0FBSSxDQUFDLENBQUMsYUFBTixDQUFBO09BSEE7QUFBQSxNQUlBLEtBQUEsR0FBUSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQVQsSUFBa0IsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUp6QyxDQUFBO0FBT0E7V0FBQSw0Q0FBQTt5QkFBQTtBQUFBLHNCQUFBLElBQUMsQ0FBQSxTQUFELENBQVcsSUFBWCxFQUFBLENBQUE7QUFBQTtzQkFUaUI7SUFBQSxDQXRMbkIsQ0FBQTs7QUFBQSxxQkFpTUEsU0FBQSxHQUFXLFNBQUMsSUFBRCxHQUFBO0FBQ1QsVUFBQSxJQUFBO0FBQUEsTUFBQyxPQUFRLEtBQVIsSUFBRCxDQUFBO0FBQ0EsTUFBQSxJQUFHLG9CQUFvQixDQUFDLElBQXJCLENBQTBCLElBQTFCLENBQUg7ZUFDRSxJQUFDLENBQUEsVUFBRCxDQUFZLElBQVosRUFERjtPQUFBLE1BRUssSUFBRyw2QkFBNkIsQ0FBQyxJQUE5QixDQUFtQyxJQUFuQyxDQUFIO2VBQ0gsSUFBQyxDQUFBLFdBQUQsQ0FBYSxJQUFiLEVBREc7T0FBQSxNQUFBO2VBR0gsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWdCLG9CQUFBLEdBQW9CLElBQXBDLEVBSEc7T0FKSTtJQUFBLENBak1YLENBQUE7O0FBQUEscUJBME1BLFVBQUEsR0FBWSxTQUFDLElBQUQsR0FBQTtBQUNWLFVBQUEsMEZBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTtBQUFBLE1BQUMsT0FBUSxLQUFSLElBQUQsQ0FBQTtBQUFBLE1BQ0EsTUFBTSxDQUFDLFdBQVAsTUFBTSxDQUFDLFNBQVcsR0FEbEIsQ0FBQTtBQUFBLE1BRUEsT0FBQSxHQUFXLGdCQUFBLEdBQWdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBOUIsR0FBcUMsR0FGaEQsQ0FBQTtBQUFBLE1BR0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWdCLFNBQUEsR0FBUyxJQUFULEdBQWMsTUFBZCxHQUFvQixPQUFwQyxDQUhBLENBQUE7QUFBQSxNQUtBLElBQUMsQ0FBQSxjQUFELElBQUMsQ0FBQSxZQUFjLEdBQUEsQ0FBQSxVQUxmLENBQUE7OztBQU1BOzs7O1lBQUEsQ0FBQTtBQUFBLFVBQU0sS0FBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCO0FBQUEsWUFBQyxJQUFBLEVBQU0sSUFBUDtXQUFyQjs7O2dCQUF5Qzt1QkFBUTs7OztZQUFqRCxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztBQUNBLFVBQUEsSUFBbUMsTUFBQSxLQUFVLE9BQTdDO0FBQUEsbUJBQU8sS0FBQyxDQUFBLEdBQUQsQ0FBTSxTQUFBLEdBQVMsT0FBZixDQUFQLENBQUE7O1VBRUEsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFkLENBQW1CLE9BQW5CO1VBQ0EsS0FBQTtBQUFRLG9CQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLG1CQUNELFFBREM7dUJBQ2dCLElBQUEsR0FBSSxJQUFKLEdBQVMsZUFBVCxHQUNmLE9BRGUsR0FDUCxJQURPLEdBRTNCLENBQUMsSUFBQyxDQUFBLEdBQUQsQ0FBQSxDQUFNLENBQUMsSUFBUCxDQUFBLENBQUQsRUFIVztBQUFBLG1CQUtELFNBTEM7dUJBS2lCLEtBQUEsR0FBSyxJQUFMLEdBQVUsbUJBQVYsR0FDWixPQURZLEdBQ0osSUFESSxHQUU1QixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBUFc7QUFBQTs7VUFTUixLQUFDLENBQUEsR0FBRCxDQUFLLEtBQUw7aUJBQ0EsS0FBQyxDQUFBLFVBQVUsQ0FBQyxjQUFaLENBQTJCLENBQTNCOztnQkFyQlU7SUFBQSxDQTFNWixDQUFBOztBQUFBLHFCQWlPQSxXQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWCxVQUFBLHVGQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7QUFBQSxNQUFDLE9BQVEsS0FBUixJQUFELENBQUE7O1FBQ0EsTUFBTSxDQUFDLGNBQWU7T0FEdEI7QUFBQSxNQUVBLE9BQUEsR0FBVyxxQkFBQSxHQUFxQixNQUFNLENBQUMsV0FBVyxDQUFDLE1BQXhDLEdBQStDLEdBRjFELENBQUE7QUFBQSxNQUdBLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFnQixTQUFBLEdBQVMsSUFBVCxHQUFjLE1BQWQsR0FBb0IsT0FBcEMsQ0FIQSxDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsY0FBRCxJQUFDLENBQUEsWUFBYyxHQUFBLENBQUEsVUFMZixDQUFBOzs7QUFNQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEtBQUMsQ0FBQSxTQUFTLENBQUMsU0FBWCxDQUFxQjtBQUFBLFlBQUMsSUFBQSxFQUFNLElBQVA7QUFBQSxZQUFhLE1BQUEsRUFBUSxNQUFyQjtXQUFyQjs7O2dCQUF5RDt1QkFBUTs7OztZQUFqRSxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztBQUNBLFVBQUEsSUFBZ0MsTUFBQSxLQUFVLE9BQTFDO0FBQUEsbUJBQU8sS0FBQyxDQUFBLEdBQUQsQ0FBTSxTQUFBLEdBQVMsSUFBZixDQUFQLENBQUE7O1VBRUEsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFuQixDQUF3QixJQUF4QjtVQUNBLEtBQUE7QUFBUSxvQkFBTyxJQUFDLENBQUEsSUFBRCxDQUFBLENBQVA7QUFBQSxtQkFDRCxRQURDO3VCQUNnQixJQUFBLEdBQUksSUFBSixHQUFTLGlGQUFULEdBRVcsT0FGWCxHQUVtQix5RkFGbkIsR0FLRSxPQUxGLEdBS1UsZ0JBTFYsR0FNZCxPQU5jLEdBTU4sSUFOTSxHQU8zQixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBUlc7QUFBQSxtQkFVRCxTQVZDO3VCQVVpQixLQUFBLEdBQUssSUFBTCxHQUFVLG9GQUFWLEdBRVksT0FGWixHQUVvQiwrRkFGcEIsR0FLRSxPQUxGLEdBS1UscUJBTFYsR0FNWCxPQU5XLEdBTUgsSUFORyxHQU81QixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBakJXO0FBQUE7O1VBbUJSLEtBQUMsQ0FBQSxHQUFELENBQUssS0FBTDtpQkFDQSxLQUFDLENBQUEsVUFBVSxDQUFDLGNBQVosQ0FBMkIsQ0FBM0I7O2dCQS9CVztJQUFBLENBak9iLENBQUE7O0FBQUEscUJBa1FBLGNBQUEsR0FBZ0IsU0FBQyxNQUFELEdBQUE7QUFDZCxVQUFBLEtBQUE7O2FBQVMsQ0FBQyxjQUFlO09BQXpCO0FBQ0EsTUFBQSxJQUF5QyxlQUFVLElBQUMsQ0FBQSxRQUFRLENBQUMsV0FBcEIsRUFBQSxNQUFBLEtBQXpDO2VBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBdEIsQ0FBMkIsTUFBM0IsRUFBQTtPQUZjO0lBQUEsQ0FsUWhCLENBQUE7O2tCQUFBOztLQURtQixLQUFLLENBQUMsV0FSM0IsQ0FBQTs7QUFBQSxFQStRQSxNQUFNLENBQUMsT0FBUCxHQUFpQixNQS9RakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSxpQ0FBQTtJQUFBOzttU0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBVyxPQUFBLENBQVEsT0FBUixDQUFYLENBQUE7O0FBQUEsRUFDQSxJQUFBLEdBQVcsT0FBQSxDQUFRLG9CQUFSLENBRFgsQ0FBQTs7QUFBQSxFQUVBLEtBQUEsR0FBVyxPQUFBLENBQVEsVUFBUixDQUZYLENBQUE7O0FBQUEsRUFLQSxNQUFBLEdBQVMsU0FBQSxHQUFBO0FBQ1AsUUFBQSxxQ0FBQTtBQUFBLElBRFEscUJBQU0sOERBQ2QsQ0FBQTtBQUFBLFNBQUEsMkNBQUE7cUJBQUE7QUFBQSxXQUFBLFVBQUE7eUJBQUE7QUFBQSxRQUFBLElBQUssQ0FBQSxHQUFBLENBQUwsR0FBWSxLQUFaLENBQUE7QUFBQSxPQUFBO0FBQUEsS0FBQTtXQUNBLEtBRk87RUFBQSxDQUxULENBQUE7O0FBQUEsRUFVTTtBQUNKLDRCQUFBLENBQUE7O0FBQUEsb0JBQUEsU0FBQSxHQUFXLG9CQUFYLENBQUE7O0FBQUEsb0JBRUEsWUFBQSxHQUNFO0FBQUEsTUFBQSxlQUFBLEVBQWlCLFFBQWpCO0FBQUEsTUFDQSxXQUFBLEVBQWEsS0FEYjtBQUFBLE1BRUEsU0FBQSxFQUFXLEtBRlg7S0FIRixDQUFBOztBQUFBLG9CQU9BLE1BQUEsR0FBUSxTQUFBLEdBQUEsQ0FQUixDQUFBOztBQUFBLG9CQVNBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixNQUFBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxNQUFWLENBQWlCLElBQUMsQ0FBQSxNQUFsQixDQUFBLENBQUE7YUFDQSxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsRUFBVixDQUFhLHFCQUFiLEVBQW9DLElBQUMsQ0FBQSxNQUFyQyxFQUZVO0lBQUEsQ0FUWixDQUFBOztBQUFBLG9CQWFBLE9BQUEsR0FBUyxTQUFBLEdBQUE7QUFDUCxNQUFBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxHQUFWLENBQWMsUUFBZCxFQUF3QixJQUFDLENBQUEsTUFBekIsQ0FBQSxDQUFBO2FBQ0EsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLEdBQVYsQ0FBYyxxQkFBZCxFQUFxQyxJQUFDLENBQUEsTUFBdEMsRUFGTztJQUFBLENBYlQsQ0FBQTs7QUFBQSxvQkFpQkEsU0FBQSxHQUFlLEVBakJmLENBQUE7O0FBQUEsb0JBa0JBLFVBQUEsR0FBZSxTQUFDLEVBQUQsR0FBQTthQUFRLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixFQUFoQixFQUFSO0lBQUEsQ0FsQmYsQ0FBQTs7QUFBQSxvQkFtQkEsYUFBQSxHQUFlLFNBQUMsRUFBRCxHQUFBO2FBQVEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUFYLENBQW1CLElBQUMsQ0FBQSxTQUFTLENBQUMsT0FBWCxDQUFtQixFQUFuQixDQUFuQixFQUEyQyxDQUEzQyxFQUFSO0lBQUEsQ0FuQmYsQ0FBQTs7QUFBQSxvQkFxQkEsR0FBQSxHQUFLLFNBQUMsTUFBRCxHQUFBO0FBQ0gsVUFBQSxhQUFBOztRQURJLFNBQVMsU0FBQSxHQUFBO09BQ2I7QUFBQSxNQUFBLElBQUMsQ0FBQSxVQUFELENBQVksTUFBWixDQUFBLENBQUE7QUFBQSxNQUVBLGFBQUEsR0FBZ0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTtlQUFBLFNBQUEsR0FBQTtBQUVkLGNBQUEsa0JBQUE7QUFBQSxVQUFBLEtBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxDQUFBLENBQUEsQ0FBQTtBQUVBO0FBQUEsZUFBQSwyQ0FBQTswQkFBQTtBQUFBLFlBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtBQUFBLFdBRkE7QUFBQSxVQUlBLEtBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixLQUFDLENBQUEsS0FBbEIsQ0FKQSxDQUFBO0FBQUEsVUFNQSxLQUFDLENBQUEsS0FBRCxHQUFTLGdCQUFBLENBQWlCLGFBQWpCLENBTlQsQ0FBQTtpQkFRQSxLQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBQSxFQVZjO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FGaEIsQ0FBQTthQWFBLElBQUMsQ0FBQSxLQUFELEdBQVMsZ0JBQUEsQ0FBaUIsYUFBakIsRUFkTjtJQUFBLENBckJMLENBQUE7O0FBcUNhLElBQUEsZUFBQyxPQUFELEVBQVUsWUFBVixHQUFBOztRQUFVLGVBQWU7T0FDcEM7QUFBQSxNQUFBLHdDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsWUFBRCxHQUFxQixNQUFBLENBQU8sRUFBUCxFQUFXLElBQUMsQ0FBQSxZQUFaLEVBQTBCLFlBQTFCLENBRnJCLENBQUE7QUFBQSxNQUlBLElBQUMsQ0FBQSxLQUFELEdBQXlCLElBQUEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFDLENBQUEsWUFBWSxDQUFDLGVBQXpCLENBSnpCLENBQUE7QUFBQSxNQUtBLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxHQUFxQixJQUFDLENBQUEsRUFBRSxDQUFDLEtBQUosQ0FBQSxDQUxyQixDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsR0FBcUIsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQUEsQ0FOckIsQ0FBQTtBQUFBLE1BT0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxXQUFQLEdBQXFCLElBQUMsQ0FBQSxZQUFZLENBQUMsV0FQbkMsQ0FBQTtBQUFBLE1BU0EsTUFBTSxDQUFDLEtBQVAsR0FBZSxJQUFDLENBQUEsS0FUaEIsQ0FBQTtBQUFBLE1BVUEsTUFBTSxDQUFDLEdBQVAsR0FBZSxJQUFDLENBQUEsS0FBRCxDQUFPLElBQUMsQ0FBQSxHQUFSLENBVmYsQ0FBQTtBQUFBLE1BV0EsTUFBTSxDQUFDLElBQVAsR0FBZSxJQVhmLENBQUE7QUFBQSxNQWFBLElBQUMsQ0FBQSxNQUFELENBQUEsQ0FiQSxDQUFBO0FBQUEsTUFjQSxJQUFDLENBQUEsVUFBRCxDQUFBLENBZEEsQ0FBQTtBQUFBLE1BZUEsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFDLENBQUEsTUFmYixDQUFBO0FBQUEsTUFnQkEsSUFBQyxDQUFBLGNBQUQsR0FBa0IsSUFBQyxDQUFBLE1BaEJuQixDQURXO0lBQUEsQ0FyQ2I7O0FBQUEsb0JBd0RBLE1BQUEsR0FBUSxTQUFBLEdBQUE7QUFFTixNQUFBLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSSxDQUFDLGtCQUFMLENBQXdCLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBL0IsRUFDd0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUQvQixFQUV3QixJQUZ4QixFQUd3QixJQUFDLENBQUEsWUFBWSxDQUFDLFdBSHRDLEVBSXdCLElBQUMsQ0FBQSxZQUFZLENBQUMsU0FKdEMsQ0FBWixDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsS0FBRCxHQUFZLEdBQUEsQ0FBQSxLQUxaLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFELEdBQVksQ0FBQSxDQUFFLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBVCxDQU5aLENBQUE7QUFBQSxNQVNBLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLElBQUMsQ0FBQSxRQVRuQixDQUFBO0FBQUEsTUFVQSxNQUFNLENBQUMsS0FBUCxHQUFrQixJQUFDLENBQUEsS0FWbkIsQ0FBQTtBQUFBLE1BWUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxJQUFyQixDQVpBLENBQUE7QUFBQSxNQWFBLElBQUMsQ0FBQSxTQUFELENBQUEsQ0FiQSxDQUFBO2FBY0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsSUFBQyxDQUFBLE1BQVosRUFoQk07SUFBQSxDQXhEUixDQUFBOztBQUFBLG9CQTBFQSxTQUFBLEdBQVcsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLE1BQU0sQ0FBQyxHQUFSLENBQVk7QUFBQSxRQUFBLE9BQUEsRUFBUyxNQUFUO09BQVosRUFBSDtJQUFBLENBMUVYLENBQUE7O0FBQUEsb0JBMkVBLFNBQUEsR0FBVyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLEdBQVIsQ0FBWTtBQUFBLFFBQUEsT0FBQSxFQUFTLE9BQVQ7QUFBQSxRQUFrQixRQUFBLEVBQVUsVUFBNUI7T0FBWixFQUFIO0lBQUEsQ0EzRVgsQ0FBQTs7QUFBQSxvQkE2RUEsTUFBQSxHQUFRLFNBQUEsR0FBQTtBQUNOLFVBQUEseUJBQUE7QUFBQSxNQURPLGtFQUNQLENBQUE7QUFBQSxXQUFBLCtDQUFBOzZCQUFBO0FBQ0UsUUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFUO0FBQ0UsVUFBQSxLQUFLLENBQUMsS0FBTixHQUFjLElBQWQsQ0FBQTtBQUFBLFVBQ0EsS0FBQSxHQUFRLEtBQUssQ0FBQyxPQURkLENBREY7U0FBQTtBQUFBLFFBR0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFQLENBQWdCLEtBQWhCLENBSEEsQ0FERjtBQUFBLE9BQUE7YUFLQSxLQU5NO0lBQUEsQ0E3RVIsQ0FBQTs7QUFBQSxvQkFxRkEsUUFBQSxHQUFVLFNBQUEsR0FBQSxDQXJGVixDQUFBOztBQUFBLG9CQXVGQSxNQUFBLEdBQVEsU0FBQSxHQUFBO0FBQ04sVUFBQSxtQkFBQTtBQUFBLE1BRE8sa0VBQ1AsQ0FBQTtBQUFBLE1BQUEsSUFBQSxDQUFBLFFBQTBDLENBQUMsTUFBM0M7QUFBQSxRQUFBLFFBQUEsR0FBVyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQWxCLENBQUE7T0FBQTtBQUVBLFdBQUEsMkNBQUE7NkJBQUE7QUFDRSxRQUFBLElBQUcsS0FBSyxDQUFDLE9BQVQ7QUFDRSxVQUFBLEtBQUssQ0FBQyxLQUFOLEdBQWMsSUFBZCxDQUFBO0FBQUEsVUFDQSxLQUFBLEdBQVEsS0FBSyxDQUFDLE9BRGQsQ0FERjtTQUFBO0FBQUEsUUFHQSxJQUFDLENBQUEsS0FBSyxDQUFDLFdBQVAsQ0FBbUIsS0FBbkIsQ0FIQSxDQURGO0FBQUEsT0FGQTthQU9BLEtBUk07SUFBQSxDQXZGUixDQUFBOztBQUFBLG9CQWlHQSxjQUFBLEdBQWdCLFNBQUEsR0FBQSxDQWpHaEIsQ0FBQTs7QUFBQSxvQkFtR0EsT0FBQSxHQUFTLFNBQUEsR0FBQTtBQUNQLE1BQUEsSUFBQyxDQUFBLGNBQUQsQ0FBQSxDQUFBLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBREEsQ0FBQTthQUVBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFITztJQUFBLENBbkdULENBQUE7O0FBQUEsb0JBd0dBLFVBQUEsR0FBWSxTQUFDLEtBQUQsR0FBQTthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQWhCLENBQXlCLEtBQUssQ0FBQyxPQUFOLElBQWlCLEtBQTFDLEVBQVg7SUFBQSxDQXhHWixDQUFBOztBQUFBLG9CQTBHQSxZQUFBLEdBQWMsU0FBQSxHQUFBO0FBQ1osVUFBQSxRQUFBO0FBQUEsTUFEYSxrRUFDYixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxhQUFnQixRQUFoQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsTUFBRCxhQUFRLFFBQVIsRUFGWTtJQUFBLENBMUdkLENBQUE7O0FBQUEsb0JBOEdBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixVQUFBLFFBQUE7QUFBQSxNQURXLGtFQUNYLENBQUE7YUFBQSxJQUFDLENBQUEsV0FBRCxhQUFhLGFBQUEsUUFBQSxDQUFBLFFBQWEsQ0FBQSxDQUFBLENBQWIsQ0FBYixFQURVO0lBQUEsQ0E5R1osQ0FBQTs7QUFBQSxvQkFpSEEsV0FBQSxHQUFhLFNBQUEsR0FBQTtBQUNYLFVBQUEsc0JBQUE7QUFBQSxNQURZLHlHQUFhLDBCQUN6QixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxhQUFnQixRQUFoQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsYUFBRCxhQUFlLGFBQUEsUUFBQSxDQUFBLFFBQWEsQ0FBQSxRQUFBLENBQWIsQ0FBZixFQUZXO0lBQUEsQ0FqSGIsQ0FBQTs7QUFBQSxvQkFxSEEsYUFBQSxHQUFlLFNBQUEsR0FBQTtBQUNiLFVBQUEsa0RBQUE7QUFBQSxNQURjLHlHQUFhLDBCQUMzQixDQUFBO0FBQUEsV0FBQSwrQ0FBQTs2QkFBQTtBQUNFLFFBQUEsSUFBRyxLQUFLLENBQUMsT0FBVDtBQUNFLFVBQUEsS0FBSyxDQUFDLEtBQU4sR0FBYyxJQUFkLENBQUE7QUFBQSxVQUNBLEtBQUEsR0FBUSxLQUFLLENBQUMsT0FEZCxDQURGO1NBREY7QUFBQSxPQUFBO0FBSUEsV0FBQSxpREFBQTs2QkFBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUFQLENBQW1CLEtBQUssQ0FBQyxPQUFOLElBQWlCLEtBQXBDLEVBQTRDLFFBQTVDLENBQUEsQ0FBQTtBQUFBLE9BSkE7YUFLQSxLQU5hO0lBQUEsQ0FySGYsQ0FBQTs7aUJBQUE7O0tBRGtCLEtBQUssQ0FBQyxXQVYxQixDQUFBOztBQUFBLEVBeUlBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEtBeklqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLEtBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQ0U7QUFBQSxJQUFBLE1BQUEsRUFBUSxTQUFDLElBQUQsRUFBTyxFQUFQLEdBQUE7YUFBYyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxFQUFBLEdBQUssSUFBTixDQUFoQixHQUE4QixLQUE1QztJQUFBLENBQVI7QUFBQSxJQUVBLEdBQUEsRUFBSyxTQUFDLEdBQUQsRUFBTSxRQUFOLEVBQWdCLFFBQWhCLEVBQTBCLFNBQTFCLEVBQXFDLFNBQXJDLEdBQUE7YUFDSCxDQUFDLENBQUMsU0FBQSxHQUFZLFNBQWIsQ0FBQSxHQUEwQixDQUFDLENBQUMsR0FBQSxHQUFNLFFBQVAsQ0FBQSxHQUFtQixDQUFDLFFBQUEsR0FBVyxRQUFaLENBQXBCLENBQTNCLENBQUEsR0FBeUUsVUFEdEU7SUFBQSxDQUZMO0FBQUEsSUFLQSxlQUFBLEVBQWlCLFNBQUMsTUFBRCxHQUFBO0FBQ2YsTUFBQSxNQUFBLEdBQVksTUFBSCxHQUFlLE1BQWYsR0FBMkIsR0FBcEMsQ0FBQTtBQUNBLE1BQUEsSUFBRyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsTUFBbkI7ZUFBK0IsQ0FBQSxFQUEvQjtPQUFBLE1BQUE7ZUFBdUMsRUFBdkM7T0FGZTtJQUFBLENBTGpCO0FBQUEsSUFTQSxTQUFBLEVBQVcsU0FBQyxJQUFELEVBQU8sRUFBUCxHQUFBO2FBQWMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxFQUFBLEVBQUEsR0FBTyxJQUFSLENBQWhCLEdBQWdDLElBQTNDLEVBQWQ7SUFBQSxDQVRYO0FBQUEsSUFXQSxVQUFBLEVBQVksU0FBQyxNQUFELEdBQUE7QUFDVixNQUFBLE1BQUEsR0FBWSxNQUFILEdBQWUsTUFBZixHQUEyQixHQUFwQyxDQUFBO2FBQ0EsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLE9BRk47SUFBQSxDQVhaO0dBREYsQ0FBQTs7QUFBQSxFQWlCQSxNQUFNLENBQUMsT0FBUCxHQUFpQixLQWpCakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSx3Q0FBQTs7OzJDQUFBOztBQUFBLEVBQU07MkJBQ0o7O0FBQUEsd0JBQUEsT0FBQSxHQUFTLElBQVQsQ0FBQTs7QUFBQSx3QkFFQSxPQUFBLEdBQVMsU0FBQyxRQUFELEdBQUE7QUFDUCxVQUFBLENBQUE7QUFBQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FBWCxDQUFBO0FBQ0E7aUJBQ0ssUUFBSCxDQUFBLEVBREY7U0FBQSxjQUFBO0FBR0UsVUFESSxVQUNKLENBQUE7QUFBQSxnQkFBTSxDQUFOLENBSEY7U0FBQTtBQUtFLFVBQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFYLENBTEY7U0FGRjtPQUFBLE1BQUE7ZUFTSyxRQUFILENBQUEsRUFURjtPQURPO0lBQUEsQ0FGVCxDQUFBOztBQUFBLHdCQWNBLEdBQUEsR0FBSyxHQWRMLENBQUE7O0FBQUEsd0JBZUEsUUFBQSxHQUFVLENBZlYsQ0FBQTs7QUFBQSx3QkFpQkEsS0FBQSxHQUFPLFNBQUMsT0FBRCxHQUFBO0FBQ0wsVUFBQSxtREFBQTtBQUFBLDhCQUFBLENBQUE7QUFBQSw0REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxJQUFDLENBQUEsWUFBa0IsSUFBQSxTQUFBLENBQVUsSUFBQyxDQUFBLEdBQVgsRUFBZ0IsSUFBQyxDQUFBLFFBQWpCLEVBQW5CLENBQUE7QUFDQSxNQUFBLElBQUEsQ0FBQSxPQUFBO0FBQUEsZUFBTyxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQWxCLENBQUE7T0FEQTs7O0FBRUE7Ozs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsU0FBUyxDQUFDLFdBQVg7O1lBQUEsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7aUJBQ0EsT0FBQSxDQUFRLEtBQUMsQ0FBQSxTQUFTOzs7WUFBbEI7O2dCQUpLO0lBQUEsQ0FqQlAsQ0FBQTs7QUFBQSx3QkF1QkEsVUFBQSxHQUFZLFNBQUEsR0FBQTtBQUNWLE1BQUEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFYLEdBQW1CLEVBQW5CLENBQUE7YUFDQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsR0FBbUIsRUFGVDtJQUFBLENBdkJaLENBQUE7O0FBQUEsd0JBMkJBLFFBQUEsR0FDRTtBQUFBLE1BQUEsTUFBQSxFQUFRLFNBQVI7QUFBQSxNQUNBLFFBQUEsRUFBVSxPQURWO0tBNUJGLENBQUE7O0FBQUEsd0JBK0JBLFFBQUEsR0FBVSxTQUFDLE1BQUQsRUFBYyxRQUFkLEdBQUE7QUFDUixVQUFBLHNCQUFBOztRQURTLFNBQVM7T0FDbEI7O1FBRHNCLFdBQVc7T0FDakM7QUFBQSxNQUFBLElBQWtFLFFBQUEsS0FBWSxJQUE5RTtBQUFBLFFBQUEsUUFBQSxHQUFpQixDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QixRQUF4QixFQUFrQyxNQUFsQyxDQUFqQixDQUFBO09BQUE7QUFBQSxNQUNBLE1BQUEsR0FBaUIsR0FBQSxDQUFBLFVBRGpCLENBQUE7QUFBQSxNQUVBLE1BQU0sQ0FBQyxNQUFQLEdBQWlCLFNBQUMsQ0FBRCxHQUFBO2VBQU8sUUFBUSxDQUFDLE9BQVQsQ0FBaUIsTUFBTSxDQUFDLE1BQXhCLEVBQVA7TUFBQSxDQUZqQixDQUFBO0FBQUEsTUFHQSxNQUFNLENBQUMsT0FBUCxHQUFpQixRQUFRLENBQUMsS0FIMUIsQ0FBQTtBQUFBLE1BS0EsSUFBQTtBQUFPLGdCQUFPLFFBQVEsQ0FBQyxNQUFoQjtBQUFBLGVBQ0EsYUFEQTttQkFDb0IsTUFBTSxDQUFDLGlCQUFQLENBQXlCLFFBQVEsQ0FBQyxJQUFsQyxFQUF3QyxRQUFRLENBQUMsUUFBakQsRUFEcEI7QUFBQSxlQUVBLGNBRkE7bUJBRW9CLE1BQU0sQ0FBQyxrQkFBUCxDQUEwQixRQUFRLENBQUMsSUFBbkMsRUFBeUMsUUFBUSxDQUFDLFFBQWxELEVBRnBCO0FBQUEsZUFHQSxTQUhBO21CQUdvQixNQUFNLENBQUMsYUFBUCxDQUFxQixRQUFRLENBQUMsSUFBOUIsRUFBb0MsUUFBUSxDQUFDLFFBQTdDLEVBSHBCO0FBQUEsZUFJQSxNQUpBO21CQUlvQixNQUFNLENBQUMsVUFBUCxDQUFrQixRQUFRLENBQUMsSUFBM0IsRUFBaUMsUUFBUSxDQUFDLFFBQTFDLEVBSnBCO0FBQUE7VUFMUCxDQUFBO2FBV0EsT0FaUTtJQUFBLENBL0JWLENBQUE7O0FBQUEsd0JBNkNBLFNBQUEsR0FBVyxTQUFDLE1BQUQsRUFBYyxRQUFkLEdBQUE7QUFDVCxVQUFBLGtEQUFBOztRQURVLFNBQVM7T0FDbkI7O1FBRHVCLFdBQVc7T0FDbEM7QUFBQSxNQUFBLEVBQUEsR0FBTSxHQUFBLENBQUEsSUFBUSxDQUFDLFVBQWYsQ0FBQTtBQUFBLE1BRUEsUUFBQSxHQUFlLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUMsQ0FBQSxRQUFkLEVBQXdCLFFBQXhCLEVBQWtDLE1BQWxDLENBRmYsQ0FBQTtBQUFBLE1BR0EsWUFBQSxHQUFlLFFBQVEsQ0FBQyxPQUh4QixDQUFBO0FBQUEsTUFJQSxVQUFBLEdBQWUsUUFBUSxDQUFDLEtBSnhCLENBQUE7QUFBQSxNQU1BLFFBQVEsQ0FBQyxPQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztxQkFBTzs7Ozs7O1FBTjFDLENBQUE7QUFBQSxNQU9BLFFBQVEsQ0FBQyxLQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sT0FBTixDQUFjOzs7O3FCQUFPOzs7Ozs7UUFQeEMsQ0FBQTtBQUFBLE1BU0EsT0FBQSxHQUFVLFNBQUMsSUFBRCxHQUFBO0FBQ1IsWUFBQSxtRUFBQTtBQUFBLGdDQUFBLENBQUE7QUFBQSw4REFBQSxDQUFBO0FBQUEsUUFBQSxNQUFBLEdBQVMsSUFBQyxDQUFBLFFBQUQsQ0FBVSxRQUFWLEVBQW9CLElBQXBCLENBQVQsQ0FBQTs7O0FBQ0E7OztjQUFBLENBQUE7QUFBQSxZQUFNLEVBQUUsQ0FBQyxJQUFIOzs7eUJBQWM7Ozs7Y0FBZCxDQUFOLENBQUE7QUFBQSx1Q0FBQTs7OztBQUNBLG9CQUFPLE1BQVA7QUFBQSxtQkFDTyxTQURQO0FBQ3NCLGdCQUFBLFlBQUEsQ0FBYSxNQUFNLENBQUMsTUFBcEIsQ0FBQSxDQUR0QjtBQUNPO0FBRFAsbUJBRU8sT0FGUDtBQUVvQixnQkFBQSxVQUFBLENBQVcsQ0FBWCxDQUFBLENBRnBCO0FBQUE7bUJBR0EsSUFBQSxDQUFBOztrQkFOUTtNQUFBLENBVFYsQ0FBQTtBQUFBLE1BaUJBLE9BQU8sQ0FBQyxLQUFSLEdBQWdCLFNBQUMsVUFBRCxHQUFBO0FBQ2QsWUFBQSxLQUFBO0FBQUEsUUFBQSxJQUFtQyxNQUFuQztBQUFBLGlCQUFPLE1BQU0sQ0FBQyxLQUFQLENBQWEsVUFBYixDQUFQLENBQUE7U0FBQTtBQUFBLFFBQ0EsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFELENBQUEsQ0FBUSxDQUFDLE9BQVQsQ0FBaUIsT0FBakIsQ0FEUixDQUFBO0FBRUEsUUFBQSxJQUE2QixLQUFBLEdBQVEsQ0FBQSxDQUFyQztBQUFBLFVBQUEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFRLENBQUMsTUFBVCxDQUFnQixLQUFoQixFQUF1QixDQUF2QixDQUFBLENBQUE7U0FGQTtBQUdBLFFBQUEsSUFBc0IsSUFBQyxDQUFBLFNBQXZCO0FBQUEsVUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsRUFBQSxDQUFBO1NBSEE7ZUFTQSxRQVZjO01BQUEsQ0FqQmhCLENBQUE7QUE2QkEsTUFBQSxJQUFBLENBQUEsSUFBdUIsQ0FBQSxPQUF2QjtBQUFBLGVBQU8sT0FBUCxDQUFBO09BN0JBO0FBQUEsTUE4QkEsSUFBQyxDQUFBLEtBQUQsQ0FBTyxPQUFQLENBOUJBLENBQUE7YUErQkEsUUFoQ1M7SUFBQSxDQTdDWCxDQUFBOztBQUFBLHdCQStFQSxTQUFBLEdBQVcsU0FBQyxPQUFELEVBQVUsRUFBVixFQUFjLEtBQWQsR0FBQTtBQUNULFVBQUEsMEVBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTs7UUFEdUIsUUFBUTtPQUMvQjtBQUFBLE1BQUEsRUFBQSxHQUFTLElBQUEsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUFULENBQUE7QUFBQSxNQUVBLE9BQU8sQ0FBQyxPQUFSLEdBQWtCLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztxQkFBTzs7Ozs7O1FBRnpDLENBQUE7QUFBQSxNQUdBLE9BQU8sQ0FBQyxLQUFSLEdBQWtCLEVBQUUsQ0FBQyxFQUFILENBQU0sT0FBTixDQUFjOzs7O3FCQUFPOzs7Ozs7UUFIdkMsQ0FBQTtBQUtBLE1BQUEsSUFBRyxLQUFIO0FBQWMsUUFBQSxJQUFDLENBQUEsU0FBRCxDQUFXLE9BQVgsQ0FBQSxDQUFkO09BQUEsTUFBQTtBQUNLLFFBQUEsSUFBQyxDQUFBLFFBQUQsQ0FBVSxPQUFWLENBQUEsQ0FETDtPQUxBOzs7QUFRQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEVBQUUsQ0FBQyxJQUFIOzs7dUJBQWM7Ozs7WUFBZCxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztpQkFDQSxFQUFBLENBQUcsTUFBSCxFQUFXLE1BQUEsSUFBVSxDQUFyQjs7Z0JBVlM7SUFBQSxDQS9FWCxDQUFBOztxQkFBQTs7TUFERixDQUFBOztBQUFBLEVBNkZBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBN0ZqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaGdZQTtBQUFBLEVBQUEsT0FBQSxDQUFRLGFBQVIsQ0FBQSxDQUFBOztBQUFBLEVBRUEsT0FBQSxDQUFRLE9BQVIsQ0FGQSxDQUFBOztBQUFBLEVBR0EsT0FBQSxDQUFRLGlCQUFSLENBSEEsQ0FBQTs7QUFBQSxFQUlBLE9BQUEsQ0FBUSxtQkFBUixDQUpBLENBQUE7O0FBQUEsRUFLQSxPQUFBLENBQVEsaUJBQVIsQ0FMQSxDQUFBOztBQUFBLEVBT0EsT0FBQSxDQUFRLGNBQVIsQ0FQQSxDQUFBOztBQUFBLEVBUUEsT0FBQSxDQUFRLG1CQUFSLENBUkEsQ0FBQTs7QUFBQSxFQVdBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsT0FBQSxDQUFRLFNBQVIsQ0FYZixDQUFBOztBQUFBLEVBYUEsQ0FBQSxDQUFFLFNBQUEsR0FBQTtBQUNBLFFBQUEsR0FBQTtBQUFBLElBQUEsSUFBVSxNQUFNLENBQUMsR0FBakI7QUFBQSxZQUFBLENBQUE7S0FBQTtBQUFBLElBQ0EsR0FBQSxHQUFNLE9BQUEsQ0FBUSxzQkFBUixDQUROLENBQUE7V0FFQSxNQUFNLENBQUMsR0FBUCxHQUFpQixJQUFBLEdBQUEsQ0FBSTtBQUFBLE1BQUEsRUFBQSxFQUFJLENBQUEsQ0FBRSxNQUFGLENBQUo7S0FBSixFQUhqQjtFQUFBLENBQUYsQ0FiQSxDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLCtGQUFBO0lBQUE7OztzQkFBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFVLElBQUMsQ0FBQSxLQUFELElBQVUsT0FBQSxDQUFRLE9BQVIsQ0FBcEIsQ0FBQTs7QUFBQSxFQUNDLFFBQVMsTUFBVCxLQURELENBQUE7O0FBQUEsRUFLQSxJQUFBLEdBQ0U7QUFBQSxJQUFBLE1BQUEsRUFBUSxTQUFDLE1BQUQsR0FBQTthQUNOLE1BQUEsd0NBQVcsTUFBTSxDQUFDLGVBQWxCLElBQTRCLE1BQU0sQ0FBQyxJQUQ3QjtJQUFBLENBQVI7QUFBQSxJQUdBLE9BQUEsRUFBUyxJQUhUO0FBQUEsSUFLQSxPQUFBLEVBQVMsU0FBQyxRQUFELEdBQUE7QUFDUCxVQUFBLENBQUE7QUFBQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FBWCxDQUFBO0FBQ0E7aUJBQ0ssUUFBSCxDQUFBLEVBREY7U0FBQSxjQUFBO0FBR0UsVUFESSxVQUNKLENBQUE7QUFBQSxnQkFBTSxDQUFOLENBSEY7U0FBQTtBQUtFLFVBQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFYLENBTEY7U0FGRjtPQUFBLE1BQUE7ZUFTSyxRQUFILENBQUEsRUFURjtPQURPO0lBQUEsQ0FMVDtBQUFBLElBaUJBLEdBQUEsRUFBSyxHQWpCTDtBQUFBLElBa0JBLFFBQUEsRUFBVSxDQWxCVjtBQUFBLElBb0JBLEtBQUEsRUFBTyxTQUFDLE9BQUQsR0FBQTtBQUNMLFVBQUEsbURBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTtBQUFBLE1BQUEsSUFBQyxDQUFBLGNBQUQsSUFBQyxDQUFBLFlBQWtCLElBQUEsU0FBQSxDQUFVLElBQUMsQ0FBQSxHQUFYLEVBQWdCLElBQUMsQ0FBQSxRQUFqQixFQUFuQixDQUFBO0FBQ0EsTUFBQSxJQUFBLENBQUEsT0FBQTtBQUFBLGVBQU8sSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFsQixDQUFBO09BREE7OztBQUVBOzs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsU0FBUyxDQUFDLFdBQVg7O1lBQUEsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7aUJBQ0EsT0FBQSxDQUFRLEtBQUMsQ0FBQSxTQUFTOzs7WUFBbEI7O2dCQUpLO0lBQUEsQ0FwQlA7QUFBQSxJQTBCQSxVQUFBLEVBQVksU0FBQSxHQUFBO0FBQ1YsTUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsR0FBbUIsRUFBbkIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQixFQUZUO0lBQUEsQ0ExQlo7R0FORixDQUFBOztBQUFBLEVBb0NNO3NCQUNKOztBQUFBLG1CQUFBLFFBQUEsR0FDRTtBQUFBLE1BQUEsV0FBQSxFQUFhLGtCQUFiO0FBQUEsTUFDQSxRQUFBLEVBQVUsTUFEVjtBQUFBLE1BRUEsV0FBQSxFQUFhLEtBRmI7QUFBQSxNQUdBLE9BQUEsRUFBUztBQUFBLFFBQUMsa0JBQUEsRUFBb0IsZ0JBQXJCO09BSFQ7S0FERixDQUFBOztBQUFBLG1CQU1BLEtBQUEsR0FBTyxJQUFJLENBQUMsS0FOWixDQUFBOztBQUFBLG1CQVFBLElBQUEsR0FBTSxTQUFDLE1BQUQsRUFBUyxRQUFULEdBQUE7YUFDQSxJQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLENBQVAsRUFEQTtJQUFBLENBUk4sQ0FBQTs7QUFBQSxtQkFXQSxTQUFBLEdBQVcsU0FBQyxNQUFELEVBQVMsUUFBVCxHQUFBO0FBQ1QsVUFBQSw2RUFBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLElBQU4sQ0FBQTtBQUFBLE1BQ0EsRUFBQSxHQUFNLEdBQUEsQ0FBQSxJQUFRLENBQUMsVUFEZixDQUFBO0FBQUEsTUFHQSxRQUFBLEdBQWUsSUFBQyxDQUFBLFlBQUQsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLENBSGYsQ0FBQTtBQUFBLE1BSUEsWUFBQSxHQUFlLFFBQVEsQ0FBQyxPQUp4QixDQUFBO0FBQUEsTUFLQSxVQUFBLEdBQWUsUUFBUSxDQUFDLEtBTHhCLENBQUE7QUFBQSxNQU9BLFFBQVEsQ0FBQyxPQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztjQUFPO2NBQU07cUJBQVk7Ozs7OztRQVA1RCxDQUFBO0FBQUEsTUFRQSxRQUFRLENBQUMsS0FBVCxHQUFtQixFQUFFLENBQUMsRUFBSCxDQUFNLE9BQU4sQ0FBYzs7OztjQUFPO2NBQUs7cUJBQVk7Ozs7OztRQVJ6RCxDQUFBO0FBQUEsTUFVQSxPQUFBLEdBQVUsU0FBQyxJQUFELEdBQUE7QUFDUixZQUFBLDJEQUFBO0FBQUEsZ0NBQUEsQ0FBQTtBQUFBLDhEQUFBLENBQUE7QUFBQSxRQUFBLEdBQUEsR0FBVSxJQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sUUFBUCxDQUFWLENBQUE7OztBQUNBOzs7Y0FBQSxDQUFBO0FBQUEsWUFBTSxFQUFFLENBQUMsSUFBSDs7O3lCQUFjOzs7O2NBQWQsQ0FBTixDQUFBO0FBQUEsdUNBQUE7Ozs7QUFDQSxvQkFBTyxNQUFQO0FBQUEsbUJBQ08sU0FEUDtBQUNzQixnQkFBQSxZQUFBLENBQWEsSUFBYixFQUFtQixVQUFuQixFQUErQixHQUEvQixDQUFBLENBRHRCO0FBQ087QUFEUCxtQkFFTyxPQUZQO0FBRW9CLGdCQUFBLFVBQUEsQ0FBVyxHQUFYLEVBQWdCLFVBQWhCLEVBQTRCLEtBQTVCLENBQUEsQ0FGcEI7QUFBQTttQkFHQSxJQUFBLENBQUE7O2tCQU5RO01BQUEsQ0FWVixDQUFBO0FBQUEsTUFrQkEsT0FBTyxDQUFDLEtBQVIsR0FBZ0IsU0FBQyxVQUFELEdBQUE7QUFDZCxZQUFBLEtBQUE7QUFBQSxRQUFBLElBQWdDLEdBQWhDO0FBQUEsaUJBQU8sR0FBRyxDQUFDLEtBQUosQ0FBVSxVQUFWLENBQVAsQ0FBQTtTQUFBO0FBQUEsUUFDQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFRLENBQUMsT0FBVCxDQUFpQixPQUFqQixDQURSLENBQUE7QUFFQSxRQUFBLElBQTZCLEtBQUEsR0FBUSxDQUFBLENBQXJDO0FBQUEsVUFBQSxJQUFDLENBQUEsS0FBRCxDQUFBLENBQVEsQ0FBQyxNQUFULENBQWdCLEtBQWhCLEVBQXVCLENBQXZCLENBQUEsQ0FBQTtTQUZBO0FBR0EsUUFBQSxJQUEwQixJQUFJLENBQUMsU0FBL0I7QUFBQSxVQUFBLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBZixFQUFBLENBQUE7U0FIQTtlQVNBLFFBVmM7TUFBQSxDQWxCaEIsQ0FBQTtBQThCQSxNQUFBLElBQUEsQ0FBQSxJQUEwQixDQUFDLE9BQTNCO0FBQUEsZUFBTyxPQUFQLENBQUE7T0E5QkE7QUFBQSxNQStCQSxJQUFDLENBQUEsS0FBRCxDQUFPLE9BQVAsQ0EvQkEsQ0FBQTthQWdDQSxRQWpDUztJQUFBLENBWFgsQ0FBQTs7QUFBQSxtQkE4Q0EsWUFBQSxHQUFjLFNBQUMsTUFBRCxFQUFTLFFBQVQsR0FBQTthQUNaLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUMsQ0FBQSxRQUFkLEVBQXdCLFFBQXhCLEVBQWtDLE1BQWxDLEVBRFk7SUFBQSxDQTlDZCxDQUFBOztnQkFBQTs7TUFyQ0YsQ0FBQTs7QUFBQSxFQXNGTTtBQUNKLGlDQUFBLENBQUE7O0FBQWEsSUFBQSxvQkFBRSxLQUFGLEdBQUE7QUFBVSxNQUFULElBQUMsQ0FBQSxRQUFBLEtBQVEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSwrREFBQSxDQUFWO0lBQUEsQ0FBYjs7QUFBQSx5QkFFQSxJQUFBLEdBQU0sU0FBQyxFQUFELEVBQUssTUFBTCxHQUFBO0FBQ0osVUFBQSxNQUFBO0FBQUEsTUFBQSxNQUFBLEdBQWEsSUFBQSxJQUFDLENBQUEsS0FBRCxDQUFPO0FBQUEsUUFBQSxFQUFBLEVBQUksRUFBSjtPQUFQLENBQWIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sS0FBTjtBQUFBLFFBQ0EsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksTUFBWixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGVBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFIUjtPQURGLEVBRkk7SUFBQSxDQUZOLENBQUE7O0FBQUEseUJBVUEsR0FBQSxHQUFLLFNBQUMsTUFBRCxHQUFBO2FBQ0gsSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxLQUFOO0FBQUEsUUFDQSxHQUFBLEVBQU0sSUFBSSxDQUFDLE1BQUwsQ0FBWSxJQUFDLENBQUEsS0FBYixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGVBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFIUjtPQURGLEVBREc7SUFBQSxDQVZMLENBQUE7O0FBQUEseUJBaUJBLEtBQUEsR0FBTyxTQUFDLE1BQUQsRUFBYyxPQUFkLEdBQUE7QUFDTCxVQUFBLEVBQUE7O1FBRE0sU0FBUztPQUNmOztRQURtQixVQUFVO09BQzdCO0FBQUEsTUFBQSxJQUFHLEVBQUEsR0FBSyxNQUFNLENBQUMsRUFBZjtBQUNFLFFBQUEsTUFBQSxDQUFBLE1BQWEsQ0FBQyxFQUFkLENBQUE7ZUFDQSxJQUFDLENBQUEsSUFBRCxDQUFNLEVBQU4sRUFBVSxNQUFWLENBQWlCLENBQUMsSUFBbEIsQ0FBdUIsQ0FBQSxTQUFBLEtBQUEsR0FBQTtpQkFBQSxTQUFDLE1BQUQsR0FBQTttQkFDckIsS0FBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLENBQWUsTUFBZixFQUF1QixPQUF2QixFQURxQjtVQUFBLEVBQUE7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZCLEVBRkY7T0FBQSxNQUFBO2VBS0UsSUFBQyxDQUFBLEdBQUQsQ0FBSyxNQUFMLENBQVksQ0FBQyxJQUFiLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQyxPQUFELEdBQUE7bUJBQ2hCLEtBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLE9BQWYsRUFBd0IsT0FBeEIsRUFEZ0I7VUFBQSxFQUFBO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixFQUxGO09BREs7SUFBQSxDQWpCUCxDQUFBOztBQUFBLHlCQTRCQSxlQUFBLEdBQWlCLFNBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxHQUFmLEdBQUE7YUFDZixJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBZSxhQUFmLEVBQThCLElBQTlCLEVBQW9DLE1BQXBDLEVBQTRDLEdBQTVDLEVBRGU7SUFBQSxDQTVCakIsQ0FBQTs7QUFBQSx5QkErQkEsWUFBQSxHQUFjLFNBQUMsR0FBRCxFQUFNLFVBQU4sRUFBa0IsS0FBbEIsR0FBQTthQUNaLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLFdBQWYsRUFBNEIsSUFBNUIsRUFBa0MsR0FBbEMsRUFBdUMsVUFBdkMsRUFBbUQsS0FBbkQsRUFEWTtJQUFBLENBL0JkLENBQUE7O3NCQUFBOztLQUR1QixLQXRGekIsQ0FBQTs7QUFBQSxFQXlITTtBQUNKLGdDQUFBLENBQUE7O0FBQWEsSUFBQSxtQkFBRSxNQUFGLEdBQUE7QUFDWCxNQURZLElBQUMsQ0FBQSxTQUFBLE1BQ2IsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSw2REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBakIsQ0FEVztJQUFBLENBQWI7O0FBQUEsd0JBR0EsTUFBQSxHQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTthQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sS0FBTjtBQUFBLFFBQ0EsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FETjtBQUFBLFFBRUEsT0FBQSxFQUFTLElBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBRlQ7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQsQ0FIUDtPQURGLEVBRE07SUFBQSxDQUhSLENBQUE7O0FBQUEsd0JBVUEsTUFBQSxHQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTthQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sTUFBTjtBQUFBLFFBQ0EsSUFBQSxFQUFNLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBQyxDQUFBLE1BQWhCLENBRE47QUFBQSxRQUVBLEdBQUEsRUFBTSxJQUFJLENBQUMsTUFBTCxDQUFZLElBQUMsQ0FBQSxLQUFiLENBRk47QUFBQSxRQUdBLE9BQUEsRUFBUyxJQUFDLENBQUEsY0FBRCxDQUFnQixPQUFoQixDQUhUO0FBQUEsUUFJQSxLQUFBLEVBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxPQUFkLENBSlA7T0FERixFQURNO0lBQUEsQ0FWUixDQUFBOztBQUFBLHdCQWtCQSxNQUFBLEdBQVEsU0FBQyxNQUFELEVBQVMsT0FBVCxHQUFBO2FBQ04sSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxLQUFOO0FBQUEsUUFDQSxJQUFBLEVBQU0sSUFBSSxDQUFDLFNBQUwsQ0FBZSxJQUFDLENBQUEsTUFBaEIsQ0FETjtBQUFBLFFBRUEsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FGTjtBQUFBLFFBR0EsT0FBQSxFQUFTLElBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBSFQ7QUFBQSxRQUlBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQsQ0FKUDtPQURGLEVBRE07SUFBQSxDQWxCUixDQUFBOztBQUFBLHdCQTBCQSxPQUFBLEdBQVMsU0FBQyxNQUFELEVBQVMsT0FBVCxHQUFBO2FBQ1AsSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxRQUFOO0FBQUEsUUFDQSxHQUFBLEVBQU0sSUFBSSxDQUFDLE1BQUwsQ0FBWSxJQUFDLENBQUEsTUFBYixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGNBQUQsQ0FBZ0IsT0FBaEIsQ0FGVDtBQUFBLFFBR0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxZQUFELENBQWMsT0FBZCxDQUhQO09BREYsRUFETztJQUFBLENBMUJULENBQUE7O0FBQUEsd0JBbUNBLGNBQUEsR0FBZ0IsU0FBQyxPQUFELEdBQUE7O1FBQUMsVUFBVTtPQUN6QjthQUFBLENBQUEsU0FBQSxLQUFBLEdBQUE7ZUFBQSxTQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsR0FBZixHQUFBO0FBQ0UsY0FBQSxXQUFBO0FBQUEsVUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFIO0FBQ0UsWUFBQSxJQUFBLEdBQU8sS0FBUCxDQURGO1dBQUEsTUFBQTtBQUdFLFlBQUEsSUFBQSxHQUFPLEtBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxDQUFnQixJQUFoQixDQUFQLENBSEY7V0FBQTtBQUFBLFVBS0EsSUFBSSxDQUFDLE9BQUwsQ0FBYSxTQUFBLEdBQUE7QUFDWCxZQUFBLElBQUcsSUFBSDtBQUVFLGNBQUEsSUFBRyxJQUFJLENBQUMsRUFBTCxJQUFZLEtBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixLQUFnQixJQUFJLENBQUMsRUFBcEM7QUFDRSxnQkFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLFFBQVIsQ0FBaUIsSUFBSSxDQUFDLEVBQXRCLENBQUEsQ0FERjtlQUFBO3FCQUlBLEtBQUMsQ0FBQSxNQUFNLENBQUMsZ0JBQVIsQ0FBeUIsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUF6QixFQU5GO2FBRFc7VUFBQSxDQUFiLENBTEEsQ0FBQTtBQUFBLFVBY0EsS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLGFBQWhCLEVBQStCLElBQS9CLEVBQXFDLE1BQXJDLEVBQTZDLEdBQTdDLENBZEEsQ0FBQTs7Z0JBZWUsQ0FBRSxLQUFqQixDQUF1QixLQUFDLENBQUEsTUFBeEI7V0FmQTt1REFnQlksQ0FBRSxLQUFkLENBQW9CLEtBQUMsQ0FBQSxNQUFyQixXQWpCRjtRQUFBLEVBQUE7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLEVBRGM7SUFBQSxDQW5DaEIsQ0FBQTs7QUFBQSx3QkF1REEsWUFBQSxHQUFjLFNBQUMsT0FBRCxHQUFBOztRQUFDLFVBQVU7T0FDdkI7YUFBQSxDQUFBLFNBQUEsS0FBQSxHQUFBO2VBQUEsU0FBQyxHQUFELEVBQU0sVUFBTixFQUFrQixLQUFsQixHQUFBO0FBQ0UsY0FBQSxXQUFBO0FBQUEsVUFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsV0FBaEIsRUFBNkIsR0FBN0IsRUFBa0MsVUFBbEMsRUFBOEMsS0FBOUMsQ0FBQSxDQUFBOztnQkFDYSxDQUFFLEtBQWYsQ0FBcUIsS0FBQyxDQUFBLE1BQXRCO1dBREE7dURBRVksQ0FBRSxLQUFkLENBQW9CLEtBQUMsQ0FBQSxNQUFyQixXQUhGO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsRUFEWTtJQUFBLENBdkRkLENBQUE7O3FCQUFBOztLQURzQixLQXpIeEIsQ0FBQTs7QUFBQSxFQXdMQSxLQUFLLENBQUMsSUFBTixHQUFhLEVBeExiLENBQUE7O0FBQUEsRUEwTEEsT0FBQSxHQUNFO0FBQUEsSUFBQSxJQUFBLEVBQU0sU0FBQSxHQUFBO2FBQU8sSUFBQSxTQUFBLENBQVUsSUFBVixFQUFQO0lBQUEsQ0FBTjtBQUFBLElBRUEsR0FBQSxFQUFLLFNBQUEsR0FBQTtBQUNILFVBQUEsU0FBQTtBQUFBLE1BREksOERBQ0osQ0FBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLFdBQWIsQ0FBTixDQUFBO0FBQ0EsTUFBQSxJQUFrQixHQUFHLENBQUMsTUFBSixDQUFXLEdBQUcsQ0FBQyxNQUFKLEdBQWEsQ0FBeEIsQ0FBQSxLQUE4QixHQUFoRDtBQUFBLFFBQUEsR0FBQSxJQUFPLEdBQVAsQ0FBQTtPQURBO0FBQUEsTUFFQSxHQUFBLElBQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFYLENBQWtCLElBQUMsQ0FBQSxFQUFuQixDQUZQLENBQUE7QUFBQSxNQUdBLElBQUksQ0FBQyxPQUFMLENBQWEsR0FBYixDQUhBLENBQUE7YUFJQSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsRUFMRztJQUFBLENBRkw7R0EzTEYsQ0FBQTs7QUFBQSxFQW9NQSxNQUFBLEdBQ0U7QUFBQSxJQUFBLElBQUEsRUFBTSxTQUFBLEdBQUE7YUFBTyxJQUFBLFVBQUEsQ0FBVyxJQUFYLEVBQVA7SUFBQSxDQUFOO0FBQUEsSUFFQSxHQUFBLEVBQUssU0FBQSxHQUFBO0FBQ0gsVUFBQSxJQUFBO0FBQUEsTUFESSw4REFDSixDQUFBO0FBQUEsTUFBQSxJQUFJLENBQUMsT0FBTCxDQUFhLElBQUMsQ0FBQSxTQUFTLENBQUMsV0FBWCxDQUFBLENBQUEsR0FBMkIsR0FBeEMsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFJLENBQUMsT0FBTCxDQUFhLEtBQUssQ0FBQyxJQUFuQixDQURBLENBQUE7YUFFQSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsRUFIRztJQUFBLENBRkw7R0FyTUYsQ0FBQTs7QUFBQSxFQTRNQSxLQUFLLENBQUMsSUFBTixHQUNFO0FBQUEsSUFBQSxRQUFBLEVBQVUsU0FBQSxHQUFBO0FBQ1IsTUFBQSxJQUFDLENBQUEsS0FBRCxDQUFPLElBQUMsQ0FBQSxTQUFSLENBQUEsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBUSxJQUFDLENBQUEsVUFBVCxDQURBLENBQUE7QUFBQSxNQUdBLElBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixDQUhBLENBQUE7YUFJQSxJQUFDLENBQUEsT0FBRCxDQUFTLE9BQVQsRUFMUTtJQUFBLENBQVY7QUFBQSxJQVNBLFNBQUEsRUFBVyxTQUFBLEdBQUE7QUFDVCxVQUFBLElBQUE7YUFBQSxRQUFBLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBQSxDQUFPLENBQUMsS0FBUixhQUFjLFNBQWQsRUFEUztJQUFBLENBVFg7QUFBQSxJQVlBLFVBQUEsRUFBWSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsT0FBZixHQUFBOztRQUFlLFVBQVU7T0FDbkM7QUFBQSxNQUFBLElBQVUsT0FBTyxDQUFDLElBQVIsS0FBZ0IsS0FBMUI7QUFBQSxjQUFBLENBQUE7T0FBQTthQUNBLE1BQU0sQ0FBQyxJQUFQLENBQUEsQ0FBYyxDQUFBLElBQUEsQ0FBZCxDQUFvQixPQUFPLENBQUMsSUFBNUIsRUFBa0MsT0FBbEMsRUFGVTtJQUFBLENBWlo7R0E3TUYsQ0FBQTs7QUFBQSxFQTZOQSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQVgsR0FDRTtBQUFBLElBQUEsUUFBQSxFQUFVLFNBQUEsR0FBQTtBQUNSLE1BQUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLENBQUEsQ0FBQTthQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsT0FBVCxFQUZRO0lBQUEsQ0FBVjtHQTlORixDQUFBOztBQUFBLEVBb09BLElBQUksQ0FBQyxRQUFMLEdBQTBCLElBQUksQ0FBQSxTQUFFLENBQUEsUUFwT2hDLENBQUE7O0FBQUEsRUFxT0EsSUFBSSxDQUFDLElBQUwsR0FBMEIsSUFyTzFCLENBQUE7O0FBQUEsRUFzT0EsSUFBSSxDQUFDLFNBQUwsR0FBMEIsU0F0TzFCLENBQUE7O0FBQUEsRUF1T0EsSUFBSSxDQUFDLFVBQUwsR0FBMEIsVUF2TzFCLENBQUE7O0FBQUEsRUF3T0EsS0FBSyxDQUFDLElBQU4sR0FBMEIsSUF4TzFCLENBQUE7O0FBQUEsRUF5T0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFYLEdBQTBCLElBek8xQixDQUFBOztBQUFBLEVBME9BLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBWCxHQUEwQixJQTFPMUIsQ0FBQTs7O0lBMk9BLE1BQU0sQ0FBRSxPQUFSLEdBQTJCO0dBM08zQjtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSwrQ0FBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFELElBQVUsT0FBQSxDQUFRLE9BQVIsQ0FBbEIsQ0FBQTs7QUFBQSxFQUdBLFNBQUEsR0FDRTtBQUFBLElBQUEsU0FBQSxFQUFXLFNBQUMsT0FBRCxFQUFVLEVBQVYsRUFBYyxLQUFkLEdBQUE7QUFDVCxVQUFBLHNGQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7O1FBRHVCLFFBQVE7T0FDL0I7QUFBQSxNQUFBLEVBQUEsR0FBUyxJQUFBLElBQUksQ0FBQyxVQUFMLENBQUEsQ0FBVCxDQUFBO0FBQUEsTUFFQSxPQUFPLENBQUMsT0FBUixHQUFrQixFQUFFLENBQUMsRUFBSCxDQUFNLFNBQU4sQ0FBZ0I7Ozs7Y0FBTztjQUFNO3FCQUFZOzs7Ozs7UUFGM0QsQ0FBQTtBQUFBLE1BR0EsT0FBTyxDQUFDLEtBQVIsR0FBa0IsRUFBRSxDQUFDLEVBQUgsQ0FBTSxPQUFOLENBQWM7Ozs7Y0FBTztjQUFLO3FCQUFZOzs7Ozs7UUFIeEQsQ0FBQTtBQUtBLE1BQUEsSUFBRyxLQUFIO0FBQWMsUUFBQSxJQUFDLENBQUEsQ0FBQyxDQUFDLFNBQUgsQ0FBYSxPQUFiLENBQUEsQ0FBZDtPQUFBLE1BQUE7QUFDSyxRQUFJLElBQUEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxPQUFQLENBQUosQ0FETDtPQUxBOzs7QUFRQTs7O1lBQUEsQ0FBQTtBQUFBLFVBQU0sRUFBRSxDQUFDLElBQUg7Ozt1QkFBYzs7OztZQUFkLENBQU4sQ0FBQTtBQUFBLHFDQUFBOzs7O2lCQUNBLEVBQUEsQ0FBRyxNQUFILEVBQVcsR0FBWCxFQUFnQixVQUFoQixFQUE0QixJQUE1Qjs7Z0JBVlM7SUFBQSxDQUFYO0FBQUEsSUFZQSxRQUFBLEVBQVUsU0FBQyxPQUFELEVBQVUsRUFBVixFQUFjLEtBQWQsR0FBQTtBQUNSLE1BQUEsT0FBTyxDQUFDLE1BQVIsR0FBaUIsS0FBakIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsT0FBWCxFQUFvQixFQUFwQixFQUF3QixLQUF4QixFQUZRO0lBQUEsQ0FaVjtBQUFBLElBZ0JBLFNBQUEsRUFBVyxTQUFDLE9BQUQsRUFBVSxFQUFWLEVBQWMsS0FBZCxHQUFBO0FBQ1QsTUFBQSxPQUFPLENBQUMsTUFBUixHQUFpQixLQUFqQixDQUFBO2FBQ0EsSUFBQyxDQUFBLFNBQUQsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCLEVBQXdCLEtBQXhCLEVBRlM7SUFBQSxDQWhCWDtBQUFBLElBb0JBLGVBQUEsRUFBaUIsU0FBQyxPQUFELEVBQVUsRUFBVixHQUFBO2FBQ2YsSUFBQyxDQUFBLFNBQUQsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCLEVBQXdCLElBQXhCLEVBRGU7SUFBQSxDQXBCakI7QUFBQSxJQXVCQSxjQUFBLEVBQWdCLFNBQUMsT0FBRCxFQUFVLEVBQVYsR0FBQTthQUNkLElBQUMsQ0FBQSxRQUFELENBQVUsT0FBVixFQUFtQixFQUFuQixFQUF1QixJQUF2QixFQURjO0lBQUEsQ0F2QmhCO0FBQUEsSUEwQkEsZUFBQSxFQUFpQixTQUFDLE9BQUQsRUFBVSxFQUFWLEdBQUE7YUFDZixJQUFDLENBQUEsU0FBRCxDQUFXLE9BQVgsRUFBb0IsRUFBcEIsRUFBd0IsSUFBeEIsRUFEZTtJQUFBLENBMUJqQjtHQUpGLENBQUE7O0FBQUEsRUFrQ0EsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBbkIsQ0FBd0IsS0FBSyxDQUFDLElBQTlCLEVBQW9DLFNBQXBDLENBbENBLENBQUE7OztJQW1DQSxNQUFNLENBQUUsT0FBUixHQUFrQjtHQW5DbEI7QUFBQTs7Ozs7QUNBQTtBQUFBLE1BQUEseUZBQUE7OzsyQ0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBUSxPQUFBLENBQVEsT0FBUixDQUFSLENBQUE7O0FBQUEsRUFHQSxXQUFBLEdBQWMsU0FBQyxHQUFELEVBQU0sTUFBTixHQUFBO0FBQ1osUUFBQSxrRkFBQTtBQUFBLHFCQUFBLENBQUE7QUFBQSwwREFBQSxDQUFBOzs7QUFBQTs7O1VBQUEsQ0FBQTtBQUFBLFFBQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CO0FBQUEsVUFBQyxHQUFBLEVBQUssR0FBTjtTQUFwQjs7O2NBQXNDO2NBQVE7Y0FBSztxQkFBWTs7OztVQUEvRCxDQUFOLENBQUE7QUFBQSxtQ0FBQTs7OztBQUNBLGdCQUFPLE1BQVA7QUFBQSxlQUNPLE9BRFA7bUJBQ3FCLFFBQUEsR0FBUSxVQUFSLEdBQW1CLElBQW5CLEdBQXVCO21CQUQ1QztBQUFBLGVBRU8sU0FGUDttQkFFc0I7bUJBRnRCO0FBQUE7O2NBRlk7RUFBQSxDQUhkLENBQUE7O0FBQUEsRUFVQSxXQUFBLEdBQ0U7QUFBQSxJQUFBLEtBQUEsRUFBZSx5QkFBZjtBQUFBLElBQ0EsYUFBQSxFQUFlLCtCQURmO0FBQUEsSUFFQSxRQUFBLEVBQWUsNEJBRmY7QUFBQSxJQUdBLEtBQUEsRUFBZSx5QkFIZjtBQUFBLElBSUEsU0FBQSxFQUFlLDZCQUpmO0FBQUEsSUFLQSxLQUFBLEVBQWUseUJBTGY7QUFBQSxJQU1BLFVBQUEsRUFBZSw4QkFOZjtBQUFBLElBT0EsYUFBQSxFQUFlLGlDQVBmO0FBQUEsSUFRQSxJQUFBLEVBQWUsc0JBUmY7QUFBQSxJQVNBLE9BQUEsRUFBZSwyQkFUZjtHQVhGLENBQUE7O0FBQUEsRUFzQkEsUUFBQSxHQUFXLEVBdEJYLENBQUE7O0FBdUJBLFFBQXNDLFNBQUMsSUFBRCxHQUFBO1dBQ3BDLFFBQVMsQ0FBQSxJQUFBLENBQVQsR0FBaUIsU0FBQyxFQUFELEdBQUE7YUFBUSxXQUFBLENBQVksSUFBWixFQUFrQixFQUFsQixFQUFSO0lBQUEsRUFEbUI7RUFBQSxDQUF0QztBQUFBLE9BQUEsbUJBQUE7NkJBQUE7QUFBbUMsUUFBSSxLQUFKLENBQW5DO0FBQUEsR0F2QkE7O0FBQUEsRUEwQkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsUUExQmpCLENBQUE7QUFBQTs7Ozs7QUNBQTtBQUFBLE1BQUEsc0VBQUE7SUFBQTttU0FBQTs7QUFBQSxFQUFBLE9BQUEsQ0FBUSxhQUFSLENBQUEsQ0FBQTs7QUFBQSxFQUNBLEtBQUEsR0FBWSxPQUFBLENBQVEsY0FBUixDQURaLENBQUE7O0FBQUEsRUFHQSxLQUFBLEdBQVcsT0FBQSxDQUFRLE9BQVIsQ0FIWCxDQUFBOztBQUFBLEVBSUEsS0FBQSxHQUFXLE9BQUEsQ0FBUSxxQkFBUixDQUpYLENBQUE7O0FBQUEsRUFLQSxPQUFBLEdBQVcsT0FBQSxDQUFRLHVCQUFSLENBTFgsQ0FBQTs7QUFBQSxFQU1BLE1BQUEsR0FBVyxPQUFBLENBQVEsc0JBQVIsQ0FOWCxDQUFBOztBQUFBLEVBT0EsUUFBQSxHQUFXLE9BQUEsQ0FBUSxtQkFBUixDQVBYLENBQUE7O0FBQUEsRUFVQSxVQUFBLEdBQWEsU0FBQyxDQUFELEdBQUE7V0FDWCxDQUFDLENBQUMsT0FBRixDQUFVLElBQVYsRUFBZSxPQUFmLENBQXVCLENBQUMsT0FBeEIsQ0FBZ0MsSUFBaEMsRUFBcUMsTUFBckMsQ0FBNEMsQ0FBQyxPQUE3QyxDQUFxRCxJQUFyRCxFQUEwRCxNQUExRCxFQURXO0VBQUEsQ0FWYixDQUFBOztBQUFBLEVBY007QUFDSixRQUFBLGdCQUFBOztBQUFBLGlDQUFBLENBQUE7O0FBQUEseUJBQUEsU0FBQSxHQUFXLGtCQUFYLENBQUE7O0FBQUEsSUFFQSxnQkFBQSxHQUNFO0FBQUEsTUFBQSxPQUFBLEVBQVMsV0FBVDtBQUFBLE1BQ0EsSUFBQSxFQUFNLFFBRE47S0FIRixDQUFBOztBQUFBLHlCQU1BLFFBQUEsR0FDRTtBQUFBLE1BQUEsY0FBQSxFQUFnQixRQUFoQjtBQUFBLE1BQ0Esb0JBQUEsRUFBc0IsWUFEdEI7QUFBQSxNQUVBLDJCQUFBLEVBQTZCLHlCQUY3QjtLQVBGLENBQUE7O0FBQUEseUJBV0EsaUJBQUEsR0FBbUIsU0FBQSxHQUFBO0FBQ2pCLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxZQUFGLENBQVQsQ0FBQTtBQUNBLE1BQUEsSUFBRyxNQUFNLENBQUMsRUFBUCxDQUFVLFdBQVYsQ0FBSDtBQUE4QixRQUFBLE1BQU0sQ0FBQyxPQUFQLENBQWUsT0FBZixFQUF3QjtBQUFBLFVBQUEsTUFBQSxFQUFRLE1BQU8sQ0FBQSxDQUFBLENBQWY7U0FBeEIsQ0FBQSxDQUE5QjtPQURBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBQSxDQUZBLENBQUE7YUFHQSxJQUFDLENBQUEsQ0FBRCxDQUFHLFVBQUgsQ0FBYyxDQUFDLEdBQWYsQ0FBbUIsVUFBbkIsQ0FBOEIsQ0FBQyxNQUEvQixDQUFBLEVBSmlCO0lBQUEsQ0FYbkIsQ0FBQTs7QUFBQSx5QkFpQkEsYUFBQSxHQUFlLFNBQUMsQ0FBRCxHQUFBO2FBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQWUsQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxHQUFaLENBQUEsQ0FBZixFQUFQO0lBQUEsQ0FqQmYsQ0FBQTs7QUFBQSx5QkFtQkEsMkJBQUEsR0FBaUMsU0FBQSxHQUFBO0FBQUcsTUFBQSxJQUF1QyxJQUFDLENBQUEsS0FBeEM7ZUFBQSxJQUFDLENBQUEsdUJBQXVCLENBQUMsTUFBekIsQ0FBZ0MsR0FBaEMsRUFBQTtPQUFIO0lBQUEsQ0FuQmpDLENBQUE7O0FBQUEseUJBb0JBLCtCQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSx1QkFBdUIsQ0FBQyxJQUF6QixDQUE4QixJQUE5QixDQUFtQyxDQUFDLE1BQXBDLENBQTJDLENBQTNDLEVBQThDLENBQTlDLEVBQUg7SUFBQSxDQXBCakMsQ0FBQTs7QUFBQSx5QkFxQkEsMkJBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLHVCQUF1QixDQUFDLE9BQXpCLENBQWlDLEdBQWpDLEVBQUg7SUFBQSxDQXJCakMsQ0FBQTs7QUFBQSx5QkF1QkEsTUFBQSxHQUNFO0FBQUEsTUFBQSxpQ0FBQSxFQUFtQyxtQkFBbkM7QUFBQSxNQUNBLHdCQUFBLEVBQTBCLGVBRDFCO0FBQUEsTUFFQSwrQkFBQSxFQUFpQyw2QkFGakM7QUFBQSxNQUdBLHNDQUFBLEVBQXdDLGlDQUh4QztBQUFBLE1BSUEsK0JBQUEsRUFBaUMsNkJBSmpDO0tBeEJGLENBQUE7O0FBOEJhLElBQUEsb0JBQUMsT0FBRCxFQUFVLFFBQVYsR0FBQTtBQUNYLFVBQUEsNkJBQUE7O1FBRHFCLFdBQVc7T0FDaEM7QUFBQSxNQUFBLDZDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsR0FBRCxDQUFLLGNBQUwsQ0FEQSxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLGdCQUFiLENBSFosQ0FBQTtBQUtBLE1BQUEsSUFBRyxZQUFBLElBQWlCLFlBQVksQ0FBQyxRQUFqQztBQUNFO0FBQUEsYUFBQSxTQUFBO3NCQUFBO0FBQ0UsVUFBQSxJQUFDLENBQUEsUUFBUyxDQUFBLENBQUEsQ0FBVixHQUFlLENBQWYsQ0FBQTtBQUNBLGtCQUFPLENBQVA7QUFBQSxpQkFDTyxRQURQO0FBQ3FCLGNBQUcsQ0FBQSxTQUFDLENBQUQsR0FBQTt1QkFDcEIsUUFBUyxDQUFBLGFBQUEsQ0FBVCxHQUEwQixTQUFDLEVBQUQsR0FBQTt5QkFBUSxFQUFBLENBQUcsQ0FBSCxFQUFSO2dCQUFBLEVBRE47Y0FBQSxDQUFBLENBQUgsQ0FBSSxDQUFKLENBQUEsQ0FEckI7QUFBQSxXQUZGO0FBQUEsU0FERjtPQUxBO0FBWUEsV0FBQSxhQUFBOzt3QkFBQTtBQUNFLFFBQUEsSUFBQyxDQUFBLFFBQVMsQ0FBQSxDQUFBLENBQVYsR0FBZSxDQUFmLENBREY7QUFBQSxPQVpBO0FBQUEsTUFlQSxXQUFBOztBQUFlO2FBQUEsZ0JBQUE7d0RBQUE7QUFBQSx3QkFBQSxLQUFBLENBQUE7QUFBQTs7VUFmZixDQUFBO0FBQUEsTUFnQkEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQXFCLElBQUMsQ0FBQSxRQUFRLENBQUMsT0FBL0IsQ0FoQkEsQ0FEVztJQUFBLENBOUJiOztBQUFBLHlCQWlEQSxTQUFBLEdBQVcsU0FBQSxHQUFBOztRQUNULElBQUMsQ0FBQSxRQUFhLElBQUEsS0FBQSxDQUFNO0FBQUEsVUFBQSxFQUFBLEVBQUksSUFBQyxDQUFBLFVBQUw7U0FBTjtPQUFkO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLFNBQVAsQ0FBQSxDQURBLENBQUE7YUFFQSxJQUFDLENBQUEsdUJBQXVCLENBQUMsSUFBekIsQ0FBQSxFQUhTO0lBQUEsQ0FqRFgsQ0FBQTs7QUFBQSx5QkFzREEsTUFBQSxHQUFRLFNBQUMsV0FBRCxFQUFtQixPQUFuQixHQUFBOztRQUFDLGNBQWM7T0FDckI7QUFBQSxNQUFBLElBQUMsQ0FBQSxJQUFELEdBQVEsQ0FBQyxPQUFBLENBQVEsbUJBQVIsQ0FBRCxDQUE2QixDQUFDLEtBQTlCLENBQW9DO0FBQUEsUUFBQSxRQUFBLEVBQVUsV0FBVjtBQUFBLFFBQXVCLE9BQUEsRUFBUyxPQUFoQztPQUFwQyxDQUFSLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQSxDQUFNLElBQUMsQ0FBQSxJQUFQLEVBQWEsY0FBYixFQUE2QixFQUE3QixDQURSLENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxJQUFELENBQU0sSUFBQyxDQUFBLElBQVAsQ0FGQSxDQUFBO0FBQUEsTUFJQSxJQUFDLENBQUEsT0FBRCxHQUFnQixJQUFBLE9BQUEsQ0FBUTtBQUFBLFFBQUEsRUFBQSxFQUFJLElBQUMsQ0FBQSxNQUFMO0FBQUEsUUFBYSxLQUFBLEVBQU8sSUFBQyxDQUFBLENBQUQsQ0FBRyxZQUFILENBQXBCO09BQVIsQ0FKaEIsQ0FBQTtBQUFBLE1BS0EsSUFBQyxDQUFBLE1BQUQsR0FBZ0IsSUFBQSxNQUFBLENBQU87QUFBQSxRQUFBLEVBQUEsRUFBSSxJQUFDLENBQUEsRUFBTDtBQUFBLFFBQVMsUUFBQSxFQUFVLFFBQW5CO0FBQUEsUUFBNkIsT0FBQSxFQUFTLElBQUMsQ0FBQSxPQUF2QztPQUFQLENBTGhCLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixDQUFXLFNBQVgsRUFBc0IsSUFBQyxDQUFBLEtBQUQsQ0FBTyxJQUFDLENBQUEsU0FBUixDQUF0QixDQU5BLENBQUE7QUFBQSxNQU9BLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixDQUFXLFlBQVgsRUFBeUIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUF4QixDQUF6QixDQVBBLENBQUE7QUFBQSxNQVFBLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixDQUFhLElBQUMsQ0FBQSxRQUFRLENBQUMsSUFBdkIsQ0FSQSxDQUFBO0FBVUEsTUFBQSxJQUF3QixJQUFDLENBQUEsS0FBekI7QUFBQSxRQUFBLElBQUMsQ0FBQSxpQkFBRCxDQUFBLENBQUEsQ0FBQTtPQVZBO0FBV0EsTUFBQSxJQUFBLENBQUEsQ0FBOEIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLElBQXFCLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQWpCLENBQUEsQ0FBQSxLQUE2QixFQUFoRixDQUFBO2VBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQWUsT0FBZixFQUFBO09BWk07SUFBQSxDQXREUixDQUFBOztBQUFBLHlCQW9FQSxVQUFBLEdBQVksU0FBQyxJQUFELEdBQUE7YUFBVSxJQUFDLENBQUEsUUFBUSxDQUFDLElBQVYsR0FBaUIsS0FBM0I7SUFBQSxDQXBFWixDQUFBOztzQkFBQTs7S0FEdUIsS0FBSyxDQUFDLFdBZC9CLENBQUE7O0FBQUEsRUFzRkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsVUF0RmpCLENBQUE7QUFBQTs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcnVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclBBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xzUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDajFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQy9XQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzVQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3g1SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3R1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbGVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDOU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJTcGluZSAgICAgPSByZXF1aXJlIFwic3BpbmVcIlxuSWNlZCAgICAgID0gcmVxdWlyZSAnaWNlZC1jb2ZmZWUtc2NyaXB0J1xue2luc3BlY3R9ID0gcmVxdWlyZSBcInV0aWxcIlxuXG5cbmNsYXNzIENvbnNvbGUgZXh0ZW5kcyBTcGluZS5Db250cm9sbGVyXG4gIGxvZ1ByZWZpeDogXCIoUGxheWdyb3VuZDpDb25zb2xlKVwiXG5cbiAgREVGQVVMVF9TRVRUSU5HUyA9XG4gICAgbGFzdFZhcmlhYmxlOiAnJF8nXG4gICAgbWF4TGluZXM6IDhcbiAgICBtYXhEZXB0aDogMlxuICAgIHNob3dIaWRkZW46IGZhbHNlXG4gICAgY29sb3JpemU6IGZhbHNlXG5cbiAgZWxlbWVudHM6XG4gICAgXCJidXR0b24ucmVmcmVzaC1jb25zb2xlXCI6IFwiYnV0dG9uUmVmcmVzaENvbnNvbGVcIlxuXG4gIGFkZFRvSGlzdG9yeTogKHMpID0+XG4gICAgQGhpc3RvcnkudW5zaGlmdCBzXG4gICAgQGhpc3RvcnlpID0gLTFcblxuICBhZGRUb1NhdmVkOiAocykgPT5cbiAgICBAc2F2ZWQgKz0gaWYgc1suLi4tMV0gaXMgJ1xcXFwnIHRoZW4gc1swLi4uLTFdIGVsc2Ugc1xuICAgIEBzYXZlZCArPSAnXFxuJ1xuICAgIEBhZGRUb0hpc3Rvcnkgc1xuXG4gIGhhbmRsZUtleXByZXNzOiAoZSkgPT5cbiAgICBzd2l0Y2ggZS53aGljaFxuICAgICAgd2hlbiAxM1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgaW5wdXQgPSBAaW5wdXQudmFsKClcblxuICAgICAgICBpZiBpbnB1dFxuICAgICAgICAgIEBhZGRUb1NhdmVkIGlucHV0XG4gICAgICAgICAgaWYgaW5wdXRbLi4uLTFdIGlzbnQgJ1xcXFwnIGFuZCBub3QgQG11bHRpbGluZVxuICAgICAgICAgICAgQHByb2Nlc3NTYXZlZCgpXG5cbiAgICAgIHdoZW4gMjdcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGlucHV0ID0gQGlucHV0LnZhbCgpXG5cbiAgICAgICAgaWYgaW5wdXQgYW5kIEBtdWx0aWxpbmUgYW5kIEBzYXZlZFxuICAgICAgICAgIGlucHV0ID0gQGlucHV0LnZhbCgpXG5cbiAgICAgICAgICBAYWRkVG9TYXZlZCBpbnB1dFxuICAgICAgICAgIEBwcm9jZXNzU2F2ZWQoKVxuICAgICAgICBlbHNlIGlmIEBtdWx0aWxpbmUgYW5kIEBzYXZlZFxuICAgICAgICAgIEBwcm9jZXNzU2F2ZWQoKVxuXG4gICAgICAgIEBtdWx0aWxpbmUgPSBub3QgQG11bHRpbGluZVxuICAgICAgICAjIEBzZXRQcm9tcHQoKVxuXG4gICAgICB3aGVuIDM4XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgIGlmIEBoaXN0b3J5aSA8IEBoaXN0b3J5Lmxlbmd0aC0xXG4gICAgICAgICAgQGhpc3RvcnlpICs9IDFcbiAgICAgICAgICBAaW5wdXQudmFsIEBoaXN0b3J5W0BoaXN0b3J5aV1cblxuICAgICAgd2hlbiA0MFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICBpZiBAaGlzdG9yeWkgPiAwXG4gICAgICAgICAgQGhpc3RvcnlpICs9IC0xXG4gICAgICAgICAgQGlucHV0LnZhbCBAaGlzdG9yeVtAaGlzdG9yeWldXG5cbiAgbW91c2VlbnRlckNvbnNvbGVSZWZyZXNoOiAgICAgICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLmZhZGVJbiAxODBcbiAgbW91c2VlbnRlcktlZXBDb25zb2xlUmVmcmVzaDogICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLnN0b3AodHJ1ZSkuZmFkZVRvIDEsIDFcbiAgbW91c2VsZWF2ZUNvbnNvbGVSZWZyZXNoOiAgICAgICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLmZhZGVPdXQgMTgwXG5cbiAgZXZlbnRzOlxuICAgIFwibW91c2VlbnRlciBhc2lkZSNvdXRwdXRcIjogXCJtb3VzZWVudGVyQ29uc29sZVJlZnJlc2hcIlxuICAgIFwibW91c2VlbnRlciBidXR0b24ucmVmcmVzaC1jb25zb2xlXCI6IFwibW91c2VlbnRlcktlZXBDb25zb2xlUmVmcmVzaFwiXG4gICAgXCJtb3VzZWxlYXZlIGFzaWRlI291dHB1dFwiOiBcIm1vdXNlbGVhdmVDb25zb2xlUmVmcmVzaFwiXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBzZXR0aW5ncyA9IHt9KSAtPlxuICAgIEBoaXN0b3J5ID0gW11cbiAgICBAaGlzdG9yeWkgPSAtMVxuICAgIEBzYXZlZCA9ICcnXG4gICAgQG11bHRpbGluZSA9IGZhbHNlXG5cbiAgICBzdXBlclxuICAgIEBpbnB1dC5rZXlkb3duIEBoYW5kbGVLZXlwcmVzc1xuXG4gICAgQHNldHRpbmdzID0gJC5leHRlbmQoe30sIERFRkFVTFRfU0VUVElOR1MpXG5cbiAgICBpZiBsb2NhbFN0b3JhZ2UgYW5kIGxvY2FsU3RvcmFnZS5zZXR0aW5nc1xuICAgICAgZm9yIGssIHYgb2YgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2V0dGluZ3MpXG4gICAgICAgIEBzZXR0aW5nc1trXSA9IHZcblxuICAgIGZvciBvd24gaywgdiBvZiBzZXR0aW5nc1xuICAgICAgQHNldHRpbmdzW2tdID0gdlxuXG5cbiAgbGFuZzogKG5hbWUpIC0+XG4gICAgaWYgbmFtZSB0aGVuIEBfbGFuZyA9IG5hbWVcbiAgICBlbHNlIEBfbGFuZ1xuXG4gIHByb2Nlc3NTYXZlZDogLT5cbiAgICB0cnlcbiAgICAgIGNvbXBpbGVkID0gc3dpdGNoIEBsYW5nKClcbiAgICAgICAgd2hlbiBcImNvZmZlZVwiIHRoZW4gSWNlZC5jb21waWxlIEBzYXZlZCwgYmFyZTogb25cbiAgICAgICAgd2hlbiBcInZhbmlsbGFcIiB0aGVuIEBzYXZlZFxuXG4gICAgICB2YWx1ZSA9IGV2YWwuY2FsbCB3aW5kb3csIGNvbXBpbGVkXG4gICAgICB3aW5kb3dbQHNldHRpbmdzLmxhc3RWYXJpYWJsZV0gPSB2YWx1ZVxuICAgICAgQHByaW50VmFsdWUgdmFsdWVcbiAgICBjYXRjaCBlXG4gICAgICBAcHJpbnRDb21waWxlRXJyb3IgZVxuICAgIGZpbmFsbHlcbiAgICAgIEBzYXZlZCA9ICcnXG5cbiAgcHJpbnQ6IChhcmdzLi4uKSA9PlxuICAgIHMgPSBhcmdzLmpvaW4oJyAnKSBvciAnICdcbiAgICBvID0gQGVsLmh0bWwoKSArIHMgKyAnXFxuJ1xuICAgIEBodG1sIG8uc3BsaXQoJ1xcbicpWy1Ac2V0dGluZ3MubWF4TGluZXMuLi5dLmpvaW4oJ1xcbicpXG4gICAgdW5kZWZpbmVkXG5cbiAgcHJpbnRWYWx1ZTogKHZhbHVlKSA9PlxuICAgIEBwcmludCBpbnNwZWN0IHZhbHVlLCBAc2V0dGluZ3Muc2hvd0hpZGRlbiwgQHNldHRpbmdzLm1heERlcHRoLCBAc2V0dGluZ3MuY29sb3JpemVcblxuICBwcmludENvbXBpbGVFcnJvcjogKGUpIC0+XG4gICAgaWYgZS5zdGFja1xuICAgICAgb3V0cHV0ID0gZS5zdGFja1xuICAgICAjIEZGIGRvZXNuJ3QgaGF2ZSBFcnJvci50b1N0cmluZygpIGFzIHRoZSBmaXJzdCBsaW5lIG9mIEVycm9yLnN0YWNrXG4gICAgICMgd2hpbGUgQ2hyb21lIGRvZXMuXG4gICAgIGlmIG91dHB1dD8uc3BsaXQoJ1xcbicpWzBdIGlzbnQgZS50b1N0cmluZygpXG4gICAgICAgIG91dHB1dCA9IFwiI3tlLnRvU3RyaW5nKCl9XFxuI3tlLnN0YWNrfVwiXG4gICAgZWxzZVxuICAgICAgb3V0cHV0ID0gZS50b1N0cmluZygpXG4gICAgQHByaW50IG91dHB1dFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBDb25zb2xlIiwiU3BpbmUgICAgICA9IHJlcXVpcmUgJ3NwaW5lJ1xuSWNlZCAgICAgICA9IHJlcXVpcmUgJ2ljZWQtY29mZmVlLXNjcmlwdCdcbkNvZGVNaXJyb3IgPSByZXF1aXJlIFwiY29kZW1pcnJvclwiXG5JY2VkTWlycm9yID0gcmVxdWlyZSBcImNvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0XCJcbmpzMmNvZmZlZSAgPSByZXF1aXJlIFwianMyY29mZmVlL2Rpc3QvanMyY29mZmVlXCJcbkZpbGVRdWV1ZSAgPSByZXF1aXJlICcuLi9saWIvZmlsZXF1ZXVlJ1xuXG5cbmNsYXNzIEVkaXRvciBleHRlbmRzIFNwaW5lLkNvbnRyb2xsZXJcbiAgbG9nUHJlZml4OiBcIihQbGF5Z3JvdW5kOkVkaXRvcilcIlxuXG4gIERFRkFVTFRfU0VUVElOR1MgPVxuICAgIGxhc3RWYXJpYWJsZTogJyRfJ1xuXG4gIGVsZW1lbnRzOlxuICAgIFwibmF2LnNhbmRib3hcIjogXCJuYXZTYW5kYm94XCJcbiAgICBcInRleHRhcmVhLnNhbmRib3hcIjogXCJwbGFjZWhvbGRlclwiXG4gICAgXCJmb290ZXJcIjogXCJmb290ZXJcIlxuICAgIFwiYXNpZGUjaGVscFwiOiBcImhlbHBcIlxuXG4gIHRvZ2dsZUhlbHA6IC0+XG4gICAgaWYgQGhlbHAuaXMgXCI6dmlzaWJsZVwiIHRoZW4gQGhlbHAuZmFkZU91dCAzMDBcbiAgICBlbHNlIEBoZWxwLmZhZGVJbiAzMDBcblxuICBzYXZlU2V0dGluZ3M6IC0+XG4gICAgaW5wdXQgPSBAdmFsKClcbiAgICBAYWRkVG9TYXZlZCBpbnB1dFxuICAgIGxvY2FsU3RvcmFnZS5zZXR0aW5ncyA9IEpTT04uc3RyaW5naWZ5ICQuZXh0ZW5kIHt9LCBAc2V0dGluZ3MsIGFzc2V0czogd2luZG93LmFzc2V0cywgc2NyaXB0OiBAc2F2ZWRcblxuICBydW5PclN0b3BVc2VyU2NyaXB0OiAoZSkgLT5cbiAgICBidXR0b24gPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdidXR0b24nKVxuICAgIGlmIGJ1dHRvbi5pcyBcIi5zZWxlY3RlZFwiXG4gICAgICBAc3RvcFVzZXJTY3JpcHQoKVxuICAgICAgYnV0dG9uLnRleHQgXCJydW4hXCJcbiAgICBlbHNlXG4gICAgICBAcnVuVXNlclNjcmlwdCgpXG4gICAgICBidXR0b24udGV4dCBcInN0b3AhXCJcbiAgICBidXR0b24udG9nZ2xlQ2xhc3MgXCJzZWxlY3RlZFwiXG5cbiAgcnVuVXNlclNjcmlwdDogLT5cbiAgICByZXR1cm4gdW5sZXNzIGlucHV0ID0gQHZhbCgpXG4gICAgQGFkZFRvU2F2ZWQgaW5wdXRcbiAgICBAcHJvY2Vzc1NhdmVkKClcblxuICBzdG9wVXNlclNjcmlwdDogLT4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHdpbmRvdy5mcmFtZVxuXG4gIHByb2Nlc3NTYXZlZDogLT5cbiAgICBAdHJpZ2dlciBcInByZXNhdmVcIlxuICAgIHRyeVxuICAgICAgY29tcGlsZWQgPSBzd2l0Y2ggQGxhbmcoKVxuICAgICAgICB3aGVuIFwiY29mZmVlXCIgdGhlbiBJY2VkLmNvbXBpbGUgQHNhdmVkLCBiYXJlOiBvbiwgcnVudGltZTogXCJpbmxpbmVcIlxuICAgICAgICB3aGVuIFwidmFuaWxsYVwiIHRoZW4gQHNhdmVkXG5cbiAgICAgIHZhbHVlID0gZXZhbC5jYWxsIHdpbmRvdywgY29tcGlsZWRcbiAgICAgIHdpbmRvd1tAc2V0dGluZ3MubGFzdFZhcmlhYmxlXSA9IHZhbHVlXG4gICAgICBAY29uc29sZS5wcmludFZhbHVlIHZhbHVlXG4gICAgY2F0Y2ggZVxuICAgICAgQGNvbnNvbGUucHJpbnRDb21waWxlRXJyb3IgZVxuXG4gICAgQHNhdmVkID0gJydcblxuICBhZGRUb0hpc3Rvcnk6IChzKSA9PlxuICAgIEBoaXN0b3J5LnVuc2hpZnQgc1xuICAgIEBoaXN0b3J5aSA9IC0xXG5cbiAgYWRkVG9TYXZlZDogKHMpID0+XG4gICAgQHNhdmVkICs9IGlmIHNbLi4uLTFdIGlzICdcXFxcJyB0aGVuIHNbMC4uLi0xXSBlbHNlIHNcbiAgICBAc2F2ZWQgKz0gJ1xcbidcbiAgICBAYWRkVG9IaXN0b3J5IHNcblxuICBtb3VzZWVudGVyRXhhbXBsZU5hdjogICAgICAgICAgICAtPiBAbmF2U2FuZGJveC5mYWRlSW4gMTgwXG4gIG1vdXNlZW50ZXJLZWVwRXhhbXBsZU5hdjogICAgICAgIC0+IEBuYXZTYW5kYm94LnN0b3AodHJ1ZSkuZmFkZVRvIDEsIDFcbiAgbW91c2VsZWF2ZUV4YW1wbGVOYXY6ICAgICAgICAgICAgLT4gQG5hdlNhbmRib3guZmFkZU91dCAxODBcblxuICBzd2l0Y2hMYW5nOiAoZSkgLT5cbiAgICBlbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2J1dHRvbicpXG4gICAgcmV0dXJuIGlmIGVsLmlzIFwiLnNlbGVjdGVkXCJcblxuICAgIGlmICgoZWwuaXMgXCIubGFuZ3N3aXRjaC1jb2ZmZWVcIikgYW5kIEBzd2l0Y2hUb0NvZmZlZSgpKSBvciBAc3dpdGNoVG9WYW5pbGxhKClcbiAgICAgIGVsLmFkZENsYXNzKFwic2VsZWN0ZWRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyBcInNlbGVjdGVkXCJcblxuICBsYW5nOiAobmFtZSkgLT5cbiAgICBpZiBuYW1lIHRoZW4gQHRyaWdnZXIgXCJsYW5nY2hhbmdlXCIsIEBfbGFuZyA9IG5hbWVcbiAgICBlbHNlIEBfbGFuZ1xuXG4gIGV2ZW50czpcbiAgICBcImNsaWNrIGJ1dHRvbi5oZWxwXCI6IFwidG9nZ2xlSGVscFwiXG4gICAgXCJjbGljayBidXR0b24uc2F2ZVwiOiBcInNhdmVTZXR0aW5nc1wiXG4gICAgXCJjbGljayBidXR0b24ucnVuXCI6IFwicnVuT3JTdG9wVXNlclNjcmlwdFwiXG4gICAgXCJjbGljayBidXR0b24ucmVmcmVzaC1leGFtcGxlXCI6IFwicmVmcmVzaEV4YW1wbGVcIlxuICAgIFwibW91c2VlbnRlciAuQ29kZU1pcnJvclwiOiBcIm1vdXNlZW50ZXJFeGFtcGxlTmF2XCJcbiAgICBcIm1vdXNlZW50ZXIgbmF2LnNhbmRib3hcIjogXCJtb3VzZWVudGVyS2VlcEV4YW1wbGVOYXZcIlxuICAgIFwibW91c2VsZWF2ZSAuQ29kZU1pcnJvclwiOiBcIm1vdXNlbGVhdmVFeGFtcGxlTmF2XCJcbiAgICBcImNsaWNrIGJ1dHRvbi5sYW5nc3dpdGNoLWNvZmZlZVwiOiBcInN3aXRjaExhbmdcIlxuICAgIFwiY2xpY2sgYnV0dG9uLmxhbmdzd2l0Y2gtdmFuaWxsYVwiOiBcInN3aXRjaExhbmdcIlxuICAgIFwiZHJhZ292ZXIgZm9vdGVyXCI6IFwiZmlsZURyYWdIb3ZlclwiXG4gICAgXCJkcmFnbGVhdmUgZm9vdGVyXCI6IFwiZmlsZURyYWdIb3ZlclwiXG4gICAgXCJkcm9wIGZvb3RlclwiOiBcImZpbGVTZWxlY3RIYW5kbGVyXCJcblxuICBjb25zdHJ1Y3RvcjogKG9wdGlvbnMsIHNldHRpbmdzID0ge30pIC0+XG4gICAgQGhpc3RvcnkgPSBbXVxuICAgIEBoaXN0b3J5aSA9IC0xXG4gICAgQHNhdmVkID0gJydcbiAgICAjIEBtdWx0aWxpbmUgPSBmYWxzZVxuXG4gICAgc3VwZXJcblxuICAgIEBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBERUZBVUxUX1NFVFRJTkdTKVxuXG4gICAgaWYgbG9jYWxTdG9yYWdlIGFuZCBsb2NhbFN0b3JhZ2Uuc2V0dGluZ3NcbiAgICAgIGZvciBrLCB2IG9mIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNldHRpbmdzKVxuICAgICAgICBAc2V0dGluZ3Nba10gPSB2XG4gICAgICAgIHN3aXRjaCBrXG4gICAgICAgICAgd2hlbiBcImFzc2V0c1wiLCBcInVzZXJzY3JpcHRzXCJcbiAgICAgICAgICAgIHdpbmRvd1trXSA9IHZcblxuICAgIGZvciBvd24gaywgdiBvZiBzZXR0aW5nc1xuICAgICAgQHNldHRpbmdzW2tdID0gdlxuXG4gICAgQ29kZU1pcnJvci5rZXlNYXAudGFiU3BhY2UgPVxuICAgICAgZmFsbHRocm91Z2g6IFsnZGVmYXVsdCddXG4gICAgICBUYWI6IChjbSkgLT5cbiAgICAgICAgc3BhY2VzID0gQXJyYXkoY20uZ2V0T3B0aW9uKFwiaW5kZW50VW5pdFwiKSArIDEpLmpvaW4oXCIgXCIpXG4gICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24gc3BhY2VzLCBcImVuZFwiLCBcIitpbnB1dFwiXG5cbiAgICBAY29kZW1pcnJvciBvcj0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEgQHBsYWNlaG9sZGVyWzBdLCB7XG4gICAgICBtb2RlOiBcImljZWRjb2ZmZWVzY3JpcHRcIlxuICAgICAgdGhlbWU6IFwibW9ub2thaVwiXG4gICAgICBsaW5lTnVtYmVyczogdHJ1ZVxuICAgICAgdGFiU2l6ZTogMlxuICAgICAga2V5TWFwOiBcInRhYlNwYWNlXCJcbiAgICB9XG4gICAgQHdyYXBwZXIgPSAkIEBjb2RlbWlycm9yLmdldFdyYXBwZXJFbGVtZW50KClcbiAgICBAd3JhcHBlci5hZGRDbGFzcyBcInNhbmRib3hcIlxuICAgIGlmIEBzZXR0aW5ncy5zY3JpcHRcbiAgICAgIEB2YWwgQHNldHRpbmdzLnNjcmlwdFxuICAgICAgQHNjcm9sbFRvRW5kKClcblxuICByZW5kZXI6IChleGFtcGxlbmFtZSkgLT5cbiAgICBAbG9hZEV4YW1wbGUgZXhhbXBsZW5hbWVcblxuICB2YWw6ICh2YWx1ZSkgLT5cbiAgICBpZiB2YWx1ZSB0aGVuIEBjb2RlbWlycm9yLmRvYy5zZXRWYWx1ZSBcIiN7dmFsdWV9XFxuXFxuXFxuXFxuXCJcbiAgICBlbHNlIEBjb2RlbWlycm9yLmRvYy5nZXRWYWx1ZSgpXG5cbiAgbG9hZEV4YW1wbGU6IChuYW1lKSAtPlxuICAgIEBleGFtcGxlID0gbmFtZVxuICAgIGF3YWl0IEBleGFtcGxlc1tuYW1lXSBkZWZlciBleGFtcGxlXG4gICAgQHZhbCBleGFtcGxlXG4gICAgQHNjcm9sbFRvRW5kKClcblxuICBzY3JvbGxUb0VuZDogLT4gQGNvZGVtaXJyb3Iuc2Nyb2xsSW50b1ZpZXcgQGNvZGVtaXJyb3IuZG9jLmxpbmVDb3VudCgpIC0gMVxuXG4gIHJlZnJlc2hFeGFtcGxlOiAtPiBAbG9hZEV4YW1wbGUgQGV4YW1wbGVcblxuICBjbGVhcjogLT4gQHZhbCBcIlwiXG5cbiAgc3dpdGNoVG9WYW5pbGxhOiAtPlxuICAgIHVubGVzcyBpbnB1dCA9IEB2YWwoKVxuICAgICAgQGxhbmcgXCJ2YW5pbGxhXCJcbiAgICAgIHJldHVybiB0cnVlXG5cbiAgICB0cnlcbiAgICAgIGNvbXBpbGVkID0gSWNlZC5jb21waWxlIGlucHV0LCBiYXJlOiBvbiwgcnVudGltZTogXCJpbmxpbmVcIlxuICAgICAgQHZhbCBjb21waWxlZFxuICAgICAgQGxhbmcgXCJ2YW5pbGxhXCJcbiAgICAgIHJldHVybiB0cnVlXG4gICAgY2F0Y2ggZVxuICAgICAgQGNvbnNvbGUucHJpbnRDb21waWxlRXJyb3IgZVxuICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgc3dpdGNoVG9Db2ZmZWU6IC0+XG4gICAgdW5sZXNzIGlucHV0ID0gQHZhbCgpXG4gICAgICBAbGFuZyBcImNvZmZlZVwiXG4gICAgICByZXR1cm4gdHJ1ZVxuXG4gICAgdHJ5XG4gICAgICBjb21waWxlZCA9IGpzMmNvZmZlZS5idWlsZCBpbnB1dCwge3Nob3dfc3JjX2xpbmVubzogdHJ1ZSwgaW5kZW50OiBcIiAgXCJ9XG4gICAgICBAdmFsIFwiI3tjb21waWxlZC5jb2RlfVwiXG4gICAgICBAbGFuZyBcImNvZmZlZVwiXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGNhdGNoIGVcbiAgICAgIG91dHB1dCA9IEBjb25zb2xlLnByaW50Q29tcGlsZUVycm9yIGVcbiAgICAgIEBwcmludCBvdXRwdXRcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gIGZpbGVEcmFnSG92ZXI6IChlKSAtPlxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBAZm9vdGVyLnRvZ2dsZUNsYXNzIFwiZHJhZ2hvdmVyXCIsIGUudHlwZSBpcyBcImRyYWdvdmVyXCJcblxuICBmaWxlU2VsZWN0SGFuZGxlcjogKGUpIC0+XG4gICAgIyBjYW5jZWwgZXZlbnQgYW5kIGhvdmVyIHN0eWxpbmdcbiAgICBAZmlsZURyYWdIb3ZlciBlXG5cbiAgICAjIGZldGNoIEZpbGVMaXN0IG9iamVjdFxuICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQgaWYgZS5vcmlnaW5hbEV2ZW50P1xuICAgIGZpbGVzID0gZS50YXJnZXQuZmlsZXMgb3IgZS5kYXRhVHJhbnNmZXIuZmlsZXNcblxuICAgICMgcHJvY2VzcyBhbGwgRmlsZSBvYmplY3RzXG4gICAgQHBhcnNlRmlsZSBmaWxlIGZvciBmaWxlIGluIGZpbGVzXG5cbiAgcGFyc2VGaWxlOiAoZmlsZSkgLT5cbiAgICB7dHlwZX0gPSBmaWxlXG4gICAgaWYgLyhwbmd8Z2lmfGpwZWd8anBnKS8udGVzdCB0eXBlXG4gICAgICBAcGFyc2VJbWFnZSBmaWxlXG4gICAgZWxzZSBpZiAvKGphdmFzY3JpcHR8anN8Y29mZmVlfGljZWQpLy50ZXN0IHR5cGVcbiAgICAgIEBwYXJzZVNjcmlwdCBmaWxlXG4gICAgZWxzZVxuICAgICAgQGNvbnNvbGUucHJpbnQgXCJVbmtub3duIGZpbGV0eXBlOiAje3R5cGV9XCJcblxuICBwYXJzZUltYWdlOiAoZmlsZSkgLT5cbiAgICB7bmFtZX0gPSBmaWxlXG4gICAgd2luZG93LmFzc2V0cyBvcj0gW11cbiAgICB2YXJuYW1lID0gXCJ3aW5kb3cuYXNzZXRzWyN7d2luZG93LmFzc2V0cy5sZW5ndGh9XVwiXG4gICAgQGNvbnNvbGUucHJpbnQgXCJBZGRpbmcgI3tuYW1lfSBhcyAje3Zhcm5hbWV9XCJcblxuICAgIEBmaWxlUXVldWUgb3I9IG5ldyBGaWxlUXVldWVcbiAgICBhd2FpdCBAZmlsZVF1ZXVlLmF3YWl0UmVhZCB7ZmlsZTogZmlsZX0sIGRlZmVyIHN0YXR1cywgZGF0YXVybFxuICAgIHJldHVybiBAbG9nIFwiRXJyb3I6ICN7ZGF0YXVybH1cIiBpZiBzdGF0dXMgaXMgXCJlcnJvclwiXG5cbiAgICB3aW5kb3cuYXNzZXRzLnB1c2ggZGF0YXVybFxuICAgIHZhbHVlID0gc3dpdGNoIEBsYW5nKClcbiAgICAgIHdoZW4gXCJjb2ZmZWVcIiB0aGVuIFwiXCJcIiMgI3tuYW1lfVxubmV3aW1hZ2UgPSAje3Zhcm5hbWV9XG4je0B2YWwoKS50cmltKCl9XG5cIlwiXCJcbiAgICAgIHdoZW4gXCJ2YW5pbGxhXCIgdGhlbiBcIlwiXCIvLyAje25hbWV9XG52YXIgbmV3aW1hZ2UgPSAje3Zhcm5hbWV9XG4je0B2YWwoKS50cmltKCl9XG5cIlwiXCJcbiAgICBAdmFsIHZhbHVlXG4gICAgQGNvZGVtaXJyb3Iuc2Nyb2xsSW50b1ZpZXcgMFxuXG4gIHBhcnNlU2NyaXB0OiAoZmlsZSkgLT5cbiAgICB7bmFtZX0gPSBmaWxlXG4gICAgd2luZG93LnVzZXJzY3JpcHRzID89IFtdXG4gICAgdmFybmFtZSA9IFwid2luZG93LnVzZXJzY3JpcHRzWyN7d2luZG93LnVzZXJzY3JpcHRzLmxlbmd0aH1dXCJcbiAgICBAY29uc29sZS5wcmludCBcIkFkZGluZyAje25hbWV9IGFzICN7dmFybmFtZX1cIlxuXG4gICAgQGZpbGVRdWV1ZSBvcj0gbmV3IEZpbGVRdWV1ZVxuICAgIGF3YWl0IEBmaWxlUXVldWUuYXdhaXRSZWFkIHtmaWxlOiBmaWxlLCByZWFkQXM6IFwiVGV4dFwifSwgZGVmZXIgc3RhdHVzLCB0ZXh0XG4gICAgcmV0dXJuIEBsb2cgXCJFcnJvcjogI3t0ZXh0fVwiIGlmIHN0YXR1cyBpcyBcImVycm9yXCJcblxuICAgIHdpbmRvdy51c2Vyc2NyaXB0cy5wdXNoIHRleHRcbiAgICB2YWx1ZSA9IHN3aXRjaCBAbGFuZygpXG4gICAgICB3aGVuIFwiY29mZmVlXCIgdGhlbiBcIlwiXCIjICN7bmFtZX1cbiMgaWYgdGhpcyBpcyBhIENvbW1vbkpTIG1vZHVsZSwgcnVuOlxuIyByZXF1aXJlLmRlZmluZSBcIm1vZHVsZS1uYW1lXCI6IGV2YWwgI3t2YXJuYW1lfVxuI1xuIyB0byBzYXZlIHRoaXMgaW4gbG9jYWxTdG9yYWdlIHdpdGggdGhlIHNjcmlwdCwgcnVuOlxuIyBhcHAuZWRpdG9yLnNhdmVVc2VyU2NyaXB0ICN7dmFybmFtZX1cbm5ld3NjcmlwdCA9ICN7dmFybmFtZX1cbiN7QHZhbCgpLnRyaW0oKX1cblwiXCJcIlxuICAgICAgd2hlbiBcInZhbmlsbGFcIiB0aGVuIFwiXCJcIi8vICN7bmFtZX1cbi8vIGlmIHRoaXMgaXMgYSBDb21tb25KUyBtb2R1bGUsIHJ1bjpcbi8vIHJlcXVpcmUuZGVmaW5lKHtcIm1vZHVsZS1uYW1lXCI6IGV2YWwoI3t2YXJuYW1lfSl9KVxuLy9cbi8vIHRvIHNhdmUgdGhpcyBpbiBsb2NhbFN0b3JhZ2Ugd2l0aCB0aGUgc2NyaXB0LCBydW46XG4vLyBhcHAuZWRpdG9yLnNhdmVVc2VyU2NyaXB0KCN7dmFybmFtZX0pXG52YXIgbmV3c2NyaXB0ID0gI3t2YXJuYW1lfVxuI3tAdmFsKCkudHJpbSgpfVxuXCJcIlwiXG4gICAgQHZhbCB2YWx1ZVxuICAgIEBjb2RlbWlycm9yLnNjcm9sbEludG9WaWV3IDBcblxuICBzYXZlVXNlclNjcmlwdDogKHNjcmlwdCkgLT5cbiAgICBAc2V0dGluZ3MudXNlcnNjcmlwdHMgPz0gW11cbiAgICBAc2V0dGluZ3MudXNlcnNjcmlwdHMucHVzaCBzY3JpcHQgdW5sZXNzIHNjcmlwdCBpbiBAc2V0dGluZ3MudXNlcnNjcmlwdHNcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JcbiIsIlNwaW5lICAgID0gcmVxdWlyZSBcInNwaW5lXCJcblBJWEkgICAgID0gcmVxdWlyZSBcIi4uL2xpYi9waXhpLmRldi5qc1wiXG5TdGF0cyAgICA9IHJlcXVpcmUgXCJzdGF0cy5qc1wiXG5cblxuZXh0ZW5kID0gKGJhc2UsIG9ianMuLi4pIC0+XG4gIGJhc2Vba2V5XSA9IHZhbHVlIGZvciBrZXksIHZhbHVlIG9mIG9iaiBmb3Igb2JqIGluIG9ianNcbiAgYmFzZVxuXG5cbmNsYXNzIFN0YWdlIGV4dGVuZHMgU3BpbmUuQ29udHJvbGxlclxuICBsb2dQcmVmaXg6IFwiKFBsYXlncm91bmQ6U3RhZ2UpXCJcblxuICBwaXhpZGVmYXVsdHM6XG4gICAgYmFja2dyb3VuZENvbG9yOiAweEZGRkZGRlxuICAgIHRyYW5zcGFyZW50OiBmYWxzZVxuICAgIGFudGlhbGlhczogZmFsc2VcblxuICByZXNpemU6IC0+XG5cbiAgYmluZFJlc2l6ZTogLT5cbiAgICAkKHdpbmRvdykucmVzaXplIEByZXNpemVcbiAgICAkKHdpbmRvdykub24gXCJvbm9yaWVudGF0aW9uY2hhbmdlXCIsIEByZXNpemVcblxuICByZWxlYXNlOiAtPlxuICAgICQod2luZG93KS5vZmYgXCJyZXNpemVcIiwgQHJlc2l6ZVxuICAgICQod2luZG93KS5vZmYgXCJvbm9yaWVudGF0aW9uY2hhbmdlXCIsIEByZXNpemVcblxuICBfZnJhbWVGbnM6ICAgICBbXVxuICBhZGRGcmFtZUZuOiAgICAoZm4pIC0+IEBfZnJhbWVGbnMucHVzaCBmblxuICByZW1vdmVGcmFtZUZuOiAoZm4pIC0+IEBfZnJhbWVGbnMuc3BsaWNlIChAX2ZyYW1lRm5zLmluZGV4T2YgZm4pLCAxXG5cbiAgYW5pOiAobG9vcGZuID0gLT4pIC0+XG4gICAgQGFkZEZyYW1lRm4gbG9vcGZuXG5cbiAgICByZWN1cnNpdmVsb29wID0gPT5cbiAgICAgICMgQmVnaW5uaW5nIG9mIGFuaW1hdGlvbiBsb29wXG4gICAgICBAc3RhdHMuYmVnaW4oKVxuICAgICAgIyBDYWxsIHRoZSBhbmltYXRpb25cbiAgICAgIGZuKCkgZm9yIGZuIGluIEBfZnJhbWVGbnNcbiAgICAgICMgcmVuZGVyIHRoZSBzdGFnZVxuICAgICAgQHJlbmRlcmVyLnJlbmRlciBAc3RhZ2VcbiAgICAgICMgUmVjdXJzaXZlbHkgbG9vcCB0aGlzIGFuaW1hdGlvblxuICAgICAgQGZyYW1lID0gcmVxdWVzdEFuaW1GcmFtZSByZWN1cnNpdmVsb29wXG4gICAgICAjIEVuZCBvZiBhbmltYXRpb24gbG9vcFxuICAgICAgQHN0YXRzLmVuZCgpXG4gICAgQGZyYW1lID0gcmVxdWVzdEFuaW1GcmFtZSByZWN1cnNpdmVsb29wXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBwaXhpc2V0dGluZ3MgPSB7fSkgLT5cbiAgICBzdXBlclxuXG4gICAgQHBpeGlzZXR0aW5ncyAgICAgID0gZXh0ZW5kIHt9LCBAcGl4aWRlZmF1bHRzLCBwaXhpc2V0dGluZ3NcblxuICAgIEBzdGFnZSAgICAgICAgICAgICA9IG5ldyBQSVhJLlN0YWdlIEBwaXhpc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yXG4gICAgQHN0YWdlLndpZHRoICAgICAgID0gQGVsLndpZHRoKClcbiAgICBAc3RhZ2UuaGVpZ2h0ICAgICAgPSBAZWwuaGVpZ2h0KClcbiAgICBAc3RhZ2UuaW50ZXJhY3RpdmUgPSBAcGl4aXNldHRpbmdzLmludGVyYWN0aXZlXG5cbiAgICB3aW5kb3cuc3RhZ2UgPSBAc3RhZ2VcbiAgICB3aW5kb3cuYW5pICAgPSBAcHJveHkgQGFuaVxuICAgIHdpbmRvdy5QSVhJICA9IFBJWElcblxuICAgIEByZW5kZXIoKVxuICAgIEBiaW5kUmVzaXplKClcbiAgICBAYWRkQ2hpbGQgPSBAYXBwZW5kXG4gICAgQHJlbW92ZUNoaWxkcmVuID0gQHJlbW92ZVxuXG4gIHJlbmRlcjogLT5cbiAgICAjIGxldCBwaXhpIGNob29zZSBXZWJHTCBvciBjYW52YXNcbiAgICBAcmVuZGVyZXIgPSBQSVhJLmF1dG9EZXRlY3RSZW5kZXJlciBAc3RhZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHN0YWdlLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBwaXhpc2V0dGluZ3MudHJhbnNwYXJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHBpeGlzZXR0aW5ncy5hbnRpYWxpYXNcbiAgICBAc3RhdHMgICAgPSBuZXcgU3RhdHNcbiAgICBAJHN0YXRzICAgPSAkIEBzdGF0cy5kb21FbGVtZW50XG5cbiAgICAjIGF0dGFjaCByZW5kZXJlciwgc3RhdHMgaW5zdGFuY2VzIHRvIHdpbmRvd1xuICAgIHdpbmRvdy5yZW5kZXJlciA9IEByZW5kZXJlclxuICAgIHdpbmRvdy5zdGF0cyAgICA9IEBzdGF0c1xuICAgICMgYXR0YWNoIHJlbmRlciB0byBwYWdlXG4gICAgQGVsLmFwcGVuZCBAcmVuZGVyZXIudmlld1xuICAgIEBoaWRlU3RhdHMoKVxuICAgIEBlbC5hcHBlbmQgQCRzdGF0c1xuXG4gIGhpZGVTdGF0czogLT4gQCRzdGF0cy5jc3MgZGlzcGxheTogXCJub25lXCJcbiAgc2hvd1N0YXRzOiAtPiBAJHN0YXRzLmNzcyBkaXNwbGF5OiBcImJsb2NrXCIsIHBvc2l0aW9uOiBcImFic29sdXRlXCJcblxuICBhcHBlbmQ6IChjaGlsZHJlbi4uLikgLT5cbiAgICBmb3IgY2hpbGQgaW4gY2hpbGRyZW5cbiAgICAgIGlmIGNoaWxkLmRpc3BsYXlcbiAgICAgICAgY2hpbGQuc3RhZ2UgPSB0aGlzXG4gICAgICAgIGNoaWxkID0gY2hpbGQuZGlzcGxheVxuICAgICAgQHN0YWdlLmFkZENoaWxkIGNoaWxkXG4gICAgdGhpc1xuXG4gIGFkZENoaWxkOiAtPlxuXG4gIHJlbW92ZTogKGNoaWxkcmVuLi4uKSAtPlxuICAgIGNoaWxkcmVuID0gQHN0YWdlLmNoaWxkcmVuIHVubGVzcyBjaGlsZHJlbi5sZW5ndGhcblxuICAgIGZvciBjaGlsZCBpbiBjaGlsZHJlbiBieSAtMVxuICAgICAgaWYgY2hpbGQuZGlzcGxheVxuICAgICAgICBjaGlsZC5zdGFnZSA9IG51bGxcbiAgICAgICAgY2hpbGQgPSBjaGlsZC5kaXNwbGF5XG4gICAgICBAc3RhZ2UucmVtb3ZlQ2hpbGQgY2hpbGRcbiAgICB0aGlzXG5cbiAgcmVtb3ZlQ2hpbGRyZW46IC0+XG5cbiAgcmVmcmVzaDogLT5cbiAgICBAcmVtb3ZlQ2hpbGRyZW4oKVxuICAgIEBzdGF0cy5lbmQoKVxuICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXG5cbiAgc3RhY2tMZXZlbDogKGNoaWxkKSAtPiBAc3RhZ2UuY2hpbGRyZW4uaW5kZXhPZiAoY2hpbGQuZGlzcGxheSBvciBjaGlsZClcblxuICBicmluZ1RvRnJvbnQ6IChjaGlsZHJlbi4uLikgLT5cbiAgICBAcmVtb3ZlQ2hpbGRyZW4gY2hpbGRyZW4uLi5cbiAgICBAYXBwZW5kIGNoaWxkcmVuLi4uXG5cbiAgc2VuZFRvQmFjazogKGNoaWxkcmVuLi4uKSAtPlxuICAgIEBtb3ZlSW5TdGFjayBjaGlsZHJlbi4uLiwgMFxuXG4gIG1vdmVJblN0YWNrOiAoY2hpbGRyZW4uLi4sIG5ld0xldmVsKSAtPlxuICAgIEByZW1vdmVDaGlsZHJlbiBjaGlsZHJlbi4uLlxuICAgIEBhZGRDaGlsZHJlbkF0IGNoaWxkcmVuLi4uLCBuZXdMZXZlbFxuXG4gIGFkZENoaWxkcmVuQXQ6IChjaGlsZHJlbi4uLiwgbmV3TGV2ZWwpIC0+XG4gICAgZm9yIGNoaWxkIGluIGNoaWxkcmVuXG4gICAgICBpZiBjaGlsZC5kaXNwbGF5XG4gICAgICAgIGNoaWxkLnN0YWdlID0gdGhpc1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmRpc3BsYXlcbiAgICBAc3RhZ2UuYWRkQ2hpbGRBdCAoY2hpbGQuZGlzcGxheSBvciBjaGlsZCksIG5ld0xldmVsIGZvciBjaGlsZCBpbiBjaGlsZHJlblxuICAgIHRoaXNcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YWdlXG4iLCJNYXRoMiA9XG4gIHJhbmRvbTogKGZyb20sIHRvKSAtPiBNYXRoLnJhbmRvbSgpICogKHRvIC0gZnJvbSkgKyBmcm9tXG5cbiAgbWFwOiAodmFsLCBpbnB1dE1pbiwgaW5wdXRNYXgsIG91dHB1dE1pbiwgb3V0cHV0TWF4KSAtPlxuICAgICgob3V0cHV0TWF4IC0gb3V0cHV0TWluKSAqICgodmFsIC0gaW5wdXRNaW4pIC8gKGlucHV0TWF4IC0gaW5wdXRNaW4pKSkgKyBvdXRwdXRNaW5cblxuICByYW5kb21QbHVzTWludXM6IChjaGFuY2UpIC0+XG4gICAgY2hhbmNlID0gaWYgY2hhbmNlIHRoZW4gY2hhbmNlIGVsc2UgMC41XG4gICAgaWYgTWF0aC5yYW5kb20oKSA+IGNoYW5jZSB0aGVuIC0xIGVsc2UgMVxuXG4gIHJhbmRvbUludDogKGZyb20sIHRvKSAtPiBNYXRoLmZsb29yIE1hdGgucmFuZG9tKCkgKiAoKyt0byAtIGZyb20pICsgZnJvbVxuXG4gIHJhbmRvbUJvb2w6IChjaGFuY2UpIC0+XG4gICAgY2hhbmNlID0gaWYgY2hhbmNlIHRoZW4gY2hhbmNlIGVsc2UgMC41XG4gICAgTWF0aC5yYW5kb20oKSA8IGNoYW5jZVxuXG5cbm1vZHVsZS5leHBvcnRzID0gTWF0aDIiLCJjbGFzcyBGaWxlUXVldWVcbiAgZW5hYmxlZDogdHJ1ZVxuXG4gIGRpc2FibGU6IChjYWxsYmFjaykgLT5cbiAgICBpZiBAZW5hYmxlZFxuICAgICAgQGVuYWJsZWQgPSBmYWxzZVxuICAgICAgdHJ5XG4gICAgICAgIGRvIGNhbGxiYWNrXG4gICAgICBjYXRjaCBlXG4gICAgICAgIHRocm93IGVcbiAgICAgIGZpbmFsbHlcbiAgICAgICAgQGVuYWJsZWQgPSB0cnVlXG4gICAgZWxzZVxuICAgICAgZG8gY2FsbGJhY2tcblxuICBtYXg6IDEwMFxuICB0aHJvdHRsZTogMFxuXG4gIHF1ZXVlOiAocmVxdWVzdCkgLT5cbiAgICBAcGlwZWxpbmVyIG9yPSBuZXcgUGlwZWxpbmVyIEBtYXgsIEB0aHJvdHRsZVxuICAgIHJldHVybiBAcGlwZWxpbmVyLnF1ZXVlIHVubGVzcyByZXF1ZXN0XG4gICAgYXdhaXQgQHBpcGVsaW5lci53YWl0SW5RdWV1ZSBkZWZlcigpXG4gICAgcmVxdWVzdCBAcGlwZWxpbmVyLmRlZmVyKClcblxuICBjbGVhclF1ZXVlOiAtPlxuICAgIEBwaXBlbGluZXIucXVldWUgPSBbXVxuICAgIEBwaXBlbGluZXIubl9vdXQgPSAwXG5cbiAgZGVmYXVsdHM6XG4gICAgcmVhZEFzOiBcIkRhdGFVUkxcIlxuICAgIGVuY29kaW5nOiBcIlVURi04XCJcblxuICByZWFkRmlsZTogKHBhcmFtcyA9IHt9LCBkZWZhdWx0cyA9IHt9KSAtPlxuICAgIHNldHRpbmdzICAgICAgID0gJC5leHRlbmQoe30sIEBkZWZhdWx0cywgZGVmYXVsdHMsIHBhcmFtcykgdW5sZXNzIGRlZmF1bHRzIGlzIHRydWVcbiAgICByZWFkZXIgICAgICAgICA9IG5ldyBGaWxlUmVhZGVyXG4gICAgcmVhZGVyLm9ubG9hZCAgPSAoZSkgLT4gc2V0dGluZ3Muc3VjY2VzcyByZWFkZXIucmVzdWx0XG4gICAgcmVhZGVyLm9uZXJyb3IgPSBzZXR0aW5ncy5lcnJvclxuXG4gICAgcmVhZCA9IHN3aXRjaCBzZXR0aW5ncy5yZWFkQXNcbiAgICAgIHdoZW4gXCJBcnJheUJ1ZmZlclwiICB0aGVuIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlciBzZXR0aW5ncy5maWxlLCBzZXR0aW5ncy5lbmNvZGluZ1xuICAgICAgd2hlbiBcIkJpbmFyeVN0cmluZ1wiIHRoZW4gcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyBzZXR0aW5ncy5maWxlLCBzZXR0aW5ncy5lbmNvZGluZ1xuICAgICAgd2hlbiBcIkRhdGFVUkxcIiAgICAgIHRoZW4gcmVhZGVyLnJlYWRBc0RhdGFVUkwgc2V0dGluZ3MuZmlsZSwgc2V0dGluZ3MuZW5jb2RpbmdcbiAgICAgIHdoZW4gXCJUZXh0XCIgICAgICAgICB0aGVuIHJlYWRlci5yZWFkQXNUZXh0IHNldHRpbmdzLmZpbGUsIHNldHRpbmdzLmVuY29kaW5nXG5cbiAgICByZWFkZXJcblxuICBxdWV1ZUZpbGU6IChwYXJhbXMgPSB7fSwgZGVmYXVsdHMgPSB7fSkgLT5cbiAgICBydiAgPSBuZXcgaWNlZC5SZW5kZXp2b3VzXG5cbiAgICBzZXR0aW5ncyAgICAgPSAkLmV4dGVuZCh7fSwgQGRlZmF1bHRzLCBkZWZhdWx0cywgcGFyYW1zKVxuICAgIGRlZmVyc3VjY2VzcyA9IHNldHRpbmdzLnN1Y2Nlc3NcbiAgICBkZWZlcmVycm9yICAgPSBzZXR0aW5ncy5lcnJvclxuXG4gICAgc2V0dGluZ3Muc3VjY2VzcyA9IHJ2LmlkKCdzdWNjZXNzJykuZGVmZXIgZVxuICAgIHNldHRpbmdzLmVycm9yICAgPSBydi5pZCgnZXJyb3InKS5kZWZlciBlXG5cbiAgICByZXF1ZXN0ID0gKG5leHQpIC0+XG4gICAgICByZWFkZXIgPSBAcmVhZEZpbGUgc2V0dGluZ3MsIHRydWVcbiAgICAgIGF3YWl0IHJ2LndhaXQgZGVmZXIgc3RhdHVzXG4gICAgICBzd2l0Y2ggc3RhdHVzXG4gICAgICAgIHdoZW4gJ3N1Y2Nlc3MnIHRoZW4gZGVmZXJzdWNjZXNzIHJlYWRlci5yZXN1bHRcbiAgICAgICAgd2hlbiAnZXJyb3InIHRoZW4gZGVmZXJlcnJvciBlXG4gICAgICBuZXh0KClcblxuICAgIHJlcXVlc3QuYWJvcnQgPSAoc3RhdHVzVGV4dCkgLT5cbiAgICAgIHJldHVybiByZWFkZXIuYWJvcnQoc3RhdHVzVGV4dCkgaWYgcmVhZGVyXG4gICAgICBpbmRleCA9IEBxdWV1ZSgpLmluZGV4T2YocmVxdWVzdClcbiAgICAgIEBxdWV1ZSgpLnNwbGljZShpbmRleCwgMSkgaWYgaW5kZXggPiAtMVxuICAgICAgQHBpcGVsaW5lci5uX291dC0tIGlmIEBwaXBlbGluZXJcblxuICAgICAgIyBkZWZlcnJlZC5yZWplY3RXaXRoKFxuICAgICAgIyAgIHNldHRpbmdzLmNvbnRleHQgb3Igc2V0dGluZ3MsXG4gICAgICAjICAgW3JlYWRlciwgc3RhdHVzVGV4dCwgJyddXG4gICAgICAjIClcbiAgICAgIHJlcXVlc3RcblxuICAgIHJldHVybiByZXF1ZXN0IHVubGVzcyBAZW5hYmxlZFxuICAgIEBxdWV1ZSByZXF1ZXN0XG4gICAgcmVxdWVzdFxuXG4gIGF3YWl0UmVhZDogKG9wdGlvbnMsIGNiLCBxdWV1ZSA9IGZhbHNlKSAtPlxuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cygpXG5cbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIHJlc3VsdFxuICAgIG9wdGlvbnMuZXJyb3IgICA9IHJ2LmlkKCdlcnJvcicpLmRlZmVyIGVcblxuICAgIGlmIHF1ZXVlIHRoZW4gQGZpbGVRdWV1ZSBvcHRpb25zXG4gICAgZWxzZSBAcmVhZEZpbGUgb3B0aW9uc1xuXG4gICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICBjYiBzdGF0dXMsIHJlc3VsdCBvciBlXG5cblxubW9kdWxlLmV4cG9ydHMgPSBGaWxlUXVldWUiLCIvKipcclxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG5cdHZhciByb290ID0gdGhpcztcclxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQG1vZHVsZSBQSVhJXG4gKi9cbnZhciBQSVhJID0gUElYSSB8fCB7fTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoZSBQb2ludCBvYmplY3QgcmVwcmVzZW50cyBhIGxvY2F0aW9uIGluIGEgdHdvLWRpbWVuc2lvbmFsIGNvb3JkaW5hdGUgc3lzdGVtLCB3aGVyZSB4IHJlcHJlc2VudHMgdGhlIGhvcml6b250YWwgYXhpcyBhbmQgeSByZXByZXNlbnRzIHRoZSB2ZXJ0aWNhbCBheGlzLlxuICpcbiAqIEBjbGFzcyBQb2ludFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geCB7TnVtYmVyfSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IHBvc2l0aW9uIG9mIHRoZSBwb2ludFxuICovXG5QSVhJLlBvaW50ID0gZnVuY3Rpb24oeCwgeSlcbntcblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB4XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnggPSB4IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB5XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnkgPSB5IHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgcG9pbnRcbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQb2ludH0gYSBjb3B5IG9mIHRoZSBwb2ludFxuICovXG5QSVhJLlBvaW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcblx0cmV0dXJuIG5ldyBQSVhJLlBvaW50KHRoaXMueCwgdGhpcy55KTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuUG9pbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5Qb2ludDtcblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS9cbiAqL1xuXG4vKipcbiAqIHRoZSBSZWN0YW5nbGUgb2JqZWN0IGlzIGFuIGFyZWEgZGVmaW5lZCBieSBpdHMgcG9zaXRpb24sIGFzIGluZGljYXRlZCBieSBpdHMgdG9wLWxlZnQgY29ybmVyIHBvaW50ICh4LCB5KSBhbmQgYnkgaXRzIHdpZHRoIGFuZCBpdHMgaGVpZ2h0LlxuICpcbiAqIEBjbGFzcyBSZWN0YW5nbGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSBZIGNvb3JkIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gd2lkdGgge051bWJlcn0gVGhlIG92ZXJhbGwgd2lkdGggb2YgdGhpcyByZWN0YW5nbGVcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gVGhlIG92ZXJhbGwgaGVpZ2h0IG9mIHRoaXMgcmVjdGFuZ2xlXG4gKi9cblBJWEkuUmVjdGFuZ2xlID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodClcbntcblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB4XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnggPSB4IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB5XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnkgPSB5IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB3aWR0aFxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgMFxuXHQgKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoIHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEBkZWZhdWx0IDBcblx0ICovXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgUmVjdGFuZ2xlXG4gKlxuICogQG1ldGhvZCBjbG9uZVxuICogQHJldHVybiB7UmVjdGFuZ2xlfSBhIGNvcHkgb2YgdGhlIHJlY3RhbmdsZVxuICovXG5QSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpXG57XG5cdHJldHVybiBuZXcgUElYSS5SZWN0YW5nbGUodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHgsIGFuZCB5IGNvb3JkcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICovXG5QSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbih4LCB5KVxue1xuICAgIGlmKHRoaXMud2lkdGggPD0gMCB8fCB0aGlzLmhlaWdodCA8PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cblx0dmFyIHgxID0gdGhpcy54O1xuXHRpZih4ID49IHgxICYmIHggPD0geDEgKyB0aGlzLndpZHRoKVxuXHR7XG5cdFx0dmFyIHkxID0gdGhpcy55O1xuXG5cdFx0aWYoeSA+PSB5MSAmJiB5IDw9IHkxICsgdGhpcy5oZWlnaHQpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5SZWN0YW5nbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SZWN0YW5nbGU7XG5cblxuLyoqXG4gKiBAYXV0aG9yIEFkcmllbiBCcmF1bHQgPGFkcmllbi5icmF1bHRAZ21haWwuY29tPlxuICovXG5cbi8qKlxuICogQGNsYXNzIFBvbHlnb25cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHBvaW50cyoge0FycmF5PFBvaW50PnxBcnJheTxOdW1iZXI+fFBvaW50Li4ufE51bWJlci4uLn0gVGhpcyBjYW4gYmUgYW4gYXJyYXkgb2YgUG9pbnRzIHRoYXQgZm9ybSB0aGUgcG9seWdvbixcbiAqICAgICAgYSBmbGF0IGFycmF5IG9mIG51bWJlcnMgdGhhdCB3aWxsIGJlIGludGVycHJldGVkIGFzIFt4LHksIHgseSwgLi4uXSwgb3IgdGhlIGFyZ3VtZW50cyBwYXNzZWQgY2FuIGJlXG4gKiAgICAgIGFsbCB0aGUgcG9pbnRzIG9mIHRoZSBwb2x5Z29uIGUuZy4gYG5ldyBQSVhJLlBvbHlnb24obmV3IFBJWEkuUG9pbnQoKSwgbmV3IFBJWEkuUG9pbnQoKSwgLi4uKWAsIG9yIHRoZVxuICogICAgICBhcmd1bWVudHMgcGFzc2VkIGNhbiBiZSBmbGF0IHgseSB2YWx1ZXMgZS5nLiBgbmV3IFBJWEkuUG9seWdvbih4LHksIHgseSwgeCx5LCAuLi4pYCB3aGVyZSBgeGAgYW5kIGB5YCBhcmVcbiAqICAgICAgTnVtYmVycy5cbiAqL1xuUElYSS5Qb2x5Z29uID0gZnVuY3Rpb24ocG9pbnRzKVxue1xuICAgIC8vaWYgcG9pbnRzIGlzbid0IGFuIGFycmF5LCB1c2UgYXJndW1lbnRzIGFzIHRoZSBhcnJheVxuICAgIGlmKCEocG9pbnRzIGluc3RhbmNlb2YgQXJyYXkpKVxuICAgICAgICBwb2ludHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgLy9pZiB0aGlzIGlzIGEgZmxhdCBhcnJheSBvZiBudW1iZXJzLCBjb252ZXJ0IGl0IHRvIHBvaW50c1xuICAgIGlmKHR5cGVvZiBwb2ludHNbMF0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBwID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGlsID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpKz0yKSB7XG4gICAgICAgICAgICBwLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBJWEkuUG9pbnQocG9pbnRzW2ldLCBwb2ludHNbaSArIDFdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvaW50cyA9IHA7XG4gICAgfVxuXG5cdHRoaXMucG9pbnRzID0gcG9pbnRzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHBvbHlnb25cbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBhIGNvcHkgb2YgdGhlIHBvbHlnb25cbiAqL1xuUElYSS5Qb2x5Z29uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcblx0dmFyIHBvaW50cyA9IFtdO1xuXHRmb3IgKHZhciBpPTA7IGk8dGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRwb2ludHMucHVzaCh0aGlzLnBvaW50c1tpXS5jbG9uZSgpKTtcblx0fVxuXG5cdHJldHVybiBuZXcgUElYSS5Qb2x5Z29uKHBvaW50cyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSB4LCBhbmQgeSBjb29yZHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBwb2x5Z29uXG4gKlxuICogQG1ldGhvZCBjb250YWluc1xuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSBZIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcmV0dXJuIHtCb29sZWFufSBpZiB0aGUgeC95IGNvb3JkcyBhcmUgd2l0aGluIHRoaXMgcG9seWdvblxuICovXG5QSVhJLlBvbHlnb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oeCwgeSlcbntcbiAgICB2YXIgaW5zaWRlID0gZmFsc2U7XG5cbiAgICAvLyB1c2Ugc29tZSByYXljYXN0aW5nIHRvIHRlc3QgaGl0c1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJzdGFjay9wb2ludC1pbi1wb2x5Z29uL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG4gICAgZm9yKHZhciBpID0gMCwgaiA9IHRoaXMucG9pbnRzLmxlbmd0aCAtIDE7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGogPSBpKyspIHtcbiAgICAgICAgdmFyIHhpID0gdGhpcy5wb2ludHNbaV0ueCwgeWkgPSB0aGlzLnBvaW50c1tpXS55LFxuICAgICAgICAgICAgeGogPSB0aGlzLnBvaW50c1tqXS54LCB5aiA9IHRoaXMucG9pbnRzW2pdLnksXG4gICAgICAgICAgICBpbnRlcnNlY3QgPSAoKHlpID4geSkgIT0gKHlqID4geSkpICYmICh4IDwgKHhqIC0geGkpICogKHkgLSB5aSkgLyAoeWogLSB5aSkgKyB4aSk7XG5cbiAgICAgICAgaWYoaW50ZXJzZWN0KSBpbnNpZGUgPSAhaW5zaWRlO1xuICAgIH1cblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlBvbHlnb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5Qb2x5Z29uO1xuXG4vKipcbiAqIEBhdXRob3IgQ2hhZCBFbmdsZXIgPGNoYWRAcGFudGhlcmRldi5jb20+XG4gKi9cblxuLyoqXG4gKiBUaGUgQ2lyY2xlIG9iamVjdCBjYW4gYmUgdXNlZCB0byBzcGVjaWZ5IGEgaGl0IGFyZWEgZm9yIGRpc3BsYXlvYmplY3RzXG4gKlxuICogQGNsYXNzIENpcmNsZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geCB7TnVtYmVyfSBUaGUgWCBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgY2lyY2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgY2lyY2xlXG4gKiBAcGFyYW0gcmFkaXVzIHtOdW1iZXJ9IFRoZSByYWRpdXMgb2YgdGhlIGNpcmNsZVxuICovXG5QSVhJLkNpcmNsZSA9IGZ1bmN0aW9uKHgsIHksIHJhZGl1cylcbntcbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgeFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLnggPSB4IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgeVxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLnkgPSB5IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgcmFkaXVzXG4gICAgICogQHR5cGUgTnVtYmVyXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHRoaXMucmFkaXVzID0gcmFkaXVzIHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgQ2lyY2xlIGluc3RhbmNlXG4gKlxuICogQG1ldGhvZCBjbG9uZVxuICogQHJldHVybiB7Q2lyY2xlfSBhIGNvcHkgb2YgdGhlIHBvbHlnb25cbiAqL1xuUElYSS5DaXJjbGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKVxue1xuICAgIHJldHVybiBuZXcgUElYSS5DaXJjbGUodGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHgsIGFuZCB5IGNvb3JkcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIGNpcmNsZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIHBvbHlnb25cbiAqL1xuUElYSS5DaXJjbGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oeCwgeSlcbntcbiAgICBpZih0aGlzLnJhZGl1cyA8PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgZHggPSAodGhpcy54IC0geCksXG4gICAgICAgIGR5ID0gKHRoaXMueSAtIHkpLFxuICAgICAgICByMiA9IHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXM7XG5cbiAgICBkeCAqPSBkeDtcbiAgICBkeSAqPSBkeTtcblxuICAgIHJldHVybiAoZHggKyBkeSA8PSByMik7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkNpcmNsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkNpcmNsZTtcblxuXG4vKipcbiAqIEBhdXRob3IgQ2hhZCBFbmdsZXIgPGNoYWRAcGFudGhlcmRldi5jb20+XG4gKi9cblxuLyoqXG4gKiBUaGUgRWxsaXBzZSBvYmplY3QgY2FuIGJlIHVzZWQgdG8gc3BlY2lmeSBhIGhpdCBhcmVhIGZvciBkaXNwbGF5b2JqZWN0c1xuICpcbiAqIEBjbGFzcyBFbGxpcHNlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgZnJhbWluZyByZWN0YW5nbGUgb2YgdGhpcyBlbGxpcHNlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgZWxsaXBzZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IFRoZSBvdmVyYWxsIHdpZHRoIG9mIHRoaXMgZWxsaXBzZVxuICogQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBUaGUgb3ZlcmFsbCBoZWlnaHQgb2YgdGhpcyBlbGxpcHNlXG4gKi9cblBJWEkuRWxsaXBzZSA9IGZ1bmN0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQpXG57XG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHhcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgdGhpcy54ID0geCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHlcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgdGhpcy55ID0geSB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHdpZHRoXG4gICAgICogQHR5cGUgTnVtYmVyXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IGhlaWdodFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAwO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIEVsbGlwc2UgaW5zdGFuY2VcbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtFbGxpcHNlfSBhIGNvcHkgb2YgdGhlIGVsbGlwc2VcbiAqL1xuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcbiAgICByZXR1cm4gbmV3IFBJWEkuRWxsaXBzZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgeCwgYW5kIHkgY29vcmRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZSBjb250YWluZWQgd2l0aGluIHRoaXMgZWxsaXBzZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIGVsbGlwc2VcbiAqL1xuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHgsIHkpXG57XG4gICAgaWYodGhpcy53aWR0aCA8PSAwIHx8IHRoaXMuaGVpZ2h0IDw9IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIC8vbm9ybWFsaXplIHRoZSBjb29yZHMgdG8gYW4gZWxsaXBzZSB3aXRoIGNlbnRlciAwLDBcbiAgICAvL2FuZCBhIHJhZGl1cyBvZiAwLjVcbiAgICB2YXIgbm9ybXggPSAoKHggLSB0aGlzLngpIC8gdGhpcy53aWR0aCkgLSAwLjUsXG4gICAgICAgIG5vcm15ID0gKCh5IC0gdGhpcy55KSAvIHRoaXMuaGVpZ2h0KSAtIDAuNTtcblxuICAgIG5vcm14ICo9IG5vcm14O1xuICAgIG5vcm15ICo9IG5vcm15O1xuXG4gICAgcmV0dXJuIChub3JteCArIG5vcm15IDwgMC4yNSk7XG59XG5cblBJWEkuRWxsaXBzZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpXG57XG4gICAgcmV0dXJuIG5ldyBQSVhJLlJlY3RhbmdsZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRWxsaXBzZTtcblxuXG5cbi8qXG4gKiBBIGxpZ2h0ZXIgdmVyc2lvbiBvZiB0aGUgcmFkIGdsLW1hdHJpeCBjcmVhdGVkIGJ5IEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVlxuICogeW91IGJvdGggcm9jayFcbiAqL1xuXG5mdW5jdGlvbiBkZXRlcm1pbmVNYXRyaXhBcnJheVR5cGUoKSB7XG4gICAgUElYSS5NYXRyaXggPSAodHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcpID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG4gICAgcmV0dXJuIFBJWEkuTWF0cml4O1xufVxuXG5kZXRlcm1pbmVNYXRyaXhBcnJheVR5cGUoKTtcblxuUElYSS5tYXQzID0ge307XG5cblBJWEkubWF0My5jcmVhdGUgPSBmdW5jdGlvbigpXG57XG5cdHZhciBtYXRyaXggPSBuZXcgUElYSS5NYXRyaXgoOSk7XG5cblx0bWF0cml4WzBdID0gMTtcblx0bWF0cml4WzFdID0gMDtcblx0bWF0cml4WzJdID0gMDtcblx0bWF0cml4WzNdID0gMDtcblx0bWF0cml4WzRdID0gMTtcblx0bWF0cml4WzVdID0gMDtcblx0bWF0cml4WzZdID0gMDtcblx0bWF0cml4WzddID0gMDtcblx0bWF0cml4WzhdID0gMTtcblxuXHRyZXR1cm4gbWF0cml4O1xufVxuXG5cblBJWEkubWF0My5pZGVudGl0eSA9IGZ1bmN0aW9uKG1hdHJpeClcbntcblx0bWF0cml4WzBdID0gMTtcblx0bWF0cml4WzFdID0gMDtcblx0bWF0cml4WzJdID0gMDtcblx0bWF0cml4WzNdID0gMDtcblx0bWF0cml4WzRdID0gMTtcblx0bWF0cml4WzVdID0gMDtcblx0bWF0cml4WzZdID0gMDtcblx0bWF0cml4WzddID0gMDtcblx0bWF0cml4WzhdID0gMTtcblxuXHRyZXR1cm4gbWF0cml4O1xufVxuXG5cblBJWEkubWF0NCA9IHt9O1xuXG5QSVhJLm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDE2KTtcblxuXHRtYXRyaXhbMF0gPSAxO1xuXHRtYXRyaXhbMV0gPSAwO1xuXHRtYXRyaXhbMl0gPSAwO1xuXHRtYXRyaXhbM10gPSAwO1xuXHRtYXRyaXhbNF0gPSAwO1xuXHRtYXRyaXhbNV0gPSAxO1xuXHRtYXRyaXhbNl0gPSAwO1xuXHRtYXRyaXhbN10gPSAwO1xuXHRtYXRyaXhbOF0gPSAwO1xuXHRtYXRyaXhbOV0gPSAwO1xuXHRtYXRyaXhbMTBdID0gMTtcblx0bWF0cml4WzExXSA9IDA7XG5cdG1hdHJpeFsxMl0gPSAwO1xuXHRtYXRyaXhbMTNdID0gMDtcblx0bWF0cml4WzE0XSA9IDA7XG5cdG1hdHJpeFsxNV0gPSAxO1xuXG5cdHJldHVybiBtYXRyaXg7XG59XG5cblBJWEkubWF0My5tdWx0aXBseSA9IGZ1bmN0aW9uIChtYXQsIG1hdDIsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gbWF0OyB9XG5cblx0Ly8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG5cdHZhciBhMDAgPSBtYXRbMF0sIGEwMSA9IG1hdFsxXSwgYTAyID0gbWF0WzJdLFxuXHQgICAgYTEwID0gbWF0WzNdLCBhMTEgPSBtYXRbNF0sIGExMiA9IG1hdFs1XSxcblx0ICAgIGEyMCA9IG1hdFs2XSwgYTIxID0gbWF0WzddLCBhMjIgPSBtYXRbOF0sXG5cblx0ICAgIGIwMCA9IG1hdDJbMF0sIGIwMSA9IG1hdDJbMV0sIGIwMiA9IG1hdDJbMl0sXG5cdCAgICBiMTAgPSBtYXQyWzNdLCBiMTEgPSBtYXQyWzRdLCBiMTIgPSBtYXQyWzVdLFxuXHQgICAgYjIwID0gbWF0Mls2XSwgYjIxID0gbWF0Mls3XSwgYjIyID0gbWF0Mls4XTtcblxuXHRkZXN0WzBdID0gYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwO1xuXHRkZXN0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuXHRkZXN0WzJdID0gYjAwICogYTAyICsgYjAxICogYTEyICsgYjAyICogYTIyO1xuXG5cdGRlc3RbM10gPSBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjA7XG5cdGRlc3RbNF0gPSBiMTAgKiBhMDEgKyBiMTEgKiBhMTEgKyBiMTIgKiBhMjE7XG5cdGRlc3RbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG5cblx0ZGVzdFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcblx0ZGVzdFs3XSA9IGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMTtcblx0ZGVzdFs4XSA9IGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMjtcblxuXHRyZXR1cm4gZGVzdDtcbn1cblxuUElYSS5tYXQzLmNsb25lID0gZnVuY3Rpb24obWF0KVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDkpO1xuXG5cdG1hdHJpeFswXSA9IG1hdFswXTtcblx0bWF0cml4WzFdID0gbWF0WzFdO1xuXHRtYXRyaXhbMl0gPSBtYXRbMl07XG5cdG1hdHJpeFszXSA9IG1hdFszXTtcblx0bWF0cml4WzRdID0gbWF0WzRdO1xuXHRtYXRyaXhbNV0gPSBtYXRbNV07XG5cdG1hdHJpeFs2XSA9IG1hdFs2XTtcblx0bWF0cml4WzddID0gbWF0WzddO1xuXHRtYXRyaXhbOF0gPSBtYXRbOF07XG5cblx0cmV0dXJuIG1hdHJpeDtcbn1cblxuUElYSS5tYXQzLnRyYW5zcG9zZSA9IGZ1bmN0aW9uIChtYXQsIGRlc3QpXG57XG4gXHQvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gICAgaWYgKCFkZXN0IHx8IG1hdCA9PT0gZGVzdCkge1xuICAgICAgICB2YXIgYTAxID0gbWF0WzFdLCBhMDIgPSBtYXRbMl0sXG4gICAgICAgICAgICBhMTIgPSBtYXRbNV07XG5cbiAgICAgICAgbWF0WzFdID0gbWF0WzNdO1xuICAgICAgICBtYXRbMl0gPSBtYXRbNl07XG4gICAgICAgIG1hdFszXSA9IGEwMTtcbiAgICAgICAgbWF0WzVdID0gbWF0WzddO1xuICAgICAgICBtYXRbNl0gPSBhMDI7XG4gICAgICAgIG1hdFs3XSA9IGExMjtcbiAgICAgICAgcmV0dXJuIG1hdDtcbiAgICB9XG5cbiAgICBkZXN0WzBdID0gbWF0WzBdO1xuICAgIGRlc3RbMV0gPSBtYXRbM107XG4gICAgZGVzdFsyXSA9IG1hdFs2XTtcbiAgICBkZXN0WzNdID0gbWF0WzFdO1xuICAgIGRlc3RbNF0gPSBtYXRbNF07XG4gICAgZGVzdFs1XSA9IG1hdFs3XTtcbiAgICBkZXN0WzZdID0gbWF0WzJdO1xuICAgIGRlc3RbN10gPSBtYXRbNV07XG4gICAgZGVzdFs4XSA9IG1hdFs4XTtcbiAgICByZXR1cm4gZGVzdDtcbn1cblxuUElYSS5tYXQzLnRvTWF0NCA9IGZ1bmN0aW9uIChtYXQsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gUElYSS5tYXQ0LmNyZWF0ZSgpOyB9XG5cblx0ZGVzdFsxNV0gPSAxO1xuXHRkZXN0WzE0XSA9IDA7XG5cdGRlc3RbMTNdID0gMDtcblx0ZGVzdFsxMl0gPSAwO1xuXG5cdGRlc3RbMTFdID0gMDtcblx0ZGVzdFsxMF0gPSBtYXRbOF07XG5cdGRlc3RbOV0gPSBtYXRbN107XG5cdGRlc3RbOF0gPSBtYXRbNl07XG5cblx0ZGVzdFs3XSA9IDA7XG5cdGRlc3RbNl0gPSBtYXRbNV07XG5cdGRlc3RbNV0gPSBtYXRbNF07XG5cdGRlc3RbNF0gPSBtYXRbM107XG5cblx0ZGVzdFszXSA9IDA7XG5cdGRlc3RbMl0gPSBtYXRbMl07XG5cdGRlc3RbMV0gPSBtYXRbMV07XG5cdGRlc3RbMF0gPSBtYXRbMF07XG5cblx0cmV0dXJuIGRlc3Q7XG59XG5cblxuLy8vLy9cblxuXG5QSVhJLm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDE2KTtcblxuXHRtYXRyaXhbMF0gPSAxO1xuXHRtYXRyaXhbMV0gPSAwO1xuXHRtYXRyaXhbMl0gPSAwO1xuXHRtYXRyaXhbM10gPSAwO1xuXHRtYXRyaXhbNF0gPSAwO1xuXHRtYXRyaXhbNV0gPSAxO1xuXHRtYXRyaXhbNl0gPSAwO1xuXHRtYXRyaXhbN10gPSAwO1xuXHRtYXRyaXhbOF0gPSAwO1xuXHRtYXRyaXhbOV0gPSAwO1xuXHRtYXRyaXhbMTBdID0gMTtcblx0bWF0cml4WzExXSA9IDA7XG5cdG1hdHJpeFsxMl0gPSAwO1xuXHRtYXRyaXhbMTNdID0gMDtcblx0bWF0cml4WzE0XSA9IDA7XG5cdG1hdHJpeFsxNV0gPSAxO1xuXG5cdHJldHVybiBtYXRyaXg7XG59XG5cblBJWEkubWF0NC50cmFuc3Bvc2UgPSBmdW5jdGlvbiAobWF0LCBkZXN0KVxue1xuXHQvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG5cdGlmICghZGVzdCB8fCBtYXQgPT09IGRlc3QpXG5cdHtcblx0ICAgIHZhciBhMDEgPSBtYXRbMV0sIGEwMiA9IG1hdFsyXSwgYTAzID0gbWF0WzNdLFxuXHQgICAgICAgIGExMiA9IG1hdFs2XSwgYTEzID0gbWF0WzddLFxuXHQgICAgICAgIGEyMyA9IG1hdFsxMV07XG5cblx0ICAgIG1hdFsxXSA9IG1hdFs0XTtcblx0ICAgIG1hdFsyXSA9IG1hdFs4XTtcblx0ICAgIG1hdFszXSA9IG1hdFsxMl07XG5cdCAgICBtYXRbNF0gPSBhMDE7XG5cdCAgICBtYXRbNl0gPSBtYXRbOV07XG5cdCAgICBtYXRbN10gPSBtYXRbMTNdO1xuXHQgICAgbWF0WzhdID0gYTAyO1xuXHQgICAgbWF0WzldID0gYTEyO1xuXHQgICAgbWF0WzExXSA9IG1hdFsxNF07XG5cdCAgICBtYXRbMTJdID0gYTAzO1xuXHQgICAgbWF0WzEzXSA9IGExMztcblx0ICAgIG1hdFsxNF0gPSBhMjM7XG5cdCAgICByZXR1cm4gbWF0O1xuXHR9XG5cblx0ZGVzdFswXSA9IG1hdFswXTtcblx0ZGVzdFsxXSA9IG1hdFs0XTtcblx0ZGVzdFsyXSA9IG1hdFs4XTtcblx0ZGVzdFszXSA9IG1hdFsxMl07XG5cdGRlc3RbNF0gPSBtYXRbMV07XG5cdGRlc3RbNV0gPSBtYXRbNV07XG5cdGRlc3RbNl0gPSBtYXRbOV07XG5cdGRlc3RbN10gPSBtYXRbMTNdO1xuXHRkZXN0WzhdID0gbWF0WzJdO1xuXHRkZXN0WzldID0gbWF0WzZdO1xuXHRkZXN0WzEwXSA9IG1hdFsxMF07XG5cdGRlc3RbMTFdID0gbWF0WzE0XTtcblx0ZGVzdFsxMl0gPSBtYXRbM107XG5cdGRlc3RbMTNdID0gbWF0WzddO1xuXHRkZXN0WzE0XSA9IG1hdFsxMV07XG5cdGRlc3RbMTVdID0gbWF0WzE1XTtcblx0cmV0dXJuIGRlc3Q7XG59XG5cblBJWEkubWF0NC5tdWx0aXBseSA9IGZ1bmN0aW9uIChtYXQsIG1hdDIsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gbWF0OyB9XG5cblx0Ly8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG5cdHZhciBhMDAgPSBtYXRbIDBdLCBhMDEgPSBtYXRbIDFdLCBhMDIgPSBtYXRbIDJdLCBhMDMgPSBtYXRbM107XG5cdHZhciBhMTAgPSBtYXRbIDRdLCBhMTEgPSBtYXRbIDVdLCBhMTIgPSBtYXRbIDZdLCBhMTMgPSBtYXRbN107XG5cdHZhciBhMjAgPSBtYXRbIDhdLCBhMjEgPSBtYXRbIDldLCBhMjIgPSBtYXRbMTBdLCBhMjMgPSBtYXRbMTFdO1xuXHR2YXIgYTMwID0gbWF0WzEyXSwgYTMxID0gbWF0WzEzXSwgYTMyID0gbWF0WzE0XSwgYTMzID0gbWF0WzE1XTtcblxuXHQvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcbiAgICB2YXIgYjAgID0gbWF0MlswXSwgYjEgPSBtYXQyWzFdLCBiMiA9IG1hdDJbMl0sIGIzID0gbWF0MlszXTtcbiAgICBkZXN0WzBdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbMV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgZGVzdFsyXSA9IGIwKmEwMiArIGIxKmExMiArIGIyKmEyMiArIGIzKmEzMjtcbiAgICBkZXN0WzNdID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgYjAgPSBtYXQyWzRdO1xuICAgIGIxID0gbWF0Mls1XTtcbiAgICBiMiA9IG1hdDJbNl07XG4gICAgYjMgPSBtYXQyWzddO1xuICAgIGRlc3RbNF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgZGVzdFs1XSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGIzKmEzMTtcbiAgICBkZXN0WzZdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIGRlc3RbN10gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IG1hdDJbOF07XG4gICAgYjEgPSBtYXQyWzldO1xuICAgIGIyID0gbWF0MlsxMF07XG4gICAgYjMgPSBtYXQyWzExXTtcbiAgICBkZXN0WzhdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbOV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgZGVzdFsxMF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBiMyphMzI7XG4gICAgZGVzdFsxMV0gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IG1hdDJbMTJdO1xuICAgIGIxID0gbWF0MlsxM107XG4gICAgYjIgPSBtYXQyWzE0XTtcbiAgICBiMyA9IG1hdDJbMTVdO1xuICAgIGRlc3RbMTJdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbMTNdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIGRlc3RbMTRdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIGRlc3RbMTVdID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgcmV0dXJuIGRlc3Q7XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIG9iamVjdHMgdGhhdCBhcmUgcmVuZGVyZWQgb24gdGhlIHNjcmVlbi5cbiAqXG4gKiBAY2xhc3MgRGlzcGxheU9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdCA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5sYXN0ID0gdGhpcztcblx0dGhpcy5maXJzdCA9IHRoaXM7XG5cdC8qKlxuXHQgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgb2JqZWN0IHJlbGF0aXZlIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgcGFyZW50LlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcG9zaXRpb25cblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdC8qKlxuXHQgKiBUaGUgc2NhbGUgZmFjdG9yIG9mIHRoZSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzY2FsZVxuXHQgKiBAdHlwZSBQb2ludFxuXHQgKi9cblx0dGhpcy5zY2FsZSA9IG5ldyBQSVhJLlBvaW50KDEsMSk7Ly97eDoxLCB5OjF9O1xuXG5cdC8qKlxuXHQgKiBUaGUgcGl2b3QgcG9pbnQgb2YgdGhlIGRpc3BsYXlPYmplY3QgdGhhdCBpdCByb3RhdGVzIGFyb3VuZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcGl2b3Rcblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMucGl2b3QgPSBuZXcgUElYSS5Qb2ludCgwLDApO1xuXG5cdC8qKlxuXHQgKiBUaGUgcm90YXRpb24gb2YgdGhlIG9iamVjdCBpbiByYWRpYW5zLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcm90YXRpb25cblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqL1xuXHR0aGlzLnJvdGF0aW9uID0gMDtcblxuXHQvKipcblx0ICogVGhlIG9wYWNpdHkgb2YgdGhlIG9iamVjdC5cblx0ICpcblx0ICogQHByb3BlcnR5IGFscGhhXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cdFxuXHR0aGlzLmFscGhhID0gMTtcblxuXHQvKipcblx0ICogVGhlIHZpc2liaWxpdHkgb2YgdGhlIG9iamVjdC5cblx0ICpcblx0ICogQHByb3BlcnR5IHZpc2libGVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKi9cdFxuXHR0aGlzLnZpc2libGUgPSB0cnVlO1xuXG5cdC8qKlxuXHQgKiBUaGlzIGlzIHRoZSBkZWZpbmVkIGFyZWEgdGhhdCB3aWxsIHBpY2sgdXAgbW91c2UgLyB0b3VjaCBldmVudHMuIEl0IGlzIG51bGwgYnkgZGVmYXVsdC5cblx0ICogU2V0dGluZyBpdCBpcyBhIG5lYXQgd2F5IG9mIG9wdGltaXNpbmcgdGhlIGhpdFRlc3QgZnVuY3Rpb24gdGhhdCB0aGUgaW50ZXJhY3Rpb25NYW5hZ2VyIHdpbGwgdXNlIChhcyBpdCB3aWxsIG5vdCBuZWVkIHRvIGhpdCB0ZXN0IGFsbCB0aGUgY2hpbGRyZW4pXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoaXRBcmVhXG5cdCAqIEB0eXBlIFJlY3RhbmdsZXxDaXJjbGV8RWxsaXBzZXxQb2x5Z29uXG5cdCAqL1x0XG5cdHRoaXMuaGl0QXJlYSA9IG51bGw7XG5cblx0LyoqXG5cdCAqIFRoaXMgaXMgdXNlZCB0byBpbmRpY2F0ZSBpZiB0aGUgZGlzcGxheU9iamVjdCBzaG91bGQgZGlzcGxheSBhIG1vdXNlIGhhbmQgY3Vyc29yIG9uIHJvbGxvdmVyXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBidXR0b25Nb2RlXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICovXG5cdHRoaXMuYnV0dG9uTW9kZSA9IGZhbHNlO1xuXG5cdC8qKlxuXHQgKiBDYW4gdGhpcyBvYmplY3QgYmUgcmVuZGVyZWRcblx0ICpcblx0ICogQHByb3BlcnR5IHJlbmRlcmFibGVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKi9cblx0dGhpcy5yZW5kZXJhYmxlID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFRoZSBkaXNwbGF5IG9iamVjdCBjb250YWluZXIgdGhhdCBjb250YWlucyB0aGlzIGRpc3BsYXkgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcGFyZW50XG5cdCAqIEB0eXBlIERpc3BsYXlPYmplY3RDb250YWluZXJcblx0ICogQHJlYWRPbmx5XG5cdCAqL1x0XG5cdHRoaXMucGFyZW50ID0gbnVsbDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIHN0YWdlIHRoZSBkaXNwbGF5IG9iamVjdCBpcyBjb25uZWN0ZWQgdG8sIG9yIHVuZGVmaW5lZCBpZiBpdCBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBzdGFnZS5cblx0ICpcblx0ICogQHByb3BlcnR5IHN0YWdlXG5cdCAqIEB0eXBlIFN0YWdlXG5cdCAqIEByZWFkT25seVxuXHQgKi9cdFxuXHR0aGlzLnN0YWdlID0gbnVsbDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIG11bHRpcGxpZWQgYWxwaGEgb2YgdGhlIGRpc3BsYXlvYmplY3Rcblx0ICpcblx0ICogQHByb3BlcnR5IHdvcmxkQWxwaGFcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy53b3JsZEFscGhhID0gMTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBpbnRlcmFjdGl2ZSwgZG8gbm90IHRvZ2dsZSBkaXJlY3RseSEgdXNlIHRoZSBgaW50ZXJhY3RpdmVgIHByb3BlcnR5XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBfaW50ZXJhY3RpdmVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMuX2ludGVyYWN0aXZlID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIEN1cnJlbnQgdHJhbnNmb3JtIG9mIHRoZSBvYmplY3QgYmFzZWQgb24gd29ybGQgKHBhcmVudCkgZmFjdG9yc1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgd29ybGRUcmFuc2Zvcm1cblx0ICogQHR5cGUgTWF0M1xuXHQgKiBAcmVhZE9ubHlcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMud29ybGRUcmFuc2Zvcm0gPSBQSVhJLm1hdDMuY3JlYXRlKCkvL21hdDMuaWRlbnRpdHkoKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBsb2NhbGx5XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBsb2NhbFRyYW5zZm9ybVxuXHQgKiBAdHlwZSBNYXQzXG5cdCAqIEByZWFkT25seVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5sb2NhbFRyYW5zZm9ybSA9IFBJWEkubWF0My5jcmVhdGUoKS8vbWF0My5pZGVudGl0eSgpO1xuXG5cdC8qKlxuXHQgKiBbTllJXSBVbmtvd25cblx0ICpcblx0ICogQHByb3BlcnR5IGNvbG9yXG5cdCAqIEB0eXBlIEFycmF5PD5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMuY29sb3IgPSBbXTtcblxuXHQvKipcblx0ICogW05ZSV0gSG9sZHMgd2hldGhlciBvciBub3QgdGhpcyBvYmplY3QgaXMgZHluYW1pYywgZm9yIHJlbmRlcmluZyBvcHRpbWl6YXRpb25cblx0ICpcblx0ICogQHByb3BlcnR5IGR5bmFtaWNcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5keW5hbWljID0gdHJ1ZTtcblxuXHQvLyBjaGFjaCB0aGF0IHB1cHB5IVxuXHR0aGlzLl9zciA9IDA7XG5cdHRoaXMuX2NyID0gMTtcblxuXG5cdHRoaXMuZmlsdGVyQXJlYSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsMSwxKTtcblx0XG5cdC8qXG5cdCAqIE1PVVNFIENhbGxiYWNrc1xuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgY2xpY2tzIG9uIHRoZSBkaXNwbGF5T2JqZWN0IHdpdGggdGhlaXIgbW91c2Vcblx0ICogQG1ldGhvZCBjbGlja1xuXHQgKiBAcGFyYW0gaW50ZXJhY3Rpb25EYXRhIHtJbnRlcmFjdGlvbkRhdGF9XG5cdCAqL1xuXG5cdC8qKlxuXHQgKiBBIGNhbGxiYWNrIHRoYXQgaXMgdXNlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgbW91c2UgZG93biBvdmVyIHRoZSBzcHJpdGVcblx0ICogQG1ldGhvZCBtb3VzZWRvd25cblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciByZWxlYXNlcyB0aGUgbW91c2UgdGhhdCB3YXMgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBmb3IgdGhpcyBjYWxsYmFjayB0byBiZSBmaXJlZCB0aGUgbW91c2UgbXVzdCBoYXZlIGJlZW4gcHJlc3NlZCBkb3duIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCBtb3VzZXVwXG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgdGhlIG1vdXNlIHRoYXQgd2FzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3QgYnV0IGlzIG5vIGxvbmdlciBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIGZvciB0aGlzIGNhbGxiYWNrIHRvIGJlIGZpcmVkLCBUaGUgdG91Y2ggbXVzdCBoYXZlIHN0YXJ0ZWQgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBAbWV0aG9kIG1vdXNldXBvdXRzaWRlXG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXJzIG1vdXNlIHJvbGxzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCBtb3VzZW92ZXJcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgbW91c2UgbGVhdmVzIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIEBtZXRob2QgbW91c2VvdXRcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXG5cdC8qXG5cdCAqIFRPVUNIIENhbGxiYWNrc1xuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgdGFwcyBvbiB0aGUgc3ByaXRlIHdpdGggdGhlaXIgZmluZ2VyXG5cdCAqIGJhc2ljYWxseSBhIHRvdWNoIHZlcnNpb24gb2YgY2xpY2tcblx0ICogQG1ldGhvZCB0YXBcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciB0b3VjaCdzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCB0b3VjaHN0YXJ0XG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgYSB0b3VjaCBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIEBtZXRob2QgdG91Y2hlbmRcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciByZWxlYXNlcyB0aGUgdG91Y2ggdGhhdCB3YXMgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBmb3IgdGhpcyBjYWxsYmFjayB0byBiZSBmaXJlZCwgVGhlIHRvdWNoIG11c3QgaGF2ZSBzdGFydGVkIG92ZXIgdGhlIHNwcml0ZVxuXHQgKiBAbWV0aG9kIHRvdWNoZW5kb3V0c2lkZVxuXHQgKiBAcGFyYW0gaW50ZXJhY3Rpb25EYXRhIHtJbnRlcmFjdGlvbkRhdGF9XG5cdCAqL1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRGlzcGxheU9iamVjdDtcblxuLyoqXG4gKiBbRGVwcmVjYXRlZF0gSW5kaWNhdGVzIGlmIHRoZSBzcHJpdGUgd2lsbCBoYXZlIHRvdWNoIGFuZCBtb3VzZSBpbnRlcmFjdGl2aXR5LiBJdCBpcyBmYWxzZSBieSBkZWZhdWx0XG4gKiBJbnN0ZWFkIG9mIHVzaW5nIHRoaXMgZnVuY3Rpb24geW91IGNhbiBub3cgc2ltcGx5IHNldCB0aGUgaW50ZXJhY3RpdmUgcHJvcGVydHkgdG8gdHJ1ZSBvciBmYWxzZVxuICpcbiAqIEBtZXRob2Qgc2V0SW50ZXJhY3RpdmVcbiAqIEBwYXJhbSBpbnRlcmFjdGl2ZSB7Qm9vbGVhbn1cbiAqIEBkZXByZWNhdGVkIFNpbXBseSBzZXQgdGhlIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgZGlyZWN0bHlcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5zZXRJbnRlcmFjdGl2ZSA9IGZ1bmN0aW9uKGludGVyYWN0aXZlKVxue1xuXHR0aGlzLmludGVyYWN0aXZlID0gaW50ZXJhY3RpdmU7XG59XG5cbi8qKlxuICogSW5kaWNhdGVzIGlmIHRoZSBzcHJpdGUgd2lsbCBoYXZlIHRvdWNoIGFuZCBtb3VzZSBpbnRlcmFjdGl2aXR5LiBJdCBpcyBmYWxzZSBieSBkZWZhdWx0XG4gKlxuICogQHByb3BlcnR5IGludGVyYWN0aXZlXG4gKiBAdHlwZSBCb29sZWFuXG4gKiBAZGVmYXVsdCBmYWxzZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZSwgJ2ludGVyYWN0aXZlJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmFjdGl2ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuX2ludGVyYWN0aXZlID0gdmFsdWU7XG4gICAgXHRcbiAgICBcdC8vIFRPRE8gbW9yZSB0byBiZSBkb25lIGhlcmUuLlxuXHRcdC8vIG5lZWQgdG8gc29ydCBvdXQgYSByZS1jcmF3bCFcblx0XHRpZih0aGlzLnN0YWdlKXRoaXMuc3RhZ2UuZGlydHkgPSB0cnVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNldHMgYSBtYXNrIGZvciB0aGUgZGlzcGxheU9iamVjdC4gQSBtYXNrIGlzIGFuIG9iamVjdCB0aGF0IGxpbWl0cyB0aGUgdmlzaWJpbGl0eSBvZiBhbiBvYmplY3QgdG8gdGhlIHNoYXBlIG9mIHRoZSBtYXNrIGFwcGxpZWQgdG8gaXQuXG4gKiBJbiBQSVhJIGEgcmVndWxhciBtYXNrIG11c3QgYmUgYSBQSVhJLkdncmFwaGljcyBvYmplY3QuIFRoaXMgYWxsb3dzIGZvciBtdWNoIGZhc3RlciBtYXNraW5nIGluIGNhbnZhcyBhcyBpdCB1dGlsaXNlcyBzaGFwZSBjbGlwcGluZy5cbiAqIFRvIHJlbW92ZSBhIG1hc2ssIHNldCB0aGlzIHByb3BlcnR5IHRvIG51bGwuXG4gKlxuICogQHByb3BlcnR5IG1hc2tcbiAqIEB0eXBlIEdyYXBoaWNzXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLCAnbWFzaycsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFzaztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFxuICAgIFx0XG4gICAgICAgIGlmKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYodGhpcy5fbWFzaylcblx0ICAgIFx0e1xuXHQgICAgXHRcdHZhbHVlLnN0YXJ0ID0gdGhpcy5fbWFzay5zdGFydDtcblx0ICAgIFx0XHR2YWx1ZS5lbmQgPSB0aGlzLl9tYXNrLmVuZDtcblx0ICAgIFx0fVxuICAgIFx0XHRlbHNlXG4gICAgXHRcdHtcblx0XHQgICAgICAgIHRoaXMuYWRkRmlsdGVyKHZhbHVlKTtcblx0XHQgICAgICAgIHZhbHVlLnJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICBcdFx0fVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICBcdCB0aGlzLnJlbW92ZUZpbHRlcih0aGlzLl9tYXNrKTtcblx0XHRcdCB0aGlzLl9tYXNrLnJlbmRlcmFibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tYXNrID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgZmlsdGVycyBmb3IgdGhlIGRpc3BsYXlPYmplY3QuIFxuICogKiBJTVBPUlRBTlQ6IFRoaXMgaXMgYSB3ZWJHTCBvbmx5IGZlYXR1cmUgYW5kIHdpbGwgYmUgaWdub3JlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyLlxuICogVG8gcmVtb3ZlIGZpbHRlcnMgc2ltcGx5IHNldCB0aGlzIHByb3BlcnR5IHRvICdudWxsJ1xuICogQHByb3BlcnR5IGZpbHRlcnNcbiAqIEB0eXBlIEFycmF5IEFuIGFycmF5IG9mIGZpbHRlcnNcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUsICdmaWx0ZXJzJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XG4gICAgICAgIGlmKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYodGhpcy5fZmlsdGVycyl0aGlzLnJlbW92ZUZpbHRlcih0aGlzLl9maWx0ZXJzKTtcblx0ICAgICAgICB0aGlzLmFkZEZpbHRlcih2YWx1ZSk7XG5cblx0XHQgICAgLy8gbm93IHB1dCBhbGwgdGhlIHBhc3NlcyBpbiBvbmUgcGxhY2UuLlxuXHQgICAgICAgIHZhciBwYXNzZXMgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSBcblx0ICAgICAgICB7XG5cdCAgICAgICAgXHR2YXIgZmlsdGVyUGFzc2VzID0gdmFsdWVbaV0ucGFzc2VzO1xuXHQgICAgICAgIFx0Zm9yICh2YXIgaiA9IDA7IGogPCBmaWx0ZXJQYXNzZXMubGVuZ3RoOyBqKyspIFxuXHQgICAgICAgIFx0e1xuXHQgICAgICAgIFx0XHRwYXNzZXMucHVzaChmaWx0ZXJQYXNzZXNbal0pO1xuXHQgICAgICAgIFx0fTtcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFsdWUuc3RhcnQuZmlsdGVyUGFzc2VzID0gcGFzc2VzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICBcdGlmKHRoaXMuX2ZpbHRlcnMpdGhpcy5yZW1vdmVGaWx0ZXIodGhpcy5fZmlsdGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2ZpbHRlcnMgPSB2YWx1ZTtcblxuICAgICAgIFxuXG4gICAgICAgIFxuICAgIH1cbn0pO1xuXG4vKlxuICogQWRkcyBhIGZpbHRlciB0byB0aGlzIGRpc3BsYXlPYmplY3RcbiAqXG4gKiBAbWV0aG9kIGFkZEZpbHRlclxuICogQHBhcmFtIG1hc2sge0dyYXBoaWNzfSB0aGUgZ3JhcGhpY3Mgb2JqZWN0IHRvIHVzZSBhcyBhIGZpbHRlclxuICogQHByaXZhdGVcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5hZGRGaWx0ZXIgPSBmdW5jdGlvbihkYXRhKVxue1xuXHQvL2lmKHRoaXMuZmlsdGVyKXJldHVybjtcblx0Ly90aGlzLmZpbHRlciA9IHRydWU7XG4vL1x0ZGF0YVswXS50YXJnZXQgPSB0aGlzO1xuXHRcblxuXHQvLyBpbnNlcnQgYSBmaWx0ZXIgYmxvY2suLlxuXHQvLyBUT0RPIE9uamVjdCBwb29sIHRoZWFzZSBiYWQgYm95cy4uXG5cdHZhciBzdGFydCA9IG5ldyBQSVhJLkZpbHRlckJsb2NrKCk7XG5cdHZhciBlbmQgPSBuZXcgUElYSS5GaWx0ZXJCbG9jaygpO1xuXHRcblx0ZGF0YS5zdGFydCA9IHN0YXJ0O1xuXHRkYXRhLmVuZCA9IGVuZDtcblx0XG5cdHN0YXJ0LmRhdGEgPSBkYXRhO1xuXHRlbmQuZGF0YSA9IGRhdGE7XG5cdFxuXHRzdGFydC5maXJzdCA9IHN0YXJ0Lmxhc3QgPSAgdGhpcztcblx0ZW5kLmZpcnN0ID0gZW5kLmxhc3QgPSB0aGlzO1xuXHRcblx0c3RhcnQub3BlbiA9IHRydWU7XG5cdFxuXHRzdGFydC50YXJnZXQgPSB0aGlzO1xuXHRcblx0Lypcblx0ICogaW5zZXJ0IHN0YXJ0XG5cdCAqL1xuXHRcblx0dmFyIGNoaWxkRmlyc3QgPSBzdGFydFxuXHR2YXIgY2hpbGRMYXN0ID0gc3RhcnRcblx0dmFyIG5leHRPYmplY3Q7XG5cdHZhciBwcmV2aW91c09iamVjdDtcblx0XHRcblx0cHJldmlvdXNPYmplY3QgPSB0aGlzLmZpcnN0Ll9pUHJldjtcblx0XG5cdGlmKHByZXZpb3VzT2JqZWN0KVxuXHR7XG5cdFx0bmV4dE9iamVjdCA9IHByZXZpb3VzT2JqZWN0Ll9pTmV4dDtcblx0XHRjaGlsZEZpcnN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRcdHByZXZpb3VzT2JqZWN0Ll9pTmV4dCA9IGNoaWxkRmlyc3Q7XHRcdFxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdG5leHRPYmplY3QgPSB0aGlzO1xuXHR9XHRcblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0XG5cdC8vIG5vdyBpbnNlcnQgdGhlIGVuZCBmaWx0ZXIgYmxvY2suLlxuXHRcblx0Lypcblx0ICogaW5zZXJ0IGVuZCBmaWx0ZXJcblx0ICovXG5cdHZhciBjaGlsZEZpcnN0ID0gZW5kXG5cdHZhciBjaGlsZExhc3QgPSBlbmRcblx0dmFyIG5leHRPYmplY3QgPSBudWxsO1xuXHR2YXIgcHJldmlvdXNPYmplY3QgPSBudWxsO1xuXHRcdFxuXHRwcmV2aW91c09iamVjdCA9IHRoaXMubGFzdDtcblx0bmV4dE9iamVjdCA9IHByZXZpb3VzT2JqZWN0Ll9pTmV4dDtcblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0Y2hpbGRGaXJzdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gY2hpbGRGaXJzdDtcdFxuXHRcblx0dmFyIHVwZGF0ZUxhc3QgPSB0aGlzO1xuXHRcblx0dmFyIHByZXZMYXN0ID0gdGhpcy5sYXN0O1xuXHR3aGlsZSh1cGRhdGVMYXN0KVxuXHR7XG5cdFx0aWYodXBkYXRlTGFzdC5sYXN0ID09IHByZXZMYXN0KVxuXHRcdHtcblx0XHRcdHVwZGF0ZUxhc3QubGFzdCA9IGVuZDtcblx0XHR9XG5cdFx0dXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3QucGFyZW50O1xuXHR9XG5cdFxuXHR0aGlzLmZpcnN0ID0gc3RhcnQ7XG5cdFxuXHQvLyBpZiB3ZWJHTC4uLlxuXHRpZih0aGlzLl9fcmVuZGVyR3JvdXApXG5cdHtcblx0XHR0aGlzLl9fcmVuZGVyR3JvdXAuYWRkRmlsdGVyQmxvY2tzKHN0YXJ0LCBlbmQpO1xuXHR9XG5cdFxufVxuXG4vKlxuICogUmVtb3ZlcyB0aGUgZmlsdGVyIHRvIHRoaXMgZGlzcGxheU9iamVjdFxuICpcbiAqIEBtZXRob2QgcmVtb3ZlRmlsdGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLnJlbW92ZUZpbHRlciA9IGZ1bmN0aW9uKGRhdGEpXG57XG5cdC8vaWYoIXRoaXMuZmlsdGVyKXJldHVybjtcblx0Ly90aGlzLmZpbHRlciA9IGZhbHNlO1xuXHRjb25zb2xlLmxvZyhcIllVT0lPXCIpXG5cdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdHZhciBzdGFydEJsb2NrID0gZGF0YS5zdGFydDtcblx0XG5cdFxuXHR2YXIgbmV4dE9iamVjdCA9IHN0YXJ0QmxvY2suX2lOZXh0O1xuXHR2YXIgcHJldmlvdXNPYmplY3QgPSBzdGFydEJsb2NrLl9pUHJldjtcblx0XHRcblx0aWYobmV4dE9iamVjdCluZXh0T2JqZWN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRpZihwcmV2aW91c09iamVjdClwcmV2aW91c09iamVjdC5faU5leHQgPSBuZXh0T2JqZWN0O1x0XHRcblx0XG5cdHRoaXMuZmlyc3QgPSBzdGFydEJsb2NrLl9pTmV4dDtcblx0XG5cdC8vIHJlbW92ZSB0aGUgZW5kIGZpbHRlclxuXHR2YXIgbGFzdEJsb2NrID0gZGF0YS5lbmQ7XG5cdFxuXHR2YXIgbmV4dE9iamVjdCA9IGxhc3RCbG9jay5faU5leHQ7XG5cdHZhciBwcmV2aW91c09iamVjdCA9IGxhc3RCbG9jay5faVByZXY7XG5cdFx0XG5cdGlmKG5leHRPYmplY3QpbmV4dE9iamVjdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcdFx0XG5cdFxuXHQvLyB0aGlzIGlzIGFsd2F5cyB0cnVlIHRvbyFcblx0dmFyIHRlbXBMYXN0ID0gIGxhc3RCbG9jay5faVByZXY7XHRcblx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhcmVudHMgbGFzdCBpcyB1cGRhdGVkIHRvb1xuXHR2YXIgdXBkYXRlTGFzdCA9IHRoaXM7XG5cdHdoaWxlKHVwZGF0ZUxhc3QubGFzdCA9PSBsYXN0QmxvY2spXG5cdHtcblx0XHR1cGRhdGVMYXN0Lmxhc3QgPSB0ZW1wTGFzdDtcblx0XHR1cGRhdGVMYXN0ID0gdXBkYXRlTGFzdC5wYXJlbnQ7XG5cdFx0aWYoIXVwZGF0ZUxhc3QpYnJlYWs7XG5cdH1cblx0XG5cdC8vIGlmIHdlYkdMLi4uXG5cdGlmKHRoaXMuX19yZW5kZXJHcm91cClcblx0e1xuXHRcdHRoaXMuX19yZW5kZXJHcm91cC5yZW1vdmVGaWx0ZXJCbG9ja3Moc3RhcnRCbG9jaywgbGFzdEJsb2NrKTtcblx0fVxufVxuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHQvLyBUT0RPIE9QVElNSVpFIFRISVMhISB3aXRoIGRpcnR5XG5cdGlmKHRoaXMucm90YXRpb24gIT09IHRoaXMucm90YXRpb25DYWNoZSlcblx0e1xuXHRcdHRoaXMucm90YXRpb25DYWNoZSA9IHRoaXMucm90YXRpb247XG5cdFx0dGhpcy5fc3IgPSAgTWF0aC5zaW4odGhpcy5yb3RhdGlvbik7XG5cdFx0dGhpcy5fY3IgPSAgTWF0aC5jb3ModGhpcy5yb3RhdGlvbik7XG5cdH1cdFxuXHRcblx0dmFyIGxvY2FsVHJhbnNmb3JtID0gdGhpcy5sb2NhbFRyYW5zZm9ybTtcblx0dmFyIHBhcmVudFRyYW5zZm9ybSA9IHRoaXMucGFyZW50LndvcmxkVHJhbnNmb3JtO1xuXHR2YXIgd29ybGRUcmFuc2Zvcm0gPSB0aGlzLndvcmxkVHJhbnNmb3JtO1xuXHQvL2NvbnNvbGUubG9nKGxvY2FsVHJhbnNmb3JtKVxuXHRsb2NhbFRyYW5zZm9ybVswXSA9IHRoaXMuX2NyICogdGhpcy5zY2FsZS54O1xuXHRsb2NhbFRyYW5zZm9ybVsxXSA9IC10aGlzLl9zciAqIHRoaXMuc2NhbGUueVxuXHRsb2NhbFRyYW5zZm9ybVszXSA9IHRoaXMuX3NyICogdGhpcy5zY2FsZS54O1xuXHRsb2NhbFRyYW5zZm9ybVs0XSA9IHRoaXMuX2NyICogdGhpcy5zY2FsZS55O1xuXHRcblx0Ly8gVE9ETyAtLT4gZG8gd2UgZXZlbiBuZWVkIGEgbG9jYWwgbWF0cml4Pz8/XG5cdFxuXHR2YXIgcHggPSB0aGlzLnBpdm90Lng7XG5cdHZhciBweSA9IHRoaXMucGl2b3QueTtcbiAgIFx0XG4gICAgLy8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG4gICAgdmFyIGEwMCA9IGxvY2FsVHJhbnNmb3JtWzBdLCBhMDEgPSBsb2NhbFRyYW5zZm9ybVsxXSwgYTAyID0gdGhpcy5wb3NpdGlvbi54IC0gbG9jYWxUcmFuc2Zvcm1bMF0gKiBweCAtIHB5ICogbG9jYWxUcmFuc2Zvcm1bMV0sXG4gICAgICAgIGExMCA9IGxvY2FsVHJhbnNmb3JtWzNdLCBhMTEgPSBsb2NhbFRyYW5zZm9ybVs0XSwgYTEyID0gdGhpcy5wb3NpdGlvbi55IC0gbG9jYWxUcmFuc2Zvcm1bNF0gKiBweSAtIHB4ICogbG9jYWxUcmFuc2Zvcm1bM10sXG5cbiAgICAgICAgYjAwID0gcGFyZW50VHJhbnNmb3JtWzBdLCBiMDEgPSBwYXJlbnRUcmFuc2Zvcm1bMV0sIGIwMiA9IHBhcmVudFRyYW5zZm9ybVsyXSxcbiAgICAgICAgYjEwID0gcGFyZW50VHJhbnNmb3JtWzNdLCBiMTEgPSBwYXJlbnRUcmFuc2Zvcm1bNF0sIGIxMiA9IHBhcmVudFRyYW5zZm9ybVs1XTtcblxuXHRsb2NhbFRyYW5zZm9ybVsyXSA9IGEwMlxuXHRsb2NhbFRyYW5zZm9ybVs1XSA9IGExMlxuXHRcbiAgICB3b3JsZFRyYW5zZm9ybVswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMDtcbiAgICB3b3JsZFRyYW5zZm9ybVsxXSA9IGIwMCAqIGEwMSArIGIwMSAqIGExMTtcbiAgICB3b3JsZFRyYW5zZm9ybVsyXSA9IGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMjtcblxuICAgIHdvcmxkVHJhbnNmb3JtWzNdID0gYjEwICogYTAwICsgYjExICogYTEwO1xuICAgIHdvcmxkVHJhbnNmb3JtWzRdID0gYjEwICogYTAxICsgYjExICogYTExO1xuICAgIHdvcmxkVHJhbnNmb3JtWzVdID0gYjEwICogYTAyICsgYjExICogYTEyICsgYjEyO1xuXG5cdC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIGFmZmluZSB0cmFuc2Zvcm1hdGlvbiwgd2UgY2FuIG9wdGltaXNlIHRoZSBtYXRyaXggY29uY2F0ZW5hdGlvbiBwcm9jZXNzLi4gd29vbyFcblx0Ly8gbWF0My5tdWx0aXBseSh0aGlzLmxvY2FsVHJhbnNmb3JtLCB0aGlzLnBhcmVudC53b3JsZFRyYW5zZm9ybSwgdGhpcy53b3JsZFRyYW5zZm9ybSk7XG5cdHRoaXMud29ybGRBbHBoYSA9IHRoaXMuYWxwaGEgKiB0aGlzLnBhcmVudC53b3JsZEFscGhhO1xuXHRcblx0dGhpcy52Y291bnQgPSBQSVhJLnZpc2libGVDb3VudDtcblxufVxuXG5QSVhJLnZpc2libGVDb3VudCA9IDA7XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblxuLyoqXG4gKiBBIERpc3BsYXlPYmplY3RDb250YWluZXIgcmVwcmVzZW50cyBhIGNvbGxlY3Rpb24gb2YgZGlzcGxheSBvYmplY3RzLlxuICogSXQgaXMgdGhlIGJhc2UgY2xhc3Mgb2YgYWxsIGRpc3BsYXkgb2JqZWN0cyB0aGF0IGFjdCBhcyBhIGNvbnRhaW5lciBmb3Igb3RoZXIgb2JqZWN0cy5cbiAqXG4gKiBAY2xhc3MgRGlzcGxheU9iamVjdENvbnRhaW5lciBcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdC5jYWxsKCB0aGlzICk7XG5cdFxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIG9mIGNoaWxkcmVuIG9mIHRoaXMgY29udGFpbmVyLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgY2hpbGRyZW5cblx0ICogQHR5cGUgQXJyYXk8RGlzcGxheU9iamVjdD5cblx0ICogQHJlYWRPbmx5XG5cdCAqL1x0XG5cdHRoaXMuY2hpbGRyZW4gPSBbXTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlICk7XG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyO1xuXG4vKipcbiAqIEFkZHMgYSBjaGlsZCB0byB0aGUgY29udGFpbmVyLlxuICpcbiAqIEBtZXRob2QgYWRkQ2hpbGRcbiAqIEBwYXJhbSBjaGlsZCB7RGlzcGxheU9iamVjdH0gVGhlIERpc3BsYXlPYmplY3QgdG8gYWRkIHRvIHRoZSBjb250YWluZXJcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uKGNoaWxkKVxue1xuXHRpZihjaGlsZC5wYXJlbnQgIT0gdW5kZWZpbmVkKVxuXHR7XG5cdFx0XG5cdFx0Ly8vLyBDT1VMRCBCRSBUSElTPz8/XG5cdFx0Y2hpbGQucGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0Ly9cdHJldHVybjtcblx0fVxuXG5cdGNoaWxkLnBhcmVudCA9IHRoaXM7XG5cdFxuXHR0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1x0XG5cdFxuXHQvLyB1cGRhdGUgdGhlIHN0YWdlIHJlZmZlcmVuY2UuLlxuXHRcblx0aWYodGhpcy5zdGFnZSlcblx0e1xuXHRcdHZhciB0bXBDaGlsZCA9IGNoaWxkO1xuXHRcdGRvXG5cdFx0e1xuXHRcdFx0aWYodG1wQ2hpbGQuaW50ZXJhY3RpdmUpdGhpcy5zdGFnZS5kaXJ0eSA9IHRydWU7XG5cdFx0XHR0bXBDaGlsZC5zdGFnZSA9IHRoaXMuc3RhZ2U7XG5cdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHR9XHRcblx0XHR3aGlsZSh0bXBDaGlsZClcblx0fVxuXHRcblx0Ly8gTElOS0VEIExJU1QgLy9cblx0XG5cdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdHZhciBjaGlsZEZpcnN0ID0gY2hpbGQuZmlyc3Rcblx0dmFyIGNoaWxkTGFzdCA9IGNoaWxkLmxhc3Q7XG5cdHZhciBuZXh0T2JqZWN0O1xuXHR2YXIgcHJldmlvdXNPYmplY3Q7XG5cdFxuXHQvLyB0aGlzIGNvdWxkIGJlIHdyb25nIGlmIHRoZXJlIGlzIGEgZmlsdGVyPz9cblx0aWYodGhpcy5fZmlsdGVycyB8fCB0aGlzLl9tYXNrKVxuXHR7XG5cdFx0cHJldmlvdXNPYmplY3QgPSAgdGhpcy5sYXN0Ll9pUHJldjtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRwcmV2aW91c09iamVjdCA9IHRoaXMubGFzdDtcblx0fVxuXG5cdG5leHRPYmplY3QgPSBwcmV2aW91c09iamVjdC5faU5leHQ7XG5cdFxuXHQvLyBhbHdheXMgdHJ1ZSBpbiB0aGlzIGNhc2Vcblx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhcmVudHMgbGFzdCBpcyB1cGRhdGVkIHRvb1xuXHR2YXIgdXBkYXRlTGFzdCA9IHRoaXM7XG5cdHZhciBwcmV2TGFzdCA9IHByZXZpb3VzT2JqZWN0O1xuXHRcblx0d2hpbGUodXBkYXRlTGFzdClcblx0e1xuXHRcdGlmKHVwZGF0ZUxhc3QubGFzdCA9PSBwcmV2TGFzdClcblx0XHR7XG5cdFx0XHR1cGRhdGVMYXN0Lmxhc3QgPSBjaGlsZC5sYXN0O1xuXHRcdH1cblx0XHR1cGRhdGVMYXN0ID0gdXBkYXRlTGFzdC5wYXJlbnQ7XG5cdH1cblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0Y2hpbGRGaXJzdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gY2hpbGRGaXJzdDtcdFx0XG5cblx0Ly8gbmVlZCB0byByZW1vdmUgYW55IHJlbmRlciBncm91cHMuLlxuXHRpZih0aGlzLl9fcmVuZGVyR3JvdXApXG5cdHtcblx0XHQvLyBiZWluZyB1c2VkIGJ5IGEgcmVuZGVyVGV4dHVyZS4uIGlmIGl0IGV4aXN0cyB0aGVuIGl0IG11c3QgYmUgZnJvbSBhIHJlbmRlciB0ZXh0dXJlO1xuXHRcdGlmKGNoaWxkLl9fcmVuZGVyR3JvdXApY2hpbGQuX19yZW5kZXJHcm91cC5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oY2hpbGQpO1xuXHRcdC8vIGFkZCB0aGVtIHRvIHRoZSBuZXcgcmVuZGVyIGdyb3VwLi5cblx0XHR0aGlzLl9fcmVuZGVyR3JvdXAuYWRkRGlzcGxheU9iamVjdEFuZENoaWxkcmVuKGNoaWxkKTtcblx0fVxuXHRcbn1cblxuLyoqXG4gKiBBZGRzIGEgY2hpbGQgdG8gdGhlIGNvbnRhaW5lciBhdCBhIHNwZWNpZmllZCBpbmRleC4gSWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAqXG4gKiBAbWV0aG9kIGFkZENoaWxkQXRcbiAqIEBwYXJhbSBjaGlsZCB7RGlzcGxheU9iamVjdH0gVGhlIGNoaWxkIHRvIGFkZFxuICogQHBhcmFtIGluZGV4IHtOdW1iZXJ9IFRoZSBpbmRleCB0byBwbGFjZSB0aGUgY2hpbGQgaW5cbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDaGlsZEF0ID0gZnVuY3Rpb24oY2hpbGQsIGluZGV4KVxue1xuXHRpZihpbmRleCA+PSAwICYmIGluZGV4IDw9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuXHR7XG5cdFx0aWYoY2hpbGQucGFyZW50ICE9IHVuZGVmaW5lZClcblx0XHR7XG5cdFx0XHRjaGlsZC5wYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHRcdH1cblx0XHRjaGlsZC5wYXJlbnQgPSB0aGlzO1xuXHRcdFxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIHRtcENoaWxkID0gY2hpbGQ7XG5cdFx0XHRkb1xuXHRcdFx0e1xuXHRcdFx0XHRpZih0bXBDaGlsZC5pbnRlcmFjdGl2ZSl0aGlzLnN0YWdlLmRpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0dG1wQ2hpbGQuc3RhZ2UgPSB0aGlzLnN0YWdlO1xuXHRcdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHRcdH1cblx0XHRcdHdoaWxlKHRtcENoaWxkKVxuXHRcdH1cblx0XHRcblx0XHQvLyBtb2RpZnkgdGhlIGxpc3QuLlxuXHRcdHZhciBjaGlsZEZpcnN0ID0gY2hpbGQuZmlyc3Q7XG5cdFx0dmFyIGNoaWxkTGFzdCA9IGNoaWxkLmxhc3Q7XG5cdFx0dmFyIG5leHRPYmplY3Q7XG5cdFx0dmFyIHByZXZpb3VzT2JqZWN0O1xuXHRcdFxuXHRcdGlmKGluZGV4ID09IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuXHRcdHtcblx0XHRcdHByZXZpb3VzT2JqZWN0ID0gIHRoaXMubGFzdDtcblx0XHRcdHZhciB1cGRhdGVMYXN0ID0gdGhpcztcblx0XHRcdHZhciBwcmV2TGFzdCA9IHRoaXMubGFzdDtcblx0XHRcdHdoaWxlKHVwZGF0ZUxhc3QpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKHVwZGF0ZUxhc3QubGFzdCA9PSBwcmV2TGFzdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVwZGF0ZUxhc3QubGFzdCA9IGNoaWxkLmxhc3Q7XG5cdFx0XHRcdH1cblx0XHRcdFx0dXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3QucGFyZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmKGluZGV4ID09IDApXG5cdFx0e1xuXHRcdFx0cHJldmlvdXNPYmplY3QgPSB0aGlzO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0cHJldmlvdXNPYmplY3QgPSB0aGlzLmNoaWxkcmVuW2luZGV4LTFdLmxhc3Q7XG5cdFx0fVxuXHRcdFxuXHRcdG5leHRPYmplY3QgPSBwcmV2aW91c09iamVjdC5faU5leHQ7XG5cdFx0XG5cdFx0Ly8gYWx3YXlzIHRydWUgaW4gdGhpcyBjYXNlXG5cdFx0aWYobmV4dE9iamVjdClcblx0XHR7XG5cdFx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRcdGNoaWxkTGFzdC5faU5leHQgPSBuZXh0T2JqZWN0O1xuXHRcdH1cblx0XHRcblx0XHRjaGlsZEZpcnN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRcdHByZXZpb3VzT2JqZWN0Ll9pTmV4dCA9IGNoaWxkRmlyc3Q7XHRcdFxuXG5cdFx0dGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIGNoaWxkKTtcblx0XHQvLyBuZWVkIHRvIHJlbW92ZSBhbnkgcmVuZGVyIGdyb3Vwcy4uXG5cdFx0aWYodGhpcy5fX3JlbmRlckdyb3VwKVxuXHRcdHtcblx0XHRcdC8vIGJlaW5nIHVzZWQgYnkgYSByZW5kZXJUZXh0dXJlLi4gaWYgaXQgZXhpc3RzIHRoZW4gaXQgbXVzdCBiZSBmcm9tIGEgcmVuZGVyIHRleHR1cmU7XG5cdFx0XHRpZihjaGlsZC5fX3JlbmRlckdyb3VwKWNoaWxkLl9fcmVuZGVyR3JvdXAucmVtb3ZlRGlzcGxheU9iamVjdEFuZENoaWxkcmVuKGNoaWxkKTtcblx0XHRcdC8vIGFkZCB0aGVtIHRvIHRoZSBuZXcgcmVuZGVyIGdyb3VwLi5cblx0XHRcdHRoaXMuX19yZW5kZXJHcm91cC5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oY2hpbGQpO1xuXHRcdH1cblx0XHRcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBUaGUgaW5kZXggXCIrIGluZGV4ICtcIiBzdXBwbGllZCBpcyBvdXQgb2YgYm91bmRzIFwiICsgdGhpcy5jaGlsZHJlbi5sZW5ndGgpO1xuXHR9XG59XG5cbi8qKlxuICogW05ZSV0gU3dhcHMgdGhlIGRlcHRoIG9mIDIgZGlzcGxheU9iamVjdHNcbiAqXG4gKiBAbWV0aG9kIHN3YXBDaGlsZHJlblxuICogQHBhcmFtIGNoaWxkIHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIGNoaWxkMiB7RGlzcGxheU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUuc3dhcENoaWxkcmVuID0gZnVuY3Rpb24oY2hpbGQsIGNoaWxkMilcbntcblx0Lypcblx0ICogdGhpcyBmdW50aW9uIG5lZWRzIHRvIGJlIHJlY29kZWQuLiBcblx0ICogY2FuIGJlIGRvbmUgYSBsb3QgZmFzdGVyLi5cblx0ICovXG5cdHJldHVybjtcblx0XG5cdC8vIG5lZWQgdG8gZml4IHRoaXMgZnVuY3Rpb24gOi9cblx0Lypcblx0Ly8gVE9ETyBJIGFscmVhZHkga25vdyB0aGlzPz9cblx0dmFyIGluZGV4ID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKCBjaGlsZCApO1xuXHR2YXIgaW5kZXgyID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKCBjaGlsZDIgKTtcblx0XG5cdGlmICggaW5kZXggIT09IC0xICYmIGluZGV4MiAhPT0gLTEgKSBcblx0e1xuXHRcdC8vIGNvb2xcblx0XHRcblx0XHQvKlxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0Ly8gdGhpcyBpcyB0byBzYXRpc2Z5IHRoZSB3ZWJHTCBiYXRjaGluZy4uXG5cdFx0XHQvLyBUT0RPIHN1cmUgdGhlcmUgaXMgYSBuaWNlciB3YXkgdG8gYWNoaWV2ZSB0aGlzIVxuXHRcdFx0dGhpcy5zdGFnZS5fX3JlbW92ZUNoaWxkKGNoaWxkKTtcblx0XHRcdHRoaXMuc3RhZ2UuX19yZW1vdmVDaGlsZChjaGlsZDIpO1xuXHRcdFx0XG5cdFx0XHR0aGlzLnN0YWdlLl9fYWRkQ2hpbGQoY2hpbGQpO1xuXHRcdFx0dGhpcy5zdGFnZS5fX2FkZENoaWxkKGNoaWxkMik7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIHN3YXAgdGhlIHBvc2l0aW9ucy4uXG5cdFx0dGhpcy5jaGlsZHJlbltpbmRleF0gPSBjaGlsZDI7XG5cdFx0dGhpcy5jaGlsZHJlbltpbmRleDJdID0gY2hpbGQ7XG5cdFx0XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGNoaWxkICsgXCIgQm90aCB0aGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdHMgbXVzdCBiZSBhIGNoaWxkIG9mIHRoZSBjYWxsZXIgXCIgKyB0aGlzKTtcblx0fSovXG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgQ2hpbGQgYXQgdGhlIHNwZWNpZmllZCBpbmRleFxuICpcbiAqIEBtZXRob2QgZ2V0Q2hpbGRBdFxuICogQHBhcmFtIGluZGV4IHtOdW1iZXJ9IFRoZSBpbmRleCB0byBnZXQgdGhlIGNoaWxkIGZyb21cbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5nZXRDaGlsZEF0ID0gZnVuY3Rpb24oaW5kZXgpXG57XG5cdGlmKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmNoaWxkcmVuLmxlbmd0aClcblx0e1xuXHRcdHJldHVybiB0aGlzLmNoaWxkcmVuW2luZGV4XTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBCb3RoIHRoZSBzdXBwbGllZCBEaXNwbGF5T2JqZWN0cyBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlciBcIiArIHRoaXMpO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGNoaWxkIGZyb20gdGhlIGNvbnRhaW5lci5cbiAqXG4gKiBAbWV0aG9kIHJlbW92ZUNoaWxkXG4gKiBAcGFyYW0gY2hpbGQge0Rpc3BsYXlPYmplY3R9IFRoZSBEaXNwbGF5T2JqZWN0IHRvIHJlbW92ZVxuICovXG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24oY2hpbGQpXG57XG5cdHZhciBpbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZiggY2hpbGQgKTtcblx0aWYgKCBpbmRleCAhPT0gLTEgKSBcblx0e1xuXHRcdC8vIHVubGluayAvL1xuXHRcdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdFx0dmFyIGNoaWxkRmlyc3QgPSBjaGlsZC5maXJzdDtcblx0XHR2YXIgY2hpbGRMYXN0ID0gY2hpbGQubGFzdDtcblx0XHRcblx0XHR2YXIgbmV4dE9iamVjdCA9IGNoaWxkTGFzdC5faU5leHQ7XG5cdFx0dmFyIHByZXZpb3VzT2JqZWN0ID0gY2hpbGRGaXJzdC5faVByZXY7XG5cdFx0XHRcblx0XHRpZihuZXh0T2JqZWN0KW5leHRPYmplY3QuX2lQcmV2ID0gcHJldmlvdXNPYmplY3Q7XG5cdFx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcdFx0XG5cdFx0XG5cdFx0aWYodGhpcy5sYXN0ID09IGNoaWxkTGFzdClcblx0XHR7XG5cdFx0XHR2YXIgdGVtcExhc3QgPSAgY2hpbGRGaXJzdC5faVByZXY7XHRcblx0XHRcdC8vIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBwYXJlbnRzIGxhc3QgaXMgdXBkYXRlZCB0b29cblx0XHRcdHZhciB1cGRhdGVMYXN0ID0gdGhpcztcblx0XHRcdHdoaWxlKHVwZGF0ZUxhc3QubGFzdCA9PSBjaGlsZExhc3QubGFzdClcblx0XHRcdHtcblx0XHRcdFx0dXBkYXRlTGFzdC5sYXN0ID0gdGVtcExhc3Q7XG5cdFx0XHRcdHVwZGF0ZUxhc3QgPSB1cGRhdGVMYXN0LnBhcmVudDtcblx0XHRcdFx0aWYoIXVwZGF0ZUxhc3QpYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGNoaWxkTGFzdC5faU5leHQgPSBudWxsO1xuXHRcdGNoaWxkRmlyc3QuX2lQcmV2ID0gbnVsbDtcblx0XHQgXG5cdFx0Ly8gdXBkYXRlIHRoZSBzdGFnZSByZWZlcmVuY2UuLlxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIHRtcENoaWxkID0gY2hpbGQ7XG5cdFx0XHRkb1xuXHRcdFx0e1xuXHRcdFx0XHRpZih0bXBDaGlsZC5pbnRlcmFjdGl2ZSl0aGlzLnN0YWdlLmRpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0dG1wQ2hpbGQuc3RhZ2UgPSBudWxsO1xuXHRcdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHRcdH1cdFxuXHRcdFx0d2hpbGUodG1wQ2hpbGQpXG5cdFx0fVxuXHRcblx0XHQvLyB3ZWJHTCB0cmltXG5cdFx0aWYoY2hpbGQuX19yZW5kZXJHcm91cClcblx0XHR7XG5cdFx0XHRjaGlsZC5fX3JlbmRlckdyb3VwLnJlbW92ZURpc3BsYXlPYmplY3RBbmRDaGlsZHJlbihjaGlsZCk7XG5cdFx0fVxuXHRcdFxuXHRcdGNoaWxkLnBhcmVudCA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLmNoaWxkcmVuLnNwbGljZSggaW5kZXgsIDEgKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBUaGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdCBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlciBcIiArIHRoaXMpO1xuXHR9XG59XG5cbi8qXG4gKiBVcGRhdGVzIHRoZSBjb250YWluZXIncyBjaGlsZHJlbidzIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRpZighdGhpcy52aXNpYmxlKXJldHVybjtcblx0XG5cdFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwoIHRoaXMgKTtcblx0XG5cdGZvcih2YXIgaT0wLGo9dGhpcy5jaGlsZHJlbi5sZW5ndGg7IGk8ajsgaSsrKVxuXHR7XG5cdFx0dGhpcy5jaGlsZHJlbltpXS51cGRhdGVUcmFuc2Zvcm0oKTtcdFxuXHR9XG59XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblBJWEkuYmxlbmRNb2RlcyA9IHt9O1xuUElYSS5ibGVuZE1vZGVzLk5PUk1BTCA9IDA7XG5QSVhJLmJsZW5kTW9kZXMuU0NSRUVOID0gMTtcblxuXG4vKipcbiAqIFRoZSBTUHJpdGUgb2JqZWN0IGlzIHRoZSBiYXNlIGZvciBhbGwgdGV4dHVyZWQgb2JqZWN0cyB0aGF0IGFyZSByZW5kZXJlZCB0byB0aGUgc2NyZWVuXG4gKlxuICogQGNsYXNzIFNwcml0ZVxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdGV4dHVyZSB7VGV4dHVyZX0gVGhlIHRleHR1cmUgZm9yIHRoaXMgc3ByaXRlXG4gKiBAdHlwZSBTdHJpbmdcbiAqL1xuUElYSS5TcHJpdGUgPSBmdW5jdGlvbih0ZXh0dXJlKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIuY2FsbCggdGhpcyApO1xuXG5cdC8qKlxuXHQgKiBUaGUgYW5jaG9yIHNldHMgdGhlIG9yaWdpbiBwb2ludCBvZiB0aGUgdGV4dHVyZS5cblx0ICogVGhlIGRlZmF1bHQgaXMgMCwwIHRoaXMgbWVhbnMgdGhlIHRleHR1cmVzIG9yaWdpbiBpcyB0aGUgdG9wIGxlZnQgXG5cdCAqIFNldHRpbmcgdGhhbiBhbmNob3IgdG8gMC41LDAuNSBtZWFucyB0aGUgdGV4dHVyZXMgb3JpZ2luIGlzIGNlbnRlcmVkXG5cdCAqIFNldHRpbmcgdGhlIGFuY2hvciB0byAxLDEgd291bGQgbWVhbiB0aGUgdGV4dHVyZXMgb3JpZ2luIHBvaW50cyB3aWxsIGJlIHRoZSBib3R0b20gcmlnaHRcblx0ICpcbiAgICAgKiBAcHJvcGVydHkgYW5jaG9yXG4gICAgICogQHR5cGUgUG9pbnRcbiAgICAgKi9cblx0dGhpcy5hbmNob3IgPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdGV4dHVyZSB0aGF0IHRoZSBzcHJpdGUgaXMgdXNpbmdcblx0ICpcblx0ICogQHByb3BlcnR5IHRleHR1cmVcblx0ICogQHR5cGUgVGV4dHVyZVxuXHQgKi9cblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblxuXHQvKipcblx0ICogVGhlIGJsZW5kIG1vZGUgb2Ygc3ByaXRlLlxuXHQgKiBjdXJyZW50bHkgc3VwcG9ydHMgUElYSS5ibGVuZE1vZGVzLk5PUk1BTCBhbmQgUElYSS5ibGVuZE1vZGVzLlNDUkVFTlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmxlbmRNb2RlXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cblx0dGhpcy5ibGVuZE1vZGUgPSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMO1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHNwcml0ZSAodGhpcyBpcyBpbml0aWFsbHkgc2V0IGJ5IHRoZSB0ZXh0dXJlKVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgX3dpZHRoXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5fd2lkdGggPSAwO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSBzcHJpdGUgKHRoaXMgaXMgaW5pdGlhbGx5IHNldCBieSB0aGUgdGV4dHVyZSlcblx0ICpcblx0ICogQHByb3BlcnR5IF9oZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHR0aGlzLl9oZWlnaHQgPSAwO1xuXG5cdGlmKHRleHR1cmUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKVxuXHR7XG5cdFx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5vblRleHR1cmVVcGRhdGVCaW5kID0gdGhpcy5vblRleHR1cmVVcGRhdGUuYmluZCh0aGlzKTtcblx0XHR0aGlzLnRleHR1cmUuYWRkRXZlbnRMaXN0ZW5lciggJ3VwZGF0ZScsIHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCApO1xuXHR9XG5cblx0dGhpcy5yZW5kZXJhYmxlID0gdHJ1ZTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuU3ByaXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3ByaXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuU3ByaXRlO1xuXG4vKipcbiAqIFRoZSB3aWR0aCBvZiB0aGUgc3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGVpdmUgdGhlIHZhbHVlIHNldFxuICpcbiAqIEBwcm9wZXJ0eSB3aWR0aFxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLlNwcml0ZS5wcm90b3R5cGUsICd3aWR0aCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZS54ICogdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5zY2FsZS54ID0gdmFsdWUgLyB0aGlzLnRleHR1cmUuZnJhbWUud2lkdGhcbiAgICAgICAgdGhpcy5fd2lkdGggPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgaGVpZ2h0IG9mIHRoZSBzcHJpdGUsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgc2NhbGUgdG8gYWNoZWl2ZSB0aGUgdmFsdWUgc2V0XG4gKlxuICogQHByb3BlcnR5IGhlaWdodFxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLlNwcml0ZS5wcm90b3R5cGUsICdoZWlnaHQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICB0aGlzLnNjYWxlLnkgKiB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5zY2FsZS55ID0gdmFsdWUgLyB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNldHMgdGhlIHRleHR1cmUgb2YgdGhlIHNwcml0ZVxuICpcbiAqIEBtZXRob2Qgc2V0VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSBQSVhJIHRleHR1cmUgdGhhdCBpcyBkaXNwbGF5ZWQgYnkgdGhlIHNwcml0ZVxuICovXG5QSVhJLlNwcml0ZS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vIHN0b3AgY3VycmVudCB0ZXh0dXJlO1xuXHRpZih0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUgIT0gdGV4dHVyZS5iYXNlVGV4dHVyZSlcblx0e1xuXHRcdHRoaXMudGV4dHVyZUNoYW5nZSA9IHRydWU7XHRcblx0XHR0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXHRcdFxuXHRcdGlmKHRoaXMuX19yZW5kZXJHcm91cClcblx0XHR7XG5cdFx0XHR0aGlzLl9fcmVuZGVyR3JvdXAudXBkYXRlVGV4dHVyZSh0aGlzKTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0fVxuXHRcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIHNjYWxlIGFuZCBmcmFtZVxuICpcbiAqIEBtZXRob2Qgb25UZXh0dXJlVXBkYXRlXG4gKiBAcGFyYW0gZXZlbnRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3ByaXRlLnByb3RvdHlwZS5vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbihldmVudClcbntcblx0Ly90aGlzLnRleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3VwZGF0ZScsIHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCApO1xuXHRcblx0Ly8gc28gaWYgX3dpZHRoIGlzIDAgdGhlbiB3aWR0aCB3YXMgbm90IHNldC4uXG5cdGlmKHRoaXMuX3dpZHRoKXRoaXMuc2NhbGUueCA9IHRoaXMuX3dpZHRoIC8gdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuXHRpZih0aGlzLl9oZWlnaHQpdGhpcy5zY2FsZS55ID0gdGhpcy5faGVpZ2h0IC8gdGhpcy50ZXh0dXJlLmZyYW1lLmhlaWdodDtcblx0XG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xufVxuXG4vLyBzb21lIGhlbHBlciBmdW5jdGlvbnMuLlxuXG4vKipcbiAqIFxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIHNwcml0ZSB0aGF0IHdpbGwgY29udGFpbiBhIHRleHR1cmUgZnJvbSB0aGUgVGV4dHVyZUNhY2hlIGJhc2VkIG9uIHRoZSBmcmFtZUlkXG4gKiBUaGUgZnJhbWUgaWRzIGFyZSBjcmVhdGVkIHdoZW4gYSBUZXh0dXJlIHBhY2tlciBmaWxlIGhhcyBiZWVuIGxvYWRlZFxuICpcbiAqIEBtZXRob2QgZnJvbUZyYW1lXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0gZnJhbWVJZCB7U3RyaW5nfSBUaGUgZnJhbWUgSWQgb2YgdGhlIHRleHR1cmUgaW4gdGhlIGNhY2hlXG4gKiBAcmV0dXJuIHtTcHJpdGV9IEEgbmV3IFNwcml0ZSB1c2luZyBhIHRleHR1cmUgZnJvbSB0aGUgdGV4dHVyZSBjYWNoZSBtYXRjaGluZyB0aGUgZnJhbWVJZFxuICovXG5QSVhJLlNwcml0ZS5mcm9tRnJhbWUgPSBmdW5jdGlvbihmcmFtZUlkKVxue1xuXHR2YXIgdGV4dHVyZSA9IFBJWEkuVGV4dHVyZUNhY2hlW2ZyYW1lSWRdO1xuXHRpZighdGV4dHVyZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZnJhbWVJZCAnXCIrIGZyYW1lSWQgK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgdGV4dHVyZSBjYWNoZVwiICsgdGhpcyk7XG5cdHJldHVybiBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG59XG5cbi8qKlxuICogXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgc3ByaXRlIHRoYXQgd2lsbCBjb250YWluIGEgdGV4dHVyZSBiYXNlZCBvbiBhbiBpbWFnZSB1cmxcbiAqIElmIHRoZSBpbWFnZSBpcyBub3QgaW4gdGhlIHRleHR1cmUgY2FjaGUgaXQgd2lsbCBiZSBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIGZyb21JbWFnZVxuICogQHN0YXRpY1xuICogQHBhcmFtIGltYWdlSWQge1N0cmluZ30gVGhlIGltYWdlIHVybCBvZiB0aGUgdGV4dHVyZVxuICogQHJldHVybiB7U3ByaXRlfSBBIG5ldyBTcHJpdGUgdXNpbmcgYSB0ZXh0dXJlIGZyb20gdGhlIHRleHR1cmUgY2FjaGUgbWF0Y2hpbmcgdGhlIGltYWdlIGlkXG4gKi9cblBJWEkuU3ByaXRlLmZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlSWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb21JbWFnZShpbWFnZUlkKTtcblx0cmV0dXJuIG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIEEgTW92aWVDbGlwIGlzIGEgc2ltcGxlIHdheSB0byBkaXNwbGF5IGFuIGFuaW1hdGlvbiBkZXBpY3RlZCBieSBhIGxpc3Qgb2YgdGV4dHVyZXMuXG4gKlxuICogQGNsYXNzIE1vdmllQ2xpcFxuICogQGV4dGVuZHMgU3ByaXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB0ZXh0dXJlcyB7QXJyYXk8VGV4dHVyZT59IGFuIGFycmF5IG9mIHtUZXh0dXJlfSBvYmplY3RzIHRoYXQgbWFrZSB1cCB0aGUgYW5pbWF0aW9uXG4gKi9cblBJWEkuTW92aWVDbGlwID0gZnVuY3Rpb24odGV4dHVyZXMpXG57XG5cdFBJWEkuU3ByaXRlLmNhbGwodGhpcywgdGV4dHVyZXNbMF0pO1xuXG5cdC8qKlxuXHQgKiBUaGUgYXJyYXkgb2YgdGV4dHVyZXMgdGhhdCBtYWtlIHVwIHRoZSBhbmltYXRpb25cblx0ICpcblx0ICogQHByb3BlcnR5IHRleHR1cmVzXG5cdCAqIEB0eXBlIEFycmF5XG5cdCAqL1xuXHR0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG5cblx0LyoqXG5cdCAqIFRoZSBzcGVlZCB0aGF0IHRoZSBNb3ZpZUNsaXAgd2lsbCBwbGF5IGF0LiBIaWdoZXIgaXMgZmFzdGVyLCBsb3dlciBpcyBzbG93ZXJcblx0ICpcblx0ICogQHByb3BlcnR5IGFuaW1hdGlvblNwZWVkXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAxXG5cdCAqL1xuXHR0aGlzLmFuaW1hdGlvblNwZWVkID0gMTtcblxuXHQvKipcblx0ICogV2hldGhlciBvciBub3QgdGhlIG1vdmllIGNsaXAgcmVwZWF0cyBhZnRlciBwbGF5aW5nLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbG9vcFxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqIEBkZWZhdWx0IHRydWVcblx0ICovXG5cdHRoaXMubG9vcCA9IHRydWU7XG5cblx0LyoqXG5cdCAqIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIE1vdmllQ2xpcCBmaW5pc2hlcyBwbGF5aW5nXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBvbkNvbXBsZXRlXG5cdCAqIEB0eXBlIEZ1bmN0aW9uXG5cdCAqL1xuXHR0aGlzLm9uQ29tcGxldGUgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBbcmVhZC1vbmx5XSBUaGUgaW5kZXggTW92aWVDbGlwcyBjdXJyZW50IGZyYW1lICh0aGlzIG1heSBub3QgaGF2ZSB0byBiZSBhIHdob2xlIG51bWJlcilcblx0ICpcblx0ICogQHByb3BlcnR5IGN1cnJlbnRGcmFtZVxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgMFxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuY3VycmVudEZyYW1lID0gMDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gSW5kaWNhdGVzIGlmIHRoZSBNb3ZpZUNsaXAgaXMgY3VycmVudGx5IHBsYXlpbmdcblx0ICpcblx0ICogQHByb3BlcnR5IHBsYXlpbmdcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5TcHJpdGUucHJvdG90eXBlICk7XG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLk1vdmllQ2xpcDtcblxuLyoqXG4qIFtyZWFkLW9ubHldIHRvdGFsRnJhbWVzIGlzIHRoZSB0b3RhbCBudW1iZXIgb2YgZnJhbWVzIGluIHRoZSBNb3ZpZUNsaXAuIFRoaXMgaXMgdGhlIHNhbWUgYXMgbnVtYmVyIG9mIHRleHR1cmVzXG4qIGFzc2lnbmVkIHRvIHRoZSBNb3ZpZUNsaXAuXG4qXG4qIEBwcm9wZXJ0eSB0b3RhbEZyYW1lc1xuKiBAdHlwZSBOdW1iZXJcbiogQGRlZmF1bHQgMFxuKiBAcmVhZE9ubHlcbiovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoIFBJWEkuTW92aWVDbGlwLnByb3RvdHlwZSwgJ3RvdGFsRnJhbWVzJywge1xuXHRnZXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHRoaXMudGV4dHVyZXMubGVuZ3RoO1xuXHR9XG59KTtcblxuXG4vKipcbiAqIFN0b3BzIHRoZSBNb3ZpZUNsaXBcbiAqXG4gKiBAbWV0aG9kIHN0b3BcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFBsYXlzIHRoZSBNb3ZpZUNsaXBcbiAqXG4gKiBAbWV0aG9kIHBsYXlcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMucGxheWluZyA9IHRydWU7XG59XG5cbi8qKlxuICogU3RvcHMgdGhlIE1vdmllQ2xpcCBhbmQgZ29lcyB0byBhIHNwZWNpZmljIGZyYW1lXG4gKlxuICogQG1ldGhvZCBnb3RvQW5kU3RvcFxuICogQHBhcmFtIGZyYW1lTnVtYmVyIHtOdW1iZXJ9IGZyYW1lIGluZGV4IHRvIHN0b3AgYXRcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLmdvdG9BbmRTdG9wID0gZnVuY3Rpb24oZnJhbWVOdW1iZXIpXG57XG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xuXHR0aGlzLmN1cnJlbnRGcmFtZSA9IGZyYW1lTnVtYmVyO1xuXHR2YXIgcm91bmQgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAwLjUpIHwgMDtcblx0dGhpcy5zZXRUZXh0dXJlKHRoaXMudGV4dHVyZXNbcm91bmQgJSB0aGlzLnRleHR1cmVzLmxlbmd0aF0pO1xufVxuXG4vKipcbiAqIEdvZXMgdG8gYSBzcGVjaWZpYyBmcmFtZSBhbmQgYmVnaW5zIHBsYXlpbmcgdGhlIE1vdmllQ2xpcFxuICpcbiAqIEBtZXRob2QgZ290b0FuZFBsYXlcbiAqIEBwYXJhbSBmcmFtZU51bWJlciB7TnVtYmVyfSBmcmFtZSBpbmRleCB0byBzdGFydCBhdFxuICovXG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUuZ290b0FuZFBsYXkgPSBmdW5jdGlvbihmcmFtZU51bWJlcilcbntcblx0dGhpcy5jdXJyZW50RnJhbWUgPSBmcmFtZU51bWJlcjtcblx0dGhpcy5wbGF5aW5nID0gdHJ1ZTtcbn1cblxuLypcbiAqIFVwZGF0ZXMgdGhlIG9iamVjdCB0cmFuc2Zvcm0gZm9yIHJlbmRlcmluZ1xuICpcbiAqIEBtZXRob2QgdXBkYXRlVHJhbnNmb3JtXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLlNwcml0ZS5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG5cblx0aWYoIXRoaXMucGxheWluZylyZXR1cm47XG5cblx0dGhpcy5jdXJyZW50RnJhbWUgKz0gdGhpcy5hbmltYXRpb25TcGVlZDtcblxuXHR2YXIgcm91bmQgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAwLjUpIHwgMDtcblxuXHRpZih0aGlzLmxvb3AgfHwgcm91bmQgPCB0aGlzLnRleHR1cmVzLmxlbmd0aClcblx0e1xuXHRcdHRoaXMuc2V0VGV4dHVyZSh0aGlzLnRleHR1cmVzW3JvdW5kICUgdGhpcy50ZXh0dXJlcy5sZW5ndGhdKTtcblx0fVxuXHRlbHNlIGlmKHJvdW5kID49IHRoaXMudGV4dHVyZXMubGVuZ3RoKVxuXHR7XG5cdFx0dGhpcy5nb3RvQW5kU3RvcCh0aGlzLnRleHR1cmVzLmxlbmd0aCAtIDEpO1xuXHRcdGlmKHRoaXMub25Db21wbGV0ZSlcblx0XHR7XG5cdFx0XHR0aGlzLm9uQ29tcGxldGUoKTtcblx0XHR9XG5cdH1cbn1cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuRmlsdGVyQmxvY2sgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG59XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBUZXh0IE9iamVjdCB3aWxsIGNyZWF0ZSBhIGxpbmUocykgb2YgdGV4dCB0byBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgXCJcXG5cIlxuICpcbiAqIEBjbGFzcyBUZXh0XG4gKiBAZXh0ZW5kcyBTcHJpdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHRleHQge1N0cmluZ30gVGhlIGNvcHkgdGhhdCB5b3Ugd291bGQgbGlrZSB0aGUgdGV4dCB0byBkaXNwbGF5XG4gKiBAcGFyYW0gW3N0eWxlXSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIFtzdHlsZS5mb250XSB7U3RyaW5nfSBkZWZhdWx0IFwiYm9sZCAyMHB0IEFyaWFsXCIgVGhlIHN0eWxlIGFuZCBzaXplIG9mIHRoZSBmb250XG4gKiBAcGFyYW0gW3N0eWxlLmZpbGw9XCJibGFja1wiXSB7T2JqZWN0fSBBIGNhbnZhcyBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgZWcgXCJyZWRcIiwgXCIjMDBGRjAwXCJcbiAqIEBwYXJhbSBbc3R5bGUuYWxpZ249XCJsZWZ0XCJdIHtTdHJpbmd9IEFuIGFsaWdubWVudCBvZiB0aGUgbXVsdGlsaW5lIHRleHQgKFwibGVmdFwiLCBcImNlbnRlclwiIG9yIFwicmlnaHRcIilcbiAqIEBwYXJhbSBbc3R5bGUuc3Ryb2tlXSB7U3RyaW5nfSBBIGNhbnZhcyBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgc3Ryb2tlIGVnIFwiYmx1ZVwiLCBcIiNGQ0ZGMDBcIlxuICogQHBhcmFtIFtzdHlsZS5zdHJva2VUaGlja25lc3M9MF0ge051bWJlcn0gQSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSB0aGlja25lc3Mgb2YgdGhlIHN0cm9rZS4gRGVmYXVsdCBpcyAwIChubyBzdHJva2UpXG4gKiBAcGFyYW0gW3N0eWxlLndvcmRXcmFwPWZhbHNlXSB7Qm9vbGVhbn0gSW5kaWNhdGVzIGlmIHdvcmQgd3JhcCBzaG91bGQgYmUgdXNlZFxuICogQHBhcmFtIFtzdHlsZS53b3JkV3JhcFdpZHRoPTEwMF0ge051bWJlcn0gVGhlIHdpZHRoIGF0IHdoaWNoIHRleHQgd2lsbCB3cmFwXG4gKi9cblBJWEkuVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHN0eWxlKVxue1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgUElYSS5TcHJpdGUuY2FsbCh0aGlzLCBQSVhJLlRleHR1cmUuZnJvbUNhbnZhcyh0aGlzLmNhbnZhcykpO1xuXG4gICAgdGhpcy5zZXRUZXh0KHRleHQpO1xuICAgIHRoaXMuc2V0U3R5bGUoc3R5bGUpO1xuXG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xufTtcblxuLy8gY29uc3RydWN0b3JcblBJWEkuVGV4dC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBJWEkuU3ByaXRlLnByb3RvdHlwZSk7XG5QSVhJLlRleHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5UZXh0O1xuXG4vKipcbiAqIFNldCB0aGUgc3R5bGUgb2YgdGhlIHRleHRcbiAqXG4gKiBAbWV0aG9kIHNldFN0eWxlXG4gKiBAcGFyYW0gW3N0eWxlXSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIFtzdHlsZS5mb250PVwiYm9sZCAyMHB0IEFyaWFsXCJdIHtTdHJpbmd9IFRoZSBzdHlsZSBhbmQgc2l6ZSBvZiB0aGUgZm9udFxuICogQHBhcmFtIFtzdHlsZS5maWxsPVwiYmxhY2tcIl0ge09iamVjdH0gQSBjYW52YXMgZmlsbHN0eWxlIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSB0ZXh0IGVnIFwicmVkXCIsIFwiIzAwRkYwMFwiXG4gKiBAcGFyYW0gW3N0eWxlLmFsaWduPVwibGVmdFwiXSB7U3RyaW5nfSBBbiBhbGlnbm1lbnQgb2YgdGhlIG11bHRpbGluZSB0ZXh0IChcImxlZnRcIiwgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIpXG4gKiBAcGFyYW0gW3N0eWxlLnN0cm9rZT1cImJsYWNrXCJdIHtTdHJpbmd9IEEgY2FudmFzIGZpbGxzdHlsZSB0aGF0IHdpbGwgYmUgdXNlZCBvbiB0aGUgdGV4dCBzdHJva2UgZWcgXCJibHVlXCIsIFwiI0ZDRkYwMFwiXG4gKiBAcGFyYW0gW3N0eWxlLnN0cm9rZVRoaWNrbmVzcz0wXSB7TnVtYmVyfSBBIG51bWJlciB0aGF0IHJlcHJlc2VudHMgdGhlIHRoaWNrbmVzcyBvZiB0aGUgc3Ryb2tlLiBEZWZhdWx0IGlzIDAgKG5vIHN0cm9rZSlcbiAqIEBwYXJhbSBbc3R5bGUud29yZFdyYXA9ZmFsc2VdIHtCb29sZWFufSBJbmRpY2F0ZXMgaWYgd29yZCB3cmFwIHNob3VsZCBiZSB1c2VkXG4gKiBAcGFyYW0gW3N0eWxlLndvcmRXcmFwV2lkdGg9MTAwXSB7TnVtYmVyfSBUaGUgd2lkdGggYXQgd2hpY2ggdGV4dCB3aWxsIHdyYXBcbiAqL1xuUElYSS5UZXh0LnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlKVxue1xuICAgIHN0eWxlID0gc3R5bGUgfHwge307XG4gICAgc3R5bGUuZm9udCA9IHN0eWxlLmZvbnQgfHwgXCJib2xkIDIwcHQgQXJpYWxcIjtcbiAgICBzdHlsZS5maWxsID0gc3R5bGUuZmlsbCB8fCBcImJsYWNrXCI7XG4gICAgc3R5bGUuYWxpZ24gPSBzdHlsZS5hbGlnbiB8fCBcImxlZnRcIjtcbiAgICBzdHlsZS5zdHJva2UgPSBzdHlsZS5zdHJva2UgfHwgXCJibGFja1wiOyAvL3Byb3ZpZGUgYSBkZWZhdWx0LCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29kQm95RGlnaXRhbC9waXhpLmpzL2lzc3Vlcy8xMzZcbiAgICBzdHlsZS5zdHJva2VUaGlja25lc3MgPSBzdHlsZS5zdHJva2VUaGlja25lc3MgfHwgMDtcbiAgICBzdHlsZS53b3JkV3JhcCA9IHN0eWxlLndvcmRXcmFwIHx8IGZhbHNlO1xuICAgIHN0eWxlLndvcmRXcmFwV2lkdGggPSBzdHlsZS53b3JkV3JhcFdpZHRoIHx8IDEwMDtcbiAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29weSBmb3IgdGhlIHRleHQgb2JqZWN0LiBUbyBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgXCJcXG5cIlxuICpcbiAqIEBtZXRob3Mgc2V0VGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIGNvcHkgdGhhdCB5b3Ugd291bGQgbGlrZSB0aGUgdGV4dCB0byBkaXNwbGF5XG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uKHRleHQpXG57XG4gICAgdGhpcy50ZXh0ID0gdGV4dC50b1N0cmluZygpIHx8IFwiIFwiO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIHRleHRcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dCA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5jb250ZXh0LmZvbnQgPSB0aGlzLnN0eWxlLmZvbnQ7XG5cblx0dmFyIG91dHB1dFRleHQgPSB0aGlzLnRleHQ7XG5cblx0Ly8gd29yZCB3cmFwXG5cdC8vIHByZXNlcnZlIG9yaWdpbmFsIHRleHRcblx0aWYodGhpcy5zdHlsZS53b3JkV3JhcClvdXRwdXRUZXh0ID0gdGhpcy53b3JkV3JhcCh0aGlzLnRleHQpO1xuXG5cdC8vc3BsaXQgdGV4dCBpbnRvIGxpbmVzXG5cdHZhciBsaW5lcyA9IG91dHB1dFRleHQuc3BsaXQoLyg/OlxcclxcbnxcXHJ8XFxuKS8pO1xuXG5cdC8vY2FsY3VsYXRlIHRleHQgd2lkdGhcblx0dmFyIGxpbmVXaWR0aHMgPSBbXTtcblx0dmFyIG1heExpbmVXaWR0aCA9IDA7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgbGluZVdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KGxpbmVzW2ldKS53aWR0aDtcblx0XHRsaW5lV2lkdGhzW2ldID0gbGluZVdpZHRoO1xuXHRcdG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgbGluZVdpZHRoKTtcblx0fVxuXHR0aGlzLmNhbnZhcy53aWR0aCA9IG1heExpbmVXaWR0aCArIHRoaXMuc3R5bGUuc3Ryb2tlVGhpY2tuZXNzO1xuXG5cdC8vY2FsY3VsYXRlIHRleHQgaGVpZ2h0XG5cdHZhciBsaW5lSGVpZ2h0ID0gdGhpcy5kZXRlcm1pbmVGb250SGVpZ2h0KFwiZm9udDogXCIgKyB0aGlzLnN0eWxlLmZvbnQgICsgXCI7XCIpICsgdGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3M7XG5cdHRoaXMuY2FudmFzLmhlaWdodCA9IGxpbmVIZWlnaHQgKiBsaW5lcy5sZW5ndGg7XG5cblx0Ly9zZXQgY2FudmFzIHRleHQgc3R5bGVzXG5cdHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlLmZpbGw7XG5cdHRoaXMuY29udGV4dC5mb250ID0gdGhpcy5zdHlsZS5mb250O1xuXG5cdHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMuc3R5bGUuc3Ryb2tlO1xuXHR0aGlzLmNvbnRleHQubGluZVdpZHRoID0gdGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3M7XG5cblx0dGhpcy5jb250ZXh0LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG5cblx0Ly9kcmF3IGxpbmVzIGxpbmUgYnkgbGluZVxuXHRmb3IgKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgbGluZVBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQodGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3MgLyAyLCB0aGlzLnN0eWxlLnN0cm9rZVRoaWNrbmVzcyAvIDIgKyBpICogbGluZUhlaWdodCk7XG5cblx0XHRpZih0aGlzLnN0eWxlLmFsaWduID09IFwicmlnaHRcIilcblx0XHR7XG5cdFx0XHRsaW5lUG9zaXRpb24ueCArPSBtYXhMaW5lV2lkdGggLSBsaW5lV2lkdGhzW2ldO1xuXHRcdH1cblx0XHRlbHNlIGlmKHRoaXMuc3R5bGUuYWxpZ24gPT0gXCJjZW50ZXJcIilcblx0XHR7XG5cdFx0XHRsaW5lUG9zaXRpb24ueCArPSAobWF4TGluZVdpZHRoIC0gbGluZVdpZHRoc1tpXSkgLyAyO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuc3R5bGUuc3Ryb2tlICYmIHRoaXMuc3R5bGUuc3Ryb2tlVGhpY2tuZXNzKVxuXHRcdHtcblx0XHRcdHRoaXMuY29udGV4dC5zdHJva2VUZXh0KGxpbmVzW2ldLCBsaW5lUG9zaXRpb24ueCwgbGluZVBvc2l0aW9uLnkpO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuc3R5bGUuZmlsbClcblx0XHR7XG5cdFx0XHR0aGlzLmNvbnRleHQuZmlsbFRleHQobGluZXNbaV0sIGxpbmVQb3NpdGlvbi54LCBsaW5lUG9zaXRpb24ueSk7XG5cdFx0fVxuXHR9XG5cbiAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0ZXh0dXJlIHNpemUgYmFzZWQgb24gY2FudmFzIHNpemVcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHR1cmVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uKClcbntcbiAgICB0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICB0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xuICAgIHRoaXMudGV4dHVyZS5mcmFtZS53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMudGV4dHVyZS5mcmFtZS5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG5cbiAgXHR0aGlzLl93aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcblxuICAgIFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHRoaXMudGV4dHVyZS5iYXNlVGV4dHVyZSk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIHRyYW5zZm9yIG9mIHRoaXMgb2JqZWN0XG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRpZih0aGlzLmRpcnR5KVxuXHR7XG5cdFx0dGhpcy51cGRhdGVUZXh0KCk7XG5cdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0UElYSS5TcHJpdGUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybS5jYWxsKHRoaXMpO1xufTtcblxuLypcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8zNDQ0MS9lbGxpc2JiZW5cbiAqIGdyZWF0IHNvbHV0aW9uIHRvIHRoZSBwcm9ibGVtIVxuICpcbiAqIEBtZXRob2QgZGV0ZXJtaW5lRm9udEhlaWdodFxuICogQHBhcmFtIGZvbnRTdHlsZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5UZXh0LnByb3RvdHlwZS5kZXRlcm1pbmVGb250SGVpZ2h0ID0gZnVuY3Rpb24oZm9udFN0eWxlKVxue1xuXHQvLyBidWlsZCBhIGxpdHRsZSByZWZlcmVuY2UgZGljdGlvbmFyeSBzbyBpZiB0aGUgZm9udCBzdHlsZSBoYXMgYmVlbiB1c2VkIHJldHVybiBhXG5cdC8vIGNhY2hlZCB2ZXJzaW9uLi4uXG5cdHZhciByZXN1bHQgPSBQSVhJLlRleHQuaGVpZ2h0Q2FjaGVbZm9udFN0eWxlXTtcblxuXHRpZighcmVzdWx0KVxuXHR7XG5cdFx0dmFyIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XG5cdFx0dmFyIGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR2YXIgZHVtbXlUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJNXCIpO1xuXHRcdGR1bW15LmFwcGVuZENoaWxkKGR1bW15VGV4dCk7XG5cdFx0ZHVtbXkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgZm9udFN0eWxlICsgJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjAnKTtcblx0XHRib2R5LmFwcGVuZENoaWxkKGR1bW15KTtcblxuXHRcdHJlc3VsdCA9IGR1bW15Lm9mZnNldEhlaWdodDtcblx0XHRQSVhJLlRleHQuaGVpZ2h0Q2FjaGVbZm9udFN0eWxlXSA9IHJlc3VsdDtcblxuXHRcdGJvZHkucmVtb3ZlQ2hpbGQoZHVtbXkpO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogQXBwbGllcyBuZXdsaW5lcyB0byBhIHN0cmluZyB0byBoYXZlIGl0IG9wdGltYWxseSBmaXQgaW50byB0aGUgaG9yaXpvbnRhbFxuICogYm91bmRzIHNldCBieSB0aGUgVGV4dCBvYmplY3QncyB3b3JkV3JhcFdpZHRoIHByb3BlcnR5LlxuICpcbiAqIEBtZXRob2Qgd29yZFdyYXBcbiAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlRleHQucHJvdG90eXBlLndvcmRXcmFwID0gZnVuY3Rpb24odGV4dClcbntcblx0Ly8gR3JlZWR5IHdyYXBwaW5nIGFsZ29yaXRobSB0aGF0IHdpbGwgd3JhcCB3b3JkcyBhcyB0aGUgbGluZSBncm93cyBsb25nZXJcblx0Ly8gdGhhbiBpdHMgaG9yaXpvbnRhbCBib3VuZHMuXG5cdHZhciByZXN1bHQgPSBcIlwiO1xuXHR2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIHNwYWNlTGVmdCA9IHRoaXMuc3R5bGUud29yZFdyYXBXaWR0aDtcblx0XHR2YXIgd29yZHMgPSBsaW5lc1tpXS5zcGxpdChcIiBcIik7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB3b3Jkcy5sZW5ndGg7IGorKylcblx0XHR7XG5cdFx0XHR2YXIgd29yZFdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHdvcmRzW2pdKS53aWR0aDtcblx0XHRcdHZhciB3b3JkV2lkdGhXaXRoU3BhY2UgPSB3b3JkV2lkdGggKyB0aGlzLmNvbnRleHQubWVhc3VyZVRleHQoXCIgXCIpLndpZHRoO1xuXHRcdFx0aWYod29yZFdpZHRoV2l0aFNwYWNlID4gc3BhY2VMZWZ0KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBTa2lwIHByaW50aW5nIHRoZSBuZXdsaW5lIGlmIGl0J3MgdGhlIGZpcnN0IHdvcmQgb2YgdGhlIGxpbmUgdGhhdCBpc1xuXHRcdFx0XHQvLyBncmVhdGVyIHRoYW4gdGhlIHdvcmQgd3JhcCB3aWR0aC5cblx0XHRcdFx0aWYoaiA+IDApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXN1bHQgKz0gXCJcXG5cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXN1bHQgKz0gd29yZHNbal0gKyBcIiBcIjtcblx0XHRcdFx0c3BhY2VMZWZ0ID0gdGhpcy5zdHlsZS53b3JkV3JhcFdpZHRoIC0gd29yZFdpZHRoO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRzcGFjZUxlZnQgLT0gd29yZFdpZHRoV2l0aFNwYWNlO1xuXHRcdFx0XHRyZXN1bHQgKz0gd29yZHNbal0gKyBcIiBcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzdWx0ICs9IFwiXFxuXCI7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhpcyB0ZXh0IG9iamVjdFxuICpcbiAqIEBtZXRob2QgZGVzdHJveVxuICogQHBhcmFtIGRlc3Ryb3lUZXh0dXJlIHtCb29sZWFufVxuICovXG5QSVhJLlRleHQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkZXN0cm95VGV4dHVyZSlcbntcblx0aWYoZGVzdHJveVRleHR1cmUpXG5cdHtcblx0XHR0aGlzLnRleHR1cmUuZGVzdHJveSgpO1xuXHR9XG5cbn07XG5cblBJWEkuVGV4dC5oZWlnaHRDYWNoZSA9IHt9O1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBUZXh0IE9iamVjdCB3aWxsIGNyZWF0ZSBhIGxpbmUocykgb2YgdGV4dCB1c2luZyBiaXRtYXAgZm9udC4gVG8gc3BsaXQgYSBsaW5lIHlvdSBjYW4gdXNlIFwiXFxuXCIsIFwiXFxyXCIgb3IgXCJcXHJcXG5cIlxuICogWW91IGNhbiBnZW5lcmF0ZSB0aGUgZm50IGZpbGVzIHVzaW5nXG4gKiBodHRwOi8vd3d3LmFuZ2VsY29kZS5jb20vcHJvZHVjdHMvYm1mb250LyBmb3Igd2luZG93cyBvclxuICogaHR0cDovL3d3dy5ibWdseXBoLmNvbS8gZm9yIG1hYy5cbiAqXG4gKiBAY2xhc3MgQml0bWFwVGV4dFxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdGV4dCB7U3RyaW5nfSBUaGUgY29weSB0aGF0IHlvdSB3b3VsZCBsaWtlIHRoZSB0ZXh0IHRvIGRpc3BsYXlcbiAqIEBwYXJhbSBzdHlsZSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIHN0eWxlLmZvbnQge1N0cmluZ30gVGhlIHNpemUgKG9wdGlvbmFsKSBhbmQgYml0bWFwIGZvbnQgaWQgKHJlcXVpcmVkKSBlcSBcIkFyaWFsXCIgb3IgXCIyMHB4IEFyaWFsXCIgKG11c3QgaGF2ZSBsb2FkZWQgcHJldmlvdXNseSlcbiAqIEBwYXJhbSBbc3R5bGUuYWxpZ249XCJsZWZ0XCJdIHtTdHJpbmd9IEFuIGFsaWdubWVudCBvZiB0aGUgbXVsdGlsaW5lIHRleHQgKFwibGVmdFwiLCBcImNlbnRlclwiIG9yIFwicmlnaHRcIilcbiAqL1xuUElYSS5CaXRtYXBUZXh0ID0gZnVuY3Rpb24odGV4dCwgc3R5bGUpXG57XG4gICAgUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnNldFRleHQodGV4dCk7XG4gICAgdGhpcy5zZXRTdHlsZShzdHlsZSk7XG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlXG5cbn07XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkJpdG1hcFRleHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlKTtcblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkJpdG1hcFRleHQ7XG5cbi8qKlxuICogU2V0IHRoZSBjb3B5IGZvciB0aGUgdGV4dCBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHNldFRleHRcbiAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9IFRoZSBjb3B5IHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIHRleHQgdG8gZGlzcGxheVxuICovXG5QSVhJLkJpdG1hcFRleHQucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbih0ZXh0KVxue1xuICAgIHRoaXMudGV4dCA9IHRleHQgfHwgXCIgXCI7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgc3R5bGUgb2YgdGhlIHRleHRcbiAqXG4gKiBAbWV0aG9kIHNldFN0eWxlXG4gKiBAcGFyYW0gc3R5bGUge09iamVjdH0gVGhlIHN0eWxlIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSBzdHlsZS5mb250IHtTdHJpbmd9IFRoZSBzaXplIChvcHRpb25hbCkgYW5kIGJpdG1hcCBmb250IGlkIChyZXF1aXJlZCkgZXEgXCJBcmlhbFwiIG9yIFwiMjBweCBBcmlhbFwiIChtdXN0IGhhdmUgbG9hZGVkIHByZXZpb3VzbHkpXG4gKiBAcGFyYW0gW3N0eWxlLmFsaWduPVwibGVmdFwiXSB7U3RyaW5nfSBBbiBhbGlnbm1lbnQgb2YgdGhlIG11bHRpbGluZSB0ZXh0IChcImxlZnRcIiwgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIpXG4gKi9cblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbihzdHlsZSlcbntcbiAgICBzdHlsZSA9IHN0eWxlIHx8IHt9O1xuICAgIHN0eWxlLmFsaWduID0gc3R5bGUuYWxpZ24gfHwgXCJsZWZ0XCI7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuXG4gICAgdmFyIGZvbnQgPSBzdHlsZS5mb250LnNwbGl0KFwiIFwiKTtcbiAgICB0aGlzLmZvbnROYW1lID0gZm9udFtmb250Lmxlbmd0aCAtIDFdO1xuICAgIHRoaXMuZm9udFNpemUgPSBmb250Lmxlbmd0aCA+PSAyID8gcGFyc2VJbnQoZm9udFtmb250Lmxlbmd0aCAtIDJdLCAxMCkgOiBQSVhJLkJpdG1hcFRleHQuZm9udHNbdGhpcy5mb250TmFtZV0uc2l6ZTtcblxuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIHRleHRcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dCA9IGZ1bmN0aW9uKClcbntcbiAgICB2YXIgZGF0YSA9IFBJWEkuQml0bWFwVGV4dC5mb250c1t0aGlzLmZvbnROYW1lXTtcbiAgICB2YXIgcG9zID0gbmV3IFBJWEkuUG9pbnQoKTtcbiAgICB2YXIgcHJldkNoYXJDb2RlID0gbnVsbDtcbiAgICB2YXIgY2hhcnMgPSBbXTtcbiAgICB2YXIgbWF4TGluZVdpZHRoID0gMDtcbiAgICB2YXIgbGluZVdpZHRocyA9IFtdO1xuICAgIHZhciBsaW5lID0gMDtcbiAgICB2YXIgc2NhbGUgPSB0aGlzLmZvbnRTaXplIC8gZGF0YS5zaXplO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRleHQubGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgICB2YXIgY2hhckNvZGUgPSB0aGlzLnRleHQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYoLyg/OlxcclxcbnxcXHJ8XFxuKS8udGVzdCh0aGlzLnRleHQuY2hhckF0KGkpKSlcbiAgICAgICAge1xuICAgICAgICAgICAgbGluZVdpZHRocy5wdXNoKHBvcy54KTtcbiAgICAgICAgICAgIG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgcG9zLngpO1xuICAgICAgICAgICAgbGluZSsrO1xuXG4gICAgICAgICAgICBwb3MueCA9IDA7XG4gICAgICAgICAgICBwb3MueSArPSBkYXRhLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBwcmV2Q2hhckNvZGUgPSBudWxsO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hhckRhdGEgPSBkYXRhLmNoYXJzW2NoYXJDb2RlXTtcbiAgICAgICAgaWYoIWNoYXJEYXRhKSBjb250aW51ZTtcblxuICAgICAgICBpZihwcmV2Q2hhckNvZGUgJiYgY2hhckRhdGFbcHJldkNoYXJDb2RlXSlcbiAgICAgICAge1xuICAgICAgICAgICBwb3MueCArPSBjaGFyRGF0YS5rZXJuaW5nW3ByZXZDaGFyQ29kZV07XG4gICAgICAgIH1cbiAgICAgICAgY2hhcnMucHVzaCh7dGV4dHVyZTpjaGFyRGF0YS50ZXh0dXJlLCBsaW5lOiBsaW5lLCBjaGFyQ29kZTogY2hhckNvZGUsIHBvc2l0aW9uOiBuZXcgUElYSS5Qb2ludChwb3MueCArIGNoYXJEYXRhLnhPZmZzZXQsIHBvcy55ICsgY2hhckRhdGEueU9mZnNldCl9KTtcbiAgICAgICAgcG9zLnggKz0gY2hhckRhdGEueEFkdmFuY2U7XG5cbiAgICAgICAgcHJldkNoYXJDb2RlID0gY2hhckNvZGU7XG4gICAgfVxuXG4gICAgbGluZVdpZHRocy5wdXNoKHBvcy54KTtcbiAgICBtYXhMaW5lV2lkdGggPSBNYXRoLm1heChtYXhMaW5lV2lkdGgsIHBvcy54KTtcblxuICAgIHZhciBsaW5lQWxpZ25PZmZzZXRzID0gW107XG4gICAgZm9yKGkgPSAwOyBpIDw9IGxpbmU7IGkrKylcbiAgICB7XG4gICAgICAgIHZhciBhbGlnbk9mZnNldCA9IDA7XG4gICAgICAgIGlmKHRoaXMuc3R5bGUuYWxpZ24gPT0gXCJyaWdodFwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBhbGlnbk9mZnNldCA9IG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0aGlzLnN0eWxlLmFsaWduID09IFwiY2VudGVyXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsaWduT2Zmc2V0ID0gKG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV0pIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBsaW5lQWxpZ25PZmZzZXRzLnB1c2goYWxpZ25PZmZzZXQpO1xuICAgIH1cblxuICAgIGZvcihpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgdmFyIGMgPSBuZXcgUElYSS5TcHJpdGUoY2hhcnNbaV0udGV4dHVyZSkvL1BJWEkuU3ByaXRlLmZyb21GcmFtZShjaGFyc1tpXS5jaGFyQ29kZSk7XG4gICAgICAgIGMucG9zaXRpb24ueCA9IChjaGFyc1tpXS5wb3NpdGlvbi54ICsgbGluZUFsaWduT2Zmc2V0c1tjaGFyc1tpXS5saW5lXSkgKiBzY2FsZTtcbiAgICAgICAgYy5wb3NpdGlvbi55ID0gY2hhcnNbaV0ucG9zaXRpb24ueSAqIHNjYWxlO1xuICAgICAgICBjLnNjYWxlLnggPSBjLnNjYWxlLnkgPSBzY2FsZTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZChjKTtcbiAgICB9XG5cbiAgICB0aGlzLndpZHRoID0gcG9zLnggKiBzY2FsZTtcbiAgICB0aGlzLmhlaWdodCA9IChwb3MueSArIGRhdGEubGluZUhlaWdodCkgKiBzY2FsZTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgdHJhbnNmb3Igb2YgdGhpcyBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRyYW5zZm9ybVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5CaXRtYXBUZXh0LnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbigpXG57XG5cdGlmKHRoaXMuZGlydHkpXG5cdHtcbiAgICAgICAgd2hpbGUodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKHRoaXMuZ2V0Q2hpbGRBdCgwKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KCk7XG5cbiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0UElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0uY2FsbCh0aGlzKTtcbn07XG5cblBJWEkuQml0bWFwVGV4dC5mb250cyA9IHt9O1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG4gXG4gLyoqXG4gKiBUaGUgaW50ZXJhY3Rpb24gbWFuYWdlciBkZWFscyB3aXRoIG1vdXNlIGFuZCB0b3VjaCBldmVudHMuIEFueSBEaXNwbGF5T2JqZWN0IGNhbiBiZSBpbnRlcmFjdGl2ZVxuICogVGhpcyBtYW5hZ2VyIGFsc28gc3VwcG9ydHMgbXVsdGl0b3VjaC5cbiAqXG4gKiBAY2xhc3MgSW50ZXJhY3Rpb25NYW5hZ2VyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSBzdGFnZSB7U3RhZ2V9IFRoZSBzdGFnZSB0byBoYW5kbGUgaW50ZXJhY3Rpb25zXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyID0gZnVuY3Rpb24oc3RhZ2UpXG57XG5cdC8qKlxuXHQgKiBhIHJlZmZlcmVuY2UgdG8gdGhlIHN0YWdlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzdGFnZVxuXHQgKiBAdHlwZSBTdGFnZVxuXHQgKi9cblx0dGhpcy5zdGFnZSA9IHN0YWdlO1xuXG5cdC8qKlxuXHQgKiB0aGUgbW91c2UgZGF0YVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbW91c2Vcblx0ICogQHR5cGUgSW50ZXJhY3Rpb25EYXRhXG5cdCAqL1xuXHR0aGlzLm1vdXNlID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25EYXRhKCk7XG5cblx0LyoqXG5cdCAqIGFuIG9iamVjdCB0aGF0IHN0b3JlcyBjdXJyZW50IHRvdWNoZXMgKEludGVyYWN0aW9uRGF0YSkgYnkgaWQgcmVmZXJlbmNlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0b3VjaHNcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqL1xuXHR0aGlzLnRvdWNocyA9IHt9O1xuXG5cblx0XG5cdC8vIGhlbHBlcnNcblx0dGhpcy50ZW1wUG9pbnQgPSBuZXcgUElYSS5Qb2ludCgpO1xuXHQvL3RoaXMudGVtcE1hdHJpeCA9ICBtYXQzLmNyZWF0ZSgpO1xuXG5cdHRoaXMubW91c2VvdmVyRW5hYmxlZCA9IHRydWU7XG5cblx0Ly90aW55IGxpdHRsZSBpbnRlcmFjdGl2ZURhdGEgcG9vbCFcblx0dGhpcy5wb29sID0gW107XG5cblx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zID0gW107XG5cdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50ID0gbnVsbDtcblxuXHQvL3RoaXMgd2lsbCBtYWtlIGl0IHNvIHRoYXQgeW91IGRvbnQgaGF2ZSB0byBjYWxsIGJpbmQgYWxsIHRoZSB0aW1lXG5cdHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQoIHRoaXMgKTtcblx0dGhpcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcblx0dGhpcy5vbk1vdXNlT3V0ID0gdGhpcy5vbk1vdXNlT3V0LmJpbmQodGhpcyk7XG5cdHRoaXMub25Nb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcblxuXHR0aGlzLm9uVG91Y2hTdGFydCA9IHRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG5cdHRoaXMub25Ub3VjaEVuZCA9IHRoaXMub25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuXHR0aGlzLm9uVG91Y2hNb3ZlID0gdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpO1xuXHRcblx0XG5cdHRoaXMubGFzdCA9IDA7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludGVyYWN0aW9uTWFuYWdlcjtcblxuLyoqXG4gKiBDb2xsZWN0cyBhbiBpbnRlcmFjdGl2ZSBzcHJpdGUgcmVjdXJzaXZlbHkgdG8gaGF2ZSB0aGVpciBpbnRlcmFjdGlvbnMgbWFuYWdlZFxuICpcbiAqIEBtZXRob2QgY29sbGVjdEludGVyYWN0aXZlU3ByaXRlXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH0gdGhlIGRpc3BsYXlPYmplY3QgdG8gY29sbGVjdFxuICogQHBhcmFtIGlQYXJlbnQge0Rpc3BsYXlPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuY29sbGVjdEludGVyYWN0aXZlU3ByaXRlID0gZnVuY3Rpb24oZGlzcGxheU9iamVjdCwgaVBhcmVudClcbntcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblx0dmFyIGxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblx0XG5cdC8vLyBtYWtlIGFuIGludGVyYWN0aW9uIHRyZWUuLi4ge2l0ZW0uX19pbnRlcmFjdGl2ZVBhcmVudH1cblx0Zm9yICh2YXIgaSA9IGxlbmd0aC0xOyBpID49IDA7IGktLSlcblx0e1xuXHRcdHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHRcdFxuLy9cdFx0aWYoY2hpbGQudmlzaWJsZSkge1xuXHRcdFx0Ly8gcHVzaCBhbGwgaW50ZXJhY3RpdmUgYml0c1xuXHRcdFx0aWYoY2hpbGQuaW50ZXJhY3RpdmUpXG5cdFx0XHR7XG5cdFx0XHRcdGlQYXJlbnQuaW50ZXJhY3RpdmVDaGlsZHJlbiA9IHRydWU7XG5cdFx0XHRcdC8vY2hpbGQuX19pUGFyZW50ID0gaVBhcmVudDtcblx0XHRcdFx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLnB1c2goY2hpbGQpO1xuXG5cdFx0XHRcdGlmKGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA+IDApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGlzLmNvbGxlY3RJbnRlcmFjdGl2ZVNwcml0ZShjaGlsZCwgY2hpbGQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNoaWxkLl9faVBhcmVudCA9IG51bGw7XG5cblx0XHRcdFx0aWYoY2hpbGQuY2hpbGRyZW4ubGVuZ3RoID4gMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMuY29sbGVjdEludGVyYWN0aXZlU3ByaXRlKGNoaWxkLCBpUGFyZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuLy9cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdGFyZ2V0IGZvciBldmVudCBkZWxlZ2F0aW9uXG4gKlxuICogQG1ldGhvZCBzZXRUYXJnZXRcbiAqIEBwYXJhbSB0YXJnZXQge1dlYkdMUmVuZGVyZXJ8Q2FudmFzUmVuZGVyZXJ9IHRoZSByZW5kZXJlciB0byBiaW5kIGV2ZW50cyB0b1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uKHRhcmdldClcbntcblx0dGhpcy50YXJnZXQgPSB0YXJnZXQ7XG5cblx0Ly9jaGVjayBpZiB0aGUgZG9tIGVsZW1lbnQgaGFzIGJlZW4gc2V0LiBJZiBpdCBoYXMgZG9uJ3QgZG8gYW55dGhpbmdcblx0aWYoIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50ID09PSBudWxsICkge1xuXG5cdFx0dGhpcy5zZXRUYXJnZXREb21FbGVtZW50KCB0YXJnZXQudmlldyApO1xuXHR9XG5cbiBcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICB0aGlzLm9uTW91c2VVcCwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBkb20gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UvdG91Y2ggZXZlbnRzLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBvdGhlciBET01cbiAqIGVsZW1lbnRzIG9udG9wIG9mIHRoZSByZW5kZXJlcnMgQ2FudmFzIGVsZW1lbnQuIFdpdGggdGhpcyB5b3UnbGwgYmUgYWJsZSB0byBkZWxlZ2F0ZSBhbm90aGVyIGRvbSBlbGVtZW50XG4gKiB0byByZWNlaXZlIHRob3NlIGV2ZW50c1xuICpcbiAqIEBtZXRob2Qgc2V0VGFyZ2V0RG9tRWxlbWVudFxuICogQHBhcmFtIGRvbUVsZW1lbnQge0RPTUVsZW1lbnR9IHRoZSBkb20gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UgYW5kIHRvdWNoIGV2ZW50c1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLnNldFRhcmdldERvbUVsZW1lbnQgPSBmdW5jdGlvbihkb21FbGVtZW50KVxue1xuXHQvL3JlbW92ZSBwcmV2aW91c2UgbGlzdGVuZXJzXG5cdGlmKCB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCAhPT0gbnVsbCApIFxuXHR7XG5cdFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbJy1tcy1jb250ZW50LXpvb21pbmcnXSA9ICcnO1xuICAgIFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbJy1tcy10b3VjaC1hY3Rpb24nXSA9ICcnO1xuXG5cdFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgIHRoaXMub25Nb3VzZU1vdmUsIHRydWUpO1xuXHRcdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICB0aGlzLm9uTW91c2VEb3duLCB0cnVlKTtcblx0IFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAgIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG5cblx0IFx0Ly8gYWludCBubyBtdWx0aSB0b3VjaCBqdXN0IHlldCFcblx0XHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQsIHRydWUpO1xuXHRcdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLCB0cnVlKTtcblx0XHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLCB0cnVlKTtcblx0fVxuXG5cblx0aWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkgXG5cdHtcblx0XHQvLyB0aW1lIHRvIHJlbW92ZSBzb21lIG9mIHRoYXQgem9vbSBpbiBqYS4uXG5cdFx0ZG9tRWxlbWVudC5zdHlsZVsnLW1zLWNvbnRlbnQtem9vbWluZyddID0gJ25vbmUnO1xuICAgIFx0ZG9tRWxlbWVudC5zdHlsZVsnLW1zLXRvdWNoLWFjdGlvbiddID0gJ25vbmUnO1xuICAgIFxuXHRcdC8vIERPIHNvbWUgd2luZG93IHNwZWNpZmljIHRvdWNoIVxuXHR9XG5cblx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgPSBkb21FbGVtZW50O1xuXG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgIHRoaXMub25Nb3VzZU1vdmUsIHRydWUpO1xuXHRkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICB0aGlzLm9uTW91c2VEb3duLCB0cnVlKTtcbiBcdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAgIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG5cbiBcdC8vIGFpbnQgbm8gbXVsdGkgdG91Y2gganVzdCB5ZXQhXG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0LCB0cnVlKTtcblx0ZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCwgdHJ1ZSk7XG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiB1cGRhdGVzIHRoZSBzdGF0ZSBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzXG4gKlxuICogQG1ldGhvZCB1cGRhdGVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpXG57XG5cdGlmKCF0aGlzLnRhcmdldClyZXR1cm47XG5cdFxuXHQvLyBmcmVxdWVuY3kgb2YgMzBmcHM/P1xuXHR2YXIgbm93ID0gRGF0ZS5ub3coKTtcblx0dmFyIGRpZmYgPSBub3cgLSB0aGlzLmxhc3Q7XG5cdGRpZmYgPSAoZGlmZiAqIDMwKSAvIDEwMDA7XG5cdGlmKGRpZmYgPCAxKXJldHVybjtcblx0dGhpcy5sYXN0ID0gbm93O1xuXHQvL1xuXHRcblx0Ly8gb2suLiBzbyBtb3VzZSBldmVudHM/P1xuXHQvLyB5ZXMgZm9yIG5vdyA6KVxuXHQvLyBPUFRJTVNFIC0gaG93IG9mdGVuIHRvIGNoZWNrPz9cblx0aWYodGhpcy5kaXJ0eSlcblx0e1xuXHRcdHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHR2YXIgbGVuID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0XHRcblx0XHRmb3IgKHZhciBpPTA7IGkgPCBsZW47IGkrKykge1xuXHRcdCAgdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldLmludGVyYWN0aXZlQ2hpbGRyZW4gPSBmYWxzZTtcblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zID0gW107XG5cdFx0XG5cdFx0aWYodGhpcy5zdGFnZS5pbnRlcmFjdGl2ZSl0aGlzLmludGVyYWN0aXZlSXRlbXMucHVzaCh0aGlzLnN0YWdlKTtcblx0XHQvLyBnbyB0aHJvdWdoIGFuZCBjb2xsZWN0IGFsbCB0aGUgb2JqZWN0cyB0aGF0IGFyZSBpbnRlcmFjdGl2ZS4uXG5cdFx0dGhpcy5jb2xsZWN0SW50ZXJhY3RpdmVTcHJpdGUodGhpcy5zdGFnZSwgdGhpcy5zdGFnZSk7XG5cdH1cblx0XG5cdC8vIGxvb3AgdGhyb3VnaCBpbnRlcmFjdGl2ZSBvYmplY3RzIVxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0XG5cdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1x0XG5cdFx0XHRcdFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIGl0ZW0gPSB0aGlzLmludGVyYWN0aXZlSXRlbXNbaV07XG5cdFx0XG5cdFx0XG5cdFx0Ly9pZighaXRlbS52aXNpYmxlKWNvbnRpbnVlO1xuXHRcdFxuXHRcdC8vIE9QVElNSVNBVElPTiAtIG9ubHkgY2FsY3VsYXRlIGV2ZXJ5IHRpbWUgaWYgdGhlIG1vdXNlbW92ZSBmdW5jdGlvbiBleGlzdHMuLlxuXHRcdC8vIE9LIHNvLi4gZG9lcyB0aGUgb2JqZWN0IGhhdmUgYW55IG90aGVyIGludGVyYWN0aXZlIGZ1bmN0aW9ucz9cblx0XHQvLyBoaXQtdGVzdCB0aGUgY2xpcCFcblx0XHRcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlb3ZlciB8fCBpdGVtLm1vdXNlb3V0IHx8IGl0ZW0uYnV0dG9uTW9kZSlcblx0XHR7XG5cdFx0XHQvLyBvayBzbyB0aGVyZSBhcmUgc29tZSBmdW5jdGlvbnMgc28gbGV0cyBoaXQgdGVzdCBpdC4uXG5cdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRoaXMubW91c2UpO1xuXHRcdFx0dGhpcy5tb3VzZS50YXJnZXQgPSBpdGVtO1xuXHRcdFx0Ly8gb2sgc28gZGVhbCB3aXRoIGludGVyYWN0aW9ucy4uXG5cdFx0XHQvLyBsb2tzIGxpa2UgdGhlcmUgd2FzIGEgaGl0IVxuXHRcdFx0aWYoaXRlbS5fX2hpdClcblx0XHRcdHtcblx0XHRcdFx0aWYoaXRlbS5idXR0b25Nb2RlKSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcdFxuXHRcdFx0XHRcblx0XHRcdFx0aWYoIWl0ZW0uX19pc092ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNlb3ZlcilpdGVtLm1vdXNlb3Zlcih0aGlzLm1vdXNlKTtcblx0XHRcdFx0XHRpdGVtLl9faXNPdmVyID0gdHJ1ZTtcdFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGl0ZW0uX19pc092ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyByb2xsIG91dCFcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNlb3V0KWl0ZW0ubW91c2VvdXQodGhpcy5tb3VzZSk7XG5cdFx0XHRcdFx0aXRlbS5fX2lzT3ZlciA9IGZhbHNlO1x0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gLS0tPlxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIG1vdmVzIGFjY3Jvc3MgdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uTW91c2VNb3ZlXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIHRoZSBtb3VzZSBtb3ZpbmdcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuXHR0aGlzLm1vdXNlLm9yaWdpbmFsRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7IC8vSUUgdXNlcyB3aW5kb3cuZXZlbnRcblx0Ly8gVE9ETyBvcHRpbWl6ZSBieSBub3QgY2hlY2sgRVZFUlkgVElNRSEgbWF5YmUgaGFsZiBhcyBvZnRlbj8gLy9cblx0dmFyIHJlY3QgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XG5cdHRoaXMubW91c2UuZ2xvYmFsLnggPSAoZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCkgKiAodGhpcy50YXJnZXQud2lkdGggLyByZWN0LndpZHRoKTtcblx0dGhpcy5tb3VzZS5nbG9iYWwueSA9IChldmVudC5jbGllbnRZIC0gcmVjdC50b3ApICogKCB0aGlzLnRhcmdldC5oZWlnaHQgLyByZWN0LmhlaWdodCk7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlbW92ZSlcblx0XHR7XG5cdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0aXRlbS5tb3VzZW1vdmUodGhpcy5tb3VzZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkIGRvd24gb24gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uTW91c2VEb3duXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIGEgbW91c2UgYnV0dG9uIGJlaW5nIHByZXNzZWQgZG93blxuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMubW91c2Uub3JpZ2luYWxFdmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsgLy9JRSB1c2VzIHdpbmRvdy5ldmVudFxuXHRcblx0Ly8gbG9vcCB0aHJvdWdoIGludGVhY3Rpb24gdHJlZS4uLlxuXHQvLyBoaXQgdGVzdCBlYWNoIGl0ZW0hIC0+IFxuXHQvLyBnZXQgaW50ZXJhY3RpdmUgaXRlbXMgdW5kZXIgcG9pbnQ/P1xuXHQvL3N0YWdlLl9faVxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0dmFyIGluZGV4ID0gMDtcblx0dmFyIHBhcmVudCA9IHRoaXMuc3RhZ2U7XG5cdFxuXHQvLyB3aGlsZSBcblx0Ly8gaGl0IHRlc3QgXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlZG93biB8fCBpdGVtLmNsaWNrKVxuXHRcdHtcblx0XHRcdGl0ZW0uX19tb3VzZUlzRG93biA9IHRydWU7XG5cdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRoaXMubW91c2UpO1xuXHRcdFx0XG5cdFx0XHRpZihpdGVtLl9faGl0KVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0XHRpZihpdGVtLm1vdXNlZG93bilpdGVtLm1vdXNlZG93bih0aGlzLm1vdXNlKTtcblx0XHRcdFx0aXRlbS5fX2lzRG93biA9IHRydWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBqdXN0IHRoZSBvbmUhXG5cdFx0XHRcdGlmKCFpdGVtLmludGVyYWN0aXZlQ2hpbGRyZW4pYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cblxuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VPdXQgPSBmdW5jdGlvbihldmVudClcbntcblx0dmFyIGxlbmd0aCA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtcy5sZW5ndGg7XG5cdFxuXHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcdFxuXHRcdFx0XHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciBpdGVtID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldO1xuXHRcdFxuXHRcdGlmKGl0ZW0uX19pc092ZXIpXG5cdFx0e1xuXHRcdFx0dGhpcy5tb3VzZS50YXJnZXQgPSBpdGVtO1xuXHRcdFx0aWYoaXRlbS5tb3VzZW91dClpdGVtLm1vdXNlb3V0KHRoaXMubW91c2UpO1xuXHRcdFx0aXRlbS5fX2lzT3ZlciA9IGZhbHNlO1x0XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyByZWxlYXNlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Nb3VzZVVwXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIGEgbW91c2UgYnV0dG9uIGJlaW5nIHJlbGVhc2VkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMubW91c2Uub3JpZ2luYWxFdmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsgLy9JRSB1c2VzIHdpbmRvdy5ldmVudFxuXHRcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0XG5cdHZhciBsZW5ndGggPSB0aGlzLmludGVyYWN0aXZlSXRlbXMubGVuZ3RoO1xuXHR2YXIgdXAgPSBmYWxzZTtcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNldXAgfHwgaXRlbS5tb3VzZXVwb3V0c2lkZSB8fCBpdGVtLmNsaWNrKVxuXHRcdHtcblx0XHRcdGl0ZW0uX19oaXQgPSB0aGlzLmhpdFRlc3QoaXRlbSwgdGhpcy5tb3VzZSk7XG5cdFx0XHRcblx0XHRcdGlmKGl0ZW0uX19oaXQgJiYgIXVwKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0XHRpZihpdGVtLm1vdXNldXApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpdGVtLm1vdXNldXAodGhpcy5tb3VzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoaXRlbS5fX2lzRG93bilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKGl0ZW0uY2xpY2spaXRlbS5jbGljayh0aGlzLm1vdXNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYoIWl0ZW0uaW50ZXJhY3RpdmVDaGlsZHJlbil1cCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGl0ZW0uX19pc0Rvd24pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNldXBvdXRzaWRlKWl0ZW0ubW91c2V1cG91dHNpZGUodGhpcy5tb3VzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcblx0XHRcdGl0ZW0uX19pc0Rvd24gPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBjdXJyZW50IG1vdXNlIGNvb3JkcyBoaXQgYSBzcHJpdGVcbiAqXG4gKiBAbWV0aG9kIGhpdFRlc3RcbiAqIEBwYXJhbSBpdGVtIHtEaXNwbGF5T2JqZWN0fSBUaGUgZGlzcGxheU9iamVjdCB0byB0ZXN0IGZvciBhIGhpdFxuICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfSBUaGUgaW50ZXJhY3Rpb25kYXRhIG9iamVjdCB0byB1cGRhdGUgaW4gdGhlIGNhc2Ugb2YgYSBoaXRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS5oaXRUZXN0ID0gZnVuY3Rpb24oaXRlbSwgaW50ZXJhY3Rpb25EYXRhKVxue1xuXHR2YXIgZ2xvYmFsID0gaW50ZXJhY3Rpb25EYXRhLmdsb2JhbDtcblx0XG5cdGlmKGl0ZW0udmNvdW50ICE9PSBQSVhJLnZpc2libGVDb3VudClyZXR1cm4gZmFsc2U7XG5cblx0dmFyIGlzU3ByaXRlID0gKGl0ZW0gaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSksXG5cdFx0d29ybGRUcmFuc2Zvcm0gPSBpdGVtLndvcmxkVHJhbnNmb3JtLFxuXHRcdGEwMCA9IHdvcmxkVHJhbnNmb3JtWzBdLCBhMDEgPSB3b3JsZFRyYW5zZm9ybVsxXSwgYTAyID0gd29ybGRUcmFuc2Zvcm1bMl0sXG5cdFx0YTEwID0gd29ybGRUcmFuc2Zvcm1bM10sIGExMSA9IHdvcmxkVHJhbnNmb3JtWzRdLCBhMTIgPSB3b3JsZFRyYW5zZm9ybVs1XSxcblx0XHRpZCA9IDEgLyAoYTAwICogYTExICsgYTAxICogLWExMCksXG5cdFx0eCA9IGExMSAqIGlkICogZ2xvYmFsLnggKyAtYTAxICogaWQgKiBnbG9iYWwueSArIChhMTIgKiBhMDEgLSBhMDIgKiBhMTEpICogaWQsXG5cdFx0eSA9IGEwMCAqIGlkICogZ2xvYmFsLnkgKyAtYTEwICogaWQgKiBnbG9iYWwueCArICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGlkO1xuXG5cdGludGVyYWN0aW9uRGF0YS50YXJnZXQgPSBpdGVtO1xuXHRcblx0Ly9hIHNwcml0ZSBvciBkaXNwbGF5IG9iamVjdCB3aXRoIGEgaGl0IGFyZWEgZGVmaW5lZFxuXHRpZihpdGVtLmhpdEFyZWEgJiYgaXRlbS5oaXRBcmVhLmNvbnRhaW5zKSB7XG5cdFx0aWYoaXRlbS5oaXRBcmVhLmNvbnRhaW5zKHgsIHkpKSB7XG5cdFx0XHQvL2lmKGlzU3ByaXRlKVxuXHRcdFx0aW50ZXJhY3Rpb25EYXRhLnRhcmdldCA9IGl0ZW07XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Ly8gYSBzcHJpdGUgd2l0aCBubyBoaXRhcmVhIGRlZmluZWRcblx0ZWxzZSBpZihpc1Nwcml0ZSlcblx0e1xuXHRcdHZhciB3aWR0aCA9IGl0ZW0udGV4dHVyZS5mcmFtZS53aWR0aCxcblx0XHRcdGhlaWdodCA9IGl0ZW0udGV4dHVyZS5mcmFtZS5oZWlnaHQsXG5cdFx0XHR4MSA9IC13aWR0aCAqIGl0ZW0uYW5jaG9yLngsXG5cdFx0XHR5MTtcblx0XHRcblx0XHRpZih4ID4geDEgJiYgeCA8IHgxICsgd2lkdGgpXG5cdFx0e1xuXHRcdFx0eTEgPSAtaGVpZ2h0ICogaXRlbS5hbmNob3IueTtcblx0XHRcblx0XHRcdGlmKHkgPiB5MSAmJiB5IDwgeTEgKyBoZWlnaHQpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHNldCB0aGUgdGFyZ2V0IHByb3BlcnR5IGlmIGEgaGl0IGlzIHRydWUhXG5cdFx0XHRcdGludGVyYWN0aW9uRGF0YS50YXJnZXQgPSBpdGVtXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZhciBsZW5ndGggPSBpdGVtLmNoaWxkcmVuLmxlbmd0aDtcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgdGVtcEl0ZW0gPSBpdGVtLmNoaWxkcmVuW2ldO1xuXHRcdHZhciBoaXQgPSB0aGlzLmhpdFRlc3QodGVtcEl0ZW0sIGludGVyYWN0aW9uRGF0YSk7XG5cdFx0aWYoaGl0KVxuXHRcdHtcblx0XHRcdC8vIGhtbS4uIFRPRE8gU0VUIENPUlJFQ1QgVEFSR0VUP1xuXHRcdFx0aW50ZXJhY3Rpb25EYXRhLnRhcmdldCA9IGl0ZW1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmYWxzZTtcdFxufVxuXG4vKipcbiAqIElzIGNhbGxlZCB3aGVuIGEgdG91Y2ggaXMgbW92ZWQgYWNjcm9zcyB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Ub3VjaE1vdmVcbiAqIEBwYXJhbSBldmVudCB7RXZlbnR9IFRoZSBET00gZXZlbnQgb2YgYSB0b3VjaCBtb3ZpbmcgYWNjcm9zcyB0aGUgcmVuZGVyZXIgdmlld1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHZhciByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdHZhciBjaGFuZ2VkVG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xuXHRcblx0Zm9yICh2YXIgaT0wOyBpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIFxuXHR7XG5cdFx0dmFyIHRvdWNoRXZlbnQgPSBjaGFuZ2VkVG91Y2hlc1tpXTtcblx0XHR2YXIgdG91Y2hEYXRhID0gdGhpcy50b3VjaHNbdG91Y2hFdmVudC5pZGVudGlmaWVyXTtcblx0XHR0b3VjaERhdGEub3JpZ2luYWxFdmVudCA9ICBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cdFx0XG5cdFx0Ly8gdXBkYXRlIHRoZSB0b3VjaCBwb3NpdGlvblxuXHRcdHRvdWNoRGF0YS5nbG9iYWwueCA9ICh0b3VjaEV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogKHRoaXMudGFyZ2V0LndpZHRoIC8gcmVjdC53aWR0aCk7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC55ID0gKHRvdWNoRXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAgKiAodGhpcy50YXJnZXQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xuXHR9XG5cdFxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciBpdGVtID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldO1xuXHRcdGlmKGl0ZW0udG91Y2htb3ZlKWl0ZW0udG91Y2htb3ZlKHRvdWNoRGF0YSk7XG5cdH1cbn1cblxuLyoqXG4gKiBJcyBjYWxsZWQgd2hlbiBhIHRvdWNoIGlzIHN0YXJ0ZWQgb24gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uVG91Y2hTdGFydFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH0gVGhlIERPTSBldmVudCBvZiBhIHRvdWNoIHN0YXJ0aW5nIG9uIHRoZSByZW5kZXJlciB2aWV3XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUub25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHZhciByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHR2YXIgY2hhbmdlZFRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcztcblx0Zm9yICh2YXIgaT0wOyBpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIFxuXHR7XG5cdFx0dmFyIHRvdWNoRXZlbnQgPSBjaGFuZ2VkVG91Y2hlc1tpXTtcblx0XHRcblx0XHR2YXIgdG91Y2hEYXRhID0gdGhpcy5wb29sLnBvcCgpO1xuXHRcdGlmKCF0b3VjaERhdGEpdG91Y2hEYXRhID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25EYXRhKCk7XG5cdFx0XG5cdFx0dG91Y2hEYXRhLm9yaWdpbmFsRXZlbnQgPSAgZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXHRcdFxuXHRcdHRoaXMudG91Y2hzW3RvdWNoRXZlbnQuaWRlbnRpZmllcl0gPSB0b3VjaERhdGE7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC54ID0gKHRvdWNoRXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCkgKiAodGhpcy50YXJnZXQud2lkdGggLyByZWN0LndpZHRoKTtcblx0XHR0b3VjaERhdGEuZ2xvYmFsLnkgPSAodG91Y2hFdmVudC5jbGllbnRZIC0gcmVjdC50b3ApICAqICh0aGlzLnRhcmdldC5oZWlnaHQgLyByZWN0LmhlaWdodCk7XG5cdFx0XG5cdFx0dmFyIGxlbmd0aCA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtcy5sZW5ndGg7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsZW5ndGg7IGorKylcblx0XHR7XG5cdFx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tqXTtcblx0XHRcdFxuXHRcdFx0aWYoaXRlbS50b3VjaHN0YXJ0IHx8IGl0ZW0udGFwKVxuXHRcdFx0e1xuXHRcdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRvdWNoRGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihpdGVtLl9faGl0KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly9jYWxsIHRoZSBmdW5jdGlvbiFcblx0XHRcdFx0XHRpZihpdGVtLnRvdWNoc3RhcnQpaXRlbS50b3VjaHN0YXJ0KHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0aXRlbS5fX2lzRG93biA9IHRydWU7XG5cdFx0XHRcdFx0aXRlbS5fX3RvdWNoRGF0YSA9IHRvdWNoRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZighaXRlbS5pbnRlcmFjdGl2ZUNoaWxkcmVuKWJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gYSB0b3VjaCBpcyBlbmRlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Ub3VjaEVuZFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH0gVGhlIERPTSBldmVudCBvZiBhIHRvdWNoIGVuZGluZyBvbiB0aGUgcmVuZGVyZXIgdmlld1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uVG91Y2hFbmQgPSBmdW5jdGlvbihldmVudClcbntcblx0Ly90aGlzLm1vdXNlLm9yaWdpbmFsRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7IC8vSUUgdXNlcyB3aW5kb3cuZXZlbnRcblx0dmFyIHJlY3QgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0dmFyIGNoYW5nZWRUb3VjaGVzID0gZXZlbnQuY2hhbmdlZFRvdWNoZXM7XG5cdFxuXHRmb3IgKHZhciBpPTA7IGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHR2YXIgdG91Y2hFdmVudCA9IGNoYW5nZWRUb3VjaGVzW2ldO1xuXHRcdHZhciB0b3VjaERhdGEgPSB0aGlzLnRvdWNoc1t0b3VjaEV2ZW50LmlkZW50aWZpZXJdO1xuXHRcdHZhciB1cCA9IGZhbHNlO1xuXHRcdHRvdWNoRGF0YS5nbG9iYWwueCA9ICh0b3VjaEV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogKHRoaXMudGFyZ2V0LndpZHRoIC8gcmVjdC53aWR0aCk7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC55ID0gKHRvdWNoRXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAgKiAodGhpcy50YXJnZXQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xuXHRcdFxuXHRcdHZhciBsZW5ndGggPSB0aGlzLmludGVyYWN0aXZlSXRlbXMubGVuZ3RoO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGVuZ3RoOyBqKyspXG5cdFx0e1xuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzLmludGVyYWN0aXZlSXRlbXNbal07XG5cdFx0XHR2YXIgaXRlbVRvdWNoRGF0YSA9IGl0ZW0uX190b3VjaERhdGE7IC8vIDwtLSBIZXJlIVxuXHRcdFx0aXRlbS5fX2hpdCA9IHRoaXMuaGl0VGVzdChpdGVtLCB0b3VjaERhdGEpO1xuXHRcdFxuXHRcdFx0aWYoaXRlbVRvdWNoRGF0YSA9PSB0b3VjaERhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHNvIHRoaXMgb25lIFdBUyBkb3duLi4uXG5cdFx0XHRcdHRvdWNoRGF0YS5vcmlnaW5hbEV2ZW50ID0gIGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblx0XHRcdFx0Ly8gaGl0VGVzdD8/XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihpdGVtLnRvdWNoZW5kIHx8IGl0ZW0udGFwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoaXRlbS5fX2hpdCAmJiAhdXApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYoaXRlbS50b3VjaGVuZClpdGVtLnRvdWNoZW5kKHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0XHRpZihpdGVtLl9faXNEb3duKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZihpdGVtLnRhcClpdGVtLnRhcCh0b3VjaERhdGEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZighaXRlbS5pbnRlcmFjdGl2ZUNoaWxkcmVuKXVwID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmKGl0ZW0uX19pc0Rvd24pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGlmKGl0ZW0udG91Y2hlbmRvdXRzaWRlKWl0ZW0udG91Y2hlbmRvdXRzaWRlKHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGl0ZW0uX19pc0Rvd24gPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aXRlbS5fX3RvdWNoRGF0YSA9IG51bGw7XG5cdFx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyByZW1vdmUgdGhlIHRvdWNoLi5cblx0XHR0aGlzLnBvb2wucHVzaCh0b3VjaERhdGEpO1xuXHRcdHRoaXMudG91Y2hzW3RvdWNoRXZlbnQuaWRlbnRpZmllcl0gPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogSG9sZHMgYWxsIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gYW4gSW50ZXJhY3Rpb24gZXZlbnRcbiAqXG4gKiBAY2xhc3MgSW50ZXJhY3Rpb25EYXRhXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUElYSS5JbnRlcmFjdGlvbkRhdGEgPSBmdW5jdGlvbigpXG57XG5cdC8qKlxuXHQgKiBUaGlzIHBvaW50IHN0b3JlcyB0aGUgZ2xvYmFsIGNvb3JkcyBvZiB3aGVyZSB0aGUgdG91Y2gvbW91c2UgZXZlbnQgaGFwcGVuZWRcblx0ICpcblx0ICogQHByb3BlcnR5IGdsb2JhbCBcblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMuZ2xvYmFsID0gbmV3IFBJWEkuUG9pbnQoKTtcblx0XG5cdC8vIHRoaXMgaXMgaGVyZSBmb3IgbGVnYWN5Li4uIGJ1dCB3aWxsIHJlbW92ZVxuXHR0aGlzLmxvY2FsID0gbmV3IFBJWEkuUG9pbnQoKTtcblxuXHQvKipcblx0ICogVGhlIHRhcmdldCBTcHJpdGUgdGhhdCB3YXMgaW50ZXJhY3RlZCB3aXRoXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0YXJnZXRcblx0ICogQHR5cGUgU3ByaXRlXG5cdCAqL1xuXHR0aGlzLnRhcmdldDtcblxuXHQvKipcblx0ICogV2hlbiBwYXNzZWQgdG8gYW4gZXZlbnQgaGFuZGxlciwgdGhpcyB3aWxsIGJlIHRoZSBvcmlnaW5hbCBET00gRXZlbnQgdGhhdCB3YXMgY2FwdHVyZWRcblx0ICpcblx0ICogQHByb3BlcnR5IG9yaWdpbmFsRXZlbnRcblx0ICogQHR5cGUgRXZlbnRcblx0ICovXG5cdHRoaXMub3JpZ2luYWxFdmVudDtcbn1cblxuLyoqXG4gKiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBsb2NhbCBjb29yZHMgb2YgdGhlIHNwZWNpZmllZCBkaXNwbGF5T2JqZWN0IGZvciB0aGlzIEludGVyYWN0aW9uRGF0YVxuICpcbiAqIEBtZXRob2QgZ2V0TG9jYWxQb3NpdGlvblxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBEaXNwbGF5T2JqZWN0IHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIGxvY2FsIGNvb3JkcyBvZmZcbiAqIEByZXR1cm4ge1BvaW50fSBBIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkcyBvZiB0aGUgSW50ZXJhY3Rpb25EYXRhIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBEaXNwbGF5T2JqZWN0XG4gKi9cblBJWEkuSW50ZXJhY3Rpb25EYXRhLnByb3RvdHlwZS5nZXRMb2NhbFBvc2l0aW9uID0gZnVuY3Rpb24oZGlzcGxheU9iamVjdClcbntcblx0dmFyIHdvcmxkVHJhbnNmb3JtID0gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybTtcblx0dmFyIGdsb2JhbCA9IHRoaXMuZ2xvYmFsO1xuXHRcblx0Ly8gZG8gYSBjaGVla3kgdHJhbnNmb3JtIHRvIGdldCB0aGUgbW91c2UgY29vcmRzO1xuXHR2YXIgYTAwID0gd29ybGRUcmFuc2Zvcm1bMF0sIGEwMSA9IHdvcmxkVHJhbnNmb3JtWzFdLCBhMDIgPSB3b3JsZFRyYW5zZm9ybVsyXSxcbiAgICAgICAgYTEwID0gd29ybGRUcmFuc2Zvcm1bM10sIGExMSA9IHdvcmxkVHJhbnNmb3JtWzRdLCBhMTIgPSB3b3JsZFRyYW5zZm9ybVs1XSxcbiAgICAgICAgaWQgPSAxIC8gKGEwMCAqIGExMSArIGEwMSAqIC1hMTApO1xuXHQvLyBzZXQgdGhlIG1vdXNlIGNvb3Jkcy4uLlxuXHRyZXR1cm4gbmV3IFBJWEkuUG9pbnQoYTExICogaWQgKiBnbG9iYWwueCArIC1hMDEgKiBpZCAqIGdsb2JhbC55ICsgKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBpZCxcblx0XHRcdFx0XHRcdFx0ICAgYTAwICogaWQgKiBnbG9iYWwueSArIC1hMTAgKiBpZCAqIGdsb2JhbC54ICsgKC1hMTIgKiBhMDAgKyBhMDIgKiBhMTApICogaWQpXG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkludGVyYWN0aW9uRGF0YS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludGVyYWN0aW9uRGF0YTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIEEgU3RhZ2UgcmVwcmVzZW50cyB0aGUgcm9vdCBvZiB0aGUgZGlzcGxheSB0cmVlLiBFdmVyeXRoaW5nIGNvbm5lY3RlZCB0byB0aGUgc3RhZ2UgaXMgcmVuZGVyZWRcbiAqXG4gKiBAY2xhc3MgU3RhZ2VcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RDb250YWluZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIGJhY2tncm91bmRDb2xvciB7TnVtYmVyfSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgc3RhZ2UsIGVhc2llc3Qgd2F5IHRvIHBhc3MgdGhpcyBpbiBpcyBpbiBoZXggZm9ybWF0XG4gKlx0XHRsaWtlOiAweEZGRkZGRiBmb3Igd2hpdGVcbiAqL1xuUElYSS5TdGFnZSA9IGZ1bmN0aW9uKGJhY2tncm91bmRDb2xvcilcbntcblx0UElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLmNhbGwoIHRoaXMgKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBiYXNlZCBvbiB3b3JsZCAocGFyZW50KSBmYWN0b3JzXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB3b3JsZFRyYW5zZm9ybVxuXHQgKiBAdHlwZSBNYXQzXG5cdCAqIEByZWFkT25seVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy53b3JsZFRyYW5zZm9ybSA9IFBJWEkubWF0My5jcmVhdGUoKTtcblxuXHQvKipcblx0ICogV2hldGhlciBvciBub3QgdGhlIHN0YWdlIGlzIGludGVyYWN0aXZlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBpbnRlcmFjdGl2ZVxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmludGVyYWN0aXZlID0gdHJ1ZTtcblxuXHQvKipcblx0ICogVGhlIGludGVyYWN0aW9uIG1hbmFnZSBmb3IgdGhpcyBzdGFnZSwgbWFuYWdlcyBhbGwgaW50ZXJhY3RpdmUgYWN0aXZpdHkgb24gdGhlIHN0YWdlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBpbnRlcmFjdGl2ZVxuXHQgKiBAdHlwZSBJbnRlcmFjdGlvbk1hbmFnZXJcblx0ICovXG5cdHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSBzdGFnZSBpcyBkaXJ0eSBhbmQgbmVlZHMgdG8gaGF2ZSBpbnRlcmFjdGlvbnMgdXBkYXRlZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgZGlydHlcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cblx0dGhpcy5fX2NoaWxkcmVuQWRkZWQgPSBbXTtcblx0dGhpcy5fX2NoaWxkcmVuUmVtb3ZlZCA9IFtdO1xuXG5cdC8vdGhlIHN0YWdlIGlzIGl0J3Mgb3duIHN0YWdlXG5cdHRoaXMuc3RhZ2UgPSB0aGlzO1xuXG5cdC8vb3B0aW1pemUgaGl0IGRldGVjdGlvbiBhIGJpdFxuXHR0aGlzLnN0YWdlLmhpdEFyZWEgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEwMDAwMCwgMTAwMDAwKTtcblxuXHR0aGlzLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpO1xuXHR0aGlzLndvcmxkVmlzaWJsZSA9IHRydWU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlN0YWdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3RhZ2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5TdGFnZTtcblxuLyoqXG4gKiBTZXRzIGFub3RoZXIgRE9NIGVsZW1lbnQgd2hpY2ggY2FuIHJlY2VpdmUgbW91c2UvdG91Y2ggaW50ZXJhY3Rpb25zIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgQ2FudmFzIGVsZW1lbnQuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBvdGhlciBET00gZWxlbWVudHMgb250b3Agb2YgdGhlIENhbnZhcyBlbGVtZW50LlxuICpcbiAqIEBtZXRob2Qgc2V0SW50ZXJhY3Rpb25EZWxlZ2F0ZVxuICogQHBhcmFtIGRvbUVsZW1lbnQge0RPTUVsZW1lbnR9IFRoaXMgbmV3IGRvbUVsZW1lbnQgd2hpY2ggd2lsbCByZWNlaXZlIG1vdXNlL3RvdWNoIGV2ZW50c1xuICovXG5QSVhJLlN0YWdlLnByb3RvdHlwZS5zZXRJbnRlcmFjdGlvbkRlbGVnYXRlID0gZnVuY3Rpb24oZG9tRWxlbWVudClcbntcblx0dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuc2V0VGFyZ2V0RG9tRWxlbWVudCggZG9tRWxlbWVudCApO1xufVxuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3RhZ2UucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy53b3JsZEFscGhhID0gMTtcdFx0XG5cdHRoaXMudmNvdW50ID0gUElYSS52aXNpYmxlQ291bnQ7XG5cdFxuXHRmb3IodmFyIGk9MCxqPXRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpPGo7IGkrKylcblx0e1xuXHRcdHRoaXMuY2hpbGRyZW5baV0udXBkYXRlVHJhbnNmb3JtKCk7XHRcblx0fVxuXHRcblx0aWYodGhpcy5kaXJ0eSlcblx0e1xuXHRcdHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XHQvLyB1cGRhdGUgaW50ZXJhY3RpdmUhXG5cdFx0dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuZGlydHkgPSB0cnVlO1xuXHR9XG5cdFxuXHRcblx0aWYodGhpcy5pbnRlcmFjdGl2ZSl0aGlzLmludGVyYWN0aW9uTWFuYWdlci51cGRhdGUoKTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgc3RhZ2VcbiAqXG4gKiBAbWV0aG9kIHNldEJhY2tncm91bmRDb2xvclxuICogQHBhcmFtIGJhY2tncm91bmRDb2xvciB7TnVtYmVyfSB0aGUgY29sb3Igb2YgdGhlIGJhY2tncm91bmQsIGVhc2llc3Qgd2F5IHRvIHBhc3MgdGhpcyBpbiBpcyBpbiBoZXggZm9ybWF0XG4gKlx0XHRsaWtlOiAweEZGRkZGRiBmb3Igd2hpdGVcbiAqL1xuUElYSS5TdGFnZS5wcm90b3R5cGUuc2V0QmFja2dyb3VuZENvbG9yID0gZnVuY3Rpb24oYmFja2dyb3VuZENvbG9yKVxue1xuXHR0aGlzLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvciB8fCAweDAwMDAwMDtcblx0dGhpcy5iYWNrZ3JvdW5kQ29sb3JTcGxpdCA9IEhFWHRvUkdCKHRoaXMuYmFja2dyb3VuZENvbG9yKTtcblx0dmFyIGhleCA9IHRoaXMuYmFja2dyb3VuZENvbG9yLnRvU3RyaW5nKDE2KTtcblx0aGV4ID0gXCIwMDAwMDBcIi5zdWJzdHIoMCwgNiAtIGhleC5sZW5ndGgpICsgaGV4O1xuXHR0aGlzLmJhY2tncm91bmRDb2xvclN0cmluZyA9IFwiI1wiICsgaGV4O1xufVxuXG4vKipcbiAqIFRoaXMgd2lsbCByZXR1cm4gdGhlIHBvaW50IGNvbnRhaW5pbmcgZ2xvYmFsIGNvb3JkcyBvZiB0aGUgbW91c2UuXG4gKlxuICogQG1ldGhvZCBnZXRNb3VzZVBvc2l0aW9uXG4gKiBAcmV0dXJuIHtQb2ludH0gVGhlIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkcyBvZiB0aGUgZ2xvYmFsIEludGVyYWN0aW9uRGF0YSBwb3NpdGlvbi5cbiAqL1xuUElYSS5TdGFnZS5wcm90b3R5cGUuZ2V0TW91c2VQb3NpdGlvbiA9IGZ1bmN0aW9uKClcbntcblx0cmV0dXJuIHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLm1vdXNlLmdsb2JhbDtcbn1cblxuLy8gaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cbi8vIGh0dHA6Ly9teS5vcGVyYS5jb20vZW1vbGxlci9ibG9nLzIwMTEvMTIvMjAvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1lci1hbmltYXRpbmdcblxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlci4gZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxuXG4vLyBNSVQgbGljZW5zZVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICpcbiAqIEBtZXRob2QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKi9cbi8qKlxuICogQSBwb2x5ZmlsbCBmb3IgY2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAqXG4gKiBAbWV0aG9kIGNhbmNlbEFuaW1hdGlvbkZyYW1lXG4gKi9cbnZhciBsYXN0VGltZSA9IDA7XG52YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XG5mb3IodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSsnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG59XG5cbmlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTsgfSxcbiAgICAgICAgICB0aW1lVG9DYWxsKTtcbiAgICAgICAgbGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9O1xuXG5pZiAoIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSlcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIH07XG5cbndpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIGhleCBjb2xvciBudW1iZXIgdG8gYW4gW1IsIEcsIEJdIGFycmF5XG4gKlxuICogQG1ldGhvZCBIRVh0b1JHQlxuICogQHBhcmFtIGhleCB7TnVtYmVyfVxuICovXG5mdW5jdGlvbiBIRVh0b1JHQihoZXgpIHtcblx0cmV0dXJuIFsoaGV4ID4+IDE2ICYgMHhGRikgLyAyNTUsICggaGV4ID4+IDggJiAweEZGKSAvIDI1NSwgKGhleCAmIDB4RkYpLyAyNTVdO1xufVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kXG4gKlxuICogQG1ldGhvZCBiaW5kXG4gKi9cbmlmICh0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgIT0gJ2Z1bmN0aW9uJykge1xuICBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgICAgdmFyIHRhcmdldCA9IHRoaXMsIGJvdW5kQXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXG4gICAgICBmdW5jdGlvbiBib3VuZCgpIHtcblx0dmFyIGFyZ3MgPSBib3VuZEFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG5cdHRhcmdldC5hcHBseSh0aGlzIGluc3RhbmNlb2YgYm91bmQgPyB0aGlzIDogdGhpc0FyZywgYXJncyk7XG4gICAgICB9XG5cbiAgICAgIGJvdW5kLnByb3RvdHlwZSA9IChmdW5jdGlvbiBGKHByb3RvKSB7XG4gICAgICAgICAgcHJvdG8gJiYgKEYucHJvdG90eXBlID0gcHJvdG8pO1xuICAgICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGKSkgcmV0dXJuIG5ldyBGO1xuXHR9KSh0YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGZvciBhamF4IHJlcXVlc3RzIHRvIGJlIGhhbmRsZWQgY3Jvc3MgYnJvd3NlclxuICpcbiAqIEBjbGFzcyBBamF4UmVxdWVzdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBBamF4UmVxdWVzdCA9IFBJWEkuQWpheFJlcXVlc3QgPSBmdW5jdGlvbigpXG57XG5cdHZhciBhY3RpdmV4bW9kZXMgPSBbXCJNc3htbDIuWE1MSFRUUC42LjBcIiwgXCJNc3htbDIuWE1MSFRUUC4zLjBcIiwgXCJNaWNyb3NvZnQuWE1MSFRUUFwiXSAvL2FjdGl2ZVggdmVyc2lvbnMgdG8gY2hlY2sgZm9yIGluIElFXG5cblx0aWYgKHdpbmRvdy5BY3RpdmVYT2JqZWN0KVxuXHR7IC8vVGVzdCBmb3Igc3VwcG9ydCBmb3IgQWN0aXZlWE9iamVjdCBpbiBJRSBmaXJzdCAoYXMgWE1MSHR0cFJlcXVlc3QgaW4gSUU3IGlzIGJyb2tlbilcblx0XHRmb3IgKHZhciBpPTA7IGk8YWN0aXZleG1vZGVzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdHRyeXtcblx0XHRcdFx0cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KGFjdGl2ZXhtb2Rlc1tpXSlcblx0XHRcdH1cbiAgIFx0XHRcdGNhdGNoKGUpe1xuICAgIFx0XHRcdC8vc3VwcHJlc3MgZXJyb3JcbiAgIFx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZSBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSAvLyBpZiBNb3ppbGxhLCBTYWZhcmkgZXRjXG4gIFx0e1xuICBcdFx0cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gXHR9XG4gXHRlbHNlXG4gXHR7XG5cdFx0cmV0dXJuIGZhbHNlO1xuIFx0fVxufVxuXG4vKlxuICogREVCVUdHSU5HIE9OTFlcbiAqL1xuUElYSS5ydW5MaXN0ID0gZnVuY3Rpb24oaXRlbSlcbntcblx0Y29uc29sZS5sb2coXCI+Pj4+Pj4+Pj5cIilcblx0Y29uc29sZS5sb2coXCJfXCIpXG5cdHZhciBzYWZlID0gMDtcblx0dmFyIHRtcCA9IGl0ZW0uZmlyc3Q7XG5cdGNvbnNvbGUubG9nKHRtcCk7XG5cblx0d2hpbGUodG1wLl9pTmV4dClcblx0e1xuXHRcdHNhZmUrKztcblx0XHR0bXAgPSB0bXAuX2lOZXh0O1xuXHRcdGNvbnNvbGUubG9nKHRtcCk7XG5cdC8vXHRjb25zb2xlLmxvZyh0bXApO1xuXG5cdFx0aWYoc2FmZSA+IDEwMClcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkJSRUFLXCIpXG5cdFx0XHRicmVha1xuXHRcdH1cblx0fVxufVxuXG5cblxuXG5cblxuLyoqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL2V2ZW50dGFyZ2V0LmpzL1xuICogVEhhbmtTIG1yIERPb2IhXG4gKi9cblxuLyoqXG4gKiBBZGRzIGV2ZW50IGVtaXR0ZXIgZnVuY3Rpb25hbGl0eSB0byBhIGNsYXNzXG4gKlxuICogQGNsYXNzIEV2ZW50VGFyZ2V0XG4gKiBAZXhhbXBsZVxuICpcdFx0ZnVuY3Rpb24gTXlFbWl0dGVyKCkge1xuICpcdFx0XHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7IC8vbWl4ZXMgaW4gZXZlbnQgdGFyZ2V0IHN0dWZmXG4gKlx0XHR9XG4gKlxuICpcdFx0dmFyIGVtID0gbmV3IE15RW1pdHRlcigpO1xuICpcdFx0ZW0uZW1pdCh7IHR5cGU6ICdldmVudE5hbWUnLCBkYXRhOiAnc29tZSBkYXRhJyB9KTtcbiAqL1xuUElYSS5FdmVudFRhcmdldCA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgbGlzdGVuZXJzID0ge307XG5cblx0dGhpcy5hZGRFdmVudExpc3RlbmVyID0gdGhpcy5vbiA9IGZ1bmN0aW9uICggdHlwZSwgbGlzdGVuZXIgKSB7XG5cblxuXHRcdGlmICggbGlzdGVuZXJzWyB0eXBlIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0bGlzdGVuZXJzWyB0eXBlIF0gPSBbXTtcblxuXHRcdH1cblxuXHRcdGlmICggbGlzdGVuZXJzWyB0eXBlIF0uaW5kZXhPZiggbGlzdGVuZXIgKSA9PT0gLSAxICkge1xuXG5cdFx0XHRsaXN0ZW5lcnNbIHR5cGUgXS5wdXNoKCBsaXN0ZW5lciApO1xuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuZGlzcGF0Y2hFdmVudCA9IHRoaXMuZW1pdCA9IGZ1bmN0aW9uICggZXZlbnQgKSB7XG5cblx0XHRpZiAoICFsaXN0ZW5lcnNbIGV2ZW50LnR5cGUgXSB8fCAhbGlzdGVuZXJzWyBldmVudC50eXBlIF0ubGVuZ3RoICkge1xuXG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0XHRmb3IodmFyIGkgPSAwLCBsID0gbGlzdGVuZXJzWyBldmVudC50eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cblx0XHRcdGxpc3RlbmVyc1sgZXZlbnQudHlwZSBdWyBpIF0oIGV2ZW50ICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSB0aGlzLm9mZiA9IGZ1bmN0aW9uICggdHlwZSwgbGlzdGVuZXIgKSB7XG5cblx0XHR2YXIgaW5kZXggPSBsaXN0ZW5lcnNbIHR5cGUgXS5pbmRleE9mKCBsaXN0ZW5lciApO1xuXG5cdFx0aWYgKCBpbmRleCAhPT0gLSAxICkge1xuXG5cdFx0XHRsaXN0ZW5lcnNbIHR5cGUgXS5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHR9XG5cblx0fTtcblxufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBkZXRlY3Qgd2hpY2ggcmVuZGVyZXIgeW91IHNob3VsZCBiZSB1c2luZy5cbiAqIFdlYkdMIGlzIHRoZSBwcmVmZXJyZWQgcmVuZGVyZXIgYXMgaXQgaXMgYSBsb3QgZmFzdGVzdC4gSWYgd2ViR0wgaXMgbm90IHN1cHBvcnRlZCBieVxuICogdGhlIGJyb3dzZXIgdGhlbiB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGEgY2FudmFzIHJlbmRlcmVyXG4gKlxuICogQG1ldGhvZCBhdXRvRGV0ZWN0UmVuZGVyZXJcbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSB3aWR0aCB7TnVtYmVyfSB0aGUgd2lkdGggb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0gdmlldyB7Q2FudmFzfSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0gdHJhbnNwYXJlbnQ9ZmFsc2Uge0Jvb2xlYW59IHRoZSB0cmFuc3BhcmVuY3kgb2YgdGhlIHJlbmRlciB2aWV3LCBkZWZhdWx0IGZhbHNlXG4gKiBAcGFyYW0gYW50aWFsaWFzPWZhbHNlIHtCb29sZWFufSBzZXRzIGFudGlhbGlhcyAob25seSBhcHBsaWNhYmxlIGluIHdlYkdMIGNocm9tZSBhdCB0aGUgbW9tZW50KVxuICpcbiAqIGFudGlhbGlhc1xuICovXG5QSVhJLmF1dG9EZXRlY3RSZW5kZXJlciA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIHZpZXcsIHRyYW5zcGFyZW50LCBhbnRpYWxpYXMpXG57XG5cdGlmKCF3aWR0aCl3aWR0aCA9IDgwMDtcblx0aWYoIWhlaWdodCloZWlnaHQgPSA2MDA7XG5cblx0Ly8gQk9SUk9XRUQgZnJvbSBNciBEb29iIChtcmRvb2IuY29tKVxuXHR2YXIgd2ViZ2wgPSAoIGZ1bmN0aW9uICgpIHsgdHJ5IHsgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7IHJldHVybiAhISB3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ICYmICggY2FudmFzLmdldENvbnRleHQoICd3ZWJnbCcgKSB8fCBjYW52YXMuZ2V0Q29udGV4dCggJ2V4cGVyaW1lbnRhbC13ZWJnbCcgKSApOyB9IGNhdGNoKCBlICkgeyByZXR1cm4gZmFsc2U7IH0gfSApKCk7XG5cblx0aWYod2ViZ2wpXG5cdHtcblx0XHR2YXIgaWUgPSAgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdtc2llJykgIT0gLTEpO1xuXHRcdCB3ZWJnbCA9ICFpZTtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyh3ZWJnbCk7XG5cdGlmKCB3ZWJnbCApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xSZW5kZXJlcih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudCwgYW50aWFsaWFzKTtcblx0fVxuXG5cdHJldHVyblx0bmV3IFBJWEkuQ2FudmFzUmVuZGVyZXIod2lkdGgsIGhlaWdodCwgdmlldywgdHJhbnNwYXJlbnQpO1xufTtcblxuXG5cbi8qXG5cdFBvbHlLIGxpYnJhcnlcblx0dXJsOiBodHRwOi8vcG9seWsuaXZhbmsubmV0XG5cdFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbmNlLlxuXG5cdENvcHlyaWdodCAoYykgMjAxMiBJdmFuIEt1Y2tpclxuXG5cdFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG5cdG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG5cdGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuXHRyZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcblx0Y29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcblx0Y29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG5cdFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG5cdGNvbmRpdGlvbnM6XG5cblx0VGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcblx0aW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblx0VEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcblx0RVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG5cdE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5cdE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG5cdEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuXHRXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcblx0RlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxuXHRPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cblx0VGhpcyBpcyBhbiBhbWF6aW5nIGxpYiFcblxuXHRzbGlnaHRseSBtb2RpZmllZCBieSBtYXQgZ3JvdmVzIChtYXRncm92ZXMuY29tKTtcbiovXG5cblBJWEkuUG9seUsgPSB7fTtcblxuLyoqXG4gKiBUcmlhbmd1bGF0ZXMgc2hhcGVzIGZvciB3ZWJHTCBncmFwaGljIGZpbGxzXG4gKlxuICogQG1ldGhvZCBUcmlhbmd1bGF0ZVxuICogQG5hbWVzcGFjZSBQb2x5S1xuICogQGNvbnN0cnVjdG9yXG4gKi9cblBJWEkuUG9seUsuVHJpYW5ndWxhdGUgPSBmdW5jdGlvbihwKVxue1xuXHR2YXIgc2lnbiA9IHRydWU7XG5cblx0dmFyIG4gPSBwLmxlbmd0aD4+MTtcblx0aWYobjwzKSByZXR1cm4gW107XG5cdHZhciB0Z3MgPSBbXTtcblx0dmFyIGF2bCA9IFtdO1xuXHRmb3IodmFyIGk9MDsgaTxuOyBpKyspIGF2bC5wdXNoKGkpO1xuXG5cdHZhciBpID0gMDtcblx0dmFyIGFsID0gbjtcblx0d2hpbGUoYWwgPiAzKVxuXHR7XG5cdFx0dmFyIGkwID0gYXZsWyhpKzApJWFsXTtcblx0XHR2YXIgaTEgPSBhdmxbKGkrMSklYWxdO1xuXHRcdHZhciBpMiA9IGF2bFsoaSsyKSVhbF07XG5cblx0XHR2YXIgYXggPSBwWzIqaTBdLCAgYXkgPSBwWzIqaTArMV07XG5cdFx0dmFyIGJ4ID0gcFsyKmkxXSwgIGJ5ID0gcFsyKmkxKzFdO1xuXHRcdHZhciBjeCA9IHBbMippMl0sICBjeSA9IHBbMippMisxXTtcblxuXHRcdHZhciBlYXJGb3VuZCA9IGZhbHNlO1xuXHRcdGlmKFBJWEkuUG9seUsuX2NvbnZleChheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBzaWduKSlcblx0XHR7XG5cdFx0XHRlYXJGb3VuZCA9IHRydWU7XG5cdFx0XHRmb3IodmFyIGo9MDsgajxhbDsgaisrKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdmkgPSBhdmxbal07XG5cdFx0XHRcdGlmKHZpPT1pMCB8fCB2aT09aTEgfHwgdmk9PWkyKSBjb250aW51ZTtcblx0XHRcdFx0aWYoUElYSS5Qb2x5Sy5fUG9pbnRJblRyaWFuZ2xlKHBbMip2aV0sIHBbMip2aSsxXSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSkpIHtlYXJGb3VuZCA9IGZhbHNlOyBicmVhazt9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGVhckZvdW5kKVxuXHRcdHtcblx0XHRcdHRncy5wdXNoKGkwLCBpMSwgaTIpO1xuXHRcdFx0YXZsLnNwbGljZSgoaSsxKSVhbCwgMSk7XG5cdFx0XHRhbC0tO1xuXHRcdFx0aSA9IDA7XG5cdFx0fVxuXHRcdGVsc2UgaWYoaSsrID4gMyphbClcblx0XHR7XG5cdFx0XHQvLyBuZWVkIHRvIGZsaXAgZmxpcCByZXZlcnNlIGl0IVxuXHRcdFx0Ly8gcmVzZXQhXG5cdFx0XHRpZihzaWduKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdGdzID0gW107XG5cdFx0XHRcdGF2bCA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGk9MDsgaTxuOyBpKyspIGF2bC5wdXNoKGkpO1xuXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRhbCA9IG47XG5cblx0XHRcdFx0c2lnbiA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBJWEkgV2FybmluZzogc2hhcGUgdG9vIGNvbXBsZXggdG8gZmlsbFwiKVxuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRncy5wdXNoKGF2bFswXSwgYXZsWzFdLCBhdmxbMl0pO1xuXHRyZXR1cm4gdGdzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHBvaW50IGlzIHdpdGhpbiBhIHRyaWFuZ2xlXG4gKlxuICogQGNsYXNzIF9Qb2ludEluVHJpYW5nbGVcbiAqIEBuYW1lc3BhY2UgUG9seUtcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuUG9seUsuX1BvaW50SW5UcmlhbmdsZSA9IGZ1bmN0aW9uKHB4LCBweSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSlcbntcblx0dmFyIHYweCA9IGN4LWF4O1xuXHR2YXIgdjB5ID0gY3ktYXk7XG5cdHZhciB2MXggPSBieC1heDtcblx0dmFyIHYxeSA9IGJ5LWF5O1xuXHR2YXIgdjJ4ID0gcHgtYXg7XG5cdHZhciB2MnkgPSBweS1heTtcblxuXHR2YXIgZG90MDAgPSB2MHgqdjB4K3YweSp2MHk7XG5cdHZhciBkb3QwMSA9IHYweCp2MXgrdjB5KnYxeTtcblx0dmFyIGRvdDAyID0gdjB4KnYyeCt2MHkqdjJ5O1xuXHR2YXIgZG90MTEgPSB2MXgqdjF4K3YxeSp2MXk7XG5cdHZhciBkb3QxMiA9IHYxeCp2MngrdjF5KnYyeTtcblxuXHR2YXIgaW52RGVub20gPSAxIC8gKGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxKTtcblx0dmFyIHUgPSAoZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpICogaW52RGVub207XG5cdHZhciB2ID0gKGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSAqIGludkRlbm9tO1xuXG5cdC8vIENoZWNrIGlmIHBvaW50IGlzIGluIHRyaWFuZ2xlXG5cdHJldHVybiAodSA+PSAwKSAmJiAodiA+PSAwKSAmJiAodSArIHYgPCAxKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzaGFwZSBpcyBjb252ZXhcbiAqXG4gKiBAY2xhc3MgX2NvbnZleFxuICogQG5hbWVzcGFjZSBQb2x5S1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5Qb2x5Sy5fY29udmV4ID0gZnVuY3Rpb24oYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgc2lnbilcbntcblx0cmV0dXJuICgoYXktYnkpKihjeC1ieCkgKyAoYngtYXgpKihjeS1ieSkgPj0gMCkgPT0gc2lnbjtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuaW5pdERlZmF1bHRTaGFkZXJzID0gZnVuY3Rpb24oKSBcbntcblx0UElYSS5wcmltaXRpdmVTaGFkZXIgPSBuZXcgUElYSS5QcmltaXRpdmVTaGFkZXIoKTtcbiAgUElYSS5wcmltaXRpdmVTaGFkZXIuaW5pdCgpO1xuXG4gIFBJWEkuc3RyaXBTaGFkZXIgPSBuZXcgUElYSS5TdHJpcFNoYWRlcigpO1xuICBQSVhJLnN0cmlwU2hhZGVyLmluaXQoKTtcblxuXHRQSVhJLmRlZmF1bHRTaGFkZXIgPSBuZXcgUElYSS5QaXhpU2hhZGVyKCk7XG5cdFBJWEkuZGVmYXVsdFNoYWRlci5pbml0KCk7XG5cbiAgdmFyIGdsID0gUElYSS5nbDsgXG4gIHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5kZWZhdWx0U2hhZGVyLnByb2dyYW07XG4gXG5cbiAgZ2wudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcbiAgXG4gIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuY29sb3JBdHRyaWJ1dGUpO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuYVRleHR1cmVDb29yZCk7XG59XG5cblBJWEkuYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG4gIFxuICBnbC51c2VQcm9ncmFtKFBJWEkucHJpbWl0aXZlU2hhZGVyLnByb2dyYW0pO1xuICBcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVGV4dHVyZUNvb3JkKTtcblxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLnByaW1pdGl2ZVNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLnByaW1pdGl2ZVNoYWRlci5jb2xvckF0dHJpYnV0ZSk7XG59IFxuXG5QSVhJLmRlYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG5cbiAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG4gIFxuICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5wcmltaXRpdmVTaGFkZXIuYVZlcnRleFBvc2l0aW9uKTtcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkucHJpbWl0aXZlU2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcblxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuYVZlcnRleFBvc2l0aW9uKTtcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xuXG59XG5cblBJWEkuYWN0aXZhdGVTdHJpcFNoYWRlciA9IGZ1bmN0aW9uKClcbntcbiAgdmFyIGdsID0gUElYSS5nbDtcbiAgXG4gIGdsLnVzZVByb2dyYW0oUElYSS5zdHJpcFNoYWRlci5wcm9ncmFtKTtcbiAvLyBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xufSBcblxuUElYSS5kZWFjdGl2YXRlU3RyaXBTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG5cbiAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG4gIC8vZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xufVxuXG4vKlxuXG5TSEFERVIgQ09NUElMRVIgSEVMUEVSU1xuKi9cblxuUElYSS5Db21waWxlVmVydGV4U2hhZGVyID0gZnVuY3Rpb24oZ2wsIHNoYWRlclNyYylcbntcbiAgcmV0dXJuIFBJWEkuX0NvbXBpbGVTaGFkZXIoZ2wsIHNoYWRlclNyYywgZ2wuVkVSVEVYX1NIQURFUik7XG59XG5cblBJWEkuQ29tcGlsZUZyYWdtZW50U2hhZGVyID0gZnVuY3Rpb24oZ2wsIHNoYWRlclNyYylcbntcbiAgcmV0dXJuIFBJWEkuX0NvbXBpbGVTaGFkZXIoZ2wsIHNoYWRlclNyYywgZ2wuRlJBR01FTlRfU0hBREVSKTtcbn1cblxuUElYSS5fQ29tcGlsZVNoYWRlciA9IGZ1bmN0aW9uKGdsLCBzaGFkZXJTcmMsIHNoYWRlclR5cGUpXG57XG4gIHZhciBzcmMgPSBzaGFkZXJTcmMuam9pbihcIlxcblwiKTtcbiAgdmFyIHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBzaGFkZXI7XG59XG5cblxuUElYSS5jb21waWxlUHJvZ3JhbSA9IGZ1bmN0aW9uKHZlcnRleFNyYywgZnJhZ21lbnRTcmMpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdHZhciBmcmFnbWVudFNoYWRlciA9IFBJWEkuQ29tcGlsZUZyYWdtZW50U2hhZGVyKGdsLCBmcmFnbWVudFNyYyk7XG5cdHZhciB2ZXJ0ZXhTaGFkZXIgPSBQSVhJLkNvbXBpbGVWZXJ0ZXhTaGFkZXIoZ2wsIHZlcnRleFNyYyk7XG5cdFxuXHR2YXIgc2hhZGVyUHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcblx0XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIHZlcnRleFNoYWRlcik7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICBnbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcblxuICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihzaGFkZXJQcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgaW5pdGlhbGlzZSBzaGFkZXJzXCIpO1xuICAgIH1cblxuXHRyZXR1cm4gc2hhZGVyUHJvZ3JhbTtcbn0gXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5QSVhJLlBpeGlTaGFkZXIgPSBmdW5jdGlvbigpXG57XG5cdC8vIHRoZSB3ZWJHTCBwcm9ncmFtLi5cblx0dGhpcy5wcm9ncmFtO1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBsb3dwIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIHZDb2xvcjtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5QaXhpU2hhZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgcHJvZ3JhbSA9IFBJWEkuY29tcGlsZVByb2dyYW0odGhpcy52ZXJ0ZXhTcmMgfHwgUElYSS5QaXhpU2hhZGVyLmRlZmF1bHRWZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpXG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXHRcblx0Ly8gZ2V0IGFuZCBzdG9yZSB0aGUgdW5pZm9ybXMgZm9yIHRoZSBzaGFkZXJcblx0dGhpcy51U2FtcGxlciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVTYW1wbGVyXCIpO1xuXHR0aGlzLnByb2plY3Rpb25WZWN0b3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJwcm9qZWN0aW9uVmVjdG9yXCIpO1xuXHR0aGlzLm9mZnNldFZlY3RvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcIm9mZnNldFZlY3RvclwiKTtcbiAgICAvL3RoaXMuZGltZW5zaW9ucyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIFwiZGltZW5zaW9uc1wiKTtcbiAgICBcbiAgICAvLyBnZXQgYW5kIHN0b3JlIHRoZSBhdHRyaWJ1dGVzXG4gICAgdGhpcy5hVmVydGV4UG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFWZXJ0ZXhQb3NpdGlvblwiKTtcblx0dGhpcy5jb2xvckF0dHJpYnV0ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYUNvbG9yXCIpO1xuXHR0aGlzLmFUZXh0dXJlQ29vcmQgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFUZXh0dXJlQ29vcmRcIik7XG5cdCAgXG4gICAgLy8gYWRkIHRob3NlIGN1c3RvbSBzaGFkZXJzIVxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnVuaWZvcm1zKVxuICAgIHtcbiAgICAgICBcbiAgICBcdC8vIGdldCB0aGUgdW5pZm9ybSBsb2NhdGlvbnMuLlxuXHQvL1x0cHJvZ3JhbVtrZXldID0gXG4gICAgICAgIHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwga2V5KTtcblxuICAgICAgXG4gICAgfVxuICBcblx0dGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbn1cblxuUElYSS5QaXhpU2hhZGVyLnByb3RvdHlwZS5zeW5jVW5pZm9ybXMgPSBmdW5jdGlvbigpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdFxuXHRmb3IgKHZhciBrZXkgaW4gdGhpcy51bmlmb3JtcykgXG4gICAge1xuICAgIFx0Ly92YXIgXG4gICAgXHR2YXIgdHlwZSA9IHRoaXMudW5pZm9ybXNba2V5XS50eXBlO1xuICAgIFx0XG4gICAgXHQvLyBuZWVkIHRvIGdyb3cgdGhpcyFcbiAgICBcdGlmKHR5cGUgPT0gXCJmXCIpXG4gICAgXHR7XG5cdFx0XHRnbC51bmlmb3JtMWYodGhpcy51bmlmb3Jtc1trZXldLnVuaWZvcm1Mb2NhdGlvbiwgdGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKTtcbiAgICBcdH1cbiAgICBcdGlmKHR5cGUgPT0gXCJmMlwiKVxuICAgIFx0e1xuICAgIFx0Ly9cdGNvbnNvbGUubG9nKHRoaXMucHJvZ3JhbVtrZXldKVxuXHRcdFx0Z2wudW5pZm9ybTJmKHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24sIHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZS54LCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUueSk7XG4gICAgXHR9XG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSBcImY0XCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKVxuICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih0aGlzLnVuaWZvcm1zW2tleV0udW5pZm9ybUxvY2F0aW9uLCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUpO1xuICAgICAgICB9XG4gICAgXHRlbHNlIGlmKHR5cGUgPT0gXCJtYXQ0XCIpXG4gICAgXHR7XG4gICAgXHRcdGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51bmlmb3Jtc1trZXldLnVuaWZvcm1Mb2NhdGlvbiwgZmFsc2UsIHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZSk7XG4gICAgXHR9XG4gICAgXHRlbHNlIGlmKHR5cGUgPT0gXCJzYW1wbGVyMkRcIilcbiAgICBcdHtcbiAgICBcdFx0Ly8gZmlyc3QgdGV4dHVyZS4uLlxuICAgIFx0XHR2YXIgdGV4dHVyZSA9IHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZTtcbiAgICBcdFx0XG4gICAgXHRcdGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO1xuXHQgICAgXHRnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUpO1xuXHQgICAgXHRcbiAgICBcdFx0Z2wudW5pZm9ybTFpKHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24sIDEpO1xuICAgIFx0XHRcbiAgICBcdFx0Ly8gYWN0aXZhdGUgdGV4dHVyZS4uXG4gICAgXHRcdC8vIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5wcm9ncmFtW2tleV0sIGZhbHNlLCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUpO1xuICAgIFx0XHQvLyBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMucHJvZ3JhbVtrZXldLCBmYWxzZSwgdGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKTtcbiAgICBcdH1cbiAgICB9XG4gICAgXG59XG5cblBJWEkuUGl4aVNoYWRlci5kZWZhdWx0VmVydGV4U3JjID0gW1xuICBcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcIixcbiAgXCJhdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1wiLFxuICBcImF0dHJpYnV0ZSBmbG9hdCBhQ29sb3I7XCIsXG4gIFxuICBcInVuaWZvcm0gdmVjMiBwcm9qZWN0aW9uVmVjdG9yO1wiLFxuIFwidW5pZm9ybSB2ZWMyIG9mZnNldFZlY3RvcjtcIixcbiAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcbiAgXG4gIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cbiAgXCJjb25zdCB2ZWMyIGNlbnRlciA9IHZlYzIoLTEuMCwgMS4wKTtcIixcbiAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuICAgIFwiZ2xfUG9zaXRpb24gPSB2ZWM0KCAoKGFWZXJ0ZXhQb3NpdGlvbiArIG9mZnNldFZlY3RvcikgLyBwcm9qZWN0aW9uVmVjdG9yKSArIGNlbnRlciAsIDAuMCwgMS4wKTtcIixcbiAgICBcInZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1wiLFxuICAgIFwidkNvbG9yID0gYUNvbG9yO1wiLFxuICBcIn1cIlxuXTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuU3RyaXBTaGFkZXIgPSBmdW5jdGlvbigpXG57XG5cdC8vIHRoZSB3ZWJHTCBwcm9ncmFtLi5cblx0dGhpcy5wcm9ncmFtO1xuXHRcbiAgICB0aGlzLmZyYWdtZW50U3JjID0gW1xuICAgICAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcbiAgICAgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuICAgICAgXCJ1bmlmb3JtIGZsb2F0IGFscGhhO1wiLFxuICAgICAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcbiAgICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcbiAgICAgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKTtcIixcbiAgICAgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiBhbHBoYTtcIixcbiAgICAgIFwifVwiXG4gICAgXTtcblxuICAgIHRoaXMudmVydGV4U3JjID0gW1xuICAgICAgXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XCIsXG4gICAgICBcImF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICBcImF0dHJpYnV0ZSBmbG9hdCBhQ29sb3I7XCIsXG4gICAgICBcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcbiAgICAgIFwidW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XCIsXG4gICAgICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuICAgICAgXCJ2YXJ5aW5nIHZlYzIgb2Zmc2V0VmVjdG9yO1wiLFxuICAgICAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcbiAgICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcbiAgICAgICAgXCJ2ZWMzIHYgPSB0cmFuc2xhdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApO1wiLFxuICAgICAgICBcInYgLT0gb2Zmc2V0VmVjdG9yLnh5eDtcIixcbiAgICAgICAgXCJnbF9Qb3NpdGlvbiA9IHZlYzQoIHYueCAvIHByb2plY3Rpb25WZWN0b3IueCAtMS4wLCB2LnkgLyBwcm9qZWN0aW9uVmVjdG9yLnkgKyAxLjAgLCAwLjAsIDEuMCk7XCIsXG4gICAgICAgIFwidlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICAgIFwidkNvbG9yID0gYUNvbG9yO1wiLFxuICAgICAgXCJ9XCJcbiAgICBdO1xufVxuXG5QSVhJLlN0cmlwU2hhZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgcHJvZ3JhbSA9IFBJWEkuY29tcGlsZVByb2dyYW0odGhpcy52ZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpXG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG5cdC8vIGdldCBhbmQgc3RvcmUgdGhlIHVuaWZvcm1zIGZvciB0aGUgc2hhZGVyXG5cdHRoaXMudVNhbXBsZXIgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1U2FtcGxlclwiKTtcblx0dGhpcy5wcm9qZWN0aW9uVmVjdG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwicHJvamVjdGlvblZlY3RvclwiKTtcblx0dGhpcy5vZmZzZXRWZWN0b3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJvZmZzZXRWZWN0b3JcIik7XG5cdHRoaXMuY29sb3JBdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFDb2xvclwiKTtcblx0Ly90aGlzLmRpbWVuc2lvbnMgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcImRpbWVuc2lvbnNcIik7XG5cdFxuXHQvLyBnZXQgYW5kIHN0b3JlIHRoZSBhdHRyaWJ1dGVzXG5cdHRoaXMuYVZlcnRleFBvc2l0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhVmVydGV4UG9zaXRpb25cIik7XG5cdHRoaXMuYVRleHR1cmVDb29yZCA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYVRleHR1cmVDb29yZFwiKTtcblx0ICBcbiAgICB0aGlzLnRyYW5zbGF0aW9uTWF0cml4ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidHJhbnNsYXRpb25NYXRyaXhcIik7XG4gICAgdGhpcy5hbHBoYSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcImFscGhhXCIpO1xuICBcblx0dGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuUHJpbWl0aXZlU2hhZGVyID0gZnVuY3Rpb24oKVxue1xuXHQvLyB0aGUgd2ViR0wgcHJvZ3JhbS4uXG5cdHRoaXMucHJvZ3JhbTtcbiAgICBcdFxuICAgIHRoaXMuZnJhZ21lbnRTcmMgPSBbXG4gICAgICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuICAgICAgXCJ2YXJ5aW5nIHZlYzQgdkNvbG9yO1wiLFxuICAgICAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuICAgICAgICBcImdsX0ZyYWdDb2xvciA9IHZDb2xvcjtcIixcbiAgICAgIFwifVwiXG4gICAgXTtcblxuICAgIHRoaXMudmVydGV4U3JjICA9IFtcbiAgICAgIFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1wiLFxuICAgICAgXCJhdHRyaWJ1dGUgdmVjNCBhQ29sb3I7XCIsXG4gICAgICBcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcbiAgICAgIFwidW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XCIsXG4gICAgICBcInVuaWZvcm0gdmVjMiBvZmZzZXRWZWN0b3I7XCIsXG4gICAgICBcInVuaWZvcm0gZmxvYXQgYWxwaGE7XCIsXG4gICAgICBcInZhcnlpbmcgdmVjNCB2Q29sb3I7XCIsXG4gICAgICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG4gICAgICAgIFwidmVjMyB2ID0gdHJhbnNsYXRpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiAsIDEuMCk7XCIsXG4gICAgICAgIFwidiAtPSBvZmZzZXRWZWN0b3IueHl4O1wiLFxuICAgICAgICBcImdsX1Bvc2l0aW9uID0gdmVjNCggdi54IC8gcHJvamVjdGlvblZlY3Rvci54IC0xLjAsIHYueSAvIC1wcm9qZWN0aW9uVmVjdG9yLnkgKyAxLjAgLCAwLjAsIDEuMCk7XCIsXG4gICAgICAgIFwidkNvbG9yID0gYUNvbG9yICAqIGFscGhhO1wiLFxuICAgICAgXCJ9XCJcbiAgICBdO1xuXHRcbn1cblxuUElYSS5QcmltaXRpdmVTaGFkZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpXG57XG5cdHZhciBwcm9ncmFtID0gUElYSS5jb21waWxlUHJvZ3JhbSh0aGlzLnZlcnRleFNyYywgdGhpcy5mcmFnbWVudFNyYyk7XG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcblx0XG5cdC8vIGdldCBhbmQgc3RvcmUgdGhlIHVuaWZvcm1zIGZvciB0aGUgc2hhZGVyXG5cdHRoaXMucHJvamVjdGlvblZlY3RvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInByb2plY3Rpb25WZWN0b3JcIik7XG5cdHRoaXMub2Zmc2V0VmVjdG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwib2Zmc2V0VmVjdG9yXCIpO1xuICBcbiAgLy8gZ2V0IGFuZCBzdG9yZSB0aGUgYXR0cmlidXRlc1xuICB0aGlzLmFWZXJ0ZXhQb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYVZlcnRleFBvc2l0aW9uXCIpO1xuXHR0aGlzLmNvbG9yQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhQ29sb3JcIik7XG5cdFxuICB0aGlzLnRyYW5zbGF0aW9uTWF0cml4ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidHJhbnNsYXRpb25NYXRyaXhcIik7XG4gIHRoaXMuYWxwaGEgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJhbHBoYVwiKTtcblxuXHR0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBzZXQgb2YgZnVuY3Rpb25zIHVzZWQgYnkgdGhlIHdlYkdMIHJlbmRlcmVyIHRvIGRyYXcgdGhlIHByaW1pdGl2ZSBncmFwaGljcyBkYXRhXG4gKlxuICogQGNsYXNzIENhbnZhc0dyYXBoaWNzXG4gKi9cblBJWEkuV2ViR0xHcmFwaGljcyA9IGZ1bmN0aW9uKClcbntcblx0XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVuZGVyR3JhcGhpY3NcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gcHJvamVjdGlvbiB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MgPSBmdW5jdGlvbihncmFwaGljcywgcHJvamVjdGlvbilcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdGlmKCFncmFwaGljcy5fd2ViR0wpZ3JhcGhpY3MuX3dlYkdMID0ge3BvaW50czpbXSwgaW5kaWNlczpbXSwgbGFzdEluZGV4OjAsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICBidWZmZXI6Z2wuY3JlYXRlQnVmZmVyKCksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgIGluZGV4QnVmZmVyOmdsLmNyZWF0ZUJ1ZmZlcigpfTtcblx0XG5cdGlmKGdyYXBoaWNzLmRpcnR5KVxuXHR7XG5cdFx0Z3JhcGhpY3MuZGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHRpZihncmFwaGljcy5jbGVhckRpcnR5KVxuXHRcdHtcblx0XHRcdGdyYXBoaWNzLmNsZWFyRGlydHkgPSBmYWxzZTtcblx0XHRcdFxuXHRcdFx0Z3JhcGhpY3MuX3dlYkdMLmxhc3RJbmRleCA9IDA7XG5cdFx0XHRncmFwaGljcy5fd2ViR0wucG9pbnRzID0gW107XG5cdFx0XHRncmFwaGljcy5fd2ViR0wuaW5kaWNlcyA9IFtdO1xuXHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdFBJWEkuV2ViR0xHcmFwaGljcy51cGRhdGVHcmFwaGljcyhncmFwaGljcyk7XG5cdH1cblx0XG5cdFBJWEkuYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIoKTtcblx0XG5cdC8vIFRoaXMgIGNvdWxkIGJlIHNwZWVkZWQgdXAgZm8gc3VyZSFcblx0dmFyIG0gPSBQSVhJLm1hdDMuY2xvbmUoZ3JhcGhpY3Mud29ybGRUcmFuc2Zvcm0pO1xuXHRcblx0UElYSS5tYXQzLnRyYW5zcG9zZShtKTtcblx0XG5cdC8vIHNldCB0aGUgbWF0cml4IHRyYW5zZm9ybSBmb3IgdGhlIFxuIFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cbiBcdGdsLnVuaWZvcm1NYXRyaXgzZnYoUElYSS5wcmltaXRpdmVTaGFkZXIudHJhbnNsYXRpb25NYXRyaXgsIGZhbHNlLCBtKTtcbiBcdFxuXHRnbC51bmlmb3JtMmYoUElYSS5wcmltaXRpdmVTaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCAtcHJvamVjdGlvbi55KTtcblx0Z2wudW5pZm9ybTJmKFBJWEkucHJpbWl0aXZlU2hhZGVyLm9mZnNldFZlY3RvciwgLVBJWEkub2Zmc2V0LngsIC1QSVhJLm9mZnNldC55KTtcblx0XG5cdGdsLnVuaWZvcm0xZihQSVhJLnByaW1pdGl2ZVNoYWRlci5hbHBoYSwgZ3JhcGhpY3Mud29ybGRBbHBoYSk7XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBncmFwaGljcy5fd2ViR0wuYnVmZmVyKTtcblx0XG5cdGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoUElYSS5wcmltaXRpdmVTaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDQgKiA2LCAwKTtcblx0Z2wudmVydGV4QXR0cmliUG9pbnRlcihQSVhJLnByaW1pdGl2ZVNoYWRlci5jb2xvckF0dHJpYnV0ZSwgNCwgZ2wuRkxPQVQsIGZhbHNlLDQgKiA2LCAyICogNCk7XG5cdFxuXHQvLyBzZXQgdGhlIGluZGV4IGJ1ZmZlciFcblx0Z2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmluZGV4QnVmZmVyKTtcblx0XG5cblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFX1NUUklQLCAgZ3JhcGhpY3MuX3dlYkdMLmluZGljZXMubGVuZ3RoLCBnbC5VTlNJR05FRF9TSE9SVCwgMCApO1xuXHRcblx0UElYSS5kZWFjdGl2YXRlUHJpbWl0aXZlU2hhZGVyKCk7XG5cdFxuXHRcblx0Ly8gcmV0dXJuIHRvIGRlZmF1bHQgc2hhZGVyLi4uXG4vL1x0UElYSS5hY3RpdmF0ZVNoYWRlcihQSVhJLmRlZmF1bHRTaGFkZXIpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGdyYXBoaWNzIG9iamVjdFxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIHVwZGF0ZUdyYXBoaWNzXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MudXBkYXRlR3JhcGhpY3MgPSBmdW5jdGlvbihncmFwaGljcylcbntcblx0Zm9yICh2YXIgaT1ncmFwaGljcy5fd2ViR0wubGFzdEluZGV4OyBpIDwgZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhLmxlbmd0aDsgaSsrKSBcblx0e1xuXHRcdHZhciBkYXRhID0gZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhW2ldO1xuXHRcdFxuXHRcdGlmKGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLlBPTFkpXG5cdFx0e1xuXHRcdFx0aWYoZGF0YS5maWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihkYXRhLnBvaW50cy5sZW5ndGg+MykgXG5cdFx0XHRcdFBJWEkuV2ViR0xHcmFwaGljcy5idWlsZFBvbHkoZGF0YSwgZ3JhcGhpY3MuX3dlYkdMKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGggPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRMaW5lKGRhdGEsIGdyYXBoaWNzLl93ZWJHTCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuUkVDVClcblx0XHR7XG5cdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRSZWN0YW5nbGUoZGF0YSwgZ3JhcGhpY3MuX3dlYkdMKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5DSVJDIHx8IGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLkVMSVApXG5cdFx0e1xuXHRcdFx0UElYSS5XZWJHTEdyYXBoaWNzLmJ1aWxkQ2lyY2xlKGRhdGEsIGdyYXBoaWNzLl93ZWJHTCk7XG5cdFx0fVxuXHR9O1xuXHRcblx0Z3JhcGhpY3MuX3dlYkdMLmxhc3RJbmRleCA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YS5sZW5ndGg7XG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXG5cdGdyYXBoaWNzLl93ZWJHTC5nbFBvaW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoZ3JhcGhpY3MuX3dlYkdMLnBvaW50cyk7XG5cdFxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmJ1ZmZlcik7XG5cdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBncmFwaGljcy5fd2ViR0wuZ2xQb2ludHMsIGdsLlNUQVRJQ19EUkFXKTtcblx0XG5cdGdyYXBoaWNzLl93ZWJHTC5nbEluZGljaWVzID0gbmV3IFVpbnQxNkFycmF5KGdyYXBoaWNzLl93ZWJHTC5pbmRpY2VzKTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGdyYXBoaWNzLl93ZWJHTC5pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmdsSW5kaWNpZXMsIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuLyoqXG4gKiBCdWlsZHMgYSByZWN0YW5nbGUgdG8gZHJhd1xuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGJ1aWxkUmVjdGFuZ2xlXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRSZWN0YW5nbGUgPSBmdW5jdGlvbihncmFwaGljc0RhdGEsIHdlYkdMRGF0YSlcbntcblx0Ly8gLS0tIC8vXG5cdC8vIG5lZWQgdG8gY29udmVydCBwb2ludHMgdG8gYSBuaWNlIHJlZ3VsYXIgZGF0YVxuXHQvLyBcblx0dmFyIHJlY3REYXRhID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcblx0dmFyIHggPSByZWN0RGF0YVswXTtcblx0dmFyIHkgPSByZWN0RGF0YVsxXTtcblx0dmFyIHdpZHRoID0gcmVjdERhdGFbMl07XG5cdHZhciBoZWlnaHQgPSByZWN0RGF0YVszXTtcblx0XG5cdFxuXHRpZihncmFwaGljc0RhdGEuZmlsbClcblx0e1xuXHRcdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5maWxsQ29sb3IpO1xuXHRcdHZhciBhbHBoYSA9IGdyYXBoaWNzRGF0YS5maWxsQWxwaGE7XG5cdFx0XG5cdFx0dmFyIHIgPSBjb2xvclswXSAqIGFscGhhO1xuXHRcdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0XHR2YXIgYiA9IGNvbG9yWzJdICogYWxwaGE7XG5cdFxuXHRcdHZhciB2ZXJ0cyA9IHdlYkdMRGF0YS5wb2ludHM7XG5cdFx0dmFyIGluZGljZXMgPSB3ZWJHTERhdGEuaW5kaWNlcztcblx0XG5cdFx0dmFyIHZlcnRQb3MgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XHRcblx0XHQvLyBzdGFydFxuXHRcdHZlcnRzLnB1c2goeCwgeSk7XG5cdFx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFx0XG5cdFx0dmVydHMucHVzaCh4ICsgd2lkdGgsIHkpO1xuXHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFxuXHRcdHZlcnRzLnB1c2goeCAsIHkgKyBoZWlnaHQpO1xuXHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFxuXHRcdHZlcnRzLnB1c2goeCArIHdpZHRoLCB5ICsgaGVpZ2h0KTtcblx0XHR2ZXJ0cy5wdXNoKHIsIGcsIGIsIGFscGhhKTtcblx0XHRcblx0XHQvLyBpbnNlcnQgMiBkZWFkIHRyaWFuZ2xlcy4uXG5cdFx0aW5kaWNlcy5wdXNoKHZlcnRQb3MsIHZlcnRQb3MsIHZlcnRQb3MrMSwgdmVydFBvcysyLCB2ZXJ0UG9zKzMsIHZlcnRQb3MrMylcblx0fVxuXHRcblx0aWYoZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aClcblx0e1xuXHRcdGdyYXBoaWNzRGF0YS5wb2ludHMgPSBbeCwgeSxcblx0XHRcdFx0ICB4ICsgd2lkdGgsIHksXG5cdFx0XHRcdCAgeCArIHdpZHRoLCB5ICsgaGVpZ2h0LFxuXHRcdFx0XHQgIHgsIHkgKyBoZWlnaHQsXG5cdFx0XHRcdCAgeCwgeV07XG5cdFxuXHRcdFBJWEkuV2ViR0xHcmFwaGljcy5idWlsZExpbmUoZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpO1xuXHR9XG5cdFxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIGNpcmNsZSB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRDaXJjbGVcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gd2ViR0xEYXRhIHtPYmplY3R9XG4gKi9cblBJWEkuV2ViR0xHcmFwaGljcy5idWlsZENpcmNsZSA9IGZ1bmN0aW9uKGdyYXBoaWNzRGF0YSwgd2ViR0xEYXRhKVxue1xuXHQvLyAtLS0gLy9cblx0Ly8gbmVlZCB0byBjb252ZXJ0IHBvaW50cyB0byBhIG5pY2UgcmVndWxhciBkYXRhXG5cdC8vIFxuXHR2YXIgcmVjdERhdGEgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHR2YXIgeCA9IHJlY3REYXRhWzBdO1xuXHR2YXIgeSA9IHJlY3REYXRhWzFdO1xuXHR2YXIgd2lkdGggPSByZWN0RGF0YVsyXTtcblx0dmFyIGhlaWdodCA9IHJlY3REYXRhWzNdO1xuXHRcblx0dmFyIHRvdGFsU2VncyA9IDQwO1xuXHR2YXIgc2VnID0gKE1hdGguUEkgKiAyKSAvIHRvdGFsU2VncyA7XG5cdFx0XG5cdGlmKGdyYXBoaWNzRGF0YS5maWxsKVxuXHR7XG5cdFx0dmFyIGNvbG9yID0gSEVYdG9SR0IoZ3JhcGhpY3NEYXRhLmZpbGxDb2xvcik7XG5cdFx0dmFyIGFscGhhID0gZ3JhcGhpY3NEYXRhLmZpbGxBbHBoYTtcblxuXHRcdHZhciByID0gY29sb3JbMF0gKiBhbHBoYTtcblx0XHR2YXIgZyA9IGNvbG9yWzFdICogYWxwaGE7XG5cdFx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0XHR2YXIgdmVydHMgPSB3ZWJHTERhdGEucG9pbnRzO1xuXHRcdHZhciBpbmRpY2VzID0gd2ViR0xEYXRhLmluZGljZXM7XG5cdFxuXHRcdHZhciB2ZWNQb3MgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XHRcblx0XHRpbmRpY2VzLnB1c2godmVjUG9zKTtcblx0XHRcblx0XHRmb3IgKHZhciBpPTA7IGkgPCB0b3RhbFNlZ3MgKyAxIDsgaSsrKSBcblx0XHR7XG5cdFx0XHR2ZXJ0cy5wdXNoKHgseSwgciwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHggKyBNYXRoLnNpbihzZWcgKiBpKSAqIHdpZHRoLFxuXHRcdFx0XHRcdCAgIHkgKyBNYXRoLmNvcyhzZWcgKiBpKSAqIGhlaWdodCxcblx0XHRcdFx0XHQgICByLCBnLCBiLCBhbHBoYSk7XG5cdFx0XG5cdFx0XHRpbmRpY2VzLnB1c2godmVjUG9zKyssIHZlY1BvcysrKTtcblx0XHR9O1xuXHRcdFxuXHRcdGluZGljZXMucHVzaCh2ZWNQb3MtMSk7XG5cdH1cblx0XG5cdGlmKGdyYXBoaWNzRGF0YS5saW5lV2lkdGgpXG5cdHtcblx0XHRncmFwaGljc0RhdGEucG9pbnRzID0gW107XG5cdFx0XG5cdFx0Zm9yICh2YXIgaT0wOyBpIDwgdG90YWxTZWdzICsgMTsgaSsrKSBcblx0XHR7XG5cdFx0XHRncmFwaGljc0RhdGEucG9pbnRzLnB1c2goeCArIE1hdGguc2luKHNlZyAqIGkpICogd2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0XHQgeSArIE1hdGguY29zKHNlZyAqIGkpICogaGVpZ2h0KVxuXHRcdH07XG5cdFx0XG5cdFx0UElYSS5XZWJHTEdyYXBoaWNzLmJ1aWxkTGluZShncmFwaGljc0RhdGEsIHdlYkdMRGF0YSk7XG5cdH1cblx0XG59XG5cbi8qKlxuICogQnVpbGRzIGEgbGluZSB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRMaW5lXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRMaW5lID0gZnVuY3Rpb24oZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpXG57XG5cdC8vIFRPRE8gT1BUSU1JU0UhXG5cdFxuXHR2YXIgd3JhcCA9IHRydWU7XG5cdHZhciBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoID09IDApcmV0dXJuO1xuXHRcblx0Ly8gaWYgdGhlIGxpbmUgd2lkdGggaXMgYW4gb2RkIG51bWJlciBhZGQgMC41IHRvIGFsaWduIHRvIGEgd2hvbGUgcGl4ZWxcblx0aWYoZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aCUyKVxuXHR7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHBvaW50c1tpXSArPSAwLjU7XG5cdFx0fTtcblx0fVxuXG5cdC8vIGdldCBmaXJzdCBhbmQgbGFzdCBwb2ludC4uIGZpZ3VyZSBvdXQgdGhlIG1pZGRsZSFcblx0dmFyIGZpcnN0UG9pbnQgPSBuZXcgUElYSS5Qb2ludCggcG9pbnRzWzBdLCBwb2ludHNbMV0gKTtcblx0dmFyIGxhc3RQb2ludCA9IG5ldyBQSVhJLlBvaW50KCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdLCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdICk7XG5cdFxuXHQvLyBpZiB0aGUgZmlyc3QgcG9pbnQgaXMgdGhlIGxhc3QgcG9pbnQgLSBnb29uYSBoYXZlIGlzc3VlcyA6KVxuXHRpZihmaXJzdFBvaW50LnggPT0gbGFzdFBvaW50LnggJiYgZmlyc3RQb2ludC55ID09IGxhc3RQb2ludC55KVxuXHR7XG5cdFx0cG9pbnRzLnBvcCgpO1xuXHRcdHBvaW50cy5wb3AoKTtcblx0XHRcblx0XHRsYXN0UG9pbnQgPSBuZXcgUElYSS5Qb2ludCggcG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSwgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSApO1xuXHRcdFxuXHRcdHZhciBtaWRQb2ludFggPSBsYXN0UG9pbnQueCArIChmaXJzdFBvaW50LnggLSBsYXN0UG9pbnQueCkgKjAuNTtcblx0XHR2YXIgbWlkUG9pbnRZID0gbGFzdFBvaW50LnkgKyAoZmlyc3RQb2ludC55IC0gbGFzdFBvaW50LnkpICowLjU7XG5cdFx0XG5cdFx0cG9pbnRzLnVuc2hpZnQobWlkUG9pbnRYLCBtaWRQb2ludFkpO1xuXHRcdHBvaW50cy5wdXNoKG1pZFBvaW50WCwgbWlkUG9pbnRZKVxuXHR9XG5cdFxuXHR2YXIgdmVydHMgPSB3ZWJHTERhdGEucG9pbnRzO1xuXHR2YXIgaW5kaWNlcyA9IHdlYkdMRGF0YS5pbmRpY2VzO1xuXHR2YXIgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG5cdHZhciBpbmRleENvdW50ID0gcG9pbnRzLmxlbmd0aDtcblx0dmFyIGluZGV4U3RhcnQgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XG5cdC8vIERSQVcgdGhlIExpbmVcblx0dmFyIHdpZHRoID0gZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aCAvIDI7XG5cdFxuXHQvLyBzb3J0IGNvbG9yXG5cdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5saW5lQ29sb3IpO1xuXHR2YXIgYWxwaGEgPSBncmFwaGljc0RhdGEubGluZUFscGhhO1xuXHR2YXIgciA9IGNvbG9yWzBdICogYWxwaGE7XG5cdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0dmFyIHAxeCwgcDF5LCBwMngsIHAyeSwgcDN4LCBwM3k7XG5cdHZhciBwZXJweCwgcGVycHksIHBlcnAyeCwgcGVycDJ5LCBwZXJwM3gsIHBlcnAzeTtcblx0dmFyIGlweCwgaXB5O1xuXHR2YXIgYTEsIGIxLCBjMSwgYTIsIGIyLCBjMjtcblx0dmFyIGRlbm9tLCBwZGlzdCwgZGlzdDtcblx0XG5cdHAxeCA9IHBvaW50c1swXTtcblx0cDF5ID0gcG9pbnRzWzFdO1xuXHRcblx0cDJ4ID0gcG9pbnRzWzJdO1xuXHRwMnkgPSBwb2ludHNbM107XG5cdFxuXHRwZXJweCA9IC0ocDF5IC0gcDJ5KTtcblx0cGVycHkgPSAgcDF4IC0gcDJ4O1xuXHRcblx0ZGlzdCA9IE1hdGguc3FydChwZXJweCpwZXJweCArIHBlcnB5KnBlcnB5KTtcblx0XG5cdHBlcnB4IC89IGRpc3Q7XG5cdHBlcnB5IC89IGRpc3Q7XG5cdHBlcnB4ICo9IHdpZHRoO1xuXHRwZXJweSAqPSB3aWR0aDtcblx0XG5cdC8vIHN0YXJ0XG5cdHZlcnRzLnB1c2gocDF4IC0gcGVycHggLCBwMXkgLSBwZXJweSxcblx0XHRcdFx0ciwgZywgYiwgYWxwaGEpO1xuXHRcblx0dmVydHMucHVzaChwMXggKyBwZXJweCAsIHAxeSArIHBlcnB5LFxuXHRcdFx0XHRyLCBnLCBiLCBhbHBoYSk7XG5cdFxuXHRmb3IgKHZhciBpID0gMTsgaSA8IGxlbmd0aC0xOyBpKyspIFxuXHR7XG5cdFx0cDF4ID0gcG9pbnRzWyhpLTEpKjJdO1xuXHRcdHAxeSA9IHBvaW50c1soaS0xKSoyICsgMV07XG5cdFx0XG5cdFx0cDJ4ID0gcG9pbnRzWyhpKSoyXVxuXHRcdHAyeSA9IHBvaW50c1soaSkqMiArIDFdXG5cdFx0XG5cdFx0cDN4ID0gcG9pbnRzWyhpKzEpKjJdO1xuXHRcdHAzeSA9IHBvaW50c1soaSsxKSoyICsgMV07XG5cdFx0XG5cdFx0cGVycHggPSAtKHAxeSAtIHAyeSk7XG5cdFx0cGVycHkgPSBwMXggLSBwMng7XG5cdFx0XG5cdFx0ZGlzdCA9IE1hdGguc3FydChwZXJweCpwZXJweCArIHBlcnB5KnBlcnB5KTtcblx0XHRwZXJweCAvPSBkaXN0O1xuXHRcdHBlcnB5IC89IGRpc3Q7XG5cdFx0cGVycHggKj0gd2lkdGg7XG5cdFx0cGVycHkgKj0gd2lkdGg7XG5cblx0XHRwZXJwMnggPSAtKHAyeSAtIHAzeSk7XG5cdFx0cGVycDJ5ID0gcDJ4IC0gcDN4O1xuXHRcdFxuXHRcdGRpc3QgPSBNYXRoLnNxcnQocGVycDJ4KnBlcnAyeCArIHBlcnAyeSpwZXJwMnkpO1xuXHRcdHBlcnAyeCAvPSBkaXN0O1xuXHRcdHBlcnAyeSAvPSBkaXN0O1xuXHRcdHBlcnAyeCAqPSB3aWR0aDtcblx0XHRwZXJwMnkgKj0gd2lkdGg7XG5cdFx0XG5cdFx0YTEgPSAoLXBlcnB5ICsgcDF5KSAtICgtcGVycHkgKyBwMnkpO1xuXHQgICAgYjEgPSAoLXBlcnB4ICsgcDJ4KSAtICgtcGVycHggKyBwMXgpO1xuXHQgICAgYzEgPSAoLXBlcnB4ICsgcDF4KSAqICgtcGVycHkgKyBwMnkpIC0gKC1wZXJweCArIHAyeCkgKiAoLXBlcnB5ICsgcDF5KTtcblx0ICAgIGEyID0gKC1wZXJwMnkgKyBwM3kpIC0gKC1wZXJwMnkgKyBwMnkpO1xuXHQgICAgYjIgPSAoLXBlcnAyeCArIHAyeCkgLSAoLXBlcnAyeCArIHAzeCk7XG5cdCAgICBjMiA9ICgtcGVycDJ4ICsgcDN4KSAqICgtcGVycDJ5ICsgcDJ5KSAtICgtcGVycDJ4ICsgcDJ4KSAqICgtcGVycDJ5ICsgcDN5KTtcblx0IFxuXHQgICAgZGVub20gPSBhMSpiMiAtIGEyKmIxO1xuXG5cdCAgIGlmKE1hdGguYWJzKGRlbm9tKSA8IDAuMSApXG5cdFx0e1xuXHRcdFxuXHRcdFx0ZGVub20rPTEwLjE7XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIHBlcnB4ICwgcDJ5IC0gcGVycHksXG5cdFx0XHRcdHIsIGcsIGIsIGFscGhhKTtcblx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCArIHBlcnB4ICwgcDJ5ICsgcGVycHksXG5cdFx0XHRcdHIsIGcsIGIsIGFscGhhKTtcblx0XHRcdFxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHQgICAgXG5cdCAgICBweCA9IChiMSpjMiAtIGIyKmMxKS9kZW5vbTtcblx0ICAgIHB5ID0gKGEyKmMxIC0gYTEqYzIpL2Rlbm9tO1xuXHRcdFxuXHRcdFx0XG5cdFx0cGRpc3QgPSAocHggLXAyeCkgKiAocHggLXAyeCkgKyAocHkgLXAyeSkgKyAocHkgLXAyeSk7XG5cdFx0XG5cblx0XHRpZihwZGlzdCA+IDE0MCAqIDE0MClcblx0XHR7XG5cdFx0XHRwZXJwM3ggPSBwZXJweCAtIHBlcnAyeDtcblx0XHRcdHBlcnAzeSA9IHBlcnB5IC0gcGVycDJ5O1xuXHRcdFx0XG5cdFx0XHRkaXN0ID0gTWF0aC5zcXJ0KHBlcnAzeCpwZXJwM3ggKyBwZXJwM3kqcGVycDN5KTtcblx0XHRcdHBlcnAzeCAvPSBkaXN0O1xuXHRcdFx0cGVycDN5IC89IGRpc3Q7XG5cdFx0XHRwZXJwM3ggKj0gd2lkdGg7XG5cdFx0XHRwZXJwM3kgKj0gd2lkdGg7XG5cdFx0XHRcblx0XHRcdHZlcnRzLnB1c2gocDJ4IC0gcGVycDN4LCBwMnkgLXBlcnAzeSk7XG5cdFx0XHR2ZXJ0cy5wdXNoKHIsIGcsIGIsIGFscGhhKTtcblx0XHRcdFxuXHRcdFx0dmVydHMucHVzaChwMnggKyBwZXJwM3gsIHAyeSArcGVycDN5KTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIHBlcnAzeCwgcDJ5IC1wZXJwM3kpO1xuXHRcdFx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFx0XHRcblx0XHRcdGluZGV4Q291bnQrKztcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblxuXHRcdFx0dmVydHMucHVzaChweCAsIHB5KTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIChweC1wMngpLCBwMnkgLSAocHkgLSBwMnkpKTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdH1cblx0fVxuXHRcblx0cDF4ID0gcG9pbnRzWyhsZW5ndGgtMikqMl1cblx0cDF5ID0gcG9pbnRzWyhsZW5ndGgtMikqMiArIDFdIFxuXHRcblx0cDJ4ID0gcG9pbnRzWyhsZW5ndGgtMSkqMl1cblx0cDJ5ID0gcG9pbnRzWyhsZW5ndGgtMSkqMiArIDFdXG5cdFxuXHRwZXJweCA9IC0ocDF5IC0gcDJ5KVxuXHRwZXJweSA9IHAxeCAtIHAyeDtcblx0XG5cdGRpc3QgPSBNYXRoLnNxcnQocGVycHgqcGVycHggKyBwZXJweSpwZXJweSk7XG5cdHBlcnB4IC89IGRpc3Q7XG5cdHBlcnB5IC89IGRpc3Q7XG5cdHBlcnB4ICo9IHdpZHRoO1xuXHRwZXJweSAqPSB3aWR0aDtcblx0XG5cdHZlcnRzLnB1c2gocDJ4IC0gcGVycHggLCBwMnkgLSBwZXJweSlcblx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFxuXHR2ZXJ0cy5wdXNoKHAyeCArIHBlcnB4ICwgcDJ5ICsgcGVycHkpXG5cdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcblx0aW5kaWNlcy5wdXNoKGluZGV4U3RhcnQpO1xuXHRcblx0Zm9yICh2YXIgaT0wOyBpIDwgaW5kZXhDb3VudDsgaSsrKSBcblx0e1xuXHRcdGluZGljZXMucHVzaChpbmRleFN0YXJ0KyspO1xuXHR9O1xuXHRcblx0aW5kaWNlcy5wdXNoKGluZGV4U3RhcnQtMSk7XG59XG5cbi8qKlxuICogQnVpbGRzIGEgcG9seWdvbiB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRQb2x5XG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRQb2x5ID0gZnVuY3Rpb24oZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpXG57XG5cdHZhciBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgNilyZXR1cm47XG5cdFxuXHQvLyBnZXQgZmlyc3QgYW5kIGxhc3QgcG9pbnQuLiBmaWd1cmUgb3V0IHRoZSBtaWRkbGUhXG5cdHZhciB2ZXJ0cyA9IHdlYkdMRGF0YS5wb2ludHM7XG5cdHZhciBpbmRpY2VzID0gd2ViR0xEYXRhLmluZGljZXM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG5cdFxuXHQvLyBzb3J0IGNvbG9yXG5cdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5maWxsQ29sb3IpO1xuXHR2YXIgYWxwaGEgPSBncmFwaGljc0RhdGEuZmlsbEFscGhhO1xuXHR2YXIgciA9IGNvbG9yWzBdICogYWxwaGE7XG5cdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0dmFyIHRyaWFuZ2xlcyA9IFBJWEkuUG9seUsuVHJpYW5ndWxhdGUocG9pbnRzKTtcblx0XG5cdHZhciB2ZXJ0UG9zID0gdmVydHMubGVuZ3RoIC8gNjtcblx0XG5cdGZvciAodmFyIGk9MDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrPTMpIFxuXHR7XG5cdFx0aW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpXSArIHZlcnRQb3MpO1xuXHRcdGluZGljZXMucHVzaCh0cmlhbmdsZXNbaV0gKyB2ZXJ0UG9zKTtcblx0XHRpbmRpY2VzLnB1c2godHJpYW5nbGVzW2krMV0gKyB2ZXJ0UG9zKTtcblx0XHRpbmRpY2VzLnB1c2godHJpYW5nbGVzW2krMl0gK3ZlcnRQb3MpO1xuXHRcdGluZGljZXMucHVzaCh0cmlhbmdsZXNbaSsyXSArIHZlcnRQb3MpO1xuXHR9O1xuXHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgXG5cdHtcblx0XHR2ZXJ0cy5wdXNoKHBvaW50c1tpICogMl0sIHBvaW50c1tpICogMiArIDFdLFxuXHRcdFx0XHQgICByLCBnLCBiLCBhbHBoYSk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIEhFWHRvUkdCKGhleCkge1xuXHRyZXR1cm4gWyhoZXggPj4gMTYgJiAweEZGKSAvIDI1NSwgKCBoZXggPj4gOCAmIDB4RkYpIC8gMjU1LCAoaGV4ICYgMHhGRikvIDI1NV07XG59XG5cblxuXG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5QSVhJLl9kZWZhdWx0RnJhbWUgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEsMSk7XG5cbi8vIGFuIGluc3RhbmNlIG9mIHRoZSBnbCBjb250ZXh0Li5cbi8vIG9ubHkgb25lIGF0IHRoZSBtb21lbnQgOi9cblBJWEkuZ2w7XG5cbi8qKlxuICogdGhlIFdlYkdMUmVuZGVyZXIgaXMgZHJhd3MgdGhlIHN0YWdlIGFuZCBhbGwgaXRzIGNvbnRlbnQgb250byBhIHdlYkdMIGVuYWJsZWQgY2FudmFzLiBUaGlzIHJlbmRlcmVyXG4gKiBzaG91bGQgYmUgdXNlZCBmb3IgYnJvd3NlcnMgc3VwcG9ydCB3ZWJHTC4gVGhpcyBSZW5kZXIgd29ya3MgYnkgYXV0b21hdGljYWxseSBtYW5hZ2luZyB3ZWJHTEJhdGNocy5cbiAqIFNvIG5vIG5lZWQgZm9yIFNwcml0ZSBCYXRjaCdzIG9yIFNwcml0ZSBDbG91ZCdzXG4gKiBEb250IGZvcmdldCB0byBhZGQgdGhlIHZpZXcgdG8geW91ciBET00gb3IgeW91IHdpbGwgbm90IHNlZSBhbnl0aGluZyA6KVxuICpcbiAqIEBjbGFzcyBXZWJHTFJlbmRlcmVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB3aWR0aD0wIHtOdW1iZXJ9IHRoZSB3aWR0aCBvZiB0aGUgY2FudmFzIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQ9MCB7TnVtYmVyfSB0aGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgdmlld1xuICogQHBhcmFtIHZpZXcge0NhbnZhc30gdGhlIGNhbnZhcyB0byB1c2UgYXMgYSB2aWV3LCBvcHRpb25hbFxuICogQHBhcmFtIHRyYW5zcGFyZW50PWZhbHNlIHtCb29sZWFufSB0aGUgdHJhbnNwYXJlbmN5IG9mIHRoZSByZW5kZXIgdmlldywgZGVmYXVsdCBmYWxzZVxuICogQHBhcmFtIGFudGlhbGlhcz1mYWxzZSB7Qm9vbGVhbn0gc2V0cyBhbnRpYWxpYXMgKG9ubHkgYXBwbGljYWJsZSBpbiBjaHJvbWUgYXQgdGhlIG1vbWVudClcbiAqIFxuICovXG5QSVhJLldlYkdMUmVuZGVyZXIgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudCwgYW50aWFsaWFzKVxue1xuXHQvLyBkbyBhIGNhdGNoLi4gb25seSAxIHdlYkdMIHJlbmRlcmVyLi5cblxuXHR0aGlzLnRyYW5zcGFyZW50ID0gISF0cmFuc3BhcmVudDtcblxuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgODAwO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodCB8fCA2MDA7XG5cblx0dGhpcy52aWV3ID0gdmlldyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApOyBcbiAgICB0aGlzLnZpZXcud2lkdGggPSB0aGlzLndpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cblx0Ly8gZGVhbCB3aXRoIGxvc2luZyBjb250ZXh0Li5cdFxuICAgIHZhciBzY29wZSA9IHRoaXM7XG5cdHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgZnVuY3Rpb24oZXZlbnQpIHsgc2NvcGUuaGFuZGxlQ29udGV4dExvc3QoZXZlbnQpOyB9LCBmYWxzZSlcblx0dGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgZnVuY3Rpb24oZXZlbnQpIHsgc2NvcGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkKGV2ZW50KTsgfSwgZmFsc2UpXG5cblx0dGhpcy5iYXRjaHMgPSBbXTtcblxuXHR2YXIgb3B0aW9ucyA9IHtcblx0XHRhbHBoYTogdGhpcy50cmFuc3BhcmVudCxcblx0XHRhbnRpYWxpYXM6ISFhbnRpYWxpYXMsIC8vIFNQRUVEIFVQPz9cblx0XHRwcmVtdWx0aXBsaWVkQWxwaGE6ZmFsc2UsXG5cdFx0c3RlbmNpbDp0cnVlXG5cdH1cblxuXHQvL3RyeSAnZXhwZXJpbWVudGFsLXdlYmdsJ1xuXHR0cnkge1xuXHRcdFBJWEkuZ2wgPSB0aGlzLmdsID0gdGhpcy52aWV3LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIiwgIG9wdGlvbnMpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly90cnkgJ3dlYmdsJ1xuXHRcdHRyeSB7XG5cdFx0XHRQSVhJLmdsID0gdGhpcy5nbCA9IHRoaXMudmlldy5nZXRDb250ZXh0KFwid2ViZ2xcIiwgIG9wdGlvbnMpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIGZhaWwsIG5vdCBhYmxlIHRvIGdldCBhIGNvbnRleHRcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB3ZWJHTC4gVHJ5IHVzaW5nIHRoZSBjYW52YXMgcmVuZGVyZXJcIiArIHRoaXMpO1xuXHRcdH1cblx0fVxuXG4gICAgUElYSS5pbml0RGVmYXVsdFNoYWRlcnMoKTtcbiBcblxuXHRcblxuICAgLy8gUElYSS5hY3RpdmF0ZURlZmF1bHRTaGFkZXIoKTtcblxuICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgXG4gICAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG5cblxuICAgIFBJWEkuV2ViR0xSZW5kZXJlci5nbCA9IGdsO1xuXG4gICAgdGhpcy5iYXRjaCA9IG5ldyBQSVhJLldlYkdMQmF0Y2goZ2wpO1xuICAgXHRnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpO1xuICAgXHRnbC5kaXNhYmxlKGdsLkNVTExfRkFDRSk7XG5cbiAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgIGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0aGlzLnRyYW5zcGFyZW50KTsgXG5cbiAgICBQSVhJLnByb2plY3Rpb24gPSBuZXcgUElYSS5Qb2ludCg0MDAsIDMwMCk7XG4gICAgUElYSS5vZmZzZXQgPSBuZXcgUElYSS5Qb2ludCgwLCAwKTtcblxuICAgIC8vIFRPRE8gcmVtb3ZlIHRoZWFzZSBnbG9iYWxzLi5cblxuICAgIHRoaXMucmVzaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLmNvbnRleHRMb3N0ID0gZmFsc2U7XG5cblx0Ly9QSVhJLnB1c2hTaGFkZXIoUElYSS5kZWZhdWx0U2hhZGVyKTtcblxuICAgIHRoaXMuc3RhZ2VSZW5kZXJHcm91cCA9IG5ldyBQSVhJLldlYkdMUmVuZGVyR3JvdXAodGhpcy5nbCwgdGhpcy50cmFuc3BhcmVudCk7XG4gIC8vICB0aGlzLnN0YWdlUmVuZGVyR3JvdXAuID0gdGhpcy50cmFuc3BhcmVudFxufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuV2ViR0xSZW5kZXJlcjtcblxuLyoqXG4gKiBHZXRzIGEgbmV3IFdlYkdMQmF0Y2ggZnJvbSB0aGUgcG9vbFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZ2V0QmF0Y2hcbiAqIEByZXR1cm4ge1dlYkdMQmF0Y2h9XG4gKiBAcHJpdmF0ZSBcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLmdldEJhdGNoID0gZnVuY3Rpb24oKVxue1xuXHRpZihQSVhJLl9iYXRjaHMubGVuZ3RoID09IDApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xCYXRjaChQSVhJLldlYkdMUmVuZGVyZXIuZ2wpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHJldHVybiBQSVhJLl9iYXRjaHMucG9wKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBQdXRzIGEgYmF0Y2ggYmFjayBpbnRvIHRoZSBwb29sXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCByZXR1cm5CYXRjaFxuICogQHBhcmFtIGJhdGNoIHtXZWJHTEJhdGNofSBUaGUgYmF0Y2ggdG8gcmV0dXJuXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2ggPSBmdW5jdGlvbihiYXRjaClcbntcblx0YmF0Y2guY2xlYW4oKTtcdFxuXHRQSVhJLl9iYXRjaHMucHVzaChiYXRjaCk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIHdlYkdMIHZpZXdcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHN0YWdlIHtTdGFnZX0gdGhlIFN0YWdlIGVsZW1lbnQgdG8gYmUgcmVuZGVyZWRcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihzdGFnZSlcbntcblx0aWYodGhpcy5jb250ZXh0TG9zdClyZXR1cm47XG5cdFxuXHRcblx0Ly8gaWYgcmVuZGVyaW5nIGEgbmV3IHN0YWdlIGNsZWFyIHRoZSBiYXRjaHMuLlxuXHRpZih0aGlzLl9fc3RhZ2UgIT09IHN0YWdlKVxuXHR7XG5cdFx0Ly8gVE9ETyBtYWtlIHRoaXMgd29ya1xuXHRcdC8vIGRvbnQgdGhpbmsgdGhpcyBpcyBuZWVkZWQgYW55IG1vcmU/XG5cdFx0dGhpcy5fX3N0YWdlID0gc3RhZ2U7XG5cdFx0dGhpcy5zdGFnZVJlbmRlckdyb3VwLnNldFJlbmRlcmFibGUoc3RhZ2UpO1xuXHR9XG5cblx0Ly8gdXBkYXRlIGFueSB0ZXh0dXJlc1x0XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHRcdFxuXHQvLyB1cGRhdGUgdGhlIHNjZW5lIGdyYXBoXHRcblx0UElYSS52aXNpYmxlQ291bnQrKztcblx0c3RhZ2UudXBkYXRlVHJhbnNmb3JtKCk7XG5cdFxuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXHRcblx0Ly8gLS0gRG9lcyB0aGlzIG5lZWQgdG8gYmUgc2V0IGV2ZXJ5IGZyYW1lPyAtLSAvL1xuXHRnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdGhpcy50cmFuc3BhcmVudCk7IFxuXHRnbC52aWV3cG9ydCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHRcblx0XG4gICBcdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cdFx0XG5cdGdsLmNsZWFyQ29sb3Ioc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMF0sc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMV0sc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMl0sICF0aGlzLnRyYW5zcGFyZW50KTsgICAgIFxuXHRnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuXHQvLyBIQUNLIFRPIFRFU1Rcblx0XG5cdHRoaXMuc3RhZ2VSZW5kZXJHcm91cC5iYWNrZ3JvdW5kQ29sb3IgPSBzdGFnZS5iYWNrZ3JvdW5kQ29sb3JTcGxpdDtcblx0XG5cdFBJWEkucHJvamVjdGlvbi54ID0gIHRoaXMud2lkdGgvMjtcblx0UElYSS5wcm9qZWN0aW9uLnkgPSAgLXRoaXMuaGVpZ2h0LzI7XG5cdFxuXHR0aGlzLnN0YWdlUmVuZGVyR3JvdXAucmVuZGVyKFBJWEkucHJvamVjdGlvbik7XG5cdFxuXHQvLyBpbnRlcmFjdGlvblxuXHQvLyBydW4gaW50ZXJhY3Rpb24hXG5cdGlmKHN0YWdlLmludGVyYWN0aXZlKVxuXHR7XG5cdFx0Ly9uZWVkIHRvIGFkZCBzb21lIGV2ZW50cyFcblx0XHRpZighc3RhZ2UuX2ludGVyYWN0aXZlRXZlbnRzQWRkZWQpXG5cdFx0e1xuXHRcdFx0c3RhZ2UuX2ludGVyYWN0aXZlRXZlbnRzQWRkZWQgPSB0cnVlO1xuXHRcdFx0c3RhZ2UuaW50ZXJhY3Rpb25NYW5hZ2VyLnNldFRhcmdldCh0aGlzKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIGFmdGVyIHJlbmRlcmluZyBsZXRzIGNvbmZpcm0gYWxsIGZyYW1lcyB0aGF0IGhhdmUgYmVlbiB1b2RhdGVkLi5cblx0aWYoUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcy5sZW5ndGggPiAwKVxuXHR7XG5cdFx0Zm9yICh2YXIgaT0wOyBpIDwgUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcy5sZW5ndGg7IGkrKykgXG5cdFx0e1xuXHRcdCAgXHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzW2ldLnVwZGF0ZUZyYW1lID0gZmFsc2U7XG5cdFx0fTtcblx0XHRcblx0XHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzID0gW107XG5cdH1cbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSB0ZXh0dXJlcyBsb2FkZWQgaW50byB0aGlzIHdlYmdsIHJlbmRlcmVyXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCB1cGRhdGVUZXh0dXJlc1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnVwZGF0ZVRleHR1cmVzID0gZnVuY3Rpb24oKVxue1xuXHQvL1RPRE8gYnJlYWsgdGhpcyBvdXQgaW50byBhIHRleHR1cmUgbWFuYWdlci4uLlxuXHRmb3IgKHZhciBpPTA7IGkgPCBQSVhJLnRleHR1cmVzVG9VcGRhdGUubGVuZ3RoOyBpKyspIFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlKFBJWEkudGV4dHVyZXNUb1VwZGF0ZVtpXSk7XG5cdGZvciAodmFyIGk9MDsgaSA8IFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kubGVuZ3RoOyBpKyspIFBJWEkuV2ViR0xSZW5kZXJlci5kZXN0cm95VGV4dHVyZShQSVhJLnRleHR1cmVzVG9EZXN0cm95W2ldKTtcblx0UElYSS50ZXh0dXJlc1RvVXBkYXRlID0gW107XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgbG9hZGVkIHdlYmdsIHRleHR1cmVcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHR1cmVcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfSBUaGUgdGV4dHVyZSB0byB1cGRhdGVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly9UT0RPIGJyZWFrIHRoaXMgb3V0IGludG8gYSB0ZXh0dXJlIG1hbmFnZXIuLi5cblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdGlmKCF0ZXh0dXJlLl9nbFRleHR1cmUpXG5cdHtcblx0XHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cdH1cblxuXHRpZih0ZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdCBcdGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgdHJ1ZSk7XG5cblx0XHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHRleHR1cmUuc291cmNlKTtcblx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcblx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcblxuXHRcdC8vIHJlZ3VsZXIuLi5cblxuXHRcdGlmKCF0ZXh0dXJlLl9wb3dlck9mMilcblx0XHR7XG5cdFx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcblx0XHRcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuUkVQRUFUKTtcblx0XHRcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVCk7XG5cdFx0fVxuXG5cdFx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG5cdH1cbn1cblxuLyoqXG4gKiBEZXN0cm95cyBhIGxvYWRlZCB3ZWJnbCB0ZXh0dXJlXG4gKlxuICogQG1ldGhvZCBkZXN0cm95VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSB0ZXh0dXJlIHRvIHVwZGF0ZVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLmRlc3Ryb3lUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly9UT0RPIGJyZWFrIHRoaXMgb3V0IGludG8gYSB0ZXh0dXJlIG1hbmFnZXIuLi5cblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHRpZih0ZXh0dXJlLl9nbFRleHR1cmUpXG5cdHtcblx0XHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cdFx0Z2wuZGVsZXRlVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlLl9nbFRleHR1cmUpO1xuXHR9XG59XG5cbi8qKlxuICogcmVzaXplcyB0aGUgd2ViR0wgdmlldyB0byB0aGUgc3BlY2lmaWVkIHdpZHRoIGFuZCBoZWlnaHRcbiAqXG4gKiBAbWV0aG9kIHJlc2l6ZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IHRoZSBuZXcgd2lkdGggb2YgdGhlIHdlYkdMIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIHdlYkdMIHZpZXdcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHRoaXMudmlldy53aWR0aCA9IHdpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHRoaXMuZ2wudmlld3BvcnQoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1x0XG5cblx0Ly92YXIgcHJvamVjdGlvbk1hdHJpeCA9IHRoaXMucHJvamVjdGlvbk1hdHJpeDtcblxuXHRQSVhJLnByb2plY3Rpb24ueCA9ICB0aGlzLndpZHRoLzI7XG5cdFBJWEkucHJvamVjdGlvbi55ID0gIC10aGlzLmhlaWdodC8yO1xuXHRcblx0Ly9QSVhJLnNpemUueCA9ICB0aGlzLndpZHRoLzI7XG5cdC8vUElYSS5zaXplLnkgPSAgLXRoaXMuaGVpZ2h0LzI7XG5cbi8vXHRwcm9qZWN0aW9uTWF0cml4WzBdID0gMi90aGlzLndpZHRoO1xuLy9cdHByb2plY3Rpb25NYXRyaXhbNV0gPSAtMi90aGlzLmhlaWdodDtcbi8vXHRwcm9qZWN0aW9uTWF0cml4WzEyXSA9IC0xO1xuLy9cdHByb2plY3Rpb25NYXRyaXhbMTNdID0gMTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIGEgbG9zdCB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCBoYW5kbGVDb250ZXh0TG9zdFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlQ29udGV4dExvc3QgPSBmdW5jdGlvbihldmVudClcbntcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0dGhpcy5jb250ZXh0TG9zdCA9IHRydWU7XG59XG5cbi8qKlxuICogSGFuZGxlcyBhIHJlc3RvcmVkIHdlYmdsIGNvbnRleHRcbiAqXG4gKiBAbWV0aG9kIGhhbmRsZUNvbnRleHRSZXN0b3JlZFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMuZ2wgPSB0aGlzLnZpZXcuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLCAgeyAgXHRcblx0XHRhbHBoYTogdHJ1ZVxuICAgIH0pO1xuXG5cdHRoaXMuaW5pdFNoYWRlcnMoKTtcdFxuXG5cdGZvcih2YXIga2V5IGluIFBJWEkuVGV4dHVyZUNhY2hlKSBcblx0e1xuICAgICAgICBcdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVba2V5XS5iYXNlVGV4dHVyZTtcbiAgICAgICAgXHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBudWxsO1xuICAgICAgICBcdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlKHRleHR1cmUpO1xuXHR9O1xuXG5cdGZvciAodmFyIGk9MDsgaSA8ICB0aGlzLmJhdGNocy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHR0aGlzLmJhdGNoc1tpXS5yZXN0b3JlTG9zdENvbnRleHQodGhpcy5nbCkvL1xuXHRcdHRoaXMuYmF0Y2hzW2ldLmRpcnR5ID0gdHJ1ZTtcblx0fTtcblxuXHRQSVhJLl9yZXN0b3JlQmF0Y2hzKHRoaXMuZ2wpO1xuXG5cdHRoaXMuY29udGV4dExvc3QgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5QSVhJLl9iYXRjaHMgPSBbXTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLl9nZXRCYXRjaCA9IGZ1bmN0aW9uKGdsKVxue1xuXHRpZihQSVhJLl9iYXRjaHMubGVuZ3RoID09IDApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xCYXRjaChnbCk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0cmV0dXJuIFBJWEkuX2JhdGNocy5wb3AoKTtcblx0fVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuX3JldHVybkJhdGNoID0gZnVuY3Rpb24oYmF0Y2gpXG57XG5cdGJhdGNoLmNsZWFuKCk7XHRcblx0UElYSS5fYmF0Y2hzLnB1c2goYmF0Y2gpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuX3Jlc3RvcmVCYXRjaHMgPSBmdW5jdGlvbihnbClcbntcblx0Zm9yICh2YXIgaT0wOyBpIDwgUElYSS5fYmF0Y2hzLmxlbmd0aDsgaSsrKSBcblx0e1xuXHQgIFBJWEkuX2JhdGNoc1tpXS5yZXN0b3JlTG9zdENvbnRleHQoZ2wpO1xuXHR9O1xufVxuXG4vKipcbiAqIEEgV2ViR0xCYXRjaCBFbmFibGVzIGEgZ3JvdXAgb2Ygc3ByaXRlcyB0byBiZSBkcmF3biB1c2luZyB0aGUgc2FtZSBzZXR0aW5ncy5cbiAqIGlmIGEgZ3JvdXAgb2Ygc3ByaXRlcyBhbGwgaGF2ZSB0aGUgc2FtZSBiYXNlVGV4dHVyZSBhbmQgYmxlbmRNb2RlIHRoZW4gdGhleSBjYW4gYmUgZ3JvdXBlZCBpbnRvIGEgYmF0Y2guXG4gKiBBbGwgdGhlIHNwcml0ZXMgaW4gYSBiYXRjaCBjYW4gdGhlbiBiZSBkcmF3biBpbiBvbmUgZ28gYnkgdGhlIEdQVSB3aGljaCBpcyBodWdlbHkgZWZmaWNpZW50LiBBTEwgc3ByaXRlc1xuICogaW4gdGhlIHdlYkdMIHJlbmRlcmVyIGFyZSBhZGRlZCB0byBhIGJhdGNoIGV2ZW4gaWYgdGhlIGJhdGNoIG9ubHkgY29udGFpbnMgb25lIHNwcml0ZS4gQmF0Y2hpbmcgaXMgaGFuZGxlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgd2ViR0wgcmVuZGVyZXIuIEEgZ29vZCB0aXAgaXM6IHRoZSBzbWFsbGVyIHRoZSBudW1iZXIgb2YgYmF0Y2hzIHRoZXJlIGFyZSwgdGhlIGZhc3RlclxuICogdGhlIHdlYkdMIHJlbmRlcmVyIHdpbGwgcnVuLlxuICpcbiAqIEBjbGFzcyBXZWJHTEJhdGNoXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSBnbCB7V2ViR0xDb250ZXh0fSBhbiBpbnN0YW5jZSBvZiB0aGUgd2ViR0wgY29udGV4dFxuICovXG5QSVhJLldlYkdMQmF0Y2ggPSBmdW5jdGlvbihnbClcbntcblx0dGhpcy5nbCA9IGdsO1xuXHRcblx0dGhpcy5zaXplID0gMDtcblxuXHR0aGlzLnZlcnRleEJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5pbmRleEJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy51dkJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5jb2xvckJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5ibGVuZE1vZGUgPSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMO1xuXHR0aGlzLmR5bmFtaWNTaXplID0gMTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLldlYkdMQmF0Y2g7XG5cbi8qKlxuICogQ2xlYW5zIHRoZSBiYXRjaCBzbyB0aGF0IGlzIGNhbiBiZSByZXR1cm5lZCB0byBhbiBvYmplY3QgcG9vbCBhbmQgcmV1c2VkXG4gKlxuICogQG1ldGhvZCBjbGVhblxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24oKVxue1xuXHR0aGlzLnZlcnRpY2llcyA9IFtdO1xuXHR0aGlzLnV2cyA9IFtdO1xuXHR0aGlzLmluZGljZXMgPSBbXTtcblx0dGhpcy5jb2xvcnMgPSBbXTtcblx0dGhpcy5keW5hbWljU2l6ZSA9IDE7XG5cdHRoaXMudGV4dHVyZSA9IG51bGw7XG5cdHRoaXMubGFzdCA9IG51bGw7XG5cdHRoaXMuc2l6ZSA9IDA7XG5cdHRoaXMuaGVhZDtcblx0dGhpcy50YWlsO1xufVxuXG4vKipcbiAqIFJlY3JlYXRlcyB0aGUgYnVmZmVycyBpbiB0aGUgZXZlbnQgb2YgYSBjb250ZXh0IGxvc3NcbiAqXG4gKiBAbWV0aG9kIHJlc3RvcmVMb3N0Q29udGV4dFxuICogQHBhcmFtIGdsIHtXZWJHTENvbnRleHR9XG4gKi9cblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUucmVzdG9yZUxvc3RDb250ZXh0ID0gZnVuY3Rpb24oZ2wpXG57XG5cdHRoaXMuZ2wgPSBnbDtcblx0dGhpcy52ZXJ0ZXhCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMuaW5kZXhCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMudXZCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMuY29sb3JCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG59XG5cbi8qKlxuICogaW5pdHMgdGhlIGJhdGNoJ3MgdGV4dHVyZSBhbmQgYmxlbmQgbW9kZSBiYXNlZCBpZiB0aGUgc3VwcGxpZWQgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbml0XG4gKiBAcGFyYW0gc3ByaXRlIHtTcHJpdGV9IHRoZSBmaXJzdCBzcHJpdGUgdG8gYmUgYWRkZWQgdG8gdGhlIGJhdGNoLiBPbmx5IHNwcml0ZXMgd2l0aFxuICpcdFx0dGhlIHNhbWUgYmFzZSB0ZXh0dXJlIGFuZCBibGVuZCBtb2RlIHdpbGwgYmUgYWxsb3dlZCB0byBiZSBhZGRlZCB0byB0aGlzIGJhdGNoXG4gKi9cdFxuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oc3ByaXRlKVxue1xuXHRzcHJpdGUuYmF0Y2ggPSB0aGlzO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5ibGVuZE1vZGUgPSBzcHJpdGUuYmxlbmRNb2RlO1xuXHR0aGlzLnRleHR1cmUgPSBzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZTtcblx0dGhpcy5oZWFkID0gc3ByaXRlO1xuXHR0aGlzLnRhaWwgPSBzcHJpdGU7XG5cdHRoaXMuc2l6ZSA9IDE7XG5cblx0dGhpcy5ncm93QmF0Y2goKTtcbn1cblxuLyoqXG4gKiBpbnNlcnRzIGEgc3ByaXRlIGJlZm9yZSB0aGUgc3BlY2lmaWVkIHNwcml0ZVxuICpcbiAqIEBtZXRob2QgaW5zZXJ0QmVmb3JlXG4gKiBAcGFyYW0gc3ByaXRlIHtTcHJpdGV9IHRoZSBzcHJpdGUgdG8gYmUgYWRkZWRcbiAqIEBwYXJhbSBuZXh0U3ByaXRlIHtuZXh0U3ByaXRlfSB0aGUgZmlyc3Qgc3ByaXRlIHdpbGwgYmUgaW5zZXJ0ZWQgYmVmb3JlIHRoaXMgc3ByaXRlXG4gKi9cdFxuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUgPSBmdW5jdGlvbihzcHJpdGUsIG5leHRTcHJpdGUpXG57XG5cdHRoaXMuc2l6ZSsrO1xuXG5cdHNwcml0ZS5iYXRjaCA9IHRoaXM7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xuXHR2YXIgdGVtcFByZXYgPSBuZXh0U3ByaXRlLl9fcHJldjtcblx0bmV4dFNwcml0ZS5fX3ByZXYgPSBzcHJpdGU7XG5cdHNwcml0ZS5fX25leHQgPSBuZXh0U3ByaXRlO1xuXG5cdGlmKHRlbXBQcmV2KVxuXHR7XG5cdFx0c3ByaXRlLl9fcHJldiA9IHRlbXBQcmV2O1xuXHRcdHRlbXBQcmV2Ll9fbmV4dCA9IHNwcml0ZTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLmhlYWQgPSBzcHJpdGU7XG5cdH1cbn1cblxuLyoqXG4gKiBpbnNlcnRzIGEgc3ByaXRlIGFmdGVyIHRoZSBzcGVjaWZpZWQgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbnNlcnRBZnRlclxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRvIGJlIGFkZGVkXG4gKiBAcGFyYW0gIHByZXZpb3VzU3ByaXRlIHtTcHJpdGV9IHRoZSBmaXJzdCBzcHJpdGUgd2lsbCBiZSBpbnNlcnRlZCBhZnRlciB0aGlzIHNwcml0ZVxuICovXHRcblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbihzcHJpdGUsIHByZXZpb3VzU3ByaXRlKVxue1xuXHR0aGlzLnNpemUrKztcblxuXHRzcHJpdGUuYmF0Y2ggPSB0aGlzO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHR2YXIgdGVtcE5leHQgPSBwcmV2aW91c1Nwcml0ZS5fX25leHQ7XG5cdHByZXZpb3VzU3ByaXRlLl9fbmV4dCA9IHNwcml0ZTtcblx0c3ByaXRlLl9fcHJldiA9IHByZXZpb3VzU3ByaXRlO1xuXG5cdGlmKHRlbXBOZXh0KVxuXHR7XG5cdFx0c3ByaXRlLl9fbmV4dCA9IHRlbXBOZXh0O1xuXHRcdHRlbXBOZXh0Ll9fcHJldiA9IHNwcml0ZTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLnRhaWwgPSBzcHJpdGVcblx0fVxufVxuXG4vKipcbiAqIHJlbW92ZXMgYSBzcHJpdGUgZnJvbSB0aGUgYmF0Y2hcbiAqXG4gKiBAbWV0aG9kIHJlbW92ZVxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRvIGJlIHJlbW92ZWRcbiAqL1x0XG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dGhpcy5zaXplLS07XG5cblx0aWYodGhpcy5zaXplID09IDApXG5cdHtcblx0XHRzcHJpdGUuYmF0Y2ggPSBudWxsO1xuXHRcdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHRcdHNwcml0ZS5fX25leHQgPSBudWxsO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKHNwcml0ZS5fX3ByZXYpXG5cdHtcblx0XHRzcHJpdGUuX19wcmV2Ll9fbmV4dCA9IHNwcml0ZS5fX25leHQ7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5oZWFkID0gc3ByaXRlLl9fbmV4dDtcblx0XHR0aGlzLmhlYWQuX19wcmV2ID0gbnVsbDtcblx0fVxuXG5cdGlmKHNwcml0ZS5fX25leHQpXG5cdHtcblx0XHRzcHJpdGUuX19uZXh0Ll9fcHJldiA9IHNwcml0ZS5fX3ByZXY7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy50YWlsID0gc3ByaXRlLl9fcHJldjtcblx0XHR0aGlzLnRhaWwuX19uZXh0ID0gbnVsbFxuXHR9XG5cblx0c3ByaXRlLmJhdGNoID0gbnVsbDtcblx0c3ByaXRlLl9fbmV4dCA9IG51bGw7XG5cdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBTcGxpdHMgdGhlIGJhdGNoIGludG8gdHdvIHdpdGggdGhlIHNwZWNpZmllZCBzcHJpdGUgYmVpbmcgdGhlIHN0YXJ0IG9mIHRoZSBuZXcgYmF0Y2guXG4gKlxuICogQG1ldGhvZCBzcGxpdFxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRoYXQgaW5kaWNhdGVzIHdoZXJlIHRoZSBiYXRjaCBzaG91bGQgYmUgc3BsaXRcbiAqIEByZXR1cm4ge1dlYkdMQmF0Y2h9IHRoZSBuZXcgYmF0Y2hcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cblx0dmFyIGJhdGNoID0gbmV3IFBJWEkuV2ViR0xCYXRjaCh0aGlzLmdsKTtcblx0YmF0Y2guaW5pdChzcHJpdGUpO1xuXHRiYXRjaC50ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuXHRiYXRjaC50YWlsID0gdGhpcy50YWlsO1xuXG5cdHRoaXMudGFpbCA9IHNwcml0ZS5fX3ByZXY7XG5cdHRoaXMudGFpbC5fX25leHQgPSBudWxsO1xuXG5cdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHQvLyByZXR1cm4gYSBzcGxpdGUgYmF0Y2ghXG5cblx0Ly8gVE9ETyB0aGlzIHNpemUgaXMgd3JvbmchXG5cdC8vIG5lZWQgdG8gcmVjYWxjdWxhdGUgOi8gcHJvYmxlbSB3aXRoIGEgbGlua2VkIGxpc3QhXG5cdC8vIHVubGVzcyBpdCBnZXRzIGNhbGN1bGF0ZWQgaW4gdGhlIFwiY2xlYW5cIj9cblxuXHQvLyBuZWVkIHRvIGxvb3AgdGhyb3VnaCBpdGVtcyBhcyB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB0aGUgbGVuZ3RoIG9uIGEgbGlua2VkIGxpc3QgOi9cblx0dmFyIHRlbXBTaXplID0gMDtcblx0d2hpbGUoc3ByaXRlKVxuXHR7XG5cdFx0dGVtcFNpemUrKztcblx0XHRzcHJpdGUuYmF0Y2ggPSBiYXRjaDtcblx0XHRzcHJpdGUgPSBzcHJpdGUuX19uZXh0O1xuXHR9XG5cblx0YmF0Y2guc2l6ZSA9IHRlbXBTaXplO1xuXHR0aGlzLnNpemUgLT0gdGVtcFNpemU7XG5cblx0cmV0dXJuIGJhdGNoO1xufVxuXG4vKipcbiAqIE1lcmdlcyB0d28gYmF0Y2hzIHRvZ2V0aGVyXG4gKlxuICogQG1ldGhvZCBtZXJnZVxuICogQHBhcmFtIGJhdGNoIHtXZWJHTEJhdGNofSB0aGUgYmF0Y2ggdGhhdCB3aWxsIGJlIG1lcmdlZCBcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKGJhdGNoKVxue1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHR0aGlzLnRhaWwuX19uZXh0ID0gYmF0Y2guaGVhZDtcblx0YmF0Y2guaGVhZC5fX3ByZXYgPSB0aGlzLnRhaWw7XG5cblx0dGhpcy5zaXplICs9IGJhdGNoLnNpemU7XG5cblx0dGhpcy50YWlsID0gYmF0Y2gudGFpbDtcblxuXHR2YXIgc3ByaXRlID0gYmF0Y2guaGVhZDtcblx0d2hpbGUoc3ByaXRlKVxuXHR7XG5cdFx0c3ByaXRlLmJhdGNoID0gdGhpcztcblx0XHRzcHJpdGUgPSBzcHJpdGUuX19uZXh0O1xuXHR9XG59XG5cbi8qKlxuICogR3Jvd3MgdGhlIHNpemUgb2YgdGhlIGJhdGNoLiBBcyB0aGUgZWxlbWVudHMgaW4gdGhlIGJhdGNoIGNhbm5vdCBoYXZlIGEgZHluYW1pYyBzaXplIHRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWQgdG8gaW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIGJhdGNoLiBJdCBhbHNvIGNyZWF0ZXMgYSBsaXR0bGUgZXh0cmEgcm9vbSBzb1xuICogdGhhdCB0aGUgYmF0Y2ggZG9lcyBub3QgbmVlZCB0byBiZSByZXNpemVkIGV2ZXJ5IHRpbWUgYSBzcHJpdGUgaXMgYWRkZWRcbiAqXG4gKiBAbWV0aG9kIGdyb3dCYXRjaFxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLmdyb3dCYXRjaCA9IGZ1bmN0aW9uKClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0aWYoIHRoaXMuc2l6ZSA9PSAxKVxuXHR7XG5cdFx0dGhpcy5keW5hbWljU2l6ZSA9IDE7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5keW5hbWljU2l6ZSA9IHRoaXMuc2l6ZSAqIDEuNVxuXHR9XG5cdC8vIGdyb3cgdmVydHNcblx0dGhpcy52ZXJ0aWNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZHluYW1pY1NpemUgKiA4KTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUix0aGlzLnZlcnRpY2llcyAsIGdsLkRZTkFNSUNfRFJBVyk7XG5cblx0dGhpcy51dnMgID0gbmV3IEZsb2F0MzJBcnJheSggdGhpcy5keW5hbWljU2l6ZSAqIDggKTtcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudXZCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy51dnMgLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cdHRoaXMuZGlydHlVVlMgPSB0cnVlO1xuXG5cdHRoaXMuY29sb3JzICA9IG5ldyBGbG9hdDMyQXJyYXkoIHRoaXMuZHluYW1pY1NpemUgKiA0ICk7XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmNvbG9yQnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMuY29sb3JzICwgZ2wuRFlOQU1JQ19EUkFXKTtcblxuXHR0aGlzLmRpcnR5Q29sb3JzID0gdHJ1ZTtcblxuXHR0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkodGhpcy5keW5hbWljU2l6ZSAqIDYpOyBcblx0dmFyIGxlbmd0aCA9IHRoaXMuaW5kaWNlcy5sZW5ndGgvNjtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCBsZW5ndGg7IGkrKykgXG5cdHtcblx0ICAgIHZhciBpbmRleDIgPSBpICogNjtcblx0ICAgIHZhciBpbmRleDMgPSBpICogNDtcblx0XHR0aGlzLmluZGljZXNbaW5kZXgyICsgMF0gPSBpbmRleDMgKyAwO1xuXHRcdHRoaXMuaW5kaWNlc1tpbmRleDIgKyAxXSA9IGluZGV4MyArIDE7XG5cdFx0dGhpcy5pbmRpY2VzW2luZGV4MiArIDJdID0gaW5kZXgzICsgMjtcblx0XHR0aGlzLmluZGljZXNbaW5kZXgyICsgM10gPSBpbmRleDMgKyAwO1xuXHRcdHRoaXMuaW5kaWNlc1tpbmRleDIgKyA0XSA9IGluZGV4MyArIDI7XG5cdFx0dGhpcy5pbmRpY2VzW2luZGV4MiArIDVdID0gaW5kZXgzICsgMztcblx0fTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuLyoqXG4gKiBSZWZyZXNoJ3MgYWxsIHRoZSBkYXRhIGluIHRoZSBiYXRjaCBhbmQgc3luYydzIGl0IHdpdGggdGhlIHdlYkdMIGJ1ZmZlcnNcbiAqXG4gKiBAbWV0aG9kIHJlZnJlc2hcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdGlmICh0aGlzLmR5bmFtaWNTaXplIDwgdGhpcy5zaXplKVxuXHR7XG5cdFx0dGhpcy5ncm93QmF0Y2goKTtcblx0fVxuXG5cdHZhciBpbmRleFJ1biA9IDA7XG5cdHZhciB3b3JsZFRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCwgYVgsIGFZLCB3MCwgdzEsIGgwLCBoMSwgaW5kZXg7XG5cdHZhciBhLCBiLCBjLCBkLCB0eCwgdHk7XG5cblx0dmFyIGRpc3BsYXlPYmplY3QgPSB0aGlzLmhlYWQ7XG5cblx0d2hpbGUoZGlzcGxheU9iamVjdClcblx0e1xuXHRcdGluZGV4ID0gaW5kZXhSdW4gKiA4O1xuXG5cdFx0dmFyIHRleHR1cmUgPSBkaXNwbGF5T2JqZWN0LnRleHR1cmU7XG5cblx0XHR2YXIgZnJhbWUgPSB0ZXh0dXJlLmZyYW1lO1xuXHRcdHZhciB0dyA9IHRleHR1cmUuYmFzZVRleHR1cmUud2lkdGg7XG5cdFx0dmFyIHRoID0gdGV4dHVyZS5iYXNlVGV4dHVyZS5oZWlnaHQ7XG5cblx0XHR0aGlzLnV2c1tpbmRleCArIDBdID0gZnJhbWUueCAvIHR3O1xuXHRcdHRoaXMudXZzW2luZGV4ICsxXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdHRoaXMudXZzW2luZGV4ICsyXSA9IChmcmFtZS54ICsgZnJhbWUud2lkdGgpIC8gdHc7XG5cdFx0dGhpcy51dnNbaW5kZXggKzNdID0gZnJhbWUueSAvIHRoO1xuXG5cdFx0dGhpcy51dnNbaW5kZXggKzRdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHR0aGlzLnV2c1tpbmRleCArNV0gPSAoZnJhbWUueSArIGZyYW1lLmhlaWdodCkgLyB0aDsgXG5cblx0XHR0aGlzLnV2c1tpbmRleCArNl0gPSBmcmFtZS54IC8gdHc7XG5cdFx0dGhpcy51dnNbaW5kZXggKzddID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cblx0XHRkaXNwbGF5T2JqZWN0LnVwZGF0ZUZyYW1lID0gZmFsc2U7XG5cblx0XHRjb2xvckluZGV4ID0gaW5kZXhSdW4gKiA0O1xuXHRcdHRoaXMuY29sb3JzW2NvbG9ySW5kZXhdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDFdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDJdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDNdID0gZGlzcGxheU9iamVjdC53b3JsZEFscGhhO1xuXG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX19uZXh0O1xuXG5cdFx0aW5kZXhSdW4gKys7XG5cdH1cblxuXHR0aGlzLmRpcnR5VVZTID0gdHJ1ZTtcblx0dGhpcy5kaXJ0eUNvbG9ycyA9IHRydWU7XG59XG5cbi8qKlxuICogVXBkYXRlcyBhbGwgdGhlIHJlbGV2YW50IGdlb21ldHJ5IGFuZCB1cGxvYWRzIHRoZSBkYXRhIHRvIHRoZSBHUFVcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0dmFyIHdvcmxkVHJhbnNmb3JtLCB3aWR0aCwgaGVpZ2h0LCBhWCwgYVksIHcwLCB3MSwgaDAsIGgxLCBpbmRleCwgaW5kZXgyLCBpbmRleDNcblxuXHR2YXIgYSwgYiwgYywgZCwgdHgsIHR5O1xuXG5cdHZhciBpbmRleFJ1biA9IDA7XG5cblx0dmFyIGRpc3BsYXlPYmplY3QgPSB0aGlzLmhlYWQ7XG5cdHZhciB2ZXJ0aWNpZXMgPSB0aGlzLnZlcnRpY2llcztcblx0dmFyIHV2cyA9IHRoaXMudXZzO1xuXHR2YXIgY29sb3JzID0gdGhpcy5jb2xvcnM7XG5cdFxuXHR3aGlsZShkaXNwbGF5T2JqZWN0KVxuXHR7XG5cdFx0aWYoZGlzcGxheU9iamVjdC52Y291bnQgPT09IFBJWEkudmlzaWJsZUNvdW50KVxuXHRcdHtcblx0XHRcdHdpZHRoID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lLndpZHRoO1xuXHRcdFx0aGVpZ2h0ID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lLmhlaWdodDtcblxuXHRcdFx0Ly8gVE9ETyB0cmltPz9cblx0XHRcdGFYID0gZGlzcGxheU9iamVjdC5hbmNob3IueDsvLyAtIGRpc3BsYXlPYmplY3QudGV4dHVyZS50cmltLnhcblx0XHRcdGFZID0gZGlzcGxheU9iamVjdC5hbmNob3IueTsgLy8tIGRpc3BsYXlPYmplY3QudGV4dHVyZS50cmltLnlcblx0XHRcdHcwID0gd2lkdGggKiAoMS1hWCk7XG5cdFx0XHR3MSA9IHdpZHRoICogLWFYO1xuXG5cdFx0XHRoMCA9IGhlaWdodCAqICgxLWFZKTtcblx0XHRcdGgxID0gaGVpZ2h0ICogLWFZO1xuXG5cdFx0XHRpbmRleCA9IGluZGV4UnVuICogODtcblxuXHRcdFx0d29ybGRUcmFuc2Zvcm0gPSBkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtO1xuXG5cdFx0XHRhID0gd29ybGRUcmFuc2Zvcm1bMF07XG5cdFx0XHRiID0gd29ybGRUcmFuc2Zvcm1bM107XG5cdFx0XHRjID0gd29ybGRUcmFuc2Zvcm1bMV07XG5cdFx0XHRkID0gd29ybGRUcmFuc2Zvcm1bNF07XG5cdFx0XHR0eCA9IHdvcmxkVHJhbnNmb3JtWzJdO1xuXHRcdFx0dHkgPSB3b3JsZFRyYW5zZm9ybVs1XTtcblxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgMCBdID0gYSAqIHcxICsgYyAqIGgxICsgdHg7IFxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgMSBdID0gZCAqIGgxICsgYiAqIHcxICsgdHk7XG5cblx0XHRcdHZlcnRpY2llc1tpbmRleCArIDIgXSA9IGEgKiB3MCArIGMgKiBoMSArIHR4OyBcblx0XHRcdHZlcnRpY2llc1tpbmRleCArIDMgXSA9IGQgKiBoMSArIGIgKiB3MCArIHR5OyBcblxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgNCBdID0gYSAqIHcwICsgYyAqIGgwICsgdHg7IFxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgNSBdID0gZCAqIGgwICsgYiAqIHcwICsgdHk7IFxuXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyA2XSA9ICBhICogdzEgKyBjICogaDAgKyB0eDsgXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyA3XSA9ICBkICogaDAgKyBiICogdzEgKyB0eTsgXG5cblx0XHRcdGlmKGRpc3BsYXlPYmplY3QudXBkYXRlRnJhbWUgfHwgZGlzcGxheU9iamVjdC50ZXh0dXJlLnVwZGF0ZUZyYW1lKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLmRpcnR5VVZTID0gdHJ1ZTtcblxuXHRcdFx0XHR2YXIgdGV4dHVyZSA9IGRpc3BsYXlPYmplY3QudGV4dHVyZTtcblxuXHRcdFx0XHR2YXIgZnJhbWUgPSB0ZXh0dXJlLmZyYW1lO1xuXHRcdFx0XHR2YXIgdHcgPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLndpZHRoO1xuXHRcdFx0XHR2YXIgdGggPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKyAwXSA9IGZyYW1lLnggLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICsxXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKzJdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICszXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKzRdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICs1XSA9IChmcmFtZS55ICsgZnJhbWUuaGVpZ2h0KSAvIHRoOyBcblxuXHRcdFx0XHR1dnNbaW5kZXggKzZdID0gZnJhbWUueCAvIHR3O1xuXHRcdFx0XHR1dnNbaW5kZXggKzddID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cblx0XHRcdFx0ZGlzcGxheU9iamVjdC51cGRhdGVGcmFtZSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUT0RPIHRoaXMgcHJvYmFibHkgY291bGQgZG8gd2l0aCBzb21lIG9wdGltaXNhdGlvbi4uLi5cblx0XHRcdGlmKGRpc3BsYXlPYmplY3QuY2FjaGVBbHBoYSAhPSBkaXNwbGF5T2JqZWN0LndvcmxkQWxwaGEpXG5cdFx0XHR7XG5cdFx0XHRcdGRpc3BsYXlPYmplY3QuY2FjaGVBbHBoYSA9IGRpc3BsYXlPYmplY3Qud29ybGRBbHBoYTtcblxuXHRcdFx0XHR2YXIgY29sb3JJbmRleCA9IGluZGV4UnVuICogNDtcblx0XHRcdFx0Y29sb3JzW2NvbG9ySW5kZXhdID0gY29sb3JzW2NvbG9ySW5kZXggKyAxXSA9IGNvbG9yc1tjb2xvckluZGV4ICsgMl0gPSBjb2xvcnNbY29sb3JJbmRleCArIDNdID0gZGlzcGxheU9iamVjdC53b3JsZEFscGhhO1xuXHRcdFx0XHR0aGlzLmRpcnR5Q29sb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGluZGV4ID0gaW5kZXhSdW4gKiA4O1xuXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyAwIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAxIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAyIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAzIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA0IF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA1IF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA2XSA9IFx0dmVydGljaWVzW2luZGV4ICsgN10gPSAwO1xuXHRcdH1cblxuXHRcdGluZGV4UnVuKys7XG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX19uZXh0O1xuICAgfVxufVxuXG4vKipcbiAqIERyYXdzIHRoZSBiYXRjaCB0byB0aGUgZnJhbWUgYnVmZmVyXG4gKlxuICogQG1ldGhvZCByZW5kZXJcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihzdGFydCwgZW5kKVxue1xuXHRzdGFydCA9IHN0YXJ0IHx8IDA7XG5cblx0aWYoZW5kID09IHVuZGVmaW5lZCllbmQgPSB0aGlzLnNpemU7XG5cdFxuXHRpZih0aGlzLmRpcnR5KVxuXHR7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0aWYgKHRoaXMuc2l6ZSA9PSAwKXJldHVybjtcblxuXHR0aGlzLnVwZGF0ZSgpO1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdC8vVE9ETyBvcHRpbWl6ZSB0aGlzIVxuXG5cdHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5kZWZhdWx0U2hhZGVyO1xuXHRcblx0Ly9nbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xuXG5cdC8vIHVwZGF0ZSB0aGUgdmVydHMuLlxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHQvLyBvay4uXG5cdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRpY2llcylcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0uYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHQvLyB1cGRhdGUgdGhlIHV2c1xuXHQvL3ZhciBpc0RlZmF1bHQgPSAoc2hhZGVyUHJvZ3JhbSA9PSBQSVhJLnNoYWRlclByb2dyYW0pXG5cbiAgIFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudXZCdWZmZXIpO1xuXG4gICAgaWYodGhpcy5kaXJ0eVVWUylcbiAgICB7XG4gICAgXHR0aGlzLmRpcnR5VVZTID0gZmFsc2U7XG4gICAgXHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgIDAsIHRoaXMudXZzKTtcbiAgICB9XG5cbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0uYVRleHR1cmVDb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5fZ2xUZXh0dXJlKTtcblxuXHQvLyB1cGRhdGUgY29sb3IhXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmNvbG9yQnVmZmVyKTtcblxuXHRpZih0aGlzLmRpcnR5Q29sb3JzKVxuICAgIHtcbiAgICBcdHRoaXMuZGlydHlDb2xvcnMgPSBmYWxzZTtcbiAgICBcdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLmNvbG9ycyk7XG5cdH1cblxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS5jb2xvckF0dHJpYnV0ZSwgMSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0Ly8gZG9udCBuZWVkIHRvIHVwbG9hZCFcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcblxuXHR2YXIgbGVuID0gZW5kIC0gc3RhcnQ7XG5cbiAgICAvLyBEUkFXIFRIQVQgdGhpcyFcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBsZW4gKiA2LCBnbC5VTlNJR05FRF9TSE9SVCwgc3RhcnQgKiAyICogNiApO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBXZWJHTEJhdGNoIEVuYWJsZXMgYSBncm91cCBvZiBzcHJpdGVzIHRvIGJlIGRyYXduIHVzaW5nIHRoZSBzYW1lIHNldHRpbmdzLlxuICogaWYgYSBncm91cCBvZiBzcHJpdGVzIGFsbCBoYXZlIHRoZSBzYW1lIGJhc2VUZXh0dXJlIGFuZCBibGVuZE1vZGUgdGhlbiB0aGV5IGNhbiBiZVxuICogZ3JvdXBlZCBpbnRvIGEgYmF0Y2guIEFsbCB0aGUgc3ByaXRlcyBpbiBhIGJhdGNoIGNhbiB0aGVuIGJlIGRyYXduIGluIG9uZSBnbyBieSB0aGVcbiAqIEdQVSB3aGljaCBpcyBodWdlbHkgZWZmaWNpZW50LiBBTEwgc3ByaXRlcyBpbiB0aGUgd2ViR0wgcmVuZGVyZXIgYXJlIGFkZGVkIHRvIGEgYmF0Y2hcbiAqIGV2ZW4gaWYgdGhlIGJhdGNoIG9ubHkgY29udGFpbnMgb25lIHNwcml0ZS4gQmF0Y2hpbmcgaXMgaGFuZGxlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZVxuICogd2ViR0wgcmVuZGVyZXIuIEEgZ29vZCB0aXAgaXM6IHRoZSBzbWFsbGVyIHRoZSBudW1iZXIgb2YgYmF0Y2hzIHRoZXJlIGFyZSwgdGhlIGZhc3RlclxuICogdGhlIHdlYkdMIHJlbmRlcmVyIHdpbGwgcnVuLlxuICpcbiAqIEBjbGFzcyBXZWJHTEJhdGNoXG4gKiBAY29udHJ1Y3RvclxuICogQHBhcmFtIGdsIHtXZWJHTENvbnRleHR9IEFuIGluc3RhbmNlIG9mIHRoZSB3ZWJHTCBjb250ZXh0XG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cCA9IGZ1bmN0aW9uKGdsLCB0cmFuc3BhcmVudClcbntcblx0dGhpcy5nbCA9IGdsO1xuXHR0aGlzLnJvb3Q7XG5cdFxuXHR0aGlzLmJhY2tncm91bmRDb2xvcjtcblx0dGhpcy50cmFuc3BhcmVudCA9IHRyYW5zcGFyZW50ID09IHVuZGVmaW5lZCA/IHRydWUgOiB0cmFuc3BhcmVudDtcblx0XG5cdHRoaXMuYmF0Y2hzID0gW107XG5cdHRoaXMudG9SZW1vdmUgPSBbXTtcblx0Y29uc29sZS5sb2codGhpcy50cmFuc3BhcmVudClcblx0dGhpcy5maWx0ZXJNYW5hZ2VyID0gbmV3IFBJWEkuV2ViR0xGaWx0ZXJNYW5hZ2VyKHRoaXMudHJhbnNwYXJlbnQpO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuV2ViR0xSZW5kZXJHcm91cDtcblxuLyoqXG4gKiBBZGQgYSBkaXNwbGF5IG9iamVjdCB0byB0aGUgd2ViZ2wgcmVuZGVyZXJcbiAqXG4gKiBAbWV0aG9kIHNldFJlbmRlcmFibGVcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGUgXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuc2V0UmVuZGVyYWJsZSA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIGhhcyB0aGlzIGNoYW5nZWQ/P1xuXHRpZih0aGlzLnJvb3QpdGhpcy5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4odGhpcy5yb290KTtcblx0XG5cdGRpc3BsYXlPYmplY3Qud29ybGRWaXNpYmxlID0gZGlzcGxheU9iamVjdC52aXNpYmxlO1xuXHRcblx0Ly8gc29vb29vbyAvL1xuXHQvLyB0byBjaGVjayBpZiBhbnkgYmF0Y2hzIGV4aXN0IGFscmVhZHk/P1xuXHRcblx0Ly8gVE9ETyB3aGF0IGlmIGl0cyBhbHJlYWR5IGhhcyBhbiBvYmplY3Q/IHNob3VsZCByZW1vdmUgaXRcblx0dGhpcy5yb290ID0gZGlzcGxheU9iamVjdDtcblx0dGhpcy5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oZGlzcGxheU9iamVjdCk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIHdlYmdsIHZpZXdcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHByb2plY3Rpb24ge09iamVjdH1cbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHRcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0Z2wudW5pZm9ybTJmKFBJWEkuZGVmYXVsdFNoYWRlci5wcm9qZWN0aW9uVmVjdG9yLCBwcm9qZWN0aW9uLngsIHByb2plY3Rpb24ueSk7XG5cblx0dGhpcy5maWx0ZXJNYW5hZ2VyLmJlZ2luKHByb2plY3Rpb24sIGJ1ZmZlcik7XG5cblx0XG5cdGdsLmJsZW5kRnVuYyhnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuXHQvLyB3aWxsIHJlbmRlciBhbGwgdGhlIGVsZW1lbnRzIGluIHRoZSBncm91cFxuXHR2YXIgcmVuZGVyYWJsZTtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCB0aGlzLmJhdGNocy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHRcblx0XHRyZW5kZXJhYmxlID0gdGhpcy5iYXRjaHNbaV07XG5cdFx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNoc1tpXS5yZW5kZXIoKTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRcblx0XHQvLyByZW5kZXIgc3BlY2lhbFxuXHRcdHRoaXMucmVuZGVyU3BlY2lhbChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3BlY2lmaWMgZGlzcGxheU9iamVjdFxuICpcbiAqIEBtZXRob2QgcmVuZGVyU3BlY2lmaWNcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIHByb2plY3Rpb24ge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUucmVuZGVyU3BlY2lmaWMgPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0LCBwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdGdsLnVuaWZvcm0yZihQSVhJLmRlZmF1bHRTaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCBwcm9qZWN0aW9uLnkpO1xuXG5cdHRoaXMuZmlsdGVyTWFuYWdlci5iZWdpbihwcm9qZWN0aW9uLCBidWZmZXIpO1xuXG5cdC8vIHRvIGRvIVxuXHQvLyByZW5kZXIgcGFydCBvZiB0aGUgc2NlbmUuLi5cblx0XG5cdHZhciBzdGFydEluZGV4O1xuXHR2YXIgc3RhcnRCYXRjaEluZGV4O1xuXHRcblx0dmFyIGVuZEluZGV4O1xuXHR2YXIgZW5kQmF0Y2hJbmRleDtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgTkVYVCBTUFJJVEVcblx0ICogIFRoaXMgcGFydCBsb29rcyBmb3IgdGhlIGNsb3Nlc3QgbmV4dCBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBpdCBrZWVwcyBsb29raW5nIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIGdldHMgdG8gdGhlIGVuZCBvZiB0aGUgZGlzcGxheVxuXHQgKiAgc2NlbmUgZ3JhcGhcblx0ICovXG5cdHZhciBuZXh0UmVuZGVyYWJsZSA9IGRpc3BsYXlPYmplY3QuZmlyc3Q7XG5cdHdoaWxlKG5leHRSZW5kZXJhYmxlLl9pTmV4dClcblx0e1xuXHRcdGlmKG5leHRSZW5kZXJhYmxlLnJlbmRlcmFibGUgJiYgbmV4dFJlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0XHRuZXh0UmVuZGVyYWJsZSA9IG5leHRSZW5kZXJhYmxlLl9pTmV4dDtcblx0fVxuXHR2YXIgc3RhcnRCYXRjaCA9IG5leHRSZW5kZXJhYmxlLmJhdGNoO1xuXHQvL2NvbnNvbGUubG9nKG5leHRSZW5kZXJhYmxlKTtcblx0XG5cdC8vY29uc29sZS5sb2cocmVuZGVyYWJsZSlcblx0aWYobmV4dFJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdHN0YXJ0QmF0Y2ggPSBuZXh0UmVuZGVyYWJsZS5iYXRjaDtcblx0XHRcblx0XHR2YXIgaGVhZCA9IHN0YXJ0QmF0Y2guaGVhZDtcblx0XHR2YXIgbmV4dCA9IGhlYWQ7XG5cdFx0XG5cdFx0Ly8gb2sgbm93IHdlIGhhdmUgdGhlIGJhdGNoLi4gbmVlZCB0byBmaW5kIHRoZSBzdGFydCBpbmRleCFcblx0XHRpZihoZWFkID09IG5leHRSZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdHN0YXJ0SW5kZXggPSAwO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0c3RhcnRJbmRleCA9IDE7XG5cdFx0XHRcblx0XHRcdHdoaWxlKGhlYWQuX19uZXh0ICE9IG5leHRSZW5kZXJhYmxlKVxuXHRcdFx0e1xuXHRcdFx0XHRzdGFydEluZGV4Kys7XG5cdFx0XHRcdGhlYWQgPSBoZWFkLl9fbmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0c3RhcnRCYXRjaCA9IG5leHRSZW5kZXJhYmxlO1xuXHR9XG5cdFxuXHQvLyBHZXQgdGhlIExBU1QgcmVuZGVyYWJsZSBvYmplY3Rcblx0dmFyIGxhc3RSZW5kZXJhYmxlID0gZGlzcGxheU9iamVjdC5sYXN0O1xuXHR3aGlsZShsYXN0UmVuZGVyYWJsZS5faVByZXYpXG5cdHtcblx0XHRpZihsYXN0UmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIGxhc3RSZW5kZXJhYmxlLl9fcmVuZGVyR3JvdXApYnJlYWs7XG5cdFx0bGFzdFJlbmRlcmFibGUgPSBsYXN0UmVuZGVyYWJsZS5faU5leHQ7XG5cdH1cblx0XG5cdGlmKGxhc3RSZW5kZXJhYmxlIGluc3RhbmNlb2YgUElYSS5TcHJpdGUpXG5cdHtcblx0XHRlbmRCYXRjaCA9IGxhc3RSZW5kZXJhYmxlLmJhdGNoO1xuXHRcdFxuXHRcdHZhciBoZWFkID0gZW5kQmF0Y2guaGVhZDtcblx0XHRcblx0XHRpZihoZWFkID09IGxhc3RSZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdGVuZEluZGV4ID0gMDtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGVuZEluZGV4ID0gMTtcblx0XHRcdFxuXHRcdFx0d2hpbGUoaGVhZC5fX25leHQgIT0gbGFzdFJlbmRlcmFibGUpXG5cdFx0XHR7XG5cdFx0XHRcdGVuZEluZGV4Kys7XG5cdFx0XHRcdGhlYWQgPSBoZWFkLl9fbmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0ZW5kQmF0Y2ggPSBsYXN0UmVuZGVyYWJsZTtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyhlbmRCYXRjaCk7XG5cdC8vIFRPRE8gLSBuZWVkIHRvIGZvbGQgdGhpcyB1cCBhIGJpdCFcblx0XG5cdGlmKHN0YXJ0QmF0Y2ggPT0gZW5kQmF0Y2gpXG5cdHtcblx0XHRpZihzdGFydEJhdGNoIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVxuXHRcdHtcblx0XHRcdHN0YXJ0QmF0Y2gucmVuZGVyKHN0YXJ0SW5kZXgsIGVuZEluZGV4KzEpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5yZW5kZXJTcGVjaWFsKHN0YXJ0QmF0Y2gsIHByb2plY3Rpb24pO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblx0XG5cdC8vIG5vdyB3ZSBoYXZlIGZpcnN0IGFuZCBsYXN0IVxuXHRzdGFydEJhdGNoSW5kZXggPSB0aGlzLmJhdGNocy5pbmRleE9mKHN0YXJ0QmF0Y2gpO1xuXHRlbmRCYXRjaEluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZihlbmRCYXRjaCk7XG5cdFxuXHQvLyBETyB0aGUgZmlyc3QgYmF0Y2hcblx0aWYoc3RhcnRCYXRjaCBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0e1xuXHRcdHN0YXJ0QmF0Y2gucmVuZGVyKHN0YXJ0SW5kZXgpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMucmVuZGVyU3BlY2lhbChzdGFydEJhdGNoLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRcblx0Ly8gRE8gdGhlIG1pZGRsZSBiYXRjaHMuLlxuXHRmb3IgKHZhciBpPXN0YXJ0QmF0Y2hJbmRleCsxOyBpIDwgZW5kQmF0Y2hJbmRleDsgaSsrKSBcblx0e1xuXHRcdHJlbmRlcmFibGUgPSB0aGlzLmJhdGNoc1tpXTtcblx0XG5cdFx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNoc1tpXS5yZW5kZXIoKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoaXMucmVuZGVyU3BlY2lhbChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIERPIHRoZSBsYXN0IGJhdGNoLi5cblx0aWYoZW5kQmF0Y2ggaW5zdGFuY2VvZiBQSVhJLldlYkdMQmF0Y2gpXG5cdHtcblx0XHRlbmRCYXRjaC5yZW5kZXIoMCwgZW5kSW5kZXgrMSk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5yZW5kZXJTcGVjaWFsKGVuZEJhdGNoLCBwcm9qZWN0aW9uKTtcblx0fVxufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBzcGVjaWZpYyByZW5kZXJhYmxlXG4gKlxuICogQG1ldGhvZCByZW5kZXJTcGVjaWFsXG4gKiBAcGFyYW0gcmVuZGVyYWJsZSB7RGlzcGxheU9iamVjdH1cbiAqIEBwYXJhbSBwcm9qZWN0aW9uIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbmRlclNwZWNpYWwgPSBmdW5jdGlvbihyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKVxue1xuXHRcblx0dmFyIHdvcmxkVmlzaWJsZSA9IHJlbmRlcmFibGUudmNvdW50ID09PSBQSVhJLnZpc2libGVDb3VudFxuXG5cblx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHR7XG5cdFx0aWYod29ybGRWaXNpYmxlKXRoaXMucmVuZGVyVGlsaW5nU3ByaXRlKHJlbmRlcmFibGUsIHByb2plY3Rpb24pO1xuXHR9XG5cdGVsc2UgaWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuU3RyaXApXG5cdHtcblx0XHRpZih3b3JsZFZpc2libGUpdGhpcy5yZW5kZXJTdHJpcChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRlbHNlIGlmKHJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLkN1c3RvbVJlbmRlcmFibGUpXG5cdHtcblx0XHRpZih3b3JsZFZpc2libGUpIHJlbmRlcmFibGUucmVuZGVyV2ViR0wodGhpcywgcHJvamVjdGlvbik7XG5cdH1cblx0ZWxzZSBpZihyZW5kZXJhYmxlIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcblx0e1xuXHRcdGlmKHdvcmxkVmlzaWJsZSAmJiByZW5kZXJhYmxlLnJlbmRlcmFibGUpIFBJWEkuV2ViR0xHcmFwaGljcy5yZW5kZXJHcmFwaGljcyhyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRlbHNlIGlmKHJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLkZpbHRlckJsb2NrKVxuXHR7XG5cdFx0dGhpcy5oYW5kbGVGaWx0ZXJCbG9jayhyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxufVxuXG5mbGlwID0gZmFsc2U7XG52YXIgbWFza1N0YWNrID0gW107XG52YXIgbWFza1Bvc2l0aW9uID0gMDtcblxuLy92YXIgdXNlZE1hc2tTdGFjayA9IFtdO1xuXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUZpbHRlckJsb2NrID0gZnVuY3Rpb24oZmlsdGVyQmxvY2ssIHByb2plY3Rpb24pXG57XG5cdC8qXG5cdCAqIGZvciBub3cgb25seSBtYXNrcyBhcmUgc3VwcG9ydGVkLi5cblx0ICovXG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdFxuXHRpZihmaWx0ZXJCbG9jay5vcGVuKVxuXHR7XG5cdFx0aWYoZmlsdGVyQmxvY2suZGF0YSBpbnN0YW5jZW9mIEFycmF5KVxuXHRcdHtcblx0XHRcdHRoaXMuZmlsdGVyTWFuYWdlci5wdXNoRmlsdGVyKGZpbHRlckJsb2NrKTtcblx0XHRcdC8vIG9rIHNvLi5cblx0XHRcdFxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1x0XG5cdFx0XHRtYXNrUG9zaXRpb24rKztcblxuXHRcdFx0bWFza1N0YWNrLnB1c2goZmlsdGVyQmxvY2spXG5cdFxuXHRcdFx0Z2wuZW5hYmxlKGdsLlNURU5DSUxfVEVTVCk7XG5cdFx0XHRcblx0XHRcdGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdGdsLnN0ZW5jaWxGdW5jKGdsLkFMV0FZUywxLDEpO1xuXHRcdFx0Z2wuc3RlbmNpbE9wKGdsLktFRVAsZ2wuS0VFUCxnbC5JTkNSKTtcblx0XG5cdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MoZmlsdGVyQmxvY2suZGF0YSwgcHJvamVjdGlvbik7XG5cdFx0XHRcblx0XHRcdGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcblx0XHRcdGdsLnN0ZW5jaWxGdW5jKGdsLk5PVEVRVUFMLDAsbWFza1N0YWNrLmxlbmd0aCk7XG5cdFx0XHRnbC5zdGVuY2lsT3AoZ2wuS0VFUCxnbC5LRUVQLGdsLktFRVApO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHRpZihmaWx0ZXJCbG9jay5kYXRhIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0e1xuXHRcdFx0dGhpcy5maWx0ZXJNYW5hZ2VyLnBvcEZpbHRlcigpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dmFyIG1hc2tEYXRhID0gbWFza1N0YWNrLnBvcChmaWx0ZXJCbG9jaylcblxuXG5cdFx0XHRpZihtYXNrRGF0YSlcblx0XHRcdHtcblx0XHRcdFx0Z2wuY29sb3JNYXNrKGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XHRnbC5zdGVuY2lsRnVuYyhnbC5BTFdBWVMsMSwxKTtcblx0XHRcdFx0Z2wuc3RlbmNpbE9wKGdsLktFRVAsZ2wuS0VFUCxnbC5ERUNSKTtcblxuXHRcdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MobWFza0RhdGEuZGF0YSwgcHJvamVjdGlvbik7XG5cdFx0XHRcblx0XHRcdFx0Z2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuXHRcdFx0XHRnbC5zdGVuY2lsRnVuYyhnbC5OT1RFUVVBTCwwLG1hc2tTdGFjay5sZW5ndGgpO1xuXHRcdFx0XHRnbC5zdGVuY2lsT3AoZ2wuS0VFUCxnbC5LRUVQLGdsLktFRVApO1xuXHRcdFx0fTtcblxuXHRcdFx0Z2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgYSB3ZWJnbCB0ZXh0dXJlXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUZXh0dXJlXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdFxuXHQvLyBUT0RPIGRlZmluaXRlbHkgY2FuIG9wdGltc2UgdGhpcyBmdW5jdGlvbi4uXG5cdFxuXHR0aGlzLnJlbW92ZU9iamVjdChkaXNwbGF5T2JqZWN0KTtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgUFJFVklPVVMgUkVOREVSQUJMRVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBwcmV2aW91cyBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBJdCBrZWVwcyBnb2luZyBiYWNrIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIHRoZSBzdGFnZVxuXHQgKi9cblx0dmFyIHByZXZpb3VzUmVuZGVyYWJsZSA9IGRpc3BsYXlPYmplY3QuZmlyc3Q7XG5cdHdoaWxlKHByZXZpb3VzUmVuZGVyYWJsZSAhPSB0aGlzLnJvb3QpXG5cdHtcblx0XHRwcmV2aW91c1JlbmRlcmFibGUgPSBwcmV2aW91c1JlbmRlcmFibGUuX2lQcmV2O1xuXHRcdGlmKHByZXZpb3VzUmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIHByZXZpb3VzUmVuZGVyYWJsZS5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiAgTE9PSyBGT1IgVEhFIE5FWFQgU1BSSVRFXG5cdCAqICBUaGlzIHBhcnQgbG9va3MgZm9yIHRoZSBjbG9zZXN0IG5leHQgc3ByaXRlIHRoYXQgY2FuIGdvIGludG8gYSBiYXRjaFxuXHQgKiAgaXQga2VlcHMgbG9va2luZyB1bnRpbCBpdCBmaW5kcyBhIHNwcml0ZSBvciBnZXRzIHRvIHRoZSBlbmQgb2YgdGhlIGRpc3BsYXlcblx0ICogIHNjZW5lIGdyYXBoXG5cdCAqL1xuXHR2YXIgbmV4dFJlbmRlcmFibGUgPSBkaXNwbGF5T2JqZWN0Lmxhc3Q7XG5cdHdoaWxlKG5leHRSZW5kZXJhYmxlLl9pTmV4dClcblx0e1xuXHRcdG5leHRSZW5kZXJhYmxlID0gbmV4dFJlbmRlcmFibGUuX2lOZXh0O1xuXHRcdGlmKG5leHRSZW5kZXJhYmxlLnJlbmRlcmFibGUgJiYgbmV4dFJlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0fVxuXHRcblx0dGhpcy5pbnNlcnRPYmplY3QoZGlzcGxheU9iamVjdCwgcHJldmlvdXNSZW5kZXJhYmxlLCBuZXh0UmVuZGVyYWJsZSk7XG59XG5cbi8qKlxuICogQWRkcyBmaWx0ZXIgYmxvY2tzXG4gKlxuICogQG1ldGhvZCBhZGRGaWx0ZXJCbG9ja3NcbiAqIEBwYXJhbSBzdGFydCB7RmlsdGVyQmxvY2t9XG4gKiBAcGFyYW0gZW5kIHtGaWx0ZXJCbG9ja31cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuYWRkRmlsdGVyQmxvY2tzID0gZnVuY3Rpb24oc3RhcnQsIGVuZClcbntcblx0c3RhcnQuX19yZW5kZXJHcm91cCA9IHRoaXM7XG5cdGVuZC5fX3JlbmRlckdyb3VwID0gdGhpcztcblx0Lypcblx0ICogIExPT0sgRk9SIFRIRSBQUkVWSU9VUyBSRU5ERVJBQkxFXG5cdCAqICBUaGlzIHBhcnQgbG9va3MgZm9yIHRoZSBjbG9zZXN0IHByZXZpb3VzIHNwcml0ZSB0aGF0IGNhbiBnbyBpbnRvIGEgYmF0Y2hcblx0ICogIEl0IGtlZXBzIGdvaW5nIGJhY2sgdW50aWwgaXQgZmluZHMgYSBzcHJpdGUgb3IgdGhlIHN0YWdlXG5cdCAqL1xuXHR2YXIgcHJldmlvdXNSZW5kZXJhYmxlID0gc3RhcnQ7XG5cdHdoaWxlKHByZXZpb3VzUmVuZGVyYWJsZSAhPSB0aGlzLnJvb3QuZmlyc3QpXG5cdHtcblx0XHRwcmV2aW91c1JlbmRlcmFibGUgPSBwcmV2aW91c1JlbmRlcmFibGUuX2lQcmV2O1xuXHRcdGlmKHByZXZpb3VzUmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIHByZXZpb3VzUmVuZGVyYWJsZS5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdHRoaXMuaW5zZXJ0QWZ0ZXIoc3RhcnQsIHByZXZpb3VzUmVuZGVyYWJsZSk7XG5cdFx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgTkVYVCBTUFJJVEVcblx0ICogIFRoaXMgcGFydCBsb29rcyBmb3IgdGhlIGNsb3Nlc3QgbmV4dCBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBpdCBrZWVwcyBsb29raW5nIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIGdldHMgdG8gdGhlIGVuZCBvZiB0aGUgZGlzcGxheVxuXHQgKiAgc2NlbmUgZ3JhcGhcblx0ICovXG5cdHZhciBwcmV2aW91c1JlbmRlcmFibGUyID0gZW5kO1xuXHR3aGlsZShwcmV2aW91c1JlbmRlcmFibGUyICE9IHRoaXMucm9vdC5maXJzdClcblx0e1xuXHRcdHByZXZpb3VzUmVuZGVyYWJsZTIgPSBwcmV2aW91c1JlbmRlcmFibGUyLl9pUHJldjtcblx0XHRpZihwcmV2aW91c1JlbmRlcmFibGUyLnJlbmRlcmFibGUgJiYgcHJldmlvdXNSZW5kZXJhYmxlMi5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdHRoaXMuaW5zZXJ0QWZ0ZXIoZW5kLCBwcmV2aW91c1JlbmRlcmFibGUyKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZmlsdGVyIGJsb2Nrc1xuICpcbiAqIEBtZXRob2QgcmVtb3ZlRmlsdGVyQmxvY2tzXG4gKiBAcGFyYW0gc3RhcnQge0ZpbHRlckJsb2NrfVxuICogQHBhcmFtIGVuZCB7RmlsdGVyQmxvY2t9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbW92ZUZpbHRlckJsb2NrcyA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQpXG57XG5cdHRoaXMucmVtb3ZlT2JqZWN0KHN0YXJ0KTtcblx0dGhpcy5yZW1vdmVPYmplY3QoZW5kKTtcbn1cblxuLyoqXG4gKiBBZGRzIGEgZGlzcGxheSBvYmplY3QgYW5kIGNoaWxkcmVuIHRvIHRoZSB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCBhZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW5cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4gPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHRpZihkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXApZGlzcGxheU9iamVjdC5fX3JlbmRlckdyb3VwLnJlbW92ZURpc3BsYXlPYmplY3RBbmRDaGlsZHJlbihkaXNwbGF5T2JqZWN0KTtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgUFJFVklPVVMgUkVOREVSQUJMRVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBwcmV2aW91cyBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBJdCBrZWVwcyBnb2luZyBiYWNrIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIHRoZSBzdGFnZVxuXHQgKi9cblx0XG5cdHZhciBwcmV2aW91c1JlbmRlcmFibGUgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHR3aGlsZShwcmV2aW91c1JlbmRlcmFibGUgIT0gdGhpcy5yb290LmZpcnN0KVxuXHR7XG5cdFx0cHJldmlvdXNSZW5kZXJhYmxlID0gcHJldmlvdXNSZW5kZXJhYmxlLl9pUHJldjtcblx0XHRpZihwcmV2aW91c1JlbmRlcmFibGUucmVuZGVyYWJsZSAmJiBwcmV2aW91c1JlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0fVxuXHRcblx0Lypcblx0ICogIExPT0sgRk9SIFRIRSBORVhUIFNQUklURVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBuZXh0IHNwcml0ZSB0aGF0IGNhbiBnbyBpbnRvIGEgYmF0Y2hcblx0ICogIGl0IGtlZXBzIGxvb2tpbmcgdW50aWwgaXQgZmluZHMgYSBzcHJpdGUgb3IgZ2V0cyB0byB0aGUgZW5kIG9mIHRoZSBkaXNwbGF5XG5cdCAqICBzY2VuZSBncmFwaFxuXHQgKi9cblx0dmFyIG5leHRSZW5kZXJhYmxlID0gZGlzcGxheU9iamVjdC5sYXN0O1xuXHR3aGlsZShuZXh0UmVuZGVyYWJsZS5faU5leHQpXG5cdHtcblx0XHRuZXh0UmVuZGVyYWJsZSA9IG5leHRSZW5kZXJhYmxlLl9pTmV4dDtcblx0XHRpZihuZXh0UmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIG5leHRSZW5kZXJhYmxlLl9fcmVuZGVyR3JvdXApYnJlYWs7XG5cdH1cblx0XG5cdC8vIG9uZSB0aGUgZGlzcGxheSBvYmplY3QgaGl0cyB0aGlzLiB3ZSBjYW4gYnJlYWsgdGhlIGxvb3BcdFxuXHRcblx0dmFyIHRlbXBPYmplY3QgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHR2YXIgdGVzdE9iamVjdCA9IGRpc3BsYXlPYmplY3QubGFzdC5faU5leHQ7XG5cdGRvXHRcblx0e1xuXHRcdHRlbXBPYmplY3QuX19yZW5kZXJHcm91cCA9IHRoaXM7XG5cdFx0XG5cdFx0aWYodGVtcE9iamVjdC5yZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcblx0XHRcdHRoaXMuaW5zZXJ0T2JqZWN0KHRlbXBPYmplY3QsIHByZXZpb3VzUmVuZGVyYWJsZSwgbmV4dFJlbmRlcmFibGUpO1xuXHRcdFx0cHJldmlvdXNSZW5kZXJhYmxlID0gdGVtcE9iamVjdDtcblx0XHR9XG5cdFx0XG5cdFx0dGVtcE9iamVjdCA9IHRlbXBPYmplY3QuX2lOZXh0O1xuXHR9XG5cdHdoaWxlKHRlbXBPYmplY3QgIT0gdGVzdE9iamVjdClcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgZGlzcGxheSBvYmplY3QgYW5kIGNoaWxkcmVuIHRvIHRoZSB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCByZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW5cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4gPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHRpZihkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXAgIT0gdGhpcylyZXR1cm47XG5cdFxuLy9cdHZhciBkaXNwbGF5T2JqZWN0ID0gZGlzcGxheU9iamVjdC5maXJzdDtcblx0dmFyIGxhc3RPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3Q7XG5cdGRvXHRcblx0e1xuXHRcdGRpc3BsYXlPYmplY3QuX19yZW5kZXJHcm91cCA9IG51bGw7XG5cdFx0aWYoZGlzcGxheU9iamVjdC5yZW5kZXJhYmxlKXRoaXMucmVtb3ZlT2JqZWN0KGRpc3BsYXlPYmplY3QpO1xuXHRcdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0Ll9pTmV4dDtcblx0fVxuXHR3aGlsZShkaXNwbGF5T2JqZWN0KVxufVxuXG4vKipcbiAqIEluc2VydHMgYSBkaXNwbGF5T2JqZWN0IGludG8gdGhlIGxpbmtlZCBsaXN0XG4gKlxuICogQG1ldGhvZCBpbnNlcnRPYmplY3RcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIHByZXZpb3VzT2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIG5leHRPYmplY3Qge0Rpc3BsYXlPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmluc2VydE9iamVjdCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHByZXZpb3VzT2JqZWN0LCBuZXh0T2JqZWN0KVxue1xuXHQvLyB3aGlsZSBsb29waW5nIGJlbG93IFRIRSBPQkpFQ1QgTUFZIE5PVCBIQVZFIEJFRU4gQURERURcblx0dmFyIHByZXZpb3VzU3ByaXRlID0gcHJldmlvdXNPYmplY3Q7XG5cdHZhciBuZXh0U3ByaXRlID0gbmV4dE9iamVjdDtcblx0XG5cdC8qXG5cdCAqIHNvIG5vdyB3ZSBoYXZlIHRoZSBuZXh0IHJlbmRlcmFibGUgYW5kIHRoZSBwcmV2aW91cyByZW5kZXJhYmxlXG5cdCAqIFxuXHQgKi9cblx0aWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuU3ByaXRlKVxuXHR7XG5cdFx0dmFyIHByZXZpb3VzQmF0Y2hcblx0XHR2YXIgbmV4dEJhdGNoXG5cdFx0XG5cdFx0aWYocHJldmlvdXNTcHJpdGUgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHR7XG5cdFx0XHRwcmV2aW91c0JhdGNoID0gcHJldmlvdXNTcHJpdGUuYmF0Y2g7XG5cdFx0XHRpZihwcmV2aW91c0JhdGNoKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihwcmV2aW91c0JhdGNoLnRleHR1cmUgPT0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmJhc2VUZXh0dXJlICYmIHByZXZpb3VzQmF0Y2guYmxlbmRNb2RlID09IGRpc3BsYXlPYmplY3QuYmxlbmRNb2RlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cHJldmlvdXNCYXRjaC5pbnNlcnRBZnRlcihkaXNwbGF5T2JqZWN0LCBwcmV2aW91c1Nwcml0ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHQvLyBUT0RPIHJld29yZCFcblx0XHRcdHByZXZpb3VzQmF0Y2ggPSBwcmV2aW91c1Nwcml0ZTtcblx0XHR9XG5cdFxuXHRcdGlmKG5leHRTcHJpdGUpXG5cdFx0e1xuXHRcdFx0aWYobmV4dFNwcml0ZSBpbnN0YW5jZW9mIFBJWEkuU3ByaXRlKVxuXHRcdFx0e1xuXHRcdFx0XHRuZXh0QmF0Y2ggPSBuZXh0U3ByaXRlLmJhdGNoO1xuXHRcdFx0XG5cdFx0XHRcdC8vYmF0Y2ggbWF5IG5vdCBleGlzdCBpZiBpdGVtIHdhcyBhZGRlZCB0byB0aGUgZGlzcGxheSBsaXN0IGJ1dCBub3QgdG8gdGhlIHdlYkdMXG5cdFx0XHRcdGlmKG5leHRCYXRjaClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKG5leHRCYXRjaC50ZXh0dXJlID09IGRpc3BsYXlPYmplY3QudGV4dHVyZS5iYXNlVGV4dHVyZSAmJiBuZXh0QmF0Y2guYmxlbmRNb2RlID09IGRpc3BsYXlPYmplY3QuYmxlbmRNb2RlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5leHRCYXRjaC5pbnNlcnRCZWZvcmUoZGlzcGxheU9iamVjdCwgbmV4dFNwcml0ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZihuZXh0QmF0Y2ggPT0gcHJldmlvdXNCYXRjaClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Ly8gVEhFUkUgSVMgQSBTUExJVCBJTiBUSElTIEJBVENIISAvL1xuXHRcdFx0XHRcdFx0XHR2YXIgc3BsaXRCYXRjaCA9IHByZXZpb3VzQmF0Y2guc3BsaXQobmV4dFNwcml0ZSk7XG5cdFx0XHRcdFx0XHRcdC8vIENPT0whXG5cdFx0XHRcdFx0XHRcdC8vIGFkZCBpdCBiYWNrIGludG8gdGhlIGFycmF5XHRcblx0XHRcdFx0XHRcdFx0Lypcblx0XHRcdFx0XHRcdFx0ICogT09QUyFcblx0XHRcdFx0XHRcdFx0ICogc2VlbXMgdGhlIG5ldyBzcHJpdGUgaXMgaW4gdGhlIG1pZGRsZSBvZiBhIGJhdGNoXG5cdFx0XHRcdFx0XHRcdCAqIGxldHMgc3BsaXQgaXQuLiBcblx0XHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHRcdHZhciBiYXRjaCA9IFBJWEkuV2ViR0xSZW5kZXJlci5nZXRCYXRjaCgpO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBpbmRleCA9IHRoaXMuYmF0Y2hzLmluZGV4T2YoIHByZXZpb3VzQmF0Y2ggKTtcblx0XHRcdFx0XHRcdFx0YmF0Y2guaW5pdChkaXNwbGF5T2JqZWN0KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4KzEsIDAsIGJhdGNoLCBzcGxpdEJhdGNoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Ly8gVE9ETyByZS13b3JkIVxuXHRcdFx0XHRcblx0XHRcdFx0bmV4dEJhdGNoID0gbmV4dFNwcml0ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Lypcblx0XHQgKiBsb29rcyBsaWtlIGl0IGRvZXMgbm90IGJlbG9uZyB0byBhbnkgYmF0Y2ghXG5cdFx0ICogYnV0IGlzIGFsc28gbm90IGludGVyc2VjdGluZyBvbmUuLlxuXHRcdCAqIHRpbWUgdG8gY3JlYXRlIGFuZXcgb25lIVxuXHRcdCAqL1xuXHRcdFxuXHRcdHZhciBiYXRjaCA9ICBQSVhJLldlYkdMUmVuZGVyZXIuZ2V0QmF0Y2goKTtcblx0XHRiYXRjaC5pbml0KGRpc3BsYXlPYmplY3QpO1xuXG5cdFx0aWYocHJldmlvdXNCYXRjaCkgLy8gaWYgdGhpcyBpcyBpbnZhbGlkIGl0IG1lYW5zIFxuXHRcdHtcblx0XHRcdHZhciBpbmRleCA9IHRoaXMuYmF0Y2hzLmluZGV4T2YoIHByZXZpb3VzQmF0Y2ggKTtcblx0XHRcdHRoaXMuYmF0Y2hzLnNwbGljZShpbmRleCsxLCAwLCBiYXRjaCk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNocy5wdXNoKGJhdGNoKTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHR7XG5cdFx0XG5cdFx0Ly8gYWRkIHRvIGEgYmF0Y2ghIVxuXHRcdHRoaXMuaW5pdFRpbGluZ1Nwcml0ZShkaXNwbGF5T2JqZWN0KTtcblx0Ly9cdHRoaXMuYmF0Y2hzLnB1c2goZGlzcGxheU9iamVjdCk7XG5cdFx0XG5cdH1cblx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0IGluc3RhbmNlb2YgUElYSS5TdHJpcClcblx0e1xuXHRcdC8vIGFkZCB0byBhIGJhdGNoISFcblx0XHR0aGlzLmluaXRTdHJpcChkaXNwbGF5T2JqZWN0KTtcblx0Ly9cdHRoaXMuYmF0Y2hzLnB1c2goZGlzcGxheU9iamVjdCk7XG5cdH1cblx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0KS8vIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcblx0e1xuXHRcdC8vZGlzcGxheU9iamVjdC5pbml0V2ViR0wodGhpcyk7XG5cdFx0XG5cdFx0Ly8gYWRkIHRvIGEgYmF0Y2ghIVxuXHRcdC8vdGhpcy5pbml0U3RyaXAoZGlzcGxheU9iamVjdCk7XG5cdFx0Ly90aGlzLmJhdGNocy5wdXNoKGRpc3BsYXlPYmplY3QpO1xuXHR9XG5cdFxuXHR0aGlzLmluc2VydEFmdGVyKGRpc3BsYXlPYmplY3QsIHByZXZpb3VzU3ByaXRlKTtcblx0XHRcdFxuXHQvLyBpbnNlcnQgYW5kIFNQTElUIVxuXG59XG5cbi8qKlxuICogSW5zZXJ0cyBhIGRpc3BsYXlPYmplY3QgaW50byB0aGUgbGlua2VkIGxpc3RcbiAqXG4gKiBAbWV0aG9kIGluc2VydEFmdGVyXG4gKiBAcGFyYW0gaXRlbSB7RGlzcGxheU9iamVjdH1cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fSBUaGUgb2JqZWN0IHRvIGluc2VydFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uKGl0ZW0sIGRpc3BsYXlPYmplY3QpXG57XG5cdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdHZhciBwcmV2aW91c0JhdGNoID0gZGlzcGxheU9iamVjdC5iYXRjaDtcblx0XHRcblx0XHRpZihwcmV2aW91c0JhdGNoKVxuXHRcdHtcblx0XHRcdC8vIHNvIHRoaXMgb2JqZWN0IGlzIGluIGEgYmF0Y2ghXG5cdFx0XHRcblx0XHRcdC8vIGlzIGl0IG5vdD8gbmVlZCB0byBzcGxpdCB0aGUgYmF0Y2hcblx0XHRcdGlmKHByZXZpb3VzQmF0Y2gudGFpbCA9PSBkaXNwbGF5T2JqZWN0KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBpcyBpdCB0YWlsPyBpbnNlcnQgaW4gdG8gYmF0Y2hzXHRcblx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggcHJldmlvdXNCYXRjaCApO1xuXHRcdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgrMSwgMCwgaXRlbSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFRPRE8gTU9ESUZZIEFERCAvIFJFTU9WRSBDSElMRCBUTyBBQ0NPVU5UIEZPUiBGSUxURVJTIChhbHNvIGdldCBwcmV2IGFuZCBuZXh0KSAvL1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVEhFUkUgSVMgQSBTUExJVCBJTiBUSElTIEJBVENIISAvL1xuXHRcdFx0XHR2YXIgc3BsaXRCYXRjaCA9IHByZXZpb3VzQmF0Y2guc3BsaXQoZGlzcGxheU9iamVjdC5fX25leHQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ09PTCFcblx0XHRcdFx0Ly8gYWRkIGl0IGJhY2sgaW50byB0aGUgYXJyYXlcdFxuXHRcdFx0XHQvKlxuXHRcdFx0XHQgKiBPT1BTIVxuXHRcdFx0XHQgKiBzZWVtcyB0aGUgbmV3IHNwcml0ZSBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgYmF0Y2hcblx0XHRcdFx0ICogbGV0cyBzcGxpdCBpdC4uIFxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggcHJldmlvdXNCYXRjaCApO1xuXHRcdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgrMSwgMCwgaXRlbSwgc3BsaXRCYXRjaCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNocy5wdXNoKGl0ZW0pO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHR2YXIgaW5kZXggPSB0aGlzLmJhdGNocy5pbmRleE9mKCBkaXNwbGF5T2JqZWN0ICk7XG5cdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4KzEsIDAsIGl0ZW0pO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGRpc3BsYXlPYmplY3QgZnJvbSB0aGUgbGlua2VkIGxpc3RcbiAqXG4gKiBAbWV0aG9kIHJlbW92ZU9iamVjdFxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBvYmplY3QgdG8gcmVtb3ZlXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIGxvb3AgdGhyb3VnaCBjaGlsZHJlbi4uXG5cdC8vIGRpc3BsYXkgb2JqZWN0IC8vXG5cdFxuXHQvLyBhZGQgYSBjaGlsZCBmcm9tIHRoZSByZW5kZXIgZ3JvdXAuLlxuXHQvLyByZW1vdmUgaXQgYW5kIGFsbCBpdHMgY2hpbGRyZW4hXG5cdC8vZGlzcGxheU9iamVjdC5jYWNoZVZpc2libGUgPSBmYWxzZTsvL2Rpc3BsYXlPYmplY3QudmlzaWJsZTtcblxuXHQvKlxuXHQgKiByZW1vdmluZyBpcyBhIGxvdCBxdWlja2VyLi5cblx0ICogXG5cdCAqL1xuXHR2YXIgYmF0Y2hUb1JlbW92ZTtcblx0XG5cdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdC8vIHNob3VsZCBhbHdheXMgaGF2ZSBhIGJhdGNoIVxuXHRcdHZhciBiYXRjaCA9IGRpc3BsYXlPYmplY3QuYmF0Y2g7XG5cdFx0aWYoIWJhdGNoKXJldHVybjsgLy8gdGhpcyBtZWFucyB0aGUgZGlzcGxheSBsaXN0IGhhcyBiZWVuIGFsdGVyZWQgYmVmcmUgcmVuZGVyaW5nXG5cdFx0XG5cdFx0YmF0Y2gucmVtb3ZlKGRpc3BsYXlPYmplY3QpO1xuXHRcdFxuXHRcdGlmKGJhdGNoLnNpemU9PTApXG5cdFx0e1xuXHRcdFx0YmF0Y2hUb1JlbW92ZSA9IGJhdGNoO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHRiYXRjaFRvUmVtb3ZlID0gZGlzcGxheU9iamVjdDtcblx0fVxuXHRcblx0Lypcblx0ICogTG9va3MgbGlrZSB0aGVyZSBpcyBzb210aGluZyB0aGF0IG5lZWRzIHJlbW92aW5nIVxuXHQgKi9cblx0aWYoYmF0Y2hUb1JlbW92ZSlcdFxuXHR7XG5cdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggYmF0Y2hUb1JlbW92ZSApO1xuXHRcdGlmKGluZGV4ID09IC0xKXJldHVybjsvLyB0aGlzIG1lYW5zIGl0IHdhcyBhZGRlZCB0aGVuIHJlbW92ZWQgYmVmb3JlIHJlbmRlcmVkXG5cdFx0XG5cdFx0Ly8gb2sgc28uLiBjaGVjayB0byBzZWUgaWYgeW91IGFkamFjZW50IGJhdGNocyBzaG91bGQgYmUgam9pbmVkLlxuXHRcdC8vIFRPRE8gbWF5IG9wdGltaXNlP1xuXHRcdGlmKGluZGV4ID09IDAgfHwgaW5kZXggPT0gdGhpcy5iYXRjaHMubGVuZ3RoLTEpXG5cdFx0e1xuXHRcdFx0Ly8gd2hhIC0gZXZhISBqdXN0IGdldCBvZiB0aGUgZW1wdHkgYmF0Y2ghXG5cdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0aWYoYmF0Y2hUb1JlbW92ZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClQSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2goYmF0Y2hUb1JlbW92ZSk7XG5cdFx0XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGlmKHRoaXMuYmF0Y2hzW2luZGV4LTFdIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoICYmIHRoaXMuYmF0Y2hzW2luZGV4KzFdIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVxuXHRcdHtcblx0XHRcdGlmKHRoaXMuYmF0Y2hzW2luZGV4LTFdLnRleHR1cmUgPT0gdGhpcy5iYXRjaHNbaW5kZXgrMV0udGV4dHVyZSAmJiB0aGlzLmJhdGNoc1tpbmRleC0xXS5ibGVuZE1vZGUgPT0gdGhpcy5iYXRjaHNbaW5kZXgrMV0uYmxlbmRNb2RlKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiTUVSR0VcIilcblx0XHRcdFx0dGhpcy5iYXRjaHNbaW5kZXgtMV0ubWVyZ2UodGhpcy5iYXRjaHNbaW5kZXgrMV0pO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoYmF0Y2hUb1JlbW92ZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClQSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2goYmF0Y2hUb1JlbW92ZSk7XG5cdFx0XHRcdFBJWEkuV2ViR0xSZW5kZXJlci5yZXR1cm5CYXRjaCh0aGlzLmJhdGNoc1tpbmRleCsxXSk7XG5cdFx0XHRcdHRoaXMuYmF0Y2hzLnNwbGljZShpbmRleCwgMik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRpZihiYXRjaFRvUmVtb3ZlIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVBJWEkuV2ViR0xSZW5kZXJlci5yZXR1cm5CYXRjaChiYXRjaFRvUmVtb3ZlKTtcblx0fVxufVxuXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSB0aWxpbmcgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbml0VGlsaW5nU3ByaXRlXG4gKiBAcGFyYW0gc3ByaXRlIHtUaWxpbmdTcHJpdGV9IFRoZSB0aWxpbmcgc3ByaXRlIHRvIGluaXRpYWxpemVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuaW5pdFRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblxuXHQvLyBtYWtlIHRoZSB0ZXh0dXJlIHRpbGFibGUuLlxuXHRcdFx0XG5cdHNwcml0ZS52ZXJ0aWNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgIHNwcml0ZS53aWR0aCwgMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICBzcHJpdGUud2lkdGgsICBzcHJpdGUuaGVpZ2h0LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgMCwgIHNwcml0ZS5oZWlnaHRdKTtcblx0XHRcdFx0XHRcblx0c3ByaXRlLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsXG5cdFx0XHRcdFx0XHRcdFx0XHQxLCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0MSwgMSxcblx0XHRcdFx0XHRcdFx0XHRcdDAsIDFdKTtcblx0XHRcdFx0XG5cdHNwcml0ZS5jb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KFsxLDEsMSwxXSk7XG5cdFxuXHRzcHJpdGUuaW5kaWNlcyA9ICBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDMsMl0pLy8sIDJdKTtcblx0XG5cdHNwcml0ZS5fdmVydGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHNwcml0ZS5faW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0c3ByaXRlLl91dkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRzcHJpdGUuX2NvbG9yQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdFx0XHRcdFx0XHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fdmVydGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS52ZXJ0aWNpZXMsIGdsLlNUQVRJQ19EUkFXKTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc3ByaXRlLl91dkJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsICBzcHJpdGUudXZzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fY29sb3JCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3ByaXRlLmNvbG9ycywgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3ByaXRlLl9pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3ByaXRlLmluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcbi8vICAgIHJldHVybiAoICh4ID4gMCkgJiYgKCh4ICYgKHggLSAxKSkgPT0gMCkgKTtcblxuXHRpZihzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKVxuXHR7XG4gICAgXHRnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKTtcbiAgICBcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLlJFUEVBVCk7XG5cdFx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuUkVQRUFUKTtcblx0XHRzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fcG93ZXJPZjIgPSB0cnVlO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLl9wb3dlck9mMiA9IHRydWU7XG5cdH1cbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgU3RyaXBcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclN0cmlwXG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgc3RyaXAgdG8gcmVuZGVyXG4gKiBAcGFyYW0gcHJvamVjdGlvbiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW5kZXJTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwLCBwcm9qZWN0aW9uKVxue1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdFBJWEkuYWN0aXZhdGVTdHJpcFNoYWRlcigpO1xuXG5cdHZhciBzaGFkZXIgPSBQSVhJLnN0cmlwU2hhZGVyO1xuXG5cdHZhciBwcm9ncmFtID0gc2hhZGVyLnByb2dyYW07XG5cdFxuXHR2YXIgbSA9IFBJWEkubWF0My5jbG9uZShzdHJpcC53b3JsZFRyYW5zZm9ybSk7XG5cdFxuXHRQSVhJLm1hdDMudHJhbnNwb3NlKG0pO1xuXHRcbi8vXHRjb25zb2xlLmxvZyhwcm9qZWN0aW9uKVxuXHQvLyBzZXQgdGhlIG1hdHJpeCB0cmFuc2Zvcm0gZm9yIHRoZSBcbiBcdGdsLnVuaWZvcm1NYXRyaXgzZnYoc2hhZGVyLnRyYW5zbGF0aW9uTWF0cml4LCBmYWxzZSwgbSk7XG5cdGdsLnVuaWZvcm0yZihzaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCBwcm9qZWN0aW9uLnkpO1xuXHRnbC51bmlmb3JtMmYoc2hhZGVyLm9mZnNldFZlY3RvciwgLVBJWEkub2Zmc2V0LngsIC1QSVhJLm9mZnNldC55KTtcblx0XG5cdGdsLnVuaWZvcm0xZihzaGFkZXIuYWxwaGEsIHN0cmlwLndvcmxkQWxwaGEpO1xuXG5cdC8qXG5cdGlmKHN0cmlwLmJsZW5kTW9kZSA9PSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMKVxuXHR7XG5cdFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19DT0xPUik7XG5cdH1cblx0Ki9cblx0XG5cdC8vY29uc29sZS5sb2coXCIhIVwiKVxuXHRpZighc3RyaXAuZGlydHkpXG5cdHtcdFxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdmVydGV4QnVmZmVyKTtcblx0XHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgc3RyaXAudmVydGljaWVzKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFxuXHRcdC8vIHVwZGF0ZSB0aGUgdXZzXG5cdCAgIFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl91dkJ1ZmZlcik7XG5cdCAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5hVGV4dHVyZUNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFx0XG5cdCAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcblx0ICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHN0cmlwLnRleHR1cmUuYmFzZVRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdFx0XG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl9jb2xvckJ1ZmZlcik7XG5cdCAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5jb2xvckF0dHJpYnV0ZSwgMSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcblx0XHQvLyBkb250IG5lZWQgdG8gdXBsb2FkIVxuXHQgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3RyaXAuX2luZGV4QnVmZmVyKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRzdHJpcC5kaXJ0eSA9IGZhbHNlO1xuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdmVydGV4QnVmZmVyKTtcblx0XHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAudmVydGljaWVzLCBnbC5TVEFUSUNfRFJBVylcblx0ICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyLmFWZXJ0ZXhQb3NpdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcblx0XHQvLyB1cGRhdGUgdGhlIHV2c1xuXHQgICBcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdXZCdWZmZXIpO1xuXHQgICBcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC51dnMsIGdsLlNUQVRJQ19EUkFXKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVRleHR1cmVDb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcdFxuXHQgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG5cdCAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzdHJpcC50ZXh0dXJlLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUpO1xuXHQvL1x0Y29uc29sZS5sb2coc3RyaXAudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKVxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fY29sb3JCdWZmZXIpO1xuXHRcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5jb2xvcnMsIGdsLlNUQVRJQ19EUkFXKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuY29sb3JBdHRyaWJ1dGUsIDEsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cdFx0XG5cdFx0Ly8gZG9udCBuZWVkIHRvIHVwbG9hZCFcblx0ICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHN0cmlwLl9pbmRleEJ1ZmZlcik7XG5cdCAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBzdHJpcC5pbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG5cdCAgICBcblx0fVxuXHRcblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFX1NUUklQLCBzdHJpcC5pbmRpY2VzLmxlbmd0aCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIFxuICAgIFBJWEkuZGVhY3RpdmF0ZVN0cmlwU2hhZGVyKCk7XG4gIFx0Ly9nbC51c2VQcm9ncmFtKFBJWEkuY3VycmVudFByb2dyYW0pO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBUaWxpbmdTcHJpdGVcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclRpbGluZ1Nwcml0ZVxuICogQHBhcmFtIHNwcml0ZSB7VGlsaW5nU3ByaXRlfSBUaGUgdGlsaW5nIHNwcml0ZSB0byByZW5kZXJcbiAqIEBwYXJhbSBwcm9qZWN0aW9uTWF0cml4IHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbmRlclRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSwgcHJvamVjdGlvbk1hdHJpeClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblxuXG5cdHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5zaGFkZXJQcm9ncmFtO1xuXHRcblx0dmFyIHRpbGVQb3NpdGlvbiA9IHNwcml0ZS50aWxlUG9zaXRpb247XG5cdHZhciB0aWxlU2NhbGUgPSBzcHJpdGUudGlsZVNjYWxlO1xuXHRcblx0dmFyIG9mZnNldFggPSAgdGlsZVBvc2l0aW9uLngvc3ByaXRlLnRleHR1cmUuYmFzZVRleHR1cmUud2lkdGg7XG5cdHZhciBvZmZzZXRZID0gIHRpbGVQb3NpdGlvbi55L3Nwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodDtcblx0XG5cdHZhciBzY2FsZVggPSAgKHNwcml0ZS53aWR0aCAvIHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLndpZHRoKSAgLyB0aWxlU2NhbGUueDtcblx0dmFyIHNjYWxlWSA9ICAoc3ByaXRlLmhlaWdodCAvIHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodCkgLyB0aWxlU2NhbGUueTtcblxuXHRzcHJpdGUudXZzWzBdID0gMCAtIG9mZnNldFg7XG5cdHNwcml0ZS51dnNbMV0gPSAwIC0gb2Zmc2V0WTtcblx0XG5cdHNwcml0ZS51dnNbMl0gPSAoMSAqIHNjYWxlWCkgIC1vZmZzZXRYO1xuXHRzcHJpdGUudXZzWzNdID0gMCAtIG9mZnNldFk7XG5cdFxuXHRzcHJpdGUudXZzWzRdID0gKDEgKnNjYWxlWCkgLSBvZmZzZXRYO1xuXHRzcHJpdGUudXZzWzVdID0gKDEgKnNjYWxlWSkgLSBvZmZzZXRZO1xuXHRcblx0c3ByaXRlLnV2c1s2XSA9IDAgLSBvZmZzZXRYO1xuXHRzcHJpdGUudXZzWzddID0gKDEgKnNjYWxlWSkgLSBvZmZzZXRZO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fdXZCdWZmZXIpO1xuXHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgc3ByaXRlLnV2cylcblx0XG5cdHRoaXMucmVuZGVyU3RyaXAoc3ByaXRlLCBwcm9qZWN0aW9uTWF0cml4KTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIHN0cmlwIHRvIGJlIHJlbmRlcmVkXG4gKlxuICogQG1ldGhvZCBpbml0U3RyaXBcbiAqIEBwYXJhbSBzdHJpcCB7U3RyaXB9IFRoZSBzdHJpcCB0byBpbml0aWFsaXplXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmluaXRTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwKVxue1xuXHQvLyBidWlsZCB0aGUgc3RyaXAhXG5cdHZhciBnbCA9IHRoaXMuZ2w7XG5cdHZhciBzaGFkZXJQcm9ncmFtID0gdGhpcy5zaGFkZXJQcm9ncmFtO1xuXHRcblx0c3RyaXAuX3ZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRzdHJpcC5faW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0c3RyaXAuX3V2QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHN0cmlwLl9jb2xvckJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl92ZXJ0ZXhCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAudmVydGljaWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdXZCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAgc3RyaXAudXZzLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAuX2NvbG9yQnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLmNvbG9ycywgZ2wuU1RBVElDX0RSQVcpO1xuXG5cdFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHN0cmlwLl9pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3RyaXAuaW5kaWNlcywgZ2wuU1RBVElDX0RSQVcpO1xufVxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlciA9IGZ1bmN0aW9uKHRyYW5zcGFyZW50KVxue1xuXHR0aGlzLnRyYW5zcGFyZW50ID0gdHJhbnNwYXJlbnQ7XG5cdFxuXHR0aGlzLmZpbHRlclN0YWNrID0gW107XG5cdHRoaXMudGV4dHVyZVBvb2wgPSBbXTtcblx0XG5cdHRoaXMub2Zmc2V0WCA9IDA7XG5cdHRoaXMub2Zmc2V0WSA9IDA7XG5cdFxuXHR0aGlzLmluaXRTaGFkZXJCdWZmZXJzKCk7XG59XG5cbi8vIEFQSVxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlci5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbihwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdHRoaXMud2lkdGggPSBwcm9qZWN0aW9uLnggKiAyO1xuXHR0aGlzLmhlaWdodCA9IC1wcm9qZWN0aW9uLnkgKiAyO1xuXHR0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLnB1c2hGaWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXJCbG9jaylcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHQvLyBmaWx0ZXIgcHJvZ3JhbVxuXHQvLyBPUFRJTUlTQVRJT04gLSB0aGUgZmlyc3QgZmlsdGVyIGlzIGZyZWUgaWYgaXRzIGEgc2ltcGxlIGNvbG9yIGNoYW5nZT9cblx0dGhpcy5maWx0ZXJTdGFjay5wdXNoKGZpbHRlckJsb2NrKTtcblxuXHR2YXIgZmlsdGVyID0gZmlsdGVyQmxvY2suZmlsdGVyUGFzc2VzWzBdO1xuXG5cdFxuXG5cdHRoaXMub2Zmc2V0WCArPSBmaWx0ZXJCbG9jay50YXJnZXQuZmlsdGVyQXJlYS54O1xuXHR0aGlzLm9mZnNldFkgKz0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWEueTtcblx0XG5cdFxuXHRcblx0XG5cdFxuXHR2YXIgdGV4dHVyZSA9IHRoaXMudGV4dHVyZVBvb2wucG9wKCk7XG5cdGlmKCF0ZXh0dXJlKXRleHR1cmUgPSBuZXcgUElYSS5GaWx0ZXJUZXh0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XG5cdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsICB0ZXh0dXJlLnRleHR1cmUpO1xuXHRcblx0dGhpcy5nZXRCb3VuZHMoZmlsdGVyQmxvY2sudGFyZ2V0KTtcblx0XHRcblx0Ly8gYWRkcGFkZGluZz9cblx0Ly9kaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEueFxuXG5cdHZhciBmaWx0ZXJBcmVhID0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cblx0dmFyIHBhZGlkbmcgPSBmaWx0ZXIucGFkZGluZztcblx0ZmlsdGVyQXJlYS54IC09IHBhZGlkbmc7XG5cdGZpbHRlckFyZWEueSAtPSBwYWRpZG5nO1xuXHRmaWx0ZXJBcmVhLndpZHRoICs9IHBhZGlkbmcgKiAyO1xuXHRmaWx0ZXJBcmVhLmhlaWdodCArPSBwYWRpZG5nICogMjtcblxuXHQvLyBjYXAgZmlsdGVyIHRvIHNjcmVlbiBzaXplLi5cblx0aWYoZmlsdGVyQXJlYS54IDwgMClmaWx0ZXJBcmVhLnggPSAwO1x0XG5cdGlmKGZpbHRlckFyZWEud2lkdGggPiB0aGlzLndpZHRoKWZpbHRlckFyZWEud2lkdGggPSB0aGlzLndpZHRoO1xuXHRpZihmaWx0ZXJBcmVhLnkgPCAwKWZpbHRlckFyZWEueSA9IDA7XHRcblx0aWYoZmlsdGVyQXJlYS5oZWlnaHQgPiB0aGlzLmhlaWdodClmaWx0ZXJBcmVhLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXG5cblx0Ly9nbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsICBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGV4dHVyZS5mcmFtZUJ1ZmZlcik7XG4gICBcbiAgLy8gY29uc29sZS5sb2coZmlsdGVyQXJlYSlcblx0Ly8gc2V0IHZpZXcgcG9ydFxuXHRnbC52aWV3cG9ydCgwLCAwLCBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XHRcblx0XG5cdFBJWEkucHJvamVjdGlvbi54ID0gZmlsdGVyQXJlYS53aWR0aC8yO1xuXHRQSVhJLnByb2plY3Rpb24ueSA9IC1maWx0ZXJBcmVhLmhlaWdodC8yO1xuXHRcblx0UElYSS5vZmZzZXQueCA9IC1maWx0ZXJBcmVhLng7IFxuXHRQSVhJLm9mZnNldC55ID0gLWZpbHRlckFyZWEueTtcblxuXHQvL2NvbnNvbGUubG9nKFBJWEkuZGVmYXVsdFNoYWRlci5wcm9qZWN0aW9uVmVjdG9yKVxuXHQvLyB1cGRhdGUgcHJvamVjdGlvblxuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIGZpbHRlckFyZWEud2lkdGgvMiwgLWZpbHRlckFyZWEuaGVpZ2h0LzIpO1xuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLm9mZnNldFZlY3RvciwgLWZpbHRlckFyZWEueCwgLWZpbHRlckFyZWEueSk7XG5cdC8vUElYSS5wcmltaXRpdmVQcm9ncmFtXG5cblx0Z2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpOyBcblx0Z2wuY2xlYXJDb2xvcigwLDAsMCwgMCk7ICAgICBcblx0Z2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG5cdFxuXHQvL2ZpbHRlci50ZXh0dXJlID0gdGV4dHVyZTtcblx0ZmlsdGVyQmxvY2suX2dsRmlsdGVyVGV4dHVyZSA9IHRleHR1cmU7XG5cblx0Ly9jb25zb2xlLmxvZyhcIlBVU0hcIilcbn1cblxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlci5wcm90b3R5cGUucG9wRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRcblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdHZhciBmaWx0ZXJCbG9jayA9IHRoaXMuZmlsdGVyU3RhY2sucG9wKCk7XG5cblxuXG5cdHZhciBmaWx0ZXJBcmVhID0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cblx0dmFyIHRleHR1cmUgPSBmaWx0ZXJCbG9jay5fZ2xGaWx0ZXJUZXh0dXJlO1xuXG5cdGlmKGZpbHRlckJsb2NrLmZpbHRlclBhc3Nlcy5sZW5ndGggPiAxKVxuXHR7XG5cdFx0Z2wudmlld3BvcnQoMCwgMCwgZmlsdGVyQXJlYS53aWR0aCwgZmlsdGVyQXJlYS5oZWlnaHQpO1xuXG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcblx0XG5cdFx0dGhpcy52ZXJ0ZXhBcnJheVswXSA9IDA7XG5cdFx0dGhpcy52ZXJ0ZXhBcnJheVsxXSA9IGZpbHRlckFyZWEuaGVpZ2h0O1xuXHRcdFxuXHRcdHRoaXMudmVydGV4QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoO1xuXHRcdHRoaXMudmVydGV4QXJyYXlbM10gPSBmaWx0ZXJBcmVhLmhlaWdodDtcblx0XHRcblx0XHR0aGlzLnZlcnRleEFycmF5WzRdID0gMDtcblx0XHR0aGlzLnZlcnRleEFycmF5WzVdID0gMDtcblx0XHRcblx0XHR0aGlzLnZlcnRleEFycmF5WzZdID0gZmlsdGVyQXJlYS53aWR0aDtcblx0XHR0aGlzLnZlcnRleEFycmF5WzddID0gMDtcblxuXG5cdFx0Z2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHRoaXMudmVydGV4QXJyYXkpO1xuXG5cdFxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcblx0XHQvLyBubm93IHNldCB0aGUgdXZzLi5cblx0XHR0aGlzLnV2QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdFx0dGhpcy51dkFycmF5WzVdID0gZmlsdGVyQXJlYS5oZWlnaHQvdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy51dkFycmF5WzZdID0gZmlsdGVyQXJlYS53aWR0aC90aGlzLndpZHRoO1xuXHRcdHRoaXMudXZBcnJheVs3XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHRcdFxuXHRcdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnV2QXJyYXkpO1xuXG5cdFx0dmFyIGlucHV0VGV4dHVyZSA9IHRleHR1cmU7XG5cdFx0dmFyIG91dHB1dFRleHR1cmUgPSB0aGlzLnRleHR1cmVQb29sLnBvcCgpO1xuXHRcdGlmKCFvdXRwdXRUZXh0dXJlKW91dHB1dFRleHR1cmUgPSBuZXcgUElYSS5GaWx0ZXJUZXh0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XHRcblx0XHQvLyBuZWVkIHRvIGNsZWFyIHRoaXMgRkJPIGFzIGl0IG1heSBoYXZlIHNvbWUgbGVmdCBvdmVyIGVsZW1lbnRzIGZyb20gYSBwcnZpb3VzIGZpbHRlci5cblx0XHRnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG91dHB1dFRleHR1cmUuZnJhbWVCdWZmZXIgKTsgICAgIFxuXHRcdGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXHQgXG5cdFx0Z2wuZGlzYWJsZShnbC5CTEVORCk7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXMubGVuZ3RoLTE7IGkrKykgXG5cdFx0e1xuXHRcdFx0dmFyIGZpbHRlclBhc3MgPSBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXNbaV07XG5cdFxuXHRcdFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBvdXRwdXRUZXh0dXJlLmZyYW1lQnVmZmVyICk7XG5cdFx0XHRcblx0XHRcdC8vIHNldCB0ZXh0dXJlXG5cdFx0ICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuXHRcdFx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgaW5wdXRUZXh0dXJlLnRleHR1cmUpO1xuXHRcdFx0XG5cdFx0XHQvLyBkcmF3IHRleHR1cmUuLlxuXHRcdFx0Ly9maWx0ZXJQYXNzLmFwcGx5RmlsdGVyUGFzcyhmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XG5cdFx0XHR0aGlzLmFwcGx5RmlsdGVyUGFzcyhmaWx0ZXJQYXNzLCBmaWx0ZXJBcmVhLCBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XG5cblx0XHRcdC8vIHN3YXAgdGhlIHRleHR1cmVzLi5cblx0XHRcdHZhciB0ZW1wID0gaW5wdXRUZXh0dXJlO1xuXHRcdFx0aW5wdXRUZXh0dXJlID0gb3V0cHV0VGV4dHVyZTtcblx0XHRcdG91dHB1dFRleHR1cmUgPSB0ZW1wO1xuXHRcdFx0XG5cdFx0fTtcblxuXHRcdGdsLmVuYWJsZShnbC5CTEVORCk7XG5cblx0XHR0ZXh0dXJlID0gaW5wdXRUZXh0dXJlO1xuXHRcdHRoaXMudGV4dHVyZVBvb2wucHVzaChvdXRwdXRUZXh0dXJlKTtcblx0fVxuXG5cdHZhciBmaWx0ZXIgPSBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXNbZmlsdGVyQmxvY2suZmlsdGVyUGFzc2VzLmxlbmd0aC0xXTtcblx0XG5cdHRoaXMub2Zmc2V0WCAtPSBmaWx0ZXJBcmVhLng7XG5cdHRoaXMub2Zmc2V0WSAtPSBmaWx0ZXJBcmVhLnk7XG5cblx0XG5cdHZhciBzaXplWCA9IHRoaXMud2lkdGg7XG5cdHZhciBzaXplWSA9IHRoaXMuaGVpZ2h0O1xuXHRcblx0dmFyIG9mZnNldFggPSAwO1xuXHR2YXIgb2Zmc2V0WSA9IDA7XG5cdFxuXHR2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdFxuXHQvLyB0aW1lIHRvIHJlbmRlciB0aGUgZmlsdGVycyB0ZXh0dXJlIHRvIHRoZSBwcmV2aW91cyBzY2VuZVxuXHRpZih0aGlzLmZpbHRlclN0YWNrLmxlbmd0aCA9PT0gMClcblx0e1xuXHRcdGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0aGlzLnRyYW5zcGFyZW50KTsgXG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dmFyIGN1cnJlbnRGaWx0ZXIgPSB0aGlzLmZpbHRlclN0YWNrW3RoaXMuZmlsdGVyU3RhY2subGVuZ3RoLTFdO1xuXHRcdHZhciBmaWx0ZXJBcmVhID0gY3VycmVudEZpbHRlci50YXJnZXQuZmlsdGVyQXJlYTtcblx0XHRcblx0XHRzaXplWCA9IGZpbHRlckFyZWEud2lkdGg7XG5cdFx0c2l6ZVkgPSBmaWx0ZXJBcmVhLmhlaWdodDtcblx0XHRcblx0XHRvZmZzZXRYID0gZmlsdGVyQXJlYS54O1xuXHRcdG9mZnNldFkgPSBmaWx0ZXJBcmVhLnk7XG5cdFx0XG5cdFx0YnVmZmVyID0gIGN1cnJlbnRGaWx0ZXIuX2dsRmlsdGVyVGV4dHVyZS5mcmFtZUJ1ZmZlcjtcblx0fVxuXHRcblx0XG5cblx0Ly8gVE9ETyBuZWVkIHRvcmVtb3ZlIHRoZWFzZSBnbG9iYWwgZWxlbWVudHMuLlxuXHRQSVhJLnByb2plY3Rpb24ueCA9IHNpemVYLzI7XG5cdFBJWEkucHJvamVjdGlvbi55ID0gLXNpemVZLzI7XG5cblx0UElYSS5vZmZzZXQueCA9IG9mZnNldFg7XG5cdFBJWEkub2Zmc2V0LnkgPSBvZmZzZXRZOyBcblx0XG5cblx0dmFyIGZpbHRlckFyZWEgPSAgZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cdHZhciB4ID0gZmlsdGVyQXJlYS54LW9mZnNldFg7XG5cdHZhciB5ID0gZmlsdGVyQXJlYS55LW9mZnNldFk7XG5cdFxuXHQvLyB1cGRhdGUgdGhlIGJ1ZmZlcnMuLlx0XG5cdC8vIG1ha2Ugc3VyZSB0byBmbGlwIHRoZSB5IVxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHRcblx0dGhpcy52ZXJ0ZXhBcnJheVswXSA9IHg7XG5cdHRoaXMudmVydGV4QXJyYXlbMV0gPSB5ICsgZmlsdGVyQXJlYS5oZWlnaHQ7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzJdID0geCArIGZpbHRlckFyZWEud2lkdGg7XG5cdHRoaXMudmVydGV4QXJyYXlbM10gPSB5ICsgZmlsdGVyQXJlYS5oZWlnaHQ7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzRdID0geDtcblx0dGhpcy52ZXJ0ZXhBcnJheVs1XSA9IHk7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzZdID0geCArIGZpbHRlckFyZWEud2lkdGg7XG5cdHRoaXMudmVydGV4QXJyYXlbN10gPSB5O1xuXG5cdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRleEFycmF5KTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcblxuXHR0aGlzLnV2QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdHRoaXMudXZBcnJheVs1XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHR0aGlzLnV2QXJyYXlbNl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdHRoaXMudXZBcnJheVs3XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHRcblx0Z2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHRoaXMudXZBcnJheSk7XG5cblx0Z2wudmlld3BvcnQoMCwgMCwgc2l6ZVgsIHNpemVZKTtcdFxuXHQvLyBiaW5kIHRoZSBidWZmZXJcblx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBidWZmZXIgKTtcblx0XG5cdC8vIHNldCB0ZXh0dXJlXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG5cdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUudGV4dHVyZSk7XG5cdFxuXHQvLyBhcHBseSFcblx0Ly9maWx0ZXIuYXBwbHlGaWx0ZXJQYXNzKHNpemVYLCBzaXplWSk7XG5cdHRoaXMuYXBwbHlGaWx0ZXJQYXNzKGZpbHRlciwgZmlsdGVyQXJlYSwgc2l6ZVgsIHNpemVZKTtcblxuXHQvLyBub3cgcmVzdG9yZSB0aGUgcmVndWxhciBzaGFkZXIuLlxuICAgIGdsLnVzZVByb2dyYW0oUElYSS5kZWZhdWx0U2hhZGVyLnByb2dyYW0pO1xuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIHNpemVYLzIsIC1zaXplWS8yKTtcblx0Z2wudW5pZm9ybTJmKFBJWEkuZGVmYXVsdFNoYWRlci5vZmZzZXRWZWN0b3IsIC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG5cblx0Ly8gcmV0dXJuIHRoZSB0ZXh0dXJlIHRvIHRoZSBwb29sXG5cdHRoaXMudGV4dHVyZVBvb2wucHVzaCh0ZXh0dXJlKTtcblx0ZmlsdGVyQmxvY2suX2dsRmlsdGVyVGV4dHVyZSA9IG51bGw7XHRcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmFwcGx5RmlsdGVyUGFzcyA9IGZ1bmN0aW9uKGZpbHRlciwgZmlsdGVyQXJlYSwgd2lkdGgsIGhlaWdodClcbntcblx0Ly8gdXNlIHByb2dyYW1cblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHRpZighZmlsdGVyLnNoYWRlcilcblx0e1xuXHRcdHZhciBzaGFkZXIgPSBuZXcgUElYSS5QaXhpU2hhZGVyKCk7XG5cdFx0XHRcdFxuXHRcdHNoYWRlci5mcmFnbWVudFNyYyA9IGZpbHRlci5mcmFnbWVudFNyYztcblx0XHRzaGFkZXIudW5pZm9ybXMgPSBmaWx0ZXIudW5pZm9ybXM7XG5cdFx0c2hhZGVyLmluaXQoKTtcblx0XHRcblx0XHRmaWx0ZXIuc2hhZGVyID0gc2hhZGVyO1xuXHR9XG5cblx0dmFyIHNoYWRlciA9IGZpbHRlci5zaGFkZXI7XG5cdFxuXHQvLyBzZXQgdGhlIHNoYWRlclxuXHRnbC51c2VQcm9ncmFtKHNoYWRlci5wcm9ncmFtKTtcblxuXHRnbC51bmlmb3JtMmYoc2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIHdpZHRoLzIsIC1oZWlnaHQvMik7XG5cdGdsLnVuaWZvcm0yZihzaGFkZXIub2Zmc2V0VmVjdG9yLCAwLDApXG5cblx0aWYoZmlsdGVyLnVuaWZvcm1zLmRpbWVuc2lvbnMpXG5cdHtcblx0XHQvL2NvbnNvbGUubG9nKGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zKVxuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzBdID0gdGhpcy53aWR0aDsvL3dpZHRoO1xuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzFdID0gdGhpcy5oZWlnaHQ7Ly9oZWlnaHQ7XG5cdFx0ZmlsdGVyLnVuaWZvcm1zLmRpbWVuc2lvbnMudmFsdWVbMl0gPSB0aGlzLnZlcnRleEFycmF5WzBdO1xuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzNdID0gdGhpcy52ZXJ0ZXhBcnJheVs1XTsvL2ZpbHRlckFyZWEuaGVpZ2h0O1xuXHQvL1x0Y29uc29sZS5sb2codGhpcy52ZXJ0ZXhBcnJheVs1XSlcblx0fVxuXG5cdHNoYWRlci5zeW5jVW5pZm9ybXMoKTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgXG4gICBcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5hVGV4dHVyZUNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcbiAgICBcblx0Ly8gZHJhdyB0aGUgZmlsdGVyLi4uXG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfU0hPUlQsIDAgKTtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmluaXRTaGFkZXJCdWZmZXJzID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcblx0Ly8gY3JlYXRlIHNvbWUgYnVmZmVyc1xuXHR0aGlzLnZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1x0XG5cdHRoaXMudXZCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5pbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcblx0Ly8gYmluZCBhbmQgdXBsb2FkIHRoZSB2ZXJ0ZXhzLi5cblx0Ly8ga2VlcCBhIHJlZmZlcmFuY2UgdG8gdGhlIHZlcnRleEZsb2F0RGF0YS4uXG5cdHRoaXMudmVydGV4QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAgICAgMS4wLCAwLjAsIFxuXHRcdFx0XHRcdFx0XHRcdCAgICAgICAgIDAuMCwgMS4wLCBcblx0XHRcdFx0XHRcdFx0XHQgICAgICAgICAxLjAsIDEuMF0pO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShcbiAgICBnbC5BUlJBWV9CVUZGRVIsIFxuICAgIHRoaXMudmVydGV4QXJyYXksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcbiAgICBcbiAgICAvLyBiaW5kIGFuZCB1cGxvYWQgdGhlIHV2IGJ1ZmZlclxuXHR0aGlzLnV2QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAxLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAwLjAsIDEuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAxLjAsIDEuMF0pO1xuXHRcdFx0XHRcdFx0XHRcdCAgICAgICAgIFxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy51dkJ1ZmZlcik7XG5cdGdsLmJ1ZmZlckRhdGEoXG4gICAgZ2wuQVJSQVlfQlVGRkVSLCBcbiAgICB0aGlzLnV2QXJyYXksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcblx0Ly8gYmluZCBhbmQgdXBsb2FkIHRoZSBpbmRleFxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShcbiAgICBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgXG4gICAgbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAxLCAzLCAyXSksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIHRpbWUgdG8gZ2V0IHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBvYmplY3QhXG5cdHZhciB3b3JsZFRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCwgYVgsIGFZLCB3MCwgdzEsIGgwLCBoMSwgaW5kZXgsIGRvVGVzdDtcblx0dmFyIGEsIGIsIGMsIGQsIHR4LCB0eSwgeDEsIHgyLCB4MywgeDQsIHkxLCB5MiwgeTMsIHk0O1xuXG5cdHZhciB0ZW1wT2JqZWN0ID0gZGlzcGxheU9iamVjdC5maXJzdDtcblx0dmFyIHRlc3RPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3QuX2lOZXh0O1xuXHRcblx0dmFyIG1heFggPSAtSW5maW5pdHk7XG5cdHZhciBtYXhZID0gLUluZmluaXR5O1xuXHRcblx0dmFyIG1pblggPSBJbmZpbml0eTtcblx0dmFyIG1pblkgPSBJbmZpbml0eTtcblx0XG5cdGRvXHRcblx0e1xuXHRcdC8vIFRPRE8gY2FuIGJlIG9wdGltaXplZCEgLSB3aGF0IGlmIHRoZXJlIGlzIG5vIHNjYWxlIC8gcm90YXRpb24/XG5cdFx0XG5cdFx0aWYodGVtcE9iamVjdC52aXNpYmxlKVxuXHRcdHtcblx0XHRcdGlmKHRlbXBPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHRcdHtcblx0XHRcdFx0d2lkdGggPSB0ZW1wT2JqZWN0LnRleHR1cmUuZnJhbWUud2lkdGg7XG5cdFx0XHRcdGhlaWdodCA9IHRlbXBPYmplY3QudGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG5cblx0XHRcdFx0Ly8gVE9ETyB0cmltPz9cblx0XHRcdFx0YVggPSB0ZW1wT2JqZWN0LmFuY2hvci54O1xuXHRcdFx0XHRhWSA9IHRlbXBPYmplY3QuYW5jaG9yLnk7XG5cdFx0XHRcdHcwID0gd2lkdGggKiAoMS1hWCk7XG5cdFx0XHRcdHcxID0gd2lkdGggKiAtYVg7XG5cblx0XHRcdFx0aDAgPSBoZWlnaHQgKiAoMS1hWSk7XG5cdFx0XHRcdGgxID0gaGVpZ2h0ICogLWFZO1xuXG5cdFx0XHRcdGRvVGVzdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHRlbXBPYmplY3QgaW5zdGFuY2VvZiBQSVhJLkdyYXBoaWNzKVxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wT2JqZWN0LnVwZGF0ZUZpbHRlckJvdW5kcygpO1xuXG5cdFx0XHRcdHZhciBib3VuZHMgPSB0ZW1wT2JqZWN0LmJvdW5kcztcblxuXHRcdFx0XHR3aWR0aCA9IGJvdW5kcy53aWR0aDtcblx0XHRcdFx0aGVpZ2h0ID0gYm91bmRzLmhlaWdodDtcblxuXHRcdFx0XHR3MCA9IGJvdW5kcy54XG5cdFx0XHRcdHcxID0gYm91bmRzLnggKyBib3VuZHMud2lkdGg7XG5cblx0XHRcdFx0aDAgPSBib3VuZHMueVxuXHRcdFx0XHRoMSA9IGJvdW5kcy55ICsgYm91bmRzLmhlaWdodDtcblxuXHRcdFx0XHRkb1Rlc3QgPSB0cnVlO1x0XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGlmKGRvVGVzdClcblx0XHR7XG5cdFx0XHR3b3JsZFRyYW5zZm9ybSA9IHRlbXBPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cblx0XHRcdGEgPSB3b3JsZFRyYW5zZm9ybVswXTtcblx0XHRcdGIgPSB3b3JsZFRyYW5zZm9ybVszXTtcblx0XHRcdGMgPSB3b3JsZFRyYW5zZm9ybVsxXTtcblx0XHRcdGQgPSB3b3JsZFRyYW5zZm9ybVs0XTtcblx0XHRcdHR4ID0gd29ybGRUcmFuc2Zvcm1bMl07XG5cdFx0XHR0eSA9IHdvcmxkVHJhbnNmb3JtWzVdO1xuXG5cdFx0XHR4MSA9IGEgKiB3MSArIGMgKiBoMSArIHR4OyBcblx0XHRcdHkxID0gZCAqIGgxICsgYiAqIHcxICsgdHk7XG5cblx0XHRcdHgyID0gYSAqIHcwICsgYyAqIGgxICsgdHg7IFxuXHRcdFx0eTIgPSBkICogaDEgKyBiICogdzAgKyB0eTsgXG5cblx0XHRcdHgzID0gYSAqIHcwICsgYyAqIGgwICsgdHg7IFxuXHRcdFx0eTMgPSBkICogaDAgKyBiICogdzAgKyB0eTsgXG5cblx0XHRcdHg0ID0gIGEgKiB3MSArIGMgKiBoMCArIHR4OyBcblx0XHRcdHk0ID0gIGQgKiBoMCArIGIgKiB3MSArIHR5OyBcblxuXHRcdFx0bWluWCA9IHgxIDwgbWluWCA/IHgxIDogbWluWDtcblx0XHRcdG1pblggPSB4MiA8IG1pblggPyB4MiA6IG1pblg7XG5cdFx0XHRtaW5YID0geDMgPCBtaW5YID8geDMgOiBtaW5YO1xuXHRcdFx0bWluWCA9IHg0IDwgbWluWCA/IHg0IDogbWluWDtcblx0XHRcdFxuXHRcdFx0bWluWSA9IHkxIDwgbWluWSA/IHkxIDogbWluWTtcblx0XHRcdG1pblkgPSB5MiA8IG1pblkgPyB5MiA6IG1pblk7XG5cdFx0XHRtaW5ZID0geTMgPCBtaW5ZID8geTMgOiBtaW5ZO1xuXHRcdFx0bWluWSA9IHk0IDwgbWluWSA/IHk0IDogbWluWTtcblx0XHRcdFxuXHRcdFx0bWF4WCA9IHgxID4gbWF4WCA/IHgxIDogbWF4WDtcblx0XHRcdG1heFggPSB4MiA+IG1heFggPyB4MiA6IG1heFg7XG5cdFx0XHRtYXhYID0geDMgPiBtYXhYID8geDMgOiBtYXhYO1xuXHRcdFx0bWF4WCA9IHg0ID4gbWF4WCA/IHg0IDogbWF4WDtcblx0XHRcdFxuXHRcdFx0bWF4WSA9IHkxID4gbWF4WSA/IHkxIDogbWF4WTtcblx0XHRcdG1heFkgPSB5MiA+IG1heFkgPyB5MiA6IG1heFk7XG5cdFx0XHRtYXhZID0geTMgPiBtYXhZID8geTMgOiBtYXhZO1xuXHRcdFx0bWF4WSA9IHk0ID4gbWF4WSA/IHk0IDogbWF4WTtcblx0XHR9XG5cblx0XHRkb1Rlc3QgPSBmYWxzZTtcblx0XHR0ZW1wT2JqZWN0ID0gdGVtcE9iamVjdC5faU5leHQ7XG5cblx0fVxuXHR3aGlsZSh0ZW1wT2JqZWN0ICE9IHRlc3RPYmplY3QpXG5cdFxuXHQvLyBtYXhpbXVtIGJvdW5kcyBpcyB0aGUgc2l6ZSBvZiB0aGUgc2NyZWVuLi5cblx0Ly9taW5YID0gbWluWCA+IDAgPyBtaW5YIDogMDtcblx0Ly9taW5ZID0gbWluWSA+IDAgPyBtaW5ZIDogMDtcblxuXHRkaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEueCA9IG1pblg7XG5cdGRpc3BsYXlPYmplY3QuZmlsdGVyQXJlYS55ID0gbWluWTtcblxuLy9cdGNvbnNvbGUubG9nKG1heFgrIFwiIDogXCIgKyBtaW5YKVxuXHRkaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEud2lkdGggPSBtYXhYIC0gbWluWDtcblx0ZGlzcGxheU9iamVjdC5maWx0ZXJBcmVhLmhlaWdodCA9IG1heFkgLSBtaW5ZO1xufVxuXG5QSVhJLkZpbHRlclRleHR1cmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICAvLyBuZXh0IHRpbWUgdG8gY3JlYXRlIGEgZnJhbWUgYnVmZmVyIGFuZCB0ZXh0dXJlXG5cdHRoaXMuZnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIHRoaXMudGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsICB0aGlzLnRleHR1cmUpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuXHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcblx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXHRnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRoaXMuZnJhbWVidWZmZXIgKTtcblx0XG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5mcmFtZUJ1ZmZlciApO1xuXHRnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZSwgMCk7XG5cdFxuXHR0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbn1cblxuUElYSS5GaWx0ZXJUZXh0dXJlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cblx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgIHRoaXMudGV4dHVyZSk7XG5cdGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgIHdpZHRoLCBoZWlnaHQsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuXHRcbn1cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIHRoZSBDYW52YXNSZW5kZXJlciBkcmF3cyB0aGUgc3RhZ2UgYW5kIGFsbCBpdHMgY29udGVudCBvbnRvIGEgMmQgY2FudmFzLiBUaGlzIHJlbmRlcmVyIHNob3VsZCBiZSB1c2VkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHdlYkdMLlxuICogRG9udCBmb3JnZXQgdG8gYWRkIHRoZSB2aWV3IHRvIHlvdXIgRE9NIG9yIHlvdSB3aWxsIG5vdCBzZWUgYW55dGhpbmcgOilcbiAqXG4gKiBAY2xhc3MgQ2FudmFzUmVuZGVyZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHdpZHRoPTAge051bWJlcn0gdGhlIHdpZHRoIG9mIHRoZSBjYW52YXMgdmlld1xuICogQHBhcmFtIGhlaWdodD0wIHtOdW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIGNhbnZhcyB2aWV3XG4gKiBAcGFyYW0gdmlldyB7Q2FudmFzfSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0gdHJhbnNwYXJlbnQ9ZmFsc2Uge0Jvb2xlYW59IHRoZSB0cmFuc3BhcmVuY3kgb2YgdGhlIHJlbmRlciB2aWV3LCBkZWZhdWx0IGZhbHNlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudClcbntcblx0dGhpcy50cmFuc3BhcmVudCA9IHRyYW5zcGFyZW50O1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIGNhbnZhcyB2aWV3XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB3aWR0aFxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgODAwXG5cdCAqL1xuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgODAwO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgdmlld1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgaGVpZ2h0XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCA2MDBcblx0ICovXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDYwMDtcblxuXHQvKipcblx0ICogVGhlIGNhbnZhcyBlbGVtZW50IHRoYXQgdGhlIGV2ZXJ5dGhpbmcgaXMgZHJhd24gdG9cblx0ICpcblx0ICogQHByb3BlcnR5IHZpZXdcblx0ICogQHR5cGUgQ2FudmFzXG5cdCAqL1xuXHR0aGlzLnZpZXcgPSB2aWV3IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XG5cblx0LyoqXG5cdCAqIFRoZSBjYW52YXMgY29udGV4dCB0aGF0IHRoZSBldmVyeXRoaW5nIGlzIGRyYXduIHRvXG5cdCAqIEBwcm9wZXJ0eSBjb250ZXh0XG5cdCAqIEB0eXBlIENhbnZhcyAyZCBDb250ZXh0XG5cdCAqL1xuXHR0aGlzLmNvbnRleHQgPSB0aGlzLnZpZXcuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG5cdHRoaXMucmVmcmVzaCA9IHRydWU7XG5cdC8vIGhhY2sgdG8gZW5hYmxlIHNvbWUgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIVxuXHQvL3RoaXMudmlldy5zdHlsZVtcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRleigwKVwiO1xuXHRcbiAgICB0aGlzLnZpZXcud2lkdGggPSB0aGlzLndpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7ICBcblx0dGhpcy5jb3VudCA9IDA7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ2FudmFzUmVuZGVyZXI7XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIGNhbnZhcyB2aWV3XG4gKlxuICogQG1ldGhvZCByZW5kZXJcbiAqIEBwYXJhbSBzdGFnZSB7U3RhZ2V9IHRoZSBTdGFnZSBlbGVtZW50IHRvIGJlIHJlbmRlcmVkXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKHN0YWdlKVxue1xuXHRcblx0Ly9zdGFnZS5fX2NoaWxkcmVuQWRkZWQgPSBbXTtcblx0Ly9zdGFnZS5fX2NoaWxkcmVuUmVtb3ZlZCA9IFtdO1xuXHRcblx0Ly8gdXBkYXRlIHRleHR1cmVzIGlmIG5lZWQgYmVcblx0UElYSS50ZXh0dXJlc1RvVXBkYXRlID0gW107XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcblx0XG5cdFBJWEkudmlzaWJsZUNvdW50Kys7XG5cdHN0YWdlLnVwZGF0ZVRyYW5zZm9ybSgpO1xuXHRcblx0Ly8gdXBkYXRlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yXG5cdGlmKHRoaXMudmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IhPXN0YWdlLmJhY2tncm91bmRDb2xvclN0cmluZyAmJiAhdGhpcy50cmFuc3BhcmVudCl0aGlzLnZpZXcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc3RhZ2UuYmFja2dyb3VuZENvbG9yU3RyaW5nO1xuXG5cdHRoaXMuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOyBcblx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcbiAgICB0aGlzLnJlbmRlckRpc3BsYXlPYmplY3Qoc3RhZ2UpO1xuICAgIC8vYXNcbiAgIFxuICAgIC8vIHJ1biBpbnRlcmFjdGlvbiFcblx0aWYoc3RhZ2UuaW50ZXJhY3RpdmUpXG5cdHtcblx0XHQvL25lZWQgdG8gYWRkIHNvbWUgZXZlbnRzIVxuXHRcdGlmKCFzdGFnZS5faW50ZXJhY3RpdmVFdmVudHNBZGRlZClcblx0XHR7XG5cdFx0XHRzdGFnZS5faW50ZXJhY3RpdmVFdmVudHNBZGRlZCA9IHRydWU7XG5cdFx0XHRzdGFnZS5pbnRlcmFjdGlvbk1hbmFnZXIuc2V0VGFyZ2V0KHRoaXMpO1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gcmVtb3ZlIGZyYW1lIHVwZGF0ZXMuLlxuXHRpZihQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzLmxlbmd0aCA+IDApXG5cdHtcblx0XHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzID0gW107XG5cdH1cblx0XG5cdFxufVxuXG4vKipcbiAqIHJlc2l6ZXMgdGhlIGNhbnZhcyB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgd2lkdGggYW5kIGhlaWdodFxuICpcbiAqIEBtZXRob2QgcmVzaXplXG4gKiBAcGFyYW0gd2lkdGgge051bWJlcn0gdGhlIG5ldyB3aWR0aCBvZiB0aGUgY2FudmFzIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhcyB2aWV3XG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpXG57XG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHR0aGlzLnZpZXcud2lkdGggPSB3aWR0aDtcblx0dGhpcy52aWV3LmhlaWdodCA9IGhlaWdodDtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgZGlzcGxheSBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHJlbmRlckRpc3BsYXlPYmplY3RcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fSBUaGUgZGlzcGxheU9iamVjdCB0byByZW5kZXJcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckRpc3BsYXlPYmplY3QgPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHQvLyBubyBsb2dlciByZWN1cnJzaXZlIVxuXHR2YXIgdHJhbnNmb3JtO1xuXHR2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcblx0XG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblx0XG5cdC8vIG9uZSB0aGUgZGlzcGxheSBvYmplY3QgaGl0cyB0aGlzLiB3ZSBjYW4gYnJlYWsgdGhlIGxvb3BcdFxuXHR2YXIgdGVzdE9iamVjdCA9IGRpc3BsYXlPYmplY3QubGFzdC5faU5leHQ7XG5cdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHRcblx0ZG9cdFxuXHR7XG5cdFx0dHJhbnNmb3JtID0gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybTtcblx0XHRcblx0XHRpZighZGlzcGxheU9iamVjdC52aXNpYmxlKVxuXHRcdHtcblx0XHRcdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3QuX2lOZXh0O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKCFkaXNwbGF5T2JqZWN0LnJlbmRlcmFibGUpXG5cdFx0e1xuXHRcdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX2lOZXh0O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0dmFyIGZyYW1lID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lO1xuXHRcdFx0XG5cdFx0XHRpZihmcmFtZSAmJiBmcmFtZS53aWR0aCAmJiBmcmFtZS5oZWlnaHQpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkaXNwbGF5T2JqZWN0LndvcmxkQWxwaGE7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZXh0LnNldFRyYW5zZm9ybSh0cmFuc2Zvcm1bMF0sIHRyYW5zZm9ybVszXSwgdHJhbnNmb3JtWzFdLCB0cmFuc2Zvcm1bNF0sIHRyYW5zZm9ybVsyXSwgdHJhbnNmb3JtWzVdKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0Y29udGV4dC5kcmF3SW1hZ2UoZGlzcGxheU9iamVjdC50ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUueCxcblx0XHRcdFx0XHRcdFx0XHQgICBmcmFtZS55LFxuXHRcdFx0XHRcdFx0XHRcdCAgIGZyYW1lLndpZHRoLFxuXHRcdFx0XHRcdFx0XHRcdCAgIGZyYW1lLmhlaWdodCxcblx0XHRcdFx0XHRcdFx0XHQgICAoZGlzcGxheU9iamVjdC5hbmNob3IueCkgKiAtZnJhbWUud2lkdGgsIFxuXHRcdFx0XHRcdFx0XHRcdCAgIChkaXNwbGF5T2JqZWN0LmFuY2hvci55KSAqIC1mcmFtZS5oZWlnaHQsXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUud2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUuaGVpZ2h0KTtcblx0XHRcdH1cdFx0XHRcdFx0ICAgXG5cdCAgIFx0fVxuXHQgICBcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuU3RyaXApXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtWzBdLCB0cmFuc2Zvcm1bM10sIHRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzRdLCB0cmFuc2Zvcm1bMl0sIHRyYW5zZm9ybVs1XSlcblx0XHRcdHRoaXMucmVuZGVyU3RyaXAoZGlzcGxheU9iamVjdCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybVswXSwgdHJhbnNmb3JtWzNdLCB0cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVs0XSwgdHJhbnNmb3JtWzJdLCB0cmFuc2Zvcm1bNV0pXG5cdFx0XHR0aGlzLnJlbmRlclRpbGluZ1Nwcml0ZShkaXNwbGF5T2JqZWN0KTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0IGluc3RhbmNlb2YgUElYSS5DdXN0b21SZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybVswXSwgdHJhbnNmb3JtWzNdLCB0cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVs0XSwgdHJhbnNmb3JtWzJdLCB0cmFuc2Zvcm1bNV0pO1xuXHRcdFx0ZGlzcGxheU9iamVjdC5yZW5kZXJDYW52YXModGhpcyk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuR3JhcGhpY3MpXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtWzBdLCB0cmFuc2Zvcm1bM10sIHRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzRdLCB0cmFuc2Zvcm1bMl0sIHRyYW5zZm9ybVs1XSlcblx0XHRcdFBJWEkuQ2FudmFzR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MoZGlzcGxheU9iamVjdCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuRmlsdGVyQmxvY2spXG5cdFx0e1xuXHRcdFx0aWYoZGlzcGxheU9iamVjdC5kYXRhIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcbiBcdFx0XHR7XG5cdFx0XHRcdHZhciBtYXNrID0gZGlzcGxheU9iamVjdC5kYXRhO1xuXG5cdFx0XHRcdGlmKGRpc3BsYXlPYmplY3Qub3Blbilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHZhciBjYWNoZUFscGhhID0gbWFzay5hbHBoYTtcblx0XHRcdFx0XHR2YXIgbWFza1RyYW5zZm9ybSA9IG1hc2sud29ybGRUcmFuc2Zvcm07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0obWFza1RyYW5zZm9ybVswXSwgbWFza1RyYW5zZm9ybVszXSwgbWFza1RyYW5zZm9ybVsxXSwgbWFza1RyYW5zZm9ybVs0XSwgbWFza1RyYW5zZm9ybVsyXSwgbWFza1RyYW5zZm9ybVs1XSlcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRtYXNrLndvcmxkQWxwaGEgPSAwLjU7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGV4dC53b3JsZEFscGhhID0gMDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRQSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzTWFzayhtYXNrLCBjb250ZXh0KTtcblx0XHRcdFx0XHRjb250ZXh0LmNsaXAoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRtYXNrLndvcmxkQWxwaGEgPSBjYWNoZUFscGhhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRleHQucmVzdG9yZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIG9ubHkgbWFza3Mgc3VwcG9ydGVkIHJpZ2h0IG5vdyFcblx0XHRcdH1cblx0XHR9XG5cdC8vXHRjb3VudCsrXG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX2lOZXh0O1xuXHRcdFxuXHRcdFxuXHR9XG5cdHdoaWxlKGRpc3BsYXlPYmplY3QgIT0gdGVzdE9iamVjdClcblxuXHRcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgZmxhdCBzdHJpcFxuICpcbiAqIEBtZXRob2QgcmVuZGVyU3RyaXBGbGF0XG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgU3RyaXAgdG8gcmVuZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdHJpcEZsYXQgPSBmdW5jdGlvbihzdHJpcClcbntcblx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdHZhciB2ZXJ0aWNpZXMgPSBzdHJpcC52ZXJ0aWNpZXM7XG5cdHZhciB1dnMgPSBzdHJpcC51dnM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdmVydGljaWVzLmxlbmd0aC8yO1xuXHR0aGlzLmNvdW50Kys7XG5cdFxuXHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRmb3IgKHZhciBpPTE7IGkgPCBsZW5ndGgtMjsgaSsrKSBcblx0e1xuXHRcdFxuXHRcdC8vIGRyYXcgc29tZSB0cmlhbmdsZXMhXG5cdFx0dmFyIGluZGV4ID0gaSoyO1xuXHRcdFxuXHRcdCB2YXIgeDAgPSB2ZXJ0aWNpZXNbaW5kZXhdLCAgIHgxID0gdmVydGljaWVzW2luZGV4KzJdLCB4MiA9IHZlcnRpY2llc1tpbmRleCs0XTtcbiBcdFx0IHZhciB5MCA9IHZlcnRpY2llc1tpbmRleCsxXSwgeTEgPSB2ZXJ0aWNpZXNbaW5kZXgrM10sIHkyID0gdmVydGljaWVzW2luZGV4KzVdO1xuIFx0XHQgXG5cdFx0Y29udGV4dC5tb3ZlVG8oeDAsIHkwKTtcblx0XHRjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xuXHRcdGNvbnRleHQubGluZVRvKHgyLCB5Mik7XG5cdFx0XG5cdH07XHRcblx0XG5cdGNvbnRleHQuZmlsbFN0eWxlID0gXCIjRkYwMDAwXCI7XG5cdGNvbnRleHQuZmlsbCgpO1xuXHRjb250ZXh0LmNsb3NlUGF0aCgpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSB0aWxpbmcgc3ByaXRlXG4gKlxuICogQG1ldGhvZCByZW5kZXJUaWxpbmdTcHJpdGVcbiAqIEBwYXJhbSBzcHJpdGUge1RpbGluZ1Nwcml0ZX0gVGhlIHRpbGluZ3Nwcml0ZSB0byByZW5kZXJcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdFxuXHRjb250ZXh0Lmdsb2JhbEFscGhhID0gc3ByaXRlLndvcmxkQWxwaGE7XG5cdFxuIFx0aWYoIXNwcml0ZS5fX3RpbGVQYXR0ZXJuKSBzcHJpdGUuX190aWxlUGF0dGVybiA9IGNvbnRleHQuY3JlYXRlUGF0dGVybihzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsIFwicmVwZWF0XCIpO1xuIFx0XG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFxuXHR2YXIgdGlsZVBvc2l0aW9uID0gc3ByaXRlLnRpbGVQb3NpdGlvbjtcblx0dmFyIHRpbGVTY2FsZSA9IHNwcml0ZS50aWxlU2NhbGU7XG5cdFxuICAgIC8vIG9mZnNldFxuICAgIGNvbnRleHQuc2NhbGUodGlsZVNjYWxlLngsdGlsZVNjYWxlLnkpO1xuICAgIGNvbnRleHQudHJhbnNsYXRlKHRpbGVQb3NpdGlvbi54LCB0aWxlUG9zaXRpb24ueSk7XG4gXHRcblx0Y29udGV4dC5maWxsU3R5bGUgPSBzcHJpdGUuX190aWxlUGF0dGVybjtcblx0Y29udGV4dC5maWxsUmVjdCgtdGlsZVBvc2l0aW9uLngsLXRpbGVQb3NpdGlvbi55LHNwcml0ZS53aWR0aCAvIHRpbGVTY2FsZS54LCBzcHJpdGUuaGVpZ2h0IC8gdGlsZVNjYWxlLnkpO1xuXHRcblx0Y29udGV4dC5zY2FsZSgxL3RpbGVTY2FsZS54LCAxL3RpbGVTY2FsZS55KTtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSgtdGlsZVBvc2l0aW9uLngsIC10aWxlUG9zaXRpb24ueSk7XG4gICAgXG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3RyaXBcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclN0cmlwXG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgU3RyaXAgdG8gcmVuZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwKVxue1xuXHR2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcblxuXHQvLyBkcmF3IHRyaWFuZ2xlcyEhXG5cdHZhciB2ZXJ0aWNpZXMgPSBzdHJpcC52ZXJ0aWNpZXM7XG5cdHZhciB1dnMgPSBzdHJpcC51dnM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdmVydGljaWVzLmxlbmd0aC8yO1xuXHR0aGlzLmNvdW50Kys7XG5cdGZvciAodmFyIGk9MTsgaSA8IGxlbmd0aC0yOyBpKyspIFxuXHR7XG5cdFx0XG5cdFx0Ly8gZHJhdyBzb21lIHRyaWFuZ2xlcyFcblx0XHR2YXIgaW5kZXggPSBpKjI7XG5cdFx0XG5cdFx0IHZhciB4MCA9IHZlcnRpY2llc1tpbmRleF0sICAgeDEgPSB2ZXJ0aWNpZXNbaW5kZXgrMl0sIHgyID0gdmVydGljaWVzW2luZGV4KzRdO1xuIFx0XHQgdmFyIHkwID0gdmVydGljaWVzW2luZGV4KzFdLCB5MSA9IHZlcnRpY2llc1tpbmRleCszXSwgeTIgPSB2ZXJ0aWNpZXNbaW5kZXgrNV07XG4gXHRcdCBcbiAgXHRcdCB2YXIgdTAgPSB1dnNbaW5kZXhdICogc3RyaXAudGV4dHVyZS53aWR0aCwgICB1MSA9IHV2c1tpbmRleCsyXSAqIHN0cmlwLnRleHR1cmUud2lkdGgsIHUyID0gdXZzW2luZGV4KzRdKiBzdHJpcC50ZXh0dXJlLndpZHRoO1xuICAgXHRcdCB2YXIgdjAgPSB1dnNbaW5kZXgrMV0qIHN0cmlwLnRleHR1cmUuaGVpZ2h0LCB2MSA9IHV2c1tpbmRleCszXSAqIHN0cmlwLnRleHR1cmUuaGVpZ2h0LCB2MiA9IHV2c1tpbmRleCs1XSogc3RyaXAudGV4dHVyZS5oZWlnaHQ7XG5cblxuXHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0Y29udGV4dC5tb3ZlVG8oeDAsIHkwKTtcblx0XHRjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xuXHRcdGNvbnRleHQubGluZVRvKHgyLCB5Mik7XG5cdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHRcblx0XHRjb250ZXh0LmNsaXAoKTtcblx0XHRcblx0XHRcbiAgICAgICAgLy8gQ29tcHV0ZSBtYXRyaXggdHJhbnNmb3JtXG4gICAgICAgIHZhciBkZWx0YSA9IHUwKnYxICsgdjAqdTIgKyB1MSp2MiAtIHYxKnUyIC0gdjAqdTEgLSB1MCp2MjtcbiAgICAgICAgdmFyIGRlbHRhX2EgPSB4MCp2MSArIHYwKngyICsgeDEqdjIgLSB2MSp4MiAtIHYwKngxIC0geDAqdjI7XG4gICAgICAgIHZhciBkZWx0YV9iID0gdTAqeDEgKyB4MCp1MiArIHUxKngyIC0geDEqdTIgLSB4MCp1MSAtIHUwKngyO1xuICAgICAgICB2YXIgZGVsdGFfYyA9IHUwKnYxKngyICsgdjAqeDEqdTIgKyB4MCp1MSp2MiAtIHgwKnYxKnUyIC0gdjAqdTEqeDIgLSB1MCp4MSp2MjtcbiAgICAgICAgdmFyIGRlbHRhX2QgPSB5MCp2MSArIHYwKnkyICsgeTEqdjIgLSB2MSp5MiAtIHYwKnkxIC0geTAqdjI7XG4gICAgICAgIHZhciBkZWx0YV9lID0gdTAqeTEgKyB5MCp1MiArIHUxKnkyIC0geTEqdTIgLSB5MCp1MSAtIHUwKnkyO1xuICAgICAgICB2YXIgZGVsdGFfZiA9IHUwKnYxKnkyICsgdjAqeTEqdTIgKyB5MCp1MSp2MiAtIHkwKnYxKnUyIC0gdjAqdTEqeTIgLSB1MCp5MSp2Mjtcblx0XHRcblx0XHRcblx0XHRcblx0XHQgICAgXG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGRlbHRhX2EvZGVsdGEsIGRlbHRhX2QvZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgZGVsdGFfYi9kZWx0YSwgZGVsdGFfZS9kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YV9jL2RlbHRhLCBkZWx0YV9mL2RlbHRhKTtcbiAgICAgICAgICAgICAgICAgXG5cdFx0Y29udGV4dC5kcmF3SW1hZ2Uoc3RyaXAudGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsIDAsIDApO1xuXHQgIFx0Y29udGV4dC5yZXN0b3JlKCk7XG5cdH07XG5cdFxufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblxuLyoqXG4gKiBBIHNldCBvZiBmdW5jdGlvbnMgdXNlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyIHRvIGRyYXcgdGhlIHByaW1pdGl2ZSBncmFwaGljcyBkYXRhXG4gKlxuICogQGNsYXNzIENhbnZhc0dyYXBoaWNzXG4gKi9cblBJWEkuQ2FudmFzR3JhcGhpY3MgPSBmdW5jdGlvbigpXG57XG5cbn1cblxuXG4vKlxuICogUmVuZGVycyB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVuZGVyR3JhcGhpY3NcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dDJEfVxuICovXG5QSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzID0gZnVuY3Rpb24oZ3JhcGhpY3MsIGNvbnRleHQpXG57XG5cdHZhciB3b3JsZEFscGhhID0gZ3JhcGhpY3Mud29ybGRBbHBoYTtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCBncmFwaGljcy5ncmFwaGljc0RhdGEubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgZGF0YSA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YVtpXTtcblx0XHR2YXIgcG9pbnRzID0gZGF0YS5wb2ludHM7XG5cblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5saW5lQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG5cblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IGRhdGEubGluZVdpZHRoO1xuXG5cdFx0aWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuUE9MWSlcblx0XHR7XG5cdFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG5cdFx0XHRjb250ZXh0Lm1vdmVUbyhwb2ludHNbMF0sIHBvaW50c1sxXSk7XG5cblx0XHRcdGZvciAodmFyIGo9MTsgaiA8IHBvaW50cy5sZW5ndGgvMjsgaisrKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0LmxpbmVUbyhwb2ludHNbaiAqIDJdLCBwb2ludHNbaiAqIDIgKyAxXSk7XG5cdFx0XHR9XG5cblx0ICAgICAgXHQvLyBpZiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnQgYXJlIHRoZSBzYW1lIGNsb3NlIHRoZSBwYXRoIC0gbXVjaCBuZWF0ZXIgOilcblx0ICAgICAgXHRpZihwb2ludHNbMF0gPT0gcG9pbnRzW3BvaW50cy5sZW5ndGgtMl0gJiYgcG9pbnRzWzFdID09IHBvaW50c1twb2ludHMubGVuZ3RoLTFdKVxuXHQgICAgICBcdHtcblx0ICAgICAgXHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdCAgICAgIFx0fVxuXG5cdFx0XHRpZihkYXRhLmZpbGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmZpbGxBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5maWxsQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG4gICAgICBcdFx0XHRjb250ZXh0LmZpbGwoKTtcblx0XHRcdH1cblx0XHRcdGlmKGRhdGEubGluZVdpZHRoKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gZGF0YS5saW5lQWxwaGEgKiB3b3JsZEFscGhhO1xuICAgICAgXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5SRUNUKVxuXHRcdHtcblxuXHRcdFx0aWYoZGF0YS5maWxsQ29sb3IgfHwgZGF0YS5maWxsQ29sb3IgPT09IDApXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmZpbGxBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5maWxsQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFJlY3QocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdKTtcblxuXHRcdFx0fVxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmxpbmVBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuc3Ryb2tlUmVjdChwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM10pO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuQ0lSQylcblx0XHR7XG5cdFx0XHQvLyBUT0RPIC0gbmVlZCB0byBiZSBVbmRlZmluZWQhXG4gICAgICBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQuYXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sMCwyKk1hdGguUEkpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblxuXHRcdFx0aWYoZGF0YS5maWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gZGF0YS5maWxsQWxwaGEgKiB3b3JsZEFscGhhO1xuXHRcdFx0XHRjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yID0gJyMnICsgKCcwMDAwMCcgKyAoIGRhdGEuZmlsbENvbG9yIHwgMCkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpO1xuICAgICAgXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0XHR9XG5cdFx0XHRpZihkYXRhLmxpbmVXaWR0aClcblx0XHRcdHtcblx0XHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IGRhdGEubGluZUFscGhhICogd29ybGRBbHBoYTtcbiAgICAgIFx0XHRcdGNvbnRleHQuc3Ryb2tlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuRUxJUClcblx0XHR7XG5cblx0XHRcdC8vIGVsaXBzZSBjb2RlIHRha2VuIGZyb206IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE3Mjc5OC9ob3ctdG8tZHJhdy1hbi1vdmFsLWluLWh0bWw1LWNhbnZhc1xuXG5cdFx0XHR2YXIgZWxpcHNlRGF0YSA9ICBkYXRhLnBvaW50cztcblxuXHRcdFx0dmFyIHcgPSBlbGlwc2VEYXRhWzJdICogMjtcblx0XHRcdHZhciBoID0gZWxpcHNlRGF0YVszXSAqIDI7XG5cblx0XHRcdHZhciB4ID0gZWxpcHNlRGF0YVswXSAtIHcvMjtcblx0XHRcdHZhciB5ID0gZWxpcHNlRGF0YVsxXSAtIGgvMjtcblxuICAgICAgXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cblx0XHRcdHZhciBrYXBwYSA9IC41NTIyODQ4LFxuXHRcdFx0b3ggPSAodyAvIDIpICoga2FwcGEsIC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IGhvcml6b250YWxcblx0XHRcdG95ID0gKGggLyAyKSAqIGthcHBhLCAvLyBjb250cm9sIHBvaW50IG9mZnNldCB2ZXJ0aWNhbFxuXHRcdFx0eGUgPSB4ICsgdywgICAgICAgICAgIC8vIHgtZW5kXG5cdFx0XHR5ZSA9IHkgKyBoLCAgICAgICAgICAgLy8geS1lbmRcblx0XHRcdHhtID0geCArIHcgLyAyLCAgICAgICAvLyB4LW1pZGRsZVxuXHRcdFx0eW0gPSB5ICsgaCAvIDI7ICAgICAgIC8vIHktbWlkZGxlXG5cblx0XHRcdGNvbnRleHQubW92ZVRvKHgsIHltKTtcblx0XHRcdGNvbnRleHQuYmV6aWVyQ3VydmVUbyh4LCB5bSAtIG95LCB4bSAtIG94LCB5LCB4bSwgeSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeG0gKyBveCwgeSwgeGUsIHltIC0gb3ksIHhlLCB5bSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeGUsIHltICsgb3ksIHhtICsgb3gsIHllLCB4bSwgeWUpO1xuXHRcdFx0Y29udGV4dC5iZXppZXJDdXJ2ZVRvKHhtIC0gb3gsIHllLCB4LCB5bSArIG95LCB4LCB5bSk7XG5cblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cblx0XHRcdGlmKGRhdGEuZmlsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IGRhdGEuZmlsbEFscGhhICogd29ybGRBbHBoYTtcblx0XHRcdFx0Y29udGV4dC5maWxsU3R5bGUgPSBjb2xvciA9ICcjJyArICgnMDAwMDAnICsgKCBkYXRhLmZpbGxDb2xvciB8IDApLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KTtcbiAgICAgIFx0XHRcdGNvbnRleHQuZmlsbCgpO1xuXHRcdFx0fVxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmxpbmVBbHBoYSAqIHdvcmxkQWxwaGE7XG4gICAgICBcdFx0XHRjb250ZXh0LnN0cm9rZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xufVxuXG4vKlxuICogUmVuZGVycyBhIGdyYXBoaWNzIG1hc2tcbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZW5kZXJHcmFwaGljc01hc2tcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dDJEfVxuICovXG5QSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzTWFzayA9IGZ1bmN0aW9uKGdyYXBoaWNzLCBjb250ZXh0KVxue1xuXHR2YXIgd29ybGRBbHBoYSA9IGdyYXBoaWNzLndvcmxkQWxwaGE7XG5cblx0dmFyIGxlbiA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YS5sZW5ndGg7XG5cdGlmKGxlbiA9PT0gMClyZXR1cm47XG5cblx0aWYobGVuID4gMSlcblx0e1xuXHRcdGxlbiA9IDE7XG5cdFx0Y29uc29sZS5sb2coXCJQaXhpLmpzIHdhcm5pbmc6IG1hc2tzIGluIGNhbnZhcyBjYW4gb25seSBtYXNrIHVzaW5nIHRoZSBmaXJzdCBwYXRoIGluIHRoZSBncmFwaGljcyBvYmplY3RcIilcblx0fVxuXG5cdGZvciAodmFyIGk9MDsgaSA8IDE7IGkrKylcblx0e1xuXHRcdHZhciBkYXRhID0gZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhW2ldO1xuXHRcdHZhciBwb2ludHMgPSBkYXRhLnBvaW50cztcblxuXHRcdGlmKGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLlBPTFkpXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQubW92ZVRvKHBvaW50c1swXSwgcG9pbnRzWzFdKTtcblxuXHRcdFx0Zm9yICh2YXIgaj0xOyBqIDwgcG9pbnRzLmxlbmd0aC8yOyBqKyspXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQubGluZVRvKHBvaW50c1tqICogMl0sIHBvaW50c1tqICogMiArIDFdKTtcblx0XHRcdH1cblxuXHQgICAgICBcdC8vIGlmIHRoZSBmaXJzdCBhbmQgbGFzdCBwb2ludCBhcmUgdGhlIHNhbWUgY2xvc2UgdGhlIHBhdGggLSBtdWNoIG5lYXRlciA6KVxuXHQgICAgICBcdGlmKHBvaW50c1swXSA9PSBwb2ludHNbcG9pbnRzLmxlbmd0aC0yXSAmJiBwb2ludHNbMV0gPT0gcG9pbnRzW3BvaW50cy5sZW5ndGgtMV0pXG5cdCAgICAgIFx0e1xuXHQgICAgICBcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0ICAgICAgXHR9XG5cblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5SRUNUKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHRjb250ZXh0LnJlY3QocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdKTtcblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuQ0lSQylcblx0XHR7XG5cdFx0XHQvLyBUT0RPIC0gbmVlZCB0byBiZSBVbmRlZmluZWQhXG4gICAgICBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQuYXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sMCwyKk1hdGguUEkpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5FTElQKVxuXHRcdHtcblxuXHRcdFx0Ly8gZWxpcHNlIGNvZGUgdGFrZW4gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTcyNzk4L2hvdy10by1kcmF3LWFuLW92YWwtaW4taHRtbDUtY2FudmFzXG5cdFx0XHR2YXIgZWxpcHNlRGF0YSA9ICBkYXRhLnBvaW50cztcblxuXHRcdFx0dmFyIHcgPSBlbGlwc2VEYXRhWzJdICogMjtcblx0XHRcdHZhciBoID0gZWxpcHNlRGF0YVszXSAqIDI7XG5cblx0XHRcdHZhciB4ID0gZWxpcHNlRGF0YVswXSAtIHcvMjtcblx0XHRcdHZhciB5ID0gZWxpcHNlRGF0YVsxXSAtIGgvMjtcblxuICAgICAgXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cblx0XHRcdHZhciBrYXBwYSA9IC41NTIyODQ4LFxuXHRcdFx0b3ggPSAodyAvIDIpICoga2FwcGEsIC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IGhvcml6b250YWxcblx0XHRcdG95ID0gKGggLyAyKSAqIGthcHBhLCAvLyBjb250cm9sIHBvaW50IG9mZnNldCB2ZXJ0aWNhbFxuXHRcdFx0eGUgPSB4ICsgdywgICAgICAgICAgIC8vIHgtZW5kXG5cdFx0XHR5ZSA9IHkgKyBoLCAgICAgICAgICAgLy8geS1lbmRcblx0XHRcdHhtID0geCArIHcgLyAyLCAgICAgICAvLyB4LW1pZGRsZVxuXHRcdFx0eW0gPSB5ICsgaCAvIDI7ICAgICAgIC8vIHktbWlkZGxlXG5cblx0XHRcdGNvbnRleHQubW92ZVRvKHgsIHltKTtcblx0XHRcdGNvbnRleHQuYmV6aWVyQ3VydmVUbyh4LCB5bSAtIG95LCB4bSAtIG94LCB5LCB4bSwgeSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeG0gKyBveCwgeSwgeGUsIHltIC0gb3ksIHhlLCB5bSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeGUsIHltICsgb3ksIHhtICsgb3gsIHllLCB4bSwgeWUpO1xuXHRcdFx0Y29udGV4dC5iZXppZXJDdXJ2ZVRvKHhtIC0gb3gsIHllLCB4LCB5bSArIG95LCB4LCB5bSk7XG5cdFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdH1cblxuXG5cdH07XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFRoZSBHcmFwaGljcyBjbGFzcyBjb250YWlucyBhIHNldCBvZiBtZXRob2RzIHRoYXQgeW91IGNhbiB1c2UgdG8gY3JlYXRlIHByaW1pdGl2ZSBzaGFwZXMgYW5kIGxpbmVzLlxuICogSXQgaXMgaW1wb3J0YW50IHRvIGtub3cgdGhhdCB3aXRoIHRoZSB3ZWJHTCByZW5kZXJlciBvbmx5IHNpbXBsZSBwb2x5cyBjYW4gYmUgZmlsbGVkIGF0IHRoaXMgc3RhZ2VcbiAqIENvbXBsZXggcG9seXMgd2lsbCBub3QgYmUgZmlsbGVkLiBIZXJlcyBhbiBleGFtcGxlIG9mIGEgY29tcGxleCBwb2x5OiBodHRwOi8vd3d3Lmdvb2Rib3lkaWdpdGFsLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxMy8wNi9jb21wbGV4UG9seWdvbi5wbmdcbiAqXG4gKiBAY2xhc3MgR3JhcGhpY3NcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RDb250YWluZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5QSVhJLkdyYXBoaWNzID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIuY2FsbCggdGhpcyApO1xuXG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYWxwaGEgb2YgdGhlIGZpbGwgb2YgdGhpcyBncmFwaGljcyBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBmaWxsQWxwaGFcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKi9cblx0dGhpcy5maWxsQWxwaGEgPSAxO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIGFueSBsaW5lcyBkcmF3blxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGxpbmVXaWR0aFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqL1xuXHR0aGlzLmxpbmVXaWR0aCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29sb3Igb2YgYW55IGxpbmVzIGRyYXduXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgbGluZUNvbG9yXG4gICAgICogQHR5cGUgU3RyaW5nXG4gICAgICovXG5cdHRoaXMubGluZUNvbG9yID0gXCJibGFja1wiO1xuXG4gICAgLyoqXG4gICAgICogR3JhcGhpY3MgZGF0YVxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGdyYXBoaWNzRGF0YVxuICAgICAqIEB0eXBlIEFycmF5XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblx0dGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgcGF0aFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGN1cnJlbnRQYXRoXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtwb2ludHM6W119O1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5HcmFwaGljcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlICk7XG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuR3JhcGhpY3M7XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgbGluZSBzdHlsZSB1c2VkIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIEdyYXBoaWNzIG1ldGhvZHMgc3VjaCBhcyB0aGUgbGluZVRvKCkgbWV0aG9kIG9yIHRoZSBkcmF3Q2lyY2xlKCkgbWV0aG9kLlxuICpcbiAqIEBtZXRob2QgbGluZVN0eWxlXG4gKiBAcGFyYW0gbGluZVdpZHRoIHtOdW1iZXJ9IHdpZHRoIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3QncyBzdG9yZWQgc3R5bGVcbiAqIEBwYXJhbSBjb2xvciB7TnVtYmVyfSBjb2xvciBvZiB0aGUgbGluZSB0byBkcmF3LCB3aWxsIHVwZGF0ZSB0aGUgb2JqZWN0J3Mgc3RvcmVkIHN0eWxlXG4gKiBAcGFyYW0gYWxwaGEge051bWJlcn0gYWxwaGEgb2YgdGhlIGxpbmUgdG8gZHJhdywgd2lsbCB1cGRhdGUgdGhlIG9iamVjdCdzIHN0b3JlZCBzdHlsZVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5saW5lU3R5bGUgPSBmdW5jdGlvbihsaW5lV2lkdGgsIGNvbG9yLCBhbHBoYSlcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5saW5lV2lkdGggPSBsaW5lV2lkdGggfHwgMDtcblx0dGhpcy5saW5lQ29sb3IgPSBjb2xvciB8fCAwO1xuXHR0aGlzLmxpbmVBbHBoYSA9IChhbHBoYSA9PSB1bmRlZmluZWQpID8gMSA6IGFscGhhO1xuXG5cdHRoaXMuY3VycmVudFBhdGggPSB7bGluZVdpZHRoOnRoaXMubGluZVdpZHRoLCBsaW5lQ29sb3I6dGhpcy5saW5lQ29sb3IsIGxpbmVBbHBoYTp0aGlzLmxpbmVBbHBoYSxcblx0XHRcdFx0XHRcdGZpbGxDb2xvcjp0aGlzLmZpbGxDb2xvciwgZmlsbEFscGhhOnRoaXMuZmlsbEFscGhhLCBmaWxsOnRoaXMuZmlsbGluZywgcG9pbnRzOltdLCB0eXBlOlBJWEkuR3JhcGhpY3MuUE9MWX07XG5cblx0dGhpcy5ncmFwaGljc0RhdGEucHVzaCh0aGlzLmN1cnJlbnRQYXRoKTtcbn1cblxuLyoqXG4gKiBNb3ZlcyB0aGUgY3VycmVudCBkcmF3aW5nIHBvc2l0aW9uIHRvICh4LCB5KS5cbiAqXG4gKiBAbWV0aG9kIG1vdmVUb1xuICogQHBhcmFtIHgge051bWJlcn0gdGhlIFggY29vcmQgdG8gbW92ZSB0b1xuICogQHBhcmFtIHkge051bWJlcn0gdGhlIFkgY29vcmQgdG8gbW92ZSB0b1xuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KVxue1xuXHRpZih0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT0gMCl0aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLCBwb2ludHM6W10sIHR5cGU6UElYSS5HcmFwaGljcy5QT0xZfTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5wdXNoKHgsIHkpO1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG59XG5cbi8qKlxuICogRHJhd3MgYSBsaW5lIHVzaW5nIHRoZSBjdXJyZW50IGxpbmUgc3R5bGUgZnJvbSB0aGUgY3VycmVudCBkcmF3aW5nIHBvc2l0aW9uIHRvICh4LCB5KTtcbiAqIHRoZSBjdXJyZW50IGRyYXdpbmcgcG9zaXRpb24gaXMgdGhlbiBzZXQgdG8gKHgsIHkpLlxuICpcbiAqIEBtZXRob2QgbGluZVRvXG4gKiBAcGFyYW0geCB7TnVtYmVyfSB0aGUgWCBjb29yZCB0byBkcmF3IHRvXG4gKiBAcGFyYW0geSB7TnVtYmVyfSB0aGUgWSBjb29yZCB0byBkcmF3IHRvXG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmxpbmVUbyA9IGZ1bmN0aW9uKHgsIHkpXG57XG5cdHRoaXMuY3VycmVudFBhdGgucG9pbnRzLnB1c2goeCwgeSk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIHNpbXBsZSBvbmUtY29sb3IgZmlsbCB0aGF0IHN1YnNlcXVlbnQgY2FsbHMgdG8gb3RoZXIgR3JhcGhpY3MgbWV0aG9kc1xuICogKHN1Y2ggYXMgbGluZVRvKCkgb3IgZHJhd0NpcmNsZSgpKSB1c2Ugd2hlbiBkcmF3aW5nLlxuICpcbiAqIEBtZXRob2QgYmVnaW5GaWxsXG4gKiBAcGFyYW0gY29sb3Ige3VpbnR9IHRoZSBjb2xvciBvZiB0aGUgZmlsbFxuICogQHBhcmFtIGFscGhhIHtOdW1iZXJ9IHRoZSBhbHBoYVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5iZWdpbkZpbGwgPSBmdW5jdGlvbihjb2xvciwgYWxwaGEpXG57XG5cdHRoaXMuZmlsbGluZyA9IHRydWU7XG5cdHRoaXMuZmlsbENvbG9yID0gY29sb3IgfHwgMDtcblx0dGhpcy5maWxsQWxwaGEgPSAoYWxwaGEgPT0gdW5kZWZpbmVkKSA/IDEgOiBhbHBoYTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgZmlsbCB0byB0aGUgbGluZXMgYW5kIHNoYXBlcyB0aGF0IHdlcmUgYWRkZWQgc2luY2UgdGhlIGxhc3QgY2FsbCB0byB0aGUgYmVnaW5GaWxsKCkgbWV0aG9kLlxuICpcbiAqIEBtZXRob2QgZW5kRmlsbFxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5lbmRGaWxsID0gZnVuY3Rpb24oKVxue1xuXHR0aGlzLmZpbGxpbmcgPSBmYWxzZTtcblx0dGhpcy5maWxsQ29sb3IgPSBudWxsO1xuXHR0aGlzLmZpbGxBbHBoYSA9IDE7XG59XG5cbi8qKlxuICogQG1ldGhvZCBkcmF3UmVjdFxuICpcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSB0b3AtbGVmdCBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdG9wLWxlZnQgb2YgdGhlIHJlY3RhbmdsZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5kcmF3UmVjdCA9IGZ1bmN0aW9uKCB4LCB5LCB3aWR0aCwgaGVpZ2h0IClcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLFxuXHRcdFx0XHRcdFx0cG9pbnRzOlt4LCB5LCB3aWR0aCwgaGVpZ2h0XSwgdHlwZTpQSVhJLkdyYXBoaWNzLlJFQ1R9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIERyYXdzIGEgY2lyY2xlLlxuICpcbiAqIEBtZXRob2QgZHJhd0NpcmNsZVxuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAqIEBwYXJhbSByYWRpdXMge051bWJlcn0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiggeCwgeSwgcmFkaXVzKVxue1xuXHRpZih0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT0gMCl0aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoID0ge2xpbmVXaWR0aDp0aGlzLmxpbmVXaWR0aCwgbGluZUNvbG9yOnRoaXMubGluZUNvbG9yLCBsaW5lQWxwaGE6dGhpcy5saW5lQWxwaGEsXG5cdFx0XHRcdFx0XHRmaWxsQ29sb3I6dGhpcy5maWxsQ29sb3IsIGZpbGxBbHBoYTp0aGlzLmZpbGxBbHBoYSwgZmlsbDp0aGlzLmZpbGxpbmcsXG5cdFx0XHRcdFx0XHRwb2ludHM6W3gsIHksIHJhZGl1cywgcmFkaXVzXSwgdHlwZTpQSVhJLkdyYXBoaWNzLkNJUkN9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIERyYXdzIGFuIGVsaXBzZS5cbiAqXG4gKiBAbWV0aG9kIGRyYXdFbGlwc2VcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9XG4gKiBAcGFyYW0geSB7TnVtYmVyfVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9XG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmRyYXdFbGlwc2UgPSBmdW5jdGlvbiggeCwgeSwgd2lkdGgsIGhlaWdodClcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLFxuXHRcdFx0XHRcdFx0cG9pbnRzOlt4LCB5LCB3aWR0aCwgaGVpZ2h0XSwgdHlwZTpQSVhJLkdyYXBoaWNzLkVMSVB9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgZ3JhcGhpY3MgdGhhdCB3ZXJlIGRyYXduIHRvIHRoaXMgR3JhcGhpY3Mgb2JqZWN0LCBhbmQgcmVzZXRzIGZpbGwgYW5kIGxpbmUgc3R5bGUgc2V0dGluZ3MuXG4gKlxuICogQG1ldGhvZCBjbGVhclxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5saW5lV2lkdGggPSAwO1xuXHR0aGlzLmZpbGxpbmcgPSBmYWxzZTtcblxuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5jbGVhckRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuXHR0aGlzLmJvdW5kcyA9IG51bGwvL25ldyBQSVhJLlJlY3RhbmdsZSgpO1xufVxuXG5cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLnVwZGF0ZUZpbHRlckJvdW5kcyA9IGZ1bmN0aW9uKClcbntcblx0aWYoIXRoaXMuYm91bmRzKVxuXHR7XG5cdFx0dmFyIG1pblggPSBJbmZpbml0eTtcblx0XHR2YXIgbWF4WCA9IC1JbmZpbml0eTtcblxuXHRcdHZhciBtaW5ZID0gSW5maW5pdHk7XG5cdFx0dmFyIG1heFkgPSAtSW5maW5pdHk7XG5cblx0XHR2YXIgcG9pbnRzLCB4LCB5O1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdyYXBoaWNzRGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XG5cblx0XHRcdHZhciBkYXRhID0gdGhpcy5ncmFwaGljc0RhdGFbaV07XG5cdFx0XHR2YXIgdHlwZSA9IGRhdGEudHlwZTtcblx0XHRcdHZhciBsaW5lV2lkdGggPSBkYXRhLmxpbmVXaWR0aDtcblxuXHRcdFx0cG9pbnRzID0gZGF0YS5wb2ludHM7XG5cblx0XHRcdGlmKHR5cGUgPT09IFBJWEkuR3JhcGhpY3MuUkVDVClcblx0XHRcdHtcblx0XHRcdFx0eCA9IHBvaW50cy54IC0gbGluZVdpZHRoLzI7XG5cdFx0XHRcdHkgPSBwb2ludHMueSAtIGxpbmVXaWR0aC8yO1xuXHRcdFx0XHR2YXIgd2lkdGggPSBwb2ludHMud2lkdGggKyBsaW5lV2lkdGg7XG5cdFx0XHRcdHZhciBoZWlnaHQgPSBwb2ludHMuaGVpZ2h0ICsgbGluZVdpZHRoO1xuXG5cdFx0XHRcdG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuXHRcdFx0XHRtYXhYID0geCArIHdpZHRoID4gbWF4WCA/IHggKyB3aWR0aCA6IG1heFg7XG5cblx0XHRcdFx0bWluWSA9IHkgPCBtaW5ZID8geCA6IG1pblk7XG5cdFx0XHRcdG1heFkgPSB5ICsgaGVpZ2h0ID4gbWF4WSA/IHkgKyBoZWlnaHQgOiBtYXhZO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZih0eXBlID09PSBQSVhJLkdyYXBoaWNzLkNJUkMgfHwgdHlwZSA9PT0gUElYSS5HcmFwaGljcy5FTElQKVxuXHRcdFx0e1xuXHRcdFx0XHR4ID0gcG9pbnRzLng7XG5cdFx0XHRcdHkgPSBwb2ludHMueTtcblx0XHRcdFx0dmFyIHJhZGl1cyA9IHBvaW50cy5yYWRpdXMgKyBsaW5lV2lkdGgvMjtcblx0XHRcdFx0XG5cdFx0XHRcdG1pblggPSB4IC0gcmFkaXVzIDwgbWluWCA/IHggLSByYWRpdXMgOiBtaW5YO1xuXHRcdFx0XHRtYXhYID0geCArIHJhZGl1cyA+IG1heFggPyB4ICsgcmFkaXVzIDogbWF4WDtcblxuXHRcdFx0XHRtaW5ZID0geSAtIHJhZGl1cyA8IG1pblkgPyB5IC0gcmFkaXVzIDogbWluWTtcblx0XHRcdFx0bWF4WSA9IHkgKyByYWRpdXMgPiBtYXhZID8geSArIHJhZGl1cyA6IG1heFk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFBPTFlcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKz0yKSBcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHggPSBwb2ludHNbal07XG5cdFx0XHRcdFx0eSA9IHBvaW50c1tqKzFdO1xuXG5cdFx0XHRcdFx0bWluWCA9IHgtbGluZVdpZHRoIDwgbWluWCA/IHgtbGluZVdpZHRoIDogbWluWDtcblx0XHRcdFx0XHRtYXhYID0geCtsaW5lV2lkdGggPiBtYXhYID8geCtsaW5lV2lkdGggOiBtYXhYO1xuXG5cdFx0XHRcdFx0bWluWSA9IHktbGluZVdpZHRoIDwgbWluWSA/IHktbGluZVdpZHRoIDogbWluWTtcblx0XHRcdFx0XHRtYXhZID0geStsaW5lV2lkdGggPiBtYXhZID8geStsaW5lV2lkdGggOiBtYXhZO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdHRoaXMuYm91bmRzID0gbmV3IFBJWEkuUmVjdGFuZ2xlKG1pblgsIG1pblksIG1heFggLSBtaW5YLCBtYXhZIC0gbWluWSk7XG5cblx0fVxuXG4vL1x0Y29uc29sZS5sb2codGhpcy5ib3VuZHMpO1xufVxuXG4vLyBTT01FIFRZUEVTOlxuUElYSS5HcmFwaGljcy5QT0xZID0gMDtcblBJWEkuR3JhcGhpY3MuUkVDVCA9IDE7XG5QSVhJLkdyYXBoaWNzLkNJUkMgPSAyO1xuUElYSS5HcmFwaGljcy5FTElQID0gMztcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vXG4gKi9cblxuUElYSS5TdHJpcCA9IGZ1bmN0aW9uKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKCB0aGlzICk7XG5cdHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG5cdHRoaXMuYmxlbmRNb2RlID0gUElYSS5ibGVuZE1vZGVzLk5PUk1BTDtcblxuXHR0cnlcblx0e1xuXHRcdHRoaXMudXZzID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMSxcblx0XHRcdFx0MSwgMSxcblx0XHRcdFx0MSwgMCwgMCwxXSk7XG5cblx0XHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsXG5cdFx0XHRcdFx0XHQgIDAsMCxcblx0XHRcdFx0XHRcdCAgMCwwLCAwLFxuXHRcdFx0XHRcdFx0ICAwLCAwXSk7XG5cblx0XHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDEsIDFdKTtcblxuXHRcdHRoaXMuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgM10pO1xuXHR9XG5cdGNhdGNoKGVycm9yKVxuXHR7XG5cdFx0dGhpcy51dnMgPSBbMCwgMSxcblx0XHRcdFx0MSwgMSxcblx0XHRcdFx0MSwgMCwgMCwxXTtcblxuXHRcdHRoaXMudmVydGljaWVzID0gWzAsIDAsXG5cdFx0XHRcdFx0XHQgIDAsMCxcblx0XHRcdFx0XHRcdCAgMCwwLCAwLFxuXHRcdFx0XHRcdFx0ICAwLCAwXTtcblxuXHRcdHRoaXMuY29sb3JzID0gWzEsIDEsIDEsIDFdO1xuXG5cdFx0dGhpcy5pbmRpY2VzID0gWzAsIDEsIDIsIDNdO1xuXHR9XG5cblxuXHQvKlxuXHR0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoKVxuKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuXHQvLyBsb2FkIHRoZSB0ZXh0dXJlIVxuXHRpZih0ZXh0dXJlLmJhc2VUZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdHRoaXMud2lkdGggICA9IHRoaXMudGV4dHVyZS5mcmFtZS53aWR0aDtcblx0XHR0aGlzLmhlaWdodCAgPSB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuXHRcdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCA9IHRoaXMub25UZXh0dXJlVXBkYXRlLmJpbmQodGhpcyk7XG5cdFx0dGhpcy50ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoICd1cGRhdGUnLCB0aGlzLm9uVGV4dHVyZVVwZGF0ZUJpbmQgKTtcblx0fVxuXG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlN0cmlwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3RyaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5TdHJpcDtcblxuUElYSS5TdHJpcC5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vVE9ETyBTRVQgVEhFIFRFWFRVUkVTXG5cdC8vVE9ETyBWSVNJQklMSVRZXG5cblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy53aWR0aCAgID0gdGV4dHVyZS5mcmFtZS53aWR0aDtcblx0dGhpcy5oZWlnaHQgID0gdGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xufVxuXG5QSVhJLlN0cmlwLnByb3RvdHlwZS5vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbihldmVudClcbntcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG4vLyBzb21lIGhlbHBlciBmdW5jdGlvbnMuLlxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tL1xuICovXG5cblxuUElYSS5Sb3BlID0gZnVuY3Rpb24odGV4dHVyZSwgcG9pbnRzKVxue1xuXHRQSVhJLlN0cmlwLmNhbGwoIHRoaXMsIHRleHR1cmUgKTtcblx0dGhpcy5wb2ludHMgPSBwb2ludHM7XG5cblx0dHJ5XG5cdHtcblx0XHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoIHBvaW50cy5sZW5ndGggKiA0KTtcblx0XHR0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoIHBvaW50cy5sZW5ndGggKiA0KTtcblx0XHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoICBwb2ludHMubGVuZ3RoICogMik7XG5cdFx0dGhpcy5pbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KCBwb2ludHMubGVuZ3RoICogMik7XG5cdH1cblx0Y2F0Y2goZXJyb3IpXG5cdHtcblx0XHR0aGlzLnZlcnRpY2llcyA9IHZlcnRpY2llc1xuXG5cdFx0dGhpcy51dnMgPSB1dnNcblx0XHR0aGlzLmNvbG9ycyA9IGNvbG9yc1xuXHRcdHRoaXMuaW5kaWNlcyA9IGluZGljZXNcblx0fVxuXG5cdHRoaXMucmVmcmVzaCgpO1xufVxuXG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlJvcGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5TdHJpcC5wcm90b3R5cGUgKTtcblBJWEkuUm9wZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlJvcGU7XG5cblBJWEkuUm9wZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKClcbntcblx0dmFyIHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgMSlyZXR1cm47XG5cblx0dmFyIHV2cyA9IHRoaXMudXZzXG5cdHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuXHR2YXIgY29sb3JzID0gdGhpcy5jb2xvcnM7XG5cblx0dmFyIGxhc3RQb2ludCA9IHBvaW50c1swXTtcblx0dmFyIG5leHRQb2ludDtcblx0dmFyIHBlcnAgPSB7eDowLCB5OjB9O1xuXHR2YXIgcG9pbnQgPSBwb2ludHNbMF07XG5cblx0dGhpcy5jb3VudC09MC4yO1xuXG5cblx0dXZzWzBdID0gMFxuXHR1dnNbMV0gPSAxXG5cdHV2c1syXSA9IDBcblx0dXZzWzNdID0gMVxuXG5cdGNvbG9yc1swXSA9IDE7XG5cdGNvbG9yc1sxXSA9IDE7XG5cblx0aW5kaWNlc1swXSA9IDA7XG5cdGluZGljZXNbMV0gPSAxO1xuXG5cdHZhciB0b3RhbCA9IHBvaW50cy5sZW5ndGg7XG5cblx0Zm9yICh2YXIgaSA9ICAxOyBpIDwgdG90YWw7IGkrKylcblx0e1xuXG5cdFx0dmFyIHBvaW50ID0gcG9pbnRzW2ldO1xuXHRcdHZhciBpbmRleCA9IGkgKiA0O1xuXHRcdC8vIHRpbWUgdG8gZG8gc29tZSBzbWFydCBkcmF3aW5nIVxuXHRcdHZhciBhbW91bnQgPSBpLyh0b3RhbC0xKVxuXG5cdFx0aWYoaSUyKVxuXHRcdHtcblx0XHRcdHV2c1tpbmRleF0gPSBhbW91bnQ7XG5cdFx0XHR1dnNbaW5kZXgrMV0gPSAwO1xuXG5cdFx0XHR1dnNbaW5kZXgrMl0gPSBhbW91bnRcblx0XHRcdHV2c1tpbmRleCszXSA9IDFcblxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dXZzW2luZGV4XSA9IGFtb3VudFxuXHRcdFx0dXZzW2luZGV4KzFdID0gMFxuXG5cdFx0XHR1dnNbaW5kZXgrMl0gPSBhbW91bnRcblx0XHRcdHV2c1tpbmRleCszXSA9IDFcblx0XHR9XG5cblx0XHRpbmRleCA9IGkgKiAyO1xuXHRcdGNvbG9yc1tpbmRleF0gPSAxO1xuXHRcdGNvbG9yc1tpbmRleCsxXSA9IDE7XG5cblx0XHRpbmRleCA9IGkgKiAyO1xuXHRcdGluZGljZXNbaW5kZXhdID0gaW5kZXg7XG5cdFx0aW5kaWNlc1tpbmRleCArIDFdID0gaW5kZXggKyAxO1xuXG5cdFx0bGFzdFBvaW50ID0gcG9pbnQ7XG5cdH1cbn1cblxuUElYSS5Sb3BlLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbigpXG57XG5cblx0dmFyIHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgMSlyZXR1cm47XG5cblx0dmFyIHZlcnRpY2llcyA9IHRoaXMudmVydGljaWVzXG5cblx0dmFyIGxhc3RQb2ludCA9IHBvaW50c1swXTtcblx0dmFyIG5leHRQb2ludDtcblx0dmFyIHBlcnAgPSB7eDowLCB5OjB9O1xuXHR2YXIgcG9pbnQgPSBwb2ludHNbMF07XG5cblx0dGhpcy5jb3VudC09MC4yO1xuXG5cdHZlcnRpY2llc1swXSA9IHBvaW50LnggKyBwZXJwLnhcblx0dmVydGljaWVzWzFdID0gcG9pbnQueSArIHBlcnAueSAvLysgMjAwXG5cdHZlcnRpY2llc1syXSA9IHBvaW50LnggLSBwZXJwLnhcblx0dmVydGljaWVzWzNdID0gcG9pbnQueSAtIHBlcnAueS8vKzIwMFxuXHQvLyB0aW1lIHRvIGRvIHNvbWUgc21hcnQgZHJhd2luZyFcblxuXHR2YXIgdG90YWwgPSBwb2ludHMubGVuZ3RoO1xuXG5cdGZvciAodmFyIGkgPSAgMTsgaSA8IHRvdGFsOyBpKyspXG5cdHtcblxuXHRcdHZhciBwb2ludCA9IHBvaW50c1tpXTtcblx0XHR2YXIgaW5kZXggPSBpICogNDtcblxuXHRcdGlmKGkgPCBwb2ludHMubGVuZ3RoLTEpXG5cdFx0e1xuXHRcdFx0bmV4dFBvaW50ID0gcG9pbnRzW2krMV07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRuZXh0UG9pbnQgPSBwb2ludFxuXHRcdH1cblxuXHRcdHBlcnAueSA9IC0obmV4dFBvaW50LnggLSBsYXN0UG9pbnQueCk7XG5cdFx0cGVycC54ID0gbmV4dFBvaW50LnkgLSBsYXN0UG9pbnQueTtcblxuXHRcdHZhciByYXRpbyA9ICgxIC0gKGkgLyAodG90YWwtMSkpKSAqIDEwO1xuXHRcdFx0XHRpZihyYXRpbyA+IDEpcmF0aW8gPSAxO1xuXG5cdFx0dmFyIHBlcnBMZW5ndGggPSBNYXRoLnNxcnQocGVycC54ICogcGVycC54ICsgcGVycC55ICogcGVycC55KTtcblx0XHR2YXIgbnVtID0gdGhpcy50ZXh0dXJlLmhlaWdodC8yLy8oMjAgKyBNYXRoLmFicyhNYXRoLnNpbigoaSArIHRoaXMuY291bnQpICogMC4zKSAqIDUwKSApKiByYXRpbztcblx0XHRwZXJwLnggLz0gcGVycExlbmd0aDtcblx0XHRwZXJwLnkgLz0gcGVycExlbmd0aDtcblxuXHRcdHBlcnAueCAqPSBudW07XG5cdFx0cGVycC55ICo9IG51bTtcblxuXHRcdHZlcnRpY2llc1tpbmRleF0gPSBwb2ludC54ICsgcGVycC54XG5cdFx0dmVydGljaWVzW2luZGV4KzFdID0gcG9pbnQueSArIHBlcnAueVxuXHRcdHZlcnRpY2llc1tpbmRleCsyXSA9IHBvaW50LnggLSBwZXJwLnhcblx0XHR2ZXJ0aWNpZXNbaW5kZXgrM10gPSBwb2ludC55IC0gcGVycC55XG5cblx0XHRsYXN0UG9pbnQgPSBwb2ludDtcblx0fVxuXG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwoIHRoaXMgKTtcbn1cblxuUElYSS5Sb3BlLnByb3RvdHlwZS5zZXRUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cblxuXG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vXG4gKi9cblxuLyoqXG4gKiBBIHRpbGluZyBzcHJpdGUgaXMgYSBmYXN0IHdheSBvZiByZW5kZXJpbmcgYSB0aWxpbmcgaW1hZ2VcbiAqXG4gKiBAY2xhc3MgVGlsaW5nU3ByaXRlXG4gKiBAZXh0ZW5kcyBEaXNwbGF5T2JqZWN0Q29udGFpbmVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfSB0aGUgdGV4dHVyZSBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9ICB0aGUgd2lkdGggb2YgdGhlIHRpbGluZyBzcHJpdGVcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIGhlaWdodCBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICovXG5QSVhJLlRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKCB0aGlzICk7XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIHRoYXQgdGhlIHNwcml0ZSBpcyB1c2luZ1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgdGV4dHVyZVxuXHQgKiBAdHlwZSBUZXh0dXJlXG5cdCAqL1xuXHR0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHRpbGluZyBzcHJpdGVcblx0ICpcblx0ICogQHByb3BlcnR5IHdpZHRoXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0aWxpbmcgc3ByaXRlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqL1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuXHQvKipcblx0ICogVGhlIHNjYWxpbmcgb2YgdGhlIGltYWdlIHRoYXQgaXMgYmVpbmcgdGlsZWRcblx0ICpcblx0ICogQHByb3BlcnR5IHRpbGVTY2FsZVxuXHQgKiBAdHlwZSBQb2ludFxuXHQgKi9cblx0dGhpcy50aWxlU2NhbGUgPSBuZXcgUElYSS5Qb2ludCgxLDEpO1xuXG5cdC8qKlxuXHQgKiBUaGUgb2Zmc2V0IHBvc2l0aW9uIG9mIHRoZSBpbWFnZSB0aGF0IGlzIGJlaW5nIHRpbGVkXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0aWxlUG9zaXRpb25cblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMudGlsZVBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQoMCwwKTtcblxuXHR0aGlzLnJlbmRlcmFibGUgPSB0cnVlO1xuXG5cdHRoaXMuYmxlbmRNb2RlID0gUElYSS5ibGVuZE1vZGVzLk5PUk1BTFxufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZSApO1xuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5UaWxpbmdTcHJpdGU7XG5cbi8qKlxuICogU2V0cyB0aGUgdGV4dHVyZSBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICpcbiAqIEBtZXRob2Qgc2V0VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSBQSVhJIHRleHR1cmUgdGhhdCBpcyBkaXNwbGF5ZWQgYnkgdGhlIHNwcml0ZVxuICovXG5QSVhJLlRpbGluZ1Nwcml0ZS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vVE9ETyBTRVQgVEhFIFRFWFRVUkVTXG5cdC8vVE9ETyBWSVNJQklMSVRZXG5cblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIGZyYW1lXG4gKlxuICogQG1ldGhvZCBvblRleHR1cmVVcGRhdGVcbiAqIEBwYXJhbSBldmVudFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlLm9uVGV4dHVyZVVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuXHR0aGlzLnVwZGF0ZUZyYW1lID0gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICogYmFzZWQgb24gcGl4aSBpbXBhY3Qgc3BpbmUgaW1wbGVtZW50YXRpb24gbWFkZSBieSBFZW1lbGkgS2Vsb2tvcnBpIChAZWtlbG9rb3JwaSkgaHR0cHM6Ly9naXRodWIuY29tL2VrZWxva29ycGlcbiAqXG4gKiBBd2Vzb21lIEpTIHJ1biB0aW1lIHByb3ZpZGVkIGJ5IEVzb3RlcmljU29mdHdhcmVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc290ZXJpY1NvZnR3YXJlL3NwaW5lLXJ1bnRpbWVzXG4gKlxuICovXG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGVuYWJsZXMgdGhlIHlvdSB0byBpbXBvcnQgYW5kIHJ1biB5b3VyIHNwaW5lIGFuaW1hdGlvbnMgaW4gcGl4aS5cbiAqIFNwaW5lIGFuaW1hdGlvbiBkYXRhIG5lZWRzIHRvIGJlIGxvYWRlZCB1c2luZyB0aGUgUElYSS5Bc3NldExvYWRlciBvciBQSVhJLlNwaW5lTG9hZGVyIGJlZm9yZSBpdCBjYW4gYmUgdXNlZCBieSB0aGlzIGNsYXNzXG4gKiBTZWUgZXhhbXBsZSAxMiAoaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2V4YW1wbGVzLzEyLykgdG8gc2VlIGEgd29ya2luZyBleGFtcGxlIGFuZCBjaGVjayBvdXQgdGhlIHNvdXJjZVxuICpcbiAqIEBjbGFzcyBTcGluZVxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIHNwaW5lIGFuaW0gZmlsZSB0byBiZSB1c2VkXG4gKi9cblBJWEkuU3BpbmUgPSBmdW5jdGlvbiAodXJsKSB7XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKHRoaXMpO1xuXG5cdHRoaXMuc3BpbmVEYXRhID0gUElYSS5BbmltQ2FjaGVbdXJsXTtcblxuXHRpZiAoIXRoaXMuc3BpbmVEYXRhKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3BpbmUgZGF0YSBtdXN0IGJlIHByZWxvYWRlZCB1c2luZyBQSVhJLlNwaW5lTG9hZGVyIG9yIFBJWEkuQXNzZXRMb2FkZXI6IFwiICsgdXJsKTtcblx0fVxuXG5cdHRoaXMuc2tlbGV0b24gPSBuZXcgc3BpbmUuU2tlbGV0b24odGhpcy5zcGluZURhdGEpO1xuXHR0aGlzLnNrZWxldG9uLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKCk7XG5cblx0dGhpcy5zdGF0ZURhdGEgPSBuZXcgc3BpbmUuQW5pbWF0aW9uU3RhdGVEYXRhKHRoaXMuc3BpbmVEYXRhKTtcblx0dGhpcy5zdGF0ZSA9IG5ldyBzcGluZS5BbmltYXRpb25TdGF0ZSh0aGlzLnN0YXRlRGF0YSk7XG5cblx0dGhpcy5zbG90Q29udGFpbmVycyA9IFtdO1xuXG5cdGZvciAodmFyIGkgPSAwLCBuID0gdGhpcy5za2VsZXRvbi5kcmF3T3JkZXIubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdFx0dmFyIHNsb3QgPSB0aGlzLnNrZWxldG9uLmRyYXdPcmRlcltpXTtcblx0XHR2YXIgYXR0YWNobWVudCA9IHNsb3QuYXR0YWNobWVudDtcblx0XHR2YXIgc2xvdENvbnRhaW5lciA9IG5ldyBQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIoKTtcblx0XHR0aGlzLnNsb3RDb250YWluZXJzLnB1c2goc2xvdENvbnRhaW5lcik7XG5cdFx0dGhpcy5hZGRDaGlsZChzbG90Q29udGFpbmVyKTtcblx0XHRpZiAoIShhdHRhY2htZW50IGluc3RhbmNlb2Ygc3BpbmUuUmVnaW9uQXR0YWNobWVudCkpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHR2YXIgc3ByaXRlTmFtZSA9IGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZTtcblx0XHR2YXIgc3ByaXRlID0gdGhpcy5jcmVhdGVTcHJpdGUoc2xvdCwgYXR0YWNobWVudC5yZW5kZXJlck9iamVjdCk7XG5cdFx0c2xvdC5jdXJyZW50U3ByaXRlID0gc3ByaXRlO1xuXHRcdHNsb3QuY3VycmVudFNwcml0ZU5hbWUgPSBzcHJpdGVOYW1lO1xuXHRcdHNsb3RDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcblx0fVxufTtcblxuUElYSS5TcGluZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUpO1xuUElYSS5TcGluZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwaW5lO1xuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3BpbmUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5sYXN0VGltZSA9IHRoaXMubGFzdFRpbWUgfHwgRGF0ZS5ub3coKTtcblx0dmFyIHRpbWVEZWx0YSA9IChEYXRlLm5vdygpIC0gdGhpcy5sYXN0VGltZSkgKiAwLjAwMTtcblx0dGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG5cdHRoaXMuc3RhdGUudXBkYXRlKHRpbWVEZWx0YSk7XG5cdHRoaXMuc3RhdGUuYXBwbHkodGhpcy5za2VsZXRvbik7XG5cdHRoaXMuc2tlbGV0b24udXBkYXRlV29ybGRUcmFuc2Zvcm0oKTtcblxuXHR2YXIgZHJhd09yZGVyID0gdGhpcy5za2VsZXRvbi5kcmF3T3JkZXI7XG5cdGZvciAodmFyIGkgPSAwLCBuID0gZHJhd09yZGVyLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBzbG90ID0gZHJhd09yZGVyW2ldO1xuXHRcdHZhciBhdHRhY2htZW50ID0gc2xvdC5hdHRhY2htZW50O1xuXHRcdHZhciBzbG90Q29udGFpbmVyID0gdGhpcy5zbG90Q29udGFpbmVyc1tpXTtcblx0XHRpZiAoIShhdHRhY2htZW50IGluc3RhbmNlb2Ygc3BpbmUuUmVnaW9uQXR0YWNobWVudCkpIHtcblx0XHRcdHNsb3RDb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QpIHtcblx0XHRcdGlmICghc2xvdC5jdXJyZW50U3ByaXRlTmFtZSB8fCBzbG90LmN1cnJlbnRTcHJpdGVOYW1lICE9IGF0dGFjaG1lbnQubmFtZSkge1xuXHRcdFx0XHR2YXIgc3ByaXRlTmFtZSA9IGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZTtcblx0XHRcdFx0aWYgKHNsb3QuY3VycmVudFNwcml0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0c2xvdC5jdXJyZW50U3ByaXRlLnZpc2libGUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzbG90LnNwcml0ZXMgPSBzbG90LnNwcml0ZXMgfHwge307XG5cdFx0XHRcdGlmIChzbG90LnNwcml0ZXNbc3ByaXRlTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHNsb3Quc3ByaXRlc1tzcHJpdGVOYW1lXS52aXNpYmxlID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgc3ByaXRlID0gdGhpcy5jcmVhdGVTcHJpdGUoc2xvdCwgYXR0YWNobWVudC5yZW5kZXJlck9iamVjdCk7XG5cdFx0XHRcdFx0c2xvdENvbnRhaW5lci5hZGRDaGlsZChzcHJpdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNsb3QuY3VycmVudFNwcml0ZSA9IHNsb3Quc3ByaXRlc1tzcHJpdGVOYW1lXTtcblx0XHRcdFx0c2xvdC5jdXJyZW50U3ByaXRlTmFtZSA9IHNwcml0ZU5hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNsb3RDb250YWluZXIudmlzaWJsZSA9IHRydWU7XG5cblx0XHR2YXIgYm9uZSA9IHNsb3QuYm9uZTtcblxuXHRcdHNsb3RDb250YWluZXIucG9zaXRpb24ueCA9IGJvbmUud29ybGRYICsgYXR0YWNobWVudC54ICogYm9uZS5tMDAgKyBhdHRhY2htZW50LnkgKiBib25lLm0wMTtcblx0XHRzbG90Q29udGFpbmVyLnBvc2l0aW9uLnkgPSBib25lLndvcmxkWSArIGF0dGFjaG1lbnQueCAqIGJvbmUubTEwICsgYXR0YWNobWVudC55ICogYm9uZS5tMTE7XG5cdFx0c2xvdENvbnRhaW5lci5zY2FsZS54ID0gYm9uZS53b3JsZFNjYWxlWDtcblx0XHRzbG90Q29udGFpbmVyLnNjYWxlLnkgPSBib25lLndvcmxkU2NhbGVZO1xuXG5cdFx0c2xvdENvbnRhaW5lci5yb3RhdGlvbiA9IC0oc2xvdC5ib25lLndvcmxkUm90YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcblx0fVxuXG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG59O1xuXG5cblBJWEkuU3BpbmUucHJvdG90eXBlLmNyZWF0ZVNwcml0ZSA9IGZ1bmN0aW9uIChzbG90LCBkZXNjcmlwdG9yKSB7XG5cdHZhciBuYW1lID0gUElYSS5UZXh0dXJlQ2FjaGVbZGVzY3JpcHRvci5uYW1lXSA/IGRlc2NyaXB0b3IubmFtZSA6IGRlc2NyaXB0b3IubmFtZSArIFwiLnBuZ1wiO1xuXHR2YXIgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKFBJWEkuVGV4dHVyZS5mcm9tRnJhbWUobmFtZSkpO1xuXHRzcHJpdGUuc2NhbGUgPSBkZXNjcmlwdG9yLnNjYWxlO1xuXHRzcHJpdGUucm90YXRpb24gPSBkZXNjcmlwdG9yLnJvdGF0aW9uO1xuXHRzcHJpdGUuYW5jaG9yLnggPSBzcHJpdGUuYW5jaG9yLnkgPSAwLjU7XG5cblx0c2xvdC5zcHJpdGVzID0gc2xvdC5zcHJpdGVzIHx8IHt9O1xuXHRzbG90LnNwcml0ZXNbZGVzY3JpcHRvci5uYW1lXSA9IHNwcml0ZTtcblx0cmV0dXJuIHNwcml0ZTtcbn07XG5cbi8qXG4gKiBBd2Vzb21lIEpTIHJ1biB0aW1lIHByb3ZpZGVkIGJ5IEVzb3RlcmljU29mdHdhcmVcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vRXNvdGVyaWNTb2Z0d2FyZS9zcGluZS1ydW50aW1lc1xuICpcbiAqL1xuXG52YXIgc3BpbmUgPSB7fTtcblxuc3BpbmUuQm9uZURhdGEgPSBmdW5jdGlvbiAobmFtZSwgcGFyZW50KSB7XG5cdHRoaXMubmFtZSA9IG5hbWU7XG5cdHRoaXMucGFyZW50ID0gcGFyZW50O1xufTtcbnNwaW5lLkJvbmVEYXRhLnByb3RvdHlwZSA9IHtcblx0bGVuZ3RoOiAwLFxuXHR4OiAwLCB5OiAwLFxuXHRyb3RhdGlvbjogMCxcblx0c2NhbGVYOiAxLCBzY2FsZVk6IDFcbn07XG5cbnNwaW5lLlNsb3REYXRhID0gZnVuY3Rpb24gKG5hbWUsIGJvbmVEYXRhKSB7XG5cdHRoaXMubmFtZSA9IG5hbWU7XG5cdHRoaXMuYm9uZURhdGEgPSBib25lRGF0YTtcbn07XG5zcGluZS5TbG90RGF0YS5wcm90b3R5cGUgPSB7XG5cdHI6IDEsIGc6IDEsIGI6IDEsIGE6IDEsXG5cdGF0dGFjaG1lbnROYW1lOiBudWxsXG59O1xuXG5zcGluZS5Cb25lID0gZnVuY3Rpb24gKGJvbmVEYXRhLCBwYXJlbnQpIHtcblx0dGhpcy5kYXRhID0gYm9uZURhdGE7XG5cdHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHR0aGlzLnNldFRvU2V0dXBQb3NlKCk7XG59O1xuc3BpbmUuQm9uZS55RG93biA9IGZhbHNlO1xuc3BpbmUuQm9uZS5wcm90b3R5cGUgPSB7XG5cdHg6IDAsIHk6IDAsXG5cdHJvdGF0aW9uOiAwLFxuXHRzY2FsZVg6IDEsIHNjYWxlWTogMSxcblx0bTAwOiAwLCBtMDE6IDAsIHdvcmxkWDogMCwgLy8gYSBiIHhcblx0bTEwOiAwLCBtMTE6IDAsIHdvcmxkWTogMCwgLy8gYyBkIHlcblx0d29ybGRSb3RhdGlvbjogMCxcblx0d29ybGRTY2FsZVg6IDEsIHdvcmxkU2NhbGVZOiAxLFxuXHR1cGRhdGVXb3JsZFRyYW5zZm9ybTogZnVuY3Rpb24gKGZsaXBYLCBmbGlwWSkge1xuXHRcdHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcblx0XHRpZiAocGFyZW50ICE9IG51bGwpIHtcblx0XHRcdHRoaXMud29ybGRYID0gdGhpcy54ICogcGFyZW50Lm0wMCArIHRoaXMueSAqIHBhcmVudC5tMDEgKyBwYXJlbnQud29ybGRYO1xuXHRcdFx0dGhpcy53b3JsZFkgPSB0aGlzLnggKiBwYXJlbnQubTEwICsgdGhpcy55ICogcGFyZW50Lm0xMSArIHBhcmVudC53b3JsZFk7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVYID0gcGFyZW50LndvcmxkU2NhbGVYICogdGhpcy5zY2FsZVg7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVZID0gcGFyZW50LndvcmxkU2NhbGVZICogdGhpcy5zY2FsZVk7XG5cdFx0XHR0aGlzLndvcmxkUm90YXRpb24gPSBwYXJlbnQud29ybGRSb3RhdGlvbiArIHRoaXMucm90YXRpb247XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMud29ybGRYID0gdGhpcy54O1xuXHRcdFx0dGhpcy53b3JsZFkgPSB0aGlzLnk7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVYID0gdGhpcy5zY2FsZVg7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVZID0gdGhpcy5zY2FsZVk7XG5cdFx0XHR0aGlzLndvcmxkUm90YXRpb24gPSB0aGlzLnJvdGF0aW9uO1xuXHRcdH1cblx0XHR2YXIgcmFkaWFucyA9IHRoaXMud29ybGRSb3RhdGlvbiAqIE1hdGguUEkgLyAxODA7XG5cdFx0dmFyIGNvcyA9IE1hdGguY29zKHJhZGlhbnMpO1xuXHRcdHZhciBzaW4gPSBNYXRoLnNpbihyYWRpYW5zKTtcblx0XHR0aGlzLm0wMCA9IGNvcyAqIHRoaXMud29ybGRTY2FsZVg7XG5cdFx0dGhpcy5tMTAgPSBzaW4gKiB0aGlzLndvcmxkU2NhbGVYO1xuXHRcdHRoaXMubTAxID0gLXNpbiAqIHRoaXMud29ybGRTY2FsZVk7XG5cdFx0dGhpcy5tMTEgPSBjb3MgKiB0aGlzLndvcmxkU2NhbGVZO1xuXHRcdGlmIChmbGlwWCkge1xuXHRcdFx0dGhpcy5tMDAgPSAtdGhpcy5tMDA7XG5cdFx0XHR0aGlzLm0wMSA9IC10aGlzLm0wMTtcblx0XHR9XG5cdFx0aWYgKGZsaXBZKSB7XG5cdFx0XHR0aGlzLm0xMCA9IC10aGlzLm0xMDtcblx0XHRcdHRoaXMubTExID0gLXRoaXMubTExO1xuXHRcdH1cblx0XHRpZiAoc3BpbmUuQm9uZS55RG93bikge1xuXHRcdFx0dGhpcy5tMTAgPSAtdGhpcy5tMTA7XG5cdFx0XHR0aGlzLm0xMSA9IC10aGlzLm0xMTtcblx0XHR9XG5cdH0sXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cdFx0dGhpcy54ID0gZGF0YS54O1xuXHRcdHRoaXMueSA9IGRhdGEueTtcblx0XHR0aGlzLnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjtcblx0XHR0aGlzLnNjYWxlWCA9IGRhdGEuc2NhbGVYO1xuXHRcdHRoaXMuc2NhbGVZID0gZGF0YS5zY2FsZVk7XG5cdH1cbn07XG5cbnNwaW5lLlNsb3QgPSBmdW5jdGlvbiAoc2xvdERhdGEsIHNrZWxldG9uLCBib25lKSB7XG5cdHRoaXMuZGF0YSA9IHNsb3REYXRhO1xuXHR0aGlzLnNrZWxldG9uID0gc2tlbGV0b247XG5cdHRoaXMuYm9uZSA9IGJvbmU7XG5cdHRoaXMuc2V0VG9TZXR1cFBvc2UoKTtcbn07XG5zcGluZS5TbG90LnByb3RvdHlwZSA9IHtcblx0cjogMSwgZzogMSwgYjogMSwgYTogMSxcblx0X2F0dGFjaG1lbnRUaW1lOiAwLFxuXHRhdHRhY2htZW50OiBudWxsLFxuXHRzZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoYXR0YWNobWVudCkge1xuXHRcdHRoaXMuYXR0YWNobWVudCA9IGF0dGFjaG1lbnQ7XG5cdFx0dGhpcy5fYXR0YWNobWVudFRpbWUgPSB0aGlzLnNrZWxldG9uLnRpbWU7XG5cdH0sXG5cdHNldEF0dGFjaG1lbnRUaW1lOiBmdW5jdGlvbiAodGltZSkge1xuXHRcdHRoaXMuX2F0dGFjaG1lbnRUaW1lID0gdGhpcy5za2VsZXRvbi50aW1lIC0gdGltZTtcblx0fSxcblx0Z2V0QXR0YWNobWVudFRpbWU6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5za2VsZXRvbi50aW1lIC0gdGhpcy5fYXR0YWNobWVudFRpbWU7XG5cdH0sXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cdFx0dGhpcy5yID0gZGF0YS5yO1xuXHRcdHRoaXMuZyA9IGRhdGEuZztcblx0XHR0aGlzLmIgPSBkYXRhLmI7XG5cdFx0dGhpcy5hID0gZGF0YS5hO1xuXG5cdFx0dmFyIHNsb3REYXRhcyA9IHRoaXMuc2tlbGV0b24uZGF0YS5zbG90cztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHNsb3REYXRhcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdGlmIChzbG90RGF0YXNbaV0gPT0gZGF0YSkge1xuXHRcdFx0XHR0aGlzLnNldEF0dGFjaG1lbnQoIWRhdGEuYXR0YWNobWVudE5hbWUgPyBudWxsIDogdGhpcy5za2VsZXRvbi5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgoaSwgZGF0YS5hdHRhY2htZW50TmFtZSkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbnNwaW5lLlNraW4gPSBmdW5jdGlvbiAobmFtZSkge1xuXHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR0aGlzLmF0dGFjaG1lbnRzID0ge307XG59O1xuc3BpbmUuU2tpbi5wcm90b3R5cGUgPSB7XG5cdGFkZEF0dGFjaG1lbnQ6IGZ1bmN0aW9uIChzbG90SW5kZXgsIG5hbWUsIGF0dGFjaG1lbnQpIHtcblx0XHR0aGlzLmF0dGFjaG1lbnRzW3Nsb3RJbmRleCArIFwiOlwiICsgbmFtZV0gPSBhdHRhY2htZW50O1xuXHR9LFxuXHRnZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoc2xvdEluZGV4LCBuYW1lKSB7XG5cdFx0cmV0dXJuIHRoaXMuYXR0YWNobWVudHNbc2xvdEluZGV4ICsgXCI6XCIgKyBuYW1lXTtcblx0fSxcblx0X2F0dGFjaEFsbDogZnVuY3Rpb24gKHNrZWxldG9uLCBvbGRTa2luKSB7XG5cdFx0Zm9yICh2YXIga2V5IGluIG9sZFNraW4uYXR0YWNobWVudHMpIHtcblx0XHRcdHZhciBjb2xvbiA9IGtleS5pbmRleE9mKFwiOlwiKTtcblx0XHRcdHZhciBzbG90SW5kZXggPSBwYXJzZUludChrZXkuc3Vic3RyaW5nKDAsIGNvbG9uKSk7XG5cdFx0XHR2YXIgbmFtZSA9IGtleS5zdWJzdHJpbmcoY29sb24gKyAxKTtcblx0XHRcdHZhciBzbG90ID0gc2tlbGV0b24uc2xvdHNbc2xvdEluZGV4XTtcblx0XHRcdGlmIChzbG90LmF0dGFjaG1lbnQgJiYgc2xvdC5hdHRhY2htZW50Lm5hbWUgPT0gbmFtZSkge1xuXHRcdFx0XHR2YXIgYXR0YWNobWVudCA9IHRoaXMuZ2V0QXR0YWNobWVudChzbG90SW5kZXgsIG5hbWUpO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudCkgc2xvdC5zZXRBdHRhY2htZW50KGF0dGFjaG1lbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuc3BpbmUuQW5pbWF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIHRpbWVsaW5lcywgZHVyYXRpb24pIHtcblx0dGhpcy5uYW1lID0gbmFtZTtcblx0dGhpcy50aW1lbGluZXMgPSB0aW1lbGluZXM7XG5cdHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbn07XG5zcGluZS5BbmltYXRpb24ucHJvdG90eXBlID0ge1xuXHRhcHBseTogZnVuY3Rpb24gKHNrZWxldG9uLCB0aW1lLCBsb29wKSB7XG5cdFx0aWYgKGxvb3AgJiYgdGhpcy5kdXJhdGlvbiAhPSAwKSB0aW1lICU9IHRoaXMuZHVyYXRpb247XG5cdFx0dmFyIHRpbWVsaW5lcyA9IHRoaXMudGltZWxpbmVzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gdGltZWxpbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdHRpbWVsaW5lc1tpXS5hcHBseShza2VsZXRvbiwgdGltZSwgMSk7XG5cdH0sXG5cdG1peDogZnVuY3Rpb24gKHNrZWxldG9uLCB0aW1lLCBsb29wLCBhbHBoYSkge1xuXHRcdGlmIChsb29wICYmIHRoaXMuZHVyYXRpb24gIT0gMCkgdGltZSAlPSB0aGlzLmR1cmF0aW9uO1xuXHRcdHZhciB0aW1lbGluZXMgPSB0aGlzLnRpbWVsaW5lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHRpbWVsaW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHR0aW1lbGluZXNbaV0uYXBwbHkoc2tlbGV0b24sIHRpbWUsIGFscGhhKTtcblx0fVxufTtcblxuc3BpbmUuYmluYXJ5U2VhcmNoID0gZnVuY3Rpb24gKHZhbHVlcywgdGFyZ2V0LCBzdGVwKSB7XG5cdHZhciBsb3cgPSAwO1xuXHR2YXIgaGlnaCA9IE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIHN0ZXApIC0gMjtcblx0aWYgKGhpZ2ggPT0gMCkgcmV0dXJuIHN0ZXA7XG5cdHZhciBjdXJyZW50ID0gaGlnaCA+Pj4gMTtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRpZiAodmFsdWVzWyhjdXJyZW50ICsgMSkgKiBzdGVwXSA8PSB0YXJnZXQpXG5cdFx0XHRsb3cgPSBjdXJyZW50ICsgMTtcblx0XHRlbHNlXG5cdFx0XHRoaWdoID0gY3VycmVudDtcblx0XHRpZiAobG93ID09IGhpZ2gpIHJldHVybiAobG93ICsgMSkgKiBzdGVwO1xuXHRcdGN1cnJlbnQgPSAobG93ICsgaGlnaCkgPj4+IDE7XG5cdH1cbn07XG5zcGluZS5saW5lYXJTZWFyY2ggPSBmdW5jdGlvbiAodmFsdWVzLCB0YXJnZXQsIHN0ZXApIHtcblx0Zm9yICh2YXIgaSA9IDAsIGxhc3QgPSB2YWx1ZXMubGVuZ3RoIC0gc3RlcDsgaSA8PSBsYXN0OyBpICs9IHN0ZXApXG5cdFx0aWYgKHZhbHVlc1tpXSA+IHRhcmdldCkgcmV0dXJuIGk7XG5cdHJldHVybiAtMTtcbn07XG5cbnNwaW5lLkN1cnZlcyA9IGZ1bmN0aW9uIChmcmFtZUNvdW50KSB7XG5cdHRoaXMuY3VydmVzID0gW107IC8vIGRmeCwgZGZ5LCBkZGZ4LCBkZGZ5LCBkZGRmeCwgZGRkZnksIC4uLlxuXHR0aGlzLmN1cnZlcy5sZW5ndGggPSAoZnJhbWVDb3VudCAtIDEpICogNjtcbn07XG5zcGluZS5DdXJ2ZXMucHJvdG90eXBlID0ge1xuXHRzZXRMaW5lYXI6IGZ1bmN0aW9uIChmcmFtZUluZGV4KSB7XG5cdFx0dGhpcy5jdXJ2ZXNbZnJhbWVJbmRleCAqIDZdID0gMC8qTElORUFSKi87XG5cdH0sXG5cdHNldFN0ZXBwZWQ6IGZ1bmN0aW9uIChmcmFtZUluZGV4KSB7XG5cdFx0dGhpcy5jdXJ2ZXNbZnJhbWVJbmRleCAqIDZdID0gLTEvKlNURVBQRUQqLztcblx0fSxcblx0LyoqIFNldHMgdGhlIGNvbnRyb2wgaGFuZGxlIHBvc2l0aW9ucyBmb3IgYW4gaW50ZXJwb2xhdGlvbiBiZXppZXIgY3VydmUgdXNlZCB0byB0cmFuc2l0aW9uIGZyb20gdGhpcyBrZXlmcmFtZSB0byB0aGUgbmV4dC5cblx0ICogY3gxIGFuZCBjeDIgYXJlIGZyb20gMCB0byAxLCByZXByZXNlbnRpbmcgdGhlIHBlcmNlbnQgb2YgdGltZSBiZXR3ZWVuIHRoZSB0d28ga2V5ZnJhbWVzLiBjeTEgYW5kIGN5MiBhcmUgdGhlIHBlcmNlbnQgb2Zcblx0ICogdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUga2V5ZnJhbWUncyB2YWx1ZXMuICovXG5cdHNldEN1cnZlOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgY3gxLCBjeTEsIGN4MiwgY3kyKSB7XG5cdFx0dmFyIHN1YmRpdl9zdGVwID0gMSAvIDEwLypCRVpJRVJfU0VHTUVOVFMqLztcblx0XHR2YXIgc3ViZGl2X3N0ZXAyID0gc3ViZGl2X3N0ZXAgKiBzdWJkaXZfc3RlcDtcblx0XHR2YXIgc3ViZGl2X3N0ZXAzID0gc3ViZGl2X3N0ZXAyICogc3ViZGl2X3N0ZXA7XG5cdFx0dmFyIHByZTEgPSAzICogc3ViZGl2X3N0ZXA7XG5cdFx0dmFyIHByZTIgPSAzICogc3ViZGl2X3N0ZXAyO1xuXHRcdHZhciBwcmU0ID0gNiAqIHN1YmRpdl9zdGVwMjtcblx0XHR2YXIgcHJlNSA9IDYgKiBzdWJkaXZfc3RlcDM7XG5cdFx0dmFyIHRtcDF4ID0gLWN4MSAqIDIgKyBjeDI7XG5cdFx0dmFyIHRtcDF5ID0gLWN5MSAqIDIgKyBjeTI7XG5cdFx0dmFyIHRtcDJ4ID0gKGN4MSAtIGN4MikgKiAzICsgMTtcblx0XHR2YXIgdG1wMnkgPSAoY3kxIC0gY3kyKSAqIDMgKyAxO1xuXHRcdHZhciBpID0gZnJhbWVJbmRleCAqIDY7XG5cdFx0dmFyIGN1cnZlcyA9IHRoaXMuY3VydmVzO1xuXHRcdGN1cnZlc1tpXSA9IGN4MSAqIHByZTEgKyB0bXAxeCAqIHByZTIgKyB0bXAyeCAqIHN1YmRpdl9zdGVwMztcblx0XHRjdXJ2ZXNbaSArIDFdID0gY3kxICogcHJlMSArIHRtcDF5ICogcHJlMiArIHRtcDJ5ICogc3ViZGl2X3N0ZXAzO1xuXHRcdGN1cnZlc1tpICsgMl0gPSB0bXAxeCAqIHByZTQgKyB0bXAyeCAqIHByZTU7XG5cdFx0Y3VydmVzW2kgKyAzXSA9IHRtcDF5ICogcHJlNCArIHRtcDJ5ICogcHJlNTtcblx0XHRjdXJ2ZXNbaSArIDRdID0gdG1wMnggKiBwcmU1O1xuXHRcdGN1cnZlc1tpICsgNV0gPSB0bXAyeSAqIHByZTU7XG5cdH0sXG5cdGdldEN1cnZlUGVyY2VudDogZnVuY3Rpb24gKGZyYW1lSW5kZXgsIHBlcmNlbnQpIHtcblx0XHRwZXJjZW50ID0gcGVyY2VudCA8IDAgPyAwIDogKHBlcmNlbnQgPiAxID8gMSA6IHBlcmNlbnQpO1xuXHRcdHZhciBjdXJ2ZUluZGV4ID0gZnJhbWVJbmRleCAqIDY7XG5cdFx0dmFyIGN1cnZlcyA9IHRoaXMuY3VydmVzO1xuXHRcdHZhciBkZnggPSBjdXJ2ZXNbY3VydmVJbmRleF07XG5cdFx0aWYgKCFkZngvKkxJTkVBUiovKSByZXR1cm4gcGVyY2VudDtcblx0XHRpZiAoZGZ4ID09IC0xLypTVEVQUEVEKi8pIHJldHVybiAwO1xuXHRcdHZhciBkZnkgPSBjdXJ2ZXNbY3VydmVJbmRleCArIDFdO1xuXHRcdHZhciBkZGZ4ID0gY3VydmVzW2N1cnZlSW5kZXggKyAyXTtcblx0XHR2YXIgZGRmeSA9IGN1cnZlc1tjdXJ2ZUluZGV4ICsgM107XG5cdFx0dmFyIGRkZGZ4ID0gY3VydmVzW2N1cnZlSW5kZXggKyA0XTtcblx0XHR2YXIgZGRkZnkgPSBjdXJ2ZXNbY3VydmVJbmRleCArIDVdO1xuXHRcdHZhciB4ID0gZGZ4LCB5ID0gZGZ5O1xuXHRcdHZhciBpID0gMTAvKkJFWklFUl9TRUdNRU5UUyovIC0gMjtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0aWYgKHggPj0gcGVyY2VudCkge1xuXHRcdFx0XHR2YXIgbGFzdFggPSB4IC0gZGZ4O1xuXHRcdFx0XHR2YXIgbGFzdFkgPSB5IC0gZGZ5O1xuXHRcdFx0XHRyZXR1cm4gbGFzdFkgKyAoeSAtIGxhc3RZKSAqIChwZXJjZW50IC0gbGFzdFgpIC8gKHggLSBsYXN0WCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaSA9PSAwKSBicmVhaztcblx0XHRcdGktLTtcblx0XHRcdGRmeCArPSBkZGZ4O1xuXHRcdFx0ZGZ5ICs9IGRkZnk7XG5cdFx0XHRkZGZ4ICs9IGRkZGZ4O1xuXHRcdFx0ZGRmeSArPSBkZGRmeTtcblx0XHRcdHggKz0gZGZ4O1xuXHRcdFx0eSArPSBkZnk7XG5cdFx0fVxuXHRcdHJldHVybiB5ICsgKDEgLSB5KSAqIChwZXJjZW50IC0geCkgLyAoMSAtIHgpOyAvLyBMYXN0IHBvaW50IGlzIDEsMS5cblx0fVxufTtcblxuc3BpbmUuUm90YXRlVGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIGFuZ2xlLCAuLi5cblx0dGhpcy5mcmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudCAqIDI7XG59O1xuc3BpbmUuUm90YXRlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMjtcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCBhbmdsZSkge1xuXHRcdGZyYW1lSW5kZXggKj0gMjtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDFdID0gYW5nbGU7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDJdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdHZhciBhbW91bnQgPSBib25lLmRhdGEucm90YXRpb24gKyBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdIC0gYm9uZS5yb3RhdGlvbjtcblx0XHRcdHdoaWxlIChhbW91bnQgPiAxODApXG5cdFx0XHRcdGFtb3VudCAtPSAzNjA7XG5cdFx0XHR3aGlsZSAoYW1vdW50IDwgLTE4MClcblx0XHRcdFx0YW1vdW50ICs9IDM2MDtcblx0XHRcdGJvbmUucm90YXRpb24gKz0gYW1vdW50ICogYWxwaGE7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUgbGFzdCBmcmFtZSBhbmQgdGhlIGN1cnJlbnQgZnJhbWUuXG5cdFx0dmFyIGZyYW1lSW5kZXggPSBzcGluZS5iaW5hcnlTZWFyY2goZnJhbWVzLCB0aW1lLCAyKTtcblx0XHR2YXIgbGFzdEZyYW1lVmFsdWUgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDFdO1xuXHRcdHZhciBmcmFtZVRpbWUgPSBmcmFtZXNbZnJhbWVJbmRleF07XG5cdFx0dmFyIHBlcmNlbnQgPSAxIC0gKHRpbWUgLSBmcmFtZVRpbWUpIC8gKGZyYW1lc1tmcmFtZUluZGV4IC0gMi8qTEFTVF9GUkFNRV9USU1FKi9dIC0gZnJhbWVUaW1lKTtcblx0XHRwZXJjZW50ID0gdGhpcy5jdXJ2ZXMuZ2V0Q3VydmVQZXJjZW50KGZyYW1lSW5kZXggLyAyIC0gMSwgcGVyY2VudCk7XG5cblx0XHR2YXIgYW1vdW50ID0gZnJhbWVzW2ZyYW1lSW5kZXggKyAxLypGUkFNRV9WQUxVRSovXSAtIGxhc3RGcmFtZVZhbHVlO1xuXHRcdHdoaWxlIChhbW91bnQgPiAxODApXG5cdFx0XHRhbW91bnQgLT0gMzYwO1xuXHRcdHdoaWxlIChhbW91bnQgPCAtMTgwKVxuXHRcdFx0YW1vdW50ICs9IDM2MDtcblx0XHRhbW91bnQgPSBib25lLmRhdGEucm90YXRpb24gKyAobGFzdEZyYW1lVmFsdWUgKyBhbW91bnQgKiBwZXJjZW50KSAtIGJvbmUucm90YXRpb247XG5cdFx0d2hpbGUgKGFtb3VudCA+IDE4MClcblx0XHRcdGFtb3VudCAtPSAzNjA7XG5cdFx0d2hpbGUgKGFtb3VudCA8IC0xODApXG5cdFx0XHRhbW91bnQgKz0gMzYwO1xuXHRcdGJvbmUucm90YXRpb24gKz0gYW1vdW50ICogYWxwaGE7XG5cdH1cbn07XG5cbnNwaW5lLlRyYW5zbGF0ZVRpbWVsaW5lID0gZnVuY3Rpb24gKGZyYW1lQ291bnQpIHtcblx0dGhpcy5jdXJ2ZXMgPSBuZXcgc3BpbmUuQ3VydmVzKGZyYW1lQ291bnQpO1xuXHR0aGlzLmZyYW1lcyA9IFtdOyAvLyB0aW1lLCB4LCB5LCAuLi5cblx0dGhpcy5mcmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudCAqIDM7XG59O1xuc3BpbmUuVHJhbnNsYXRlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMztcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCB4LCB5KSB7XG5cdFx0ZnJhbWVJbmRleCAqPSAzO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXhdID0gdGltZTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMV0gPSB4O1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAyXSA9IHk7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDNdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdGJvbmUueCArPSAoYm9uZS5kYXRhLnggKyBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDJdIC0gYm9uZS54KSAqIGFscGhhO1xuXHRcdFx0Ym9uZS55ICs9IChib25lLmRhdGEueSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMV0gLSBib25lLnkpICogYWxwaGE7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUgbGFzdCBmcmFtZSBhbmQgdGhlIGN1cnJlbnQgZnJhbWUuXG5cdFx0dmFyIGZyYW1lSW5kZXggPSBzcGluZS5iaW5hcnlTZWFyY2goZnJhbWVzLCB0aW1lLCAzKTtcblx0XHR2YXIgbGFzdEZyYW1lWCA9IGZyYW1lc1tmcmFtZUluZGV4IC0gMl07XG5cdFx0dmFyIGxhc3RGcmFtZVkgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDFdO1xuXHRcdHZhciBmcmFtZVRpbWUgPSBmcmFtZXNbZnJhbWVJbmRleF07XG5cdFx0dmFyIHBlcmNlbnQgPSAxIC0gKHRpbWUgLSBmcmFtZVRpbWUpIC8gKGZyYW1lc1tmcmFtZUluZGV4ICsgLTMvKkxBU1RfRlJBTUVfVElNRSovXSAtIGZyYW1lVGltZSk7XG5cdFx0cGVyY2VudCA9IHRoaXMuY3VydmVzLmdldEN1cnZlUGVyY2VudChmcmFtZUluZGV4IC8gMyAtIDEsIHBlcmNlbnQpO1xuXG5cdFx0Ym9uZS54ICs9IChib25lLmRhdGEueCArIGxhc3RGcmFtZVggKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAxLypGUkFNRV9YKi9dIC0gbGFzdEZyYW1lWCkgKiBwZXJjZW50IC0gYm9uZS54KSAqIGFscGhhO1xuXHRcdGJvbmUueSArPSAoYm9uZS5kYXRhLnkgKyBsYXN0RnJhbWVZICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMi8qRlJBTUVfWSovXSAtIGxhc3RGcmFtZVkpICogcGVyY2VudCAtIGJvbmUueSkgKiBhbHBoYTtcblx0fVxufTtcblxuc3BpbmUuU2NhbGVUaW1lbGluZSA9IGZ1bmN0aW9uIChmcmFtZUNvdW50KSB7XG5cdHRoaXMuY3VydmVzID0gbmV3IHNwaW5lLkN1cnZlcyhmcmFtZUNvdW50KTtcblx0dGhpcy5mcmFtZXMgPSBbXTsgLy8gdGltZSwgeCwgeSwgLi4uXG5cdHRoaXMuZnJhbWVzLmxlbmd0aCA9IGZyYW1lQ291bnQgKiAzO1xufTtcbnNwaW5lLlNjYWxlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMztcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCB4LCB5KSB7XG5cdFx0ZnJhbWVJbmRleCAqPSAzO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXhdID0gdGltZTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMV0gPSB4O1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAyXSA9IHk7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDNdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdGJvbmUuc2NhbGVYICs9IChib25lLmRhdGEuc2NhbGVYIC0gMSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMl0gLSBib25lLnNjYWxlWCkgKiBhbHBoYTtcblx0XHRcdGJvbmUuc2NhbGVZICs9IChib25lLmRhdGEuc2NhbGVZIC0gMSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMV0gLSBib25lLnNjYWxlWSkgKiBhbHBoYTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSBsYXN0IGZyYW1lIGFuZCB0aGUgY3VycmVudCBmcmFtZS5cblx0XHR2YXIgZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDMpO1xuXHRcdHZhciBsYXN0RnJhbWVYID0gZnJhbWVzW2ZyYW1lSW5kZXggLSAyXTtcblx0XHR2YXIgbGFzdEZyYW1lWSA9IGZyYW1lc1tmcmFtZUluZGV4IC0gMV07XG5cdFx0dmFyIGZyYW1lVGltZSA9IGZyYW1lc1tmcmFtZUluZGV4XTtcblx0XHR2YXIgcGVyY2VudCA9IDEgLSAodGltZSAtIGZyYW1lVGltZSkgLyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAtMy8qTEFTVF9GUkFNRV9USU1FKi9dIC0gZnJhbWVUaW1lKTtcblx0XHRwZXJjZW50ID0gdGhpcy5jdXJ2ZXMuZ2V0Q3VydmVQZXJjZW50KGZyYW1lSW5kZXggLyAzIC0gMSwgcGVyY2VudCk7XG5cblx0XHRib25lLnNjYWxlWCArPSAoYm9uZS5kYXRhLnNjYWxlWCAtIDEgKyBsYXN0RnJhbWVYICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMS8qRlJBTUVfWCovXSAtIGxhc3RGcmFtZVgpICogcGVyY2VudCAtIGJvbmUuc2NhbGVYKSAqIGFscGhhO1xuXHRcdGJvbmUuc2NhbGVZICs9IChib25lLmRhdGEuc2NhbGVZIC0gMSArIGxhc3RGcmFtZVkgKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAyLypGUkFNRV9ZKi9dIC0gbGFzdEZyYW1lWSkgKiBwZXJjZW50IC0gYm9uZS5zY2FsZVkpICogYWxwaGE7XG5cdH1cbn07XG5cbnNwaW5lLkNvbG9yVGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIHIsIGcsIGIsIGEsIC4uLlxuXHR0aGlzLmZyYW1lcy5sZW5ndGggPSBmcmFtZUNvdW50ICogNTtcbn07XG5zcGluZS5Db2xvclRpbWVsaW5lLnByb3RvdHlwZSA9IHtcblx0c2xvdEluZGV4OiAwLFxuXHRnZXRGcmFtZUNvdW50OiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZnJhbWVzLmxlbmd0aCAvIDI7XG5cdH0sXG5cdHNldEZyYW1lOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgdGltZSwgeCwgeSkge1xuXHRcdGZyYW1lSW5kZXggKj0gNTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDFdID0gcjtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMl0gPSBnO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAzXSA9IGI7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDRdID0gYTtcblx0fSxcblx0YXBwbHk6IGZ1bmN0aW9uIChza2VsZXRvbiwgdGltZSwgYWxwaGEpIHtcblx0XHR2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXM7XG5cdFx0aWYgKHRpbWUgPCBmcmFtZXNbMF0pIHJldHVybjsgLy8gVGltZSBpcyBiZWZvcmUgZmlyc3QgZnJhbWUuXG5cblx0XHR2YXIgc2xvdCA9IHNrZWxldG9uLnNsb3RzW3RoaXMuc2xvdEluZGV4XTtcblxuXHRcdGlmICh0aW1lID49IGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gNV0pIHsgLy8gVGltZSBpcyBhZnRlciBsYXN0IGZyYW1lLlxuXHRcdFx0dmFyIGkgPSBmcmFtZXMubGVuZ3RoIC0gMTtcblx0XHRcdHNsb3QuciA9IGZyYW1lc1tpIC0gM107XG5cdFx0XHRzbG90LmcgPSBmcmFtZXNbaSAtIDJdO1xuXHRcdFx0c2xvdC5iID0gZnJhbWVzW2kgLSAxXTtcblx0XHRcdHNsb3QuYSA9IGZyYW1lc1tpXTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSBsYXN0IGZyYW1lIGFuZCB0aGUgY3VycmVudCBmcmFtZS5cblx0XHR2YXIgZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDUpO1xuXHRcdHZhciBsYXN0RnJhbWVSID0gZnJhbWVzW2ZyYW1lSW5kZXggLSA0XTtcblx0XHR2YXIgbGFzdEZyYW1lRyA9IGZyYW1lc1tmcmFtZUluZGV4IC0gM107XG5cdFx0dmFyIGxhc3RGcmFtZUIgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDJdO1xuXHRcdHZhciBsYXN0RnJhbWVBID0gZnJhbWVzW2ZyYW1lSW5kZXggLSAxXTtcblx0XHR2YXIgZnJhbWVUaW1lID0gZnJhbWVzW2ZyYW1lSW5kZXhdO1xuXHRcdHZhciBwZXJjZW50ID0gMSAtICh0aW1lIC0gZnJhbWVUaW1lKSAvIChmcmFtZXNbZnJhbWVJbmRleCAtIDUvKkxBU1RfRlJBTUVfVElNRSovXSAtIGZyYW1lVGltZSk7XG5cdFx0cGVyY2VudCA9IHRoaXMuY3VydmVzLmdldEN1cnZlUGVyY2VudChmcmFtZUluZGV4IC8gNSAtIDEsIHBlcmNlbnQpO1xuXG5cdFx0dmFyIHIgPSBsYXN0RnJhbWVSICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMS8qRlJBTUVfUiovXSAtIGxhc3RGcmFtZVIpICogcGVyY2VudDtcblx0XHR2YXIgZyA9IGxhc3RGcmFtZUcgKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAyLypGUkFNRV9HKi9dIC0gbGFzdEZyYW1lRykgKiBwZXJjZW50O1xuXHRcdHZhciBiID0gbGFzdEZyYW1lQiArIChmcmFtZXNbZnJhbWVJbmRleCArIDMvKkZSQU1FX0IqL10gLSBsYXN0RnJhbWVCKSAqIHBlcmNlbnQ7XG5cdFx0dmFyIGEgPSBsYXN0RnJhbWVBICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgNC8qRlJBTUVfQSovXSAtIGxhc3RGcmFtZUEpICogcGVyY2VudDtcblx0XHRpZiAoYWxwaGEgPCAxKSB7XG5cdFx0XHRzbG90LnIgKz0gKHIgLSBzbG90LnIpICogYWxwaGE7XG5cdFx0XHRzbG90LmcgKz0gKGcgLSBzbG90LmcpICogYWxwaGE7XG5cdFx0XHRzbG90LmIgKz0gKGIgLSBzbG90LmIpICogYWxwaGE7XG5cdFx0XHRzbG90LmEgKz0gKGEgLSBzbG90LmEpICogYWxwaGE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNsb3QuciA9IHI7XG5cdFx0XHRzbG90LmcgPSBnO1xuXHRcdFx0c2xvdC5iID0gYjtcblx0XHRcdHNsb3QuYSA9IGE7XG5cdFx0fVxuXHR9XG59O1xuXG5zcGluZS5BdHRhY2htZW50VGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIC4uLlxuXHR0aGlzLmZyYW1lcy5sZW5ndGggPSBmcmFtZUNvdW50O1xuXHR0aGlzLmF0dGFjaG1lbnROYW1lcyA9IFtdOyAvLyB0aW1lLCAuLi5cblx0dGhpcy5hdHRhY2htZW50TmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudDtcbn07XG5zcGluZS5BdHRhY2htZW50VGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRzbG90SW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyYW1lcy5sZW5ndGg7XG5cdH0sXG5cdHNldEZyYW1lOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgdGltZSwgYXR0YWNobWVudE5hbWUpIHtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5hdHRhY2htZW50TmFtZXNbZnJhbWVJbmRleF0gPSBhdHRhY2htZW50TmFtZTtcblx0fSxcblx0YXBwbHk6IGZ1bmN0aW9uIChza2VsZXRvbiwgdGltZSwgYWxwaGEpIHtcblx0XHR2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXM7XG5cdFx0aWYgKHRpbWUgPCBmcmFtZXNbMF0pIHJldHVybjsgLy8gVGltZSBpcyBiZWZvcmUgZmlyc3QgZnJhbWUuXG5cblx0XHR2YXIgZnJhbWVJbmRleDtcblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdKSAvLyBUaW1lIGlzIGFmdGVyIGxhc3QgZnJhbWUuXG5cdFx0XHRmcmFtZUluZGV4ID0gZnJhbWVzLmxlbmd0aCAtIDE7XG5cdFx0ZWxzZVxuXHRcdFx0ZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDEpIC0gMTtcblxuXHRcdHZhciBhdHRhY2htZW50TmFtZSA9IHRoaXMuYXR0YWNobWVudE5hbWVzW2ZyYW1lSW5kZXhdO1xuXHRcdHNrZWxldG9uLnNsb3RzW3RoaXMuc2xvdEluZGV4XS5zZXRBdHRhY2htZW50KCFhdHRhY2htZW50TmFtZSA/IG51bGwgOiBza2VsZXRvbi5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgodGhpcy5zbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKSk7XG5cdH1cbn07XG5cbnNwaW5lLlNrZWxldG9uRGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5ib25lcyA9IFtdO1xuXHR0aGlzLnNsb3RzID0gW107XG5cdHRoaXMuc2tpbnMgPSBbXTtcblx0dGhpcy5hbmltYXRpb25zID0gW107XG59O1xuc3BpbmUuU2tlbGV0b25EYXRhLnByb3RvdHlwZSA9IHtcblx0ZGVmYXVsdFNraW46IG51bGwsXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRmaW5kQm9uZTogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5uYW1lID09IGJvbmVOYW1lKSByZXR1cm4gYm9uZXNbaV07XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIC0xIGlmIHRoZSBib25lIHdhcyBub3QgZm91bmQuICovXG5cdGZpbmRCb25lSW5kZXg6IGZ1bmN0aW9uIChib25lTmFtZSkge1xuXHRcdHZhciBib25lcyA9IHRoaXMuYm9uZXM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBib25lcy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoYm9uZXNbaV0ubmFtZSA9PSBib25lTmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZFNsb3Q6IGZ1bmN0aW9uIChzbG90TmFtZSkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdGlmIChzbG90c1tpXS5uYW1lID09IHNsb3ROYW1lKSByZXR1cm4gc2xvdFtpXTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIC0xIGlmIHRoZSBib25lIHdhcyBub3QgZm91bmQuICovXG5cdGZpbmRTbG90SW5kZXg6IGZ1bmN0aW9uIChzbG90TmFtZSkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoc2xvdHNbaV0ubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZFNraW46IGZ1bmN0aW9uIChza2luTmFtZSkge1xuXHRcdHZhciBza2lucyA9IHRoaXMuc2tpbnM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBza2lucy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoc2tpbnNbaV0ubmFtZSA9PSBza2luTmFtZSkgcmV0dXJuIHNraW5zW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZEFuaW1hdGlvbjogZnVuY3Rpb24gKGFuaW1hdGlvbk5hbWUpIHtcblx0XHR2YXIgYW5pbWF0aW9ucyA9IHRoaXMuYW5pbWF0aW9ucztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKGFuaW1hdGlvbnNbaV0ubmFtZSA9PSBhbmltYXRpb25OYW1lKSByZXR1cm4gYW5pbWF0aW9uc1tpXTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufTtcblxuc3BpbmUuU2tlbGV0b24gPSBmdW5jdGlvbiAoc2tlbGV0b25EYXRhKSB7XG5cdHRoaXMuZGF0YSA9IHNrZWxldG9uRGF0YTtcblxuXHR0aGlzLmJvbmVzID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBuID0gc2tlbGV0b25EYXRhLmJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBib25lRGF0YSA9IHNrZWxldG9uRGF0YS5ib25lc1tpXTtcblx0XHR2YXIgcGFyZW50ID0gIWJvbmVEYXRhLnBhcmVudCA/IG51bGwgOiB0aGlzLmJvbmVzW3NrZWxldG9uRGF0YS5ib25lcy5pbmRleE9mKGJvbmVEYXRhLnBhcmVudCldO1xuXHRcdHRoaXMuYm9uZXMucHVzaChuZXcgc3BpbmUuQm9uZShib25lRGF0YSwgcGFyZW50KSk7XG5cdH1cblxuXHR0aGlzLnNsb3RzID0gW107XG5cdHRoaXMuZHJhd09yZGVyID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBuID0gc2tlbGV0b25EYXRhLnNsb3RzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBzbG90RGF0YSA9IHNrZWxldG9uRGF0YS5zbG90c1tpXTtcblx0XHR2YXIgYm9uZSA9IHRoaXMuYm9uZXNbc2tlbGV0b25EYXRhLmJvbmVzLmluZGV4T2Yoc2xvdERhdGEuYm9uZURhdGEpXTtcblx0XHR2YXIgc2xvdCA9IG5ldyBzcGluZS5TbG90KHNsb3REYXRhLCB0aGlzLCBib25lKTtcblx0XHR0aGlzLnNsb3RzLnB1c2goc2xvdCk7XG5cdFx0dGhpcy5kcmF3T3JkZXIucHVzaChzbG90KTtcblx0fVxufTtcbnNwaW5lLlNrZWxldG9uLnByb3RvdHlwZSA9IHtcblx0eDogMCwgeTogMCxcblx0c2tpbjogbnVsbCxcblx0cjogMSwgZzogMSwgYjogMSwgYTogMSxcblx0dGltZTogMCxcblx0ZmxpcFg6IGZhbHNlLCBmbGlwWTogZmFsc2UsXG5cdC8qKiBVcGRhdGVzIHRoZSB3b3JsZCB0cmFuc2Zvcm0gZm9yIGVhY2ggYm9uZS4gKi9cblx0dXBkYXRlV29ybGRUcmFuc2Zvcm06IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZmxpcFggPSB0aGlzLmZsaXBYO1xuXHRcdHZhciBmbGlwWSA9IHRoaXMuZmxpcFk7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGJvbmVzW2ldLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKGZsaXBYLCBmbGlwWSk7XG5cdH0sXG5cdC8qKiBTZXRzIHRoZSBib25lcyBhbmQgc2xvdHMgdG8gdGhlaXIgc2V0dXAgcG9zZSB2YWx1ZXMuICovXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5zZXRCb25lc1RvU2V0dXBQb3NlKCk7XG5cdFx0dGhpcy5zZXRTbG90c1RvU2V0dXBQb3NlKCk7XG5cdH0sXG5cdHNldEJvbmVzVG9TZXR1cFBvc2U6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgYm9uZXMgPSB0aGlzLmJvbmVzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gYm9uZXMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0Ym9uZXNbaV0uc2V0VG9TZXR1cFBvc2UoKTtcblx0fSxcblx0c2V0U2xvdHNUb1NldHVwUG9zZTogZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRzbG90c1tpXS5zZXRUb1NldHVwUG9zZShpKTtcblx0fSxcblx0LyoqIEByZXR1cm4gTWF5IHJldHVybiBudWxsLiAqL1xuXHRnZXRSb290Qm9uZTogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLmJvbmVzLmxlbmd0aCA9PSAwID8gbnVsbCA6IHRoaXMuYm9uZXNbMF07XG5cdH0sXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRmaW5kQm9uZTogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5kYXRhLm5hbWUgPT0gYm9uZU5hbWUpIHJldHVybiBib25lc1tpXTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblx0LyoqIEByZXR1cm4gLTEgaWYgdGhlIGJvbmUgd2FzIG5vdCBmb3VuZC4gKi9cblx0ZmluZEJvbmVJbmRleDogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5kYXRhLm5hbWUgPT0gYm9uZU5hbWUpIHJldHVybiBpO1xuXHRcdHJldHVybiAtMTtcblx0fSxcblx0LyoqIEByZXR1cm4gTWF5IGJlIG51bGwuICovXG5cdGZpbmRTbG90OiBmdW5jdGlvbiAoc2xvdE5hbWUpIHtcblx0XHR2YXIgc2xvdHMgPSB0aGlzLnNsb3RzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKHNsb3RzW2ldLmRhdGEubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIHNsb3RzW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHJldHVybiAtMSBpZiB0aGUgYm9uZSB3YXMgbm90IGZvdW5kLiAqL1xuXHRmaW5kU2xvdEluZGV4OiBmdW5jdGlvbiAoc2xvdE5hbWUpIHtcblx0XHR2YXIgc2xvdHMgPSB0aGlzLnNsb3RzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKHNsb3RzW2ldLmRhdGEubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHRzZXRTa2luQnlOYW1lOiBmdW5jdGlvbiAoc2tpbk5hbWUpIHtcblx0XHR2YXIgc2tpbiA9IHRoaXMuZGF0YS5maW5kU2tpbihza2luTmFtZSk7XG5cdFx0aWYgKCFza2luKSB0aHJvdyBcIlNraW4gbm90IGZvdW5kOiBcIiArIHNraW5OYW1lO1xuXHRcdHRoaXMuc2V0U2tpbihza2luKTtcblx0fSxcblx0LyoqIFNldHMgdGhlIHNraW4gdXNlZCB0byBsb29rIHVwIGF0dGFjaG1lbnRzIG5vdCBmb3VuZCBpbiB0aGUge0BsaW5rIFNrZWxldG9uRGF0YSNnZXREZWZhdWx0U2tpbigpIGRlZmF1bHQgc2tpbn0uIEF0dGFjaG1lbnRzXG5cdCAqIGZyb20gdGhlIG5ldyBza2luIGFyZSBhdHRhY2hlZCBpZiB0aGUgY29ycmVzcG9uZGluZyBhdHRhY2htZW50IGZyb20gdGhlIG9sZCBza2luIHdhcyBhdHRhY2hlZC5cblx0ICogQHBhcmFtIG5ld1NraW4gTWF5IGJlIG51bGwuICovXG5cdHNldFNraW46IGZ1bmN0aW9uIChuZXdTa2luKSB7XG5cdFx0aWYgKHRoaXMuc2tpbiAmJiBuZXdTa2luKSBuZXdTa2luLl9hdHRhY2hBbGwodGhpcywgdGhpcy5za2luKTtcblx0XHR0aGlzLnNraW4gPSBuZXdTa2luO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0Z2V0QXR0YWNobWVudEJ5U2xvdE5hbWU6IGZ1bmN0aW9uIChzbG90TmFtZSwgYXR0YWNobWVudE5hbWUpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgodGhpcy5kYXRhLmZpbmRTbG90SW5kZXgoc2xvdE5hbWUpLCBhdHRhY2htZW50TmFtZSk7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRnZXRBdHRhY2htZW50QnlTbG90SW5kZXg6IGZ1bmN0aW9uIChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKSB7XG5cdFx0aWYgKHRoaXMuc2tpbikge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSB0aGlzLnNraW4uZ2V0QXR0YWNobWVudChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKTtcblx0XHRcdGlmIChhdHRhY2htZW50KSByZXR1cm4gYXR0YWNobWVudDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZGF0YS5kZWZhdWx0U2tpbikgcmV0dXJuIHRoaXMuZGF0YS5kZWZhdWx0U2tpbi5nZXRBdHRhY2htZW50KHNsb3RJbmRleCwgYXR0YWNobWVudE5hbWUpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHBhcmFtIGF0dGFjaG1lbnROYW1lIE1heSBiZSBudWxsLiAqL1xuXHRzZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoc2xvdE5hbWUsIGF0dGFjaG1lbnROYW1lKSB7XG5cdFx0dmFyIHNsb3RzID0gdGhpcy5zbG90cztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHNsb3RzLnNpemU7IGkgPCBuOyBpKyspIHtcblx0XHRcdHZhciBzbG90ID0gc2xvdHNbaV07XG5cdFx0XHRpZiAoc2xvdC5kYXRhLm5hbWUgPT0gc2xvdE5hbWUpIHtcblx0XHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBudWxsO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudE5hbWUpIHtcblx0XHRcdFx0XHRhdHRhY2htZW50ID0gdGhpcy5nZXRBdHRhY2htZW50KGksIGF0dGFjaG1lbnROYW1lKTtcblx0XHRcdFx0XHRpZiAoYXR0YWNobWVudCA9PSBudWxsKSB0aHJvdyBcIkF0dGFjaG1lbnQgbm90IGZvdW5kOiBcIiArIGF0dGFjaG1lbnROYW1lICsgXCIsIGZvciBzbG90OiBcIiArIHNsb3ROYW1lO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNsb3Quc2V0QXR0YWNobWVudChhdHRhY2htZW50KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBcIlNsb3Qgbm90IGZvdW5kOiBcIiArIHNsb3ROYW1lO1xuXHR9LFxuXHR1cGRhdGU6IGZ1bmN0aW9uIChkZWx0YSkge1xuXHRcdHRpbWUgKz0gZGVsdGE7XG5cdH1cbn07XG5cbnNwaW5lLkF0dGFjaG1lbnRUeXBlID0ge1xuXHRyZWdpb246IDBcbn07XG5cbnNwaW5lLlJlZ2lvbkF0dGFjaG1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMub2Zmc2V0ID0gW107XG5cdHRoaXMub2Zmc2V0Lmxlbmd0aCA9IDg7XG5cdHRoaXMudXZzID0gW107XG5cdHRoaXMudXZzLmxlbmd0aCA9IDg7XG59O1xuc3BpbmUuUmVnaW9uQXR0YWNobWVudC5wcm90b3R5cGUgPSB7XG5cdHg6IDAsIHk6IDAsXG5cdHJvdGF0aW9uOiAwLFxuXHRzY2FsZVg6IDEsIHNjYWxlWTogMSxcblx0d2lkdGg6IDAsIGhlaWdodDogMCxcblx0cmVuZGVyZXJPYmplY3Q6IG51bGwsXG5cdHJlZ2lvbk9mZnNldFg6IDAsIHJlZ2lvbk9mZnNldFk6IDAsXG5cdHJlZ2lvbldpZHRoOiAwLCByZWdpb25IZWlnaHQ6IDAsXG5cdHJlZ2lvbk9yaWdpbmFsV2lkdGg6IDAsIHJlZ2lvbk9yaWdpbmFsSGVpZ2h0OiAwLFxuXHRzZXRVVnM6IGZ1bmN0aW9uICh1LCB2LCB1MiwgdjIsIHJvdGF0ZSkge1xuXHRcdHZhciB1dnMgPSB0aGlzLnV2cztcblx0XHRpZiAocm90YXRlKSB7XG5cdFx0XHR1dnNbMi8qWDIqL10gPSB1O1xuXHRcdFx0dXZzWzMvKlkyKi9dID0gdjI7XG5cdFx0XHR1dnNbNC8qWDMqL10gPSB1O1xuXHRcdFx0dXZzWzUvKlkzKi9dID0gdjtcblx0XHRcdHV2c1s2LypYNCovXSA9IHUyO1xuXHRcdFx0dXZzWzcvKlk0Ki9dID0gdjtcblx0XHRcdHV2c1swLypYMSovXSA9IHUyO1xuXHRcdFx0dXZzWzEvKlkxKi9dID0gdjI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHV2c1swLypYMSovXSA9IHU7XG5cdFx0XHR1dnNbMS8qWTEqL10gPSB2Mjtcblx0XHRcdHV2c1syLypYMiovXSA9IHU7XG5cdFx0XHR1dnNbMy8qWTIqL10gPSB2O1xuXHRcdFx0dXZzWzQvKlgzKi9dID0gdTI7XG5cdFx0XHR1dnNbNS8qWTMqL10gPSB2O1xuXHRcdFx0dXZzWzYvKlg0Ki9dID0gdTI7XG5cdFx0XHR1dnNbNy8qWTQqL10gPSB2Mjtcblx0XHR9XG5cdH0sXG5cdHVwZGF0ZU9mZnNldDogZnVuY3Rpb24gKCkge1xuXHRcdHZhciByZWdpb25TY2FsZVggPSB0aGlzLndpZHRoIC8gdGhpcy5yZWdpb25PcmlnaW5hbFdpZHRoICogdGhpcy5zY2FsZVg7XG5cdFx0dmFyIHJlZ2lvblNjYWxlWSA9IHRoaXMuaGVpZ2h0IC8gdGhpcy5yZWdpb25PcmlnaW5hbEhlaWdodCAqIHRoaXMuc2NhbGVZO1xuXHRcdHZhciBsb2NhbFggPSAtdGhpcy53aWR0aCAvIDIgKiB0aGlzLnNjYWxlWCArIHRoaXMucmVnaW9uT2Zmc2V0WCAqIHJlZ2lvblNjYWxlWDtcblx0XHR2YXIgbG9jYWxZID0gLXRoaXMuaGVpZ2h0IC8gMiAqIHRoaXMuc2NhbGVZICsgdGhpcy5yZWdpb25PZmZzZXRZICogcmVnaW9uU2NhbGVZO1xuXHRcdHZhciBsb2NhbFgyID0gbG9jYWxYICsgdGhpcy5yZWdpb25XaWR0aCAqIHJlZ2lvblNjYWxlWDtcblx0XHR2YXIgbG9jYWxZMiA9IGxvY2FsWSArIHRoaXMucmVnaW9uSGVpZ2h0ICogcmVnaW9uU2NhbGVZO1xuXHRcdHZhciByYWRpYW5zID0gdGhpcy5yb3RhdGlvbiAqIE1hdGguUEkgLyAxODA7XG5cdFx0dmFyIGNvcyA9IE1hdGguY29zKHJhZGlhbnMpO1xuXHRcdHZhciBzaW4gPSBNYXRoLnNpbihyYWRpYW5zKTtcblx0XHR2YXIgbG9jYWxYQ29zID0gbG9jYWxYICogY29zICsgdGhpcy54O1xuXHRcdHZhciBsb2NhbFhTaW4gPSBsb2NhbFggKiBzaW47XG5cdFx0dmFyIGxvY2FsWUNvcyA9IGxvY2FsWSAqIGNvcyArIHRoaXMueTtcblx0XHR2YXIgbG9jYWxZU2luID0gbG9jYWxZICogc2luO1xuXHRcdHZhciBsb2NhbFgyQ29zID0gbG9jYWxYMiAqIGNvcyArIHRoaXMueDtcblx0XHR2YXIgbG9jYWxYMlNpbiA9IGxvY2FsWDIgKiBzaW47XG5cdFx0dmFyIGxvY2FsWTJDb3MgPSBsb2NhbFkyICogY29zICsgdGhpcy55O1xuXHRcdHZhciBsb2NhbFkyU2luID0gbG9jYWxZMiAqIHNpbjtcblx0XHR2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XG5cdFx0b2Zmc2V0WzAvKlgxKi9dID0gbG9jYWxYQ29zIC0gbG9jYWxZU2luO1xuXHRcdG9mZnNldFsxLypZMSovXSA9IGxvY2FsWUNvcyArIGxvY2FsWFNpbjtcblx0XHRvZmZzZXRbMi8qWDIqL10gPSBsb2NhbFhDb3MgLSBsb2NhbFkyU2luO1xuXHRcdG9mZnNldFszLypZMiovXSA9IGxvY2FsWTJDb3MgKyBsb2NhbFhTaW47XG5cdFx0b2Zmc2V0WzQvKlgzKi9dID0gbG9jYWxYMkNvcyAtIGxvY2FsWTJTaW47XG5cdFx0b2Zmc2V0WzUvKlkzKi9dID0gbG9jYWxZMkNvcyArIGxvY2FsWDJTaW47XG5cdFx0b2Zmc2V0WzYvKlg0Ki9dID0gbG9jYWxYMkNvcyAtIGxvY2FsWVNpbjtcblx0XHRvZmZzZXRbNy8qWTQqL10gPSBsb2NhbFlDb3MgKyBsb2NhbFgyU2luO1xuXHR9LFxuXHRjb21wdXRlVmVydGljZXM6IGZ1bmN0aW9uICh4LCB5LCBib25lLCB2ZXJ0aWNlcykge1xuXHRcdHggKz0gYm9uZS53b3JsZFg7XG5cdFx0eSArPSBib25lLndvcmxkWTtcblx0XHR2YXIgbTAwID0gYm9uZS5tMDA7XG5cdFx0dmFyIG0wMSA9IGJvbmUubTAxO1xuXHRcdHZhciBtMTAgPSBib25lLm0xMDtcblx0XHR2YXIgbTExID0gYm9uZS5tMTE7XG5cdFx0dmFyIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuXHRcdHZlcnRpY2VzWzAvKlgxKi9dID0gb2Zmc2V0WzAvKlgxKi9dICogbTAwICsgb2Zmc2V0WzEvKlkxKi9dICogbTAxICsgeDtcblx0XHR2ZXJ0aWNlc1sxLypZMSovXSA9IG9mZnNldFswLypYMSovXSAqIG0xMCArIG9mZnNldFsxLypZMSovXSAqIG0xMSArIHk7XG5cdFx0dmVydGljZXNbMi8qWDIqL10gPSBvZmZzZXRbMi8qWDIqL10gKiBtMDAgKyBvZmZzZXRbMy8qWTIqL10gKiBtMDEgKyB4O1xuXHRcdHZlcnRpY2VzWzMvKlkyKi9dID0gb2Zmc2V0WzIvKlgyKi9dICogbTEwICsgb2Zmc2V0WzMvKlkyKi9dICogbTExICsgeTtcblx0XHR2ZXJ0aWNlc1s0LypYMyovXSA9IG9mZnNldFs0LypYMyovXSAqIG0wMCArIG9mZnNldFs1LypYMyovXSAqIG0wMSArIHg7XG5cdFx0dmVydGljZXNbNS8qWDMqL10gPSBvZmZzZXRbNC8qWDMqL10gKiBtMTAgKyBvZmZzZXRbNS8qWDMqL10gKiBtMTEgKyB5O1xuXHRcdHZlcnRpY2VzWzYvKlg0Ki9dID0gb2Zmc2V0WzYvKlg0Ki9dICogbTAwICsgb2Zmc2V0WzcvKlk0Ki9dICogbTAxICsgeDtcblx0XHR2ZXJ0aWNlc1s3LypZNCovXSA9IG9mZnNldFs2LypYNCovXSAqIG0xMCArIG9mZnNldFs3LypZNCovXSAqIG0xMSArIHk7XG5cdH1cbn1cblxuc3BpbmUuQW5pbWF0aW9uU3RhdGVEYXRhID0gZnVuY3Rpb24gKHNrZWxldG9uRGF0YSkge1xuXHR0aGlzLnNrZWxldG9uRGF0YSA9IHNrZWxldG9uRGF0YTtcblx0dGhpcy5hbmltYXRpb25Ub01peFRpbWUgPSB7fTtcbn07XG5zcGluZS5BbmltYXRpb25TdGF0ZURhdGEucHJvdG90eXBlID0ge1xuICAgICAgICBkZWZhdWx0TWl4OiAwLFxuXHRzZXRNaXhCeU5hbWU6IGZ1bmN0aW9uIChmcm9tTmFtZSwgdG9OYW1lLCBkdXJhdGlvbikge1xuXHRcdHZhciBmcm9tID0gdGhpcy5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbihmcm9tTmFtZSk7XG5cdFx0aWYgKCFmcm9tKSB0aHJvdyBcIkFuaW1hdGlvbiBub3QgZm91bmQ6IFwiICsgZnJvbU5hbWU7XG5cdFx0dmFyIHRvID0gdGhpcy5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbih0b05hbWUpO1xuXHRcdGlmICghdG8pIHRocm93IFwiQW5pbWF0aW9uIG5vdCBmb3VuZDogXCIgKyB0b05hbWU7XG5cdFx0dGhpcy5zZXRNaXgoZnJvbSwgdG8sIGR1cmF0aW9uKTtcblx0fSxcblx0c2V0TWl4OiBmdW5jdGlvbiAoZnJvbSwgdG8sIGR1cmF0aW9uKSB7XG5cdFx0dGhpcy5hbmltYXRpb25Ub01peFRpbWVbZnJvbS5uYW1lICsgXCI6XCIgKyB0by5uYW1lXSA9IGR1cmF0aW9uO1xuXHR9LFxuXHRnZXRNaXg6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuXHRcdHZhciB0aW1lID0gdGhpcy5hbmltYXRpb25Ub01peFRpbWVbZnJvbS5uYW1lICsgXCI6XCIgKyB0by5uYW1lXTtcbiAgICAgICAgICAgIHJldHVybiB0aW1lID8gdGltZSA6IHRoaXMuZGVmYXVsdE1peDtcblx0fVxufTtcblxuc3BpbmUuQW5pbWF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGVEYXRhKSB7XG5cdHRoaXMuZGF0YSA9IHN0YXRlRGF0YTtcblx0dGhpcy5xdWV1ZSA9IFtdO1xufTtcbnNwaW5lLkFuaW1hdGlvblN0YXRlLnByb3RvdHlwZSA9IHtcblx0Y3VycmVudDogbnVsbCxcblx0cHJldmlvdXM6IG51bGwsXG5cdGN1cnJlbnRUaW1lOiAwLFxuXHRwcmV2aW91c1RpbWU6IDAsXG5cdGN1cnJlbnRMb29wOiBmYWxzZSxcblx0cHJldmlvdXNMb29wOiBmYWxzZSxcblx0bWl4VGltZTogMCxcblx0bWl4RHVyYXRpb246IDAsXG5cdHVwZGF0ZTogZnVuY3Rpb24gKGRlbHRhKSB7XG5cdFx0dGhpcy5jdXJyZW50VGltZSArPSBkZWx0YTtcblx0XHR0aGlzLnByZXZpb3VzVGltZSArPSBkZWx0YTtcblx0XHR0aGlzLm1peFRpbWUgKz0gZGVsdGE7XG5cblx0XHRpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHR2YXIgZW50cnkgPSB0aGlzLnF1ZXVlWzBdO1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFRpbWUgPj0gZW50cnkuZGVsYXkpIHtcblx0XHRcdFx0dGhpcy5fc2V0QW5pbWF0aW9uKGVudHJ5LmFuaW1hdGlvbiwgZW50cnkubG9vcCk7XG5cdFx0XHRcdHRoaXMucXVldWUuc2hpZnQoKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24pIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLnByZXZpb3VzKSB7XG5cdFx0XHR0aGlzLnByZXZpb3VzLmFwcGx5KHNrZWxldG9uLCB0aGlzLnByZXZpb3VzVGltZSwgdGhpcy5wcmV2aW91c0xvb3ApO1xuXHRcdFx0dmFyIGFscGhhID0gdGhpcy5taXhUaW1lIC8gdGhpcy5taXhEdXJhdGlvbjtcblx0XHRcdGlmIChhbHBoYSA+PSAxKSB7XG5cdFx0XHRcdGFscGhhID0gMTtcblx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmN1cnJlbnQubWl4KHNrZWxldG9uLCB0aGlzLmN1cnJlbnRUaW1lLCB0aGlzLmN1cnJlbnRMb29wLCBhbHBoYSk7XG5cdFx0fSBlbHNlXG5cdFx0XHR0aGlzLmN1cnJlbnQuYXBwbHkoc2tlbGV0b24sIHRoaXMuY3VycmVudFRpbWUsIHRoaXMuY3VycmVudExvb3ApO1xuXHR9LFxuXHRjbGVhckFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMucHJldmlvdXMgPSBudWxsO1xuXHRcdHRoaXMuY3VycmVudCA9IG51bGw7XG5cdFx0dGhpcy5xdWV1ZS5sZW5ndGggPSAwO1xuXHR9LFxuXHRfc2V0QW5pbWF0aW9uOiBmdW5jdGlvbiAoYW5pbWF0aW9uLCBsb29wKSB7XG5cdFx0dGhpcy5wcmV2aW91cyA9IG51bGw7XG5cdFx0aWYgKGFuaW1hdGlvbiAmJiB0aGlzLmN1cnJlbnQpIHtcblx0XHRcdHRoaXMubWl4RHVyYXRpb24gPSB0aGlzLmRhdGEuZ2V0TWl4KHRoaXMuY3VycmVudCwgYW5pbWF0aW9uKTtcblx0XHRcdGlmICh0aGlzLm1peER1cmF0aW9uID4gMCkge1xuXHRcdFx0XHR0aGlzLm1peFRpbWUgPSAwO1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzID0gdGhpcy5jdXJyZW50O1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzVGltZSA9IHRoaXMuY3VycmVudFRpbWU7XG5cdFx0XHRcdHRoaXMucHJldmlvdXNMb29wID0gdGhpcy5jdXJyZW50TG9vcDtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5jdXJyZW50ID0gYW5pbWF0aW9uO1xuXHRcdHRoaXMuY3VycmVudExvb3AgPSBsb29wO1xuXHRcdHRoaXMuY3VycmVudFRpbWUgPSAwO1xuXHR9LFxuXHQvKiogQHNlZSAjc2V0QW5pbWF0aW9uKEFuaW1hdGlvbiwgQm9vbGVhbikgKi9cblx0c2V0QW5pbWF0aW9uQnlOYW1lOiBmdW5jdGlvbiAoYW5pbWF0aW9uTmFtZSwgbG9vcCkge1xuXHRcdHZhciBhbmltYXRpb24gPSB0aGlzLmRhdGEuc2tlbGV0b25EYXRhLmZpbmRBbmltYXRpb24oYW5pbWF0aW9uTmFtZSk7XG5cdFx0aWYgKCFhbmltYXRpb24pIHRocm93IFwiQW5pbWF0aW9uIG5vdCBmb3VuZDogXCIgKyBhbmltYXRpb25OYW1lO1xuXHRcdHRoaXMuc2V0QW5pbWF0aW9uKGFuaW1hdGlvbiwgbG9vcCk7XG5cdH0sXG5cdC8qKiBTZXQgdGhlIGN1cnJlbnQgYW5pbWF0aW9uLiBBbnkgcXVldWVkIGFuaW1hdGlvbnMgYXJlIGNsZWFyZWQgYW5kIHRoZSBjdXJyZW50IGFuaW1hdGlvbiB0aW1lIGlzIHNldCB0byAwLlxuXHQgKiBAcGFyYW0gYW5pbWF0aW9uIE1heSBiZSBudWxsLiAqL1xuXHRzZXRBbmltYXRpb246IGZ1bmN0aW9uIChhbmltYXRpb24sIGxvb3ApIHtcblx0XHR0aGlzLnF1ZXVlLmxlbmd0aCA9IDA7XG5cdFx0dGhpcy5fc2V0QW5pbWF0aW9uKGFuaW1hdGlvbiwgbG9vcCk7XG5cdH0sXG5cdC8qKiBAc2VlICNhZGRBbmltYXRpb24oQW5pbWF0aW9uLCBCb29sZWFuLCBOdW1iZXIpICovXG5cdGFkZEFuaW1hdGlvbkJ5TmFtZTogZnVuY3Rpb24gKGFuaW1hdGlvbk5hbWUsIGxvb3AsIGRlbGF5KSB7XG5cdFx0dmFyIGFuaW1hdGlvbiA9IHRoaXMuZGF0YS5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbihhbmltYXRpb25OYW1lKTtcblx0XHRpZiAoIWFuaW1hdGlvbikgdGhyb3cgXCJBbmltYXRpb24gbm90IGZvdW5kOiBcIiArIGFuaW1hdGlvbk5hbWU7XG5cdFx0dGhpcy5hZGRBbmltYXRpb24oYW5pbWF0aW9uLCBsb29wLCBkZWxheSk7XG5cdH0sXG5cdC8qKiBBZGRzIGFuIGFuaW1hdGlvbiB0byBiZSBwbGF5ZWQgZGVsYXkgc2Vjb25kcyBhZnRlciB0aGUgY3VycmVudCBvciBsYXN0IHF1ZXVlZCBhbmltYXRpb24uXG5cdCAqIEBwYXJhbSBkZWxheSBNYXkgYmUgPD0gMCB0byB1c2UgZHVyYXRpb24gb2YgcHJldmlvdXMgYW5pbWF0aW9uIG1pbnVzIGFueSBtaXggZHVyYXRpb24gcGx1cyB0aGUgbmVnYXRpdmUgZGVsYXkuICovXG5cdGFkZEFuaW1hdGlvbjogZnVuY3Rpb24gKGFuaW1hdGlvbiwgbG9vcCwgZGVsYXkpIHtcblx0XHR2YXIgZW50cnkgPSB7fTtcblx0XHRlbnRyeS5hbmltYXRpb24gPSBhbmltYXRpb247XG5cdFx0ZW50cnkubG9vcCA9IGxvb3A7XG5cblx0XHRpZiAoIWRlbGF5IHx8IGRlbGF5IDw9IDApIHtcblx0XHRcdHZhciBwcmV2aW91c0FuaW1hdGlvbiA9IHRoaXMucXVldWUubGVuZ3RoID09IDAgPyB0aGlzLmN1cnJlbnQgOiB0aGlzLnF1ZXVlW3RoaXMucXVldWUubGVuZ3RoIC0gMV0uYW5pbWF0aW9uO1xuXHRcdFx0aWYgKHByZXZpb3VzQW5pbWF0aW9uICE9IG51bGwpXG5cdFx0XHRcdGRlbGF5ID0gcHJldmlvdXNBbmltYXRpb24uZHVyYXRpb24gLSB0aGlzLmRhdGEuZ2V0TWl4KHByZXZpb3VzQW5pbWF0aW9uLCBhbmltYXRpb24pICsgKGRlbGF5IHx8IDApO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRkZWxheSA9IDA7XG5cdFx0fVxuXHRcdGVudHJ5LmRlbGF5ID0gZGVsYXk7XG5cblx0XHR0aGlzLnF1ZXVlLnB1c2goZW50cnkpO1xuXHR9LFxuXHQvKiogUmV0dXJucyB0cnVlIGlmIG5vIGFuaW1hdGlvbiBpcyBzZXQgb3IgaWYgdGhlIGN1cnJlbnQgdGltZSBpcyBncmVhdGVyIHRoYW4gdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiwgcmVnYXJkbGVzcyBvZiBsb29waW5nLiAqL1xuXHRpc0NvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICF0aGlzLmN1cnJlbnQgfHwgdGhpcy5jdXJyZW50VGltZSA+PSB0aGlzLmN1cnJlbnQuZHVyYXRpb247XG5cdH1cbn07XG5cbnNwaW5lLlNrZWxldG9uSnNvbiA9IGZ1bmN0aW9uIChhdHRhY2htZW50TG9hZGVyKSB7XG5cdHRoaXMuYXR0YWNobWVudExvYWRlciA9IGF0dGFjaG1lbnRMb2FkZXI7XG59O1xuc3BpbmUuU2tlbGV0b25Kc29uLnByb3RvdHlwZSA9IHtcblx0c2NhbGU6IDEsXG5cdHJlYWRTa2VsZXRvbkRhdGE6IGZ1bmN0aW9uIChyb290KSB7XG5cdFx0dmFyIHNrZWxldG9uRGF0YSA9IG5ldyBzcGluZS5Ta2VsZXRvbkRhdGEoKTtcblxuXHRcdC8vIEJvbmVzLlxuXHRcdHZhciBib25lcyA9IHJvb3RbXCJib25lc1wiXTtcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0dmFyIGJvbmVNYXAgPSBib25lc1tpXTtcblx0XHRcdHZhciBwYXJlbnQgPSBudWxsO1xuXHRcdFx0aWYgKGJvbmVNYXBbXCJwYXJlbnRcIl0pIHtcblx0XHRcdFx0cGFyZW50ID0gc2tlbGV0b25EYXRhLmZpbmRCb25lKGJvbmVNYXBbXCJwYXJlbnRcIl0pO1xuXHRcdFx0XHRpZiAoIXBhcmVudCkgdGhyb3cgXCJQYXJlbnQgYm9uZSBub3QgZm91bmQ6IFwiICsgYm9uZU1hcFtcInBhcmVudFwiXTtcblx0XHRcdH1cblx0XHRcdHZhciBib25lRGF0YSA9IG5ldyBzcGluZS5Cb25lRGF0YShib25lTWFwW1wibmFtZVwiXSwgcGFyZW50KTtcblx0XHRcdGJvbmVEYXRhLmxlbmd0aCA9IChib25lTWFwW1wibGVuZ3RoXCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGJvbmVEYXRhLnggPSAoYm9uZU1hcFtcInhcIl0gfHwgMCkgKiB0aGlzLnNjYWxlO1xuXHRcdFx0Ym9uZURhdGEueSA9IChib25lTWFwW1wieVwiXSB8fCAwKSAqIHRoaXMuc2NhbGU7XG5cdFx0XHRib25lRGF0YS5yb3RhdGlvbiA9IChib25lTWFwW1wicm90YXRpb25cIl0gfHwgMCk7XG5cdFx0XHRib25lRGF0YS5zY2FsZVggPSBib25lTWFwW1wic2NhbGVYXCJdIHx8IDE7XG5cdFx0XHRib25lRGF0YS5zY2FsZVkgPSBib25lTWFwW1wic2NhbGVZXCJdIHx8IDE7XG5cdFx0XHRza2VsZXRvbkRhdGEuYm9uZXMucHVzaChib25lRGF0YSk7XG5cdFx0fVxuXG5cdFx0Ly8gU2xvdHMuXG5cdFx0dmFyIHNsb3RzID0gcm9vdFtcInNsb3RzXCJdO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdFx0XHR2YXIgc2xvdE1hcCA9IHNsb3RzW2ldO1xuXHRcdFx0dmFyIGJvbmVEYXRhID0gc2tlbGV0b25EYXRhLmZpbmRCb25lKHNsb3RNYXBbXCJib25lXCJdKTtcblx0XHRcdGlmICghYm9uZURhdGEpIHRocm93IFwiU2xvdCBib25lIG5vdCBmb3VuZDogXCIgKyBzbG90TWFwW1wiYm9uZVwiXTtcblx0XHRcdHZhciBzbG90RGF0YSA9IG5ldyBzcGluZS5TbG90RGF0YShzbG90TWFwW1wibmFtZVwiXSwgYm9uZURhdGEpO1xuXG5cdFx0XHR2YXIgY29sb3IgPSBzbG90TWFwW1wiY29sb3JcIl07XG5cdFx0XHRpZiAoY29sb3IpIHtcblx0XHRcdFx0c2xvdERhdGEuciA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAwKTtcblx0XHRcdFx0c2xvdERhdGEuZyA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAxKTtcblx0XHRcdFx0c2xvdERhdGEuYiA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAyKTtcblx0XHRcdFx0c2xvdERhdGEuYSA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAzKTtcblx0XHRcdH1cblxuXHRcdFx0c2xvdERhdGEuYXR0YWNobWVudE5hbWUgPSBzbG90TWFwW1wiYXR0YWNobWVudFwiXTtcblxuXHRcdFx0c2tlbGV0b25EYXRhLnNsb3RzLnB1c2goc2xvdERhdGEpO1xuXHRcdH1cblxuXHRcdC8vIFNraW5zLlxuXHRcdHZhciBza2lucyA9IHJvb3RbXCJza2luc1wiXTtcblx0XHRmb3IgKHZhciBza2luTmFtZSBpbiBza2lucykge1xuXHRcdFx0aWYgKCFza2lucy5oYXNPd25Qcm9wZXJ0eShza2luTmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0dmFyIHNraW5NYXAgPSBza2luc1tza2luTmFtZV07XG5cdFx0XHR2YXIgc2tpbiA9IG5ldyBzcGluZS5Ta2luKHNraW5OYW1lKTtcblx0XHRcdGZvciAodmFyIHNsb3ROYW1lIGluIHNraW5NYXApIHtcblx0XHRcdFx0aWYgKCFza2luTWFwLmhhc093blByb3BlcnR5KHNsb3ROYW1lKSkgY29udGludWU7XG5cdFx0XHRcdHZhciBzbG90SW5kZXggPSBza2VsZXRvbkRhdGEuZmluZFNsb3RJbmRleChzbG90TmFtZSk7XG5cdFx0XHRcdHZhciBzbG90RW50cnkgPSBza2luTWFwW3Nsb3ROYW1lXTtcblx0XHRcdFx0Zm9yICh2YXIgYXR0YWNobWVudE5hbWUgaW4gc2xvdEVudHJ5KSB7XG5cdFx0XHRcdFx0aWYgKCFzbG90RW50cnkuaGFzT3duUHJvcGVydHkoYXR0YWNobWVudE5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0XHR2YXIgYXR0YWNobWVudCA9IHRoaXMucmVhZEF0dGFjaG1lbnQoc2tpbiwgYXR0YWNobWVudE5hbWUsIHNsb3RFbnRyeVthdHRhY2htZW50TmFtZV0pO1xuXHRcdFx0XHRcdGlmIChhdHRhY2htZW50ICE9IG51bGwpIHNraW4uYWRkQXR0YWNobWVudChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lLCBhdHRhY2htZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0c2tlbGV0b25EYXRhLnNraW5zLnB1c2goc2tpbik7XG5cdFx0XHRpZiAoc2tpbi5uYW1lID09IFwiZGVmYXVsdFwiKSBza2VsZXRvbkRhdGEuZGVmYXVsdFNraW4gPSBza2luO1xuXHRcdH1cblxuXHRcdC8vIEFuaW1hdGlvbnMuXG5cdFx0dmFyIGFuaW1hdGlvbnMgPSByb290W1wiYW5pbWF0aW9uc1wiXTtcblx0XHRmb3IgKHZhciBhbmltYXRpb25OYW1lIGluIGFuaW1hdGlvbnMpIHtcblx0XHRcdGlmICghYW5pbWF0aW9ucy5oYXNPd25Qcm9wZXJ0eShhbmltYXRpb25OYW1lKSkgY29udGludWU7XG5cdFx0XHR0aGlzLnJlYWRBbmltYXRpb24oYW5pbWF0aW9uTmFtZSwgYW5pbWF0aW9uc1thbmltYXRpb25OYW1lXSwgc2tlbGV0b25EYXRhKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2tlbGV0b25EYXRhO1xuXHR9LFxuXHRyZWFkQXR0YWNobWVudDogZnVuY3Rpb24gKHNraW4sIG5hbWUsIG1hcCkge1xuXHRcdG5hbWUgPSBtYXBbXCJuYW1lXCJdIHx8IG5hbWU7XG5cblx0XHR2YXIgdHlwZSA9IHNwaW5lLkF0dGFjaG1lbnRUeXBlW21hcFtcInR5cGVcIl0gfHwgXCJyZWdpb25cIl07XG5cblx0XHRpZiAodHlwZSA9PSBzcGluZS5BdHRhY2htZW50VHlwZS5yZWdpb24pIHtcblx0XHRcdHZhciBhdHRhY2htZW50ID0gbmV3IHNwaW5lLlJlZ2lvbkF0dGFjaG1lbnQoKTtcblx0XHRcdGF0dGFjaG1lbnQueCA9IChtYXBbXCJ4XCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQueSA9IChtYXBbXCJ5XCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQuc2NhbGVYID0gbWFwW1wic2NhbGVYXCJdIHx8IDE7XG5cdFx0XHRhdHRhY2htZW50LnNjYWxlWSA9IG1hcFtcInNjYWxlWVwiXSB8fCAxO1xuXHRcdFx0YXR0YWNobWVudC5yb3RhdGlvbiA9IG1hcFtcInJvdGF0aW9uXCJdIHx8IDA7XG5cdFx0XHRhdHRhY2htZW50LndpZHRoID0gKG1hcFtcIndpZHRoXCJdIHx8IDMyKSAqIHRoaXMuc2NhbGU7XG5cdFx0XHRhdHRhY2htZW50LmhlaWdodCA9IChtYXBbXCJoZWlnaHRcIl0gfHwgMzIpICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQudXBkYXRlT2Zmc2V0KCk7XG5cblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QgPSB7fTtcblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZSA9IG5hbWU7XG5cdFx0XHRhdHRhY2htZW50LnJlbmRlcmVyT2JqZWN0LnNjYWxlID0ge307XG5cdFx0XHRhdHRhY2htZW50LnJlbmRlcmVyT2JqZWN0LnNjYWxlLnggPSBhdHRhY2htZW50LnNjYWxlWDtcblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3Quc2NhbGUueSA9IGF0dGFjaG1lbnQuc2NhbGVZO1xuXHRcdFx0YXR0YWNobWVudC5yZW5kZXJlck9iamVjdC5yb3RhdGlvbiA9IC1hdHRhY2htZW50LnJvdGF0aW9uICogTWF0aC5QSSAvIDE4MDtcblx0XHRcdHJldHVybiBhdHRhY2htZW50O1xuXHRcdH1cblxuICAgICAgICAgICAgdGhyb3cgXCJVbmtub3duIGF0dGFjaG1lbnQgdHlwZTogXCIgKyB0eXBlO1xuXHR9LFxuXG5cdHJlYWRBbmltYXRpb246IGZ1bmN0aW9uIChuYW1lLCBtYXAsIHNrZWxldG9uRGF0YSkge1xuXHRcdHZhciB0aW1lbGluZXMgPSBbXTtcblx0XHR2YXIgZHVyYXRpb24gPSAwO1xuXG5cdFx0dmFyIGJvbmVzID0gbWFwW1wiYm9uZXNcIl07XG5cdFx0Zm9yICh2YXIgYm9uZU5hbWUgaW4gYm9uZXMpIHtcblx0XHRcdGlmICghYm9uZXMuaGFzT3duUHJvcGVydHkoYm9uZU5hbWUpKSBjb250aW51ZTtcblx0XHRcdHZhciBib25lSW5kZXggPSBza2VsZXRvbkRhdGEuZmluZEJvbmVJbmRleChib25lTmFtZSk7XG5cdFx0XHRpZiAoYm9uZUluZGV4ID09IC0xKSB0aHJvdyBcIkJvbmUgbm90IGZvdW5kOiBcIiArIGJvbmVOYW1lO1xuXHRcdFx0dmFyIGJvbmVNYXAgPSBib25lc1tib25lTmFtZV07XG5cblx0XHRcdGZvciAodmFyIHRpbWVsaW5lTmFtZSBpbiBib25lTWFwKSB7XG5cdFx0XHRcdGlmICghYm9uZU1hcC5oYXNPd25Qcm9wZXJ0eSh0aW1lbGluZU5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0dmFyIHZhbHVlcyA9IGJvbmVNYXBbdGltZWxpbmVOYW1lXTtcblx0XHRcdFx0aWYgKHRpbWVsaW5lTmFtZSA9PSBcInJvdGF0ZVwiKSB7XG5cdFx0XHRcdFx0dmFyIHRpbWVsaW5lID0gbmV3IHNwaW5lLlJvdGF0ZVRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHRpbWVsaW5lLmJvbmVJbmRleCA9IGJvbmVJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHRpbWVsaW5lLnNldEZyYW1lKGZyYW1lSW5kZXgsIHZhbHVlTWFwW1widGltZVwiXSwgdmFsdWVNYXBbXCJhbmdsZVwiXSk7XG5cdFx0XHRcdFx0XHRzcGluZS5Ta2VsZXRvbkpzb24ucmVhZEN1cnZlKHRpbWVsaW5lLCBmcmFtZUluZGV4LCB2YWx1ZU1hcCk7XG5cdFx0XHRcdFx0XHRmcmFtZUluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcblx0XHRcdFx0XHRkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aW1lbGluZS5mcmFtZXNbdGltZWxpbmUuZ2V0RnJhbWVDb3VudCgpICogMiAtIDJdKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKHRpbWVsaW5lTmFtZSA9PSBcInRyYW5zbGF0ZVwiIHx8IHRpbWVsaW5lTmFtZSA9PSBcInNjYWxlXCIpIHtcblx0XHRcdFx0XHR2YXIgdGltZWxpbmU7XG5cdFx0XHRcdFx0dmFyIHRpbWVsaW5lU2NhbGUgPSAxO1xuXHRcdFx0XHRcdGlmICh0aW1lbGluZU5hbWUgPT0gXCJzY2FsZVwiKVxuXHRcdFx0XHRcdFx0dGltZWxpbmUgPSBuZXcgc3BpbmUuU2NhbGVUaW1lbGluZSh2YWx1ZXMubGVuZ3RoKTtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRpbWVsaW5lID0gbmV3IHNwaW5lLlRyYW5zbGF0ZVRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0dGltZWxpbmVTY2FsZSA9IHRoaXMuc2NhbGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lLmJvbmVJbmRleCA9IGJvbmVJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHZhciB4ID0gKHZhbHVlTWFwW1wieFwiXSB8fCAwKSAqIHRpbWVsaW5lU2NhbGU7XG5cdFx0XHRcdFx0XHR2YXIgeSA9ICh2YWx1ZU1hcFtcInlcIl0gfHwgMCkgKiB0aW1lbGluZVNjYWxlO1xuXHRcdFx0XHRcdFx0dGltZWxpbmUuc2V0RnJhbWUoZnJhbWVJbmRleCwgdmFsdWVNYXBbXCJ0aW1lXCJdLCB4LCB5KTtcblx0XHRcdFx0XHRcdHNwaW5lLlNrZWxldG9uSnNvbi5yZWFkQ3VydmUodGltZWxpbmUsIGZyYW1lSW5kZXgsIHZhbHVlTWFwKTtcblx0XHRcdFx0XHRcdGZyYW1lSW5kZXgrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGltZWxpbmVzLnB1c2godGltZWxpbmUpO1xuXHRcdFx0XHRcdGR1cmF0aW9uID0gTWF0aC5tYXgoZHVyYXRpb24sIHRpbWVsaW5lLmZyYW1lc1t0aW1lbGluZS5nZXRGcmFtZUNvdW50KCkgKiAzIC0gM10pO1xuXG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHRocm93IFwiSW52YWxpZCB0aW1lbGluZSB0eXBlIGZvciBhIGJvbmU6IFwiICsgdGltZWxpbmVOYW1lICsgXCIgKFwiICsgYm9uZU5hbWUgKyBcIilcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIHNsb3RzID0gbWFwW1wic2xvdHNcIl07XG5cdFx0Zm9yICh2YXIgc2xvdE5hbWUgaW4gc2xvdHMpIHtcblx0XHRcdGlmICghc2xvdHMuaGFzT3duUHJvcGVydHkoc2xvdE5hbWUpKSBjb250aW51ZTtcblx0XHRcdHZhciBzbG90TWFwID0gc2xvdHNbc2xvdE5hbWVdO1xuXHRcdFx0dmFyIHNsb3RJbmRleCA9IHNrZWxldG9uRGF0YS5maW5kU2xvdEluZGV4KHNsb3ROYW1lKTtcblxuXHRcdFx0Zm9yICh2YXIgdGltZWxpbmVOYW1lIGluIHNsb3RNYXApIHtcblx0XHRcdFx0aWYgKCFzbG90TWFwLmhhc093blByb3BlcnR5KHRpbWVsaW5lTmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0XHR2YXIgdmFsdWVzID0gc2xvdE1hcFt0aW1lbGluZU5hbWVdO1xuXHRcdFx0XHRpZiAodGltZWxpbmVOYW1lID09IFwiY29sb3JcIikge1xuXHRcdFx0XHRcdHZhciB0aW1lbGluZSA9IG5ldyBzcGluZS5Db2xvclRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHRpbWVsaW5lLnNsb3RJbmRleCA9IHNsb3RJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHZhciBjb2xvciA9IHZhbHVlTWFwW1wiY29sb3JcIl07XG5cdFx0XHRcdFx0XHR2YXIgciA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAwKTtcblx0XHRcdFx0XHRcdHZhciBnID0gc3BpbmUuU2tlbGV0b25Kc29uLnRvQ29sb3IoY29sb3IsIDEpO1xuXHRcdFx0XHRcdFx0dmFyIGIgPSBzcGluZS5Ta2VsZXRvbkpzb24udG9Db2xvcihjb2xvciwgMik7XG5cdFx0XHRcdFx0XHR2YXIgYSA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAzKTtcblx0XHRcdFx0XHRcdHRpbWVsaW5lLnNldEZyYW1lKGZyYW1lSW5kZXgsIHZhbHVlTWFwW1widGltZVwiXSwgciwgZywgYiwgYSk7XG5cdFx0XHRcdFx0XHRzcGluZS5Ta2VsZXRvbkpzb24ucmVhZEN1cnZlKHRpbWVsaW5lLCBmcmFtZUluZGV4LCB2YWx1ZU1hcCk7XG5cdFx0XHRcdFx0XHRmcmFtZUluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcblx0XHRcdFx0XHRkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aW1lbGluZS5mcmFtZXNbdGltZWxpbmUuZ2V0RnJhbWVDb3VudCgpICogNSAtIDVdKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKHRpbWVsaW5lTmFtZSA9PSBcImF0dGFjaG1lbnRcIikge1xuXHRcdFx0XHRcdHZhciB0aW1lbGluZSA9IG5ldyBzcGluZS5BdHRhY2htZW50VGltZWxpbmUodmFsdWVzLmxlbmd0aCk7XG5cdFx0XHRcdFx0dGltZWxpbmUuc2xvdEluZGV4ID0gc2xvdEluZGV4O1xuXG5cdFx0XHRcdFx0dmFyIGZyYW1lSW5kZXggPSAwO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBuID0gdmFsdWVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIHZhbHVlTWFwID0gdmFsdWVzW2ldO1xuXHRcdFx0XHRcdFx0dGltZWxpbmUuc2V0RnJhbWUoZnJhbWVJbmRleCsrLCB2YWx1ZU1hcFtcInRpbWVcIl0sIHZhbHVlTWFwW1wibmFtZVwiXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gTWF0aC5tYXgoZHVyYXRpb24sIHRpbWVsaW5lLmZyYW1lc1t0aW1lbGluZS5nZXRGcmFtZUNvdW50KCkgLSAxXSk7XG5cblx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0dGhyb3cgXCJJbnZhbGlkIHRpbWVsaW5lIHR5cGUgZm9yIGEgc2xvdDogXCIgKyB0aW1lbGluZU5hbWUgKyBcIiAoXCIgKyBzbG90TmFtZSArIFwiKVwiO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRza2VsZXRvbkRhdGEuYW5pbWF0aW9ucy5wdXNoKG5ldyBzcGluZS5BbmltYXRpb24obmFtZSwgdGltZWxpbmVzLCBkdXJhdGlvbikpO1xuXHR9XG59O1xuc3BpbmUuU2tlbGV0b25Kc29uLnJlYWRDdXJ2ZSA9IGZ1bmN0aW9uICh0aW1lbGluZSwgZnJhbWVJbmRleCwgdmFsdWVNYXApIHtcblx0dmFyIGN1cnZlID0gdmFsdWVNYXBbXCJjdXJ2ZVwiXTtcblx0aWYgKCFjdXJ2ZSkgcmV0dXJuO1xuXHRpZiAoY3VydmUgPT0gXCJzdGVwcGVkXCIpXG5cdFx0dGltZWxpbmUuY3VydmVzLnNldFN0ZXBwZWQoZnJhbWVJbmRleCk7XG5cdGVsc2UgaWYgKGN1cnZlIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0dGltZWxpbmUuY3VydmVzLnNldEN1cnZlKGZyYW1lSW5kZXgsIGN1cnZlWzBdLCBjdXJ2ZVsxXSwgY3VydmVbMl0sIGN1cnZlWzNdKTtcbn07XG5zcGluZS5Ta2VsZXRvbkpzb24udG9Db2xvciA9IGZ1bmN0aW9uIChoZXhTdHJpbmcsIGNvbG9ySW5kZXgpIHtcblx0aWYgKGhleFN0cmluZy5sZW5ndGggIT0gOCkgdGhyb3cgXCJDb2xvciBoZXhpZGVjaW1hbCBsZW5ndGggbXVzdCBiZSA4LCByZWNpZXZlZDogXCIgKyBoZXhTdHJpbmc7XG5cdHJldHVybiBwYXJzZUludChoZXhTdHJpbmcuc3Vic3RyaW5nKGNvbG9ySW5kZXggKiAyLCAyKSwgMTYpIC8gMjU1O1xufTtcblxuc3BpbmUuQXRsYXMgPSBmdW5jdGlvbiAoYXRsYXNUZXh0LCB0ZXh0dXJlTG9hZGVyKSB7XG5cdHRoaXMudGV4dHVyZUxvYWRlciA9IHRleHR1cmVMb2FkZXI7XG5cdHRoaXMucGFnZXMgPSBbXTtcblx0dGhpcy5yZWdpb25zID0gW107XG5cblx0dmFyIHJlYWRlciA9IG5ldyBzcGluZS5BdGxhc1JlYWRlcihhdGxhc1RleHQpO1xuXHR2YXIgdHVwbGUgPSBbXTtcblx0dHVwbGUubGVuZ3RoID0gNDtcblx0dmFyIHBhZ2UgPSBudWxsO1xuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdHZhciBsaW5lID0gcmVhZGVyLnJlYWRMaW5lKCk7XG5cdFx0aWYgKGxpbmUgPT0gbnVsbCkgYnJlYWs7XG5cdFx0bGluZSA9IHJlYWRlci50cmltKGxpbmUpO1xuXHRcdGlmIChsaW5lLmxlbmd0aCA9PSAwKVxuXHRcdFx0cGFnZSA9IG51bGw7XG5cdFx0ZWxzZSBpZiAoIXBhZ2UpIHtcblx0XHRcdHBhZ2UgPSBuZXcgc3BpbmUuQXRsYXNQYWdlKCk7XG5cdFx0XHRwYWdlLm5hbWUgPSBsaW5lO1xuXG5cdFx0XHRwYWdlLmZvcm1hdCA9IHNwaW5lLkF0bGFzLkZvcm1hdFtyZWFkZXIucmVhZFZhbHVlKCldO1xuXG5cdFx0XHRyZWFkZXIucmVhZFR1cGxlKHR1cGxlKTtcblx0XHRcdHBhZ2UubWluRmlsdGVyID0gc3BpbmUuQXRsYXMuVGV4dHVyZUZpbHRlclt0dXBsZVswXV07XG5cdFx0XHRwYWdlLm1hZ0ZpbHRlciA9IHNwaW5lLkF0bGFzLlRleHR1cmVGaWx0ZXJbdHVwbGVbMV1dO1xuXG5cdFx0XHR2YXIgZGlyZWN0aW9uID0gcmVhZGVyLnJlYWRWYWx1ZSgpO1xuXHRcdFx0cGFnZS51V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLmNsYW1wVG9FZGdlO1xuXHRcdFx0cGFnZS52V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLmNsYW1wVG9FZGdlO1xuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PSBcInhcIilcblx0XHRcdFx0cGFnZS51V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLnJlcGVhdDtcblx0XHRcdGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInlcIilcblx0XHRcdFx0cGFnZS52V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLnJlcGVhdDtcblx0XHRcdGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInh5XCIpXG5cdFx0XHRcdHBhZ2UudVdyYXAgPSBwYWdlLnZXcmFwID0gc3BpbmUuQXRsYXMuVGV4dHVyZVdyYXAucmVwZWF0O1xuXG5cdFx0XHR0ZXh0dXJlTG9hZGVyLmxvYWQocGFnZSwgbGluZSk7XG5cblx0XHRcdHRoaXMucGFnZXMucHVzaChwYWdlKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcmVnaW9uID0gbmV3IHNwaW5lLkF0bGFzUmVnaW9uKCk7XG5cdFx0XHRyZWdpb24ubmFtZSA9IGxpbmU7XG5cdFx0XHRyZWdpb24ucGFnZSA9IHBhZ2U7XG5cblx0XHRcdHJlZ2lvbi5yb3RhdGUgPSByZWFkZXIucmVhZFZhbHVlKCkgPT0gXCJ0cnVlXCI7XG5cblx0XHRcdHJlYWRlci5yZWFkVHVwbGUodHVwbGUpO1xuXHRcdFx0dmFyIHggPSBwYXJzZUludCh0dXBsZVswXSk7XG5cdFx0XHR2YXIgeSA9IHBhcnNlSW50KHR1cGxlWzFdKTtcblxuXHRcdFx0cmVhZGVyLnJlYWRUdXBsZSh0dXBsZSk7XG5cdFx0XHR2YXIgd2lkdGggPSBwYXJzZUludCh0dXBsZVswXSk7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gcGFyc2VJbnQodHVwbGVbMV0pO1xuXG5cdFx0XHRyZWdpb24udSA9IHggLyBwYWdlLndpZHRoO1xuXHRcdFx0cmVnaW9uLnYgPSB5IC8gcGFnZS5oZWlnaHQ7XG5cdFx0XHRpZiAocmVnaW9uLnJvdGF0ZSkge1xuXHRcdFx0XHRyZWdpb24udTIgPSAoeCArIGhlaWdodCkgLyBwYWdlLndpZHRoO1xuXHRcdFx0XHRyZWdpb24udjIgPSAoeSArIHdpZHRoKSAvIHBhZ2UuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVnaW9uLnUyID0gKHggKyB3aWR0aCkgLyBwYWdlLndpZHRoO1xuXHRcdFx0XHRyZWdpb24udjIgPSAoeSArIGhlaWdodCkgLyBwYWdlLmhlaWdodDtcblx0XHRcdH1cblx0XHRcdHJlZ2lvbi54ID0geDtcblx0XHRcdHJlZ2lvbi55ID0geTtcblx0XHRcdHJlZ2lvbi53aWR0aCA9IE1hdGguYWJzKHdpZHRoKTtcblx0XHRcdHJlZ2lvbi5oZWlnaHQgPSBNYXRoLmFicyhoZWlnaHQpO1xuXG5cdFx0XHRpZiAocmVhZGVyLnJlYWRUdXBsZSh0dXBsZSkgPT0gNCkgeyAvLyBzcGxpdCBpcyBvcHRpb25hbFxuXHRcdFx0XHRyZWdpb24uc3BsaXRzID0gW3BhcnNlSW50KHR1cGxlWzBdKSwgcGFyc2VJbnQodHVwbGVbMV0pLCBwYXJzZUludCh0dXBsZVsyXSksIHBhcnNlSW50KHR1cGxlWzNdKV07XG5cblx0XHRcdFx0aWYgKHJlYWRlci5yZWFkVHVwbGUodHVwbGUpID09IDQpIHsgLy8gcGFkIGlzIG9wdGlvbmFsLCBidXQgb25seSBwcmVzZW50IHdpdGggc3BsaXRzXG5cdFx0XHRcdFx0cmVnaW9uLnBhZHMgPSBbcGFyc2VJbnQodHVwbGVbMF0pLCBwYXJzZUludCh0dXBsZVsxXSksIHBhcnNlSW50KHR1cGxlWzJdKSwgcGFyc2VJbnQodHVwbGVbM10pXTtcblxuXHRcdFx0XHRcdHJlYWRlci5yZWFkVHVwbGUodHVwbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJlZ2lvbi5vcmlnaW5hbFdpZHRoID0gcGFyc2VJbnQodHVwbGVbMF0pO1xuXHRcdFx0cmVnaW9uLm9yaWdpbmFsSGVpZ2h0ID0gcGFyc2VJbnQodHVwbGVbMV0pO1xuXG5cdFx0XHRyZWFkZXIucmVhZFR1cGxlKHR1cGxlKTtcblx0XHRcdHJlZ2lvbi5vZmZzZXRYID0gcGFyc2VJbnQodHVwbGVbMF0pO1xuXHRcdFx0cmVnaW9uLm9mZnNldFkgPSBwYXJzZUludCh0dXBsZVsxXSk7XG5cblx0XHRcdHJlZ2lvbi5pbmRleCA9IHBhcnNlSW50KHJlYWRlci5yZWFkVmFsdWUoKSk7XG5cblx0XHRcdHRoaXMucmVnaW9ucy5wdXNoKHJlZ2lvbik7XG5cdFx0fVxuXHR9XG59O1xuc3BpbmUuQXRsYXMucHJvdG90eXBlID0ge1xuXHRmaW5kUmVnaW9uOiBmdW5jdGlvbiAobmFtZSkge1xuXHRcdHZhciByZWdpb25zID0gdGhpcy5yZWdpb25zO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gcmVnaW9ucy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAocmVnaW9uc1tpXS5uYW1lID09IG5hbWUpIHJldHVybiByZWdpb25zW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHRkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHBhZ2VzID0gdGhpcy5wYWdlcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHBhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdHRoaXMudGV4dHVyZUxvYWRlci51bmxvYWQocGFnZXNbaV0ucmVuZGVyZXJPYmplY3QpO1xuXHR9LFxuXHR1cGRhdGVVVnM6IGZ1bmN0aW9uIChwYWdlKSB7XG5cdFx0dmFyIHJlZ2lvbnMgPSB0aGlzLnJlZ2lvbnM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSByZWdpb25zLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0dmFyIHJlZ2lvbiA9IHJlZ2lvbnNbaV07XG5cdFx0XHRpZiAocmVnaW9uLnBhZ2UgIT0gcGFnZSkgY29udGludWU7XG5cdFx0XHRyZWdpb24udSA9IHJlZ2lvbi54IC8gcGFnZS53aWR0aDtcblx0XHRcdHJlZ2lvbi52ID0gcmVnaW9uLnkgLyBwYWdlLmhlaWdodDtcblx0XHRcdGlmIChyZWdpb24ucm90YXRlKSB7XG5cdFx0XHRcdHJlZ2lvbi51MiA9IChyZWdpb24ueCArIHJlZ2lvbi5oZWlnaHQpIC8gcGFnZS53aWR0aDtcblx0XHRcdFx0cmVnaW9uLnYyID0gKHJlZ2lvbi55ICsgcmVnaW9uLndpZHRoKSAvIHBhZ2UuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVnaW9uLnUyID0gKHJlZ2lvbi54ICsgcmVnaW9uLndpZHRoKSAvIHBhZ2Uud2lkdGg7XG5cdFx0XHRcdHJlZ2lvbi52MiA9IChyZWdpb24ueSArIHJlZ2lvbi5oZWlnaHQpIC8gcGFnZS5oZWlnaHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5zcGluZS5BdGxhcy5Gb3JtYXQgPSB7XG5cdGFscGhhOiAwLFxuXHRpbnRlbnNpdHk6IDEsXG5cdGx1bWluYW5jZUFscGhhOiAyLFxuXHRyZ2I1NjU6IDMsXG5cdHJnYmE0NDQ0OiA0LFxuXHRyZ2I4ODg6IDUsXG5cdHJnYmE4ODg4OiA2XG59O1xuXG5zcGluZS5BdGxhcy5UZXh0dXJlRmlsdGVyID0ge1xuXHRuZWFyZXN0OiAwLFxuXHRsaW5lYXI6IDEsXG5cdG1pcE1hcDogMixcblx0bWlwTWFwTmVhcmVzdE5lYXJlc3Q6IDMsXG5cdG1pcE1hcExpbmVhck5lYXJlc3Q6IDQsXG5cdG1pcE1hcE5lYXJlc3RMaW5lYXI6IDUsXG5cdG1pcE1hcExpbmVhckxpbmVhcjogNlxufTtcblxuc3BpbmUuQXRsYXMuVGV4dHVyZVdyYXAgPSB7XG5cdG1pcnJvcmVkUmVwZWF0OiAwLFxuXHRjbGFtcFRvRWRnZTogMSxcblx0cmVwZWF0OiAyXG59O1xuXG5zcGluZS5BdGxhc1BhZ2UgPSBmdW5jdGlvbiAoKSB7fTtcbnNwaW5lLkF0bGFzUGFnZS5wcm90b3R5cGUgPSB7XG5cdG5hbWU6IG51bGwsXG5cdGZvcm1hdDogbnVsbCxcblx0bWluRmlsdGVyOiBudWxsLFxuXHRtYWdGaWx0ZXI6IG51bGwsXG5cdHVXcmFwOiBudWxsLFxuXHR2V3JhcDogbnVsbCxcblx0cmVuZGVyZXJPYmplY3Q6IG51bGwsXG5cdHdpZHRoOiAwLFxuXHRoZWlnaHQ6IDBcbn07XG5cbnNwaW5lLkF0bGFzUmVnaW9uID0gZnVuY3Rpb24gKCkge307XG5zcGluZS5BdGxhc1JlZ2lvbi5wcm90b3R5cGUgPSB7XG5cdHBhZ2U6IG51bGwsXG5cdG5hbWU6IG51bGwsXG5cdHg6IDAsIHk6IDAsXG5cdHdpZHRoOiAwLCBoZWlnaHQ6IDAsXG5cdHU6IDAsIHY6IDAsIHUyOiAwLCB2MjogMCxcblx0b2Zmc2V0WDogMCwgb2Zmc2V0WTogMCxcblx0b3JpZ2luYWxXaWR0aDogMCwgb3JpZ2luYWxIZWlnaHQ6IDAsXG5cdGluZGV4OiAwLFxuXHRyb3RhdGU6IGZhbHNlLFxuXHRzcGxpdHM6IG51bGwsXG5cdHBhZHM6IG51bGwsXG59O1xuXG5zcGluZS5BdGxhc1JlYWRlciA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdHRoaXMubGluZXMgPSB0ZXh0LnNwbGl0KC9cXHJcXG58XFxyfFxcbi8pO1xufTtcbnNwaW5lLkF0bGFzUmVhZGVyLnByb3RvdHlwZSA9IHtcblx0aW5kZXg6IDAsXG5cdHRyaW06IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTtcblx0fSxcblx0cmVhZExpbmU6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodGhpcy5pbmRleCA+PSB0aGlzLmxpbmVzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHRoaXMubGluZXNbdGhpcy5pbmRleCsrXTtcblx0fSxcblx0cmVhZFZhbHVlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGxpbmUgPSB0aGlzLnJlYWRMaW5lKCk7XG5cdFx0dmFyIGNvbG9uID0gbGluZS5pbmRleE9mKFwiOlwiKTtcblx0XHRpZiAoY29sb24gPT0gLTEpIHRocm93IFwiSW52YWxpZCBsaW5lOiBcIiArIGxpbmU7XG5cdFx0cmV0dXJuIHRoaXMudHJpbShsaW5lLnN1YnN0cmluZyhjb2xvbiArIDEpKTtcblx0fSxcblx0LyoqIFJldHVybnMgdGhlIG51bWJlciBvZiB0dXBsZSB2YWx1ZXMgcmVhZCAoMiBvciA0KS4gKi9cblx0cmVhZFR1cGxlOiBmdW5jdGlvbiAodHVwbGUpIHtcblx0XHR2YXIgbGluZSA9IHRoaXMucmVhZExpbmUoKTtcblx0XHR2YXIgY29sb24gPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdGlmIChjb2xvbiA9PSAtMSkgdGhyb3cgXCJJbnZhbGlkIGxpbmU6IFwiICsgbGluZTtcblx0XHR2YXIgaSA9IDAsIGxhc3RNYXRjaD0gY29sb24gKyAxO1xuXHRcdGZvciAoOyBpIDwgMzsgaSsrKSB7XG5cdFx0XHR2YXIgY29tbWEgPSBsaW5lLmluZGV4T2YoXCIsXCIsIGxhc3RNYXRjaCk7XG5cdFx0XHRpZiAoY29tbWEgPT0gLTEpIHtcblx0XHRcdFx0aWYgKGkgPT0gMCkgdGhyb3cgXCJJbnZhbGlkIGxpbmU6IFwiICsgbGluZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHR0dXBsZVtpXSA9IHRoaXMudHJpbShsaW5lLnN1YnN0cihsYXN0TWF0Y2gsIGNvbW1hIC0gbGFzdE1hdGNoKSk7XG5cdFx0XHRsYXN0TWF0Y2ggPSBjb21tYSArIDE7XG5cdFx0fVxuXHRcdHR1cGxlW2ldID0gdGhpcy50cmltKGxpbmUuc3Vic3RyaW5nKGxhc3RNYXRjaCkpO1xuXHRcdHJldHVybiBpICsgMTtcblx0fVxufVxuXG5zcGluZS5BdGxhc0F0dGFjaG1lbnRMb2FkZXIgPSBmdW5jdGlvbiAoYXRsYXMpIHtcblx0dGhpcy5hdGxhcyA9IGF0bGFzO1xufVxuc3BpbmUuQXRsYXNBdHRhY2htZW50TG9hZGVyLnByb3RvdHlwZSA9IHtcblx0bmV3QXR0YWNobWVudDogZnVuY3Rpb24gKHNraW4sIHR5cGUsIG5hbWUpIHtcblx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlIHNwaW5lLkF0dGFjaG1lbnRUeXBlLnJlZ2lvbjpcblx0XHRcdHZhciByZWdpb24gPSB0aGlzLmF0bGFzLmZpbmRSZWdpb24obmFtZSk7XG5cdFx0XHRpZiAoIXJlZ2lvbikgdGhyb3cgXCJSZWdpb24gbm90IGZvdW5kIGluIGF0bGFzOiBcIiArIG5hbWUgKyBcIiAoXCIgKyB0eXBlICsgXCIpXCI7XG5cdFx0XHR2YXIgYXR0YWNobWVudCA9IG5ldyBzcGluZS5SZWdpb25BdHRhY2htZW50KG5hbWUpO1xuXHRcdFx0YXR0YWNobWVudC5yZW5kZXJlck9iamVjdCA9IHJlZ2lvbjtcblx0XHRcdGF0dGFjaG1lbnQuc2V0VVZzKHJlZ2lvbi51LCByZWdpb24udiwgcmVnaW9uLnUyLCByZWdpb24udjIsIHJlZ2lvbi5yb3RhdGUpO1xuXHRcdFx0YXR0YWNobWVudC5yZWdpb25PZmZzZXRYID0gcmVnaW9uLm9mZnNldFg7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbk9mZnNldFkgPSByZWdpb24ub2Zmc2V0WTtcblx0XHRcdGF0dGFjaG1lbnQucmVnaW9uV2lkdGggPSByZWdpb24ud2lkdGg7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbkhlaWdodCA9IHJlZ2lvbi5oZWlnaHQ7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbk9yaWdpbmFsV2lkdGggPSByZWdpb24ub3JpZ2luYWxXaWR0aDtcblx0XHRcdGF0dGFjaG1lbnQucmVnaW9uT3JpZ2luYWxIZWlnaHQgPSByZWdpb24ub3JpZ2luYWxIZWlnaHQ7XG5cdFx0XHRyZXR1cm4gYXR0YWNobWVudDtcblx0XHR9XG5cdFx0dGhyb3cgXCJVbmtub3duIGF0dGFjaG1lbnQgdHlwZTogXCIgKyB0eXBlO1xuXHR9XG59XG5cblBJWEkuQW5pbUNhY2hlID0ge307XG5zcGluZS5Cb25lLnlEb3duID0gdHJ1ZTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBvYmplY3QgaXMgb25lIHRoYXQgd2lsbCBhbGxvdyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gcmVuZGVyaW5nIGZ1bmN0aW9ucyBiYXNlZCBvbiByZW5kZXIgdHlwZVxuICpcbiAqIEBjbGFzcyBDdXN0b21SZW5kZXJhYmxlXG4gKiBAZXh0ZW5kcyBEaXNwbGF5T2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUElYSS5DdXN0b21SZW5kZXJhYmxlID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3QuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5yZW5kZXJhYmxlID0gdHJ1ZTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlICk7XG5QSVhJLkN1c3RvbVJlbmRlcmFibGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5DdXN0b21SZW5kZXJhYmxlO1xuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgQ2FudmFzUmVuZGVyZXIgaXQgd2lsbCBjYWxsIHRoaXMgY2FsbGJhY2tcbiAqXG4gKiBAbWV0aG9kIHJlbmRlckNhbnZhc1xuICogQHBhcmFtIHJlbmRlcmVyIHtDYW52YXNSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUucmVuZGVyQ2FudmFzID0gZnVuY3Rpb24ocmVuZGVyZXIpXG57XG5cdC8vIG92ZXJyaWRlIVxufVxuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgV2ViR0xSZW5kZXJlciBpdCB3aWxsIGNhbGwgdGhpcyBjYWxsYmFjayB0byBpbml0aWFsaXplXG4gKlxuICogQG1ldGhvZCBpbml0V2ViR0xcbiAqIEBwYXJhbSByZW5kZXJlciB7V2ViR0xSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUuaW5pdFdlYkdMID0gZnVuY3Rpb24ocmVuZGVyZXIpXG57XG5cdC8vIG92ZXJyaWRlIVxufVxuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgV2ViR0xSZW5kZXJlciBpdCB3aWxsIGNhbGwgdGhpcyBjYWxsYmFja1xuICpcbiAqIEBtZXRob2QgcmVuZGVyV2ViR0xcbiAqIEBwYXJhbSByZW5kZXJlciB7V2ViR0xSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUucmVuZGVyV2ViR0wgPSBmdW5jdGlvbihyZW5kZXJHcm91cCwgcHJvamVjdGlvbk1hdHJpeClcbntcblx0Ly8gbm90IHN1cmUgaWYgYm90aCBuZWVkZWQ/IGJ1dCB5YSBoYXZlIGZvciBub3chXG5cdC8vIG92ZXJyaWRlIVxufVxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuUElYSS5CYXNlVGV4dHVyZUNhY2hlID0ge307XG5QSVhJLnRleHR1cmVzVG9VcGRhdGUgPSBbXTtcblBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcblxuLyoqXG4gKiBBIHRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UuIEFsbCB0ZXh0dXJlcyBoYXZlIGEgYmFzZSB0ZXh0dXJlXG4gKlxuICogQGNsYXNzIEJhc2VUZXh0dXJlXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gc291cmNlIHtTdHJpbmd9IHRoZSBzb3VyY2Ugb2JqZWN0IChpbWFnZSBvciBjYW52YXMpXG4gKi9cblBJWEkuQmFzZVRleHR1cmUgPSBmdW5jdGlvbihzb3VyY2UpXG57XG5cdFBJWEkuRXZlbnRUYXJnZXQuY2FsbCggdGhpcyApO1xuXG5cdC8qKlxuXHQgKiBbcmVhZC1vbmx5XSBUaGUgd2lkdGggb2YgdGhlIGJhc2UgdGV4dHVyZSBzZXQgd2hlbiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgd2lkdGhcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy53aWR0aCA9IDEwMDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIGhlaWdodCBvZiB0aGUgYmFzZSB0ZXh0dXJlIHNldCB3aGVuIHRoZSBpbWFnZSBoYXMgbG9hZGVkXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy5oZWlnaHQgPSAxMDA7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIERlc2NyaWJlcyBpZiB0aGUgYmFzZSB0ZXh0dXJlIGhhcyBsb2FkZWQgb3Igbm90XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoYXNMb2FkZWRcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuaGFzTG9hZGVkID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFRoZSBzb3VyY2UgdGhhdCBpcyBsb2FkZWQgdG8gY3JlYXRlIHRoZSB0ZXh0dXJlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzb3VyY2Vcblx0ICogQHR5cGUgSW1hZ2Vcblx0ICovXG5cdHRoaXMuc291cmNlID0gc291cmNlO1xuXG5cdGlmKCFzb3VyY2UpcmV0dXJuO1xuXG5cdGlmKHRoaXMuc291cmNlIGluc3RhbmNlb2YgSW1hZ2UgfHwgdGhpcy5zb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KVxuXHR7XG5cdFx0aWYodGhpcy5zb3VyY2UuY29tcGxldGUpXG5cdFx0e1xuXHRcdFx0dGhpcy5oYXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy53aWR0aCA9IHRoaXMuc291cmNlLndpZHRoO1xuXHRcdFx0dGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG5cblx0XHRcdFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHRoaXMpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdFx0dGhpcy5zb3VyY2Uub25sb2FkID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0XHRzY29wZS5oYXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0XHRzY29wZS53aWR0aCA9IHNjb3BlLnNvdXJjZS53aWR0aDtcblx0XHRcdFx0c2NvcGUuaGVpZ2h0ID0gc2NvcGUuc291cmNlLmhlaWdodDtcblxuXHRcdFx0XHQvLyBhZGQgaXQgdG8gc29tZXdoZXJlLi4uXG5cdFx0XHRcdFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHNjb3BlKTtcblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnbG9hZGVkJywgY29udGVudDogc2NvcGUgfSApO1xuXHRcdFx0fVxuXHRcdFx0Ly9cdHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG5cdFx0fVxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMuaGFzTG9hZGVkID0gdHJ1ZTtcblx0XHR0aGlzLndpZHRoID0gdGhpcy5zb3VyY2Uud2lkdGg7XG5cdFx0dGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG5cblx0XHRQSVhJLnRleHR1cmVzVG9VcGRhdGUucHVzaCh0aGlzKTtcblx0fVxuXG5cdHRoaXMuX3Bvd2VyT2YyID0gZmFsc2U7XG59XG5cblBJWEkuQmFzZVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5CYXNlVGV4dHVyZTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGlzIGJhc2UgdGV4dHVyZVxuICpcbiAqIEBtZXRob2QgZGVzdHJveVxuICovXG5QSVhJLkJhc2VUZXh0dXJlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKVxue1xuXHRpZih0aGlzLnNvdXJjZSBpbnN0YW5jZW9mIEltYWdlKVxuXHR7XG5cdFx0dGhpcy5zb3VyY2Uuc3JjID0gbnVsbDtcblx0fVxuXHR0aGlzLnNvdXJjZSA9IG51bGw7XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kucHVzaCh0aGlzKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYmFzZSB0ZXh0dXJlIGJhc2VkIG9uIGFuIGltYWdlIHVybFxuICogSWYgdGhlIGltYWdlIGlzIG5vdCBpbiB0aGUgYmFzZSB0ZXh0dXJlIGNhY2hlIGl0IHdpbGwgYmUgIGNyZWF0ZWQgYW5kIGxvYWRlZFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZnJvbUltYWdlXG4gKiBAcGFyYW0gaW1hZ2VVcmwge1N0cmluZ30gVGhlIGltYWdlIHVybCBvZiB0aGUgdGV4dHVyZVxuICogQHJldHVybiBCYXNlVGV4dHVyZVxuICovXG5QSVhJLkJhc2VUZXh0dXJlLmZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlVXJsLCBjcm9zc29yaWdpbilcbntcblx0dmFyIGJhc2VUZXh0dXJlID0gUElYSS5CYXNlVGV4dHVyZUNhY2hlW2ltYWdlVXJsXTtcblx0aWYoIWJhc2VUZXh0dXJlKVxuXHR7XG5cdFx0Ly8gbmV3IEltYWdlKCkgYnJlYWtzIHRleCBsb2FkaW5nIGluIHNvbWUgdmVyc2lvbnMgb2YgQ2hyb21lLlxuXHRcdC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjM4MDcxXG5cdFx0dmFyIGltYWdlID0gbmV3IEltYWdlKCk7Ly9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0XHRpZiAoY3Jvc3NvcmlnaW4pXG5cdFx0e1xuXHRcdFx0aW1hZ2UuY3Jvc3NPcmlnaW4gPSAnJztcblx0XHR9XG5cdFx0aW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG5cdFx0YmFzZVRleHR1cmUgPSBuZXcgUElYSS5CYXNlVGV4dHVyZShpbWFnZSk7XG5cdFx0UElYSS5CYXNlVGV4dHVyZUNhY2hlW2ltYWdlVXJsXSA9IGJhc2VUZXh0dXJlO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VUZXh0dXJlO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblBJWEkuVGV4dHVyZUNhY2hlID0ge307XG5QSVhJLkZyYW1lQ2FjaGUgPSB7fTtcblxuLyoqXG4gKiBBIHRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2Ugb3IgcGFydCBvZiBhbiBpbWFnZS4gSXQgY2Fubm90IGJlIGFkZGVkXG4gKiB0byB0aGUgZGlzcGxheSBsaXN0IGRpcmVjdGx5LiBUbyBkbyB0aGlzIHVzZSBQSVhJLlNwcml0ZS4gSWYgbm8gZnJhbWUgaXMgcHJvdmlkZWQgdGhlbiB0aGUgd2hvbGUgaW1hZ2UgaXMgdXNlZFxuICpcbiAqIEBjbGFzcyBUZXh0dXJlXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gYmFzZVRleHR1cmUge0Jhc2VUZXh0dXJlfSBUaGUgYmFzZSB0ZXh0dXJlIHNvdXJjZSB0byBjcmVhdGUgdGhlIHRleHR1cmUgZnJvbVxuICogQHBhcmFtIGZyYW1lIHtSZWN0YW5nbGV9IFRoZSByZWN0YW5nbGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2hvd1xuICovXG5QSVhJLlRleHR1cmUgPSBmdW5jdGlvbihiYXNlVGV4dHVyZSwgZnJhbWUpXG57XG5cdFBJWEkuRXZlbnRUYXJnZXQuY2FsbCggdGhpcyApO1xuXG5cdGlmKCFmcmFtZSlcblx0e1xuXHRcdHRoaXMubm9GcmFtZSA9IHRydWU7XG5cdFx0ZnJhbWUgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEsMSk7XG5cdH1cblxuXHRpZihiYXNlVGV4dHVyZSBpbnN0YW5jZW9mIFBJWEkuVGV4dHVyZSlcblx0XHRiYXNlVGV4dHVyZSA9IGJhc2VUZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSB0ZXh0dXJlIG9mIHRoaXMgdGV4dHVyZVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmFzZVRleHR1cmVcblx0ICogQHR5cGUgQmFzZVRleHR1cmVcblx0ICovXG5cdHRoaXMuYmFzZVRleHR1cmUgPSBiYXNlVGV4dHVyZTtcblxuXHQvKipcblx0ICogVGhlIGZyYW1lIHNwZWNpZmllcyB0aGUgcmVnaW9uIG9mIHRoZSBiYXNlIHRleHR1cmUgdGhhdCB0aGlzIHRleHR1cmUgdXNlc1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgZnJhbWVcblx0ICogQHR5cGUgUmVjdGFuZ2xlXG5cdCAqL1xuXHR0aGlzLmZyYW1lID0gZnJhbWU7XG5cblx0LyoqXG5cdCAqIFRoZSB0cmltIHBvaW50XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0cmltXG5cdCAqIEB0eXBlIFBvaW50XG5cdCAqL1xuXHR0aGlzLnRyaW0gPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdHRoaXMuc2NvcGUgPSB0aGlzO1xuXG5cdGlmKGJhc2VUZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdGlmKHRoaXMubm9GcmFtZSlmcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsIGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQpO1xuXHRcdC8vY29uc29sZS5sb2coZnJhbWUpXG5cblx0XHR0aGlzLnNldEZyYW1lKGZyYW1lKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdGJhc2VUZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkZWQnLCBmdW5jdGlvbigpeyBzY29wZS5vbkJhc2VUZXh0dXJlTG9hZGVkKCl9ICk7XG5cdH1cbn1cblxuUElYSS5UZXh0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuVGV4dHVyZTtcblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB0aGUgYmFzZSB0ZXh0dXJlIGlzIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25CYXNlVGV4dHVyZUxvYWRlZFxuICogQHBhcmFtIGV2ZW50XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlRleHR1cmUucHJvdG90eXBlLm9uQmFzZVRleHR1cmVMb2FkZWQgPSBmdW5jdGlvbihldmVudClcbntcblx0dmFyIGJhc2VUZXh0dXJlID0gdGhpcy5iYXNlVGV4dHVyZTtcblx0YmFzZVRleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWRlZCcsIHRoaXMub25Mb2FkZWQgKTtcblxuXHRpZih0aGlzLm5vRnJhbWUpdGhpcy5mcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsIGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQpO1xuXHR0aGlzLm5vRnJhbWUgPSBmYWxzZTtcblx0dGhpcy53aWR0aCA9IHRoaXMuZnJhbWUud2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gdGhpcy5mcmFtZS5oZWlnaHQ7XG5cblx0dGhpcy5zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICd1cGRhdGUnLCBjb250ZW50OiB0aGlzIH0gKTtcbn1cblxuLyoqXG4gKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGRlc3Ryb3lcbiAqIEBwYXJhbSBkZXN0cm95QmFzZSB7Qm9vbGVhbn0gV2hldGhlciB0byBkZXN0cm95IHRoZSBiYXNlIHRleHR1cmUgYXMgd2VsbFxuICovXG5QSVhJLlRleHR1cmUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkZXN0cm95QmFzZSlcbntcblx0aWYoZGVzdHJveUJhc2UpdGhpcy5iYXNlVGV4dHVyZS5kZXN0cm95KCk7XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSByZWN0YW5nbGUgcmVnaW9uIG9mIHRoZSBiYXNlVGV4dHVyZVxuICpcbiAqIEBtZXRob2Qgc2V0RnJhbWVcbiAqIEBwYXJhbSBmcmFtZSB7UmVjdGFuZ2xlfSBUaGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2V0IGl0IHRvXG4gKi9cblBJWEkuVGV4dHVyZS5wcm90b3R5cGUuc2V0RnJhbWUgPSBmdW5jdGlvbihmcmFtZSlcbntcblx0dGhpcy5mcmFtZSA9IGZyYW1lO1xuXHR0aGlzLndpZHRoID0gZnJhbWUud2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gZnJhbWUuaGVpZ2h0O1xuXG5cdGlmKGZyYW1lLnggKyBmcmFtZS53aWR0aCA+IHRoaXMuYmFzZVRleHR1cmUud2lkdGggfHwgZnJhbWUueSArIGZyYW1lLmhlaWdodCA+IHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0KVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVGV4dHVyZSBFcnJvcjogZnJhbWUgZG9lcyBub3QgZml0IGluc2lkZSB0aGUgYmFzZSBUZXh0dXJlIGRpbWVuc2lvbnMgXCIgKyB0aGlzKTtcblx0fVxuXG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xuXG5cdFBJWEkuVGV4dHVyZS5mcmFtZVVwZGF0ZXMucHVzaCh0aGlzKTtcblx0Ly90aGlzLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogJ3VwZGF0ZScsIGNvbnRlbnQ6IHRoaXMgfSApO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGFuIGltYWdlIHVybFxuICogSWYgdGhlIGltYWdlIGlzIG5vdCBpbiB0aGUgdGV4dHVyZSBjYWNoZSBpdCB3aWxsIGJlICBjcmVhdGVkIGFuZCBsb2FkZWRcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIGZyb21JbWFnZVxuICogQHBhcmFtIGltYWdlVXJsIHtTdHJpbmd9IFRoZSBpbWFnZSB1cmwgb2YgdGhlIHRleHR1cmVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICogQHJldHVybiBUZXh0dXJlXG4gKi9cblBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UgPSBmdW5jdGlvbihpbWFnZVVybCwgY3Jvc3NvcmlnaW4pXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbaW1hZ2VVcmxdO1xuXG5cdGlmKCF0ZXh0dXJlKVxuXHR7XG5cdFx0dGV4dHVyZSA9IG5ldyBQSVhJLlRleHR1cmUoUElYSS5CYXNlVGV4dHVyZS5mcm9tSW1hZ2UoaW1hZ2VVcmwsIGNyb3Nzb3JpZ2luKSk7XG5cdFx0UElYSS5UZXh0dXJlQ2FjaGVbaW1hZ2VVcmxdID0gdGV4dHVyZTtcblx0fVxuXG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGEgZnJhbWUgaWRcbiAqIElmIHRoZSBmcmFtZSBpZCBpcyBub3QgaW4gdGhlIHRleHR1cmUgY2FjaGUgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIGZyb21GcmFtZVxuICogQHBhcmFtIGZyYW1lSWQge1N0cmluZ30gVGhlIGZyYW1lIGlkIG9mIHRoZSB0ZXh0dXJlXG4gKiBAcmV0dXJuIFRleHR1cmVcbiAqL1xuUElYSS5UZXh0dXJlLmZyb21GcmFtZSA9IGZ1bmN0aW9uKGZyYW1lSWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbZnJhbWVJZF07XG5cdGlmKCF0ZXh0dXJlKXRocm93IG5ldyBFcnJvcihcIlRoZSBmcmFtZUlkICdcIisgZnJhbWVJZCArXCInIGRvZXMgbm90IGV4aXN0IGluIHRoZSB0ZXh0dXJlIGNhY2hlIFwiICsgdGhpcyk7XG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGEgY2FudmFzIGVsZW1lbnRcbiAqIElmIHRoZSBjYW52YXMgaXMgbm90IGluIHRoZSB0ZXh0dXJlIGNhY2hlIGl0IHdpbGwgYmUgIGNyZWF0ZWQgYW5kIGxvYWRlZFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZnJvbUNhbnZhc1xuICogQHBhcmFtIGNhbnZhcyB7Q2FudmFzfSBUaGUgY2FudmFzIGVsZW1lbnQgc291cmNlIG9mIHRoZSB0ZXh0dXJlXG4gKiBAcmV0dXJuIFRleHR1cmVcbiAqL1xuUElYSS5UZXh0dXJlLmZyb21DYW52YXMgPSBmdW5jdGlvbihjYW52YXMpXG57XG5cdHZhclx0YmFzZVRleHR1cmUgPSBuZXcgUElYSS5CYXNlVGV4dHVyZShjYW52YXMpO1xuXHRyZXR1cm4gbmV3IFBJWEkuVGV4dHVyZShiYXNlVGV4dHVyZSk7XG59XG5cblxuLyoqXG4gKiBBZGRzIGEgdGV4dHVyZSB0byB0aGUgdGV4dHVyZUNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgYWRkVGV4dHVyZVRvQ2FjaGVcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfVxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCB0aGF0IHRoZSB0ZXh0dXJlIHdpbGwgYmUgc3RvcmVkIGFnYWluc3QuXG4gKi9cblBJWEkuVGV4dHVyZS5hZGRUZXh0dXJlVG9DYWNoZSA9IGZ1bmN0aW9uKHRleHR1cmUsIGlkKVxue1xuXHRQSVhJLlRleHR1cmVDYWNoZVtpZF0gPSB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIHRleHR1cmUgZnJvbSB0aGUgdGV4dHVyZUNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgcmVtb3ZlVGV4dHVyZUZyb21DYWNoZVxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgdGV4dHVyZSB0byBiZSByZW1vdmVkXG4gKiBAcmV0dXJuIHtUZXh0dXJlfSB0aGUgdGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkXG4gKi9cblBJWEkuVGV4dHVyZS5yZW1vdmVUZXh0dXJlRnJvbUNhY2hlID0gZnVuY3Rpb24oaWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbaWRdXG5cdFBJWEkuVGV4dHVyZUNhY2hlW2lkXSA9IG51bGw7XG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vLyB0aGlzIGlzIG1vcmUgZm9yIHdlYkdMLi4gaXQgY29udGFpbnMgdXBkYXRlZCBmcmFtZXMuLlxuUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcyA9IFtdO1xuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gQSBSZW5kZXJUZXh0dXJlIGlzIGEgc3BlY2lhbCB0ZXh0dXJlIHRoYXQgYWxsb3dzIGFueSBwaXhpIGRpc3BsYXlPYmplY3QgdG8gYmUgcmVuZGVyZWQgdG8gaXQuXG5cbiBfX0hpbnRfXzogQWxsIERpc3BsYXlPYmplY3RzIChleG1wbC4gU3ByaXRlcykgdGhhdCByZW5kZXJzIG9uIFJlbmRlclRleHR1cmUgc2hvdWxkIGJlIHByZWxvYWRlZC4gXG4gT3RoZXJ3aXNlIGJsYWNrIHJlY3RhbmdsZXMgd2lsbCBiZSBkcmF3biBpbnN0ZWFkLiAgXG4gXG4gUmVuZGVyVGV4dHVyZSB0YWtlcyBzbmFwc2hvdCBvZiBEaXNwbGF5T2JqZWN0IHBhc3NlZCB0byByZW5kZXIgbWV0aG9kLiBJZiBEaXNwbGF5T2JqZWN0IGlzIHBhc3NlZCB0byByZW5kZXIgbWV0aG9kLCBwb3NpdGlvbiBhbmQgcm90YXRpb24gb2YgaXQgd2lsbCBiZSBpZ25vcmVkLiBGb3IgZXhhbXBsZTpcbiBcblx0dmFyIHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKDgwMCwgNjAwKTtcblx0dmFyIHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb21JbWFnZShcInNwaW5PYmpfMDEucG5nXCIpO1xuXHRzcHJpdGUucG9zaXRpb24ueCA9IDgwMC8yO1xuXHRzcHJpdGUucG9zaXRpb24ueSA9IDYwMC8yO1xuXHRzcHJpdGUuYW5jaG9yLnggPSAwLjU7XG5cdHNwcml0ZS5hbmNob3IueSA9IDAuNTtcblx0cmVuZGVyVGV4dHVyZS5yZW5kZXIoc3ByaXRlKTtcblxuIFNwcml0ZSBpbiB0aGlzIGNhc2Ugd2lsbCBiZSByZW5kZXJlZCB0byAwLDAgcG9zaXRpb24uIFRvIHJlbmRlciB0aGlzIHNwcml0ZSBhdCBjZW50ZXIgRGlzcGxheU9iamVjdENvbnRhaW5lciBzaG91bGQgYmUgdXNlZDpcblxuXHR2YXIgZG9jID0gbmV3IFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lcigpO1xuXHRkb2MuYWRkQ2hpbGQoc3ByaXRlKTtcblx0cmVuZGVyVGV4dHVyZS5yZW5kZXIoZG9jKTsgIC8vIFJlbmRlcnMgdG8gY2VudGVyIG9mIHJlbmRlclRleHR1cmVcblxuIEBjbGFzcyBSZW5kZXJUZXh0dXJlXG4gQGV4dGVuZHMgVGV4dHVyZVxuIEBjb25zdHJ1Y3RvclxuIEBwYXJhbSB3aWR0aCB7TnVtYmVyfSBUaGUgd2lkdGggb2YgdGhlIHJlbmRlciB0ZXh0dXJlXG4gQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBUaGUgaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZVxuICovXG5QSVhJLlJlbmRlclRleHR1cmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgMTAwO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAxMDA7XG5cblx0dGhpcy5pbmRldGl0eU1hdHJpeCA9IFBJWEkubWF0My5jcmVhdGUoKTtcblxuXHR0aGlzLmZyYW1lID0gbmV3IFBJWEkuUmVjdGFuZ2xlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcdFxuXG5cdGlmKFBJWEkuZ2wpXG5cdHtcblx0XHR0aGlzLmluaXRXZWJHTCgpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMuaW5pdENhbnZhcygpO1xuXHR9XG59XG5cblBJWEkuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLlRleHR1cmUucHJvdG90eXBlICk7XG5QSVhJLlJlbmRlclRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SZW5kZXJUZXh0dXJlO1xuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWJnbCBkYXRhIGZvciB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGluaXRXZWJHTFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5pbml0V2ViR0wgPSBmdW5jdGlvbigpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdHRoaXMuZ2xGcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG5cbiAgIFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmdsRnJhbWVidWZmZXIgKTtcblxuICAgIHRoaXMuZ2xGcmFtZWJ1ZmZlci53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5nbEZyYW1lYnVmZmVyLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1x0XG5cblx0dGhpcy5iYXNlVGV4dHVyZSA9IG5ldyBQSVhJLkJhc2VUZXh0dXJlKCk7XG5cblx0dGhpcy5iYXNlVGV4dHVyZS53aWR0aCA9IHRoaXMud2lkdGg7XG5cdHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICB0aGlzLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKTtcblxuXHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsICB0aGlzLndpZHRoLCAgdGhpcy5oZWlnaHQsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XG5cdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xuXHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcblx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cblx0dGhpcy5iYXNlVGV4dHVyZS5pc1JlbmRlciA9IHRydWU7XG5cblx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmdsRnJhbWVidWZmZXIgKTtcblx0Z2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0aGlzLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUsIDApO1xuXG5cdC8vIGNyZWF0ZSBhIHByb2plY3Rpb24gbWF0cml4Li5cblx0dGhpcy5wcm9qZWN0aW9uID0gbmV3IFBJWEkuUG9pbnQodGhpcy53aWR0aC8yICwgLXRoaXMuaGVpZ2h0LzIpO1xuXG5cdC8vIHNldCB0aGUgY29ycmVjdCByZW5kZXIgZnVuY3Rpb24uLlxuXHR0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyV2ViR0w7XG59XG5cblxuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHRpZihQSVhJLmdsKVxuXHR7XG5cdFx0dGhpcy5wcm9qZWN0aW9uLnggPSB0aGlzLndpZHRoLzJcblx0XHR0aGlzLnByb2plY3Rpb24ueSA9IC10aGlzLmhlaWdodC8yO1xuXHRcblx0XHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuYmFzZVRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdFx0Z2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCAgdGhpcy53aWR0aCwgIHRoaXMuaGVpZ2h0LCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBudWxsKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRcblx0XHR0aGlzLmZyYW1lLndpZHRoID0gdGhpcy53aWR0aFxuXHRcdHRoaXMuZnJhbWUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy5yZW5kZXJlci5yZXNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXHR9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIGNhbnZhcyBkYXRhIGZvciB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGluaXRDYW52YXNcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUuaW5pdENhbnZhcyA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5yZW5kZXJlciA9IG5ldyBQSVhJLkNhbnZhc1JlbmRlcmVyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBudWxsLCAwKTtcblxuXHR0aGlzLmJhc2VUZXh0dXJlID0gbmV3IFBJWEkuQmFzZVRleHR1cmUodGhpcy5yZW5kZXJlci52aWV3KTtcblx0dGhpcy5mcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cblx0dGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlckNhbnZhcztcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZHJhdyB0aGUgZGlzcGxheSBvYmplY3QgdG8gdGhlIHRleHR1cmUuXG4gKlxuICogQG1ldGhvZCByZW5kZXJXZWJHTFxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBkaXNwbGF5IG9iamVjdCB0byByZW5kZXIgdGhpcyB0ZXh0dXJlIG9uXG4gKiBAcGFyYW0gY2xlYXIge0Jvb2xlYW59IElmIHRydWUgdGhlIHRleHR1cmUgd2lsbCBiZSBjbGVhcmVkIGJlZm9yZSB0aGUgZGlzcGxheU9iamVjdCBpcyBkcmF3blxuICogQHByaXZhdGVcbiAqL1xuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZW5kZXJXZWJHTCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHBvc2l0aW9uLCBjbGVhcilcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHQvLyBlbmFibGUgdGhlIGFscGhhIGNvbG9yIG1hc2suLlxuXHRnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7IFxuXG5cdGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcdFxuXG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5nbEZyYW1lYnVmZmVyICk7XG5cblx0aWYoY2xlYXIpXG5cdHtcblx0XHRnbC5jbGVhckNvbG9yKDAsMCwwLCAwKTsgICAgIFxuXHRcdGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXHR9XG5cblx0Ly8gVEhJUyBXSUxMIE1FU1MgV0lUSCBISVQgVEVTVElORyFcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblxuXHQvL1RPRE8gLT8gY3JlYXRlIGEgbmV3IG9uZT8/PyBkb250IHRoaW5rIHNvIVxuXHR2YXIgb3JpZ2luYWxXb3JsZFRyYW5zZm9ybSA9IGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm0gPSBQSVhJLm1hdDMuY3JlYXRlKCk7Ly9zdGhpcy5pbmRldGl0eU1hdHJpeDtcblx0Ly8gbW9kaWZ5IHRvIGZsaXAuLi5cblx0ZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybVs0XSA9IC0xO1xuXHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzVdID0gdGhpcy5wcm9qZWN0aW9uLnkgKiAtMjtcblxuXHRpZihwb3NpdGlvbilcblx0e1xuXHRcdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm1bMl0gPSBwb3NpdGlvbi54O1xuXHRcdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm1bNV0gLT0gcG9zaXRpb24ueTtcblx0fVxuXHRcblx0UElYSS52aXNpYmxlQ291bnQrKztcblx0ZGlzcGxheU9iamVjdC52Y291bnQgPSBQSVhJLnZpc2libGVDb3VudDtcblx0XG5cdGZvcih2YXIgaT0wLGo9Y2hpbGRyZW4ubGVuZ3RoOyBpPGo7IGkrKylcblx0e1xuXHRcdGNoaWxkcmVuW2ldLnVwZGF0ZVRyYW5zZm9ybSgpO1x0XG5cdH1cblxuXHR2YXIgcmVuZGVyR3JvdXAgPSBkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXA7XG5cblx0aWYocmVuZGVyR3JvdXApXG5cdHtcblx0XHRpZihkaXNwbGF5T2JqZWN0ID09IHJlbmRlckdyb3VwLnJvb3QpXG5cdFx0e1xuXHRcdFx0cmVuZGVyR3JvdXAucmVuZGVyKHRoaXMucHJvamVjdGlvbiwgdGhpcy5nbEZyYW1lYnVmZmVyKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHJlbmRlckdyb3VwLnJlbmRlclNwZWNpZmljKGRpc3BsYXlPYmplY3QsIHRoaXMucHJvamVjdGlvbiwgdGhpcy5nbEZyYW1lYnVmZmVyKTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0aWYoIXRoaXMucmVuZGVyR3JvdXApdGhpcy5yZW5kZXJHcm91cCA9IG5ldyBQSVhJLldlYkdMUmVuZGVyR3JvdXAoZ2wpO1xuXHRcdHRoaXMucmVuZGVyR3JvdXAuc2V0UmVuZGVyYWJsZShkaXNwbGF5T2JqZWN0KTtcblx0XHR0aGlzLnJlbmRlckdyb3VwLnJlbmRlcih0aGlzLnByb2plY3Rpb24sIHRoaXMuZ2xGcmFtZWJ1ZmZlcik7XG5cdH1cblx0XG5cdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm0gPSBvcmlnaW5hbFdvcmxkVHJhbnNmb3JtO1xufVxuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGRyYXcgdGhlIGRpc3BsYXkgb2JqZWN0IHRvIHRoZSB0ZXh0dXJlLlxuICpcbiAqIEBtZXRob2QgcmVuZGVyQ2FudmFzXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH0gVGhlIGRpc3BsYXkgb2JqZWN0IHRvIHJlbmRlciB0aGlzIHRleHR1cmUgb25cbiAqIEBwYXJhbSBjbGVhciB7Qm9vbGVhbn0gSWYgdHJ1ZSB0aGUgdGV4dHVyZSB3aWxsIGJlIGNsZWFyZWQgYmVmb3JlIHRoZSBkaXNwbGF5T2JqZWN0IGlzIGRyYXduXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlJlbmRlclRleHR1cmUucHJvdG90eXBlLnJlbmRlckNhbnZhcyA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHBvc2l0aW9uLCBjbGVhcilcbntcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblxuXHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtID0gUElYSS5tYXQzLmNyZWF0ZSgpO1xuXHRcblx0aWYocG9zaXRpb24pXG5cdHtcblx0XHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzJdID0gcG9zaXRpb24ueDtcblx0XHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzVdID0gcG9zaXRpb24ueTtcblx0fVxuXHRcblxuXHRmb3IodmFyIGk9MCxqPWNoaWxkcmVuLmxlbmd0aDsgaTxqOyBpKyspXG5cdHtcblx0XHRjaGlsZHJlbltpXS51cGRhdGVUcmFuc2Zvcm0oKTtcdFxuXHR9XG5cblx0aWYoY2xlYXIpdGhpcy5yZW5kZXJlci5jb250ZXh0LmNsZWFyUmVjdCgwLDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXJEaXNwbGF5T2JqZWN0KGRpc3BsYXlPYmplY3QpO1xuICAgIFxuICAgIHRoaXMucmVuZGVyZXIuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOyBcbiAgICBcblxuICAvLyAgUElYSS50ZXh0dXJlc1RvVXBkYXRlLnB1c2godGhpcy5iYXNlVGV4dHVyZSk7XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBBIENsYXNzIHRoYXQgbG9hZHMgYSBidW5jaCBvZiBpbWFnZXMgLyBzcHJpdGUgc2hlZXQgLyBiaXRtYXAgZm9udCBmaWxlcy4gT25jZSB0aGVcbiAqIGFzc2V0cyBoYXZlIGJlZW4gbG9hZGVkIHRoZXkgYXJlIGFkZGVkIHRvIHRoZSBQSVhJIFRleHR1cmUgY2FjaGUgYW5kIGNhbiBiZSBhY2Nlc3NlZFxuICogZWFzaWx5IHRocm91Z2ggUElYSS5UZXh0dXJlLmZyb21JbWFnZSgpIGFuZCBQSVhJLlNwcml0ZS5mcm9tSW1hZ2UoKVxuICogV2hlbiBhbGwgaXRlbXMgaGF2ZSBiZWVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcIm9uTG9hZGVkXCIgZXZlbnRcbiAqIEFzIGVhY2ggaW5kaXZpZHVhbCBpdGVtIGlzIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcIm9uUHJvZ3Jlc3NcIiBldmVudFxuICpcbiAqIEBjbGFzcyBBc3NldExvYWRlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQHBhcmFtIHtBcnJheTxTdHJpbmc+fSBhc3NldFVSTHMgYW4gYXJyYXkgb2YgaW1hZ2Uvc3ByaXRlIHNoZWV0IHVybHMgdGhhdCB5b3Ugd291bGQgbGlrZSBsb2FkZWRcbiAqICAgICAgc3VwcG9ydGVkLiBTdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cyBpbmNsdWRlIFwianBlZ1wiLCBcImpwZ1wiLCBcInBuZ1wiLCBcImdpZlwiLiBTdXBwb3J0ZWRcbiAqICAgICAgc3ByaXRlIHNoZWV0IGRhdGEgZm9ybWF0cyBvbmx5IGluY2x1ZGUgXCJKU09OXCIgYXQgdGhpcyB0aW1lLiBTdXBwb3J0ZWQgYml0bWFwIGZvbnRcbiAqICAgICAgZGF0YSBmb3JtYXRzIGluY2x1ZGUgXCJ4bWxcIiBhbmQgXCJmbnRcIi5cbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5QSVhJLkFzc2V0TG9hZGVyID0gZnVuY3Rpb24oYXNzZXRVUkxzLCBjcm9zc29yaWdpbilcbntcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgYXJyYXkgb2YgYXNzZXQgVVJMcyB0aGF0IGFyZSBnb2luZyB0byBiZSBsb2FkZWRcbiAgICAgKlxuXHQgKiBAcHJvcGVydHkgYXNzZXRVUkxzXG5cdCAqIEB0eXBlIEFycmF5PFN0cmluZz5cblx0ICovXG5cdHRoaXMuYXNzZXRVUkxzID0gYXNzZXRVUkxzO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgY3Jvc3NvcmlnaW5cbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICovXG5cdHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIE1hcHMgZmlsZSBleHRlbnNpb24gdG8gbG9hZGVyIHR5cGVzXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgbG9hZGVyc0J5VHlwZVxuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIHRoaXMubG9hZGVyc0J5VHlwZSA9IHtcbiAgICAgICAgXCJqcGdcIjogIFBJWEkuSW1hZ2VMb2FkZXIsXG4gICAgICAgIFwianBlZ1wiOiBQSVhJLkltYWdlTG9hZGVyLFxuICAgICAgICBcInBuZ1wiOiAgUElYSS5JbWFnZUxvYWRlcixcbiAgICAgICAgXCJnaWZcIjogIFBJWEkuSW1hZ2VMb2FkZXIsXG4gICAgICAgIFwianNvblwiOiBQSVhJLkpzb25Mb2FkZXIsXG4gICAgICAgIFwiYW5pbVwiOiBQSVhJLlNwaW5lTG9hZGVyLFxuICAgICAgICBcInhtbFwiOiAgUElYSS5CaXRtYXBGb250TG9hZGVyLFxuICAgICAgICBcImZudFwiOiAgUElYSS5CaXRtYXBGb250TG9hZGVyXG4gICAgfTtcblxuXG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gYW4gaXRlbSBoYXMgbG9hZGVkXG4gKiBAZXZlbnQgb25Qcm9ncmVzc1xuICovXG5cbi8qKlxuICogRmlyZWQgd2hlbiBhbGwgdGhlIGFzc2V0cyBoYXZlIGxvYWRlZFxuICogQGV2ZW50IG9uQ29tcGxldGVcbiAqL1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Bc3NldExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkFzc2V0TG9hZGVyO1xuXG4vKipcbiAqIFN0YXJ0cyBsb2FkaW5nIHRoZSBhc3NldHMgc2VxdWVudGlhbGx5XG4gKlxuICogQG1ldGhvZCBsb2FkXG4gKi9cblBJWEkuQXNzZXRMb2FkZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpXG57XG4gICAgdmFyIHNjb3BlID0gdGhpcztcblxuXHR0aGlzLmxvYWRDb3VudCA9IHRoaXMuYXNzZXRVUkxzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGk9MDsgaSA8IHRoaXMuYXNzZXRVUkxzLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIGZpbGVOYW1lID0gdGhpcy5hc3NldFVSTHNbaV07XG5cdFx0dmFyIGZpbGVUeXBlID0gZmlsZU5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgdmFyIGxvYWRlckNsYXNzID0gdGhpcy5sb2FkZXJzQnlUeXBlW2ZpbGVUeXBlXTtcbiAgICAgICAgaWYoIWxvYWRlckNsYXNzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZpbGVUeXBlICsgXCIgaXMgYW4gdW5zdXBwb3J0ZWQgZmlsZSB0eXBlXCIpO1xuXG4gICAgICAgIHZhciBsb2FkZXIgPSBuZXcgbG9hZGVyQ2xhc3MoZmlsZU5hbWUsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXG4gICAgICAgIGxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2NvcGUub25Bc3NldExvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9hZGVyLmxvYWQoKTtcblx0fVxufTtcblxuLyoqXG4gKiBJbnZva2VkIGFmdGVyIGVhY2ggZmlsZSBpcyBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIG9uQXNzZXRMb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQXNzZXRMb2FkZXIucHJvdG90eXBlLm9uQXNzZXRMb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgdGhpcy5sb2FkQ291bnQtLTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiBcIm9uUHJvZ3Jlc3NcIiwgY29udGVudDogdGhpc30pO1xuXHRpZih0aGlzLm9uUHJvZ3Jlc3MpIHRoaXMub25Qcm9ncmVzcygpO1xuXG5cdGlmKHRoaXMubG9hZENvdW50ID09IDApXG5cdHtcblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6IFwib25Db21wbGV0ZVwiLCBjb250ZW50OiB0aGlzfSk7XG5cdFx0aWYodGhpcy5vbkNvbXBsZXRlKSB0aGlzLm9uQ29tcGxldGUoKTtcblx0fVxufTtcblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIGpzb24gZmlsZSBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gZGF0YSBhbmQgcGFyc2luZyBpdFxuICogV2hlbiBsb2FkZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJsb2FkZWRcIiBldmVudFxuICogSWYgbG9hZCBmYWlsZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJlcnJvclwiIGV2ZW50XG4gKlxuICogQGNsYXNzIEpzb25Mb2FkZXJcbiAqIEB1c2VzIEV2ZW50VGFyZ2V0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB1cmwge1N0cmluZ30gVGhlIHVybCBvZiB0aGUgSlNPTiBmaWxlXG4gKiBAcGFyYW0gY3Jvc3NvcmlnaW4ge0Jvb2xlYW59IFdoZXRoZXIgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3NvcmlnaW5cbiAqL1xuUElYSS5Kc29uTG9hZGVyID0gZnVuY3Rpb24gKHVybCwgY3Jvc3NvcmlnaW4pIHtcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB1cmxcblx0ICogQHR5cGUgU3RyaW5nXG5cdCAqL1xuXHR0aGlzLnVybCA9IHVybDtcblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBjcm9zc29yaWdpblxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmNyb3Nzb3JpZ2luID0gY3Jvc3NvcmlnaW47XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFRoZSBiYXNlIHVybCBvZiB0aGUgYml0bWFwIGZvbnQgZGF0YVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmFzZVVybFxuXHQgKiBAdHlwZSBTdHJpbmdcblx0ICogQHJlYWRPbmx5XG5cdCAqL1xuXHR0aGlzLmJhc2VVcmwgPSB1cmwucmVwbGFjZSgvW15cXC9dKiQvLCBcIlwiKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gV2hldGhlciB0aGUgZGF0YSBoYXMgbG9hZGVkIHlldFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbG9hZGVkXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICogQHJlYWRPbmx5XG5cdCAqL1xuXHR0aGlzLmxvYWRlZCA9IGZhbHNlO1xuXG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Kc29uTG9hZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuSnNvbkxvYWRlcjtcblxuLyoqXG4gKiBMb2FkcyB0aGUgSlNPTiBkYXRhXG4gKlxuICogQG1ldGhvZCBsb2FkXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5hamF4UmVxdWVzdCA9IG5ldyBBamF4UmVxdWVzdCgpO1xuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR0aGlzLmFqYXhSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRzY29wZS5vbkpTT05Mb2FkZWQoKTtcblx0fTtcblxuXHR0aGlzLmFqYXhSZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdGhpcy51cmwsIHRydWUpO1xuXHRpZiAodGhpcy5hamF4UmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKSB0aGlzLmFqYXhSZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXHR0aGlzLmFqYXhSZXF1ZXN0LnNlbmQobnVsbCk7XG59O1xuXG4vKipcbiAqIEludm9rZSB3aGVuIEpTT04gZmlsZSBpcyBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIG9uSlNPTkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5Kc29uTG9hZGVyLnByb3RvdHlwZS5vbkpTT05Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh0aGlzLmFqYXhSZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcdGlmICh0aGlzLmFqYXhSZXF1ZXN0LnN0YXR1cyA9PSAyMDAgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImh0dHBcIikgPT0gLTEpIHtcblx0XHRcdHRoaXMuanNvbiA9IEpTT04ucGFyc2UodGhpcy5hamF4UmVxdWVzdC5yZXNwb25zZVRleHQpO1xuXG5cdFx0XHRpZih0aGlzLmpzb24uZnJhbWVzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzcHJpdGUgc2hlZXRcblx0XHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcdFx0dmFyIHRleHR1cmVVcmwgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLmpzb24ubWV0YS5pbWFnZTtcblx0XHRcdFx0dmFyIGltYWdlID0gbmV3IFBJWEkuSW1hZ2VMb2FkZXIodGV4dHVyZVVybCwgdGhpcy5jcm9zc29yaWdpbik7XG5cdFx0XHRcdHZhciBmcmFtZURhdGEgPSB0aGlzLmpzb24uZnJhbWVzO1xuXG5cdFx0XHRcdHRoaXMudGV4dHVyZSA9IGltYWdlLnRleHR1cmUuYmFzZVRleHR1cmU7XG5cdFx0XHRcdGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0c2NvcGUub25Mb2FkZWQoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Zm9yICh2YXIgaSBpbiBmcmFtZURhdGEpIHtcblx0XHRcdFx0XHR2YXIgcmVjdCA9IGZyYW1lRGF0YVtpXS5mcmFtZTtcblx0XHRcdFx0XHRpZiAocmVjdCkge1xuXHRcdFx0XHRcdFx0UElYSS5UZXh0dXJlQ2FjaGVbaV0gPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGV4dHVyZSwge1xuXHRcdFx0XHRcdFx0XHR4OiByZWN0LngsXG5cdFx0XHRcdFx0XHRcdHk6IHJlY3QueSxcblx0XHRcdFx0XHRcdFx0d2lkdGg6IHJlY3Qudyxcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiByZWN0Lmhcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKGZyYW1lRGF0YVtpXS50cmltbWVkKSB7XG5cdFx0XHRcdFx0XHRcdC8vdmFyIHJlYWxTaXplID0gZnJhbWVEYXRhW2ldLnNwcml0ZVNvdXJjZVNpemU7XG5cdFx0XHRcdFx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldLnJlYWxTaXplID0gZnJhbWVEYXRhW2ldLnNwcml0ZVNvdXJjZVNpemU7XG5cdFx0XHRcdFx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldLnRyaW0ueCA9IDA7IC8vIChyZWFsU2l6ZS54IC8gcmVjdC53KVxuXHRcdFx0XHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIG9mZnNldCFcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpbWFnZS5sb2FkKCk7XG5cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYodGhpcy5qc29uLmJvbmVzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzcGluZSBhbmltYXRpb25cblx0XHRcdFx0dmFyIHNwaW5lSnNvblBhcnNlciA9IG5ldyBzcGluZS5Ta2VsZXRvbkpzb24oKTtcblx0XHRcdFx0dmFyIHNrZWxldG9uRGF0YSA9IHNwaW5lSnNvblBhcnNlci5yZWFkU2tlbGV0b25EYXRhKHRoaXMuanNvbik7XG5cdFx0XHRcdFBJWEkuQW5pbUNhY2hlW3RoaXMudXJsXSA9IHNrZWxldG9uRGF0YTtcblx0XHRcdFx0dGhpcy5vbkxvYWRlZCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLm9uTG9hZGVkKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLm9uRXJyb3IoKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogSW52b2tlIHdoZW4ganNvbiBmaWxlIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25Mb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubG9hZGVkID0gdHJ1ZTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHtcblx0XHR0eXBlOiBcImxvYWRlZFwiLFxuXHRcdGNvbnRlbnQ6IHRoaXNcblx0fSk7XG59O1xuXG4vKipcbiAqIEludm9rZSB3aGVuIGVycm9yIG9jY3VyZWRcbiAqXG4gKiBAbWV0aG9kIG9uRXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHtcblx0XHR0eXBlOiBcImVycm9yXCIsXG5cdFx0Y29udGVudDogdGhpc1xuXHR9KTtcbn07XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIHNwcml0ZSBzaGVldCBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gc3ByaXRlIHNoZWV0IGRhdGFcbiAqIFRvIGdlbmVyYXRlIHRoZSBkYXRhIHlvdSBjYW4gdXNlIGh0dHA6Ly93d3cuY29kZWFuZHdlYi5jb20vdGV4dHVyZXBhY2tlciBhbmQgcHVibGlzaCB0aGUgXCJKU09OXCIgZm9ybWF0XG4gKiBUaGVyZSBpcyBhIGZyZWUgdmVyc2lvbiBzbyB0aGF0cyBuaWNlLCBhbHRob3VnaCB0aGUgcGFpZCB2ZXJzaW9uIGlzIGdyZWF0IHZhbHVlIGZvciBtb25leS5cbiAqIEl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgU3ByaXRlIHNoZWV0cyAoYWxzbyBrbm93IGFzIHRleHR1cmUgYXRsYXNcIikgYXMgaXQgbWVhbnMgc3ByaXRlXCJzIGNhbiBiZSBiYXRjaGVkIGFuZCBkcmF3biB0b2dldGhlciBmb3IgaGlnaGx5IGluY3JlYXNlZCByZW5kZXJpbmcgc3BlZWQuXG4gKiBPbmNlIHRoZSBkYXRhIGhhcyBiZWVuIGxvYWRlZCB0aGUgZnJhbWVzIGFyZSBzdG9yZWQgaW4gdGhlIFBJWEkgdGV4dHVyZSBjYWNoZSBhbmQgY2FuIGJlIGFjY2Vzc2VkIHRob3VnaCBQSVhJLlRleHR1cmUuZnJvbUZyYW1lSWQoKSBhbmQgUElYSS5TcHJpdGUuZnJvbUZyb21lSWQoKVxuICogVGhpcyBsb2FkZXIgd2lsbCBhbHNvIGxvYWQgdGhlIGltYWdlIGZpbGUgdGhhdCB0aGUgU3ByaXRlc2hlZXQgcG9pbnRzIHRvIGFzIHdlbGwgYXMgdGhlIGRhdGEuXG4gKiBXaGVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcImxvYWRlZFwiIGV2ZW50XG4gKlxuICogQGNsYXNzIFNwcml0ZVNoZWV0TG9hZGVyXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIHNwcml0ZSBzaGVldCBKU09OIGZpbGVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5cblBJWEkuU3ByaXRlU2hlZXRMb2FkZXIgPSBmdW5jdGlvbiAodXJsLCBjcm9zc29yaWdpbikge1xuXHQvKlxuXHQgKiBpIHVzZSB0ZXh0dXJlIHBhY2tlciB0byBsb2FkIHRoZSBhc3NldHMuLlxuXHQgKiBodHRwOi8vd3d3LmNvZGVhbmR3ZWIuY29tL3RleHR1cmVwYWNrZXJcblx0ICogbWFrZSBzdXJlIHRvIHNldCB0aGUgZm9ybWF0IGFzIFwiSlNPTlwiXG5cdCAqL1xuXHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cblx0LyoqXG5cdCAqIFRoZSB1cmwgb2YgdGhlIGJpdG1hcCBmb250IGRhdGFcblx0ICpcblx0ICogQHByb3BlcnR5IHVybFxuXHQgKiBAdHlwZSBTdHJpbmdcblx0ICovXG5cdHRoaXMudXJsID0gdXJsO1xuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zcyBvcmlnaW5cblx0ICpcblx0ICogQHByb3BlcnR5IGNyb3Nzb3JpZ2luXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICovXG5cdHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIGJhc2UgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBiYXNlVXJsXG5cdCAqIEB0eXBlIFN0cmluZ1xuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuYmFzZVVybCA9IHVybC5yZXBsYWNlKC9bXlxcL10qJC8sIFwiXCIpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYmVpbmcgbG9hZGVkXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgdGV4dHVyZVxuICAgICAqIEB0eXBlIFRleHR1cmVcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYW1lcyBvZiB0aGUgc3ByaXRlIHNoZWV0XG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgZnJhbWVzXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG5cdHRoaXMuZnJhbWVzID0ge307XG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwcml0ZVNoZWV0TG9hZGVyO1xuXG4vKipcbiAqIFRoaXMgd2lsbCBiZWdpbiBsb2FkaW5nIHRoZSBKU09OIGZpbGVcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNjb3BlID0gdGhpcztcblx0dmFyIGpzb25Mb2FkZXIgPSBuZXcgUElYSS5Kc29uTG9hZGVyKHRoaXMudXJsLCB0aGlzLmNyb3Nzb3JpZ2luKTtcblx0anNvbkxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHNjb3BlLmpzb24gPSBldmVudC5jb250ZW50Lmpzb247XG5cdFx0c2NvcGUub25KU09OTG9hZGVkKCk7XG5cdH0pO1xuXHRqc29uTG9hZGVyLmxvYWQoKTtcbn07XG5cbi8qKlxuICogSW52b2tlIHdoZW4gSlNPTiBmaWxlIGlzIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25KU09OTG9hZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlNwcml0ZVNoZWV0TG9hZGVyLnByb3RvdHlwZS5vbkpTT05Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzY29wZSA9IHRoaXM7XG5cdHZhciB0ZXh0dXJlVXJsID0gdGhpcy5iYXNlVXJsICsgdGhpcy5qc29uLm1ldGEuaW1hZ2U7XG5cdHZhciBpbWFnZSA9IG5ldyBQSVhJLkltYWdlTG9hZGVyKHRleHR1cmVVcmwsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXHR2YXIgZnJhbWVEYXRhID0gdGhpcy5qc29uLmZyYW1lcztcblxuXHR0aGlzLnRleHR1cmUgPSBpbWFnZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXHRpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHNjb3BlLm9uTG9hZGVkKCk7XG5cdH0pO1xuXG5cdGZvciAodmFyIGkgaW4gZnJhbWVEYXRhKSB7XG5cdFx0dmFyIHJlY3QgPSBmcmFtZURhdGFbaV0uZnJhbWU7XG5cdFx0aWYgKHJlY3QpIHtcblx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldID0gbmV3IFBJWEkuVGV4dHVyZSh0aGlzLnRleHR1cmUsIHtcblx0XHRcdFx0eDogcmVjdC54LFxuXHRcdFx0XHR5OiByZWN0LnksXG5cdFx0XHRcdHdpZHRoOiByZWN0LncsXG5cdFx0XHRcdGhlaWdodDogcmVjdC5oXG5cdFx0XHR9KTtcblx0XHRcdGlmIChmcmFtZURhdGFbaV0udHJpbW1lZCkge1xuXHRcdFx0XHQvL3ZhciByZWFsU2l6ZSA9IGZyYW1lRGF0YVtpXS5zcHJpdGVTb3VyY2VTaXplO1xuXHRcdFx0XHRQSVhJLlRleHR1cmVDYWNoZVtpXS5yZWFsU2l6ZSA9IGZyYW1lRGF0YVtpXS5zcHJpdGVTb3VyY2VTaXplO1xuXHRcdFx0XHRQSVhJLlRleHR1cmVDYWNoZVtpXS50cmltLnggPSAwOyAvLyAocmVhbFNpemUueCAvIHJlY3Qudylcblx0XHRcdFx0Ly8gY2FsY3VsYXRlIHRoZSBvZmZzZXQhXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aW1hZ2UubG9hZCgpO1xufTtcbi8qKlxuICogSW52b2tlIHdoZW4gYWxsIGZpbGVzIGFyZSBsb2FkZWQgKGpzb24gYW5kIHRleHR1cmUpXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuZGlzcGF0Y2hFdmVudCh7XG5cdFx0dHlwZTogXCJsb2FkZWRcIixcblx0XHRjb250ZW50OiB0aGlzXG5cdH0pO1xufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoZSBpbWFnZSBsb2FkZXIgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgaW1hZ2VzIGZpbGUgZm9ybWF0cyAoXCJqcGVnXCIsIFwianBnXCIsIFwicG5nXCIgYW5kIFwiZ2lmXCIpXG4gKiBPbmNlIHRoZSBpbWFnZSBoYXMgYmVlbiBsb2FkZWQgaXQgaXMgc3RvcmVkIGluIHRoZSBQSVhJIHRleHR1cmUgY2FjaGUgYW5kIGNhbiBiZSBhY2Nlc3NlZCB0aG91Z2ggUElYSS5UZXh0dXJlLmZyb21GcmFtZUlkKCkgYW5kIFBJWEkuU3ByaXRlLmZyb21Gcm9tZUlkKClcbiAqIFdoZW4gbG9hZGVkIHRoaXMgY2xhc3Mgd2lsbCBkaXNwYXRjaCBhICdsb2FkZWQnIGV2ZW50XG4gKlxuICogQGNsYXNzIEltYWdlTG9hZGVyXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIGltYWdlXG4gKiBAcGFyYW0gY3Jvc3NvcmlnaW4ge0Jvb2xlYW59IFdoZXRoZXIgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3NvcmlnaW5cbiAqL1xuUElYSS5JbWFnZUxvYWRlciA9IGZ1bmN0aW9uKHVybCwgY3Jvc3NvcmlnaW4pXG57XG4gICAgUElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYmVpbmcgbG9hZGVkXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgdGV4dHVyZVxuICAgICAqIEB0eXBlIFRleHR1cmVcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBQSVhJLlRleHR1cmUuZnJvbUltYWdlKHVybCwgY3Jvc3NvcmlnaW4pO1xuXG4gICAgLyoqXG4gICAgICogaWYgdGhlIGltYWdlIGlzIGxvYWRlZCB3aXRoIGxvYWRGcmFtZWRTcHJpdGVTaGVldFxuICAgICAqIGZyYW1lcyB3aWxsIGNvbnRhaW4gdGhlIHNwcml0ZSBzaGVldCBmcmFtZXNcbiAgICAgKlxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVzID0gW107XG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkltYWdlTG9hZGVyO1xuXG4vKipcbiAqIExvYWRzIGltYWdlIG9yIHRha2VzIGl0IGZyb20gY2FjaGVcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKClcbntcbiAgICBpZighdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlLmhhc0xvYWRlZClcbiAgICB7XG4gICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICAgIHRoaXMudGV4dHVyZS5iYXNlVGV4dHVyZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2NvcGUub25Mb2FkZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIHRoaXMub25Mb2FkZWQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBpbWFnZSBmaWxlIGlzIGxvYWRlZCBvciBpdCBpcyBhbHJlYWR5IGNhY2hlZCBhbmQgcmVhZHkgdG8gdXNlXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiBcImxvYWRlZFwiLCBjb250ZW50OiB0aGlzfSk7XG59O1xuXG4vKipcbiAqIExvYWRzIGltYWdlIGFuZCBzcGxpdCBpdCB0byB1bmlmb3JtIHNpemVkIGZyYW1lc1xuICpcbiAqXG4gKiBAbWV0aG9kIGxvYWRGcmFtZWRTcHJpdGVTaGVldFxuICogQHBhcmFtIGZyYW1lV2lkdGgge051bWJlcn0gd2l0aCBvZiBlYWNoIGZyYW1lXG4gKiBAcGFyYW0gZnJhbWVIZWlnaHQge051bWJlcn0gaGVpZ2h0IG9mIGVhY2ggZnJhbWVcbiAqIEBwYXJhbSB0ZXh0dXJlTmFtZSB7U3RyaW5nfSBpZiBnaXZlbiwgdGhlIGZyYW1lcyB3aWxsIGJlIGNhY2hlZCBpbiA8dGV4dHVyZU5hbWU+LTxvcmQ+IGZvcm1hdCBcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUubG9hZEZyYW1lZFNwcml0ZVNoZWV0ID0gZnVuY3Rpb24oZnJhbWVXaWR0aCwgZnJhbWVIZWlnaHQsIHRleHR1cmVOYW1lKVxue1xuICAgIHRoaXMuZnJhbWVzID0gW107XG4gICAgdmFyIGNvbHMgPSBNYXRoLmZsb29yKHRoaXMudGV4dHVyZS53aWR0aCAvIGZyYW1lV2lkdGgpO1xuICAgIHZhciByb3dzID0gTWF0aC5mbG9vcih0aGlzLnRleHR1cmUuaGVpZ2h0IC8gZnJhbWVIZWlnaHQpO1xuXG4gICAgdmFyIGk9MDtcbiAgICBmb3IgKHZhciB5PTA7IHk8cm93czsgeSsrKVxuICAgIHtcbiAgICAgICAgZm9yICh2YXIgeD0wOyB4PGNvbHM7IHgrKyxpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFBJWEkuVGV4dHVyZSh0aGlzLnRleHR1cmUsIHtcbiAgICAgICAgICAgICAgICB4OiB4KmZyYW1lV2lkdGgsXG4gICAgICAgICAgICAgICAgeTogeSpmcmFtZUhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogZnJhbWVXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGZyYW1lSGVpZ2h0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5mcmFtZXMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlTmFtZSkgUElYSS5UZXh0dXJlQ2FjaGVbdGV4dHVyZU5hbWUrJy0nK2ldID0gdGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmKCF0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKVxuICAgIHtcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICAgICAgdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzY29wZS5vbkxvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdGhpcy5vbkxvYWRlZCgpO1xuICAgIH1cbn07XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIHhtbCBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIFhNTCBiaXRtYXAgZm9udCBkYXRhIChcInhtbFwiIG9yIFwiZm50XCIpXG4gKiBUbyBnZW5lcmF0ZSB0aGUgZGF0YSB5b3UgY2FuIHVzZSBodHRwOi8vd3d3LmFuZ2VsY29kZS5jb20vcHJvZHVjdHMvYm1mb250L1xuICogVGhpcyBsb2FkZXIgd2lsbCBhbHNvIGxvYWQgdGhlIGltYWdlIGZpbGUgYXMgdGhlIGRhdGEuXG4gKiBXaGVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcImxvYWRlZFwiIGV2ZW50XG4gKlxuICogQGNsYXNzIEJpdG1hcEZvbnRMb2FkZXJcbiAqIEB1c2VzIEV2ZW50VGFyZ2V0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB1cmwge1N0cmluZ30gVGhlIHVybCBvZiB0aGUgc3ByaXRlIHNoZWV0IEpTT04gZmlsZVxuICogQHBhcmFtIGNyb3Nzb3JpZ2luIHtCb29sZWFufSBXaGV0aGVyIHJlcXVlc3RzIHNob3VsZCBiZSB0cmVhdGVkIGFzIGNyb3Nzb3JpZ2luXG4gKi9cblBJWEkuQml0bWFwRm9udExvYWRlciA9IGZ1bmN0aW9uKHVybCwgY3Jvc3NvcmlnaW4pXG57XG4gICAgLypcbiAgICAgKiBpIHVzZSB0ZXh0dXJlIHBhY2tlciB0byBsb2FkIHRoZSBhc3NldHMuLlxuICAgICAqIGh0dHA6Ly93d3cuY29kZWFuZHdlYi5jb20vdGV4dHVyZXBhY2tlclxuICAgICAqIG1ha2Ugc3VyZSB0byBzZXQgdGhlIGZvcm1hdCBhcyBcIkpTT05cIlxuICAgICAqL1xuICAgIFBJWEkuRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB1cmwgb2YgdGhlIGJpdG1hcCBmb250IGRhdGFcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB1cmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKi9cbiAgICB0aGlzLnVybCA9IHVybDtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHJlcXVlc3RzIHNob3VsZCBiZSB0cmVhdGVkIGFzIGNyb3NzIG9yaWdpblxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGNyb3Nzb3JpZ2luXG4gICAgICogQHR5cGUgQm9vbGVhblxuICAgICAqL1xuICAgIHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIFtyZWFkLW9ubHldIFRoZSBiYXNlIHVybCBvZiB0aGUgYml0bWFwIGZvbnQgZGF0YVxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGJhc2VVcmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLmJhc2VVcmwgPSB1cmwucmVwbGFjZSgvW15cXC9dKiQvLCBcIlwiKTtcblxuICAgIC8qKlxuICAgICAqIFtyZWFkLW9ubHldIFRoZSB0ZXh0dXJlIG9mIHRoZSBiaXRtYXAgZm9udFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGJhc2VVcmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBudWxsO1xufTtcblxuLy8gY29uc3RydWN0b3JcblBJWEkuQml0bWFwRm9udExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkJpdG1hcEZvbnRMb2FkZXI7XG5cbi8qKlxuICogTG9hZHMgdGhlIFhNTCBmb250IGRhdGFcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5CaXRtYXBGb250TG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oKVxue1xuICAgIHRoaXMuYWpheFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgIHRoaXMuYWpheFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgc2NvcGUub25YTUxMb2FkZWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5hamF4UmVxdWVzdC5vcGVuKFwiR0VUXCIsIHRoaXMudXJsLCB0cnVlKTtcbiAgICBpZiAodGhpcy5hamF4UmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKSB0aGlzLmFqYXhSZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgdGhpcy5hamF4UmVxdWVzdC5zZW5kKG51bGwpXG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBYTUwgZmlsZSBpcyBsb2FkZWQsIHBhcnNlcyB0aGUgZGF0YVxuICpcbiAqIEBtZXRob2Qgb25YTUxMb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQml0bWFwRm9udExvYWRlci5wcm90b3R5cGUub25YTUxMb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgaWYgKHRoaXMuYWpheFJlcXVlc3QucmVhZHlTdGF0ZSA9PSA0KVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuYWpheFJlcXVlc3Quc3RhdHVzID09IDIwMCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKFwiaHR0cFwiKSA9PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRleHR1cmVVcmwgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFnZVwiKVswXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImZpbGVcIikubm9kZVZhbHVlO1xuICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IFBJWEkuSW1hZ2VMb2FkZXIodGV4dHVyZVVybCwgdGhpcy5jcm9zc29yaWdpbik7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmUgPSBpbWFnZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5mb1wiKVswXTtcbiAgICAgICAgICAgIHZhciBjb21tb24gPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY29tbW9uXCIpWzBdO1xuICAgICAgICAgICAgZGF0YS5mb250ID0gaW5mby5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImZhY2VcIikubm9kZVZhbHVlO1xuICAgICAgICAgICAgZGF0YS5zaXplID0gcGFyc2VJbnQoaW5mby5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInNpemVcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICBkYXRhLmxpbmVIZWlnaHQgPSBwYXJzZUludChjb21tb24uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJsaW5lSGVpZ2h0XCIpLm5vZGVWYWx1ZSwgMTApO1xuICAgICAgICAgICAgZGF0YS5jaGFycyA9IHt9O1xuXG4gICAgICAgICAgICAvL3BhcnNlIGxldHRlcnNcbiAgICAgICAgICAgIHZhciBsZXR0ZXJzID0gdGhpcy5hamF4UmVxdWVzdC5yZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNoYXJcIik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV0dGVycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaWRcIikubm9kZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZVJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGxldHRlcnNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ4XCIpLm5vZGVWYWx1ZSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieVwiKS5ub2RlVmFsdWUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobGV0dGVyc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcIndpZHRoXCIpLm5vZGVWYWx1ZSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaGVpZ2h0XCIpLm5vZGVWYWx1ZSwgMTApXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGRhdGEuY2hhcnNbY2hhckNvZGVdID0ge1xuICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0OiBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieG9mZnNldFwiKS5ub2RlVmFsdWUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgeU9mZnNldDogcGFyc2VJbnQobGV0dGVyc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInlvZmZzZXRcIikubm9kZVZhbHVlLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIHhBZHZhbmNlOiBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieGFkdmFuY2VcIikubm9kZVZhbHVlLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIGtlcm5pbmc6IHt9LFxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlOiBQSVhJLlRleHR1cmVDYWNoZVtjaGFyQ29kZV0gPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGV4dHVyZSwgdGV4dHVyZVJlY3QpXG5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3BhcnNlIGtlcm5pbmdzXG4gICAgICAgICAgICB2YXIga2VybmluZ3MgPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwia2VybmluZ1wiKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXJuaW5ncy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHBhcnNlSW50KGtlcm5pbmdzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiZmlyc3RcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICB2YXIgc2Vjb25kID0gcGFyc2VJbnQoa2VybmluZ3NbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJzZWNvbmRcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICB2YXIgYW1vdW50ID0gcGFyc2VJbnQoa2VybmluZ3NbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJhbW91bnRcIikubm9kZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgICAgICAgICBkYXRhLmNoYXJzW3NlY29uZF0ua2VybmluZ1tmaXJzdF0gPSBhbW91bnQ7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUElYSS5CaXRtYXBUZXh0LmZvbnRzW2RhdGEuZm9udF0gPSBkYXRhO1xuXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5vbkxvYWRlZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbWFnZS5sb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBhbGwgZmlsZXMgYXJlIGxvYWRlZCAoeG1sL2ZudCBhbmQgdGV4dHVyZSlcbiAqXG4gKiBAbWV0aG9kIG9uTG9hZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkJpdG1hcEZvbnRMb2FkZXIucHJvdG90eXBlLm9uTG9hZGVkID0gZnVuY3Rpb24oKVxue1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTogXCJsb2FkZWRcIiwgY29udGVudDogdGhpc30pO1xufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqIGJhc2VkIG9uIHBpeGkgaW1wYWN0IHNwaW5lIGltcGxlbWVudGF0aW9uIG1hZGUgYnkgRWVtZWxpIEtlbG9rb3JwaSAoQGVrZWxva29ycGkpIGh0dHBzOi8vZ2l0aHViLmNvbS9la2Vsb2tvcnBpXG4gKlxuICogQXdlc29tZSBKUyBydW4gdGltZSBwcm92aWRlZCBieSBFc290ZXJpY1NvZnR3YXJlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vRXNvdGVyaWNTb2Z0d2FyZS9zcGluZS1ydW50aW1lc1xuICpcbiAqL1xuXG4vKipcbiAqIFRoZSBTcGluZSBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gc3BpbmUgZGF0YVxuICogVG8gZ2VuZXJhdGUgdGhlIGRhdGEgeW91IG5lZWQgdG8gdXNlIGh0dHA6Ly9lc290ZXJpY3NvZnR3YXJlLmNvbS8gYW5kIGV4cG9ydCB0aGUgXCJKU09OXCIgZm9ybWF0XG4gKiBEdWUgdG8gYSBjbGFzaCBvZiBuYW1lcyAgWW91IHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhlIGV4dGVuc2lvbiBvZiB0aGUgc3BpbmUgZmlsZSBmcm9tICouanNvbiB0byAqLmFuaW0gZm9yIGl0IHRvIGxvYWRcbiAqIFNlZSBleGFtcGxlIDEyIChodHRwOi8vd3d3Lmdvb2Rib3lkaWdpdGFsLmNvbS9waXhpanMvZXhhbXBsZXMvMTIvKSB0byBzZWUgYSB3b3JraW5nIGV4YW1wbGUgYW5kIGNoZWNrIG91dCB0aGUgc291cmNlXG4gKiBZb3Ugd2lsbCBuZWVkIHRvIGdlbmVyYXRlIGEgc3ByaXRlIHNoZWV0IHRvIGFjY29tcGFueSB0aGUgc3BpbmUgZGF0YVxuICogV2hlbiBsb2FkZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJsb2FkZWRcIiBldmVudFxuICpcbiAqIEBjbGFzcyBTcGluZVxuICogQHVzZXMgRXZlbnRUYXJnZXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHVybCB7U3RyaW5nfSBUaGUgdXJsIG9mIHRoZSBKU09OIGZpbGVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5QSVhJLlNwaW5lTG9hZGVyID0gZnVuY3Rpb24odXJsLCBjcm9zc29yaWdpbilcbntcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB1cmxcblx0ICogQHR5cGUgU3RyaW5nXG5cdCAqL1xuXHR0aGlzLnVybCA9IHVybDtcblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBjcm9zc29yaWdpblxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmNyb3Nzb3JpZ2luID0gY3Jvc3NvcmlnaW47XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFdoZXRoZXIgdGhlIGRhdGEgaGFzIGxvYWRlZCB5ZXRcblx0ICpcblx0ICogQHByb3BlcnR5IGxvYWRlZFxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy5sb2FkZWQgPSBmYWxzZTtcbn1cblxuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwaW5lTG9hZGVyO1xuXG4vKipcbiAqIExvYWRzIHRoZSBKU09OIGRhdGFcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR2YXIganNvbkxvYWRlciA9IG5ldyBQSVhJLkpzb25Mb2FkZXIodGhpcy51cmwsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXHRqc29uTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0c2NvcGUuanNvbiA9IGV2ZW50LmNvbnRlbnQuanNvbjtcblx0XHRzY29wZS5vbkpTT05Mb2FkZWQoKTtcblx0fSk7XG5cdGpzb25Mb2FkZXIubG9hZCgpO1xufTtcblxuLyoqXG4gKiBJbnZva2Ugd2hlbiBKU09OIGZpbGUgaXMgbG9hZGVkXG4gKlxuICogQG1ldGhvZCBvbkpTT05Mb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3BpbmVMb2FkZXIucHJvdG90eXBlLm9uSlNPTkxvYWRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHR2YXIgc3BpbmVKc29uUGFyc2VyID0gbmV3IHNwaW5lLlNrZWxldG9uSnNvbigpO1xuXHR2YXIgc2tlbGV0b25EYXRhID0gc3BpbmVKc29uUGFyc2VyLnJlYWRTa2VsZXRvbkRhdGEodGhpcy5qc29uKTtcblxuXHRQSVhJLkFuaW1DYWNoZVt0aGlzLnVybF0gPSBza2VsZXRvbkRhdGE7XG5cblx0dGhpcy5vbkxvYWRlZCgpO1xufTtcblxuLyoqXG4gKiBJbnZva2Ugd2hlbiBKU09OIGZpbGUgaXMgbG9hZGVkXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6IFwibG9hZGVkXCIsIGNvbnRlbnQ6IHRoaXN9KTtcbn07XG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgIGNyZWF0aW5nIGEgcGl4aS5qcyBmaWx0ZXIuIEN1cnJlbnRseSBvbmx5IHdlYkdMIHN1cHBvcnRzIGZpbHRlcnMuXG4gKiBJZiB5b3Ugd2FudCB0byBtYWtlIGEgY3VzdG9tIGZpbHRlciB0aGlzIHNob3VsZCBiZSB5b3VyIGJhc2UgY2xhc3MuXG4gKiBAY2xhc3MgQWJzdHJhY3RGaWx0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIGZyYWdtZW50U3JjXG4gKiBAcGFyYW0gdW5pZnJvbXMgIFxuICovXG5QSVhJLkFic3RyYWN0RmlsdGVyID0gZnVuY3Rpb24oZnJhZ21lbnRTcmMsIHVuaWZyb21zKVxue1xuXHQvKipcblx0KiBBbiBhcnJheSBvZiBwYXNzZXMgLSBzb21lIGZpbHRlcnMgY29udGFpbiBhIGZldyBzdGVwcyB0aGlzIGFycmF5IHNpbXBseSBzdG9yZXMgdGhlIHN0ZXBzIGluIGEgbGluaWVhciBmYXNoaW9uLlxuXHQqIEZvciBleGFtcGxlIHRoZSBibHVyIGZpbHRlciBoYXMgdHdvIHBhc3NlcyBibHVyWCBhbmQgYmx1clkuXG5cdCogQHByb3BlcnR5IHBhc3Nlc1xuXHQqIEB0eXBlIEFycmF5IGFuIGFycmF5IG9mIGZpbHRlciBvYmplY3RzXG5cdCogQHByaXZhdGVcblx0Ki9cblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cblxuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5wYWRkaW5nID0gMDtcblxuXHQvKipcblx0QHByb3BlcnR5IHVuaWZvcm1zXG5cdEBwcml2YXRlXG5cdCovXG5cdHRoaXMudW5pZm9ybXMgPSB1bmlmcm9tcyB8fCB7fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBmcmFnbWVudFNyYyB8fCBbXTtcbn1cblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGUgQ29sb3JNYXRyaXhGaWx0ZXIgY2xhc3MgbGV0cyB5b3UgYXBwbHkgYSA0eDQgbWF0cml4IHRyYW5zZm9ybWF0aW9uIG9uIHRoZSBSR0JBIFxuICogY29sb3IgYW5kIGFscGhhIHZhbHVlcyBvZiBldmVyeSBwaXhlbCBvbiB5b3VyIGRpc3BsYXlPYmplY3QgdG8gcHJvZHVjZSBhIHJlc3VsdCBcbiAqIHdpdGggYSBuZXcgc2V0IG9mIFJHQkEgY29sb3IgYW5kIGFscGhhIHZhbHVlcy4gSXRzIHByZXR0eSBwb3dlcmZ1bCFcbiAqIEBjbGFzcyBDb2xvck1hdHJpeEZpbHRlclxuICogQGNvbnRydWN0b3JcbiAqL1xuUElYSS5Db2xvck1hdHJpeEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRtYXRyaXg6IHt0eXBlOiAnbWF0NCcsIHZhbHVlOiBbMSwwLDAsMCxcblx0XHRcdFx0XHRcdFx0XHRcdCAgIDAsMSwwLDAsXG5cdFx0XHRcdFx0XHRcdFx0XHQgICAwLDAsMSwwLFxuXHRcdFx0XHRcdFx0XHRcdFx0ICAgMCwwLDAsMV19LFxuXHR9O1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gZmxvYXQgaW52ZXJ0O1wiLFxuXHQgIFwidW5pZm9ybSBtYXQ0IG1hdHJpeDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIG1hdHJpeDtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdkNvbG9yO1wiLFxuXHQgIFwifVwiXG5cdF07XG5cdFxufVxuXG5QSVhJLkNvbG9yTWF0cml4RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkNvbG9yTWF0cml4RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ29sb3JNYXRyaXhGaWx0ZXI7XG5cbi8qKlxuICogU2V0cyB0aGUgbWF0cml4IG9mIHRoZSBjb2xvciBtYXRyaXggZmlsdGVyXG4gKlxuICogQHByb3BlcnR5IG1hdHJpeFxuICogQHR5cGUgQXJyYXkgYW5kIGFycmF5IG9mIDI2IG51bWJlcnNcbiAqIEBkZWZhdWx0IFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5Db2xvck1hdHJpeEZpbHRlci5wcm90b3R5cGUsICdtYXRyaXgnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMubWF0cml4LnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy51bmlmb3Jtcy5tYXRyaXgudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyB0dXJucyB5b3VyIGRpc3BsYXlPYmplY3RzIHRvIGJsYWNrIGFuZCB3aGl0ZS5cbiAqIEBjbGFzcyBHcmV5RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkdyZXlGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Z3JleToge3R5cGU6ICdmJywgdmFsdWU6IDF9LFxuXHR9O1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidW5pZm9ybSBmbG9hdCBncmV5O1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0XHRcImdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoZ2xfRnJhZ0NvbG9yLnJnYiwgdmVjMygwLjIxMjYqZ2xfRnJhZ0NvbG9yLnIgKyAwLjcxNTIqZ2xfRnJhZ0NvbG9yLmcgKyAwLjA3MjIqZ2xfRnJhZ0NvbG9yLmIpLCBncmV5KTtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdkNvbG9yO1wiLFxuXHQgIFwifVwiXG5cdF07XG59XG5cblBJWEkuR3JleUZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5HcmV5RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuR3JleUZpbHRlcjtcblxuLyoqXG5UaGUgc3RyZW5ndGggb2YgdGhlIGdyZXkuIDEgd2lsbCBtYWtlIHRoZSBvYmplY3QgYmxhY2sgYW5kIHdoaXRlLCAwIHdpbGwgbWFrZSB0aGUgb2JqZWN0IGl0cyBub3JtYWwgY29sb3JcbkBwcm9wZXJ0eSBncmV5XG4qL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuR3JleUZpbHRlci5wcm90b3R5cGUsICdncmV5Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmdyZXkudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLmdyZXkudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogXG4gKiBUaGUgRGlzcGxhY2VtZW50RmlsdGVyIGNsYXNzIHVzZXMgdGhlIHBpeGVsIHZhbHVlcyBmcm9tIHRoZSBzcGVjaWZpZWQgdGV4dHVyZSAoY2FsbGVkIHRoZSBkaXNwbGFjZW1lbnQgbWFwKSB0byBwZXJmb3JtIGEgZGlzcGxhY2VtZW50IG9mIGFuIG9iamVjdC4gXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGZpbHRlciB0byBhcHBseSBhbGwgbWFub3Igb2YgY3Jhenkgd2FycGluZyBlZmZlY3RzXG4gKiBDdXJyZW50bHkgdGhlIHIgcHJvcGVydHkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCBvZmZzZXQgdGhlIHggYW5kIHRoZSBnIHByb3Blcnkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCB0byBvZmZzZXQgdGhlIHkuXG4gKiBAY2xhc3MgRGlzcGxhY2VtZW50RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSB0ZXh0dXJlIHVzZWQgZm9yIHRoZSBkaXNwbGFjZW10ZW50IG1hcCAqIG11c3QgYmUgcG93ZXIgb2YgMiB0ZXh0dXJlIGF0IHRoZSBtb21lbnRcbiAqL1xuUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIgPSBmdW5jdGlvbih0ZXh0dXJlKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblx0XG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHR0ZXh0dXJlLmJhc2VUZXh0dXJlLl9wb3dlck9mMiA9IHRydWU7XG5cblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHQvL2NvbnNvbGUubG9nKClcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRkaXNwbGFjZW1lbnRNYXA6IHt0eXBlOiAnc2FtcGxlcjJEJywgdmFsdWU6dGV4dHVyZX0sXG5cdFx0c2NhbGU6XHRcdFx0IHt0eXBlOiAnZjInLCB2YWx1ZTp7eDozMCwgeTozMH19LFxuXHRcdG9mZnNldDpcdFx0XHQge3R5cGU6ICdmMicsIHZhbHVlOnt4OjAsIHk6MH19LFxuXHRcdG1hcERpbWVuc2lvbnM6ICAge3R5cGU6ICdmMicsIHZhbHVlOnt4OjEsIHk6NTExMn19LFxuXHRcdGRpbWVuc2lvbnM6ICAge3R5cGU6ICdmNCcsIHZhbHVlOlswLDAsMCwwXX1cblx0fTtcblx0XG5cblx0aWYodGV4dHVyZS5iYXNlVGV4dHVyZS5oYXNMb2FkZWQpXG5cdHtcblx0XHR0aGlzLnVuaWZvcm1zLm1hcERpbWVuc2lvbnMudmFsdWUueCA9IHRleHR1cmUud2lkdGg7XG5cdFx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnkgPSB0ZXh0dXJlLmhlaWdodDtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLmJvdW5kTG9hZGVkRnVuY3Rpb24gPSB0aGlzLm9uVGV4dHVyZUxvYWRlZC5iaW5kKHRoaXMpO1xuXG5cdFx0dGV4dHVyZS5iYXNlVGV4dHVyZS5vbihcImxvYWRlZFwiLCB0aGlzLmJvdW5kTG9hZGVkRnVuY3Rpb24pO1xuXHR9XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIGRpc3BsYWNlbWVudE1hcDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIHNjYWxlO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIG9mZnNldDtcIixcblx0ICBcInVuaWZvcm0gdmVjNCBkaW1lbnNpb25zO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIG1hcERpbWVuc2lvbnM7XCIsLy8gPSB2ZWMyKDI1Ni4wLCAyNTYuMCk7XCIsXG5cdCAvLyBcImNvbnN0IHZlYzIgdGV4dHVyZURpbWVuc2lvbnMgPSB2ZWMyKDc1MC4wLCA3NTAuMCk7XCIsXG5cdCAgXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgIFx0XCJ2ZWMyIG1hcENvcmRzID0gdlRleHR1cmVDb29yZC54eTtcIixcbi8vXHQgIFx0XCJtYXBDb3JkcyAtPSA7XCIsXG5cdCBcdFwibWFwQ29yZHMgKz0gKGRpbWVuc2lvbnMuencgKyBvZmZzZXQpLyBkaW1lbnNpb25zLnh5IDtcIixcblx0IFx0XCJtYXBDb3Jkcy55ICo9IC0xLjA7XCIsXG5cdCBcdFwibWFwQ29yZHMueSArPSAxLjA7XCIsXG5cdCAgXHRcInZlYzIgbWF0U2FtcGxlID0gdGV4dHVyZTJEKGRpc3BsYWNlbWVudE1hcCwgbWFwQ29yZHMpLnh5O1wiLFxuXHRcdFwibWF0U2FtcGxlIC09IDAuNTtcIixcdCAgXG5cdCBcdFwibWF0U2FtcGxlICo9IHNjYWxlO1wiLFxuXHQgXHRcIm1hdFNhbXBsZSAvPSBtYXBEaW1lbnNpb25zO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgbWF0U2FtcGxlLngsIHZUZXh0dXJlQ29vcmQueSArIG1hdFNhbXBsZS55KSk7XCIsXG5cdFx0XCJnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBnbF9GcmFnQ29sb3IucmdiLCAxLjApO1wiLFxuXHRcdFwidmVjMiBjb3JkID0gdlRleHR1cmVDb29yZDtcIixcblx0XHRcblx0XHQvL1wiZ2xfRnJhZ0NvbG9yID0gIHRleHR1cmUyRChkaXNwbGFjZW1lbnRNYXAsIGNvcmQpO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgICBcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuRGlzcGxhY2VtZW50RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRGlzcGxhY2VtZW50RmlsdGVyO1xuXG5QSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUub25UZXh0dXJlTG9hZGVkID0gZnVuY3Rpb24oKVxue1xuXHRcblx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnggPSB0aGlzLnVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZS53aWR0aDtcblx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnkgPSB0aGlzLnVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZS5oZWlnaHQ7XG5cblx0dGhpcy51bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUuYmFzZVRleHR1cmUub2ZmKFwibG9hZGVkXCIsIHRoaXMuYm91bmRMb2FkZWRGdW5jdGlvbilcblxufVxuXG4vKipcbiAqIFRoZSB0ZXh0dXJlIHVzZWQgZm9yIHRoZSBkaXNwbGFjZW10ZW50IG1hcCAqIG11c3QgYmUgcG93ZXIgb2YgMiB0ZXh0dXJlIGF0IHRoZSBtb21lbnRcbiAqXG4gKiBAcHJvcGVydHkgbWFwXG4gKiBAdHlwZSBUZXh0dXJlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUsICdtYXAnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy51bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgbXVsdGlwbGllciB1c2VkIHRvIHNjYWxlIHRoZSBkaXNwbGFjZW1lbnQgcmVzdWx0IGZyb20gdGhlIG1hcCBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcHJvcGVydHkgc2NhbGVcbiAqIEB0eXBlIFBvaW50XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUsICdzY2FsZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5zY2FsZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMuc2NhbGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgb2Zmc2V0IHVzZWQgdG8gbW92ZSB0aGUgZGlzcGxhY2VtZW50IG1hcC5cbiAqXG4gKiBAcHJvcGVydHkgb2Zmc2V0XG4gKiBAdHlwZSBQb2ludFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm9mZnNldC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMub2Zmc2V0LnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGZpbHRlciBhcHBsaWVzIGEgcGl4bGF0ZSBlZmZlY3QgbWFraW5nIGRpc3BsYXkgb2JqZWN0cyBhcHBlYXIgXCJibG9ja3lcIlxuICogQGNsYXNzIFBpeGVsYXRlRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLlBpeGVsYXRlRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRpbnZlcnQ6IHt0eXBlOiAnZicsIHZhbHVlOiAwfSxcblx0XHRkaW1lbnNpb25zOiB7dHlwZTogJ2Y0JywgdmFsdWU6bmV3IEZsb2F0MzJBcnJheShbMTAwMDAsIDEwMCwgMTAsIDEwXSl9LFxuXHRcdHBpeGVsU2l6ZToge3R5cGU6ICdmMicsIHZhbHVlOnt4OjEwLCB5OjEwfX0sXG5cdH07XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gdmVjMiB0ZXN0RGltO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWM0IGRpbWVuc2lvbnM7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzIgcGl4ZWxTaXplO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgXHRcInZlYzIgY29vcmQgPSB2VGV4dHVyZUNvb3JkO1wiLFxuXG5cdCBcdFwidmVjMiBzaXplID0gZGltZW5zaW9ucy54eS9waXhlbFNpemU7XCIsXG5cblx0IFx0XCJ2ZWMyIGNvbG9yID0gZmxvb3IoICggdlRleHR1cmVDb29yZCAqIHNpemUgKSApIC8gc2l6ZSArIHBpeGVsU2l6ZS9kaW1lbnNpb25zLnh5ICogMC41O1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNvbG9yKTtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcblxufVxuXG5QSVhJLlBpeGVsYXRlRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLlBpeGVsYXRlRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuUGl4ZWxhdGVGaWx0ZXI7XG5cbi8qKlxuICogXG4gKiBUaGlzIGEgcG9pbnQgdGhhdCBkZXNjcmliZXMgdGhlIHNpemUgb2YgdGhlIGJsb2NzLiB4IGlzIHRoZSB3aWR0aCBvZiB0aGUgYmxvY2sgYW5kIHkgaXMgdGhlIHRoZSBoZWlnaHRcbiAqIEBwcm9wZXJ0eSBzaXplXG4gKiBAdHlwZSBQb2ludFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5QaXhlbGF0ZUZpbHRlci5wcm90b3R5cGUsICdzaXplJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnBpeGVsU2l6ZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5waXhlbFNpemUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuQmx1clhGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Ymx1cjoge3R5cGU6ICdmJywgdmFsdWU6IDEvNTEyfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGJsdXI7XCIsXG5cdCAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcblx0ICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICBcdFwidmVjNCBzdW0gPSB2ZWM0KDAuMCk7XCIsXG5cblx0ICBcdFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggLSA0LjAqYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjA1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCAtIDMuMCpibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMDk7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54IC0gMi4wKmJsdXIsIHZUZXh0dXJlQ29vcmQueSkpICogMC4xMjtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggLSBibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTU7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTY7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjE1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCArIDIuMCpibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTI7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgMy4wKmJsdXIsIHZUZXh0dXJlQ29vcmQueSkpICogMC4wOTtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggKyA0LjAqYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjA1O1wiLFxuXHQgXG5cdFx0XCJnbF9GcmFnQ29sb3IgPSBzdW07XCIsXG5cblx0ICBcIn1cIlxuXHRdO1xufVxuXG5QSVhJLkJsdXJYRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkJsdXJYRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1clhGaWx0ZXI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuQmx1clhGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlIC8gKDEvNzAwMCk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXG4gICAgXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuQmx1cllGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Ymx1cjoge3R5cGU6ICdmJywgdmFsdWU6IDEvNTEyfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGJsdXI7XCIsXG5cdCAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcblx0ICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICBcdFwidmVjNCBzdW0gPSB2ZWM0KDAuMCk7XCIsXG5cblx0ICBcdFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSAtIDQuMCpibHVyKSkgKiAwLjA1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCwgdlRleHR1cmVDb29yZC55IC0gMy4wKmJsdXIpKSAqIDAuMDk7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgLSAyLjAqYmx1cikpICogMC4xMjtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSAtIGJsdXIpKSAqIDAuMTU7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTY7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgKyBibHVyKSkgKiAwLjE1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCwgdlRleHR1cmVDb29yZC55ICsgMi4wKmJsdXIpKSAqIDAuMTI7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgKyAzLjAqYmx1cikpICogMC4wOTtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSArIDQuMCpibHVyKSkgKiAwLjA1O1wiLFxuXHQgXG5cdFx0XCJnbF9GcmFnQ29sb3IgPSBzdW07XCIsXG5cblx0ICBcIn1cIlxuXHRdO1xufVxuXG5QSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1cllGaWx0ZXI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZSwgJ2JsdXInLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSAvICgxLzcwMDApO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0Ly90aGlzLnBhZGRpbmcgPSB2YWx1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhlIEJsdXJGaWx0ZXIgYXBwbGllcyBhIEdhdXNzaWFuIGJsdXIgdG8gYW4gb2JqZWN0LiBcbiAqIFRoZSBzdHJlbmd0aCBvZiB0aGUgYmx1ciBjYW4gYmUgc2V0IGZvciB4LSBhbmQgeS1heGlzIHNlcGFyYXRlbHkgKGFsd2F5cyByZWxhdGl2ZSB0byB0aGUgc3RhZ2UpLlxuICpcbiAqIEBjbGFzcyBCbHVyRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkJsdXJGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG4gICAgXG5cdHRoaXMuYmx1clhGaWx0ZXIgPSBuZXcgUElYSS5CbHVyWEZpbHRlcigpO1xuXHR0aGlzLmJsdXJZRmlsdGVyID0gbmV3IFBJWEkuQmx1cllGaWx0ZXIoKTtcblxuXHR0aGlzLnBhc3NlcyA9W3RoaXMuYmx1clhGaWx0ZXIsIHRoaXMuYmx1cllGaWx0ZXJdO1xuXHRcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiBib3RoIHRoZSBibHVyWCBhbmQgYmx1clkgcHJvcGVydGllcyBzaW11bHRhbmVvdXNseVxuICpcbiAqIEBwcm9wZXJ0eSBibHVyXG4gKiBAdHlwZSBOdW1iZXIgdGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyXG4gKiBAZGVmYXVsdCAyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibHVyWEZpbHRlci5ibHVyO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICBcdFx0dGhpcy5ibHVyWEZpbHRlci5ibHVyID0gdGhpcy5ibHVyWUZpbHRlci5ibHVyID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJYIHByb3BlcnR5IHNpbXVsdGFuZW91c2x5XG4gKlxuICogQHByb3BlcnR5IGJsdXJYXG4gKiBAdHlwZSBOdW1iZXIgdGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyWFxuICogQGRlZmF1bHQgMlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5CbHVyRmlsdGVyLnByb3RvdHlwZSwgJ2JsdXJYJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdXJYRmlsdGVyLmJsdXI7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLmJsdXJYRmlsdGVyLmJsdXIgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiB0aGUgYmx1clggcHJvcGVydHkgc2ltdWx0YW5lb3VzbHlcbiAqXG4gKiBAcHJvcGVydHkgYmx1cllcbiAqIEB0eXBlIE51bWJlciB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJZXG4gKiBAZGVmYXVsdCAyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJGaWx0ZXIucHJvdG90eXBlLCAnYmx1clknLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmx1cllGaWx0ZXIuYmx1cjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuYmx1cllGaWx0ZXIuYmx1ciA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGludmVydHMgeW91ciBkaXNwbGF5T2JqZWN0cyBjb2xvcnMuXG4gKiBAY2xhc3MgSW52ZXJ0RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkludmVydEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRpbnZlcnQ6IHt0eXBlOiAnZicsIHZhbHVlOiAxfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGludmVydDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0XHRcImdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoICh2ZWMzKDEpLWdsX0ZyYWdDb2xvci5yZ2IpICogZ2xfRnJhZ0NvbG9yLmEsIGdsX0ZyYWdDb2xvci5yZ2IsIDEuMCAtIGludmVydCk7XCIsXG5cdFx0Ly9cImdsX0ZyYWdDb2xvci5yZ2IgPSBnbF9GcmFnQ29sb3IucmdiICAqIGdsX0ZyYWdDb2xvci5hO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgXCJ9XCJcblx0XTtcblx0XG59XG5cblBJWEkuSW52ZXJ0RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkludmVydEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludmVydEZpbHRlcjtcblxuLyoqXG5UaGUgc3RyZW5ndGggb2YgdGhlIGludmVydC4gMSB3aWxsIGZ1bGx5IGludmVydCB0aGUgY29sb3JzLCAwIHdpbGwgbWFrZSB0aGUgb2JqZWN0IGl0cyBub3JtYWwgY29sb3JcbkBwcm9wZXJ0eSBpbnZlcnRcbiovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5JbnZlcnRGaWx0ZXIucHJvdG90eXBlLCAnaW52ZXJ0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmludmVydC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMuaW52ZXJ0LnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG4vKipcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyBhcHBsaWVzIGEgc2VwaWEgZWZmZWN0IHRvIHlvdXIgZGlzcGxheU9iamVjdHMuXG4gKiBAY2xhc3MgU2VwaWFGaWx0ZXJcbiAqIEBjb250cnVjdG9yXG4gKi9cblBJWEkuU2VwaWFGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0c2VwaWE6IHt0eXBlOiAnZicsIHZhbHVlOiAxfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IHNlcGlhO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCBcdCAgIFxuXHQgIFwiY29uc3QgbWF0MyBzZXBpYU1hdHJpeCA9IG1hdDMoMC4zNTg4LCAwLjcwNDQsIDAuMTM2OCwgMC4yOTkwLCAwLjU4NzAsIDAuMTE0MCwgMC4yMzkyLCAwLjQ2OTYsIDAuMDkxMik7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpO1wiLFxuXHRcdFwiZ2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZ2xfRnJhZ0NvbG9yLnJnYiAqIHNlcGlhTWF0cml4LCBzZXBpYSk7XCIsXG5cdCAgICBcImdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHZDb2xvcjtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5TZXBpYUZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5TZXBpYUZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNlcGlhRmlsdGVyO1xuXG4vKipcblRoZSBzdHJlbmd0aCBvZiB0aGUgc2VwaWEuIDEgd2lsbCBhcHBseSB0aGUgZnVsbCBzZXBpYSBlZmZlY3QsIDAgd2lsbCBtYWtlIHRoZSBvYmplY3QgaXRzIG5vcm1hbCBjb2xvclxuQHByb3BlcnR5IHNlcGlhXG4qL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuU2VwaWFGaWx0ZXIucHJvdG90eXBlLCAnc2VwaWEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuc2VwaWEudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnNlcGlhLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBcbiAqIFRoaXMgZmlsdGVyIGFwcGxpZXMgYSBwaXhsYXRlIGVmZmVjdCBtYWtpbmcgZGlzcGxheSBvYmplY3RzIGFwcGVhciBcImJsb2NreVwiXG4gKiBAY2xhc3MgUGl4ZWxhdGVGaWx0ZXJcbiAqIEBjb250cnVjdG9yXG4gKi9cblBJWEkuVHdpc3RGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHRcblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHR0aGlzLnVuaWZvcm1zID0ge1xuXHRcdHJhZGl1czoge3R5cGU6ICdmJywgdmFsdWU6MC41fSxcblx0XHRhbmdsZToge3R5cGU6ICdmJywgdmFsdWU6NX0sXG5cdFx0b2Zmc2V0OiB7dHlwZTogJ2YyJywgdmFsdWU6e3g6MC41LCB5OjAuNX19LFxuXHR9O1xuXG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzQgZGltZW5zaW9ucztcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFxuXHQgIFwidW5pZm9ybSBmbG9hdCByYWRpdXM7XCIsXG4gICAgICBcInVuaWZvcm0gZmxvYXQgYW5nbGU7XCIsXG4gICAgICBcInVuaWZvcm0gdmVjMiBvZmZzZXQ7XCIsXG5cblx0ICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG5cdCBcdFwidmVjMiBjb29yZCA9IHZUZXh0dXJlQ29vcmQgLSBvZmZzZXQ7XCIsXG5cdFx0XCJmbG9hdCBkaXN0YW5jZSA9IGxlbmd0aChjb29yZCk7XCIsXG5cdCBcdFxuXHQgXHRcImlmIChkaXN0YW5jZSA8IHJhZGl1cyl7XCIsXG5cblx0XHQgXHRcImZsb2F0IHJhdGlvID0gKHJhZGl1cyAtIGRpc3RhbmNlKSAvIHJhZGl1cztcIixcblx0XHQgXHRcImZsb2F0IGFuZ2xlTW9kID0gcmF0aW8gKiByYXRpbyAqIGFuZ2xlO1wiLFxuXHRcdCBcdFwiZmxvYXQgcyA9IHNpbihhbmdsZU1vZCk7XCIsXG5cdFx0IFx0XCJmbG9hdCBjID0gY29zKGFuZ2xlTW9kKTtcIixcblx0XHQgXHRcImNvb3JkID0gdmVjMihjb29yZC54ICogYyAtIGNvb3JkLnkgKiBzLCBjb29yZC54ICogcyArIGNvb3JkLnkgKiBjKTtcIixcblxuXHQgXHRcIn1cIixcblxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNvb3JkK29mZnNldCk7XCIsXG5cdCAgXCJ9XCJcblx0XTtcbn1cblxuUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlR3aXN0RmlsdGVyO1xuXG4vKipcbiAqIFxuICogVGhpcyBwb2ludCBkZXNjcmliZXMgdGhlIHRoZSBvZmZzZXQgb2YgdGhlIHR3aXN0XG4gKiBAcHJvcGVydHkgc2l6ZVxuICogQHR5cGUgUG9pbnRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuVHdpc3RGaWx0ZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm9mZnNldC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5vZmZzZXQudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBcbiAqIFRoaXMgcmFkaXVzIGRlc2NyaWJlcyBzaXplIG9mIHRoZSB0d2lzdFxuICogQHByb3BlcnR5IHNpemVcbiAqIEB0eXBlIE51bWJlclxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUsICdyYWRpdXMnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMucmFkaXVzLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnJhZGl1cy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFxuICogVGhpcyByYWRpdXMgZGVzY3JpYmVzIGFuZ2xlIG9mIHRoZSB0d2lzdFxuICogQHByb3BlcnR5IGFuZ2xlXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuVHdpc3RGaWx0ZXIucHJvdG90eXBlLCAnYW5nbGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyB0dXJucyB5b3VyIGRpc3BsYXlPYmplY3RzIHRvIGJsYWNrIGFuZCB3aGl0ZS5cbiAqIEBjbGFzcyBHcmV5RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkNvbG9yU3RlcEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRzdGVwOiB7dHlwZTogJ2YnLCB2YWx1ZTogNX0sXG5cdH07XG5cdFxuXHR0aGlzLmZyYWdtZW50U3JjID0gW1xuXHQgIFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcblx0ICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IHN0ZXA7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgICAgXCJ2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0ICAgIFwiY29sb3IgPSBmbG9vcihjb2xvciAqIHN0ZXApIC8gc3RlcDtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgXCJ9XCJcblx0XTtcbn1cblxuUElYSS5Db2xvclN0ZXBGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuQ29sb3JTdGVwRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ29sb3JTdGVwRmlsdGVyO1xuXG4vKipcblRoZSBudW1iZXIgb2Ygc3RlcHMuXG5AcHJvcGVydHkgc3RlcFxuKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkNvbG9yU3RlcEZpbHRlci5wcm90b3R5cGUsICdzdGVwJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnN0ZXAudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnN0ZXAudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqIG9yaWdpbmFsIGZpbHRlcjogaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2dsZnguanMvYmxvYi9tYXN0ZXIvc3JjL2ZpbHRlcnMvZnVuL2RvdHNjcmVlbi5qc1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGZpbHRlciBhcHBsaWVzIGEgcGl4bGF0ZSBlZmZlY3QgbWFraW5nIGRpc3BsYXkgb2JqZWN0cyBhcHBlYXIgXCJibG9ja3lcIlxuICogQGNsYXNzIFBpeGVsYXRlRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkRvdFNjcmVlbkZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0c2NhbGU6IHt0eXBlOiAnZicsIHZhbHVlOjF9LFxuXHRcdGFuZ2xlOiB7dHlwZTogJ2YnLCB2YWx1ZTo1fSxcblx0XHRkaW1lbnNpb25zOiAgIHt0eXBlOiAnZjQnLCB2YWx1ZTpbMCwwLDAsMF19XG5cdH07XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gdmVjNCBkaW1lbnNpb25zO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cblx0ICAgIFwidW5pZm9ybSBmbG9hdCBhbmdsZTtcIixcblx0ICAgIFwidW5pZm9ybSBmbG9hdCBzY2FsZTtcIixcblxuXHQgICAgXCJmbG9hdCBwYXR0ZXJuKCkge1wiLFxuXHQgICAgXHRcImZsb2F0IHMgPSBzaW4oYW5nbGUpLCBjID0gY29zKGFuZ2xlKTtcIixcblx0ICAgIFx0XCJ2ZWMyIHRleCA9IHZUZXh0dXJlQ29vcmQgKiBkaW1lbnNpb25zLnh5O1wiLFxuXHQgICAgXHRcInZlYzIgcG9pbnQgPSB2ZWMyKFwiLFxuXHQgICAgXHRcdFwiYyAqIHRleC54IC0gcyAqIHRleC55LFwiLFxuXHQgICAgXHRcdFwicyAqIHRleC54ICsgYyAqIHRleC55XCIsXG5cdCAgICBcdFwiKSAqIHNjYWxlO1wiLFxuXHQgICAgXHRcInJldHVybiAoc2luKHBvaW50LngpICogc2luKHBvaW50LnkpKSAqIDQuMDtcIixcblx0ICAgIFwifVwiLFxuXG5cdCAgICBcInZvaWQgbWFpbigpIHtcIixcbiAgICAgICAgICAgIFwidmVjNCBjb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XCIsXG4gICAgICAgICAgICBcImZsb2F0IGF2ZXJhZ2UgPSAoY29sb3IuciArIGNvbG9yLmcgKyBjb2xvci5iKSAvIDMuMDtcIixcbiAgICAgICAgICAgIFwiZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGF2ZXJhZ2UgKiAxMC4wIC0gNS4wICsgcGF0dGVybigpKSwgY29sb3IuYSk7XCIsXG4gICAgICAgIFwifVwiLFxuXHRdO1xufVxuXG5QSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuRG90U2NyZWVuRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRG90U2NyZWVuRmlsdGVyO1xuXG4vKipcbiAqIFxuICogVGhpcyBkZXNjcmliZXMgdGhlIHRoZSBzY2FsZVxuICogQHByb3BlcnR5IHNjYWxlXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuRG90U2NyZWVuRmlsdGVyLnByb3RvdHlwZSwgJ3NjYWxlJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnNjYWxlLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnNjYWxlLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogXG4gKiBUaGlzIHJhZGl1cyBkZXNjcmliZXMgYW5nbGVcbiAqIEBwcm9wZXJ0eSBhbmdsZVxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUsICdhbmdsZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5hbmdsZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5hbmdsZS52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn0pO1xuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblxuUElYSS5Dcm9zc0hhdGNoRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblx0XG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHRcblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHR0aGlzLnVuaWZvcm1zID0ge1xuXHRcdGJsdXI6IHt0eXBlOiAnZicsIHZhbHVlOiAxLzUxMn0sXG5cdH07XG5cdFxuXHR0aGlzLmZyYWdtZW50U3JjID0gW1xuXHQgIFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcblx0ICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuXHQgIFwidW5pZm9ybSBmbG9hdCBibHVyO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG5cdCAgXHRcblx0ICAgIFxuXHRcdFwiICAgIGZsb2F0IGx1bSA9IGxlbmd0aCh0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQueHkpLnJnYik7XCIsXG5cdFx0XCIgICAgIFwiLFxuXHRcdFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDEuMDApIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCArIGdsX0ZyYWdDb29yZC55LCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuNzUpIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCAtIGdsX0ZyYWdDb29yZC55LCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuNTApIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCArIGdsX0ZyYWdDb29yZC55IC0gNS4wLCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuMykge1wiLFxuXHRcdFwiICAgICAgICBpZiAobW9kKGdsX0ZyYWdDb29yZC54IC0gZ2xfRnJhZ0Nvb3JkLnkgLSA1LjAsIDEwLjApID09IDAuMCkge1wiLFxuXHRcdFwiICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApO1wiLFxuXHRcdFwiICAgICAgICB9XCIsXG5cdFx0XCIgICAgfVwiLFxuXHRcdFwifVwiXG5cdF07XG59XG5cblBJWEkuQ3Jvc3NIYXRjaEZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5Dcm9zc0hhdGNoRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1cllGaWx0ZXI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkNyb3NzSGF0Y2hGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlIC8gKDEvNzAwMCk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHQvL3RoaXMucGFkZGluZyA9IHZhbHVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlID0gKDEvNzAwMCkgKiB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblxuUElYSS5SR0JTcGxpdEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRyZWQ6IHt0eXBlOiAnZjInLCB2YWx1ZToge3g6MjAsIHk6MjB9fSxcblx0XHRncmVlbjoge3R5cGU6ICdmMicsIHZhbHVlOiB7eDotMjAsIHk6MjB9fSxcblx0XHRibHVlOiB7dHlwZTogJ2YyJywgdmFsdWU6IHt4OjIwLCB5Oi0yMH19LFxuXHRcdGRpbWVuc2lvbnM6ICAge3R5cGU6ICdmNCcsIHZhbHVlOlswLDAsMCwwXX1cblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzIgcmVkO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIGdyZWVuO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIGJsdWU7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzQgZGltZW5zaW9ucztcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgICAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkICsgcmVkL2RpbWVuc2lvbnMueHkpLnI7XCIsXG5cdCAgXHQgIFwiZ2xfRnJhZ0NvbG9yLmcgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQgKyBncmVlbi9kaW1lbnNpb25zLnh5KS5nO1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5iID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkICsgYmx1ZS9kaW1lbnNpb25zLnh5KS5iO1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5hID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKS5hO1wiLFxuXHQgIFwifVwiXG5cdF07XG59XG5cblBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SR0JTcGxpdEZpbHRlcjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlLCAnYW5nbGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSAvICgxLzcwMDApO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0Ly90aGlzLnBhZGRpbmcgPSB2YWx1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuICAgIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBQSVhJO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuUElYSSA9IFBJWEk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShQSVhJKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LlBJWEkgPSBQSVhJO1xuICAgIH1cbn0pLmNhbGwodGhpcyk7XG4vL0Agc291cmNlTWFwcGluZ1VSTD1waXhpLmRldi5qcy5tYXAiLCJyZXF1aXJlKCdlczUtc2hpbWlmeScpXG5cbnJlcXVpcmUoJ3NwaW5lJylcbnJlcXVpcmUoJ3NwaW5lL2xpYi9sb2NhbCcpXG5yZXF1aXJlKCdzcGluZS9saWIvbWFuYWdlcicpXG5yZXF1aXJlKCdzcGluZS9saWIvcm91dGUnKVxuXG5yZXF1aXJlKCcuL3NwaW5lLmFqYXgnKVxucmVxdWlyZSgnLi9zcGluZS5hd2FpdGFqYXgnKVxuXG5cbndpbmRvdy5NYXRoMiA9IHJlcXVpcmUoJy4vTWF0aDInKVxuXG4kIC0+XG4gIHJldHVybiBpZiB3aW5kb3cuYXBwXG4gIEFwcCA9IHJlcXVpcmUgXCIuLi9waXhpanMtcGxheWdyb3VuZFwiXG4gIHdpbmRvdy5hcHAgPSBuZXcgQXBwIGVsOiAkIFwiYm9keVwiXG4iLCJTcGluZSAgID0gQFNwaW5lIG9yIHJlcXVpcmUgXCJzcGluZVwiXG57TW9kZWx9ID0gU3BpbmVcbiMge1BpcGVsaW5lcn0gPSByZXF1aXJlICcvbGliL2ljZWRsaWInXG5cblxuQWpheCA9XG4gIGdldFVSTDogKG9iamVjdCkgLT5cbiAgICBvYmplY3QgYW5kIG9iamVjdC51cmw/KCkgb3Igb2JqZWN0LnVybFxuXG4gIGVuYWJsZWQ6IHRydWVcblxuICBkaXNhYmxlOiAoY2FsbGJhY2spIC0+XG4gICAgaWYgQGVuYWJsZWRcbiAgICAgIEBlbmFibGVkID0gZmFsc2VcbiAgICAgIHRyeVxuICAgICAgICBkbyBjYWxsYmFja1xuICAgICAgY2F0Y2ggZVxuICAgICAgICB0aHJvdyBlXG4gICAgICBmaW5hbGx5XG4gICAgICAgIEBlbmFibGVkID0gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIGRvIGNhbGxiYWNrXG5cbiAgbWF4OiAxMDBcbiAgdGhyb3R0bGU6IDBcblxuICBxdWV1ZTogKHJlcXVlc3QpIC0+XG4gICAgQHBpcGVsaW5lciBvcj0gbmV3IFBpcGVsaW5lciBAbWF4LCBAdGhyb3R0bGVcbiAgICByZXR1cm4gQHBpcGVsaW5lci5xdWV1ZSB1bmxlc3MgcmVxdWVzdFxuICAgIGF3YWl0IEBwaXBlbGluZXIud2FpdEluUXVldWUgZGVmZXIoKVxuICAgIHJlcXVlc3QgQHBpcGVsaW5lci5kZWZlcigpXG5cbiAgY2xlYXJRdWV1ZTogLT5cbiAgICBAcGlwZWxpbmVyLnF1ZXVlID0gW11cbiAgICBAcGlwZWxpbmVyLm5fb3V0ID0gMFxuXG5jbGFzcyBCYXNlXG4gIGRlZmF1bHRzOlxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgaGVhZGVyczogeydYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0J31cblxuICBxdWV1ZTogQWpheC5xdWV1ZVxuXG4gIGFqYXg6IChwYXJhbXMsIGRlZmF1bHRzKSAtPlxuICAgIG5ldyAkLmFqYXggQGFqYXhTZXR0aW5ncyhwYXJhbXMsIGRlZmF1bHRzKVxuXG4gIGFqYXhRdWV1ZTogKHBhcmFtcywgZGVmYXVsdHMpIC0+XG4gICAgeGhyID0gbnVsbFxuICAgIHJ2ICA9IG5ldyBpY2VkLlJlbmRlenZvdXNcblxuICAgIHNldHRpbmdzICAgICA9IEBhamF4U2V0dGluZ3MocGFyYW1zLCBkZWZhdWx0cylcbiAgICBkZWZlcnN1Y2Nlc3MgPSBzZXR0aW5ncy5zdWNjZXNzXG4gICAgZGVmZXJlcnJvciAgID0gc2V0dGluZ3MuZXJyb3JcblxuICAgIHNldHRpbmdzLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIGRhdGEsIHN0YXR1c1RleHQsIHhoclxuICAgIHNldHRpbmdzLmVycm9yICAgPSBydi5pZCgnZXJyb3InKS5kZWZlciB4aHIsIHN0YXR1c1RleHQsIGVycm9yXG5cbiAgICByZXF1ZXN0ID0gKG5leHQpIC0+XG4gICAgICB4aHIgPSBuZXcgJC5BamF4KHNldHRpbmdzKVxuICAgICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICAgIHN3aXRjaCBzdGF0dXNcbiAgICAgICAgd2hlbiAnc3VjY2VzcycgdGhlbiBkZWZlcnN1Y2Nlc3MgZGF0YSwgc3RhdHVzVGV4dCwgeGhyXG4gICAgICAgIHdoZW4gJ2Vycm9yJyB0aGVuIGRlZmVyZXJyb3IgeGhyLCBzdGF0dXNUZXh0LCBlcnJvclxuICAgICAgbmV4dCgpXG5cbiAgICByZXF1ZXN0LmFib3J0ID0gKHN0YXR1c1RleHQpIC0+XG4gICAgICByZXR1cm4geGhyLmFib3J0KHN0YXR1c1RleHQpIGlmIHhoclxuICAgICAgaW5kZXggPSBAcXVldWUoKS5pbmRleE9mKHJlcXVlc3QpXG4gICAgICBAcXVldWUoKS5zcGxpY2UoaW5kZXgsIDEpIGlmIGluZGV4ID4gLTFcbiAgICAgIEFqYXgucGlwZWxpbmVyLm5fb3V0LS0gaWYgQWpheC5waXBlbGluZXJcblxuICAgICAgIyBkZWZlcnJlZC5yZWplY3RXaXRoKFxuICAgICAgIyAgIHNldHRpbmdzLmNvbnRleHQgb3Igc2V0dGluZ3MsXG4gICAgICAjICAgW3hociwgc3RhdHVzVGV4dCwgJyddXG4gICAgICAjIClcbiAgICAgIHJlcXVlc3RcblxuICAgIHJldHVybiByZXF1ZXN0IHVubGVzcyBBamF4LmVuYWJsZWRcbiAgICBAcXVldWUgcmVxdWVzdFxuICAgIHJlcXVlc3RcblxuICBhamF4U2V0dGluZ3M6IChwYXJhbXMsIGRlZmF1bHRzKSAtPlxuICAgICQuZXh0ZW5kKHt9LCBAZGVmYXVsdHMsIGRlZmF1bHRzLCBwYXJhbXMpXG5cbmNsYXNzIENvbGxlY3Rpb24gZXh0ZW5kcyBCYXNlXG4gIGNvbnN0cnVjdG9yOiAoQG1vZGVsKSAtPlxuXG4gIGZpbmQ6IChpZCwgcGFyYW1zKSAtPlxuICAgIHJlY29yZCA9IG5ldyBAbW9kZWwoaWQ6IGlkKVxuICAgIEBhamF4UXVldWUgcGFyYW1zLFxuICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChyZWNvcmQpXG4gICAgICBzdWNjZXNzOiBAcmVjb3Jkc1Jlc3BvbnNlXG4gICAgICBlcnJvcjogQGZhaWxSZXNwb25zZVxuXG4gIGFsbDogKHBhcmFtcykgLT5cbiAgICBAYWpheFF1ZXVlIHBhcmFtcyxcbiAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQG1vZGVsKVxuICAgICAgc3VjY2VzczogQHJlY29yZHNSZXNwb25zZVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2VcblxuICBmZXRjaDogKHBhcmFtcyA9IHt9LCBvcHRpb25zID0ge30pIC0+XG4gICAgaWYgaWQgPSBwYXJhbXMuaWRcbiAgICAgIGRlbGV0ZSBwYXJhbXMuaWRcbiAgICAgIEBmaW5kKGlkLCBwYXJhbXMpLmRvbmUgKHJlY29yZCkgPT5cbiAgICAgICAgQG1vZGVsLnJlZnJlc2gocmVjb3JkLCBvcHRpb25zKVxuICAgIGVsc2VcbiAgICAgIEBhbGwocGFyYW1zKS5kb25lIChyZWNvcmRzKSA9PlxuICAgICAgICBAbW9kZWwucmVmcmVzaChyZWNvcmRzLCBvcHRpb25zKVxuXG4gICMgUHJpdmF0ZVxuXG4gIHJlY29yZHNSZXNwb25zZTogKGRhdGEsIHN0YXR1cywgeGhyKSA9PlxuICAgIEBtb2RlbC50cmlnZ2VyKCdhamF4U3VjY2VzcycsIG51bGwsIHN0YXR1cywgeGhyKVxuXG4gIGZhaWxSZXNwb25zZTogKHhociwgc3RhdHVzVGV4dCwgZXJyb3IpID0+XG4gICAgQG1vZGVsLnRyaWdnZXIoJ2FqYXhFcnJvcicsIG51bGwsIHhociwgc3RhdHVzVGV4dCwgZXJyb3IpXG5cbmNsYXNzIFNpbmdsZXRvbiBleHRlbmRzIEJhc2VcbiAgY29uc3RydWN0b3I6IChAcmVjb3JkKSAtPlxuICAgIEBtb2RlbCA9IEByZWNvcmQuY29uc3RydWN0b3JcblxuICByZWxvYWQ6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnR0VUJ1xuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQHJlY29yZClcbiAgICAgIHN1Y2Nlc3M6IEByZWNvcmRSZXNwb25zZShvcHRpb25zKVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2Uob3B0aW9ucylcblxuICBjcmVhdGU6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnUE9TVCdcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KEByZWNvcmQpXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChAbW9kZWwpXG4gICAgICBzdWNjZXNzOiBAcmVjb3JkUmVzcG9uc2Uob3B0aW9ucylcbiAgICAgIGVycm9yOiBAZmFpbFJlc3BvbnNlKG9wdGlvbnMpXG5cbiAgdXBkYXRlOiAocGFyYW1zLCBvcHRpb25zKSAtPlxuICAgIEBhamF4UXVldWUgcGFyYW1zLFxuICAgICAgdHlwZTogJ1BVVCdcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KEByZWNvcmQpXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChAcmVjb3JkKVxuICAgICAgc3VjY2VzczogQHJlY29yZFJlc3BvbnNlKG9wdGlvbnMpXG4gICAgICBlcnJvcjogQGZhaWxSZXNwb25zZShvcHRpb25zKVxuXG4gIGRlc3Ryb3k6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnREVMRVRFJ1xuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQHJlY29yZClcbiAgICAgIHN1Y2Nlc3M6IEByZWNvcmRSZXNwb25zZShvcHRpb25zKVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2Uob3B0aW9ucylcblxuICAjIFByaXZhdGVcblxuICByZWNvcmRSZXNwb25zZTogKG9wdGlvbnMgPSB7fSkgPT5cbiAgICAoZGF0YSwgc3RhdHVzLCB4aHIpID0+XG4gICAgICBpZiBTcGluZS5pc0JsYW5rKGRhdGEpXG4gICAgICAgIGRhdGEgPSBmYWxzZVxuICAgICAgZWxzZVxuICAgICAgICBkYXRhID0gQG1vZGVsLmZyb21KU09OKGRhdGEpXG5cbiAgICAgIEFqYXguZGlzYWJsZSA9PlxuICAgICAgICBpZiBkYXRhXG4gICAgICAgICAgIyBJRCBjaGFuZ2UsIG5lZWQgdG8gZG8gc29tZSBzaGlmdGluZ1xuICAgICAgICAgIGlmIGRhdGEuaWQgYW5kIEByZWNvcmQuaWQgaXNudCBkYXRhLmlkXG4gICAgICAgICAgICBAcmVjb3JkLmNoYW5nZUlEKGRhdGEuaWQpXG5cbiAgICAgICAgICAjIFVwZGF0ZSB3aXRoIGxhdGVzdCBkYXRhXG4gICAgICAgICAgQHJlY29yZC51cGRhdGVBdHRyaWJ1dGVzKGRhdGEuYXR0cmlidXRlcygpKVxuXG4gICAgICBAcmVjb3JkLnRyaWdnZXIoJ2FqYXhTdWNjZXNzJywgZGF0YSwgc3RhdHVzLCB4aHIpXG4gICAgICBvcHRpb25zLnN1Y2Nlc3M/LmFwcGx5KEByZWNvcmQpICMgRGVwcmVjYXRlZFxuICAgICAgb3B0aW9ucy5kb25lPy5hcHBseShAcmVjb3JkKVxuXG4gIGZhaWxSZXNwb25zZTogKG9wdGlvbnMgPSB7fSkgPT5cbiAgICAoeGhyLCBzdGF0dXNUZXh0LCBlcnJvcikgPT5cbiAgICAgIEByZWNvcmQudHJpZ2dlcignYWpheEVycm9yJywgeGhyLCBzdGF0dXNUZXh0LCBlcnJvcilcbiAgICAgIG9wdGlvbnMuZXJyb3I/LmFwcGx5KEByZWNvcmQpICMgRGVwcmVjYXRlZFxuICAgICAgb3B0aW9ucy5mYWlsPy5hcHBseShAcmVjb3JkKVxuXG4jIEFqYXggZW5kcG9pbnRcbk1vZGVsLmhvc3QgPSAnJ1xuXG5JbmNsdWRlID1cbiAgYWpheDogLT4gbmV3IFNpbmdsZXRvbih0aGlzKVxuXG4gIHVybDogKGFyZ3MuLi4pIC0+XG4gICAgdXJsID0gQWpheC5nZXRVUkwoQGNvbnN0cnVjdG9yKVxuICAgIHVybCArPSAnLycgdW5sZXNzIHVybC5jaGFyQXQodXJsLmxlbmd0aCAtIDEpIGlzICcvJ1xuICAgIHVybCArPSBUaWdlci5BamF4LmVuY29kZShAaWQpXG4gICAgYXJncy51bnNoaWZ0KHVybClcbiAgICBhcmdzLmpvaW4oJy8nKVxuXG5FeHRlbmQgPVxuICBhamF4OiAtPiBuZXcgQ29sbGVjdGlvbih0aGlzKVxuXG4gIHVybDogKGFyZ3MuLi4pIC0+XG4gICAgYXJncy51bnNoaWZ0KEBjbGFzc05hbWUudG9Mb3dlckNhc2UoKSArICdzJylcbiAgICBhcmdzLnVuc2hpZnQoTW9kZWwuaG9zdClcbiAgICBhcmdzLmpvaW4oJy8nKVxuXG5Nb2RlbC5BamF4ID1cbiAgZXh0ZW5kZWQ6IC0+XG4gICAgQGZldGNoIEBhamF4RmV0Y2hcbiAgICBAY2hhbmdlIEBhamF4Q2hhbmdlXG5cbiAgICBAZXh0ZW5kIEV4dGVuZFxuICAgIEBpbmNsdWRlIEluY2x1ZGVcblxuICAjIFByaXZhdGVcblxuICBhamF4RmV0Y2g6IC0+XG4gICAgQGFqYXgoKS5mZXRjaChhcmd1bWVudHMuLi4pXG5cbiAgYWpheENoYW5nZTogKHJlY29yZCwgdHlwZSwgb3B0aW9ucyA9IHt9KSAtPlxuICAgIHJldHVybiBpZiBvcHRpb25zLmFqYXggaXMgZmFsc2VcbiAgICByZWNvcmQuYWpheCgpW3R5cGVdKG9wdGlvbnMuYWpheCwgb3B0aW9ucylcblxuTW9kZWwuQWpheC5NZXRob2RzID1cbiAgZXh0ZW5kZWQ6IC0+XG4gICAgQGV4dGVuZCBFeHRlbmRcbiAgICBAaW5jbHVkZSBJbmNsdWRlXG5cblxuIyBHbG9iYWxzXG5BamF4LmRlZmF1bHRzICAgICAgICAgICA9IEJhc2U6OmRlZmF1bHRzXG5BamF4LkJhc2UgICAgICAgICAgICAgICA9IEJhc2VcbkFqYXguU2luZ2xldG9uICAgICAgICAgID0gU2luZ2xldG9uXG5BamF4LkNvbGxlY3Rpb24gICAgICAgICA9IENvbGxlY3Rpb25cblNwaW5lLkFqYXggICAgICAgICAgICAgID0gQWpheFxuU3BpbmUuQWpheC5Nb2RlbEFkYXB0ZXIgPSBBamF4XG5TcGluZS5BamF4LlEgICAgICAgICAgICA9IEJhc2Vcbm1vZHVsZT8uZXhwb3J0cyAgICAgICAgICA9IEFqYXgiLCJTcGluZSA9IEBTcGluZSBvciByZXF1aXJlIFwic3BpbmVcIlxuXG5cbmF3YWl0QWpheCA9XG4gIGF3YWl0QWpheDogKG9wdGlvbnMsIGNiLCBxdWV1ZSA9IGZhbHNlKSAtPlxuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cygpXG5cbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIGRhdGEsIHN0YXR1c1RleHQsIHhociAjIGRhdGEsIHN0YXR1c1RleHQsIHhoclxuICAgIG9wdGlvbnMuZXJyb3IgICA9IHJ2LmlkKCdlcnJvcicpLmRlZmVyIHhociwgc3RhdHVzVGV4dCwgZGF0YSAjIHhociwgc3RhdHVzVGV4dCwgZXJyb3JcblxuICAgIGlmIHF1ZXVlIHRoZW4gQFEuYWpheFF1ZXVlIG9wdGlvbnNcbiAgICBlbHNlIG5ldyAkLmFqYXggb3B0aW9uc1xuXG4gICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICBjYiBzdGF0dXMsIHhociwgc3RhdHVzVGV4dCwgZGF0YVxuXG4gIGF3YWl0R2V0OiAob3B0aW9ucywgY2IsIHF1ZXVlKSAtPlxuICAgIG9wdGlvbnMubWV0aG9kID0gJ0dFVCdcbiAgICBAYXdhaXRBamF4IG9wdGlvbnMsIGNiLCBxdWV1ZVxuXG4gIGF3YWl0UG9zdDogKG9wdGlvbnMsIGNiLCBxdWV1ZSkgLT5cbiAgICBvcHRpb25zLm1ldGhvZCA9ICdHRVQnXG4gICAgQGF3YWl0QWpheCBvcHRpb25zLCBjYiwgcXVldWVcblxuICBhd2FpdFF1ZXVlZEFqYXg6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRBamF4IG9wdGlvbnMsIGNiLCB0cnVlXG5cbiAgYXdhaXRRdWV1ZWRHZXQ6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRHZXQgb3B0aW9ucywgY2IsIHRydWVcblxuICBhd2FpdFF1ZXVlZFBvc3Q6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRQb3N0IG9wdGlvbnMsIGNiLCB0cnVlXG5cblxuU3BpbmUuQ2xhc3MuZXh0ZW5kLmNhbGwgU3BpbmUuQWpheCwgYXdhaXRBamF4XG5tb2R1bGU/LmV4cG9ydHMgPSBhd2FpdEFqYXgiLCJTcGluZSA9IHJlcXVpcmUgXCJzcGluZVwiXG5cblxubG9hZEV4YW1wbGUgPSAodXJsLCBhdXRvY2IpIC0+XG4gIGF3YWl0IFNwaW5lLkFqYXguYXdhaXRHZXQge3VybDogdXJsfSwgZGVmZXIgc3RhdHVzLCB4aHIsIHN0YXR1c1RleHQsIGRhdGFcbiAgc3dpdGNoIHN0YXR1c1xuICAgIHdoZW4gXCJlcnJvclwiIHRoZW4gXCJFcnJvciAje3N0YXR1c1RleHR9OiAje2RhdGF9XCJcbiAgICB3aGVuIFwic3VjY2Vzc1wiIHRoZW4gZGF0YVxuXG5cbmV4YW1wbGVMaXN0ID1cbiAgYnVubnk6ICAgICAgICAgXCIuL2V4YW1wbGVzL2J1bm55LmNvZmZlZVwiXG4gIFwiYnVubnktc2hvcnRcIjogXCIuL2V4YW1wbGVzL2J1bm55LXNob3J0LmNvZmZlZVwiXG4gIGRyYWdnaW5nOiAgICAgIFwiLi9leGFtcGxlcy9kcmFnZ2luZy5jb2ZmZWVcIlxuICBiYWxsczogICAgICAgICBcIi4vZXhhbXBsZXMvYmFsbHMuY29mZmVlXCJcbiAgYnVubnltYXJrOiAgICAgXCIuL2V4YW1wbGVzL2J1bm55bWFyay5jb2ZmZWVcIlxuICBtb3JwaDogICAgICAgICBcIi4vZXhhbXBsZXMvbW9ycGguY29mZmVlXCJcbiAgcHJpbWl0aXZlczogICAgXCIuL2V4YW1wbGVzL3ByaW1pdGl2ZXMuY29mZmVlXCJcbiAgcmVuZGVydGV4dHVyZTogXCIuL2V4YW1wbGVzL3JlbmRlcnRleHR1cmUuY29mZmVlXCJcbiAgdGV4dDogICAgICAgICAgXCIuL2V4YW1wbGVzL3RleHQuaWNlZFwiXG4gIGZpbHRlcnM6ICAgICAgIFwiLi9leGFtcGxlcy9maWx0ZXJzLmNvZmZlZVwiXG5cbmV4YW1wbGVzID0ge31cbmZvciBuYW1lLCBwYXRoIG9mIGV4YW1wbGVMaXN0IHRoZW4gZG8gKHBhdGgpIC0+XG4gIGV4YW1wbGVzW25hbWVdID0gKGNiKSAtPiBsb2FkRXhhbXBsZSBwYXRoLCBjYlxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4YW1wbGVzIiwicmVxdWlyZSAnLi9saWIvc2V0dXAnXG5lbW9qaSAgICAgPSByZXF1aXJlICdlbW9qaS1pbWFnZXMnXG5cblNwaW5lICAgID0gcmVxdWlyZSAnc3BpbmUnXG5TdGFnZSAgICA9IHJlcXVpcmUgJy4vY29udHJvbGxlcnMvc3RhZ2UnXG5Db25zb2xlICA9IHJlcXVpcmUgJy4vY29udHJvbGxlcnMvY29uc29sZSdcbkVkaXRvciAgID0gcmVxdWlyZSAnLi9jb250cm9sbGVycy9lZGl0b3InXG5leGFtcGxlcyA9IHJlcXVpcmUgJy4vbW9kZWxzL2V4YW1wbGVzJ1xuXG5cbmVzY2FwZUhUTUwgPSAocykgLT5cbiAgcy5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7XG5cblxuY2xhc3MgUGxheWdyb3VuZCBleHRlbmRzIFNwaW5lLkNvbnRyb2xsZXJcbiAgbG9nUHJlZml4OiBcIihQbGF5Z3JvdW5kOkFwcClcIlxuXG4gIERFRkFVTFRfU0VUVElOR1MgPVxuICAgIGV4YW1wbGU6IFwiYnVubnltYXJrXCJcbiAgICBsYW5nOiBcImNvZmZlZVwiXG5cbiAgZWxlbWVudHM6XG4gICAgXCJhc2lkZSNvdXRwdXRcIjogXCJvdXRwdXRcIlxuICAgIFwic2VjdGlvbi5wbGF5Z3JvdW5kXCI6IFwicGxheWdyb3VuZFwiXG4gICAgXCJidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwiYnV0dG9uUmVmcmVzaFBsYXlncm91bmRcIlxuXG4gIHJlZnJlc2hQbGF5Z3JvdW5kOiAtPlxuICAgIGJ1dHRvbiA9ICQgXCJidXR0b24ucnVuXCJcbiAgICBpZiBidXR0b24uaXMgXCIuc2VsZWN0ZWRcIiB0aGVuIGJ1dHRvbi50cmlnZ2VyIFwiY2xpY2tcIiwgdGFyZ2V0OiBidXR0b25bMF1cbiAgICBAc3RhZ2UucmVmcmVzaCgpXG4gICAgQCQoXCIuZGcubWFpblwiKS5hZGQoXCIuY291bnRlclwiKS5yZW1vdmUoKVxuXG4gIHNlbGVjdEV4YW1wbGU6IChlKSAtPiBAZWRpdG9yLnJlbmRlciAkKGUudGFyZ2V0KS52YWwoKVxuXG4gIG1vdXNlZW50ZXJQbGF5Z3JvdW5kUmVmcmVzaDogICAgIC0+IEBidXR0b25SZWZyZXNoUGxheWdyb3VuZC5mYWRlSW4gMTgwIGlmIEBzdGFnZVxuICBtb3VzZWVudGVyS2VlcFBsYXlncm91bmRSZWZyZXNoOiAtPiBAYnV0dG9uUmVmcmVzaFBsYXlncm91bmQuc3RvcCh0cnVlKS5mYWRlVG8gMSwgMVxuICBtb3VzZWxlYXZlUGxheWdyb3VuZFJlZnJlc2g6ICAgICAtPiBAYnV0dG9uUmVmcmVzaFBsYXlncm91bmQuZmFkZU91dCAxODBcblxuICBldmVudHM6XG4gICAgXCJjbGljayBidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwicmVmcmVzaFBsYXlncm91bmRcIlxuICAgIFwiY2hhbmdlIHNlbGVjdC5leGFtcGxlc1wiOiBcInNlbGVjdEV4YW1wbGVcIlxuICAgIFwibW91c2VlbnRlciBzZWN0aW9uLnBsYXlncm91bmRcIjogXCJtb3VzZWVudGVyUGxheWdyb3VuZFJlZnJlc2hcIlxuICAgIFwibW91c2VlbnRlciBidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwibW91c2VlbnRlcktlZXBQbGF5Z3JvdW5kUmVmcmVzaFwiXG4gICAgXCJtb3VzZWxlYXZlIHNlY3Rpb24ucGxheWdyb3VuZFwiOiBcIm1vdXNlbGVhdmVQbGF5Z3JvdW5kUmVmcmVzaFwiXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBzZXR0aW5ncyA9IHt9KSAtPlxuICAgIHN1cGVyXG4gICAgQGxvZyBcImluaXRpYWxpemluZ1wiXG5cbiAgICBAc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgREVGQVVMVF9TRVRUSU5HUylcblxuICAgIGlmIGxvY2FsU3RvcmFnZSBhbmQgbG9jYWxTdG9yYWdlLnNldHRpbmdzXG4gICAgICBmb3IgaywgdiBvZiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZXR0aW5ncylcbiAgICAgICAgQHNldHRpbmdzW2tdID0gdlxuICAgICAgICBzd2l0Y2gga1xuICAgICAgICAgIHdoZW4gXCJzY3JpcHRcIiB0aGVuIGRvICh2KSAtPlxuICAgICAgICAgICAgZXhhbXBsZXNbXCJsb2NhbC1zYXZlZFwiXSA9IChjYikgLT4gY2IgdlxuXG4gICAgZm9yIG93biBrLCB2IG9mIHNldHRpbmdzXG4gICAgICBAc2V0dGluZ3Nba10gPSB2XG5cbiAgICBleGFtcGxlbGlzdCA9IChuYW1lIGZvciBvd24gbmFtZSBvZiBleGFtcGxlcylcbiAgICBAcmVuZGVyIGV4YW1wbGVsaXN0LCBAc2V0dGluZ3MuZXhhbXBsZVxuXG4gIGluaXRTdGFnZTogLT5cbiAgICBAc3RhZ2UgPz0gbmV3IFN0YWdlIGVsOiBAcGxheWdyb3VuZFxuICAgIEBzdGFnZS5zaG93U3RhdHMoKVxuICAgIEBidXR0b25SZWZyZXNoUGxheWdyb3VuZC5zaG93KClcblxuICByZW5kZXI6IChleGFtcGxlbGlzdCA9IFtdLCBleGFtcGxlKSAtPlxuICAgIEB2aWV3ID0gKHJlcXVpcmUgXCIuL3ZpZXdzL3RlbXBsYXRlc1wiKS5pbmRleCBleGFtcGxlczogZXhhbXBsZWxpc3QsIGV4YW1wbGU6IGV4YW1wbGVcbiAgICBAdmlldyA9IGVtb2ppIEB2aWV3LCBcImltYWdlcy9lbW9qaVwiLCAyMFxuICAgIEBodG1sIEB2aWV3XG5cbiAgICBAY29uc29sZSAgPSBuZXcgQ29uc29sZSBlbDogQG91dHB1dCwgaW5wdXQ6IEAkIFwiaW5wdXQucmVwbFwiXG4gICAgQGVkaXRvciAgID0gbmV3IEVkaXRvciBlbDogQGVsLCBleGFtcGxlczogZXhhbXBsZXMsIGNvbnNvbGU6IEBjb25zb2xlXG4gICAgQGVkaXRvci5vbiBcInByZXNhdmVcIiwgQHByb3h5IEBpbml0U3RhZ2VcbiAgICBAZWRpdG9yLm9uIFwibGFuZ2NoYW5nZVwiLCBAY29uc29sZS5wcm94eSBAY29uc29sZS5sYW5nXG4gICAgQGVkaXRvci5sYW5nIEBzZXR0aW5ncy5sYW5nXG5cbiAgICBAcmVmcmVzaFBsYXlncm91bmQoKSBpZiBAc3RhZ2VcbiAgICBAZWRpdG9yLnJlbmRlciBleGFtcGxlIHVubGVzcyBAc2V0dGluZ3Muc2NyaXB0IGFuZCBAc2V0dGluZ3Muc2NyaXB0LnRyaW0oKSBpc250IFwiXCJcblxuICBsYW5nQ2hhbmdlOiAobmFtZSkgLT4gQHNldHRpbmdzLmxhbmcgPSBuYW1lXG5cblxubW9kdWxlLmV4cG9ydHMgPSBQbGF5Z3JvdW5kXG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoJ0BsdWtla2FycnlzL2phZGUtcnVudGltZScpO1xuXG52YXIgdGVtcGxhdGl6ZXIgPSB7fTtcblxuXG5cbi8vIGhlbHAuamFkZSBjb21waWxlZCB0ZW1wbGF0ZVxudGVtcGxhdGl6ZXJbXCJoZWxwXCJdID0gZnVuY3Rpb24gdG1wbF9oZWxwKCkge1xuICAgIHJldHVybiAnPGFzaWRlIGlkPVwiaGVscFwiPjxoND5FZGl0b3I8L2g0PjxkbD48ZHQ+OmljZWNyZWFtOjwvZHQ+PGRkPnN3aXRjaCBjb2RlIHRvIHZhbmlsbGEgSlMgKGNvbXBpbGVzKTwvZGQ+PGR0Pjpjb2ZmZWU6PC9kdD48ZGQ+c3dpdGNoIGNvZGUgdG8gSWNlZCBDb2ZmZWVTY3JpcHQgKGRvZXMgbm90IGNvbXBpbGUpPC9kZD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPlJlZnJlc2ggZXhhbXBsZSBmcm9tIENvZmZlZVNjcmlwdCBzb3VyY2U8L2RkPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlza1wiPjwvYnV0dG9uPjwvZHQ+PGRkPlNhdmUgc2NyaXB0IGFuZCBhc3NldHMgdG8gaW4tYnJvd3NlciBMb2NhbCBTdG9yYWdlPC9kZD48L2RsPjxoND5TdGFnZS9DYW52YXM8L2g0PjxkbD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPlJlbW92ZSBjaGlsZHJlbiBmcm9tIHN0YWdlIChhbmQgc3RvcCBhbmltYXRpb24pPC9kZD48L2RsPjxoND5Db25zb2xlPC9oND48ZGw+PGR0PjxidXR0b24gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2hcIj48L2J1dHRvbj48L2R0PjxkZD5DbGVhciBjb25zb2xlPC9kZD48ZHQ+OmFycm93X3VwOjphcnJvd19kb3duOjwvZHQ+PGRkPkJyb3dzZSBSRVBMIGhpc3Rvcnk8L2RkPjxkdD46bGVmdHdhcmRzX2Fycm93X3dpdGhfaG9vazo8L2R0PjxkZD5SdW4gY29tbWFuZDwvZGQ+PC9kbD48aDQ+R2xvYmFsIHZhcmlhYmxlczwvaDQ+PGRsIGNsYXNzPVwiZ2xvYmFsc1wiPjxkdD5hcHA8L2R0PjxkZD5pbnN0YW5jZSBvZiB0aGlzIHBpeGlqcy1wbGF5Z3JvdW5kIHdlYmFwcDwvZGQ+PGR0PnN0YXRzPC9kdD48ZGQ+aW5zdGFuY2Ugb2YgTXIuIERvb2JcXCdzJm5ic3A7PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2Ivc3RhdHMuanNcIj5zdGF0cy5qczwvYT48L2RkPjxkdD5mcmFtZTwvZHQ+PGRkPmlkIG9mIGFuaW1hdGlvbiBmcmFtZSAodXNlZnVsIHdpdGgmbmJzcDs8dHQ+Y2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpPC90dD4pPC9kZD48ZHQ+c3RhZ2U8L2R0PjxkZD5jdXJyZW50IGluc3RhbmNlIG9mJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvU3RhZ2UuaHRtbFwiPlBJWEkuU3RhZ2U8L2E+Jm5ic3A7KHdoZW4gcnVubmluZyk8L2RkPjxkdD5yZW5kZXJlcjwvZHQ+PGRkPmN1cnJlbnQgaW5zdGFuY2Ugb2YgZWl0aGVyJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvV2ViR0xSZW5kZXJlci5odG1sXCI+UElYSS5XZWJHTFJlbmRlcmVyPC9hPiZuYnNwO29yJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvQ2FudmFzUmVuZGVyZXIuaHRtbFwiPlBJWEkuQ2FudmFzUmVuZGVyZXI8L2E+LCBkZXBlbmRpbmcgb24gdGhlIHJlc3VsdCBvZiA8dHQ+UElYSS5hdXRvRGV0ZWN0UmVuZGVyZXI8L3R0PiAod2hlbiBydW5uaW5nKTwvZGQ+PGR0PmFuaTwvZHQ+PGRkPjxlbT4oZnVuY3Rpb24pPC9lbT4gQW5pbWF0aW9uIExvb3Agd3JhcHBlci4gU3RhcnRzL2VuZHMgc3RhdHMsIGNhbGxzIGZyYW1lIGZuLFxcbnJlbmRlcnMgZnJhbWUgdG8gc3RhZ2UsIGFuZCBsb29wcy48cHJlPmFuaTogKGxvb3BmbikgLT5cXG4gIHJlY3Vyc2l2ZWxvb3AgPSAtPlxcbiAgICBAc3RhdHMuYmVnaW4oKVxcbiAgICBsb29wZm4oKVxcbiAgICBAcmVuZGVyZXIucmVuZGVyIEBzdGFnZVxcbiAgICB3aW5kb3cuZnJhbWUgPSByZXF1ZXN0QW5pbUZyYW1lIHJlY3Vyc2l2ZWxvb3BcXG4gICAgQHN0YXRzLmVuZCgpXFxuICB3aW5kb3cuZnJhbWUgPSByZXF1ZXN0QW5pbUZyYW1lIHJlY3Vyc2l2ZWxvb3A8L3ByZT48L2RkPjxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbmV4dG9yaWdpbi9waXhpanMtcGxheWdyb3VuZFwiIGNsYXNzPVwiZm9ya21lXCI+PGltZyBzcmM9XCJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vZ2l0aHViL3JpYmJvbnMvZm9ya21lX3JpZ2h0X2RhcmtibHVlXzEyMTYyMS5wbmdcIiBhbHQ9XCJGb3JrIG1lIG9uIEdpdEh1YlwiLz48L2E+PC9kbD48L2FzaWRlPic7XG59O1xuXG4vLyBpbmRleC5qYWRlIGNvbXBpbGVkIHRlbXBsYXRlXG50ZW1wbGF0aXplcltcImluZGV4XCJdID0gZnVuY3Rpb24gdG1wbF9pbmRleChsb2NhbHMpIHtcbiAgICB2YXIgYnVmID0gW107XG4gICAgdmFyIGphZGVfbWl4aW5zID0ge307XG4gICAgdmFyIGphZGVfaW50ZXJwO1xuICAgIHZhciBsb2NhbHNfZm9yX3dpdGggPSBsb2NhbHMgfHwge307XG4gICAgKGZ1bmN0aW9uKGV4YW1wbGUsIGV4YW1wbGVzLCB1bmRlZmluZWQpIHtcbiAgICAgICAgYnVmLnB1c2goJzxoZWFkZXI+PGgyPlBpeGkuanMgUGxheWdyb3VuZDwvaDI+PC9oZWFkZXI+PHNlY3Rpb24gY2xhc3M9XCJwbGF5Z3JvdW5kXCI+PC9zZWN0aW9uPjxidXR0b24gY2xhc3M9XCJyZWZyZXNoLXBsYXlncm91bmQgZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PGFzaWRlIGlkPVwib3V0cHV0XCI+PC9hc2lkZT48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInJlcGxcIi8+PHNwYW4gY2xhc3M9XCJjb25zb2xlLWxhYmVsXCI+Q29uc29sZTwvc3Bhbj48dGV4dGFyZWEgdmFsdWU9XCIvLyBQaXhpLmpzIFBsYXlncm91bmRcIiBjbGFzcz1cInNhbmRib3hcIj48L3RleHRhcmVhPjxzZWxlY3QgY2xhc3M9XCJleGFtcGxlc1wiPicpO1xuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJCRvYmogPSBleGFtcGxlcztcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkJG9ialskaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBidWYucHVzaChcIjxvcHRpb25cIiArIGphZGUuYXR0cihcInZhbHVlXCIsIG5hbWUsIHRydWUsIGZhbHNlKSArIGphZGUuYXR0cihcInNlbGVjdGVkXCIsIGV4YW1wbGUgPT0gbmFtZSwgdHJ1ZSwgZmFsc2UpICsgXCI+XCIgKyBqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBuYW1lKSA9PSBudWxsID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyICQkbCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICQkbCsrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICQkb2JqWyRpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgamFkZS5hdHRyKFwidmFsdWVcIiwgbmFtZSwgdHJ1ZSwgZmFsc2UpICsgamFkZS5hdHRyKFwic2VsZWN0ZWRcIiwgZXhhbXBsZSA9PSBuYW1lLCB0cnVlLCBmYWxzZSkgKyBcIj5cIiArIGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IG5hbWUpID09IG51bGwgPyBcIlwiIDogamFkZV9pbnRlcnApICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICBidWYucHVzaCgnPC9zZWxlY3Q+PGJ1dHRvbiBjbGFzcz1cInJ1blwiPlJ1biE8L2J1dHRvbj48bmF2IGNsYXNzPVwic2FuZGJveFwiPjxidXR0b24gY2xhc3M9XCJoZWxwIGdseXBoaWNvbiBnbHlwaGljb24tcXVlc3Rpb24tc2lnblwiPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzYXZlIGdseXBoaWNvbiBnbHlwaGljb24tZmxvcHB5LWRpc2tcIj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwibGFuZ3N3aXRjaC1jb2ZmZWUgc2VsZWN0ZWRcIj46Y29mZmVlOjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJsYW5nc3dpdGNoLXZhbmlsbGFcIj46aWNlY3JlYW06PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cInJlZnJlc2gtZXhhbXBsZSBnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2hcIj48L2J1dHRvbj48L25hdj48YXNpZGUgaWQ9XCJoZWxwXCI+PGg0PkVkaXRvcjwvaDQ+PGRsPjxkdD46aWNlY3JlYW06PC9kdD48ZGQ+c3dpdGNoIGNvZGUgdG8gdmFuaWxsYSBKUyAoY29tcGlsZXMpPC9kZD48ZHQ+OmNvZmZlZTo8L2R0PjxkZD5zd2l0Y2ggY29kZSB0byBJY2VkIENvZmZlZVNjcmlwdCAoZG9lcyBub3QgY29tcGlsZSk8L2RkPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PC9kdD48ZGQ+UmVmcmVzaCBleGFtcGxlIGZyb20gQ29mZmVlU2NyaXB0IHNvdXJjZTwvZGQ+PGR0PjxidXR0b24gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrXCI+PC9idXR0b24+PC9kdD48ZGQ+U2F2ZSBzY3JpcHQgYW5kIGFzc2V0cyB0byBpbi1icm93c2VyIExvY2FsIFN0b3JhZ2U8L2RkPjwvZGw+PGg0PlN0YWdlL0NhbnZhczwvaDQ+PGRsPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PC9kdD48ZGQ+UmVtb3ZlIGNoaWxkcmVuIGZyb20gc3RhZ2UgKGFuZCBzdG9wIGFuaW1hdGlvbik8L2RkPjwvZGw+PGg0PkNvbnNvbGU8L2g0PjxkbD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPkNsZWFyIGNvbnNvbGU8L2RkPjxkdD46YXJyb3dfdXA6OmFycm93X2Rvd246PC9kdD48ZGQ+QnJvd3NlIFJFUEwgaGlzdG9yeTwvZGQ+PGR0PjpsZWZ0d2FyZHNfYXJyb3dfd2l0aF9ob29rOjwvZHQ+PGRkPlJ1biBjb21tYW5kPC9kZD48L2RsPjxoND5HbG9iYWwgdmFyaWFibGVzPC9oND48ZGwgY2xhc3M9XCJnbG9iYWxzXCI+PGR0PmFwcDwvZHQ+PGRkPmluc3RhbmNlIG9mIHRoaXMgcGl4aWpzLXBsYXlncm91bmQgd2ViYXBwPC9kZD48ZHQ+c3RhdHM8L2R0PjxkZD5pbnN0YW5jZSBvZiBNci4gRG9vYlxcJ3MmbmJzcDs8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi9zdGF0cy5qc1wiPnN0YXRzLmpzPC9hPjwvZGQ+PGR0PmZyYW1lPC9kdD48ZGQ+aWQgb2YgYW5pbWF0aW9uIGZyYW1lICh1c2VmdWwgd2l0aCZuYnNwOzx0dD5jYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZSk8L3R0Pik8L2RkPjxkdD5zdGFnZTwvZHQ+PGRkPmN1cnJlbnQgaW5zdGFuY2Ugb2YmbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9TdGFnZS5odG1sXCI+UElYSS5TdGFnZTwvYT4mbmJzcDsod2hlbiBydW5uaW5nKTwvZGQ+PGR0PnJlbmRlcmVyPC9kdD48ZGQ+Y3VycmVudCBpbnN0YW5jZSBvZiBlaXRoZXImbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9XZWJHTFJlbmRlcmVyLmh0bWxcIj5QSVhJLldlYkdMUmVuZGVyZXI8L2E+Jm5ic3A7b3ImbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9DYW52YXNSZW5kZXJlci5odG1sXCI+UElYSS5DYW52YXNSZW5kZXJlcjwvYT4sIGRlcGVuZGluZyBvbiB0aGUgcmVzdWx0IG9mIDx0dD5QSVhJLmF1dG9EZXRlY3RSZW5kZXJlcjwvdHQ+ICh3aGVuIHJ1bm5pbmcpPC9kZD48ZHQ+YW5pPC9kdD48ZGQ+PGVtPihmdW5jdGlvbik8L2VtPiBBbmltYXRpb24gTG9vcCB3cmFwcGVyLiBTdGFydHMvZW5kcyBzdGF0cywgY2FsbHMgZnJhbWUgZm4sXFxucmVuZGVycyBmcmFtZSB0byBzdGFnZSwgYW5kIGxvb3BzLjxwcmU+YW5pOiAobG9vcGZuKSAtPlxcbiAgcmVjdXJzaXZlbG9vcCA9IC0+XFxuICAgIEBzdGF0cy5iZWdpbigpXFxuICAgIGxvb3BmbigpXFxuICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXFxuICAgIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcFxcbiAgICBAc3RhdHMuZW5kKClcXG4gIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcDwvcHJlPjwvZGQ+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9uZXh0b3JpZ2luL3BpeGlqcy1wbGF5Z3JvdW5kXCIgY2xhc3M9XCJmb3JrbWVcIj48aW1nIHNyYz1cImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9naXRodWIvcmliYm9ucy9mb3JrbWVfcmlnaHRfZGFya2JsdWVfMTIxNjIxLnBuZ1wiIGFsdD1cIkZvcmsgbWUgb24gR2l0SHViXCIvPjwvYT48L2RsPjwvYXNpZGU+PGEgaWQ9XCJwaXhpXCIgaHJlZj1cIi8vcGl4aWpzLmNvbVwiPjwvYT48Zm9vdGVyPjxoMz5kcmFnIGZpbGVzIGhlcmU8L2gzPjxzcGFuPiZjb3B5OyAyMDEzJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly9uZXh0b3JpZy5pblwiPk5leHQgT3JpZ2luPC9hPjwvc3Bhbj48L2Zvb3Rlcj4nKTtcbiAgICB9KS5jYWxsKHRoaXMsIFwiZXhhbXBsZVwiIGluIGxvY2Fsc19mb3Jfd2l0aCA/IGxvY2Fsc19mb3Jfd2l0aC5leGFtcGxlIDogdHlwZW9mIGV4YW1wbGUgIT09IFwidW5kZWZpbmVkXCIgPyBleGFtcGxlIDogdW5kZWZpbmVkLCBcImV4YW1wbGVzXCIgaW4gbG9jYWxzX2Zvcl93aXRoID8gbG9jYWxzX2Zvcl93aXRoLmV4YW1wbGVzIDogdHlwZW9mIGV4YW1wbGVzICE9PSBcInVuZGVmaW5lZFwiID8gZXhhbXBsZXMgOiB1bmRlZmluZWQsIFwidW5kZWZpbmVkXCIgaW4gbG9jYWxzX2Zvcl93aXRoID8gbG9jYWxzX2Zvcl93aXRoLnVuZGVmaW5lZCA6IHR5cGVvZiB1bmRlZmluZWQgIT09IFwidW5kZWZpbmVkXCIgPyB1bmRlZmluZWQgOiB1bmRlZmluZWQpO1xuICAgIHJldHVybiBidWYuam9pbihcIlwiKTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSB0ZW1wbGF0aXplcjtcbiIsIi8qKlxuICogQGF1dGhvciBzb2xlIC8gaHR0cDovL3NvbGVkYWRwZW5hZGVzLmNvbVxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbVxuICogQGF1dGhvciBSb2JlcnQgRWlzZWxlIC8gaHR0cDovL3d3dy54YXJnLm9yZ1xuICogQGF1dGhvciBQaGlsaXBwZSAvIGh0dHA6Ly9waGlsaXBwZS5lbHNhc3MubWVcbiAqIEBhdXRob3IgUm9iZXJ0IFBlbm5lciAvIGh0dHA6Ly93d3cucm9iZXJ0cGVubmVyLmNvbS9lYXNpbmdfdGVybXNfb2ZfdXNlLmh0bWxcbiAqIEBhdXRob3IgUGF1bCBMZXdpcyAvIGh0dHA6Ly93d3cuYWVyb3R3aXN0LmNvbS9cbiAqIEBhdXRob3IgbGVjaGVjYWNoYXJyb1xuICogQGF1dGhvciBKb3NoIEZhdWwgLyBodHRwOi8vam9jYWZhLmNvbS9cbiAqIEBhdXRob3IgZWdyYWV0aGVyIC8gaHR0cDovL2VncmFldGhlci5jb20vXG4gKiBAYXV0aG9yIGVuZGVsIC8gaHR0cDovL2VuZGVsLm1lXG4gKiBAYXV0aG9yIEJlbiBEZWxhcnJlIC8gaHR0cDovL2RlbGFycmUubmV0XG4gKi9cblxuLy8gRGF0ZS5ub3cgc2hpbSBmb3IgKGFoZW0pIEludGVybmV0IEV4cGxvKGR8cillclxuaWYgKCBEYXRlLm5vdyA9PT0gdW5kZWZpbmVkICkge1xuXG5cdERhdGUubm93ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIG5ldyBEYXRlKCkudmFsdWVPZigpO1xuXG5cdH07XG5cbn1cblxudmFyIFRXRUVOID0gVFdFRU4gfHwgKCBmdW5jdGlvbiAoKSB7XG5cblx0dmFyIF90d2VlbnMgPSBbXTtcblxuXHRyZXR1cm4ge1xuXG5cdFx0UkVWSVNJT046ICcxMicsXG5cblx0XHRnZXRBbGw6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIF90d2VlbnM7XG5cblx0XHR9LFxuXG5cdFx0cmVtb3ZlQWxsOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdF90d2VlbnMgPSBbXTtcblxuXHRcdH0sXG5cblx0XHRhZGQ6IGZ1bmN0aW9uICggdHdlZW4gKSB7XG5cblx0XHRcdF90d2VlbnMucHVzaCggdHdlZW4gKTtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmU6IGZ1bmN0aW9uICggdHdlZW4gKSB7XG5cblx0XHRcdHZhciBpID0gX3R3ZWVucy5pbmRleE9mKCB0d2VlbiApO1xuXG5cdFx0XHRpZiAoIGkgIT09IC0xICkge1xuXG5cdFx0XHRcdF90d2VlbnMuc3BsaWNlKCBpLCAxICk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHR1cGRhdGU6IGZ1bmN0aW9uICggdGltZSApIHtcblxuXHRcdFx0aWYgKCBfdHdlZW5zLmxlbmd0aCA9PT0gMCApIHJldHVybiBmYWxzZTtcblxuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHR0aW1lID0gdGltZSAhPT0gdW5kZWZpbmVkID8gdGltZSA6ICggdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBlcmZvcm1hbmNlICE9PSB1bmRlZmluZWQgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vdyAhPT0gdW5kZWZpbmVkID8gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpIDogRGF0ZS5ub3coKSApO1xuXG5cdFx0XHR3aGlsZSAoIGkgPCBfdHdlZW5zLmxlbmd0aCApIHtcblxuXHRcdFx0XHRpZiAoIF90d2VlbnNbIGkgXS51cGRhdGUoIHRpbWUgKSApIHtcblxuXHRcdFx0XHRcdGkrKztcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0X3R3ZWVucy5zcGxpY2UoIGksIDEgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHR9XG5cdH07XG5cbn0gKSgpO1xuXG5UV0VFTi5Ud2VlbiA9IGZ1bmN0aW9uICggb2JqZWN0ICkge1xuXG5cdHZhciBfb2JqZWN0ID0gb2JqZWN0O1xuXHR2YXIgX3ZhbHVlc1N0YXJ0ID0ge307XG5cdHZhciBfdmFsdWVzRW5kID0ge307XG5cdHZhciBfdmFsdWVzU3RhcnRSZXBlYXQgPSB7fTtcblx0dmFyIF9kdXJhdGlvbiA9IDEwMDA7XG5cdHZhciBfcmVwZWF0ID0gMDtcblx0dmFyIF95b3lvID0gZmFsc2U7XG5cdHZhciBfaXNQbGF5aW5nID0gZmFsc2U7XG5cdHZhciBfcmV2ZXJzZWQgPSBmYWxzZTtcblx0dmFyIF9kZWxheVRpbWUgPSAwO1xuXHR2YXIgX3N0YXJ0VGltZSA9IG51bGw7XG5cdHZhciBfZWFzaW5nRnVuY3Rpb24gPSBUV0VFTi5FYXNpbmcuTGluZWFyLk5vbmU7XG5cdHZhciBfaW50ZXJwb2xhdGlvbkZ1bmN0aW9uID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5MaW5lYXI7XG5cdHZhciBfY2hhaW5lZFR3ZWVucyA9IFtdO1xuXHR2YXIgX29uU3RhcnRDYWxsYmFjayA9IG51bGw7XG5cdHZhciBfb25TdGFydENhbGxiYWNrRmlyZWQgPSBmYWxzZTtcblx0dmFyIF9vblVwZGF0ZUNhbGxiYWNrID0gbnVsbDtcblx0dmFyIF9vbkNvbXBsZXRlQ2FsbGJhY2sgPSBudWxsO1xuXG5cdC8vIFNldCBhbGwgc3RhcnRpbmcgdmFsdWVzIHByZXNlbnQgb24gdGhlIHRhcmdldCBvYmplY3Rcblx0Zm9yICggdmFyIGZpZWxkIGluIG9iamVjdCApIHtcblxuXHRcdF92YWx1ZXNTdGFydFsgZmllbGQgXSA9IHBhcnNlRmxvYXQob2JqZWN0W2ZpZWxkXSwgMTApO1xuXG5cdH1cblxuXHR0aGlzLnRvID0gZnVuY3Rpb24gKCBwcm9wZXJ0aWVzLCBkdXJhdGlvbiApIHtcblxuXHRcdGlmICggZHVyYXRpb24gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0X2R1cmF0aW9uID0gZHVyYXRpb247XG5cblx0XHR9XG5cblx0XHRfdmFsdWVzRW5kID0gcHJvcGVydGllcztcblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5zdGFydCA9IGZ1bmN0aW9uICggdGltZSApIHtcblxuXHRcdFRXRUVOLmFkZCggdGhpcyApO1xuXG5cdFx0X2lzUGxheWluZyA9IHRydWU7XG5cblx0XHRfb25TdGFydENhbGxiYWNrRmlyZWQgPSBmYWxzZTtcblxuXHRcdF9zdGFydFRpbWUgPSB0aW1lICE9PSB1bmRlZmluZWQgPyB0aW1lIDogKCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UgIT09IHVuZGVmaW5lZCAmJiB3aW5kb3cucGVyZm9ybWFuY2Uubm93ICE9PSB1bmRlZmluZWQgPyB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCkgOiBEYXRlLm5vdygpICk7XG5cdFx0X3N0YXJ0VGltZSArPSBfZGVsYXlUaW1lO1xuXG5cdFx0Zm9yICggdmFyIHByb3BlcnR5IGluIF92YWx1ZXNFbmQgKSB7XG5cblx0XHRcdC8vIGNoZWNrIGlmIGFuIEFycmF5IHdhcyBwcm92aWRlZCBhcyBwcm9wZXJ0eSB2YWx1ZVxuXHRcdFx0aWYgKCBfdmFsdWVzRW5kWyBwcm9wZXJ0eSBdIGluc3RhbmNlb2YgQXJyYXkgKSB7XG5cblx0XHRcdFx0aWYgKCBfdmFsdWVzRW5kWyBwcm9wZXJ0eSBdLmxlbmd0aCA9PT0gMCApIHtcblxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBjcmVhdGUgYSBsb2NhbCBjb3B5IG9mIHRoZSBBcnJheSB3aXRoIHRoZSBzdGFydCB2YWx1ZSBhdCB0aGUgZnJvbnRcblx0XHRcdFx0X3ZhbHVlc0VuZFsgcHJvcGVydHkgXSA9IFsgX29iamVjdFsgcHJvcGVydHkgXSBdLmNvbmNhdCggX3ZhbHVlc0VuZFsgcHJvcGVydHkgXSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdF92YWx1ZXNTdGFydFsgcHJvcGVydHkgXSA9IF9vYmplY3RbIHByb3BlcnR5IF07XG5cblx0XHRcdGlmKCAoIF92YWx1ZXNTdGFydFsgcHJvcGVydHkgXSBpbnN0YW5jZW9mIEFycmF5ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRfdmFsdWVzU3RhcnRbIHByb3BlcnR5IF0gKj0gMS4wOyAvLyBFbnN1cmVzIHdlJ3JlIHVzaW5nIG51bWJlcnMsIG5vdCBzdHJpbmdzXG5cdFx0XHR9XG5cblx0XHRcdF92YWx1ZXNTdGFydFJlcGVhdFsgcHJvcGVydHkgXSA9IF92YWx1ZXNTdGFydFsgcHJvcGVydHkgXSB8fCAwO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRpZiAoICFfaXNQbGF5aW5nICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0VFdFRU4ucmVtb3ZlKCB0aGlzICk7XG5cdFx0X2lzUGxheWluZyA9IGZhbHNlO1xuXHRcdHRoaXMuc3RvcENoYWluZWRUd2VlbnMoKTtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMuc3RvcENoYWluZWRUd2VlbnMgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRmb3IgKCB2YXIgaSA9IDAsIG51bUNoYWluZWRUd2VlbnMgPSBfY2hhaW5lZFR3ZWVucy5sZW5ndGg7IGkgPCBudW1DaGFpbmVkVHdlZW5zOyBpKysgKSB7XG5cblx0XHRcdF9jaGFpbmVkVHdlZW5zWyBpIF0uc3RvcCgpO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5kZWxheSA9IGZ1bmN0aW9uICggYW1vdW50ICkge1xuXG5cdFx0X2RlbGF5VGltZSA9IGFtb3VudDtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMucmVwZWF0ID0gZnVuY3Rpb24gKCB0aW1lcyApIHtcblxuXHRcdF9yZXBlYXQgPSB0aW1lcztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMueW95byA9IGZ1bmN0aW9uKCB5b3lvICkge1xuXG5cdFx0X3lveW8gPSB5b3lvO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblxuXHR0aGlzLmVhc2luZyA9IGZ1bmN0aW9uICggZWFzaW5nICkge1xuXG5cdFx0X2Vhc2luZ0Z1bmN0aW9uID0gZWFzaW5nO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5pbnRlcnBvbGF0aW9uID0gZnVuY3Rpb24gKCBpbnRlcnBvbGF0aW9uICkge1xuXG5cdFx0X2ludGVycG9sYXRpb25GdW5jdGlvbiA9IGludGVycG9sYXRpb247XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLmNoYWluID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0X2NoYWluZWRUd2VlbnMgPSBhcmd1bWVudHM7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLm9uU3RhcnQgPSBmdW5jdGlvbiAoIGNhbGxiYWNrICkge1xuXG5cdFx0X29uU3RhcnRDYWxsYmFjayA9IGNhbGxiYWNrO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5vblVwZGF0ZSA9IGZ1bmN0aW9uICggY2FsbGJhY2sgKSB7XG5cblx0XHRfb25VcGRhdGVDYWxsYmFjayA9IGNhbGxiYWNrO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5vbkNvbXBsZXRlID0gZnVuY3Rpb24gKCBjYWxsYmFjayApIHtcblxuXHRcdF9vbkNvbXBsZXRlQ2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCB0aW1lICkge1xuXG5cdFx0dmFyIHByb3BlcnR5O1xuXG5cdFx0aWYgKCB0aW1lIDwgX3N0YXJ0VGltZSApIHtcblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHR9XG5cblx0XHRpZiAoIF9vblN0YXJ0Q2FsbGJhY2tGaXJlZCA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdGlmICggX29uU3RhcnRDYWxsYmFjayAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRfb25TdGFydENhbGxiYWNrLmNhbGwoIF9vYmplY3QgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRfb25TdGFydENhbGxiYWNrRmlyZWQgPSB0cnVlO1xuXG5cdFx0fVxuXG5cdFx0dmFyIGVsYXBzZWQgPSAoIHRpbWUgLSBfc3RhcnRUaW1lICkgLyBfZHVyYXRpb247XG5cdFx0ZWxhcHNlZCA9IGVsYXBzZWQgPiAxID8gMSA6IGVsYXBzZWQ7XG5cblx0XHR2YXIgdmFsdWUgPSBfZWFzaW5nRnVuY3Rpb24oIGVsYXBzZWQgKTtcblxuXHRcdGZvciAoIHByb3BlcnR5IGluIF92YWx1ZXNFbmQgKSB7XG5cblx0XHRcdHZhciBzdGFydCA9IF92YWx1ZXNTdGFydFsgcHJvcGVydHkgXSB8fCAwO1xuXHRcdFx0dmFyIGVuZCA9IF92YWx1ZXNFbmRbIHByb3BlcnR5IF07XG5cblx0XHRcdGlmICggZW5kIGluc3RhbmNlb2YgQXJyYXkgKSB7XG5cblx0XHRcdFx0X29iamVjdFsgcHJvcGVydHkgXSA9IF9pbnRlcnBvbGF0aW9uRnVuY3Rpb24oIGVuZCwgdmFsdWUgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIC8vIFBhcnNlcyByZWxhdGl2ZSBlbmQgdmFsdWVzIHdpdGggc3RhcnQgYXMgYmFzZSAoZS5nLjogKzEwLCAtMylcblx0XHRcdFx0aWYgKCB0eXBlb2YoZW5kKSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0XHRlbmQgPSBzdGFydCArIHBhcnNlRmxvYXQoZW5kLCAxMCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBwcm90ZWN0IGFnYWluc3Qgbm9uIG51bWVyaWMgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZihlbmQpID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdF9vYmplY3RbIHByb3BlcnR5IF0gPSBzdGFydCArICggZW5kIC0gc3RhcnQgKSAqIHZhbHVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmICggX29uVXBkYXRlQ2FsbGJhY2sgIT09IG51bGwgKSB7XG5cblx0XHRcdF9vblVwZGF0ZUNhbGxiYWNrLmNhbGwoIF9vYmplY3QsIHZhbHVlICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIGVsYXBzZWQgPT0gMSApIHtcblxuXHRcdFx0aWYgKCBfcmVwZWF0ID4gMCApIHtcblxuXHRcdFx0XHRpZiggaXNGaW5pdGUoIF9yZXBlYXQgKSApIHtcblx0XHRcdFx0XHRfcmVwZWF0LS07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyByZWFzc2lnbiBzdGFydGluZyB2YWx1ZXMsIHJlc3RhcnQgYnkgbWFraW5nIHN0YXJ0VGltZSA9IG5vd1xuXHRcdFx0XHRmb3IoIHByb3BlcnR5IGluIF92YWx1ZXNTdGFydFJlcGVhdCApIHtcblxuXHRcdFx0XHRcdGlmICggdHlwZW9mKCBfdmFsdWVzRW5kWyBwcm9wZXJ0eSBdICkgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdFx0XHRfdmFsdWVzU3RhcnRSZXBlYXRbIHByb3BlcnR5IF0gPSBfdmFsdWVzU3RhcnRSZXBlYXRbIHByb3BlcnR5IF0gKyBwYXJzZUZsb2F0KF92YWx1ZXNFbmRbIHByb3BlcnR5IF0sIDEwKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoX3lveW8pIHtcblx0XHRcdFx0XHRcdHZhciB0bXAgPSBfdmFsdWVzU3RhcnRSZXBlYXRbIHByb3BlcnR5IF07XG5cdFx0XHRcdFx0XHRfdmFsdWVzU3RhcnRSZXBlYXRbIHByb3BlcnR5IF0gPSBfdmFsdWVzRW5kWyBwcm9wZXJ0eSBdO1xuXHRcdFx0XHRcdFx0X3ZhbHVlc0VuZFsgcHJvcGVydHkgXSA9IHRtcDtcblx0XHRcdFx0XHRcdF9yZXZlcnNlZCA9ICFfcmV2ZXJzZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdF92YWx1ZXNTdGFydFsgcHJvcGVydHkgXSA9IF92YWx1ZXNTdGFydFJlcGVhdFsgcHJvcGVydHkgXTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0X3N0YXJ0VGltZSA9IHRpbWUgKyBfZGVsYXlUaW1lO1xuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmICggX29uQ29tcGxldGVDYWxsYmFjayAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdF9vbkNvbXBsZXRlQ2FsbGJhY2suY2FsbCggX29iamVjdCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIG51bUNoYWluZWRUd2VlbnMgPSBfY2hhaW5lZFR3ZWVucy5sZW5ndGg7IGkgPCBudW1DaGFpbmVkVHdlZW5zOyBpKysgKSB7XG5cblx0XHRcdFx0XHRfY2hhaW5lZFR3ZWVuc1sgaSBdLnN0YXJ0KCB0aW1lICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cblx0fTtcblxufTtcblxuXG5UV0VFTi5FYXNpbmcgPSB7XG5cblx0TGluZWFyOiB7XG5cblx0XHROb25lOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiBrO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0UXVhZHJhdGljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gayAqIGs7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiBrICogKCAyIC0gayApO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdGlmICggKCBrICo9IDIgKSA8IDEgKSByZXR1cm4gMC41ICogayAqIGs7XG5cdFx0XHRyZXR1cm4gLSAwLjUgKiAoIC0tayAqICggayAtIDIgKSAtIDEgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEN1YmljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gayAqIGsgKiBrO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gLS1rICogayAqIGsgKyAxO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdGlmICggKCBrICo9IDIgKSA8IDEgKSByZXR1cm4gMC41ICogayAqIGsgKiBrO1xuXHRcdFx0cmV0dXJuIDAuNSAqICggKCBrIC09IDIgKSAqIGsgKiBrICsgMiApO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0UXVhcnRpYzoge1xuXG5cdFx0SW46IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIGsgKiBrICogayAqIGs7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiAxIC0gKCAtLWsgKiBrICogayAqIGsgKTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxKSByZXR1cm4gMC41ICogayAqIGsgKiBrICogaztcblx0XHRcdHJldHVybiAtIDAuNSAqICggKCBrIC09IDIgKSAqIGsgKiBrICogayAtIDIgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdFF1aW50aWM6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiBrICogayAqIGsgKiBrICogaztcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIC0tayAqIGsgKiBrICogayAqIGsgKyAxO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdGlmICggKCBrICo9IDIgKSA8IDEgKSByZXR1cm4gMC41ICogayAqIGsgKiBrICogayAqIGs7XG5cdFx0XHRyZXR1cm4gMC41ICogKCAoIGsgLT0gMiApICogayAqIGsgKiBrICogayArIDIgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdFNpbnVzb2lkYWw6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiAxIC0gTWF0aC5jb3MoIGsgKiBNYXRoLlBJIC8gMiApO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gTWF0aC5zaW4oIGsgKiBNYXRoLlBJIC8gMiApO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiAwLjUgKiAoIDEgLSBNYXRoLmNvcyggTWF0aC5QSSAqIGsgKSApO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0RXhwb25lbnRpYWw6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiBrID09PSAwID8gMCA6IE1hdGgucG93KCAxMDI0LCBrIC0gMSApO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gayA9PT0gMSA/IDEgOiAxIC0gTWF0aC5wb3coIDIsIC0gMTAgKiBrICk7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0aWYgKCBrID09PSAwICkgcmV0dXJuIDA7XG5cdFx0XHRpZiAoIGsgPT09IDEgKSByZXR1cm4gMTtcblx0XHRcdGlmICggKCBrICo9IDIgKSA8IDEgKSByZXR1cm4gMC41ICogTWF0aC5wb3coIDEwMjQsIGsgLSAxICk7XG5cdFx0XHRyZXR1cm4gMC41ICogKCAtIE1hdGgucG93KCAyLCAtIDEwICogKCBrIC0gMSApICkgKyAyICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRDaXJjdWxhcjoge1xuXG5cdFx0SW46IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIDEgLSBNYXRoLnNxcnQoIDEgLSBrICogayApO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gTWF0aC5zcXJ0KCAxIC0gKCAtLWsgKiBrICkgKTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxKSByZXR1cm4gLSAwLjUgKiAoIE1hdGguc3FydCggMSAtIGsgKiBrKSAtIDEpO1xuXHRcdFx0cmV0dXJuIDAuNSAqICggTWF0aC5zcXJ0KCAxIC0gKCBrIC09IDIpICogaykgKyAxKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEVsYXN0aWM6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHZhciBzLCBhID0gMC4xLCBwID0gMC40O1xuXHRcdFx0aWYgKCBrID09PSAwICkgcmV0dXJuIDA7XG5cdFx0XHRpZiAoIGsgPT09IDEgKSByZXR1cm4gMTtcblx0XHRcdGlmICggIWEgfHwgYSA8IDEgKSB7IGEgPSAxOyBzID0gcCAvIDQ7IH1cblx0XHRcdGVsc2UgcyA9IHAgKiBNYXRoLmFzaW4oIDEgLyBhICkgLyAoIDIgKiBNYXRoLlBJICk7XG5cdFx0XHRyZXR1cm4gLSAoIGEgKiBNYXRoLnBvdyggMiwgMTAgKiAoIGsgLT0gMSApICkgKiBNYXRoLnNpbiggKCBrIC0gcyApICogKCAyICogTWF0aC5QSSApIC8gcCApICk7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHZhciBzLCBhID0gMC4xLCBwID0gMC40O1xuXHRcdFx0aWYgKCBrID09PSAwICkgcmV0dXJuIDA7XG5cdFx0XHRpZiAoIGsgPT09IDEgKSByZXR1cm4gMTtcblx0XHRcdGlmICggIWEgfHwgYSA8IDEgKSB7IGEgPSAxOyBzID0gcCAvIDQ7IH1cblx0XHRcdGVsc2UgcyA9IHAgKiBNYXRoLmFzaW4oIDEgLyBhICkgLyAoIDIgKiBNYXRoLlBJICk7XG5cdFx0XHRyZXR1cm4gKCBhICogTWF0aC5wb3coIDIsIC0gMTAgKiBrKSAqIE1hdGguc2luKCAoIGsgLSBzICkgKiAoIDIgKiBNYXRoLlBJICkgLyBwICkgKyAxICk7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0dmFyIHMsIGEgPSAwLjEsIHAgPSAwLjQ7XG5cdFx0XHRpZiAoIGsgPT09IDAgKSByZXR1cm4gMDtcblx0XHRcdGlmICggayA9PT0gMSApIHJldHVybiAxO1xuXHRcdFx0aWYgKCAhYSB8fCBhIDwgMSApIHsgYSA9IDE7IHMgPSBwIC8gNDsgfVxuXHRcdFx0ZWxzZSBzID0gcCAqIE1hdGguYXNpbiggMSAvIGEgKSAvICggMiAqIE1hdGguUEkgKTtcblx0XHRcdGlmICggKCBrICo9IDIgKSA8IDEgKSByZXR1cm4gLSAwLjUgKiAoIGEgKiBNYXRoLnBvdyggMiwgMTAgKiAoIGsgLT0gMSApICkgKiBNYXRoLnNpbiggKCBrIC0gcyApICogKCAyICogTWF0aC5QSSApIC8gcCApICk7XG5cdFx0XHRyZXR1cm4gYSAqIE1hdGgucG93KCAyLCAtMTAgKiAoIGsgLT0gMSApICkgKiBNYXRoLnNpbiggKCBrIC0gcyApICogKCAyICogTWF0aC5QSSApIC8gcCApICogMC41ICsgMTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEJhY2s6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHZhciBzID0gMS43MDE1ODtcblx0XHRcdHJldHVybiBrICogayAqICggKCBzICsgMSApICogayAtIHMgKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0dmFyIHMgPSAxLjcwMTU4O1xuXHRcdFx0cmV0dXJuIC0tayAqIGsgKiAoICggcyArIDEgKSAqIGsgKyBzICkgKyAxO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHZhciBzID0gMS43MDE1OCAqIDEuNTI1O1xuXHRcdFx0aWYgKCAoIGsgKj0gMiApIDwgMSApIHJldHVybiAwLjUgKiAoIGsgKiBrICogKCAoIHMgKyAxICkgKiBrIC0gcyApICk7XG5cdFx0XHRyZXR1cm4gMC41ICogKCAoIGsgLT0gMiApICogayAqICggKCBzICsgMSApICogayArIHMgKSArIDIgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEJvdW5jZToge1xuXG5cdFx0SW46IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIDEgLSBUV0VFTi5FYXNpbmcuQm91bmNlLk91dCggMSAtIGsgKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0aWYgKCBrIDwgKCAxIC8gMi43NSApICkge1xuXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiBrICogaztcblxuXHRcdFx0fSBlbHNlIGlmICggayA8ICggMiAvIDIuNzUgKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogKCBrIC09ICggMS41IC8gMi43NSApICkgKiBrICsgMC43NTtcblxuXHRcdFx0fSBlbHNlIGlmICggayA8ICggMi41IC8gMi43NSApICkge1xuXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoIGsgLT0gKCAyLjI1IC8gMi43NSApICkgKiBrICsgMC45Mzc1O1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoIGsgLT0gKCAyLjYyNSAvIDIuNzUgKSApICogayArIDAuOTg0Mzc1O1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0aWYgKCBrIDwgMC41ICkgcmV0dXJuIFRXRUVOLkVhc2luZy5Cb3VuY2UuSW4oIGsgKiAyICkgKiAwLjU7XG5cdFx0XHRyZXR1cm4gVFdFRU4uRWFzaW5nLkJvdW5jZS5PdXQoIGsgKiAyIC0gMSApICogMC41ICsgMC41O1xuXG5cdFx0fVxuXG5cdH1cblxufTtcblxuVFdFRU4uSW50ZXJwb2xhdGlvbiA9IHtcblxuXHRMaW5lYXI6IGZ1bmN0aW9uICggdiwgayApIHtcblxuXHRcdHZhciBtID0gdi5sZW5ndGggLSAxLCBmID0gbSAqIGssIGkgPSBNYXRoLmZsb29yKCBmICksIGZuID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5MaW5lYXI7XG5cblx0XHRpZiAoIGsgPCAwICkgcmV0dXJuIGZuKCB2WyAwIF0sIHZbIDEgXSwgZiApO1xuXHRcdGlmICggayA+IDEgKSByZXR1cm4gZm4oIHZbIG0gXSwgdlsgbSAtIDEgXSwgbSAtIGYgKTtcblxuXHRcdHJldHVybiBmbiggdlsgaSBdLCB2WyBpICsgMSA+IG0gPyBtIDogaSArIDEgXSwgZiAtIGkgKTtcblxuXHR9LFxuXG5cdEJlemllcjogZnVuY3Rpb24gKCB2LCBrICkge1xuXG5cdFx0dmFyIGIgPSAwLCBuID0gdi5sZW5ndGggLSAxLCBwdyA9IE1hdGgucG93LCBibiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuQmVybnN0ZWluLCBpO1xuXG5cdFx0Zm9yICggaSA9IDA7IGkgPD0gbjsgaSsrICkge1xuXHRcdFx0YiArPSBwdyggMSAtIGssIG4gLSBpICkgKiBwdyggaywgaSApICogdlsgaSBdICogYm4oIG4sIGkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYjtcblxuXHR9LFxuXG5cdENhdG11bGxSb206IGZ1bmN0aW9uICggdiwgayApIHtcblxuXHRcdHZhciBtID0gdi5sZW5ndGggLSAxLCBmID0gbSAqIGssIGkgPSBNYXRoLmZsb29yKCBmICksIGZuID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5DYXRtdWxsUm9tO1xuXG5cdFx0aWYgKCB2WyAwIF0gPT09IHZbIG0gXSApIHtcblxuXHRcdFx0aWYgKCBrIDwgMCApIGkgPSBNYXRoLmZsb29yKCBmID0gbSAqICggMSArIGsgKSApO1xuXG5cdFx0XHRyZXR1cm4gZm4oIHZbICggaSAtIDEgKyBtICkgJSBtIF0sIHZbIGkgXSwgdlsgKCBpICsgMSApICUgbSBdLCB2WyAoIGkgKyAyICkgJSBtIF0sIGYgLSBpICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRpZiAoIGsgPCAwICkgcmV0dXJuIHZbIDAgXSAtICggZm4oIHZbIDAgXSwgdlsgMCBdLCB2WyAxIF0sIHZbIDEgXSwgLWYgKSAtIHZbIDAgXSApO1xuXHRcdFx0aWYgKCBrID4gMSApIHJldHVybiB2WyBtIF0gLSAoIGZuKCB2WyBtIF0sIHZbIG0gXSwgdlsgbSAtIDEgXSwgdlsgbSAtIDEgXSwgZiAtIG0gKSAtIHZbIG0gXSApO1xuXG5cdFx0XHRyZXR1cm4gZm4oIHZbIGkgPyBpIC0gMSA6IDAgXSwgdlsgaSBdLCB2WyBtIDwgaSArIDEgPyBtIDogaSArIDEgXSwgdlsgbSA8IGkgKyAyID8gbSA6IGkgKyAyIF0sIGYgLSBpICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRVdGlsczoge1xuXG5cdFx0TGluZWFyOiBmdW5jdGlvbiAoIHAwLCBwMSwgdCApIHtcblxuXHRcdFx0cmV0dXJuICggcDEgLSBwMCApICogdCArIHAwO1xuXG5cdFx0fSxcblxuXHRcdEJlcm5zdGVpbjogZnVuY3Rpb24gKCBuICwgaSApIHtcblxuXHRcdFx0dmFyIGZjID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5GYWN0b3JpYWw7XG5cdFx0XHRyZXR1cm4gZmMoIG4gKSAvIGZjKCBpICkgLyBmYyggbiAtIGkgKTtcblxuXHRcdH0sXG5cblx0XHRGYWN0b3JpYWw6ICggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgYSA9IFsgMSBdO1xuXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCBuICkge1xuXG5cdFx0XHRcdHZhciBzID0gMSwgaTtcblx0XHRcdFx0aWYgKCBhWyBuIF0gKSByZXR1cm4gYVsgbiBdO1xuXHRcdFx0XHRmb3IgKCBpID0gbjsgaSA+IDE7IGktLSApIHMgKj0gaTtcblx0XHRcdFx0cmV0dXJuIGFbIG4gXSA9IHM7XG5cblx0XHRcdH07XG5cblx0XHR9ICkoKSxcblxuXHRcdENhdG11bGxSb206IGZ1bmN0aW9uICggcDAsIHAxLCBwMiwgcDMsIHQgKSB7XG5cblx0XHRcdHZhciB2MCA9ICggcDIgLSBwMCApICogMC41LCB2MSA9ICggcDMgLSBwMSApICogMC41LCB0MiA9IHQgKiB0LCB0MyA9IHQgKiB0Mjtcblx0XHRcdHJldHVybiAoIDIgKiBwMSAtIDIgKiBwMiArIHYwICsgdjEgKSAqIHQzICsgKCAtIDMgKiBwMSArIDMgKiBwMiAtIDIgKiB2MCAtIHYxICkgKiB0MiArIHYwICogdCArIHAxO1xuXG5cdFx0fVxuXG5cdH1cblxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNZXJnZSB0d28gYXR0cmlidXRlIG9iamVjdHMgZ2l2aW5nIHByZWNlZGVuY2VcbiAqIHRvIHZhbHVlcyBpbiBvYmplY3QgYGJgLiBDbGFzc2VzIGFyZSBzcGVjaWFsLWNhc2VkXG4gKiBhbGxvd2luZyBmb3IgYXJyYXlzIGFuZCBtZXJnaW5nL2pvaW5pbmcgYXBwcm9wcmlhdGVseVxuICogcmVzdWx0aW5nIGluIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICogQHJldHVybiB7T2JqZWN0fSBhXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLm1lcmdlID0gZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHZhciBhdHRycyA9IGFbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhdHRycyA9IG1lcmdlKGF0dHJzLCBhW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGF0dHJzO1xuICB9XG4gIHZhciBhYyA9IGFbJ2NsYXNzJ107XG4gIHZhciBiYyA9IGJbJ2NsYXNzJ107XG5cbiAgaWYgKGFjIHx8IGJjKSB7XG4gICAgYWMgPSBhYyB8fCBbXTtcbiAgICBiYyA9IGJjIHx8IFtdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhYykpIGFjID0gW2FjXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYmMpKSBiYyA9IFtiY107XG4gICAgYVsnY2xhc3MnXSA9IGFjLmNvbmNhdChiYykuZmlsdGVyKG51bGxzKTtcbiAgfVxuXG4gIGZvciAodmFyIGtleSBpbiBiKSB7XG4gICAgaWYgKGtleSAhPSAnY2xhc3MnKSB7XG4gICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGE7XG59O1xuXG4vKipcbiAqIEZpbHRlciBudWxsIGB2YWxgcy5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG51bGxzKHZhbCkge1xuICByZXR1cm4gdmFsICE9IG51bGwgJiYgdmFsICE9PSAnJztcbn1cblxuLyoqXG4gKiBqb2luIGFycmF5IGFzIGNsYXNzZXMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5qb2luQ2xhc3NlcyA9IGpvaW5DbGFzc2VzO1xuZnVuY3Rpb24gam9pbkNsYXNzZXModmFsKSB7XG4gIHJldHVybiAoQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsLm1hcChqb2luQ2xhc3NlcykgOlxuICAgICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpID8gT2JqZWN0LmtleXModmFsKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdmFsW2tleV07IH0pIDpcbiAgICBbdmFsXSkuZmlsdGVyKG51bGxzKS5qb2luKCcgJyk7XG59XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGNsYXNzZXNcbiAqIEBwYXJhbSB7QXJyYXkuPEJvb2xlYW4+fSBlc2NhcGVkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuY2xzID0gZnVuY3Rpb24gY2xzKGNsYXNzZXMsIGVzY2FwZWQpIHtcbiAgdmFyIGJ1ZiA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZXNjYXBlZCAmJiBlc2NhcGVkW2ldKSB7XG4gICAgICBidWYucHVzaChleHBvcnRzLmVzY2FwZShqb2luQ2xhc3NlcyhbY2xhc3Nlc1tpXV0pKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1Zi5wdXNoKGpvaW5DbGFzc2VzKGNsYXNzZXNbaV0pKTtcbiAgICB9XG4gIH1cbiAgdmFyIHRleHQgPSBqb2luQ2xhc3NlcyhidWYpO1xuICBpZiAodGV4dC5sZW5ndGgpIHtcbiAgICByZXR1cm4gJyBjbGFzcz1cIicgKyB0ZXh0ICsgJ1wiJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cblxuZXhwb3J0cy5zdHlsZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLm1hcChmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgIHJldHVybiBzdHlsZSArICc6JyArIHZhbFtzdHlsZV07XG4gICAgfSkuam9pbignOycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbn07XG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZXNjYXBlZFxuICogQHBhcmFtIHtCb29sZWFufSB0ZXJzZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHIgPSBmdW5jdGlvbiBhdHRyKGtleSwgdmFsLCBlc2NhcGVkLCB0ZXJzZSkge1xuICBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgdmFsID0gZXhwb3J0cy5zdHlsZSh2YWwpO1xuICB9XG4gIGlmICgnYm9vbGVhbicgPT0gdHlwZW9mIHZhbCB8fCBudWxsID09IHZhbCkge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHJldHVybiAnICcgKyAodGVyc2UgPyBrZXkgOiBrZXkgKyAnPVwiJyArIGtleSArICdcIicpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9IGVsc2UgaWYgKDAgPT0ga2V5LmluZGV4T2YoJ2RhdGEnKSAmJiAnc3RyaW5nJyAhPSB0eXBlb2YgdmFsKSB7XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KHZhbCkuaW5kZXhPZignJicpICE9PSAtMSkge1xuICAgICAgY29uc29sZS53YXJuKCdTaW5jZSBKYWRlIDIuMC4wLCBhbXBlcnNhbmRzIChgJmApIGluIGRhdGEgYXR0cmlidXRlcyAnICtcbiAgICAgICAgICAgICAgICAgICAnd2lsbCBiZSBlc2NhcGVkIHRvIGAmYW1wO2AnKTtcbiAgICB9O1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgZWxpbWluYXRlIHRoZSBkb3VibGUgcXVvdGVzIGFyb3VuZCBkYXRlcyBpbiAnICtcbiAgICAgICAgICAgICAgICAgICAnSVNPIGZvcm0gYWZ0ZXIgMi4wLjAnKTtcbiAgICB9XG4gICAgcmV0dXJuICcgJyArIGtleSArIFwiPSdcIiArIEpTT04uc3RyaW5naWZ5KHZhbCkucmVwbGFjZSgvJy9nLCAnJmFwb3M7JykgKyBcIidcIjtcbiAgfSBlbHNlIGlmIChlc2NhcGVkKSB7XG4gICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0phZGUgd2lsbCBzdHJpbmdpZnkgZGF0ZXMgaW4gSVNPIGZvcm0gYWZ0ZXIgMi4wLjAnKTtcbiAgICB9XG4gICAgcmV0dXJuICcgJyArIGtleSArICc9XCInICsgZXhwb3J0cy5lc2NhcGUodmFsKSArICdcIic7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0phZGUgd2lsbCBzdHJpbmdpZnkgZGF0ZXMgaW4gSVNPIGZvcm0gYWZ0ZXIgMi4wLjAnKTtcbiAgICB9XG4gICAgcmV0dXJuICcgJyArIGtleSArICc9XCInICsgdmFsICsgJ1wiJztcbiAgfVxufTtcblxuLyoqXG4gKiBSZW5kZXIgdGhlIGdpdmVuIGF0dHJpYnV0ZXMgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7T2JqZWN0fSBlc2NhcGVkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuYXR0cnMgPSBmdW5jdGlvbiBhdHRycyhvYmosIHRlcnNlKXtcbiAgdmFyIGJ1ZiA9IFtdO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblxuICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldXG4gICAgICAgICwgdmFsID0gb2JqW2tleV07XG5cbiAgICAgIGlmICgnY2xhc3MnID09IGtleSkge1xuICAgICAgICBpZiAodmFsID0gam9pbkNsYXNzZXModmFsKSkge1xuICAgICAgICAgIGJ1Zi5wdXNoKCcgJyArIGtleSArICc9XCInICsgdmFsICsgJ1wiJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1Zi5wdXNoKGV4cG9ydHMuYXR0cihrZXksIHZhbCwgZmFsc2UsIHRlcnNlKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1Zi5qb2luKCcnKTtcbn07XG5cbi8qKlxuICogRXNjYXBlIHRoZSBnaXZlbiBzdHJpbmcgb2YgYGh0bWxgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG52YXIgamFkZV9lbmNvZGVfaHRtbF9ydWxlcyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnXG59O1xudmFyIGphZGVfbWF0Y2hfaHRtbCA9IC9bJjw+XCJdL2c7XG5cbmZ1bmN0aW9uIGphZGVfZW5jb2RlX2NoYXIoYykge1xuICByZXR1cm4gamFkZV9lbmNvZGVfaHRtbF9ydWxlc1tjXSB8fCBjO1xufVxuXG5leHBvcnRzLmVzY2FwZSA9IGphZGVfZXNjYXBlO1xuZnVuY3Rpb24gamFkZV9lc2NhcGUoaHRtbCl7XG4gIHZhciByZXN1bHQgPSBTdHJpbmcoaHRtbCkucmVwbGFjZShqYWRlX21hdGNoX2h0bWwsIGphZGVfZW5jb2RlX2NoYXIpO1xuICBpZiAocmVzdWx0ID09PSAnJyArIGh0bWwpIHJldHVybiBodG1sO1xuICBlbHNlIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJlLXRocm93IHRoZSBnaXZlbiBgZXJyYCBpbiBjb250ZXh0IHRvIHRoZVxuICogdGhlIGphZGUgaW4gYGZpbGVuYW1lYCBhdCB0aGUgZ2l2ZW4gYGxpbmVub2AuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsaW5lbm9cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMucmV0aHJvdyA9IGZ1bmN0aW9uIHJldGhyb3coZXJyLCBmaWxlbmFtZSwgbGluZW5vLCBzdHIpe1xuICBpZiAoIShlcnIgaW5zdGFuY2VvZiBFcnJvcikpIHRocm93IGVycjtcbiAgaWYgKCh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnIHx8ICFmaWxlbmFtZSkgJiYgIXN0cikge1xuICAgIGVyci5tZXNzYWdlICs9ICcgb24gbGluZSAnICsgbGluZW5vO1xuICAgIHRocm93IGVycjtcbiAgfVxuICB0cnkge1xuICAgIHN0ciA9IHN0ciB8fCByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0ZjgnKVxuICB9IGNhdGNoIChleCkge1xuICAgIHJldGhyb3coZXJyLCBudWxsLCBsaW5lbm8pXG4gIH1cbiAgdmFyIGNvbnRleHQgPSAzXG4gICAgLCBsaW5lcyA9IHN0ci5zcGxpdCgnXFxuJylcbiAgICAsIHN0YXJ0ID0gTWF0aC5tYXgobGluZW5vIC0gY29udGV4dCwgMClcbiAgICAsIGVuZCA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgbGluZW5vICsgY29udGV4dCk7XG5cbiAgLy8gRXJyb3IgY29udGV4dFxuICB2YXIgY29udGV4dCA9IGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLm1hcChmdW5jdGlvbihsaW5lLCBpKXtcbiAgICB2YXIgY3VyciA9IGkgKyBzdGFydCArIDE7XG4gICAgcmV0dXJuIChjdXJyID09IGxpbmVubyA/ICcgID4gJyA6ICcgICAgJylcbiAgICAgICsgY3VyclxuICAgICAgKyAnfCAnXG4gICAgICArIGxpbmU7XG4gIH0pLmpvaW4oJ1xcbicpO1xuXG4gIC8vIEFsdGVyIGV4Y2VwdGlvbiBtZXNzYWdlXG4gIGVyci5wYXRoID0gZmlsZW5hbWU7XG4gIGVyci5tZXNzYWdlID0gKGZpbGVuYW1lIHx8ICdKYWRlJykgKyAnOicgKyBsaW5lbm9cbiAgICArICdcXG4nICsgY29udGV4dCArICdcXG5cXG4nICsgZXJyLm1lc3NhZ2U7XG4gIHRocm93IGVycjtcbn07XG5cbmV4cG9ydHMuRGVidWdJdGVtID0gZnVuY3Rpb24gRGVidWdJdGVtKGxpbmVubywgZmlsZW5hbWUpIHtcbiAgdGhpcy5saW5lbm8gPSBsaW5lbm87XG4gIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbn0iLCIiLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4zXG4vKlxuQmFzZWQgb2ZmIHNvdXJjZXMgZnJvbSB0aGUgZm9sbG93aW5nIGNvZGViYXNlczpcbmh0dHBzOi8vZ2l0aHViLmNvbS9waWNraGFyZHQvY29mZmVlc2NyaXB0LWNvZGVtaXJyb3ItbW9kZVxuaHR0cHM6Ly9naXRodWIuY29tL3hpeGl4YW8vVGVhVGFibGUvYmxvYi9tYXN0ZXIvc2NyaXB0cy9jb21waWxlcnMvaWNlZGNvZmZlZXNjcmlwdC9oaWdobGlnaHRlci5jb2ZmZWVcbiovXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQ29kZU1pcnJvckljZWRDb2ZmZWVTY3JpcHQgPSBmdW5jdGlvbiAoY29uZikge1xuICAgIHZhciBFUlJPUkNMQVNTLCBhbnlJcywgYm91bmRhcnlUb2tlbiwgY2xhc3NJZGVudGlmaWVycywgY29tbW9uQ29uc3RhbnRzLCBjb21tb25LZXl3b3JkcywgY29uc3RhbnRJZGVudGlmaWVycywgY29uc3RhbnRzLCBkZWRlbnQsIGRvdWJsZURlbGltaXRlcnMsIGRvdWJsZU9wZXJhdG9ycywgZmllbGQsIGZ1bmN0aW9uRGVjbGFyYXRpb24sIGZ1bmN0aW9uSWRlbnRpZmllciwgaWNlZEtleXdvcmRzLCBpZGVudGlmaWVycywgaW5kZW50LCBpbmRlbnRLZXl3b3Jkcywga2V5d29yZHMsIGxvbmdDb21tZW50LCBvdGhlcktleXdvcmRzLCBwYXJlbkNvbnN0cnVjdG9ycywgcmVnZXhQcmVmaXhlcywgcmVnZXhUb2tlbiwgc2ltcGxlVG9rZW5NYXRjaGVyLCBzaW5nbGVEZWxpbWl0ZXJzLCBzaW5nbGVPcGVyYXRvcnMsIHN0cmluZ1ByZWZpeGVzLCB0b2tlbkJhc2UsIHRva2VuRmFjdG9yeSwgdG9rZW5MZXhlciwgdHJpcGxlRGVsaW1pdGVycywgd29yZE9wZXJhdG9ycywgd29yZFJlZ2V4cDtcbiAgICBFUlJPUkNMQVNTID0gJ2Vycm9yJztcbiAgICB3b3JkUmVnZXhwID0gZnVuY3Rpb24od29yZHMpIHtcbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiXigoXCIgKyB3b3Jkcy5qb2luKFwiKXwoXCIpICsgXCIpKVxcXFxiXCIpO1xuICAgIH07XG4gICAgc2luZ2xlT3BlcmF0b3JzID0gbmV3IFJlZ0V4cChcIl5bXFxcXCtcXFxcLVxcXFwqLyUmfFxcXFxefjw+IT9dXCIpO1xuICAgIHNpbmdsZURlbGltaXRlcnMgPSBuZXcgUmVnRXhwKFwiXltcXFxcKFxcXFwpQCxgO1xcXFwuXVwiKTtcbiAgICBkb3VibGVPcGVyYXRvcnMgPSBuZXcgUmVnRXhwKFwiXigoPSl8KDopfCgtPil8KD0+KXwoXFxcXCtcXFxcKyl8KFxcXFwrXFxcXD0pfChcXFxcLVxcXFwtKXwoXFxcXC1cXFxcPSl8KFxcXFwqXFxcXCopfChcXFxcKlxcXFw9KXwoXFxcXC9cXFxcLyl8KFxcXFwvXFxcXD0pfCg9PSl8KCE9KXwoPD0pfCg+PSl8KDw+KXwoPDwpfCg+Pil8KC8vKSlcIik7XG4gICAgZG91YmxlRGVsaW1pdGVycyA9IG5ldyBSZWdFeHAoXCJeKChcXFxcLlxcXFwuKXwoXFxcXCs9KXwoXFxcXC09KXwoXFxcXCo9KXwoJT0pfCgvPSl8KCY9KXwoXFxcXHw9KXwoXFxcXF49KXwoJiY9KXwoXFxcXHx8PSkpXCIpO1xuICAgIHRyaXBsZURlbGltaXRlcnMgPSBuZXcgUmVnRXhwKFwiXigoXFxcXC5cXFxcLlxcXFwuKXwoLy89KXwoPj49KXwoPDw9KXwoXFxcXCpcXFxcKj0pKVwiKTtcbiAgICBwYXJlbkNvbnN0cnVjdG9ycyA9IG5ldyBSZWdFeHAoXCJeW1xcXFxbXFxcXF1cXFxce1xcXFx9XVwiKTtcbiAgICBjb25zdGFudElkZW50aWZpZXJzID0gbmV3IFJlZ0V4cChcIl5bX0EtWiRdW19BLVokMC05XStcXFxcYlwiKTtcbiAgICBjbGFzc0lkZW50aWZpZXJzID0gbmV3IFJlZ0V4cChcIl5bX0EtWiRdW19BLVphLXokMC05XSpcIik7XG4gICAgaWRlbnRpZmllcnMgPSBuZXcgUmVnRXhwKFwiXltfYS16JF1bX0EtWmEteiQwLTldKlwiKTtcbiAgICBmaWVsZCA9IG5ldyBSZWdFeHAoXCJeQFtfQS1aYS16JF1bX0EtWmEteiQwLTldKlwiKTtcbiAgICBmdW5jdGlvbklkZW50aWZpZXIgPSBuZXcgUmVnRXhwKFwiXltfYS16JF1bX0EtWmEteiQwLTldKlxcXFxzPyg6fD0pXFxcXHM/KFxcXFwoW19BLVphLXokMC05QCw9XFxcXC5cXFxcW1xcXFxdXFxcXHNdKlxcXFwpXFxcXHMqKT8oKC0+KXwoPT4pKVwiKTtcbiAgICBmdW5jdGlvbkRlY2xhcmF0aW9uID0gbmV3IFJlZ0V4cChcIl4oXFxcXChbX0EtWmEteiQwLTlALD1cXFxcLlxcXFxbXFxcXF1cXFxcc10qXFxcXClcXFxccyopPygoLT4pfCg9PikpXCIpO1xuICAgIHdvcmRPcGVyYXRvcnMgPSB3b3JkUmVnZXhwKFsnYW5kJywgJ29yJywgJ25vdCcsICdpcycsICdpc250JywgJ2luJywgJ2luc3RhbmNlb2YnLCAndHlwZW9mJ10pO1xuICAgIGluZGVudEtleXdvcmRzID0gWydmb3InLCAnd2hpbGUnLCAnbG9vcCcsICdpZicsICd1bmxlc3MnLCAnZWxzZScsICdzd2l0Y2gnLCAndHJ5JywgJ2NhdGNoJywgJ2ZpbmFsbHknLCAnY2xhc3MnXTtcbiAgICBjb21tb25LZXl3b3JkcyA9IFsnYnJlYWsnLCAnYnknLCAnY29udGludWUnLCAnZGVsZXRlJywgJ2RvJywgJ2luJywgJ29mJywgJ25ldycsICdyZXR1cm4nLCAndGhlbicsICd0aHJvdycsICd3aGVuJywgJ3VudGlsJywgJ2V4dGVuZHMnXTtcbiAgICBvdGhlcktleXdvcmRzID0gd29yZFJlZ2V4cChbJ2RlYnVnZ2VyJywgJ3RoaXMnXSk7XG4gICAgaWNlZEtleXdvcmRzID0gd29yZFJlZ2V4cChbJ2F3YWl0JywgJ2RlZmVyJ10pO1xuICAgIGtleXdvcmRzID0gd29yZFJlZ2V4cChpbmRlbnRLZXl3b3Jkcy5jb25jYXQoY29tbW9uS2V5d29yZHMpKTtcbiAgICBpbmRlbnRLZXl3b3JkcyA9IHdvcmRSZWdleHAoaW5kZW50S2V5d29yZHMpO1xuICAgIHN0cmluZ1ByZWZpeGVzID0gbmV3IFJlZ0V4cChcIl4oJ3szfXxcXFwiezN9fFsnXFxcIl0pXCIpO1xuICAgIHJlZ2V4UHJlZml4ZXMgPSBuZXcgUmVnRXhwKFwiXigvezN9fC8pXCIpO1xuICAgIGNvbW1vbkNvbnN0YW50cyA9IFtcIkluZmluaXR5XCIsIFwiTmFOXCIsIFwidW5kZWZpbmVkXCIsIFwibnVsbFwiLCBcInRydWVcIiwgXCJmYWxzZVwiLCBcIm9uXCIsIFwib2ZmXCIsIFwieWVzXCIsIFwibm9cIl07XG4gICAgY29uc3RhbnRzID0gd29yZFJlZ2V4cChjb21tb25Db25zdGFudHMpO1xuICAgIHRva2VuQmFzZSA9IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHZhciBjaCwgZmxvYXRMaXRlcmFsLCBsaW5lT2Zmc2V0LCBzY29wZU9mZnNldCwgdG9rZW47XG4gICAgICBpZiAoc3RyZWFtLnNvbCgpKSB7XG4gICAgICAgIHNjb3BlT2Zmc2V0ID0gc3RhdGUuc2NvcGVzWzBdLm9mZnNldDtcbiAgICAgICAgaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSB7XG4gICAgICAgICAgbGluZU9mZnNldCA9IHN0cmVhbS5pbmRlbnRhdGlvbigpO1xuICAgICAgICAgIGlmIChsaW5lT2Zmc2V0ID4gc2NvcGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiAnaW5kZW50JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVPZmZzZXQgPCBzY29wZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuICdkZWRlbnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChzY29wZU9mZnNldCA+IDApIHtcbiAgICAgICAgICBkZWRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNoID0gc3RyZWFtLnBlZWsoKTtcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goXCIjIyNcIikpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBsb25nQ29tbWVudDtcbiAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfVxuICAgICAgaWYgKGNoID09PSBcIiNcIikge1xuICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL14tP1swLTlcXC5dLywgZmFsc2UpKSB7XG4gICAgICAgIGZsb2F0TGl0ZXJhbCA9IGZhbHNlO1xuICAgICAgICBpZiAoKHN0cmVhbS5tYXRjaCgvXi0/XFxkKlxcLlxcZCsoZVtcXCtcXC1dP1xcZCspPy9pKSkgfHwgKHN0cmVhbS5tYXRjaCgvXi0/XFxkK1xcLlxcZCovKSkgfHwgKHN0cmVhbS5tYXRjaCgvXi0/XFwuXFxkKy8pKSkge1xuICAgICAgICAgIGZsb2F0TGl0ZXJhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsb2F0TGl0ZXJhbCkge1xuICAgICAgICAgIGlmIChzdHJlYW0ucGVlaygpID09PSBcIi5cIikge1xuICAgICAgICAgICAgc3RyZWFtLmJhY2tVcCgxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChzdHJlYW0ubWF0Y2goL14tPzB4WzAtOWEtZl0rL2kpKSB8fCAoc3RyZWFtLm1hdGNoKC9eLT9bMS05XVxcZCooZVtcXCtcXC1dP1xcZCspPy8pKSB8fCAoc3RyZWFtLm1hdGNoKC9eLT8wKD8hW1xcZHhdKS9pKSkpIHtcbiAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN0cmVhbS5tYXRjaChzdHJpbmdQcmVmaXhlcykpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkZhY3Rvcnkoc3RyZWFtLmN1cnJlbnQoKSwgXCJzdHJpbmdcIik7XG4gICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2gocmVnZXhQcmVmaXhlcykpIHtcbiAgICAgICAgaWYgKHN0cmVhbS5jdXJyZW50KCkgIT09IFwiL1wiIHx8IHN0cmVhbS5tYXRjaCgvXi4qXFwvLywgZmFsc2UpKSB7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSByZWdleFRva2VuKHN0cmVhbS5jdXJyZW50KCksIFwic3RyaW5nLTJcIik7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmVhbS5iYWNrVXAoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goZnVuY3Rpb25JZGVudGlmaWVyLCBmYWxzZSkpIHtcbiAgICAgICAgc3RyZWFtLm1hdGNoKGlkZW50aWZpZXJzKTtcbiAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25pZFwiO1xuICAgICAgfVxuICAgICAgdG9rZW4gPSBzaW1wbGVUb2tlbk1hdGNoZXIoc3RyZWFtLCBbXCJmdW5jdGlvbmRlY1wiLCBmdW5jdGlvbkRlY2xhcmF0aW9uLCBcImZpZWxkXCIsIGZpZWxkLCBcIm9wZXJhdG9yXCIsIHRyaXBsZURlbGltaXRlcnMsIGRvdWJsZURlbGltaXRlcnMsIFwib3BlcmF0b3JcIiwgZG91YmxlT3BlcmF0b3JzLCBzaW5nbGVPcGVyYXRvcnMsIHdvcmRPcGVyYXRvcnMsIFwicHVuY3R1YXRpb25cIiwgc2luZ2xlRGVsaW1pdGVycywgXCJhdG9tXCIsIGNvbnN0YW50cywgXCJrZXl3b3JkXCIsIGtleXdvcmRzLCBcImtleXdvcmQyXCIsIG90aGVyS2V5d29yZHMsIFwia2V5d29yZDNcIiwgaWNlZEtleXdvcmRzLCBcImNvbnN0cnVjdG9yXCIsIHBhcmVuQ29uc3RydWN0b3JzLCBcImNvbnN0YW50XCIsIGNvbnN0YW50SWRlbnRpZmllcnMsIFwiY2xhc3NuYW1lXCIsIGNsYXNzSWRlbnRpZmllcnMsIFwidmFyaWFibGVcIiwgaWRlbnRpZmllcnNdKTtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9XG4gICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgcmV0dXJuIEVSUk9SQ0xBU1M7XG4gICAgfTtcbiAgICBzaW1wbGVUb2tlbk1hdGNoZXIgPSBmdW5jdGlvbihzdHJlYW0sIGtleXNGb3JQYXR0ZXJucykge1xuICAgICAgdmFyIGl0ZW0sIHRva2VuLCB0b2tlbk1hdGNoZXMsIF9pLCBfbGVuO1xuICAgICAgdG9rZW4gPSBcIlwiO1xuICAgICAgdG9rZW5NYXRjaGVzID0gZmFsc2U7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGtleXNGb3JQYXR0ZXJucy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBpdGVtID0ga2V5c0ZvclBhdHRlcm5zW19pXTtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0b2tlbk1hdGNoZXMpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0b2tlbiA9IGl0ZW07XG4gICAgICAgICAgdG9rZW5NYXRjaGVzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5NYXRjaGVzIHx8ICh0b2tlbk1hdGNoZXMgPSBzdHJlYW0ubWF0Y2goaXRlbSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG9rZW5NYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG4gICAgdG9rZW5GYWN0b3J5ID0gZnVuY3Rpb24oZGVsaW1pdGVyLCBvdXRjbGFzcykge1xuICAgICAgcmV0dXJuIGJvdW5kYXJ5VG9rZW4oZGVsaW1pdGVyLCBvdXRjbGFzcyk7XG4gICAgfTtcbiAgICByZWdleFRva2VuID0gZnVuY3Rpb24oZGVsaW1pdGVyLCBvdXRjbGFzcykge1xuICAgICAgcmV0dXJuIGJvdW5kYXJ5VG9rZW4oZGVsaW1pdGVyLCBvdXRjbGFzcywgZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBzdHJlYW0ubWF0Y2goL15baWdtXSpcXGIvKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgYm91bmRhcnlUb2tlbiA9IGZ1bmN0aW9uKGRlbGltaXRlciwgb3V0Y2xhc3MsIHN1ZmZpeCkge1xuICAgICAgdmFyIHNpbmdsZWxpbmU7XG4gICAgICBzaW5nbGVsaW5lID0gZGVsaW1pdGVyLmxlbmd0aCA9PT0gMTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG4gICAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXidcIlxcL1xcXFxdLyk7XG4gICAgICAgICAgaWYgKHN0cmVhbS5lYXQoXCJcXFxcXCIpKSB7XG4gICAgICAgICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgICAgICAgaWYgKHNpbmdsZWxpbmUgJiYgc3RyZWFtLmVvbCgpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvdXRjbGFzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHN0cmVhbS5tYXRjaChkZWxpbWl0ZXIpKSB7XG4gICAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgICAgIGlmIChzdWZmaXgpIHtcbiAgICAgICAgICAgICAgc3VmZml4KHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0Y2xhc3M7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmVhbS5lYXQoL1snXCJcXC9dLyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaW5nbGVsaW5lKSB7XG4gICAgICAgICAgaWYgKGNvbmYubW9kZS5zaW5nbGVMaW5lU3RyaW5nRXJyb3JzKSB7XG4gICAgICAgICAgICBvdXRjbGFzcyA9IEVSUk9SQ0xBU1M7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0Y2xhc3M7XG4gICAgICB9O1xuICAgIH07XG4gICAgbG9uZ0NvbW1lbnQgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1teI10vKTtcbiAgICAgICAgaWYgKHN0cmVhbS5tYXRjaChcIiMjI1wiKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZShcIiNcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgfTtcbiAgICBpbmRlbnQgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlLCB0eXBlKSB7XG4gICAgICB2YXIgaW5kZW50VW5pdCwgc2NvcGUsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgdHlwZSA9IHR5cGUgfHwgXCJjb2ZmZWVcIjtcbiAgICAgIGluZGVudFVuaXQgPSAwO1xuICAgICAgaWYgKHR5cGUgPT09IFwiY29mZmVlXCIpIHtcbiAgICAgICAgX3JlZiA9IHN0YXRlLnNjb3BlcztcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgc2NvcGUgPSBfcmVmW19pXTtcbiAgICAgICAgICBpZiAoc2NvcGUudHlwZSA9PT0gXCJjb2ZmZWVcIikge1xuICAgICAgICAgICAgaW5kZW50VW5pdCA9IHNjb3BlLm9mZnNldCArIGNvbmYuaW5kZW50VW5pdDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZW50VW5pdCA9IHN0cmVhbS5jb2x1bW4oKSArIHN0cmVhbS5jdXJyZW50KCkubGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlLnNjb3Blcy51bnNoaWZ0KHtcbiAgICAgICAgb2Zmc2V0OiBpbmRlbnRVbml0LFxuICAgICAgICB0eXBlOiB0eXBlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGRlZGVudCA9IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHZhciBpLCBzY29wZSwgX2ksIF9pbmRlbnQsIF9pbmRlbnRfaW5kZXgsIF9sZW4sIF9yZWY7XG4gICAgICBpZiAoc3RhdGUuc2NvcGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuc2NvcGVzWzBdLnR5cGUgPT09IFwiY29mZmVlXCIpIHtcbiAgICAgICAgX2luZGVudCA9IHN0cmVhbS5pbmRlbnRhdGlvbigpO1xuICAgICAgICBfaW5kZW50X2luZGV4ID0gLTE7XG4gICAgICAgIF9yZWYgPSBzdGF0ZS5zY29wZXM7XG4gICAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgICAgc2NvcGUgPSBfcmVmW2ldO1xuICAgICAgICAgIGlmIChfaW5kZW50ID09PSBzY29wZS5vZmZzZXQpIHtcbiAgICAgICAgICAgIF9pbmRlbnRfaW5kZXggPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChfaW5kZW50X2luZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChzdGF0ZS5zY29wZXNbMF0ub2Zmc2V0ICE9PSBfaW5kZW50KSB7XG4gICAgICAgICAgc3RhdGUuc2NvcGVzLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuc2NvcGVzLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRva2VuTGV4ZXIgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgY3VycmVudCwgZGVsaW1pdGVyX2luZGV4LCBzdHlsZTtcbiAgICAgIHN0eWxlID0gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBjdXJyZW50ID0gc3RyZWFtLmN1cnJlbnQoKTtcbiAgICAgIGlmIChjdXJyZW50ID09PSBcIi5cIikge1xuICAgICAgICBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICBjdXJyZW50ID0gc3RyZWFtLmN1cnJlbnQoKTtcbiAgICAgICAgaWYgKGFueUlzKFtcInZhcmlhYmxlXCIsIFwiY29uc3RhbnRcIiwgXCJjbGFzc25hbWVcIiwgXCJmdW5jdGlvbmlkXCJdLCBzdHlsZSkpIHtcbiAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIEVSUk9SQ0xBU1M7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSBcIkBcIikge1xuICAgICAgICBzdHJlYW0uZWF0KFwiQFwiKTtcbiAgICAgICAgcmV0dXJuIFwia2V5d29yZFwiO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnQgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgc3RhdGUuZGVkZW50ICs9IDE7XG4gICAgICB9XG4gICAgICBpZiAoKChjdXJyZW50ID09PSBcIi0+XCIgfHwgY3VycmVudCA9PT0gXCI9PlwiKSAmJiAhc3RhdGUubGFtYmRhICYmIHN0YXRlLnNjb3Blc1swXS50eXBlID09PSBcImNvZmZlZVwiICYmIHN0cmVhbS5wZWVrKCkgPT09IFwiXCIpIHx8IHN0eWxlID09PSBcImluZGVudFwiKSB7XG4gICAgICAgIGluZGVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGRlbGltaXRlcl9pbmRleCA9IFwiWyh7XCIuaW5kZXhPZihjdXJyZW50KTtcbiAgICAgIGlmIChkZWxpbWl0ZXJfaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGluZGVudChzdHJlYW0sIHN0YXRlLCBcIl0pfVwiLnNsaWNlKGRlbGltaXRlcl9pbmRleCwgZGVsaW1pdGVyX2luZGV4ICsgMSkpO1xuICAgICAgfVxuICAgICAgaWYgKGluZGVudEtleXdvcmRzLmV4ZWMoY3VycmVudCkpIHtcbiAgICAgICAgaW5kZW50KHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnQgPT09IFwidGhlblwiKSB7XG4gICAgICAgIGRlZGVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHlsZSA9PT0gXCJkZWRlbnRcIiAmJiBkZWRlbnQoc3RyZWFtLCBzdGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIEVSUk9SQ0xBU1M7XG4gICAgICB9XG4gICAgICBkZWxpbWl0ZXJfaW5kZXggPSBcIl0pfVwiLmluZGV4T2YoY3VycmVudCk7XG4gICAgICBpZiAoZGVsaW1pdGVyX2luZGV4ICE9PSAtMSAmJiBkZWRlbnQoc3RyZWFtLCBzdGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIEVSUk9SQ0xBU1M7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZGVkZW50ID4gMCAmJiBzdHJlYW0uZW9sKCkgJiYgc3RhdGUuc2NvcGVzWzBdLnR5cGUgPT09IFwiY29mZmVlXCIpIHtcbiAgICAgICAgaWYgKHN0YXRlLnNjb3Blcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgc3RhdGUuc2NvcGVzLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuZGVkZW50IC09IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfTtcbiAgICBhbnlJcyA9IGZ1bmN0aW9uKGxpc3QsIHdoYXQpIHtcbiAgICAgIHZhciBpdGVtLCBfaSwgX2xlbjtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gbGlzdC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBpdGVtID0gbGlzdFtfaV07XG4gICAgICAgIGlmIChpdGVtID09PSB3aGF0KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydFN0YXRlOiBmdW5jdGlvbihiYXNlY29sdW1uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdG9rZW5pemU6IHRva2VuQmFzZSxcbiAgICAgICAgICBzY29wZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgb2Zmc2V0OiBiYXNlY29sdW1uIHx8IDAsXG4gICAgICAgICAgICAgIHR5cGU6IFwiY29mZmVlXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIGxhc3RUb2tlbjogbnVsbCxcbiAgICAgICAgICBsYW1iZGE6IGZhbHNlLFxuICAgICAgICAgIGRlZGVudDogMFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHRva2VuOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIHZhciBzdHlsZTtcbiAgICAgICAgc3R5bGUgPSB0b2tlbkxleGVyKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICBzdGF0ZS5sYXN0VG9rZW4gPSB7XG4gICAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICAgIGNvbnRlbnQ6IHN0cmVhbS5jdXJyZW50KClcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHN0cmVhbS5lb2woKSAmJiBzdHJlYW0ubGFtYmRhKSB7XG4gICAgICAgICAgc3RhdGUubGFtYmRhID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfSxcbiAgICAgIGluZGVudDogZnVuY3Rpb24oc3RhdGUsIHRleHRBZnRlcikge1xuICAgICAgICBpZiAoc3RhdGUudG9rZW5pemUgIT09IHRva2VuQmFzZSkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZS5zY29wZXNbMF0ub2Zmc2V0O1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgaWYgKCFDb2RlTWlycm9yICYmICF3aW5kb3cuQ29kZU1pcnJvcikgdmFyIENvZGVNaXJyb3IgPSB3aW5kb3cuQ29kZU1pcnJvciA9IHJlcXVpcmUoXCJjb2RlbWlycm9yXCIpO1xuICBDb2RlTWlycm9yLmRlZmluZU1vZGUoXCJpY2VkY29mZmVlc2NyaXB0XCIsIENvZGVNaXJyb3JJY2VkQ29mZmVlU2NyaXB0KTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC94LWljZWRjb2ZmZWVzY3JpcHRcIiwgXCJpY2VkY29mZmVlc2NyaXB0XCIpO1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIG1vZHVsZS5leHBvcnRzID0gQ29kZU1pcnJvckljZWRDb2ZmZWVTY3JpcHQ7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbi8vIFRoaXMgaXMgQ29kZU1pcnJvciAoaHR0cDovL2NvZGVtaXJyb3IubmV0KSwgYSBjb2RlIGVkaXRvclxuLy8gaW1wbGVtZW50ZWQgaW4gSmF2YVNjcmlwdCBvbiB0b3Agb2YgdGhlIGJyb3dzZXIncyBET00uXG4vL1xuLy8gWW91IGNhbiBmaW5kIHNvbWUgdGVjaG5pY2FsIGJhY2tncm91bmQgZm9yIHNvbWUgb2YgdGhlIGNvZGUgYmVsb3dcbi8vIGF0IGh0dHA6Ly9tYXJpam5oYXZlcmJla2UubmwvYmxvZy8jY20taW50ZXJuYWxzIC5cblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtb2QoKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgcmV0dXJuIGRlZmluZShbXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgICh0aGlzIHx8IHdpbmRvdykuQ29kZU1pcnJvciA9IG1vZCgpO1xufSkoZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIEJST1dTRVIgU05JRkZJTkdcblxuICAvLyBLbHVkZ2VzIGZvciBidWdzIGFuZCBiZWhhdmlvciBkaWZmZXJlbmNlcyB0aGF0IGNhbid0IGJlIGZlYXR1cmVcbiAgLy8gZGV0ZWN0ZWQgYXJlIGVuYWJsZWQgYmFzZWQgb24gdXNlckFnZW50IGV0YyBzbmlmZmluZy5cbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gIHZhciBwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybTtcblxuICB2YXIgZ2Vja28gPSAvZ2Vja29cXC9cXGQvaS50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBpZV91cHRvMTAgPSAvTVNJRSBcXGQvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGllXzExdXAgPSAvVHJpZGVudFxcLyg/Ols3LTldfFxcZHsyLH0pXFwuLipydjooXFxkKykvLmV4ZWModXNlckFnZW50KTtcbiAgdmFyIGllID0gaWVfdXB0bzEwIHx8IGllXzExdXA7XG4gIHZhciBpZV92ZXJzaW9uID0gaWUgJiYgKGllX3VwdG8xMCA/IGRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCA2IDogaWVfMTF1cFsxXSk7XG4gIHZhciB3ZWJraXQgPSAvV2ViS2l0XFwvLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBxdHdlYmtpdCA9IHdlYmtpdCAmJiAvUXRcXC9cXGQrXFwuXFxkKy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgY2hyb21lID0gL0Nocm9tZVxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcHJlc3RvID0gL09wZXJhXFwvLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBzYWZhcmkgPSAvQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcik7XG4gIHZhciBtYWNfZ2VNb3VudGFpbkxpb24gPSAvTWFjIE9TIFggMVxcZFxcRChbOC05XXxcXGRcXGQpXFxELy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBwaGFudG9tID0gL1BoYW50b21KUy8udGVzdCh1c2VyQWdlbnQpO1xuXG4gIHZhciBpb3MgPSAvQXBwbGVXZWJLaXQvLnRlc3QodXNlckFnZW50KSAmJiAvTW9iaWxlXFwvXFx3Ky8udGVzdCh1c2VyQWdlbnQpO1xuICAvLyBUaGlzIGlzIHdvZWZ1bGx5IGluY29tcGxldGUuIFN1Z2dlc3Rpb25zIGZvciBhbHRlcm5hdGl2ZSBtZXRob2RzIHdlbGNvbWUuXG4gIHZhciBtb2JpbGUgPSBpb3MgfHwgL0FuZHJvaWR8d2ViT1N8QmxhY2tCZXJyeXxPcGVyYSBNaW5pfE9wZXJhIE1vYml8SUVNb2JpbGUvaS50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBtYWMgPSBpb3MgfHwgL01hYy8udGVzdChwbGF0Zm9ybSk7XG4gIHZhciBjaHJvbWVPUyA9IC9cXGJDck9TXFxiLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciB3aW5kb3dzID0gL3dpbi9pLnRlc3QocGxhdGZvcm0pO1xuXG4gIHZhciBwcmVzdG9fdmVyc2lvbiA9IHByZXN0byAmJiB1c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cXC8oXFxkKlxcLlxcZCopLyk7XG4gIGlmIChwcmVzdG9fdmVyc2lvbikgcHJlc3RvX3ZlcnNpb24gPSBOdW1iZXIocHJlc3RvX3ZlcnNpb25bMV0pO1xuICBpZiAocHJlc3RvX3ZlcnNpb24gJiYgcHJlc3RvX3ZlcnNpb24gPj0gMTUpIHsgcHJlc3RvID0gZmFsc2U7IHdlYmtpdCA9IHRydWU7IH1cbiAgLy8gU29tZSBicm93c2VycyB1c2UgdGhlIHdyb25nIGV2ZW50IHByb3BlcnRpZXMgdG8gc2lnbmFsIGNtZC9jdHJsIG9uIE9TIFhcbiAgdmFyIGZsaXBDdHJsQ21kID0gbWFjICYmIChxdHdlYmtpdCB8fCBwcmVzdG8gJiYgKHByZXN0b192ZXJzaW9uID09IG51bGwgfHwgcHJlc3RvX3ZlcnNpb24gPCAxMi4xMSkpO1xuICB2YXIgY2FwdHVyZVJpZ2h0Q2xpY2sgPSBnZWNrbyB8fCAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KTtcblxuICAvLyBPcHRpbWl6ZSBzb21lIGNvZGUgd2hlbiB0aGVzZSBmZWF0dXJlcyBhcmUgbm90IHVzZWQuXG4gIHZhciBzYXdSZWFkT25seVNwYW5zID0gZmFsc2UsIHNhd0NvbGxhcHNlZFNwYW5zID0gZmFsc2U7XG5cbiAgLy8gRURJVE9SIENPTlNUUlVDVE9SXG5cbiAgLy8gQSBDb2RlTWlycm9yIGluc3RhbmNlIHJlcHJlc2VudHMgYW4gZWRpdG9yLiBUaGlzIGlzIHRoZSBvYmplY3RcbiAgLy8gdGhhdCB1c2VyIGNvZGUgaXMgdXN1YWxseSBkZWFsaW5nIHdpdGguXG5cbiAgZnVuY3Rpb24gQ29kZU1pcnJvcihwbGFjZSwgb3B0aW9ucykge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBDb2RlTWlycm9yKSkgcmV0dXJuIG5ldyBDb2RlTWlycm9yKHBsYWNlLCBvcHRpb25zKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBvcHRpb25zID8gY29weU9iaihvcHRpb25zKSA6IHt9O1xuICAgIC8vIERldGVybWluZSBlZmZlY3RpdmUgb3B0aW9ucyBiYXNlZCBvbiBnaXZlbiB2YWx1ZXMgYW5kIGRlZmF1bHRzLlxuICAgIGNvcHlPYmooZGVmYXVsdHMsIG9wdGlvbnMsIGZhbHNlKTtcbiAgICBzZXRHdXR0ZXJzRm9yTGluZU51bWJlcnMob3B0aW9ucyk7XG5cbiAgICB2YXIgZG9jID0gb3B0aW9ucy52YWx1ZTtcbiAgICBpZiAodHlwZW9mIGRvYyA9PSBcInN0cmluZ1wiKSBkb2MgPSBuZXcgRG9jKGRvYywgb3B0aW9ucy5tb2RlLCBudWxsLCBvcHRpb25zLmxpbmVTZXBhcmF0b3IpO1xuICAgIHRoaXMuZG9jID0gZG9jO1xuXG4gICAgdmFyIGlucHV0ID0gbmV3IENvZGVNaXJyb3IuaW5wdXRTdHlsZXNbb3B0aW9ucy5pbnB1dFN0eWxlXSh0aGlzKTtcbiAgICB2YXIgZGlzcGxheSA9IHRoaXMuZGlzcGxheSA9IG5ldyBEaXNwbGF5KHBsYWNlLCBkb2MsIGlucHV0KTtcbiAgICBkaXNwbGF5LndyYXBwZXIuQ29kZU1pcnJvciA9IHRoaXM7XG4gICAgdXBkYXRlR3V0dGVycyh0aGlzKTtcbiAgICB0aGVtZUNoYW5nZWQodGhpcyk7XG4gICAgaWYgKG9wdGlvbnMubGluZVdyYXBwaW5nKVxuICAgICAgdGhpcy5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lICs9IFwiIENvZGVNaXJyb3Itd3JhcFwiO1xuICAgIGlmIChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgaW5pdFNjcm9sbGJhcnModGhpcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAga2V5TWFwczogW10sICAvLyBzdG9yZXMgbWFwcyBhZGRlZCBieSBhZGRLZXlNYXBcbiAgICAgIG92ZXJsYXlzOiBbXSwgLy8gaGlnaGxpZ2h0aW5nIG92ZXJsYXlzLCBhcyBhZGRlZCBieSBhZGRPdmVybGF5XG4gICAgICBtb2RlR2VuOiAwLCAgIC8vIGJ1bXBlZCB3aGVuIG1vZGUvb3ZlcmxheSBjaGFuZ2VzLCB1c2VkIHRvIGludmFsaWRhdGUgaGlnaGxpZ2h0aW5nIGluZm9cbiAgICAgIG92ZXJ3cml0ZTogZmFsc2UsXG4gICAgICBkZWxheWluZ0JsdXJFdmVudDogZmFsc2UsXG4gICAgICBmb2N1c2VkOiBmYWxzZSxcbiAgICAgIHN1cHByZXNzRWRpdHM6IGZhbHNlLCAvLyB1c2VkIHRvIGRpc2FibGUgZWRpdGluZyBkdXJpbmcga2V5IGhhbmRsZXJzIHdoZW4gaW4gcmVhZE9ubHkgbW9kZVxuICAgICAgcGFzdGVJbmNvbWluZzogZmFsc2UsIGN1dEluY29taW5nOiBmYWxzZSwgLy8gaGVscCByZWNvZ25pemUgcGFzdGUvY3V0IGVkaXRzIGluIGlucHV0LnBvbGxcbiAgICAgIHNlbGVjdGluZ1RleHQ6IGZhbHNlLFxuICAgICAgZHJhZ2dpbmdUZXh0OiBmYWxzZSxcbiAgICAgIGhpZ2hsaWdodDogbmV3IERlbGF5ZWQoKSwgLy8gc3RvcmVzIGhpZ2hsaWdodCB3b3JrZXIgdGltZW91dFxuICAgICAga2V5U2VxOiBudWxsLCAgLy8gVW5maW5pc2hlZCBrZXkgc2VxdWVuY2VcbiAgICAgIHNwZWNpYWxDaGFyczogbnVsbFxuICAgIH07XG5cbiAgICB2YXIgY20gPSB0aGlzO1xuXG4gICAgLy8gT3ZlcnJpZGUgbWFnaWMgdGV4dGFyZWEgY29udGVudCByZXN0b3JlIHRoYXQgSUUgc29tZXRpbWVzIGRvZXNcbiAgICAvLyBvbiBvdXIgaGlkZGVuIHRleHRhcmVhIG9uIHJlbG9hZFxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXQodHJ1ZSk7IH0sIDIwKTtcblxuICAgIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyh0aGlzKTtcbiAgICBlbnN1cmVHbG9iYWxIYW5kbGVycygpO1xuXG4gICAgc3RhcnRPcGVyYXRpb24odGhpcyk7XG4gICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgYXR0YWNoRG9jKHRoaXMsIGRvYyk7XG5cbiAgICBpZiAoKG9wdGlvbnMuYXV0b2ZvY3VzICYmICFtb2JpbGUpIHx8IGNtLmhhc0ZvY3VzKCkpXG4gICAgICBzZXRUaW1lb3V0KGJpbmQob25Gb2N1cywgdGhpcyksIDIwKTtcbiAgICBlbHNlXG4gICAgICBvbkJsdXIodGhpcyk7XG5cbiAgICBmb3IgKHZhciBvcHQgaW4gb3B0aW9uSGFuZGxlcnMpIGlmIChvcHRpb25IYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShvcHQpKVxuICAgICAgb3B0aW9uSGFuZGxlcnNbb3B0XSh0aGlzLCBvcHRpb25zW29wdF0sIEluaXQpO1xuICAgIG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKHRoaXMpO1xuICAgIGlmIChvcHRpb25zLmZpbmlzaEluaXQpIG9wdGlvbnMuZmluaXNoSW5pdCh0aGlzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRIb29rcy5sZW5ndGg7ICsraSkgaW5pdEhvb2tzW2ldKHRoaXMpO1xuICAgIGVuZE9wZXJhdGlvbih0aGlzKTtcbiAgICAvLyBTdXBwcmVzcyBvcHRpbWl6ZWxlZ2liaWxpdHkgaW4gV2Via2l0LCBzaW5jZSBpdCBicmVha3MgdGV4dFxuICAgIC8vIG1lYXN1cmluZyBvbiBsaW5lIHdyYXBwaW5nIGJvdW5kYXJpZXMuXG4gICAgaWYgKHdlYmtpdCAmJiBvcHRpb25zLmxpbmVXcmFwcGluZyAmJlxuICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGRpc3BsYXkubGluZURpdikudGV4dFJlbmRlcmluZyA9PSBcIm9wdGltaXplbGVnaWJpbGl0eVwiKVxuICAgICAgZGlzcGxheS5saW5lRGl2LnN0eWxlLnRleHRSZW5kZXJpbmcgPSBcImF1dG9cIjtcbiAgfVxuXG4gIC8vIERJU1BMQVkgQ09OU1RSVUNUT1JcblxuICAvLyBUaGUgZGlzcGxheSBoYW5kbGVzIHRoZSBET00gaW50ZWdyYXRpb24sIGJvdGggZm9yIGlucHV0IHJlYWRpbmdcbiAgLy8gYW5kIGNvbnRlbnQgZHJhd2luZy4gSXQgaG9sZHMgcmVmZXJlbmNlcyB0byBET00gbm9kZXMgYW5kXG4gIC8vIGRpc3BsYXktcmVsYXRlZCBzdGF0ZS5cblxuICBmdW5jdGlvbiBEaXNwbGF5KHBsYWNlLCBkb2MsIGlucHV0KSB7XG4gICAgdmFyIGQgPSB0aGlzO1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICAgIC8vIENvdmVycyBib3R0b20tcmlnaHQgc3F1YXJlIHdoZW4gYm90aCBzY3JvbGxiYXJzIGFyZSBwcmVzZW50LlxuICAgIGQuc2Nyb2xsYmFyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1zY3JvbGxiYXItZmlsbGVyXCIpO1xuICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAvLyBDb3ZlcnMgYm90dG9tIG9mIGd1dHRlciB3aGVuIGNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyIGlzIG9uXG4gICAgLy8gYW5kIGggc2Nyb2xsYmFyIGlzIHByZXNlbnQuXG4gICAgZC5ndXR0ZXJGaWxsZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlci1maWxsZXJcIik7XG4gICAgZC5ndXR0ZXJGaWxsZXIuc2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIiwgXCJ0cnVlXCIpO1xuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgYWN0dWFsIGNvZGUsIHBvc2l0aW9uZWQgdG8gY292ZXIgdGhlIHZpZXdwb3J0LlxuICAgIGQubGluZURpdiA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItY29kZVwiKTtcbiAgICAvLyBFbGVtZW50cyBhcmUgYWRkZWQgdG8gdGhlc2UgdG8gcmVwcmVzZW50IHNlbGVjdGlvbiBhbmQgY3Vyc29ycy5cbiAgICBkLnNlbGVjdGlvbkRpdiA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZTsgei1pbmRleDogMVwiKTtcbiAgICBkLmN1cnNvckRpdiA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItY3Vyc29yc1wiKTtcbiAgICAvLyBBIHZpc2liaWxpdHk6IGhpZGRlbiBlbGVtZW50IHVzZWQgdG8gZmluZCB0aGUgc2l6ZSBvZiB0aGluZ3MuXG4gICAgZC5tZWFzdXJlID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1tZWFzdXJlXCIpO1xuICAgIC8vIFdoZW4gbGluZXMgb3V0c2lkZSBvZiB0aGUgdmlld3BvcnQgYXJlIG1lYXN1cmVkLCB0aGV5IGFyZSBkcmF3biBpbiB0aGlzLlxuICAgIGQubGluZU1lYXN1cmUgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLW1lYXN1cmVcIik7XG4gICAgLy8gV3JhcHMgZXZlcnl0aGluZyB0aGF0IG5lZWRzIHRvIGV4aXN0IGluc2lkZSB0aGUgdmVydGljYWxseS1wYWRkZWQgY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICBkLmxpbmVTcGFjZSA9IGVsdChcImRpdlwiLCBbZC5tZWFzdXJlLCBkLmxpbmVNZWFzdXJlLCBkLnNlbGVjdGlvbkRpdiwgZC5jdXJzb3JEaXYsIGQubGluZURpdl0sXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IG91dGxpbmU6IG5vbmVcIik7XG4gICAgLy8gTW92ZWQgYXJvdW5kIGl0cyBwYXJlbnQgdG8gY292ZXIgdmlzaWJsZSB2aWV3LlxuICAgIGQubW92ZXIgPSBlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBbZC5saW5lU3BhY2VdLCBcIkNvZGVNaXJyb3ItbGluZXNcIildLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZVwiKTtcbiAgICAvLyBTZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQsIGFsbG93aW5nIHNjcm9sbGluZy5cbiAgICBkLnNpemVyID0gZWx0KFwiZGl2XCIsIFtkLm1vdmVyXSwgXCJDb2RlTWlycm9yLXNpemVyXCIpO1xuICAgIGQuc2l6ZXJXaWR0aCA9IG51bGw7XG4gICAgLy8gQmVoYXZpb3Igb2YgZWx0cyB3aXRoIG92ZXJmbG93OiBhdXRvIGFuZCBwYWRkaW5nIGlzXG4gICAgLy8gaW5jb25zaXN0ZW50IGFjcm9zcyBicm93c2Vycy4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGVcbiAgICAvLyBzY3JvbGxhYmxlIGFyZWEgaXMgYmlnIGVub3VnaC5cbiAgICBkLmhlaWdodEZvcmNlciA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiBcIiArIHNjcm9sbGVyR2FwICsgXCJweDsgd2lkdGg6IDFweDtcIik7XG4gICAgLy8gV2lsbCBjb250YWluIHRoZSBndXR0ZXJzLCBpZiBhbnkuXG4gICAgZC5ndXR0ZXJzID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXJzXCIpO1xuICAgIGQubGluZUd1dHRlciA9IG51bGw7XG4gICAgLy8gQWN0dWFsIHNjcm9sbGFibGUgZWxlbWVudC5cbiAgICBkLnNjcm9sbGVyID0gZWx0KFwiZGl2XCIsIFtkLnNpemVyLCBkLmhlaWdodEZvcmNlciwgZC5ndXR0ZXJzXSwgXCJDb2RlTWlycm9yLXNjcm9sbFwiKTtcbiAgICBkLnNjcm9sbGVyLnNldEF0dHJpYnV0ZShcInRhYkluZGV4XCIsIFwiLTFcIik7XG4gICAgLy8gVGhlIGVsZW1lbnQgaW4gd2hpY2ggdGhlIGVkaXRvciBsaXZlcy5cbiAgICBkLndyYXBwZXIgPSBlbHQoXCJkaXZcIiwgW2Quc2Nyb2xsYmFyRmlsbGVyLCBkLmd1dHRlckZpbGxlciwgZC5zY3JvbGxlcl0sIFwiQ29kZU1pcnJvclwiKTtcblxuICAgIC8vIFdvcmsgYXJvdW5kIElFNyB6LWluZGV4IGJ1ZyAobm90IHBlcmZlY3QsIGhlbmNlIElFNyBub3QgcmVhbGx5IGJlaW5nIHN1cHBvcnRlZClcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDgpIHsgZC5ndXR0ZXJzLnN0eWxlLnpJbmRleCA9IC0xOyBkLnNjcm9sbGVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IDA7IH1cbiAgICBpZiAoIXdlYmtpdCAmJiAhKGdlY2tvICYmIG1vYmlsZSkpIGQuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gdHJ1ZTtcblxuICAgIGlmIChwbGFjZSkge1xuICAgICAgaWYgKHBsYWNlLmFwcGVuZENoaWxkKSBwbGFjZS5hcHBlbmRDaGlsZChkLndyYXBwZXIpO1xuICAgICAgZWxzZSBwbGFjZShkLndyYXBwZXIpO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgcmVuZGVyZWQgcmFuZ2UgKG1heSBiZSBiaWdnZXIgdGhhbiB0aGUgdmlldyB3aW5kb3cpLlxuICAgIGQudmlld0Zyb20gPSBkLnZpZXdUbyA9IGRvYy5maXJzdDtcbiAgICBkLnJlcG9ydGVkVmlld0Zyb20gPSBkLnJlcG9ydGVkVmlld1RvID0gZG9jLmZpcnN0O1xuICAgIC8vIEluZm9ybWF0aW9uIGFib3V0IHRoZSByZW5kZXJlZCBsaW5lcy5cbiAgICBkLnZpZXcgPSBbXTtcbiAgICBkLnJlbmRlcmVkVmlldyA9IG51bGw7XG4gICAgLy8gSG9sZHMgaW5mbyBhYm91dCBhIHNpbmdsZSByZW5kZXJlZCBsaW5lIHdoZW4gaXQgd2FzIHJlbmRlcmVkXG4gICAgLy8gZm9yIG1lYXN1cmVtZW50LCB3aGlsZSBub3QgaW4gdmlldy5cbiAgICBkLmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xuICAgIC8vIEVtcHR5IHNwYWNlIChpbiBwaXhlbHMpIGFib3ZlIHRoZSB2aWV3XG4gICAgZC52aWV3T2Zmc2V0ID0gMDtcbiAgICBkLmxhc3RXcmFwSGVpZ2h0ID0gZC5sYXN0V3JhcFdpZHRoID0gMDtcbiAgICBkLnVwZGF0ZUxpbmVOdW1iZXJzID0gbnVsbDtcblxuICAgIGQubmF0aXZlQmFyV2lkdGggPSBkLmJhckhlaWdodCA9IGQuYmFyV2lkdGggPSAwO1xuICAgIGQuc2Nyb2xsYmFyc0NsaXBwZWQgPSBmYWxzZTtcblxuICAgIC8vIFVzZWQgdG8gb25seSByZXNpemUgdGhlIGxpbmUgbnVtYmVyIGd1dHRlciB3aGVuIG5lY2Vzc2FyeSAod2hlblxuICAgIC8vIHRoZSBhbW91bnQgb2YgbGluZXMgY3Jvc3NlcyBhIGJvdW5kYXJ5IHRoYXQgbWFrZXMgaXRzIHdpZHRoIGNoYW5nZSlcbiAgICBkLmxpbmVOdW1XaWR0aCA9IGQubGluZU51bUlubmVyV2lkdGggPSBkLmxpbmVOdW1DaGFycyA9IG51bGw7XG4gICAgLy8gU2V0IHRvIHRydWUgd2hlbiBhIG5vbi1ob3Jpem9udGFsLXNjcm9sbGluZyBsaW5lIHdpZGdldCBpc1xuICAgIC8vIGFkZGVkLiBBcyBhbiBvcHRpbWl6YXRpb24sIGxpbmUgd2lkZ2V0IGFsaWduaW5nIGlzIHNraXBwZWQgd2hlblxuICAgIC8vIHRoaXMgaXMgZmFsc2UuXG4gICAgZC5hbGlnbldpZGdldHMgPSBmYWxzZTtcblxuICAgIGQuY2FjaGVkQ2hhcldpZHRoID0gZC5jYWNoZWRUZXh0SGVpZ2h0ID0gZC5jYWNoZWRQYWRkaW5nSCA9IG51bGw7XG5cbiAgICAvLyBUcmFja3MgdGhlIG1heGltdW0gbGluZSBsZW5ndGggc28gdGhhdCB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXJcbiAgICAvLyBjYW4gYmUga2VwdCBzdGF0aWMgd2hlbiBzY3JvbGxpbmcuXG4gICAgZC5tYXhMaW5lID0gbnVsbDtcbiAgICBkLm1heExpbmVMZW5ndGggPSAwO1xuICAgIGQubWF4TGluZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgIC8vIFVzZWQgZm9yIG1lYXN1cmluZyB3aGVlbCBzY3JvbGxpbmcgZ3JhbnVsYXJpdHlcbiAgICBkLndoZWVsRFggPSBkLndoZWVsRFkgPSBkLndoZWVsU3RhcnRYID0gZC53aGVlbFN0YXJ0WSA9IG51bGw7XG5cbiAgICAvLyBUcnVlIHdoZW4gc2hpZnQgaXMgaGVsZCBkb3duLlxuICAgIGQuc2hpZnQgPSBmYWxzZTtcblxuICAgIC8vIFVzZWQgdG8gdHJhY2sgd2hldGhlciBhbnl0aGluZyBoYXBwZW5lZCBzaW5jZSB0aGUgY29udGV4dCBtZW51XG4gICAgLy8gd2FzIG9wZW5lZC5cbiAgICBkLnNlbEZvckNvbnRleHRNZW51ID0gbnVsbDtcblxuICAgIGQuYWN0aXZlVG91Y2ggPSBudWxsO1xuXG4gICAgaW5wdXQuaW5pdChkKTtcbiAgfVxuXG4gIC8vIFNUQVRFIFVQREFURVNcblxuICAvLyBVc2VkIHRvIGdldCB0aGUgZWRpdG9yIGludG8gYSBjb25zaXN0ZW50IHN0YXRlIGFnYWluIHdoZW4gb3B0aW9ucyBjaGFuZ2UuXG5cbiAgZnVuY3Rpb24gbG9hZE1vZGUoY20pIHtcbiAgICBjbS5kb2MubW9kZSA9IENvZGVNaXJyb3IuZ2V0TW9kZShjbS5vcHRpb25zLCBjbS5kb2MubW9kZU9wdGlvbik7XG4gICAgcmVzZXRNb2RlU3RhdGUoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRNb2RlU3RhdGUoY20pIHtcbiAgICBjbS5kb2MuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgICAgaWYgKGxpbmUuc3R5bGVzKSBsaW5lLnN0eWxlcyA9IG51bGw7XG4gICAgfSk7XG4gICAgY20uZG9jLmZyb250aWVyID0gY20uZG9jLmZpcnN0O1xuICAgIHN0YXJ0V29ya2VyKGNtLCAxMDApO1xuICAgIGNtLnN0YXRlLm1vZGVHZW4rKztcbiAgICBpZiAoY20uY3VyT3ApIHJlZ0NoYW5nZShjbSk7XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwcGluZ0NoYW5nZWQoY20pIHtcbiAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbldpZHRoID0gXCJcIjtcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXJXaWR0aCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBcIkNvZGVNaXJyb3Itd3JhcFwiKTtcbiAgICAgIGZpbmRNYXhMaW5lKGNtKTtcbiAgICB9XG4gICAgZXN0aW1hdGVMaW5lSGVpZ2h0cyhjbSk7XG4gICAgcmVnQ2hhbmdlKGNtKTtcbiAgICBjbGVhckNhY2hlcyhjbSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe3VwZGF0ZVNjcm9sbGJhcnMoY20pO30sIDEwMCk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBlc3RpbWF0ZXMgdGhlIGhlaWdodCBvZiBhIGxpbmUsIHRvIHVzZSBhc1xuICAvLyBmaXJzdCBhcHByb3hpbWF0aW9uIHVudGlsIHRoZSBsaW5lIGJlY29tZXMgdmlzaWJsZSAoYW5kIGlzIHRodXNcbiAgLy8gcHJvcGVybHkgbWVhc3VyYWJsZSkuXG4gIGZ1bmN0aW9uIGVzdGltYXRlSGVpZ2h0KGNtKSB7XG4gICAgdmFyIHRoID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KSwgd3JhcHBpbmcgPSBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICB2YXIgcGVyTGluZSA9IHdyYXBwaW5nICYmIE1hdGgubWF4KDUsIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGggLyBjaGFyV2lkdGgoY20uZGlzcGxheSkgLSAzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmVJc0hpZGRlbihjbS5kb2MsIGxpbmUpKSByZXR1cm4gMDtcblxuICAgICAgdmFyIHdpZGdldHNIZWlnaHQgPSAwO1xuICAgICAgaWYgKGxpbmUud2lkZ2V0cykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLndpZGdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQpIHdpZGdldHNIZWlnaHQgKz0gbGluZS53aWRnZXRzW2ldLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKHdyYXBwaW5nKVxuICAgICAgICByZXR1cm4gd2lkZ2V0c0hlaWdodCArIChNYXRoLmNlaWwobGluZS50ZXh0Lmxlbmd0aCAvIHBlckxpbmUpIHx8IDEpICogdGg7XG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3aWRnZXRzSGVpZ2h0ICsgdGg7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVzdGltYXRlTGluZUhlaWdodHMoY20pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBlc3QgPSBlc3RpbWF0ZUhlaWdodChjbSk7XG4gICAgZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIGVzdEhlaWdodCA9IGVzdChsaW5lKTtcbiAgICAgIGlmIChlc3RIZWlnaHQgIT0gbGluZS5oZWlnaHQpIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgZXN0SGVpZ2h0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRoZW1lQ2hhbmdlZChjbSkge1xuICAgIGNtLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUgPSBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypjbS1zLVxcUysvZywgXCJcIikgK1xuICAgICAgY20ub3B0aW9ucy50aGVtZS5yZXBsYWNlKC8oXnxcXHMpXFxzKi9nLCBcIiBjbS1zLVwiKTtcbiAgICBjbGVhckNhY2hlcyhjbSk7XG4gIH1cblxuICBmdW5jdGlvbiBndXR0ZXJzQ2hhbmdlZChjbSkge1xuICAgIHVwZGF0ZUd1dHRlcnMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe2FsaWduSG9yaXpvbnRhbGx5KGNtKTt9LCAyMCk7XG4gIH1cblxuICAvLyBSZWJ1aWxkIHRoZSBndXR0ZXIgZWxlbWVudHMsIGVuc3VyZSB0aGUgbWFyZ2luIHRvIHRoZSBsZWZ0IG9mIHRoZVxuICAvLyBjb2RlIG1hdGNoZXMgdGhlaXIgd2lkdGguXG4gIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlcnMoY20pIHtcbiAgICB2YXIgZ3V0dGVycyA9IGNtLmRpc3BsYXkuZ3V0dGVycywgc3BlY3MgPSBjbS5vcHRpb25zLmd1dHRlcnM7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oZ3V0dGVycyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGVjcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGd1dHRlckNsYXNzID0gc3BlY3NbaV07XG4gICAgICB2YXIgZ0VsdCA9IGd1dHRlcnMuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXIgXCIgKyBndXR0ZXJDbGFzcykpO1xuICAgICAgaWYgKGd1dHRlckNsYXNzID09IFwiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiKSB7XG4gICAgICAgIGNtLmRpc3BsYXkubGluZUd1dHRlciA9IGdFbHQ7XG4gICAgICAgIGdFbHQuc3R5bGUud2lkdGggPSAoY20uZGlzcGxheS5saW5lTnVtV2lkdGggfHwgMSkgKyBcInB4XCI7XG4gICAgICB9XG4gICAgfVxuICAgIGd1dHRlcnMuc3R5bGUuZGlzcGxheSA9IGkgPyBcIlwiIDogXCJub25lXCI7XG4gICAgdXBkYXRlR3V0dGVyU3BhY2UoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlR3V0dGVyU3BhY2UoY20pIHtcbiAgICB2YXIgd2lkdGggPSBjbS5kaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGg7XG4gICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5tYXJnaW5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBjaGFyYWN0ZXIgbGVuZ3RoIG9mIGEgbGluZSwgdGFraW5nIGludG8gYWNjb3VudFxuICAvLyBjb2xsYXBzZWQgcmFuZ2VzIChzZWUgbWFya1RleHQpIHRoYXQgbWlnaHQgaGlkZSBwYXJ0cywgYW5kIGpvaW5cbiAgLy8gb3RoZXIgbGluZXMgb250byBpdC5cbiAgZnVuY3Rpb24gbGluZUxlbmd0aChsaW5lKSB7XG4gICAgaWYgKGxpbmUuaGVpZ2h0ID09IDApIHJldHVybiAwO1xuICAgIHZhciBsZW4gPSBsaW5lLnRleHQubGVuZ3RoLCBtZXJnZWQsIGN1ciA9IGxpbmU7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdFN0YXJ0KGN1cikpIHtcbiAgICAgIHZhciBmb3VuZCA9IG1lcmdlZC5maW5kKDAsIHRydWUpO1xuICAgICAgY3VyID0gZm91bmQuZnJvbS5saW5lO1xuICAgICAgbGVuICs9IGZvdW5kLmZyb20uY2ggLSBmb3VuZC50by5jaDtcbiAgICB9XG4gICAgY3VyID0gbGluZTtcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGN1cikpIHtcbiAgICAgIHZhciBmb3VuZCA9IG1lcmdlZC5maW5kKDAsIHRydWUpO1xuICAgICAgbGVuIC09IGN1ci50ZXh0Lmxlbmd0aCAtIGZvdW5kLmZyb20uY2g7XG4gICAgICBjdXIgPSBmb3VuZC50by5saW5lO1xuICAgICAgbGVuICs9IGN1ci50ZXh0Lmxlbmd0aCAtIGZvdW5kLnRvLmNoO1xuICAgIH1cbiAgICByZXR1cm4gbGVuO1xuICB9XG5cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBsaW5lIGluIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZE1heExpbmUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICBkLm1heExpbmUgPSBnZXRMaW5lKGRvYywgZG9jLmZpcnN0KTtcbiAgICBkLm1heExpbmVMZW5ndGggPSBsaW5lTGVuZ3RoKGQubWF4TGluZSk7XG4gICAgZC5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIGxlbiA9IGxpbmVMZW5ndGgobGluZSk7XG4gICAgICBpZiAobGVuID4gZC5tYXhMaW5lTGVuZ3RoKSB7XG4gICAgICAgIGQubWF4TGluZUxlbmd0aCA9IGxlbjtcbiAgICAgICAgZC5tYXhMaW5lID0gbGluZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1ha2Ugc3VyZSB0aGUgZ3V0dGVycyBvcHRpb25zIGNvbnRhaW5zIHRoZSBlbGVtZW50XG4gIC8vIFwiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiIHdoZW4gdGhlIGxpbmVOdW1iZXJzIG9wdGlvbiBpcyB0cnVlLlxuICBmdW5jdGlvbiBzZXRHdXR0ZXJzRm9yTGluZU51bWJlcnMob3B0aW9ucykge1xuICAgIHZhciBmb3VuZCA9IGluZGV4T2Yob3B0aW9ucy5ndXR0ZXJzLCBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIik7XG4gICAgaWYgKGZvdW5kID09IC0xICYmIG9wdGlvbnMubGluZU51bWJlcnMpIHtcbiAgICAgIG9wdGlvbnMuZ3V0dGVycyA9IG9wdGlvbnMuZ3V0dGVycy5jb25jYXQoW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSk7XG4gICAgfSBlbHNlIGlmIChmb3VuZCA+IC0xICYmICFvcHRpb25zLmxpbmVOdW1iZXJzKSB7XG4gICAgICBvcHRpb25zLmd1dHRlcnMgPSBvcHRpb25zLmd1dHRlcnMuc2xpY2UoMCk7XG4gICAgICBvcHRpb25zLmd1dHRlcnMuc3BsaWNlKGZvdW5kLCAxKTtcbiAgICB9XG4gIH1cblxuICAvLyBTQ1JPTExCQVJTXG5cbiAgLy8gUHJlcGFyZSBET00gcmVhZHMgbmVlZGVkIHRvIHVwZGF0ZSB0aGUgc2Nyb2xsYmFycy4gRG9uZSBpbiBvbmVcbiAgLy8gc2hvdCB0byBtaW5pbWl6ZSB1cGRhdGUvbWVhc3VyZSByb3VuZHRyaXBzLlxuICBmdW5jdGlvbiBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheSwgZ3V0dGVyVyA9IGQuZ3V0dGVycy5vZmZzZXRXaWR0aDtcbiAgICB2YXIgZG9jSCA9IE1hdGgucm91bmQoY20uZG9jLmhlaWdodCArIHBhZGRpbmdWZXJ0KGNtLmRpc3BsYXkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgY2xpZW50SGVpZ2h0OiBkLnNjcm9sbGVyLmNsaWVudEhlaWdodCxcbiAgICAgIHZpZXdIZWlnaHQ6IGQud3JhcHBlci5jbGllbnRIZWlnaHQsXG4gICAgICBzY3JvbGxXaWR0aDogZC5zY3JvbGxlci5zY3JvbGxXaWR0aCwgY2xpZW50V2lkdGg6IGQuc2Nyb2xsZXIuY2xpZW50V2lkdGgsXG4gICAgICB2aWV3V2lkdGg6IGQud3JhcHBlci5jbGllbnRXaWR0aCxcbiAgICAgIGJhckxlZnQ6IGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBndXR0ZXJXIDogMCxcbiAgICAgIGRvY0hlaWdodDogZG9jSCxcbiAgICAgIHNjcm9sbEhlaWdodDogZG9jSCArIHNjcm9sbEdhcChjbSkgKyBkLmJhckhlaWdodCxcbiAgICAgIG5hdGl2ZUJhcldpZHRoOiBkLm5hdGl2ZUJhcldpZHRoLFxuICAgICAgZ3V0dGVyV2lkdGg6IGd1dHRlcldcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gTmF0aXZlU2Nyb2xsYmFycyhwbGFjZSwgc2Nyb2xsLCBjbSkge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB2YXIgdmVydCA9IHRoaXMudmVydCA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwibWluLXdpZHRoOiAxcHhcIildLCBcIkNvZGVNaXJyb3ItdnNjcm9sbGJhclwiKTtcbiAgICB2YXIgaG9yaXogPSB0aGlzLmhvcml6ID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJoZWlnaHQ6IDEwMCU7IG1pbi1oZWlnaHQ6IDFweFwiKV0sIFwiQ29kZU1pcnJvci1oc2Nyb2xsYmFyXCIpO1xuICAgIHBsYWNlKHZlcnQpOyBwbGFjZShob3Jpeik7XG5cbiAgICBvbih2ZXJ0LCBcInNjcm9sbFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh2ZXJ0LmNsaWVudEhlaWdodCkgc2Nyb2xsKHZlcnQuc2Nyb2xsVG9wLCBcInZlcnRpY2FsXCIpO1xuICAgIH0pO1xuICAgIG9uKGhvcml6LCBcInNjcm9sbFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChob3Jpei5jbGllbnRXaWR0aCkgc2Nyb2xsKGhvcml6LnNjcm9sbExlZnQsIFwiaG9yaXpvbnRhbFwiKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2hlY2tlZFplcm9XaWR0aCA9IGZhbHNlO1xuICAgIC8vIE5lZWQgdG8gc2V0IGEgbWluaW11bSB3aWR0aCB0byBzZWUgdGhlIHNjcm9sbGJhciBvbiBJRTcgKGJ1dCBtdXN0IG5vdCBzZXQgaXQgb24gSUU4KS5cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDgpIHRoaXMuaG9yaXouc3R5bGUubWluSGVpZ2h0ID0gdGhpcy52ZXJ0LnN0eWxlLm1pbldpZHRoID0gXCIxOHB4XCI7XG4gIH1cblxuICBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZSA9IGNvcHlPYmooe1xuICAgIHVwZGF0ZTogZnVuY3Rpb24obWVhc3VyZSkge1xuICAgICAgdmFyIG5lZWRzSCA9IG1lYXN1cmUuc2Nyb2xsV2lkdGggPiBtZWFzdXJlLmNsaWVudFdpZHRoICsgMTtcbiAgICAgIHZhciBuZWVkc1YgPSBtZWFzdXJlLnNjcm9sbEhlaWdodCA+IG1lYXN1cmUuY2xpZW50SGVpZ2h0ICsgMTtcbiAgICAgIHZhciBzV2lkdGggPSBtZWFzdXJlLm5hdGl2ZUJhcldpZHRoO1xuXG4gICAgICBpZiAobmVlZHNWKSB7XG4gICAgICAgIHRoaXMudmVydC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0aGlzLnZlcnQuc3R5bGUuYm90dG9tID0gbmVlZHNIID8gc1dpZHRoICsgXCJweFwiIDogXCIwXCI7XG4gICAgICAgIHZhciB0b3RhbEhlaWdodCA9IG1lYXN1cmUudmlld0hlaWdodCAtIChuZWVkc0ggPyBzV2lkdGggOiAwKTtcbiAgICAgICAgLy8gQSBidWcgaW4gSUU4IGNhbiBjYXVzZSB0aGlzIHZhbHVlIHRvIGJlIG5lZ2F0aXZlLCBzbyBndWFyZCBpdC5cbiAgICAgICAgdGhpcy52ZXJ0LmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID1cbiAgICAgICAgICBNYXRoLm1heCgwLCBtZWFzdXJlLnNjcm9sbEhlaWdodCAtIG1lYXN1cmUuY2xpZW50SGVpZ2h0ICsgdG90YWxIZWlnaHQpICsgXCJweFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52ZXJ0LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICB0aGlzLnZlcnQuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKG5lZWRzSCkge1xuICAgICAgICB0aGlzLmhvcml6LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHRoaXMuaG9yaXouc3R5bGUucmlnaHQgPSBuZWVkc1YgPyBzV2lkdGggKyBcInB4XCIgOiBcIjBcIjtcbiAgICAgICAgdGhpcy5ob3Jpei5zdHlsZS5sZWZ0ID0gbWVhc3VyZS5iYXJMZWZ0ICsgXCJweFwiO1xuICAgICAgICB2YXIgdG90YWxXaWR0aCA9IG1lYXN1cmUudmlld1dpZHRoIC0gbWVhc3VyZS5iYXJMZWZ0IC0gKG5lZWRzViA/IHNXaWR0aCA6IDApO1xuICAgICAgICB0aGlzLmhvcml6LmZpcnN0Q2hpbGQuc3R5bGUud2lkdGggPVxuICAgICAgICAgIChtZWFzdXJlLnNjcm9sbFdpZHRoIC0gbWVhc3VyZS5jbGllbnRXaWR0aCArIHRvdGFsV2lkdGgpICsgXCJweFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0eWxlLndpZHRoID0gXCIwXCI7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5jaGVja2VkWmVyb1dpZHRoICYmIG1lYXN1cmUuY2xpZW50SGVpZ2h0ID4gMCkge1xuICAgICAgICBpZiAoc1dpZHRoID09IDApIHRoaXMuemVyb1dpZHRoSGFjaygpO1xuICAgICAgICB0aGlzLmNoZWNrZWRaZXJvV2lkdGggPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge3JpZ2h0OiBuZWVkc1YgPyBzV2lkdGggOiAwLCBib3R0b206IG5lZWRzSCA/IHNXaWR0aCA6IDB9O1xuICAgIH0sXG4gICAgc2V0U2Nyb2xsTGVmdDogZnVuY3Rpb24ocG9zKSB7XG4gICAgICBpZiAodGhpcy5ob3Jpei5zY3JvbGxMZWZ0ICE9IHBvcykgdGhpcy5ob3Jpei5zY3JvbGxMZWZ0ID0gcG9zO1xuICAgICAgaWYgKHRoaXMuZGlzYWJsZUhvcml6KSB0aGlzLmVuYWJsZVplcm9XaWR0aEJhcih0aGlzLmhvcml6LCB0aGlzLmRpc2FibGVIb3Jpeik7XG4gICAgfSxcbiAgICBzZXRTY3JvbGxUb3A6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgaWYgKHRoaXMudmVydC5zY3JvbGxUb3AgIT0gcG9zKSB0aGlzLnZlcnQuc2Nyb2xsVG9wID0gcG9zO1xuICAgICAgaWYgKHRoaXMuZGlzYWJsZVZlcnQpIHRoaXMuZW5hYmxlWmVyb1dpZHRoQmFyKHRoaXMudmVydCwgdGhpcy5kaXNhYmxlVmVydCk7XG4gICAgfSxcbiAgICB6ZXJvV2lkdGhIYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB3ID0gbWFjICYmICFtYWNfZ2VNb3VudGFpbkxpb24gPyBcIjEycHhcIiA6IFwiMThweFwiO1xuICAgICAgdGhpcy5ob3Jpei5zdHlsZS5oZWlnaHQgPSB0aGlzLnZlcnQuc3R5bGUud2lkdGggPSB3O1xuICAgICAgdGhpcy5ob3Jpei5zdHlsZS5wb2ludGVyRXZlbnRzID0gdGhpcy52ZXJ0LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgIHRoaXMuZGlzYWJsZUhvcml6ID0gbmV3IERlbGF5ZWQ7XG4gICAgICB0aGlzLmRpc2FibGVWZXJ0ID0gbmV3IERlbGF5ZWQ7XG4gICAgfSxcbiAgICBlbmFibGVaZXJvV2lkdGhCYXI6IGZ1bmN0aW9uKGJhciwgZGVsYXkpIHtcbiAgICAgIGJhci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJhdXRvXCI7XG4gICAgICBmdW5jdGlvbiBtYXliZURpc2FibGUoKSB7XG4gICAgICAgIC8vIFRvIGZpbmQgb3V0IHdoZXRoZXIgdGhlIHNjcm9sbGJhciBpcyBzdGlsbCB2aXNpYmxlLCB3ZVxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBlbGVtZW50IHVuZGVyIHRoZSBwaXhlbCBpbiB0aGUgYm90dG9tXG4gICAgICAgIC8vIGxlZnQgY29ybmVyIG9mIHRoZSBzY3JvbGxiYXIgYm94IGlzIHRoZSBzY3JvbGxiYXIgYm94XG4gICAgICAgIC8vIGl0c2VsZiAod2hlbiB0aGUgYmFyIGlzIHN0aWxsIHZpc2libGUpIG9yIGl0cyBmaWxsZXIgY2hpbGRcbiAgICAgICAgLy8gKHdoZW4gdGhlIGJhciBpcyBoaWRkZW4pLiBJZiBpdCBpcyBzdGlsbCB2aXNpYmxlLCB3ZSBrZWVwXG4gICAgICAgIC8vIGl0IGVuYWJsZWQsIGlmIGl0J3MgaGlkZGVuLCB3ZSBkaXNhYmxlIHBvaW50ZXIgZXZlbnRzLlxuICAgICAgICB2YXIgYm94ID0gYmFyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgZWx0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChib3gubGVmdCArIDEsIGJveC5ib3R0b20gLSAxKTtcbiAgICAgICAgaWYgKGVsdCAhPSBiYXIpIGJhci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICAgIGVsc2UgZGVsYXkuc2V0KDEwMDAsIG1heWJlRGlzYWJsZSk7XG4gICAgICB9XG4gICAgICBkZWxheS5zZXQoMTAwMCwgbWF5YmVEaXNhYmxlKTtcbiAgICB9LFxuICAgIGNsZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmhvcml6LnBhcmVudE5vZGU7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ob3Jpeik7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy52ZXJ0KTtcbiAgICB9XG4gIH0sIE5hdGl2ZVNjcm9sbGJhcnMucHJvdG90eXBlKTtcblxuICBmdW5jdGlvbiBOdWxsU2Nyb2xsYmFycygpIHt9XG5cbiAgTnVsbFNjcm9sbGJhcnMucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHtib3R0b206IDAsIHJpZ2h0OiAwfTsgfSxcbiAgICBzZXRTY3JvbGxMZWZ0OiBmdW5jdGlvbigpIHt9LFxuICAgIHNldFNjcm9sbFRvcDogZnVuY3Rpb24oKSB7fSxcbiAgICBjbGVhcjogZnVuY3Rpb24oKSB7fVxuICB9LCBOdWxsU2Nyb2xsYmFycy5wcm90b3R5cGUpO1xuXG4gIENvZGVNaXJyb3Iuc2Nyb2xsYmFyTW9kZWwgPSB7XCJuYXRpdmVcIjogTmF0aXZlU2Nyb2xsYmFycywgXCJudWxsXCI6IE51bGxTY3JvbGxiYXJzfTtcblxuICBmdW5jdGlvbiBpbml0U2Nyb2xsYmFycyhjbSkge1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMpIHtcbiAgICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5jbGVhcigpO1xuICAgICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcylcbiAgICAgICAgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcyk7XG4gICAgfVxuXG4gICAgY20uZGlzcGxheS5zY3JvbGxiYXJzID0gbmV3IENvZGVNaXJyb3Iuc2Nyb2xsYmFyTW9kZWxbY20ub3B0aW9ucy5zY3JvbGxiYXJTdHlsZV0oZnVuY3Rpb24obm9kZSkge1xuICAgICAgY20uZGlzcGxheS53cmFwcGVyLmluc2VydEJlZm9yZShub2RlLCBjbS5kaXNwbGF5LnNjcm9sbGJhckZpbGxlcik7XG4gICAgICAvLyBQcmV2ZW50IGNsaWNrcyBpbiB0aGUgc2Nyb2xsYmFycyBmcm9tIGtpbGxpbmcgZm9jdXNcbiAgICAgIG9uKG5vZGUsIFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAwKTtcbiAgICAgIH0pO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLCBcInRydWVcIik7XG4gICAgfSwgZnVuY3Rpb24ocG9zLCBheGlzKSB7XG4gICAgICBpZiAoYXhpcyA9PSBcImhvcml6b250YWxcIikgc2V0U2Nyb2xsTGVmdChjbSwgcG9zKTtcbiAgICAgIGVsc2Ugc2V0U2Nyb2xsVG9wKGNtLCBwb3MpO1xuICAgIH0sIGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKVxuICAgICAgYWRkQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2Nyb2xsYmFycyhjbSwgbWVhc3VyZSkge1xuICAgIGlmICghbWVhc3VyZSkgbWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcbiAgICB2YXIgc3RhcnRXaWR0aCA9IGNtLmRpc3BsYXkuYmFyV2lkdGgsIHN0YXJ0SGVpZ2h0ID0gY20uZGlzcGxheS5iYXJIZWlnaHQ7XG4gICAgdXBkYXRlU2Nyb2xsYmFyc0lubmVyKGNtLCBtZWFzdXJlKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQgJiYgc3RhcnRXaWR0aCAhPSBjbS5kaXNwbGF5LmJhcldpZHRoIHx8IHN0YXJ0SGVpZ2h0ICE9IGNtLmRpc3BsYXkuYmFySGVpZ2h0OyBpKyspIHtcbiAgICAgIGlmIChzdGFydFdpZHRoICE9IGNtLmRpc3BsYXkuYmFyV2lkdGggJiYgY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpXG4gICAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pKTtcbiAgICAgIHN0YXJ0V2lkdGggPSBjbS5kaXNwbGF5LmJhcldpZHRoOyBzdGFydEhlaWdodCA9IGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlLXN5bmNocm9uaXplIHRoZSBmYWtlIHNjcm9sbGJhcnMgd2l0aCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlXG4gIC8vIGNvbnRlbnQuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheTtcbiAgICB2YXIgc2l6ZXMgPSBkLnNjcm9sbGJhcnMudXBkYXRlKG1lYXN1cmUpO1xuXG4gICAgZC5zaXplci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAoZC5iYXJXaWR0aCA9IHNpemVzLnJpZ2h0KSArIFwicHhcIjtcbiAgICBkLnNpemVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPSAoZC5iYXJIZWlnaHQgPSBzaXplcy5ib3R0b20pICsgXCJweFwiO1xuICAgIGQuaGVpZ2h0Rm9yY2VyLnN0eWxlLmJvcmRlckJvdHRvbSA9IHNpemVzLmJvdHRvbSArIFwicHggc29saWQgdHJhbnNwYXJlbnRcIlxuXG4gICAgaWYgKHNpemVzLnJpZ2h0ICYmIHNpemVzLmJvdHRvbSkge1xuICAgICAgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNpemVzLmJvdHRvbSArIFwicHhcIjtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLndpZHRoID0gc2l6ZXMucmlnaHQgKyBcInB4XCI7XG4gICAgfSBlbHNlIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgIGlmIChzaXplcy5ib3R0b20gJiYgY20ub3B0aW9ucy5jb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciAmJiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyKSB7XG4gICAgICBkLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuaGVpZ2h0ID0gc2l6ZXMuYm90dG9tICsgXCJweFwiO1xuICAgICAgZC5ndXR0ZXJGaWxsZXIuc3R5bGUud2lkdGggPSBtZWFzdXJlLmd1dHRlcldpZHRoICsgXCJweFwiO1xuICAgIH0gZWxzZSBkLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGxpbmVzIHRoYXQgYXJlIHZpc2libGUgaW4gYSBnaXZlbiB2aWV3cG9ydCAoZGVmYXVsdHNcbiAgLy8gdGhlIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbikuIHZpZXdwb3J0IG1heSBjb250YWluIHRvcCxcbiAgLy8gaGVpZ2h0LCBhbmQgZW5zdXJlIChzZWUgb3Auc2Nyb2xsVG9Qb3MpIHByb3BlcnRpZXMuXG4gIGZ1bmN0aW9uIHZpc2libGVMaW5lcyhkaXNwbGF5LCBkb2MsIHZpZXdwb3J0KSB7XG4gICAgdmFyIHRvcCA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LnRvcCAhPSBudWxsID8gTWF0aC5tYXgoMCwgdmlld3BvcnQudG9wKSA6IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgIHRvcCA9IE1hdGguZmxvb3IodG9wIC0gcGFkZGluZ1RvcChkaXNwbGF5KSk7XG4gICAgdmFyIGJvdHRvbSA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LmJvdHRvbSAhPSBudWxsID8gdmlld3BvcnQuYm90dG9tIDogdG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcblxuICAgIHZhciBmcm9tID0gbGluZUF0SGVpZ2h0KGRvYywgdG9wKSwgdG8gPSBsaW5lQXRIZWlnaHQoZG9jLCBib3R0b20pO1xuICAgIC8vIEVuc3VyZSBpcyBhIHtmcm9tOiB7bGluZSwgY2h9LCB0bzoge2xpbmUsIGNofX0gb2JqZWN0LCBhbmRcbiAgICAvLyBmb3JjZXMgdGhvc2UgbGluZXMgaW50byB0aGUgdmlld3BvcnQgKGlmIHBvc3NpYmxlKS5cbiAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuZW5zdXJlKSB7XG4gICAgICB2YXIgZW5zdXJlRnJvbSA9IHZpZXdwb3J0LmVuc3VyZS5mcm9tLmxpbmUsIGVuc3VyZVRvID0gdmlld3BvcnQuZW5zdXJlLnRvLmxpbmU7XG4gICAgICBpZiAoZW5zdXJlRnJvbSA8IGZyb20pIHtcbiAgICAgICAgZnJvbSA9IGVuc3VyZUZyb207XG4gICAgICAgIHRvID0gbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVGcm9tKSkgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0KTtcbiAgICAgIH0gZWxzZSBpZiAoTWF0aC5taW4oZW5zdXJlVG8sIGRvYy5sYXN0TGluZSgpKSA+PSB0bykge1xuICAgICAgICBmcm9tID0gbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVUbykpIC0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCk7XG4gICAgICAgIHRvID0gZW5zdXJlVG87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7ZnJvbTogZnJvbSwgdG86IE1hdGgubWF4KHRvLCBmcm9tICsgMSl9O1xuICB9XG5cbiAgLy8gTElORSBOVU1CRVJTXG5cbiAgLy8gUmUtYWxpZ24gbGluZSBudW1iZXJzIGFuZCBndXR0ZXIgbWFya3MgdG8gY29tcGVuc2F0ZSBmb3JcbiAgLy8gaG9yaXpvbnRhbCBzY3JvbGxpbmcuXG4gIGZ1bmN0aW9uIGFsaWduSG9yaXpvbnRhbGx5KGNtKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB2aWV3ID0gZGlzcGxheS52aWV3O1xuICAgIGlmICghZGlzcGxheS5hbGlnbldpZGdldHMgJiYgKCFkaXNwbGF5Lmd1dHRlcnMuZmlyc3RDaGlsZCB8fCAhY20ub3B0aW9ucy5maXhlZEd1dHRlcikpIHJldHVybjtcbiAgICB2YXIgY29tcCA9IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGRpc3BsYXkpIC0gZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICsgY20uZG9jLnNjcm9sbExlZnQ7XG4gICAgdmFyIGd1dHRlclcgPSBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsIGxlZnQgPSBjb21wICsgXCJweFwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykgaWYgKCF2aWV3W2ldLmhpZGRlbikge1xuICAgICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgJiYgdmlld1tpXS5ndXR0ZXIpXG4gICAgICAgIHZpZXdbaV0uZ3V0dGVyLnN0eWxlLmxlZnQgPSBsZWZ0O1xuICAgICAgdmFyIGFsaWduID0gdmlld1tpXS5hbGlnbmFibGU7XG4gICAgICBpZiAoYWxpZ24pIGZvciAodmFyIGogPSAwOyBqIDwgYWxpZ24ubGVuZ3RoOyBqKyspXG4gICAgICAgIGFsaWduW2pdLnN0eWxlLmxlZnQgPSBsZWZ0O1xuICAgIH1cbiAgICBpZiAoY20ub3B0aW9ucy5maXhlZEd1dHRlcilcbiAgICAgIGRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0ID0gKGNvbXAgKyBndXR0ZXJXKSArIFwicHhcIjtcbiAgfVxuXG4gIC8vIFVzZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGxpbmUgbnVtYmVyIGd1dHRlciBpcyBzdGlsbCB0aGUgcmlnaHRcbiAgLy8gc2l6ZSBmb3IgdGhlIGN1cnJlbnQgZG9jdW1lbnQgc2l6ZS4gUmV0dXJucyB0cnVlIHdoZW4gYW4gdXBkYXRlXG4gIC8vIGlzIG5lZWRlZC5cbiAgZnVuY3Rpb24gbWF5YmVVcGRhdGVMaW5lTnVtYmVyV2lkdGgoY20pIHtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZU51bWJlcnMpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBsYXN0ID0gbGluZU51bWJlckZvcihjbS5vcHRpb25zLCBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAobGFzdC5sZW5ndGggIT0gZGlzcGxheS5saW5lTnVtQ2hhcnMpIHtcbiAgICAgIHZhciB0ZXN0ID0gZGlzcGxheS5tZWFzdXJlLmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIGxhc3QpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvZGVNaXJyb3ItbGluZW51bWJlciBDb2RlTWlycm9yLWd1dHRlci1lbHRcIikpO1xuICAgICAgdmFyIGlubmVyVyA9IHRlc3QuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aCwgcGFkZGluZyA9IHRlc3Qub2Zmc2V0V2lkdGggLSBpbm5lclc7XG4gICAgICBkaXNwbGF5LmxpbmVHdXR0ZXIuc3R5bGUud2lkdGggPSBcIlwiO1xuICAgICAgZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCA9IE1hdGgubWF4KGlubmVyVywgZGlzcGxheS5saW5lR3V0dGVyLm9mZnNldFdpZHRoIC0gcGFkZGluZykgKyAxO1xuICAgICAgZGlzcGxheS5saW5lTnVtV2lkdGggPSBkaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoICsgcGFkZGluZztcbiAgICAgIGRpc3BsYXkubGluZU51bUNoYXJzID0gZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCA/IGxhc3QubGVuZ3RoIDogLTE7XG4gICAgICBkaXNwbGF5LmxpbmVHdXR0ZXIuc3R5bGUud2lkdGggPSBkaXNwbGF5LmxpbmVOdW1XaWR0aCArIFwicHhcIjtcbiAgICAgIHVwZGF0ZUd1dHRlclNwYWNlKGNtKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBsaW5lTnVtYmVyRm9yKG9wdGlvbnMsIGkpIHtcbiAgICByZXR1cm4gU3RyaW5nKG9wdGlvbnMubGluZU51bWJlckZvcm1hdHRlcihpICsgb3B0aW9ucy5maXJzdExpbmVOdW1iZXIpKTtcbiAgfVxuXG4gIC8vIENvbXB1dGVzIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCArIGRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCxcbiAgLy8gYnV0IHVzaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCB0byBnZXQgYSBzdWItcGl4ZWwtYWNjdXJhdGVcbiAgLy8gcmVzdWx0LlxuICBmdW5jdGlvbiBjb21wZW5zYXRlRm9ySFNjcm9sbChkaXNwbGF5KSB7XG4gICAgcmV0dXJuIGRpc3BsYXkuc2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgfVxuXG4gIC8vIERJU1BMQVkgRFJBV0lOR1xuXG4gIGZ1bmN0aW9uIERpc3BsYXlVcGRhdGUoY20sIHZpZXdwb3J0LCBmb3JjZSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcblxuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAvLyBTdG9yZSBzb21lIHZhbHVlcyB0aGF0IHdlJ2xsIG5lZWQgbGF0ZXIgKGJ1dCBkb24ndCB3YW50IHRvIGZvcmNlIGEgcmVsYXlvdXQgZm9yKVxuICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGVMaW5lcyhkaXNwbGF5LCBjbS5kb2MsIHZpZXdwb3J0KTtcbiAgICB0aGlzLmVkaXRvcklzSGlkZGVuID0gIWRpc3BsYXkud3JhcHBlci5vZmZzZXRXaWR0aDtcbiAgICB0aGlzLndyYXBwZXJIZWlnaHQgPSBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0O1xuICAgIHRoaXMud3JhcHBlcldpZHRoID0gZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgIHRoaXMub2xkRGlzcGxheVdpZHRoID0gZGlzcGxheVdpZHRoKGNtKTtcbiAgICB0aGlzLmZvcmNlID0gZm9yY2U7XG4gICAgdGhpcy5kaW1zID0gZ2V0RGltZW5zaW9ucyhjbSk7XG4gICAgdGhpcy5ldmVudHMgPSBbXTtcbiAgfVxuXG4gIERpc3BsYXlVcGRhdGUucHJvdG90eXBlLnNpZ25hbCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgICBpZiAoaGFzSGFuZGxlcihlbWl0dGVyLCB0eXBlKSlcbiAgICAgIHRoaXMuZXZlbnRzLnB1c2goYXJndW1lbnRzKTtcbiAgfTtcbiAgRGlzcGxheVVwZGF0ZS5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmV2ZW50cy5sZW5ndGg7IGkrKylcbiAgICAgIHNpZ25hbC5hcHBseShudWxsLCB0aGlzLmV2ZW50c1tpXSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVDbGlwU2Nyb2xsYmFycyhjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWRpc3BsYXkuc2Nyb2xsYmFyc0NsaXBwZWQgJiYgZGlzcGxheS5zY3JvbGxlci5vZmZzZXRXaWR0aCkge1xuICAgICAgZGlzcGxheS5uYXRpdmVCYXJXaWR0aCA9IGRpc3BsYXkuc2Nyb2xsZXIub2Zmc2V0V2lkdGggLSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoO1xuICAgICAgZGlzcGxheS5oZWlnaHRGb3JjZXIuc3R5bGUuaGVpZ2h0ID0gc2Nyb2xsR2FwKGNtKSArIFwicHhcIjtcbiAgICAgIGRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luQm90dG9tID0gLWRpc3BsYXkubmF0aXZlQmFyV2lkdGggKyBcInB4XCI7XG4gICAgICBkaXNwbGF5LnNpemVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBzY3JvbGxHYXAoY20pICsgXCJweFwiO1xuICAgICAgZGlzcGxheS5zY3JvbGxiYXJzQ2xpcHBlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8gRG9lcyB0aGUgYWN0dWFsIHVwZGF0aW5nIG9mIHRoZSBsaW5lIGRpc3BsYXkuIEJhaWxzIG91dFxuICAvLyAocmV0dXJuaW5nIGZhbHNlKSB3aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gYmUgZG9uZSBhbmQgZm9yY2VkIGlzXG4gIC8vIGZhbHNlLlxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuXG4gICAgaWYgKHVwZGF0ZS5lZGl0b3JJc0hpZGRlbikge1xuICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBCYWlsIG91dCBpZiB0aGUgdmlzaWJsZSBhcmVhIGlzIGFscmVhZHkgcmVuZGVyZWQgYW5kIG5vdGhpbmcgY2hhbmdlZC5cbiAgICBpZiAoIXVwZGF0ZS5mb3JjZSAmJlxuICAgICAgICB1cGRhdGUudmlzaWJsZS5mcm9tID49IGRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gZGlzcGxheS52aWV3VG8gJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID49IGRpc3BsYXkudmlld1RvKSAmJlxuICAgICAgICBkaXNwbGF5LnJlbmRlcmVkVmlldyA9PSBkaXNwbGF5LnZpZXcgJiYgY291bnREaXJ0eVZpZXcoY20pID09IDApXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAobWF5YmVVcGRhdGVMaW5lTnVtYmVyV2lkdGgoY20pKSB7XG4gICAgICByZXNldFZpZXcoY20pO1xuICAgICAgdXBkYXRlLmRpbXMgPSBnZXREaW1lbnNpb25zKGNtKTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIGEgc3VpdGFibGUgbmV3IHZpZXdwb3J0IChmcm9tICYgdG8pXG4gICAgdmFyIGVuZCA9IGRvYy5maXJzdCArIGRvYy5zaXplO1xuICAgIHZhciBmcm9tID0gTWF0aC5tYXgodXBkYXRlLnZpc2libGUuZnJvbSAtIGNtLm9wdGlvbnMudmlld3BvcnRNYXJnaW4sIGRvYy5maXJzdCk7XG4gICAgdmFyIHRvID0gTWF0aC5taW4oZW5kLCB1cGRhdGUudmlzaWJsZS50byArIGNtLm9wdGlvbnMudmlld3BvcnRNYXJnaW4pO1xuICAgIGlmIChkaXNwbGF5LnZpZXdGcm9tIDwgZnJvbSAmJiBmcm9tIC0gZGlzcGxheS52aWV3RnJvbSA8IDIwKSBmcm9tID0gTWF0aC5tYXgoZG9jLmZpcnN0LCBkaXNwbGF5LnZpZXdGcm9tKTtcbiAgICBpZiAoZGlzcGxheS52aWV3VG8gPiB0byAmJiBkaXNwbGF5LnZpZXdUbyAtIHRvIDwgMjApIHRvID0gTWF0aC5taW4oZW5kLCBkaXNwbGF5LnZpZXdUbyk7XG4gICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zKSB7XG4gICAgICBmcm9tID0gdmlzdWFsTGluZU5vKGNtLmRvYywgZnJvbSk7XG4gICAgICB0byA9IHZpc3VhbExpbmVFbmRObyhjbS5kb2MsIHRvKTtcbiAgICB9XG5cbiAgICB2YXIgZGlmZmVyZW50ID0gZnJvbSAhPSBkaXNwbGF5LnZpZXdGcm9tIHx8IHRvICE9IGRpc3BsYXkudmlld1RvIHx8XG4gICAgICBkaXNwbGF5Lmxhc3RXcmFwSGVpZ2h0ICE9IHVwZGF0ZS53cmFwcGVySGVpZ2h0IHx8IGRpc3BsYXkubGFzdFdyYXBXaWR0aCAhPSB1cGRhdGUud3JhcHBlcldpZHRoO1xuICAgIGFkanVzdFZpZXcoY20sIGZyb20sIHRvKTtcblxuICAgIGRpc3BsYXkudmlld09mZnNldCA9IGhlaWdodEF0TGluZShnZXRMaW5lKGNtLmRvYywgZGlzcGxheS52aWV3RnJvbSkpO1xuICAgIC8vIFBvc2l0aW9uIHRoZSBtb3ZlciBkaXYgdG8gYWxpZ24gd2l0aCB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cbiAgICBjbS5kaXNwbGF5Lm1vdmVyLnN0eWxlLnRvcCA9IGRpc3BsYXkudmlld09mZnNldCArIFwicHhcIjtcblxuICAgIHZhciB0b1VwZGF0ZSA9IGNvdW50RGlydHlWaWV3KGNtKTtcbiAgICBpZiAoIWRpZmZlcmVudCAmJiB0b1VwZGF0ZSA9PSAwICYmICF1cGRhdGUuZm9yY2UgJiYgZGlzcGxheS5yZW5kZXJlZFZpZXcgPT0gZGlzcGxheS52aWV3ICYmXG4gICAgICAgIChkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID09IG51bGwgfHwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA+PSBkaXNwbGF5LnZpZXdUbykpXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBGb3IgYmlnIGNoYW5nZXMsIHdlIGhpZGUgdGhlIGVuY2xvc2luZyBlbGVtZW50IGR1cmluZyB0aGVcbiAgICAvLyB1cGRhdGUsIHNpbmNlIHRoYXQgc3BlZWRzIHVwIHRoZSBvcGVyYXRpb25zIG9uIG1vc3QgYnJvd3NlcnMuXG4gICAgdmFyIGZvY3VzZWQgPSBhY3RpdmVFbHQoKTtcbiAgICBpZiAodG9VcGRhdGUgPiA0KSBkaXNwbGF5LmxpbmVEaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIHBhdGNoRGlzcGxheShjbSwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycywgdXBkYXRlLmRpbXMpO1xuICAgIGlmICh0b1VwZGF0ZSA+IDQpIGRpc3BsYXkubGluZURpdi5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICBkaXNwbGF5LnJlbmRlcmVkVmlldyA9IGRpc3BsYXkudmlldztcbiAgICAvLyBUaGVyZSBtaWdodCBoYXZlIGJlZW4gYSB3aWRnZXQgd2l0aCBhIGZvY3VzZWQgZWxlbWVudCB0aGF0IGdvdFxuICAgIC8vIGhpZGRlbiBvciB1cGRhdGVkLCBpZiBzbyByZS1mb2N1cyBpdC5cbiAgICBpZiAoZm9jdXNlZCAmJiBhY3RpdmVFbHQoKSAhPSBmb2N1c2VkICYmIGZvY3VzZWQub2Zmc2V0SGVpZ2h0KSBmb2N1c2VkLmZvY3VzKCk7XG5cbiAgICAvLyBQcmV2ZW50IHNlbGVjdGlvbiBhbmQgY3Vyc29ycyBmcm9tIGludGVyZmVyaW5nIHdpdGggdGhlIHNjcm9sbFxuICAgIC8vIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgcmVtb3ZlQ2hpbGRyZW4oZGlzcGxheS5jdXJzb3JEaXYpO1xuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkuc2VsZWN0aW9uRGl2KTtcbiAgICBkaXNwbGF5Lmd1dHRlcnMuc3R5bGUuaGVpZ2h0ID0gZGlzcGxheS5zaXplci5zdHlsZS5taW5IZWlnaHQgPSAwO1xuXG4gICAgaWYgKGRpZmZlcmVudCkge1xuICAgICAgZGlzcGxheS5sYXN0V3JhcEhlaWdodCA9IHVwZGF0ZS53cmFwcGVySGVpZ2h0O1xuICAgICAgZGlzcGxheS5sYXN0V3JhcFdpZHRoID0gdXBkYXRlLndyYXBwZXJXaWR0aDtcbiAgICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApO1xuICAgIH1cblxuICAgIGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPSBudWxsO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBwb3N0VXBkYXRlRGlzcGxheShjbSwgdXBkYXRlKSB7XG4gICAgdmFyIHZpZXdwb3J0ID0gdXBkYXRlLnZpZXdwb3J0O1xuXG4gICAgZm9yICh2YXIgZmlyc3QgPSB0cnVlOzsgZmlyc3QgPSBmYWxzZSkge1xuICAgICAgaWYgKCFmaXJzdCB8fCAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgfHwgdXBkYXRlLm9sZERpc3BsYXlXaWR0aCA9PSBkaXNwbGF5V2lkdGgoY20pKSB7XG4gICAgICAgIC8vIENsaXAgZm9yY2VkIHZpZXdwb3J0IHRvIGFjdHVhbCBzY3JvbGxhYmxlIGFyZWEuXG4gICAgICAgIGlmICh2aWV3cG9ydCAmJiB2aWV3cG9ydC50b3AgIT0gbnVsbClcbiAgICAgICAgICB2aWV3cG9ydCA9IHt0b3A6IE1hdGgubWluKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSAtIGRpc3BsYXlIZWlnaHQoY20pLCB2aWV3cG9ydC50b3ApfTtcbiAgICAgICAgLy8gVXBkYXRlZCBsaW5lIGhlaWdodHMgbWlnaHQgcmVzdWx0IGluIHRoZSBkcmF3biBhcmVhIG5vdFxuICAgICAgICAvLyBhY3R1YWxseSBjb3ZlcmluZyB0aGUgdmlld3BvcnQuIEtlZXAgbG9vcGluZyB1bnRpbCBpdCBkb2VzLlxuICAgICAgICB1cGRhdGUudmlzaWJsZSA9IHZpc2libGVMaW5lcyhjbS5kaXNwbGF5LCBjbS5kb2MsIHZpZXdwb3J0KTtcbiAgICAgICAgaWYgKHVwZGF0ZS52aXNpYmxlLmZyb20gPj0gY20uZGlzcGxheS52aWV3RnJvbSAmJiB1cGRhdGUudmlzaWJsZS50byA8PSBjbS5kaXNwbGF5LnZpZXdUbylcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmICghdXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpKSBicmVhaztcbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHZhciBiYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuICAgICAgdXBkYXRlU2VsZWN0aW9uKGNtKTtcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20sIGJhck1lYXN1cmUpO1xuICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIGJhck1lYXN1cmUpO1xuICAgIH1cblxuICAgIHVwZGF0ZS5zaWduYWwoY20sIFwidXBkYXRlXCIsIGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS52aWV3RnJvbSAhPSBjbS5kaXNwbGF5LnJlcG9ydGVkVmlld0Zyb20gfHwgY20uZGlzcGxheS52aWV3VG8gIT0gY20uZGlzcGxheS5yZXBvcnRlZFZpZXdUbykge1xuICAgICAgdXBkYXRlLnNpZ25hbChjbSwgXCJ2aWV3cG9ydENoYW5nZVwiLCBjbSwgY20uZGlzcGxheS52aWV3RnJvbSwgY20uZGlzcGxheS52aWV3VG8pO1xuICAgICAgY20uZGlzcGxheS5yZXBvcnRlZFZpZXdGcm9tID0gY20uZGlzcGxheS52aWV3RnJvbTsgY20uZGlzcGxheS5yZXBvcnRlZFZpZXdUbyA9IGNtLmRpc3BsYXkudmlld1RvO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHZpZXdwb3J0KSB7XG4gICAgdmFyIHVwZGF0ZSA9IG5ldyBEaXNwbGF5VXBkYXRlKGNtLCB2aWV3cG9ydCk7XG4gICAgaWYgKHVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSkge1xuICAgICAgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pO1xuICAgICAgcG9zdFVwZGF0ZURpc3BsYXkoY20sIHVwZGF0ZSk7XG4gICAgICB2YXIgYmFyTWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbihjbSk7XG4gICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtLCBiYXJNZWFzdXJlKTtcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBiYXJNZWFzdXJlKTtcbiAgICAgIHVwZGF0ZS5maW5pc2goKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXREb2N1bWVudEhlaWdodChjbSwgbWVhc3VyZSkge1xuICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluSGVpZ2h0ID0gbWVhc3VyZS5kb2NIZWlnaHQgKyBcInB4XCI7XG4gICAgY20uZGlzcGxheS5oZWlnaHRGb3JjZXIuc3R5bGUudG9wID0gbWVhc3VyZS5kb2NIZWlnaHQgKyBcInB4XCI7XG4gICAgY20uZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmhlaWdodCA9IChtZWFzdXJlLmRvY0hlaWdodCArIGNtLmRpc3BsYXkuYmFySGVpZ2h0ICsgc2Nyb2xsR2FwKGNtKSkgKyBcInB4XCI7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBhY3R1YWwgaGVpZ2h0cyBvZiB0aGUgcmVuZGVyZWQgbGluZXMsIGFuZCB1cGRhdGUgdGhlaXJcbiAgLy8gc3RvcmVkIGhlaWdodHMgdG8gbWF0Y2guXG4gIGZ1bmN0aW9uIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBwcmV2Qm90dG9tID0gZGlzcGxheS5saW5lRGl2Lm9mZnNldFRvcDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGN1ciA9IGRpc3BsYXkudmlld1tpXSwgaGVpZ2h0O1xuICAgICAgaWYgKGN1ci5oaWRkZW4pIGNvbnRpbnVlO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7XG4gICAgICAgIHZhciBib3QgPSBjdXIubm9kZS5vZmZzZXRUb3AgKyBjdXIubm9kZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGhlaWdodCA9IGJvdCAtIHByZXZCb3R0b207XG4gICAgICAgIHByZXZCb3R0b20gPSBib3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm94ID0gY3VyLm5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGhlaWdodCA9IGJveC5ib3R0b20gLSBib3gudG9wO1xuICAgICAgfVxuICAgICAgdmFyIGRpZmYgPSBjdXIubGluZS5oZWlnaHQgLSBoZWlnaHQ7XG4gICAgICBpZiAoaGVpZ2h0IDwgMikgaGVpZ2h0ID0gdGV4dEhlaWdodChkaXNwbGF5KTtcbiAgICAgIGlmIChkaWZmID4gLjAwMSB8fCBkaWZmIDwgLS4wMDEpIHtcbiAgICAgICAgdXBkYXRlTGluZUhlaWdodChjdXIubGluZSwgaGVpZ2h0KTtcbiAgICAgICAgdXBkYXRlV2lkZ2V0SGVpZ2h0KGN1ci5saW5lKTtcbiAgICAgICAgaWYgKGN1ci5yZXN0KSBmb3IgKHZhciBqID0gMDsgaiA8IGN1ci5yZXN0Lmxlbmd0aDsgaisrKVxuICAgICAgICAgIHVwZGF0ZVdpZGdldEhlaWdodChjdXIucmVzdFtqXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVhZCBhbmQgc3RvcmUgdGhlIGhlaWdodCBvZiBsaW5lIHdpZGdldHMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAvLyBnaXZlbiBsaW5lLlxuICBmdW5jdGlvbiB1cGRhdGVXaWRnZXRIZWlnaHQobGluZSkge1xuICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgKytpKVxuICAgICAgbGluZS53aWRnZXRzW2ldLmhlaWdodCA9IGxpbmUud2lkZ2V0c1tpXS5ub2RlLnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0O1xuICB9XG5cbiAgLy8gRG8gYSBidWxrLXJlYWQgb2YgdGhlIERPTSBwb3NpdGlvbnMgYW5kIHNpemVzIG5lZWRlZCB0byBkcmF3IHRoZVxuICAvLyB2aWV3LCBzbyB0aGF0IHdlIGRvbid0IGludGVybGVhdmUgcmVhZGluZyBhbmQgd3JpdGluZyB0byB0aGUgRE9NLlxuICBmdW5jdGlvbiBnZXREaW1lbnNpb25zKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBsZWZ0ID0ge30sIHdpZHRoID0ge307XG4gICAgdmFyIGd1dHRlckxlZnQgPSBkLmd1dHRlcnMuY2xpZW50TGVmdDtcbiAgICBmb3IgKHZhciBuID0gZC5ndXR0ZXJzLmZpcnN0Q2hpbGQsIGkgPSAwOyBuOyBuID0gbi5uZXh0U2libGluZywgKytpKSB7XG4gICAgICBsZWZ0W2NtLm9wdGlvbnMuZ3V0dGVyc1tpXV0gPSBuLm9mZnNldExlZnQgKyBuLmNsaWVudExlZnQgKyBndXR0ZXJMZWZ0O1xuICAgICAgd2lkdGhbY20ub3B0aW9ucy5ndXR0ZXJzW2ldXSA9IG4uY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHJldHVybiB7Zml4ZWRQb3M6IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGQpLFxuICAgICAgICAgICAgZ3V0dGVyVG90YWxXaWR0aDogZC5ndXR0ZXJzLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgZ3V0dGVyTGVmdDogbGVmdCxcbiAgICAgICAgICAgIGd1dHRlcldpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIHdyYXBwZXJXaWR0aDogZC53cmFwcGVyLmNsaWVudFdpZHRofTtcbiAgfVxuXG4gIC8vIFN5bmMgdGhlIGFjdHVhbCBkaXNwbGF5IERPTSBzdHJ1Y3R1cmUgd2l0aCBkaXNwbGF5LnZpZXcsIHJlbW92aW5nXG4gIC8vIG5vZGVzIGZvciBsaW5lcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdmlldywgYW5kIGNyZWF0aW5nIHRoZSBvbmVzXG4gIC8vIHRoYXQgYXJlIG5vdCB0aGVyZSB5ZXQsIGFuZCB1cGRhdGluZyB0aGUgb25lcyB0aGF0IGFyZSBvdXQgb2ZcbiAgLy8gZGF0ZS5cbiAgZnVuY3Rpb24gcGF0Y2hEaXNwbGF5KGNtLCB1cGRhdGVOdW1iZXJzRnJvbSwgZGltcykge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgbGluZU51bWJlcnMgPSBjbS5vcHRpb25zLmxpbmVOdW1iZXJzO1xuICAgIHZhciBjb250YWluZXIgPSBkaXNwbGF5LmxpbmVEaXYsIGN1ciA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xuXG4gICAgZnVuY3Rpb24gcm0obm9kZSkge1xuICAgICAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgLy8gV29ya3MgYXJvdW5kIGEgdGhyb3ctc2Nyb2xsIGJ1ZyBpbiBPUyBYIFdlYmtpdFxuICAgICAgaWYgKHdlYmtpdCAmJiBtYWMgJiYgY20uZGlzcGxheS5jdXJyZW50V2hlZWxUYXJnZXQgPT0gbm9kZSlcbiAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBlbHNlXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH1cblxuICAgIHZhciB2aWV3ID0gZGlzcGxheS52aWV3LCBsaW5lTiA9IGRpc3BsYXkudmlld0Zyb207XG4gICAgLy8gTG9vcCBvdmVyIHRoZSBlbGVtZW50cyBpbiB0aGUgdmlldywgc3luY2luZyBjdXIgKHRoZSBET00gbm9kZXNcbiAgICAvLyBpbiBkaXNwbGF5LmxpbmVEaXYpIHdpdGggdGhlIHZpZXcgYXMgd2UgZ28uXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZVZpZXcgPSB2aWV3W2ldO1xuICAgICAgaWYgKGxpbmVWaWV3LmhpZGRlbikge1xuICAgICAgfSBlbHNlIGlmICghbGluZVZpZXcubm9kZSB8fCBsaW5lVmlldy5ub2RlLnBhcmVudE5vZGUgIT0gY29udGFpbmVyKSB7IC8vIE5vdCBkcmF3biB5ZXRcbiAgICAgICAgdmFyIG5vZGUgPSBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIGN1cik7XG4gICAgICB9IGVsc2UgeyAvLyBBbHJlYWR5IGRyYXduXG4gICAgICAgIHdoaWxlIChjdXIgIT0gbGluZVZpZXcubm9kZSkgY3VyID0gcm0oY3VyKTtcbiAgICAgICAgdmFyIHVwZGF0ZU51bWJlciA9IGxpbmVOdW1iZXJzICYmIHVwZGF0ZU51bWJlcnNGcm9tICE9IG51bGwgJiZcbiAgICAgICAgICB1cGRhdGVOdW1iZXJzRnJvbSA8PSBsaW5lTiAmJiBsaW5lVmlldy5saW5lTnVtYmVyO1xuICAgICAgICBpZiAobGluZVZpZXcuY2hhbmdlcykge1xuICAgICAgICAgIGlmIChpbmRleE9mKGxpbmVWaWV3LmNoYW5nZXMsIFwiZ3V0dGVyXCIpID4gLTEpIHVwZGF0ZU51bWJlciA9IGZhbHNlO1xuICAgICAgICAgIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGVOdW1iZXIpIHtcbiAgICAgICAgICByZW1vdmVDaGlsZHJlbihsaW5lVmlldy5saW5lTnVtYmVyKTtcbiAgICAgICAgICBsaW5lVmlldy5saW5lTnVtYmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgbGluZU4pKSk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gbGluZVZpZXcubm9kZS5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICAgIGxpbmVOICs9IGxpbmVWaWV3LnNpemU7XG4gICAgfVxuICAgIHdoaWxlIChjdXIpIGN1ciA9IHJtKGN1cik7XG4gIH1cblxuICAvLyBXaGVuIGFuIGFzcGVjdCBvZiBhIGxpbmUgY2hhbmdlcywgYSBzdHJpbmcgaXMgYWRkZWQgdG9cbiAgLy8gbGluZVZpZXcuY2hhbmdlcy4gVGhpcyB1cGRhdGVzIHRoZSByZWxldmFudCBwYXJ0IG9mIHRoZSBsaW5lJ3NcbiAgLy8gRE9NIHN0cnVjdHVyZS5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUZvckNoYW5nZXMoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcykge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZVZpZXcuY2hhbmdlcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHR5cGUgPSBsaW5lVmlldy5jaGFuZ2VzW2pdO1xuICAgICAgaWYgKHR5cGUgPT0gXCJ0ZXh0XCIpIHVwZGF0ZUxpbmVUZXh0KGNtLCBsaW5lVmlldyk7XG4gICAgICBlbHNlIGlmICh0eXBlID09IFwiZ3V0dGVyXCIpIHVwZGF0ZUxpbmVHdXR0ZXIoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcyk7XG4gICAgICBlbHNlIGlmICh0eXBlID09IFwiY2xhc3NcIikgdXBkYXRlTGluZUNsYXNzZXMobGluZVZpZXcpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcIndpZGdldFwiKSB1cGRhdGVMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICAgIH1cbiAgICBsaW5lVmlldy5jaGFuZ2VzID0gbnVsbDtcbiAgfVxuXG4gIC8vIExpbmVzIHdpdGggZ3V0dGVyIGVsZW1lbnRzLCB3aWRnZXRzIG9yIGEgYmFja2dyb3VuZCBjbGFzcyBuZWVkIHRvXG4gIC8vIGJlIHdyYXBwZWQsIGFuZCBoYXZlIHRoZSBleHRyYSBlbGVtZW50cyBhZGRlZCB0byB0aGUgd3JhcHBlciBkaXZcbiAgZnVuY3Rpb24gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpIHtcbiAgICBpZiAobGluZVZpZXcubm9kZSA9PSBsaW5lVmlldy50ZXh0KSB7XG4gICAgICBsaW5lVmlldy5ub2RlID0gZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlXCIpO1xuICAgICAgaWYgKGxpbmVWaWV3LnRleHQucGFyZW50Tm9kZSlcbiAgICAgICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsaW5lVmlldy5ub2RlLCBsaW5lVmlldy50ZXh0KTtcbiAgICAgIGxpbmVWaWV3Lm5vZGUuYXBwZW5kQ2hpbGQobGluZVZpZXcudGV4dCk7XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDgpIGxpbmVWaWV3Lm5vZGUuc3R5bGUuekluZGV4ID0gMjtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVWaWV3Lm5vZGU7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVMaW5lQmFja2dyb3VuZChsaW5lVmlldykge1xuICAgIHZhciBjbHMgPSBsaW5lVmlldy5iZ0NsYXNzID8gbGluZVZpZXcuYmdDbGFzcyArIFwiIFwiICsgKGxpbmVWaWV3LmxpbmUuYmdDbGFzcyB8fCBcIlwiKSA6IGxpbmVWaWV3LmxpbmUuYmdDbGFzcztcbiAgICBpZiAoY2xzKSBjbHMgKz0gXCIgQ29kZU1pcnJvci1saW5lYmFja2dyb3VuZFwiO1xuICAgIGlmIChsaW5lVmlldy5iYWNrZ3JvdW5kKSB7XG4gICAgICBpZiAoY2xzKSBsaW5lVmlldy5iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGNscztcbiAgICAgIGVsc2UgeyBsaW5lVmlldy5iYWNrZ3JvdW5kLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuYmFja2dyb3VuZCk7IGxpbmVWaWV3LmJhY2tncm91bmQgPSBudWxsOyB9XG4gICAgfSBlbHNlIGlmIChjbHMpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgbGluZVZpZXcuYmFja2dyb3VuZCA9IHdyYXAuaW5zZXJ0QmVmb3JlKGVsdChcImRpdlwiLCBudWxsLCBjbHMpLCB3cmFwLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFdyYXBwZXIgYXJvdW5kIGJ1aWxkTGluZUNvbnRlbnQgd2hpY2ggd2lsbCByZXVzZSB0aGUgc3RydWN0dXJlXG4gIC8vIGluIGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCB3aGVuIHBvc3NpYmxlLlxuICBmdW5jdGlvbiBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpIHtcbiAgICB2YXIgZXh0ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQgJiYgZXh0LmxpbmUgPT0gbGluZVZpZXcubGluZSkge1xuICAgICAgY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcbiAgICAgIGxpbmVWaWV3Lm1lYXN1cmUgPSBleHQubWVhc3VyZTtcbiAgICAgIHJldHVybiBleHQuYnVpbHQ7XG4gICAgfVxuICAgIHJldHVybiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7XG4gIH1cblxuICAvLyBSZWRyYXcgdGhlIGxpbmUncyB0ZXh0LiBJbnRlcmFjdHMgd2l0aCB0aGUgYmFja2dyb3VuZCBhbmQgdGV4dFxuICAvLyBjbGFzc2VzIGJlY2F1c2UgdGhlIG1vZGUgbWF5IG91dHB1dCB0b2tlbnMgdGhhdCBpbmZsdWVuY2UgdGhlc2VcbiAgLy8gY2xhc3Nlcy5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZVRleHQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGNscyA9IGxpbmVWaWV3LnRleHQuY2xhc3NOYW1lO1xuICAgIHZhciBidWlsdCA9IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7XG4gICAgaWYgKGxpbmVWaWV3LnRleHQgPT0gbGluZVZpZXcubm9kZSkgbGluZVZpZXcubm9kZSA9IGJ1aWx0LnByZTtcbiAgICBsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGJ1aWx0LnByZSwgbGluZVZpZXcudGV4dCk7XG4gICAgbGluZVZpZXcudGV4dCA9IGJ1aWx0LnByZTtcbiAgICBpZiAoYnVpbHQuYmdDbGFzcyAhPSBsaW5lVmlldy5iZ0NsYXNzIHx8IGJ1aWx0LnRleHRDbGFzcyAhPSBsaW5lVmlldy50ZXh0Q2xhc3MpIHtcbiAgICAgIGxpbmVWaWV3LmJnQ2xhc3MgPSBidWlsdC5iZ0NsYXNzO1xuICAgICAgbGluZVZpZXcudGV4dENsYXNzID0gYnVpbHQudGV4dENsYXNzO1xuICAgICAgdXBkYXRlTGluZUNsYXNzZXMobGluZVZpZXcpO1xuICAgIH0gZWxzZSBpZiAoY2xzKSB7XG4gICAgICBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZSA9IGNscztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVMaW5lQ2xhc3NlcyhsaW5lVmlldykge1xuICAgIHVwZGF0ZUxpbmVCYWNrZ3JvdW5kKGxpbmVWaWV3KTtcbiAgICBpZiAobGluZVZpZXcubGluZS53cmFwQ2xhc3MpXG4gICAgICBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldykuY2xhc3NOYW1lID0gbGluZVZpZXcubGluZS53cmFwQ2xhc3M7XG4gICAgZWxzZSBpZiAobGluZVZpZXcubm9kZSAhPSBsaW5lVmlldy50ZXh0KVxuICAgICAgbGluZVZpZXcubm9kZS5jbGFzc05hbWUgPSBcIlwiO1xuICAgIHZhciB0ZXh0Q2xhc3MgPSBsaW5lVmlldy50ZXh0Q2xhc3MgPyBsaW5lVmlldy50ZXh0Q2xhc3MgKyBcIiBcIiArIChsaW5lVmlldy5saW5lLnRleHRDbGFzcyB8fCBcIlwiKSA6IGxpbmVWaWV3LmxpbmUudGV4dENsYXNzO1xuICAgIGxpbmVWaWV3LnRleHQuY2xhc3NOYW1lID0gdGV4dENsYXNzIHx8IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICBpZiAobGluZVZpZXcuZ3V0dGVyKSB7XG4gICAgICBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3Lmd1dHRlcik7XG4gICAgICBsaW5lVmlldy5ndXR0ZXIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCkge1xuICAgICAgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kKTtcbiAgICAgIGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcykge1xuICAgICAgdmFyIHdyYXAgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7XG4gICAgICBsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItYmFja2dyb3VuZCBcIiArIGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdDogXCIgKyAoY20ub3B0aW9ucy5maXhlZEd1dHRlciA/IGRpbXMuZml4ZWRQb3MgOiAtZGltcy5ndXR0ZXJUb3RhbFdpZHRoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHg7IHdpZHRoOiBcIiArIGRpbXMuZ3V0dGVyVG90YWxXaWR0aCArIFwicHhcIik7XG4gICAgICB3cmFwLmluc2VydEJlZm9yZShsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kLCBsaW5lVmlldy50ZXh0KTtcbiAgICB9XG4gICAgdmFyIG1hcmtlcnMgPSBsaW5lVmlldy5saW5lLmd1dHRlck1hcmtlcnM7XG4gICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgfHwgbWFya2Vycykge1xuICAgICAgdmFyIHdyYXAgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7XG4gICAgICB2YXIgZ3V0dGVyV3JhcCA9IGxpbmVWaWV3Lmd1dHRlciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyLXdyYXBwZXJcIiwgXCJsZWZ0OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY20ub3B0aW9ucy5maXhlZEd1dHRlciA/IGRpbXMuZml4ZWRQb3MgOiAtZGltcy5ndXR0ZXJUb3RhbFdpZHRoKSArIFwicHhcIik7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUoZ3V0dGVyV3JhcCk7XG4gICAgICB3cmFwLmluc2VydEJlZm9yZShndXR0ZXJXcmFwLCBsaW5lVmlldy50ZXh0KTtcbiAgICAgIGlmIChsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzKVxuICAgICAgICBndXR0ZXJXcmFwLmNsYXNzTmFtZSArPSBcIiBcIiArIGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3M7XG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lTnVtYmVycyAmJiAoIW1hcmtlcnMgfHwgIW1hcmtlcnNbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCJdKSlcbiAgICAgICAgbGluZVZpZXcubGluZU51bWJlciA9IGd1dHRlcldyYXAuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgZWx0KFwiZGl2XCIsIGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgbGluZU4pLFxuICAgICAgICAgICAgICBcIkNvZGVNaXJyb3ItbGluZW51bWJlciBDb2RlTWlycm9yLWd1dHRlci1lbHRcIixcbiAgICAgICAgICAgICAgXCJsZWZ0OiBcIiArIGRpbXMuZ3V0dGVyTGVmdFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0gKyBcInB4OyB3aWR0aDogXCJcbiAgICAgICAgICAgICAgKyBjbS5kaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoICsgXCJweFwiKSk7XG4gICAgICBpZiAobWFya2VycykgZm9yICh2YXIgayA9IDA7IGsgPCBjbS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOyArK2spIHtcbiAgICAgICAgdmFyIGlkID0gY20ub3B0aW9ucy5ndXR0ZXJzW2tdLCBmb3VuZCA9IG1hcmtlcnMuaGFzT3duUHJvcGVydHkoaWQpICYmIG1hcmtlcnNbaWRdO1xuICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgZ3V0dGVyV3JhcC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgW2ZvdW5kXSwgXCJDb2RlTWlycm9yLWd1dHRlci1lbHRcIiwgXCJsZWZ0OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGltcy5ndXR0ZXJMZWZ0W2lkXSArIFwicHg7IHdpZHRoOiBcIiArIGRpbXMuZ3V0dGVyV2lkdGhbaWRdICsgXCJweFwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKSB7XG4gICAgaWYgKGxpbmVWaWV3LmFsaWduYWJsZSkgbGluZVZpZXcuYWxpZ25hYmxlID0gbnVsbDtcbiAgICBmb3IgKHZhciBub2RlID0gbGluZVZpZXcubm9kZS5maXJzdENoaWxkLCBuZXh0OyBub2RlOyBub2RlID0gbmV4dCkge1xuICAgICAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgaWYgKG5vZGUuY2xhc3NOYW1lID09IFwiQ29kZU1pcnJvci1saW5ld2lkZ2V0XCIpXG4gICAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgfVxuICAgIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7XG4gIH1cblxuICAvLyBCdWlsZCBhIGxpbmUncyBET00gcmVwcmVzZW50YXRpb24gZnJvbSBzY3JhdGNoXG4gIGZ1bmN0aW9uIGJ1aWxkTGluZUVsZW1lbnQoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcykge1xuICAgIHZhciBidWlsdCA9IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7XG4gICAgbGluZVZpZXcudGV4dCA9IGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7XG4gICAgaWYgKGJ1aWx0LmJnQ2xhc3MpIGxpbmVWaWV3LmJnQ2xhc3MgPSBidWlsdC5iZ0NsYXNzO1xuICAgIGlmIChidWlsdC50ZXh0Q2xhc3MpIGxpbmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzcztcblxuICAgIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7XG4gICAgcmV0dXJuIGxpbmVWaWV3Lm5vZGU7XG4gIH1cblxuICAvLyBBIGxpbmVWaWV3IG1heSBjb250YWluIG11bHRpcGxlIGxvZ2ljYWwgbGluZXMgKHdoZW4gbWVyZ2VkIGJ5XG4gIC8vIGNvbGxhcHNlZCBzcGFucykuIFRoZSB3aWRnZXRzIGZvciBhbGwgb2YgdGhlbSBuZWVkIHRvIGJlIGRyYXduLlxuICBmdW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpIHtcbiAgICBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZVZpZXcubGluZSwgbGluZVZpZXcsIGRpbXMsIHRydWUpO1xuICAgIGlmIChsaW5lVmlldy5yZXN0KSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZVZpZXcucmVzdFtpXSwgbGluZVZpZXcsIGRpbXMsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc2VydExpbmVXaWRnZXRzRm9yKGNtLCBsaW5lLCBsaW5lVmlldywgZGltcywgYWxsb3dBYm92ZSkge1xuICAgIGlmICghbGluZS53aWRnZXRzKSByZXR1cm47XG4gICAgdmFyIHdyYXAgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7XG4gICAgZm9yICh2YXIgaSA9IDAsIHdzID0gbGluZS53aWRnZXRzOyBpIDwgd3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciB3aWRnZXQgPSB3c1tpXSwgbm9kZSA9IGVsdChcImRpdlwiLCBbd2lkZ2V0Lm5vZGVdLCBcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKTtcbiAgICAgIGlmICghd2lkZ2V0LmhhbmRsZU1vdXNlRXZlbnRzKSBub2RlLnNldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIiwgXCJ0cnVlXCIpO1xuICAgICAgcG9zaXRpb25MaW5lV2lkZ2V0KHdpZGdldCwgbm9kZSwgbGluZVZpZXcsIGRpbXMpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgaWYgKGFsbG93QWJvdmUgJiYgd2lkZ2V0LmFib3ZlKVxuICAgICAgICB3cmFwLmluc2VydEJlZm9yZShub2RlLCBsaW5lVmlldy5ndXR0ZXIgfHwgbGluZVZpZXcudGV4dCk7XG4gICAgICBlbHNlXG4gICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICBzaWduYWxMYXRlcih3aWRnZXQsIFwicmVkcmF3XCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKSB7XG4gICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpIHtcbiAgICAgIChsaW5lVmlldy5hbGlnbmFibGUgfHwgKGxpbmVWaWV3LmFsaWduYWJsZSA9IFtdKSkucHVzaChub2RlKTtcbiAgICAgIHZhciB3aWR0aCA9IGRpbXMud3JhcHBlcldpZHRoO1xuICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0gZGltcy5maXhlZFBvcyArIFwicHhcIjtcbiAgICAgIGlmICghd2lkZ2V0LmNvdmVyR3V0dGVyKSB7XG4gICAgICAgIHdpZHRoIC09IGRpbXMuZ3V0dGVyVG90YWxXaWR0aDtcbiAgICAgICAgbm9kZS5zdHlsZS5wYWRkaW5nTGVmdCA9IGRpbXMuZ3V0dGVyVG90YWxXaWR0aCArIFwicHhcIjtcbiAgICAgIH1cbiAgICAgIG5vZGUuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKHdpZGdldC5jb3Zlckd1dHRlcikge1xuICAgICAgbm9kZS5zdHlsZS56SW5kZXggPSA1O1xuICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgIGlmICghd2lkZ2V0Lm5vSFNjcm9sbCkgbm9kZS5zdHlsZS5tYXJnaW5MZWZ0ID0gLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCArIFwicHhcIjtcbiAgICB9XG4gIH1cblxuICAvLyBQT1NJVElPTiBPQkpFQ1RcblxuICAvLyBBIFBvcyBpbnN0YW5jZSByZXByZXNlbnRzIGEgcG9zaXRpb24gd2l0aGluIHRoZSB0ZXh0LlxuICB2YXIgUG9zID0gQ29kZU1pcnJvci5Qb3MgPSBmdW5jdGlvbihsaW5lLCBjaCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQb3MpKSByZXR1cm4gbmV3IFBvcyhsaW5lLCBjaCk7XG4gICAgdGhpcy5saW5lID0gbGluZTsgdGhpcy5jaCA9IGNoO1xuICB9O1xuXG4gIC8vIENvbXBhcmUgdHdvIHBvc2l0aW9ucywgcmV0dXJuIDAgaWYgdGhleSBhcmUgdGhlIHNhbWUsIGEgbmVnYXRpdmVcbiAgLy8gbnVtYmVyIHdoZW4gYSBpcyBsZXNzLCBhbmQgYSBwb3NpdGl2ZSBudW1iZXIgb3RoZXJ3aXNlLlxuICB2YXIgY21wID0gQ29kZU1pcnJvci5jbXBQb3MgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLmxpbmUgLSBiLmxpbmUgfHwgYS5jaCAtIGIuY2g7IH07XG5cbiAgZnVuY3Rpb24gY29weVBvcyh4KSB7cmV0dXJuIFBvcyh4LmxpbmUsIHguY2gpO31cbiAgZnVuY3Rpb24gbWF4UG9zKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBiIDogYTsgfVxuICBmdW5jdGlvbiBtaW5Qb3MoYSwgYikgeyByZXR1cm4gY21wKGEsIGIpIDwgMCA/IGEgOiBiOyB9XG5cbiAgLy8gSU5QVVQgSEFORExJTkdcblxuICBmdW5jdGlvbiBlbnN1cmVGb2N1cyhjbSkge1xuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkgeyBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7IG9uRm9jdXMoY20pOyB9XG4gIH1cblxuICAvLyBUaGlzIHdpbGwgYmUgc2V0IHRvIGFuIGFycmF5IG9mIHN0cmluZ3Mgd2hlbiBjb3B5aW5nLCBzbyB0aGF0LFxuICAvLyB3aGVuIHBhc3RpbmcsIHdlIGtub3cgd2hhdCBraW5kIG9mIHNlbGVjdGlvbnMgdGhlIGNvcGllZCB0ZXh0XG4gIC8vIHdhcyBtYWRlIG91dCBvZi5cbiAgdmFyIGxhc3RDb3BpZWQgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGFwcGx5VGV4dElucHV0KGNtLCBpbnNlcnRlZCwgZGVsZXRlZCwgc2VsLCBvcmlnaW4pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTtcbiAgICBpZiAoIXNlbCkgc2VsID0gZG9jLnNlbDtcblxuICAgIHZhciBwYXN0ZSA9IGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgfHwgb3JpZ2luID09IFwicGFzdGVcIjtcbiAgICB2YXIgdGV4dExpbmVzID0gZG9jLnNwbGl0TGluZXMoaW5zZXJ0ZWQpLCBtdWx0aVBhc3RlID0gbnVsbDtcbiAgICAvLyBXaGVuIHBhc2luZyBOIGxpbmVzIGludG8gTiBzZWxlY3Rpb25zLCBpbnNlcnQgb25lIGxpbmUgcGVyIHNlbGVjdGlvblxuICAgIGlmIChwYXN0ZSAmJiBzZWwucmFuZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGlmIChsYXN0Q29waWVkICYmIGxhc3RDb3BpZWQuam9pbihcIlxcblwiKSA9PSBpbnNlcnRlZCkge1xuICAgICAgICBpZiAoc2VsLnJhbmdlcy5sZW5ndGggJSBsYXN0Q29waWVkLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgbXVsdGlQYXN0ZSA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdENvcGllZC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIG11bHRpUGFzdGUucHVzaChkb2Muc3BsaXRMaW5lcyhsYXN0Q29waWVkW2ldKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGV4dExpbmVzLmxlbmd0aCA9PSBzZWwucmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICBtdWx0aVBhc3RlID0gbWFwKHRleHRMaW5lcywgZnVuY3Rpb24obCkgeyByZXR1cm4gW2xdOyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3JtYWwgYmVoYXZpb3IgaXMgdG8gaW5zZXJ0IHRoZSBuZXcgdGV4dCBpbnRvIGV2ZXJ5IHNlbGVjdGlvblxuICAgIGZvciAodmFyIGkgPSBzZWwucmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgdmFyIGZyb20gPSByYW5nZS5mcm9tKCksIHRvID0gcmFuZ2UudG8oKTtcbiAgICAgIGlmIChyYW5nZS5lbXB0eSgpKSB7XG4gICAgICAgIGlmIChkZWxldGVkICYmIGRlbGV0ZWQgPiAwKSAvLyBIYW5kbGUgZGVsZXRpb25cbiAgICAgICAgICBmcm9tID0gUG9zKGZyb20ubGluZSwgZnJvbS5jaCAtIGRlbGV0ZWQpO1xuICAgICAgICBlbHNlIGlmIChjbS5zdGF0ZS5vdmVyd3JpdGUgJiYgIXBhc3RlKSAvLyBIYW5kbGUgb3ZlcndyaXRlXG4gICAgICAgICAgdG8gPSBQb3ModG8ubGluZSwgTWF0aC5taW4oZ2V0TGluZShkb2MsIHRvLmxpbmUpLnRleHQubGVuZ3RoLCB0by5jaCArIGxzdCh0ZXh0TGluZXMpLmxlbmd0aCkpO1xuICAgICAgfVxuICAgICAgdmFyIHVwZGF0ZUlucHV0ID0gY20uY3VyT3AudXBkYXRlSW5wdXQ7XG4gICAgICB2YXIgY2hhbmdlRXZlbnQgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBtdWx0aVBhc3RlID8gbXVsdGlQYXN0ZVtpICUgbXVsdGlQYXN0ZS5sZW5ndGhdIDogdGV4dExpbmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogb3JpZ2luIHx8IChwYXN0ZSA/IFwicGFzdGVcIiA6IGNtLnN0YXRlLmN1dEluY29taW5nID8gXCJjdXRcIiA6IFwiK2lucHV0XCIpfTtcbiAgICAgIG1ha2VDaGFuZ2UoY20uZG9jLCBjaGFuZ2VFdmVudCk7XG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJpbnB1dFJlYWRcIiwgY20sIGNoYW5nZUV2ZW50KTtcbiAgICB9XG4gICAgaWYgKGluc2VydGVkICYmICFwYXN0ZSlcbiAgICAgIHRyaWdnZXJFbGVjdHJpYyhjbSwgaW5zZXJ0ZWQpO1xuXG4gICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7XG4gICAgY20uY3VyT3AudXBkYXRlSW5wdXQgPSB1cGRhdGVJbnB1dDtcbiAgICBjbS5jdXJPcC50eXBpbmcgPSB0cnVlO1xuICAgIGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPSBjbS5zdGF0ZS5jdXRJbmNvbWluZyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUGFzdGUoZSwgY20pIHtcbiAgICB2YXIgcGFzdGVkID0gZS5jbGlwYm9hcmREYXRhICYmIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTtcbiAgICBpZiAocGFzdGVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIWNtLmlzUmVhZE9ubHkoKSAmJiAhY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQpXG4gICAgICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkgeyBhcHBseVRleHRJbnB1dChjbSwgcGFzdGVkLCAwLCBudWxsLCBcInBhc3RlXCIpOyB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJFbGVjdHJpYyhjbSwgaW5zZXJ0ZWQpIHtcbiAgICAvLyBXaGVuIGFuICdlbGVjdHJpYycgY2hhcmFjdGVyIGlzIGluc2VydGVkLCBpbW1lZGlhdGVseSB0cmlnZ2VyIGEgcmVpbmRlbnRcbiAgICBpZiAoIWNtLm9wdGlvbnMuZWxlY3RyaWNDaGFycyB8fCAhY20ub3B0aW9ucy5zbWFydEluZGVudCkgcmV0dXJuO1xuICAgIHZhciBzZWwgPSBjbS5kb2Muc2VsO1xuXG4gICAgZm9yICh2YXIgaSA9IHNlbC5yYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICBpZiAocmFuZ2UuaGVhZC5jaCA+IDEwMCB8fCAoaSAmJiBzZWwucmFuZ2VzW2kgLSAxXS5oZWFkLmxpbmUgPT0gcmFuZ2UuaGVhZC5saW5lKSkgY29udGludWU7XG4gICAgICB2YXIgbW9kZSA9IGNtLmdldE1vZGVBdChyYW5nZS5oZWFkKTtcbiAgICAgIHZhciBpbmRlbnRlZCA9IGZhbHNlO1xuICAgICAgaWYgKG1vZGUuZWxlY3RyaWNDaGFycykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1vZGUuZWxlY3RyaWNDaGFycy5sZW5ndGg7IGorKylcbiAgICAgICAgICBpZiAoaW5zZXJ0ZWQuaW5kZXhPZihtb2RlLmVsZWN0cmljQ2hhcnMuY2hhckF0KGopKSA+IC0xKSB7XG4gICAgICAgICAgICBpbmRlbnRlZCA9IGluZGVudExpbmUoY20sIHJhbmdlLmhlYWQubGluZSwgXCJzbWFydFwiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9kZS5lbGVjdHJpY0lucHV0KSB7XG4gICAgICAgIGlmIChtb2RlLmVsZWN0cmljSW5wdXQudGVzdChnZXRMaW5lKGNtLmRvYywgcmFuZ2UuaGVhZC5saW5lKS50ZXh0LnNsaWNlKDAsIHJhbmdlLmhlYWQuY2gpKSlcbiAgICAgICAgICBpbmRlbnRlZCA9IGluZGVudExpbmUoY20sIHJhbmdlLmhlYWQubGluZSwgXCJzbWFydFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRlbnRlZCkgc2lnbmFsTGF0ZXIoY20sIFwiZWxlY3RyaWNJbnB1dFwiLCBjbSwgcmFuZ2UuaGVhZC5saW5lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5YWJsZVJhbmdlcyhjbSkge1xuICAgIHZhciB0ZXh0ID0gW10sIHJhbmdlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gY20uZG9jLnNlbC5yYW5nZXNbaV0uaGVhZC5saW5lO1xuICAgICAgdmFyIGxpbmVSYW5nZSA9IHthbmNob3I6IFBvcyhsaW5lLCAwKSwgaGVhZDogUG9zKGxpbmUgKyAxLCAwKX07XG4gICAgICByYW5nZXMucHVzaChsaW5lUmFuZ2UpO1xuICAgICAgdGV4dC5wdXNoKGNtLmdldFJhbmdlKGxpbmVSYW5nZS5hbmNob3IsIGxpbmVSYW5nZS5oZWFkKSk7XG4gICAgfVxuICAgIHJldHVybiB7dGV4dDogdGV4dCwgcmFuZ2VzOiByYW5nZXN9O1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZUJyb3dzZXJNYWdpYyhmaWVsZCkge1xuICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIsIFwib2ZmXCIpO1xuICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcImF1dG9jYXBpdGFsaXplXCIsIFwib2ZmXCIpO1xuICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcInNwZWxsY2hlY2tcIiwgXCJmYWxzZVwiKTtcbiAgfVxuXG4gIC8vIFRFWFRBUkVBIElOUFVUIFNUWUxFXG5cbiAgZnVuY3Rpb24gVGV4dGFyZWFJbnB1dChjbSkge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICAvLyBTZWUgaW5wdXQucG9sbCBhbmQgaW5wdXQucmVzZXRcbiAgICB0aGlzLnByZXZJbnB1dCA9IFwiXCI7XG5cbiAgICAvLyBGbGFnIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgd2UgZXhwZWN0IGlucHV0IHRvIGFwcGVhciByZWFsIHNvb25cbiAgICAvLyBub3cgKGFmdGVyIHNvbWUgZXZlbnQgbGlrZSAna2V5cHJlc3MnIG9yICdpbnB1dCcpIGFuZCBhcmVcbiAgICAvLyBwb2xsaW5nIGludGVuc2l2ZWx5LlxuICAgIHRoaXMucG9sbGluZ0Zhc3QgPSBmYWxzZTtcbiAgICAvLyBTZWxmLXJlc2V0dGluZyB0aW1lb3V0IGZvciB0aGUgcG9sbGVyXG4gICAgdGhpcy5wb2xsaW5nID0gbmV3IERlbGF5ZWQoKTtcbiAgICAvLyBUcmFja3Mgd2hlbiBpbnB1dC5yZXNldCBoYXMgcHVudGVkIHRvIGp1c3QgcHV0dGluZyBhIHNob3J0XG4gICAgLy8gc3RyaW5nIGludG8gdGhlIHRleHRhcmVhIGluc3RlYWQgb2YgdGhlIGZ1bGwgc2VsZWN0aW9uLlxuICAgIHRoaXMuaW5hY2N1cmF0ZVNlbGVjdGlvbiA9IGZhbHNlO1xuICAgIC8vIFVzZWQgdG8gd29yayBhcm91bmQgSUUgaXNzdWUgd2l0aCBzZWxlY3Rpb24gYmVpbmcgZm9yZ290dGVuIHdoZW4gZm9jdXMgbW92ZXMgYXdheSBmcm9tIHRleHRhcmVhXG4gICAgdGhpcy5oYXNTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGlkZGVuVGV4dGFyZWEoKSB7XG4gICAgdmFyIHRlID0gZWx0KFwidGV4dGFyZWFcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IHBhZGRpbmc6IDA7IHdpZHRoOiAxcHg7IGhlaWdodDogMWVtOyBvdXRsaW5lOiBub25lXCIpO1xuICAgIHZhciBkaXYgPSBlbHQoXCJkaXZcIiwgW3RlXSwgbnVsbCwgXCJvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiAzcHg7IGhlaWdodDogMHB4O1wiKTtcbiAgICAvLyBUaGUgdGV4dGFyZWEgaXMga2VwdCBwb3NpdGlvbmVkIG5lYXIgdGhlIGN1cnNvciB0byBwcmV2ZW50IHRoZVxuICAgIC8vIGZhY3QgdGhhdCBpdCdsbCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgb24gaW5wdXQgZnJvbSBzY3JvbGxpbmdcbiAgICAvLyBvdXIgZmFrZSBjdXJzb3Igb3V0IG9mIHZpZXcuIE9uIHdlYmtpdCwgd2hlbiB3cmFwPW9mZiwgcGFzdGUgaXNcbiAgICAvLyB2ZXJ5IHNsb3cuIFNvIG1ha2UgdGhlIGFyZWEgd2lkZSBpbnN0ZWFkLlxuICAgIGlmICh3ZWJraXQpIHRlLnN0eWxlLndpZHRoID0gXCIxMDAwcHhcIjtcbiAgICBlbHNlIHRlLnNldEF0dHJpYnV0ZShcIndyYXBcIiwgXCJvZmZcIik7XG4gICAgLy8gSWYgYm9yZGVyOiAwOyAtLSBpT1MgZmFpbHMgdG8gb3BlbiBrZXlib2FyZCAoaXNzdWUgIzEyODcpXG4gICAgaWYgKGlvcykgdGUuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgYmxhY2tcIjtcbiAgICBkaXNhYmxlQnJvd3Nlck1hZ2ljKHRlKTtcbiAgICByZXR1cm4gZGl2O1xuICB9XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUgPSBjb3B5T2JqKHtcbiAgICBpbml0OiBmdW5jdGlvbihkaXNwbGF5KSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLCBjbSA9IHRoaXMuY207XG5cbiAgICAgIC8vIFdyYXBzIGFuZCBoaWRlcyBpbnB1dCB0ZXh0YXJlYVxuICAgICAgdmFyIGRpdiA9IHRoaXMud3JhcHBlciA9IGhpZGRlblRleHRhcmVhKCk7XG4gICAgICAvLyBUaGUgc2VtaWhpZGRlbiB0ZXh0YXJlYSB0aGF0IGlzIGZvY3VzZWQgd2hlbiB0aGUgZWRpdG9yIGlzXG4gICAgICAvLyBmb2N1c2VkLCBhbmQgcmVjZWl2ZXMgaW5wdXQuXG4gICAgICB2YXIgdGUgPSB0aGlzLnRleHRhcmVhID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgICBkaXNwbGF5LndyYXBwZXIuaW5zZXJ0QmVmb3JlKGRpdiwgZGlzcGxheS53cmFwcGVyLmZpcnN0Q2hpbGQpO1xuXG4gICAgICAvLyBOZWVkZWQgdG8gaGlkZSBiaWcgYmx1ZSBibGlua2luZyBjdXJzb3Igb24gTW9iaWxlIFNhZmFyaSAoZG9lc24ndCBzZWVtIHRvIHdvcmsgaW4gaU9TIDggYW55bW9yZSlcbiAgICAgIGlmIChpb3MpIHRlLnN0eWxlLndpZHRoID0gXCIwcHhcIjtcblxuICAgICAgb24odGUsIFwiaW5wdXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkgJiYgaW5wdXQuaGFzU2VsZWN0aW9uKSBpbnB1dC5oYXNTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICBpbnB1dC5wb2xsKCk7XG4gICAgICB9KTtcblxuICAgICAgb24odGUsIFwicGFzdGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGhhbmRsZVBhc3RlKGUsIGNtKSkgcmV0dXJuXG5cbiAgICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IHRydWU7XG4gICAgICAgIGlucHV0LmZhc3RQb2xsKCk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gcHJlcGFyZUNvcHlDdXQoZSkge1xuICAgICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSByZXR1cm5cbiAgICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgICBsYXN0Q29waWVkID0gY20uZ2V0U2VsZWN0aW9ucygpO1xuICAgICAgICAgIGlmIChpbnB1dC5pbmFjY3VyYXRlU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBpbnB1dC5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICAgICAgaW5wdXQuaW5hY2N1cmF0ZVNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGUudmFsdWUgPSBsYXN0Q29waWVkLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICBzZWxlY3RJbnB1dCh0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFjbS5vcHRpb25zLmxpbmVXaXNlQ29weUN1dCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmFuZ2VzID0gY29weWFibGVSYW5nZXMoY20pO1xuICAgICAgICAgIGxhc3RDb3BpZWQgPSByYW5nZXMudGV4dDtcbiAgICAgICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIHtcbiAgICAgICAgICAgIGNtLnNldFNlbGVjdGlvbnMocmFuZ2VzLnJhbmdlcywgbnVsbCwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dC5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICAgICAgdGUudmFsdWUgPSByYW5nZXMudGV4dC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgc2VsZWN0SW5wdXQodGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIGNtLnN0YXRlLmN1dEluY29taW5nID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIG9uKHRlLCBcImN1dFwiLCBwcmVwYXJlQ29weUN1dCk7XG4gICAgICBvbih0ZSwgXCJjb3B5XCIsIHByZXBhcmVDb3B5Q3V0KTtcblxuICAgICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJwYXN0ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpIHx8IHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuO1xuICAgICAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gdHJ1ZTtcbiAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmV2ZW50IG5vcm1hbCBzZWxlY3Rpb24gaW4gdGhlIGVkaXRvciAod2UgaGFuZGxlIG91ciBvd24pXG4gICAgICBvbihkaXNwbGF5LmxpbmVTcGFjZSwgXCJzZWxlY3RzdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSkgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH0pO1xuXG4gICAgICBvbih0ZSwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhcnQgPSBjbS5nZXRDdXJzb3IoXCJmcm9tXCIpO1xuICAgICAgICBpZiAoaW5wdXQuY29tcG9zaW5nKSBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKVxuICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSB7XG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgIHJhbmdlOiBjbS5tYXJrVGV4dChzdGFydCwgY20uZ2V0Q3Vyc29yKFwidG9cIiksIHtjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1jb21wb3NpbmdcIn0pXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIG9uKHRlLCBcImNvbXBvc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaW5wdXQuY29tcG9zaW5nKSB7XG4gICAgICAgICAgaW5wdXQucG9sbCgpO1xuICAgICAgICAgIGlucHV0LmNvbXBvc2luZy5yYW5nZS5jbGVhcigpO1xuICAgICAgICAgIGlucHV0LmNvbXBvc2luZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBwcmVwYXJlU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFJlZHJhdyB0aGUgc2VsZWN0aW9uIGFuZC9vciBjdXJzb3JcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgICB2YXIgcmVzdWx0ID0gcHJlcGFyZVNlbGVjdGlvbihjbSk7XG5cbiAgICAgIC8vIE1vdmUgdGhlIGhpZGRlbiB0ZXh0YXJlYSBuZWFyIHRoZSBjdXJzb3IgdG8gcHJldmVudCBzY3JvbGxpbmcgYXJ0aWZhY3RzXG4gICAgICBpZiAoY20ub3B0aW9ucy5tb3ZlSW5wdXRXaXRoQ3Vyc29yKSB7XG4gICAgICAgIHZhciBoZWFkUG9zID0gY3Vyc29yQ29vcmRzKGNtLCBkb2Muc2VsLnByaW1hcnkoKS5oZWFkLCBcImRpdlwiKTtcbiAgICAgICAgdmFyIHdyYXBPZmYgPSBkaXNwbGF5LndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGxpbmVPZmYgPSBkaXNwbGF5LmxpbmVEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJlc3VsdC50ZVRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQgLSAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFBvcy50b3AgKyBsaW5lT2ZmLnRvcCAtIHdyYXBPZmYudG9wKSk7XG4gICAgICAgIHJlc3VsdC50ZUxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGggLSAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRQb3MubGVmdCArIGxpbmVPZmYubGVmdCAtIHdyYXBPZmYubGVmdCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBzaG93U2VsZWN0aW9uOiBmdW5jdGlvbihkcmF3bikge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5LmN1cnNvckRpdiwgZHJhd24uY3Vyc29ycyk7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5LnNlbGVjdGlvbkRpdiwgZHJhd24uc2VsZWN0aW9uKTtcbiAgICAgIGlmIChkcmF3bi50ZVRvcCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50b3AgPSBkcmF3bi50ZVRvcCArIFwicHhcIjtcbiAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLmxlZnQgPSBkcmF3bi50ZUxlZnQgKyBcInB4XCI7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIFJlc2V0IHRoZSBpbnB1dCB0byBjb3JyZXNwb25kIHRvIHRoZSBzZWxlY3Rpb24gKG9yIHRvIGJlIGVtcHR5LFxuICAgIC8vIHdoZW4gbm90IHR5cGluZyBhbmQgbm90aGluZyBpcyBzZWxlY3RlZClcbiAgICByZXNldDogZnVuY3Rpb24odHlwaW5nKSB7XG4gICAgICBpZiAodGhpcy5jb250ZXh0TWVudVBlbmRpbmcpIHJldHVybjtcbiAgICAgIHZhciBtaW5pbWFsLCBzZWxlY3RlZCwgY20gPSB0aGlzLmNtLCBkb2MgPSBjbS5kb2M7XG4gICAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xuICAgICAgICB0aGlzLnByZXZJbnB1dCA9IFwiXCI7XG4gICAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgICBtaW5pbWFsID0gaGFzQ29weUV2ZW50ICYmXG4gICAgICAgICAgKHJhbmdlLnRvKCkubGluZSAtIHJhbmdlLmZyb20oKS5saW5lID4gMTAwIHx8IChzZWxlY3RlZCA9IGNtLmdldFNlbGVjdGlvbigpKS5sZW5ndGggPiAxMDAwKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBtaW5pbWFsID8gXCItXCIgOiBzZWxlY3RlZCB8fCBjbS5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy50ZXh0YXJlYS52YWx1ZSA9IGNvbnRlbnQ7XG4gICAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSBzZWxlY3RJbnB1dCh0aGlzLnRleHRhcmVhKTtcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgdGhpcy5oYXNTZWxlY3Rpb24gPSBjb250ZW50O1xuICAgICAgfSBlbHNlIGlmICghdHlwaW5nKSB7XG4gICAgICAgIHRoaXMucHJldklucHV0ID0gdGhpcy50ZXh0YXJlYS52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHRoaXMuaGFzU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5hY2N1cmF0ZVNlbGVjdGlvbiA9IG1pbmltYWw7XG4gICAgfSxcblxuICAgIGdldEZpZWxkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMudGV4dGFyZWE7IH0sXG5cbiAgICBzdXBwb3J0c1RvdWNoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9LFxuXG4gICAgZm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY20ub3B0aW9ucy5yZWFkT25seSAhPSBcIm5vY3Vyc29yXCIgJiYgKCFtb2JpbGUgfHwgYWN0aXZlRWx0KCkgIT0gdGhpcy50ZXh0YXJlYSkpIHtcbiAgICAgICAgdHJ5IHsgdGhpcy50ZXh0YXJlYS5mb2N1cygpOyB9XG4gICAgICAgIGNhdGNoIChlKSB7fSAvLyBJRTggd2lsbCB0aHJvdyBpZiB0aGUgdGV4dGFyZWEgaXMgZGlzcGxheTogbm9uZSBvciBub3QgaW4gRE9NXG4gICAgICB9XG4gICAgfSxcblxuICAgIGJsdXI6IGZ1bmN0aW9uKCkgeyB0aGlzLnRleHRhcmVhLmJsdXIoKTsgfSxcblxuICAgIHJlc2V0UG9zaXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnRvcCA9IHRoaXMud3JhcHBlci5zdHlsZS5sZWZ0ID0gMDtcbiAgICB9LFxuXG4gICAgcmVjZWl2ZWRGb2N1czogZnVuY3Rpb24oKSB7IHRoaXMuc2xvd1BvbGwoKTsgfSxcblxuICAgIC8vIFBvbGwgZm9yIGlucHV0IGNoYW5nZXMsIHVzaW5nIHRoZSBub3JtYWwgcmF0ZSBvZiBwb2xsaW5nLiBUaGlzXG4gICAgLy8gcnVucyBhcyBsb25nIGFzIHRoZSBlZGl0b3IgaXMgZm9jdXNlZC5cbiAgICBzbG93UG9sbDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzO1xuICAgICAgaWYgKGlucHV0LnBvbGxpbmdGYXN0KSByZXR1cm47XG4gICAgICBpbnB1dC5wb2xsaW5nLnNldCh0aGlzLmNtLm9wdGlvbnMucG9sbEludGVydmFsLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaW5wdXQucG9sbCgpO1xuICAgICAgICBpZiAoaW5wdXQuY20uc3RhdGUuZm9jdXNlZCkgaW5wdXQuc2xvd1BvbGwoKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBXaGVuIGFuIGV2ZW50IGhhcyBqdXN0IGNvbWUgaW4gdGhhdCBpcyBsaWtlbHkgdG8gYWRkIG9yIGNoYW5nZVxuICAgIC8vIHNvbWV0aGluZyBpbiB0aGUgaW5wdXQgdGV4dGFyZWEsIHdlIHBvbGwgZmFzdGVyLCB0byBlbnN1cmUgdGhhdFxuICAgIC8vIHRoZSBjaGFuZ2UgYXBwZWFycyBvbiB0aGUgc2NyZWVuIHF1aWNrbHkuXG4gICAgZmFzdFBvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1pc3NlZCA9IGZhbHNlLCBpbnB1dCA9IHRoaXM7XG4gICAgICBpbnB1dC5wb2xsaW5nRmFzdCA9IHRydWU7XG4gICAgICBmdW5jdGlvbiBwKCkge1xuICAgICAgICB2YXIgY2hhbmdlZCA9IGlucHV0LnBvbGwoKTtcbiAgICAgICAgaWYgKCFjaGFuZ2VkICYmICFtaXNzZWQpIHttaXNzZWQgPSB0cnVlOyBpbnB1dC5wb2xsaW5nLnNldCg2MCwgcCk7fVxuICAgICAgICBlbHNlIHtpbnB1dC5wb2xsaW5nRmFzdCA9IGZhbHNlOyBpbnB1dC5zbG93UG9sbCgpO31cbiAgICAgIH1cbiAgICAgIGlucHV0LnBvbGxpbmcuc2V0KDIwLCBwKTtcbiAgICB9LFxuXG4gICAgLy8gUmVhZCBpbnB1dCBmcm9tIHRoZSB0ZXh0YXJlYSwgYW5kIHVwZGF0ZSB0aGUgZG9jdW1lbnQgdG8gbWF0Y2guXG4gICAgLy8gV2hlbiBzb21ldGhpbmcgaXMgc2VsZWN0ZWQsIGl0IGlzIHByZXNlbnQgaW4gdGhlIHRleHRhcmVhLCBhbmRcbiAgICAvLyBzZWxlY3RlZCAodW5sZXNzIGl0IGlzIGh1Z2UsIGluIHdoaWNoIGNhc2UgYSBwbGFjZWhvbGRlciBpc1xuICAgIC8vIHVzZWQpLiBXaGVuIG5vdGhpbmcgaXMgc2VsZWN0ZWQsIHRoZSBjdXJzb3Igc2l0cyBhZnRlciBwcmV2aW91c2x5XG4gICAgLy8gc2VlbiB0ZXh0IChjYW4gYmUgZW1wdHkpLCB3aGljaCBpcyBzdG9yZWQgaW4gcHJldklucHV0ICh3ZSBtdXN0XG4gICAgLy8gbm90IHJlc2V0IHRoZSB0ZXh0YXJlYSB3aGVuIHR5cGluZywgYmVjYXVzZSB0aGF0IGJyZWFrcyBJTUUpLlxuICAgIHBvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbSwgaW5wdXQgPSB0aGlzLnRleHRhcmVhLCBwcmV2SW5wdXQgPSB0aGlzLnByZXZJbnB1dDtcbiAgICAgIC8vIFNpbmNlIHRoaXMgaXMgY2FsbGVkIGEgKmxvdCosIHRyeSB0byBiYWlsIG91dCBhcyBjaGVhcGx5IGFzXG4gICAgICAvLyBwb3NzaWJsZSB3aGVuIGl0IGlzIGNsZWFyIHRoYXQgbm90aGluZyBoYXBwZW5lZC4gaGFzU2VsZWN0aW9uXG4gICAgICAvLyB3aWxsIGJlIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgYSBsb3Qgb2YgdGV4dCBpbiB0aGUgdGV4dGFyZWEsXG4gICAgICAvLyBpbiB3aGljaCBjYXNlIHJlYWRpbmcgaXRzIHZhbHVlIHdvdWxkIGJlIGV4cGVuc2l2ZS5cbiAgICAgIGlmICh0aGlzLmNvbnRleHRNZW51UGVuZGluZyB8fCAhY20uc3RhdGUuZm9jdXNlZCB8fFxuICAgICAgICAgIChoYXNTZWxlY3Rpb24oaW5wdXQpICYmICFwcmV2SW5wdXQgJiYgIXRoaXMuY29tcG9zaW5nKSB8fFxuICAgICAgICAgIGNtLmlzUmVhZE9ubHkoKSB8fCBjbS5vcHRpb25zLmRpc2FibGVJbnB1dCB8fCBjbS5zdGF0ZS5rZXlTZXEpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIHRleHQgPSBpbnB1dC52YWx1ZTtcbiAgICAgIC8vIElmIG5vdGhpbmcgY2hhbmdlZCwgYmFpbC5cbiAgICAgIGlmICh0ZXh0ID09IHByZXZJbnB1dCAmJiAhY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gV29yayBhcm91bmQgbm9uc2Vuc2ljYWwgc2VsZWN0aW9uIHJlc2V0dGluZyBpbiBJRTkvMTAsIGFuZFxuICAgICAgLy8gaW5leHBsaWNhYmxlIGFwcGVhcmFuY2Ugb2YgcHJpdmF0ZSBhcmVhIHVuaWNvZGUgY2hhcmFjdGVycyBvblxuICAgICAgLy8gc29tZSBrZXkgY29tYm9zIGluIE1hYyAoIzI2ODkpLlxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSAmJiB0aGlzLmhhc1NlbGVjdGlvbiA9PT0gdGV4dCB8fFxuICAgICAgICAgIG1hYyAmJiAvW1xcdWY3MDAtXFx1ZjdmZl0vLnRlc3QodGV4dCkpIHtcbiAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChjbS5kb2Muc2VsID09IGNtLmRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUpIHtcbiAgICAgICAgdmFyIGZpcnN0ID0gdGV4dC5jaGFyQ29kZUF0KDApO1xuICAgICAgICBpZiAoZmlyc3QgPT0gMHgyMDBiICYmICFwcmV2SW5wdXQpIHByZXZJbnB1dCA9IFwiXFx1MjAwYlwiO1xuICAgICAgICBpZiAoZmlyc3QgPT0gMHgyMWRhKSB7IHRoaXMucmVzZXQoKTsgcmV0dXJuIHRoaXMuY20uZXhlY0NvbW1hbmQoXCJ1bmRvXCIpOyB9XG4gICAgICB9XG4gICAgICAvLyBGaW5kIHRoZSBwYXJ0IG9mIHRoZSBpbnB1dCB0aGF0IGlzIGFjdHVhbGx5IG5ld1xuICAgICAgdmFyIHNhbWUgPSAwLCBsID0gTWF0aC5taW4ocHJldklucHV0Lmxlbmd0aCwgdGV4dC5sZW5ndGgpO1xuICAgICAgd2hpbGUgKHNhbWUgPCBsICYmIHByZXZJbnB1dC5jaGFyQ29kZUF0KHNhbWUpID09IHRleHQuY2hhckNvZGVBdChzYW1lKSkgKytzYW1lO1xuXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgYXBwbHlUZXh0SW5wdXQoY20sIHRleHQuc2xpY2Uoc2FtZSksIHByZXZJbnB1dC5sZW5ndGggLSBzYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICBudWxsLCBzZWxmLmNvbXBvc2luZyA/IFwiKmNvbXBvc2VcIiA6IG51bGwpO1xuXG4gICAgICAgIC8vIERvbid0IGxlYXZlIGxvbmcgdGV4dCBpbiB0aGUgdGV4dGFyZWEsIHNpbmNlIGl0IG1ha2VzIGZ1cnRoZXIgcG9sbGluZyBzbG93XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDAgfHwgdGV4dC5pbmRleE9mKFwiXFxuXCIpID4gLTEpIGlucHV0LnZhbHVlID0gc2VsZi5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICBlbHNlIHNlbGYucHJldklucHV0ID0gdGV4dDtcblxuICAgICAgICBpZiAoc2VsZi5jb21wb3NpbmcpIHtcbiAgICAgICAgICBzZWxmLmNvbXBvc2luZy5yYW5nZS5jbGVhcigpO1xuICAgICAgICAgIHNlbGYuY29tcG9zaW5nLnJhbmdlID0gY20ubWFya1RleHQoc2VsZi5jb21wb3Npbmcuc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogXCJDb2RlTWlycm9yLWNvbXBvc2luZ1wifSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIGVuc3VyZVBvbGxlZDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5wb2xsaW5nRmFzdCAmJiB0aGlzLnBvbGwoKSkgdGhpcy5wb2xsaW5nRmFzdCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBvbktleVByZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHRoaXMuaGFzU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuZmFzdFBvbGwoKTtcbiAgICB9LFxuXG4gICAgb25Db250ZXh0TWVudTogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIHRlID0gaW5wdXQudGV4dGFyZWE7XG4gICAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKSwgc2Nyb2xsUG9zID0gZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgICBpZiAoIXBvcyB8fCBwcmVzdG8pIHJldHVybjsgLy8gT3BlcmEgaXMgZGlmZmljdWx0LlxuXG4gICAgICAvLyBSZXNldCB0aGUgY3VycmVudCB0ZXh0IHNlbGVjdGlvbiBvbmx5IGlmIHRoZSBjbGljayBpcyBkb25lIG91dHNpZGUgb2YgdGhlIHNlbGVjdGlvblxuICAgICAgLy8gYW5kICdyZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnUnIG9wdGlvbiBpcyB0cnVlLlxuICAgICAgdmFyIHJlc2V0ID0gY20ub3B0aW9ucy5yZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnU7XG4gICAgICBpZiAocmVzZXQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID09IC0xKVxuICAgICAgICBvcGVyYXRpb24oY20sIHNldFNlbGVjdGlvbikoY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zKSwgc2VsX2RvbnRTY3JvbGwpO1xuXG4gICAgICB2YXIgb2xkQ1NTID0gdGUuc3R5bGUuY3NzVGV4dCwgb2xkV3JhcHBlckNTUyA9IGlucHV0LndyYXBwZXIuc3R5bGUuY3NzVGV4dDtcbiAgICAgIGlucHV0LndyYXBwZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGFic29sdXRlXCJcbiAgICAgIHZhciB3cmFwcGVyQm94ID0gaW5wdXQud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgdGUuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyB0b3A6IFwiICsgKGUuY2xpZW50WSAtIHdyYXBwZXJCb3gudG9wIC0gNSkgK1xuICAgICAgICBcInB4OyBsZWZ0OiBcIiArIChlLmNsaWVudFggLSB3cmFwcGVyQm94LmxlZnQgLSA1KSArIFwicHg7IHotaW5kZXg6IDEwMDA7IGJhY2tncm91bmQ6IFwiICtcbiAgICAgICAgKGllID8gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSlcIiA6IFwidHJhbnNwYXJlbnRcIikgK1xuICAgICAgICBcIjsgb3V0bGluZTogbm9uZTsgYm9yZGVyLXdpZHRoOiAwOyBvdXRsaW5lOiBub25lOyBvdmVyZmxvdzogaGlkZGVuOyBvcGFjaXR5OiAuMDU7IGZpbHRlcjogYWxwaGEob3BhY2l0eT01KTtcIjtcbiAgICAgIGlmICh3ZWJraXQpIHZhciBvbGRTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7IC8vIFdvcmsgYXJvdW5kIENocm9tZSBpc3N1ZSAoIzI3MTIpXG4gICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICBpZiAod2Via2l0KSB3aW5kb3cuc2Nyb2xsVG8obnVsbCwgb2xkU2Nyb2xsWSk7XG4gICAgICBkaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAvLyBBZGRzIFwiU2VsZWN0IGFsbFwiIHRvIGNvbnRleHQgbWVudSBpbiBGRlxuICAgICAgaWYgKCFjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB0ZS52YWx1ZSA9IGlucHV0LnByZXZJbnB1dCA9IFwiIFwiO1xuICAgICAgaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nID0gdHJ1ZTtcbiAgICAgIGRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgPSBjbS5kb2Muc2VsO1xuICAgICAgY2xlYXJUaW1lb3V0KGRpc3BsYXkuZGV0ZWN0aW5nU2VsZWN0QWxsKTtcblxuICAgICAgLy8gU2VsZWN0LWFsbCB3aWxsIGJlIGdyZXllZCBvdXQgaWYgdGhlcmUncyBub3RoaW5nIHRvIHNlbGVjdCwgc29cbiAgICAgIC8vIHRoaXMgYWRkcyBhIHplcm8td2lkdGggc3BhY2Ugc28gdGhhdCB3ZSBjYW4gbGF0ZXIgY2hlY2sgd2hldGhlclxuICAgICAgLy8gaXQgZ290IHNlbGVjdGVkLlxuICAgICAgZnVuY3Rpb24gcHJlcGFyZVNlbGVjdEFsbEhhY2soKSB7XG4gICAgICAgIGlmICh0ZS5zZWxlY3Rpb25TdGFydCAhPSBudWxsKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gY20uc29tZXRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgICAgICB2YXIgZXh0dmFsID0gXCJcXHUyMDBiXCIgKyAoc2VsZWN0ZWQgPyB0ZS52YWx1ZSA6IFwiXCIpO1xuICAgICAgICAgIHRlLnZhbHVlID0gXCJcXHUyMWRhXCI7IC8vIFVzZWQgdG8gY2F0Y2ggY29udGV4dC1tZW51IHVuZG9cbiAgICAgICAgICB0ZS52YWx1ZSA9IGV4dHZhbDtcbiAgICAgICAgICBpbnB1dC5wcmV2SW5wdXQgPSBzZWxlY3RlZCA/IFwiXCIgOiBcIlxcdTIwMGJcIjtcbiAgICAgICAgICB0ZS5zZWxlY3Rpb25TdGFydCA9IDE7IHRlLnNlbGVjdGlvbkVuZCA9IGV4dHZhbC5sZW5ndGg7XG4gICAgICAgICAgLy8gUmUtc2V0IHRoaXMsIGluIGNhc2Ugc29tZSBvdGhlciBoYW5kbGVyIHRvdWNoZWQgdGhlXG4gICAgICAgICAgLy8gc2VsZWN0aW9uIGluIHRoZSBtZWFudGltZS5cbiAgICAgICAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gY20uZG9jLnNlbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmVoaWRlKCkge1xuICAgICAgICBpbnB1dC5jb250ZXh0TWVudVBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgaW5wdXQud3JhcHBlci5zdHlsZS5jc3NUZXh0ID0gb2xkV3JhcHBlckNTU1xuICAgICAgICB0ZS5zdHlsZS5jc3NUZXh0ID0gb2xkQ1NTO1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIGRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AoZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgPSBzY3JvbGxQb3MpO1xuXG4gICAgICAgIC8vIFRyeSB0byBkZXRlY3QgdGhlIHVzZXIgY2hvb3Npbmcgc2VsZWN0LWFsbFxuICAgICAgICBpZiAodGUuc2VsZWN0aW9uU3RhcnQgIT0gbnVsbCkge1xuICAgICAgICAgIGlmICghaWUgfHwgKGllICYmIGllX3ZlcnNpb24gPCA5KSkgcHJlcGFyZVNlbGVjdEFsbEhhY2soKTtcbiAgICAgICAgICB2YXIgaSA9IDAsIHBvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID09IGNtLmRvYy5zZWwgJiYgdGUuc2VsZWN0aW9uU3RhcnQgPT0gMCAmJlxuICAgICAgICAgICAgICAgIHRlLnNlbGVjdGlvbkVuZCA+IDAgJiYgaW5wdXQucHJldklucHV0ID09IFwiXFx1MjAwYlwiKVxuICAgICAgICAgICAgICBvcGVyYXRpb24oY20sIGNvbW1hbmRzLnNlbGVjdEFsbCkoY20pO1xuICAgICAgICAgICAgZWxzZSBpZiAoaSsrIDwgMTApIGRpc3BsYXkuZGV0ZWN0aW5nU2VsZWN0QWxsID0gc2V0VGltZW91dChwb2xsLCA1MDApO1xuICAgICAgICAgICAgZWxzZSBkaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgMjAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSBwcmVwYXJlU2VsZWN0QWxsSGFjaygpO1xuICAgICAgaWYgKGNhcHR1cmVSaWdodENsaWNrKSB7XG4gICAgICAgIGVfc3RvcChlKTtcbiAgICAgICAgdmFyIG1vdXNldXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBvZmYod2luZG93LCBcIm1vdXNldXBcIiwgbW91c2V1cCk7XG4gICAgICAgICAgc2V0VGltZW91dChyZWhpZGUsIDIwKTtcbiAgICAgICAgfTtcbiAgICAgICAgb24od2luZG93LCBcIm1vdXNldXBcIiwgbW91c2V1cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KHJlaGlkZSwgNTApO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZWFkT25seUNoYW5nZWQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKCF2YWwpIHRoaXMucmVzZXQoKTtcbiAgICB9LFxuXG4gICAgc2V0VW5lZGl0YWJsZTogbm90aGluZyxcblxuICAgIG5lZWRzQ29udGVudEF0dHJpYnV0ZTogZmFsc2VcbiAgfSwgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUpO1xuXG4gIC8vIENPTlRFTlRFRElUQUJMRSBJTlBVVCBTVFlMRVxuXG4gIGZ1bmN0aW9uIENvbnRlbnRFZGl0YWJsZUlucHV0KGNtKSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHRoaXMubGFzdEFuY2hvck5vZGUgPSB0aGlzLmxhc3RBbmNob3JPZmZzZXQgPSB0aGlzLmxhc3RGb2N1c05vZGUgPSB0aGlzLmxhc3RGb2N1c09mZnNldCA9IG51bGw7XG4gICAgdGhpcy5wb2xsaW5nID0gbmV3IERlbGF5ZWQoKTtcbiAgICB0aGlzLmdyYWNlUGVyaW9kID0gZmFsc2U7XG4gIH1cblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUgPSBjb3B5T2JqKHtcbiAgICBpbml0OiBmdW5jdGlvbihkaXNwbGF5KSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLCBjbSA9IGlucHV0LmNtO1xuICAgICAgdmFyIGRpdiA9IGlucHV0LmRpdiA9IGRpc3BsYXkubGluZURpdjtcbiAgICAgIGRpc2FibGVCcm93c2VyTWFnaWMoZGl2KTtcblxuICAgICAgb24oZGl2LCBcInBhc3RlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIGhhbmRsZVBhc3RlKGUsIGNtKTtcbiAgICAgIH0pXG5cbiAgICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBlLmRhdGE7XG4gICAgICAgIGlucHV0LmNvbXBvc2luZyA9IHtzZWw6IGNtLmRvYy5zZWwsIGRhdGE6IGRhdGEsIHN0YXJ0RGF0YTogZGF0YX07XG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuICAgICAgICB2YXIgcHJpbSA9IGNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgICB2YXIgbGluZSA9IGNtLmdldExpbmUocHJpbS5oZWFkLmxpbmUpO1xuICAgICAgICB2YXIgZm91bmQgPSBsaW5lLmluZGV4T2YoZGF0YSwgTWF0aC5tYXgoMCwgcHJpbS5oZWFkLmNoIC0gZGF0YS5sZW5ndGgpKTtcbiAgICAgICAgaWYgKGZvdW5kID4gLTEgJiYgZm91bmQgPD0gcHJpbS5oZWFkLmNoKVxuICAgICAgICAgIGlucHV0LmNvbXBvc2luZy5zZWwgPSBzaW1wbGVTZWxlY3Rpb24oUG9zKHByaW0uaGVhZC5saW5lLCBmb3VuZCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3MocHJpbS5oZWFkLmxpbmUsIGZvdW5kICsgZGF0YS5sZW5ndGgpKTtcbiAgICAgIH0pO1xuICAgICAgb24oZGl2LCBcImNvbXBvc2l0aW9udXBkYXRlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nLmRhdGEgPSBlLmRhdGE7XG4gICAgICB9KTtcbiAgICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbmVuZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBvdXJzID0gaW5wdXQuY29tcG9zaW5nO1xuICAgICAgICBpZiAoIW91cnMpIHJldHVybjtcbiAgICAgICAgaWYgKGUuZGF0YSAhPSBvdXJzLnN0YXJ0RGF0YSAmJiAhL1xcdTIwMGIvLnRlc3QoZS5kYXRhKSlcbiAgICAgICAgICBvdXJzLmRhdGEgPSBlLmRhdGE7XG4gICAgICAgIC8vIE5lZWQgYSBzbWFsbCBkZWxheSB0byBwcmV2ZW50IG90aGVyIGNvZGUgKGlucHV0IGV2ZW50LFxuICAgICAgICAvLyBzZWxlY3Rpb24gcG9sbGluZykgZnJvbSBkb2luZyBkYW1hZ2Ugd2hlbiBmaXJlZCByaWdodCBhZnRlclxuICAgICAgICAvLyBjb21wb3NpdGlvbmVuZC5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIW91cnMuaGFuZGxlZClcbiAgICAgICAgICAgIGlucHV0LmFwcGx5Q29tcG9zaXRpb24ob3Vycyk7XG4gICAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZyA9PSBvdXJzKVxuICAgICAgICAgICAgaW5wdXQuY29tcG9zaW5nID0gbnVsbDtcbiAgICAgICAgfSwgNTApO1xuICAgICAgfSk7XG5cbiAgICAgIG9uKGRpdiwgXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpbnB1dC5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7XG4gICAgICB9KTtcblxuICAgICAgb24oZGl2LCBcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaW5wdXQuY29tcG9zaW5nKSByZXR1cm47XG4gICAgICAgIGlmIChjbS5pc1JlYWRPbmx5KCkgfHwgIWlucHV0LnBvbGxDb250ZW50KCkpXG4gICAgICAgICAgcnVuSW5PcChpbnB1dC5jbSwgZnVuY3Rpb24oKSB7cmVnQ2hhbmdlKGNtKTt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBvbkNvcHlDdXQoZSkge1xuICAgICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSByZXR1cm5cbiAgICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgICBsYXN0Q29waWVkID0gY20uZ2V0U2VsZWN0aW9ucygpO1xuICAgICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTtcbiAgICAgICAgfSBlbHNlIGlmICghY20ub3B0aW9ucy5saW5lV2lzZUNvcHlDdXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHJhbmdlcyA9IGNvcHlhYmxlUmFuZ2VzKGNtKTtcbiAgICAgICAgICBsYXN0Q29waWVkID0gcmFuZ2VzLnRleHQ7XG4gICAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSB7XG4gICAgICAgICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNtLnNldFNlbGVjdGlvbnMocmFuZ2VzLnJhbmdlcywgMCwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXCIsIG51bGwsIFwiY3V0XCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlPUyBleHBvc2VzIHRoZSBjbGlwYm9hcmQgQVBJLCBidXQgc2VlbXMgdG8gZGlzY2FyZCBjb250ZW50IGluc2VydGVkIGludG8gaXRcbiAgICAgICAgaWYgKGUuY2xpcGJvYXJkRGF0YSAmJiAhaW9zKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuY2xpcGJvYXJkRGF0YS5jbGVhckRhdGEoKTtcbiAgICAgICAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgbGFzdENvcGllZC5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPbGQtZmFzaGlvbmVkIGJyaWVmbHktZm9jdXMtYS10ZXh0YXJlYSBoYWNrXG4gICAgICAgICAgdmFyIGtsdWRnZSA9IGhpZGRlblRleHRhcmVhKCksIHRlID0ga2x1ZGdlLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuaW5zZXJ0QmVmb3JlKGtsdWRnZSwgY20uZGlzcGxheS5saW5lU3BhY2UuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgdGUudmFsdWUgPSBsYXN0Q29waWVkLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgdmFyIGhhZEZvY3VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICBzZWxlY3RJbnB1dCh0ZSk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLnJlbW92ZUNoaWxkKGtsdWRnZSk7XG4gICAgICAgICAgICBoYWRGb2N1cy5mb2N1cygpO1xuICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb24oZGl2LCBcImNvcHlcIiwgb25Db3B5Q3V0KTtcbiAgICAgIG9uKGRpdiwgXCJjdXRcIiwgb25Db3B5Q3V0KTtcbiAgICB9LFxuXG4gICAgcHJlcGFyZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gcHJlcGFyZVNlbGVjdGlvbih0aGlzLmNtLCBmYWxzZSk7XG4gICAgICByZXN1bHQuZm9jdXMgPSB0aGlzLmNtLnN0YXRlLmZvY3VzZWQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBzaG93U2VsZWN0aW9uOiBmdW5jdGlvbihpbmZvKSB7XG4gICAgICBpZiAoIWluZm8gfHwgIXRoaXMuY20uZGlzcGxheS52aWV3Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgaWYgKGluZm8uZm9jdXMpIHRoaXMuc2hvd1ByaW1hcnlTZWxlY3Rpb24oKTtcbiAgICAgIHRoaXMuc2hvd011bHRpcGxlU2VsZWN0aW9ucyhpbmZvKTtcbiAgICB9LFxuXG4gICAgc2hvd1ByaW1hcnlTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSwgcHJpbSA9IHRoaXMuY20uZG9jLnNlbC5wcmltYXJ5KCk7XG4gICAgICB2YXIgY3VyQW5jaG9yID0gZG9tVG9Qb3ModGhpcy5jbSwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgdmFyIGN1ckZvY3VzID0gZG9tVG9Qb3ModGhpcy5jbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgIGlmIChjdXJBbmNob3IgJiYgIWN1ckFuY2hvci5iYWQgJiYgY3VyRm9jdXMgJiYgIWN1ckZvY3VzLmJhZCAmJlxuICAgICAgICAgIGNtcChtaW5Qb3MoY3VyQW5jaG9yLCBjdXJGb2N1cyksIHByaW0uZnJvbSgpKSA9PSAwICYmXG4gICAgICAgICAgY21wKG1heFBvcyhjdXJBbmNob3IsIGN1ckZvY3VzKSwgcHJpbS50bygpKSA9PSAwKVxuICAgICAgICByZXR1cm47XG5cbiAgICAgIHZhciBzdGFydCA9IHBvc1RvRE9NKHRoaXMuY20sIHByaW0uZnJvbSgpKTtcbiAgICAgIHZhciBlbmQgPSBwb3NUb0RPTSh0aGlzLmNtLCBwcmltLnRvKCkpO1xuICAgICAgaWYgKCFzdGFydCAmJiAhZW5kKSByZXR1cm47XG5cbiAgICAgIHZhciB2aWV3ID0gdGhpcy5jbS5kaXNwbGF5LnZpZXc7XG4gICAgICB2YXIgb2xkID0gc2VsLnJhbmdlQ291bnQgJiYgc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgIHN0YXJ0ID0ge25vZGU6IHZpZXdbMF0ubWVhc3VyZS5tYXBbMl0sIG9mZnNldDogMH07XG4gICAgICB9IGVsc2UgaWYgKCFlbmQpIHsgLy8gRklYTUUgZGFuZ2Vyb3VzbHkgaGFja3lcbiAgICAgICAgdmFyIG1lYXN1cmUgPSB2aWV3W3ZpZXcubGVuZ3RoIC0gMV0ubWVhc3VyZTtcbiAgICAgICAgdmFyIG1hcCA9IG1lYXN1cmUubWFwcyA/IG1lYXN1cmUubWFwc1ttZWFzdXJlLm1hcHMubGVuZ3RoIC0gMV0gOiBtZWFzdXJlLm1hcDtcbiAgICAgICAgZW5kID0ge25vZGU6IG1hcFttYXAubGVuZ3RoIC0gMV0sIG9mZnNldDogbWFwW21hcC5sZW5ndGggLSAyXSAtIG1hcFttYXAubGVuZ3RoIC0gM119O1xuICAgICAgfVxuXG4gICAgICB0cnkgeyB2YXIgcm5nID0gcmFuZ2Uoc3RhcnQubm9kZSwgc3RhcnQub2Zmc2V0LCBlbmQub2Zmc2V0LCBlbmQubm9kZSk7IH1cbiAgICAgIGNhdGNoKGUpIHt9IC8vIE91ciBtb2RlbCBvZiB0aGUgRE9NIG1pZ2h0IGJlIG91dGRhdGVkLCBpbiB3aGljaCBjYXNlIHRoZSByYW5nZSB3ZSB0cnkgdG8gc2V0IGNhbiBiZSBpbXBvc3NpYmxlXG4gICAgICBpZiAocm5nKSB7XG4gICAgICAgIGlmICghZ2Vja28gJiYgdGhpcy5jbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgICAgc2VsLmNvbGxhcHNlKHN0YXJ0Lm5vZGUsIHN0YXJ0Lm9mZnNldCk7XG4gICAgICAgICAgaWYgKCFybmcuY29sbGFwc2VkKSBzZWwuYWRkUmFuZ2Uocm5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZCAmJiBzZWwuYW5jaG9yTm9kZSA9PSBudWxsKSBzZWwuYWRkUmFuZ2Uob2xkKTtcbiAgICAgICAgZWxzZSBpZiAoZ2Vja28pIHRoaXMuc3RhcnRHcmFjZVBlcmlvZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW1lbWJlclNlbGVjdGlvbigpO1xuICAgIH0sXG5cbiAgICBzdGFydEdyYWNlUGVyaW9kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXM7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5ncmFjZVBlcmlvZCk7XG4gICAgICB0aGlzLmdyYWNlUGVyaW9kID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5wdXQuZ3JhY2VQZXJpb2QgPSBmYWxzZTtcbiAgICAgICAgaWYgKGlucHV0LnNlbGVjdGlvbkNoYW5nZWQoKSlcbiAgICAgICAgICBpbnB1dC5jbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7IGlucHV0LmNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlOyB9KTtcbiAgICAgIH0sIDIwKTtcbiAgICB9LFxuXG4gICAgc2hvd011bHRpcGxlU2VsZWN0aW9uczogZnVuY3Rpb24oaW5mbykge1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQodGhpcy5jbS5kaXNwbGF5LmN1cnNvckRpdiwgaW5mby5jdXJzb3JzKTtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5zZWxlY3Rpb25EaXYsIGluZm8uc2VsZWN0aW9uKTtcbiAgICB9LFxuXG4gICAgcmVtZW1iZXJTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHRoaXMubGFzdEFuY2hvck5vZGUgPSBzZWwuYW5jaG9yTm9kZTsgdGhpcy5sYXN0QW5jaG9yT2Zmc2V0ID0gc2VsLmFuY2hvck9mZnNldDtcbiAgICAgIHRoaXMubGFzdEZvY3VzTm9kZSA9IHNlbC5mb2N1c05vZGU7IHRoaXMubGFzdEZvY3VzT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0O1xuICAgIH0sXG5cbiAgICBzZWxlY3Rpb25JbkVkaXRvcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgaWYgKCFzZWwucmFuZ2VDb3VudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgdmFyIG5vZGUgPSBzZWwuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtcbiAgICAgIHJldHVybiBjb250YWlucyh0aGlzLmRpdiwgbm9kZSk7XG4gICAgfSxcblxuICAgIGZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkgIT0gXCJub2N1cnNvclwiKSB0aGlzLmRpdi5mb2N1cygpO1xuICAgIH0sXG4gICAgYmx1cjogZnVuY3Rpb24oKSB7IHRoaXMuZGl2LmJsdXIoKTsgfSxcbiAgICBnZXRGaWVsZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRpdjsgfSxcblxuICAgIHN1cHBvcnRzVG91Y2g6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcblxuICAgIHJlY2VpdmVkRm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcztcbiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkpXG4gICAgICAgIHRoaXMucG9sbFNlbGVjdGlvbigpO1xuICAgICAgZWxzZVxuICAgICAgICBydW5Jbk9wKHRoaXMuY20sIGZ1bmN0aW9uKCkgeyBpbnB1dC5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHBvbGwoKSB7XG4gICAgICAgIGlmIChpbnB1dC5jbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgICAgaW5wdXQucG9sbFNlbGVjdGlvbigpO1xuICAgICAgICAgIGlucHV0LnBvbGxpbmcuc2V0KGlucHV0LmNtLm9wdGlvbnMucG9sbEludGVydmFsLCBwb2xsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5wb2xsaW5nLnNldCh0aGlzLmNtLm9wdGlvbnMucG9sbEludGVydmFsLCBwb2xsKTtcbiAgICB9LFxuXG4gICAgc2VsZWN0aW9uQ2hhbmdlZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHNlbC5hbmNob3JOb2RlICE9IHRoaXMubGFzdEFuY2hvck5vZGUgfHwgc2VsLmFuY2hvck9mZnNldCAhPSB0aGlzLmxhc3RBbmNob3JPZmZzZXQgfHxcbiAgICAgICAgc2VsLmZvY3VzTm9kZSAhPSB0aGlzLmxhc3RGb2N1c05vZGUgfHwgc2VsLmZvY3VzT2Zmc2V0ICE9IHRoaXMubGFzdEZvY3VzT2Zmc2V0O1xuICAgIH0sXG5cbiAgICBwb2xsU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5jb21wb3NpbmcgJiYgIXRoaXMuZ3JhY2VQZXJpb2QgJiYgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkKCkpIHtcbiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSwgY20gPSB0aGlzLmNtO1xuICAgICAgICB0aGlzLnJlbWVtYmVyU2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciBhbmNob3IgPSBkb21Ub1BvcyhjbSwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgICB2YXIgaGVhZCA9IGRvbVRvUG9zKGNtLCBzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpO1xuICAgICAgICBpZiAoYW5jaG9yICYmIGhlYWQpIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbihjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgICAgICAgaWYgKGFuY2hvci5iYWQgfHwgaGVhZC5iYWQpIGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcG9sbENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIHNlbCA9IGNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgdmFyIGZyb20gPSBzZWwuZnJvbSgpLCB0byA9IHNlbC50bygpO1xuICAgICAgaWYgKGZyb20ubGluZSA8IGRpc3BsYXkudmlld0Zyb20gfHwgdG8ubGluZSA+IGRpc3BsYXkudmlld1RvIC0gMSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICB2YXIgZnJvbUluZGV4O1xuICAgICAgaWYgKGZyb20ubGluZSA9PSBkaXNwbGF5LnZpZXdGcm9tIHx8IChmcm9tSW5kZXggPSBmaW5kVmlld0luZGV4KGNtLCBmcm9tLmxpbmUpKSA9PSAwKSB7XG4gICAgICAgIHZhciBmcm9tTGluZSA9IGxpbmVObyhkaXNwbGF5LnZpZXdbMF0ubGluZSk7XG4gICAgICAgIHZhciBmcm9tTm9kZSA9IGRpc3BsYXkudmlld1swXS5ub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZyb21MaW5lID0gbGluZU5vKGRpc3BsYXkudmlld1tmcm9tSW5kZXhdLmxpbmUpO1xuICAgICAgICB2YXIgZnJvbU5vZGUgPSBkaXNwbGF5LnZpZXdbZnJvbUluZGV4IC0gMV0ubm9kZS5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICAgIHZhciB0b0luZGV4ID0gZmluZFZpZXdJbmRleChjbSwgdG8ubGluZSk7XG4gICAgICBpZiAodG9JbmRleCA9PSBkaXNwbGF5LnZpZXcubGVuZ3RoIC0gMSkge1xuICAgICAgICB2YXIgdG9MaW5lID0gZGlzcGxheS52aWV3VG8gLSAxO1xuICAgICAgICB2YXIgdG9Ob2RlID0gZGlzcGxheS5saW5lRGl2Lmxhc3RDaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0b0xpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3W3RvSW5kZXggKyAxXS5saW5lKSAtIDE7XG4gICAgICAgIHZhciB0b05vZGUgPSBkaXNwbGF5LnZpZXdbdG9JbmRleCArIDFdLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3VGV4dCA9IGNtLmRvYy5zcGxpdExpbmVzKGRvbVRleHRCZXR3ZWVuKGNtLCBmcm9tTm9kZSwgdG9Ob2RlLCBmcm9tTGluZSwgdG9MaW5lKSk7XG4gICAgICB2YXIgb2xkVGV4dCA9IGdldEJldHdlZW4oY20uZG9jLCBQb3MoZnJvbUxpbmUsIDApLCBQb3ModG9MaW5lLCBnZXRMaW5lKGNtLmRvYywgdG9MaW5lKS50ZXh0Lmxlbmd0aCkpO1xuICAgICAgd2hpbGUgKG5ld1RleHQubGVuZ3RoID4gMSAmJiBvbGRUZXh0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaWYgKGxzdChuZXdUZXh0KSA9PSBsc3Qob2xkVGV4dCkpIHsgbmV3VGV4dC5wb3AoKTsgb2xkVGV4dC5wb3AoKTsgdG9MaW5lLS07IH1cbiAgICAgICAgZWxzZSBpZiAobmV3VGV4dFswXSA9PSBvbGRUZXh0WzBdKSB7IG5ld1RleHQuc2hpZnQoKTsgb2xkVGV4dC5zaGlmdCgpOyBmcm9tTGluZSsrOyB9XG4gICAgICAgIGVsc2UgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHZhciBjdXRGcm9udCA9IDAsIGN1dEVuZCA9IDA7XG4gICAgICB2YXIgbmV3VG9wID0gbmV3VGV4dFswXSwgb2xkVG9wID0gb2xkVGV4dFswXSwgbWF4Q3V0RnJvbnQgPSBNYXRoLm1pbihuZXdUb3AubGVuZ3RoLCBvbGRUb3AubGVuZ3RoKTtcbiAgICAgIHdoaWxlIChjdXRGcm9udCA8IG1heEN1dEZyb250ICYmIG5ld1RvcC5jaGFyQ29kZUF0KGN1dEZyb250KSA9PSBvbGRUb3AuY2hhckNvZGVBdChjdXRGcm9udCkpXG4gICAgICAgICsrY3V0RnJvbnQ7XG4gICAgICB2YXIgbmV3Qm90ID0gbHN0KG5ld1RleHQpLCBvbGRCb3QgPSBsc3Qob2xkVGV4dCk7XG4gICAgICB2YXIgbWF4Q3V0RW5kID0gTWF0aC5taW4obmV3Qm90Lmxlbmd0aCAtIChuZXdUZXh0Lmxlbmd0aCA9PSAxID8gY3V0RnJvbnQgOiAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRCb3QubGVuZ3RoIC0gKG9sZFRleHQubGVuZ3RoID09IDEgPyBjdXRGcm9udCA6IDApKTtcbiAgICAgIHdoaWxlIChjdXRFbmQgPCBtYXhDdXRFbmQgJiZcbiAgICAgICAgICAgICBuZXdCb3QuY2hhckNvZGVBdChuZXdCb3QubGVuZ3RoIC0gY3V0RW5kIC0gMSkgPT0gb2xkQm90LmNoYXJDb2RlQXQob2xkQm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpKVxuICAgICAgICArK2N1dEVuZDtcblxuICAgICAgbmV3VGV4dFtuZXdUZXh0Lmxlbmd0aCAtIDFdID0gbmV3Qm90LnNsaWNlKDAsIG5ld0JvdC5sZW5ndGggLSBjdXRFbmQpO1xuICAgICAgbmV3VGV4dFswXSA9IG5ld1RleHRbMF0uc2xpY2UoY3V0RnJvbnQpO1xuXG4gICAgICB2YXIgY2hGcm9tID0gUG9zKGZyb21MaW5lLCBjdXRGcm9udCk7XG4gICAgICB2YXIgY2hUbyA9IFBvcyh0b0xpbmUsIG9sZFRleHQubGVuZ3RoID8gbHN0KG9sZFRleHQpLmxlbmd0aCAtIGN1dEVuZCA6IDApO1xuICAgICAgaWYgKG5ld1RleHQubGVuZ3RoID4gMSB8fCBuZXdUZXh0WzBdIHx8IGNtcChjaEZyb20sIGNoVG8pKSB7XG4gICAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIG5ld1RleHQsIGNoRnJvbSwgY2hUbywgXCIraW5wdXRcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbnN1cmVQb2xsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7XG4gICAgfSxcbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmZvcmNlQ29tcG9zaXRpb25FbmQoKTtcbiAgICB9LFxuICAgIGZvcmNlQ29tcG9zaXRpb25FbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLmNvbXBvc2luZyB8fCB0aGlzLmNvbXBvc2luZy5oYW5kbGVkKSByZXR1cm47XG4gICAgICB0aGlzLmFwcGx5Q29tcG9zaXRpb24odGhpcy5jb21wb3NpbmcpO1xuICAgICAgdGhpcy5jb21wb3NpbmcuaGFuZGxlZCA9IHRydWU7XG4gICAgICB0aGlzLmRpdi5ibHVyKCk7XG4gICAgICB0aGlzLmRpdi5mb2N1cygpO1xuICAgIH0sXG4gICAgYXBwbHlDb21wb3NpdGlvbjogZnVuY3Rpb24oY29tcG9zaW5nKSB7XG4gICAgICBpZiAodGhpcy5jbS5pc1JlYWRPbmx5KCkpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLmNtLCByZWdDaGFuZ2UpKHRoaXMuY20pXG4gICAgICBlbHNlIGlmIChjb21wb3NpbmcuZGF0YSAmJiBjb21wb3NpbmcuZGF0YSAhPSBjb21wb3Npbmcuc3RhcnREYXRhKVxuICAgICAgICBvcGVyYXRpb24odGhpcy5jbSwgYXBwbHlUZXh0SW5wdXQpKHRoaXMuY20sIGNvbXBvc2luZy5kYXRhLCAwLCBjb21wb3Npbmcuc2VsKTtcbiAgICB9LFxuXG4gICAgc2V0VW5lZGl0YWJsZTogZnVuY3Rpb24obm9kZSkge1xuICAgICAgbm9kZS5jb250ZW50RWRpdGFibGUgPSBcImZhbHNlXCJcbiAgICB9LFxuXG4gICAgb25LZXlQcmVzczogZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCF0aGlzLmNtLmlzUmVhZE9ubHkoKSlcbiAgICAgICAgb3BlcmF0aW9uKHRoaXMuY20sIGFwcGx5VGV4dElucHV0KSh0aGlzLmNtLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGUgPT0gbnVsbCA/IGUua2V5Q29kZSA6IGUuY2hhckNvZGUpLCAwKTtcbiAgICB9LFxuXG4gICAgcmVhZE9ubHlDaGFuZ2VkOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgIHRoaXMuZGl2LmNvbnRlbnRFZGl0YWJsZSA9IFN0cmluZyh2YWwgIT0gXCJub2N1cnNvclwiKVxuICAgIH0sXG5cbiAgICBvbkNvbnRleHRNZW51OiBub3RoaW5nLFxuICAgIHJlc2V0UG9zaXRpb246IG5vdGhpbmcsXG5cbiAgICBuZWVkc0NvbnRlbnRBdHRyaWJ1dGU6IHRydWVcbiAgfSwgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlKTtcblxuICBmdW5jdGlvbiBwb3NUb0RPTShjbSwgcG9zKSB7XG4gICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIHBvcy5saW5lKTtcbiAgICBpZiAoIXZpZXcgfHwgdmlldy5oaWRkZW4pIHJldHVybiBudWxsO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICB2YXIgaW5mbyA9IG1hcEZyb21MaW5lVmlldyh2aWV3LCBsaW5lLCBwb3MubGluZSk7XG5cbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKSwgc2lkZSA9IFwibGVmdFwiO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgdmFyIHBhcnRQb3MgPSBnZXRCaWRpUGFydEF0KG9yZGVyLCBwb3MuY2gpO1xuICAgICAgc2lkZSA9IHBhcnRQb3MgJSAyID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKGluZm8ubWFwLCBwb3MuY2gsIHNpZGUpO1xuICAgIHJlc3VsdC5vZmZzZXQgPSByZXN1bHQuY29sbGFwc2UgPT0gXCJyaWdodFwiID8gcmVzdWx0LmVuZCA6IHJlc3VsdC5zdGFydDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gYmFkUG9zKHBvcywgYmFkKSB7IGlmIChiYWQpIHBvcy5iYWQgPSB0cnVlOyByZXR1cm4gcG9zOyB9XG5cbiAgZnVuY3Rpb24gZG9tVG9Qb3MoY20sIG5vZGUsIG9mZnNldCkge1xuICAgIHZhciBsaW5lTm9kZTtcbiAgICBpZiAobm9kZSA9PSBjbS5kaXNwbGF5LmxpbmVEaXYpIHtcbiAgICAgIGxpbmVOb2RlID0gY20uZGlzcGxheS5saW5lRGl2LmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgIGlmICghbGluZU5vZGUpIHJldHVybiBiYWRQb3MoY20uY2xpcFBvcyhQb3MoY20uZGlzcGxheS52aWV3VG8gLSAxKSksIHRydWUpO1xuICAgICAgbm9kZSA9IG51bGw7IG9mZnNldCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGluZU5vZGUgPSBub2RlOzsgbGluZU5vZGUgPSBsaW5lTm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmICghbGluZU5vZGUgfHwgbGluZU5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGxpbmVOb2RlLnBhcmVudE5vZGUgJiYgbGluZU5vZGUucGFyZW50Tm9kZSA9PSBjbS5kaXNwbGF5LmxpbmVEaXYpIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gY20uZGlzcGxheS52aWV3W2ldO1xuICAgICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZU5vZGUpXG4gICAgICAgIHJldHVybiBsb2NhdGVOb2RlSW5MaW5lVmlldyhsaW5lVmlldywgbm9kZSwgb2Zmc2V0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2NhdGVOb2RlSW5MaW5lVmlldyhsaW5lVmlldywgbm9kZSwgb2Zmc2V0KSB7XG4gICAgdmFyIHdyYXBwZXIgPSBsaW5lVmlldy50ZXh0LmZpcnN0Q2hpbGQsIGJhZCA9IGZhbHNlO1xuICAgIGlmICghbm9kZSB8fCAhY29udGFpbnMod3JhcHBlciwgbm9kZSkpIHJldHVybiBiYWRQb3MoUG9zKGxpbmVObyhsaW5lVmlldy5saW5lKSwgMCksIHRydWUpO1xuICAgIGlmIChub2RlID09IHdyYXBwZXIpIHtcbiAgICAgIGJhZCA9IHRydWU7XG4gICAgICBub2RlID0gd3JhcHBlci5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICBvZmZzZXQgPSAwO1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIHZhciBsaW5lID0gbGluZVZpZXcucmVzdCA/IGxzdChsaW5lVmlldy5yZXN0KSA6IGxpbmVWaWV3LmxpbmU7XG4gICAgICAgIHJldHVybiBiYWRQb3MoUG9zKGxpbmVObyhsaW5lKSwgbGluZS50ZXh0Lmxlbmd0aCksIGJhZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRleHROb2RlID0gbm9kZS5ub2RlVHlwZSA9PSAzID8gbm9kZSA6IG51bGwsIHRvcE5vZGUgPSBub2RlO1xuICAgIGlmICghdGV4dE5vZGUgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA9PSAxICYmIG5vZGUuZmlyc3RDaGlsZC5ub2RlVHlwZSA9PSAzKSB7XG4gICAgICB0ZXh0Tm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgIGlmIChvZmZzZXQpIG9mZnNldCA9IHRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGg7XG4gICAgfVxuICAgIHdoaWxlICh0b3BOb2RlLnBhcmVudE5vZGUgIT0gd3JhcHBlcikgdG9wTm9kZSA9IHRvcE5vZGUucGFyZW50Tm9kZTtcbiAgICB2YXIgbWVhc3VyZSA9IGxpbmVWaWV3Lm1lYXN1cmUsIG1hcHMgPSBtZWFzdXJlLm1hcHM7XG5cbiAgICBmdW5jdGlvbiBmaW5kKHRleHROb2RlLCB0b3BOb2RlLCBvZmZzZXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAtMTsgaSA8IChtYXBzID8gbWFwcy5sZW5ndGggOiAwKTsgaSsrKSB7XG4gICAgICAgIHZhciBtYXAgPSBpIDwgMCA/IG1lYXN1cmUubWFwIDogbWFwc1tpXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXAubGVuZ3RoOyBqICs9IDMpIHtcbiAgICAgICAgICB2YXIgY3VyTm9kZSA9IG1hcFtqICsgMl07XG4gICAgICAgICAgaWYgKGN1ck5vZGUgPT0gdGV4dE5vZGUgfHwgY3VyTm9kZSA9PSB0b3BOb2RlKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVObyhpIDwgMCA/IGxpbmVWaWV3LmxpbmUgOiBsaW5lVmlldy5yZXN0W2ldKTtcbiAgICAgICAgICAgIHZhciBjaCA9IG1hcFtqXSArIG9mZnNldDtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPCAwIHx8IGN1ck5vZGUgIT0gdGV4dE5vZGUpIGNoID0gbWFwW2ogKyAob2Zmc2V0ID8gMSA6IDApXTtcbiAgICAgICAgICAgIHJldHVybiBQb3MobGluZSwgY2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgZm91bmQgPSBmaW5kKHRleHROb2RlLCB0b3BOb2RlLCBvZmZzZXQpO1xuICAgIGlmIChmb3VuZCkgcmV0dXJuIGJhZFBvcyhmb3VuZCwgYmFkKTtcblxuICAgIC8vIEZJWE1FIHRoaXMgaXMgYWxsIHJlYWxseSBzaGFreS4gbWlnaHQgaGFuZGxlIHRoZSBmZXcgY2FzZXMgaXQgbmVlZHMgdG8gaGFuZGxlLCBidXQgbGlrZWx5IHRvIGNhdXNlIHByb2JsZW1zXG4gICAgZm9yICh2YXIgYWZ0ZXIgPSB0b3BOb2RlLm5leHRTaWJsaW5nLCBkaXN0ID0gdGV4dE5vZGUgPyB0ZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoIC0gb2Zmc2V0IDogMDsgYWZ0ZXI7IGFmdGVyID0gYWZ0ZXIubmV4dFNpYmxpbmcpIHtcbiAgICAgIGZvdW5kID0gZmluZChhZnRlciwgYWZ0ZXIuZmlyc3RDaGlsZCwgMCk7XG4gICAgICBpZiAoZm91bmQpXG4gICAgICAgIHJldHVybiBiYWRQb3MoUG9zKGZvdW5kLmxpbmUsIGZvdW5kLmNoIC0gZGlzdCksIGJhZCk7XG4gICAgICBlbHNlXG4gICAgICAgIGRpc3QgKz0gYWZ0ZXIudGV4dENvbnRlbnQubGVuZ3RoO1xuICAgIH1cbiAgICBmb3IgKHZhciBiZWZvcmUgPSB0b3BOb2RlLnByZXZpb3VzU2libGluZywgZGlzdCA9IG9mZnNldDsgYmVmb3JlOyBiZWZvcmUgPSBiZWZvcmUucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICBmb3VuZCA9IGZpbmQoYmVmb3JlLCBiZWZvcmUuZmlyc3RDaGlsZCwgLTEpO1xuICAgICAgaWYgKGZvdW5kKVxuICAgICAgICByZXR1cm4gYmFkUG9zKFBvcyhmb3VuZC5saW5lLCBmb3VuZC5jaCArIGRpc3QpLCBiYWQpO1xuICAgICAgZWxzZVxuICAgICAgICBkaXN0ICs9IGFmdGVyLnRleHRDb250ZW50Lmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkb21UZXh0QmV0d2VlbihjbSwgZnJvbSwgdG8sIGZyb21MaW5lLCB0b0xpbmUpIHtcbiAgICB2YXIgdGV4dCA9IFwiXCIsIGNsb3NpbmcgPSBmYWxzZSwgbGluZVNlcCA9IGNtLmRvYy5saW5lU2VwYXJhdG9yKCk7XG4gICAgZnVuY3Rpb24gcmVjb2duaXplTWFya2VyKGlkKSB7IHJldHVybiBmdW5jdGlvbihtYXJrZXIpIHsgcmV0dXJuIG1hcmtlci5pZCA9PSBpZDsgfTsgfVxuICAgIGZ1bmN0aW9uIHdhbGsobm9kZSkge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICB2YXIgY21UZXh0ID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIpO1xuICAgICAgICBpZiAoY21UZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoY21UZXh0ID09IFwiXCIpIGNtVGV4dCA9IG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSgvXFx1MjAwYi9nLCBcIlwiKTtcbiAgICAgICAgICB0ZXh0ICs9IGNtVGV4dDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcmtlcklEID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIiksIHJhbmdlO1xuICAgICAgICBpZiAobWFya2VySUQpIHtcbiAgICAgICAgICB2YXIgZm91bmQgPSBjbS5maW5kTWFya3MoUG9zKGZyb21MaW5lLCAwKSwgUG9zKHRvTGluZSArIDEsIDApLCByZWNvZ25pemVNYXJrZXIoK21hcmtlcklEKSk7XG4gICAgICAgICAgaWYgKGZvdW5kLmxlbmd0aCAmJiAocmFuZ2UgPSBmb3VuZFswXS5maW5kKCkpKVxuICAgICAgICAgICAgdGV4dCArPSBnZXRCZXR3ZWVuKGNtLmRvYywgcmFuZ2UuZnJvbSwgcmFuZ2UudG8pLmpvaW4obGluZVNlcCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSA9PSBcImZhbHNlXCIpIHJldHVybjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgd2Fsayhub2RlLmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICBpZiAoL14ocHJlfGRpdnxwKSQvaS50ZXN0KG5vZGUubm9kZU5hbWUpKVxuICAgICAgICAgIGNsb3NpbmcgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHtcbiAgICAgICAgdmFyIHZhbCA9IG5vZGUubm9kZVZhbHVlO1xuICAgICAgICBpZiAoIXZhbCkgcmV0dXJuO1xuICAgICAgICBpZiAoY2xvc2luZykge1xuICAgICAgICAgIHRleHQgKz0gbGluZVNlcDtcbiAgICAgICAgICBjbG9zaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgIHdhbGsoZnJvbSk7XG4gICAgICBpZiAoZnJvbSA9PSB0bykgYnJlYWs7XG4gICAgICBmcm9tID0gZnJvbS5uZXh0U2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBDb2RlTWlycm9yLmlucHV0U3R5bGVzID0ge1widGV4dGFyZWFcIjogVGV4dGFyZWFJbnB1dCwgXCJjb250ZW50ZWRpdGFibGVcIjogQ29udGVudEVkaXRhYmxlSW5wdXR9O1xuXG4gIC8vIFNFTEVDVElPTiAvIENVUlNPUlxuXG4gIC8vIFNlbGVjdGlvbiBvYmplY3RzIGFyZSBpbW11dGFibGUuIEEgbmV3IG9uZSBpcyBjcmVhdGVkIGV2ZXJ5IHRpbWVcbiAgLy8gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLiBBIHNlbGVjdGlvbiBpcyBvbmUgb3IgbW9yZSBub24tb3ZlcmxhcHBpbmdcbiAgLy8gKGFuZCBub24tdG91Y2hpbmcpIHJhbmdlcywgc29ydGVkLCBhbmQgYW4gaW50ZWdlciB0aGF0IGluZGljYXRlc1xuICAvLyB3aGljaCBvbmUgaXMgdGhlIHByaW1hcnkgc2VsZWN0aW9uICh0aGUgb25lIHRoYXQncyBzY3JvbGxlZCBpbnRvXG4gIC8vIHZpZXcsIHRoYXQgZ2V0Q3Vyc29yIHJldHVybnMsIGV0YykuXG4gIGZ1bmN0aW9uIFNlbGVjdGlvbihyYW5nZXMsIHByaW1JbmRleCkge1xuICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgIHRoaXMucHJpbUluZGV4ID0gcHJpbUluZGV4O1xuICB9XG5cbiAgU2VsZWN0aW9uLnByb3RvdHlwZSA9IHtcbiAgICBwcmltYXJ5OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucmFuZ2VzW3RoaXMucHJpbUluZGV4XTsgfSxcbiAgICBlcXVhbHM6IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIgPT0gdGhpcykgcmV0dXJuIHRydWU7XG4gICAgICBpZiAob3RoZXIucHJpbUluZGV4ICE9IHRoaXMucHJpbUluZGV4IHx8IG90aGVyLnJhbmdlcy5sZW5ndGggIT0gdGhpcy5yYW5nZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBoZXJlID0gdGhpcy5yYW5nZXNbaV0sIHRoZXJlID0gb3RoZXIucmFuZ2VzW2ldO1xuICAgICAgICBpZiAoY21wKGhlcmUuYW5jaG9yLCB0aGVyZS5hbmNob3IpICE9IDAgfHwgY21wKGhlcmUuaGVhZCwgdGhlcmUuaGVhZCkgIT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBkZWVwQ29weTogZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBvdXQgPSBbXSwgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGNvcHlQb3ModGhpcy5yYW5nZXNbaV0uYW5jaG9yKSwgY29weVBvcyh0aGlzLnJhbmdlc1tpXS5oZWFkKSk7XG4gICAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihvdXQsIHRoaXMucHJpbUluZGV4KTtcbiAgICB9LFxuICAgIHNvbWV0aGluZ1NlbGVjdGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICghdGhpcy5yYW5nZXNbaV0uZW1wdHkoKSkgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBjb250YWluczogZnVuY3Rpb24ocG9zLCBlbmQpIHtcbiAgICAgIGlmICghZW5kKSBlbmQgPSBwb3M7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMucmFuZ2VzW2ldO1xuICAgICAgICBpZiAoY21wKGVuZCwgcmFuZ2UuZnJvbSgpKSA+PSAwICYmIGNtcChwb3MsIHJhbmdlLnRvKCkpIDw9IDApXG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIFJhbmdlKGFuY2hvciwgaGVhZCkge1xuICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yOyB0aGlzLmhlYWQgPSBoZWFkO1xuICB9XG5cbiAgUmFuZ2UucHJvdG90eXBlID0ge1xuICAgIGZyb206IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWluUG9zKHRoaXMuYW5jaG9yLCB0aGlzLmhlYWQpOyB9LFxuICAgIHRvOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1heFBvcyh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKTsgfSxcbiAgICBlbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5oZWFkLmxpbmUgPT0gdGhpcy5hbmNob3IubGluZSAmJiB0aGlzLmhlYWQuY2ggPT0gdGhpcy5hbmNob3IuY2g7XG4gICAgfVxuICB9O1xuXG4gIC8vIFRha2UgYW4gdW5zb3J0ZWQsIHBvdGVudGlhbGx5IG92ZXJsYXBwaW5nIHNldCBvZiByYW5nZXMsIGFuZFxuICAvLyBidWlsZCBhIHNlbGVjdGlvbiBvdXQgb2YgaXQuICdDb25zdW1lcycgcmFuZ2VzIGFycmF5IChtb2RpZnlpbmdcbiAgLy8gaXQpLlxuICBmdW5jdGlvbiBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLCBwcmltSW5kZXgpIHtcbiAgICB2YXIgcHJpbSA9IHJhbmdlc1twcmltSW5kZXhdO1xuICAgIHJhbmdlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGNtcChhLmZyb20oKSwgYi5mcm9tKCkpOyB9KTtcbiAgICBwcmltSW5kZXggPSBpbmRleE9mKHJhbmdlcywgcHJpbSk7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0sIHByZXYgPSByYW5nZXNbaSAtIDFdO1xuICAgICAgaWYgKGNtcChwcmV2LnRvKCksIGN1ci5mcm9tKCkpID49IDApIHtcbiAgICAgICAgdmFyIGZyb20gPSBtaW5Qb3MocHJldi5mcm9tKCksIGN1ci5mcm9tKCkpLCB0byA9IG1heFBvcyhwcmV2LnRvKCksIGN1ci50bygpKTtcbiAgICAgICAgdmFyIGludiA9IHByZXYuZW1wdHkoKSA/IGN1ci5mcm9tKCkgPT0gY3VyLmhlYWQgOiBwcmV2LmZyb20oKSA9PSBwcmV2LmhlYWQ7XG4gICAgICAgIGlmIChpIDw9IHByaW1JbmRleCkgLS1wcmltSW5kZXg7XG4gICAgICAgIHJhbmdlcy5zcGxpY2UoLS1pLCAyLCBuZXcgUmFuZ2UoaW52ID8gdG8gOiBmcm9tLCBpbnYgPyBmcm9tIDogdG8pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ocmFuZ2VzLCBwcmltSW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2ltcGxlU2VsZWN0aW9uKGFuY2hvciwgaGVhZCkge1xuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKFtuZXcgUmFuZ2UoYW5jaG9yLCBoZWFkIHx8IGFuY2hvcildLCAwKTtcbiAgfVxuXG4gIC8vIE1vc3Qgb2YgdGhlIGV4dGVybmFsIEFQSSBjbGlwcyBnaXZlbiBwb3NpdGlvbnMgdG8gbWFrZSBzdXJlIHRoZXlcbiAgLy8gYWN0dWFsbHkgZXhpc3Qgd2l0aGluIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gY2xpcExpbmUoZG9jLCBuKSB7cmV0dXJuIE1hdGgubWF4KGRvYy5maXJzdCwgTWF0aC5taW4obiwgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSk7fVxuICBmdW5jdGlvbiBjbGlwUG9zKGRvYywgcG9zKSB7XG4gICAgaWYgKHBvcy5saW5lIDwgZG9jLmZpcnN0KSByZXR1cm4gUG9zKGRvYy5maXJzdCwgMCk7XG4gICAgdmFyIGxhc3QgPSBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE7XG4gICAgaWYgKHBvcy5saW5lID4gbGFzdCkgcmV0dXJuIFBvcyhsYXN0LCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgpO1xuICAgIHJldHVybiBjbGlwVG9MZW4ocG9zLCBnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQubGVuZ3RoKTtcbiAgfVxuICBmdW5jdGlvbiBjbGlwVG9MZW4ocG9zLCBsaW5lbGVuKSB7XG4gICAgdmFyIGNoID0gcG9zLmNoO1xuICAgIGlmIChjaCA9PSBudWxsIHx8IGNoID4gbGluZWxlbikgcmV0dXJuIFBvcyhwb3MubGluZSwgbGluZWxlbik7XG4gICAgZWxzZSBpZiAoY2ggPCAwKSByZXR1cm4gUG9zKHBvcy5saW5lLCAwKTtcbiAgICBlbHNlIHJldHVybiBwb3M7XG4gIH1cbiAgZnVuY3Rpb24gaXNMaW5lKGRvYywgbCkge3JldHVybiBsID49IGRvYy5maXJzdCAmJiBsIDwgZG9jLmZpcnN0ICsgZG9jLnNpemU7fVxuICBmdW5jdGlvbiBjbGlwUG9zQXJyYXkoZG9jLCBhcnJheSkge1xuICAgIGZvciAodmFyIG91dCA9IFtdLCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSBvdXRbaV0gPSBjbGlwUG9zKGRvYywgYXJyYXlbaV0pO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLyBTRUxFQ1RJT04gVVBEQVRFU1xuXG4gIC8vIFRoZSAnc2Nyb2xsJyBwYXJhbWV0ZXIgZ2l2ZW4gdG8gbWFueSBvZiB0aGVzZSBpbmRpY2F0ZWQgd2hldGhlclxuICAvLyB0aGUgbmV3IGN1cnNvciBwb3NpdGlvbiBzaG91bGQgYmUgc2Nyb2xsZWQgaW50byB2aWV3IGFmdGVyXG4gIC8vIG1vZGlmeWluZyB0aGUgc2VsZWN0aW9uLlxuXG4gIC8vIElmIHNoaWZ0IGlzIGhlbGQgb3IgdGhlIGV4dGVuZCBmbGFnIGlzIHNldCwgZXh0ZW5kcyBhIHJhbmdlIHRvXG4gIC8vIGluY2x1ZGUgYSBnaXZlbiBwb3NpdGlvbiAoYW5kIG9wdGlvbmFsbHkgYSBzZWNvbmQgcG9zaXRpb24pLlxuICAvLyBPdGhlcndpc2UsIHNpbXBseSByZXR1cm5zIHRoZSByYW5nZSBiZXR3ZWVuIHRoZSBnaXZlbiBwb3NpdGlvbnMuXG4gIC8vIFVzZWQgZm9yIGN1cnNvciBtb3Rpb24gYW5kIHN1Y2guXG4gIGZ1bmN0aW9uIGV4dGVuZFJhbmdlKGRvYywgcmFuZ2UsIGhlYWQsIG90aGVyKSB7XG4gICAgaWYgKGRvYy5jbSAmJiBkb2MuY20uZGlzcGxheS5zaGlmdCB8fCBkb2MuZXh0ZW5kKSB7XG4gICAgICB2YXIgYW5jaG9yID0gcmFuZ2UuYW5jaG9yO1xuICAgICAgaWYgKG90aGVyKSB7XG4gICAgICAgIHZhciBwb3NCZWZvcmUgPSBjbXAoaGVhZCwgYW5jaG9yKSA8IDA7XG4gICAgICAgIGlmIChwb3NCZWZvcmUgIT0gKGNtcChvdGhlciwgYW5jaG9yKSA8IDApKSB7XG4gICAgICAgICAgYW5jaG9yID0gaGVhZDtcbiAgICAgICAgICBoZWFkID0gb3RoZXI7XG4gICAgICAgIH0gZWxzZSBpZiAocG9zQmVmb3JlICE9IChjbXAoaGVhZCwgb3RoZXIpIDwgMCkpIHtcbiAgICAgICAgICBoZWFkID0gb3RoZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmFuZ2UoYW5jaG9yLCBoZWFkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBSYW5nZShvdGhlciB8fCBoZWFkLCBoZWFkKTtcbiAgICB9XG4gIH1cblxuICAvLyBFeHRlbmQgdGhlIHByaW1hcnkgc2VsZWN0aW9uIHJhbmdlLCBkaXNjYXJkIHRoZSByZXN0LlxuICBmdW5jdGlvbiBleHRlbmRTZWxlY3Rpb24oZG9jLCBoZWFkLCBvdGhlciwgb3B0aW9ucykge1xuICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW2V4dGVuZFJhbmdlKGRvYywgZG9jLnNlbC5wcmltYXJ5KCksIGhlYWQsIG90aGVyKV0sIDApLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEV4dGVuZCBhbGwgc2VsZWN0aW9ucyAocG9zIGlzIGFuIGFycmF5IG9mIHNlbGVjdGlvbnMgd2l0aCBsZW5ndGhcbiAgLy8gZXF1YWwgdGhlIG51bWJlciBvZiBzZWxlY3Rpb25zKVxuICBmdW5jdGlvbiBleHRlbmRTZWxlY3Rpb25zKGRvYywgaGVhZHMsIG9wdGlvbnMpIHtcbiAgICBmb3IgKHZhciBvdXQgPSBbXSwgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgIG91dFtpXSA9IGV4dGVuZFJhbmdlKGRvYywgZG9jLnNlbC5yYW5nZXNbaV0sIGhlYWRzW2ldLCBudWxsKTtcbiAgICB2YXIgbmV3U2VsID0gbm9ybWFsaXplU2VsZWN0aW9uKG91dCwgZG9jLnNlbC5wcmltSW5kZXgpO1xuICAgIHNldFNlbGVjdGlvbihkb2MsIG5ld1NlbCwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBVcGRhdGVzIGEgc2luZ2xlIHJhbmdlIGluIHRoZSBzZWxlY3Rpb24uXG4gIGZ1bmN0aW9uIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBpLCByYW5nZSwgb3B0aW9ucykge1xuICAgIHZhciByYW5nZXMgPSBkb2Muc2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICByYW5nZXNbaV0gPSByYW5nZTtcbiAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLCBkb2Muc2VsLnByaW1JbmRleCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gUmVzZXQgdGhlIHNlbGVjdGlvbiB0byBhIHNpbmdsZSByYW5nZS5cbiAgZnVuY3Rpb24gc2V0U2ltcGxlU2VsZWN0aW9uKGRvYywgYW5jaG9yLCBoZWFkLCBvcHRpb25zKSB7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgc2ltcGxlU2VsZWN0aW9uKGFuY2hvciwgaGVhZCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gR2l2ZSBiZWZvcmVTZWxlY3Rpb25DaGFuZ2UgaGFuZGxlcnMgYSBjaGFuZ2UgdG8gaW5mbHVlbmNlIGFcbiAgLy8gc2VsZWN0aW9uIHVwZGF0ZS5cbiAgZnVuY3Rpb24gZmlsdGVyU2VsZWN0aW9uQ2hhbmdlKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIHJhbmdlczogc2VsLnJhbmdlcyxcbiAgICAgIHVwZGF0ZTogZnVuY3Rpb24ocmFuZ2VzKSB7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIHRoaXMucmFuZ2VzW2ldID0gbmV3IFJhbmdlKGNsaXBQb3MoZG9jLCByYW5nZXNbaV0uYW5jaG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmhlYWQpKTtcbiAgICAgIH0sXG4gICAgICBvcmlnaW46IG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW5cbiAgICB9O1xuICAgIHNpZ25hbChkb2MsIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIsIGRvYywgb2JqKTtcbiAgICBpZiAoZG9jLmNtKSBzaWduYWwoZG9jLmNtLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiLCBkb2MuY20sIG9iaik7XG4gICAgaWYgKG9iai5yYW5nZXMgIT0gc2VsLnJhbmdlcykgcmV0dXJuIG5vcm1hbGl6ZVNlbGVjdGlvbihvYmoucmFuZ2VzLCBvYmoucmFuZ2VzLmxlbmd0aCAtIDEpO1xuICAgIGVsc2UgcmV0dXJuIHNlbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgdmFyIGRvbmUgPSBkb2MuaGlzdG9yeS5kb25lLCBsYXN0ID0gbHN0KGRvbmUpO1xuICAgIGlmIChsYXN0ICYmIGxhc3QucmFuZ2VzKSB7XG4gICAgICBkb25lW2RvbmUubGVuZ3RoIC0gMV0gPSBzZWw7XG4gICAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWwsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBzZWwsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldCBhIG5ldyBzZWxlY3Rpb24uXG4gIGZ1bmN0aW9uIHNldFNlbGVjdGlvbihkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgYWRkU2VsZWN0aW9uVG9IaXN0b3J5KGRvYywgZG9jLnNlbCwgZG9jLmNtID8gZG9jLmNtLmN1ck9wLmlkIDogTmFOLCBvcHRpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIGlmIChoYXNIYW5kbGVyKGRvYywgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiKSlcbiAgICAgIHNlbCA9IGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCwgb3B0aW9ucyk7XG5cbiAgICB2YXIgYmlhcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5iaWFzIHx8XG4gICAgICAoY21wKHNlbC5wcmltYXJ5KCkuaGVhZCwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCkgPCAwID8gLTEgOiAxKTtcbiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIHNlbCwgYmlhcywgdHJ1ZSkpO1xuXG4gICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLnNjcm9sbCA9PT0gZmFsc2UpICYmIGRvYy5jbSlcbiAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoZG9jLmNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2VsKSB7XG4gICAgaWYgKHNlbC5lcXVhbHMoZG9jLnNlbCkpIHJldHVybjtcblxuICAgIGRvYy5zZWwgPSBzZWw7XG5cbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICBkb2MuY20uY3VyT3AudXBkYXRlSW5wdXQgPSBkb2MuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7XG4gICAgICBzaWduYWxDdXJzb3JBY3Rpdml0eShkb2MuY20pO1xuICAgIH1cbiAgICBzaWduYWxMYXRlcihkb2MsIFwiY3Vyc29yQWN0aXZpdHlcIiwgZG9jKTtcbiAgfVxuXG4gIC8vIFZlcmlmeSB0aGF0IHRoZSBzZWxlY3Rpb24gZG9lcyBub3QgcGFydGlhbGx5IHNlbGVjdCBhbnkgYXRvbWljXG4gIC8vIG1hcmtlZCByYW5nZXMuXG4gIGZ1bmN0aW9uIHJlQ2hlY2tTZWxlY3Rpb24oZG9jKSB7XG4gICAgc2V0U2VsZWN0aW9uSW5uZXIoZG9jLCBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBkb2Muc2VsLCBudWxsLCBmYWxzZSksIHNlbF9kb250U2Nyb2xsKTtcbiAgfVxuXG4gIC8vIFJldHVybiBhIHNlbGVjdGlvbiB0aGF0IGRvZXMgbm90IHBhcnRpYWxseSBzZWxlY3QgYW55IGF0b21pY1xuICAvLyByYW5nZXMuXG4gIGZ1bmN0aW9uIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIHNlbCwgYmlhcywgbWF5Q2xlYXIpIHtcbiAgICB2YXIgb3V0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgIHZhciBvbGQgPSBzZWwucmFuZ2VzLmxlbmd0aCA9PSBkb2Muc2VsLnJhbmdlcy5sZW5ndGggJiYgZG9jLnNlbC5yYW5nZXNbaV07XG4gICAgICB2YXIgbmV3QW5jaG9yID0gc2tpcEF0b21pYyhkb2MsIHJhbmdlLmFuY2hvciwgb2xkICYmIG9sZC5hbmNob3IsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIHZhciBuZXdIZWFkID0gc2tpcEF0b21pYyhkb2MsIHJhbmdlLmhlYWQsIG9sZCAmJiBvbGQuaGVhZCwgYmlhcywgbWF5Q2xlYXIpO1xuICAgICAgaWYgKG91dCB8fCBuZXdBbmNob3IgIT0gcmFuZ2UuYW5jaG9yIHx8IG5ld0hlYWQgIT0gcmFuZ2UuaGVhZCkge1xuICAgICAgICBpZiAoIW91dCkgb3V0ID0gc2VsLnJhbmdlcy5zbGljZSgwLCBpKTtcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKG5ld0FuY2hvciwgbmV3SGVhZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQgPyBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBzZWwucHJpbUluZGV4KSA6IHNlbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCBkaXIsIG1heUNsZWFyKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgcG9zLmxpbmUpO1xuICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcCA9IGxpbmUubWFya2VkU3BhbnNbaV0sIG0gPSBzcC5tYXJrZXI7XG4gICAgICBpZiAoKHNwLmZyb20gPT0gbnVsbCB8fCAobS5pbmNsdXNpdmVMZWZ0ID8gc3AuZnJvbSA8PSBwb3MuY2ggOiBzcC5mcm9tIDwgcG9zLmNoKSkgJiZcbiAgICAgICAgICAoc3AudG8gPT0gbnVsbCB8fCAobS5pbmNsdXNpdmVSaWdodCA/IHNwLnRvID49IHBvcy5jaCA6IHNwLnRvID4gcG9zLmNoKSkpIHtcbiAgICAgICAgaWYgKG1heUNsZWFyKSB7XG4gICAgICAgICAgc2lnbmFsKG0sIFwiYmVmb3JlQ3Vyc29yRW50ZXJcIik7XG4gICAgICAgICAgaWYgKG0uZXhwbGljaXRseUNsZWFyZWQpIHtcbiAgICAgICAgICAgIGlmICghbGluZS5tYXJrZWRTcGFucykgYnJlYWs7XG4gICAgICAgICAgICBlbHNlIHstLWk7IGNvbnRpbnVlO31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtLmF0b21pYykgY29udGludWU7XG5cbiAgICAgICAgaWYgKG9sZFBvcykge1xuICAgICAgICAgIHZhciBuZWFyID0gbS5maW5kKGRpciA8IDAgPyAxIDogLTEpLCBkaWZmO1xuICAgICAgICAgIGlmIChkaXIgPCAwID8gbS5pbmNsdXNpdmVSaWdodCA6IG0uaW5jbHVzaXZlTGVmdClcbiAgICAgICAgICAgIG5lYXIgPSBtb3ZlUG9zKGRvYywgbmVhciwgLWRpciwgbmVhciAmJiBuZWFyLmxpbmUgPT0gcG9zLmxpbmUgPyBsaW5lIDogbnVsbCk7XG4gICAgICAgICAgaWYgKG5lYXIgJiYgbmVhci5saW5lID09IHBvcy5saW5lICYmIChkaWZmID0gY21wKG5lYXIsIG9sZFBvcykpICYmIChkaXIgPCAwID8gZGlmZiA8IDAgOiBkaWZmID4gMCkpXG4gICAgICAgICAgICByZXR1cm4gc2tpcEF0b21pY0lubmVyKGRvYywgbmVhciwgcG9zLCBkaXIsIG1heUNsZWFyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmYXIgPSBtLmZpbmQoZGlyIDwgMCA/IC0xIDogMSk7XG4gICAgICAgIGlmIChkaXIgPCAwID8gbS5pbmNsdXNpdmVMZWZ0IDogbS5pbmNsdXNpdmVSaWdodClcbiAgICAgICAgICBmYXIgPSBtb3ZlUG9zKGRvYywgZmFyLCBkaXIsIGZhci5saW5lID09IHBvcy5saW5lID8gbGluZSA6IG51bGwpO1xuICAgICAgICByZXR1cm4gZmFyID8gc2tpcEF0b21pY0lubmVyKGRvYywgZmFyLCBwb3MsIGRpciwgbWF5Q2xlYXIpIDogbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvcztcbiAgfVxuXG4gIC8vIEVuc3VyZSBhIGdpdmVuIHBvc2l0aW9uIGlzIG5vdCBpbnNpZGUgYW4gYXRvbWljIHJhbmdlLlxuICBmdW5jdGlvbiBza2lwQXRvbWljKGRvYywgcG9zLCBvbGRQb3MsIGJpYXMsIG1heUNsZWFyKSB7XG4gICAgdmFyIGRpciA9IGJpYXMgfHwgMTtcbiAgICB2YXIgZm91bmQgPSBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCBtYXlDbGVhcikgfHxcbiAgICAgICAgKCFtYXlDbGVhciAmJiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCB0cnVlKSkgfHxcbiAgICAgICAgc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIC1kaXIsIG1heUNsZWFyKSB8fFxuICAgICAgICAoIW1heUNsZWFyICYmIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCAtZGlyLCB0cnVlKSk7XG4gICAgaWYgKCFmb3VuZCkge1xuICAgICAgZG9jLmNhbnRFZGl0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVBvcyhkb2MsIHBvcywgZGlyLCBsaW5lKSB7XG4gICAgaWYgKGRpciA8IDAgJiYgcG9zLmNoID09IDApIHtcbiAgICAgIGlmIChwb3MubGluZSA+IGRvYy5maXJzdCkgcmV0dXJuIGNsaXBQb3MoZG9jLCBQb3MocG9zLmxpbmUgLSAxKSk7XG4gICAgICBlbHNlIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAoZGlyID4gMCAmJiBwb3MuY2ggPT0gKGxpbmUgfHwgZ2V0TGluZShkb2MsIHBvcy5saW5lKSkudGV4dC5sZW5ndGgpIHtcbiAgICAgIGlmIChwb3MubGluZSA8IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkgcmV0dXJuIFBvcyhwb3MubGluZSArIDEsIDApO1xuICAgICAgZWxzZSByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBQb3MocG9zLmxpbmUsIHBvcy5jaCArIGRpcik7XG4gICAgfVxuICB9XG5cbiAgLy8gU0VMRUNUSU9OIERSQVdJTkdcblxuICBmdW5jdGlvbiB1cGRhdGVTZWxlY3Rpb24oY20pIHtcbiAgICBjbS5kaXNwbGF5LmlucHV0LnNob3dTZWxlY3Rpb24oY20uZGlzcGxheS5pbnB1dC5wcmVwYXJlU2VsZWN0aW9uKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJlcGFyZVNlbGVjdGlvbihjbSwgcHJpbWFyeSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHJlc3VsdCA9IHt9O1xuICAgIHZhciBjdXJGcmFnbWVudCA9IHJlc3VsdC5jdXJzb3JzID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHZhciBzZWxGcmFnbWVudCA9IHJlc3VsdC5zZWxlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocHJpbWFyeSA9PT0gZmFsc2UgJiYgaSA9PSBkb2Muc2VsLnByaW1JbmRleCkgY29udGludWU7XG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgIGlmIChyYW5nZS5mcm9tKCkubGluZSA+PSBjbS5kaXNwbGF5LnZpZXdUbyB8fCByYW5nZS50bygpLmxpbmUgPCBjbS5kaXNwbGF5LnZpZXdGcm9tKSBjb250aW51ZTtcbiAgICAgIHZhciBjb2xsYXBzZWQgPSByYW5nZS5lbXB0eSgpO1xuICAgICAgaWYgKGNvbGxhcHNlZCB8fCBjbS5vcHRpb25zLnNob3dDdXJzb3JXaGVuU2VsZWN0aW5nKVxuICAgICAgICBkcmF3U2VsZWN0aW9uQ3Vyc29yKGNtLCByYW5nZS5oZWFkLCBjdXJGcmFnbWVudCk7XG4gICAgICBpZiAoIWNvbGxhcHNlZClcbiAgICAgICAgZHJhd1NlbGVjdGlvblJhbmdlKGNtLCByYW5nZSwgc2VsRnJhZ21lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gRHJhd3MgYSBjdXJzb3IgZm9yIHRoZSBnaXZlbiByYW5nZVxuICBmdW5jdGlvbiBkcmF3U2VsZWN0aW9uQ3Vyc29yKGNtLCBoZWFkLCBvdXRwdXQpIHtcbiAgICB2YXIgcG9zID0gY3Vyc29yQ29vcmRzKGNtLCBoZWFkLCBcImRpdlwiLCBudWxsLCBudWxsLCAhY20ub3B0aW9ucy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lKTtcblxuICAgIHZhciBjdXJzb3IgPSBvdXRwdXQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFwiXFx1MDBhMFwiLCBcIkNvZGVNaXJyb3ItY3Vyc29yXCIpKTtcbiAgICBjdXJzb3Iuc3R5bGUubGVmdCA9IHBvcy5sZWZ0ICsgXCJweFwiO1xuICAgIGN1cnNvci5zdHlsZS50b3AgPSBwb3MudG9wICsgXCJweFwiO1xuICAgIGN1cnNvci5zdHlsZS5oZWlnaHQgPSBNYXRoLm1heCgwLCBwb3MuYm90dG9tIC0gcG9zLnRvcCkgKiBjbS5vcHRpb25zLmN1cnNvckhlaWdodCArIFwicHhcIjtcblxuICAgIGlmIChwb3Mub3RoZXIpIHtcbiAgICAgIC8vIFNlY29uZGFyeSBjdXJzb3IsIHNob3duIHdoZW4gb24gYSAnanVtcCcgaW4gYmktZGlyZWN0aW9uYWwgdGV4dFxuICAgICAgdmFyIG90aGVyQ3Vyc29yID0gb3V0cHV0LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBcIlxcdTAwYTBcIiwgXCJDb2RlTWlycm9yLWN1cnNvciBDb2RlTWlycm9yLXNlY29uZGFyeWN1cnNvclwiKSk7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmxlZnQgPSBwb3Mub3RoZXIubGVmdCArIFwicHhcIjtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLnRvcCA9IHBvcy5vdGhlci50b3AgKyBcInB4XCI7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS5oZWlnaHQgPSAocG9zLm90aGVyLmJvdHRvbSAtIHBvcy5vdGhlci50b3ApICogLjg1ICsgXCJweFwiO1xuICAgIH1cbiAgfVxuXG4gIC8vIERyYXdzIHRoZSBnaXZlbiByYW5nZSBhcyBhIGhpZ2hsaWdodGVkIHNlbGVjdGlvblxuICBmdW5jdGlvbiBkcmF3U2VsZWN0aW9uUmFuZ2UoY20sIHJhbmdlLCBvdXRwdXQpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdmFyIHBhZGRpbmcgPSBwYWRkaW5nSChjbS5kaXNwbGF5KSwgbGVmdFNpZGUgPSBwYWRkaW5nLmxlZnQ7XG4gICAgdmFyIHJpZ2h0U2lkZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXJXaWR0aCwgZGlzcGxheVdpZHRoKGNtKSAtIGRpc3BsYXkuc2l6ZXIub2Zmc2V0TGVmdCkgLSBwYWRkaW5nLnJpZ2h0O1xuXG4gICAgZnVuY3Rpb24gYWRkKGxlZnQsIHRvcCwgd2lkdGgsIGJvdHRvbSkge1xuICAgICAgaWYgKHRvcCA8IDApIHRvcCA9IDA7XG4gICAgICB0b3AgPSBNYXRoLnJvdW5kKHRvcCk7XG4gICAgICBib3R0b20gPSBNYXRoLnJvdW5kKGJvdHRvbSk7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLXNlbGVjdGVkXCIsIFwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiBcIiArIGxlZnQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHg7IHRvcDogXCIgKyB0b3AgKyBcInB4OyB3aWR0aDogXCIgKyAod2lkdGggPT0gbnVsbCA/IHJpZ2h0U2lkZSAtIGxlZnQgOiB3aWR0aCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHg7IGhlaWdodDogXCIgKyAoYm90dG9tIC0gdG9wKSArIFwicHhcIikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyYXdGb3JMaW5lKGxpbmUsIGZyb21BcmcsIHRvQXJnKSB7XG4gICAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lKTtcbiAgICAgIHZhciBsaW5lTGVuID0gbGluZU9iai50ZXh0Lmxlbmd0aDtcbiAgICAgIHZhciBzdGFydCwgZW5kO1xuICAgICAgZnVuY3Rpb24gY29vcmRzKGNoLCBiaWFzKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29vcmRzKGNtLCBQb3MobGluZSwgY2gpLCBcImRpdlwiLCBsaW5lT2JqLCBiaWFzKTtcbiAgICAgIH1cblxuICAgICAgaXRlcmF0ZUJpZGlTZWN0aW9ucyhnZXRPcmRlcihsaW5lT2JqKSwgZnJvbUFyZyB8fCAwLCB0b0FyZyA9PSBudWxsID8gbGluZUxlbiA6IHRvQXJnLCBmdW5jdGlvbihmcm9tLCB0bywgZGlyKSB7XG4gICAgICAgIHZhciBsZWZ0UG9zID0gY29vcmRzKGZyb20sIFwibGVmdFwiKSwgcmlnaHRQb3MsIGxlZnQsIHJpZ2h0O1xuICAgICAgICBpZiAoZnJvbSA9PSB0bykge1xuICAgICAgICAgIHJpZ2h0UG9zID0gbGVmdFBvcztcbiAgICAgICAgICBsZWZ0ID0gcmlnaHQgPSBsZWZ0UG9zLmxlZnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmlnaHRQb3MgPSBjb29yZHModG8gLSAxLCBcInJpZ2h0XCIpO1xuICAgICAgICAgIGlmIChkaXIgPT0gXCJydGxcIikgeyB2YXIgdG1wID0gbGVmdFBvczsgbGVmdFBvcyA9IHJpZ2h0UG9zOyByaWdodFBvcyA9IHRtcDsgfVxuICAgICAgICAgIGxlZnQgPSBsZWZ0UG9zLmxlZnQ7XG4gICAgICAgICAgcmlnaHQgPSByaWdodFBvcy5yaWdodDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJvbUFyZyA9PSBudWxsICYmIGZyb20gPT0gMCkgbGVmdCA9IGxlZnRTaWRlO1xuICAgICAgICBpZiAocmlnaHRQb3MudG9wIC0gbGVmdFBvcy50b3AgPiAzKSB7IC8vIERpZmZlcmVudCBsaW5lcywgZHJhdyB0b3AgcGFydFxuICAgICAgICAgIGFkZChsZWZ0LCBsZWZ0UG9zLnRvcCwgbnVsbCwgbGVmdFBvcy5ib3R0b20pO1xuICAgICAgICAgIGxlZnQgPSBsZWZ0U2lkZTtcbiAgICAgICAgICBpZiAobGVmdFBvcy5ib3R0b20gPCByaWdodFBvcy50b3ApIGFkZChsZWZ0LCBsZWZ0UG9zLmJvdHRvbSwgbnVsbCwgcmlnaHRQb3MudG9wKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9BcmcgPT0gbnVsbCAmJiB0byA9PSBsaW5lTGVuKSByaWdodCA9IHJpZ2h0U2lkZTtcbiAgICAgICAgaWYgKCFzdGFydCB8fCBsZWZ0UG9zLnRvcCA8IHN0YXJ0LnRvcCB8fCBsZWZ0UG9zLnRvcCA9PSBzdGFydC50b3AgJiYgbGVmdFBvcy5sZWZ0IDwgc3RhcnQubGVmdClcbiAgICAgICAgICBzdGFydCA9IGxlZnRQb3M7XG4gICAgICAgIGlmICghZW5kIHx8IHJpZ2h0UG9zLmJvdHRvbSA+IGVuZC5ib3R0b20gfHwgcmlnaHRQb3MuYm90dG9tID09IGVuZC5ib3R0b20gJiYgcmlnaHRQb3MucmlnaHQgPiBlbmQucmlnaHQpXG4gICAgICAgICAgZW5kID0gcmlnaHRQb3M7XG4gICAgICAgIGlmIChsZWZ0IDwgbGVmdFNpZGUgKyAxKSBsZWZ0ID0gbGVmdFNpZGU7XG4gICAgICAgIGFkZChsZWZ0LCByaWdodFBvcy50b3AsIHJpZ2h0IC0gbGVmdCwgcmlnaHRQb3MuYm90dG9tKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtzdGFydDogc3RhcnQsIGVuZDogZW5kfTtcbiAgICB9XG5cbiAgICB2YXIgc0Zyb20gPSByYW5nZS5mcm9tKCksIHNUbyA9IHJhbmdlLnRvKCk7XG4gICAgaWYgKHNGcm9tLmxpbmUgPT0gc1RvLmxpbmUpIHtcbiAgICAgIGRyYXdGb3JMaW5lKHNGcm9tLmxpbmUsIHNGcm9tLmNoLCBzVG8uY2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZnJvbUxpbmUgPSBnZXRMaW5lKGRvYywgc0Zyb20ubGluZSksIHRvTGluZSA9IGdldExpbmUoZG9jLCBzVG8ubGluZSk7XG4gICAgICB2YXIgc2luZ2xlVkxpbmUgPSB2aXN1YWxMaW5lKGZyb21MaW5lKSA9PSB2aXN1YWxMaW5lKHRvTGluZSk7XG4gICAgICB2YXIgbGVmdEVuZCA9IGRyYXdGb3JMaW5lKHNGcm9tLmxpbmUsIHNGcm9tLmNoLCBzaW5nbGVWTGluZSA/IGZyb21MaW5lLnRleHQubGVuZ3RoICsgMSA6IG51bGwpLmVuZDtcbiAgICAgIHZhciByaWdodFN0YXJ0ID0gZHJhd0ZvckxpbmUoc1RvLmxpbmUsIHNpbmdsZVZMaW5lID8gMCA6IG51bGwsIHNUby5jaCkuc3RhcnQ7XG4gICAgICBpZiAoc2luZ2xlVkxpbmUpIHtcbiAgICAgICAgaWYgKGxlZnRFbmQudG9wIDwgcmlnaHRTdGFydC50b3AgLSAyKSB7XG4gICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCBudWxsLCBsZWZ0RW5kLmJvdHRvbSk7XG4gICAgICAgICAgYWRkKGxlZnRTaWRlLCByaWdodFN0YXJ0LnRvcCwgcmlnaHRTdGFydC5sZWZ0LCByaWdodFN0YXJ0LmJvdHRvbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCByaWdodFN0YXJ0LmxlZnQgLSBsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLmJvdHRvbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsZWZ0RW5kLmJvdHRvbSA8IHJpZ2h0U3RhcnQudG9wKVxuICAgICAgICBhZGQobGVmdFNpZGUsIGxlZnRFbmQuYm90dG9tLCBudWxsLCByaWdodFN0YXJ0LnRvcCk7XG4gICAgfVxuXG4gICAgb3V0cHV0LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIC8vIEN1cnNvci1ibGlua2luZ1xuICBmdW5jdGlvbiByZXN0YXJ0QmxpbmsoY20pIHtcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHJldHVybjtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgY2xlYXJJbnRlcnZhbChkaXNwbGF5LmJsaW5rZXIpO1xuICAgIHZhciBvbiA9IHRydWU7XG4gICAgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiXCI7XG4gICAgaWYgKGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlID4gMClcbiAgICAgIGRpc3BsYXkuYmxpbmtlciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gKG9uID0gIW9uKSA/IFwiXCIgOiBcImhpZGRlblwiO1xuICAgICAgfSwgY20ub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUpO1xuICAgIGVsc2UgaWYgKGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlIDwgMClcbiAgICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICB9XG5cbiAgLy8gSElHSExJR0hUIFdPUktFUlxuXG4gIGZ1bmN0aW9uIHN0YXJ0V29ya2VyKGNtLCB0aW1lKSB7XG4gICAgaWYgKGNtLmRvYy5tb2RlLnN0YXJ0U3RhdGUgJiYgY20uZG9jLmZyb250aWVyIDwgY20uZGlzcGxheS52aWV3VG8pXG4gICAgICBjbS5zdGF0ZS5oaWdobGlnaHQuc2V0KHRpbWUsIGJpbmQoaGlnaGxpZ2h0V29ya2VyLCBjbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlnaGxpZ2h0V29ya2VyKGNtKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYztcbiAgICBpZiAoZG9jLmZyb250aWVyIDwgZG9jLmZpcnN0KSBkb2MuZnJvbnRpZXIgPSBkb2MuZmlyc3Q7XG4gICAgaWYgKGRvYy5mcm9udGllciA+PSBjbS5kaXNwbGF5LnZpZXdUbykgcmV0dXJuO1xuICAgIHZhciBlbmQgPSArbmV3IERhdGUgKyBjbS5vcHRpb25zLndvcmtUaW1lO1xuICAgIHZhciBzdGF0ZSA9IGNvcHlTdGF0ZShkb2MubW9kZSwgZ2V0U3RhdGVCZWZvcmUoY20sIGRvYy5mcm9udGllcikpO1xuICAgIHZhciBjaGFuZ2VkTGluZXMgPSBbXTtcblxuICAgIGRvYy5pdGVyKGRvYy5mcm9udGllciwgTWF0aC5taW4oZG9jLmZpcnN0ICsgZG9jLnNpemUsIGNtLmRpc3BsYXkudmlld1RvICsgNTAwKSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGRvYy5mcm9udGllciA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tKSB7IC8vIFZpc2libGVcbiAgICAgICAgdmFyIG9sZFN0eWxlcyA9IGxpbmUuc3R5bGVzLCB0b29Mb25nID0gbGluZS50ZXh0Lmxlbmd0aCA+IGNtLm9wdGlvbnMubWF4SGlnaGxpZ2h0TGVuZ3RoO1xuICAgICAgICB2YXIgaGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCB0b29Mb25nID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBzdGF0ZSwgdHJ1ZSk7XG4gICAgICAgIGxpbmUuc3R5bGVzID0gaGlnaGxpZ2h0ZWQuc3R5bGVzO1xuICAgICAgICB2YXIgb2xkQ2xzID0gbGluZS5zdHlsZUNsYXNzZXMsIG5ld0NscyA9IGhpZ2hsaWdodGVkLmNsYXNzZXM7XG4gICAgICAgIGlmIChuZXdDbHMpIGxpbmUuc3R5bGVDbGFzc2VzID0gbmV3Q2xzO1xuICAgICAgICBlbHNlIGlmIChvbGRDbHMpIGxpbmUuc3R5bGVDbGFzc2VzID0gbnVsbDtcbiAgICAgICAgdmFyIGlzY2hhbmdlID0gIW9sZFN0eWxlcyB8fCBvbGRTdHlsZXMubGVuZ3RoICE9IGxpbmUuc3R5bGVzLmxlbmd0aCB8fFxuICAgICAgICAgIG9sZENscyAhPSBuZXdDbHMgJiYgKCFvbGRDbHMgfHwgIW5ld0NscyB8fCBvbGRDbHMuYmdDbGFzcyAhPSBuZXdDbHMuYmdDbGFzcyB8fCBvbGRDbHMudGV4dENsYXNzICE9IG5ld0Nscy50ZXh0Q2xhc3MpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgIWlzY2hhbmdlICYmIGkgPCBvbGRTdHlsZXMubGVuZ3RoOyArK2kpIGlzY2hhbmdlID0gb2xkU3R5bGVzW2ldICE9IGxpbmUuc3R5bGVzW2ldO1xuICAgICAgICBpZiAoaXNjaGFuZ2UpIGNoYW5nZWRMaW5lcy5wdXNoKGRvYy5mcm9udGllcik7XG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHRvb0xvbmcgPyBzdGF0ZSA6IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGxpbmUudGV4dC5sZW5ndGggPD0gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpXG4gICAgICAgICAgcHJvY2Vzc0xpbmUoY20sIGxpbmUudGV4dCwgc3RhdGUpO1xuICAgICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBkb2MuZnJvbnRpZXIgJSA1ID09IDAgPyBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKSA6IG51bGw7XG4gICAgICB9XG4gICAgICArK2RvYy5mcm9udGllcjtcbiAgICAgIGlmICgrbmV3IERhdGUgPiBlbmQpIHtcbiAgICAgICAgc3RhcnRXb3JrZXIoY20sIGNtLm9wdGlvbnMud29ya0RlbGF5KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGNoYW5nZWRMaW5lcy5sZW5ndGgpIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VkTGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHJlZ0xpbmVDaGFuZ2UoY20sIGNoYW5nZWRMaW5lc1tpXSwgXCJ0ZXh0XCIpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRmluZHMgdGhlIGxpbmUgdG8gc3RhcnQgd2l0aCB3aGVuIHN0YXJ0aW5nIGEgcGFyc2UuIFRyaWVzIHRvXG4gIC8vIGZpbmQgYSBsaW5lIHdpdGggYSBzdGF0ZUFmdGVyLCBzbyB0aGF0IGl0IGNhbiBzdGFydCB3aXRoIGFcbiAgLy8gdmFsaWQgc3RhdGUuIElmIHRoYXQgZmFpbHMsIGl0IHJldHVybnMgdGhlIGxpbmUgd2l0aCB0aGVcbiAgLy8gc21hbGxlc3QgaW5kZW50YXRpb24sIHdoaWNoIHRlbmRzIHRvIG5lZWQgdGhlIGxlYXN0IGNvbnRleHQgdG9cbiAgLy8gcGFyc2UgY29ycmVjdGx5LlxuICBmdW5jdGlvbiBmaW5kU3RhcnRMaW5lKGNtLCBuLCBwcmVjaXNlKSB7XG4gICAgdmFyIG1pbmluZGVudCwgbWlubGluZSwgZG9jID0gY20uZG9jO1xuICAgIHZhciBsaW0gPSBwcmVjaXNlID8gLTEgOiBuIC0gKGNtLmRvYy5tb2RlLmlubmVyTW9kZSA/IDEwMDAgOiAxMDApO1xuICAgIGZvciAodmFyIHNlYXJjaCA9IG47IHNlYXJjaCA+IGxpbTsgLS1zZWFyY2gpIHtcbiAgICAgIGlmIChzZWFyY2ggPD0gZG9jLmZpcnN0KSByZXR1cm4gZG9jLmZpcnN0O1xuICAgICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgc2VhcmNoIC0gMSk7XG4gICAgICBpZiAobGluZS5zdGF0ZUFmdGVyICYmICghcHJlY2lzZSB8fCBzZWFyY2ggPD0gZG9jLmZyb250aWVyKSkgcmV0dXJuIHNlYXJjaDtcbiAgICAgIHZhciBpbmRlbnRlZCA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgbnVsbCwgY20ub3B0aW9ucy50YWJTaXplKTtcbiAgICAgIGlmIChtaW5saW5lID09IG51bGwgfHwgbWluaW5kZW50ID4gaW5kZW50ZWQpIHtcbiAgICAgICAgbWlubGluZSA9IHNlYXJjaCAtIDE7XG4gICAgICAgIG1pbmluZGVudCA9IGluZGVudGVkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWlubGluZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFN0YXRlQmVmb3JlKGNtLCBuLCBwcmVjaXNlKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKCFkb2MubW9kZS5zdGFydFN0YXRlKSByZXR1cm4gdHJ1ZTtcbiAgICB2YXIgcG9zID0gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSksIHN0YXRlID0gcG9zID4gZG9jLmZpcnN0ICYmIGdldExpbmUoZG9jLCBwb3MtMSkuc3RhdGVBZnRlcjtcbiAgICBpZiAoIXN0YXRlKSBzdGF0ZSA9IHN0YXJ0U3RhdGUoZG9jLm1vZGUpO1xuICAgIGVsc2Ugc3RhdGUgPSBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKTtcbiAgICBkb2MuaXRlcihwb3MsIG4sIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHByb2Nlc3NMaW5lKGNtLCBsaW5lLnRleHQsIHN0YXRlKTtcbiAgICAgIHZhciBzYXZlID0gcG9zID09IG4gLSAxIHx8IHBvcyAlIDUgPT0gMCB8fCBwb3MgPj0gZGlzcGxheS52aWV3RnJvbSAmJiBwb3MgPCBkaXNwbGF5LnZpZXdUbztcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHNhdmUgPyBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKSA6IG51bGw7XG4gICAgICArK3BvcztcbiAgICB9KTtcbiAgICBpZiAocHJlY2lzZSkgZG9jLmZyb250aWVyID0gcG9zO1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIC8vIFBPU0lUSU9OIE1FQVNVUkVNRU5UXG5cbiAgZnVuY3Rpb24gcGFkZGluZ1RvcChkaXNwbGF5KSB7cmV0dXJuIGRpc3BsYXkubGluZVNwYWNlLm9mZnNldFRvcDt9XG4gIGZ1bmN0aW9uIHBhZGRpbmdWZXJ0KGRpc3BsYXkpIHtyZXR1cm4gZGlzcGxheS5tb3Zlci5vZmZzZXRIZWlnaHQgLSBkaXNwbGF5LmxpbmVTcGFjZS5vZmZzZXRIZWlnaHQ7fVxuICBmdW5jdGlvbiBwYWRkaW5nSChkaXNwbGF5KSB7XG4gICAgaWYgKGRpc3BsYXkuY2FjaGVkUGFkZGluZ0gpIHJldHVybiBkaXNwbGF5LmNhY2hlZFBhZGRpbmdIO1xuICAgIHZhciBlID0gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBlbHQoXCJwcmVcIiwgXCJ4XCIpKTtcbiAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSA/IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpIDogZS5jdXJyZW50U3R5bGU7XG4gICAgdmFyIGRhdGEgPSB7bGVmdDogcGFyc2VJbnQoc3R5bGUucGFkZGluZ0xlZnQpLCByaWdodDogcGFyc2VJbnQoc3R5bGUucGFkZGluZ1JpZ2h0KX07XG4gICAgaWYgKCFpc05hTihkYXRhLmxlZnQpICYmICFpc05hTihkYXRhLnJpZ2h0KSkgZGlzcGxheS5jYWNoZWRQYWRkaW5nSCA9IGRhdGE7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGxHYXAoY20pIHsgcmV0dXJuIHNjcm9sbGVyR2FwIC0gY20uZGlzcGxheS5uYXRpdmVCYXJXaWR0aDsgfVxuICBmdW5jdGlvbiBkaXNwbGF5V2lkdGgoY20pIHtcbiAgICByZXR1cm4gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCAtIHNjcm9sbEdhcChjbSkgLSBjbS5kaXNwbGF5LmJhcldpZHRoO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlIZWlnaHQoY20pIHtcbiAgICByZXR1cm4gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQgLSBzY3JvbGxHYXAoY20pIC0gY20uZGlzcGxheS5iYXJIZWlnaHQ7XG4gIH1cblxuICAvLyBFbnN1cmUgdGhlIGxpbmVWaWV3LndyYXBwaW5nLmhlaWdodHMgYXJyYXkgaXMgcG9wdWxhdGVkLiBUaGlzIGlzXG4gIC8vIGFuIGFycmF5IG9mIGJvdHRvbSBvZmZzZXRzIGZvciB0aGUgbGluZXMgdGhhdCBtYWtlIHVwIGEgZHJhd25cbiAgLy8gbGluZS4gV2hlbiBsaW5lV3JhcHBpbmcgaXMgb24sIHRoZXJlIG1pZ2h0IGJlIG1vcmUgdGhhbiBvbmVcbiAgLy8gaGVpZ2h0LlxuICBmdW5jdGlvbiBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgbGluZVZpZXcsIHJlY3QpIHtcbiAgICB2YXIgd3JhcHBpbmcgPSBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICB2YXIgY3VyV2lkdGggPSB3cmFwcGluZyAmJiBkaXNwbGF5V2lkdGgoY20pO1xuICAgIGlmICghbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzIHx8IHdyYXBwaW5nICYmIGxpbmVWaWV3Lm1lYXN1cmUud2lkdGggIT0gY3VyV2lkdGgpIHtcbiAgICAgIHZhciBoZWlnaHRzID0gbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzID0gW107XG4gICAgICBpZiAod3JhcHBpbmcpIHtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS53aWR0aCA9IGN1cldpZHRoO1xuICAgICAgICB2YXIgcmVjdHMgPSBsaW5lVmlldy50ZXh0LmZpcnN0Q2hpbGQuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICB2YXIgY3VyID0gcmVjdHNbaV0sIG5leHQgPSByZWN0c1tpICsgMV07XG4gICAgICAgICAgaWYgKE1hdGguYWJzKGN1ci5ib3R0b20gLSBuZXh0LmJvdHRvbSkgPiAyKVxuICAgICAgICAgICAgaGVpZ2h0cy5wdXNoKChjdXIuYm90dG9tICsgbmV4dC50b3ApIC8gMiAtIHJlY3QudG9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaGVpZ2h0cy5wdXNoKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZpbmQgYSBsaW5lIG1hcCAobWFwcGluZyBjaGFyYWN0ZXIgb2Zmc2V0cyB0byB0ZXh0IG5vZGVzKSBhbmQgYVxuICAvLyBtZWFzdXJlbWVudCBjYWNoZSBmb3IgdGhlIGdpdmVuIGxpbmUgbnVtYmVyLiAoQSBsaW5lIHZpZXcgbWlnaHRcbiAgLy8gY29udGFpbiBtdWx0aXBsZSBsaW5lcyB3aGVuIGNvbGxhcHNlZCByYW5nZXMgYXJlIHByZXNlbnQuKVxuICBmdW5jdGlvbiBtYXBGcm9tTGluZVZpZXcobGluZVZpZXcsIGxpbmUsIGxpbmVOKSB7XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUgPT0gbGluZSlcbiAgICAgIHJldHVybiB7bWFwOiBsaW5lVmlldy5tZWFzdXJlLm1hcCwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGV9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgIGlmIChsaW5lVmlldy5yZXN0W2ldID09IGxpbmUpXG4gICAgICAgIHJldHVybiB7bWFwOiBsaW5lVmlldy5tZWFzdXJlLm1hcHNbaV0sIGNhY2hlOiBsaW5lVmlldy5tZWFzdXJlLmNhY2hlc1tpXX07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgaWYgKGxpbmVObyhsaW5lVmlldy5yZXN0W2ldKSA+IGxpbmVOKVxuICAgICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXBzW2ldLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV0sIGJlZm9yZTogdHJ1ZX07XG4gIH1cblxuICAvLyBSZW5kZXIgYSBsaW5lIGludG8gdGhlIGhpZGRlbiBub2RlIGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZC4gVXNlZFxuICAvLyB3aGVuIG1lYXN1cmVtZW50IGlzIG5lZWRlZCBmb3IgYSBsaW5lIHRoYXQncyBub3QgaW4gdGhlIHZpZXdwb3J0LlxuICBmdW5jdGlvbiB1cGRhdGVFeHRlcm5hbE1lYXN1cmVtZW50KGNtLCBsaW5lKSB7XG4gICAgbGluZSA9IHZpc3VhbExpbmUobGluZSk7XG4gICAgdmFyIGxpbmVOID0gbGluZU5vKGxpbmUpO1xuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbmV3IExpbmVWaWV3KGNtLmRvYywgbGluZSwgbGluZU4pO1xuICAgIHZpZXcubGluZU4gPSBsaW5lTjtcbiAgICB2YXIgYnVpbHQgPSB2aWV3LmJ1aWx0ID0gYnVpbGRMaW5lQ29udGVudChjbSwgdmlldyk7XG4gICAgdmlldy50ZXh0ID0gYnVpbHQucHJlO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkubGluZU1lYXN1cmUsIGJ1aWx0LnByZSk7XG4gICAgcmV0dXJuIHZpZXc7XG4gIH1cblxuICAvLyBHZXQgYSB7dG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0fSBib3ggKGluIGxpbmUtbG9jYWwgY29vcmRpbmF0ZXMpXG4gIC8vIGZvciBhIGdpdmVuIGNoYXJhY3Rlci5cbiAgZnVuY3Rpb24gbWVhc3VyZUNoYXIoY20sIGxpbmUsIGNoLCBiaWFzKSB7XG4gICAgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZSksIGNoLCBiaWFzKTtcbiAgfVxuXG4gIC8vIEZpbmQgYSBsaW5lIHZpZXcgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuXG4gIGZ1bmN0aW9uIGZpbmRWaWV3Rm9yTGluZShjbSwgbGluZU4pIHtcbiAgICBpZiAobGluZU4gPj0gY20uZGlzcGxheS52aWV3RnJvbSAmJiBsaW5lTiA8IGNtLmRpc3BsYXkudmlld1RvKVxuICAgICAgcmV0dXJuIGNtLmRpc3BsYXkudmlld1tmaW5kVmlld0luZGV4KGNtLCBsaW5lTildO1xuICAgIHZhciBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XG4gICAgaWYgKGV4dCAmJiBsaW5lTiA+PSBleHQubGluZU4gJiYgbGluZU4gPCBleHQubGluZU4gKyBleHQuc2l6ZSlcbiAgICAgIHJldHVybiBleHQ7XG4gIH1cblxuICAvLyBNZWFzdXJlbWVudCBjYW4gYmUgc3BsaXQgaW4gdHdvIHN0ZXBzLCB0aGUgc2V0LXVwIHdvcmsgdGhhdFxuICAvLyBhcHBsaWVzIHRvIHRoZSB3aG9sZSBsaW5lLCBhbmQgdGhlIG1lYXN1cmVtZW50IG9mIHRoZSBhY3R1YWxcbiAgLy8gY2hhcmFjdGVyLiBGdW5jdGlvbnMgbGlrZSBjb29yZHNDaGFyLCB0aGF0IG5lZWQgdG8gZG8gYSBsb3Qgb2ZcbiAgLy8gbWVhc3VyZW1lbnRzIGluIGEgcm93LCBjYW4gdGh1cyBlbnN1cmUgdGhhdCB0aGUgc2V0LXVwIHdvcmsgaXNcbiAgLy8gb25seSBkb25lIG9uY2UuXG4gIGZ1bmN0aW9uIHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZSkge1xuICAgIHZhciBsaW5lTiA9IGxpbmVObyhsaW5lKTtcbiAgICB2YXIgdmlldyA9IGZpbmRWaWV3Rm9yTGluZShjbSwgbGluZU4pO1xuICAgIGlmICh2aWV3ICYmICF2aWV3LnRleHQpIHtcbiAgICAgIHZpZXcgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodmlldyAmJiB2aWV3LmNoYW5nZXMpIHtcbiAgICAgIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCB2aWV3LCBsaW5lTiwgZ2V0RGltZW5zaW9ucyhjbSkpO1xuICAgICAgY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXZpZXcpXG4gICAgICB2aWV3ID0gdXBkYXRlRXh0ZXJuYWxNZWFzdXJlbWVudChjbSwgbGluZSk7XG5cbiAgICB2YXIgaW5mbyA9IG1hcEZyb21MaW5lVmlldyh2aWV3LCBsaW5lLCBsaW5lTik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbmU6IGxpbmUsIHZpZXc6IHZpZXcsIHJlY3Q6IG51bGwsXG4gICAgICBtYXA6IGluZm8ubWFwLCBjYWNoZTogaW5mby5jYWNoZSwgYmVmb3JlOiBpbmZvLmJlZm9yZSxcbiAgICAgIGhhc0hlaWdodHM6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIC8vIEdpdmVuIGEgcHJlcGFyZWQgbWVhc3VyZW1lbnQgb2JqZWN0LCBtZWFzdXJlcyB0aGUgcG9zaXRpb24gb2YgYW5cbiAgLy8gYWN0dWFsIGNoYXJhY3RlciAob3IgZmV0Y2hlcyBpdCBmcm9tIHRoZSBjYWNoZSkuXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkLCBjaCwgYmlhcywgdmFySGVpZ2h0KSB7XG4gICAgaWYgKHByZXBhcmVkLmJlZm9yZSkgY2ggPSAtMTtcbiAgICB2YXIga2V5ID0gY2ggKyAoYmlhcyB8fCBcIlwiKSwgZm91bmQ7XG4gICAgaWYgKHByZXBhcmVkLmNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGZvdW5kID0gcHJlcGFyZWQuY2FjaGVba2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFwcmVwYXJlZC5yZWN0KVxuICAgICAgICBwcmVwYXJlZC5yZWN0ID0gcHJlcGFyZWQudmlldy50ZXh0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgaWYgKCFwcmVwYXJlZC5oYXNIZWlnaHRzKSB7XG4gICAgICAgIGVuc3VyZUxpbmVIZWlnaHRzKGNtLCBwcmVwYXJlZC52aWV3LCBwcmVwYXJlZC5yZWN0KTtcbiAgICAgICAgcHJlcGFyZWQuaGFzSGVpZ2h0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICBmb3VuZCA9IG1lYXN1cmVDaGFySW5uZXIoY20sIHByZXBhcmVkLCBjaCwgYmlhcyk7XG4gICAgICBpZiAoIWZvdW5kLmJvZ3VzKSBwcmVwYXJlZC5jYWNoZVtrZXldID0gZm91bmQ7XG4gICAgfVxuICAgIHJldHVybiB7bGVmdDogZm91bmQubGVmdCwgcmlnaHQ6IGZvdW5kLnJpZ2h0LFxuICAgICAgICAgICAgdG9wOiB2YXJIZWlnaHQgPyBmb3VuZC5ydG9wIDogZm91bmQudG9wLFxuICAgICAgICAgICAgYm90dG9tOiB2YXJIZWlnaHQgPyBmb3VuZC5yYm90dG9tIDogZm91bmQuYm90dG9tfTtcbiAgfVxuXG4gIHZhciBudWxsUmVjdCA9IHtsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwLCBib3R0b206IDB9O1xuXG4gIGZ1bmN0aW9uIG5vZGVBbmRPZmZzZXRJbkxpbmVNYXAobWFwLCBjaCwgYmlhcykge1xuICAgIHZhciBub2RlLCBzdGFydCwgZW5kLCBjb2xsYXBzZTtcbiAgICAvLyBGaXJzdCwgc2VhcmNoIHRoZSBsaW5lIG1hcCBmb3IgdGhlIHRleHQgbm9kZSBjb3JyZXNwb25kaW5nIHRvLFxuICAgIC8vIG9yIGNsb3Nlc3QgdG8sIHRoZSB0YXJnZXQgY2hhcmFjdGVyLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICB2YXIgbVN0YXJ0ID0gbWFwW2ldLCBtRW5kID0gbWFwW2kgKyAxXTtcbiAgICAgIGlmIChjaCA8IG1TdGFydCkge1xuICAgICAgICBzdGFydCA9IDA7IGVuZCA9IDE7XG4gICAgICAgIGNvbGxhcHNlID0gXCJsZWZ0XCI7XG4gICAgICB9IGVsc2UgaWYgKGNoIDwgbUVuZCkge1xuICAgICAgICBzdGFydCA9IGNoIC0gbVN0YXJ0O1xuICAgICAgICBlbmQgPSBzdGFydCArIDE7XG4gICAgICB9IGVsc2UgaWYgKGkgPT0gbWFwLmxlbmd0aCAtIDMgfHwgY2ggPT0gbUVuZCAmJiBtYXBbaSArIDNdID4gY2gpIHtcbiAgICAgICAgZW5kID0gbUVuZCAtIG1TdGFydDtcbiAgICAgICAgc3RhcnQgPSBlbmQgLSAxO1xuICAgICAgICBpZiAoY2ggPj0gbUVuZCkgY29sbGFwc2UgPSBcInJpZ2h0XCI7XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgIT0gbnVsbCkge1xuICAgICAgICBub2RlID0gbWFwW2kgKyAyXTtcbiAgICAgICAgaWYgKG1TdGFydCA9PSBtRW5kICYmIGJpYXMgPT0gKG5vZGUuaW5zZXJ0TGVmdCA/IFwibGVmdFwiIDogXCJyaWdodFwiKSlcbiAgICAgICAgICBjb2xsYXBzZSA9IGJpYXM7XG4gICAgICAgIGlmIChiaWFzID09IFwibGVmdFwiICYmIHN0YXJ0ID09IDApXG4gICAgICAgICAgd2hpbGUgKGkgJiYgbWFwW2kgLSAyXSA9PSBtYXBbaSAtIDNdICYmIG1hcFtpIC0gMV0uaW5zZXJ0TGVmdCkge1xuICAgICAgICAgICAgbm9kZSA9IG1hcFsoaSAtPSAzKSArIDJdO1xuICAgICAgICAgICAgY29sbGFwc2UgPSBcImxlZnRcIjtcbiAgICAgICAgICB9XG4gICAgICAgIGlmIChiaWFzID09IFwicmlnaHRcIiAmJiBzdGFydCA9PSBtRW5kIC0gbVN0YXJ0KVxuICAgICAgICAgIHdoaWxlIChpIDwgbWFwLmxlbmd0aCAtIDMgJiYgbWFwW2kgKyAzXSA9PSBtYXBbaSArIDRdICYmICFtYXBbaSArIDVdLmluc2VydExlZnQpIHtcbiAgICAgICAgICAgIG5vZGUgPSBtYXBbKGkgKz0gMykgKyAyXTtcbiAgICAgICAgICAgIGNvbGxhcHNlID0gXCJyaWdodFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7bm9kZTogbm9kZSwgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCwgY29sbGFwc2U6IGNvbGxhcHNlLCBjb3ZlclN0YXJ0OiBtU3RhcnQsIGNvdmVyRW5kOiBtRW5kfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFySW5uZXIoY20sIHByZXBhcmVkLCBjaCwgYmlhcykge1xuICAgIHZhciBwbGFjZSA9IG5vZGVBbmRPZmZzZXRJbkxpbmVNYXAocHJlcGFyZWQubWFwLCBjaCwgYmlhcyk7XG4gICAgdmFyIG5vZGUgPSBwbGFjZS5ub2RlLCBzdGFydCA9IHBsYWNlLnN0YXJ0LCBlbmQgPSBwbGFjZS5lbmQsIGNvbGxhcHNlID0gcGxhY2UuY29sbGFwc2U7XG5cbiAgICB2YXIgcmVjdDtcbiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKSB7IC8vIElmIGl0IGlzIGEgdGV4dCBub2RlLCB1c2UgYSByYW5nZSB0byByZXRyaWV2ZSB0aGUgY29vcmRpbmF0ZXMuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgeyAvLyBSZXRyeSBhIG1heGltdW0gb2YgNCB0aW1lcyB3aGVuIG5vbnNlbnNlIHJlY3RhbmdsZXMgYXJlIHJldHVybmVkXG4gICAgICAgIHdoaWxlIChzdGFydCAmJiBpc0V4dGVuZGluZ0NoYXIocHJlcGFyZWQubGluZS50ZXh0LmNoYXJBdChwbGFjZS5jb3ZlclN0YXJ0ICsgc3RhcnQpKSkgLS1zdGFydDtcbiAgICAgICAgd2hpbGUgKHBsYWNlLmNvdmVyU3RhcnQgKyBlbmQgPCBwbGFjZS5jb3ZlckVuZCAmJiBpc0V4dGVuZGluZ0NoYXIocHJlcGFyZWQubGluZS50ZXh0LmNoYXJBdChwbGFjZS5jb3ZlclN0YXJ0ICsgZW5kKSkpICsrZW5kO1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkgJiYgc3RhcnQgPT0gMCAmJiBlbmQgPT0gcGxhY2UuY292ZXJFbmQgLSBwbGFjZS5jb3ZlclN0YXJ0KSB7XG4gICAgICAgICAgcmVjdCA9IG5vZGUucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpZSAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xuICAgICAgICAgIHZhciByZWN0cyA9IHJhbmdlKG5vZGUsIHN0YXJ0LCBlbmQpLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgICAgaWYgKHJlY3RzLmxlbmd0aClcbiAgICAgICAgICAgIHJlY3QgPSByZWN0c1tiaWFzID09IFwicmlnaHRcIiA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwXTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICByZWN0ID0gbnVsbFJlY3Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVjdCA9IHJhbmdlKG5vZGUsIHN0YXJ0LCBlbmQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHx8IG51bGxSZWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWN0LmxlZnQgfHwgcmVjdC5yaWdodCB8fCBzdGFydCA9PSAwKSBicmVhaztcbiAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gc3RhcnQgLSAxO1xuICAgICAgICBjb2xsYXBzZSA9IFwicmlnaHRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIHJlY3QgPSBtYXliZVVwZGF0ZVJlY3RGb3Jab29taW5nKGNtLmRpc3BsYXkubWVhc3VyZSwgcmVjdCk7XG4gICAgfSBlbHNlIHsgLy8gSWYgaXQgaXMgYSB3aWRnZXQsIHNpbXBseSBnZXQgdGhlIGJveCBmb3IgdGhlIHdob2xlIHdpZGdldC5cbiAgICAgIGlmIChzdGFydCA+IDApIGNvbGxhcHNlID0gYmlhcyA9IFwicmlnaHRcIjtcbiAgICAgIHZhciByZWN0cztcbiAgICAgIGlmIChjbS5vcHRpb25zLmxpbmVXcmFwcGluZyAmJiAocmVjdHMgPSBub2RlLmdldENsaWVudFJlY3RzKCkpLmxlbmd0aCA+IDEpXG4gICAgICAgIHJlY3QgPSByZWN0c1tiaWFzID09IFwicmlnaHRcIiA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwXTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgfVxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSAmJiAhc3RhcnQgJiYgKCFyZWN0IHx8ICFyZWN0LmxlZnQgJiYgIXJlY3QucmlnaHQpKSB7XG4gICAgICB2YXIgclNwYW4gPSBub2RlLnBhcmVudE5vZGUuZ2V0Q2xpZW50UmVjdHMoKVswXTtcbiAgICAgIGlmIChyU3BhbilcbiAgICAgICAgcmVjdCA9IHtsZWZ0OiByU3Bhbi5sZWZ0LCByaWdodDogclNwYW4ubGVmdCArIGNoYXJXaWR0aChjbS5kaXNwbGF5KSwgdG9wOiByU3Bhbi50b3AsIGJvdHRvbTogclNwYW4uYm90dG9tfTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmVjdCA9IG51bGxSZWN0O1xuICAgIH1cblxuICAgIHZhciBydG9wID0gcmVjdC50b3AgLSBwcmVwYXJlZC5yZWN0LnRvcCwgcmJvdCA9IHJlY3QuYm90dG9tIC0gcHJlcGFyZWQucmVjdC50b3A7XG4gICAgdmFyIG1pZCA9IChydG9wICsgcmJvdCkgLyAyO1xuICAgIHZhciBoZWlnaHRzID0gcHJlcGFyZWQudmlldy5tZWFzdXJlLmhlaWdodHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHRzLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgIGlmIChtaWQgPCBoZWlnaHRzW2ldKSBicmVhaztcbiAgICB2YXIgdG9wID0gaSA/IGhlaWdodHNbaSAtIDFdIDogMCwgYm90ID0gaGVpZ2h0c1tpXTtcbiAgICB2YXIgcmVzdWx0ID0ge2xlZnQ6IChjb2xsYXBzZSA9PSBcInJpZ2h0XCIgPyByZWN0LnJpZ2h0IDogcmVjdC5sZWZ0KSAtIHByZXBhcmVkLnJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICAgIHJpZ2h0OiAoY29sbGFwc2UgPT0gXCJsZWZ0XCIgPyByZWN0LmxlZnQgOiByZWN0LnJpZ2h0KSAtIHByZXBhcmVkLnJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICAgIHRvcDogdG9wLCBib3R0b206IGJvdH07XG4gICAgaWYgKCFyZWN0LmxlZnQgJiYgIXJlY3QucmlnaHQpIHJlc3VsdC5ib2d1cyA9IHRydWU7XG4gICAgaWYgKCFjbS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmUpIHsgcmVzdWx0LnJ0b3AgPSBydG9wOyByZXN1bHQucmJvdHRvbSA9IHJib3Q7IH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBXb3JrIGFyb3VuZCBwcm9ibGVtIHdpdGggYm91bmRpbmcgY2xpZW50IHJlY3RzIG9uIHJhbmdlcyBiZWluZ1xuICAvLyByZXR1cm5lZCBpbmNvcnJlY3RseSB3aGVuIHpvb21lZCBvbiBJRTEwIGFuZCBiZWxvdy5cbiAgZnVuY3Rpb24gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhtZWFzdXJlLCByZWN0KSB7XG4gICAgaWYgKCF3aW5kb3cuc2NyZWVuIHx8IHNjcmVlbi5sb2dpY2FsWERQSSA9PSBudWxsIHx8XG4gICAgICAgIHNjcmVlbi5sb2dpY2FsWERQSSA9PSBzY3JlZW4uZGV2aWNlWERQSSB8fCAhaGFzQmFkWm9vbWVkUmVjdHMobWVhc3VyZSkpXG4gICAgICByZXR1cm4gcmVjdDtcbiAgICB2YXIgc2NhbGVYID0gc2NyZWVuLmxvZ2ljYWxYRFBJIC8gc2NyZWVuLmRldmljZVhEUEk7XG4gICAgdmFyIHNjYWxlWSA9IHNjcmVlbi5sb2dpY2FsWURQSSAvIHNjcmVlbi5kZXZpY2VZRFBJO1xuICAgIHJldHVybiB7bGVmdDogcmVjdC5sZWZ0ICogc2NhbGVYLCByaWdodDogcmVjdC5yaWdodCAqIHNjYWxlWCxcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgKiBzY2FsZVksIGJvdHRvbTogcmVjdC5ib3R0b20gKiBzY2FsZVl9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZUZvcihsaW5lVmlldykge1xuICAgIGlmIChsaW5lVmlldy5tZWFzdXJlKSB7XG4gICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XG4gICAgICBsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgPSBudWxsO1xuICAgICAgaWYgKGxpbmVWaWV3LnJlc3QpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV0gPSB7fTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKGNtKSB7XG4gICAgY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmUgPSBudWxsO1xuICAgIHJlbW92ZUNoaWxkcmVuKGNtLmRpc3BsYXkubGluZU1lYXN1cmUpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZGlzcGxheS52aWV3Lmxlbmd0aDsgaSsrKVxuICAgICAgY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZUZvcihjbS5kaXNwbGF5LnZpZXdbaV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJDYWNoZXMoY20pIHtcbiAgICBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKGNtKTtcbiAgICBjbS5kaXNwbGF5LmNhY2hlZENoYXJXaWR0aCA9IGNtLmRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGNtLmRpc3BsYXkuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgIGNtLmRpc3BsYXkubGluZU51bUNoYXJzID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhZ2VTY3JvbGxYKCkgeyByZXR1cm4gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsTGVmdDsgfVxuICBmdW5jdGlvbiBwYWdlU2Nyb2xsWSgpIHsgcmV0dXJuIHdpbmRvdy5wYWdlWU9mZnNldCB8fCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbFRvcDsgfVxuXG4gIC8vIENvbnZlcnRzIGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IGZyb20gbGluZS1sb2NhbFxuICAvLyBjb29yZGluYXRlcyBpbnRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uIENvbnRleHQgbWF5IGJlIG9uZSBvZlxuICAvLyBcImxpbmVcIiwgXCJkaXZcIiAoZGlzcGxheS5saW5lRGl2KSwgXCJsb2NhbFwiL251bGwgKGVkaXRvciksIFwid2luZG93XCIsXG4gIC8vIG9yIFwicGFnZVwiLlxuICBmdW5jdGlvbiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIHJlY3QsIGNvbnRleHQpIHtcbiAgICBpZiAobGluZU9iai53aWRnZXRzKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVPYmoud2lkZ2V0cy5sZW5ndGg7ICsraSkgaWYgKGxpbmVPYmoud2lkZ2V0c1tpXS5hYm92ZSkge1xuICAgICAgdmFyIHNpemUgPSB3aWRnZXRIZWlnaHQobGluZU9iai53aWRnZXRzW2ldKTtcbiAgICAgIHJlY3QudG9wICs9IHNpemU7IHJlY3QuYm90dG9tICs9IHNpemU7XG4gICAgfVxuICAgIGlmIChjb250ZXh0ID09IFwibGluZVwiKSByZXR1cm4gcmVjdDtcbiAgICBpZiAoIWNvbnRleHQpIGNvbnRleHQgPSBcImxvY2FsXCI7XG4gICAgdmFyIHlPZmYgPSBoZWlnaHRBdExpbmUobGluZU9iaik7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJsb2NhbFwiKSB5T2ZmICs9IHBhZGRpbmdUb3AoY20uZGlzcGxheSk7XG4gICAgZWxzZSB5T2ZmIC09IGNtLmRpc3BsYXkudmlld09mZnNldDtcbiAgICBpZiAoY29udGV4dCA9PSBcInBhZ2VcIiB8fCBjb250ZXh0ID09IFwid2luZG93XCIpIHtcbiAgICAgIHZhciBsT2ZmID0gY20uZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB5T2ZmICs9IGxPZmYudG9wICsgKGNvbnRleHQgPT0gXCJ3aW5kb3dcIiA/IDAgOiBwYWdlU2Nyb2xsWSgpKTtcbiAgICAgIHZhciB4T2ZmID0gbE9mZi5sZWZ0ICsgKGNvbnRleHQgPT0gXCJ3aW5kb3dcIiA/IDAgOiBwYWdlU2Nyb2xsWCgpKTtcbiAgICAgIHJlY3QubGVmdCArPSB4T2ZmOyByZWN0LnJpZ2h0ICs9IHhPZmY7XG4gICAgfVxuICAgIHJlY3QudG9wICs9IHlPZmY7IHJlY3QuYm90dG9tICs9IHlPZmY7XG4gICAgcmV0dXJuIHJlY3Q7XG4gIH1cblxuICAvLyBDb3ZlcnRzIGEgYm94IGZyb20gXCJkaXZcIiBjb29yZHMgdG8gYW5vdGhlciBjb29yZGluYXRlIHN5c3RlbS5cbiAgLy8gQ29udGV4dCBtYXkgYmUgXCJ3aW5kb3dcIiwgXCJwYWdlXCIsIFwiZGl2XCIsIG9yIFwibG9jYWxcIi9udWxsLlxuICBmdW5jdGlvbiBmcm9tQ29vcmRTeXN0ZW0oY20sIGNvb3JkcywgY29udGV4dCkge1xuICAgIGlmIChjb250ZXh0ID09IFwiZGl2XCIpIHJldHVybiBjb29yZHM7XG4gICAgdmFyIGxlZnQgPSBjb29yZHMubGVmdCwgdG9wID0gY29vcmRzLnRvcDtcbiAgICAvLyBGaXJzdCBtb3ZlIGludG8gXCJwYWdlXCIgY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICBpZiAoY29udGV4dCA9PSBcInBhZ2VcIikge1xuICAgICAgbGVmdCAtPSBwYWdlU2Nyb2xsWCgpO1xuICAgICAgdG9wIC09IHBhZ2VTY3JvbGxZKCk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0ID09IFwibG9jYWxcIiB8fCAhY29udGV4dCkge1xuICAgICAgdmFyIGxvY2FsQm94ID0gY20uZGlzcGxheS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGxlZnQgKz0gbG9jYWxCb3gubGVmdDtcbiAgICAgIHRvcCArPSBsb2NhbEJveC50b3A7XG4gICAgfVxuXG4gICAgdmFyIGxpbmVTcGFjZUJveCA9IGNtLmRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7bGVmdDogbGVmdCAtIGxpbmVTcGFjZUJveC5sZWZ0LCB0b3A6IHRvcCAtIGxpbmVTcGFjZUJveC50b3B9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhckNvb3JkcyhjbSwgcG9zLCBjb250ZXh0LCBsaW5lT2JqLCBiaWFzKSB7XG4gICAgaWYgKCFsaW5lT2JqKSBsaW5lT2JqID0gZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCBtZWFzdXJlQ2hhcihjbSwgbGluZU9iaiwgcG9zLmNoLCBiaWFzKSwgY29udGV4dCk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgYm94IGZvciBhIGdpdmVuIGN1cnNvciBwb3NpdGlvbiwgd2hpY2ggbWF5IGhhdmUgYW5cbiAgLy8gJ290aGVyJyBwcm9wZXJ0eSBjb250YWluaW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgc2Vjb25kYXJ5IGN1cnNvclxuICAvLyBvbiBhIGJpZGkgYm91bmRhcnkuXG4gIGZ1bmN0aW9uIGN1cnNvckNvb3JkcyhjbSwgcG9zLCBjb250ZXh0LCBsaW5lT2JqLCBwcmVwYXJlZE1lYXN1cmUsIHZhckhlaWdodCkge1xuICAgIGxpbmVPYmogPSBsaW5lT2JqIHx8IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgaWYgKCFwcmVwYXJlZE1lYXN1cmUpIHByZXBhcmVkTWVhc3VyZSA9IHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZU9iaik7XG4gICAgZnVuY3Rpb24gZ2V0KGNoLCByaWdodCkge1xuICAgICAgdmFyIG0gPSBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZE1lYXN1cmUsIGNoLCByaWdodCA/IFwicmlnaHRcIiA6IFwibGVmdFwiLCB2YXJIZWlnaHQpO1xuICAgICAgaWYgKHJpZ2h0KSBtLmxlZnQgPSBtLnJpZ2h0OyBlbHNlIG0ucmlnaHQgPSBtLmxlZnQ7XG4gICAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCBtLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0QmlkaShjaCwgcGFydFBvcykge1xuICAgICAgdmFyIHBhcnQgPSBvcmRlcltwYXJ0UG9zXSwgcmlnaHQgPSBwYXJ0LmxldmVsICUgMjtcbiAgICAgIGlmIChjaCA9PSBiaWRpTGVmdChwYXJ0KSAmJiBwYXJ0UG9zICYmIHBhcnQubGV2ZWwgPCBvcmRlcltwYXJ0UG9zIC0gMV0ubGV2ZWwpIHtcbiAgICAgICAgcGFydCA9IG9yZGVyWy0tcGFydFBvc107XG4gICAgICAgIGNoID0gYmlkaVJpZ2h0KHBhcnQpIC0gKHBhcnQubGV2ZWwgJSAyID8gMCA6IDEpO1xuICAgICAgICByaWdodCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGNoID09IGJpZGlSaWdodChwYXJ0KSAmJiBwYXJ0UG9zIDwgb3JkZXIubGVuZ3RoIC0gMSAmJiBwYXJ0LmxldmVsIDwgb3JkZXJbcGFydFBvcyArIDFdLmxldmVsKSB7XG4gICAgICAgIHBhcnQgPSBvcmRlclsrK3BhcnRQb3NdO1xuICAgICAgICBjaCA9IGJpZGlMZWZ0KHBhcnQpIC0gcGFydC5sZXZlbCAlIDI7XG4gICAgICAgIHJpZ2h0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocmlnaHQgJiYgY2ggPT0gcGFydC50byAmJiBjaCA+IHBhcnQuZnJvbSkgcmV0dXJuIGdldChjaCAtIDEpO1xuICAgICAgcmV0dXJuIGdldChjaCwgcmlnaHQpO1xuICAgIH1cbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqKSwgY2ggPSBwb3MuY2g7XG4gICAgaWYgKCFvcmRlcikgcmV0dXJuIGdldChjaCk7XG4gICAgdmFyIHBhcnRQb3MgPSBnZXRCaWRpUGFydEF0KG9yZGVyLCBjaCk7XG4gICAgdmFyIHZhbCA9IGdldEJpZGkoY2gsIHBhcnRQb3MpO1xuICAgIGlmIChiaWRpT3RoZXIgIT0gbnVsbCkgdmFsLm90aGVyID0gZ2V0QmlkaShjaCwgYmlkaU90aGVyKTtcbiAgICByZXR1cm4gdmFsO1xuICB9XG5cbiAgLy8gVXNlZCB0byBjaGVhcGx5IGVzdGltYXRlIHRoZSBjb29yZGluYXRlcyBmb3IgYSBwb3NpdGlvbi4gVXNlZCBmb3JcbiAgLy8gaW50ZXJtZWRpYXRlIHNjcm9sbCB1cGRhdGVzLlxuICBmdW5jdGlvbiBlc3RpbWF0ZUNvb3JkcyhjbSwgcG9zKSB7XG4gICAgdmFyIGxlZnQgPSAwLCBwb3MgPSBjbGlwUG9zKGNtLmRvYywgcG9zKTtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBsZWZ0ID0gY2hhcldpZHRoKGNtLmRpc3BsYXkpICogcG9zLmNoO1xuICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICB2YXIgdG9wID0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopICsgcGFkZGluZ1RvcChjbS5kaXNwbGF5KTtcbiAgICByZXR1cm4ge2xlZnQ6IGxlZnQsIHJpZ2h0OiBsZWZ0LCB0b3A6IHRvcCwgYm90dG9tOiB0b3AgKyBsaW5lT2JqLmhlaWdodH07XG4gIH1cblxuICAvLyBQb3NpdGlvbnMgcmV0dXJuZWQgYnkgY29vcmRzQ2hhciBjb250YWluIHNvbWUgZXh0cmEgaW5mb3JtYXRpb24uXG4gIC8vIHhSZWwgaXMgdGhlIHJlbGF0aXZlIHggcG9zaXRpb24gb2YgdGhlIGlucHV0IGNvb3JkaW5hdGVzIGNvbXBhcmVkXG4gIC8vIHRvIHRoZSBmb3VuZCBwb3NpdGlvbiAoc28geFJlbCA+IDAgbWVhbnMgdGhlIGNvb3JkaW5hdGVzIGFyZSB0b1xuICAvLyB0aGUgcmlnaHQgb2YgdGhlIGNoYXJhY3RlciBwb3NpdGlvbiwgZm9yIGV4YW1wbGUpLiBXaGVuIG91dHNpZGVcbiAgLy8gaXMgdHJ1ZSwgdGhhdCBtZWFucyB0aGUgY29vcmRpbmF0ZXMgbGllIG91dHNpZGUgdGhlIGxpbmUnc1xuICAvLyB2ZXJ0aWNhbCByYW5nZS5cbiAgZnVuY3Rpb24gUG9zV2l0aEluZm8obGluZSwgY2gsIG91dHNpZGUsIHhSZWwpIHtcbiAgICB2YXIgcG9zID0gUG9zKGxpbmUsIGNoKTtcbiAgICBwb3MueFJlbCA9IHhSZWw7XG4gICAgaWYgKG91dHNpZGUpIHBvcy5vdXRzaWRlID0gdHJ1ZTtcbiAgICByZXR1cm4gcG9zO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgY2hhcmFjdGVyIHBvc2l0aW9uIGNsb3Nlc3QgdG8gdGhlIGdpdmVuIGNvb3JkaW5hdGVzLlxuICAvLyBJbnB1dCBtdXN0IGJlIGxpbmVTcGFjZS1sb2NhbCAoXCJkaXZcIiBjb29yZGluYXRlIHN5c3RlbSkuXG4gIGZ1bmN0aW9uIGNvb3Jkc0NoYXIoY20sIHgsIHkpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIHkgKz0gY20uZGlzcGxheS52aWV3T2Zmc2V0O1xuICAgIGlmICh5IDwgMCkgcmV0dXJuIFBvc1dpdGhJbmZvKGRvYy5maXJzdCwgMCwgdHJ1ZSwgLTEpO1xuICAgIHZhciBsaW5lTiA9IGxpbmVBdEhlaWdodChkb2MsIHkpLCBsYXN0ID0gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxO1xuICAgIGlmIChsaW5lTiA+IGxhc3QpXG4gICAgICByZXR1cm4gUG9zV2l0aEluZm8oZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxLCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgsIHRydWUsIDEpO1xuICAgIGlmICh4IDwgMCkgeCA9IDA7XG5cbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lTik7XG4gICAgZm9yICg7Oykge1xuICAgICAgdmFyIGZvdW5kID0gY29vcmRzQ2hhcklubmVyKGNtLCBsaW5lT2JqLCBsaW5lTiwgeCwgeSk7XG4gICAgICB2YXIgbWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmVPYmopO1xuICAgICAgdmFyIG1lcmdlZFBvcyA9IG1lcmdlZCAmJiBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGlmIChtZXJnZWQgJiYgKGZvdW5kLmNoID4gbWVyZ2VkUG9zLmZyb20uY2ggfHwgZm91bmQuY2ggPT0gbWVyZ2VkUG9zLmZyb20uY2ggJiYgZm91bmQueFJlbCA+IDApKVxuICAgICAgICBsaW5lTiA9IGxpbmVObyhsaW5lT2JqID0gbWVyZ2VkUG9zLnRvLmxpbmUpO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29vcmRzQ2hhcklubmVyKGNtLCBsaW5lT2JqLCBsaW5lTm8sIHgsIHkpIHtcbiAgICB2YXIgaW5uZXJPZmYgPSB5IC0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopO1xuICAgIHZhciB3cm9uZ0xpbmUgPSBmYWxzZSwgYWRqdXN0ID0gMiAqIGNtLmRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICB2YXIgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTtcblxuICAgIGZ1bmN0aW9uIGdldFgoY2gpIHtcbiAgICAgIHZhciBzcCA9IGN1cnNvckNvb3JkcyhjbSwgUG9zKGxpbmVObywgY2gpLCBcImxpbmVcIiwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlKTtcbiAgICAgIHdyb25nTGluZSA9IHRydWU7XG4gICAgICBpZiAoaW5uZXJPZmYgPiBzcC5ib3R0b20pIHJldHVybiBzcC5sZWZ0IC0gYWRqdXN0O1xuICAgICAgZWxzZSBpZiAoaW5uZXJPZmYgPCBzcC50b3ApIHJldHVybiBzcC5sZWZ0ICsgYWRqdXN0O1xuICAgICAgZWxzZSB3cm9uZ0xpbmUgPSBmYWxzZTtcbiAgICAgIHJldHVybiBzcC5sZWZ0O1xuICAgIH1cblxuICAgIHZhciBiaWRpID0gZ2V0T3JkZXIobGluZU9iaiksIGRpc3QgPSBsaW5lT2JqLnRleHQubGVuZ3RoO1xuICAgIHZhciBmcm9tID0gbGluZUxlZnQobGluZU9iaiksIHRvID0gbGluZVJpZ2h0KGxpbmVPYmopO1xuICAgIHZhciBmcm9tWCA9IGdldFgoZnJvbSksIGZyb21PdXRzaWRlID0gd3JvbmdMaW5lLCB0b1ggPSBnZXRYKHRvKSwgdG9PdXRzaWRlID0gd3JvbmdMaW5lO1xuXG4gICAgaWYgKHggPiB0b1gpIHJldHVybiBQb3NXaXRoSW5mbyhsaW5lTm8sIHRvLCB0b091dHNpZGUsIDEpO1xuICAgIC8vIERvIGEgYmluYXJ5IHNlYXJjaCBiZXR3ZWVuIHRoZXNlIGJvdW5kcy5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBpZiAoYmlkaSA/IHRvID09IGZyb20gfHwgdG8gPT0gbW92ZVZpc3VhbGx5KGxpbmVPYmosIGZyb20sIDEpIDogdG8gLSBmcm9tIDw9IDEpIHtcbiAgICAgICAgdmFyIGNoID0geCA8IGZyb21YIHx8IHggLSBmcm9tWCA8PSB0b1ggLSB4ID8gZnJvbSA6IHRvO1xuICAgICAgICB2YXIgeERpZmYgPSB4IC0gKGNoID09IGZyb20gPyBmcm9tWCA6IHRvWCk7XG4gICAgICAgIHdoaWxlIChpc0V4dGVuZGluZ0NoYXIobGluZU9iai50ZXh0LmNoYXJBdChjaCkpKSArK2NoO1xuICAgICAgICB2YXIgcG9zID0gUG9zV2l0aEluZm8obGluZU5vLCBjaCwgY2ggPT0gZnJvbSA/IGZyb21PdXRzaWRlIDogdG9PdXRzaWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeERpZmYgPCAtMSA/IC0xIDogeERpZmYgPiAxID8gMSA6IDApO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgfVxuICAgICAgdmFyIHN0ZXAgPSBNYXRoLmNlaWwoZGlzdCAvIDIpLCBtaWRkbGUgPSBmcm9tICsgc3RlcDtcbiAgICAgIGlmIChiaWRpKSB7XG4gICAgICAgIG1pZGRsZSA9IGZyb207XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RlcDsgKytpKSBtaWRkbGUgPSBtb3ZlVmlzdWFsbHkobGluZU9iaiwgbWlkZGxlLCAxKTtcbiAgICAgIH1cbiAgICAgIHZhciBtaWRkbGVYID0gZ2V0WChtaWRkbGUpO1xuICAgICAgaWYgKG1pZGRsZVggPiB4KSB7dG8gPSBtaWRkbGU7IHRvWCA9IG1pZGRsZVg7IGlmICh0b091dHNpZGUgPSB3cm9uZ0xpbmUpIHRvWCArPSAxMDAwOyBkaXN0ID0gc3RlcDt9XG4gICAgICBlbHNlIHtmcm9tID0gbWlkZGxlOyBmcm9tWCA9IG1pZGRsZVg7IGZyb21PdXRzaWRlID0gd3JvbmdMaW5lOyBkaXN0IC09IHN0ZXA7fVxuICAgIH1cbiAgfVxuXG4gIHZhciBtZWFzdXJlVGV4dDtcbiAgLy8gQ29tcHV0ZSB0aGUgZGVmYXVsdCB0ZXh0IGhlaWdodC5cbiAgZnVuY3Rpb24gdGV4dEhlaWdodChkaXNwbGF5KSB7XG4gICAgaWYgKGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCAhPSBudWxsKSByZXR1cm4gZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0O1xuICAgIGlmIChtZWFzdXJlVGV4dCA9PSBudWxsKSB7XG4gICAgICBtZWFzdXJlVGV4dCA9IGVsdChcInByZVwiKTtcbiAgICAgIC8vIE1lYXN1cmUgYSBidW5jaCBvZiBsaW5lcywgZm9yIGJyb3dzZXJzIHRoYXQgY29tcHV0ZVxuICAgICAgLy8gZnJhY3Rpb25hbCBoZWlnaHRzLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OTsgKytpKSB7XG4gICAgICAgIG1lYXN1cmVUZXh0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKSk7XG4gICAgICAgIG1lYXN1cmVUZXh0LmFwcGVuZENoaWxkKGVsdChcImJyXCIpKTtcbiAgICAgIH1cbiAgICAgIG1lYXN1cmVUZXh0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKSk7XG4gICAgfVxuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgbWVhc3VyZVRleHQpO1xuICAgIHZhciBoZWlnaHQgPSBtZWFzdXJlVGV4dC5vZmZzZXRIZWlnaHQgLyA1MDtcbiAgICBpZiAoaGVpZ2h0ID4gMykgZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkubWVhc3VyZSk7XG4gICAgcmV0dXJuIGhlaWdodCB8fCAxO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgZGVmYXVsdCBjaGFyYWN0ZXIgd2lkdGguXG4gIGZ1bmN0aW9uIGNoYXJXaWR0aChkaXNwbGF5KSB7XG4gICAgaWYgKGRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoICE9IG51bGwpIHJldHVybiBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aDtcbiAgICB2YXIgYW5jaG9yID0gZWx0KFwic3BhblwiLCBcInh4eHh4eHh4eHhcIik7XG4gICAgdmFyIHByZSA9IGVsdChcInByZVwiLCBbYW5jaG9yXSk7XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBwcmUpO1xuICAgIHZhciByZWN0ID0gYW5jaG9yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB3aWR0aCA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSAvIDEwO1xuICAgIGlmICh3aWR0aCA+IDIpIGRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoID0gd2lkdGg7XG4gICAgcmV0dXJuIHdpZHRoIHx8IDEwO1xuICB9XG5cbiAgLy8gT1BFUkFUSU9OU1xuXG4gIC8vIE9wZXJhdGlvbnMgYXJlIHVzZWQgdG8gd3JhcCBhIHNlcmllcyBvZiBjaGFuZ2VzIHRvIHRoZSBlZGl0b3JcbiAgLy8gc3RhdGUgaW4gc3VjaCBhIHdheSB0aGF0IGVhY2ggY2hhbmdlIHdvbid0IGhhdmUgdG8gdXBkYXRlIHRoZVxuICAvLyBjdXJzb3IgYW5kIGRpc3BsYXkgKHdoaWNoIHdvdWxkIGJlIGF3a3dhcmQsIHNsb3csIGFuZFxuICAvLyBlcnJvci1wcm9uZSkuIEluc3RlYWQsIGRpc3BsYXkgdXBkYXRlcyBhcmUgYmF0Y2hlZCBhbmQgdGhlbiBhbGxcbiAgLy8gY29tYmluZWQgYW5kIGV4ZWN1dGVkIGF0IG9uY2UuXG5cbiAgdmFyIG9wZXJhdGlvbkdyb3VwID0gbnVsbDtcblxuICB2YXIgbmV4dE9wSWQgPSAwO1xuICAvLyBTdGFydCBhIG5ldyBvcGVyYXRpb24uXG4gIGZ1bmN0aW9uIHN0YXJ0T3BlcmF0aW9uKGNtKSB7XG4gICAgY20uY3VyT3AgPSB7XG4gICAgICBjbTogY20sXG4gICAgICB2aWV3Q2hhbmdlZDogZmFsc2UsICAgICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB0aGF0IGxpbmVzIG1pZ2h0IG5lZWQgdG8gYmUgcmVkcmF3blxuICAgICAgc3RhcnRIZWlnaHQ6IGNtLmRvYy5oZWlnaHQsIC8vIFVzZWQgdG8gZGV0ZWN0IG5lZWQgdG8gdXBkYXRlIHNjcm9sbGJhclxuICAgICAgZm9yY2VVcGRhdGU6IGZhbHNlLCAgICAgIC8vIFVzZWQgdG8gZm9yY2UgYSByZWRyYXdcbiAgICAgIHVwZGF0ZUlucHV0OiBudWxsLCAgICAgICAvLyBXaGV0aGVyIHRvIHJlc2V0IHRoZSBpbnB1dCB0ZXh0YXJlYVxuICAgICAgdHlwaW5nOiBmYWxzZSwgICAgICAgICAgIC8vIFdoZXRoZXIgdGhpcyByZXNldCBzaG91bGQgYmUgY2FyZWZ1bCB0byBsZWF2ZSBleGlzdGluZyB0ZXh0IChmb3IgY29tcG9zaXRpbmcpXG4gICAgICBjaGFuZ2VPYmpzOiBudWxsLCAgICAgICAgLy8gQWNjdW11bGF0ZWQgY2hhbmdlcywgZm9yIGZpcmluZyBjaGFuZ2UgZXZlbnRzXG4gICAgICBjdXJzb3JBY3Rpdml0eUhhbmRsZXJzOiBudWxsLCAvLyBTZXQgb2YgaGFuZGxlcnMgdG8gZmlyZSBjdXJzb3JBY3Rpdml0eSBvblxuICAgICAgY3Vyc29yQWN0aXZpdHlDYWxsZWQ6IDAsIC8vIFRyYWNrcyB3aGljaCBjdXJzb3JBY3Rpdml0eSBoYW5kbGVycyBoYXZlIGJlZW4gY2FsbGVkIGFscmVhZHlcbiAgICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGZhbHNlLCAvLyBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gbmVlZHMgdG8gYmUgcmVkcmF3blxuICAgICAgdXBkYXRlTWF4TGluZTogZmFsc2UsICAgIC8vIFNldCB3aGVuIHRoZSB3aWRlc3QgbGluZSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIGFuZXdcbiAgICAgIHNjcm9sbExlZnQ6IG51bGwsIHNjcm9sbFRvcDogbnVsbCwgLy8gSW50ZXJtZWRpYXRlIHNjcm9sbCBwb3NpdGlvbiwgbm90IHB1c2hlZCB0byBET00geWV0XG4gICAgICBzY3JvbGxUb1BvczogbnVsbCwgICAgICAgLy8gVXNlZCB0byBzY3JvbGwgdG8gYSBzcGVjaWZpYyBwb3NpdGlvblxuICAgICAgZm9jdXM6IGZhbHNlLFxuICAgICAgaWQ6ICsrbmV4dE9wSWQgICAgICAgICAgIC8vIFVuaXF1ZSBJRFxuICAgIH07XG4gICAgaWYgKG9wZXJhdGlvbkdyb3VwKSB7XG4gICAgICBvcGVyYXRpb25Hcm91cC5vcHMucHVzaChjbS5jdXJPcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNtLmN1ck9wLm93bnNHcm91cCA9IG9wZXJhdGlvbkdyb3VwID0ge1xuICAgICAgICBvcHM6IFtjbS5jdXJPcF0sXG4gICAgICAgIGRlbGF5ZWRDYWxsYmFja3M6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVDYWxsYmFja3NGb3JPcHMoZ3JvdXApIHtcbiAgICAvLyBDYWxscyBkZWxheWVkIGNhbGxiYWNrcyBhbmQgY3Vyc29yQWN0aXZpdHkgaGFuZGxlcnMgdW50aWwgbm9cbiAgICAvLyBuZXcgb25lcyBhcHBlYXJcbiAgICB2YXIgY2FsbGJhY2tzID0gZ3JvdXAuZGVsYXllZENhbGxiYWNrcywgaSA9IDA7XG4gICAgZG8ge1xuICAgICAgZm9yICg7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspXG4gICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKG51bGwpO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBncm91cC5vcHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIG9wID0gZ3JvdXAub3BzW2pdO1xuICAgICAgICBpZiAob3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycylcbiAgICAgICAgICB3aGlsZSAob3AuY3Vyc29yQWN0aXZpdHlDYWxsZWQgPCBvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzLmxlbmd0aClcbiAgICAgICAgICAgIG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnNbb3AuY3Vyc29yQWN0aXZpdHlDYWxsZWQrK10uY2FsbChudWxsLCBvcC5jbSk7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoaSA8IGNhbGxiYWNrcy5sZW5ndGgpO1xuICB9XG5cbiAgLy8gRmluaXNoIGFuIG9wZXJhdGlvbiwgdXBkYXRpbmcgdGhlIGRpc3BsYXkgYW5kIHNpZ25hbGxpbmcgZGVsYXllZCBldmVudHNcbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uKGNtKSB7XG4gICAgdmFyIG9wID0gY20uY3VyT3AsIGdyb3VwID0gb3Aub3duc0dyb3VwO1xuICAgIGlmICghZ3JvdXApIHJldHVybjtcblxuICAgIHRyeSB7IGZpcmVDYWxsYmFja3NGb3JPcHMoZ3JvdXApOyB9XG4gICAgZmluYWxseSB7XG4gICAgICBvcGVyYXRpb25Hcm91cCA9IG51bGw7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwLm9wcy5sZW5ndGg7IGkrKylcbiAgICAgICAgZ3JvdXAub3BzW2ldLmNtLmN1ck9wID0gbnVsbDtcbiAgICAgIGVuZE9wZXJhdGlvbnMoZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoZSBET00gdXBkYXRlcyBkb25lIHdoZW4gYW4gb3BlcmF0aW9uIGZpbmlzaGVzIGFyZSBiYXRjaGVkIHNvXG4gIC8vIHRoYXQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIHJlbGF5b3V0cyBhcmUgcmVxdWlyZWQuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbnMoZ3JvdXApIHtcbiAgICB2YXIgb3BzID0gZ3JvdXAub3BzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxuICAgICAgZW5kT3BlcmF0aW9uX1IxKG9wc1tpXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFdyaXRlIERPTSAobWF5YmUpXG4gICAgICBlbmRPcGVyYXRpb25fVzEob3BzW2ldKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gUmVhZCBET01cbiAgICAgIGVuZE9wZXJhdGlvbl9SMihvcHNbaV0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBXcml0ZSBET00gKG1heWJlKVxuICAgICAgZW5kT3BlcmF0aW9uX1cyKG9wc1tpXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFJlYWQgRE9NXG4gICAgICBlbmRPcGVyYXRpb25fZmluaXNoKG9wc1tpXSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fUjEob3ApIHtcbiAgICB2YXIgY20gPSBvcC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgbWF5YmVDbGlwU2Nyb2xsYmFycyhjbSk7XG4gICAgaWYgKG9wLnVwZGF0ZU1heExpbmUpIGZpbmRNYXhMaW5lKGNtKTtcblxuICAgIG9wLm11c3RVcGRhdGUgPSBvcC52aWV3Q2hhbmdlZCB8fCBvcC5mb3JjZVVwZGF0ZSB8fCBvcC5zY3JvbGxUb3AgIT0gbnVsbCB8fFxuICAgICAgb3Auc2Nyb2xsVG9Qb3MgJiYgKG9wLnNjcm9sbFRvUG9zLmZyb20ubGluZSA8IGRpc3BsYXkudmlld0Zyb20gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcC5zY3JvbGxUb1Bvcy50by5saW5lID49IGRpc3BsYXkudmlld1RvKSB8fFxuICAgICAgZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICBvcC51cGRhdGUgPSBvcC5tdXN0VXBkYXRlICYmXG4gICAgICBuZXcgRGlzcGxheVVwZGF0ZShjbSwgb3AubXVzdFVwZGF0ZSAmJiB7dG9wOiBvcC5zY3JvbGxUb3AsIGVuc3VyZTogb3Auc2Nyb2xsVG9Qb3N9LCBvcC5mb3JjZVVwZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fVzEob3ApIHtcbiAgICBvcC51cGRhdGVkRGlzcGxheSA9IG9wLm11c3RVcGRhdGUgJiYgdXBkYXRlRGlzcGxheUlmTmVlZGVkKG9wLmNtLCBvcC51cGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1IyKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSkgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pO1xuXG4gICAgb3AuYmFyTWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcblxuICAgIC8vIElmIHRoZSBtYXggbGluZSBjaGFuZ2VkIHNpbmNlIGl0IHdhcyBsYXN0IG1lYXN1cmVkLCBtZWFzdXJlIGl0LFxuICAgIC8vIGFuZCBlbnN1cmUgdGhlIGRvY3VtZW50J3Mgd2lkdGggbWF0Y2hlcyBpdC5cbiAgICAvLyB1cGRhdGVEaXNwbGF5X1cyIHdpbGwgdXNlIHRoZXNlIHByb3BlcnRpZXMgdG8gZG8gdGhlIGFjdHVhbCByZXNpemluZ1xuICAgIGlmIChkaXNwbGF5Lm1heExpbmVDaGFuZ2VkICYmICFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xuICAgICAgb3AuYWRqdXN0V2lkdGhUbyA9IG1lYXN1cmVDaGFyKGNtLCBkaXNwbGF5Lm1heExpbmUsIGRpc3BsYXkubWF4TGluZS50ZXh0Lmxlbmd0aCkubGVmdCArIDM7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyV2lkdGggPSBvcC5hZGp1c3RXaWR0aFRvO1xuICAgICAgb3AuYmFyTWVhc3VyZS5zY3JvbGxXaWR0aCA9XG4gICAgICAgIE1hdGgubWF4KGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgsIGRpc3BsYXkuc2l6ZXIub2Zmc2V0TGVmdCArIG9wLmFkanVzdFdpZHRoVG8gKyBzY3JvbGxHYXAoY20pICsgY20uZGlzcGxheS5iYXJXaWR0aCk7XG4gICAgICBvcC5tYXhTY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0ICsgb3AuYWRqdXN0V2lkdGhUbyAtIGRpc3BsYXlXaWR0aChjbSkpO1xuICAgIH1cblxuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSB8fCBvcC5zZWxlY3Rpb25DaGFuZ2VkKVxuICAgICAgb3AucHJlcGFyZWRTZWxlY3Rpb24gPSBkaXNwbGF5LmlucHV0LnByZXBhcmVTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9XMihvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtO1xuXG4gICAgaWYgKG9wLmFkanVzdFdpZHRoVG8gIT0gbnVsbCkge1xuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aCA9IG9wLmFkanVzdFdpZHRoVG8gKyBcInB4XCI7XG4gICAgICBpZiAob3AubWF4U2Nyb2xsTGVmdCA8IGNtLmRvYy5zY3JvbGxMZWZ0KVxuICAgICAgICBzZXRTY3JvbGxMZWZ0KGNtLCBNYXRoLm1pbihjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQsIG9wLm1heFNjcm9sbExlZnQpLCB0cnVlKTtcbiAgICAgIGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAob3AucHJlcGFyZWRTZWxlY3Rpb24pXG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnNob3dTZWxlY3Rpb24ob3AucHJlcGFyZWRTZWxlY3Rpb24pO1xuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSB8fCBvcC5zdGFydEhlaWdodCAhPSBjbS5kb2MuaGVpZ2h0KVxuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgb3AuYmFyTWVhc3VyZSk7XG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KVxuICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIG9wLmJhck1lYXN1cmUpO1xuXG4gICAgaWYgKG9wLnNlbGVjdGlvbkNoYW5nZWQpIHJlc3RhcnRCbGluayhjbSk7XG5cbiAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCAmJiBvcC51cGRhdGVJbnB1dClcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQob3AudHlwaW5nKTtcbiAgICBpZiAob3AuZm9jdXMgJiYgb3AuZm9jdXMgPT0gYWN0aXZlRWx0KCkgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSlcbiAgICAgIGVuc3VyZUZvY3VzKG9wLmNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9maW5pc2gob3ApIHtcbiAgICB2YXIgY20gPSBvcC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcblxuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSkgcG9zdFVwZGF0ZURpc3BsYXkoY20sIG9wLnVwZGF0ZSk7XG5cbiAgICAvLyBBYm9ydCBtb3VzZSB3aGVlbCBkZWx0YSBtZWFzdXJlbWVudCwgd2hlbiBzY3JvbGxpbmcgZXhwbGljaXRseVxuICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYICE9IG51bGwgJiYgKG9wLnNjcm9sbFRvcCAhPSBudWxsIHx8IG9wLnNjcm9sbExlZnQgIT0gbnVsbCB8fCBvcC5zY3JvbGxUb1BvcykpXG4gICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gZGlzcGxheS53aGVlbFN0YXJ0WSA9IG51bGw7XG5cbiAgICAvLyBQcm9wYWdhdGUgdGhlIHNjcm9sbCBwb3NpdGlvbiB0byB0aGUgYWN0dWFsIERPTSBzY3JvbGxlclxuICAgIGlmIChvcC5zY3JvbGxUb3AgIT0gbnVsbCAmJiAoZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgIT0gb3Auc2Nyb2xsVG9wIHx8IG9wLmZvcmNlU2Nyb2xsKSkge1xuICAgICAgZG9jLnNjcm9sbFRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsSGVpZ2h0IC0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQsIG9wLnNjcm9sbFRvcCkpO1xuICAgICAgZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChkb2Muc2Nyb2xsVG9wKTtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gZG9jLnNjcm9sbFRvcDtcbiAgICB9XG4gICAgaWYgKG9wLnNjcm9sbExlZnQgIT0gbnVsbCAmJiAoZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICE9IG9wLnNjcm9sbExlZnQgfHwgb3AuZm9yY2VTY3JvbGwpKSB7XG4gICAgICBkb2Muc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoLCBvcC5zY3JvbGxMZWZ0KSk7XG4gICAgICBkaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdChkb2Muc2Nyb2xsTGVmdCk7XG4gICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgPSBkb2Muc2Nyb2xsTGVmdDtcbiAgICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTtcbiAgICB9XG4gICAgLy8gSWYgd2UgbmVlZCB0byBzY3JvbGwgYSBzcGVjaWZpYyBwb3NpdGlvbiBpbnRvIHZpZXcsIGRvIHNvLlxuICAgIGlmIChvcC5zY3JvbGxUb1Bvcykge1xuICAgICAgdmFyIGNvb3JkcyA9IHNjcm9sbFBvc0ludG9WaWV3KGNtLCBjbGlwUG9zKGRvYywgb3Auc2Nyb2xsVG9Qb3MuZnJvbSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyhkb2MsIG9wLnNjcm9sbFRvUG9zLnRvKSwgb3Auc2Nyb2xsVG9Qb3MubWFyZ2luKTtcbiAgICAgIGlmIChvcC5zY3JvbGxUb1Bvcy5pc0N1cnNvciAmJiBjbS5zdGF0ZS5mb2N1c2VkKSBtYXliZVNjcm9sbFdpbmRvdyhjbSwgY29vcmRzKTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIGV2ZW50cyBmb3IgbWFya2VycyB0aGF0IGFyZSBoaWRkZW4vdW5pZGRlbiBieSBlZGl0aW5nIG9yXG4gICAgLy8gdW5kb2luZ1xuICAgIHZhciBoaWRkZW4gPSBvcC5tYXliZUhpZGRlbk1hcmtlcnMsIHVuaGlkZGVuID0gb3AubWF5YmVVbmhpZGRlbk1hcmtlcnM7XG4gICAgaWYgKGhpZGRlbikgZm9yICh2YXIgaSA9IDA7IGkgPCBoaWRkZW4ubGVuZ3RoOyArK2kpXG4gICAgICBpZiAoIWhpZGRlbltpXS5saW5lcy5sZW5ndGgpIHNpZ25hbChoaWRkZW5baV0sIFwiaGlkZVwiKTtcbiAgICBpZiAodW5oaWRkZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgdW5oaWRkZW4ubGVuZ3RoOyArK2kpXG4gICAgICBpZiAodW5oaWRkZW5baV0ubGluZXMubGVuZ3RoKSBzaWduYWwodW5oaWRkZW5baV0sIFwidW5oaWRlXCIpO1xuXG4gICAgaWYgKGRpc3BsYXkud3JhcHBlci5vZmZzZXRIZWlnaHQpXG4gICAgICBkb2Muc2Nyb2xsVG9wID0gY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG5cbiAgICAvLyBGaXJlIGNoYW5nZSBldmVudHMsIGFuZCBkZWxheWVkIGV2ZW50IGhhbmRsZXJzXG4gICAgaWYgKG9wLmNoYW5nZU9ianMpXG4gICAgICBzaWduYWwoY20sIFwiY2hhbmdlc1wiLCBjbSwgb3AuY2hhbmdlT2Jqcyk7XG4gICAgaWYgKG9wLnVwZGF0ZSlcbiAgICAgIG9wLnVwZGF0ZS5maW5pc2goKTtcbiAgfVxuXG4gIC8vIFJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gaW4gYW4gb3BlcmF0aW9uXG4gIGZ1bmN0aW9uIHJ1bkluT3AoY20sIGYpIHtcbiAgICBpZiAoY20uY3VyT3ApIHJldHVybiBmKCk7XG4gICAgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgIHRyeSB7IHJldHVybiBmKCk7IH1cbiAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICB9XG4gIC8vIFdyYXBzIGEgZnVuY3Rpb24gaW4gYW4gb3BlcmF0aW9uLiBSZXR1cm5zIHRoZSB3cmFwcGVkIGZ1bmN0aW9uLlxuICBmdW5jdGlvbiBvcGVyYXRpb24oY20sIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoY20uY3VyT3ApIHJldHVybiBmLmFwcGx5KGNtLCBhcmd1bWVudHMpO1xuICAgICAgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgICAgdHJ5IHsgcmV0dXJuIGYuYXBwbHkoY20sIGFyZ3VtZW50cyk7IH1cbiAgICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gICAgfTtcbiAgfVxuICAvLyBVc2VkIHRvIGFkZCBtZXRob2RzIHRvIGVkaXRvciBhbmQgZG9jIGluc3RhbmNlcywgd3JhcHBpbmcgdGhlbSBpblxuICAvLyBvcGVyYXRpb25zLlxuICBmdW5jdGlvbiBtZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY3VyT3ApIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBzdGFydE9wZXJhdGlvbih0aGlzKTtcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cbiAgICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24odGhpcyk7IH1cbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGRvY01ldGhvZE9wKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY20gPSB0aGlzLmNtO1xuICAgICAgaWYgKCFjbSB8fCBjbS5jdXJPcCkgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cbiAgICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIFZJRVcgVFJBQ0tJTkdcblxuICAvLyBUaGVzZSBvYmplY3RzIGFyZSB1c2VkIHRvIHJlcHJlc2VudCB0aGUgdmlzaWJsZSAoY3VycmVudGx5IGRyYXduKVxuICAvLyBwYXJ0IG9mIHRoZSBkb2N1bWVudC4gQSBMaW5lVmlldyBtYXkgY29ycmVzcG9uZCB0byBtdWx0aXBsZVxuICAvLyBsb2dpY2FsIGxpbmVzLCBpZiB0aG9zZSBhcmUgY29ubmVjdGVkIGJ5IGNvbGxhcHNlZCByYW5nZXMuXG4gIGZ1bmN0aW9uIExpbmVWaWV3KGRvYywgbGluZSwgbGluZU4pIHtcbiAgICAvLyBUaGUgc3RhcnRpbmcgbGluZVxuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgLy8gQ29udGludWluZyBsaW5lcywgaWYgYW55XG4gICAgdGhpcy5yZXN0ID0gdmlzdWFsTGluZUNvbnRpbnVlZChsaW5lKTtcbiAgICAvLyBOdW1iZXIgb2YgbG9naWNhbCBsaW5lcyBpbiB0aGlzIHZpc3VhbCBsaW5lXG4gICAgdGhpcy5zaXplID0gdGhpcy5yZXN0ID8gbGluZU5vKGxzdCh0aGlzLnJlc3QpKSAtIGxpbmVOICsgMSA6IDE7XG4gICAgdGhpcy5ub2RlID0gdGhpcy50ZXh0ID0gbnVsbDtcbiAgICB0aGlzLmhpZGRlbiA9IGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2YgTGluZVZpZXcgb2JqZWN0cyBmb3IgdGhlIGdpdmVuIGxpbmVzLlxuICBmdW5jdGlvbiBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgYXJyYXkgPSBbXSwgbmV4dFBvcztcbiAgICBmb3IgKHZhciBwb3MgPSBmcm9tOyBwb3MgPCB0bzsgcG9zID0gbmV4dFBvcykge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgTGluZVZpZXcoY20uZG9jLCBnZXRMaW5lKGNtLmRvYywgcG9zKSwgcG9zKTtcbiAgICAgIG5leHRQb3MgPSBwb3MgKyB2aWV3LnNpemU7XG4gICAgICBhcnJheS5wdXNoKHZpZXcpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cblxuICAvLyBVcGRhdGVzIHRoZSBkaXNwbGF5LnZpZXcgZGF0YSBzdHJ1Y3R1cmUgZm9yIGEgZ2l2ZW4gY2hhbmdlIHRvIHRoZVxuICAvLyBkb2N1bWVudC4gRnJvbSBhbmQgdG8gYXJlIGluIHByZS1jaGFuZ2UgY29vcmRpbmF0ZXMuIExlbmRpZmYgaXNcbiAgLy8gdGhlIGFtb3VudCBvZiBsaW5lcyBhZGRlZCBvciBzdWJ0cmFjdGVkIGJ5IHRoZSBjaGFuZ2UuIFRoaXMgaXNcbiAgLy8gdXNlZCBmb3IgY2hhbmdlcyB0aGF0IHNwYW4gbXVsdGlwbGUgbGluZXMsIG9yIGNoYW5nZSB0aGUgd2F5XG4gIC8vIGxpbmVzIGFyZSBkaXZpZGVkIGludG8gdmlzdWFsIGxpbmVzLiByZWdMaW5lQ2hhbmdlIChiZWxvdylcbiAgLy8gcmVnaXN0ZXJzIHNpbmdsZS1saW5lIGNoYW5nZXMuXG4gIGZ1bmN0aW9uIHJlZ0NoYW5nZShjbSwgZnJvbSwgdG8sIGxlbmRpZmYpIHtcbiAgICBpZiAoZnJvbSA9PSBudWxsKSBmcm9tID0gY20uZG9jLmZpcnN0O1xuICAgIGlmICh0byA9PSBudWxsKSB0byA9IGNtLmRvYy5maXJzdCArIGNtLmRvYy5zaXplO1xuICAgIGlmICghbGVuZGlmZikgbGVuZGlmZiA9IDA7XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGxlbmRpZmYgJiYgdG8gPCBkaXNwbGF5LnZpZXdUbyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPiBmcm9tKSlcbiAgICAgIGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPSBmcm9tO1xuXG4gICAgY20uY3VyT3Audmlld0NoYW5nZWQgPSB0cnVlO1xuXG4gICAgaWYgKGZyb20gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gQ2hhbmdlIGFmdGVyXG4gICAgICBpZiAoc2F3Q29sbGFwc2VkU3BhbnMgJiYgdmlzdWFsTGluZU5vKGNtLmRvYywgZnJvbSkgPCBkaXNwbGF5LnZpZXdUbylcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICB9IGVsc2UgaWYgKHRvIDw9IGRpc3BsYXkudmlld0Zyb20pIHsgLy8gQ2hhbmdlIGJlZm9yZVxuICAgICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zICYmIHZpc3VhbExpbmVFbmRObyhjbS5kb2MsIHRvICsgbGVuZGlmZikgPiBkaXNwbGF5LnZpZXdGcm9tKSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwbGF5LnZpZXdGcm9tICs9IGxlbmRpZmY7XG4gICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChmcm9tIDw9IGRpc3BsYXkudmlld0Zyb20gJiYgdG8gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gRnVsbCBvdmVybGFwXG4gICAgICByZXNldFZpZXcoY20pO1xuICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7IC8vIFRvcCBvdmVybGFwXG4gICAgICB2YXIgY3V0ID0gdmlld0N1dHRpbmdQb2ludChjbSwgdG8sIHRvICsgbGVuZGlmZiwgMSk7XG4gICAgICBpZiAoY3V0KSB7XG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZShjdXQuaW5kZXgpO1xuICAgICAgICBkaXNwbGF5LnZpZXdGcm9tID0gY3V0LmxpbmVOO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRvID49IGRpc3BsYXkudmlld1RvKSB7IC8vIEJvdHRvbSBvdmVybGFwXG4gICAgICB2YXIgY3V0ID0gdmlld0N1dHRpbmdQb2ludChjbSwgZnJvbSwgZnJvbSwgLTEpO1xuICAgICAgaWYgKGN1dCkge1xuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgY3V0LmluZGV4KTtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gPSBjdXQubGluZU47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIEdhcCBpbiB0aGUgbWlkZGxlXG4gICAgICB2YXIgY3V0VG9wID0gdmlld0N1dHRpbmdQb2ludChjbSwgZnJvbSwgZnJvbSwgLTEpO1xuICAgICAgdmFyIGN1dEJvdCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIHRvLCB0byArIGxlbmRpZmYsIDEpO1xuICAgICAgaWYgKGN1dFRvcCAmJiBjdXRCb3QpIHtcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGN1dFRvcC5pbmRleClcbiAgICAgICAgICAuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBjdXRUb3AubGluZU4sIGN1dEJvdC5saW5lTikpXG4gICAgICAgICAgLmNvbmNhdChkaXNwbGF5LnZpZXcuc2xpY2UoY3V0Qm90LmluZGV4KSk7XG4gICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBleHQgPSBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XG4gICAgaWYgKGV4dCkge1xuICAgICAgaWYgKHRvIDwgZXh0LmxpbmVOKVxuICAgICAgICBleHQubGluZU4gKz0gbGVuZGlmZjtcbiAgICAgIGVsc2UgaWYgKGZyb20gPCBleHQubGluZU4gKyBleHQuc2l6ZSlcbiAgICAgICAgZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyBSZWdpc3RlciBhIGNoYW5nZSB0byBhIHNpbmdsZSBsaW5lLiBUeXBlIG11c3QgYmUgb25lIG9mIFwidGV4dFwiLFxuICAvLyBcImd1dHRlclwiLCBcImNsYXNzXCIsIFwid2lkZ2V0XCJcbiAgZnVuY3Rpb24gcmVnTGluZUNoYW5nZShjbSwgbGluZSwgdHlwZSkge1xuICAgIGNtLmN1ck9wLnZpZXdDaGFuZ2VkID0gdHJ1ZTtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGxpbmUgPj0gZXh0LmxpbmVOICYmIGxpbmUgPCBleHQubGluZU4gKyBleHQuc2l6ZSlcbiAgICAgIGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG5cbiAgICBpZiAobGluZSA8IGRpc3BsYXkudmlld0Zyb20gfHwgbGluZSA+PSBkaXNwbGF5LnZpZXdUbykgcmV0dXJuO1xuICAgIHZhciBsaW5lVmlldyA9IGRpc3BsYXkudmlld1tmaW5kVmlld0luZGV4KGNtLCBsaW5lKV07XG4gICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbnVsbCkgcmV0dXJuO1xuICAgIHZhciBhcnIgPSBsaW5lVmlldy5jaGFuZ2VzIHx8IChsaW5lVmlldy5jaGFuZ2VzID0gW10pO1xuICAgIGlmIChpbmRleE9mKGFyciwgdHlwZSkgPT0gLTEpIGFyci5wdXNoKHR5cGUpO1xuICB9XG5cbiAgLy8gQ2xlYXIgdGhlIHZpZXcuXG4gIGZ1bmN0aW9uIHJlc2V0VmlldyhjbSkge1xuICAgIGNtLmRpc3BsYXkudmlld0Zyb20gPSBjbS5kaXNwbGF5LnZpZXdUbyA9IGNtLmRvYy5maXJzdDtcbiAgICBjbS5kaXNwbGF5LnZpZXcgPSBbXTtcbiAgICBjbS5kaXNwbGF5LnZpZXdPZmZzZXQgPSAwO1xuICB9XG5cbiAgLy8gRmluZCB0aGUgdmlldyBlbGVtZW50IGNvcnJlc3BvbmRpbmcgdG8gYSBnaXZlbiBsaW5lLiBSZXR1cm4gbnVsbFxuICAvLyB3aGVuIHRoZSBsaW5lIGlzbid0IHZpc2libGUuXG4gIGZ1bmN0aW9uIGZpbmRWaWV3SW5kZXgoY20sIG4pIHtcbiAgICBpZiAobiA+PSBjbS5kaXNwbGF5LnZpZXdUbykgcmV0dXJuIG51bGw7XG4gICAgbiAtPSBjbS5kaXNwbGF5LnZpZXdGcm9tO1xuICAgIGlmIChuIDwgMCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBuIC09IHZpZXdbaV0uc2l6ZTtcbiAgICAgIGlmIChuIDwgMCkgcmV0dXJuIGk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdmlld0N1dHRpbmdQb2ludChjbSwgb2xkTiwgbmV3TiwgZGlyKSB7XG4gICAgdmFyIGluZGV4ID0gZmluZFZpZXdJbmRleChjbSwgb2xkTiksIGRpZmYsIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXc7XG4gICAgaWYgKCFzYXdDb2xsYXBzZWRTcGFucyB8fCBuZXdOID09IGNtLmRvYy5maXJzdCArIGNtLmRvYy5zaXplKVxuICAgICAgcmV0dXJuIHtpbmRleDogaW5kZXgsIGxpbmVOOiBuZXdOfTtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGNtLmRpc3BsYXkudmlld0Zyb207IGkgPCBpbmRleDsgaSsrKVxuICAgICAgbiArPSB2aWV3W2ldLnNpemU7XG4gICAgaWYgKG4gIT0gb2xkTikge1xuICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgaWYgKGluZGV4ID09IHZpZXcubGVuZ3RoIC0gMSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGRpZmYgPSAobiArIHZpZXdbaW5kZXhdLnNpemUpIC0gb2xkTjtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpZmYgPSBuIC0gb2xkTjtcbiAgICAgIH1cbiAgICAgIG9sZE4gKz0gZGlmZjsgbmV3TiArPSBkaWZmO1xuICAgIH1cbiAgICB3aGlsZSAodmlzdWFsTGluZU5vKGNtLmRvYywgbmV3TikgIT0gbmV3Tikge1xuICAgICAgaWYgKGluZGV4ID09IChkaXIgPCAwID8gMCA6IHZpZXcubGVuZ3RoIC0gMSkpIHJldHVybiBudWxsO1xuICAgICAgbmV3TiArPSBkaXIgKiB2aWV3W2luZGV4IC0gKGRpciA8IDAgPyAxIDogMCldLnNpemU7XG4gICAgICBpbmRleCArPSBkaXI7XG4gICAgfVxuICAgIHJldHVybiB7aW5kZXg6IGluZGV4LCBsaW5lTjogbmV3Tn07XG4gIH1cblxuICAvLyBGb3JjZSB0aGUgdmlldyB0byBjb3ZlciBhIGdpdmVuIHJhbmdlLCBhZGRpbmcgZW1wdHkgdmlldyBlbGVtZW50XG4gIC8vIG9yIGNsaXBwaW5nIG9mZiBleGlzdGluZyBvbmVzIGFzIG5lZWRlZC5cbiAgZnVuY3Rpb24gYWRqdXN0VmlldyhjbSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHZpZXcgPSBkaXNwbGF5LnZpZXc7XG4gICAgaWYgKHZpZXcubGVuZ3RoID09IDAgfHwgZnJvbSA+PSBkaXNwbGF5LnZpZXdUbyB8fCB0byA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7XG4gICAgICBkaXNwbGF5LnZpZXcgPSBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgdG8pO1xuICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGZyb207XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkaXNwbGF5LnZpZXdGcm9tID4gZnJvbSlcbiAgICAgICAgZGlzcGxheS52aWV3ID0gYnVpbGRWaWV3QXJyYXkoY20sIGZyb20sIGRpc3BsYXkudmlld0Zyb20pLmNvbmNhdChkaXNwbGF5LnZpZXcpO1xuICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3RnJvbSA8IGZyb20pXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZShmaW5kVmlld0luZGV4KGNtLCBmcm9tKSk7XG4gICAgICBkaXNwbGF5LnZpZXdGcm9tID0gZnJvbTtcbiAgICAgIGlmIChkaXNwbGF5LnZpZXdUbyA8IHRvKVxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBkaXNwbGF5LnZpZXdUbywgdG8pKTtcbiAgICAgIGVsc2UgaWYgKGRpc3BsYXkudmlld1RvID4gdG8pXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBmaW5kVmlld0luZGV4KGNtLCB0bykpO1xuICAgIH1cbiAgICBkaXNwbGF5LnZpZXdUbyA9IHRvO1xuICB9XG5cbiAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBsaW5lcyBpbiB0aGUgdmlldyB3aG9zZSBET00gcmVwcmVzZW50YXRpb24gaXNcbiAgLy8gb3V0IG9mIGRhdGUgKG9yIG5vbmV4aXN0ZW50KS5cbiAgZnVuY3Rpb24gY291bnREaXJ0eVZpZXcoY20pIHtcbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkudmlldywgZGlydHkgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcbiAgICAgIGlmICghbGluZVZpZXcuaGlkZGVuICYmICghbGluZVZpZXcubm9kZSB8fCBsaW5lVmlldy5jaGFuZ2VzKSkgKytkaXJ0eTtcbiAgICB9XG4gICAgcmV0dXJuIGRpcnR5O1xuICB9XG5cbiAgLy8gRVZFTlQgSEFORExFUlNcblxuICAvLyBBdHRhY2ggdGhlIG5lY2Vzc2FyeSBldmVudCBoYW5kbGVycyB3aGVuIGluaXRpYWxpemluZyB0aGUgZWRpdG9yXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheTtcbiAgICBvbihkLnNjcm9sbGVyLCBcIm1vdXNlZG93blwiLCBvcGVyYXRpb24oY20sIG9uTW91c2VEb3duKSk7XG4gICAgLy8gT2xkZXIgSUUncyB3aWxsIG5vdCBmaXJlIGEgc2Vjb25kIG1vdXNlZG93biBmb3IgYSBkb3VibGUgY2xpY2tcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKVxuICAgICAgb24oZC5zY3JvbGxlciwgXCJkYmxjbGlja1wiLCBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuO1xuICAgICAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICAgICAgaWYgKCFwb3MgfHwgY2xpY2tJbkd1dHRlcihjbSwgZSkgfHwgZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSkgcmV0dXJuO1xuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICB2YXIgd29yZCA9IGNtLmZpbmRXb3JkQXQocG9zKTtcbiAgICAgICAgZXh0ZW5kU2VsZWN0aW9uKGNtLmRvYywgd29yZC5hbmNob3IsIHdvcmQuaGVhZCk7XG4gICAgICB9KSk7XG4gICAgZWxzZVxuICAgICAgb24oZC5zY3JvbGxlciwgXCJkYmxjbGlja1wiLCBmdW5jdGlvbihlKSB7IHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBlX3ByZXZlbnREZWZhdWx0KGUpOyB9KTtcbiAgICAvLyBTb21lIGJyb3dzZXJzIGZpcmUgY29udGV4dG1lbnUgKmFmdGVyKiBvcGVuaW5nIHRoZSBtZW51LCBhdFxuICAgIC8vIHdoaWNoIHBvaW50IHdlIGNhbid0IG1lc3Mgd2l0aCBpdCBhbnltb3JlLiBDb250ZXh0IG1lbnUgaXNcbiAgICAvLyBoYW5kbGVkIGluIG9uTW91c2VEb3duIGZvciB0aGVzZSBicm93c2Vycy5cbiAgICBpZiAoIWNhcHR1cmVSaWdodENsaWNrKSBvbihkLnNjcm9sbGVyLCBcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uKGUpIHtvbkNvbnRleHRNZW51KGNtLCBlKTt9KTtcblxuICAgIC8vIFVzZWQgdG8gc3VwcHJlc3MgbW91c2UgZXZlbnQgaGFuZGxpbmcgd2hlbiBhIHRvdWNoIGhhcHBlbnNcbiAgICB2YXIgdG91Y2hGaW5pc2hlZCwgcHJldlRvdWNoID0ge2VuZDogMH07XG4gICAgZnVuY3Rpb24gZmluaXNoVG91Y2goKSB7XG4gICAgICBpZiAoZC5hY3RpdmVUb3VjaCkge1xuICAgICAgICB0b3VjaEZpbmlzaGVkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtkLmFjdGl2ZVRvdWNoID0gbnVsbDt9LCAxMDAwKTtcbiAgICAgICAgcHJldlRvdWNoID0gZC5hY3RpdmVUb3VjaDtcbiAgICAgICAgcHJldlRvdWNoLmVuZCA9ICtuZXcgRGF0ZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGlzTW91c2VMaWtlVG91Y2hFdmVudChlKSB7XG4gICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCAhPSAxKSByZXR1cm4gZmFsc2U7XG4gICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07XG4gICAgICByZXR1cm4gdG91Y2gucmFkaXVzWCA8PSAxICYmIHRvdWNoLnJhZGl1c1kgPD0gMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmFyQXdheSh0b3VjaCwgb3RoZXIpIHtcbiAgICAgIGlmIChvdGhlci5sZWZ0ID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgdmFyIGR4ID0gb3RoZXIubGVmdCAtIHRvdWNoLmxlZnQsIGR5ID0gb3RoZXIudG9wIC0gdG91Y2gudG9wO1xuICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5ID4gMjAgKiAyMDtcbiAgICB9XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpICYmICFpc01vdXNlTGlrZVRvdWNoRXZlbnQoZSkpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRvdWNoRmluaXNoZWQpO1xuICAgICAgICB2YXIgbm93ID0gK25ldyBEYXRlO1xuICAgICAgICBkLmFjdGl2ZVRvdWNoID0ge3N0YXJ0OiBub3csIG1vdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiBub3cgLSBwcmV2VG91Y2guZW5kIDw9IDMwMCA/IHByZXZUb3VjaCA6IG51bGx9O1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgZC5hY3RpdmVUb3VjaC5sZWZ0ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgIGQuYWN0aXZlVG91Y2gudG9wID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaG1vdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZC5hY3RpdmVUb3VjaCkgZC5hY3RpdmVUb3VjaC5tb3ZlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgdG91Y2ggPSBkLmFjdGl2ZVRvdWNoO1xuICAgICAgaWYgKHRvdWNoICYmICFldmVudEluV2lkZ2V0KGQsIGUpICYmIHRvdWNoLmxlZnQgIT0gbnVsbCAmJlxuICAgICAgICAgICF0b3VjaC5tb3ZlZCAmJiBuZXcgRGF0ZSAtIHRvdWNoLnN0YXJ0IDwgMzAwKSB7XG4gICAgICAgIHZhciBwb3MgPSBjbS5jb29yZHNDaGFyKGQuYWN0aXZlVG91Y2gsIFwicGFnZVwiKSwgcmFuZ2U7XG4gICAgICAgIGlmICghdG91Y2gucHJldiB8fCBmYXJBd2F5KHRvdWNoLCB0b3VjaC5wcmV2KSkgLy8gU2luZ2xlIHRhcFxuICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKHBvcywgcG9zKTtcbiAgICAgICAgZWxzZSBpZiAoIXRvdWNoLnByZXYucHJldiB8fCBmYXJBd2F5KHRvdWNoLCB0b3VjaC5wcmV2LnByZXYpKSAvLyBEb3VibGUgdGFwXG4gICAgICAgICAgcmFuZ2UgPSBjbS5maW5kV29yZEF0KHBvcyk7XG4gICAgICAgIGVsc2UgLy8gVHJpcGxlIHRhcFxuICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgMCksIGNsaXBQb3MoY20uZG9jLCBQb3MocG9zLmxpbmUgKyAxLCAwKSkpO1xuICAgICAgICBjbS5zZXRTZWxlY3Rpb24ocmFuZ2UuYW5jaG9yLCByYW5nZS5oZWFkKTtcbiAgICAgICAgY20uZm9jdXMoKTtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGZpbmlzaFRvdWNoKCk7XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaGNhbmNlbFwiLCBmaW5pc2hUb3VjaCk7XG5cbiAgICAvLyBTeW5jIHNjcm9sbGluZyBiZXR3ZWVuIGZha2Ugc2Nyb2xsYmFycyBhbmQgcmVhbCBzY3JvbGxhYmxlXG4gICAgLy8gYXJlYSwgZW5zdXJlIHZpZXdwb3J0IGlzIHVwZGF0ZWQgd2hlbiBzY3JvbGxpbmcuXG4gICAgb24oZC5zY3JvbGxlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZC5zY3JvbGxlci5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBkLnNjcm9sbGVyLnNjcm9sbFRvcCk7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIGQuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgdHJ1ZSk7XG4gICAgICAgIHNpZ25hbChjbSwgXCJzY3JvbGxcIiwgY20pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIHRvIHdoZWVsIGV2ZW50cyBpbiBvcmRlciB0byB0cnkgYW5kIHVwZGF0ZSB0aGUgdmlld3BvcnQgb24gdGltZS5cbiAgICBvbihkLnNjcm9sbGVyLCBcIm1vdXNld2hlZWxcIiwgZnVuY3Rpb24oZSl7b25TY3JvbGxXaGVlbChjbSwgZSk7fSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJET01Nb3VzZVNjcm9sbFwiLCBmdW5jdGlvbihlKXtvblNjcm9sbFdoZWVsKGNtLCBlKTt9KTtcblxuICAgIC8vIFByZXZlbnQgd3JhcHBlciBmcm9tIGV2ZXIgc2Nyb2xsaW5nXG4gICAgb24oZC53cmFwcGVyLCBcInNjcm9sbFwiLCBmdW5jdGlvbigpIHsgZC53cmFwcGVyLnNjcm9sbFRvcCA9IGQud3JhcHBlci5zY3JvbGxMZWZ0ID0gMDsgfSk7XG5cbiAgICBkLmRyYWdGdW5jdGlvbnMgPSB7XG4gICAgICBlbnRlcjogZnVuY3Rpb24oZSkge2lmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSBlX3N0b3AoZSk7fSxcbiAgICAgIG92ZXI6IGZ1bmN0aW9uKGUpIHtpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyBvbkRyYWdPdmVyKGNtLCBlKTsgZV9zdG9wKGUpOyB9fSxcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbihlKXtvbkRyYWdTdGFydChjbSwgZSk7fSxcbiAgICAgIGRyb3A6IG9wZXJhdGlvbihjbSwgb25Ecm9wKSxcbiAgICAgIGxlYXZlOiBmdW5jdGlvbihlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIHsgY2xlYXJEcmFnQ3Vyc29yKGNtKTsgfX1cbiAgICB9O1xuXG4gICAgdmFyIGlucCA9IGQuaW5wdXQuZ2V0RmllbGQoKTtcbiAgICBvbihpbnAsIFwia2V5dXBcIiwgZnVuY3Rpb24oZSkgeyBvbktleVVwLmNhbGwoY20sIGUpOyB9KTtcbiAgICBvbihpbnAsIFwia2V5ZG93blwiLCBvcGVyYXRpb24oY20sIG9uS2V5RG93bikpO1xuICAgIG9uKGlucCwgXCJrZXlwcmVzc1wiLCBvcGVyYXRpb24oY20sIG9uS2V5UHJlc3MpKTtcbiAgICBvbihpbnAsIFwiZm9jdXNcIiwgYmluZChvbkZvY3VzLCBjbSkpO1xuICAgIG9uKGlucCwgXCJibHVyXCIsIGJpbmQob25CbHVyLCBjbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhZ0Ryb3BDaGFuZ2VkKGNtLCB2YWx1ZSwgb2xkKSB7XG4gICAgdmFyIHdhc09uID0gb2xkICYmIG9sZCAhPSBDb2RlTWlycm9yLkluaXQ7XG4gICAgaWYgKCF2YWx1ZSAhPSAhd2FzT24pIHtcbiAgICAgIHZhciBmdW5jcyA9IGNtLmRpc3BsYXkuZHJhZ0Z1bmN0aW9ucztcbiAgICAgIHZhciB0b2dnbGUgPSB2YWx1ZSA/IG9uIDogb2ZmO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ3N0YXJ0XCIsIGZ1bmNzLnN0YXJ0KTtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdlbnRlclwiLCBmdW5jcy5lbnRlcik7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnb3ZlclwiLCBmdW5jcy5vdmVyKTtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdsZWF2ZVwiLCBmdW5jcy5sZWF2ZSk7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGZ1bmNzLmRyb3ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuIHRoZSB3aW5kb3cgcmVzaXplc1xuICBmdW5jdGlvbiBvblJlc2l6ZShjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheTtcbiAgICBpZiAoZC5sYXN0V3JhcEhlaWdodCA9PSBkLndyYXBwZXIuY2xpZW50SGVpZ2h0ICYmIGQubGFzdFdyYXBXaWR0aCA9PSBkLndyYXBwZXIuY2xpZW50V2lkdGgpXG4gICAgICByZXR1cm47XG4gICAgLy8gTWlnaHQgYmUgYSB0ZXh0IHNjYWxpbmcgb3BlcmF0aW9uLCBjbGVhciBzaXplIGNhY2hlcy5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuICAgIGQuc2Nyb2xsYmFyc0NsaXBwZWQgPSBmYWxzZTtcbiAgICBjbS5zZXRTaXplKCk7XG4gIH1cblxuICAvLyBNT1VTRSBFVkVOVFNcblxuICAvLyBSZXR1cm4gdHJ1ZSB3aGVuIHRoZSBnaXZlbiBtb3VzZSBldmVudCBoYXBwZW5lZCBpbiBhIHdpZGdldFxuICBmdW5jdGlvbiBldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpIHtcbiAgICBmb3IgKHZhciBuID0gZV90YXJnZXQoZSk7IG4gIT0gZGlzcGxheS53cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAoIW4gfHwgKG4ubm9kZVR5cGUgPT0gMSAmJiBuLmdldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIikgPT0gXCJ0cnVlXCIpIHx8XG4gICAgICAgICAgKG4ucGFyZW50Tm9kZSA9PSBkaXNwbGF5LnNpemVyICYmIG4gIT0gZGlzcGxheS5tb3ZlcikpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdpdmVuIGEgbW91c2UgZXZlbnQsIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgcG9zaXRpb24uIElmIGxpYmVyYWxcbiAgLy8gaXMgZmFsc2UsIGl0IGNoZWNrcyB3aGV0aGVyIGEgZ3V0dGVyIG9yIHNjcm9sbGJhciB3YXMgY2xpY2tlZCxcbiAgLy8gYW5kIHJldHVybnMgbnVsbCBpZiBpdCB3YXMuIGZvclJlY3QgaXMgdXNlZCBieSByZWN0YW5ndWxhclxuICAvLyBzZWxlY3Rpb25zLCBhbmQgdHJpZXMgdG8gZXN0aW1hdGUgYSBjaGFyYWN0ZXIgcG9zaXRpb24gZXZlbiBmb3JcbiAgLy8gY29vcmRpbmF0ZXMgYmV5b25kIHRoZSByaWdodCBvZiB0aGUgdGV4dC5cbiAgZnVuY3Rpb24gcG9zRnJvbU1vdXNlKGNtLCBlLCBsaWJlcmFsLCBmb3JSZWN0KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmICghbGliZXJhbCAmJiBlX3RhcmdldChlKS5nZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiKSA9PSBcInRydWVcIikgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgeCwgeSwgc3BhY2UgPSBkaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBGYWlscyB1bnByZWRpY3RhYmx5IG9uIElFWzY3XSB3aGVuIG1vdXNlIGlzIGRyYWdnZWQgYXJvdW5kIHF1aWNrbHkuXG4gICAgdHJ5IHsgeCA9IGUuY2xpZW50WCAtIHNwYWNlLmxlZnQ7IHkgPSBlLmNsaWVudFkgLSBzcGFjZS50b3A7IH1cbiAgICBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHZhciBjb29yZHMgPSBjb29yZHNDaGFyKGNtLCB4LCB5KSwgbGluZTtcbiAgICBpZiAoZm9yUmVjdCAmJiBjb29yZHMueFJlbCA9PSAxICYmIChsaW5lID0gZ2V0TGluZShjbS5kb2MsIGNvb3Jkcy5saW5lKS50ZXh0KS5sZW5ndGggPT0gY29vcmRzLmNoKSB7XG4gICAgICB2YXIgY29sRGlmZiA9IGNvdW50Q29sdW1uKGxpbmUsIGxpbmUubGVuZ3RoLCBjbS5vcHRpb25zLnRhYlNpemUpIC0gbGluZS5sZW5ndGg7XG4gICAgICBjb29yZHMgPSBQb3MoY29vcmRzLmxpbmUsIE1hdGgubWF4KDAsIE1hdGgucm91bmQoKHggLSBwYWRkaW5nSChjbS5kaXNwbGF5KS5sZWZ0KSAvIGNoYXJXaWR0aChjbS5kaXNwbGF5KSkgLSBjb2xEaWZmKSk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAvLyBBIG1vdXNlIGRvd24gY2FuIGJlIGEgc2luZ2xlIGNsaWNrLCBkb3VibGUgY2xpY2ssIHRyaXBsZSBjbGljayxcbiAgLy8gc3RhcnQgb2Ygc2VsZWN0aW9uIGRyYWcsIHN0YXJ0IG9mIHRleHQgZHJhZywgbmV3IGN1cnNvclxuICAvLyAoY3RybC1jbGljayksIHJlY3RhbmdsZSBkcmFnIChhbHQtZHJhZyksIG9yIHh3aW5cbiAgLy8gbWlkZGxlLWNsaWNrLXBhc3RlLiBPciBpdCBtaWdodCBiZSBhIGNsaWNrIG9uIHNvbWV0aGluZyB3ZSBzaG91bGRcbiAgLy8gbm90IGludGVyZmVyZSB3aXRoLCBzdWNoIGFzIGEgc2Nyb2xsYmFyIG9yIHdpZGdldC5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgIHZhciBjbSA9IHRoaXMsIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkgfHwgZGlzcGxheS5hY3RpdmVUb3VjaCAmJiBkaXNwbGF5LmlucHV0LnN1cHBvcnRzVG91Y2goKSkgcmV0dXJuO1xuICAgIGRpc3BsYXkuc2hpZnQgPSBlLnNoaWZ0S2V5O1xuXG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIHtcbiAgICAgIGlmICghd2Via2l0KSB7XG4gICAgICAgIC8vIEJyaWVmbHkgdHVybiBvZmYgZHJhZ2dhYmlsaXR5LCB0byBhbGxvdyB3aWRnZXRzIHRvIGRvXG4gICAgICAgIC8vIG5vcm1hbCBkcmFnZ2luZyB0aGluZ3MuXG4gICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7fSwgMTAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNsaWNrSW5HdXR0ZXIoY20sIGUpKSByZXR1cm47XG4gICAgdmFyIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICB3aW5kb3cuZm9jdXMoKTtcblxuICAgIHN3aXRjaCAoZV9idXR0b24oZSkpIHtcbiAgICBjYXNlIDE6XG4gICAgICAvLyAjMzI2MTogbWFrZSBzdXJlLCB0aGF0IHdlJ3JlIG5vdCBzdGFydGluZyBhIHNlY29uZCBzZWxlY3Rpb25cbiAgICAgIGlmIChjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0KVxuICAgICAgICBjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0KGUpO1xuICAgICAgZWxzZSBpZiAoc3RhcnQpXG4gICAgICAgIGxlZnRCdXR0b25Eb3duKGNtLCBlLCBzdGFydCk7XG4gICAgICBlbHNlIGlmIChlX3RhcmdldChlKSA9PSBkaXNwbGF5LnNjcm9sbGVyKVxuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgaWYgKHdlYmtpdCkgY20uc3RhdGUubGFzdE1pZGRsZURvd24gPSArbmV3IERhdGU7XG4gICAgICBpZiAoc3RhcnQpIGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHN0YXJ0KTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZGlzcGxheS5pbnB1dC5mb2N1cygpO30sIDIwKTtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBpZiAoY2FwdHVyZVJpZ2h0Q2xpY2spIG9uQ29udGV4dE1lbnUoY20sIGUpO1xuICAgICAgZWxzZSBkZWxheUJsdXJFdmVudChjbSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgbGFzdENsaWNrLCBsYXN0RG91YmxlQ2xpY2s7XG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25Eb3duKGNtLCBlLCBzdGFydCkge1xuICAgIGlmIChpZSkgc2V0VGltZW91dChiaW5kKGVuc3VyZUZvY3VzLCBjbSksIDApO1xuICAgIGVsc2UgY20uY3VyT3AuZm9jdXMgPSBhY3RpdmVFbHQoKTtcblxuICAgIHZhciBub3cgPSArbmV3IERhdGUsIHR5cGU7XG4gICAgaWYgKGxhc3REb3VibGVDbGljayAmJiBsYXN0RG91YmxlQ2xpY2sudGltZSA+IG5vdyAtIDQwMCAmJiBjbXAobGFzdERvdWJsZUNsaWNrLnBvcywgc3RhcnQpID09IDApIHtcbiAgICAgIHR5cGUgPSBcInRyaXBsZVwiO1xuICAgIH0gZWxzZSBpZiAobGFzdENsaWNrICYmIGxhc3RDbGljay50aW1lID4gbm93IC0gNDAwICYmIGNtcChsYXN0Q2xpY2sucG9zLCBzdGFydCkgPT0gMCkge1xuICAgICAgdHlwZSA9IFwiZG91YmxlXCI7XG4gICAgICBsYXN0RG91YmxlQ2xpY2sgPSB7dGltZTogbm93LCBwb3M6IHN0YXJ0fTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHlwZSA9IFwic2luZ2xlXCI7XG4gICAgICBsYXN0Q2xpY2sgPSB7dGltZTogbm93LCBwb3M6IHN0YXJ0fTtcbiAgICB9XG5cbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbCwgbW9kaWZpZXIgPSBtYWMgPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXksIGNvbnRhaW5lZDtcbiAgICBpZiAoY20ub3B0aW9ucy5kcmFnRHJvcCAmJiBkcmFnQW5kRHJvcCAmJiAhY20uaXNSZWFkT25seSgpICYmXG4gICAgICAgIHR5cGUgPT0gXCJzaW5nbGVcIiAmJiAoY29udGFpbmVkID0gc2VsLmNvbnRhaW5zKHN0YXJ0KSkgPiAtMSAmJlxuICAgICAgICAoY21wKChjb250YWluZWQgPSBzZWwucmFuZ2VzW2NvbnRhaW5lZF0pLmZyb20oKSwgc3RhcnQpIDwgMCB8fCBzdGFydC54UmVsID4gMCkgJiZcbiAgICAgICAgKGNtcChjb250YWluZWQudG8oKSwgc3RhcnQpID4gMCB8fCBzdGFydC54UmVsIDwgMCkpXG4gICAgICBsZWZ0QnV0dG9uU3RhcnREcmFnKGNtLCBlLCBzdGFydCwgbW9kaWZpZXIpO1xuICAgIGVsc2VcbiAgICAgIGxlZnRCdXR0b25TZWxlY3QoY20sIGUsIHN0YXJ0LCB0eXBlLCBtb2RpZmllcik7XG4gIH1cblxuICAvLyBTdGFydCBhIHRleHQgZHJhZy4gV2hlbiBpdCBlbmRzLCBzZWUgaWYgYW55IGRyYWdnaW5nIGFjdHVhbGx5XG4gIC8vIGhhcHBlbiwgYW5kIHRyZWF0IGFzIGEgY2xpY2sgaWYgaXQgZGlkbid0LlxuICBmdW5jdGlvbiBsZWZ0QnV0dG9uU3RhcnREcmFnKGNtLCBlLCBzdGFydCwgbW9kaWZpZXIpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHN0YXJ0VGltZSA9ICtuZXcgRGF0ZTtcbiAgICB2YXIgZHJhZ0VuZCA9IG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oZTIpIHtcbiAgICAgIGlmICh3ZWJraXQpIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgPSBmYWxzZTtcbiAgICAgIG9mZihkb2N1bWVudCwgXCJtb3VzZXVwXCIsIGRyYWdFbmQpO1xuICAgICAgb2ZmKGRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBkcmFnRW5kKTtcbiAgICAgIGlmIChNYXRoLmFicyhlLmNsaWVudFggLSBlMi5jbGllbnRYKSArIE1hdGguYWJzKGUuY2xpZW50WSAtIGUyLmNsaWVudFkpIDwgMTApIHtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlMik7XG4gICAgICAgIGlmICghbW9kaWZpZXIgJiYgK25ldyBEYXRlIC0gMjAwIDwgc3RhcnRUaW1lKVxuICAgICAgICAgIGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHN0YXJ0KTtcbiAgICAgICAgLy8gV29yayBhcm91bmQgdW5leHBsYWluYWJsZSBmb2N1cyBwcm9ibGVtIGluIElFOSAoIzIxMjcpIGFuZCBDaHJvbWUgKCMzMDgxKVxuICAgICAgICBpZiAod2Via2l0IHx8IGllICYmIGllX3ZlcnNpb24gPT0gOSlcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2RvY3VtZW50LmJvZHkuZm9jdXMoKTsgZGlzcGxheS5pbnB1dC5mb2N1cygpO30sIDIwKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGRpc3BsYXkuaW5wdXQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBMZXQgdGhlIGRyYWcgaGFuZGxlciBoYW5kbGUgdGhpcy5cbiAgICBpZiAod2Via2l0KSBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0ID0gZHJhZ0VuZDtcbiAgICAvLyBJRSdzIGFwcHJvYWNoIHRvIGRyYWdnYWJsZVxuICAgIGlmIChkaXNwbGF5LnNjcm9sbGVyLmRyYWdEcm9wKSBkaXNwbGF5LnNjcm9sbGVyLmRyYWdEcm9wKCk7XG4gICAgb24oZG9jdW1lbnQsIFwibW91c2V1cFwiLCBkcmFnRW5kKTtcbiAgICBvbihkaXNwbGF5LnNjcm9sbGVyLCBcImRyb3BcIiwgZHJhZ0VuZCk7XG4gIH1cblxuICAvLyBOb3JtYWwgc2VsZWN0aW9uLCBhcyBvcHBvc2VkIHRvIHRleHQgZHJhZ2dpbmcuXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25TZWxlY3QoY20sIGUsIHN0YXJ0LCB0eXBlLCBhZGROZXcpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuXG4gICAgdmFyIG91clJhbmdlLCBvdXJJbmRleCwgc3RhcnRTZWwgPSBkb2Muc2VsLCByYW5nZXMgPSBzdGFydFNlbC5yYW5nZXM7XG4gICAgaWYgKGFkZE5ldyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgb3VySW5kZXggPSBkb2Muc2VsLmNvbnRhaW5zKHN0YXJ0KTtcbiAgICAgIGlmIChvdXJJbmRleCA+IC0xKVxuICAgICAgICBvdXJSYW5nZSA9IHJhbmdlc1tvdXJJbmRleF07XG4gICAgICBlbHNlXG4gICAgICAgIG91clJhbmdlID0gbmV3IFJhbmdlKHN0YXJ0LCBzdGFydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91clJhbmdlID0gZG9jLnNlbC5wcmltYXJ5KCk7XG4gICAgICBvdXJJbmRleCA9IGRvYy5zZWwucHJpbUluZGV4O1xuICAgIH1cblxuICAgIGlmIChjaHJvbWVPUyA/IGUuc2hpZnRLZXkgJiYgZS5tZXRhS2V5IDogZS5hbHRLZXkpIHtcbiAgICAgIHR5cGUgPSBcInJlY3RcIjtcbiAgICAgIGlmICghYWRkTmV3KSBvdXJSYW5nZSA9IG5ldyBSYW5nZShzdGFydCwgc3RhcnQpO1xuICAgICAgc3RhcnQgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUsIHRydWUpO1xuICAgICAgb3VySW5kZXggPSAtMTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJkb3VibGVcIikge1xuICAgICAgdmFyIHdvcmQgPSBjbS5maW5kV29yZEF0KHN0YXJ0KTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpXG4gICAgICAgIG91clJhbmdlID0gZXh0ZW5kUmFuZ2UoZG9jLCBvdXJSYW5nZSwgd29yZC5hbmNob3IsIHdvcmQuaGVhZCk7XG4gICAgICBlbHNlXG4gICAgICAgIG91clJhbmdlID0gd29yZDtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJ0cmlwbGVcIikge1xuICAgICAgdmFyIGxpbmUgPSBuZXcgUmFuZ2UoUG9zKHN0YXJ0LmxpbmUsIDApLCBjbGlwUG9zKGRvYywgUG9zKHN0YXJ0LmxpbmUgKyAxLCAwKSkpO1xuICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgZG9jLmV4dGVuZClcbiAgICAgICAgb3VyUmFuZ2UgPSBleHRlbmRSYW5nZShkb2MsIG91clJhbmdlLCBsaW5lLmFuY2hvciwgbGluZS5oZWFkKTtcbiAgICAgIGVsc2VcbiAgICAgICAgb3VyUmFuZ2UgPSBsaW5lO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXJSYW5nZSA9IGV4dGVuZFJhbmdlKGRvYywgb3VyUmFuZ2UsIHN0YXJ0KTtcbiAgICB9XG5cbiAgICBpZiAoIWFkZE5ldykge1xuICAgICAgb3VySW5kZXggPSAwO1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3IFNlbGVjdGlvbihbb3VyUmFuZ2VdLCAwKSwgc2VsX21vdXNlKTtcbiAgICAgIHN0YXJ0U2VsID0gZG9jLnNlbDtcbiAgICB9IGVsc2UgaWYgKG91ckluZGV4ID09IC0xKSB7XG4gICAgICBvdXJJbmRleCA9IHJhbmdlcy5sZW5ndGg7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLmNvbmNhdChbb3VyUmFuZ2VdKSwgb3VySW5kZXgpLFxuICAgICAgICAgICAgICAgICAgIHtzY3JvbGw6IGZhbHNlLCBvcmlnaW46IFwiKm1vdXNlXCJ9KTtcbiAgICB9IGVsc2UgaWYgKHJhbmdlcy5sZW5ndGggPiAxICYmIHJhbmdlc1tvdXJJbmRleF0uZW1wdHkoKSAmJiB0eXBlID09IFwic2luZ2xlXCIgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMuc2xpY2UoMCwgb3VySW5kZXgpLmNvbmNhdChyYW5nZXMuc2xpY2Uob3VySW5kZXggKyAxKSksIDApLFxuICAgICAgICAgICAgICAgICAgIHtzY3JvbGw6IGZhbHNlLCBvcmlnaW46IFwiKm1vdXNlXCJ9KTtcbiAgICAgIHN0YXJ0U2VsID0gZG9jLnNlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIG91ckluZGV4LCBvdXJSYW5nZSwgc2VsX21vdXNlKTtcbiAgICB9XG5cbiAgICB2YXIgbGFzdFBvcyA9IHN0YXJ0O1xuICAgIGZ1bmN0aW9uIGV4dGVuZFRvKHBvcykge1xuICAgICAgaWYgKGNtcChsYXN0UG9zLCBwb3MpID09IDApIHJldHVybjtcbiAgICAgIGxhc3RQb3MgPSBwb3M7XG5cbiAgICAgIGlmICh0eXBlID09IFwicmVjdFwiKSB7XG4gICAgICAgIHZhciByYW5nZXMgPSBbXSwgdGFiU2l6ZSA9IGNtLm9wdGlvbnMudGFiU2l6ZTtcbiAgICAgICAgdmFyIHN0YXJ0Q29sID0gY291bnRDb2x1bW4oZ2V0TGluZShkb2MsIHN0YXJ0LmxpbmUpLnRleHQsIHN0YXJ0LmNoLCB0YWJTaXplKTtcbiAgICAgICAgdmFyIHBvc0NvbCA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dCwgcG9zLmNoLCB0YWJTaXplKTtcbiAgICAgICAgdmFyIGxlZnQgPSBNYXRoLm1pbihzdGFydENvbCwgcG9zQ29sKSwgcmlnaHQgPSBNYXRoLm1heChzdGFydENvbCwgcG9zQ29sKTtcbiAgICAgICAgZm9yICh2YXIgbGluZSA9IE1hdGgubWluKHN0YXJ0LmxpbmUsIHBvcy5saW5lKSwgZW5kID0gTWF0aC5taW4oY20ubGFzdExpbmUoKSwgTWF0aC5tYXgoc3RhcnQubGluZSwgcG9zLmxpbmUpKTtcbiAgICAgICAgICAgICBsaW5lIDw9IGVuZDsgbGluZSsrKSB7XG4gICAgICAgICAgdmFyIHRleHQgPSBnZXRMaW5lKGRvYywgbGluZSkudGV4dCwgbGVmdFBvcyA9IGZpbmRDb2x1bW4odGV4dCwgbGVmdCwgdGFiU2l6ZSk7XG4gICAgICAgICAgaWYgKGxlZnQgPT0gcmlnaHQpXG4gICAgICAgICAgICByYW5nZXMucHVzaChuZXcgUmFuZ2UoUG9zKGxpbmUsIGxlZnRQb3MpLCBQb3MobGluZSwgbGVmdFBvcykpKTtcbiAgICAgICAgICBlbHNlIGlmICh0ZXh0Lmxlbmd0aCA+IGxlZnRQb3MpXG4gICAgICAgICAgICByYW5nZXMucHVzaChuZXcgUmFuZ2UoUG9zKGxpbmUsIGxlZnRQb3MpLCBQb3MobGluZSwgZmluZENvbHVtbih0ZXh0LCByaWdodCwgdGFiU2l6ZSkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyYW5nZXMubGVuZ3RoKSByYW5nZXMucHVzaChuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KSk7XG4gICAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihzdGFydFNlbC5yYW5nZXMuc2xpY2UoMCwgb3VySW5kZXgpLmNvbmNhdChyYW5nZXMpLCBvdXJJbmRleCksXG4gICAgICAgICAgICAgICAgICAgICB7b3JpZ2luOiBcIiptb3VzZVwiLCBzY3JvbGw6IGZhbHNlfSk7XG4gICAgICAgIGNtLnNjcm9sbEludG9WaWV3KHBvcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb2xkUmFuZ2UgPSBvdXJSYW5nZTtcbiAgICAgICAgdmFyIGFuY2hvciA9IG9sZFJhbmdlLmFuY2hvciwgaGVhZCA9IHBvcztcbiAgICAgICAgaWYgKHR5cGUgIT0gXCJzaW5nbGVcIikge1xuICAgICAgICAgIGlmICh0eXBlID09IFwiZG91YmxlXCIpXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBjbS5maW5kV29yZEF0KHBvcyk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgdmFyIHJhbmdlID0gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgMCksIGNsaXBQb3MoZG9jLCBQb3MocG9zLmxpbmUgKyAxLCAwKSkpO1xuICAgICAgICAgIGlmIChjbXAocmFuZ2UuYW5jaG9yLCBhbmNob3IpID4gMCkge1xuICAgICAgICAgICAgaGVhZCA9IHJhbmdlLmhlYWQ7XG4gICAgICAgICAgICBhbmNob3IgPSBtaW5Qb3Mob2xkUmFuZ2UuZnJvbSgpLCByYW5nZS5hbmNob3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWFkID0gcmFuZ2UuYW5jaG9yO1xuICAgICAgICAgICAgYW5jaG9yID0gbWF4UG9zKG9sZFJhbmdlLnRvKCksIHJhbmdlLmhlYWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgcmFuZ2VzID0gc3RhcnRTZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgICAgICByYW5nZXNbb3VySW5kZXhdID0gbmV3IFJhbmdlKGNsaXBQb3MoZG9jLCBhbmNob3IpLCBoZWFkKTtcbiAgICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgb3VySW5kZXgpLCBzZWxfbW91c2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBlZGl0b3JTaXplID0gZGlzcGxheS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIC8vIFVzZWQgdG8gZW5zdXJlIHRpbWVvdXQgcmUtdHJpZXMgZG9uJ3QgZmlyZSB3aGVuIGFub3RoZXIgZXh0ZW5kXG4gICAgLy8gaGFwcGVuZWQgaW4gdGhlIG1lYW50aW1lIChjbGVhclRpbWVvdXQgaXNuJ3QgcmVsaWFibGUgLS0gYXRcbiAgICAvLyBsZWFzdCBvbiBDaHJvbWUsIHRoZSB0aW1lb3V0cyBzdGlsbCBoYXBwZW4gZXZlbiB3aGVuIGNsZWFyZWQsXG4gICAgLy8gaWYgdGhlIGNsZWFyIGhhcHBlbnMgYWZ0ZXIgdGhlaXIgc2NoZWR1bGVkIGZpcmluZyB0aW1lKS5cbiAgICB2YXIgY291bnRlciA9IDA7XG5cbiAgICBmdW5jdGlvbiBleHRlbmQoZSkge1xuICAgICAgdmFyIGN1ckNvdW50ID0gKytjb3VudGVyO1xuICAgICAgdmFyIGN1ciA9IHBvc0Zyb21Nb3VzZShjbSwgZSwgdHJ1ZSwgdHlwZSA9PSBcInJlY3RcIik7XG4gICAgICBpZiAoIWN1cikgcmV0dXJuO1xuICAgICAgaWYgKGNtcChjdXIsIGxhc3RQb3MpICE9IDApIHtcbiAgICAgICAgY20uY3VyT3AuZm9jdXMgPSBhY3RpdmVFbHQoKTtcbiAgICAgICAgZXh0ZW5kVG8oY3VyKTtcbiAgICAgICAgdmFyIHZpc2libGUgPSB2aXNpYmxlTGluZXMoZGlzcGxheSwgZG9jKTtcbiAgICAgICAgaWYgKGN1ci5saW5lID49IHZpc2libGUudG8gfHwgY3VyLmxpbmUgPCB2aXNpYmxlLmZyb20pXG4gICAgICAgICAgc2V0VGltZW91dChvcGVyYXRpb24oY20sIGZ1bmN0aW9uKCl7aWYgKGNvdW50ZXIgPT0gY3VyQ291bnQpIGV4dGVuZChlKTt9KSwgMTUwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvdXRzaWRlID0gZS5jbGllbnRZIDwgZWRpdG9yU2l6ZS50b3AgPyAtMjAgOiBlLmNsaWVudFkgPiBlZGl0b3JTaXplLmJvdHRvbSA/IDIwIDogMDtcbiAgICAgICAgaWYgKG91dHNpZGUpIHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoY291bnRlciAhPSBjdXJDb3VudCkgcmV0dXJuO1xuICAgICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICs9IG91dHNpZGU7XG4gICAgICAgICAgZXh0ZW5kKGUpO1xuICAgICAgICB9KSwgNTApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvbmUoZSkge1xuICAgICAgY20uc3RhdGUuc2VsZWN0aW5nVGV4dCA9IGZhbHNlO1xuICAgICAgY291bnRlciA9IEluZmluaXR5O1xuICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIGRpc3BsYXkuaW5wdXQuZm9jdXMoKTtcbiAgICAgIG9mZihkb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgbW92ZSk7XG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2V1cFwiLCB1cCk7XG4gICAgICBkb2MuaGlzdG9yeS5sYXN0U2VsT3JpZ2luID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbW92ZSA9IG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKCFlX2J1dHRvbihlKSkgZG9uZShlKTtcbiAgICAgIGVsc2UgZXh0ZW5kKGUpO1xuICAgIH0pO1xuICAgIHZhciB1cCA9IG9wZXJhdGlvbihjbSwgZG9uZSk7XG4gICAgY20uc3RhdGUuc2VsZWN0aW5nVGV4dCA9IHVwO1xuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3ZlKTtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZXVwXCIsIHVwKTtcbiAgfVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciBhbiBldmVudCBoYXBwZW5lZCBpbiB0aGUgZ3V0dGVyLCBhbmQgZmlyZXMgdGhlXG4gIC8vIGhhbmRsZXJzIGZvciB0aGUgY29ycmVzcG9uZGluZyBldmVudC5cbiAgZnVuY3Rpb24gZ3V0dGVyRXZlbnQoY20sIGUsIHR5cGUsIHByZXZlbnQpIHtcbiAgICB0cnkgeyB2YXIgbVggPSBlLmNsaWVudFgsIG1ZID0gZS5jbGllbnRZOyB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAobVggPj0gTWF0aC5mbG9vcihjbS5kaXNwbGF5Lmd1dHRlcnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHByZXZlbnQpIGVfcHJldmVudERlZmF1bHQoZSk7XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgdmFyIGxpbmVCb3ggPSBkaXNwbGF5LmxpbmVEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBpZiAobVkgPiBsaW5lQm94LmJvdHRvbSB8fCAhaGFzSGFuZGxlcihjbSwgdHlwZSkpIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSk7XG4gICAgbVkgLT0gbGluZUJveC50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQ7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLm9wdGlvbnMuZ3V0dGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGcgPSBkaXNwbGF5Lmd1dHRlcnMuY2hpbGROb2Rlc1tpXTtcbiAgICAgIGlmIChnICYmIGcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgPj0gbVgpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBsaW5lQXRIZWlnaHQoY20uZG9jLCBtWSk7XG4gICAgICAgIHZhciBndXR0ZXIgPSBjbS5vcHRpb25zLmd1dHRlcnNbaV07XG4gICAgICAgIHNpZ25hbChjbSwgdHlwZSwgY20sIGxpbmUsIGd1dHRlciwgZSk7XG4gICAgICAgIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xpY2tJbkd1dHRlcihjbSwgZSkge1xuICAgIHJldHVybiBndXR0ZXJFdmVudChjbSwgZSwgXCJndXR0ZXJDbGlja1wiLCB0cnVlKTtcbiAgfVxuXG4gIC8vIEtsdWRnZSB0byB3b3JrIGFyb3VuZCBzdHJhbmdlIElFIGJlaGF2aW9yIHdoZXJlIGl0J2xsIHNvbWV0aW1lc1xuICAvLyByZS1maXJlIGEgc2VyaWVzIG9mIGRyYWctcmVsYXRlZCBldmVudHMgcmlnaHQgYWZ0ZXIgdGhlIGRyb3AgKCMxNTUxKVxuICB2YXIgbGFzdERyb3AgPSAwO1xuXG4gIGZ1bmN0aW9uIG9uRHJvcChlKSB7XG4gICAgdmFyIGNtID0gdGhpcztcbiAgICBjbGVhckRyYWdDdXJzb3IoY20pO1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkgfHwgZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSlcbiAgICAgIHJldHVybjtcbiAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgIGlmIChpZSkgbGFzdERyb3AgPSArbmV3IERhdGU7XG4gICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSwgdHJ1ZSksIGZpbGVzID0gZS5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgaWYgKCFwb3MgfHwgY20uaXNSZWFkT25seSgpKSByZXR1cm47XG4gICAgLy8gTWlnaHQgYmUgYSBmaWxlIGRyb3AsIGluIHdoaWNoIGNhc2Ugd2Ugc2ltcGx5IGV4dHJhY3QgdGhlIHRleHRcbiAgICAvLyBhbmQgaW5zZXJ0IGl0LlxuICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggJiYgd2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZpbGUpIHtcbiAgICAgIHZhciBuID0gZmlsZXMubGVuZ3RoLCB0ZXh0ID0gQXJyYXkobiksIHJlYWQgPSAwO1xuICAgICAgdmFyIGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZSwgaSkge1xuICAgICAgICBpZiAoY20ub3B0aW9ucy5hbGxvd0Ryb3BGaWxlVHlwZXMgJiZcbiAgICAgICAgICAgIGluZGV4T2YoY20ub3B0aW9ucy5hbGxvd0Ryb3BGaWxlVHlwZXMsIGZpbGUudHlwZSkgPT0gLTEpXG4gICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcjtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSByZWFkZXIucmVzdWx0O1xuICAgICAgICAgIGlmICgvW1xceDAwLVxceDA4XFx4MGUtXFx4MWZdezJ9Ly50ZXN0KGNvbnRlbnQpKSBjb250ZW50ID0gXCJcIjtcbiAgICAgICAgICB0ZXh0W2ldID0gY29udGVudDtcbiAgICAgICAgICBpZiAoKytyZWFkID09IG4pIHtcbiAgICAgICAgICAgIHBvcyA9IGNsaXBQb3MoY20uZG9jLCBwb3MpO1xuICAgICAgICAgICAgdmFyIGNoYW5nZSA9IHtmcm9tOiBwb3MsIHRvOiBwb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGNtLmRvYy5zcGxpdExpbmVzKHRleHQuam9pbihjbS5kb2MubGluZVNlcGFyYXRvcigpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogXCJwYXN0ZVwifTtcbiAgICAgICAgICAgIG1ha2VDaGFuZ2UoY20uZG9jLCBjaGFuZ2UpO1xuICAgICAgICAgICAgc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkoY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zLCBjaGFuZ2VFbmQoY2hhbmdlKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgfTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBsb2FkRmlsZShmaWxlc1tpXSwgaSk7XG4gICAgfSBlbHNlIHsgLy8gTm9ybWFsIGRyb3BcbiAgICAgIC8vIERvbid0IGRvIGEgcmVwbGFjZSBpZiB0aGUgZHJvcCBoYXBwZW5lZCBpbnNpZGUgb2YgdGhlIHNlbGVjdGVkIHRleHQuXG4gICAgICBpZiAoY20uc3RhdGUuZHJhZ2dpbmdUZXh0ICYmIGNtLmRvYy5zZWwuY29udGFpbnMocG9zKSA+IC0xKSB7XG4gICAgICAgIGNtLnN0YXRlLmRyYWdnaW5nVGV4dChlKTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBlZGl0b3IgaXMgcmUtZm9jdXNlZFxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2NtLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciB0ZXh0ID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIlRleHRcIik7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgaWYgKGNtLnN0YXRlLmRyYWdnaW5nVGV4dCAmJiAhKG1hYyA/IGUuYWx0S2V5IDogZS5jdHJsS2V5KSlcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uTm9VbmRvKGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcywgcG9zKSk7XG4gICAgICAgICAgaWYgKHNlbGVjdGVkKSBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgcmVwbGFjZVJhbmdlKGNtLmRvYywgXCJcIiwgc2VsZWN0ZWRbaV0uYW5jaG9yLCBzZWxlY3RlZFtpXS5oZWFkLCBcImRyYWdcIik7XG4gICAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbih0ZXh0LCBcImFyb3VuZFwiLCBcInBhc3RlXCIpO1xuICAgICAgICAgIGNtLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2F0Y2goZSl7fVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGNtLCBlKSB7XG4gICAgaWYgKGllICYmICghY20uc3RhdGUuZHJhZ2dpbmdUZXh0IHx8ICtuZXcgRGF0ZSAtIGxhc3REcm9wIDwgMTAwKSkgeyBlX3N0b3AoZSk7IHJldHVybjsgfVxuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkgfHwgZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSkgcmV0dXJuO1xuXG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcIlRleHRcIiwgY20uZ2V0U2VsZWN0aW9uKCkpO1xuICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSBcImNvcHlNb3ZlXCJcblxuICAgIC8vIFVzZSBkdW1teSBpbWFnZSBpbnN0ZWFkIG9mIGRlZmF1bHQgYnJvd3NlcnMgaW1hZ2UuXG4gICAgLy8gUmVjZW50IFNhZmFyaSAofjYuMC4yKSBoYXZlIGEgdGVuZGVuY3kgdG8gc2VnZmF1bHQgd2hlbiB0aGlzIGhhcHBlbnMsIHNvIHdlIGRvbid0IGRvIGl0IHRoZXJlLlxuICAgIGlmIChlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UgJiYgIXNhZmFyaSkge1xuICAgICAgdmFyIGltZyA9IGVsdChcImltZ1wiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogMDsgdG9wOiAwO1wiKTtcbiAgICAgIGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XG4gICAgICBpZiAocHJlc3RvKSB7XG4gICAgICAgIGltZy53aWR0aCA9IGltZy5oZWlnaHQgPSAxO1xuICAgICAgICBjbS5kaXNwbGF5LndyYXBwZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgLy8gRm9yY2UgYSByZWxheW91dCwgb3IgT3BlcmEgd29uJ3QgdXNlIG91ciBpbWFnZSBmb3Igc29tZSBvYnNjdXJlIHJlYXNvblxuICAgICAgICBpbWcuX3RvcCA9IGltZy5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgIGlmIChwcmVzdG8pIGltZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGltZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnT3ZlcihjbSwgZSkge1xuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpO1xuICAgIGlmICghcG9zKSByZXR1cm47XG4gICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgcG9zLCBmcmFnKTtcbiAgICBpZiAoIWNtLmRpc3BsYXkuZHJhZ0N1cnNvcikge1xuICAgICAgY20uZGlzcGxheS5kcmFnQ3Vyc29yID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1jdXJzb3JzIENvZGVNaXJyb3ItZHJhZ2N1cnNvcnNcIik7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5pbnNlcnRCZWZvcmUoY20uZGlzcGxheS5kcmFnQ3Vyc29yLCBjbS5kaXNwbGF5LmN1cnNvckRpdik7XG4gICAgfVxuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkuZHJhZ0N1cnNvciwgZnJhZyk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckRyYWdDdXJzb3IoY20pIHtcbiAgICBpZiAoY20uZGlzcGxheS5kcmFnQ3Vyc29yKSB7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChjbS5kaXNwbGF5LmRyYWdDdXJzb3IpO1xuICAgICAgY20uZGlzcGxheS5kcmFnQ3Vyc29yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyBTQ1JPTEwgRVZFTlRTXG5cbiAgLy8gU3luYyB0aGUgc2Nyb2xsYWJsZSBhcmVhIGFuZCBzY3JvbGxiYXJzLCBlbnN1cmUgdGhlIHZpZXdwb3J0XG4gIC8vIGNvdmVycyB0aGUgdmlzaWJsZSBhcmVhLlxuICBmdW5jdGlvbiBzZXRTY3JvbGxUb3AoY20sIHZhbCkge1xuICAgIGlmIChNYXRoLmFicyhjbS5kb2Muc2Nyb2xsVG9wIC0gdmFsKSA8IDIpIHJldHVybjtcbiAgICBjbS5kb2Muc2Nyb2xsVG9wID0gdmFsO1xuICAgIGlmICghZ2Vja28pIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHZhbH0pO1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCAhPSB2YWwpIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gdmFsO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AodmFsKTtcbiAgICBpZiAoZ2Vja28pIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20pO1xuICAgIHN0YXJ0V29ya2VyKGNtLCAxMDApO1xuICB9XG4gIC8vIFN5bmMgc2Nyb2xsZXIgYW5kIHNjcm9sbGJhciwgZW5zdXJlIHRoZSBndXR0ZXIgZWxlbWVudHMgYXJlXG4gIC8vIGFsaWduZWQuXG4gIGZ1bmN0aW9uIHNldFNjcm9sbExlZnQoY20sIHZhbCwgaXNTY3JvbGxlcikge1xuICAgIGlmIChpc1Njcm9sbGVyID8gdmFsID09IGNtLmRvYy5zY3JvbGxMZWZ0IDogTWF0aC5hYnMoY20uZG9jLnNjcm9sbExlZnQgLSB2YWwpIDwgMikgcmV0dXJuO1xuICAgIHZhbCA9IE1hdGgubWluKHZhbCwgY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxXaWR0aCAtIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgpO1xuICAgIGNtLmRvYy5zY3JvbGxMZWZ0ID0gdmFsO1xuICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICE9IHZhbCkgY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ID0gdmFsO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KHZhbCk7XG4gIH1cblxuICAvLyBTaW5jZSB0aGUgZGVsdGEgdmFsdWVzIHJlcG9ydGVkIG9uIG1vdXNlIHdoZWVsIGV2ZW50cyBhcmVcbiAgLy8gdW5zdGFuZGFyZGl6ZWQgYmV0d2VlbiBicm93c2VycyBhbmQgZXZlbiBicm93c2VyIHZlcnNpb25zLCBhbmRcbiAgLy8gZ2VuZXJhbGx5IGhvcnJpYmx5IHVucHJlZGljdGFibGUsIHRoaXMgY29kZSBzdGFydHMgYnkgbWVhc3VyaW5nXG4gIC8vIHRoZSBzY3JvbGwgZWZmZWN0IHRoYXQgdGhlIGZpcnN0IGZldyBtb3VzZSB3aGVlbCBldmVudHMgaGF2ZSxcbiAgLy8gYW5kLCBmcm9tIHRoYXQsIGRldGVjdHMgdGhlIHdheSBpdCBjYW4gY29udmVydCBkZWx0YXMgdG8gcGl4ZWxcbiAgLy8gb2Zmc2V0cyBhZnRlcndhcmRzLlxuICAvL1xuICAvLyBUaGUgcmVhc29uIHdlIHdhbnQgdG8ga25vdyB0aGUgYW1vdW50IGEgd2hlZWwgZXZlbnQgd2lsbCBzY3JvbGxcbiAgLy8gaXMgdGhhdCBpdCBnaXZlcyB1cyBhIGNoYW5jZSB0byB1cGRhdGUgdGhlIGRpc3BsYXkgYmVmb3JlIHRoZVxuICAvLyBhY3R1YWwgc2Nyb2xsaW5nIGhhcHBlbnMsIHJlZHVjaW5nIGZsaWNrZXJpbmcuXG5cbiAgdmFyIHdoZWVsU2FtcGxlcyA9IDAsIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IG51bGw7XG4gIC8vIEZpbGwgaW4gYSBicm93c2VyLWRldGVjdGVkIHN0YXJ0aW5nIHZhbHVlIG9uIGJyb3dzZXJzIHdoZXJlIHdlXG4gIC8vIGtub3cgb25lLiBUaGVzZSBkb24ndCBoYXZlIHRvIGJlIGFjY3VyYXRlIC0tIHRoZSByZXN1bHQgb2YgdGhlbVxuICAvLyBiZWluZyB3cm9uZyB3b3VsZCBqdXN0IGJlIGEgc2xpZ2h0IGZsaWNrZXIgb24gdGhlIGZpcnN0IHdoZWVsXG4gIC8vIHNjcm9sbCAoaWYgaXQgaXMgbGFyZ2UgZW5vdWdoKS5cbiAgaWYgKGllKSB3aGVlbFBpeGVsc1BlclVuaXQgPSAtLjUzO1xuICBlbHNlIGlmIChnZWNrbykgd2hlZWxQaXhlbHNQZXJVbml0ID0gMTU7XG4gIGVsc2UgaWYgKGNocm9tZSkgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS43O1xuICBlbHNlIGlmIChzYWZhcmkpIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IC0xLzM7XG5cbiAgdmFyIHdoZWVsRXZlbnREZWx0YSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZHggPSBlLndoZWVsRGVsdGFYLCBkeSA9IGUud2hlZWxEZWx0YVk7XG4gICAgaWYgKGR4ID09IG51bGwgJiYgZS5kZXRhaWwgJiYgZS5heGlzID09IGUuSE9SSVpPTlRBTF9BWElTKSBkeCA9IGUuZGV0YWlsO1xuICAgIGlmIChkeSA9PSBudWxsICYmIGUuZGV0YWlsICYmIGUuYXhpcyA9PSBlLlZFUlRJQ0FMX0FYSVMpIGR5ID0gZS5kZXRhaWw7XG4gICAgZWxzZSBpZiAoZHkgPT0gbnVsbCkgZHkgPSBlLndoZWVsRGVsdGE7XG4gICAgcmV0dXJuIHt4OiBkeCwgeTogZHl9O1xuICB9O1xuICBDb2RlTWlycm9yLndoZWVsRXZlbnRQaXhlbHMgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGRlbHRhID0gd2hlZWxFdmVudERlbHRhKGUpO1xuICAgIGRlbHRhLnggKj0gd2hlZWxQaXhlbHNQZXJVbml0O1xuICAgIGRlbHRhLnkgKj0gd2hlZWxQaXhlbHNQZXJVbml0O1xuICAgIHJldHVybiBkZWx0YTtcbiAgfTtcblxuICBmdW5jdGlvbiBvblNjcm9sbFdoZWVsKGNtLCBlKSB7XG4gICAgdmFyIGRlbHRhID0gd2hlZWxFdmVudERlbHRhKGUpLCBkeCA9IGRlbHRhLngsIGR5ID0gZGVsdGEueTtcblxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgc2Nyb2xsID0gZGlzcGxheS5zY3JvbGxlcjtcbiAgICAvLyBRdWl0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzY3JvbGwgaGVyZVxuICAgIHZhciBjYW5TY3JvbGxYID0gc2Nyb2xsLnNjcm9sbFdpZHRoID4gc2Nyb2xsLmNsaWVudFdpZHRoO1xuICAgIHZhciBjYW5TY3JvbGxZID0gc2Nyb2xsLnNjcm9sbEhlaWdodCA+IHNjcm9sbC5jbGllbnRIZWlnaHQ7XG4gICAgaWYgKCEoZHggJiYgY2FuU2Nyb2xsWCB8fCBkeSAmJiBjYW5TY3JvbGxZKSkgcmV0dXJuO1xuXG4gICAgLy8gV2Via2l0IGJyb3dzZXJzIG9uIE9TIFggYWJvcnQgbW9tZW50dW0gc2Nyb2xscyB3aGVuIHRoZSB0YXJnZXRcbiAgICAvLyBvZiB0aGUgc2Nyb2xsIGV2ZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgc2Nyb2xsYWJsZSBlbGVtZW50LlxuICAgIC8vIFRoaXMgaGFjayAoc2VlIHJlbGF0ZWQgY29kZSBpbiBwYXRjaERpc3BsYXkpIG1ha2VzIHN1cmUgdGhlXG4gICAgLy8gZWxlbWVudCBpcyBrZXB0IGFyb3VuZC5cbiAgICBpZiAoZHkgJiYgbWFjICYmIHdlYmtpdCkge1xuICAgICAgb3V0ZXI6IGZvciAodmFyIGN1ciA9IGUudGFyZ2V0LCB2aWV3ID0gZGlzcGxheS52aWV3OyBjdXIgIT0gc2Nyb2xsOyBjdXIgPSBjdXIucGFyZW50Tm9kZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodmlld1tpXS5ub2RlID09IGN1cikge1xuICAgICAgICAgICAgY20uZGlzcGxheS5jdXJyZW50V2hlZWxUYXJnZXQgPSBjdXI7XG4gICAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPbiBzb21lIGJyb3dzZXJzLCBob3Jpem9udGFsIHNjcm9sbGluZyB3aWxsIGNhdXNlIHJlZHJhd3MgdG9cbiAgICAvLyBoYXBwZW4gYmVmb3JlIHRoZSBndXR0ZXIgaGFzIGJlZW4gcmVhbGlnbmVkLCBjYXVzaW5nIGl0IHRvXG4gICAgLy8gd3JpZ2dsZSBhcm91bmQgaW4gYSBtb3N0IHVuc2VlbWx5IHdheS4gV2hlbiB3ZSBoYXZlIGFuXG4gICAgLy8gZXN0aW1hdGVkIHBpeGVscy9kZWx0YSB2YWx1ZSwgd2UganVzdCBoYW5kbGUgaG9yaXpvbnRhbFxuICAgIC8vIHNjcm9sbGluZyBlbnRpcmVseSBoZXJlLiBJdCdsbCBiZSBzbGlnaHRseSBvZmYgZnJvbSBuYXRpdmUsIGJ1dFxuICAgIC8vIGJldHRlciB0aGFuIGdsaXRjaGluZyBvdXQuXG4gICAgaWYgKGR4ICYmICFnZWNrbyAmJiAhcHJlc3RvICYmIHdoZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XG4gICAgICBpZiAoZHkgJiYgY2FuU2Nyb2xsWSlcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGwuc2Nyb2xsVG9wICsgZHkgKiB3aGVlbFBpeGVsc1BlclVuaXQsIHNjcm9sbC5zY3JvbGxIZWlnaHQgLSBzY3JvbGwuY2xpZW50SGVpZ2h0KSkpO1xuICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsLnNjcm9sbExlZnQgKyBkeCAqIHdoZWVsUGl4ZWxzUGVyVW5pdCwgc2Nyb2xsLnNjcm9sbFdpZHRoIC0gc2Nyb2xsLmNsaWVudFdpZHRoKSkpO1xuICAgICAgLy8gT25seSBwcmV2ZW50IGRlZmF1bHQgc2Nyb2xsaW5nIGlmIHZlcnRpY2FsIHNjcm9sbGluZyBpc1xuICAgICAgLy8gYWN0dWFsbHkgcG9zc2libGUuIE90aGVyd2lzZSwgaXQgY2F1c2VzIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgLy8gaml0dGVyIG9uIE9TWCB0cmFja3BhZHMgd2hlbiBkZWx0YVggaXMgc21hbGwgYW5kIGRlbHRhWVxuICAgICAgLy8gaXMgbGFyZ2UgKGlzc3VlICMzNTc5KVxuICAgICAgaWYgKCFkeSB8fCAoZHkgJiYgY2FuU2Nyb2xsWSkpXG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gbnVsbDsgLy8gQWJvcnQgbWVhc3VyZW1lbnQsIGlmIGluIHByb2dyZXNzXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gJ1Byb2plY3QnIHRoZSB2aXNpYmxlIHZpZXdwb3J0IHRvIGNvdmVyIHRoZSBhcmVhIHRoYXQgaXMgYmVpbmdcbiAgICAvLyBzY3JvbGxlZCBpbnRvIHZpZXcgKGlmIHdlIGtub3cgZW5vdWdoIHRvIGVzdGltYXRlIGl0KS5cbiAgICBpZiAoZHkgJiYgd2hlZWxQaXhlbHNQZXJVbml0ICE9IG51bGwpIHtcbiAgICAgIHZhciBwaXhlbHMgPSBkeSAqIHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICAgIHZhciB0b3AgPSBjbS5kb2Muc2Nyb2xsVG9wLCBib3QgPSB0b3AgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgaWYgKHBpeGVscyA8IDApIHRvcCA9IE1hdGgubWF4KDAsIHRvcCArIHBpeGVscyAtIDUwKTtcbiAgICAgIGVsc2UgYm90ID0gTWF0aC5taW4oY20uZG9jLmhlaWdodCwgYm90ICsgcGl4ZWxzICsgNTApO1xuICAgICAgdXBkYXRlRGlzcGxheVNpbXBsZShjbSwge3RvcDogdG9wLCBib3R0b206IGJvdH0pO1xuICAgIH1cblxuICAgIGlmICh3aGVlbFNhbXBsZXMgPCAyMCkge1xuICAgICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggPT0gbnVsbCkge1xuICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gc2Nyb2xsLnNjcm9sbExlZnQ7IGRpc3BsYXkud2hlZWxTdGFydFkgPSBzY3JvbGwuc2Nyb2xsVG9wO1xuICAgICAgICBkaXNwbGF5LndoZWVsRFggPSBkeDsgZGlzcGxheS53aGVlbERZID0gZHk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgIHZhciBtb3ZlZFggPSBzY3JvbGwuc2Nyb2xsTGVmdCAtIGRpc3BsYXkud2hlZWxTdGFydFg7XG4gICAgICAgICAgdmFyIG1vdmVkWSA9IHNjcm9sbC5zY3JvbGxUb3AgLSBkaXNwbGF5LndoZWVsU3RhcnRZO1xuICAgICAgICAgIHZhciBzYW1wbGUgPSAobW92ZWRZICYmIGRpc3BsYXkud2hlZWxEWSAmJiBtb3ZlZFkgLyBkaXNwbGF5LndoZWVsRFkpIHx8XG4gICAgICAgICAgICAobW92ZWRYICYmIGRpc3BsYXkud2hlZWxEWCAmJiBtb3ZlZFggLyBkaXNwbGF5LndoZWVsRFgpO1xuICAgICAgICAgIGRpc3BsYXkud2hlZWxTdGFydFggPSBkaXNwbGF5LndoZWVsU3RhcnRZID0gbnVsbDtcbiAgICAgICAgICBpZiAoIXNhbXBsZSkgcmV0dXJuO1xuICAgICAgICAgIHdoZWVsUGl4ZWxzUGVyVW5pdCA9ICh3aGVlbFBpeGVsc1BlclVuaXQgKiB3aGVlbFNhbXBsZXMgKyBzYW1wbGUpIC8gKHdoZWVsU2FtcGxlcyArIDEpO1xuICAgICAgICAgICsrd2hlZWxTYW1wbGVzO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheS53aGVlbERYICs9IGR4OyBkaXNwbGF5LndoZWVsRFkgKz0gZHk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gS0VZIEVWRU5UU1xuXG4gIC8vIFJ1biBhIGhhbmRsZXIgdGhhdCB3YXMgYm91bmQgdG8gYSBrZXkuXG4gIGZ1bmN0aW9uIGRvSGFuZGxlQmluZGluZyhjbSwgYm91bmQsIGRyb3BTaGlmdCkge1xuICAgIGlmICh0eXBlb2YgYm91bmQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgYm91bmQgPSBjb21tYW5kc1tib3VuZF07XG4gICAgICBpZiAoIWJvdW5kKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBwcmV2aW91cyBpbnB1dCBoYXMgYmVlbiByZWFkLCBzbyB0aGF0IHRoZSBoYW5kbGVyIHNlZXMgYVxuICAgIC8vIGNvbnNpc3RlbnQgdmlldyBvZiB0aGUgZG9jdW1lbnRcbiAgICBjbS5kaXNwbGF5LmlucHV0LmVuc3VyZVBvbGxlZCgpO1xuICAgIHZhciBwcmV2U2hpZnQgPSBjbS5kaXNwbGF5LnNoaWZ0LCBkb25lID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChjbS5pc1JlYWRPbmx5KCkpIGNtLnN0YXRlLnN1cHByZXNzRWRpdHMgPSB0cnVlO1xuICAgICAgaWYgKGRyb3BTaGlmdCkgY20uZGlzcGxheS5zaGlmdCA9IGZhbHNlO1xuICAgICAgZG9uZSA9IGJvdW5kKGNtKSAhPSBQYXNzO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gcHJldlNoaWZ0O1xuICAgICAgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gZG9uZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb2t1cEtleUZvckVkaXRvcihjbSwgbmFtZSwgaGFuZGxlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5zdGF0ZS5rZXlNYXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbG9va3VwS2V5KG5hbWUsIGNtLnN0YXRlLmtleU1hcHNbaV0sIGhhbmRsZSwgY20pO1xuICAgICAgaWYgKHJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIChjbS5vcHRpb25zLmV4dHJhS2V5cyAmJiBsb29rdXBLZXkobmFtZSwgY20ub3B0aW9ucy5leHRyYUtleXMsIGhhbmRsZSwgY20pKVxuICAgICAgfHwgbG9va3VwS2V5KG5hbWUsIGNtLm9wdGlvbnMua2V5TWFwLCBoYW5kbGUsIGNtKTtcbiAgfVxuXG4gIHZhciBzdG9wU2VxID0gbmV3IERlbGF5ZWQ7XG4gIGZ1bmN0aW9uIGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBoYW5kbGUpIHtcbiAgICB2YXIgc2VxID0gY20uc3RhdGUua2V5U2VxO1xuICAgIGlmIChzZXEpIHtcbiAgICAgIGlmIChpc01vZGlmaWVyS2V5KG5hbWUpKSByZXR1cm4gXCJoYW5kbGVkXCI7XG4gICAgICBzdG9wU2VxLnNldCg1MCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjbS5zdGF0ZS5rZXlTZXEgPT0gc2VxKSB7XG4gICAgICAgICAgY20uc3RhdGUua2V5U2VxID0gbnVsbDtcbiAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbmFtZSA9IHNlcSArIFwiIFwiICsgbmFtZTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGxvb2t1cEtleUZvckVkaXRvcihjbSwgbmFtZSwgaGFuZGxlKTtcblxuICAgIGlmIChyZXN1bHQgPT0gXCJtdWx0aVwiKVxuICAgICAgY20uc3RhdGUua2V5U2VxID0gbmFtZTtcbiAgICBpZiAocmVzdWx0ID09IFwiaGFuZGxlZFwiKVxuICAgICAgc2lnbmFsTGF0ZXIoY20sIFwia2V5SGFuZGxlZFwiLCBjbSwgbmFtZSwgZSk7XG5cbiAgICBpZiAocmVzdWx0ID09IFwiaGFuZGxlZFwiIHx8IHJlc3VsdCA9PSBcIm11bHRpXCIpIHtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICByZXN0YXJ0QmxpbmsoY20pO1xuICAgIH1cblxuICAgIGlmIChzZXEgJiYgIXJlc3VsdCAmJiAvXFwnJC8udGVzdChuYW1lKSkge1xuICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gISFyZXN1bHQ7XG4gIH1cblxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5ZG93biBldmVudC5cbiAgZnVuY3Rpb24gaGFuZGxlS2V5QmluZGluZyhjbSwgZSkge1xuICAgIHZhciBuYW1lID0ga2V5TmFtZShlLCB0cnVlKTtcbiAgICBpZiAoIW5hbWUpIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChlLnNoaWZ0S2V5ICYmICFjbS5zdGF0ZS5rZXlTZXEpIHtcbiAgICAgIC8vIEZpcnN0IHRyeSB0byByZXNvbHZlIGZ1bGwgbmFtZSAoaW5jbHVkaW5nICdTaGlmdC0nKS4gRmFpbGluZ1xuICAgICAgLy8gdGhhdCwgc2VlIGlmIHRoZXJlIGlzIGEgY3Vyc29yLW1vdGlvbiBjb21tYW5kIChzdGFydGluZyB3aXRoXG4gICAgICAvLyAnZ28nKSBib3VuZCB0byB0aGUga2V5bmFtZSB3aXRob3V0ICdTaGlmdC0nLlxuICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBcIlNoaWZ0LVwiICsgbmFtZSwgZSwgZnVuY3Rpb24oYikge3JldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIsIHRydWUpO30pXG4gICAgICAgICAgfHwgZGlzcGF0Y2hLZXkoY20sIG5hbWUsIGUsIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYiA9PSBcInN0cmluZ1wiID8gL15nb1tBLVpdLy50ZXN0KGIpIDogYi5tb3Rpb24pXG4gICAgICAgICAgICAgICAgIHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIpO1xuICAgICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hLZXkoY20sIG5hbWUsIGUsIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYik7IH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBhIGtleSBmcm9tIHRoZSBrZXlwcmVzcyBldmVudFxuICBmdW5jdGlvbiBoYW5kbGVDaGFyQmluZGluZyhjbSwgZSwgY2gpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hLZXkoY20sIFwiJ1wiICsgY2ggKyBcIidcIiwgZSxcbiAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oYikgeyByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiLCB0cnVlKTsgfSk7XG4gIH1cblxuICB2YXIgbGFzdFN0b3BwZWRLZXkgPSBudWxsO1xuICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgY20uY3VyT3AuZm9jdXMgPSBhY3RpdmVFbHQoKTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSByZXR1cm47XG4gICAgLy8gSUUgZG9lcyBzdHJhbmdlIHRoaW5ncyB3aXRoIGVzY2FwZS5cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExICYmIGUua2V5Q29kZSA9PSAyNykgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIHZhciBjb2RlID0gZS5rZXlDb2RlO1xuICAgIGNtLmRpc3BsYXkuc2hpZnQgPSBjb2RlID09IDE2IHx8IGUuc2hpZnRLZXk7XG4gICAgdmFyIGhhbmRsZWQgPSBoYW5kbGVLZXlCaW5kaW5nKGNtLCBlKTtcbiAgICBpZiAocHJlc3RvKSB7XG4gICAgICBsYXN0U3RvcHBlZEtleSA9IGhhbmRsZWQgPyBjb2RlIDogbnVsbDtcbiAgICAgIC8vIE9wZXJhIGhhcyBubyBjdXQgZXZlbnQuLi4gd2UgdHJ5IHRvIGF0IGxlYXN0IGNhdGNoIHRoZSBrZXkgY29tYm9cbiAgICAgIGlmICghaGFuZGxlZCAmJiBjb2RlID09IDg4ICYmICFoYXNDb3B5RXZlbnQgJiYgKG1hYyA/IGUubWV0YUtleSA6IGUuY3RybEtleSkpXG4gICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCJjdXRcIik7XG4gICAgfVxuXG4gICAgLy8gVHVybiBtb3VzZSBpbnRvIGNyb3NzaGFpciB3aGVuIEFsdCBpcyBoZWxkIG9uIE1hYy5cbiAgICBpZiAoY29kZSA9PSAxOCAmJiAhL1xcYkNvZGVNaXJyb3ItY3Jvc3NoYWlyXFxiLy50ZXN0KGNtLmRpc3BsYXkubGluZURpdi5jbGFzc05hbWUpKVxuICAgICAgc2hvd0Nyb3NzSGFpcihjbSk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93Q3Jvc3NIYWlyKGNtKSB7XG4gICAgdmFyIGxpbmVEaXYgPSBjbS5kaXNwbGF5LmxpbmVEaXY7XG4gICAgYWRkQ2xhc3MobGluZURpdiwgXCJDb2RlTWlycm9yLWNyb3NzaGFpclwiKTtcblxuICAgIGZ1bmN0aW9uIHVwKGUpIHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT0gMTggfHwgIWUuYWx0S2V5KSB7XG4gICAgICAgIHJtQ2xhc3MobGluZURpdiwgXCJDb2RlTWlycm9yLWNyb3NzaGFpclwiKTtcbiAgICAgICAgb2ZmKGRvY3VtZW50LCBcImtleXVwXCIsIHVwKTtcbiAgICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNlb3ZlclwiLCB1cCk7XG4gICAgICB9XG4gICAgfVxuICAgIG9uKGRvY3VtZW50LCBcImtleXVwXCIsIHVwKTtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZW92ZXJcIiwgdXApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlVcChlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PSAxNikgdGhpcy5kb2Muc2VsLnNoaWZ0ID0gZmFsc2U7XG4gICAgc2lnbmFsRE9NRXZlbnQodGhpcywgZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleVByZXNzKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIGlmIChldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpIHx8IHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBlLmN0cmxLZXkgJiYgIWUuYWx0S2V5IHx8IG1hYyAmJiBlLm1ldGFLZXkpIHJldHVybjtcbiAgICB2YXIga2V5Q29kZSA9IGUua2V5Q29kZSwgY2hhckNvZGUgPSBlLmNoYXJDb2RlO1xuICAgIGlmIChwcmVzdG8gJiYga2V5Q29kZSA9PSBsYXN0U3RvcHBlZEtleSkge2xhc3RTdG9wcGVkS2V5ID0gbnVsbDsgZV9wcmV2ZW50RGVmYXVsdChlKTsgcmV0dXJuO31cbiAgICBpZiAoKHByZXN0byAmJiAoIWUud2hpY2ggfHwgZS53aGljaCA8IDEwKSkgJiYgaGFuZGxlS2V5QmluZGluZyhjbSwgZSkpIHJldHVybjtcbiAgICB2YXIgY2ggPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlID09IG51bGwgPyBrZXlDb2RlIDogY2hhckNvZGUpO1xuICAgIGlmIChoYW5kbGVDaGFyQmluZGluZyhjbSwgZSwgY2gpKSByZXR1cm47XG4gICAgY20uZGlzcGxheS5pbnB1dC5vbktleVByZXNzKGUpO1xuICB9XG5cbiAgLy8gRk9DVVMvQkxVUiBFVkVOVFNcblxuICBmdW5jdGlvbiBkZWxheUJsdXJFdmVudChjbSkge1xuICAgIGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gdHJ1ZTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7XG4gICAgICAgIGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gZmFsc2U7XG4gICAgICAgIG9uQmx1cihjbSk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRm9jdXMoY20pIHtcbiAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQpIGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gZmFsc2U7XG5cbiAgICBpZiAoY20ub3B0aW9ucy5yZWFkT25seSA9PSBcIm5vY3Vyc29yXCIpIHJldHVybjtcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIHNpZ25hbChjbSwgXCJmb2N1c1wiLCBjbSk7XG4gICAgICBjbS5zdGF0ZS5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLWZvY3VzZWRcIik7XG4gICAgICAvLyBUaGlzIHRlc3QgcHJldmVudHMgdGhpcyBmcm9tIGZpcmluZyB3aGVuIGEgY29udGV4dFxuICAgICAgLy8gbWVudSBpcyBjbG9zZWQgKHNpbmNlIHRoZSBpbnB1dCByZXNldCB3b3VsZCBraWxsIHRoZVxuICAgICAgLy8gc2VsZWN0LWFsbCBkZXRlY3Rpb24gaGFjaylcbiAgICAgIGlmICghY20uY3VyT3AgJiYgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSAhPSBjbS5kb2Muc2VsKSB7XG4gICAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgaWYgKHdlYmtpdCkgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY20uZGlzcGxheS5pbnB1dC5yZXNldCh0cnVlKTsgfSwgMjApOyAvLyBJc3N1ZSAjMTczMFxuICAgICAgfVxuICAgICAgY20uZGlzcGxheS5pbnB1dC5yZWNlaXZlZEZvY3VzKCk7XG4gICAgfVxuICAgIHJlc3RhcnRCbGluayhjbSk7XG4gIH1cbiAgZnVuY3Rpb24gb25CbHVyKGNtKSB7XG4gICAgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSByZXR1cm47XG5cbiAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgc2lnbmFsKGNtLCBcImJsdXJcIiwgY20pO1xuICAgICAgY20uc3RhdGUuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci1mb2N1c2VkXCIpO1xuICAgIH1cbiAgICBjbGVhckludGVydmFsKGNtLmRpc3BsYXkuYmxpbmtlcik7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTt9LCAxNTApO1xuICB9XG5cbiAgLy8gQ09OVEVYVCBNRU5VIEhBTkRMSU5HXG5cbiAgLy8gVG8gbWFrZSB0aGUgY29udGV4dCBtZW51IHdvcmssIHdlIG5lZWQgdG8gYnJpZWZseSB1bmhpZGUgdGhlXG4gIC8vIHRleHRhcmVhIChtYWtpbmcgaXQgYXMgdW5vYnRydXNpdmUgYXMgcG9zc2libGUpIHRvIGxldCB0aGVcbiAgLy8gcmlnaHQtY2xpY2sgdGFrZSBlZmZlY3Qgb24gaXQuXG4gIGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoY20sIGUpIHtcbiAgICBpZiAoZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSB8fCBjb250ZXh0TWVudUluR3V0dGVyKGNtLCBlKSkgcmV0dXJuO1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSwgXCJjb250ZXh0bWVudVwiKSkgcmV0dXJuO1xuICAgIGNtLmRpc3BsYXkuaW5wdXQub25Db250ZXh0TWVudShlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnRleHRNZW51SW5HdXR0ZXIoY20sIGUpIHtcbiAgICBpZiAoIWhhc0hhbmRsZXIoY20sIFwiZ3V0dGVyQ29udGV4dE1lbnVcIikpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gZ3V0dGVyRXZlbnQoY20sIGUsIFwiZ3V0dGVyQ29udGV4dE1lbnVcIiwgZmFsc2UpO1xuICB9XG5cbiAgLy8gVVBEQVRJTkdcblxuICAvLyBDb21wdXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIGEgY2hhbmdlIChpdHMgJ3RvJyBwcm9wZXJ0eVxuICAvLyByZWZlcnMgdG8gdGhlIHByZS1jaGFuZ2UgZW5kKS5cbiAgdmFyIGNoYW5nZUVuZCA9IENvZGVNaXJyb3IuY2hhbmdlRW5kID0gZnVuY3Rpb24oY2hhbmdlKSB7XG4gICAgaWYgKCFjaGFuZ2UudGV4dCkgcmV0dXJuIGNoYW5nZS50bztcbiAgICByZXR1cm4gUG9zKGNoYW5nZS5mcm9tLmxpbmUgKyBjaGFuZ2UudGV4dC5sZW5ndGggLSAxLFxuICAgICAgICAgICAgICAgbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoY2hhbmdlLnRleHQubGVuZ3RoID09IDEgPyBjaGFuZ2UuZnJvbS5jaCA6IDApKTtcbiAgfTtcblxuICAvLyBBZGp1c3QgYSBwb3NpdGlvbiB0byByZWZlciB0byB0aGUgcG9zdC1jaGFuZ2UgcG9zaXRpb24gb2YgdGhlXG4gIC8vIHNhbWUgdGV4dCwgb3IgdGhlIGVuZCBvZiB0aGUgY2hhbmdlIGlmIHRoZSBjaGFuZ2UgY292ZXJzIGl0LlxuICBmdW5jdGlvbiBhZGp1c3RGb3JDaGFuZ2UocG9zLCBjaGFuZ2UpIHtcbiAgICBpZiAoY21wKHBvcywgY2hhbmdlLmZyb20pIDwgMCkgcmV0dXJuIHBvcztcbiAgICBpZiAoY21wKHBvcywgY2hhbmdlLnRvKSA8PSAwKSByZXR1cm4gY2hhbmdlRW5kKGNoYW5nZSk7XG5cbiAgICB2YXIgbGluZSA9IHBvcy5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gKGNoYW5nZS50by5saW5lIC0gY2hhbmdlLmZyb20ubGluZSkgLSAxLCBjaCA9IHBvcy5jaDtcbiAgICBpZiAocG9zLmxpbmUgPT0gY2hhbmdlLnRvLmxpbmUpIGNoICs9IGNoYW5nZUVuZChjaGFuZ2UpLmNoIC0gY2hhbmdlLnRvLmNoO1xuICAgIHJldHVybiBQb3MobGluZSwgY2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgb3V0LnB1c2gobmV3IFJhbmdlKGFkanVzdEZvckNoYW5nZShyYW5nZS5hbmNob3IsIGNoYW5nZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgYWRqdXN0Rm9yQ2hhbmdlKHJhbmdlLmhlYWQsIGNoYW5nZSkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9mZnNldFBvcyhwb3MsIG9sZCwgbncpIHtcbiAgICBpZiAocG9zLmxpbmUgPT0gb2xkLmxpbmUpXG4gICAgICByZXR1cm4gUG9zKG53LmxpbmUsIHBvcy5jaCAtIG9sZC5jaCArIG53LmNoKTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gUG9zKG53LmxpbmUgKyAocG9zLmxpbmUgLSBvbGQubGluZSksIHBvcy5jaCk7XG4gIH1cblxuICAvLyBVc2VkIGJ5IHJlcGxhY2VTZWxlY3Rpb25zIHRvIGFsbG93IG1vdmluZyB0aGUgc2VsZWN0aW9uIHRvIHRoZVxuICAvLyBzdGFydCBvciBhcm91bmQgdGhlIHJlcGxhY2VkIHRlc3QuIEhpbnQgbWF5IGJlIFwic3RhcnRcIiBvciBcImFyb3VuZFwiLlxuICBmdW5jdGlvbiBjb21wdXRlUmVwbGFjZWRTZWwoZG9jLCBjaGFuZ2VzLCBoaW50KSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIHZhciBvbGRQcmV2ID0gUG9zKGRvYy5maXJzdCwgMCksIG5ld1ByZXYgPSBvbGRQcmV2O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbaV07XG4gICAgICB2YXIgZnJvbSA9IG9mZnNldFBvcyhjaGFuZ2UuZnJvbSwgb2xkUHJldiwgbmV3UHJldik7XG4gICAgICB2YXIgdG8gPSBvZmZzZXRQb3MoY2hhbmdlRW5kKGNoYW5nZSksIG9sZFByZXYsIG5ld1ByZXYpO1xuICAgICAgb2xkUHJldiA9IGNoYW5nZS50bztcbiAgICAgIG5ld1ByZXYgPSB0bztcbiAgICAgIGlmIChoaW50ID09IFwiYXJvdW5kXCIpIHtcbiAgICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV0sIGludiA9IGNtcChyYW5nZS5oZWFkLCByYW5nZS5hbmNob3IpIDwgMDtcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGludiA/IHRvIDogZnJvbSwgaW52ID8gZnJvbSA6IHRvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShmcm9tLCBmcm9tKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gIH1cblxuICAvLyBBbGxvdyBcImJlZm9yZUNoYW5nZVwiIGV2ZW50IGhhbmRsZXJzIHRvIGluZmx1ZW5jZSBhIGNoYW5nZVxuICBmdW5jdGlvbiBmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIHVwZGF0ZSkge1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjYW5jZWxlZDogZmFsc2UsXG4gICAgICBmcm9tOiBjaGFuZ2UuZnJvbSxcbiAgICAgIHRvOiBjaGFuZ2UudG8sXG4gICAgICB0ZXh0OiBjaGFuZ2UudGV4dCxcbiAgICAgIG9yaWdpbjogY2hhbmdlLm9yaWdpbixcbiAgICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7IHRoaXMuY2FuY2VsZWQgPSB0cnVlOyB9XG4gICAgfTtcbiAgICBpZiAodXBkYXRlKSBvYmoudXBkYXRlID0gZnVuY3Rpb24oZnJvbSwgdG8sIHRleHQsIG9yaWdpbikge1xuICAgICAgaWYgKGZyb20pIHRoaXMuZnJvbSA9IGNsaXBQb3MoZG9jLCBmcm9tKTtcbiAgICAgIGlmICh0bykgdGhpcy50byA9IGNsaXBQb3MoZG9jLCB0byk7XG4gICAgICBpZiAodGV4dCkgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgIGlmIChvcmlnaW4gIT09IHVuZGVmaW5lZCkgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgfTtcbiAgICBzaWduYWwoZG9jLCBcImJlZm9yZUNoYW5nZVwiLCBkb2MsIG9iaik7XG4gICAgaWYgKGRvYy5jbSkgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLmNtLCBvYmopO1xuXG4gICAgaWYgKG9iai5jYW5jZWxlZCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtmcm9tOiBvYmouZnJvbSwgdG86IG9iai50bywgdGV4dDogb2JqLnRleHQsIG9yaWdpbjogb2JqLm9yaWdpbn07XG4gIH1cblxuICAvLyBBcHBseSBhIGNoYW5nZSB0byBhIGRvY3VtZW50LCBhbmQgYWRkIGl0IHRvIHRoZSBkb2N1bWVudCdzXG4gIC8vIGhpc3RvcnksIGFuZCBwcm9wYWdhdGluZyBpdCB0byBhbGwgbGlua2VkIGRvY3VtZW50cy5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpIHtcbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICBpZiAoIWRvYy5jbS5jdXJPcCkgcmV0dXJuIG9wZXJhdGlvbihkb2MuY20sIG1ha2VDaGFuZ2UpKGRvYywgY2hhbmdlLCBpZ25vcmVSZWFkT25seSk7XG4gICAgICBpZiAoZG9jLmNtLnN0YXRlLnN1cHByZXNzRWRpdHMpIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaGFzSGFuZGxlcihkb2MsIFwiYmVmb3JlQ2hhbmdlXCIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwgXCJiZWZvcmVDaGFuZ2VcIikpIHtcbiAgICAgIGNoYW5nZSA9IGZpbHRlckNoYW5nZShkb2MsIGNoYW5nZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWNoYW5nZSkgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBvc3NpYmx5IHNwbGl0IG9yIHN1cHByZXNzIHRoZSB1cGRhdGUgYmFzZWQgb24gdGhlIHByZXNlbmNlXG4gICAgLy8gb2YgcmVhZC1vbmx5IHNwYW5zIGluIGl0cyByYW5nZS5cbiAgICB2YXIgc3BsaXQgPSBzYXdSZWFkT25seVNwYW5zICYmICFpZ25vcmVSZWFkT25seSAmJiByZW1vdmVSZWFkT25seVJhbmdlcyhkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuICAgIGlmIChzcGxpdCkge1xuICAgICAgZm9yICh2YXIgaSA9IHNwbGl0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKVxuICAgICAgICBtYWtlQ2hhbmdlSW5uZXIoZG9jLCB7ZnJvbTogc3BsaXRbaV0uZnJvbSwgdG86IHNwbGl0W2ldLnRvLCB0ZXh0OiBpID8gW1wiXCJdIDogY2hhbmdlLnRleHR9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFrZUNoYW5nZUlubmVyKGRvYywgY2hhbmdlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlSW5uZXIoZG9jLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLnRleHQubGVuZ3RoID09IDEgJiYgY2hhbmdlLnRleHRbMF0gPT0gXCJcIiAmJiBjbXAoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPT0gMCkgcmV0dXJuO1xuICAgIHZhciBzZWxBZnRlciA9IGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSk7XG4gICAgYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywgY2hhbmdlLCBzZWxBZnRlciwgZG9jLmNtID8gZG9jLmNtLmN1ck9wLmlkIDogTmFOKTtcblxuICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSk7XG4gICAgdmFyIHJlYmFzZWQgPSBbXTtcblxuICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbihkb2MsIHNoYXJlZEhpc3QpIHtcbiAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xuICAgICAgICByZWJhc2VIaXN0KGRvYy5oaXN0b3J5LCBjaGFuZ2UpO1xuICAgICAgICByZWJhc2VkLnB1c2goZG9jLmhpc3RvcnkpO1xuICAgICAgfVxuICAgICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgbnVsbCwgc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV2ZXJ0IGEgY2hhbmdlIHN0b3JlZCBpbiBhIGRvY3VtZW50J3MgaGlzdG9yeS5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZUZyb21IaXN0b3J5KGRvYywgdHlwZSwgYWxsb3dTZWxlY3Rpb25Pbmx5KSB7XG4gICAgaWYgKGRvYy5jbSAmJiBkb2MuY20uc3RhdGUuc3VwcHJlc3NFZGl0cykgcmV0dXJuO1xuXG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeSwgZXZlbnQsIHNlbEFmdGVyID0gZG9jLnNlbDtcbiAgICB2YXIgc291cmNlID0gdHlwZSA9PSBcInVuZG9cIiA/IGhpc3QuZG9uZSA6IGhpc3QudW5kb25lLCBkZXN0ID0gdHlwZSA9PSBcInVuZG9cIiA/IGhpc3QudW5kb25lIDogaGlzdC5kb25lO1xuXG4gICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgaXMgYSB1c2VhYmxlIGV2ZW50IChzbyB0aGF0IGN0cmwteiB3b24ndFxuICAgIC8vIG5lZWRsZXNzbHkgY2xlYXIgc2VsZWN0aW9uIGV2ZW50cylcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgICAgZXZlbnQgPSBzb3VyY2VbaV07XG4gICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ID8gZXZlbnQucmFuZ2VzICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkgOiAhZXZlbnQucmFuZ2VzKVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKGkgPT0gc291cmNlLmxlbmd0aCkgcmV0dXJuO1xuICAgIGhpc3QubGFzdE9yaWdpbiA9IGhpc3QubGFzdFNlbE9yaWdpbiA9IG51bGw7XG5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBldmVudCA9IHNvdXJjZS5wb3AoKTtcbiAgICAgIGlmIChldmVudC5yYW5nZXMpIHtcbiAgICAgICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShldmVudCwgZGVzdCk7XG4gICAgICAgIGlmIChhbGxvd1NlbGVjdGlvbk9ubHkgJiYgIWV2ZW50LmVxdWFscyhkb2Muc2VsKSkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbihkb2MsIGV2ZW50LCB7Y2xlYXJSZWRvOiBmYWxzZX0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxBZnRlciA9IGV2ZW50O1xuICAgICAgfVxuICAgICAgZWxzZSBicmVhaztcbiAgICB9XG5cbiAgICAvLyBCdWlsZCB1cCBhIHJldmVyc2UgY2hhbmdlIG9iamVjdCB0byBhZGQgdG8gdGhlIG9wcG9zaXRlIGhpc3RvcnlcbiAgICAvLyBzdGFjayAocmVkbyB3aGVuIHVuZG9pbmcsIGFuZCB2aWNlIHZlcnNhKS5cbiAgICB2YXIgYW50aUNoYW5nZXMgPSBbXTtcbiAgICBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KHNlbEFmdGVyLCBkZXN0KTtcbiAgICBkZXN0LnB1c2goe2NoYW5nZXM6IGFudGlDaGFuZ2VzLCBnZW5lcmF0aW9uOiBoaXN0LmdlbmVyYXRpb259KTtcbiAgICBoaXN0LmdlbmVyYXRpb24gPSBldmVudC5nZW5lcmF0aW9uIHx8ICsraGlzdC5tYXhHZW5lcmF0aW9uO1xuXG4gICAgdmFyIGZpbHRlciA9IGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZUNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IGV2ZW50LmNoYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHZhciBjaGFuZ2UgPSBldmVudC5jaGFuZ2VzW2ldO1xuICAgICAgY2hhbmdlLm9yaWdpbiA9IHR5cGU7XG4gICAgICBpZiAoZmlsdGVyICYmICFmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIGZhbHNlKSkge1xuICAgICAgICBzb3VyY2UubGVuZ3RoID0gMDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhbnRpQ2hhbmdlcy5wdXNoKGhpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKSk7XG5cbiAgICAgIHZhciBhZnRlciA9IGkgPyBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIDogbHN0KHNvdXJjZSk7XG4gICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBhZnRlciwgbWVyZ2VPbGRTcGFucyhkb2MsIGNoYW5nZSkpO1xuICAgICAgaWYgKCFpICYmIGRvYy5jbSkgZG9jLmNtLnNjcm9sbEludG9WaWV3KHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IGNoYW5nZUVuZChjaGFuZ2UpfSk7XG4gICAgICB2YXIgcmViYXNlZCA9IFtdO1xuXG4gICAgICAvLyBQcm9wYWdhdGUgdG8gdGhlIGxpbmtlZCBkb2N1bWVudHNcbiAgICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbihkb2MsIHNoYXJlZEhpc3QpIHtcbiAgICAgICAgaWYgKCFzaGFyZWRIaXN0ICYmIGluZGV4T2YocmViYXNlZCwgZG9jLmhpc3RvcnkpID09IC0xKSB7XG4gICAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9yeSwgY2hhbmdlKTtcbiAgICAgICAgICByZWJhc2VkLnB1c2goZG9jLmhpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN1Yi12aWV3cyBuZWVkIHRoZWlyIGxpbmUgbnVtYmVycyBzaGlmdGVkIHdoZW4gdGV4dCBpcyBhZGRlZFxuICAvLyBhYm92ZSBvciBiZWxvdyB0aGVtIGluIHRoZSBwYXJlbnQgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIHNoaWZ0RG9jKGRvYywgZGlzdGFuY2UpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT0gMCkgcmV0dXJuO1xuICAgIGRvYy5maXJzdCArPSBkaXN0YW5jZTtcbiAgICBkb2Muc2VsID0gbmV3IFNlbGVjdGlvbihtYXAoZG9jLnNlbC5yYW5nZXMsIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKFBvcyhyYW5nZS5hbmNob3IubGluZSArIGRpc3RhbmNlLCByYW5nZS5hbmNob3IuY2gpLFxuICAgICAgICAgICAgICAgICAgICAgICBQb3MocmFuZ2UuaGVhZC5saW5lICsgZGlzdGFuY2UsIHJhbmdlLmhlYWQuY2gpKTtcbiAgICB9KSwgZG9jLnNlbC5wcmltSW5kZXgpO1xuICAgIGlmIChkb2MuY20pIHtcbiAgICAgIHJlZ0NoYW5nZShkb2MuY20sIGRvYy5maXJzdCwgZG9jLmZpcnN0IC0gZGlzdGFuY2UsIGRpc3RhbmNlKTtcbiAgICAgIGZvciAodmFyIGQgPSBkb2MuY20uZGlzcGxheSwgbCA9IGQudmlld0Zyb207IGwgPCBkLnZpZXdUbzsgbCsrKVxuICAgICAgICByZWdMaW5lQ2hhbmdlKGRvYy5jbSwgbCwgXCJndXR0ZXJcIik7XG4gICAgfVxuICB9XG5cbiAgLy8gTW9yZSBsb3dlci1sZXZlbCBjaGFuZ2UgZnVuY3Rpb24sIGhhbmRsaW5nIG9ubHkgYSBzaW5nbGUgZG9jdW1lbnRcbiAgLy8gKG5vdCBsaW5rZWQgb25lcykuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzcGFucykge1xuICAgIGlmIChkb2MuY20gJiYgIWRvYy5jbS5jdXJPcClcbiAgICAgIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlU2luZ2xlRG9jKShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIHNwYW5zKTtcblxuICAgIGlmIChjaGFuZ2UudG8ubGluZSA8IGRvYy5maXJzdCkge1xuICAgICAgc2hpZnREb2MoZG9jLCBjaGFuZ2UudGV4dC5sZW5ndGggLSAxIC0gKGNoYW5nZS50by5saW5lIC0gY2hhbmdlLmZyb20ubGluZSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlLmZyb20ubGluZSA+IGRvYy5sYXN0TGluZSgpKSByZXR1cm47XG5cbiAgICAvLyBDbGlwIHRoZSBjaGFuZ2UgdG8gdGhlIHNpemUgb2YgdGhpcyBkb2NcbiAgICBpZiAoY2hhbmdlLmZyb20ubGluZSA8IGRvYy5maXJzdCkge1xuICAgICAgdmFyIHNoaWZ0ID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gMSAtIChkb2MuZmlyc3QgLSBjaGFuZ2UuZnJvbS5saW5lKTtcbiAgICAgIHNoaWZ0RG9jKGRvYywgc2hpZnQpO1xuICAgICAgY2hhbmdlID0ge2Zyb206IFBvcyhkb2MuZmlyc3QsIDApLCB0bzogUG9zKGNoYW5nZS50by5saW5lICsgc2hpZnQsIGNoYW5nZS50by5jaCksXG4gICAgICAgICAgICAgICAgdGV4dDogW2xzdChjaGFuZ2UudGV4dCldLCBvcmlnaW46IGNoYW5nZS5vcmlnaW59O1xuICAgIH1cbiAgICB2YXIgbGFzdCA9IGRvYy5sYXN0TGluZSgpO1xuICAgIGlmIChjaGFuZ2UudG8ubGluZSA+IGxhc3QpIHtcbiAgICAgIGNoYW5nZSA9IHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IFBvcyhsYXN0LCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgIHRleHQ6IFtjaGFuZ2UudGV4dFswXV0sIG9yaWdpbjogY2hhbmdlLm9yaWdpbn07XG4gICAgfVxuXG4gICAgY2hhbmdlLnJlbW92ZWQgPSBnZXRCZXR3ZWVuKGRvYywgY2hhbmdlLmZyb20sIGNoYW5nZS50byk7XG5cbiAgICBpZiAoIXNlbEFmdGVyKSBzZWxBZnRlciA9IGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSk7XG4gICAgaWYgKGRvYy5jbSkgbWFrZUNoYW5nZVNpbmdsZURvY0luRWRpdG9yKGRvYy5jbSwgY2hhbmdlLCBzcGFucyk7XG4gICAgZWxzZSB1cGRhdGVEb2MoZG9jLCBjaGFuZ2UsIHNwYW5zKTtcbiAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWxBZnRlciwgc2VsX2RvbnRTY3JvbGwpO1xuICB9XG5cbiAgLy8gSGFuZGxlIHRoZSBpbnRlcmFjdGlvbiBvZiBhIGNoYW5nZSB0byBhIGRvY3VtZW50IHdpdGggdGhlIGVkaXRvclxuICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgaXMgcGFydCBvZi5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZVNpbmdsZURvY0luRWRpdG9yKGNtLCBjaGFuZ2UsIHNwYW5zKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZGlzcGxheSA9IGNtLmRpc3BsYXksIGZyb20gPSBjaGFuZ2UuZnJvbSwgdG8gPSBjaGFuZ2UudG87XG5cbiAgICB2YXIgcmVjb21wdXRlTWF4TGVuZ3RoID0gZmFsc2UsIGNoZWNrV2lkdGhTdGFydCA9IGZyb20ubGluZTtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBjaGVja1dpZHRoU3RhcnQgPSBsaW5lTm8odmlzdWFsTGluZShnZXRMaW5lKGRvYywgZnJvbS5saW5lKSkpO1xuICAgICAgZG9jLml0ZXIoY2hlY2tXaWR0aFN0YXJ0LCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAobGluZSA9PSBkaXNwbGF5Lm1heExpbmUpIHtcbiAgICAgICAgICByZWNvbXB1dGVNYXhMZW5ndGggPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZG9jLnNlbC5jb250YWlucyhjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA+IC0xKVxuICAgICAgc2lnbmFsQ3Vyc29yQWN0aXZpdHkoY20pO1xuXG4gICAgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucywgZXN0aW1hdGVIZWlnaHQoY20pKTtcblxuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxpbmUpO1xuICAgICAgICBpZiAobGVuID4gZGlzcGxheS5tYXhMaW5lTGVuZ3RoKSB7XG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lID0gbGluZTtcbiAgICAgICAgICBkaXNwbGF5Lm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgcmVjb21wdXRlTWF4TGVuZ3RoID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHJlY29tcHV0ZU1heExlbmd0aCkgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IGZyb250aWVyLCBzY2hlZHVsZSB3b3JrZXJcbiAgICBkb2MuZnJvbnRpZXIgPSBNYXRoLm1pbihkb2MuZnJvbnRpZXIsIGZyb20ubGluZSk7XG4gICAgc3RhcnRXb3JrZXIoY20sIDQwMCk7XG5cbiAgICB2YXIgbGVuZGlmZiA9IGNoYW5nZS50ZXh0Lmxlbmd0aCAtICh0by5saW5lIC0gZnJvbS5saW5lKSAtIDE7XG4gICAgLy8gUmVtZW1iZXIgdGhhdCB0aGVzZSBsaW5lcyBjaGFuZ2VkLCBmb3IgdXBkYXRpbmcgdGhlIGRpc3BsYXlcbiAgICBpZiAoY2hhbmdlLmZ1bGwpXG4gICAgICByZWdDaGFuZ2UoY20pO1xuICAgIGVsc2UgaWYgKGZyb20ubGluZSA9PSB0by5saW5lICYmIGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxICYmICFpc1dob2xlTGluZVVwZGF0ZShjbS5kb2MsIGNoYW5nZSkpXG4gICAgICByZWdMaW5lQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIFwidGV4dFwiKTtcbiAgICBlbHNlXG4gICAgICByZWdDaGFuZ2UoY20sIGZyb20ubGluZSwgdG8ubGluZSArIDEsIGxlbmRpZmYpO1xuXG4gICAgdmFyIGNoYW5nZXNIYW5kbGVyID0gaGFzSGFuZGxlcihjbSwgXCJjaGFuZ2VzXCIpLCBjaGFuZ2VIYW5kbGVyID0gaGFzSGFuZGxlcihjbSwgXCJjaGFuZ2VcIik7XG4gICAgaWYgKGNoYW5nZUhhbmRsZXIgfHwgY2hhbmdlc0hhbmRsZXIpIHtcbiAgICAgIHZhciBvYmogPSB7XG4gICAgICAgIGZyb206IGZyb20sIHRvOiB0byxcbiAgICAgICAgdGV4dDogY2hhbmdlLnRleHQsXG4gICAgICAgIHJlbW92ZWQ6IGNoYW5nZS5yZW1vdmVkLFxuICAgICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW5cbiAgICAgIH07XG4gICAgICBpZiAoY2hhbmdlSGFuZGxlcikgc2lnbmFsTGF0ZXIoY20sIFwiY2hhbmdlXCIsIGNtLCBvYmopO1xuICAgICAgaWYgKGNoYW5nZXNIYW5kbGVyKSAoY20uY3VyT3AuY2hhbmdlT2JqcyB8fCAoY20uY3VyT3AuY2hhbmdlT2JqcyA9IFtdKSkucHVzaChvYmopO1xuICAgIH1cbiAgICBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGxhY2VSYW5nZShkb2MsIGNvZGUsIGZyb20sIHRvLCBvcmlnaW4pIHtcbiAgICBpZiAoIXRvKSB0byA9IGZyb207XG4gICAgaWYgKGNtcCh0bywgZnJvbSkgPCAwKSB7IHZhciB0bXAgPSB0bzsgdG8gPSBmcm9tOyBmcm9tID0gdG1wOyB9XG4gICAgaWYgKHR5cGVvZiBjb2RlID09IFwic3RyaW5nXCIpIGNvZGUgPSBkb2Muc3BsaXRMaW5lcyhjb2RlKTtcbiAgICBtYWtlQ2hhbmdlKGRvYywge2Zyb206IGZyb20sIHRvOiB0bywgdGV4dDogY29kZSwgb3JpZ2luOiBvcmlnaW59KTtcbiAgfVxuXG4gIC8vIFNDUk9MTElORyBUSElOR1MgSU5UTyBWSUVXXG5cbiAgLy8gSWYgYW4gZWRpdG9yIHNpdHMgb24gdGhlIHRvcCBvciBib3R0b20gb2YgdGhlIHdpbmRvdywgcGFydGlhbGx5XG4gIC8vIHNjcm9sbGVkIG91dCBvZiB2aWV3LCB0aGlzIGVuc3VyZXMgdGhhdCB0aGUgY3Vyc29yIGlzIHZpc2libGUuXG4gIGZ1bmN0aW9uIG1heWJlU2Nyb2xsV2luZG93KGNtLCBjb29yZHMpIHtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIFwic2Nyb2xsQ3Vyc29ySW50b1ZpZXdcIikpIHJldHVybjtcblxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgYm94ID0gZGlzcGxheS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZG9TY3JvbGwgPSBudWxsO1xuICAgIGlmIChjb29yZHMudG9wICsgYm94LnRvcCA8IDApIGRvU2Nyb2xsID0gdHJ1ZTtcbiAgICBlbHNlIGlmIChjb29yZHMuYm90dG9tICsgYm94LnRvcCA+ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkpIGRvU2Nyb2xsID0gZmFsc2U7XG4gICAgaWYgKGRvU2Nyb2xsICE9IG51bGwgJiYgIXBoYW50b20pIHtcbiAgICAgIHZhciBzY3JvbGxOb2RlID0gZWx0KFwiZGl2XCIsIFwiXFx1MjAwYlwiLCBudWxsLCBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoY29vcmRzLnRvcCAtIGRpc3BsYXkudmlld09mZnNldCAtIHBhZGRpbmdUb3AoY20uZGlzcGxheSkpICsgXCJweDsgaGVpZ2h0OiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoY29vcmRzLmJvdHRvbSAtIGNvb3Jkcy50b3AgKyBzY3JvbGxHYXAoY20pICsgZGlzcGxheS5iYXJIZWlnaHQpICsgXCJweDsgbGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzLmxlZnQgKyBcInB4OyB3aWR0aDogMnB4O1wiKTtcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmFwcGVuZENoaWxkKHNjcm9sbE5vZGUpO1xuICAgICAgc2Nyb2xsTm9kZS5zY3JvbGxJbnRvVmlldyhkb1Njcm9sbCk7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChzY3JvbGxOb2RlKTtcbiAgICB9XG4gIH1cblxuICAvLyBTY3JvbGwgYSBnaXZlbiBwb3NpdGlvbiBpbnRvIHZpZXcgKGltbWVkaWF0ZWx5KSwgdmVyaWZ5aW5nIHRoYXRcbiAgLy8gaXQgYWN0dWFsbHkgYmVjYW1lIHZpc2libGUgKGFzIGxpbmUgaGVpZ2h0cyBhcmUgYWNjdXJhdGVseVxuICAvLyBtZWFzdXJlZCwgdGhlIHBvc2l0aW9uIG9mIHNvbWV0aGluZyBtYXkgJ2RyaWZ0JyBkdXJpbmcgZHJhd2luZykuXG4gIGZ1bmN0aW9uIHNjcm9sbFBvc0ludG9WaWV3KGNtLCBwb3MsIGVuZCwgbWFyZ2luKSB7XG4gICAgaWYgKG1hcmdpbiA9PSBudWxsKSBtYXJnaW4gPSAwO1xuICAgIGZvciAodmFyIGxpbWl0ID0gMDsgbGltaXQgPCA1OyBsaW1pdCsrKSB7XG4gICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlLCBjb29yZHMgPSBjdXJzb3JDb29yZHMoY20sIHBvcyk7XG4gICAgICB2YXIgZW5kQ29vcmRzID0gIWVuZCB8fCBlbmQgPT0gcG9zID8gY29vcmRzIDogY3Vyc29yQ29vcmRzKGNtLCBlbmQpO1xuICAgICAgdmFyIHNjcm9sbFBvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgTWF0aC5taW4oY29vcmRzLmxlZnQsIGVuZENvb3Jkcy5sZWZ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oY29vcmRzLnRvcCwgZW5kQ29vcmRzLnRvcCkgLSBtYXJnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGNvb3Jkcy5sZWZ0LCBlbmRDb29yZHMubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGNvb3Jkcy5ib3R0b20sIGVuZENvb3Jkcy5ib3R0b20pICsgbWFyZ2luKTtcbiAgICAgIHZhciBzdGFydFRvcCA9IGNtLmRvYy5zY3JvbGxUb3AsIHN0YXJ0TGVmdCA9IGNtLmRvYy5zY3JvbGxMZWZ0O1xuICAgICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxUb3AgIT0gbnVsbCkge1xuICAgICAgICBzZXRTY3JvbGxUb3AoY20sIHNjcm9sbFBvcy5zY3JvbGxUb3ApO1xuICAgICAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbFRvcCAtIHN0YXJ0VG9wKSA+IDEpIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHtcbiAgICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgc2Nyb2xsUG9zLnNjcm9sbExlZnQpO1xuICAgICAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbExlZnQgLSBzdGFydExlZnQpID4gMSkgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoIWNoYW5nZWQpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG5cbiAgLy8gU2Nyb2xsIGEgZ2l2ZW4gc2V0IG9mIGNvb3JkaW5hdGVzIGludG8gdmlldyAoaW1tZWRpYXRlbHkpLlxuICBmdW5jdGlvbiBzY3JvbGxJbnRvVmlldyhjbSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgc2Nyb2xsUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxUb3AgIT0gbnVsbCkgc2V0U2Nyb2xsVG9wKGNtLCBzY3JvbGxQb3Muc2Nyb2xsVG9wKTtcbiAgICBpZiAoc2Nyb2xsUG9zLnNjcm9sbExlZnQgIT0gbnVsbCkgc2V0U2Nyb2xsTGVmdChjbSwgc2Nyb2xsUG9zLnNjcm9sbExlZnQpO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGEgbmV3IHNjcm9sbCBwb3NpdGlvbiBuZWVkZWQgdG8gc2Nyb2xsIHRoZSBnaXZlblxuICAvLyByZWN0YW5nbGUgaW50byB2aWV3LiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHNjcm9sbFRvcCBhbmRcbiAgLy8gc2Nyb2xsTGVmdCBwcm9wZXJ0aWVzLiBXaGVuIHRoZXNlIGFyZSB1bmRlZmluZWQsIHRoZVxuICAvLyB2ZXJ0aWNhbC9ob3Jpem9udGFsIHBvc2l0aW9uIGRvZXMgbm90IG5lZWQgdG8gYmUgYWRqdXN0ZWQuXG4gIGZ1bmN0aW9uIGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHNuYXBNYXJnaW4gPSB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpO1xuICAgIGlmICh5MSA8IDApIHkxID0gMDtcbiAgICB2YXIgc2NyZWVudG9wID0gY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsVG9wICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxUb3AgOiBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDtcbiAgICB2YXIgc2NyZWVuID0gZGlzcGxheUhlaWdodChjbSksIHJlc3VsdCA9IHt9O1xuICAgIGlmICh5MiAtIHkxID4gc2NyZWVuKSB5MiA9IHkxICsgc2NyZWVuO1xuICAgIHZhciBkb2NCb3R0b20gPSBjbS5kb2MuaGVpZ2h0ICsgcGFkZGluZ1ZlcnQoZGlzcGxheSk7XG4gICAgdmFyIGF0VG9wID0geTEgPCBzbmFwTWFyZ2luLCBhdEJvdHRvbSA9IHkyID4gZG9jQm90dG9tIC0gc25hcE1hcmdpbjtcbiAgICBpZiAoeTEgPCBzY3JlZW50b3ApIHtcbiAgICAgIHJlc3VsdC5zY3JvbGxUb3AgPSBhdFRvcCA/IDAgOiB5MTtcbiAgICB9IGVsc2UgaWYgKHkyID4gc2NyZWVudG9wICsgc2NyZWVuKSB7XG4gICAgICB2YXIgbmV3VG9wID0gTWF0aC5taW4oeTEsIChhdEJvdHRvbSA/IGRvY0JvdHRvbSA6IHkyKSAtIHNjcmVlbik7XG4gICAgICBpZiAobmV3VG9wICE9IHNjcmVlbnRvcCkgcmVzdWx0LnNjcm9sbFRvcCA9IG5ld1RvcDtcbiAgICB9XG5cbiAgICB2YXIgc2NyZWVubGVmdCA9IGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbExlZnQgIT0gbnVsbCA/IGNtLmN1ck9wLnNjcm9sbExlZnQgOiBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQ7XG4gICAgdmFyIHNjcmVlbncgPSBkaXNwbGF5V2lkdGgoY20pIC0gKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGggOiAwKTtcbiAgICB2YXIgdG9vV2lkZSA9IHgyIC0geDEgPiBzY3JlZW53O1xuICAgIGlmICh0b29XaWRlKSB4MiA9IHgxICsgc2NyZWVudztcbiAgICBpZiAoeDEgPCAxMClcbiAgICAgIHJlc3VsdC5zY3JvbGxMZWZ0ID0gMDtcbiAgICBlbHNlIGlmICh4MSA8IHNjcmVlbmxlZnQpXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIHgxIC0gKHRvb1dpZGUgPyAwIDogMTApKTtcbiAgICBlbHNlIGlmICh4MiA+IHNjcmVlbncgKyBzY3JlZW5sZWZ0IC0gMylcbiAgICAgIHJlc3VsdC5zY3JvbGxMZWZ0ID0geDIgKyAodG9vV2lkZSA/IDAgOiAxMCkgLSBzY3JlZW53O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBTdG9yZSBhIHJlbGF0aXZlIGFkanVzdG1lbnQgdG8gdGhlIHNjcm9sbCBwb3NpdGlvbiBpbiB0aGUgY3VycmVudFxuICAvLyBvcGVyYXRpb24gKHRvIGJlIGFwcGxpZWQgd2hlbiB0aGUgb3BlcmF0aW9uIGZpbmlzaGVzKS5cbiAgZnVuY3Rpb24gYWRkVG9TY3JvbGxQb3MoY20sIGxlZnQsIHRvcCkge1xuICAgIGlmIChsZWZ0ICE9IG51bGwgfHwgdG9wICE9IG51bGwpIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XG4gICAgaWYgKGxlZnQgIT0gbnVsbClcbiAgICAgIGNtLmN1ck9wLnNjcm9sbExlZnQgPSAoY20uY3VyT3Auc2Nyb2xsTGVmdCA9PSBudWxsID8gY20uZG9jLnNjcm9sbExlZnQgOiBjbS5jdXJPcC5zY3JvbGxMZWZ0KSArIGxlZnQ7XG4gICAgaWYgKHRvcCAhPSBudWxsKVxuICAgICAgY20uY3VyT3Auc2Nyb2xsVG9wID0gKGNtLmN1ck9wLnNjcm9sbFRvcCA9PSBudWxsID8gY20uZG9jLnNjcm9sbFRvcCA6IGNtLmN1ck9wLnNjcm9sbFRvcCkgKyB0b3A7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgdGhhdCBhdCB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb24gdGhlIGN1cnJlbnQgY3Vyc29yIGlzXG4gIC8vIHNob3duLlxuICBmdW5jdGlvbiBlbnN1cmVDdXJzb3JWaXNpYmxlKGNtKSB7XG4gICAgcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKTtcbiAgICB2YXIgY3VyID0gY20uZ2V0Q3Vyc29yKCksIGZyb20gPSBjdXIsIHRvID0gY3VyO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIGZyb20gPSBjdXIuY2ggPyBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDEpIDogY3VyO1xuICAgICAgdG8gPSBQb3MoY3VyLmxpbmUsIGN1ci5jaCArIDEpO1xuICAgIH1cbiAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IHtmcm9tOiBmcm9tLCB0bzogdG8sIG1hcmdpbjogY20ub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW4sIGlzQ3Vyc29yOiB0cnVlfTtcbiAgfVxuXG4gIC8vIFdoZW4gYW4gb3BlcmF0aW9uIGhhcyBpdHMgc2Nyb2xsVG9Qb3MgcHJvcGVydHkgc2V0LCBhbmQgYW5vdGhlclxuICAvLyBzY3JvbGwgYWN0aW9uIGlzIGFwcGxpZWQgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvbiwgdGhpc1xuICAvLyAnc2ltdWxhdGVzJyBzY3JvbGxpbmcgdGhhdCBwb3NpdGlvbiBpbnRvIHZpZXcgaW4gYSBjaGVhcCB3YXksIHNvXG4gIC8vIHRoYXQgdGhlIGVmZmVjdCBvZiBpbnRlcm1lZGlhdGUgc2Nyb2xsIGNvbW1hbmRzIGlzIG5vdCBpZ25vcmVkLlxuICBmdW5jdGlvbiByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pIHtcbiAgICB2YXIgcmFuZ2UgPSBjbS5jdXJPcC5zY3JvbGxUb1BvcztcbiAgICBpZiAocmFuZ2UpIHtcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvUG9zID0gbnVsbDtcbiAgICAgIHZhciBmcm9tID0gZXN0aW1hdGVDb29yZHMoY20sIHJhbmdlLmZyb20pLCB0byA9IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZS50byk7XG4gICAgICB2YXIgc1BvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgTWF0aC5taW4oZnJvbS5sZWZ0LCB0by5sZWZ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGZyb20udG9wLCB0by50b3ApIC0gcmFuZ2UubWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoZnJvbS5yaWdodCwgdG8ucmlnaHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoZnJvbS5ib3R0b20sIHRvLmJvdHRvbSkgKyByYW5nZS5tYXJnaW4pO1xuICAgICAgY20uc2Nyb2xsVG8oc1Bvcy5zY3JvbGxMZWZ0LCBzUG9zLnNjcm9sbFRvcCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQVBJIFVUSUxJVElFU1xuXG4gIC8vIEluZGVudCB0aGUgZ2l2ZW4gbGluZS4gVGhlIGhvdyBwYXJhbWV0ZXIgY2FuIGJlIFwic21hcnRcIixcbiAgLy8gXCJhZGRcIi9udWxsLCBcInN1YnRyYWN0XCIsIG9yIFwicHJldlwiLiBXaGVuIGFnZ3Jlc3NpdmUgaXMgZmFsc2VcbiAgLy8gKHR5cGljYWxseSBzZXQgdG8gdHJ1ZSBmb3IgZm9yY2VkIHNpbmdsZS1saW5lIGluZGVudHMpLCBlbXB0eVxuICAvLyBsaW5lcyBhcmUgbm90IGluZGVudGVkLCBhbmQgcGxhY2VzIHdoZXJlIHRoZSBtb2RlIHJldHVybnMgUGFzc1xuICAvLyBhcmUgbGVmdCBhbG9uZS5cbiAgZnVuY3Rpb24gaW5kZW50TGluZShjbSwgbiwgaG93LCBhZ2dyZXNzaXZlKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgc3RhdGU7XG4gICAgaWYgKGhvdyA9PSBudWxsKSBob3cgPSBcImFkZFwiO1xuICAgIGlmIChob3cgPT0gXCJzbWFydFwiKSB7XG4gICAgICAvLyBGYWxsIGJhY2sgdG8gXCJwcmV2XCIgd2hlbiB0aGUgbW9kZSBkb2Vzbid0IGhhdmUgYW4gaW5kZW50YXRpb25cbiAgICAgIC8vIG1ldGhvZC5cbiAgICAgIGlmICghZG9jLm1vZGUuaW5kZW50KSBob3cgPSBcInByZXZcIjtcbiAgICAgIGVsc2Ugc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShjbSwgbik7XG4gICAgfVxuXG4gICAgdmFyIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbiksIGN1clNwYWNlID0gY291bnRDb2x1bW4obGluZS50ZXh0LCBudWxsLCB0YWJTaXplKTtcbiAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgIHZhciBjdXJTcGFjZVN0cmluZyA9IGxpbmUudGV4dC5tYXRjaCgvXlxccyovKVswXSwgaW5kZW50YXRpb247XG4gICAgaWYgKCFhZ2dyZXNzaXZlICYmICEvXFxTLy50ZXN0KGxpbmUudGV4dCkpIHtcbiAgICAgIGluZGVudGF0aW9uID0gMDtcbiAgICAgIGhvdyA9IFwibm90XCI7XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJzbWFydFwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGRvYy5tb2RlLmluZGVudChzdGF0ZSwgbGluZS50ZXh0LnNsaWNlKGN1clNwYWNlU3RyaW5nLmxlbmd0aCksIGxpbmUudGV4dCk7XG4gICAgICBpZiAoaW5kZW50YXRpb24gPT0gUGFzcyB8fCBpbmRlbnRhdGlvbiA+IDE1MCkge1xuICAgICAgICBpZiAoIWFnZ3Jlc3NpdmUpIHJldHVybjtcbiAgICAgICAgaG93ID0gXCJwcmV2XCI7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChob3cgPT0gXCJwcmV2XCIpIHtcbiAgICAgIGlmIChuID4gZG9jLmZpcnN0KSBpbmRlbnRhdGlvbiA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBuLTEpLnRleHQsIG51bGwsIHRhYlNpemUpO1xuICAgICAgZWxzZSBpbmRlbnRhdGlvbiA9IDA7XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJhZGRcIikge1xuICAgICAgaW5kZW50YXRpb24gPSBjdXJTcGFjZSArIGNtLm9wdGlvbnMuaW5kZW50VW5pdDtcbiAgICB9IGVsc2UgaWYgKGhvdyA9PSBcInN1YnRyYWN0XCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgLSBjbS5vcHRpb25zLmluZGVudFVuaXQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaG93ID09IFwibnVtYmVyXCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgKyBob3c7XG4gICAgfVxuICAgIGluZGVudGF0aW9uID0gTWF0aC5tYXgoMCwgaW5kZW50YXRpb24pO1xuXG4gICAgdmFyIGluZGVudFN0cmluZyA9IFwiXCIsIHBvcyA9IDA7XG4gICAgaWYgKGNtLm9wdGlvbnMuaW5kZW50V2l0aFRhYnMpXG4gICAgICBmb3IgKHZhciBpID0gTWF0aC5mbG9vcihpbmRlbnRhdGlvbiAvIHRhYlNpemUpOyBpOyAtLWkpIHtwb3MgKz0gdGFiU2l6ZTsgaW5kZW50U3RyaW5nICs9IFwiXFx0XCI7fVxuICAgIGlmIChwb3MgPCBpbmRlbnRhdGlvbikgaW5kZW50U3RyaW5nICs9IHNwYWNlU3RyKGluZGVudGF0aW9uIC0gcG9zKTtcblxuICAgIGlmIChpbmRlbnRTdHJpbmcgIT0gY3VyU3BhY2VTdHJpbmcpIHtcbiAgICAgIHJlcGxhY2VSYW5nZShkb2MsIGluZGVudFN0cmluZywgUG9zKG4sIDApLCBQb3MobiwgY3VyU3BhY2VTdHJpbmcubGVuZ3RoKSwgXCIraW5wdXRcIik7XG4gICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEVuc3VyZSB0aGF0LCBpZiB0aGUgY3Vyc29yIHdhcyBpbiB0aGUgd2hpdGVzcGFjZSBhdCB0aGUgc3RhcnRcbiAgICAgIC8vIG9mIHRoZSBsaW5lLCBpdCBpcyBtb3ZlZCB0byB0aGUgZW5kIG9mIHRoYXQgc3BhY2UuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgICBpZiAocmFuZ2UuaGVhZC5saW5lID09IG4gJiYgcmFuZ2UuaGVhZC5jaCA8IGN1clNwYWNlU3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBwb3MgPSBQb3MobiwgY3VyU3BhY2VTdHJpbmcubGVuZ3RoKTtcbiAgICAgICAgICByZXBsYWNlT25lU2VsZWN0aW9uKGRvYywgaSwgbmV3IFJhbmdlKHBvcywgcG9zKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBVdGlsaXR5IGZvciBhcHBseWluZyBhIGNoYW5nZSB0byBhIGxpbmUgYnkgaGFuZGxlIG9yIG51bWJlcixcbiAgLy8gcmV0dXJuaW5nIHRoZSBudW1iZXIgYW5kIG9wdGlvbmFsbHkgcmVnaXN0ZXJpbmcgdGhlIGxpbmUgYXNcbiAgLy8gY2hhbmdlZC5cbiAgZnVuY3Rpb24gY2hhbmdlTGluZShkb2MsIGhhbmRsZSwgY2hhbmdlVHlwZSwgb3ApIHtcbiAgICB2YXIgbm8gPSBoYW5kbGUsIGxpbmUgPSBoYW5kbGU7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGUgPT0gXCJudW1iZXJcIikgbGluZSA9IGdldExpbmUoZG9jLCBjbGlwTGluZShkb2MsIGhhbmRsZSkpO1xuICAgIGVsc2Ugbm8gPSBsaW5lTm8oaGFuZGxlKTtcbiAgICBpZiAobm8gPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKG9wKGxpbmUsIG5vKSAmJiBkb2MuY20pIHJlZ0xpbmVDaGFuZ2UoZG9jLmNtLCBubywgY2hhbmdlVHlwZSk7XG4gICAgcmV0dXJuIGxpbmU7XG4gIH1cblxuICAvLyBIZWxwZXIgZm9yIGRlbGV0aW5nIHRleHQgbmVhciB0aGUgc2VsZWN0aW9uKHMpLCB1c2VkIHRvIGltcGxlbWVudFxuICAvLyBiYWNrc3BhY2UsIGRlbGV0ZSwgYW5kIHNpbWlsYXIgZnVuY3Rpb25hbGl0eS5cbiAgZnVuY3Rpb24gZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgY29tcHV0ZSkge1xuICAgIHZhciByYW5nZXMgPSBjbS5kb2Muc2VsLnJhbmdlcywga2lsbCA9IFtdO1xuICAgIC8vIEJ1aWxkIHVwIGEgc2V0IG9mIHJhbmdlcyB0byBraWxsIGZpcnN0LCBtZXJnaW5nIG92ZXJsYXBwaW5nXG4gICAgLy8gcmFuZ2VzLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9LaWxsID0gY29tcHV0ZShyYW5nZXNbaV0pO1xuICAgICAgd2hpbGUgKGtpbGwubGVuZ3RoICYmIGNtcCh0b0tpbGwuZnJvbSwgbHN0KGtpbGwpLnRvKSA8PSAwKSB7XG4gICAgICAgIHZhciByZXBsYWNlZCA9IGtpbGwucG9wKCk7XG4gICAgICAgIGlmIChjbXAocmVwbGFjZWQuZnJvbSwgdG9LaWxsLmZyb20pIDwgMCkge1xuICAgICAgICAgIHRvS2lsbC5mcm9tID0gcmVwbGFjZWQuZnJvbTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAga2lsbC5wdXNoKHRvS2lsbCk7XG4gICAgfVxuICAgIC8vIE5leHQsIHJlbW92ZSB0aG9zZSBhY3R1YWwgcmFuZ2VzLlxuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IGtpbGwubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIFwiXCIsIGtpbGxbaV0uZnJvbSwga2lsbFtpXS50bywgXCIrZGVsZXRlXCIpO1xuICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBVc2VkIGZvciBob3Jpem9udGFsIHJlbGF0aXZlIG1vdGlvbi4gRGlyIGlzIC0xIG9yIDEgKGxlZnQgb3JcbiAgLy8gcmlnaHQpLCB1bml0IGNhbiBiZSBcImNoYXJcIiwgXCJjb2x1bW5cIiAobGlrZSBjaGFyLCBidXQgZG9lc24ndFxuICAvLyBjcm9zcyBsaW5lIGJvdW5kYXJpZXMpLCBcIndvcmRcIiAoYWNyb3NzIG5leHQgd29yZCksIG9yIFwiZ3JvdXBcIiAodG9cbiAgLy8gdGhlIHN0YXJ0IG9mIG5leHQgZ3JvdXAgb2Ygd29yZCBvciBub24td29yZC1ub24td2hpdGVzcGFjZVxuICAvLyBjaGFycykuIFRoZSB2aXN1YWxseSBwYXJhbSBjb250cm9scyB3aGV0aGVyLCBpbiByaWdodC10by1sZWZ0XG4gIC8vIHRleHQsIGRpcmVjdGlvbiAxIG1lYW5zIHRvIG1vdmUgdG93YXJkcyB0aGUgbmV4dCBpbmRleCBpbiB0aGVcbiAgLy8gc3RyaW5nLCBvciB0b3dhcmRzIHRoZSBjaGFyYWN0ZXIgdG8gdGhlIHJpZ2h0IG9mIHRoZSBjdXJyZW50XG4gIC8vIHBvc2l0aW9uLiBUaGUgcmVzdWx0aW5nIHBvc2l0aW9uIHdpbGwgaGF2ZSBhIGhpdFNpZGU9dHJ1ZVxuICAvLyBwcm9wZXJ0eSBpZiBpdCByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICBmdW5jdGlvbiBmaW5kUG9zSChkb2MsIHBvcywgZGlyLCB1bml0LCB2aXN1YWxseSkge1xuICAgIHZhciBsaW5lID0gcG9zLmxpbmUsIGNoID0gcG9zLmNoLCBvcmlnRGlyID0gZGlyO1xuICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmUpO1xuICAgIGZ1bmN0aW9uIGZpbmROZXh0TGluZSgpIHtcbiAgICAgIHZhciBsID0gbGluZSArIGRpcjtcbiAgICAgIGlmIChsIDwgZG9jLmZpcnN0IHx8IGwgPj0gZG9jLmZpcnN0ICsgZG9jLnNpemUpIHJldHVybiBmYWxzZVxuICAgICAgbGluZSA9IGw7XG4gICAgICByZXR1cm4gbGluZU9iaiA9IGdldExpbmUoZG9jLCBsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbW92ZU9uY2UoYm91bmRUb0xpbmUpIHtcbiAgICAgIHZhciBuZXh0ID0gKHZpc3VhbGx5ID8gbW92ZVZpc3VhbGx5IDogbW92ZUxvZ2ljYWxseSkobGluZU9iaiwgY2gsIGRpciwgdHJ1ZSk7XG4gICAgICBpZiAobmV4dCA9PSBudWxsKSB7XG4gICAgICAgIGlmICghYm91bmRUb0xpbmUgJiYgZmluZE5leHRMaW5lKCkpIHtcbiAgICAgICAgICBpZiAodmlzdWFsbHkpIGNoID0gKGRpciA8IDAgPyBsaW5lUmlnaHQgOiBsaW5lTGVmdCkobGluZU9iaik7XG4gICAgICAgICAgZWxzZSBjaCA9IGRpciA8IDAgPyBsaW5lT2JqLnRleHQubGVuZ3RoIDogMDtcbiAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIGNoID0gbmV4dDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh1bml0ID09IFwiY2hhclwiKSB7XG4gICAgICBtb3ZlT25jZSgpXG4gICAgfSBlbHNlIGlmICh1bml0ID09IFwiY29sdW1uXCIpIHtcbiAgICAgIG1vdmVPbmNlKHRydWUpXG4gICAgfSBlbHNlIGlmICh1bml0ID09IFwid29yZFwiIHx8IHVuaXQgPT0gXCJncm91cFwiKSB7XG4gICAgICB2YXIgc2F3VHlwZSA9IG51bGwsIGdyb3VwID0gdW5pdCA9PSBcImdyb3VwXCI7XG4gICAgICB2YXIgaGVscGVyID0gZG9jLmNtICYmIGRvYy5jbS5nZXRIZWxwZXIocG9zLCBcIndvcmRDaGFyc1wiKTtcbiAgICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRpciA8IDAgJiYgIW1vdmVPbmNlKCFmaXJzdCkpIGJyZWFrO1xuICAgICAgICB2YXIgY3VyID0gbGluZU9iai50ZXh0LmNoYXJBdChjaCkgfHwgXCJcXG5cIjtcbiAgICAgICAgdmFyIHR5cGUgPSBpc1dvcmRDaGFyKGN1ciwgaGVscGVyKSA/IFwid1wiXG4gICAgICAgICAgOiBncm91cCAmJiBjdXIgPT0gXCJcXG5cIiA/IFwiblwiXG4gICAgICAgICAgOiAhZ3JvdXAgfHwgL1xccy8udGVzdChjdXIpID8gbnVsbFxuICAgICAgICAgIDogXCJwXCI7XG4gICAgICAgIGlmIChncm91cCAmJiAhZmlyc3QgJiYgIXR5cGUpIHR5cGUgPSBcInNcIjtcbiAgICAgICAgaWYgKHNhd1R5cGUgJiYgc2F3VHlwZSAhPSB0eXBlKSB7XG4gICAgICAgICAgaWYgKGRpciA8IDApIHtkaXIgPSAxOyBtb3ZlT25jZSgpO31cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlKSBzYXdUeXBlID0gdHlwZTtcbiAgICAgICAgaWYgKGRpciA+IDAgJiYgIW1vdmVPbmNlKCFmaXJzdCkpIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gc2tpcEF0b21pYyhkb2MsIFBvcyhsaW5lLCBjaCksIHBvcywgb3JpZ0RpciwgdHJ1ZSk7XG4gICAgaWYgKCFjbXAocG9zLCByZXN1bHQpKSByZXN1bHQuaGl0U2lkZSA9IHRydWU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIEZvciByZWxhdGl2ZSB2ZXJ0aWNhbCBtb3ZlbWVudC4gRGlyIG1heSBiZSAtMSBvciAxLiBVbml0IGNhbiBiZVxuICAvLyBcInBhZ2VcIiBvciBcImxpbmVcIi4gVGhlIHJlc3VsdGluZyBwb3NpdGlvbiB3aWxsIGhhdmUgYSBoaXRTaWRlPXRydWVcbiAgLy8gcHJvcGVydHkgaWYgaXQgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZFBvc1YoY20sIHBvcywgZGlyLCB1bml0KSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgeCA9IHBvcy5sZWZ0LCB5O1xuICAgIGlmICh1bml0ID09IFwicGFnZVwiKSB7XG4gICAgICB2YXIgcGFnZVNpemUgPSBNYXRoLm1pbihjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICB5ID0gcG9zLnRvcCArIGRpciAqIChwYWdlU2l6ZSAtIChkaXIgPCAwID8gMS41IDogLjUpICogdGV4dEhlaWdodChjbS5kaXNwbGF5KSk7XG4gICAgfSBlbHNlIGlmICh1bml0ID09IFwibGluZVwiKSB7XG4gICAgICB5ID0gZGlyID4gMCA/IHBvcy5ib3R0b20gKyAzIDogcG9zLnRvcCAtIDM7XG4gICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgIHZhciB0YXJnZXQgPSBjb29yZHNDaGFyKGNtLCB4LCB5KTtcbiAgICAgIGlmICghdGFyZ2V0Lm91dHNpZGUpIGJyZWFrO1xuICAgICAgaWYgKGRpciA8IDAgPyB5IDw9IDAgOiB5ID49IGRvYy5oZWlnaHQpIHsgdGFyZ2V0LmhpdFNpZGUgPSB0cnVlOyBicmVhazsgfVxuICAgICAgeSArPSBkaXIgKiA1O1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgLy8gRURJVE9SIE1FVEhPRFNcblxuICAvLyBUaGUgcHVibGljbHkgdmlzaWJsZSBBUEkuIE5vdGUgdGhhdCBtZXRob2RPcChmKSBtZWFuc1xuICAvLyAnd3JhcCBmIGluIGFuIG9wZXJhdGlvbiwgcGVyZm9ybWVkIG9uIGl0cyBgdGhpc2AgcGFyYW1ldGVyJy5cblxuICAvLyBUaGlzIGlzIG5vdCB0aGUgY29tcGxldGUgc2V0IG9mIGVkaXRvciBtZXRob2RzLiBNb3N0IG9mIHRoZVxuICAvLyBtZXRob2RzIGRlZmluZWQgb24gdGhlIERvYyB0eXBlIGFyZSBhbHNvIGluamVjdGVkIGludG9cbiAgLy8gQ29kZU1pcnJvci5wcm90b3R5cGUsIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBhbmRcbiAgLy8gY29udmVuaWVuY2UuXG5cbiAgQ29kZU1pcnJvci5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvZGVNaXJyb3IsXG4gICAgZm9jdXM6IGZ1bmN0aW9uKCl7d2luZG93LmZvY3VzKCk7IHRoaXMuZGlzcGxheS5pbnB1dC5mb2N1cygpO30sXG5cbiAgICBzZXRPcHRpb246IGZ1bmN0aW9uKG9wdGlvbiwgdmFsdWUpIHtcbiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLCBvbGQgPSBvcHRpb25zW29wdGlvbl07XG4gICAgICBpZiAob3B0aW9uc1tvcHRpb25dID09IHZhbHVlICYmIG9wdGlvbiAhPSBcIm1vZGVcIikgcmV0dXJuO1xuICAgICAgb3B0aW9uc1tvcHRpb25dID0gdmFsdWU7XG4gICAgICBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSlcbiAgICAgICAgb3BlcmF0aW9uKHRoaXMsIG9wdGlvbkhhbmRsZXJzW29wdGlvbl0pKHRoaXMsIHZhbHVlLCBvbGQpO1xuICAgIH0sXG5cbiAgICBnZXRPcHRpb246IGZ1bmN0aW9uKG9wdGlvbikge3JldHVybiB0aGlzLm9wdGlvbnNbb3B0aW9uXTt9LFxuICAgIGdldERvYzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZG9jO30sXG5cbiAgICBhZGRLZXlNYXA6IGZ1bmN0aW9uKG1hcCwgYm90dG9tKSB7XG4gICAgICB0aGlzLnN0YXRlLmtleU1hcHNbYm90dG9tID8gXCJwdXNoXCIgOiBcInVuc2hpZnRcIl0oZ2V0S2V5TWFwKG1hcCkpO1xuICAgIH0sXG4gICAgcmVtb3ZlS2V5TWFwOiBmdW5jdGlvbihtYXApIHtcbiAgICAgIHZhciBtYXBzID0gdGhpcy5zdGF0ZS5rZXlNYXBzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXBzLmxlbmd0aDsgKytpKVxuICAgICAgICBpZiAobWFwc1tpXSA9PSBtYXAgfHwgbWFwc1tpXS5uYW1lID09IG1hcCkge1xuICAgICAgICAgIG1hcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGFkZE92ZXJsYXk6IG1ldGhvZE9wKGZ1bmN0aW9uKHNwZWMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlID0gc3BlYy50b2tlbiA/IHNwZWMgOiBDb2RlTWlycm9yLmdldE1vZGUodGhpcy5vcHRpb25zLCBzcGVjKTtcbiAgICAgIGlmIChtb2RlLnN0YXJ0U3RhdGUpIHRocm93IG5ldyBFcnJvcihcIk92ZXJsYXlzIG1heSBub3QgYmUgc3RhdGVmdWwuXCIpO1xuICAgICAgdGhpcy5zdGF0ZS5vdmVybGF5cy5wdXNoKHttb2RlOiBtb2RlLCBtb2RlU3BlYzogc3BlYywgb3BhcXVlOiBvcHRpb25zICYmIG9wdGlvbnMub3BhcXVlfSk7XG4gICAgICB0aGlzLnN0YXRlLm1vZGVHZW4rKztcbiAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcbiAgICB9KSxcbiAgICByZW1vdmVPdmVybGF5OiBtZXRob2RPcChmdW5jdGlvbihzcGVjKSB7XG4gICAgICB2YXIgb3ZlcmxheXMgPSB0aGlzLnN0YXRlLm92ZXJsYXlzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdmVybGF5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VyID0gb3ZlcmxheXNbaV0ubW9kZVNwZWM7XG4gICAgICAgIGlmIChjdXIgPT0gc3BlYyB8fCB0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIGN1ci5uYW1lID09IHNwZWMpIHtcbiAgICAgICAgICBvdmVybGF5cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5tb2RlR2VuKys7XG4gICAgICAgICAgcmVnQ2hhbmdlKHRoaXMpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuXG4gICAgaW5kZW50TGluZTogbWV0aG9kT3AoZnVuY3Rpb24obiwgZGlyLCBhZ2dyZXNzaXZlKSB7XG4gICAgICBpZiAodHlwZW9mIGRpciAhPSBcInN0cmluZ1wiICYmIHR5cGVvZiBkaXIgIT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoZGlyID09IG51bGwpIGRpciA9IHRoaXMub3B0aW9ucy5zbWFydEluZGVudCA/IFwic21hcnRcIiA6IFwicHJldlwiO1xuICAgICAgICBlbHNlIGRpciA9IGRpciA/IFwiYWRkXCIgOiBcInN1YnRyYWN0XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXNMaW5lKHRoaXMuZG9jLCBuKSkgaW5kZW50TGluZSh0aGlzLCBuLCBkaXIsIGFnZ3Jlc3NpdmUpO1xuICAgIH0pLFxuICAgIGluZGVudFNlbGVjdGlvbjogbWV0aG9kT3AoZnVuY3Rpb24oaG93KSB7XG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5kb2Muc2VsLnJhbmdlcywgZW5kID0gLTE7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkoKSkge1xuICAgICAgICAgIHZhciBmcm9tID0gcmFuZ2UuZnJvbSgpLCB0byA9IHJhbmdlLnRvKCk7XG4gICAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5tYXgoZW5kLCBmcm9tLmxpbmUpO1xuICAgICAgICAgIGVuZCA9IE1hdGgubWluKHRoaXMubGFzdExpbmUoKSwgdG8ubGluZSAtICh0by5jaCA/IDAgOiAxKSkgKyAxO1xuICAgICAgICAgIGZvciAodmFyIGogPSBzdGFydDsgaiA8IGVuZDsgKytqKVxuICAgICAgICAgICAgaW5kZW50TGluZSh0aGlzLCBqLCBob3cpO1xuICAgICAgICAgIHZhciBuZXdSYW5nZXMgPSB0aGlzLmRvYy5zZWwucmFuZ2VzO1xuICAgICAgICAgIGlmIChmcm9tLmNoID09IDAgJiYgcmFuZ2VzLmxlbmd0aCA9PSBuZXdSYW5nZXMubGVuZ3RoICYmIG5ld1Jhbmdlc1tpXS5mcm9tKCkuY2ggPiAwKVxuICAgICAgICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbih0aGlzLmRvYywgaSwgbmV3IFJhbmdlKGZyb20sIG5ld1Jhbmdlc1tpXS50bygpKSwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICB9IGVsc2UgaWYgKHJhbmdlLmhlYWQubGluZSA+IGVuZCkge1xuICAgICAgICAgIGluZGVudExpbmUodGhpcywgcmFuZ2UuaGVhZC5saW5lLCBob3csIHRydWUpO1xuICAgICAgICAgIGVuZCA9IHJhbmdlLmhlYWQubGluZTtcbiAgICAgICAgICBpZiAoaSA9PSB0aGlzLmRvYy5zZWwucHJpbUluZGV4KSBlbnN1cmVDdXJzb3JWaXNpYmxlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG5cbiAgICAvLyBGZXRjaCB0aGUgcGFyc2VyIHRva2VuIGZvciBhIGdpdmVuIGNoYXJhY3Rlci4gVXNlZnVsIGZvciBoYWNrc1xuICAgIC8vIHRoYXQgd2FudCB0byBpbnNwZWN0IHRoZSBtb2RlIHN0YXRlIChzYXksIGZvciBjb21wbGV0aW9uKS5cbiAgICBnZXRUb2tlbkF0OiBmdW5jdGlvbihwb3MsIHByZWNpc2UpIHtcbiAgICAgIHJldHVybiB0YWtlVG9rZW4odGhpcywgcG9zLCBwcmVjaXNlKTtcbiAgICB9LFxuXG4gICAgZ2V0TGluZVRva2VuczogZnVuY3Rpb24obGluZSwgcHJlY2lzZSkge1xuICAgICAgcmV0dXJuIHRha2VUb2tlbih0aGlzLCBQb3MobGluZSksIHByZWNpc2UsIHRydWUpO1xuICAgIH0sXG5cbiAgICBnZXRUb2tlblR5cGVBdDogZnVuY3Rpb24ocG9zKSB7XG4gICAgICBwb3MgPSBjbGlwUG9zKHRoaXMuZG9jLCBwb3MpO1xuICAgICAgdmFyIHN0eWxlcyA9IGdldExpbmVTdHlsZXModGhpcywgZ2V0TGluZSh0aGlzLmRvYywgcG9zLmxpbmUpKTtcbiAgICAgIHZhciBiZWZvcmUgPSAwLCBhZnRlciA9IChzdHlsZXMubGVuZ3RoIC0gMSkgLyAyLCBjaCA9IHBvcy5jaDtcbiAgICAgIHZhciB0eXBlO1xuICAgICAgaWYgKGNoID09IDApIHR5cGUgPSBzdHlsZXNbMl07XG4gICAgICBlbHNlIGZvciAoOzspIHtcbiAgICAgICAgdmFyIG1pZCA9IChiZWZvcmUgKyBhZnRlcikgPj4gMTtcbiAgICAgICAgaWYgKChtaWQgPyBzdHlsZXNbbWlkICogMiAtIDFdIDogMCkgPj0gY2gpIGFmdGVyID0gbWlkO1xuICAgICAgICBlbHNlIGlmIChzdHlsZXNbbWlkICogMiArIDFdIDwgY2gpIGJlZm9yZSA9IG1pZCArIDE7XG4gICAgICAgIGVsc2UgeyB0eXBlID0gc3R5bGVzW21pZCAqIDIgKyAyXTsgYnJlYWs7IH1cbiAgICAgIH1cbiAgICAgIHZhciBjdXQgPSB0eXBlID8gdHlwZS5pbmRleE9mKFwiY20tb3ZlcmxheSBcIikgOiAtMTtcbiAgICAgIHJldHVybiBjdXQgPCAwID8gdHlwZSA6IGN1dCA9PSAwID8gbnVsbCA6IHR5cGUuc2xpY2UoMCwgY3V0IC0gMSk7XG4gICAgfSxcblxuICAgIGdldE1vZGVBdDogZnVuY3Rpb24ocG9zKSB7XG4gICAgICB2YXIgbW9kZSA9IHRoaXMuZG9jLm1vZGU7XG4gICAgICBpZiAoIW1vZGUuaW5uZXJNb2RlKSByZXR1cm4gbW9kZTtcbiAgICAgIHJldHVybiBDb2RlTWlycm9yLmlubmVyTW9kZShtb2RlLCB0aGlzLmdldFRva2VuQXQocG9zKS5zdGF0ZSkubW9kZTtcbiAgICB9LFxuXG4gICAgZ2V0SGVscGVyOiBmdW5jdGlvbihwb3MsIHR5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEhlbHBlcnMocG9zLCB0eXBlKVswXTtcbiAgICB9LFxuXG4gICAgZ2V0SGVscGVyczogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICB2YXIgZm91bmQgPSBbXTtcbiAgICAgIGlmICghaGVscGVycy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgcmV0dXJuIGZvdW5kO1xuICAgICAgdmFyIGhlbHAgPSBoZWxwZXJzW3R5cGVdLCBtb2RlID0gdGhpcy5nZXRNb2RlQXQocG9zKTtcbiAgICAgIGlmICh0eXBlb2YgbW9kZVt0eXBlXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChoZWxwW21vZGVbdHlwZV1dKSBmb3VuZC5wdXNoKGhlbHBbbW9kZVt0eXBlXV0pO1xuICAgICAgfSBlbHNlIGlmIChtb2RlW3R5cGVdKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZVt0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB2YWwgPSBoZWxwW21vZGVbdHlwZV1baV1dO1xuICAgICAgICAgIGlmICh2YWwpIGZvdW5kLnB1c2godmFsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChtb2RlLmhlbHBlclR5cGUgJiYgaGVscFttb2RlLmhlbHBlclR5cGVdKSB7XG4gICAgICAgIGZvdW5kLnB1c2goaGVscFttb2RlLmhlbHBlclR5cGVdKTtcbiAgICAgIH0gZWxzZSBpZiAoaGVscFttb2RlLm5hbWVdKSB7XG4gICAgICAgIGZvdW5kLnB1c2goaGVscFttb2RlLm5hbWVdKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVscC5fZ2xvYmFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjdXIgPSBoZWxwLl9nbG9iYWxbaV07XG4gICAgICAgIGlmIChjdXIucHJlZChtb2RlLCB0aGlzKSAmJiBpbmRleE9mKGZvdW5kLCBjdXIudmFsKSA9PSAtMSlcbiAgICAgICAgICBmb3VuZC5wdXNoKGN1ci52YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG5cbiAgICBnZXRTdGF0ZUFmdGVyOiBmdW5jdGlvbihsaW5lLCBwcmVjaXNlKSB7XG4gICAgICB2YXIgZG9jID0gdGhpcy5kb2M7XG4gICAgICBsaW5lID0gY2xpcExpbmUoZG9jLCBsaW5lID09IG51bGwgPyBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE6IGxpbmUpO1xuICAgICAgcmV0dXJuIGdldFN0YXRlQmVmb3JlKHRoaXMsIGxpbmUgKyAxLCBwcmVjaXNlKTtcbiAgICB9LFxuXG4gICAgY3Vyc29yQ29vcmRzOiBmdW5jdGlvbihzdGFydCwgbW9kZSkge1xuICAgICAgdmFyIHBvcywgcmFuZ2UgPSB0aGlzLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgaWYgKHN0YXJ0ID09IG51bGwpIHBvcyA9IHJhbmdlLmhlYWQ7XG4gICAgICBlbHNlIGlmICh0eXBlb2Ygc3RhcnQgPT0gXCJvYmplY3RcIikgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgc3RhcnQpO1xuICAgICAgZWxzZSBwb3MgPSBzdGFydCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XG4gICAgICByZXR1cm4gY3Vyc29yQ29vcmRzKHRoaXMsIHBvcywgbW9kZSB8fCBcInBhZ2VcIik7XG4gICAgfSxcblxuICAgIGNoYXJDb29yZHM6IGZ1bmN0aW9uKHBvcywgbW9kZSkge1xuICAgICAgcmV0dXJuIGNoYXJDb29yZHModGhpcywgY2xpcFBvcyh0aGlzLmRvYywgcG9zKSwgbW9kZSB8fCBcInBhZ2VcIik7XG4gICAgfSxcblxuICAgIGNvb3Jkc0NoYXI6IGZ1bmN0aW9uKGNvb3JkcywgbW9kZSkge1xuICAgICAgY29vcmRzID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIGNvb3JkcywgbW9kZSB8fCBcInBhZ2VcIik7XG4gICAgICByZXR1cm4gY29vcmRzQ2hhcih0aGlzLCBjb29yZHMubGVmdCwgY29vcmRzLnRvcCk7XG4gICAgfSxcblxuICAgIGxpbmVBdEhlaWdodDogZnVuY3Rpb24oaGVpZ2h0LCBtb2RlKSB7XG4gICAgICBoZWlnaHQgPSBmcm9tQ29vcmRTeXN0ZW0odGhpcywge3RvcDogaGVpZ2h0LCBsZWZ0OiAwfSwgbW9kZSB8fCBcInBhZ2VcIikudG9wO1xuICAgICAgcmV0dXJuIGxpbmVBdEhlaWdodCh0aGlzLmRvYywgaGVpZ2h0ICsgdGhpcy5kaXNwbGF5LnZpZXdPZmZzZXQpO1xuICAgIH0sXG4gICAgaGVpZ2h0QXRMaW5lOiBmdW5jdGlvbihsaW5lLCBtb2RlKSB7XG4gICAgICB2YXIgZW5kID0gZmFsc2UsIGxpbmVPYmo7XG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICB2YXIgbGFzdCA9IHRoaXMuZG9jLmZpcnN0ICsgdGhpcy5kb2Muc2l6ZSAtIDE7XG4gICAgICAgIGlmIChsaW5lIDwgdGhpcy5kb2MuZmlyc3QpIGxpbmUgPSB0aGlzLmRvYy5maXJzdDtcbiAgICAgICAgZWxzZSBpZiAobGluZSA+IGxhc3QpIHsgbGluZSA9IGxhc3Q7IGVuZCA9IHRydWU7IH1cbiAgICAgICAgbGluZU9iaiA9IGdldExpbmUodGhpcy5kb2MsIGxpbmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGluZU9iaiA9IGxpbmU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKHRoaXMsIGxpbmVPYmosIHt0b3A6IDAsIGxlZnQ6IDB9LCBtb2RlIHx8IFwicGFnZVwiKS50b3AgK1xuICAgICAgICAoZW5kID8gdGhpcy5kb2MuaGVpZ2h0IC0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopIDogMCk7XG4gICAgfSxcblxuICAgIGRlZmF1bHRUZXh0SGVpZ2h0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRleHRIZWlnaHQodGhpcy5kaXNwbGF5KTsgfSxcbiAgICBkZWZhdWx0Q2hhcldpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGNoYXJXaWR0aCh0aGlzLmRpc3BsYXkpOyB9LFxuXG4gICAgc2V0R3V0dGVyTWFya2VyOiBtZXRob2RPcChmdW5jdGlvbihsaW5lLCBndXR0ZXJJRCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMuZG9jLCBsaW5lLCBcImd1dHRlclwiLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBtYXJrZXJzID0gbGluZS5ndXR0ZXJNYXJrZXJzIHx8IChsaW5lLmd1dHRlck1hcmtlcnMgPSB7fSk7XG4gICAgICAgIG1hcmtlcnNbZ3V0dGVySURdID0gdmFsdWU7XG4gICAgICAgIGlmICghdmFsdWUgJiYgaXNFbXB0eShtYXJrZXJzKSkgbGluZS5ndXR0ZXJNYXJrZXJzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIGNsZWFyR3V0dGVyOiBtZXRob2RPcChmdW5jdGlvbihndXR0ZXJJRCkge1xuICAgICAgdmFyIGNtID0gdGhpcywgZG9jID0gY20uZG9jLCBpID0gZG9jLmZpcnN0O1xuICAgICAgZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAobGluZS5ndXR0ZXJNYXJrZXJzICYmIGxpbmUuZ3V0dGVyTWFya2Vyc1tndXR0ZXJJRF0pIHtcbiAgICAgICAgICBsaW5lLmd1dHRlck1hcmtlcnNbZ3V0dGVySURdID0gbnVsbDtcbiAgICAgICAgICByZWdMaW5lQ2hhbmdlKGNtLCBpLCBcImd1dHRlclwiKTtcbiAgICAgICAgICBpZiAoaXNFbXB0eShsaW5lLmd1dHRlck1hcmtlcnMpKSBsaW5lLmd1dHRlck1hcmtlcnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgICsraTtcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgbGluZUluZm86IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGlmICghaXNMaW5lKHRoaXMuZG9jLCBsaW5lKSkgcmV0dXJuIG51bGw7XG4gICAgICAgIHZhciBuID0gbGluZTtcbiAgICAgICAgbGluZSA9IGdldExpbmUodGhpcy5kb2MsIGxpbmUpO1xuICAgICAgICBpZiAoIWxpbmUpIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG4gPSBsaW5lTm8obGluZSk7XG4gICAgICAgIGlmIChuID09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtsaW5lOiBuLCBoYW5kbGU6IGxpbmUsIHRleHQ6IGxpbmUudGV4dCwgZ3V0dGVyTWFya2VyczogbGluZS5ndXR0ZXJNYXJrZXJzLFxuICAgICAgICAgICAgICB0ZXh0Q2xhc3M6IGxpbmUudGV4dENsYXNzLCBiZ0NsYXNzOiBsaW5lLmJnQ2xhc3MsIHdyYXBDbGFzczogbGluZS53cmFwQ2xhc3MsXG4gICAgICAgICAgICAgIHdpZGdldHM6IGxpbmUud2lkZ2V0c307XG4gICAgfSxcblxuICAgIGdldFZpZXdwb3J0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHtmcm9tOiB0aGlzLmRpc3BsYXkudmlld0Zyb20sIHRvOiB0aGlzLmRpc3BsYXkudmlld1RvfTt9LFxuXG4gICAgYWRkV2lkZ2V0OiBmdW5jdGlvbihwb3MsIG5vZGUsIHNjcm9sbCwgdmVydCwgaG9yaXopIHtcbiAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5kaXNwbGF5O1xuICAgICAgcG9zID0gY3Vyc29yQ29vcmRzKHRoaXMsIGNsaXBQb3ModGhpcy5kb2MsIHBvcykpO1xuICAgICAgdmFyIHRvcCA9IHBvcy5ib3R0b20sIGxlZnQgPSBwb3MubGVmdDtcbiAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIiwgXCJ0cnVlXCIpO1xuICAgICAgdGhpcy5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUobm9kZSk7XG4gICAgICBkaXNwbGF5LnNpemVyLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgaWYgKHZlcnQgPT0gXCJvdmVyXCIpIHtcbiAgICAgICAgdG9wID0gcG9zLnRvcDtcbiAgICAgIH0gZWxzZSBpZiAodmVydCA9PSBcImFib3ZlXCIgfHwgdmVydCA9PSBcIm5lYXJcIikge1xuICAgICAgICB2YXIgdnNwYWNlID0gTWF0aC5tYXgoZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCwgdGhpcy5kb2MuaGVpZ2h0KSxcbiAgICAgICAgaHNwYWNlID0gTWF0aC5tYXgoZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCwgZGlzcGxheS5saW5lU3BhY2UuY2xpZW50V2lkdGgpO1xuICAgICAgICAvLyBEZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGFib3ZlIChpZiBzcGVjaWZpZWQgYW5kIHBvc3NpYmxlKTsgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gcG9zaXRpb25pbmcgYmVsb3dcbiAgICAgICAgaWYgKCh2ZXJ0ID09ICdhYm92ZScgfHwgcG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0ID4gdnNwYWNlKSAmJiBwb3MudG9wID4gbm9kZS5vZmZzZXRIZWlnaHQpXG4gICAgICAgICAgdG9wID0gcG9zLnRvcCAtIG5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBlbHNlIGlmIChwb3MuYm90dG9tICsgbm9kZS5vZmZzZXRIZWlnaHQgPD0gdnNwYWNlKVxuICAgICAgICAgIHRvcCA9IHBvcy5ib3R0b207XG4gICAgICAgIGlmIChsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCA+IGhzcGFjZSlcbiAgICAgICAgICBsZWZ0ID0gaHNwYWNlIC0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICAgIH1cbiAgICAgIG5vZGUuc3R5bGUudG9wID0gdG9wICsgXCJweFwiO1xuICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0gbm9kZS5zdHlsZS5yaWdodCA9IFwiXCI7XG4gICAgICBpZiAoaG9yaXogPT0gXCJyaWdodFwiKSB7XG4gICAgICAgIGxlZnQgPSBkaXNwbGF5LnNpemVyLmNsaWVudFdpZHRoIC0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgbm9kZS5zdHlsZS5yaWdodCA9IFwiMHB4XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaG9yaXogPT0gXCJsZWZ0XCIpIGxlZnQgPSAwO1xuICAgICAgICBlbHNlIGlmIChob3JpeiA9PSBcIm1pZGRsZVwiKSBsZWZ0ID0gKGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoKSAvIDI7XG4gICAgICAgIG5vZGUuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICB9XG4gICAgICBpZiAoc2Nyb2xsKVxuICAgICAgICBzY3JvbGxJbnRvVmlldyh0aGlzLCBsZWZ0LCB0b3AsIGxlZnQgKyBub2RlLm9mZnNldFdpZHRoLCB0b3AgKyBub2RlLm9mZnNldEhlaWdodCk7XG4gICAgfSxcblxuICAgIHRyaWdnZXJPbktleURvd246IG1ldGhvZE9wKG9uS2V5RG93biksXG4gICAgdHJpZ2dlck9uS2V5UHJlc3M6IG1ldGhvZE9wKG9uS2V5UHJlc3MpLFxuICAgIHRyaWdnZXJPbktleVVwOiBvbktleVVwLFxuXG4gICAgZXhlY0NvbW1hbmQ6IGZ1bmN0aW9uKGNtZCkge1xuICAgICAgaWYgKGNvbW1hbmRzLmhhc093blByb3BlcnR5KGNtZCkpXG4gICAgICAgIHJldHVybiBjb21tYW5kc1tjbWRdLmNhbGwobnVsbCwgdGhpcyk7XG4gICAgfSxcblxuICAgIHRyaWdnZXJFbGVjdHJpYzogbWV0aG9kT3AoZnVuY3Rpb24odGV4dCkgeyB0cmlnZ2VyRWxlY3RyaWModGhpcywgdGV4dCk7IH0pLFxuXG4gICAgZmluZFBvc0g6IGZ1bmN0aW9uKGZyb20sIGFtb3VudCwgdW5pdCwgdmlzdWFsbHkpIHtcbiAgICAgIHZhciBkaXIgPSAxO1xuICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBjbGlwUG9zKHRoaXMuZG9jLCBmcm9tKTsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgIGN1ciA9IGZpbmRQb3NIKHRoaXMuZG9jLCBjdXIsIGRpciwgdW5pdCwgdmlzdWFsbHkpO1xuICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cjtcbiAgICB9LFxuXG4gICAgbW92ZUg6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwgdW5pdCkge1xuICAgICAgdmFyIGNtID0gdGhpcztcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICBpZiAoY20uZGlzcGxheS5zaGlmdCB8fCBjbS5kb2MuZXh0ZW5kIHx8IHJhbmdlLmVtcHR5KCkpXG4gICAgICAgICAgcmV0dXJuIGZpbmRQb3NIKGNtLmRvYywgcmFuZ2UuaGVhZCwgZGlyLCB1bml0LCBjbS5vcHRpb25zLnJ0bE1vdmVWaXN1YWxseSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XG4gICAgICB9LCBzZWxfbW92ZSk7XG4gICAgfSksXG5cbiAgICBkZWxldGVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgIHZhciBzZWwgPSB0aGlzLmRvYy5zZWwsIGRvYyA9IHRoaXMuZG9jO1xuICAgICAgaWYgKHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpKVxuICAgICAgICBkb2MucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcIitkZWxldGVcIik7XG4gICAgICBlbHNlXG4gICAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24odGhpcywgZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgICB2YXIgb3RoZXIgPSBmaW5kUG9zSChkb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgZmFsc2UpO1xuICAgICAgICAgIHJldHVybiBkaXIgPCAwID8ge2Zyb206IG90aGVyLCB0bzogcmFuZ2UuaGVhZH0gOiB7ZnJvbTogcmFuZ2UuaGVhZCwgdG86IG90aGVyfTtcbiAgICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBmaW5kUG9zVjogZnVuY3Rpb24oZnJvbSwgYW1vdW50LCB1bml0LCBnb2FsQ29sdW1uKSB7XG4gICAgICB2YXIgZGlyID0gMSwgeCA9IGdvYWxDb2x1bW47XG4gICAgICBpZiAoYW1vdW50IDwgMCkgeyBkaXIgPSAtMTsgYW1vdW50ID0gLWFtb3VudDsgfVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IGNsaXBQb3ModGhpcy5kb2MsIGZyb20pOyBpIDwgYW1vdW50OyArK2kpIHtcbiAgICAgICAgdmFyIGNvb3JkcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjdXIsIFwiZGl2XCIpO1xuICAgICAgICBpZiAoeCA9PSBudWxsKSB4ID0gY29vcmRzLmxlZnQ7XG4gICAgICAgIGVsc2UgY29vcmRzLmxlZnQgPSB4O1xuICAgICAgICBjdXIgPSBmaW5kUG9zVih0aGlzLCBjb29yZHMsIGRpciwgdW5pdCk7XG4gICAgICAgIGlmIChjdXIuaGl0U2lkZSkgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VyO1xuICAgIH0sXG5cbiAgICBtb3ZlVjogbWV0aG9kT3AoZnVuY3Rpb24oZGlyLCB1bml0KSB7XG4gICAgICB2YXIgY20gPSB0aGlzLCBkb2MgPSB0aGlzLmRvYywgZ29hbHMgPSBbXTtcbiAgICAgIHZhciBjb2xsYXBzZSA9ICFjbS5kaXNwbGF5LnNoaWZ0ICYmICFkb2MuZXh0ZW5kICYmIGRvYy5zZWwuc29tZXRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgIGRvYy5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKGNvbGxhcHNlKVxuICAgICAgICAgIHJldHVybiBkaXIgPCAwID8gcmFuZ2UuZnJvbSgpIDogcmFuZ2UudG8oKTtcbiAgICAgICAgdmFyIGhlYWRQb3MgPSBjdXJzb3JDb29yZHMoY20sIHJhbmdlLmhlYWQsIFwiZGl2XCIpO1xuICAgICAgICBpZiAocmFuZ2UuZ29hbENvbHVtbiAhPSBudWxsKSBoZWFkUG9zLmxlZnQgPSByYW5nZS5nb2FsQ29sdW1uO1xuICAgICAgICBnb2Fscy5wdXNoKGhlYWRQb3MubGVmdCk7XG4gICAgICAgIHZhciBwb3MgPSBmaW5kUG9zVihjbSwgaGVhZFBvcywgZGlyLCB1bml0KTtcbiAgICAgICAgaWYgKHVuaXQgPT0gXCJwYWdlXCIgJiYgcmFuZ2UgPT0gZG9jLnNlbC5wcmltYXJ5KCkpXG4gICAgICAgICAgYWRkVG9TY3JvbGxQb3MoY20sIG51bGwsIGNoYXJDb29yZHMoY20sIHBvcywgXCJkaXZcIikudG9wIC0gaGVhZFBvcy50b3ApO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgICAgaWYgKGdvYWxzLmxlbmd0aCkgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgZG9jLnNlbC5yYW5nZXNbaV0uZ29hbENvbHVtbiA9IGdvYWxzW2ldO1xuICAgIH0pLFxuXG4gICAgLy8gRmluZCB0aGUgd29yZCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gKGFzIHJldHVybmVkIGJ5IGNvb3Jkc0NoYXIpLlxuICAgIGZpbmRXb3JkQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jLCBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0O1xuICAgICAgdmFyIHN0YXJ0ID0gcG9zLmNoLCBlbmQgPSBwb3MuY2g7XG4gICAgICBpZiAobGluZSkge1xuICAgICAgICB2YXIgaGVscGVyID0gdGhpcy5nZXRIZWxwZXIocG9zLCBcIndvcmRDaGFyc1wiKTtcbiAgICAgICAgaWYgKChwb3MueFJlbCA8IDAgfHwgZW5kID09IGxpbmUubGVuZ3RoKSAmJiBzdGFydCkgLS1zdGFydDsgZWxzZSArK2VuZDtcbiAgICAgICAgdmFyIHN0YXJ0Q2hhciA9IGxpbmUuY2hhckF0KHN0YXJ0KTtcbiAgICAgICAgdmFyIGNoZWNrID0gaXNXb3JkQ2hhcihzdGFydENoYXIsIGhlbHBlcilcbiAgICAgICAgICA/IGZ1bmN0aW9uKGNoKSB7IHJldHVybiBpc1dvcmRDaGFyKGNoLCBoZWxwZXIpOyB9XG4gICAgICAgICAgOiAvXFxzLy50ZXN0KHN0YXJ0Q2hhcikgPyBmdW5jdGlvbihjaCkge3JldHVybiAvXFxzLy50ZXN0KGNoKTt9XG4gICAgICAgICAgOiBmdW5jdGlvbihjaCkge3JldHVybiAhL1xccy8udGVzdChjaCkgJiYgIWlzV29yZENoYXIoY2gpO307XG4gICAgICAgIHdoaWxlIChzdGFydCA+IDAgJiYgY2hlY2sobGluZS5jaGFyQXQoc3RhcnQgLSAxKSkpIC0tc3RhcnQ7XG4gICAgICAgIHdoaWxlIChlbmQgPCBsaW5lLmxlbmd0aCAmJiBjaGVjayhsaW5lLmNoYXJBdChlbmQpKSkgKytlbmQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgc3RhcnQpLCBQb3MocG9zLmxpbmUsIGVuZCkpO1xuICAgIH0sXG5cbiAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSA9PSB0aGlzLnN0YXRlLm92ZXJ3cml0ZSkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuc3RhdGUub3ZlcndyaXRlID0gIXRoaXMuc3RhdGUub3ZlcndyaXRlKVxuICAgICAgICBhZGRDbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpO1xuICAgICAgZWxzZVxuICAgICAgICBybUNsYXNzKHRoaXMuZGlzcGxheS5jdXJzb3JEaXYsIFwiQ29kZU1pcnJvci1vdmVyd3JpdGVcIik7XG5cbiAgICAgIHNpZ25hbCh0aGlzLCBcIm92ZXJ3cml0ZVRvZ2dsZVwiLCB0aGlzLCB0aGlzLnN0YXRlLm92ZXJ3cml0ZSk7XG4gICAgfSxcbiAgICBoYXNGb2N1czogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKSA9PSBhY3RpdmVFbHQoKTsgfSxcbiAgICBpc1JlYWRPbmx5OiBmdW5jdGlvbigpIHsgcmV0dXJuICEhKHRoaXMub3B0aW9ucy5yZWFkT25seSB8fCB0aGlzLmRvYy5jYW50RWRpdCk7IH0sXG5cbiAgICBzY3JvbGxUbzogbWV0aG9kT3AoZnVuY3Rpb24oeCwgeSkge1xuICAgICAgaWYgKHggIT0gbnVsbCB8fCB5ICE9IG51bGwpIHJlc29sdmVTY3JvbGxUb1Bvcyh0aGlzKTtcbiAgICAgIGlmICh4ICE9IG51bGwpIHRoaXMuY3VyT3Auc2Nyb2xsTGVmdCA9IHg7XG4gICAgICBpZiAoeSAhPSBudWxsKSB0aGlzLmN1ck9wLnNjcm9sbFRvcCA9IHk7XG4gICAgfSksXG4gICAgZ2V0U2Nyb2xsSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2Nyb2xsZXIgPSB0aGlzLmRpc3BsYXkuc2Nyb2xsZXI7XG4gICAgICByZXR1cm4ge2xlZnQ6IHNjcm9sbGVyLnNjcm9sbExlZnQsIHRvcDogc2Nyb2xsZXIuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIHNjcm9sbEdhcCh0aGlzKSAtIHRoaXMuZGlzcGxheS5iYXJIZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBzY3JvbGxlci5zY3JvbGxXaWR0aCAtIHNjcm9sbEdhcCh0aGlzKSAtIHRoaXMuZGlzcGxheS5iYXJXaWR0aCxcbiAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBkaXNwbGF5SGVpZ2h0KHRoaXMpLCBjbGllbnRXaWR0aDogZGlzcGxheVdpZHRoKHRoaXMpfTtcbiAgICB9LFxuXG4gICAgc2Nyb2xsSW50b1ZpZXc6IG1ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlLCBtYXJnaW4pIHtcbiAgICAgIGlmIChyYW5nZSA9PSBudWxsKSB7XG4gICAgICAgIHJhbmdlID0ge2Zyb206IHRoaXMuZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCwgdG86IG51bGx9O1xuICAgICAgICBpZiAobWFyZ2luID09IG51bGwpIG1hcmdpbiA9IHRoaXMub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW47XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByYW5nZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJhbmdlID0ge2Zyb206IFBvcyhyYW5nZSwgMCksIHRvOiBudWxsfTtcbiAgICAgIH0gZWxzZSBpZiAocmFuZ2UuZnJvbSA9PSBudWxsKSB7XG4gICAgICAgIHJhbmdlID0ge2Zyb206IHJhbmdlLCB0bzogbnVsbH07XG4gICAgICB9XG4gICAgICBpZiAoIXJhbmdlLnRvKSByYW5nZS50byA9IHJhbmdlLmZyb207XG4gICAgICByYW5nZS5tYXJnaW4gPSBtYXJnaW4gfHwgMDtcblxuICAgICAgaWYgKHJhbmdlLmZyb20ubGluZSAhPSBudWxsKSB7XG4gICAgICAgIHJlc29sdmVTY3JvbGxUb1Bvcyh0aGlzKTtcbiAgICAgICAgdGhpcy5jdXJPcC5zY3JvbGxUb1BvcyA9IHJhbmdlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3ModGhpcywgTWF0aC5taW4ocmFuZ2UuZnJvbS5sZWZ0LCByYW5nZS50by5sZWZ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4ocmFuZ2UuZnJvbS50b3AsIHJhbmdlLnRvLnRvcCkgLSByYW5nZS5tYXJnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHJhbmdlLmZyb20ucmlnaHQsIHJhbmdlLnRvLnJpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgocmFuZ2UuZnJvbS5ib3R0b20sIHJhbmdlLnRvLmJvdHRvbSkgKyByYW5nZS5tYXJnaW4pO1xuICAgICAgICB0aGlzLnNjcm9sbFRvKHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApO1xuICAgICAgfVxuICAgIH0pLFxuXG4gICAgc2V0U2l6ZTogbWV0aG9kT3AoZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuICAgICAgdmFyIGNtID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGludGVycHJldCh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJudW1iZXJcIiB8fCAvXlxcZCskLy50ZXN0KFN0cmluZyh2YWwpKSA/IHZhbCArIFwicHhcIiA6IHZhbDtcbiAgICAgIH1cbiAgICAgIGlmICh3aWR0aCAhPSBudWxsKSBjbS5kaXNwbGF5LndyYXBwZXIuc3R5bGUud2lkdGggPSBpbnRlcnByZXQod2lkdGgpO1xuICAgICAgaWYgKGhlaWdodCAhPSBudWxsKSBjbS5kaXNwbGF5LndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaW50ZXJwcmV0KGhlaWdodCk7XG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUodGhpcyk7XG4gICAgICB2YXIgbGluZU5vID0gY20uZGlzcGxheS52aWV3RnJvbTtcbiAgICAgIGNtLmRvYy5pdGVyKGxpbmVObywgY20uZGlzcGxheS52aWV3VG8sIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUud2lkZ2V0cykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLndpZGdldHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgaWYgKGxpbmUud2lkZ2V0c1tpXS5ub0hTY3JvbGwpIHsgcmVnTGluZUNoYW5nZShjbSwgbGluZU5vLCBcIndpZGdldFwiKTsgYnJlYWs7IH1cbiAgICAgICAgKytsaW5lTm87XG4gICAgICB9KTtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIHNpZ25hbChjbSwgXCJyZWZyZXNoXCIsIHRoaXMpO1xuICAgIH0pLFxuXG4gICAgb3BlcmF0aW9uOiBmdW5jdGlvbihmKXtyZXR1cm4gcnVuSW5PcCh0aGlzLCBmKTt9LFxuXG4gICAgcmVmcmVzaDogbWV0aG9kT3AoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gdGhpcy5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ7XG4gICAgICByZWdDaGFuZ2UodGhpcyk7XG4gICAgICB0aGlzLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIGNsZWFyQ2FjaGVzKHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLmRvYy5zY3JvbGxMZWZ0LCB0aGlzLmRvYy5zY3JvbGxUb3ApO1xuICAgICAgdXBkYXRlR3V0dGVyU3BhY2UodGhpcyk7XG4gICAgICBpZiAob2xkSGVpZ2h0ID09IG51bGwgfHwgTWF0aC5hYnMob2xkSGVpZ2h0IC0gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpKSA+IC41KVxuICAgICAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKHRoaXMpO1xuICAgICAgc2lnbmFsKHRoaXMsIFwicmVmcmVzaFwiLCB0aGlzKTtcbiAgICB9KSxcblxuICAgIHN3YXBEb2M6IG1ldGhvZE9wKGZ1bmN0aW9uKGRvYykge1xuICAgICAgdmFyIG9sZCA9IHRoaXMuZG9jO1xuICAgICAgb2xkLmNtID0gbnVsbDtcbiAgICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuICAgICAgY2xlYXJDYWNoZXModGhpcyk7XG4gICAgICB0aGlzLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgIHRoaXMuc2Nyb2xsVG8oZG9jLnNjcm9sbExlZnQsIGRvYy5zY3JvbGxUb3ApO1xuICAgICAgdGhpcy5jdXJPcC5mb3JjZVNjcm9sbCA9IHRydWU7XG4gICAgICBzaWduYWxMYXRlcih0aGlzLCBcInN3YXBEb2NcIiwgdGhpcywgb2xkKTtcbiAgICAgIHJldHVybiBvbGQ7XG4gICAgfSksXG5cbiAgICBnZXRJbnB1dEZpZWxkOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKTt9LFxuICAgIGdldFdyYXBwZXJFbGVtZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkud3JhcHBlcjt9LFxuICAgIGdldFNjcm9sbGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LnNjcm9sbGVyO30sXG4gICAgZ2V0R3V0dGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5Lmd1dHRlcnM7fVxuICB9O1xuICBldmVudE1peGluKENvZGVNaXJyb3IpO1xuXG4gIC8vIE9QVElPTiBERUZBVUxUU1xuXG4gIC8vIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgdmFyIGRlZmF1bHRzID0gQ29kZU1pcnJvci5kZWZhdWx0cyA9IHt9O1xuICAvLyBGdW5jdGlvbnMgdG8gcnVuIHdoZW4gb3B0aW9ucyBhcmUgY2hhbmdlZC5cbiAgdmFyIG9wdGlvbkhhbmRsZXJzID0gQ29kZU1pcnJvci5vcHRpb25IYW5kbGVycyA9IHt9O1xuXG4gIGZ1bmN0aW9uIG9wdGlvbihuYW1lLCBkZWZsdCwgaGFuZGxlLCBub3RPbkluaXQpIHtcbiAgICBDb2RlTWlycm9yLmRlZmF1bHRzW25hbWVdID0gZGVmbHQ7XG4gICAgaWYgKGhhbmRsZSkgb3B0aW9uSGFuZGxlcnNbbmFtZV0gPVxuICAgICAgbm90T25Jbml0ID8gZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7aWYgKG9sZCAhPSBJbml0KSBoYW5kbGUoY20sIHZhbCwgb2xkKTt9IDogaGFuZGxlO1xuICB9XG5cbiAgLy8gUGFzc2VkIHRvIG9wdGlvbiBoYW5kbGVycyB3aGVuIHRoZXJlIGlzIG5vIG9sZCB2YWx1ZS5cbiAgdmFyIEluaXQgPSBDb2RlTWlycm9yLkluaXQgPSB7dG9TdHJpbmc6IGZ1bmN0aW9uKCl7cmV0dXJuIFwiQ29kZU1pcnJvci5Jbml0XCI7fX07XG5cbiAgLy8gVGhlc2UgdHdvIGFyZSwgb24gaW5pdCwgY2FsbGVkIGZyb20gdGhlIGNvbnN0cnVjdG9yIGJlY2F1c2UgdGhleVxuICAvLyBoYXZlIHRvIGJlIGluaXRpYWxpemVkIGJlZm9yZSB0aGUgZWRpdG9yIGNhbiBzdGFydCBhdCBhbGwuXG4gIG9wdGlvbihcInZhbHVlXCIsIFwiXCIsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBjbS5zZXRWYWx1ZSh2YWwpO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwibW9kZVwiLCBudWxsLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgY20uZG9jLm1vZGVPcHRpb24gPSB2YWw7XG4gICAgbG9hZE1vZGUoY20pO1xuICB9LCB0cnVlKTtcblxuICBvcHRpb24oXCJpbmRlbnRVbml0XCIsIDIsIGxvYWRNb2RlLCB0cnVlKTtcbiAgb3B0aW9uKFwiaW5kZW50V2l0aFRhYnNcIiwgZmFsc2UpO1xuICBvcHRpb24oXCJzbWFydEluZGVudFwiLCB0cnVlKTtcbiAgb3B0aW9uKFwidGFiU2l6ZVwiLCA0LCBmdW5jdGlvbihjbSkge1xuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcbiAgICBjbGVhckNhY2hlcyhjbSk7XG4gICAgcmVnQ2hhbmdlKGNtKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImxpbmVTZXBhcmF0b3JcIiwgbnVsbCwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRvYy5saW5lU2VwID0gdmFsO1xuICAgIGlmICghdmFsKSByZXR1cm47XG4gICAgdmFyIG5ld0JyZWFrcyA9IFtdLCBsaW5lTm8gPSBjbS5kb2MuZmlyc3Q7XG4gICAgY20uZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgZm9yICh2YXIgcG9zID0gMDs7KSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGxpbmUudGV4dC5pbmRleE9mKHZhbCwgcG9zKTtcbiAgICAgICAgaWYgKGZvdW5kID09IC0xKSBicmVhaztcbiAgICAgICAgcG9zID0gZm91bmQgKyB2YWwubGVuZ3RoO1xuICAgICAgICBuZXdCcmVha3MucHVzaChQb3MobGluZU5vLCBmb3VuZCkpO1xuICAgICAgfVxuICAgICAgbGluZU5vKys7XG4gICAgfSk7XG4gICAgZm9yICh2YXIgaSA9IG5ld0JyZWFrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIHZhbCwgbmV3QnJlYWtzW2ldLCBQb3MobmV3QnJlYWtzW2ldLmxpbmUsIG5ld0JyZWFrc1tpXS5jaCArIHZhbC5sZW5ndGgpKVxuICB9KTtcbiAgb3B0aW9uKFwic3BlY2lhbENoYXJzXCIsIC9bXFx0XFx1MDAwMC1cXHUwMDE5XFx1MDBhZFxcdTIwMGItXFx1MjAwZlxcdTIwMjhcXHUyMDI5XFx1ZmVmZl0vZywgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7XG4gICAgY20uc3RhdGUuc3BlY2lhbENoYXJzID0gbmV3IFJlZ0V4cCh2YWwuc291cmNlICsgKHZhbC50ZXN0KFwiXFx0XCIpID8gXCJcIiA6IFwifFxcdFwiKSwgXCJnXCIpO1xuICAgIGlmIChvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSBjbS5yZWZyZXNoKCk7XG4gIH0pO1xuICBvcHRpb24oXCJzcGVjaWFsQ2hhclBsYWNlaG9sZGVyXCIsIGRlZmF1bHRTcGVjaWFsQ2hhclBsYWNlaG9sZGVyLCBmdW5jdGlvbihjbSkge2NtLnJlZnJlc2goKTt9LCB0cnVlKTtcbiAgb3B0aW9uKFwiZWxlY3RyaWNDaGFyc1wiLCB0cnVlKTtcbiAgb3B0aW9uKFwiaW5wdXRTdHlsZVwiLCBtb2JpbGUgPyBcImNvbnRlbnRlZGl0YWJsZVwiIDogXCJ0ZXh0YXJlYVwiLCBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnB1dFN0eWxlIGNhbiBub3QgKHlldCkgYmUgY2hhbmdlZCBpbiBhIHJ1bm5pbmcgZWRpdG9yXCIpOyAvLyBGSVhNRVxuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwicnRsTW92ZVZpc3VhbGx5XCIsICF3aW5kb3dzKTtcbiAgb3B0aW9uKFwid2hvbGVMaW5lVXBkYXRlQmVmb3JlXCIsIHRydWUpO1xuXG4gIG9wdGlvbihcInRoZW1lXCIsIFwiZGVmYXVsdFwiLCBmdW5jdGlvbihjbSkge1xuICAgIHRoZW1lQ2hhbmdlZChjbSk7XG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwia2V5TWFwXCIsIFwiZGVmYXVsdFwiLCBmdW5jdGlvbihjbSwgdmFsLCBvbGQpIHtcbiAgICB2YXIgbmV4dCA9IGdldEtleU1hcCh2YWwpO1xuICAgIHZhciBwcmV2ID0gb2xkICE9IENvZGVNaXJyb3IuSW5pdCAmJiBnZXRLZXlNYXAob2xkKTtcbiAgICBpZiAocHJldiAmJiBwcmV2LmRldGFjaCkgcHJldi5kZXRhY2goY20sIG5leHQpO1xuICAgIGlmIChuZXh0LmF0dGFjaCkgbmV4dC5hdHRhY2goY20sIHByZXYgfHwgbnVsbCk7XG4gIH0pO1xuICBvcHRpb24oXCJleHRyYUtleXNcIiwgbnVsbCk7XG5cbiAgb3B0aW9uKFwibGluZVdyYXBwaW5nXCIsIGZhbHNlLCB3cmFwcGluZ0NoYW5nZWQsIHRydWUpO1xuICBvcHRpb24oXCJndXR0ZXJzXCIsIFtdLCBmdW5jdGlvbihjbSkge1xuICAgIHNldEd1dHRlcnNGb3JMaW5lTnVtYmVycyhjbS5vcHRpb25zKTtcbiAgICBndXR0ZXJzQ2hhbmdlZChjbSk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJmaXhlZEd1dHRlclwiLCB0cnVlLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgY20uZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmxlZnQgPSB2YWwgPyBjb21wZW5zYXRlRm9ySFNjcm9sbChjbS5kaXNwbGF5KSArIFwicHhcIiA6IFwiMFwiO1xuICAgIGNtLnJlZnJlc2goKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyXCIsIGZhbHNlLCBmdW5jdGlvbihjbSkge3VwZGF0ZVNjcm9sbGJhcnMoY20pO30sIHRydWUpO1xuICBvcHRpb24oXCJzY3JvbGxiYXJTdHlsZVwiLCBcIm5hdGl2ZVwiLCBmdW5jdGlvbihjbSkge1xuICAgIGluaXRTY3JvbGxiYXJzKGNtKTtcbiAgICB1cGRhdGVTY3JvbGxiYXJzKGNtKTtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGNtLmRvYy5zY3JvbGxUb3ApO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KGNtLmRvYy5zY3JvbGxMZWZ0KTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImxpbmVOdW1iZXJzXCIsIGZhbHNlLCBmdW5jdGlvbihjbSkge1xuICAgIHNldEd1dHRlcnNGb3JMaW5lTnVtYmVycyhjbS5vcHRpb25zKTtcbiAgICBndXR0ZXJzQ2hhbmdlZChjbSk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJmaXJzdExpbmVOdW1iZXJcIiwgMSwgZ3V0dGVyc0NoYW5nZWQsIHRydWUpO1xuICBvcHRpb24oXCJsaW5lTnVtYmVyRm9ybWF0dGVyXCIsIGZ1bmN0aW9uKGludGVnZXIpIHtyZXR1cm4gaW50ZWdlcjt9LCBndXR0ZXJzQ2hhbmdlZCwgdHJ1ZSk7XG4gIG9wdGlvbihcInNob3dDdXJzb3JXaGVuU2VsZWN0aW5nXCIsIGZhbHNlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xuXG4gIG9wdGlvbihcInJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudVwiLCB0cnVlKTtcbiAgb3B0aW9uKFwibGluZVdpc2VDb3B5Q3V0XCIsIHRydWUpO1xuXG4gIG9wdGlvbihcInJlYWRPbmx5XCIsIGZhbHNlLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgaWYgKHZhbCA9PSBcIm5vY3Vyc29yXCIpIHtcbiAgICAgIG9uQmx1cihjbSk7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LmJsdXIoKTtcbiAgICAgIGNtLmRpc3BsYXkuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbS5kaXNwbGF5LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGNtLmRpc3BsYXkuaW5wdXQucmVhZE9ubHlDaGFuZ2VkKHZhbClcbiAgfSk7XG4gIG9wdGlvbihcImRpc2FibGVJbnB1dFwiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCkge2lmICghdmFsKSBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7fSwgdHJ1ZSk7XG4gIG9wdGlvbihcImRyYWdEcm9wXCIsIHRydWUsIGRyYWdEcm9wQ2hhbmdlZCk7XG4gIG9wdGlvbihcImFsbG93RHJvcEZpbGVUeXBlc1wiLCBudWxsKTtcblxuICBvcHRpb24oXCJjdXJzb3JCbGlua1JhdGVcIiwgNTMwKTtcbiAgb3B0aW9uKFwiY3Vyc29yU2Nyb2xsTWFyZ2luXCIsIDApO1xuICBvcHRpb24oXCJjdXJzb3JIZWlnaHRcIiwgMSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcbiAgb3B0aW9uKFwic2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZVwiLCB0cnVlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xuICBvcHRpb24oXCJ3b3JrVGltZVwiLCAxMDApO1xuICBvcHRpb24oXCJ3b3JrRGVsYXlcIiwgMTAwKTtcbiAgb3B0aW9uKFwiZmxhdHRlblNwYW5zXCIsIHRydWUsIHJlc2V0TW9kZVN0YXRlLCB0cnVlKTtcbiAgb3B0aW9uKFwiYWRkTW9kZUNsYXNzXCIsIGZhbHNlLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gIG9wdGlvbihcInBvbGxJbnRlcnZhbFwiLCAxMDApO1xuICBvcHRpb24oXCJ1bmRvRGVwdGhcIiwgMjAwLCBmdW5jdGlvbihjbSwgdmFsKXtjbS5kb2MuaGlzdG9yeS51bmRvRGVwdGggPSB2YWw7fSk7XG4gIG9wdGlvbihcImhpc3RvcnlFdmVudERlbGF5XCIsIDEyNTApO1xuICBvcHRpb24oXCJ2aWV3cG9ydE1hcmdpblwiLCAxMCwgZnVuY3Rpb24oY20pe2NtLnJlZnJlc2goKTt9LCB0cnVlKTtcbiAgb3B0aW9uKFwibWF4SGlnaGxpZ2h0TGVuZ3RoXCIsIDEwMDAwLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gIG9wdGlvbihcIm1vdmVJbnB1dFdpdGhDdXJzb3JcIiwgdHJ1ZSwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGlmICghdmFsKSBjbS5kaXNwbGF5LmlucHV0LnJlc2V0UG9zaXRpb24oKTtcbiAgfSk7XG5cbiAgb3B0aW9uKFwidGFiaW5kZXhcIiwgbnVsbCwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKS50YWJJbmRleCA9IHZhbCB8fCBcIlwiO1xuICB9KTtcbiAgb3B0aW9uKFwiYXV0b2ZvY3VzXCIsIG51bGwpO1xuXG4gIC8vIE1PREUgREVGSU5JVElPTiBBTkQgUVVFUllJTkdcblxuICAvLyBLbm93biBtb2RlcywgYnkgbmFtZSBhbmQgYnkgTUlNRVxuICB2YXIgbW9kZXMgPSBDb2RlTWlycm9yLm1vZGVzID0ge30sIG1pbWVNb2RlcyA9IENvZGVNaXJyb3IubWltZU1vZGVzID0ge307XG5cbiAgLy8gRXh0cmEgYXJndW1lbnRzIGFyZSBzdG9yZWQgYXMgdGhlIG1vZGUncyBkZXBlbmRlbmNpZXMsIHdoaWNoIGlzXG4gIC8vIHVzZWQgYnkgKGxlZ2FjeSkgbWVjaGFuaXNtcyBsaWtlIGxvYWRtb2RlLmpzIHRvIGF1dG9tYXRpY2FsbHlcbiAgLy8gbG9hZCBhIG1vZGUuIChQcmVmZXJyZWQgbWVjaGFuaXNtIGlzIHRoZSByZXF1aXJlL2RlZmluZSBjYWxscy4pXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZSA9IGZ1bmN0aW9uKG5hbWUsIG1vZGUpIHtcbiAgICBpZiAoIUNvZGVNaXJyb3IuZGVmYXVsdHMubW9kZSAmJiBuYW1lICE9IFwibnVsbFwiKSBDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgPSBuYW1lO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMilcbiAgICAgIG1vZGUuZGVwZW5kZW5jaWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICBtb2Rlc1tuYW1lXSA9IG1vZGU7XG4gIH07XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FID0gZnVuY3Rpb24obWltZSwgc3BlYykge1xuICAgIG1pbWVNb2Rlc1ttaW1lXSA9IHNwZWM7XG4gIH07XG5cbiAgLy8gR2l2ZW4gYSBNSU1FIHR5cGUsIGEge25hbWUsIC4uLm9wdGlvbnN9IGNvbmZpZyBvYmplY3QsIG9yIGEgbmFtZVxuICAvLyBzdHJpbmcsIHJldHVybiBhIG1vZGUgY29uZmlnIG9iamVjdC5cbiAgQ29kZU1pcnJvci5yZXNvbHZlTW9kZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICBpZiAodHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYykpIHtcbiAgICAgIHNwZWMgPSBtaW1lTW9kZXNbc3BlY107XG4gICAgfSBlbHNlIGlmIChzcGVjICYmIHR5cGVvZiBzcGVjLm5hbWUgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYy5uYW1lKSkge1xuICAgICAgdmFyIGZvdW5kID0gbWltZU1vZGVzW3NwZWMubmFtZV07XG4gICAgICBpZiAodHlwZW9mIGZvdW5kID09IFwic3RyaW5nXCIpIGZvdW5kID0ge25hbWU6IGZvdW5kfTtcbiAgICAgIHNwZWMgPSBjcmVhdGVPYmooZm91bmQsIHNwZWMpO1xuICAgICAgc3BlYy5uYW1lID0gZm91bmQubmFtZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIgJiYgL15bXFx3XFwtXStcXC9bXFx3XFwtXStcXCt4bWwkLy50ZXN0KHNwZWMpKSB7XG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShcImFwcGxpY2F0aW9uL3htbFwiKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIpIHJldHVybiB7bmFtZTogc3BlY307XG4gICAgZWxzZSByZXR1cm4gc3BlYyB8fCB7bmFtZTogXCJudWxsXCJ9O1xuICB9O1xuXG4gIC8vIEdpdmVuIGEgbW9kZSBzcGVjIChhbnl0aGluZyB0aGF0IHJlc29sdmVNb2RlIGFjY2VwdHMpLCBmaW5kIGFuZFxuICAvLyBpbml0aWFsaXplIGFuIGFjdHVhbCBtb2RlIG9iamVjdC5cbiAgQ29kZU1pcnJvci5nZXRNb2RlID0gZnVuY3Rpb24ob3B0aW9ucywgc3BlYykge1xuICAgIHZhciBzcGVjID0gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShzcGVjKTtcbiAgICB2YXIgbWZhY3RvcnkgPSBtb2Rlc1tzcGVjLm5hbWVdO1xuICAgIGlmICghbWZhY3RvcnkpIHJldHVybiBDb2RlTWlycm9yLmdldE1vZGUob3B0aW9ucywgXCJ0ZXh0L3BsYWluXCIpO1xuICAgIHZhciBtb2RlT2JqID0gbWZhY3Rvcnkob3B0aW9ucywgc3BlYyk7XG4gICAgaWYgKG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHtcbiAgICAgIHZhciBleHRzID0gbW9kZUV4dGVuc2lvbnNbc3BlYy5uYW1lXTtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gZXh0cykge1xuICAgICAgICBpZiAoIWV4dHMuaGFzT3duUHJvcGVydHkocHJvcCkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAobW9kZU9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgbW9kZU9ialtcIl9cIiArIHByb3BdID0gbW9kZU9ialtwcm9wXTtcbiAgICAgICAgbW9kZU9ialtwcm9wXSA9IGV4dHNbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIG1vZGVPYmoubmFtZSA9IHNwZWMubmFtZTtcbiAgICBpZiAoc3BlYy5oZWxwZXJUeXBlKSBtb2RlT2JqLmhlbHBlclR5cGUgPSBzcGVjLmhlbHBlclR5cGU7XG4gICAgaWYgKHNwZWMubW9kZVByb3BzKSBmb3IgKHZhciBwcm9wIGluIHNwZWMubW9kZVByb3BzKVxuICAgICAgbW9kZU9ialtwcm9wXSA9IHNwZWMubW9kZVByb3BzW3Byb3BdO1xuXG4gICAgcmV0dXJuIG1vZGVPYmo7XG4gIH07XG5cbiAgLy8gTWluaW1hbCBkZWZhdWx0IG1vZGUuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcIm51bGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHt0b2tlbjogZnVuY3Rpb24oc3RyZWFtKSB7c3RyZWFtLnNraXBUb0VuZCgpO319O1xuICB9KTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC9wbGFpblwiLCBcIm51bGxcIik7XG5cbiAgLy8gVGhpcyBjYW4gYmUgdXNlZCB0byBhdHRhY2ggcHJvcGVydGllcyB0byBtb2RlIG9iamVjdHMgZnJvbVxuICAvLyBvdXRzaWRlIHRoZSBhY3R1YWwgbW9kZSBkZWZpbml0aW9uLlxuICB2YXIgbW9kZUV4dGVuc2lvbnMgPSBDb2RlTWlycm9yLm1vZGVFeHRlbnNpb25zID0ge307XG4gIENvZGVNaXJyb3IuZXh0ZW5kTW9kZSA9IGZ1bmN0aW9uKG1vZGUsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KG1vZGUpID8gbW9kZUV4dGVuc2lvbnNbbW9kZV0gOiAobW9kZUV4dGVuc2lvbnNbbW9kZV0gPSB7fSk7XG4gICAgY29weU9iaihwcm9wZXJ0aWVzLCBleHRzKTtcbiAgfTtcblxuICAvLyBFWFRFTlNJT05TXG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24gPSBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG4gICAgQ29kZU1pcnJvci5wcm90b3R5cGVbbmFtZV0gPSBmdW5jO1xuICB9O1xuICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbiA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHtcbiAgICBEb2MucHJvdG90eXBlW25hbWVdID0gZnVuYztcbiAgfTtcbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24gPSBvcHRpb247XG5cbiAgdmFyIGluaXRIb29rcyA9IFtdO1xuICBDb2RlTWlycm9yLmRlZmluZUluaXRIb29rID0gZnVuY3Rpb24oZikge2luaXRIb29rcy5wdXNoKGYpO307XG5cbiAgdmFyIGhlbHBlcnMgPSBDb2RlTWlycm9yLmhlbHBlcnMgPSB7fTtcbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCFoZWxwZXJzLmhhc093blByb3BlcnR5KHR5cGUpKSBoZWxwZXJzW3R5cGVdID0gQ29kZU1pcnJvclt0eXBlXSA9IHtfZ2xvYmFsOiBbXX07XG4gICAgaGVscGVyc1t0eXBlXVtuYW1lXSA9IHZhbHVlO1xuICB9O1xuICBDb2RlTWlycm9yLnJlZ2lzdGVyR2xvYmFsSGVscGVyID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgcHJlZGljYXRlLCB2YWx1ZSkge1xuICAgIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIodHlwZSwgbmFtZSwgdmFsdWUpO1xuICAgIGhlbHBlcnNbdHlwZV0uX2dsb2JhbC5wdXNoKHtwcmVkOiBwcmVkaWNhdGUsIHZhbDogdmFsdWV9KTtcbiAgfTtcblxuICAvLyBNT0RFIFNUQVRFIEhBTkRMSU5HXG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvbnMgZm9yIHdvcmtpbmcgd2l0aCBzdGF0ZS4gRXhwb3J0ZWQgYmVjYXVzZSBuZXN0ZWRcbiAgLy8gbW9kZXMgbmVlZCB0byBkbyB0aGlzIGZvciB0aGVpciBpbm5lciBtb2Rlcy5cblxuICB2YXIgY29weVN0YXRlID0gQ29kZU1pcnJvci5jb3B5U3RhdGUgPSBmdW5jdGlvbihtb2RlLCBzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkgcmV0dXJuIHN0YXRlO1xuICAgIGlmIChtb2RlLmNvcHlTdGF0ZSkgcmV0dXJuIG1vZGUuY29weVN0YXRlKHN0YXRlKTtcbiAgICB2YXIgbnN0YXRlID0ge307XG4gICAgZm9yICh2YXIgbiBpbiBzdGF0ZSkge1xuICAgICAgdmFyIHZhbCA9IHN0YXRlW25dO1xuICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5KSB2YWwgPSB2YWwuY29uY2F0KFtdKTtcbiAgICAgIG5zdGF0ZVtuXSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIG5zdGF0ZTtcbiAgfTtcblxuICB2YXIgc3RhcnRTdGF0ZSA9IENvZGVNaXJyb3Iuc3RhcnRTdGF0ZSA9IGZ1bmN0aW9uKG1vZGUsIGExLCBhMikge1xuICAgIHJldHVybiBtb2RlLnN0YXJ0U3RhdGUgPyBtb2RlLnN0YXJ0U3RhdGUoYTEsIGEyKSA6IHRydWU7XG4gIH07XG5cbiAgLy8gR2l2ZW4gYSBtb2RlIGFuZCBhIHN0YXRlIChmb3IgdGhhdCBtb2RlKSwgZmluZCB0aGUgaW5uZXIgbW9kZSBhbmRcbiAgLy8gc3RhdGUgYXQgdGhlIHBvc2l0aW9uIHRoYXQgdGhlIHN0YXRlIHJlZmVycyB0by5cbiAgQ29kZU1pcnJvci5pbm5lck1vZGUgPSBmdW5jdGlvbihtb2RlLCBzdGF0ZSkge1xuICAgIHdoaWxlIChtb2RlLmlubmVyTW9kZSkge1xuICAgICAgdmFyIGluZm8gPSBtb2RlLmlubmVyTW9kZShzdGF0ZSk7XG4gICAgICBpZiAoIWluZm8gfHwgaW5mby5tb2RlID09IG1vZGUpIGJyZWFrO1xuICAgICAgc3RhdGUgPSBpbmZvLnN0YXRlO1xuICAgICAgbW9kZSA9IGluZm8ubW9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm8gfHwge21vZGU6IG1vZGUsIHN0YXRlOiBzdGF0ZX07XG4gIH07XG5cbiAgLy8gU1RBTkRBUkQgQ09NTUFORFNcblxuICAvLyBDb21tYW5kcyBhcmUgcGFyYW1ldGVyLWxlc3MgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgb24gYW5cbiAgLy8gZWRpdG9yLCBtb3N0bHkgdXNlZCBmb3Iga2V5YmluZGluZ3MuXG4gIHZhciBjb21tYW5kcyA9IENvZGVNaXJyb3IuY29tbWFuZHMgPSB7XG4gICAgc2VsZWN0QWxsOiBmdW5jdGlvbihjbSkge2NtLnNldFNlbGVjdGlvbihQb3MoY20uZmlyc3RMaW5lKCksIDApLCBQb3MoY20ubGFzdExpbmUoKSksIHNlbF9kb250U2Nyb2xsKTt9LFxuICAgIHNpbmdsZVNlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtcbiAgICAgIGNtLnNldFNlbGVjdGlvbihjbS5nZXRDdXJzb3IoXCJhbmNob3JcIiksIGNtLmdldEN1cnNvcihcImhlYWRcIiksIHNlbF9kb250U2Nyb2xsKTtcbiAgICB9LFxuICAgIGtpbGxMaW5lOiBmdW5jdGlvbihjbSkge1xuICAgICAgZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICB2YXIgbGVuID0gZ2V0TGluZShjbS5kb2MsIHJhbmdlLmhlYWQubGluZSkudGV4dC5sZW5ndGg7XG4gICAgICAgICAgaWYgKHJhbmdlLmhlYWQuY2ggPT0gbGVuICYmIHJhbmdlLmhlYWQubGluZSA8IGNtLmxhc3RMaW5lKCkpXG4gICAgICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lICsgMSwgMCl9O1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuaGVhZCwgdG86IFBvcyhyYW5nZS5oZWFkLmxpbmUsIGxlbil9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmFuZ2UudG8oKX07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlTGluZTogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSxcbiAgICAgICAgICAgICAgICB0bzogY2xpcFBvcyhjbS5kb2MsIFBvcyhyYW5nZS50bygpLmxpbmUgKyAxLCAwKSl9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxMaW5lTGVmdDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSwgdG86IHJhbmdlLmZyb20oKX07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbFdyYXBwZWRMaW5lTGVmdDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHZhciBsZWZ0UG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgICAgcmV0dXJuIHtmcm9tOiBsZWZ0UG9zLCB0bzogcmFuZ2UuZnJvbSgpfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsV3JhcHBlZExpbmVSaWdodDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHZhciByaWdodFBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgICAgcmV0dXJuIHtmcm9tOiByYW5nZS5mcm9tKCksIHRvOiByaWdodFBvcyB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB1bmRvOiBmdW5jdGlvbihjbSkge2NtLnVuZG8oKTt9LFxuICAgIHJlZG86IGZ1bmN0aW9uKGNtKSB7Y20ucmVkbygpO30sXG4gICAgdW5kb1NlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtjbS51bmRvU2VsZWN0aW9uKCk7fSxcbiAgICByZWRvU2VsZWN0aW9uOiBmdW5jdGlvbihjbSkge2NtLnJlZG9TZWxlY3Rpb24oKTt9LFxuICAgIGdvRG9jU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7Y20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCkpO30sXG4gICAgZ29Eb2NFbmQ6IGZ1bmN0aW9uKGNtKSB7Y20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5sYXN0TGluZSgpKSk7fSxcbiAgICBnb0xpbmVTdGFydDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0KGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogMX0pO1xuICAgIH0sXG4gICAgZ29MaW5lU3RhcnRTbWFydDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpO1xuICAgICAgfSwge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAxfSk7XG4gICAgfSxcbiAgICBnb0xpbmVFbmQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHsgcmV0dXJuIGxpbmVFbmQoY20sIHJhbmdlLmhlYWQubGluZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAtMX0pO1xuICAgIH0sXG4gICAgZ29MaW5lUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICB9LFxuICAgIGdvTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICB9LCBzZWxfbW92ZSk7XG4gICAgfSxcbiAgICBnb0xpbmVMZWZ0U21hcnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgICAgdmFyIHBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICAgIGlmIChwb3MuY2ggPCBjbS5nZXRMaW5lKHBvcy5saW5lKS5zZWFyY2goL1xcUy8pKSByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0sXG4gICAgZ29MaW5lVXA6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoLTEsIFwibGluZVwiKTt9LFxuICAgIGdvTGluZURvd246IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoMSwgXCJsaW5lXCIpO30sXG4gICAgZ29QYWdlVXA6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoLTEsIFwicGFnZVwiKTt9LFxuICAgIGdvUGFnZURvd246IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoMSwgXCJwYWdlXCIpO30sXG4gICAgZ29DaGFyTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJjaGFyXCIpO30sXG4gICAgZ29DaGFyUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJjaGFyXCIpO30sXG4gICAgZ29Db2x1bW5MZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcImNvbHVtblwiKTt9LFxuICAgIGdvQ29sdW1uUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJjb2x1bW5cIik7fSxcbiAgICBnb1dvcmRMZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcIndvcmRcIik7fSxcbiAgICBnb0dyb3VwUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJncm91cFwiKTt9LFxuICAgIGdvR3JvdXBMZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcImdyb3VwXCIpO30sXG4gICAgZ29Xb3JkUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJ3b3JkXCIpO30sXG4gICAgZGVsQ2hhckJlZm9yZTogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKC0xLCBcImNoYXJcIik7fSxcbiAgICBkZWxDaGFyQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcImNoYXJcIik7fSxcbiAgICBkZWxXb3JkQmVmb3JlOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsIFwid29yZFwiKTt9LFxuICAgIGRlbFdvcmRBZnRlcjogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKDEsIFwid29yZFwiKTt9LFxuICAgIGRlbEdyb3VwQmVmb3JlOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsIFwiZ3JvdXBcIik7fSxcbiAgICBkZWxHcm91cEFmdGVyOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoMSwgXCJncm91cFwiKTt9LFxuICAgIGluZGVudEF1dG86IGZ1bmN0aW9uKGNtKSB7Y20uaW5kZW50U2VsZWN0aW9uKFwic21hcnRcIik7fSxcbiAgICBpbmRlbnRNb3JlOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcImFkZFwiKTt9LFxuICAgIGluZGVudExlc3M6IGZ1bmN0aW9uKGNtKSB7Y20uaW5kZW50U2VsZWN0aW9uKFwic3VidHJhY3RcIik7fSxcbiAgICBpbnNlcnRUYWI6IGZ1bmN0aW9uKGNtKSB7Y20ucmVwbGFjZVNlbGVjdGlvbihcIlxcdFwiKTt9LFxuICAgIGluc2VydFNvZnRUYWI6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICB2YXIgc3BhY2VzID0gW10sIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcG9zID0gcmFuZ2VzW2ldLmZyb20oKTtcbiAgICAgICAgdmFyIGNvbCA9IGNvdW50Q29sdW1uKGNtLmdldExpbmUocG9zLmxpbmUpLCBwb3MuY2gsIHRhYlNpemUpO1xuICAgICAgICBzcGFjZXMucHVzaChuZXcgQXJyYXkodGFiU2l6ZSAtIGNvbCAlIHRhYlNpemUgKyAxKS5qb2luKFwiIFwiKSk7XG4gICAgICB9XG4gICAgICBjbS5yZXBsYWNlU2VsZWN0aW9ucyhzcGFjZXMpO1xuICAgIH0sXG4gICAgZGVmYXVsdFRhYjogZnVuY3Rpb24oY20pIHtcbiAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSBjbS5pbmRlbnRTZWxlY3Rpb24oXCJhZGRcIik7XG4gICAgICBlbHNlIGNtLmV4ZWNDb21tYW5kKFwiaW5zZXJ0VGFiXCIpO1xuICAgIH0sXG4gICAgdHJhbnNwb3NlQ2hhcnM6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIG5ld1NlbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0uaGVhZCwgbGluZSA9IGdldExpbmUoY20uZG9jLCBjdXIubGluZSkudGV4dDtcbiAgICAgICAgICBpZiAobGluZSkge1xuICAgICAgICAgICAgaWYgKGN1ci5jaCA9PSBsaW5lLmxlbmd0aCkgY3VyID0gbmV3IFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMSk7XG4gICAgICAgICAgICBpZiAoY3VyLmNoID4gMCkge1xuICAgICAgICAgICAgICBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcbiAgICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGxpbmUuY2hhckF0KGN1ci5jaCAtIDEpICsgbGluZS5jaGFyQXQoY3VyLmNoIC0gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDIpLCBjdXIsIFwiK3RyYW5zcG9zZVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyLmxpbmUgPiBjbS5kb2MuZmlyc3QpIHtcbiAgICAgICAgICAgICAgdmFyIHByZXYgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUgLSAxKS50ZXh0O1xuICAgICAgICAgICAgICBpZiAocHJldilcbiAgICAgICAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZS5jaGFyQXQoMCkgKyBjbS5kb2MubGluZVNlcGFyYXRvcigpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5jaGFyQXQocHJldi5sZW5ndGggLSAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKGN1ci5saW5lIC0gMSwgcHJldi5sZW5ndGggLSAxKSwgUG9zKGN1ci5saW5lLCAxKSwgXCIrdHJhbnNwb3NlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdTZWwucHVzaChuZXcgUmFuZ2UoY3VyLCBjdXIpKTtcbiAgICAgICAgfVxuICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKG5ld1NlbCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIG5ld2xpbmVBbmRJbmRlbnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxlbiA9IGNtLmxpc3RTZWxlY3Rpb25zKCkubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIHJhbmdlID0gY20ubGlzdFNlbGVjdGlvbnMoKVtpXTtcbiAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoY20uZG9jLmxpbmVTZXBhcmF0b3IoKSwgcmFuZ2UuYW5jaG9yLCByYW5nZS5oZWFkLCBcIitpbnB1dFwiKTtcbiAgICAgICAgICBjbS5pbmRlbnRMaW5lKHJhbmdlLmZyb20oKS5saW5lICsgMSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZU92ZXJ3cml0ZTogZnVuY3Rpb24oY20pIHtjbS50b2dnbGVPdmVyd3JpdGUoKTt9XG4gIH07XG5cblxuICAvLyBTVEFOREFSRCBLRVlNQVBTXG5cbiAgdmFyIGtleU1hcCA9IENvZGVNaXJyb3Iua2V5TWFwID0ge307XG5cbiAga2V5TWFwLmJhc2ljID0ge1xuICAgIFwiTGVmdFwiOiBcImdvQ2hhckxlZnRcIiwgXCJSaWdodFwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiVXBcIjogXCJnb0xpbmVVcFwiLCBcIkRvd25cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJFbmRcIjogXCJnb0xpbmVFbmRcIiwgXCJIb21lXCI6IFwiZ29MaW5lU3RhcnRTbWFydFwiLCBcIlBhZ2VVcFwiOiBcImdvUGFnZVVwXCIsIFwiUGFnZURvd25cIjogXCJnb1BhZ2VEb3duXCIsXG4gICAgXCJEZWxldGVcIjogXCJkZWxDaGFyQWZ0ZXJcIiwgXCJCYWNrc3BhY2VcIjogXCJkZWxDaGFyQmVmb3JlXCIsIFwiU2hpZnQtQmFja3NwYWNlXCI6IFwiZGVsQ2hhckJlZm9yZVwiLFxuICAgIFwiVGFiXCI6IFwiZGVmYXVsdFRhYlwiLCBcIlNoaWZ0LVRhYlwiOiBcImluZGVudEF1dG9cIixcbiAgICBcIkVudGVyXCI6IFwibmV3bGluZUFuZEluZGVudFwiLCBcIkluc2VydFwiOiBcInRvZ2dsZU92ZXJ3cml0ZVwiLFxuICAgIFwiRXNjXCI6IFwic2luZ2xlU2VsZWN0aW9uXCJcbiAgfTtcbiAgLy8gTm90ZSB0aGF0IHRoZSBzYXZlIGFuZCBmaW5kLXJlbGF0ZWQgY29tbWFuZHMgYXJlbid0IGRlZmluZWQgYnlcbiAgLy8gZGVmYXVsdC4gVXNlciBjb2RlIG9yIGFkZG9ucyBjYW4gZGVmaW5lIHRoZW0uIFVua25vd24gY29tbWFuZHNcbiAgLy8gYXJlIHNpbXBseSBpZ25vcmVkLlxuICBrZXlNYXAucGNEZWZhdWx0ID0ge1xuICAgIFwiQ3RybC1BXCI6IFwic2VsZWN0QWxsXCIsIFwiQ3RybC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkN0cmwtWlwiOiBcInVuZG9cIiwgXCJTaGlmdC1DdHJsLVpcIjogXCJyZWRvXCIsIFwiQ3RybC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ3RybC1Ib21lXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkN0cmwtRW5kXCI6IFwiZ29Eb2NFbmRcIiwgXCJDdHJsLVVwXCI6IFwiZ29MaW5lVXBcIiwgXCJDdHJsLURvd25cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJDdHJsLUxlZnRcIjogXCJnb0dyb3VwTGVmdFwiLCBcIkN0cmwtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJBbHQtTGVmdFwiOiBcImdvTGluZVN0YXJ0XCIsIFwiQWx0LVJpZ2h0XCI6IFwiZ29MaW5lRW5kXCIsXG4gICAgXCJDdHJsLUJhY2tzcGFjZVwiOiBcImRlbEdyb3VwQmVmb3JlXCIsIFwiQ3RybC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ3RybC1TXCI6IFwic2F2ZVwiLCBcIkN0cmwtRlwiOiBcImZpbmRcIixcbiAgICBcIkN0cmwtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ3RybC1HXCI6IFwiZmluZFByZXZcIiwgXCJTaGlmdC1DdHJsLUZcIjogXCJyZXBsYWNlXCIsIFwiU2hpZnQtQ3RybC1SXCI6IFwicmVwbGFjZUFsbFwiLFxuICAgIFwiQ3RybC1bXCI6IFwiaW5kZW50TGVzc1wiLCBcIkN0cmwtXVwiOiBcImluZGVudE1vcmVcIixcbiAgICBcIkN0cmwtVVwiOiBcInVuZG9TZWxlY3Rpb25cIiwgXCJTaGlmdC1DdHJsLVVcIjogXCJyZWRvU2VsZWN0aW9uXCIsIFwiQWx0LVVcIjogXCJyZWRvU2VsZWN0aW9uXCIsXG4gICAgZmFsbHRocm91Z2g6IFwiYmFzaWNcIlxuICB9O1xuICAvLyBWZXJ5IGJhc2ljIHJlYWRsaW5lL2VtYWNzLXN0eWxlIGJpbmRpbmdzLCB3aGljaCBhcmUgc3RhbmRhcmQgb24gTWFjLlxuICBrZXlNYXAuZW1hY3N5ID0ge1xuICAgIFwiQ3RybC1GXCI6IFwiZ29DaGFyUmlnaHRcIiwgXCJDdHJsLUJcIjogXCJnb0NoYXJMZWZ0XCIsIFwiQ3RybC1QXCI6IFwiZ29MaW5lVXBcIiwgXCJDdHJsLU5cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJBbHQtRlwiOiBcImdvV29yZFJpZ2h0XCIsIFwiQWx0LUJcIjogXCJnb1dvcmRMZWZ0XCIsIFwiQ3RybC1BXCI6IFwiZ29MaW5lU3RhcnRcIiwgXCJDdHJsLUVcIjogXCJnb0xpbmVFbmRcIixcbiAgICBcIkN0cmwtVlwiOiBcImdvUGFnZURvd25cIiwgXCJTaGlmdC1DdHJsLVZcIjogXCJnb1BhZ2VVcFwiLCBcIkN0cmwtRFwiOiBcImRlbENoYXJBZnRlclwiLCBcIkN0cmwtSFwiOiBcImRlbENoYXJCZWZvcmVcIixcbiAgICBcIkFsdC1EXCI6IFwiZGVsV29yZEFmdGVyXCIsIFwiQWx0LUJhY2tzcGFjZVwiOiBcImRlbFdvcmRCZWZvcmVcIiwgXCJDdHJsLUtcIjogXCJraWxsTGluZVwiLCBcIkN0cmwtVFwiOiBcInRyYW5zcG9zZUNoYXJzXCJcbiAgfTtcbiAga2V5TWFwLm1hY0RlZmF1bHQgPSB7XG4gICAgXCJDbWQtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkNtZC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkNtZC1aXCI6IFwidW5kb1wiLCBcIlNoaWZ0LUNtZC1aXCI6IFwicmVkb1wiLCBcIkNtZC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ21kLUhvbWVcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ21kLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkNtZC1FbmRcIjogXCJnb0RvY0VuZFwiLCBcIkNtZC1Eb3duXCI6IFwiZ29Eb2NFbmRcIiwgXCJBbHQtTGVmdFwiOiBcImdvR3JvdXBMZWZ0XCIsXG4gICAgXCJBbHQtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJDbWQtTGVmdFwiOiBcImdvTGluZUxlZnRcIiwgXCJDbWQtUmlnaHRcIjogXCJnb0xpbmVSaWdodFwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLFxuICAgIFwiQ3RybC1BbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkFsdC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ21kLVNcIjogXCJzYXZlXCIsIFwiQ21kLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDbWQtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ21kLUdcIjogXCJmaW5kUHJldlwiLCBcIkNtZC1BbHQtRlwiOiBcInJlcGxhY2VcIiwgXCJTaGlmdC1DbWQtQWx0LUZcIjogXCJyZXBsYWNlQWxsXCIsXG4gICAgXCJDbWQtW1wiOiBcImluZGVudExlc3NcIiwgXCJDbWQtXVwiOiBcImluZGVudE1vcmVcIiwgXCJDbWQtQmFja3NwYWNlXCI6IFwiZGVsV3JhcHBlZExpbmVMZWZ0XCIsIFwiQ21kLURlbGV0ZVwiOiBcImRlbFdyYXBwZWRMaW5lUmlnaHRcIixcbiAgICBcIkNtZC1VXCI6IFwidW5kb1NlbGVjdGlvblwiLCBcIlNoaWZ0LUNtZC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkN0cmwtVXBcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29Eb2NFbmRcIixcbiAgICBmYWxsdGhyb3VnaDogW1wiYmFzaWNcIiwgXCJlbWFjc3lcIl1cbiAgfTtcbiAga2V5TWFwW1wiZGVmYXVsdFwiXSA9IG1hYyA/IGtleU1hcC5tYWNEZWZhdWx0IDoga2V5TWFwLnBjRGVmYXVsdDtcblxuICAvLyBLRVlNQVAgRElTUEFUQ0hcblxuICBmdW5jdGlvbiBub3JtYWxpemVLZXlOYW1lKG5hbWUpIHtcbiAgICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KC8tKD8hJCkvKSwgbmFtZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBhbHQsIGN0cmwsIHNoaWZ0LCBjbWQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIHZhciBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgIGlmICgvXihjbWR8bWV0YXxtKSQvaS50ZXN0KG1vZCkpIGNtZCA9IHRydWU7XG4gICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0KG1vZCkpIGFsdCA9IHRydWU7XG4gICAgICBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKSBjdHJsID0gdHJ1ZTtcbiAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KSQvaS50ZXN0KG1vZCkpIHNoaWZ0ID0gdHJ1ZTtcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6IFwiICsgbW9kKTtcbiAgICB9XG4gICAgaWYgKGFsdCkgbmFtZSA9IFwiQWx0LVwiICsgbmFtZTtcbiAgICBpZiAoY3RybCkgbmFtZSA9IFwiQ3RybC1cIiArIG5hbWU7XG4gICAgaWYgKGNtZCkgbmFtZSA9IFwiQ21kLVwiICsgbmFtZTtcbiAgICBpZiAoc2hpZnQpIG5hbWUgPSBcIlNoaWZ0LVwiICsgbmFtZTtcbiAgICByZXR1cm4gbmFtZTtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgYSBrbHVkZ2UgdG8ga2VlcCBrZXltYXBzIG1vc3RseSB3b3JraW5nIGFzIHJhdyBvYmplY3RzXG4gIC8vIChiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSkgd2hpbGUgYXQgdGhlIHNhbWUgdGltZSBzdXBwb3J0IGZlYXR1cmVzXG4gIC8vIGxpa2Ugbm9ybWFsaXphdGlvbiBhbmQgbXVsdGktc3Ryb2tlIGtleSBiaW5kaW5ncy4gSXQgY29tcGlsZXMgYVxuICAvLyBuZXcgbm9ybWFsaXplZCBrZXltYXAsIGFuZCB0aGVuIHVwZGF0ZXMgdGhlIG9sZCBvYmplY3QgdG8gcmVmbGVjdFxuICAvLyB0aGlzLlxuICBDb2RlTWlycm9yLm5vcm1hbGl6ZUtleU1hcCA9IGZ1bmN0aW9uKGtleW1hcCkge1xuICAgIHZhciBjb3B5ID0ge307XG4gICAgZm9yICh2YXIga2V5bmFtZSBpbiBrZXltYXApIGlmIChrZXltYXAuaGFzT3duUHJvcGVydHkoa2V5bmFtZSkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGtleW1hcFtrZXluYW1lXTtcbiAgICAgIGlmICgvXihuYW1lfGZhbGx0aHJvdWdofChkZXxhdCl0YWNoKSQvLnRlc3Qoa2V5bmFtZSkpIGNvbnRpbnVlO1xuICAgICAgaWYgKHZhbHVlID09IFwiLi4uXCIpIHsgZGVsZXRlIGtleW1hcFtrZXluYW1lXTsgY29udGludWU7IH1cblxuICAgICAgdmFyIGtleXMgPSBtYXAoa2V5bmFtZS5zcGxpdChcIiBcIiksIG5vcm1hbGl6ZUtleU5hbWUpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB2YWwsIG5hbWU7XG4gICAgICAgIGlmIChpID09IGtleXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIHZhbCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLnNsaWNlKDAsIGkgKyAxKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICB2YWwgPSBcIi4uLlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2ID0gY29weVtuYW1lXTtcbiAgICAgICAgaWYgKCFwcmV2KSBjb3B5W25hbWVdID0gdmFsO1xuICAgICAgICBlbHNlIGlmIChwcmV2ICE9IHZhbCkgdGhyb3cgbmV3IEVycm9yKFwiSW5jb25zaXN0ZW50IGJpbmRpbmdzIGZvciBcIiArIG5hbWUpO1xuICAgICAgfVxuICAgICAgZGVsZXRlIGtleW1hcFtrZXluYW1lXTtcbiAgICB9XG4gICAgZm9yICh2YXIgcHJvcCBpbiBjb3B5KSBrZXltYXBbcHJvcF0gPSBjb3B5W3Byb3BdO1xuICAgIHJldHVybiBrZXltYXA7XG4gIH07XG5cbiAgdmFyIGxvb2t1cEtleSA9IENvZGVNaXJyb3IubG9va3VwS2V5ID0gZnVuY3Rpb24oa2V5LCBtYXAsIGhhbmRsZSwgY29udGV4dCkge1xuICAgIG1hcCA9IGdldEtleU1hcChtYXApO1xuICAgIHZhciBmb3VuZCA9IG1hcC5jYWxsID8gbWFwLmNhbGwoa2V5LCBjb250ZXh0KSA6IG1hcFtrZXldO1xuICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHJldHVybiBcIm5vdGhpbmdcIjtcbiAgICBpZiAoZm91bmQgPT09IFwiLi4uXCIpIHJldHVybiBcIm11bHRpXCI7XG4gICAgaWYgKGZvdW5kICE9IG51bGwgJiYgaGFuZGxlKGZvdW5kKSkgcmV0dXJuIFwiaGFuZGxlZFwiO1xuXG4gICAgaWYgKG1hcC5mYWxsdGhyb3VnaCkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtYXAuZmFsbHRocm91Z2gpICE9IFwiW29iamVjdCBBcnJheV1cIilcbiAgICAgICAgcmV0dXJuIGxvb2t1cEtleShrZXksIG1hcC5mYWxsdGhyb3VnaCwgaGFuZGxlLCBjb250ZXh0KTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwLmZhbGx0aHJvdWdoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkoa2V5LCBtYXAuZmFsbHRocm91Z2hbaV0sIGhhbmRsZSwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIE1vZGlmaWVyIGtleSBwcmVzc2VzIGRvbid0IGNvdW50IGFzICdyZWFsJyBrZXkgcHJlc3NlcyBmb3IgdGhlXG4gIC8vIHB1cnBvc2Ugb2Yga2V5bWFwIGZhbGx0aHJvdWdoLlxuICB2YXIgaXNNb2RpZmllcktleSA9IENvZGVNaXJyb3IuaXNNb2RpZmllcktleSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIG5hbWUgPSB0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIiA/IHZhbHVlIDoga2V5TmFtZXNbdmFsdWUua2V5Q29kZV07XG4gICAgcmV0dXJuIG5hbWUgPT0gXCJDdHJsXCIgfHwgbmFtZSA9PSBcIkFsdFwiIHx8IG5hbWUgPT0gXCJTaGlmdFwiIHx8IG5hbWUgPT0gXCJNb2RcIjtcbiAgfTtcblxuICAvLyBMb29rIHVwIHRoZSBuYW1lIG9mIGEga2V5IGFzIGluZGljYXRlZCBieSBhbiBldmVudCBvYmplY3QuXG4gIHZhciBrZXlOYW1lID0gQ29kZU1pcnJvci5rZXlOYW1lID0gZnVuY3Rpb24oZXZlbnQsIG5vU2hpZnQpIHtcbiAgICBpZiAocHJlc3RvICYmIGV2ZW50LmtleUNvZGUgPT0gMzQgJiYgZXZlbnRbXCJjaGFyXCJdKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGJhc2UgPSBrZXlOYW1lc1tldmVudC5rZXlDb2RlXSwgbmFtZSA9IGJhc2U7XG4gICAgaWYgKG5hbWUgPT0gbnVsbCB8fCBldmVudC5hbHRHcmFwaEtleSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChldmVudC5hbHRLZXkgJiYgYmFzZSAhPSBcIkFsdFwiKSBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xuICAgIGlmICgoZmxpcEN0cmxDbWQgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleSkgJiYgYmFzZSAhPSBcIkN0cmxcIikgbmFtZSA9IFwiQ3RybC1cIiArIG5hbWU7XG4gICAgaWYgKChmbGlwQ3RybENtZCA/IGV2ZW50LmN0cmxLZXkgOiBldmVudC5tZXRhS2V5KSAmJiBiYXNlICE9IFwiQ21kXCIpIG5hbWUgPSBcIkNtZC1cIiArIG5hbWU7XG4gICAgaWYgKCFub1NoaWZ0ICYmIGV2ZW50LnNoaWZ0S2V5ICYmIGJhc2UgIT0gXCJTaGlmdFwiKSBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0S2V5TWFwKHZhbCkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsID09IFwic3RyaW5nXCIgPyBrZXlNYXBbdmFsXSA6IHZhbDtcbiAgfVxuXG4gIC8vIEZST01URVhUQVJFQVxuXG4gIENvZGVNaXJyb3IuZnJvbVRleHRBcmVhID0gZnVuY3Rpb24odGV4dGFyZWEsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IGNvcHlPYmoob3B0aW9ucykgOiB7fTtcbiAgICBvcHRpb25zLnZhbHVlID0gdGV4dGFyZWEudmFsdWU7XG4gICAgaWYgKCFvcHRpb25zLnRhYmluZGV4ICYmIHRleHRhcmVhLnRhYkluZGV4KVxuICAgICAgb3B0aW9ucy50YWJpbmRleCA9IHRleHRhcmVhLnRhYkluZGV4O1xuICAgIGlmICghb3B0aW9ucy5wbGFjZWhvbGRlciAmJiB0ZXh0YXJlYS5wbGFjZWhvbGRlcilcbiAgICAgIG9wdGlvbnMucGxhY2Vob2xkZXIgPSB0ZXh0YXJlYS5wbGFjZWhvbGRlcjtcbiAgICAvLyBTZXQgYXV0b2ZvY3VzIHRvIHRydWUgaWYgdGhpcyB0ZXh0YXJlYSBpcyBmb2N1c2VkLCBvciBpZiBpdCBoYXNcbiAgICAvLyBhdXRvZm9jdXMgYW5kIG5vIG90aGVyIGVsZW1lbnQgaXMgZm9jdXNlZC5cbiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgPT0gbnVsbCkge1xuICAgICAgdmFyIGhhc0ZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgICBvcHRpb25zLmF1dG9mb2N1cyA9IGhhc0ZvY3VzID09IHRleHRhcmVhIHx8XG4gICAgICAgIHRleHRhcmVhLmdldEF0dHJpYnV0ZShcImF1dG9mb2N1c1wiKSAhPSBudWxsICYmIGhhc0ZvY3VzID09IGRvY3VtZW50LmJvZHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZSgpIHt0ZXh0YXJlYS52YWx1ZSA9IGNtLmdldFZhbHVlKCk7fVxuICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XG4gICAgICBvbih0ZXh0YXJlYS5mb3JtLCBcInN1Ym1pdFwiLCBzYXZlKTtcbiAgICAgIC8vIERlcGxvcmFibGUgaGFjayB0byBtYWtlIHRoZSBzdWJtaXQgbWV0aG9kIGRvIHRoZSByaWdodCB0aGluZy5cbiAgICAgIGlmICghb3B0aW9ucy5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lKSB7XG4gICAgICAgIHZhciBmb3JtID0gdGV4dGFyZWEuZm9ybSwgcmVhbFN1Ym1pdCA9IGZvcm0uc3VibWl0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciB3cmFwcGVkU3VibWl0ID0gZm9ybS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNhdmUoKTtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0ID0gcmVhbFN1Ym1pdDtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHdyYXBwZWRTdWJtaXQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaChlKSB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuZmluaXNoSW5pdCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5zYXZlID0gc2F2ZTtcbiAgICAgIGNtLmdldFRleHRBcmVhID0gZnVuY3Rpb24oKSB7IHJldHVybiB0ZXh0YXJlYTsgfTtcbiAgICAgIGNtLnRvVGV4dEFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY20udG9UZXh0QXJlYSA9IGlzTmFOOyAvLyBQcmV2ZW50IHRoaXMgZnJvbSBiZWluZyByYW4gdHdpY2VcbiAgICAgICAgc2F2ZSgpO1xuICAgICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNtLmdldFdyYXBwZXJFbGVtZW50KCkpO1xuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgaWYgKHRleHRhcmVhLmZvcm0pIHtcbiAgICAgICAgICBvZmYodGV4dGFyZWEuZm9ybSwgXCJzdWJtaXRcIiwgc2F2ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9IHJlYWxTdWJtaXQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcblxuICAgIHRleHRhcmVhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB2YXIgY20gPSBDb2RlTWlycm9yKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHRleHRhcmVhLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHRleHRhcmVhLm5leHRTaWJsaW5nKTtcbiAgICB9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gY207XG4gIH07XG5cbiAgLy8gU1RSSU5HIFNUUkVBTVxuXG4gIC8vIEZlZCB0byB0aGUgbW9kZSBwYXJzZXJzLCBwcm92aWRlcyBoZWxwZXIgZnVuY3Rpb25zIHRvIG1ha2VcbiAgLy8gcGFyc2VycyBtb3JlIHN1Y2NpbmN0LlxuXG4gIHZhciBTdHJpbmdTdHJlYW0gPSBDb2RlTWlycm9yLlN0cmluZ1N0cmVhbSA9IGZ1bmN0aW9uKHN0cmluZywgdGFiU2l6ZSkge1xuICAgIHRoaXMucG9zID0gdGhpcy5zdGFydCA9IDA7XG4gICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgdGhpcy50YWJTaXplID0gdGFiU2l6ZSB8fCA4O1xuICAgIHRoaXMubGFzdENvbHVtblBvcyA9IHRoaXMubGFzdENvbHVtblZhbHVlID0gMDtcbiAgICB0aGlzLmxpbmVTdGFydCA9IDA7XG4gIH07XG5cbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZSA9IHtcbiAgICBlb2w6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnBvcyA+PSB0aGlzLnN0cmluZy5sZW5ndGg7fSxcbiAgICBzb2w6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnBvcyA9PSB0aGlzLmxpbmVTdGFydDt9LFxuICAgIHBlZWs6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpIHx8IHVuZGVmaW5lZDt9LFxuICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMucG9zIDwgdGhpcy5zdHJpbmcubGVuZ3RoKVxuICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKyspO1xuICAgIH0sXG4gICAgZWF0OiBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgdmFyIGNoID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtcbiAgICAgIGlmICh0eXBlb2YgbWF0Y2ggPT0gXCJzdHJpbmdcIikgdmFyIG9rID0gY2ggPT0gbWF0Y2g7XG4gICAgICBlbHNlIHZhciBvayA9IGNoICYmIChtYXRjaC50ZXN0ID8gbWF0Y2gudGVzdChjaCkgOiBtYXRjaChjaCkpO1xuICAgICAgaWYgKG9rKSB7Kyt0aGlzLnBvczsgcmV0dXJuIGNoO31cbiAgICB9LFxuICAgIGVhdFdoaWxlOiBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICB3aGlsZSAodGhpcy5lYXQobWF0Y2gpKXt9XG4gICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9LFxuICAgIGVhdFNwYWNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMucG9zO1xuICAgICAgd2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpICsrdGhpcy5wb3M7XG4gICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9LFxuICAgIHNraXBUb0VuZDogZnVuY3Rpb24oKSB7dGhpcy5wb3MgPSB0aGlzLnN0cmluZy5sZW5ndGg7fSxcbiAgICBza2lwVG86IGZ1bmN0aW9uKGNoKSB7XG4gICAgICB2YXIgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7XG4gICAgICBpZiAoZm91bmQgPiAtMSkge3RoaXMucG9zID0gZm91bmQ7IHJldHVybiB0cnVlO31cbiAgICB9LFxuICAgIGJhY2tVcDogZnVuY3Rpb24obikge3RoaXMucG9zIC09IG47fSxcbiAgICBjb2x1bW46IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMubGFzdENvbHVtblBvcyA8IHRoaXMuc3RhcnQpIHtcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uVmFsdWUgPSBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5zdGFydCwgdGhpcy50YWJTaXplLCB0aGlzLmxhc3RDb2x1bW5Qb3MsIHRoaXMubGFzdENvbHVtblZhbHVlKTtcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5zdGFydDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmxhc3RDb2x1bW5WYWx1ZSAtICh0aGlzLmxpbmVTdGFydCA/IGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCB0aGlzLmxpbmVTdGFydCwgdGhpcy50YWJTaXplKSA6IDApO1xuICAgIH0sXG4gICAgaW5kZW50YXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCBudWxsLCB0aGlzLnRhYlNpemUpIC1cbiAgICAgICAgKHRoaXMubGluZVN0YXJ0ID8gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMubGluZVN0YXJ0LCB0aGlzLnRhYlNpemUpIDogMCk7XG4gICAgfSxcbiAgICBtYXRjaDogZnVuY3Rpb24ocGF0dGVybiwgY29uc3VtZSwgY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YXIgY2FzZWQgPSBmdW5jdGlvbihzdHIpIHtyZXR1cm4gY2FzZUluc2Vuc2l0aXZlID8gc3RyLnRvTG93ZXJDYXNlKCkgOiBzdHI7fTtcbiAgICAgICAgdmFyIHN1YnN0ciA9IHRoaXMuc3RyaW5nLnN1YnN0cih0aGlzLnBvcywgcGF0dGVybi5sZW5ndGgpO1xuICAgICAgICBpZiAoY2FzZWQoc3Vic3RyKSA9PSBjYXNlZChwYXR0ZXJuKSkge1xuICAgICAgICAgIGlmIChjb25zdW1lICE9PSBmYWxzZSkgdGhpcy5wb3MgKz0gcGF0dGVybi5sZW5ndGg7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMucG9zKS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID4gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChtYXRjaCAmJiBjb25zdW1lICE9PSBmYWxzZSkgdGhpcy5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9XG4gICAgfSxcbiAgICBjdXJyZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLnBvcyk7fSxcbiAgICBoaWRlRmlyc3RDaGFyczogZnVuY3Rpb24obiwgaW5uZXIpIHtcbiAgICAgIHRoaXMubGluZVN0YXJ0ICs9IG47XG4gICAgICB0cnkgeyByZXR1cm4gaW5uZXIoKTsgfVxuICAgICAgZmluYWxseSB7IHRoaXMubGluZVN0YXJ0IC09IG47IH1cbiAgICB9XG4gIH07XG5cbiAgLy8gVEVYVE1BUktFUlNcblxuICAvLyBDcmVhdGVkIHdpdGggbWFya1RleHQgYW5kIHNldEJvb2ttYXJrIG1ldGhvZHMuIEEgVGV4dE1hcmtlciBpcyBhXG4gIC8vIGhhbmRsZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFyIG9yIGZpbmQgYSBtYXJrZWQgcG9zaXRpb24gaW4gdGhlXG4gIC8vIGRvY3VtZW50LiBMaW5lIG9iamVjdHMgaG9sZCBhcnJheXMgKG1hcmtlZFNwYW5zKSBjb250YWluaW5nXG4gIC8vIHtmcm9tLCB0bywgbWFya2VyfSBvYmplY3QgcG9pbnRpbmcgdG8gc3VjaCBtYXJrZXIgb2JqZWN0cywgYW5kXG4gIC8vIGluZGljYXRpbmcgdGhhdCBzdWNoIGEgbWFya2VyIGlzIHByZXNlbnQgb24gdGhhdCBsaW5lLiBNdWx0aXBsZVxuICAvLyBsaW5lcyBtYXkgcG9pbnQgdG8gdGhlIHNhbWUgbWFya2VyIHdoZW4gaXQgc3BhbnMgYWNyb3NzIGxpbmVzLlxuICAvLyBUaGUgc3BhbnMgd2lsbCBoYXZlIG51bGwgZm9yIHRoZWlyIGZyb20vdG8gcHJvcGVydGllcyB3aGVuIHRoZVxuICAvLyBtYXJrZXIgY29udGludWVzIGJleW9uZCB0aGUgc3RhcnQvZW5kIG9mIHRoZSBsaW5lLiBNYXJrZXJzIGhhdmVcbiAgLy8gbGlua3MgYmFjayB0byB0aGUgbGluZXMgdGhleSBjdXJyZW50bHkgdG91Y2guXG5cbiAgdmFyIG5leHRNYXJrZXJJZCA9IDA7XG5cbiAgdmFyIFRleHRNYXJrZXIgPSBDb2RlTWlycm9yLlRleHRNYXJrZXIgPSBmdW5jdGlvbihkb2MsIHR5cGUpIHtcbiAgICB0aGlzLmxpbmVzID0gW107XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB0aGlzLmlkID0gKytuZXh0TWFya2VySWQ7XG4gIH07XG4gIGV2ZW50TWl4aW4oVGV4dE1hcmtlcik7XG5cbiAgLy8gQ2xlYXIgdGhlIG1hcmtlci5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5leHBsaWNpdGx5Q2xlYXJlZCkgcmV0dXJuO1xuICAgIHZhciBjbSA9IHRoaXMuZG9jLmNtLCB3aXRoT3AgPSBjbSAmJiAhY20uY3VyT3A7XG4gICAgaWYgKHdpdGhPcCkgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgIGlmIChoYXNIYW5kbGVyKHRoaXMsIFwiY2xlYXJcIikpIHtcbiAgICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZCgpO1xuICAgICAgaWYgKGZvdW5kKSBzaWduYWxMYXRlcih0aGlzLCBcImNsZWFyXCIsIGZvdW5kLmZyb20sIGZvdW5kLnRvKTtcbiAgICB9XG4gICAgdmFyIG1pbiA9IG51bGwsIG1heCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICB2YXIgc3BhbiA9IGdldE1hcmtlZFNwYW5Gb3IobGluZS5tYXJrZWRTcGFucywgdGhpcyk7XG4gICAgICBpZiAoY20gJiYgIXRoaXMuY29sbGFwc2VkKSByZWdMaW5lQ2hhbmdlKGNtLCBsaW5lTm8obGluZSksIFwidGV4dFwiKTtcbiAgICAgIGVsc2UgaWYgKGNtKSB7XG4gICAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIG1heCA9IGxpbmVObyhsaW5lKTtcbiAgICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSBtaW4gPSBsaW5lTm8obGluZSk7XG4gICAgICB9XG4gICAgICBsaW5lLm1hcmtlZFNwYW5zID0gcmVtb3ZlTWFya2VkU3BhbihsaW5lLm1hcmtlZFNwYW5zLCBzcGFuKTtcbiAgICAgIGlmIChzcGFuLmZyb20gPT0gbnVsbCAmJiB0aGlzLmNvbGxhcHNlZCAmJiAhbGluZUlzSGlkZGVuKHRoaXMuZG9jLCBsaW5lKSAmJiBjbSlcbiAgICAgICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpKTtcbiAgICB9XG4gICAgaWYgKGNtICYmIHRoaXMuY29sbGFwc2VkICYmICFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgdmlzdWFsID0gdmlzdWFsTGluZSh0aGlzLmxpbmVzW2ldKSwgbGVuID0gbGluZUxlbmd0aCh2aXN1YWwpO1xuICAgICAgaWYgKGxlbiA+IGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmUgPSB2aXN1YWw7XG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGxlbjtcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1pbiAhPSBudWxsICYmIGNtICYmIHRoaXMuY29sbGFwc2VkKSByZWdDaGFuZ2UoY20sIG1pbiwgbWF4ICsgMSk7XG4gICAgdGhpcy5saW5lcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuZXhwbGljaXRseUNsZWFyZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLmF0b21pYyAmJiB0aGlzLmRvYy5jYW50RWRpdCkge1xuICAgICAgdGhpcy5kb2MuY2FudEVkaXQgPSBmYWxzZTtcbiAgICAgIGlmIChjbSkgcmVDaGVja1NlbGVjdGlvbihjbS5kb2MpO1xuICAgIH1cbiAgICBpZiAoY20pIHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckNsZWFyZWRcIiwgY20sIHRoaXMpO1xuICAgIGlmICh3aXRoT3ApIGVuZE9wZXJhdGlvbihjbSk7XG4gICAgaWYgKHRoaXMucGFyZW50KSB0aGlzLnBhcmVudC5jbGVhcigpO1xuICB9O1xuXG4gIC8vIEZpbmQgdGhlIHBvc2l0aW9uIG9mIHRoZSBtYXJrZXIgaW4gdGhlIGRvY3VtZW50LiBSZXR1cm5zIGEge2Zyb20sXG4gIC8vIHRvfSBvYmplY3QgYnkgZGVmYXVsdC4gU2lkZSBjYW4gYmUgcGFzc2VkIHRvIGdldCBhIHNwZWNpZmljIHNpZGVcbiAgLy8gLS0gMCAoYm90aCksIC0xIChsZWZ0KSwgb3IgMSAocmlnaHQpLiBXaGVuIGxpbmVPYmogaXMgdHJ1ZSwgdGhlXG4gIC8vIFBvcyBvYmplY3RzIHJldHVybmVkIGNvbnRhaW4gYSBsaW5lIG9iamVjdCwgcmF0aGVyIHRoYW4gYSBsaW5lXG4gIC8vIG51bWJlciAodXNlZCB0byBwcmV2ZW50IGxvb2tpbmcgdXAgdGhlIHNhbWUgbGluZSB0d2ljZSkuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihzaWRlLCBsaW5lT2JqKSB7XG4gICAgaWYgKHNpZGUgPT0gbnVsbCAmJiB0aGlzLnR5cGUgPT0gXCJib29rbWFya1wiKSBzaWRlID0gMTtcbiAgICB2YXIgZnJvbSwgdG87XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICB2YXIgc3BhbiA9IGdldE1hcmtlZFNwYW5Gb3IobGluZS5tYXJrZWRTcGFucywgdGhpcyk7XG4gICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwpIHtcbiAgICAgICAgZnJvbSA9IFBvcyhsaW5lT2JqID8gbGluZSA6IGxpbmVObyhsaW5lKSwgc3Bhbi5mcm9tKTtcbiAgICAgICAgaWYgKHNpZGUgPT0gLTEpIHJldHVybiBmcm9tO1xuICAgICAgfVxuICAgICAgaWYgKHNwYW4udG8gIT0gbnVsbCkge1xuICAgICAgICB0byA9IFBvcyhsaW5lT2JqID8gbGluZSA6IGxpbmVObyhsaW5lKSwgc3Bhbi50byk7XG4gICAgICAgIGlmIChzaWRlID09IDEpIHJldHVybiB0bztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZyb20gJiYge2Zyb206IGZyb20sIHRvOiB0b307XG4gIH07XG5cbiAgLy8gU2lnbmFscyB0aGF0IHRoZSBtYXJrZXIncyB3aWRnZXQgY2hhbmdlZCwgYW5kIHN1cnJvdW5kaW5nIGxheW91dFxuICAvLyBzaG91bGQgYmUgcmVjb21wdXRlZC5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwb3MgPSB0aGlzLmZpbmQoLTEsIHRydWUpLCB3aWRnZXQgPSB0aGlzLCBjbSA9IHRoaXMuZG9jLmNtO1xuICAgIGlmICghcG9zIHx8ICFjbSkgcmV0dXJuO1xuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxpbmUgPSBwb3MubGluZSwgbGluZU4gPSBsaW5lTm8ocG9zLmxpbmUpO1xuICAgICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3Iodmlldyk7XG4gICAgICAgIGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTtcbiAgICAgIGlmICghbGluZUlzSGlkZGVuKHdpZGdldC5kb2MsIGxpbmUpICYmIHdpZGdldC5oZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb2xkSGVpZ2h0ID0gd2lkZ2V0LmhlaWdodDtcbiAgICAgICAgd2lkZ2V0LmhlaWdodCA9IG51bGw7XG4gICAgICAgIHZhciBkSGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHdpZGdldCkgLSBvbGRIZWlnaHQ7XG4gICAgICAgIGlmIChkSGVpZ2h0KVxuICAgICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgbGluZS5oZWlnaHQgKyBkSGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBUZXh0TWFya2VyLnByb3RvdHlwZS5hdHRhY2hMaW5lID0gZnVuY3Rpb24obGluZSkge1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wO1xuICAgICAgaWYgKCFvcC5tYXliZUhpZGRlbk1hcmtlcnMgfHwgaW5kZXhPZihvcC5tYXliZUhpZGRlbk1hcmtlcnMsIHRoaXMpID09IC0xKVxuICAgICAgICAob3AubWF5YmVVbmhpZGRlbk1hcmtlcnMgfHwgKG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmxpbmVzLnB1c2gobGluZSk7XG4gIH07XG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmRldGFjaExpbmUgPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgdGhpcy5saW5lcy5zcGxpY2UoaW5kZXhPZih0aGlzLmxpbmVzLCBsaW5lKSwgMSk7XG4gICAgaWYgKCF0aGlzLmxpbmVzLmxlbmd0aCAmJiB0aGlzLmRvYy5jbSkge1xuICAgICAgdmFyIG9wID0gdGhpcy5kb2MuY20uY3VyT3A7XG4gICAgICAob3AubWF5YmVIaWRkZW5NYXJrZXJzIHx8IChvcC5tYXliZUhpZGRlbk1hcmtlcnMgPSBbXSkpLnB1c2godGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENvbGxhcHNlZCBtYXJrZXJzIGhhdmUgdW5pcXVlIGlkcywgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBvcmRlclxuICAvLyB0aGVtLCB3aGljaCBpcyBuZWVkZWQgZm9yIHVuaXF1ZWx5IGRldGVybWluaW5nIGFuIG91dGVyIG1hcmtlclxuICAvLyB3aGVuIHRoZXkgb3ZlcmxhcCAodGhleSBtYXkgbmVzdCwgYnV0IG5vdCBwYXJ0aWFsbHkgb3ZlcmxhcCkuXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xuXG4gIC8vIENyZWF0ZSBhIG1hcmtlciwgd2lyZSBpdCB1cCB0byB0aGUgcmlnaHQgbGluZXMsIGFuZFxuICBmdW5jdGlvbiBtYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XG4gICAgLy8gU2hhcmVkIG1hcmtlcnMgKGFjcm9zcyBsaW5rZWQgZG9jdW1lbnRzKSBhcmUgaGFuZGxlZCBzZXBhcmF0ZWx5XG4gICAgLy8gKG1hcmtUZXh0U2hhcmVkIHdpbGwgY2FsbCBvdXQgdG8gdGhpcyBhZ2Fpbiwgb25jZSBwZXJcbiAgICAvLyBkb2N1bWVudCkuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zaGFyZWQpIHJldHVybiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKTtcbiAgICAvLyBFbnN1cmUgd2UgYXJlIGluIGFuIG9wZXJhdGlvbi5cbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYXJrVGV4dCkoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSk7XG5cbiAgICB2YXIgbWFya2VyID0gbmV3IFRleHRNYXJrZXIoZG9jLCB0eXBlKSwgZGlmZiA9IGNtcChmcm9tLCB0byk7XG4gICAgaWYgKG9wdGlvbnMpIGNvcHlPYmoob3B0aW9ucywgbWFya2VyLCBmYWxzZSk7XG4gICAgLy8gRG9uJ3QgY29ubmVjdCBlbXB0eSBtYXJrZXJzIHVubGVzcyBjbGVhcldoZW5FbXB0eSBpcyBmYWxzZVxuICAgIGlmIChkaWZmID4gMCB8fCBkaWZmID09IDAgJiYgbWFya2VyLmNsZWFyV2hlbkVtcHR5ICE9PSBmYWxzZSlcbiAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgaWYgKG1hcmtlci5yZXBsYWNlZFdpdGgpIHtcbiAgICAgIC8vIFNob3dpbmcgdXAgYXMgYSB3aWRnZXQgaW1wbGllcyBjb2xsYXBzZWQgKHdpZGdldCByZXBsYWNlcyB0ZXh0KVxuICAgICAgbWFya2VyLmNvbGxhcHNlZCA9IHRydWU7XG4gICAgICBtYXJrZXIud2lkZ2V0Tm9kZSA9IGVsdChcInNwYW5cIiwgW21hcmtlci5yZXBsYWNlZFdpdGhdLCBcIkNvZGVNaXJyb3Itd2lkZ2V0XCIpO1xuICAgICAgaWYgKCFvcHRpb25zLmhhbmRsZU1vdXNlRXZlbnRzKSBtYXJrZXIud2lkZ2V0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIGlmIChvcHRpb25zLmluc2VydExlZnQpIG1hcmtlci53aWRnZXROb2RlLmluc2VydExlZnQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkge1xuICAgICAgaWYgKGNvbmZsaWN0aW5nQ29sbGFwc2VkUmFuZ2UoZG9jLCBmcm9tLmxpbmUsIGZyb20sIHRvLCBtYXJrZXIpIHx8XG4gICAgICAgICAgZnJvbS5saW5lICE9IHRvLmxpbmUgJiYgY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIHRvLmxpbmUsIGZyb20sIHRvLCBtYXJrZXIpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnNlcnRpbmcgY29sbGFwc2VkIG1hcmtlciBwYXJ0aWFsbHkgb3ZlcmxhcHBpbmcgYW4gZXhpc3Rpbmcgb25lXCIpO1xuICAgICAgc2F3Q29sbGFwc2VkU3BhbnMgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIuYWRkVG9IaXN0b3J5KVxuICAgICAgYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywge2Zyb206IGZyb20sIHRvOiB0bywgb3JpZ2luOiBcIm1hcmtUZXh0XCJ9LCBkb2Muc2VsLCBOYU4pO1xuXG4gICAgdmFyIGN1ckxpbmUgPSBmcm9tLmxpbmUsIGNtID0gZG9jLmNtLCB1cGRhdGVNYXhMaW5lO1xuICAgIGRvYy5pdGVyKGN1ckxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAoY20gJiYgbWFya2VyLmNvbGxhcHNlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgdmlzdWFsTGluZShsaW5lKSA9PSBjbS5kaXNwbGF5Lm1heExpbmUpXG4gICAgICAgIHVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQgJiYgY3VyTGluZSAhPSBmcm9tLmxpbmUpIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7XG4gICAgICBhZGRNYXJrZWRTcGFuKGxpbmUsIG5ldyBNYXJrZWRTcGFuKG1hcmtlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluZSA9PSBmcm9tLmxpbmUgPyBmcm9tLmNoIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluZSA9PSB0by5saW5lID8gdG8uY2ggOiBudWxsKSk7XG4gICAgICArK2N1ckxpbmU7XG4gICAgfSk7XG4gICAgLy8gbGluZUlzSGlkZGVuIGRlcGVuZHMgb24gdGhlIHByZXNlbmNlIG9mIHRoZSBzcGFucywgc28gbmVlZHMgYSBzZWNvbmQgcGFzc1xuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAobGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7XG4gICAgfSk7XG5cbiAgICBpZiAobWFya2VyLmNsZWFyT25FbnRlcikgb24obWFya2VyLCBcImJlZm9yZUN1cnNvckVudGVyXCIsIGZ1bmN0aW9uKCkgeyBtYXJrZXIuY2xlYXIoKTsgfSk7XG5cbiAgICBpZiAobWFya2VyLnJlYWRPbmx5KSB7XG4gICAgICBzYXdSZWFkT25seVNwYW5zID0gdHJ1ZTtcbiAgICAgIGlmIChkb2MuaGlzdG9yeS5kb25lLmxlbmd0aCB8fCBkb2MuaGlzdG9yeS51bmRvbmUubGVuZ3RoKVxuICAgICAgICBkb2MuY2xlYXJIaXN0b3J5KCk7XG4gICAgfVxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSB7XG4gICAgICBtYXJrZXIuaWQgPSArK25leHRNYXJrZXJJZDtcbiAgICAgIG1hcmtlci5hdG9taWMgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY20pIHtcbiAgICAgIC8vIFN5bmMgZWRpdG9yIHN0YXRlXG4gICAgICBpZiAodXBkYXRlTWF4TGluZSkgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7XG4gICAgICBpZiAobWFya2VyLmNvbGxhcHNlZClcbiAgICAgICAgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxKTtcbiAgICAgIGVsc2UgaWYgKG1hcmtlci5jbGFzc05hbWUgfHwgbWFya2VyLnRpdGxlIHx8IG1hcmtlci5zdGFydFN0eWxlIHx8IG1hcmtlci5lbmRTdHlsZSB8fCBtYXJrZXIuY3NzKVxuICAgICAgICBmb3IgKHZhciBpID0gZnJvbS5saW5lOyBpIDw9IHRvLmxpbmU7IGkrKykgcmVnTGluZUNoYW5nZShjbSwgaSwgXCJ0ZXh0XCIpO1xuICAgICAgaWYgKG1hcmtlci5hdG9taWMpIHJlQ2hlY2tTZWxlY3Rpb24oY20uZG9jKTtcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckFkZGVkXCIsIGNtLCBtYXJrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG5cbiAgLy8gU0hBUkVEIFRFWFRNQVJLRVJTXG5cbiAgLy8gQSBzaGFyZWQgbWFya2VyIHNwYW5zIG11bHRpcGxlIGxpbmtlZCBkb2N1bWVudHMuIEl0IGlzXG4gIC8vIGltcGxlbWVudGVkIGFzIGEgbWV0YS1tYXJrZXItb2JqZWN0IGNvbnRyb2xsaW5nIG11bHRpcGxlIG5vcm1hbFxuICAvLyBtYXJrZXJzLlxuICB2YXIgU2hhcmVkVGV4dE1hcmtlciA9IENvZGVNaXJyb3IuU2hhcmVkVGV4dE1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlcnMsIHByaW1hcnkpIHtcbiAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgIHRoaXMucHJpbWFyeSA9IHByaW1hcnk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKVxuICAgICAgbWFya2Vyc1tpXS5wYXJlbnQgPSB0aGlzO1xuICB9O1xuICBldmVudE1peGluKFNoYXJlZFRleHRNYXJrZXIpO1xuXG4gIFNoYXJlZFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZXhwbGljaXRseUNsZWFyZWQpIHJldHVybjtcbiAgICB0aGlzLmV4cGxpY2l0bHlDbGVhcmVkID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7ICsraSlcbiAgICAgIHRoaXMubWFya2Vyc1tpXS5jbGVhcigpO1xuICAgIHNpZ25hbExhdGVyKHRoaXMsIFwiY2xlYXJcIik7XG4gIH07XG4gIFNoYXJlZFRleHRNYXJrZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihzaWRlLCBsaW5lT2JqKSB7XG4gICAgcmV0dXJuIHRoaXMucHJpbWFyeS5maW5kKHNpZGUsIGxpbmVPYmopO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1hcmtUZXh0U2hhcmVkKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpIHtcbiAgICBvcHRpb25zID0gY29weU9iaihvcHRpb25zKTtcbiAgICBvcHRpb25zLnNoYXJlZCA9IGZhbHNlO1xuICAgIHZhciBtYXJrZXJzID0gW21hcmtUZXh0KGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpXSwgcHJpbWFyeSA9IG1hcmtlcnNbMF07XG4gICAgdmFyIHdpZGdldCA9IG9wdGlvbnMud2lkZ2V0Tm9kZTtcbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jKSB7XG4gICAgICBpZiAod2lkZ2V0KSBvcHRpb25zLndpZGdldE5vZGUgPSB3aWRnZXQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgbWFya2Vycy5wdXNoKG1hcmtUZXh0KGRvYywgY2xpcFBvcyhkb2MsIGZyb20pLCBjbGlwUG9zKGRvYywgdG8pLCBvcHRpb25zLCB0eXBlKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpXG4gICAgICAgIGlmIChkb2MubGlua2VkW2ldLmlzUGFyZW50KSByZXR1cm47XG4gICAgICBwcmltYXJ5ID0gbHN0KG1hcmtlcnMpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXcgU2hhcmVkVGV4dE1hcmtlcihtYXJrZXJzLCBwcmltYXJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRTaGFyZWRNYXJrZXJzKGRvYykge1xuICAgIHJldHVybiBkb2MuZmluZE1hcmtzKFBvcyhkb2MuZmlyc3QsIDApLCBkb2MuY2xpcFBvcyhQb3MoZG9jLmxhc3RMaW5lKCkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihtKSB7IHJldHVybiBtLnBhcmVudDsgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5U2hhcmVkTWFya2Vycyhkb2MsIG1hcmtlcnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXJrZXIgPSBtYXJrZXJzW2ldLCBwb3MgPSBtYXJrZXIuZmluZCgpO1xuICAgICAgdmFyIG1Gcm9tID0gZG9jLmNsaXBQb3MocG9zLmZyb20pLCBtVG8gPSBkb2MuY2xpcFBvcyhwb3MudG8pO1xuICAgICAgaWYgKGNtcChtRnJvbSwgbVRvKSkge1xuICAgICAgICB2YXIgc3ViTWFyayA9IG1hcmtUZXh0KGRvYywgbUZyb20sIG1UbywgbWFya2VyLnByaW1hcnksIG1hcmtlci5wcmltYXJ5LnR5cGUpO1xuICAgICAgICBtYXJrZXIubWFya2Vycy5wdXNoKHN1Yk1hcmspO1xuICAgICAgICBzdWJNYXJrLnBhcmVudCA9IG1hcmtlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXRhY2hTaGFyZWRNYXJrZXJzKG1hcmtlcnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXJrZXIgPSBtYXJrZXJzW2ldLCBsaW5rZWQgPSBbbWFya2VyLnByaW1hcnkuZG9jXTs7XG4gICAgICBsaW5rZWREb2NzKG1hcmtlci5wcmltYXJ5LmRvYywgZnVuY3Rpb24oZCkgeyBsaW5rZWQucHVzaChkKTsgfSk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hcmtlci5tYXJrZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBzdWJNYXJrZXIgPSBtYXJrZXIubWFya2Vyc1tqXTtcbiAgICAgICAgaWYgKGluZGV4T2YobGlua2VkLCBzdWJNYXJrZXIuZG9jKSA9PSAtMSkge1xuICAgICAgICAgIHN1Yk1hcmtlci5wYXJlbnQgPSBudWxsO1xuICAgICAgICAgIG1hcmtlci5tYXJrZXJzLnNwbGljZShqLS0sIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVEVYVE1BUktFUiBTUEFOU1xuXG4gIGZ1bmN0aW9uIE1hcmtlZFNwYW4obWFya2VyLCBmcm9tLCB0bykge1xuICAgIHRoaXMubWFya2VyID0gbWFya2VyO1xuICAgIHRoaXMuZnJvbSA9IGZyb207IHRoaXMudG8gPSB0bztcbiAgfVxuXG4gIC8vIFNlYXJjaCBhbiBhcnJheSBvZiBzcGFucyBmb3IgYSBzcGFuIG1hdGNoaW5nIHRoZSBnaXZlbiBtYXJrZXIuXG4gIGZ1bmN0aW9uIGdldE1hcmtlZFNwYW5Gb3Ioc3BhbnMsIG1hcmtlcikge1xuICAgIGlmIChzcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmIChzcGFuLm1hcmtlciA9PSBtYXJrZXIpIHJldHVybiBzcGFuO1xuICAgIH1cbiAgfVxuICAvLyBSZW1vdmUgYSBzcGFuIGZyb20gYW4gYXJyYXksIHJldHVybmluZyB1bmRlZmluZWQgaWYgbm8gc3BhbnMgYXJlXG4gIC8vIGxlZnQgKHdlIGRvbid0IHN0b3JlIGFycmF5cyBmb3IgbGluZXMgd2l0aG91dCBzcGFucykuXG4gIGZ1bmN0aW9uIHJlbW92ZU1hcmtlZFNwYW4oc3BhbnMsIHNwYW4pIHtcbiAgICBmb3IgKHZhciByLCBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKVxuICAgICAgaWYgKHNwYW5zW2ldICE9IHNwYW4pIChyIHx8IChyID0gW10pKS5wdXNoKHNwYW5zW2ldKTtcbiAgICByZXR1cm4gcjtcbiAgfVxuICAvLyBBZGQgYSBzcGFuIHRvIGEgbGluZS5cbiAgZnVuY3Rpb24gYWRkTWFya2VkU3BhbihsaW5lLCBzcGFuKSB7XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IGxpbmUubWFya2VkU3BhbnMgPyBsaW5lLm1hcmtlZFNwYW5zLmNvbmNhdChbc3Bhbl0pIDogW3NwYW5dO1xuICAgIHNwYW4ubWFya2VyLmF0dGFjaExpbmUobGluZSk7XG4gIH1cblxuICAvLyBVc2VkIGZvciB0aGUgYWxnb3JpdGhtIHRoYXQgYWRqdXN0cyBtYXJrZXJzIGZvciBhIGNoYW5nZSBpbiB0aGVcbiAgLy8gZG9jdW1lbnQuIFRoZXNlIGZ1bmN0aW9ucyBjdXQgYW4gYXJyYXkgb2Ygc3BhbnMgYXQgYSBnaXZlblxuICAvLyBjaGFyYWN0ZXIgcG9zaXRpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiByZW1haW5pbmcgY2h1bmtzIChvclxuICAvLyB1bmRlZmluZWQgaWYgbm90aGluZyByZW1haW5zKS5cbiAgZnVuY3Rpb24gbWFya2VkU3BhbnNCZWZvcmUob2xkLCBzdGFydENoLCBpc0luc2VydCkge1xuICAgIGlmIChvbGQpIGZvciAodmFyIGkgPSAwLCBudzsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBvbGRbaV0sIG1hcmtlciA9IHNwYW4ubWFya2VyO1xuICAgICAgdmFyIHN0YXJ0c0JlZm9yZSA9IHNwYW4uZnJvbSA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IHNwYW4uZnJvbSA8PSBzdGFydENoIDogc3Bhbi5mcm9tIDwgc3RhcnRDaCk7XG4gICAgICBpZiAoc3RhcnRzQmVmb3JlIHx8IHNwYW4uZnJvbSA9PSBzdGFydENoICYmIG1hcmtlci50eXBlID09IFwiYm9va21hcmtcIiAmJiAoIWlzSW5zZXJ0IHx8ICFzcGFuLm1hcmtlci5pbnNlcnRMZWZ0KSkge1xuICAgICAgICB2YXIgZW5kc0FmdGVyID0gc3Bhbi50byA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyBzcGFuLnRvID49IHN0YXJ0Q2ggOiBzcGFuLnRvID4gc3RhcnRDaCk7XG4gICAgICAgIChudyB8fCAobncgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4obWFya2VyLCBzcGFuLmZyb20sIGVuZHNBZnRlciA/IG51bGwgOiBzcGFuLnRvKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudztcbiAgfVxuICBmdW5jdGlvbiBtYXJrZWRTcGFuc0FmdGVyKG9sZCwgZW5kQ2gsIGlzSW5zZXJ0KSB7XG4gICAgaWYgKG9sZCkgZm9yICh2YXIgaSA9IDAsIG53OyBpIDwgb2xkLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IG9sZFtpXSwgbWFya2VyID0gc3Bhbi5tYXJrZXI7XG4gICAgICB2YXIgZW5kc0FmdGVyID0gc3Bhbi50byA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyBzcGFuLnRvID49IGVuZENoIDogc3Bhbi50byA+IGVuZENoKTtcbiAgICAgIGlmIChlbmRzQWZ0ZXIgfHwgc3Bhbi5mcm9tID09IGVuZENoICYmIG1hcmtlci50eXBlID09IFwiYm9va21hcmtcIiAmJiAoIWlzSW5zZXJ0IHx8IHNwYW4ubWFya2VyLmluc2VydExlZnQpKSB7XG4gICAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gZW5kQ2ggOiBzcGFuLmZyb20gPCBlbmRDaCk7XG4gICAgICAgIChudyB8fCAobncgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4obWFya2VyLCBzdGFydHNCZWZvcmUgPyBudWxsIDogc3Bhbi5mcm9tIC0gZW5kQ2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi50byA9PSBudWxsID8gbnVsbCA6IHNwYW4udG8gLSBlbmRDaCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnc7XG4gIH1cblxuICAvLyBHaXZlbiBhIGNoYW5nZSBvYmplY3QsIGNvbXB1dGUgdGhlIG5ldyBzZXQgb2YgbWFya2VyIHNwYW5zIHRoYXRcbiAgLy8gY292ZXIgdGhlIGxpbmUgaW4gd2hpY2ggdGhlIGNoYW5nZSB0b29rIHBsYWNlLiBSZW1vdmVzIHNwYW5zXG4gIC8vIGVudGlyZWx5IHdpdGhpbiB0aGUgY2hhbmdlLCByZWNvbm5lY3RzIHNwYW5zIGJlbG9uZ2luZyB0byB0aGVcbiAgLy8gc2FtZSBtYXJrZXIgdGhhdCBhcHBlYXIgb24gYm90aCBzaWRlcyBvZiB0aGUgY2hhbmdlLCBhbmQgY3V0cyBvZmZcbiAgLy8gc3BhbnMgcGFydGlhbGx5IHdpdGhpbiB0aGUgY2hhbmdlLiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwYW5cbiAgLy8gYXJyYXlzIHdpdGggb25lIGVsZW1lbnQgZm9yIGVhY2ggbGluZSBpbiAoYWZ0ZXIpIHRoZSBjaGFuZ2UuXG4gIGZ1bmN0aW9uIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHJldHVybiBudWxsO1xuICAgIHZhciBvbGRGaXJzdCA9IGlzTGluZShkb2MsIGNoYW5nZS5mcm9tLmxpbmUpICYmIGdldExpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKS5tYXJrZWRTcGFucztcbiAgICB2YXIgb2xkTGFzdCA9IGlzTGluZShkb2MsIGNoYW5nZS50by5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLnRvLmxpbmUpLm1hcmtlZFNwYW5zO1xuICAgIGlmICghb2xkRmlyc3QgJiYgIW9sZExhc3QpIHJldHVybiBudWxsO1xuXG4gICAgdmFyIHN0YXJ0Q2ggPSBjaGFuZ2UuZnJvbS5jaCwgZW5kQ2ggPSBjaGFuZ2UudG8uY2gsIGlzSW5zZXJ0ID0gY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDA7XG4gICAgLy8gR2V0IHRoZSBzcGFucyB0aGF0ICdzdGljayBvdXQnIG9uIGJvdGggc2lkZXNcbiAgICB2YXIgZmlyc3QgPSBtYXJrZWRTcGFuc0JlZm9yZShvbGRGaXJzdCwgc3RhcnRDaCwgaXNJbnNlcnQpO1xuICAgIHZhciBsYXN0ID0gbWFya2VkU3BhbnNBZnRlcihvbGRMYXN0LCBlbmRDaCwgaXNJbnNlcnQpO1xuXG4gICAgLy8gTmV4dCwgbWVyZ2UgdGhvc2UgdHdvIGVuZHNcbiAgICB2YXIgc2FtZUxpbmUgPSBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSwgb2Zmc2V0ID0gbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoc2FtZUxpbmUgPyBzdGFydENoIDogMCk7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICAvLyBGaXggdXAgLnRvIHByb3BlcnRpZXMgb2YgZmlyc3RcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBmaXJzdFtpXTtcbiAgICAgICAgaWYgKHNwYW4udG8gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IobGFzdCwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICAgIGlmICghZm91bmQpIHNwYW4udG8gPSBzdGFydENoO1xuICAgICAgICAgIGVsc2UgaWYgKHNhbWVMaW5lKSBzcGFuLnRvID0gZm91bmQudG8gPT0gbnVsbCA/IG51bGwgOiBmb3VuZC50byArIG9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFzdCkge1xuICAgICAgLy8gRml4IHVwIC5mcm9tIGluIGxhc3QgKG9yIG1vdmUgdGhlbSBpbnRvIGZpcnN0IGluIGNhc2Ugb2Ygc2FtZUxpbmUpXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBsYXN0W2ldO1xuICAgICAgICBpZiAoc3Bhbi50byAhPSBudWxsKSBzcGFuLnRvICs9IG9mZnNldDtcbiAgICAgICAgaWYgKHNwYW4uZnJvbSA9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gZ2V0TWFya2VkU3BhbkZvcihmaXJzdCwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgIHNwYW4uZnJvbSA9IG9mZnNldDtcbiAgICAgICAgICAgIGlmIChzYW1lTGluZSkgKGZpcnN0IHx8IChmaXJzdCA9IFtdKSkucHVzaChzcGFuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3Bhbi5mcm9tICs9IG9mZnNldDtcbiAgICAgICAgICBpZiAoc2FtZUxpbmUpIChmaXJzdCB8fCAoZmlyc3QgPSBbXSkpLnB1c2goc3Bhbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIHdlIGRpZG4ndCBjcmVhdGUgYW55IHplcm8tbGVuZ3RoIHNwYW5zXG4gICAgaWYgKGZpcnN0KSBmaXJzdCA9IGNsZWFyRW1wdHlTcGFucyhmaXJzdCk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdCAhPSBmaXJzdCkgbGFzdCA9IGNsZWFyRW1wdHlTcGFucyhsYXN0KTtcblxuICAgIHZhciBuZXdNYXJrZXJzID0gW2ZpcnN0XTtcbiAgICBpZiAoIXNhbWVMaW5lKSB7XG4gICAgICAvLyBGaWxsIGdhcCB3aXRoIHdob2xlLWxpbmUtc3BhbnNcbiAgICAgIHZhciBnYXAgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAyLCBnYXBNYXJrZXJzO1xuICAgICAgaWYgKGdhcCA+IDAgJiYgZmlyc3QpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpXG4gICAgICAgICAgaWYgKGZpcnN0W2ldLnRvID09IG51bGwpXG4gICAgICAgICAgICAoZ2FwTWFya2VycyB8fCAoZ2FwTWFya2VycyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihmaXJzdFtpXS5tYXJrZXIsIG51bGwsIG51bGwpKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FwOyArK2kpXG4gICAgICAgIG5ld01hcmtlcnMucHVzaChnYXBNYXJrZXJzKTtcbiAgICAgIG5ld01hcmtlcnMucHVzaChsYXN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld01hcmtlcnM7XG4gIH1cblxuICAvLyBSZW1vdmUgc3BhbnMgdGhhdCBhcmUgZW1wdHkgYW5kIGRvbid0IGhhdmUgYSBjbGVhcldoZW5FbXB0eVxuICAvLyBvcHRpb24gb2YgZmFsc2UuXG4gIGZ1bmN0aW9uIGNsZWFyRW1wdHlTcGFucyhzcGFucykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwgJiYgc3Bhbi5mcm9tID09IHNwYW4udG8gJiYgc3Bhbi5tYXJrZXIuY2xlYXJXaGVuRW1wdHkgIT09IGZhbHNlKVxuICAgICAgICBzcGFucy5zcGxpY2UoaS0tLCAxKTtcbiAgICB9XG4gICAgaWYgKCFzcGFucy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBzcGFucztcbiAgfVxuXG4gIC8vIFVzZWQgZm9yIHVuL3JlLWRvaW5nIGNoYW5nZXMgZnJvbSB0aGUgaGlzdG9yeS4gQ29tYmluZXMgdGhlXG4gIC8vIHJlc3VsdCBvZiBjb21wdXRpbmcgdGhlIGV4aXN0aW5nIHNwYW5zIHdpdGggdGhlIHNldCBvZiBzcGFucyB0aGF0XG4gIC8vIGV4aXN0ZWQgaW4gdGhlIGhpc3RvcnkgKHNvIHRoYXQgZGVsZXRpbmcgYXJvdW5kIGEgc3BhbiBhbmQgdGhlblxuICAvLyB1bmRvaW5nIGJyaW5ncyBiYWNrIHRoZSBzcGFuKS5cbiAgZnVuY3Rpb24gbWVyZ2VPbGRTcGFucyhkb2MsIGNoYW5nZSkge1xuICAgIHZhciBvbGQgPSBnZXRPbGRTcGFucyhkb2MsIGNoYW5nZSk7XG4gICAgdmFyIHN0cmV0Y2hlZCA9IHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGlmICghb2xkKSByZXR1cm4gc3RyZXRjaGVkO1xuICAgIGlmICghc3RyZXRjaGVkKSByZXR1cm4gb2xkO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBvbGRDdXIgPSBvbGRbaV0sIHN0cmV0Y2hDdXIgPSBzdHJldGNoZWRbaV07XG4gICAgICBpZiAob2xkQ3VyICYmIHN0cmV0Y2hDdXIpIHtcbiAgICAgICAgc3BhbnM6IGZvciAodmFyIGogPSAwOyBqIDwgc3RyZXRjaEN1ci5sZW5ndGg7ICsraikge1xuICAgICAgICAgIHZhciBzcGFuID0gc3RyZXRjaEN1cltqXTtcbiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9sZEN1ci5sZW5ndGg7ICsraylcbiAgICAgICAgICAgIGlmIChvbGRDdXJba10ubWFya2VyID09IHNwYW4ubWFya2VyKSBjb250aW51ZSBzcGFucztcbiAgICAgICAgICBvbGRDdXIucHVzaChzcGFuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJldGNoQ3VyKSB7XG4gICAgICAgIG9sZFtpXSA9IHN0cmV0Y2hDdXI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvbGQ7XG4gIH1cblxuICAvLyBVc2VkIHRvICdjbGlwJyBvdXQgcmVhZE9ubHkgcmFuZ2VzIHdoZW4gbWFraW5nIGEgY2hhbmdlLlxuICBmdW5jdGlvbiByZW1vdmVSZWFkT25seVJhbmdlcyhkb2MsIGZyb20sIHRvKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBudWxsO1xuICAgIGRvYy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIG1hcmsgPSBsaW5lLm1hcmtlZFNwYW5zW2ldLm1hcmtlcjtcbiAgICAgICAgaWYgKG1hcmsucmVhZE9ubHkgJiYgKCFtYXJrZXJzIHx8IGluZGV4T2YobWFya2VycywgbWFyaykgPT0gLTEpKVxuICAgICAgICAgIChtYXJrZXJzIHx8IChtYXJrZXJzID0gW10pKS5wdXNoKG1hcmspO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghbWFya2VycykgcmV0dXJuIG51bGw7XG4gICAgdmFyIHBhcnRzID0gW3tmcm9tOiBmcm9tLCB0bzogdG99XTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBtayA9IG1hcmtlcnNbaV0sIG0gPSBtay5maW5kKDApO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgcCA9IHBhcnRzW2pdO1xuICAgICAgICBpZiAoY21wKHAudG8sIG0uZnJvbSkgPCAwIHx8IGNtcChwLmZyb20sIG0udG8pID4gMCkgY29udGludWU7XG4gICAgICAgIHZhciBuZXdQYXJ0cyA9IFtqLCAxXSwgZGZyb20gPSBjbXAocC5mcm9tLCBtLmZyb20pLCBkdG8gPSBjbXAocC50bywgbS50byk7XG4gICAgICAgIGlmIChkZnJvbSA8IDAgfHwgIW1rLmluY2x1c2l2ZUxlZnQgJiYgIWRmcm9tKVxuICAgICAgICAgIG5ld1BhcnRzLnB1c2goe2Zyb206IHAuZnJvbSwgdG86IG0uZnJvbX0pO1xuICAgICAgICBpZiAoZHRvID4gMCB8fCAhbWsuaW5jbHVzaXZlUmlnaHQgJiYgIWR0bylcbiAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHtmcm9tOiBtLnRvLCB0bzogcC50b30pO1xuICAgICAgICBwYXJ0cy5zcGxpY2UuYXBwbHkocGFydHMsIG5ld1BhcnRzKTtcbiAgICAgICAgaiArPSBuZXdQYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFydHM7XG4gIH1cblxuICAvLyBDb25uZWN0IG9yIGRpc2Nvbm5lY3Qgc3BhbnMgZnJvbSBhIGxpbmUuXG4gIGZ1bmN0aW9uIGRldGFjaE1hcmtlZFNwYW5zKGxpbmUpIHtcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgIGlmICghc3BhbnMpIHJldHVybjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKVxuICAgICAgc3BhbnNbaV0ubWFya2VyLmRldGFjaExpbmUobGluZSk7XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gYXR0YWNoTWFya2VkU3BhbnMobGluZSwgc3BhbnMpIHtcbiAgICBpZiAoIXNwYW5zKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIHNwYW5zW2ldLm1hcmtlci5hdHRhY2hMaW5lKGxpbmUpO1xuICAgIGxpbmUubWFya2VkU3BhbnMgPSBzcGFucztcbiAgfVxuXG4gIC8vIEhlbHBlcnMgdXNlZCB3aGVuIGNvbXB1dGluZyB3aGljaCBvdmVybGFwcGluZyBjb2xsYXBzZWQgc3BhblxuICAvLyBjb3VudHMgYXMgdGhlIGxhcmdlciBvbmUuXG4gIGZ1bmN0aW9uIGV4dHJhTGVmdChtYXJrZXIpIHsgcmV0dXJuIG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gLTEgOiAwOyB9XG4gIGZ1bmN0aW9uIGV4dHJhUmlnaHQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyAxIDogMDsgfVxuXG4gIC8vIFJldHVybnMgYSBudW1iZXIgaW5kaWNhdGluZyB3aGljaCBvZiB0d28gb3ZlcmxhcHBpbmcgY29sbGFwc2VkXG4gIC8vIHNwYW5zIGlzIGxhcmdlciAoYW5kIHRodXMgaW5jbHVkZXMgdGhlIG90aGVyKS4gRmFsbHMgYmFjayB0b1xuICAvLyBjb21wYXJpbmcgaWRzIHdoZW4gdGhlIHNwYW5zIGNvdmVyIGV4YWN0bHkgdGhlIHNhbWUgcmFuZ2UuXG4gIGZ1bmN0aW9uIGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGEsIGIpIHtcbiAgICB2YXIgbGVuRGlmZiA9IGEubGluZXMubGVuZ3RoIC0gYi5saW5lcy5sZW5ndGg7XG4gICAgaWYgKGxlbkRpZmYgIT0gMCkgcmV0dXJuIGxlbkRpZmY7XG4gICAgdmFyIGFQb3MgPSBhLmZpbmQoKSwgYlBvcyA9IGIuZmluZCgpO1xuICAgIHZhciBmcm9tQ21wID0gY21wKGFQb3MuZnJvbSwgYlBvcy5mcm9tKSB8fCBleHRyYUxlZnQoYSkgLSBleHRyYUxlZnQoYik7XG4gICAgaWYgKGZyb21DbXApIHJldHVybiAtZnJvbUNtcDtcbiAgICB2YXIgdG9DbXAgPSBjbXAoYVBvcy50bywgYlBvcy50bykgfHwgZXh0cmFSaWdodChhKSAtIGV4dHJhUmlnaHQoYik7XG4gICAgaWYgKHRvQ21wKSByZXR1cm4gdG9DbXA7XG4gICAgcmV0dXJuIGIuaWQgLSBhLmlkO1xuICB9XG5cbiAgLy8gRmluZCBvdXQgd2hldGhlciBhIGxpbmUgZW5kcyBvciBzdGFydHMgaW4gYSBjb2xsYXBzZWQgc3Bhbi4gSWZcbiAgLy8gc28sIHJldHVybiB0aGUgbWFya2VyIGZvciB0aGF0IHNwYW4uXG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdFNpZGUobGluZSwgc3RhcnQpIHtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucywgZm91bmQ7XG4gICAgaWYgKHNwcykgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzcCA9IHNwc1tpXTtcbiAgICAgIGlmIChzcC5tYXJrZXIuY29sbGFwc2VkICYmIChzdGFydCA/IHNwLmZyb20gOiBzcC50bykgPT0gbnVsbCAmJlxuICAgICAgICAgICghZm91bmQgfHwgY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoZm91bmQsIHNwLm1hcmtlcikgPCAwKSlcbiAgICAgICAgZm91bmQgPSBzcC5tYXJrZXI7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRTdGFydChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIHRydWUpOyB9XG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIGZhbHNlKTsgfVxuXG4gIC8vIFRlc3Qgd2hldGhlciB0aGVyZSBleGlzdHMgYSBjb2xsYXBzZWQgc3BhbiB0aGF0IHBhcnRpYWxseVxuICAvLyBvdmVybGFwcyAoY292ZXJzIHRoZSBzdGFydCBvciBlbmQsIGJ1dCBub3QgYm90aCkgb2YgYSBuZXcgc3Bhbi5cbiAgLy8gU3VjaCBvdmVybGFwIGlzIG5vdCBhbGxvd2VkLlxuICBmdW5jdGlvbiBjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgbGluZU5vLCBmcm9tLCB0bywgbWFya2VyKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU5vKTtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwID0gc3BzW2ldO1xuICAgICAgaWYgKCFzcC5tYXJrZXIuY29sbGFwc2VkKSBjb250aW51ZTtcbiAgICAgIHZhciBmb3VuZCA9IHNwLm1hcmtlci5maW5kKDApO1xuICAgICAgdmFyIGZyb21DbXAgPSBjbXAoZm91bmQuZnJvbSwgZnJvbSkgfHwgZXh0cmFMZWZ0KHNwLm1hcmtlcikgLSBleHRyYUxlZnQobWFya2VyKTtcbiAgICAgIHZhciB0b0NtcCA9IGNtcChmb3VuZC50bywgdG8pIHx8IGV4dHJhUmlnaHQoc3AubWFya2VyKSAtIGV4dHJhUmlnaHQobWFya2VyKTtcbiAgICAgIGlmIChmcm9tQ21wID49IDAgJiYgdG9DbXAgPD0gMCB8fCBmcm9tQ21wIDw9IDAgJiYgdG9DbXAgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoZnJvbUNtcCA8PSAwICYmIChjbXAoZm91bmQudG8sIGZyb20pID4gMCB8fCAoc3AubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIG1hcmtlci5pbmNsdXNpdmVMZWZ0KSkgfHxcbiAgICAgICAgICBmcm9tQ21wID49IDAgJiYgKGNtcChmb3VuZC5mcm9tLCB0bykgPCAwIHx8IChzcC5tYXJrZXIuaW5jbHVzaXZlTGVmdCAmJiBtYXJrZXIuaW5jbHVzaXZlUmlnaHQpKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8gQSB2aXN1YWwgbGluZSBpcyBhIGxpbmUgYXMgZHJhd24gb24gdGhlIHNjcmVlbi4gRm9sZGluZywgZm9yXG4gIC8vIGV4YW1wbGUsIGNhbiBjYXVzZSBtdWx0aXBsZSBsb2dpY2FsIGxpbmVzIHRvIGFwcGVhciBvbiB0aGUgc2FtZVxuICAvLyB2aXN1YWwgbGluZS4gVGhpcyBmaW5kcyB0aGUgc3RhcnQgb2YgdGhlIHZpc3VhbCBsaW5lIHRoYXQgdGhlXG4gIC8vIGdpdmVuIGxpbmUgaXMgcGFydCBvZiAodXN1YWxseSB0aGF0IGlzIHRoZSBsaW5lIGl0c2VsZikuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmUobGluZSkge1xuICAgIHZhciBtZXJnZWQ7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdFN0YXJ0KGxpbmUpKVxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKC0xLCB0cnVlKS5saW5lO1xuICAgIHJldHVybiBsaW5lO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBhcnJheSBvZiBsb2dpY2FsIGxpbmVzIHRoYXQgY29udGludWUgdGhlIHZpc3VhbCBsaW5lXG4gIC8vIHN0YXJ0ZWQgYnkgdGhlIGFyZ3VtZW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggbGluZXMuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVDb250aW51ZWQobGluZSkge1xuICAgIHZhciBtZXJnZWQsIGxpbmVzO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lO1xuICAgICAgKGxpbmVzIHx8IChsaW5lcyA9IFtdKSkucHVzaChsaW5lKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhlIHZpc3VhbCBsaW5lIHRoYXQgdGhlXG4gIC8vIGdpdmVuIGxpbmUgbnVtYmVyIGlzIHBhcnQgb2YuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVObyhkb2MsIGxpbmVOKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU4pLCB2aXMgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIGlmIChsaW5lID09IHZpcykgcmV0dXJuIGxpbmVOO1xuICAgIHJldHVybiBsaW5lTm8odmlzKTtcbiAgfVxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgbmV4dCB2aXN1YWwgbGluZSBhZnRlclxuICAvLyB0aGUgZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gdmlzdWFsTGluZUVuZE5vKGRvYywgbGluZU4pIHtcbiAgICBpZiAobGluZU4gPiBkb2MubGFzdExpbmUoKSkgcmV0dXJuIGxpbmVOO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgbWVyZ2VkO1xuICAgIGlmICghbGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHJldHVybiBsaW5lTjtcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKVxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XG4gICAgcmV0dXJuIGxpbmVObyhsaW5lKSArIDE7XG4gIH1cblxuICAvLyBDb21wdXRlIHdoZXRoZXIgYSBsaW5lIGlzIGhpZGRlbi4gTGluZXMgY291bnQgYXMgaGlkZGVuIHdoZW4gdGhleVxuICAvLyBhcmUgcGFydCBvZiBhIHZpc3VhbCBsaW5lIHRoYXQgc3RhcnRzIHdpdGggYW5vdGhlciBsaW5lLCBvciB3aGVuXG4gIC8vIHRoZXkgYXJlIGVudGlyZWx5IGNvdmVyZWQgYnkgY29sbGFwc2VkLCBub24td2lkZ2V0IHNwYW4uXG4gIGZ1bmN0aW9uIGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpIHtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSBmb3IgKHZhciBzcCwgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gc3BzW2ldO1xuICAgICAgaWYgKCFzcC5tYXJrZXIuY29sbGFwc2VkKSBjb250aW51ZTtcbiAgICAgIGlmIChzcC5mcm9tID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHNwLm1hcmtlci53aWRnZXROb2RlKSBjb250aW51ZTtcbiAgICAgIGlmIChzcC5mcm9tID09IDAgJiYgc3AubWFya2VyLmluY2x1c2l2ZUxlZnQgJiYgbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGxpbmUsIHNwYW4pIHtcbiAgICBpZiAoc3Bhbi50byA9PSBudWxsKSB7XG4gICAgICB2YXIgZW5kID0gc3Bhbi5tYXJrZXIuZmluZCgxLCB0cnVlKTtcbiAgICAgIHJldHVybiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGVuZC5saW5lLCBnZXRNYXJrZWRTcGFuRm9yKGVuZC5saW5lLm1hcmtlZFNwYW5zLCBzcGFuLm1hcmtlcikpO1xuICAgIH1cbiAgICBpZiAoc3Bhbi5tYXJrZXIuaW5jbHVzaXZlUmlnaHQgJiYgc3Bhbi50byA9PSBsaW5lLnRleHQubGVuZ3RoKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRTcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgc3AgPSBsaW5lLm1hcmtlZFNwYW5zW2ldO1xuICAgICAgaWYgKHNwLm1hcmtlci5jb2xsYXBzZWQgJiYgIXNwLm1hcmtlci53aWRnZXROb2RlICYmIHNwLmZyb20gPT0gc3Bhbi50byAmJlxuICAgICAgICAgIChzcC50byA9PSBudWxsIHx8IHNwLnRvICE9IHNwYW4uZnJvbSkgJiZcbiAgICAgICAgICAoc3AubWFya2VyLmluY2x1c2l2ZUxlZnQgfHwgc3Bhbi5tYXJrZXIuaW5jbHVzaXZlUmlnaHQpICYmXG4gICAgICAgICAgbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcCkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIExJTkUgV0lER0VUU1xuXG4gIC8vIExpbmUgd2lkZ2V0cyBhcmUgYmxvY2sgZWxlbWVudHMgZGlzcGxheWVkIGFib3ZlIG9yIGJlbG93IGEgbGluZS5cblxuICB2YXIgTGluZVdpZGdldCA9IENvZGVNaXJyb3IuTGluZVdpZGdldCA9IGZ1bmN0aW9uKGRvYywgbm9kZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zKSBmb3IgKHZhciBvcHQgaW4gb3B0aW9ucykgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIHRoaXNbb3B0XSA9IG9wdGlvbnNbb3B0XTtcbiAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB0aGlzLm5vZGUgPSBub2RlO1xuICB9O1xuICBldmVudE1peGluKExpbmVXaWRnZXQpO1xuXG4gIGZ1bmN0aW9uIGFkanVzdFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIGRpZmYpIHtcbiAgICBpZiAoaGVpZ2h0QXRMaW5lKGxpbmUpIDwgKChjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxUb3ApIHx8IGNtLmRvYy5zY3JvbGxUb3ApKVxuICAgICAgYWRkVG9TY3JvbGxQb3MoY20sIG51bGwsIGRpZmYpO1xuICB9XG5cbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY20gPSB0aGlzLmRvYy5jbSwgd3MgPSB0aGlzLmxpbmUud2lkZ2V0cywgbGluZSA9IHRoaXMubGluZSwgbm8gPSBsaW5lTm8obGluZSk7XG4gICAgaWYgKG5vID09IG51bGwgfHwgIXdzKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3cy5sZW5ndGg7ICsraSkgaWYgKHdzW2ldID09IHRoaXMpIHdzLnNwbGljZShpLS0sIDEpO1xuICAgIGlmICghd3MubGVuZ3RoKSBsaW5lLndpZGdldHMgPSBudWxsO1xuICAgIHZhciBoZWlnaHQgPSB3aWRnZXRIZWlnaHQodGhpcyk7XG4gICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBNYXRoLm1heCgwLCBsaW5lLmhlaWdodCAtIGhlaWdodCkpO1xuICAgIGlmIChjbSkgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCAtaGVpZ2h0KTtcbiAgICAgIHJlZ0xpbmVDaGFuZ2UoY20sIG5vLCBcIndpZGdldFwiKTtcbiAgICB9KTtcbiAgfTtcbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbGRIID0gdGhpcy5oZWlnaHQsIGNtID0gdGhpcy5kb2MuY20sIGxpbmUgPSB0aGlzLmxpbmU7XG4gICAgdGhpcy5oZWlnaHQgPSBudWxsO1xuICAgIHZhciBkaWZmID0gd2lkZ2V0SGVpZ2h0KHRoaXMpIC0gb2xkSDtcbiAgICBpZiAoIWRpZmYpIHJldHVybjtcbiAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZGlmZik7XG4gICAgaWYgKGNtKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIGFkanVzdFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIGRpZmYpO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHdpZGdldEhlaWdodCh3aWRnZXQpIHtcbiAgICBpZiAod2lkZ2V0LmhlaWdodCAhPSBudWxsKSByZXR1cm4gd2lkZ2V0LmhlaWdodDtcbiAgICB2YXIgY20gPSB3aWRnZXQuZG9jLmNtO1xuICAgIGlmICghY20pIHJldHVybiAwO1xuICAgIGlmICghY29udGFpbnMoZG9jdW1lbnQuYm9keSwgd2lkZ2V0Lm5vZGUpKSB7XG4gICAgICB2YXIgcGFyZW50U3R5bGUgPSBcInBvc2l0aW9uOiByZWxhdGl2ZTtcIjtcbiAgICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpXG4gICAgICAgIHBhcmVudFN0eWxlICs9IFwibWFyZ2luLWxlZnQ6IC1cIiArIGNtLmRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCArIFwicHg7XCI7XG4gICAgICBpZiAod2lkZ2V0Lm5vSFNjcm9sbClcbiAgICAgICAgcGFyZW50U3R5bGUgKz0gXCJ3aWR0aDogXCIgKyBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGggKyBcInB4O1wiO1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoY20uZGlzcGxheS5tZWFzdXJlLCBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgbnVsbCwgcGFyZW50U3R5bGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZGdldC5oZWlnaHQgPSB3aWRnZXQubm9kZS5wYXJlbnROb2RlLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZExpbmVXaWRnZXQoZG9jLCBoYW5kbGUsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgd2lkZ2V0ID0gbmV3IExpbmVXaWRnZXQoZG9jLCBub2RlLCBvcHRpb25zKTtcbiAgICB2YXIgY20gPSBkb2MuY207XG4gICAgaWYgKGNtICYmIHdpZGdldC5ub0hTY3JvbGwpIGNtLmRpc3BsYXkuYWxpZ25XaWRnZXRzID0gdHJ1ZTtcbiAgICBjaGFuZ2VMaW5lKGRvYywgaGFuZGxlLCBcIndpZGdldFwiLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgd2lkZ2V0cyA9IGxpbmUud2lkZ2V0cyB8fCAobGluZS53aWRnZXRzID0gW10pO1xuICAgICAgaWYgKHdpZGdldC5pbnNlcnRBdCA9PSBudWxsKSB3aWRnZXRzLnB1c2god2lkZ2V0KTtcbiAgICAgIGVsc2Ugd2lkZ2V0cy5zcGxpY2UoTWF0aC5taW4od2lkZ2V0cy5sZW5ndGggLSAxLCBNYXRoLm1heCgwLCB3aWRnZXQuaW5zZXJ0QXQpKSwgMCwgd2lkZ2V0KTtcbiAgICAgIHdpZGdldC5saW5lID0gbGluZTtcbiAgICAgIGlmIChjbSAmJiAhbGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHtcbiAgICAgICAgdmFyIGFib3ZlVmlzaWJsZSA9IGhlaWdodEF0TGluZShsaW5lKSA8IGRvYy5zY3JvbGxUb3A7XG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgbGluZS5oZWlnaHQgKyB3aWRnZXRIZWlnaHQod2lkZ2V0KSk7XG4gICAgICAgIGlmIChhYm92ZVZpc2libGUpIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCB3aWRnZXQuaGVpZ2h0KTtcbiAgICAgICAgY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHdpZGdldDtcbiAgfVxuXG4gIC8vIExJTkUgREFUQSBTVFJVQ1RVUkVcblxuICAvLyBMaW5lIG9iamVjdHMuIFRoZXNlIGhvbGQgc3RhdGUgcmVsYXRlZCB0byBhIGxpbmUsIGluY2x1ZGluZ1xuICAvLyBoaWdobGlnaHRpbmcgaW5mbyAodGhlIHN0eWxlcyBhcnJheSkuXG4gIHZhciBMaW5lID0gQ29kZU1pcnJvci5MaW5lID0gZnVuY3Rpb24odGV4dCwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICBhdHRhY2hNYXJrZWRTcGFucyh0aGlzLCBtYXJrZWRTcGFucyk7XG4gICAgdGhpcy5oZWlnaHQgPSBlc3RpbWF0ZUhlaWdodCA/IGVzdGltYXRlSGVpZ2h0KHRoaXMpIDogMTtcbiAgfTtcbiAgZXZlbnRNaXhpbihMaW5lKTtcbiAgTGluZS5wcm90b3R5cGUubGluZU5vID0gZnVuY3Rpb24oKSB7IHJldHVybiBsaW5lTm8odGhpcyk7IH07XG5cbiAgLy8gQ2hhbmdlIHRoZSBjb250ZW50ICh0ZXh0LCBtYXJrZXJzKSBvZiBhIGxpbmUuIEF1dG9tYXRpY2FsbHlcbiAgLy8gaW52YWxpZGF0ZXMgY2FjaGVkIGluZm9ybWF0aW9uIGFuZCB0cmllcyB0byByZS1lc3RpbWF0ZSB0aGVcbiAgLy8gbGluZSdzIGhlaWdodC5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZShsaW5lLCB0ZXh0LCBtYXJrZWRTcGFucywgZXN0aW1hdGVIZWlnaHQpIHtcbiAgICBsaW5lLnRleHQgPSB0ZXh0O1xuICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIpIGxpbmUuc3RhdGVBZnRlciA9IG51bGw7XG4gICAgaWYgKGxpbmUuc3R5bGVzKSBsaW5lLnN0eWxlcyA9IG51bGw7XG4gICAgaWYgKGxpbmUub3JkZXIgIT0gbnVsbCkgbGluZS5vcmRlciA9IG51bGw7XG4gICAgZGV0YWNoTWFya2VkU3BhbnMobGluZSk7XG4gICAgYXR0YWNoTWFya2VkU3BhbnMobGluZSwgbWFya2VkU3BhbnMpO1xuICAgIHZhciBlc3RIZWlnaHQgPSBlc3RpbWF0ZUhlaWdodCA/IGVzdGltYXRlSGVpZ2h0KGxpbmUpIDogMTtcbiAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGVzdEhlaWdodCk7XG4gIH1cblxuICAvLyBEZXRhY2ggYSBsaW5lIGZyb20gdGhlIGRvY3VtZW50IHRyZWUgYW5kIGl0cyBtYXJrZXJzLlxuICBmdW5jdGlvbiBjbGVhblVwTGluZShsaW5lKSB7XG4gICAgbGluZS5wYXJlbnQgPSBudWxsO1xuICAgIGRldGFjaE1hcmtlZFNwYW5zKGxpbmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0cmFjdExpbmVDbGFzc2VzKHR5cGUsIG91dHB1dCkge1xuICAgIGlmICh0eXBlKSBmb3IgKDs7KSB7XG4gICAgICB2YXIgbGluZUNsYXNzID0gdHlwZS5tYXRjaCgvKD86XnxcXHMrKWxpbmUtKGJhY2tncm91bmQtKT8oXFxTKykvKTtcbiAgICAgIGlmICghbGluZUNsYXNzKSBicmVhaztcbiAgICAgIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGxpbmVDbGFzcy5pbmRleCkgKyB0eXBlLnNsaWNlKGxpbmVDbGFzcy5pbmRleCArIGxpbmVDbGFzc1swXS5sZW5ndGgpO1xuICAgICAgdmFyIHByb3AgPSBsaW5lQ2xhc3NbMV0gPyBcImJnQ2xhc3NcIiA6IFwidGV4dENsYXNzXCI7XG4gICAgICBpZiAob3V0cHV0W3Byb3BdID09IG51bGwpXG4gICAgICAgIG91dHB1dFtwcm9wXSA9IGxpbmVDbGFzc1syXTtcbiAgICAgIGVsc2UgaWYgKCEobmV3IFJlZ0V4cChcIig/Ol58XFxzKVwiICsgbGluZUNsYXNzWzJdICsgXCIoPzokfFxccylcIikpLnRlc3Qob3V0cHV0W3Byb3BdKSlcbiAgICAgICAgb3V0cHV0W3Byb3BdICs9IFwiIFwiICsgbGluZUNsYXNzWzJdO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpIHtcbiAgICBpZiAobW9kZS5ibGFua0xpbmUpIHJldHVybiBtb2RlLmJsYW5rTGluZShzdGF0ZSk7XG4gICAgaWYgKCFtb2RlLmlubmVyTW9kZSkgcmV0dXJuO1xuICAgIHZhciBpbm5lciA9IENvZGVNaXJyb3IuaW5uZXJNb2RlKG1vZGUsIHN0YXRlKTtcbiAgICBpZiAoaW5uZXIubW9kZS5ibGFua0xpbmUpIHJldHVybiBpbm5lci5tb2RlLmJsYW5rTGluZShpbm5lci5zdGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWFkVG9rZW4obW9kZSwgc3RyZWFtLCBzdGF0ZSwgaW5uZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGlmIChpbm5lcikgaW5uZXJbMF0gPSBDb2RlTWlycm9yLmlubmVyTW9kZShtb2RlLCBzdGF0ZSkubW9kZTtcbiAgICAgIHZhciBzdHlsZSA9IG1vZGUudG9rZW4oc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBpZiAoc3RyZWFtLnBvcyA+IHN0cmVhbS5zdGFydCkgcmV0dXJuIHN0eWxlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb2RlIFwiICsgbW9kZS5uYW1lICsgXCIgZmFpbGVkIHRvIGFkdmFuY2Ugc3RyZWFtLlwiKTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgZm9yIGdldFRva2VuQXQgYW5kIGdldExpbmVUb2tlbnNcbiAgZnVuY3Rpb24gdGFrZVRva2VuKGNtLCBwb3MsIHByZWNpc2UsIGFzQXJyYXkpIHtcbiAgICBmdW5jdGlvbiBnZXRPYmooY29weSkge1xuICAgICAgcmV0dXJuIHtzdGFydDogc3RyZWFtLnN0YXJ0LCBlbmQ6IHN0cmVhbS5wb3MsXG4gICAgICAgICAgICAgIHN0cmluZzogc3RyZWFtLmN1cnJlbnQoKSxcbiAgICAgICAgICAgICAgdHlwZTogc3R5bGUgfHwgbnVsbCxcbiAgICAgICAgICAgICAgc3RhdGU6IGNvcHkgPyBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKSA6IHN0YXRlfTtcbiAgICB9XG5cbiAgICB2YXIgZG9jID0gY20uZG9jLCBtb2RlID0gZG9jLm1vZGUsIHN0eWxlO1xuICAgIHBvcyA9IGNsaXBQb3MoZG9jLCBwb3MpO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKSwgc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShjbSwgcG9zLmxpbmUsIHByZWNpc2UpO1xuICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKGxpbmUudGV4dCwgY20ub3B0aW9ucy50YWJTaXplKSwgdG9rZW5zO1xuICAgIGlmIChhc0FycmF5KSB0b2tlbnMgPSBbXTtcbiAgICB3aGlsZSAoKGFzQXJyYXkgfHwgc3RyZWFtLnBvcyA8IHBvcy5jaCkgJiYgIXN0cmVhbS5lb2woKSkge1xuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICAgIHN0eWxlID0gcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKGFzQXJyYXkpIHRva2Vucy5wdXNoKGdldE9iaih0cnVlKSk7XG4gICAgfVxuICAgIHJldHVybiBhc0FycmF5ID8gdG9rZW5zIDogZ2V0T2JqKCk7XG4gIH1cblxuICAvLyBSdW4gdGhlIGdpdmVuIG1vZGUncyBwYXJzZXIgb3ZlciBhIGxpbmUsIGNhbGxpbmcgZiBmb3IgZWFjaCB0b2tlbi5cbiAgZnVuY3Rpb24gcnVuTW9kZShjbSwgdGV4dCwgbW9kZSwgc3RhdGUsIGYsIGxpbmVDbGFzc2VzLCBmb3JjZVRvRW5kKSB7XG4gICAgdmFyIGZsYXR0ZW5TcGFucyA9IG1vZGUuZmxhdHRlblNwYW5zO1xuICAgIGlmIChmbGF0dGVuU3BhbnMgPT0gbnVsbCkgZmxhdHRlblNwYW5zID0gY20ub3B0aW9ucy5mbGF0dGVuU3BhbnM7XG4gICAgdmFyIGN1clN0YXJ0ID0gMCwgY3VyU3R5bGUgPSBudWxsO1xuICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKHRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSksIHN0eWxlO1xuICAgIHZhciBpbm5lciA9IGNtLm9wdGlvbnMuYWRkTW9kZUNsYXNzICYmIFtudWxsXTtcbiAgICBpZiAodGV4dCA9PSBcIlwiKSBleHRyYWN0TGluZUNsYXNzZXMoY2FsbEJsYW5rTGluZShtb2RlLCBzdGF0ZSksIGxpbmVDbGFzc2VzKTtcbiAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgaWYgKHN0cmVhbS5wb3MgPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCkge1xuICAgICAgICBmbGF0dGVuU3BhbnMgPSBmYWxzZTtcbiAgICAgICAgaWYgKGZvcmNlVG9FbmQpIHByb2Nlc3NMaW5lKGNtLCB0ZXh0LCBzdGF0ZSwgc3RyZWFtLnBvcyk7XG4gICAgICAgIHN0cmVhbS5wb3MgPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgc3R5bGUgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGUgPSBleHRyYWN0TGluZUNsYXNzZXMocmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUsIGlubmVyKSwgbGluZUNsYXNzZXMpO1xuICAgICAgfVxuICAgICAgaWYgKGlubmVyKSB7XG4gICAgICAgIHZhciBtTmFtZSA9IGlubmVyWzBdLm5hbWU7XG4gICAgICAgIGlmIChtTmFtZSkgc3R5bGUgPSBcIm0tXCIgKyAoc3R5bGUgPyBtTmFtZSArIFwiIFwiICsgc3R5bGUgOiBtTmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWZsYXR0ZW5TcGFucyB8fCBjdXJTdHlsZSAhPSBzdHlsZSkge1xuICAgICAgICB3aGlsZSAoY3VyU3RhcnQgPCBzdHJlYW0uc3RhcnQpIHtcbiAgICAgICAgICBjdXJTdGFydCA9IE1hdGgubWluKHN0cmVhbS5zdGFydCwgY3VyU3RhcnQgKyA1MDAwMCk7XG4gICAgICAgICAgZihjdXJTdGFydCwgY3VyU3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGN1clN0eWxlID0gc3R5bGU7XG4gICAgICB9XG4gICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgIH1cbiAgICB3aGlsZSAoY3VyU3RhcnQgPCBzdHJlYW0ucG9zKSB7XG4gICAgICAvLyBXZWJraXQgc2VlbXMgdG8gcmVmdXNlIHRvIHJlbmRlciB0ZXh0IG5vZGVzIGxvbmdlciB0aGFuIDU3NDQ0IGNoYXJhY3RlcnNcbiAgICAgIHZhciBwb3MgPSBNYXRoLm1pbihzdHJlYW0ucG9zLCBjdXJTdGFydCArIDUwMDAwKTtcbiAgICAgIGYocG9zLCBjdXJTdHlsZSk7XG4gICAgICBjdXJTdGFydCA9IHBvcztcbiAgICB9XG4gIH1cblxuICAvLyBDb21wdXRlIGEgc3R5bGUgYXJyYXkgKGFuIGFycmF5IHN0YXJ0aW5nIHdpdGggYSBtb2RlIGdlbmVyYXRpb25cbiAgLy8gLS0gZm9yIGludmFsaWRhdGlvbiAtLSBmb2xsb3dlZCBieSBwYWlycyBvZiBlbmQgcG9zaXRpb25zIGFuZFxuICAvLyBzdHlsZSBzdHJpbmdzKSwgd2hpY2ggaXMgdXNlZCB0byBoaWdobGlnaHQgdGhlIHRva2VucyBvbiB0aGVcbiAgLy8gbGluZS5cbiAgZnVuY3Rpb24gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwgc3RhdGUsIGZvcmNlVG9FbmQpIHtcbiAgICAvLyBBIHN0eWxlcyBhcnJheSBhbHdheXMgc3RhcnRzIHdpdGggYSBudW1iZXIgaWRlbnRpZnlpbmcgdGhlXG4gICAgLy8gbW9kZS9vdmVybGF5cyB0aGF0IGl0IGlzIGJhc2VkIG9uIChmb3IgZWFzeSBpbnZhbGlkYXRpb24pLlxuICAgIHZhciBzdCA9IFtjbS5zdGF0ZS5tb2RlR2VuXSwgbGluZUNsYXNzZXMgPSB7fTtcbiAgICAvLyBDb21wdXRlIHRoZSBiYXNlIGFycmF5IG9mIHN0eWxlc1xuICAgIHJ1bk1vZGUoY20sIGxpbmUudGV4dCwgY20uZG9jLm1vZGUsIHN0YXRlLCBmdW5jdGlvbihlbmQsIHN0eWxlKSB7XG4gICAgICBzdC5wdXNoKGVuZCwgc3R5bGUpO1xuICAgIH0sIGxpbmVDbGFzc2VzLCBmb3JjZVRvRW5kKTtcblxuICAgIC8vIFJ1biBvdmVybGF5cywgYWRqdXN0IHN0eWxlIGFycmF5LlxuICAgIGZvciAodmFyIG8gPSAwOyBvIDwgY20uc3RhdGUub3ZlcmxheXMubGVuZ3RoOyArK28pIHtcbiAgICAgIHZhciBvdmVybGF5ID0gY20uc3RhdGUub3ZlcmxheXNbb10sIGkgPSAxLCBhdCA9IDA7XG4gICAgICBydW5Nb2RlKGNtLCBsaW5lLnRleHQsIG92ZXJsYXkubW9kZSwgdHJ1ZSwgZnVuY3Rpb24oZW5kLCBzdHlsZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSBpO1xuICAgICAgICAvLyBFbnN1cmUgdGhlcmUncyBhIHRva2VuIGVuZCBhdCB0aGUgY3VycmVudCBwb3NpdGlvbiwgYW5kIHRoYXQgaSBwb2ludHMgYXQgaXRcbiAgICAgICAgd2hpbGUgKGF0IDwgZW5kKSB7XG4gICAgICAgICAgdmFyIGlfZW5kID0gc3RbaV07XG4gICAgICAgICAgaWYgKGlfZW5kID4gZW5kKVxuICAgICAgICAgICAgc3Quc3BsaWNlKGksIDEsIGVuZCwgc3RbaSsxXSwgaV9lbmQpO1xuICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICBhdCA9IE1hdGgubWluKGVuZCwgaV9lbmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3R5bGUpIHJldHVybjtcbiAgICAgICAgaWYgKG92ZXJsYXkub3BhcXVlKSB7XG4gICAgICAgICAgc3Quc3BsaWNlKHN0YXJ0LCBpIC0gc3RhcnQsIGVuZCwgXCJjbS1vdmVybGF5IFwiICsgc3R5bGUpO1xuICAgICAgICAgIGkgPSBzdGFydCArIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICg7IHN0YXJ0IDwgaTsgc3RhcnQgKz0gMikge1xuICAgICAgICAgICAgdmFyIGN1ciA9IHN0W3N0YXJ0KzFdO1xuICAgICAgICAgICAgc3Rbc3RhcnQrMV0gPSAoY3VyID8gY3VyICsgXCIgXCIgOiBcIlwiKSArIFwiY20tb3ZlcmxheSBcIiArIHN0eWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgbGluZUNsYXNzZXMpO1xuICAgIH1cblxuICAgIHJldHVybiB7c3R5bGVzOiBzdCwgY2xhc3NlczogbGluZUNsYXNzZXMuYmdDbGFzcyB8fCBsaW5lQ2xhc3Nlcy50ZXh0Q2xhc3MgPyBsaW5lQ2xhc3NlcyA6IG51bGx9O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TGluZVN0eWxlcyhjbSwgbGluZSwgdXBkYXRlRnJvbnRpZXIpIHtcbiAgICBpZiAoIWxpbmUuc3R5bGVzIHx8IGxpbmUuc3R5bGVzWzBdICE9IGNtLnN0YXRlLm1vZGVHZW4pIHtcbiAgICAgIHZhciBzdGF0ZSA9IGdldFN0YXRlQmVmb3JlKGNtLCBsaW5lTm8obGluZSkpO1xuICAgICAgdmFyIHJlc3VsdCA9IGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIGxpbmUudGV4dC5sZW5ndGggPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCA/IGNvcHlTdGF0ZShjbS5kb2MubW9kZSwgc3RhdGUpIDogc3RhdGUpO1xuICAgICAgbGluZS5zdGF0ZUFmdGVyID0gc3RhdGU7XG4gICAgICBsaW5lLnN0eWxlcyA9IHJlc3VsdC5zdHlsZXM7XG4gICAgICBpZiAocmVzdWx0LmNsYXNzZXMpIGxpbmUuc3R5bGVDbGFzc2VzID0gcmVzdWx0LmNsYXNzZXM7XG4gICAgICBlbHNlIGlmIChsaW5lLnN0eWxlQ2xhc3NlcykgbGluZS5zdHlsZUNsYXNzZXMgPSBudWxsO1xuICAgICAgaWYgKHVwZGF0ZUZyb250aWVyID09PSBjbS5kb2MuZnJvbnRpZXIpIGNtLmRvYy5mcm9udGllcisrO1xuICAgIH1cbiAgICByZXR1cm4gbGluZS5zdHlsZXM7XG4gIH1cblxuICAvLyBMaWdodHdlaWdodCBmb3JtIG9mIGhpZ2hsaWdodCAtLSBwcm9jZWVkIG92ZXIgdGhpcyBsaW5lIGFuZFxuICAvLyB1cGRhdGUgc3RhdGUsIGJ1dCBkb24ndCBzYXZlIGEgc3R5bGUgYXJyYXkuIFVzZWQgZm9yIGxpbmVzIHRoYXRcbiAgLy8gYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlLlxuICBmdW5jdGlvbiBwcm9jZXNzTGluZShjbSwgdGV4dCwgc3RhdGUsIHN0YXJ0QXQpIHtcbiAgICB2YXIgbW9kZSA9IGNtLmRvYy5tb2RlO1xuICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKHRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSk7XG4gICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcyA9IHN0YXJ0QXQgfHwgMDtcbiAgICBpZiAodGV4dCA9PSBcIlwiKSBjYWxsQmxhbmtMaW5lKG1vZGUsIHN0YXRlKTtcbiAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUpO1xuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICB9XG4gIH1cblxuICAvLyBDb252ZXJ0IGEgc3R5bGUgYXMgcmV0dXJuZWQgYnkgYSBtb2RlIChlaXRoZXIgbnVsbCwgb3IgYSBzdHJpbmdcbiAgLy8gY29udGFpbmluZyBvbmUgb3IgbW9yZSBzdHlsZXMpIHRvIGEgQ1NTIHN0eWxlLiBUaGlzIGlzIGNhY2hlZCxcbiAgLy8gYW5kIGFsc28gbG9va3MgZm9yIGxpbmUtd2lkZSBzdHlsZXMuXG4gIHZhciBzdHlsZVRvQ2xhc3NDYWNoZSA9IHt9LCBzdHlsZVRvQ2xhc3NDYWNoZVdpdGhNb2RlID0ge307XG4gIGZ1bmN0aW9uIGludGVycHJldFRva2VuU3R5bGUoc3R5bGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXN0eWxlIHx8IC9eXFxzKiQvLnRlc3Qoc3R5bGUpKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgY2FjaGUgPSBvcHRpb25zLmFkZE1vZGVDbGFzcyA/IHN0eWxlVG9DbGFzc0NhY2hlV2l0aE1vZGUgOiBzdHlsZVRvQ2xhc3NDYWNoZTtcbiAgICByZXR1cm4gY2FjaGVbc3R5bGVdIHx8XG4gICAgICAoY2FjaGVbc3R5bGVdID0gc3R5bGUucmVwbGFjZSgvXFxTKy9nLCBcImNtLSQmXCIpKTtcbiAgfVxuXG4gIC8vIFJlbmRlciB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0ZXh0IG9mIGEgbGluZS4gQWxzbyBidWlsZHNcbiAgLy8gdXAgYSAnbGluZSBtYXAnLCB3aGljaCBwb2ludHMgYXQgdGhlIERPTSBub2RlcyB0aGF0IHJlcHJlc2VudFxuICAvLyBzcGVjaWZpYyBzdHJldGNoZXMgb2YgdGV4dCwgYW5kIGlzIHVzZWQgYnkgdGhlIG1lYXN1cmluZyBjb2RlLlxuICAvLyBUaGUgcmV0dXJuZWQgb2JqZWN0IGNvbnRhaW5zIHRoZSBET00gbm9kZSwgdGhpcyBtYXAsIGFuZFxuICAvLyBpbmZvcm1hdGlvbiBhYm91dCBsaW5lLXdpZGUgc3R5bGVzIHRoYXQgd2VyZSBzZXQgYnkgdGhlIG1vZGUuXG4gIGZ1bmN0aW9uIGJ1aWxkTGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KSB7XG4gICAgLy8gVGhlIHBhZGRpbmctcmlnaHQgZm9yY2VzIHRoZSBlbGVtZW50IHRvIGhhdmUgYSAnYm9yZGVyJywgd2hpY2hcbiAgICAvLyBpcyBuZWVkZWQgb24gV2Via2l0IHRvIGJlIGFibGUgdG8gZ2V0IGxpbmUtbGV2ZWwgYm91bmRpbmdcbiAgICAvLyByZWN0YW5nbGVzIGZvciBpdCAoaW4gbWVhc3VyZUNoYXIpLlxuICAgIHZhciBjb250ZW50ID0gZWx0KFwic3BhblwiLCBudWxsLCBudWxsLCB3ZWJraXQgPyBcInBhZGRpbmctcmlnaHQ6IC4xcHhcIiA6IG51bGwpO1xuICAgIHZhciBidWlsZGVyID0ge3ByZTogZWx0KFwicHJlXCIsIFtjb250ZW50XSwgXCJDb2RlTWlycm9yLWxpbmVcIiksIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgY29sOiAwLCBwb3M6IDAsIGNtOiBjbSxcbiAgICAgICAgICAgICAgICAgICBzcGxpdFNwYWNlczogKGllIHx8IHdlYmtpdCkgJiYgY20uZ2V0T3B0aW9uKFwibGluZVdyYXBwaW5nXCIpfTtcbiAgICBsaW5lVmlldy5tZWFzdXJlID0ge307XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGxvZ2ljYWwgbGluZXMgdGhhdCBtYWtlIHVwIHRoaXMgdmlzdWFsIGxpbmUuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gKGxpbmVWaWV3LnJlc3QgPyBsaW5lVmlldy5yZXN0Lmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gaSA/IGxpbmVWaWV3LnJlc3RbaSAtIDFdIDogbGluZVZpZXcubGluZSwgb3JkZXI7XG4gICAgICBidWlsZGVyLnBvcyA9IDA7XG4gICAgICBidWlsZGVyLmFkZFRva2VuID0gYnVpbGRUb2tlbjtcbiAgICAgIC8vIE9wdGlvbmFsbHkgd2lyZSBpbiBzb21lIGhhY2tzIGludG8gdGhlIHRva2VuLXJlbmRlcmluZ1xuICAgICAgLy8gYWxnb3JpdGhtLCB0byBkZWFsIHdpdGggYnJvd3NlciBxdWlya3MuXG4gICAgICBpZiAoaGFzQmFkQmlkaVJlY3RzKGNtLmRpc3BsYXkubWVhc3VyZSkgJiYgKG9yZGVyID0gZ2V0T3JkZXIobGluZSkpKVxuICAgICAgICBidWlsZGVyLmFkZFRva2VuID0gYnVpbGRUb2tlbkJhZEJpZGkoYnVpbGRlci5hZGRUb2tlbiwgb3JkZXIpO1xuICAgICAgYnVpbGRlci5tYXAgPSBbXTtcbiAgICAgIHZhciBhbGxvd0Zyb250aWVyVXBkYXRlID0gbGluZVZpZXcgIT0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkICYmIGxpbmVObyhsaW5lKTtcbiAgICAgIGluc2VydExpbmVDb250ZW50KGxpbmUsIGJ1aWxkZXIsIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIGFsbG93RnJvbnRpZXJVcGRhdGUpKTtcbiAgICAgIGlmIChsaW5lLnN0eWxlQ2xhc3Nlcykge1xuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcylcbiAgICAgICAgICBidWlsZGVyLmJnQ2xhc3MgPSBqb2luQ2xhc3NlcyhsaW5lLnN0eWxlQ2xhc3Nlcy5iZ0NsYXNzLCBidWlsZGVyLmJnQ2xhc3MgfHwgXCJcIik7XG4gICAgICAgIGlmIChsaW5lLnN0eWxlQ2xhc3Nlcy50ZXh0Q2xhc3MpXG4gICAgICAgICAgYnVpbGRlci50ZXh0Q2xhc3MgPSBqb2luQ2xhc3NlcyhsaW5lLnN0eWxlQ2xhc3Nlcy50ZXh0Q2xhc3MsIGJ1aWxkZXIudGV4dENsYXNzIHx8IFwiXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgYXQgbGVhc3QgYSBzaW5nbGUgbm9kZSBpcyBwcmVzZW50LCBmb3IgbWVhc3VyaW5nLlxuICAgICAgaWYgKGJ1aWxkZXIubWFwLmxlbmd0aCA9PSAwKVxuICAgICAgICBidWlsZGVyLm1hcC5wdXNoKDAsIDAsIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh6ZXJvV2lkdGhFbGVtZW50KGNtLmRpc3BsYXkubWVhc3VyZSkpKTtcblxuICAgICAgLy8gU3RvcmUgdGhlIG1hcCBhbmQgYSBjYWNoZSBvYmplY3QgZm9yIHRoZSBjdXJyZW50IGxvZ2ljYWwgbGluZVxuICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLm1hcCA9IGJ1aWxkZXIubWFwO1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAobGluZVZpZXcubWVhc3VyZS5tYXBzIHx8IChsaW5lVmlldy5tZWFzdXJlLm1hcHMgPSBbXSkpLnB1c2goYnVpbGRlci5tYXApO1xuICAgICAgICAobGluZVZpZXcubWVhc3VyZS5jYWNoZXMgfHwgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzID0gW10pKS5wdXNoKHt9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWUgaXNzdWUgIzI5MDFcbiAgICBpZiAod2Via2l0ICYmIC9cXGJjbS10YWJcXGIvLnRlc3QoYnVpbGRlci5jb250ZW50Lmxhc3RDaGlsZC5jbGFzc05hbWUpKVxuICAgICAgYnVpbGRlci5jb250ZW50LmNsYXNzTmFtZSA9IFwiY20tdGFiLXdyYXAtaGFja1wiO1xuXG4gICAgc2lnbmFsKGNtLCBcInJlbmRlckxpbmVcIiwgY20sIGxpbmVWaWV3LmxpbmUsIGJ1aWxkZXIucHJlKTtcbiAgICBpZiAoYnVpbGRlci5wcmUuY2xhc3NOYW1lKVxuICAgICAgYnVpbGRlci50ZXh0Q2xhc3MgPSBqb2luQ2xhc3NlcyhidWlsZGVyLnByZS5jbGFzc05hbWUsIGJ1aWxkZXIudGV4dENsYXNzIHx8IFwiXCIpO1xuXG4gICAgcmV0dXJuIGJ1aWxkZXI7XG4gIH1cblxuICBmdW5jdGlvbiBkZWZhdWx0U3BlY2lhbENoYXJQbGFjZWhvbGRlcihjaCkge1xuICAgIHZhciB0b2tlbiA9IGVsdChcInNwYW5cIiwgXCJcXHUyMDIyXCIsIFwiY20taW52YWxpZGNoYXJcIik7XG4gICAgdG9rZW4udGl0bGUgPSBcIlxcXFx1XCIgKyBjaC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTtcbiAgICB0b2tlbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRva2VuLnRpdGxlKTtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICAvLyBCdWlsZCB1cCB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIGZvciBhIHNpbmdsZSB0b2tlbiwgYW5kIGFkZCBpdCB0b1xuICAvLyB0aGUgbGluZSBtYXAuIFRha2VzIGNhcmUgdG8gcmVuZGVyIHNwZWNpYWwgY2hhcmFjdGVycyBzZXBhcmF0ZWx5LlxuICBmdW5jdGlvbiBidWlsZFRva2VuKGJ1aWxkZXIsIHRleHQsIHN0eWxlLCBzdGFydFN0eWxlLCBlbmRTdHlsZSwgdGl0bGUsIGNzcykge1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuICAgIHZhciBkaXNwbGF5VGV4dCA9IGJ1aWxkZXIuc3BsaXRTcGFjZXMgPyB0ZXh0LnJlcGxhY2UoLyB7Myx9L2csIHNwbGl0U3BhY2VzKSA6IHRleHQ7XG4gICAgdmFyIHNwZWNpYWwgPSBidWlsZGVyLmNtLnN0YXRlLnNwZWNpYWxDaGFycywgbXVzdFdyYXAgPSBmYWxzZTtcbiAgICBpZiAoIXNwZWNpYWwudGVzdCh0ZXh0KSkge1xuICAgICAgYnVpbGRlci5jb2wgKz0gdGV4dC5sZW5ndGg7XG4gICAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRpc3BsYXlUZXh0KTtcbiAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgdGV4dC5sZW5ndGgsIGNvbnRlbnQpO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBtdXN0V3JhcCA9IHRydWU7XG4gICAgICBidWlsZGVyLnBvcyArPSB0ZXh0Lmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIHBvcyA9IDA7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzcGVjaWFsLmxhc3RJbmRleCA9IHBvcztcbiAgICAgICAgdmFyIG0gPSBzcGVjaWFsLmV4ZWModGV4dCk7XG4gICAgICAgIHZhciBza2lwcGVkID0gbSA/IG0uaW5kZXggLSBwb3MgOiB0ZXh0Lmxlbmd0aCAtIHBvcztcbiAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICB2YXIgdHh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGlzcGxheVRleHQuc2xpY2UocG9zLCBwb3MgKyBza2lwcGVkKSk7XG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBjb250ZW50LmFwcGVuZENoaWxkKGVsdChcInNwYW5cIiwgW3R4dF0pKTtcbiAgICAgICAgICBlbHNlIGNvbnRlbnQuYXBwZW5kQ2hpbGQodHh0KTtcbiAgICAgICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHNraXBwZWQsIHR4dCk7XG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gc2tpcHBlZDtcbiAgICAgICAgICBidWlsZGVyLnBvcyArPSBza2lwcGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbSkgYnJlYWs7XG4gICAgICAgIHBvcyArPSBza2lwcGVkICsgMTtcbiAgICAgICAgaWYgKG1bMF0gPT0gXCJcXHRcIikge1xuICAgICAgICAgIHZhciB0YWJTaXplID0gYnVpbGRlci5jbS5vcHRpb25zLnRhYlNpemUsIHRhYldpZHRoID0gdGFiU2l6ZSAtIGJ1aWxkZXIuY29sICUgdGFiU2l6ZTtcbiAgICAgICAgICB2YXIgdHh0ID0gY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIHNwYWNlU3RyKHRhYldpZHRoKSwgXCJjbS10YWJcIikpO1xuICAgICAgICAgIHR4dC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xuICAgICAgICAgIHR4dC5zZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIsIFwiXFx0XCIpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IHRhYldpZHRoO1xuICAgICAgICB9IGVsc2UgaWYgKG1bMF0gPT0gXCJcXHJcIiB8fCBtWzBdID09IFwiXFxuXCIpIHtcbiAgICAgICAgICB2YXIgdHh0ID0gY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIG1bMF0gPT0gXCJcXHJcIiA/IFwiXFx1MjQwZFwiIDogXCJcXHUyNDI0XCIsIFwiY20taW52YWxpZGNoYXJcIikpO1xuICAgICAgICAgIHR4dC5zZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIsIG1bMF0pO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGJ1aWxkZXIuY20ub3B0aW9ucy5zcGVjaWFsQ2hhclBsYWNlaG9sZGVyKG1bMF0pO1xuICAgICAgICAgIHR4dC5zZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIsIG1bMF0pO1xuICAgICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIFt0eHRdKSk7XG4gICAgICAgICAgZWxzZSBjb250ZW50LmFwcGVuZENoaWxkKHR4dCk7XG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIDEsIHR4dCk7XG4gICAgICAgIGJ1aWxkZXIucG9zKys7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzdHlsZSB8fCBzdGFydFN0eWxlIHx8IGVuZFN0eWxlIHx8IG11c3RXcmFwIHx8IGNzcykge1xuICAgICAgdmFyIGZ1bGxTdHlsZSA9IHN0eWxlIHx8IFwiXCI7XG4gICAgICBpZiAoc3RhcnRTdHlsZSkgZnVsbFN0eWxlICs9IHN0YXJ0U3R5bGU7XG4gICAgICBpZiAoZW5kU3R5bGUpIGZ1bGxTdHlsZSArPSBlbmRTdHlsZTtcbiAgICAgIHZhciB0b2tlbiA9IGVsdChcInNwYW5cIiwgW2NvbnRlbnRdLCBmdWxsU3R5bGUsIGNzcyk7XG4gICAgICBpZiAodGl0bGUpIHRva2VuLnRpdGxlID0gdGl0bGU7XG4gICAgICByZXR1cm4gYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKHRva2VuKTtcbiAgICB9XG4gICAgYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3BsaXRTcGFjZXMob2xkKSB7XG4gICAgdmFyIG91dCA9IFwiIFwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkLmxlbmd0aCAtIDI7ICsraSkgb3V0ICs9IGkgJSAyID8gXCIgXCIgOiBcIlxcdTAwYTBcIjtcbiAgICBvdXQgKz0gXCIgXCI7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNlIGRpbWVuc2lvbnMgYmVpbmcgcmVwb3J0ZWQgZm9yIHN0cmV0Y2hlcyBvZlxuICAvLyByaWdodC10by1sZWZ0IHRleHQuXG4gIGZ1bmN0aW9uIGJ1aWxkVG9rZW5CYWRCaWRpKGlubmVyLCBvcmRlcikge1xuICAgIHJldHVybiBmdW5jdGlvbihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIHRpdGxlLCBjc3MpIHtcbiAgICAgIHN0eWxlID0gc3R5bGUgPyBzdHlsZSArIFwiIGNtLWZvcmNlLWJvcmRlclwiIDogXCJjbS1mb3JjZS1ib3JkZXJcIjtcbiAgICAgIHZhciBzdGFydCA9IGJ1aWxkZXIucG9zLCBlbmQgPSBzdGFydCArIHRleHQubGVuZ3RoO1xuICAgICAgZm9yICg7Oykge1xuICAgICAgICAvLyBGaW5kIHRoZSBwYXJ0IHRoYXQgb3ZlcmxhcHMgd2l0aCB0aGUgc3RhcnQgb2YgdGhpcyB0ZXh0XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcGFydCA9IG9yZGVyW2ldO1xuICAgICAgICAgIGlmIChwYXJ0LnRvID4gc3RhcnQgJiYgcGFydC5mcm9tIDw9IHN0YXJ0KSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydC50byA+PSBlbmQpIHJldHVybiBpbm5lcihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIHRpdGxlLCBjc3MpO1xuICAgICAgICBpbm5lcihidWlsZGVyLCB0ZXh0LnNsaWNlKDAsIHBhcnQudG8gLSBzdGFydCksIHN0eWxlLCBzdGFydFN0eWxlLCBudWxsLCB0aXRsZSwgY3NzKTtcbiAgICAgICAgc3RhcnRTdHlsZSA9IG51bGw7XG4gICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKHBhcnQudG8gLSBzdGFydCk7XG4gICAgICAgIHN0YXJ0ID0gcGFydC50bztcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIHNpemUsIG1hcmtlciwgaWdub3JlV2lkZ2V0KSB7XG4gICAgdmFyIHdpZGdldCA9ICFpZ25vcmVXaWRnZXQgJiYgbWFya2VyLndpZGdldE5vZGU7XG4gICAgaWYgKHdpZGdldCkgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyBzaXplLCB3aWRnZXQpO1xuICAgIGlmICghaWdub3JlV2lkZ2V0ICYmIGJ1aWxkZXIuY20uZGlzcGxheS5pbnB1dC5uZWVkc0NvbnRlbnRBdHRyaWJ1dGUpIHtcbiAgICAgIGlmICghd2lkZ2V0KVxuICAgICAgICB3aWRnZXQgPSBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpO1xuICAgICAgd2lkZ2V0LnNldEF0dHJpYnV0ZShcImNtLW1hcmtlclwiLCBtYXJrZXIuaWQpO1xuICAgIH1cbiAgICBpZiAod2lkZ2V0KSB7XG4gICAgICBidWlsZGVyLmNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZSh3aWRnZXQpO1xuICAgICAgYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKHdpZGdldCk7XG4gICAgfVxuICAgIGJ1aWxkZXIucG9zICs9IHNpemU7XG4gIH1cblxuICAvLyBPdXRwdXRzIGEgbnVtYmVyIG9mIHNwYW5zIHRvIG1ha2UgdXAgYSBsaW5lLCB0YWtpbmcgaGlnaGxpZ2h0aW5nXG4gIC8vIGFuZCBtYXJrZWQgdGV4dCBpbnRvIGFjY291bnQuXG4gIGZ1bmN0aW9uIGluc2VydExpbmVDb250ZW50KGxpbmUsIGJ1aWxkZXIsIHN0eWxlcykge1xuICAgIHZhciBzcGFucyA9IGxpbmUubWFya2VkU3BhbnMsIGFsbFRleHQgPSBsaW5lLnRleHQsIGF0ID0gMDtcbiAgICBpZiAoIXNwYW5zKSB7XG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrPTIpXG4gICAgICAgIGJ1aWxkZXIuYWRkVG9rZW4oYnVpbGRlciwgYWxsVGV4dC5zbGljZShhdCwgYXQgPSBzdHlsZXNbaV0pLCBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlc1tpKzFdLCBidWlsZGVyLmNtLm9wdGlvbnMpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGVuID0gYWxsVGV4dC5sZW5ndGgsIHBvcyA9IDAsIGkgPSAxLCB0ZXh0ID0gXCJcIiwgc3R5bGUsIGNzcztcbiAgICB2YXIgbmV4dENoYW5nZSA9IDAsIHNwYW5TdHlsZSwgc3BhbkVuZFN0eWxlLCBzcGFuU3RhcnRTdHlsZSwgdGl0bGUsIGNvbGxhcHNlZDtcbiAgICBmb3IgKDs7KSB7XG4gICAgICBpZiAobmV4dENoYW5nZSA9PSBwb3MpIHsgLy8gVXBkYXRlIGN1cnJlbnQgbWFya2VyIHNldFxuICAgICAgICBzcGFuU3R5bGUgPSBzcGFuRW5kU3R5bGUgPSBzcGFuU3RhcnRTdHlsZSA9IHRpdGxlID0gY3NzID0gXCJcIjtcbiAgICAgICAgY29sbGFwc2VkID0gbnVsbDsgbmV4dENoYW5nZSA9IEluZmluaXR5O1xuICAgICAgICB2YXIgZm91bmRCb29rbWFya3MgPSBbXSwgZW5kU3R5bGVzXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3BhbnMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgc3AgPSBzcGFuc1tqXSwgbSA9IHNwLm1hcmtlcjtcbiAgICAgICAgICBpZiAobS50eXBlID09IFwiYm9va21hcmtcIiAmJiBzcC5mcm9tID09IHBvcyAmJiBtLndpZGdldE5vZGUpIHtcbiAgICAgICAgICAgIGZvdW5kQm9va21hcmtzLnB1c2gobSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzcC5mcm9tIDw9IHBvcyAmJiAoc3AudG8gPT0gbnVsbCB8fCBzcC50byA+IHBvcyB8fCBtLmNvbGxhcHNlZCAmJiBzcC50byA9PSBwb3MgJiYgc3AuZnJvbSA9PSBwb3MpKSB7XG4gICAgICAgICAgICBpZiAoc3AudG8gIT0gbnVsbCAmJiBzcC50byAhPSBwb3MgJiYgbmV4dENoYW5nZSA+IHNwLnRvKSB7XG4gICAgICAgICAgICAgIG5leHRDaGFuZ2UgPSBzcC50bztcbiAgICAgICAgICAgICAgc3BhbkVuZFN0eWxlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtLmNsYXNzTmFtZSkgc3BhblN0eWxlICs9IFwiIFwiICsgbS5jbGFzc05hbWU7XG4gICAgICAgICAgICBpZiAobS5jc3MpIGNzcyA9IChjc3MgPyBjc3MgKyBcIjtcIiA6IFwiXCIpICsgbS5jc3M7XG4gICAgICAgICAgICBpZiAobS5zdGFydFN0eWxlICYmIHNwLmZyb20gPT0gcG9zKSBzcGFuU3RhcnRTdHlsZSArPSBcIiBcIiArIG0uc3RhcnRTdHlsZTtcbiAgICAgICAgICAgIGlmIChtLmVuZFN0eWxlICYmIHNwLnRvID09IG5leHRDaGFuZ2UpIChlbmRTdHlsZXMgfHwgKGVuZFN0eWxlcyA9IFtdKSkucHVzaChtLmVuZFN0eWxlLCBzcC50bylcbiAgICAgICAgICAgIGlmIChtLnRpdGxlICYmICF0aXRsZSkgdGl0bGUgPSBtLnRpdGxlO1xuICAgICAgICAgICAgaWYgKG0uY29sbGFwc2VkICYmICghY29sbGFwc2VkIHx8IGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGNvbGxhcHNlZC5tYXJrZXIsIG0pIDwgMCkpXG4gICAgICAgICAgICAgIGNvbGxhcHNlZCA9IHNwO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3AuZnJvbSA+IHBvcyAmJiBuZXh0Q2hhbmdlID4gc3AuZnJvbSkge1xuICAgICAgICAgICAgbmV4dENoYW5nZSA9IHNwLmZyb207XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRTdHlsZXMpIGZvciAodmFyIGogPSAwOyBqIDwgZW5kU3R5bGVzLmxlbmd0aDsgaiArPSAyKVxuICAgICAgICAgIGlmIChlbmRTdHlsZXNbaiArIDFdID09IG5leHRDaGFuZ2UpIHNwYW5FbmRTdHlsZSArPSBcIiBcIiArIGVuZFN0eWxlc1tqXVxuXG4gICAgICAgIGlmICghY29sbGFwc2VkIHx8IGNvbGxhcHNlZC5mcm9tID09IHBvcykgZm9yICh2YXIgaiA9IDA7IGogPCBmb3VuZEJvb2ttYXJrcy5sZW5ndGg7ICsrailcbiAgICAgICAgICBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgMCwgZm91bmRCb29rbWFya3Nbal0pO1xuICAgICAgICBpZiAoY29sbGFwc2VkICYmIChjb2xsYXBzZWQuZnJvbSB8fCAwKSA9PSBwb3MpIHtcbiAgICAgICAgICBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgKGNvbGxhcHNlZC50byA9PSBudWxsID8gbGVuICsgMSA6IGNvbGxhcHNlZC50bykgLSBwb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlZC5tYXJrZXIsIGNvbGxhcHNlZC5mcm9tID09IG51bGwpO1xuICAgICAgICAgIGlmIChjb2xsYXBzZWQudG8gPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChjb2xsYXBzZWQudG8gPT0gcG9zKSBjb2xsYXBzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBvcyA+PSBsZW4pIGJyZWFrO1xuXG4gICAgICB2YXIgdXB0byA9IE1hdGgubWluKGxlbiwgbmV4dENoYW5nZSk7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIHZhciBlbmQgPSBwb3MgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICBpZiAoIWNvbGxhcHNlZCkge1xuICAgICAgICAgICAgdmFyIHRva2VuVGV4dCA9IGVuZCA+IHVwdG8gPyB0ZXh0LnNsaWNlKDAsIHVwdG8gLSBwb3MpIDogdGV4dDtcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkVG9rZW4oYnVpbGRlciwgdG9rZW5UZXh0LCBzdHlsZSA/IHN0eWxlICsgc3BhblN0eWxlIDogc3BhblN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuU3RhcnRTdHlsZSwgcG9zICsgdG9rZW5UZXh0Lmxlbmd0aCA9PSBuZXh0Q2hhbmdlID8gc3BhbkVuZFN0eWxlIDogXCJcIiwgdGl0bGUsIGNzcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlbmQgPj0gdXB0bykge3RleHQgPSB0ZXh0LnNsaWNlKHVwdG8gLSBwb3MpOyBwb3MgPSB1cHRvOyBicmVhazt9XG4gICAgICAgICAgcG9zID0gZW5kO1xuICAgICAgICAgIHNwYW5TdGFydFN0eWxlID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0ID0gYWxsVGV4dC5zbGljZShhdCwgYXQgPSBzdHlsZXNbaSsrXSk7XG4gICAgICAgIHN0eWxlID0gaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZXNbaSsrXSwgYnVpbGRlci5jbS5vcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBET0NVTUVOVCBEQVRBIFNUUlVDVFVSRVxuXG4gIC8vIEJ5IGRlZmF1bHQsIHVwZGF0ZXMgdGhhdCBzdGFydCBhbmQgZW5kIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBsaW5lXG4gIC8vIGFyZSB0cmVhdGVkIHNwZWNpYWxseSwgaW4gb3JkZXIgdG8gbWFrZSB0aGUgYXNzb2NpYXRpb24gb2YgbGluZVxuICAvLyB3aWRnZXRzIGFuZCBtYXJrZXIgZWxlbWVudHMgd2l0aCB0aGUgdGV4dCBiZWhhdmUgbW9yZSBpbnR1aXRpdmUuXG4gIGZ1bmN0aW9uIGlzV2hvbGVMaW5lVXBkYXRlKGRvYywgY2hhbmdlKSB7XG4gICAgcmV0dXJuIGNoYW5nZS5mcm9tLmNoID09IDAgJiYgY2hhbmdlLnRvLmNoID09IDAgJiYgbHN0KGNoYW5nZS50ZXh0KSA9PSBcIlwiICYmXG4gICAgICAoIWRvYy5jbSB8fCBkb2MuY20ub3B0aW9ucy53aG9sZUxpbmVVcGRhdGVCZWZvcmUpO1xuICB9XG5cbiAgLy8gUGVyZm9ybSBhIGNoYW5nZSBvbiB0aGUgZG9jdW1lbnQgZGF0YSBzdHJ1Y3R1cmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XG4gICAgZnVuY3Rpb24gc3BhbnNGb3Iobikge3JldHVybiBtYXJrZWRTcGFucyA/IG1hcmtlZFNwYW5zW25dIDogbnVsbDt9XG4gICAgZnVuY3Rpb24gdXBkYXRlKGxpbmUsIHRleHQsIHNwYW5zKSB7XG4gICAgICB1cGRhdGVMaW5lKGxpbmUsIHRleHQsIHNwYW5zLCBlc3RpbWF0ZUhlaWdodCk7XG4gICAgICBzaWduYWxMYXRlcihsaW5lLCBcImNoYW5nZVwiLCBsaW5lLCBjaGFuZ2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaW5lc0ZvcihzdGFydCwgZW5kKSB7XG4gICAgICBmb3IgKHZhciBpID0gc3RhcnQsIHJlc3VsdCA9IFtdOyBpIDwgZW5kOyArK2kpXG4gICAgICAgIHJlc3VsdC5wdXNoKG5ldyBMaW5lKHRleHRbaV0sIHNwYW5zRm9yKGkpLCBlc3RpbWF0ZUhlaWdodCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICB2YXIgZnJvbSA9IGNoYW5nZS5mcm9tLCB0byA9IGNoYW5nZS50bywgdGV4dCA9IGNoYW5nZS50ZXh0O1xuICAgIHZhciBmaXJzdExpbmUgPSBnZXRMaW5lKGRvYywgZnJvbS5saW5lKSwgbGFzdExpbmUgPSBnZXRMaW5lKGRvYywgdG8ubGluZSk7XG4gICAgdmFyIGxhc3RUZXh0ID0gbHN0KHRleHQpLCBsYXN0U3BhbnMgPSBzcGFuc0Zvcih0ZXh0Lmxlbmd0aCAtIDEpLCBubGluZXMgPSB0by5saW5lIC0gZnJvbS5saW5lO1xuXG4gICAgLy8gQWRqdXN0IHRoZSBsaW5lIHN0cnVjdHVyZVxuICAgIGlmIChjaGFuZ2UuZnVsbCkge1xuICAgICAgZG9jLmluc2VydCgwLCBsaW5lc0ZvcigwLCB0ZXh0Lmxlbmd0aCkpO1xuICAgICAgZG9jLnJlbW92ZSh0ZXh0Lmxlbmd0aCwgZG9jLnNpemUgLSB0ZXh0Lmxlbmd0aCk7XG4gICAgfSBlbHNlIGlmIChpc1dob2xlTGluZVVwZGF0ZShkb2MsIGNoYW5nZSkpIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB3aG9sZS1saW5lIHJlcGxhY2UuIFRyZWF0ZWQgc3BlY2lhbGx5IHRvIG1ha2VcbiAgICAgIC8vIHN1cmUgbGluZSBvYmplY3RzIG1vdmUgdGhlIHdheSB0aGV5IGFyZSBzdXBwb3NlZCB0by5cbiAgICAgIHZhciBhZGRlZCA9IGxpbmVzRm9yKDAsIHRleHQubGVuZ3RoIC0gMSk7XG4gICAgICB1cGRhdGUobGFzdExpbmUsIGxhc3RMaW5lLnRleHQsIGxhc3RTcGFucyk7XG4gICAgICBpZiAobmxpbmVzKSBkb2MucmVtb3ZlKGZyb20ubGluZSwgbmxpbmVzKTtcbiAgICAgIGlmIChhZGRlZC5sZW5ndGgpIGRvYy5pbnNlcnQoZnJvbS5saW5lLCBhZGRlZCk7XG4gICAgfSBlbHNlIGlmIChmaXJzdExpbmUgPT0gbGFzdExpbmUpIHtcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgbGFzdFRleHQgKyBmaXJzdExpbmUudGV4dC5zbGljZSh0by5jaCksIGxhc3RTcGFucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWRkZWQgPSBsaW5lc0ZvcigxLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgICBhZGRlZC5wdXNoKG5ldyBMaW5lKGxhc3RUZXh0ICsgZmlyc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBsYXN0U3BhbnMsIGVzdGltYXRlSGVpZ2h0KSk7XG4gICAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSwgc3BhbnNGb3IoMCkpO1xuICAgICAgICBkb2MuaW5zZXJ0KGZyb20ubGluZSArIDEsIGFkZGVkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRleHQubGVuZ3RoID09IDEpIHtcbiAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSArIGxhc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBzcGFuc0ZvcigwKSk7XG4gICAgICBkb2MucmVtb3ZlKGZyb20ubGluZSArIDEsIG5saW5lcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSwgc3BhbnNGb3IoMCkpO1xuICAgICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0VGV4dCArIGxhc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBsYXN0U3BhbnMpO1xuICAgICAgdmFyIGFkZGVkID0gbGluZXNGb3IoMSwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgIGlmIChubGluZXMgPiAxKSBkb2MucmVtb3ZlKGZyb20ubGluZSArIDEsIG5saW5lcyAtIDEpO1xuICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCk7XG4gICAgfVxuXG4gICAgc2lnbmFsTGF0ZXIoZG9jLCBcImNoYW5nZVwiLCBkb2MsIGNoYW5nZSk7XG4gIH1cblxuICAvLyBUaGUgZG9jdW1lbnQgaXMgcmVwcmVzZW50ZWQgYXMgYSBCVHJlZSBjb25zaXN0aW5nIG9mIGxlYXZlcywgd2l0aFxuICAvLyBjaHVuayBvZiBsaW5lcyBpbiB0aGVtLCBhbmQgYnJhbmNoZXMsIHdpdGggdXAgdG8gdGVuIGxlYXZlcyBvclxuICAvLyBvdGhlciBicmFuY2ggbm9kZXMgYmVsb3cgdGhlbS4gVGhlIHRvcCBub2RlIGlzIGFsd2F5cyBhIGJyYW5jaFxuICAvLyBub2RlLCBhbmQgaXMgdGhlIGRvY3VtZW50IG9iamVjdCBpdHNlbGYgKG1lYW5pbmcgaXQgaGFzXG4gIC8vIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgcHJvcGVydGllcykuXG4gIC8vXG4gIC8vIEFsbCBub2RlcyBoYXZlIHBhcmVudCBsaW5rcy4gVGhlIHRyZWUgaXMgdXNlZCBib3RoIHRvIGdvIGZyb21cbiAgLy8gbGluZSBudW1iZXJzIHRvIGxpbmUgb2JqZWN0cywgYW5kIHRvIGdvIGZyb20gb2JqZWN0cyB0byBudW1iZXJzLlxuICAvLyBJdCBhbHNvIGluZGV4ZXMgYnkgaGVpZ2h0LCBhbmQgaXMgdXNlZCB0byBjb252ZXJ0IGJldHdlZW4gaGVpZ2h0XG4gIC8vIGFuZCBsaW5lIG9iamVjdCwgYW5kIHRvIGZpbmQgdGhlIHRvdGFsIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQuXG4gIC8vXG4gIC8vIFNlZSBhbHNvIGh0dHA6Ly9tYXJpam5oYXZlcmJla2UubmwvYmxvZy9jb2RlbWlycm9yLWxpbmUtdHJlZS5odG1sXG5cbiAgZnVuY3Rpb24gTGVhZkNodW5rKGxpbmVzKSB7XG4gICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMCwgaGVpZ2h0ID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBsaW5lc1tpXS5wYXJlbnQgPSB0aGlzO1xuICAgICAgaGVpZ2h0ICs9IGxpbmVzW2ldLmhlaWdodDtcbiAgICB9XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBMZWFmQ2h1bmsucHJvdG90eXBlID0ge1xuICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxpbmVzLmxlbmd0aDsgfSxcbiAgICAvLyBSZW1vdmUgdGhlIG4gbGluZXMgYXQgb2Zmc2V0ICdhdCcuXG4gICAgcmVtb3ZlSW5uZXI6IGZ1bmN0aW9uKGF0LCBuKSB7XG4gICAgICBmb3IgKHZhciBpID0gYXQsIGUgPSBhdCArIG47IGkgPCBlOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgICB0aGlzLmhlaWdodCAtPSBsaW5lLmhlaWdodDtcbiAgICAgICAgY2xlYW5VcExpbmUobGluZSk7XG4gICAgICAgIHNpZ25hbExhdGVyKGxpbmUsIFwiZGVsZXRlXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5saW5lcy5zcGxpY2UoYXQsIG4pO1xuICAgIH0sXG4gICAgLy8gSGVscGVyIHVzZWQgdG8gY29sbGFwc2UgYSBzbWFsbCBicmFuY2ggaW50byBhIHNpbmdsZSBsZWFmLlxuICAgIGNvbGxhcHNlOiBmdW5jdGlvbihsaW5lcykge1xuICAgICAgbGluZXMucHVzaC5hcHBseShsaW5lcywgdGhpcy5saW5lcyk7XG4gICAgfSxcbiAgICAvLyBJbnNlcnQgdGhlIGdpdmVuIGFycmF5IG9mIGxpbmVzIGF0IG9mZnNldCAnYXQnLCBjb3VudCB0aGVtIGFzXG4gICAgLy8gaGF2aW5nIHRoZSBnaXZlbiBoZWlnaHQuXG4gICAgaW5zZXJ0SW5uZXI6IGZ1bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmhlaWdodCArPSBoZWlnaHQ7XG4gICAgICB0aGlzLmxpbmVzID0gdGhpcy5saW5lcy5zbGljZSgwLCBhdCkuY29uY2F0KGxpbmVzKS5jb25jYXQodGhpcy5saW5lcy5zbGljZShhdCkpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkgbGluZXNbaV0ucGFyZW50ID0gdGhpcztcbiAgICB9LFxuICAgIC8vIFVzZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcGFydCBvZiB0aGUgdHJlZS5cbiAgICBpdGVyTjogZnVuY3Rpb24oYXQsIG4sIG9wKSB7XG4gICAgICBmb3IgKHZhciBlID0gYXQgKyBuOyBhdCA8IGU7ICsrYXQpXG4gICAgICAgIGlmIChvcCh0aGlzLmxpbmVzW2F0XSkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBCcmFuY2hDaHVuayhjaGlsZHJlbikge1xuICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB2YXIgc2l6ZSA9IDAsIGhlaWdodCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGNoID0gY2hpbGRyZW5baV07XG4gICAgICBzaXplICs9IGNoLmNodW5rU2l6ZSgpOyBoZWlnaHQgKz0gY2guaGVpZ2h0O1xuICAgICAgY2gucGFyZW50ID0gdGhpcztcbiAgICB9XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gIH1cblxuICBCcmFuY2hDaHVuay5wcm90b3R5cGUgPSB7XG4gICAgY2h1bmtTaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2l6ZTsgfSxcbiAgICByZW1vdmVJbm5lcjogZnVuY3Rpb24oYXQsIG4pIHtcbiAgICAgIHRoaXMuc2l6ZSAtPSBuO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChhdCA8IHN6KSB7XG4gICAgICAgICAgdmFyIHJtID0gTWF0aC5taW4obiwgc3ogLSBhdCksIG9sZEhlaWdodCA9IGNoaWxkLmhlaWdodDtcbiAgICAgICAgICBjaGlsZC5yZW1vdmVJbm5lcihhdCwgcm0pO1xuICAgICAgICAgIHRoaXMuaGVpZ2h0IC09IG9sZEhlaWdodCAtIGNoaWxkLmhlaWdodDtcbiAgICAgICAgICBpZiAoc3ogPT0gcm0pIHsgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaS0tLCAxKTsgY2hpbGQucGFyZW50ID0gbnVsbDsgfVxuICAgICAgICAgIGlmICgobiAtPSBybSkgPT0gMCkgYnJlYWs7XG4gICAgICAgICAgYXQgPSAwO1xuICAgICAgICB9IGVsc2UgYXQgLT0gc3o7XG4gICAgICB9XG4gICAgICAvLyBJZiB0aGUgcmVzdWx0IGlzIHNtYWxsZXIgdGhhbiAyNSBsaW5lcywgZW5zdXJlIHRoYXQgaXQgaXMgYVxuICAgICAgLy8gc2luZ2xlIGxlYWYgbm9kZS5cbiAgICAgIGlmICh0aGlzLnNpemUgLSBuIDwgMjUgJiZcbiAgICAgICAgICAodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAxIHx8ICEodGhpcy5jaGlsZHJlblswXSBpbnN0YW5jZW9mIExlYWZDaHVuaykpKSB7XG4gICAgICAgIHZhciBsaW5lcyA9IFtdO1xuICAgICAgICB0aGlzLmNvbGxhcHNlKGxpbmVzKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtuZXcgTGVhZkNodW5rKGxpbmVzKV07XG4gICAgICAgIHRoaXMuY2hpbGRyZW5bMF0ucGFyZW50ID0gdGhpcztcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbGxhcHNlOiBmdW5jdGlvbihsaW5lcykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB0aGlzLmNoaWxkcmVuW2ldLmNvbGxhcHNlKGxpbmVzKTtcbiAgICB9LFxuICAgIGluc2VydElubmVyOiBmdW5jdGlvbihhdCwgbGluZXMsIGhlaWdodCkge1xuICAgICAgdGhpcy5zaXplICs9IGxpbmVzLmxlbmd0aDtcbiAgICAgIHRoaXMuaGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPD0gc3opIHtcbiAgICAgICAgICBjaGlsZC5pbnNlcnRJbm5lcihhdCwgbGluZXMsIGhlaWdodCk7XG4gICAgICAgICAgaWYgKGNoaWxkLmxpbmVzICYmIGNoaWxkLmxpbmVzLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgICAgICB3aGlsZSAoY2hpbGQubGluZXMubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgICAgdmFyIHNwaWxsZWQgPSBjaGlsZC5saW5lcy5zcGxpY2UoY2hpbGQubGluZXMubGVuZ3RoIC0gMjUsIDI1KTtcbiAgICAgICAgICAgICAgdmFyIG5ld2xlYWYgPSBuZXcgTGVhZkNodW5rKHNwaWxsZWQpO1xuICAgICAgICAgICAgICBjaGlsZC5oZWlnaHQgLT0gbmV3bGVhZi5oZWlnaHQ7XG4gICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGkgKyAxLCAwLCBuZXdsZWFmKTtcbiAgICAgICAgICAgICAgbmV3bGVhZi5wYXJlbnQgPSB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXliZVNwaWxsKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGF0IC09IHN6O1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gV2hlbiBhIG5vZGUgaGFzIGdyb3duLCBjaGVjayB3aGV0aGVyIGl0IHNob3VsZCBiZSBzcGxpdC5cbiAgICBtYXliZVNwaWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA8PSAxMCkgcmV0dXJuO1xuICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgIGRvIHtcbiAgICAgICAgdmFyIHNwaWxsZWQgPSBtZS5jaGlsZHJlbi5zcGxpY2UobWUuY2hpbGRyZW4ubGVuZ3RoIC0gNSwgNSk7XG4gICAgICAgIHZhciBzaWJsaW5nID0gbmV3IEJyYW5jaENodW5rKHNwaWxsZWQpO1xuICAgICAgICBpZiAoIW1lLnBhcmVudCkgeyAvLyBCZWNvbWUgdGhlIHBhcmVudCBub2RlXG4gICAgICAgICAgdmFyIGNvcHkgPSBuZXcgQnJhbmNoQ2h1bmsobWUuY2hpbGRyZW4pO1xuICAgICAgICAgIGNvcHkucGFyZW50ID0gbWU7XG4gICAgICAgICAgbWUuY2hpbGRyZW4gPSBbY29weSwgc2libGluZ107XG4gICAgICAgICAgbWUgPSBjb3B5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lLnNpemUgLT0gc2libGluZy5zaXplO1xuICAgICAgICAgIG1lLmhlaWdodCAtPSBzaWJsaW5nLmhlaWdodDtcbiAgICAgICAgICB2YXIgbXlJbmRleCA9IGluZGV4T2YobWUucGFyZW50LmNoaWxkcmVuLCBtZSk7XG4gICAgICAgICAgbWUucGFyZW50LmNoaWxkcmVuLnNwbGljZShteUluZGV4ICsgMSwgMCwgc2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgc2libGluZy5wYXJlbnQgPSBtZS5wYXJlbnQ7XG4gICAgICB9IHdoaWxlIChtZS5jaGlsZHJlbi5sZW5ndGggPiAxMCk7XG4gICAgICBtZS5wYXJlbnQubWF5YmVTcGlsbCgpO1xuICAgIH0sXG4gICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChhdCA8IHN6KSB7XG4gICAgICAgICAgdmFyIHVzZWQgPSBNYXRoLm1pbihuLCBzeiAtIGF0KTtcbiAgICAgICAgICBpZiAoY2hpbGQuaXRlck4oYXQsIHVzZWQsIG9wKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgaWYgKChuIC09IHVzZWQpID09IDApIGJyZWFrO1xuICAgICAgICAgIGF0ID0gMDtcbiAgICAgICAgfSBlbHNlIGF0IC09IHN6O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgbmV4dERvY0lkID0gMDtcbiAgdmFyIERvYyA9IENvZGVNaXJyb3IuRG9jID0gZnVuY3Rpb24odGV4dCwgbW9kZSwgZmlyc3RMaW5lLCBsaW5lU2VwKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERvYykpIHJldHVybiBuZXcgRG9jKHRleHQsIG1vZGUsIGZpcnN0TGluZSwgbGluZVNlcCk7XG4gICAgaWYgKGZpcnN0TGluZSA9PSBudWxsKSBmaXJzdExpbmUgPSAwO1xuXG4gICAgQnJhbmNoQ2h1bmsuY2FsbCh0aGlzLCBbbmV3IExlYWZDaHVuayhbbmV3IExpbmUoXCJcIiwgbnVsbCldKV0pO1xuICAgIHRoaXMuZmlyc3QgPSBmaXJzdExpbmU7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbExlZnQgPSAwO1xuICAgIHRoaXMuY2FudEVkaXQgPSBmYWxzZTtcbiAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IDE7XG4gICAgdGhpcy5mcm9udGllciA9IGZpcnN0TGluZTtcbiAgICB2YXIgc3RhcnQgPSBQb3MoZmlyc3RMaW5lLCAwKTtcbiAgICB0aGlzLnNlbCA9IHNpbXBsZVNlbGVjdGlvbihzdGFydCk7XG4gICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkobnVsbCk7XG4gICAgdGhpcy5pZCA9ICsrbmV4dERvY0lkO1xuICAgIHRoaXMubW9kZU9wdGlvbiA9IG1vZGU7XG4gICAgdGhpcy5saW5lU2VwID0gbGluZVNlcDtcbiAgICB0aGlzLmV4dGVuZCA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiB0ZXh0ID09IFwic3RyaW5nXCIpIHRleHQgPSB0aGlzLnNwbGl0TGluZXModGV4dCk7XG4gICAgdXBkYXRlRG9jKHRoaXMsIHtmcm9tOiBzdGFydCwgdG86IHN0YXJ0LCB0ZXh0OiB0ZXh0fSk7XG4gICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbihzdGFydCksIHNlbF9kb250U2Nyb2xsKTtcbiAgfTtcblxuICBEb2MucHJvdG90eXBlID0gY3JlYXRlT2JqKEJyYW5jaENodW5rLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiBEb2MsXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBkb2N1bWVudC4gU3VwcG9ydHMgdHdvIGZvcm1zIC0tIHdpdGggb25seSBvbmVcbiAgICAvLyBhcmd1bWVudCwgaXQgY2FsbHMgdGhhdCBmb3IgZWFjaCBsaW5lIGluIHRoZSBkb2N1bWVudC4gV2l0aFxuICAgIC8vIHRocmVlLCBpdCBpdGVyYXRlcyBvdmVyIHRoZSByYW5nZSBnaXZlbiBieSB0aGUgZmlyc3QgdHdvICh3aXRoXG4gICAgLy8gdGhlIHNlY29uZCBiZWluZyBub24taW5jbHVzaXZlKS5cbiAgICBpdGVyOiBmdW5jdGlvbihmcm9tLCB0bywgb3ApIHtcbiAgICAgIGlmIChvcCkgdGhpcy5pdGVyTihmcm9tIC0gdGhpcy5maXJzdCwgdG8gLSBmcm9tLCBvcCk7XG4gICAgICBlbHNlIHRoaXMuaXRlck4odGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSwgZnJvbSk7XG4gICAgfSxcblxuICAgIC8vIE5vbi1wdWJsaWMgaW50ZXJmYWNlIGZvciBhZGRpbmcgYW5kIHJlbW92aW5nIGxpbmVzLlxuICAgIGluc2VydDogZnVuY3Rpb24oYXQsIGxpbmVzKSB7XG4gICAgICB2YXIgaGVpZ2h0ID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7XG4gICAgICB0aGlzLmluc2VydElubmVyKGF0IC0gdGhpcy5maXJzdCwgbGluZXMsIGhlaWdodCk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGF0LCBuKSB7IHRoaXMucmVtb3ZlSW5uZXIoYXQgLSB0aGlzLmZpcnN0LCBuKTsgfSxcblxuICAgIC8vIEZyb20gaGVyZSwgdGhlIG1ldGhvZHMgYXJlIHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuIE1vc3RcbiAgICAvLyBhcmUgYWxzbyBhdmFpbGFibGUgZnJvbSBDb2RlTWlycm9yIChlZGl0b3IpIGluc3RhbmNlcy5cblxuICAgIGdldFZhbHVlOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgbGluZXMgPSBnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKTtcbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgcmV0dXJuIGxpbmVzO1xuICAgICAgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSk7XG4gICAgfSxcbiAgICBzZXRWYWx1ZTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oY29kZSkge1xuICAgICAgdmFyIHRvcCA9IFBvcyh0aGlzLmZpcnN0LCAwKSwgbGFzdCA9IHRoaXMuZmlyc3QgKyB0aGlzLnNpemUgLSAxO1xuICAgICAgbWFrZUNoYW5nZSh0aGlzLCB7ZnJvbTogdG9wLCB0bzogUG9zKGxhc3QsIGdldExpbmUodGhpcywgbGFzdCkudGV4dC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5zcGxpdExpbmVzKGNvZGUpLCBvcmlnaW46IFwic2V0VmFsdWVcIiwgZnVsbDogdHJ1ZX0sIHRydWUpO1xuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbih0b3ApKTtcbiAgICB9KSxcbiAgICByZXBsYWNlUmFuZ2U6IGZ1bmN0aW9uKGNvZGUsIGZyb20sIHRvLCBvcmlnaW4pIHtcbiAgICAgIGZyb20gPSBjbGlwUG9zKHRoaXMsIGZyb20pO1xuICAgICAgdG8gPSB0byA/IGNsaXBQb3ModGhpcywgdG8pIDogZnJvbTtcbiAgICAgIHJlcGxhY2VSYW5nZSh0aGlzLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKTtcbiAgICB9LFxuICAgIGdldFJhbmdlOiBmdW5jdGlvbihmcm9tLCB0bywgbGluZVNlcCkge1xuICAgICAgdmFyIGxpbmVzID0gZ2V0QmV0d2Vlbih0aGlzLCBjbGlwUG9zKHRoaXMsIGZyb20pLCBjbGlwUG9zKHRoaXMsIHRvKSk7XG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcbiAgICAgIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpO1xuICAgIH0sXG5cbiAgICBnZXRMaW5lOiBmdW5jdGlvbihsaW5lKSB7dmFyIGwgPSB0aGlzLmdldExpbmVIYW5kbGUobGluZSk7IHJldHVybiBsICYmIGwudGV4dDt9LFxuXG4gICAgZ2V0TGluZUhhbmRsZTogZnVuY3Rpb24obGluZSkge2lmIChpc0xpbmUodGhpcywgbGluZSkpIHJldHVybiBnZXRMaW5lKHRoaXMsIGxpbmUpO30sXG4gICAgZ2V0TGluZU51bWJlcjogZnVuY3Rpb24obGluZSkge3JldHVybiBsaW5lTm8obGluZSk7fSxcblxuICAgIGdldExpbmVIYW5kbGVWaXN1YWxTdGFydDogZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIpIGxpbmUgPSBnZXRMaW5lKHRoaXMsIGxpbmUpO1xuICAgICAgcmV0dXJuIHZpc3VhbExpbmUobGluZSk7XG4gICAgfSxcblxuICAgIGxpbmVDb3VudDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2l6ZTt9LFxuICAgIGZpcnN0TGluZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZmlyc3Q7fSxcbiAgICBsYXN0TGluZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUgLSAxO30sXG5cbiAgICBjbGlwUG9zOiBmdW5jdGlvbihwb3MpIHtyZXR1cm4gY2xpcFBvcyh0aGlzLCBwb3MpO30sXG5cbiAgICBnZXRDdXJzb3I6IGZ1bmN0aW9uKHN0YXJ0KSB7XG4gICAgICB2YXIgcmFuZ2UgPSB0aGlzLnNlbC5wcmltYXJ5KCksIHBvcztcbiAgICAgIGlmIChzdGFydCA9PSBudWxsIHx8IHN0YXJ0ID09IFwiaGVhZFwiKSBwb3MgPSByYW5nZS5oZWFkO1xuICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gXCJhbmNob3JcIikgcG9zID0gcmFuZ2UuYW5jaG9yO1xuICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gXCJlbmRcIiB8fCBzdGFydCA9PSBcInRvXCIgfHwgc3RhcnQgPT09IGZhbHNlKSBwb3MgPSByYW5nZS50bygpO1xuICAgICAgZWxzZSBwb3MgPSByYW5nZS5mcm9tKCk7XG4gICAgICByZXR1cm4gcG9zO1xuICAgIH0sXG4gICAgbGlzdFNlbGVjdGlvbnM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5zZWwucmFuZ2VzOyB9LFxuICAgIHNvbWV0aGluZ1NlbGVjdGVkOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5zZWwuc29tZXRoaW5nU2VsZWN0ZWQoKTt9LFxuXG4gICAgc2V0Q3Vyc29yOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBjaCwgb3B0aW9ucykge1xuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgdHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIiA/IFBvcyhsaW5lLCBjaCB8fCAwKSA6IGxpbmUpLCBudWxsLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBzZXRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgYW5jaG9yKSwgY2xpcFBvcyh0aGlzLCBoZWFkIHx8IGFuY2hvciksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGVhZCwgb3RoZXIsIG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGhlYWQpLCBvdGhlciAmJiBjbGlwUG9zKHRoaXMsIG90aGVyKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgZXh0ZW5kU2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGVhZHMsIG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbnModGhpcywgY2xpcFBvc0FycmF5KHRoaXMsIGhlYWRzKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgZXh0ZW5kU2VsZWN0aW9uc0J5OiBkb2NNZXRob2RPcChmdW5jdGlvbihmLCBvcHRpb25zKSB7XG4gICAgICB2YXIgaGVhZHMgPSBtYXAodGhpcy5zZWwucmFuZ2VzLCBmKTtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbnModGhpcywgY2xpcFBvc0FycmF5KHRoaXMsIGhlYWRzKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgc2V0U2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24ocmFuZ2VzLCBwcmltYXJ5LCBvcHRpb25zKSB7XG4gICAgICBpZiAoIXJhbmdlcy5sZW5ndGgpIHJldHVybjtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBvdXQgPSBbXTsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGNsaXBQb3ModGhpcywgcmFuZ2VzW2ldLmFuY2hvciksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKHRoaXMsIHJhbmdlc1tpXS5oZWFkKSk7XG4gICAgICBpZiAocHJpbWFyeSA9PSBudWxsKSBwcmltYXJ5ID0gTWF0aC5taW4ocmFuZ2VzLmxlbmd0aCAtIDEsIHRoaXMuc2VsLnByaW1JbmRleCk7XG4gICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2VsZWN0aW9uKG91dCwgcHJpbWFyeSksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGFkZFNlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oYW5jaG9yLCBoZWFkLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKGNsaXBQb3ModGhpcywgYW5jaG9yKSwgY2xpcFBvcyh0aGlzLCBoZWFkIHx8IGFuY2hvcikpKTtcbiAgICAgIHNldFNlbGVjdGlvbih0aGlzLCBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLCByYW5nZXMubGVuZ3RoIC0gMSksIG9wdGlvbnMpO1xuICAgIH0pLFxuXG4gICAgZ2V0U2VsZWN0aW9uOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzLCBsaW5lcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWwgPSBnZXRCZXR3ZWVuKHRoaXMsIHJhbmdlc1tpXS5mcm9tKCksIHJhbmdlc1tpXS50bygpKTtcbiAgICAgICAgbGluZXMgPSBsaW5lcyA/IGxpbmVzLmNvbmNhdChzZWwpIDogc2VsO1xuICAgICAgfVxuICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNlKSByZXR1cm4gbGluZXM7XG4gICAgICBlbHNlIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpO1xuICAgIH0sXG4gICAgZ2V0U2VsZWN0aW9uczogZnVuY3Rpb24obGluZVNlcCkge1xuICAgICAgdmFyIHBhcnRzID0gW10sIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWwgPSBnZXRCZXR3ZWVuKHRoaXMsIHJhbmdlc1tpXS5mcm9tKCksIHJhbmdlc1tpXS50bygpKTtcbiAgICAgICAgaWYgKGxpbmVTZXAgIT09IGZhbHNlKSBzZWwgPSBzZWwuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKTtcbiAgICAgICAgcGFydHNbaV0gPSBzZWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFydHM7XG4gICAgfSxcbiAgICByZXBsYWNlU2VsZWN0aW9uOiBmdW5jdGlvbihjb2RlLCBjb2xsYXBzZSwgb3JpZ2luKSB7XG4gICAgICB2YXIgZHVwID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgZHVwW2ldID0gY29kZTtcbiAgICAgIHRoaXMucmVwbGFjZVNlbGVjdGlvbnMoZHVwLCBjb2xsYXBzZSwgb3JpZ2luIHx8IFwiK2lucHV0XCIpO1xuICAgIH0sXG4gICAgcmVwbGFjZVNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGNvZGUsIGNvbGxhcHNlLCBvcmlnaW4pIHtcbiAgICAgIHZhciBjaGFuZ2VzID0gW10sIHNlbCA9IHRoaXMuc2VsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICAgIGNoYW5nZXNbaV0gPSB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmFuZ2UudG8oKSwgdGV4dDogdGhpcy5zcGxpdExpbmVzKGNvZGVbaV0pLCBvcmlnaW46IG9yaWdpbn07XG4gICAgICB9XG4gICAgICB2YXIgbmV3U2VsID0gY29sbGFwc2UgJiYgY29sbGFwc2UgIT0gXCJlbmRcIiAmJiBjb21wdXRlUmVwbGFjZWRTZWwodGhpcywgY2hhbmdlcywgY29sbGFwc2UpO1xuICAgICAgZm9yICh2YXIgaSA9IGNoYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIG1ha2VDaGFuZ2UodGhpcywgY2hhbmdlc1tpXSk7XG4gICAgICBpZiAobmV3U2VsKSBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeSh0aGlzLCBuZXdTZWwpO1xuICAgICAgZWxzZSBpZiAodGhpcy5jbSkgZW5zdXJlQ3Vyc29yVmlzaWJsZSh0aGlzLmNtKTtcbiAgICB9KSxcbiAgICB1bmRvOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJ1bmRvXCIpO30pLFxuICAgIHJlZG86IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInJlZG9cIik7fSksXG4gICAgdW5kb1NlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwidW5kb1wiLCB0cnVlKTt9KSxcbiAgICByZWRvU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJyZWRvXCIsIHRydWUpO30pLFxuXG4gICAgc2V0RXh0ZW5kaW5nOiBmdW5jdGlvbih2YWwpIHt0aGlzLmV4dGVuZCA9IHZhbDt9LFxuICAgIGdldEV4dGVuZGluZzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZXh0ZW5kO30sXG5cbiAgICBoaXN0b3J5U2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaGlzdCA9IHRoaXMuaGlzdG9yeSwgZG9uZSA9IDAsIHVuZG9uZSA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3QuZG9uZS5sZW5ndGg7IGkrKykgaWYgKCFoaXN0LmRvbmVbaV0ucmFuZ2VzKSArK2RvbmU7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3QudW5kb25lLmxlbmd0aDsgaSsrKSBpZiAoIWhpc3QudW5kb25lW2ldLnJhbmdlcykgKyt1bmRvbmU7XG4gICAgICByZXR1cm4ge3VuZG86IGRvbmUsIHJlZG86IHVuZG9uZX07XG4gICAgfSxcbiAgICBjbGVhckhpc3Rvcnk6IGZ1bmN0aW9uKCkge3RoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKTt9LFxuXG4gICAgbWFya0NsZWFuOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xlYW5HZW5lcmF0aW9uID0gdGhpcy5jaGFuZ2VHZW5lcmF0aW9uKHRydWUpO1xuICAgIH0sXG4gICAgY2hhbmdlR2VuZXJhdGlvbjogZnVuY3Rpb24oZm9yY2VTcGxpdCkge1xuICAgICAgaWYgKGZvcmNlU3BsaXQpXG4gICAgICAgIHRoaXMuaGlzdG9yeS5sYXN0T3AgPSB0aGlzLmhpc3RvcnkubGFzdFNlbE9wID0gdGhpcy5oaXN0b3J5Lmxhc3RPcmlnaW4gPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZW5lcmF0aW9uO1xuICAgIH0sXG4gICAgaXNDbGVhbjogZnVuY3Rpb24gKGdlbikge1xuICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZW5lcmF0aW9uID09IChnZW4gfHwgdGhpcy5jbGVhbkdlbmVyYXRpb24pO1xuICAgIH0sXG5cbiAgICBnZXRIaXN0b3J5OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7ZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkuZG9uZSksXG4gICAgICAgICAgICAgIHVuZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkudW5kb25lKX07XG4gICAgfSxcbiAgICBzZXRIaXN0b3J5OiBmdW5jdGlvbihoaXN0RGF0YSkge1xuICAgICAgdmFyIGhpc3QgPSB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbik7XG4gICAgICBoaXN0LmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KGhpc3REYXRhLmRvbmUuc2xpY2UoMCksIG51bGwsIHRydWUpO1xuICAgICAgaGlzdC51bmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KGhpc3REYXRhLnVuZG9uZS5zbGljZSgwKSwgbnVsbCwgdHJ1ZSk7XG4gICAgfSxcblxuICAgIGFkZExpbmVDbGFzczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGFuZGxlLCB3aGVyZSwgY2xzKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLCBoYW5kbGUsIHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlclwiIDogXCJjbGFzc1wiLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBwcm9wID0gd2hlcmUgPT0gXCJ0ZXh0XCIgPyBcInRleHRDbGFzc1wiXG4gICAgICAgICAgICAgICAgIDogd2hlcmUgPT0gXCJiYWNrZ3JvdW5kXCIgPyBcImJnQ2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlckNsYXNzXCIgOiBcIndyYXBDbGFzc1wiO1xuICAgICAgICBpZiAoIWxpbmVbcHJvcF0pIGxpbmVbcHJvcF0gPSBjbHM7XG4gICAgICAgIGVsc2UgaWYgKGNsYXNzVGVzdChjbHMpLnRlc3QobGluZVtwcm9wXSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZWxzZSBsaW5lW3Byb3BdICs9IFwiIFwiICsgY2xzO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0pLFxuICAgIHJlbW92ZUxpbmVDbGFzczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGFuZGxlLCB3aGVyZSwgY2xzKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLCBoYW5kbGUsIHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlclwiIDogXCJjbGFzc1wiLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBwcm9wID0gd2hlcmUgPT0gXCJ0ZXh0XCIgPyBcInRleHRDbGFzc1wiXG4gICAgICAgICAgICAgICAgIDogd2hlcmUgPT0gXCJiYWNrZ3JvdW5kXCIgPyBcImJnQ2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlckNsYXNzXCIgOiBcIndyYXBDbGFzc1wiO1xuICAgICAgICB2YXIgY3VyID0gbGluZVtwcm9wXTtcbiAgICAgICAgaWYgKCFjdXIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoY2xzID09IG51bGwpIGxpbmVbcHJvcF0gPSBudWxsO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgZm91bmQgPSBjdXIubWF0Y2goY2xhc3NUZXN0KGNscykpO1xuICAgICAgICAgIGlmICghZm91bmQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB2YXIgZW5kID0gZm91bmQuaW5kZXggKyBmb3VuZFswXS5sZW5ndGg7XG4gICAgICAgICAgbGluZVtwcm9wXSA9IGN1ci5zbGljZSgwLCBmb3VuZC5pbmRleCkgKyAoIWZvdW5kLmluZGV4IHx8IGVuZCA9PSBjdXIubGVuZ3RoID8gXCJcIiA6IFwiIFwiKSArIGN1ci5zbGljZShlbmQpIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIGFkZExpbmVXaWRnZXQ6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgbm9kZSwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIGFkZExpbmVXaWRnZXQodGhpcywgaGFuZGxlLCBub2RlLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICByZW1vdmVMaW5lV2lkZ2V0OiBmdW5jdGlvbih3aWRnZXQpIHsgd2lkZ2V0LmNsZWFyKCk7IH0sXG5cbiAgICBtYXJrVGV4dDogZnVuY3Rpb24oZnJvbSwgdG8sIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBtYXJrVGV4dCh0aGlzLCBjbGlwUG9zKHRoaXMsIGZyb20pLCBjbGlwUG9zKHRoaXMsIHRvKSwgb3B0aW9ucywgb3B0aW9ucyAmJiBvcHRpb25zLnR5cGUgfHwgXCJyYW5nZVwiKTtcbiAgICB9LFxuICAgIHNldEJvb2ttYXJrOiBmdW5jdGlvbihwb3MsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZWFsT3B0cyA9IHtyZXBsYWNlZFdpdGg6IG9wdGlvbnMgJiYgKG9wdGlvbnMubm9kZVR5cGUgPT0gbnVsbCA/IG9wdGlvbnMud2lkZ2V0IDogb3B0aW9ucyksXG4gICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0TGVmdDogb3B0aW9ucyAmJiBvcHRpb25zLmluc2VydExlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgY2xlYXJXaGVuRW1wdHk6IGZhbHNlLCBzaGFyZWQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5zaGFyZWQsXG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTW91c2VFdmVudHM6IG9wdGlvbnMgJiYgb3B0aW9ucy5oYW5kbGVNb3VzZUV2ZW50c307XG4gICAgICBwb3MgPSBjbGlwUG9zKHRoaXMsIHBvcyk7XG4gICAgICByZXR1cm4gbWFya1RleHQodGhpcywgcG9zLCBwb3MsIHJlYWxPcHRzLCBcImJvb2ttYXJrXCIpO1xuICAgIH0sXG4gICAgZmluZE1hcmtzQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgdmFyIG1hcmtlcnMgPSBbXSwgc3BhbnMgPSBnZXRMaW5lKHRoaXMsIHBvcy5saW5lKS5tYXJrZWRTcGFucztcbiAgICAgIGlmIChzcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgc3BhbiA9IHNwYW5zW2ldO1xuICAgICAgICBpZiAoKHNwYW4uZnJvbSA9PSBudWxsIHx8IHNwYW4uZnJvbSA8PSBwb3MuY2gpICYmXG4gICAgICAgICAgICAoc3Bhbi50byA9PSBudWxsIHx8IHNwYW4udG8gPj0gcG9zLmNoKSlcbiAgICAgICAgICBtYXJrZXJzLnB1c2goc3Bhbi5tYXJrZXIucGFyZW50IHx8IHNwYW4ubWFya2VyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXJrZXJzO1xuICAgIH0sXG4gICAgZmluZE1hcmtzOiBmdW5jdGlvbihmcm9tLCB0bywgZmlsdGVyKSB7XG4gICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTsgdG8gPSBjbGlwUG9zKHRoaXMsIHRvKTtcbiAgICAgIHZhciBmb3VuZCA9IFtdLCBsaW5lTm8gPSBmcm9tLmxpbmU7XG4gICAgICB0aGlzLml0ZXIoZnJvbS5saW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgICBpZiAoc3BhbnMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgc3BhbiA9IHNwYW5zW2ldO1xuICAgICAgICAgIGlmICghKHNwYW4udG8gIT0gbnVsbCAmJiBsaW5lTm8gPT0gZnJvbS5saW5lICYmIGZyb20uY2ggPj0gc3Bhbi50byB8fFxuICAgICAgICAgICAgICAgIHNwYW4uZnJvbSA9PSBudWxsICYmIGxpbmVObyAhPSBmcm9tLmxpbmUgfHxcbiAgICAgICAgICAgICAgICBzcGFuLmZyb20gIT0gbnVsbCAmJiBsaW5lTm8gPT0gdG8ubGluZSAmJiBzcGFuLmZyb20gPj0gdG8uY2gpICYmXG4gICAgICAgICAgICAgICghZmlsdGVyIHx8IGZpbHRlcihzcGFuLm1hcmtlcikpKVxuICAgICAgICAgICAgZm91bmQucHVzaChzcGFuLm1hcmtlci5wYXJlbnQgfHwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICB9XG4gICAgICAgICsrbGluZU5vO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfSxcbiAgICBnZXRBbGxNYXJrczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWFya2VycyA9IFtdO1xuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgdmFyIHNwcyA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgICAgIGlmIChzcHMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKVxuICAgICAgICAgIGlmIChzcHNbaV0uZnJvbSAhPSBudWxsKSBtYXJrZXJzLnB1c2goc3BzW2ldLm1hcmtlcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtYXJrZXJzO1xuICAgIH0sXG5cbiAgICBwb3NGcm9tSW5kZXg6IGZ1bmN0aW9uKG9mZikge1xuICAgICAgdmFyIGNoLCBsaW5lTm8gPSB0aGlzLmZpcnN0LCBzZXBTaXplID0gdGhpcy5saW5lU2VwYXJhdG9yKCkubGVuZ3RoO1xuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgdmFyIHN6ID0gbGluZS50ZXh0Lmxlbmd0aCArIHNlcFNpemU7XG4gICAgICAgIGlmIChzeiA+IG9mZikgeyBjaCA9IG9mZjsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgb2ZmIC09IHN6O1xuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsaXBQb3ModGhpcywgUG9zKGxpbmVObywgY2gpKTtcbiAgICB9LFxuICAgIGluZGV4RnJvbVBvczogZnVuY3Rpb24gKGNvb3Jkcykge1xuICAgICAgY29vcmRzID0gY2xpcFBvcyh0aGlzLCBjb29yZHMpO1xuICAgICAgdmFyIGluZGV4ID0gY29vcmRzLmNoO1xuICAgICAgaWYgKGNvb3Jkcy5saW5lIDwgdGhpcy5maXJzdCB8fCBjb29yZHMuY2ggPCAwKSByZXR1cm4gMDtcbiAgICAgIHZhciBzZXBTaXplID0gdGhpcy5saW5lU2VwYXJhdG9yKCkubGVuZ3RoO1xuICAgICAgdGhpcy5pdGVyKHRoaXMuZmlyc3QsIGNvb3Jkcy5saW5lLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBpbmRleCArPSBsaW5lLnRleHQubGVuZ3RoICsgc2VwU2l6ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH0sXG5cbiAgICBjb3B5OiBmdW5jdGlvbihjb3B5SGlzdG9yeSkge1xuICAgICAgdmFyIGRvYyA9IG5ldyBEb2MoZ2V0TGluZXModGhpcywgdGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVPcHRpb24sIHRoaXMuZmlyc3QsIHRoaXMubGluZVNlcCk7XG4gICAgICBkb2Muc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3A7IGRvYy5zY3JvbGxMZWZ0ID0gdGhpcy5zY3JvbGxMZWZ0O1xuICAgICAgZG9jLnNlbCA9IHRoaXMuc2VsO1xuICAgICAgZG9jLmV4dGVuZCA9IGZhbHNlO1xuICAgICAgaWYgKGNvcHlIaXN0b3J5KSB7XG4gICAgICAgIGRvYy5oaXN0b3J5LnVuZG9EZXB0aCA9IHRoaXMuaGlzdG9yeS51bmRvRGVwdGg7XG4gICAgICAgIGRvYy5zZXRIaXN0b3J5KHRoaXMuZ2V0SGlzdG9yeSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb2M7XG4gICAgfSxcblxuICAgIGxpbmtlZERvYzogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgICB2YXIgZnJvbSA9IHRoaXMuZmlyc3QsIHRvID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZTtcbiAgICAgIGlmIChvcHRpb25zLmZyb20gIT0gbnVsbCAmJiBvcHRpb25zLmZyb20gPiBmcm9tKSBmcm9tID0gb3B0aW9ucy5mcm9tO1xuICAgICAgaWYgKG9wdGlvbnMudG8gIT0gbnVsbCAmJiBvcHRpb25zLnRvIDwgdG8pIHRvID0gb3B0aW9ucy50bztcbiAgICAgIHZhciBjb3B5ID0gbmV3IERvYyhnZXRMaW5lcyh0aGlzLCBmcm9tLCB0byksIG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGVPcHRpb24sIGZyb20sIHRoaXMubGluZVNlcCk7XG4gICAgICBpZiAob3B0aW9ucy5zaGFyZWRIaXN0KSBjb3B5Lmhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XG4gICAgICAodGhpcy5saW5rZWQgfHwgKHRoaXMubGlua2VkID0gW10pKS5wdXNoKHtkb2M6IGNvcHksIHNoYXJlZEhpc3Q6IG9wdGlvbnMuc2hhcmVkSGlzdH0pO1xuICAgICAgY29weS5saW5rZWQgPSBbe2RvYzogdGhpcywgaXNQYXJlbnQ6IHRydWUsIHNoYXJlZEhpc3Q6IG9wdGlvbnMuc2hhcmVkSGlzdH1dO1xuICAgICAgY29weVNoYXJlZE1hcmtlcnMoY29weSwgZmluZFNoYXJlZE1hcmtlcnModGhpcykpO1xuICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfSxcbiAgICB1bmxpbmtEb2M6IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBDb2RlTWlycm9yKSBvdGhlciA9IG90aGVyLmRvYztcbiAgICAgIGlmICh0aGlzLmxpbmtlZCkgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmtlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluayA9IHRoaXMubGlua2VkW2ldO1xuICAgICAgICBpZiAobGluay5kb2MgIT0gb3RoZXIpIGNvbnRpbnVlO1xuICAgICAgICB0aGlzLmxpbmtlZC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIG90aGVyLnVubGlua0RvYyh0aGlzKTtcbiAgICAgICAgZGV0YWNoU2hhcmVkTWFya2VycyhmaW5kU2hhcmVkTWFya2Vycyh0aGlzKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gSWYgdGhlIGhpc3RvcmllcyB3ZXJlIHNoYXJlZCwgc3BsaXQgdGhlbSBhZ2FpblxuICAgICAgaWYgKG90aGVyLmhpc3RvcnkgPT0gdGhpcy5oaXN0b3J5KSB7XG4gICAgICAgIHZhciBzcGxpdElkcyA9IFtvdGhlci5pZF07XG4gICAgICAgIGxpbmtlZERvY3Mob3RoZXIsIGZ1bmN0aW9uKGRvYykge3NwbGl0SWRzLnB1c2goZG9jLmlkKTt9LCB0cnVlKTtcbiAgICAgICAgb3RoZXIuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KG51bGwpO1xuICAgICAgICBvdGhlci5oaXN0b3J5LmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS5kb25lLCBzcGxpdElkcyk7XG4gICAgICAgIG90aGVyLmhpc3RvcnkudW5kb25lID0gY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkudW5kb25lLCBzcGxpdElkcyk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpdGVyTGlua2VkRG9jczogZnVuY3Rpb24oZikge2xpbmtlZERvY3ModGhpcywgZik7fSxcblxuICAgIGdldE1vZGU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLm1vZGU7fSxcbiAgICBnZXRFZGl0b3I6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmNtO30sXG5cbiAgICBzcGxpdExpbmVzOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICh0aGlzLmxpbmVTZXApIHJldHVybiBzdHIuc3BsaXQodGhpcy5saW5lU2VwKTtcbiAgICAgIHJldHVybiBzcGxpdExpbmVzQXV0byhzdHIpO1xuICAgIH0sXG4gICAgbGluZVNlcGFyYXRvcjogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxpbmVTZXAgfHwgXCJcXG5cIjsgfVxuICB9KTtcblxuICAvLyBQdWJsaWMgYWxpYXMuXG4gIERvYy5wcm90b3R5cGUuZWFjaExpbmUgPSBEb2MucHJvdG90eXBlLml0ZXI7XG5cbiAgLy8gU2V0IHVwIG1ldGhvZHMgb24gQ29kZU1pcnJvcidzIHByb3RvdHlwZSB0byByZWRpcmVjdCB0byB0aGUgZWRpdG9yJ3MgZG9jdW1lbnQuXG4gIHZhciBkb250RGVsZWdhdGUgPSBcIml0ZXIgaW5zZXJ0IHJlbW92ZSBjb3B5IGdldEVkaXRvciBjb25zdHJ1Y3RvclwiLnNwbGl0KFwiIFwiKTtcbiAgZm9yICh2YXIgcHJvcCBpbiBEb2MucHJvdG90eXBlKSBpZiAoRG9jLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBpbmRleE9mKGRvbnREZWxlZ2F0ZSwgcHJvcCkgPCAwKVxuICAgIENvZGVNaXJyb3IucHJvdG90eXBlW3Byb3BdID0gKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge3JldHVybiBtZXRob2QuYXBwbHkodGhpcy5kb2MsIGFyZ3VtZW50cyk7fTtcbiAgICB9KShEb2MucHJvdG90eXBlW3Byb3BdKTtcblxuICBldmVudE1peGluKERvYyk7XG5cbiAgLy8gQ2FsbCBmIGZvciBhbGwgbGlua2VkIGRvY3VtZW50cy5cbiAgZnVuY3Rpb24gbGlua2VkRG9jcyhkb2MsIGYsIHNoYXJlZEhpc3RPbmx5KSB7XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlKGRvYywgc2tpcCwgc2hhcmVkSGlzdCkge1xuICAgICAgaWYgKGRvYy5saW5rZWQpIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxpbmtlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcmVsID0gZG9jLmxpbmtlZFtpXTtcbiAgICAgICAgaWYgKHJlbC5kb2MgPT0gc2tpcCkgY29udGludWU7XG4gICAgICAgIHZhciBzaGFyZWQgPSBzaGFyZWRIaXN0ICYmIHJlbC5zaGFyZWRIaXN0O1xuICAgICAgICBpZiAoc2hhcmVkSGlzdE9ubHkgJiYgIXNoYXJlZCkgY29udGludWU7XG4gICAgICAgIGYocmVsLmRvYywgc2hhcmVkKTtcbiAgICAgICAgcHJvcGFnYXRlKHJlbC5kb2MsIGRvYywgc2hhcmVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvcGFnYXRlKGRvYywgbnVsbCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBBdHRhY2ggYSBkb2N1bWVudCB0byBhbiBlZGl0b3IuXG4gIGZ1bmN0aW9uIGF0dGFjaERvYyhjbSwgZG9jKSB7XG4gICAgaWYgKGRvYy5jbSkgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBkb2N1bWVudCBpcyBhbHJlYWR5IGluIHVzZS5cIik7XG4gICAgY20uZG9jID0gZG9jO1xuICAgIGRvYy5jbSA9IGNtO1xuICAgIGVzdGltYXRlTGluZUhlaWdodHMoY20pO1xuICAgIGxvYWRNb2RlKGNtKTtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBmaW5kTWF4TGluZShjbSk7XG4gICAgY20ub3B0aW9ucy5tb2RlID0gZG9jLm1vZGVPcHRpb247XG4gICAgcmVnQ2hhbmdlKGNtKTtcbiAgfVxuXG4gIC8vIExJTkUgVVRJTElUSUVTXG5cbiAgLy8gRmluZCB0aGUgbGluZSBvYmplY3QgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuXG4gIGZ1bmN0aW9uIGdldExpbmUoZG9jLCBuKSB7XG4gICAgbiAtPSBkb2MuZmlyc3Q7XG4gICAgaWYgKG4gPCAwIHx8IG4gPj0gZG9jLnNpemUpIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIGxpbmUgXCIgKyAobiArIGRvYy5maXJzdCkgKyBcIiBpbiB0aGUgZG9jdW1lbnQuXCIpO1xuICAgIGZvciAodmFyIGNodW5rID0gZG9jOyAhY2h1bmsubGluZXM7KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDs7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaHVuay5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKG4gPCBzeikgeyBjaHVuayA9IGNoaWxkOyBicmVhazsgfVxuICAgICAgICBuIC09IHN6O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2h1bmsubGluZXNbbl07XG4gIH1cblxuICAvLyBHZXQgdGhlIHBhcnQgb2YgYSBkb2N1bWVudCBiZXR3ZWVuIHR3byBwb3NpdGlvbnMsIGFzIGFuIGFycmF5IG9mXG4gIC8vIHN0cmluZ3MuXG4gIGZ1bmN0aW9uIGdldEJldHdlZW4oZG9jLCBzdGFydCwgZW5kKSB7XG4gICAgdmFyIG91dCA9IFtdLCBuID0gc3RhcnQubGluZTtcbiAgICBkb2MuaXRlcihzdGFydC5saW5lLCBlbmQubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciB0ZXh0ID0gbGluZS50ZXh0O1xuICAgICAgaWYgKG4gPT0gZW5kLmxpbmUpIHRleHQgPSB0ZXh0LnNsaWNlKDAsIGVuZC5jaCk7XG4gICAgICBpZiAobiA9PSBzdGFydC5saW5lKSB0ZXh0ID0gdGV4dC5zbGljZShzdGFydC5jaCk7XG4gICAgICBvdXQucHVzaCh0ZXh0KTtcbiAgICAgICsrbjtcbiAgICB9KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIC8vIEdldCB0aGUgbGluZXMgYmV0d2VlbiBmcm9tIGFuZCB0bywgYXMgYXJyYXkgb2Ygc3RyaW5ncy5cbiAgZnVuY3Rpb24gZ2V0TGluZXMoZG9jLCBmcm9tLCB0bykge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBkb2MuaXRlcihmcm9tLCB0bywgZnVuY3Rpb24obGluZSkgeyBvdXQucHVzaChsaW5lLnRleHQpOyB9KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSBoZWlnaHQgb2YgYSBsaW5lLCBwcm9wYWdhdGluZyB0aGUgaGVpZ2h0IGNoYW5nZVxuICAvLyB1cHdhcmRzIHRvIHBhcmVudCBub2Rlcy5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUhlaWdodChsaW5lLCBoZWlnaHQpIHtcbiAgICB2YXIgZGlmZiA9IGhlaWdodCAtIGxpbmUuaGVpZ2h0O1xuICAgIGlmIChkaWZmKSBmb3IgKHZhciBuID0gbGluZTsgbjsgbiA9IG4ucGFyZW50KSBuLmhlaWdodCArPSBkaWZmO1xuICB9XG5cbiAgLy8gR2l2ZW4gYSBsaW5lIG9iamVjdCwgZmluZCBpdHMgbGluZSBudW1iZXIgYnkgd2Fsa2luZyB1cCB0aHJvdWdoXG4gIC8vIGl0cyBwYXJlbnQgbGlua3MuXG4gIGZ1bmN0aW9uIGxpbmVObyhsaW5lKSB7XG4gICAgaWYgKGxpbmUucGFyZW50ID09IG51bGwpIHJldHVybiBudWxsO1xuICAgIHZhciBjdXIgPSBsaW5lLnBhcmVudCwgbm8gPSBpbmRleE9mKGN1ci5saW5lcywgbGluZSk7XG4gICAgZm9yICh2YXIgY2h1bmsgPSBjdXIucGFyZW50OyBjaHVuazsgY3VyID0gY2h1bmssIGNodW5rID0gY2h1bmsucGFyZW50KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDs7ICsraSkge1xuICAgICAgICBpZiAoY2h1bmsuY2hpbGRyZW5baV0gPT0gY3VyKSBicmVhaztcbiAgICAgICAgbm8gKz0gY2h1bmsuY2hpbGRyZW5baV0uY2h1bmtTaXplKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBubyArIGN1ci5maXJzdDtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHZlcnRpY2FsIHBvc2l0aW9uLCB1c2luZyB0aGUgaGVpZ2h0XG4gIC8vIGluZm9ybWF0aW9uIGluIHRoZSBkb2N1bWVudCB0cmVlLlxuICBmdW5jdGlvbiBsaW5lQXRIZWlnaHQoY2h1bmssIGgpIHtcbiAgICB2YXIgbiA9IGNodW5rLmZpcnN0O1xuICAgIG91dGVyOiBkbyB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IGNodW5rLmNoaWxkcmVuW2ldLCBjaCA9IGNoaWxkLmhlaWdodDtcbiAgICAgICAgaWYgKGggPCBjaCkgeyBjaHVuayA9IGNoaWxkOyBjb250aW51ZSBvdXRlcjsgfVxuICAgICAgICBoIC09IGNoO1xuICAgICAgICBuICs9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG47XG4gICAgfSB3aGlsZSAoIWNodW5rLmxpbmVzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IGNodW5rLmxpbmVzW2ldLCBsaCA9IGxpbmUuaGVpZ2h0O1xuICAgICAgaWYgKGggPCBsaCkgYnJlYWs7XG4gICAgICBoIC09IGxoO1xuICAgIH1cbiAgICByZXR1cm4gbiArIGk7XG4gIH1cblxuXG4gIC8vIEZpbmQgdGhlIGhlaWdodCBhYm92ZSB0aGUgZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gaGVpZ2h0QXRMaW5lKGxpbmVPYmopIHtcbiAgICBsaW5lT2JqID0gdmlzdWFsTGluZShsaW5lT2JqKTtcblxuICAgIHZhciBoID0gMCwgY2h1bmsgPSBsaW5lT2JqLnBhcmVudDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IGNodW5rLmxpbmVzW2ldO1xuICAgICAgaWYgKGxpbmUgPT0gbGluZU9iaikgYnJlYWs7XG4gICAgICBlbHNlIGggKz0gbGluZS5oZWlnaHQ7XG4gICAgfVxuICAgIGZvciAodmFyIHAgPSBjaHVuay5wYXJlbnQ7IHA7IGNodW5rID0gcCwgcCA9IGNodW5rLnBhcmVudCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjdXIgPSBwLmNoaWxkcmVuW2ldO1xuICAgICAgICBpZiAoY3VyID09IGNodW5rKSBicmVhaztcbiAgICAgICAgZWxzZSBoICs9IGN1ci5oZWlnaHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBiaWRpIG9yZGVyaW5nIGZvciB0aGUgZ2l2ZW4gbGluZSAoYW5kIGNhY2hlIGl0KS4gUmV0dXJuc1xuICAvLyBmYWxzZSBmb3IgbGluZXMgdGhhdCBhcmUgZnVsbHkgbGVmdC10by1yaWdodCwgYW5kIGFuIGFycmF5IG9mXG4gIC8vIEJpZGlTcGFuIG9iamVjdHMgb3RoZXJ3aXNlLlxuICBmdW5jdGlvbiBnZXRPcmRlcihsaW5lKSB7XG4gICAgdmFyIG9yZGVyID0gbGluZS5vcmRlcjtcbiAgICBpZiAob3JkZXIgPT0gbnVsbCkgb3JkZXIgPSBsaW5lLm9yZGVyID0gYmlkaU9yZGVyaW5nKGxpbmUudGV4dCk7XG4gICAgcmV0dXJuIG9yZGVyO1xuICB9XG5cbiAgLy8gSElTVE9SWVxuXG4gIGZ1bmN0aW9uIEhpc3Rvcnkoc3RhcnRHZW4pIHtcbiAgICAvLyBBcnJheXMgb2YgY2hhbmdlIGV2ZW50cyBhbmQgc2VsZWN0aW9ucy4gRG9pbmcgc29tZXRoaW5nIGFkZHMgYW5cbiAgICAvLyBldmVudCB0byBkb25lIGFuZCBjbGVhcnMgdW5kby4gVW5kb2luZyBtb3ZlcyBldmVudHMgZnJvbSBkb25lXG4gICAgLy8gdG8gdW5kb25lLCByZWRvaW5nIG1vdmVzIHRoZW0gaW4gdGhlIG90aGVyIGRpcmVjdGlvbi5cbiAgICB0aGlzLmRvbmUgPSBbXTsgdGhpcy51bmRvbmUgPSBbXTtcbiAgICB0aGlzLnVuZG9EZXB0aCA9IEluZmluaXR5O1xuICAgIC8vIFVzZWQgdG8gdHJhY2sgd2hlbiBjaGFuZ2VzIGNhbiBiZSBtZXJnZWQgaW50byBhIHNpbmdsZSB1bmRvXG4gICAgLy8gZXZlbnRcbiAgICB0aGlzLmxhc3RNb2RUaW1lID0gdGhpcy5sYXN0U2VsVGltZSA9IDA7XG4gICAgdGhpcy5sYXN0T3AgPSB0aGlzLmxhc3RTZWxPcCA9IG51bGw7XG4gICAgdGhpcy5sYXN0T3JpZ2luID0gdGhpcy5sYXN0U2VsT3JpZ2luID0gbnVsbDtcbiAgICAvLyBVc2VkIGJ5IHRoZSBpc0NsZWFuKCkgbWV0aG9kXG4gICAgdGhpcy5nZW5lcmF0aW9uID0gdGhpcy5tYXhHZW5lcmF0aW9uID0gc3RhcnRHZW4gfHwgMTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIGhpc3RvcnkgY2hhbmdlIGV2ZW50IGZyb20gYW4gdXBkYXRlRG9jLXN0eWxlIGNoYW5nZVxuICAvLyBvYmplY3QuXG4gIGZ1bmN0aW9uIGhpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKSB7XG4gICAgdmFyIGhpc3RDaGFuZ2UgPSB7ZnJvbTogY29weVBvcyhjaGFuZ2UuZnJvbSksIHRvOiBjaGFuZ2VFbmQoY2hhbmdlKSwgdGV4dDogZ2V0QmV0d2Vlbihkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pfTtcbiAgICBhdHRhY2hMb2NhbFNwYW5zKGRvYywgaGlzdENoYW5nZSwgY2hhbmdlLmZyb20ubGluZSwgY2hhbmdlLnRvLmxpbmUgKyAxKTtcbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jKSB7YXR0YWNoTG9jYWxTcGFucyhkb2MsIGhpc3RDaGFuZ2UsIGNoYW5nZS5mcm9tLmxpbmUsIGNoYW5nZS50by5saW5lICsgMSk7fSwgdHJ1ZSk7XG4gICAgcmV0dXJuIGhpc3RDaGFuZ2U7XG4gIH1cblxuICAvLyBQb3AgYWxsIHNlbGVjdGlvbiBldmVudHMgb2ZmIHRoZSBlbmQgb2YgYSBoaXN0b3J5IGFycmF5LiBTdG9wIGF0XG4gIC8vIGEgY2hhbmdlIGV2ZW50LlxuICBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbkV2ZW50cyhhcnJheSkge1xuICAgIHdoaWxlIChhcnJheS5sZW5ndGgpIHtcbiAgICAgIHZhciBsYXN0ID0gbHN0KGFycmF5KTtcbiAgICAgIGlmIChsYXN0LnJhbmdlcykgYXJyYXkucG9wKCk7XG4gICAgICBlbHNlIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZpbmQgdGhlIHRvcCBjaGFuZ2UgZXZlbnQgaW4gdGhlIGhpc3RvcnkuIFBvcCBvZmYgc2VsZWN0aW9uXG4gIC8vIGV2ZW50cyB0aGF0IGFyZSBpbiB0aGUgd2F5LlxuICBmdW5jdGlvbiBsYXN0Q2hhbmdlRXZlbnQoaGlzdCwgZm9yY2UpIHtcbiAgICBpZiAoZm9yY2UpIHtcbiAgICAgIGNsZWFyU2VsZWN0aW9uRXZlbnRzKGhpc3QuZG9uZSk7XG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSk7XG4gICAgfSBlbHNlIGlmIChoaXN0LmRvbmUubGVuZ3RoICYmICFsc3QoaGlzdC5kb25lKS5yYW5nZXMpIHtcbiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25lKTtcbiAgICB9IGVsc2UgaWYgKGhpc3QuZG9uZS5sZW5ndGggPiAxICYmICFoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDJdLnJhbmdlcykge1xuICAgICAgaGlzdC5kb25lLnBvcCgpO1xuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlZ2lzdGVyIGEgY2hhbmdlIGluIHRoZSBoaXN0b3J5LiBNZXJnZXMgY2hhbmdlcyB0aGF0IGFyZSB3aXRoaW5cbiAgLy8gYSBzaW5nbGUgb3BlcmF0aW9uLCBvcmUgYXJlIGNsb3NlIHRvZ2V0aGVyIHdpdGggYW4gb3JpZ2luIHRoYXRcbiAgLy8gYWxsb3dzIG1lcmdpbmcgKHN0YXJ0aW5nIHdpdGggXCIrXCIpIGludG8gYSBzaW5nbGUgZXZlbnQuXG4gIGZ1bmN0aW9uIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIG9wSWQpIHtcbiAgICB2YXIgaGlzdCA9IGRvYy5oaXN0b3J5O1xuICAgIGhpc3QudW5kb25lLmxlbmd0aCA9IDA7XG4gICAgdmFyIHRpbWUgPSArbmV3IERhdGUsIGN1cjtcblxuICAgIGlmICgoaGlzdC5sYXN0T3AgPT0gb3BJZCB8fFxuICAgICAgICAgaGlzdC5sYXN0T3JpZ2luID09IGNoYW5nZS5vcmlnaW4gJiYgY2hhbmdlLm9yaWdpbiAmJlxuICAgICAgICAgKChjaGFuZ2Uub3JpZ2luLmNoYXJBdCgwKSA9PSBcIitcIiAmJiBkb2MuY20gJiYgaGlzdC5sYXN0TW9kVGltZSA+IHRpbWUgLSBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSkgfHxcbiAgICAgICAgICBjaGFuZ2Uub3JpZ2luLmNoYXJBdCgwKSA9PSBcIipcIikpICYmXG4gICAgICAgIChjdXIgPSBsYXN0Q2hhbmdlRXZlbnQoaGlzdCwgaGlzdC5sYXN0T3AgPT0gb3BJZCkpKSB7XG4gICAgICAvLyBNZXJnZSB0aGlzIGNoYW5nZSBpbnRvIHRoZSBsYXN0IGV2ZW50XG4gICAgICB2YXIgbGFzdCA9IGxzdChjdXIuY2hhbmdlcyk7XG4gICAgICBpZiAoY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDAgJiYgY21wKGNoYW5nZS5mcm9tLCBsYXN0LnRvKSA9PSAwKSB7XG4gICAgICAgIC8vIE9wdGltaXplZCBjYXNlIGZvciBzaW1wbGUgaW5zZXJ0aW9uIC0tIGRvbid0IHdhbnQgdG8gYWRkXG4gICAgICAgIC8vIG5ldyBjaGFuZ2VzZXRzIGZvciBldmVyeSBjaGFyYWN0ZXIgdHlwZWRcbiAgICAgICAgbGFzdC50byA9IGNoYW5nZUVuZChjaGFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkIG5ldyBzdWItZXZlbnRcbiAgICAgICAgY3VyLmNoYW5nZXMucHVzaChoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYW4gbm90IGJlIG1lcmdlZCwgc3RhcnQgYSBuZXcgZXZlbnQuXG4gICAgICB2YXIgYmVmb3JlID0gbHN0KGhpc3QuZG9uZSk7XG4gICAgICBpZiAoIWJlZm9yZSB8fCAhYmVmb3JlLnJhbmdlcylcbiAgICAgICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShkb2Muc2VsLCBoaXN0LmRvbmUpO1xuICAgICAgY3VyID0ge2NoYW5nZXM6IFtoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSldLFxuICAgICAgICAgICAgIGdlbmVyYXRpb246IGhpc3QuZ2VuZXJhdGlvbn07XG4gICAgICBoaXN0LmRvbmUucHVzaChjdXIpO1xuICAgICAgd2hpbGUgKGhpc3QuZG9uZS5sZW5ndGggPiBoaXN0LnVuZG9EZXB0aCkge1xuICAgICAgICBoaXN0LmRvbmUuc2hpZnQoKTtcbiAgICAgICAgaWYgKCFoaXN0LmRvbmVbMF0ucmFuZ2VzKSBoaXN0LmRvbmUuc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaGlzdC5kb25lLnB1c2goc2VsQWZ0ZXIpO1xuICAgIGhpc3QuZ2VuZXJhdGlvbiA9ICsraGlzdC5tYXhHZW5lcmF0aW9uO1xuICAgIGhpc3QubGFzdE1vZFRpbWUgPSBoaXN0Lmxhc3RTZWxUaW1lID0gdGltZTtcbiAgICBoaXN0Lmxhc3RPcCA9IGhpc3QubGFzdFNlbE9wID0gb3BJZDtcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBjaGFuZ2Uub3JpZ2luO1xuXG4gICAgaWYgKCFsYXN0KSBzaWduYWwoZG9jLCBcImhpc3RvcnlBZGRlZFwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdGlvbkV2ZW50Q2FuQmVNZXJnZWQoZG9jLCBvcmlnaW4sIHByZXYsIHNlbCkge1xuICAgIHZhciBjaCA9IG9yaWdpbi5jaGFyQXQoMCk7XG4gICAgcmV0dXJuIGNoID09IFwiKlwiIHx8XG4gICAgICBjaCA9PSBcIitcIiAmJlxuICAgICAgcHJldi5yYW5nZXMubGVuZ3RoID09IHNlbC5yYW5nZXMubGVuZ3RoICYmXG4gICAgICBwcmV2LnNvbWV0aGluZ1NlbGVjdGVkKCkgPT0gc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCkgJiZcbiAgICAgIG5ldyBEYXRlIC0gZG9jLmhpc3RvcnkubGFzdFNlbFRpbWUgPD0gKGRvYy5jbSA/IGRvYy5jbS5vcHRpb25zLmhpc3RvcnlFdmVudERlbGF5IDogNTAwKTtcbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuZXZlciB0aGUgc2VsZWN0aW9uIGNoYW5nZXMsIHNldHMgdGhlIG5ldyBzZWxlY3Rpb24gYXNcbiAgLy8gdGhlIHBlbmRpbmcgc2VsZWN0aW9uIGluIHRoZSBoaXN0b3J5LCBhbmQgcHVzaGVzIHRoZSBvbGQgcGVuZGluZ1xuICAvLyBzZWxlY3Rpb24gaW50byB0aGUgJ2RvbmUnIGFycmF5IHdoZW4gaXQgd2FzIHNpZ25pZmljYW50bHlcbiAgLy8gZGlmZmVyZW50IChpbiBudW1iZXIgb2Ygc2VsZWN0ZWQgcmFuZ2VzLCBlbXB0aW5lc3MsIG9yIHRpbWUpLlxuICBmdW5jdGlvbiBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBzZWwsIG9wSWQsIG9wdGlvbnMpIHtcbiAgICB2YXIgaGlzdCA9IGRvYy5oaXN0b3J5LCBvcmlnaW4gPSBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luO1xuXG4gICAgLy8gQSBuZXcgZXZlbnQgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvcmlnaW4gZG9lcyBub3QgbWF0Y2hcbiAgICAvLyB0aGUgY3VycmVudCwgb3IgdGhlIG9yaWdpbnMgZG9uJ3QgYWxsb3cgbWF0Y2hpbmcuIE9yaWdpbnNcbiAgICAvLyBzdGFydGluZyB3aXRoICogYXJlIGFsd2F5cyBtZXJnZWQsIHRob3NlIHN0YXJ0aW5nIHdpdGggKyBhcmVcbiAgICAvLyBtZXJnZWQgd2hlbiBzaW1pbGFyIGFuZCBjbG9zZSB0b2dldGhlciBpbiB0aW1lLlxuICAgIGlmIChvcElkID09IGhpc3QubGFzdFNlbE9wIHx8XG4gICAgICAgIChvcmlnaW4gJiYgaGlzdC5sYXN0U2VsT3JpZ2luID09IG9yaWdpbiAmJlxuICAgICAgICAgKGhpc3QubGFzdE1vZFRpbWUgPT0gaGlzdC5sYXN0U2VsVGltZSAmJiBoaXN0Lmxhc3RPcmlnaW4gPT0gb3JpZ2luIHx8XG4gICAgICAgICAgc2VsZWN0aW9uRXZlbnRDYW5CZU1lcmdlZChkb2MsIG9yaWdpbiwgbHN0KGhpc3QuZG9uZSksIHNlbCkpKSlcbiAgICAgIGhpc3QuZG9uZVtoaXN0LmRvbmUubGVuZ3RoIC0gMV0gPSBzZWw7XG4gICAgZWxzZVxuICAgICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGhpc3QuZG9uZSk7XG5cbiAgICBoaXN0Lmxhc3RTZWxUaW1lID0gK25ldyBEYXRlO1xuICAgIGhpc3QubGFzdFNlbE9yaWdpbiA9IG9yaWdpbjtcbiAgICBoaXN0Lmxhc3RTZWxPcCA9IG9wSWQ7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5jbGVhclJlZG8gIT09IGZhbHNlKVxuICAgICAgY2xlYXJTZWxlY3Rpb25FdmVudHMoaGlzdC51bmRvbmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGRlc3QpIHtcbiAgICB2YXIgdG9wID0gbHN0KGRlc3QpO1xuICAgIGlmICghKHRvcCAmJiB0b3AucmFuZ2VzICYmIHRvcC5lcXVhbHMoc2VsKSkpXG4gICAgICBkZXN0LnB1c2goc2VsKTtcbiAgfVxuXG4gIC8vIFVzZWQgdG8gc3RvcmUgbWFya2VkIHNwYW4gaW5mb3JtYXRpb24gaW4gdGhlIGhpc3RvcnkuXG4gIGZ1bmN0aW9uIGF0dGFjaExvY2FsU3BhbnMoZG9jLCBjaGFuZ2UsIGZyb20sIHRvKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gY2hhbmdlW1wic3BhbnNfXCIgKyBkb2MuaWRdLCBuID0gMDtcbiAgICBkb2MuaXRlcihNYXRoLm1heChkb2MuZmlyc3QsIGZyb20pLCBNYXRoLm1pbihkb2MuZmlyc3QgKyBkb2Muc2l6ZSwgdG8pLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAobGluZS5tYXJrZWRTcGFucylcbiAgICAgICAgKGV4aXN0aW5nIHx8IChleGlzdGluZyA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXSA9IHt9KSlbbl0gPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgKytuO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV2hlbiB1bi9yZS1kb2luZyByZXN0b3JlcyB0ZXh0IGNvbnRhaW5pbmcgbWFya2VkIHNwYW5zLCB0aG9zZVxuICAvLyB0aGF0IGhhdmUgYmVlbiBleHBsaWNpdGx5IGNsZWFyZWQgc2hvdWxkIG5vdCBiZSByZXN0b3JlZC5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2xlYXJlZFNwYW5zKHNwYW5zKSB7XG4gICAgaWYgKCFzcGFucykgcmV0dXJuIG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDAsIG91dDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoc3BhbnNbaV0ubWFya2VyLmV4cGxpY2l0bHlDbGVhcmVkKSB7IGlmICghb3V0KSBvdXQgPSBzcGFucy5zbGljZSgwLCBpKTsgfVxuICAgICAgZWxzZSBpZiAob3V0KSBvdXQucHVzaChzcGFuc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiAhb3V0ID8gc3BhbnMgOiBvdXQubGVuZ3RoID8gb3V0IDogbnVsbDtcbiAgfVxuXG4gIC8vIFJldHJpZXZlIGFuZCBmaWx0ZXIgdGhlIG9sZCBtYXJrZWQgc3BhbnMgc3RvcmVkIGluIGEgY2hhbmdlIGV2ZW50LlxuICBmdW5jdGlvbiBnZXRPbGRTcGFucyhkb2MsIGNoYW5nZSkge1xuICAgIHZhciBmb3VuZCA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXTtcbiAgICBpZiAoIWZvdW5kKSByZXR1cm4gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMCwgbncgPSBbXTsgaSA8IGNoYW5nZS50ZXh0Lmxlbmd0aDsgKytpKVxuICAgICAgbncucHVzaChyZW1vdmVDbGVhcmVkU3BhbnMoZm91bmRbaV0pKTtcbiAgICByZXR1cm4gbnc7XG4gIH1cblxuICAvLyBVc2VkIGJvdGggdG8gcHJvdmlkZSBhIEpTT04tc2FmZSBvYmplY3QgaW4gLmdldEhpc3RvcnksIGFuZCwgd2hlblxuICAvLyBkZXRhY2hpbmcgYSBkb2N1bWVudCwgdG8gc3BsaXQgdGhlIGhpc3RvcnkgaW4gdHdvXG4gIGZ1bmN0aW9uIGNvcHlIaXN0b3J5QXJyYXkoZXZlbnRzLCBuZXdHcm91cCwgaW5zdGFudGlhdGVTZWwpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgY29weSA9IFtdOyBpIDwgZXZlbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgZXZlbnQgPSBldmVudHNbaV07XG4gICAgICBpZiAoZXZlbnQucmFuZ2VzKSB7XG4gICAgICAgIGNvcHkucHVzaChpbnN0YW50aWF0ZVNlbCA/IFNlbGVjdGlvbi5wcm90b3R5cGUuZGVlcENvcHkuY2FsbChldmVudCkgOiBldmVudCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIGNoYW5nZXMgPSBldmVudC5jaGFuZ2VzLCBuZXdDaGFuZ2VzID0gW107XG4gICAgICBjb3B5LnB1c2goe2NoYW5nZXM6IG5ld0NoYW5nZXN9KTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2hhbmdlcy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgY2hhbmdlID0gY2hhbmdlc1tqXSwgbTtcbiAgICAgICAgbmV3Q2hhbmdlcy5wdXNoKHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IGNoYW5nZS50bywgdGV4dDogY2hhbmdlLnRleHR9KTtcbiAgICAgICAgaWYgKG5ld0dyb3VwKSBmb3IgKHZhciBwcm9wIGluIGNoYW5nZSkgaWYgKG0gPSBwcm9wLm1hdGNoKC9ec3BhbnNfKFxcZCspJC8pKSB7XG4gICAgICAgICAgaWYgKGluZGV4T2YobmV3R3JvdXAsIE51bWJlcihtWzFdKSkgPiAtMSkge1xuICAgICAgICAgICAgbHN0KG5ld0NoYW5nZXMpW3Byb3BdID0gY2hhbmdlW3Byb3BdO1xuICAgICAgICAgICAgZGVsZXRlIGNoYW5nZVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cblxuICAvLyBSZWJhc2luZy9yZXNldHRpbmcgaGlzdG9yeSB0byBkZWFsIHdpdGggZXh0ZXJuYWxseS1zb3VyY2VkIGNoYW5nZXNcblxuICBmdW5jdGlvbiByZWJhc2VIaXN0U2VsU2luZ2xlKHBvcywgZnJvbSwgdG8sIGRpZmYpIHtcbiAgICBpZiAodG8gPCBwb3MubGluZSkge1xuICAgICAgcG9zLmxpbmUgKz0gZGlmZjtcbiAgICB9IGVsc2UgaWYgKGZyb20gPCBwb3MubGluZSkge1xuICAgICAgcG9zLmxpbmUgPSBmcm9tO1xuICAgICAgcG9zLmNoID0gMDtcbiAgICB9XG4gIH1cblxuICAvLyBUcmllcyB0byByZWJhc2UgYW4gYXJyYXkgb2YgaGlzdG9yeSBldmVudHMgZ2l2ZW4gYSBjaGFuZ2UgaW4gdGhlXG4gIC8vIGRvY3VtZW50LiBJZiB0aGUgY2hhbmdlIHRvdWNoZXMgdGhlIHNhbWUgbGluZXMgYXMgdGhlIGV2ZW50LCB0aGVcbiAgLy8gZXZlbnQsIGFuZCBldmVyeXRoaW5nICdiZWhpbmQnIGl0LCBpcyBkaXNjYXJkZWQuIElmIHRoZSBjaGFuZ2UgaXNcbiAgLy8gYmVmb3JlIHRoZSBldmVudCwgdGhlIGV2ZW50J3MgcG9zaXRpb25zIGFyZSB1cGRhdGVkLiBVc2VzIGFcbiAgLy8gY29weS1vbi13cml0ZSBzY2hlbWUgZm9yIHRoZSBwb3NpdGlvbnMsIHRvIGF2b2lkIGhhdmluZyB0b1xuICAvLyByZWFsbG9jYXRlIHRoZW0gYWxsIG9uIGV2ZXJ5IHJlYmFzZSwgYnV0IGFsc28gYXZvaWQgcHJvYmxlbXMgd2l0aFxuICAvLyBzaGFyZWQgcG9zaXRpb24gb2JqZWN0cyBiZWluZyB1bnNhZmVseSB1cGRhdGVkLlxuICBmdW5jdGlvbiByZWJhc2VIaXN0QXJyYXkoYXJyYXksIGZyb20sIHRvLCBkaWZmKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHN1YiA9IGFycmF5W2ldLCBvayA9IHRydWU7XG4gICAgICBpZiAoc3ViLnJhbmdlcykge1xuICAgICAgICBpZiAoIXN1Yi5jb3BpZWQpIHsgc3ViID0gYXJyYXlbaV0gPSBzdWIuZGVlcENvcHkoKTsgc3ViLmNvcGllZCA9IHRydWU7IH1cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdWIucmFuZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgcmViYXNlSGlzdFNlbFNpbmdsZShzdWIucmFuZ2VzW2pdLmFuY2hvciwgZnJvbSwgdG8sIGRpZmYpO1xuICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5oZWFkLCBmcm9tLCB0bywgZGlmZik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN1Yi5jaGFuZ2VzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIHZhciBjdXIgPSBzdWIuY2hhbmdlc1tqXTtcbiAgICAgICAgaWYgKHRvIDwgY3VyLmZyb20ubGluZSkge1xuICAgICAgICAgIGN1ci5mcm9tID0gUG9zKGN1ci5mcm9tLmxpbmUgKyBkaWZmLCBjdXIuZnJvbS5jaCk7XG4gICAgICAgICAgY3VyLnRvID0gUG9zKGN1ci50by5saW5lICsgZGlmZiwgY3VyLnRvLmNoKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tIDw9IGN1ci50by5saW5lKSB7XG4gICAgICAgICAgb2sgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFvaykge1xuICAgICAgICBhcnJheS5zcGxpY2UoMCwgaSArIDEpO1xuICAgICAgICBpID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWJhc2VIaXN0KGhpc3QsIGNoYW5nZSkge1xuICAgIHZhciBmcm9tID0gY2hhbmdlLmZyb20ubGluZSwgdG8gPSBjaGFuZ2UudG8ubGluZSwgZGlmZiA9IGNoYW5nZS50ZXh0Lmxlbmd0aCAtICh0byAtIGZyb20pIC0gMTtcbiAgICByZWJhc2VIaXN0QXJyYXkoaGlzdC5kb25lLCBmcm9tLCB0bywgZGlmZik7XG4gICAgcmViYXNlSGlzdEFycmF5KGhpc3QudW5kb25lLCBmcm9tLCB0bywgZGlmZik7XG4gIH1cblxuICAvLyBFVkVOVCBVVElMSVRJRVNcblxuICAvLyBEdWUgdG8gdGhlIGZhY3QgdGhhdCB3ZSBzdGlsbCBzdXBwb3J0IGp1cmFzc2ljIElFIHZlcnNpb25zLCBzb21lXG4gIC8vIGNvbXBhdGliaWxpdHkgd3JhcHBlcnMgYXJlIG5lZWRlZC5cblxuICB2YXIgZV9wcmV2ZW50RGVmYXVsdCA9IENvZGVNaXJyb3IuZV9wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGVsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICB9O1xuICB2YXIgZV9zdG9wUHJvcGFnYXRpb24gPSBDb2RlTWlycm9yLmVfc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlbHNlIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgfTtcbiAgZnVuY3Rpb24gZV9kZWZhdWx0UHJldmVudGVkKGUpIHtcbiAgICByZXR1cm4gZS5kZWZhdWx0UHJldmVudGVkICE9IG51bGwgPyBlLmRlZmF1bHRQcmV2ZW50ZWQgOiBlLnJldHVyblZhbHVlID09IGZhbHNlO1xuICB9XG4gIHZhciBlX3N0b3AgPSBDb2RlTWlycm9yLmVfc3RvcCA9IGZ1bmN0aW9uKGUpIHtlX3ByZXZlbnREZWZhdWx0KGUpOyBlX3N0b3BQcm9wYWdhdGlvbihlKTt9O1xuXG4gIGZ1bmN0aW9uIGVfdGFyZ2V0KGUpIHtyZXR1cm4gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O31cbiAgZnVuY3Rpb24gZV9idXR0b24oZSkge1xuICAgIHZhciBiID0gZS53aGljaDtcbiAgICBpZiAoYiA9PSBudWxsKSB7XG4gICAgICBpZiAoZS5idXR0b24gJiAxKSBiID0gMTtcbiAgICAgIGVsc2UgaWYgKGUuYnV0dG9uICYgMikgYiA9IDM7XG4gICAgICBlbHNlIGlmIChlLmJ1dHRvbiAmIDQpIGIgPSAyO1xuICAgIH1cbiAgICBpZiAobWFjICYmIGUuY3RybEtleSAmJiBiID09IDEpIGIgPSAzO1xuICAgIHJldHVybiBiO1xuICB9XG5cbiAgLy8gRVZFTlQgSEFORExJTkdcblxuICAvLyBMaWdodHdlaWdodCBldmVudCBmcmFtZXdvcmsuIG9uL29mZiBhbHNvIHdvcmsgb24gRE9NIG5vZGVzLFxuICAvLyByZWdpc3RlcmluZyBuYXRpdmUgRE9NIGhhbmRsZXJzLlxuXG4gIHZhciBvbiA9IENvZGVNaXJyb3Iub24gPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlLCBmKSB7XG4gICAgaWYgKGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcilcbiAgICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XG4gICAgZWxzZSBpZiAoZW1pdHRlci5hdHRhY2hFdmVudClcbiAgICAgIGVtaXR0ZXIuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgZWxzZSB7XG4gICAgICB2YXIgbWFwID0gZW1pdHRlci5faGFuZGxlcnMgfHwgKGVtaXR0ZXIuX2hhbmRsZXJzID0ge30pO1xuICAgICAgdmFyIGFyciA9IG1hcFt0eXBlXSB8fCAobWFwW3R5cGVdID0gW10pO1xuICAgICAgYXJyLnB1c2goZik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBub0hhbmRsZXJzID0gW11cbiAgZnVuY3Rpb24gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSwgY29weSkge1xuICAgIHZhciBhcnIgPSBlbWl0dGVyLl9oYW5kbGVycyAmJiBlbWl0dGVyLl9oYW5kbGVyc1t0eXBlXVxuICAgIGlmIChjb3B5KSByZXR1cm4gYXJyICYmIGFyci5sZW5ndGggPiAwID8gYXJyLnNsaWNlKCkgOiBub0hhbmRsZXJzXG4gICAgZWxzZSByZXR1cm4gYXJyIHx8IG5vSGFuZGxlcnNcbiAgfVxuXG4gIHZhciBvZmYgPSBDb2RlTWlycm9yLm9mZiA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUsIGYpIHtcbiAgICBpZiAoZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKVxuICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGYsIGZhbHNlKTtcbiAgICBlbHNlIGlmIChlbWl0dGVyLmRldGFjaEV2ZW50KVxuICAgICAgZW1pdHRlci5kZXRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBmKTtcbiAgICBlbHNlIHtcbiAgICAgIHZhciBoYW5kbGVycyA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUsIGZhbHNlKVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7ICsraSlcbiAgICAgICAgaWYgKGhhbmRsZXJzW2ldID09IGYpIHsgaGFuZGxlcnMuc3BsaWNlKGksIDEpOyBicmVhazsgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgc2lnbmFsID0gQ29kZU1pcnJvci5zaWduYWwgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlIC8qLCB2YWx1ZXMuLi4qLykge1xuICAgIHZhciBoYW5kbGVycyA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUsIHRydWUpXG4gICAgaWYgKCFoYW5kbGVycy5sZW5ndGgpIHJldHVybjtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7ICsraSkgaGFuZGxlcnNbaV0uYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG5cbiAgdmFyIG9ycGhhbkRlbGF5ZWRDYWxsYmFja3MgPSBudWxsO1xuXG4gIC8vIE9mdGVuLCB3ZSB3YW50IHRvIHNpZ25hbCBldmVudHMgYXQgYSBwb2ludCB3aGVyZSB3ZSBhcmUgaW4gdGhlXG4gIC8vIG1pZGRsZSBvZiBzb21lIHdvcmssIGJ1dCBkb24ndCB3YW50IHRoZSBoYW5kbGVyIHRvIHN0YXJ0IGNhbGxpbmdcbiAgLy8gb3RoZXIgbWV0aG9kcyBvbiB0aGUgZWRpdG9yLCB3aGljaCBtaWdodCBiZSBpbiBhbiBpbmNvbnNpc3RlbnRcbiAgLy8gc3RhdGUgb3Igc2ltcGx5IG5vdCBleHBlY3QgYW55IG90aGVyIGV2ZW50cyB0byBoYXBwZW4uXG4gIC8vIHNpZ25hbExhdGVyIGxvb2tzIHdoZXRoZXIgdGhlcmUgYXJlIGFueSBoYW5kbGVycywgYW5kIHNjaGVkdWxlc1xuICAvLyB0aGVtIHRvIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGxhc3Qgb3BlcmF0aW9uIGVuZHMsIG9yLCBpZiBub1xuICAvLyBvcGVyYXRpb24gaXMgYWN0aXZlLCB3aGVuIGEgdGltZW91dCBmaXJlcy5cbiAgZnVuY3Rpb24gc2lnbmFsTGF0ZXIoZW1pdHRlciwgdHlwZSAvKiwgdmFsdWVzLi4uKi8pIHtcbiAgICB2YXIgYXJyID0gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSwgZmFsc2UpXG4gICAgaWYgKCFhcnIubGVuZ3RoKSByZXR1cm47XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLCBsaXN0O1xuICAgIGlmIChvcGVyYXRpb25Hcm91cCkge1xuICAgICAgbGlzdCA9IG9wZXJhdGlvbkdyb3VwLmRlbGF5ZWRDYWxsYmFja3M7XG4gICAgfSBlbHNlIGlmIChvcnBoYW5EZWxheWVkQ2FsbGJhY2tzKSB7XG4gICAgICBsaXN0ID0gb3JwaGFuRGVsYXllZENhbGxiYWNrcztcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3MgPSBbXTtcbiAgICAgIHNldFRpbWVvdXQoZmlyZU9ycGhhbkRlbGF5ZWQsIDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBibmQoZikge3JldHVybiBmdW5jdGlvbigpe2YuYXBwbHkobnVsbCwgYXJncyk7fTt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKVxuICAgICAgbGlzdC5wdXNoKGJuZChhcnJbaV0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVPcnBoYW5EZWxheWVkKCkge1xuICAgIHZhciBkZWxheWVkID0gb3JwaGFuRGVsYXllZENhbGxiYWNrcztcbiAgICBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlbGF5ZWQubGVuZ3RoOyArK2kpIGRlbGF5ZWRbaV0oKTtcbiAgfVxuXG4gIC8vIFRoZSBET00gZXZlbnRzIHRoYXQgQ29kZU1pcnJvciBoYW5kbGVzIGNhbiBiZSBvdmVycmlkZGVuIGJ5XG4gIC8vIHJlZ2lzdGVyaW5nIGEgKG5vbi1ET00pIGhhbmRsZXIgb24gdGhlIGVkaXRvciBmb3IgdGhlIGV2ZW50IG5hbWUsXG4gIC8vIGFuZCBwcmV2ZW50RGVmYXVsdC1pbmcgdGhlIGV2ZW50IGluIHRoYXQgaGFuZGxlci5cbiAgZnVuY3Rpb24gc2lnbmFsRE9NRXZlbnQoY20sIGUsIG92ZXJyaWRlKSB7XG4gICAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpXG4gICAgICBlID0ge3R5cGU6IGUsIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfX07XG4gICAgc2lnbmFsKGNtLCBvdmVycmlkZSB8fCBlLnR5cGUsIGNtLCBlKTtcbiAgICByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpIHx8IGUuY29kZW1pcnJvcklnbm9yZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKSB7XG4gICAgdmFyIGFyciA9IGNtLl9oYW5kbGVycyAmJiBjbS5faGFuZGxlcnMuY3Vyc29yQWN0aXZpdHk7XG4gICAgaWYgKCFhcnIpIHJldHVybjtcbiAgICB2YXIgc2V0ID0gY20uY3VyT3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycyB8fCAoY20uY3VyT3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycyA9IFtdKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkgaWYgKGluZGV4T2Yoc2V0LCBhcnJbaV0pID09IC0xKVxuICAgICAgc2V0LnB1c2goYXJyW2ldKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhc0hhbmRsZXIoZW1pdHRlciwgdHlwZSkge1xuICAgIHJldHVybiBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlKS5sZW5ndGggPiAwXG4gIH1cblxuICAvLyBBZGQgb24gYW5kIG9mZiBtZXRob2RzIHRvIGEgY29uc3RydWN0b3IncyBwcm90b3R5cGUsIHRvIG1ha2VcbiAgLy8gcmVnaXN0ZXJpbmcgZXZlbnRzIG9uIHN1Y2ggb2JqZWN0cyBtb3JlIGNvbnZlbmllbnQuXG4gIGZ1bmN0aW9uIGV2ZW50TWl4aW4oY3Rvcikge1xuICAgIGN0b3IucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgZikge29uKHRoaXMsIHR5cGUsIGYpO307XG4gICAgY3Rvci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24odHlwZSwgZikge29mZih0aGlzLCB0eXBlLCBmKTt9O1xuICB9XG5cbiAgLy8gTUlTQyBVVElMSVRJRVNcblxuICAvLyBOdW1iZXIgb2YgcGl4ZWxzIGFkZGVkIHRvIHNjcm9sbGVyIGFuZCBzaXplciB0byBoaWRlIHNjcm9sbGJhclxuICB2YXIgc2Nyb2xsZXJHYXAgPSAzMDtcblxuICAvLyBSZXR1cm5lZCBvciB0aHJvd24gYnkgdmFyaW91cyBwcm90b2NvbHMgdG8gc2lnbmFsICdJJ20gbm90XG4gIC8vIGhhbmRsaW5nIHRoaXMnLlxuICB2YXIgUGFzcyA9IENvZGVNaXJyb3IuUGFzcyA9IHt0b1N0cmluZzogZnVuY3Rpb24oKXtyZXR1cm4gXCJDb2RlTWlycm9yLlBhc3NcIjt9fTtcblxuICAvLyBSZXVzZWQgb3B0aW9uIG9iamVjdHMgZm9yIHNldFNlbGVjdGlvbiAmIGZyaWVuZHNcbiAgdmFyIHNlbF9kb250U2Nyb2xsID0ge3Njcm9sbDogZmFsc2V9LCBzZWxfbW91c2UgPSB7b3JpZ2luOiBcIiptb3VzZVwifSwgc2VsX21vdmUgPSB7b3JpZ2luOiBcIittb3ZlXCJ9O1xuXG4gIGZ1bmN0aW9uIERlbGF5ZWQoKSB7dGhpcy5pZCA9IG51bGw7fVxuICBEZWxheWVkLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihtcywgZikge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmlkKTtcbiAgICB0aGlzLmlkID0gc2V0VGltZW91dChmLCBtcyk7XG4gIH07XG5cbiAgLy8gQ291bnRzIHRoZSBjb2x1bW4gb2Zmc2V0IGluIGEgc3RyaW5nLCB0YWtpbmcgdGFicyBpbnRvIGFjY291bnQuXG4gIC8vIFVzZWQgbW9zdGx5IHRvIGZpbmQgaW5kZW50YXRpb24uXG4gIHZhciBjb3VudENvbHVtbiA9IENvZGVNaXJyb3IuY291bnRDb2x1bW4gPSBmdW5jdGlvbihzdHJpbmcsIGVuZCwgdGFiU2l6ZSwgc3RhcnRJbmRleCwgc3RhcnRWYWx1ZSkge1xuICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgZW5kID0gc3RyaW5nLnNlYXJjaCgvW15cXHNcXHUwMGEwXS8pO1xuICAgICAgaWYgKGVuZCA9PSAtMSkgZW5kID0gc3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXggfHwgMCwgbiA9IHN0YXJ0VmFsdWUgfHwgMDs7KSB7XG4gICAgICB2YXIgbmV4dFRhYiA9IHN0cmluZy5pbmRleE9mKFwiXFx0XCIsIGkpO1xuICAgICAgaWYgKG5leHRUYWIgPCAwIHx8IG5leHRUYWIgPj0gZW5kKVxuICAgICAgICByZXR1cm4gbiArIChlbmQgLSBpKTtcbiAgICAgIG4gKz0gbmV4dFRhYiAtIGk7XG4gICAgICBuICs9IHRhYlNpemUgLSAobiAlIHRhYlNpemUpO1xuICAgICAgaSA9IG5leHRUYWIgKyAxO1xuICAgIH1cbiAgfTtcblxuICAvLyBUaGUgaW52ZXJzZSBvZiBjb3VudENvbHVtbiAtLSBmaW5kIHRoZSBvZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0b1xuICAvLyBhIHBhcnRpY3VsYXIgY29sdW1uLlxuICB2YXIgZmluZENvbHVtbiA9IENvZGVNaXJyb3IuZmluZENvbHVtbiA9IGZ1bmN0aW9uKHN0cmluZywgZ29hbCwgdGFiU2l6ZSkge1xuICAgIGZvciAodmFyIHBvcyA9IDAsIGNvbCA9IDA7Oykge1xuICAgICAgdmFyIG5leHRUYWIgPSBzdHJpbmcuaW5kZXhPZihcIlxcdFwiLCBwb3MpO1xuICAgICAgaWYgKG5leHRUYWIgPT0gLTEpIG5leHRUYWIgPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgdmFyIHNraXBwZWQgPSBuZXh0VGFiIC0gcG9zO1xuICAgICAgaWYgKG5leHRUYWIgPT0gc3RyaW5nLmxlbmd0aCB8fCBjb2wgKyBza2lwcGVkID49IGdvYWwpXG4gICAgICAgIHJldHVybiBwb3MgKyBNYXRoLm1pbihza2lwcGVkLCBnb2FsIC0gY29sKTtcbiAgICAgIGNvbCArPSBuZXh0VGFiIC0gcG9zO1xuICAgICAgY29sICs9IHRhYlNpemUgLSAoY29sICUgdGFiU2l6ZSk7XG4gICAgICBwb3MgPSBuZXh0VGFiICsgMTtcbiAgICAgIGlmIChjb2wgPj0gZ29hbCkgcmV0dXJuIHBvcztcbiAgICB9XG4gIH1cblxuICB2YXIgc3BhY2VTdHJzID0gW1wiXCJdO1xuICBmdW5jdGlvbiBzcGFjZVN0cihuKSB7XG4gICAgd2hpbGUgKHNwYWNlU3Rycy5sZW5ndGggPD0gbilcbiAgICAgIHNwYWNlU3Rycy5wdXNoKGxzdChzcGFjZVN0cnMpICsgXCIgXCIpO1xuICAgIHJldHVybiBzcGFjZVN0cnNbbl07XG4gIH1cblxuICBmdW5jdGlvbiBsc3QoYXJyKSB7IHJldHVybiBhcnJbYXJyLmxlbmd0aC0xXTsgfVxuXG4gIHZhciBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5zZWxlY3QoKTsgfTtcbiAgaWYgKGlvcykgLy8gTW9iaWxlIFNhZmFyaSBhcHBhcmVudGx5IGhhcyBhIGJ1ZyB3aGVyZSBzZWxlY3QoKSBpcyBicm9rZW4uXG4gICAgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0aW9uU3RhcnQgPSAwOyBub2RlLnNlbGVjdGlvbkVuZCA9IG5vZGUudmFsdWUubGVuZ3RoOyB9O1xuICBlbHNlIGlmIChpZSkgLy8gU3VwcHJlc3MgbXlzdGVyaW91cyBJRTEwIGVycm9yc1xuICAgIHNlbGVjdElucHV0ID0gZnVuY3Rpb24obm9kZSkgeyB0cnkgeyBub2RlLnNlbGVjdCgpOyB9IGNhdGNoKF9lKSB7fSB9O1xuXG4gIGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIGVsdCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpXG4gICAgICBpZiAoYXJyYXlbaV0gPT0gZWx0KSByZXR1cm4gaTtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgZnVuY3Rpb24gbWFwKGFycmF5LCBmKSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIG91dFtpXSA9IGYoYXJyYXlbaV0sIGkpO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBmdW5jdGlvbiBub3RoaW5nKCkge31cblxuICBmdW5jdGlvbiBjcmVhdGVPYmooYmFzZSwgcHJvcHMpIHtcbiAgICB2YXIgaW5zdDtcbiAgICBpZiAoT2JqZWN0LmNyZWF0ZSkge1xuICAgICAgaW5zdCA9IE9iamVjdC5jcmVhdGUoYmFzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vdGhpbmcucHJvdG90eXBlID0gYmFzZTtcbiAgICAgIGluc3QgPSBuZXcgbm90aGluZygpO1xuICAgIH1cbiAgICBpZiAocHJvcHMpIGNvcHlPYmoocHJvcHMsIGluc3QpO1xuICAgIHJldHVybiBpbnN0O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvcHlPYmoob2JqLCB0YXJnZXQsIG92ZXJ3cml0ZSkge1xuICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iailcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkgJiYgKG92ZXJ3cml0ZSAhPT0gZmFsc2UgfHwgIXRhcmdldC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkpXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IG9ialtwcm9wXTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgZnVuY3Rpb24gYmluZChmKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbigpe3JldHVybiBmLmFwcGx5KG51bGwsIGFyZ3MpO307XG4gIH1cblxuICB2YXIgbm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIgPSAvW1xcdTAwZGZcXHUwNTg3XFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MzA0MC1cXHUzMDlmXFx1MzBhMC1cXHUzMGZmXFx1MzQwMC1cXHU0ZGI1XFx1NGUwMC1cXHU5ZmNjXFx1YWMwMC1cXHVkN2FmXS87XG4gIHZhciBpc1dvcmRDaGFyQmFzaWMgPSBDb2RlTWlycm9yLmlzV29yZENoYXIgPSBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAvXFx3Ly50ZXN0KGNoKSB8fCBjaCA+IFwiXFx4ODBcIiAmJlxuICAgICAgKGNoLnRvVXBwZXJDYXNlKCkgIT0gY2gudG9Mb3dlckNhc2UoKSB8fCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhci50ZXN0KGNoKSk7XG4gIH07XG4gIGZ1bmN0aW9uIGlzV29yZENoYXIoY2gsIGhlbHBlcikge1xuICAgIGlmICghaGVscGVyKSByZXR1cm4gaXNXb3JkQ2hhckJhc2ljKGNoKTtcbiAgICBpZiAoaGVscGVyLnNvdXJjZS5pbmRleE9mKFwiXFxcXHdcIikgPiAtMSAmJiBpc1dvcmRDaGFyQmFzaWMoY2gpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gaGVscGVyLnRlc3QoY2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcbiAgICBmb3IgKHZhciBuIGluIG9iaikgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShuKSAmJiBvYmpbbl0pIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIEV4dGVuZGluZyB1bmljb2RlIGNoYXJhY3RlcnMuIEEgc2VyaWVzIG9mIGEgbm9uLWV4dGVuZGluZyBjaGFyICtcbiAgLy8gYW55IG51bWJlciBvZiBleHRlbmRpbmcgY2hhcnMgaXMgdHJlYXRlZCBhcyBhIHNpbmdsZSB1bml0IGFzIGZhclxuICAvLyBhcyBlZGl0aW5nIGFuZCBtZWFzdXJpbmcgaXMgY29uY2VybmVkLiBUaGlzIGlzIG5vdCBmdWxseSBjb3JyZWN0LFxuICAvLyBzaW5jZSBzb21lIHNjcmlwdHMvZm9udHMvYnJvd3NlcnMgYWxzbyB0cmVhdCBvdGhlciBjb25maWd1cmF0aW9uc1xuICAvLyBvZiBjb2RlIHBvaW50cyBhcyBhIGdyb3VwLlxuICB2YXIgZXh0ZW5kaW5nQ2hhcnMgPSAvW1xcdTAzMDAtXFx1MDM2ZlxcdTA0ODMtXFx1MDQ4OVxcdTA1OTEtXFx1MDViZFxcdTA1YmZcXHUwNWMxXFx1MDVjMlxcdTA1YzRcXHUwNWM1XFx1MDVjN1xcdTA2MTAtXFx1MDYxYVxcdTA2NGItXFx1MDY1ZVxcdTA2NzBcXHUwNmQ2LVxcdTA2ZGNcXHUwNmRlLVxcdTA2ZTRcXHUwNmU3XFx1MDZlOFxcdTA2ZWEtXFx1MDZlZFxcdTA3MTFcXHUwNzMwLVxcdTA3NGFcXHUwN2E2LVxcdTA3YjBcXHUwN2ViLVxcdTA3ZjNcXHUwODE2LVxcdTA4MTlcXHUwODFiLVxcdTA4MjNcXHUwODI1LVxcdTA4MjdcXHUwODI5LVxcdTA4MmRcXHUwOTAwLVxcdTA5MDJcXHUwOTNjXFx1MDk0MS1cXHUwOTQ4XFx1MDk0ZFxcdTA5NTEtXFx1MDk1NVxcdTA5NjJcXHUwOTYzXFx1MDk4MVxcdTA5YmNcXHUwOWJlXFx1MDljMS1cXHUwOWM0XFx1MDljZFxcdTA5ZDdcXHUwOWUyXFx1MDllM1xcdTBhMDFcXHUwYTAyXFx1MGEzY1xcdTBhNDFcXHUwYTQyXFx1MGE0N1xcdTBhNDhcXHUwYTRiLVxcdTBhNGRcXHUwYTUxXFx1MGE3MFxcdTBhNzFcXHUwYTc1XFx1MGE4MVxcdTBhODJcXHUwYWJjXFx1MGFjMS1cXHUwYWM1XFx1MGFjN1xcdTBhYzhcXHUwYWNkXFx1MGFlMlxcdTBhZTNcXHUwYjAxXFx1MGIzY1xcdTBiM2VcXHUwYjNmXFx1MGI0MS1cXHUwYjQ0XFx1MGI0ZFxcdTBiNTZcXHUwYjU3XFx1MGI2MlxcdTBiNjNcXHUwYjgyXFx1MGJiZVxcdTBiYzBcXHUwYmNkXFx1MGJkN1xcdTBjM2UtXFx1MGM0MFxcdTBjNDYtXFx1MGM0OFxcdTBjNGEtXFx1MGM0ZFxcdTBjNTVcXHUwYzU2XFx1MGM2MlxcdTBjNjNcXHUwY2JjXFx1MGNiZlxcdTBjYzJcXHUwY2M2XFx1MGNjY1xcdTBjY2RcXHUwY2Q1XFx1MGNkNlxcdTBjZTJcXHUwY2UzXFx1MGQzZVxcdTBkNDEtXFx1MGQ0NFxcdTBkNGRcXHUwZDU3XFx1MGQ2MlxcdTBkNjNcXHUwZGNhXFx1MGRjZlxcdTBkZDItXFx1MGRkNFxcdTBkZDZcXHUwZGRmXFx1MGUzMVxcdTBlMzQtXFx1MGUzYVxcdTBlNDctXFx1MGU0ZVxcdTBlYjFcXHUwZWI0LVxcdTBlYjlcXHUwZWJiXFx1MGViY1xcdTBlYzgtXFx1MGVjZFxcdTBmMThcXHUwZjE5XFx1MGYzNVxcdTBmMzdcXHUwZjM5XFx1MGY3MS1cXHUwZjdlXFx1MGY4MC1cXHUwZjg0XFx1MGY4NlxcdTBmODdcXHUwZjkwLVxcdTBmOTdcXHUwZjk5LVxcdTBmYmNcXHUwZmM2XFx1MTAyZC1cXHUxMDMwXFx1MTAzMi1cXHUxMDM3XFx1MTAzOVxcdTEwM2FcXHUxMDNkXFx1MTAzZVxcdTEwNThcXHUxMDU5XFx1MTA1ZS1cXHUxMDYwXFx1MTA3MS1cXHUxMDc0XFx1MTA4MlxcdTEwODVcXHUxMDg2XFx1MTA4ZFxcdTEwOWRcXHUxMzVmXFx1MTcxMi1cXHUxNzE0XFx1MTczMi1cXHUxNzM0XFx1MTc1MlxcdTE3NTNcXHUxNzcyXFx1MTc3M1xcdTE3YjctXFx1MTdiZFxcdTE3YzZcXHUxN2M5LVxcdTE3ZDNcXHUxN2RkXFx1MTgwYi1cXHUxODBkXFx1MThhOVxcdTE5MjAtXFx1MTkyMlxcdTE5MjdcXHUxOTI4XFx1MTkzMlxcdTE5MzktXFx1MTkzYlxcdTFhMTdcXHUxYTE4XFx1MWE1NlxcdTFhNTgtXFx1MWE1ZVxcdTFhNjBcXHUxYTYyXFx1MWE2NS1cXHUxYTZjXFx1MWE3My1cXHUxYTdjXFx1MWE3ZlxcdTFiMDAtXFx1MWIwM1xcdTFiMzRcXHUxYjM2LVxcdTFiM2FcXHUxYjNjXFx1MWI0MlxcdTFiNmItXFx1MWI3M1xcdTFiODBcXHUxYjgxXFx1MWJhMi1cXHUxYmE1XFx1MWJhOFxcdTFiYTlcXHUxYzJjLVxcdTFjMzNcXHUxYzM2XFx1MWMzN1xcdTFjZDAtXFx1MWNkMlxcdTFjZDQtXFx1MWNlMFxcdTFjZTItXFx1MWNlOFxcdTFjZWRcXHUxZGMwLVxcdTFkZTZcXHUxZGZkLVxcdTFkZmZcXHUyMDBjXFx1MjAwZFxcdTIwZDAtXFx1MjBmMFxcdTJjZWYtXFx1MmNmMVxcdTJkZTAtXFx1MmRmZlxcdTMwMmEtXFx1MzAyZlxcdTMwOTlcXHUzMDlhXFx1YTY2Zi1cXHVhNjcyXFx1YTY3Y1xcdWE2N2RcXHVhNmYwXFx1YTZmMVxcdWE4MDJcXHVhODA2XFx1YTgwYlxcdWE4MjVcXHVhODI2XFx1YThjNFxcdWE4ZTAtXFx1YThmMVxcdWE5MjYtXFx1YTkyZFxcdWE5NDctXFx1YTk1MVxcdWE5ODAtXFx1YTk4MlxcdWE5YjNcXHVhOWI2LVxcdWE5YjlcXHVhOWJjXFx1YWEyOS1cXHVhYTJlXFx1YWEzMVxcdWFhMzJcXHVhYTM1XFx1YWEzNlxcdWFhNDNcXHVhYTRjXFx1YWFiMFxcdWFhYjItXFx1YWFiNFxcdWFhYjdcXHVhYWI4XFx1YWFiZVxcdWFhYmZcXHVhYWMxXFx1YWJlNVxcdWFiZThcXHVhYmVkXFx1ZGMwMC1cXHVkZmZmXFx1ZmIxZVxcdWZlMDAtXFx1ZmUwZlxcdWZlMjAtXFx1ZmUyNlxcdWZmOWVcXHVmZjlmXS87XG4gIGZ1bmN0aW9uIGlzRXh0ZW5kaW5nQ2hhcihjaCkgeyByZXR1cm4gY2guY2hhckNvZGVBdCgwKSA+PSA3NjggJiYgZXh0ZW5kaW5nQ2hhcnMudGVzdChjaCk7IH1cblxuICAvLyBET00gVVRJTElUSUVTXG5cbiAgZnVuY3Rpb24gZWx0KHRhZywgY29udGVudCwgY2xhc3NOYW1lLCBzdHlsZSkge1xuICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGlmIChjbGFzc05hbWUpIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIGlmIChzdHlsZSkgZS5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09IFwic3RyaW5nXCIpIGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29udGVudCkpO1xuICAgIGVsc2UgaWYgKGNvbnRlbnQpIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7ICsraSkgZS5hcHBlbmRDaGlsZChjb250ZW50W2ldKTtcbiAgICByZXR1cm4gZTtcbiAgfVxuXG4gIHZhciByYW5nZTtcbiAgaWYgKGRvY3VtZW50LmNyZWF0ZVJhbmdlKSByYW5nZSA9IGZ1bmN0aW9uKG5vZGUsIHN0YXJ0LCBlbmQsIGVuZE5vZGUpIHtcbiAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgci5zZXRFbmQoZW5kTm9kZSB8fCBub2RlLCBlbmQpO1xuICAgIHIuc2V0U3RhcnQobm9kZSwgc3RhcnQpO1xuICAgIHJldHVybiByO1xuICB9O1xuICBlbHNlIHJhbmdlID0gZnVuY3Rpb24obm9kZSwgc3RhcnQsIGVuZCkge1xuICAgIHZhciByID0gZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgICB0cnkgeyByLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUucGFyZW50Tm9kZSk7IH1cbiAgICBjYXRjaChlKSB7IHJldHVybiByOyB9XG4gICAgci5jb2xsYXBzZSh0cnVlKTtcbiAgICByLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIiwgZW5kKTtcbiAgICByLm1vdmVTdGFydChcImNoYXJhY3RlclwiLCBzdGFydCk7XG4gICAgcmV0dXJuIHI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4oZSkge1xuICAgIGZvciAodmFyIGNvdW50ID0gZS5jaGlsZE5vZGVzLmxlbmd0aDsgY291bnQgPiAwOyAtLWNvdW50KVxuICAgICAgZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpO1xuICAgIHJldHVybiBlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQocGFyZW50LCBlKSB7XG4gICAgcmV0dXJuIHJlbW92ZUNoaWxkcmVuKHBhcmVudCkuYXBwZW5kQ2hpbGQoZSk7XG4gIH1cblxuICB2YXIgY29udGFpbnMgPSBDb2RlTWlycm9yLmNvbnRhaW5zID0gZnVuY3Rpb24ocGFyZW50LCBjaGlsZCkge1xuICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAzKSAvLyBBbmRyb2lkIGJyb3dzZXIgYWx3YXlzIHJldHVybnMgZmFsc2Ugd2hlbiBjaGlsZCBpcyBhIHRleHRub2RlXG4gICAgICBjaGlsZCA9IGNoaWxkLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudC5jb250YWlucylcbiAgICAgIHJldHVybiBwYXJlbnQuY29udGFpbnMoY2hpbGQpO1xuICAgIGRvIHtcbiAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAxMSkgY2hpbGQgPSBjaGlsZC5ob3N0O1xuICAgICAgaWYgKGNoaWxkID09IHBhcmVudCkgcmV0dXJuIHRydWU7XG4gICAgfSB3aGlsZSAoY2hpbGQgPSBjaGlsZC5wYXJlbnROb2RlKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhY3RpdmVFbHQoKSB7XG4gICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIHdoaWxlIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQucm9vdCAmJiBhY3RpdmVFbGVtZW50LnJvb3QuYWN0aXZlRWxlbWVudClcbiAgICAgIGFjdGl2ZUVsZW1lbnQgPSBhY3RpdmVFbGVtZW50LnJvb3QuYWN0aXZlRWxlbWVudDtcbiAgICByZXR1cm4gYWN0aXZlRWxlbWVudDtcbiAgfVxuICAvLyBPbGRlciB2ZXJzaW9ucyBvZiBJRSB0aHJvd3MgdW5zcGVjaWZpZWQgZXJyb3Igd2hlbiB0b3VjaGluZ1xuICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIHNvbWUgY2FzZXMgKGR1cmluZyBsb2FkaW5nLCBpbiBpZnJhbWUpXG4gIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIGFjdGl2ZUVsdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7IHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50OyB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gZG9jdW1lbnQuYm9keTsgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNsYXNzVGVzdChjbHMpIHsgcmV0dXJuIG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGNscyArIFwiKD86JHxcXFxccylcXFxccypcIik7IH1cbiAgdmFyIHJtQ2xhc3MgPSBDb2RlTWlycm9yLnJtQ2xhc3MgPSBmdW5jdGlvbihub2RlLCBjbHMpIHtcbiAgICB2YXIgY3VycmVudCA9IG5vZGUuY2xhc3NOYW1lO1xuICAgIHZhciBtYXRjaCA9IGNsYXNzVGVzdChjbHMpLmV4ZWMoY3VycmVudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICB2YXIgYWZ0ZXIgPSBjdXJyZW50LnNsaWNlKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgIG5vZGUuY2xhc3NOYW1lID0gY3VycmVudC5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyAoYWZ0ZXIgPyBtYXRjaFsxXSArIGFmdGVyIDogXCJcIik7XG4gICAgfVxuICB9O1xuICB2YXIgYWRkQ2xhc3MgPSBDb2RlTWlycm9yLmFkZENsYXNzID0gZnVuY3Rpb24obm9kZSwgY2xzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBub2RlLmNsYXNzTmFtZTtcbiAgICBpZiAoIWNsYXNzVGVzdChjbHMpLnRlc3QoY3VycmVudCkpIG5vZGUuY2xhc3NOYW1lICs9IChjdXJyZW50ID8gXCIgXCIgOiBcIlwiKSArIGNscztcbiAgfTtcbiAgZnVuY3Rpb24gam9pbkNsYXNzZXMoYSwgYikge1xuICAgIHZhciBhcyA9IGEuc3BsaXQoXCIgXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXMubGVuZ3RoOyBpKyspXG4gICAgICBpZiAoYXNbaV0gJiYgIWNsYXNzVGVzdChhc1tpXSkudGVzdChiKSkgYiArPSBcIiBcIiArIGFzW2ldO1xuICAgIHJldHVybiBiO1xuICB9XG5cbiAgLy8gV0lORE9XLVdJREUgRVZFTlRTXG5cbiAgLy8gVGhlc2UgbXVzdCBiZSBoYW5kbGVkIGNhcmVmdWxseSwgYmVjYXVzZSBuYWl2ZWx5IHJlZ2lzdGVyaW5nIGFcbiAgLy8gaGFuZGxlciBmb3IgZWFjaCBlZGl0b3Igd2lsbCBjYXVzZSB0aGUgZWRpdG9ycyB0byBuZXZlciBiZVxuICAvLyBnYXJiYWdlIGNvbGxlY3RlZC5cblxuICBmdW5jdGlvbiBmb3JFYWNoQ29kZU1pcnJvcihmKSB7XG4gICAgaWYgKCFkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpIHJldHVybjtcbiAgICB2YXIgYnlDbGFzcyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIkNvZGVNaXJyb3JcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieUNsYXNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY20gPSBieUNsYXNzW2ldLkNvZGVNaXJyb3I7XG4gICAgICBpZiAoY20pIGYoY20pO1xuICAgIH1cbiAgfVxuXG4gIHZhciBnbG9iYWxzUmVnaXN0ZXJlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBlbnN1cmVHbG9iYWxIYW5kbGVycygpIHtcbiAgICBpZiAoZ2xvYmFsc1JlZ2lzdGVyZWQpIHJldHVybjtcbiAgICByZWdpc3Rlckdsb2JhbEhhbmRsZXJzKCk7XG4gICAgZ2xvYmFsc1JlZ2lzdGVyZWQgPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIHJlZ2lzdGVyR2xvYmFsSGFuZGxlcnMoKSB7XG4gICAgLy8gV2hlbiB0aGUgd2luZG93IHJlc2l6ZXMsIHdlIG5lZWQgdG8gcmVmcmVzaCBhY3RpdmUgZWRpdG9ycy5cbiAgICB2YXIgcmVzaXplVGltZXI7XG4gICAgb24od2luZG93LCBcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyZXNpemVUaW1lciA9PSBudWxsKSByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc2l6ZVRpbWVyID0gbnVsbDtcbiAgICAgICAgZm9yRWFjaENvZGVNaXJyb3Iob25SZXNpemUpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9KTtcbiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgbG9zZXMgZm9jdXMsIHdlIHdhbnQgdG8gc2hvdyB0aGUgZWRpdG9yIGFzIGJsdXJyZWRcbiAgICBvbih3aW5kb3csIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uQmx1cik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBGRUFUVVJFIERFVEVDVElPTlxuXG4gIC8vIERldGVjdCBkcmFnLWFuZC1kcm9wXG4gIHZhciBkcmFnQW5kRHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoZXJlIGlzICpzb21lKiBraW5kIG9mIGRyYWctYW5kLWRyb3Agc3VwcG9ydCBpbiBJRTYtOCwgYnV0IElcbiAgICAvLyBjb3VsZG4ndCBnZXQgaXQgdG8gd29yayB5ZXQuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGRpdiA9IGVsdCgnZGl2Jyk7XG4gICAgcmV0dXJuIFwiZHJhZ2dhYmxlXCIgaW4gZGl2IHx8IFwiZHJhZ0Ryb3BcIiBpbiBkaXY7XG4gIH0oKTtcblxuICB2YXIgendzcFN1cHBvcnRlZDtcbiAgZnVuY3Rpb24gemVyb1dpZHRoRWxlbWVudChtZWFzdXJlKSB7XG4gICAgaWYgKHp3c3BTdXBwb3J0ZWQgPT0gbnVsbCkge1xuICAgICAgdmFyIHRlc3QgPSBlbHQoXCJzcGFuXCIsIFwiXFx1MjAwYlwiKTtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKG1lYXN1cmUsIGVsdChcInNwYW5cIiwgW3Rlc3QsIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKV0pKTtcbiAgICAgIGlmIChtZWFzdXJlLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0ICE9IDApXG4gICAgICAgIHp3c3BTdXBwb3J0ZWQgPSB0ZXN0Lm9mZnNldFdpZHRoIDw9IDEgJiYgdGVzdC5vZmZzZXRIZWlnaHQgPiAyICYmICEoaWUgJiYgaWVfdmVyc2lvbiA8IDgpO1xuICAgIH1cbiAgICB2YXIgbm9kZSA9IHp3c3BTdXBwb3J0ZWQgPyBlbHQoXCJzcGFuXCIsIFwiXFx1MjAwYlwiKSA6XG4gICAgICBlbHQoXCJzcGFuXCIsIFwiXFx1MDBhMFwiLCBudWxsLCBcImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2lkdGg6IDFweDsgbWFyZ2luLXJpZ2h0OiAtMXB4XCIpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBcIlwiKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIC8vIEZlYXR1cmUtZGV0ZWN0IElFJ3MgY3J1bW15IGNsaWVudCByZWN0IHJlcG9ydGluZyBmb3IgYmlkaSB0ZXh0XG4gIHZhciBiYWRCaWRpUmVjdHM7XG4gIGZ1bmN0aW9uIGhhc0JhZEJpZGlSZWN0cyhtZWFzdXJlKSB7XG4gICAgaWYgKGJhZEJpZGlSZWN0cyAhPSBudWxsKSByZXR1cm4gYmFkQmlkaVJlY3RzO1xuICAgIHZhciB0eHQgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkFcXHUwNjJlQVwiKSk7XG4gICAgdmFyIHIwID0gcmFuZ2UodHh0LCAwLCAxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoIXIwIHx8IHIwLmxlZnQgPT0gcjAucmlnaHQpIHJldHVybiBmYWxzZTsgLy8gU2FmYXJpIHJldHVybnMgbnVsbCBpbiBzb21lIGNhc2VzICgjMjc4MClcbiAgICB2YXIgcjEgPSByYW5nZSh0eHQsIDEsIDIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBiYWRCaWRpUmVjdHMgPSAocjEucmlnaHQgLSByMC5yaWdodCA8IDMpO1xuICB9XG5cbiAgLy8gU2VlIGlmIFwiXCIuc3BsaXQgaXMgdGhlIGJyb2tlbiBJRSB2ZXJzaW9uLCBpZiBzbywgcHJvdmlkZSBhblxuICAvLyBhbHRlcm5hdGl2ZSB3YXkgdG8gc3BsaXQgbGluZXMuXG4gIHZhciBzcGxpdExpbmVzQXV0byA9IENvZGVNaXJyb3Iuc3BsaXRMaW5lcyA9IFwiXFxuXFxuYlwiLnNwbGl0KC9cXG4vKS5sZW5ndGggIT0gMyA/IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHZhciBwb3MgPSAwLCByZXN1bHQgPSBbXSwgbCA9IHN0cmluZy5sZW5ndGg7XG4gICAgd2hpbGUgKHBvcyA8PSBsKSB7XG4gICAgICB2YXIgbmwgPSBzdHJpbmcuaW5kZXhPZihcIlxcblwiLCBwb3MpO1xuICAgICAgaWYgKG5sID09IC0xKSBubCA9IHN0cmluZy5sZW5ndGg7XG4gICAgICB2YXIgbGluZSA9IHN0cmluZy5zbGljZShwb3MsIHN0cmluZy5jaGFyQXQobmwgLSAxKSA9PSBcIlxcclwiID8gbmwgLSAxIDogbmwpO1xuICAgICAgdmFyIHJ0ID0gbGluZS5pbmRleE9mKFwiXFxyXCIpO1xuICAgICAgaWYgKHJ0ICE9IC0xKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGxpbmUuc2xpY2UoMCwgcnQpKTtcbiAgICAgICAgcG9zICs9IHJ0ICsgMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGxpbmUpO1xuICAgICAgICBwb3MgPSBubCArIDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gOiBmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcuc3BsaXQoL1xcclxcbj98XFxuLyk7fTtcblxuICB2YXIgaGFzU2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbiA/IGZ1bmN0aW9uKHRlKSB7XG4gICAgdHJ5IHsgcmV0dXJuIHRlLnNlbGVjdGlvblN0YXJ0ICE9IHRlLnNlbGVjdGlvbkVuZDsgfVxuICAgIGNhdGNoKGUpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIH0gOiBmdW5jdGlvbih0ZSkge1xuICAgIHRyeSB7dmFyIHJhbmdlID0gdGUub3duZXJEb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTt9XG4gICAgY2F0Y2goZSkge31cbiAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLnBhcmVudEVsZW1lbnQoKSAhPSB0ZSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiByYW5nZS5jb21wYXJlRW5kUG9pbnRzKFwiU3RhcnRUb0VuZFwiLCByYW5nZSkgIT0gMDtcbiAgfTtcblxuICB2YXIgaGFzQ29weUV2ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBlID0gZWx0KFwiZGl2XCIpO1xuICAgIGlmIChcIm9uY29weVwiIGluIGUpIHJldHVybiB0cnVlO1xuICAgIGUuc2V0QXR0cmlidXRlKFwib25jb3B5XCIsIFwicmV0dXJuO1wiKTtcbiAgICByZXR1cm4gdHlwZW9mIGUub25jb3B5ID09IFwiZnVuY3Rpb25cIjtcbiAgfSkoKTtcblxuICB2YXIgYmFkWm9vbWVkUmVjdHMgPSBudWxsO1xuICBmdW5jdGlvbiBoYXNCYWRab29tZWRSZWN0cyhtZWFzdXJlKSB7XG4gICAgaWYgKGJhZFpvb21lZFJlY3RzICE9IG51bGwpIHJldHVybiBiYWRab29tZWRSZWN0cztcbiAgICB2YXIgbm9kZSA9IHJlbW92ZUNoaWxkcmVuQW5kQWRkKG1lYXN1cmUsIGVsdChcInNwYW5cIiwgXCJ4XCIpKTtcbiAgICB2YXIgbm9ybWFsID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgZnJvbVJhbmdlID0gcmFuZ2Uobm9kZSwgMCwgMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIGJhZFpvb21lZFJlY3RzID0gTWF0aC5hYnMobm9ybWFsLmxlZnQgLSBmcm9tUmFuZ2UubGVmdCkgPiAxO1xuICB9XG5cbiAgLy8gS0VZIE5BTUVTXG5cbiAgdmFyIGtleU5hbWVzID0gQ29kZU1pcnJvci5rZXlOYW1lcyA9IHtcbiAgICAzOiBcIkVudGVyXCIsIDg6IFwiQmFja3NwYWNlXCIsIDk6IFwiVGFiXCIsIDEzOiBcIkVudGVyXCIsIDE2OiBcIlNoaWZ0XCIsIDE3OiBcIkN0cmxcIiwgMTg6IFwiQWx0XCIsXG4gICAgMTk6IFwiUGF1c2VcIiwgMjA6IFwiQ2Fwc0xvY2tcIiwgMjc6IFwiRXNjXCIsIDMyOiBcIlNwYWNlXCIsIDMzOiBcIlBhZ2VVcFwiLCAzNDogXCJQYWdlRG93blwiLCAzNTogXCJFbmRcIixcbiAgICAzNjogXCJIb21lXCIsIDM3OiBcIkxlZnRcIiwgMzg6IFwiVXBcIiwgMzk6IFwiUmlnaHRcIiwgNDA6IFwiRG93blwiLCA0NDogXCJQcmludFNjcm5cIiwgNDU6IFwiSW5zZXJ0XCIsXG4gICAgNDY6IFwiRGVsZXRlXCIsIDU5OiBcIjtcIiwgNjE6IFwiPVwiLCA5MTogXCJNb2RcIiwgOTI6IFwiTW9kXCIsIDkzOiBcIk1vZFwiLFxuICAgIDEwNjogXCIqXCIsIDEwNzogXCI9XCIsIDEwOTogXCItXCIsIDExMDogXCIuXCIsIDExMTogXCIvXCIsIDEyNzogXCJEZWxldGVcIixcbiAgICAxNzM6IFwiLVwiLCAxODY6IFwiO1wiLCAxODc6IFwiPVwiLCAxODg6IFwiLFwiLCAxODk6IFwiLVwiLCAxOTA6IFwiLlwiLCAxOTE6IFwiL1wiLCAxOTI6IFwiYFwiLCAyMTk6IFwiW1wiLCAyMjA6IFwiXFxcXFwiLFxuICAgIDIyMTogXCJdXCIsIDIyMjogXCInXCIsIDYzMjMyOiBcIlVwXCIsIDYzMjMzOiBcIkRvd25cIiwgNjMyMzQ6IFwiTGVmdFwiLCA2MzIzNTogXCJSaWdodFwiLCA2MzI3MjogXCJEZWxldGVcIixcbiAgICA2MzI3MzogXCJIb21lXCIsIDYzMjc1OiBcIkVuZFwiLCA2MzI3NjogXCJQYWdlVXBcIiwgNjMyNzc6IFwiUGFnZURvd25cIiwgNjMzMDI6IFwiSW5zZXJ0XCJcbiAgfTtcbiAgKGZ1bmN0aW9uKCkge1xuICAgIC8vIE51bWJlciBrZXlzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSBrZXlOYW1lc1tpICsgNDhdID0ga2V5TmFtZXNbaSArIDk2XSA9IFN0cmluZyhpKTtcbiAgICAvLyBBbHBoYWJldGljIGtleXNcbiAgICBmb3IgKHZhciBpID0gNjU7IGkgPD0gOTA7IGkrKykga2V5TmFtZXNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xuICAgIC8vIEZ1bmN0aW9uIGtleXNcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSAxMjsgaSsrKSBrZXlOYW1lc1tpICsgMTExXSA9IGtleU5hbWVzW2kgKyA2MzIzNV0gPSBcIkZcIiArIGk7XG4gIH0pKCk7XG5cbiAgLy8gQklESSBIRUxQRVJTXG5cbiAgZnVuY3Rpb24gaXRlcmF0ZUJpZGlTZWN0aW9ucyhvcmRlciwgZnJvbSwgdG8sIGYpIHtcbiAgICBpZiAoIW9yZGVyKSByZXR1cm4gZihmcm9tLCB0bywgXCJsdHJcIik7XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlci5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXTtcbiAgICAgIGlmIChwYXJ0LmZyb20gPCB0byAmJiBwYXJ0LnRvID4gZnJvbSB8fCBmcm9tID09IHRvICYmIHBhcnQudG8gPT0gZnJvbSkge1xuICAgICAgICBmKE1hdGgubWF4KHBhcnQuZnJvbSwgZnJvbSksIE1hdGgubWluKHBhcnQudG8sIHRvKSwgcGFydC5sZXZlbCA9PSAxID8gXCJydGxcIiA6IFwibHRyXCIpO1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZm91bmQpIGYoZnJvbSwgdG8sIFwibHRyXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gYmlkaUxlZnQocGFydCkgeyByZXR1cm4gcGFydC5sZXZlbCAlIDIgPyBwYXJ0LnRvIDogcGFydC5mcm9tOyB9XG4gIGZ1bmN0aW9uIGJpZGlSaWdodChwYXJ0KSB7IHJldHVybiBwYXJ0LmxldmVsICUgMiA/IHBhcnQuZnJvbSA6IHBhcnQudG87IH1cblxuICBmdW5jdGlvbiBsaW5lTGVmdChsaW5lKSB7IHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpOyByZXR1cm4gb3JkZXIgPyBiaWRpTGVmdChvcmRlclswXSkgOiAwOyB9XG4gIGZ1bmN0aW9uIGxpbmVSaWdodChsaW5lKSB7XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSk7XG4gICAgaWYgKCFvcmRlcikgcmV0dXJuIGxpbmUudGV4dC5sZW5ndGg7XG4gICAgcmV0dXJuIGJpZGlSaWdodChsc3Qob3JkZXIpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpbmVTdGFydChjbSwgbGluZU4pIHtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBsaW5lTik7XG4gICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUobGluZSk7XG4gICAgaWYgKHZpc3VhbCAhPSBsaW5lKSBsaW5lTiA9IGxpbmVObyh2aXN1YWwpO1xuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKHZpc3VhbCk7XG4gICAgdmFyIGNoID0gIW9yZGVyID8gMCA6IG9yZGVyWzBdLmxldmVsICUgMiA/IGxpbmVSaWdodCh2aXN1YWwpIDogbGluZUxlZnQodmlzdWFsKTtcbiAgICByZXR1cm4gUG9zKGxpbmVOLCBjaCk7XG4gIH1cbiAgZnVuY3Rpb24gbGluZUVuZChjbSwgbGluZU4pIHtcbiAgICB2YXIgbWVyZ2VkLCBsaW5lID0gZ2V0TGluZShjbS5kb2MsIGxpbmVOKTtcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKSB7XG4gICAgICBsaW5lID0gbWVyZ2VkLmZpbmQoMSwgdHJ1ZSkubGluZTtcbiAgICAgIGxpbmVOID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSk7XG4gICAgdmFyIGNoID0gIW9yZGVyID8gbGluZS50ZXh0Lmxlbmd0aCA6IG9yZGVyWzBdLmxldmVsICUgMiA/IGxpbmVMZWZ0KGxpbmUpIDogbGluZVJpZ2h0KGxpbmUpO1xuICAgIHJldHVybiBQb3MobGluZU4gPT0gbnVsbCA/IGxpbmVObyhsaW5lKSA6IGxpbmVOLCBjaCk7XG4gIH1cbiAgZnVuY3Rpb24gbGluZVN0YXJ0U21hcnQoY20sIHBvcykge1xuICAgIHZhciBzdGFydCA9IGxpbmVTdGFydChjbSwgcG9zLmxpbmUpO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIHN0YXJ0LmxpbmUpO1xuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xuICAgIGlmICghb3JkZXIgfHwgb3JkZXJbMF0ubGV2ZWwgPT0gMCkge1xuICAgICAgdmFyIGZpcnN0Tm9uV1MgPSBNYXRoLm1heCgwLCBsaW5lLnRleHQuc2VhcmNoKC9cXFMvKSk7XG4gICAgICB2YXIgaW5XUyA9IHBvcy5saW5lID09IHN0YXJ0LmxpbmUgJiYgcG9zLmNoIDw9IGZpcnN0Tm9uV1MgJiYgcG9zLmNoO1xuICAgICAgcmV0dXJuIFBvcyhzdGFydC5saW5lLCBpbldTID8gMCA6IGZpcnN0Tm9uV1MpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnQ7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wYXJlQmlkaUxldmVsKG9yZGVyLCBhLCBiKSB7XG4gICAgdmFyIGxpbmVkaXIgPSBvcmRlclswXS5sZXZlbDtcbiAgICBpZiAoYSA9PSBsaW5lZGlyKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYiA9PSBsaW5lZGlyKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGEgPCBiO1xuICB9XG4gIHZhciBiaWRpT3RoZXI7XG4gIGZ1bmN0aW9uIGdldEJpZGlQYXJ0QXQob3JkZXIsIHBvcykge1xuICAgIGJpZGlPdGhlciA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDAsIGZvdW5kOyBpIDwgb3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBjdXIgPSBvcmRlcltpXTtcbiAgICAgIGlmIChjdXIuZnJvbSA8IHBvcyAmJiBjdXIudG8gPiBwb3MpIHJldHVybiBpO1xuICAgICAgaWYgKChjdXIuZnJvbSA9PSBwb3MgfHwgY3VyLnRvID09IHBvcykpIHtcbiAgICAgICAgaWYgKGZvdW5kID09IG51bGwpIHtcbiAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29tcGFyZUJpZGlMZXZlbChvcmRlciwgY3VyLmxldmVsLCBvcmRlcltmb3VuZF0ubGV2ZWwpKSB7XG4gICAgICAgICAgaWYgKGN1ci5mcm9tICE9IGN1ci50bykgYmlkaU90aGVyID0gZm91bmQ7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGN1ci5mcm9tICE9IGN1ci50bykgYmlkaU90aGVyID0gaTtcbiAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZUluTGluZShsaW5lLCBwb3MsIGRpciwgYnlVbml0KSB7XG4gICAgaWYgKCFieVVuaXQpIHJldHVybiBwb3MgKyBkaXI7XG4gICAgZG8gcG9zICs9IGRpcjtcbiAgICB3aGlsZSAocG9zID4gMCAmJiBpc0V4dGVuZGluZ0NoYXIobGluZS50ZXh0LmNoYXJBdChwb3MpKSk7XG4gICAgcmV0dXJuIHBvcztcbiAgfVxuXG4gIC8vIFRoaXMgaXMgbmVlZGVkIGluIG9yZGVyIHRvIG1vdmUgJ3Zpc3VhbGx5JyB0aHJvdWdoIGJpLWRpcmVjdGlvbmFsXG4gIC8vIHRleHQgLS0gaS5lLiwgcHJlc3NpbmcgbGVmdCBzaG91bGQgbWFrZSB0aGUgY3Vyc29yIGdvIGxlZnQsIGV2ZW5cbiAgLy8gd2hlbiBpbiBSVEwgdGV4dC4gVGhlIHRyaWNreSBwYXJ0IGlzIHRoZSAnanVtcHMnLCB3aGVyZSBSVEwgYW5kXG4gIC8vIExUUiB0ZXh0IHRvdWNoIGVhY2ggb3RoZXIuIFRoaXMgb2Z0ZW4gcmVxdWlyZXMgdGhlIGN1cnNvciBvZmZzZXRcbiAgLy8gdG8gbW92ZSBtb3JlIHRoYW4gb25lIHVuaXQsIGluIG9yZGVyIHRvIHZpc3VhbGx5IG1vdmUgb25lIHVuaXQuXG4gIGZ1bmN0aW9uIG1vdmVWaXN1YWxseShsaW5lLCBzdGFydCwgZGlyLCBieVVuaXQpIHtcbiAgICB2YXIgYmlkaSA9IGdldE9yZGVyKGxpbmUpO1xuICAgIGlmICghYmlkaSkgcmV0dXJuIG1vdmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpciwgYnlVbml0KTtcbiAgICB2YXIgcG9zID0gZ2V0QmlkaVBhcnRBdChiaWRpLCBzdGFydCksIHBhcnQgPSBiaWRpW3Bvc107XG4gICAgdmFyIHRhcmdldCA9IG1vdmVJbkxpbmUobGluZSwgc3RhcnQsIHBhcnQubGV2ZWwgJSAyID8gLWRpciA6IGRpciwgYnlVbml0KTtcblxuICAgIGZvciAoOzspIHtcbiAgICAgIGlmICh0YXJnZXQgPiBwYXJ0LmZyb20gJiYgdGFyZ2V0IDwgcGFydC50bykgcmV0dXJuIHRhcmdldDtcbiAgICAgIGlmICh0YXJnZXQgPT0gcGFydC5mcm9tIHx8IHRhcmdldCA9PSBwYXJ0LnRvKSB7XG4gICAgICAgIGlmIChnZXRCaWRpUGFydEF0KGJpZGksIHRhcmdldCkgPT0gcG9zKSByZXR1cm4gdGFyZ2V0O1xuICAgICAgICBwYXJ0ID0gYmlkaVtwb3MgKz0gZGlyXTtcbiAgICAgICAgcmV0dXJuIChkaXIgPiAwKSA9PSBwYXJ0LmxldmVsICUgMiA/IHBhcnQudG8gOiBwYXJ0LmZyb207XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0ID0gYmlkaVtwb3MgKz0gZGlyXTtcbiAgICAgICAgaWYgKCFwYXJ0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKChkaXIgPiAwKSA9PSBwYXJ0LmxldmVsICUgMilcbiAgICAgICAgICB0YXJnZXQgPSBtb3ZlSW5MaW5lKGxpbmUsIHBhcnQudG8sIC0xLCBieVVuaXQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgdGFyZ2V0ID0gbW92ZUluTGluZShsaW5lLCBwYXJ0LmZyb20sIDEsIGJ5VW5pdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZUxvZ2ljYWxseShsaW5lLCBzdGFydCwgZGlyLCBieVVuaXQpIHtcbiAgICB2YXIgdGFyZ2V0ID0gc3RhcnQgKyBkaXI7XG4gICAgaWYgKGJ5VW5pdCkgd2hpbGUgKHRhcmdldCA+IDAgJiYgaXNFeHRlbmRpbmdDaGFyKGxpbmUudGV4dC5jaGFyQXQodGFyZ2V0KSkpIHRhcmdldCArPSBkaXI7XG4gICAgcmV0dXJuIHRhcmdldCA8IDAgfHwgdGFyZ2V0ID4gbGluZS50ZXh0Lmxlbmd0aCA/IG51bGwgOiB0YXJnZXQ7XG4gIH1cblxuICAvLyBCaWRpcmVjdGlvbmFsIG9yZGVyaW5nIGFsZ29yaXRobVxuICAvLyBTZWUgaHR0cDovL3VuaWNvZGUub3JnL3JlcG9ydHMvdHI5L3RyOS0xMy5odG1sIGZvciB0aGUgYWxnb3JpdGhtXG4gIC8vIHRoYXQgdGhpcyAocGFydGlhbGx5KSBpbXBsZW1lbnRzLlxuXG4gIC8vIE9uZS1jaGFyIGNvZGVzIHVzZWQgZm9yIGNoYXJhY3RlciB0eXBlczpcbiAgLy8gTCAoTCk6ICAgTGVmdC10by1SaWdodFxuICAvLyBSIChSKTogICBSaWdodC10by1MZWZ0XG4gIC8vIHIgKEFMKTogIFJpZ2h0LXRvLUxlZnQgQXJhYmljXG4gIC8vIDEgKEVOKTogIEV1cm9wZWFuIE51bWJlclxuICAvLyArIChFUyk6ICBFdXJvcGVhbiBOdW1iZXIgU2VwYXJhdG9yXG4gIC8vICUgKEVUKTogIEV1cm9wZWFuIE51bWJlciBUZXJtaW5hdG9yXG4gIC8vIG4gKEFOKTogIEFyYWJpYyBOdW1iZXJcbiAgLy8gLCAoQ1MpOiAgQ29tbW9uIE51bWJlciBTZXBhcmF0b3JcbiAgLy8gbSAoTlNNKTogTm9uLVNwYWNpbmcgTWFya1xuICAvLyBiIChCTik6ICBCb3VuZGFyeSBOZXV0cmFsXG4gIC8vIHMgKEIpOiAgIFBhcmFncmFwaCBTZXBhcmF0b3JcbiAgLy8gdCAoUyk6ICAgU2VnbWVudCBTZXBhcmF0b3JcbiAgLy8gdyAoV1MpOiAgV2hpdGVzcGFjZVxuICAvLyBOIChPTik6ICBPdGhlciBOZXV0cmFsc1xuXG4gIC8vIFJldHVybnMgbnVsbCBpZiBjaGFyYWN0ZXJzIGFyZSBvcmRlcmVkIGFzIHRoZXkgYXBwZWFyXG4gIC8vIChsZWZ0LXRvLXJpZ2h0KSwgb3IgYW4gYXJyYXkgb2Ygc2VjdGlvbnMgKHtmcm9tLCB0bywgbGV2ZWx9XG4gIC8vIG9iamVjdHMpIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IG9jY3VyIHZpc3VhbGx5LlxuICB2YXIgYmlkaU9yZGVyaW5nID0gKGZ1bmN0aW9uKCkge1xuICAgIC8vIENoYXJhY3RlciB0eXBlcyBmb3IgY29kZXBvaW50cyAwIHRvIDB4ZmZcbiAgICB2YXIgbG93VHlwZXMgPSBcImJiYmJiYmJiYnRzdHdzYmJiYmJiYmJiYmJiYmJzc3N0d05OJSUlTk5OTk5OLE4sTjExMTExMTExMTFOTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTExMTE5OTk5iYmJiYmJzYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmIsTiUlJSVOTk5OTE5OTk5OJSUxMU5MTk5OMUxOTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTkxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExOXCI7XG4gICAgLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDB4NjAwIHRvIDB4NmZmXG4gICAgdmFyIGFyYWJpY1R5cGVzID0gXCJycnJycnJycnJycnIsck5ObW1tbW1tcnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJtbW1tbW1tbW1tbW1tbXJycnJycnJubm5ubm5ubm5uJW5ucnJybXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1tbW1tbU5tbW1tXCI7XG4gICAgZnVuY3Rpb24gY2hhclR5cGUoY29kZSkge1xuICAgICAgaWYgKGNvZGUgPD0gMHhmNykgcmV0dXJuIGxvd1R5cGVzLmNoYXJBdChjb2RlKTtcbiAgICAgIGVsc2UgaWYgKDB4NTkwIDw9IGNvZGUgJiYgY29kZSA8PSAweDVmNCkgcmV0dXJuIFwiUlwiO1xuICAgICAgZWxzZSBpZiAoMHg2MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4NmVkKSByZXR1cm4gYXJhYmljVHlwZXMuY2hhckF0KGNvZGUgLSAweDYwMCk7XG4gICAgICBlbHNlIGlmICgweDZlZSA8PSBjb2RlICYmIGNvZGUgPD0gMHg4YWMpIHJldHVybiBcInJcIjtcbiAgICAgIGVsc2UgaWYgKDB4MjAwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgyMDBiKSByZXR1cm4gXCJ3XCI7XG4gICAgICBlbHNlIGlmIChjb2RlID09IDB4MjAwYykgcmV0dXJuIFwiYlwiO1xuICAgICAgZWxzZSByZXR1cm4gXCJMXCI7XG4gICAgfVxuXG4gICAgdmFyIGJpZGlSRSA9IC9bXFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MDcwMC1cXHUwOGFjXS87XG4gICAgdmFyIGlzTmV1dHJhbCA9IC9bc3R3Tl0vLCBpc1N0cm9uZyA9IC9bTFJyXS8sIGNvdW50c0FzTGVmdCA9IC9bTGIxbl0vLCBjb3VudHNBc051bSA9IC9bMW5dLztcbiAgICAvLyBCcm93c2VycyBzZWVtIHRvIGFsd2F5cyB0cmVhdCB0aGUgYm91bmRhcmllcyBvZiBibG9jayBlbGVtZW50cyBhcyBiZWluZyBMLlxuICAgIHZhciBvdXRlclR5cGUgPSBcIkxcIjtcblxuICAgIGZ1bmN0aW9uIEJpZGlTcGFuKGxldmVsLCBmcm9tLCB0bykge1xuICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgICAgdGhpcy5mcm9tID0gZnJvbTsgdGhpcy50byA9IHRvO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICghYmlkaVJFLnRlc3Qoc3RyKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgdmFyIGxlbiA9IHN0ci5sZW5ndGgsIHR5cGVzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgdHlwZTsgaSA8IGxlbjsgKytpKVxuICAgICAgICB0eXBlcy5wdXNoKHR5cGUgPSBjaGFyVHlwZShzdHIuY2hhckNvZGVBdChpKSkpO1xuXG4gICAgICAvLyBXMS4gRXhhbWluZSBlYWNoIG5vbi1zcGFjaW5nIG1hcmsgKE5TTSkgaW4gdGhlIGxldmVsIHJ1biwgYW5kXG4gICAgICAvLyBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIE5TTSB0byB0aGUgdHlwZSBvZiB0aGUgcHJldmlvdXNcbiAgICAgIC8vIGNoYXJhY3Rlci4gSWYgdGhlIE5TTSBpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxldmVsIHJ1biwgaXQgd2lsbFxuICAgICAgLy8gZ2V0IHRoZSB0eXBlIG9mIHNvci5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBwcmV2ID0gb3V0ZXJUeXBlOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJtXCIpIHR5cGVzW2ldID0gcHJldjtcbiAgICAgICAgZWxzZSBwcmV2ID0gdHlwZTtcbiAgICAgIH1cblxuICAgICAgLy8gVzIuIFNlYXJjaCBiYWNrd2FyZHMgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyXG4gICAgICAvLyB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIEFMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhblxuICAgICAgLy8gQUwgaXMgZm91bmQsIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEFyYWJpY1xuICAgICAgLy8gbnVtYmVyLlxuICAgICAgLy8gVzMuIENoYW5nZSBhbGwgQUxzIHRvIFIuXG4gICAgICBmb3IgKHZhciBpID0gMCwgY3VyID0gb3V0ZXJUeXBlOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCIxXCIgJiYgY3VyID09IFwiclwiKSB0eXBlc1tpXSA9IFwiblwiO1xuICAgICAgICBlbHNlIGlmIChpc1N0cm9uZy50ZXN0KHR5cGUpKSB7IGN1ciA9IHR5cGU7IGlmICh0eXBlID09IFwiclwiKSB0eXBlc1tpXSA9IFwiUlwiOyB9XG4gICAgICB9XG5cbiAgICAgIC8vIFc0LiBBIHNpbmdsZSBFdXJvcGVhbiBzZXBhcmF0b3IgYmV0d2VlbiB0d28gRXVyb3BlYW4gbnVtYmVyc1xuICAgICAgLy8gY2hhbmdlcyB0byBhIEV1cm9wZWFuIG51bWJlci4gQSBzaW5nbGUgY29tbW9uIHNlcGFyYXRvciBiZXR3ZWVuXG4gICAgICAvLyB0d28gbnVtYmVycyBvZiB0aGUgc2FtZSB0eXBlIGNoYW5nZXMgdG8gdGhhdCB0eXBlLlxuICAgICAgZm9yICh2YXIgaSA9IDEsIHByZXYgPSB0eXBlc1swXTsgaSA8IGxlbiAtIDE7ICsraSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICBpZiAodHlwZSA9PSBcIitcIiAmJiBwcmV2ID09IFwiMVwiICYmIHR5cGVzW2krMV0gPT0gXCIxXCIpIHR5cGVzW2ldID0gXCIxXCI7XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCIsXCIgJiYgcHJldiA9PSB0eXBlc1tpKzFdICYmXG4gICAgICAgICAgICAgICAgIChwcmV2ID09IFwiMVwiIHx8IHByZXYgPT0gXCJuXCIpKSB0eXBlc1tpXSA9IHByZXY7XG4gICAgICAgIHByZXYgPSB0eXBlO1xuICAgICAgfVxuXG4gICAgICAvLyBXNS4gQSBzZXF1ZW5jZSBvZiBFdXJvcGVhbiB0ZXJtaW5hdG9ycyBhZGphY2VudCB0byBFdXJvcGVhblxuICAgICAgLy8gbnVtYmVycyBjaGFuZ2VzIHRvIGFsbCBFdXJvcGVhbiBudW1iZXJzLlxuICAgICAgLy8gVzYuIE90aGVyd2lzZSwgc2VwYXJhdG9ycyBhbmQgdGVybWluYXRvcnMgY2hhbmdlIHRvIE90aGVyXG4gICAgICAvLyBOZXV0cmFsLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICBpZiAodHlwZSA9PSBcIixcIikgdHlwZXNbaV0gPSBcIk5cIjtcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBcIiVcIikge1xuICAgICAgICAgIGZvciAodmFyIGVuZCA9IGkgKyAxOyBlbmQgPCBsZW4gJiYgdHlwZXNbZW5kXSA9PSBcIiVcIjsgKytlbmQpIHt9XG4gICAgICAgICAgdmFyIHJlcGxhY2UgPSAoaSAmJiB0eXBlc1tpLTFdID09IFwiIVwiKSB8fCAoZW5kIDwgbGVuICYmIHR5cGVzW2VuZF0gPT0gXCIxXCIpID8gXCIxXCIgOiBcIk5cIjtcbiAgICAgICAgICBmb3IgKHZhciBqID0gaTsgaiA8IGVuZDsgKytqKSB0eXBlc1tqXSA9IHJlcGxhY2U7XG4gICAgICAgICAgaSA9IGVuZCAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVzcuIFNlYXJjaCBiYWNrd2FyZHMgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyXG4gICAgICAvLyB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuIEwgaXNcbiAgICAgIC8vIGZvdW5kLCB0aGVuIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEwuXG4gICAgICBmb3IgKHZhciBpID0gMCwgY3VyID0gb3V0ZXJUeXBlOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKGN1ciA9PSBcIkxcIiAmJiB0eXBlID09IFwiMVwiKSB0eXBlc1tpXSA9IFwiTFwiO1xuICAgICAgICBlbHNlIGlmIChpc1N0cm9uZy50ZXN0KHR5cGUpKSBjdXIgPSB0eXBlO1xuICAgICAgfVxuXG4gICAgICAvLyBOMS4gQSBzZXF1ZW5jZSBvZiBuZXV0cmFscyB0YWtlcyB0aGUgZGlyZWN0aW9uIG9mIHRoZVxuICAgICAgLy8gc3Vycm91bmRpbmcgc3Ryb25nIHRleHQgaWYgdGhlIHRleHQgb24gYm90aCBzaWRlcyBoYXMgdGhlIHNhbWVcbiAgICAgIC8vIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpblxuICAgICAgLy8gdGVybXMgb2YgdGhlaXIgaW5mbHVlbmNlIG9uIG5ldXRyYWxzLiBTdGFydC1vZi1sZXZlbC1ydW4gKHNvcilcbiAgICAgIC8vIGFuZCBlbmQtb2YtbGV2ZWwtcnVuIChlb3IpIGFyZSB1c2VkIGF0IGxldmVsIHJ1biBib3VuZGFyaWVzLlxuICAgICAgLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbi5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgaWYgKGlzTmV1dHJhbC50ZXN0KHR5cGVzW2ldKSkge1xuICAgICAgICAgIGZvciAodmFyIGVuZCA9IGkgKyAxOyBlbmQgPCBsZW4gJiYgaXNOZXV0cmFsLnRlc3QodHlwZXNbZW5kXSk7ICsrZW5kKSB7fVxuICAgICAgICAgIHZhciBiZWZvcmUgPSAoaSA/IHR5cGVzW2ktMV0gOiBvdXRlclR5cGUpID09IFwiTFwiO1xuICAgICAgICAgIHZhciBhZnRlciA9IChlbmQgPCBsZW4gPyB0eXBlc1tlbmRdIDogb3V0ZXJUeXBlKSA9PSBcIkxcIjtcbiAgICAgICAgICB2YXIgcmVwbGFjZSA9IGJlZm9yZSB8fCBhZnRlciA/IFwiTFwiIDogXCJSXCI7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPCBlbmQ7ICsraikgdHlwZXNbal0gPSByZXBsYWNlO1xuICAgICAgICAgIGkgPSBlbmQgLSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhlcmUgd2UgZGVwYXJ0IGZyb20gdGhlIGRvY3VtZW50ZWQgYWxnb3JpdGhtLCBpbiBvcmRlciB0byBhdm9pZFxuICAgICAgLy8gYnVpbGRpbmcgdXAgYW4gYWN0dWFsIGxldmVscyBhcnJheS4gU2luY2UgdGhlcmUgYXJlIG9ubHkgdGhyZWVcbiAgICAgIC8vIGxldmVscyAoMCwgMSwgMikgaW4gYW4gaW1wbGVtZW50YXRpb24gdGhhdCBkb2Vzbid0IHRha2VcbiAgICAgIC8vIGV4cGxpY2l0IGVtYmVkZGluZyBpbnRvIGFjY291bnQsIHdlIGNhbiBidWlsZCB1cCB0aGUgb3JkZXIgb25cbiAgICAgIC8vIHRoZSBmbHksIHdpdGhvdXQgZm9sbG93aW5nIHRoZSBsZXZlbC1iYXNlZCBhbGdvcml0aG0uXG4gICAgICB2YXIgb3JkZXIgPSBbXSwgbTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOykge1xuICAgICAgICBpZiAoY291bnRzQXNMZWZ0LnRlc3QodHlwZXNbaV0pKSB7XG4gICAgICAgICAgdmFyIHN0YXJ0ID0gaTtcbiAgICAgICAgICBmb3IgKCsraTsgaSA8IGxlbiAmJiBjb3VudHNBc0xlZnQudGVzdCh0eXBlc1tpXSk7ICsraSkge31cbiAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBzdGFydCwgaSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwb3MgPSBpLCBhdCA9IG9yZGVyLmxlbmd0aDtcbiAgICAgICAgICBmb3IgKCsraTsgaSA8IGxlbiAmJiB0eXBlc1tpXSAhPSBcIkxcIjsgKytpKSB7fVxuICAgICAgICAgIGZvciAodmFyIGogPSBwb3M7IGogPCBpOykge1xuICAgICAgICAgICAgaWYgKGNvdW50c0FzTnVtLnRlc3QodHlwZXNbal0pKSB7XG4gICAgICAgICAgICAgIGlmIChwb3MgPCBqKSBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRpU3BhbigxLCBwb3MsIGopKTtcbiAgICAgICAgICAgICAgdmFyIG5zdGFydCA9IGo7XG4gICAgICAgICAgICAgIGZvciAoKytqOyBqIDwgaSAmJiBjb3VudHNBc051bS50ZXN0KHR5cGVzW2pdKTsgKytqKSB7fVxuICAgICAgICAgICAgICBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRpU3BhbigyLCBuc3RhcnQsIGopKTtcbiAgICAgICAgICAgICAgcG9zID0gajtcbiAgICAgICAgICAgIH0gZWxzZSArK2o7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwb3MgPCBpKSBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRpU3BhbigxLCBwb3MsIGkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9yZGVyWzBdLmxldmVsID09IDEgJiYgKG0gPSBzdHIubWF0Y2goL15cXHMrLykpKSB7XG4gICAgICAgIG9yZGVyWzBdLmZyb20gPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgb3JkZXIudW5zaGlmdChuZXcgQmlkaVNwYW4oMCwgMCwgbVswXS5sZW5ndGgpKTtcbiAgICAgIH1cbiAgICAgIGlmIChsc3Qob3JkZXIpLmxldmVsID09IDEgJiYgKG0gPSBzdHIubWF0Y2goL1xccyskLykpKSB7XG4gICAgICAgIGxzdChvcmRlcikudG8gLT0gbVswXS5sZW5ndGg7XG4gICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKDAsIGxlbiAtIG1bMF0ubGVuZ3RoLCBsZW4pKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcmRlclswXS5sZXZlbCA9PSAyKVxuICAgICAgICBvcmRlci51bnNoaWZ0KG5ldyBCaWRpU3BhbigxLCBvcmRlclswXS50bywgb3JkZXJbMF0udG8pKTtcbiAgICAgIGlmIChvcmRlclswXS5sZXZlbCAhPSBsc3Qob3JkZXIpLmxldmVsKVxuICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihvcmRlclswXS5sZXZlbCwgbGVuLCBsZW4pKTtcblxuICAgICAgcmV0dXJuIG9yZGVyO1xuICAgIH07XG4gIH0pKCk7XG5cbiAgLy8gVEhFIEVORFxuXG4gIENvZGVNaXJyb3IudmVyc2lvbiA9IFwiNS4xNC4yXCI7XG5cbiAgcmV0dXJuIENvZGVNaXJyb3I7XG59KTtcbiIsIi8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzI0w0MVxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShmYWN0b3J5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LmVtb2ppID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW1vamlzID0gW1wiOmJsdXNoOlwiLFwiOnNjcmVhbTpcIixcIjpzbWlyazpcIixcIjpzbWlsZXk6XCIsXCI6c3R1Y2tfb3V0X3Rvbmd1ZV9jbG9zZWRfZXllczpcIixcIjpzdHVja19vdXRfdG9uZ3VlX3dpbmtpbmdfZXllOlwiLFwiOnJhZ2U6XCIsXCI6ZGlzYXBwb2ludGVkOlwiLFwiOnNvYjpcIixcIjpraXNzaW5nX2hlYXJ0OlwiLFwiOndpbms6XCIsXCI6cGVuc2l2ZTpcIixcIjpjb25mb3VuZGVkOlwiLFwiOmZsdXNoZWQ6XCIsXCI6cmVsYXhlZDpcIixcIjptYXNrOlwiLFwiOmhlYXJ0OlwiLFwiOmJyb2tlbl9oZWFydDpcIixcIjpzdW5ueTpcIixcIjp1bWJyZWxsYTpcIixcIjpjbG91ZDpcIixcIjpzbm93Zmxha2U6XCIsXCI6c25vd21hbjpcIixcIjp6YXA6XCIsXCI6Y3ljbG9uZTpcIixcIjpmb2dneTpcIixcIjpvY2VhbjpcIixcIjpjYXQ6XCIsXCI6ZG9nOlwiLFwiOm1vdXNlOlwiLFwiOmhhbXN0ZXI6XCIsXCI6cmFiYml0OlwiLFwiOndvbGY6XCIsXCI6ZnJvZzpcIixcIjp0aWdlcjpcIixcIjprb2FsYTpcIixcIjpiZWFyOlwiLFwiOnBpZzpcIixcIjpwaWdfbm9zZTpcIixcIjpjb3c6XCIsXCI6Ym9hcjpcIixcIjptb25rZXlfZmFjZTpcIixcIjptb25rZXk6XCIsXCI6aG9yc2U6XCIsXCI6cmFjZWhvcnNlOlwiLFwiOmNhbWVsOlwiLFwiOnNoZWVwOlwiLFwiOmVsZXBoYW50OlwiLFwiOnBhbmRhX2ZhY2U6XCIsXCI6c25ha2U6XCIsXCI6YmlyZDpcIixcIjpiYWJ5X2NoaWNrOlwiLFwiOmhhdGNoZWRfY2hpY2s6XCIsXCI6aGF0Y2hpbmdfY2hpY2s6XCIsXCI6Y2hpY2tlbjpcIixcIjpwZW5ndWluOlwiLFwiOnR1cnRsZTpcIixcIjpidWc6XCIsXCI6aG9uZXliZWU6XCIsXCI6YW50OlwiLFwiOmJlZXRsZTpcIixcIjpzbmFpbDpcIixcIjpvY3RvcHVzOlwiLFwiOnRyb3BpY2FsX2Zpc2g6XCIsXCI6ZmlzaDpcIixcIjp3aGFsZTpcIixcIjp3aGFsZTI6XCIsXCI6ZG9scGhpbjpcIixcIjpjb3cyOlwiLFwiOnJhbTpcIixcIjpyYXQ6XCIsXCI6d2F0ZXJfYnVmZmFsbzpcIixcIjp0aWdlcjI6XCIsXCI6cmFiYml0MjpcIixcIjpkcmFnb246XCIsXCI6Z29hdDpcIixcIjpyb29zdGVyOlwiLFwiOmRvZzI6XCIsXCI6cGlnMjpcIixcIjptb3VzZTI6XCIsXCI6b3g6XCIsXCI6ZHJhZ29uX2ZhY2U6XCIsXCI6Ymxvd2Zpc2g6XCIsXCI6Y3JvY29kaWxlOlwiLFwiOmRyb21lZGFyeV9jYW1lbDpcIixcIjpsZW9wYXJkOlwiLFwiOmNhdDI6XCIsXCI6cG9vZGxlOlwiLFwiOnBhd19wcmludHM6XCIsXCI6Ym91cXVldDpcIixcIjpjaGVycnlfYmxvc3NvbTpcIixcIjp0dWxpcDpcIixcIjpmb3VyX2xlYWZfY2xvdmVyOlwiLFwiOnJvc2U6XCIsXCI6c3VuZmxvd2VyOlwiLFwiOmhpYmlzY3VzOlwiLFwiOm1hcGxlX2xlYWY6XCIsXCI6bGVhdmVzOlwiLFwiOmZhbGxlbl9sZWFmOlwiLFwiOmhlcmI6XCIsXCI6bXVzaHJvb206XCIsXCI6Y2FjdHVzOlwiLFwiOnBhbG1fdHJlZTpcIixcIjpldmVyZ3JlZW5fdHJlZTpcIixcIjpkZWNpZHVvdXNfdHJlZTpcIixcIjpjaGVzdG51dDpcIixcIjpzZWVkbGluZzpcIixcIjpibG9zc29tOlwiLFwiOmVhcl9vZl9yaWNlOlwiLFwiOnNoZWxsOlwiLFwiOmdsb2JlX3dpdGhfbWVyaWRpYW5zOlwiLFwiOnN1bl93aXRoX2ZhY2U6XCIsXCI6ZnVsbF9tb29uX3dpdGhfZmFjZTpcIixcIjpuZXdfbW9vbl93aXRoX2ZhY2U6XCIsXCI6bmV3X21vb246XCIsXCI6d2F4aW5nX2NyZXNjZW50X21vb246XCIsXCI6Zmlyc3RfcXVhcnRlcl9tb29uOlwiLFwiOndheGluZ19naWJib3VzX21vb246XCIsXCI6ZnVsbF9tb29uOlwiLFwiOndhbmluZ19naWJib3VzX21vb246XCIsXCI6bGFzdF9xdWFydGVyX21vb246XCIsXCI6d2FuaW5nX2NyZXNjZW50X21vb246XCIsXCI6bGFzdF9xdWFydGVyX21vb25fd2l0aF9mYWNlOlwiLFwiOmZpcnN0X3F1YXJ0ZXJfbW9vbl93aXRoX2ZhY2U6XCIsXCI6bW9vbjpcIixcIjplYXJ0aF9hZnJpY2E6XCIsXCI6ZWFydGhfYW1lcmljYXM6XCIsXCI6ZWFydGhfYXNpYTpcIixcIjp2b2xjYW5vOlwiLFwiOm1pbGt5X3dheTpcIixcIjpwYXJ0bHlfc3Vubnk6XCIsXCI6b2N0b2NhdDpcIixcIjpzcXVpcnJlbDpcIixcIjpiYW1ib286XCIsXCI6Z2lmdF9oZWFydDpcIixcIjpkb2xsczpcIixcIjpzY2hvb2xfc2F0Y2hlbDpcIixcIjptb3J0YXJfYm9hcmQ6XCIsXCI6ZmxhZ3M6XCIsXCI6ZmlyZXdvcmtzOlwiLFwiOnNwYXJrbGVyOlwiLFwiOndpbmRfY2hpbWU6XCIsXCI6cmljZV9zY2VuZTpcIixcIjpqYWNrX29fbGFudGVybjpcIixcIjpnaG9zdDpcIixcIjpzYW50YTpcIixcIjpjaHJpc3RtYXNfdHJlZTpcIixcIjpnaWZ0OlwiLFwiOmJlbGw6XCIsXCI6bm9fYmVsbDpcIixcIjp0YW5hYmF0YV90cmVlOlwiLFwiOnRhZGE6XCIsXCI6Y29uZmV0dGlfYmFsbDpcIixcIjpiYWxsb29uOlwiLFwiOmNyeXN0YWxfYmFsbDpcIixcIjpjZDpcIixcIjpkdmQ6XCIsXCI6ZmxvcHB5X2Rpc2s6XCIsXCI6Y2FtZXJhOlwiLFwiOnZpZGVvX2NhbWVyYTpcIixcIjptb3ZpZV9jYW1lcmE6XCIsXCI6Y29tcHV0ZXI6XCIsXCI6dHY6XCIsXCI6aXBob25lOlwiLFwiOnBob25lOlwiLFwiOnRlbGVwaG9uZTpcIixcIjp0ZWxlcGhvbmVfcmVjZWl2ZXI6XCIsXCI6cGFnZXI6XCIsXCI6ZmF4OlwiLFwiOm1pbmlkaXNjOlwiLFwiOnZoczpcIixcIjpzb3VuZDpcIixcIjpzcGVha2VyOlwiLFwiOm11dGU6XCIsXCI6bG91ZHNwZWFrZXI6XCIsXCI6bWVnYTpcIixcIjpob3VyZ2xhc3M6XCIsXCI6aG91cmdsYXNzX2Zsb3dpbmdfc2FuZDpcIixcIjphbGFybV9jbG9jazpcIixcIjp3YXRjaDpcIixcIjpyYWRpbzpcIixcIjpzYXRlbGxpdGU6XCIsXCI6bG9vcDpcIixcIjptYWc6XCIsXCI6bWFnX3JpZ2h0OlwiLFwiOnVubG9jazpcIixcIjpsb2NrOlwiLFwiOmxvY2tfd2l0aF9pbmtfcGVuOlwiLFwiOmNsb3NlZF9sb2NrX3dpdGhfa2V5OlwiLFwiOmtleTpcIixcIjpidWxiOlwiLFwiOmZsYXNobGlnaHQ6XCIsXCI6aGlnaF9icmlnaHRuZXNzOlwiLFwiOmxvd19icmlnaHRuZXNzOlwiLFwiOmVsZWN0cmljX3BsdWc6XCIsXCI6YmF0dGVyeTpcIixcIjpjYWxsaW5nOlwiLFwiOmVtYWlsOlwiLFwiOm1haWxib3g6XCIsXCI6cG9zdGJveDpcIixcIjpiYXRoOlwiLFwiOmJhdGh0dWI6XCIsXCI6c2hvd2VyOlwiLFwiOnRvaWxldDpcIixcIjp3cmVuY2g6XCIsXCI6bnV0X2FuZF9ib2x0OlwiLFwiOmhhbW1lcjpcIixcIjpzZWF0OlwiLFwiOm1vbmV5YmFnOlwiLFwiOnllbjpcIixcIjpkb2xsYXI6XCIsXCI6cG91bmQ6XCIsXCI6ZXVybzpcIixcIjpjcmVkaXRfY2FyZDpcIixcIjptb25leV93aXRoX3dpbmdzOlwiLFwiOmUtbWFpbDpcIixcIjppbmJveF90cmF5OlwiLFwiOm91dGJveF90cmF5OlwiLFwiOmVudmVsb3BlOlwiLFwiOmluY29taW5nX2VudmVsb3BlOlwiLFwiOnBvc3RhbF9ob3JuOlwiLFwiOm1haWxib3hfY2xvc2VkOlwiLFwiOm1haWxib3hfd2l0aF9tYWlsOlwiLFwiOm1haWxib3hfd2l0aF9ub19tYWlsOlwiLFwiOmRvb3I6XCIsXCI6c21va2luZzpcIixcIjpib21iOlwiLFwiOmd1bjpcIixcIjpob2NobzpcIixcIjpwaWxsOlwiLFwiOnN5cmluZ2U6XCIsXCI6cGFnZV9mYWNpbmdfdXA6XCIsXCI6cGFnZV93aXRoX2N1cmw6XCIsXCI6Ym9va21hcmtfdGFiczpcIixcIjpiYXJfY2hhcnQ6XCIsXCI6Y2hhcnRfd2l0aF91cHdhcmRzX3RyZW5kOlwiLFwiOmNoYXJ0X3dpdGhfZG93bndhcmRzX3RyZW5kOlwiLFwiOnNjcm9sbDpcIixcIjpjbGlwYm9hcmQ6XCIsXCI6Y2FsZW5kYXI6XCIsXCI6ZGF0ZTpcIixcIjpjYXJkX2luZGV4OlwiLFwiOmZpbGVfZm9sZGVyOlwiLFwiOm9wZW5fZmlsZV9mb2xkZXI6XCIsXCI6c2Npc3NvcnM6XCIsXCI6cHVzaHBpbjpcIixcIjpwYXBlcmNsaXA6XCIsXCI6YmxhY2tfbmliOlwiLFwiOnBlbmNpbDI6XCIsXCI6c3RyYWlnaHRfcnVsZXI6XCIsXCI6dHJpYW5ndWxhcl9ydWxlcjpcIixcIjpjbG9zZWRfYm9vazpcIixcIjpncmVlbl9ib29rOlwiLFwiOmJsdWVfYm9vazpcIixcIjpvcmFuZ2VfYm9vazpcIixcIjpub3RlYm9vazpcIixcIjpub3RlYm9va193aXRoX2RlY29yYXRpdmVfY292ZXI6XCIsXCI6bGVkZ2VyOlwiLFwiOmJvb2tzOlwiLFwiOmJvb2ttYXJrOlwiLFwiOm5hbWVfYmFkZ2U6XCIsXCI6bWljcm9zY29wZTpcIixcIjp0ZWxlc2NvcGU6XCIsXCI6bmV3c3BhcGVyOlwiLFwiOmZvb3RiYWxsOlwiLFwiOmJhc2tldGJhbGw6XCIsXCI6c29jY2VyOlwiLFwiOmJhc2ViYWxsOlwiLFwiOnRlbm5pczpcIixcIjo4YmFsbDpcIixcIjpydWdieV9mb290YmFsbDpcIixcIjpib3dsaW5nOlwiLFwiOmdvbGY6XCIsXCI6bW91bnRhaW5fYmljeWNsaXN0OlwiLFwiOmJpY3ljbGlzdDpcIixcIjpob3JzZV9yYWNpbmc6XCIsXCI6c25vd2JvYXJkZXI6XCIsXCI6c3dpbW1lcjpcIixcIjpzdXJmZXI6XCIsXCI6c2tpOlwiLFwiOnNwYWRlczpcIixcIjpoZWFydHM6XCIsXCI6Y2x1YnM6XCIsXCI6ZGlhbW9uZHM6XCIsXCI6Z2VtOlwiLFwiOnJpbmc6XCIsXCI6dHJvcGh5OlwiLFwiOm11c2ljYWxfc2NvcmU6XCIsXCI6bXVzaWNhbF9rZXlib2FyZDpcIixcIjp2aW9saW46XCIsXCI6c3BhY2VfaW52YWRlcjpcIixcIjp2aWRlb19nYW1lOlwiLFwiOmJsYWNrX2pva2VyOlwiLFwiOmZsb3dlcl9wbGF5aW5nX2NhcmRzOlwiLFwiOmdhbWVfZGllOlwiLFwiOmRhcnQ6XCIsXCI6bWFoam9uZzpcIixcIjpjbGFwcGVyOlwiLFwiOm1lbW86XCIsXCI6cGVuY2lsOlwiLFwiOmJvb2s6XCIsXCI6YXJ0OlwiLFwiOm1pY3JvcGhvbmU6XCIsXCI6aGVhZHBob25lczpcIixcIjp0cnVtcGV0OlwiLFwiOnNheG9waG9uZTpcIixcIjpndWl0YXI6XCIsXCI6c2hvZTpcIixcIjpzYW5kYWw6XCIsXCI6aGlnaF9oZWVsOlwiLFwiOmxpcHN0aWNrOlwiLFwiOmJvb3Q6XCIsXCI6c2hpcnQ6XCIsXCI6dHNoaXJ0OlwiLFwiOm5lY2t0aWU6XCIsXCI6d29tYW5zX2Nsb3RoZXM6XCIsXCI6ZHJlc3M6XCIsXCI6cnVubmluZ19zaGlydF93aXRoX3Nhc2g6XCIsXCI6amVhbnM6XCIsXCI6a2ltb25vOlwiLFwiOmJpa2luaTpcIixcIjpyaWJib246XCIsXCI6dG9waGF0OlwiLFwiOmNyb3duOlwiLFwiOndvbWFuc19oYXQ6XCIsXCI6bWFuc19zaG9lOlwiLFwiOmNsb3NlZF91bWJyZWxsYTpcIixcIjpicmllZmNhc2U6XCIsXCI6aGFuZGJhZzpcIixcIjpwb3VjaDpcIixcIjpwdXJzZTpcIixcIjpleWVnbGFzc2VzOlwiLFwiOmZpc2hpbmdfcG9sZV9hbmRfZmlzaDpcIixcIjpjb2ZmZWU6XCIsXCI6dGVhOlwiLFwiOnNha2U6XCIsXCI6YmFieV9ib3R0bGU6XCIsXCI6YmVlcjpcIixcIjpiZWVyczpcIixcIjpjb2NrdGFpbDpcIixcIjp0cm9waWNhbF9kcmluazpcIixcIjp3aW5lX2dsYXNzOlwiLFwiOmZvcmtfYW5kX2tuaWZlOlwiLFwiOnBpenphOlwiLFwiOmhhbWJ1cmdlcjpcIixcIjpmcmllczpcIixcIjpwb3VsdHJ5X2xlZzpcIixcIjptZWF0X29uX2JvbmU6XCIsXCI6c3BhZ2hldHRpOlwiLFwiOmN1cnJ5OlwiLFwiOmZyaWVkX3NocmltcDpcIixcIjpiZW50bzpcIixcIjpzdXNoaTpcIixcIjpmaXNoX2Nha2U6XCIsXCI6cmljZV9iYWxsOlwiLFwiOnJpY2VfY3JhY2tlcjpcIixcIjpyaWNlOlwiLFwiOnJhbWVuOlwiLFwiOnN0ZXc6XCIsXCI6b2RlbjpcIixcIjpkYW5nbzpcIixcIjplZ2c6XCIsXCI6YnJlYWQ6XCIsXCI6ZG91Z2hudXQ6XCIsXCI6Y3VzdGFyZDpcIixcIjppY2VjcmVhbTpcIixcIjppY2VfY3JlYW06XCIsXCI6c2hhdmVkX2ljZTpcIixcIjpiaXJ0aGRheTpcIixcIjpjYWtlOlwiLFwiOmNvb2tpZTpcIixcIjpjaG9jb2xhdGVfYmFyOlwiLFwiOmNhbmR5OlwiLFwiOmxvbGxpcG9wOlwiLFwiOmhvbmV5X3BvdDpcIixcIjphcHBsZTpcIixcIjpncmVlbl9hcHBsZTpcIixcIjp0YW5nZXJpbmU6XCIsXCI6bGVtb246XCIsXCI6Y2hlcnJpZXM6XCIsXCI6Z3JhcGVzOlwiLFwiOndhdGVybWVsb246XCIsXCI6c3RyYXdiZXJyeTpcIixcIjpwZWFjaDpcIixcIjptZWxvbjpcIixcIjpiYW5hbmE6XCIsXCI6cGVhcjpcIixcIjpwaW5lYXBwbGU6XCIsXCI6c3dlZXRfcG90YXRvOlwiLFwiOmVnZ3BsYW50OlwiLFwiOnRvbWF0bzpcIixcIjpjb3JuOlwiLFwiOmFsaWVuOlwiLFwiOmFuZ2VsOlwiLFwiOmFuZ2VyOlwiLFwiOmFuZ3J5OlwiLFwiOmFuZ3Vpc2hlZDpcIixcIjphc3RvbmlzaGVkOlwiLFwiOmJhYnk6XCIsXCI6Ymx1ZV9oZWFydDpcIixcIjpibHVzaDpcIixcIjpib29tOlwiLFwiOmJvdzpcIixcIjpib3d0aWU6XCIsXCI6Ym95OlwiLFwiOmJyaWRlX3dpdGhfdmVpbDpcIixcIjpicm9rZW5faGVhcnQ6XCIsXCI6YnVzdF9pbl9zaWxob3VldHRlOlwiLFwiOmJ1c3RzX2luX3NpbGhvdWV0dGU6XCIsXCI6Y2xhcDpcIixcIjpjb2xkX3N3ZWF0OlwiLFwiOmNvbGxpc2lvbjpcIixcIjpjb25mb3VuZGVkOlwiLFwiOmNvbmZ1c2VkOlwiLFwiOmNvbnN0cnVjdGlvbl93b3JrZXI6XCIsXCI6Y29wOlwiLFwiOmNvdXBsZV93aXRoX2hlYXJ0OlwiLFwiOmNvdXBsZTpcIixcIjpjb3VwbGVraXNzOlwiLFwiOmNyeTpcIixcIjpjcnlpbmdfY2F0X2ZhY2U6XCIsXCI6Y3VwaWQ6XCIsXCI6ZGFuY2VyOlwiLFwiOmRhbmNlcnM6XCIsXCI6ZGFzaDpcIixcIjpkaXNhcHBvaW50ZWQ6XCIsXCI6ZGl6enlfZmFjZTpcIixcIjpkaXp6eTpcIixcIjpkcm9wbGV0OlwiLFwiOmVhcjpcIixcIjpleGNsYW1hdGlvbjpcIixcIjpleHByZXNzaW9ubGVzczpcIixcIjpleWVzOlwiLFwiOmZhY2VwdW5jaDpcIixcIjpmYW1pbHk6XCIsXCI6ZmVhcmZ1bDpcIixcIjpmZWVsc2dvb2Q6XCIsXCI6ZmVldDpcIixcIjpmaW5uYWRpZTpcIixcIjpmaXJlOlwiLFwiOmZpc3Q6XCIsXCI6Zmx1c2hlZDpcIixcIjpmcm93bmluZzpcIixcIjpnaXJsOlwiLFwiOmdvYmVyc2VyazpcIixcIjpnb2Rtb2RlOlwiLFwiOmdyZWVuX2hlYXJ0OlwiLFwiOmdyZXlfZXhjbGFtYXRpb246XCIsXCI6Z3JleV9xdWVzdGlvbjpcIixcIjpncmltYWNpbmc6XCIsXCI6Z3JpbjpcIixcIjpncmlubmluZzpcIixcIjpndWFyZHNtYW46XCIsXCI6aGFpcmN1dDpcIixcIjpoYW5kOlwiLFwiOmhhbmtleTpcIixcIjpoZWFyX25vX2V2aWw6XCIsXCI6aGVhcnRfZXllc19jYXQ6XCIsXCI6aGVhcnRfZXllczpcIixcIjpoZWFydDpcIixcIjpoZWFydGJlYXQ6XCIsXCI6aGVhcnRwdWxzZTpcIixcIjpodXJ0cmVhbGJhZDpcIixcIjpodXNoZWQ6XCIsXCI6aW1wOlwiLFwiOmluZm9ybWF0aW9uX2Rlc2tfcGVyc29uOlwiLFwiOmlubm9jZW50OlwiLFwiOmphcGFuZXNlX2dvYmxpbjpcIixcIjpqYXBhbmVzZV9vZ3JlOlwiLFwiOmpveV9jYXQ6XCIsXCI6am95OlwiLFwiOmtpc3M6XCIsXCI6a2lzc2luZ19jYXQ6XCIsXCI6a2lzc2luZ19jbG9zZWRfZXllczpcIixcIjpraXNzaW5nX2hlYXJ0OlwiLFwiOmtpc3Npbmdfc21pbGluZ19leWVzOlwiLFwiOmtpc3Npbmc6XCIsXCI6bGF1Z2hpbmc6XCIsXCI6bGlwczpcIixcIjpsb3ZlX2xldHRlcjpcIixcIjptYW5fd2l0aF9ndWFfcGlfbWFvOlwiLFwiOm1hbl93aXRoX3R1cmJhbjpcIixcIjptYW46XCIsXCI6bWFzazpcIixcIjptYXNzYWdlOlwiLFwiOm1ldGFsOlwiLFwiOm11c2NsZTpcIixcIjptdXNpY2FsX25vdGU6XCIsXCI6bmFpbF9jYXJlOlwiLFwiOm5lY2tiZWFyZDpcIixcIjpuZXV0cmFsX2ZhY2U6XCIsXCI6bm9fZ29vZDpcIixcIjpub19tb3V0aDpcIixcIjpub3NlOlwiLFwiOm5vdGVzOlwiLFwiOm9rX2hhbmQ6XCIsXCI6b2tfd29tYW46XCIsXCI6b2xkZXJfbWFuOlwiLFwiOm9sZGVyX3dvbWFuOlwiLFwiOm9wZW5faGFuZHM6XCIsXCI6b3Blbl9tb3V0aDpcIixcIjpwZW5zaXZlOlwiLFwiOnBlcnNldmVyZTpcIixcIjpwZXJzb25fZnJvd25pbmc6XCIsXCI6cGVyc29uX3dpdGhfYmxvbmRfaGFpcjpcIixcIjpwZXJzb25fd2l0aF9wb3V0aW5nX2ZhY2U6XCIsXCI6cG9pbnRfZG93bjpcIixcIjpwb2ludF9sZWZ0OlwiLFwiOnBvaW50X3JpZ2h0OlwiLFwiOnBvaW50X3VwXzI6XCIsXCI6cG9pbnRfdXA6XCIsXCI6cG9vcDpcIixcIjpwb3V0aW5nX2NhdDpcIixcIjpwcmF5OlwiLFwiOnByaW5jZXNzOlwiLFwiOnB1bmNoOlwiLFwiOnB1cnBsZV9oZWFydDpcIixcIjpxdWVzdGlvbjpcIixcIjpyYWdlOlwiLFwiOnJhZ2UxOlwiLFwiOnJhZ2UyOlwiLFwiOnJhZ2UzOlwiLFwiOnJhZ2U0OlwiLFwiOnJhaXNlZF9oYW5kOlwiLFwiOnJhaXNlZF9oYW5kczpcIixcIjpyZWxheGVkOlwiLFwiOnJlbGlldmVkOlwiLFwiOnJldm9sdmluZ19oZWFydHM6XCIsXCI6cnVubmVyOlwiLFwiOnJ1bm5pbmc6XCIsXCI6c2F0aXNmaWVkOlwiLFwiOnNjcmVhbV9jYXQ6XCIsXCI6c2NyZWFtOlwiLFwiOnNlZV9ub19ldmlsOlwiLFwiOnNoaXQ6XCIsXCI6c2t1bGw6XCIsXCI6c2xlZXBpbmc6XCIsXCI6c2xlZXB5OlwiLFwiOnNtaWxlX2NhdDpcIixcIjpzbWlsZTpcIixcIjpzbWlsZXlfY2F0OlwiLFwiOnNtaWxleTpcIixcIjpzbWlsaW5nX2ltcDpcIixcIjpzbWlya19jYXQ6XCIsXCI6c21pcms6XCIsXCI6c29iOlwiLFwiOnNwYXJrbGluZ19oZWFydDpcIixcIjpzcGFya2xlczpcIixcIjpzcGVha19ub19ldmlsOlwiLFwiOnNwZWVjaF9iYWxsb29uOlwiLFwiOnN0YXI6XCIsXCI6c3RhcjI6XCIsXCI6c3R1Y2tfb3V0X3Rvbmd1ZV9jbG9zZWRfZXllczpcIixcIjpzdHVja19vdXRfdG9uZ3VlX3dpbmtpbmdfZXllOlwiLFwiOnN0dWNrX291dF90b25ndWU6XCIsXCI6c3VuZ2xhc3NlczpcIixcIjpzdXNwZWN0OlwiLFwiOnN3ZWF0X2Ryb3BzOlwiLFwiOnN3ZWF0X3NtaWxlOlwiLFwiOnN3ZWF0OlwiLFwiOnRob3VnaHRfYmFsbG9vbjpcIixcIjotMTpcIixcIjp0aHVtYnNkb3duOlwiLFwiOnRodW1ic3VwOlwiLFwiOisxOlwiLFwiOnRpcmVkX2ZhY2U6XCIsXCI6dG9uZ3VlOlwiLFwiOnRyaXVtcGg6XCIsXCI6dHJvbGxmYWNlOlwiLFwiOnR3b19oZWFydHM6XCIsXCI6dHdvX21lbl9ob2xkaW5nX2hhbmRzOlwiLFwiOnR3b193b21lbl9ob2xkaW5nX2hhbmRzOlwiLFwiOnVuYW11c2VkOlwiLFwiOnY6XCIsXCI6d2Fsa2luZzpcIixcIjp3YXZlOlwiLFwiOndlYXJ5OlwiLFwiOndpbmsyOlwiLFwiOndpbms6XCIsXCI6d29tYW46XCIsXCI6d29ycmllZDpcIixcIjp5ZWxsb3dfaGVhcnQ6XCIsXCI6eXVtOlwiLFwiOnp6ejpcIixcIjoxMDk6XCIsXCI6aG91c2U6XCIsXCI6aG91c2Vfd2l0aF9nYXJkZW46XCIsXCI6c2Nob29sOlwiLFwiOm9mZmljZTpcIixcIjpwb3N0X29mZmljZTpcIixcIjpob3NwaXRhbDpcIixcIjpiYW5rOlwiLFwiOmNvbnZlbmllbmNlX3N0b3JlOlwiLFwiOmxvdmVfaG90ZWw6XCIsXCI6aG90ZWw6XCIsXCI6d2VkZGluZzpcIixcIjpjaHVyY2g6XCIsXCI6ZGVwYXJ0bWVudF9zdG9yZTpcIixcIjpldXJvcGVhbl9wb3N0X29mZmljZTpcIixcIjpjaXR5X3N1bnJpc2U6XCIsXCI6Y2l0eV9zdW5zZXQ6XCIsXCI6amFwYW5lc2VfY2FzdGxlOlwiLFwiOmV1cm9wZWFuX2Nhc3RsZTpcIixcIjp0ZW50OlwiLFwiOmZhY3Rvcnk6XCIsXCI6dG9reW9fdG93ZXI6XCIsXCI6amFwYW46XCIsXCI6bW91bnRfZnVqaTpcIixcIjpzdW5yaXNlX292ZXJfbW91bnRhaW5zOlwiLFwiOnN1bnJpc2U6XCIsXCI6c3RhcnM6XCIsXCI6c3RhdHVlX29mX2xpYmVydHk6XCIsXCI6YnJpZGdlX2F0X25pZ2h0OlwiLFwiOmNhcm91c2VsX2hvcnNlOlwiLFwiOnJhaW5ib3c6XCIsXCI6ZmVycmlzX3doZWVsOlwiLFwiOmZvdW50YWluOlwiLFwiOnJvbGxlcl9jb2FzdGVyOlwiLFwiOnNoaXA6XCIsXCI6c3BlZWRib2F0OlwiLFwiOmJvYXQ6XCIsXCI6c2FpbGJvYXQ6XCIsXCI6cm93Ym9hdDpcIixcIjphbmNob3I6XCIsXCI6cm9ja2V0OlwiLFwiOmFpcnBsYW5lOlwiLFwiOmhlbGljb3B0ZXI6XCIsXCI6c3RlYW1fbG9jb21vdGl2ZTpcIixcIjp0cmFtOlwiLFwiOm1vdW50YWluX3JhaWx3YXk6XCIsXCI6YmlrZTpcIixcIjphZXJpYWxfdHJhbXdheTpcIixcIjpzdXNwZW5zaW9uX3JhaWx3YXk6XCIsXCI6bW91bnRhaW5fY2FibGV3YXk6XCIsXCI6dHJhY3RvcjpcIixcIjpibHVlX2NhcjpcIixcIjpvbmNvbWluZ19hdXRvbW9iaWxlOlwiLFwiOmNhcjpcIixcIjpyZWRfY2FyOlwiLFwiOnRheGk6XCIsXCI6b25jb21pbmdfdGF4aTpcIixcIjphcnRpY3VsYXRlZF9sb3JyeTpcIixcIjpidXM6XCIsXCI6b25jb21pbmdfYnVzOlwiLFwiOnJvdGF0aW5nX2xpZ2h0OlwiLFwiOnBvbGljZV9jYXI6XCIsXCI6b25jb21pbmdfcG9saWNlX2NhcjpcIixcIjpmaXJlX2VuZ2luZTpcIixcIjphbWJ1bGFuY2U6XCIsXCI6bWluaWJ1czpcIixcIjp0cnVjazpcIixcIjp0cmFpbjpcIixcIjpzdGF0aW9uOlwiLFwiOnRyYWluMjpcIixcIjpidWxsZXR0cmFpbl9mcm9udDpcIixcIjpidWxsZXR0cmFpbl9zaWRlOlwiLFwiOmxpZ2h0X3JhaWw6XCIsXCI6bW9ub3JhaWw6XCIsXCI6cmFpbHdheV9jYXI6XCIsXCI6dHJvbGxleWJ1czpcIixcIjp0aWNrZXQ6XCIsXCI6ZnVlbHB1bXA6XCIsXCI6dmVydGljYWxfdHJhZmZpY19saWdodDpcIixcIjp0cmFmZmljX2xpZ2h0OlwiLFwiOndhcm5pbmc6XCIsXCI6Y29uc3RydWN0aW9uOlwiLFwiOmJlZ2lubmVyOlwiLFwiOmF0bTpcIixcIjpzbG90X21hY2hpbmU6XCIsXCI6YnVzc3RvcDpcIixcIjpiYXJiZXI6XCIsXCI6aG90c3ByaW5nczpcIixcIjpjaGVja2VyZWRfZmxhZzpcIixcIjpjcm9zc2VkX2ZsYWdzOlwiLFwiOml6YWtheWFfbGFudGVybjpcIixcIjptb3lhaTpcIixcIjpjaXJjdXNfdGVudDpcIixcIjpwZXJmb3JtaW5nX2FydHM6XCIsXCI6cm91bmRfcHVzaHBpbjpcIixcIjp0cmlhbmd1bGFyX2ZsYWdfb25fcG9zdDpcIixcIjpqcDpcIixcIjprcjpcIixcIjpjbjpcIixcIjp1czpcIixcIjpmcjpcIixcIjplczpcIixcIjppdDpcIixcIjpydTpcIixcIjpnYjpcIixcIjp1azpcIixcIjpkZTpcIixcIjoxMDA6XCIsXCI6MTIzNDpcIixcIjpvbmU6XCIsXCI6dHdvOlwiLFwiOnRocmVlOlwiLFwiOmZvdXI6XCIsXCI6Zml2ZTpcIixcIjpzaXg6XCIsXCI6c2V2ZW46XCIsXCI6ZWlnaHQ6XCIsXCI6bmluZTpcIixcIjprZXljYXBfdGVuOlwiLFwiOnplcm86XCIsXCI6aGFzaDpcIixcIjpzeW1ib2xzOlwiLFwiOmFycm93X2JhY2t3YXJkOlwiLFwiOmFycm93X2Rvd246XCIsXCI6YXJyb3dfZm9yd2FyZDpcIixcIjphcnJvd19sZWZ0OlwiLFwiOmNhcGl0YWxfYWJjZDpcIixcIjphYmNkOlwiLFwiOmFiYzpcIixcIjphcnJvd19sb3dlcl9sZWZ0OlwiLFwiOmFycm93X2xvd2VyX3JpZ2h0OlwiLFwiOmFycm93X3JpZ2h0OlwiLFwiOmFycm93X3VwOlwiLFwiOmFycm93X3VwcGVyX2xlZnQ6XCIsXCI6YXJyb3dfdXBwZXJfcmlnaHQ6XCIsXCI6YXJyb3dfZG91YmxlX2Rvd246XCIsXCI6YXJyb3dfZG91YmxlX3VwOlwiLFwiOmFycm93X2Rvd25fc21hbGw6XCIsXCI6YXJyb3dfaGVhZGluZ19kb3duOlwiLFwiOmFycm93X2hlYWRpbmdfdXA6XCIsXCI6bGVmdHdhcmRzX2Fycm93X3dpdGhfaG9vazpcIixcIjphcnJvd19yaWdodF9ob29rOlwiLFwiOmxlZnRfcmlnaHRfYXJyb3c6XCIsXCI6YXJyb3dfdXBfZG93bjpcIixcIjphcnJvd191cF9zbWFsbDpcIixcIjphcnJvd3NfY2xvY2t3aXNlOlwiLFwiOmFycm93c19jb3VudGVyY2xvY2t3aXNlOlwiLFwiOnJld2luZDpcIixcIjpmYXN0X2ZvcndhcmQ6XCIsXCI6aW5mb3JtYXRpb25fc291cmNlOlwiLFwiOm9rOlwiLFwiOnR3aXN0ZWRfcmlnaHR3YXJkc19hcnJvd3M6XCIsXCI6cmVwZWF0OlwiLFwiOnJlcGVhdF9vbmU6XCIsXCI6bmV3OlwiLFwiOnRvcDpcIixcIjp1cDpcIixcIjpjb29sOlwiLFwiOmZyZWU6XCIsXCI6bmc6XCIsXCI6Y2luZW1hOlwiLFwiOmtva286XCIsXCI6c2lnbmFsX3N0cmVuZ3RoOlwiLFwiOnU1MjcyOlwiLFwiOnU1NDA4OlwiLFwiOnU1NWI2OlwiLFwiOnU2MzA3OlwiLFwiOnU2NzA4OlwiLFwiOnU2NzA5OlwiLFwiOnU2ZTgwOlwiLFwiOnU3MTIxOlwiLFwiOnU3NTMzOlwiLFwiOnU3YTdhOlwiLFwiOnU3OTgxOlwiLFwiOnNhOlwiLFwiOnJlc3Ryb29tOlwiLFwiOm1lbnM6XCIsXCI6d29tZW5zOlwiLFwiOmJhYnlfc3ltYm9sOlwiLFwiOm5vX3Ntb2tpbmc6XCIsXCI6cGFya2luZzpcIixcIjp3aGVlbGNoYWlyOlwiLFwiOm1ldHJvOlwiLFwiOmJhZ2dhZ2VfY2xhaW06XCIsXCI6YWNjZXB0OlwiLFwiOndjOlwiLFwiOnBvdGFibGVfd2F0ZXI6XCIsXCI6cHV0X2xpdHRlcl9pbl9pdHNfcGxhY2U6XCIsXCI6c2VjcmV0OlwiLFwiOmNvbmdyYXR1bGF0aW9uczpcIixcIjptOlwiLFwiOnBhc3Nwb3J0X2NvbnRyb2w6XCIsXCI6bGVmdF9sdWdnYWdlOlwiLFwiOmN1c3RvbXM6XCIsXCI6aWRlb2dyYXBoX2FkdmFudGFnZTpcIixcIjpjbDpcIixcIjpzb3M6XCIsXCI6aWQ6XCIsXCI6bm9fZW50cnlfc2lnbjpcIixcIjp1bmRlcmFnZTpcIixcIjpub19tb2JpbGVfcGhvbmVzOlwiLFwiOmRvX25vdF9saXR0ZXI6XCIsXCI6bm9uLXBvdGFibGVfd2F0ZXI6XCIsXCI6bm9fYmljeWNsZXM6XCIsXCI6bm9fcGVkZXN0cmlhbnM6XCIsXCI6Y2hpbGRyZW5fY3Jvc3Npbmc6XCIsXCI6bm9fZW50cnk6XCIsXCI6ZWlnaHRfc3Bva2VkX2FzdGVyaXNrOlwiLFwiOmVpZ2h0X3BvaW50ZWRfYmxhY2tfc3RhcjpcIixcIjpoZWFydF9kZWNvcmF0aW9uOlwiLFwiOnZzOlwiLFwiOnZpYnJhdGlvbl9tb2RlOlwiLFwiOm1vYmlsZV9waG9uZV9vZmY6XCIsXCI6Y2hhcnQ6XCIsXCI6Y3VycmVuY3lfZXhjaGFuZ2U6XCIsXCI6YXJpZXM6XCIsXCI6dGF1cnVzOlwiLFwiOmdlbWluaTpcIixcIjpjYW5jZXI6XCIsXCI6bGVvOlwiLFwiOnZpcmdvOlwiLFwiOmxpYnJhOlwiLFwiOnNjb3JwaXVzOlwiLFwiOnNhZ2l0dGFyaXVzOlwiLFwiOmNhcHJpY29ybjpcIixcIjphcXVhcml1czpcIixcIjpwaXNjZXM6XCIsXCI6b3BoaXVjaHVzOlwiLFwiOnNpeF9wb2ludGVkX3N0YXI6XCIsXCI6bmVnYXRpdmVfc3F1YXJlZF9jcm9zc19tYXJrOlwiLFwiOmE6XCIsXCI6YjpcIixcIjphYjpcIixcIjpvMjpcIixcIjpkaWFtb25kX3NoYXBlX3dpdGhfYV9kb3RfaW5zaWRlOlwiLFwiOnJlY3ljbGU6XCIsXCI6ZW5kOlwiLFwiOm9uOlwiLFwiOnNvb246XCIsXCI6Y2xvY2sxOlwiLFwiOmNsb2NrMTMwOlwiLFwiOmNsb2NrMTA6XCIsXCI6Y2xvY2sxMDMwOlwiLFwiOmNsb2NrMTE6XCIsXCI6Y2xvY2sxMTMwOlwiLFwiOmNsb2NrMTI6XCIsXCI6Y2xvY2sxMjMwOlwiLFwiOmNsb2NrMjpcIixcIjpjbG9jazIzMDpcIixcIjpjbG9jazM6XCIsXCI6Y2xvY2szMzA6XCIsXCI6Y2xvY2s0OlwiLFwiOmNsb2NrNDMwOlwiLFwiOmNsb2NrNTpcIixcIjpjbG9jazUzMDpcIixcIjpjbG9jazY6XCIsXCI6Y2xvY2s2MzA6XCIsXCI6Y2xvY2s3OlwiLFwiOmNsb2NrNzMwOlwiLFwiOmNsb2NrODpcIixcIjpjbG9jazgzMDpcIixcIjpjbG9jazk6XCIsXCI6Y2xvY2s5MzA6XCIsXCI6aGVhdnlfZG9sbGFyX3NpZ246XCIsXCI6Y29weXJpZ2h0OlwiLFwiOnJlZ2lzdGVyZWQ6XCIsXCI6dG06XCIsXCI6eDpcIixcIjpoZWF2eV9leGNsYW1hdGlvbl9tYXJrOlwiLFwiOmJhbmdiYW5nOlwiLFwiOmludGVycm9iYW5nOlwiLFwiOm86XCIsXCI6aGVhdnlfbXVsdGlwbGljYXRpb25feDpcIixcIjpoZWF2eV9wbHVzX3NpZ246XCIsXCI6aGVhdnlfbWludXNfc2lnbjpcIixcIjpoZWF2eV9kaXZpc2lvbl9zaWduOlwiLFwiOndoaXRlX2Zsb3dlcjpcIixcIjpoZWF2eV9jaGVja19tYXJrOlwiLFwiOmJhbGxvdF9ib3hfd2l0aF9jaGVjazpcIixcIjpyYWRpb19idXR0b246XCIsXCI6bGluazpcIixcIjpjdXJseV9sb29wOlwiLFwiOndhdnlfZGFzaDpcIixcIjpwYXJ0X2FsdGVybmF0aW9uX21hcms6XCIsXCI6dHJpZGVudDpcIixcIjpibGFja19zcXVhcmU6XCIsXCI6d2hpdGVfc3F1YXJlOlwiLFwiOndoaXRlX2NoZWNrX21hcms6XCIsXCI6YmxhY2tfc3F1YXJlX2J1dHRvbjpcIixcIjp3aGl0ZV9zcXVhcmVfYnV0dG9uOlwiLFwiOmJsYWNrX2NpcmNsZTpcIixcIjp3aGl0ZV9jaXJjbGU6XCIsXCI6cmVkX2NpcmNsZTpcIixcIjpsYXJnZV9ibHVlX2NpcmNsZTpcIixcIjpsYXJnZV9ibHVlX2RpYW1vbmQ6XCIsXCI6bGFyZ2Vfb3JhbmdlX2RpYW1vbmQ6XCIsXCI6c21hbGxfYmx1ZV9kaWFtb25kOlwiLFwiOnNtYWxsX29yYW5nZV9kaWFtb25kOlwiLFwiOnNtYWxsX3JlZF90cmlhbmdsZTpcIixcIjpzbWFsbF9yZWRfdHJpYW5nbGVfZG93bjpcIixcIjpzaGlwaXQ6XCJdLFxuICAgICAgICB0ZXN0ID0gL1xcOlthLXowLTlfXFwtXFwrXStcXDovZztcblxuICAgIGZ1bmN0aW9uIGVtb2ppKHNvbWVTdHJpbmcsIHVybCwgc2l6ZSkge1xuICAgICAgICByZXR1cm4gc29tZVN0cmluZy5yZXBsYWNlKHRlc3QsIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGVtb2ppcy5pbmRleE9mKG1hdGNoKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IFN0cmluZyhtYXRjaCkuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnPGltZyBjbGFzcz1cImVtb2ppXCIgdGl0bGU9XCI6JyArIG5hbWUgKyAnOlwiIGFsdD1cIicgKyBuYW1lICsgJ1wiIHNyYz1cIicgKyB1cmwgKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnLnBuZ1wiJyArIChzaXplID8gKCcgaGVpZ2h0PVwiJyArIHNpemUgKyAnXCInKSA6ICcnKSArICcgLz4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbW9qaS5saXN0ID0gZW1vamlzO1xuXG4gICAgcmV0dXJuIGVtb2ppO1xufSkpO1xuIiwiLy8gQ29weXJpZ2h0IDIwMDktMjAxMiBieSBjb250cmlidXRvcnMsIE1JVCBMaWNlbnNlXG4vLyB2aW06IHRzPTQgc3RzPTQgc3c9NCBleHBhbmR0YWJcblxuLy9BZGQgc2VtaWNvbG9uIHRvIHByZXZlbnQgSUlGRSBmcm9tIGJlaW5nIHBhc3NlZCBhcyBhcmd1bWVudCB0byBjb25jYXRlZCBjb2RlLlxuO1xuLy8gTW9kdWxlIHN5c3RlbXMgbWFnaWMgZGFuY2VcbihmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgIC8vIFJlcXVpcmVKU1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBkZWZpbmUoZGVmaW5pdGlvbik7XG4gICAgLy8gWVVJM1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIFlVSSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgWVVJLmFkZChcImVzNVwiLCBkZWZpbml0aW9uKTtcbiAgICAvLyBDb21tb25KUyBhbmQgPHNjcmlwdD5cbiAgICB9IGVsc2Uge1xuICAgICAgICBkZWZpbml0aW9uKCk7XG4gICAgfVxufSkoZnVuY3Rpb24gKCkge1xuXG4vKipcbiAqIEJyaW5ncyBhbiBlbnZpcm9ubWVudCBhcyBjbG9zZSB0byBFQ01BU2NyaXB0IDUgY29tcGxpYW5jZVxuICogYXMgaXMgcG9zc2libGUgd2l0aCB0aGUgZmFjaWxpdGllcyBvZiBlcnN0d2hpbGUgZW5naW5lcy5cbiAqXG4gKiBBbm5vdGF0ZWQgRVM1OiBodHRwOi8vZXM1LmdpdGh1Yi5jb20vIChzcGVjaWZpYyBsaW5rcyBiZWxvdylcbiAqIEVTNSBTcGVjOiBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvcHVibGljYXRpb25zL2ZpbGVzL0VDTUEtU1QvRWNtYS0yNjIucGRmXG4gKiBSZXF1aXJlZCByZWFkaW5nOiBodHRwOi8vamF2YXNjcmlwdHdlYmxvZy53b3JkcHJlc3MuY29tLzIwMTEvMTIvMDUvZXh0ZW5kaW5nLWphdmFzY3JpcHQtbmF0aXZlcy9cbiAqL1xuXG4vLyBFUy01IDE1LjEuMi4yXG5pZiAocGFyc2VJbnQoJzA4JykgIT09IDgpIHtcbiAgICBwYXJzZUludCA9IChmdW5jdGlvbiAob3JpZ1BhcnNlSW50KSB7XG4gICAgICAgIHZhciBoZXhSZWdleCA9IC9eMFt4WF0vO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gcGFyc2VJbnRFUzUoc3RyLCByYWRpeCkge1xuICAgICAgICAgICAgc3RyID0gU3RyaW5nKHN0cikudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCErcmFkaXgpIHtcbiAgICAgICAgICAgICAgICByYWRpeCA9IGhleFJlZ2V4LnRlc3Qoc3RyKSA/IDE2IDogMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3JpZ1BhcnNlSW50KHN0ciwgcmFkaXgpO1xuICAgICAgICB9O1xuICAgIH0ocGFyc2VJbnQpKTtcbn1cblxuLy9cbi8vIEZ1bmN0aW9uXG4vLyA9PT09PT09PVxuLy9cblxuLy8gRVMtNSAxNS4zLjQuNVxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuMy40LjVcblxuZnVuY3Rpb24gRW1wdHkoKSB7fVxuXG5pZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKSB7XG4gICAgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKHRoYXQpIHsgLy8gLmxlbmd0aCBpcyAxXG4gICAgICAgIC8vIDEuIExldCBUYXJnZXQgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzO1xuICAgICAgICAvLyAyLiBJZiBJc0NhbGxhYmxlKFRhcmdldCkgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgY2FsbGVkIG9uIGluY29tcGF0aWJsZSBcIiArIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gTGV0IEEgYmUgYSBuZXcgKHBvc3NpYmx5IGVtcHR5KSBpbnRlcm5hbCBsaXN0IG9mIGFsbCBvZiB0aGVcbiAgICAgICAgLy8gICBhcmd1bWVudCB2YWx1ZXMgcHJvdmlkZWQgYWZ0ZXIgdGhpc0FyZyAoYXJnMSwgYXJnMiBldGMpLCBpbiBvcmRlci5cbiAgICAgICAgLy8gWFhYIHNsaWNlZEFyZ3Mgd2lsbCBzdGFuZCBpbiBmb3IgXCJBXCIgaWYgdXNlZFxuICAgICAgICB2YXIgYXJncyA9IF9BcnJheV9zbGljZV8uY2FsbChhcmd1bWVudHMsIDEpOyAvLyBmb3Igbm9ybWFsIGNhbGxcbiAgICAgICAgLy8gNC4gTGV0IEYgYmUgYSBuZXcgbmF0aXZlIEVDTUFTY3JpcHQgb2JqZWN0LlxuICAgICAgICAvLyAxMS4gU2V0IHRoZSBbW1Byb3RvdHlwZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgdG8gdGhlIHN0YW5kYXJkXG4gICAgICAgIC8vICAgYnVpbHQtaW4gRnVuY3Rpb24gcHJvdG90eXBlIG9iamVjdCBhcyBzcGVjaWZpZWQgaW4gMTUuMy4zLjEuXG4gICAgICAgIC8vIDEyLiBTZXQgdGhlIFtbQ2FsbF1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgIC8vICAgMTUuMy40LjUuMS5cbiAgICAgICAgLy8gMTMuIFNldCB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjIuXG4gICAgICAgIC8vIDE0LiBTZXQgdGhlIFtbSGFzSW5zdGFuY2VdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjMuXG4gICAgICAgIHZhciBiaW5kZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcbiAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4yIFtbQ29uc3RydWN0XV1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZCBvZiBhIGZ1bmN0aW9uIG9iamVjdCxcbiAgICAgICAgICAgICAgICAvLyBGIHRoYXQgd2FzIGNyZWF0ZWQgdXNpbmcgdGhlIGJpbmQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4gICAgICAgICAgICAgICAgLy8gMS4gTGV0IHRhcmdldCBiZSB0aGUgdmFsdWUgb2YgRidzIFtbVGFyZ2V0RnVuY3Rpb25dXVxuICAgICAgICAgICAgICAgIC8vICAgaW50ZXJuYWwgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMi4gSWYgdGFyZ2V0IGhhcyBubyBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZCwgYVxuICAgICAgICAgICAgICAgIC8vICAgVHlwZUVycm9yIGV4Y2VwdGlvbiBpcyB0aHJvd24uXG4gICAgICAgICAgICAgICAgLy8gMy4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDQuIExldCBhcmdzIGJlIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vICAgdmFsdWVzIGFzIHRoZSBsaXN0IEV4dHJhQXJncyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICAvLyA1LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBtZXRob2Qgb2YgdGFyZ2V0IHByb3ZpZGluZyBhcmdzIGFzIHRoZSBhcmd1bWVudHMuXG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0LmFwcGx5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzKSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIDE1LjMuNC41LjEgW1tDYWxsXV1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsIEYsXG4gICAgICAgICAgICAgICAgLy8gd2hpY2ggd2FzIGNyZWF0ZWQgdXNpbmcgdGhlIGJpbmQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgdmFsdWUgYW5kIGEgbGlzdCBvZiBhcmd1bWVudHMgRXh0cmFBcmdzLCB0aGUgZm9sbG93aW5nXG4gICAgICAgICAgICAgICAgLy8gc3RlcHMgYXJlIHRha2VuOlxuICAgICAgICAgICAgICAgIC8vIDEuIExldCBib3VuZEFyZ3MgYmUgdGhlIHZhbHVlIG9mIEYncyBbW0JvdW5kQXJnc11dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyAyLiBMZXQgYm91bmRUaGlzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZFRoaXNdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMy4gTGV0IHRhcmdldCBiZSB0aGUgdmFsdWUgb2YgRidzIFtbVGFyZ2V0RnVuY3Rpb25dXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gNC4gTGV0IGFyZ3MgYmUgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGVcbiAgICAgICAgICAgICAgICAvLyAgIGxpc3QgYm91bmRBcmdzIGluIHRoZSBzYW1lIG9yZGVyIGZvbGxvd2VkIGJ5IHRoZSBzYW1lXG4gICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuICAgICAgICAgICAgICAgIC8vIDUuIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZFxuICAgICAgICAgICAgICAgIC8vICAgb2YgdGFyZ2V0IHByb3ZpZGluZyBib3VuZFRoaXMgYXMgdGhlIHRoaXMgdmFsdWUgYW5kXG4gICAgICAgICAgICAgICAgLy8gICBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXG4gICAgICAgICAgICAgICAgLy8gZXF1aXY6IHRhcmdldC5jYWxsKHRoaXMsIC4uLmJvdW5kQXJncywgLi4uYXJncylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KFxuICAgICAgICAgICAgICAgICAgICB0aGF0LFxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzKSlcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAvLyAxNS4gSWYgdGhlIFtbQ2xhc3NdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBUYXJnZXQgaXMgXCJGdW5jdGlvblwiLCB0aGVuXG4gICAgICAgIC8vICAgICBhLiBMZXQgTCBiZSB0aGUgbGVuZ3RoIHByb3BlcnR5IG9mIFRhcmdldCBtaW51cyB0aGUgbGVuZ3RoIG9mIEEuXG4gICAgICAgIC8vICAgICBiLiBTZXQgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byBlaXRoZXIgMCBvciBMLCB3aGljaGV2ZXIgaXNcbiAgICAgICAgLy8gICAgICAgbGFyZ2VyLlxuICAgICAgICAvLyAxNi4gRWxzZSBzZXQgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byAwLlxuXG4gICAgICAgIHZhciBib3VuZExlbmd0aCA9IE1hdGgubWF4KDAsIHRhcmdldC5sZW5ndGggLSBhcmdzLmxlbmd0aCk7XG5cbiAgICAgICAgLy8gMTcuIFNldCB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbGVuZ3RoIG93biBwcm9wZXJ0eSBvZiBGIHRvIHRoZSB2YWx1ZXNcbiAgICAgICAgLy8gICBzcGVjaWZpZWQgaW4gMTUuMy41LjEuXG4gICAgICAgIHZhciBib3VuZEFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3VuZExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBib3VuZEFyZ3MucHVzaChcIiRcIiArIGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gWFhYIEJ1aWxkIGEgZHluYW1pYyBmdW5jdGlvbiB3aXRoIGRlc2lyZWQgYW1vdW50IG9mIGFyZ3VtZW50cyBpcyB0aGUgb25seSBcbiAgICAgICAgLy8gd2F5IHRvIHNldCB0aGUgbGVuZ3RoIHByb3BlcnR5IG9mIGEgZnVuY3Rpb24uIFxuICAgICAgICAvLyBJbiBlbnZpcm9ubWVudHMgd2hlcmUgQ29udGVudCBTZWN1cml0eSBQb2xpY2llcyBlbmFibGVkIChDaHJvbWUgZXh0ZW5zaW9ucywgXG4gICAgICAgIC8vIGZvciBleC4pIGFsbCB1c2Ugb2YgZXZhbCBvciBGdW5jdGlvbiBjb3N0cnVjdG9yIHRocm93cyBhbiBleGNlcHRpb24uIFxuICAgICAgICAvLyBIb3dldmVyIGluIGFsbCBvZiB0aGVzZSBlbnZpcm9ubWVudHMgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgZXhpc3RzIFxuICAgICAgICAvLyBhbmQgc28gdGhpcyBjb2RlIHdpbGwgbmV2ZXIgYmUgZXhlY3V0ZWQuXG4gICAgICAgIHZhciBib3VuZCA9IEZ1bmN0aW9uKFwiYmluZGVyXCIsIFwicmV0dXJuIGZ1bmN0aW9uKFwiICsgYm91bmRBcmdzLmpvaW4oXCIsXCIpICsgXCIpe3JldHVybiBiaW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfVwiKShiaW5kZXIpO1xuXG4gICAgICAgIGlmICh0YXJnZXQucHJvdG90eXBlKSB7XG4gICAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSB0YXJnZXQucHJvdG90eXBlO1xuICAgICAgICAgICAgYm91bmQucHJvdG90eXBlID0gbmV3IEVtcHR5KCk7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBkYW5nbGluZyByZWZlcmVuY2VzLlxuICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gMTguIFNldCB0aGUgW1tFeHRlbnNpYmxlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiB0byB0cnVlLlxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gMTkuIExldCB0aHJvd2VyIGJlIHRoZSBbW1Rocm93VHlwZUVycm9yXV0gZnVuY3Rpb24gT2JqZWN0ICgxMy4yLjMpLlxuICAgICAgICAvLyAyMC4gQ2FsbCB0aGUgW1tEZWZpbmVPd25Qcm9wZXJ0eV1dIGludGVybmFsIG1ldGhvZCBvZiBGIHdpdGhcbiAgICAgICAgLy8gICBhcmd1bWVudHMgXCJjYWxsZXJcIiwgUHJvcGVydHlEZXNjcmlwdG9yIHtbW0dldF1dOiB0aHJvd2VyLCBbW1NldF1dOlxuICAgICAgICAvLyAgIHRocm93ZXIsIFtbRW51bWVyYWJsZV1dOiBmYWxzZSwgW1tDb25maWd1cmFibGVdXTogZmFsc2V9LCBhbmRcbiAgICAgICAgLy8gICBmYWxzZS5cbiAgICAgICAgLy8gMjEuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG4gICAgICAgIC8vICAgYXJndW1lbnRzIFwiYXJndW1lbnRzXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlcixcbiAgICAgICAgLy8gICBbW1NldF1dOiB0aHJvd2VyLCBbW0VudW1lcmFibGVdXTogZmFsc2UsIFtbQ29uZmlndXJhYmxlXV06IGZhbHNlfSxcbiAgICAgICAgLy8gICBhbmQgZmFsc2UuXG5cbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyBOT1RFIEZ1bmN0aW9uIG9iamVjdHMgY3JlYXRlZCB1c2luZyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBkbyBub3RcbiAgICAgICAgLy8gaGF2ZSBhIHByb3RvdHlwZSBwcm9wZXJ0eSBvciB0aGUgW1tDb2RlXV0sIFtbRm9ybWFsUGFyYW1ldGVyc11dLCBhbmRcbiAgICAgICAgLy8gW1tTY29wZV1dIGludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICAgIC8vIFhYWCBjYW4ndCBkZWxldGUgcHJvdG90eXBlIGluIHB1cmUtanMuXG5cbiAgICAgICAgLy8gMjIuIFJldHVybiBGLlxuICAgICAgICByZXR1cm4gYm91bmQ7XG4gICAgfTtcbn1cblxuLy8gU2hvcnRjdXQgdG8gYW4gb2Z0ZW4gYWNjZXNzZWQgcHJvcGVydGllcywgaW4gb3JkZXIgdG8gYXZvaWQgbXVsdGlwbGVcbi8vIGRlcmVmZXJlbmNlIHRoYXQgY29zdHMgdW5pdmVyc2FsbHkuXG4vLyBfUGxlYXNlIG5vdGU6IFNob3J0Y3V0cyBhcmUgZGVmaW5lZCBhZnRlciBgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRgIGFzIHdlXG4vLyB1cyBpdCBpbiBkZWZpbmluZyBzaG9ydGN1dHMuXG52YXIgY2FsbCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO1xudmFyIHByb3RvdHlwZU9mQXJyYXkgPSBBcnJheS5wcm90b3R5cGU7XG52YXIgcHJvdG90eXBlT2ZPYmplY3QgPSBPYmplY3QucHJvdG90eXBlO1xudmFyIF9BcnJheV9zbGljZV8gPSBwcm90b3R5cGVPZkFycmF5LnNsaWNlO1xuLy8gSGF2aW5nIGEgdG9TdHJpbmcgbG9jYWwgdmFyaWFibGUgbmFtZSBicmVha3MgaW4gT3BlcmEgc28gdXNlIF90b1N0cmluZy5cbnZhciBfdG9TdHJpbmcgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QudG9TdHJpbmcpO1xudmFyIG93bnMgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuaGFzT3duUHJvcGVydHkpO1xuXG4vLyBJZiBKUyBlbmdpbmUgc3VwcG9ydHMgYWNjZXNzb3JzIGNyZWF0aW5nIHNob3J0Y3V0cy5cbnZhciBkZWZpbmVHZXR0ZXI7XG52YXIgZGVmaW5lU2V0dGVyO1xudmFyIGxvb2t1cEdldHRlcjtcbnZhciBsb29rdXBTZXR0ZXI7XG52YXIgc3VwcG9ydHNBY2Nlc3NvcnM7XG5pZiAoKHN1cHBvcnRzQWNjZXNzb3JzID0gb3ducyhwcm90b3R5cGVPZk9iamVjdCwgXCJfX2RlZmluZUdldHRlcl9fXCIpKSkge1xuICAgIGRlZmluZUdldHRlciA9IGNhbGwuYmluZChwcm90b3R5cGVPZk9iamVjdC5fX2RlZmluZUdldHRlcl9fKTtcbiAgICBkZWZpbmVTZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19kZWZpbmVTZXR0ZXJfXyk7XG4gICAgbG9va3VwR2V0dGVyID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0Ll9fbG9va3VwR2V0dGVyX18pO1xuICAgIGxvb2t1cFNldHRlciA9IGNhbGwuYmluZChwcm90b3R5cGVPZk9iamVjdC5fX2xvb2t1cFNldHRlcl9fKTtcbn1cblxuLy9cbi8vIEFycmF5XG4vLyA9PT09PVxuLy9cblxuLy8gRVM1IDE1LjQuNC4xMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjEyXG4vLyBEZWZhdWx0IHZhbHVlIGZvciBzZWNvbmQgcGFyYW1cbi8vIFtidWdmaXgsIGllbHQ5LCBvbGQgYnJvd3NlcnNdXG4vLyBJRSA8IDkgYnVnOiBbMSwyXS5zcGxpY2UoMCkuam9pbihcIlwiKSA9PSBcIlwiIGJ1dCBzaG91bGQgYmUgXCIxMlwiXG5pZiAoWzEsMl0uc3BsaWNlKDApLmxlbmd0aCAhPSAyKSB7XG4gICAgdmFyIGFycmF5X3NwbGljZSA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2U7XG4gICAgdmFyIGFycmF5X3B1c2ggPSBBcnJheS5wcm90b3R5cGUucHVzaDtcbiAgICB2YXIgYXJyYXlfdW5zaGlmdCA9IEFycmF5LnByb3RvdHlwZS51bnNoaWZ0O1xuXG4gICAgaWYgKGZ1bmN0aW9uKCkgeyAvLyB0ZXN0IElFIDwgOSB0byBzcGxpY2UgYnVnIC0gc2VlIGlzc3VlICMxMzhcbiAgICAgICAgZnVuY3Rpb24gbWFrZUFycmF5KGwpIHtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICB3aGlsZSAobC0tKSB7XG4gICAgICAgICAgICAgICAgYS51bnNoaWZ0KGwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFycmF5ID0gW11cbiAgICAgICAgICAgICwgbGVuZ3RoQmVmb3JlXG4gICAgICAgIDtcblxuICAgICAgICBhcnJheS5zcGxpY2UuYmluZChhcnJheSwgMCwgMCkuYXBwbHkobnVsbCwgbWFrZUFycmF5KDIwKSk7XG4gICAgICAgIGFycmF5LnNwbGljZS5iaW5kKGFycmF5LCAwLCAwKS5hcHBseShudWxsLCBtYWtlQXJyYXkoMjYpKTtcblxuICAgICAgICBsZW5ndGhCZWZvcmUgPSBhcnJheS5sZW5ndGg7IC8vMjBcbiAgICAgICAgYXJyYXkuc3BsaWNlKDUsIDAsIFwiWFhYXCIpOyAvLyBhZGQgb25lIGVsZW1lbnRcblxuICAgICAgICBpZiAobGVuZ3RoQmVmb3JlICsgMSA9PSBhcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlOy8vIGhhcyByaWdodCBzcGxpY2UgaW1wbGVtZW50YXRpb24gd2l0aG91dCBidWdzXG4gICAgICAgIH1cbiAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgIC8vICAgIElFOCBidWdcbiAgICAgICAgLy8gfVxuICAgIH0oKSkgey8vSUUgNi83XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UgPSBmdW5jdGlvbihzdGFydCwgZGVsZXRlQ291bnQpIHtcbiAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5X3NwbGljZS5hcHBseSh0aGlzLCBbXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID09PSB2b2lkIDAgPyAwIDogc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNvdW50ID09PSB2b2lkIDAgPyAodGhpcy5sZW5ndGggLSBzdGFydCkgOiBkZWxldGVDb3VudFxuICAgICAgICAgICAgICAgIF0uY29uY2F0KF9BcnJheV9zbGljZV8uY2FsbChhcmd1bWVudHMsIDIpKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7Ly9JRThcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZSA9IGZ1bmN0aW9uKHN0YXJ0LCBkZWxldGVDb3VudCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdFxuICAgICAgICAgICAgICAgICwgYXJncyA9IF9BcnJheV9zbGljZV8uY2FsbChhcmd1bWVudHMsIDIpXG4gICAgICAgICAgICAgICAgLCBhZGRFbGVtZW50c0NvdW50ID0gYXJncy5sZW5ndGhcbiAgICAgICAgICAgIDtcblxuICAgICAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IHZvaWQgMCkgeyAvLyBkZWZhdWx0XG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbGV0ZUNvdW50ID09PSB2b2lkIDApIHsgLy8gZGVmYXVsdFxuICAgICAgICAgICAgICAgIGRlbGV0ZUNvdW50ID0gdGhpcy5sZW5ndGggLSBzdGFydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFkZEVsZW1lbnRzQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbGV0ZUNvdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IHRoaXMubGVuZ3RoKSB7IC8vIHRpbnkgb3B0aW1pc2F0aW9uICMxXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheV9wdXNoLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IDApIHsgLy8gdGlueSBvcHRpbWlzYXRpb24gIzJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5X3Vuc2hpZnQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBcnJheS5wcm90b3R5cGUuc3BsaWNlIGltcGxlbWVudGF0aW9uXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX0FycmF5X3NsaWNlXy5jYWxsKHRoaXMsIHN0YXJ0LCBzdGFydCArIGRlbGV0ZUNvdW50KTsvLyBkZWxldGUgcGFydFxuICAgICAgICAgICAgICAgIGFyZ3MucHVzaC5hcHBseShhcmdzLCBfQXJyYXlfc2xpY2VfLmNhbGwodGhpcywgc3RhcnQgKyBkZWxldGVDb3VudCwgdGhpcy5sZW5ndGgpKTsvLyByaWdodCBwYXJ0XG4gICAgICAgICAgICAgICAgYXJncy51bnNoaWZ0LmFwcGx5KGFyZ3MsIF9BcnJheV9zbGljZV8uY2FsbCh0aGlzLCAwLCBzdGFydCkpOy8vIGxlZnQgcGFydFxuXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGFsbCBpdGVtcyBmcm9tIHRoaXMgYXJyYXkgYW5kIHJlcGxhY2UgaXQgdG8gJ2xlZnQgcGFydCcgKyBfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAyKSArICdyaWdodCBwYXJ0J1xuICAgICAgICAgICAgICAgIGFyZ3MudW5zaGlmdCgwLCB0aGlzLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBhcnJheV9zcGxpY2UuYXBwbHkodGhpcywgYXJncyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJyYXlfc3BsaWNlLmNhbGwodGhpcywgc3RhcnQsIGRlbGV0ZUNvdW50KTtcbiAgICAgICAgfVxuXG4gICAgfVxufVxuXG4vLyBFUzUgMTUuNC40LjEyXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMTNcbi8vIFJldHVybiBsZW4rYXJnQ291bnQuXG4vLyBbYnVnZml4LCBpZWx0OF1cbi8vIElFIDwgOCBidWc6IFtdLnVuc2hpZnQoMCkgPT0gdW5kZWZpbmVkIGJ1dCBzaG91bGQgYmUgXCIxXCJcbmlmIChbXS51bnNoaWZ0KDApICE9IDEpIHtcbiAgICB2YXIgYXJyYXlfdW5zaGlmdCA9IEFycmF5LnByb3RvdHlwZS51bnNoaWZ0O1xuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGFycmF5X3Vuc2hpZnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjMuMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC4zLjJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2lzQXJyYXlcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICAgICAgICByZXR1cm4gX3RvU3RyaW5nKG9iaikgPT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgIH07XG59XG5cbi8vIFRoZSBJc0NhbGxhYmxlKCkgY2hlY2sgaW4gdGhlIEFycmF5IGZ1bmN0aW9uc1xuLy8gaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCBhIHN0cmljdCBjaGVjayBvbiB0aGVcbi8vIGludGVybmFsIGNsYXNzIG9mIHRoZSBvYmplY3QgdG8gdHJhcCBjYXNlcyB3aGVyZVxuLy8gdGhlIHByb3ZpZGVkIGZ1bmN0aW9uIHdhcyBhY3R1YWxseSBhIHJlZ3VsYXJcbi8vIGV4cHJlc3Npb24gbGl0ZXJhbCwgd2hpY2ggaW4gVjggYW5kXG4vLyBKYXZhU2NyaXB0Q29yZSBpcyBhIHR5cGVvZiBcImZ1bmN0aW9uXCIuICBPbmx5IGluXG4vLyBWOCBhcmUgcmVndWxhciBleHByZXNzaW9uIGxpdGVyYWxzIHBlcm1pdHRlZCBhc1xuLy8gcmVkdWNlIHBhcmFtZXRlcnMsIHNvIGl0IGlzIGRlc2lyYWJsZSBpbiB0aGVcbi8vIGdlbmVyYWwgY2FzZSBmb3IgdGhlIHNoaW0gdG8gbWF0Y2ggdGhlIG1vcmVcbi8vIHN0cmljdCBhbmQgY29tbW9uIGJlaGF2aW9yIG9mIHJlamVjdGluZyByZWd1bGFyXG4vLyBleHByZXNzaW9ucy5cblxuLy8gRVM1IDE1LjQuNC4xOFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE4XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9hcnJheS9mb3JFYWNoXG5cbi8vIENoZWNrIGZhaWx1cmUgb2YgYnktaW5kZXggYWNjZXNzIG9mIHN0cmluZyBjaGFyYWN0ZXJzIChJRSA8IDkpXG4vLyBhbmQgZmFpbHVyZSBvZiBgMCBpbiBib3hlZFN0cmluZ2AgKFJoaW5vKVxudmFyIGJveGVkU3RyaW5nID0gT2JqZWN0KFwiYVwiKSxcbiAgICBzcGxpdFN0cmluZyA9IGJveGVkU3RyaW5nWzBdICE9IFwiYVwiIHx8ICEoMCBpbiBib3hlZFN0cmluZyk7XG4vLyBDaGVjayBub2RlIDAuNi4yMSBidWcgd2hlcmUgdGhpcmQgcGFyYW1ldGVyIGlzIG5vdCBib3hlZFxudmFyIGJveGVkRm9yRWFjaCA9IHRydWU7XG5pZiAoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFwiZm9vXCIsIGZ1bmN0aW9uKGl0ZW0sIGksIG9iaikge1xuICAgICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIGJveGVkRm9yRWFjaCA9IGZhbHNlO1xuICAgIH0pO1xufVxuXG5pZiAoIUFycmF5LnByb3RvdHlwZS5mb3JFYWNoIHx8ICFib3hlZEZvckVhY2gpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZnVuIC8qLCB0aGlzcCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV0sXG4gICAgICAgICAgICBpID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoX3RvU3RyaW5nKGZ1bikgIT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IC8vIFRPRE8gbWVzc2FnZVxuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKCsraSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikge1xuICAgICAgICAgICAgICAgIC8vIEludm9rZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBjYWxsLCBwYXNzaW5nIGFyZ3VtZW50czpcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0LCBwcm9wZXJ0eSB2YWx1ZSwgcHJvcGVydHkga2V5LCB0aGlzQXJnIG9iamVjdFxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHRcbiAgICAgICAgICAgICAgICBmdW4uY2FsbCh0aGlzcCwgc2VsZltpXSwgaSwgb2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTlcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xOVxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vQ29yZV9KYXZhU2NyaXB0XzEuNV9SZWZlcmVuY2UvT2JqZWN0cy9BcnJheS9tYXBcbmlmICghQXJyYXkucHJvdG90eXBlLm1hcCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiBtYXAoZnVuIC8qLCB0aGlzcCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsXG4gICAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpLFxuICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpXG4gICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjIwXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMjBcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0NvcmVfSmF2YVNjcmlwdF8xLjVfUmVmZXJlbmNlL09iamVjdHMvQXJyYXkvZmlsdGVyXG5pZiAoIUFycmF5LnByb3RvdHlwZS5maWx0ZXIpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKGZ1biAvKiwgdGhpc3AgKi8pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsXG4gICAgICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHNlbGZbaV07XG4gICAgICAgICAgICAgICAgaWYgKGZ1bi5jYWxsKHRoaXNwLCB2YWx1ZSwgaSwgb2JqZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4xNlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE2XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9ldmVyeVxuaWYgKCFBcnJheS5wcm90b3R5cGUuZXZlcnkpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZXZlcnkgPSBmdW5jdGlvbiBldmVyeShmdW4gLyosIHRoaXNwICovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsXG4gICAgICAgICAgICB0aGlzcCA9IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoX3RvU3RyaW5nKGZ1bikgIT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGZ1biArIFwiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiAhZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4xN1xuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE3XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9zb21lXG5pZiAoIUFycmF5LnByb3RvdHlwZS5zb21lKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLnNvbWUgPSBmdW5jdGlvbiBzb21lKGZ1biAvKiwgdGhpc3AgKi8pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICBvYmplY3QsXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMCxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIGZ1bmN0aW9uIG9yIGlmIGNhbGxiYWNrIGlzIG5vdCBhIGNhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSBcIltvYmplY3QgRnVuY3Rpb25dXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmICYmIGZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMjFcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4yMVxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vQ29yZV9KYXZhU2NyaXB0XzEuNV9SZWZlcmVuY2UvT2JqZWN0cy9BcnJheS9yZWR1Y2VcbmlmICghQXJyYXkucHJvdG90eXBlLnJlZHVjZSkge1xuICAgIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiByZWR1Y2UoZnVuIC8qLCBpbml0aWFsKi8pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICBvYmplY3QsXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoX3RvU3RyaW5nKGZ1bikgIT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGZ1biArIFwiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gdmFsdWUgdG8gcmV0dXJuIGlmIG5vIGluaXRpYWwgdmFsdWUgYW5kIGFuIGVtcHR5IGFycmF5XG4gICAgICAgIGlmICghbGVuZ3RoICYmIGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAoaSBpbiBzZWxmKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGZbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgYXJyYXkgY29udGFpbnMgbm8gdmFsdWVzLCBubyBpbml0aWFsIHZhbHVlIHRvIHJldHVyblxuICAgICAgICAgICAgICAgIGlmICgrK2kgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bi5jYWxsKHZvaWQgMCwgcmVzdWx0LCBzZWxmW2ldLCBpLCBvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjIyXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMjJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0NvcmVfSmF2YVNjcmlwdF8xLjVfUmVmZXJlbmNlL09iamVjdHMvQXJyYXkvcmVkdWNlUmlnaHRcbmlmICghQXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0KSB7XG4gICAgQXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gcmVkdWNlUmlnaHQoZnVuIC8qLCBpbml0aWFsKi8pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICBvYmplY3QsXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoX3RvU3RyaW5nKGZ1bikgIT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGZ1biArIFwiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gdmFsdWUgdG8gcmV0dXJuIGlmIG5vIGluaXRpYWwgdmFsdWUsIGVtcHR5IGFycmF5XG4gICAgICAgIGlmICghbGVuZ3RoICYmIGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlZHVjZVJpZ2h0IG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHQsIGkgPSBsZW5ndGggLSAxO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZWxmW2ktLV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGFycmF5IGNvbnRhaW5zIG5vIHZhbHVlcywgbm8gaW5pdGlhbCB2YWx1ZSB0byByZXR1cm5cbiAgICAgICAgICAgICAgICBpZiAoLS1pIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlUmlnaHQgb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGkgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKGkgaW4gdGhpcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bi5jYWxsKHZvaWQgMCwgcmVzdWx0LCBzZWxmW2ldLCBpLCBvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChpLS0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4xNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE0XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pbmRleE9mXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mIHx8IChbMCwgMV0uaW5kZXhPZigxLCAyKSAhPSAtMSkpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8gKSB7XG4gICAgICAgIHZhciBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpID0gdG9JbnRlZ2VyKGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGUgbmVnYXRpdmUgaW5kaWNlc1xuICAgICAgICBpID0gaSA+PSAwID8gaSA6IE1hdGgubWF4KDAsIGxlbmd0aCArIGkpO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmICYmIHNlbGZbaV0gPT09IHNvdWdodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjE1XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMTVcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2xhc3RJbmRleE9mXG5pZiAoIUFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZiB8fCAoWzAsIDFdLmxhc3RJbmRleE9mKDAsIC0zKSAhPSAtMSkpIHtcbiAgICBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZihzb3VnaHQgLyosIGZyb21JbmRleCAqLykge1xuICAgICAgICB2YXIgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGkgPSBsZW5ndGggLSAxO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGkgPSBNYXRoLm1pbihpLCB0b0ludGVnZXIoYXJndW1lbnRzWzFdKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIG5lZ2F0aXZlIGluZGljZXNcbiAgICAgICAgaSA9IGkgPj0gMCA/IGkgOiBsZW5ndGggLSBNYXRoLmFicyhpKTtcbiAgICAgICAgZm9yICg7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmICYmIHNvdWdodCA9PT0gc2VsZltpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xufVxuXG4vL1xuLy8gT2JqZWN0XG4vLyA9PT09PT1cbi8vXG5cbi8vIEVTNSAxNS4yLjMuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjIuMy4xNFxuaWYgKCFPYmplY3Qua2V5cykge1xuICAgIC8vIGh0dHA6Ly93aGF0dGhlaGVhZHNhaWQuY29tLzIwMTAvMTAvYS1zYWZlci1vYmplY3Qta2V5cy1jb21wYXRpYmlsaXR5LWltcGxlbWVudGF0aW9uXG4gICAgdmFyIGhhc0RvbnRFbnVtQnVnID0gdHJ1ZSxcbiAgICAgICAgZG9udEVudW1zID0gW1xuICAgICAgICAgICAgXCJ0b1N0cmluZ1wiLFxuICAgICAgICAgICAgXCJ0b0xvY2FsZVN0cmluZ1wiLFxuICAgICAgICAgICAgXCJ2YWx1ZU9mXCIsXG4gICAgICAgICAgICBcImhhc093blByb3BlcnR5XCIsXG4gICAgICAgICAgICBcImlzUHJvdG90eXBlT2ZcIixcbiAgICAgICAgICAgIFwicHJvcGVydHlJc0VudW1lcmFibGVcIixcbiAgICAgICAgICAgIFwiY29uc3RydWN0b3JcIlxuICAgICAgICBdLFxuICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHtcInRvU3RyaW5nXCI6IG51bGx9KSB7XG4gICAgICAgIGhhc0RvbnRFbnVtQnVnID0gZmFsc2U7XG4gICAgfVxuXG4gICAgT2JqZWN0LmtleXMgPSBmdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICh0eXBlb2Ygb2JqZWN0ICE9IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iamVjdCAhPSBcImZ1bmN0aW9uXCIpIHx8XG4gICAgICAgICAgICBvYmplY3QgPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0LmtleXMgY2FsbGVkIG9uIGEgbm9uLW9iamVjdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob3ducyhvYmplY3QsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc0RvbnRFbnVtQnVnKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkb250RW51bXNMZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbnRFbnVtID0gZG9udEVudW1zW2ldO1xuICAgICAgICAgICAgICAgIGlmIChvd25zKG9iamVjdCwgZG9udEVudW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChkb250RW51bSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG5cbn1cblxuLy9cbi8vIERhdGVcbi8vID09PT1cbi8vXG5cbi8vIEVTNSAxNS45LjUuNDNcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjkuNS40M1xuLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgU3RyaW5nIHZhbHVlIHJlcHJlc2VudCB0aGUgaW5zdGFuY2UgaW4gdGltZVxuLy8gcmVwcmVzZW50ZWQgYnkgdGhpcyBEYXRlIG9iamVjdC4gVGhlIGZvcm1hdCBvZiB0aGUgU3RyaW5nIGlzIHRoZSBEYXRlIFRpbWVcbi8vIHN0cmluZyBmb3JtYXQgZGVmaW5lZCBpbiAxNS45LjEuMTUuIEFsbCBmaWVsZHMgYXJlIHByZXNlbnQgaW4gdGhlIFN0cmluZy5cbi8vIFRoZSB0aW1lIHpvbmUgaXMgYWx3YXlzIFVUQywgZGVub3RlZCBieSB0aGUgc3VmZml4IFouIElmIHRoZSB0aW1lIHZhbHVlIG9mXG4vLyB0aGlzIG9iamVjdCBpcyBub3QgYSBmaW5pdGUgTnVtYmVyIGEgUmFuZ2VFcnJvciBleGNlcHRpb24gaXMgdGhyb3duLlxudmFyIG5lZ2F0aXZlRGF0ZSA9IC02MjE5ODc1NTIwMDAwMCxcbiAgICBuZWdhdGl2ZVllYXJTdHJpbmcgPSBcIi0wMDAwMDFcIjtcbmlmIChcbiAgICAhRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgfHxcbiAgICAobmV3IERhdGUobmVnYXRpdmVEYXRlKS50b0lTT1N0cmluZygpLmluZGV4T2YobmVnYXRpdmVZZWFyU3RyaW5nKSA9PT0gLTEpXG4pIHtcbiAgICBEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyA9IGZ1bmN0aW9uIHRvSVNPU3RyaW5nKCkge1xuICAgICAgICB2YXIgcmVzdWx0LCBsZW5ndGgsIHZhbHVlLCB5ZWFyLCBtb250aDtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0aGlzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyBjYWxsZWQgb24gbm9uLWZpbml0ZSB2YWx1ZS5cIik7XG4gICAgICAgIH1cblxuICAgICAgICB5ZWFyID0gdGhpcy5nZXRVVENGdWxsWWVhcigpO1xuXG4gICAgICAgIG1vbnRoID0gdGhpcy5nZXRVVENNb250aCgpO1xuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltL2lzc3Vlcy8xMTFcbiAgICAgICAgeWVhciArPSBNYXRoLmZsb29yKG1vbnRoIC8gMTIpO1xuICAgICAgICBtb250aCA9IChtb250aCAlIDEyICsgMTIpICUgMTI7XG5cbiAgICAgICAgLy8gdGhlIGRhdGUgdGltZSBzdHJpbmcgZm9ybWF0IGlzIHNwZWNpZmllZCBpbiAxNS45LjEuMTUuXG4gICAgICAgIHJlc3VsdCA9IFttb250aCArIDEsIHRoaXMuZ2V0VVRDRGF0ZSgpLFxuICAgICAgICAgICAgdGhpcy5nZXRVVENIb3VycygpLCB0aGlzLmdldFVUQ01pbnV0ZXMoKSwgdGhpcy5nZXRVVENTZWNvbmRzKCldO1xuICAgICAgICB5ZWFyID0gKFxuICAgICAgICAgICAgKHllYXIgPCAwID8gXCItXCIgOiAoeWVhciA+IDk5OTkgPyBcIitcIiA6IFwiXCIpKSArXG4gICAgICAgICAgICAoXCIwMDAwMFwiICsgTWF0aC5hYnMoeWVhcikpXG4gICAgICAgICAgICAuc2xpY2UoMCA8PSB5ZWFyICYmIHllYXIgPD0gOTk5OSA/IC00IDogLTYpXG4gICAgICAgICk7XG5cbiAgICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdFtsZW5ndGhdO1xuICAgICAgICAgICAgLy8gcGFkIG1vbnRocywgZGF5cywgaG91cnMsIG1pbnV0ZXMsIGFuZCBzZWNvbmRzIHRvIGhhdmUgdHdvXG4gICAgICAgICAgICAvLyBkaWdpdHMuXG4gICAgICAgICAgICBpZiAodmFsdWUgPCAxMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtsZW5ndGhdID0gXCIwXCIgKyB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwYWQgbWlsbGlzZWNvbmRzIHRvIGhhdmUgdGhyZWUgZGlnaXRzLlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgeWVhciArIFwiLVwiICsgcmVzdWx0LnNsaWNlKDAsIDIpLmpvaW4oXCItXCIpICtcbiAgICAgICAgICAgIFwiVFwiICsgcmVzdWx0LnNsaWNlKDIpLmpvaW4oXCI6XCIpICsgXCIuXCIgK1xuICAgICAgICAgICAgKFwiMDAwXCIgKyB0aGlzLmdldFVUQ01pbGxpc2Vjb25kcygpKS5zbGljZSgtMykgKyBcIlpcIlxuICAgICAgICApO1xuICAgIH07XG59XG5cblxuLy8gRVM1IDE1LjkuNS40NFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuOS41LjQ0XG4vLyBUaGlzIGZ1bmN0aW9uIHByb3ZpZGVzIGEgU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgRGF0ZSBvYmplY3QgZm9yIHVzZSBieVxuLy8gSlNPTi5zdHJpbmdpZnkgKDE1LjEyLjMpLlxudmFyIGRhdGVUb0pTT05Jc1N1cHBvcnRlZCA9IGZhbHNlO1xudHJ5IHtcbiAgICBkYXRlVG9KU09OSXNTdXBwb3J0ZWQgPSAoXG4gICAgICAgIERhdGUucHJvdG90eXBlLnRvSlNPTiAmJlxuICAgICAgICBuZXcgRGF0ZShOYU4pLnRvSlNPTigpID09PSBudWxsICYmXG4gICAgICAgIG5ldyBEYXRlKG5lZ2F0aXZlRGF0ZSkudG9KU09OKCkuaW5kZXhPZihuZWdhdGl2ZVllYXJTdHJpbmcpICE9PSAtMSAmJlxuICAgICAgICBEYXRlLnByb3RvdHlwZS50b0pTT04uY2FsbCh7IC8vIGdlbmVyaWNcbiAgICAgICAgICAgIHRvSVNPU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcbn0gY2F0Y2ggKGUpIHtcbn1cbmlmICghZGF0ZVRvSlNPTklzU3VwcG9ydGVkKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKGtleSkge1xuICAgICAgICAvLyBXaGVuIHRoZSB0b0pTT04gbWV0aG9kIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50IGtleSwgdGhlIGZvbGxvd2luZ1xuICAgICAgICAvLyBzdGVwcyBhcmUgdGFrZW46XG5cbiAgICAgICAgLy8gMS4gIExldCBPIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyBUb09iamVjdCwgZ2l2aW5nIGl0IHRoZSB0aGlzXG4gICAgICAgIC8vIHZhbHVlIGFzIGl0cyBhcmd1bWVudC5cbiAgICAgICAgLy8gMi4gTGV0IHR2IGJlIHRvUHJpbWl0aXZlKE8sIGhpbnQgTnVtYmVyKS5cbiAgICAgICAgdmFyIG8gPSBPYmplY3QodGhpcyksXG4gICAgICAgICAgICB0diA9IHRvUHJpbWl0aXZlKG8pLFxuICAgICAgICAgICAgdG9JU087XG4gICAgICAgIC8vIDMuIElmIHR2IGlzIGEgTnVtYmVyIGFuZCBpcyBub3QgZmluaXRlLCByZXR1cm4gbnVsbC5cbiAgICAgICAgaWYgKHR5cGVvZiB0diA9PT0gXCJudW1iZXJcIiAmJiAhaXNGaW5pdGUodHYpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyA0LiBMZXQgdG9JU08gYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0dldF1dIGludGVybmFsIG1ldGhvZCBvZlxuICAgICAgICAvLyBPIHdpdGggYXJndW1lbnQgXCJ0b0lTT1N0cmluZ1wiLlxuICAgICAgICB0b0lTTyA9IG8udG9JU09TdHJpbmc7XG4gICAgICAgIC8vIDUuIElmIElzQ2FsbGFibGUodG9JU08pIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIGlmICh0eXBlb2YgdG9JU08gIT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidG9JU09TdHJpbmcgcHJvcGVydHkgaXMgbm90IGNhbGxhYmxlXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDYuIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZlxuICAgICAgICAvLyAgdG9JU08gd2l0aCBPIGFzIHRoZSB0aGlzIHZhbHVlIGFuZCBhbiBlbXB0eSBhcmd1bWVudCBsaXN0LlxuICAgICAgICByZXR1cm4gdG9JU08uY2FsbChvKTtcblxuICAgICAgICAvLyBOT1RFIDEgVGhlIGFyZ3VtZW50IGlzIGlnbm9yZWQuXG5cbiAgICAgICAgLy8gTk9URSAyIFRoZSB0b0pTT04gZnVuY3Rpb24gaXMgaW50ZW50aW9uYWxseSBnZW5lcmljOyBpdCBkb2VzIG5vdFxuICAgICAgICAvLyByZXF1aXJlIHRoYXQgaXRzIHRoaXMgdmFsdWUgYmUgYSBEYXRlIG9iamVjdC4gVGhlcmVmb3JlLCBpdCBjYW4gYmVcbiAgICAgICAgLy8gdHJhbnNmZXJyZWQgdG8gb3RoZXIga2luZHMgb2Ygb2JqZWN0cyBmb3IgdXNlIGFzIGEgbWV0aG9kLiBIb3dldmVyLFxuICAgICAgICAvLyBpdCBkb2VzIHJlcXVpcmUgdGhhdCBhbnkgc3VjaCBvYmplY3QgaGF2ZSBhIHRvSVNPU3RyaW5nIG1ldGhvZC4gQW5cbiAgICAgICAgLy8gb2JqZWN0IGlzIGZyZWUgdG8gdXNlIHRoZSBhcmd1bWVudCBrZXkgdG8gZmlsdGVyIGl0c1xuICAgICAgICAvLyBzdHJpbmdpZmljYXRpb24uXG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjkuNC4yXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS45LjQuMlxuLy8gYmFzZWQgb24gd29yayBzaGFyZWQgYnkgRGFuaWVsIEZyaWVzZW4gKGRhbnRtYW4pXG4vLyBodHRwOi8vZ2lzdC5naXRodWIuY29tLzMwMzI0OVxuaWYgKCFEYXRlLnBhcnNlIHx8IFwiRGF0ZS5wYXJzZSBpcyBidWdneVwiKSB7XG4gICAgLy8gWFhYIGdsb2JhbCBhc3NpZ25tZW50IHdvbid0IHdvcmsgaW4gZW1iZWRkaW5ncyB0aGF0IHVzZVxuICAgIC8vIGFuIGFsdGVybmF0ZSBvYmplY3QgZm9yIHRoZSBjb250ZXh0LlxuICAgIERhdGUgPSAoZnVuY3Rpb24oTmF0aXZlRGF0ZSkge1xuXG4gICAgICAgIC8vIERhdGUubGVuZ3RoID09PSA3XG4gICAgICAgIGZ1bmN0aW9uIERhdGUoWSwgTSwgRCwgaCwgbSwgcywgbXMpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBOYXRpdmVEYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBsZW5ndGggPT0gMSAmJiBTdHJpbmcoWSkgPT09IFkgPyAvLyBpc1N0cmluZyhZKVxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBleHBsaWNpdGx5IHBhc3MgaXQgdGhyb3VnaCBwYXJzZTpcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5hdGl2ZURhdGUoRGF0ZS5wYXJzZShZKSkgOlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRvIG1hbnVhbGx5IG1ha2UgY2FsbHMgZGVwZW5kaW5nIG9uIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGxlbmd0aCBoZXJlXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSA3ID8gbmV3IE5hdGl2ZURhdGUoWSwgTSwgRCwgaCwgbSwgcywgbXMpIDpcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID49IDYgPyBuZXcgTmF0aXZlRGF0ZShZLCBNLCBELCBoLCBtLCBzKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSA1ID8gbmV3IE5hdGl2ZURhdGUoWSwgTSwgRCwgaCwgbSkgOlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gNCA/IG5ldyBOYXRpdmVEYXRlKFksIE0sIEQsIGgpIDpcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID49IDMgPyBuZXcgTmF0aXZlRGF0ZShZLCBNLCBEKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSAyID8gbmV3IE5hdGl2ZURhdGUoWSwgTSkgOlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gMSA/IG5ldyBOYXRpdmVEYXRlKFkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTmF0aXZlRGF0ZSgpO1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgbWl4dXBzIHdpdGggdW5maXhlZCBEYXRlIG9iamVjdFxuICAgICAgICAgICAgICAgIGRhdGUuY29uc3RydWN0b3IgPSBEYXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIE5hdGl2ZURhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAxNS45LjEuMTUgRGF0ZSBUaW1lIFN0cmluZyBGb3JtYXQuXG4gICAgICAgIHZhciBpc29EYXRlRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAoXCJeXCIgK1xuICAgICAgICAgICAgXCIoXFxcXGR7NH18W1xcK1xcLV1cXFxcZHs2fSlcIiArIC8vIGZvdXItZGlnaXQgeWVhciBjYXB0dXJlIG9yIHNpZ24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA2LWRpZ2l0IGV4dGVuZGVkIHllYXJcbiAgICAgICAgICAgIFwiKD86LShcXFxcZHsyfSlcIiArIC8vIG9wdGlvbmFsIG1vbnRoIGNhcHR1cmVcbiAgICAgICAgICAgIFwiKD86LShcXFxcZHsyfSlcIiArIC8vIG9wdGlvbmFsIGRheSBjYXB0dXJlXG4gICAgICAgICAgICBcIig/OlwiICsgLy8gY2FwdHVyZSBob3VyczptaW51dGVzOnNlY29uZHMubWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgXCJUKFxcXFxkezJ9KVwiICsgLy8gaG91cnMgY2FwdHVyZVxuICAgICAgICAgICAgICAgIFwiOihcXFxcZHsyfSlcIiArIC8vIG1pbnV0ZXMgY2FwdHVyZVxuICAgICAgICAgICAgICAgIFwiKD86XCIgKyAvLyBvcHRpb25hbCA6c2Vjb25kcy5taWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgXCI6KFxcXFxkezJ9KVwiICsgLy8gc2Vjb25kcyBjYXB0dXJlXG4gICAgICAgICAgICAgICAgICAgIFwiKD86KFxcXFwuXFxcXGR7MSx9KSk/XCIgKyAvLyBtaWxsaXNlY29uZHMgY2FwdHVyZVxuICAgICAgICAgICAgICAgIFwiKT9cIiArXG4gICAgICAgICAgICBcIihcIiArIC8vIGNhcHR1cmUgVVRDIG9mZnNldCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICBcIlp8XCIgKyAvLyBVVEMgY2FwdHVyZVxuICAgICAgICAgICAgICAgIFwiKD86XCIgKyAvLyBvZmZzZXQgc3BlY2lmaWVyICsvLWhvdXJzOm1pbnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgXCIoWy0rXSlcIiArIC8vIHNpZ24gY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICBcIihcXFxcZHsyfSlcIiArIC8vIGhvdXJzIG9mZnNldCBjYXB0dXJlXG4gICAgICAgICAgICAgICAgICAgIFwiOihcXFxcZHsyfSlcIiArIC8vIG1pbnV0ZXMgb2Zmc2V0IGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIilcIiArXG4gICAgICAgICAgICBcIik/KT8pPyk/XCIgK1xuICAgICAgICBcIiRcIik7XG5cbiAgICAgICAgdmFyIG1vbnRocyA9IFtcbiAgICAgICAgICAgIDAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0LCAzNjVcbiAgICAgICAgXTtcblxuICAgICAgICBmdW5jdGlvbiBkYXlGcm9tTW9udGgoeWVhciwgbW9udGgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gbW9udGggPiAxID8gMSA6IDA7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIG1vbnRoc1ttb250aF0gK1xuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKHllYXIgLSAxOTY5ICsgdCkgLyA0KSAtXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcigoeWVhciAtIDE5MDEgKyB0KSAvIDEwMCkgK1xuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKHllYXIgLSAxNjAxICsgdCkgLyA0MDApICtcbiAgICAgICAgICAgICAgICAzNjUgKiAoeWVhciAtIDE5NzApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9VVEModCkge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcihuZXcgTmF0aXZlRGF0ZSgxOTcwLCAwLCAxLCAwLCAwLCAwLCB0KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb3B5IGFueSBjdXN0b20gbWV0aG9kcyBhIDNyZCBwYXJ0eSBsaWJyYXJ5IG1heSBoYXZlIGFkZGVkXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBOYXRpdmVEYXRlKSB7XG4gICAgICAgICAgICBEYXRlW2tleV0gPSBOYXRpdmVEYXRlW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb3B5IFwibmF0aXZlXCIgbWV0aG9kcyBleHBsaWNpdGx5OyB0aGV5IG1heSBiZSBub24tZW51bWVyYWJsZVxuICAgICAgICBEYXRlLm5vdyA9IE5hdGl2ZURhdGUubm93O1xuICAgICAgICBEYXRlLlVUQyA9IE5hdGl2ZURhdGUuVVRDO1xuICAgICAgICBEYXRlLnByb3RvdHlwZSA9IE5hdGl2ZURhdGUucHJvdG90eXBlO1xuICAgICAgICBEYXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERhdGU7XG5cbiAgICAgICAgLy8gVXBncmFkZSBEYXRlLnBhcnNlIHRvIGhhbmRsZSBzaW1wbGlmaWVkIElTTyA4NjAxIHN0cmluZ3NcbiAgICAgICAgRGF0ZS5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKHN0cmluZykge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gaXNvRGF0ZUV4cHJlc3Npb24uZXhlYyhzdHJpbmcpO1xuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFyc2UgbW9udGhzLCBkYXlzLCBob3VycywgbWludXRlcywgc2Vjb25kcywgYW5kIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIC8vIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZXMgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgLy8gcGFyc2UgdGhlIFVUQyBvZmZzZXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBOdW1iZXIobWF0Y2hbMV0pLFxuICAgICAgICAgICAgICAgICAgICBtb250aCA9IE51bWJlcihtYXRjaFsyXSB8fCAxKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgIGRheSA9IE51bWJlcihtYXRjaFszXSB8fCAxKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgIGhvdXIgPSBOdW1iZXIobWF0Y2hbNF0gfHwgMCksXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA9IE51bWJlcihtYXRjaFs1XSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kID0gTnVtYmVyKG1hdGNoWzZdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICBtaWxsaXNlY29uZCA9IE1hdGguZmxvb3IoTnVtYmVyKG1hdGNoWzddIHx8IDApICogMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGltZSB6b25lIGlzIG1pc3NlZCwgbG9jYWwgb2Zmc2V0IHNob3VsZCBiZSB1c2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIChFUyA1LjEgYnVnKVxuICAgICAgICAgICAgICAgICAgICAvLyBzZWUgaHR0cHM6Ly9idWdzLmVjbWFzY3JpcHQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTJcbiAgICAgICAgICAgICAgICAgICAgaXNMb2NhbFRpbWUgPSBCb29sZWFuKG1hdGNoWzRdICYmICFtYXRjaFs4XSksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25PZmZzZXQgPSBtYXRjaFs5XSA9PT0gXCItXCIgPyAxIDogLTEsXG4gICAgICAgICAgICAgICAgICAgIGhvdXJPZmZzZXQgPSBOdW1iZXIobWF0Y2hbMTBdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICBtaW51dGVPZmZzZXQgPSBOdW1iZXIobWF0Y2hbMTFdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBob3VyIDwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlID4gMCB8fCBzZWNvbmQgPiAwIHx8IG1pbGxpc2Vjb25kID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAyNCA6IDI1XG4gICAgICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICAgICAgbWludXRlIDwgNjAgJiYgc2Vjb25kIDwgNjAgJiYgbWlsbGlzZWNvbmQgPCAxMDAwICYmXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoID4gLTEgJiYgbW9udGggPCAxMiAmJiBob3VyT2Zmc2V0IDwgMjQgJiZcbiAgICAgICAgICAgICAgICAgICAgbWludXRlT2Zmc2V0IDwgNjAgJiYgLy8gZGV0ZWN0IGludmFsaWQgb2Zmc2V0c1xuICAgICAgICAgICAgICAgICAgICBkYXkgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICBkYXkgPCAoXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlGcm9tTW9udGgoeWVhciwgbW9udGggKyAxKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlGcm9tTW9udGgoeWVhciwgbW9udGgpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGRheUZyb21Nb250aCh5ZWFyLCBtb250aCkgKyBkYXkpICogMjQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaG91ciArXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyT2Zmc2V0ICogc2lnbk9mZnNldFxuICAgICAgICAgICAgICAgICAgICApICogNjA7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQgKyBtaW51dGUgKyBtaW51dGVPZmZzZXQgKiBzaWduT2Zmc2V0KSAqIDYwICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZFxuICAgICAgICAgICAgICAgICAgICApICogMTAwMCArIG1pbGxpc2Vjb25kO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNMb2NhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRvVVRDKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKC04LjY0ZTE1IDw9IHJlc3VsdCAmJiByZXN1bHQgPD0gOC42NGUxNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIE5hdGl2ZURhdGUucGFyc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gRGF0ZTtcbiAgICB9KShEYXRlKTtcbn1cblxuLy8gRVM1IDE1LjkuNC40XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS45LjQuNFxuaWYgKCFEYXRlLm5vdykge1xuICAgIERhdGUubm93ID0gZnVuY3Rpb24gbm93KCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfTtcbn1cblxuXG4vL1xuLy8gTnVtYmVyXG4vLyA9PT09PT1cbi8vXG5cbi8vIEVTNS4xIDE1LjcuNC41XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS43LjQuNVxuaWYgKCFOdW1iZXIucHJvdG90eXBlLnRvRml4ZWQgfHwgKDAuMDAwMDgpLnRvRml4ZWQoMykgIT09ICcwLjAwMCcgfHwgKDAuOSkudG9GaXhlZCgwKSA9PT0gJzAnIHx8ICgxLjI1NSkudG9GaXhlZCgyKSAhPT0gJzEuMjUnIHx8ICgxMDAwMDAwMDAwMDAwMDAwMTI4KS50b0ZpeGVkKDApICE9PSBcIjEwMDAwMDAwMDAwMDAwMDAxMjhcIikge1xuICAgIC8vIEhpZGUgdGhlc2UgdmFyaWFibGVzIGFuZCBmdW5jdGlvbnNcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmFzZSwgc2l6ZSwgZGF0YSwgaTtcblxuICAgICAgICBiYXNlID0gMWU3O1xuICAgICAgICBzaXplID0gNjtcbiAgICAgICAgZGF0YSA9IFswLCAwLCAwLCAwLCAwLCAwXTtcblxuICAgICAgICBmdW5jdGlvbiBtdWx0aXBseShuLCBjKSB7XG4gICAgICAgICAgICB2YXIgaSA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCsraSA8IHNpemUpIHtcbiAgICAgICAgICAgICAgICBjICs9IG4gKiBkYXRhW2ldO1xuICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBjICUgYmFzZTtcbiAgICAgICAgICAgICAgICBjID0gTWF0aC5mbG9vcihjIC8gYmFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkaXZpZGUobikge1xuICAgICAgICAgICAgdmFyIGkgPSBzaXplLCBjID0gMDtcbiAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGMgKz0gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBkYXRhW2ldID0gTWF0aC5mbG9vcihjIC8gbik7XG4gICAgICAgICAgICAgICAgYyA9IChjICUgbikgKiBiYXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHNpemU7XG4gICAgICAgICAgICB2YXIgcyA9ICcnO1xuICAgICAgICAgICAgd2hpbGUgKC0taSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMgIT09ICcnIHx8IGkgPT09IDAgfHwgZGF0YVtpXSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFN0cmluZyhkYXRhW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzID0gdDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgKz0gJzAwMDAwMDAnLnNsaWNlKDAsIDcgLSB0Lmxlbmd0aCkgKyB0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwb3coeCwgbiwgYWNjKSB7XG4gICAgICAgICAgICByZXR1cm4gKG4gPT09IDAgPyBhY2MgOiAobiAlIDIgPT09IDEgPyBwb3coeCwgbiAtIDEsIGFjYyAqIHgpIDogcG93KHggKiB4LCBuIC8gMiwgYWNjKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9nKHgpIHtcbiAgICAgICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgICAgIHdoaWxlICh4ID49IDQwOTYpIHtcbiAgICAgICAgICAgICAgICBuICs9IDEyO1xuICAgICAgICAgICAgICAgIHggLz0gNDA5NjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICh4ID49IDIpIHtcbiAgICAgICAgICAgICAgICBuICs9IDE7XG4gICAgICAgICAgICAgICAgeCAvPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH1cblxuICAgICAgICBOdW1iZXIucHJvdG90eXBlLnRvRml4ZWQgPSBmdW5jdGlvbiAoZnJhY3Rpb25EaWdpdHMpIHtcbiAgICAgICAgICAgIHZhciBmLCB4LCBzLCBtLCBlLCB6LCBqLCBrO1xuXG4gICAgICAgICAgICAvLyBUZXN0IGZvciBOYU4gYW5kIHJvdW5kIGZyYWN0aW9uRGlnaXRzIGRvd25cbiAgICAgICAgICAgIGYgPSBOdW1iZXIoZnJhY3Rpb25EaWdpdHMpO1xuICAgICAgICAgICAgZiA9IGYgIT09IGYgPyAwIDogTWF0aC5mbG9vcihmKTtcblxuICAgICAgICAgICAgaWYgKGYgPCAwIHx8IGYgPiAyMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTnVtYmVyLnRvRml4ZWQgY2FsbGVkIHdpdGggaW52YWxpZCBudW1iZXIgb2YgZGVjaW1hbHNcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHggPSBOdW1iZXIodGhpcyk7XG5cbiAgICAgICAgICAgIC8vIFRlc3QgZm9yIE5hTlxuICAgICAgICAgICAgaWYgKHggIT09IHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJOYU5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgaXQgaXMgdG9vIGJpZyBvciBzbWFsbCwgcmV0dXJuIHRoZSBzdHJpbmcgdmFsdWUgb2YgdGhlIG51bWJlclxuICAgICAgICAgICAgaWYgKHggPD0gLTFlMjEgfHwgeCA+PSAxZTIxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcyA9IFwiXCI7XG5cbiAgICAgICAgICAgIGlmICh4IDwgMCkge1xuICAgICAgICAgICAgICAgIHMgPSBcIi1cIjtcbiAgICAgICAgICAgICAgICB4ID0gLXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG0gPSBcIjBcIjtcblxuICAgICAgICAgICAgaWYgKHggPiAxZS0yMSkge1xuICAgICAgICAgICAgICAgIC8vIDFlLTIxIDwgeCA8IDFlMjFcbiAgICAgICAgICAgICAgICAvLyAtNzAgPCBsb2cyKHgpIDwgNzBcbiAgICAgICAgICAgICAgICBlID0gbG9nKHggKiBwb3coMiwgNjksIDEpKSAtIDY5O1xuICAgICAgICAgICAgICAgIHogPSAoZSA8IDAgPyB4ICogcG93KDIsIC1lLCAxKSA6IHggLyBwb3coMiwgZSwgMSkpO1xuICAgICAgICAgICAgICAgIHogKj0gMHgxMDAwMDAwMDAwMDAwMDsgLy8gTWF0aC5wb3coMiwgNTIpO1xuICAgICAgICAgICAgICAgIGUgPSA1MiAtIGU7XG5cbiAgICAgICAgICAgICAgICAvLyAtMTggPCBlIDwgMTIyXG4gICAgICAgICAgICAgICAgLy8geCA9IHogLyAyIF4gZVxuICAgICAgICAgICAgICAgIGlmIChlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBtdWx0aXBseSgwLCB6KTtcbiAgICAgICAgICAgICAgICAgICAgaiA9IGY7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPj0gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbHkoMWU3LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogLT0gNztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KHBvdygxMCwgaiwgMSksIDApO1xuICAgICAgICAgICAgICAgICAgICBqID0gZSAtIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPj0gMjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZSgxIDw8IDIzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogLT0gMjM7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkaXZpZGUoMSA8PCBqKTtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbHkoMSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpdmlkZSgyKTtcbiAgICAgICAgICAgICAgICAgICAgbSA9IHRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbHkoMCwgeik7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDEgPDwgKC1lKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIG0gPSB0b1N0cmluZygpICsgJzAuMDAwMDAwMDAwMDAwMDAwMDAwMDAnLnNsaWNlKDIsIDIgKyBmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmID4gMCkge1xuICAgICAgICAgICAgICAgIGsgPSBtLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGlmIChrIDw9IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgbSA9IHMgKyAnMC4wMDAwMDAwMDAwMDAwMDAwMDAwJy5zbGljZSgwLCBmIC0gayArIDIpICsgbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtID0gcyArIG0uc2xpY2UoMCwgayAtIGYpICsgJy4nICsgbS5zbGljZShrIC0gZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtID0gcyArIG07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICB9XG4gICAgfSgpKTtcbn1cblxuXG4vL1xuLy8gU3RyaW5nXG4vLyA9PT09PT1cbi8vXG5cblxuLy8gRVM1IDE1LjUuNC4xNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNS40LjE0XG5cbi8vIFtidWdmaXgsIElFIGx0IDksIGZpcmVmb3ggNCwgS29ucXVlcm9yLCBPcGVyYSwgb2JzY3VyZSBicm93c2Vyc11cbi8vIE1hbnkgYnJvd3NlcnMgZG8gbm90IHNwbGl0IHByb3Blcmx5IHdpdGggcmVndWxhciBleHByZXNzaW9ucyBvciB0aGV5XG4vLyBkbyBub3QgcGVyZm9ybSB0aGUgc3BsaXQgY29ycmVjdGx5IHVuZGVyIG9ic2N1cmUgY29uZGl0aW9ucy5cbi8vIFNlZSBodHRwOi8vYmxvZy5zdGV2ZW5sZXZpdGhhbi5jb20vYXJjaGl2ZXMvY3Jvc3MtYnJvd3Nlci1zcGxpdFxuLy8gSSd2ZSB0ZXN0ZWQgaW4gbWFueSBicm93c2VycyBhbmQgdGhpcyBzZWVtcyB0byBjb3ZlciB0aGUgZGV2aWFudCBvbmVzOlxuLy8gICAgJ2FiJy5zcGxpdCgvKD86YWIpKi8pIHNob3VsZCBiZSBbXCJcIiwgXCJcIl0sIG5vdCBbXCJcIl1cbi8vICAgICcuJy5zcGxpdCgvKC4/KSguPykvKSBzaG91bGQgYmUgW1wiXCIsIFwiLlwiLCBcIlwiLCBcIlwiXSwgbm90IFtcIlwiLCBcIlwiXVxuLy8gICAgJ3Rlc3N0Jy5zcGxpdCgvKHMpKi8pIHNob3VsZCBiZSBbXCJ0XCIsIHVuZGVmaW5lZCwgXCJlXCIsIFwic1wiLCBcInRcIl0sIG5vdFxuLy8gICAgICAgW3VuZGVmaW5lZCwgXCJ0XCIsIHVuZGVmaW5lZCwgXCJlXCIsIC4uLl1cbi8vICAgICcnLnNwbGl0KC8uPy8pIHNob3VsZCBiZSBbXSwgbm90IFtcIlwiXVxuLy8gICAgJy4nLnNwbGl0KC8oKSgpLykgc2hvdWxkIGJlIFtcIi5cIl0sIG5vdCBbXCJcIiwgXCJcIiwgXCIuXCJdXG5cbnZhciBzdHJpbmdfc3BsaXQgPSBTdHJpbmcucHJvdG90eXBlLnNwbGl0O1xuaWYgKFxuICAgICdhYicuc3BsaXQoLyg/OmFiKSovKS5sZW5ndGggIT09IDIgfHxcbiAgICAnLicuc3BsaXQoLyguPykoLj8pLykubGVuZ3RoICE9PSA0IHx8XG4gICAgJ3Rlc3N0Jy5zcGxpdCgvKHMpKi8pWzFdID09PSBcInRcIiB8fFxuICAgICcnLnNwbGl0KC8uPy8pLmxlbmd0aCB8fFxuICAgICcuJy5zcGxpdCgvKCkoKS8pLmxlbmd0aCA+IDFcbikge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb21wbGlhbnRFeGVjTnBjZyA9IC8oKT8/Ly5leGVjKFwiXCIpWzFdID09PSB2b2lkIDA7IC8vIE5QQ0c6IG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwXG5cbiAgICAgICAgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICAgICAgICB2YXIgc3RyaW5nID0gdGhpcztcbiAgICAgICAgICAgIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCAmJiBsaW1pdCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG5cbiAgICAgICAgICAgIC8vIElmIGBzZXBhcmF0b3JgIGlzIG5vdCBhIHJlZ2V4LCB1c2UgbmF0aXZlIHNwbGl0XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNlcGFyYXRvcikgIT09IFwiW29iamVjdCBSZWdFeHBdXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nX3NwbGl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBbXSxcbiAgICAgICAgICAgICAgICBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/IFwiaVwiIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5tdWx0aWxpbmUgID8gXCJtXCIgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLmV4dGVuZGVkICAgPyBcInhcIiA6IFwiXCIpICsgLy8gUHJvcG9zZWQgZm9yIEVTNlxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5zdGlja3kgICAgID8gXCJ5XCIgOiBcIlwiKSwgLy8gRmlyZWZveCAzK1xuICAgICAgICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSAwLFxuICAgICAgICAgICAgICAgIC8vIE1ha2UgYGdsb2JhbGAgYW5kIGF2b2lkIGBsYXN0SW5kZXhgIGlzc3VlcyBieSB3b3JraW5nIHdpdGggYSBjb3B5XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yID0gbmV3IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLCBmbGFncyArIFwiZ1wiKSxcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IyLCBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoO1xuICAgICAgICAgICAgc3RyaW5nICs9IFwiXCI7IC8vIFR5cGUtY29udmVydFxuICAgICAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZykge1xuICAgICAgICAgICAgICAgIC8vIERvZXNuJ3QgbmVlZCBmbGFncyBneSwgYnV0IHRoZXkgZG9uJ3QgaHVydFxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjIgPSBuZXcgUmVnRXhwKFwiXlwiICsgc2VwYXJhdG9yLnNvdXJjZSArIFwiJCg/IVxcXFxzKVwiLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBWYWx1ZXMgZm9yIGBsaW1pdGAsIHBlciB0aGUgc3BlYzpcbiAgICAgICAgICAgICAqIElmIHVuZGVmaW5lZDogNDI5NDk2NzI5NSAvLyBNYXRoLnBvdygyLCAzMikgLSAxXG4gICAgICAgICAgICAgKiBJZiAwLCBJbmZpbml0eSwgb3IgTmFOOiAwXG4gICAgICAgICAgICAgKiBJZiBwb3NpdGl2ZSBudW1iZXI6IGxpbWl0ID0gTWF0aC5mbG9vcihsaW1pdCk7IGlmIChsaW1pdCA+IDQyOTQ5NjcyOTUpIGxpbWl0IC09IDQyOTQ5NjcyOTY7XG4gICAgICAgICAgICAgKiBJZiBuZWdhdGl2ZSBudW1iZXI6IDQyOTQ5NjcyOTYgLSBNYXRoLmZsb29yKE1hdGguYWJzKGxpbWl0KSlcbiAgICAgICAgICAgICAqIElmIG90aGVyOiBUeXBlLWNvbnZlcnQsIHRoZW4gdXNlIHRoZSBhYm92ZSBydWxlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaW1pdCA9IGxpbWl0ID09PSB2b2lkIDAgP1xuICAgICAgICAgICAgICAgIC0xID4+PiAwIDogLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgICAgICAgICAgICAgIGxpbWl0ID4+PiAwOyAvLyBUb1VpbnQzMihsaW1pdClcbiAgICAgICAgICAgIHdoaWxlIChtYXRjaCA9IHNlcGFyYXRvci5leGVjKHN0cmluZykpIHtcbiAgICAgICAgICAgICAgICAvLyBgc2VwYXJhdG9yLmxhc3RJbmRleGAgaXMgbm90IHJlbGlhYmxlIGNyb3NzLWJyb3dzZXJcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEluZGV4ID4gbGFzdExhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCwgbWF0Y2guaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGAgZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3Vwc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXBsaWFudEV4ZWNOcGNnICYmIG1hdGNoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoW2ldID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2guaW5kZXggPCBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShvdXRwdXQsIG1hdGNoLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0TGVuZ3RoID0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlcGFyYXRvci5sYXN0SW5kZXggPT09IG1hdGNoLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvci5sYXN0SW5kZXgrKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXN0TGFzdEluZGV4ID09PSBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RMZW5ndGggfHwgIXNlcGFyYXRvci50ZXN0KFwiXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQubGVuZ3RoID4gbGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgbGltaXQpIDogb3V0cHV0O1xuICAgICAgICB9O1xuICAgIH0oKSk7XG5cbi8vIFtidWdmaXgsIGNocm9tZV1cbi8vIElmIHNlcGFyYXRvciBpcyB1bmRlZmluZWQsIHRoZW4gdGhlIHJlc3VsdCBhcnJheSBjb250YWlucyBqdXN0IG9uZSBTdHJpbmcsXG4vLyB3aGljaCBpcyB0aGUgdGhpcyB2YWx1ZSAoY29udmVydGVkIHRvIGEgU3RyaW5nKS4gSWYgbGltaXQgaXMgbm90IHVuZGVmaW5lZCxcbi8vIHRoZW4gdGhlIG91dHB1dCBhcnJheSBpcyB0cnVuY2F0ZWQgc28gdGhhdCBpdCBjb250YWlucyBubyBtb3JlIHRoYW4gbGltaXRcbi8vIGVsZW1lbnRzLlxuLy8gXCIwXCIuc3BsaXQodW5kZWZpbmVkLCAwKSAtPiBbXVxufSBlbHNlIGlmIChcIjBcIi5zcGxpdCh2b2lkIDAsIDApLmxlbmd0aCkge1xuICAgIFN0cmluZy5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbihzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICAgIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCAmJiBsaW1pdCA9PT0gMCkgcmV0dXJuIFtdO1xuICAgICAgICByZXR1cm4gc3RyaW5nX3NwbGl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxufVxuXG5cbi8vIEVDTUEtMjYyLCAzcmQgQi4yLjNcbi8vIE5vdGUgYW4gRUNNQVNjcmlwdCBzdGFuZGFydCwgYWx0aG91Z2ggRUNNQVNjcmlwdCAzcmQgRWRpdGlvbiBoYXMgYVxuLy8gbm9uLW5vcm1hdGl2ZSBzZWN0aW9uIHN1Z2dlc3RpbmcgdW5pZm9ybSBzZW1hbnRpY3MgYW5kIGl0IHNob3VsZCBiZVxuLy8gbm9ybWFsaXplZCBhY3Jvc3MgYWxsIGJyb3dzZXJzXG4vLyBbYnVnZml4LCBJRSBsdCA5XSBJRSA8IDkgc3Vic3RyKCkgd2l0aCBuZWdhdGl2ZSB2YWx1ZSBub3Qgd29ya2luZyBpbiBJRVxuaWYgKFwiXCIuc3Vic3RyICYmIFwiMGJcIi5zdWJzdHIoLTEpICE9PSBcImJcIikge1xuICAgIHZhciBzdHJpbmdfc3Vic3RyID0gU3RyaW5nLnByb3RvdHlwZS5zdWJzdHI7XG4gICAgLyoqXG4gICAgICogIEdldCB0aGUgc3Vic3RyaW5nIG9mIGEgc3RyaW5nXG4gICAgICogIEBwYXJhbSAge2ludGVnZXJ9ICBzdGFydCAgIHdoZXJlIHRvIHN0YXJ0IHRoZSBzdWJzdHJpbmdcbiAgICAgKiAgQHBhcmFtICB7aW50ZWdlcn0gIGxlbmd0aCAgaG93IG1hbnkgY2hhcmFjdGVycyB0byByZXR1cm5cbiAgICAgKiAgQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyID0gZnVuY3Rpb24oc3RhcnQsIGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nX3N1YnN0ci5jYWxsKFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIHN0YXJ0IDwgMCA/ICgoc3RhcnQgPSB0aGlzLmxlbmd0aCArIHN0YXJ0KSA8IDAgPyAwIDogc3RhcnQpIDogc3RhcnQsXG4gICAgICAgICAgICBsZW5ndGhcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8vIEVTNSAxNS41LjQuMjBcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjUuNC4yMFxudmFyIHdzID0gXCJcXHgwOVxceDBBXFx4MEJcXHgwQ1xceDBEXFx4MjBcXHhBMFxcdTE2ODBcXHUxODBFXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1wiICtcbiAgICBcIlxcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMEFcXHUyMDJGXFx1MjA1RlxcdTMwMDBcXHUyMDI4XCIgK1xuICAgIFwiXFx1MjAyOVxcdUZFRkZcIjtcbmlmICghU3RyaW5nLnByb3RvdHlwZS50cmltIHx8IHdzLnRyaW0oKSkge1xuICAgIC8vIGh0dHA6Ly9ibG9nLnN0ZXZlbmxldml0aGFuLmNvbS9hcmNoaXZlcy9mYXN0ZXItdHJpbS1qYXZhc2NyaXB0XG4gICAgLy8gaHR0cDovL3BlcmZlY3Rpb25raWxscy5jb20vd2hpdGVzcGFjZS1kZXZpYXRpb25zL1xuICAgIHdzID0gXCJbXCIgKyB3cyArIFwiXVwiO1xuICAgIHZhciB0cmltQmVnaW5SZWdleHAgPSBuZXcgUmVnRXhwKFwiXlwiICsgd3MgKyB3cyArIFwiKlwiKSxcbiAgICAgICAgdHJpbUVuZFJlZ2V4cCA9IG5ldyBSZWdFeHAod3MgKyB3cyArIFwiKiRcIik7XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gdHJpbSgpIHtcbiAgICAgICAgaWYgKHRoaXMgPT09IHZvaWQgMCB8fCB0aGlzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FuJ3QgY29udmVydCBcIit0aGlzK1wiIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMpXG4gICAgICAgICAgICAucmVwbGFjZSh0cmltQmVnaW5SZWdleHAsIFwiXCIpXG4gICAgICAgICAgICAucmVwbGFjZSh0cmltRW5kUmVnZXhwLCBcIlwiKTtcbiAgICB9O1xufVxuXG4vL1xuLy8gVXRpbFxuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUgOS40XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3g5LjRcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL3RvLWludGVnZXJcblxuZnVuY3Rpb24gdG9JbnRlZ2VyKG4pIHtcbiAgICBuID0gK247XG4gICAgaWYgKG4gIT09IG4pIHsgLy8gaXNOYU5cbiAgICAgICAgbiA9IDA7XG4gICAgfSBlbHNlIGlmIChuICE9PSAwICYmIG4gIT09ICgxLzApICYmIG4gIT09IC0oMS8wKSkge1xuICAgICAgICBuID0gKG4gPiAwIHx8IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobikpO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoaW5wdXQpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBpbnB1dDtcbiAgICByZXR1cm4gKFxuICAgICAgICBpbnB1dCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgICAgIHR5cGUgPT09IFwiYm9vbGVhblwiIHx8XG4gICAgICAgIHR5cGUgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgdHlwZSA9PT0gXCJzdHJpbmdcIlxuICAgICk7XG59XG5cbmZ1bmN0aW9uIHRvUHJpbWl0aXZlKGlucHV0KSB7XG4gICAgdmFyIHZhbCwgdmFsdWVPZiwgdG9TdHJpbmc7XG4gICAgaWYgKGlzUHJpbWl0aXZlKGlucHV0KSkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICAgIHZhbHVlT2YgPSBpbnB1dC52YWx1ZU9mO1xuICAgIGlmICh0eXBlb2YgdmFsdWVPZiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhbCA9IHZhbHVlT2YuY2FsbChpbnB1dCk7XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nID0gaW5wdXQudG9TdHJpbmc7XG4gICAgaWYgKHR5cGVvZiB0b1N0cmluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhbCA9IHRvU3RyaW5nLmNhbGwoaW5wdXQpO1xuICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG59XG5cbi8vIEVTNSA5Ljlcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDkuOVxudmFyIHRvT2JqZWN0ID0gZnVuY3Rpb24gKG8pIHtcbiAgICBpZiAobyA9PSBudWxsKSB7IC8vIHRoaXMgbWF0Y2hlcyBib3RoIG51bGwgYW5kIHVuZGVmaW5lZFxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FuJ3QgY29udmVydCBcIitvK1wiIHRvIG9iamVjdFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdChvKTtcbn07XG5cbn0pO1xuXG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTGV4ZXIsIFNvdXJjZU1hcCwgY29tcGlsZSwgZXh0LCBmb3JtYXRTb3VyY2VQb3NpdGlvbiwgZnMsIGdldFNvdXJjZU1hcCwgaGVscGVycywgaWNlZF9ydW50aW1lLCBpY2VkX3RyYW5zZm9ybSwgbGV4ZXIsIHBhcnNlciwgcGF0aCwgc291cmNlTWFwcywgdm0sIHdpdGhQcmV0dHlFcnJvcnMsIF9iYXNlLCBfaSwgX2xlbiwgX3JlZixcbiAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuICBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbiAgdm0gPSByZXF1aXJlKCd2bScpO1xuXG4gIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbiAgTGV4ZXIgPSByZXF1aXJlKCcuL2xleGVyJykuTGV4ZXI7XG5cbiAgcGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXInKS5wYXJzZXI7XG5cbiAgaGVscGVycyA9IHJlcXVpcmUoJy4vaGVscGVycycpO1xuXG4gIFNvdXJjZU1hcCA9IHJlcXVpcmUoJy4vc291cmNlbWFwJykuU291cmNlTWFwO1xuXG4gIGljZWRfdHJhbnNmb3JtID0gcmVxdWlyZSgnLi9pY2VkJykudHJhbnNmb3JtO1xuXG4gIGljZWRfcnVudGltZSA9IHJlcXVpcmUoJ2ljZWQtcnVudGltZScpO1xuXG4gIGV4cG9ydHMuVkVSU0lPTiA9ICcxMDguMC4xMSc7XG5cbiAgZXhwb3J0cy5GSUxFX0VYVEVOU0lPTlMgPSBbJy5jb2ZmZWUnLCAnLmxpdGNvZmZlZScsICcuY29mZmVlLm1kJywgJy5pY2VkJywgJy5saXRpY2VkJywgJy5pY2VkLm1kJ107XG5cbiAgZXhwb3J0cy5oZWxwZXJzID0gaGVscGVycztcblxuICB3aXRoUHJldHR5RXJyb3JzID0gZnVuY3Rpb24oZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGVycjtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgY29kZSwgb3B0aW9ucyk7XG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgICB0aHJvdyBoZWxwZXJzLnVwZGF0ZVN5bnRheEVycm9yKGVyciwgY29kZSwgb3B0aW9ucy5maWxlbmFtZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBleHBvcnRzLmNvbXBpbGUgPSBjb21waWxlID0gd2l0aFByZXR0eUVycm9ycyhmdW5jdGlvbihjb2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIGFuc3dlciwgY3VycmVudENvbHVtbiwgY3VycmVudExpbmUsIGV4dGVuZCwgZnJhZ21lbnQsIGZyYWdtZW50cywgaGVhZGVyLCBqcywgbWFwLCBtZXJnZSwgbmV3TGluZXMsIF9pLCBfbGVuO1xuICAgIG1lcmdlID0gaGVscGVycy5tZXJnZSwgZXh0ZW5kID0gaGVscGVycy5leHRlbmQ7XG4gICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuc291cmNlTWFwKSB7XG4gICAgICBtYXAgPSBuZXcgU291cmNlTWFwO1xuICAgIH1cbiAgICBmcmFnbWVudHMgPSAoaWNlZF90cmFuc2Zvcm0ocGFyc2VyLnBhcnNlKGxleGVyLnRva2VuaXplKGNvZGUsIG9wdGlvbnMpKSwgb3B0aW9ucykpLmNvbXBpbGVUb0ZyYWdtZW50cyhvcHRpb25zKTtcbiAgICBjdXJyZW50TGluZSA9IDA7XG4gICAgaWYgKG9wdGlvbnMuaGVhZGVyKSB7XG4gICAgICBjdXJyZW50TGluZSArPSAxO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zaGlmdExpbmUpIHtcbiAgICAgIGN1cnJlbnRMaW5lICs9IDE7XG4gICAgfVxuICAgIGN1cnJlbnRDb2x1bW4gPSAwO1xuICAgIGpzID0gXCJcIjtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGZyYWdtZW50cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudHNbX2ldO1xuICAgICAgaWYgKG9wdGlvbnMuc291cmNlTWFwKSB7XG4gICAgICAgIGlmIChmcmFnbWVudC5sb2NhdGlvbkRhdGEpIHtcbiAgICAgICAgICBtYXAuYWRkKFtmcmFnbWVudC5sb2NhdGlvbkRhdGEuZmlyc3RfbGluZSwgZnJhZ21lbnQubG9jYXRpb25EYXRhLmZpcnN0X2NvbHVtbl0sIFtjdXJyZW50TGluZSwgY3VycmVudENvbHVtbl0sIHtcbiAgICAgICAgICAgIG5vUmVwbGFjZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG5ld0xpbmVzID0gaGVscGVycy5jb3VudChmcmFnbWVudC5jb2RlLCBcIlxcblwiKTtcbiAgICAgICAgY3VycmVudExpbmUgKz0gbmV3TGluZXM7XG4gICAgICAgIGlmIChuZXdMaW5lcykge1xuICAgICAgICAgIGN1cnJlbnRDb2x1bW4gPSBmcmFnbWVudC5jb2RlLmxlbmd0aCAtIChmcmFnbWVudC5jb2RlLmxhc3RJbmRleE9mKFwiXFxuXCIpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudENvbHVtbiArPSBmcmFnbWVudC5jb2RlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAganMgKz0gZnJhZ21lbnQuY29kZTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaGVhZGVyKSB7XG4gICAgICBoZWFkZXIgPSBcIkdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IFwiICsgdGhpcy5WRVJTSU9OO1xuICAgICAganMgPSBcIi8vIFwiICsgaGVhZGVyICsgXCJcXG5cIiArIGpzO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zb3VyY2VNYXApIHtcbiAgICAgIGFuc3dlciA9IHtcbiAgICAgICAganM6IGpzXG4gICAgICB9O1xuICAgICAgYW5zd2VyLnNvdXJjZU1hcCA9IG1hcDtcbiAgICAgIGFuc3dlci52M1NvdXJjZU1hcCA9IG1hcC5nZW5lcmF0ZShvcHRpb25zLCBjb2RlKTtcbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBqcztcbiAgICB9XG4gIH0pO1xuXG4gIGV4cG9ydHMudG9rZW5zID0gd2l0aFByZXR0eUVycm9ycyhmdW5jdGlvbihjb2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxleGVyLnRva2VuaXplKGNvZGUsIG9wdGlvbnMpO1xuICB9KTtcblxuICBleHBvcnRzLm5vZGVzID0gd2l0aFByZXR0eUVycm9ycyhmdW5jdGlvbihzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgYXN0O1xuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgICAgYXN0ID0gcGFyc2VyLnBhcnNlKGxleGVyLnRva2VuaXplKHNvdXJjZSwgb3B0aW9ucykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3QgPSBwYXJzZXIucGFyc2Uoc291cmNlKTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLm5vSWNlZFRyYW5zZm9ybSkge1xuICAgICAgYXN0ID0gaWNlZF90cmFuc2Zvcm0oYXN0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzdDtcbiAgfSk7XG5cbiAgZXhwb3J0cy5ydW4gPSBmdW5jdGlvbihjb2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIGFuc3dlciwgZGlyLCBtYWluTW9kdWxlLCBfcmVmO1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgbWFpbk1vZHVsZSA9IHJlcXVpcmUubWFpbjtcbiAgICBtYWluTW9kdWxlLmZpbGVuYW1lID0gcHJvY2Vzcy5hcmd2WzFdID0gb3B0aW9ucy5maWxlbmFtZSA/IGZzLnJlYWxwYXRoU3luYyhvcHRpb25zLmZpbGVuYW1lKSA6ICcuJztcbiAgICBtYWluTW9kdWxlLm1vZHVsZUNhY2hlICYmIChtYWluTW9kdWxlLm1vZHVsZUNhY2hlID0ge30pO1xuICAgIGRpciA9IG9wdGlvbnMuZmlsZW5hbWUgPyBwYXRoLmRpcm5hbWUoZnMucmVhbHBhdGhTeW5jKG9wdGlvbnMuZmlsZW5hbWUpKSA6IGZzLnJlYWxwYXRoU3luYygnLicpO1xuICAgIG1haW5Nb2R1bGUucGF0aHMgPSByZXF1aXJlKCdtb2R1bGUnKS5fbm9kZU1vZHVsZVBhdGhzKGRpcik7XG4gICAgaWYgKCFoZWxwZXJzLmlzQ29mZmVlKG1haW5Nb2R1bGUuZmlsZW5hbWUpIHx8IHJlcXVpcmUuZXh0ZW5zaW9ucykge1xuICAgICAgb3B0aW9ucy5ydW50aW1lID0gXCJpbnRlcnBcIjtcbiAgICAgIGFuc3dlciA9IGNvbXBpbGUoY29kZSwgb3B0aW9ucyk7XG4gICAgICBjb2RlID0gKF9yZWYgPSBhbnN3ZXIuanMpICE9IG51bGwgPyBfcmVmIDogYW5zd2VyO1xuICAgIH1cbiAgICByZXR1cm4gbWFpbk1vZHVsZS5fY29tcGlsZShjb2RlLCBtYWluTW9kdWxlLmZpbGVuYW1lKTtcbiAgfTtcblxuICBleHBvcnRzW1wiZXZhbFwiXSA9IGZ1bmN0aW9uKGNvZGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgTW9kdWxlLCBTY3JpcHQsIGpzLCBrLCBvLCByLCBzYW5kYm94LCB2LCBfaSwgX2xlbiwgX21vZHVsZSwgX3JlZiwgX3JlZjEsIF9yZXF1aXJlO1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKCEoY29kZSA9IGNvZGUudHJpbSgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTY3JpcHQgPSB2bS5TY3JpcHQ7XG4gICAgaWYgKFNjcmlwdCkge1xuICAgICAgaWYgKG9wdGlvbnMuc2FuZGJveCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnNhbmRib3ggaW5zdGFuY2VvZiBTY3JpcHQuY3JlYXRlQ29udGV4dCgpLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgc2FuZGJveCA9IG9wdGlvbnMuc2FuZGJveDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYW5kYm94ID0gU2NyaXB0LmNyZWF0ZUNvbnRleHQoKTtcbiAgICAgICAgICBfcmVmID0gb3B0aW9ucy5zYW5kYm94O1xuICAgICAgICAgIGZvciAoayBpbiBfcmVmKSB7XG4gICAgICAgICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKF9yZWYsIGspKSBjb250aW51ZTtcbiAgICAgICAgICAgIHYgPSBfcmVmW2tdO1xuICAgICAgICAgICAgc2FuZGJveFtrXSA9IHY7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNhbmRib3guZ2xvYmFsID0gc2FuZGJveC5yb290ID0gc2FuZGJveC5HTE9CQUwgPSBzYW5kYm94O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2FuZGJveCA9IGdsb2JhbDtcbiAgICAgIH1cbiAgICAgIHNhbmRib3guX19maWxlbmFtZSA9IG9wdGlvbnMuZmlsZW5hbWUgfHwgJ2V2YWwnO1xuICAgICAgc2FuZGJveC5fX2Rpcm5hbWUgPSBwYXRoLmRpcm5hbWUoc2FuZGJveC5fX2ZpbGVuYW1lKTtcbiAgICAgIGlmICghKHNhbmRib3ggIT09IGdsb2JhbCB8fCBzYW5kYm94Lm1vZHVsZSB8fCBzYW5kYm94LnJlcXVpcmUpKSB7XG4gICAgICAgIE1vZHVsZSA9IHJlcXVpcmUoJ21vZHVsZScpO1xuICAgICAgICBzYW5kYm94Lm1vZHVsZSA9IF9tb2R1bGUgPSBuZXcgTW9kdWxlKG9wdGlvbnMubW9kdWxlbmFtZSB8fCAnZXZhbCcpO1xuICAgICAgICBzYW5kYm94LnJlcXVpcmUgPSBfcmVxdWlyZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgICByZXR1cm4gTW9kdWxlLl9sb2FkKHBhdGgsIF9tb2R1bGUsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBfbW9kdWxlLmZpbGVuYW1lID0gc2FuZGJveC5fX2ZpbGVuYW1lO1xuICAgICAgICBfcmVmMSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJlcXVpcmUpO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgciA9IF9yZWYxW19pXTtcbiAgICAgICAgICBpZiAociAhPT0gJ3BhdGhzJykge1xuICAgICAgICAgICAgX3JlcXVpcmVbcl0gPSByZXF1aXJlW3JdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfcmVxdWlyZS5wYXRocyA9IF9tb2R1bGUucGF0aHMgPSBNb2R1bGUuX25vZGVNb2R1bGVQYXRocyhwcm9jZXNzLmN3ZCgpKTtcbiAgICAgICAgX3JlcXVpcmUucmVzb2x2ZSA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm4gTW9kdWxlLl9yZXNvbHZlRmlsZW5hbWUocmVxdWVzdCwgX21vZHVsZSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIG8gPSB7fTtcbiAgICBmb3IgKGsgaW4gb3B0aW9ucykge1xuICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChvcHRpb25zLCBrKSkgY29udGludWU7XG4gICAgICB2ID0gb3B0aW9uc1trXTtcbiAgICAgIG9ba10gPSB2O1xuICAgIH1cbiAgICBvLmJhcmUgPSB0cnVlO1xuICAgIGpzID0gY29tcGlsZShjb2RlLCBvKTtcbiAgICBpZiAoc2FuZGJveCA9PT0gZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gdm0ucnVuSW5UaGlzQ29udGV4dChqcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2bS5ydW5JbkNvbnRleHQoanMsIHNhbmRib3gpO1xuICAgIH1cbiAgfTtcblxuICBleHBvcnRzLnJlZ2lzdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHJlcXVpcmUoJy4vcmVnaXN0ZXInKTtcbiAgfTtcblxuICBpZiAocmVxdWlyZS5leHRlbnNpb25zKSB7XG4gICAgX3JlZiA9IHRoaXMuRklMRV9FWFRFTlNJT05TO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgZXh0ID0gX3JlZltfaV07XG4gICAgICBpZiAoKF9iYXNlID0gcmVxdWlyZS5leHRlbnNpb25zKVtleHRdID09IG51bGwpIHtcbiAgICAgICAgX2Jhc2VbZXh0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZSBDb2ZmZWVTY3JpcHQucmVnaXN0ZXIoKSBvciByZXF1aXJlIHRoZSBjb2ZmZWUtc2NyaXB0L3JlZ2lzdGVyIG1vZHVsZSB0byByZXF1aXJlIFwiICsgZXh0ICsgXCIgZmlsZXMuXCIpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGV4cG9ydHMuX2NvbXBpbGVGaWxlID0gZnVuY3Rpb24oZmlsZW5hbWUsIHNvdXJjZU1hcCwgb3B0c19wYXNzZWQpIHtcbiAgICB2YXIgYW5zd2VyLCBlcnIsIGssIG9wdHMsIHJhdywgc3RyaXBwZWQsIHY7XG4gICAgaWYgKHNvdXJjZU1hcCA9PSBudWxsKSB7XG4gICAgICBzb3VyY2VNYXAgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKG9wdHNfcGFzc2VkID09IG51bGwpIHtcbiAgICAgIG9wdHNfcGFzc2VkID0ge307XG4gICAgfVxuICAgIHJhdyA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0ZjgnKTtcbiAgICBzdHJpcHBlZCA9IHJhdy5jaGFyQ29kZUF0KDApID09PSAweEZFRkYgPyByYXcuc3Vic3RyaW5nKDEpIDogcmF3O1xuICAgIG9wdHMgPSB7XG4gICAgICBmaWxlbmFtZTogZmlsZW5hbWUsXG4gICAgICBzb3VyY2VNYXA6IHNvdXJjZU1hcCxcbiAgICAgIGxpdGVyYXRlOiBoZWxwZXJzLmlzTGl0ZXJhdGUoZmlsZW5hbWUpXG4gICAgfTtcbiAgICBmb3IgKGsgaW4gb3B0c19wYXNzZWQpIHtcbiAgICAgIHYgPSBvcHRzX3Bhc3NlZFtrXTtcbiAgICAgIG9wdHNba10gPSB2O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgYW5zd2VyID0gY29tcGlsZShzdHJpcHBlZCwgb3B0cyk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICB0aHJvdyBoZWxwZXJzLnVwZGF0ZVN5bnRheEVycm9yKGVyciwgc3RyaXBwZWQsIGZpbGVuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuc3dlcjtcbiAgfTtcblxuICBsZXhlciA9IG5ldyBMZXhlcjtcblxuICBwYXJzZXIubGV4ZXIgPSB7XG4gICAgbGV4OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0YWcsIHRva2VuO1xuICAgICAgdG9rZW4gPSB0aGlzLnRva2Vuc1t0aGlzLnBvcysrXTtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICB0YWcgPSB0b2tlblswXSwgdGhpcy55eXRleHQgPSB0b2tlblsxXSwgdGhpcy55eWxsb2MgPSB0b2tlblsyXTtcbiAgICAgICAgdGhpcy5lcnJvclRva2VuID0gdG9rZW4ub3JpZ2luIHx8IHRva2VuO1xuICAgICAgICB0aGlzLnl5bGluZW5vID0gdGhpcy55eWxsb2MuZmlyc3RfbGluZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZyA9ICcnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRhZztcbiAgICB9LFxuICAgIHNldElucHV0OiBmdW5jdGlvbih0b2tlbnMpIHtcbiAgICAgIHRoaXMudG9rZW5zID0gdG9rZW5zO1xuICAgICAgcmV0dXJuIHRoaXMucG9zID0gMDtcbiAgICB9LFxuICAgIHVwY29taW5nSW5wdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICB9O1xuXG4gIHBhcnNlci55eSA9IHJlcXVpcmUoJy4vbm9kZXMnKTtcblxuICBleHBvcnRzLmljZWQgPSBpY2VkX3J1bnRpbWU7XG5cbiAgcGFyc2VyLnl5LnBhcnNlRXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlLCBfYXJnKSB7XG4gICAgdmFyIGVycm9yTG9jLCBlcnJvclRhZywgZXJyb3JUZXh0LCBlcnJvclRva2VuLCB0b2tlbiwgdG9rZW5zLCBfcmVmMTtcbiAgICB0b2tlbiA9IF9hcmcudG9rZW47XG4gICAgX3JlZjEgPSBwYXJzZXIubGV4ZXIsIGVycm9yVG9rZW4gPSBfcmVmMS5lcnJvclRva2VuLCB0b2tlbnMgPSBfcmVmMS50b2tlbnM7XG4gICAgZXJyb3JUYWcgPSBlcnJvclRva2VuWzBdLCBlcnJvclRleHQgPSBlcnJvclRva2VuWzFdLCBlcnJvckxvYyA9IGVycm9yVG9rZW5bMl07XG4gICAgZXJyb3JUZXh0ID0gZXJyb3JUb2tlbiA9PT0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXSA/ICdlbmQgb2YgaW5wdXQnIDogZXJyb3JUYWcgPT09ICdJTkRFTlQnIHx8IGVycm9yVGFnID09PSAnT1VUREVOVCcgPyAnaW5kZW50YXRpb24nIDogaGVscGVycy5uYW1lV2hpdGVzcGFjZUNoYXJhY3RlcihlcnJvclRleHQpO1xuICAgIHJldHVybiBoZWxwZXJzLnRocm93U3ludGF4RXJyb3IoXCJ1bmV4cGVjdGVkIFwiICsgZXJyb3JUZXh0LCBlcnJvckxvYyk7XG4gIH07XG5cbiAgZm9ybWF0U291cmNlUG9zaXRpb24gPSBmdW5jdGlvbihmcmFtZSwgZ2V0U291cmNlTWFwcGluZykge1xuICAgIHZhciBhcywgY29sdW1uLCBmaWxlTG9jYXRpb24sIGZpbGVOYW1lLCBmdW5jdGlvbk5hbWUsIGlzQ29uc3RydWN0b3IsIGlzTWV0aG9kQ2FsbCwgbGluZSwgbWV0aG9kTmFtZSwgc291cmNlLCB0cCwgdHlwZU5hbWU7XG4gICAgZmlsZU5hbWUgPSB2b2lkIDA7XG4gICAgZmlsZUxvY2F0aW9uID0gJyc7XG4gICAgaWYgKGZyYW1lLmlzTmF0aXZlKCkpIHtcbiAgICAgIGZpbGVMb2NhdGlvbiA9IFwibmF0aXZlXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChmcmFtZS5pc0V2YWwoKSkge1xuICAgICAgICBmaWxlTmFtZSA9IGZyYW1lLmdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpO1xuICAgICAgICBpZiAoIWZpbGVOYW1lKSB7XG4gICAgICAgICAgZmlsZUxvY2F0aW9uID0gXCJcIiArIChmcmFtZS5nZXRFdmFsT3JpZ2luKCkpICsgXCIsIFwiO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWxlTmFtZSA9IGZyYW1lLmdldEZpbGVOYW1lKCk7XG4gICAgICB9XG4gICAgICBmaWxlTmFtZSB8fCAoZmlsZU5hbWUgPSBcIjxhbm9ueW1vdXM+XCIpO1xuICAgICAgbGluZSA9IGZyYW1lLmdldExpbmVOdW1iZXIoKTtcbiAgICAgIGNvbHVtbiA9IGZyYW1lLmdldENvbHVtbk51bWJlcigpO1xuICAgICAgc291cmNlID0gZ2V0U291cmNlTWFwcGluZyhmaWxlTmFtZSwgbGluZSwgY29sdW1uKTtcbiAgICAgIGZpbGVMb2NhdGlvbiA9IHNvdXJjZSA/IFwiXCIgKyBmaWxlTmFtZSArIFwiOlwiICsgc291cmNlWzBdICsgXCI6XCIgKyBzb3VyY2VbMV0gOiBcIlwiICsgZmlsZU5hbWUgKyBcIjpcIiArIGxpbmUgKyBcIjpcIiArIGNvbHVtbjtcbiAgICB9XG4gICAgZnVuY3Rpb25OYW1lID0gZnJhbWUuZ2V0RnVuY3Rpb25OYW1lKCk7XG4gICAgaXNDb25zdHJ1Y3RvciA9IGZyYW1lLmlzQ29uc3RydWN0b3IoKTtcbiAgICBpc01ldGhvZENhbGwgPSAhKGZyYW1lLmlzVG9wbGV2ZWwoKSB8fCBpc0NvbnN0cnVjdG9yKTtcbiAgICBpZiAoaXNNZXRob2RDYWxsKSB7XG4gICAgICBtZXRob2ROYW1lID0gZnJhbWUuZ2V0TWV0aG9kTmFtZSgpO1xuICAgICAgdHlwZU5hbWUgPSBmcmFtZS5nZXRUeXBlTmFtZSgpO1xuICAgICAgaWYgKGZ1bmN0aW9uTmFtZSkge1xuICAgICAgICB0cCA9IGFzID0gJyc7XG4gICAgICAgIGlmICh0eXBlTmFtZSAmJiBmdW5jdGlvbk5hbWUuaW5kZXhPZih0eXBlTmFtZSkpIHtcbiAgICAgICAgICB0cCA9IFwiXCIgKyB0eXBlTmFtZSArIFwiLlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXRob2ROYW1lICYmIGZ1bmN0aW9uTmFtZS5pbmRleE9mKFwiLlwiICsgbWV0aG9kTmFtZSkgIT09IGZ1bmN0aW9uTmFtZS5sZW5ndGggLSBtZXRob2ROYW1lLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBhcyA9IFwiIFthcyBcIiArIG1ldGhvZE5hbWUgKyBcIl1cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIiArIHRwICsgZnVuY3Rpb25OYW1lICsgYXMgKyBcIiAoXCIgKyBmaWxlTG9jYXRpb24gKyBcIilcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcIlwiICsgdHlwZU5hbWUgKyBcIi5cIiArIChtZXRob2ROYW1lIHx8ICc8YW5vbnltb3VzPicpICsgXCIgKFwiICsgZmlsZUxvY2F0aW9uICsgXCIpXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0NvbnN0cnVjdG9yKSB7XG4gICAgICByZXR1cm4gXCJuZXcgXCIgKyAoZnVuY3Rpb25OYW1lIHx8ICc8YW5vbnltb3VzPicpICsgXCIgKFwiICsgZmlsZUxvY2F0aW9uICsgXCIpXCI7XG4gICAgfSBlbHNlIGlmIChmdW5jdGlvbk5hbWUpIHtcbiAgICAgIHJldHVybiBcIlwiICsgZnVuY3Rpb25OYW1lICsgXCIgKFwiICsgZmlsZUxvY2F0aW9uICsgXCIpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaWxlTG9jYXRpb247XG4gICAgfVxuICB9O1xuXG4gIHNvdXJjZU1hcHMgPSB7fTtcblxuICBnZXRTb3VyY2VNYXAgPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgIHZhciBhbnN3ZXIsIF9yZWYxO1xuICAgIGlmIChzb3VyY2VNYXBzW2ZpbGVuYW1lXSkge1xuICAgICAgcmV0dXJuIHNvdXJjZU1hcHNbZmlsZW5hbWVdO1xuICAgIH1cbiAgICBpZiAoX3JlZjEgPSBwYXRoICE9IG51bGwgPyBwYXRoLmV4dG5hbWUoZmlsZW5hbWUpIDogdm9pZCAwLCBfX2luZGV4T2YuY2FsbChleHBvcnRzLkZJTEVfRVhURU5TSU9OUywgX3JlZjEpIDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhbnN3ZXIgPSBleHBvcnRzLl9jb21waWxlRmlsZShmaWxlbmFtZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHNvdXJjZU1hcHNbZmlsZW5hbWVdID0gYW5zd2VyLnNvdXJjZU1hcDtcbiAgfTtcblxuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IGZ1bmN0aW9uKGVyciwgc3RhY2spIHtcbiAgICB2YXIgZnJhbWUsIGZyYW1lcywgZ2V0U291cmNlTWFwcGluZztcbiAgICBnZXRTb3VyY2VNYXBwaW5nID0gZnVuY3Rpb24oZmlsZW5hbWUsIGxpbmUsIGNvbHVtbikge1xuICAgICAgdmFyIGFuc3dlciwgc291cmNlTWFwO1xuICAgICAgc291cmNlTWFwID0gZ2V0U291cmNlTWFwKGZpbGVuYW1lKTtcbiAgICAgIGlmIChzb3VyY2VNYXApIHtcbiAgICAgICAgYW5zd2VyID0gc291cmNlTWFwLnNvdXJjZUxvY2F0aW9uKFtsaW5lIC0gMSwgY29sdW1uIC0gMV0pO1xuICAgICAgfVxuICAgICAgaWYgKGFuc3dlcikge1xuICAgICAgICByZXR1cm4gW2Fuc3dlclswXSArIDEsIGFuc3dlclsxXSArIDFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgICBmcmFtZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2osIF9sZW4xLCBfcmVzdWx0cztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBzdGFjay5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgZnJhbWUgPSBzdGFja1tfal07XG4gICAgICAgIGlmIChmcmFtZS5nZXRGdW5jdGlvbigpID09PSBleHBvcnRzLnJ1bikge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIF9yZXN1bHRzLnB1c2goXCIgIGF0IFwiICsgKGZvcm1hdFNvdXJjZVBvc2l0aW9uKGZyYW1lLCBnZXRTb3VyY2VNYXBwaW5nKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0pKCk7XG4gICAgcmV0dXJuIFwiXCIgKyAoZXJyLnRvU3RyaW5nKCkpICsgXCJcXG5cIiArIChmcmFtZXMuam9pbignXFxuJykpICsgXCJcXG5cIjtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBidWlsZExvY2F0aW9uRGF0YSwgZXh0ZW5kLCBmbGF0dGVuLCBsYXN0LCByZXBlYXQsIHN5bnRheEVycm9yVG9TdHJpbmcsIF9yZWY7XG5cbiAgZXhwb3J0cy5zdGFydHMgPSBmdW5jdGlvbihzdHJpbmcsIGxpdGVyYWwsIHN0YXJ0KSB7XG4gICAgcmV0dXJuIGxpdGVyYWwgPT09IHN0cmluZy5zdWJzdHIoc3RhcnQsIGxpdGVyYWwubGVuZ3RoKTtcbiAgfTtcblxuICBleHBvcnRzLmVuZHMgPSBmdW5jdGlvbihzdHJpbmcsIGxpdGVyYWwsIGJhY2spIHtcbiAgICB2YXIgbGVuO1xuICAgIGxlbiA9IGxpdGVyYWwubGVuZ3RoO1xuICAgIHJldHVybiBsaXRlcmFsID09PSBzdHJpbmcuc3Vic3RyKHN0cmluZy5sZW5ndGggLSBsZW4gLSAoYmFjayB8fCAwKSwgbGVuKTtcbiAgfTtcblxuICBleHBvcnRzLnJlcGVhdCA9IHJlcGVhdCA9IGZ1bmN0aW9uKHN0ciwgbikge1xuICAgIHZhciByZXM7XG4gICAgcmVzID0gJyc7XG4gICAgd2hpbGUgKG4gPiAwKSB7XG4gICAgICBpZiAobiAmIDEpIHtcbiAgICAgICAgcmVzICs9IHN0cjtcbiAgICAgIH1cbiAgICAgIG4gPj4+PSAxO1xuICAgICAgc3RyICs9IHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcblxuICBleHBvcnRzLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBpdGVtLCBfaSwgX2xlbiwgX3Jlc3VsdHM7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFycmF5Lmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBpdGVtID0gYXJyYXlbX2ldO1xuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIGV4cG9ydHMuY291bnQgPSBmdW5jdGlvbihzdHJpbmcsIHN1YnN0cikge1xuICAgIHZhciBudW0sIHBvcztcbiAgICBudW0gPSBwb3MgPSAwO1xuICAgIGlmICghc3Vic3RyLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDEgLyAwO1xuICAgIH1cbiAgICB3aGlsZSAocG9zID0gMSArIHN0cmluZy5pbmRleE9mKHN1YnN0ciwgcG9zKSkge1xuICAgICAgbnVtKys7XG4gICAgfVxuICAgIHJldHVybiBudW07XG4gIH07XG5cbiAgZXhwb3J0cy5tZXJnZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIG92ZXJyaWRlcykge1xuICAgIHJldHVybiBleHRlbmQoZXh0ZW5kKHt9LCBvcHRpb25zKSwgb3ZlcnJpZGVzKTtcbiAgfTtcblxuICBleHRlbmQgPSBleHBvcnRzLmV4dGVuZCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydGllcykge1xuICAgIHZhciBrZXksIHZhbDtcbiAgICBmb3IgKGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YWwgPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICBvYmplY3Rba2V5XSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfTtcblxuICBleHBvcnRzLmZsYXR0ZW4gPSBmbGF0dGVuID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgZWxlbWVudCwgZmxhdHRlbmVkLCBfaSwgX2xlbjtcbiAgICBmbGF0dGVuZWQgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFycmF5Lmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBlbGVtZW50ID0gYXJyYXlbX2ldO1xuICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBmbGF0dGVuZWQgPSBmbGF0dGVuZWQuY29uY2F0KGZsYXR0ZW4oZWxlbWVudCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmxhdHRlbmVkLnB1c2goZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmbGF0dGVuZWQ7XG4gIH07XG5cbiAgZXhwb3J0cy5kZWwgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHZhciB2YWw7XG4gICAgdmFsID0gb2JqW2tleV07XG4gICAgZGVsZXRlIG9ialtrZXldO1xuICAgIHJldHVybiB2YWw7XG4gIH07XG5cbiAgZXhwb3J0cy5sYXN0ID0gbGFzdCA9IGZ1bmN0aW9uKGFycmF5LCBiYWNrKSB7XG4gICAgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIChiYWNrIHx8IDApIC0gMV07XG4gIH07XG5cbiAgZXhwb3J0cy5zb21lID0gKF9yZWYgPSBBcnJheS5wcm90b3R5cGUuc29tZSkgIT0gbnVsbCA/IF9yZWYgOiBmdW5jdGlvbihmbikge1xuICAgIHZhciBlLCBfaSwgX2xlbjtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IHRoaXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGUgPSB0aGlzW19pXTtcbiAgICAgIGlmIChmbihlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMuaW52ZXJ0TGl0ZXJhdGUgPSBmdW5jdGlvbihjb2RlKSB7XG4gICAgdmFyIGxpbmUsIGxpbmVzLCBtYXliZV9jb2RlO1xuICAgIG1heWJlX2NvZGUgPSB0cnVlO1xuICAgIGxpbmVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmMSwgX3Jlc3VsdHM7XG4gICAgICBfcmVmMSA9IGNvZGUuc3BsaXQoJ1xcbicpO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbGluZSA9IF9yZWYxW19pXTtcbiAgICAgICAgaWYgKG1heWJlX2NvZGUgJiYgL14oWyBdezR9fFsgXXswLDN9XFx0KS8udGVzdChsaW5lKSkge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gobGluZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF5YmVfY29kZSA9IC9eXFxzKiQvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGxpbmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goJyMgJyArIGxpbmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfSkoKTtcbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG4gIH07XG5cbiAgYnVpbGRMb2NhdGlvbkRhdGEgPSBmdW5jdGlvbihmaXJzdCwgbGFzdCkge1xuICAgIGlmICghbGFzdCkge1xuICAgICAgcmV0dXJuIGZpcnN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmaXJzdF9saW5lOiBmaXJzdC5maXJzdF9saW5lLFxuICAgICAgICBmaXJzdF9jb2x1bW46IGZpcnN0LmZpcnN0X2NvbHVtbixcbiAgICAgICAgbGFzdF9saW5lOiBsYXN0Lmxhc3RfbGluZSxcbiAgICAgICAgbGFzdF9jb2x1bW46IGxhc3QubGFzdF9jb2x1bW5cbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIGV4cG9ydHMuYWRkTG9jYXRpb25EYXRhRm4gPSBmdW5jdGlvbihmaXJzdCwgbGFzdCkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmICgoKHR5cGVvZiBvYmopID09PSAnb2JqZWN0JykgJiYgKCEhb2JqWyd1cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcnXSkpIHtcbiAgICAgICAgb2JqLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyhidWlsZExvY2F0aW9uRGF0YShmaXJzdCwgbGFzdCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIGV4cG9ydHMubG9jYXRpb25EYXRhVG9TdHJpbmcgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbG9jYXRpb25EYXRhO1xuICAgIGlmICgoXCIyXCIgaW4gb2JqKSAmJiAoXCJmaXJzdF9saW5lXCIgaW4gb2JqWzJdKSkge1xuICAgICAgbG9jYXRpb25EYXRhID0gb2JqWzJdO1xuICAgIH0gZWxzZSBpZiAoXCJmaXJzdF9saW5lXCIgaW4gb2JqKSB7XG4gICAgICBsb2NhdGlvbkRhdGEgPSBvYmo7XG4gICAgfVxuICAgIGlmIChsb2NhdGlvbkRhdGEpIHtcbiAgICAgIHJldHVybiAoXCJcIiArIChsb2NhdGlvbkRhdGEuZmlyc3RfbGluZSArIDEpICsgXCI6XCIgKyAobG9jYXRpb25EYXRhLmZpcnN0X2NvbHVtbiArIDEpICsgXCItXCIpICsgKFwiXCIgKyAobG9jYXRpb25EYXRhLmxhc3RfbGluZSArIDEpICsgXCI6XCIgKyAobG9jYXRpb25EYXRhLmxhc3RfY29sdW1uICsgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJObyBsb2NhdGlvbiBkYXRhXCI7XG4gICAgfVxuICB9O1xuXG4gIGV4cG9ydHMuYmFzZUZpbGVOYW1lID0gZnVuY3Rpb24oZmlsZSwgc3RyaXBFeHQsIHVzZVdpblBhdGhTZXApIHtcbiAgICB2YXIgcGFydHMsIHBhdGhTZXA7XG4gICAgaWYgKHN0cmlwRXh0ID09IG51bGwpIHtcbiAgICAgIHN0cmlwRXh0ID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh1c2VXaW5QYXRoU2VwID09IG51bGwpIHtcbiAgICAgIHVzZVdpblBhdGhTZXAgPSBmYWxzZTtcbiAgICB9XG4gICAgcGF0aFNlcCA9IHVzZVdpblBhdGhTZXAgPyAvXFxcXHxcXC8vIDogL1xcLy87XG4gICAgcGFydHMgPSBmaWxlLnNwbGl0KHBhdGhTZXApO1xuICAgIGZpbGUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIShzdHJpcEV4dCAmJiBmaWxlLmluZGV4T2YoJy4nKSA+PSAwKSkge1xuICAgICAgcmV0dXJuIGZpbGU7XG4gICAgfVxuICAgIHBhcnRzID0gZmlsZS5zcGxpdCgnLicpO1xuICAgIHBhcnRzLnBvcCgpO1xuICAgIGlmIChwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSA9PT0gJ2NvZmZlZScgJiYgcGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgcGFydHMucG9wKCk7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cy5qb2luKCcuJyk7XG4gIH07XG5cbiAgZXhwb3J0cy5pc0NvZmZlZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICByZXR1cm4gL1xcLigobGl0KT9jb2ZmZWV8Y29mZmVlXFwubWR8aWNlZHxsaXRpY2VkfGljZWRcXC5tZCkkLy50ZXN0KGZpbGUpO1xuICB9O1xuXG4gIGV4cG9ydHMuaXNMaXRlcmF0ZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICByZXR1cm4gL1xcLihsaXRjb2ZmZWV8Y29mZmVlXFwubWR8bGl0aWNlZHxpY2VkXFwubWQpJC8udGVzdChmaWxlKTtcbiAgfTtcblxuICBleHBvcnRzLnRocm93U3ludGF4RXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlLCBsb2NhdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBlcnJvciA9IG5ldyBTeW50YXhFcnJvcihtZXNzYWdlKTtcbiAgICBlcnJvci5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgIGVycm9yLnRvU3RyaW5nID0gc3ludGF4RXJyb3JUb1N0cmluZztcbiAgICBlcnJvci5zdGFjayA9IGVycm9yLnRvU3RyaW5nKCk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH07XG5cbiAgZXhwb3J0cy51cGRhdGVTeW50YXhFcnJvciA9IGZ1bmN0aW9uKGVycm9yLCBjb2RlLCBmaWxlbmFtZSkge1xuICAgIGlmIChlcnJvci50b1N0cmluZyA9PT0gc3ludGF4RXJyb3JUb1N0cmluZykge1xuICAgICAgZXJyb3IuY29kZSB8fCAoZXJyb3IuY29kZSA9IGNvZGUpO1xuICAgICAgZXJyb3IuZmlsZW5hbWUgfHwgKGVycm9yLmZpbGVuYW1lID0gZmlsZW5hbWUpO1xuICAgICAgZXJyb3Iuc3RhY2sgPSBlcnJvci50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3I7XG4gIH07XG5cbiAgc3ludGF4RXJyb3JUb1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb2RlTGluZSwgY29sb3JpemUsIGNvbG9yc0VuYWJsZWQsIGVuZCwgZmlsZW5hbWUsIGZpcnN0X2NvbHVtbiwgZmlyc3RfbGluZSwgbGFzdF9jb2x1bW4sIGxhc3RfbGluZSwgbWFya2VyLCBzdGFydCwgX3JlZjEsIF9yZWYyO1xuICAgIGlmICghKHRoaXMuY29kZSAmJiB0aGlzLmxvY2F0aW9uKSkge1xuICAgICAgcmV0dXJuIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBfcmVmMSA9IHRoaXMubG9jYXRpb24sIGZpcnN0X2xpbmUgPSBfcmVmMS5maXJzdF9saW5lLCBmaXJzdF9jb2x1bW4gPSBfcmVmMS5maXJzdF9jb2x1bW4sIGxhc3RfbGluZSA9IF9yZWYxLmxhc3RfbGluZSwgbGFzdF9jb2x1bW4gPSBfcmVmMS5sYXN0X2NvbHVtbjtcbiAgICBpZiAobGFzdF9saW5lID09IG51bGwpIHtcbiAgICAgIGxhc3RfbGluZSA9IGZpcnN0X2xpbmU7XG4gICAgfVxuICAgIGlmIChsYXN0X2NvbHVtbiA9PSBudWxsKSB7XG4gICAgICBsYXN0X2NvbHVtbiA9IGZpcnN0X2NvbHVtbjtcbiAgICB9XG4gICAgZmlsZW5hbWUgPSB0aGlzLmZpbGVuYW1lIHx8ICdbc3RkaW5dJztcbiAgICBjb2RlTGluZSA9IHRoaXMuY29kZS5zcGxpdCgnXFxuJylbZmlyc3RfbGluZV07XG4gICAgc3RhcnQgPSBmaXJzdF9jb2x1bW47XG4gICAgZW5kID0gZmlyc3RfbGluZSA9PT0gbGFzdF9saW5lID8gbGFzdF9jb2x1bW4gKyAxIDogY29kZUxpbmUubGVuZ3RoO1xuICAgIG1hcmtlciA9IGNvZGVMaW5lLnNsaWNlKDAsIHN0YXJ0KS5yZXBsYWNlKC9bXlxcc10vZywgJyAnKSArIHJlcGVhdCgnXicsIGVuZCAtIHN0YXJ0KTtcbiAgICBpZiAoKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MgIT09IG51bGwgPyBwcm9jZXNzLnN0ZG91dCA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgY29sb3JzRW5hYmxlZCA9IHByb2Nlc3Muc3Rkb3V0LmlzVFRZICYmICFwcm9jZXNzLmVudi5OT0RFX0RJU0FCTEVfQ09MT1JTO1xuICAgIH1cbiAgICBpZiAoKF9yZWYyID0gdGhpcy5jb2xvcmZ1bCkgIT0gbnVsbCA/IF9yZWYyIDogY29sb3JzRW5hYmxlZCkge1xuICAgICAgY29sb3JpemUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgcmV0dXJuIFwiXFx4MUJbMTszMW1cIiArIHN0ciArIFwiXFx4MUJbMG1cIjtcbiAgICAgIH07XG4gICAgICBjb2RlTGluZSA9IGNvZGVMaW5lLnNsaWNlKDAsIHN0YXJ0KSArIGNvbG9yaXplKGNvZGVMaW5lLnNsaWNlKHN0YXJ0LCBlbmQpKSArIGNvZGVMaW5lLnNsaWNlKGVuZCk7XG4gICAgICBtYXJrZXIgPSBjb2xvcml6ZShtYXJrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIiArIGZpbGVuYW1lICsgXCI6XCIgKyAoZmlyc3RfbGluZSArIDEpICsgXCI6XCIgKyAoZmlyc3RfY29sdW1uICsgMSkgKyBcIjogZXJyb3I6IFwiICsgdGhpcy5tZXNzYWdlICsgXCJcXG5cIiArIGNvZGVMaW5lICsgXCJcXG5cIiArIG1hcmtlcjtcbiAgfTtcblxuICBleHBvcnRzLm5hbWVXaGl0ZXNwYWNlQ2hhcmFjdGVyID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgc3dpdGNoIChzdHJpbmcpIHtcbiAgICAgIGNhc2UgJyAnOlxuICAgICAgICByZXR1cm4gJ3NwYWNlJztcbiAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgIHJldHVybiAnbmV3bGluZSc7XG4gICAgICBjYXNlICdcXHInOlxuICAgICAgICByZXR1cm4gJ2NhcnJpYWdlIHJldHVybic7XG4gICAgICBjYXNlICdcXHQnOlxuICAgICAgICByZXR1cm4gJ3RhYic7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH1cbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIGV4cG9ydHMudHJhbnNmb3JtID0gZnVuY3Rpb24oeCwgb3B0aW9ucykge1xuICAgIHJldHVybiB4LmljZWRUcmFuc2Zvcm0ob3B0aW9ucyk7XG4gIH07XG5cbiAgZXhwb3J0cy5ydW50aW1lID0gcmVxdWlyZSgnaWNlZC1ydW50aW1lJyk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQk9NLCBCT09MLCBDQUxMQUJMRSwgQ09ERSwgQ09GRkVFX0FMSUFTRVMsIENPRkZFRV9BTElBU19NQVAsIENPRkZFRV9LRVlXT1JEUywgQ09NTUVOVCwgQ09NUEFSRSwgQ09NUE9VTkRfQVNTSUdOLCBIRVJFRE9DLCBIRVJFRE9DX0lMTEVHQUwsIEhFUkVET0NfSU5ERU5ULCBIRVJFR0VYLCBIRVJFR0VYX09NSVQsIElERU5USUZJRVIsIElOREVOVEFCTEVfQ0xPU0VSUywgSU5ERVhBQkxFLCBJTlZFUlNFUywgSlNUT0tFTiwgSlNfRk9SQklEREVOLCBKU19LRVlXT1JEUywgTElORV9CUkVBSywgTElORV9DT05USU5VRVIsIExPR0lDLCBMZXhlciwgTUFUSCwgTVVMVElMSU5FUiwgTVVMVElfREVOVCwgTk9UX1JFR0VYLCBOT1RfU1BBQ0VEX1JFR0VYLCBOVU1CRVIsIE9QRVJBVE9SLCBSRUdFWCwgUkVMQVRJT04sIFJFU0VSVkVELCBSZXdyaXRlciwgU0hJRlQsIFNJTVBMRVNUUiwgU1RSSUNUX1BST1NDUklCRUQsIFRSQUlMSU5HX1NQQUNFUywgVU5BUlksIFVOQVJZX01BVEgsIFdISVRFU1BBQ0UsIGNvbXBhY3QsIGNvdW50LCBpbnZlcnRMaXRlcmF0ZSwga2V5LCBsYXN0LCBsb2NhdGlvbkRhdGFUb1N0cmluZywgcmVwZWF0LCBzdGFydHMsIHRocm93U3ludGF4RXJyb3IsIF9yZWYsIF9yZWYxLFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gIF9yZWYgPSByZXF1aXJlKCcuL3Jld3JpdGVyJyksIFJld3JpdGVyID0gX3JlZi5SZXdyaXRlciwgSU5WRVJTRVMgPSBfcmVmLklOVkVSU0VTO1xuXG4gIF9yZWYxID0gcmVxdWlyZSgnLi9oZWxwZXJzJyksIGNvdW50ID0gX3JlZjEuY291bnQsIHN0YXJ0cyA9IF9yZWYxLnN0YXJ0cywgY29tcGFjdCA9IF9yZWYxLmNvbXBhY3QsIGxhc3QgPSBfcmVmMS5sYXN0LCByZXBlYXQgPSBfcmVmMS5yZXBlYXQsIGludmVydExpdGVyYXRlID0gX3JlZjEuaW52ZXJ0TGl0ZXJhdGUsIGxvY2F0aW9uRGF0YVRvU3RyaW5nID0gX3JlZjEubG9jYXRpb25EYXRhVG9TdHJpbmcsIHRocm93U3ludGF4RXJyb3IgPSBfcmVmMS50aHJvd1N5bnRheEVycm9yO1xuXG4gIGV4cG9ydHMuTGV4ZXIgPSBMZXhlciA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBMZXhlcigpIHt9XG5cbiAgICBMZXhlci5wcm90b3R5cGUudG9rZW5pemUgPSBmdW5jdGlvbihjb2RlLCBvcHRzKSB7XG4gICAgICB2YXIgY29uc3VtZWQsIGksIHRhZywgX3JlZjI7XG4gICAgICBpZiAob3B0cyA9PSBudWxsKSB7XG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGl0ZXJhdGUgPSBvcHRzLmxpdGVyYXRlO1xuICAgICAgdGhpcy5pbmRlbnQgPSAwO1xuICAgICAgdGhpcy5iYXNlSW5kZW50ID0gMDtcbiAgICAgIHRoaXMuaW5kZWJ0ID0gMDtcbiAgICAgIHRoaXMub3V0ZGVidCA9IDA7XG4gICAgICB0aGlzLmluZGVudHMgPSBbXTtcbiAgICAgIHRoaXMuZW5kcyA9IFtdO1xuICAgICAgdGhpcy50b2tlbnMgPSBbXTtcbiAgICAgIHRoaXMuY2h1bmtMaW5lID0gb3B0cy5saW5lIHx8IDA7XG4gICAgICB0aGlzLmNodW5rQ29sdW1uID0gb3B0cy5jb2x1bW4gfHwgMDtcbiAgICAgIGNvZGUgPSB0aGlzLmNsZWFuKGNvZGUpO1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAodGhpcy5jaHVuayA9IGNvZGUuc2xpY2UoaSkpIHtcbiAgICAgICAgY29uc3VtZWQgPSB0aGlzLmlkZW50aWZpZXJUb2tlbigpIHx8IHRoaXMuY29tbWVudFRva2VuKCkgfHwgdGhpcy53aGl0ZXNwYWNlVG9rZW4oKSB8fCB0aGlzLmxpbmVUb2tlbigpIHx8IHRoaXMuaGVyZWRvY1Rva2VuKCkgfHwgdGhpcy5zdHJpbmdUb2tlbigpIHx8IHRoaXMubnVtYmVyVG9rZW4oKSB8fCB0aGlzLnJlZ2V4VG9rZW4oKSB8fCB0aGlzLmpzVG9rZW4oKSB8fCB0aGlzLmxpdGVyYWxUb2tlbigpO1xuICAgICAgICBfcmVmMiA9IHRoaXMuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayhjb25zdW1lZCksIHRoaXMuY2h1bmtMaW5lID0gX3JlZjJbMF0sIHRoaXMuY2h1bmtDb2x1bW4gPSBfcmVmMlsxXTtcbiAgICAgICAgaSArPSBjb25zdW1lZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xvc2VJbmRlbnRhdGlvbigpO1xuICAgICAgaWYgKHRhZyA9IHRoaXMuZW5kcy5wb3AoKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwibWlzc2luZyBcIiArIHRhZyk7XG4gICAgICB9XG4gICAgICBpZiAob3B0cy5yZXdyaXRlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbnM7XG4gICAgICB9XG4gICAgICByZXR1cm4gKG5ldyBSZXdyaXRlcikucmV3cml0ZSh0aGlzLnRva2Vucyk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5jbGVhbiA9IGZ1bmN0aW9uKGNvZGUpIHtcbiAgICAgIGlmIChjb2RlLmNoYXJDb2RlQXQoMCkgPT09IEJPTSkge1xuICAgICAgICBjb2RlID0gY29kZS5zbGljZSgxKTtcbiAgICAgIH1cbiAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcci9nLCAnJykucmVwbGFjZShUUkFJTElOR19TUEFDRVMsICcnKTtcbiAgICAgIGlmIChXSElURVNQQUNFLnRlc3QoY29kZSkpIHtcbiAgICAgICAgY29kZSA9IFwiXFxuXCIgKyBjb2RlO1xuICAgICAgICB0aGlzLmNodW5rTGluZS0tO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGl0ZXJhdGUpIHtcbiAgICAgICAgY29kZSA9IGludmVydExpdGVyYXRlKGNvZGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5pZGVudGlmaWVyVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb2xvbiwgY29sb25PZmZzZXQsIGZvcmNlZElkZW50aWZpZXIsIGlkLCBpZExlbmd0aCwgaW5wdXQsIG1hdGNoLCBwb3BwZWRUb2tlbiwgcHJldiwgdGFnLCB0YWdUb2tlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIGlmICghKG1hdGNoID0gSURFTlRJRklFUi5leGVjKHRoaXMuY2h1bmspKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlucHV0ID0gbWF0Y2hbMF0sIGlkID0gbWF0Y2hbMV0sIGNvbG9uID0gbWF0Y2hbMl07XG4gICAgICBpZExlbmd0aCA9IGlkLmxlbmd0aDtcbiAgICAgIHBvcHBlZFRva2VuID0gdm9pZCAwO1xuICAgICAgaWYgKGlkID09PSAnb3duJyAmJiB0aGlzLnRhZygpID09PSAnRk9SJykge1xuICAgICAgICB0aGlzLnRva2VuKCdPV04nLCBpZCk7XG4gICAgICAgIHJldHVybiBpZC5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoaWQgPT09ICdmcm9tJyAmJiB0aGlzLnRhZygpID09PSAnWUlFTEQnKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ0ZST00nLCBpZCk7XG4gICAgICAgIHJldHVybiBpZC5sZW5ndGg7XG4gICAgICB9XG4gICAgICBmb3JjZWRJZGVudGlmaWVyID0gY29sb24gfHwgKHByZXYgPSBsYXN0KHRoaXMudG9rZW5zKSkgJiYgKCgoX3JlZjIgPSBwcmV2WzBdKSA9PT0gJy4nIHx8IF9yZWYyID09PSAnPy4nIHx8IF9yZWYyID09PSAnOjonIHx8IF9yZWYyID09PSAnPzo6JykgfHwgIXByZXYuc3BhY2VkICYmIHByZXZbMF0gPT09ICdAJykgJiYgaWQgIT09ICdkZWZlcic7XG4gICAgICB0YWcgPSAnSURFTlRJRklFUic7XG4gICAgICBpZiAoIWZvcmNlZElkZW50aWZpZXIgJiYgKF9faW5kZXhPZi5jYWxsKEpTX0tFWVdPUkRTLCBpZCkgPj0gMCB8fCBfX2luZGV4T2YuY2FsbChDT0ZGRUVfS0VZV09SRFMsIGlkKSA+PSAwKSkge1xuICAgICAgICB0YWcgPSBpZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAodGFnID09PSAnV0hFTicgJiYgKF9yZWYzID0gdGhpcy50YWcoKSwgX19pbmRleE9mLmNhbGwoTElORV9CUkVBSywgX3JlZjMpID49IDApKSB7XG4gICAgICAgICAgdGFnID0gJ0xFQURJTkdfV0hFTic7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAnRk9SJykge1xuICAgICAgICAgIHRoaXMuc2VlbkZvciA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAnVU5MRVNTJykge1xuICAgICAgICAgIHRhZyA9ICdJRic7XG4gICAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoVU5BUlksIHRhZykgPj0gMCkge1xuICAgICAgICAgIHRhZyA9ICdVTkFSWSc7XG4gICAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoUkVMQVRJT04sIHRhZykgPj0gMCkge1xuICAgICAgICAgIGlmICh0YWcgIT09ICdJTlNUQU5DRU9GJyAmJiB0aGlzLnNlZW5Gb3IpIHtcbiAgICAgICAgICAgIHRhZyA9ICdGT1InICsgdGFnO1xuICAgICAgICAgICAgdGhpcy5zZWVuRm9yID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhZyA9ICdSRUxBVElPTic7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSgpID09PSAnIScpIHtcbiAgICAgICAgICAgICAgcG9wcGVkVG9rZW4gPSB0aGlzLnRva2Vucy5wb3AoKTtcbiAgICAgICAgICAgICAgaWQgPSAnIScgKyBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChfX2luZGV4T2YuY2FsbChKU19GT1JCSURERU4sIGlkKSA+PSAwKSB7XG4gICAgICAgIGlmIChmb3JjZWRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgdGFnID0gJ0lERU5USUZJRVInO1xuICAgICAgICAgIGlkID0gbmV3IFN0cmluZyhpZCk7XG4gICAgICAgICAgaWQucmVzZXJ2ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKFJFU0VSVkVELCBpZCkgPj0gMCkge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXCJyZXNlcnZlZCB3b3JkIFxcXCJcIiArIGlkICsgXCJcXFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWZvcmNlZElkZW50aWZpZXIpIHtcbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKENPRkZFRV9BTElBU0VTLCBpZCkgPj0gMCkge1xuICAgICAgICAgIGlkID0gQ09GRkVFX0FMSUFTX01BUFtpZF07XG4gICAgICAgIH1cbiAgICAgICAgdGFnID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHN3aXRjaCAoaWQpIHtcbiAgICAgICAgICAgIGNhc2UgJyEnOlxuICAgICAgICAgICAgICByZXR1cm4gJ1VOQVJZJztcbiAgICAgICAgICAgIGNhc2UgJz09JzpcbiAgICAgICAgICAgIGNhc2UgJyE9JzpcbiAgICAgICAgICAgICAgcmV0dXJuICdDT01QQVJFJztcbiAgICAgICAgICAgIGNhc2UgJyYmJzpcbiAgICAgICAgICAgIGNhc2UgJ3x8JzpcbiAgICAgICAgICAgICAgcmV0dXJuICdMT0dJQyc7XG4gICAgICAgICAgICBjYXNlICd0cnVlJzpcbiAgICAgICAgICAgIGNhc2UgJ2ZhbHNlJzpcbiAgICAgICAgICAgICAgcmV0dXJuICdCT09MJztcbiAgICAgICAgICAgIGNhc2UgJ2JyZWFrJzpcbiAgICAgICAgICAgIGNhc2UgJ2NvbnRpbnVlJzpcbiAgICAgICAgICAgICAgcmV0dXJuICdTVEFURU1FTlQnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG4gICAgICB0YWdUb2tlbiA9IHRoaXMudG9rZW4odGFnLCBpZCwgMCwgaWRMZW5ndGgpO1xuICAgICAgaWYgKHBvcHBlZFRva2VuKSB7XG4gICAgICAgIF9yZWY0ID0gW3BvcHBlZFRva2VuWzJdLmZpcnN0X2xpbmUsIHBvcHBlZFRva2VuWzJdLmZpcnN0X2NvbHVtbl0sIHRhZ1Rva2VuWzJdLmZpcnN0X2xpbmUgPSBfcmVmNFswXSwgdGFnVG9rZW5bMl0uZmlyc3RfY29sdW1uID0gX3JlZjRbMV07XG4gICAgICB9XG4gICAgICBpZiAoY29sb24pIHtcbiAgICAgICAgY29sb25PZmZzZXQgPSBpbnB1dC5sYXN0SW5kZXhPZignOicpO1xuICAgICAgICB0aGlzLnRva2VuKCc6JywgJzonLCBjb2xvbk9mZnNldCwgY29sb24ubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbnB1dC5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5udW1iZXJUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJpbmFyeUxpdGVyYWwsIGxleGVkTGVuZ3RoLCBtYXRjaCwgbnVtYmVyLCBvY3RhbExpdGVyYWw7XG4gICAgICBpZiAoIShtYXRjaCA9IE5VTUJFUi5leGVjKHRoaXMuY2h1bmspKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIG51bWJlciA9IG1hdGNoWzBdO1xuICAgICAgaWYgKC9eMFtCT1hdLy50ZXN0KG51bWJlcikpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcInJhZGl4IHByZWZpeCAnXCIgKyBudW1iZXIgKyBcIicgbXVzdCBiZSBsb3dlcmNhc2VcIik7XG4gICAgICB9IGVsc2UgaWYgKC9FLy50ZXN0KG51bWJlcikgJiYgIS9eMHgvLnRlc3QobnVtYmVyKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwiZXhwb25lbnRpYWwgbm90YXRpb24gJ1wiICsgbnVtYmVyICsgXCInIG11c3QgYmUgaW5kaWNhdGVkIHdpdGggYSBsb3dlcmNhc2UgJ2UnXCIpO1xuICAgICAgfSBlbHNlIGlmICgvXjBcXGQqWzg5XS8udGVzdChudW1iZXIpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJkZWNpbWFsIGxpdGVyYWwgJ1wiICsgbnVtYmVyICsgXCInIG11c3Qgbm90IGJlIHByZWZpeGVkIHdpdGggJzAnXCIpO1xuICAgICAgfSBlbHNlIGlmICgvXjBcXGQrLy50ZXN0KG51bWJlcikpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcIm9jdGFsIGxpdGVyYWwgJ1wiICsgbnVtYmVyICsgXCInIG11c3QgYmUgcHJlZml4ZWQgd2l0aCAnMG8nXCIpO1xuICAgICAgfVxuICAgICAgbGV4ZWRMZW5ndGggPSBudW1iZXIubGVuZ3RoO1xuICAgICAgaWYgKG9jdGFsTGl0ZXJhbCA9IC9eMG8oWzAtN10rKS8uZXhlYyhudW1iZXIpKSB7XG4gICAgICAgIG51bWJlciA9ICcweCcgKyBwYXJzZUludChvY3RhbExpdGVyYWxbMV0sIDgpLnRvU3RyaW5nKDE2KTtcbiAgICAgIH1cbiAgICAgIGlmIChiaW5hcnlMaXRlcmFsID0gL14wYihbMDFdKykvLmV4ZWMobnVtYmVyKSkge1xuICAgICAgICBudW1iZXIgPSAnMHgnICsgcGFyc2VJbnQoYmluYXJ5TGl0ZXJhbFsxXSwgMikudG9TdHJpbmcoMTYpO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbignTlVNQkVSJywgbnVtYmVyLCAwLCBsZXhlZExlbmd0aCk7XG4gICAgICByZXR1cm4gbGV4ZWRMZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5zdHJpbmdUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlubmVyLCBpbm5lckxlbiwgbnVtQnJlYWssIG9jdGFsRXNjLCBwb3MsIHF1b3RlLCBzdHJpbmcsIHRyaW1tZWQ7XG4gICAgICBzd2l0Y2ggKHF1b3RlID0gdGhpcy5jaHVuay5jaGFyQXQoMCkpIHtcbiAgICAgICAgY2FzZSBcIidcIjpcbiAgICAgICAgICBzdHJpbmcgPSAoU0lNUExFU1RSLmV4ZWModGhpcy5jaHVuaykgfHwgW10pWzBdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdcIic6XG4gICAgICAgICAgc3RyaW5nID0gdGhpcy5iYWxhbmNlZFN0cmluZyh0aGlzLmNodW5rLCAnXCInKTtcbiAgICAgIH1cbiAgICAgIGlmICghc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaW5uZXIgPSBzdHJpbmcuc2xpY2UoMSwgLTEpO1xuICAgICAgdHJpbW1lZCA9IHRoaXMucmVtb3ZlTmV3bGluZXMoaW5uZXIpO1xuICAgICAgaWYgKHF1b3RlID09PSAnXCInICYmIDAgPCBzdHJpbmcuaW5kZXhPZignI3snLCAxKSkge1xuICAgICAgICBudW1CcmVhayA9IHBvcyA9IDA7XG4gICAgICAgIGlubmVyTGVuID0gaW5uZXIubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaW5uZXIuY2hhckF0KHBvcysrKSA9PT0gJ1xcbicgJiYgcG9zIDwgaW5uZXJMZW4pIHtcbiAgICAgICAgICBudW1CcmVhaysrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGVTdHJpbmcodHJpbW1lZCwge1xuICAgICAgICAgIHN0ck9mZnNldDogMSArIG51bUJyZWFrLFxuICAgICAgICAgIGxleGVkTGVuZ3RoOiBzdHJpbmcubGVuZ3RoXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b2tlbignU1RSSU5HJywgcXVvdGUgKyB0aGlzLmVzY2FwZUxpbmVzKHRyaW1tZWQpICsgcXVvdGUsIDAsIHN0cmluZy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgaWYgKG9jdGFsRXNjID0gL14oPzpcXFxcLnxbXlxcXFxdKSpcXFxcKD86MFswLTddfFsxLTddKS8udGVzdChzdHJpbmcpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJvY3RhbCBlc2NhcGUgc2VxdWVuY2VzIFwiICsgc3RyaW5nICsgXCIgYXJlIG5vdCBhbGxvd2VkXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5oZXJlZG9jVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkb2MsIGhlcmVkb2MsIG1hdGNoLCBxdW90ZSwgc3RyT2Zmc2V0O1xuICAgICAgaWYgKCEobWF0Y2ggPSBIRVJFRE9DLmV4ZWModGhpcy5jaHVuaykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaGVyZWRvYyA9IG1hdGNoWzBdO1xuICAgICAgcXVvdGUgPSBoZXJlZG9jLmNoYXJBdCgwKTtcbiAgICAgIGRvYyA9IHRoaXMuc2FuaXRpemVIZXJlZG9jKG1hdGNoWzJdLCB7XG4gICAgICAgIHF1b3RlOiBxdW90ZSxcbiAgICAgICAgaW5kZW50OiBudWxsXG4gICAgICB9KTtcbiAgICAgIGlmIChxdW90ZSA9PT0gJ1wiJyAmJiAwIDw9IGRvYy5pbmRleE9mKCcjeycpKSB7XG4gICAgICAgIHN0ck9mZnNldCA9IG1hdGNoWzJdLmNoYXJBdCgwKSA9PT0gJ1xcbicgPyA0IDogMztcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZVN0cmluZyhkb2MsIHtcbiAgICAgICAgICBoZXJlZG9jOiB0cnVlLFxuICAgICAgICAgIHN0ck9mZnNldDogc3RyT2Zmc2V0LFxuICAgICAgICAgIGxleGVkTGVuZ3RoOiBoZXJlZG9jLmxlbmd0aFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ1NUUklORycsIHRoaXMubWFrZVN0cmluZyhkb2MsIHF1b3RlLCB0cnVlKSwgMCwgaGVyZWRvYy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhlcmVkb2MubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuY29tbWVudFRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29tbWVudCwgaGVyZSwgbWF0Y2g7XG4gICAgICBpZiAoIShtYXRjaCA9IHRoaXMuY2h1bmsubWF0Y2goQ09NTUVOVCkpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgY29tbWVudCA9IG1hdGNoWzBdLCBoZXJlID0gbWF0Y2hbMV07XG4gICAgICBpZiAoaGVyZSkge1xuICAgICAgICB0aGlzLnRva2VuKCdIRVJFQ09NTUVOVCcsIHRoaXMuc2FuaXRpemVIZXJlZG9jKGhlcmUsIHtcbiAgICAgICAgICBoZXJlY29tbWVudDogdHJ1ZSxcbiAgICAgICAgICBpbmRlbnQ6IHJlcGVhdCgnICcsIHRoaXMuaW5kZW50KVxuICAgICAgICB9KSwgMCwgY29tbWVudC5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbW1lbnQubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuanNUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hdGNoLCBzY3JpcHQ7XG4gICAgICBpZiAoISh0aGlzLmNodW5rLmNoYXJBdCgwKSA9PT0gJ2AnICYmIChtYXRjaCA9IEpTVE9LRU4uZXhlYyh0aGlzLmNodW5rKSkpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbignSlMnLCAoc2NyaXB0ID0gbWF0Y2hbMF0pLnNsaWNlKDEsIC0xKSwgMCwgc2NyaXB0Lmxlbmd0aCk7XG4gICAgICByZXR1cm4gc2NyaXB0Lmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnJlZ2V4VG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBmbGFncywgbGVuZ3RoLCBtYXRjaCwgcHJldiwgcmVnZXgsIF9yZWYyLCBfcmVmMztcbiAgICAgIGlmICh0aGlzLmNodW5rLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKGxlbmd0aCA9IHRoaXMuaGVyZWdleFRva2VuKCkpIHtcbiAgICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHByZXYgPSBsYXN0KHRoaXMudG9rZW5zKTtcbiAgICAgIGlmIChwcmV2ICYmIChfcmVmMiA9IHByZXZbMF0sIF9faW5kZXhPZi5jYWxsKChwcmV2LnNwYWNlZCA/IE5PVF9SRUdFWCA6IE5PVF9TUEFDRURfUkVHRVgpLCBfcmVmMikgPj0gMCkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpZiAoIShtYXRjaCA9IFJFR0VYLmV4ZWModGhpcy5jaHVuaykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgX3JlZjMgPSBtYXRjaCwgbWF0Y2ggPSBfcmVmM1swXSwgcmVnZXggPSBfcmVmM1sxXSwgZmxhZ3MgPSBfcmVmM1syXTtcbiAgICAgIGlmIChyZWdleCA9PT0gJy8vJykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmIChyZWdleC5zbGljZSgwLCAyKSA9PT0gJy8qJykge1xuICAgICAgICB0aGlzLmVycm9yKCdyZWd1bGFyIGV4cHJlc3Npb25zIGNhbm5vdCBiZWdpbiB3aXRoIGAqYCcpO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbignUkVHRVgnLCBcIlwiICsgcmVnZXggKyBmbGFncywgMCwgbWF0Y2gubGVuZ3RoKTtcbiAgICAgIHJldHVybiBtYXRjaC5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5oZXJlZ2V4VG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib2R5LCBmbGFncywgZmxhZ3NPZmZzZXQsIGhlcmVnZXgsIG1hdGNoLCBwbHVzVG9rZW4sIHByZXYsIHJlLCB0YWcsIHRva2VuLCB0b2tlbnMsIHZhbHVlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIGlmICghKG1hdGNoID0gSEVSRUdFWC5leGVjKHRoaXMuY2h1bmspKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGhlcmVnZXggPSBtYXRjaFswXSwgYm9keSA9IG1hdGNoWzFdLCBmbGFncyA9IG1hdGNoWzJdO1xuICAgICAgaWYgKDAgPiBib2R5LmluZGV4T2YoJyN7JykpIHtcbiAgICAgICAgcmUgPSB0aGlzLmVzY2FwZUxpbmVzKGJvZHkucmVwbGFjZShIRVJFR0VYX09NSVQsICckMSQyJykucmVwbGFjZSgvXFwvL2csICdcXFxcLycpLCB0cnVlKTtcbiAgICAgICAgaWYgKHJlLm1hdGNoKC9eXFwqLykpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKCdyZWd1bGFyIGV4cHJlc3Npb25zIGNhbm5vdCBiZWdpbiB3aXRoIGAqYCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9rZW4oJ1JFR0VYJywgXCIvXCIgKyAocmUgfHwgJyg/OiknKSArIFwiL1wiICsgZmxhZ3MsIDAsIGhlcmVnZXgubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIGhlcmVnZXgubGVuZ3RoO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbignSURFTlRJRklFUicsICdSZWdFeHAnLCAwLCAwKTtcbiAgICAgIHRoaXMudG9rZW4oJ0NBTExfU1RBUlQnLCAnKCcsIDAsIDApO1xuICAgICAgdG9rZW5zID0gW107XG4gICAgICBfcmVmMiA9IHRoaXMuaW50ZXJwb2xhdGVTdHJpbmcoYm9keSwge1xuICAgICAgICByZWdleDogdHJ1ZSxcbiAgICAgICAgc3RyT2Zmc2V0OiAzXG4gICAgICB9KTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgdG9rZW4gPSBfcmVmMltfaV07XG4gICAgICAgIHRhZyA9IHRva2VuWzBdLCB2YWx1ZSA9IHRva2VuWzFdO1xuICAgICAgICBpZiAodGFnID09PSAnVE9LRU5TJykge1xuICAgICAgICAgIHRva2Vucy5wdXNoLmFwcGx5KHRva2VucywgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ05FT1NUUklORycpIHtcbiAgICAgICAgICBpZiAoISh2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoSEVSRUdFWF9PTUlULCAnJDEkMicpKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXC9nLCAnXFxcXFxcXFwnKTtcbiAgICAgICAgICB0b2tlblswXSA9ICdTVFJJTkcnO1xuICAgICAgICAgIHRva2VuWzFdID0gdGhpcy5tYWtlU3RyaW5nKHZhbHVlLCAnXCInLCB0cnVlKTtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihcIlVuZXhwZWN0ZWQgXCIgKyB0YWcpO1xuICAgICAgICB9XG4gICAgICAgIHByZXYgPSBsYXN0KHRoaXMudG9rZW5zKTtcbiAgICAgICAgcGx1c1Rva2VuID0gWycrJywgJysnXTtcbiAgICAgICAgcGx1c1Rva2VuWzJdID0gcHJldlsyXTtcbiAgICAgICAgdG9rZW5zLnB1c2gocGx1c1Rva2VuKTtcbiAgICAgIH1cbiAgICAgIHRva2Vucy5wb3AoKTtcbiAgICAgIGlmICgoKF9yZWYzID0gdG9rZW5zWzBdKSAhPSBudWxsID8gX3JlZjNbMF0gOiB2b2lkIDApICE9PSAnU1RSSU5HJykge1xuICAgICAgICB0aGlzLnRva2VuKCdTVFJJTkcnLCAnXCJcIicsIDAsIDApO1xuICAgICAgICB0aGlzLnRva2VuKCcrJywgJysnLCAwLCAwKTtcbiAgICAgIH1cbiAgICAgIChfcmVmNCA9IHRoaXMudG9rZW5zKS5wdXNoLmFwcGx5KF9yZWY0LCB0b2tlbnMpO1xuICAgICAgaWYgKGZsYWdzKSB7XG4gICAgICAgIGZsYWdzT2Zmc2V0ID0gaGVyZWdleC5sYXN0SW5kZXhPZihmbGFncyk7XG4gICAgICAgIHRoaXMudG9rZW4oJywnLCAnLCcsIGZsYWdzT2Zmc2V0LCAwKTtcbiAgICAgICAgdGhpcy50b2tlbignU1RSSU5HJywgJ1wiJyArIGZsYWdzICsgJ1wiJywgZmxhZ3NPZmZzZXQsIGZsYWdzLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICB0aGlzLnRva2VuKCcpJywgJyknLCBoZXJlZ2V4Lmxlbmd0aCAtIDEsIDApO1xuICAgICAgcmV0dXJuIGhlcmVnZXgubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUubGluZVRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGlmZiwgaW5kZW50LCBtYXRjaCwgbm9OZXdsaW5lcywgc2l6ZTtcbiAgICAgIGlmICghKG1hdGNoID0gTVVMVElfREVOVC5leGVjKHRoaXMuY2h1bmspKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGluZGVudCA9IG1hdGNoWzBdO1xuICAgICAgdGhpcy5zZWVuRm9yID0gZmFsc2U7XG4gICAgICBzaXplID0gaW5kZW50Lmxlbmd0aCAtIDEgLSBpbmRlbnQubGFzdEluZGV4T2YoJ1xcbicpO1xuICAgICAgbm9OZXdsaW5lcyA9IHRoaXMudW5maW5pc2hlZCgpO1xuICAgICAgaWYgKHNpemUgLSB0aGlzLmluZGVidCA9PT0gdGhpcy5pbmRlbnQpIHtcbiAgICAgICAgaWYgKG5vTmV3bGluZXMpIHtcbiAgICAgICAgICB0aGlzLnN1cHByZXNzTmV3bGluZXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm5ld2xpbmVUb2tlbigwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZW50Lmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChzaXplID4gdGhpcy5pbmRlbnQpIHtcbiAgICAgICAgaWYgKG5vTmV3bGluZXMpIHtcbiAgICAgICAgICB0aGlzLmluZGVidCA9IHNpemUgLSB0aGlzLmluZGVudDtcbiAgICAgICAgICB0aGlzLnN1cHByZXNzTmV3bGluZXMoKTtcbiAgICAgICAgICByZXR1cm4gaW5kZW50Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuYmFzZUluZGVudCA9IHRoaXMuaW5kZW50ID0gc2l6ZTtcbiAgICAgICAgICByZXR1cm4gaW5kZW50Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBkaWZmID0gc2l6ZSAtIHRoaXMuaW5kZW50ICsgdGhpcy5vdXRkZWJ0O1xuICAgICAgICB0aGlzLnRva2VuKCdJTkRFTlQnLCBkaWZmLCBpbmRlbnQubGVuZ3RoIC0gc2l6ZSwgc2l6ZSk7XG4gICAgICAgIHRoaXMuaW5kZW50cy5wdXNoKGRpZmYpO1xuICAgICAgICB0aGlzLmVuZHMucHVzaCgnT1VUREVOVCcpO1xuICAgICAgICB0aGlzLm91dGRlYnQgPSB0aGlzLmluZGVidCA9IDA7XG4gICAgICAgIHRoaXMuaW5kZW50ID0gc2l6ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2l6ZSA8IHRoaXMuYmFzZUluZGVudCkge1xuICAgICAgICB0aGlzLmVycm9yKCdtaXNzaW5nIGluZGVudGF0aW9uJywgaW5kZW50Lmxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmluZGVidCA9IDA7XG4gICAgICAgIHRoaXMub3V0ZGVudFRva2VuKHRoaXMuaW5kZW50IC0gc2l6ZSwgbm9OZXdsaW5lcywgaW5kZW50Lmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5kZW50Lmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLm91dGRlbnRUb2tlbiA9IGZ1bmN0aW9uKG1vdmVPdXQsIG5vTmV3bGluZXMsIG91dGRlbnRMZW5ndGgpIHtcbiAgICAgIHZhciBkZWNyZWFzZWRJbmRlbnQsIGRlbnQsIGxhc3RJbmRlbnQsIF9yZWYyO1xuICAgICAgZGVjcmVhc2VkSW5kZW50ID0gdGhpcy5pbmRlbnQgLSBtb3ZlT3V0O1xuICAgICAgd2hpbGUgKG1vdmVPdXQgPiAwKSB7XG4gICAgICAgIGxhc3RJbmRlbnQgPSB0aGlzLmluZGVudHNbdGhpcy5pbmRlbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoIWxhc3RJbmRlbnQpIHtcbiAgICAgICAgICBtb3ZlT3V0ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0SW5kZW50ID09PSB0aGlzLm91dGRlYnQpIHtcbiAgICAgICAgICBtb3ZlT3V0IC09IHRoaXMub3V0ZGVidDtcbiAgICAgICAgICB0aGlzLm91dGRlYnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGxhc3RJbmRlbnQgPCB0aGlzLm91dGRlYnQpIHtcbiAgICAgICAgICB0aGlzLm91dGRlYnQgLT0gbGFzdEluZGVudDtcbiAgICAgICAgICBtb3ZlT3V0IC09IGxhc3RJbmRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVudCA9IHRoaXMuaW5kZW50cy5wb3AoKSArIHRoaXMub3V0ZGVidDtcbiAgICAgICAgICBpZiAob3V0ZGVudExlbmd0aCAmJiAoX3JlZjIgPSB0aGlzLmNodW5rW291dGRlbnRMZW5ndGhdLCBfX2luZGV4T2YuY2FsbChJTkRFTlRBQkxFX0NMT1NFUlMsIF9yZWYyKSA+PSAwKSkge1xuICAgICAgICAgICAgZGVjcmVhc2VkSW5kZW50IC09IGRlbnQgLSBtb3ZlT3V0O1xuICAgICAgICAgICAgbW92ZU91dCA9IGRlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMub3V0ZGVidCA9IDA7XG4gICAgICAgICAgdGhpcy5wYWlyKCdPVVRERU5UJyk7XG4gICAgICAgICAgdGhpcy50b2tlbignT1VUREVOVCcsIG1vdmVPdXQsIDAsIG91dGRlbnRMZW5ndGgpO1xuICAgICAgICAgIG1vdmVPdXQgLT0gZGVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlbnQpIHtcbiAgICAgICAgdGhpcy5vdXRkZWJ0IC09IG1vdmVPdXQ7XG4gICAgICB9XG4gICAgICB3aGlsZSAodGhpcy52YWx1ZSgpID09PSAnOycpIHtcbiAgICAgICAgdGhpcy50b2tlbnMucG9wKCk7XG4gICAgICB9XG4gICAgICBpZiAoISh0aGlzLnRhZygpID09PSAnVEVSTUlOQVRPUicgfHwgbm9OZXdsaW5lcykpIHtcbiAgICAgICAgdGhpcy50b2tlbignVEVSTUlOQVRPUicsICdcXG4nLCBvdXRkZW50TGVuZ3RoLCAwKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZW50ID0gZGVjcmVhc2VkSW5kZW50O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS53aGl0ZXNwYWNlVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXRjaCwgbmxpbmUsIHByZXY7XG4gICAgICBpZiAoISgobWF0Y2ggPSBXSElURVNQQUNFLmV4ZWModGhpcy5jaHVuaykpIHx8IChubGluZSA9IHRoaXMuY2h1bmsuY2hhckF0KDApID09PSAnXFxuJykpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgcHJldiA9IGxhc3QodGhpcy50b2tlbnMpO1xuICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgcHJldlttYXRjaCA/ICdzcGFjZWQnIDogJ25ld0xpbmUnXSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUubmV3bGluZVRva2VuID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG4gICAgICB3aGlsZSAodGhpcy52YWx1ZSgpID09PSAnOycpIHtcbiAgICAgICAgdGhpcy50b2tlbnMucG9wKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy50YWcoKSAhPT0gJ1RFUk1JTkFUT1InKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ1RFUk1JTkFUT1InLCAnXFxuJywgb2Zmc2V0LCAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuc3VwcHJlc3NOZXdsaW5lcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMudmFsdWUoKSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnBvcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5saXRlcmFsVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXRjaCwgcHJldiwgdGFnLCB2YWx1ZSwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG4gICAgICBpZiAobWF0Y2ggPSBPUEVSQVRPUi5leGVjKHRoaXMuY2h1bmspKSB7XG4gICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgIGlmIChDT0RFLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy50YWdQYXJhbWV0ZXJzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5jaHVuay5jaGFyQXQoMCk7XG4gICAgICB9XG4gICAgICB0YWcgPSB2YWx1ZTtcbiAgICAgIHByZXYgPSBsYXN0KHRoaXMudG9rZW5zKTtcbiAgICAgIGlmICh2YWx1ZSA9PT0gJz0nICYmIHByZXYpIHtcbiAgICAgICAgaWYgKCFwcmV2WzFdLnJlc2VydmVkICYmIChfcmVmMiA9IHByZXZbMV0sIF9faW5kZXhPZi5jYWxsKEpTX0ZPUkJJRERFTiwgX3JlZjIpID49IDApKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihcInJlc2VydmVkIHdvcmQgXFxcIlwiICsgKHRoaXMudmFsdWUoKSkgKyBcIlxcXCIgY2FuJ3QgYmUgYXNzaWduZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfcmVmMyA9IHByZXZbMV0pID09PSAnfHwnIHx8IF9yZWYzID09PSAnJiYnKSB7XG4gICAgICAgICAgcHJldlswXSA9ICdDT01QT1VORF9BU1NJR04nO1xuICAgICAgICAgIHByZXZbMV0gKz0gJz0nO1xuICAgICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PT0gJzsnKSB7XG4gICAgICAgIHRoaXMuc2VlbkZvciA9IGZhbHNlO1xuICAgICAgICB0YWcgPSAnVEVSTUlOQVRPUic7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKE1BVEgsIHZhbHVlKSA+PSAwKSB7XG4gICAgICAgIHRhZyA9ICdNQVRIJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoQ09NUEFSRSwgdmFsdWUpID49IDApIHtcbiAgICAgICAgdGFnID0gJ0NPTVBBUkUnO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChDT01QT1VORF9BU1NJR04sIHZhbHVlKSA+PSAwKSB7XG4gICAgICAgIHRhZyA9ICdDT01QT1VORF9BU1NJR04nO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChVTkFSWSwgdmFsdWUpID49IDApIHtcbiAgICAgICAgdGFnID0gJ1VOQVJZJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoVU5BUllfTUFUSCwgdmFsdWUpID49IDApIHtcbiAgICAgICAgdGFnID0gJ1VOQVJZX01BVEgnO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChTSElGVCwgdmFsdWUpID49IDApIHtcbiAgICAgICAgdGFnID0gJ1NISUZUJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoTE9HSUMsIHZhbHVlKSA+PSAwIHx8IHZhbHVlID09PSAnPycgJiYgKHByZXYgIT0gbnVsbCA/IHByZXYuc3BhY2VkIDogdm9pZCAwKSkge1xuICAgICAgICB0YWcgPSAnTE9HSUMnO1xuICAgICAgfSBlbHNlIGlmIChwcmV2ICYmICFwcmV2LnNwYWNlZCkge1xuICAgICAgICBpZiAodmFsdWUgPT09ICcoJyAmJiAoX3JlZjQgPSBwcmV2WzBdLCBfX2luZGV4T2YuY2FsbChDQUxMQUJMRSwgX3JlZjQpID49IDApKSB7XG4gICAgICAgICAgaWYgKHByZXZbMF0gPT09ICc/Jykge1xuICAgICAgICAgICAgcHJldlswXSA9ICdGVU5DX0VYSVNUJztcbiAgICAgICAgICB9XG4gICAgICAgICAgdGFnID0gJ0NBTExfU1RBUlQnO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnWycgJiYgKF9yZWY1ID0gcHJldlswXSwgX19pbmRleE9mLmNhbGwoSU5ERVhBQkxFLCBfcmVmNSkgPj0gMCkpIHtcbiAgICAgICAgICB0YWcgPSAnSU5ERVhfU1RBUlQnO1xuICAgICAgICAgIHN3aXRjaCAocHJldlswXSkge1xuICAgICAgICAgICAgY2FzZSAnPyc6XG4gICAgICAgICAgICAgIHByZXZbMF0gPSAnSU5ERVhfU09BSyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgIGNhc2UgJygnOlxuICAgICAgICBjYXNlICd7JzpcbiAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgdGhpcy5lbmRzLnB1c2goSU5WRVJTRVNbdmFsdWVdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnKSc6XG4gICAgICAgIGNhc2UgJ30nOlxuICAgICAgICBjYXNlICddJzpcbiAgICAgICAgICB0aGlzLnBhaXIodmFsdWUpO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbih0YWcsIHZhbHVlKTtcbiAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5zYW5pdGl6ZUhlcmVkb2MgPSBmdW5jdGlvbihkb2MsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRlbXB0LCBoZXJlY29tbWVudCwgaW5kZW50LCBtYXRjaCwgX3JlZjI7XG4gICAgICBpbmRlbnQgPSBvcHRpb25zLmluZGVudCwgaGVyZWNvbW1lbnQgPSBvcHRpb25zLmhlcmVjb21tZW50O1xuICAgICAgaWYgKGhlcmVjb21tZW50KSB7XG4gICAgICAgIGlmIChIRVJFRE9DX0lMTEVHQUwudGVzdChkb2MpKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihcImJsb2NrIGNvbW1lbnQgY2Fubm90IGNvbnRhaW4gXFxcIiovXFxcIiwgc3RhcnRpbmdcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvYy5pbmRleE9mKCdcXG4nKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gZG9jO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAobWF0Y2ggPSBIRVJFRE9DX0lOREVOVC5leGVjKGRvYykpIHtcbiAgICAgICAgICBhdHRlbXB0ID0gbWF0Y2hbMV07XG4gICAgICAgICAgaWYgKGluZGVudCA9PT0gbnVsbCB8fCAoMCA8IChfcmVmMiA9IGF0dGVtcHQubGVuZ3RoKSAmJiBfcmVmMiA8IGluZGVudC5sZW5ndGgpKSB7XG4gICAgICAgICAgICBpbmRlbnQgPSBhdHRlbXB0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICBkb2MgPSBkb2MucmVwbGFjZShSZWdFeHAoXCJcXFxcblwiICsgaW5kZW50LCBcImdcIiksICdcXG4nKTtcbiAgICAgIH1cbiAgICAgIGlmICghaGVyZWNvbW1lbnQpIHtcbiAgICAgICAgZG9jID0gZG9jLnJlcGxhY2UoL15cXG4vLCAnJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9jO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUudGFnUGFyYW1ldGVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIHN0YWNrLCB0b2ssIHRva2VucztcbiAgICAgIGlmICh0aGlzLnRhZygpICE9PSAnKScpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBzdGFjayA9IFtdO1xuICAgICAgdG9rZW5zID0gdGhpcy50b2tlbnM7XG4gICAgICBpID0gdG9rZW5zLmxlbmd0aDtcbiAgICAgIHRva2Vuc1stLWldWzBdID0gJ1BBUkFNX0VORCc7XG4gICAgICB3aGlsZSAodG9rID0gdG9rZW5zWy0taV0pIHtcbiAgICAgICAgc3dpdGNoICh0b2tbMF0pIHtcbiAgICAgICAgICBjYXNlICcpJzpcbiAgICAgICAgICAgIHN0YWNrLnB1c2godG9rKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJygnOlxuICAgICAgICAgIGNhc2UgJ0NBTExfU1RBUlQnOlxuICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodG9rWzBdID09PSAnKCcpIHtcbiAgICAgICAgICAgICAgdG9rWzBdID0gJ1BBUkFNX1NUQVJUJztcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5jbG9zZUluZGVudGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5vdXRkZW50VG9rZW4odGhpcy5pbmRlbnQpO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuYmFsYW5jZWRTdHJpbmcgPSBmdW5jdGlvbihzdHIsIGVuZCkge1xuICAgICAgdmFyIGNvbnRpbnVlQ291bnQsIGksIGxldHRlciwgbWF0Y2gsIHByZXYsIHN0YWNrLCBfaSwgX3JlZjI7XG4gICAgICBjb250aW51ZUNvdW50ID0gMDtcbiAgICAgIHN0YWNrID0gW2VuZF07XG4gICAgICBmb3IgKGkgPSBfaSA9IDEsIF9yZWYyID0gc3RyLmxlbmd0aDsgMSA8PSBfcmVmMiA/IF9pIDwgX3JlZjIgOiBfaSA+IF9yZWYyOyBpID0gMSA8PSBfcmVmMiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgIGlmIChjb250aW51ZUNvdW50KSB7XG4gICAgICAgICAgLS1jb250aW51ZUNvdW50O1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobGV0dGVyID0gc3RyLmNoYXJBdChpKSkge1xuICAgICAgICAgIGNhc2UgJ1xcXFwnOlxuICAgICAgICAgICAgKytjb250aW51ZUNvdW50O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgY2FzZSBlbmQ6XG4gICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmICghc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzdHIuc2xpY2UoMCwgK2kgKyAxIHx8IDllOSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmQgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmQgPT09ICd9JyAmJiAobGV0dGVyID09PSAnXCInIHx8IGxldHRlciA9PT0gXCInXCIpKSB7XG4gICAgICAgICAgc3RhY2sucHVzaChlbmQgPSBsZXR0ZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGVuZCA9PT0gJ30nICYmIGxldHRlciA9PT0gJy8nICYmIChtYXRjaCA9IEhFUkVHRVguZXhlYyhzdHIuc2xpY2UoaSkpIHx8IFJFR0VYLmV4ZWMoc3RyLnNsaWNlKGkpKSkpIHtcbiAgICAgICAgICBjb250aW51ZUNvdW50ICs9IG1hdGNoWzBdLmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAnfScgJiYgbGV0dGVyID09PSAneycpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKGVuZCA9ICd9Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAnXCInICYmIHByZXYgPT09ICcjJyAmJiBsZXR0ZXIgPT09ICd7Jykge1xuICAgICAgICAgIHN0YWNrLnB1c2goZW5kID0gJ30nKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2ID0gbGV0dGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoXCJtaXNzaW5nIFwiICsgKHN0YWNrLnBvcCgpKSArIFwiLCBzdGFydGluZ1wiKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmludGVycG9sYXRlU3RyaW5nID0gZnVuY3Rpb24oc3RyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY29sdW1uLCBlcnJvclRva2VuLCBleHByLCBoZXJlZG9jLCBpLCBpbm5lciwgaW50ZXJwb2xhdGVkLCBsZW4sIGxldHRlciwgbGV4ZWRMZW5ndGgsIGxpbmUsIGxvY2F0aW9uVG9rZW4sIG5lc3RlZCwgb2Zmc2V0SW5DaHVuaywgcGksIHBsdXNUb2tlbiwgcG9wcGVkLCByZWdleCwgcnBhcmVuLCBzdHJPZmZzZXQsIHRhZywgdG9rZW4sIHRva2VucywgdmFsdWUsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBoZXJlZG9jID0gb3B0aW9ucy5oZXJlZG9jLCByZWdleCA9IG9wdGlvbnMucmVnZXgsIG9mZnNldEluQ2h1bmsgPSBvcHRpb25zLm9mZnNldEluQ2h1bmssIHN0ck9mZnNldCA9IG9wdGlvbnMuc3RyT2Zmc2V0LCBsZXhlZExlbmd0aCA9IG9wdGlvbnMubGV4ZWRMZW5ndGg7XG4gICAgICBvZmZzZXRJbkNodW5rIHx8IChvZmZzZXRJbkNodW5rID0gMCk7XG4gICAgICBzdHJPZmZzZXQgfHwgKHN0ck9mZnNldCA9IDApO1xuICAgICAgbGV4ZWRMZW5ndGggfHwgKGxleGVkTGVuZ3RoID0gc3RyLmxlbmd0aCk7XG4gICAgICB0b2tlbnMgPSBbXTtcbiAgICAgIHBpID0gMDtcbiAgICAgIGkgPSAtMTtcbiAgICAgIHdoaWxlIChsZXR0ZXIgPSBzdHIuY2hhckF0KGkgKz0gMSkpIHtcbiAgICAgICAgaWYgKGxldHRlciA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgaSArPSAxO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGxldHRlciA9PT0gJyMnICYmIHN0ci5jaGFyQXQoaSArIDEpID09PSAneycgJiYgKGV4cHIgPSB0aGlzLmJhbGFuY2VkU3RyaW5nKHN0ci5zbGljZShpICsgMSksICd9JykpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwaSA8IGkpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0aGlzLm1ha2VUb2tlbignTkVPU1RSSU5HJywgc3RyLnNsaWNlKHBpLCBpKSwgc3RyT2Zmc2V0ICsgcGkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVycm9yVG9rZW4pIHtcbiAgICAgICAgICBlcnJvclRva2VuID0gdGhpcy5tYWtlVG9rZW4oJycsICdzdHJpbmcgaW50ZXJwb2xhdGlvbicsIG9mZnNldEluQ2h1bmsgKyBpICsgMSwgMik7XG4gICAgICAgIH1cbiAgICAgICAgaW5uZXIgPSBleHByLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgaWYgKGlubmVyLmxlbmd0aCkge1xuICAgICAgICAgIF9yZWYyID0gdGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKHN0ck9mZnNldCArIGkgKyAyKSwgbGluZSA9IF9yZWYyWzBdLCBjb2x1bW4gPSBfcmVmMlsxXTtcbiAgICAgICAgICBuZXN0ZWQgPSBuZXcgTGV4ZXIoKS50b2tlbml6ZShpbm5lciwge1xuICAgICAgICAgICAgbGluZTogbGluZSxcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgICAgICAgcmV3cml0ZTogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwb3BwZWQgPSBuZXN0ZWQucG9wKCk7XG4gICAgICAgICAgaWYgKCgoX3JlZjMgPSBuZXN0ZWRbMF0pICE9IG51bGwgPyBfcmVmM1swXSA6IHZvaWQgMCkgPT09ICdURVJNSU5BVE9SJykge1xuICAgICAgICAgICAgcG9wcGVkID0gbmVzdGVkLnNoaWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChsZW4gPSBuZXN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgICBuZXN0ZWQudW5zaGlmdCh0aGlzLm1ha2VUb2tlbignKCcsICcoJywgc3RyT2Zmc2V0ICsgaSArIDEsIDApKTtcbiAgICAgICAgICAgICAgbmVzdGVkLnB1c2godGhpcy5tYWtlVG9rZW4oJyknLCAnKScsIHN0ck9mZnNldCArIGkgKyAxICsgaW5uZXIubGVuZ3RoLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b2tlbnMucHVzaChbJ1RPS0VOUycsIG5lc3RlZF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpICs9IGV4cHIubGVuZ3RoO1xuICAgICAgICBwaSA9IGkgKyAxO1xuICAgICAgfVxuICAgICAgaWYgKChpID4gcGkgJiYgcGkgPCBzdHIubGVuZ3RoKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh0aGlzLm1ha2VUb2tlbignTkVPU1RSSU5HJywgc3RyLnNsaWNlKHBpKSwgc3RyT2Zmc2V0ICsgcGkpKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWdleCkge1xuICAgICAgICByZXR1cm4gdG9rZW5zO1xuICAgICAgfVxuICAgICAgaWYgKCF0b2tlbnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuKCdTVFJJTkcnLCAnXCJcIicsIG9mZnNldEluQ2h1bmssIGxleGVkTGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0b2tlbnNbMF1bMF0gIT09ICdORU9TVFJJTkcnKSB7XG4gICAgICAgIHRva2Vucy51bnNoaWZ0KHRoaXMubWFrZVRva2VuKCdORU9TVFJJTkcnLCAnJywgb2Zmc2V0SW5DaHVuaykpO1xuICAgICAgfVxuICAgICAgaWYgKGludGVycG9sYXRlZCA9IHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJygnLCAnKCcsIG9mZnNldEluQ2h1bmssIDAsIGVycm9yVG9rZW4pO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gdG9rZW5zLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgdGFnID0gdG9rZW5bMF0sIHZhbHVlID0gdG9rZW5bMV07XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIHBsdXNUb2tlbiA9IHRoaXMudG9rZW4oJysnLCAnKycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsb2NhdGlvblRva2VuID0gdGFnID09PSAnVE9LRU5TJyA/IHZhbHVlWzBdIDogdG9rZW47XG4gICAgICAgICAgcGx1c1Rva2VuWzJdID0ge1xuICAgICAgICAgICAgZmlyc3RfbGluZTogbG9jYXRpb25Ub2tlblsyXS5maXJzdF9saW5lLFxuICAgICAgICAgICAgZmlyc3RfY29sdW1uOiBsb2NhdGlvblRva2VuWzJdLmZpcnN0X2NvbHVtbixcbiAgICAgICAgICAgIGxhc3RfbGluZTogbG9jYXRpb25Ub2tlblsyXS5maXJzdF9saW5lLFxuICAgICAgICAgICAgbGFzdF9jb2x1bW46IGxvY2F0aW9uVG9rZW5bMl0uZmlyc3RfY29sdW1uXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnID09PSAnVE9LRU5TJykge1xuICAgICAgICAgIChfcmVmNCA9IHRoaXMudG9rZW5zKS5wdXNoLmFwcGx5KF9yZWY0LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAnTkVPU1RSSU5HJykge1xuICAgICAgICAgIHRva2VuWzBdID0gJ1NUUklORyc7XG4gICAgICAgICAgdG9rZW5bMV0gPSB0aGlzLm1ha2VTdHJpbmcodmFsdWUsICdcIicsIGhlcmVkb2MpO1xuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXCJVbmV4cGVjdGVkIFwiICsgdGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGludGVycG9sYXRlZCkge1xuICAgICAgICBycGFyZW4gPSB0aGlzLm1ha2VUb2tlbignKScsICcpJywgb2Zmc2V0SW5DaHVuayArIGxleGVkTGVuZ3RoLCAwKTtcbiAgICAgICAgcnBhcmVuLnN0cmluZ0VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMudG9rZW5zLnB1c2gocnBhcmVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5wYWlyID0gZnVuY3Rpb24odGFnKSB7XG4gICAgICB2YXIgd2FudGVkO1xuICAgICAgaWYgKHRhZyAhPT0gKHdhbnRlZCA9IGxhc3QodGhpcy5lbmRzKSkpIHtcbiAgICAgICAgaWYgKCdPVVRERU5UJyAhPT0gd2FudGVkKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihcInVubWF0Y2hlZCBcIiArIHRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdXRkZW50VG9rZW4obGFzdCh0aGlzLmluZGVudHMpLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFpcih0YWcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZW5kcy5wb3AoKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsgPSBmdW5jdGlvbihvZmZzZXQpIHtcbiAgICAgIHZhciBjb2x1bW4sIGxpbmVDb3VudCwgbGluZXMsIHN0cmluZztcbiAgICAgIGlmIChvZmZzZXQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmNodW5rTGluZSwgdGhpcy5jaHVua0NvbHVtbl07XG4gICAgICB9XG4gICAgICBpZiAob2Zmc2V0ID49IHRoaXMuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgIHN0cmluZyA9IHRoaXMuY2h1bms7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHJpbmcgPSB0aGlzLmNodW5rLnNsaWNlKDAsICsob2Zmc2V0IC0gMSkgKyAxIHx8IDllOSk7XG4gICAgICB9XG4gICAgICBsaW5lQ291bnQgPSBjb3VudChzdHJpbmcsICdcXG4nKTtcbiAgICAgIGNvbHVtbiA9IHRoaXMuY2h1bmtDb2x1bW47XG4gICAgICBpZiAobGluZUNvdW50ID4gMCkge1xuICAgICAgICBsaW5lcyA9IHN0cmluZy5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGNvbHVtbiA9IGxhc3QobGluZXMpLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbHVtbiArPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt0aGlzLmNodW5rTGluZSArIGxpbmVDb3VudCwgY29sdW1uXTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLm1ha2VUb2tlbiA9IGZ1bmN0aW9uKHRhZywgdmFsdWUsIG9mZnNldEluQ2h1bmssIGxlbmd0aCkge1xuICAgICAgdmFyIGxhc3RDaGFyYWN0ZXIsIGxvY2F0aW9uRGF0YSwgdG9rZW4sIF9yZWYyLCBfcmVmMztcbiAgICAgIGlmIChvZmZzZXRJbkNodW5rID09IG51bGwpIHtcbiAgICAgICAgb2Zmc2V0SW5DaHVuayA9IDA7XG4gICAgICB9XG4gICAgICBpZiAobGVuZ3RoID09IG51bGwpIHtcbiAgICAgICAgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgfVxuICAgICAgbG9jYXRpb25EYXRhID0ge307XG4gICAgICBfcmVmMiA9IHRoaXMuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayhvZmZzZXRJbkNodW5rKSwgbG9jYXRpb25EYXRhLmZpcnN0X2xpbmUgPSBfcmVmMlswXSwgbG9jYXRpb25EYXRhLmZpcnN0X2NvbHVtbiA9IF9yZWYyWzFdO1xuICAgICAgbGFzdENoYXJhY3RlciA9IE1hdGgubWF4KDAsIGxlbmd0aCAtIDEpO1xuICAgICAgX3JlZjMgPSB0aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsob2Zmc2V0SW5DaHVuayArIGxhc3RDaGFyYWN0ZXIpLCBsb2NhdGlvbkRhdGEubGFzdF9saW5lID0gX3JlZjNbMF0sIGxvY2F0aW9uRGF0YS5sYXN0X2NvbHVtbiA9IF9yZWYzWzFdO1xuICAgICAgdG9rZW4gPSBbdGFnLCB2YWx1ZSwgbG9jYXRpb25EYXRhXTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnRva2VuID0gZnVuY3Rpb24odGFnLCB2YWx1ZSwgb2Zmc2V0SW5DaHVuaywgbGVuZ3RoLCBvcmlnaW4pIHtcbiAgICAgIHZhciB0b2tlbjtcbiAgICAgIHRva2VuID0gdGhpcy5tYWtlVG9rZW4odGFnLCB2YWx1ZSwgb2Zmc2V0SW5DaHVuaywgbGVuZ3RoKTtcbiAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgdG9rZW4ub3JpZ2luID0gb3JpZ2luO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS50YWcgPSBmdW5jdGlvbihpbmRleCwgdGFnKSB7XG4gICAgICB2YXIgdG9rO1xuICAgICAgcmV0dXJuICh0b2sgPSBsYXN0KHRoaXMudG9rZW5zLCBpbmRleCkpICYmICh0YWcgPyB0b2tbMF0gPSB0YWcgOiB0b2tbMF0pO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbihpbmRleCwgdmFsKSB7XG4gICAgICB2YXIgdG9rO1xuICAgICAgcmV0dXJuICh0b2sgPSBsYXN0KHRoaXMudG9rZW5zLCBpbmRleCkpICYmICh2YWwgPyB0b2tbMV0gPSB2YWwgOiB0b2tbMV0pO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUudW5maW5pc2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIExJTkVfQ09OVElOVUVSLnRlc3QodGhpcy5jaHVuaykgfHwgKChfcmVmMiA9IHRoaXMudGFnKCkpID09PSAnXFxcXCcgfHwgX3JlZjIgPT09ICcuJyB8fCBfcmVmMiA9PT0gJz8uJyB8fCBfcmVmMiA9PT0gJz86OicgfHwgX3JlZjIgPT09ICdVTkFSWScgfHwgX3JlZjIgPT09ICdNQVRIJyB8fCBfcmVmMiA9PT0gJ1VOQVJZX01BVEgnIHx8IF9yZWYyID09PSAnKycgfHwgX3JlZjIgPT09ICctJyB8fCBfcmVmMiA9PT0gJ1lJRUxEJyB8fCBfcmVmMiA9PT0gJyoqJyB8fCBfcmVmMiA9PT0gJ1NISUZUJyB8fCBfcmVmMiA9PT0gJ1JFTEFUSU9OJyB8fCBfcmVmMiA9PT0gJ0NPTVBBUkUnIHx8IF9yZWYyID09PSAnTE9HSUMnIHx8IF9yZWYyID09PSAnVEhST1cnIHx8IF9yZWYyID09PSAnRVhURU5EUycpO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUucmVtb3ZlTmV3bGluZXMgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXlxccypcXG5cXHMqLywgJycpLnJlcGxhY2UoLyhbXlxcXFxdfFxcXFxcXFxcKVxccypcXG5cXHMqJC8sICckMScpO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuZXNjYXBlTGluZXMgPSBmdW5jdGlvbihzdHIsIGhlcmVkb2MpIHtcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXFxcW15cXFNcXG5dKihcXG58XFxcXClcXHMqL2csIGZ1bmN0aW9uKGVzY2FwZWQsIGNoYXJhY3Rlcikge1xuICAgICAgICBpZiAoY2hhcmFjdGVyID09PSAnXFxuJykge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZXNjYXBlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoaGVyZWRvYykge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoTVVMVElMSU5FUiwgJ1xcXFxuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xccypcXG5cXHMqL2csICcgJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5tYWtlU3RyaW5nID0gZnVuY3Rpb24oYm9keSwgcXVvdGUsIGhlcmVkb2MpIHtcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICByZXR1cm4gcXVvdGUgKyBxdW90ZTtcbiAgICAgIH1cbiAgICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoUmVnRXhwKFwiXFxcXFxcXFwoXCIgKyBxdW90ZSArIFwifFxcXFxcXFxcKVwiLCBcImdcIiksIGZ1bmN0aW9uKG1hdGNoLCBjb250ZW50cykge1xuICAgICAgICBpZiAoY29udGVudHMgPT09IHF1b3RlKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRlbnRzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBib2R5ID0gYm9keS5yZXBsYWNlKFJlZ0V4cChcIlwiICsgcXVvdGUsIFwiZ1wiKSwgJ1xcXFwkJicpO1xuICAgICAgcmV0dXJuIHF1b3RlICsgdGhpcy5lc2NhcGVMaW5lcyhib2R5LCBoZXJlZG9jKSArIHF1b3RlO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlLCBvZmZzZXQpIHtcbiAgICAgIHZhciBmaXJzdF9jb2x1bW4sIGZpcnN0X2xpbmUsIF9yZWYyO1xuICAgICAgaWYgKG9mZnNldCA9PSBudWxsKSB7XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICB9XG4gICAgICBfcmVmMiA9IHRoaXMuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayhvZmZzZXQpLCBmaXJzdF9saW5lID0gX3JlZjJbMF0sIGZpcnN0X2NvbHVtbiA9IF9yZWYyWzFdO1xuICAgICAgcmV0dXJuIHRocm93U3ludGF4RXJyb3IobWVzc2FnZSwge1xuICAgICAgICBmaXJzdF9saW5lOiBmaXJzdF9saW5lLFxuICAgICAgICBmaXJzdF9jb2x1bW46IGZpcnN0X2NvbHVtblxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBMZXhlcjtcblxuICB9KSgpO1xuXG4gIEpTX0tFWVdPUkRTID0gWyd0cnVlJywgJ2ZhbHNlJywgJ251bGwnLCAndGhpcycsICduZXcnLCAnZGVsZXRlJywgJ3R5cGVvZicsICdpbicsICdpbnN0YW5jZW9mJywgJ3JldHVybicsICd0aHJvdycsICdicmVhaycsICdjb250aW51ZScsICdkZWJ1Z2dlcicsICd5aWVsZCcsICdpZicsICdlbHNlJywgJ3N3aXRjaCcsICdmb3InLCAnd2hpbGUnLCAnZG8nLCAndHJ5JywgJ2NhdGNoJywgJ2ZpbmFsbHknLCAnY2xhc3MnLCAnZXh0ZW5kcycsICdzdXBlciddO1xuXG4gIENPRkZFRV9LRVlXT1JEUyA9IFsndW5kZWZpbmVkJywgJ3RoZW4nLCAndW5sZXNzJywgJ3VudGlsJywgJ2xvb3AnLCAnb2YnLCAnYnknLCAnd2hlbiddO1xuXG4gIENPRkZFRV9LRVlXT1JEUyA9IENPRkZFRV9LRVlXT1JEUy5jb25jYXQoWydhd2FpdCcsICdkZWZlciddKTtcblxuICBDT0ZGRUVfQUxJQVNfTUFQID0ge1xuICAgIGFuZDogJyYmJyxcbiAgICBvcjogJ3x8JyxcbiAgICBpczogJz09JyxcbiAgICBpc250OiAnIT0nLFxuICAgIG5vdDogJyEnLFxuICAgIHllczogJ3RydWUnLFxuICAgIG5vOiAnZmFsc2UnLFxuICAgIG9uOiAndHJ1ZScsXG4gICAgb2ZmOiAnZmFsc2UnXG4gIH07XG5cbiAgQ09GRkVFX0FMSUFTRVMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9yZXN1bHRzO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChrZXkgaW4gQ09GRkVFX0FMSUFTX01BUCkge1xuICAgICAgX3Jlc3VsdHMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH0pKCk7XG5cbiAgQ09GRkVFX0tFWVdPUkRTID0gQ09GRkVFX0tFWVdPUkRTLmNvbmNhdChDT0ZGRUVfQUxJQVNFUyk7XG5cbiAgUkVTRVJWRUQgPSBbJ2Nhc2UnLCAnZGVmYXVsdCcsICdmdW5jdGlvbicsICd2YXInLCAndm9pZCcsICd3aXRoJywgJ2NvbnN0JywgJ2xldCcsICdlbnVtJywgJ2V4cG9ydCcsICdpbXBvcnQnLCAnbmF0aXZlJywgJ19faGFzUHJvcCcsICdfX2V4dGVuZHMnLCAnX19zbGljZScsICdfX2JpbmQnLCAnX19pbmRleE9mJywgJ2ltcGxlbWVudHMnLCAnaW50ZXJmYWNlJywgJ3BhY2thZ2UnLCAncHJpdmF0ZScsICdwcm90ZWN0ZWQnLCAncHVibGljJywgJ3N0YXRpYyddO1xuXG4gIFNUUklDVF9QUk9TQ1JJQkVEID0gWydhcmd1bWVudHMnLCAnZXZhbCcsICd5aWVsZConXTtcblxuICBKU19GT1JCSURERU4gPSBKU19LRVlXT1JEUy5jb25jYXQoUkVTRVJWRUQpLmNvbmNhdChTVFJJQ1RfUFJPU0NSSUJFRCk7XG5cbiAgZXhwb3J0cy5SRVNFUlZFRCA9IFJFU0VSVkVELmNvbmNhdChKU19LRVlXT1JEUykuY29uY2F0KENPRkZFRV9LRVlXT1JEUykuY29uY2F0KFNUUklDVF9QUk9TQ1JJQkVEKTtcblxuICBleHBvcnRzLlNUUklDVF9QUk9TQ1JJQkVEID0gU1RSSUNUX1BST1NDUklCRUQ7XG5cbiAgQk9NID0gNjUyNzk7XG5cbiAgSURFTlRJRklFUiA9IC9eKFskQS1aYS16X1xceDdmLVxcdWZmZmZdWyRcXHdcXHg3Zi1cXHVmZmZmXSopKFteXFxuXFxTXSo6KD8hOikpPy87XG5cbiAgTlVNQkVSID0gL14wYlswMV0rfF4wb1swLTddK3xeMHhbXFxkYS1mXSt8XlxcZCpcXC4/XFxkKyg/OmVbKy1dP1xcZCspPy9pO1xuXG4gIEhFUkVET0MgPSAvXihcIlwiXCJ8JycnKSgoPzpcXFxcW1xcc1xcU118W15cXFxcXSkqPykoPzpcXG5bXlxcblxcU10qKT9cXDEvO1xuXG4gIE9QRVJBVE9SID0gL14oPzpbLT1dPnxbLSsqXFwvJTw+JnxeIT89XT18Pj4+PT98KFstKzpdKVxcMXwoWyZ8PD4qXFwvJV0pXFwyPT98XFw/KFxcLnw6Oil8XFwuezIsM30pLztcblxuICBXSElURVNQQUNFID0gL15bXlxcblxcU10rLztcblxuICBDT01NRU5UID0gL14jIyMoW14jXVtcXHNcXFNdKj8pKD86IyMjW15cXG5cXFNdKnwjIyMkKXxeKD86XFxzKiMoPyEjI1teI10pLiopKy87XG5cbiAgQ09ERSA9IC9eWy09XT4vO1xuXG4gIE1VTFRJX0RFTlQgPSAvXig/OlxcblteXFxuXFxTXSopKy87XG5cbiAgU0lNUExFU1RSID0gL14nW15cXFxcJ10qKD86XFxcXFtcXHNcXFNdW15cXFxcJ10qKSonLztcblxuICBKU1RPS0VOID0gL15gW15cXFxcYF0qKD86XFxcXC5bXlxcXFxgXSopKmAvO1xuXG4gIFJFR0VYID0gL14oXFwvKD8hW1xccz1dKVteW1xcL1xcblxcXFxdKig/Oig/OlxcXFxbXFxzXFxTXXxcXFtbXlxcXVxcblxcXFxdKig/OlxcXFxbXFxzXFxTXVteXFxdXFxuXFxcXF0qKSpdKVteW1xcL1xcblxcXFxdKikqXFwvKShbaW1neV17MCw0fSkoPyFcXHcpLztcblxuICBIRVJFR0VYID0gL15cXC97M30oKD86XFxcXD9bXFxzXFxTXSkrPylcXC97M30oW2ltZ3ldezAsNH0pKD8hXFx3KS87XG5cbiAgSEVSRUdFWF9PTUlUID0gLygoPzpcXFxcXFxcXCkrKXxcXFxcKFxcc3xcXC8pfFxccysoPzojLiopPy9nO1xuXG4gIE1VTFRJTElORVIgPSAvXFxuL2c7XG5cbiAgSEVSRURPQ19JTkRFTlQgPSAvXFxuKyhbXlxcblxcU10qKS9nO1xuXG4gIEhFUkVET0NfSUxMRUdBTCA9IC9cXCpcXC8vO1xuXG4gIExJTkVfQ09OVElOVUVSID0gL15cXHMqKD86LHxcXD8/XFwuKD8hWy5cXGRdKXw6OikvO1xuXG4gIFRSQUlMSU5HX1NQQUNFUyA9IC9cXHMrJC87XG5cbiAgQ09NUE9VTkRfQVNTSUdOID0gWyctPScsICcrPScsICcvPScsICcqPScsICclPScsICd8fD0nLCAnJiY9JywgJz89JywgJzw8PScsICc+Pj0nLCAnPj4+PScsICcmPScsICdePScsICd8PScsICcqKj0nLCAnLy89JywgJyUlPSddO1xuXG4gIFVOQVJZID0gWydORVcnLCAnVFlQRU9GJywgJ0RFTEVURScsICdETyddO1xuXG4gIFVOQVJZX01BVEggPSBbJyEnLCAnfiddO1xuXG4gIExPR0lDID0gWycmJicsICd8fCcsICcmJywgJ3wnLCAnXiddO1xuXG4gIFNISUZUID0gWyc8PCcsICc+PicsICc+Pj4nXTtcblxuICBDT01QQVJFID0gWyc9PScsICchPScsICc8JywgJz4nLCAnPD0nLCAnPj0nXTtcblxuICBNQVRIID0gWycqJywgJy8nLCAnJScsICcvLycsICclJSddO1xuXG4gIFJFTEFUSU9OID0gWydJTicsICdPRicsICdJTlNUQU5DRU9GJ107XG5cbiAgQk9PTCA9IFsnVFJVRScsICdGQUxTRSddO1xuXG4gIE5PVF9SRUdFWCA9IFsnTlVNQkVSJywgJ1JFR0VYJywgJ0JPT0wnLCAnTlVMTCcsICdVTkRFRklORUQnLCAnKysnLCAnLS0nXTtcblxuICBOT1RfU1BBQ0VEX1JFR0VYID0gTk9UX1JFR0VYLmNvbmNhdCgnKScsICd9JywgJ1RISVMnLCAnSURFTlRJRklFUicsICdTVFJJTkcnLCAnXScpO1xuXG4gIENBTExBQkxFID0gWydJREVOVElGSUVSJywgJ1NUUklORycsICdSRUdFWCcsICcpJywgJ10nLCAnfScsICc/JywgJzo6JywgJ0AnLCAnVEhJUycsICdTVVBFUiddO1xuXG4gIElOREVYQUJMRSA9IENBTExBQkxFLmNvbmNhdCgnTlVNQkVSJywgJ0JPT0wnLCAnTlVMTCcsICdVTkRFRklORUQnKTtcblxuICBMSU5FX0JSRUFLID0gWydJTkRFTlQnLCAnT1VUREVOVCcsICdURVJNSU5BVE9SJ107XG5cbiAgSU5ERU5UQUJMRV9DTE9TRVJTID0gWycpJywgJ30nLCAnXSddO1xuXG4gIENBTExBQkxFLnB1c2goJ0RFRkVSJyk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQWNjZXNzLCBBcnIsIEFzc2lnbiwgQXdhaXQsIEJhc2UsIEJsb2NrLCBDYWxsLCBDbGFzcywgQ2xvc3VyZSwgQ29kZSwgQ29kZUZyYWdtZW50LCBDb21tZW50LCBDcHNDYXNjYWRlLCBEZWZlciwgRXhpc3RlbmNlLCBFeHBhbnNpb24sIEV4dGVuZHMsIEZvciwgSEVYTlVNLCBJREVOVElGSUVSLCBJREVOVElGSUVSX1NUUiwgSVNfUkVHRVgsIElTX1NUUklORywgSWNlZFJldHVyblZhbHVlLCBJY2VkUnVudGltZSwgSWNlZFRhaWxDYWxsLCBJZiwgSW4sIEluZGV4LCBJbmxpbmVSdW50aW1lLCBMRVZFTF9BQ0NFU1MsIExFVkVMX0NPTkQsIExFVkVMX0xJU1QsIExFVkVMX09QLCBMRVZFTF9QQVJFTiwgTEVWRUxfVE9QLCBMaXRlcmFsLCBNRVRIT0RfREVGLCBORUdBVEUsIE5PLCBOVUxMLCBOVU1CRVIsIE9iaiwgT3AsIFBhcmFtLCBQYXJlbnMsIFJFU0VSVkVELCBSYW5nZSwgUmV0dXJuLCBTSU1QTEVOVU0sIFNUUklDVF9QUk9TQ1JJQkVELCBTY29wZSwgU2xpY2UsIFNsb3QsIFNwbGF0LCBTd2l0Y2gsIFRBQiwgVEhJUywgVGhyb3csIFRyeSwgVVRJTElUSUVTLCBWYWx1ZSwgV2hpbGUsIFlFUywgYWRkTG9jYXRpb25EYXRhRm4sIGNvbXBhY3QsIGRlbCwgZW5kcywgZXh0ZW5kLCBmbGF0dGVuLCBmcmFnbWVudHNUb1RleHQsIGljZWQsIGlzTGl0ZXJhbEFyZ3VtZW50cywgaXNMaXRlcmFsVGhpcywgbGFzdCwgbG9jYXRpb25EYXRhVG9TdHJpbmcsIG1lcmdlLCBtdWx0aWRlbnQsIHBhcnNlTnVtLCBwYXRobW9kLCBxdW90ZV9mdW5jbmFtZV9mb3JfZGVidWcsIHF1b3RlX3BhdGhfZm9yX2VtaXNzaW9uLCByZXF1aXJlX3RvcF9kaXIsIHNvbWUsIHN0YXJ0cywgdGhyb3dTeW50YXhFcnJvciwgdW5mb2xkU29haywgdXRpbGl0eSwgX3JlZiwgX3JlZjEsXG4gICAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH0sXG4gICAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG4gIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9IEluZmluaXR5O1xuXG4gIFNjb3BlID0gcmVxdWlyZSgnLi9zY29wZScpLlNjb3BlO1xuXG4gIF9yZWYgPSByZXF1aXJlKCcuL2xleGVyJyksIFJFU0VSVkVEID0gX3JlZi5SRVNFUlZFRCwgU1RSSUNUX1BST1NDUklCRUQgPSBfcmVmLlNUUklDVF9QUk9TQ1JJQkVEO1xuXG4gIGljZWQgPSByZXF1aXJlKCdpY2VkLXJ1bnRpbWUnKTtcblxuICBwYXRobW9kID0gcmVxdWlyZSgncGF0aCcpO1xuXG4gIF9yZWYxID0gcmVxdWlyZSgnLi9oZWxwZXJzJyksIGNvbXBhY3QgPSBfcmVmMS5jb21wYWN0LCBmbGF0dGVuID0gX3JlZjEuZmxhdHRlbiwgZXh0ZW5kID0gX3JlZjEuZXh0ZW5kLCBtZXJnZSA9IF9yZWYxLm1lcmdlLCBkZWwgPSBfcmVmMS5kZWwsIHN0YXJ0cyA9IF9yZWYxLnN0YXJ0cywgZW5kcyA9IF9yZWYxLmVuZHMsIGxhc3QgPSBfcmVmMS5sYXN0LCBzb21lID0gX3JlZjEuc29tZSwgYWRkTG9jYXRpb25EYXRhRm4gPSBfcmVmMS5hZGRMb2NhdGlvbkRhdGFGbiwgbG9jYXRpb25EYXRhVG9TdHJpbmcgPSBfcmVmMS5sb2NhdGlvbkRhdGFUb1N0cmluZywgdGhyb3dTeW50YXhFcnJvciA9IF9yZWYxLnRocm93U3ludGF4RXJyb3I7XG5cbiAgZXhwb3J0cy5leHRlbmQgPSBleHRlbmQ7XG5cbiAgZXhwb3J0cy5hZGRMb2NhdGlvbkRhdGFGbiA9IGFkZExvY2F0aW9uRGF0YUZuO1xuXG4gIFlFUyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIE5PID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIFRISVMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBORUdBVEUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm5lZ2F0ZWQgPSAhdGhpcy5uZWdhdGVkO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIE5VTEwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKCdudWxsJykpO1xuICB9O1xuXG4gIGV4cG9ydHMuQ29kZUZyYWdtZW50ID0gQ29kZUZyYWdtZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIENvZGVGcmFnbWVudChwYXJlbnQsIGNvZGUpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHRoaXMuY29kZSA9IFwiXCIgKyBjb2RlO1xuICAgICAgdGhpcy5sb2NhdGlvbkRhdGEgPSBwYXJlbnQgIT0gbnVsbCA/IHBhcmVudC5sb2NhdGlvbkRhdGEgOiB2b2lkIDA7XG4gICAgICB0aGlzLnR5cGUgPSAocGFyZW50ICE9IG51bGwgPyAoX3JlZjIgPSBwYXJlbnQuY29uc3RydWN0b3IpICE9IG51bGwgPyBfcmVmMi5uYW1lIDogdm9pZCAwIDogdm9pZCAwKSB8fCAndW5rbm93bic7XG4gICAgfVxuXG4gICAgQ29kZUZyYWdtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB0aGlzLmNvZGUgKyAodGhpcy5sb2NhdGlvbkRhdGEgPyBcIjogXCIgKyBsb2NhdGlvbkRhdGFUb1N0cmluZyh0aGlzLmxvY2F0aW9uRGF0YSkgOiAnJyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb2RlRnJhZ21lbnQ7XG5cbiAgfSkoKTtcblxuICBmcmFnbWVudHNUb1RleHQgPSBmdW5jdGlvbihmcmFnbWVudHMpIHtcbiAgICB2YXIgZnJhZ21lbnQ7XG4gICAgcmV0dXJuICgoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2ksIF9sZW4sIF9yZXN1bHRzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gZnJhZ21lbnRzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnRzW19pXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChmcmFnbWVudC5jb2RlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpKS5qb2luKCcnKTtcbiAgfTtcblxuICBleHBvcnRzLkJhc2UgPSBCYXNlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIEJhc2UoKSB7XG4gICAgICB0aGlzLmljZWRDb250aW51YXRpb25CbG9jayA9IG51bGw7XG4gICAgICB0aGlzLmljZWRMb29wRmxhZyA9IGZhbHNlO1xuICAgICAgdGhpcy5pY2VkTm9kZUZsYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaWNlZEdvdENwc1NwbGl0RmxhZyA9IGZhbHNlO1xuICAgICAgdGhpcy5pY2VkQ3BzUGl2b3RGbGFnID0gZmFsc2U7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gZmFsc2U7XG4gICAgICB0aGlzLmljZWRGb3VuZEFyZ3VtZW50cyA9IGZhbHNlO1xuICAgICAgdGhpcy5pY2VkUGFyZW50QXdhaXQgPSBudWxsO1xuICAgICAgdGhpcy5pY2VkQ2FsbENvbnRpbnVhdGlvbkZsYWcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24obywgbHZsKSB7XG4gICAgICByZXR1cm4gZnJhZ21lbnRzVG9UZXh0KHRoaXMuY29tcGlsZVRvRnJhZ21lbnRzKG8sIGx2bCkpO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvLCBsdmwpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgbyA9IGV4dGVuZCh7fSwgbyk7XG4gICAgICBpZiAobHZsKSB7XG4gICAgICAgIG8ubGV2ZWwgPSBsdmw7XG4gICAgICB9XG4gICAgICBub2RlID0gdGhpcy51bmZvbGRTb2FrKG8pIHx8IHRoaXM7XG4gICAgICBub2RlLnRhYiA9IG8uaW5kZW50O1xuICAgICAgaWYgKG5vZGUuaWNlZEhhc0NvbnRpbnVhdGlvbigpICYmICFub2RlLmljZWRHb3RDcHNTcGxpdEZsYWcpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuaWNlZENvbXBpbGVDcHMobyk7XG4gICAgICB9IGVsc2UgaWYgKG8ubGV2ZWwgPT09IExFVkVMX1RPUCB8fCAhbm9kZS5pc1N0YXRlbWVudChvKSkge1xuICAgICAgICByZXR1cm4gbm9kZS5jb21waWxlTm9kZShvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlLmNvbXBpbGVDbG9zdXJlKG8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jb21waWxlQ2xvc3VyZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhcmdzLCBhcmd1bWVudHNOb2RlLCBmdW5jLCBqdW1wTm9kZSwgbWV0aDtcbiAgICAgIGlmIChqdW1wTm9kZSA9IHRoaXMuanVtcHMoKSkge1xuICAgICAgICBqdW1wTm9kZS5lcnJvcignY2Fubm90IHVzZSBhIHB1cmUgc3RhdGVtZW50IGluIGFuIGV4cHJlc3Npb24nKTtcbiAgICAgIH1cbiAgICAgIG8uc2hhcmVkU2NvcGUgPSB0cnVlO1xuICAgICAgdGhpcy5pY2VkQ2xlYXJBdXRvY2JGbGFncygpO1xuICAgICAgZnVuYyA9IG5ldyBDb2RlKFtdLCBCbG9jay53cmFwKFt0aGlzXSkpO1xuICAgICAgYXJncyA9IFtdO1xuICAgICAgaWYgKChhcmd1bWVudHNOb2RlID0gdGhpcy5jb250YWlucyhpc0xpdGVyYWxBcmd1bWVudHMpKSB8fCB0aGlzLmNvbnRhaW5zKGlzTGl0ZXJhbFRoaXMpKSB7XG4gICAgICAgIGFyZ3MgPSBbbmV3IExpdGVyYWwoJ3RoaXMnKV07XG4gICAgICAgIGlmIChhcmd1bWVudHNOb2RlKSB7XG4gICAgICAgICAgbWV0aCA9ICdhcHBseSc7XG4gICAgICAgICAgYXJncy5wdXNoKG5ldyBMaXRlcmFsKCdhcmd1bWVudHMnKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWV0aCA9ICdjYWxsJztcbiAgICAgICAgfVxuICAgICAgICBmdW5jID0gbmV3IFZhbHVlKGZ1bmMsIFtuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKG1ldGgpKV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChuZXcgQ2FsbChmdW5jLCBhcmdzKSkuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmNhY2hlID0gZnVuY3Rpb24obywgbGV2ZWwsIHJldXNlZCkge1xuICAgICAgdmFyIHJlZiwgc3ViO1xuICAgICAgaWYgKCF0aGlzLmlzQ29tcGxleCgpKSB7XG4gICAgICAgIHJlZiA9IGxldmVsID8gdGhpcy5jb21waWxlVG9GcmFnbWVudHMobywgbGV2ZWwpIDogdGhpcztcbiAgICAgICAgcmV0dXJuIFtyZWYsIHJlZl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWYgPSBuZXcgTGl0ZXJhbChyZXVzZWQgfHwgby5zY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpKTtcbiAgICAgICAgc3ViID0gbmV3IEFzc2lnbihyZWYsIHRoaXMpO1xuICAgICAgICBpZiAobGV2ZWwpIHtcbiAgICAgICAgICByZXR1cm4gW3N1Yi5jb21waWxlVG9GcmFnbWVudHMobywgbGV2ZWwpLCBbdGhpcy5tYWtlQ29kZShyZWYudmFsdWUpXV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtzdWIsIHJlZl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuY2FjaGVUb0NvZGVGcmFnbWVudHMgPSBmdW5jdGlvbihjYWNoZVZhbHVlcykge1xuICAgICAgcmV0dXJuIFtmcmFnbWVudHNUb1RleHQoY2FjaGVWYWx1ZXNbMF0pLCBmcmFnbWVudHNUb1RleHQoY2FjaGVWYWx1ZXNbMV0pXTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgdmFyIG1lO1xuICAgICAgbWUgPSB0aGlzLnVud3JhcEFsbCgpO1xuICAgICAgaWYgKHJlcykge1xuICAgICAgICByZXR1cm4gbmV3IENhbGwobmV3IExpdGVyYWwoXCJcIiArIHJlcyArIFwiLnB1c2hcIiksIFttZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXR1cm4obWUsIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHByZWQpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgbm9kZSA9IHZvaWQgMDtcbiAgICAgIHRoaXMudHJhdmVyc2VDaGlsZHJlbihmYWxzZSwgZnVuY3Rpb24obikge1xuICAgICAgICBpZiAocHJlZChuKSkge1xuICAgICAgICAgIG5vZGUgPSBuO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUubGFzdE5vbkNvbW1lbnQgPSBmdW5jdGlvbihsaXN0KSB7XG4gICAgICB2YXIgaTtcbiAgICAgIGkgPSBsaXN0Lmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWYgKCEobGlzdFtpXSBpbnN0YW5jZW9mIENvbW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKGlkdCwgbmFtZSkge1xuICAgICAgdmFyIGV4dHJhcywgdHJlZTtcbiAgICAgIGlmIChpZHQgPT0gbnVsbCkge1xuICAgICAgICBpZHQgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgIH1cbiAgICAgIGV4dHJhcyA9IFtdO1xuICAgICAgaWYgKHRoaXMuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiQVwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRMb29wRmxhZykge1xuICAgICAgICBleHRyYXMucHVzaChcIkxcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkQ3BzUGl2b3RGbGFnKSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiUFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRJc0F1dG9jYkNvZGUpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJCXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJDXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZFBhcmVudEF3YWl0KSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiRFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRGb3VuZEFyZ3VtZW50cykge1xuICAgICAgICBleHRyYXMucHVzaChcIkdcIik7XG4gICAgICB9XG4gICAgICBpZiAoZXh0cmFzLmxlbmd0aCkge1xuICAgICAgICBleHRyYXMgPSBcIiAoXCIgKyBleHRyYXMuam9pbignJykgKyBcIilcIjtcbiAgICAgIH1cbiAgICAgIHRyZWUgPSAnXFxuJyArIGlkdCArIG5hbWU7XG4gICAgICB0cmVlID0gJ1xcbicgKyBpZHQgKyBuYW1lO1xuICAgICAgaWYgKHRoaXMuc29haykge1xuICAgICAgICB0cmVlICs9ICc/JztcbiAgICAgIH1cbiAgICAgIHRyZWUgKz0gZXh0cmFzO1xuICAgICAgdGhpcy5lYWNoQ2hpbGQoZnVuY3Rpb24obm9kZSkge1xuICAgICAgICByZXR1cm4gdHJlZSArPSBub2RlLnRvU3RyaW5nKGlkdCArIFRBQik7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmljZWRDb250aW51YXRpb25CbG9jaykge1xuICAgICAgICBpZHQgKz0gVEFCO1xuICAgICAgICB0cmVlICs9ICdcXG4nICsgaWR0ICsgXCJDb250aW51YXRpb25cIjtcbiAgICAgICAgdHJlZSArPSB0aGlzLmljZWRDb250aW51YXRpb25CbG9jay50b1N0cmluZyhpZHQgKyBUQUIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmVhY2hDaGlsZCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIHZhciBhdHRyLCBjaGlsZCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjIsIF9yZWYzO1xuICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgX3JlZjIgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBhdHRyID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAodGhpc1thdHRyXSkge1xuICAgICAgICAgIF9yZWYzID0gZmxhdHRlbihbdGhpc1thdHRyXV0pO1xuICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgY2hpbGQgPSBfcmVmM1tfal07XG4gICAgICAgICAgICBpZiAoZnVuYyhjaGlsZCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLnRyYXZlcnNlQ2hpbGRyZW4gPSBmdW5jdGlvbihjcm9zc1Njb3BlLCBmdW5jKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoQ2hpbGQoZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgdmFyIHJlY3VyO1xuICAgICAgICByZWN1ciA9IGZ1bmMoY2hpbGQpO1xuICAgICAgICBpZiAocmVjdXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkLnRyYXZlcnNlQ2hpbGRyZW4oY3Jvc3NTY29wZSwgZnVuYyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgT3AoJyEnLCB0aGlzKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUudW53cmFwQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIG5vZGUgPSB0aGlzO1xuICAgICAgd2hpbGUgKG5vZGUgIT09IChub2RlID0gbm9kZS51bndyYXAoKSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuZmxhdHRlbkNoaWxkcmVuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXR0ciwgY2hpbGQsIG91dCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjIsIF9yZWYzO1xuICAgICAgb3V0ID0gW107XG4gICAgICBfcmVmMiA9IHRoaXMuY2hpbGRyZW47XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGF0dHIgPSBfcmVmMltfaV07XG4gICAgICAgIGlmICh0aGlzW2F0dHJdKSB7XG4gICAgICAgICAgX3JlZjMgPSBmbGF0dGVuKFt0aGlzW2F0dHJdXSk7XG4gICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IF9yZWYzW19qXTtcbiAgICAgICAgICAgIG91dC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRDb21waWxlQ3BzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNvZGU7XG4gICAgICB0aGlzLmljZWRHb3RDcHNTcGxpdEZsYWcgPSB0cnVlO1xuICAgICAgY29kZSA9IENwc0Nhc2NhZGUud3JhcCh0aGlzLCB0aGlzLmljZWRDb250aW51YXRpb25CbG9jaywgbnVsbCwgbyk7XG4gICAgICBvLnNoYXJlZFNjb3BlID0gdHJ1ZTtcbiAgICAgIHJldHVybiBjb2RlLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkV2Fsa0FzdCA9IGZ1bmN0aW9uKHAsIG8pIHtcbiAgICAgIHZhciBjaGlsZCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgdGhpcy5pY2VkUGFyZW50QXdhaXQgPSBwO1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IG8uZm91bmRBdXRvY2I7XG4gICAgICBfcmVmMiA9IHRoaXMuZmxhdHRlbkNoaWxkcmVuKCk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGNoaWxkID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAoY2hpbGQuaWNlZFdhbGtBc3QocCwgbykpIHtcbiAgICAgICAgICB0aGlzLmljZWROb2RlRmxhZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmljZWROb2RlRmxhZztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZFdhbGtBc3RMb29wcyA9IGZ1bmN0aW9uKGZsb29kKSB7XG4gICAgICB2YXIgY2hpbGQsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIGlmICh0aGlzLmlzTG9vcCgpICYmIHRoaXMuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgIGZsb29kID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzTG9vcCgpICYmICF0aGlzLmljZWROb2RlRmxhZykge1xuICAgICAgICBmbG9vZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5pY2VkTG9vcEZsYWcgPSBmbG9vZDtcbiAgICAgIF9yZWYyID0gdGhpcy5mbGF0dGVuQ2hpbGRyZW4oKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgY2hpbGQgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChjaGlsZC5pY2VkV2Fsa0FzdExvb3BzKGZsb29kKSkge1xuICAgICAgICAgIHRoaXMuaWNlZExvb3BGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaWNlZExvb3BGbGFnO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkV2Fsa0Nwc1Bpdm90cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoaWxkLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBpZiAodGhpcy5pY2VkTm9kZUZsYWcgfHwgKHRoaXMuaWNlZExvb3BGbGFnICYmIHRoaXMuaWNlZElzSnVtcCgpKSkge1xuICAgICAgICB0aGlzLmljZWRDcHNQaXZvdEZsYWcgPSB0cnVlO1xuICAgICAgfVxuICAgICAgX3JlZjIgPSB0aGlzLmZsYXR0ZW5DaGlsZHJlbigpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBjaGlsZCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKGNoaWxkLmljZWRXYWxrQ3BzUGl2b3RzKCkpIHtcbiAgICAgICAgICB0aGlzLmljZWRDcHNQaXZvdEZsYWcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5pY2VkQ3BzUGl2b3RGbGFnO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkQ2xlYXJBdXRvY2JGbGFncyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXMudHJhdmVyc2VDaGlsZHJlbihmYWxzZSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBub2RlLmljZWRIYXNBdXRvY2JGbGFnID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRDcHNSb3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaGlsZCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLmZsYXR0ZW5DaGlsZHJlbigpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBjaGlsZCA9IF9yZWYyW19pXTtcbiAgICAgICAgY2hpbGQuaWNlZENwc1JvdGF0ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRJc0Nwc1Bpdm90ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pY2VkQ3BzUGl2b3RGbGFnO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkTmVzdENvbnRpbnVhdGlvbkJsb2NrID0gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIHRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrID0gYjtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZEhhc0NvbnRpbnVhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2s7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRDYWxsQ29udGludWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pY2VkQ2FsbENvbnRpbnVhdGlvbkZsYWcgPSB0cnVlO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkV3JhcENvbnRpbnVhdGlvbiA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZElzSnVtcCA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZFVud3JhcCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLmljZWRIYXNDb250aW51YXRpb24oKSAmJiB0aGlzLmljZWRIYXNDb250aW51YXRpb24oKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmljZWRIYXNDb250aW51YXRpb24oKSkge1xuICAgICAgICAgIGUuaWNlZENvbnRpbnVhdGlvbkJsb2NrID0gdGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRTdGF0ZW1lbnRBc3NlcnRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmljZWRJc0Nwc1Bpdm90KCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoXCJhd2FpdCdlZCBzdGF0ZW1lbnRzIGNhbid0IGFjdCBhcyBleHByZXNzaW9uc1wiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbXTtcblxuICAgIEJhc2UucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5qdW1wcyA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaXNDb21wbGV4ID0gWUVTO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaXNDaGFpbmFibGUgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaXNMb29wID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS51bndyYXAgPSBUSElTO1xuXG4gICAgQmFzZS5wcm90b3R5cGUudW5mb2xkU29hayA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuYXNzaWducyA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nID0gZnVuY3Rpb24obG9jYXRpb25EYXRhKSB7XG4gICAgICBpZiAodGhpcy5sb2NhdGlvbkRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB0aGlzLmxvY2F0aW9uRGF0YSA9IGxvY2F0aW9uRGF0YTtcbiAgICAgIHJldHVybiB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICByZXR1cm4gY2hpbGQudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nKGxvY2F0aW9uRGF0YSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gdGhyb3dTeW50YXhFcnJvcihtZXNzYWdlLCB0aGlzLmxvY2F0aW9uRGF0YSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLm1ha2VDb2RlID0gZnVuY3Rpb24oY29kZSkge1xuICAgICAgcmV0dXJuIG5ldyBDb2RlRnJhZ21lbnQodGhpcywgY29kZSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLndyYXBJbkJyYWNlcyA9IGZ1bmN0aW9uKGZyYWdtZW50cykge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKCcoJyksIGZyYWdtZW50cywgdGhpcy5tYWtlQ29kZSgnKScpKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuam9pbkZyYWdtZW50QXJyYXlzID0gZnVuY3Rpb24oZnJhZ21lbnRzTGlzdCwgam9pblN0cikge1xuICAgICAgdmFyIGFuc3dlciwgZnJhZ21lbnRzLCBpLCBfaSwgX2xlbjtcbiAgICAgIGFuc3dlciA9IFtdO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gZnJhZ21lbnRzTGlzdC5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgZnJhZ21lbnRzID0gZnJhZ21lbnRzTGlzdFtpXTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKGpvaW5TdHIpKTtcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KGZyYWdtZW50cyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH07XG5cbiAgICByZXR1cm4gQmFzZTtcblxuICB9KSgpO1xuXG4gIGV4cG9ydHMuQmxvY2sgPSBCbG9jayA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmxvY2ssIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBCbG9jayhub2Rlcykge1xuICAgICAgQmxvY2suX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmV4cHJlc3Npb25zID0gY29tcGFjdChmbGF0dGVuKG5vZGVzIHx8IFtdKSk7XG4gICAgfVxuXG4gICAgQmxvY2sucHJvdG90eXBlLmNoaWxkcmVuID0gWydleHByZXNzaW9ucyddO1xuXG4gICAgQmxvY2sucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb25zLnB1c2gobm9kZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbnMucG9wKCk7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdGhpcy5leHByZXNzaW9ucy51bnNoaWZ0KG5vZGUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS51bndyYXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pY2VkVW53cmFwKHRoaXMuZXhwcmVzc2lvbnNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZXhwLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMuZXhwcmVzc2lvbnM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGV4cCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKGV4cC5pc1N0YXRlbWVudChvKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBleHAsIGp1bXBOb2RlLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMuZXhwcmVzc2lvbnM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGV4cCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKGp1bXBOb2RlID0gZXhwLmp1bXBzKG8pKSB7XG4gICAgICAgICAgcmV0dXJuIGp1bXBOb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgZXhwciwgZm91bmRSZXR1cm4sIGxlbjtcbiAgICAgIGxlbiA9IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgZm91bmRSZXR1cm4gPSBmYWxzZTtcbiAgICAgIHdoaWxlIChsZW4tLSkge1xuICAgICAgICBleHByID0gdGhpcy5leHByZXNzaW9uc1tsZW5dO1xuICAgICAgICBpZiAoIShleHByIGluc3RhbmNlb2YgQ29tbWVudCkpIHtcbiAgICAgICAgICB0aGlzLmV4cHJlc3Npb25zW2xlbl0gPSBleHByLm1ha2VSZXR1cm4ocmVzKTtcbiAgICAgICAgICBpZiAoZXhwciBpbnN0YW5jZW9mIFJldHVybiAmJiAhZXhwci5leHByZXNzaW9uICYmICFleHByLmljZWRIYXNBdXRvY2JGbGFnKSB7XG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25zLnNwbGljZShsZW4sIDEpO1xuICAgICAgICAgICAgZm91bmRSZXR1cm4gPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIShleHByIGluc3RhbmNlb2YgSWYpIHx8IGV4cHIuZWxzZUJvZHkpIHtcbiAgICAgICAgICAgIGZvdW5kUmV0dXJuID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRIYXNBdXRvY2JGbGFnICYmICF0aGlzLmljZWROb2RlRmxhZyAmJiAhZm91bmRSZXR1cm4pIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucy5wdXNoKG5ldyBSZXR1cm4obnVsbCwgdHJ1ZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvLCBsZXZlbCkge1xuICAgICAgaWYgKG8gPT0gbnVsbCkge1xuICAgICAgICBvID0ge307XG4gICAgICB9XG4gICAgICBpZiAoby5zY29wZSkge1xuICAgICAgICByZXR1cm4gQmxvY2suX19zdXBlcl9fLmNvbXBpbGVUb0ZyYWdtZW50cy5jYWxsKHRoaXMsIG8sIGxldmVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVSb290KG8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBjb21waWxlZE5vZGVzLCBmcmFnbWVudHMsIGluZGV4LCBub2RlLCB0b3AsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIHRoaXMudGFiID0gby5pbmRlbnQ7XG4gICAgICB0b3AgPSBvLmxldmVsID09PSBMRVZFTF9UT1A7XG4gICAgICBjb21waWxlZE5vZGVzID0gW107XG4gICAgICBfcmVmMiA9IHRoaXMuZXhwcmVzc2lvbnM7XG4gICAgICBmb3IgKGluZGV4ID0gX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IGluZGV4ID0gKytfaSkge1xuICAgICAgICBub2RlID0gX3JlZjJbaW5kZXhdO1xuICAgICAgICBub2RlID0gbm9kZS51bndyYXBBbGwoKTtcbiAgICAgICAgbm9kZSA9IG5vZGUudW5mb2xkU29hayhvKSB8fCBub2RlO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEJsb2NrKSB7XG4gICAgICAgICAgY29tcGlsZWROb2Rlcy5wdXNoKG5vZGUuY29tcGlsZU5vZGUobykpO1xuICAgICAgICB9IGVsc2UgaWYgKHRvcCkge1xuICAgICAgICAgIG5vZGUuZnJvbnQgPSB0cnVlO1xuICAgICAgICAgIGZyYWdtZW50cyA9IG5vZGUuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgICAgIGlmICghbm9kZS5pc1N0YXRlbWVudChvKSkge1xuICAgICAgICAgICAgZnJhZ21lbnRzLnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIlwiICsgdGhpcy50YWIpKTtcbiAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCI7XCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29tcGlsZWROb2Rlcy5wdXNoKGZyYWdtZW50cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29tcGlsZWROb2Rlcy5wdXNoKG5vZGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvcCkge1xuICAgICAgICBpZiAodGhpcy5zcGFjZWQpIHtcbiAgICAgICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKGNvbXBpbGVkTm9kZXMsICdcXG5cXG4nKSwgdGhpcy5tYWtlQ29kZShcIlxcblwiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKGNvbXBpbGVkTm9kZXMsICdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNvbXBpbGVkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIGFuc3dlciA9IHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKGNvbXBpbGVkTm9kZXMsICcsICcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5zd2VyID0gW3RoaXMubWFrZUNvZGUoXCJ2b2lkIDBcIildO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXBpbGVkTm9kZXMubGVuZ3RoID4gMSAmJiBvLmxldmVsID49IExFVkVMX0xJU1QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGFuc3dlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuY29tcGlsZVJvb3QgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZXhwLCBmcmFnbWVudHMsIGksIG5hbWUsIHByZWx1ZGUsIHByZWx1ZGVFeHBzLCByZXN0LCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBvLmluZGVudCA9IG8uYmFyZSA/ICcnIDogVEFCO1xuICAgICAgby5sZXZlbCA9IExFVkVMX1RPUDtcbiAgICAgIHRoaXMuc3BhY2VkID0gdHJ1ZTtcbiAgICAgIG8uc2NvcGUgPSBuZXcgU2NvcGUobnVsbCwgdGhpcywgbnVsbCk7XG4gICAgICBfcmVmMiA9IG8ubG9jYWxzIHx8IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBuYW1lID0gX3JlZjJbX2ldO1xuICAgICAgICBvLnNjb3BlLnBhcmFtZXRlcihuYW1lKTtcbiAgICAgIH1cbiAgICAgIHByZWx1ZGUgPSBbXTtcbiAgICAgIGlmICghby5iYXJlKSB7XG4gICAgICAgIHByZWx1ZGVFeHBzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZWYzLCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVmMyA9IHRoaXMuZXhwcmVzc2lvbnM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGkgPSBfaiA9IDAsIF9sZW4xID0gX3JlZjMubGVuZ3RoOyBfaiA8IF9sZW4xOyBpID0gKytfaikge1xuICAgICAgICAgICAgZXhwID0gX3JlZjNbaV07XG4gICAgICAgICAgICBpZiAoIShleHAudW53cmFwKCkgaW5zdGFuY2VvZiBDb21tZW50KSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goZXhwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICByZXN0ID0gdGhpcy5leHByZXNzaW9ucy5zbGljZShwcmVsdWRlRXhwcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zID0gcHJlbHVkZUV4cHM7XG4gICAgICAgIGlmIChwcmVsdWRlRXhwcy5sZW5ndGgpIHtcbiAgICAgICAgICBwcmVsdWRlID0gdGhpcy5jb21waWxlTm9kZShtZXJnZShvLCB7XG4gICAgICAgICAgICBpbmRlbnQ6ICcnXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHByZWx1ZGUucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV4cHJlc3Npb25zID0gcmVzdDtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cyA9IHRoaXMuY29tcGlsZVdpdGhEZWNsYXJhdGlvbnMobyk7XG4gICAgICBpZiAoby5iYXJlKSB7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICB9XG4gICAgICByZXR1cm4gW10uY29uY2F0KHByZWx1ZGUsIHRoaXMubWFrZUNvZGUoXCIoZnVuY3Rpb24oKSB7XFxuXCIpLCBmcmFnbWVudHMsIHRoaXMubWFrZUNvZGUoXCJcXG59KS5jYWxsKHRoaXMpO1xcblwiKSk7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5jb21waWxlV2l0aERlY2xhcmF0aW9ucyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhc3NpZ25zLCBkZWNsYXJzLCBleHAsIGZyYWdtZW50cywgaSwgcG9zdCwgcmVzdCwgc2NvcGUsIHNwYWNlZCwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBmcmFnbWVudHMgPSBbXTtcbiAgICAgIHBvc3QgPSBbXTtcbiAgICAgIF9yZWYyID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBleHAgPSBfcmVmMltpXTtcbiAgICAgICAgZXhwID0gZXhwLnVud3JhcCgpO1xuICAgICAgICBpZiAoIShleHAgaW5zdGFuY2VvZiBDb21tZW50IHx8IGV4cCBpbnN0YW5jZW9mIExpdGVyYWwpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG8gPSBtZXJnZShvLCB7XG4gICAgICAgIGxldmVsOiBMRVZFTF9UT1BcbiAgICAgIH0pO1xuICAgICAgaWYgKGkpIHtcbiAgICAgICAgcmVzdCA9IHRoaXMuZXhwcmVzc2lvbnMuc3BsaWNlKGksIDllOSk7XG4gICAgICAgIF9yZWYzID0gW3RoaXMuc3BhY2VkLCBmYWxzZV0sIHNwYWNlZCA9IF9yZWYzWzBdLCB0aGlzLnNwYWNlZCA9IF9yZWYzWzFdO1xuICAgICAgICBfcmVmNCA9IFt0aGlzLmNvbXBpbGVOb2RlKG8pLCBzcGFjZWRdLCBmcmFnbWVudHMgPSBfcmVmNFswXSwgdGhpcy5zcGFjZWQgPSBfcmVmNFsxXTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IHJlc3Q7XG4gICAgICB9XG4gICAgICBwb3N0ID0gdGhpcy5jb21waWxlTm9kZShvKTtcbiAgICAgIHNjb3BlID0gby5zY29wZTtcbiAgICAgIGlmIChzY29wZS5leHByZXNzaW9ucyA9PT0gdGhpcykge1xuICAgICAgICBkZWNsYXJzID0gby5zY29wZS5oYXNEZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgYXNzaWducyA9IHNjb3BlLmhhc0Fzc2lnbm1lbnRzO1xuICAgICAgICBpZiAoZGVjbGFycyB8fCBhc3NpZ25zKSB7XG4gICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoJ1xcbicpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIlwiICsgdGhpcy50YWIgKyBcInZhciBcIikpO1xuICAgICAgICAgIGlmIChkZWNsYXJzKSB7XG4gICAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKHNjb3BlLmRlY2xhcmVkVmFyaWFibGVzKCkuam9pbignLCAnKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXNzaWducykge1xuICAgICAgICAgICAgaWYgKGRlY2xhcnMpIHtcbiAgICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIixcXG5cIiArICh0aGlzLnRhYiArIFRBQikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoc2NvcGUuYXNzaWduZWRWYXJpYWJsZXMoKS5qb2luKFwiLFxcblwiICsgKHRoaXMudGFiICsgVEFCKSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIjtcXG5cIiArICh0aGlzLnNwYWNlZCA/ICdcXG4nIDogJycpKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJhZ21lbnRzLmxlbmd0aCAmJiBwb3N0Lmxlbmd0aCkge1xuICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZnJhZ21lbnRzLmNvbmNhdChwb3N0KTtcbiAgICB9O1xuXG4gICAgQmxvY2sud3JhcCA9IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdIGluc3RhbmNlb2YgQmxvY2spIHtcbiAgICAgICAgcmV0dXJuIG5vZGVzWzBdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBCbG9jayhub2Rlcyk7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pY2VkVGhyZWFkUmV0dXJuID0gZnVuY3Rpb24oY2FsbCkge1xuICAgICAgdmFyIGV4cHIsIGxlbjtcbiAgICAgIGNhbGwgPSBjYWxsIHx8IG5ldyBJY2VkVGFpbENhbGw7XG4gICAgICBsZW4gPSB0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChsZW4tLSkge1xuICAgICAgICBleHByID0gdGhpcy5leHByZXNzaW9uc1tsZW5dO1xuICAgICAgICBpZiAoZXhwci5pc1N0YXRlbWVudCgpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoZXhwciBpbnN0YW5jZW9mIENvbW1lbnQpICYmICEoZXhwciBpbnN0YW5jZW9mIFJldHVybikpIHtcbiAgICAgICAgICBjYWxsLmFzc2lnblZhbHVlKGV4cHIpO1xuICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnNbbGVuXSA9IGNhbGw7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9ucy5wdXNoKGNhbGwpO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaWNlZENvbXBpbGVDcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB0aGlzLmljZWRHb3RDcHNTcGxpdEZsYWcgPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm4gQmxvY2suX19zdXBlcl9fLmljZWRDb21waWxlQ3BzLmNhbGwodGhpcywgbyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlTm9kZShvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmljZWRDcHNSb3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaGlsZCwgZSwgaSwgcGl2b3QsIHJlc3QsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYyO1xuICAgICAgcGl2b3QgPSBudWxsO1xuICAgICAgX3JlZjIgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIGUgPSBfcmVmMltpXTtcbiAgICAgICAgaWYgKGUuaWNlZElzQ3BzUGl2b3QoKSkge1xuICAgICAgICAgIHBpdm90ID0gZTtcbiAgICAgICAgICBwaXZvdC5pY2VkQ2FsbENvbnRpbnVhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGUuaWNlZENwc1JvdGF0ZSgpO1xuICAgICAgICBpZiAocGl2b3QpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFwaXZvdCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGlmIChwaXZvdC5pY2VkQ29udGludWF0aW9uQmxvY2spIHtcbiAgICAgICAgdGhyb3cgU3ludGF4RXJyb3IoXCJ1bmV4cGVjdGVkIGNvbnRpbnVhdGlvbiBibG9jayBpbiBub2RlXCIpO1xuICAgICAgfVxuICAgICAgcmVzdCA9IHRoaXMuZXhwcmVzc2lvbnMuc2xpY2UoaSArIDEpO1xuICAgICAgdGhpcy5leHByZXNzaW9ucyA9IHRoaXMuZXhwcmVzc2lvbnMuc2xpY2UoMCwgaSArIDEpO1xuICAgICAgaWYgKHJlc3QubGVuZ3RoKSB7XG4gICAgICAgIGNoaWxkID0gbmV3IEJsb2NrKHJlc3QpO1xuICAgICAgICBwaXZvdC5pY2VkTmVzdENvbnRpbnVhdGlvbkJsb2NrKGNoaWxkKTtcbiAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gcmVzdC5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICBlID0gcmVzdFtfal07XG4gICAgICAgICAgaWYgKGUuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgICAgICBjaGlsZC5pY2VkTm9kZUZsYWcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZS5pY2VkTG9vcEZsYWcpIHtcbiAgICAgICAgICAgIGNoaWxkLmljZWRMb29wRmxhZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlLmljZWRDcHNQaXZvdEZsYWcpIHtcbiAgICAgICAgICAgIGNoaWxkLmljZWRDcHNQaXZvdEZsYWcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZS5pY2VkSGFzQXV0b2NiRmxhZykge1xuICAgICAgICAgICAgY2hpbGQuaWNlZEhhc0F1dG9jYkZsYWcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGlsZC5pY2VkQ3BzUm90YXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmljZWRBZGRSdW50aW1lID0gZnVuY3Rpb24oZm91bmREZWZlciwgZm91bmRBd2FpdCkge1xuICAgICAgdmFyIGluZGV4LCBub2RlO1xuICAgICAgaW5kZXggPSAwO1xuICAgICAgd2hpbGUgKChub2RlID0gdGhpcy5leHByZXNzaW9uc1tpbmRleF0pICYmIG5vZGUgaW5zdGFuY2VvZiBDb21tZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBWYWx1ZSAmJiBub2RlLmlzU3RyaW5nKCkpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25zLnNwbGljZShpbmRleCwgMCwgbmV3IEljZWRSdW50aW1lKGZvdW5kRGVmZXIsIGZvdW5kQXdhaXQpKTtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmljZWRUcmFuc2Zvcm0gPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgICB2YXIgb2JqO1xuICAgICAgb2JqID0ge307XG4gICAgICB0aGlzLmljZWRXYWxrQXN0KG51bGwsIG9iaik7XG4gICAgICBpZiAoIShvcHRzICE9IG51bGwgPyBvcHRzLnJlcGwgOiB2b2lkIDApICYmIChvYmouZm91bmREZWZlciB8fCBvYmouZm91bmRBd2FpdCB8fCBvcHRzLnJ1bmZvcmNlKSkge1xuICAgICAgICB0aGlzLmljZWRBZGRSdW50aW1lKG9iai5mb3VuZERlZmVyLCBvYmouZm91bmRBd2FpdCk7XG4gICAgICB9XG4gICAgICBpZiAob2JqLmZvdW5kQXdhaXQpIHtcbiAgICAgICAgdGhpcy5pY2VkV2Fsa0FzdExvb3BzKGZhbHNlKTtcbiAgICAgICAgdGhpcy5pY2VkV2Fsa0Nwc1Bpdm90cygpO1xuICAgICAgICB0aGlzLmljZWRDcHNSb3RhdGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaWNlZEdldFNpbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25zWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBCbG9jaztcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkxpdGVyYWwgPSBMaXRlcmFsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMaXRlcmFsLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gTGl0ZXJhbCh2YWx1ZSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgaWYgKHRoaXMudmFsdWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3aG9vcHMhXCIpO1xuICAgICAgfVxuICAgICAgTGl0ZXJhbC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5pc1N0YXRlbWVudCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIExpdGVyYWwuX19zdXBlcl9fLm1ha2VSZXR1cm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gSURFTlRJRklFUi50ZXN0KHRoaXMudmFsdWUpO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChfcmVmMiA9IHRoaXMudmFsdWUpID09PSAnYnJlYWsnIHx8IF9yZWYyID09PSAnY29udGludWUnIHx8IF9yZWYyID09PSAnZGVidWdnZXInO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5pc0NvbXBsZXggPSBOTztcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmFzc2lnbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gbmFtZSA9PT0gdGhpcy52YWx1ZTtcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJ2JyZWFrJyAmJiAhKChvICE9IG51bGwgPyBvLmxvb3AgOiB2b2lkIDApIHx8IChvICE9IG51bGwgPyBvLmJsb2NrIDogdm9pZCAwKSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJ2NvbnRpbnVlJyAmJiAhKG8gIT0gbnVsbCA/IG8ubG9vcCA6IHZvaWQgMCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgY29kZSwgX3JlZjI7XG4gICAgICBpZiAodGhpcy5pY2VkTG9vcEZsYWcgJiYgdGhpcy5pY2VkSXNKdW1wKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNlZENvbXBpbGVJY2VkKG8pO1xuICAgICAgfVxuICAgICAgY29kZSA9IHRoaXMudmFsdWUgPT09ICd0aGlzJyA/ICgoX3JlZjIgPSBvLnNjb3BlLm1ldGhvZCkgIT0gbnVsbCA/IF9yZWYyLmJvdW5kIDogdm9pZCAwKSA/IG8uc2NvcGUubWV0aG9kLmNvbnRleHQgOiB0aGlzLnZhbHVlIDogdGhpcy52YWx1ZS5yZXNlcnZlZCA/IFwiXFxcIlwiICsgdGhpcy52YWx1ZSArIFwiXFxcIlwiIDogdGhpcy52YWx1ZTtcbiAgICAgIGFuc3dlciA9IHRoaXMuaXNTdGF0ZW1lbnQoKSA/IFwiXCIgKyB0aGlzLnRhYiArIGNvZGUgKyBcIjtcIiA6IGNvZGU7XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoYW5zd2VyKV07XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJyBcIicgKyB0aGlzLnZhbHVlICsgJ1wiJztcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuaWNlZFdhbGtBc3QgPSBmdW5jdGlvbihwYXJlbnQsIG8pIHtcbiAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnYXJndW1lbnRzJyAmJiBvLmZvdW5kQXdhaXRGdW5jKSB7XG4gICAgICAgIG8uZm91bmRBcmd1bWVudHMgPSB0cnVlO1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJfYXJndW1lbnRzXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmljZWRJc0p1bXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoX3JlZjIgPSB0aGlzLnZhbHVlKSA9PT0gJ2JyZWFrJyB8fCBfcmVmMiA9PT0gJ2NvbnRpbnVlJztcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuaWNlZENvbXBpbGVJY2VkID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNhbGwsIGQsIGZ1bmMsIGw7XG4gICAgICBkID0ge1xuICAgICAgICAnY29udGludWUnOiBpY2VkW1wiY29uc3RcIl0uY193aGlsZSxcbiAgICAgICAgJ2JyZWFrJzogaWNlZFtcImNvbnN0XCJdLmJfd2hpbGVcbiAgICAgIH07XG4gICAgICBsID0gZFt0aGlzLnZhbHVlXTtcbiAgICAgIGZ1bmMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwobCkpO1xuICAgICAgY2FsbCA9IG5ldyBDYWxsKGZ1bmMsIFtdKTtcbiAgICAgIHJldHVybiBjYWxsLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGl0ZXJhbDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlVuZGVmaW5lZCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVW5kZWZpbmVkLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gVW5kZWZpbmVkKCkge1xuICAgICAgcmV0dXJuIFVuZGVmaW5lZC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBVbmRlZmluZWQucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IE5PO1xuXG4gICAgVW5kZWZpbmVkLnByb3RvdHlwZS5pc0NvbXBsZXggPSBOTztcblxuICAgIFVuZGVmaW5lZC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoby5sZXZlbCA+PSBMRVZFTF9BQ0NFU1MgPyAnKHZvaWQgMCknIDogJ3ZvaWQgMCcpXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFVuZGVmaW5lZDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLk51bGwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE51bGwsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBOdWxsKCkge1xuICAgICAgcmV0dXJuIE51bGwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgTnVsbC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gTk87XG5cbiAgICBOdWxsLnByb3RvdHlwZS5pc0NvbXBsZXggPSBOTztcblxuICAgIE51bGwucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoXCJudWxsXCIpXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE51bGw7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5Cb29sID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCb29sLCBfc3VwZXIpO1xuXG4gICAgQm9vbC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gTk87XG5cbiAgICBCb29sLnByb3RvdHlwZS5pc0NvbXBsZXggPSBOTztcblxuICAgIEJvb2wucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUodGhpcy52YWwpXTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQm9vbCh2YWwpIHtcbiAgICAgIHRoaXMudmFsID0gdmFsO1xuICAgIH1cblxuICAgIHJldHVybiBCb29sO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuUmV0dXJuID0gUmV0dXJuID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXR1cm4sIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBSZXR1cm4oZXhwcmVzc2lvbiwgYXV0bykge1xuICAgICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICAgIFJldHVybi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBhdXRvO1xuICAgIH1cblxuICAgIFJldHVybi5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2V4cHJlc3Npb24nXTtcblxuICAgIFJldHVybi5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBZRVM7XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBUSElTO1xuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5qdW1wcyA9IFRISVM7XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8sIGxldmVsKSB7XG4gICAgICB2YXIgZXhwciwgX3JlZjI7XG4gICAgICBleHByID0gKF9yZWYyID0gdGhpcy5leHByZXNzaW9uKSAhPSBudWxsID8gX3JlZjIubWFrZVJldHVybigpIDogdm9pZCAwO1xuICAgICAgaWYgKGV4cHIgJiYgIShleHByIGluc3RhbmNlb2YgUmV0dXJuKSkge1xuICAgICAgICByZXR1cm4gZXhwci5jb21waWxlVG9GcmFnbWVudHMobywgbGV2ZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJldHVybi5fX3N1cGVyX18uY29tcGlsZVRvRnJhZ21lbnRzLmNhbGwodGhpcywgbywgbGV2ZWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlcjtcbiAgICAgIGlmICh0aGlzLmljZWRIYXNBdXRvY2JGbGFnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljZWRDb21waWxlSWNlZChvKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlciA9IFtdO1xuICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZSh0aGlzLnRhYiArIChcInJldHVyblwiICsgKHRoaXMuZXhwcmVzc2lvbiA/IFwiIFwiIDogXCJcIikpKSk7XG4gICAgICBpZiAodGhpcy5leHByZXNzaW9uKSB7XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQodGhpcy5leHByZXNzaW9uLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTikpO1xuICAgICAgfVxuICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIjtcIikpO1xuICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICB9O1xuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5pY2VkQ29tcGlsZUljZWQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXJncywgYmxvY2ssIGNhbGwsIGNiLCByZXQ7XG4gICAgICBjYiA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uYXV0b2NiKSk7XG4gICAgICBhcmdzID0gdGhpcy5leHByZXNzaW9uID8gW3RoaXMuZXhwcmVzc2lvbl0gOiBbXTtcbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChjYiwgYXJncyk7XG4gICAgICByZXQgPSBuZXcgTGl0ZXJhbChcInJldHVyblwiKTtcbiAgICAgIGJsb2NrID0gbmV3IEJsb2NrKFtjYWxsLCByZXRdKTtcbiAgICAgIHJldHVybiBibG9jay5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJldHVybjtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlZhbHVlID0gVmFsdWUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZhbHVlLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gVmFsdWUoYmFzZSwgcHJvcHMsIHRhZykge1xuICAgICAgVmFsdWUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICBpZiAoIXByb3BzICYmIGJhc2UgaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYmFzZSA9IGJhc2U7XG4gICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wcyB8fCBbXTtcbiAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgdGhpc1t0YWddID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIFZhbHVlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnYmFzZScsICdwcm9wZXJ0aWVzJ107XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBWYWx1ZSh0aGlzLmJhc2UsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwcm9wcykge1xuICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzLmNvbmNhdChwcm9wcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmhhc1Byb3BlcnRpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhIXRoaXMucHJvcGVydGllcy5sZW5ndGg7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5iYXJlTGl0ZXJhbCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgIHJldHVybiAhdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCAmJiB0aGlzLmJhc2UgaW5zdGFuY2VvZiB0eXBlO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYmFyZUxpdGVyYWwoQXJyKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzUmFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJhcmVMaXRlcmFsKFJhbmdlKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzQ29tcGxleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFzUHJvcGVydGllcygpIHx8IHRoaXMuYmFzZS5pc0NvbXBsZXgoKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFzUHJvcGVydGllcygpIHx8IHRoaXMuYmFzZS5pc0Fzc2lnbmFibGUoKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzU2ltcGxlTnVtYmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5iYXJlTGl0ZXJhbChMaXRlcmFsKSAmJiBTSU1QTEVOVU0udGVzdCh0aGlzLmJhc2UudmFsdWUpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJhcmVMaXRlcmFsKExpdGVyYWwpICYmIElTX1NUUklORy50ZXN0KHRoaXMuYmFzZS52YWx1ZSk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc1JlZ2V4ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5iYXJlTGl0ZXJhbChMaXRlcmFsKSAmJiBJU19SRUdFWC50ZXN0KHRoaXMuYmFzZS52YWx1ZSk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc0F0b21pYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vZGUsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5wcm9wZXJ0aWVzLmNvbmNhdCh0aGlzLmJhc2UpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAobm9kZS5zb2FrIHx8IG5vZGUgaW5zdGFuY2VvZiBDYWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzTm90Q2FsbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzU2ltcGxlTnVtYmVyKCkgfHwgdGhpcy5pc1N0cmluZygpIHx8IHRoaXMuaXNSZWdleCgpIHx8IHRoaXMuaXNBcnJheSgpIHx8IHRoaXMuaXNSYW5nZSgpIHx8IHRoaXMuaXNTcGxpY2UoKSB8fCB0aGlzLmlzT2JqZWN0KCk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiAhdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCAmJiB0aGlzLmJhc2UuaXNTdGF0ZW1lbnQobyk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5hc3NpZ25zID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuICF0aGlzLnByb3BlcnRpZXMubGVuZ3RoICYmIHRoaXMuYmFzZS5hc3NpZ25zKG5hbWUpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gIXRoaXMucHJvcGVydGllcy5sZW5ndGggJiYgdGhpcy5iYXNlLmp1bXBzKG8pO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNPYmplY3QgPSBmdW5jdGlvbihvbmx5R2VuZXJhdGVkKSB7XG4gICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gKHRoaXMuYmFzZSBpbnN0YW5jZW9mIE9iaikgJiYgKCFvbmx5R2VuZXJhdGVkIHx8IHRoaXMuYmFzZS5nZW5lcmF0ZWQpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNTcGxpY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBsYXN0KHRoaXMucHJvcGVydGllcykgaW5zdGFuY2VvZiBTbGljZTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmxvb2tzU3RhdGljID0gZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gdGhpcy5iYXNlLnZhbHVlID09PSBjbGFzc05hbWUgJiYgdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCAmJiAoKF9yZWYyID0gdGhpcy5wcm9wZXJ0aWVzWzBdLm5hbWUpICE9IG51bGwgPyBfcmVmMi52YWx1ZSA6IHZvaWQgMCkgIT09ICdwcm90b3R5cGUnO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUudW53cmFwID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5jYWNoZVJlZmVyZW5jZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBiYXNlLCBicmVmLCBuYW1lLCBucmVmO1xuICAgICAgbmFtZSA9IGxhc3QodGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMubGVuZ3RoIDwgMiAmJiAhdGhpcy5iYXNlLmlzQ29tcGxleCgpICYmICEobmFtZSAhPSBudWxsID8gbmFtZS5pc0NvbXBsZXgoKSA6IHZvaWQgMCkpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLCB0aGlzXTtcbiAgICAgIH1cbiAgICAgIGJhc2UgPSBuZXcgVmFsdWUodGhpcy5iYXNlLCB0aGlzLnByb3BlcnRpZXMuc2xpY2UoMCwgLTEpKTtcbiAgICAgIGlmIChiYXNlLmlzQ29tcGxleCgpKSB7XG4gICAgICAgIGJyZWYgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZSgnYmFzZScpKTtcbiAgICAgICAgYmFzZSA9IG5ldyBWYWx1ZShuZXcgUGFyZW5zKG5ldyBBc3NpZ24oYnJlZiwgYmFzZSkpKTtcbiAgICAgIH1cbiAgICAgIGlmICghbmFtZSkge1xuICAgICAgICByZXR1cm4gW2Jhc2UsIGJyZWZdO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgbnJlZiA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKCduYW1lJykpO1xuICAgICAgICBuYW1lID0gbmV3IEluZGV4KG5ldyBBc3NpZ24obnJlZiwgbmFtZS5pbmRleCkpO1xuICAgICAgICBucmVmID0gbmV3IEluZGV4KG5yZWYpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtiYXNlLmFkZChuYW1lKSwgbmV3IFZhbHVlKGJyZWYgfHwgYmFzZS5iYXNlLCBbbnJlZiB8fCBuYW1lXSldO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZnJhZ21lbnRzLCBwcm9wLCBwcm9wcywgX2ksIF9sZW47XG4gICAgICB0aGlzLmJhc2UuZnJvbnQgPSB0aGlzLmZyb250O1xuICAgICAgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBmcmFnbWVudHMgPSB0aGlzLmJhc2UuY29tcGlsZVRvRnJhZ21lbnRzKG8sIChwcm9wcy5sZW5ndGggPyBMRVZFTF9BQ0NFU1MgOiBudWxsKSk7XG4gICAgICBpZiAoKHRoaXMuYmFzZSBpbnN0YW5jZW9mIFBhcmVucyB8fCBwcm9wcy5sZW5ndGgpICYmIFNJTVBMRU5VTS50ZXN0KGZyYWdtZW50c1RvVGV4dChmcmFnbWVudHMpKSkge1xuICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKCcuJykpO1xuICAgICAgfVxuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBwcm9wcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwcm9wID0gcHJvcHNbX2ldO1xuICAgICAgICBmcmFnbWVudHMucHVzaC5hcHBseShmcmFnbWVudHMsIHByb3AuY29tcGlsZVRvRnJhZ21lbnRzKG8pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS51bmZvbGRTb2FrID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMudW5mb2xkZWRTb2FrICE9IG51bGwgPyB0aGlzLnVuZm9sZGVkU29hayA6IHRoaXMudW5mb2xkZWRTb2FrID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZnN0LCBpLCBpZm4sIHByb3AsIHJlZiwgc25kLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzO1xuICAgICAgICAgIGlmIChpZm4gPSBfdGhpcy5iYXNlLnVuZm9sZFNvYWsobykpIHtcbiAgICAgICAgICAgIChfcmVmMiA9IGlmbi5ib2R5LnByb3BlcnRpZXMpLnB1c2guYXBwbHkoX3JlZjIsIF90aGlzLnByb3BlcnRpZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGlmbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3JlZjMgPSBfdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgICAgcHJvcCA9IF9yZWYzW2ldO1xuICAgICAgICAgICAgaWYgKCFwcm9wLnNvYWspIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9wLnNvYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIGZzdCA9IG5ldyBWYWx1ZShfdGhpcy5iYXNlLCBfdGhpcy5wcm9wZXJ0aWVzLnNsaWNlKDAsIGkpKTtcbiAgICAgICAgICAgIHNuZCA9IG5ldyBWYWx1ZShfdGhpcy5iYXNlLCBfdGhpcy5wcm9wZXJ0aWVzLnNsaWNlKGkpKTtcbiAgICAgICAgICAgIGlmIChmc3QuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgICAgICAgcmVmID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpKTtcbiAgICAgICAgICAgICAgZnN0ID0gbmV3IFBhcmVucyhuZXcgQXNzaWduKHJlZiwgZnN0KSk7XG4gICAgICAgICAgICAgIHNuZC5iYXNlID0gcmVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJZihuZXcgRXhpc3RlbmNlKGZzdCksIHNuZCwge1xuICAgICAgICAgICAgICBzb2FrOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykoKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmljZWRUb1Nsb3QgPSBmdW5jdGlvbihpKSB7XG4gICAgICB2YXIgc3VmZmZpeCwgc3VmZml4O1xuICAgICAgaWYgKHRoaXMuYmFzZSBpbnN0YW5jZW9mIE9iaikge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlLmljZWRUb1Nsb3QoaSk7XG4gICAgICB9XG4gICAgICBzdWZmZml4ID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMgJiYgdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICBzdWZmaXggPSB0aGlzLnByb3BlcnRpZXMucG9wKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFNsb3QoaSwgdGhpcywgc3VmZml4KTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmljZWRUb1Nsb3RBY2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzW1widGhpc1wiXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY2Nlc3ModGhpcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBWYWx1ZTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkNvbW1lbnQgPSBDb21tZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb21tZW50LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQ29tbWVudChjb21tZW50KSB7XG4gICAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgICAgQ29tbWVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb21tZW50LnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IFlFUztcblxuICAgIENvbW1lbnQucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBUSElTO1xuXG4gICAgQ29tbWVudC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvLCBsZXZlbCkge1xuICAgICAgdmFyIGNvZGUsIGNvbW1lbnQ7XG4gICAgICBjb21tZW50ID0gdGhpcy5jb21tZW50LnJlcGxhY2UoL14oXFxzKikjIC9nbSwgXCIkMSAqIFwiKTtcbiAgICAgIGNvZGUgPSBcIi8qXCIgKyAobXVsdGlkZW50KGNvbW1lbnQsIHRoaXMudGFiKSkgKyAoX19pbmRleE9mLmNhbGwoY29tbWVudCwgJ1xcbicpID49IDAgPyBcIlxcblwiICsgdGhpcy50YWIgOiAnJykgKyBcIiAqL1wiO1xuICAgICAgaWYgKChsZXZlbCB8fCBvLmxldmVsKSA9PT0gTEVWRUxfVE9QKSB7XG4gICAgICAgIGNvZGUgPSBvLmluZGVudCArIGNvZGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoXCJcXG5cIiksIHRoaXMubWFrZUNvZGUoY29kZSldO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29tbWVudDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkNhbGwgPSBDYWxsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYWxsLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQ2FsbCh2YXJpYWJsZSwgYXJncywgc29haykge1xuICAgICAgdGhpcy5hcmdzID0gYXJncyAhPSBudWxsID8gYXJncyA6IFtdO1xuICAgICAgdGhpcy5zb2FrID0gc29haztcbiAgICAgIENhbGwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmlzTmV3ID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3VwZXIgPSB2YXJpYWJsZSA9PT0gJ3N1cGVyJztcbiAgICAgIHRoaXMudmFyaWFibGUgPSB0aGlzLmlzU3VwZXIgPyBudWxsIDogdmFyaWFibGU7XG4gICAgICBpZiAodmFyaWFibGUgaW5zdGFuY2VvZiBWYWx1ZSAmJiB2YXJpYWJsZS5pc05vdENhbGxhYmxlKCkpIHtcbiAgICAgICAgdmFyaWFibGUuZXJyb3IoXCJsaXRlcmFsIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIENhbGwucHJvdG90eXBlLmNoaWxkcmVuID0gWyd2YXJpYWJsZScsICdhcmdzJ107XG5cbiAgICBDYWxsLnByb3RvdHlwZS5uZXdJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJhc2UsIF9yZWYyO1xuICAgICAgYmFzZSA9ICgoX3JlZjIgPSB0aGlzLnZhcmlhYmxlKSAhPSBudWxsID8gX3JlZjIuYmFzZSA6IHZvaWQgMCkgfHwgdGhpcy52YXJpYWJsZTtcbiAgICAgIGlmIChiYXNlIGluc3RhbmNlb2YgQ2FsbCAmJiAhYmFzZS5pc05ldykge1xuICAgICAgICBiYXNlLm5ld0luc3RhbmNlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlzTmV3ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBDYWxsLnByb3RvdHlwZS5zdXBlclJlZmVyZW5jZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhY2Nlc3NlcywgbWV0aG9kO1xuICAgICAgbWV0aG9kID0gby5zY29wZS5uYW1lZE1ldGhvZCgpO1xuICAgICAgaWYgKG1ldGhvZCAhPSBudWxsID8gbWV0aG9kLmtsYXNzIDogdm9pZCAwKSB7XG4gICAgICAgIGFjY2Vzc2VzID0gW25ldyBBY2Nlc3MobmV3IExpdGVyYWwoJ19fc3VwZXJfXycpKV07XG4gICAgICAgIGlmIChtZXRob2RbXCJzdGF0aWNcIl0pIHtcbiAgICAgICAgICBhY2Nlc3Nlcy5wdXNoKG5ldyBBY2Nlc3MobmV3IExpdGVyYWwoJ2NvbnN0cnVjdG9yJykpKTtcbiAgICAgICAgfVxuICAgICAgICBhY2Nlc3Nlcy5wdXNoKG5ldyBBY2Nlc3MobmV3IExpdGVyYWwobWV0aG9kLm5hbWUpKSk7XG4gICAgICAgIHJldHVybiAobmV3IFZhbHVlKG5ldyBMaXRlcmFsKG1ldGhvZC5rbGFzcyksIGFjY2Vzc2VzKSkuY29tcGlsZShvKTtcbiAgICAgIH0gZWxzZSBpZiAobWV0aG9kICE9IG51bGwgPyBtZXRob2QuY3RvciA6IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gXCJcIiArIG1ldGhvZC5uYW1lICsgXCIuX19zdXBlcl9fLmNvbnN0cnVjdG9yXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcignY2Fubm90IGNhbGwgc3VwZXIgb3V0c2lkZSBvZiBhbiBpbnN0YW5jZSBtZXRob2QuJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENhbGwucHJvdG90eXBlLnN1cGVyVGhpcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBtZXRob2Q7XG4gICAgICBpZiAoby5zY29wZS5pY2VkZ2VuKSB7XG4gICAgICAgIHJldHVybiBcIl90aGlzXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZXRob2QgPSBvLnNjb3BlLm1ldGhvZDtcbiAgICAgICAgcmV0dXJuIChtZXRob2QgJiYgIW1ldGhvZC5rbGFzcyAmJiBtZXRob2QuY29udGV4dCkgfHwgXCJ0aGlzXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENhbGwucHJvdG90eXBlLnVuZm9sZFNvYWsgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY2FsbCwgaWZuLCBsZWZ0LCBsaXN0LCByaXRlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzO1xuICAgICAgaWYgKHRoaXMuc29haykge1xuICAgICAgICBpZiAodGhpcy52YXJpYWJsZSkge1xuICAgICAgICAgIGlmIChpZm4gPSB1bmZvbGRTb2FrKG8sIHRoaXMsICd2YXJpYWJsZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gaWZuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfcmVmMiA9IG5ldyBWYWx1ZSh0aGlzLnZhcmlhYmxlKS5jYWNoZVJlZmVyZW5jZShvKSwgbGVmdCA9IF9yZWYyWzBdLCByaXRlID0gX3JlZjJbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVmdCA9IG5ldyBMaXRlcmFsKHRoaXMuc3VwZXJSZWZlcmVuY2UobykpO1xuICAgICAgICAgIHJpdGUgPSBuZXcgVmFsdWUobGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgcml0ZSA9IG5ldyBDYWxsKHJpdGUsIHRoaXMuYXJncyk7XG4gICAgICAgIHJpdGUuaXNOZXcgPSB0aGlzLmlzTmV3O1xuICAgICAgICBsZWZ0ID0gbmV3IExpdGVyYWwoXCJ0eXBlb2YgXCIgKyAobGVmdC5jb21waWxlKG8pKSArIFwiID09PSBcXFwiZnVuY3Rpb25cXFwiXCIpO1xuICAgICAgICByZXR1cm4gbmV3IElmKGxlZnQsIG5ldyBWYWx1ZShyaXRlKSwge1xuICAgICAgICAgIHNvYWs6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjYWxsID0gdGhpcztcbiAgICAgIGxpc3QgPSBbXTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChjYWxsLnZhcmlhYmxlIGluc3RhbmNlb2YgQ2FsbCkge1xuICAgICAgICAgIGxpc3QucHVzaChjYWxsKTtcbiAgICAgICAgICBjYWxsID0gY2FsbC52YXJpYWJsZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjYWxsLnZhcmlhYmxlIGluc3RhbmNlb2YgVmFsdWUpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdC5wdXNoKGNhbGwpO1xuICAgICAgICBpZiAoISgoY2FsbCA9IGNhbGwudmFyaWFibGUuYmFzZSkgaW5zdGFuY2VvZiBDYWxsKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBfcmVmMyA9IGxpc3QucmV2ZXJzZSgpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBjYWxsID0gX3JlZjNbX2ldO1xuICAgICAgICBpZiAoaWZuKSB7XG4gICAgICAgICAgaWYgKGNhbGwudmFyaWFibGUgaW5zdGFuY2VvZiBDYWxsKSB7XG4gICAgICAgICAgICBjYWxsLnZhcmlhYmxlID0gaWZuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsLnZhcmlhYmxlLmJhc2UgPSBpZm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmbiA9IHVuZm9sZFNvYWsobywgY2FsbCwgJ3ZhcmlhYmxlJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaWZuO1xuICAgIH07XG5cbiAgICBDYWxsLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhcmcsIGFyZ0luZGV4LCBjb21waWxlZEFyZ3MsIGNvbXBpbGVkQXJyYXksIGZyYWdtZW50cywgcHJlZmFjZSwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMztcbiAgICAgIGlmICgoX3JlZjIgPSB0aGlzLnZhcmlhYmxlKSAhPSBudWxsKSB7XG4gICAgICAgIF9yZWYyLmZyb250ID0gdGhpcy5mcm9udDtcbiAgICAgIH1cbiAgICAgIGNvbXBpbGVkQXJyYXkgPSBTcGxhdC5jb21waWxlU3BsYXR0ZWRBcnJheShvLCB0aGlzLmFyZ3MsIHRydWUpO1xuICAgICAgaWYgKGNvbXBpbGVkQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVTcGxhdChvLCBjb21waWxlZEFycmF5KTtcbiAgICAgIH1cbiAgICAgIGNvbXBpbGVkQXJncyA9IFtdO1xuICAgICAgX3JlZjMgPSB0aGlzLmFyZ3M7XG4gICAgICBmb3IgKGFyZ0luZGV4ID0gX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IGFyZ0luZGV4ID0gKytfaSkge1xuICAgICAgICBhcmcgPSBfcmVmM1thcmdJbmRleF07XG4gICAgICAgIGFyZy5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uKCk7XG4gICAgICAgIGlmIChhcmdJbmRleCkge1xuICAgICAgICAgIGNvbXBpbGVkQXJncy5wdXNoKHRoaXMubWFrZUNvZGUoXCIsIFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29tcGlsZWRBcmdzLnB1c2guYXBwbHkoY29tcGlsZWRBcmdzLCBhcmcuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cyA9IFtdO1xuICAgICAgaWYgKHRoaXMuaXNTdXBlcikge1xuICAgICAgICBwcmVmYWNlID0gdGhpcy5zdXBlclJlZmVyZW5jZShvKSArIChcIi5jYWxsKFwiICsgKHRoaXMuc3VwZXJUaGlzKG8pKSk7XG4gICAgICAgIGlmIChjb21waWxlZEFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgcHJlZmFjZSArPSBcIiwgXCI7XG4gICAgICAgIH1cbiAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShwcmVmYWNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5pc05ldykge1xuICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoJ25ldyAnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZnJhZ21lbnRzLnB1c2guYXBwbHkoZnJhZ21lbnRzLCB0aGlzLnZhcmlhYmxlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9BQ0NFU1MpKTtcbiAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIihcIikpO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzLnB1c2guYXBwbHkoZnJhZ21lbnRzLCBjb21waWxlZEFyZ3MpO1xuICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShcIilcIikpO1xuICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICB9O1xuXG4gICAgQ2FsbC5wcm90b3R5cGUuY29tcGlsZVNwbGF0ID0gZnVuY3Rpb24obywgc3BsYXRBcmdzKSB7XG4gICAgICB2YXIgYW5zd2VyLCBiYXNlLCBmdW4sIGlkdCwgbmFtZSwgcmVmO1xuICAgICAgaWYgKHRoaXMuaXNTdXBlcikge1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcIiArICh0aGlzLnN1cGVyUmVmZXJlbmNlKG8pKSArIFwiLmFwcGx5KFwiICsgKHRoaXMuc3VwZXJUaGlzKG8pKSArIFwiLCBcIiksIHNwbGF0QXJncywgdGhpcy5tYWtlQ29kZShcIilcIikpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNOZXcpIHtcbiAgICAgICAgaWR0ID0gdGhpcy50YWIgKyBUQUI7XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIihmdW5jdGlvbihmdW5jLCBhcmdzLCBjdG9yKSB7XFxuXCIgKyBpZHQgKyBcImN0b3IucHJvdG90eXBlID0gZnVuYy5wcm90b3R5cGU7XFxuXCIgKyBpZHQgKyBcInZhciBjaGlsZCA9IG5ldyBjdG9yLCByZXN1bHQgPSBmdW5jLmFwcGx5KGNoaWxkLCBhcmdzKTtcXG5cIiArIGlkdCArIFwicmV0dXJuIE9iamVjdChyZXN1bHQpID09PSByZXN1bHQgPyByZXN1bHQgOiBjaGlsZDtcXG5cIiArIHRoaXMudGFiICsgXCJ9KShcIiksIHRoaXMudmFyaWFibGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpLCB0aGlzLm1ha2VDb2RlKFwiLCBcIiksIHNwbGF0QXJncywgdGhpcy5tYWtlQ29kZShcIiwgZnVuY3Rpb24oKXt9KVwiKSk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIgPSBbXTtcbiAgICAgIGJhc2UgPSBuZXcgVmFsdWUodGhpcy52YXJpYWJsZSk7XG4gICAgICBpZiAoKG5hbWUgPSBiYXNlLnByb3BlcnRpZXMucG9wKCkpICYmIGJhc2UuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgcmVmID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpO1xuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIoXCIgKyByZWYgKyBcIiA9IFwiKSwgYmFzZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCksIHRoaXMubWFrZUNvZGUoXCIpXCIpLCBuYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhvKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdW4gPSBiYXNlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9BQ0NFU1MpO1xuICAgICAgICBpZiAoU0lNUExFTlVNLnRlc3QoZnJhZ21lbnRzVG9UZXh0KGZ1bikpKSB7XG4gICAgICAgICAgZnVuID0gdGhpcy53cmFwSW5CcmFjZXMoZnVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgIHJlZiA9IGZyYWdtZW50c1RvVGV4dChmdW4pO1xuICAgICAgICAgIGZ1bi5wdXNoLmFwcGx5KGZ1biwgbmFtZS5jb21waWxlVG9GcmFnbWVudHMobykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlZiA9ICdudWxsJztcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KGZ1bik7XG4gICAgICB9XG4gICAgICByZXR1cm4gYW5zd2VyID0gYW5zd2VyLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiLmFwcGx5KFwiICsgcmVmICsgXCIsIFwiKSwgc3BsYXRBcmdzLCB0aGlzLm1ha2VDb2RlKFwiKVwiKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDYWxsO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuRXh0ZW5kcyA9IEV4dGVuZHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV4dGVuZHMsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBFeHRlbmRzKGNoaWxkLCBwYXJlbnQpIHtcbiAgICAgIHRoaXMuY2hpbGQgPSBjaGlsZDtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgRXh0ZW5kcy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeHRlbmRzLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnY2hpbGQnLCAncGFyZW50J107XG5cbiAgICBFeHRlbmRzLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gbmV3IENhbGwobmV3IFZhbHVlKG5ldyBMaXRlcmFsKHV0aWxpdHkoJ2V4dGVuZHMnKSkpLCBbdGhpcy5jaGlsZCwgdGhpcy5wYXJlbnRdKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBFeHRlbmRzO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQWNjZXNzID0gQWNjZXNzID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBY2Nlc3MsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBBY2Nlc3MobmFtZSwgdGFnKSB7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgQWNjZXNzLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5uYW1lLmFzS2V5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuc29hayA9IHRhZyA9PT0gJ3NvYWsnO1xuICAgIH1cblxuICAgIEFjY2Vzcy5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ25hbWUnXTtcblxuICAgIEFjY2Vzcy5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIG5hbWU7XG4gICAgICBuYW1lID0gdGhpcy5uYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgIGlmICgoSURFTlRJRklFUi50ZXN0KGZyYWdtZW50c1RvVGV4dChuYW1lKSkpIHx8IHRoaXMubmFtZSBpbnN0YW5jZW9mIERlZmVyKSB7XG4gICAgICAgIG5hbWUudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiLlwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYW1lLnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIltcIikpO1xuICAgICAgICBuYW1lLnB1c2godGhpcy5tYWtlQ29kZShcIl1cIikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfTtcblxuICAgIEFjY2Vzcy5wcm90b3R5cGUuaXNDb21wbGV4ID0gTk87XG5cbiAgICByZXR1cm4gQWNjZXNzO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuSW5kZXggPSBJbmRleCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5kZXgsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBJbmRleChpbmRleCkge1xuICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgSW5kZXguX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5kZXgucHJvdG90eXBlLmNoaWxkcmVuID0gWydpbmRleCddO1xuXG4gICAgSW5kZXgucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIltcIiksIHRoaXMuaW5kZXguY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKSwgdGhpcy5tYWtlQ29kZShcIl1cIikpO1xuICAgIH07XG5cbiAgICBJbmRleC5wcm90b3R5cGUuaXNDb21wbGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbmRleC5pc0NvbXBsZXgoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEluZGV4O1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuUmFuZ2UgPSBSYW5nZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmFuZ2UsIF9zdXBlcik7XG5cbiAgICBSYW5nZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2Zyb20nLCAndG8nXTtcblxuICAgIGZ1bmN0aW9uIFJhbmdlKGZyb20sIHRvLCB0YWcpIHtcbiAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICB0aGlzLnRvID0gdG87XG4gICAgICBSYW5nZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZXhjbHVzaXZlID0gdGFnID09PSAnZXhjbHVzaXZlJztcbiAgICAgIHRoaXMuZXF1YWxzID0gdGhpcy5leGNsdXNpdmUgPyAnJyA6ICc9JztcbiAgICB9XG5cbiAgICBSYW5nZS5wcm90b3R5cGUuY29tcGlsZVZhcmlhYmxlcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzdGVwLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNTtcbiAgICAgIG8gPSBtZXJnZShvLCB7XG4gICAgICAgIHRvcDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBfcmVmMiA9IHRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHModGhpcy5mcm9tLmNhY2hlKG8sIExFVkVMX0xJU1QpKSwgdGhpcy5mcm9tQyA9IF9yZWYyWzBdLCB0aGlzLmZyb21WYXIgPSBfcmVmMlsxXTtcbiAgICAgIF9yZWYzID0gdGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyh0aGlzLnRvLmNhY2hlKG8sIExFVkVMX0xJU1QpKSwgdGhpcy50b0MgPSBfcmVmM1swXSwgdGhpcy50b1ZhciA9IF9yZWYzWzFdO1xuICAgICAgaWYgKHN0ZXAgPSBkZWwobywgJ3N0ZXAnKSkge1xuICAgICAgICBfcmVmNCA9IHRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHMoc3RlcC5jYWNoZShvLCBMRVZFTF9MSVNUKSksIHRoaXMuc3RlcCA9IF9yZWY0WzBdLCB0aGlzLnN0ZXBWYXIgPSBfcmVmNFsxXTtcbiAgICAgIH1cbiAgICAgIF9yZWY1ID0gW3RoaXMuZnJvbVZhci5tYXRjaChOVU1CRVIpLCB0aGlzLnRvVmFyLm1hdGNoKE5VTUJFUildLCB0aGlzLmZyb21OdW0gPSBfcmVmNVswXSwgdGhpcy50b051bSA9IF9yZWY1WzFdO1xuICAgICAgaWYgKHRoaXMuc3RlcFZhcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwTnVtID0gdGhpcy5zdGVwVmFyLm1hdGNoKE5VTUJFUik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJhbmdlLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjb25kLCBjb25kUGFydCwgZnJvbSwgZ3QsIGlkeCwgaWR4TmFtZSwga25vd24sIGx0LCBuYW1lZEluZGV4LCBzdGVwUGFydCwgdG8sIHZhclBhcnQsIF9yZWYyLCBfcmVmMztcbiAgICAgIGlmICghdGhpcy5mcm9tVmFyKSB7XG4gICAgICAgIHRoaXMuY29tcGlsZVZhcmlhYmxlcyhvKTtcbiAgICAgIH1cbiAgICAgIGlmICghby5pbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlQXJyYXkobyk7XG4gICAgICB9XG4gICAgICBrbm93biA9IHRoaXMuZnJvbU51bSAmJiB0aGlzLnRvTnVtO1xuICAgICAgaWR4ID0gZGVsKG8sICdpbmRleCcpO1xuICAgICAgaWR4TmFtZSA9IGRlbChvLCAnbmFtZScpO1xuICAgICAgbmFtZWRJbmRleCA9IGlkeE5hbWUgJiYgaWR4TmFtZSAhPT0gaWR4O1xuICAgICAgdmFyUGFydCA9IFwiXCIgKyBpZHggKyBcIiA9IFwiICsgdGhpcy5mcm9tQztcbiAgICAgIGlmICh0aGlzLnRvQyAhPT0gdGhpcy50b1Zhcikge1xuICAgICAgICB2YXJQYXJ0ICs9IFwiLCBcIiArIHRoaXMudG9DO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3RlcCAhPT0gdGhpcy5zdGVwVmFyKSB7XG4gICAgICAgIHZhclBhcnQgKz0gXCIsIFwiICsgdGhpcy5zdGVwO1xuICAgICAgfVxuICAgICAgX3JlZjIgPSBbXCJcIiArIGlkeCArIFwiIDxcIiArIHRoaXMuZXF1YWxzLCBcIlwiICsgaWR4ICsgXCIgPlwiICsgdGhpcy5lcXVhbHNdLCBsdCA9IF9yZWYyWzBdLCBndCA9IF9yZWYyWzFdO1xuICAgICAgY29uZFBhcnQgPSB0aGlzLnN0ZXBOdW0gPyBwYXJzZU51bSh0aGlzLnN0ZXBOdW1bMF0pID4gMCA/IFwiXCIgKyBsdCArIFwiIFwiICsgdGhpcy50b1ZhciA6IFwiXCIgKyBndCArIFwiIFwiICsgdGhpcy50b1ZhciA6IGtub3duID8gKChfcmVmMyA9IFtwYXJzZU51bSh0aGlzLmZyb21OdW1bMF0pLCBwYXJzZU51bSh0aGlzLnRvTnVtWzBdKV0sIGZyb20gPSBfcmVmM1swXSwgdG8gPSBfcmVmM1sxXSwgX3JlZjMpLCBmcm9tIDw9IHRvID8gXCJcIiArIGx0ICsgXCIgXCIgKyB0byA6IFwiXCIgKyBndCArIFwiIFwiICsgdG8pIDogKGNvbmQgPSB0aGlzLnN0ZXBWYXIgPyBcIlwiICsgdGhpcy5zdGVwVmFyICsgXCIgPiAwXCIgOiBcIlwiICsgdGhpcy5mcm9tVmFyICsgXCIgPD0gXCIgKyB0aGlzLnRvVmFyLCBcIlwiICsgY29uZCArIFwiID8gXCIgKyBsdCArIFwiIFwiICsgdGhpcy50b1ZhciArIFwiIDogXCIgKyBndCArIFwiIFwiICsgdGhpcy50b1Zhcik7XG4gICAgICBzdGVwUGFydCA9IHRoaXMuc3RlcFZhciA/IFwiXCIgKyBpZHggKyBcIiArPSBcIiArIHRoaXMuc3RlcFZhciA6IGtub3duID8gbmFtZWRJbmRleCA/IGZyb20gPD0gdG8gPyBcIisrXCIgKyBpZHggOiBcIi0tXCIgKyBpZHggOiBmcm9tIDw9IHRvID8gXCJcIiArIGlkeCArIFwiKytcIiA6IFwiXCIgKyBpZHggKyBcIi0tXCIgOiBuYW1lZEluZGV4ID8gXCJcIiArIGNvbmQgKyBcIiA/ICsrXCIgKyBpZHggKyBcIiA6IC0tXCIgKyBpZHggOiBcIlwiICsgY29uZCArIFwiID8gXCIgKyBpZHggKyBcIisrIDogXCIgKyBpZHggKyBcIi0tXCI7XG4gICAgICBpZiAobmFtZWRJbmRleCkge1xuICAgICAgICB2YXJQYXJ0ID0gXCJcIiArIGlkeE5hbWUgKyBcIiA9IFwiICsgdmFyUGFydDtcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lZEluZGV4KSB7XG4gICAgICAgIHN0ZXBQYXJ0ID0gXCJcIiArIGlkeE5hbWUgKyBcIiA9IFwiICsgc3RlcFBhcnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoXCJcIiArIHZhclBhcnQgKyBcIjsgXCIgKyBjb25kUGFydCArIFwiOyBcIiArIHN0ZXBQYXJ0KV07XG4gICAgfTtcblxuICAgIFJhbmdlLnByb3RvdHlwZS5jb21waWxlQXJyYXkgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXJncywgYm9keSwgY29uZCwgaGFzQXJncywgaSwgaWR0LCBwb3N0LCBwcmUsIHJhbmdlLCByZXN1bHQsIHZhcnMsIF9pLCBfcmVmMiwgX3JlZjMsIF9yZXN1bHRzO1xuICAgICAgaWYgKHRoaXMuZnJvbU51bSAmJiB0aGlzLnRvTnVtICYmIE1hdGguYWJzKHRoaXMuZnJvbU51bSAtIHRoaXMudG9OdW0pIDw9IDIwKSB7XG4gICAgICAgIHJhbmdlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgX2kgPSBfcmVmMiA9ICt0aGlzLmZyb21OdW0sIF9yZWYzID0gK3RoaXMudG9OdW07IF9yZWYyIDw9IF9yZWYzID8gX2kgPD0gX3JlZjMgOiBfaSA+PSBfcmVmMzsgX3JlZjIgPD0gX3JlZjMgPyBfaSsrIDogX2ktLSl7IF9yZXN1bHRzLnB1c2goX2kpOyB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9KS5hcHBseSh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuZXhjbHVzaXZlKSB7XG4gICAgICAgICAgcmFuZ2UucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKFwiW1wiICsgKHJhbmdlLmpvaW4oJywgJykpICsgXCJdXCIpXTtcbiAgICAgIH1cbiAgICAgIGlkdCA9IHRoaXMudGFiICsgVEFCO1xuICAgICAgaSA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdpJyk7XG4gICAgICByZXN1bHQgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVzdWx0cycpO1xuICAgICAgcHJlID0gXCJcXG5cIiArIGlkdCArIHJlc3VsdCArIFwiID0gW107XCI7XG4gICAgICBpZiAodGhpcy5mcm9tTnVtICYmIHRoaXMudG9OdW0pIHtcbiAgICAgICAgby5pbmRleCA9IGk7XG4gICAgICAgIGJvZHkgPSBmcmFnbWVudHNUb1RleHQodGhpcy5jb21waWxlTm9kZShvKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXJzID0gKFwiXCIgKyBpICsgXCIgPSBcIiArIHRoaXMuZnJvbUMpICsgKHRoaXMudG9DICE9PSB0aGlzLnRvVmFyID8gXCIsIFwiICsgdGhpcy50b0MgOiAnJyk7XG4gICAgICAgIGNvbmQgPSBcIlwiICsgdGhpcy5mcm9tVmFyICsgXCIgPD0gXCIgKyB0aGlzLnRvVmFyO1xuICAgICAgICBib2R5ID0gXCJ2YXIgXCIgKyB2YXJzICsgXCI7IFwiICsgY29uZCArIFwiID8gXCIgKyBpICsgXCIgPFwiICsgdGhpcy5lcXVhbHMgKyBcIiBcIiArIHRoaXMudG9WYXIgKyBcIiA6IFwiICsgaSArIFwiID5cIiArIHRoaXMuZXF1YWxzICsgXCIgXCIgKyB0aGlzLnRvVmFyICsgXCI7IFwiICsgY29uZCArIFwiID8gXCIgKyBpICsgXCIrKyA6IFwiICsgaSArIFwiLS1cIjtcbiAgICAgIH1cbiAgICAgIHBvc3QgPSBcInsgXCIgKyByZXN1bHQgKyBcIi5wdXNoKFwiICsgaSArIFwiKTsgfVxcblwiICsgaWR0ICsgXCJyZXR1cm4gXCIgKyByZXN1bHQgKyBcIjtcXG5cIiArIG8uaW5kZW50O1xuICAgICAgaGFzQXJncyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgIT0gbnVsbCA/IG5vZGUuY29udGFpbnMoaXNMaXRlcmFsQXJndW1lbnRzKSA6IHZvaWQgMDtcbiAgICAgIH07XG4gICAgICBpZiAoaGFzQXJncyh0aGlzLmZyb20pIHx8IGhhc0FyZ3ModGhpcy50bykpIHtcbiAgICAgICAgYXJncyA9ICcsIGFyZ3VtZW50cyc7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoXCIoZnVuY3Rpb24oKSB7XCIgKyBwcmUgKyBcIlxcblwiICsgaWR0ICsgXCJmb3IgKFwiICsgYm9keSArIFwiKVwiICsgcG9zdCArIFwifSkuYXBwbHkodGhpc1wiICsgKGFyZ3MgIT0gbnVsbCA/IGFyZ3MgOiAnJykgKyBcIilcIildO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmFuZ2U7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5TbGljZSA9IFNsaWNlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTbGljZSwgX3N1cGVyKTtcblxuICAgIFNsaWNlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsncmFuZ2UnXTtcblxuICAgIGZ1bmN0aW9uIFNsaWNlKHJhbmdlKSB7XG4gICAgICB0aGlzLnJhbmdlID0gcmFuZ2U7XG4gICAgICBTbGljZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTbGljZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY29tcGlsZWQsIGNvbXBpbGVkVGV4dCwgZnJvbSwgZnJvbUNvbXBpbGVkLCB0bywgdG9TdHIsIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLnJhbmdlLCB0byA9IF9yZWYyLnRvLCBmcm9tID0gX3JlZjIuZnJvbTtcbiAgICAgIGZyb21Db21waWxlZCA9IGZyb20gJiYgZnJvbS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pIHx8IFt0aGlzLm1ha2VDb2RlKCcwJyldO1xuICAgICAgaWYgKHRvKSB7XG4gICAgICAgIGNvbXBpbGVkID0gdG8uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKTtcbiAgICAgICAgY29tcGlsZWRUZXh0ID0gZnJhZ21lbnRzVG9UZXh0KGNvbXBpbGVkKTtcbiAgICAgICAgaWYgKCEoIXRoaXMucmFuZ2UuZXhjbHVzaXZlICYmICtjb21waWxlZFRleHQgPT09IC0xKSkge1xuICAgICAgICAgIHRvU3RyID0gJywgJyArICh0aGlzLnJhbmdlLmV4Y2x1c2l2ZSA/IGNvbXBpbGVkVGV4dCA6IFNJTVBMRU5VTS50ZXN0KGNvbXBpbGVkVGV4dCkgPyBcIlwiICsgKCtjb21waWxlZFRleHQgKyAxKSA6IChjb21waWxlZCA9IHRvLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9BQ0NFU1MpLCBcIitcIiArIChmcmFnbWVudHNUb1RleHQoY29tcGlsZWQpKSArIFwiICsgMSB8fCA5ZTlcIikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoXCIuc2xpY2UoXCIgKyAoZnJhZ21lbnRzVG9UZXh0KGZyb21Db21waWxlZCkpICsgKHRvU3RyIHx8ICcnKSArIFwiKVwiKV07XG4gICAgfTtcblxuICAgIHJldHVybiBTbGljZTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLk9iaiA9IE9iaiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JqLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gT2JqKHByb3BzLCBnZW5lcmF0ZWQpIHtcbiAgICAgIHRoaXMuZ2VuZXJhdGVkID0gZ2VuZXJhdGVkICE9IG51bGwgPyBnZW5lcmF0ZWQgOiBmYWxzZTtcbiAgICAgIHRoaXMub2JqZWN0cyA9IHRoaXMucHJvcGVydGllcyA9IHByb3BzIHx8IFtdO1xuICAgICAgT2JqLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE9iai5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3Byb3BlcnRpZXMnXTtcblxuICAgIE9iai5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBpLCBpZHQsIGluZGVudCwgam9pbiwgbGFzdE5vbmNvbSwgbm9kZSwgcHJvcCwgcHJvcHMsIF9pLCBfaiwgX2xlbiwgX2xlbjE7XG4gICAgICBwcm9wcyA9IHRoaXMucHJvcGVydGllcztcbiAgICAgIGlmICghcHJvcHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZSh0aGlzLmZyb250ID8gJyh7fSknIDogJ3t9JyldO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVkKSB7XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gcHJvcHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBub2RlID0gcHJvcHNbX2ldO1xuICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgICAgIG5vZGUuZXJyb3IoJ2Nhbm5vdCBoYXZlIGFuIGltcGxpY2l0IHZhbHVlIGluIGFuIGltcGxpY2l0IG9iamVjdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWR0ID0gby5pbmRlbnQgKz0gVEFCO1xuICAgICAgbGFzdE5vbmNvbSA9IHRoaXMubGFzdE5vbkNvbW1lbnQodGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgIGFuc3dlciA9IFtdO1xuICAgICAgZm9yIChpID0gX2ogPSAwLCBfbGVuMSA9IHByb3BzLmxlbmd0aDsgX2ogPCBfbGVuMTsgaSA9ICsrX2opIHtcbiAgICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICBqb2luID0gaSA9PT0gcHJvcHMubGVuZ3RoIC0gMSA/ICcnIDogcHJvcCA9PT0gbGFzdE5vbmNvbSB8fCBwcm9wIGluc3RhbmNlb2YgQ29tbWVudCA/ICdcXG4nIDogJyxcXG4nO1xuICAgICAgICBpbmRlbnQgPSBwcm9wIGluc3RhbmNlb2YgQ29tbWVudCA/ICcnIDogaWR0O1xuICAgICAgICBpZiAocHJvcCBpbnN0YW5jZW9mIEFzc2lnbiAmJiBwcm9wLnZhcmlhYmxlIGluc3RhbmNlb2YgVmFsdWUgJiYgcHJvcC52YXJpYWJsZS5oYXNQcm9wZXJ0aWVzKCkpIHtcbiAgICAgICAgICBwcm9wLnZhcmlhYmxlLmVycm9yKCdJbnZhbGlkIG9iamVjdCBrZXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcCBpbnN0YW5jZW9mIFZhbHVlICYmIHByb3BbXCJ0aGlzXCJdKSB7XG4gICAgICAgICAgcHJvcCA9IG5ldyBBc3NpZ24ocHJvcC5wcm9wZXJ0aWVzWzBdLm5hbWUsIHByb3AsICdvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShwcm9wIGluc3RhbmNlb2YgQ29tbWVudCkpIHtcbiAgICAgICAgICBpZiAoIShwcm9wIGluc3RhbmNlb2YgQXNzaWduKSkge1xuICAgICAgICAgICAgcHJvcCA9IG5ldyBBc3NpZ24ocHJvcCwgcHJvcCwgJ29iamVjdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAocHJvcC52YXJpYWJsZS5iYXNlIHx8IHByb3AudmFyaWFibGUpLmFzS2V5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShpbmRlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIucHVzaC5hcHBseShhbnN3ZXIsIHByb3AuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCkpO1xuICAgICAgICBpZiAoam9pbikge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoam9pbikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhbnN3ZXIudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwie1wiICsgKHByb3BzLmxlbmd0aCAmJiAnXFxuJykpKTtcbiAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCJcIiArIChwcm9wcy5sZW5ndGggJiYgJ1xcbicgKyB0aGlzLnRhYikgKyBcIn1cIikpO1xuICAgICAgaWYgKHRoaXMuZnJvbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGFuc3dlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBPYmoucHJvdG90eXBlLmFzc2lnbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgcHJvcCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHByb3AgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChwcm9wLmFzc2lnbnMobmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBPYmoucHJvdG90eXBlLmljZWRUb1Nsb3QgPSBmdW5jdGlvbihpKSB7XG4gICAgICB2YXIgYWNjZXNzLCBwcm9wLCBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuICAgICAgX3JlZjIgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwcm9wID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAocHJvcCBpbnN0YW5jZW9mIEFzc2lnbikge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goKHByb3AudmFsdWUuaWNlZFRvU2xvdChpKSkuYWRkQWNjZXNzKHByb3AudmFyaWFibGUuaWNlZFRvU2xvdEFjY2VzcygpKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcCBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgICAgYWNjZXNzID0gcHJvcC5pY2VkVG9TbG90QWNjZXNzKCk7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCgocHJvcC5pY2VkVG9TbG90KGkpKS5hZGRBY2Nlc3MoYWNjZXNzKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIHJldHVybiBPYmo7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5BcnIgPSBBcnIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFyciwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEFycihvYmpzKSB7XG4gICAgICB0aGlzLm9iamVjdHMgPSBvYmpzIHx8IFtdO1xuICAgICAgQXJyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEFyci5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ29iamVjdHMnXTtcblxuICAgIEFyci5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBjb21waWxlZE9ianMsIGZyYWdtZW50cywgaW5kZXgsIG9iaiwgX2ksIF9sZW47XG4gICAgICBpZiAoIXRoaXMub2JqZWN0cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKCdbXScpXTtcbiAgICAgIH1cbiAgICAgIG8uaW5kZW50ICs9IFRBQjtcbiAgICAgIGFuc3dlciA9IFNwbGF0LmNvbXBpbGVTcGxhdHRlZEFycmF5KG8sIHRoaXMub2JqZWN0cyk7XG4gICAgICBpZiAoYW5zd2VyLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgfVxuICAgICAgYW5zd2VyID0gW107XG4gICAgICBjb21waWxlZE9ianMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmMiA9IHRoaXMub2JqZWN0cztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIG9iaiA9IF9yZWYyW19pXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKG9iai5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICBmb3IgKGluZGV4ID0gX2kgPSAwLCBfbGVuID0gY29tcGlsZWRPYmpzLmxlbmd0aDsgX2kgPCBfbGVuOyBpbmRleCA9ICsrX2kpIHtcbiAgICAgICAgZnJhZ21lbnRzID0gY29tcGlsZWRPYmpzW2luZGV4XTtcbiAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIiwgXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIucHVzaC5hcHBseShhbnN3ZXIsIGZyYWdtZW50cyk7XG4gICAgICB9XG4gICAgICBpZiAoZnJhZ21lbnRzVG9UZXh0KGFuc3dlcikuaW5kZXhPZignXFxuJykgPj0gMCkge1xuICAgICAgICBhbnN3ZXIudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiW1xcblwiICsgby5pbmRlbnQpKTtcbiAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcIl1cIikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5zd2VyLnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIltcIikpO1xuICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXVwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH07XG5cbiAgICBBcnIucHJvdG90eXBlLmFzc2lnbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgb2JqLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMub2JqZWN0cztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgb2JqID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAob2JqLmFzc2lnbnMobmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXJyO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQ2xhc3MgPSBDbGFzcyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2xhc3MsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBDbGFzcyh2YXJpYWJsZSwgcGFyZW50LCBib2R5KSB7XG4gICAgICB0aGlzLnZhcmlhYmxlID0gdmFyaWFibGU7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIHRoaXMuYm9keSA9IGJvZHkgIT0gbnVsbCA/IGJvZHkgOiBuZXcgQmxvY2s7XG4gICAgICBDbGFzcy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuYm91bmRGdW5jcyA9IFtdO1xuICAgICAgdGhpcy5ib2R5LmNsYXNzQm9keSA9IHRydWU7XG4gICAgfVxuXG4gICAgQ2xhc3MucHJvdG90eXBlLmNoaWxkcmVuID0gWyd2YXJpYWJsZScsICdwYXJlbnQnLCAnYm9keSddO1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLmRldGVybWluZU5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkZWNsLCB0YWlsO1xuICAgICAgaWYgKCF0aGlzLnZhcmlhYmxlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgZGVjbCA9ICh0YWlsID0gbGFzdCh0aGlzLnZhcmlhYmxlLnByb3BlcnRpZXMpKSA/IHRhaWwgaW5zdGFuY2VvZiBBY2Nlc3MgJiYgdGFpbC5uYW1lLnZhbHVlIDogdGhpcy52YXJpYWJsZS5iYXNlLnZhbHVlO1xuICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKFNUUklDVF9QUk9TQ1JJQkVELCBkZWNsKSA+PSAwKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGUuZXJyb3IoXCJjbGFzcyB2YXJpYWJsZSBuYW1lIG1heSBub3QgYmUgXCIgKyBkZWNsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWNsICYmIChkZWNsID0gSURFTlRJRklFUi50ZXN0KGRlY2wpICYmIGRlY2wpO1xuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuc2V0Q29udGV4dCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmJvZHkudHJhdmVyc2VDaGlsZHJlbihmYWxzZSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBpZiAobm9kZS5jbGFzc0JvZHkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBMaXRlcmFsICYmIG5vZGUudmFsdWUgPT09ICd0aGlzJykge1xuICAgICAgICAgIHJldHVybiBub2RlLnZhbHVlID0gbmFtZTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgQ29kZSkge1xuICAgICAgICAgIG5vZGUua2xhc3MgPSBuYW1lO1xuICAgICAgICAgIGlmIChub2RlLmJvdW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5jb250ZXh0ID0gbmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuYWRkQm91bmRGdW5jdGlvbnMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYnZhciwgbGhzLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMuYm91bmRGdW5jcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYnZhciA9IF9yZWYyW19pXTtcbiAgICAgICAgbGhzID0gKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcInRoaXNcIiksIFtuZXcgQWNjZXNzKGJ2YXIpXSkpLmNvbXBpbGUobyk7XG4gICAgICAgIHRoaXMuY3Rvci5ib2R5LnVuc2hpZnQobmV3IExpdGVyYWwoXCJcIiArIGxocyArIFwiID0gXCIgKyAodXRpbGl0eSgnYmluZCcpKSArIFwiKFwiICsgbGhzICsgXCIsIHRoaXMpXCIpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLmFkZFByb3BlcnRpZXMgPSBmdW5jdGlvbihub2RlLCBuYW1lLCBvKSB7XG4gICAgICB2YXIgYXNzaWduLCBiYXNlLCBleHBycywgZnVuYywgcHJvcHM7XG4gICAgICBwcm9wcyA9IG5vZGUuYmFzZS5wcm9wZXJ0aWVzLnNsaWNlKDApO1xuICAgICAgZXhwcnMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfcmVzdWx0cztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgd2hpbGUgKGFzc2lnbiA9IHByb3BzLnNoaWZ0KCkpIHtcbiAgICAgICAgICBpZiAoYXNzaWduIGluc3RhbmNlb2YgQXNzaWduKSB7XG4gICAgICAgICAgICBiYXNlID0gYXNzaWduLnZhcmlhYmxlLmJhc2U7XG4gICAgICAgICAgICBkZWxldGUgYXNzaWduLmNvbnRleHQ7XG4gICAgICAgICAgICBmdW5jID0gYXNzaWduLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGJhc2UudmFsdWUgPT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuY3Rvcikge1xuICAgICAgICAgICAgICAgIGFzc2lnbi5lcnJvcignY2Fubm90IGRlZmluZSBtb3JlIHRoYW4gb25lIGNvbnN0cnVjdG9yIGluIGEgY2xhc3MnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZnVuYy5ib3VuZCkge1xuICAgICAgICAgICAgICAgIGFzc2lnbi5lcnJvcignY2Fubm90IGRlZmluZSBhIGNvbnN0cnVjdG9yIGFzIGEgYm91bmQgZnVuY3Rpb24nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZnVuYyBpbnN0YW5jZW9mIENvZGUpIHtcbiAgICAgICAgICAgICAgICBhc3NpZ24gPSB0aGlzLmN0b3IgPSBmdW5jO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxDdG9yID0gby5jbGFzc1Njb3BlLmZyZWVWYXJpYWJsZSgnY2xhc3MnKTtcbiAgICAgICAgICAgICAgICBhc3NpZ24gPSBuZXcgQXNzaWduKG5ldyBMaXRlcmFsKHRoaXMuZXh0ZXJuYWxDdG9yKSwgZnVuYyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChhc3NpZ24udmFyaWFibGVbXCJ0aGlzXCJdKSB7XG4gICAgICAgICAgICAgICAgZnVuY1tcInN0YXRpY1wiXSA9IHRydWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzaWduLnZhcmlhYmxlID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG5hbWUpLCBbbmV3IEFjY2VzcyhuZXcgTGl0ZXJhbCgncHJvdG90eXBlJykpLCBuZXcgQWNjZXNzKGJhc2UpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGZ1bmMgaW5zdGFuY2VvZiBDb2RlICYmIGZ1bmMuYm91bmQpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuYm91bmRGdW5jcy5wdXNoKGJhc2UpO1xuICAgICAgICAgICAgICAgICAgZnVuYy5ib3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGFzc2lnbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIHJldHVybiBjb21wYWN0KGV4cHJzKTtcbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLndhbGtCb2R5ID0gZnVuY3Rpb24obmFtZSwgbykge1xuICAgICAgcmV0dXJuIHRoaXMudHJhdmVyc2VDaGlsZHJlbihmYWxzZSwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICAgIHZhciBjb250LCBleHBzLCBpLCBub2RlLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICAgICAgY29udCA9IHRydWU7XG4gICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgQ2xhc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgQmxvY2spIHtcbiAgICAgICAgICAgIF9yZWYyID0gZXhwcyA9IGNoaWxkLmV4cHJlc3Npb25zO1xuICAgICAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSBfcmVmMltpXTtcbiAgICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBBc3NpZ24gJiYgbm9kZS52YXJpYWJsZS5sb29rc1N0YXRpYyhuYW1lKSkge1xuICAgICAgICAgICAgICAgIG5vZGUudmFsdWVbXCJzdGF0aWNcIl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBWYWx1ZSAmJiBub2RlLmlzT2JqZWN0KHRydWUpKSB7XG4gICAgICAgICAgICAgICAgY29udCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGV4cHNbaV0gPSBfdGhpcy5hZGRQcm9wZXJ0aWVzKG5vZGUsIG5hbWUsIG8pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZC5leHByZXNzaW9ucyA9IGV4cHMgPSBmbGF0dGVuKGV4cHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29udCAmJiAhKGNoaWxkIGluc3RhbmNlb2YgQ2xhc3MpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuaG9pc3REaXJlY3RpdmVQcm9sb2d1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGV4cHJlc3Npb25zLCBpbmRleCwgbm9kZTtcbiAgICAgIGluZGV4ID0gMDtcbiAgICAgIGV4cHJlc3Npb25zID0gdGhpcy5ib2R5LmV4cHJlc3Npb25zO1xuICAgICAgd2hpbGUgKChub2RlID0gZXhwcmVzc2lvbnNbaW5kZXhdKSAmJiBub2RlIGluc3RhbmNlb2YgQ29tbWVudCB8fCBub2RlIGluc3RhbmNlb2YgVmFsdWUgJiYgbm9kZS5pc1N0cmluZygpKSB7XG4gICAgICAgICsraW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5kaXJlY3RpdmVzID0gZXhwcmVzc2lvbnMuc3BsaWNlKDAsIGluZGV4KTtcbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLmVuc3VyZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKCF0aGlzLmN0b3IpIHtcbiAgICAgICAgdGhpcy5jdG9yID0gbmV3IENvZGU7XG4gICAgICAgIGlmICh0aGlzLmV4dGVybmFsQ3Rvcikge1xuICAgICAgICAgIHRoaXMuY3Rvci5ib2R5LnB1c2gobmV3IExpdGVyYWwoXCJcIiArIHRoaXMuZXh0ZXJuYWxDdG9yICsgXCIuYXBwbHkodGhpcywgYXJndW1lbnRzKVwiKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICB0aGlzLmN0b3IuYm9keS5wdXNoKG5ldyBMaXRlcmFsKFwiXCIgKyBuYW1lICsgXCIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcIikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Rvci5ib2R5Lm1ha2VSZXR1cm4oKTtcbiAgICAgICAgdGhpcy5ib2R5LmV4cHJlc3Npb25zLnVuc2hpZnQodGhpcy5jdG9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3Rvci5jdG9yID0gdGhpcy5jdG9yLm5hbWUgPSBuYW1lO1xuICAgICAgdGhpcy5jdG9yLmtsYXNzID0gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmN0b3Iubm9SZXR1cm4gPSB0cnVlO1xuICAgIH07XG5cbiAgICBDbGFzcy5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXJncywgYXJndW1lbnRzTm9kZSwgZnVuYywganVtcE5vZGUsIGtsYXNzLCBsbmFtZSwgbmFtZSwgc3VwZXJDbGFzcywgX3JlZjI7XG4gICAgICBpZiAoanVtcE5vZGUgPSB0aGlzLmJvZHkuanVtcHMoKSkge1xuICAgICAgICBqdW1wTm9kZS5lcnJvcignQ2xhc3MgYm9kaWVzIGNhbm5vdCBjb250YWluIHB1cmUgc3RhdGVtZW50cycpO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3VtZW50c05vZGUgPSB0aGlzLmJvZHkuY29udGFpbnMoaXNMaXRlcmFsQXJndW1lbnRzKSkge1xuICAgICAgICBhcmd1bWVudHNOb2RlLmVycm9yKFwiQ2xhc3MgYm9kaWVzIHNob3VsZG4ndCByZWZlcmVuY2UgYXJndW1lbnRzXCIpO1xuICAgICAgfVxuICAgICAgbmFtZSA9IHRoaXMuZGV0ZXJtaW5lTmFtZSgpIHx8ICdfQ2xhc3MnO1xuICAgICAgaWYgKG5hbWUucmVzZXJ2ZWQpIHtcbiAgICAgICAgbmFtZSA9IFwiX1wiICsgbmFtZTtcbiAgICAgIH1cbiAgICAgIGxuYW1lID0gbmV3IExpdGVyYWwobmFtZSk7XG4gICAgICBmdW5jID0gbmV3IENvZGUoW10sIEJsb2NrLndyYXAoW3RoaXMuYm9keV0pKTtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIG8uY2xhc3NTY29wZSA9IGZ1bmMubWFrZVNjb3BlKG8uc2NvcGUpO1xuICAgICAgdGhpcy5ob2lzdERpcmVjdGl2ZVByb2xvZ3VlKCk7XG4gICAgICB0aGlzLnNldENvbnRleHQobmFtZSk7XG4gICAgICB0aGlzLndhbGtCb2R5KG5hbWUsIG8pO1xuICAgICAgdGhpcy5lbnN1cmVDb25zdHJ1Y3RvcihuYW1lKTtcbiAgICAgIHRoaXMuYWRkQm91bmRGdW5jdGlvbnMobyk7XG4gICAgICB0aGlzLmJvZHkuc3BhY2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuYm9keS5leHByZXNzaW9ucy5wdXNoKGxuYW1lKTtcbiAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICBzdXBlckNsYXNzID0gbmV3IExpdGVyYWwoby5jbGFzc1Njb3BlLmZyZWVWYXJpYWJsZSgnc3VwZXInLCBmYWxzZSkpO1xuICAgICAgICB0aGlzLmJvZHkuZXhwcmVzc2lvbnMudW5zaGlmdChuZXcgRXh0ZW5kcyhsbmFtZSwgc3VwZXJDbGFzcykpO1xuICAgICAgICBmdW5jLnBhcmFtcy5wdXNoKG5ldyBQYXJhbShzdXBlckNsYXNzKSk7XG4gICAgICAgIGFyZ3MucHVzaCh0aGlzLnBhcmVudCk7XG4gICAgICB9XG4gICAgICAoX3JlZjIgPSB0aGlzLmJvZHkuZXhwcmVzc2lvbnMpLnVuc2hpZnQuYXBwbHkoX3JlZjIsIHRoaXMuZGlyZWN0aXZlcyk7XG4gICAgICBrbGFzcyA9IG5ldyBQYXJlbnMobmV3IENhbGwoZnVuYywgYXJncykpO1xuICAgICAgaWYgKHRoaXMudmFyaWFibGUpIHtcbiAgICAgICAga2xhc3MgPSBuZXcgQXNzaWduKHRoaXMudmFyaWFibGUsIGtsYXNzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrbGFzcy5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDbGFzcztcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkFzc2lnbiA9IEFzc2lnbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXNzaWduLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQXNzaWduKHZhcmlhYmxlLCB2YWx1ZSwgY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgdmFyIGZvcmJpZGRlbiwgbmFtZSwgX3JlZjI7XG4gICAgICB0aGlzLnZhcmlhYmxlID0gdmFyaWFibGU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgQXNzaWduLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5wYXJhbSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5wYXJhbTtcbiAgICAgIHRoaXMuc3VicGF0dGVybiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zdWJwYXR0ZXJuO1xuICAgICAgZm9yYmlkZGVuID0gKF9yZWYyID0gKG5hbWUgPSB0aGlzLnZhcmlhYmxlLnVud3JhcEFsbCgpLnZhbHVlKSwgX19pbmRleE9mLmNhbGwoU1RSSUNUX1BST1NDUklCRUQsIF9yZWYyKSA+PSAwKTtcbiAgICAgIGlmIChmb3JiaWRkZW4gJiYgdGhpcy5jb250ZXh0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aGlzLnZhcmlhYmxlLmVycm9yKFwidmFyaWFibGUgbmFtZSBtYXkgbm90IGJlIFxcXCJcIiArIG5hbWUgKyBcIlxcXCJcIik7XG4gICAgICB9XG4gICAgICB0aGlzLmljZWRsb2NhbCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pY2VkbG9jYWw7XG4gICAgfVxuXG4gICAgQXNzaWduLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsndmFyaWFibGUnLCAndmFsdWUnXTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gKG8gIT0gbnVsbCA/IG8ubGV2ZWwgOiB2b2lkIDApID09PSBMRVZFTF9UT1AgJiYgKHRoaXMuY29udGV4dCAhPSBudWxsKSAmJiBfX2luZGV4T2YuY2FsbCh0aGlzLmNvbnRleHQsIFwiP1wiKSA+PSAwO1xuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmFzc2lnbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpc1t0aGlzLmNvbnRleHQgPT09ICdvYmplY3QnID8gJ3ZhbHVlJyA6ICd2YXJpYWJsZSddLmFzc2lnbnMobmFtZSk7XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUudW5mb2xkU29hayA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB1bmZvbGRTb2FrKG8sIHRoaXMsICd2YXJpYWJsZScpO1xuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgY29tcGlsZWROYW1lLCBpc1ZhbHVlLCBtYXRjaCwgbmFtZSwgdmFsLCB2YXJCYXNlLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNTtcbiAgICAgIHRoaXMudmFsdWUuaWNlZFN0YXRlbWVudEFzc2VydGlvbigpO1xuICAgICAgaWYgKGlzVmFsdWUgPSB0aGlzLnZhcmlhYmxlIGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGUuaXNBcnJheSgpIHx8IHRoaXMudmFyaWFibGUuaXNPYmplY3QoKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVQYXR0ZXJuTWF0Y2gobyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGUuaXNTcGxpY2UoKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVTcGxpY2Uobyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfcmVmMiA9IHRoaXMuY29udGV4dCkgPT09ICd8fD0nIHx8IF9yZWYyID09PSAnJiY9JyB8fCBfcmVmMiA9PT0gJz89Jykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVDb25kaXRpb25hbChvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9yZWYzID0gdGhpcy5jb250ZXh0KSA9PT0gJyoqPScgfHwgX3JlZjMgPT09ICcvLz0nIHx8IF9yZWYzID09PSAnJSU9Jykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVTcGVjaWFsTWF0aChvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29tcGlsZWROYW1lID0gdGhpcy52YXJpYWJsZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgICBuYW1lID0gZnJhZ21lbnRzVG9UZXh0KGNvbXBpbGVkTmFtZSk7XG4gICAgICBpZiAoIXRoaXMuY29udGV4dCkge1xuICAgICAgICB2YXJCYXNlID0gdGhpcy52YXJpYWJsZS51bndyYXBBbGwoKTtcbiAgICAgICAgaWYgKCF2YXJCYXNlLmlzQXNzaWduYWJsZSgpKSB7XG4gICAgICAgICAgdGhpcy52YXJpYWJsZS5lcnJvcihcIlxcXCJcIiArICh0aGlzLnZhcmlhYmxlLmNvbXBpbGUobykpICsgXCJcXFwiIGNhbm5vdCBiZSBhc3NpZ25lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISh0eXBlb2YgdmFyQmFzZS5oYXNQcm9wZXJ0aWVzID09PSBcImZ1bmN0aW9uXCIgPyB2YXJCYXNlLmhhc1Byb3BlcnRpZXMoKSA6IHZvaWQgMCkpIHtcbiAgICAgICAgICBpZiAodGhpcy5wYXJhbSB8fCB0aGlzLmljZWRsb2NhbCkge1xuICAgICAgICAgICAgby5zY29wZS5hZGQobmFtZSwgJ3ZhcicsIHRoaXMuaWNlZGxvY2FsKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby5zY29wZS5maW5kKG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMudmFsdWUgaW5zdGFuY2VvZiBDb2RlICYmIChtYXRjaCA9IE1FVEhPRF9ERUYuZXhlYyhuYW1lKSkpIHtcbiAgICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgICAgdGhpcy52YWx1ZS5rbGFzcyA9IG1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWUubmFtZSA9IChfcmVmNCA9IChfcmVmNSA9IG1hdGNoWzNdKSAhPSBudWxsID8gX3JlZjUgOiBtYXRjaFs0XSkgIT0gbnVsbCA/IF9yZWY0IDogbWF0Y2hbNV07XG4gICAgICB9XG4gICAgICB2YWwgPSB0aGlzLnZhbHVlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICAgIGlmICh0aGlzLmNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjb21waWxlZE5hbWUuY29uY2F0KHRoaXMubWFrZUNvZGUoXCI6IFwiKSwgdmFsKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlciA9IGNvbXBpbGVkTmFtZS5jb25jYXQodGhpcy5tYWtlQ29kZShcIiBcIiArICh0aGlzLmNvbnRleHQgfHwgJz0nKSArIFwiIFwiKSwgdmFsKTtcbiAgICAgIGlmIChvLmxldmVsIDw9IExFVkVMX0xJU1QpIHtcbiAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhhbnN3ZXIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmNvbXBpbGVQYXR0ZXJuTWF0Y2ggPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYWNjLCBhc3NpZ25zLCBjb2RlLCBleHBhbmRlZElkeCwgZnJhZ21lbnRzLCBpLCBpZHgsIGlzT2JqZWN0LCBpdmFyLCBuYW1lLCBvYmosIG9iamVjdHMsIG9sZW4sIHJlZiwgcmVzdCwgdG9wLCB2YWwsIHZhbHVlLCB2dmFyLCB2dmFyVGV4dCwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1LCBfcmVmNiwgX3JlZjc7XG4gICAgICB0b3AgPSBvLmxldmVsID09PSBMRVZFTF9UT1A7XG4gICAgICB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICBvYmplY3RzID0gdGhpcy52YXJpYWJsZS5iYXNlLm9iamVjdHM7XG4gICAgICBpZiAoIShvbGVuID0gb2JqZWN0cy5sZW5ndGgpKSB7XG4gICAgICAgIGNvZGUgPSB2YWx1ZS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICAgIGlmIChvLmxldmVsID49IExFVkVMX09QKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGNvZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBjb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpc09iamVjdCA9IHRoaXMudmFyaWFibGUuaXNPYmplY3QoKTtcbiAgICAgIGlmICh0b3AgJiYgb2xlbiA9PT0gMSAmJiAhKChvYmogPSBvYmplY3RzWzBdKSBpbnN0YW5jZW9mIFNwbGF0KSkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQXNzaWduKSB7XG4gICAgICAgICAgX3JlZjIgPSBvYmosIChfcmVmMyA9IF9yZWYyLnZhcmlhYmxlLCBpZHggPSBfcmVmMy5iYXNlKSwgb2JqID0gX3JlZjIudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWR4ID0gaXNPYmplY3QgPyBvYmpbXCJ0aGlzXCJdID8gb2JqLnByb3BlcnRpZXNbMF0ubmFtZSA6IG9iaiA6IG5ldyBMaXRlcmFsKDApO1xuICAgICAgICB9XG4gICAgICAgIGFjYyA9IElERU5USUZJRVIudGVzdChpZHgudW53cmFwKCkudmFsdWUgfHwgMCk7XG4gICAgICAgIHZhbHVlID0gbmV3IFZhbHVlKHZhbHVlKTtcbiAgICAgICAgdmFsdWUucHJvcGVydGllcy5wdXNoKG5ldyAoYWNjID8gQWNjZXNzIDogSW5kZXgpKGlkeCkpO1xuICAgICAgICBpZiAoX3JlZjQgPSBvYmoudW53cmFwKCkudmFsdWUsIF9faW5kZXhPZi5jYWxsKFJFU0VSVkVELCBfcmVmNCkgPj0gMCkge1xuICAgICAgICAgIG9iai5lcnJvcihcImFzc2lnbm1lbnQgdG8gYSByZXNlcnZlZCB3b3JkOiBcIiArIChvYmouY29tcGlsZShvKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQXNzaWduKG9iaiwgdmFsdWUsIG51bGwsIHtcbiAgICAgICAgICBwYXJhbTogdGhpcy5wYXJhbVxuICAgICAgICB9KS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKTtcbiAgICAgIH1cbiAgICAgIHZ2YXIgPSB2YWx1ZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgICB2dmFyVGV4dCA9IGZyYWdtZW50c1RvVGV4dCh2dmFyKTtcbiAgICAgIGFzc2lnbnMgPSBbXTtcbiAgICAgIGV4cGFuZGVkSWR4ID0gZmFsc2U7XG4gICAgICBpZiAoIUlERU5USUZJRVIudGVzdCh2dmFyVGV4dCkgfHwgdGhpcy52YXJpYWJsZS5hc3NpZ25zKHZ2YXJUZXh0KSkge1xuICAgICAgICBhc3NpZ25zLnB1c2goW3RoaXMubWFrZUNvZGUoXCJcIiArIChyZWYgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgncmVmJykpICsgXCIgPSBcIildLmNvbmNhdChfX3NsaWNlLmNhbGwodnZhcikpKTtcbiAgICAgICAgdnZhciA9IFt0aGlzLm1ha2VDb2RlKHJlZildO1xuICAgICAgICB2dmFyVGV4dCA9IHJlZjtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IG9iamVjdHMubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIG9iaiA9IG9iamVjdHNbaV07XG4gICAgICAgIGlkeCA9IGk7XG4gICAgICAgIGlmIChpc09iamVjdCkge1xuICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBc3NpZ24pIHtcbiAgICAgICAgICAgIF9yZWY1ID0gb2JqLCAoX3JlZjYgPSBfcmVmNS52YXJpYWJsZSwgaWR4ID0gX3JlZjYuYmFzZSksIG9iaiA9IF9yZWY1LnZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAob2JqLmJhc2UgaW5zdGFuY2VvZiBQYXJlbnMpIHtcbiAgICAgICAgICAgICAgX3JlZjcgPSBuZXcgVmFsdWUob2JqLnVud3JhcEFsbCgpKS5jYWNoZVJlZmVyZW5jZShvKSwgb2JqID0gX3JlZjdbMF0sIGlkeCA9IF9yZWY3WzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWR4ID0gb2JqW1widGhpc1wiXSA/IG9iai5wcm9wZXJ0aWVzWzBdLm5hbWUgOiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZXhwYW5kZWRJZHggJiYgb2JqIGluc3RhbmNlb2YgU3BsYXQpIHtcbiAgICAgICAgICBuYW1lID0gb2JqLm5hbWUudW53cmFwKCkudmFsdWU7XG4gICAgICAgICAgb2JqID0gb2JqLnVud3JhcCgpO1xuICAgICAgICAgIHZhbCA9IFwiXCIgKyBvbGVuICsgXCIgPD0gXCIgKyB2dmFyVGV4dCArIFwiLmxlbmd0aCA/IFwiICsgKHV0aWxpdHkoJ3NsaWNlJykpICsgXCIuY2FsbChcIiArIHZ2YXJUZXh0ICsgXCIsIFwiICsgaTtcbiAgICAgICAgICBpZiAocmVzdCA9IG9sZW4gLSBpIC0gMSkge1xuICAgICAgICAgICAgaXZhciA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdpJyk7XG4gICAgICAgICAgICB2YWwgKz0gXCIsIFwiICsgaXZhciArIFwiID0gXCIgKyB2dmFyVGV4dCArIFwiLmxlbmd0aCAtIFwiICsgcmVzdCArIFwiKSA6IChcIiArIGl2YXIgKyBcIiA9IFwiICsgaSArIFwiLCBbXSlcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsICs9IFwiKSA6IFtdXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbCA9IG5ldyBMaXRlcmFsKHZhbCk7XG4gICAgICAgICAgZXhwYW5kZWRJZHggPSBcIlwiICsgaXZhciArIFwiKytcIjtcbiAgICAgICAgfSBlbHNlIGlmICghZXhwYW5kZWRJZHggJiYgb2JqIGluc3RhbmNlb2YgRXhwYW5zaW9uKSB7XG4gICAgICAgICAgaWYgKHJlc3QgPSBvbGVuIC0gaSAtIDEpIHtcbiAgICAgICAgICAgIGlmIChyZXN0ID09PSAxKSB7XG4gICAgICAgICAgICAgIGV4cGFuZGVkSWR4ID0gXCJcIiArIHZ2YXJUZXh0ICsgXCIubGVuZ3RoIC0gMVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaXZhciA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdpJyk7XG4gICAgICAgICAgICAgIHZhbCA9IG5ldyBMaXRlcmFsKFwiXCIgKyBpdmFyICsgXCIgPSBcIiArIHZ2YXJUZXh0ICsgXCIubGVuZ3RoIC0gXCIgKyByZXN0KTtcbiAgICAgICAgICAgICAgZXhwYW5kZWRJZHggPSBcIlwiICsgaXZhciArIFwiKytcIjtcbiAgICAgICAgICAgICAgYXNzaWducy5wdXNoKHZhbC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYW1lID0gb2JqLnVud3JhcCgpLnZhbHVlO1xuICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBTcGxhdCB8fCBvYmogaW5zdGFuY2VvZiBFeHBhbnNpb24pIHtcbiAgICAgICAgICAgIG9iai5lcnJvcihcIm11bHRpcGxlIHNwbGF0cy9leHBhbnNpb25zIGFyZSBkaXNhbGxvd2VkIGluIGFuIGFzc2lnbm1lbnRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgaWR4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgaWR4ID0gbmV3IExpdGVyYWwoZXhwYW5kZWRJZHggfHwgaWR4KTtcbiAgICAgICAgICAgIGFjYyA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY2MgPSBpc09iamVjdCAmJiBJREVOVElGSUVSLnRlc3QoaWR4LnVud3JhcCgpLnZhbHVlIHx8IDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwodnZhclRleHQpLCBbbmV3IChhY2MgPyBBY2Nlc3MgOiBJbmRleCkoaWR4KV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgobmFtZSAhPSBudWxsKSAmJiBfX2luZGV4T2YuY2FsbChSRVNFUlZFRCwgbmFtZSkgPj0gMCkge1xuICAgICAgICAgIG9iai5lcnJvcihcImFzc2lnbm1lbnQgdG8gYSByZXNlcnZlZCB3b3JkOiBcIiArIChvYmouY29tcGlsZShvKSkpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbnMucHVzaChuZXcgQXNzaWduKG9iaiwgdmFsLCBudWxsLCB7XG4gICAgICAgICAgcGFyYW06IHRoaXMucGFyYW0sXG4gICAgICAgICAgc3VicGF0dGVybjogdHJ1ZVxuICAgICAgICB9KS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkpO1xuICAgICAgfVxuICAgICAgaWYgKCEodG9wIHx8IHRoaXMuc3VicGF0dGVybikpIHtcbiAgICAgICAgYXNzaWducy5wdXNoKHZ2YXIpO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzID0gdGhpcy5qb2luRnJhZ21lbnRBcnJheXMoYXNzaWducywgJywgJyk7XG4gICAgICBpZiAoby5sZXZlbCA8IExFVkVMX0xJU1QpIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhmcmFnbWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmNvbXBpbGVDb25kaXRpb25hbCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBmcmFnbWVudHMsIGxlZnQsIHJpZ2h0LCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy52YXJpYWJsZS5jYWNoZVJlZmVyZW5jZShvKSwgbGVmdCA9IF9yZWYyWzBdLCByaWdodCA9IF9yZWYyWzFdO1xuICAgICAgaWYgKCFsZWZ0LnByb3BlcnRpZXMubGVuZ3RoICYmIGxlZnQuYmFzZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgbGVmdC5iYXNlLnZhbHVlICE9PSBcInRoaXNcIiAmJiAhby5zY29wZS5jaGVjayhsZWZ0LmJhc2UudmFsdWUpKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGUuZXJyb3IoXCJ0aGUgdmFyaWFibGUgXFxcIlwiICsgbGVmdC5iYXNlLnZhbHVlICsgXCJcXFwiIGNhbid0IGJlIGFzc2lnbmVkIHdpdGggXCIgKyB0aGlzLmNvbnRleHQgKyBcIiBiZWNhdXNlIGl0IGhhcyBub3QgYmVlbiBkZWNsYXJlZCBiZWZvcmVcIik7XG4gICAgICB9XG4gICAgICBpZiAoX19pbmRleE9mLmNhbGwodGhpcy5jb250ZXh0LCBcIj9cIikgPj0gMCkge1xuICAgICAgICBvLmlzRXhpc3RlbnRpYWxFcXVhbHMgPSB0cnVlO1xuICAgICAgICByZXR1cm4gbmV3IElmKG5ldyBFeGlzdGVuY2UobGVmdCksIHJpZ2h0LCB7XG4gICAgICAgICAgdHlwZTogJ2lmJ1xuICAgICAgICB9KS5hZGRFbHNlKG5ldyBBc3NpZ24ocmlnaHQsIHRoaXMudmFsdWUsICc9JykpLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyYWdtZW50cyA9IG5ldyBPcCh0aGlzLmNvbnRleHQuc2xpY2UoMCwgLTEpLCBsZWZ0LCBuZXcgQXNzaWduKHJpZ2h0LCB0aGlzLnZhbHVlLCAnPScpKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICAgIGlmIChvLmxldmVsIDw9IExFVkVMX0xJU1QpIHtcbiAgICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhmcmFnbWVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIEFzc2lnbi5wcm90b3R5cGUuY29tcGlsZVNwZWNpYWxNYXRoID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGxlZnQsIHJpZ2h0LCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy52YXJpYWJsZS5jYWNoZVJlZmVyZW5jZShvKSwgbGVmdCA9IF9yZWYyWzBdLCByaWdodCA9IF9yZWYyWzFdO1xuICAgICAgcmV0dXJuIG5ldyBBc3NpZ24obGVmdCwgbmV3IE9wKHRoaXMuY29udGV4dC5zbGljZSgwLCAtMSksIHJpZ2h0LCB0aGlzLnZhbHVlKSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmNvbXBpbGVTcGxpY2UgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBleGNsdXNpdmUsIGZyb20sIGZyb21EZWNsLCBmcm9tUmVmLCBuYW1lLCB0bywgdmFsRGVmLCB2YWxSZWYsIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBfcmVmMiA9IHRoaXMudmFyaWFibGUucHJvcGVydGllcy5wb3AoKS5yYW5nZSwgZnJvbSA9IF9yZWYyLmZyb20sIHRvID0gX3JlZjIudG8sIGV4Y2x1c2l2ZSA9IF9yZWYyLmV4Y2x1c2l2ZTtcbiAgICAgIG5hbWUgPSB0aGlzLnZhcmlhYmxlLmNvbXBpbGUobyk7XG4gICAgICBpZiAoZnJvbSkge1xuICAgICAgICBfcmVmMyA9IHRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHMoZnJvbS5jYWNoZShvLCBMRVZFTF9PUCkpLCBmcm9tRGVjbCA9IF9yZWYzWzBdLCBmcm9tUmVmID0gX3JlZjNbMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcm9tRGVjbCA9IGZyb21SZWYgPSAnMCc7XG4gICAgICB9XG4gICAgICBpZiAodG8pIHtcbiAgICAgICAgaWYgKGZyb20gaW5zdGFuY2VvZiBWYWx1ZSAmJiBmcm9tLmlzU2ltcGxlTnVtYmVyKCkgJiYgdG8gaW5zdGFuY2VvZiBWYWx1ZSAmJiB0by5pc1NpbXBsZU51bWJlcigpKSB7XG4gICAgICAgICAgdG8gPSB0by5jb21waWxlKG8pIC0gZnJvbVJlZjtcbiAgICAgICAgICBpZiAoIWV4Y2x1c2l2ZSkge1xuICAgICAgICAgICAgdG8gKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG8gPSB0by5jb21waWxlKG8sIExFVkVMX0FDQ0VTUykgKyAnIC0gJyArIGZyb21SZWY7XG4gICAgICAgICAgaWYgKCFleGNsdXNpdmUpIHtcbiAgICAgICAgICAgIHRvICs9ICcgKyAxJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvID0gXCI5ZTlcIjtcbiAgICAgIH1cbiAgICAgIF9yZWY0ID0gdGhpcy52YWx1ZS5jYWNoZShvLCBMRVZFTF9MSVNUKSwgdmFsRGVmID0gX3JlZjRbMF0sIHZhbFJlZiA9IF9yZWY0WzFdO1xuICAgICAgYW5zd2VyID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJbXS5zcGxpY2UuYXBwbHkoXCIgKyBuYW1lICsgXCIsIFtcIiArIGZyb21EZWNsICsgXCIsIFwiICsgdG8gKyBcIl0uY29uY2F0KFwiKSwgdmFsRGVmLCB0aGlzLm1ha2VDb2RlKFwiKSksIFwiKSwgdmFsUmVmKTtcbiAgICAgIGlmIChvLmxldmVsID4gTEVWRUxfVE9QKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhhbnN3ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEFzc2lnbjtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkNvZGUgPSBDb2RlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2RlLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQ29kZShwYXJhbXMsIGJvZHksIHRhZykge1xuICAgICAgQ29kZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zIHx8IFtdO1xuICAgICAgdGhpcy5ib2R5ID0gYm9keSB8fCBuZXcgQmxvY2s7XG4gICAgICB0aGlzLmljZWRnZW4gPSB0YWcgPT09ICdpY2VkZ2VuJztcbiAgICAgIHRoaXMuaWNlZFBhc3NlZERlZmVycmFsID0gbnVsbDtcbiAgICAgIHRoaXMuYm91bmQgPSB0YWcgPT09ICdib3VuZGZ1bmMnIHx8IHRoaXMuaWNlZGdlbjtcbiAgICAgIHRoaXMuaXNHZW5lcmF0b3IgPSB0aGlzLmJvZHkuY29udGFpbnMoZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgX3JlZjI7XG4gICAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3AgJiYgKChfcmVmMiA9IG5vZGUub3BlcmF0b3IpID09PSAneWllbGQnIHx8IF9yZWYyID09PSAneWllbGQqJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBDb2RlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsncGFyYW1zJywgJ2JvZHknXTtcblxuICAgIENvZGUucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmN0b3I7XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmp1bXBzID0gTk87XG5cbiAgICBDb2RlLnByb3RvdHlwZS5tYWtlU2NvcGUgPSBmdW5jdGlvbihwYXJlbnRTY29wZSkge1xuICAgICAgcmV0dXJuIG5ldyBTY29wZShwYXJlbnRTY29wZSwgdGhpcy5ib2R5LCB0aGlzKTtcbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBib3VuZGZ1bmMsIGNvZGUsIGV4cHJzLCBpLCBsaXQsIHAsIHBhcmFtLCBwYXJhbXMsIHJlZiwgc3BsYXRzLCB1bmlxcywgdmFsLCB3YXNFbXB0eSwgd3JhcHBlciwgX2ksIF9qLCBfaywgX2wsIF9sZW4sIF9sZW4xLCBfbGVuMiwgX2xlbjMsIF9sZW40LCBfbGVuNSwgX20sIF9uLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNSwgX3JlZjYsIF9yZWY3O1xuICAgICAgaWYgKHRoaXMuYm91bmQgJiYgKChfcmVmMiA9IG8uc2NvcGUubWV0aG9kKSAhPSBudWxsID8gX3JlZjIuYm91bmQgOiB2b2lkIDApKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG8uc2NvcGUubWV0aG9kLmNvbnRleHQ7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5ib3VuZCAmJiAhdGhpcy5jb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9ICdfdGhpcyc7XG4gICAgICAgIHdyYXBwZXIgPSBuZXcgQ29kZShbbmV3IFBhcmFtKG5ldyBMaXRlcmFsKHRoaXMuY29udGV4dCkpXSwgbmV3IEJsb2NrKFt0aGlzXSkpO1xuICAgICAgICBib3VuZGZ1bmMgPSBuZXcgQ2FsbCh3cmFwcGVyLCBbbmV3IExpdGVyYWwoJ3RoaXMnKV0pO1xuICAgICAgICBib3VuZGZ1bmMudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nKHRoaXMubG9jYXRpb25EYXRhKTtcbiAgICAgICAgcmV0dXJuIGJvdW5kZnVuYy5jb21waWxlTm9kZShvKTtcbiAgICAgIH1cbiAgICAgIG8uc2NvcGUgPSBkZWwobywgJ2NsYXNzU2NvcGUnKSB8fCB0aGlzLm1ha2VTY29wZShvLnNjb3BlKTtcbiAgICAgIG8uc2NvcGUuc2hhcmVkID0gZGVsKG8sICdzaGFyZWRTY29wZScpIHx8IHRoaXMuaWNlZGdlbjtcbiAgICAgIG8uc2NvcGUuaWNlZGdlbiA9IHRoaXMuaWNlZGdlbjtcbiAgICAgIG8uaW5kZW50ICs9IFRBQjtcbiAgICAgIGRlbGV0ZSBvLmJhcmU7XG4gICAgICBkZWxldGUgby5pc0V4aXN0ZW50aWFsRXF1YWxzO1xuICAgICAgcGFyYW1zID0gW107XG4gICAgICBleHBycyA9IFtdO1xuICAgICAgX3JlZjMgPSB0aGlzLnBhcmFtcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmM1tfaV07XG4gICAgICAgIGlmICghKHBhcmFtIGluc3RhbmNlb2YgRXhwYW5zaW9uKSkge1xuICAgICAgICAgIG8uc2NvcGUucGFyYW1ldGVyKHBhcmFtLmFzUmVmZXJlbmNlKG8pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgX3JlZjQgPSB0aGlzLnBhcmFtcztcbiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWY0Lmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICBwYXJhbSA9IF9yZWY0W19qXTtcbiAgICAgICAgaWYgKCEocGFyYW0uc3BsYXQgfHwgcGFyYW0gaW5zdGFuY2VvZiBFeHBhbnNpb24pKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgX3JlZjUgPSB0aGlzLnBhcmFtcztcbiAgICAgICAgZm9yIChfayA9IDAsIF9sZW4yID0gX3JlZjUubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICAgICAgcCA9IF9yZWY1W19rXS5uYW1lO1xuICAgICAgICAgIGlmICghKCEocGFyYW0gaW5zdGFuY2VvZiBFeHBhbnNpb24pKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwW1widGhpc1wiXSkge1xuICAgICAgICAgICAgcCA9IHAucHJvcGVydGllc1swXS5uYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocC52YWx1ZSkge1xuICAgICAgICAgICAgby5zY29wZS5hZGQocC52YWx1ZSwgJ3ZhcicsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzcGxhdHMgPSBuZXcgQXNzaWduKG5ldyBWYWx1ZShuZXcgQXJyKChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2wsIF9sZW4zLCBfcmVmNiwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3JlZjYgPSB0aGlzLnBhcmFtcztcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoX2wgPSAwLCBfbGVuMyA9IF9yZWY2Lmxlbmd0aDsgX2wgPCBfbGVuMzsgX2wrKykge1xuICAgICAgICAgICAgcCA9IF9yZWY2W19sXTtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2gocC5hc1JlZmVyZW5jZShvKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbCh0aGlzKSkpLCBuZXcgVmFsdWUobmV3IExpdGVyYWwoJ2FyZ3VtZW50cycpKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgX3JlZjYgPSB0aGlzLnBhcmFtcztcbiAgICAgIGZvciAoX2wgPSAwLCBfbGVuMyA9IF9yZWY2Lmxlbmd0aDsgX2wgPCBfbGVuMzsgX2wrKykge1xuICAgICAgICBwYXJhbSA9IF9yZWY2W19sXTtcbiAgICAgICAgaWYgKHBhcmFtLmlzQ29tcGxleCgpKSB7XG4gICAgICAgICAgdmFsID0gcmVmID0gcGFyYW0uYXNSZWZlcmVuY2Uobyk7XG4gICAgICAgICAgaWYgKHBhcmFtLnZhbHVlKSB7XG4gICAgICAgICAgICB2YWwgPSBuZXcgT3AoJz8nLCByZWYsIHBhcmFtLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXhwcnMucHVzaChuZXcgQXNzaWduKG5ldyBWYWx1ZShwYXJhbS5uYW1lKSwgdmFsLCAnPScsIHtcbiAgICAgICAgICAgIHBhcmFtOiB0cnVlXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlZiA9IHBhcmFtO1xuICAgICAgICAgIGlmIChwYXJhbS52YWx1ZSkge1xuICAgICAgICAgICAgbGl0ID0gbmV3IExpdGVyYWwocmVmLm5hbWUudmFsdWUgKyAnID09IG51bGwnKTtcbiAgICAgICAgICAgIHZhbCA9IG5ldyBBc3NpZ24obmV3IFZhbHVlKHBhcmFtLm5hbWUpLCBwYXJhbS52YWx1ZSwgJz0nKTtcbiAgICAgICAgICAgIGV4cHJzLnB1c2gobmV3IElmKGxpdCwgdmFsKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghc3BsYXRzKSB7XG4gICAgICAgICAgcGFyYW1zLnB1c2gocmVmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2FzRW1wdHkgPSB0aGlzLmJvZHkuaXNFbXB0eSgpO1xuICAgICAgaWYgKHNwbGF0cykge1xuICAgICAgICBleHBycy51bnNoaWZ0KHNwbGF0cyk7XG4gICAgICB9XG4gICAgICBpZiAoZXhwcnMubGVuZ3RoKSB7XG4gICAgICAgIChfcmVmNyA9IHRoaXMuYm9keS5leHByZXNzaW9ucykudW5zaGlmdC5hcHBseShfcmVmNywgZXhwcnMpO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gX20gPSAwLCBfbGVuNCA9IHBhcmFtcy5sZW5ndGg7IF9tIDwgX2xlbjQ7IGkgPSArK19tKSB7XG4gICAgICAgIHAgPSBwYXJhbXNbaV07XG4gICAgICAgIHBhcmFtc1tpXSA9IHAuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgICBvLnNjb3BlLnBhcmFtZXRlcihmcmFnbWVudHNUb1RleHQocGFyYW1zW2ldKSk7XG4gICAgICB9XG4gICAgICB1bmlxcyA9IFtdO1xuICAgICAgdGhpcy5lYWNoUGFyYW1OYW1lKGZ1bmN0aW9uKG5hbWUsIG5vZGUpIHtcbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKHVuaXFzLCBuYW1lKSA+PSAwKSB7XG4gICAgICAgICAgbm9kZS5lcnJvcihcIm11bHRpcGxlIHBhcmFtZXRlcnMgbmFtZWQgJ1wiICsgbmFtZSArIFwiJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5pcXMucHVzaChuYW1lKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuaWNlZElzQXV0b2NiQ29kZSkge1xuICAgICAgICB3YXNFbXB0eSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCEod2FzRW1wdHkgfHwgdGhpcy5ub1JldHVybikpIHtcbiAgICAgICAgdGhpcy5ib2R5Lm1ha2VSZXR1cm4oKTtcbiAgICAgIH1cbiAgICAgIGNvZGUgPSAnZnVuY3Rpb24nO1xuICAgICAgaWYgKHRoaXMuaXNHZW5lcmF0b3IpIHtcbiAgICAgICAgY29kZSArPSAnKic7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdG9yKSB7XG4gICAgICAgIGNvZGUgKz0gJyAnICsgdGhpcy5uYW1lO1xuICAgICAgfVxuICAgICAgY29kZSArPSAnKCc7XG4gICAgICBhbnN3ZXIgPSBbdGhpcy5tYWtlQ29kZShjb2RlKV07XG4gICAgICBmb3IgKGkgPSBfbiA9IDAsIF9sZW41ID0gcGFyYW1zLmxlbmd0aDsgX24gPCBfbGVuNTsgaSA9ICsrX24pIHtcbiAgICAgICAgcCA9IHBhcmFtc1tpXTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiLCBcIikpO1xuICAgICAgICB9XG4gICAgICAgIGFuc3dlci5wdXNoLmFwcGx5KGFuc3dlciwgcCk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKCcpIHsnKSk7XG4gICAgICB0aGlzLmljZWRQYXRjaEJvZHkobyk7XG4gICAgICBpZiAoIXRoaXMuYm9keS5pc0VtcHR5KCkpIHtcbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpLCB0aGlzLmJvZHkuY29tcGlsZVdpdGhEZWNsYXJhdGlvbnMobyksIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiKSk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKCd9JykpO1xuICAgICAgaWYgKHRoaXMuY3Rvcikge1xuICAgICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUodGhpcy50YWIpXS5jb25jYXQoX19zbGljZS5jYWxsKGFuc3dlcikpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnJvbnQgfHwgKG8ubGV2ZWwgPj0gTEVWRUxfQUNDRVNTKSkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoYW5zd2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmVhY2hQYXJhbU5hbWUgPSBmdW5jdGlvbihpdGVyYXRvcikge1xuICAgICAgdmFyIHBhcmFtLCBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuICAgICAgX3JlZjIgPSB0aGlzLnBhcmFtcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjJbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKHBhcmFtLmVhY2hOYW1lKGl0ZXJhdG9yKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLnRyYXZlcnNlQ2hpbGRyZW4gPSBmdW5jdGlvbihjcm9zc1Njb3BlLCBmdW5jKSB7XG4gICAgICBpZiAoY3Jvc3NTY29wZSkge1xuICAgICAgICByZXR1cm4gQ29kZS5fX3N1cGVyX18udHJhdmVyc2VDaGlsZHJlbi5jYWxsKHRoaXMsIGNyb3NzU2NvcGUsIGZ1bmMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5pY2VkUGF0Y2hCb2R5ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGYsIGxocywgciwgcmhzO1xuICAgICAgaWYgKHRoaXMuaWNlZEZvdW5kQXJndW1lbnRzICYmIHRoaXMuaWNlZE5vZGVGbGFnKSB7XG4gICAgICAgIG8uc2NvcGUuYXNzaWduKCdfYXJndW1lbnRzJywgJ2FyZ3VtZW50cycpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZE5vZGVGbGFnICYmICF0aGlzLmljZWRnZW4pIHtcbiAgICAgICAgdGhpcy5pY2VkUGFzc2VkRGVmZXJyYWwgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZShpY2VkW1wiY29uc3RcIl0ucGFzc2VkX2RlZmVycmFsKTtcbiAgICAgICAgbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHRoaXMuaWNlZFBhc3NlZERlZmVycmFsKSk7XG4gICAgICAgIGYgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLm5zKSk7XG4gICAgICAgIGYuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5maW5kRGVmZXJyYWwpKSkpO1xuICAgICAgICByaHMgPSBuZXcgQ2FsbChmLCBbbmV3IFZhbHVlKG5ldyBMaXRlcmFsKCdhcmd1bWVudHMnKSldKTtcbiAgICAgICAgdGhpcy5ib2R5LnVuc2hpZnQobmV3IEFzc2lnbihsaHMsIHJocykpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZE5vZGVGbGFnICYmICF0aGlzLmljZWRnZW4pIHtcbiAgICAgICAgciA9IHRoaXMuaWNlZElzQXV0b2NiQ29kZSA/IGljZWRbXCJjb25zdFwiXS5hdXRvY2IgOiBpY2VkW1wiY29uc3RcIl0ua19ub29wO1xuICAgICAgICByaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwocikpO1xuICAgICAgICBsaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmspKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9keS51bnNoaWZ0KG5ldyBBc3NpZ24obGhzLCByaHMsIG51bGwsIHtcbiAgICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5pY2VkV2Fsa0FzdCA9IGZ1bmN0aW9uKHBhcmVudCwgbykge1xuICAgICAgdmFyIGNmX3ByZXYsIGZhX3ByZXYsIGZhZl9wcmV2LCBmZ19wcmV2LCBwYXJhbSwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgdGhpcy5pY2VkUGFyZW50QXdhaXQgPSBwYXJlbnQ7XG4gICAgICBmYV9wcmV2ID0gby5mb3VuZEF1dG9jYjtcbiAgICAgIGNmX3ByZXYgPSBvLmN1cnJGdW5jO1xuICAgICAgZmdfcHJldiA9IG8uZm91bmRBcmd1bWVudHM7XG4gICAgICBmYWZfcHJldiA9IG8uZm91bmRBd2FpdEZ1bmM7XG4gICAgICBvLmZvdW5kQXV0b2NiID0gZmFsc2U7XG4gICAgICBvLmZvdW5kQXJndW1lbnRzID0gZmFsc2U7XG4gICAgICBvLmZvdW5kQXdhaXRGdW5jID0gZmFsc2U7XG4gICAgICBvLmN1cnJGdW5jID0gdGhpcztcbiAgICAgIF9yZWYyID0gdGhpcy5wYXJhbXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAocGFyYW0ubmFtZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgcGFyYW0ubmFtZS52YWx1ZSA9PT0gaWNlZFtcImNvbnN0XCJdLmF1dG9jYikge1xuICAgICAgICAgIG8uZm91bmRBdXRvY2IgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBDb2RlLl9fc3VwZXJfXy5pY2VkV2Fsa0FzdC5jYWxsKHRoaXMsIHBhcmVudCwgbyk7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gZmFfcHJldjtcbiAgICAgIHRoaXMuaWNlZElzQXV0b2NiQ29kZSA9IG8uZm91bmRBdXRvY2I7XG4gICAgICB0aGlzLmljZWRGb3VuZEFyZ3VtZW50cyA9IG8uZm91bmRBcmd1bWVudHM7XG4gICAgICBvLmZvdW5kQXdhaXRGdW5jID0gZmFmX3ByZXY7XG4gICAgICBvLmZvdW5kQXJndW1lbnRzID0gZmdfcHJldjtcbiAgICAgIG8uZm91bmRBdXRvY2IgPSBmYV9wcmV2O1xuICAgICAgby5jdXJyRnVuYyA9IGNmX3ByZXY7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmljZWRXYWxrQXN0TG9vcHMgPSBmdW5jdGlvbihmbG9vZCkge1xuICAgICAgaWYgKENvZGUuX19zdXBlcl9fLmljZWRXYWxrQXN0TG9vcHMuY2FsbCh0aGlzLCBmYWxzZSkpIHtcbiAgICAgICAgdGhpcy5pY2VkTG9vcEZsYWcgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5pY2VkV2Fsa0Nwc1Bpdm90cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgQ29kZS5fX3N1cGVyX18uaWNlZFdhbGtDcHNQaXZvdHMuY2FsbCh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLmljZWRDcHNQaXZvdEZsYWcgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuaWNlZFRyYWNlTmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcnRzO1xuICAgICAgcGFydHMgPSBbXTtcbiAgICAgIGlmICh0aGlzLmtsYXNzKSB7XG4gICAgICAgIHBhcnRzLnB1c2godGhpcy5rbGFzcyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgIHBhcnRzLnB1c2godGhpcy5uYW1lKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcuJyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb2RlO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuUGFyYW0gPSBQYXJhbSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGFyYW0sIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBQYXJhbShuYW1lLCB2YWx1ZSwgc3BsYXQpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnNwbGF0ID0gc3BsYXQ7XG4gICAgICBQYXJhbS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIGlmIChfcmVmMiA9IChuYW1lID0gdGhpcy5uYW1lLnVud3JhcEFsbCgpLnZhbHVlKSwgX19pbmRleE9mLmNhbGwoU1RSSUNUX1BST1NDUklCRUQsIF9yZWYyKSA+PSAwKSB7XG4gICAgICAgIHRoaXMubmFtZS5lcnJvcihcInBhcmFtZXRlciBuYW1lIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgaXMgbm90IGFsbG93ZWRcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgUGFyYW0ucHJvdG90eXBlLmNoaWxkcmVuID0gWyduYW1lJywgJ3ZhbHVlJ107XG5cbiAgICBQYXJhbS5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgfTtcblxuICAgIFBhcmFtLnByb3RvdHlwZS5hc1JlZmVyZW5jZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgaWYgKHRoaXMucmVmZXJlbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZTtcbiAgICAgIH1cbiAgICAgIG5vZGUgPSB0aGlzLm5hbWU7XG4gICAgICBpZiAobm9kZVtcInRoaXNcIl0pIHtcbiAgICAgICAgbm9kZSA9IG5vZGUucHJvcGVydGllc1swXS5uYW1lO1xuICAgICAgICBpZiAobm9kZS52YWx1ZS5yZXNlcnZlZCkge1xuICAgICAgICAgIG5vZGUgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZShub2RlLnZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobm9kZS5pc0NvbXBsZXgoKSkge1xuICAgICAgICBub2RlID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoJ2FyZycpKTtcbiAgICAgIH1cbiAgICAgIG5vZGUgPSBuZXcgVmFsdWUobm9kZSk7XG4gICAgICBpZiAodGhpcy5zcGxhdCkge1xuICAgICAgICBub2RlID0gbmV3IFNwbGF0KG5vZGUpO1xuICAgICAgfVxuICAgICAgbm9kZS51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcodGhpcy5sb2NhdGlvbkRhdGEpO1xuICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlID0gbm9kZTtcbiAgICB9O1xuXG4gICAgUGFyYW0ucHJvdG90eXBlLmlzQ29tcGxleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZS5pc0NvbXBsZXgoKTtcbiAgICB9O1xuXG4gICAgUGFyYW0ucHJvdG90eXBlLmVhY2hOYW1lID0gZnVuY3Rpb24oaXRlcmF0b3IsIG5hbWUpIHtcbiAgICAgIHZhciBhdFBhcmFtLCBub2RlLCBvYmosIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgbmFtZSA9IHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICAgIGF0UGFyYW0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgIG5vZGUgPSBvYmoucHJvcGVydGllc1swXS5uYW1lO1xuICAgICAgICBpZiAoIW5vZGUudmFsdWUucmVzZXJ2ZWQpIHtcbiAgICAgICAgICByZXR1cm4gaXRlcmF0b3Iobm9kZS52YWx1ZSwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAobmFtZSBpbnN0YW5jZW9mIExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yKG5hbWUudmFsdWUsIG5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUgaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICByZXR1cm4gYXRQYXJhbShuYW1lKTtcbiAgICAgIH1cbiAgICAgIF9yZWYyID0gbmFtZS5vYmplY3RzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBvYmogPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBc3NpZ24pIHtcbiAgICAgICAgICB0aGlzLmVhY2hOYW1lKGl0ZXJhdG9yLCBvYmoudmFsdWUudW53cmFwKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFNwbGF0KSB7XG4gICAgICAgICAgbm9kZSA9IG9iai5uYW1lLnVud3JhcCgpO1xuICAgICAgICAgIGl0ZXJhdG9yKG5vZGUudmFsdWUsIG5vZGUpO1xuICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgICAgaWYgKG9iai5pc0FycmF5KCkgfHwgb2JqLmlzT2JqZWN0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuZWFjaE5hbWUoaXRlcmF0b3IsIG9iai5iYXNlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9ialtcInRoaXNcIl0pIHtcbiAgICAgICAgICAgIGF0UGFyYW0ob2JqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlcmF0b3Iob2JqLmJhc2UudmFsdWUsIG9iai5iYXNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIShvYmogaW5zdGFuY2VvZiBFeHBhbnNpb24pKSB7XG4gICAgICAgICAgb2JqLmVycm9yKFwiaWxsZWdhbCBwYXJhbWV0ZXIgXCIgKyAob2JqLmNvbXBpbGUoKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBQYXJhbTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlNwbGF0ID0gU3BsYXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNwbGF0LCBfc3VwZXIpO1xuXG4gICAgU3BsYXQucHJvdG90eXBlLmNoaWxkcmVuID0gWyduYW1lJ107XG5cbiAgICBTcGxhdC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlID0gWUVTO1xuXG4gICAgZnVuY3Rpb24gU3BsYXQobmFtZSkge1xuICAgICAgU3BsYXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lLmNvbXBpbGUgPyBuYW1lIDogbmV3IExpdGVyYWwobmFtZSk7XG4gICAgfVxuXG4gICAgU3BsYXQucHJvdG90eXBlLmFzc2lnbnMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lLmFzc2lnbnMobmFtZSk7XG4gICAgfTtcblxuICAgIFNwbGF0LnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgU3BsYXQucHJvdG90eXBlLnVud3JhcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9O1xuXG4gICAgU3BsYXQuY29tcGlsZVNwbGF0dGVkQXJyYXkgPSBmdW5jdGlvbihvLCBsaXN0LCBhcHBseSkge1xuICAgICAgdmFyIGFyZ3MsIGJhc2UsIGNvbXBpbGVkTm9kZSwgY29uY2F0UGFydCwgZnJhZ21lbnRzLCBpLCBpbmRleCwgbm9kZSwgX2ksIF9sZW47XG4gICAgICBpbmRleCA9IC0xO1xuICAgICAgd2hpbGUgKChub2RlID0gbGlzdFsrK2luZGV4XSkgJiYgIShub2RlIGluc3RhbmNlb2YgU3BsYXQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGluZGV4ID49IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBub2RlID0gbGlzdFswXTtcbiAgICAgICAgZnJhZ21lbnRzID0gbm9kZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgICAgIGlmIChhcHBseSkge1xuICAgICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChub2RlLm1ha2VDb2RlKFwiXCIgKyAodXRpbGl0eSgnc2xpY2UnKSkgKyBcIi5jYWxsKFwiKSwgZnJhZ21lbnRzLCBub2RlLm1ha2VDb2RlKFwiKVwiKSk7XG4gICAgICB9XG4gICAgICBhcmdzID0gbGlzdC5zbGljZShpbmRleCk7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBhcmdzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBub2RlID0gYXJnc1tpXTtcbiAgICAgICAgY29tcGlsZWROb2RlID0gbm9kZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgICAgIGFyZ3NbaV0gPSBub2RlIGluc3RhbmNlb2YgU3BsYXQgPyBbXS5jb25jYXQobm9kZS5tYWtlQ29kZShcIlwiICsgKHV0aWxpdHkoJ3NsaWNlJykpICsgXCIuY2FsbChcIiksIGNvbXBpbGVkTm9kZSwgbm9kZS5tYWtlQ29kZShcIilcIikpIDogW10uY29uY2F0KG5vZGUubWFrZUNvZGUoXCJbXCIpLCBjb21waWxlZE5vZGUsIG5vZGUubWFrZUNvZGUoXCJdXCIpKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICBub2RlID0gbGlzdFswXTtcbiAgICAgICAgY29uY2F0UGFydCA9IG5vZGUuam9pbkZyYWdtZW50QXJyYXlzKGFyZ3Muc2xpY2UoMSksICcsICcpO1xuICAgICAgICByZXR1cm4gYXJnc1swXS5jb25jYXQobm9kZS5tYWtlQ29kZShcIi5jb25jYXQoXCIpLCBjb25jYXRQYXJ0LCBub2RlLm1ha2VDb2RlKFwiKVwiKSk7XG4gICAgICB9XG4gICAgICBiYXNlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2osIF9sZW4xLCBfcmVmMiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYyID0gbGlzdC5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYyLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgIG5vZGUgPSBfcmVmMltfal07XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChub2RlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkoKTtcbiAgICAgIGJhc2UgPSBsaXN0WzBdLmpvaW5GcmFnbWVudEFycmF5cyhiYXNlLCAnLCAnKTtcbiAgICAgIGNvbmNhdFBhcnQgPSBsaXN0W2luZGV4XS5qb2luRnJhZ21lbnRBcnJheXMoYXJncywgJywgJyk7XG4gICAgICByZXR1cm4gW10uY29uY2F0KGxpc3RbMF0ubWFrZUNvZGUoXCJbXCIpLCBiYXNlLCBsaXN0W2luZGV4XS5tYWtlQ29kZShcIl0uY29uY2F0KFwiKSwgY29uY2F0UGFydCwgKGxhc3QobGlzdCkpLm1ha2VDb2RlKFwiKVwiKSk7XG4gICAgfTtcblxuICAgIFNwbGF0LnByb3RvdHlwZS5pY2VkVG9TbG90ID0gZnVuY3Rpb24oaSkge1xuICAgICAgcmV0dXJuIG5ldyBTbG90KGksIG5ldyBWYWx1ZSh0aGlzLm5hbWUpLCBudWxsLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNwbGF0O1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuRXhwYW5zaW9uID0gRXhwYW5zaW9uID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFeHBhbnNpb24sIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBFeHBhbnNpb24oKSB7XG4gICAgICByZXR1cm4gRXhwYW5zaW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIEV4cGFuc2lvbi5wcm90b3R5cGUuaXNDb21wbGV4ID0gTk87XG5cbiAgICBFeHBhbnNpb24ucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoJ0V4cGFuc2lvbiBtdXN0IGJlIHVzZWQgaW5zaWRlIGEgZGVzdHJ1Y3R1cmluZyBhc3NpZ25tZW50IG9yIHBhcmFtZXRlciBsaXN0Jyk7XG4gICAgfTtcblxuICAgIEV4cGFuc2lvbi5wcm90b3R5cGUuYXNSZWZlcmVuY2UgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgRXhwYW5zaW9uLnByb3RvdHlwZS5lYWNoTmFtZSA9IGZ1bmN0aW9uKGl0ZXJhdG9yKSB7fTtcblxuICAgIHJldHVybiBFeHBhbnNpb247XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5XaGlsZSA9IFdoaWxlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhXaGlsZSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFdoaWxlKGNvbmRpdGlvbiwgb3B0aW9ucykge1xuICAgICAgdGhpcy5jb25kaXRpb24gPSAob3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5pbnZlcnQgOiB2b2lkIDApID8gY29uZGl0aW9uLmludmVydCgpIDogY29uZGl0aW9uO1xuICAgICAgdGhpcy5ndWFyZCA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZ3VhcmQgOiB2b2lkIDA7XG4gICAgfVxuXG4gICAgV2hpbGUucHJvdG90eXBlLmNoaWxkcmVuID0gWydjb25kaXRpb24nLCAnZ3VhcmQnLCAnYm9keSddO1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gWUVTO1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmlzTG9vcCA9IFlFUztcblxuICAgIFdoaWxlLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIHJldHVybiBXaGlsZS5fX3N1cGVyX18ubWFrZVJldHVybi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXR1cm5zID0gIXRoaXMuanVtcHMoe1xuICAgICAgICAgIGxvb3A6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuYWRkQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZXhwcmVzc2lvbnMsIGp1bXBOb2RlLCBub2RlLCBfaSwgX2xlbjtcbiAgICAgIGV4cHJlc3Npb25zID0gdGhpcy5ib2R5LmV4cHJlc3Npb25zO1xuICAgICAgaWYgKCFleHByZXNzaW9ucy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBleHByZXNzaW9ucy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBub2RlID0gZXhwcmVzc2lvbnNbX2ldO1xuICAgICAgICBpZiAoanVtcE5vZGUgPSBub2RlLmp1bXBzKHtcbiAgICAgICAgICBsb29wOiB0cnVlXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgcmV0dXJuIGp1bXBOb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGJvZHksIHJ2YXIsIHNldDtcbiAgICAgIHRoaXMuY29uZGl0aW9uLmljZWRTdGF0ZW1lbnRBc3NlcnRpb24oKTtcbiAgICAgIGlmICh0aGlzLmljZWROb2RlRmxhZykge1xuICAgICAgICByZXR1cm4gdGhpcy5pY2VkQ29tcGlsZUljZWQobyk7XG4gICAgICB9XG4gICAgICBvLmluZGVudCArPSBUQUI7XG4gICAgICBzZXQgPSAnJztcbiAgICAgIGJvZHkgPSB0aGlzLmJvZHk7XG4gICAgICBpZiAoYm9keS5pc0VtcHR5KCkpIHtcbiAgICAgICAgYm9keSA9IHRoaXMubWFrZUNvZGUoJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMucmV0dXJucykge1xuICAgICAgICAgIGJvZHkubWFrZVJldHVybihydmFyID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ3Jlc3VsdHMnKSk7XG4gICAgICAgICAgc2V0ID0gXCJcIiArIHRoaXMudGFiICsgcnZhciArIFwiID0gW107XFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ3VhcmQpIHtcbiAgICAgICAgICBpZiAoYm9keS5leHByZXNzaW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBib2R5LmV4cHJlc3Npb25zLnVuc2hpZnQobmV3IElmKChuZXcgUGFyZW5zKHRoaXMuZ3VhcmQpKS5pbnZlcnQoKSwgbmV3IExpdGVyYWwoXCJjb250aW51ZVwiKSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ndWFyZCkge1xuICAgICAgICAgICAgICBib2R5ID0gQmxvY2sud3JhcChbbmV3IElmKHRoaXMuZ3VhcmQsIGJvZHkpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJvZHkgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIlxcblwiKSwgYm9keS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIpKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlciA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHNldCArIHRoaXMudGFiICsgXCJ3aGlsZSAoXCIpLCB0aGlzLmNvbmRpdGlvbi5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pLCB0aGlzLm1ha2VDb2RlKFwiKSB7XCIpLCBib2R5LCB0aGlzLm1ha2VDb2RlKFwifVwiKSk7XG4gICAgICBpZiAodGhpcy5yZXR1cm5zKSB7XG4gICAgICAgIGlmICh0aGlzLmljZWRIYXNBdXRvY2JGbGFnKSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBpY2VkW1wiY29uc3RcIl0uYXV0b2NiICsgXCIoXCIgKyBydmFyICsgXCIpO1wiKSk7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcInJldHVybjtcIikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJyZXR1cm4gXCIgKyBydmFyICsgXCI7XCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICB9O1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmljZWRXcmFwID0gZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIGJvZHksIGJyZWFrX2Fzc2lnbiwgYnJlYWtfaWQsIGNvbmQsIGNvbmRpdGlvbiwgY29udGludWVfYXNzaWduLCBjb250aW51ZV9ibG9jaywgY29udGludWVfYmxvY2tfaW5uZXIsIGNvbnRpbnVlX2JvZHksIGNvbnRpbnVlX2ZuLCBjb250aW51ZV9pZCwgZ3VhcmRfaWYsIGtfaWQsIGtfcGFyYW0sIG5leHRfYXNzaWduLCBuZXh0X2lkLCBvdXRTdGF0ZW1lbnRzLCB0b3BfYXNzaWduLCB0b3BfYmxvY2ssIHRvcF9ib2R5LCB0b3BfY2FsbCwgdG9wX2Z1bmMsIHRvcF9pZCwgdG9wX3N0YXRlbWVudHMsIHRyYW1wO1xuICAgICAgY29uZGl0aW9uID0gZC5jb25kaXRpb247XG4gICAgICBib2R5ID0gZC5ib2R5O1xuICAgICAgb3V0U3RhdGVtZW50cyA9IFtdO1xuICAgICAgdG9wX2lkID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS50X3doaWxlKSk7XG4gICAgICBrX2lkID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5rKSk7XG4gICAgICBrX3BhcmFtID0gbmV3IFBhcmFtKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5rKSk7XG4gICAgICBicmVha19pZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uYl93aGlsZSkpO1xuICAgICAgYnJlYWtfYXNzaWduID0gbmV3IEFzc2lnbihicmVha19pZCwga19pZCwgbnVsbCwge1xuICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgIH0pO1xuICAgICAgY29udGludWVfaWQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmNfd2hpbGUpKTtcbiAgICAgIGNvbnRpbnVlX2Jsb2NrX2lubmVyID0gbmV3IEJsb2NrKFtuZXcgQ2FsbCh0b3BfaWQsIFtrX2lkXSldKTtcbiAgICAgIGlmIChkLnN0ZXApIHtcbiAgICAgICAgY29udGludWVfYmxvY2tfaW5uZXIudW5zaGlmdChkLnN0ZXApO1xuICAgICAgfVxuICAgICAgY29udGludWVfZm4gPSBuZXcgQ29kZShbXSwgY29udGludWVfYmxvY2tfaW5uZXIpO1xuICAgICAgdHJhbXAgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLm5zKSk7XG4gICAgICB0cmFtcC5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLnRyYW1wb2xpbmUpKSkpO1xuICAgICAgY29udGludWVfYmxvY2sgPSBuZXcgQmxvY2soW25ldyBDYWxsKHRyYW1wLCBbY29udGludWVfZm5dKV0pO1xuICAgICAgY29udGludWVfYm9keSA9IG5ldyBDb2RlKFtdLCBjb250aW51ZV9ibG9jaywgJ2ljZWRnZW4nKTtcbiAgICAgIGNvbnRpbnVlX2Fzc2lnbiA9IG5ldyBBc3NpZ24oY29udGludWVfaWQsIGNvbnRpbnVlX2JvZHksIG51bGwsIHtcbiAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIG5leHRfaWQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLm5fd2hpbGUpKTtcbiAgICAgIG5leHRfYXNzaWduID0gbmV3IEFzc2lnbihuZXh0X2lkLCBjb250aW51ZV9pZCwgbnVsbCwge1xuICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgIH0pO1xuICAgICAgY29uZCA9IG5ldyBJZihjb25kaXRpb24uaW52ZXJ0KCksIG5ldyBCbG9jayhbbmV3IENhbGwoYnJlYWtfaWQsIFtdKV0pKTtcbiAgICAgIGlmIChkLmd1YXJkKSB7XG4gICAgICAgIGNvbnRpbnVlX2Jsb2NrID0gbmV3IEJsb2NrKFtuZXcgQ2FsbChjb250aW51ZV9pZCwgW10pXSk7XG4gICAgICAgIGd1YXJkX2lmID0gbmV3IElmKGQuZ3VhcmQsIGJvZHkpO1xuICAgICAgICBndWFyZF9pZi5hZGRFbHNlKGNvbnRpbnVlX2Jsb2NrKTtcbiAgICAgICAgY29uZC5hZGRFbHNlKG5ldyBCbG9jayhbZC5wcmVfYm9keSwgZ3VhcmRfaWZdKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25kLmFkZEVsc2UobmV3IEJsb2NrKFtkLnByZV9ib2R5LCBib2R5XSkpO1xuICAgICAgfVxuICAgICAgdG9wX2JvZHkgPSBuZXcgQmxvY2soW2JyZWFrX2Fzc2lnbiwgY29udGludWVfYXNzaWduLCBuZXh0X2Fzc2lnbiwgY29uZF0pO1xuICAgICAgdG9wX2Z1bmMgPSBuZXcgQ29kZShba19wYXJhbV0sIHRvcF9ib2R5LCAnaWNlZGdlbicpO1xuICAgICAgdG9wX2Fzc2lnbiA9IG5ldyBBc3NpZ24odG9wX2lkLCB0b3BfZnVuYywgbnVsbCwge1xuICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgIH0pO1xuICAgICAgdG9wX2NhbGwgPSBuZXcgQ2FsbCh0b3BfaWQsIFtrX2lkXSk7XG4gICAgICB0b3Bfc3RhdGVtZW50cyA9IFtdO1xuICAgICAgaWYgKGQuaW5pdCkge1xuICAgICAgICB0b3Bfc3RhdGVtZW50cyA9IHRvcF9zdGF0ZW1lbnRzLmNvbmNhdChkLmluaXQpO1xuICAgICAgfVxuICAgICAgdG9wX3N0YXRlbWVudHMgPSB0b3Bfc3RhdGVtZW50cy5jb25jYXQoW3RvcF9hc3NpZ24sIHRvcF9jYWxsXSk7XG4gICAgICByZXR1cm4gdG9wX2Jsb2NrID0gbmV3IEJsb2NrKHRvcF9zdGF0ZW1lbnRzKTtcbiAgICB9O1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmljZWRDYWxsQ29udGludWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5LmljZWRUaHJlYWRSZXR1cm4obmV3IEljZWRUYWlsQ2FsbChpY2VkW1wiY29uc3RcIl0ubl93aGlsZSkpO1xuICAgIH07XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuaWNlZENvbXBpbGVJY2VkID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGIsIG9wdHM7XG4gICAgICBvcHRzID0ge1xuICAgICAgICBjb25kaXRpb246IHRoaXMuY29uZGl0aW9uLFxuICAgICAgICBib2R5OiB0aGlzLmJvZHksXG4gICAgICAgIGd1YXJkOiB0aGlzLmd1YXJkXG4gICAgICB9O1xuICAgICAgYiA9IHRoaXMuaWNlZFdyYXAob3B0cyk7XG4gICAgICByZXR1cm4gYi5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdoaWxlO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuT3AgPSBPcCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICB2YXIgQ09OVkVSU0lPTlMsIElOVkVSU0lPTlM7XG5cbiAgICBfX2V4dGVuZHMoT3AsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBPcChvcCwgZmlyc3QsIHNlY29uZCwgZmxpcCkge1xuICAgICAgT3AuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICBpZiAob3AgPT09ICdpbicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbihmaXJzdCwgc2Vjb25kKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcCA9PT0gJ2RvJykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZURvKGZpcnN0KTtcbiAgICAgIH1cbiAgICAgIGlmIChvcCA9PT0gJ25ldycpIHtcbiAgICAgICAgaWYgKGZpcnN0IGluc3RhbmNlb2YgQ2FsbCAmJiAhZmlyc3RbXCJkb1wiXSAmJiAhZmlyc3QuaXNOZXcpIHtcbiAgICAgICAgICByZXR1cm4gZmlyc3QubmV3SW5zdGFuY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3QgaW5zdGFuY2VvZiBDb2RlICYmIGZpcnN0LmJvdW5kIHx8IGZpcnN0W1wiZG9cIl0pIHtcbiAgICAgICAgICBmaXJzdCA9IG5ldyBQYXJlbnMoZmlyc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9wZXJhdG9yID0gQ09OVkVSU0lPTlNbb3BdIHx8IG9wO1xuICAgICAgdGhpcy5maXJzdCA9IGZpcnN0O1xuICAgICAgdGhpcy5zZWNvbmQgPSBzZWNvbmQ7XG4gICAgICB0aGlzLmZsaXAgPSAhIWZsaXA7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBDT05WRVJTSU9OUyA9IHtcbiAgICAgICc9PSc6ICc9PT0nLFxuICAgICAgJyE9JzogJyE9PScsXG4gICAgICAnb2YnOiAnaW4nLFxuICAgICAgJ3lpZWxkZnJvbSc6ICd5aWVsZConXG4gICAgfTtcblxuICAgIElOVkVSU0lPTlMgPSB7XG4gICAgICAnIT09JzogJz09PScsXG4gICAgICAnPT09JzogJyE9PSdcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNoaWxkcmVuID0gWydmaXJzdCcsICdzZWNvbmQnXTtcblxuICAgIE9wLnByb3RvdHlwZS5pc1NpbXBsZU51bWJlciA9IE5PO1xuXG4gICAgT3AucHJvdG90eXBlLmlzWWllbGQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoX3JlZjIgPSB0aGlzLm9wZXJhdG9yKSA9PT0gJ3lpZWxkJyB8fCBfcmVmMiA9PT0gJ3lpZWxkKic7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5pc1VuYXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuc2Vjb25kO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuaXNDb21wbGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gISh0aGlzLmlzVW5hcnkoKSAmJiAoKF9yZWYyID0gdGhpcy5vcGVyYXRvcikgPT09ICcrJyB8fCBfcmVmMiA9PT0gJy0nKSkgfHwgdGhpcy5maXJzdC5pc0NvbXBsZXgoKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmlzQ2hhaW5hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKF9yZWYyID0gdGhpcy5vcGVyYXRvcikgPT09ICc8JyB8fCBfcmVmMiA9PT0gJz4nIHx8IF9yZWYyID09PSAnPj0nIHx8IF9yZWYyID09PSAnPD0nIHx8IF9yZWYyID09PSAnPT09JyB8fCBfcmVmMiA9PT0gJyE9PSc7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhbGxJbnZlcnRhYmxlLCBjdXJyLCBmc3QsIG9wLCBfcmVmMjtcbiAgICAgIGlmICh0aGlzLmlzQ2hhaW5hYmxlKCkgJiYgdGhpcy5maXJzdC5pc0NoYWluYWJsZSgpKSB7XG4gICAgICAgIGFsbEludmVydGFibGUgPSB0cnVlO1xuICAgICAgICBjdXJyID0gdGhpcztcbiAgICAgICAgd2hpbGUgKGN1cnIgJiYgY3Vyci5vcGVyYXRvcikge1xuICAgICAgICAgIGFsbEludmVydGFibGUgJiYgKGFsbEludmVydGFibGUgPSBjdXJyLm9wZXJhdG9yIGluIElOVkVSU0lPTlMpO1xuICAgICAgICAgIGN1cnIgPSBjdXJyLmZpcnN0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWxsSW52ZXJ0YWJsZSkge1xuICAgICAgICAgIHJldHVybiBuZXcgUGFyZW5zKHRoaXMpLmludmVydCgpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnIgPSB0aGlzO1xuICAgICAgICB3aGlsZSAoY3VyciAmJiBjdXJyLm9wZXJhdG9yKSB7XG4gICAgICAgICAgY3Vyci5pbnZlcnQgPSAhY3Vyci5pbnZlcnQ7XG4gICAgICAgICAgY3Vyci5vcGVyYXRvciA9IElOVkVSU0lPTlNbY3Vyci5vcGVyYXRvcl07XG4gICAgICAgICAgY3VyciA9IGN1cnIuZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2UgaWYgKG9wID0gSU5WRVJTSU9OU1t0aGlzLm9wZXJhdG9yXSkge1xuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3A7XG4gICAgICAgIGlmICh0aGlzLmZpcnN0LnVud3JhcCgpIGluc3RhbmNlb2YgT3ApIHtcbiAgICAgICAgICB0aGlzLmZpcnN0LmludmVydCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnNlY29uZCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhcmVucyh0aGlzKS5pbnZlcnQoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcGVyYXRvciA9PT0gJyEnICYmIChmc3QgPSB0aGlzLmZpcnN0LnVud3JhcCgpKSBpbnN0YW5jZW9mIE9wICYmICgoX3JlZjIgPSBmc3Qub3BlcmF0b3IpID09PSAnIScgfHwgX3JlZjIgPT09ICdpbicgfHwgX3JlZjIgPT09ICdpbnN0YW5jZW9mJykpIHtcbiAgICAgICAgcmV0dXJuIGZzdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgT3AoJyEnLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLnVuZm9sZFNvYWsgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKChfcmVmMiA9IHRoaXMub3BlcmF0b3IpID09PSAnKysnIHx8IF9yZWYyID09PSAnLS0nIHx8IF9yZWYyID09PSAnZGVsZXRlJykgJiYgdW5mb2xkU29hayhvLCB0aGlzLCAnZmlyc3QnKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmdlbmVyYXRlRG8gPSBmdW5jdGlvbihleHApIHtcbiAgICAgIHZhciBjYWxsLCBmdW5jLCBwYXJhbSwgcGFzc2VkUGFyYW1zLCByZWYsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIHBhc3NlZFBhcmFtcyA9IFtdO1xuICAgICAgZnVuYyA9IGV4cCBpbnN0YW5jZW9mIEFzc2lnbiAmJiAocmVmID0gZXhwLnZhbHVlLnVud3JhcCgpKSBpbnN0YW5jZW9mIENvZGUgPyByZWYgOiBleHA7XG4gICAgICBfcmVmMiA9IGZ1bmMucGFyYW1zIHx8IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwYXJhbSA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKHBhcmFtLnZhbHVlKSB7XG4gICAgICAgICAgcGFzc2VkUGFyYW1zLnB1c2gocGFyYW0udmFsdWUpO1xuICAgICAgICAgIGRlbGV0ZSBwYXJhbS52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXNzZWRQYXJhbXMucHVzaChwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChleHAsIHBhc3NlZFBhcmFtcyk7XG4gICAgICBjYWxsW1wiZG9cIl0gPSB0cnVlO1xuICAgICAgcmV0dXJuIGNhbGw7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGlzQ2hhaW4sIGxocywgcmhzLCBfcmVmMiwgX3JlZjM7XG4gICAgICBpc0NoYWluID0gdGhpcy5pc0NoYWluYWJsZSgpICYmIHRoaXMuZmlyc3QuaXNDaGFpbmFibGUoKTtcbiAgICAgIGlmICghaXNDaGFpbikge1xuICAgICAgICB0aGlzLmZpcnN0LmZyb250ID0gdGhpcy5mcm9udDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wZXJhdG9yID09PSAnZGVsZXRlJyAmJiBvLnNjb3BlLmNoZWNrKHRoaXMuZmlyc3QudW53cmFwQWxsKCkudmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoJ2RlbGV0ZSBvcGVyYW5kIG1heSBub3QgYmUgYXJndW1lbnQgb3IgdmFyJyk7XG4gICAgICB9XG4gICAgICBpZiAoKChfcmVmMiA9IHRoaXMub3BlcmF0b3IpID09PSAnLS0nIHx8IF9yZWYyID09PSAnKysnKSAmJiAoX3JlZjMgPSB0aGlzLmZpcnN0LnVud3JhcEFsbCgpLnZhbHVlLCBfX2luZGV4T2YuY2FsbChTVFJJQ1RfUFJPU0NSSUJFRCwgX3JlZjMpID49IDApKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJjYW5ub3QgaW5jcmVtZW50L2RlY3JlbWVudCBcXFwiXCIgKyAodGhpcy5maXJzdC51bndyYXBBbGwoKS52YWx1ZSkgKyBcIlxcXCJcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc1lpZWxkKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVlpZWxkKG8pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNVbmFyeSgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVVbmFyeShvKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0NoYWluKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVDaGFpbihvKTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodGhpcy5vcGVyYXRvcikge1xuICAgICAgICBjYXNlICc/JzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlRXhpc3RlbmNlKG8pO1xuICAgICAgICBjYXNlICcqKic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVBvd2VyKG8pO1xuICAgICAgICBjYXNlICcvLyc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUZsb29yRGl2aXNpb24obyk7XG4gICAgICAgIGNhc2UgJyUlJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlTW9kdWxvKG8pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxocyA9IHRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKTtcbiAgICAgICAgICByaHMgPSB0aGlzLnNlY29uZC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApO1xuICAgICAgICAgIGFuc3dlciA9IFtdLmNvbmNhdChsaHMsIHRoaXMubWFrZUNvZGUoXCIgXCIgKyB0aGlzLm9wZXJhdG9yICsgXCIgXCIpLCByaHMpO1xuICAgICAgICAgIGlmIChvLmxldmVsIDw9IExFVkVMX09QKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoYW5zd2VyKTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlQ2hhaW4gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZnJhZ21lbnRzLCBmc3QsIHNoYXJlZCwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMuZmlyc3Quc2Vjb25kLmNhY2hlKG8pLCB0aGlzLmZpcnN0LnNlY29uZCA9IF9yZWYyWzBdLCBzaGFyZWQgPSBfcmVmMlsxXTtcbiAgICAgIGZzdCA9IHRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKTtcbiAgICAgIGZyYWdtZW50cyA9IGZzdC5jb25jYXQodGhpcy5tYWtlQ29kZShcIiBcIiArICh0aGlzLmludmVydCA/ICcmJicgOiAnfHwnKSArIFwiIFwiKSwgc2hhcmVkLmNvbXBpbGVUb0ZyYWdtZW50cyhvKSwgdGhpcy5tYWtlQ29kZShcIiBcIiArIHRoaXMub3BlcmF0b3IgKyBcIiBcIiksIHRoaXMuc2Vjb25kLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCkpO1xuICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGZyYWdtZW50cyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlRXhpc3RlbmNlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGZzdCwgcmVmO1xuICAgICAgaWYgKHRoaXMuZmlyc3QuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgcmVmID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpKTtcbiAgICAgICAgZnN0ID0gbmV3IFBhcmVucyhuZXcgQXNzaWduKHJlZiwgdGhpcy5maXJzdCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnN0ID0gdGhpcy5maXJzdDtcbiAgICAgICAgcmVmID0gZnN0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBJZihuZXcgRXhpc3RlbmNlKGZzdCksIHJlZiwge1xuICAgICAgICB0eXBlOiAnaWYnXG4gICAgICB9KS5hZGRFbHNlKHRoaXMuc2Vjb25kKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlVW5hcnkgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgb3AsIHBhcnRzLCBwbHVzTWludXM7XG4gICAgICBwYXJ0cyA9IFtdO1xuICAgICAgb3AgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgcGFydHMucHVzaChbdGhpcy5tYWtlQ29kZShvcCldKTtcbiAgICAgIGlmIChvcCA9PT0gJyEnICYmIHRoaXMuZmlyc3QgaW5zdGFuY2VvZiBFeGlzdGVuY2UpIHtcbiAgICAgICAgdGhpcy5maXJzdC5uZWdhdGVkID0gIXRoaXMuZmlyc3QubmVnYXRlZDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgfVxuICAgICAgaWYgKG8ubGV2ZWwgPj0gTEVWRUxfQUNDRVNTKSB7XG4gICAgICAgIHJldHVybiAobmV3IFBhcmVucyh0aGlzKSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgfVxuICAgICAgcGx1c01pbnVzID0gb3AgPT09ICcrJyB8fCBvcCA9PT0gJy0nO1xuICAgICAgaWYgKChvcCA9PT0gJ25ldycgfHwgb3AgPT09ICd0eXBlb2YnIHx8IG9wID09PSAnZGVsZXRlJykgfHwgcGx1c01pbnVzICYmIHRoaXMuZmlyc3QgaW5zdGFuY2VvZiBPcCAmJiB0aGlzLmZpcnN0Lm9wZXJhdG9yID09PSBvcCkge1xuICAgICAgICBwYXJ0cy5wdXNoKFt0aGlzLm1ha2VDb2RlKCcgJyldKTtcbiAgICAgIH1cbiAgICAgIGlmICgocGx1c01pbnVzICYmIHRoaXMuZmlyc3QgaW5zdGFuY2VvZiBPcCkgfHwgKG9wID09PSAnbmV3JyAmJiB0aGlzLmZpcnN0LmlzU3RhdGVtZW50KG8pKSkge1xuICAgICAgICB0aGlzLmZpcnN0ID0gbmV3IFBhcmVucyh0aGlzLmZpcnN0KTtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2godGhpcy5maXJzdC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApKTtcbiAgICAgIGlmICh0aGlzLmZsaXApIHtcbiAgICAgICAgcGFydHMucmV2ZXJzZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKHBhcnRzLCAnJyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlWWllbGQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgb3AsIHBhcnRzO1xuICAgICAgcGFydHMgPSBbXTtcbiAgICAgIG9wID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgIGlmIChvLnNjb3BlLnBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoJ3lpZWxkIHN0YXRlbWVudHMgbXVzdCBvY2N1ciB3aXRoaW4gYSBmdW5jdGlvbiBnZW5lcmF0b3IuJyk7XG4gICAgICB9XG4gICAgICBpZiAoX19pbmRleE9mLmNhbGwoT2JqZWN0LmtleXModGhpcy5maXJzdCksICdleHByZXNzaW9uJykgPj0gMCkge1xuICAgICAgICBpZiAodGhpcy5maXJzdC5leHByZXNzaW9uICE9IG51bGwpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKHRoaXMuZmlyc3QuZXhwcmVzc2lvbi5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydHMucHVzaChbdGhpcy5tYWtlQ29kZShcIihcIiArIG9wICsgXCIgXCIpXSk7XG4gICAgICAgIHBhcnRzLnB1c2godGhpcy5maXJzdC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApKTtcbiAgICAgICAgcGFydHMucHVzaChbdGhpcy5tYWtlQ29kZShcIilcIildKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhwYXJ0cywgJycpO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZVBvd2VyID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHBvdztcbiAgICAgIHBvdyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgnTWF0aCcpLCBbbmV3IEFjY2VzcyhuZXcgTGl0ZXJhbCgncG93JykpXSk7XG4gICAgICByZXR1cm4gbmV3IENhbGwocG93LCBbdGhpcy5maXJzdCwgdGhpcy5zZWNvbmRdKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlRmxvb3JEaXZpc2lvbiA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBkaXYsIGZsb29yO1xuICAgICAgZmxvb3IgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoJ01hdGgnKSwgW25ldyBBY2Nlc3MobmV3IExpdGVyYWwoJ2Zsb29yJykpXSk7XG4gICAgICBkaXYgPSBuZXcgT3AoJy8nLCB0aGlzLmZpcnN0LCB0aGlzLnNlY29uZCk7XG4gICAgICByZXR1cm4gbmV3IENhbGwoZmxvb3IsIFtkaXZdKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jb21waWxlTW9kdWxvID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIG1vZDtcbiAgICAgIG1vZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh1dGlsaXR5KCdtb2R1bG8nKSkpO1xuICAgICAgcmV0dXJuIG5ldyBDYWxsKG1vZCwgW3RoaXMuZmlyc3QsIHRoaXMuc2Vjb25kXSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihpZHQpIHtcbiAgICAgIHJldHVybiBPcC5fX3N1cGVyX18udG9TdHJpbmcuY2FsbCh0aGlzLCBpZHQsIHRoaXMuY29uc3RydWN0b3IubmFtZSArICcgJyArIHRoaXMub3BlcmF0b3IpO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuaWNlZFdyYXBDb250aW51YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmljZWRDYWxsQ29udGludWF0aW9uRmxhZztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9wO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuSW4gPSBJbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW4sIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBJbihvYmplY3QsIGFycmF5KSB7XG4gICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcbiAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgIEluLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEluLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnb2JqZWN0JywgJ2FycmF5J107XG5cbiAgICBJbi5wcm90b3R5cGUuaW52ZXJ0ID0gTkVHQVRFO1xuXG4gICAgSW4ucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGhhc1NwbGF0LCBvYmosIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIGlmICh0aGlzLmFycmF5IGluc3RhbmNlb2YgVmFsdWUgJiYgdGhpcy5hcnJheS5pc0FycmF5KCkgJiYgdGhpcy5hcnJheS5iYXNlLm9iamVjdHMubGVuZ3RoKSB7XG4gICAgICAgIF9yZWYyID0gdGhpcy5hcnJheS5iYXNlLm9iamVjdHM7XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBvYmogPSBfcmVmMltfaV07XG4gICAgICAgICAgaWYgKCEob2JqIGluc3RhbmNlb2YgU3BsYXQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGFzU3BsYXQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzU3BsYXQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlT3JUZXN0KG8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5jb21waWxlTG9vcFRlc3Qobyk7XG4gICAgfTtcblxuICAgIEluLnByb3RvdHlwZS5jb21waWxlT3JUZXN0ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNtcCwgY25qLCBpLCBpdGVtLCByZWYsIHN1YiwgdGVzdHMsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgX3JlZjIgPSB0aGlzLm9iamVjdC5jYWNoZShvLCBMRVZFTF9PUCksIHN1YiA9IF9yZWYyWzBdLCByZWYgPSBfcmVmMlsxXTtcbiAgICAgIF9yZWYzID0gdGhpcy5uZWdhdGVkID8gWycgIT09ICcsICcgJiYgJ10gOiBbJyA9PT0gJywgJyB8fCAnXSwgY21wID0gX3JlZjNbMF0sIGNuaiA9IF9yZWYzWzFdO1xuICAgICAgdGVzdHMgPSBbXTtcbiAgICAgIF9yZWY0ID0gdGhpcy5hcnJheS5iYXNlLm9iamVjdHM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmNC5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgaXRlbSA9IF9yZWY0W2ldO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgIHRlc3RzLnB1c2godGhpcy5tYWtlQ29kZShjbmopKTtcbiAgICAgICAgfVxuICAgICAgICB0ZXN0cyA9IHRlc3RzLmNvbmNhdCgoaSA/IHJlZiA6IHN1YiksIHRoaXMubWFrZUNvZGUoY21wKSwgaXRlbS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfQUNDRVNTKSk7XG4gICAgICB9XG4gICAgICBpZiAoby5sZXZlbCA8IExFVkVMX09QKSB7XG4gICAgICAgIHJldHVybiB0ZXN0cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyh0ZXN0cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEluLnByb3RvdHlwZS5jb21waWxlTG9vcFRlc3QgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZnJhZ21lbnRzLCByZWYsIHN1YiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMub2JqZWN0LmNhY2hlKG8sIExFVkVMX0xJU1QpLCBzdWIgPSBfcmVmMlswXSwgcmVmID0gX3JlZjJbMV07XG4gICAgICBmcmFnbWVudHMgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZSh1dGlsaXR5KCdpbmRleE9mJykgKyBcIi5jYWxsKFwiKSwgdGhpcy5hcnJheS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCksIHRoaXMubWFrZUNvZGUoXCIsIFwiKSwgcmVmLCB0aGlzLm1ha2VDb2RlKFwiKSBcIiArICh0aGlzLm5lZ2F0ZWQgPyAnPCAwJyA6ICc+PSAwJykpKTtcbiAgICAgIGlmIChmcmFnbWVudHNUb1RleHQoc3ViKSA9PT0gZnJhZ21lbnRzVG9UZXh0KHJlZikpIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cyA9IHN1Yi5jb25jYXQodGhpcy5tYWtlQ29kZSgnLCAnKSwgZnJhZ21lbnRzKTtcbiAgICAgIGlmIChvLmxldmVsIDwgTEVWRUxfTElTVCkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGZyYWdtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEluLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKGlkdCkge1xuICAgICAgcmV0dXJuIEluLl9fc3VwZXJfXy50b1N0cmluZy5jYWxsKHRoaXMsIGlkdCwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgKHRoaXMubmVnYXRlZCA/ICchJyA6ICcnKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJbjtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlNsb3QgPSBTbG90ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTbG90LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gU2xvdChpbmRleCwgdmFsdWUsIHN1ZmZpeCwgc3BsYXQpIHtcbiAgICAgIFNsb3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnN1ZmZpeCA9IHN1ZmZpeDtcbiAgICAgIHRoaXMuc3BsYXQgPSBzcGxhdDtcbiAgICAgIHRoaXMuYWNjZXNzID0gbnVsbDtcbiAgICB9XG5cbiAgICBTbG90LnByb3RvdHlwZS5hZGRBY2Nlc3MgPSBmdW5jdGlvbihhKSB7XG4gICAgICB0aGlzLmFjY2VzcyA9IGE7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgU2xvdC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3ZhbHVlJywgJ3N1ZmZpeCddO1xuXG4gICAgcmV0dXJuIFNsb3Q7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5EZWZlciA9IERlZmVyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWZlciwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIERlZmVyKGFyZ3MsIGxpbmVubykge1xuICAgICAgdmFyIGEsIGk7XG4gICAgICB0aGlzLmxpbmVubyA9IGxpbmVubztcbiAgICAgIERlZmVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zbG90cyA9IGZsYXR0ZW4oKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZXN1bHRzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBhcmdzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgIGEgPSBhcmdzW2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goYS5pY2VkVG9TbG90KGkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KSgpKTtcbiAgICAgIHRoaXMucGFyYW1zID0gW107XG4gICAgICB0aGlzLnZhcnMgPSBbXTtcbiAgICAgIHRoaXMuY3VzdG9tID0gZmFsc2U7XG4gICAgfVxuXG4gICAgRGVmZXIucHJvdG90eXBlLmNoaWxkcmVuID0gWydzbG90cyddO1xuXG4gICAgRGVmZXIucHJvdG90eXBlLnNldEN1c3RvbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jdXN0b20gPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIERlZmVyLnByb3RvdHlwZS5uZXdQYXJhbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGw7XG4gICAgICBsID0gXCJcIiArIGljZWRbXCJjb25zdFwiXS5zbG90ICsgXCJfXCIgKyAodGhpcy5wYXJhbXMubGVuZ3RoICsgMSk7XG4gICAgICB0aGlzLnBhcmFtcy5wdXNoKG5ldyBQYXJhbShuZXcgTGl0ZXJhbChsKSkpO1xuICAgICAgcmV0dXJuIG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChsKSk7XG4gICAgfTtcblxuICAgIERlZmVyLnByb3RvdHlwZS5tYWtlQXNzaWduRm4gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYSwgYXJncywgYXNzaWduLCBhc3NpZ25tZW50cywgYmxvY2ssIGNhbGwsIGZ1bmMsIGksIGlfbGl0LCBpbm5lcl9mbiwgbGl0LCBvdXRlcl9ibG9jaywgb3V0ZXJfZm4sIHByb3AsIHMsIHNsb3QsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIGlmICh0aGlzLnNsb3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGFzc2lnbm1lbnRzID0gW107XG4gICAgICBhcmdzID0gW107XG4gICAgICBpID0gMDtcbiAgICAgIF9yZWYyID0gdGhpcy5zbG90cztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcyA9IF9yZWYyW19pXTtcbiAgICAgICAgaSA9IHMuaW5kZXg7XG4gICAgICAgIGEgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJhcmd1bWVudHNcIikpO1xuICAgICAgICBpX2xpdCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpKSk7XG4gICAgICAgIGlmIChzLnNwbGF0KSB7XG4gICAgICAgICAgZnVuYyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh1dGlsaXR5KCdzbGljZScpKSk7XG4gICAgICAgICAgZnVuYy5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoJ2NhbGwnKSkpKTtcbiAgICAgICAgICBjYWxsID0gbmV3IENhbGwoZnVuYywgW2EsIGlfbGl0XSk7XG4gICAgICAgICAgc2xvdCA9IHMudmFsdWU7XG4gICAgICAgICAgdGhpcy52YXJzLnB1c2goc2xvdCk7XG4gICAgICAgICAgYXNzaWduID0gbmV3IEFzc2lnbihzbG90LCBjYWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhLmFkZChuZXcgSW5kZXgoaV9saXQpKTtcbiAgICAgICAgICBpZiAocy5hY2Nlc3MpIHtcbiAgICAgICAgICAgIGEuYWRkKHMuYWNjZXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFzLnN1ZmZpeCkge1xuICAgICAgICAgICAgbGl0ID0gcy52YWx1ZS5jb21waWxlKG8sIExFVkVMX1RPUCk7XG4gICAgICAgICAgICBpZiAobGl0ID09PSBcIl9cIikge1xuICAgICAgICAgICAgICBzbG90ID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5kZWZlcnJhbHMpKTtcbiAgICAgICAgICAgICAgc2xvdC5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLnJldHNsb3QpKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2xvdCA9IHMudmFsdWU7XG4gICAgICAgICAgICAgIHRoaXMudmFycy5wdXNoKHNsb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcmdzLnB1c2gocy52YWx1ZSk7XG4gICAgICAgICAgICBzbG90ID0gdGhpcy5uZXdQYXJhbSgpO1xuICAgICAgICAgICAgaWYgKHMuc3VmZml4IGluc3RhbmNlb2YgSW5kZXgpIHtcbiAgICAgICAgICAgICAgcHJvcCA9IG5ldyBJbmRleCh0aGlzLm5ld1BhcmFtKCkpO1xuICAgICAgICAgICAgICBhcmdzLnB1c2gocy5zdWZmaXguaW5kZXgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcHJvcCA9IHMuc3VmZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2xvdC5hZGQocHJvcCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFzc2lnbiA9IG5ldyBBc3NpZ24oc2xvdCwgYSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWdubWVudHMucHVzaChhc3NpZ24pO1xuICAgICAgfVxuICAgICAgYmxvY2sgPSBuZXcgQmxvY2soYXNzaWdubWVudHMpO1xuICAgICAgaW5uZXJfZm4gPSBuZXcgQ29kZShbXSwgYmxvY2ssICdpY2VkZ2VuJyk7XG4gICAgICBvdXRlcl9ibG9jayA9IG5ldyBCbG9jayhbbmV3IFJldHVybihpbm5lcl9mbildKTtcbiAgICAgIG91dGVyX2ZuID0gbmV3IENvZGUodGhpcy5wYXJhbXMsIG91dGVyX2Jsb2NrLCAnaWNlZGdlbicpO1xuICAgICAgcmV0dXJuIGNhbGwgPSBuZXcgQ2FsbChvdXRlcl9mbiwgYXJncyk7XG4gICAgfTtcblxuICAgIERlZmVyLnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXNzaWduX2ZuLCBhc3NpZ25tZW50cywgY29udGV4dF9hc3NpZ24sIGNvbnRleHRfbGhzLCBjb250ZXh0X3JocywgZm4sIGxuX2Fzc2lnbiwgbG5fbGhzLCBsbl9yaHMsIG1ldGg7XG4gICAgICBtZXRoID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5kZWZlcl9tZXRob2QpKTtcbiAgICAgIGlmICh0aGlzLmN1c3RvbSkge1xuICAgICAgICBmbiA9IG1ldGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbiA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZGVmZXJyYWxzKSk7XG4gICAgICAgIGZuLmFkZChuZXcgQWNjZXNzKG1ldGgpKTtcbiAgICAgIH1cbiAgICAgIGFzc2lnbm1lbnRzID0gW107XG4gICAgICBpZiAoKGFzc2lnbl9mbiA9IHRoaXMubWFrZUFzc2lnbkZuKG8pKSkge1xuICAgICAgICBhc3NpZ25tZW50cy5wdXNoKG5ldyBBc3NpZ24obmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5hc3NpZ25fZm4pKSwgYXNzaWduX2ZuLCBcIm9iamVjdFwiKSk7XG4gICAgICB9XG4gICAgICBsbl9saHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmxpbmVubykpO1xuICAgICAgbG5fcmhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHRoaXMubGluZW5vKSk7XG4gICAgICBsbl9hc3NpZ24gPSBuZXcgQXNzaWduKGxuX2xocywgbG5fcmhzLCBcIm9iamVjdFwiKTtcbiAgICAgIGFzc2lnbm1lbnRzLnB1c2gobG5fYXNzaWduKTtcbiAgICAgIGlmICh0aGlzLmN1c3RvbSkge1xuICAgICAgICBjb250ZXh0X2xocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uY29udGV4dCkpO1xuICAgICAgICBjb250ZXh0X3JocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZGVmZXJyYWxzKSk7XG4gICAgICAgIGNvbnRleHRfYXNzaWduID0gbmV3IEFzc2lnbihjb250ZXh0X2xocywgY29udGV4dF9yaHMsIFwib2JqZWN0XCIpO1xuICAgICAgICBhc3NpZ25tZW50cy5wdXNoKGNvbnRleHRfYXNzaWduKTtcbiAgICAgIH1cbiAgICAgIG8gPSBuZXcgT2JqKGFzc2lnbm1lbnRzKTtcbiAgICAgIHJldHVybiBuZXcgQ2FsbChmbiwgW25ldyBWYWx1ZShvKV0pO1xuICAgIH07XG5cbiAgICBEZWZlci5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY2FsbCwgbmFtZSwgc2NvcGUsIHYsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIGNhbGwgPSB0aGlzLnRyYW5zZm9ybShvKTtcbiAgICAgIF9yZWYyID0gdGhpcy52YXJzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ID0gX3JlZjJbX2ldO1xuICAgICAgICBuYW1lID0gdi5jb21waWxlKG8sIExFVkVMX0xJU1QpO1xuICAgICAgICBzY29wZSA9IG8uc2NvcGU7XG4gICAgICAgIHNjb3BlLmZpbmQobmFtZSwgJ3ZhcicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGwuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIERlZmVyLnByb3RvdHlwZS5pY2VkV2Fsa0FzdCA9IGZ1bmN0aW9uKHAsIG8pIHtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBvLmZvdW5kQXV0b2NiO1xuICAgICAgby5mb3VuZERlZmVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFyZW50RnVuYyA9IG8uY3VyckZ1bmM7XG4gICAgICByZXR1cm4gRGVmZXIuX19zdXBlcl9fLmljZWRXYWxrQXN0LmNhbGwodGhpcywgcCwgbyk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZlcjtcblxuICB9KShCYXNlKTtcblxuICBxdW90ZV9wYXRoX2Zvcl9lbWlzc2lvbiA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gJ1wiJyArIG4ucmVwbGFjZSgvXFxcXC9nLCAnXFxcXFxcXFwnKSArICdcIic7XG4gIH07XG5cbiAgcXVvdGVfZnVuY25hbWVfZm9yX2RlYnVnID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiAnXCInICsgbi5yZXBsYWNlKC9bXCInXS9nLCAnJykgKyAnXCInO1xuICB9O1xuXG4gIHJlcXVpcmVfdG9wX2RpciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBxdW90ZV9wYXRoX2Zvcl9lbWlzc2lvbihwYXRobW9kLmpvaW4oX19kaXJuYW1lLCBcIi4uXCIsIFwiLi5cIikpO1xuICB9O1xuXG4gIGV4cG9ydHMuQXdhaXQgPSBBd2FpdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXdhaXQsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBBd2FpdChib2R5KSB7XG4gICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgQXdhaXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQXdhaXQucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhc3NpZ24sIGFzc2lnbm1lbnRzLCBib2R5LCBjYWxsLCBjYl9hc3NpZ25tZW50LCBjYl9saHMsIGNiX3JocywgY2xzLCBmbl9hc3NpZ25tZW50LCBmbl9saHMsIGZuX3JocywgZnVuY19hc3NpZ25tZW50LCBmdW5jX2xocywgZnVuY19yaHMsIGxocywgbWV0aCwgbiwgbmFtZSwgcmhzLCB0cmFjZSwgX3JlZjIsIF9yZWYzO1xuICAgICAgYm9keSA9IHRoaXMuYm9keTtcbiAgICAgIG5hbWUgPSBpY2VkW1wiY29uc3RcIl0uZGVmZXJyYWxzO1xuICAgICAgby5zY29wZS5hZGQobmFtZSwgJ3ZhcicpO1xuICAgICAgbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG5hbWUpKTtcbiAgICAgIGNscyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubnMpKTtcbiAgICAgIGNscy5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLkRlZmVycmFscykpKSk7XG4gICAgICBhc3NpZ25tZW50cyA9IFtdO1xuICAgICAgaWYgKG4gPSAoX3JlZjIgPSB0aGlzLnBhcmVudEZ1bmMpICE9IG51bGwgPyBfcmVmMi5pY2VkUGFzc2VkRGVmZXJyYWwgOiB2b2lkIDApIHtcbiAgICAgICAgY2JfbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5wYXJlbnQpKTtcbiAgICAgICAgY2JfcmhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG4pKTtcbiAgICAgICAgY2JfYXNzaWdubWVudCA9IG5ldyBBc3NpZ24oY2JfbGhzLCBjYl9yaHMsIFwib2JqZWN0XCIpO1xuICAgICAgICBhc3NpZ25tZW50cy5wdXNoKGNiX2Fzc2lnbm1lbnQpO1xuICAgICAgfVxuICAgICAgaWYgKG8uZmlsZW5hbWUgIT0gbnVsbCkge1xuICAgICAgICBmbl9saHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZpbGVuYW1lKSk7XG4gICAgICAgIGZuX3JocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChxdW90ZV9wYXRoX2Zvcl9lbWlzc2lvbihvLmZpbGVuYW1lKSkpO1xuICAgICAgICBmbl9hc3NpZ25tZW50ID0gbmV3IEFzc2lnbihmbl9saHMsIGZuX3JocywgXCJvYmplY3RcIik7XG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2goZm5fYXNzaWdubWVudCk7XG4gICAgICB9XG4gICAgICBpZiAobiA9IChfcmVmMyA9IHRoaXMucGFyZW50RnVuYykgIT0gbnVsbCA/IF9yZWYzLmljZWRUcmFjZU5hbWUoKSA6IHZvaWQgMCkge1xuICAgICAgICBmdW5jX2xocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZnVuY25hbWUpKTtcbiAgICAgICAgZnVuY19yaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwocXVvdGVfZnVuY25hbWVfZm9yX2RlYnVnKG4pKSk7XG4gICAgICAgIGZ1bmNfYXNzaWdubWVudCA9IG5ldyBBc3NpZ24oZnVuY19saHMsIGZ1bmNfcmhzLCBcIm9iamVjdFwiKTtcbiAgICAgICAgYXNzaWdubWVudHMucHVzaChmdW5jX2Fzc2lnbm1lbnQpO1xuICAgICAgfVxuICAgICAgdHJhY2UgPSBuZXcgT2JqKGFzc2lnbm1lbnRzLCB0cnVlKTtcbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChjbHMsIFtuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmspKSwgdHJhY2VdKTtcbiAgICAgIHJocyA9IG5ldyBPcChcIm5ld1wiLCBjYWxsKTtcbiAgICAgIGFzc2lnbiA9IG5ldyBBc3NpZ24obGhzLCByaHMpO1xuICAgICAgYm9keS51bnNoaWZ0KGFzc2lnbik7XG4gICAgICBtZXRoID0gbGhzLmNvcHkoKS5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZ1bGZpbGwpKSkpO1xuICAgICAgY2FsbCA9IG5ldyBDYWxsKG1ldGgsIFtdKTtcbiAgICAgIGJvZHkucHVzaChjYWxsKTtcbiAgICAgIHJldHVybiB0aGlzLmJvZHkgPSBib2R5O1xuICAgIH07XG5cbiAgICBBd2FpdC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2JvZHknXTtcblxuICAgIEF3YWl0LnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFlFUztcbiAgICB9O1xuXG4gICAgQXdhaXQucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBUSElTO1xuXG4gICAgQXdhaXQucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdGhpcy50cmFuc2Zvcm0obyk7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5LmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICBBd2FpdC5wcm90b3R5cGUuaWNlZFdhbGtBc3QgPSBmdW5jdGlvbihwLCBvKSB7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gby5mb3VuZEF1dG9jYjtcbiAgICAgIHRoaXMucGFyZW50RnVuYyA9IG8uY3VyckZ1bmM7XG4gICAgICBwID0gcCB8fCB0aGlzO1xuICAgICAgdGhpcy5pY2VkUGFyZW50QXdhaXQgPSBwO1xuICAgICAgQXdhaXQuX19zdXBlcl9fLmljZWRXYWxrQXN0LmNhbGwodGhpcywgcCwgbyk7XG4gICAgICByZXR1cm4gdGhpcy5pY2VkTm9kZUZsYWcgPSBvLmZvdW5kQXdhaXRGdW5jID0gby5mb3VuZEF3YWl0ID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF3YWl0O1xuXG4gIH0pKEJhc2UpO1xuXG4gIEljZWRSdW50aW1lID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJY2VkUnVudGltZSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEljZWRSdW50aW1lKGZvdW5kRGVmZXIsIGZvdW5kQXdhaXQpIHtcbiAgICAgIHRoaXMuZm91bmREZWZlciA9IGZvdW5kRGVmZXI7XG4gICAgICB0aGlzLmZvdW5kQXdhaXQgPSBmb3VuZEF3YWl0O1xuICAgICAgSWNlZFJ1bnRpbWUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSWNlZFJ1bnRpbWUucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obywgbGV2ZWwpIHtcbiAgICAgIHZhciBhY2Nlc3MsIGFjY2Vzc25hbWUsIGFzc2lnbiwgY2FsbCwgY2FsbHYsIGZpbGUsIGluYywgaW50ZXJwLCBrLCBrbGFzcywgbGhzX3ZlYywgbnMsIHFtb2RuYW1lLCByZXEsIHJocywgdiwgdmFsLCB3aW5kb3dfbW9kZSwgd2luZG93X3ZhbCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjI7XG4gICAgICB0aGlzLmV4cHJlc3Npb25zID0gW107XG4gICAgICB2ID0gby5ydW50aW1lID8gby5ydW50aW1lIDogby5iYXJlID8gXCJub25lXCIgOiB0aGlzLmZvdW5kRGVmZXIgPyBcIm5vZGVcIiA6IFwibm9uZVwiO1xuICAgICAgaWYgKG8ucnVudGltZSAmJiAhdGhpcy5mb3VuZERlZmVyICYmICFvLnJ1bmZvcmNlKSB7XG4gICAgICAgIHYgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICAgIHdpbmRvd19tb2RlID0gZmFsc2U7XG4gICAgICB3aW5kb3dfdmFsID0gbnVsbDtcbiAgICAgIGluYyA9IG51bGw7XG4gICAgICBpbmMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHN3aXRjaCAodikge1xuICAgICAgICAgIGNhc2UgXCJpbmxpbmVcIjpcbiAgICAgICAgICBjYXNlIFwid2luZG93XCI6XG4gICAgICAgICAgICBpZiAodiA9PT0gXCJ3aW5kb3dcIikge1xuICAgICAgICAgICAgICB3aW5kb3dfbW9kZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2luZG93X21vZGUpIHtcbiAgICAgICAgICAgICAgd2luZG93X3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gSW5saW5lUnVudGltZS5nZW5lcmF0ZSh3aW5kb3dfdmFsID8gd2luZG93X3ZhbC5jb3B5KCkgOiBudWxsKTtcbiAgICAgICAgICBjYXNlIFwibm9kZVwiOlxuICAgICAgICAgIGNhc2UgXCJicm93c2VyaWZ5XCI6XG4gICAgICAgICAgY2FzZSBcImludGVycFwiOlxuICAgICAgICAgICAgaW50ZXJwID0gdiA9PT0gXCJpbnRlcnBcIjtcbiAgICAgICAgICAgIHFtb2RuYW1lID0gaW50ZXJwID8gcmVxdWlyZV90b3BfZGlyKCkgOiBcIidpY2VkLXJ1bnRpbWUnXCI7XG4gICAgICAgICAgICBhY2Nlc3NuYW1lID0gaWNlZFtcImNvbnN0XCJdLm5zO1xuICAgICAgICAgICAgZmlsZSA9IG5ldyBMaXRlcmFsKHFtb2RuYW1lKTtcbiAgICAgICAgICAgIGFjY2VzcyA9IG5ldyBBY2Nlc3MobmV3IExpdGVyYWwoYWNjZXNzbmFtZSkpO1xuICAgICAgICAgICAgcmVxID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwicmVxdWlyZVwiKSk7XG4gICAgICAgICAgICBjYWxsID0gbmV3IENhbGwocmVxLCBbZmlsZV0pO1xuICAgICAgICAgICAgY2FsbHYgPSBuZXcgVmFsdWUoY2FsbCk7XG4gICAgICAgICAgICBpZiAoaW50ZXJwKSB7XG4gICAgICAgICAgICAgIGNhbGx2LmFkZChhY2Nlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLm5zKSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFzc2lnbihucywgY2FsbHYpO1xuICAgICAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgU3ludGF4RXJyb3IoXCJ1bmV4cGVjdGVkIGZsYWcgSWNlZFJ1bnRpbWUgXCIgKyB2KTtcbiAgICAgICAgfVxuICAgICAgfSkoKTtcbiAgICAgIGlmIChpbmMpIHtcbiAgICAgICAgdGhpcy5wdXNoKGluYyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5mb3VuZEF3YWl0KSB7XG4gICAgICAgIHJocyA9IG5ldyBDb2RlKFtdLCBuZXcgQmxvY2soW10pKTtcbiAgICAgICAgbGhzX3ZlYyA9IFtdO1xuICAgICAgICBfcmVmMiA9IFtpY2VkW1wiY29uc3RcIl0ua19ub29wLCBpY2VkW1wiY29uc3RcIl0ua107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBrID0gX3JlZjJbX2ldO1xuICAgICAgICAgIHZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChrKSk7XG4gICAgICAgICAgaWYgKHdpbmRvd192YWwpIHtcbiAgICAgICAgICAgIGtsYXNzID0gd2luZG93X3ZhbC5jb3B5KCk7XG4gICAgICAgICAgICBrbGFzcy5hZGQobmV3IEFjY2Vzcyh2YWwpKTtcbiAgICAgICAgICAgIHZhbCA9IGtsYXNzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaHNfdmVjLnB1c2godmFsKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ24gPSByaHM7XG4gICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IGxoc192ZWMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgdiA9IGxoc192ZWNbX2pdO1xuICAgICAgICAgIGFzc2lnbiA9IG5ldyBBc3NpZ24odiwgYXNzaWduKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB1c2goYXNzaWduKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gSWNlZFJ1bnRpbWUuX19zdXBlcl9fLmNvbXBpbGVOb2RlLmNhbGwodGhpcywgbyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEljZWRSdW50aW1lLnByb3RvdHlwZS5pY2VkV2Fsa0FzdCA9IGZ1bmN0aW9uKHAsIG8pIHtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBvLmZvdW5kQXV0b2NiO1xuICAgICAgcmV0dXJuIEljZWRSdW50aW1lLl9fc3VwZXJfXy5pY2VkV2Fsa0FzdC5jYWxsKHRoaXMsIHAsIG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWNlZFJ1bnRpbWU7XG5cbiAgfSkoQmxvY2spO1xuXG4gIGV4cG9ydHMuVHJ5ID0gVHJ5ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUcnksIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBUcnkoYXR0ZW1wdCwgZXJyb3JWYXJpYWJsZSwgcmVjb3ZlcnksIGVuc3VyZSkge1xuICAgICAgdGhpcy5hdHRlbXB0ID0gYXR0ZW1wdDtcbiAgICAgIHRoaXMuZXJyb3JWYXJpYWJsZSA9IGVycm9yVmFyaWFibGU7XG4gICAgICB0aGlzLnJlY292ZXJ5ID0gcmVjb3Zlcnk7XG4gICAgICB0aGlzLmVuc3VyZSA9IGVuc3VyZTtcbiAgICB9XG5cbiAgICBUcnkucHJvdG90eXBlLmNoaWxkcmVuID0gWydhdHRlbXB0JywgJ3JlY292ZXJ5JywgJ2Vuc3VyZSddO1xuXG4gICAgVHJ5LnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IFlFUztcblxuICAgIFRyeS5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gdGhpcy5hdHRlbXB0Lmp1bXBzKG8pIHx8ICgoX3JlZjIgPSB0aGlzLnJlY292ZXJ5KSAhPSBudWxsID8gX3JlZjIuanVtcHMobykgOiB2b2lkIDApO1xuICAgIH07XG5cbiAgICBUcnkucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIGlmICh0aGlzLmF0dGVtcHQpIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0ID0gdGhpcy5hdHRlbXB0Lm1ha2VSZXR1cm4ocmVzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJlY292ZXJ5KSB7XG4gICAgICAgIHRoaXMucmVjb3ZlcnkgPSB0aGlzLnJlY292ZXJ5Lm1ha2VSZXR1cm4ocmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUcnkucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNhdGNoUGFydCwgZW5zdXJlUGFydCwgcGxhY2Vob2xkZXIsIHRyeVBhcnQ7XG4gICAgICBvLmluZGVudCArPSBUQUI7XG4gICAgICB0cnlQYXJ0ID0gdGhpcy5hdHRlbXB0LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApO1xuICAgICAgY2F0Y2hQYXJ0ID0gdGhpcy5yZWNvdmVyeSA/IChwbGFjZWhvbGRlciA9IG5ldyBMaXRlcmFsKCdfZXJyb3InKSwgdGhpcy5lcnJvclZhcmlhYmxlID8gdGhpcy5yZWNvdmVyeS51bnNoaWZ0KG5ldyBBc3NpZ24odGhpcy5lcnJvclZhcmlhYmxlLCBwbGFjZWhvbGRlcikpIDogdm9pZCAwLCBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIiBjYXRjaCAoXCIpLCBwbGFjZWhvbGRlci5jb21waWxlVG9GcmFnbWVudHMobyksIHRoaXMubWFrZUNvZGUoXCIpIHtcXG5cIiksIHRoaXMucmVjb3ZlcnkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCksIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJ9XCIpKSkgOiAhKHRoaXMuZW5zdXJlIHx8IHRoaXMucmVjb3ZlcnkpID8gW3RoaXMubWFrZUNvZGUoJyBjYXRjaCAoX2Vycm9yKSB7fScpXSA6IFtdO1xuICAgICAgZW5zdXJlUGFydCA9IHRoaXMuZW5zdXJlID8gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgZmluYWxseSB7XFxuXCIpLCB0aGlzLmVuc3VyZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcIn1cIikpIDogW107XG4gICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcIiArIHRoaXMudGFiICsgXCJ0cnkge1xcblwiKSwgdHJ5UGFydCwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcIn1cIiksIGNhdGNoUGFydCwgZW5zdXJlUGFydCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUcnk7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5UaHJvdyA9IFRocm93ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaHJvdywgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFRocm93KGV4cHJlc3Npb24pIHtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICBUaHJvdy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaHJvdy5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2V4cHJlc3Npb24nXTtcblxuICAgIFRocm93LnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IFlFUztcblxuICAgIFRocm93LnByb3RvdHlwZS5qdW1wcyA9IE5PO1xuXG4gICAgVGhyb3cucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBUSElTO1xuXG4gICAgVGhyb3cucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiICsgXCJ0aHJvdyBcIiksIHRoaXMuZXhwcmVzc2lvbi5jb21waWxlVG9GcmFnbWVudHMobyksIHRoaXMubWFrZUNvZGUoXCI7XCIpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRocm93O1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuRXhpc3RlbmNlID0gRXhpc3RlbmNlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFeGlzdGVuY2UsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBFeGlzdGVuY2UoZXhwcmVzc2lvbikge1xuICAgICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICAgIEV4aXN0ZW5jZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeGlzdGVuY2UucHJvdG90eXBlLmNoaWxkcmVuID0gWydleHByZXNzaW9uJ107XG5cbiAgICBFeGlzdGVuY2UucHJvdG90eXBlLmludmVydCA9IE5FR0FURTtcblxuICAgIEV4aXN0ZW5jZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY21wLCBjbmosIGNvZGUsIF9yZWYyO1xuICAgICAgdGhpcy5leHByZXNzaW9uLmZyb250ID0gdGhpcy5mcm9udDtcbiAgICAgIGNvZGUgPSB0aGlzLmV4cHJlc3Npb24uY29tcGlsZShvLCBMRVZFTF9PUCk7XG4gICAgICBpZiAoSURFTlRJRklFUi50ZXN0KGNvZGUpICYmICFvLnNjb3BlLmNoZWNrKGNvZGUpKSB7XG4gICAgICAgIF9yZWYyID0gdGhpcy5uZWdhdGVkID8gWyc9PT0nLCAnfHwnXSA6IFsnIT09JywgJyYmJ10sIGNtcCA9IF9yZWYyWzBdLCBjbmogPSBfcmVmMlsxXTtcbiAgICAgICAgY29kZSA9IFwidHlwZW9mIFwiICsgY29kZSArIFwiIFwiICsgY21wICsgXCIgXFxcInVuZGVmaW5lZFxcXCIgXCIgKyBjbmogKyBcIiBcIiArIGNvZGUgKyBcIiBcIiArIGNtcCArIFwiIG51bGxcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvZGUgPSBcIlwiICsgY29kZSArIFwiIFwiICsgKHRoaXMubmVnYXRlZCA/ICc9PScgOiAnIT0nKSArIFwiIG51bGxcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShvLmxldmVsIDw9IExFVkVMX0NPTkQgPyBjb2RlIDogXCIoXCIgKyBjb2RlICsgXCIpXCIpXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4aXN0ZW5jZTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlBhcmVucyA9IFBhcmVucyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGFyZW5zLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gUGFyZW5zKGJvZHkpIHtcbiAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICBQYXJlbnMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGFyZW5zLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnYm9keSddO1xuXG4gICAgUGFyZW5zLnByb3RvdHlwZS51bndyYXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJvZHk7XG4gICAgfTtcblxuICAgIFBhcmVucy5wcm90b3R5cGUuaXNDb21wbGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5LmlzQ29tcGxleCgpO1xuICAgIH07XG5cbiAgICBQYXJlbnMucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGJhcmUsIGV4cHIsIGZyYWdtZW50cztcbiAgICAgIGV4cHIgPSB0aGlzLmJvZHkudW53cmFwKCk7XG4gICAgICBpZiAoZXhwciBpbnN0YW5jZW9mIFZhbHVlICYmIGV4cHIuaXNBdG9taWMoKSkge1xuICAgICAgICBleHByLmZyb250ID0gdGhpcy5mcm9udDtcbiAgICAgICAgcmV0dXJuIGV4cHIuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzID0gZXhwci5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pO1xuICAgICAgYmFyZSA9IG8ubGV2ZWwgPCBMRVZFTF9PUCAmJiAoZXhwciBpbnN0YW5jZW9mIE9wIHx8IGV4cHIgaW5zdGFuY2VvZiBDYWxsIHx8IChleHByIGluc3RhbmNlb2YgRm9yICYmIGV4cHIucmV0dXJucykpO1xuICAgICAgaWYgKGJhcmUpIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhmcmFnbWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUGFyZW5zO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuRm9yID0gRm9yID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGb3IsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBGb3IoYm9keSwgc291cmNlKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICBGb3IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZS5zb3VyY2UsIHRoaXMuZ3VhcmQgPSBzb3VyY2UuZ3VhcmQsIHRoaXMuc3RlcCA9IHNvdXJjZS5zdGVwLCB0aGlzLm5hbWUgPSBzb3VyY2UubmFtZSwgdGhpcy5pbmRleCA9IHNvdXJjZS5pbmRleDtcbiAgICAgIHRoaXMuYm9keSA9IEJsb2NrLndyYXAoW2JvZHldKTtcbiAgICAgIHRoaXMub3duID0gISFzb3VyY2Uub3duO1xuICAgICAgdGhpcy5vYmplY3QgPSAhIXNvdXJjZS5vYmplY3Q7XG4gICAgICBpZiAodGhpcy5vYmplY3QpIHtcbiAgICAgICAgX3JlZjIgPSBbdGhpcy5pbmRleCwgdGhpcy5uYW1lXSwgdGhpcy5uYW1lID0gX3JlZjJbMF0sIHRoaXMuaW5kZXggPSBfcmVmMlsxXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmluZGV4IGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbmRleC5lcnJvcignaW5kZXggY2Fubm90IGJlIGEgcGF0dGVybiBtYXRjaGluZyBleHByZXNzaW9uJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnJhbmdlID0gdGhpcy5zb3VyY2UgaW5zdGFuY2VvZiBWYWx1ZSAmJiB0aGlzLnNvdXJjZS5iYXNlIGluc3RhbmNlb2YgUmFuZ2UgJiYgIXRoaXMuc291cmNlLnByb3BlcnRpZXMubGVuZ3RoO1xuICAgICAgdGhpcy5wYXR0ZXJuID0gdGhpcy5uYW1lIGluc3RhbmNlb2YgVmFsdWU7XG4gICAgICBpZiAodGhpcy5yYW5nZSAmJiB0aGlzLmluZGV4KSB7XG4gICAgICAgIHRoaXMuaW5kZXguZXJyb3IoJ2luZGV4ZXMgZG8gbm90IGFwcGx5IHRvIHJhbmdlIGxvb3BzJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yYW5nZSAmJiB0aGlzLnBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5uYW1lLmVycm9yKCdjYW5ub3QgcGF0dGVybiBtYXRjaCBvdmVyIHJhbmdlIGxvb3BzJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vd24gJiYgIXRoaXMub2JqZWN0KSB7XG4gICAgICAgIHRoaXMubmFtZS5lcnJvcignY2Fubm90IHVzZSBvd24gd2l0aCBmb3ItaW4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmV0dXJucyA9IGZhbHNlO1xuICAgIH1cblxuICAgIEZvci5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2JvZHknLCAnc291cmNlJywgJ2d1YXJkJywgJ3N0ZXAnXTtcblxuICAgIEZvci5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYm9keSwgYm9keUZyYWdtZW50cywgY29tcGFyZSwgY29tcGFyZURvd24sIGRlY2xhcmUsIGRlY2xhcmVEb3duLCBkZWZQYXJ0LCBkZWZQYXJ0RnJhZ21lbnRzLCBkb3duLCBmb3JQYXJ0RnJhZ21lbnRzLCBndWFyZFBhcnQsIGlkdDEsIGluY3JlbWVudCwgaW5kZXgsIGl2YXIsIGt2YXIsIGt2YXJBc3NpZ24sIGxhc3RKdW1wcywgbHZhciwgbmFtZSwgbmFtZVBhcnQsIHJlZiwgcmVzdWx0UGFydCwgcmV0dXJuUmVzdWx0LCBydmFyLCBzY29wZSwgc291cmNlLCBzdGVwLCBzdGVwTnVtLCBzdGVwVmFyLCBzdmFyLCB2YXJQYXJ0LCBfcmVmMiwgX3JlZjM7XG4gICAgICBib2R5ID0gQmxvY2sud3JhcChbdGhpcy5ib2R5XSk7XG4gICAgICBsYXN0SnVtcHMgPSAoX3JlZjIgPSBsYXN0KGJvZHkuZXhwcmVzc2lvbnMpKSAhPSBudWxsID8gX3JlZjIuanVtcHMoKSA6IHZvaWQgMDtcbiAgICAgIGlmIChsYXN0SnVtcHMgJiYgbGFzdEp1bXBzIGluc3RhbmNlb2YgUmV0dXJuKSB7XG4gICAgICAgIHRoaXMucmV0dXJucyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgc291cmNlID0gdGhpcy5yYW5nZSA/IHRoaXMuc291cmNlLmJhc2UgOiB0aGlzLnNvdXJjZTtcbiAgICAgIHNjb3BlID0gby5zY29wZTtcbiAgICAgIGlmICghdGhpcy5wYXR0ZXJuKSB7XG4gICAgICAgIG5hbWUgPSB0aGlzLm5hbWUgJiYgKHRoaXMubmFtZS5jb21waWxlKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgIH1cbiAgICAgIGluZGV4ID0gdGhpcy5pbmRleCAmJiAodGhpcy5pbmRleC5jb21waWxlKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgIGlmIChuYW1lICYmICF0aGlzLnBhdHRlcm4pIHtcbiAgICAgICAgc2NvcGUuZmluZChuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCkge1xuICAgICAgICBzY29wZS5maW5kKGluZGV4KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJldHVybnMpIHtcbiAgICAgICAgcnZhciA9IHNjb3BlLmZyZWVWYXJpYWJsZSgncmVzdWx0cycpO1xuICAgICAgfVxuICAgICAgaXZhciA9ICh0aGlzLm9iamVjdCAmJiBpbmRleCkgfHwgc2NvcGUuZnJlZVZhcmlhYmxlKCdpJyk7XG4gICAgICBrdmFyID0gKHRoaXMucmFuZ2UgJiYgbmFtZSkgfHwgaW5kZXggfHwgaXZhcjtcbiAgICAgIGt2YXJBc3NpZ24gPSBrdmFyICE9PSBpdmFyID8gXCJcIiArIGt2YXIgKyBcIiA9IFwiIDogXCJcIjtcbiAgICAgIGlmICh0aGlzLnN0ZXAgJiYgIXRoaXMucmFuZ2UpIHtcbiAgICAgICAgX3JlZjMgPSB0aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKHRoaXMuc3RlcC5jYWNoZShvLCBMRVZFTF9MSVNUKSksIHN0ZXAgPSBfcmVmM1swXSwgc3RlcFZhciA9IF9yZWYzWzFdO1xuICAgICAgICBzdGVwTnVtID0gc3RlcFZhci5tYXRjaChOVU1CRVIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucGF0dGVybikge1xuICAgICAgICBuYW1lID0gaXZhcjtcbiAgICAgIH1cbiAgICAgIHZhclBhcnQgPSAnJztcbiAgICAgIGd1YXJkUGFydCA9ICcnO1xuICAgICAgZGVmUGFydCA9ICcnO1xuICAgICAgaWR0MSA9IHRoaXMudGFiICsgVEFCO1xuICAgICAgc291cmNlLmljZWRTdGF0ZW1lbnRBc3NlcnRpb24oKTtcbiAgICAgIGlmICh0aGlzLmljZWROb2RlRmxhZykge1xuICAgICAgICByZXR1cm4gdGhpcy5pY2VkQ29tcGlsZUljZWQobywge1xuICAgICAgICAgIHN0ZXBWYXI6IHN0ZXBWYXIsXG4gICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICBrdmFyOiBrdmFyLFxuICAgICAgICAgIGd1YXJkOiB0aGlzLmd1YXJkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmFuZ2UpIHtcbiAgICAgICAgZm9yUGFydEZyYWdtZW50cyA9IHNvdXJjZS5jb21waWxlVG9GcmFnbWVudHMobWVyZ2Uobywge1xuICAgICAgICAgIGluZGV4OiBpdmFyLFxuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgc3RlcDogdGhpcy5zdGVwXG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN2YXIgPSB0aGlzLnNvdXJjZS5jb21waWxlKG8sIExFVkVMX0xJU1QpO1xuICAgICAgICBpZiAoKG5hbWUgfHwgdGhpcy5vd24pICYmICFJREVOVElGSUVSLnRlc3Qoc3ZhcikpIHtcbiAgICAgICAgICBkZWZQYXJ0ICs9IFwiXCIgKyB0aGlzLnRhYiArIChyZWYgPSBzY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpKSArIFwiID0gXCIgKyBzdmFyICsgXCI7XFxuXCI7XG4gICAgICAgICAgc3ZhciA9IHJlZjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmFtZSAmJiAhdGhpcy5wYXR0ZXJuKSB7XG4gICAgICAgICAgbmFtZVBhcnQgPSBcIlwiICsgbmFtZSArIFwiID0gXCIgKyBzdmFyICsgXCJbXCIgKyBrdmFyICsgXCJdXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm9iamVjdCkge1xuICAgICAgICAgIGlmIChzdGVwICE9PSBzdGVwVmFyKSB7XG4gICAgICAgICAgICBkZWZQYXJ0ICs9IFwiXCIgKyB0aGlzLnRhYiArIHN0ZXAgKyBcIjtcXG5cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEodGhpcy5zdGVwICYmIHN0ZXBOdW0gJiYgKGRvd24gPSBwYXJzZU51bShzdGVwTnVtWzBdKSA8IDApKSkge1xuICAgICAgICAgICAgbHZhciA9IHNjb3BlLmZyZWVWYXJpYWJsZSgnbGVuJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlY2xhcmUgPSBcIlwiICsga3ZhckFzc2lnbiArIGl2YXIgKyBcIiA9IDAsIFwiICsgbHZhciArIFwiID0gXCIgKyBzdmFyICsgXCIubGVuZ3RoXCI7XG4gICAgICAgICAgZGVjbGFyZURvd24gPSBcIlwiICsga3ZhckFzc2lnbiArIGl2YXIgKyBcIiA9IFwiICsgc3ZhciArIFwiLmxlbmd0aCAtIDFcIjtcbiAgICAgICAgICBjb21wYXJlID0gXCJcIiArIGl2YXIgKyBcIiA8IFwiICsgbHZhcjtcbiAgICAgICAgICBjb21wYXJlRG93biA9IFwiXCIgKyBpdmFyICsgXCIgPj0gMFwiO1xuICAgICAgICAgIGlmICh0aGlzLnN0ZXApIHtcbiAgICAgICAgICAgIGlmIChzdGVwTnVtKSB7XG4gICAgICAgICAgICAgIGlmIChkb3duKSB7XG4gICAgICAgICAgICAgICAgY29tcGFyZSA9IGNvbXBhcmVEb3duO1xuICAgICAgICAgICAgICAgIGRlY2xhcmUgPSBkZWNsYXJlRG93bjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29tcGFyZSA9IFwiXCIgKyBzdGVwVmFyICsgXCIgPiAwID8gXCIgKyBjb21wYXJlICsgXCIgOiBcIiArIGNvbXBhcmVEb3duO1xuICAgICAgICAgICAgICBkZWNsYXJlID0gXCIoXCIgKyBzdGVwVmFyICsgXCIgPiAwID8gKFwiICsgZGVjbGFyZSArIFwiKSA6IFwiICsgZGVjbGFyZURvd24gKyBcIilcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluY3JlbWVudCA9IFwiXCIgKyBpdmFyICsgXCIgKz0gXCIgKyBzdGVwVmFyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmNyZW1lbnQgPSBcIlwiICsgKGt2YXIgIT09IGl2YXIgPyBcIisrXCIgKyBpdmFyIDogXCJcIiArIGl2YXIgKyBcIisrXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3JQYXJ0RnJhZ21lbnRzID0gW3RoaXMubWFrZUNvZGUoXCJcIiArIGRlY2xhcmUgKyBcIjsgXCIgKyBjb21wYXJlICsgXCI7IFwiICsga3ZhckFzc2lnbiArIGluY3JlbWVudCldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yZXR1cm5zKSB7XG4gICAgICAgIHJlc3VsdFBhcnQgPSBcIlwiICsgdGhpcy50YWIgKyBydmFyICsgXCIgPSBbXTtcXG5cIjtcbiAgICAgICAgcmV0dXJuUmVzdWx0ID0gdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA/IFwiXFxuXCIgKyB0aGlzLnRhYiArIGljZWRbXCJjb25zdFwiXS5hdXRvY2IgKyBcIihcIiArIHJ2YXIgKyBcIik7IHJldHVybjtcIiA6IFwiXFxuXCIgKyB0aGlzLnRhYiArIFwicmV0dXJuIFwiICsgcnZhciArIFwiO1wiO1xuICAgICAgICBib2R5Lm1ha2VSZXR1cm4ocnZhcik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5ndWFyZCkge1xuICAgICAgICBpZiAoYm9keS5leHByZXNzaW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KG5ldyBJZigobmV3IFBhcmVucyh0aGlzLmd1YXJkKSkuaW52ZXJ0KCksIG5ldyBMaXRlcmFsKFwiY29udGludWVcIikpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5ndWFyZCkge1xuICAgICAgICAgICAgYm9keSA9IEJsb2NrLndyYXAoW25ldyBJZih0aGlzLmd1YXJkLCBib2R5KV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMucGF0dGVybikge1xuICAgICAgICBib2R5LmV4cHJlc3Npb25zLnVuc2hpZnQobmV3IEFzc2lnbih0aGlzLm5hbWUsIG5ldyBMaXRlcmFsKFwiXCIgKyBzdmFyICsgXCJbXCIgKyBrdmFyICsgXCJdXCIpKSk7XG4gICAgICB9XG4gICAgICBkZWZQYXJ0RnJhZ21lbnRzID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoZGVmUGFydCksIHRoaXMucGx1Y2tEaXJlY3RDYWxsKG8sIGJvZHkpKTtcbiAgICAgIGlmIChuYW1lUGFydCkge1xuICAgICAgICB2YXJQYXJ0ID0gXCJcXG5cIiArIGlkdDEgKyBuYW1lUGFydCArIFwiO1wiO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub2JqZWN0KSB7XG4gICAgICAgIGZvclBhcnRGcmFnbWVudHMgPSBbdGhpcy5tYWtlQ29kZShcIlwiICsga3ZhciArIFwiIGluIFwiICsgc3ZhcildO1xuICAgICAgICBpZiAodGhpcy5vd24pIHtcbiAgICAgICAgICBndWFyZFBhcnQgPSBcIlxcblwiICsgaWR0MSArIFwiaWYgKCFcIiArICh1dGlsaXR5KCdoYXNQcm9wJykpICsgXCIuY2FsbChcIiArIHN2YXIgKyBcIiwgXCIgKyBrdmFyICsgXCIpKSBjb250aW51ZTtcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYm9keUZyYWdtZW50cyA9IGJvZHkuY29tcGlsZVRvRnJhZ21lbnRzKG1lcmdlKG8sIHtcbiAgICAgICAgaW5kZW50OiBpZHQxXG4gICAgICB9KSwgTEVWRUxfVE9QKTtcbiAgICAgIGlmIChib2R5RnJhZ21lbnRzICYmIChib2R5RnJhZ21lbnRzLmxlbmd0aCA+IDApKSB7XG4gICAgICAgIGJvZHlGcmFnbWVudHMgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIlxcblwiKSwgYm9keUZyYWdtZW50cywgdGhpcy5tYWtlQ29kZShcIlxcblwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW10uY29uY2F0KGRlZlBhcnRGcmFnbWVudHMsIHRoaXMubWFrZUNvZGUoXCJcIiArIChyZXN1bHRQYXJ0IHx8ICcnKSArIHRoaXMudGFiICsgXCJmb3IgKFwiKSwgZm9yUGFydEZyYWdtZW50cywgdGhpcy5tYWtlQ29kZShcIikge1wiICsgZ3VhcmRQYXJ0ICsgdmFyUGFydCksIGJvZHlGcmFnbWVudHMsIHRoaXMubWFrZUNvZGUoXCJcIiArIHRoaXMudGFiICsgXCJ9XCIgKyAocmV0dXJuUmVzdWx0IHx8ICcnKSkpO1xuICAgIH07XG5cbiAgICBGb3IucHJvdG90eXBlLnBsdWNrRGlyZWN0Q2FsbCA9IGZ1bmN0aW9uKG8sIGJvZHkpIHtcbiAgICAgIHZhciBiYXNlLCBkZWZzLCBleHByLCBmbiwgaWR4LCByZWYsIHZhbCwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1LCBfcmVmNiwgX3JlZjcsIF9yZWY4O1xuICAgICAgZGVmcyA9IFtdO1xuICAgICAgX3JlZjIgPSBib2R5LmV4cHJlc3Npb25zO1xuICAgICAgZm9yIChpZHggPSBfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgaWR4ID0gKytfaSkge1xuICAgICAgICBleHByID0gX3JlZjJbaWR4XTtcbiAgICAgICAgZXhwciA9IGV4cHIudW53cmFwQWxsKCk7XG4gICAgICAgIGlmICghKGV4cHIgaW5zdGFuY2VvZiBDYWxsKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhbCA9IChfcmVmMyA9IGV4cHIudmFyaWFibGUpICE9IG51bGwgPyBfcmVmMy51bndyYXBBbGwoKSA6IHZvaWQgMDtcbiAgICAgICAgaWYgKCEoKHZhbCBpbnN0YW5jZW9mIENvZGUpIHx8ICh2YWwgaW5zdGFuY2VvZiBWYWx1ZSAmJiAoKF9yZWY0ID0gdmFsLmJhc2UpICE9IG51bGwgPyBfcmVmNC51bndyYXBBbGwoKSA6IHZvaWQgMCkgaW5zdGFuY2VvZiBDb2RlICYmIHZhbC5wcm9wZXJ0aWVzLmxlbmd0aCA9PT0gMSAmJiAoKF9yZWY1ID0gKF9yZWY2ID0gdmFsLnByb3BlcnRpZXNbMF0ubmFtZSkgIT0gbnVsbCA/IF9yZWY2LnZhbHVlIDogdm9pZCAwKSA9PT0gJ2NhbGwnIHx8IF9yZWY1ID09PSAnYXBwbHknKSkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm4gPSAoKF9yZWY3ID0gdmFsLmJhc2UpICE9IG51bGwgPyBfcmVmNy51bndyYXBBbGwoKSA6IHZvaWQgMCkgfHwgdmFsO1xuICAgICAgICByZWYgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZSgnZm4nKSk7XG4gICAgICAgIGJhc2UgPSBuZXcgVmFsdWUocmVmKTtcbiAgICAgICAgaWYgKHZhbC5iYXNlKSB7XG4gICAgICAgICAgX3JlZjggPSBbYmFzZSwgdmFsXSwgdmFsLmJhc2UgPSBfcmVmOFswXSwgYmFzZSA9IF9yZWY4WzFdO1xuICAgICAgICB9XG4gICAgICAgIGJvZHkuZXhwcmVzc2lvbnNbaWR4XSA9IG5ldyBDYWxsKGJhc2UsIGV4cHIuYXJncyk7XG4gICAgICAgIGRlZnMgPSBkZWZzLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiKSwgbmV3IEFzc2lnbihyZWYsIGZuKS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSwgdGhpcy5tYWtlQ29kZSgnO1xcbicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZzO1xuICAgIH07XG5cbiAgICBGb3IucHJvdG90eXBlLmljZWRDb21waWxlSWNlZCA9IGZ1bmN0aW9uKG8sIGQpIHtcbiAgICAgIHZhciBhMSwgYTIsIGEzLCBhNCwgYTUsIGFfcG9zaXRpdmUsIGFfc3RlcFZhbCwgYiwgYmVnaW4sIGJvZHksIGNvbmRpdGlvbiwgZG93biwgZW1wdHlfYXJyLCBlbmQsIGV4Y2wsIGd1YXJkLCBpbmFtZSwgaW5pdCwgaW5pdF9zdGVwLCBpc19wb3NpdGl2ZSwgaXNfc3RlcF9wb3NpdGl2ZSwgaXZhbCwga2V5LCBrZXlfbGl0LCBrZXlfdmFsLCBrZXlzLCBrZXlzX2FjY2Vzcywga2V5c19sZW4sIGtleXNfdmFsLCBrdmFsLCBsZW4sIGxlbl9yaHMsIGxlbl92YWwsIGxvb3BfYm9keSwgbG9vcF9rZXlzLCBsb29wX3NvdXJjZSwgbmVnLCBwb3MsIHBvc2l0aXZlLCBwcmVfYm9keSwgcmVmLCByZWZfdmFsLCByZWZfdmFsX2NvcHksIHNjb3BlLCBzb3VyY2VfYWNjZXNzLCBzdGFydF9yaHMsIHN0ZXAsIHN0ZXBOdW0sIHN0ZXBWYWwsIHN0ZXBWYXIsIHN0ZXBfdmFyLCBzdGVwX3Zhcl92YWwsIF8sIF9yZWYyO1xuICAgICAgYm9keSA9IGQuYm9keTtcbiAgICAgIGNvbmRpdGlvbiA9IG51bGw7XG4gICAgICBpbml0ID0gW107XG4gICAgICBzdGVwID0gbnVsbDtcbiAgICAgIHNjb3BlID0gby5zY29wZTtcbiAgICAgIHByZV9ib2R5ID0gbmV3IEJsb2NrKFtdKTtcbiAgICAgIGlmICh0aGlzLm9iamVjdCkge1xuICAgICAgICByZWYgPSBzY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpO1xuICAgICAgICByZWZfdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHJlZikpO1xuICAgICAgICBhMSA9IG5ldyBBc3NpZ24ocmVmX3ZhbCwgdGhpcy5zb3VyY2UpO1xuICAgICAgICBrZXlzID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdrZXlzJyk7XG4gICAgICAgIGtleXNfdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGtleXMpKTtcbiAgICAgICAga2V5ID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdrJyk7XG4gICAgICAgIGtleV9saXQgPSBuZXcgTGl0ZXJhbChrZXkpO1xuICAgICAgICBrZXlfdmFsID0gbmV3IFZhbHVlKGtleV9saXQpO1xuICAgICAgICBlbXB0eV9hcnIgPSBuZXcgVmFsdWUobmV3IEFycik7XG4gICAgICAgIGxvb3BfYm9keSA9IG5ldyBCbG9jayhba2V5X3ZhbF0pO1xuICAgICAgICBsb29wX3NvdXJjZSA9IHtcbiAgICAgICAgICBvYmplY3Q6IHRydWUsXG4gICAgICAgICAgbmFtZToga2V5X2xpdCxcbiAgICAgICAgICBzb3VyY2U6IHJlZl92YWxcbiAgICAgICAgfTtcbiAgICAgICAgbG9vcF9rZXlzID0gbmV3IEZvcihsb29wX2JvZHksIGxvb3Bfc291cmNlKTtcbiAgICAgICAgYTIgPSBuZXcgQXNzaWduKGtleXNfdmFsLCBsb29wX2tleXMpO1xuICAgICAgICBpbmFtZSA9IHNjb3BlLmZyZWVWYXJpYWJsZSgnaScpO1xuICAgICAgICBpdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGluYW1lKSk7XG4gICAgICAgIGEzID0gbmV3IEFzc2lnbihpdmFsLCBuZXcgVmFsdWUobmV3IExpdGVyYWwoMCkpKTtcbiAgICAgICAgaW5pdCA9IFthMSwgYTIsIGEzXTtcbiAgICAgICAga2V5c19sZW4gPSBrZXlzX3ZhbC5jb3B5KCk7XG4gICAgICAgIGtleXNfbGVuLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcImxlbmd0aFwiKSkpKTtcbiAgICAgICAgY29uZGl0aW9uID0gbmV3IE9wKCc8JywgaXZhbCwga2V5c19sZW4pO1xuICAgICAgICBzdGVwID0gbmV3IE9wKCcrKycsIGl2YWwpO1xuICAgICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgc291cmNlX2FjY2VzcyA9IHJlZl92YWwuY29weSgpO1xuICAgICAgICAgIHNvdXJjZV9hY2Nlc3MuYWRkKG5ldyBJbmRleCh0aGlzLmluZGV4KSk7XG4gICAgICAgICAgYTUgPSBuZXcgQXNzaWduKHRoaXMubmFtZSwgc291cmNlX2FjY2Vzcyk7XG4gICAgICAgICAgcHJlX2JvZHkudW5zaGlmdChhNSk7XG4gICAgICAgIH1cbiAgICAgICAga2V5c19hY2Nlc3MgPSBrZXlzX3ZhbC5jb3B5KCk7XG4gICAgICAgIGtleXNfYWNjZXNzLmFkZChuZXcgSW5kZXgoaXZhbCkpO1xuICAgICAgICBhNCA9IG5ldyBBc3NpZ24odGhpcy5pbmRleCwga2V5c19hY2Nlc3MpO1xuICAgICAgICBwcmVfYm9keS51bnNoaWZ0KGE0KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5yYW5nZSkge1xuICAgICAgICBpZiAoIXRoaXMubmFtZSkge1xuICAgICAgICAgIHRoaXMubmFtZSA9IG5ldyBMaXRlcmFsKGQua3Zhcik7XG4gICAgICAgIH1cbiAgICAgICAgYmVnaW4gPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoXCJiZWdpblwiKSkpO1xuICAgICAgICBlbmQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoXCJlbmRcIikpKTtcbiAgICAgICAgcG9zaXRpdmUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoXCJwb3NpdGl2ZVwiKSkpO1xuICAgICAgICBzdGVwVmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKFwic3RlcFwiKSkpO1xuICAgICAgICBpZiAodGhpcy5zdGVwKSB7XG4gICAgICAgICAgYV9zdGVwVmFsID0gbmV3IEFzc2lnbihzdGVwVmFsLCB0aGlzLnN0ZXApO1xuICAgICAgICAgIGFfcG9zaXRpdmUgPSBuZXcgQXNzaWduKHBvc2l0aXZlLCBuZXcgT3AoXCI+XCIsIHN0ZXBWYWwsIG5ldyBMaXRlcmFsKDApKSwgbnVsbCwge1xuICAgICAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNfcG9zaXRpdmUgPSBuZXcgT3AoXCI+XCIsIGVuZCwgYmVnaW4pO1xuICAgICAgICAgIGFfc3RlcFZhbCA9IG5ldyBJZihpc19wb3NpdGl2ZSwgbmV3IEFzc2lnbihzdGVwVmFsLCBuZXcgTGl0ZXJhbCgxKSkpO1xuICAgICAgICAgIGFfc3RlcFZhbC5hZGRFbHNlKG5ldyBBc3NpZ24oc3RlcFZhbCwgbmV3IExpdGVyYWwoLTEpKSk7XG4gICAgICAgICAgYV9wb3NpdGl2ZSA9IG5ldyBBc3NpZ24ocG9zaXRpdmUsIGlzX3Bvc2l0aXZlLCBudWxsLCB7XG4gICAgICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzdGVwID0gbmV3IE9wKCcrPScsIHRoaXMubmFtZSwgc3RlcFZhbCk7XG4gICAgICAgIGV4Y2wgPSB0aGlzLnNvdXJjZS5iYXNlLmV4Y2x1c2l2ZSA/IFwiPVwiIDogJyc7XG4gICAgICAgIHBvcyA9IG5ldyBPcChcIiYmXCIsIG5ldyBPcChcIj09PVwiLCBwb3NpdGl2ZSwgbmV3IExpdGVyYWwodHJ1ZSkpLCBuZXcgT3AoXCI+XCIgKyBleGNsLCB0aGlzLm5hbWUsIHRoaXMuc291cmNlLmJhc2UudG8pKTtcbiAgICAgICAgbmVnID0gbmV3IE9wKFwiJiZcIiwgbmV3IE9wKFwiPT09XCIsIHBvc2l0aXZlLCBuZXcgTGl0ZXJhbChmYWxzZSkpLCBuZXcgT3AoXCI8XCIgKyBleGNsLCB0aGlzLm5hbWUsIHRoaXMuc291cmNlLmJhc2UudG8pKTtcbiAgICAgICAgY29uZGl0aW9uID0gbmV3IE9wKFwifHxcIiwgbmV3IFBhcmVucyhwb3MpLCBuZXcgUGFyZW5zKG5lZykpO1xuICAgICAgICBjb25kaXRpb24gPSBjb25kaXRpb24uaW52ZXJ0KCk7XG4gICAgICAgIGluaXQgPSBbXG4gICAgICAgICAgbmV3IEFzc2lnbih0aGlzLm5hbWUsIHRoaXMuc291cmNlLmJhc2UuZnJvbSksIG5ldyBBc3NpZ24oYmVnaW4sIHRoaXMuc291cmNlLmJhc2UuZnJvbSwgbnVsbCwge1xuICAgICAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICAgICAgfSksIG5ldyBBc3NpZ24oZW5kLCB0aGlzLnNvdXJjZS5iYXNlLnRvLCBudWxsLCB7XG4gICAgICAgICAgICBpY2VkbG9jYWw6IHRydWVcbiAgICAgICAgICB9KSwgYV9zdGVwVmFsLCBhX3Bvc2l0aXZlXG4gICAgICAgIF07XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLnJhbmdlICYmIHRoaXMubmFtZSkge1xuICAgICAgICBrdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGQua3ZhcikpO1xuICAgICAgICBsZW4gPSBzY29wZS5mcmVlVmFyaWFibGUoJ2xlbicpO1xuICAgICAgICByZWYgPSBzY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpO1xuICAgICAgICByZWZfdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHJlZikpO1xuICAgICAgICBsZW5fdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGxlbikpO1xuICAgICAgICBhMSA9IG5ldyBBc3NpZ24ocmVmX3ZhbCwgdGhpcy5zb3VyY2UpO1xuICAgICAgICBsZW5fcmhzID0gcmVmX3ZhbC5jb3B5KCkuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwibGVuZ3RoXCIpKSkpO1xuICAgICAgICBhMiA9IG5ldyBBc3NpZ24obGVuX3ZhbCwgbGVuX3Jocyk7XG4gICAgICAgIGluaXQgPSBbYTEsIGEyXTtcbiAgICAgICAgaWYgKCF0aGlzLnN0ZXApIHtcbiAgICAgICAgICBhMyA9IG5ldyBBc3NpZ24oa3ZhbCwgbmV3IExpdGVyYWwoMCkpO1xuICAgICAgICAgIHN0ZXAgPSBuZXcgT3AoJysrJywga3ZhbCk7XG4gICAgICAgICAgY29uZGl0aW9uID0gbmV3IE9wKCc8Jywga3ZhbCwgbGVuX3ZhbCk7XG4gICAgICAgICAgaW5pdC5wdXNoKGEzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVmMiA9IHRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHModGhpcy5zdGVwLmNhY2hlKG8sIExFVkVMX0xJU1QpKSwgXyA9IF9yZWYyWzBdLCBzdGVwVmFyID0gX3JlZjJbMV07XG4gICAgICAgICAgc3RlcE51bSA9IHN0ZXBWYXIubWF0Y2goTlVNQkVSKTtcbiAgICAgICAgICBpZiAoc3RlcE51bSkge1xuICAgICAgICAgICAgc3RlcCA9IG5ldyBBc3NpZ24oa3ZhbCwgbmV3IE9wKCcrJywga3ZhbCwgdGhpcy5zdGVwKSk7XG4gICAgICAgICAgICBkb3duID0gcGFyc2VOdW0oc3RlcE51bVswXSkgPCAwO1xuICAgICAgICAgICAgaWYgKGRvd24pIHtcbiAgICAgICAgICAgICAgYTMgPSBuZXcgQXNzaWduKGt2YWwsIG5ldyBPcCgnLScsIGxlbl92YWwsIG5ldyBMaXRlcmFsKDEpKSk7XG4gICAgICAgICAgICAgIGNvbmRpdGlvbiA9IG5ldyBPcCgnPj0nLCBrdmFsLCBuZXcgTGl0ZXJhbCgwKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhMyA9IG5ldyBBc3NpZ24oa3ZhbCwgbmV3IExpdGVyYWwoMCkpO1xuICAgICAgICAgICAgICBjb25kaXRpb24gPSBuZXcgT3AoJzwnLCBrdmFsLCBsZW5fdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluaXQucHVzaChhMyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0ZXBfdmFyID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdzdGVwJyk7XG4gICAgICAgICAgICBzdGVwX3Zhcl92YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoc3RlcF92YXIpKTtcbiAgICAgICAgICAgIGluaXRfc3RlcCA9IG5ldyBBc3NpZ24oc3RlcF92YXJfdmFsLCBuZXcgVmFsdWUodGhpcy5zdGVwKSk7XG4gICAgICAgICAgICBpc19zdGVwX3Bvc2l0aXZlID0gbmV3IE9wKCc+Jywgc3RlcF92YXJfdmFsLCBuZXcgTGl0ZXJhbCgwKSk7XG4gICAgICAgICAgICBzdGFydF9yaHMgPSBuZXcgSWYoaXNfc3RlcF9wb3NpdGl2ZSwgbmV3IFZhbHVlKG5ldyBMaXRlcmFsKDApKSk7XG4gICAgICAgICAgICBzdGFydF9yaHMuYWRkRWxzZShuZXcgT3AoJy0nLCBsZW5fdmFsLCBuZXcgTGl0ZXJhbCgxKSkpO1xuICAgICAgICAgICAgc3RlcCA9IG5ldyBBc3NpZ24oa3ZhbCwgbmV3IE9wKCcrJywga3ZhbCwgc3RlcF92YXJfdmFsKSk7XG4gICAgICAgICAgICBhMyA9IG5ldyBBc3NpZ24oa3ZhbCwgc3RhcnRfcmhzKTtcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IG5ldyBPcCgnJiYnLCBuZXcgT3AoJz49Jywga3ZhbCwgbmV3IExpdGVyYWwoMCkpLCBuZXcgT3AoJzwnLCBrdmFsLCBsZW5fdmFsKSk7XG4gICAgICAgICAgICBpbml0LnB1c2goaW5pdF9zdGVwLCBhMyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlZl92YWxfY29weSA9IHJlZl92YWwuY29weSgpO1xuICAgICAgICByZWZfdmFsX2NvcHkuYWRkKG5ldyBJbmRleChrdmFsKSk7XG4gICAgICAgIGE0ID0gbmV3IEFzc2lnbih0aGlzLm5hbWUsIHJlZl92YWxfY29weSk7XG4gICAgICAgIHByZV9ib2R5LnVuc2hpZnQoYTQpO1xuICAgICAgfVxuICAgICAgZ3VhcmQgPSBkLmd1YXJkO1xuICAgICAgYiA9IHRoaXMuaWNlZFdyYXAoe1xuICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbixcbiAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgc3RlcDogc3RlcCxcbiAgICAgICAgZ3VhcmQ6IGd1YXJkLFxuICAgICAgICBwcmVfYm9keTogcHJlX2JvZHlcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGIuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBGb3I7XG5cbiAgfSkoV2hpbGUpO1xuXG4gIGV4cG9ydHMuU3dpdGNoID0gU3dpdGNoID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTd2l0Y2gsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBTd2l0Y2goc3ViamVjdCwgY2FzZXMsIG90aGVyd2lzZSkge1xuICAgICAgdGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgIHRoaXMuY2FzZXMgPSBjYXNlcztcbiAgICAgIHRoaXMub3RoZXJ3aXNlID0gb3RoZXJ3aXNlO1xuICAgICAgU3dpdGNoLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3N1YmplY3QnLCAnY2FzZXMnLCAnb3RoZXJ3aXNlJ107XG5cbiAgICBTd2l0Y2gucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gWUVTO1xuXG4gICAgU3dpdGNoLnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBibG9jaywgY29uZHMsIGp1bXBOb2RlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIGlmIChvID09IG51bGwpIHtcbiAgICAgICAgbyA9IHtcbiAgICAgICAgICBibG9jazogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgX3JlZjIgPSB0aGlzLmNhc2VzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBfcmVmMyA9IF9yZWYyW19pXSwgY29uZHMgPSBfcmVmM1swXSwgYmxvY2sgPSBfcmVmM1sxXTtcbiAgICAgICAgaWYgKGp1bXBOb2RlID0gYmxvY2suanVtcHMobykpIHtcbiAgICAgICAgICByZXR1cm4ganVtcE5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAoX3JlZjQgPSB0aGlzLm90aGVyd2lzZSkgIT0gbnVsbCA/IF9yZWY0Lmp1bXBzKG8pIDogdm9pZCAwO1xuICAgIH07XG5cbiAgICBTd2l0Y2gucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBwYWlyLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzO1xuICAgICAgX3JlZjIgPSB0aGlzLmNhc2VzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwYWlyID0gX3JlZjJbX2ldO1xuICAgICAgICBwYWlyWzFdLm1ha2VSZXR1cm4ocmVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgdGhpcy5vdGhlcndpc2UgfHwgKHRoaXMub3RoZXJ3aXNlID0gbmV3IEJsb2NrKFtuZXcgTGl0ZXJhbCgndm9pZCAwJyldKSk7XG4gICAgICB9XG4gICAgICBpZiAoKF9yZWYzID0gdGhpcy5vdGhlcndpc2UpICE9IG51bGwpIHtcbiAgICAgICAgX3JlZjMubWFrZVJldHVybihyZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFN3aXRjaC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYmxvY2ssIGJvZHksIGNvbmQsIGNvbmRpdGlvbnMsIGV4cHIsIGZyYWdtZW50cywgaSwgaWR0MSwgaWR0MiwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIGlmICh0aGlzLnN1YmplY3QpIHtcbiAgICAgICAgdGhpcy5zdWJqZWN0LmljZWRTdGF0ZW1lbnRBc3NlcnRpb24oKTtcbiAgICAgIH1cbiAgICAgIGlkdDEgPSBvLmluZGVudCArIFRBQjtcbiAgICAgIGlkdDIgPSBvLmluZGVudCA9IGlkdDEgKyBUQUI7XG4gICAgICBmcmFnbWVudHMgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZSh0aGlzLnRhYiArIFwic3dpdGNoIChcIiksICh0aGlzLnN1YmplY3QgPyB0aGlzLnN1YmplY3QuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKSA6IHRoaXMubWFrZUNvZGUoXCJmYWxzZVwiKSksIHRoaXMubWFrZUNvZGUoXCIpIHtcXG5cIikpO1xuICAgICAgX3JlZjIgPSB0aGlzLmNhc2VzO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIF9yZWYzID0gX3JlZjJbaV0sIGNvbmRpdGlvbnMgPSBfcmVmM1swXSwgYmxvY2sgPSBfcmVmM1sxXTtcbiAgICAgICAgX3JlZjQgPSBmbGF0dGVuKFtjb25kaXRpb25zXSk7XG4gICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWY0Lmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgIGNvbmQgPSBfcmVmNFtfal07XG4gICAgICAgICAgaWYgKCF0aGlzLnN1YmplY3QpIHtcbiAgICAgICAgICAgIGNvbmQgPSBjb25kLmludmVydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmcmFnbWVudHMgPSBmcmFnbWVudHMuY29uY2F0KHRoaXMubWFrZUNvZGUoaWR0MSArIFwiY2FzZSBcIiksIGNvbmQuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKSwgdGhpcy5tYWtlQ29kZShcIjpcXG5cIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoYm9keSA9IGJsb2NrLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZnJhZ21lbnRzID0gZnJhZ21lbnRzLmNvbmNhdChib2R5LCB0aGlzLm1ha2VDb2RlKCdcXG4nKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IHRoaXMuY2FzZXMubGVuZ3RoIC0gMSAmJiAhdGhpcy5vdGhlcndpc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBleHByID0gdGhpcy5sYXN0Tm9uQ29tbWVudChibG9jay5leHByZXNzaW9ucyk7XG4gICAgICAgIGlmIChleHByIGluc3RhbmNlb2YgUmV0dXJuIHx8IChleHByIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBleHByLmp1bXBzKCkgJiYgZXhwci52YWx1ZSAhPT0gJ2RlYnVnZ2VyJykpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmcmFnbWVudHMucHVzaChjb25kLm1ha2VDb2RlKGlkdDIgKyAnYnJlYWs7XFxuJykpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3RoZXJ3aXNlICYmIHRoaXMub3RoZXJ3aXNlLmV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICBmcmFnbWVudHMucHVzaC5hcHBseShmcmFnbWVudHMsIFt0aGlzLm1ha2VDb2RlKGlkdDEgKyBcImRlZmF1bHQ6XFxuXCIpXS5jb25jYXQoX19zbGljZS5jYWxsKHRoaXMub3RoZXJ3aXNlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApKSwgW3RoaXMubWFrZUNvZGUoXCJcXG5cIildKSk7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiICsgJ30nKSk7XG4gICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgIH07XG5cbiAgICBTd2l0Y2gucHJvdG90eXBlLmljZWRDYWxsQ29udGludWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmxvY2ssIGNvbmRpdGlvbiwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMztcbiAgICAgIF9yZWYyID0gdGhpcy5jYXNlcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgX3JlZjMgPSBfcmVmMltfaV0sIGNvbmRpdGlvbiA9IF9yZWYzWzBdLCBibG9jayA9IF9yZWYzWzFdO1xuICAgICAgICBibG9jay5pY2VkVGhyZWFkUmV0dXJuKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vdGhlcndpc2UgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdGhlcndpc2UuaWNlZFRocmVhZFJldHVybigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3RoZXJ3aXNlID0gbmV3IEJsb2NrKFtuZXcgSWNlZFRhaWxDYWxsXSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2g7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5JZiA9IElmID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJZiwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIElmKGNvbmRpdGlvbiwgYm9keSwgb3B0aW9ucykge1xuICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgSWYuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmNvbmRpdGlvbiA9IG9wdGlvbnMudHlwZSA9PT0gJ3VubGVzcycgPyBjb25kaXRpb24uaW52ZXJ0KCkgOiBjb25kaXRpb247XG4gICAgICB0aGlzLmVsc2VCb2R5ID0gbnVsbDtcbiAgICAgIHRoaXMuaXNDaGFpbiA9IGZhbHNlO1xuICAgICAgdGhpcy5zb2FrID0gb3B0aW9ucy5zb2FrO1xuICAgIH1cblxuICAgIElmLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnY29uZGl0aW9uJywgJ2JvZHknLCAnZWxzZUJvZHknXTtcblxuICAgIElmLnByb3RvdHlwZS5ib2R5Tm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChfcmVmMiA9IHRoaXMuYm9keSkgIT0gbnVsbCA/IF9yZWYyLnVud3JhcCgpIDogdm9pZCAwO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuZWxzZUJvZHlOb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKF9yZWYyID0gdGhpcy5lbHNlQm9keSkgIT0gbnVsbCA/IF9yZWYyLnVud3JhcCgpIDogdm9pZCAwO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuYWRkRWxzZSA9IGZ1bmN0aW9uKGVsc2VCb2R5KSB7XG4gICAgICBpZiAodGhpcy5pc0NoYWluKSB7XG4gICAgICAgIHRoaXMuZWxzZUJvZHlOb2RlKCkuYWRkRWxzZShlbHNlQm9keSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlzQ2hhaW4gPSBlbHNlQm9keSBpbnN0YW5jZW9mIElmO1xuICAgICAgICB0aGlzLmVsc2VCb2R5ID0gdGhpcy5lbnN1cmVCbG9jayhlbHNlQm9keSk7XG4gICAgICAgIHRoaXMuZWxzZUJvZHkudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nKGVsc2VCb2R5LmxvY2F0aW9uRGF0YSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChvICE9IG51bGwgPyBvLmxldmVsIDogdm9pZCAwKSA9PT0gTEVWRUxfVE9QIHx8IHRoaXMuYm9keU5vZGUoKS5pc1N0YXRlbWVudChvKSB8fCAoKF9yZWYyID0gdGhpcy5lbHNlQm9keU5vZGUoKSkgIT0gbnVsbCA/IF9yZWYyLmlzU3RhdGVtZW50KG8pIDogdm9pZCAwKTtcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIHRoaXMuYm9keS5qdW1wcyhvKSB8fCAoKF9yZWYyID0gdGhpcy5lbHNlQm9keSkgIT0gbnVsbCA/IF9yZWYyLmp1bXBzKG8pIDogdm9pZCAwKTtcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdGhpcy5jb25kaXRpb24uaWNlZFN0YXRlbWVudEFzc2VydGlvbigpO1xuICAgICAgaWYgKHRoaXMuaXNTdGF0ZW1lbnQobyB8fCB0aGlzLmljZWRJc0Nwc1Bpdm90KCkpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVTdGF0ZW1lbnQobyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlRXhwcmVzc2lvbihvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgdGhpcy5lbHNlQm9keSB8fCAodGhpcy5lbHNlQm9keSA9IG5ldyBCbG9jayhbbmV3IExpdGVyYWwoJ3ZvaWQgMCcpXSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5ib2R5ICYmICh0aGlzLmJvZHkgPSBuZXcgQmxvY2soW3RoaXMuYm9keS5tYWtlUmV0dXJuKHJlcyldKSk7XG4gICAgICB0aGlzLmVsc2VCb2R5ICYmICh0aGlzLmVsc2VCb2R5ID0gbmV3IEJsb2NrKFt0aGlzLmVsc2VCb2R5Lm1ha2VSZXR1cm4ocmVzKV0pKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuZW5zdXJlQmxvY2sgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEJsb2NrKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9jayhbbm9kZV0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuY29tcGlsZVN0YXRlbWVudCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGJvZHksIGNoaWxkLCBjb25kLCBleGVxLCBpZlBhcnQsIGluZGVudDtcbiAgICAgIGNoaWxkID0gZGVsKG8sICdjaGFpbkNoaWxkJyk7XG4gICAgICBleGVxID0gZGVsKG8sICdpc0V4aXN0ZW50aWFsRXF1YWxzJyk7XG4gICAgICBpZiAoZXhlcSkge1xuICAgICAgICByZXR1cm4gbmV3IElmKHRoaXMuY29uZGl0aW9uLmludmVydCgpLCB0aGlzLmVsc2VCb2R5Tm9kZSgpLCB7XG4gICAgICAgICAgdHlwZTogJ2lmJ1xuICAgICAgICB9KS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICB9XG4gICAgICBpbmRlbnQgPSBvLmluZGVudCArIFRBQjtcbiAgICAgIGNvbmQgPSB0aGlzLmNvbmRpdGlvbi5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pO1xuICAgICAgYm9keSA9IHRoaXMuZW5zdXJlQmxvY2sodGhpcy5ib2R5KS5jb21waWxlVG9GcmFnbWVudHMobWVyZ2Uobywge1xuICAgICAgICBpbmRlbnQ6IGluZGVudFxuICAgICAgfSkpO1xuICAgICAgaWZQYXJ0ID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJpZiAoXCIpLCBjb25kLCB0aGlzLm1ha2VDb2RlKFwiKSB7XFxuXCIpLCBib2R5LCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwifVwiKSk7XG4gICAgICBpZiAoIWNoaWxkKSB7XG4gICAgICAgIGlmUGFydC51bnNoaWZ0KHRoaXMubWFrZUNvZGUodGhpcy50YWIpKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5lbHNlQm9keSkge1xuICAgICAgICByZXR1cm4gaWZQYXJ0O1xuICAgICAgfVxuICAgICAgYW5zd2VyID0gaWZQYXJ0LmNvbmNhdCh0aGlzLm1ha2VDb2RlKCcgZWxzZSAnKSk7XG4gICAgICBpZiAodGhpcy5pc0NoYWluKSB7XG4gICAgICAgIG8uY2hhaW5DaGlsZCA9IHRydWU7XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQodGhpcy5lbHNlQm9keS51bndyYXAoKS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KHRoaXMubWFrZUNvZGUoXCJ7XFxuXCIpLCB0aGlzLmVsc2VCb2R5LmNvbXBpbGVUb0ZyYWdtZW50cyhtZXJnZShvLCB7XG4gICAgICAgICAgaW5kZW50OiBpbmRlbnRcbiAgICAgICAgfSksIExFVkVMX1RPUCksIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJ9XCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5jb21waWxlRXhwcmVzc2lvbiA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbHQsIGJvZHksIGNvbmQsIGZyYWdtZW50cztcbiAgICAgIGNvbmQgPSB0aGlzLmNvbmRpdGlvbi5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfQ09ORCk7XG4gICAgICBib2R5ID0gdGhpcy5ib2R5Tm9kZSgpLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKTtcbiAgICAgIGFsdCA9IHRoaXMuZWxzZUJvZHlOb2RlKCkgPyB0aGlzLmVsc2VCb2R5Tm9kZSgpLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSA6IFt0aGlzLm1ha2VDb2RlKCd2b2lkIDAnKV07XG4gICAgICBmcmFnbWVudHMgPSBjb25kLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiID8gXCIpLCBib2R5LCB0aGlzLm1ha2VDb2RlKFwiIDogXCIpLCBhbHQpO1xuICAgICAgaWYgKG8ubGV2ZWwgPj0gTEVWRUxfQ09ORCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoZnJhZ21lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICB9XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS51bmZvbGRTb2FrID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb2FrICYmIHRoaXM7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5pY2VkQ2FsbENvbnRpbnVhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuZWxzZUJvZHkpIHtcbiAgICAgICAgdGhpcy5lbHNlQm9keS5pY2VkVGhyZWFkUmV0dXJuKCk7XG4gICAgICAgIHRoaXMuaXNDaGFpbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGRFbHNlKG5ldyBJY2VkVGFpbENhbGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYm9keS5pY2VkVGhyZWFkUmV0dXJuKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBJZjtcblxuICB9KShCYXNlKTtcblxuICBDbG9zdXJlID0ge1xuICAgIHdyYXA6IGZ1bmN0aW9uKGV4cHJlc3Npb25zLCBzdGF0ZW1lbnQsIG5vUmV0dXJuKSB7XG4gICAgICB2YXIgYXJncywgYXJndW1lbnRzTm9kZSwgY2FsbCwgZnVuYywgbWV0aDtcbiAgICAgIGlmIChleHByZXNzaW9ucy5qdW1wcygpKSB7XG4gICAgICAgIHJldHVybiBleHByZXNzaW9ucztcbiAgICAgIH1cbiAgICAgIGZ1bmMgPSBuZXcgQ29kZShbXSwgQmxvY2sud3JhcChbZXhwcmVzc2lvbnNdKSk7XG4gICAgICBhcmdzID0gW107XG4gICAgICBhcmd1bWVudHNOb2RlID0gZXhwcmVzc2lvbnMuY29udGFpbnModGhpcy5pc0xpdGVyYWxBcmd1bWVudHMpO1xuICAgICAgaWYgKGFyZ3VtZW50c05vZGUgJiYgZXhwcmVzc2lvbnMuY2xhc3NCb2R5KSB7XG4gICAgICAgIGFyZ3VtZW50c05vZGUuZXJyb3IoXCJDbGFzcyBib2RpZXMgc2hvdWxkbid0IHJlZmVyZW5jZSBhcmd1bWVudHNcIik7XG4gICAgICB9XG4gICAgICBpZiAoYXJndW1lbnRzTm9kZSB8fCBleHByZXNzaW9ucy5jb250YWlucyh0aGlzLmlzTGl0ZXJhbFRoaXMpKSB7XG4gICAgICAgIG1ldGggPSBuZXcgTGl0ZXJhbChhcmd1bWVudHNOb2RlID8gJ2FwcGx5JyA6ICdjYWxsJyk7XG4gICAgICAgIGFyZ3MgPSBbbmV3IExpdGVyYWwoJ3RoaXMnKV07XG4gICAgICAgIGlmIChhcmd1bWVudHNOb2RlKSB7XG4gICAgICAgICAgYXJncy5wdXNoKG5ldyBMaXRlcmFsKCdhcmd1bWVudHMnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuYyA9IG5ldyBWYWx1ZShmdW5jLCBbbmV3IEFjY2VzcyhtZXRoKV0pO1xuICAgICAgfVxuICAgICAgZnVuYy5ub1JldHVybiA9IG5vUmV0dXJuO1xuICAgICAgY2FsbCA9IG5ldyBDYWxsKGZ1bmMsIGFyZ3MpO1xuICAgICAgaWYgKHN0YXRlbWVudCkge1xuICAgICAgICByZXR1cm4gQmxvY2sud3JhcChbY2FsbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNhbGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBpc0xpdGVyYWxBcmd1bWVudHM6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBub2RlLnZhbHVlID09PSAnYXJndW1lbnRzJyAmJiAhbm9kZS5hc0tleTtcbiAgICB9LFxuICAgIGlzTGl0ZXJhbFRoaXM6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHJldHVybiAobm9kZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgbm9kZS52YWx1ZSA9PT0gJ3RoaXMnICYmICFub2RlLmFzS2V5KSB8fCAobm9kZSBpbnN0YW5jZW9mIENvZGUgJiYgbm9kZS5ib3VuZCkgfHwgKG5vZGUgaW5zdGFuY2VvZiBDYWxsICYmIG5vZGUuaXNTdXBlcik7XG4gICAgfVxuICB9O1xuXG4gIHVuZm9sZFNvYWsgPSBmdW5jdGlvbihvLCBwYXJlbnQsIG5hbWUpIHtcbiAgICB2YXIgaWZuO1xuICAgIGlmICghKGlmbiA9IHBhcmVudFtuYW1lXS51bmZvbGRTb2FrKG8pKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwYXJlbnRbbmFtZV0gPSBpZm4uYm9keTtcbiAgICBpZm4uYm9keSA9IG5ldyBWYWx1ZShwYXJlbnQpO1xuICAgIHJldHVybiBpZm47XG4gIH07XG5cbiAgQ3BzQ2FzY2FkZSA9IHtcbiAgICB3cmFwOiBmdW5jdGlvbihzdGF0ZW1lbnQsIHJlc3QsIHJldHVyblZhbHVlLCBvKSB7XG4gICAgICB2YXIgYXJncywgYmxvY2ssIGNhbGwsIGNvbnQsIGUsIGZ1bmM7XG4gICAgICBmdW5jID0gbmV3IENvZGUoW25ldyBQYXJhbShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uaykpXSwgQmxvY2sud3JhcChbc3RhdGVtZW50XSksICdpY2VkZ2VuJyk7XG4gICAgICBhcmdzID0gW107XG4gICAgICBpZiAocmV0dXJuVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuVmFsdWUuYmluZE5hbWUobyk7XG4gICAgICAgIGFyZ3MucHVzaChyZXR1cm5WYWx1ZSk7XG4gICAgICB9XG4gICAgICBibG9jayA9IEJsb2NrLndyYXAoW3Jlc3RdKTtcbiAgICAgIGlmICgoZSA9IGJsb2NrLmljZWRHZXRTaW5nbGUoKSkgJiYgZSBpbnN0YW5jZW9mIEljZWRUYWlsQ2FsbCAmJiBlLmNhbklubGluZSgpKSB7XG4gICAgICAgIGNvbnQgPSBlLmV4dHJhY3RGdW5jKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ID0gbmV3IENvZGUoYXJncywgYmxvY2ssICdpY2VkZ2VuJyk7XG4gICAgICB9XG4gICAgICBjYWxsID0gbmV3IENhbGwoZnVuYywgW2NvbnRdKTtcbiAgICAgIHJldHVybiBuZXcgQmxvY2soW2NhbGxdKTtcbiAgICB9XG4gIH07XG5cbiAgSWNlZFRhaWxDYWxsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJY2VkVGFpbENhbGwsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBJY2VkVGFpbENhbGwoZnVuYywgdmFsKSB7XG4gICAgICB0aGlzLmZ1bmMgPSBmdW5jO1xuICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgIHZhbCA9IG51bGw7XG4gICAgICB9XG4gICAgICBJY2VkVGFpbENhbGwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICBpZiAoIXRoaXMuZnVuYykge1xuICAgICAgICB0aGlzLmZ1bmMgPSBpY2VkW1wiY29uc3RcIl0uaztcbiAgICAgIH1cbiAgICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgfVxuXG4gICAgSWNlZFRhaWxDYWxsLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsndmFsdWUnXTtcblxuICAgIEljZWRUYWlsQ2FsbC5wcm90b3R5cGUuYXNzaWduVmFsdWUgPSBmdW5jdGlvbih2KSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZSA9IHY7XG4gICAgfTtcblxuICAgIEljZWRUYWlsQ2FsbC5wcm90b3R5cGUuY2FuSW5saW5lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMudmFsdWUgfHwgdGhpcy52YWx1ZSBpbnN0YW5jZW9mIEljZWRSZXR1cm5WYWx1ZTtcbiAgICB9O1xuXG4gICAgSWNlZFRhaWxDYWxsLnByb3RvdHlwZS5saXRlcmFsRnVuYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBMaXRlcmFsKHRoaXMuZnVuYyk7XG4gICAgfTtcblxuICAgIEljZWRUYWlsQ2FsbC5wcm90b3R5cGUuZXh0cmFjdEZ1bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgVmFsdWUodGhpcy5saXRlcmFsRnVuYygpKTtcbiAgICB9O1xuXG4gICAgSWNlZFRhaWxDYWxsLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhcmdzLCBmLCBvdXQ7XG4gICAgICBmID0gdGhpcy5saXRlcmFsRnVuYygpO1xuICAgICAgb3V0ID0gby5sZXZlbCA9PT0gTEVWRUxfVE9QID8gdGhpcy52YWx1ZSA/IG5ldyBCbG9jayhbdGhpcy52YWx1ZSwgbmV3IENhbGwoZildKSA6IG5ldyBDYWxsKGYpIDogKGFyZ3MgPSB0aGlzLnZhbHVlID8gW3RoaXMudmFsdWVdIDogW10sIG5ldyBDYWxsKGYsIGFyZ3MpKTtcbiAgICAgIHJldHVybiBvdXQuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBJY2VkVGFpbENhbGw7XG5cbiAgfSkoQmFzZSk7XG5cbiAgSWNlZFJldHVyblZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJY2VkUmV0dXJuVmFsdWUsIF9zdXBlcik7XG5cbiAgICBJY2VkUmV0dXJuVmFsdWUuY291bnRlciA9IDA7XG5cbiAgICBmdW5jdGlvbiBJY2VkUmV0dXJuVmFsdWUoKSB7XG4gICAgICBJY2VkUmV0dXJuVmFsdWUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgbnVsbCwgbnVsbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIEljZWRSZXR1cm5WYWx1ZS5wcm90b3R5cGUuYmluZE5hbWUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgbDtcbiAgICAgIGwgPSBcIlwiICsgKG8uc2NvcGUuZnJlZVZhcmlhYmxlKGljZWRbXCJjb25zdFwiXS5wYXJhbSwgZmFsc2UpKSArIFwiX1wiICsgKEljZWRSZXR1cm5WYWx1ZS5jb3VudGVyKyspO1xuICAgICAgcmV0dXJuIHRoaXMubmFtZSA9IG5ldyBMaXRlcmFsKGwpO1xuICAgIH07XG5cbiAgICBJY2VkUmV0dXJuVmFsdWUucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICBpZiAoIXRoaXMubmFtZSkge1xuICAgICAgICB0aGlzLmJpbmROYW1lKG8pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEljZWRSZXR1cm5WYWx1ZS5fX3N1cGVyX18uY29tcGlsZS5jYWxsKHRoaXMsIG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWNlZFJldHVyblZhbHVlO1xuXG4gIH0pKFBhcmFtKTtcblxuICBJbmxpbmVSdW50aW1lID0ge1xuICAgIGdlbmVyYXRlOiBmdW5jdGlvbihuc193aW5kb3cpIHtcbiAgICAgIHZhciBhMSwgYTIsIGFmLCBhcHBseV9jYWxsLCBhc3NpZ25tZW50cywgYm9keSwgY2FsbF9tZXRoLCBjbiwgY250LCBjbnRfbWVtYmVyLCBjb25zdHJ1Y3Rvcl9hc3NpZ24sIGNvbnN0cnVjdG9yX2JvZHksIGNvbnN0cnVjdG9yX2NvZGUsIGNvbnN0cnVjdG9yX25hbWUsIGNvbnN0cnVjdG9yX3BhcmFtcywgZGVjciwgZGVmZXJfYXNzaWduLCBkZWZlcl9ib2R5LCBkZWZlcl9jb2RlLCBkZWZlcl9uYW1lLCBkZWZlcl9wYXJhbXMsIGRwLCBkcF92YWx1ZSwgZm4sIGZuX2Fzc2lnbiwgZm5fY29kZSwgZm5fbmFtZSwgaWZfYm9keSwgaWZfY29uZCwgaWZfZXhwciwgaW5jLCBpbm5lcl9ib2R5LCBpbm5lcl9jb2RlLCBpbm5lcl9wYXJhbXMsIGlwLCBrLCBrX21lbWJlciwga2xhc3MsIGtsYXNzX2Fzc2lnbiwgbXlfYXBwbHksIG15X2lmLCBteV9udWxsLCBucywgbnNfb2JqLCBuc192YWwsIG9iaiwgb3V0ZXJfYmxvY2ssIHAxLCByZXRfbWVtYmVyLCB0cl9hc3NpZ24sIHRyX2Jsb2NrLCB0cl9jb2RlLCB0cl9uYW1lLCB0cl9wYXJhbXMsIF9mdWxmaWxsX2Fzc2lnbiwgX2Z1bGZpbGxfYm9keSwgX2Z1bGZpbGxfY2FsbCwgX2Z1bGZpbGxfY29kZSwgX2Z1bGZpbGxfbWV0aG9kLCBfZnVsZmlsbF9uYW1lO1xuICAgICAgayA9IG5ldyBMaXRlcmFsKFwiY29udGludWF0aW9uXCIpO1xuICAgICAgY250ID0gbmV3IExpdGVyYWwoXCJjb3VudFwiKTtcbiAgICAgIGNuID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5EZWZlcnJhbHMpKTtcbiAgICAgIG5zID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5ucykpO1xuICAgICAgaWYgKG5zX3dpbmRvdykge1xuICAgICAgICBuc193aW5kb3cuYWRkKG5ldyBBY2Nlc3MobnMpKTtcbiAgICAgICAgbnMgPSBuc193aW5kb3c7XG4gICAgICB9XG4gICAgICBrX21lbWJlciA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcInRoaXNcIikpO1xuICAgICAga19tZW1iZXIuYWRkKG5ldyBBY2Nlc3MoaykpO1xuICAgICAgcDEgPSBuZXcgUGFyYW0oa19tZW1iZXIpO1xuICAgICAgY250X21lbWJlciA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcInRoaXNcIikpO1xuICAgICAgY250X21lbWJlci5hZGQobmV3IEFjY2VzcyhjbnQpKTtcbiAgICAgIHJldF9tZW1iZXIgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJ0aGlzXCIpKTtcbiAgICAgIHJldF9tZW1iZXIuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5yZXRzbG90KSkpKTtcbiAgICAgIGExID0gbmV3IEFzc2lnbihjbnRfbWVtYmVyLCBuZXcgVmFsdWUobmV3IExpdGVyYWwoMSkpKTtcbiAgICAgIGEyID0gbmV3IEFzc2lnbihyZXRfbWVtYmVyLCBOVUxMKCkpO1xuICAgICAgY29uc3RydWN0b3JfcGFyYW1zID0gW3AxXTtcbiAgICAgIGNvbnN0cnVjdG9yX2JvZHkgPSBuZXcgQmxvY2soW2ExLCBhMl0pO1xuICAgICAgY29uc3RydWN0b3JfY29kZSA9IG5ldyBDb2RlKGNvbnN0cnVjdG9yX3BhcmFtcywgY29uc3RydWN0b3JfYm9keSk7XG4gICAgICBjb25zdHJ1Y3Rvcl9uYW1lID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwiY29uc3RydWN0b3JcIikpO1xuICAgICAgY29uc3RydWN0b3JfYXNzaWduID0gbmV3IEFzc2lnbihjb25zdHJ1Y3Rvcl9uYW1lLCBjb25zdHJ1Y3Rvcl9jb2RlKTtcbiAgICAgIGlmX2V4cHIgPSBuZXcgQ2FsbChrX21lbWJlciwgW3JldF9tZW1iZXJdKTtcbiAgICAgIGlmX2JvZHkgPSBuZXcgQmxvY2soW2lmX2V4cHJdKTtcbiAgICAgIGRlY3IgPSBuZXcgT3AoJy0tJywgY250X21lbWJlcik7XG4gICAgICBpZl9jb25kID0gbmV3IE9wKCchJywgZGVjcik7XG4gICAgICBteV9pZiA9IG5ldyBJZihpZl9jb25kLCBpZl9ib2R5KTtcbiAgICAgIF9mdWxmaWxsX2JvZHkgPSBuZXcgQmxvY2soW215X2lmXSk7XG4gICAgICBfZnVsZmlsbF9jb2RlID0gbmV3IENvZGUoW10sIF9mdWxmaWxsX2JvZHkpO1xuICAgICAgX2Z1bGZpbGxfbmFtZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZnVsZmlsbCkpO1xuICAgICAgX2Z1bGZpbGxfYXNzaWduID0gbmV3IEFzc2lnbihfZnVsZmlsbF9uYW1lLCBfZnVsZmlsbF9jb2RlKTtcbiAgICAgIGluYyA9IG5ldyBPcChcIisrXCIsIGNudF9tZW1iZXIpO1xuICAgICAgaXAgPSBuZXcgTGl0ZXJhbChcImlubmVyX3BhcmFtc1wiKTtcbiAgICAgIGRwID0gbmV3IExpdGVyYWwoXCJkZWZlcl9wYXJhbXNcIik7XG4gICAgICBkcF92YWx1ZSA9IG5ldyBWYWx1ZShkcCk7XG4gICAgICBjYWxsX21ldGggPSBuZXcgVmFsdWUoZHApO1xuICAgICAgYWYgPSBuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uYXNzaWduX2ZuKTtcbiAgICAgIGNhbGxfbWV0aC5hZGQobmV3IEFjY2VzcyhhZiwgXCJzb2FrXCIpKTtcbiAgICAgIG15X2FwcGx5ID0gbmV3IExpdGVyYWwoXCJhcHBseVwiKTtcbiAgICAgIGNhbGxfbWV0aC5hZGQobmV3IEFjY2VzcyhteV9hcHBseSwgXCJzb2FrXCIpKTtcbiAgICAgIG15X251bGwgPSBOVUxMKCk7XG4gICAgICBhcHBseV9jYWxsID0gbmV3IENhbGwoY2FsbF9tZXRoLCBbbXlfbnVsbCwgbmV3IFZhbHVlKGlwKV0pO1xuICAgICAgX2Z1bGZpbGxfbWV0aG9kID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwidGhpc1wiKSk7XG4gICAgICBfZnVsZmlsbF9tZXRob2QuYWRkKG5ldyBBY2Nlc3MobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZ1bGZpbGwpKSk7XG4gICAgICBfZnVsZmlsbF9jYWxsID0gbmV3IENhbGwoX2Z1bGZpbGxfbWV0aG9kLCBbXSk7XG4gICAgICBpbm5lcl9ib2R5ID0gbmV3IEJsb2NrKFthcHBseV9jYWxsLCBfZnVsZmlsbF9jYWxsXSk7XG4gICAgICBpbm5lcl9wYXJhbXMgPSBbbmV3IFBhcmFtKGlwLCBudWxsLCB0cnVlKV07XG4gICAgICBpbm5lcl9jb2RlID0gbmV3IENvZGUoaW5uZXJfcGFyYW1zLCBpbm5lcl9ib2R5LCBcImJvdW5kZnVuY1wiKTtcbiAgICAgIGRlZmVyX2JvZHkgPSBuZXcgQmxvY2soW2luYywgaW5uZXJfY29kZV0pO1xuICAgICAgZGVmZXJfcGFyYW1zID0gW25ldyBQYXJhbShkcCldO1xuICAgICAgZGVmZXJfY29kZSA9IG5ldyBDb2RlKGRlZmVyX3BhcmFtcywgZGVmZXJfYm9keSk7XG4gICAgICBkZWZlcl9uYW1lID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5kZWZlcl9tZXRob2QpKTtcbiAgICAgIGRlZmVyX2Fzc2lnbiA9IG5ldyBBc3NpZ24oZGVmZXJfbmFtZSwgZGVmZXJfY29kZSk7XG4gICAgICBhc3NpZ25tZW50cyA9IFtjb25zdHJ1Y3Rvcl9hc3NpZ24sIF9mdWxmaWxsX2Fzc2lnbiwgZGVmZXJfYXNzaWduXTtcbiAgICAgIG9iaiA9IG5ldyBPYmooYXNzaWdubWVudHMsIHRydWUpO1xuICAgICAgYm9keSA9IG5ldyBCbG9jayhbbmV3IFZhbHVlKG9iaildKTtcbiAgICAgIGtsYXNzID0gbmV3IENsYXNzKG51bGwsIG51bGwsIGJvZHkpO1xuICAgICAga2xhc3NfYXNzaWduID0gbmV3IEFzc2lnbihjbiwga2xhc3MsIFwib2JqZWN0XCIpO1xuICAgICAgb3V0ZXJfYmxvY2sgPSBuZXcgQmxvY2soW05VTEwoKV0pO1xuICAgICAgZm5fY29kZSA9IG5ldyBDb2RlKFtdLCBvdXRlcl9ibG9jayk7XG4gICAgICBmbl9uYW1lID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5maW5kRGVmZXJyYWwpKTtcbiAgICAgIGZuX2Fzc2lnbiA9IG5ldyBBc3NpZ24oZm5fbmFtZSwgZm5fY29kZSwgXCJvYmplY3RcIik7XG4gICAgICBmbiA9IG5ldyBMaXRlcmFsKFwiX2ZuXCIpO1xuICAgICAgdHJfYmxvY2sgPSBuZXcgQmxvY2soW25ldyBDYWxsKG5ldyBWYWx1ZShmbiksIFtdKV0pO1xuICAgICAgdHJfcGFyYW1zID0gW25ldyBQYXJhbShmbildO1xuICAgICAgdHJfY29kZSA9IG5ldyBDb2RlKHRyX3BhcmFtcywgdHJfYmxvY2spO1xuICAgICAgdHJfbmFtZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0udHJhbXBvbGluZSkpO1xuICAgICAgdHJfYXNzaWduID0gbmV3IEFzc2lnbih0cl9uYW1lLCB0cl9jb2RlLCBcIm9iamVjdFwiKTtcbiAgICAgIG5zX29iaiA9IG5ldyBPYmooW2tsYXNzX2Fzc2lnbiwgZm5fYXNzaWduLCB0cl9hc3NpZ25dLCB0cnVlKTtcbiAgICAgIG5zX3ZhbCA9IG5ldyBWYWx1ZShuc19vYmopO1xuICAgICAgcmV0dXJuIG5ldyBBc3NpZ24obnMsIG5zX3ZhbCk7XG4gICAgfVxuICB9O1xuXG4gIFVUSUxJVElFUyA9IHtcbiAgICBcImV4dGVuZHNcIjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKFwiICsgKHV0aWxpdHkoJ2hhc1Byb3AnKSkgKyBcIi5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfVwiO1xuICAgIH0sXG4gICAgYmluZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJ2Z1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0nO1xuICAgIH0sXG4gICAgaW5kZXhPZjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfVwiO1xuICAgIH0sXG4gICAgbW9kdWxvOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcImZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuICgrYSAlIChiID0gK2IpICsgYikgJSBiOyB9XCI7XG4gICAgfSxcbiAgICBoYXNQcm9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAne30uaGFzT3duUHJvcGVydHknO1xuICAgIH0sXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdbXS5zbGljZSc7XG4gICAgfVxuICB9O1xuXG4gIExFVkVMX1RPUCA9IDE7XG5cbiAgTEVWRUxfUEFSRU4gPSAyO1xuXG4gIExFVkVMX0xJU1QgPSAzO1xuXG4gIExFVkVMX0NPTkQgPSA0O1xuXG4gIExFVkVMX09QID0gNTtcblxuICBMRVZFTF9BQ0NFU1MgPSA2O1xuXG4gIFRBQiA9ICcgICc7XG5cbiAgSURFTlRJRklFUl9TVFIgPSBcIlskQS1aYS16X1xcXFx4N2YtXFxcXHVmZmZmXVskXFxcXHdcXFxceDdmLVxcXFx1ZmZmZl0qXCI7XG5cbiAgSURFTlRJRklFUiA9IFJlZ0V4cChcIl5cIiArIElERU5USUZJRVJfU1RSICsgXCIkXCIpO1xuXG4gIFNJTVBMRU5VTSA9IC9eWystXT9cXGQrJC87XG5cbiAgSEVYTlVNID0gL15bKy1dPzB4W1xcZGEtZl0rL2k7XG5cbiAgTlVNQkVSID0gL15bKy1dPyg/OjB4W1xcZGEtZl0rfFxcZCpcXC4/XFxkKyg/OmVbKy1dP1xcZCspPykkL2k7XG5cbiAgTUVUSE9EX0RFRiA9IFJlZ0V4cChcIl4oXCIgKyBJREVOVElGSUVSX1NUUiArIFwiKShcXFxcLnByb3RvdHlwZSk/KD86XFxcXC4oXCIgKyBJREVOVElGSUVSX1NUUiArIFwiKXxcXFxcWyhcXFwiKD86W15cXFxcXFxcXFxcXCJcXFxcclxcXFxuXXxcXFxcXFxcXC4pKlxcXCJ8Jyg/OlteXFxcXFxcXFwnXFxcXHJcXFxcbl18XFxcXFxcXFwuKSonKVxcXFxdfFxcXFxbKDB4W1xcXFxkYS1mQS1GXSt8XFxcXGQqXFxcXC4/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pXFxcXF0pJFwiKTtcblxuICBJU19TVFJJTkcgPSAvXlsnXCJdLztcblxuICBJU19SRUdFWCA9IC9eXFwvLztcblxuICB1dGlsaXR5ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciByZWY7XG4gICAgcmVmID0gXCJfX1wiICsgbmFtZTtcbiAgICBTY29wZS5yb290LmFzc2lnbihyZWYsIFVUSUxJVElFU1tuYW1lXSgpKTtcbiAgICByZXR1cm4gcmVmO1xuICB9O1xuXG4gIG11bHRpZGVudCA9IGZ1bmN0aW9uKGNvZGUsIHRhYikge1xuICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcbi9nLCAnJCYnICsgdGFiKTtcbiAgICByZXR1cm4gY29kZS5yZXBsYWNlKC9cXHMrJC8sICcnKTtcbiAgfTtcblxuICBwYXJzZU51bSA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2UgaWYgKHgubWF0Y2goSEVYTlVNKSkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHgsIDE2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoeCk7XG4gICAgfVxuICB9O1xuXG4gIGlzTGl0ZXJhbEFyZ3VtZW50cyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgbm9kZS52YWx1ZSA9PT0gJ2FyZ3VtZW50cycgJiYgIW5vZGUuYXNLZXk7XG4gIH07XG5cbiAgaXNMaXRlcmFsVGhpcyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gKG5vZGUgaW5zdGFuY2VvZiBMaXRlcmFsICYmIG5vZGUudmFsdWUgPT09ICd0aGlzJyAmJiAhbm9kZS5hc0tleSkgfHwgKG5vZGUgaW5zdGFuY2VvZiBDb2RlICYmIG5vZGUuYm91bmQpIHx8IChub2RlIGluc3RhbmNlb2YgQ2FsbCAmJiBub2RlLmlzU3VwZXIpO1xuICB9O1xuXG4gIHVuZm9sZFNvYWsgPSBmdW5jdGlvbihvLCBwYXJlbnQsIG5hbWUpIHtcbiAgICB2YXIgaWZuO1xuICAgIGlmICghKGlmbiA9IHBhcmVudFtuYW1lXS51bmZvbGRTb2FrKG8pKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwYXJlbnRbbmFtZV0gPSBpZm4uYm9keTtcbiAgICBpZm4uYm9keSA9IG5ldyBWYWx1ZShwYXJlbnQpO1xuICAgIHJldHVybiBpZm47XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvKiBwYXJzZXIgZ2VuZXJhdGVkIGJ5IGppc29uIDAuNC4xMyAqL1xuLypcbiAgUmV0dXJucyBhIFBhcnNlciBvYmplY3Qgb2YgdGhlIGZvbGxvd2luZyBzdHJ1Y3R1cmU6XG5cbiAgUGFyc2VyOiB7XG4gICAgeXk6IHt9XG4gIH1cblxuICBQYXJzZXIucHJvdG90eXBlOiB7XG4gICAgeXk6IHt9LFxuICAgIHRyYWNlOiBmdW5jdGlvbigpLFxuICAgIHN5bWJvbHNfOiB7YXNzb2NpYXRpdmUgbGlzdDogbmFtZSA9PT4gbnVtYmVyfSxcbiAgICB0ZXJtaW5hbHNfOiB7YXNzb2NpYXRpdmUgbGlzdDogbnVtYmVyID09PiBuYW1lfSxcbiAgICBwcm9kdWN0aW9uc186IFsuLi5dLFxuICAgIHBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uIGFub255bW91cyh5eXRleHQsIHl5bGVuZywgeXlsaW5lbm8sIHl5LCB5eXN0YXRlLCAkJCwgXyQpLFxuICAgIHRhYmxlOiBbLi4uXSxcbiAgICBkZWZhdWx0QWN0aW9uczogey4uLn0sXG4gICAgcGFyc2VFcnJvcjogZnVuY3Rpb24oc3RyLCBoYXNoKSxcbiAgICBwYXJzZTogZnVuY3Rpb24oaW5wdXQpLFxuXG4gICAgbGV4ZXI6IHtcbiAgICAgICAgRU9GOiAxLFxuICAgICAgICBwYXJzZUVycm9yOiBmdW5jdGlvbihzdHIsIGhhc2gpLFxuICAgICAgICBzZXRJbnB1dDogZnVuY3Rpb24oaW5wdXQpLFxuICAgICAgICBpbnB1dDogZnVuY3Rpb24oKSxcbiAgICAgICAgdW5wdXQ6IGZ1bmN0aW9uKHN0ciksXG4gICAgICAgIG1vcmU6IGZ1bmN0aW9uKCksXG4gICAgICAgIGxlc3M6IGZ1bmN0aW9uKG4pLFxuICAgICAgICBwYXN0SW5wdXQ6IGZ1bmN0aW9uKCksXG4gICAgICAgIHVwY29taW5nSW5wdXQ6IGZ1bmN0aW9uKCksXG4gICAgICAgIHNob3dQb3NpdGlvbjogZnVuY3Rpb24oKSxcbiAgICAgICAgdGVzdF9tYXRjaDogZnVuY3Rpb24ocmVnZXhfbWF0Y2hfYXJyYXksIHJ1bGVfaW5kZXgpLFxuICAgICAgICBuZXh0OiBmdW5jdGlvbigpLFxuICAgICAgICBsZXg6IGZ1bmN0aW9uKCksXG4gICAgICAgIGJlZ2luOiBmdW5jdGlvbihjb25kaXRpb24pLFxuICAgICAgICBwb3BTdGF0ZTogZnVuY3Rpb24oKSxcbiAgICAgICAgX2N1cnJlbnRSdWxlczogZnVuY3Rpb24oKSxcbiAgICAgICAgdG9wU3RhdGU6IGZ1bmN0aW9uKCksXG4gICAgICAgIHB1c2hTdGF0ZTogZnVuY3Rpb24oY29uZGl0aW9uKSxcblxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICByYW5nZXM6IGJvb2xlYW4gICAgICAgICAgIChvcHRpb25hbDogdHJ1ZSA9PT4gdG9rZW4gbG9jYXRpb24gaW5mbyB3aWxsIGluY2x1ZGUgYSAucmFuZ2VbXSBtZW1iZXIpXG4gICAgICAgICAgICBmbGV4OiBib29sZWFuICAgICAgICAgICAgIChvcHRpb25hbDogdHJ1ZSA9PT4gZmxleC1saWtlIGxleGluZyBiZWhhdmlvdXIgd2hlcmUgdGhlIHJ1bGVzIGFyZSB0ZXN0ZWQgZXhoYXVzdGl2ZWx5IHRvIGZpbmQgdGhlIGxvbmdlc3QgbWF0Y2gpXG4gICAgICAgICAgICBiYWNrdHJhY2tfbGV4ZXI6IGJvb2xlYW4gIChvcHRpb25hbDogdHJ1ZSA9PT4gbGV4ZXIgcmVnZXhlcyBhcmUgdGVzdGVkIGluIG9yZGVyIGFuZCBmb3IgZWFjaCBtYXRjaGluZyByZWdleCB0aGUgYWN0aW9uIGNvZGUgaXMgaW52b2tlZDsgdGhlIGxleGVyIHRlcm1pbmF0ZXMgdGhlIHNjYW4gd2hlbiBhIHRva2VuIGlzIHJldHVybmVkIGJ5IHRoZSBhY3Rpb24gY29kZSlcbiAgICAgICAgfSxcblxuICAgICAgICBwZXJmb3JtQWN0aW9uOiBmdW5jdGlvbih5eSwgeXlfLCAkYXZvaWRpbmdfbmFtZV9jb2xsaXNpb25zLCBZWV9TVEFSVCksXG4gICAgICAgIHJ1bGVzOiBbLi4uXSxcbiAgICAgICAgY29uZGl0aW9uczoge2Fzc29jaWF0aXZlIGxpc3Q6IG5hbWUgPT0+IHNldH0sXG4gICAgfVxuICB9XG5cblxuICB0b2tlbiBsb2NhdGlvbiBpbmZvIChAJCwgXyQsIGV0Yy4pOiB7XG4gICAgZmlyc3RfbGluZTogbixcbiAgICBsYXN0X2xpbmU6IG4sXG4gICAgZmlyc3RfY29sdW1uOiBuLFxuICAgIGxhc3RfY29sdW1uOiBuLFxuICAgIHJhbmdlOiBbc3RhcnRfbnVtYmVyLCBlbmRfbnVtYmVyXSAgICAgICAod2hlcmUgdGhlIG51bWJlcnMgYXJlIGluZGV4ZXMgaW50byB0aGUgaW5wdXQgc3RyaW5nLCByZWd1bGFyIHplcm8tYmFzZWQpXG4gIH1cblxuXG4gIHRoZSBwYXJzZUVycm9yIGZ1bmN0aW9uIHJlY2VpdmVzIGEgJ2hhc2gnIG9iamVjdCB3aXRoIHRoZXNlIG1lbWJlcnMgZm9yIGxleGVyIGFuZCBwYXJzZXIgZXJyb3JzOiB7XG4gICAgdGV4dDogICAgICAgIChtYXRjaGVkIHRleHQpXG4gICAgdG9rZW46ICAgICAgICh0aGUgcHJvZHVjZWQgdGVybWluYWwgdG9rZW4sIGlmIGFueSlcbiAgICBsaW5lOiAgICAgICAgKHl5bGluZW5vKVxuICB9XG4gIHdoaWxlIHBhcnNlciAoZ3JhbW1hcikgZXJyb3JzIHdpbGwgYWxzbyBwcm92aWRlIHRoZXNlIG1lbWJlcnMsIGkuZS4gcGFyc2VyIGVycm9ycyBkZWxpdmVyIGEgc3VwZXJzZXQgb2YgYXR0cmlidXRlczoge1xuICAgIGxvYzogICAgICAgICAoeXlsbG9jKVxuICAgIGV4cGVjdGVkOiAgICAoc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHNldCBvZiBleHBlY3RlZCB0b2tlbnMpXG4gICAgcmVjb3ZlcmFibGU6IChib29sZWFuOiBUUlVFIHdoZW4gdGhlIHBhcnNlciBoYXMgYSBlcnJvciByZWNvdmVyeSBydWxlIGF2YWlsYWJsZSBmb3IgdGhpcyBwYXJ0aWN1bGFyIGVycm9yKVxuICB9XG4qL1xudmFyIHBhcnNlciA9IChmdW5jdGlvbigpe1xudmFyIHBhcnNlciA9IHt0cmFjZTogZnVuY3Rpb24gdHJhY2UoKSB7IH0sXG55eToge30sXG5zeW1ib2xzXzoge1wiZXJyb3JcIjoyLFwiUm9vdFwiOjMsXCJCb2R5XCI6NCxcIkxpbmVcIjo1LFwiVEVSTUlOQVRPUlwiOjYsXCJFeHByZXNzaW9uXCI6NyxcIlN0YXRlbWVudFwiOjgsXCJSZXR1cm5cIjo5LFwiQ29tbWVudFwiOjEwLFwiU1RBVEVNRU5UXCI6MTEsXCJBd2FpdFwiOjEyLFwiQVdBSVRcIjoxMyxcIkJsb2NrXCI6MTQsXCJWYWx1ZVwiOjE1LFwiSW52b2NhdGlvblwiOjE2LFwiQ29kZVwiOjE3LFwiT3BlcmF0aW9uXCI6MTgsXCJBc3NpZ25cIjoxOSxcIklmXCI6MjAsXCJUcnlcIjoyMSxcIldoaWxlXCI6MjIsXCJGb3JcIjoyMyxcIlN3aXRjaFwiOjI0LFwiQ2xhc3NcIjoyNSxcIlRocm93XCI6MjYsXCJEZWZlclwiOjI3LFwiSU5ERU5UXCI6MjgsXCJPVVRERU5UXCI6MjksXCJJZGVudGlmaWVyXCI6MzAsXCJJREVOVElGSUVSXCI6MzEsXCJBbHBoYU51bWVyaWNcIjozMixcIk5VTUJFUlwiOjMzLFwiU1RSSU5HXCI6MzQsXCJMaXRlcmFsXCI6MzUsXCJKU1wiOjM2LFwiUkVHRVhcIjozNyxcIkRFQlVHR0VSXCI6MzgsXCJVTkRFRklORURcIjozOSxcIk5VTExcIjo0MCxcIkJPT0xcIjo0MSxcIkFzc2lnbmFibGVcIjo0MixcIj1cIjo0MyxcIkFzc2lnbk9ialwiOjQ0LFwiT2JqQXNzaWduYWJsZVwiOjQ1LFwiOlwiOjQ2LFwiVGhpc1Byb3BlcnR5XCI6NDcsXCJSRVRVUk5cIjo0OCxcIkhFUkVDT01NRU5UXCI6NDksXCJQQVJBTV9TVEFSVFwiOjUwLFwiUGFyYW1MaXN0XCI6NTEsXCJQQVJBTV9FTkRcIjo1MixcIkZ1bmNHbHlwaFwiOjUzLFwiLT5cIjo1NCxcIj0+XCI6NTUsXCJPcHRDb21tYVwiOjU2LFwiLFwiOjU3LFwiUGFyYW1cIjo1OCxcIlBhcmFtVmFyXCI6NTksXCIuLi5cIjo2MCxcIkFycmF5XCI6NjEsXCJPYmplY3RcIjo2MixcIlNwbGF0XCI6NjMsXCJTaW1wbGVBc3NpZ25hYmxlXCI6NjQsXCJBY2Nlc3NvclwiOjY1LFwiUGFyZW50aGV0aWNhbFwiOjY2LFwiUmFuZ2VcIjo2NyxcIlRoaXNcIjo2OCxcIi5cIjo2OSxcIj8uXCI6NzAsXCI6OlwiOjcxLFwiPzo6XCI6NzIsXCJJbmRleFwiOjczLFwiSU5ERVhfU1RBUlRcIjo3NCxcIkluZGV4VmFsdWVcIjo3NSxcIklOREVYX0VORFwiOjc2LFwiSU5ERVhfU09BS1wiOjc3LFwiU2xpY2VcIjo3OCxcIntcIjo3OSxcIkFzc2lnbkxpc3RcIjo4MCxcIn1cIjo4MSxcIkNMQVNTXCI6ODIsXCJFWFRFTkRTXCI6ODMsXCJPcHRGdW5jRXhpc3RcIjo4NCxcIkFyZ3VtZW50c1wiOjg1LFwiU1VQRVJcIjo4NixcIkRFRkVSXCI6ODcsXCJGVU5DX0VYSVNUXCI6ODgsXCJDQUxMX1NUQVJUXCI6ODksXCJDQUxMX0VORFwiOjkwLFwiQXJnTGlzdFwiOjkxLFwiVEhJU1wiOjkyLFwiQFwiOjkzLFwiW1wiOjk0LFwiXVwiOjk1LFwiUmFuZ2VEb3RzXCI6OTYsXCIuLlwiOjk3LFwiQXJnXCI6OTgsXCJTaW1wbGVBcmdzXCI6OTksXCJUUllcIjoxMDAsXCJDYXRjaFwiOjEwMSxcIkZJTkFMTFlcIjoxMDIsXCJDQVRDSFwiOjEwMyxcIlRIUk9XXCI6MTA0LFwiKFwiOjEwNSxcIilcIjoxMDYsXCJXaGlsZVNvdXJjZVwiOjEwNyxcIldISUxFXCI6MTA4LFwiV0hFTlwiOjEwOSxcIlVOVElMXCI6MTEwLFwiTG9vcFwiOjExMSxcIkxPT1BcIjoxMTIsXCJGb3JCb2R5XCI6MTEzLFwiRk9SXCI6MTE0LFwiRm9yU3RhcnRcIjoxMTUsXCJGb3JTb3VyY2VcIjoxMTYsXCJGb3JWYXJpYWJsZXNcIjoxMTcsXCJPV05cIjoxMTgsXCJGb3JWYWx1ZVwiOjExOSxcIkZPUklOXCI6MTIwLFwiRk9ST0ZcIjoxMjEsXCJCWVwiOjEyMixcIlNXSVRDSFwiOjEyMyxcIldoZW5zXCI6MTI0LFwiRUxTRVwiOjEyNSxcIldoZW5cIjoxMjYsXCJMRUFESU5HX1dIRU5cIjoxMjcsXCJJZkJsb2NrXCI6MTI4LFwiSUZcIjoxMjksXCJQT1NUX0lGXCI6MTMwLFwiVU5BUllcIjoxMzEsXCJVTkFSWV9NQVRIXCI6MTMyLFwiLVwiOjEzMyxcIitcIjoxMzQsXCJZSUVMRFwiOjEzNSxcIkZST01cIjoxMzYsXCItLVwiOjEzNyxcIisrXCI6MTM4LFwiP1wiOjEzOSxcIk1BVEhcIjoxNDAsXCIqKlwiOjE0MSxcIlNISUZUXCI6MTQyLFwiQ09NUEFSRVwiOjE0MyxcIkxPR0lDXCI6MTQ0LFwiUkVMQVRJT05cIjoxNDUsXCJDT01QT1VORF9BU1NJR05cIjoxNDYsXCIkYWNjZXB0XCI6MCxcIiRlbmRcIjoxfSxcbnRlcm1pbmFsc186IHsyOlwiZXJyb3JcIiw2OlwiVEVSTUlOQVRPUlwiLDExOlwiU1RBVEVNRU5UXCIsMTM6XCJBV0FJVFwiLDI4OlwiSU5ERU5UXCIsMjk6XCJPVVRERU5UXCIsMzE6XCJJREVOVElGSUVSXCIsMzM6XCJOVU1CRVJcIiwzNDpcIlNUUklOR1wiLDM2OlwiSlNcIiwzNzpcIlJFR0VYXCIsMzg6XCJERUJVR0dFUlwiLDM5OlwiVU5ERUZJTkVEXCIsNDA6XCJOVUxMXCIsNDE6XCJCT09MXCIsNDM6XCI9XCIsNDY6XCI6XCIsNDg6XCJSRVRVUk5cIiw0OTpcIkhFUkVDT01NRU5UXCIsNTA6XCJQQVJBTV9TVEFSVFwiLDUyOlwiUEFSQU1fRU5EXCIsNTQ6XCItPlwiLDU1OlwiPT5cIiw1NzpcIixcIiw2MDpcIi4uLlwiLDY5OlwiLlwiLDcwOlwiPy5cIiw3MTpcIjo6XCIsNzI6XCI/OjpcIiw3NDpcIklOREVYX1NUQVJUXCIsNzY6XCJJTkRFWF9FTkRcIiw3NzpcIklOREVYX1NPQUtcIiw3OTpcIntcIiw4MTpcIn1cIiw4MjpcIkNMQVNTXCIsODM6XCJFWFRFTkRTXCIsODY6XCJTVVBFUlwiLDg3OlwiREVGRVJcIiw4ODpcIkZVTkNfRVhJU1RcIiw4OTpcIkNBTExfU1RBUlRcIiw5MDpcIkNBTExfRU5EXCIsOTI6XCJUSElTXCIsOTM6XCJAXCIsOTQ6XCJbXCIsOTU6XCJdXCIsOTc6XCIuLlwiLDEwMDpcIlRSWVwiLDEwMjpcIkZJTkFMTFlcIiwxMDM6XCJDQVRDSFwiLDEwNDpcIlRIUk9XXCIsMTA1OlwiKFwiLDEwNjpcIilcIiwxMDg6XCJXSElMRVwiLDEwOTpcIldIRU5cIiwxMTA6XCJVTlRJTFwiLDExMjpcIkxPT1BcIiwxMTQ6XCJGT1JcIiwxMTg6XCJPV05cIiwxMjA6XCJGT1JJTlwiLDEyMTpcIkZPUk9GXCIsMTIyOlwiQllcIiwxMjM6XCJTV0lUQ0hcIiwxMjU6XCJFTFNFXCIsMTI3OlwiTEVBRElOR19XSEVOXCIsMTI5OlwiSUZcIiwxMzA6XCJQT1NUX0lGXCIsMTMxOlwiVU5BUllcIiwxMzI6XCJVTkFSWV9NQVRIXCIsMTMzOlwiLVwiLDEzNDpcIitcIiwxMzU6XCJZSUVMRFwiLDEzNjpcIkZST01cIiwxMzc6XCItLVwiLDEzODpcIisrXCIsMTM5OlwiP1wiLDE0MDpcIk1BVEhcIiwxNDE6XCIqKlwiLDE0MjpcIlNISUZUXCIsMTQzOlwiQ09NUEFSRVwiLDE0NDpcIkxPR0lDXCIsMTQ1OlwiUkVMQVRJT05cIiwxNDY6XCJDT01QT1VORF9BU1NJR05cIn0sXG5wcm9kdWN0aW9uc186IFswLFszLDBdLFszLDFdLFs0LDFdLFs0LDNdLFs0LDJdLFs1LDFdLFs1LDFdLFs4LDFdLFs4LDFdLFs4LDFdLFs4LDFdLFsxMiwyXSxbMTIsMl0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzE0LDJdLFsxNCwzXSxbMzAsMV0sWzMyLDFdLFszMiwxXSxbMzUsMV0sWzM1LDFdLFszNSwxXSxbMzUsMV0sWzM1LDFdLFszNSwxXSxbMzUsMV0sWzE5LDNdLFsxOSw0XSxbMTksNV0sWzQ0LDFdLFs0NCwzXSxbNDQsNV0sWzQ0LDFdLFs0NSwxXSxbNDUsMV0sWzQ1LDFdLFs5LDJdLFs5LDFdLFsxMCwxXSxbMTcsNV0sWzE3LDJdLFs1MywxXSxbNTMsMV0sWzU2LDBdLFs1NiwxXSxbNTEsMF0sWzUxLDFdLFs1MSwzXSxbNTEsNF0sWzUxLDZdLFs1OCwxXSxbNTgsMl0sWzU4LDNdLFs1OCwxXSxbNTksMV0sWzU5LDFdLFs1OSwxXSxbNTksMV0sWzYzLDJdLFs2NCwxXSxbNjQsMl0sWzY0LDJdLFs2NCwxXSxbNDIsMV0sWzQyLDFdLFs0MiwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFs2NSwyXSxbNjUsMl0sWzY1LDJdLFs2NSwyXSxbNjUsMl0sWzY1LDFdLFs2NSwxXSxbNzMsM10sWzczLDJdLFs3NSwxXSxbNzUsMV0sWzYyLDRdLFs4MCwwXSxbODAsMV0sWzgwLDNdLFs4MCw0XSxbODAsNl0sWzI1LDFdLFsyNSwyXSxbMjUsM10sWzI1LDRdLFsyNSwyXSxbMjUsM10sWzI1LDRdLFsyNSw1XSxbMTYsM10sWzE2LDNdLFsxNiwxXSxbMTYsMl0sWzI3LDJdLFs4NCwwXSxbODQsMV0sWzg1LDJdLFs4NSw0XSxbNjgsMV0sWzY4LDFdLFs0NywyXSxbNjEsMl0sWzYxLDRdLFs5NiwxXSxbOTYsMV0sWzY3LDVdLFs3OCwzXSxbNzgsMl0sWzc4LDJdLFs3OCwxXSxbOTEsMV0sWzkxLDNdLFs5MSw0XSxbOTEsNF0sWzkxLDZdLFs5OCwxXSxbOTgsMV0sWzk4LDFdLFs5OSwxXSxbOTksM10sWzIxLDJdLFsyMSwzXSxbMjEsNF0sWzIxLDVdLFsxMDEsM10sWzEwMSwzXSxbMTAxLDJdLFsyNiwyXSxbNjYsM10sWzY2LDVdLFsxMDcsMl0sWzEwNyw0XSxbMTA3LDJdLFsxMDcsNF0sWzIyLDJdLFsyMiwyXSxbMjIsMl0sWzIyLDFdLFsxMTEsMl0sWzExMSwyXSxbMjMsMl0sWzIzLDJdLFsyMywyXSxbMTEzLDJdLFsxMTMsMl0sWzExNSwyXSxbMTE1LDNdLFsxMTksMV0sWzExOSwxXSxbMTE5LDFdLFsxMTksMV0sWzExNywxXSxbMTE3LDNdLFsxMTYsMl0sWzExNiwyXSxbMTE2LDRdLFsxMTYsNF0sWzExNiw0XSxbMTE2LDZdLFsxMTYsNl0sWzI0LDVdLFsyNCw3XSxbMjQsNF0sWzI0LDZdLFsxMjQsMV0sWzEyNCwyXSxbMTI2LDNdLFsxMjYsNF0sWzEyOCwzXSxbMTI4LDVdLFsyMCwxXSxbMjAsM10sWzIwLDNdLFsyMCwzXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsM10sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsNV0sWzE4LDRdLFsxOCwzXV0sXG5wZXJmb3JtQWN0aW9uOiBmdW5jdGlvbiBhbm9ueW1vdXMoeXl0ZXh0LCB5eWxlbmcsIHl5bGluZW5vLCB5eSwgeXlzdGF0ZSAvKiBhY3Rpb25bMV0gKi8sICQkIC8qIHZzdGFjayAqLywgXyQgLyogbHN0YWNrICovXG4vKiovKSB7XG4vKiB0aGlzID09IHl5dmFsICovXG5cbnZhciAkMCA9ICQkLmxlbmd0aCAtIDE7XG5zd2l0Y2ggKHl5c3RhdGUpIHtcbmNhc2UgMTpyZXR1cm4gdGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5CbG9jayk7XG5icmVhaztcbmNhc2UgMjpyZXR1cm4gdGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKHl5LkJsb2NrLndyYXAoWyQkWyQwXV0pKTtcbmJyZWFrO1xuY2FzZSA0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTJdLnB1c2goJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNTp0aGlzLiQgPSAkJFskMC0xXTtcbmJyZWFrO1xuY2FzZSA2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA3OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA4OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA5OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTE6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5Bd2FpdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQXdhaXQoeXkuQmxvY2sud3JhcChbJCRbJDBdXSkpKTtcbmJyZWFrO1xuY2FzZSAxNDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTU6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxNzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTg6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE5OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyMDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjE6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDIyOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyMzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjQ6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDI1OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyNjp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkJsb2NrKTtcbmJyZWFrO1xuY2FzZSAyODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0xXSk7XG5icmVhaztcbmNhc2UgMjk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDMwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzI6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDMzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDM2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVW5kZWZpbmVkKTtcbmJyZWFrO1xuY2FzZSAzNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5Lk51bGwpO1xuYnJlYWs7XG5jYXNlIDM4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuQm9vbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKCQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA0MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKCQkWyQwLTNdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA0MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKCQkWyQwLTRdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDQyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNDM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkFzc2lnbih5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSkobmV3IHl5LlZhbHVlKCQkWyQwLTJdKSksICQkWyQwXSwgJ29iamVjdCcpKTtcbmJyZWFrO1xuY2FzZSA0NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdKShuZXcgeXkuVmFsdWUoJCRbJDAtNF0pKSwgJCRbJDAtMV0sICdvYmplY3QnKSk7XG5icmVhaztcbmNhc2UgNDU6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDQ2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA0Nzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNDg6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDQ5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5SZXR1cm4oJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNTA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5SZXR1cm4pO1xuYnJlYWs7XG5jYXNlIDUxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuQ29tbWVudCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA1Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuQ29kZSgkJFskMC0zXSwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDUzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5Db2RlKFtdLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgNTQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKCdmdW5jJyk7XG5icmVhaztcbmNhc2UgNTU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKCdib3VuZGZ1bmMnKTtcbmJyZWFrO1xuY2FzZSA1Njp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNTc6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDU4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShbXSk7XG5icmVhaztcbmNhc2UgNTk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKFskJFskMF1dKTtcbmJyZWFrO1xuY2FzZSA2MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0yXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNjE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoJCRbJDAtM10uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDYyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTVdLCBfJFskMF0pKCQkWyQwLTVdLmNvbmNhdCgkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDYzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuUGFyYW0oJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNjQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlBhcmFtKCQkWyQwLTFdLCBudWxsLCB0cnVlKSk7XG5icmVhaztcbmNhc2UgNjU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LlBhcmFtKCQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA2Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkV4cGFuc2lvbik7XG5icmVhaztcbmNhc2UgNjc6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDY4OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA2OTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNzA6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDcxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5TcGxhdCgkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDcyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNzM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoJCRbJDAtMV0uYWRkKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDc0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMC0xXSwgW10uY29uY2F0KCQkWyQwXSkpKTtcbmJyZWFrO1xuY2FzZSA3NTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNzY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDc3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNzg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA3OTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgODA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA4MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDgyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgODM6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDg0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5BY2Nlc3MoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgODU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkFjY2VzcygkJFskMF0uc2V0Q3VzdG9tKCkpKTtcbmJyZWFrO1xuY2FzZSA4Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQWNjZXNzKCQkWyQwXSwgJ3NvYWsnKSk7XG5icmVhaztcbmNhc2UgODc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoW3l5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKShuZXcgeXkuQWNjZXNzKG5ldyB5eS5MaXRlcmFsKCdwcm90b3R5cGUnKSkpLCB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0pKG5ldyB5eS5BY2Nlc3MoJCRbJDBdKSldKTtcbmJyZWFrO1xuY2FzZSA4ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShbeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKG5ldyB5eS5BY2Nlc3MobmV3IHl5LkxpdGVyYWwoJ3Byb3RvdHlwZScpLCAnc29haycpKSwgeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdKShuZXcgeXkuQWNjZXNzKCQkWyQwXSkpXSk7XG5icmVhaztcbmNhc2UgODk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5BY2Nlc3MobmV3IHl5LkxpdGVyYWwoJ3Byb3RvdHlwZScpKSk7XG5icmVhaztcbmNhc2UgOTA6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDkxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTFdKTtcbmJyZWFrO1xuY2FzZSA5Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSh5eS5leHRlbmQoJCRbJDBdLCB7XG4gICAgICAgICAgc29hazogdHJ1ZVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgOTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5JbmRleCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA5NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlNsaWNlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDk1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5PYmooJCRbJDAtMl0sICQkWyQwLTNdLmdlbmVyYXRlZCkpO1xuYnJlYWs7XG5jYXNlIDk2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShbXSk7XG5icmVhaztcbmNhc2UgOTc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKFskJFskMF1dKTtcbmJyZWFrO1xuY2FzZSA5ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0yXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgOTk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoJCRbJDAtM10uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC01XSwgXyRbJDBdKSgkJFskMC01XS5jb25jYXQoJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSAxMDE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5DbGFzcyk7XG5icmVhaztcbmNhc2UgMTAyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5DbGFzcyhudWxsLCBudWxsLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkNsYXNzKG51bGwsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MobnVsbCwgJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwNTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTA2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5DbGFzcygkJFskMC0xXSwgbnVsbCwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTA3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5DbGFzcygkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTA4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5DbGFzcygkJFskMC0zXSwgJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQ2FsbCgkJFskMC0yXSwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDExMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQ2FsbCgkJFskMC0yXSwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDExMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkNhbGwoJ3N1cGVyJywgW25ldyB5eS5TcGxhdChuZXcgeXkuTGl0ZXJhbCgnYXJndW1lbnRzJykpXSkpO1xuYnJlYWs7XG5jYXNlIDExMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQ2FsbCgnc3VwZXInLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkRlZmVyKCQkWyQwXSwgeXlsaW5lbm8pKTtcbmJyZWFrO1xuY2FzZSAxMTQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKGZhbHNlKTtcbmJyZWFrO1xuY2FzZSAxMTU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKHRydWUpO1xuYnJlYWs7XG5jYXNlIDExNjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShbXSk7XG5icmVhaztcbmNhc2UgMTE3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKCQkWyQwLTJdKTtcbmJyZWFrO1xuY2FzZSAxMTg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZShuZXcgeXkuTGl0ZXJhbCgndGhpcycpKSk7XG5icmVhaztcbmNhc2UgMTE5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUobmV3IHl5LkxpdGVyYWwoJ3RoaXMnKSkpO1xuYnJlYWs7XG5jYXNlIDEyMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKG5ldyB5eS5MaXRlcmFsKCd0aGlzJykpLCBbeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdKShuZXcgeXkuQWNjZXNzKCQkWyQwXSkpXSwgJ3RoaXMnKSk7XG5icmVhaztcbmNhc2UgMTIxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5BcnIoW10pKTtcbmJyZWFrO1xuY2FzZSAxMjI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LkFycigkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDEyMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoJ2luY2x1c2l2ZScpO1xuYnJlYWs7XG5jYXNlIDEyNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoJ2V4Y2x1c2l2ZScpO1xuYnJlYWs7XG5jYXNlIDEyNTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuUmFuZ2UoJCRbJDAtM10sICQkWyQwLTFdLCAkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDEyNjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuUmFuZ2UoJCRbJDAtMl0sICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxMjc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlJhbmdlKCQkWyQwLTFdLCBudWxsLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMjg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlJhbmdlKG51bGwsICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxMjk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5SYW5nZShudWxsLCBudWxsLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMzA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKFskJFskMF1dKTtcbmJyZWFrO1xuY2FzZSAxMzE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMl0uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEzMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSgkJFskMC0zXS5jb25jYXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTMzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKCQkWyQwLTJdKTtcbmJyZWFrO1xuY2FzZSAxMzQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNV0sIF8kWyQwXSkoJCRbJDAtNV0uY29uY2F0KCQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgMTM1OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxMzY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEzNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkV4cGFuc2lvbik7XG5icmVhaztcbmNhc2UgMTM4OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxMzk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoW10uY29uY2F0KCQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNDA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlRyeSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNDE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LlRyeSgkJFskMC0xXSwgJCRbJDBdWzBdLCAkJFskMF1bMV0pKTtcbmJyZWFrO1xuY2FzZSAxNDI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LlRyeSgkJFskMC0yXSwgbnVsbCwgbnVsbCwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTQzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5UcnkoJCRbJDAtM10sICQkWyQwLTJdWzBdLCAkJFskMC0yXVsxXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTQ0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKFskJFskMC0xXSwgJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgMTQ1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKFt5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkobmV3IHl5LlZhbHVlKCQkWyQwLTFdKSksICQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDE0Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShbbnVsbCwgJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgMTQ3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5UaHJvdygkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNDg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LlBhcmVucygkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDE0OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuUGFyZW5zKCQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgMTUwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5XaGlsZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNTE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LldoaWxlKCQkWyQwLTJdLCB7XG4gICAgICAgICAgZ3VhcmQ6ICQkWyQwXVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgMTUyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5XaGlsZSgkJFskMF0sIHtcbiAgICAgICAgICBpbnZlcnQ6IHRydWVcbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDE1Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuV2hpbGUoJCRbJDAtMl0sIHtcbiAgICAgICAgICBpbnZlcnQ6IHRydWUsXG4gICAgICAgICAgZ3VhcmQ6ICQkWyQwXVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgMTU0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKCQkWyQwLTFdLmFkZEJvZHkoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTU1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKCQkWyQwXS5hZGRCb2R5KHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKSh5eS5CbG9jay53cmFwKFskJFskMC0xXV0pKSkpO1xuYnJlYWs7XG5jYXNlIDE1Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgkJFskMF0uYWRkQm9keSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkoeXkuQmxvY2sud3JhcChbJCRbJDAtMV1dKSkpKTtcbmJyZWFrO1xuY2FzZSAxNTc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKCQkWyQwXSk7XG5icmVhaztcbmNhc2UgMTU4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5XaGlsZSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkobmV3IHl5LkxpdGVyYWwoJ3RydWUnKSkpLmFkZEJvZHkoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTU5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5XaGlsZSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkobmV3IHl5LkxpdGVyYWwoJ3RydWUnKSkpLmFkZEJvZHkoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdKSh5eS5CbG9jay53cmFwKFskJFskMF1dKSkpKTtcbmJyZWFrO1xuY2FzZSAxNjA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkZvcigkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTYxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5Gb3IoJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE2Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuRm9yKCQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxNjM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSlcbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTY0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQkWyQwXS5vd24gPSAkJFskMC0xXS5vd247XG4gICAgICAgICQkWyQwXS5uYW1lID0gJCRbJDAtMV1bMF07XG4gICAgICAgICQkWyQwXS5pbmRleCA9ICQkWyQwLTFdWzFdO1xuICAgICAgICByZXR1cm4gJCRbJDBdO1xuICAgICAgfSgpKSk7XG5icmVhaztcbmNhc2UgMTY1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKCQkWyQwXSk7XG5icmVhaztcbmNhc2UgMTY2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQkWyQwXS5vd24gPSB0cnVlO1xuICAgICAgICByZXR1cm4gJCRbJDBdO1xuICAgICAgfSgpKSk7XG5icmVhaztcbmNhc2UgMTY3OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxNjg6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE2OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE3MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE3MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoWyQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDE3Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShbJCRbJDAtMl0sICQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDE3Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMF1cbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTc0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwXSxcbiAgICAgICAgICBvYmplY3Q6IHRydWVcbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTc1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwLTJdLFxuICAgICAgICAgIGd1YXJkOiAkJFskMF1cbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTc2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwLTJdLFxuICAgICAgICAgIGd1YXJkOiAkJFskMF0sXG4gICAgICAgICAgb2JqZWN0OiB0cnVlXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE3Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMC0yXSxcbiAgICAgICAgICBzdGVwOiAkJFskMF1cbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTc4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTVdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwLTRdLFxuICAgICAgICAgIGd1YXJkOiAkJFskMC0yXSxcbiAgICAgICAgICBzdGVwOiAkJFskMF1cbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTc5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTVdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6ICQkWyQwLTRdLFxuICAgICAgICAgIHN0ZXA6ICQkWyQwLTJdLFxuICAgICAgICAgIGd1YXJkOiAkJFskMF1cbiAgICAgICAgfSk7XG5icmVhaztcbmNhc2UgMTgwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKG5ldyB5eS5Td2l0Y2goJCRbJDAtM10sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTgxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTZdLCBfJFskMF0pKG5ldyB5eS5Td2l0Y2goJCRbJDAtNV0sICQkWyQwLTNdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDE4Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuU3dpdGNoKG51bGwsICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTgzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTVdLCBfJFskMF0pKG5ldyB5eS5Td2l0Y2gobnVsbCwgJCRbJDAtM10sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTg0OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxODU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoJCRbJDAtMV0uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE4Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShbWyQkWyQwLTFdLCAkJFskMF1dXSk7XG5icmVhaztcbmNhc2UgMTg3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKFtbJCRbJDAtMl0sICQkWyQwLTFdXV0pO1xuYnJlYWs7XG5jYXNlIDE4ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuSWYoJCRbJDAtMV0sICQkWyQwXSwge1xuICAgICAgICAgIHR5cGU6ICQkWyQwLTJdXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSAxODk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkoJCRbJDAtNF0uYWRkRWxzZSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuSWYoJCRbJDAtMV0sICQkWyQwXSwge1xuICAgICAgICAgIHR5cGU6ICQkWyQwLTJdXG4gICAgICAgIH0pKSkpO1xuYnJlYWs7XG5jYXNlIDE5MDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTkxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTJdLmFkZEVsc2UoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTkyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5JZigkJFskMF0sIHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdKSh5eS5CbG9jay53cmFwKFskJFskMC0yXV0pKSwge1xuICAgICAgICAgIHR5cGU6ICQkWyQwLTFdLFxuICAgICAgICAgIHN0YXRlbWVudDogdHJ1ZVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgMTkzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5JZigkJFskMF0sIHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdKSh5eS5CbG9jay53cmFwKFskJFskMC0yXV0pKSwge1xuICAgICAgICAgIHR5cGU6ICQkWyQwLTFdLFxuICAgICAgICAgIHN0YXRlbWVudDogdHJ1ZVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgMTk0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTk1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTk2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgnLScsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE5Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJysnLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxOTg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxOTk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTJdLmNvbmNhdCgkJFskMC0xXSksICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJy0tJywgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjAyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgnKysnLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCctLScsICQkWyQwLTFdLCBudWxsLCB0cnVlKSk7XG5icmVhaztcbmNhc2UgMjA0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgnKysnLCAkJFskMC0xXSwgbnVsbCwgdHJ1ZSkpO1xuYnJlYWs7XG5jYXNlIDIwNTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuRXhpc3RlbmNlKCQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMjA2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgnKycsICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCctJywgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjEwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIxMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjEzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkJFskMC0xXS5jaGFyQXQoMCkgPT09ICchJykge1xuICAgICAgICAgIHJldHVybiBuZXcgeXkuT3AoJCRbJDAtMV0uc2xpY2UoMSksICQkWyQwLTJdLCAkJFskMF0pLmludmVydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwLTJdLCAkJFskMF0pO1xuICAgICAgICB9XG4gICAgICB9KCkpKTtcbmJyZWFrO1xuY2FzZSAyMTQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkFzc2lnbigkJFskMC0yXSwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDIxNTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuQXNzaWduKCQkWyQwLTRdLCAkJFskMC0xXSwgJCRbJDAtM10pKTtcbmJyZWFrO1xuY2FzZSAyMTY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LkFzc2lnbigkJFskMC0zXSwgJCRbJDBdLCAkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDIxNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuRXh0ZW5kcygkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbn1cbn0sXG50YWJsZTogW3sxOlsyLDFdLDM6MSw0OjIsNTozLDc6NCw4OjUsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbM119LHsxOlsyLDJdLDY6WzEsNzhdfSx7MTpbMiwzXSw2OlsyLDNdLDI5OlsyLDNdLDEwNjpbMiwzXX0sezE6WzIsNl0sNjpbMiw2XSwyOTpbMiw2XSwxMDY6WzIsNl0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsN10sNjpbMiw3XSwyOTpbMiw3XSwxMDY6WzIsN10sMTA3OjkyLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTMsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDkxXX0sezE6WzIsMTRdLDY6WzIsMTRdLDI4OlsyLDE0XSwyOTpbMiwxNF0sNTI6WzIsMTRdLDU3OlsyLDE0XSw2MDpbMiwxNF0sNjU6OTUsNjk6WzEsOTddLDcwOlsxLDk4XSw3MTpbMSw5OV0sNzI6WzEsMTAwXSw3MzoxMDEsNzQ6WzEsMTAyXSw3NjpbMiwxNF0sNzc6WzEsMTAzXSw4MTpbMiwxNF0sODQ6OTQsODg6WzEsOTZdLDg5OlsyLDExNF0sOTA6WzIsMTRdLDk1OlsyLDE0XSw5NzpbMiwxNF0sMTA2OlsyLDE0XSwxMDg6WzIsMTRdLDEwOTpbMiwxNF0sMTEwOlsyLDE0XSwxMTQ6WzIsMTRdLDEyMjpbMiwxNF0sMTMwOlsyLDE0XSwxMzM6WzIsMTRdLDEzNDpbMiwxNF0sMTM5OlsyLDE0XSwxNDA6WzIsMTRdLDE0MTpbMiwxNF0sMTQyOlsyLDE0XSwxNDM6WzIsMTRdLDE0NDpbMiwxNF0sMTQ1OlsyLDE0XX0sezE6WzIsMTVdLDY6WzIsMTVdLDI4OlsyLDE1XSwyOTpbMiwxNV0sNTI6WzIsMTVdLDU3OlsyLDE1XSw2MDpbMiwxNV0sNjU6MTA1LDY5OlsxLDk3XSw3MDpbMSw5OF0sNzE6WzEsOTldLDcyOlsxLDEwMF0sNzM6MTAxLDc0OlsxLDEwMl0sNzY6WzIsMTVdLDc3OlsxLDEwM10sODE6WzIsMTVdLDg0OjEwNCw4ODpbMSw5Nl0sODk6WzIsMTE0XSw5MDpbMiwxNV0sOTU6WzIsMTVdLDk3OlsyLDE1XSwxMDY6WzIsMTVdLDEwODpbMiwxNV0sMTA5OlsyLDE1XSwxMTA6WzIsMTVdLDExNDpbMiwxNV0sMTIyOlsyLDE1XSwxMzA6WzIsMTVdLDEzMzpbMiwxNV0sMTM0OlsyLDE1XSwxMzk6WzIsMTVdLDE0MDpbMiwxNV0sMTQxOlsyLDE1XSwxNDI6WzIsMTVdLDE0MzpbMiwxNV0sMTQ0OlsyLDE1XSwxNDU6WzIsMTVdfSx7MTpbMiwxNl0sNjpbMiwxNl0sMjg6WzIsMTZdLDI5OlsyLDE2XSw1MjpbMiwxNl0sNTc6WzIsMTZdLDYwOlsyLDE2XSw3NjpbMiwxNl0sODE6WzIsMTZdLDkwOlsyLDE2XSw5NTpbMiwxNl0sOTc6WzIsMTZdLDEwNjpbMiwxNl0sMTA4OlsyLDE2XSwxMDk6WzIsMTZdLDExMDpbMiwxNl0sMTE0OlsyLDE2XSwxMjI6WzIsMTZdLDEzMDpbMiwxNl0sMTMzOlsyLDE2XSwxMzQ6WzIsMTZdLDEzOTpbMiwxNl0sMTQwOlsyLDE2XSwxNDE6WzIsMTZdLDE0MjpbMiwxNl0sMTQzOlsyLDE2XSwxNDQ6WzIsMTZdLDE0NTpbMiwxNl19LHsxOlsyLDE3XSw2OlsyLDE3XSwyODpbMiwxN10sMjk6WzIsMTddLDUyOlsyLDE3XSw1NzpbMiwxN10sNjA6WzIsMTddLDc2OlsyLDE3XSw4MTpbMiwxN10sOTA6WzIsMTddLDk1OlsyLDE3XSw5NzpbMiwxN10sMTA2OlsyLDE3XSwxMDg6WzIsMTddLDEwOTpbMiwxN10sMTEwOlsyLDE3XSwxMTQ6WzIsMTddLDEyMjpbMiwxN10sMTMwOlsyLDE3XSwxMzM6WzIsMTddLDEzNDpbMiwxN10sMTM5OlsyLDE3XSwxNDA6WzIsMTddLDE0MTpbMiwxN10sMTQyOlsyLDE3XSwxNDM6WzIsMTddLDE0NDpbMiwxN10sMTQ1OlsyLDE3XX0sezE6WzIsMThdLDY6WzIsMThdLDI4OlsyLDE4XSwyOTpbMiwxOF0sNTI6WzIsMThdLDU3OlsyLDE4XSw2MDpbMiwxOF0sNzY6WzIsMThdLDgxOlsyLDE4XSw5MDpbMiwxOF0sOTU6WzIsMThdLDk3OlsyLDE4XSwxMDY6WzIsMThdLDEwODpbMiwxOF0sMTA5OlsyLDE4XSwxMTA6WzIsMThdLDExNDpbMiwxOF0sMTIyOlsyLDE4XSwxMzA6WzIsMThdLDEzMzpbMiwxOF0sMTM0OlsyLDE4XSwxMzk6WzIsMThdLDE0MDpbMiwxOF0sMTQxOlsyLDE4XSwxNDI6WzIsMThdLDE0MzpbMiwxOF0sMTQ0OlsyLDE4XSwxNDU6WzIsMThdfSx7MTpbMiwxOV0sNjpbMiwxOV0sMjg6WzIsMTldLDI5OlsyLDE5XSw1MjpbMiwxOV0sNTc6WzIsMTldLDYwOlsyLDE5XSw3NjpbMiwxOV0sODE6WzIsMTldLDkwOlsyLDE5XSw5NTpbMiwxOV0sOTc6WzIsMTldLDEwNjpbMiwxOV0sMTA4OlsyLDE5XSwxMDk6WzIsMTldLDExMDpbMiwxOV0sMTE0OlsyLDE5XSwxMjI6WzIsMTldLDEzMDpbMiwxOV0sMTMzOlsyLDE5XSwxMzQ6WzIsMTldLDEzOTpbMiwxOV0sMTQwOlsyLDE5XSwxNDE6WzIsMTldLDE0MjpbMiwxOV0sMTQzOlsyLDE5XSwxNDQ6WzIsMTldLDE0NTpbMiwxOV19LHsxOlsyLDIwXSw2OlsyLDIwXSwyODpbMiwyMF0sMjk6WzIsMjBdLDUyOlsyLDIwXSw1NzpbMiwyMF0sNjA6WzIsMjBdLDc2OlsyLDIwXSw4MTpbMiwyMF0sOTA6WzIsMjBdLDk1OlsyLDIwXSw5NzpbMiwyMF0sMTA2OlsyLDIwXSwxMDg6WzIsMjBdLDEwOTpbMiwyMF0sMTEwOlsyLDIwXSwxMTQ6WzIsMjBdLDEyMjpbMiwyMF0sMTMwOlsyLDIwXSwxMzM6WzIsMjBdLDEzNDpbMiwyMF0sMTM5OlsyLDIwXSwxNDA6WzIsMjBdLDE0MTpbMiwyMF0sMTQyOlsyLDIwXSwxNDM6WzIsMjBdLDE0NDpbMiwyMF0sMTQ1OlsyLDIwXX0sezE6WzIsMjFdLDY6WzIsMjFdLDI4OlsyLDIxXSwyOTpbMiwyMV0sNTI6WzIsMjFdLDU3OlsyLDIxXSw2MDpbMiwyMV0sNzY6WzIsMjFdLDgxOlsyLDIxXSw5MDpbMiwyMV0sOTU6WzIsMjFdLDk3OlsyLDIxXSwxMDY6WzIsMjFdLDEwODpbMiwyMV0sMTA5OlsyLDIxXSwxMTA6WzIsMjFdLDExNDpbMiwyMV0sMTIyOlsyLDIxXSwxMzA6WzIsMjFdLDEzMzpbMiwyMV0sMTM0OlsyLDIxXSwxMzk6WzIsMjFdLDE0MDpbMiwyMV0sMTQxOlsyLDIxXSwxNDI6WzIsMjFdLDE0MzpbMiwyMV0sMTQ0OlsyLDIxXSwxNDU6WzIsMjFdfSx7MTpbMiwyMl0sNjpbMiwyMl0sMjg6WzIsMjJdLDI5OlsyLDIyXSw1MjpbMiwyMl0sNTc6WzIsMjJdLDYwOlsyLDIyXSw3NjpbMiwyMl0sODE6WzIsMjJdLDkwOlsyLDIyXSw5NTpbMiwyMl0sOTc6WzIsMjJdLDEwNjpbMiwyMl0sMTA4OlsyLDIyXSwxMDk6WzIsMjJdLDExMDpbMiwyMl0sMTE0OlsyLDIyXSwxMjI6WzIsMjJdLDEzMDpbMiwyMl0sMTMzOlsyLDIyXSwxMzQ6WzIsMjJdLDEzOTpbMiwyMl0sMTQwOlsyLDIyXSwxNDE6WzIsMjJdLDE0MjpbMiwyMl0sMTQzOlsyLDIyXSwxNDQ6WzIsMjJdLDE0NTpbMiwyMl19LHsxOlsyLDIzXSw2OlsyLDIzXSwyODpbMiwyM10sMjk6WzIsMjNdLDUyOlsyLDIzXSw1NzpbMiwyM10sNjA6WzIsMjNdLDc2OlsyLDIzXSw4MTpbMiwyM10sOTA6WzIsMjNdLDk1OlsyLDIzXSw5NzpbMiwyM10sMTA2OlsyLDIzXSwxMDg6WzIsMjNdLDEwOTpbMiwyM10sMTEwOlsyLDIzXSwxMTQ6WzIsMjNdLDEyMjpbMiwyM10sMTMwOlsyLDIzXSwxMzM6WzIsMjNdLDEzNDpbMiwyM10sMTM5OlsyLDIzXSwxNDA6WzIsMjNdLDE0MTpbMiwyM10sMTQyOlsyLDIzXSwxNDM6WzIsMjNdLDE0NDpbMiwyM10sMTQ1OlsyLDIzXX0sezE6WzIsMjRdLDY6WzIsMjRdLDI4OlsyLDI0XSwyOTpbMiwyNF0sNTI6WzIsMjRdLDU3OlsyLDI0XSw2MDpbMiwyNF0sNzY6WzIsMjRdLDgxOlsyLDI0XSw5MDpbMiwyNF0sOTU6WzIsMjRdLDk3OlsyLDI0XSwxMDY6WzIsMjRdLDEwODpbMiwyNF0sMTA5OlsyLDI0XSwxMTA6WzIsMjRdLDExNDpbMiwyNF0sMTIyOlsyLDI0XSwxMzA6WzIsMjRdLDEzMzpbMiwyNF0sMTM0OlsyLDI0XSwxMzk6WzIsMjRdLDE0MDpbMiwyNF0sMTQxOlsyLDI0XSwxNDI6WzIsMjRdLDE0MzpbMiwyNF0sMTQ0OlsyLDI0XSwxNDU6WzIsMjRdfSx7MTpbMiwyNV0sNjpbMiwyNV0sMjg6WzIsMjVdLDI5OlsyLDI1XSw1MjpbMiwyNV0sNTc6WzIsMjVdLDYwOlsyLDI1XSw3NjpbMiwyNV0sODE6WzIsMjVdLDkwOlsyLDI1XSw5NTpbMiwyNV0sOTc6WzIsMjVdLDEwNjpbMiwyNV0sMTA4OlsyLDI1XSwxMDk6WzIsMjVdLDExMDpbMiwyNV0sMTE0OlsyLDI1XSwxMjI6WzIsMjVdLDEzMDpbMiwyNV0sMTMzOlsyLDI1XSwxMzQ6WzIsMjVdLDEzOTpbMiwyNV0sMTQwOlsyLDI1XSwxNDE6WzIsMjVdLDE0MjpbMiwyNV0sMTQzOlsyLDI1XSwxNDQ6WzIsMjVdLDE0NTpbMiwyNV19LHsxOlsyLDI2XSw2OlsyLDI2XSwyODpbMiwyNl0sMjk6WzIsMjZdLDUyOlsyLDI2XSw1NzpbMiwyNl0sNjA6WzIsMjZdLDc2OlsyLDI2XSw4MTpbMiwyNl0sOTA6WzIsMjZdLDk1OlsyLDI2XSw5NzpbMiwyNl0sMTA2OlsyLDI2XSwxMDg6WzIsMjZdLDEwOTpbMiwyNl0sMTEwOlsyLDI2XSwxMTQ6WzIsMjZdLDEyMjpbMiwyNl0sMTMwOlsyLDI2XSwxMzM6WzIsMjZdLDEzNDpbMiwyNl0sMTM5OlsyLDI2XSwxNDA6WzIsMjZdLDE0MTpbMiwyNl0sMTQyOlsyLDI2XSwxNDM6WzIsMjZdLDE0NDpbMiwyNl0sMTQ1OlsyLDI2XX0sezE6WzIsOF0sNjpbMiw4XSwyODpbMiw4XSwyOTpbMiw4XSw1MjpbMiw4XSw1NzpbMiw4XSw2MDpbMiw4XSw3NjpbMiw4XSw4MTpbMiw4XSw5MDpbMiw4XSw5NTpbMiw4XSw5NzpbMiw4XSwxMDY6WzIsOF0sMTA4OlsyLDhdLDEwOTpbMiw4XSwxMTA6WzIsOF0sMTE0OlsyLDhdLDEyMjpbMiw4XSwxMzA6WzIsOF0sMTMzOlsyLDhdLDEzNDpbMiw4XSwxMzk6WzIsOF0sMTQwOlsyLDhdLDE0MTpbMiw4XSwxNDI6WzIsOF0sMTQzOlsyLDhdLDE0NDpbMiw4XSwxNDU6WzIsOF19LHsxOlsyLDldLDY6WzIsOV0sMjg6WzIsOV0sMjk6WzIsOV0sNTI6WzIsOV0sNTc6WzIsOV0sNjA6WzIsOV0sNzY6WzIsOV0sODE6WzIsOV0sOTA6WzIsOV0sOTU6WzIsOV0sOTc6WzIsOV0sMTA2OlsyLDldLDEwODpbMiw5XSwxMDk6WzIsOV0sMTEwOlsyLDldLDExNDpbMiw5XSwxMjI6WzIsOV0sMTMwOlsyLDldLDEzMzpbMiw5XSwxMzQ6WzIsOV0sMTM5OlsyLDldLDE0MDpbMiw5XSwxNDE6WzIsOV0sMTQyOlsyLDldLDE0MzpbMiw5XSwxNDQ6WzIsOV0sMTQ1OlsyLDldfSx7MTpbMiwxMF0sNjpbMiwxMF0sMjg6WzIsMTBdLDI5OlsyLDEwXSw1MjpbMiwxMF0sNTc6WzIsMTBdLDYwOlsyLDEwXSw3NjpbMiwxMF0sODE6WzIsMTBdLDkwOlsyLDEwXSw5NTpbMiwxMF0sOTc6WzIsMTBdLDEwNjpbMiwxMF0sMTA4OlsyLDEwXSwxMDk6WzIsMTBdLDExMDpbMiwxMF0sMTE0OlsyLDEwXSwxMjI6WzIsMTBdLDEzMDpbMiwxMF0sMTMzOlsyLDEwXSwxMzQ6WzIsMTBdLDEzOTpbMiwxMF0sMTQwOlsyLDEwXSwxNDE6WzIsMTBdLDE0MjpbMiwxMF0sMTQzOlsyLDEwXSwxNDQ6WzIsMTBdLDE0NTpbMiwxMF19LHsxOlsyLDExXSw2OlsyLDExXSwyODpbMiwxMV0sMjk6WzIsMTFdLDUyOlsyLDExXSw1NzpbMiwxMV0sNjA6WzIsMTFdLDc2OlsyLDExXSw4MTpbMiwxMV0sOTA6WzIsMTFdLDk1OlsyLDExXSw5NzpbMiwxMV0sMTA2OlsyLDExXSwxMDg6WzIsMTFdLDEwOTpbMiwxMV0sMTEwOlsyLDExXSwxMTQ6WzIsMTFdLDEyMjpbMiwxMV0sMTMwOlsyLDExXSwxMzM6WzIsMTFdLDEzNDpbMiwxMV0sMTM5OlsyLDExXSwxNDA6WzIsMTFdLDE0MTpbMiwxMV0sMTQyOlsyLDExXSwxNDM6WzIsMTFdLDE0NDpbMiwxMV0sMTQ1OlsyLDExXX0sezE6WzIsNzldLDY6WzIsNzldLDI4OlsyLDc5XSwyOTpbMiw3OV0sNDM6WzEsMTA2XSw1MjpbMiw3OV0sNTc6WzIsNzldLDYwOlsyLDc5XSw2OTpbMiw3OV0sNzA6WzIsNzldLDcxOlsyLDc5XSw3MjpbMiw3OV0sNzQ6WzIsNzldLDc2OlsyLDc5XSw3NzpbMiw3OV0sODE6WzIsNzldLDg4OlsyLDc5XSw4OTpbMiw3OV0sOTA6WzIsNzldLDk1OlsyLDc5XSw5NzpbMiw3OV0sMTA2OlsyLDc5XSwxMDg6WzIsNzldLDEwOTpbMiw3OV0sMTEwOlsyLDc5XSwxMTQ6WzIsNzldLDEyMjpbMiw3OV0sMTMwOlsyLDc5XSwxMzM6WzIsNzldLDEzNDpbMiw3OV0sMTM5OlsyLDc5XSwxNDA6WzIsNzldLDE0MTpbMiw3OV0sMTQyOlsyLDc5XSwxNDM6WzIsNzldLDE0NDpbMiw3OV0sMTQ1OlsyLDc5XX0sezE6WzIsODBdLDY6WzIsODBdLDI4OlsyLDgwXSwyOTpbMiw4MF0sNTI6WzIsODBdLDU3OlsyLDgwXSw2MDpbMiw4MF0sNjk6WzIsODBdLDcwOlsyLDgwXSw3MTpbMiw4MF0sNzI6WzIsODBdLDc0OlsyLDgwXSw3NjpbMiw4MF0sNzc6WzIsODBdLDgxOlsyLDgwXSw4ODpbMiw4MF0sODk6WzIsODBdLDkwOlsyLDgwXSw5NTpbMiw4MF0sOTc6WzIsODBdLDEwNjpbMiw4MF0sMTA4OlsyLDgwXSwxMDk6WzIsODBdLDExMDpbMiw4MF0sMTE0OlsyLDgwXSwxMjI6WzIsODBdLDEzMDpbMiw4MF0sMTMzOlsyLDgwXSwxMzQ6WzIsODBdLDEzOTpbMiw4MF0sMTQwOlsyLDgwXSwxNDE6WzIsODBdLDE0MjpbMiw4MF0sMTQzOlsyLDgwXSwxNDQ6WzIsODBdLDE0NTpbMiw4MF19LHsxOlsyLDgxXSw2OlsyLDgxXSwyODpbMiw4MV0sMjk6WzIsODFdLDUyOlsyLDgxXSw1NzpbMiw4MV0sNjA6WzIsODFdLDY5OlsyLDgxXSw3MDpbMiw4MV0sNzE6WzIsODFdLDcyOlsyLDgxXSw3NDpbMiw4MV0sNzY6WzIsODFdLDc3OlsyLDgxXSw4MTpbMiw4MV0sODg6WzIsODFdLDg5OlsyLDgxXSw5MDpbMiw4MV0sOTU6WzIsODFdLDk3OlsyLDgxXSwxMDY6WzIsODFdLDEwODpbMiw4MV0sMTA5OlsyLDgxXSwxMTA6WzIsODFdLDExNDpbMiw4MV0sMTIyOlsyLDgxXSwxMzA6WzIsODFdLDEzMzpbMiw4MV0sMTM0OlsyLDgxXSwxMzk6WzIsODFdLDE0MDpbMiw4MV0sMTQxOlsyLDgxXSwxNDI6WzIsODFdLDE0MzpbMiw4MV0sMTQ0OlsyLDgxXSwxNDU6WzIsODFdfSx7MTpbMiw4Ml0sNjpbMiw4Ml0sMjg6WzIsODJdLDI5OlsyLDgyXSw1MjpbMiw4Ml0sNTc6WzIsODJdLDYwOlsyLDgyXSw2OTpbMiw4Ml0sNzA6WzIsODJdLDcxOlsyLDgyXSw3MjpbMiw4Ml0sNzQ6WzIsODJdLDc2OlsyLDgyXSw3NzpbMiw4Ml0sODE6WzIsODJdLDg4OlsyLDgyXSw4OTpbMiw4Ml0sOTA6WzIsODJdLDk1OlsyLDgyXSw5NzpbMiw4Ml0sMTA2OlsyLDgyXSwxMDg6WzIsODJdLDEwOTpbMiw4Ml0sMTEwOlsyLDgyXSwxMTQ6WzIsODJdLDEyMjpbMiw4Ml0sMTMwOlsyLDgyXSwxMzM6WzIsODJdLDEzNDpbMiw4Ml0sMTM5OlsyLDgyXSwxNDA6WzIsODJdLDE0MTpbMiw4Ml0sMTQyOlsyLDgyXSwxNDM6WzIsODJdLDE0NDpbMiw4Ml0sMTQ1OlsyLDgyXX0sezE6WzIsODNdLDY6WzIsODNdLDI4OlsyLDgzXSwyOTpbMiw4M10sNTI6WzIsODNdLDU3OlsyLDgzXSw2MDpbMiw4M10sNjk6WzIsODNdLDcwOlsyLDgzXSw3MTpbMiw4M10sNzI6WzIsODNdLDc0OlsyLDgzXSw3NjpbMiw4M10sNzc6WzIsODNdLDgxOlsyLDgzXSw4ODpbMiw4M10sODk6WzIsODNdLDkwOlsyLDgzXSw5NTpbMiw4M10sOTc6WzIsODNdLDEwNjpbMiw4M10sMTA4OlsyLDgzXSwxMDk6WzIsODNdLDExMDpbMiw4M10sMTE0OlsyLDgzXSwxMjI6WzIsODNdLDEzMDpbMiw4M10sMTMzOlsyLDgzXSwxMzQ6WzIsODNdLDEzOTpbMiw4M10sMTQwOlsyLDgzXSwxNDE6WzIsODNdLDE0MjpbMiw4M10sMTQzOlsyLDgzXSwxNDQ6WzIsODNdLDE0NTpbMiw4M119LHsxOlsyLDExMV0sNjpbMiwxMTFdLDI4OlsyLDExMV0sMjk6WzIsMTExXSw1MjpbMiwxMTFdLDU3OlsyLDExMV0sNjA6WzIsMTExXSw2OTpbMiwxMTFdLDcwOlsyLDExMV0sNzE6WzIsMTExXSw3MjpbMiwxMTFdLDc0OlsyLDExMV0sNzY6WzIsMTExXSw3NzpbMiwxMTFdLDgxOlsyLDExMV0sODU6MTA3LDg4OlsyLDExMV0sODk6WzEsMTA4XSw5MDpbMiwxMTFdLDk1OlsyLDExMV0sOTc6WzIsMTExXSwxMDY6WzIsMTExXSwxMDg6WzIsMTExXSwxMDk6WzIsMTExXSwxMTA6WzIsMTExXSwxMTQ6WzIsMTExXSwxMjI6WzIsMTExXSwxMzA6WzIsMTExXSwxMzM6WzIsMTExXSwxMzQ6WzIsMTExXSwxMzk6WzIsMTExXSwxNDA6WzIsMTExXSwxNDE6WzIsMTExXSwxNDI6WzIsMTExXSwxNDM6WzIsMTExXSwxNDQ6WzIsMTExXSwxNDU6WzIsMTExXX0sezY6WzIsNThdLDI4OlsyLDU4XSwzMDoxMTMsMzE6WzEsNzddLDQ3OjExNCw1MToxMDksNTI6WzIsNThdLDU3OlsyLDU4XSw1ODoxMTAsNTk6MTExLDYwOlsxLDExMl0sNjE6MTE1LDYyOjExNiw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSwxMThdfSx7MTQ6MTE5LDI4OlsxLDEyMF19LHs3OjEyMSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjEyMyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjEyNCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjEyNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjEyNyw4OjEyNiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzY6WzEsMTI4XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxNToxMzAsMTY6MTMxLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjEzMiw0Nzo2Nyw2MTo1MSw2Mjo1Miw2NDoxMjksNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDg2OlsxLDI4XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDU6WzEsNjBdfSx7MTU6MTMwLDE2OjEzMSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoxMzIsNDc6NjcsNjE6NTEsNjI6NTIsNjQ6MTMzLDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4NjpbMSwyOF0sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTA1OlsxLDYwXX0sezE6WzIsNzZdLDY6WzIsNzZdLDI4OlsyLDc2XSwyOTpbMiw3Nl0sNDM6WzIsNzZdLDUyOlsyLDc2XSw1NzpbMiw3Nl0sNjA6WzIsNzZdLDY5OlsyLDc2XSw3MDpbMiw3Nl0sNzE6WzIsNzZdLDcyOlsyLDc2XSw3NDpbMiw3Nl0sNzY6WzIsNzZdLDc3OlsyLDc2XSw4MTpbMiw3Nl0sODM6WzEsMTM3XSw4ODpbMiw3Nl0sODk6WzIsNzZdLDkwOlsyLDc2XSw5NTpbMiw3Nl0sOTc6WzIsNzZdLDEwNjpbMiw3Nl0sMTA4OlsyLDc2XSwxMDk6WzIsNzZdLDExMDpbMiw3Nl0sMTE0OlsyLDc2XSwxMjI6WzIsNzZdLDEzMDpbMiw3Nl0sMTMzOlsyLDc2XSwxMzQ6WzIsNzZdLDEzNzpbMSwxMzRdLDEzODpbMSwxMzVdLDEzOTpbMiw3Nl0sMTQwOlsyLDc2XSwxNDE6WzIsNzZdLDE0MjpbMiw3Nl0sMTQzOlsyLDc2XSwxNDQ6WzIsNzZdLDE0NTpbMiw3Nl0sMTQ2OlsxLDEzNl19LHsxOlsyLDE5MF0sNjpbMiwxOTBdLDI4OlsyLDE5MF0sMjk6WzIsMTkwXSw1MjpbMiwxOTBdLDU3OlsyLDE5MF0sNjA6WzIsMTkwXSw3NjpbMiwxOTBdLDgxOlsyLDE5MF0sOTA6WzIsMTkwXSw5NTpbMiwxOTBdLDk3OlsyLDE5MF0sMTA2OlsyLDE5MF0sMTA4OlsyLDE5MF0sMTA5OlsyLDE5MF0sMTEwOlsyLDE5MF0sMTE0OlsyLDE5MF0sMTIyOlsyLDE5MF0sMTI1OlsxLDEzOF0sMTMwOlsyLDE5MF0sMTMzOlsyLDE5MF0sMTM0OlsyLDE5MF0sMTM5OlsyLDE5MF0sMTQwOlsyLDE5MF0sMTQxOlsyLDE5MF0sMTQyOlsyLDE5MF0sMTQzOlsyLDE5MF0sMTQ0OlsyLDE5MF0sMTQ1OlsyLDE5MF19LHsxNDoxMzksMjg6WzEsMTIwXX0sezE0OjE0MCwyODpbMSwxMjBdfSx7MTpbMiwxNTddLDY6WzIsMTU3XSwyODpbMiwxNTddLDI5OlsyLDE1N10sNTI6WzIsMTU3XSw1NzpbMiwxNTddLDYwOlsyLDE1N10sNzY6WzIsMTU3XSw4MTpbMiwxNTddLDkwOlsyLDE1N10sOTU6WzIsMTU3XSw5NzpbMiwxNTddLDEwNjpbMiwxNTddLDEwODpbMiwxNTddLDEwOTpbMiwxNTddLDExMDpbMiwxNTddLDExNDpbMiwxNTddLDEyMjpbMiwxNTddLDEzMDpbMiwxNTddLDEzMzpbMiwxNTddLDEzNDpbMiwxNTddLDEzOTpbMiwxNTddLDE0MDpbMiwxNTddLDE0MTpbMiwxNTddLDE0MjpbMiwxNTddLDE0MzpbMiwxNTddLDE0NDpbMiwxNTddLDE0NTpbMiwxNTddfSx7MTQ6MTQxLDI4OlsxLDEyMF19LHs3OjE0Miw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNDNdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTAxXSw2OlsyLDEwMV0sMTQ6MTQ0LDE1OjEzMCwxNjoxMzEsMjg6WzEsMTIwXSwyOTpbMiwxMDFdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjEzMiw0Nzo2Nyw1MjpbMiwxMDFdLDU3OlsyLDEwMV0sNjA6WzIsMTAxXSw2MTo1MSw2Mjo1Miw2NDoxNDYsNjY6MjUsNjc6MjYsNjg6MjcsNzY6WzIsMTAxXSw3OTpbMSw3NF0sODE6WzIsMTAxXSw4MzpbMSwxNDVdLDg2OlsxLDI4XSw5MDpbMiwxMDFdLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk1OlsyLDEwMV0sOTc6WzIsMTAxXSwxMDU6WzEsNjBdLDEwNjpbMiwxMDFdLDEwODpbMiwxMDFdLDEwOTpbMiwxMDFdLDExMDpbMiwxMDFdLDExNDpbMiwxMDFdLDEyMjpbMiwxMDFdLDEzMDpbMiwxMDFdLDEzMzpbMiwxMDFdLDEzNDpbMiwxMDFdLDEzOTpbMiwxMDFdLDE0MDpbMiwxMDFdLDE0MTpbMiwxMDFdLDE0MjpbMiwxMDFdLDE0MzpbMiwxMDFdLDE0NDpbMiwxMDFdLDE0NTpbMiwxMDFdfSx7NzoxNDcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7ODU6MTQ4LDg5OlsxLDEwOF19LHsxOlsyLDUwXSw2OlsyLDUwXSw3OjE0OSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMiw1MF0sMjk6WzIsNTBdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUyOlsyLDUwXSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDU3OlsyLDUwXSw2MDpbMiw1MF0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzY6WzIsNTBdLDc5OlsxLDc0XSw4MTpbMiw1MF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTA6WzIsNTBdLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk1OlsyLDUwXSw5NzpbMiw1MF0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA2OlsyLDUwXSwxMDc6NDEsMTA4OlsyLDUwXSwxMDk6WzIsNTBdLDExMDpbMiw1MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMiw1MF0sMTE1OjczLDEyMjpbMiw1MF0sMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzA6WzIsNTBdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN10sMTM5OlsyLDUwXSwxNDA6WzIsNTBdLDE0MTpbMiw1MF0sMTQyOlsyLDUwXSwxNDM6WzIsNTBdLDE0NDpbMiw1MF0sMTQ1OlsyLDUwXX0sezE6WzIsNTFdLDY6WzIsNTFdLDI4OlsyLDUxXSwyOTpbMiw1MV0sNTI6WzIsNTFdLDU3OlsyLDUxXSw2MDpbMiw1MV0sNzY6WzIsNTFdLDgxOlsyLDUxXSw5MDpbMiw1MV0sOTU6WzIsNTFdLDk3OlsyLDUxXSwxMDY6WzIsNTFdLDEwODpbMiw1MV0sMTA5OlsyLDUxXSwxMTA6WzIsNTFdLDExNDpbMiw1MV0sMTIyOlsyLDUxXSwxMzA6WzIsNTFdLDEzMzpbMiw1MV0sMTM0OlsyLDUxXSwxMzk6WzIsNTFdLDE0MDpbMiw1MV0sMTQxOlsyLDUxXSwxNDI6WzIsNTFdLDE0MzpbMiw1MV0sMTQ0OlsyLDUxXSwxNDU6WzIsNTFdfSx7NzoxNTEsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE0OjE1MCwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDEyMF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiw3N10sNjpbMiw3N10sMjg6WzIsNzddLDI5OlsyLDc3XSw0MzpbMiw3N10sNTI6WzIsNzddLDU3OlsyLDc3XSw2MDpbMiw3N10sNjk6WzIsNzddLDcwOlsyLDc3XSw3MTpbMiw3N10sNzI6WzIsNzddLDc0OlsyLDc3XSw3NjpbMiw3N10sNzc6WzIsNzddLDgxOlsyLDc3XSw4ODpbMiw3N10sODk6WzIsNzddLDkwOlsyLDc3XSw5NTpbMiw3N10sOTc6WzIsNzddLDEwNjpbMiw3N10sMTA4OlsyLDc3XSwxMDk6WzIsNzddLDExMDpbMiw3N10sMTE0OlsyLDc3XSwxMjI6WzIsNzddLDEzMDpbMiw3N10sMTMzOlsyLDc3XSwxMzQ6WzIsNzddLDEzOTpbMiw3N10sMTQwOlsyLDc3XSwxNDE6WzIsNzddLDE0MjpbMiw3N10sMTQzOlsyLDc3XSwxNDQ6WzIsNzddLDE0NTpbMiw3N119LHsxOlsyLDc4XSw2OlsyLDc4XSwyODpbMiw3OF0sMjk6WzIsNzhdLDQzOlsyLDc4XSw1MjpbMiw3OF0sNTc6WzIsNzhdLDYwOlsyLDc4XSw2OTpbMiw3OF0sNzA6WzIsNzhdLDcxOlsyLDc4XSw3MjpbMiw3OF0sNzQ6WzIsNzhdLDc2OlsyLDc4XSw3NzpbMiw3OF0sODE6WzIsNzhdLDg4OlsyLDc4XSw4OTpbMiw3OF0sOTA6WzIsNzhdLDk1OlsyLDc4XSw5NzpbMiw3OF0sMTA2OlsyLDc4XSwxMDg6WzIsNzhdLDEwOTpbMiw3OF0sMTEwOlsyLDc4XSwxMTQ6WzIsNzhdLDEyMjpbMiw3OF0sMTMwOlsyLDc4XSwxMzM6WzIsNzhdLDEzNDpbMiw3OF0sMTM5OlsyLDc4XSwxNDA6WzIsNzhdLDE0MTpbMiw3OF0sMTQyOlsyLDc4XSwxNDM6WzIsNzhdLDE0NDpbMiw3OF0sMTQ1OlsyLDc4XX0sezE6WzIsMzJdLDY6WzIsMzJdLDI4OlsyLDMyXSwyOTpbMiwzMl0sNTI6WzIsMzJdLDU3OlsyLDMyXSw2MDpbMiwzMl0sNjk6WzIsMzJdLDcwOlsyLDMyXSw3MTpbMiwzMl0sNzI6WzIsMzJdLDc0OlsyLDMyXSw3NjpbMiwzMl0sNzc6WzIsMzJdLDgxOlsyLDMyXSw4ODpbMiwzMl0sODk6WzIsMzJdLDkwOlsyLDMyXSw5NTpbMiwzMl0sOTc6WzIsMzJdLDEwNjpbMiwzMl0sMTA4OlsyLDMyXSwxMDk6WzIsMzJdLDExMDpbMiwzMl0sMTE0OlsyLDMyXSwxMjI6WzIsMzJdLDEzMDpbMiwzMl0sMTMzOlsyLDMyXSwxMzQ6WzIsMzJdLDEzOTpbMiwzMl0sMTQwOlsyLDMyXSwxNDE6WzIsMzJdLDE0MjpbMiwzMl0sMTQzOlsyLDMyXSwxNDQ6WzIsMzJdLDE0NTpbMiwzMl19LHsxOlsyLDMzXSw2OlsyLDMzXSwyODpbMiwzM10sMjk6WzIsMzNdLDUyOlsyLDMzXSw1NzpbMiwzM10sNjA6WzIsMzNdLDY5OlsyLDMzXSw3MDpbMiwzM10sNzE6WzIsMzNdLDcyOlsyLDMzXSw3NDpbMiwzM10sNzY6WzIsMzNdLDc3OlsyLDMzXSw4MTpbMiwzM10sODg6WzIsMzNdLDg5OlsyLDMzXSw5MDpbMiwzM10sOTU6WzIsMzNdLDk3OlsyLDMzXSwxMDY6WzIsMzNdLDEwODpbMiwzM10sMTA5OlsyLDMzXSwxMTA6WzIsMzNdLDExNDpbMiwzM10sMTIyOlsyLDMzXSwxMzA6WzIsMzNdLDEzMzpbMiwzM10sMTM0OlsyLDMzXSwxMzk6WzIsMzNdLDE0MDpbMiwzM10sMTQxOlsyLDMzXSwxNDI6WzIsMzNdLDE0MzpbMiwzM10sMTQ0OlsyLDMzXSwxNDU6WzIsMzNdfSx7MTpbMiwzNF0sNjpbMiwzNF0sMjg6WzIsMzRdLDI5OlsyLDM0XSw1MjpbMiwzNF0sNTc6WzIsMzRdLDYwOlsyLDM0XSw2OTpbMiwzNF0sNzA6WzIsMzRdLDcxOlsyLDM0XSw3MjpbMiwzNF0sNzQ6WzIsMzRdLDc2OlsyLDM0XSw3NzpbMiwzNF0sODE6WzIsMzRdLDg4OlsyLDM0XSw4OTpbMiwzNF0sOTA6WzIsMzRdLDk1OlsyLDM0XSw5NzpbMiwzNF0sMTA2OlsyLDM0XSwxMDg6WzIsMzRdLDEwOTpbMiwzNF0sMTEwOlsyLDM0XSwxMTQ6WzIsMzRdLDEyMjpbMiwzNF0sMTMwOlsyLDM0XSwxMzM6WzIsMzRdLDEzNDpbMiwzNF0sMTM5OlsyLDM0XSwxNDA6WzIsMzRdLDE0MTpbMiwzNF0sMTQyOlsyLDM0XSwxNDM6WzIsMzRdLDE0NDpbMiwzNF0sMTQ1OlsyLDM0XX0sezE6WzIsMzVdLDY6WzIsMzVdLDI4OlsyLDM1XSwyOTpbMiwzNV0sNTI6WzIsMzVdLDU3OlsyLDM1XSw2MDpbMiwzNV0sNjk6WzIsMzVdLDcwOlsyLDM1XSw3MTpbMiwzNV0sNzI6WzIsMzVdLDc0OlsyLDM1XSw3NjpbMiwzNV0sNzc6WzIsMzVdLDgxOlsyLDM1XSw4ODpbMiwzNV0sODk6WzIsMzVdLDkwOlsyLDM1XSw5NTpbMiwzNV0sOTc6WzIsMzVdLDEwNjpbMiwzNV0sMTA4OlsyLDM1XSwxMDk6WzIsMzVdLDExMDpbMiwzNV0sMTE0OlsyLDM1XSwxMjI6WzIsMzVdLDEzMDpbMiwzNV0sMTMzOlsyLDM1XSwxMzQ6WzIsMzVdLDEzOTpbMiwzNV0sMTQwOlsyLDM1XSwxNDE6WzIsMzVdLDE0MjpbMiwzNV0sMTQzOlsyLDM1XSwxNDQ6WzIsMzVdLDE0NTpbMiwzNV19LHsxOlsyLDM2XSw2OlsyLDM2XSwyODpbMiwzNl0sMjk6WzIsMzZdLDUyOlsyLDM2XSw1NzpbMiwzNl0sNjA6WzIsMzZdLDY5OlsyLDM2XSw3MDpbMiwzNl0sNzE6WzIsMzZdLDcyOlsyLDM2XSw3NDpbMiwzNl0sNzY6WzIsMzZdLDc3OlsyLDM2XSw4MTpbMiwzNl0sODg6WzIsMzZdLDg5OlsyLDM2XSw5MDpbMiwzNl0sOTU6WzIsMzZdLDk3OlsyLDM2XSwxMDY6WzIsMzZdLDEwODpbMiwzNl0sMTA5OlsyLDM2XSwxMTA6WzIsMzZdLDExNDpbMiwzNl0sMTIyOlsyLDM2XSwxMzA6WzIsMzZdLDEzMzpbMiwzNl0sMTM0OlsyLDM2XSwxMzk6WzIsMzZdLDE0MDpbMiwzNl0sMTQxOlsyLDM2XSwxNDI6WzIsMzZdLDE0MzpbMiwzNl0sMTQ0OlsyLDM2XSwxNDU6WzIsMzZdfSx7MTpbMiwzN10sNjpbMiwzN10sMjg6WzIsMzddLDI5OlsyLDM3XSw1MjpbMiwzN10sNTc6WzIsMzddLDYwOlsyLDM3XSw2OTpbMiwzN10sNzA6WzIsMzddLDcxOlsyLDM3XSw3MjpbMiwzN10sNzQ6WzIsMzddLDc2OlsyLDM3XSw3NzpbMiwzN10sODE6WzIsMzddLDg4OlsyLDM3XSw4OTpbMiwzN10sOTA6WzIsMzddLDk1OlsyLDM3XSw5NzpbMiwzN10sMTA2OlsyLDM3XSwxMDg6WzIsMzddLDEwOTpbMiwzN10sMTEwOlsyLDM3XSwxMTQ6WzIsMzddLDEyMjpbMiwzN10sMTMwOlsyLDM3XSwxMzM6WzIsMzddLDEzNDpbMiwzN10sMTM5OlsyLDM3XSwxNDA6WzIsMzddLDE0MTpbMiwzN10sMTQyOlsyLDM3XSwxNDM6WzIsMzddLDE0NDpbMiwzN10sMTQ1OlsyLDM3XX0sezE6WzIsMzhdLDY6WzIsMzhdLDI4OlsyLDM4XSwyOTpbMiwzOF0sNTI6WzIsMzhdLDU3OlsyLDM4XSw2MDpbMiwzOF0sNjk6WzIsMzhdLDcwOlsyLDM4XSw3MTpbMiwzOF0sNzI6WzIsMzhdLDc0OlsyLDM4XSw3NjpbMiwzOF0sNzc6WzIsMzhdLDgxOlsyLDM4XSw4ODpbMiwzOF0sODk6WzIsMzhdLDkwOlsyLDM4XSw5NTpbMiwzOF0sOTc6WzIsMzhdLDEwNjpbMiwzOF0sMTA4OlsyLDM4XSwxMDk6WzIsMzhdLDExMDpbMiwzOF0sMTE0OlsyLDM4XSwxMjI6WzIsMzhdLDEzMDpbMiwzOF0sMTMzOlsyLDM4XSwxMzQ6WzIsMzhdLDEzOTpbMiwzOF0sMTQwOlsyLDM4XSwxNDE6WzIsMzhdLDE0MjpbMiwzOF0sMTQzOlsyLDM4XSwxNDQ6WzIsMzhdLDE0NTpbMiwzOF19LHs0OjE1Miw1OjMsNzo0LDg6NSw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNTNdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MTU0LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE1OF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTE6MTU2LDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk1OlsxLDE1NV0sOTg6MTU3LDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTE4XSw2OlsyLDExOF0sMjg6WzIsMTE4XSwyOTpbMiwxMThdLDUyOlsyLDExOF0sNTc6WzIsMTE4XSw2MDpbMiwxMThdLDY5OlsyLDExOF0sNzA6WzIsMTE4XSw3MTpbMiwxMThdLDcyOlsyLDExOF0sNzQ6WzIsMTE4XSw3NjpbMiwxMThdLDc3OlsyLDExOF0sODE6WzIsMTE4XSw4ODpbMiwxMThdLDg5OlsyLDExOF0sOTA6WzIsMTE4XSw5NTpbMiwxMThdLDk3OlsyLDExOF0sMTA2OlsyLDExOF0sMTA4OlsyLDExOF0sMTA5OlsyLDExOF0sMTEwOlsyLDExOF0sMTE0OlsyLDExOF0sMTIyOlsyLDExOF0sMTMwOlsyLDExOF0sMTMzOlsyLDExOF0sMTM0OlsyLDExOF0sMTM5OlsyLDExOF0sMTQwOlsyLDExOF0sMTQxOlsyLDExOF0sMTQyOlsyLDExOF0sMTQzOlsyLDExOF0sMTQ0OlsyLDExOF0sMTQ1OlsyLDExOF19LHsxOlsyLDExOV0sNjpbMiwxMTldLDI4OlsyLDExOV0sMjk6WzIsMTE5XSwzMDoxNjEsMzE6WzEsNzddLDUyOlsyLDExOV0sNTc6WzIsMTE5XSw2MDpbMiwxMTldLDY5OlsyLDExOV0sNzA6WzIsMTE5XSw3MTpbMiwxMTldLDcyOlsyLDExOV0sNzQ6WzIsMTE5XSw3NjpbMiwxMTldLDc3OlsyLDExOV0sODE6WzIsMTE5XSw4ODpbMiwxMTldLDg5OlsyLDExOV0sOTA6WzIsMTE5XSw5NTpbMiwxMTldLDk3OlsyLDExOV0sMTA2OlsyLDExOV0sMTA4OlsyLDExOV0sMTA5OlsyLDExOV0sMTEwOlsyLDExOV0sMTE0OlsyLDExOV0sMTIyOlsyLDExOV0sMTMwOlsyLDExOV0sMTMzOlsyLDExOV0sMTM0OlsyLDExOV0sMTM5OlsyLDExOV0sMTQwOlsyLDExOV0sMTQxOlsyLDExOV0sMTQyOlsyLDExOV0sMTQzOlsyLDExOV0sMTQ0OlsyLDExOV0sMTQ1OlsyLDExOV19LHsyODpbMiw1NF19LHsyODpbMiw1NV19LHsxOlsyLDcyXSw2OlsyLDcyXSwyODpbMiw3Ml0sMjk6WzIsNzJdLDQzOlsyLDcyXSw1MjpbMiw3Ml0sNTc6WzIsNzJdLDYwOlsyLDcyXSw2OTpbMiw3Ml0sNzA6WzIsNzJdLDcxOlsyLDcyXSw3MjpbMiw3Ml0sNzQ6WzIsNzJdLDc2OlsyLDcyXSw3NzpbMiw3Ml0sODE6WzIsNzJdLDgzOlsyLDcyXSw4ODpbMiw3Ml0sODk6WzIsNzJdLDkwOlsyLDcyXSw5NTpbMiw3Ml0sOTc6WzIsNzJdLDEwNjpbMiw3Ml0sMTA4OlsyLDcyXSwxMDk6WzIsNzJdLDExMDpbMiw3Ml0sMTE0OlsyLDcyXSwxMjI6WzIsNzJdLDEzMDpbMiw3Ml0sMTMzOlsyLDcyXSwxMzQ6WzIsNzJdLDEzNzpbMiw3Ml0sMTM4OlsyLDcyXSwxMzk6WzIsNzJdLDE0MDpbMiw3Ml0sMTQxOlsyLDcyXSwxNDI6WzIsNzJdLDE0MzpbMiw3Ml0sMTQ0OlsyLDcyXSwxNDU6WzIsNzJdLDE0NjpbMiw3Ml19LHsxOlsyLDc1XSw2OlsyLDc1XSwyODpbMiw3NV0sMjk6WzIsNzVdLDQzOlsyLDc1XSw1MjpbMiw3NV0sNTc6WzIsNzVdLDYwOlsyLDc1XSw2OTpbMiw3NV0sNzA6WzIsNzVdLDcxOlsyLDc1XSw3MjpbMiw3NV0sNzQ6WzIsNzVdLDc2OlsyLDc1XSw3NzpbMiw3NV0sODE6WzIsNzVdLDgzOlsyLDc1XSw4ODpbMiw3NV0sODk6WzIsNzVdLDkwOlsyLDc1XSw5NTpbMiw3NV0sOTc6WzIsNzVdLDEwNjpbMiw3NV0sMTA4OlsyLDc1XSwxMDk6WzIsNzVdLDExMDpbMiw3NV0sMTE0OlsyLDc1XSwxMjI6WzIsNzVdLDEzMDpbMiw3NV0sMTMzOlsyLDc1XSwxMzQ6WzIsNzVdLDEzNzpbMiw3NV0sMTM4OlsyLDc1XSwxMzk6WzIsNzVdLDE0MDpbMiw3NV0sMTQxOlsyLDc1XSwxNDI6WzIsNzVdLDE0MzpbMiw3NV0sMTQ0OlsyLDc1XSwxNDU6WzIsNzVdLDE0NjpbMiw3NV19LHs3OjE2Miw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE2Myw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE2NCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE2Niw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTQ6MTY1LDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTIwXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHszMDoxNzEsMzE6WzEsNzddLDQ3OjE3Miw2MToxNzMsNjI6MTc0LDY3OjE2Nyw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSw2MV0sMTE3OjE2OCwxMTg6WzEsMTY5XSwxMTk6MTcwfSx7MTE2OjE3NSwxMjA6WzEsMTc2XSwxMjE6WzEsMTc3XX0sezY6WzIsOTZdLDEwOjE4MSwyODpbMiw5Nl0sMzA6MTgyLDMxOlsxLDc3XSwzMjoxODMsMzM6WzEsNzVdLDM0OlsxLDc2XSw0NDoxNzksNDU6MTgwLDQ3OjE4NCw0OTpbMSw0OV0sNTc6WzIsOTZdLDgwOjE3OCw4MTpbMiw5Nl0sOTM6WzEsMTE3XX0sezE6WzIsMzBdLDY6WzIsMzBdLDI4OlsyLDMwXSwyOTpbMiwzMF0sNDY6WzIsMzBdLDUyOlsyLDMwXSw1NzpbMiwzMF0sNjA6WzIsMzBdLDY5OlsyLDMwXSw3MDpbMiwzMF0sNzE6WzIsMzBdLDcyOlsyLDMwXSw3NDpbMiwzMF0sNzY6WzIsMzBdLDc3OlsyLDMwXSw4MTpbMiwzMF0sODg6WzIsMzBdLDg5OlsyLDMwXSw5MDpbMiwzMF0sOTU6WzIsMzBdLDk3OlsyLDMwXSwxMDY6WzIsMzBdLDEwODpbMiwzMF0sMTA5OlsyLDMwXSwxMTA6WzIsMzBdLDExNDpbMiwzMF0sMTIyOlsyLDMwXSwxMzA6WzIsMzBdLDEzMzpbMiwzMF0sMTM0OlsyLDMwXSwxMzk6WzIsMzBdLDE0MDpbMiwzMF0sMTQxOlsyLDMwXSwxNDI6WzIsMzBdLDE0MzpbMiwzMF0sMTQ0OlsyLDMwXSwxNDU6WzIsMzBdfSx7MTpbMiwzMV0sNjpbMiwzMV0sMjg6WzIsMzFdLDI5OlsyLDMxXSw0NjpbMiwzMV0sNTI6WzIsMzFdLDU3OlsyLDMxXSw2MDpbMiwzMV0sNjk6WzIsMzFdLDcwOlsyLDMxXSw3MTpbMiwzMV0sNzI6WzIsMzFdLDc0OlsyLDMxXSw3NjpbMiwzMV0sNzc6WzIsMzFdLDgxOlsyLDMxXSw4ODpbMiwzMV0sODk6WzIsMzFdLDkwOlsyLDMxXSw5NTpbMiwzMV0sOTc6WzIsMzFdLDEwNjpbMiwzMV0sMTA4OlsyLDMxXSwxMDk6WzIsMzFdLDExMDpbMiwzMV0sMTE0OlsyLDMxXSwxMjI6WzIsMzFdLDEzMDpbMiwzMV0sMTMzOlsyLDMxXSwxMzQ6WzIsMzFdLDEzOTpbMiwzMV0sMTQwOlsyLDMxXSwxNDE6WzIsMzFdLDE0MjpbMiwzMV0sMTQzOlsyLDMxXSwxNDQ6WzIsMzFdLDE0NTpbMiwzMV19LHsxOlsyLDI5XSw2OlsyLDI5XSwyODpbMiwyOV0sMjk6WzIsMjldLDQzOlsyLDI5XSw0NjpbMiwyOV0sNTI6WzIsMjldLDU3OlsyLDI5XSw2MDpbMiwyOV0sNjk6WzIsMjldLDcwOlsyLDI5XSw3MTpbMiwyOV0sNzI6WzIsMjldLDc0OlsyLDI5XSw3NjpbMiwyOV0sNzc6WzIsMjldLDgxOlsyLDI5XSw4MzpbMiwyOV0sODg6WzIsMjldLDg5OlsyLDI5XSw5MDpbMiwyOV0sOTU6WzIsMjldLDk3OlsyLDI5XSwxMDY6WzIsMjldLDEwODpbMiwyOV0sMTA5OlsyLDI5XSwxMTA6WzIsMjldLDExNDpbMiwyOV0sMTIwOlsyLDI5XSwxMjE6WzIsMjldLDEyMjpbMiwyOV0sMTMwOlsyLDI5XSwxMzM6WzIsMjldLDEzNDpbMiwyOV0sMTM3OlsyLDI5XSwxMzg6WzIsMjldLDEzOTpbMiwyOV0sMTQwOlsyLDI5XSwxNDE6WzIsMjldLDE0MjpbMiwyOV0sMTQzOlsyLDI5XSwxNDQ6WzIsMjldLDE0NTpbMiwyOV0sMTQ2OlsyLDI5XX0sezE6WzIsNV0sNToxODUsNjpbMiw1XSw3OjQsODo1LDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI5OlsyLDVdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNjpbMiw1XSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDIwNV0sNjpbMiwyMDVdLDI4OlsyLDIwNV0sMjk6WzIsMjA1XSw1MjpbMiwyMDVdLDU3OlsyLDIwNV0sNjA6WzIsMjA1XSw3NjpbMiwyMDVdLDgxOlsyLDIwNV0sOTA6WzIsMjA1XSw5NTpbMiwyMDVdLDk3OlsyLDIwNV0sMTA2OlsyLDIwNV0sMTA4OlsyLDIwNV0sMTA5OlsyLDIwNV0sMTEwOlsyLDIwNV0sMTE0OlsyLDIwNV0sMTIyOlsyLDIwNV0sMTMwOlsyLDIwNV0sMTMzOlsyLDIwNV0sMTM0OlsyLDIwNV0sMTM5OlsyLDIwNV0sMTQwOlsyLDIwNV0sMTQxOlsyLDIwNV0sMTQyOlsyLDIwNV0sMTQzOlsyLDIwNV0sMTQ0OlsyLDIwNV0sMTQ1OlsyLDIwNV19LHs3OjE4Niw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE4Nyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE4OCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE4OSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE5MCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE5MSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE5Miw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE5Myw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE5NCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDE1Nl0sNjpbMiwxNTZdLDI4OlsyLDE1Nl0sMjk6WzIsMTU2XSw1MjpbMiwxNTZdLDU3OlsyLDE1Nl0sNjA6WzIsMTU2XSw3NjpbMiwxNTZdLDgxOlsyLDE1Nl0sOTA6WzIsMTU2XSw5NTpbMiwxNTZdLDk3OlsyLDE1Nl0sMTA2OlsyLDE1Nl0sMTA4OlsyLDE1Nl0sMTA5OlsyLDE1Nl0sMTEwOlsyLDE1Nl0sMTE0OlsyLDE1Nl0sMTIyOlsyLDE1Nl0sMTMwOlsyLDE1Nl0sMTMzOlsyLDE1Nl0sMTM0OlsyLDE1Nl0sMTM5OlsyLDE1Nl0sMTQwOlsyLDE1Nl0sMTQxOlsyLDE1Nl0sMTQyOlsyLDE1Nl0sMTQzOlsyLDE1Nl0sMTQ0OlsyLDE1Nl0sMTQ1OlsyLDE1Nl19LHsxOlsyLDE2MV0sNjpbMiwxNjFdLDI4OlsyLDE2MV0sMjk6WzIsMTYxXSw1MjpbMiwxNjFdLDU3OlsyLDE2MV0sNjA6WzIsMTYxXSw3NjpbMiwxNjFdLDgxOlsyLDE2MV0sOTA6WzIsMTYxXSw5NTpbMiwxNjFdLDk3OlsyLDE2MV0sMTA2OlsyLDE2MV0sMTA4OlsyLDE2MV0sMTA5OlsyLDE2MV0sMTEwOlsyLDE2MV0sMTE0OlsyLDE2MV0sMTIyOlsyLDE2MV0sMTMwOlsyLDE2MV0sMTMzOlsyLDE2MV0sMTM0OlsyLDE2MV0sMTM5OlsyLDE2MV0sMTQwOlsyLDE2MV0sMTQxOlsyLDE2MV0sMTQyOlsyLDE2MV0sMTQzOlsyLDE2MV0sMTQ0OlsyLDE2MV0sMTQ1OlsyLDE2MV19LHs3OjE5NSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDE1NV0sNjpbMiwxNTVdLDI4OlsyLDE1NV0sMjk6WzIsMTU1XSw1MjpbMiwxNTVdLDU3OlsyLDE1NV0sNjA6WzIsMTU1XSw3NjpbMiwxNTVdLDgxOlsyLDE1NV0sOTA6WzIsMTU1XSw5NTpbMiwxNTVdLDk3OlsyLDE1NV0sMTA2OlsyLDE1NV0sMTA4OlsyLDE1NV0sMTA5OlsyLDE1NV0sMTEwOlsyLDE1NV0sMTE0OlsyLDE1NV0sMTIyOlsyLDE1NV0sMTMwOlsyLDE1NV0sMTMzOlsyLDE1NV0sMTM0OlsyLDE1NV0sMTM5OlsyLDE1NV0sMTQwOlsyLDE1NV0sMTQxOlsyLDE1NV0sMTQyOlsyLDE1NV0sMTQzOlsyLDE1NV0sMTQ0OlsyLDE1NV0sMTQ1OlsyLDE1NV19LHsxOlsyLDE2MF0sNjpbMiwxNjBdLDI4OlsyLDE2MF0sMjk6WzIsMTYwXSw1MjpbMiwxNjBdLDU3OlsyLDE2MF0sNjA6WzIsMTYwXSw3NjpbMiwxNjBdLDgxOlsyLDE2MF0sOTA6WzIsMTYwXSw5NTpbMiwxNjBdLDk3OlsyLDE2MF0sMTA2OlsyLDE2MF0sMTA4OlsyLDE2MF0sMTA5OlsyLDE2MF0sMTEwOlsyLDE2MF0sMTE0OlsyLDE2MF0sMTIyOlsyLDE2MF0sMTMwOlsyLDE2MF0sMTMzOlsyLDE2MF0sMTM0OlsyLDE2MF0sMTM5OlsyLDE2MF0sMTQwOlsyLDE2MF0sMTQxOlsyLDE2MF0sMTQyOlsyLDE2MF0sMTQzOlsyLDE2MF0sMTQ0OlsyLDE2MF0sMTQ1OlsyLDE2MF19LHs4NToxOTYsODk6WzEsMTA4XX0sezE6WzIsNzNdLDY6WzIsNzNdLDI4OlsyLDczXSwyOTpbMiw3M10sNDM6WzIsNzNdLDUyOlsyLDczXSw1NzpbMiw3M10sNjA6WzIsNzNdLDY5OlsyLDczXSw3MDpbMiw3M10sNzE6WzIsNzNdLDcyOlsyLDczXSw3NDpbMiw3M10sNzY6WzIsNzNdLDc3OlsyLDczXSw4MTpbMiw3M10sODM6WzIsNzNdLDg4OlsyLDczXSw4OTpbMiw3M10sOTA6WzIsNzNdLDk1OlsyLDczXSw5NzpbMiw3M10sMTA2OlsyLDczXSwxMDg6WzIsNzNdLDEwOTpbMiw3M10sMTEwOlsyLDczXSwxMTQ6WzIsNzNdLDEyMjpbMiw3M10sMTMwOlsyLDczXSwxMzM6WzIsNzNdLDEzNDpbMiw3M10sMTM3OlsyLDczXSwxMzg6WzIsNzNdLDEzOTpbMiw3M10sMTQwOlsyLDczXSwxNDE6WzIsNzNdLDE0MjpbMiw3M10sMTQzOlsyLDczXSwxNDQ6WzIsNzNdLDE0NTpbMiw3M10sMTQ2OlsyLDczXX0sezg5OlsyLDExNV19LHsyNzoxOTgsMzA6MTk3LDMxOlsxLDc3XSw4NzpbMSw0N119LHszMDoxOTksMzE6WzEsNzddfSx7MTpbMiw4OV0sNjpbMiw4OV0sMjg6WzIsODldLDI5OlsyLDg5XSwzMDoyMDAsMzE6WzEsNzddLDQzOlsyLDg5XSw1MjpbMiw4OV0sNTc6WzIsODldLDYwOlsyLDg5XSw2OTpbMiw4OV0sNzA6WzIsODldLDcxOlsyLDg5XSw3MjpbMiw4OV0sNzQ6WzIsODldLDc2OlsyLDg5XSw3NzpbMiw4OV0sODE6WzIsODldLDgzOlsyLDg5XSw4ODpbMiw4OV0sODk6WzIsODldLDkwOlsyLDg5XSw5NTpbMiw4OV0sOTc6WzIsODldLDEwNjpbMiw4OV0sMTA4OlsyLDg5XSwxMDk6WzIsODldLDExMDpbMiw4OV0sMTE0OlsyLDg5XSwxMjI6WzIsODldLDEzMDpbMiw4OV0sMTMzOlsyLDg5XSwxMzQ6WzIsODldLDEzNzpbMiw4OV0sMTM4OlsyLDg5XSwxMzk6WzIsODldLDE0MDpbMiw4OV0sMTQxOlsyLDg5XSwxNDI6WzIsODldLDE0MzpbMiw4OV0sMTQ0OlsyLDg5XSwxNDU6WzIsODldLDE0NjpbMiw4OV19LHszMDoyMDEsMzE6WzEsNzddfSx7MTpbMiw5MF0sNjpbMiw5MF0sMjg6WzIsOTBdLDI5OlsyLDkwXSw0MzpbMiw5MF0sNTI6WzIsOTBdLDU3OlsyLDkwXSw2MDpbMiw5MF0sNjk6WzIsOTBdLDcwOlsyLDkwXSw3MTpbMiw5MF0sNzI6WzIsOTBdLDc0OlsyLDkwXSw3NjpbMiw5MF0sNzc6WzIsOTBdLDgxOlsyLDkwXSw4MzpbMiw5MF0sODg6WzIsOTBdLDg5OlsyLDkwXSw5MDpbMiw5MF0sOTU6WzIsOTBdLDk3OlsyLDkwXSwxMDY6WzIsOTBdLDEwODpbMiw5MF0sMTA5OlsyLDkwXSwxMTA6WzIsOTBdLDExNDpbMiw5MF0sMTIyOlsyLDkwXSwxMzA6WzIsOTBdLDEzMzpbMiw5MF0sMTM0OlsyLDkwXSwxMzc6WzIsOTBdLDEzODpbMiw5MF0sMTM5OlsyLDkwXSwxNDA6WzIsOTBdLDE0MTpbMiw5MF0sMTQyOlsyLDkwXSwxNDM6WzIsOTBdLDE0NDpbMiw5MF0sMTQ1OlsyLDkwXSwxNDY6WzIsOTBdfSx7NzoyMDMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwyMDddLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc1OjIwMiw3ODoyMDQsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk2OjIwNSw5NzpbMSwyMDZdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezczOjIwOCw3NDpbMSwxMDJdLDc3OlsxLDEwM119LHs4NToyMDksODk6WzEsMTA4XX0sezE6WzIsNzRdLDY6WzIsNzRdLDI4OlsyLDc0XSwyOTpbMiw3NF0sNDM6WzIsNzRdLDUyOlsyLDc0XSw1NzpbMiw3NF0sNjA6WzIsNzRdLDY5OlsyLDc0XSw3MDpbMiw3NF0sNzE6WzIsNzRdLDcyOlsyLDc0XSw3NDpbMiw3NF0sNzY6WzIsNzRdLDc3OlsyLDc0XSw4MTpbMiw3NF0sODM6WzIsNzRdLDg4OlsyLDc0XSw4OTpbMiw3NF0sOTA6WzIsNzRdLDk1OlsyLDc0XSw5NzpbMiw3NF0sMTA2OlsyLDc0XSwxMDg6WzIsNzRdLDEwOTpbMiw3NF0sMTEwOlsyLDc0XSwxMTQ6WzIsNzRdLDEyMjpbMiw3NF0sMTMwOlsyLDc0XSwxMzM6WzIsNzRdLDEzNDpbMiw3NF0sMTM3OlsyLDc0XSwxMzg6WzIsNzRdLDEzOTpbMiw3NF0sMTQwOlsyLDc0XSwxNDE6WzIsNzRdLDE0MjpbMiw3NF0sMTQzOlsyLDc0XSwxNDQ6WzIsNzRdLDE0NTpbMiw3NF0sMTQ2OlsyLDc0XX0sezY6WzEsMjExXSw3OjIxMCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwyMTJdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTEyXSw2OlsyLDExMl0sMjg6WzIsMTEyXSwyOTpbMiwxMTJdLDUyOlsyLDExMl0sNTc6WzIsMTEyXSw2MDpbMiwxMTJdLDY5OlsyLDExMl0sNzA6WzIsMTEyXSw3MTpbMiwxMTJdLDcyOlsyLDExMl0sNzQ6WzIsMTEyXSw3NjpbMiwxMTJdLDc3OlsyLDExMl0sODE6WzIsMTEyXSw4ODpbMiwxMTJdLDg5OlsyLDExMl0sOTA6WzIsMTEyXSw5NTpbMiwxMTJdLDk3OlsyLDExMl0sMTA2OlsyLDExMl0sMTA4OlsyLDExMl0sMTA5OlsyLDExMl0sMTEwOlsyLDExMl0sMTE0OlsyLDExMl0sMTIyOlsyLDExMl0sMTMwOlsyLDExMl0sMTMzOlsyLDExMl0sMTM0OlsyLDExMl0sMTM5OlsyLDExMl0sMTQwOlsyLDExMl0sMTQxOlsyLDExMl0sMTQyOlsyLDExMl0sMTQzOlsyLDExMl0sMTQ0OlsyLDExMl0sMTQ1OlsyLDExMl19LHs3OjIxNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNThdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkwOlsxLDIxM10sOTE6MjE0LDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk4OjE1NywxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDU2XSwyODpbMiw1Nl0sNTI6WzEsMjE2XSw1NjoyMTgsNTc6WzEsMjE3XX0sezY6WzIsNTldLDI4OlsyLDU5XSwyOTpbMiw1OV0sNTI6WzIsNTldLDU3OlsyLDU5XX0sezY6WzIsNjNdLDI4OlsyLDYzXSwyOTpbMiw2M10sNDM6WzEsMjIwXSw1MjpbMiw2M10sNTc6WzIsNjNdLDYwOlsxLDIxOV19LHs2OlsyLDY2XSwyODpbMiw2Nl0sMjk6WzIsNjZdLDUyOlsyLDY2XSw1NzpbMiw2Nl19LHs2OlsyLDY3XSwyODpbMiw2N10sMjk6WzIsNjddLDQzOlsyLDY3XSw1MjpbMiw2N10sNTc6WzIsNjddLDYwOlsyLDY3XX0sezY6WzIsNjhdLDI4OlsyLDY4XSwyOTpbMiw2OF0sNDM6WzIsNjhdLDUyOlsyLDY4XSw1NzpbMiw2OF0sNjA6WzIsNjhdfSx7NjpbMiw2OV0sMjg6WzIsNjldLDI5OlsyLDY5XSw0MzpbMiw2OV0sNTI6WzIsNjldLDU3OlsyLDY5XSw2MDpbMiw2OV19LHs2OlsyLDcwXSwyODpbMiw3MF0sMjk6WzIsNzBdLDQzOlsyLDcwXSw1MjpbMiw3MF0sNTc6WzIsNzBdLDYwOlsyLDcwXX0sezMwOjE2MSwzMTpbMSw3N119LHs3OjIxNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNThdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkxOjE1Niw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5NTpbMSwxNTVdLDk4OjE1NywxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDUzXSw2OlsyLDUzXSwyODpbMiw1M10sMjk6WzIsNTNdLDUyOlsyLDUzXSw1NzpbMiw1M10sNjA6WzIsNTNdLDc2OlsyLDUzXSw4MTpbMiw1M10sOTA6WzIsNTNdLDk1OlsyLDUzXSw5NzpbMiw1M10sMTA2OlsyLDUzXSwxMDg6WzIsNTNdLDEwOTpbMiw1M10sMTEwOlsyLDUzXSwxMTQ6WzIsNTNdLDEyMjpbMiw1M10sMTMwOlsyLDUzXSwxMzM6WzIsNTNdLDEzNDpbMiw1M10sMTM5OlsyLDUzXSwxNDA6WzIsNTNdLDE0MTpbMiw1M10sMTQyOlsyLDUzXSwxNDM6WzIsNTNdLDE0NDpbMiw1M10sMTQ1OlsyLDUzXX0sezQ6MjIyLDU6Myw3OjQsODo1LDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI5OlsxLDIyMV0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxOTRdLDY6WzIsMTk0XSwyODpbMiwxOTRdLDI5OlsyLDE5NF0sNTI6WzIsMTk0XSw1NzpbMiwxOTRdLDYwOlsyLDE5NF0sNzY6WzIsMTk0XSw4MTpbMiwxOTRdLDkwOlsyLDE5NF0sOTU6WzIsMTk0XSw5NzpbMiwxOTRdLDEwNjpbMiwxOTRdLDEwNzo4OSwxMDg6WzIsMTk0XSwxMDk6WzIsMTk0XSwxMTA6WzIsMTk0XSwxMTM6OTAsMTE0OlsyLDE5NF0sMTE1OjczLDEyMjpbMiwxOTRdLDEzMDpbMiwxOTRdLDEzMzpbMiwxOTRdLDEzNDpbMiwxOTRdLDEzOTpbMSw3OV0sMTQwOlsyLDE5NF0sMTQxOlsyLDE5NF0sMTQyOlsyLDE5NF0sMTQzOlsyLDE5NF0sMTQ0OlsyLDE5NF0sMTQ1OlsyLDE5NF19LHsxMDc6OTIsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MywxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsOTFdfSx7MTpbMiwxOTVdLDY6WzIsMTk1XSwyODpbMiwxOTVdLDI5OlsyLDE5NV0sNTI6WzIsMTk1XSw1NzpbMiwxOTVdLDYwOlsyLDE5NV0sNzY6WzIsMTk1XSw4MTpbMiwxOTVdLDkwOlsyLDE5NV0sOTU6WzIsMTk1XSw5NzpbMiwxOTVdLDEwNjpbMiwxOTVdLDEwNzo4OSwxMDg6WzIsMTk1XSwxMDk6WzIsMTk1XSwxMTA6WzIsMTk1XSwxMTM6OTAsMTE0OlsyLDE5NV0sMTE1OjczLDEyMjpbMiwxOTVdLDEzMDpbMiwxOTVdLDEzMzpbMiwxOTVdLDEzNDpbMiwxOTVdLDEzOTpbMSw3OV0sMTQwOlsyLDE5NV0sMTQxOlsxLDgzXSwxNDI6WzIsMTk1XSwxNDM6WzIsMTk1XSwxNDQ6WzIsMTk1XSwxNDU6WzIsMTk1XX0sezE6WzIsMTk2XSw2OlsyLDE5Nl0sMjg6WzIsMTk2XSwyOTpbMiwxOTZdLDUyOlsyLDE5Nl0sNTc6WzIsMTk2XSw2MDpbMiwxOTZdLDc2OlsyLDE5Nl0sODE6WzIsMTk2XSw5MDpbMiwxOTZdLDk1OlsyLDE5Nl0sOTc6WzIsMTk2XSwxMDY6WzIsMTk2XSwxMDc6ODksMTA4OlsyLDE5Nl0sMTA5OlsyLDE5Nl0sMTEwOlsyLDE5Nl0sMTEzOjkwLDExNDpbMiwxOTZdLDExNTo3MywxMjI6WzIsMTk2XSwxMzA6WzIsMTk2XSwxMzM6WzIsMTk2XSwxMzQ6WzIsMTk2XSwxMzk6WzEsNzldLDE0MDpbMiwxOTZdLDE0MTpbMSw4M10sMTQyOlsyLDE5Nl0sMTQzOlsyLDE5Nl0sMTQ0OlsyLDE5Nl0sMTQ1OlsyLDE5Nl19LHsxOlsyLDE5N10sNjpbMiwxOTddLDI4OlsyLDE5N10sMjk6WzIsMTk3XSw1MjpbMiwxOTddLDU3OlsyLDE5N10sNjA6WzIsMTk3XSw3NjpbMiwxOTddLDgxOlsyLDE5N10sOTA6WzIsMTk3XSw5NTpbMiwxOTddLDk3OlsyLDE5N10sMTA2OlsyLDE5N10sMTA3Ojg5LDEwODpbMiwxOTddLDEwOTpbMiwxOTddLDExMDpbMiwxOTddLDExMzo5MCwxMTQ6WzIsMTk3XSwxMTU6NzMsMTIyOlsyLDE5N10sMTMwOlsyLDE5N10sMTMzOlsyLDE5N10sMTM0OlsyLDE5N10sMTM5OlsxLDc5XSwxNDA6WzIsMTk3XSwxNDE6WzEsODNdLDE0MjpbMiwxOTddLDE0MzpbMiwxOTddLDE0NDpbMiwxOTddLDE0NTpbMiwxOTddfSx7MTpbMiwxOThdLDY6WzIsMTk4XSwyODpbMiwxOThdLDI5OlsyLDE5OF0sNTI6WzIsMTk4XSw1NzpbMiwxOThdLDYwOlsyLDE5OF0sNzY6WzIsMTk4XSw4MTpbMiwxOThdLDkwOlsyLDE5OF0sOTU6WzIsMTk4XSw5NzpbMiwxOThdLDEwNjpbMiwxOThdLDEwNzo5MiwxMDg6WzIsMTk4XSwxMDk6WzIsMTk4XSwxMTA6WzIsMTk4XSwxMTM6OTMsMTE0OlsyLDE5OF0sMTE1OjczLDEyMjpbMiwxOThdLDEzMDpbMiwxOThdLDEzMzpbMiwxOThdLDEzNDpbMiwxOThdLDEzOTpbMiwxOThdLDE0MDpbMiwxOThdLDE0MTpbMiwxOThdLDE0MjpbMiwxOThdLDE0MzpbMiwxOThdLDE0NDpbMiwxOThdLDE0NTpbMiwxOThdfSx7MTpbMiwxOTldLDY6WzIsMTk5XSwyODpbMiwxOTldLDI5OlsyLDE5OV0sNTI6WzIsMTk5XSw1NzpbMiwxOTldLDYwOlsyLDE5OV0sNzY6WzIsMTk5XSw4MTpbMiwxOTldLDkwOlsyLDE5OV0sOTU6WzIsMTk5XSw5NzpbMiwxOTldLDEwNjpbMiwxOTldLDEwNzo4OSwxMDg6WzIsMTk5XSwxMDk6WzIsMTk5XSwxMTA6WzIsMTk5XSwxMTM6OTAsMTE0OlsyLDE5OV0sMTE1OjczLDEyMjpbMiwxOTldLDEzMDpbMiwxOTldLDEzMzpbMiwxOTldLDEzNDpbMiwxOTldLDEzOTpbMSw3OV0sMTQwOlsyLDE5OV0sMTQxOlsyLDE5OV0sMTQyOlsyLDE5OV0sMTQzOlsyLDE5OV0sMTQ0OlsyLDE5OV0sMTQ1OlsyLDE5OV19LHs3OjIyMyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDIwMV0sNjpbMiwyMDFdLDI4OlsyLDIwMV0sMjk6WzIsMjAxXSw1MjpbMiwyMDFdLDU3OlsyLDIwMV0sNjA6WzIsMjAxXSw2OTpbMiw3Nl0sNzA6WzIsNzZdLDcxOlsyLDc2XSw3MjpbMiw3Nl0sNzQ6WzIsNzZdLDc2OlsyLDIwMV0sNzc6WzIsNzZdLDgxOlsyLDIwMV0sODg6WzIsNzZdLDg5OlsyLDc2XSw5MDpbMiwyMDFdLDk1OlsyLDIwMV0sOTc6WzIsMjAxXSwxMDY6WzIsMjAxXSwxMDg6WzIsMjAxXSwxMDk6WzIsMjAxXSwxMTA6WzIsMjAxXSwxMTQ6WzIsMjAxXSwxMjI6WzIsMjAxXSwxMzA6WzIsMjAxXSwxMzM6WzIsMjAxXSwxMzQ6WzIsMjAxXSwxMzk6WzIsMjAxXSwxNDA6WzIsMjAxXSwxNDE6WzIsMjAxXSwxNDI6WzIsMjAxXSwxNDM6WzIsMjAxXSwxNDQ6WzIsMjAxXSwxNDU6WzIsMjAxXX0sezY1Ojk1LDY5OlsxLDk3XSw3MDpbMSw5OF0sNzE6WzEsOTldLDcyOlsxLDEwMF0sNzM6MTAxLDc0OlsxLDEwMl0sNzc6WzEsMTAzXSw4NDo5NCw4ODpbMSw5Nl0sODk6WzIsMTE0XX0sezY1OjEwNSw2OTpbMSw5N10sNzA6WzEsOThdLDcxOlsxLDk5XSw3MjpbMSwxMDBdLDczOjEwMSw3NDpbMSwxMDJdLDc3OlsxLDEwM10sODQ6MTA0LDg4OlsxLDk2XSw4OTpbMiwxMTRdfSx7Njk6WzIsNzldLDcwOlsyLDc5XSw3MTpbMiw3OV0sNzI6WzIsNzldLDc0OlsyLDc5XSw3NzpbMiw3OV0sODg6WzIsNzldLDg5OlsyLDc5XX0sezE6WzIsMjAyXSw2OlsyLDIwMl0sMjg6WzIsMjAyXSwyOTpbMiwyMDJdLDUyOlsyLDIwMl0sNTc6WzIsMjAyXSw2MDpbMiwyMDJdLDY5OlsyLDc2XSw3MDpbMiw3Nl0sNzE6WzIsNzZdLDcyOlsyLDc2XSw3NDpbMiw3Nl0sNzY6WzIsMjAyXSw3NzpbMiw3Nl0sODE6WzIsMjAyXSw4ODpbMiw3Nl0sODk6WzIsNzZdLDkwOlsyLDIwMl0sOTU6WzIsMjAyXSw5NzpbMiwyMDJdLDEwNjpbMiwyMDJdLDEwODpbMiwyMDJdLDEwOTpbMiwyMDJdLDExMDpbMiwyMDJdLDExNDpbMiwyMDJdLDEyMjpbMiwyMDJdLDEzMDpbMiwyMDJdLDEzMzpbMiwyMDJdLDEzNDpbMiwyMDJdLDEzOTpbMiwyMDJdLDE0MDpbMiwyMDJdLDE0MTpbMiwyMDJdLDE0MjpbMiwyMDJdLDE0MzpbMiwyMDJdLDE0NDpbMiwyMDJdLDE0NTpbMiwyMDJdfSx7MTpbMiwyMDNdLDY6WzIsMjAzXSwyODpbMiwyMDNdLDI5OlsyLDIwM10sNTI6WzIsMjAzXSw1NzpbMiwyMDNdLDYwOlsyLDIwM10sNzY6WzIsMjAzXSw4MTpbMiwyMDNdLDkwOlsyLDIwM10sOTU6WzIsMjAzXSw5NzpbMiwyMDNdLDEwNjpbMiwyMDNdLDEwODpbMiwyMDNdLDEwOTpbMiwyMDNdLDExMDpbMiwyMDNdLDExNDpbMiwyMDNdLDEyMjpbMiwyMDNdLDEzMDpbMiwyMDNdLDEzMzpbMiwyMDNdLDEzNDpbMiwyMDNdLDEzOTpbMiwyMDNdLDE0MDpbMiwyMDNdLDE0MTpbMiwyMDNdLDE0MjpbMiwyMDNdLDE0MzpbMiwyMDNdLDE0NDpbMiwyMDNdLDE0NTpbMiwyMDNdfSx7MTpbMiwyMDRdLDY6WzIsMjA0XSwyODpbMiwyMDRdLDI5OlsyLDIwNF0sNTI6WzIsMjA0XSw1NzpbMiwyMDRdLDYwOlsyLDIwNF0sNzY6WzIsMjA0XSw4MTpbMiwyMDRdLDkwOlsyLDIwNF0sOTU6WzIsMjA0XSw5NzpbMiwyMDRdLDEwNjpbMiwyMDRdLDEwODpbMiwyMDRdLDEwOTpbMiwyMDRdLDExMDpbMiwyMDRdLDExNDpbMiwyMDRdLDEyMjpbMiwyMDRdLDEzMDpbMiwyMDRdLDEzMzpbMiwyMDRdLDEzNDpbMiwyMDRdLDEzOTpbMiwyMDRdLDE0MDpbMiwyMDRdLDE0MTpbMiwyMDRdLDE0MjpbMiwyMDRdLDE0MzpbMiwyMDRdLDE0NDpbMiwyMDRdLDE0NTpbMiwyMDRdfSx7NjpbMSwyMjZdLDc6MjI0LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDIyNV0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoyMjcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTQ6MjI4LDI4OlsxLDEyMF0sMTI5OlsxLDIyOV19LHsxOlsyLDE0MF0sNjpbMiwxNDBdLDI4OlsyLDE0MF0sMjk6WzIsMTQwXSw1MjpbMiwxNDBdLDU3OlsyLDE0MF0sNjA6WzIsMTQwXSw3NjpbMiwxNDBdLDgxOlsyLDE0MF0sOTA6WzIsMTQwXSw5NTpbMiwxNDBdLDk3OlsyLDE0MF0sMTAxOjIzMCwxMDI6WzEsMjMxXSwxMDM6WzEsMjMyXSwxMDY6WzIsMTQwXSwxMDg6WzIsMTQwXSwxMDk6WzIsMTQwXSwxMTA6WzIsMTQwXSwxMTQ6WzIsMTQwXSwxMjI6WzIsMTQwXSwxMzA6WzIsMTQwXSwxMzM6WzIsMTQwXSwxMzQ6WzIsMTQwXSwxMzk6WzIsMTQwXSwxNDA6WzIsMTQwXSwxNDE6WzIsMTQwXSwxNDI6WzIsMTQwXSwxNDM6WzIsMTQwXSwxNDQ6WzIsMTQwXSwxNDU6WzIsMTQwXX0sezE6WzIsMTU0XSw2OlsyLDE1NF0sMjg6WzIsMTU0XSwyOTpbMiwxNTRdLDUyOlsyLDE1NF0sNTc6WzIsMTU0XSw2MDpbMiwxNTRdLDc2OlsyLDE1NF0sODE6WzIsMTU0XSw5MDpbMiwxNTRdLDk1OlsyLDE1NF0sOTc6WzIsMTU0XSwxMDY6WzIsMTU0XSwxMDg6WzIsMTU0XSwxMDk6WzIsMTU0XSwxMTA6WzIsMTU0XSwxMTQ6WzIsMTU0XSwxMjI6WzIsMTU0XSwxMzA6WzIsMTU0XSwxMzM6WzIsMTU0XSwxMzQ6WzIsMTU0XSwxMzk6WzIsMTU0XSwxNDA6WzIsMTU0XSwxNDE6WzIsMTU0XSwxNDI6WzIsMTU0XSwxNDM6WzIsMTU0XSwxNDQ6WzIsMTU0XSwxNDU6WzIsMTU0XX0sezE6WzIsMTYyXSw2OlsyLDE2Ml0sMjg6WzIsMTYyXSwyOTpbMiwxNjJdLDUyOlsyLDE2Ml0sNTc6WzIsMTYyXSw2MDpbMiwxNjJdLDc2OlsyLDE2Ml0sODE6WzIsMTYyXSw5MDpbMiwxNjJdLDk1OlsyLDE2Ml0sOTc6WzIsMTYyXSwxMDY6WzIsMTYyXSwxMDg6WzIsMTYyXSwxMDk6WzIsMTYyXSwxMTA6WzIsMTYyXSwxMTQ6WzIsMTYyXSwxMjI6WzIsMTYyXSwxMzA6WzIsMTYyXSwxMzM6WzIsMTYyXSwxMzQ6WzIsMTYyXSwxMzk6WzIsMTYyXSwxNDA6WzIsMTYyXSwxNDE6WzIsMTYyXSwxNDI6WzIsMTYyXSwxNDM6WzIsMTYyXSwxNDQ6WzIsMTYyXSwxNDU6WzIsMTYyXX0sezI4OlsxLDIzM10sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezEyNDoyMzQsMTI2OjIzNSwxMjc6WzEsMjM2XX0sezE6WzIsMTAyXSw2OlsyLDEwMl0sMjg6WzIsMTAyXSwyOTpbMiwxMDJdLDUyOlsyLDEwMl0sNTc6WzIsMTAyXSw2MDpbMiwxMDJdLDc2OlsyLDEwMl0sODE6WzIsMTAyXSw5MDpbMiwxMDJdLDk1OlsyLDEwMl0sOTc6WzIsMTAyXSwxMDY6WzIsMTAyXSwxMDg6WzIsMTAyXSwxMDk6WzIsMTAyXSwxMTA6WzIsMTAyXSwxMTQ6WzIsMTAyXSwxMjI6WzIsMTAyXSwxMzA6WzIsMTAyXSwxMzM6WzIsMTAyXSwxMzQ6WzIsMTAyXSwxMzk6WzIsMTAyXSwxNDA6WzIsMTAyXSwxNDE6WzIsMTAyXSwxNDI6WzIsMTAyXSwxNDM6WzIsMTAyXSwxNDQ6WzIsMTAyXSwxNDU6WzIsMTAyXX0sezc6MjM3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTA1XSw2OlsyLDEwNV0sMTQ6MjM4LDI4OlsxLDEyMF0sMjk6WzIsMTA1XSw1MjpbMiwxMDVdLDU3OlsyLDEwNV0sNjA6WzIsMTA1XSw2OTpbMiw3Nl0sNzA6WzIsNzZdLDcxOlsyLDc2XSw3MjpbMiw3Nl0sNzQ6WzIsNzZdLDc2OlsyLDEwNV0sNzc6WzIsNzZdLDgxOlsyLDEwNV0sODM6WzEsMjM5XSw4ODpbMiw3Nl0sODk6WzIsNzZdLDkwOlsyLDEwNV0sOTU6WzIsMTA1XSw5NzpbMiwxMDVdLDEwNjpbMiwxMDVdLDEwODpbMiwxMDVdLDEwOTpbMiwxMDVdLDExMDpbMiwxMDVdLDExNDpbMiwxMDVdLDEyMjpbMiwxMDVdLDEzMDpbMiwxMDVdLDEzMzpbMiwxMDVdLDEzNDpbMiwxMDVdLDEzOTpbMiwxMDVdLDE0MDpbMiwxMDVdLDE0MTpbMiwxMDVdLDE0MjpbMiwxMDVdLDE0MzpbMiwxMDVdLDE0NDpbMiwxMDVdLDE0NTpbMiwxMDVdfSx7MTpbMiwxNDddLDY6WzIsMTQ3XSwyODpbMiwxNDddLDI5OlsyLDE0N10sNTI6WzIsMTQ3XSw1NzpbMiwxNDddLDYwOlsyLDE0N10sNzY6WzIsMTQ3XSw4MTpbMiwxNDddLDkwOlsyLDE0N10sOTU6WzIsMTQ3XSw5NzpbMiwxNDddLDEwNjpbMiwxNDddLDEwNzo4OSwxMDg6WzIsMTQ3XSwxMDk6WzIsMTQ3XSwxMTA6WzIsMTQ3XSwxMTM6OTAsMTE0OlsyLDE0N10sMTE1OjczLDEyMjpbMiwxNDddLDEzMDpbMiwxNDddLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMTNdLDY6WzIsMTEzXSwyODpbMiwxMTNdLDI5OlsyLDExM10sNDM6WzIsMTEzXSw1MjpbMiwxMTNdLDU3OlsyLDExM10sNjA6WzIsMTEzXSw2OTpbMiwxMTNdLDcwOlsyLDExM10sNzE6WzIsMTEzXSw3MjpbMiwxMTNdLDc0OlsyLDExM10sNzY6WzIsMTEzXSw3NzpbMiwxMTNdLDgxOlsyLDExM10sODM6WzIsMTEzXSw4ODpbMiwxMTNdLDg5OlsyLDExM10sOTA6WzIsMTEzXSw5NTpbMiwxMTNdLDk3OlsyLDExM10sMTA2OlsyLDExM10sMTA4OlsyLDExM10sMTA5OlsyLDExM10sMTEwOlsyLDExM10sMTE0OlsyLDExM10sMTIyOlsyLDExM10sMTMwOlsyLDExM10sMTMzOlsyLDExM10sMTM0OlsyLDExM10sMTM3OlsyLDExM10sMTM4OlsyLDExM10sMTM5OlsyLDExM10sMTQwOlsyLDExM10sMTQxOlsyLDExM10sMTQyOlsyLDExM10sMTQzOlsyLDExM10sMTQ0OlsyLDExM10sMTQ1OlsyLDExM10sMTQ2OlsyLDExM119LHsxOlsyLDQ5XSw2OlsyLDQ5XSwyODpbMiw0OV0sMjk6WzIsNDldLDUyOlsyLDQ5XSw1NzpbMiw0OV0sNjA6WzIsNDldLDc2OlsyLDQ5XSw4MTpbMiw0OV0sOTA6WzIsNDldLDk1OlsyLDQ5XSw5NzpbMiw0OV0sMTA2OlsyLDQ5XSwxMDc6ODksMTA4OlsyLDQ5XSwxMDk6WzIsNDldLDExMDpbMiw0OV0sMTEzOjkwLDExNDpbMiw0OV0sMTE1OjczLDEyMjpbMiw0OV0sMTMwOlsyLDQ5XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTJdLDY6WzIsMTJdLDI4OlsyLDEyXSwyOTpbMiwxMl0sNTI6WzIsMTJdLDU3OlsyLDEyXSw2MDpbMiwxMl0sNzY6WzIsMTJdLDgxOlsyLDEyXSw5MDpbMiwxMl0sOTU6WzIsMTJdLDk3OlsyLDEyXSwxMDY6WzIsMTJdLDEwODpbMiwxMl0sMTA5OlsyLDEyXSwxMTA6WzIsMTJdLDExNDpbMiwxMl0sMTIyOlsyLDEyXSwxMzA6WzIsMTJdLDEzMzpbMiwxMl0sMTM0OlsyLDEyXSwxMzk6WzIsMTJdLDE0MDpbMiwxMl0sMTQxOlsyLDEyXSwxNDI6WzIsMTJdLDE0MzpbMiwxMl0sMTQ0OlsyLDEyXSwxNDU6WzIsMTJdfSx7MTpbMiwxM10sNjpbMiwxM10sMjg6WzIsMTNdLDI5OlsyLDEzXSw1MjpbMiwxM10sNTc6WzIsMTNdLDYwOlsyLDEzXSw3NjpbMiwxM10sODE6WzIsMTNdLDkwOlsyLDEzXSw5NTpbMiwxM10sOTc6WzIsMTNdLDEwNjpbMiwxM10sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDEzXSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTNdLDEzMDpbMiwxM10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsxLDc4XSwxMDY6WzEsMjQwXX0sezQ6MjQxLDU6Myw3OjQsODo1LDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzIsMTM1XSwyODpbMiwxMzVdLDU3OlsyLDEzNV0sNjA6WzEsMjQzXSw5NTpbMiwxMzVdLDk2OjI0Miw5NzpbMSwyMDZdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDEyMV0sNjpbMiwxMjFdLDI4OlsyLDEyMV0sMjk6WzIsMTIxXSw0MzpbMiwxMjFdLDUyOlsyLDEyMV0sNTc6WzIsMTIxXSw2MDpbMiwxMjFdLDY5OlsyLDEyMV0sNzA6WzIsMTIxXSw3MTpbMiwxMjFdLDcyOlsyLDEyMV0sNzQ6WzIsMTIxXSw3NjpbMiwxMjFdLDc3OlsyLDEyMV0sODE6WzIsMTIxXSw4ODpbMiwxMjFdLDg5OlsyLDEyMV0sOTA6WzIsMTIxXSw5NTpbMiwxMjFdLDk3OlsyLDEyMV0sMTA2OlsyLDEyMV0sMTA4OlsyLDEyMV0sMTA5OlsyLDEyMV0sMTEwOlsyLDEyMV0sMTE0OlsyLDEyMV0sMTIwOlsyLDEyMV0sMTIxOlsyLDEyMV0sMTIyOlsyLDEyMV0sMTMwOlsyLDEyMV0sMTMzOlsyLDEyMV0sMTM0OlsyLDEyMV0sMTM5OlsyLDEyMV0sMTQwOlsyLDEyMV0sMTQxOlsyLDEyMV0sMTQyOlsyLDEyMV0sMTQzOlsyLDEyMV0sMTQ0OlsyLDEyMV0sMTQ1OlsyLDEyMV19LHs2OlsyLDU2XSwyODpbMiw1Nl0sNTY6MjQ0LDU3OlsxLDI0NV0sOTU6WzIsNTZdfSx7NjpbMiwxMzBdLDI4OlsyLDEzMF0sMjk6WzIsMTMwXSw1NzpbMiwxMzBdLDkwOlsyLDEzMF0sOTU6WzIsMTMwXX0sezc6MjE1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE1OF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTE6MjQ2LDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk4OjE1NywxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDEzNl0sMjg6WzIsMTM2XSwyOTpbMiwxMzZdLDU3OlsyLDEzNl0sOTA6WzIsMTM2XSw5NTpbMiwxMzZdfSx7NjpbMiwxMzddLDI4OlsyLDEzN10sMjk6WzIsMTM3XSw1NzpbMiwxMzddLDkwOlsyLDEzN10sOTU6WzIsMTM3XX0sezE6WzIsMTIwXSw2OlsyLDEyMF0sMjg6WzIsMTIwXSwyOTpbMiwxMjBdLDQzOlsyLDEyMF0sNDY6WzIsMTIwXSw1MjpbMiwxMjBdLDU3OlsyLDEyMF0sNjA6WzIsMTIwXSw2OTpbMiwxMjBdLDcwOlsyLDEyMF0sNzE6WzIsMTIwXSw3MjpbMiwxMjBdLDc0OlsyLDEyMF0sNzY6WzIsMTIwXSw3NzpbMiwxMjBdLDgxOlsyLDEyMF0sODM6WzIsMTIwXSw4ODpbMiwxMjBdLDg5OlsyLDEyMF0sOTA6WzIsMTIwXSw5NTpbMiwxMjBdLDk3OlsyLDEyMF0sMTA2OlsyLDEyMF0sMTA4OlsyLDEyMF0sMTA5OlsyLDEyMF0sMTEwOlsyLDEyMF0sMTE0OlsyLDEyMF0sMTIwOlsyLDEyMF0sMTIxOlsyLDEyMF0sMTIyOlsyLDEyMF0sMTMwOlsyLDEyMF0sMTMzOlsyLDEyMF0sMTM0OlsyLDEyMF0sMTM3OlsyLDEyMF0sMTM4OlsyLDEyMF0sMTM5OlsyLDEyMF0sMTQwOlsyLDEyMF0sMTQxOlsyLDEyMF0sMTQyOlsyLDEyMF0sMTQzOlsyLDEyMF0sMTQ0OlsyLDEyMF0sMTQ1OlsyLDEyMF0sMTQ2OlsyLDEyMF19LHsxNDoyNDcsMjg6WzEsMTIwXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNTBdLDY6WzIsMTUwXSwyODpbMiwxNTBdLDI5OlsyLDE1MF0sNTI6WzIsMTUwXSw1NzpbMiwxNTBdLDYwOlsyLDE1MF0sNzY6WzIsMTUwXSw4MTpbMiwxNTBdLDkwOlsyLDE1MF0sOTU6WzIsMTUwXSw5NzpbMiwxNTBdLDEwNjpbMiwxNTBdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMSwyNDhdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxNTBdLDEzMDpbMiwxNTBdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNTJdLDY6WzIsMTUyXSwyODpbMiwxNTJdLDI5OlsyLDE1Ml0sNTI6WzIsMTUyXSw1NzpbMiwxNTJdLDYwOlsyLDE1Ml0sNzY6WzIsMTUyXSw4MTpbMiwxNTJdLDkwOlsyLDE1Ml0sOTU6WzIsMTUyXSw5NzpbMiwxNTJdLDEwNjpbMiwxNTJdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMSwyNDldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxNTJdLDEzMDpbMiwxNTJdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNThdLDY6WzIsMTU4XSwyODpbMiwxNThdLDI5OlsyLDE1OF0sNTI6WzIsMTU4XSw1NzpbMiwxNThdLDYwOlsyLDE1OF0sNzY6WzIsMTU4XSw4MTpbMiwxNThdLDkwOlsyLDE1OF0sOTU6WzIsMTU4XSw5NzpbMiwxNThdLDEwNjpbMiwxNThdLDEwODpbMiwxNThdLDEwOTpbMiwxNThdLDExMDpbMiwxNThdLDExNDpbMiwxNThdLDEyMjpbMiwxNThdLDEzMDpbMiwxNThdLDEzMzpbMiwxNThdLDEzNDpbMiwxNThdLDEzOTpbMiwxNThdLDE0MDpbMiwxNThdLDE0MTpbMiwxNThdLDE0MjpbMiwxNThdLDE0MzpbMiwxNThdLDE0NDpbMiwxNThdLDE0NTpbMiwxNThdfSx7MTpbMiwxNTldLDY6WzIsMTU5XSwyODpbMiwxNTldLDI5OlsyLDE1OV0sNTI6WzIsMTU5XSw1NzpbMiwxNTldLDYwOlsyLDE1OV0sNzY6WzIsMTU5XSw4MTpbMiwxNTldLDkwOlsyLDE1OV0sOTU6WzIsMTU5XSw5NzpbMiwxNTldLDEwNjpbMiwxNTldLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxNTldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxNTldLDEzMDpbMiwxNTldLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNjNdLDY6WzIsMTYzXSwyODpbMiwxNjNdLDI5OlsyLDE2M10sNTI6WzIsMTYzXSw1NzpbMiwxNjNdLDYwOlsyLDE2M10sNzY6WzIsMTYzXSw4MTpbMiwxNjNdLDkwOlsyLDE2M10sOTU6WzIsMTYzXSw5NzpbMiwxNjNdLDEwNjpbMiwxNjNdLDEwODpbMiwxNjNdLDEwOTpbMiwxNjNdLDExMDpbMiwxNjNdLDExNDpbMiwxNjNdLDEyMjpbMiwxNjNdLDEzMDpbMiwxNjNdLDEzMzpbMiwxNjNdLDEzNDpbMiwxNjNdLDEzOTpbMiwxNjNdLDE0MDpbMiwxNjNdLDE0MTpbMiwxNjNdLDE0MjpbMiwxNjNdLDE0MzpbMiwxNjNdLDE0NDpbMiwxNjNdLDE0NTpbMiwxNjNdfSx7MTIwOlsyLDE2NV0sMTIxOlsyLDE2NV19LHszMDoxNzEsMzE6WzEsNzddLDQ3OjE3Miw2MToxNzMsNjI6MTc0LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDExOF0sMTE3OjI1MCwxMTk6MTcwfSx7NTc6WzEsMjUxXSwxMjA6WzIsMTcxXSwxMjE6WzIsMTcxXX0sezU3OlsyLDE2N10sMTIwOlsyLDE2N10sMTIxOlsyLDE2N119LHs1NzpbMiwxNjhdLDEyMDpbMiwxNjhdLDEyMTpbMiwxNjhdfSx7NTc6WzIsMTY5XSwxMjA6WzIsMTY5XSwxMjE6WzIsMTY5XX0sezU3OlsyLDE3MF0sMTIwOlsyLDE3MF0sMTIxOlsyLDE3MF19LHsxOlsyLDE2NF0sNjpbMiwxNjRdLDI4OlsyLDE2NF0sMjk6WzIsMTY0XSw1MjpbMiwxNjRdLDU3OlsyLDE2NF0sNjA6WzIsMTY0XSw3NjpbMiwxNjRdLDgxOlsyLDE2NF0sOTA6WzIsMTY0XSw5NTpbMiwxNjRdLDk3OlsyLDE2NF0sMTA2OlsyLDE2NF0sMTA4OlsyLDE2NF0sMTA5OlsyLDE2NF0sMTEwOlsyLDE2NF0sMTE0OlsyLDE2NF0sMTIyOlsyLDE2NF0sMTMwOlsyLDE2NF0sMTMzOlsyLDE2NF0sMTM0OlsyLDE2NF0sMTM5OlsyLDE2NF0sMTQwOlsyLDE2NF0sMTQxOlsyLDE2NF0sMTQyOlsyLDE2NF0sMTQzOlsyLDE2NF0sMTQ0OlsyLDE2NF0sMTQ1OlsyLDE2NF19LHs3OjI1Miw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjI1Myw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDU2XSwyODpbMiw1Nl0sNTY6MjU0LDU3OlsxLDI1NV0sODE6WzIsNTZdfSx7NjpbMiw5N10sMjg6WzIsOTddLDI5OlsyLDk3XSw1NzpbMiw5N10sODE6WzIsOTddfSx7NjpbMiw0Ml0sMjg6WzIsNDJdLDI5OlsyLDQyXSw0NjpbMSwyNTZdLDU3OlsyLDQyXSw4MTpbMiw0Ml19LHs2OlsyLDQ1XSwyODpbMiw0NV0sMjk6WzIsNDVdLDU3OlsyLDQ1XSw4MTpbMiw0NV19LHs2OlsyLDQ2XSwyODpbMiw0Nl0sMjk6WzIsNDZdLDQ2OlsyLDQ2XSw1NzpbMiw0Nl0sODE6WzIsNDZdfSx7NjpbMiw0N10sMjg6WzIsNDddLDI5OlsyLDQ3XSw0NjpbMiw0N10sNTc6WzIsNDddLDgxOlsyLDQ3XX0sezY6WzIsNDhdLDI4OlsyLDQ4XSwyOTpbMiw0OF0sNDY6WzIsNDhdLDU3OlsyLDQ4XSw4MTpbMiw0OF19LHsxOlsyLDRdLDY6WzIsNF0sMjk6WzIsNF0sMTA2OlsyLDRdfSx7MTpbMiwyMDZdLDY6WzIsMjA2XSwyODpbMiwyMDZdLDI5OlsyLDIwNl0sNTI6WzIsMjA2XSw1NzpbMiwyMDZdLDYwOlsyLDIwNl0sNzY6WzIsMjA2XSw4MTpbMiwyMDZdLDkwOlsyLDIwNl0sOTU6WzIsMjA2XSw5NzpbMiwyMDZdLDEwNjpbMiwyMDZdLDEwNzo4OSwxMDg6WzIsMjA2XSwxMDk6WzIsMjA2XSwxMTA6WzIsMjA2XSwxMTM6OTAsMTE0OlsyLDIwNl0sMTE1OjczLDEyMjpbMiwyMDZdLDEzMDpbMiwyMDZdLDEzMzpbMiwyMDZdLDEzNDpbMiwyMDZdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMiwyMDZdLDE0MzpbMiwyMDZdLDE0NDpbMiwyMDZdLDE0NTpbMiwyMDZdfSx7MTpbMiwyMDddLDY6WzIsMjA3XSwyODpbMiwyMDddLDI5OlsyLDIwN10sNTI6WzIsMjA3XSw1NzpbMiwyMDddLDYwOlsyLDIwN10sNzY6WzIsMjA3XSw4MTpbMiwyMDddLDkwOlsyLDIwN10sOTU6WzIsMjA3XSw5NzpbMiwyMDddLDEwNjpbMiwyMDddLDEwNzo4OSwxMDg6WzIsMjA3XSwxMDk6WzIsMjA3XSwxMTA6WzIsMjA3XSwxMTM6OTAsMTE0OlsyLDIwN10sMTE1OjczLDEyMjpbMiwyMDddLDEzMDpbMiwyMDddLDEzMzpbMiwyMDddLDEzNDpbMiwyMDddLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMiwyMDddLDE0MzpbMiwyMDddLDE0NDpbMiwyMDddLDE0NTpbMiwyMDddfSx7MTpbMiwyMDhdLDY6WzIsMjA4XSwyODpbMiwyMDhdLDI5OlsyLDIwOF0sNTI6WzIsMjA4XSw1NzpbMiwyMDhdLDYwOlsyLDIwOF0sNzY6WzIsMjA4XSw4MTpbMiwyMDhdLDkwOlsyLDIwOF0sOTU6WzIsMjA4XSw5NzpbMiwyMDhdLDEwNjpbMiwyMDhdLDEwNzo4OSwxMDg6WzIsMjA4XSwxMDk6WzIsMjA4XSwxMTA6WzIsMjA4XSwxMTM6OTAsMTE0OlsyLDIwOF0sMTE1OjczLDEyMjpbMiwyMDhdLDEzMDpbMiwyMDhdLDEzMzpbMiwyMDhdLDEzNDpbMiwyMDhdLDEzOTpbMSw3OV0sMTQwOlsyLDIwOF0sMTQxOlsxLDgzXSwxNDI6WzIsMjA4XSwxNDM6WzIsMjA4XSwxNDQ6WzIsMjA4XSwxNDU6WzIsMjA4XX0sezE6WzIsMjA5XSw2OlsyLDIwOV0sMjg6WzIsMjA5XSwyOTpbMiwyMDldLDUyOlsyLDIwOV0sNTc6WzIsMjA5XSw2MDpbMiwyMDldLDc2OlsyLDIwOV0sODE6WzIsMjA5XSw5MDpbMiwyMDldLDk1OlsyLDIwOV0sOTc6WzIsMjA5XSwxMDY6WzIsMjA5XSwxMDc6ODksMTA4OlsyLDIwOV0sMTA5OlsyLDIwOV0sMTEwOlsyLDIwOV0sMTEzOjkwLDExNDpbMiwyMDldLDExNTo3MywxMjI6WzIsMjA5XSwxMzA6WzIsMjA5XSwxMzM6WzIsMjA5XSwxMzQ6WzIsMjA5XSwxMzk6WzEsNzldLDE0MDpbMiwyMDldLDE0MTpbMSw4M10sMTQyOlsyLDIwOV0sMTQzOlsyLDIwOV0sMTQ0OlsyLDIwOV0sMTQ1OlsyLDIwOV19LHsxOlsyLDIxMF0sNjpbMiwyMTBdLDI4OlsyLDIxMF0sMjk6WzIsMjEwXSw1MjpbMiwyMTBdLDU3OlsyLDIxMF0sNjA6WzIsMjEwXSw3NjpbMiwyMTBdLDgxOlsyLDIxMF0sOTA6WzIsMjEwXSw5NTpbMiwyMTBdLDk3OlsyLDIxMF0sMTA2OlsyLDIxMF0sMTA3Ojg5LDEwODpbMiwyMTBdLDEwOTpbMiwyMTBdLDExMDpbMiwyMTBdLDExMzo5MCwxMTQ6WzIsMjEwXSwxMTU6NzMsMTIyOlsyLDIxMF0sMTMwOlsyLDIxMF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMiwyMTBdLDE0MzpbMiwyMTBdLDE0NDpbMiwyMTBdLDE0NTpbMiwyMTBdfSx7MTpbMiwyMTFdLDY6WzIsMjExXSwyODpbMiwyMTFdLDI5OlsyLDIxMV0sNTI6WzIsMjExXSw1NzpbMiwyMTFdLDYwOlsyLDIxMV0sNzY6WzIsMjExXSw4MTpbMiwyMTFdLDkwOlsyLDIxMV0sOTU6WzIsMjExXSw5NzpbMiwyMTFdLDEwNjpbMiwyMTFdLDEwNzo4OSwxMDg6WzIsMjExXSwxMDk6WzIsMjExXSwxMTA6WzIsMjExXSwxMTM6OTAsMTE0OlsyLDIxMV0sMTE1OjczLDEyMjpbMiwyMTFdLDEzMDpbMiwyMTFdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMiwyMTFdLDE0NDpbMiwyMTFdLDE0NTpbMSw4N119LHsxOlsyLDIxMl0sNjpbMiwyMTJdLDI4OlsyLDIxMl0sMjk6WzIsMjEyXSw1MjpbMiwyMTJdLDU3OlsyLDIxMl0sNjA6WzIsMjEyXSw3NjpbMiwyMTJdLDgxOlsyLDIxMl0sOTA6WzIsMjEyXSw5NTpbMiwyMTJdLDk3OlsyLDIxMl0sMTA2OlsyLDIxMl0sMTA3Ojg5LDEwODpbMiwyMTJdLDEwOTpbMiwyMTJdLDExMDpbMiwyMTJdLDExMzo5MCwxMTQ6WzIsMjEyXSwxMTU6NzMsMTIyOlsyLDIxMl0sMTMwOlsyLDIxMl0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzIsMjEyXSwxNDU6WzEsODddfSx7MTpbMiwyMTNdLDY6WzIsMjEzXSwyODpbMiwyMTNdLDI5OlsyLDIxM10sNTI6WzIsMjEzXSw1NzpbMiwyMTNdLDYwOlsyLDIxM10sNzY6WzIsMjEzXSw4MTpbMiwyMTNdLDkwOlsyLDIxM10sOTU6WzIsMjEzXSw5NzpbMiwyMTNdLDEwNjpbMiwyMTNdLDEwNzo4OSwxMDg6WzIsMjEzXSwxMDk6WzIsMjEzXSwxMTA6WzIsMjEzXSwxMTM6OTAsMTE0OlsyLDIxM10sMTE1OjczLDEyMjpbMiwyMTNdLDEzMDpbMiwyMTNdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMiwyMTNdLDE0NDpbMiwyMTNdLDE0NTpbMiwyMTNdfSx7MTpbMiwxOTNdLDY6WzIsMTkzXSwyODpbMiwxOTNdLDI5OlsyLDE5M10sNTI6WzIsMTkzXSw1NzpbMiwxOTNdLDYwOlsyLDE5M10sNzY6WzIsMTkzXSw4MTpbMiwxOTNdLDkwOlsyLDE5M10sOTU6WzIsMTkzXSw5NzpbMiwxOTNdLDEwNjpbMiwxOTNdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxOTNdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxOTNdLDEzMDpbMiwxOTNdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxOTJdLDY6WzIsMTkyXSwyODpbMiwxOTJdLDI5OlsyLDE5Ml0sNTI6WzIsMTkyXSw1NzpbMiwxOTJdLDYwOlsyLDE5Ml0sNzY6WzIsMTkyXSw4MTpbMiwxOTJdLDkwOlsyLDE5Ml0sOTU6WzIsMTkyXSw5NzpbMiwxOTJdLDEwNjpbMiwxOTJdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxOTJdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxOTJdLDEzMDpbMiwxOTJdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMDldLDY6WzIsMTA5XSwyODpbMiwxMDldLDI5OlsyLDEwOV0sNTI6WzIsMTA5XSw1NzpbMiwxMDldLDYwOlsyLDEwOV0sNjk6WzIsMTA5XSw3MDpbMiwxMDldLDcxOlsyLDEwOV0sNzI6WzIsMTA5XSw3NDpbMiwxMDldLDc2OlsyLDEwOV0sNzc6WzIsMTA5XSw4MTpbMiwxMDldLDg4OlsyLDEwOV0sODk6WzIsMTA5XSw5MDpbMiwxMDldLDk1OlsyLDEwOV0sOTc6WzIsMTA5XSwxMDY6WzIsMTA5XSwxMDg6WzIsMTA5XSwxMDk6WzIsMTA5XSwxMTA6WzIsMTA5XSwxMTQ6WzIsMTA5XSwxMjI6WzIsMTA5XSwxMzA6WzIsMTA5XSwxMzM6WzIsMTA5XSwxMzQ6WzIsMTA5XSwxMzk6WzIsMTA5XSwxNDA6WzIsMTA5XSwxNDE6WzIsMTA5XSwxNDI6WzIsMTA5XSwxNDM6WzIsMTA5XSwxNDQ6WzIsMTA5XSwxNDU6WzIsMTA5XX0sezE6WzIsODRdLDY6WzIsODRdLDI4OlsyLDg0XSwyOTpbMiw4NF0sNDM6WzIsODRdLDUyOlsyLDg0XSw1NzpbMiw4NF0sNjA6WzIsODRdLDY5OlsyLDg0XSw3MDpbMiw4NF0sNzE6WzIsODRdLDcyOlsyLDg0XSw3NDpbMiw4NF0sNzY6WzIsODRdLDc3OlsyLDg0XSw4MTpbMiw4NF0sODM6WzIsODRdLDg4OlsyLDg0XSw4OTpbMiw4NF0sOTA6WzIsODRdLDk1OlsyLDg0XSw5NzpbMiw4NF0sMTA2OlsyLDg0XSwxMDg6WzIsODRdLDEwOTpbMiw4NF0sMTEwOlsyLDg0XSwxMTQ6WzIsODRdLDEyMjpbMiw4NF0sMTMwOlsyLDg0XSwxMzM6WzIsODRdLDEzNDpbMiw4NF0sMTM3OlsyLDg0XSwxMzg6WzIsODRdLDEzOTpbMiw4NF0sMTQwOlsyLDg0XSwxNDE6WzIsODRdLDE0MjpbMiw4NF0sMTQzOlsyLDg0XSwxNDQ6WzIsODRdLDE0NTpbMiw4NF0sMTQ2OlsyLDg0XX0sezE6WzIsODVdLDY6WzIsODVdLDI4OlsyLDg1XSwyOTpbMiw4NV0sNDM6WzIsODVdLDUyOlsyLDg1XSw1NzpbMiw4NV0sNjA6WzIsODVdLDY5OlsyLDg1XSw3MDpbMiw4NV0sNzE6WzIsODVdLDcyOlsyLDg1XSw3NDpbMiw4NV0sNzY6WzIsODVdLDc3OlsyLDg1XSw4MTpbMiw4NV0sODM6WzIsODVdLDg4OlsyLDg1XSw4OTpbMiw4NV0sOTA6WzIsODVdLDk1OlsyLDg1XSw5NzpbMiw4NV0sMTA2OlsyLDg1XSwxMDg6WzIsODVdLDEwOTpbMiw4NV0sMTEwOlsyLDg1XSwxMTQ6WzIsODVdLDEyMjpbMiw4NV0sMTMwOlsyLDg1XSwxMzM6WzIsODVdLDEzNDpbMiw4NV0sMTM3OlsyLDg1XSwxMzg6WzIsODVdLDEzOTpbMiw4NV0sMTQwOlsyLDg1XSwxNDE6WzIsODVdLDE0MjpbMiw4NV0sMTQzOlsyLDg1XSwxNDQ6WzIsODVdLDE0NTpbMiw4NV0sMTQ2OlsyLDg1XX0sezE6WzIsODZdLDY6WzIsODZdLDI4OlsyLDg2XSwyOTpbMiw4Nl0sNDM6WzIsODZdLDUyOlsyLDg2XSw1NzpbMiw4Nl0sNjA6WzIsODZdLDY5OlsyLDg2XSw3MDpbMiw4Nl0sNzE6WzIsODZdLDcyOlsyLDg2XSw3NDpbMiw4Nl0sNzY6WzIsODZdLDc3OlsyLDg2XSw4MTpbMiw4Nl0sODM6WzIsODZdLDg4OlsyLDg2XSw4OTpbMiw4Nl0sOTA6WzIsODZdLDk1OlsyLDg2XSw5NzpbMiw4Nl0sMTA2OlsyLDg2XSwxMDg6WzIsODZdLDEwOTpbMiw4Nl0sMTEwOlsyLDg2XSwxMTQ6WzIsODZdLDEyMjpbMiw4Nl0sMTMwOlsyLDg2XSwxMzM6WzIsODZdLDEzNDpbMiw4Nl0sMTM3OlsyLDg2XSwxMzg6WzIsODZdLDEzOTpbMiw4Nl0sMTQwOlsyLDg2XSwxNDE6WzIsODZdLDE0MjpbMiw4Nl0sMTQzOlsyLDg2XSwxNDQ6WzIsODZdLDE0NTpbMiw4Nl0sMTQ2OlsyLDg2XX0sezE6WzIsODddLDY6WzIsODddLDI4OlsyLDg3XSwyOTpbMiw4N10sNDM6WzIsODddLDUyOlsyLDg3XSw1NzpbMiw4N10sNjA6WzIsODddLDY5OlsyLDg3XSw3MDpbMiw4N10sNzE6WzIsODddLDcyOlsyLDg3XSw3NDpbMiw4N10sNzY6WzIsODddLDc3OlsyLDg3XSw4MTpbMiw4N10sODM6WzIsODddLDg4OlsyLDg3XSw4OTpbMiw4N10sOTA6WzIsODddLDk1OlsyLDg3XSw5NzpbMiw4N10sMTA2OlsyLDg3XSwxMDg6WzIsODddLDEwOTpbMiw4N10sMTEwOlsyLDg3XSwxMTQ6WzIsODddLDEyMjpbMiw4N10sMTMwOlsyLDg3XSwxMzM6WzIsODddLDEzNDpbMiw4N10sMTM3OlsyLDg3XSwxMzg6WzIsODddLDEzOTpbMiw4N10sMTQwOlsyLDg3XSwxNDE6WzIsODddLDE0MjpbMiw4N10sMTQzOlsyLDg3XSwxNDQ6WzIsODddLDE0NTpbMiw4N10sMTQ2OlsyLDg3XX0sezE6WzIsODhdLDY6WzIsODhdLDI4OlsyLDg4XSwyOTpbMiw4OF0sNDM6WzIsODhdLDUyOlsyLDg4XSw1NzpbMiw4OF0sNjA6WzIsODhdLDY5OlsyLDg4XSw3MDpbMiw4OF0sNzE6WzIsODhdLDcyOlsyLDg4XSw3NDpbMiw4OF0sNzY6WzIsODhdLDc3OlsyLDg4XSw4MTpbMiw4OF0sODM6WzIsODhdLDg4OlsyLDg4XSw4OTpbMiw4OF0sOTA6WzIsODhdLDk1OlsyLDg4XSw5NzpbMiw4OF0sMTA2OlsyLDg4XSwxMDg6WzIsODhdLDEwOTpbMiw4OF0sMTEwOlsyLDg4XSwxMTQ6WzIsODhdLDEyMjpbMiw4OF0sMTMwOlsyLDg4XSwxMzM6WzIsODhdLDEzNDpbMiw4OF0sMTM3OlsyLDg4XSwxMzg6WzIsODhdLDEzOTpbMiw4OF0sMTQwOlsyLDg4XSwxNDE6WzIsODhdLDE0MjpbMiw4OF0sMTQzOlsyLDg4XSwxNDQ6WzIsODhdLDE0NTpbMiw4OF0sMTQ2OlsyLDg4XX0sezc2OlsxLDI1N119LHs2MDpbMSwyMDddLDc2OlsyLDkzXSw5NjoyNTgsOTc6WzEsMjA2XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NzY6WzIsOTRdfSx7NzoyNTksODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3NjpbMiwxMjldLDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxMTpbMiwxMjNdLDEzOlsyLDEyM10sMzE6WzIsMTIzXSwzMzpbMiwxMjNdLDM0OlsyLDEyM10sMzY6WzIsMTIzXSwzNzpbMiwxMjNdLDM4OlsyLDEyM10sMzk6WzIsMTIzXSw0MDpbMiwxMjNdLDQxOlsyLDEyM10sNDg6WzIsMTIzXSw0OTpbMiwxMjNdLDUwOlsyLDEyM10sNTQ6WzIsMTIzXSw1NTpbMiwxMjNdLDc2OlsyLDEyM10sNzk6WzIsMTIzXSw4MjpbMiwxMjNdLDg2OlsyLDEyM10sODc6WzIsMTIzXSw5MjpbMiwxMjNdLDkzOlsyLDEyM10sOTQ6WzIsMTIzXSwxMDA6WzIsMTIzXSwxMDQ6WzIsMTIzXSwxMDU6WzIsMTIzXSwxMDg6WzIsMTIzXSwxMTA6WzIsMTIzXSwxMTI6WzIsMTIzXSwxMTQ6WzIsMTIzXSwxMjM6WzIsMTIzXSwxMjk6WzIsMTIzXSwxMzE6WzIsMTIzXSwxMzI6WzIsMTIzXSwxMzM6WzIsMTIzXSwxMzQ6WzIsMTIzXSwxMzU6WzIsMTIzXSwxMzc6WzIsMTIzXSwxMzg6WzIsMTIzXX0sezExOlsyLDEyNF0sMTM6WzIsMTI0XSwzMTpbMiwxMjRdLDMzOlsyLDEyNF0sMzQ6WzIsMTI0XSwzNjpbMiwxMjRdLDM3OlsyLDEyNF0sMzg6WzIsMTI0XSwzOTpbMiwxMjRdLDQwOlsyLDEyNF0sNDE6WzIsMTI0XSw0ODpbMiwxMjRdLDQ5OlsyLDEyNF0sNTA6WzIsMTI0XSw1NDpbMiwxMjRdLDU1OlsyLDEyNF0sNzY6WzIsMTI0XSw3OTpbMiwxMjRdLDgyOlsyLDEyNF0sODY6WzIsMTI0XSw4NzpbMiwxMjRdLDkyOlsyLDEyNF0sOTM6WzIsMTI0XSw5NDpbMiwxMjRdLDEwMDpbMiwxMjRdLDEwNDpbMiwxMjRdLDEwNTpbMiwxMjRdLDEwODpbMiwxMjRdLDExMDpbMiwxMjRdLDExMjpbMiwxMjRdLDExNDpbMiwxMjRdLDEyMzpbMiwxMjRdLDEyOTpbMiwxMjRdLDEzMTpbMiwxMjRdLDEzMjpbMiwxMjRdLDEzMzpbMiwxMjRdLDEzNDpbMiwxMjRdLDEzNTpbMiwxMjRdLDEzNzpbMiwxMjRdLDEzODpbMiwxMjRdfSx7MTpbMiw5Ml0sNjpbMiw5Ml0sMjg6WzIsOTJdLDI5OlsyLDkyXSw0MzpbMiw5Ml0sNTI6WzIsOTJdLDU3OlsyLDkyXSw2MDpbMiw5Ml0sNjk6WzIsOTJdLDcwOlsyLDkyXSw3MTpbMiw5Ml0sNzI6WzIsOTJdLDc0OlsyLDkyXSw3NjpbMiw5Ml0sNzc6WzIsOTJdLDgxOlsyLDkyXSw4MzpbMiw5Ml0sODg6WzIsOTJdLDg5OlsyLDkyXSw5MDpbMiw5Ml0sOTU6WzIsOTJdLDk3OlsyLDkyXSwxMDY6WzIsOTJdLDEwODpbMiw5Ml0sMTA5OlsyLDkyXSwxMTA6WzIsOTJdLDExNDpbMiw5Ml0sMTIyOlsyLDkyXSwxMzA6WzIsOTJdLDEzMzpbMiw5Ml0sMTM0OlsyLDkyXSwxMzc6WzIsOTJdLDEzODpbMiw5Ml0sMTM5OlsyLDkyXSwxNDA6WzIsOTJdLDE0MTpbMiw5Ml0sMTQyOlsyLDkyXSwxNDM6WzIsOTJdLDE0NDpbMiw5Ml0sMTQ1OlsyLDkyXSwxNDY6WzIsOTJdfSx7MTpbMiwxMTBdLDY6WzIsMTEwXSwyODpbMiwxMTBdLDI5OlsyLDExMF0sNTI6WzIsMTEwXSw1NzpbMiwxMTBdLDYwOlsyLDExMF0sNjk6WzIsMTEwXSw3MDpbMiwxMTBdLDcxOlsyLDExMF0sNzI6WzIsMTEwXSw3NDpbMiwxMTBdLDc2OlsyLDExMF0sNzc6WzIsMTEwXSw4MTpbMiwxMTBdLDg4OlsyLDExMF0sODk6WzIsMTEwXSw5MDpbMiwxMTBdLDk1OlsyLDExMF0sOTc6WzIsMTEwXSwxMDY6WzIsMTEwXSwxMDg6WzIsMTEwXSwxMDk6WzIsMTEwXSwxMTA6WzIsMTEwXSwxMTQ6WzIsMTEwXSwxMjI6WzIsMTEwXSwxMzA6WzIsMTEwXSwxMzM6WzIsMTEwXSwxMzQ6WzIsMTEwXSwxMzk6WzIsMTEwXSwxNDA6WzIsMTEwXSwxNDE6WzIsMTEwXSwxNDI6WzIsMTEwXSwxNDM6WzIsMTEwXSwxNDQ6WzIsMTEwXSwxNDU6WzIsMTEwXX0sezE6WzIsMzldLDY6WzIsMzldLDI4OlsyLDM5XSwyOTpbMiwzOV0sNTI6WzIsMzldLDU3OlsyLDM5XSw2MDpbMiwzOV0sNzY6WzIsMzldLDgxOlsyLDM5XSw5MDpbMiwzOV0sOTU6WzIsMzldLDk3OlsyLDM5XSwxMDY6WzIsMzldLDEwNzo4OSwxMDg6WzIsMzldLDEwOTpbMiwzOV0sMTEwOlsyLDM5XSwxMTM6OTAsMTE0OlsyLDM5XSwxMTU6NzMsMTIyOlsyLDM5XSwxMzA6WzIsMzldLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NzoyNjAsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoyNjEsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMTZdLDY6WzIsMTE2XSwyODpbMiwxMTZdLDI5OlsyLDExNl0sNDM6WzIsMTE2XSw1MjpbMiwxMTZdLDU3OlsyLDExNl0sNjA6WzIsMTE2XSw2OTpbMiwxMTZdLDcwOlsyLDExNl0sNzE6WzIsMTE2XSw3MjpbMiwxMTZdLDc0OlsyLDExNl0sNzY6WzIsMTE2XSw3NzpbMiwxMTZdLDgxOlsyLDExNl0sODM6WzIsMTE2XSw4ODpbMiwxMTZdLDg5OlsyLDExNl0sOTA6WzIsMTE2XSw5NTpbMiwxMTZdLDk3OlsyLDExNl0sMTA2OlsyLDExNl0sMTA4OlsyLDExNl0sMTA5OlsyLDExNl0sMTEwOlsyLDExNl0sMTE0OlsyLDExNl0sMTIyOlsyLDExNl0sMTMwOlsyLDExNl0sMTMzOlsyLDExNl0sMTM0OlsyLDExNl0sMTM3OlsyLDExNl0sMTM4OlsyLDExNl0sMTM5OlsyLDExNl0sMTQwOlsyLDExNl0sMTQxOlsyLDExNl0sMTQyOlsyLDExNl0sMTQzOlsyLDExNl0sMTQ0OlsyLDExNl0sMTQ1OlsyLDExNl0sMTQ2OlsyLDExNl19LHs2OlsyLDU2XSwyODpbMiw1Nl0sNTY6MjYyLDU3OlsxLDI0NV0sOTA6WzIsNTZdfSx7NjpbMiwxMzVdLDI4OlsyLDEzNV0sMjk6WzIsMTM1XSw1NzpbMiwxMzVdLDYwOlsxLDI2M10sOTA6WzIsMTM1XSw5NTpbMiwxMzVdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs1MzoyNjQsNTQ6WzEsNjRdLDU1OlsxLDY1XX0sezY6WzIsNTddLDI4OlsyLDU3XSwyOTpbMiw1N10sMzA6MTEzLDMxOlsxLDc3XSw0NzoxMTQsNTg6MjY1LDU5OjExMSw2MDpbMSwxMTJdLDYxOjExNSw2MjoxMTYsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsMTE4XX0sezY6WzEsMjY2XSwyODpbMSwyNjddfSx7NjpbMiw2NF0sMjg6WzIsNjRdLDI5OlsyLDY0XSw1MjpbMiw2NF0sNTc6WzIsNjRdfSx7NzoyNjgsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwyN10sNjpbMiwyN10sMjg6WzIsMjddLDI5OlsyLDI3XSw1MjpbMiwyN10sNTc6WzIsMjddLDYwOlsyLDI3XSw3NjpbMiwyN10sODE6WzIsMjddLDkwOlsyLDI3XSw5NTpbMiwyN10sOTc6WzIsMjddLDEwMjpbMiwyN10sMTAzOlsyLDI3XSwxMDY6WzIsMjddLDEwODpbMiwyN10sMTA5OlsyLDI3XSwxMTA6WzIsMjddLDExNDpbMiwyN10sMTIyOlsyLDI3XSwxMjU6WzIsMjddLDEyNzpbMiwyN10sMTMwOlsyLDI3XSwxMzM6WzIsMjddLDEzNDpbMiwyN10sMTM5OlsyLDI3XSwxNDA6WzIsMjddLDE0MTpbMiwyN10sMTQyOlsyLDI3XSwxNDM6WzIsMjddLDE0NDpbMiwyN10sMTQ1OlsyLDI3XX0sezY6WzEsNzhdLDI5OlsxLDI2OV19LHsxOlsyLDIwMF0sNjpbMiwyMDBdLDI4OlsyLDIwMF0sMjk6WzIsMjAwXSw1MjpbMiwyMDBdLDU3OlsyLDIwMF0sNjA6WzIsMjAwXSw3NjpbMiwyMDBdLDgxOlsyLDIwMF0sOTA6WzIsMjAwXSw5NTpbMiwyMDBdLDk3OlsyLDIwMF0sMTA2OlsyLDIwMF0sMTA3Ojg5LDEwODpbMiwyMDBdLDEwOTpbMiwyMDBdLDExMDpbMiwyMDBdLDExMzo5MCwxMTQ6WzIsMjAwXSwxMTU6NzMsMTIyOlsyLDIwMF0sMTMwOlsyLDIwMF0sMTMzOlsyLDIwMF0sMTM0OlsyLDIwMF0sMTM5OlsxLDc5XSwxNDA6WzIsMjAwXSwxNDE6WzIsMjAwXSwxNDI6WzIsMjAwXSwxNDM6WzIsMjAwXSwxNDQ6WzIsMjAwXSwxNDU6WzIsMjAwXX0sezE6WzIsMjE0XSw2OlsyLDIxNF0sMjg6WzIsMjE0XSwyOTpbMiwyMTRdLDUyOlsyLDIxNF0sNTc6WzIsMjE0XSw2MDpbMiwyMTRdLDc2OlsyLDIxNF0sODE6WzIsMjE0XSw5MDpbMiwyMTRdLDk1OlsyLDIxNF0sOTc6WzIsMjE0XSwxMDY6WzIsMjE0XSwxMDc6ODksMTA4OlsyLDIxNF0sMTA5OlsyLDIxNF0sMTEwOlsyLDIxNF0sMTEzOjkwLDExNDpbMiwyMTRdLDExNTo3MywxMjI6WzIsMjE0XSwxMzA6WzIsMjE0XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezc6MjcwLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MjcxLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMjE3XSw2OlsyLDIxN10sMjg6WzIsMjE3XSwyOTpbMiwyMTddLDUyOlsyLDIxN10sNTc6WzIsMjE3XSw2MDpbMiwyMTddLDc2OlsyLDIxN10sODE6WzIsMjE3XSw5MDpbMiwyMTddLDk1OlsyLDIxN10sOTc6WzIsMjE3XSwxMDY6WzIsMjE3XSwxMDc6ODksMTA4OlsyLDIxN10sMTA5OlsyLDIxN10sMTEwOlsyLDIxN10sMTEzOjkwLDExNDpbMiwyMTddLDExNTo3MywxMjI6WzIsMjE3XSwxMzA6WzIsMjE3XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTkxXSw2OlsyLDE5MV0sMjg6WzIsMTkxXSwyOTpbMiwxOTFdLDUyOlsyLDE5MV0sNTc6WzIsMTkxXSw2MDpbMiwxOTFdLDc2OlsyLDE5MV0sODE6WzIsMTkxXSw5MDpbMiwxOTFdLDk1OlsyLDE5MV0sOTc6WzIsMTkxXSwxMDY6WzIsMTkxXSwxMDg6WzIsMTkxXSwxMDk6WzIsMTkxXSwxMTA6WzIsMTkxXSwxMTQ6WzIsMTkxXSwxMjI6WzIsMTkxXSwxMzA6WzIsMTkxXSwxMzM6WzIsMTkxXSwxMzQ6WzIsMTkxXSwxMzk6WzIsMTkxXSwxNDA6WzIsMTkxXSwxNDE6WzIsMTkxXSwxNDI6WzIsMTkxXSwxNDM6WzIsMTkxXSwxNDQ6WzIsMTkxXSwxNDU6WzIsMTkxXX0sezc6MjcyLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTQxXSw2OlsyLDE0MV0sMjg6WzIsMTQxXSwyOTpbMiwxNDFdLDUyOlsyLDE0MV0sNTc6WzIsMTQxXSw2MDpbMiwxNDFdLDc2OlsyLDE0MV0sODE6WzIsMTQxXSw5MDpbMiwxNDFdLDk1OlsyLDE0MV0sOTc6WzIsMTQxXSwxMDI6WzEsMjczXSwxMDY6WzIsMTQxXSwxMDg6WzIsMTQxXSwxMDk6WzIsMTQxXSwxMTA6WzIsMTQxXSwxMTQ6WzIsMTQxXSwxMjI6WzIsMTQxXSwxMzA6WzIsMTQxXSwxMzM6WzIsMTQxXSwxMzQ6WzIsMTQxXSwxMzk6WzIsMTQxXSwxNDA6WzIsMTQxXSwxNDE6WzIsMTQxXSwxNDI6WzIsMTQxXSwxNDM6WzIsMTQxXSwxNDQ6WzIsMTQxXSwxNDU6WzIsMTQxXX0sezE0OjI3NCwyODpbMSwxMjBdfSx7MTQ6Mjc3LDI4OlsxLDEyMF0sMzA6Mjc1LDMxOlsxLDc3XSw2MjoyNzYsNzk6WzEsNzRdfSx7MTI0OjI3OCwxMjY6MjM1LDEyNzpbMSwyMzZdfSx7Mjk6WzEsMjc5XSwxMjU6WzEsMjgwXSwxMjY6MjgxLDEyNzpbMSwyMzZdfSx7Mjk6WzIsMTg0XSwxMjU6WzIsMTg0XSwxMjc6WzIsMTg0XX0sezc6MjgzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk5OjI4MiwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDEwM10sNjpbMiwxMDNdLDE0OjI4NCwyODpbMSwxMjBdLDI5OlsyLDEwM10sNTI6WzIsMTAzXSw1NzpbMiwxMDNdLDYwOlsyLDEwM10sNzY6WzIsMTAzXSw4MTpbMiwxMDNdLDkwOlsyLDEwM10sOTU6WzIsMTAzXSw5NzpbMiwxMDNdLDEwNjpbMiwxMDNdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxMDNdLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEyMjpbMiwxMDNdLDEzMDpbMiwxMDNdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMDZdLDY6WzIsMTA2XSwyODpbMiwxMDZdLDI5OlsyLDEwNl0sNTI6WzIsMTA2XSw1NzpbMiwxMDZdLDYwOlsyLDEwNl0sNzY6WzIsMTA2XSw4MTpbMiwxMDZdLDkwOlsyLDEwNl0sOTU6WzIsMTA2XSw5NzpbMiwxMDZdLDEwNjpbMiwxMDZdLDEwODpbMiwxMDZdLDEwOTpbMiwxMDZdLDExMDpbMiwxMDZdLDExNDpbMiwxMDZdLDEyMjpbMiwxMDZdLDEzMDpbMiwxMDZdLDEzMzpbMiwxMDZdLDEzNDpbMiwxMDZdLDEzOTpbMiwxMDZdLDE0MDpbMiwxMDZdLDE0MTpbMiwxMDZdLDE0MjpbMiwxMDZdLDE0MzpbMiwxMDZdLDE0NDpbMiwxMDZdLDE0NTpbMiwxMDZdfSx7NzoyODUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxNDhdLDY6WzIsMTQ4XSwyODpbMiwxNDhdLDI5OlsyLDE0OF0sNTI6WzIsMTQ4XSw1NzpbMiwxNDhdLDYwOlsyLDE0OF0sNjk6WzIsMTQ4XSw3MDpbMiwxNDhdLDcxOlsyLDE0OF0sNzI6WzIsMTQ4XSw3NDpbMiwxNDhdLDc2OlsyLDE0OF0sNzc6WzIsMTQ4XSw4MTpbMiwxNDhdLDg4OlsyLDE0OF0sODk6WzIsMTQ4XSw5MDpbMiwxNDhdLDk1OlsyLDE0OF0sOTc6WzIsMTQ4XSwxMDY6WzIsMTQ4XSwxMDg6WzIsMTQ4XSwxMDk6WzIsMTQ4XSwxMTA6WzIsMTQ4XSwxMTQ6WzIsMTQ4XSwxMjI6WzIsMTQ4XSwxMzA6WzIsMTQ4XSwxMzM6WzIsMTQ4XSwxMzQ6WzIsMTQ4XSwxMzk6WzIsMTQ4XSwxNDA6WzIsMTQ4XSwxNDE6WzIsMTQ4XSwxNDI6WzIsMTQ4XSwxNDM6WzIsMTQ4XSwxNDQ6WzIsMTQ4XSwxNDU6WzIsMTQ4XX0sezY6WzEsNzhdLDI5OlsxLDI4Nl19LHs3OjI4Nyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDcxXSwxMTpbMiwxMjRdLDEzOlsyLDEyNF0sMjg6WzIsNzFdLDMxOlsyLDEyNF0sMzM6WzIsMTI0XSwzNDpbMiwxMjRdLDM2OlsyLDEyNF0sMzc6WzIsMTI0XSwzODpbMiwxMjRdLDM5OlsyLDEyNF0sNDA6WzIsMTI0XSw0MTpbMiwxMjRdLDQ4OlsyLDEyNF0sNDk6WzIsMTI0XSw1MDpbMiwxMjRdLDU0OlsyLDEyNF0sNTU6WzIsMTI0XSw1NzpbMiw3MV0sNzk6WzIsMTI0XSw4MjpbMiwxMjRdLDg2OlsyLDEyNF0sODc6WzIsMTI0XSw5MjpbMiwxMjRdLDkzOlsyLDEyNF0sOTQ6WzIsMTI0XSw5NTpbMiw3MV0sMTAwOlsyLDEyNF0sMTA0OlsyLDEyNF0sMTA1OlsyLDEyNF0sMTA4OlsyLDEyNF0sMTEwOlsyLDEyNF0sMTEyOlsyLDEyNF0sMTE0OlsyLDEyNF0sMTIzOlsyLDEyNF0sMTI5OlsyLDEyNF0sMTMxOlsyLDEyNF0sMTMyOlsyLDEyNF0sMTMzOlsyLDEyNF0sMTM0OlsyLDEyNF0sMTM1OlsyLDEyNF0sMTM3OlsyLDEyNF0sMTM4OlsyLDEyNF19LHs2OlsxLDI4OV0sMjg6WzEsMjkwXSw5NTpbMSwyODhdfSx7NjpbMiw1N10sNzoyMTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzIsNTddLDI5OlsyLDU3XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MDpbMiw1N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTU6WzIsNTddLDk4OjI5MSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDU2XSwyODpbMiw1Nl0sMjk6WzIsNTZdLDU2OjI5Miw1NzpbMSwyNDVdfSx7MTpbMiwxODhdLDY6WzIsMTg4XSwyODpbMiwxODhdLDI5OlsyLDE4OF0sNTI6WzIsMTg4XSw1NzpbMiwxODhdLDYwOlsyLDE4OF0sNzY6WzIsMTg4XSw4MTpbMiwxODhdLDkwOlsyLDE4OF0sOTU6WzIsMTg4XSw5NzpbMiwxODhdLDEwNjpbMiwxODhdLDEwODpbMiwxODhdLDEwOTpbMiwxODhdLDExMDpbMiwxODhdLDExNDpbMiwxODhdLDEyMjpbMiwxODhdLDEyNTpbMiwxODhdLDEzMDpbMiwxODhdLDEzMzpbMiwxODhdLDEzNDpbMiwxODhdLDEzOTpbMiwxODhdLDE0MDpbMiwxODhdLDE0MTpbMiwxODhdLDE0MjpbMiwxODhdLDE0MzpbMiwxODhdLDE0NDpbMiwxODhdLDE0NTpbMiwxODhdfSx7NzoyOTMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoyOTQsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTIwOlsyLDE2Nl0sMTIxOlsyLDE2Nl19LHszMDoxNzEsMzE6WzEsNzddLDQ3OjE3Miw2MToxNzMsNjI6MTc0LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDExOF0sMTE5OjI5NX0sezE6WzIsMTczXSw2OlsyLDE3M10sMjg6WzIsMTczXSwyOTpbMiwxNzNdLDUyOlsyLDE3M10sNTc6WzIsMTczXSw2MDpbMiwxNzNdLDc2OlsyLDE3M10sODE6WzIsMTczXSw5MDpbMiwxNzNdLDk1OlsyLDE3M10sOTc6WzIsMTczXSwxMDY6WzIsMTczXSwxMDc6ODksMTA4OlsyLDE3M10sMTA5OlsxLDI5Nl0sMTEwOlsyLDE3M10sMTEzOjkwLDExNDpbMiwxNzNdLDExNTo3MywxMjI6WzEsMjk3XSwxMzA6WzIsMTczXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTc0XSw2OlsyLDE3NF0sMjg6WzIsMTc0XSwyOTpbMiwxNzRdLDUyOlsyLDE3NF0sNTc6WzIsMTc0XSw2MDpbMiwxNzRdLDc2OlsyLDE3NF0sODE6WzIsMTc0XSw5MDpbMiwxNzRdLDk1OlsyLDE3NF0sOTc6WzIsMTc0XSwxMDY6WzIsMTc0XSwxMDc6ODksMTA4OlsyLDE3NF0sMTA5OlsxLDI5OF0sMTEwOlsyLDE3NF0sMTEzOjkwLDExNDpbMiwxNzRdLDExNTo3MywxMjI6WzIsMTc0XSwxMzA6WzIsMTc0XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzEsMzAwXSwyODpbMSwzMDFdLDgxOlsxLDI5OV19LHs2OlsyLDU3XSwxMDoxODEsMjg6WzIsNTddLDI5OlsyLDU3XSwzMDoxODIsMzE6WzEsNzddLDMyOjE4MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDQ0OjMwMiw0NToxODAsNDc6MTg0LDQ5OlsxLDQ5XSw4MTpbMiw1N10sOTM6WzEsMTE3XX0sezc6MzAzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDMwNF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiw5MV0sNjpbMiw5MV0sMjg6WzIsOTFdLDI5OlsyLDkxXSw0MzpbMiw5MV0sNTI6WzIsOTFdLDU3OlsyLDkxXSw2MDpbMiw5MV0sNjk6WzIsOTFdLDcwOlsyLDkxXSw3MTpbMiw5MV0sNzI6WzIsOTFdLDc0OlsyLDkxXSw3NjpbMiw5MV0sNzc6WzIsOTFdLDgxOlsyLDkxXSw4MzpbMiw5MV0sODg6WzIsOTFdLDg5OlsyLDkxXSw5MDpbMiw5MV0sOTU6WzIsOTFdLDk3OlsyLDkxXSwxMDY6WzIsOTFdLDEwODpbMiw5MV0sMTA5OlsyLDkxXSwxMTA6WzIsOTFdLDExNDpbMiw5MV0sMTIyOlsyLDkxXSwxMzA6WzIsOTFdLDEzMzpbMiw5MV0sMTM0OlsyLDkxXSwxMzc6WzIsOTFdLDEzODpbMiw5MV0sMTM5OlsyLDkxXSwxNDA6WzIsOTFdLDE0MTpbMiw5MV0sMTQyOlsyLDkxXSwxNDM6WzIsOTFdLDE0NDpbMiw5MV0sMTQ1OlsyLDkxXSwxNDY6WzIsOTFdfSx7NzozMDUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3NjpbMiwxMjddLDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3NjpbMiwxMjhdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDQwXSw2OlsyLDQwXSwyODpbMiw0MF0sMjk6WzIsNDBdLDUyOlsyLDQwXSw1NzpbMiw0MF0sNjA6WzIsNDBdLDc2OlsyLDQwXSw4MTpbMiw0MF0sOTA6WzIsNDBdLDk1OlsyLDQwXSw5NzpbMiw0MF0sMTA2OlsyLDQwXSwxMDc6ODksMTA4OlsyLDQwXSwxMDk6WzIsNDBdLDExMDpbMiw0MF0sMTEzOjkwLDExNDpbMiw0MF0sMTE1OjczLDEyMjpbMiw0MF0sMTMwOlsyLDQwXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezI5OlsxLDMwNl0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzEsMjg5XSwyODpbMSwyOTBdLDkwOlsxLDMwN119LHs2OlsyLDcxXSwyODpbMiw3MV0sMjk6WzIsNzFdLDU3OlsyLDcxXSw5MDpbMiw3MV0sOTU6WzIsNzFdfSx7MTQ6MzA4LDI4OlsxLDEyMF19LHs2OlsyLDYwXSwyODpbMiw2MF0sMjk6WzIsNjBdLDUyOlsyLDYwXSw1NzpbMiw2MF19LHszMDoxMTMsMzE6WzEsNzddLDQ3OjExNCw1ODozMDksNTk6MTExLDYwOlsxLDExMl0sNjE6MTE1LDYyOjExNiw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSwxMThdfSx7NjpbMiw1OF0sMjg6WzIsNThdLDI5OlsyLDU4XSwzMDoxMTMsMzE6WzEsNzddLDQ3OjExNCw1MTozMTAsNTc6WzIsNThdLDU4OjExMCw1OToxMTEsNjA6WzEsMTEyXSw2MToxMTUsNjI6MTE2LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDExOF19LHs2OlsyLDY1XSwyODpbMiw2NV0sMjk6WzIsNjVdLDUyOlsyLDY1XSw1NzpbMiw2NV0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMjhdLDY6WzIsMjhdLDI4OlsyLDI4XSwyOTpbMiwyOF0sNTI6WzIsMjhdLDU3OlsyLDI4XSw2MDpbMiwyOF0sNzY6WzIsMjhdLDgxOlsyLDI4XSw5MDpbMiwyOF0sOTU6WzIsMjhdLDk3OlsyLDI4XSwxMDI6WzIsMjhdLDEwMzpbMiwyOF0sMTA2OlsyLDI4XSwxMDg6WzIsMjhdLDEwOTpbMiwyOF0sMTEwOlsyLDI4XSwxMTQ6WzIsMjhdLDEyMjpbMiwyOF0sMTI1OlsyLDI4XSwxMjc6WzIsMjhdLDEzMDpbMiwyOF0sMTMzOlsyLDI4XSwxMzQ6WzIsMjhdLDEzOTpbMiwyOF0sMTQwOlsyLDI4XSwxNDE6WzIsMjhdLDE0MjpbMiwyOF0sMTQzOlsyLDI4XSwxNDQ6WzIsMjhdLDE0NTpbMiwyOF19LHsyOTpbMSwzMTFdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDIxNl0sNjpbMiwyMTZdLDI4OlsyLDIxNl0sMjk6WzIsMjE2XSw1MjpbMiwyMTZdLDU3OlsyLDIxNl0sNjA6WzIsMjE2XSw3NjpbMiwyMTZdLDgxOlsyLDIxNl0sOTA6WzIsMjE2XSw5NTpbMiwyMTZdLDk3OlsyLDIxNl0sMTA2OlsyLDIxNl0sMTA3Ojg5LDEwODpbMiwyMTZdLDEwOTpbMiwyMTZdLDExMDpbMiwyMTZdLDExMzo5MCwxMTQ6WzIsMjE2XSwxMTU6NzMsMTIyOlsyLDIxNl0sMTMwOlsyLDIxNl0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxNDozMTIsMjg6WzEsMTIwXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTQ6MzEzLDI4OlsxLDEyMF19LHsxOlsyLDE0Ml0sNjpbMiwxNDJdLDI4OlsyLDE0Ml0sMjk6WzIsMTQyXSw1MjpbMiwxNDJdLDU3OlsyLDE0Ml0sNjA6WzIsMTQyXSw3NjpbMiwxNDJdLDgxOlsyLDE0Ml0sOTA6WzIsMTQyXSw5NTpbMiwxNDJdLDk3OlsyLDE0Ml0sMTA2OlsyLDE0Ml0sMTA4OlsyLDE0Ml0sMTA5OlsyLDE0Ml0sMTEwOlsyLDE0Ml0sMTE0OlsyLDE0Ml0sMTIyOlsyLDE0Ml0sMTMwOlsyLDE0Ml0sMTMzOlsyLDE0Ml0sMTM0OlsyLDE0Ml0sMTM5OlsyLDE0Ml0sMTQwOlsyLDE0Ml0sMTQxOlsyLDE0Ml0sMTQyOlsyLDE0Ml0sMTQzOlsyLDE0Ml0sMTQ0OlsyLDE0Ml0sMTQ1OlsyLDE0Ml19LHsxNDozMTQsMjg6WzEsMTIwXX0sezE0OjMxNSwyODpbMSwxMjBdfSx7MTpbMiwxNDZdLDY6WzIsMTQ2XSwyODpbMiwxNDZdLDI5OlsyLDE0Nl0sNTI6WzIsMTQ2XSw1NzpbMiwxNDZdLDYwOlsyLDE0Nl0sNzY6WzIsMTQ2XSw4MTpbMiwxNDZdLDkwOlsyLDE0Nl0sOTU6WzIsMTQ2XSw5NzpbMiwxNDZdLDEwMjpbMiwxNDZdLDEwNjpbMiwxNDZdLDEwODpbMiwxNDZdLDEwOTpbMiwxNDZdLDExMDpbMiwxNDZdLDExNDpbMiwxNDZdLDEyMjpbMiwxNDZdLDEzMDpbMiwxNDZdLDEzMzpbMiwxNDZdLDEzNDpbMiwxNDZdLDEzOTpbMiwxNDZdLDE0MDpbMiwxNDZdLDE0MTpbMiwxNDZdLDE0MjpbMiwxNDZdLDE0MzpbMiwxNDZdLDE0NDpbMiwxNDZdLDE0NTpbMiwxNDZdfSx7Mjk6WzEsMzE2XSwxMjU6WzEsMzE3XSwxMjY6MjgxLDEyNzpbMSwyMzZdfSx7MTpbMiwxODJdLDY6WzIsMTgyXSwyODpbMiwxODJdLDI5OlsyLDE4Ml0sNTI6WzIsMTgyXSw1NzpbMiwxODJdLDYwOlsyLDE4Ml0sNzY6WzIsMTgyXSw4MTpbMiwxODJdLDkwOlsyLDE4Ml0sOTU6WzIsMTgyXSw5NzpbMiwxODJdLDEwNjpbMiwxODJdLDEwODpbMiwxODJdLDEwOTpbMiwxODJdLDExMDpbMiwxODJdLDExNDpbMiwxODJdLDEyMjpbMiwxODJdLDEzMDpbMiwxODJdLDEzMzpbMiwxODJdLDEzNDpbMiwxODJdLDEzOTpbMiwxODJdLDE0MDpbMiwxODJdLDE0MTpbMiwxODJdLDE0MjpbMiwxODJdLDE0MzpbMiwxODJdLDE0NDpbMiwxODJdLDE0NTpbMiwxODJdfSx7MTQ6MzE4LDI4OlsxLDEyMF19LHsyOTpbMiwxODVdLDEyNTpbMiwxODVdLDEyNzpbMiwxODVdfSx7MTQ6MzE5LDI4OlsxLDEyMF0sNTc6WzEsMzIwXX0sezI4OlsyLDEzOF0sNTc6WzIsMTM4XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMDRdLDY6WzIsMTA0XSwyODpbMiwxMDRdLDI5OlsyLDEwNF0sNTI6WzIsMTA0XSw1NzpbMiwxMDRdLDYwOlsyLDEwNF0sNzY6WzIsMTA0XSw4MTpbMiwxMDRdLDkwOlsyLDEwNF0sOTU6WzIsMTA0XSw5NzpbMiwxMDRdLDEwNjpbMiwxMDRdLDEwODpbMiwxMDRdLDEwOTpbMiwxMDRdLDExMDpbMiwxMDRdLDExNDpbMiwxMDRdLDEyMjpbMiwxMDRdLDEzMDpbMiwxMDRdLDEzMzpbMiwxMDRdLDEzNDpbMiwxMDRdLDEzOTpbMiwxMDRdLDE0MDpbMiwxMDRdLDE0MTpbMiwxMDRdLDE0MjpbMiwxMDRdLDE0MzpbMiwxMDRdLDE0NDpbMiwxMDRdLDE0NTpbMiwxMDRdfSx7MTpbMiwxMDddLDY6WzIsMTA3XSwxNDozMjEsMjg6WzEsMTIwXSwyOTpbMiwxMDddLDUyOlsyLDEwN10sNTc6WzIsMTA3XSw2MDpbMiwxMDddLDc2OlsyLDEwN10sODE6WzIsMTA3XSw5MDpbMiwxMDddLDk1OlsyLDEwN10sOTc6WzIsMTA3XSwxMDY6WzIsMTA3XSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTA3XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTA3XSwxMzA6WzIsMTA3XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezEwNjpbMSwzMjJdfSx7OTU6WzEsMzIzXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMjJdLDY6WzIsMTIyXSwyODpbMiwxMjJdLDI5OlsyLDEyMl0sNDM6WzIsMTIyXSw1MjpbMiwxMjJdLDU3OlsyLDEyMl0sNjA6WzIsMTIyXSw2OTpbMiwxMjJdLDcwOlsyLDEyMl0sNzE6WzIsMTIyXSw3MjpbMiwxMjJdLDc0OlsyLDEyMl0sNzY6WzIsMTIyXSw3NzpbMiwxMjJdLDgxOlsyLDEyMl0sODg6WzIsMTIyXSw4OTpbMiwxMjJdLDkwOlsyLDEyMl0sOTU6WzIsMTIyXSw5NzpbMiwxMjJdLDEwNjpbMiwxMjJdLDEwODpbMiwxMjJdLDEwOTpbMiwxMjJdLDExMDpbMiwxMjJdLDExNDpbMiwxMjJdLDEyMDpbMiwxMjJdLDEyMTpbMiwxMjJdLDEyMjpbMiwxMjJdLDEzMDpbMiwxMjJdLDEzMzpbMiwxMjJdLDEzNDpbMiwxMjJdLDEzOTpbMiwxMjJdLDE0MDpbMiwxMjJdLDE0MTpbMiwxMjJdLDE0MjpbMiwxMjJdLDE0MzpbMiwxMjJdLDE0NDpbMiwxMjJdLDE0NTpbMiwxMjJdfSx7NzoyMTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTg6MzI0LDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MjE1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDE1OF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTE6MzI1LDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk4OjE1NywxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDEzMV0sMjg6WzIsMTMxXSwyOTpbMiwxMzFdLDU3OlsyLDEzMV0sOTA6WzIsMTMxXSw5NTpbMiwxMzFdfSx7NjpbMSwyODldLDI4OlsxLDI5MF0sMjk6WzEsMzI2XX0sezE6WzIsMTUxXSw2OlsyLDE1MV0sMjg6WzIsMTUxXSwyOTpbMiwxNTFdLDUyOlsyLDE1MV0sNTc6WzIsMTUxXSw2MDpbMiwxNTFdLDc2OlsyLDE1MV0sODE6WzIsMTUxXSw5MDpbMiwxNTFdLDk1OlsyLDE1MV0sOTc6WzIsMTUxXSwxMDY6WzIsMTUxXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTUxXSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTUxXSwxMzA6WzIsMTUxXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTUzXSw2OlsyLDE1M10sMjg6WzIsMTUzXSwyOTpbMiwxNTNdLDUyOlsyLDE1M10sNTc6WzIsMTUzXSw2MDpbMiwxNTNdLDc2OlsyLDE1M10sODE6WzIsMTUzXSw5MDpbMiwxNTNdLDk1OlsyLDE1M10sOTc6WzIsMTUzXSwxMDY6WzIsMTUzXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTUzXSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTUzXSwxMzA6WzIsMTUzXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezEyMDpbMiwxNzJdLDEyMTpbMiwxNzJdfSx7NzozMjcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzozMjgsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzozMjksODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiw5NV0sNjpbMiw5NV0sMjg6WzIsOTVdLDI5OlsyLDk1XSw0MzpbMiw5NV0sNTI6WzIsOTVdLDU3OlsyLDk1XSw2MDpbMiw5NV0sNjk6WzIsOTVdLDcwOlsyLDk1XSw3MTpbMiw5NV0sNzI6WzIsOTVdLDc0OlsyLDk1XSw3NjpbMiw5NV0sNzc6WzIsOTVdLDgxOlsyLDk1XSw4ODpbMiw5NV0sODk6WzIsOTVdLDkwOlsyLDk1XSw5NTpbMiw5NV0sOTc6WzIsOTVdLDEwNjpbMiw5NV0sMTA4OlsyLDk1XSwxMDk6WzIsOTVdLDExMDpbMiw5NV0sMTE0OlsyLDk1XSwxMjA6WzIsOTVdLDEyMTpbMiw5NV0sMTIyOlsyLDk1XSwxMzA6WzIsOTVdLDEzMzpbMiw5NV0sMTM0OlsyLDk1XSwxMzk6WzIsOTVdLDE0MDpbMiw5NV0sMTQxOlsyLDk1XSwxNDI6WzIsOTVdLDE0MzpbMiw5NV0sMTQ0OlsyLDk1XSwxNDU6WzIsOTVdfSx7MTA6MTgxLDMwOjE4MiwzMTpbMSw3N10sMzI6MTgzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sNDQ6MzMwLDQ1OjE4MCw0NzoxODQsNDk6WzEsNDldLDkzOlsxLDExN119LHs2OlsyLDk2XSwxMDoxODEsMjg6WzIsOTZdLDI5OlsyLDk2XSwzMDoxODIsMzE6WzEsNzddLDMyOjE4MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDQ0OjE3OSw0NToxODAsNDc6MTg0LDQ5OlsxLDQ5XSw1NzpbMiw5Nl0sODA6MzMxLDkzOlsxLDExN119LHs2OlsyLDk4XSwyODpbMiw5OF0sMjk6WzIsOThdLDU3OlsyLDk4XSw4MTpbMiw5OF19LHs2OlsyLDQzXSwyODpbMiw0M10sMjk6WzIsNDNdLDU3OlsyLDQzXSw4MTpbMiw0M10sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezc6MzMyLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc2OlsyLDEyNl0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsNDFdLDY6WzIsNDFdLDI4OlsyLDQxXSwyOTpbMiw0MV0sNTI6WzIsNDFdLDU3OlsyLDQxXSw2MDpbMiw0MV0sNzY6WzIsNDFdLDgxOlsyLDQxXSw5MDpbMiw0MV0sOTU6WzIsNDFdLDk3OlsyLDQxXSwxMDY6WzIsNDFdLDEwODpbMiw0MV0sMTA5OlsyLDQxXSwxMTA6WzIsNDFdLDExNDpbMiw0MV0sMTIyOlsyLDQxXSwxMzA6WzIsNDFdLDEzMzpbMiw0MV0sMTM0OlsyLDQxXSwxMzk6WzIsNDFdLDE0MDpbMiw0MV0sMTQxOlsyLDQxXSwxNDI6WzIsNDFdLDE0MzpbMiw0MV0sMTQ0OlsyLDQxXSwxNDU6WzIsNDFdfSx7MTpbMiwxMTddLDY6WzIsMTE3XSwyODpbMiwxMTddLDI5OlsyLDExN10sNDM6WzIsMTE3XSw1MjpbMiwxMTddLDU3OlsyLDExN10sNjA6WzIsMTE3XSw2OTpbMiwxMTddLDcwOlsyLDExN10sNzE6WzIsMTE3XSw3MjpbMiwxMTddLDc0OlsyLDExN10sNzY6WzIsMTE3XSw3NzpbMiwxMTddLDgxOlsyLDExN10sODM6WzIsMTE3XSw4ODpbMiwxMTddLDg5OlsyLDExN10sOTA6WzIsMTE3XSw5NTpbMiwxMTddLDk3OlsyLDExN10sMTA2OlsyLDExN10sMTA4OlsyLDExN10sMTA5OlsyLDExN10sMTEwOlsyLDExN10sMTE0OlsyLDExN10sMTIyOlsyLDExN10sMTMwOlsyLDExN10sMTMzOlsyLDExN10sMTM0OlsyLDExN10sMTM3OlsyLDExN10sMTM4OlsyLDExN10sMTM5OlsyLDExN10sMTQwOlsyLDExN10sMTQxOlsyLDExN10sMTQyOlsyLDExN10sMTQzOlsyLDExN10sMTQ0OlsyLDExN10sMTQ1OlsyLDExN10sMTQ2OlsyLDExN119LHsxOlsyLDUyXSw2OlsyLDUyXSwyODpbMiw1Ml0sMjk6WzIsNTJdLDUyOlsyLDUyXSw1NzpbMiw1Ml0sNjA6WzIsNTJdLDc2OlsyLDUyXSw4MTpbMiw1Ml0sOTA6WzIsNTJdLDk1OlsyLDUyXSw5NzpbMiw1Ml0sMTA2OlsyLDUyXSwxMDg6WzIsNTJdLDEwOTpbMiw1Ml0sMTEwOlsyLDUyXSwxMTQ6WzIsNTJdLDEyMjpbMiw1Ml0sMTMwOlsyLDUyXSwxMzM6WzIsNTJdLDEzNDpbMiw1Ml0sMTM5OlsyLDUyXSwxNDA6WzIsNTJdLDE0MTpbMiw1Ml0sMTQyOlsyLDUyXSwxNDM6WzIsNTJdLDE0NDpbMiw1Ml0sMTQ1OlsyLDUyXX0sezY6WzIsNjFdLDI4OlsyLDYxXSwyOTpbMiw2MV0sNTI6WzIsNjFdLDU3OlsyLDYxXX0sezY6WzIsNTZdLDI4OlsyLDU2XSwyOTpbMiw1Nl0sNTY6MzMzLDU3OlsxLDIxN119LHsxOlsyLDIxNV0sNjpbMiwyMTVdLDI4OlsyLDIxNV0sMjk6WzIsMjE1XSw1MjpbMiwyMTVdLDU3OlsyLDIxNV0sNjA6WzIsMjE1XSw3NjpbMiwyMTVdLDgxOlsyLDIxNV0sOTA6WzIsMjE1XSw5NTpbMiwyMTVdLDk3OlsyLDIxNV0sMTA2OlsyLDIxNV0sMTA4OlsyLDIxNV0sMTA5OlsyLDIxNV0sMTEwOlsyLDIxNV0sMTE0OlsyLDIxNV0sMTIyOlsyLDIxNV0sMTMwOlsyLDIxNV0sMTMzOlsyLDIxNV0sMTM0OlsyLDIxNV0sMTM5OlsyLDIxNV0sMTQwOlsyLDIxNV0sMTQxOlsyLDIxNV0sMTQyOlsyLDIxNV0sMTQzOlsyLDIxNV0sMTQ0OlsyLDIxNV0sMTQ1OlsyLDIxNV19LHsxOlsyLDE4OV0sNjpbMiwxODldLDI4OlsyLDE4OV0sMjk6WzIsMTg5XSw1MjpbMiwxODldLDU3OlsyLDE4OV0sNjA6WzIsMTg5XSw3NjpbMiwxODldLDgxOlsyLDE4OV0sOTA6WzIsMTg5XSw5NTpbMiwxODldLDk3OlsyLDE4OV0sMTA2OlsyLDE4OV0sMTA4OlsyLDE4OV0sMTA5OlsyLDE4OV0sMTEwOlsyLDE4OV0sMTE0OlsyLDE4OV0sMTIyOlsyLDE4OV0sMTI1OlsyLDE4OV0sMTMwOlsyLDE4OV0sMTMzOlsyLDE4OV0sMTM0OlsyLDE4OV0sMTM5OlsyLDE4OV0sMTQwOlsyLDE4OV0sMTQxOlsyLDE4OV0sMTQyOlsyLDE4OV0sMTQzOlsyLDE4OV0sMTQ0OlsyLDE4OV0sMTQ1OlsyLDE4OV19LHsxOlsyLDE0M10sNjpbMiwxNDNdLDI4OlsyLDE0M10sMjk6WzIsMTQzXSw1MjpbMiwxNDNdLDU3OlsyLDE0M10sNjA6WzIsMTQzXSw3NjpbMiwxNDNdLDgxOlsyLDE0M10sOTA6WzIsMTQzXSw5NTpbMiwxNDNdLDk3OlsyLDE0M10sMTA2OlsyLDE0M10sMTA4OlsyLDE0M10sMTA5OlsyLDE0M10sMTEwOlsyLDE0M10sMTE0OlsyLDE0M10sMTIyOlsyLDE0M10sMTMwOlsyLDE0M10sMTMzOlsyLDE0M10sMTM0OlsyLDE0M10sMTM5OlsyLDE0M10sMTQwOlsyLDE0M10sMTQxOlsyLDE0M10sMTQyOlsyLDE0M10sMTQzOlsyLDE0M10sMTQ0OlsyLDE0M10sMTQ1OlsyLDE0M119LHsxOlsyLDE0NF0sNjpbMiwxNDRdLDI4OlsyLDE0NF0sMjk6WzIsMTQ0XSw1MjpbMiwxNDRdLDU3OlsyLDE0NF0sNjA6WzIsMTQ0XSw3NjpbMiwxNDRdLDgxOlsyLDE0NF0sOTA6WzIsMTQ0XSw5NTpbMiwxNDRdLDk3OlsyLDE0NF0sMTAyOlsyLDE0NF0sMTA2OlsyLDE0NF0sMTA4OlsyLDE0NF0sMTA5OlsyLDE0NF0sMTEwOlsyLDE0NF0sMTE0OlsyLDE0NF0sMTIyOlsyLDE0NF0sMTMwOlsyLDE0NF0sMTMzOlsyLDE0NF0sMTM0OlsyLDE0NF0sMTM5OlsyLDE0NF0sMTQwOlsyLDE0NF0sMTQxOlsyLDE0NF0sMTQyOlsyLDE0NF0sMTQzOlsyLDE0NF0sMTQ0OlsyLDE0NF0sMTQ1OlsyLDE0NF19LHsxOlsyLDE0NV0sNjpbMiwxNDVdLDI4OlsyLDE0NV0sMjk6WzIsMTQ1XSw1MjpbMiwxNDVdLDU3OlsyLDE0NV0sNjA6WzIsMTQ1XSw3NjpbMiwxNDVdLDgxOlsyLDE0NV0sOTA6WzIsMTQ1XSw5NTpbMiwxNDVdLDk3OlsyLDE0NV0sMTAyOlsyLDE0NV0sMTA2OlsyLDE0NV0sMTA4OlsyLDE0NV0sMTA5OlsyLDE0NV0sMTEwOlsyLDE0NV0sMTE0OlsyLDE0NV0sMTIyOlsyLDE0NV0sMTMwOlsyLDE0NV0sMTMzOlsyLDE0NV0sMTM0OlsyLDE0NV0sMTM5OlsyLDE0NV0sMTQwOlsyLDE0NV0sMTQxOlsyLDE0NV0sMTQyOlsyLDE0NV0sMTQzOlsyLDE0NV0sMTQ0OlsyLDE0NV0sMTQ1OlsyLDE0NV19LHsxOlsyLDE4MF0sNjpbMiwxODBdLDI4OlsyLDE4MF0sMjk6WzIsMTgwXSw1MjpbMiwxODBdLDU3OlsyLDE4MF0sNjA6WzIsMTgwXSw3NjpbMiwxODBdLDgxOlsyLDE4MF0sOTA6WzIsMTgwXSw5NTpbMiwxODBdLDk3OlsyLDE4MF0sMTA2OlsyLDE4MF0sMTA4OlsyLDE4MF0sMTA5OlsyLDE4MF0sMTEwOlsyLDE4MF0sMTE0OlsyLDE4MF0sMTIyOlsyLDE4MF0sMTMwOlsyLDE4MF0sMTMzOlsyLDE4MF0sMTM0OlsyLDE4MF0sMTM5OlsyLDE4MF0sMTQwOlsyLDE4MF0sMTQxOlsyLDE4MF0sMTQyOlsyLDE4MF0sMTQzOlsyLDE4MF0sMTQ0OlsyLDE4MF0sMTQ1OlsyLDE4MF19LHsxNDozMzQsMjg6WzEsMTIwXX0sezI5OlsxLDMzNV19LHs2OlsxLDMzNl0sMjk6WzIsMTg2XSwxMjU6WzIsMTg2XSwxMjc6WzIsMTg2XX0sezc6MzM3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTA4XSw2OlsyLDEwOF0sMjg6WzIsMTA4XSwyOTpbMiwxMDhdLDUyOlsyLDEwOF0sNTc6WzIsMTA4XSw2MDpbMiwxMDhdLDc2OlsyLDEwOF0sODE6WzIsMTA4XSw5MDpbMiwxMDhdLDk1OlsyLDEwOF0sOTc6WzIsMTA4XSwxMDY6WzIsMTA4XSwxMDg6WzIsMTA4XSwxMDk6WzIsMTA4XSwxMTA6WzIsMTA4XSwxMTQ6WzIsMTA4XSwxMjI6WzIsMTA4XSwxMzA6WzIsMTA4XSwxMzM6WzIsMTA4XSwxMzQ6WzIsMTA4XSwxMzk6WzIsMTA4XSwxNDA6WzIsMTA4XSwxNDE6WzIsMTA4XSwxNDI6WzIsMTA4XSwxNDM6WzIsMTA4XSwxNDQ6WzIsMTA4XSwxNDU6WzIsMTA4XX0sezE6WzIsMTQ5XSw2OlsyLDE0OV0sMjg6WzIsMTQ5XSwyOTpbMiwxNDldLDUyOlsyLDE0OV0sNTc6WzIsMTQ5XSw2MDpbMiwxNDldLDY5OlsyLDE0OV0sNzA6WzIsMTQ5XSw3MTpbMiwxNDldLDcyOlsyLDE0OV0sNzQ6WzIsMTQ5XSw3NjpbMiwxNDldLDc3OlsyLDE0OV0sODE6WzIsMTQ5XSw4ODpbMiwxNDldLDg5OlsyLDE0OV0sOTA6WzIsMTQ5XSw5NTpbMiwxNDldLDk3OlsyLDE0OV0sMTA2OlsyLDE0OV0sMTA4OlsyLDE0OV0sMTA5OlsyLDE0OV0sMTEwOlsyLDE0OV0sMTE0OlsyLDE0OV0sMTIyOlsyLDE0OV0sMTMwOlsyLDE0OV0sMTMzOlsyLDE0OV0sMTM0OlsyLDE0OV0sMTM5OlsyLDE0OV0sMTQwOlsyLDE0OV0sMTQxOlsyLDE0OV0sMTQyOlsyLDE0OV0sMTQzOlsyLDE0OV0sMTQ0OlsyLDE0OV0sMTQ1OlsyLDE0OV19LHsxOlsyLDEyNV0sNjpbMiwxMjVdLDI4OlsyLDEyNV0sMjk6WzIsMTI1XSw1MjpbMiwxMjVdLDU3OlsyLDEyNV0sNjA6WzIsMTI1XSw2OTpbMiwxMjVdLDcwOlsyLDEyNV0sNzE6WzIsMTI1XSw3MjpbMiwxMjVdLDc0OlsyLDEyNV0sNzY6WzIsMTI1XSw3NzpbMiwxMjVdLDgxOlsyLDEyNV0sODg6WzIsMTI1XSw4OTpbMiwxMjVdLDkwOlsyLDEyNV0sOTU6WzIsMTI1XSw5NzpbMiwxMjVdLDEwNjpbMiwxMjVdLDEwODpbMiwxMjVdLDEwOTpbMiwxMjVdLDExMDpbMiwxMjVdLDExNDpbMiwxMjVdLDEyMjpbMiwxMjVdLDEzMDpbMiwxMjVdLDEzMzpbMiwxMjVdLDEzNDpbMiwxMjVdLDEzOTpbMiwxMjVdLDE0MDpbMiwxMjVdLDE0MTpbMiwxMjVdLDE0MjpbMiwxMjVdLDE0MzpbMiwxMjVdLDE0NDpbMiwxMjVdLDE0NTpbMiwxMjVdfSx7NjpbMiwxMzJdLDI4OlsyLDEzMl0sMjk6WzIsMTMyXSw1NzpbMiwxMzJdLDkwOlsyLDEzMl0sOTU6WzIsMTMyXX0sezY6WzIsNTZdLDI4OlsyLDU2XSwyOTpbMiw1Nl0sNTY6MzM4LDU3OlsxLDI0NV19LHs2OlsyLDEzM10sMjg6WzIsMTMzXSwyOTpbMiwxMzNdLDU3OlsyLDEzM10sOTA6WzIsMTMzXSw5NTpbMiwxMzNdfSx7MTpbMiwxNzVdLDY6WzIsMTc1XSwyODpbMiwxNzVdLDI5OlsyLDE3NV0sNTI6WzIsMTc1XSw1NzpbMiwxNzVdLDYwOlsyLDE3NV0sNzY6WzIsMTc1XSw4MTpbMiwxNzVdLDkwOlsyLDE3NV0sOTU6WzIsMTc1XSw5NzpbMiwxNzVdLDEwNjpbMiwxNzVdLDEwNzo4OSwxMDg6WzIsMTc1XSwxMDk6WzIsMTc1XSwxMTA6WzIsMTc1XSwxMTM6OTAsMTE0OlsyLDE3NV0sMTE1OjczLDEyMjpbMSwzMzldLDEzMDpbMiwxNzVdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNzddLDY6WzIsMTc3XSwyODpbMiwxNzddLDI5OlsyLDE3N10sNTI6WzIsMTc3XSw1NzpbMiwxNzddLDYwOlsyLDE3N10sNzY6WzIsMTc3XSw4MTpbMiwxNzddLDkwOlsyLDE3N10sOTU6WzIsMTc3XSw5NzpbMiwxNzddLDEwNjpbMiwxNzddLDEwNzo4OSwxMDg6WzIsMTc3XSwxMDk6WzEsMzQwXSwxMTA6WzIsMTc3XSwxMTM6OTAsMTE0OlsyLDE3N10sMTE1OjczLDEyMjpbMiwxNzddLDEzMDpbMiwxNzddLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNzZdLDY6WzIsMTc2XSwyODpbMiwxNzZdLDI5OlsyLDE3Nl0sNTI6WzIsMTc2XSw1NzpbMiwxNzZdLDYwOlsyLDE3Nl0sNzY6WzIsMTc2XSw4MTpbMiwxNzZdLDkwOlsyLDE3Nl0sOTU6WzIsMTc2XSw5NzpbMiwxNzZdLDEwNjpbMiwxNzZdLDEwNzo4OSwxMDg6WzIsMTc2XSwxMDk6WzIsMTc2XSwxMTA6WzIsMTc2XSwxMTM6OTAsMTE0OlsyLDE3Nl0sMTE1OjczLDEyMjpbMiwxNzZdLDEzMDpbMiwxNzZdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMiw5OV0sMjg6WzIsOTldLDI5OlsyLDk5XSw1NzpbMiw5OV0sODE6WzIsOTldfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDI5OlsyLDU2XSw1NjozNDEsNTc6WzEsMjU1XX0sezI5OlsxLDM0Ml0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzEsMjY2XSwyODpbMSwyNjddLDI5OlsxLDM0M119LHsyOTpbMSwzNDRdfSx7MTpbMiwxODNdLDY6WzIsMTgzXSwyODpbMiwxODNdLDI5OlsyLDE4M10sNTI6WzIsMTgzXSw1NzpbMiwxODNdLDYwOlsyLDE4M10sNzY6WzIsMTgzXSw4MTpbMiwxODNdLDkwOlsyLDE4M10sOTU6WzIsMTgzXSw5NzpbMiwxODNdLDEwNjpbMiwxODNdLDEwODpbMiwxODNdLDEwOTpbMiwxODNdLDExMDpbMiwxODNdLDExNDpbMiwxODNdLDEyMjpbMiwxODNdLDEzMDpbMiwxODNdLDEzMzpbMiwxODNdLDEzNDpbMiwxODNdLDEzOTpbMiwxODNdLDE0MDpbMiwxODNdLDE0MTpbMiwxODNdLDE0MjpbMiwxODNdLDE0MzpbMiwxODNdLDE0NDpbMiwxODNdLDE0NTpbMiwxODNdfSx7Mjk6WzIsMTg3XSwxMjU6WzIsMTg3XSwxMjc6WzIsMTg3XX0sezI4OlsyLDEzOV0sNTc6WzIsMTM5XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMSwyODldLDI4OlsxLDI5MF0sMjk6WzEsMzQ1XX0sezc6MzQ2LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MzQ3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezY6WzEsMzAwXSwyODpbMSwzMDFdLDI5OlsxLDM0OF19LHs2OlsyLDQ0XSwyODpbMiw0NF0sMjk6WzIsNDRdLDU3OlsyLDQ0XSw4MTpbMiw0NF19LHs2OlsyLDYyXSwyODpbMiw2Ml0sMjk6WzIsNjJdLDUyOlsyLDYyXSw1NzpbMiw2Ml19LHsxOlsyLDE4MV0sNjpbMiwxODFdLDI4OlsyLDE4MV0sMjk6WzIsMTgxXSw1MjpbMiwxODFdLDU3OlsyLDE4MV0sNjA6WzIsMTgxXSw3NjpbMiwxODFdLDgxOlsyLDE4MV0sOTA6WzIsMTgxXSw5NTpbMiwxODFdLDk3OlsyLDE4MV0sMTA2OlsyLDE4MV0sMTA4OlsyLDE4MV0sMTA5OlsyLDE4MV0sMTEwOlsyLDE4MV0sMTE0OlsyLDE4MV0sMTIyOlsyLDE4MV0sMTMwOlsyLDE4MV0sMTMzOlsyLDE4MV0sMTM0OlsyLDE4MV0sMTM5OlsyLDE4MV0sMTQwOlsyLDE4MV0sMTQxOlsyLDE4MV0sMTQyOlsyLDE4MV0sMTQzOlsyLDE4MV0sMTQ0OlsyLDE4MV0sMTQ1OlsyLDE4MV19LHs2OlsyLDEzNF0sMjg6WzIsMTM0XSwyOTpbMiwxMzRdLDU3OlsyLDEzNF0sOTA6WzIsMTM0XSw5NTpbMiwxMzRdfSx7MTpbMiwxNzhdLDY6WzIsMTc4XSwyODpbMiwxNzhdLDI5OlsyLDE3OF0sNTI6WzIsMTc4XSw1NzpbMiwxNzhdLDYwOlsyLDE3OF0sNzY6WzIsMTc4XSw4MTpbMiwxNzhdLDkwOlsyLDE3OF0sOTU6WzIsMTc4XSw5NzpbMiwxNzhdLDEwNjpbMiwxNzhdLDEwNzo4OSwxMDg6WzIsMTc4XSwxMDk6WzIsMTc4XSwxMTA6WzIsMTc4XSwxMTM6OTAsMTE0OlsyLDE3OF0sMTE1OjczLDEyMjpbMiwxNzhdLDEzMDpbMiwxNzhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxNzldLDY6WzIsMTc5XSwyODpbMiwxNzldLDI5OlsyLDE3OV0sNTI6WzIsMTc5XSw1NzpbMiwxNzldLDYwOlsyLDE3OV0sNzY6WzIsMTc5XSw4MTpbMiwxNzldLDkwOlsyLDE3OV0sOTU6WzIsMTc5XSw5NzpbMiwxNzldLDEwNjpbMiwxNzldLDEwNzo4OSwxMDg6WzIsMTc5XSwxMDk6WzIsMTc5XSwxMTA6WzIsMTc5XSwxMTM6OTAsMTE0OlsyLDE3OV0sMTE1OjczLDEyMjpbMiwxNzldLDEzMDpbMiwxNzldLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMiwxMDBdLDI4OlsyLDEwMF0sMjk6WzIsMTAwXSw1NzpbMiwxMDBdLDgxOlsyLDEwMF19XSxcbmRlZmF1bHRBY3Rpb25zOiB7NjQ6WzIsNTRdLDY1OlsyLDU1XSw5NjpbMiwxMTVdLDIwNDpbMiw5NF19LFxucGFyc2VFcnJvcjogZnVuY3Rpb24gcGFyc2VFcnJvcihzdHIsIGhhc2gpIHtcbiAgICBpZiAoaGFzaC5yZWNvdmVyYWJsZSkge1xuICAgICAgICB0aGlzLnRyYWNlKHN0cik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHN0cik7XG4gICAgfVxufSxcbnBhcnNlOiBmdW5jdGlvbiBwYXJzZShpbnB1dCkge1xuICAgIHZhciBzZWxmID0gdGhpcywgc3RhY2sgPSBbMF0sIHZzdGFjayA9IFtudWxsXSwgbHN0YWNrID0gW10sIHRhYmxlID0gdGhpcy50YWJsZSwgeXl0ZXh0ID0gJycsIHl5bGluZW5vID0gMCwgeXlsZW5nID0gMCwgcmVjb3ZlcmluZyA9IDAsIFRFUlJPUiA9IDIsIEVPRiA9IDE7XG4gICAgdmFyIGFyZ3MgPSBsc3RhY2suc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHRoaXMubGV4ZXIuc2V0SW5wdXQoaW5wdXQpO1xuICAgIHRoaXMubGV4ZXIueXkgPSB0aGlzLnl5O1xuICAgIHRoaXMueXkubGV4ZXIgPSB0aGlzLmxleGVyO1xuICAgIHRoaXMueXkucGFyc2VyID0gdGhpcztcbiAgICBpZiAodHlwZW9mIHRoaXMubGV4ZXIueXlsbG9jID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMubGV4ZXIueXlsbG9jID0ge307XG4gICAgfVxuICAgIHZhciB5eWxvYyA9IHRoaXMubGV4ZXIueXlsbG9jO1xuICAgIGxzdGFjay5wdXNoKHl5bG9jKTtcbiAgICB2YXIgcmFuZ2VzID0gdGhpcy5sZXhlci5vcHRpb25zICYmIHRoaXMubGV4ZXIub3B0aW9ucy5yYW5nZXM7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnl5LnBhcnNlRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9yID0gdGhpcy55eS5wYXJzZUVycm9yO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGFyc2VFcnJvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5wYXJzZUVycm9yO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3BTdGFjayhuKSB7XG4gICAgICAgIHN0YWNrLmxlbmd0aCA9IHN0YWNrLmxlbmd0aCAtIDIgKiBuO1xuICAgICAgICB2c3RhY2subGVuZ3RoID0gdnN0YWNrLmxlbmd0aCAtIG47XG4gICAgICAgIGxzdGFjay5sZW5ndGggPSBsc3RhY2subGVuZ3RoIC0gbjtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGV4KCkge1xuICAgICAgICB2YXIgdG9rZW47XG4gICAgICAgIHRva2VuID0gc2VsZi5sZXhlci5sZXgoKSB8fCBFT0Y7XG4gICAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0b2tlbiA9IHNlbGYuc3ltYm9sc19bdG9rZW5dIHx8IHRva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gICAgdmFyIHN5bWJvbCwgcHJlRXJyb3JTeW1ib2wsIHN0YXRlLCBhY3Rpb24sIGEsIHIsIHl5dmFsID0ge30sIHAsIGxlbiwgbmV3U3RhdGUsIGV4cGVjdGVkO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRBY3Rpb25zW3N0YXRlXSkge1xuICAgICAgICAgICAgYWN0aW9uID0gdGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3ltYm9sID09PSBudWxsIHx8IHR5cGVvZiBzeW1ib2wgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzeW1ib2wgPSBsZXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGlvbiA9IHRhYmxlW3N0YXRlXSAmJiB0YWJsZVtzdGF0ZV1bc3ltYm9sXTtcbiAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHwgIWFjdGlvbi5sZW5ndGggfHwgIWFjdGlvblswXSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJTdHIgPSAnJztcbiAgICAgICAgICAgICAgICBleHBlY3RlZCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAocCBpbiB0YWJsZVtzdGF0ZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGVybWluYWxzX1twXSAmJiBwID4gVEVSUk9SKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZC5wdXNoKCdcXCcnICsgdGhpcy50ZXJtaW5hbHNfW3BdICsgJ1xcJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxleGVyLnNob3dQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAnUGFyc2UgZXJyb3Igb24gbGluZSAnICsgKHl5bGluZW5vICsgMSkgKyAnOlxcbicgKyB0aGlzLmxleGVyLnNob3dQb3NpdGlvbigpICsgJ1xcbkV4cGVjdGluZyAnICsgZXhwZWN0ZWQuam9pbignLCAnKSArICcsIGdvdCBcXCcnICsgKHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCkgKyAnXFwnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAnUGFyc2UgZXJyb3Igb24gbGluZSAnICsgKHl5bGluZW5vICsgMSkgKyAnOiBVbmV4cGVjdGVkICcgKyAoc3ltYm9sID09IEVPRiA/ICdlbmQgb2YgaW5wdXQnIDogJ1xcJycgKyAodGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sKSArICdcXCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZUVycm9yKGVyclN0ciwge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmxleGVyLm1hdGNoLFxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICBsaW5lOiB0aGlzLmxleGVyLnl5bGluZW5vLFxuICAgICAgICAgICAgICAgICAgICBsb2M6IHl5bG9jLFxuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYgKGFjdGlvblswXSBpbnN0YW5jZW9mIEFycmF5ICYmIGFjdGlvbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcnNlIEVycm9yOiBtdWx0aXBsZSBhY3Rpb25zIHBvc3NpYmxlIGF0IHN0YXRlOiAnICsgc3RhdGUgKyAnLCB0b2tlbjogJyArIHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChhY3Rpb25bMF0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgc3RhY2sucHVzaChzeW1ib2wpO1xuICAgICAgICAgICAgdnN0YWNrLnB1c2godGhpcy5sZXhlci55eXRleHQpO1xuICAgICAgICAgICAgbHN0YWNrLnB1c2godGhpcy5sZXhlci55eWxsb2MpO1xuICAgICAgICAgICAgc3RhY2sucHVzaChhY3Rpb25bMV0pO1xuICAgICAgICAgICAgc3ltYm9sID0gbnVsbDtcbiAgICAgICAgICAgIGlmICghcHJlRXJyb3JTeW1ib2wpIHtcbiAgICAgICAgICAgICAgICB5eWxlbmcgPSB0aGlzLmxleGVyLnl5bGVuZztcbiAgICAgICAgICAgICAgICB5eXRleHQgPSB0aGlzLmxleGVyLnl5dGV4dDtcbiAgICAgICAgICAgICAgICB5eWxpbmVubyA9IHRoaXMubGV4ZXIueXlsaW5lbm87XG4gICAgICAgICAgICAgICAgeXlsb2MgPSB0aGlzLmxleGVyLnl5bGxvYztcbiAgICAgICAgICAgICAgICBpZiAocmVjb3ZlcmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcmluZy0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3ltYm9sID0gcHJlRXJyb3JTeW1ib2w7XG4gICAgICAgICAgICAgICAgcHJlRXJyb3JTeW1ib2wgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGxlbiA9IHRoaXMucHJvZHVjdGlvbnNfW2FjdGlvblsxXV1bMV07XG4gICAgICAgICAgICB5eXZhbC4kID0gdnN0YWNrW3ZzdGFjay5sZW5ndGggLSBsZW5dO1xuICAgICAgICAgICAgeXl2YWwuXyQgPSB7XG4gICAgICAgICAgICAgICAgZmlyc3RfbGluZTogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAobGVuIHx8IDEpXS5maXJzdF9saW5lLFxuICAgICAgICAgICAgICAgIGxhc3RfbGluZTogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5sYXN0X2xpbmUsXG4gICAgICAgICAgICAgICAgZmlyc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLmZpcnN0X2NvbHVtbixcbiAgICAgICAgICAgICAgICBsYXN0X2NvbHVtbjogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5sYXN0X2NvbHVtblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyYW5nZXMpIHtcbiAgICAgICAgICAgICAgICB5eXZhbC5fJC5yYW5nZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgbHN0YWNrW2xzdGFjay5sZW5ndGggLSAobGVuIHx8IDEpXS5yYW5nZVswXSxcbiAgICAgICAgICAgICAgICAgICAgbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5yYW5nZVsxXVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByID0gdGhpcy5wZXJmb3JtQWN0aW9uLmFwcGx5KHl5dmFsLCBbXG4gICAgICAgICAgICAgICAgeXl0ZXh0LFxuICAgICAgICAgICAgICAgIHl5bGVuZyxcbiAgICAgICAgICAgICAgICB5eWxpbmVubyxcbiAgICAgICAgICAgICAgICB0aGlzLnl5LFxuICAgICAgICAgICAgICAgIGFjdGlvblsxXSxcbiAgICAgICAgICAgICAgICB2c3RhY2ssXG4gICAgICAgICAgICAgICAgbHN0YWNrXG4gICAgICAgICAgICBdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZSgwLCAtMSAqIGxlbiAqIDIpO1xuICAgICAgICAgICAgICAgIHZzdGFjayA9IHZzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7XG4gICAgICAgICAgICAgICAgbHN0YWNrID0gbHN0YWNrLnNsaWNlKDAsIC0xICogbGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YWNrLnB1c2godGhpcy5wcm9kdWN0aW9uc19bYWN0aW9uWzFdXVswXSk7XG4gICAgICAgICAgICB2c3RhY2sucHVzaCh5eXZhbC4kKTtcbiAgICAgICAgICAgIGxzdGFjay5wdXNoKHl5dmFsLl8kKTtcbiAgICAgICAgICAgIG5ld1N0YXRlID0gdGFibGVbc3RhY2tbc3RhY2subGVuZ3RoIC0gMl1dW3N0YWNrW3N0YWNrLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gobmV3U3RhdGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufX07XG5cbmZ1bmN0aW9uIFBhcnNlciAoKSB7XG4gIHRoaXMueXkgPSB7fTtcbn1cblBhcnNlci5wcm90b3R5cGUgPSBwYXJzZXI7cGFyc2VyLlBhcnNlciA9IFBhcnNlcjtcbnJldHVybiBuZXcgUGFyc2VyO1xufSkoKTtcblxuXG5pZiAodHlwZW9mIHJlcXVpcmUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuZXhwb3J0cy5wYXJzZXIgPSBwYXJzZXI7XG5leHBvcnRzLlBhcnNlciA9IHBhcnNlci5QYXJzZXI7XG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyc2VyLnBhcnNlLmFwcGx5KHBhcnNlciwgYXJndW1lbnRzKTsgfTtcbmV4cG9ydHMubWFpbiA9IGZ1bmN0aW9uIGNvbW1vbmpzTWFpbihhcmdzKSB7XG4gICAgaWYgKCFhcmdzWzFdKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2FnZTogJythcmdzWzBdKycgRklMRScpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhyZXF1aXJlKCdwYXRoJykubm9ybWFsaXplKGFyZ3NbMV0pLCBcInV0ZjhcIik7XG4gICAgcmV0dXJuIGV4cG9ydHMucGFyc2VyLnBhcnNlKHNvdXJjZSk7XG59O1xuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XG4gIGV4cG9ydHMubWFpbihwcm9jZXNzLmFyZ3Yuc2xpY2UoMSkpO1xufVxufSIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBDb2ZmZWVTY3JpcHQsIE1vZHVsZSwgYmluYXJ5LCBjaGlsZF9wcm9jZXNzLCBleHQsIGZpbmRFeHRlbnNpb24sIGZvcmssIGhlbHBlcnMsIGxvYWRGaWxlLCBwYXRoLCBfaSwgX2xlbiwgX3JlZjtcblxuICBDb2ZmZWVTY3JpcHQgPSByZXF1aXJlKCcuL2NvZmZlZS1zY3JpcHQnKTtcblxuICBjaGlsZF9wcm9jZXNzID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuXG4gIGhlbHBlcnMgPSByZXF1aXJlKCcuL2hlbHBlcnMnKTtcblxuICBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4gIGxvYWRGaWxlID0gZnVuY3Rpb24obW9kdWxlLCBmaWxlbmFtZSkge1xuICAgIHZhciBhbnN3ZXI7XG4gICAgYW5zd2VyID0gQ29mZmVlU2NyaXB0Ll9jb21waWxlRmlsZShmaWxlbmFtZSwgZmFsc2UsIHtcbiAgICAgIHJ1bnRpbWU6IFwiaW50ZXJwXCJcbiAgICB9KTtcbiAgICByZXR1cm4gbW9kdWxlLl9jb21waWxlKGFuc3dlciwgZmlsZW5hbWUpO1xuICB9O1xuXG4gIGlmIChyZXF1aXJlLmV4dGVuc2lvbnMpIHtcbiAgICBfcmVmID0gQ29mZmVlU2NyaXB0LkZJTEVfRVhURU5TSU9OUztcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGV4dCA9IF9yZWZbX2ldO1xuICAgICAgcmVxdWlyZS5leHRlbnNpb25zW2V4dF0gPSBsb2FkRmlsZTtcbiAgICB9XG4gICAgTW9kdWxlID0gcmVxdWlyZSgnbW9kdWxlJyk7XG4gICAgZmluZEV4dGVuc2lvbiA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgICB2YXIgY3VyRXh0ZW5zaW9uLCBleHRlbnNpb25zO1xuICAgICAgZXh0ZW5zaW9ucyA9IHBhdGguYmFzZW5hbWUoZmlsZW5hbWUpLnNwbGl0KCcuJyk7XG4gICAgICBpZiAoZXh0ZW5zaW9uc1swXSA9PT0gJycpIHtcbiAgICAgICAgZXh0ZW5zaW9ucy5zaGlmdCgpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGV4dGVuc2lvbnMuc2hpZnQoKSkge1xuICAgICAgICBjdXJFeHRlbnNpb24gPSAnLicgKyBleHRlbnNpb25zLmpvaW4oJy4nKTtcbiAgICAgICAgaWYgKE1vZHVsZS5fZXh0ZW5zaW9uc1tjdXJFeHRlbnNpb25dKSB7XG4gICAgICAgICAgcmV0dXJuIGN1ckV4dGVuc2lvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuICcuanMnO1xuICAgIH07XG4gICAgTW9kdWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICAgIHZhciBleHRlbnNpb247XG4gICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICB0aGlzLnBhdGhzID0gTW9kdWxlLl9ub2RlTW9kdWxlUGF0aHMocGF0aC5kaXJuYW1lKGZpbGVuYW1lKSk7XG4gICAgICBleHRlbnNpb24gPSBmaW5kRXh0ZW5zaW9uKGZpbGVuYW1lKTtcbiAgICAgIE1vZHVsZS5fZXh0ZW5zaW9uc1tleHRlbnNpb25dKHRoaXMsIGZpbGVuYW1lKTtcbiAgICAgIHJldHVybiB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChjaGlsZF9wcm9jZXNzKSB7XG4gICAgZm9yayA9IGNoaWxkX3Byb2Nlc3MuZm9yaztcbiAgICBiaW5hcnkgPSByZXF1aXJlLnJlc29sdmUoJy4uLy4uL2Jpbi9jb2ZmZWUnKTtcbiAgICBjaGlsZF9wcm9jZXNzLmZvcmsgPSBmdW5jdGlvbihwYXRoLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgICBpZiAoaGVscGVycy5pc0NvZmZlZShwYXRoKSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgICBvcHRpb25zID0gYXJncyB8fCB7fTtcbiAgICAgICAgICBhcmdzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgYXJncyA9IFtwYXRoXS5jb25jYXQoYXJncyk7XG4gICAgICAgIHBhdGggPSBiaW5hcnk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm9yayhwYXRoLCBhcmdzLCBvcHRpb25zKTtcbiAgICB9O1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQkFMQU5DRURfUEFJUlMsIENBTExfQ0xPU0VSUywgRVhQUkVTU0lPTl9DTE9TRSwgRVhQUkVTU0lPTl9FTkQsIEVYUFJFU1NJT05fU1RBUlQsIElNUExJQ0lUX0NBTEwsIElNUExJQ0lUX0VORCwgSU1QTElDSVRfRlVOQywgSU1QTElDSVRfVU5TUEFDRURfQ0FMTCwgSU5WRVJTRVMsIExJTkVCUkVBS1MsIFNJTkdMRV9DTE9TRVJTLCBTSU5HTEVfTElORVJTLCBnZW5lcmF0ZSwgbGVmdCwgcml0ZSwgX2ksIF9sZW4sIF9yZWYsXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH0sXG4gICAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG4gIGdlbmVyYXRlID0gZnVuY3Rpb24odGFnLCB2YWx1ZSwgb3JpZ2luKSB7XG4gICAgdmFyIHRvaztcbiAgICB0b2sgPSBbdGFnLCB2YWx1ZV07XG4gICAgdG9rLmdlbmVyYXRlZCA9IHRydWU7XG4gICAgaWYgKG9yaWdpbikge1xuICAgICAgdG9rLm9yaWdpbiA9IG9yaWdpbjtcbiAgICB9XG4gICAgcmV0dXJuIHRvaztcbiAgfTtcblxuICBleHBvcnRzLlJld3JpdGVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFJld3JpdGVyKCkge31cblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5yZXdyaXRlID0gZnVuY3Rpb24odG9rZW5zKSB7XG4gICAgICB0aGlzLnRva2VucyA9IHRva2VucztcbiAgICAgIHRoaXMucmVtb3ZlTGVhZGluZ05ld2xpbmVzKCk7XG4gICAgICB0aGlzLmNsb3NlT3BlbkNhbGxzKCk7XG4gICAgICB0aGlzLmNsb3NlT3BlbkluZGV4ZXMoKTtcbiAgICAgIHRoaXMubm9ybWFsaXplTGluZXMoKTtcbiAgICAgIHRoaXMudGFnUG9zdGZpeENvbmRpdGlvbmFscygpO1xuICAgICAgdGhpcy5hZGRJbXBsaWNpdEJyYWNlc0FuZFBhcmVucygpO1xuICAgICAgdGhpcy5hZGRMb2NhdGlvbkRhdGFUb0dlbmVyYXRlZFRva2VucygpO1xuICAgICAgcmV0dXJuIHRoaXMudG9rZW5zO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuc2NhblRva2VucyA9IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICB2YXIgaSwgdG9rZW4sIHRva2VucztcbiAgICAgIHRva2VucyA9IHRoaXMudG9rZW5zO1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAodG9rZW4gPSB0b2tlbnNbaV0pIHtcbiAgICAgICAgaSArPSBibG9jay5jYWxsKHRoaXMsIHRva2VuLCBpLCB0b2tlbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5kZXRlY3RFbmQgPSBmdW5jdGlvbihpLCBjb25kaXRpb24sIGFjdGlvbikge1xuICAgICAgdmFyIGxldmVscywgdG9rZW4sIHRva2VucywgX3JlZiwgX3JlZjE7XG4gICAgICB0b2tlbnMgPSB0aGlzLnRva2VucztcbiAgICAgIGxldmVscyA9IDA7XG4gICAgICB3aGlsZSAodG9rZW4gPSB0b2tlbnNbaV0pIHtcbiAgICAgICAgaWYgKGxldmVscyA9PT0gMCAmJiBjb25kaXRpb24uY2FsbCh0aGlzLCB0b2tlbiwgaSkpIHtcbiAgICAgICAgICByZXR1cm4gYWN0aW9uLmNhbGwodGhpcywgdG9rZW4sIGkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdG9rZW4gfHwgbGV2ZWxzIDwgMCkge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24uY2FsbCh0aGlzLCB0b2tlbiwgaSAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfcmVmID0gdG9rZW5bMF0sIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fU1RBUlQsIF9yZWYpID49IDApIHtcbiAgICAgICAgICBsZXZlbHMgKz0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChfcmVmMSA9IHRva2VuWzBdLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX0VORCwgX3JlZjEpID49IDApIHtcbiAgICAgICAgICBsZXZlbHMgLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBpICs9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gaSAtIDE7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5yZW1vdmVMZWFkaW5nTmV3bGluZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCB0YWcsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgX3JlZiA9IHRoaXMudG9rZW5zO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgdGFnID0gX3JlZltpXVswXTtcbiAgICAgICAgaWYgKHRhZyAhPT0gJ1RFUk1JTkFUT1InKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2Vucy5zcGxpY2UoMCwgaSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5jbG9zZU9wZW5DYWxscyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFjdGlvbiwgY29uZGl0aW9uO1xuICAgICAgY29uZGl0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgIHJldHVybiAoKF9yZWYgPSB0b2tlblswXSkgPT09ICcpJyB8fCBfcmVmID09PSAnQ0FMTF9FTkQnKSB8fCB0b2tlblswXSA9PT0gJ09VVERFTlQnICYmIHRoaXMudGFnKGkgLSAxKSA9PT0gJyknO1xuICAgICAgfTtcbiAgICAgIGFjdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2Vuc1t0b2tlblswXSA9PT0gJ09VVERFTlQnID8gaSAtIDEgOiBpXVswXSA9ICdDQUxMX0VORCc7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICBpZiAodG9rZW5bMF0gPT09ICdDQUxMX1NUQVJUJykge1xuICAgICAgICAgIHRoaXMuZGV0ZWN0RW5kKGkgKyAxLCBjb25kaXRpb24sIGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmNsb3NlT3BlbkluZGV4ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhY3Rpb24sIGNvbmRpdGlvbjtcbiAgICAgIGNvbmRpdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHZhciBfcmVmO1xuICAgICAgICByZXR1cm4gKF9yZWYgPSB0b2tlblswXSkgPT09ICddJyB8fCBfcmVmID09PSAnSU5ERVhfRU5EJztcbiAgICAgIH07XG4gICAgICBhY3Rpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICByZXR1cm4gdG9rZW5bMF0gPSAnSU5ERVhfRU5EJztcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIGlmICh0b2tlblswXSA9PT0gJ0lOREVYX1NUQVJUJykge1xuICAgICAgICAgIHRoaXMuZGV0ZWN0RW5kKGkgKyAxLCBjb25kaXRpb24sIGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLm1hdGNoVGFncyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGZ1enosIGksIGosIHBhdHRlcm4sIF9pLCBfcmVmLCBfcmVmMTtcbiAgICAgIGkgPSBhcmd1bWVudHNbMF0sIHBhdHRlcm4gPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgICAgZnV6eiA9IDA7XG4gICAgICBmb3IgKGogPSBfaSA9IDAsIF9yZWYgPSBwYXR0ZXJuLmxlbmd0aDsgMCA8PSBfcmVmID8gX2kgPCBfcmVmIDogX2kgPiBfcmVmOyBqID0gMCA8PSBfcmVmID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMudGFnKGkgKyBqICsgZnV6eikgPT09ICdIRVJFQ09NTUVOVCcpIHtcbiAgICAgICAgICBmdXp6ICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdHRlcm5bal0gPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcGF0dGVybltqXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBwYXR0ZXJuW2pdID0gW3BhdHRlcm5bal1dO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfcmVmMSA9IHRoaXMudGFnKGkgKyBqICsgZnV6eiksIF9faW5kZXhPZi5jYWxsKHBhdHRlcm5bal0sIF9yZWYxKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUubG9va3NPYmplY3Rpc2ggPSBmdW5jdGlvbihqKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXRjaFRhZ3MoaiwgJ0AnLCBudWxsLCAnOicpIHx8IHRoaXMubWF0Y2hUYWdzKGosIG51bGwsICc6Jyk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5maW5kVGFnc0JhY2t3YXJkcyA9IGZ1bmN0aW9uKGksIHRhZ3MpIHtcbiAgICAgIHZhciBiYWNrU3RhY2ssIF9yZWYsIF9yZWYxLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNTtcbiAgICAgIGJhY2tTdGFjayA9IFtdO1xuICAgICAgd2hpbGUgKGkgPj0gMCAmJiAoYmFja1N0YWNrLmxlbmd0aCB8fCAoX3JlZjIgPSB0aGlzLnRhZyhpKSwgX19pbmRleE9mLmNhbGwodGFncywgX3JlZjIpIDwgMCkgJiYgKChfcmVmMyA9IHRoaXMudGFnKGkpLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX1NUQVJULCBfcmVmMykgPCAwKSB8fCB0aGlzLnRva2Vuc1tpXS5nZW5lcmF0ZWQpICYmIChfcmVmNCA9IHRoaXMudGFnKGkpLCBfX2luZGV4T2YuY2FsbChMSU5FQlJFQUtTLCBfcmVmNCkgPCAwKSkpIHtcbiAgICAgICAgaWYgKF9yZWYgPSB0aGlzLnRhZyhpKSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9FTkQsIF9yZWYpID49IDApIHtcbiAgICAgICAgICBiYWNrU3RhY2sucHVzaCh0aGlzLnRhZyhpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfcmVmMSA9IHRoaXMudGFnKGkpLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX1NUQVJULCBfcmVmMSkgPj0gMCkgJiYgYmFja1N0YWNrLmxlbmd0aCkge1xuICAgICAgICAgIGJhY2tTdGFjay5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpIC09IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3JlZjUgPSB0aGlzLnRhZyhpKSwgX19pbmRleE9mLmNhbGwodGFncywgX3JlZjUpID49IDA7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5hZGRJbXBsaWNpdEJyYWNlc0FuZFBhcmVucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHN0YWNrO1xuICAgICAgc3RhY2sgPSBbXTtcbiAgICAgIHJldHVybiB0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24odG9rZW4sIGksIHRva2Vucykge1xuICAgICAgICB2YXIgZW5kSW1wbGljaXRDYWxsLCBlbmRJbXBsaWNpdE9iamVjdCwgZm9yd2FyZCwgaW5JbXBsaWNpdCwgaW5JbXBsaWNpdENhbGwsIGluSW1wbGljaXRDb250cm9sLCBpbkltcGxpY2l0T2JqZWN0LCBuZXdMaW5lLCBuZXh0VGFnLCBvZmZzZXQsIHByZXZUYWcsIHByZXZUb2tlbiwgcmV0LCBzLCBzYW1lTGluZSwgc3RhY2tJZHgsIHN0YWNrVGFnLCBzdGFja1RvcCwgc3RhcnRJZHgsIHN0YXJ0SW1wbGljaXRDYWxsLCBzdGFydEltcGxpY2l0T2JqZWN0LCBzdGFydHNMaW5lLCB0YWcsIF9yZWYsIF9yZWYxLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNTtcbiAgICAgICAgdGFnID0gdG9rZW5bMF07XG4gICAgICAgIHByZXZUYWcgPSAocHJldlRva2VuID0gaSA+IDAgPyB0b2tlbnNbaSAtIDFdIDogW10pWzBdO1xuICAgICAgICBuZXh0VGFnID0gKGkgPCB0b2tlbnMubGVuZ3RoIC0gMSA/IHRva2Vuc1tpICsgMV0gOiBbXSlbMF07XG4gICAgICAgIHN0YWNrVG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICB9O1xuICAgICAgICBzdGFydElkeCA9IGk7XG4gICAgICAgIGZvcndhcmQgPSBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgcmV0dXJuIGkgLSBzdGFydElkeCArIG47XG4gICAgICAgIH07XG4gICAgICAgIGluSW1wbGljaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX3JlZiwgX3JlZjE7XG4gICAgICAgICAgcmV0dXJuIChfcmVmID0gc3RhY2tUb3AoKSkgIT0gbnVsbCA/IChfcmVmMSA9IF9yZWZbMl0pICE9IG51bGwgPyBfcmVmMS5vdXJzIDogdm9pZCAwIDogdm9pZCAwO1xuICAgICAgICB9O1xuICAgICAgICBpbkltcGxpY2l0Q2FsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgIHJldHVybiBpbkltcGxpY2l0KCkgJiYgKChfcmVmID0gc3RhY2tUb3AoKSkgIT0gbnVsbCA/IF9yZWZbMF0gOiB2b2lkIDApID09PSAnKCc7XG4gICAgICAgIH07XG4gICAgICAgIGluSW1wbGljaXRPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgICByZXR1cm4gaW5JbXBsaWNpdCgpICYmICgoX3JlZiA9IHN0YWNrVG9wKCkpICE9IG51bGwgPyBfcmVmWzBdIDogdm9pZCAwKSA9PT0gJ3snO1xuICAgICAgICB9O1xuICAgICAgICBpbkltcGxpY2l0Q29udHJvbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgIHJldHVybiBpbkltcGxpY2l0ICYmICgoX3JlZiA9IHN0YWNrVG9wKCkpICE9IG51bGwgPyBfcmVmWzBdIDogdm9pZCAwKSA9PT0gJ0NPTlRST0wnO1xuICAgICAgICB9O1xuICAgICAgICBzdGFydEltcGxpY2l0Q2FsbCA9IGZ1bmN0aW9uKGopIHtcbiAgICAgICAgICB2YXIgaWR4O1xuICAgICAgICAgIGlkeCA9IGogIT0gbnVsbCA/IGogOiBpO1xuICAgICAgICAgIHN0YWNrLnB1c2goW1xuICAgICAgICAgICAgJygnLCBpZHgsIHtcbiAgICAgICAgICAgICAgb3VyczogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pO1xuICAgICAgICAgIHRva2Vucy5zcGxpY2UoaWR4LCAwLCBnZW5lcmF0ZSgnQ0FMTF9TVEFSVCcsICcoJykpO1xuICAgICAgICAgIGlmIChqID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBlbmRJbXBsaWNpdENhbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICB0b2tlbnMuc3BsaWNlKGksIDAsIGdlbmVyYXRlKCdDQUxMX0VORCcsICcpJykpO1xuICAgICAgICAgIHJldHVybiBpICs9IDE7XG4gICAgICAgIH07XG4gICAgICAgIHN0YXJ0SW1wbGljaXRPYmplY3QgPSBmdW5jdGlvbihqLCBzdGFydHNMaW5lKSB7XG4gICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICBpZiAoc3RhcnRzTGluZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGFydHNMaW5lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWR4ID0gaiAhPSBudWxsID8gaiA6IGk7XG4gICAgICAgICAgc3RhY2sucHVzaChbXG4gICAgICAgICAgICAneycsIGlkeCwge1xuICAgICAgICAgICAgICBzYW1lTGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgc3RhcnRzTGluZTogc3RhcnRzTGluZSxcbiAgICAgICAgICAgICAgb3VyczogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pO1xuICAgICAgICAgIHRva2Vucy5zcGxpY2UoaWR4LCAwLCBnZW5lcmF0ZSgneycsIGdlbmVyYXRlKG5ldyBTdHJpbmcoJ3snKSksIHRva2VuKSk7XG4gICAgICAgICAgaWYgKGogPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGkgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGVuZEltcGxpY2l0T2JqZWN0ID0gZnVuY3Rpb24oaikge1xuICAgICAgICAgIGogPSBqICE9IG51bGwgPyBqIDogaTtcbiAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICB0b2tlbnMuc3BsaWNlKGosIDAsIGdlbmVyYXRlKCd9JywgJ30nLCB0b2tlbikpO1xuICAgICAgICAgIHJldHVybiBpICs9IDE7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChpbkltcGxpY2l0Q2FsbCgpICYmICh0YWcgPT09ICdJRicgfHwgdGFnID09PSAnVFJZJyB8fCB0YWcgPT09ICdGSU5BTExZJyB8fCB0YWcgPT09ICdDQVRDSCcgfHwgdGFnID09PSAnQ0xBU1MnIHx8IHRhZyA9PT0gJ1NXSVRDSCcpKSB7XG4gICAgICAgICAgc3RhY2sucHVzaChbXG4gICAgICAgICAgICAnQ09OVFJPTCcsIGksIHtcbiAgICAgICAgICAgICAgb3VyczogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pO1xuICAgICAgICAgIHJldHVybiBmb3J3YXJkKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT09ICdJTkRFTlQnICYmIGluSW1wbGljaXQoKSkge1xuICAgICAgICAgIGlmIChwcmV2VGFnICE9PSAnPT4nICYmIHByZXZUYWcgIT09ICctPicgJiYgcHJldlRhZyAhPT0gJ1snICYmIHByZXZUYWcgIT09ICcoJyAmJiBwcmV2VGFnICE9PSAnLCcgJiYgcHJldlRhZyAhPT0gJ3snICYmIHByZXZUYWcgIT09ICdUUlknICYmIHByZXZUYWcgIT09ICdFTFNFJyAmJiBwcmV2VGFnICE9PSAnPScpIHtcbiAgICAgICAgICAgIHdoaWxlIChpbkltcGxpY2l0Q2FsbCgpKSB7XG4gICAgICAgICAgICAgIGVuZEltcGxpY2l0Q2FsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW5JbXBsaWNpdENvbnRyb2woKSkge1xuICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YWNrLnB1c2goW3RhZywgaV0pO1xuICAgICAgICAgIHJldHVybiBmb3J3YXJkKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX1NUQVJULCB0YWcpID49IDApIHtcbiAgICAgICAgICBzdGFjay5wdXNoKFt0YWcsIGldKTtcbiAgICAgICAgICByZXR1cm4gZm9yd2FyZCgxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9FTkQsIHRhZykgPj0gMCkge1xuICAgICAgICAgIHdoaWxlIChpbkltcGxpY2l0KCkpIHtcbiAgICAgICAgICAgIGlmIChpbkltcGxpY2l0Q2FsbCgpKSB7XG4gICAgICAgICAgICAgIGVuZEltcGxpY2l0Q2FsbCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbkltcGxpY2l0T2JqZWN0KCkpIHtcbiAgICAgICAgICAgICAgZW5kSW1wbGljaXRPYmplY3QoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9faW5kZXhPZi5jYWxsKElNUExJQ0lUX0ZVTkMsIHRhZykgPj0gMCAmJiB0b2tlbi5zcGFjZWQgJiYgIXRva2VuLnN0cmluZ0VuZCB8fCB0YWcgPT09ICc/JyAmJiBpID4gMCAmJiAhdG9rZW5zW2kgLSAxXS5zcGFjZWQpICYmIChfX2luZGV4T2YuY2FsbChJTVBMSUNJVF9DQUxMLCBuZXh0VGFnKSA+PSAwIHx8IF9faW5kZXhPZi5jYWxsKElNUExJQ0lUX1VOU1BBQ0VEX0NBTEwsIG5leHRUYWcpID49IDAgJiYgISgoX3JlZiA9IHRva2Vuc1tpICsgMV0pICE9IG51bGwgPyBfcmVmLnNwYWNlZCA6IHZvaWQgMCkgJiYgISgoX3JlZjEgPSB0b2tlbnNbaSArIDFdKSAhPSBudWxsID8gX3JlZjEubmV3TGluZSA6IHZvaWQgMCkpKSB7XG4gICAgICAgICAgaWYgKHRhZyA9PT0gJz8nKSB7XG4gICAgICAgICAgICB0YWcgPSB0b2tlblswXSA9ICdGVU5DX0VYSVNUJztcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhcnRJbXBsaWNpdENhbGwoaSArIDEpO1xuICAgICAgICAgIHJldCA9IGZvcndhcmQoMik7XG4gICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwoSU1QTElDSVRfRlVOQywgdGFnKSA+PSAwICYmIHRoaXMubWF0Y2hUYWdzKGkgKyAxLCAnSU5ERU5UJywgbnVsbCwgJzonKSAmJiAhdGhpcy5maW5kVGFnc0JhY2t3YXJkcyhpLCBbJ0NMQVNTJywgJ0VYVEVORFMnLCAnSUYnLCAnQ0FUQ0gnLCAnU1dJVENIJywgJ0xFQURJTkdfV0hFTicsICdGT1InLCAnV0hJTEUnLCAnVU5USUwnXSkpIHtcbiAgICAgICAgICBzdGFydEltcGxpY2l0Q2FsbChpICsgMSk7XG4gICAgICAgICAgc3RhY2sucHVzaChbJ0lOREVOVCcsIGkgKyAyXSk7XG4gICAgICAgICAgcmV0dXJuIGZvcndhcmQoMyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZyA9PT0gJzonKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGFnKGkgLSAyKSA9PT0gJ0AnKSB7XG4gICAgICAgICAgICBzID0gaSAtIDI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHMgPSBpIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgd2hpbGUgKHRoaXMudGFnKHMgLSAyKSA9PT0gJ0hFUkVDT01NRU5UJykge1xuICAgICAgICAgICAgcyAtPSAyO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmluc2lkZUZvckRlY2xhcmF0aW9uID0gbmV4dFRhZyA9PT0gJ0ZPUic7XG4gICAgICAgICAgc3RhcnRzTGluZSA9IHMgPT09IDAgfHwgKF9yZWYyID0gdGhpcy50YWcocyAtIDEpLCBfX2luZGV4T2YuY2FsbChMSU5FQlJFQUtTLCBfcmVmMikgPj0gMCkgfHwgdG9rZW5zW3MgLSAxXS5uZXdMaW5lO1xuICAgICAgICAgIGlmIChzdGFja1RvcCgpKSB7XG4gICAgICAgICAgICBfcmVmMyA9IHN0YWNrVG9wKCksIHN0YWNrVGFnID0gX3JlZjNbMF0sIHN0YWNrSWR4ID0gX3JlZjNbMV07XG4gICAgICAgICAgICBpZiAoKHN0YWNrVGFnID09PSAneycgfHwgc3RhY2tUYWcgPT09ICdJTkRFTlQnICYmIHRoaXMudGFnKHN0YWNrSWR4IC0gMSkgPT09ICd7JykgJiYgKHN0YXJ0c0xpbmUgfHwgdGhpcy50YWcocyAtIDEpID09PSAnLCcgfHwgdGhpcy50YWcocyAtIDEpID09PSAneycpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmb3J3YXJkKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFydEltcGxpY2l0T2JqZWN0KHMsICEhc3RhcnRzTGluZSk7XG4gICAgICAgICAgcmV0dXJuIGZvcndhcmQoMik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluSW1wbGljaXRPYmplY3QoKSAmJiBfX2luZGV4T2YuY2FsbChMSU5FQlJFQUtTLCB0YWcpID49IDApIHtcbiAgICAgICAgICBzdGFja1RvcCgpWzJdLnNhbWVMaW5lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbmV3TGluZSA9IHByZXZUYWcgPT09ICdPVVRERU5UJyB8fCBwcmV2VG9rZW4ubmV3TGluZTtcbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKElNUExJQ0lUX0VORCwgdGFnKSA+PSAwIHx8IF9faW5kZXhPZi5jYWxsKENBTExfQ0xPU0VSUywgdGFnKSA+PSAwICYmIG5ld0xpbmUpIHtcbiAgICAgICAgICB3aGlsZSAoaW5JbXBsaWNpdCgpKSB7XG4gICAgICAgICAgICBfcmVmNCA9IHN0YWNrVG9wKCksIHN0YWNrVGFnID0gX3JlZjRbMF0sIHN0YWNrSWR4ID0gX3JlZjRbMV0sIChfcmVmNSA9IF9yZWY0WzJdLCBzYW1lTGluZSA9IF9yZWY1LnNhbWVMaW5lLCBzdGFydHNMaW5lID0gX3JlZjUuc3RhcnRzTGluZSk7XG4gICAgICAgICAgICBpZiAoaW5JbXBsaWNpdENhbGwoKSAmJiBwcmV2VGFnICE9PSAnLCcpIHtcbiAgICAgICAgICAgICAgZW5kSW1wbGljaXRDYWxsKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluSW1wbGljaXRPYmplY3QoKSAmJiAhdGhpcy5pbnNpZGVGb3JEZWNsYXJhdGlvbiAmJiBzYW1lTGluZSAmJiB0YWcgIT09ICdURVJNSU5BVE9SJyAmJiBwcmV2VGFnICE9PSAnOicgJiYgZW5kSW1wbGljaXRPYmplY3QoKSkge1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluSW1wbGljaXRPYmplY3QoKSAmJiB0YWcgPT09ICdURVJNSU5BVE9SJyAmJiBwcmV2VGFnICE9PSAnLCcgJiYgIShzdGFydHNMaW5lICYmIHRoaXMubG9va3NPYmplY3Rpc2goaSArIDEpKSkge1xuICAgICAgICAgICAgICBlbmRJbXBsaWNpdE9iamVjdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT09ICcsJyAmJiAhdGhpcy5sb29rc09iamVjdGlzaChpICsgMSkgJiYgaW5JbXBsaWNpdE9iamVjdCgpICYmICF0aGlzLmluc2lkZUZvckRlY2xhcmF0aW9uICYmIChuZXh0VGFnICE9PSAnVEVSTUlOQVRPUicgfHwgIXRoaXMubG9va3NPYmplY3Rpc2goaSArIDIpKSkge1xuICAgICAgICAgIG9mZnNldCA9IG5leHRUYWcgPT09ICdPVVRERU5UJyA/IDEgOiAwO1xuICAgICAgICAgIHdoaWxlIChpbkltcGxpY2l0T2JqZWN0KCkpIHtcbiAgICAgICAgICAgIGVuZEltcGxpY2l0T2JqZWN0KGkgKyBvZmZzZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9yd2FyZCgxKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuYWRkTG9jYXRpb25EYXRhVG9HZW5lcmF0ZWRUb2tlbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24odG9rZW4sIGksIHRva2Vucykge1xuICAgICAgICB2YXIgY29sdW1uLCBsaW5lLCBuZXh0TG9jYXRpb24sIHByZXZMb2NhdGlvbiwgX3JlZiwgX3JlZjE7XG4gICAgICAgIGlmICh0b2tlblsyXSkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHRva2VuLmdlbmVyYXRlZCB8fCB0b2tlbi5leHBsaWNpdCkpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW5bMF0gPT09ICd7JyAmJiAobmV4dExvY2F0aW9uID0gKF9yZWYgPSB0b2tlbnNbaSArIDFdKSAhPSBudWxsID8gX3JlZlsyXSA6IHZvaWQgMCkpIHtcbiAgICAgICAgICBsaW5lID0gbmV4dExvY2F0aW9uLmZpcnN0X2xpbmUsIGNvbHVtbiA9IG5leHRMb2NhdGlvbi5maXJzdF9jb2x1bW47XG4gICAgICAgIH0gZWxzZSBpZiAocHJldkxvY2F0aW9uID0gKF9yZWYxID0gdG9rZW5zW2kgLSAxXSkgIT0gbnVsbCA/IF9yZWYxWzJdIDogdm9pZCAwKSB7XG4gICAgICAgICAgbGluZSA9IHByZXZMb2NhdGlvbi5sYXN0X2xpbmUsIGNvbHVtbiA9IHByZXZMb2NhdGlvbi5sYXN0X2NvbHVtbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaW5lID0gY29sdW1uID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0b2tlblsyXSA9IHtcbiAgICAgICAgICBmaXJzdF9saW5lOiBsaW5lLFxuICAgICAgICAgIGZpcnN0X2NvbHVtbjogY29sdW1uLFxuICAgICAgICAgIGxhc3RfbGluZTogbGluZSxcbiAgICAgICAgICBsYXN0X2NvbHVtbjogY29sdW1uXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5ub3JtYWxpemVMaW5lcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFjdGlvbiwgY29uZGl0aW9uLCBpbmRlbnQsIG91dGRlbnQsIHN0YXJ0ZXI7XG4gICAgICBzdGFydGVyID0gaW5kZW50ID0gb3V0ZGVudCA9IG51bGw7XG4gICAgICBjb25kaXRpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICB2YXIgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMztcbiAgICAgICAgcmV0dXJuIHRva2VuWzFdICE9PSAnOycgJiYgKF9yZWYgPSB0b2tlblswXSwgX19pbmRleE9mLmNhbGwoU0lOR0xFX0NMT1NFUlMsIF9yZWYpID49IDApICYmICEodG9rZW5bMF0gPT09ICdURVJNSU5BVE9SJyAmJiAoX3JlZjEgPSB0aGlzLnRhZyhpICsgMSksIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fQ0xPU0UsIF9yZWYxKSA+PSAwKSkgJiYgISh0b2tlblswXSA9PT0gJ0VMU0UnICYmIHN0YXJ0ZXIgIT09ICdUSEVOJykgJiYgISgoKF9yZWYyID0gdG9rZW5bMF0pID09PSAnQ0FUQ0gnIHx8IF9yZWYyID09PSAnRklOQUxMWScpICYmIChzdGFydGVyID09PSAnLT4nIHx8IHN0YXJ0ZXIgPT09ICc9PicpKSB8fCAoX3JlZjMgPSB0b2tlblswXSwgX19pbmRleE9mLmNhbGwoQ0FMTF9DTE9TRVJTLCBfcmVmMykgPj0gMCkgJiYgdGhpcy50b2tlbnNbaSAtIDFdLm5ld0xpbmU7XG4gICAgICB9O1xuICAgICAgYWN0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zLnNwbGljZSgodGhpcy50YWcoaSAtIDEpID09PSAnLCcgPyBpIC0gMSA6IGkpLCAwLCBvdXRkZW50KTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKHRva2VuLCBpLCB0b2tlbnMpIHtcbiAgICAgICAgdmFyIGosIHRhZywgX2ksIF9yZWYsIF9yZWYxLCBfcmVmMjtcbiAgICAgICAgdGFnID0gdG9rZW5bMF07XG4gICAgICAgIGlmICh0YWcgPT09ICdURVJNSU5BVE9SJykge1xuICAgICAgICAgIGlmICh0aGlzLnRhZyhpICsgMSkgPT09ICdFTFNFJyAmJiB0aGlzLnRhZyhpIC0gMSkgIT09ICdPVVRERU5UJykge1xuICAgICAgICAgICAgdG9rZW5zLnNwbGljZS5hcHBseSh0b2tlbnMsIFtpLCAxXS5jb25jYXQoX19zbGljZS5jYWxsKHRoaXMuaW5kZW50YXRpb24oKSkpKTtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX3JlZiA9IHRoaXMudGFnKGkgKyAxKSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9DTE9TRSwgX3JlZikgPj0gMCkge1xuICAgICAgICAgICAgdG9rZW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnID09PSAnQ0FUQ0gnKSB7XG4gICAgICAgICAgZm9yIChqID0gX2kgPSAxOyBfaSA8PSAyOyBqID0gKytfaSkge1xuICAgICAgICAgICAgaWYgKCEoKF9yZWYxID0gdGhpcy50YWcoaSArIGopKSA9PT0gJ09VVERFTlQnIHx8IF9yZWYxID09PSAnVEVSTUlOQVRPUicgfHwgX3JlZjEgPT09ICdGSU5BTExZJykpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b2tlbnMuc3BsaWNlLmFwcGx5KHRva2VucywgW2kgKyBqLCAwXS5jb25jYXQoX19zbGljZS5jYWxsKHRoaXMuaW5kZW50YXRpb24oKSkpKTtcbiAgICAgICAgICAgIHJldHVybiAyICsgajtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKFNJTkdMRV9MSU5FUlMsIHRhZykgPj0gMCAmJiB0aGlzLnRhZyhpICsgMSkgIT09ICdJTkRFTlQnICYmICEodGFnID09PSAnRUxTRScgJiYgdGhpcy50YWcoaSArIDEpID09PSAnSUYnKSkge1xuICAgICAgICAgIHN0YXJ0ZXIgPSB0YWc7XG4gICAgICAgICAgX3JlZjIgPSB0aGlzLmluZGVudGF0aW9uKHRva2Vuc1tpXSksIGluZGVudCA9IF9yZWYyWzBdLCBvdXRkZW50ID0gX3JlZjJbMV07XG4gICAgICAgICAgaWYgKHN0YXJ0ZXIgPT09ICdUSEVOJykge1xuICAgICAgICAgICAgaW5kZW50LmZyb21UaGVuID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9rZW5zLnNwbGljZShpICsgMSwgMCwgaW5kZW50KTtcbiAgICAgICAgICB0aGlzLmRldGVjdEVuZChpICsgMiwgY29uZGl0aW9uLCBhY3Rpb24pO1xuICAgICAgICAgIGlmICh0YWcgPT09ICdUSEVOJykge1xuICAgICAgICAgICAgdG9rZW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLnRhZ1Bvc3RmaXhDb25kaXRpb25hbHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhY3Rpb24sIGNvbmRpdGlvbiwgb3JpZ2luYWw7XG4gICAgICBvcmlnaW5hbCA9IG51bGw7XG4gICAgICBjb25kaXRpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICB2YXIgcHJldlRhZywgdGFnO1xuICAgICAgICB0YWcgPSB0b2tlblswXTtcbiAgICAgICAgcHJldlRhZyA9IHRoaXMudG9rZW5zW2kgLSAxXVswXTtcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ1RFUk1JTkFUT1InIHx8ICh0YWcgPT09ICdJTkRFTlQnICYmIF9faW5kZXhPZi5jYWxsKFNJTkdMRV9MSU5FUlMsIHByZXZUYWcpIDwgMCk7XG4gICAgICB9O1xuICAgICAgYWN0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgaWYgKHRva2VuWzBdICE9PSAnSU5ERU5UJyB8fCAodG9rZW4uZ2VuZXJhdGVkICYmICF0b2tlbi5mcm9tVGhlbikpIHtcbiAgICAgICAgICByZXR1cm4gb3JpZ2luYWxbMF0gPSAnUE9TVF8nICsgb3JpZ2luYWxbMF07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIGlmICh0b2tlblswXSAhPT0gJ0lGJykge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIG9yaWdpbmFsID0gdG9rZW47XG4gICAgICAgIHRoaXMuZGV0ZWN0RW5kKGkgKyAxLCBjb25kaXRpb24sIGFjdGlvbik7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5pbmRlbnRhdGlvbiA9IGZ1bmN0aW9uKG9yaWdpbikge1xuICAgICAgdmFyIGluZGVudCwgb3V0ZGVudDtcbiAgICAgIGluZGVudCA9IFsnSU5ERU5UJywgMl07XG4gICAgICBvdXRkZW50ID0gWydPVVRERU5UJywgMl07XG4gICAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgIGluZGVudC5nZW5lcmF0ZWQgPSBvdXRkZW50LmdlbmVyYXRlZCA9IHRydWU7XG4gICAgICAgIGluZGVudC5vcmlnaW4gPSBvdXRkZW50Lm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGVudC5leHBsaWNpdCA9IG91dGRlbnQuZXhwbGljaXQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtpbmRlbnQsIG91dGRlbnRdO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuZ2VuZXJhdGUgPSBnZW5lcmF0ZTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS50YWcgPSBmdW5jdGlvbihpKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIHJldHVybiAoX3JlZiA9IHRoaXMudG9rZW5zW2ldKSAhPSBudWxsID8gX3JlZlswXSA6IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJld3JpdGVyO1xuXG4gIH0pKCk7XG5cbiAgQkFMQU5DRURfUEFJUlMgPSBbWycoJywgJyknXSwgWydbJywgJ10nXSwgWyd7JywgJ30nXSwgWydJTkRFTlQnLCAnT1VUREVOVCddLCBbJ0NBTExfU1RBUlQnLCAnQ0FMTF9FTkQnXSwgWydQQVJBTV9TVEFSVCcsICdQQVJBTV9FTkQnXSwgWydJTkRFWF9TVEFSVCcsICdJTkRFWF9FTkQnXV07XG5cbiAgZXhwb3J0cy5JTlZFUlNFUyA9IElOVkVSU0VTID0ge307XG5cbiAgRVhQUkVTU0lPTl9TVEFSVCA9IFtdO1xuXG4gIEVYUFJFU1NJT05fRU5EID0gW107XG5cbiAgZm9yIChfaSA9IDAsIF9sZW4gPSBCQUxBTkNFRF9QQUlSUy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgIF9yZWYgPSBCQUxBTkNFRF9QQUlSU1tfaV0sIGxlZnQgPSBfcmVmWzBdLCByaXRlID0gX3JlZlsxXTtcbiAgICBFWFBSRVNTSU9OX1NUQVJULnB1c2goSU5WRVJTRVNbcml0ZV0gPSBsZWZ0KTtcbiAgICBFWFBSRVNTSU9OX0VORC5wdXNoKElOVkVSU0VTW2xlZnRdID0gcml0ZSk7XG4gIH1cblxuICBFWFBSRVNTSU9OX0NMT1NFID0gWydDQVRDSCcsICdUSEVOJywgJ0VMU0UnLCAnRklOQUxMWSddLmNvbmNhdChFWFBSRVNTSU9OX0VORCk7XG5cbiAgSU1QTElDSVRfRlVOQyA9IFsnSURFTlRJRklFUicsICdTVVBFUicsICcpJywgJ0NBTExfRU5EJywgJ10nLCAnSU5ERVhfRU5EJywgJ0AnLCAnVEhJUyddO1xuXG4gIElNUExJQ0lUX0NBTEwgPSBbJ0lERU5USUZJRVInLCAnTlVNQkVSJywgJ1NUUklORycsICdKUycsICdSRUdFWCcsICdORVcnLCAnUEFSQU1fU1RBUlQnLCAnQ0xBU1MnLCAnSUYnLCAnVFJZJywgJ1NXSVRDSCcsICdUSElTJywgJ0JPT0wnLCAnTlVMTCcsICdVTkRFRklORUQnLCAnVU5BUlknLCAnWUlFTEQnLCAnVU5BUllfTUFUSCcsICdTVVBFUicsICdUSFJPVycsICdAJywgJy0+JywgJz0+JywgJ1snLCAnKCcsICd7JywgJy0tJywgJysrJ107XG5cbiAgSU1QTElDSVRfVU5TUEFDRURfQ0FMTCA9IFsnKycsICctJ107XG5cbiAgSU1QTElDSVRfRU5EID0gWydQT1NUX0lGJywgJ0ZPUicsICdXSElMRScsICdVTlRJTCcsICdXSEVOJywgJ0JZJywgJ0xPT1AnLCAnVEVSTUlOQVRPUiddO1xuXG4gIFNJTkdMRV9MSU5FUlMgPSBbJ0VMU0UnLCAnLT4nLCAnPT4nLCAnVFJZJywgJ0ZJTkFMTFknLCAnVEhFTiddO1xuXG4gIFNJTkdMRV9DTE9TRVJTID0gWydURVJNSU5BVE9SJywgJ0NBVENIJywgJ0ZJTkFMTFknLCAnRUxTRScsICdPVVRERU5UJywgJ0xFQURJTkdfV0hFTiddO1xuXG4gIExJTkVCUkVBS1MgPSBbJ1RFUk1JTkFUT1InLCAnSU5ERU5UJywgJ09VVERFTlQnXTtcblxuICBDQUxMX0NMT1NFUlMgPSBbJy4nLCAnPy4nLCAnOjonLCAnPzo6J107XG5cbiAgSU1QTElDSVRfRlVOQy5wdXNoKCdERUZFUicpO1xuXG4gIElNUExJQ0lUX0NBTEwucHVzaCgnREVGRVInKTtcblxuICBJTVBMSUNJVF9FTkQucHVzaCgnQVdBSVQnKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBTY29wZSwgZXh0ZW5kLCBpY2VkLCBsYXN0LCBfcmVmO1xuXG4gIF9yZWYgPSByZXF1aXJlKCcuL2hlbHBlcnMnKSwgZXh0ZW5kID0gX3JlZi5leHRlbmQsIGxhc3QgPSBfcmVmLmxhc3Q7XG5cbiAgaWNlZCA9IHJlcXVpcmUoJ2ljZWQtcnVudGltZScpO1xuXG4gIGV4cG9ydHMuU2NvcGUgPSBTY29wZSA9IChmdW5jdGlvbigpIHtcbiAgICBTY29wZS5yb290ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIFNjb3BlKHBhcmVudCwgZXhwcmVzc2lvbnMsIG1ldGhvZCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLmV4cHJlc3Npb25zID0gZXhwcmVzc2lvbnM7XG4gICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIHRoaXMudmFyaWFibGVzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2FyZ3VtZW50cycsXG4gICAgICAgICAgdHlwZTogJ2FyZ3VtZW50cydcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICAgIHRoaXMucG9zaXRpb25zID0ge307XG4gICAgICBpZiAoIXRoaXMucGFyZW50KSB7XG4gICAgICAgIFNjb3BlLnJvb3QgPSB0aGlzO1xuICAgICAgfVxuICAgIH1cblxuICAgIFNjb3BlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBpbW1lZGlhdGUpIHtcbiAgICAgIGlmICh0aGlzLnNoYXJlZCAmJiAhaW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5hZGQobmFtZSwgdHlwZSwgaW1tZWRpYXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5wb3NpdGlvbnMsIG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhcmlhYmxlc1t0aGlzLnBvc2l0aW9uc1tuYW1lXV0udHlwZSA9IHR5cGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbnNbbmFtZV0gPSB0aGlzLnZhcmlhYmxlcy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfSkgLSAxO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUubmFtZWRNZXRob2QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMTtcbiAgICAgIGlmICgoKF9yZWYxID0gdGhpcy5tZXRob2QpICE9IG51bGwgPyBfcmVmMS5uYW1lIDogdm9pZCAwKSB8fCAhdGhpcy5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0aG9kO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lm5hbWVkTWV0aG9kKCk7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKHRoaXMuY2hlY2sobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLmFkZChuYW1lLCAndmFyJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5wYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAodGhpcy5zaGFyZWQgJiYgdGhpcy5wYXJlbnQuY2hlY2sobmFtZSwgdHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYWRkKG5hbWUsICdwYXJhbScpO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgX3JlZjE7XG4gICAgICByZXR1cm4gISEodGhpcy50eXBlKG5hbWUpIHx8ICgoX3JlZjEgPSB0aGlzLnBhcmVudCkgIT0gbnVsbCA/IF9yZWYxLmNoZWNrKG5hbWUpIDogdm9pZCAwKSk7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS50ZW1wb3JhcnkgPSBmdW5jdGlvbihuYW1lLCBpbmRleCkge1xuICAgICAgaWYgKG5hbWUubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm4gJ18nICsgbmFtZSArIChpbmRleCA+IDEgPyBpbmRleCAtIDEgOiAnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ18nICsgKGluZGV4ICsgcGFyc2VJbnQobmFtZSwgMzYpKS50b1N0cmluZygzNikucmVwbGFjZSgvXFxkL2csICdhJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIHYsIF9pLCBfbGVuLCBfcmVmMTtcbiAgICAgIF9yZWYxID0gdGhpcy52YXJpYWJsZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHYgPSBfcmVmMVtfaV07XG4gICAgICAgIGlmICh2Lm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gdi50eXBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmZyZWVWYXJpYWJsZSA9IGZ1bmN0aW9uKG5hbWUsIHJlc2VydmUpIHtcbiAgICAgIHZhciBpbmRleCwgdGVtcDtcbiAgICAgIGlmIChyZXNlcnZlID09IG51bGwpIHtcbiAgICAgICAgcmVzZXJ2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpbmRleCA9IDA7XG4gICAgICB3aGlsZSAodGhpcy5jaGVjaygodGVtcCA9IHRoaXMudGVtcG9yYXJ5KG5hbWUsIGluZGV4KSkpKSB7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9XG4gICAgICBpZiAocmVzZXJ2ZSkge1xuICAgICAgICB0aGlzLmFkZCh0ZW1wLCAndmFyJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGVtcDtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmFzc2lnbiA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB0aGlzLmFkZChuYW1lLCB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgYXNzaWduZWQ6IHRydWVcbiAgICAgIH0sIHRydWUpO1xuICAgICAgcmV0dXJuIHRoaXMuaGFzQXNzaWdubWVudHMgPSB0cnVlO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuaGFzRGVjbGFyYXRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmRlY2xhcmVkVmFyaWFibGVzKCkubGVuZ3RoO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuZGVjbGFyZWRWYXJpYWJsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWFsVmFycywgdGVtcFZhcnMsIHYsIF9pLCBfbGVuLCBfcmVmMTtcbiAgICAgIHJlYWxWYXJzID0gW107XG4gICAgICB0ZW1wVmFycyA9IFtdO1xuICAgICAgX3JlZjEgPSB0aGlzLnZhcmlhYmxlcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgdiA9IF9yZWYxW19pXTtcbiAgICAgICAgaWYgKHYudHlwZSA9PT0gJ3ZhcicpIHtcbiAgICAgICAgICAodi5uYW1lLmNoYXJBdCgwKSA9PT0gJ18nID8gdGVtcFZhcnMgOiByZWFsVmFycykucHVzaCh2Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVhbFZhcnMuc29ydCgpLmNvbmNhdCh0ZW1wVmFycy5zb3J0KCkpO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuYXNzaWduZWRWYXJpYWJsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2LCBfaSwgX2xlbiwgX3JlZjEsIF9yZXN1bHRzO1xuICAgICAgX3JlZjEgPSB0aGlzLnZhcmlhYmxlcztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHYgPSBfcmVmMVtfaV07XG4gICAgICAgIGlmICh2LnR5cGUuYXNzaWduZWQpIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKFwiXCIgKyB2Lm5hbWUgKyBcIiA9IFwiICsgdi50eXBlLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NvcGU7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjExXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBMaW5lTWFwLCBTb3VyY2VNYXA7XG5cbiAgTGluZU1hcCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBMaW5lTWFwKGxpbmUpIHtcbiAgICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICB9XG5cbiAgICBMaW5lTWFwLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihjb2x1bW4sIF9hcmcsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBzb3VyY2VDb2x1bW4sIHNvdXJjZUxpbmU7XG4gICAgICBzb3VyY2VMaW5lID0gX2FyZ1swXSwgc291cmNlQ29sdW1uID0gX2FyZ1sxXTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29sdW1uc1tjb2x1bW5dICYmIG9wdGlvbnMubm9SZXBsYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNvbHVtbnNbY29sdW1uXSA9IHtcbiAgICAgICAgbGluZTogdGhpcy5saW5lLFxuICAgICAgICBjb2x1bW46IGNvbHVtbixcbiAgICAgICAgc291cmNlTGluZTogc291cmNlTGluZSxcbiAgICAgICAgc291cmNlQ29sdW1uOiBzb3VyY2VDb2x1bW5cbiAgICAgIH07XG4gICAgfTtcblxuICAgIExpbmVNYXAucHJvdG90eXBlLnNvdXJjZUxvY2F0aW9uID0gZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICB2YXIgbWFwcGluZztcbiAgICAgIHdoaWxlICghKChtYXBwaW5nID0gdGhpcy5jb2x1bW5zW2NvbHVtbl0pIHx8IChjb2x1bW4gPD0gMCkpKSB7XG4gICAgICAgIGNvbHVtbi0tO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hcHBpbmcgJiYgW21hcHBpbmcuc291cmNlTGluZSwgbWFwcGluZy5zb3VyY2VDb2x1bW5dO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGluZU1hcDtcblxuICB9KSgpO1xuXG4gIFNvdXJjZU1hcCA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgQkFTRTY0X0NIQVJTLCBWTFFfQ09OVElOVUFUSU9OX0JJVCwgVkxRX1NISUZULCBWTFFfVkFMVUVfTUFTSztcblxuICAgIGZ1bmN0aW9uIFNvdXJjZU1hcCgpIHtcbiAgICAgIHRoaXMubGluZXMgPSBbXTtcbiAgICB9XG5cbiAgICBTb3VyY2VNYXAucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHNvdXJjZUxvY2F0aW9uLCBnZW5lcmF0ZWRMb2NhdGlvbiwgb3B0aW9ucykge1xuICAgICAgdmFyIGNvbHVtbiwgbGluZSwgbGluZU1hcCwgX2Jhc2U7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGxpbmUgPSBnZW5lcmF0ZWRMb2NhdGlvblswXSwgY29sdW1uID0gZ2VuZXJhdGVkTG9jYXRpb25bMV07XG4gICAgICBsaW5lTWFwID0gKChfYmFzZSA9IHRoaXMubGluZXMpW2xpbmVdIHx8IChfYmFzZVtsaW5lXSA9IG5ldyBMaW5lTWFwKGxpbmUpKSk7XG4gICAgICByZXR1cm4gbGluZU1hcC5hZGQoY29sdW1uLCBzb3VyY2VMb2NhdGlvbiwgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIFNvdXJjZU1hcC5wcm90b3R5cGUuc291cmNlTG9jYXRpb24gPSBmdW5jdGlvbihfYXJnKSB7XG4gICAgICB2YXIgY29sdW1uLCBsaW5lLCBsaW5lTWFwO1xuICAgICAgbGluZSA9IF9hcmdbMF0sIGNvbHVtbiA9IF9hcmdbMV07XG4gICAgICB3aGlsZSAoISgobGluZU1hcCA9IHRoaXMubGluZXNbbGluZV0pIHx8IChsaW5lIDw9IDApKSkge1xuICAgICAgICBsaW5lLS07XG4gICAgICB9XG4gICAgICByZXR1cm4gbGluZU1hcCAmJiBsaW5lTWFwLnNvdXJjZUxvY2F0aW9uKGNvbHVtbik7XG4gICAgfTtcblxuICAgIFNvdXJjZU1hcC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbihvcHRpb25zLCBjb2RlKSB7XG4gICAgICB2YXIgYnVmZmVyLCBsYXN0Q29sdW1uLCBsYXN0U291cmNlQ29sdW1uLCBsYXN0U291cmNlTGluZSwgbGluZU1hcCwgbGluZU51bWJlciwgbWFwcGluZywgbmVlZENvbW1hLCB2Mywgd3JpdGluZ2xpbmUsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBpZiAoY29kZSA9PSBudWxsKSB7XG4gICAgICAgIGNvZGUgPSBudWxsO1xuICAgICAgfVxuICAgICAgd3JpdGluZ2xpbmUgPSAwO1xuICAgICAgbGFzdENvbHVtbiA9IDA7XG4gICAgICBsYXN0U291cmNlTGluZSA9IDA7XG4gICAgICBsYXN0U291cmNlQ29sdW1uID0gMDtcbiAgICAgIG5lZWRDb21tYSA9IGZhbHNlO1xuICAgICAgYnVmZmVyID0gXCJcIjtcbiAgICAgIF9yZWYgPSB0aGlzLmxpbmVzO1xuICAgICAgZm9yIChsaW5lTnVtYmVyID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgbGluZU51bWJlciA9ICsrX2kpIHtcbiAgICAgICAgbGluZU1hcCA9IF9yZWZbbGluZU51bWJlcl07XG4gICAgICAgIGlmIChsaW5lTWFwKSB7XG4gICAgICAgICAgX3JlZjEgPSBsaW5lTWFwLmNvbHVtbnM7XG4gICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICBtYXBwaW5nID0gX3JlZjFbX2pdO1xuICAgICAgICAgICAgaWYgKCEobWFwcGluZykpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAod3JpdGluZ2xpbmUgPCBtYXBwaW5nLmxpbmUpIHtcbiAgICAgICAgICAgICAgbGFzdENvbHVtbiA9IDA7XG4gICAgICAgICAgICAgIG5lZWRDb21tYSA9IGZhbHNlO1xuICAgICAgICAgICAgICBidWZmZXIgKz0gXCI7XCI7XG4gICAgICAgICAgICAgIHdyaXRpbmdsaW5lKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVlZENvbW1hKSB7XG4gICAgICAgICAgICAgIGJ1ZmZlciArPSBcIixcIjtcbiAgICAgICAgICAgICAgbmVlZENvbW1hID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWZmZXIgKz0gdGhpcy5lbmNvZGVWbHEobWFwcGluZy5jb2x1bW4gLSBsYXN0Q29sdW1uKTtcbiAgICAgICAgICAgIGxhc3RDb2x1bW4gPSBtYXBwaW5nLmNvbHVtbjtcbiAgICAgICAgICAgIGJ1ZmZlciArPSB0aGlzLmVuY29kZVZscSgwKTtcbiAgICAgICAgICAgIGJ1ZmZlciArPSB0aGlzLmVuY29kZVZscShtYXBwaW5nLnNvdXJjZUxpbmUgLSBsYXN0U291cmNlTGluZSk7XG4gICAgICAgICAgICBsYXN0U291cmNlTGluZSA9IG1hcHBpbmcuc291cmNlTGluZTtcbiAgICAgICAgICAgIGJ1ZmZlciArPSB0aGlzLmVuY29kZVZscShtYXBwaW5nLnNvdXJjZUNvbHVtbiAtIGxhc3RTb3VyY2VDb2x1bW4pO1xuICAgICAgICAgICAgbGFzdFNvdXJjZUNvbHVtbiA9IG1hcHBpbmcuc291cmNlQ29sdW1uO1xuICAgICAgICAgICAgbmVlZENvbW1hID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHYzID0ge1xuICAgICAgICB2ZXJzaW9uOiAzLFxuICAgICAgICBmaWxlOiBvcHRpb25zLmdlbmVyYXRlZEZpbGUgfHwgJycsXG4gICAgICAgIHNvdXJjZVJvb3Q6IG9wdGlvbnMuc291cmNlUm9vdCB8fCAnJyxcbiAgICAgICAgc291cmNlczogb3B0aW9ucy5zb3VyY2VGaWxlcyB8fCBbJyddLFxuICAgICAgICBuYW1lczogW10sXG4gICAgICAgIG1hcHBpbmdzOiBidWZmZXJcbiAgICAgIH07XG4gICAgICBpZiAob3B0aW9ucy5pbmxpbmUpIHtcbiAgICAgICAgdjMuc291cmNlc0NvbnRlbnQgPSBbY29kZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodjMsIG51bGwsIDIpO1xuICAgIH07XG5cbiAgICBWTFFfU0hJRlQgPSA1O1xuXG4gICAgVkxRX0NPTlRJTlVBVElPTl9CSVQgPSAxIDw8IFZMUV9TSElGVDtcblxuICAgIFZMUV9WQUxVRV9NQVNLID0gVkxRX0NPTlRJTlVBVElPTl9CSVQgLSAxO1xuXG4gICAgU291cmNlTWFwLnByb3RvdHlwZS5lbmNvZGVWbHEgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGFuc3dlciwgbmV4dENodW5rLCBzaWduQml0LCB2YWx1ZVRvRW5jb2RlO1xuICAgICAgYW5zd2VyID0gJyc7XG4gICAgICBzaWduQml0ID0gdmFsdWUgPCAwID8gMSA6IDA7XG4gICAgICB2YWx1ZVRvRW5jb2RlID0gKE1hdGguYWJzKHZhbHVlKSA8PCAxKSArIHNpZ25CaXQ7XG4gICAgICB3aGlsZSAodmFsdWVUb0VuY29kZSB8fCAhYW5zd2VyKSB7XG4gICAgICAgIG5leHRDaHVuayA9IHZhbHVlVG9FbmNvZGUgJiBWTFFfVkFMVUVfTUFTSztcbiAgICAgICAgdmFsdWVUb0VuY29kZSA9IHZhbHVlVG9FbmNvZGUgPj4gVkxRX1NISUZUO1xuICAgICAgICBpZiAodmFsdWVUb0VuY29kZSkge1xuICAgICAgICAgIG5leHRDaHVuayB8PSBWTFFfQ09OVElOVUFUSU9OX0JJVDtcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIgKz0gdGhpcy5lbmNvZGVCYXNlNjQobmV4dENodW5rKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfTtcblxuICAgIEJBU0U2NF9DSEFSUyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcblxuICAgIFNvdXJjZU1hcC5wcm90b3R5cGUuZW5jb2RlQmFzZTY0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBCQVNFNjRfQ0hBUlNbdmFsdWVdIHx8IChmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IEJhc2U2NCBlbmNvZGUgdmFsdWU6IFwiICsgdmFsdWUpO1xuICAgICAgfSkoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNvdXJjZU1hcDtcblxuICB9KSgpO1xuXG4gIGV4cG9ydHMuU291cmNlTWFwID0gU291cmNlTWFwO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuOFxuKGZ1bmN0aW9uKCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBrOiBcIl9faWNlZF9rXCIsXG4gICAga19ub29wOiBcIl9faWNlZF9rX25vb3BcIixcbiAgICBwYXJhbTogXCJfX2ljZWRfcF9cIixcbiAgICBuczogXCJpY2VkXCIsXG4gICAgcnVudGltZTogXCJydW50aW1lXCIsXG4gICAgRGVmZXJyYWxzOiBcIkRlZmVycmFsc1wiLFxuICAgIGRlZmVycmFsczogXCJfX2ljZWRfZGVmZXJyYWxzXCIsXG4gICAgZnVsZmlsbDogXCJfZnVsZmlsbFwiLFxuICAgIGJfd2hpbGU6IFwiX2JyZWFrXCIsXG4gICAgdF93aGlsZTogXCJfd2hpbGVcIixcbiAgICBjX3doaWxlOiBcIl9jb250aW51ZVwiLFxuICAgIG5fd2hpbGU6IFwiX25leHRcIixcbiAgICBuX2FyZzogXCJfX2ljZWRfbmV4dF9hcmdcIixcbiAgICBkZWZlcl9tZXRob2Q6IFwiZGVmZXJcIixcbiAgICBzbG90OiBcIl9fc2xvdFwiLFxuICAgIGFzc2lnbl9mbjogXCJhc3NpZ25fZm5cIixcbiAgICBhdXRvY2I6IFwiYXV0b2NiXCIsXG4gICAgcmV0c2xvdDogXCJyZXRcIixcbiAgICB0cmFjZTogXCJfX2ljZWRfdHJhY2VcIixcbiAgICBwYXNzZWRfZGVmZXJyYWw6IFwiX19pY2VkX3Bhc3NlZF9kZWZlcnJhbFwiLFxuICAgIGZpbmREZWZlcnJhbDogXCJmaW5kRGVmZXJyYWxcIixcbiAgICBsaW5lbm86IFwibGluZW5vXCIsXG4gICAgcGFyZW50OiBcInBhcmVudFwiLFxuICAgIGZpbGVuYW1lOiBcImZpbGVuYW1lXCIsXG4gICAgZnVuY25hbWU6IFwiZnVuY25hbWVcIixcbiAgICBjYXRjaEV4Y2VwdGlvbnM6ICdjYXRjaEV4Y2VwdGlvbnMnLFxuICAgIHJ1bnRpbWVfbW9kZXM6IFtcIm5vZGVcIiwgXCJpbmxpbmVcIiwgXCJ3aW5kb3dcIiwgXCJub25lXCIsIFwiYnJvd3NlcmlmeVwiLCBcImludGVycFwiXSxcbiAgICB0cmFtcG9saW5lOiBcInRyYW1wb2xpbmVcIixcbiAgICBjb250ZXh0OiBcImNvbnRleHRcIixcbiAgICBkZWZlcl9hcmc6IFwiX19pY2VkX2RlZmVyX1wiXG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC44XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBDLCBQaXBlbGluZXIsIGljZWQsIF9faWNlZF9rLCBfX2ljZWRfa19ub29wLCBfaWFuZCwgX2lvciwgX3RpbWVvdXQsXG4gICAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG4gIF9faWNlZF9rID0gX19pY2VkX2tfbm9vcCA9IGZ1bmN0aW9uKCkge307XG5cbiAgQyA9IHJlcXVpcmUoJy4vY29uc3QnKTtcblxuICBleHBvcnRzLmljZWQgPSBpY2VkID0gcmVxdWlyZSgnLi9ydW50aW1lJyk7XG5cbiAgX3RpbWVvdXQgPSBmdW5jdGlvbihjYiwgdCwgcmVzLCB0bXApIHtcbiAgICB2YXIgYXJyLCBydiwgd2hpY2gsIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLCBfX2ljZWRfZGVmZXJyYWxzLCBfX2ljZWRfaztcbiAgICBfX2ljZWRfayA9IF9faWNlZF9rX25vb3A7XG4gICAgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwgPSBpY2VkLmZpbmREZWZlcnJhbChhcmd1bWVudHMpO1xuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cztcbiAgICB0bXBbMF0gPSBydi5pZCh0cnVlKS5kZWZlcih7XG4gICAgICBhc3NpZ25fZm46IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyciA9IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSgpLFxuICAgICAgbGluZW5vOiAyMCxcbiAgICAgIGNvbnRleHQ6IF9faWNlZF9kZWZlcnJhbHNcbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KHJ2LmlkKGZhbHNlKS5kZWZlcih7XG4gICAgICBsaW5lbm86IDIxLFxuICAgICAgY29udGV4dDogX19pY2VkX2RlZmVycmFsc1xuICAgIH0pLCB0KTtcbiAgICAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiXG4gICAgICAgIH0pO1xuICAgICAgICBydi53YWl0KF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgIGFzc2lnbl9mbjogKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gd2hpY2ggPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKCksXG4gICAgICAgICAgbGluZW5vOiAyMlxuICAgICAgICB9KSk7XG4gICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgIH0pO1xuICAgIH0pKHRoaXMpKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgcmVzWzBdID0gd2hpY2g7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNiLmFwcGx5KG51bGwsIGFycik7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBleHBvcnRzLnRpbWVvdXQgPSBmdW5jdGlvbihjYiwgdCwgcmVzKSB7XG4gICAgdmFyIHRtcDtcbiAgICB0bXAgPSBbXTtcbiAgICBfdGltZW91dChjYiwgdCwgcmVzLCB0bXApO1xuICAgIHJldHVybiB0bXBbMF07XG4gIH07XG5cbiAgX2lhbmQgPSBmdW5jdGlvbihjYiwgcmVzLCB0bXApIHtcbiAgICB2YXIgb2ssIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLCBfX2ljZWRfZGVmZXJyYWxzLCBfX2ljZWRfaztcbiAgICBfX2ljZWRfayA9IF9faWNlZF9rX25vb3A7XG4gICAgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwgPSBpY2VkLmZpbmREZWZlcnJhbChhcmd1bWVudHMpO1xuICAgIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRtcFswXSA9IF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgIGFzc2lnbl9mbjogKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gb2sgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKCksXG4gICAgICAgICAgbGluZW5vOiAzOVxuICAgICAgICB9KTtcbiAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgfSk7XG4gICAgfSkodGhpcykoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICByZXNbMF0gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2IoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIGV4cG9ydHMuaWFuZCA9IGZ1bmN0aW9uKGNiLCByZXMpIHtcbiAgICB2YXIgdG1wO1xuICAgIHRtcCA9IFtdO1xuICAgIF9pYW5kKGNiLCByZXMsIHRtcCk7XG4gICAgcmV0dXJuIHRtcFswXTtcbiAgfTtcblxuICBfaW9yID0gZnVuY3Rpb24oY2IsIHJlcywgdG1wKSB7XG4gICAgdmFyIG9rLCBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCwgX19pY2VkX2RlZmVycmFscywgX19pY2VkX2s7XG4gICAgX19pY2VkX2sgPSBfX2ljZWRfa19ub29wO1xuICAgIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsID0gaWNlZC5maW5kRGVmZXJyYWwoYXJndW1lbnRzKTtcbiAgICAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiXG4gICAgICAgIH0pO1xuICAgICAgICB0bXBbMF0gPSBfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICBhc3NpZ25fZm46IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9rID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSgpLFxuICAgICAgICAgIGxpbmVubzogNThcbiAgICAgICAgfSk7XG4gICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgIH0pO1xuICAgIH0pKHRoaXMpKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICByZXNbMF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYigpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgZXhwb3J0cy5pb3IgPSBmdW5jdGlvbihjYiwgcmVzKSB7XG4gICAgdmFyIHRtcDtcbiAgICB0bXAgPSBbXTtcbiAgICBfaW9yKGNiLCByZXMsIHRtcCk7XG4gICAgcmV0dXJuIHRtcFswXTtcbiAgfTtcblxuICBleHBvcnRzLlBpcGVsaW5lciA9IFBpcGVsaW5lciA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBQaXBlbGluZXIod2luZG93LCBkZWxheSkge1xuICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3cgfHwgMTtcbiAgICAgIHRoaXMuZGVsYXkgPSBkZWxheSB8fCAwO1xuICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgdGhpcy5uX291dCA9IDA7XG4gICAgICB0aGlzLmNiID0gbnVsbDtcbiAgICAgIHRoaXNbQy5kZWZlcnJhbHNdID0gdGhpcztcbiAgICAgIHRoaXNbXCJkZWZlclwiXSA9IHRoaXMuX2RlZmVyO1xuICAgIH1cblxuICAgIFBpcGVsaW5lci5wcm90b3R5cGUud2FpdEluUXVldWUgPSBmdW5jdGlvbihjYikge1xuICAgICAgdmFyIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLCBfX2ljZWRfZGVmZXJyYWxzLCBfX2ljZWRfaztcbiAgICAgIF9faWNlZF9rID0gX19pY2VkX2tfbm9vcDtcbiAgICAgIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsID0gaWNlZC5maW5kRGVmZXJyYWwoYXJndW1lbnRzKTtcbiAgICAgIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgdmFyIF93aGlsZTtcbiAgICAgICAgICBfd2hpbGUgPSBmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgICAgdmFyIF9icmVhaywgX2NvbnRpbnVlLCBfbmV4dDtcbiAgICAgICAgICAgIF9icmVhayA9IF9faWNlZF9rO1xuICAgICAgICAgICAgX2NvbnRpbnVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpY2VkLnRyYW1wb2xpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF93aGlsZShfX2ljZWRfayk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF9uZXh0ID0gX2NvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCEoX3RoaXMubl9vdXQgPj0gX3RoaXMud2luZG93KSkge1xuICAgICAgICAgICAgICByZXR1cm4gX2JyZWFrKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiLFxuICAgICAgICAgICAgICAgICAgZnVuY25hbWU6IFwiUGlwZWxpbmVyLndhaXRJblF1ZXVlXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYiA9IF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgICAgICAgICAgbGluZW5vOiAxMDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICAgICAgICAgIH0pKF9uZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIF93aGlsZShfX2ljZWRfayk7XG4gICAgICAgIH0pO1xuICAgICAgfSkodGhpcykoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy5uX291dCsrO1xuICAgICAgICAgIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgICAgaWYgKF90aGlzLmRlbGF5KSB7XG4gICAgICAgICAgICAgIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCIsXG4gICAgICAgICAgICAgICAgICBmdW5jbmFtZTogXCJQaXBlbGluZXIud2FpdEluUXVldWVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgICAgICAgICBsaW5lbm86IDEwOFxuICAgICAgICAgICAgICAgIH0pLCBfdGhpcy5kZWxheSk7XG4gICAgICAgICAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgICAgICAgICB9KShfX2ljZWRfayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gX19pY2VkX2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjYigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBQaXBlbGluZXIucHJvdG90eXBlLl9fZGVmZXIgPSBmdW5jdGlvbihvdXQsIGRlZmVyQXJncykge1xuICAgICAgdmFyIHRtcCwgdm9pZENiLCBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCwgX19pY2VkX2RlZmVycmFscywgX19pY2VkX2s7XG4gICAgICBfX2ljZWRfayA9IF9faWNlZF9rX25vb3A7XG4gICAgICBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCA9IGljZWQuZmluZERlZmVycmFsKGFyZ3VtZW50cyk7XG4gICAgICAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgICBmaWxlbmFtZTogXCIvVXNlcnMvbWF4L3NyYy9pY2VkL2ljZWQtcnVudGltZS9zcmMvbGlicmFyeS5pY2VkXCIsXG4gICAgICAgICAgICBmdW5jbmFtZTogXCJQaXBlbGluZXIuX19kZWZlclwiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdm9pZENiID0gX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgICBsaW5lbm86IDEyMlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG91dFswXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MsIF9yZWY7XG4gICAgICAgICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgICAgICAgIGlmICgoX3JlZiA9IGRlZmVyQXJncy5hc3NpZ25fZm4pICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgX3JlZi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2b2lkQ2IoKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSh0aGlzKSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLm5fb3V0LS07XG4gICAgICAgICAgaWYgKF90aGlzLmNiKSB7XG4gICAgICAgICAgICB0bXAgPSBfdGhpcy5jYjtcbiAgICAgICAgICAgIF90aGlzLmNiID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0bXAoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFBpcGVsaW5lci5wcm90b3R5cGUuX2RlZmVyID0gZnVuY3Rpb24oZGVmZXJBcmdzKSB7XG4gICAgICB2YXIgdG1wO1xuICAgICAgdG1wID0gW107XG4gICAgICB0aGlzLl9fZGVmZXIodG1wLCBkZWZlckFyZ3MpO1xuICAgICAgcmV0dXJuIHRtcFswXTtcbiAgICB9O1xuXG4gICAgUGlwZWxpbmVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKGF1dG9jYikge1xuICAgICAgdmFyIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLCBfX2ljZWRfaywgX3doaWxlO1xuICAgICAgX19pY2VkX2sgPSBhdXRvY2I7XG4gICAgICBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCA9IGljZWQuZmluZERlZmVycmFsKGFyZ3VtZW50cyk7XG4gICAgICBfd2hpbGUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgdmFyIF9faWNlZF9kZWZlcnJhbHM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgIHZhciBfYnJlYWssIF9jb250aW51ZSwgX25leHQ7XG4gICAgICAgICAgX2JyZWFrID0gX19pY2VkX2s7XG4gICAgICAgICAgX2NvbnRpbnVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaWNlZC50cmFtcG9saW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gX3doaWxlKF9faWNlZF9rKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgX25leHQgPSBfY29udGludWU7XG4gICAgICAgICAgaWYgKCFfdGhpcy5uX291dCkge1xuICAgICAgICAgICAgcmV0dXJuIF9icmVhaygpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiLFxuICAgICAgICAgICAgICAgIGZ1bmNuYW1lOiBcIlBpcGVsaW5lci5mbHVzaFwiXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBfdGhpcy5jYiA9IF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgICAgICAgIGxpbmVubzogMTUxXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICAgICAgICB9KShfbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICBfd2hpbGUoX19pY2VkX2spO1xuICAgIH07XG5cbiAgICByZXR1cm4gUGlwZWxpbmVyO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC44XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBrLCBtb2QsIG1vZHMsIHYsIF9pLCBfbGVuO1xuXG4gIGV4cG9ydHNbXCJjb25zdFwiXSA9IHJlcXVpcmUoJy4vY29uc3QnKTtcblxuICBtb2RzID0gW3JlcXVpcmUoJy4vcnVudGltZScpLCByZXF1aXJlKCcuL2xpYnJhcnknKV07XG5cbiAgZm9yIChfaSA9IDAsIF9sZW4gPSBtb2RzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgbW9kID0gbW9kc1tfaV07XG4gICAgZm9yIChrIGluIG1vZCkge1xuICAgICAgdiA9IG1vZFtrXTtcbiAgICAgIGV4cG9ydHNba10gPSB2O1xuICAgIH1cbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuOFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQywgRGVmZXJyYWxzLCBSZW5kZXp2b3VzLCBleGNlcHRpb25IYW5kbGVyLCBmaW5kRGVmZXJyYWwsIG1ha2VfZGVmZXJfcmV0dXJuLCBzdGFja1dhbGssIHRpY2tfY291bnRlciwgdHJhbXBvbGluZSwgd2FybiwgX19hY3RpdmVfdHJhY2UsIF9fYywgX3RyYWNlX3RvX3N0cmluZyxcbiAgICBfX3NsaWNlID0gW10uc2xpY2U7XG5cbiAgQyA9IHJlcXVpcmUoJy4vY29uc3QnKTtcblxuICBtYWtlX2RlZmVyX3JldHVybiA9IGZ1bmN0aW9uKG9iaiwgZGVmZXJfYXJncywgaWQsIHRyYWNlX3RlbXBsYXRlLCBtdWx0aSkge1xuICAgIHZhciBrLCByZXQsIHRyYWNlLCB2O1xuICAgIHRyYWNlID0ge307XG4gICAgZm9yIChrIGluIHRyYWNlX3RlbXBsYXRlKSB7XG4gICAgICB2ID0gdHJhY2VfdGVtcGxhdGVba107XG4gICAgICB0cmFjZVtrXSA9IHY7XG4gICAgfVxuICAgIHRyYWNlW0MubGluZW5vXSA9IGRlZmVyX2FyZ3MgIT0gbnVsbCA/IGRlZmVyX2FyZ3NbQy5saW5lbm9dIDogdm9pZCAwO1xuICAgIHJldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlubmVyX2FyZ3MsIG8sIF9yZWY7XG4gICAgICBpbm5lcl9hcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGlmIChkZWZlcl9hcmdzICE9IG51bGwpIHtcbiAgICAgICAgaWYgKChfcmVmID0gZGVmZXJfYXJncy5hc3NpZ25fZm4pICE9IG51bGwpIHtcbiAgICAgICAgICBfcmVmLmFwcGx5KG51bGwsIGlubmVyX2FyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob2JqKSB7XG4gICAgICAgIG8gPSBvYmo7XG4gICAgICAgIGlmICghbXVsdGkpIHtcbiAgICAgICAgICBvYmogPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvLl9mdWxmaWxsKGlkLCB0cmFjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gd2FybihcIm92ZXJ1c2VkIGRlZmVycmFsIGF0IFwiICsgKF90cmFjZV90b19zdHJpbmcodHJhY2UpKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXRbQy50cmFjZV0gPSB0cmFjZTtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIF9fYyA9IDA7XG5cbiAgdGlja19jb3VudGVyID0gZnVuY3Rpb24obW9kKSB7XG4gICAgX19jKys7XG4gICAgaWYgKChfX2MgJSBtb2QpID09PSAwKSB7XG4gICAgICBfX2MgPSAwO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgX19hY3RpdmVfdHJhY2UgPSBudWxsO1xuXG4gIF90cmFjZV90b19zdHJpbmcgPSBmdW5jdGlvbih0cikge1xuICAgIHZhciBmbjtcbiAgICBmbiA9IHRyW0MuZnVuY25hbWVdIHx8IFwiPGFub255bW91cz5cIjtcbiAgICByZXR1cm4gXCJcIiArIGZuICsgXCIgKFwiICsgdHJbQy5maWxlbmFtZV0gKyBcIjpcIiArICh0cltDLmxpbmVub10gKyAxKSArIFwiKVwiO1xuICB9O1xuXG4gIHdhcm4gPSBmdW5jdGlvbihtKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwgPyBjb25zb2xlLmVycm9yKFwiSUNFRCB3YXJuaW5nOiBcIiArIG0pIDogdm9pZCAwO1xuICB9O1xuXG4gIGV4cG9ydHMudHJhbXBvbGluZSA9IHRyYW1wb2xpbmUgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICghdGlja19jb3VudGVyKDUwMCkpIHtcbiAgICAgIHJldHVybiBmbigpO1xuICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MgIT09IG51bGwgPyBwcm9jZXNzLm5leHRUaWNrIDogdm9pZCAwKSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZuKTtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5EZWZlcnJhbHMgPSBEZWZlcnJhbHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gRGVmZXJyYWxzKGssIHRyYWNlKSB7XG4gICAgICB0aGlzLnRyYWNlID0gdHJhY2U7XG4gICAgICB0aGlzLmNvbnRpbnVhdGlvbiA9IGs7XG4gICAgICB0aGlzLmNvdW50ID0gMTtcbiAgICAgIHRoaXMucmV0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBEZWZlcnJhbHMucHJvdG90eXBlLl9jYWxsID0gZnVuY3Rpb24odHJhY2UpIHtcbiAgICAgIHZhciBjO1xuICAgICAgaWYgKHRoaXMuY29udGludWF0aW9uKSB7XG4gICAgICAgIF9fYWN0aXZlX3RyYWNlID0gdHJhY2U7XG4gICAgICAgIGMgPSB0aGlzLmNvbnRpbnVhdGlvbjtcbiAgICAgICAgdGhpcy5jb250aW51YXRpb24gPSBudWxsO1xuICAgICAgICByZXR1cm4gYyh0aGlzLnJldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gd2FybihcIkVudGVyZWQgZGVhZCBhd2FpdCBhdCBcIiArIChfdHJhY2VfdG9fc3RyaW5nKHRyYWNlKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBEZWZlcnJhbHMucHJvdG90eXBlLl9mdWxmaWxsID0gZnVuY3Rpb24oaWQsIHRyYWNlKSB7XG4gICAgICBpZiAoLS10aGlzLmNvdW50ID4gMCkge1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJhbXBvbGluZSgoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9jYWxsKHRyYWNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KSh0aGlzKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBEZWZlcnJhbHMucHJvdG90eXBlLmRlZmVyID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgdmFyIHNlbGY7XG4gICAgICB0aGlzLmNvdW50Kys7XG4gICAgICBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBtYWtlX2RlZmVyX3JldHVybihzZWxmLCBhcmdzLCBudWxsLCB0aGlzLnRyYWNlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmVycmFscztcblxuICB9KSgpO1xuXG4gIGV4cG9ydHMuZmluZERlZmVycmFsID0gZmluZERlZmVycmFsID0gZnVuY3Rpb24oYXJncykge1xuICAgIHZhciBhLCBfaSwgX2xlbjtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFyZ3MubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGEgPSBhcmdzW19pXTtcbiAgICAgIGlmIChhICE9IG51bGwgPyBhW0MudHJhY2VdIDogdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBleHBvcnRzLlJlbmRlenZvdXMgPSBSZW5kZXp2b3VzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBSdklkO1xuXG4gICAgZnVuY3Rpb24gUmVuZGV6dm91cygpIHtcbiAgICAgIHRoaXMuY29tcGxldGVkID0gW107XG4gICAgICB0aGlzLndhaXRlcnMgPSBbXTtcbiAgICAgIHRoaXMuZGVmZXJfaWQgPSAwO1xuICAgIH1cblxuICAgIFJ2SWQgPSAoZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBSdklkKHJ2LCBpZCwgbXVsdGkpIHtcbiAgICAgICAgdGhpcy5ydiA9IHJ2O1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubXVsdGkgPSBtdWx0aTtcbiAgICAgIH1cblxuICAgICAgUnZJZC5wcm90b3R5cGUuZGVmZXIgPSBmdW5jdGlvbihkZWZlcl9hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ2Ll9kZWZlcl93aXRoX2lkKHRoaXMuaWQsIGRlZmVyX2FyZ3MsIHRoaXMubXVsdGkpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIFJ2SWQ7XG5cbiAgICB9KSgpO1xuXG4gICAgUmVuZGV6dm91cy5wcm90b3R5cGUud2FpdCA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgICB2YXIgeDtcbiAgICAgIGlmICh0aGlzLmNvbXBsZXRlZC5sZW5ndGgpIHtcbiAgICAgICAgeCA9IHRoaXMuY29tcGxldGVkLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiBjYih4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLndhaXRlcnMucHVzaChjYik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJlbmRlenZvdXMucHJvdG90eXBlLmRlZmVyID0gZnVuY3Rpb24oZGVmZXJfYXJncykge1xuICAgICAgdmFyIGlkO1xuICAgICAgaWQgPSB0aGlzLmRlZmVyX2lkKys7XG4gICAgICByZXR1cm4gdGhpcy5fZGVmZXJfd2l0aF9pZChpZCwgZGVmZXJfYXJncyk7XG4gICAgfTtcblxuICAgIFJlbmRlenZvdXMucHJvdG90eXBlLmlkID0gZnVuY3Rpb24oaSwgbXVsdGkpIHtcbiAgICAgIG11bHRpID0gISFtdWx0aTtcbiAgICAgIHJldHVybiBuZXcgUnZJZCh0aGlzLCBpLCBtdWx0aSk7XG4gICAgfTtcblxuICAgIFJlbmRlenZvdXMucHJvdG90eXBlLl9mdWxmaWxsID0gZnVuY3Rpb24oaWQsIHRyYWNlKSB7XG4gICAgICB2YXIgY2I7XG4gICAgICBpZiAodGhpcy53YWl0ZXJzLmxlbmd0aCkge1xuICAgICAgICBjYiA9IHRoaXMud2FpdGVycy5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gY2IoaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVkLnB1c2goaWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSZW5kZXp2b3VzLnByb3RvdHlwZS5fZGVmZXJfd2l0aF9pZCA9IGZ1bmN0aW9uKGlkLCBkZWZlcl9hcmdzLCBtdWx0aSkge1xuICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgcmV0dXJuIG1ha2VfZGVmZXJfcmV0dXJuKHRoaXMsIGRlZmVyX2FyZ3MsIGlkLCB7fSwgbXVsdGkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVuZGV6dm91cztcblxuICB9KSgpO1xuXG4gIGV4cG9ydHMuc3RhY2tXYWxrID0gc3RhY2tXYWxrID0gZnVuY3Rpb24oY2IpIHtcbiAgICB2YXIgbGluZSwgcmV0LCB0ciwgX3JlZjtcbiAgICByZXQgPSBbXTtcbiAgICB0ciA9IGNiID8gY2JbQy50cmFjZV0gOiBfX2FjdGl2ZV90cmFjZTtcbiAgICB3aGlsZSAodHIpIHtcbiAgICAgIGxpbmUgPSBcIiAgIGF0IFwiICsgKF90cmFjZV90b19zdHJpbmcodHIpKTtcbiAgICAgIHJldC5wdXNoKGxpbmUpO1xuICAgICAgdHIgPSB0ciAhPSBudWxsID8gKF9yZWYgPSB0cltDLnBhcmVudF0pICE9IG51bGwgPyBfcmVmW0MudHJhY2VdIDogdm9pZCAwIDogdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIGV4cG9ydHMuZXhjZXB0aW9uSGFuZGxlciA9IGV4Y2VwdGlvbkhhbmRsZXIgPSBmdW5jdGlvbihlcnIsIGxvZ2dlcikge1xuICAgIHZhciBzdGFjaztcbiAgICBpZiAoIWxvZ2dlcikge1xuICAgICAgbG9nZ2VyID0gY29uc29sZS5lcnJvcjtcbiAgICB9XG4gICAgbG9nZ2VyKGVyci5zdGFjayk7XG4gICAgc3RhY2sgPSBzdGFja1dhbGsoKTtcbiAgICBpZiAoc3RhY2subGVuZ3RoKSB7XG4gICAgICBsb2dnZXIoXCJJY2VkICdzdGFjaycgdHJhY2UgKHcvIHJlYWwgbGluZSBudW1iZXJzKTpcIik7XG4gICAgICByZXR1cm4gbG9nZ2VyKHN0YWNrLmpvaW4oXCJcXG5cIikpO1xuICAgIH1cbiAgfTtcblxuICBleHBvcnRzLmNhdGNoRXhjZXB0aW9ucyA9IGZ1bmN0aW9uKGxvZ2dlcikge1xuICAgIHJldHVybiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzICE9PSBudWxsID8gcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZXJyLCBsb2dnZXIpO1xuICAgICAgcmV0dXJuIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KSA6IHZvaWQgMDtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIlxudmFyIGluZGV4T2YgPSBbXS5pbmRleE9mO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFyciwgb2JqKXtcbiAgaWYgKGluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihvYmopO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufTsiLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cbiIsIiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz90PXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP3Q9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYodD1zZWxmKSx0LmpzMmNvZmZlZT1lKCl9fShmdW5jdGlvbigpe3ZhciBlLHQsdTtyZXR1cm4gZnVuY3Rpb24gbihlLHQsdSl7ZnVuY3Rpb24gcihvLHMpe2lmKCF0W29dKXtpZighZVtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighcyYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBsPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgbC5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGx9dmFyIGY9dFtvXT17ZXhwb3J0czp7fX07ZVtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgdT1lW29dWzFdW3RdO3JldHVybiByKHU/dTp0KX0sZixmLmV4cG9ydHMsbixlLHQsdSl9cmV0dXJuIHRbb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288dS5sZW5ndGg7bysrKXIodVtvXSk7cmV0dXJuIHJ9KHsxOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scztpPWUoXCIuL2xpYi90cmFuc2Zvcm1zL2Jhc2VcIik7cj1lKFwiLi9saWIvYnVpbGRlci9iYXNlXCIpO249ZShcIi4vbGliL2J1aWxkZXJcIik7bz1lKFwiLi9saWIvaGVscGVyc1wiKS5idWlsZEVycm9yO3QuZXhwb3J0cz1zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMuYnVpbGQoZSx0KS5jb2RlfTtzLmJ1aWxkPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbyxhO2lmKHQ9PW51bGwpe3Q9e319aWYodC5maWxlbmFtZT09bnVsbCl7dC5maWxlbmFtZT1cImlucHV0LmpzXCJ9aWYodC5pbmRlbnQ9PW51bGwpe3QuaW5kZW50PTJ9dC5zb3VyY2U9ZTt1PXMucGFyc2VKUyhlLHQpO2k9cy50cmFuc2Zvcm0odSx0KSx1PWkuYXN0LGE9aS53YXJuaW5ncztvPXMuZ2VuZXJhdGUodSx0KSxuPW8uY29kZSxyPW8ubWFwO3JldHVybntjb2RlOm4sYXN0OnUsbWFwOnIsd2FybmluZ3M6YX19O3MucGFyc2VKUz1mdW5jdGlvbih0LHUpe3ZhciBuLHIsaTtpZih1PT1udWxsKXt1PXt9fXRyeXtuPWUoXCJlc3ByaW1hXCIpO3JldHVybiBuLnBhcnNlKHQse2xvYzp0cnVlLHJhbmdlOnRydWUsY29tbWVudDp0cnVlfSl9Y2F0Y2goaSl7cj1pO3Rocm93IG8ocix0LHUuZmlsZW5hbWUpfX07cy50cmFuc2Zvcm09ZnVuY3Rpb24odCx1KXt2YXIgbixyLG87aWYodT09bnVsbCl7dT17fX1yPXt9O289ZnVuY3Rpb24oZSl7cmV0dXJuIGkucnVuKHQsdSxlLHIpfTtuPSEodS5jb21tZW50cz09PWZhbHNlKTtpZihuKXtvKFtlKFwiLi9saWIvdHJhbnNmb3Jtcy9jb21tZW50c1wiKV0pfW8oW2UoXCIuL2xpYi90cmFuc2Zvcm1zL2Z1bmN0aW9uc1wiKV0pO28oW2UoXCIuL2xpYi90cmFuc2Zvcm1zL2V4cG9uZW50c1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9pZnNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvaWlmZVwiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9saXRlcmFsc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9sb29wc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9tZW1iZXJzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL29iamVjdHNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvYmluYXJ5XCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL2VtcHR5X3N0YXRlbWVudHNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvb3RoZXJzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL3ByZWNlZGVuY2VcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvcmV0dXJuc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9zd2l0Y2hlc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy91bnN1cHBvcnRlZFwiKV0pO28oW2UoXCIuL2xpYi90cmFuc2Zvcm1zL2Jsb2Nrc1wiKV0pO3JldHVybnthc3Q6dCx3YXJuaW5nczpyLndhcm5pbmdzfX07cy5nZW5lcmF0ZT1mdW5jdGlvbihlLHQpe2lmKHQ9PW51bGwpe3Q9e319cmV0dXJuIG5ldyBuKGUsdCkuZ2V0KCl9O3MudmVyc2lvbj1lKFwiLi9wYWNrYWdlLmpzb25cIikudmVyc2lvbn0se1wiLi9saWIvYnVpbGRlclwiOjMsXCIuL2xpYi9idWlsZGVyL2Jhc2VcIjoyLFwiLi9saWIvaGVscGVyc1wiOjUsXCIuL2xpYi90cmFuc2Zvcm1zL2Jhc2VcIjo2LFwiLi9saWIvdHJhbnNmb3Jtcy9iaW5hcnlcIjo3LFwiLi9saWIvdHJhbnNmb3Jtcy9ibG9ja3NcIjo4LFwiLi9saWIvdHJhbnNmb3Jtcy9jb21tZW50c1wiOjksXCIuL2xpYi90cmFuc2Zvcm1zL2VtcHR5X3N0YXRlbWVudHNcIjoxMCxcIi4vbGliL3RyYW5zZm9ybXMvZXhwb25lbnRzXCI6MTEsXCIuL2xpYi90cmFuc2Zvcm1zL2Z1bmN0aW9uc1wiOjEyLFwiLi9saWIvdHJhbnNmb3Jtcy9pZnNcIjoxMyxcIi4vbGliL3RyYW5zZm9ybXMvaWlmZVwiOjE0LFwiLi9saWIvdHJhbnNmb3Jtcy9saXRlcmFsc1wiOjE1LFwiLi9saWIvdHJhbnNmb3Jtcy9sb29wc1wiOjE2LFwiLi9saWIvdHJhbnNmb3Jtcy9tZW1iZXJzXCI6MTcsXCIuL2xpYi90cmFuc2Zvcm1zL29iamVjdHNcIjoxOCxcIi4vbGliL3RyYW5zZm9ybXMvb3RoZXJzXCI6MTksXCIuL2xpYi90cmFuc2Zvcm1zL3ByZWNlZGVuY2VcIjoyMCxcIi4vbGliL3RyYW5zZm9ybXMvcmV0dXJuc1wiOjIxLFwiLi9saWIvdHJhbnNmb3Jtcy9zd2l0Y2hlc1wiOjIyLFwiLi9saWIvdHJhbnNmb3Jtcy91bnN1cHBvcnRlZFwiOjIzLFwiLi9wYWNrYWdlLmpzb25cIjo2MSxlc3ByaW1hOjQ4fV0sMjpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19O3I9ZShcIi4vc3RyaXBfc3BhY2VzXCIpO249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsdCl7dGhpcy5yb290PWU7dGhpcy5vcHRpb25zPXQhPW51bGw/dDp7fTt0aGlzLndhbGs9aSh0aGlzLndhbGssdGhpcyk7dGhpcy5wYXRoPVtdfXQucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3JldHVybiB0aGlzLndhbGsodGhpcy5yb290KX07dC5wcm90b3R5cGUud2Fsaz1mdW5jdGlvbihlLHQpe3ZhciB1LG4scjtuPXRoaXMucGF0aC5sZW5ndGg7dGhpcy5wYXRoLnB1c2goZSk7aWYodHlwZW9mIHQhPT1cInN0cmluZ1wiKXt0PXZvaWQgMH10fHwodD1lLnR5cGUpO3RoaXMuY3R4PXtwYXRoOnRoaXMucGF0aCx0eXBlOnQscGFyZW50OnRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTJdfTt1PXRoaXNbdF07aWYodSl7cj11LmNhbGwodGhpcyxlLHRoaXMuY3R4KTtpZih0aGlzLmRlY29yYXRvciE9bnVsbCl7cj10aGlzLmRlY29yYXRvcihlLHIpfX1lbHNle3I9dGhpcy5vblVua25vd25Ob2RlKGUsdGhpcy5jdHgpfXRoaXMucGF0aC5zcGxpY2Uobik7cmV0dXJuIHJ9O3QucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciBlO2U9dGhpcy5ydW4oKTtlPXIoZSk7cmV0dXJuIGUudG9TdHJpbmdXaXRoU291cmNlTWFwKCl9O3QucHJvdG90eXBlLmRlY29yYXRvcj1mdW5jdGlvbih0LHUpe3ZhciBuLHIsaSxvLHM7bj1lKFwic291cmNlLW1hcFwiKS5Tb3VyY2VOb2RlO3JldHVybiBuZXcgbih0IT1udWxsPyhyPXQubG9jKSE9bnVsbD8oaT1yLnN0YXJ0KSE9bnVsbD9pLmxpbmU6dm9pZCAwOnZvaWQgMDp2b2lkIDAsdCE9bnVsbD8obz10LmxvYykhPW51bGw/KHM9by5zdGFydCkhPW51bGw/cy5jb2x1bW46dm9pZCAwOnZvaWQgMDp2b2lkIDAsdGhpcy5vcHRpb25zLmZpbGVuYW1lLHUpfTtyZXR1cm4gdH0oKTt0LmV4cG9ydHM9bn0se1wiLi9zdHJpcF9zcGFjZXNcIjo0LFwic291cmNlLW1hcFwiOjUwfV0sMzpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYSxsLGYsYyxwLEQsaCxtPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGQuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxkPXt9Lmhhc093blByb3BlcnR5O3A9ZShcIi4uL2hlbHBlcnNcIiksZj1wLnByZXBlbmRBbGwsYz1wLnF1b3RlLGw9cC5uZXdsaW5lLEQ9cC5zcGFjZSxzPXAuZGVsaW1pdCxvPXAuY29tbWFEZWxpbWl0LGg9cC50b0luZGVudCxhPXAuam9pbkxpbmVzO2k9ZShcIi4uL3RyYW5zZm9ybXMvYmFzZVwiKTtyPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPW49ZnVuY3Rpb24oZSl7bSh0LGUpO2Z1bmN0aW9uIHQoZSx1KXtpZih1PT1udWxsKXt1PXt9fXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9pbmRlbnQ9MH10LnByb3RvdHlwZS5Qcm9ncmFtPWZ1bmN0aW9uKGUpe3RoaXMuY29tbWVudHM9ZS5jb21tZW50cztyZXR1cm4gdGhpcy5CbG9ja1N0YXRlbWVudChlKX07dC5wcm90b3R5cGUuRXhwcmVzc2lvblN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gbCh0aGlzLndhbGsoZS5leHByZXNzaW9uKSl9O3QucHJvdG90eXBlLkFzc2lnbm1lbnRFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9dGhpcy5wYXJlbihEKFt0aGlzLndhbGsoZS5sZWZ0KSxlLm9wZXJhdG9yLHRoaXMud2FsayhlLnJpZ2h0KV0pKTtpZihlLnJpZ2h0LnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiKXt0PVtcIlxcblwiLHRoaXMuaW5kZW50KCksdCxcIlxcblwiXX1yZXR1cm4gdH07dC5wcm90b3R5cGUuSWRlbnRpZmllcj1mdW5jdGlvbihlKXtyZXR1cm5bZS5uYW1lXX07dC5wcm90b3R5cGUuVW5hcnlFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD1mdW5jdGlvbigpe3JldHVybiBlLmFyZ3VtZW50LnR5cGU9PT1cIlVuYXJ5RXhwcmVzc2lvblwifTt1PWZ1bmN0aW9uKCl7cmV0dXJuL15bYS16XSskL2kudGVzdChlLm9wZXJhdG9yKX07aWYodCgpfHx1KCkpe3JldHVybiB0aGlzLnBhcmVuKFtlLm9wZXJhdG9yLFwiIFwiLHRoaXMud2FsayhlLmFyZ3VtZW50KV0pfWVsc2V7cmV0dXJuIHRoaXMucGFyZW4oW2Uub3BlcmF0b3IsdGhpcy53YWxrKGUuYXJndW1lbnQpXSl9fTt0LnByb3RvdHlwZS5CaW5hcnlFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5vcGVyYXRvcjtpZih0PT09XCJpblwiKXt0PVwib2ZcIn1yZXR1cm4gdGhpcy5wYXJlbihEKFt0aGlzLndhbGsoZS5sZWZ0KSx0LHRoaXMud2FsayhlLnJpZ2h0KV0pKX07dC5wcm90b3R5cGUuTGl0ZXJhbD1mdW5jdGlvbihlKXtpZih0eXBlb2YgZS52YWx1ZT09PVwic3RyaW5nXCIpe3JldHVybltjKGUudmFsdWUpXX1lbHNle3JldHVybltlLnJhd119fTt0LnByb3RvdHlwZS5NZW1iZXJFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5jb21wdXRlZD9bXCJbXCIsdGhpcy53YWxrKGUucHJvcGVydHkpLFwiXVwiXTplLl9wcmVmaXhlZD9bdGhpcy53YWxrKGUucHJvcGVydHkpXTpbXCIuXCIsdGhpcy53YWxrKGUucHJvcGVydHkpXTtyZXR1cm4gdGhpcy5wYXJlbihbdGhpcy53YWxrKGUub2JqZWN0KSx0XSl9O3QucHJvdG90eXBlLkxvZ2ljYWxFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dT17XCJ8fFwiOlwib3JcIixcIiYmXCI6XCJhbmRcIn07dD11W2Uub3BlcmF0b3JdO3JldHVybiB0aGlzLnBhcmVuKFt0aGlzLndhbGsoZS5sZWZ0KSxcIiBcIix0LFwiIFwiLHRoaXMud2FsayhlLnJpZ2h0KV0pfTt0LnByb3RvdHlwZS5UaGlzRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtpZihlLl9wcmVmaXgpe3JldHVybltcIkBcIl19ZWxzZXtyZXR1cm5bXCJ0aGlzXCJdfX07dC5wcm90b3R5cGUuQ2FsbEV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHI7dT10aGlzLndhbGsoZS5jYWxsZWUpO3I9dGhpcy5tYWtlU2VxdWVuY2UoZVtcImFyZ3VtZW50c1wiXSk7ZS5faXNTdGF0ZW1lbnQ9dC5wYXJlbnQudHlwZT09PVwiRXhwcmVzc2lvblN0YXRlbWVudFwiO249ci5sZW5ndGg+MDtpZihlLl9pc1N0YXRlbWVudCYmbil7cmV0dXJuIEQoW3Uscl0pfWVsc2V7cmV0dXJuW3UsdGhpcy5wYXJlbihyLHRydWUpXX19O3QucHJvdG90eXBlLklmU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD1lLmFsdGVybmF0ZTtpZigodCE9bnVsbD90LnR5cGU6dm9pZCAwKT09PVwiSWZTdGF0ZW1lbnRcIil7dT10aGlzLmluZGVudChbXCJlbHNlIFwiLHRoaXMud2FsayhlLmFsdGVybmF0ZSxcIklmU3RhdGVtZW50XCIpXSl9ZWxzZSBpZigodCE9bnVsbD90LnR5cGU6dm9pZCAwKT09PVwiQmxvY2tTdGF0ZW1lbnRcIil7dT10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuW3UsXCJlbHNlXCIsXCJcXG5cIix0LndhbGsoZS5hbHRlcm5hdGUpXX19KHRoaXMpKX1lbHNlIGlmKHQhPW51bGwpe3U9dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHUpe3JldHVyblt1LFwiZWxzZVwiLFwiXFxuXCIsdC5pbmRlbnQodC53YWxrKGUuYWx0ZXJuYXRlKSldfX0odGhpcykpfWVsc2V7dT1bXX1yZXR1cm4gdGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByLGksbztpPXQud2FsayhlLnRlc3QpO3I9dC53YWxrKGUuY29uc2VxdWVudCk7aWYoZS5jb25zZXF1ZW50LnR5cGUhPT1cIkJsb2NrU3RhdGVtZW50XCIpe3I9dC5pbmRlbnQocil9bz1lLl9uZWdhdGl2ZT9cInVubGVzc1wiOlwiaWZcIjtyZXR1cm5bbyxcIiBcIixpLFwiXFxuXCIscix1XX19KHRoaXMpKX07dC5wcm90b3R5cGUuQmxvY2tTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWFrZVN0YXRlbWVudHMoZSxlLmJvZHkpfTt0LnByb3RvdHlwZS5tYWtlU3RhdGVtZW50cz1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG8scztzPXQubWFwKHRoaXMud2Fsayk7bz1bXTtmb3IodT1yPTAsaT1zLmxlbmd0aDtyPGk7dT0rK3Ipe249c1t1XTtpZih0W3VdLnR5cGUhPT1cIkJsb2NrU3RhdGVtZW50XCIpe28ucHVzaCh0aGlzLmluZGVudCgpKX1vLnB1c2gobil9cmV0dXJuIG99O3QucHJvdG90eXBlLkxpbmVDb21tZW50PWZ1bmN0aW9uKGUpe3JldHVybltcIiNcIixlLnZhbHVlLFwiXFxuXCJdfTt0LnByb3RvdHlwZS5CbG9ja0NvbW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PShcIiMjI1wiK2UudmFsdWUrXCIjIyNcIikuc3BsaXQoXCJcXG5cIik7dT1bcyh0LFtcIlxcblwiLHRoaXMuaW5kZW50KCldKSxcIlxcblwiXTtyZXR1cm5bXCJcXG5cIix0aGlzLmluZGVudCgpLHUsXCJcXG5cIl19O3QucHJvdG90eXBlLlJldHVyblN0YXRlbWVudD1mdW5jdGlvbihlKXtpZihlLmFyZ3VtZW50KXtyZXR1cm4gRChbXCJyZXR1cm5cIixbdGhpcy53YWxrKGUuYXJndW1lbnQpLFwiXFxuXCJdXSl9ZWxzZXtyZXR1cm5bXCJyZXR1cm5cIixcIlxcblwiXX19O3QucHJvdG90eXBlLkFycmF5RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdCx1O3U9ZS5lbGVtZW50cy5sZW5ndGg7dD11PT09MTtpZih1PT09MCl7cmV0dXJuW1wiW11cIl19ZWxzZSBpZih0KXtyZXR1cm4gRChbXCJbXCIsZS5lbGVtZW50cy5tYXAodGhpcy53YWxrKSxcIl1cIl0pfWVsc2V7cmV0dXJuIHRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih1KXt2YXIgbixyO3I9ZS5lbGVtZW50cy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGwodC53YWxrKGUpKX0pO249ZihyLHQuaW5kZW50KCkpO3JldHVybltcIltcIixcIlxcblwiLG4sdSxcIl1cIl19fSh0aGlzKSl9fTt0LnByb3RvdHlwZS5PYmplY3RFeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjtuPWUucHJvcGVydGllcy5sZW5ndGg7dT1lLl9icmFjZWQ7aWYobj09PTApe3JldHVybltcInt9XCJdfWVsc2UgaWYobj09PTEpe249ZS5wcm9wZXJ0aWVzLm1hcCh0aGlzLndhbGspO2lmKHUpe3JldHVybiB0aGlzLnBhcmVuKEQoW1wie1wiLG4sXCJ9XCJdKSl9ZWxzZXtyZXR1cm4gdGhpcy5wYXJlbihbbl0pfX1lbHNlIGlmKGUuX2xhc3Qpe249ZS5wcm9wZXJ0aWVzLm1hcCh0aGlzLndhbGspO3JldHVybiBzKG4sW1wiXFxuXCIsdGhpcy5pbmRlbnQoKV0pfWVsc2V7bj10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtuPWUucHJvcGVydGllcy5tYXAodC53YWxrKTtyZXR1cm5bXCJcXG5cIixhKG4sdC5pbmRlbnQoKSldfX0odGhpcykpO2lmKHUpe3JldHVybiB0aGlzLnBhcmVuKFtcIntcIixuLFwiXFxuXCIsdGhpcy5pbmRlbnQoKSxcIn1cIl0pfWVsc2V7cmV0dXJuIHRoaXMucGFyZW4oW25dKX19fTt0LnByb3RvdHlwZS5Qcm9wZXJ0eT1mdW5jdGlvbihlKXtpZihlLmtpbmQhPT1cImluaXRcIil7dGhyb3cgbmV3IEVycm9yKFwiUHJvcGVydHk6IG5vdCBzdXJlIGFib3V0IGtpbmQgXCIrZS5raW5kKX1yZXR1cm4gRChbW3RoaXMud2FsayhlLmtleSksXCI6XCJdLHRoaXMud2FsayhlLnZhbHVlKV0pfTt0LnByb3RvdHlwZS5WYXJpYWJsZURlY2xhcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5kZWNsYXJhdGlvbnMubWFwKHRoaXMud2Fsayk7cmV0dXJuIHModCx0aGlzLmluZGVudCgpKX07dC5wcm90b3R5cGUuVmFyaWFibGVEZWNsYXJhdG9yPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9W3RoaXMud2FsayhlLmlkKSxcIiA9IFwiLGwodGhpcy53YWxrKGUuaW5pdCkpXTtpZihlLmluaXQudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCIpe3Q9W1wiXFxuXCIsdGhpcy5pbmRlbnQoKSx0LFwiXFxuXCJdfXJldHVybiB0fTt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO249dGhpcy5tYWtlUGFyYW1zKGUucGFyYW1zLGUuZGVmYXVsdHMpO3U9dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHUpe3JldHVybltuLFwiLT5cIixcIlxcblwiLHQud2FsayhlLmJvZHkpXX19KHRoaXMpKTtpZihlLl9wYXJlbnRoZXNpemVkKXtyZXR1cm5bXCIoXCIsdSx0aGlzLmluZGVudCgpLFwiKVwiXX1lbHNle3JldHVybiB1fX07dC5wcm90b3R5cGUuRW1wdHlTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW119O3QucHJvdG90eXBlLlNlcXVlbmNlRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdDt0PWUuZXhwcmVzc2lvbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm5bZS53YWxrKHQpLFwiXFxuXCJdfX0odGhpcykpO3JldHVybiBzKHQsdGhpcy5pbmRlbnQoKSl9O3QucHJvdG90eXBlLk5ld0V4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHI7dT0oKG49ZS5jYWxsZWUpIT1udWxsP24udHlwZTp2b2lkIDApPT09XCJJZGVudGlmaWVyXCI/W3RoaXMud2FsayhlLmNhbGxlZSldOltcIihcIix0aGlzLndhbGsoZS5jYWxsZWUpLFwiKVwiXTt0PSgocj1lW1wiYXJndW1lbnRzXCJdKSE9bnVsbD9yLmxlbmd0aDp2b2lkIDApP1tcIihcIix0aGlzLm1ha2VTZXF1ZW5jZShlW1wiYXJndW1lbnRzXCJdKSxcIilcIl06W107cmV0dXJuIHRoaXMucGFyZW4oW1wibmV3IFwiLHUsdF0pfTt0LnByb3RvdHlwZS5XaGlsZVN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCJ3aGlsZSBcIix0aGlzLndhbGsoZS50ZXN0KSxcIlxcblwiLHRoaXMubWFrZUxvb3BCb2R5KGUuYm9keSldfTt0LnByb3RvdHlwZS5Db2ZmZWVMb29wU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltcImxvb3BcIixcIlxcblwiLHRoaXMubWFrZUxvb3BCb2R5KGUuYm9keSldfTt0LnByb3RvdHlwZS5CcmVha1N0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCJicmVha1wiLFwiXFxuXCJdfTt0LnByb3RvdHlwZS5Db250aW51ZVN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCJjb250aW51ZVwiLFwiXFxuXCJdfTt0LnByb3RvdHlwZS5EZWJ1Z2dlclN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCJkZWJ1Z2dlclwiLFwiXFxuXCJdfTt0LnByb3RvdHlwZS5UcnlTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO249dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuW1widHJ5XCIsXCJcXG5cIix0LndhbGsoZS5ibG9jayldfX0odGhpcykpO3Q9dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHUpe3JldHVyblt1LHQud2FsayhlLmhhbmRsZXIpXX19KHRoaXMpKTt1PWUuZmluYWxpemVyIT1udWxsP3RoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm5bdSxcImZpbmFsbHlcIixcIlxcblwiLHQud2FsayhlLmZpbmFsaXplcildfX0odGhpcykpOltdO3JldHVybltuLHQsdV19O3QucHJvdG90eXBlLkNhdGNoQ2xhdXNlPWZ1bmN0aW9uKGUpe3JldHVybltcImNhdGNoIFwiLHRoaXMud2FsayhlLnBhcmFtKSxcIlxcblwiLHRoaXMud2FsayhlLmJvZHkpXX07dC5wcm90b3R5cGUuVGhyb3dTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1widGhyb3cgXCIsdGhpcy53YWxrKGUuYXJndW1lbnQpLFwiXFxuXCJdfTt0LnByb3RvdHlwZS5Db25kaXRpb25hbEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGFyZW4oRChbXCJpZlwiLHRoaXMud2FsayhlLnRlc3QpLFwidGhlblwiLHRoaXMud2FsayhlLmNvbnNlcXVlbnQpLFwiZWxzZVwiLHRoaXMud2FsayhlLmFsdGVybmF0ZSldKSl9O3QucHJvdG90eXBlLlVwZGF0ZUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7aWYoZS5wcmVmaXgpe3JldHVybltlLm9wZXJhdG9yLHRoaXMud2FsayhlLmFyZ3VtZW50KV19ZWxzZXtyZXR1cm5bdGhpcy53YWxrKGUuYXJndW1lbnQpLGUub3BlcmF0b3JdfX07dC5wcm90b3R5cGUuU3dpdGNoU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5tYWtlU3RhdGVtZW50cyhlLGUuY2FzZXMpfX0odGhpcykpO3U9dGhpcy53YWxrKGUuZGlzY3JpbWluYW50KTtpZihlLmRpc2NyaW1pbmFudC50eXBlPT09XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIil7dT1bXCIoXCIsdSxcIilcIl19cmV0dXJuW1wic3dpdGNoIFwiLHUsXCJcXG5cIix0XX07dC5wcm90b3R5cGUuQ29mZmVlTGlzdEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWFrZVNlcXVlbmNlKGUuZXhwcmVzc2lvbnMpfTt0LnByb3RvdHlwZS5Td2l0Y2hDYXNlPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD1lLnRlc3Q/W1wid2hlbiBcIix0aGlzLndhbGsoZS50ZXN0KV06W1wiZWxzZVwiXTt1PXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0Lm1ha2VTdGF0ZW1lbnRzKGUsZS5jb25zZXF1ZW50KX19KHRoaXMpKTtyZXR1cm5bdCxcIlxcblwiLHVdfTt0LnByb3RvdHlwZS5Gb3JJblN0YXRlbWVudD1mdW5jdGlvbihlKXt2YXIgdCx1LG47aWYoZS5sZWZ0LnR5cGUhPT1cIlZhcmlhYmxlRGVjbGFyYXRpb25cIil7dT10aGlzLndhbGsoZS5sZWZ0KTtuPXt0eXBlOlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLGV4cHJlc3Npb246e3R5cGU6XCJDb2ZmZWVFc2NhcGVkRXhwcmVzc2lvblwiLHJhdzp1K1wiID0gXCIrdX19O2UuYm9keS5ib2R5PVtuXS5jb25jYXQoZS5ib2R5LmJvZHkpfWVsc2V7dT10aGlzLndhbGsoZS5sZWZ0LmRlY2xhcmF0aW9uc1swXS5pZCl9dD10aGlzLm1ha2VMb29wQm9keShlLmJvZHkpO3JldHVybltcImZvciBcIix1LFwiIG9mIFwiLHRoaXMud2FsayhlLnJpZ2h0KSxcIlxcblwiLHRdfTt0LnByb3RvdHlwZS5tYWtlTG9vcEJvZHk9ZnVuY3Rpb24oZSl7dmFyIHQ7dD0oZSE9bnVsbD9lLnR5cGU6dm9pZCAwKT09PVwiQmxvY2tTdGF0ZW1lbnRcIjtpZighZXx8dCYmZS5ib2R5Lmxlbmd0aD09PTApe3JldHVybiB0aGlzLmluZGVudChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm5bZS5pbmRlbnQoKSxcImNvbnRpbnVlXCIsXCJcXG5cIl19fSh0aGlzKSl9ZWxzZSBpZih0KXtyZXR1cm4gdGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQud2FsayhlKX19KHRoaXMpKX1lbHNle3JldHVybiB0aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm5bdC5pbmRlbnQoKSx0LndhbGsoZSldfX0odGhpcykpfX07dC5wcm90b3R5cGUuQ29mZmVlRXNjYXBlZEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7aWYoZS5fcGFyZW50aGVzaXplZCl7cmV0dXJuW1wiKGBcIixlLnJhdyxcImApXCJdfWVsc2V7cmV0dXJuW1wiYFwiLGUucmF3LFwiYFwiXX19O3QucHJvdG90eXBlLkNvZmZlZVByb3RvdHlwZUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7aWYoZS5jb21wdXRlZCl7cmV0dXJuW3RoaXMud2FsayhlLm9iamVjdCksXCI6OltcIix0aGlzLndhbGsoZS5wcm9wZXJ0eSksXCJdXCJdfWVsc2V7cmV0dXJuW3RoaXMud2FsayhlLm9iamVjdCksXCI6OlwiLHRoaXMud2FsayhlLnByb3BlcnR5KV19fTt0LnByb3RvdHlwZS5Db2ZmZWVEb0V4cHJlc3Npb249ZnVuY3Rpb24oZSl7cmV0dXJuIEQoW1wiZG9cIix0aGlzLndhbGsoZVtcImZ1bmN0aW9uXCJdKV0pfTt0LnByb3RvdHlwZS5tYWtlU2VxdWVuY2U9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHIsaTtmb3IodT1yPTAsaT1lLmxlbmd0aDtyPGk7dT0rK3Ipe3Q9ZVt1XTtuPXU9PT1lLmxlbmd0aC0xO2lmKCFuKXtpZih0LnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiKXt0Ll9wYXJlbnRoZXNpemVkPXRydWV9ZWxzZSBpZih0LnR5cGU9PT1cIk9iamVjdEV4cHJlc3Npb25cIil7dC5fYnJhY2VkPXRydWV9fX1yZXR1cm4gbyhlLm1hcCh0aGlzLndhbGspKX07dC5wcm90b3R5cGUubWFrZVBhcmFtcz1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG8sYTtvPVtdO2ZvcihuPXI9MCxpPWUubGVuZ3RoO3I8aTtuPSsrcil7YT1lW25dO2lmKHRbbl0pe3U9dGhpcy53YWxrKHRbbl0pO28ucHVzaChbdGhpcy53YWxrKGEpLFwiID0gXCIsdV0pfWVsc2V7by5wdXNoKHRoaXMud2FsayhhKSl9fWlmKGUubGVuZ3RoKXtyZXR1cm5bXCIoXCIscyhvLFwiLCBcIiksXCIpIFwiXX1lbHNle3JldHVybltdfX07dC5wcm90b3R5cGUucGFyZW50aGVzaXplQXJndW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyLGksbyxzO289ZVtcImFyZ3VtZW50c1wiXTtzPVtdO2Zvcih1PXI9MCxpPW8ubGVuZ3RoO3I8aTt1PSsrcil7dD1vW3VdO249dT09PWVbXCJhcmd1bWVudHNcIl0ubGVuZ3RoLTE7aWYodC50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIil7aWYoIW4pe3MucHVzaCh0Ll9wYXJlbnRoZXNpemVkPXRydWUpfWVsc2V7cy5wdXNoKHZvaWQgMCl9fWVsc2V7cy5wdXNoKHZvaWQgMCl9fXJldHVybiBzfTt0LnByb3RvdHlwZS5pbmRlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO2lmKHR5cGVvZiBlPT09XCJmdW5jdGlvblwiKXt0PXRoaXMuaW5kZW50KCk7dGhpcy5faW5kZW50Kz0xO3U9ZSh0KTt0aGlzLl9pbmRlbnQtPTE7cmV0dXJuIHV9ZWxzZSBpZihlKXtyZXR1cm5bdGhpcy5pbmRlbnQoKSxlXX1lbHNle249aCh0aGlzLm9wdGlvbnMuaW5kZW50KTtyZXR1cm4gQXJyYXkodGhpcy5faW5kZW50KzEpLmpvaW4obil9fTt0LnByb3RvdHlwZS5wYXJlbj1mdW5jdGlvbihlLHQpe3ZhciB1LG47aWYodD09bnVsbCl7dD0obj10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXSkhPW51bGw/bi5fcGFyZW50aGVzaXplZDp2b2lkIDB9dT1lLnRvU3RyaW5nKCkubWF0Y2goL1xcbiQvKTtpZih0KXtpZih1KXtyZXR1cm5bXCIoXCIsZSx0aGlzLmluZGVudCgpLFwiKVwiXX1lbHNle3JldHVybltcIihcIixlLFwiKVwiXX19ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLm9uVW5rbm93bk5vZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zeW50YXhFcnJvcihlLGUudHlwZStcIiBpcyBub3Qgc3VwcG9ydGVkXCIpfTt0LnByb3RvdHlwZS5zeW50YXhFcnJvcj1pLnByb3RvdHlwZS5zeW50YXhFcnJvcjtyZXR1cm4gdH0ocil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi4vdHJhbnNmb3Jtcy9iYXNlXCI6NixcIi4vYmFzZVwiOjJ9XSw0OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhLGw7bj0vXlxccypcXG4rXFxzKiQvO2w9ZnVuY3Rpb24oZSl7ZT1hKGUpO2U9cyhlKTtlPW8oZSk7ZT1pKGUpO3JldHVybiBlfTtpPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dT0wO3Q9bnVsbDtyZXR1cm4gcihlLHt9LGZ1bmN0aW9uKGUpe2lmKHU9PT0wfHx1PT09MSYmZS5tYXRjaChuKSl7dT0xO3JldHVybiBlfWVsc2UgaWYodT09PTEmJmUubWF0Y2goL15bIFxcdF0rJC8pKXt0PWU7dT0yO3JldHVyblwiXCJ9ZWxzZSBpZih1PT09Mil7dT0xO2lmKGUubWF0Y2gobikpe3JldHVybiBlfWVsc2V7cmV0dXJuIHQrZX19ZWxzZXt1PTA7cmV0dXJuIGV9fSl9O2E9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSx7fSxmdW5jdGlvbihlKXtpZihlLm1hdGNoKG4pKXtyZXR1cm5cIlwifWVsc2V7dGhpc1tcImJyZWFrXCJdKCk7cmV0dXJuIGV9fSl9O3M9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSx7cmV2ZXJzZTp0cnVlfSxmdW5jdGlvbihlKXtpZihlLm1hdGNoKG4pKXtyZXR1cm5cIlwifWVsc2V7dGhpc1tcImJyZWFrXCJdKCk7cmV0dXJuIGUrXCJcXG5cIn19KX07bz1mdW5jdGlvbihlKXt2YXIgdDt0PTA7cmV0dXJuIHIoZSx7fSxmdW5jdGlvbihlKXtpZihlPT09XCJcXG5cIil7dCs9MX1lbHNlIGlmKGUubWF0Y2goL15cXHMqJC8pKXt9ZWxzZXt0PTB9aWYodD49Myl7cmV0dXJuXCJcIn1lbHNle3JldHVybiBlfX0pfTtyPWZ1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk7aWYodD09bnVsbCl7dD17fX1uPWZhbHNlO3I9e1wiYnJlYWtcIjpmdW5jdGlvbihlKXtyZXR1cm4gbj10cnVlfX07aT1mdW5jdGlvbihlLHQsdSl7dmFyIG8scyxhLGwsZixjLHAsRCxoLG0sZCxBO2lmKHQ9PW51bGwpe3Q9e319RD10LnJldmVyc2U/ZnVuY3Rpb24oKXtkPVtdO2Zvcih2YXIgdD1oPWUuY2hpbGRyZW4ubGVuZ3RoLTE7aDw9MD90PD0wOnQ+PTA7aDw9MD90Kys6dC0tKXtkLnB1c2godCl9cmV0dXJuIGR9LmFwcGx5KHRoaXMpOmZ1bmN0aW9uKCl7QT1bXTtmb3IodmFyIHQ9MCx1PWUuY2hpbGRyZW4ubGVuZ3RoOzA8PXU/dDx1OnQ+dTswPD11P3QrKzp0LS0pe0EucHVzaCh0KX1yZXR1cm4gQX0uYXBwbHkodGhpcyk7Zm9yKGY9MCxjPUQubGVuZ3RoO2Y8YztmKyspe3M9RFtmXTtpZihuKXtyZXR1cm4gZX1vPWUuY2hpbGRyZW5bc107aWYoIW8pe31lbHNlIGlmKG8uY2hpbGRyZW4pe2kobyx0LHUpfWVsc2UgaWYobyE9PVwiXCIpe3A9dS5jYWxsKHIsbyk7ZS5jaGlsZHJlbltzXT1wfX1yZXR1cm4gZX07cmV0dXJuIGkuY2FsbChyLGUsdCx1KX07dC5leHBvcnRzPWx9LHt9XSw1OltmdW5jdGlvbihlLHQsdSl7dS5kZWxpbWl0PWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbztvPVtdO2Zvcih1PXI9MCxpPWUubGVuZ3RoO3I8aTt1PSsrcil7bj1lW3VdO2lmKHU+MCl7by5wdXNoKHQpfW8ucHVzaChuKX1yZXR1cm4gb307dS5jb21tYURlbGltaXQ9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHIsaTtpPVtdO2Zvcih0PW49MCxyPWUubGVuZ3RoO248cjt0PSsrbil7dT1lW3RdO2lmKHQ+MCl7aWYoL15cXG4vLnRlc3QodS50b1N0cmluZygpKSl7aS5wdXNoKFwiLFwiKX1lbHNle2kucHVzaChcIiwgXCIpfX1pLnB1c2godSl9cmV0dXJuIGl9O3UucHJlcGVuZEFsbD1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG87bz1bXTtmb3IodT1yPTAsaT1lLmxlbmd0aDtyPGk7dT0rK3Ipe249ZVt1XTtvLnB1c2godCk7by5wdXNoKG4pfXJldHVybiBvfTt1LmJ1aWxkRXJyb3I9ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYSxsLGYsYyxwLEQsaCxtLGQsQSxDLEU7aWYodT09bnVsbCl7dT1cIlwifWlmKGUuanMyY29mZmVlKXtyZXR1cm4gZX1pPWUuZGVzY3JpcHRpb247bD0obT0oZD1lLnN0YXJ0KSE9bnVsbD9kLmxpbmU6dm9pZCAwKSE9bnVsbD9tOmUubGluZU51bWJlcjtyPShBPShDPShFPWUuc3RhcnQpIT1udWxsP0UuY29sdW1uOnZvaWQgMCkhPW51bGw/QzplLmNvbHVtbiYmZS5jb2x1bW4tMSkhPW51bGw/QTowO3M9dStcIjpcIitsK1wiOlwiK3IrXCI6IFwiK2k7Zj10LnNwbGl0KFwiXFxuXCIpO0Q9TWF0aC5tYXgobC0zLDApO2M9bC0xO289Yy50b1N0cmluZygpLmxlbmd0aDthPTE7aWYoZS5lbmQpe2E9TWF0aC5tYXgoZS5lbmQuY29sdW1uLWUuc3RhcnQuY29sdW1uLDEpfWg9ZnVuY3Rpb24oZSl7cmV0dXJuIEFycmF5KDErby1lLnRvU3RyaW5nKCkubGVuZ3RoKS5qb2luKFwiIFwiKStlfTt0PWYuc2xpY2UoRCwrYysxfHw5ZTkpLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiBoKDErdCtEKStcIiAgXCIrZX0pO3QucHVzaChBcnJheShvKzMpLmpvaW4oXCIgXCIpK0FycmF5KHIrMSkuam9pbihcIiBcIikrQXJyYXkoYSsxKS5qb2luKFwiXlwiKSk7dD10LmpvaW4oXCJcXG5cIik7cD1zK1wiXFxuXFxuXCIrdDtuPWU7ZT1uZXcgRXJyb3IocCk7ZS5maWxlbmFtZT11O2UuZGVzY3JpcHRpb249bi5kZXNjcmlwdGlvbjtlLnN0YXJ0PXtsaW5lOmwsY29sdW1uOnJ9O2UuZW5kPW4uZW5kO2Uuc291cmNlUHJldmlldz10O2UuanMyY29mZmVlPXRydWU7cmV0dXJuIGV9O3Uuc3BhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCx1KXtpZih1PT09MCl7cmV0dXJuIGUuY29uY2F0KFt0XSl9ZWxzZSBpZih0LnRvU3RyaW5nKCkuc3Vic3RyKDAsMSk9PT1cIlxcblwiKXtyZXR1cm4gZS5jb25jYXQoW3RdKX1lbHNle3JldHVybiBlLmNvbmNhdChbXCIgXCIsdF0pfX0sW10pfTt1Lm5ld2xpbmU9ZnVuY3Rpb24oZSl7aWYoL1xcbiQvLnRlc3QoZS50b1N0cmluZygpKSl7cmV0dXJuIGV9ZWxzZXtyZXR1cm5bZSxcIlxcblwiXX19O3UuaW5zcGVjdD1mdW5jdGlvbih0KXtyZXR1cm5cIn5+fn5cXG5cIitlKFwidXRpbFwiKS5pbnNwZWN0KHQse2RlcHRoOjFlMyxjb2xvcnM6dHJ1ZX0pK1wiXFxufn5+flwifTt1LnJlcGxhY2U9ZnVuY3Rpb24oZSx0KXt0LnJhbmdlPWUucmFuZ2U7dC5sb2M9ZS5sb2M7cmV0dXJuIHR9O3UuY2xvbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpfTt1LnF1b3RlPWZ1bmN0aW9uKGUpe3ZhciB0LHU7aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0PWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTt0PWZ1bmN0aW9uKCl7dmFyIGUsdSxuO249W107Zm9yKGU9MCx1PTQtdC5sZW5ndGg7MDw9dT9lPHU6ZT51OzA8PXU/ZSsrOmUtLSl7bi5wdXNoKFwiMFwiKX1yZXR1cm4gbn0oKS5qb2luKFwiXCIpK3Q7cmV0dXJuXCJcXFxcdVwiK3R9O3U9ZS5yZXBsYWNlKC9cXFxcL2csXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpLnJlcGxhY2UoL1tcXHUwMDAwLVxcdTAwMTlcXHUwMGFkXFx1MjAwYlxcdTIwMjhcXHUyMDI5XFx1ZmVmZl0vZyx0KTtyZXR1cm5cIidcIit1K1wiJ1wifWVsc2V7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfX07dS5nZXRQcmVjZWRlbmNlPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyO3I9ZS50eXBlO3U9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5kZXhPZihlLm9wZXJhdG9yKT4tMX07dD17XCIqKlwiOjE3LFwiKlwiOjE0LFwiL1wiOjE0LFwiJVwiOjE0LFwiK1wiOjEzLFwiLVwiOjEzLFwiPDxcIjoxMixcIj4+XCI6MTIsXCI+Pj5cIjoxMixcIjxcIjoxMSxcIj5cIjoxMSxcIjw9XCI6MTEsXCI+PVwiOjExLFwiaW5cIjoxMSxcImluc3RhbmNlb2ZcIjoxMSxcIj09XCI6MTAsXCI9PT1cIjoxMCxcIiE9XCI6MTAsXCIhPT1cIjoxMCxcIiZcIjo5LFwiXlwiOjgsXCJ8XCI6N307bj17XCImJlwiOjYsXCJ8fFwiOjV9O3N3aXRjaChyKXtjYXNlXCJMaXRlcmFsXCI6Y2FzZVwiSWRlbnRpZmllclwiOnJldHVybiA5OTtjYXNlXCJNZW1iZXJFeHByZXNzaW9uXCI6Y2FzZVwiQ2FsbEV4cHJlc3Npb25cIjpyZXR1cm4gMTg7Y2FzZVwiTmV3RXhwcmVzc2lvblwiOmlmKGVbXCJhcmd1bWVudHNcIl0ubGVuZ3RoPT09MCl7cmV0dXJuIDE3fWVsc2V7cmV0dXJuIDE4fWJyZWFrO2Nhc2VcIlVwZGF0ZUV4cHJlc3Npb25cIjppZihlLnByZWZpeCl7cmV0dXJuIDE1fWVsc2V7cmV0dXJuIDE2fWJyZWFrO2Nhc2VcIlVuYXJ5RXhwcmVzc2lvblwiOnJldHVybiAxNTtjYXNlXCJCaW5hcnlFeHByZXNzaW9uXCI6cmV0dXJuIHRbZS5vcGVyYXRvcl07Y2FzZVwiTG9naWNhbEV4cHJlc3Npb25cIjpyZXR1cm4gbltlLm9wZXJhdG9yXTtjYXNlXCJDb25kaXRpb25hbEV4cHJlc3Npb25cIjpyZXR1cm4gNDtjYXNlXCJBc3NpZ25tZW50RXhwcmVzc2lvblwiOnJldHVybiAzO2Nhc2VcIlNlcXVlbmNlRXhwcmVzc2lvblwiOnJldHVybiAwO2RlZmF1bHQ6cmV0dXJuLTF9fTt1Lmxhc3RTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk7Zm9yKHQ9bj1pPWUubGVuZ3RoLTE7aTw9MD9uPD0wOm4+PTA7dD1pPD0wPysrbjotLW4pe3I9ZVt0XTtpZighcil7Y29udGludWV9aWYoIXUuaXNDb21tZW50KHIpKXtyZXR1cm4gcn19fTt1LmdldFJldHVyblN0YXRlbWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbztyPXUuZ2V0UmV0dXJuU3RhdGVtZW50cyxpPXUubGFzdFN0YXRlbWVudDtpZighZSl7cmV0dXJufWVsc2UgaWYoZS5sZW5ndGgpe289aShlKX1lbHNle289ZX1pZighbyl7cmV0dXJuW119ZWxzZSBpZihvLnR5cGU9PT1cIlJldHVyblN0YXRlbWVudFwiKXtyZXR1cm5bb119ZWxzZSBpZihvLnR5cGU9PT1cIkJsb2NrU3RhdGVtZW50XCIpe3JldHVybiByKG8uYm9keSl9ZWxzZSBpZihvLnR5cGU9PT1cIklmU3RhdGVtZW50XCImJm8uY29uc2VxdWVudCYmby5hbHRlcm5hdGUpe249cihvLmNvbnNlcXVlbnQpO3Q9cihvLmFsdGVybmF0ZSk7aWYobi5sZW5ndGg+MCYmdC5sZW5ndGg+MCl7cmV0dXJuIG4uY29uY2F0KHQpfWVsc2V7cmV0dXJuW119fWVsc2V7cmV0dXJuW119fTt1LmpvaW5MaW5lcz1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG8scztzPVtdO2Zvcih1PWk9MCxvPWUubGVuZ3RoO2k8bzt1PSsraSl7cj1lW3VdO3MucHVzaCh0KTtzLnB1c2gocik7bj11IT09ZS5sZW5ndGgtMTtpZighci50b1N0cmluZygpLm1hdGNoKC9cXG4kLykmJm4pe3MucHVzaChcIlxcblwiKX19cmV0dXJuIHN9O3UucmVzZXJ2ZWQ9e2tleXdvcmRzOltcInRoZW5cIixcInVubGVzc1wiLFwidW50aWxcIixcImxvb3BcIixcIm9mXCIsXCJieVwiLFwid2hlblwiXSxyZXNlcnZlZDpbXCJjYXNlXCIsXCJkZWZhdWx0XCIsXCJmdW5jdGlvblwiLFwidmFyXCIsXCJ2b2lkXCIsXCJ3aXRoXCIsXCJjb25zdFwiLFwibGV0XCIsXCJlbnVtXCIsXCJleHBvcnRcIixcImltcG9ydFwiLFwibmF0aXZlXCIsXCJfX2hhc1Byb3BcIixcIl9fZXh0ZW5kc1wiLFwiX19zbGljZVwiLFwiX19iaW5kXCIsXCJfX2luZGV4T2ZcIixcImltcGxlbWVudHNcIixcImludGVyZmFjZVwiLFwicGFja2FnZVwiLFwicHJpdmF0ZVwiLFwicHJvdGVjdGVkXCIsXCJwdWJsaWNcIixcInN0YXRpY1wiLFwieWllbGRcIl0sYWxpYXNlczpbXCJhbmRcIixcIm9yXCIsXCJpc1wiLFwiaXNudFwiLFwibm90XCIsXCJ5ZXNcIixcIm5vXCIsXCJvblwiLFwib2ZmXCJdfTt1LnJlc2VydmVkV29yZHM9dS5yZXNlcnZlZC5rZXl3b3Jkcy5jb25jYXQodS5yZXNlcnZlZC5yZXNlcnZlZC5jb25jYXQodS5yZXNlcnZlZC5hbGlhc2VzKSk7dS5uZXh0VW50aWw9ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYTtyPWUuaW5kZXhPZih0KTtmb3Iobj1pPXM9cisxLGE9ZS5sZW5ndGg7czw9YT9pPD1hOmk+PWE7bj1zPD1hPysraTotLWkpe289ZVtuXTtpZigobyE9bnVsbD9vLnR5cGU6dm9pZCAwKSYmdShvKSl7cmV0dXJuIG99fX07dS5uZXh0Tm9uQ29tbWVudD1mdW5jdGlvbihlLHQpe3JldHVybiB1Lm5leHRVbnRpbChlLHQsZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZSE9PVwiQmxvY2tDb21tZW50XCImJmUudHlwZSE9PVwiTGluZUNvbW1lbnRcIn0pfTt1LmlzTG9vcD1mdW5jdGlvbihlKXtyZXR1cm4gZS50ZXN0PT1udWxsfHx1LmlzVHJ1dGh5KGUudGVzdCl9O3UuaXNUcnV0aHk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PVwiTGl0ZXJhbFwiJiZlLnZhbHVlfTt1LmVzY2FwZUpzPWZ1bmN0aW9uKHQpe3JldHVybiB1LnJlcGxhY2UodCx7dHlwZTpcIkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uXCIscmF3OmUoXCJlc2NvZGVnZW5cIikuZ2VuZXJhdGUodCl9KX07dS5ub25Db21tZW50cz1mdW5jdGlvbihlKXtyZXR1cm4gZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXUuaXNDb21tZW50KGUpfSl9O3UuaXNDb21tZW50PWZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1cIkxpbmVDb21tZW50XCJ8fGUudHlwZT09PVwiQmxvY2tDb21tZW50XCJ9O3UudG9JbmRlbnQ9ZnVuY3Rpb24oZSl7aWYoZT09PVwidGFiXCJ8fGU9PT1cInRcIil7cmV0dXJuXCJcdFwifWVsc2UgaWYodHlwZW9mIGU9PT1cInN0cmluZ1wiJiZcIlwiKyArZSE9PWUpe3JldHVybiBlfWVsc2V7cmV0dXJuIEFycmF5KCtlKzEpLmpvaW4oXCIgXCIpfX19LHtlc2NvZGVnZW46MjksdXRpbDoyOH1dLDY6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGEsbCxmLGM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYocC5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LHA9e30uaGFzT3duUHJvcGVydHksRD1bXS5zbGljZTtzPWUoXCIuLi9oZWxwZXJzXCIpLHI9cy5idWlsZEVycm9yLG89cy5jbG9uZSxhPXMucmVwbGFjZSxmPXMudG9JbmRlbnQ7dC5leHBvcnRzPW49ZnVuY3Rpb24oKXt0LnJ1bj1mdW5jdGlvbihlLHUsbixyKXt2YXIgaSxvLHM7aT1mdW5jdGlvbihlKXtjKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHR9KHQpO2woaSxuKTtzPW5ldyBpKGUsdSk7bz1zLnJ1bigpO2lmKHIud2FybmluZ3M9PW51bGwpe3Iud2FybmluZ3M9W119ci53YXJuaW5ncz1yLndhcm5pbmdzLmNvbmNhdChzLndhcm5pbmdzKTtyZXR1cm4gb307ZnVuY3Rpb24gdChlLHQpe3RoaXMuYXN0PWU7dGhpcy5vcHRpb25zPXQ7dGhpcy5zY29wZXM9W107dGhpcy5jdHg9e3ZhcnM6W119O3RoaXMud2FybmluZ3M9W119dC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVjdXJzZSh0aGlzLmFzdCl9O3QucHJvdG90eXBlLnJlY3Vyc2U9ZnVuY3Rpb24oZSl7dmFyIHQsdTt1PXRoaXM7dGhpcy5kZXB0aD0wO3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsdSxuKXt2YXIgcixpLG8scztlLm5vZGU9dTtlLmRlcHRoKz10PT09XCJFbnRlclwiPysxOi0xO3I9dD09PVwiRW50ZXJcIj9cIlwiK3UudHlwZTp1LnR5cGUrXCJFeGl0XCI7aWYodHlwZW9mIGVbaT1cIm9uQmVmb3JlXCIrdF09PT1cImZ1bmN0aW9uXCIpe2VbaV0odSxuKX1zPXR5cGVvZiBlW3JdPT09XCJmdW5jdGlvblwiP2Vbcl0odSxuKTp2b2lkIDA7aWYodHlwZW9mIGVbbz1cIm9uXCIrdF09PT1cImZ1bmN0aW9uXCIpe2Vbb10odSxuKX1yZXR1cm4gc319KHRoaXMpO3RoaXMuZXN0cmF2ZXJzZSgpLnJlcGxhY2UoZSx7ZW50ZXI6ZnVuY3Rpb24oZSxuKXt1LmNvbnRyb2xsZXI9dGhpcztyZXR1cm4gdChcIkVudGVyXCIsZSxuKX0sbGVhdmU6ZnVuY3Rpb24oZSx1KXtyZXR1cm4gdChcIkV4aXRcIixlLHUpfX0pO3JldHVybiBlfTt0LnByb3RvdHlwZS5za2lwPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5jb250cm9sbGVyKSE9bnVsbD9lLnNraXAoKTp2b2lkIDB9O3QucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBlO3JldHVybihlPXRoaXMuY29udHJvbGxlcikhPW51bGw/ZS5yZW1vdmUoKTp2b2lkIDB9O3QucHJvdG90eXBlLmVzdHJhdmVyc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXN0cmF2ZXJzZSE9bnVsbD90aGlzLl9lc3RyYXZlcnNlOnRoaXMuX2VzdHJhdmVyc2U9ZnVuY3Rpb24oKXt2YXIgdDt0PWUoXCJlc3RyYXZlcnNlXCIpO3QuVmlzaXRvcktleXMuQ29mZmVlRXNjYXBlZEV4cHJlc3Npb249W107dC5WaXNpdG9yS2V5cy5Db2ZmZWVMaXN0RXhwcmVzc2lvbj1bXCJ0ZXN0XCIsXCJib2R5XCJdO3QuVmlzaXRvcktleXMuQ29mZmVlUHJvdG90eXBlRXhwcmVzc2lvbj1bXCJvYmplY3RcIixcInByb3BlcnR5XCIsXCJjb21wdXRlZFwiXTt0LlZpc2l0b3JLZXlzLkNvZmZlZUxvb3BTdGF0ZW1lbnQ9W1wiYm9keVwiXTt0LlZpc2l0b3JLZXlzLkNvZmZlZURvRXhwcmVzc2lvbj1bXCJmdW5jdGlvblwiXTt0LlZpc2l0b3JLZXlzLkJsb2NrQ29tbWVudD1bXTt0LlZpc2l0b3JLZXlzLkxpbmVDb21tZW50PVtdO3JldHVybiB0fSgpfTt0LnByb3RvdHlwZS5wdXNoU3RhY2s9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO249W3RoaXMuc2NvcGUsdGhpcy5jdHhdLHU9blswXSx0PW5bMV07dGhpcy5zY29wZXMucHVzaChbdGhpcy5zY29wZSx0aGlzLmN0eF0pO3RoaXMuY3R4PW8odGhpcy5jdHgpO3RoaXMuc2NvcGU9ZTtyZXR1cm4gdHlwZW9mIHRoaXMub25TY29wZUVudGVyPT09XCJmdW5jdGlvblwiP3RoaXMub25TY29wZUVudGVyKHRoaXMuc2NvcGUsdGhpcy5jdHgsdSx0KTp2b2lkIDB9O3QucHJvdG90eXBlLnBvcFN0YWNrPWZ1bmN0aW9uKCl7dmFyIGUsdCx1LG47dT1bdGhpcy5zY29wZSx0aGlzLmN0eF0sdD11WzBdLGU9dVsxXTtuPXRoaXMuc2NvcGVzLnBvcCgpLHRoaXMuc2NvcGU9blswXSx0aGlzLmN0eD1uWzFdO3JldHVybiB0eXBlb2YgdGhpcy5vblNjb3BlRXhpdD09PVwiZnVuY3Rpb25cIj90aGlzLm9uU2NvcGVFeGl0KHRoaXMuc2NvcGUsdGhpcy5jdHgsdCxlKTp2b2lkIDB9O3QucHJvdG90eXBlLnN5bnRheEVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixpO3U9cih7c3RhcnQ6KG49ZS5sb2MpIT1udWxsP24uc3RhcnQ6dm9pZCAwLGVuZDooaT1lLmxvYykhPW51bGw/aS5lbmQ6dm9pZCAwLGRlc2NyaXB0aW9uOnR9LHRoaXMub3B0aW9ucy5zb3VyY2UsdGhpcy5vcHRpb25zLmZpbGVuYW1lKTt0aHJvdyB1fTt0LnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjtyZXR1cm4gdGhpcy53YXJuaW5ncy5wdXNoKHtzdGFydDoodT1lLmxvYykhPW51bGw/dS5zdGFydDp2b2lkIDAsZW5kOihuPWUubG9jKSE9bnVsbD9uLmVuZDp2b2lkIDAsZmlsZW5hbWU6dGhpcy5vcHRpb25zLmZpbGVuYW1lLGRlc2NyaXB0aW9uOnR9KX07dC5wcm90b3R5cGUuUHJvZ3JhbT1mdW5jdGlvbihlKXt0aGlzLnB1c2hTdGFjayhlKTtyZXR1cm4gZX07dC5wcm90b3R5cGUuUHJvZ3JhbUV4aXQ9ZnVuY3Rpb24oZSl7dGhpcy5wb3BTdGFjaygpO3JldHVybiBlfTt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy5wdXNoU3RhY2soZS5ib2R5KTtyZXR1cm4gZX07dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uRXhpdD1mdW5jdGlvbihlKXt0aGlzLnBvcFN0YWNrKCk7cmV0dXJuIGV9O3QucHJvdG90eXBlLmVzY2FwZUpzPWZ1bmN0aW9uKHQsdSl7aWYodT09bnVsbCl7dT17fX1yZXR1cm4gYSh0LHt0eXBlOlwiQ29mZmVlRXNjYXBlZEV4cHJlc3Npb25cIixfcGFyZW50aGVzaXplZDp1LnBhcmVudGhlc2l6ZWQscmF3OmUoXCJlc2NvZGVnZW5cIikuZ2VuZXJhdGUodCx7Zm9ybWF0OntpbmRlbnQ6e3N0eWxlOmYodGhpcy5vcHRpb25zLmluZGVudCl9fX0pfSl9O3JldHVybiB0fSgpO2w9ZnVuY3Rpb24oZSx0KXt2YXIgdTt1PXt9O3QuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbixyLG8scztvPXQucHJvdG90eXBlO3M9W107Zm9yKHIgaW4gbyl7bj1vW3JdO2lmKHQucHJvdG90eXBlLmhhc093blByb3BlcnR5KHIpKXtpZih1W3JdJiZyIT09XCJjb25zdHJ1Y3RvclwiKXtlLnByb3RvdHlwZVtyXT1pKGUucHJvdG90eXBlW3JdLG4pfWVsc2V7ZS5wcm90b3R5cGVbcl09bn1zLnB1c2godVtyXT10cnVlKX1lbHNle3MucHVzaCh2b2lkIDApfX1yZXR1cm4gc30pO3JldHVybiBlfTtpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHUsbixyLGk7bj1hcmd1bWVudHNbMF0sdT0yPD1hcmd1bWVudHMubGVuZ3RoP0QuY2FsbChhcmd1bWVudHMsMSk6W107aT1uLnR5cGU7cj1lLmJpbmQodGhpcykuYXBwbHkobnVsbCxbbl0uY29uY2F0KEQuY2FsbCh1KSkpO2lmKHIudHlwZT09PWkpe3I9dC5iaW5kKHRoaXMpLmFwcGx5KG51bGwsW3JdLmNvbmNhdChELmNhbGwodSkpKX1yZXR1cm4gcn19fSx7XCIuLi9oZWxwZXJzXCI6NSxlc2NvZGVnZW46MjksZXN0cmF2ZXJzZTo0OX1dLDc6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGkuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxpPXt9Lmhhc093blByb3BlcnR5O249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkJpbmFyeUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy53YXJuQWJvdXRFcXVhbHMoZSk7dGhpcy51cGRhdGVFcXVhbHMoZSk7cmV0dXJuIHRoaXMuZXNjYXBlRXF1YWxzRm9yQ29tcGF0aWJpbGl0eShlKX07dC5wcm90b3R5cGUudXBkYXRlRXF1YWxzPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD17XCI9PT1cIjpcIj09XCIsXCIhPT1cIjpcIiE9XCJ9O3U9ZS5vcGVyYXRvcjtpZih0W3VdKXtlLm9wZXJhdG9yPXRbdV19cmV0dXJuIGV9O3QucHJvdG90eXBlLmVzY2FwZUVxdWFsc0ZvckNvbXBhdGliaWxpdHk9ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLm9wZXJhdG9yPT09XCI9PVwifHxlLm9wZXJhdG9yPT09XCIhPVwiO2lmKHRoaXMub3B0aW9ucy5jb21wYXQmJnQpe3JldHVybiB0aGlzLmVzY2FwZUpzKGUpfWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS53YXJuQWJvdXRFcXVhbHM9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO3Q9ZS5vcGVyYXRvcjtuPXtcIj09XCI6XCI9PT1cIixcIiE9XCI6XCIhPT1cIn07aWYodD09PVwiPT1cInx8dD09PVwiIT1cIil7dT1uW3RdO3RoaXMud2FybihlLFwiT3BlcmF0b3IgJ1wiK3QrXCInIGlzIG5vdCBzdXBwb3J0ZWQgaW4gQ29mZmVlU2NyaXB0LCBcIisoXCJ1c2UgJ1wiK3UrXCInIGluc3RlYWRcIikpfXJldHVybiBlfTtyZXR1cm4gdH0obil9LHtcIi4vYmFzZVwiOjZ9XSw4OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKG8uY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxvPXt9Lmhhc093blByb3BlcnR5LHM9W10uc2xpY2U7cj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1uPWZ1bmN0aW9uKGUpe2kodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNvbnNvbGlkYXRlQmxvY2tJbnRvUGFyZW50KGUsdCl9O3QucHJvdG90eXBlLmNvbnNvbGlkYXRlQmxvY2tJbnRvUGFyZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjtuPWZhbHNlO3U9ZnVuY3Rpb24odSl7cmV0dXJuIGZ1bmN0aW9uKHUscil7dmFyIGksbyxhO2lmKHQudHlwZT09PXUmJigobz10W3JdKSE9bnVsbD9vLmluZGV4T2Y6dm9pZCAwKSl7aT10W3JdLmluZGV4T2YoZSk7aWYodFtyXSYmfmkpeyhhPXRbcl0pLnNwbGljZS5hcHBseShhLFtpLDFdLmNvbmNhdChzLmNhbGwoZS5ib2R5KSkpO249dHJ1ZTtyZXR1cm4gdHJ1ZX19fX0odGhpcyk7dShcIkJsb2NrU3RhdGVtZW50XCIsXCJib2R5XCIpfHx1KFwiU3dpdGNoQ2FzZVwiLFwiY29uc2VxdWVudFwiKXx8dShcIklmU3RhdGVtZW50XCIsXCJjb25zZXF1ZW50XCIpfHx1KFwiSWZTdGF0ZW1lbnRcIixcImFsdGVybmF0ZVwiKTtpZihuKXtyZXR1cm4gdGhpcy5za2lwKCl9ZWxzZXtyZXR1cm4gZX19O3JldHVybiB0fShyKX0se1wiLi9iYXNlXCI6Nn1dLDk6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGkuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxpPXt9Lmhhc093blByb3BlcnR5O249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLlByb2dyYW1FeGl0PW51bGw7dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uPW51bGw7dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uRXhpdD1udWxsO3QucHJvdG90eXBlLlByb2dyYW09ZnVuY3Rpb24oZSl7dGhpcy5jb21tZW50cz1lLmNvbW1lbnRzO3RoaXMudXBkYXRlQ29tbWVudFR5cGVzKCk7ZS5ib2R5PXRoaXMuYWRkQ29tbWVudHNUb0xpc3QoWzAsSW5maW5pdHldLGUuYm9keSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLkJsb2NrU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmluamVjdENvbW1lbnRzKGUsXCJib2R5XCIpfTt0LnByb3RvdHlwZS5Td2l0Y2hTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5qZWN0Q29tbWVudHMoZSxcImNhc2VzXCIpfTt0LnByb3RvdHlwZS5Td2l0Y2hDYXNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmluamVjdENvbW1lbnRzKGUsXCJjb25zZXF1ZW50XCIpfTt0LnByb3RvdHlwZS5CbG9ja0NvbW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udmVydENvbW1lbnRQcmVmaXhlcyhlKX07dC5wcm90b3R5cGUudXBkYXRlQ29tbWVudFR5cGVzPWZ1bmN0aW9uKCl7dmFyIGUsdCx1LG4scjtuPXRoaXMuY29tbWVudHM7cj1bXTtmb3IodD0wLHU9bi5sZW5ndGg7dDx1O3QrKyl7ZT1uW3RdO3N3aXRjaChlLnR5cGUpe2Nhc2VcIkJsb2NrXCI6ci5wdXNoKGUudHlwZT1cIkJsb2NrQ29tbWVudFwiKTticmVhaztjYXNlXCJMaW5lXCI6ci5wdXNoKGUudHlwZT1cIkxpbmVDb21tZW50XCIpO2JyZWFrO2RlZmF1bHQ6ci5wdXNoKHZvaWQgMCl9fXJldHVybiByfTt0LnByb3RvdHlwZS5pbmplY3RDb21tZW50cz1mdW5jdGlvbihlLHQpe2lmKHQ9PW51bGwpe3Q9XCJib2R5XCJ9ZVt0XT10aGlzLmFkZENvbW1lbnRzVG9MaXN0KGUucmFuZ2UsZVt0XSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLmFkZENvbW1lbnRzVG9MaXN0PWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbyxzLGEsbCxmO2lmKGU9PW51bGwpe3JldHVybiB0fWE9W107bz1lWzBdO2Y9ZVsxXTt1PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHUpe3JldHVybiBlLmNvbW1lbnRzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5yYW5nZVswXT49dCYmZS5yYW5nZVsxXTw9dX0pfX0odGhpcyk7aWYodC5sZW5ndGg+MCl7Zm9yKG49aT0wLHM9dC5sZW5ndGg7aTxzO249KytpKXtyPXRbbl07aWYoci5yYW5nZSl7bD11KG8sci5yYW5nZVswXSk7YT1hLmNvbmNhdChsKX1hLnB1c2gocik7aWYoci5yYW5nZSl7bz1yLnJhbmdlWzFdfX19bD11KG8sZik7YT1hLmNvbmNhdChsKTtyZXR1cm4gYX07dC5wcm90b3R5cGUuY29udmVydENvbW1lbnRQcmVmaXhlcz1mdW5jdGlvbihlKXt2YXIgdCx1O3U9ZS52YWx1ZS5zcGxpdChcIlxcblwiKTt0PWUubG9jLnN0YXJ0LmNvbHVtbjt1PXUubWFwKGZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvO2k9bj09PXUubGVuZ3RoLTEmJmUubWF0Y2goL15cXHMqJC8pO3I9bj09PTAmJnUubGVuZ3RoPT09MTtvPWUuc3Vic3RyKDAsdCk7aWYoby5tYXRjaCgvXlxccyskLykpe2U9ZS5zdWJzdHIodCl9aWYoaSl7cmV0dXJuXCJcIn1lbHNlIGlmKHIpe3JldHVybiBlfWVsc2V7ZT1lLnJlcGxhY2UoL14gXFwqLyxcIiNcIik7cmV0dXJuIGUrXCJcXG5cIn19KTtlLnZhbHVlPXUuam9pbihcIlwiKTtyZXR1cm4gZX07cmV0dXJuIHR9KG4pfSx7XCIuL2Jhc2VcIjo2fV0sMTA6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGkuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxpPXt9Lmhhc093blByb3BlcnR5O249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkJsb2NrU3RhdGVtZW50RXhpdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmVFbXB0eVN0YXRlbWVudHNGcm9tQm9keShlKX07dC5wcm90b3R5cGUuU3dpdGNoQ2FzZUV4aXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlRW1wdHlTdGF0ZW1lbnRzRnJvbUJvZHkoZSxcImNvbnNlcXVlbnRcIil9O3QucHJvdG90eXBlLlN3aXRjaFN0YXRlbWVudEV4aXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlRW1wdHlTdGF0ZW1lbnRzRnJvbUJvZHkoZSxcImNhc2VzXCIpfTt0LnByb3RvdHlwZS5Qcm9ncmFtRXhpdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmVFbXB0eVN0YXRlbWVudHNGcm9tQm9keShlLFwiYm9keVwiKX07dC5wcm90b3R5cGUucmVtb3ZlRW1wdHlTdGF0ZW1lbnRzRnJvbUJvZHk9ZnVuY3Rpb24oZSx0KXtpZih0PT1udWxsKXt0PVwiYm9keVwifWVbdF09ZVt0XS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZSE9PVwiRW1wdHlTdGF0ZW1lbnRcIn0pO3JldHVybiBlfTtyZXR1cm4gdH0obil9LHtcIi4vYmFzZVwiOjZ9XSwxMTpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihvLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbz17fS5oYXNPd25Qcm9wZXJ0eTtyPWUoXCIuLi9oZWxwZXJzXCIpLnJlcGxhY2U7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuQ2FsbEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLGksbyxzLGEsbCxmLGMscDt0PSgodT1lLmNhbGxlZSkhPW51bGw/dS50eXBlOnZvaWQgMCk9PT1cIk1lbWJlckV4cHJlc3Npb25cIiYmKChuPWUuY2FsbGVlKSE9bnVsbD8oaT1uLm9iamVjdCkhPW51bGw/aS50eXBlOnZvaWQgMDp2b2lkIDApPT09XCJJZGVudGlmaWVyXCImJigobz1lLmNhbGxlZSkhPW51bGw/KHM9by5vYmplY3QpIT1udWxsP3MubmFtZTp2b2lkIDA6dm9pZCAwKT09PVwiTWF0aFwiJiYoKGE9ZS5jYWxsZWUpIT1udWxsPyhsPWEucHJvcGVydHkpIT1udWxsP2wudHlwZTp2b2lkIDA6dm9pZCAwKT09PVwiSWRlbnRpZmllclwiJiYoKGY9ZS5jYWxsZWUpIT1udWxsPyhjPWYucHJvcGVydHkpIT1udWxsP2MubmFtZTp2b2lkIDA6dm9pZCAwKT09PVwicG93XCImJigocD1lW1wiYXJndW1lbnRzXCJdKSE9bnVsbD9wLmxlbmd0aDp2b2lkIDApPT09MjtpZighdCl7cmV0dXJuIGV9cmV0dXJuIHIoZSx7dHlwZTpcIkJpbmFyeUV4cHJlc3Npb25cIixsZWZ0OmVbXCJhcmd1bWVudHNcIl1bMF0sb3BlcmF0b3I6XCIqKlwiLHJpZ2h0OmVbXCJhcmd1bWVudHNcIl1bMV19KX07cmV0dXJuIHR9KG4pfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxMjpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYSxsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGYuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxmPXt9Lmhhc093blByb3BlcnR5LGM9W10uc2xpY2U7cz1lKFwiLi4vaGVscGVyc1wiKSxpPXMuaXNDb21tZW50LG89cy5uZXh0Tm9uQ29tbWVudCxhPXMucmVwbGFjZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2wodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5vblNjb3BlRW50ZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5wcmVib2R5PVtdfTt0LnByb3RvdHlwZS5vblNjb3BlRXhpdD1mdW5jdGlvbihlLHQsdSxuKXtpZihuLnByZWJvZHkubGVuZ3RoKXtyZXR1cm4gdGhpcy5wcmVwZW5kSW50b0JvZHkodS5ib2R5LG4ucHJlYm9keSl9fTt0LnByb3RvdHlwZS5wcmVwZW5kSW50b0JvZHk9ZnVuY3Rpb24oZSx0KXt2YXIgdTt1PXIoZSk7cmV0dXJuIGUuc3BsaWNlLmFwcGx5KGUsW3UsMF0uY29uY2F0KGMuY2FsbCh0KSkpfTt0LnByb3RvdHlwZS5GdW5jdGlvbkRlY2xhcmF0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuY3R4LnByZWJvZHkucHVzaCh0aGlzLmJ1aWxkRnVuY3Rpb25EZWNsYXJhdGlvbihlKSk7dGhpcy5wdXNoU3RhY2soZS5ib2R5KX07dC5wcm90b3R5cGUuRnVuY3Rpb25EZWNsYXJhdGlvbkV4aXQ9ZnVuY3Rpb24oZSl7dGhpcy5wb3BTdGFjayhlKTtyZXR1cm4gdGhpcy5yZW1vdmUoKX07dC5wcm90b3R5cGUuTGluZUNvbW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tb3ZlRnVuY3Rpb25Db21tZW50cyhlLHQpfTt0LnByb3RvdHlwZS5CbG9ja0NvbW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tb3ZlRnVuY3Rpb25Db21tZW50cyhlLHQpfTt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy5wdXNoU3RhY2soZS5ib2R5KX07dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uRXhpdD1mdW5jdGlvbihlKXt0aGlzLnBvcFN0YWNrKCk7aWYoZS5pZCl7aWYodGhpcy5vcHRpb25zLmNvbXBhdCl7cmV0dXJuIHRoaXMuZXNjYXBlSnMoZSx7cGFyZW50aGVzaXplZDp0cnVlfSl9ZWxzZXt0aGlzLndhcm4oZSxcIk5hbWVkIGZ1bmN0aW9uIGV4cHJlc3Npb25zIGFyZSBub3Qgc3VwcG9ydGVkIGluIENvZmZlZVNjcmlwdFwiKTtyZXR1cm4gZX19ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLm1vdmVGdW5jdGlvbkNvbW1lbnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjtpZighdC5ib2R5KXtyZXR1cm59bj1vKHQuYm9keSxlKTtpZighbil7cmV0dXJufXU9bi50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIiYmbi5pZDt1fHwodT1uLnR5cGU9PT1cIkZ1bmN0aW9uRGVjbGFyYXRpb25cIik7aWYodSl7dGhpcy5jdHgucHJlYm9keS5wdXNoKGUpO3JldHVybiB0aGlzLnJlbW92ZSgpfX07dC5wcm90b3R5cGUuYnVpbGRGdW5jdGlvbkRlY2xhcmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBhKGUse3R5cGU6XCJWYXJpYWJsZURlY2xhcmF0aW9uXCIsZGVjbGFyYXRpb25zOlt7dHlwZTpcIlZhcmlhYmxlRGVjbGFyYXRvclwiLGlkOmUuaWQsaW5pdDp7dHlwZTpcIkZ1bmN0aW9uRXhwcmVzc2lvblwiLHBhcmFtczplLnBhcmFtcyxkZWZhdWx0czplLmRlZmF1bHRzLGJvZHk6ZS5ib2R5fX1dfSl9O3JldHVybiB0fShuKTtyPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyO3Q9MDtmb3IodD11PTAsbj1lLmxlbmd0aDt1PG47dD0rK3Upe3I9ZVt0XTtpZihyLnR5cGUhPT1cIlZhcmlhYmxlRGVjbGFyYXRpb25cIiYmIWkocikpe3JldHVybiB0fX1yZXR1cm4gdH19LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDEzOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihhLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sYT17fS5oYXNPd25Qcm9wZXJ0eTtvPWUoXCIuLi9oZWxwZXJzXCIpLm5vbkNvbW1lbnRzO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cyh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLklmU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3RoaXMuaGFuZGxlQmxhbmtJZnMoZSk7dGhpcy5wYXJlbnRoZXNpemVDb25kaXRpb25hbHMoZS50ZXN0KTtyZXR1cm4gZX07dC5wcm90b3R5cGUuQ29uZGl0aW9uYWxFeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucGFyZW50aGVzaXplRnVuY3Rpb25zKGUsdCl9O3QucHJvdG90eXBlLnBhcmVudGhlc2l6ZUZ1bmN0aW9ucz1mdW5jdGlvbihlLHQpe3RoaXMuZXN0cmF2ZXJzZSgpLnRyYXZlcnNlKGUse1xuZW50ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgdTt1PWUudHlwZT09PVwiRnVuY3Rpb25EZWNsYXJhdGlvblwifHxlLnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiO2lmKHUpe3JldHVybiBlLl9wYXJlbnRoZXNpemVkPXRydWV9fX0pO3JldHVybiBlfTt0LnByb3RvdHlwZS5wYXJlbnRoZXNpemVDb25kaXRpb25hbHM9ZnVuY3Rpb24oZSl7dmFyIHQ7dD1bXCJDb25kaXRpb25hbEV4cHJlc3Npb25cIixcIkZ1bmN0aW9uRXhwcmVzc2lvblwiXTtyZXR1cm4gdGhpcy5lc3RyYXZlcnNlKCkudHJhdmVyc2UoZSx7ZW50ZXI6ZnVuY3Rpb24oZSx1KXtpZih+dC5pbmRleE9mKGUudHlwZSkpe3JldHVybiBlLl9wYXJlbnRoZXNpemVkPXRydWV9fX0pfTt0LnByb3RvdHlwZS5oYW5kbGVCbGFua0lmcz1mdW5jdGlvbihlKXtpZihpKGUpfHxyKGUpJiYhZS5hbHRlcm5hdGUpe2UuYWx0ZXJuYXRlPXt0eXBlOlwiQmxvY2tTdGF0ZW1lbnRcIixib2R5OltdfX1yZXR1cm4gZX07cmV0dXJuIHR9KG4pO2k9ZnVuY3Rpb24oZSl7cmV0dXJuIWUuY29uc2VxdWVudH07cj1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9ZS5jb25zZXF1ZW50O3JldHVybiB1PXQmJnQudHlwZT09PVwiQmxvY2tTdGF0ZW1lbnRcIiYmbyh0LmJvZHkpLmxlbmd0aD09PTB9fSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxNDpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihsLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbD17fS5oYXNPd25Qcm9wZXJ0eTtvPWUoXCIuLi9oZWxwZXJzXCIpLnJlcGxhY2U7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXthKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuQ2FsbEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ7dD1pKGUpJiZyKGVbXCJhcmd1bWVudHNcIl0pJiZzKGUuY2FsbGVlLnBhcmFtcyxlW1wiYXJndW1lbnRzXCJdKTtpZighdCl7cmV0dXJuIGV9cmV0dXJuIG8oZSx7dHlwZTpcIkNvZmZlZURvRXhwcmVzc2lvblwiLFwiZnVuY3Rpb25cIjplLmNhbGxlZSxhcmd1bWVudHM6ZVtcImFyZ3VtZW50c1wiXX0pfTtyZXR1cm4gdH0obik7cj1mdW5jdGlvbihlKXt2YXIgdCx1LG47Zm9yKHU9MCxuPWUubGVuZ3RoO3U8bjt1Kyspe3Q9ZVt1XTtpZih0LnR5cGUhPT1cIklkZW50aWZpZXJcIil7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX07aT1mdW5jdGlvbihlKXt2YXIgdCx1O3JldHVybigodD1lLmNhbGxlZSkhPW51bGw/dC50eXBlOnZvaWQgMCk9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiJiYoKHU9ZS5jYWxsZWUpIT1udWxsP3UuaWQ6dm9pZCAwKT09PW51bGx9O3M9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZX0pLmpvaW4oXCIvXCIpPT09dC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZX0pLmpvaW4oXCIvXCIpfX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTU6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGEuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxhPXt9Lmhhc093blByb3BlcnR5O2k9ZShcIi4uL2hlbHBlcnNcIiksbz1pLnJlcGxhY2Uscj1pLnF1b3RlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cyh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkxpdGVyYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudW5wYWNrUmVnZXhwSWZOZWVkZWQoZSl9O3QucHJvdG90eXBlLnVucGFja1JlZ2V4cElmTmVlZGVkPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCEoZS52YWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkpe3JldHVybn10PWUudmFsdWUudG9TdHJpbmcoKS5tYXRjaCgvXlxcLyhbXFxzXFw9XS4qKVxcLyhbYS16XSopJC8pO2lmKHQpe2U9byhlLHt0eXBlOlwiQ2FsbEV4cHJlc3Npb25cIixjYWxsZWU6e3R5cGU6XCJJZGVudGlmaWVyXCIsbmFtZTpcIlJlZ0V4cFwifSxhcmd1bWVudHM6W3t0eXBlOlwiTGl0ZXJhbFwiLHZhbHVlOnRbMV0scmF3OnIodFsxXSl9XX0pO2lmKHRbMl0pe2VbXCJhcmd1bWVudHNcIl0ucHVzaCh7dHlwZTpcIkxpdGVyYWxcIix2YWx1ZTp0WzJdLHJhdzpyKHRbMl0pfSl9cmV0dXJuIGV9fTtyZXR1cm4gdH0obil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDE2OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihhLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sYT17fS5oYXNPd25Qcm9wZXJ0eTtpPWUoXCIuLi9oZWxwZXJzXCIpLG89aS5yZXBsYWNlLHI9aS5pc0xvb3A7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtzKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuRm9yU3RhdGVtZW50PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2Zvcj09bnVsbCl7dGhpcy5fZm9yPVtdfXRoaXMuX2Zvci5wdXNoKGUpO3RoaXMuaW5qZWN0VXBkYXRlSW50b0JvZHkoZSk7cmV0dXJuIHRoaXMuY29udmVydEZvclRvV2hpbGUoZSl9O3QucHJvdG90eXBlLkZvclN0YXRlbWVudEV4aXQ9ZnVuY3Rpb24oZSl7dmFyIHQ7dD10aGlzLl9mb3IucG9wKCk7ZGVsZXRlIHQuX3VwZGF0ZTtyZXR1cm4gZX07dC5wcm90b3R5cGUuRm9ySW5TdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMud2FybklmTm9WYXIoZSl9O3QucHJvdG90eXBlLldoaWxlU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnZlcnRXaGlsZVRvTG9vcChlKX07dC5wcm90b3R5cGUuRG9XaGlsZVN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb252ZXJ0RG9XaGlsZVRvTG9vcChlKX07dC5wcm90b3R5cGUuQ29udGludWVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5pbmplY3RVcGRhdGVJbnRvQ29udGludWUoZSx0KX07dC5wcm90b3R5cGUuaW5qZWN0VXBkYXRlSW50b0NvbnRpbnVlPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjt1PShuPXRoaXMuX2ZvcikhPW51bGw/blt0aGlzLl9mb3IubGVuZ3RoLTFdOnZvaWQgMDtpZighKHUhPW51bGw/dS5fdXBkYXRlOnZvaWQgMCkpe3JldHVybiBlfXRoaXMuc2tpcCgpO3JldHVybnt0eXBlOlwiQmxvY2tTdGF0ZW1lbnRcIixib2R5Olt7dHlwZTpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixleHByZXNzaW9uOnUuX3VwZGF0ZX0sZV19fTt0LnByb3RvdHlwZS5jb252ZXJ0RG9XaGlsZVRvTG9vcD1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9ZS5ib2R5O3U9dC5ib2R5O3UucHVzaChvKGUudGVzdCx7dHlwZTpcIklmU3RhdGVtZW50XCIsX25lZ2F0aXZlOnRydWUsdGVzdDplLnRlc3QsY29uc2VxdWVudDp7dHlwZTpcIkJyZWFrU3RhdGVtZW50XCJ9fSkpO3JldHVybiBvKGUse3R5cGU6XCJDb2ZmZWVMb29wU3RhdGVtZW50XCIsYm9keTp0fSl9O3QucHJvdG90eXBlLndhcm5JZk5vVmFyPWZ1bmN0aW9uKGUpe2lmKGUubGVmdC50eXBlIT09XCJWYXJpYWJsZURlY2xhcmF0aW9uXCIpe3RoaXMud2FybihlLFwiVXNpbmcgJ2Zvci4uaW4nIGxvb3BzIHdpdGhvdXQgXCIrXCIndmFyJyBjYW4gcHJvZHVjZSB1bmV4cGVjdGVkIHJlc3VsdHNcIil9cmV0dXJuIGV9O3QucHJvdG90eXBlLmNvbnZlcnRGb3JUb1doaWxlPWZ1bmN0aW9uKGUpe3ZhciB0O2UudHlwZT1yKGUpP1wiQ29mZmVlTG9vcFN0YXRlbWVudFwiOlwiV2hpbGVTdGF0ZW1lbnRcIjt0PWUuaW5pdDtkZWxldGUgZS5pbml0O2lmKHQhPW51bGwpe3JldHVybnt0eXBlOlwiQmxvY2tTdGF0ZW1lbnRcIixib2R5Olt7dHlwZTpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixleHByZXNzaW9uOnR9LGVdfX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUuY29udmVydFdoaWxlVG9Mb29wPWZ1bmN0aW9uKGUpe2lmKHIoZSkpe3JldHVybiBvKGUse3R5cGU6XCJDb2ZmZWVMb29wU3RhdGVtZW50XCIsYm9keTplLmJvZHl9KX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUuaW5qZWN0VXBkYXRlSW50b0JvZHk9ZnVuY3Rpb24oZSl7dmFyIHQsdTtpZihlLnVwZGF0ZSl7dT17dHlwZTpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixleHByZXNzaW9uOmUudXBkYXRlfTtpZihlLmJvZHk9PW51bGwpe2lmKGUuYm9keT09bnVsbCl7ZS5ib2R5PXt0eXBlOlwiQmxvY2tTdGF0ZW1lbnRcIixib2R5OltdfX19ZWxzZSBpZihlLmJvZHkudHlwZSE9PVwiQmxvY2tTdGF0ZW1lbnRcIil7dD1lLmJvZHk7ZS5ib2R5PXt0eXBlOlwiQmxvY2tTdGF0ZW1lbnRcIixib2R5Olt0XX19ZS5ib2R5LmJvZHk9ZS5ib2R5LmJvZHkuY29uY2F0KFt1XSk7ZS5fdXBkYXRlPWUudXBkYXRlO2RlbGV0ZSBlLnVwZGF0ZX1yZXR1cm4gZX07cmV0dXJuIHR9KG4pfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxNzpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihvLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbz17fS5oYXNPd25Qcm9wZXJ0eTtyPWUoXCIuLi9oZWxwZXJzXCIpLnJlcGxhY2U7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuTWVtYmVyRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt0aGlzLnRyYW5zZm9ybVRoaXNUb0F0U2lnbihlKTt0aGlzLmJyYWNlT2JqZWN0T25MZWZ0KGUpO3JldHVybiB0aGlzLnJlcGxhY2VXaXRoUHJvdG90eXBlKGUpfHx0aGlzLnBhcmVudGhlc2l6ZU9iamVjdElmRnVuY3Rpb24oZSl9O3QucHJvdG90eXBlLkNvZmZlZVByb3RvdHlwZUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudHJhbnNmb3JtVGhpc1RvQXRTaWduKGUpfTt0LnByb3RvdHlwZS50cmFuc2Zvcm1UaGlzVG9BdFNpZ249ZnVuY3Rpb24oZSl7aWYoZS5vYmplY3QudHlwZT09PVwiVGhpc0V4cHJlc3Npb25cIil7ZS5fcHJlZml4ZWQ9dHJ1ZTtlLm9iamVjdC5fcHJlZml4PXRydWV9cmV0dXJuIGV9O3QucHJvdG90eXBlLmJyYWNlT2JqZWN0T25MZWZ0PWZ1bmN0aW9uKGUpe2lmKGUub2JqZWN0LnR5cGU9PT1cIk9iamVjdEV4cHJlc3Npb25cIil7ZS5vYmplY3QuX2JyYWNlZD10cnVlfX07dC5wcm90b3R5cGUucmVwbGFjZVdpdGhQcm90b3R5cGU9ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLmNvbXB1dGVkPT09ZmFsc2UmJmUub2JqZWN0LnR5cGU9PT1cIk1lbWJlckV4cHJlc3Npb25cIiYmZS5vYmplY3QucHJvcGVydHkudHlwZT09PVwiSWRlbnRpZmllclwiJiZlLm9iamVjdC5wcm9wZXJ0eS5uYW1lPT09XCJwcm90b3R5cGVcIjtpZih0KXtyZXR1cm4gdGhpcy5yZWN1cnNlKHIoZSx7dHlwZTpcIkNvZmZlZVByb3RvdHlwZUV4cHJlc3Npb25cIixvYmplY3Q6ZS5vYmplY3Qub2JqZWN0LHByb3BlcnR5OmUucHJvcGVydHl9KSl9fTt0LnByb3RvdHlwZS5wYXJlbnRoZXNpemVPYmplY3RJZkZ1bmN0aW9uPWZ1bmN0aW9uKGUpe2lmKGUub2JqZWN0LnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiKXtlLm9iamVjdC5fcGFyZW50aGVzaXplZD10cnVlfXJldHVybiBlfTtyZXR1cm4gdH0obil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDE4OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKG8uY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxvPXt9Lmhhc093blByb3BlcnR5O249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkFycmF5RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt0aGlzLmJyYWNlT2JqZWN0c0luRWxlbWVudHMoZSk7cmV0dXJuIHRoaXMuY2F0Y2hFbXB0eUFycmF5U2xvdHMoZSl9O3QucHJvdG90eXBlLk9iamVjdEV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5icmFjZU9iamVjdEluRXhwcmVzc2lvbihlLHQpfTt0LnByb3RvdHlwZS5icmFjZU9iamVjdEluRXhwcmVzc2lvbj1mdW5jdGlvbihlLHQpe3ZhciB1LG4scjtpZih0LnR5cGU9PT1cIkV4cHJlc3Npb25TdGF0ZW1lbnRcIil7dT0oKG49dGhpcy5zY29wZS5ib2R5KSE9bnVsbD9uWygocj10aGlzLnNjb3BlLmJvZHkpIT1udWxsP3IubGVuZ3RoOnZvaWQgMCktMV06dm9pZCAwKT09PXQ7aWYodSl7ZS5fbGFzdD10cnVlfWVsc2V7ZS5fYnJhY2VkPXRydWV9fX07dC5wcm90b3R5cGUuYnJhY2VPYmplY3RzSW5FbGVtZW50cz1mdW5jdGlvbihlKXt2YXIgdCx1LG4scjtyPWUuZWxlbWVudHM7Zm9yKHQ9MCxuPXIubGVuZ3RoO3Q8bjt0Kyspe3U9clt0XTtpZigodSE9bnVsbD91LnR5cGU6dm9pZCAwKT09PVwiT2JqZWN0RXhwcmVzc2lvblwiKXt1Ll9icmFjZWQ9dHJ1ZX19cmV0dXJuIGV9O3QucHJvdG90eXBlLmNhdGNoRW1wdHlBcnJheVNsb3RzPWZ1bmN0aW9uKGUpe2lmKHIoZS5lbGVtZW50cykpe2lmKHRoaXMub3B0aW9ucy5jb21wYXQpe3JldHVybiB0aGlzLmVzY2FwZUpzKGUpfWVsc2V7cmV0dXJuIHRoaXMuc3ludGF4RXJyb3IoZSxcIkVtcHR5IGFycmF5IHNsb3RzIGFyZSBub3Qgc3VwcG9ydGVkIGluIENvZmZlZVNjcmlwdFwiKX19fTtyZXR1cm4gdH0obik7cj1mdW5jdGlvbihlKXt2YXIgdCx1LG47Zm9yKHQ9MCx1PWUubGVuZ3RoO3Q8dTt0Kyspe249ZVt0XTtpZihuPT09bnVsbCl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX19LHtcIi4vYmFzZVwiOjZ9XSwxOTpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihsLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbD17fS5oYXNPd25Qcm9wZXJ0eSxmPVtdLnNsaWNlO2k9ZShcIi4uL2hlbHBlcnNcIikscz1pLnJlc2VydmVkV29yZHMsbz1pLnJlcGxhY2Uscj1pLnF1b3RlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7YSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbj1mdW5jdGlvbihlLHUpe3QuX19zdXBlcl9fLkZ1bmN0aW9uRXhwcmVzc2lvbi5jYWxsKHRoaXMsZSk7ZS5wYXJhbXMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYodC50eXBlPT09XCJJZGVudGlmaWVyXCIpe2UuY3R4LnZhcnMucHVzaCh0Lm5hbWUpfXJldHVybiBlLnByZXZlbnRSZXNlcnZlZFdvcmRzKHQpfX0odGhpcykpO3RoaXMucHJldmVudFJlc2VydmVkV29yZHMoZS5pZCk7cmV0dXJuIHRoaXMucmVtb3ZlVW5kZWZpbmVkUGFyYW1ldGVyKGUpfTt0LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb25FeGl0PWZ1bmN0aW9uKGUpe3ZhciB1LG47dC5fX3N1cGVyX18uRnVuY3Rpb25FeHByZXNzaW9uRXhpdC5jYWxsKHRoaXMsZSk7KG49ZS5ib2R5LmJvZHkpLnNwbGljZS5hcHBseShuLFswLDBdLmNvbmNhdChmLmNhbGwoKHU9ZS5ib2R5LnNoYWRvd3MpIT1udWxsP3U6W10pKSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLkNhbGxFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBhcmVudGhlc2l6ZUNhbGxlZShlKX07dC5wcm90b3R5cGUuSWRlbnRpZmllcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lc2NhcGVVbmRlZmluZWQoZSl9O3QucHJvdG90eXBlLlVuYXJ5RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt0aGlzLmJyYWNlT2JqZWN0QmVzaWRlVW5hcnkoZSk7cmV0dXJuIHRoaXMudXBkYXRlVm9pZFRvVW5kZWZpbmVkKGUpfTt0LnByb3RvdHlwZS5WYXJpYWJsZURlY2xhcmF0b3I9ZnVuY3Rpb24oZSl7dGhpcy5wcmV2ZW50UmVzZXJ2ZWRXb3JkcyhlLmlkKTt0aGlzLmFkZFNoYWRvd2luZ0lmTmVlZGVkKGUpO3JldHVybiB0aGlzLmFkZEV4cGxpY2l0VW5kZWZpbmVkSW5pdGlhbGl6ZXIoZSl9O3QucHJvdG90eXBlLkFzc2lnbm1lbnRFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNSZXNlcnZlZElkZW50aWZpZXIoZS5sZWZ0KSl7aWYodGhpcy5vcHRpb25zLmNvbXBhdCl7cmV0dXJuIHRoaXMuZXNjYXBlSnMoZSl9ZWxzZXtyZXR1cm4gdGhpcy5wcmV2ZW50UmVzZXJ2ZWRXb3JkcyhlLmxlZnQpfX1lbHNlIGlmKGUubGVmdC50eXBlPT09XCJJZGVudGlmaWVyXCImJnRoaXMuY3R4LnZhcnMuaW5kZXhPZihlLmxlZnQubmFtZSk9PT0tMSl7aWYodGhpcy5vcHRpb25zLmNvbXBhdCl7cmV0dXJuIHRoaXMuZXNjYXBlSnMoZSl9ZWxzZXt0aGlzLndhcm4oZSxcIkFzc2lnbm1lbnQgb2YgZ2xvYmFsIHZhcmlhYmxlICdcIitlLmxlZnQubmFtZStcIidcIik7cmV0dXJuIGV9fWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5SZXR1cm5TdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGFyZW50aGVzaXplT2JqZWN0c0luQXJndW1lbnQoZSl9O3QucHJvdG90eXBlLmJyYWNlT2JqZWN0QmVzaWRlVW5hcnk9ZnVuY3Rpb24oZSl7aWYoZS5hcmd1bWVudC50eXBlPT09XCJPYmplY3RFeHByZXNzaW9uXCIpe2UuYXJndW1lbnQuX2JyYWNlZD10cnVlfX07dC5wcm90b3R5cGUucHJldmVudFJlc2VydmVkV29yZHM9ZnVuY3Rpb24oZSl7aWYodGhpcy5pc1Jlc2VydmVkSWRlbnRpZmllcihlKSl7cmV0dXJuIHRoaXMuc3ludGF4RXJyb3IoZSxcIidcIitlLm5hbWUrXCInIGlzIGEgcmVzZXJ2ZWQgQ29mZmVlU2NyaXB0IGtleXdvcmRcIil9fTt0LnByb3RvdHlwZS5pc1Jlc2VydmVkSWRlbnRpZmllcj1mdW5jdGlvbihlKXt2YXIgdDt0PWUhPW51bGw/ZS5uYW1lOnZvaWQgMDtyZXR1cm4gdCYmfnMuaW5kZXhPZih0KX07dC5wcm90b3R5cGUucGFyZW50aGVzaXplT2JqZWN0c0luQXJndW1lbnQ9ZnVuY3Rpb24oZSl7aWYoZS5hcmd1bWVudCl7aWYoZS5hcmd1bWVudC50eXBlPT09XCJPYmplY3RFeHByZXNzaW9uXCIpe2UuYXJndW1lbnQuX2JyYWNlZD10cnVlfX1yZXR1cm4gZX07dC5wcm90b3R5cGUuYWRkU2hhZG93aW5nSWZOZWVkZWQ9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO3U9ZS5pZC5uYW1lO2lmKH50aGlzLmN0eC52YXJzLmluZGV4T2YodSkpe3RoaXMud2FybihlLFwiVmFyaWFibGUgc2hhZG93aW5nICgnXCIrdStcIicpIGlzIG5vdCBmdWxseSBzdXBwb3J0ZWQgaW4gQ29mZmVlU2NyaXB0XCIpO249byhlLHt0eXBlOlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLGV4cHJlc3Npb246e3R5cGU6XCJDb2ZmZWVFc2NhcGVkRXhwcmVzc2lvblwiLHJhdzpcInZhciBcIit1fX0pO2lmKCh0PXRoaXMuc2NvcGUpLnNoYWRvd3M9PW51bGwpe3Quc2hhZG93cz1bXX1yZXR1cm4gdGhpcy5zY29wZS5zaGFkb3dzLnB1c2gobil9ZWxzZXtyZXR1cm4gdGhpcy5jdHgudmFycy5wdXNoKHUpfX07dC5wcm90b3R5cGUuYWRkRXhwbGljaXRVbmRlZmluZWRJbml0aWFsaXplcj1mdW5jdGlvbihlKXtpZihlLmluaXQ9PW51bGwpe2UuaW5pdD17dHlwZTpcIklkZW50aWZpZXJcIixuYW1lOlwidW5kZWZpbmVkXCJ9O3RoaXMuc2tpcCgpfXJldHVybiBlfTt0LnByb3RvdHlwZS51cGRhdGVWb2lkVG9VbmRlZmluZWQ9ZnVuY3Rpb24oZSl7aWYoZS5vcGVyYXRvcj09PVwidm9pZFwiKXtyZXR1cm4gbyhlLHt0eXBlOlwiSWRlbnRpZmllclwiLG5hbWU6XCJ1bmRlZmluZWRcIn0pfWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5lc2NhcGVVbmRlZmluZWQ9ZnVuY3Rpb24oZSl7aWYoZS5uYW1lPT09XCJ1bmRlZmluZWRcIiYmdGhpcy5vcHRpb25zLmNvbXBhdCl7cmV0dXJuIG8oZSx7dHlwZTpcIkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uXCIscmF3OlwidW5kZWZpbmVkXCJ9KX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUucmVtb3ZlVW5kZWZpbmVkUGFyYW1ldGVyPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyLGksbyxzO2lmKGUucGFyYW1zKXtzPWUucGFyYW1zO2Zvcih0PXI9MCxpPXMubGVuZ3RoO3I8aTt0PSsrcil7bz1zW3RdO3U9dD09PWUucGFyYW1zLmxlbmd0aC0xO249by50eXBlPT09XCJJZGVudGlmaWVyXCImJm8ubmFtZT09PVwidW5kZWZpbmVkXCI7aWYobil7aWYodSl7ZS5wYXJhbXMucG9wKCl9ZWxzZXt0aGlzLnN5bnRheEVycm9yKG8sXCIndW5kZWZpbmVkJyBpcyBub3QgYWxsb3dlZCBpbiBmdW5jdGlvbiBwYXJhbWV0ZXJzXCIpfX19fXJldHVybiBlfTt0LnByb3RvdHlwZS5wYXJlbnRoZXNpemVDYWxsZWU9ZnVuY3Rpb24oZSl7aWYoZS5jYWxsZWUudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCIpe2UuY2FsbGVlLl9wYXJlbnRoZXNpemVkPXRydWU7cmV0dXJuIGV9fTtyZXR1cm4gdH0obil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDIwOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhLGw9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoZi5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGY9e30uaGFzT3duUHJvcGVydHk7cj1lKFwiLi4vaGVscGVyc1wiKS5nZXRQcmVjZWRlbmNlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7bCh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLm9uRW50ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHM7aWYoIXQpe3JldHVybn1zPXQudHlwZTtpZihzPT09XCJDYWxsRXhwcmVzc2lvblwiJiZ0W1wiYXJndW1lbnRzXCJdLmluZGV4T2YoZSk+LTEpe3JldHVybn1pZihzPT09XCJOZXdFeHByZXNzaW9uXCImJnRbXCJhcmd1bWVudHNcIl0uaW5kZXhPZihlKT4tMSl7cmV0dXJufWlmKHM9PT1cIk1lbWJlckV4cHJlc3Npb25cIiYmdC5wcm9wZXJ0eT09PWUpe3JldHVybn1uPXIoZSk7aWYobj09PS0xKXtyZXR1cm59dT1vKHQsZSl8fGkodCxlKXx8YSh0LGUpfHxuPHIodCk7aWYodSl7cmV0dXJuIGUuX3BhcmVudGhlc2l6ZWQ9dHJ1ZX19O3JldHVybiB0fShuKTtvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSxcIi1cIikmJmUucmlnaHQ9PT10fTtpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSxcIi9cIikmJihzKHQsXCIvXCIpfHxzKHQsXCIqXCIpKSYmZS5yaWdodD09PXR9O3M9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS50eXBlPT09XCJCaW5hcnlFeHByZXNzaW9uXCImJmUub3BlcmF0b3I9PT10fTthPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudHlwZT09PVwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCImJnQudHlwZT09PVwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCImJmUuYWx0ZXJuYXRlIT09dH19LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDIxOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKG8uY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxvPXt9Lmhhc093blByb3BlcnR5O3I9ZShcIi4uL2hlbHBlcnNcIikuZ2V0UmV0dXJuU3RhdGVtZW50cztuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2kodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5vblNjb3BlRXhpdD1mdW5jdGlvbihlLHQsdSxuKXtyZXR1cm4gdGhpcy51bnJldHVybmlmeSh1KX07dC5wcm90b3R5cGUudW5yZXR1cm5pZnk9ZnVuY3Rpb24oZSx0KXt2YXIgdTtpZih0PT1udWxsKXt0PVwiYm9keVwifWlmKGVbdF0ubGVuZ3RoPjApe3U9cihlW3RdKTtpZih1Lmxlbmd0aD09PTApe2VbdF0ucHVzaCh7dHlwZTpcIlJldHVyblN0YXRlbWVudFwifSl9ZWxzZXt1LmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS5hcmd1bWVudCl7ZS50eXBlPVwiRXhwcmVzc2lvblN0YXRlbWVudFwiO3JldHVybiBlLmV4cHJlc3Npb249ZS5hcmd1bWVudH19KX19fTtyZXR1cm4gdH0obil9LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDIyOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihpLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0saT17fS5oYXNPd25Qcm9wZXJ0eTtuPWUoXCIuL2Jhc2UuY29mZmVlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuU3dpdGNoU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3RoaXMuY29uc29saWRhdGVDYXNlcyhlKTtyZXR1cm4gdGhpcy5lbnN1cmVMYXN0Q2FzZUlzRGVmYXVsdChlKX07dC5wcm90b3R5cGUuU3dpdGNoQ2FzZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmVCcmVha3NGcm9tQ29uc2VxdWVudHMoZSl9O3QucHJvdG90eXBlLmVuc3VyZUxhc3RDYXNlSXNEZWZhdWx0PWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyLGksbyxzLGE7dD1lLmNhc2VzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09XCJTd2l0Y2hDYXNlXCJ9KTtzPXQubGVuZ3RoO2Zvcih1PWk9MCxhPXQubGVuZ3RoO2k8YTt1PSsraSl7bz10W3VdO3I9dT09PXMtMTtuPW8udGVzdD09bnVsbDtpZihuJiYhcil7dGhpcy5zeW50YXhFcnJvcihvLFwiZGVmYXVsdCBjYXNlcyBvbmx5IGFsbG93ZWQgYXQgdGhlIGVuZFwiKX19cmV0dXJuIGV9O3QucHJvdG90eXBlLmNvbnNvbGlkYXRlQ2FzZXM9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHIsaSxvLHM7aT1bXTtzPVtdO289ZS5jYXNlcztmb3IodD11PTAscj1vLmxlbmd0aDt1PHI7dD0rK3Upe249b1t0XTtpZihuLnR5cGU9PT1cIlN3aXRjaENhc2VcIil7aWYobi50ZXN0KXtzLnB1c2gobi50ZXN0KX1pZihuLmNvbnNlcXVlbnQubGVuZ3RoPjApe2lmKG4udGVzdCl7bi50ZXN0PXt0eXBlOlwiQ29mZmVlTGlzdEV4cHJlc3Npb25cIixleHByZXNzaW9uczpzfX1zPVtdO2kucHVzaChuKX19ZWxzZXtpLnB1c2gobil9fWUuY2FzZXM9aTtyZXR1cm4gZX07dC5wcm90b3R5cGUucmVtb3ZlQnJlYWtzRnJvbUNvbnNlcXVlbnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHU7aWYoZS50ZXN0KXt0PWUuY29uc2VxdWVudC5sZW5ndGgtMTt1PWUuY29uc2VxdWVudFt0XTtpZigodSE9bnVsbD91LnR5cGU6dm9pZCAwKT09PVwiQnJlYWtTdGF0ZW1lbnRcIil7ZGVsZXRlIGUuY29uc2VxdWVudFt0XTtlLmNvbnNlcXVlbnQubGVuZ3RoLT0xfWVsc2UgaWYoKHUhPW51bGw/dS50eXBlOnZvaWQgMCk9PT1cIkNvbnRpbnVlU3RhdGVtZW50XCIpe31lbHNlIGlmKCh1IT1udWxsP3UudHlwZTp2b2lkIDApIT09XCJSZXR1cm5TdGF0ZW1lbnRcIil7dGhpcy5zeW50YXhFcnJvcihlLFwiTm8gYnJlYWsgb3IgcmV0dXJuIHN0YXRlbWVudCBmb3VuZCBpbiBhIGNhc2VcIil9cmV0dXJuIGV9fTtyZXR1cm4gdH0obil9LHtcIi4vYmFzZS5jb2ZmZWVcIjo2fV0sMjM6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGkuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxpPXt9Lmhhc093blByb3BlcnR5O249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkxhYmVsZWRTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zeW50YXhFcnJvcihlLFwiTGFiZWxlZCBzdGF0ZW1lbnRzIGFyZSBub3Qgc3VwcG9ydGVkIGluIENvZmZlZVNjaXJwdFwiKX07dC5wcm90b3R5cGUuV2l0aFN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zeW50YXhFcnJvcihlLFwiJ3dpdGgnIGlzIG5vdCBzdXBwb3J0ZWQgaW4gQ29mZmVlU2NyaXB0XCIpfTtyZXR1cm4gdH0obil9LHtcIi4vYmFzZVwiOjZ9XSwyNDpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBPYmplY3QuY3JlYXRlPT09XCJmdW5jdGlvblwiKXt0LmV4cG9ydHM9ZnVuY3Rpb24gbihlLHQpe2Uuc3VwZXJfPXQ7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTpmYWxzZSx3cml0YWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfX0pfX1lbHNle3QuZXhwb3J0cz1mdW5jdGlvbiByKGUsdCl7ZS5zdXBlcl89dDt2YXIgdT1mdW5jdGlvbigpe307dS5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IHU7ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZX19fSx7fV0sMjU6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3ZhciB1PTA7Zm9yKHZhciBuPWUubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciByPWVbbl07aWYocj09PVwiLlwiKXtlLnNwbGljZShuLDEpfWVsc2UgaWYocj09PVwiLi5cIil7ZS5zcGxpY2UobiwxKTt1Kyt9ZWxzZSBpZih1KXtlLnNwbGljZShuLDEpO3UtLX19aWYodCl7Zm9yKDt1LS07dSl7ZS51bnNoaWZ0KFwiLi5cIil9fXJldHVybiBlfXZhciBuPS9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO3ZhciByPWZ1bmN0aW9uKGUpe3JldHVybiBuLmV4ZWMoZSkuc2xpY2UoMSl9O3UucmVzb2x2ZT1mdW5jdGlvbigpe3ZhciB1PVwiXCIsbj1mYWxzZTtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aC0xO3I+PS0xJiYhbjtyLS0pe3ZhciBvPXI+PTA/YXJndW1lbnRzW3JdOmUuY3dkKCk7aWYodHlwZW9mIG8hPT1cInN0cmluZ1wiKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3NcIil9ZWxzZSBpZighbyl7Y29udGludWV9dT1vK1wiL1wiK3U7bj1vLmNoYXJBdCgwKT09PVwiL1wifXU9dChpKHUuc3BsaXQoXCIvXCIpLGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pLCFuKS5qb2luKFwiL1wiKTtyZXR1cm4obj9cIi9cIjpcIlwiKSt1fHxcIi5cIn07dS5ub3JtYWxpemU9ZnVuY3Rpb24oZSl7dmFyIG49dS5pc0Fic29sdXRlKGUpLHI9byhlLC0xKT09PVwiL1wiO2U9dChpKGUuc3BsaXQoXCIvXCIpLGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pLCFuKS5qb2luKFwiL1wiKTtpZighZSYmIW4pe2U9XCIuXCJ9aWYoZSYmcil7ZSs9XCIvXCJ9cmV0dXJuKG4/XCIvXCI6XCJcIikrZX07dS5pc0Fic29sdXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgwKT09PVwiL1wifTt1LmpvaW49ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIHUubm9ybWFsaXplKGkoZSxmdW5jdGlvbihlLHQpe2lmKHR5cGVvZiBlIT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50cyB0byBwYXRoLmpvaW4gbXVzdCBiZSBzdHJpbmdzXCIpfXJldHVybiBlfSkuam9pbihcIi9cIikpfTt1LnJlbGF0aXZlPWZ1bmN0aW9uKGUsdCl7ZT11LnJlc29sdmUoZSkuc3Vic3RyKDEpO3Q9dS5yZXNvbHZlKHQpLnN1YnN0cigxKTtmdW5jdGlvbiBuKGUpe3ZhciB0PTA7Zm9yKDt0PGUubGVuZ3RoO3QrKyl7aWYoZVt0XSE9PVwiXCIpYnJlYWt9dmFyIHU9ZS5sZW5ndGgtMTtmb3IoO3U+PTA7dS0tKXtpZihlW3VdIT09XCJcIilicmVha31pZih0PnUpcmV0dXJuW107cmV0dXJuIGUuc2xpY2UodCx1LXQrMSl9dmFyIHI9bihlLnNwbGl0KFwiL1wiKSk7dmFyIGk9bih0LnNwbGl0KFwiL1wiKSk7dmFyIG89TWF0aC5taW4oci5sZW5ndGgsaS5sZW5ndGgpO3ZhciBzPW87Zm9yKHZhciBhPTA7YTxvO2ErKyl7aWYoclthXSE9PWlbYV0pe3M9YTticmVha319dmFyIGw9W107Zm9yKHZhciBhPXM7YTxyLmxlbmd0aDthKyspe2wucHVzaChcIi4uXCIpfWw9bC5jb25jYXQoaS5zbGljZShzKSk7cmV0dXJuIGwuam9pbihcIi9cIil9O3Uuc2VwPVwiL1wiO3UuZGVsaW1pdGVyPVwiOlwiO3UuZGlybmFtZT1mdW5jdGlvbihlKXt2YXIgdD1yKGUpLHU9dFswXSxuPXRbMV07aWYoIXUmJiFuKXtyZXR1cm5cIi5cIn1pZihuKXtuPW4uc3Vic3RyKDAsbi5sZW5ndGgtMSl9cmV0dXJuIHUrbn07dS5iYXNlbmFtZT1mdW5jdGlvbihlLHQpe3ZhciB1PXIoZSlbMl07aWYodCYmdS5zdWJzdHIoLTEqdC5sZW5ndGgpPT09dCl7dT11LnN1YnN0cigwLHUubGVuZ3RoLXQubGVuZ3RoKX1yZXR1cm4gdX07dS5leHRuYW1lPWZ1bmN0aW9uKGUpe3JldHVybiByKGUpWzNdfTtmdW5jdGlvbiBpKGUsdCl7aWYoZS5maWx0ZXIpcmV0dXJuIGUuZmlsdGVyKHQpO3ZhciB1PVtdO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXtpZih0KGVbbl0sbixlKSl1LnB1c2goZVtuXSl9cmV0dXJuIHV9dmFyIG89XCJhYlwiLnN1YnN0cigtMSk9PT1cImJcIj9mdW5jdGlvbihlLHQsdSl7cmV0dXJuIGUuc3Vic3RyKHQsdSl9OmZ1bmN0aW9uKGUsdCx1KXtpZih0PDApdD1lLmxlbmd0aCt0O3JldHVybiBlLnN1YnN0cih0LHUpfX0pLmNhbGwodGhpcyxlKFwiX3Byb2Nlc3NcIikpfSx7X3Byb2Nlc3M6MjZ9XSwyNjpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuPXQuZXhwb3J0cz17fTtuLm5leHRUaWNrPWZ1bmN0aW9uKCl7dmFyIGU9dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCImJndpbmRvdy5zZXRJbW1lZGlhdGU7dmFyIHQ9dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCImJndpbmRvdy5wb3N0TWVzc2FnZSYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXI7aWYoZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGUpfX1pZih0KXt2YXIgdT1bXTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbihlKXt2YXIgdD1lLnNvdXJjZTtpZigodD09PXdpbmRvd3x8dD09PW51bGwpJiZlLmRhdGE9PT1cInByb2Nlc3MtdGlja1wiKXtlLnN0b3BQcm9wYWdhdGlvbigpO2lmKHUubGVuZ3RoPjApe3ZhciBuPXUuc2hpZnQoKTtuKCl9fX0sdHJ1ZSk7cmV0dXJuIGZ1bmN0aW9uIG4oZSl7dS5wdXNoKGUpO3dpbmRvdy5wb3N0TWVzc2FnZShcInByb2Nlc3MtdGlja1wiLFwiKlwiKX19cmV0dXJuIGZ1bmN0aW9uIHIoZSl7c2V0VGltZW91dChlLDApfX0oKTtuLnRpdGxlPVwiYnJvd3NlclwiO24uYnJvd3Nlcj10cnVlO24uZW52PXt9O24uYXJndj1bXTtmdW5jdGlvbiByKCl7fW4ub249cjtuLmFkZExpc3RlbmVyPXI7bi5vbmNlPXI7bi5vZmY9cjtuLnJlbW92ZUxpc3RlbmVyPXI7bi5yZW1vdmVBbGxMaXN0ZW5lcnM9cjtuLmVtaXQ9cjtuLmJpbmRpbmc9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9O24uY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9O24uY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfX0se31dLDI3OltmdW5jdGlvbihlLHQsdSl7dC5leHBvcnRzPWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJnR5cGVvZiBlPT09XCJvYmplY3RcIiYmdHlwZW9mIGUuY29weT09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGUuZmlsbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGUucmVhZFVJbnQ4PT09XCJmdW5jdGlvblwifX0se31dLDI4OltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKHQsbil7dmFyIHI9LyVbc2RqJV0vZzt1LmZvcm1hdD1mdW5jdGlvbihlKXtpZigheShlKSl7dmFyIHQ9W107Zm9yKHZhciB1PTA7dTxhcmd1bWVudHMubGVuZ3RoO3UrKyl7dC5wdXNoKHMoYXJndW1lbnRzW3VdKSl9cmV0dXJuIHQuam9pbihcIiBcIil9dmFyIHU9MTt2YXIgbj1hcmd1bWVudHM7dmFyIGk9bi5sZW5ndGg7dmFyIG89U3RyaW5nKGUpLnJlcGxhY2UocixmdW5jdGlvbihlKXtpZihlPT09XCIlJVwiKXJldHVyblwiJVwiO2lmKHU+PWkpcmV0dXJuIGU7c3dpdGNoKGUpe2Nhc2VcIiVzXCI6cmV0dXJuIFN0cmluZyhuW3UrK10pO2Nhc2VcIiVkXCI6cmV0dXJuIE51bWJlcihuW3UrK10pO2Nhc2VcIiVqXCI6dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeShuW3UrK10pfWNhdGNoKHQpe3JldHVyblwiW0NpcmN1bGFyXVwifWRlZmF1bHQ6cmV0dXJuIGV9fSk7Zm9yKHZhciBhPW5bdV07dTxpO2E9blsrK3VdKXtpZihFKGEpfHwhUyhhKSl7bys9XCIgXCIrYX1lbHNle28rPVwiIFwiK3MoYSl9fXJldHVybiBvfTt1LmRlcHJlY2F0ZT1mdW5jdGlvbihlLHIpe2lmKHYobi5wcm9jZXNzKSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuZGVwcmVjYXRlKGUscikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1pZih0Lm5vRGVwcmVjYXRpb249PT10cnVlKXtyZXR1cm4gZX12YXIgaT1mYWxzZTtmdW5jdGlvbiBvKCl7aWYoIWkpe2lmKHQudGhyb3dEZXByZWNhdGlvbil7dGhyb3cgbmV3IEVycm9yKHIpfWVsc2UgaWYodC50cmFjZURlcHJlY2F0aW9uKXtjb25zb2xlLnRyYWNlKHIpfWVsc2V7Y29uc29sZS5lcnJvcihyKX1pPXRydWV9cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBvfTt2YXIgaT17fTt2YXIgbzt1LmRlYnVnbG9nPWZ1bmN0aW9uKGUpe2lmKHYobykpbz10LmVudi5OT0RFX0RFQlVHfHxcIlwiO2U9ZS50b1VwcGVyQ2FzZSgpO2lmKCFpW2VdKXtpZihuZXcgUmVnRXhwKFwiXFxcXGJcIitlK1wiXFxcXGJcIixcImlcIikudGVzdChvKSl7dmFyIG49dC5waWQ7aVtlXT1mdW5jdGlvbigpe3ZhciB0PXUuZm9ybWF0LmFwcGx5KHUsYXJndW1lbnRzKTtjb25zb2xlLmVycm9yKFwiJXMgJWQ6ICVzXCIsZSxuLHQpfX1lbHNle2lbZV09ZnVuY3Rpb24oKXt9fX1yZXR1cm4gaVtlXX07ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPXtzZWVuOltdLHN0eWxpemU6bH07aWYoYXJndW1lbnRzLmxlbmd0aD49MyluLmRlcHRoPWFyZ3VtZW50c1syXTtpZihhcmd1bWVudHMubGVuZ3RoPj00KW4uY29sb3JzPWFyZ3VtZW50c1szXTtpZihDKHQpKXtuLnNob3dIaWRkZW49dH1lbHNlIGlmKHQpe3UuX2V4dGVuZChuLHQpfWlmKHYobi5zaG93SGlkZGVuKSluLnNob3dIaWRkZW49ZmFsc2U7aWYodihuLmRlcHRoKSluLmRlcHRoPTI7aWYodihuLmNvbG9ycykpbi5jb2xvcnM9ZmFsc2U7aWYodihuLmN1c3RvbUluc3BlY3QpKW4uY3VzdG9tSW5zcGVjdD10cnVlO2lmKG4uY29sb3JzKW4uc3R5bGl6ZT1hO3JldHVybiBjKG4sZSxuLmRlcHRoKX11Lmluc3BlY3Q9cztzLmNvbG9ycz17Ym9sZDpbMSwyMl0saXRhbGljOlszLDIzXSx1bmRlcmxpbmU6WzQsMjRdLGludmVyc2U6WzcsMjddLHdoaXRlOlszNywzOV0sZ3JleTpbOTAsMzldLGJsYWNrOlszMCwzOV0sYmx1ZTpbMzQsMzldLGN5YW46WzM2LDM5XSxncmVlbjpbMzIsMzldLG1hZ2VudGE6WzM1LDM5XSxyZWQ6WzMxLDM5XSx5ZWxsb3c6WzMzLDM5XX07cy5zdHlsZXM9e3NwZWNpYWw6XCJjeWFuXCIsbnVtYmVyOlwieWVsbG93XCIsXCJib29sZWFuXCI6XCJ5ZWxsb3dcIix1bmRlZmluZWQ6XCJncmV5XCIsXCJudWxsXCI6XCJib2xkXCIsc3RyaW5nOlwiZ3JlZW5cIixkYXRlOlwibWFnZW50YVwiLHJlZ2V4cDpcInJlZFwifTtmdW5jdGlvbiBhKGUsdCl7dmFyIHU9cy5zdHlsZXNbdF07aWYodSl7cmV0dXJuXCJcdTAwMWJbXCIrcy5jb2xvcnNbdV1bMF0rXCJtXCIrZStcIlx1MDAxYltcIitzLmNvbG9yc1t1XVsxXStcIm1cIn1lbHNle3JldHVybiBlfX1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIGV9ZnVuY3Rpb24gZihlKXt2YXIgdD17fTtlLmZvckVhY2goZnVuY3Rpb24oZSx1KXt0W2VdPXRydWV9KTtyZXR1cm4gdH1mdW5jdGlvbiBjKGUsdCxuKXtpZihlLmN1c3RvbUluc3BlY3QmJnQmJl8odC5pbnNwZWN0KSYmdC5pbnNwZWN0IT09dS5pbnNwZWN0JiYhKHQuY29uc3RydWN0b3ImJnQuY29uc3RydWN0b3IucHJvdG90eXBlPT09dCkpe3ZhciByPXQuaW5zcGVjdChuLGUpO2lmKCF5KHIpKXtyPWMoZSxyLG4pfXJldHVybiByfXZhciBpPXAoZSx0KTtpZihpKXtyZXR1cm4gaX12YXIgbz1PYmplY3Qua2V5cyh0KTt2YXIgcz1mKG8pO2lmKGUuc2hvd0hpZGRlbil7bz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KX1pZih3KHQpJiYoby5pbmRleE9mKFwibWVzc2FnZVwiKT49MHx8by5pbmRleE9mKFwiZGVzY3JpcHRpb25cIik+PTApKXtyZXR1cm4gRCh0KX1pZihvLmxlbmd0aD09PTApe2lmKF8odCkpe3ZhciBhPXQubmFtZT9cIjogXCIrdC5uYW1lOlwiXCI7cmV0dXJuIGUuc3R5bGl6ZShcIltGdW5jdGlvblwiK2ErXCJdXCIsXCJzcGVjaWFsXCIpfWlmKGIodCkpe3JldHVybiBlLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLFwicmVnZXhwXCIpfWlmKHgodCkpe3JldHVybiBlLnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxcImRhdGVcIil9aWYodyh0KSl7cmV0dXJuIEQodCl9fXZhciBsPVwiXCIsQz1mYWxzZSxFPVtcIntcIixcIn1cIl07aWYoQSh0KSl7Qz10cnVlO0U9W1wiW1wiLFwiXVwiXX1pZihfKHQpKXt2YXIgRj10Lm5hbWU/XCI6IFwiK3QubmFtZTpcIlwiO2w9XCIgW0Z1bmN0aW9uXCIrRitcIl1cIn1pZihiKHQpKXtsPVwiIFwiK1JlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1pZih4KHQpKXtsPVwiIFwiK0RhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodCl9aWYodyh0KSl7bD1cIiBcIitEKHQpfWlmKG8ubGVuZ3RoPT09MCYmKCFDfHx0Lmxlbmd0aD09MCkpe3JldHVybiBFWzBdK2wrRVsxXX1pZihuPDApe2lmKGIodCkpe3JldHVybiBlLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLFwicmVnZXhwXCIpfWVsc2V7cmV0dXJuIGUuc3R5bGl6ZShcIltPYmplY3RdXCIsXCJzcGVjaWFsXCIpfX1lLnNlZW4ucHVzaCh0KTt2YXIgZztpZihDKXtnPWgoZSx0LG4scyxvKX1lbHNle2c9by5tYXAoZnVuY3Rpb24odSl7cmV0dXJuIG0oZSx0LG4scyx1LEMpfSl9ZS5zZWVuLnBvcCgpO3JldHVybiBkKGcsbCxFKX1mdW5jdGlvbiBwKGUsdCl7aWYodih0KSlyZXR1cm4gZS5zdHlsaXplKFwidW5kZWZpbmVkXCIsXCJ1bmRlZmluZWRcIik7aWYoeSh0KSl7dmFyIHU9XCInXCIrSlNPTi5zdHJpbmdpZnkodCkucmVwbGFjZSgvXlwifFwiJC9nLFwiXCIpLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpK1wiJ1wiO3JldHVybiBlLnN0eWxpemUodSxcInN0cmluZ1wiKX1pZihnKHQpKXJldHVybiBlLnN0eWxpemUoXCJcIit0LFwibnVtYmVyXCIpO2lmKEModCkpcmV0dXJuIGUuc3R5bGl6ZShcIlwiK3QsXCJib29sZWFuXCIpO2lmKEUodCkpcmV0dXJuIGUuc3R5bGl6ZShcIm51bGxcIixcIm51bGxcIil9ZnVuY3Rpb24gRChlKXtyZXR1cm5cIltcIitFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKStcIl1cIn1mdW5jdGlvbiBoKGUsdCx1LG4scil7dmFyIGk9W107Zm9yKHZhciBvPTAscz10Lmxlbmd0aDtvPHM7KytvKXtpZihqKHQsU3RyaW5nKG8pKSl7aS5wdXNoKG0oZSx0LHUsbixTdHJpbmcobyksdHJ1ZSkpfWVsc2V7aS5wdXNoKFwiXCIpfX1yLmZvckVhY2goZnVuY3Rpb24ocil7aWYoIXIubWF0Y2goL15cXGQrJC8pKXtpLnB1c2gobShlLHQsdSxuLHIsdHJ1ZSkpfX0pO3JldHVybiBpfWZ1bmN0aW9uIG0oZSx0LHUsbixyLGkpe3ZhciBvLHMsYTthPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKXx8e3ZhbHVlOnRbcl19O2lmKGEuZ2V0KXtpZihhLnNldCl7cz1lLnN0eWxpemUoXCJbR2V0dGVyL1NldHRlcl1cIixcInNwZWNpYWxcIil9ZWxzZXtzPWUuc3R5bGl6ZShcIltHZXR0ZXJdXCIsXCJzcGVjaWFsXCIpfX1lbHNle2lmKGEuc2V0KXtzPWUuc3R5bGl6ZShcIltTZXR0ZXJdXCIsXCJzcGVjaWFsXCIpfX1pZighaihuLHIpKXtvPVwiW1wiK3IrXCJdXCJ9aWYoIXMpe2lmKGUuc2Vlbi5pbmRleE9mKGEudmFsdWUpPDApe2lmKEUodSkpe3M9YyhlLGEudmFsdWUsbnVsbCl9ZWxzZXtzPWMoZSxhLnZhbHVlLHUtMSl9aWYocy5pbmRleE9mKFwiXFxuXCIpPi0xKXtpZihpKXtzPXMuc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiICBcIitlfSkuam9pbihcIlxcblwiKS5zdWJzdHIoMil9ZWxzZXtzPVwiXFxuXCIrcy5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCIgICBcIitlfSkuam9pbihcIlxcblwiKX19fWVsc2V7cz1lLnN0eWxpemUoXCJbQ2lyY3VsYXJdXCIsXCJzcGVjaWFsXCIpfX1pZih2KG8pKXtpZihpJiZyLm1hdGNoKC9eXFxkKyQvKSl7cmV0dXJuIHN9bz1KU09OLnN0cmluZ2lmeShcIlwiK3IpO2lmKG8ubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKXtvPW8uc3Vic3RyKDEsby5sZW5ndGgtMik7bz1lLnN0eWxpemUobyxcIm5hbWVcIil9ZWxzZXtvPW8ucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykucmVwbGFjZSgvKF5cInxcIiQpL2csXCInXCIpO289ZS5zdHlsaXplKG8sXCJzdHJpbmdcIil9fXJldHVybiBvK1wiOiBcIitzfWZ1bmN0aW9uIGQoZSx0LHUpe3ZhciBuPTA7dmFyIHI9ZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtuKys7aWYodC5pbmRleE9mKFwiXFxuXCIpPj0wKW4rKztyZXR1cm4gZSt0LnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLFwiXCIpLmxlbmd0aCsxfSwwKTtpZihyPjYwKXtyZXR1cm4gdVswXSsodD09PVwiXCI/XCJcIjp0K1wiXFxuIFwiKStcIiBcIitlLmpvaW4oXCIsXFxuICBcIikrXCIgXCIrdVsxXX1yZXR1cm4gdVswXSt0K1wiIFwiK2Uuam9pbihcIiwgXCIpK1wiIFwiK3VbMV19ZnVuY3Rpb24gQShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX11LmlzQXJyYXk9QTtmdW5jdGlvbiBDKGUpe3JldHVybiB0eXBlb2YgZT09PVwiYm9vbGVhblwifXUuaXNCb29sZWFuPUM7ZnVuY3Rpb24gRShlKXtyZXR1cm4gZT09PW51bGx9dS5pc051bGw9RTtmdW5jdGlvbiBGKGUpe3JldHVybiBlPT1udWxsfXUuaXNOdWxsT3JVbmRlZmluZWQ9RjtmdW5jdGlvbiBnKGUpe3JldHVybiB0eXBlb2YgZT09PVwibnVtYmVyXCJ9dS5pc051bWJlcj1nO2Z1bmN0aW9uIHkoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJzdHJpbmdcIn11LmlzU3RyaW5nPXk7ZnVuY3Rpb24gQihlKXtyZXR1cm4gdHlwZW9mIGU9PT1cInN5bWJvbFwifXUuaXNTeW1ib2w9QjtmdW5jdGlvbiB2KGUpe3JldHVybiBlPT09dm9pZCAwfXUuaXNVbmRlZmluZWQ9djtmdW5jdGlvbiBiKGUpe3JldHVybiBTKGUpJiZJKGUpPT09XCJbb2JqZWN0IFJlZ0V4cF1cIn11LmlzUmVnRXhwPWI7ZnVuY3Rpb24gUyhlKXtyZXR1cm4gdHlwZW9mIGU9PT1cIm9iamVjdFwiJiZlIT09bnVsbH11LmlzT2JqZWN0PVM7ZnVuY3Rpb24geChlKXtyZXR1cm4gUyhlKSYmSShlKT09PVwiW29iamVjdCBEYXRlXVwifXUuaXNEYXRlPXg7ZnVuY3Rpb24gdyhlKXtyZXR1cm4gUyhlKSYmKEkoZSk9PT1cIltvYmplY3QgRXJyb3JdXCJ8fGUgaW5zdGFuY2VvZiBFcnJvcil9dS5pc0Vycm9yPXc7ZnVuY3Rpb24gXyhlKXtyZXR1cm4gdHlwZW9mIGU9PT1cImZ1bmN0aW9uXCJ9dS5pc0Z1bmN0aW9uPV87ZnVuY3Rpb24gayhlKXtyZXR1cm4gZT09PW51bGx8fHR5cGVvZiBlPT09XCJib29sZWFuXCJ8fHR5cGVvZiBlPT09XCJudW1iZXJcInx8dHlwZW9mIGU9PT1cInN0cmluZ1wifHx0eXBlb2YgZT09PVwic3ltYm9sXCJ8fHR5cGVvZiBlPT09XCJ1bmRlZmluZWRcIn11LmlzUHJpbWl0aXZlPWs7dS5pc0J1ZmZlcj1lKFwiLi9zdXBwb3J0L2lzQnVmZmVyXCIpO2Z1bmN0aW9uIEkoZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBQKGUpe3JldHVybiBlPDEwP1wiMFwiK2UudG9TdHJpbmcoMTApOmUudG9TdHJpbmcoMTApfXZhciBMPVtcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl07ZnVuY3Rpb24gTygpe3ZhciBlPW5ldyBEYXRlO3ZhciB0PVtQKGUuZ2V0SG91cnMoKSksUChlLmdldE1pbnV0ZXMoKSksUChlLmdldFNlY29uZHMoKSldLmpvaW4oXCI6XCIpO3JldHVybltlLmdldERhdGUoKSxMW2UuZ2V0TW9udGgoKV0sdF0uam9pbihcIiBcIil9dS5sb2c9ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhcIiVzIC0gJXNcIixPKCksdS5mb3JtYXQuYXBwbHkodSxhcmd1bWVudHMpKX07dS5pbmhlcml0cz1lKFwiaW5oZXJpdHNcIik7dS5fZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7aWYoIXR8fCFTKHQpKXJldHVybiBlO3ZhciB1PU9iamVjdC5rZXlzKHQpO3ZhciBuPXUubGVuZ3RoO3doaWxlKG4tLSl7ZVt1W25dXT10W3Vbbl1dfXJldHVybiBlfTtmdW5jdGlvbiBqKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfX0pLmNhbGwodGhpcyxlKFwiX3Byb2Nlc3NcIiksdHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp7fSl9LHtcIi4vc3VwcG9ydC9pc0J1ZmZlclwiOjI3LF9wcm9jZXNzOjI2LGluaGVyaXRzOjI0fV0sMjk6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24odCl7KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4scixpLG8scyxhLGwsZixjLHAsRCxoLG0sZCxBLEMsRSxGLGcseSxCLHYsYixTLHgsdyxfO3M9ZShcImVzdHJhdmVyc2VcIik7YT1lKFwiZXN1dGlsc1wiKTtuPXMuU3ludGF4O2Z1bmN0aW9uIGsoZSl7cmV0dXJuIHllLkV4cHJlc3Npb24uaGFzT3duUHJvcGVydHkoZS50eXBlKX1mdW5jdGlvbiBJKGUpe3JldHVybiB5ZS5TdGF0ZW1lbnQuaGFzT3duUHJvcGVydHkoZS50eXBlKX1yPXtTZXF1ZW5jZTowLFlpZWxkOjEsQXdhaXQ6MSxBc3NpZ25tZW50OjEsQ29uZGl0aW9uYWw6MixBcnJvd0Z1bmN0aW9uOjIsTG9naWNhbE9SOjMsTG9naWNhbEFORDo0LEJpdHdpc2VPUjo1LEJpdHdpc2VYT1I6NixCaXR3aXNlQU5EOjcsRXF1YWxpdHk6OCxSZWxhdGlvbmFsOjksQml0d2lzZVNISUZUOjEwLEFkZGl0aXZlOjExLE11bHRpcGxpY2F0aXZlOjEyLFVuYXJ5OjEzLFBvc3RmaXg6MTQsQ2FsbDoxNSxOZXc6MTYsVGFnZ2VkVGVtcGxhdGU6MTcsTWVtYmVyOjE4LFByaW1hcnk6MTl9O2k9e1wifHxcIjpyLkxvZ2ljYWxPUixcIiYmXCI6ci5Mb2dpY2FsQU5ELFwifFwiOnIuQml0d2lzZU9SLFwiXlwiOnIuQml0d2lzZVhPUixcIiZcIjpyLkJpdHdpc2VBTkQsXCI9PVwiOnIuRXF1YWxpdHksXCIhPVwiOnIuRXF1YWxpdHksXCI9PT1cIjpyLkVxdWFsaXR5LFwiIT09XCI6ci5FcXVhbGl0eSxpczpyLkVxdWFsaXR5LGlzbnQ6ci5FcXVhbGl0eSxcIjxcIjpyLlJlbGF0aW9uYWwsXCI+XCI6ci5SZWxhdGlvbmFsLFwiPD1cIjpyLlJlbGF0aW9uYWwsXCI+PVwiOnIuUmVsYXRpb25hbCxcImluXCI6ci5SZWxhdGlvbmFsLFwiaW5zdGFuY2VvZlwiOnIuUmVsYXRpb25hbCxcIjw8XCI6ci5CaXR3aXNlU0hJRlQsXCI+PlwiOnIuQml0d2lzZVNISUZULFwiPj4+XCI6ci5CaXR3aXNlU0hJRlQsXCIrXCI6ci5BZGRpdGl2ZSxcIi1cIjpyLkFkZGl0aXZlLFwiKlwiOnIuTXVsdGlwbGljYXRpdmUsXCIlXCI6ci5NdWx0aXBsaWNhdGl2ZSxcIi9cIjpyLk11bHRpcGxpY2F0aXZlfTt2YXIgUD0xLEw9MTw8MSxPPTE8PDIsaj0xPDwzLE09MTw8NCxSPTE8PDU7dmFyIFQ9THxPLE49UHxMLHE9UHxMfE8sVT1QLHo9TyxXPVB8Tzt2YXIgVj1QLFk9UHxSLEc9MCxLPVB8TSwkPVB8ajtmdW5jdGlvbiBIKCl7cmV0dXJue2luZGVudDpudWxsLGJhc2U6bnVsbCxwYXJzZTpudWxsLGNvbW1lbnQ6ZmFsc2UsZm9ybWF0OntpbmRlbnQ6e3N0eWxlOlwiICAgIFwiLGJhc2U6MCxhZGp1c3RNdWx0aWxpbmVDb21tZW50OmZhbHNlfSxuZXdsaW5lOlwiXFxuXCIsc3BhY2U6XCIgXCIsanNvbjpmYWxzZSxyZW51bWJlcjpmYWxzZSxoZXhhZGVjaW1hbDpmYWxzZSxxdW90ZXM6XCJzaW5nbGVcIixlc2NhcGVsZXNzOmZhbHNlLGNvbXBhY3Q6ZmFsc2UscGFyZW50aGVzZXM6dHJ1ZSxzZW1pY29sb25zOnRydWUsc2FmZUNvbmNhdGVuYXRpb246ZmFsc2UscHJlc2VydmVCbGFua0xpbmVzOmZhbHNlfSxtb3o6e2NvbXByZWhlbnNpb25FeHByZXNzaW9uU3RhcnRzV2l0aEFzc2lnbm1lbnQ6ZmFsc2Usc3Rhcmxlc3NHZW5lcmF0b3I6ZmFsc2V9LHNvdXJjZU1hcDpudWxsLHNvdXJjZU1hcFJvb3Q6bnVsbCxzb3VyY2VNYXBXaXRoQ29kZTpmYWxzZSxkaXJlY3RpdmU6ZmFsc2UscmF3OnRydWUsdmVyYmF0aW06bnVsbCxzb3VyY2VDb2RlOm51bGx9fWZ1bmN0aW9uIEooZSx0KXt2YXIgdT1cIlwiO2Zvcih0fD0wO3Q+MDt0Pj4+PTEsZSs9ZSl7aWYodCYxKXt1Kz1lfX1yZXR1cm4gdX1sPUFycmF5LmlzQXJyYXk7aWYoIWwpe2w9ZnVuY3Rpb24gX2UoZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKT09PVwiW29iamVjdCBBcnJheV1cIn19ZnVuY3Rpb24gWChlKXtyZXR1cm4vW1xcclxcbl0vZy50ZXN0KGUpfWZ1bmN0aW9uIFooZSl7dmFyIHQ9ZS5sZW5ndGg7cmV0dXJuIHQmJmEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKGUuY2hhckNvZGVBdCh0LTEpKX1mdW5jdGlvbiBRKGUsdCl7dmFyIHU7Zm9yKHUgaW4gdCl7aWYodC5oYXNPd25Qcm9wZXJ0eSh1KSl7ZVt1XT10W3VdfX1yZXR1cm4gZX1mdW5jdGlvbiBlZShlLHQpe3ZhciB1LG47ZnVuY3Rpb24gcihlKXtyZXR1cm4gdHlwZW9mIGU9PT1cIm9iamVjdFwiJiZlIGluc3RhbmNlb2YgT2JqZWN0JiYhKGUgaW5zdGFuY2VvZiBSZWdFeHApfWZvcih1IGluIHQpe2lmKHQuaGFzT3duUHJvcGVydHkodSkpe249dFt1XTtpZihyKG4pKXtpZihyKGVbdV0pKXtlZShlW3VdLG4pfWVsc2V7ZVt1XT1lZSh7fSxuKX19ZWxzZXtlW3VdPW59fX1yZXR1cm4gZX1mdW5jdGlvbiB0ZShlKXt2YXIgdCx1LG4scixpO2lmKGUhPT1lKXt0aHJvdyBuZXcgRXJyb3IoXCJOdW1lcmljIGxpdGVyYWwgd2hvc2UgdmFsdWUgaXMgTmFOXCIpfWlmKGU8MHx8ZT09PTAmJjEvZTwwKXt0aHJvdyBuZXcgRXJyb3IoXCJOdW1lcmljIGxpdGVyYWwgd2hvc2UgdmFsdWUgaXMgbmVnYXRpdmVcIil9aWYoZT09PTEvMCl7cmV0dXJuIHA/XCJudWxsXCI6RD9cIjFlNDAwXCI6XCIxZSs0MDBcIn10PVwiXCIrZTtpZighRHx8dC5sZW5ndGg8Myl7cmV0dXJuIHR9dT10LmluZGV4T2YoXCIuXCIpO2lmKCFwJiZ0LmNoYXJDb2RlQXQoMCk9PT00OCYmdT09PTEpe3U9MDt0PXQuc2xpY2UoMSl9bj10O3Q9dC5yZXBsYWNlKFwiZStcIixcImVcIik7cj0wO2lmKChpPW4uaW5kZXhPZihcImVcIikpPjApe3I9K24uc2xpY2UoaSsxKTtuPW4uc2xpY2UoMCxpKX1pZih1Pj0wKXtyLT1uLmxlbmd0aC11LTE7bj0rKG4uc2xpY2UoMCx1KStuLnNsaWNlKHUrMSkpK1wiXCJ9aT0wO3doaWxlKG4uY2hhckNvZGVBdChuLmxlbmd0aCtpLTEpPT09NDgpey0taX1pZihpIT09MCl7ci09aTtuPW4uc2xpY2UoMCxpKX1pZihyIT09MCl7bis9XCJlXCIrcn1pZigobi5sZW5ndGg8dC5sZW5ndGh8fGgmJmU+MWUxMiYmTWF0aC5mbG9vcihlKT09PWUmJihuPVwiMHhcIitlLnRvU3RyaW5nKDE2KSkubGVuZ3RoPHQubGVuZ3RoKSYmK249PT1lKXt0PW59cmV0dXJuIHR9ZnVuY3Rpb24gdWUoZSx0KXtpZigoZSZ+MSk9PT04MjMyKXtyZXR1cm4odD9cInVcIjpcIlxcXFx1XCIpKyhlPT09ODIzMj9cIjIwMjhcIjpcIjIwMjlcIil9ZWxzZSBpZihlPT09MTB8fGU9PT0xMyl7cmV0dXJuKHQ/XCJcIjpcIlxcXFxcIikrKGU9PT0xMD9cIm5cIjpcInJcIil9cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSl9ZnVuY3Rpb24gbmUoZSl7dmFyIHQsdSxuLHIsaSxvLHMsYTt1PWUudG9TdHJpbmcoKTtpZihlLnNvdXJjZSl7dD11Lm1hdGNoKC9cXC8oW15cXC9dKikkLyk7aWYoIXQpe3JldHVybiB1fW49dFsxXTt1PVwiXCI7cz1mYWxzZTthPWZhbHNlO2ZvcihyPTAsaT1lLnNvdXJjZS5sZW5ndGg7cjxpOysrcil7bz1lLnNvdXJjZS5jaGFyQ29kZUF0KHIpO2lmKCFhKXtpZihzKXtpZihvPT09OTMpe3M9ZmFsc2V9fWVsc2V7aWYobz09PTQ3KXt1Kz1cIlxcXFxcIn1lbHNlIGlmKG89PT05MSl7cz10cnVlfX11Kz11ZShvLGEpO2E9bz09PTkyfWVsc2V7dSs9dWUobyxhKTthPWZhbHNlfX1yZXR1cm5cIi9cIit1K1wiL1wiK259cmV0dXJuIHV9ZnVuY3Rpb24gcmUoZSx0KXt2YXIgdTtpZihlPT09OCl7cmV0dXJuXCJcXFxcYlwifWlmKGU9PT0xMil7cmV0dXJuXCJcXFxcZlwifWlmKGU9PT05KXtyZXR1cm5cIlxcXFx0XCJ9dT1lLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO2lmKHB8fGU+MjU1KXtyZXR1cm5cIlxcXFx1XCIrXCIwMDAwXCIuc2xpY2UodS5sZW5ndGgpK3V9ZWxzZSBpZihlPT09MCYmIWEuY29kZS5pc0RlY2ltYWxEaWdpdCh0KSl7cmV0dXJuXCJcXFxcMFwifWVsc2UgaWYoZT09PTExKXtyZXR1cm5cIlxcXFx4MEJcIn1lbHNle3JldHVyblwiXFxcXHhcIitcIjAwXCIuc2xpY2UodS5sZW5ndGgpK3V9fWZ1bmN0aW9uIGllKGUpe2lmKGU9PT05Mil7cmV0dXJuXCJcXFxcXFxcXFwifWlmKGU9PT0xMCl7cmV0dXJuXCJcXFxcblwifWlmKGU9PT0xMyl7cmV0dXJuXCJcXFxcclwifWlmKGU9PT04MjMyKXtyZXR1cm5cIlxcXFx1MjAyOFwifWlmKGU9PT04MjMzKXtyZXR1cm5cIlxcXFx1MjAyOVwifXRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdGx5IGNsYXNzaWZpZWQgY2hhcmFjdGVyXCIpfWZ1bmN0aW9uIG9lKGUpe3ZhciB0LHUsbixyO3I9bT09PVwiZG91YmxlXCI/J1wiJzpcIidcIjtmb3IodD0wLHU9ZS5sZW5ndGg7dDx1OysrdCl7bj1lLmNoYXJDb2RlQXQodCk7aWYobj09PTM5KXtyPSdcIic7YnJlYWt9ZWxzZSBpZihuPT09MzQpe3I9XCInXCI7YnJlYWt9ZWxzZSBpZihuPT09OTIpeysrdH19cmV0dXJuIHIrZStyfWZ1bmN0aW9uIHNlKGUpe3ZhciB0PVwiXCIsdSxuLHIsaT0wLG89MCxzLGw7Zm9yKHU9MCxuPWUubGVuZ3RoO3U8bjsrK3Upe3I9ZS5jaGFyQ29kZUF0KHUpO2lmKHI9PT0zOSl7KytpfWVsc2UgaWYocj09PTM0KXsrK299ZWxzZSBpZihyPT09NDcmJnApe3QrPVwiXFxcXFwifWVsc2UgaWYoYS5jb2RlLmlzTGluZVRlcm1pbmF0b3Iocil8fHI9PT05Mil7dCs9aWUocik7Y29udGludWV9ZWxzZSBpZighYS5jb2RlLmlzSWRlbnRpZmllclBhcnRFUzUocikmJihwJiZyPDMyfHwhcCYmIWQmJihyPDMyfHxyPjEyNikpKXt0Kz1yZShyLGUuY2hhckNvZGVBdCh1KzEpKTtjb250aW51ZX10Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHIpfXM9IShtPT09XCJkb3VibGVcInx8bT09PVwiYXV0b1wiJiZvPGkpO2w9cz9cIidcIjonXCInO2lmKCEocz9pOm8pKXtyZXR1cm4gbCt0K2x9ZT10O3Q9bDtmb3IodT0wLG49ZS5sZW5ndGg7dTxuOysrdSl7cj1lLmNoYXJDb2RlQXQodSk7aWYocj09PTM5JiZzfHxyPT09MzQmJiFzKXt0Kz1cIlxcXFxcIn10Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHIpfXJldHVybiB0K2x9ZnVuY3Rpb24gYWUoZSl7dmFyIHQsdSxuLHI9XCJcIjtmb3IodD0wLHU9ZS5sZW5ndGg7dDx1OysrdCl7bj1lW3RdO3IrPWwobik/YWUobik6bn1yZXR1cm4gcn1mdW5jdGlvbiBsZShlLHQpe2lmKCFiKXtpZihsKGUpKXtyZXR1cm4gYWUoZSl9ZWxzZXtyZXR1cm4gZX19aWYodD09bnVsbCl7aWYoZSBpbnN0YW5jZW9mIG8pe3JldHVybiBlfWVsc2V7dD17fX19aWYodC5sb2M9PW51bGwpe3JldHVybiBuZXcgbyhudWxsLG51bGwsYixlLHQubmFtZXx8bnVsbCl9cmV0dXJuIG5ldyBvKHQubG9jLnN0YXJ0LmxpbmUsdC5sb2Muc3RhcnQuY29sdW1uLGI9PT10cnVlP3QubG9jLnNvdXJjZXx8bnVsbDpiLGUsdC5uYW1lfHxudWxsKX1mdW5jdGlvbiBmZSgpe3JldHVybiBDP0M6XCIgXCJ9ZnVuY3Rpb24gY2UoZSx0KXt2YXIgdSxuLHIsaTt1PWxlKGUpLnRvU3RyaW5nKCk7aWYodS5sZW5ndGg9PT0wKXtyZXR1cm5bdF19bj1sZSh0KS50b1N0cmluZygpO2lmKG4ubGVuZ3RoPT09MCl7cmV0dXJuW2VdfXI9dS5jaGFyQ29kZUF0KHUubGVuZ3RoLTEpO2k9bi5jaGFyQ29kZUF0KDApO2lmKChyPT09NDN8fHI9PT00NSkmJnI9PT1pfHxhLmNvZGUuaXNJZGVudGlmaWVyUGFydEVTNShyKSYmYS5jb2RlLmlzSWRlbnRpZmllclBhcnRFUzUoaSl8fHI9PT00NyYmaT09PTEwNSl7cmV0dXJuW2UsZmUoKSx0XX1lbHNlIGlmKGEuY29kZS5pc1doaXRlU3BhY2Uocil8fGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKHIpfHxhLmNvZGUuaXNXaGl0ZVNwYWNlKGkpfHxhLmNvZGUuaXNMaW5lVGVybWluYXRvcihpKSl7cmV0dXJuW2UsdF19cmV0dXJuW2UsQyx0XX1mdW5jdGlvbiBwZShlKXtyZXR1cm5bZixlXX1mdW5jdGlvbiBEZShlKXt2YXIgdDt0PWY7Zis9YztlKGYpO2Y9dH1mdW5jdGlvbiBoZShlKXt2YXIgdDtmb3IodD1lLmxlbmd0aC0xO3Q+PTA7LS10KXtpZihhLmNvZGUuaXNMaW5lVGVybWluYXRvcihlLmNoYXJDb2RlQXQodCkpKXticmVha319cmV0dXJuIGUubGVuZ3RoLTEtdH1mdW5jdGlvbiBtZShlLHQpe3ZhciB1LG4scixpLG8scyxsLGM7dT1lLnNwbGl0KC9cXHJcXG58W1xcclxcbl0vKTtzPU51bWJlci5NQVhfVkFMVUU7Zm9yKG49MSxyPXUubGVuZ3RoO248cjsrK24pe2k9dVtuXTtvPTA7d2hpbGUobzxpLmxlbmd0aCYmYS5jb2RlLmlzV2hpdGVTcGFjZShpLmNoYXJDb2RlQXQobykpKXsrK299aWYocz5vKXtzPW99fWlmKHR5cGVvZiB0IT09XCJ1bmRlZmluZWRcIil7bD1mO2lmKHVbMV1bc109PT1cIipcIil7dCs9XCIgXCJ9Zj10fWVsc2V7aWYocyYxKXstLXN9bD1mfWZvcihuPTEscj11Lmxlbmd0aDtuPHI7KytuKXtjPWxlKHBlKHVbbl0uc2xpY2UocykpKTt1W25dPWI/Yy5qb2luKFwiXCIpOmN9Zj1sO3JldHVybiB1LmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gZGUoZSx0KXtpZihlLnR5cGU9PT1cIkxpbmVcIil7aWYoWihlLnZhbHVlKSl7cmV0dXJuXCIvL1wiK2UudmFsdWV9ZWxzZXt2YXIgdT1cIi8vXCIrZS52YWx1ZTtpZigheCl7dSs9XCJcXG5cIn1yZXR1cm4gdX19aWYoQi5mb3JtYXQuaW5kZW50LmFkanVzdE11bHRpbGluZUNvbW1lbnQmJi9bXFxuXFxyXS8udGVzdChlLnZhbHVlKSl7cmV0dXJuIG1lKFwiLypcIitlLnZhbHVlK1wiKi9cIix0KX1yZXR1cm5cIi8qXCIrZS52YWx1ZStcIiovXCJ9ZnVuY3Rpb24gQWUoZSx0KXt2YXIgdSxyLGksbyxzLGEsbCxwLEQsaCxtLGQsQSxDO2lmKGUubGVhZGluZ0NvbW1lbnRzJiZlLmxlYWRpbmdDb21tZW50cy5sZW5ndGg+MCl7bz10O2lmKHgpe2k9ZS5sZWFkaW5nQ29tbWVudHNbMF07dD1bXTtwPWkuZXh0ZW5kZWRSYW5nZTtEPWkucmFuZ2U7bT1TLnN1YnN0cmluZyhwWzBdLERbMF0pO0M9KG0ubWF0Y2goL1xcbi9nKXx8W10pLmxlbmd0aDtpZihDPjApe3QucHVzaChKKFwiXFxuXCIsQykpO3QucHVzaChwZShkZShpKSkpfWVsc2V7dC5wdXNoKG0pO3QucHVzaChkZShpKSl9aD1EO2Zvcih1PTEscj1lLmxlYWRpbmdDb21tZW50cy5sZW5ndGg7dTxyO3UrKyl7aT1lLmxlYWRpbmdDb21tZW50c1t1XTtEPWkucmFuZ2U7ZD1TLnN1YnN0cmluZyhoWzFdLERbMF0pO0M9KGQubWF0Y2goL1xcbi9nKXx8W10pLmxlbmd0aDt0LnB1c2goSihcIlxcblwiLEMpKTt0LnB1c2gocGUoZGUoaSkpKTtoPUR9QT1TLnN1YnN0cmluZyhEWzFdLHBbMV0pO0M9KEEubWF0Y2goL1xcbi9nKXx8W10pLmxlbmd0aDt0LnB1c2goSihcIlxcblwiLEMpKX1lbHNle2k9ZS5sZWFkaW5nQ29tbWVudHNbMF07dD1bXTtpZihnJiZlLnR5cGU9PT1uLlByb2dyYW0mJmUuYm9keS5sZW5ndGg9PT0wKXt0LnB1c2goXCJcXG5cIil9dC5wdXNoKGRlKGkpKTtpZighWihsZSh0KS50b1N0cmluZygpKSl7dC5wdXNoKFwiXFxuXCIpfWZvcih1PTEscj1lLmxlYWRpbmdDb21tZW50cy5sZW5ndGg7dTxyOysrdSl7aT1lLmxlYWRpbmdDb21tZW50c1t1XTtsPVtkZShpKV07XG5pZighWihsZShsKS50b1N0cmluZygpKSl7bC5wdXNoKFwiXFxuXCIpfXQucHVzaChwZShsKSl9fXQucHVzaChwZShvKSl9aWYoZS50cmFpbGluZ0NvbW1lbnRzKXtpZih4KXtpPWUudHJhaWxpbmdDb21tZW50c1swXTtwPWkuZXh0ZW5kZWRSYW5nZTtEPWkucmFuZ2U7bT1TLnN1YnN0cmluZyhwWzBdLERbMF0pO0M9KG0ubWF0Y2goL1xcbi9nKXx8W10pLmxlbmd0aDtpZihDPjApe3QucHVzaChKKFwiXFxuXCIsQykpO3QucHVzaChwZShkZShpKSkpfWVsc2V7dC5wdXNoKG0pO3QucHVzaChkZShpKSl9fWVsc2V7cz0hWihsZSh0KS50b1N0cmluZygpKTthPUooXCIgXCIsaGUobGUoW2YsdCxjXSkudG9TdHJpbmcoKSkpO2Zvcih1PTAscj1lLnRyYWlsaW5nQ29tbWVudHMubGVuZ3RoO3U8cjsrK3Upe2k9ZS50cmFpbGluZ0NvbW1lbnRzW3VdO2lmKHMpe2lmKHU9PT0wKXt0PVt0LGNdfWVsc2V7dD1bdCxhXX10LnB1c2goZGUoaSxhKSl9ZWxzZXt0PVt0LHBlKGRlKGkpKV19aWYodSE9PXItMSYmIVoobGUodCkudG9TdHJpbmcoKSkpe3Q9W3QsXCJcXG5cIl19fX19cmV0dXJuIHR9ZnVuY3Rpb24gQ2UoZSx0LHUpe3ZhciBuLHI9MDtmb3Iobj1lO248dDtuKyspe2lmKFNbbl09PT1cIlxcblwiKXtyKyt9fWZvcihuPTE7bjxyO24rKyl7dS5wdXNoKEEpfX1mdW5jdGlvbiBFZShlLHQsdSl7aWYodDx1KXtyZXR1cm5bXCIoXCIsZSxcIilcIl19cmV0dXJuIGV9ZnVuY3Rpb24gRmUoZSl7dmFyIHQsdSxuO249ZS5zcGxpdCgvXFxyXFxufFxcbi8pO2Zvcih0PTEsdT1uLmxlbmd0aDt0PHU7dCsrKXtuW3RdPUErZituW3RdfXJldHVybiBufWZ1bmN0aW9uIGdlKGUsdCl7dmFyIHUsbixpO3U9ZVtCLnZlcmJhdGltXTtpZih0eXBlb2YgdT09PVwic3RyaW5nXCIpe249RWUoRmUodSksci5TZXF1ZW5jZSx0KX1lbHNle249RmUodS5jb250ZW50KTtpPXUucHJlY2VkZW5jZSE9bnVsbD91LnByZWNlZGVuY2U6ci5TZXF1ZW5jZTtuPUVlKG4saSx0KX1yZXR1cm4gbGUobixlKX1mdW5jdGlvbiB5ZSgpe315ZS5wcm90b3R5cGUubWF5YmVCbG9jaz1mdW5jdGlvbihlLHQpe3ZhciB1LHIsaT10aGlzO3I9IUIuY29tbWVudHx8IWUubGVhZGluZ0NvbW1lbnRzO2lmKGUudHlwZT09PW4uQmxvY2tTdGF0ZW1lbnQmJnIpe3JldHVybltDLHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZSx0KV19aWYoZS50eXBlPT09bi5FbXB0eVN0YXRlbWVudCYmcil7cmV0dXJuXCI7XCJ9RGUoZnVuY3Rpb24oKXt1PVtBLHBlKGkuZ2VuZXJhdGVTdGF0ZW1lbnQoZSx0KSldfSk7cmV0dXJuIHV9O3llLnByb3RvdHlwZS5tYXliZUJsb2NrU3VmZml4PWZ1bmN0aW9uKGUsdCl7dmFyIHU9WihsZSh0KS50b1N0cmluZygpKTtpZihlLnR5cGU9PT1uLkJsb2NrU3RhdGVtZW50JiYoIUIuY29tbWVudHx8IWUubGVhZGluZ0NvbW1lbnRzKSYmIXUpe3JldHVyblt0LENdfWlmKHUpe3JldHVyblt0LGZdfXJldHVyblt0LEEsZl19O2Z1bmN0aW9uIEJlKGUpe3JldHVybiBsZShlLm5hbWUsZSl9ZnVuY3Rpb24gdmUoZSx0KXtyZXR1cm4gZS5hc3luYz9cImFzeW5jXCIrKHQ/ZmUoKTpDKTpcIlwifWZ1bmN0aW9uIGJlKGUpe3ZhciB0PWUuZ2VuZXJhdG9yJiYhQi5tb3ouc3Rhcmxlc3NHZW5lcmF0b3I7cmV0dXJuIHQ/XCIqXCIrQzpcIlwifWZ1bmN0aW9uIFNlKGUpe3ZhciB0PWUudmFsdWU7aWYodC5hc3luYyl7cmV0dXJuIHZlKHQsIWUuY29tcHV0ZWQpfWVsc2V7cmV0dXJuIGJlKHQpP1wiKlwiOlwiXCJ9fXllLnByb3RvdHlwZS5nZW5lcmF0ZVBhdHRlcm49ZnVuY3Rpb24oZSx0LHUpe2lmKGUudHlwZT09PW4uSWRlbnRpZmllcil7cmV0dXJuIEJlKGUpfXJldHVybiB0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLHQsdSl9O3llLnByb3RvdHlwZS5nZW5lcmF0ZUZ1bmN0aW9uUGFyYW1zPWZ1bmN0aW9uKGUpe3ZhciB0LHUsaSxvO289ZmFsc2U7aWYoZS50eXBlPT09bi5BcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiYmIWUucmVzdCYmKCFlLmRlZmF1bHRzfHxlLmRlZmF1bHRzLmxlbmd0aD09PTApJiZlLnBhcmFtcy5sZW5ndGg9PT0xJiZlLnBhcmFtc1swXS50eXBlPT09bi5JZGVudGlmaWVyKXtpPVt2ZShlLHRydWUpLEJlKGUucGFyYW1zWzBdKV19ZWxzZXtpPWUudHlwZT09PW4uQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24/W3ZlKGUsZmFsc2UpXTpbXTtpLnB1c2goXCIoXCIpO2lmKGUuZGVmYXVsdHMpe289dHJ1ZX1mb3IodD0wLHU9ZS5wYXJhbXMubGVuZ3RoO3Q8dTsrK3Qpe2lmKG8mJmUuZGVmYXVsdHNbdF0pe2kucHVzaCh0aGlzLmdlbmVyYXRlQXNzaWdubWVudChlLnBhcmFtc1t0XSxlLmRlZmF1bHRzW3RdLFwiPVwiLHIuQXNzaWdubWVudCxxKSl9ZWxzZXtpLnB1c2godGhpcy5nZW5lcmF0ZVBhdHRlcm4oZS5wYXJhbXNbdF0sci5Bc3NpZ25tZW50LHEpKX1pZih0KzE8dSl7aS5wdXNoKFwiLFwiK0MpfX1pZihlLnJlc3Qpe2lmKGUucGFyYW1zLmxlbmd0aCl7aS5wdXNoKFwiLFwiK0MpfWkucHVzaChcIi4uLlwiKTtpLnB1c2goQmUoZS5yZXN0KSl9aS5wdXNoKFwiKVwiKX1yZXR1cm4gaX07eWUucHJvdG90eXBlLmdlbmVyYXRlRnVuY3Rpb25Cb2R5PWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD10aGlzLmdlbmVyYXRlRnVuY3Rpb25QYXJhbXMoZSk7aWYoZS50eXBlPT09bi5BcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbil7dC5wdXNoKEMpO3QucHVzaChcIj0+XCIpfWlmKGUuZXhwcmVzc2lvbil7dC5wdXNoKEMpO3U9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5ib2R5LHIuQXNzaWdubWVudCxxKTtpZih1LnRvU3RyaW5nKCkuY2hhckF0KDApPT09XCJ7XCIpe3U9W1wiKFwiLHUsXCIpXCJdfXQucHVzaCh1KX1lbHNle3QucHVzaCh0aGlzLm1heWJlQmxvY2soZS5ib2R5LCQpKX1yZXR1cm4gdH07eWUucHJvdG90eXBlLmdlbmVyYXRlSXRlcmF0aW9uRm9yU3RhdGVtZW50PWZ1bmN0aW9uKGUsdCx1KXt2YXIgaT1bXCJmb3JcIitDK1wiKFwiXSxvPXRoaXM7RGUoZnVuY3Rpb24oKXtpZih0LmxlZnQudHlwZT09PW4uVmFyaWFibGVEZWNsYXJhdGlvbil7RGUoZnVuY3Rpb24oKXtpLnB1c2godC5sZWZ0LmtpbmQrZmUoKSk7aS5wdXNoKG8uZ2VuZXJhdGVTdGF0ZW1lbnQodC5sZWZ0LmRlY2xhcmF0aW9uc1swXSxHKSl9KX1lbHNle2kucHVzaChvLmdlbmVyYXRlRXhwcmVzc2lvbih0LmxlZnQsci5DYWxsLHEpKX1pPWNlKGksZSk7aT1bY2UoaSxvLmdlbmVyYXRlRXhwcmVzc2lvbih0LnJpZ2h0LHIuU2VxdWVuY2UscSkpLFwiKVwiXX0pO2kucHVzaCh0aGlzLm1heWJlQmxvY2sodC5ib2R5LHUpKTtyZXR1cm4gaX07eWUucHJvdG90eXBlLmdlbmVyYXRlUHJvcGVydHlLZXk9ZnVuY3Rpb24oZSx0KXt2YXIgdT1bXTtpZih0KXt1LnB1c2goXCJbXCIpfXUucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLHIuU2VxdWVuY2UscSkpO2lmKHQpe3UucHVzaChcIl1cIil9cmV0dXJuIHV9O3llLnByb3RvdHlwZS5nZW5lcmF0ZUFzc2lnbm1lbnQ9ZnVuY3Rpb24oZSx0LHUsbixpKXtpZihyLkFzc2lnbm1lbnQ8bil7aXw9UH1yZXR1cm4gRWUoW3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUsci5DYWxsLGkpLEMrdStDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKHQsci5Bc3NpZ25tZW50LGkpXSxyLkFzc2lnbm1lbnQsbil9O3llLnByb3RvdHlwZS5zZW1pY29sb249ZnVuY3Rpb24oZSl7aWYoIUYmJmUmUil7cmV0dXJuXCJcIn1yZXR1cm5cIjtcIn07eWUuU3RhdGVtZW50PXtCbG9ja1N0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LG4scj1bXCJ7XCIsQV0saT10aGlzO0RlKGZ1bmN0aW9uKCl7aWYoZS5ib2R5Lmxlbmd0aD09PTAmJngpe3U9ZS5yYW5nZTtpZih1WzFdLXVbMF0+Mil7bj1TLnN1YnN0cmluZyh1WzBdKzEsdVsxXS0xKTtpZihuWzBdPT09XCJcXG5cIil7cj1bXCJ7XCJdfXIucHVzaChuKX19dmFyIG8scyxhLGw7bD1WO2lmKHQmail7bHw9TX1mb3Iobz0wLHM9ZS5ib2R5Lmxlbmd0aDtvPHM7KytvKXtpZih4KXtpZihvPT09MCl7aWYoZS5ib2R5WzBdLmxlYWRpbmdDb21tZW50cyl7dT1lLmJvZHlbMF0ubGVhZGluZ0NvbW1lbnRzWzBdLmV4dGVuZGVkUmFuZ2U7bj1TLnN1YnN0cmluZyh1WzBdLHVbMV0pO2lmKG5bMF09PT1cIlxcblwiKXtyPVtcIntcIl19fWlmKCFlLmJvZHlbMF0ubGVhZGluZ0NvbW1lbnRzKXtDZShlLnJhbmdlWzBdLGUuYm9keVswXS5yYW5nZVswXSxyKX19aWYobz4wKXtpZighZS5ib2R5W28tMV0udHJhaWxpbmdDb21tZW50cyYmIWUuYm9keVtvXS5sZWFkaW5nQ29tbWVudHMpe0NlKGUuYm9keVtvLTFdLnJhbmdlWzFdLGUuYm9keVtvXS5yYW5nZVswXSxyKX19fWlmKG89PT1zLTEpe2x8PVJ9aWYoZS5ib2R5W29dLmxlYWRpbmdDb21tZW50cyYmeCl7YT1pLmdlbmVyYXRlU3RhdGVtZW50KGUuYm9keVtvXSxsKX1lbHNle2E9cGUoaS5nZW5lcmF0ZVN0YXRlbWVudChlLmJvZHlbb10sbCkpfXIucHVzaChhKTtpZighWihsZShhKS50b1N0cmluZygpKSl7aWYoeCYmbzxzLTEpe2lmKCFlLmJvZHlbbysxXS5sZWFkaW5nQ29tbWVudHMpe3IucHVzaChBKX19ZWxzZXtyLnB1c2goQSl9fWlmKHgpe2lmKG89PT1zLTEpe2lmKCFlLmJvZHlbb10udHJhaWxpbmdDb21tZW50cyl7Q2UoZS5ib2R5W29dLnJhbmdlWzFdLGUucmFuZ2VbMV0scil9fX19fSk7ci5wdXNoKHBlKFwifVwiKSk7cmV0dXJuIHJ9LEJyZWFrU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7aWYoZS5sYWJlbCl7cmV0dXJuXCJicmVhayBcIitlLmxhYmVsLm5hbWUrdGhpcy5zZW1pY29sb24odCl9cmV0dXJuXCJicmVha1wiK3RoaXMuc2VtaWNvbG9uKHQpfSxDb250aW51ZVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe2lmKGUubGFiZWwpe3JldHVyblwiY29udGludWUgXCIrZS5sYWJlbC5uYW1lK3RoaXMuc2VtaWNvbG9uKHQpfXJldHVyblwiY29udGludWVcIit0aGlzLnNlbWljb2xvbih0KX0sQ2xhc3NCb2R5OmZ1bmN0aW9uKGUsdCl7dmFyIHU9W1wie1wiLEFdLG49dGhpcztEZShmdW5jdGlvbih0KXt2YXIgaSxvO2ZvcihpPTAsbz1lLmJvZHkubGVuZ3RoO2k8bzsrK2kpe3UucHVzaCh0KTt1LnB1c2gobi5nZW5lcmF0ZUV4cHJlc3Npb24oZS5ib2R5W2ldLHIuU2VxdWVuY2UscSkpO2lmKGkrMTxvKXt1LnB1c2goQSl9fX0pO2lmKCFaKGxlKHUpLnRvU3RyaW5nKCkpKXt1LnB1c2goQSl9dS5wdXNoKGYpO3UucHVzaChcIn1cIik7cmV0dXJuIHV9LENsYXNzRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO3U9W1wiY2xhc3MgXCIrZS5pZC5uYW1lXTtpZihlLnN1cGVyQ2xhc3Mpe249Y2UoXCJleHRlbmRzXCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zdXBlckNsYXNzLHIuQXNzaWdubWVudCxxKSk7dT1jZSh1LG4pfXUucHVzaChDKTt1LnB1c2godGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmJvZHksWSkpO3JldHVybiB1fSxEaXJlY3RpdmVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtpZihCLnJhdyYmZS5yYXcpe3JldHVybiBlLnJhdyt0aGlzLnNlbWljb2xvbih0KX1yZXR1cm4gb2UoZS5kaXJlY3RpdmUpK3RoaXMuc2VtaWNvbG9uKHQpfSxEb1doaWxlU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHU9Y2UoXCJkb1wiLHRoaXMubWF5YmVCbG9jayhlLmJvZHksVikpO3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGUuYm9keSx1KTtyZXR1cm4gY2UodSxbXCJ3aGlsZVwiK0MrXCIoXCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS50ZXN0LHIuU2VxdWVuY2UscSksXCIpXCIrdGhpcy5zZW1pY29sb24odCldKX0sQ2F0Y2hDbGF1c2U6ZnVuY3Rpb24oZSx0KXt2YXIgdSxuPXRoaXM7RGUoZnVuY3Rpb24oKXt2YXIgdDt1PVtcImNhdGNoXCIrQytcIihcIixuLmdlbmVyYXRlRXhwcmVzc2lvbihlLnBhcmFtLHIuU2VxdWVuY2UscSksXCIpXCJdO2lmKGUuZ3VhcmQpe3Q9bi5nZW5lcmF0ZUV4cHJlc3Npb24oZS5ndWFyZCxyLlNlcXVlbmNlLHEpO3Uuc3BsaWNlKDIsMCxcIiBpZiBcIix0KX19KTt1LnB1c2godGhpcy5tYXliZUJsb2NrKGUuYm9keSxWKSk7cmV0dXJuIHV9LERlYnVnZ2VyU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJkZWJ1Z2dlclwiK3RoaXMuc2VtaWNvbG9uKHQpfSxFbXB0eVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3JldHVyblwiO1wifSxFeHBvcnREZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3ZhciB1PVtcImV4cG9ydFwiXSxpLG89dGhpcztpPXQmUj9ZOlY7aWYoZVtcImRlZmF1bHRcIl0pe3U9Y2UodSxcImRlZmF1bHRcIik7aWYoSShlLmRlY2xhcmF0aW9uKSl7dT1jZSh1LHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5kZWNsYXJhdGlvbixpKSl9ZWxzZXt1PWNlKHUsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5kZWNsYXJhdGlvbixyLkFzc2lnbm1lbnQscSkrdGhpcy5zZW1pY29sb24odCkpfXJldHVybiB1fWlmKGUuZGVjbGFyYXRpb24pe3JldHVybiBjZSh1LHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5kZWNsYXJhdGlvbixpKSl9aWYoZS5zcGVjaWZpZXJzKXtpZihlLnNwZWNpZmllcnMubGVuZ3RoPT09MCl7dT1jZSh1LFwie1wiK0MrXCJ9XCIpfWVsc2UgaWYoZS5zcGVjaWZpZXJzWzBdLnR5cGU9PT1uLkV4cG9ydEJhdGNoU3BlY2lmaWVyKXt1PWNlKHUsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zcGVjaWZpZXJzWzBdLHIuU2VxdWVuY2UscSkpfWVsc2V7dT1jZSh1LFwie1wiKTtEZShmdW5jdGlvbih0KXt2YXIgbixpO3UucHVzaChBKTtmb3Iobj0wLGk9ZS5zcGVjaWZpZXJzLmxlbmd0aDtuPGk7KytuKXt1LnB1c2godCk7dS5wdXNoKG8uZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3BlY2lmaWVyc1tuXSxyLlNlcXVlbmNlLHEpKTtpZihuKzE8aSl7dS5wdXNoKFwiLFwiK0EpfX19KTtpZighWihsZSh1KS50b1N0cmluZygpKSl7dS5wdXNoKEEpfXUucHVzaChmK1wifVwiKX1pZihlLnNvdXJjZSl7dT1jZSh1LFtcImZyb21cIitDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc291cmNlLHIuU2VxdWVuY2UscSksdGhpcy5zZW1pY29sb24odCldKX1lbHNle3UucHVzaCh0aGlzLnNlbWljb2xvbih0KSl9fXJldHVybiB1fSxFeHBvcnREZWZhdWx0RGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXtlLmRlZmF1bHQ9dHJ1ZTtyZXR1cm4gdGhpcy5FeHBvcnREZWNsYXJhdGlvbihlLHQpfSxFeHBvcnROYW1lZERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuRXhwb3J0RGVjbGFyYXRpb24oZSx0KX0sRXhwcmVzc2lvblN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LGk7ZnVuY3Rpb24gbyhlKXt2YXIgdDtpZihlLnNsaWNlKDAsNSkhPT1cImNsYXNzXCIpe3JldHVybiBmYWxzZX10PWUuY2hhckNvZGVBdCg1KTtyZXR1cm4gdD09PTEyM3x8YS5jb2RlLmlzV2hpdGVTcGFjZSh0KXx8YS5jb2RlLmlzTGluZVRlcm1pbmF0b3IodCl9ZnVuY3Rpb24gcyhlKXt2YXIgdDtpZihlLnNsaWNlKDAsOCkhPT1cImZ1bmN0aW9uXCIpe3JldHVybiBmYWxzZX10PWUuY2hhckNvZGVBdCg4KTtyZXR1cm4gdD09PTQwfHxhLmNvZGUuaXNXaGl0ZVNwYWNlKHQpfHx0PT09NDJ8fGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKHQpfWZ1bmN0aW9uIGwoZSl7dmFyIHQsdSxuO2lmKGUuc2xpY2UoMCw1KSE9PVwiYXN5bmNcIil7cmV0dXJuIGZhbHNlfWlmKCFhLmNvZGUuaXNXaGl0ZVNwYWNlKGUuY2hhckNvZGVBdCg1KSkpe3JldHVybiBmYWxzZX1mb3IodT02LG49ZS5sZW5ndGg7dTxuOysrdSl7aWYoIWEuY29kZS5pc1doaXRlU3BhY2UoZS5jaGFyQ29kZUF0KHUpKSl7YnJlYWt9fWlmKHU9PT1uKXtyZXR1cm4gZmFsc2V9aWYoZS5zbGljZSh1LHUrOCkhPT1cImZ1bmN0aW9uXCIpe3JldHVybiBmYWxzZX10PWUuY2hhckNvZGVBdCh1KzgpO3JldHVybiB0PT09NDB8fGEuY29kZS5pc1doaXRlU3BhY2UodCl8fHQ9PT00Mnx8YS5jb2RlLmlzTGluZVRlcm1pbmF0b3IodCl9dT1bdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5leHByZXNzaW9uLHIuU2VxdWVuY2UscSldO2k9bGUodSkudG9TdHJpbmcoKTtpZihpLmNoYXJDb2RlQXQoMCk9PT0xMjN8fG8oaSl8fHMoaSl8fGwoaSl8fHkmJnQmTSYmZS5leHByZXNzaW9uLnR5cGU9PT1uLkxpdGVyYWwmJnR5cGVvZiBlLmV4cHJlc3Npb24udmFsdWU9PT1cInN0cmluZ1wiKXt1PVtcIihcIix1LFwiKVwiK3RoaXMuc2VtaWNvbG9uKHQpXX1lbHNle3UucHVzaCh0aGlzLnNlbWljb2xvbih0KSl9cmV0dXJuIHV9LEltcG9ydERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHUsaSxvPXRoaXM7aWYoZS5zcGVjaWZpZXJzLmxlbmd0aD09PTApe3JldHVybltcImltcG9ydFwiLEMsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zb3VyY2Usci5TZXF1ZW5jZSxxKSx0aGlzLnNlbWljb2xvbih0KV19dT1bXCJpbXBvcnRcIl07aT0wO2lmKGUuc3BlY2lmaWVyc1tpXS50eXBlPT09bi5JbXBvcnREZWZhdWx0U3BlY2lmaWVyKXt1PWNlKHUsW3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3BlY2lmaWVyc1tpXSxyLlNlcXVlbmNlLHEpXSk7KytpfWlmKGUuc3BlY2lmaWVyc1tpXSl7aWYoaSE9PTApe3UucHVzaChcIixcIil9aWYoZS5zcGVjaWZpZXJzW2ldLnR5cGU9PT1uLkltcG9ydE5hbWVzcGFjZVNwZWNpZmllcil7dT1jZSh1LFtDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3BlY2lmaWVyc1tpXSxyLlNlcXVlbmNlLHEpXSl9ZWxzZXt1LnB1c2goQytcIntcIik7aWYoZS5zcGVjaWZpZXJzLmxlbmd0aC1pPT09MSl7dS5wdXNoKEMpO3UucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNwZWNpZmllcnNbaV0sci5TZXF1ZW5jZSxxKSk7dS5wdXNoKEMrXCJ9XCIrQyl9ZWxzZXtEZShmdW5jdGlvbih0KXt2YXIgbixzO3UucHVzaChBKTtmb3Iobj1pLHM9ZS5zcGVjaWZpZXJzLmxlbmd0aDtuPHM7KytuKXt1LnB1c2godCk7dS5wdXNoKG8uZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3BlY2lmaWVyc1tuXSxyLlNlcXVlbmNlLHEpKTtpZihuKzE8cyl7dS5wdXNoKFwiLFwiK0EpfX19KTtpZighWihsZSh1KS50b1N0cmluZygpKSl7dS5wdXNoKEEpfXUucHVzaChmK1wifVwiK0MpfX19dT1jZSh1LFtcImZyb21cIitDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc291cmNlLHIuU2VxdWVuY2UscSksdGhpcy5zZW1pY29sb24odCldKTtyZXR1cm4gdX0sVmFyaWFibGVEZWNsYXJhdG9yOmZ1bmN0aW9uKGUsdCl7dmFyIHU9dCZQP3E6VDtpZihlLmluaXQpe3JldHVyblt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmlkLHIuQXNzaWdubWVudCx1KSxDLFwiPVwiLEMsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5pbml0LHIuQXNzaWdubWVudCx1KV19cmV0dXJuIHRoaXMuZ2VuZXJhdGVQYXR0ZXJuKGUuaWQsci5Bc3NpZ25tZW50LHUpfSxWYXJpYWJsZURlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbyxzPXRoaXM7dT1bZS5raW5kXTtvPXQmUD9WOkc7ZnVuY3Rpb24gYSgpe2k9ZS5kZWNsYXJhdGlvbnNbMF07aWYoQi5jb21tZW50JiZpLmxlYWRpbmdDb21tZW50cyl7dS5wdXNoKFwiXFxuXCIpO3UucHVzaChwZShzLmdlbmVyYXRlU3RhdGVtZW50KGksbykpKX1lbHNle3UucHVzaChmZSgpKTt1LnB1c2gocy5nZW5lcmF0ZVN0YXRlbWVudChpLG8pKX1mb3Iobj0xLHI9ZS5kZWNsYXJhdGlvbnMubGVuZ3RoO248cjsrK24pe2k9ZS5kZWNsYXJhdGlvbnNbbl07aWYoQi5jb21tZW50JiZpLmxlYWRpbmdDb21tZW50cyl7dS5wdXNoKFwiLFwiK0EpO3UucHVzaChwZShzLmdlbmVyYXRlU3RhdGVtZW50KGksbykpKX1lbHNle3UucHVzaChcIixcIitDKTt1LnB1c2gocy5nZW5lcmF0ZVN0YXRlbWVudChpLG8pKX19fWlmKGUuZGVjbGFyYXRpb25zLmxlbmd0aD4xKXtEZShhKX1lbHNle2EoKX11LnB1c2godGhpcy5zZW1pY29sb24odCkpO3JldHVybiB1fSxUaHJvd1N0YXRlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybltjZShcInRocm93XCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLlNlcXVlbmNlLHEpKSx0aGlzLnNlbWljb2xvbih0KV19LFRyeVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LG4scixpO3U9W1widHJ5XCIsdGhpcy5tYXliZUJsb2NrKGUuYmxvY2ssVildO3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGUuYmxvY2ssdSk7aWYoZS5oYW5kbGVycyl7Zm9yKG49MCxyPWUuaGFuZGxlcnMubGVuZ3RoO248cjsrK24pe3U9Y2UodSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuaGFuZGxlcnNbbl0sVikpO2lmKGUuZmluYWxpemVyfHxuKzEhPT1yKXt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChlLmhhbmRsZXJzW25dLmJvZHksdSl9fX1lbHNle2k9ZS5ndWFyZGVkSGFuZGxlcnN8fFtdO2ZvcihuPTAscj1pLmxlbmd0aDtuPHI7KytuKXt1PWNlKHUsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChpW25dLFYpKTtpZihlLmZpbmFsaXplcnx8bisxIT09cil7dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoaVtuXS5ib2R5LHUpfX1pZihlLmhhbmRsZXIpe2lmKGwoZS5oYW5kbGVyKSl7Zm9yKG49MCxyPWUuaGFuZGxlci5sZW5ndGg7bjxyOysrbil7dT1jZSh1LHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5oYW5kbGVyW25dLFYpKTtpZihlLmZpbmFsaXplcnx8bisxIT09cil7dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoZS5oYW5kbGVyW25dLmJvZHksdSl9fX1lbHNle3U9Y2UodSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuaGFuZGxlcixWKSk7aWYoZS5maW5hbGl6ZXIpe3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGUuaGFuZGxlci5ib2R5LHUpfX19fWlmKGUuZmluYWxpemVyKXt1PWNlKHUsW1wiZmluYWxseVwiLHRoaXMubWF5YmVCbG9jayhlLmZpbmFsaXplcixWKV0pfXJldHVybiB1fSxTd2l0Y2hTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLGksbyxzLGE9dGhpcztEZShmdW5jdGlvbigpe3U9W1wic3dpdGNoXCIrQytcIihcIixhLmdlbmVyYXRlRXhwcmVzc2lvbihlLmRpc2NyaW1pbmFudCxyLlNlcXVlbmNlLHEpLFwiKVwiK0MrXCJ7XCIrQV19KTtpZihlLmNhc2VzKXtzPVY7Zm9yKGk9MCxvPWUuY2FzZXMubGVuZ3RoO2k8bzsrK2kpe2lmKGk9PT1vLTEpe3N8PVJ9bj1wZSh0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuY2FzZXNbaV0scykpO3UucHVzaChuKTtpZighWihsZShuKS50b1N0cmluZygpKSl7dS5wdXNoKEEpfX19dS5wdXNoKHBlKFwifVwiKSk7cmV0dXJuIHV9LFN3aXRjaENhc2U6ZnVuY3Rpb24oZSx0KXt2YXIgdSxpLG8scyxhLGw9dGhpcztEZShmdW5jdGlvbigpe2lmKGUudGVzdCl7dT1bY2UoXCJjYXNlXCIsbC5nZW5lcmF0ZUV4cHJlc3Npb24oZS50ZXN0LHIuU2VxdWVuY2UscSkpLFwiOlwiXX1lbHNle3U9W1wiZGVmYXVsdDpcIl19bz0wO3M9ZS5jb25zZXF1ZW50Lmxlbmd0aDtpZihzJiZlLmNvbnNlcXVlbnRbMF0udHlwZT09PW4uQmxvY2tTdGF0ZW1lbnQpe2k9bC5tYXliZUJsb2NrKGUuY29uc2VxdWVudFswXSxWKTt1LnB1c2goaSk7bz0xfWlmKG8hPT1zJiYhWihsZSh1KS50b1N0cmluZygpKSl7dS5wdXNoKEEpfWE9Vjtmb3IoO288czsrK28pe2lmKG89PT1zLTEmJnQmUil7YXw9Un1pPXBlKGwuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5jb25zZXF1ZW50W29dLGEpKTt1LnB1c2goaSk7aWYobysxIT09cyYmIVoobGUoaSkudG9TdHJpbmcoKSkpe3UucHVzaChBKX19fSk7cmV0dXJuIHV9LElmU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsaSxvLHM9dGhpcztEZShmdW5jdGlvbigpe3U9W1wiaWZcIitDK1wiKFwiLHMuZ2VuZXJhdGVFeHByZXNzaW9uKGUudGVzdCxyLlNlcXVlbmNlLHEpLFwiKVwiXX0pO289dCZSO2k9VjtpZihvKXtpfD1SfWlmKGUuYWx0ZXJuYXRlKXt1LnB1c2godGhpcy5tYXliZUJsb2NrKGUuY29uc2VxdWVudCxWKSk7dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoZS5jb25zZXF1ZW50LHUpO2lmKGUuYWx0ZXJuYXRlLnR5cGU9PT1uLklmU3RhdGVtZW50KXt1PWNlKHUsW1wiZWxzZSBcIix0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuYWx0ZXJuYXRlLGkpXSl9ZWxzZXt1PWNlKHUsY2UoXCJlbHNlXCIsdGhpcy5tYXliZUJsb2NrKGUuYWx0ZXJuYXRlLGkpKSl9fWVsc2V7dS5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmNvbnNlcXVlbnQsaSkpfXJldHVybiB1fSxGb3JTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxpPXRoaXM7RGUoZnVuY3Rpb24oKXt1PVtcImZvclwiK0MrXCIoXCJdO2lmKGUuaW5pdCl7aWYoZS5pbml0LnR5cGU9PT1uLlZhcmlhYmxlRGVjbGFyYXRpb24pe3UucHVzaChpLmdlbmVyYXRlU3RhdGVtZW50KGUuaW5pdCxHKSl9ZWxzZXt1LnB1c2goaS5nZW5lcmF0ZUV4cHJlc3Npb24oZS5pbml0LHIuU2VxdWVuY2UsVCkpO3UucHVzaChcIjtcIil9fWVsc2V7dS5wdXNoKFwiO1wiKX1pZihlLnRlc3Qpe3UucHVzaChDKTt1LnB1c2goaS5nZW5lcmF0ZUV4cHJlc3Npb24oZS50ZXN0LHIuU2VxdWVuY2UscSkpO3UucHVzaChcIjtcIil9ZWxzZXt1LnB1c2goXCI7XCIpfWlmKGUudXBkYXRlKXt1LnB1c2goQyk7dS5wdXNoKGkuZ2VuZXJhdGVFeHByZXNzaW9uKGUudXBkYXRlLHIuU2VxdWVuY2UscSkpO3UucHVzaChcIilcIil9ZWxzZXt1LnB1c2goXCIpXCIpfX0pO3UucHVzaCh0aGlzLm1heWJlQmxvY2soZS5ib2R5LHQmUj9ZOlYpKTtyZXR1cm4gdX0sRm9ySW5TdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nZW5lcmF0ZUl0ZXJhdGlvbkZvclN0YXRlbWVudChcImluXCIsZSx0JlI/WTpWKX0sRm9yT2ZTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nZW5lcmF0ZUl0ZXJhdGlvbkZvclN0YXRlbWVudChcIm9mXCIsZSx0JlI/WTpWKX0sTGFiZWxlZFN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybltlLmxhYmVsLm5hbWUrXCI6XCIsdGhpcy5tYXliZUJsb2NrKGUuYm9keSx0JlI/WTpWKV19LFByb2dyYW06ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvO2k9ZS5ib2R5Lmxlbmd0aDt1PVtnJiZpPjA/XCJcXG5cIjpcIlwiXTtvPUs7Zm9yKHI9MDtyPGk7KytyKXtpZighZyYmcj09PWktMSl7b3w9Un1pZih4KXtpZihyPT09MCl7aWYoIWUuYm9keVswXS5sZWFkaW5nQ29tbWVudHMpe0NlKGUucmFuZ2VbMF0sZS5ib2R5W3JdLnJhbmdlWzBdLHUpfX1pZihyPjApe2lmKCFlLmJvZHlbci0xXS50cmFpbGluZ0NvbW1lbnRzJiYhZS5ib2R5W3JdLmxlYWRpbmdDb21tZW50cyl7Q2UoZS5ib2R5W3ItMV0ucmFuZ2VbMV0sZS5ib2R5W3JdLnJhbmdlWzBdLHUpfX19bj1wZSh0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuYm9keVtyXSxvKSk7dS5wdXNoKG4pO2lmKHIrMTxpJiYhWihsZShuKS50b1N0cmluZygpKSl7aWYoeCl7aWYoIWUuYm9keVtyKzFdLmxlYWRpbmdDb21tZW50cyl7dS5wdXNoKEEpfX1lbHNle3UucHVzaChBKX19aWYoeCl7aWYocj09PWktMSl7aWYoIWUuYm9keVtyXS50cmFpbGluZ0NvbW1lbnRzKXtDZShlLmJvZHlbcl0ucmFuZ2VbMV0sZS5yYW5nZVsxXSx1KX19fX1yZXR1cm4gdX0sRnVuY3Rpb25EZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3JldHVyblt2ZShlLHRydWUpLFwiZnVuY3Rpb25cIixiZShlKXx8ZmUoKSxCZShlLmlkKSx0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUpXX0sUmV0dXJuU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7aWYoZS5hcmd1bWVudCl7cmV0dXJuW2NlKFwicmV0dXJuXCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLlNlcXVlbmNlLHEpKSx0aGlzLnNlbWljb2xvbih0KV19cmV0dXJuW1wicmV0dXJuXCIrdGhpcy5zZW1pY29sb24odCldfSxXaGlsZVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LG49dGhpcztEZShmdW5jdGlvbigpe3U9W1wid2hpbGVcIitDK1wiKFwiLG4uZ2VuZXJhdGVFeHByZXNzaW9uKGUudGVzdCxyLlNlcXVlbmNlLHEpLFwiKVwiXX0pO3UucHVzaCh0aGlzLm1heWJlQmxvY2soZS5ib2R5LHQmUj9ZOlYpKTtyZXR1cm4gdX0sV2l0aFN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LG49dGhpcztEZShmdW5jdGlvbigpe3U9W1wid2l0aFwiK0MrXCIoXCIsbi5nZW5lcmF0ZUV4cHJlc3Npb24oZS5vYmplY3Qsci5TZXF1ZW5jZSxxKSxcIilcIl19KTt1LnB1c2godGhpcy5tYXliZUJsb2NrKGUuYm9keSx0JlI/WTpWKSk7cmV0dXJuIHV9fTtRKHllLnByb3RvdHlwZSx5ZS5TdGF0ZW1lbnQpO3llLkV4cHJlc3Npb249e1NlcXVlbmNlRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4saSxvO2lmKHIuU2VxdWVuY2U8dCl7dXw9UH1uPVtdO2ZvcihpPTAsbz1lLmV4cHJlc3Npb25zLmxlbmd0aDtpPG87KytpKXtuLnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5leHByZXNzaW9uc1tpXSxyLkFzc2lnbm1lbnQsdSkpO2lmKGkrMTxvKXtuLnB1c2goXCIsXCIrQyl9fXJldHVybiBFZShuLHIuU2VxdWVuY2UsdCl9LEFzc2lnbm1lbnRFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gdGhpcy5nZW5lcmF0ZUFzc2lnbm1lbnQoZS5sZWZ0LGUucmlnaHQsZS5vcGVyYXRvcix0LHUpfSxBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIEVlKHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZSksci5BcnJvd0Z1bmN0aW9uLHQpfSxDb25kaXRpb25hbEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe2lmKHIuQ29uZGl0aW9uYWw8dCl7dXw9UH1yZXR1cm4gRWUoW3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUudGVzdCxyLkxvZ2ljYWxPUix1KSxDK1wiP1wiK0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5jb25zZXF1ZW50LHIuQXNzaWdubWVudCx1KSxDK1wiOlwiK0MsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hbHRlcm5hdGUsci5Bc3NpZ25tZW50LHUpXSxyLkNvbmRpdGlvbmFsLHQpfSxMb2dpY2FsRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIHRoaXMuQmluYXJ5RXhwcmVzc2lvbihlLHQsdSl9LEJpbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsbyxzO3I9aVtlLm9wZXJhdG9yXTtpZihyPHQpe3V8PVB9bz10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmxlZnQscix1KTtzPW8udG9TdHJpbmcoKTtpZihzLmNoYXJDb2RlQXQocy5sZW5ndGgtMSk9PT00NyYmYS5jb2RlLmlzSWRlbnRpZmllclBhcnRFUzUoZS5vcGVyYXRvci5jaGFyQ29kZUF0KDApKSl7bj1bbyxmZSgpLGUub3BlcmF0b3JdfWVsc2V7bj1jZShvLGUub3BlcmF0b3IpfW89dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5yaWdodCxyKzEsdSk7aWYoZS5vcGVyYXRvcj09PVwiL1wiJiZvLnRvU3RyaW5nKCkuY2hhckF0KDApPT09XCIvXCJ8fGUub3BlcmF0b3Iuc2xpY2UoLTEpPT09XCI8XCImJm8udG9TdHJpbmcoKS5zbGljZSgwLDMpPT09XCIhLS1cIil7bi5wdXNoKGZlKCkpO24ucHVzaChvKX1lbHNle249Y2UobixvKX1pZihlLm9wZXJhdG9yPT09XCJpblwiJiYhKHUmUCkpe3JldHVybltcIihcIixuLFwiKVwiXX1yZXR1cm4gRWUobixyLHQpfSxDYWxsRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4saSxvO249W3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuY2FsbGVlLHIuQ2FsbCxOKV07bi5wdXNoKFwiKFwiKTtmb3IoaT0wLG89ZVtcImFyZ3VtZW50c1wiXS5sZW5ndGg7aTxvOysraSl7bi5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGVbXCJhcmd1bWVudHNcIl1baV0sci5Bc3NpZ25tZW50LHEpKTtpZihpKzE8byl7bi5wdXNoKFwiLFwiK0MpfX1uLnB1c2goXCIpXCIpO2lmKCEodSZMKSl7cmV0dXJuW1wiKFwiLG4sXCIpXCJdfXJldHVybiBFZShuLHIuQ2FsbCx0KX0sTmV3RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4saSxvLHMsYTtpPWVbXCJhcmd1bWVudHNcIl0ubGVuZ3RoO2E9dSZPJiYhRSYmaT09PTA/VzpVO249Y2UoXCJuZXdcIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmNhbGxlZSxyLk5ldyxhKSk7aWYoISh1Jk8pfHxFfHxpPjApe24ucHVzaChcIihcIik7Zm9yKG89MCxzPWk7bzxzOysrbyl7bi5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGVbXCJhcmd1bWVudHNcIl1bb10sci5Bc3NpZ25tZW50LHEpKTtpZihvKzE8cyl7bi5wdXNoKFwiLFwiK0MpfX1uLnB1c2goXCIpXCIpfXJldHVybiBFZShuLHIuTmV3LHQpfSxNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgaSxvO2k9W3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUub2JqZWN0LHIuQ2FsbCx1Jkw/TjpVKV07aWYoZS5jb21wdXRlZCl7aS5wdXNoKFwiW1wiKTtpLnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5wcm9wZXJ0eSxyLlNlcXVlbmNlLHUmTD9xOlcpKTtpLnB1c2goXCJdXCIpfWVsc2V7aWYoZS5vYmplY3QudHlwZT09PW4uTGl0ZXJhbCYmdHlwZW9mIGUub2JqZWN0LnZhbHVlPT09XCJudW1iZXJcIil7bz1sZShpKS50b1N0cmluZygpO2lmKG8uaW5kZXhPZihcIi5cIik8MCYmIS9bZUV4WF0vLnRlc3QobykmJmEuY29kZS5pc0RlY2ltYWxEaWdpdChvLmNoYXJDb2RlQXQoby5sZW5ndGgtMSkpJiYhKG8ubGVuZ3RoPj0yJiZvLmNoYXJDb2RlQXQoMCk9PT00OCkpe2kucHVzaChcIi5cIil9fWkucHVzaChcIi5cIik7aS5wdXNoKEJlKGUucHJvcGVydHkpKX1yZXR1cm4gRWUoaSxyLk1lbWJlcix0KX0sVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpLG8scyxsO2k9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLlVuYXJ5LHEpO2lmKEM9PT1cIlwiKXtuPWNlKGUub3BlcmF0b3IsaSl9ZWxzZXtuPVtlLm9wZXJhdG9yXTtpZihlLm9wZXJhdG9yLmxlbmd0aD4yKXtuPWNlKG4saSl9ZWxzZXtzPWxlKG4pLnRvU3RyaW5nKCk7bD1zLmNoYXJDb2RlQXQocy5sZW5ndGgtMSk7bz1pLnRvU3RyaW5nKCkuY2hhckNvZGVBdCgwKTtpZigobD09PTQzfHxsPT09NDUpJiZsPT09b3x8YS5jb2RlLmlzSWRlbnRpZmllclBhcnRFUzUobCkmJmEuY29kZS5pc0lkZW50aWZpZXJQYXJ0RVM1KG8pKXtuLnB1c2goZmUoKSk7bi5wdXNoKGkpfWVsc2V7bi5wdXNoKGkpfX19cmV0dXJuIEVlKG4sci5VbmFyeSx0KX0sWWllbGRFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbjtpZihlLmRlbGVnYXRlKXtuPVwieWllbGQqXCJ9ZWxzZXtuPVwieWllbGRcIn1pZihlLmFyZ3VtZW50KXtuPWNlKG4sdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLllpZWxkLHEpKX1yZXR1cm4gRWUobixyLllpZWxkLHQpfSxBd2FpdEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWNlKGUuYWxsP1wiYXdhaXQqXCI6XCJhd2FpdFwiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5Bd2FpdCxxKSk7cmV0dXJuIEVlKG4sci5Bd2FpdCx0KX0sVXBkYXRlRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7aWYoZS5wcmVmaXgpe3JldHVybiBFZShbZS5vcGVyYXRvcix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuVW5hcnkscSldLHIuVW5hcnksdCl9cmV0dXJuIEVlKFt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuUG9zdGZpeCxxKSxlLm9wZXJhdG9yXSxyLlBvc3RmaXgsdCl9LEZ1bmN0aW9uRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG49W3ZlKGUsdHJ1ZSksXCJmdW5jdGlvblwiXTtpZihlLmlkKXtuLnB1c2goYmUoZSl8fGZlKCkpO24ucHVzaChCZShlLmlkKSl9ZWxzZXtuLnB1c2goYmUoZSl8fEMpfW4ucHVzaCh0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUpKTtyZXR1cm4gbn0sRXhwb3J0QmF0Y2hTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3JldHVyblwiKlwifSxBcnJheVBhdHRlcm46ZnVuY3Rpb24oZSx0LHUpe3JldHVybiB0aGlzLkFycmF5RXhwcmVzc2lvbihlLHQsdSx0cnVlKX0sQXJyYXlFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1LG4pe3ZhciBpLG8scz10aGlzO2lmKCFlLmVsZW1lbnRzLmxlbmd0aCl7cmV0dXJuXCJbXVwifW89bj9mYWxzZTplLmVsZW1lbnRzLmxlbmd0aD4xO2k9W1wiW1wiLG8/QTpcIlwiXTtEZShmdW5jdGlvbih0KXt2YXIgdSxuO2Zvcih1PTAsbj1lLmVsZW1lbnRzLmxlbmd0aDt1PG47Kyt1KXtpZighZS5lbGVtZW50c1t1XSl7aWYobyl7aS5wdXNoKHQpfWlmKHUrMT09PW4pe2kucHVzaChcIixcIil9fWVsc2V7aS5wdXNoKG8/dDpcIlwiKTtpLnB1c2gocy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5lbGVtZW50c1t1XSxyLkFzc2lnbm1lbnQscSkpfWlmKHUrMTxuKXtpLnB1c2goXCIsXCIrKG8/QTpDKSl9fX0pO2lmKG8mJiFaKGxlKGkpLnRvU3RyaW5nKCkpKXtpLnB1c2goQSl9aS5wdXNoKG8/ZjpcIlwiKTtpLnB1c2goXCJdXCIpO3JldHVybiBpfSxSZXN0RWxlbWVudDpmdW5jdGlvbihlLHQsdSl7cmV0dXJuXCIuLi5cIit0aGlzLmdlbmVyYXRlUGF0dGVybihlLmFyZ3VtZW50KX0sQ2xhc3NFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpO249W1wiY2xhc3NcIl07aWYoZS5pZCl7bj1jZShuLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuaWQsci5TZXF1ZW5jZSxxKSl9aWYoZS5zdXBlckNsYXNzKXtpPWNlKFwiZXh0ZW5kc1wiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3VwZXJDbGFzcyxyLkFzc2lnbm1lbnQscSkpO249Y2UobixpKX1uLnB1c2goQyk7bi5wdXNoKHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5ib2R5LFkpKTtyZXR1cm4gbn0sTWV0aG9kRGVmaW5pdGlvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4scjtpZihlW1wic3RhdGljXCJdKXtuPVtcInN0YXRpY1wiK0NdfWVsc2V7bj1bXX1pZihlLmtpbmQ9PT1cImdldFwifHxlLmtpbmQ9PT1cInNldFwiKXtyPVtjZShlLmtpbmQsdGhpcy5nZW5lcmF0ZVByb3BlcnR5S2V5KGUua2V5LGUuY29tcHV0ZWQpKSx0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUudmFsdWUpXX1lbHNle3I9W1NlKGUpLHRoaXMuZ2VuZXJhdGVQcm9wZXJ0eUtleShlLmtleSxlLmNvbXB1dGVkKSx0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUudmFsdWUpXX1yZXR1cm4gY2UobixyKX0sUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHUpe2lmKGUua2luZD09PVwiZ2V0XCJ8fGUua2luZD09PVwic2V0XCIpe3JldHVybltlLmtpbmQsZmUoKSx0aGlzLmdlbmVyYXRlUHJvcGVydHlLZXkoZS5rZXksZS5jb21wdXRlZCksdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlLnZhbHVlKV19aWYoZS5zaG9ydGhhbmQpe3JldHVybiB0aGlzLmdlbmVyYXRlUHJvcGVydHlLZXkoZS5rZXksZS5jb21wdXRlZCl9aWYoZS5tZXRob2Qpe3JldHVybltTZShlKSx0aGlzLmdlbmVyYXRlUHJvcGVydHlLZXkoZS5rZXksZS5jb21wdXRlZCksdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlLnZhbHVlKV19cmV0dXJuW3RoaXMuZ2VuZXJhdGVQcm9wZXJ0eUtleShlLmtleSxlLmNvbXB1dGVkKSxcIjpcIitDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUudmFsdWUsci5Bc3NpZ25tZW50LHEpXX0sT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4saSxvLHM9dGhpcztpZighZS5wcm9wZXJ0aWVzLmxlbmd0aCl7cmV0dXJuXCJ7fVwifW49ZS5wcm9wZXJ0aWVzLmxlbmd0aD4xO0RlKGZ1bmN0aW9uKCl7bz1zLmdlbmVyYXRlRXhwcmVzc2lvbihlLnByb3BlcnRpZXNbMF0sci5TZXF1ZW5jZSxxKX0pO2lmKCFuKXtpZighWChsZShvKS50b1N0cmluZygpKSl7cmV0dXJuW1wie1wiLEMsbyxDLFwifVwiXX19RGUoZnVuY3Rpb24odCl7dmFyIHUsYTtpPVtcIntcIixBLHQsb107aWYobil7aS5wdXNoKFwiLFwiK0EpO2Zvcih1PTEsYT1lLnByb3BlcnRpZXMubGVuZ3RoO3U8YTsrK3Upe2kucHVzaCh0KTtpLnB1c2gocy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5wcm9wZXJ0aWVzW3VdLHIuU2VxdWVuY2UscSkpO2lmKHUrMTxhKXtpLnB1c2goXCIsXCIrQSl9fX19KTtpZighWihsZShpKS50b1N0cmluZygpKSl7aS5wdXNoKEEpfWkucHVzaChmKTtpLnB1c2goXCJ9XCIpO3JldHVybiBpfSxPYmplY3RQYXR0ZXJuOmZ1bmN0aW9uKGUsdCx1KXt2YXIgaSxvLHMsYSxsLGM9dGhpcztpZighZS5wcm9wZXJ0aWVzLmxlbmd0aCl7cmV0dXJuXCJ7fVwifWE9ZmFsc2U7aWYoZS5wcm9wZXJ0aWVzLmxlbmd0aD09PTEpe2w9ZS5wcm9wZXJ0aWVzWzBdO2lmKGwudmFsdWUudHlwZSE9PW4uSWRlbnRpZmllcil7YT10cnVlfX1lbHNle2ZvcihvPTAscz1lLnByb3BlcnRpZXMubGVuZ3RoO288czsrK28pe2w9ZS5wcm9wZXJ0aWVzW29dO2lmKCFsLnNob3J0aGFuZCl7YT10cnVlO2JyZWFrfX19aT1bXCJ7XCIsYT9BOlwiXCJdO0RlKGZ1bmN0aW9uKHQpe3ZhciB1LG47Zm9yKHU9MCxuPWUucHJvcGVydGllcy5sZW5ndGg7dTxuOysrdSl7aS5wdXNoKGE/dDpcIlwiKTtpLnB1c2goYy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5wcm9wZXJ0aWVzW3VdLHIuU2VxdWVuY2UscSkpO2lmKHUrMTxuKXtpLnB1c2goXCIsXCIrKGE/QTpDKSl9fX0pO2lmKGEmJiFaKGxlKGkpLnRvU3RyaW5nKCkpKXtpLnB1c2goQSl9aS5wdXNoKGE/ZjpcIlwiKTtpLnB1c2goXCJ9XCIpO3JldHVybiBpfSxUaGlzRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuXCJ0aGlzXCJ9LFN1cGVyOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm5cInN1cGVyXCJ9LElkZW50aWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3JldHVybiBCZShlKX0sSW1wb3J0RGVmYXVsdFNwZWNpZmllcjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIEJlKGUuaWR8fGUubG9jYWwpfSxJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3ZhciBuPVtcIipcIl07dmFyIHI9ZS5pZHx8ZS5sb2NhbDtpZihyKXtuLnB1c2goQytcImFzXCIrZmUoKStCZShyKSl9cmV0dXJuIG59LEltcG9ydFNwZWNpZmllcjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIHRoaXMuRXhwb3J0U3BlY2lmaWVyKGUsdCx1KX0sRXhwb3J0U3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1bKGUuaWR8fGUubG9jYWwpLm5hbWVdO2lmKGUubmFtZSl7bi5wdXNoKGZlKCkrXCJhc1wiK2ZlKCkrQmUoZS5uYW1lKSl9cmV0dXJuIG59LExpdGVyYWw6ZnVuY3Rpb24oZSx0LHUpe3ZhciByO2lmKGUuaGFzT3duUHJvcGVydHkoXCJyYXdcIikmJnYmJkIucmF3KXt0cnl7cj12KGUucmF3KS5ib2R5WzBdLmV4cHJlc3Npb247aWYoci50eXBlPT09bi5MaXRlcmFsKXtpZihyLnZhbHVlPT09ZS52YWx1ZSl7cmV0dXJuIGUucmF3fX19Y2F0Y2goaSl7fX1pZihlLnZhbHVlPT09bnVsbCl7cmV0dXJuXCJudWxsXCJ9aWYodHlwZW9mIGUudmFsdWU9PT1cInN0cmluZ1wiKXtyZXR1cm4gc2UoZS52YWx1ZSl9aWYodHlwZW9mIGUudmFsdWU9PT1cIm51bWJlclwiKXtyZXR1cm4gdGUoZS52YWx1ZSl9aWYodHlwZW9mIGUudmFsdWU9PT1cImJvb2xlYW5cIil7cmV0dXJuIGUudmFsdWU/XCJ0cnVlXCI6XCJmYWxzZVwifXJldHVybiBuZShlLnZhbHVlKX0sR2VuZXJhdG9yRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIHRoaXMuQ29tcHJlaGVuc2lvbkV4cHJlc3Npb24oZSx0LHUpfSxDb21wcmVoZW5zaW9uRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIGksbyxzLGEsbD10aGlzO2k9ZS50eXBlPT09bi5HZW5lcmF0b3JFeHByZXNzaW9uP1tcIihcIl06W1wiW1wiXTtpZihCLm1vei5jb21wcmVoZW5zaW9uRXhwcmVzc2lvblN0YXJ0c1dpdGhBc3NpZ25tZW50KXthPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYm9keSxyLkFzc2lnbm1lbnQscSk7aS5wdXNoKGEpfWlmKGUuYmxvY2tzKXtEZShmdW5jdGlvbigpe2ZvcihvPTAscz1lLmJsb2Nrcy5sZW5ndGg7bzxzOysrbyl7YT1sLmdlbmVyYXRlRXhwcmVzc2lvbihlLmJsb2Nrc1tvXSxyLlNlcXVlbmNlLHEpO2lmKG8+MHx8Qi5tb3ouY29tcHJlaGVuc2lvbkV4cHJlc3Npb25TdGFydHNXaXRoQXNzaWdubWVudCl7aT1jZShpLGEpfWVsc2V7aS5wdXNoKGEpfX19KX1pZihlLmZpbHRlcil7aT1jZShpLFwiaWZcIitDKTthPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZmlsdGVyLHIuU2VxdWVuY2UscSk7aT1jZShpLFtcIihcIixhLFwiKVwiXSl9aWYoIUIubW96LmNvbXByZWhlbnNpb25FeHByZXNzaW9uU3RhcnRzV2l0aEFzc2lnbm1lbnQpe2E9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5ib2R5LHIuQXNzaWdubWVudCxxKTtpPWNlKGksYSl9aS5wdXNoKGUudHlwZT09PW4uR2VuZXJhdG9yRXhwcmVzc2lvbj9cIilcIjpcIl1cIik7cmV0dXJuIGl9LENvbXByZWhlbnNpb25CbG9jazpmdW5jdGlvbihlLHQsdSl7dmFyIGk7aWYoZS5sZWZ0LnR5cGU9PT1uLlZhcmlhYmxlRGVjbGFyYXRpb24pe2k9W2UubGVmdC5raW5kLGZlKCksdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmxlZnQuZGVjbGFyYXRpb25zWzBdLEcpXX1lbHNle2k9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5sZWZ0LHIuQ2FsbCxxKX1pPWNlKGksZS5vZj9cIm9mXCI6XCJpblwiKTtpPWNlKGksdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5yaWdodCxyLlNlcXVlbmNlLHEpKTtyZXR1cm5bXCJmb3JcIitDK1wiKFwiLGksXCIpXCJdfSxTcHJlYWRFbGVtZW50OmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm5bXCIuLi5cIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuQXNzaWdubWVudCxxKV19LFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG49TjtpZighKHUmTCkpe249VX12YXIgaT1bdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS50YWcsci5DYWxsLG4pLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucXVhc2ksci5QcmltYXJ5LHopXTtyZXR1cm4gRWUoaSxyLlRhZ2dlZFRlbXBsYXRlLHQpfSxUZW1wbGF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3JldHVybiBlLnZhbHVlLnJhd30sVGVtcGxhdGVMaXRlcmFsOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixpLG87bj1bXCJgXCJdO2ZvcihpPTAsbz1lLnF1YXNpcy5sZW5ndGg7aTxvOysraSl7bi5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucXVhc2lzW2ldLHIuUHJpbWFyeSxxKSk7aWYoaSsxPG8pe24ucHVzaChcIiR7XCIrQyk7bi5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZXhwcmVzc2lvbnNbaV0sci5TZXF1ZW5jZSxxKSk7bi5wdXNoKEMrXCJ9XCIpfX1uLnB1c2goXCJgXCIpO3JldHVybiBufSxNb2R1bGVTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3JldHVybiB0aGlzLkxpdGVyYWwoZSx0LHUpfX07USh5ZS5wcm90b3R5cGUseWUuRXhwcmVzc2lvbik7eWUucHJvdG90eXBlLmdlbmVyYXRlRXhwcmVzc2lvbj1mdW5jdGlvbihlLHQsdSl7dmFyIHIsaTtpPWUudHlwZXx8bi5Qcm9wZXJ0eTtpZihCLnZlcmJhdGltJiZlLmhhc093blByb3BlcnR5KEIudmVyYmF0aW0pKXtyZXR1cm4gZ2UoZSx0KX1yPXRoaXNbaV0oZSx0LHUpO2lmKEIuY29tbWVudCl7cj1BZShlLHIpfXJldHVybiBsZShyLGUpfTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgdSxyO3U9dGhpc1tlLnR5cGVdKGUsdCk7aWYoQi5jb21tZW50KXt1PUFlKGUsdSl9cj1sZSh1KS50b1N0cmluZygpO2lmKGUudHlwZT09PW4uUHJvZ3JhbSYmIWcmJkE9PT1cIlwiJiZyLmNoYXJBdChyLmxlbmd0aC0xKT09PVwiXFxuXCIpe3U9Yj9sZSh1KS5yZXBsYWNlUmlnaHQoL1xccyskLyxcIlwiKTpyLnJlcGxhY2UoL1xccyskLyxcIlwiKX1yZXR1cm4gbGUodSxlKX07ZnVuY3Rpb24geGUoZSl7dmFyIHQ7dD1uZXcgeWU7aWYoSShlKSl7cmV0dXJuIHQuZ2VuZXJhdGVTdGF0ZW1lbnQoZSxWKX1pZihrKGUpKXtyZXR1cm4gdC5nZW5lcmF0ZUV4cHJlc3Npb24oZSxyLlNlcXVlbmNlLHEpfXRocm93IG5ldyBFcnJvcihcIlVua25vd24gbm9kZSB0eXBlOiBcIitlLnR5cGUpfWZ1bmN0aW9uIHdlKG4scil7dmFyIGk9SCgpLHMsYTtpZihyIT1udWxsKXtpZih0eXBlb2Ygci5pbmRlbnQ9PT1cInN0cmluZ1wiKXtpLmZvcm1hdC5pbmRlbnQuc3R5bGU9ci5pbmRlbnR9aWYodHlwZW9mIHIuYmFzZT09PVwibnVtYmVyXCIpe2kuZm9ybWF0LmluZGVudC5iYXNlPXIuYmFzZX1yPWVlKGkscik7Yz1yLmZvcm1hdC5pbmRlbnQuc3R5bGU7aWYodHlwZW9mIHIuYmFzZT09PVwic3RyaW5nXCIpe2Y9ci5iYXNlfWVsc2V7Zj1KKGMsci5mb3JtYXQuaW5kZW50LmJhc2UpfX1lbHNle3I9aTtjPXIuZm9ybWF0LmluZGVudC5zdHlsZTtmPUooYyxyLmZvcm1hdC5pbmRlbnQuYmFzZSl9cD1yLmZvcm1hdC5qc29uO0Q9ci5mb3JtYXQucmVudW1iZXI7aD1wP2ZhbHNlOnIuZm9ybWF0LmhleGFkZWNpbWFsO209cD9cImRvdWJsZVwiOnIuZm9ybWF0LnF1b3RlcztkPXIuZm9ybWF0LmVzY2FwZWxlc3M7QT1yLmZvcm1hdC5uZXdsaW5lO0M9ci5mb3JtYXQuc3BhY2U7aWYoci5mb3JtYXQuY29tcGFjdCl7QT1DPWM9Zj1cIlwifUU9ci5mb3JtYXQucGFyZW50aGVzZXM7Rj1yLmZvcm1hdC5zZW1pY29sb25zO2c9ci5mb3JtYXQuc2FmZUNvbmNhdGVuYXRpb247eT1yLmRpcmVjdGl2ZTt2PXA/bnVsbDpyLnBhcnNlO2I9ci5zb3VyY2VNYXA7Uz1yLnNvdXJjZUNvZGU7eD1yLmZvcm1hdC5wcmVzZXJ2ZUJsYW5rTGluZXMmJlMhPT1udWxsO0I9cjtpZihiKXtpZighdS5icm93c2VyKXtvPWUoXCJzb3VyY2UtbWFwXCIpLlNvdXJjZU5vZGV9ZWxzZXtvPXQuc291cmNlTWFwLlNvdXJjZU5vZGV9fXM9eGUobik7aWYoIWIpe2E9e2NvZGU6cy50b1N0cmluZygpLG1hcDpudWxsfTtyZXR1cm4gci5zb3VyY2VNYXBXaXRoQ29kZT9hOmEuY29kZX1hPXMudG9TdHJpbmdXaXRoU291cmNlTWFwKHtmaWxlOnIuZmlsZSxzb3VyY2VSb290OnIuc291cmNlTWFwUm9vdH0pO2lmKHIuc291cmNlQ29udGVudCl7YS5tYXAuc2V0U291cmNlQ29udGVudChyLnNvdXJjZU1hcCxyLnNvdXJjZUNvbnRlbnQpfWlmKHIuc291cmNlTWFwV2l0aENvZGUpe3JldHVybiBhfXJldHVybiBhLm1hcC50b1N0cmluZygpfXc9e2luZGVudDp7c3R5bGU6XCJcIixiYXNlOjB9LHJlbnVtYmVyOnRydWUsaGV4YWRlY2ltYWw6dHJ1ZSxxdW90ZXM6XCJhdXRvXCIsZXNjYXBlbGVzczp0cnVlLGNvbXBhY3Q6dHJ1ZSxwYXJlbnRoZXNlczpmYWxzZSxzZW1pY29sb25zOmZhbHNlfTtfPUgoKS5mb3JtYXQ7dS52ZXJzaW9uPWUoXCIuL3BhY2thZ2UuanNvblwiKS52ZXJzaW9uO3UuZ2VuZXJhdGU9d2U7dS5hdHRhY2hDb21tZW50cz1zLmF0dGFjaENvbW1lbnRzO3UuUHJlY2VkZW5jZT1lZSh7fSxyKTt1LmJyb3dzZXI9ZmFsc2U7dS5GT1JNQVRfTUlOSUZZPXc7dS5GT1JNQVRfREVGQVVMVFM9X30pKCl9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp7fSl9LHtcIi4vcGFja2FnZS5qc29uXCI6NDcsZXN0cmF2ZXJzZTo0OSxlc3V0aWxzOjMzLFwic291cmNlLW1hcFwiOjM0fV0sMzA6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe2lmKGU9PW51bGwpe3JldHVybiBmYWxzZX1zd2l0Y2goZS50eXBlKXtjYXNlXCJBcnJheUV4cHJlc3Npb25cIjpjYXNlXCJBc3NpZ25tZW50RXhwcmVzc2lvblwiOmNhc2VcIkJpbmFyeUV4cHJlc3Npb25cIjpjYXNlXCJDYWxsRXhwcmVzc2lvblwiOmNhc2VcIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiOmNhc2VcIkZ1bmN0aW9uRXhwcmVzc2lvblwiOmNhc2VcIklkZW50aWZpZXJcIjpjYXNlXCJMaXRlcmFsXCI6Y2FzZVwiTG9naWNhbEV4cHJlc3Npb25cIjpjYXNlXCJNZW1iZXJFeHByZXNzaW9uXCI6Y2FzZVwiTmV3RXhwcmVzc2lvblwiOmNhc2VcIk9iamVjdEV4cHJlc3Npb25cIjpjYXNlXCJTZXF1ZW5jZUV4cHJlc3Npb25cIjpjYXNlXCJUaGlzRXhwcmVzc2lvblwiOmNhc2VcIlVuYXJ5RXhwcmVzc2lvblwiOmNhc2VcIlVwZGF0ZUV4cHJlc3Npb25cIjpyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gdShlKXtpZihlPT1udWxsKXtyZXR1cm4gZmFsc2V9c3dpdGNoKGUudHlwZSl7Y2FzZVwiRG9XaGlsZVN0YXRlbWVudFwiOmNhc2VcIkZvckluU3RhdGVtZW50XCI6Y2FzZVwiRm9yU3RhdGVtZW50XCI6Y2FzZVwiV2hpbGVTdGF0ZW1lbnRcIjpyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gbihlKXtpZihlPT1udWxsKXtyZXR1cm4gZmFsc2V9c3dpdGNoKGUudHlwZSl7Y2FzZVwiQmxvY2tTdGF0ZW1lbnRcIjpjYXNlXCJCcmVha1N0YXRlbWVudFwiOmNhc2VcIkNvbnRpbnVlU3RhdGVtZW50XCI6Y2FzZVwiRGVidWdnZXJTdGF0ZW1lbnRcIjpjYXNlXCJEb1doaWxlU3RhdGVtZW50XCI6Y2FzZVwiRW1wdHlTdGF0ZW1lbnRcIjpjYXNlXCJFeHByZXNzaW9uU3RhdGVtZW50XCI6Y2FzZVwiRm9ySW5TdGF0ZW1lbnRcIjpjYXNlXCJGb3JTdGF0ZW1lbnRcIjpjYXNlXCJJZlN0YXRlbWVudFwiOmNhc2VcIkxhYmVsZWRTdGF0ZW1lbnRcIjpjYXNlXCJSZXR1cm5TdGF0ZW1lbnRcIjpjYXNlXCJTd2l0Y2hTdGF0ZW1lbnRcIjpjYXNlXCJUaHJvd1N0YXRlbWVudFwiOmNhc2VcIlRyeVN0YXRlbWVudFwiOmNhc2VcIlZhcmlhYmxlRGVjbGFyYXRpb25cIjpjYXNlXCJXaGlsZVN0YXRlbWVudFwiOmNhc2VcIldpdGhTdGF0ZW1lbnRcIjpyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gcihlKXtyZXR1cm4gbihlKXx8ZSE9bnVsbCYmZS50eXBlPT09XCJGdW5jdGlvbkRlY2xhcmF0aW9uXCJ9ZnVuY3Rpb24gaShlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJJZlN0YXRlbWVudFwiOmlmKGUuYWx0ZXJuYXRlIT1udWxsKXtyZXR1cm4gZS5hbHRlcm5hdGV9cmV0dXJuIGUuY29uc2VxdWVudDtjYXNlXCJMYWJlbGVkU3RhdGVtZW50XCI6Y2FzZVwiRm9yU3RhdGVtZW50XCI6Y2FzZVwiRm9ySW5TdGF0ZW1lbnRcIjpjYXNlXCJXaGlsZVN0YXRlbWVudFwiOmNhc2VcIldpdGhTdGF0ZW1lbnRcIjpyZXR1cm4gZS5ib2R5fXJldHVybiBudWxsfWZ1bmN0aW9uIG8oZSl7dmFyIHQ7aWYoZS50eXBlIT09XCJJZlN0YXRlbWVudFwiKXtyZXR1cm4gZmFsc2V9aWYoZS5hbHRlcm5hdGU9PW51bGwpe3JldHVybiBmYWxzZX10PWUuY29uc2VxdWVudDtkb3tpZih0LnR5cGU9PT1cIklmU3RhdGVtZW50XCIpe2lmKHQuYWx0ZXJuYXRlPT1udWxsKXtyZXR1cm4gdHJ1ZX19dD1pKHQpfXdoaWxlKHQpO3JldHVybiBmYWxzZX10LmV4cG9ydHM9e2lzRXhwcmVzc2lvbjplLGlzU3RhdGVtZW50Om4saXNJdGVyYXRpb25TdGF0ZW1lbnQ6dSxpc1NvdXJjZUVsZW1lbnQ6cixpc1Byb2JsZW1hdGljSWZTdGF0ZW1lbnQ6byx0cmFpbGluZ1N0YXRlbWVudDppfX0pKCl9LHt9XSwzMTpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBlLHUsbixyLGksbzt1PXtOb25Bc2NpaUlkZW50aWZpZXJTdGFydDovW1xceEFBXFx4QjVcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjIwLVxcdTA2NEFcXHUwNjZFXFx1MDY2RlxcdTA2NzEtXFx1MDZEM1xcdTA2RDVcXHUwNkU1XFx1MDZFNlxcdTA2RUVcXHUwNkVGXFx1MDZGQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTBcXHUwNzEyLVxcdTA3MkZcXHUwNzRELVxcdTA3QTVcXHUwN0IxXFx1MDdDQS1cXHUwN0VBXFx1MDdGNFxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODE1XFx1MDgxQVxcdTA4MjRcXHUwODI4XFx1MDg0MC1cXHUwODU4XFx1MDhBMC1cXHUwOEIyXFx1MDkwNC1cXHUwOTM5XFx1MDkzRFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5ODBcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJEXFx1MDlDRVxcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUxXFx1MDlGMFxcdTA5RjFcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzRFxcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYxXFx1MEI3MVxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJEMFxcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0RcXHUwQzU4XFx1MEM1OVxcdTBDNjBcXHUwQzYxXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDYwXFx1MEQ2MVxcdTBEN0EtXFx1MEQ3RlxcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRTAxLVxcdTBFMzBcXHUwRTMyXFx1MEUzM1xcdTBFNDAtXFx1MEU0NlxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUIwXFx1MEVCMlxcdTBFQjNcXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjQwLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjg4LVxcdTBGOENcXHUxMDAwLVxcdTEwMkFcXHUxMDNGXFx1MTA1MC1cXHUxMDU1XFx1MTA1QS1cXHUxMDVEXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2RS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4RVxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzgwLVxcdTE3QjNcXHUxN0Q3XFx1MTdEQ1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBOFxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUVcXHUxOTUwLVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUMxLVxcdTE5QzdcXHUxQTAwLVxcdTFBMTZcXHUxQTIwLVxcdTFBNTRcXHUxQUE3XFx1MUIwNS1cXHUxQjMzXFx1MUI0NS1cXHUxQjRCXFx1MUI4My1cXHUxQkEwXFx1MUJBRVxcdTFCQUZcXHUxQkJBLVxcdTFCRTVcXHUxQzAwLVxcdTFDMjNcXHUxQzRELVxcdTFDNEZcXHUxQzVBLVxcdTFDN0RcXHUxQ0U5LVxcdTFDRUNcXHUxQ0VFLVxcdTFDRjFcXHUxQ0Y1XFx1MUNGNlxcdTFEMDAtXFx1MURCRlxcdTFFMDAtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEyRFxcdTIxMkYtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRUVcXHUyQ0YyXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEODAtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTJFMkZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDlELVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MUZcXHVBNjJBXFx1QTYyQlxcdUE2NDAtXFx1QTY2RVxcdUE2N0YtXFx1QTY5RFxcdUE2QTAtXFx1QTZFRlxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTdBRFxcdUE3QjBcXHVBN0IxXFx1QTdGNy1cXHVBODAxXFx1QTgwMy1cXHVBODA1XFx1QTgwNy1cXHVBODBBXFx1QTgwQy1cXHVBODIyXFx1QTg0MC1cXHVBODczXFx1QTg4Mi1cXHVBOEIzXFx1QThGMi1cXHVBOEY3XFx1QThGQlxcdUE5MEEtXFx1QTkyNVxcdUE5MzAtXFx1QTk0NlxcdUE5NjAtXFx1QTk3Q1xcdUE5ODQtXFx1QTlCMlxcdUE5Q0ZcXHVBOUUwLVxcdUE5RTRcXHVBOUU2LVxcdUE5RUZcXHVBOUZBLVxcdUE5RkVcXHVBQTAwLVxcdUFBMjhcXHVBQTQwLVxcdUFBNDJcXHVBQTQ0LVxcdUFBNEJcXHVBQTYwLVxcdUFBNzZcXHVBQTdBXFx1QUE3RS1cXHVBQUFGXFx1QUFCMVxcdUFBQjVcXHVBQUI2XFx1QUFCOS1cXHVBQUJEXFx1QUFDMFxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUFcXHVBQUYyLVxcdUFBRjRcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFMlxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMURcXHVGQjFGLVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMjEtXFx1RkYzQVxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ10vLE5vbkFzY2lpSWRlbnRpZmllclBhcnQ6L1tcXHhBQVxceEI1XFx4QkFcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDMwMC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzdGXFx1MDM4NlxcdTAzODgtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDgzLVxcdTA0ODdcXHUwNDhBLVxcdTA1MkZcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDU5MS1cXHUwNUJEXFx1MDVCRlxcdTA1QzFcXHUwNUMyXFx1MDVDNFxcdTA1QzVcXHUwNUM3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYxMC1cXHUwNjFBXFx1MDYyMC1cXHUwNjY5XFx1MDY2RS1cXHUwNkQzXFx1MDZENS1cXHUwNkRDXFx1MDZERi1cXHUwNkU4XFx1MDZFQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTAtXFx1MDc0QVxcdTA3NEQtXFx1MDdCMVxcdTA3QzAtXFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MkRcXHUwODQwLVxcdTA4NUJcXHUwOEEwLVxcdTA4QjJcXHUwOEU0LVxcdTA5NjNcXHUwOTY2LVxcdTA5NkZcXHUwOTcxLVxcdTA5ODNcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJDLVxcdTA5QzRcXHUwOUM3XFx1MDlDOFxcdTA5Q0ItXFx1MDlDRVxcdTA5RDdcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFM1xcdTA5RTYtXFx1MDlGMVxcdTBBMDEtXFx1MEEwM1xcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEEzQ1xcdTBBM0UtXFx1MEE0MlxcdTBBNDdcXHUwQTQ4XFx1MEE0Qi1cXHUwQTREXFx1MEE1MVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTY2LVxcdTBBNzVcXHUwQTgxLVxcdTBBODNcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkMtXFx1MEFDNVxcdTBBQzctXFx1MEFDOVxcdTBBQ0ItXFx1MEFDRFxcdTBBRDBcXHUwQUUwLVxcdTBBRTNcXHUwQUU2LVxcdTBBRUZcXHUwQjAxLVxcdTBCMDNcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzQy1cXHUwQjQ0XFx1MEI0N1xcdTBCNDhcXHUwQjRCLVxcdTBCNERcXHUwQjU2XFx1MEI1N1xcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYzXFx1MEI2Ni1cXHUwQjZGXFx1MEI3MVxcdTBCODJcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCQkUtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDRFxcdTBCRDBcXHUwQkQ3XFx1MEJFNi1cXHUwQkVGXFx1MEMwMC1cXHUwQzAzXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRC1cXHUwQzQ0XFx1MEM0Ni1cXHUwQzQ4XFx1MEM0QS1cXHUwQzREXFx1MEM1NVxcdTBDNTZcXHUwQzU4XFx1MEM1OVxcdTBDNjAtXFx1MEM2M1xcdTBDNjYtXFx1MEM2RlxcdTBDODEtXFx1MEM4M1xcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkMtXFx1MENDNFxcdTBDQzYtXFx1MENDOFxcdTBDQ0EtXFx1MENDRFxcdTBDRDVcXHUwQ0Q2XFx1MENERVxcdTBDRTAtXFx1MENFM1xcdTBDRTYtXFx1MENFRlxcdTBDRjFcXHUwQ0YyXFx1MEQwMS1cXHUwRDAzXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRC1cXHUwRDQ0XFx1MEQ0Ni1cXHUwRDQ4XFx1MEQ0QS1cXHUwRDRFXFx1MEQ1N1xcdTBENjAtXFx1MEQ2M1xcdTBENjYtXFx1MEQ2RlxcdTBEN0EtXFx1MEQ3RlxcdTBEODJcXHUwRDgzXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBEQ0FcXHUwRENGLVxcdTBERDRcXHUwREQ2XFx1MEREOC1cXHUwRERGXFx1MERFNi1cXHUwREVGXFx1MERGMlxcdTBERjNcXHUwRTAxLVxcdTBFM0FcXHUwRTQwLVxcdTBFNEVcXHUwRTUwLVxcdTBFNTlcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCOVxcdTBFQkItXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRUM4LVxcdTBFQ0RcXHUwRUQwLVxcdTBFRDlcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEYxOFxcdTBGMTlcXHUwRjIwLVxcdTBGMjlcXHUwRjM1XFx1MEYzN1xcdTBGMzlcXHUwRjNFLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjcxLVxcdTBGODRcXHUwRjg2LVxcdTBGOTdcXHUwRjk5LVxcdTBGQkNcXHUwRkM2XFx1MTAwMC1cXHUxMDQ5XFx1MTA1MC1cXHUxMDlEXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzNUQtXFx1MTM1RlxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxNFxcdTE3MjAtXFx1MTczNFxcdTE3NDAtXFx1MTc1M1xcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3NzJcXHUxNzczXFx1MTc4MC1cXHUxN0QzXFx1MTdEN1xcdTE3RENcXHUxN0REXFx1MTdFMC1cXHUxN0U5XFx1MTgwQi1cXHUxODBEXFx1MTgxMC1cXHUxODE5XFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTkyMC1cXHUxOTJCXFx1MTkzMC1cXHUxOTNCXFx1MTk0Ni1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MTlEMC1cXHUxOUQ5XFx1MUEwMC1cXHUxQTFCXFx1MUEyMC1cXHUxQTVFXFx1MUE2MC1cXHUxQTdDXFx1MUE3Ri1cXHUxQTg5XFx1MUE5MC1cXHUxQTk5XFx1MUFBN1xcdTFBQjAtXFx1MUFCRFxcdTFCMDAtXFx1MUI0QlxcdTFCNTAtXFx1MUI1OVxcdTFCNkItXFx1MUI3M1xcdTFCODAtXFx1MUJGM1xcdTFDMDAtXFx1MUMzN1xcdTFDNDAtXFx1MUM0OVxcdTFDNEQtXFx1MUM3RFxcdTFDRDAtXFx1MUNEMlxcdTFDRDQtXFx1MUNGNlxcdTFDRjhcXHUxQ0Y5XFx1MUQwMC1cXHUxREY1XFx1MURGQy1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwMENcXHUyMDBEXFx1MjAzRlxcdTIwNDBcXHUyMDU0XFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMEQwLVxcdTIwRENcXHUyMEUxXFx1MjBFNS1cXHUyMEYwXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOS1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTJEXFx1MjEyRi1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxNjAtXFx1MjE4OFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEN0YtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTJERTAtXFx1MkRGRlxcdTJFMkZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMkZcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDk5XFx1MzA5QVxcdTMwOUQtXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYyQlxcdUE2NDAtXFx1QTY2RlxcdUE2NzQtXFx1QTY3RFxcdUE2N0YtXFx1QTY5RFxcdUE2OUYtXFx1QTZGMVxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTdBRFxcdUE3QjBcXHVBN0IxXFx1QTdGNy1cXHVBODI3XFx1QTg0MC1cXHVBODczXFx1QTg4MC1cXHVBOEM0XFx1QThEMC1cXHVBOEQ5XFx1QThFMC1cXHVBOEY3XFx1QThGQlxcdUE5MDAtXFx1QTkyRFxcdUE5MzAtXFx1QTk1M1xcdUE5NjAtXFx1QTk3Q1xcdUE5ODAtXFx1QTlDMFxcdUE5Q0YtXFx1QTlEOVxcdUE5RTAtXFx1QTlGRVxcdUFBMDAtXFx1QUEzNlxcdUFBNDAtXFx1QUE0RFxcdUFBNTAtXFx1QUE1OVxcdUFBNjAtXFx1QUE3NlxcdUFBN0EtXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFRlxcdUFBRjItXFx1QUFGNlxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCMzAtXFx1QUI1QVxcdUFCNUMtXFx1QUI1RlxcdUFCNjRcXHVBQjY1XFx1QUJDMC1cXHVBQkVBXFx1QUJFQ1xcdUFCRURcXHVBQkYwLVxcdUFCRjlcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFELVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFMDAtXFx1RkUwRlxcdUZFMjAtXFx1RkUyRFxcdUZFMzNcXHVGRTM0XFx1RkU0RC1cXHVGRTRGXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYxMC1cXHVGRjE5XFx1RkYyMS1cXHVGRjNBXFx1RkYzRlxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ10vXG59O2U9e05vbkFzY2lpSWRlbnRpZmllclN0YXJ0Oi9bXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzNzAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOEEwLVxcdTA4QjJcXHUwOTA0LVxcdTA5MzlcXHUwOTNEXFx1MDk1MFxcdTA5NTgtXFx1MDk2MVxcdTA5NzEtXFx1MDk4MFxcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkRcXHUwOUNFXFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTFcXHUwOUYwXFx1MDlGMVxcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNzItXFx1MEE3NFxcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCRFxcdTBBRDBcXHUwQUUwXFx1MEFFMVxcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNEXFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjFcXHUwQjcxXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkQwXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRFxcdTBDNThcXHUwQzU5XFx1MEM2MFxcdTBDNjFcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JEXFx1MENERVxcdTBDRTBcXHUwQ0UxXFx1MENGMVxcdTBDRjJcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNEXFx1MEQ0RVxcdTBENjBcXHUwRDYxXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBFMDEtXFx1MEUzMFxcdTBFMzJcXHUwRTMzXFx1MEU0MC1cXHUwRTQ2XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjBcXHUwRUIyXFx1MEVCM1xcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGNDAtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGODgtXFx1MEY4Q1xcdTEwMDAtXFx1MTAyQVxcdTEwM0ZcXHUxMDUwLVxcdTEwNTVcXHUxMDVBLVxcdTEwNURcXHUxMDYxXFx1MTA2NVxcdTEwNjZcXHUxMDZFLVxcdTEwNzBcXHUxMDc1LVxcdTEwODFcXHUxMDhFXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxMVxcdTE3MjAtXFx1MTczMVxcdTE3NDAtXFx1MTc1MVxcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3ODAtXFx1MTdCM1xcdTE3RDdcXHUxN0RDXFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEE4XFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5NTAtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QzEtXFx1MTlDN1xcdTFBMDAtXFx1MUExNlxcdTFBMjAtXFx1MUE1NFxcdTFBQTdcXHUxQjA1LVxcdTFCMzNcXHUxQjQ1LVxcdTFCNEJcXHUxQjgzLVxcdTFCQTBcXHUxQkFFXFx1MUJBRlxcdTFCQkEtXFx1MUJFNVxcdTFDMDAtXFx1MUMyM1xcdTFDNEQtXFx1MUM0RlxcdTFDNUEtXFx1MUM3RFxcdTFDRTktXFx1MUNFQ1xcdTFDRUUtXFx1MUNGMVxcdTFDRjVcXHUxQ0Y2XFx1MUQwMC1cXHUxREJGXFx1MUUwMC1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOC1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxNjAtXFx1MjE4OFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNFRVxcdTJDRjJcXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ4MC1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDI5XFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5Qi1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjFGXFx1QTYyQVxcdUE2MkJcXHVBNjQwLVxcdUE2NkVcXHVBNjdGLVxcdUE2OURcXHVBNkEwLVxcdUE2RUZcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgwMVxcdUE4MDMtXFx1QTgwNVxcdUE4MDctXFx1QTgwQVxcdUE4MEMtXFx1QTgyMlxcdUE4NDAtXFx1QTg3M1xcdUE4ODItXFx1QThCM1xcdUE4RjItXFx1QThGN1xcdUE4RkJcXHVBOTBBLVxcdUE5MjVcXHVBOTMwLVxcdUE5NDZcXHVBOTYwLVxcdUE5N0NcXHVBOTg0LVxcdUE5QjJcXHVBOUNGXFx1QTlFMC1cXHVBOUU0XFx1QTlFNi1cXHVBOUVGXFx1QTlGQS1cXHVBOUZFXFx1QUEwMC1cXHVBQTI4XFx1QUE0MC1cXHVBQTQyXFx1QUE0NC1cXHVBQTRCXFx1QUE2MC1cXHVBQTc2XFx1QUE3QVxcdUFBN0UtXFx1QUFBRlxcdUFBQjFcXHVBQUI1XFx1QUFCNlxcdUFBQjktXFx1QUFCRFxcdUFBQzBcXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVBXFx1QUFGMi1cXHVBQUY0XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUIzMC1cXHVBQjVBXFx1QUI1Qy1cXHVBQjVGXFx1QUI2NFxcdUFCNjVcXHVBQkMwLVxcdUFCRTJcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFEXFx1RkIxRi1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjIxLVxcdUZGM0FcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdfFxcdUQ4MDBbXFx1REMwMC1cXHVEQzBCXFx1REMwRC1cXHVEQzI2XFx1REMyOC1cXHVEQzNBXFx1REMzQ1xcdURDM0RcXHVEQzNGLVxcdURDNERcXHVEQzUwLVxcdURDNURcXHVEQzgwLVxcdURDRkFcXHVERDQwLVxcdURENzRcXHVERTgwLVxcdURFOUNcXHVERUEwLVxcdURFRDBcXHVERjAwLVxcdURGMUZcXHVERjMwLVxcdURGNEFcXHVERjUwLVxcdURGNzVcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVERDAwLVxcdUREMTVcXHVERDIwLVxcdUREMzlcXHVERDgwLVxcdUREQjdcXHVEREJFXFx1RERCRlxcdURFMDBcXHVERTEwLVxcdURFMTNcXHVERTE1LVxcdURFMTdcXHVERTE5LVxcdURFMzNcXHVERTYwLVxcdURFN0NcXHVERTgwLVxcdURFOUNcXHVERUMwLVxcdURFQzdcXHVERUM5LVxcdURFRTRcXHVERjAwLVxcdURGMzVcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNzJcXHVERjgwLVxcdURGOTFdfFxcdUQ4MDNbXFx1REMwMC1cXHVEQzQ4XXxcXHVEODA0W1xcdURDMDMtXFx1REMzN1xcdURDODMtXFx1RENBRlxcdURDRDAtXFx1RENFOFxcdUREMDMtXFx1REQyNlxcdURENTAtXFx1REQ3MlxcdURENzZcXHVERDgzLVxcdUREQjJcXHVEREMxLVxcdUREQzRcXHVERERBXFx1REUwMC1cXHVERTExXFx1REUxMy1cXHVERTJCXFx1REVCMC1cXHVERURFXFx1REYwNS1cXHVERjBDXFx1REYwRlxcdURGMTBcXHVERjEzLVxcdURGMjhcXHVERjJBLVxcdURGMzBcXHVERjMyXFx1REYzM1xcdURGMzUtXFx1REYzOVxcdURGM0RcXHVERjVELVxcdURGNjFdfFxcdUQ4MDVbXFx1REM4MC1cXHVEQ0FGXFx1RENDNFxcdURDQzVcXHVEQ0M3XFx1REQ4MC1cXHVEREFFXFx1REUwMC1cXHVERTJGXFx1REU0NFxcdURFODAtXFx1REVBQV18XFx1RDgwNltcXHVEQ0EwLVxcdURDREZcXHVEQ0ZGXFx1REVDMC1cXHVERUY4XXxcXHVEODA4W1xcdURDMDAtXFx1REY5OF18XFx1RDgwOVtcXHVEQzAwLVxcdURDNkVdfFtcXHVEODBDXFx1RDg0MC1cXHVEODY4XFx1RDg2QS1cXHVEODZDXVtcXHVEQzAwLVxcdURGRkZdfFxcdUQ4MERbXFx1REMwMC1cXHVEQzJFXXxcXHVEODFBW1xcdURDMDAtXFx1REUzOFxcdURFNDAtXFx1REU1RVxcdURFRDAtXFx1REVFRFxcdURGMDAtXFx1REYyRlxcdURGNDAtXFx1REY0M1xcdURGNjMtXFx1REY3N1xcdURGN0QtXFx1REY4Rl18XFx1RDgxQltcXHVERjAwLVxcdURGNDRcXHVERjUwXFx1REY5My1cXHVERjlGXXxcXHVEODJDW1xcdURDMDBcXHVEQzAxXXxcXHVEODJGW1xcdURDMDAtXFx1REM2QVxcdURDNzAtXFx1REM3Q1xcdURDODAtXFx1REM4OFxcdURDOTAtXFx1REM5OV18XFx1RDgzNVtcXHVEQzAwLVxcdURDNTRcXHVEQzU2LVxcdURDOUNcXHVEQzlFXFx1REM5RlxcdURDQTJcXHVEQ0E1XFx1RENBNlxcdURDQTktXFx1RENBQ1xcdURDQUUtXFx1RENCOVxcdURDQkJcXHVEQ0JELVxcdURDQzNcXHVEQ0M1LVxcdUREMDVcXHVERDA3LVxcdUREMEFcXHVERDBELVxcdUREMTRcXHVERDE2LVxcdUREMUNcXHVERDFFLVxcdUREMzlcXHVERDNCLVxcdUREM0VcXHVERDQwLVxcdURENDRcXHVERDQ2XFx1REQ0QS1cXHVERDUwXFx1REQ1Mi1cXHVERUE1XFx1REVBOC1cXHVERUMwXFx1REVDMi1cXHVERURBXFx1REVEQy1cXHVERUZBXFx1REVGQy1cXHVERjE0XFx1REYxNi1cXHVERjM0XFx1REYzNi1cXHVERjRFXFx1REY1MC1cXHVERjZFXFx1REY3MC1cXHVERjg4XFx1REY4QS1cXHVERkE4XFx1REZBQS1cXHVERkMyXFx1REZDNC1cXHVERkNCXXxcXHVEODNBW1xcdURDMDAtXFx1RENDNF18XFx1RDgzQltcXHVERTAwLVxcdURFMDNcXHVERTA1LVxcdURFMUZcXHVERTIxXFx1REUyMlxcdURFMjRcXHVERTI3XFx1REUyOS1cXHVERTMyXFx1REUzNC1cXHVERTM3XFx1REUzOVxcdURFM0JcXHVERTQyXFx1REU0N1xcdURFNDlcXHVERTRCXFx1REU0RC1cXHVERTRGXFx1REU1MVxcdURFNTJcXHVERTU0XFx1REU1N1xcdURFNTlcXHVERTVCXFx1REU1RFxcdURFNUZcXHVERTYxXFx1REU2MlxcdURFNjRcXHVERTY3LVxcdURFNkFcXHVERTZDLVxcdURFNzJcXHVERTc0LVxcdURFNzdcXHVERTc5LVxcdURFN0NcXHVERTdFXFx1REU4MC1cXHVERTg5XFx1REU4Qi1cXHVERTlCXFx1REVBMS1cXHVERUEzXFx1REVBNS1cXHVERUE5XFx1REVBQi1cXHVERUJCXXxcXHVEODY5W1xcdURDMDAtXFx1REVENlxcdURGMDAtXFx1REZGRl18XFx1RDg2RFtcXHVEQzAwLVxcdURGMzRcXHVERjQwLVxcdURGRkZdfFxcdUQ4NkVbXFx1REMwMC1cXHVEQzFEXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF0vLE5vbkFzY2lpSWRlbnRpZmllclBhcnQ6L1tcXHhBQVxceEI1XFx4QjdcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzAwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4My1cXHUwNDg3XFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1OTEtXFx1MDVCRFxcdTA1QkZcXHUwNUMxXFx1MDVDMlxcdTA1QzRcXHUwNUM1XFx1MDVDN1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MTAtXFx1MDYxQVxcdTA2MjAtXFx1MDY2OVxcdTA2NkUtXFx1MDZEM1xcdTA2RDUtXFx1MDZEQ1xcdTA2REYtXFx1MDZFOFxcdTA2RUEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwLVxcdTA3NEFcXHUwNzRELVxcdTA3QjFcXHUwN0MwLVxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODJEXFx1MDg0MC1cXHUwODVCXFx1MDhBMC1cXHUwOEIyXFx1MDhFNC1cXHUwOTYzXFx1MDk2Ni1cXHUwOTZGXFx1MDk3MS1cXHUwOTgzXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCQy1cXHUwOUM0XFx1MDlDN1xcdTA5QzhcXHUwOUNCLVxcdTA5Q0VcXHUwOUQ3XFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTNcXHUwOUU2LVxcdTA5RjFcXHUwQTAxLVxcdTBBMDNcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBM0NcXHUwQTNFLVxcdTBBNDJcXHUwQTQ3XFx1MEE0OFxcdTBBNEItXFx1MEE0RFxcdTBBNTFcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE2Ni1cXHUwQTc1XFx1MEE4MS1cXHUwQTgzXFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJDLVxcdTBBQzVcXHUwQUM3LVxcdTBBQzlcXHUwQUNCLVxcdTBBQ0RcXHUwQUQwXFx1MEFFMC1cXHUwQUUzXFx1MEFFNi1cXHUwQUVGXFx1MEIwMS1cXHUwQjAzXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0MtXFx1MEI0NFxcdTBCNDdcXHUwQjQ4XFx1MEI0Qi1cXHUwQjREXFx1MEI1NlxcdTBCNTdcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2M1xcdTBCNjYtXFx1MEI2RlxcdTBCNzFcXHUwQjgyXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkJFLVxcdTBCQzJcXHUwQkM2LVxcdTBCQzhcXHUwQkNBLVxcdTBCQ0RcXHUwQkQwXFx1MEJEN1xcdTBCRTYtXFx1MEJFRlxcdTBDMDAtXFx1MEMwM1xcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0QtXFx1MEM0NFxcdTBDNDYtXFx1MEM0OFxcdTBDNEEtXFx1MEM0RFxcdTBDNTVcXHUwQzU2XFx1MEM1OFxcdTBDNTlcXHUwQzYwLVxcdTBDNjNcXHUwQzY2LVxcdTBDNkZcXHUwQzgxLVxcdTBDODNcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JDLVxcdTBDQzRcXHUwQ0M2LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0RcXHUwQ0Q1XFx1MENENlxcdTBDREVcXHUwQ0UwLVxcdTBDRTNcXHUwQ0U2LVxcdTBDRUZcXHUwQ0YxXFx1MENGMlxcdTBEMDEtXFx1MEQwM1xcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0QtXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RVxcdTBENTdcXHUwRDYwLVxcdTBENjNcXHUwRDY2LVxcdTBENkZcXHUwRDdBLVxcdTBEN0ZcXHUwRDgyXFx1MEQ4M1xcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRENBXFx1MERDRi1cXHUwREQ0XFx1MERENlxcdTBERDgtXFx1MERERlxcdTBERTYtXFx1MERFRlxcdTBERjJcXHUwREYzXFx1MEUwMS1cXHUwRTNBXFx1MEU0MC1cXHUwRTRFXFx1MEU1MC1cXHUwRTU5XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjlcXHUwRUJCLVxcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVDOC1cXHUwRUNEXFx1MEVEMC1cXHUwRUQ5XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGMThcXHUwRjE5XFx1MEYyMC1cXHUwRjI5XFx1MEYzNVxcdTBGMzdcXHUwRjM5XFx1MEYzRS1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY3MS1cXHUwRjg0XFx1MEY4Ni1cXHUwRjk3XFx1MEY5OS1cXHUwRkJDXFx1MEZDNlxcdTEwMDAtXFx1MTA0OVxcdTEwNTAtXFx1MTA5RFxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzVELVxcdTEzNUZcXHUxMzY5LVxcdTEzNzFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTRcXHUxNzIwLVxcdTE3MzRcXHUxNzQwLVxcdTE3NTNcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzcyXFx1MTc3M1xcdTE3ODAtXFx1MTdEM1xcdTE3RDdcXHUxN0RDXFx1MTdERFxcdTE3RTAtXFx1MTdFOVxcdTE4MEItXFx1MTgwRFxcdTE4MTAtXFx1MTgxOVxcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5MjAtXFx1MTkyQlxcdTE5MzAtXFx1MTkzQlxcdTE5NDYtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QjAtXFx1MTlDOVxcdTE5RDAtXFx1MTlEQVxcdTFBMDAtXFx1MUExQlxcdTFBMjAtXFx1MUE1RVxcdTFBNjAtXFx1MUE3Q1xcdTFBN0YtXFx1MUE4OVxcdTFBOTAtXFx1MUE5OVxcdTFBQTdcXHUxQUIwLVxcdTFBQkRcXHUxQjAwLVxcdTFCNEJcXHUxQjUwLVxcdTFCNTlcXHUxQjZCLVxcdTFCNzNcXHUxQjgwLVxcdTFCRjNcXHUxQzAwLVxcdTFDMzdcXHUxQzQwLVxcdTFDNDlcXHUxQzRELVxcdTFDN0RcXHUxQ0QwLVxcdTFDRDJcXHUxQ0Q0LVxcdTFDRjZcXHUxQ0Y4XFx1MUNGOVxcdTFEMDAtXFx1MURGNVxcdTFERkMtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDBDXFx1MjAwRFxcdTIwM0ZcXHUyMDQwXFx1MjA1NFxcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjBEMC1cXHUyMERDXFx1MjBFMVxcdTIwRTUtXFx1MjBGMFxcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTgtXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDdGLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyREUwLVxcdTJERkZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMkZcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDk5LVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MkJcXHVBNjQwLVxcdUE2NkZcXHVBNjc0LVxcdUE2N0RcXHVBNjdGLVxcdUE2OURcXHVBNjlGLVxcdUE2RjFcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgyN1xcdUE4NDAtXFx1QTg3M1xcdUE4ODAtXFx1QThDNFxcdUE4RDAtXFx1QThEOVxcdUE4RTAtXFx1QThGN1xcdUE4RkJcXHVBOTAwLVxcdUE5MkRcXHVBOTMwLVxcdUE5NTNcXHVBOTYwLVxcdUE5N0NcXHVBOTgwLVxcdUE5QzBcXHVBOUNGLVxcdUE5RDlcXHVBOUUwLVxcdUE5RkVcXHVBQTAwLVxcdUFBMzZcXHVBQTQwLVxcdUFBNERcXHVBQTUwLVxcdUFBNTlcXHVBQTYwLVxcdUFBNzZcXHVBQTdBLVxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUZcXHVBQUYyLVxcdUFBRjZcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFQVxcdUFCRUNcXHVBQkVEXFx1QUJGMC1cXHVBQkY5XFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRC1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTAwLVxcdUZFMEZcXHVGRTIwLVxcdUZFMkRcXHVGRTMzXFx1RkUzNFxcdUZFNEQtXFx1RkU0RlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMTAtXFx1RkYxOVxcdUZGMjEtXFx1RkYzQVxcdUZGM0ZcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdfFxcdUQ4MDBbXFx1REMwMC1cXHVEQzBCXFx1REMwRC1cXHVEQzI2XFx1REMyOC1cXHVEQzNBXFx1REMzQ1xcdURDM0RcXHVEQzNGLVxcdURDNERcXHVEQzUwLVxcdURDNURcXHVEQzgwLVxcdURDRkFcXHVERDQwLVxcdURENzRcXHVEREZEXFx1REU4MC1cXHVERTlDXFx1REVBMC1cXHVERUQwXFx1REVFMFxcdURGMDAtXFx1REYxRlxcdURGMzAtXFx1REY0QVxcdURGNTAtXFx1REY3QVxcdURGODAtXFx1REY5RFxcdURGQTAtXFx1REZDM1xcdURGQzgtXFx1REZDRlxcdURGRDEtXFx1REZENV18XFx1RDgwMVtcXHVEQzAwLVxcdURDOURcXHVEQ0EwLVxcdURDQTlcXHVERDAwLVxcdUREMjdcXHVERDMwLVxcdURENjNcXHVERTAwLVxcdURGMzZcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNjddfFxcdUQ4MDJbXFx1REMwMC1cXHVEQzA1XFx1REMwOFxcdURDMEEtXFx1REMzNVxcdURDMzdcXHVEQzM4XFx1REMzQ1xcdURDM0YtXFx1REM1NVxcdURDNjAtXFx1REM3NlxcdURDODAtXFx1REM5RVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMC1cXHVERTAzXFx1REUwNVxcdURFMDZcXHVERTBDLVxcdURFMTNcXHVERTE1LVxcdURFMTdcXHVERTE5LVxcdURFMzNcXHVERTM4LVxcdURFM0FcXHVERTNGXFx1REU2MC1cXHVERTdDXFx1REU4MC1cXHVERTlDXFx1REVDMC1cXHVERUM3XFx1REVDOS1cXHVERUU2XFx1REYwMC1cXHVERjM1XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjcyXFx1REY4MC1cXHVERjkxXXxcXHVEODAzW1xcdURDMDAtXFx1REM0OF18XFx1RDgwNFtcXHVEQzAwLVxcdURDNDZcXHVEQzY2LVxcdURDNkZcXHVEQzdGLVxcdURDQkFcXHVEQ0QwLVxcdURDRThcXHVEQ0YwLVxcdURDRjlcXHVERDAwLVxcdUREMzRcXHVERDM2LVxcdUREM0ZcXHVERDUwLVxcdURENzNcXHVERDc2XFx1REQ4MC1cXHVEREM0XFx1REREMC1cXHVERERBXFx1REUwMC1cXHVERTExXFx1REUxMy1cXHVERTM3XFx1REVCMC1cXHVERUVBXFx1REVGMC1cXHVERUY5XFx1REYwMS1cXHVERjAzXFx1REYwNS1cXHVERjBDXFx1REYwRlxcdURGMTBcXHVERjEzLVxcdURGMjhcXHVERjJBLVxcdURGMzBcXHVERjMyXFx1REYzM1xcdURGMzUtXFx1REYzOVxcdURGM0MtXFx1REY0NFxcdURGNDdcXHVERjQ4XFx1REY0Qi1cXHVERjREXFx1REY1N1xcdURGNUQtXFx1REY2M1xcdURGNjYtXFx1REY2Q1xcdURGNzAtXFx1REY3NF18XFx1RDgwNVtcXHVEQzgwLVxcdURDQzVcXHVEQ0M3XFx1RENEMC1cXHVEQ0Q5XFx1REQ4MC1cXHVEREI1XFx1RERCOC1cXHVEREMwXFx1REUwMC1cXHVERTQwXFx1REU0NFxcdURFNTAtXFx1REU1OVxcdURFODAtXFx1REVCN1xcdURFQzAtXFx1REVDOV18XFx1RDgwNltcXHVEQ0EwLVxcdURDRTlcXHVEQ0ZGXFx1REVDMC1cXHVERUY4XXxcXHVEODA4W1xcdURDMDAtXFx1REY5OF18XFx1RDgwOVtcXHVEQzAwLVxcdURDNkVdfFtcXHVEODBDXFx1RDg0MC1cXHVEODY4XFx1RDg2QS1cXHVEODZDXVtcXHVEQzAwLVxcdURGRkZdfFxcdUQ4MERbXFx1REMwMC1cXHVEQzJFXXxcXHVEODFBW1xcdURDMDAtXFx1REUzOFxcdURFNDAtXFx1REU1RVxcdURFNjAtXFx1REU2OVxcdURFRDAtXFx1REVFRFxcdURFRjAtXFx1REVGNFxcdURGMDAtXFx1REYzNlxcdURGNDAtXFx1REY0M1xcdURGNTAtXFx1REY1OVxcdURGNjMtXFx1REY3N1xcdURGN0QtXFx1REY4Rl18XFx1RDgxQltcXHVERjAwLVxcdURGNDRcXHVERjUwLVxcdURGN0VcXHVERjhGLVxcdURGOUZdfFxcdUQ4MkNbXFx1REMwMFxcdURDMDFdfFxcdUQ4MkZbXFx1REMwMC1cXHVEQzZBXFx1REM3MC1cXHVEQzdDXFx1REM4MC1cXHVEQzg4XFx1REM5MC1cXHVEQzk5XFx1REM5RFxcdURDOUVdfFxcdUQ4MzRbXFx1REQ2NS1cXHVERDY5XFx1REQ2RC1cXHVERDcyXFx1REQ3Qi1cXHVERDgyXFx1REQ4NS1cXHVERDhCXFx1RERBQS1cXHVEREFEXFx1REU0Mi1cXHVERTQ0XXxcXHVEODM1W1xcdURDMDAtXFx1REM1NFxcdURDNTYtXFx1REM5Q1xcdURDOUVcXHVEQzlGXFx1RENBMlxcdURDQTVcXHVEQ0E2XFx1RENBOS1cXHVEQ0FDXFx1RENBRS1cXHVEQ0I5XFx1RENCQlxcdURDQkQtXFx1RENDM1xcdURDQzUtXFx1REQwNVxcdUREMDctXFx1REQwQVxcdUREMEQtXFx1REQxNFxcdUREMTYtXFx1REQxQ1xcdUREMUUtXFx1REQzOVxcdUREM0ItXFx1REQzRVxcdURENDAtXFx1REQ0NFxcdURENDZcXHVERDRBLVxcdURENTBcXHVERDUyLVxcdURFQTVcXHVERUE4LVxcdURFQzBcXHVERUMyLVxcdURFREFcXHVERURDLVxcdURFRkFcXHVERUZDLVxcdURGMTRcXHVERjE2LVxcdURGMzRcXHVERjM2LVxcdURGNEVcXHVERjUwLVxcdURGNkVcXHVERjcwLVxcdURGODhcXHVERjhBLVxcdURGQThcXHVERkFBLVxcdURGQzJcXHVERkM0LVxcdURGQ0JcXHVERkNFLVxcdURGRkZdfFxcdUQ4M0FbXFx1REMwMC1cXHVEQ0M0XFx1RENEMC1cXHVEQ0Q2XXxcXHVEODNCW1xcdURFMDAtXFx1REUwM1xcdURFMDUtXFx1REUxRlxcdURFMjFcXHVERTIyXFx1REUyNFxcdURFMjdcXHVERTI5LVxcdURFMzJcXHVERTM0LVxcdURFMzdcXHVERTM5XFx1REUzQlxcdURFNDJcXHVERTQ3XFx1REU0OVxcdURFNEJcXHVERTRELVxcdURFNEZcXHVERTUxXFx1REU1MlxcdURFNTRcXHVERTU3XFx1REU1OVxcdURFNUJcXHVERTVEXFx1REU1RlxcdURFNjFcXHVERTYyXFx1REU2NFxcdURFNjctXFx1REU2QVxcdURFNkMtXFx1REU3MlxcdURFNzQtXFx1REU3N1xcdURFNzktXFx1REU3Q1xcdURFN0VcXHVERTgwLVxcdURFODlcXHVERThCLVxcdURFOUJcXHVERUExLVxcdURFQTNcXHVERUE1LVxcdURFQTlcXHVERUFCLVxcdURFQkJdfFxcdUQ4NjlbXFx1REMwMC1cXHVERUQ2XFx1REYwMC1cXHVERkZGXXxcXHVEODZEW1xcdURDMDAtXFx1REYzNFxcdURGNDAtXFx1REZGRl18XFx1RDg2RVtcXHVEQzAwLVxcdURDMURdfFxcdUQ4N0VbXFx1REMwMC1cXHVERTFEXXxcXHVEQjQwW1xcdUREMDAtXFx1RERFRl0vfTtmdW5jdGlvbiBzKGUpe3JldHVybiA0ODw9ZSYmZTw9NTd9ZnVuY3Rpb24gYShlKXtyZXR1cm4gNDg8PWUmJmU8PTU3fHw5Nzw9ZSYmZTw9MTAyfHw2NTw9ZSYmZTw9NzB9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZT49NDgmJmU8PTU1fW49WzU3NjAsNjE1OCw4MTkyLDgxOTMsODE5NCw4MTk1LDgxOTYsODE5Nyw4MTk4LDgxOTksODIwMCw4MjAxLDgyMDIsODIzOSw4Mjg3LDEyMjg4LDY1Mjc5XTtmdW5jdGlvbiBmKGUpe3JldHVybiBlPT09MzJ8fGU9PT05fHxlPT09MTF8fGU9PT0xMnx8ZT09PTE2MHx8ZT49NTc2MCYmbi5pbmRleE9mKGUpPj0wfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGU9PT0xMHx8ZT09PTEzfHxlPT09ODIzMnx8ZT09PTgyMzN9ZnVuY3Rpb24gcChlKXtpZihlPD02NTUzNSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSl9dmFyIHQ9U3RyaW5nLmZyb21DaGFyQ29kZShNYXRoLmZsb29yKChlLTY1NTM2KS8xMDI0KSs1NTI5Nik7dmFyIHU9U3RyaW5nLmZyb21DaGFyQ29kZSgoZS02NTUzNiklMTAyNCs1NjMyMCk7cmV0dXJuIHQrdX1yPW5ldyBBcnJheSgxMjgpO2ZvcihvPTA7bzwxMjg7KytvKXtyW29dPW8+PTk3JiZvPD0xMjJ8fG8+PTY1JiZvPD05MHx8bz09PTM2fHxvPT09OTV9aT1uZXcgQXJyYXkoMTI4KTtmb3Iobz0wO288MTI4Oysrbyl7aVtvXT1vPj05NyYmbzw9MTIyfHxvPj02NSYmbzw9OTB8fG8+PTQ4JiZvPD01N3x8bz09PTM2fHxvPT09OTV9ZnVuY3Rpb24gRChlKXtyZXR1cm4gZTwxMjg/cltlXTp1Lk5vbkFzY2lpSWRlbnRpZmllclN0YXJ0LnRlc3QocChlKSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gZTwxMjg/aVtlXTp1Lk5vbkFzY2lpSWRlbnRpZmllclBhcnQudGVzdChwKGUpKX1mdW5jdGlvbiBtKHQpe3JldHVybiB0PDEyOD9yW3RdOmUuTm9uQXNjaWlJZGVudGlmaWVyU3RhcnQudGVzdChwKHQpKX1mdW5jdGlvbiBkKHQpe3JldHVybiB0PDEyOD9pW3RdOmUuTm9uQXNjaWlJZGVudGlmaWVyUGFydC50ZXN0KHAodCkpfXQuZXhwb3J0cz17aXNEZWNpbWFsRGlnaXQ6cyxpc0hleERpZ2l0OmEsaXNPY3RhbERpZ2l0OmwsaXNXaGl0ZVNwYWNlOmYsaXNMaW5lVGVybWluYXRvcjpjLGlzSWRlbnRpZmllclN0YXJ0RVM1OkQsaXNJZGVudGlmaWVyUGFydEVTNTpoLGlzSWRlbnRpZmllclN0YXJ0RVM2Om0saXNJZGVudGlmaWVyUGFydEVTNjpkfX0pKCl9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB1PWUoXCIuL2NvZGVcIik7ZnVuY3Rpb24gbihlKXtzd2l0Y2goZSl7Y2FzZVwiaW1wbGVtZW50c1wiOmNhc2VcImludGVyZmFjZVwiOmNhc2VcInBhY2thZ2VcIjpjYXNlXCJwcml2YXRlXCI6Y2FzZVwicHJvdGVjdGVkXCI6Y2FzZVwicHVibGljXCI6Y2FzZVwic3RhdGljXCI6Y2FzZVwibGV0XCI6cmV0dXJuIHRydWU7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fWZ1bmN0aW9uIHIoZSx0KXtpZighdCYmZT09PVwieWllbGRcIil7cmV0dXJuIGZhbHNlfXJldHVybiBpKGUsdCl9ZnVuY3Rpb24gaShlLHQpe2lmKHQmJm4oZSkpe3JldHVybiB0cnVlfXN3aXRjaChlLmxlbmd0aCl7Y2FzZSAyOnJldHVybiBlPT09XCJpZlwifHxlPT09XCJpblwifHxlPT09XCJkb1wiO2Nhc2UgMzpyZXR1cm4gZT09PVwidmFyXCJ8fGU9PT1cImZvclwifHxlPT09XCJuZXdcInx8ZT09PVwidHJ5XCI7Y2FzZSA0OnJldHVybiBlPT09XCJ0aGlzXCJ8fGU9PT1cImVsc2VcInx8ZT09PVwiY2FzZVwifHxlPT09XCJ2b2lkXCJ8fGU9PT1cIndpdGhcInx8ZT09PVwiZW51bVwiO2Nhc2UgNTpyZXR1cm4gZT09PVwid2hpbGVcInx8ZT09PVwiYnJlYWtcInx8ZT09PVwiY2F0Y2hcInx8ZT09PVwidGhyb3dcInx8ZT09PVwiY29uc3RcInx8ZT09PVwieWllbGRcInx8ZT09PVwiY2xhc3NcInx8ZT09PVwic3VwZXJcIjtjYXNlIDY6cmV0dXJuIGU9PT1cInJldHVyblwifHxlPT09XCJ0eXBlb2ZcInx8ZT09PVwiZGVsZXRlXCJ8fGU9PT1cInN3aXRjaFwifHxlPT09XCJleHBvcnRcInx8ZT09PVwiaW1wb3J0XCI7Y2FzZSA3OnJldHVybiBlPT09XCJkZWZhdWx0XCJ8fGU9PT1cImZpbmFsbHlcInx8ZT09PVwiZXh0ZW5kc1wiO2Nhc2UgODpyZXR1cm4gZT09PVwiZnVuY3Rpb25cInx8ZT09PVwiY29udGludWVcInx8ZT09PVwiZGVidWdnZXJcIjtjYXNlIDEwOnJldHVybiBlPT09XCJpbnN0YW5jZW9mXCI7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gZT09PVwibnVsbFwifHxlPT09XCJ0cnVlXCJ8fGU9PT1cImZhbHNlXCJ8fHIoZSx0KX1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGU9PT1cIm51bGxcInx8ZT09PVwidHJ1ZVwifHxlPT09XCJmYWxzZVwifHxpKGUsdCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZT09PVwiZXZhbFwifHxlPT09XCJhcmd1bWVudHNcIn1mdW5jdGlvbiBsKGUpe3ZhciB0LG4scjtpZihlLmxlbmd0aD09PTApe3JldHVybiBmYWxzZX1yPWUuY2hhckNvZGVBdCgwKTtpZighdS5pc0lkZW50aWZpZXJTdGFydEVTNShyKSl7cmV0dXJuIGZhbHNlfWZvcih0PTEsbj1lLmxlbmd0aDt0PG47Kyt0KXtyPWUuY2hhckNvZGVBdCh0KTtpZighdS5pc0lkZW50aWZpZXJQYXJ0RVM1KHIpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4oZS01NTI5NikqMTAyNCsodC01NjMyMCkrNjU1MzZ9ZnVuY3Rpb24gYyhlKXt2YXIgdCxuLHIsaSxvO2lmKGUubGVuZ3RoPT09MCl7cmV0dXJuIGZhbHNlfW89dS5pc0lkZW50aWZpZXJTdGFydEVTNjtmb3IodD0wLG49ZS5sZW5ndGg7dDxuOysrdCl7cj1lLmNoYXJDb2RlQXQodCk7aWYoNTUyOTY8PXImJnI8PTU2MzE5KXsrK3Q7aWYodD49bil7cmV0dXJuIGZhbHNlfWk9ZS5jaGFyQ29kZUF0KHQpO2lmKCEoNTYzMjA8PWkmJmk8PTU3MzQzKSl7cmV0dXJuIGZhbHNlfXI9ZihyLGkpfWlmKCFvKHIpKXtyZXR1cm4gZmFsc2V9bz11LmlzSWRlbnRpZmllclBhcnRFUzZ9cmV0dXJuIHRydWV9ZnVuY3Rpb24gcChlLHQpe3JldHVybiBsKGUpJiYhbyhlLHQpfWZ1bmN0aW9uIEQoZSx0KXtyZXR1cm4gYyhlKSYmIXMoZSx0KX10LmV4cG9ydHM9e2lzS2V5d29yZEVTNTpyLGlzS2V5d29yZEVTNjppLGlzUmVzZXJ2ZWRXb3JkRVM1Om8saXNSZXNlcnZlZFdvcmRFUzY6cyxpc1Jlc3RyaWN0ZWRXb3JkOmEsaXNJZGVudGlmaWVyTmFtZUVTNTpsLGlzSWRlbnRpZmllck5hbWVFUzY6Yyxpc0lkZW50aWZpZXJFUzU6cCxpc0lkZW50aWZpZXJFUzY6RH19KSgpfSx7XCIuL2NvZGVcIjozMX1dLDMzOltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dS5hc3Q9ZShcIi4vYXN0XCIpO3UuY29kZT1lKFwiLi9jb2RlXCIpO3Uua2V5d29yZD1lKFwiLi9rZXl3b3JkXCIpfSkoKX0se1wiLi9hc3RcIjozMCxcIi4vY29kZVwiOjMxLFwiLi9rZXl3b3JkXCI6MzJ9XSwzNDpbZnVuY3Rpb24oZSx0LHUpe3UuU291cmNlTWFwR2VuZXJhdG9yPWUoXCIuL3NvdXJjZS1tYXAvc291cmNlLW1hcC1nZW5lcmF0b3JcIikuU291cmNlTWFwR2VuZXJhdG9yO3UuU291cmNlTWFwQ29uc3VtZXI9ZShcIi4vc291cmNlLW1hcC9zb3VyY2UtbWFwLWNvbnN1bWVyXCIpLlNvdXJjZU1hcENvbnN1bWVyO3UuU291cmNlTm9kZT1lKFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1ub2RlXCIpLlNvdXJjZU5vZGV9LHtcIi4vc291cmNlLW1hcC9zb3VyY2UtbWFwLWNvbnN1bWVyXCI6NDIsXCIuL3NvdXJjZS1tYXAvc291cmNlLW1hcC1nZW5lcmF0b3JcIjo0MyxcIi4vc291cmNlLW1hcC9zb3VyY2Utbm9kZVwiOjQ0fV0sMzU6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vdXRpbFwiKTtmdW5jdGlvbiByKCl7dGhpcy5fYXJyYXk9W107dGhpcy5fc2V0PXt9fXIuZnJvbUFycmF5PWZ1bmN0aW9uIGkoZSx0KXt2YXIgdT1uZXcgcjtmb3IodmFyIG49MCxpPWUubGVuZ3RoO248aTtuKyspe3UuYWRkKGVbbl0sdCl9cmV0dXJuIHV9O3IucHJvdG90eXBlLmFkZD1mdW5jdGlvbiBvKGUsdCl7dmFyIHU9dGhpcy5oYXMoZSk7dmFyIHI9dGhpcy5fYXJyYXkubGVuZ3RoO2lmKCF1fHx0KXt0aGlzLl9hcnJheS5wdXNoKGUpfWlmKCF1KXt0aGlzLl9zZXRbbi50b1NldFN0cmluZyhlKV09cn19O3IucHJvdG90eXBlLmhhcz1mdW5jdGlvbiBzKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fc2V0LG4udG9TZXRTdHJpbmcoZSkpfTtyLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uIGEoZSl7aWYodGhpcy5oYXMoZSkpe3JldHVybiB0aGlzLl9zZXRbbi50b1NldFN0cmluZyhlKV19dGhyb3cgbmV3IEVycm9yKCdcIicrZSsnXCIgaXMgbm90IGluIHRoZSBzZXQuJyl9O3IucHJvdG90eXBlLmF0PWZ1bmN0aW9uIGwoZSl7aWYoZT49MCYmZTx0aGlzLl9hcnJheS5sZW5ndGgpe3JldHVybiB0aGlzLl9hcnJheVtlXX10aHJvdyBuZXcgRXJyb3IoXCJObyBlbGVtZW50IGluZGV4ZWQgYnkgXCIrZSl9O3IucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24gZigpe3JldHVybiB0aGlzLl9hcnJheS5zbGljZSgpfTt0LkFycmF5U2V0PXJ9KX0se1wiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSwzNjpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi9iYXNlNjRcIik7dmFyIHI9NTt2YXIgaT0xPDxyO3ZhciBvPWktMTt2YXIgcz1pO2Z1bmN0aW9uIGEoZSl7cmV0dXJuIGU8MD8oLWU8PDEpKzE6KGU8PDEpKzB9ZnVuY3Rpb24gbChlKXt2YXIgdD0oZSYxKT09PTE7dmFyIHU9ZT4+MTtyZXR1cm4gdD8tdTp1fXQuZW5jb2RlPWZ1bmN0aW9uIGYoZSl7dmFyIHQ9XCJcIjt2YXIgdTt2YXIgaT1hKGUpO2Rve3U9aSZvO2k+Pj49cjtpZihpPjApe3V8PXN9dCs9bi5lbmNvZGUodSl9d2hpbGUoaT4wKTtyZXR1cm4gdH07dC5kZWNvZGU9ZnVuY3Rpb24gYyhlLHQpe3ZhciB1PTA7dmFyIGk9ZS5sZW5ndGg7dmFyIGE9MDt2YXIgZj0wO3ZhciBjLHA7ZG97aWYodT49aSl7dGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgbW9yZSBkaWdpdHMgaW4gYmFzZSA2NCBWTFEgdmFsdWUuXCIpfXA9bi5kZWNvZGUoZS5jaGFyQXQodSsrKSk7Yz0hIShwJnMpO3AmPW87YT1hKyhwPDxmKTtmKz1yfXdoaWxlKGMpO3QudmFsdWU9bChhKTt0LnJlc3Q9ZS5zbGljZSh1KX19KX0se1wiLi9iYXNlNjRcIjozNyxhbWRlZmluZTo0Nn1dLDM3OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPXt9O3ZhciByPXt9O1wiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24oZSx0KXtuW2VdPXQ7clt0XT1lfSk7dC5lbmNvZGU9ZnVuY3Rpb24gaShlKXtpZihlIGluIHIpe3JldHVybiByW2VdfXRocm93IG5ldyBUeXBlRXJyb3IoXCJNdXN0IGJlIGJldHdlZW4gMCBhbmQgNjM6IFwiK2UpfTt0LmRlY29kZT1mdW5jdGlvbiBvKGUpe2lmKGUgaW4gbil7cmV0dXJuIG5bZV19dGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBhIHZhbGlkIGJhc2UgNjQgZGlnaXQ6IFwiK2UpfX0pfSx7YW1kZWZpbmU6NDZ9XSwzODpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi91dGlsXCIpO3ZhciByPWUoXCIuL2JpbmFyeS1zZWFyY2hcIik7dmFyIGk9ZShcIi4vYXJyYXktc2V0XCIpLkFycmF5U2V0O3ZhciBvPWUoXCIuL2Jhc2U2NC12bHFcIik7dmFyIHM9ZShcIi4vc291cmNlLW1hcC1jb25zdW1lclwiKS5Tb3VyY2VNYXBDb25zdW1lcjtmdW5jdGlvbiBhKGUpe3ZhciB0PWU7aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0PUpTT04ucGFyc2UoZS5yZXBsYWNlKC9eXFwpXFxdXFx9Jy8sXCJcIikpfXZhciB1PW4uZ2V0QXJnKHQsXCJ2ZXJzaW9uXCIpO3ZhciByPW4uZ2V0QXJnKHQsXCJzb3VyY2VzXCIpO3ZhciBvPW4uZ2V0QXJnKHQsXCJuYW1lc1wiLFtdKTt2YXIgcz1uLmdldEFyZyh0LFwic291cmNlUm9vdFwiLG51bGwpO3ZhciBhPW4uZ2V0QXJnKHQsXCJzb3VyY2VzQ29udGVudFwiLG51bGwpO3ZhciBsPW4uZ2V0QXJnKHQsXCJtYXBwaW5nc1wiKTt2YXIgZj1uLmdldEFyZyh0LFwiZmlsZVwiLG51bGwpO2lmKHUhPXRoaXMuX3ZlcnNpb24pe3Rocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZlcnNpb246IFwiK3UpfXI9ci5tYXAobi5ub3JtYWxpemUpO3RoaXMuX25hbWVzPWkuZnJvbUFycmF5KG8sdHJ1ZSk7dGhpcy5fc291cmNlcz1pLmZyb21BcnJheShyLHRydWUpO3RoaXMuc291cmNlUm9vdD1zO3RoaXMuc291cmNlc0NvbnRlbnQ9YTt0aGlzLl9tYXBwaW5ncz1sO3RoaXMuZmlsZT1mfWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpO2EucHJvdG90eXBlLmNvbnN1bWVyPXM7YS5mcm9tU291cmNlTWFwPWZ1bmN0aW9uIGwoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSk7dC5fbmFtZXM9aS5mcm9tQXJyYXkoZS5fbmFtZXMudG9BcnJheSgpLHRydWUpO3QuX3NvdXJjZXM9aS5mcm9tQXJyYXkoZS5fc291cmNlcy50b0FycmF5KCksdHJ1ZSk7dC5zb3VyY2VSb290PWUuX3NvdXJjZVJvb3Q7dC5zb3VyY2VzQ29udGVudD1lLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50KHQuX3NvdXJjZXMudG9BcnJheSgpLHQuc291cmNlUm9vdCk7dC5maWxlPWUuX2ZpbGU7dC5fX2dlbmVyYXRlZE1hcHBpbmdzPWUuX21hcHBpbmdzLnRvQXJyYXkoKS5zbGljZSgpO3QuX19vcmlnaW5hbE1hcHBpbmdzPWUuX21hcHBpbmdzLnRvQXJyYXkoKS5zbGljZSgpLnNvcnQobi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyk7cmV0dXJuIHR9O2EucHJvdG90eXBlLl92ZXJzaW9uPTM7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEucHJvdG90eXBlLFwic291cmNlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNvdXJjZVJvb3QhPW51bGw/bi5qb2luKHRoaXMuc291cmNlUm9vdCxlKTplfSx0aGlzKX19KTthLnByb3RvdHlwZS5fcGFyc2VNYXBwaW5ncz1mdW5jdGlvbiBmKGUsdCl7dmFyIHU9MTt2YXIgcj0wO3ZhciBpPTA7dmFyIHM9MDt2YXIgYT0wO3ZhciBsPTA7dmFyIGY9ZTt2YXIgYz17fTt2YXIgcDt3aGlsZShmLmxlbmd0aD4wKXtpZihmLmNoYXJBdCgwKT09PVwiO1wiKXt1Kys7Zj1mLnNsaWNlKDEpO3I9MH1lbHNlIGlmKGYuY2hhckF0KDApPT09XCIsXCIpe2Y9Zi5zbGljZSgxKX1lbHNle3A9e307cC5nZW5lcmF0ZWRMaW5lPXU7by5kZWNvZGUoZixjKTtwLmdlbmVyYXRlZENvbHVtbj1yK2MudmFsdWU7cj1wLmdlbmVyYXRlZENvbHVtbjtmPWMucmVzdDtpZihmLmxlbmd0aD4wJiYhdGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe28uZGVjb2RlKGYsYyk7cC5zb3VyY2U9dGhpcy5fc291cmNlcy5hdChhK2MudmFsdWUpO2ErPWMudmFsdWU7Zj1jLnJlc3Q7aWYoZi5sZW5ndGg9PT0wfHx0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7dGhyb3cgbmV3IEVycm9yKFwiRm91bmQgYSBzb3VyY2UsIGJ1dCBubyBsaW5lIGFuZCBjb2x1bW5cIil9by5kZWNvZGUoZixjKTtwLm9yaWdpbmFsTGluZT1pK2MudmFsdWU7aT1wLm9yaWdpbmFsTGluZTtwLm9yaWdpbmFsTGluZSs9MTtmPWMucmVzdDtpZihmLmxlbmd0aD09PTB8fHRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXt0aHJvdyBuZXcgRXJyb3IoXCJGb3VuZCBhIHNvdXJjZSBhbmQgbGluZSwgYnV0IG5vIGNvbHVtblwiKX1vLmRlY29kZShmLGMpO3Aub3JpZ2luYWxDb2x1bW49cytjLnZhbHVlO3M9cC5vcmlnaW5hbENvbHVtbjtmPWMucmVzdDtpZihmLmxlbmd0aD4wJiYhdGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe28uZGVjb2RlKGYsYyk7cC5uYW1lPXRoaXMuX25hbWVzLmF0KGwrYy52YWx1ZSk7bCs9Yy52YWx1ZTtmPWMucmVzdH19dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzLnB1c2gocCk7aWYodHlwZW9mIHAub3JpZ2luYWxMaW5lPT09XCJudW1iZXJcIil7dGhpcy5fX29yaWdpbmFsTWFwcGluZ3MucHVzaChwKX19fXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncy5zb3J0KG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncy5zb3J0KG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpfTthLnByb3RvdHlwZS5fZmluZE1hcHBpbmc9ZnVuY3Rpb24gYyhlLHQsdSxuLGkpe2lmKGVbdV08PTApe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJMaW5lIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDEsIGdvdCBcIitlW3VdKX1pZihlW25dPDApe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDb2x1bW4gbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMCwgZ290IFwiK2Vbbl0pfXJldHVybiByLnNlYXJjaChlLHQsaSl9O2EucHJvdG90eXBlLmNvbXB1dGVDb2x1bW5TcGFucz1mdW5jdGlvbiBwKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncy5sZW5ndGg7KytlKXt2YXIgdD10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1tlXTtpZihlKzE8dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3MubGVuZ3RoKXt2YXIgdT10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1tlKzFdO2lmKHQuZ2VuZXJhdGVkTGluZT09PXUuZ2VuZXJhdGVkTGluZSl7dC5sYXN0R2VuZXJhdGVkQ29sdW1uPXUuZ2VuZXJhdGVkQ29sdW1uLTE7Y29udGludWV9fXQubGFzdEdlbmVyYXRlZENvbHVtbj1JbmZpbml0eX19O2EucHJvdG90eXBlLm9yaWdpbmFsUG9zaXRpb25Gb3I9ZnVuY3Rpb24gRChlKXt2YXIgdD17Z2VuZXJhdGVkTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxnZW5lcmF0ZWRDb2x1bW46bi5nZXRBcmcoZSxcImNvbHVtblwiKX07dmFyIHU9dGhpcy5fZmluZE1hcHBpbmcodCx0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncyxcImdlbmVyYXRlZExpbmVcIixcImdlbmVyYXRlZENvbHVtblwiLG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKTtpZih1Pj0wKXt2YXIgcj10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1t1XTtpZihyLmdlbmVyYXRlZExpbmU9PT10LmdlbmVyYXRlZExpbmUpe3ZhciBpPW4uZ2V0QXJnKHIsXCJzb3VyY2VcIixudWxsKTtpZihpIT1udWxsJiZ0aGlzLnNvdXJjZVJvb3QhPW51bGwpe2k9bi5qb2luKHRoaXMuc291cmNlUm9vdCxpKX1yZXR1cm57c291cmNlOmksbGluZTpuLmdldEFyZyhyLFwib3JpZ2luYWxMaW5lXCIsbnVsbCksY29sdW1uOm4uZ2V0QXJnKHIsXCJvcmlnaW5hbENvbHVtblwiLG51bGwpLG5hbWU6bi5nZXRBcmcocixcIm5hbWVcIixudWxsKX19fXJldHVybntzb3VyY2U6bnVsbCxsaW5lOm51bGwsY29sdW1uOm51bGwsbmFtZTpudWxsfX07YS5wcm90b3R5cGUuc291cmNlQ29udGVudEZvcj1mdW5jdGlvbiBoKGUsdCl7aWYoIXRoaXMuc291cmNlc0NvbnRlbnQpe3JldHVybiBudWxsfWlmKHRoaXMuc291cmNlUm9vdCE9bnVsbCl7ZT1uLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCxlKX1pZih0aGlzLl9zb3VyY2VzLmhhcyhlKSl7cmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKGUpXX12YXIgdTtpZih0aGlzLnNvdXJjZVJvb3QhPW51bGwmJih1PW4udXJsUGFyc2UodGhpcy5zb3VyY2VSb290KSkpe3ZhciByPWUucmVwbGFjZSgvXmZpbGU6XFwvXFwvLyxcIlwiKTtpZih1LnNjaGVtZT09XCJmaWxlXCImJnRoaXMuX3NvdXJjZXMuaGFzKHIpKXtyZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFt0aGlzLl9zb3VyY2VzLmluZGV4T2YocildfWlmKCghdS5wYXRofHx1LnBhdGg9PVwiL1wiKSYmdGhpcy5fc291cmNlcy5oYXMoXCIvXCIrZSkpe3JldHVybiB0aGlzLnNvdXJjZXNDb250ZW50W3RoaXMuX3NvdXJjZXMuaW5kZXhPZihcIi9cIitlKV19fWlmKHQpe3JldHVybiBudWxsfWVsc2V7dGhyb3cgbmV3IEVycm9yKCdcIicrZSsnXCIgaXMgbm90IGluIHRoZSBTb3VyY2VNYXAuJyl9fTthLnByb3RvdHlwZS5nZW5lcmF0ZWRQb3NpdGlvbkZvcj1mdW5jdGlvbiBtKGUpe3ZhciB0PXtzb3VyY2U6bi5nZXRBcmcoZSxcInNvdXJjZVwiKSxvcmlnaW5hbExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksb3JpZ2luYWxDb2x1bW46bi5nZXRBcmcoZSxcImNvbHVtblwiKX07aWYodGhpcy5zb3VyY2VSb290IT1udWxsKXt0LnNvdXJjZT1uLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCx0LnNvdXJjZSl9dmFyIHU9dGhpcy5fZmluZE1hcHBpbmcodCx0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFwib3JpZ2luYWxMaW5lXCIsXCJvcmlnaW5hbENvbHVtblwiLG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO2lmKHU+PTApe3ZhciByPXRoaXMuX29yaWdpbmFsTWFwcGluZ3NbdV07cmV0dXJue2xpbmU6bi5nZXRBcmcocixcImdlbmVyYXRlZExpbmVcIixudWxsKSxjb2x1bW46bi5nZXRBcmcocixcImdlbmVyYXRlZENvbHVtblwiLG51bGwpLGxhc3RDb2x1bW46bi5nZXRBcmcocixcImxhc3RHZW5lcmF0ZWRDb2x1bW5cIixudWxsKX19cmV0dXJue2xpbmU6bnVsbCxjb2x1bW46bnVsbCxsYXN0Q29sdW1uOm51bGx9fTt0LkJhc2ljU291cmNlTWFwQ29uc3VtZXI9YX0pfSx7XCIuL2FycmF5LXNldFwiOjM1LFwiLi9iYXNlNjQtdmxxXCI6MzYsXCIuL2JpbmFyeS1zZWFyY2hcIjozOSxcIi4vc291cmNlLW1hcC1jb25zdW1lclwiOjQyLFwiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSwzOTpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXtmdW5jdGlvbiBuKGUsdCx1LHIsaSl7dmFyIG89TWF0aC5mbG9vcigodC1lKS8yKStlO3ZhciBzPWkodSxyW29dLHRydWUpO2lmKHM9PT0wKXtyZXR1cm4gb31lbHNlIGlmKHM+MCl7aWYodC1vPjEpe3JldHVybiBuKG8sdCx1LHIsaSl9cmV0dXJuIG99ZWxzZXtpZihvLWU+MSl7cmV0dXJuIG4oZSxvLHUscixpKX1yZXR1cm4gZTwwPy0xOmV9fXQuc2VhcmNoPWZ1bmN0aW9uIHIoZSx0LHUpe2lmKHQubGVuZ3RoPT09MCl7cmV0dXJuLTF9cmV0dXJuIG4oLTEsdC5sZW5ndGgsZSx0LHUpfX0pfSx7YW1kZWZpbmU6NDZ9XSw0MDpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi91dGlsXCIpO3ZhciByPWUoXCIuL2JpbmFyeS1zZWFyY2hcIik7dmFyIGk9ZShcIi4vc291cmNlLW1hcC1jb25zdW1lclwiKS5Tb3VyY2VNYXBDb25zdW1lcjt2YXIgbz1lKFwiLi9iYXNpYy1zb3VyY2UtbWFwLWNvbnN1bWVyXCIpLkJhc2ljU291cmNlTWFwQ29uc3VtZXI7ZnVuY3Rpb24gcyhlKXt2YXIgdD1lO2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7dD1KU09OLnBhcnNlKGUucmVwbGFjZSgvXlxcKVxcXVxcfScvLFwiXCIpKX12YXIgdT1uLmdldEFyZyh0LFwidmVyc2lvblwiKTt2YXIgcj1uLmdldEFyZyh0LFwic2VjdGlvbnNcIik7aWYodSE9dGhpcy5fdmVyc2lvbil7dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmVyc2lvbjogXCIrdSl9dmFyIG89e2xpbmU6LTEsY29sdW1uOjB9O3RoaXMuX3NlY3Rpb25zPXIubWFwKGZ1bmN0aW9uKGUpe2lmKGUudXJsKXt0aHJvdyBuZXcgRXJyb3IoXCJTdXBwb3J0IGZvciB1cmwgZmllbGQgaW4gc2VjdGlvbnMgbm90IGltcGxlbWVudGVkLlwiKX12YXIgdD1uLmdldEFyZyhlLFwib2Zmc2V0XCIpO3ZhciB1PW4uZ2V0QXJnKHQsXCJsaW5lXCIpO3ZhciByPW4uZ2V0QXJnKHQsXCJjb2x1bW5cIik7aWYodTxvLmxpbmV8fHU9PT1vLmxpbmUmJnI8by5jb2x1bW4pe3Rocm93IG5ldyBFcnJvcihcIlNlY3Rpb24gb2Zmc2V0cyBtdXN0IGJlIG9yZGVyZWQgYW5kIG5vbi1vdmVybGFwcGluZy5cIil9bz10O3JldHVybntnZW5lcmF0ZWRPZmZzZXQ6e2dlbmVyYXRlZExpbmU6dSsxLGdlbmVyYXRlZENvbHVtbjpyKzF9LGNvbnN1bWVyOm5ldyBpKG4uZ2V0QXJnKGUsXCJtYXBcIikpfX0pfXMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpO3MucHJvdG90eXBlLmNvbnN0cnVjdG9yPWk7cy5wcm90b3R5cGUuX3ZlcnNpb249MztPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJzb3VyY2VzXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8dGhpcy5fc2VjdGlvbnMubGVuZ3RoO3QrKyl7Zm9yKHZhciB1PTA7dTx0aGlzLl9zZWN0aW9uc1t0XS5jb25zdW1lci5zb3VyY2VzLmxlbmd0aDt1Kyspe2UucHVzaCh0aGlzLl9zZWN0aW9uc1t0XS5jb25zdW1lci5zb3VyY2VzW3VdKX19cmV0dXJuIGV9fSk7cy5wcm90b3R5cGUub3JpZ2luYWxQb3NpdGlvbkZvcj1mdW5jdGlvbiBhKGUpe3ZhciB0PXtnZW5lcmF0ZWRMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLGdlbmVyYXRlZENvbHVtbjpuLmdldEFyZyhlLFwiY29sdW1uXCIpfTt2YXIgdT1yLnNlYXJjaCh0LHRoaXMuX3NlY3Rpb25zLGZ1bmN0aW9uKGUsdCl7dmFyIHU9ZS5nZW5lcmF0ZWRMaW5lLXQuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmU7aWYodSl7cmV0dXJuIHV9cmV0dXJuIGUuZ2VuZXJhdGVkQ29sdW1uLXQuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZENvbHVtbn0pO3ZhciBpPXRoaXMuX3NlY3Rpb25zW3VdO2lmKCFpKXtyZXR1cm57c291cmNlOm51bGwsbGluZTpudWxsLGNvbHVtbjpudWxsLG5hbWU6bnVsbH19cmV0dXJuIGkuY29uc3VtZXIub3JpZ2luYWxQb3NpdGlvbkZvcih7bGluZTp0LmdlbmVyYXRlZExpbmUtKGkuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmUtMSksY29sdW1uOnQuZ2VuZXJhdGVkQ29sdW1uLShpLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lPT09dC5nZW5lcmF0ZWRMaW5lP2kuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZENvbHVtbi0xOjApfSl9O3MucHJvdG90eXBlLnNvdXJjZUNvbnRlbnRGb3I9ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgdT0wO3U8dGhpcy5fc2VjdGlvbnMubGVuZ3RoO3UrKyl7dmFyIG49dGhpcy5fc2VjdGlvbnNbdV07dmFyIHI9bi5jb25zdW1lci5zb3VyY2VDb250ZW50Rm9yKGUsdHJ1ZSk7aWYocil7cmV0dXJuIHJ9fWlmKHQpe3JldHVybiBudWxsfWVsc2V7dGhyb3cgbmV3IEVycm9yKCdcIicrZSsnXCIgaXMgbm90IGluIHRoZSBTb3VyY2VNYXAuJyl9fTtzLnByb3RvdHlwZS5nZW5lcmF0ZWRQb3NpdGlvbkZvcj1mdW5jdGlvbiBmKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fc2VjdGlvbnMubGVuZ3RoO3QrKyl7dmFyIHU9dGhpcy5fc2VjdGlvbnNbdF07aWYodS5jb25zdW1lci5zb3VyY2VzLmluZGV4T2Yobi5nZXRBcmcoZSxcInNvdXJjZVwiKSk9PT0tMSl7Y29udGludWV9dmFyIHI9dS5jb25zdW1lci5nZW5lcmF0ZWRQb3NpdGlvbkZvcihlKTtpZihyKXt2YXIgaT17bGluZTpyLmxpbmUrKHUuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmUtMSksY29sdW1uOnIuY29sdW1uKyh1LmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lPT09ci5saW5lP3UuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZENvbHVtbi0xOjApfTtyZXR1cm4gaX19cmV0dXJue2xpbmU6bnVsbCxjb2x1bW46bnVsbH19O3MucHJvdG90eXBlLl9wYXJzZU1hcHBpbmdzPWZ1bmN0aW9uIGMoZSx0KXt0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3M9W107dGhpcy5fX29yaWdpbmFsTWFwcGluZ3M9W107Zm9yKHZhciB1PTA7dTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7dSsrKXt2YXIgcj10aGlzLl9zZWN0aW9uc1t1XTt2YXIgaT1yLmNvbnN1bWVyLl9nZW5lcmF0ZWRNYXBwaW5ncztmb3IodmFyIG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIHM9aVt1XTt2YXIgYT1zLnNvdXJjZTt2YXIgbD1yLmNvbnN1bWVyLnNvdXJjZVJvb3Q7aWYoYSE9bnVsbCYmbCE9bnVsbCl7YT1uLmpvaW4obCxhKX12YXIgZj17c291cmNlOmEsZ2VuZXJhdGVkTGluZTpzLmdlbmVyYXRlZExpbmUrKHIuZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmUtMSksZ2VuZXJhdGVkQ29sdW1uOnMuY29sdW1uKyhyLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lPT09cy5nZW5lcmF0ZWRMaW5lKT9yLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRDb2x1bW4tMTowLG9yaWdpbmFsTGluZTpzLm9yaWdpbmFsTGluZSxvcmlnaW5hbENvbHVtbjpzLm9yaWdpbmFsQ29sdW1uLG5hbWU6cy5uYW1lfTt0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3MucHVzaChmKTtpZih0eXBlb2YgZi5vcmlnaW5hbExpbmU9PT1cIm51bWJlclwiKXt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncy5wdXNoKGYpfX19dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzLnNvcnQobi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMpO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzLnNvcnQobi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyl9O3QuSW5kZXhlZFNvdXJjZU1hcENvbnN1bWVyPXN9KX0se1wiLi9iYXNpYy1zb3VyY2UtbWFwLWNvbnN1bWVyXCI6MzgsXCIuL2JpbmFyeS1zZWFyY2hcIjozOSxcIi4vc291cmNlLW1hcC1jb25zdW1lclwiOjQyLFwiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSw0MTpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi91dGlsXCIpO2Z1bmN0aW9uIHIoZSx0KXt2YXIgdT1lLmdlbmVyYXRlZExpbmU7dmFyIHI9dC5nZW5lcmF0ZWRMaW5lO3ZhciBpPWUuZ2VuZXJhdGVkQ29sdW1uO3ZhciBvPXQuZ2VuZXJhdGVkQ29sdW1uO3JldHVybiByPnV8fHI9PXUmJm8+PWl8fG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKGUsdCk8PTB9ZnVuY3Rpb24gaSgpe3RoaXMuX2FycmF5PVtdO3RoaXMuX3NvcnRlZD10cnVlO3RoaXMuX2xhc3Q9e2dlbmVyYXRlZExpbmU6LTEsZ2VuZXJhdGVkQ29sdW1uOjB9fWkucHJvdG90eXBlLnVuc29ydGVkRm9yRWFjaD1mdW5jdGlvbiBvKGUsdCl7dGhpcy5fYXJyYXkuZm9yRWFjaChlLHQpfTtpLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24gcyhlKXt2YXIgdDtpZihyKHRoaXMuX2xhc3QsZSkpe3RoaXMuX2xhc3Q9ZTt0aGlzLl9hcnJheS5wdXNoKGUpfWVsc2V7dGhpcy5fc29ydGVkPWZhbHNlO3RoaXMuX2FycmF5LnB1c2goZSl9fTtpLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uIGEoKXtpZighdGhpcy5fc29ydGVkKXt0aGlzLl9hcnJheS5zb3J0KG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKTt0aGlzLl9zb3J0ZWQ9dHJ1ZX1yZXR1cm4gdGhpcy5fYXJyYXl9O3QuTWFwcGluZ0xpc3Q9aX0pfSx7XCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDQyOltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3V0aWxcIik7ZnVuY3Rpb24gcih0KXt2YXIgdT10O2lmKHR5cGVvZiB0PT09XCJzdHJpbmdcIil7dT1KU09OLnBhcnNlKHQucmVwbGFjZSgvXlxcKVxcXVxcfScvLFwiXCIpKX1pZih1LnNlY3Rpb25zIT1udWxsKXt2YXIgbj1lKFwiLi9pbmRleGVkLXNvdXJjZS1tYXAtY29uc3VtZXJcIik7cmV0dXJuIG5ldyBuLkluZGV4ZWRTb3VyY2VNYXBDb25zdW1lcih1KX1lbHNle3ZhciByPWUoXCIuL2Jhc2ljLXNvdXJjZS1tYXAtY29uc3VtZXJcIik7cmV0dXJuIG5ldyByLkJhc2ljU291cmNlTWFwQ29uc3VtZXIodSl9fXIuZnJvbVNvdXJjZU1hcD1mdW5jdGlvbih0KXt2YXIgdT1lKFwiLi9iYXNpYy1zb3VyY2UtbWFwLWNvbnN1bWVyXCIpO3JldHVybiB1LkJhc2ljU291cmNlTWFwQ29uc3VtZXIuZnJvbVNvdXJjZU1hcCh0KX07ci5wcm90b3R5cGUuX3ZlcnNpb249MztyLnByb3RvdHlwZS5fX2dlbmVyYXRlZE1hcHBpbmdzPW51bGw7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiX2dlbmVyYXRlZE1hcHBpbmdzXCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3Mpe3RoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncz1bXTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncz1bXTt0aGlzLl9wYXJzZU1hcHBpbmdzKHRoaXMuX21hcHBpbmdzLHRoaXMuc291cmNlUm9vdCl9cmV0dXJuIHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5nc319KTtyLnByb3RvdHlwZS5fX29yaWdpbmFsTWFwcGluZ3M9bnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJfb3JpZ2luYWxNYXBwaW5nc1wiLHtnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fX29yaWdpbmFsTWFwcGluZ3Mpe3RoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncz1bXTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncz1bXTt0aGlzLl9wYXJzZU1hcHBpbmdzKHRoaXMuX21hcHBpbmdzLHRoaXMuc291cmNlUm9vdCl9cmV0dXJuIHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzfX0pO3IucHJvdG90eXBlLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcj1mdW5jdGlvbiBpKGUpe3ZhciB0PWUuY2hhckF0KDApO3JldHVybiB0PT09XCI7XCJ8fHQ9PT1cIixcIn07ci5wcm90b3R5cGUuX3BhcnNlTWFwcGluZ3M9ZnVuY3Rpb24gbyhlLHQpe3Rocm93IG5ldyBFcnJvcihcIlN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnQgX3BhcnNlTWFwcGluZ3NcIil9O3IuR0VORVJBVEVEX09SREVSPTE7ci5PUklHSU5BTF9PUkRFUj0yO3IucHJvdG90eXBlLmVhY2hNYXBwaW5nPWZ1bmN0aW9uIHMoZSx0LHUpe3ZhciBpPXR8fG51bGw7dmFyIG89dXx8ci5HRU5FUkFURURfT1JERVI7dmFyIHM7c3dpdGNoKG8pe2Nhc2Ugci5HRU5FUkFURURfT1JERVI6cz10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nczticmVhaztjYXNlIHIuT1JJR0lOQUxfT1JERVI6cz10aGlzLl9vcmlnaW5hbE1hcHBpbmdzO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBvcmRlciBvZiBpdGVyYXRpb24uXCIpfXZhciBhPXRoaXMuc291cmNlUm9vdDtzLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnNvdXJjZTtpZih0IT1udWxsJiZhIT1udWxsKXt0PW4uam9pbihhLHQpfXJldHVybntzb3VyY2U6dCxnZW5lcmF0ZWRMaW5lOmUuZ2VuZXJhdGVkTGluZSxnZW5lcmF0ZWRDb2x1bW46ZS5nZW5lcmF0ZWRDb2x1bW4sb3JpZ2luYWxMaW5lOmUub3JpZ2luYWxMaW5lLG9yaWdpbmFsQ29sdW1uOmUub3JpZ2luYWxDb2x1bW4sbmFtZTplLm5hbWV9fSkuZm9yRWFjaChlLGkpfTtyLnByb3RvdHlwZS5hbGxHZW5lcmF0ZWRQb3NpdGlvbnNGb3I9ZnVuY3Rpb24gYShlKXt2YXIgdD17c291cmNlOm4uZ2V0QXJnKGUsXCJzb3VyY2VcIiksb3JpZ2luYWxMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLG9yaWdpbmFsQ29sdW1uOkluZmluaXR5fTtpZih0aGlzLnNvdXJjZVJvb3QhPW51bGwpe3Quc291cmNlPW4ucmVsYXRpdmUodGhpcy5zb3VyY2VSb290LHQuc291cmNlKX12YXIgdT1bXTt2YXIgcj10aGlzLl9maW5kTWFwcGluZyh0LHRoaXMuX29yaWdpbmFsTWFwcGluZ3MsXCJvcmlnaW5hbExpbmVcIixcIm9yaWdpbmFsQ29sdW1uXCIsbi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyk7aWYocj49MCl7dmFyIGk9dGhpcy5fb3JpZ2luYWxNYXBwaW5nc1tyXTt3aGlsZShpJiZpLm9yaWdpbmFsTGluZT09PXQub3JpZ2luYWxMaW5lKXt1LnB1c2goe2xpbmU6bi5nZXRBcmcoaSxcImdlbmVyYXRlZExpbmVcIixudWxsKSxjb2x1bW46bi5nZXRBcmcoaSxcImdlbmVyYXRlZENvbHVtblwiLG51bGwpLGxhc3RDb2x1bW46bi5nZXRBcmcoaSxcImxhc3RHZW5lcmF0ZWRDb2x1bW5cIixudWxsKX0pO2k9dGhpcy5fb3JpZ2luYWxNYXBwaW5nc1stLXJdfX1yZXR1cm4gdS5yZXZlcnNlKCl9O3QuU291cmNlTWFwQ29uc3VtZXI9cn0pfSx7XCIuL2Jhc2ljLXNvdXJjZS1tYXAtY29uc3VtZXJcIjozOCxcIi4vaW5kZXhlZC1zb3VyY2UtbWFwLWNvbnN1bWVyXCI6NDAsXCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDQzOltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL2Jhc2U2NC12bHFcIik7dmFyIHI9ZShcIi4vdXRpbFwiKTtcbnZhciBpPWUoXCIuL2FycmF5LXNldFwiKS5BcnJheVNldDt2YXIgbz1lKFwiLi9tYXBwaW5nLWxpc3RcIikuTWFwcGluZ0xpc3Q7ZnVuY3Rpb24gcyhlKXtpZighZSl7ZT17fX10aGlzLl9maWxlPXIuZ2V0QXJnKGUsXCJmaWxlXCIsbnVsbCk7dGhpcy5fc291cmNlUm9vdD1yLmdldEFyZyhlLFwic291cmNlUm9vdFwiLG51bGwpO3RoaXMuX3NraXBWYWxpZGF0aW9uPXIuZ2V0QXJnKGUsXCJza2lwVmFsaWRhdGlvblwiLGZhbHNlKTt0aGlzLl9zb3VyY2VzPW5ldyBpO3RoaXMuX25hbWVzPW5ldyBpO3RoaXMuX21hcHBpbmdzPW5ldyBvO3RoaXMuX3NvdXJjZXNDb250ZW50cz1udWxsfXMucHJvdG90eXBlLl92ZXJzaW9uPTM7cy5mcm9tU291cmNlTWFwPWZ1bmN0aW9uIGEoZSl7dmFyIHQ9ZS5zb3VyY2VSb290O3ZhciB1PW5ldyBzKHtmaWxlOmUuZmlsZSxzb3VyY2VSb290OnR9KTtlLmVhY2hNYXBwaW5nKGZ1bmN0aW9uKGUpe3ZhciBuPXtnZW5lcmF0ZWQ6e2xpbmU6ZS5nZW5lcmF0ZWRMaW5lLGNvbHVtbjplLmdlbmVyYXRlZENvbHVtbn19O2lmKGUuc291cmNlIT1udWxsKXtuLnNvdXJjZT1lLnNvdXJjZTtpZih0IT1udWxsKXtuLnNvdXJjZT1yLnJlbGF0aXZlKHQsbi5zb3VyY2UpfW4ub3JpZ2luYWw9e2xpbmU6ZS5vcmlnaW5hbExpbmUsY29sdW1uOmUub3JpZ2luYWxDb2x1bW59O2lmKGUubmFtZSE9bnVsbCl7bi5uYW1lPWUubmFtZX19dS5hZGRNYXBwaW5nKG4pfSk7ZS5zb3VyY2VzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5zb3VyY2VDb250ZW50Rm9yKHQpO2lmKG4hPW51bGwpe3Uuc2V0U291cmNlQ29udGVudCh0LG4pfX0pO3JldHVybiB1fTtzLnByb3RvdHlwZS5hZGRNYXBwaW5nPWZ1bmN0aW9uIGwoZSl7dmFyIHQ9ci5nZXRBcmcoZSxcImdlbmVyYXRlZFwiKTt2YXIgdT1yLmdldEFyZyhlLFwib3JpZ2luYWxcIixudWxsKTt2YXIgbj1yLmdldEFyZyhlLFwic291cmNlXCIsbnVsbCk7dmFyIGk9ci5nZXRBcmcoZSxcIm5hbWVcIixudWxsKTtpZighdGhpcy5fc2tpcFZhbGlkYXRpb24pe3RoaXMuX3ZhbGlkYXRlTWFwcGluZyh0LHUsbixpKX1pZihuIT1udWxsJiYhdGhpcy5fc291cmNlcy5oYXMobikpe3RoaXMuX3NvdXJjZXMuYWRkKG4pfWlmKGkhPW51bGwmJiF0aGlzLl9uYW1lcy5oYXMoaSkpe3RoaXMuX25hbWVzLmFkZChpKX10aGlzLl9tYXBwaW5ncy5hZGQoe2dlbmVyYXRlZExpbmU6dC5saW5lLGdlbmVyYXRlZENvbHVtbjp0LmNvbHVtbixvcmlnaW5hbExpbmU6dSE9bnVsbCYmdS5saW5lLG9yaWdpbmFsQ29sdW1uOnUhPW51bGwmJnUuY29sdW1uLHNvdXJjZTpuLG5hbWU6aX0pfTtzLnByb3RvdHlwZS5zZXRTb3VyY2VDb250ZW50PWZ1bmN0aW9uIGYoZSx0KXt2YXIgdT1lO2lmKHRoaXMuX3NvdXJjZVJvb3QhPW51bGwpe3U9ci5yZWxhdGl2ZSh0aGlzLl9zb3VyY2VSb290LHUpfWlmKHQhPW51bGwpe2lmKCF0aGlzLl9zb3VyY2VzQ29udGVudHMpe3RoaXMuX3NvdXJjZXNDb250ZW50cz17fX10aGlzLl9zb3VyY2VzQ29udGVudHNbci50b1NldFN0cmluZyh1KV09dH1lbHNlIGlmKHRoaXMuX3NvdXJjZXNDb250ZW50cyl7ZGVsZXRlIHRoaXMuX3NvdXJjZXNDb250ZW50c1tyLnRvU2V0U3RyaW5nKHUpXTtpZihPYmplY3Qua2V5cyh0aGlzLl9zb3VyY2VzQ29udGVudHMpLmxlbmd0aD09PTApe3RoaXMuX3NvdXJjZXNDb250ZW50cz1udWxsfX19O3MucHJvdG90eXBlLmFwcGx5U291cmNlTWFwPWZ1bmN0aW9uIGMoZSx0LHUpe3ZhciBuPXQ7aWYodD09bnVsbCl7aWYoZS5maWxlPT1udWxsKXt0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLmFwcGx5U291cmNlTWFwIHJlcXVpcmVzIGVpdGhlciBhbiBleHBsaWNpdCBzb3VyY2UgZmlsZSwgXCIrJ29yIHRoZSBzb3VyY2UgbWFwXFwncyBcImZpbGVcIiBwcm9wZXJ0eS4gQm90aCB3ZXJlIG9taXR0ZWQuJyl9bj1lLmZpbGV9dmFyIG89dGhpcy5fc291cmNlUm9vdDtpZihvIT1udWxsKXtuPXIucmVsYXRpdmUobyxuKX12YXIgcz1uZXcgaTt2YXIgYT1uZXcgaTt0aGlzLl9tYXBwaW5ncy51bnNvcnRlZEZvckVhY2goZnVuY3Rpb24odCl7aWYodC5zb3VyY2U9PT1uJiZ0Lm9yaWdpbmFsTGluZSE9bnVsbCl7dmFyIGk9ZS5vcmlnaW5hbFBvc2l0aW9uRm9yKHtsaW5lOnQub3JpZ2luYWxMaW5lLGNvbHVtbjp0Lm9yaWdpbmFsQ29sdW1ufSk7aWYoaS5zb3VyY2UhPW51bGwpe3Quc291cmNlPWkuc291cmNlO2lmKHUhPW51bGwpe3Quc291cmNlPXIuam9pbih1LHQuc291cmNlKX1pZihvIT1udWxsKXt0LnNvdXJjZT1yLnJlbGF0aXZlKG8sdC5zb3VyY2UpfXQub3JpZ2luYWxMaW5lPWkubGluZTt0Lm9yaWdpbmFsQ29sdW1uPWkuY29sdW1uO2lmKGkubmFtZSE9bnVsbCl7dC5uYW1lPWkubmFtZX19fXZhciBsPXQuc291cmNlO2lmKGwhPW51bGwmJiFzLmhhcyhsKSl7cy5hZGQobCl9dmFyIGY9dC5uYW1lO2lmKGYhPW51bGwmJiFhLmhhcyhmKSl7YS5hZGQoZil9fSx0aGlzKTt0aGlzLl9zb3VyY2VzPXM7dGhpcy5fbmFtZXM9YTtlLnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lLnNvdXJjZUNvbnRlbnRGb3IodCk7aWYobiE9bnVsbCl7aWYodSE9bnVsbCl7dD1yLmpvaW4odSx0KX1pZihvIT1udWxsKXt0PXIucmVsYXRpdmUobyx0KX10aGlzLnNldFNvdXJjZUNvbnRlbnQodCxuKX19LHRoaXMpfTtzLnByb3RvdHlwZS5fdmFsaWRhdGVNYXBwaW5nPWZ1bmN0aW9uIHAoZSx0LHUsbil7aWYoZSYmXCJsaW5lXCJpbiBlJiZcImNvbHVtblwiaW4gZSYmZS5saW5lPjAmJmUuY29sdW1uPj0wJiYhdCYmIXUmJiFuKXtyZXR1cm59ZWxzZSBpZihlJiZcImxpbmVcImluIGUmJlwiY29sdW1uXCJpbiBlJiZ0JiZcImxpbmVcImluIHQmJlwiY29sdW1uXCJpbiB0JiZlLmxpbmU+MCYmZS5jb2x1bW4+PTAmJnQubGluZT4wJiZ0LmNvbHVtbj49MCYmdSl7cmV0dXJufWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtYXBwaW5nOiBcIitKU09OLnN0cmluZ2lmeSh7Z2VuZXJhdGVkOmUsc291cmNlOnUsb3JpZ2luYWw6dCxuYW1lOm59KSl9fTtzLnByb3RvdHlwZS5fc2VyaWFsaXplTWFwcGluZ3M9ZnVuY3Rpb24gRCgpe3ZhciBlPTA7dmFyIHQ9MTt2YXIgdT0wO3ZhciBpPTA7dmFyIG89MDt2YXIgcz0wO3ZhciBhPVwiXCI7dmFyIGw7dmFyIGY9dGhpcy5fbWFwcGluZ3MudG9BcnJheSgpO2Zvcih2YXIgYz0wLHA9Zi5sZW5ndGg7YzxwO2MrKyl7bD1mW2NdO2lmKGwuZ2VuZXJhdGVkTGluZSE9PXQpe2U9MDt3aGlsZShsLmdlbmVyYXRlZExpbmUhPT10KXthKz1cIjtcIjt0Kyt9fWVsc2V7aWYoYz4wKXtpZighci5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMobCxmW2MtMV0pKXtjb250aW51ZX1hKz1cIixcIn19YSs9bi5lbmNvZGUobC5nZW5lcmF0ZWRDb2x1bW4tZSk7ZT1sLmdlbmVyYXRlZENvbHVtbjtpZihsLnNvdXJjZSE9bnVsbCl7YSs9bi5lbmNvZGUodGhpcy5fc291cmNlcy5pbmRleE9mKGwuc291cmNlKS1zKTtzPXRoaXMuX3NvdXJjZXMuaW5kZXhPZihsLnNvdXJjZSk7YSs9bi5lbmNvZGUobC5vcmlnaW5hbExpbmUtMS1pKTtpPWwub3JpZ2luYWxMaW5lLTE7YSs9bi5lbmNvZGUobC5vcmlnaW5hbENvbHVtbi11KTt1PWwub3JpZ2luYWxDb2x1bW47aWYobC5uYW1lIT1udWxsKXthKz1uLmVuY29kZSh0aGlzLl9uYW1lcy5pbmRleE9mKGwubmFtZSktbyk7bz10aGlzLl9uYW1lcy5pbmRleE9mKGwubmFtZSl9fX1yZXR1cm4gYX07cy5wcm90b3R5cGUuX2dlbmVyYXRlU291cmNlc0NvbnRlbnQ9ZnVuY3Rpb24gaChlLHQpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtpZighdGhpcy5fc291cmNlc0NvbnRlbnRzKXtyZXR1cm4gbnVsbH1pZih0IT1udWxsKXtlPXIucmVsYXRpdmUodCxlKX12YXIgdT1yLnRvU2V0U3RyaW5nKGUpO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fc291cmNlc0NvbnRlbnRzLHUpP3RoaXMuX3NvdXJjZXNDb250ZW50c1t1XTpudWxsfSx0aGlzKX07cy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uIG0oKXt2YXIgZT17dmVyc2lvbjp0aGlzLl92ZXJzaW9uLHNvdXJjZXM6dGhpcy5fc291cmNlcy50b0FycmF5KCksbmFtZXM6dGhpcy5fbmFtZXMudG9BcnJheSgpLG1hcHBpbmdzOnRoaXMuX3NlcmlhbGl6ZU1hcHBpbmdzKCl9O2lmKHRoaXMuX2ZpbGUhPW51bGwpe2UuZmlsZT10aGlzLl9maWxlfWlmKHRoaXMuX3NvdXJjZVJvb3QhPW51bGwpe2Uuc291cmNlUm9vdD10aGlzLl9zb3VyY2VSb290fWlmKHRoaXMuX3NvdXJjZXNDb250ZW50cyl7ZS5zb3VyY2VzQ29udGVudD10aGlzLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50KGUuc291cmNlcyxlLnNvdXJjZVJvb3QpfXJldHVybiBlfTtzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiBkKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMpfTt0LlNvdXJjZU1hcEdlbmVyYXRvcj1zfSl9LHtcIi4vYXJyYXktc2V0XCI6MzUsXCIuL2Jhc2U2NC12bHFcIjozNixcIi4vbWFwcGluZy1saXN0XCI6NDEsXCIuL3V0aWxcIjo0NSxhbWRlZmluZTo0Nn1dLDQ0OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3NvdXJjZS1tYXAtZ2VuZXJhdG9yXCIpLlNvdXJjZU1hcEdlbmVyYXRvcjt2YXIgcj1lKFwiLi91dGlsXCIpO3ZhciBpPS8oXFxyP1xcbikvO3ZhciBvPTEwO3ZhciBzPVwiJCQkaXNTb3VyY2VOb2RlJCQkXCI7ZnVuY3Rpb24gYShlLHQsdSxuLHIpe3RoaXMuY2hpbGRyZW49W107dGhpcy5zb3VyY2VDb250ZW50cz17fTt0aGlzLmxpbmU9ZT09bnVsbD9udWxsOmU7dGhpcy5jb2x1bW49dD09bnVsbD9udWxsOnQ7dGhpcy5zb3VyY2U9dT09bnVsbD9udWxsOnU7dGhpcy5uYW1lPXI9PW51bGw/bnVsbDpyO3RoaXNbc109dHJ1ZTtpZihuIT1udWxsKXRoaXMuYWRkKG4pfWEuZnJvbVN0cmluZ1dpdGhTb3VyY2VNYXA9ZnVuY3Rpb24gbChlLHQsdSl7dmFyIG49bmV3IGE7dmFyIG89ZS5zcGxpdChpKTt2YXIgcz1mdW5jdGlvbigpe3ZhciBlPW8uc2hpZnQoKTt2YXIgdD1vLnNoaWZ0KCl8fFwiXCI7cmV0dXJuIGUrdH07dmFyIGw9MSxmPTA7dmFyIGM9bnVsbDt0LmVhY2hNYXBwaW5nKGZ1bmN0aW9uKGUpe2lmKGMhPT1udWxsKXtpZihsPGUuZ2VuZXJhdGVkTGluZSl7dmFyIHQ9XCJcIjtwKGMscygpKTtsKys7Zj0wfWVsc2V7dmFyIHU9b1swXTt2YXIgdD11LnN1YnN0cigwLGUuZ2VuZXJhdGVkQ29sdW1uLWYpO29bMF09dS5zdWJzdHIoZS5nZW5lcmF0ZWRDb2x1bW4tZik7Zj1lLmdlbmVyYXRlZENvbHVtbjtwKGMsdCk7Yz1lO3JldHVybn19d2hpbGUobDxlLmdlbmVyYXRlZExpbmUpe24uYWRkKHMoKSk7bCsrfWlmKGY8ZS5nZW5lcmF0ZWRDb2x1bW4pe3ZhciB1PW9bMF07bi5hZGQodS5zdWJzdHIoMCxlLmdlbmVyYXRlZENvbHVtbikpO29bMF09dS5zdWJzdHIoZS5nZW5lcmF0ZWRDb2x1bW4pO2Y9ZS5nZW5lcmF0ZWRDb2x1bW59Yz1lfSx0aGlzKTtpZihvLmxlbmd0aD4wKXtpZihjKXtwKGMscygpKX1uLmFkZChvLmpvaW4oXCJcIikpfXQuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPXQuc291cmNlQ29udGVudEZvcihlKTtpZihpIT1udWxsKXtpZih1IT1udWxsKXtlPXIuam9pbih1LGUpfW4uc2V0U291cmNlQ29udGVudChlLGkpfX0pO3JldHVybiBuO2Z1bmN0aW9uIHAoZSx0KXtpZihlPT09bnVsbHx8ZS5zb3VyY2U9PT11bmRlZmluZWQpe24uYWRkKHQpfWVsc2V7dmFyIGk9dT9yLmpvaW4odSxlLnNvdXJjZSk6ZS5zb3VyY2U7bi5hZGQobmV3IGEoZS5vcmlnaW5hbExpbmUsZS5vcmlnaW5hbENvbHVtbixpLHQsZS5uYW1lKSl9fX07YS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uIGYoZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuYWRkKGUpfSx0aGlzKX1lbHNlIGlmKGVbc118fHR5cGVvZiBlPT09XCJzdHJpbmdcIil7aWYoZSl7dGhpcy5jaGlsZHJlbi5wdXNoKGUpfX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBhIFNvdXJjZU5vZGUsIHN0cmluZywgb3IgYW4gYXJyYXkgb2YgU291cmNlTm9kZXMgYW5kIHN0cmluZ3MuIEdvdCBcIitlKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUucHJlcGVuZD1mdW5jdGlvbiBjKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD1lLmxlbmd0aC0xO3Q+PTA7dC0tKXt0aGlzLnByZXBlbmQoZVt0XSl9fWVsc2UgaWYoZVtzXXx8dHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0aGlzLmNoaWxkcmVuLnVuc2hpZnQoZSl9ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgYSBTb3VyY2VOb2RlLCBzdHJpbmcsIG9yIGFuIGFycmF5IG9mIFNvdXJjZU5vZGVzIGFuZCBzdHJpbmdzLiBHb3QgXCIrZSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLndhbGs9ZnVuY3Rpb24gcChlKXt2YXIgdDtmb3IodmFyIHU9MCxuPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO3U8bjt1Kyspe3Q9dGhpcy5jaGlsZHJlblt1XTtpZih0W3NdKXt0LndhbGsoZSl9ZWxzZXtpZih0IT09XCJcIil7ZSh0LHtzb3VyY2U6dGhpcy5zb3VyY2UsbGluZTp0aGlzLmxpbmUsY29sdW1uOnRoaXMuY29sdW1uLG5hbWU6dGhpcy5uYW1lfSl9fX19O2EucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24gRChlKXt2YXIgdDt2YXIgdTt2YXIgbj10aGlzLmNoaWxkcmVuLmxlbmd0aDtpZihuPjApe3Q9W107Zm9yKHU9MDt1PG4tMTt1Kyspe3QucHVzaCh0aGlzLmNoaWxkcmVuW3VdKTt0LnB1c2goZSl9dC5wdXNoKHRoaXMuY2hpbGRyZW5bdV0pO3RoaXMuY2hpbGRyZW49dH1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUucmVwbGFjZVJpZ2h0PWZ1bmN0aW9uIGgoZSx0KXt2YXIgdT10aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoLTFdO2lmKHVbc10pe3UucmVwbGFjZVJpZ2h0KGUsdCl9ZWxzZSBpZih0eXBlb2YgdT09PVwic3RyaW5nXCIpe3RoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGgtMV09dS5yZXBsYWNlKGUsdCl9ZWxzZXt0aGlzLmNoaWxkcmVuLnB1c2goXCJcIi5yZXBsYWNlKGUsdCkpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRTb3VyY2VDb250ZW50PWZ1bmN0aW9uIG0oZSx0KXt0aGlzLnNvdXJjZUNvbnRlbnRzW3IudG9TZXRTdHJpbmcoZSldPXR9O2EucHJvdG90eXBlLndhbGtTb3VyY2VDb250ZW50cz1mdW5jdGlvbiBkKGUpe2Zvcih2YXIgdD0wLHU9dGhpcy5jaGlsZHJlbi5sZW5ndGg7dDx1O3QrKyl7aWYodGhpcy5jaGlsZHJlblt0XVtzXSl7dGhpcy5jaGlsZHJlblt0XS53YWxrU291cmNlQ29udGVudHMoZSl9fXZhciBuPU9iamVjdC5rZXlzKHRoaXMuc291cmNlQ29udGVudHMpO2Zvcih2YXIgdD0wLHU9bi5sZW5ndGg7dDx1O3QrKyl7ZShyLmZyb21TZXRTdHJpbmcoblt0XSksdGhpcy5zb3VyY2VDb250ZW50c1tuW3RdXSl9fTthLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiBBKCl7dmFyIGU9XCJcIjt0aGlzLndhbGsoZnVuY3Rpb24odCl7ZSs9dH0pO3JldHVybiBlfTthLnByb3RvdHlwZS50b1N0cmluZ1dpdGhTb3VyY2VNYXA9ZnVuY3Rpb24gQyhlKXt2YXIgdD17Y29kZTpcIlwiLGxpbmU6MSxjb2x1bW46MH07dmFyIHU9bmV3IG4oZSk7dmFyIHI9ZmFsc2U7dmFyIGk9bnVsbDt2YXIgcz1udWxsO3ZhciBhPW51bGw7dmFyIGw9bnVsbDt0aGlzLndhbGsoZnVuY3Rpb24oZSxuKXt0LmNvZGUrPWU7aWYobi5zb3VyY2UhPT1udWxsJiZuLmxpbmUhPT1udWxsJiZuLmNvbHVtbiE9PW51bGwpe2lmKGkhPT1uLnNvdXJjZXx8cyE9PW4ubGluZXx8YSE9PW4uY29sdW1ufHxsIT09bi5uYW1lKXt1LmFkZE1hcHBpbmcoe3NvdXJjZTpuLnNvdXJjZSxvcmlnaW5hbDp7bGluZTpuLmxpbmUsY29sdW1uOm4uY29sdW1ufSxnZW5lcmF0ZWQ6e2xpbmU6dC5saW5lLGNvbHVtbjp0LmNvbHVtbn0sbmFtZTpuLm5hbWV9KX1pPW4uc291cmNlO3M9bi5saW5lO2E9bi5jb2x1bW47bD1uLm5hbWU7cj10cnVlfWVsc2UgaWYocil7dS5hZGRNYXBwaW5nKHtnZW5lcmF0ZWQ6e2xpbmU6dC5saW5lLGNvbHVtbjp0LmNvbHVtbn19KTtpPW51bGw7cj1mYWxzZX1mb3IodmFyIGY9MCxjPWUubGVuZ3RoO2Y8YztmKyspe2lmKGUuY2hhckNvZGVBdChmKT09PW8pe3QubGluZSsrO3QuY29sdW1uPTA7aWYoZisxPT09Yyl7aT1udWxsO3I9ZmFsc2V9ZWxzZSBpZihyKXt1LmFkZE1hcHBpbmcoe3NvdXJjZTpuLnNvdXJjZSxvcmlnaW5hbDp7bGluZTpuLmxpbmUsY29sdW1uOm4uY29sdW1ufSxnZW5lcmF0ZWQ6e2xpbmU6dC5saW5lLGNvbHVtbjp0LmNvbHVtbn0sbmFtZTpuLm5hbWV9KX19ZWxzZXt0LmNvbHVtbisrfX19KTt0aGlzLndhbGtTb3VyY2VDb250ZW50cyhmdW5jdGlvbihlLHQpe3Uuc2V0U291cmNlQ29udGVudChlLHQpfSk7cmV0dXJue2NvZGU6dC5jb2RlLG1hcDp1fX07dC5Tb3VyY2VOb2RlPWF9KX0se1wiLi9zb3VyY2UtbWFwLWdlbmVyYXRvclwiOjQzLFwiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSw0NTpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXtmdW5jdGlvbiBuKGUsdCx1KXtpZih0IGluIGUpe3JldHVybiBlW3RdfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09PTMpe3JldHVybiB1fWVsc2V7dGhyb3cgbmV3IEVycm9yKCdcIicrdCsnXCIgaXMgYSByZXF1aXJlZCBhcmd1bWVudC4nKX19dC5nZXRBcmc9bjt2YXIgcj0vXig/OihbXFx3K1xcLS5dKyk6KT9cXC9cXC8oPzooXFx3KzpcXHcrKUApPyhbXFx3Ll0qKSg/OjooXFxkKykpPyhcXFMqKSQvO3ZhciBpPS9eZGF0YTouK1xcLC4rJC87ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLm1hdGNoKHIpO2lmKCF0KXtyZXR1cm4gbnVsbH1yZXR1cm57c2NoZW1lOnRbMV0sYXV0aDp0WzJdLGhvc3Q6dFszXSxwb3J0OnRbNF0scGF0aDp0WzVdfX10LnVybFBhcnNlPW87ZnVuY3Rpb24gcyhlKXt2YXIgdD1cIlwiO2lmKGUuc2NoZW1lKXt0Kz1lLnNjaGVtZStcIjpcIn10Kz1cIi8vXCI7aWYoZS5hdXRoKXt0Kz1lLmF1dGgrXCJAXCJ9aWYoZS5ob3N0KXt0Kz1lLmhvc3R9aWYoZS5wb3J0KXt0Kz1cIjpcIitlLnBvcnR9aWYoZS5wYXRoKXt0Kz1lLnBhdGh9cmV0dXJuIHR9dC51cmxHZW5lcmF0ZT1zO2Z1bmN0aW9uIGEoZSl7dmFyIHQ9ZTt2YXIgdT1vKGUpO2lmKHUpe2lmKCF1LnBhdGgpe3JldHVybiBlfXQ9dS5wYXRofXZhciBuPXQuY2hhckF0KDApPT09XCIvXCI7dmFyIHI9dC5zcGxpdCgvXFwvKy8pO2Zvcih2YXIgaSxhPTAsbD1yLmxlbmd0aC0xO2w+PTA7bC0tKXtpPXJbbF07aWYoaT09PVwiLlwiKXtyLnNwbGljZShsLDEpfWVsc2UgaWYoaT09PVwiLi5cIil7YSsrfWVsc2UgaWYoYT4wKXtpZihpPT09XCJcIil7ci5zcGxpY2UobCsxLGEpO2E9MH1lbHNle3Iuc3BsaWNlKGwsMik7YS0tfX19dD1yLmpvaW4oXCIvXCIpO2lmKHQ9PT1cIlwiKXt0PW4/XCIvXCI6XCIuXCJ9aWYodSl7dS5wYXRoPXQ7cmV0dXJuIHModSl9cmV0dXJuIHR9dC5ub3JtYWxpemU9YTtmdW5jdGlvbiBsKGUsdCl7aWYoZT09PVwiXCIpe2U9XCIuXCJ9aWYodD09PVwiXCIpe3Q9XCIuXCJ9dmFyIHU9byh0KTt2YXIgbj1vKGUpO2lmKG4pe2U9bi5wYXRofHxcIi9cIn1pZih1JiYhdS5zY2hlbWUpe2lmKG4pe3Uuc2NoZW1lPW4uc2NoZW1lfXJldHVybiBzKHUpfWlmKHV8fHQubWF0Y2goaSkpe3JldHVybiB0fWlmKG4mJiFuLmhvc3QmJiFuLnBhdGgpe24uaG9zdD10O3JldHVybiBzKG4pfXZhciByPXQuY2hhckF0KDApPT09XCIvXCI/dDphKGUucmVwbGFjZSgvXFwvKyQvLFwiXCIpK1wiL1wiK3QpO2lmKG4pe24ucGF0aD1yO3JldHVybiBzKG4pfXJldHVybiByfXQuam9pbj1sO2Z1bmN0aW9uIGYoZSx0KXtpZihlPT09XCJcIil7ZT1cIi5cIn1lPWUucmVwbGFjZSgvXFwvJC8sXCJcIik7dmFyIHU9byhlKTtpZih0LmNoYXJBdCgwKT09XCIvXCImJnUmJnUucGF0aD09XCIvXCIpe3JldHVybiB0LnNsaWNlKDEpfXJldHVybiB0LmluZGV4T2YoZStcIi9cIik9PT0wP3Quc3Vic3RyKGUubGVuZ3RoKzEpOnR9dC5yZWxhdGl2ZT1mO2Z1bmN0aW9uIGMoZSl7cmV0dXJuXCIkXCIrZX10LnRvU2V0U3RyaW5nPWM7ZnVuY3Rpb24gcChlKXtyZXR1cm4gZS5zdWJzdHIoMSl9dC5mcm9tU2V0U3RyaW5nPXA7ZnVuY3Rpb24gRChlLHQpe3ZhciB1PWV8fFwiXCI7dmFyIG49dHx8XCJcIjtyZXR1cm4odT5uKS0odTxuKX1mdW5jdGlvbiBoKGUsdCx1KXt2YXIgbjtuPUQoZS5zb3VyY2UsdC5zb3VyY2UpO2lmKG4pe3JldHVybiBufW49ZS5vcmlnaW5hbExpbmUtdC5vcmlnaW5hbExpbmU7aWYobil7cmV0dXJuIG59bj1lLm9yaWdpbmFsQ29sdW1uLXQub3JpZ2luYWxDb2x1bW47aWYobnx8dSl7cmV0dXJuIG59bj1EKGUubmFtZSx0Lm5hbWUpO2lmKG4pe3JldHVybiBufW49ZS5nZW5lcmF0ZWRMaW5lLXQuZ2VuZXJhdGVkTGluZTtpZihuKXtyZXR1cm4gbn1yZXR1cm4gZS5nZW5lcmF0ZWRDb2x1bW4tdC5nZW5lcmF0ZWRDb2x1bW59dC5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucz1oO2Z1bmN0aW9uIG0oZSx0LHUpe3ZhciBuO249ZS5nZW5lcmF0ZWRMaW5lLXQuZ2VuZXJhdGVkTGluZTtpZihuKXtyZXR1cm4gbn1uPWUuZ2VuZXJhdGVkQ29sdW1uLXQuZ2VuZXJhdGVkQ29sdW1uO2lmKG58fHUpe3JldHVybiBufW49RChlLnNvdXJjZSx0LnNvdXJjZSk7aWYobil7cmV0dXJuIG59bj1lLm9yaWdpbmFsTGluZS10Lm9yaWdpbmFsTGluZTtpZihuKXtyZXR1cm4gbn1uPWUub3JpZ2luYWxDb2x1bW4tdC5vcmlnaW5hbENvbHVtbjtpZihuKXtyZXR1cm4gbn1yZXR1cm4gRChlLm5hbWUsdC5uYW1lKX10LmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucz1tfSl9LHthbWRlZmluZTo0Nn1dLDQ2OltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKHUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXt9LG89e30scz1mYWxzZSxhPWUoXCJwYXRoXCIpLGwsZjtmdW5jdGlvbiBjKGUpe3ZhciB0LHU7Zm9yKHQ9MDtlW3RdO3QrPTEpe3U9ZVt0XTtpZih1PT09XCIuXCIpe2Uuc3BsaWNlKHQsMSk7dC09MX1lbHNlIGlmKHU9PT1cIi4uXCIpe2lmKHQ9PT0xJiYoZVsyXT09PVwiLi5cInx8ZVswXT09PVwiLi5cIikpe2JyZWFrfWVsc2UgaWYodD4wKXtlLnNwbGljZSh0LTEsMik7dC09Mn19fX1mdW5jdGlvbiBwKGUsdCl7dmFyIHU7aWYoZSYmZS5jaGFyQXQoMCk9PT1cIi5cIil7aWYodCl7dT10LnNwbGl0KFwiL1wiKTt1PXUuc2xpY2UoMCx1Lmxlbmd0aC0xKTt1PXUuY29uY2F0KGUuc3BsaXQoXCIvXCIpKTtjKHUpO2U9dS5qb2luKFwiL1wiKX19cmV0dXJuIGV9ZnVuY3Rpb24gRChlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHAodCxlKX19ZnVuY3Rpb24gaChlKXtmdW5jdGlvbiB0KHQpe29bZV09dH10LmZyb21UZXh0PWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiYW1kZWZpbmUgZG9lcyBub3QgaW1wbGVtZW50IGxvYWQuZnJvbVRleHRcIil9O3JldHVybiB0fWw9ZnVuY3Rpb24oZSx0LG4scil7ZnVuY3Rpb24gaShpLG8pe2lmKHR5cGVvZiBpPT09XCJzdHJpbmdcIil7cmV0dXJuIGYoZSx0LG4saSxyKX1lbHNle2k9aS5tYXAoZnVuY3Rpb24odSl7cmV0dXJuIGYoZSx0LG4sdSxyKX0pO2lmKG8pe3UubmV4dFRpY2soZnVuY3Rpb24oKXtvLmFwcGx5KG51bGwsaSl9KX19fWkudG9Vcmw9ZnVuY3Rpb24oZSl7aWYoZS5pbmRleE9mKFwiLlwiKT09PTApe3JldHVybiBwKGUsYS5kaXJuYW1lKG4uZmlsZW5hbWUpKX1lbHNle3JldHVybiBlfX07cmV0dXJuIGl9O3I9cnx8ZnVuY3Rpb24gQSgpe3JldHVybiB0LnJlcXVpcmUuYXBwbHkodCxhcmd1bWVudHMpfTtmdW5jdGlvbiBtKGUsdSxpKXt2YXIgYSxmLGMscDtpZihlKXtmPW9bZV09e307Yz17aWQ6ZSx1cmk6bixleHBvcnRzOmZ9O2E9bChyLGYsYyxlKX1lbHNle2lmKHMpe3Rocm93IG5ldyBFcnJvcihcImFtZGVmaW5lIHdpdGggbm8gbW9kdWxlIElEIGNhbm5vdCBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgcGVyIGZpbGUuXCIpfXM9dHJ1ZTtmPXQuZXhwb3J0cztjPXQ7YT1sKHIsZixjLHQuaWQpfWlmKHUpe3U9dS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9KX1pZih0eXBlb2YgaT09PVwiZnVuY3Rpb25cIil7cD1pLmFwcGx5KGMuZXhwb3J0cyx1KX1lbHNle3A9aX1pZihwIT09dW5kZWZpbmVkKXtjLmV4cG9ydHM9cDtpZihlKXtvW2VdPWMuZXhwb3J0c319fWY9ZnVuY3Rpb24oZSx0LHUsbixyKXt2YXIgcz1uLmluZGV4T2YoXCIhXCIpLGE9bixjLGQ7aWYocz09PS0xKXtuPXAobixyKTtpZihuPT09XCJyZXF1aXJlXCIpe3JldHVybiBsKGUsdCx1LHIpfWVsc2UgaWYobj09PVwiZXhwb3J0c1wiKXtyZXR1cm4gdH1lbHNlIGlmKG49PT1cIm1vZHVsZVwiKXtyZXR1cm4gdX1lbHNlIGlmKG8uaGFzT3duUHJvcGVydHkobikpe3JldHVybiBvW25dfWVsc2UgaWYoaVtuXSl7bS5hcHBseShudWxsLGlbbl0pO3JldHVybiBvW25dfWVsc2V7aWYoZSl7cmV0dXJuIGUoYSl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJObyBtb2R1bGUgd2l0aCBJRDogXCIrbil9fX1lbHNle2M9bi5zdWJzdHJpbmcoMCxzKTtuPW4uc3Vic3RyaW5nKHMrMSxuLmxlbmd0aCk7ZD1mKGUsdCx1LGMscik7aWYoZC5ub3JtYWxpemUpe249ZC5ub3JtYWxpemUobixEKHIpKX1lbHNle249cChuLHIpfWlmKG9bbl0pe3JldHVybiBvW25dfWVsc2V7ZC5sb2FkKG4sbChlLHQsdSxyKSxoKG4pLHt9KTtyZXR1cm4gb1tuXX19fTtmdW5jdGlvbiBkKGUsdCx1KXtpZihBcnJheS5pc0FycmF5KGUpKXt1PXQ7dD1lO2U9dW5kZWZpbmVkfWVsc2UgaWYodHlwZW9mIGUhPT1cInN0cmluZ1wiKXt1PWU7ZT10PXVuZGVmaW5lZH1pZih0JiYhQXJyYXkuaXNBcnJheSh0KSl7dT10O3Q9dW5kZWZpbmVkfWlmKCF0KXt0PVtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiXX1pZihlKXtpW2VdPVtlLHQsdV19ZWxzZXttKGUsdCx1KX19ZC5yZXF1aXJlPWZ1bmN0aW9uKGUpe2lmKG9bZV0pe3JldHVybiBvW2VdfWlmKGlbZV0pe20uYXBwbHkobnVsbCxpW2VdKTtyZXR1cm4gb1tlXX19O2QuYW1kPXt9O3JldHVybiBkfXQuZXhwb3J0cz1yfSkuY2FsbCh0aGlzLGUoXCJfcHJvY2Vzc1wiKSxcIi9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL25vZGVfbW9kdWxlcy9hbWRlZmluZS9hbWRlZmluZS5qc1wiKX0se19wcm9jZXNzOjI2LHBhdGg6MjV9XSw0NzpbZnVuY3Rpb24oZSx0LHUpe3QuZXhwb3J0cz17bmFtZTpcImVzY29kZWdlblwiLGRlc2NyaXB0aW9uOlwiRUNNQVNjcmlwdCBjb2RlIGdlbmVyYXRvclwiLGhvbWVwYWdlOlwiaHR0cDovL2dpdGh1Yi5jb20vZXN0b29scy9lc2NvZGVnZW5cIixtYWluOlwiZXNjb2RlZ2VuLmpzXCIsYmluOntlc2dlbmVyYXRlOlwiLi9iaW4vZXNnZW5lcmF0ZS5qc1wiLGVzY29kZWdlbjpcIi4vYmluL2VzY29kZWdlbi5qc1wifSxmaWxlczpbXCJMSUNFTlNFLkJTRFwiLFwiTElDRU5TRS5zb3VyY2UtbWFwXCIsXCJSRUFETUUubWRcIixcImJpblwiLFwiZXNjb2RlZ2VuLmpzXCIsXCJwYWNrYWdlLmpzb25cIl0sdmVyc2lvbjpcIjEuNy4wXCIsZW5naW5lczp7bm9kZTpcIj49MC4xMC4wXCJ9LG1haW50YWluZXJzOlt7bmFtZTpcImNvbnN0ZWxsYXRpb25cIixlbWFpbDpcInV0YXRhbmUudGVhQGdtYWlsLmNvbVwifSx7bmFtZTpcIm1pY2hhZWxmaWNhcnJhXCIsZW1haWw6XCJucG1AbWljaGFlbC5maWNhcnJhLm1lXCJ9XSxyZXBvc2l0b3J5Ont0eXBlOlwiZ2l0XCIsdXJsOlwiZ2l0K3NzaDovL2dpdEBnaXRodWIuY29tL2VzdG9vbHMvZXNjb2RlZ2VuLmdpdFwifSxkZXBlbmRlbmNpZXM6e2VzdHJhdmVyc2U6XCJeMS45LjFcIixlc3V0aWxzOlwiXjIuMC4yXCIsZXNwcmltYTpcIl4xLjIuMlwiLG9wdGlvbmF0b3I6XCJeMC41LjBcIixcInNvdXJjZS1tYXBcIjpcIn4wLjIuMFwifSxvcHRpb25hbERlcGVuZGVuY2llczp7XCJzb3VyY2UtbWFwXCI6XCJ+MC4yLjBcIn0sZGV2RGVwZW5kZW5jaWVzOntcImFjb3JuLTZ0bzVcIjpcIl4wLjExLjEtMjVcIixibHVlYmlyZDpcIl4yLjMuMTFcIixcImJvd2VyLXJlZ2lzdHJ5LWNsaWVudFwiOlwiXjAuMi4xXCIsY2hhaTpcIl4xLjEwLjBcIixcImNvbW1vbmpzLWV2ZXJ5d2hlcmVcIjpcIl4wLjkuN1wiLFwiZXNwcmltYS1tb3pcIjpcIjEuMC4wLWRldi1oYXJtb255LW1velwiLGd1bHA6XCJeMy44LjEwXCIsXCJndWxwLWVzbGludFwiOlwiXjAuMi4wXCIsXCJndWxwLW1vY2hhXCI6XCJeMi4wLjBcIixzZW12ZXI6XCJeNC4xLjBcIn0sbGljZW5zZTpcIkJTRC0yLUNsYXVzZVwiLHNjcmlwdHM6e3Rlc3Q6XCJndWxwIHRyYXZpc1wiLFwidW5pdC10ZXN0XCI6XCJndWxwIHRlc3RcIixsaW50OlwiZ3VscCBsaW50XCIscmVsZWFzZTpcIm5vZGUgdG9vbHMvcmVsZWFzZS5qc1wiLFwiYnVpbGQtbWluXCI6XCJjanNpZnkgLW1hIHBhdGg6IHRvb2xzL2VudHJ5LXBvaW50LmpzID4gZXNjb2RlZ2VuLmJyb3dzZXIubWluLmpzXCIsYnVpbGQ6XCJjanNpZnkgLWEgcGF0aDogdG9vbHMvZW50cnktcG9pbnQuanMgPiBlc2NvZGVnZW4uYnJvd3Nlci5qc1wifSxnaXRIZWFkOlwiNWRhYmJjNTQ0MWIzOTZmZWJkMGFmYjkyNTJhOWFmZGZhNzA1MTY1N1wiLGJ1Z3M6e3VybDpcImh0dHBzOi8vZ2l0aHViLmNvbS9lc3Rvb2xzL2VzY29kZWdlbi9pc3N1ZXNcIn0sX2lkOlwiZXNjb2RlZ2VuQDEuNy4wXCIsX3NoYXN1bTpcIjRlMjk5ZDhjYzMzMDg3YjdmMjljMTllMmI5ZTg0MzYyYWJlMzU0NTNcIixfZnJvbTpcImVzY29kZWdlbkA+PTEuNi4wIDwyLjAuMFwiLF9ucG1WZXJzaW9uOlwiMi4xMS4zXCIsX25vZGVWZXJzaW9uOlwiMC4xMi43XCIsX25wbVVzZXI6e25hbWU6XCJtaWNoYWVsZmljYXJyYVwiLGVtYWlsOlwibnBtQG1pY2hhZWwuZmljYXJyYS5tZVwifSxkaXN0OntzaGFzdW06XCI0ZTI5OWQ4Y2MzMzA4N2I3ZjI5YzE5ZTJiOWU4NDM2MmFiZTM1NDUzXCIsdGFyYmFsbDpcImh0dHA6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvZXNjb2RlZ2VuLy0vZXNjb2RlZ2VuLTEuNy4wLnRnelwifSxkaXJlY3Rvcmllczp7fSxfcmVzb2x2ZWQ6XCJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9lc2NvZGVnZW4vLS9lc2NvZGVnZW4tMS43LjAudGd6XCIscmVhZG1lOlwiRVJST1I6IE5vIFJFQURNRSBkYXRhIGZvdW5kIVwifX0se31dLDQ4OltmdW5jdGlvbih0LHUsbil7KGZ1bmN0aW9uKHQsdSl7XCJ1c2Ugc3RyaWN0XCI7aWYodHlwZW9mIGU9PT1cImZ1bmN0aW9uXCImJmUuYW1kKXtlKFtcImV4cG9ydHNcIl0sdSl9ZWxzZSBpZih0eXBlb2YgbiE9PVwidW5kZWZpbmVkXCIpe3Uobil9ZWxzZXt1KHQuZXNwcmltYT17fSl9fSkodGhpcyxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgdCx1LG4scixpLG8scyxhLGwsZixjLHAsRCxoLG0sZCxBLEMsRSxGLGcseSxCLHYsYixTLHg7dD17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4LFJlZ3VsYXJFeHByZXNzaW9uOjksVGVtcGxhdGU6MTB9O3U9e307dVt0LkJvb2xlYW5MaXRlcmFsXT1cIkJvb2xlYW5cIjt1W3QuRU9GXT1cIjxlbmQ+XCI7dVt0LklkZW50aWZpZXJdPVwiSWRlbnRpZmllclwiO3VbdC5LZXl3b3JkXT1cIktleXdvcmRcIjt1W3QuTnVsbExpdGVyYWxdPVwiTnVsbFwiO3VbdC5OdW1lcmljTGl0ZXJhbF09XCJOdW1lcmljXCI7dVt0LlB1bmN0dWF0b3JdPVwiUHVuY3R1YXRvclwiO3VbdC5TdHJpbmdMaXRlcmFsXT1cIlN0cmluZ1wiO3VbdC5SZWd1bGFyRXhwcmVzc2lvbl09XCJSZWd1bGFyRXhwcmVzc2lvblwiO3VbdC5UZW1wbGF0ZV09XCJUZW1wbGF0ZVwiO249W1wiKFwiLFwie1wiLFwiW1wiLFwiaW5cIixcInR5cGVvZlwiLFwiaW5zdGFuY2VvZlwiLFwibmV3XCIsXCJyZXR1cm5cIixcImNhc2VcIixcImRlbGV0ZVwiLFwidGhyb3dcIixcInZvaWRcIixcIj1cIixcIis9XCIsXCItPVwiLFwiKj1cIixcIi89XCIsXCIlPVwiLFwiPDw9XCIsXCI+Pj1cIixcIj4+Pj1cIixcIiY9XCIsXCJ8PVwiLFwiXj1cIixcIixcIixcIitcIixcIi1cIixcIipcIixcIi9cIixcIiVcIixcIisrXCIsXCItLVwiLFwiPDxcIixcIj4+XCIsXCI+Pj5cIixcIiZcIixcInxcIixcIl5cIixcIiFcIixcIn5cIixcIiYmXCIsXCJ8fFwiLFwiP1wiLFwiOlwiLFwiPT09XCIsXCI9PVwiLFwiPj1cIixcIjw9XCIsXCI8XCIsXCI+XCIsXCIhPVwiLFwiIT09XCJdO3I9e0Fzc2lnbm1lbnRFeHByZXNzaW9uOlwiQXNzaWdubWVudEV4cHJlc3Npb25cIixBc3NpZ25tZW50UGF0dGVybjpcIkFzc2lnbm1lbnRQYXR0ZXJuXCIsQXJyYXlFeHByZXNzaW9uOlwiQXJyYXlFeHByZXNzaW9uXCIsQXJyYXlQYXR0ZXJuOlwiQXJyYXlQYXR0ZXJuXCIsQXJyb3dGdW5jdGlvbkV4cHJlc3Npb246XCJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvblwiLEJsb2NrU3RhdGVtZW50OlwiQmxvY2tTdGF0ZW1lbnRcIixCaW5hcnlFeHByZXNzaW9uOlwiQmluYXJ5RXhwcmVzc2lvblwiLEJyZWFrU3RhdGVtZW50OlwiQnJlYWtTdGF0ZW1lbnRcIixDYWxsRXhwcmVzc2lvbjpcIkNhbGxFeHByZXNzaW9uXCIsQ2F0Y2hDbGF1c2U6XCJDYXRjaENsYXVzZVwiLENsYXNzQm9keTpcIkNsYXNzQm9keVwiLENsYXNzRGVjbGFyYXRpb246XCJDbGFzc0RlY2xhcmF0aW9uXCIsQ2xhc3NFeHByZXNzaW9uOlwiQ2xhc3NFeHByZXNzaW9uXCIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOlwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCIsQ29udGludWVTdGF0ZW1lbnQ6XCJDb250aW51ZVN0YXRlbWVudFwiLERvV2hpbGVTdGF0ZW1lbnQ6XCJEb1doaWxlU3RhdGVtZW50XCIsRGVidWdnZXJTdGF0ZW1lbnQ6XCJEZWJ1Z2dlclN0YXRlbWVudFwiLEVtcHR5U3RhdGVtZW50OlwiRW1wdHlTdGF0ZW1lbnRcIixFeHBvcnRBbGxEZWNsYXJhdGlvbjpcIkV4cG9ydEFsbERlY2xhcmF0aW9uXCIsRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uOlwiRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uXCIsRXhwb3J0TmFtZWREZWNsYXJhdGlvbjpcIkV4cG9ydE5hbWVkRGVjbGFyYXRpb25cIixFeHBvcnRTcGVjaWZpZXI6XCJFeHBvcnRTcGVjaWZpZXJcIixFeHByZXNzaW9uU3RhdGVtZW50OlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLEZvclN0YXRlbWVudDpcIkZvclN0YXRlbWVudFwiLEZvck9mU3RhdGVtZW50OlwiRm9yT2ZTdGF0ZW1lbnRcIixGb3JJblN0YXRlbWVudDpcIkZvckluU3RhdGVtZW50XCIsRnVuY3Rpb25EZWNsYXJhdGlvbjpcIkZ1bmN0aW9uRGVjbGFyYXRpb25cIixGdW5jdGlvbkV4cHJlc3Npb246XCJGdW5jdGlvbkV4cHJlc3Npb25cIixJZGVudGlmaWVyOlwiSWRlbnRpZmllclwiLElmU3RhdGVtZW50OlwiSWZTdGF0ZW1lbnRcIixJbXBvcnREZWNsYXJhdGlvbjpcIkltcG9ydERlY2xhcmF0aW9uXCIsSW1wb3J0RGVmYXVsdFNwZWNpZmllcjpcIkltcG9ydERlZmF1bHRTcGVjaWZpZXJcIixJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXI6XCJJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXJcIixJbXBvcnRTcGVjaWZpZXI6XCJJbXBvcnRTcGVjaWZpZXJcIixMaXRlcmFsOlwiTGl0ZXJhbFwiLExhYmVsZWRTdGF0ZW1lbnQ6XCJMYWJlbGVkU3RhdGVtZW50XCIsTG9naWNhbEV4cHJlc3Npb246XCJMb2dpY2FsRXhwcmVzc2lvblwiLE1lbWJlckV4cHJlc3Npb246XCJNZW1iZXJFeHByZXNzaW9uXCIsTWV0YVByb3BlcnR5OlwiTWV0YVByb3BlcnR5XCIsTWV0aG9kRGVmaW5pdGlvbjpcIk1ldGhvZERlZmluaXRpb25cIixOZXdFeHByZXNzaW9uOlwiTmV3RXhwcmVzc2lvblwiLE9iamVjdEV4cHJlc3Npb246XCJPYmplY3RFeHByZXNzaW9uXCIsT2JqZWN0UGF0dGVybjpcIk9iamVjdFBhdHRlcm5cIixQcm9ncmFtOlwiUHJvZ3JhbVwiLFByb3BlcnR5OlwiUHJvcGVydHlcIixSZXN0RWxlbWVudDpcIlJlc3RFbGVtZW50XCIsUmV0dXJuU3RhdGVtZW50OlwiUmV0dXJuU3RhdGVtZW50XCIsU2VxdWVuY2VFeHByZXNzaW9uOlwiU2VxdWVuY2VFeHByZXNzaW9uXCIsU3ByZWFkRWxlbWVudDpcIlNwcmVhZEVsZW1lbnRcIixTdXBlcjpcIlN1cGVyXCIsU3dpdGNoQ2FzZTpcIlN3aXRjaENhc2VcIixTd2l0Y2hTdGF0ZW1lbnQ6XCJTd2l0Y2hTdGF0ZW1lbnRcIixUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb246XCJUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb25cIixUZW1wbGF0ZUVsZW1lbnQ6XCJUZW1wbGF0ZUVsZW1lbnRcIixUZW1wbGF0ZUxpdGVyYWw6XCJUZW1wbGF0ZUxpdGVyYWxcIixUaGlzRXhwcmVzc2lvbjpcIlRoaXNFeHByZXNzaW9uXCIsVGhyb3dTdGF0ZW1lbnQ6XCJUaHJvd1N0YXRlbWVudFwiLFRyeVN0YXRlbWVudDpcIlRyeVN0YXRlbWVudFwiLFVuYXJ5RXhwcmVzc2lvbjpcIlVuYXJ5RXhwcmVzc2lvblwiLFVwZGF0ZUV4cHJlc3Npb246XCJVcGRhdGVFeHByZXNzaW9uXCIsVmFyaWFibGVEZWNsYXJhdGlvbjpcIlZhcmlhYmxlRGVjbGFyYXRpb25cIixWYXJpYWJsZURlY2xhcmF0b3I6XCJWYXJpYWJsZURlY2xhcmF0b3JcIixXaGlsZVN0YXRlbWVudDpcIldoaWxlU3RhdGVtZW50XCIsV2l0aFN0YXRlbWVudDpcIldpdGhTdGF0ZW1lbnRcIixZaWVsZEV4cHJlc3Npb246XCJZaWVsZEV4cHJlc3Npb25cIn07aT17QXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcjpcIkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXJcIn07bz17VW5leHBlY3RlZFRva2VuOlwiVW5leHBlY3RlZCB0b2tlbiAlMFwiLFVuZXhwZWN0ZWROdW1iZXI6XCJVbmV4cGVjdGVkIG51bWJlclwiLFVuZXhwZWN0ZWRTdHJpbmc6XCJVbmV4cGVjdGVkIHN0cmluZ1wiLFVuZXhwZWN0ZWRJZGVudGlmaWVyOlwiVW5leHBlY3RlZCBpZGVudGlmaWVyXCIsVW5leHBlY3RlZFJlc2VydmVkOlwiVW5leHBlY3RlZCByZXNlcnZlZCB3b3JkXCIsVW5leHBlY3RlZFRlbXBsYXRlOlwiVW5leHBlY3RlZCBxdWFzaSAlMFwiLFVuZXhwZWN0ZWRFT1M6XCJVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dFwiLE5ld2xpbmVBZnRlclRocm93OlwiSWxsZWdhbCBuZXdsaW5lIGFmdGVyIHRocm93XCIsSW52YWxpZFJlZ0V4cDpcIkludmFsaWQgcmVndWxhciBleHByZXNzaW9uXCIsVW50ZXJtaW5hdGVkUmVnRXhwOlwiSW52YWxpZCByZWd1bGFyIGV4cHJlc3Npb246IG1pc3NpbmcgL1wiLEludmFsaWRMSFNJbkFzc2lnbm1lbnQ6XCJJbnZhbGlkIGxlZnQtaGFuZCBzaWRlIGluIGFzc2lnbm1lbnRcIixJbnZhbGlkTEhTSW5Gb3JJbjpcIkludmFsaWQgbGVmdC1oYW5kIHNpZGUgaW4gZm9yLWluXCIsSW52YWxpZExIU0luRm9yTG9vcDpcIkludmFsaWQgbGVmdC1oYW5kIHNpZGUgaW4gZm9yLWxvb3BcIixNdWx0aXBsZURlZmF1bHRzSW5Td2l0Y2g6XCJNb3JlIHRoYW4gb25lIGRlZmF1bHQgY2xhdXNlIGluIHN3aXRjaCBzdGF0ZW1lbnRcIixOb0NhdGNoT3JGaW5hbGx5OlwiTWlzc2luZyBjYXRjaCBvciBmaW5hbGx5IGFmdGVyIHRyeVwiLFVua25vd25MYWJlbDpcIlVuZGVmaW5lZCBsYWJlbCAnJTAnXCIsUmVkZWNsYXJhdGlvbjpcIiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZFwiLElsbGVnYWxDb250aW51ZTpcIklsbGVnYWwgY29udGludWUgc3RhdGVtZW50XCIsSWxsZWdhbEJyZWFrOlwiSWxsZWdhbCBicmVhayBzdGF0ZW1lbnRcIixJbGxlZ2FsUmV0dXJuOlwiSWxsZWdhbCByZXR1cm4gc3RhdGVtZW50XCIsU3RyaWN0TW9kZVdpdGg6XCJTdHJpY3QgbW9kZSBjb2RlIG1heSBub3QgaW5jbHVkZSBhIHdpdGggc3RhdGVtZW50XCIsU3RyaWN0Q2F0Y2hWYXJpYWJsZTpcIkNhdGNoIHZhcmlhYmxlIG1heSBub3QgYmUgZXZhbCBvciBhcmd1bWVudHMgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RWYXJOYW1lOlwiVmFyaWFibGUgbmFtZSBtYXkgbm90IGJlIGV2YWwgb3IgYXJndW1lbnRzIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0UGFyYW1OYW1lOlwiUGFyYW1ldGVyIG5hbWUgZXZhbCBvciBhcmd1bWVudHMgaXMgbm90IGFsbG93ZWQgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RQYXJhbUR1cGU6XCJTdHJpY3QgbW9kZSBmdW5jdGlvbiBtYXkgbm90IGhhdmUgZHVwbGljYXRlIHBhcmFtZXRlciBuYW1lc1wiLFN0cmljdEZ1bmN0aW9uTmFtZTpcIkZ1bmN0aW9uIG5hbWUgbWF5IG5vdCBiZSBldmFsIG9yIGFyZ3VtZW50cyBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdE9jdGFsTGl0ZXJhbDpcIk9jdGFsIGxpdGVyYWxzIGFyZSBub3QgYWxsb3dlZCBpbiBzdHJpY3QgbW9kZS5cIixTdHJpY3REZWxldGU6XCJEZWxldGUgb2YgYW4gdW5xdWFsaWZpZWQgaWRlbnRpZmllciBpbiBzdHJpY3QgbW9kZS5cIixTdHJpY3RMSFNBc3NpZ25tZW50OlwiQXNzaWdubWVudCB0byBldmFsIG9yIGFyZ3VtZW50cyBpcyBub3QgYWxsb3dlZCBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdExIU1Bvc3RmaXg6XCJQb3N0Zml4IGluY3JlbWVudC9kZWNyZW1lbnQgbWF5IG5vdCBoYXZlIGV2YWwgb3IgYXJndW1lbnRzIG9wZXJhbmQgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RMSFNQcmVmaXg6XCJQcmVmaXggaW5jcmVtZW50L2RlY3JlbWVudCBtYXkgbm90IGhhdmUgZXZhbCBvciBhcmd1bWVudHMgb3BlcmFuZCBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdFJlc2VydmVkV29yZDpcIlVzZSBvZiBmdXR1cmUgcmVzZXJ2ZWQgd29yZCBpbiBzdHJpY3QgbW9kZVwiLFRlbXBsYXRlT2N0YWxMaXRlcmFsOlwiT2N0YWwgbGl0ZXJhbHMgYXJlIG5vdCBhbGxvd2VkIGluIHRlbXBsYXRlIHN0cmluZ3MuXCIsUGFyYW1ldGVyQWZ0ZXJSZXN0UGFyYW1ldGVyOlwiUmVzdCBwYXJhbWV0ZXIgbXVzdCBiZSBsYXN0IGZvcm1hbCBwYXJhbWV0ZXJcIixEZWZhdWx0UmVzdFBhcmFtZXRlcjpcIlVuZXhwZWN0ZWQgdG9rZW4gPVwiLE9iamVjdFBhdHRlcm5Bc1Jlc3RQYXJhbWV0ZXI6XCJVbmV4cGVjdGVkIHRva2VuIHtcIixEdXBsaWNhdGVQcm90b1Byb3BlcnR5OlwiRHVwbGljYXRlIF9fcHJvdG9fXyBmaWVsZHMgYXJlIG5vdCBhbGxvd2VkIGluIG9iamVjdCBsaXRlcmFsc1wiLENvbnN0cnVjdG9yU3BlY2lhbE1ldGhvZDpcIkNsYXNzIGNvbnN0cnVjdG9yIG1heSBub3QgYmUgYW4gYWNjZXNzb3JcIixEdXBsaWNhdGVDb25zdHJ1Y3RvcjpcIkEgY2xhc3MgbWF5IG9ubHkgaGF2ZSBvbmUgY29uc3RydWN0b3JcIixTdGF0aWNQcm90b3R5cGU6XCJDbGFzc2VzIG1heSBub3QgaGF2ZSBzdGF0aWMgcHJvcGVydHkgbmFtZWQgcHJvdG90eXBlXCIsTWlzc2luZ0Zyb21DbGF1c2U6XCJVbmV4cGVjdGVkIHRva2VuXCIsTm9Bc0FmdGVySW1wb3J0TmFtZXNwYWNlOlwiVW5leHBlY3RlZCB0b2tlblwiLEludmFsaWRNb2R1bGVTcGVjaWZpZXI6XCJVbmV4cGVjdGVkIHRva2VuXCIsSWxsZWdhbEltcG9ydERlY2xhcmF0aW9uOlwiVW5leHBlY3RlZCB0b2tlblwiLElsbGVnYWxFeHBvcnREZWNsYXJhdGlvbjpcIlVuZXhwZWN0ZWQgdG9rZW5cIixEdXBsaWNhdGVCaW5kaW5nOlwiRHVwbGljYXRlIGJpbmRpbmcgJTBcIn07cz17Tm9uQXNjaWlJZGVudGlmaWVyU3RhcnQ6L1tcXHhBQVxceEI1XFx4QkFcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDM3MC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzdGXFx1MDM4NlxcdTAzODgtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDhBLVxcdTA1MkZcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYyMC1cXHUwNjRBXFx1MDY2RVxcdTA2NkZcXHUwNjcxLVxcdTA2RDNcXHUwNkQ1XFx1MDZFNVxcdTA2RTZcXHUwNkVFXFx1MDZFRlxcdTA2RkEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwXFx1MDcxMi1cXHUwNzJGXFx1MDc0RC1cXHUwN0E1XFx1MDdCMVxcdTA3Q0EtXFx1MDdFQVxcdTA3RjRcXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgxNVxcdTA4MUFcXHUwODI0XFx1MDgyOFxcdTA4NDAtXFx1MDg1OFxcdTA4QTAtXFx1MDhCMlxcdTA5MDQtXFx1MDkzOVxcdTA5M0RcXHUwOTUwXFx1MDk1OC1cXHUwOTYxXFx1MDk3MS1cXHUwOTgwXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCRFxcdTA5Q0VcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFMVxcdTA5RjBcXHUwOUYxXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE3Mi1cXHUwQTc0XFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJEXFx1MEFEMFxcdTBBRTBcXHUwQUUxXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0RcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2MVxcdTBCNzFcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCRDBcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNEXFx1MEM1OFxcdTBDNTlcXHUwQzYwXFx1MEM2MVxcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkRcXHUwQ0RFXFx1MENFMFxcdTBDRTFcXHUwQ0YxXFx1MENGMlxcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0RcXHUwRDRFXFx1MEQ2MFxcdTBENjFcXHUwRDdBLVxcdTBEN0ZcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MEUwMS1cXHUwRTMwXFx1MEUzMlxcdTBFMzNcXHUwRTQwLVxcdTBFNDZcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCMFxcdTBFQjJcXHUwRUIzXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEY0MC1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY4OC1cXHUwRjhDXFx1MTAwMC1cXHUxMDJBXFx1MTAzRlxcdTEwNTAtXFx1MTA1NVxcdTEwNUEtXFx1MTA1RFxcdTEwNjFcXHUxMDY1XFx1MTA2NlxcdTEwNkUtXFx1MTA3MFxcdTEwNzUtXFx1MTA4MVxcdTEwOEVcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzExXFx1MTcyMC1cXHUxNzMxXFx1MTc0MC1cXHUxNzUxXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc4MC1cXHUxN0IzXFx1MTdEN1xcdTE3RENcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QThcXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTk1MC1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlDMS1cXHUxOUM3XFx1MUEwMC1cXHUxQTE2XFx1MUEyMC1cXHUxQTU0XFx1MUFBN1xcdTFCMDUtXFx1MUIzM1xcdTFCNDUtXFx1MUI0QlxcdTFCODMtXFx1MUJBMFxcdTFCQUVcXHUxQkFGXFx1MUJCQS1cXHUxQkU1XFx1MUMwMC1cXHUxQzIzXFx1MUM0RC1cXHUxQzRGXFx1MUM1QS1cXHUxQzdEXFx1MUNFOS1cXHUxQ0VDXFx1MUNFRS1cXHUxQ0YxXFx1MUNGNVxcdTFDRjZcXHUxRDAwLVxcdTFEQkZcXHUxRTAwLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE4LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0VFXFx1MkNGMlxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDgwLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDlCLVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MUZcXHVBNjJBXFx1QTYyQlxcdUE2NDAtXFx1QTY2RVxcdUE2N0YtXFx1QTY5RFxcdUE2QTAtXFx1QTZFRlxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTdBRFxcdUE3QjBcXHVBN0IxXFx1QTdGNy1cXHVBODAxXFx1QTgwMy1cXHVBODA1XFx1QTgwNy1cXHVBODBBXFx1QTgwQy1cXHVBODIyXFx1QTg0MC1cXHVBODczXFx1QTg4Mi1cXHVBOEIzXFx1QThGMi1cXHVBOEY3XFx1QThGQlxcdUE5MEEtXFx1QTkyNVxcdUE5MzAtXFx1QTk0NlxcdUE5NjAtXFx1QTk3Q1xcdUE5ODQtXFx1QTlCMlxcdUE5Q0ZcXHVBOUUwLVxcdUE5RTRcXHVBOUU2LVxcdUE5RUZcXHVBOUZBLVxcdUE5RkVcXHVBQTAwLVxcdUFBMjhcXHVBQTQwLVxcdUFBNDJcXHVBQTQ0LVxcdUFBNEJcXHVBQTYwLVxcdUFBNzZcXHVBQTdBXFx1QUE3RS1cXHVBQUFGXFx1QUFCMVxcdUFBQjVcXHVBQUI2XFx1QUFCOS1cXHVBQUJEXFx1QUFDMFxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUFcXHVBQUYyLVxcdUFBRjRcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFMlxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMURcXHVGQjFGLVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMjEtXFx1RkYzQVxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ118XFx1RDgwMFtcXHVEQzAwLVxcdURDMEJcXHVEQzBELVxcdURDMjZcXHVEQzI4LVxcdURDM0FcXHVEQzNDXFx1REMzRFxcdURDM0YtXFx1REM0RFxcdURDNTAtXFx1REM1RFxcdURDODAtXFx1RENGQVxcdURENDAtXFx1REQ3NFxcdURFODAtXFx1REU5Q1xcdURFQTAtXFx1REVEMFxcdURGMDAtXFx1REYxRlxcdURGMzAtXFx1REY0QVxcdURGNTAtXFx1REY3NVxcdURGODAtXFx1REY5RFxcdURGQTAtXFx1REZDM1xcdURGQzgtXFx1REZDRlxcdURGRDEtXFx1REZENV18XFx1RDgwMVtcXHVEQzAwLVxcdURDOURcXHVERDAwLVxcdUREMjdcXHVERDMwLVxcdURENjNcXHVERTAwLVxcdURGMzZcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNjddfFxcdUQ4MDJbXFx1REMwMC1cXHVEQzA1XFx1REMwOFxcdURDMEEtXFx1REMzNVxcdURDMzdcXHVEQzM4XFx1REMzQ1xcdURDM0YtXFx1REM1NVxcdURDNjAtXFx1REM3NlxcdURDODAtXFx1REM5RVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMFxcdURFMTAtXFx1REUxM1xcdURFMTUtXFx1REUxN1xcdURFMTktXFx1REUzM1xcdURFNjAtXFx1REU3Q1xcdURFODAtXFx1REU5Q1xcdURFQzAtXFx1REVDN1xcdURFQzktXFx1REVFNFxcdURGMDAtXFx1REYzNVxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY3MlxcdURGODAtXFx1REY5MV18XFx1RDgwM1tcXHVEQzAwLVxcdURDNDhdfFxcdUQ4MDRbXFx1REMwMy1cXHVEQzM3XFx1REM4My1cXHVEQ0FGXFx1RENEMC1cXHVEQ0U4XFx1REQwMy1cXHVERDI2XFx1REQ1MC1cXHVERDcyXFx1REQ3NlxcdUREODMtXFx1RERCMlxcdUREQzEtXFx1RERDNFxcdUREREFcXHVERTAwLVxcdURFMTFcXHVERTEzLVxcdURFMkJcXHVERUIwLVxcdURFREVcXHVERjA1LVxcdURGMENcXHVERjBGXFx1REYxMFxcdURGMTMtXFx1REYyOFxcdURGMkEtXFx1REYzMFxcdURGMzJcXHVERjMzXFx1REYzNS1cXHVERjM5XFx1REYzRFxcdURGNUQtXFx1REY2MV18XFx1RDgwNVtcXHVEQzgwLVxcdURDQUZcXHVEQ0M0XFx1RENDNVxcdURDQzdcXHVERDgwLVxcdUREQUVcXHVERTAwLVxcdURFMkZcXHVERTQ0XFx1REU4MC1cXHVERUFBXXxcXHVEODA2W1xcdURDQTAtXFx1RENERlxcdURDRkZcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDhbXFx1REMwMC1cXHVERjk4XXxcXHVEODA5W1xcdURDMDAtXFx1REM2RV18W1xcdUQ4MENcXHVEODQwLVxcdUQ4NjhcXHVEODZBLVxcdUQ4NkNdW1xcdURDMDAtXFx1REZGRl18XFx1RDgwRFtcXHVEQzAwLVxcdURDMkVdfFxcdUQ4MUFbXFx1REMwMC1cXHVERTM4XFx1REU0MC1cXHVERTVFXFx1REVEMC1cXHVERUVEXFx1REYwMC1cXHVERjJGXFx1REY0MC1cXHVERjQzXFx1REY2My1cXHVERjc3XFx1REY3RC1cXHVERjhGXXxcXHVEODFCW1xcdURGMDAtXFx1REY0NFxcdURGNTBcXHVERjkzLVxcdURGOUZdfFxcdUQ4MkNbXFx1REMwMFxcdURDMDFdfFxcdUQ4MkZbXFx1REMwMC1cXHVEQzZBXFx1REM3MC1cXHVEQzdDXFx1REM4MC1cXHVEQzg4XFx1REM5MC1cXHVEQzk5XXxcXHVEODM1W1xcdURDMDAtXFx1REM1NFxcdURDNTYtXFx1REM5Q1xcdURDOUVcXHVEQzlGXFx1RENBMlxcdURDQTVcXHVEQ0E2XFx1RENBOS1cXHVEQ0FDXFx1RENBRS1cXHVEQ0I5XFx1RENCQlxcdURDQkQtXFx1RENDM1xcdURDQzUtXFx1REQwNVxcdUREMDctXFx1REQwQVxcdUREMEQtXFx1REQxNFxcdUREMTYtXFx1REQxQ1xcdUREMUUtXFx1REQzOVxcdUREM0ItXFx1REQzRVxcdURENDAtXFx1REQ0NFxcdURENDZcXHVERDRBLVxcdURENTBcXHVERDUyLVxcdURFQTVcXHVERUE4LVxcdURFQzBcXHVERUMyLVxcdURFREFcXHVERURDLVxcdURFRkFcXHVERUZDLVxcdURGMTRcXHVERjE2LVxcdURGMzRcXHVERjM2LVxcdURGNEVcXHVERjUwLVxcdURGNkVcXHVERjcwLVxcdURGODhcXHVERjhBLVxcdURGQThcXHVERkFBLVxcdURGQzJcXHVERkM0LVxcdURGQ0JdfFxcdUQ4M0FbXFx1REMwMC1cXHVEQ0M0XXxcXHVEODNCW1xcdURFMDAtXFx1REUwM1xcdURFMDUtXFx1REUxRlxcdURFMjFcXHVERTIyXFx1REUyNFxcdURFMjdcXHVERTI5LVxcdURFMzJcXHVERTM0LVxcdURFMzdcXHVERTM5XFx1REUzQlxcdURFNDJcXHVERTQ3XFx1REU0OVxcdURFNEJcXHVERTRELVxcdURFNEZcXHVERTUxXFx1REU1MlxcdURFNTRcXHVERTU3XFx1REU1OVxcdURFNUJcXHVERTVEXFx1REU1RlxcdURFNjFcXHVERTYyXFx1REU2NFxcdURFNjctXFx1REU2QVxcdURFNkMtXFx1REU3MlxcdURFNzQtXFx1REU3N1xcdURFNzktXFx1REU3Q1xcdURFN0VcXHVERTgwLVxcdURFODlcXHVERThCLVxcdURFOUJcXHVERUExLVxcdURFQTNcXHVERUE1LVxcdURFQTlcXHVERUFCLVxcdURFQkJdfFxcdUQ4NjlbXFx1REMwMC1cXHVERUQ2XFx1REYwMC1cXHVERkZGXXxcXHVEODZEW1xcdURDMDAtXFx1REYzNFxcdURGNDAtXFx1REZGRl18XFx1RDg2RVtcXHVEQzAwLVxcdURDMURdfFxcdUQ4N0VbXFx1REMwMC1cXHVERTFEXS8sTm9uQXNjaWlJZGVudGlmaWVyUGFydDovW1xceEFBXFx4QjVcXHhCN1xceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzMDAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODYtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDgzLVxcdTA0ODdcXHUwNDhBLVxcdTA1MkZcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDU5MS1cXHUwNUJEXFx1MDVCRlxcdTA1QzFcXHUwNUMyXFx1MDVDNFxcdTA1QzVcXHUwNUM3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYxMC1cXHUwNjFBXFx1MDYyMC1cXHUwNjY5XFx1MDY2RS1cXHUwNkQzXFx1MDZENS1cXHUwNkRDXFx1MDZERi1cXHUwNkU4XFx1MDZFQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTAtXFx1MDc0QVxcdTA3NEQtXFx1MDdCMVxcdTA3QzAtXFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MkRcXHUwODQwLVxcdTA4NUJcXHUwOEEwLVxcdTA4QjJcXHUwOEU0LVxcdTA5NjNcXHUwOTY2LVxcdTA5NkZcXHUwOTcxLVxcdTA5ODNcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJDLVxcdTA5QzRcXHUwOUM3XFx1MDlDOFxcdTA5Q0ItXFx1MDlDRVxcdTA5RDdcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFM1xcdTA5RTYtXFx1MDlGMVxcdTBBMDEtXFx1MEEwM1xcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEEzQ1xcdTBBM0UtXFx1MEE0MlxcdTBBNDdcXHUwQTQ4XFx1MEE0Qi1cXHUwQTREXFx1MEE1MVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTY2LVxcdTBBNzVcXHUwQTgxLVxcdTBBODNcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkMtXFx1MEFDNVxcdTBBQzctXFx1MEFDOVxcdTBBQ0ItXFx1MEFDRFxcdTBBRDBcXHUwQUUwLVxcdTBBRTNcXHUwQUU2LVxcdTBBRUZcXHUwQjAxLVxcdTBCMDNcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzQy1cXHUwQjQ0XFx1MEI0N1xcdTBCNDhcXHUwQjRCLVxcdTBCNERcXHUwQjU2XFx1MEI1N1xcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYzXFx1MEI2Ni1cXHUwQjZGXFx1MEI3MVxcdTBCODJcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCQkUtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDRFxcdTBCRDBcXHUwQkQ3XFx1MEJFNi1cXHUwQkVGXFx1MEMwMC1cXHUwQzAzXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRC1cXHUwQzQ0XFx1MEM0Ni1cXHUwQzQ4XFx1MEM0QS1cXHUwQzREXFx1MEM1NVxcdTBDNTZcXHUwQzU4XFx1MEM1OVxcdTBDNjAtXFx1MEM2M1xcdTBDNjYtXFx1MEM2RlxcdTBDODEtXFx1MEM4M1xcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkMtXFx1MENDNFxcdTBDQzYtXFx1MENDOFxcdTBDQ0EtXFx1MENDRFxcdTBDRDVcXHUwQ0Q2XFx1MENERVxcdTBDRTAtXFx1MENFM1xcdTBDRTYtXFx1MENFRlxcdTBDRjFcXHUwQ0YyXFx1MEQwMS1cXHUwRDAzXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRC1cXHUwRDQ0XFx1MEQ0Ni1cXHUwRDQ4XFx1MEQ0QS1cXHUwRDRFXFx1MEQ1N1xcdTBENjAtXFx1MEQ2M1xcdTBENjYtXFx1MEQ2RlxcdTBEN0EtXFx1MEQ3RlxcdTBEODJcXHUwRDgzXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBEQ0FcXHUwRENGLVxcdTBERDRcXHUwREQ2XFx1MEREOC1cXHUwRERGXFx1MERFNi1cXHUwREVGXFx1MERGMlxcdTBERjNcXHUwRTAxLVxcdTBFM0FcXHUwRTQwLVxcdTBFNEVcXHUwRTUwLVxcdTBFNTlcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCOVxcdTBFQkItXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRUM4LVxcdTBFQ0RcXHUwRUQwLVxcdTBFRDlcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEYxOFxcdTBGMTlcXHUwRjIwLVxcdTBGMjlcXHUwRjM1XFx1MEYzN1xcdTBGMzlcXHUwRjNFLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjcxLVxcdTBGODRcXHUwRjg2LVxcdTBGOTdcXHUwRjk5LVxcdTBGQkNcXHUwRkM2XFx1MTAwMC1cXHUxMDQ5XFx1MTA1MC1cXHUxMDlEXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzNUQtXFx1MTM1RlxcdTEzNjktXFx1MTM3MVxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxNFxcdTE3MjAtXFx1MTczNFxcdTE3NDAtXFx1MTc1M1xcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3NzJcXHUxNzczXFx1MTc4MC1cXHUxN0QzXFx1MTdEN1xcdTE3RENcXHUxN0REXFx1MTdFMC1cXHUxN0U5XFx1MTgwQi1cXHUxODBEXFx1MTgxMC1cXHUxODE5XFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTkyMC1cXHUxOTJCXFx1MTkzMC1cXHUxOTNCXFx1MTk0Ni1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlCMC1cXHUxOUM5XFx1MTlEMC1cXHUxOURBXFx1MUEwMC1cXHUxQTFCXFx1MUEyMC1cXHUxQTVFXFx1MUE2MC1cXHUxQTdDXFx1MUE3Ri1cXHUxQTg5XFx1MUE5MC1cXHUxQTk5XFx1MUFBN1xcdTFBQjAtXFx1MUFCRFxcdTFCMDAtXFx1MUI0QlxcdTFCNTAtXFx1MUI1OVxcdTFCNkItXFx1MUI3M1xcdTFCODAtXFx1MUJGM1xcdTFDMDAtXFx1MUMzN1xcdTFDNDAtXFx1MUM0OVxcdTFDNEQtXFx1MUM3RFxcdTFDRDAtXFx1MUNEMlxcdTFDRDQtXFx1MUNGNlxcdTFDRjhcXHUxQ0Y5XFx1MUQwMC1cXHUxREY1XFx1MURGQy1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwMENcXHUyMDBEXFx1MjAzRlxcdTIwNDBcXHUyMDU0XFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMEQwLVxcdTIwRENcXHUyMEUxXFx1MjBFNS1cXHUyMEYwXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOC1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxNjAtXFx1MjE4OFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEN0YtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTJERTAtXFx1MkRGRlxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyRlxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOTktXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYyQlxcdUE2NDAtXFx1QTY2RlxcdUE2NzQtXFx1QTY3RFxcdUE2N0YtXFx1QTY5RFxcdUE2OUYtXFx1QTZGMVxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTdBRFxcdUE3QjBcXHVBN0IxXFx1QTdGNy1cXHVBODI3XFx1QTg0MC1cXHVBODczXFx1QTg4MC1cXHVBOEM0XFx1QThEMC1cXHVBOEQ5XFx1QThFMC1cXHVBOEY3XFx1QThGQlxcdUE5MDAtXFx1QTkyRFxcdUE5MzAtXFx1QTk1M1xcdUE5NjAtXFx1QTk3Q1xcdUE5ODAtXFx1QTlDMFxcdUE5Q0YtXFx1QTlEOVxcdUE5RTAtXFx1QTlGRVxcdUFBMDAtXFx1QUEzNlxcdUFBNDAtXFx1QUE0RFxcdUFBNTAtXFx1QUE1OVxcdUFBNjAtXFx1QUE3NlxcdUFBN0EtXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFRlxcdUFBRjItXFx1QUFGNlxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCMzAtXFx1QUI1QVxcdUFCNUMtXFx1QUI1RlxcdUFCNjRcXHVBQjY1XFx1QUJDMC1cXHVBQkVBXFx1QUJFQ1xcdUFCRURcXHVBQkYwLVxcdUFCRjlcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFELVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFMDAtXFx1RkUwRlxcdUZFMjAtXFx1RkUyRFxcdUZFMzNcXHVGRTM0XFx1RkU0RC1cXHVGRTRGXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYxMC1cXHVGRjE5XFx1RkYyMS1cXHVGRjNBXFx1RkYzRlxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ118XFx1RDgwMFtcXHVEQzAwLVxcdURDMEJcXHVEQzBELVxcdURDMjZcXHVEQzI4LVxcdURDM0FcXHVEQzNDXFx1REMzRFxcdURDM0YtXFx1REM0RFxcdURDNTAtXFx1REM1RFxcdURDODAtXFx1RENGQVxcdURENDAtXFx1REQ3NFxcdURERkRcXHVERTgwLVxcdURFOUNcXHVERUEwLVxcdURFRDBcXHVERUUwXFx1REYwMC1cXHVERjFGXFx1REYzMC1cXHVERjRBXFx1REY1MC1cXHVERjdBXFx1REY4MC1cXHVERjlEXFx1REZBMC1cXHVERkMzXFx1REZDOC1cXHVERkNGXFx1REZEMS1cXHVERkQ1XXxcXHVEODAxW1xcdURDMDAtXFx1REM5RFxcdURDQTAtXFx1RENBOVxcdUREMDAtXFx1REQyN1xcdUREMzAtXFx1REQ2M1xcdURFMDAtXFx1REYzNlxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY2N118XFx1RDgwMltcXHVEQzAwLVxcdURDMDVcXHVEQzA4XFx1REMwQS1cXHVEQzM1XFx1REMzN1xcdURDMzhcXHVEQzNDXFx1REMzRi1cXHVEQzU1XFx1REM2MC1cXHVEQzc2XFx1REM4MC1cXHVEQzlFXFx1REQwMC1cXHVERDE1XFx1REQyMC1cXHVERDM5XFx1REQ4MC1cXHVEREI3XFx1RERCRVxcdUREQkZcXHVERTAwLVxcdURFMDNcXHVERTA1XFx1REUwNlxcdURFMEMtXFx1REUxM1xcdURFMTUtXFx1REUxN1xcdURFMTktXFx1REUzM1xcdURFMzgtXFx1REUzQVxcdURFM0ZcXHVERTYwLVxcdURFN0NcXHVERTgwLVxcdURFOUNcXHVERUMwLVxcdURFQzdcXHVERUM5LVxcdURFRTZcXHVERjAwLVxcdURGMzVcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNzJcXHVERjgwLVxcdURGOTFdfFxcdUQ4MDNbXFx1REMwMC1cXHVEQzQ4XXxcXHVEODA0W1xcdURDMDAtXFx1REM0NlxcdURDNjYtXFx1REM2RlxcdURDN0YtXFx1RENCQVxcdURDRDAtXFx1RENFOFxcdURDRjAtXFx1RENGOVxcdUREMDAtXFx1REQzNFxcdUREMzYtXFx1REQzRlxcdURENTAtXFx1REQ3M1xcdURENzZcXHVERDgwLVxcdUREQzRcXHVEREQwLVxcdUREREFcXHVERTAwLVxcdURFMTFcXHVERTEzLVxcdURFMzdcXHVERUIwLVxcdURFRUFcXHVERUYwLVxcdURFRjlcXHVERjAxLVxcdURGMDNcXHVERjA1LVxcdURGMENcXHVERjBGXFx1REYxMFxcdURGMTMtXFx1REYyOFxcdURGMkEtXFx1REYzMFxcdURGMzJcXHVERjMzXFx1REYzNS1cXHVERjM5XFx1REYzQy1cXHVERjQ0XFx1REY0N1xcdURGNDhcXHVERjRCLVxcdURGNERcXHVERjU3XFx1REY1RC1cXHVERjYzXFx1REY2Ni1cXHVERjZDXFx1REY3MC1cXHVERjc0XXxcXHVEODA1W1xcdURDODAtXFx1RENDNVxcdURDQzdcXHVEQ0QwLVxcdURDRDlcXHVERDgwLVxcdUREQjVcXHVEREI4LVxcdUREQzBcXHVERTAwLVxcdURFNDBcXHVERTQ0XFx1REU1MC1cXHVERTU5XFx1REU4MC1cXHVERUI3XFx1REVDMC1cXHVERUM5XXxcXHVEODA2W1xcdURDQTAtXFx1RENFOVxcdURDRkZcXHVERUMwLVxcdURFRjhdfFxcdUQ4MDhbXFx1REMwMC1cXHVERjk4XXxcXHVEODA5W1xcdURDMDAtXFx1REM2RV18W1xcdUQ4MENcXHVEODQwLVxcdUQ4NjhcXHVEODZBLVxcdUQ4NkNdW1xcdURDMDAtXFx1REZGRl18XFx1RDgwRFtcXHVEQzAwLVxcdURDMkVdfFxcdUQ4MUFbXFx1REMwMC1cXHVERTM4XFx1REU0MC1cXHVERTVFXFx1REU2MC1cXHVERTY5XFx1REVEMC1cXHVERUVEXFx1REVGMC1cXHVERUY0XFx1REYwMC1cXHVERjM2XFx1REY0MC1cXHVERjQzXFx1REY1MC1cXHVERjU5XFx1REY2My1cXHVERjc3XFx1REY3RC1cXHVERjhGXXxcXHVEODFCW1xcdURGMDAtXFx1REY0NFxcdURGNTAtXFx1REY3RVxcdURGOEYtXFx1REY5Rl18XFx1RDgyQ1tcXHVEQzAwXFx1REMwMV18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTlcXHVEQzlEXFx1REM5RV18XFx1RDgzNFtcXHVERDY1LVxcdURENjlcXHVERDZELVxcdURENzJcXHVERDdCLVxcdUREODJcXHVERDg1LVxcdUREOEJcXHVEREFBLVxcdUREQURcXHVERTQyLVxcdURFNDRdfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQlxcdURGQ0UtXFx1REZGRl18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRcXHVEQ0QwLVxcdURDRDZdfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRF18XFx1RDg3RVtcXHVEQzAwLVxcdURFMURdfFxcdURCNDBbXFx1REQwMC1cXHVEREVGXS9cbn07ZnVuY3Rpb24gdyhlLHQpe2lmKCFlKXt0aHJvdyBuZXcgRXJyb3IoXCJBU1NFUlQ6IFwiK3QpfX1mdW5jdGlvbiBfKGUpe3JldHVybiBlPj00OCYmZTw9NTd9ZnVuY3Rpb24gayhlKXtyZXR1cm5cIjAxMjM0NTY3ODlhYmNkZWZBQkNERUZcIi5pbmRleE9mKGUpPj0wfWZ1bmN0aW9uIEkoZSl7cmV0dXJuXCIwMTIzNDU2N1wiLmluZGV4T2YoZSk+PTB9ZnVuY3Rpb24gUChlKXt2YXIgdD1lIT09XCIwXCIsdT1cIjAxMjM0NTY3XCIuaW5kZXhPZihlKTtpZihmPGcmJkkoYVtmXSkpe3Q9dHJ1ZTt1PXUqOCtcIjAxMjM0NTY3XCIuaW5kZXhPZihhW2YrK10pO2lmKFwiMDEyM1wiLmluZGV4T2YoZSk+PTAmJmY8ZyYmSShhW2ZdKSl7dT11KjgrXCIwMTIzNDU2N1wiLmluZGV4T2YoYVtmKytdKX19cmV0dXJue2NvZGU6dSxvY3RhbDp0fX1mdW5jdGlvbiBMKGUpe3JldHVybiBlPT09MzJ8fGU9PT05fHxlPT09MTF8fGU9PT0xMnx8ZT09PTE2MHx8ZT49NTc2MCYmWzU3NjAsNjE1OCw4MTkyLDgxOTMsODE5NCw4MTk1LDgxOTYsODE5Nyw4MTk4LDgxOTksODIwMCw4MjAxLDgyMDIsODIzOSw4Mjg3LDEyMjg4LDY1Mjc5XS5pbmRleE9mKGUpPj0wfWZ1bmN0aW9uIE8oZSl7cmV0dXJuIGU9PT0xMHx8ZT09PTEzfHxlPT09ODIzMnx8ZT09PTgyMzN9ZnVuY3Rpb24gaihlKXtyZXR1cm4gZTw2NTUzNj9TdHJpbmcuZnJvbUNoYXJDb2RlKGUpOlN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYrKGUtNjU1MzY+PjEwKSkrU3RyaW5nLmZyb21DaGFyQ29kZSg1NjMyMCsoZS02NTUzNiYxMDIzKSl9ZnVuY3Rpb24gTShlKXtyZXR1cm4gZT09PTM2fHxlPT09OTV8fGU+PTY1JiZlPD05MHx8ZT49OTcmJmU8PTEyMnx8ZT09PTkyfHxlPj0xMjgmJnMuTm9uQXNjaWlJZGVudGlmaWVyU3RhcnQudGVzdChqKGUpKX1mdW5jdGlvbiBSKGUpe3JldHVybiBlPT09MzZ8fGU9PT05NXx8ZT49NjUmJmU8PTkwfHxlPj05NyYmZTw9MTIyfHxlPj00OCYmZTw9NTd8fGU9PT05Mnx8ZT49MTI4JiZzLk5vbkFzY2lpSWRlbnRpZmllclBhcnQudGVzdChqKGUpKX1mdW5jdGlvbiBUKGUpe3N3aXRjaChlKXtjYXNlXCJlbnVtXCI6Y2FzZVwiZXhwb3J0XCI6Y2FzZVwiaW1wb3J0XCI6Y2FzZVwic3VwZXJcIjpyZXR1cm4gdHJ1ZTtkZWZhdWx0OnJldHVybiBmYWxzZX19ZnVuY3Rpb24gTihlKXtzd2l0Y2goZSl7Y2FzZVwiaW1wbGVtZW50c1wiOmNhc2VcImludGVyZmFjZVwiOmNhc2VcInBhY2thZ2VcIjpjYXNlXCJwcml2YXRlXCI6Y2FzZVwicHJvdGVjdGVkXCI6Y2FzZVwicHVibGljXCI6Y2FzZVwic3RhdGljXCI6Y2FzZVwieWllbGRcIjpjYXNlXCJsZXRcIjpyZXR1cm4gdHJ1ZTtkZWZhdWx0OnJldHVybiBmYWxzZX19ZnVuY3Rpb24gcShlKXtyZXR1cm4gZT09PVwiZXZhbFwifHxlPT09XCJhcmd1bWVudHNcIn1mdW5jdGlvbiBVKGUpe3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAyOnJldHVybiBlPT09XCJpZlwifHxlPT09XCJpblwifHxlPT09XCJkb1wiO2Nhc2UgMzpyZXR1cm4gZT09PVwidmFyXCJ8fGU9PT1cImZvclwifHxlPT09XCJuZXdcInx8ZT09PVwidHJ5XCJ8fGU9PT1cImxldFwiO2Nhc2UgNDpyZXR1cm4gZT09PVwidGhpc1wifHxlPT09XCJlbHNlXCJ8fGU9PT1cImNhc2VcInx8ZT09PVwidm9pZFwifHxlPT09XCJ3aXRoXCJ8fGU9PT1cImVudW1cIjtjYXNlIDU6cmV0dXJuIGU9PT1cIndoaWxlXCJ8fGU9PT1cImJyZWFrXCJ8fGU9PT1cImNhdGNoXCJ8fGU9PT1cInRocm93XCJ8fGU9PT1cImNvbnN0XCJ8fGU9PT1cInlpZWxkXCJ8fGU9PT1cImNsYXNzXCJ8fGU9PT1cInN1cGVyXCI7Y2FzZSA2OnJldHVybiBlPT09XCJyZXR1cm5cInx8ZT09PVwidHlwZW9mXCJ8fGU9PT1cImRlbGV0ZVwifHxlPT09XCJzd2l0Y2hcInx8ZT09PVwiZXhwb3J0XCJ8fGU9PT1cImltcG9ydFwiO2Nhc2UgNzpyZXR1cm4gZT09PVwiZGVmYXVsdFwifHxlPT09XCJmaW5hbGx5XCJ8fGU9PT1cImV4dGVuZHNcIjtjYXNlIDg6cmV0dXJuIGU9PT1cImZ1bmN0aW9uXCJ8fGU9PT1cImNvbnRpbnVlXCJ8fGU9PT1cImRlYnVnZ2VyXCI7Y2FzZSAxMDpyZXR1cm4gZT09PVwiaW5zdGFuY2VvZlwiO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1mdW5jdGlvbiB6KGUsdCx1LG4scil7dmFyIGk7dyh0eXBlb2YgdT09PVwibnVtYmVyXCIsXCJDb21tZW50IG11c3QgaGF2ZSB2YWxpZCBwb3NpdGlvblwiKTtCLmxhc3RDb21tZW50U3RhcnQ9dTtpPXt0eXBlOmUsdmFsdWU6dH07aWYodi5yYW5nZSl7aS5yYW5nZT1bdSxuXX1pZih2LmxvYyl7aS5sb2M9cn12LmNvbW1lbnRzLnB1c2goaSk7aWYodi5hdHRhY2hDb21tZW50KXt2LmxlYWRpbmdDb21tZW50cy5wdXNoKGkpO3YudHJhaWxpbmdDb21tZW50cy5wdXNoKGkpfX1mdW5jdGlvbiBXKGUpe3ZhciB0LHUsbixyO3Q9Zi1lO3U9e3N0YXJ0OntsaW5lOmMsY29sdW1uOmYtcC1lfX07d2hpbGUoZjxnKXtuPWEuY2hhckNvZGVBdChmKTsrK2Y7aWYoTyhuKSl7RD10cnVlO2lmKHYuY29tbWVudHMpe3I9YS5zbGljZSh0K2UsZi0xKTt1LmVuZD17bGluZTpjLGNvbHVtbjpmLXAtMX07eihcIkxpbmVcIixyLHQsZi0xLHUpfWlmKG49PT0xMyYmYS5jaGFyQ29kZUF0KGYpPT09MTApeysrZn0rK2M7cD1mO3JldHVybn19aWYodi5jb21tZW50cyl7cj1hLnNsaWNlKHQrZSxmKTt1LmVuZD17bGluZTpjLGNvbHVtbjpmLXB9O3ooXCJMaW5lXCIscix0LGYsdSl9fWZ1bmN0aW9uIFYoKXt2YXIgZSx0LHUsbjtpZih2LmNvbW1lbnRzKXtlPWYtMjt0PXtzdGFydDp7bGluZTpjLGNvbHVtbjpmLXAtMn19fXdoaWxlKGY8Zyl7dT1hLmNoYXJDb2RlQXQoZik7aWYoTyh1KSl7aWYodT09PTEzJiZhLmNoYXJDb2RlQXQoZisxKT09PTEwKXsrK2Z9RD10cnVlOysrYzsrK2Y7cD1mfWVsc2UgaWYodT09PTQyKXtpZihhLmNoYXJDb2RlQXQoZisxKT09PTQ3KXsrK2Y7KytmO2lmKHYuY29tbWVudHMpe249YS5zbGljZShlKzIsZi0yKTt0LmVuZD17bGluZTpjLGNvbHVtbjpmLXB9O3ooXCJCbG9ja1wiLG4sZSxmLHQpfXJldHVybn0rK2Z9ZWxzZXsrK2Z9fWlmKHYuY29tbWVudHMpe3QuZW5kPXtsaW5lOmMsY29sdW1uOmYtcH07bj1hLnNsaWNlKGUrMixmKTt6KFwiQmxvY2tcIixuLGUsZix0KX1fZSgpfWZ1bmN0aW9uIFkoKXt2YXIgZSx0O0Q9ZmFsc2U7dD1mPT09MDt3aGlsZShmPGcpe2U9YS5jaGFyQ29kZUF0KGYpO2lmKEwoZSkpeysrZn1lbHNlIGlmKE8oZSkpe0Q9dHJ1ZTsrK2Y7aWYoZT09PTEzJiZhLmNoYXJDb2RlQXQoZik9PT0xMCl7KytmfSsrYztwPWY7dD10cnVlfWVsc2UgaWYoZT09PTQ3KXtlPWEuY2hhckNvZGVBdChmKzEpO2lmKGU9PT00Nyl7KytmOysrZjtXKDIpO3Q9dHJ1ZX1lbHNlIGlmKGU9PT00Mil7KytmOysrZjtWKCl9ZWxzZXticmVha319ZWxzZSBpZih0JiZlPT09NDUpe2lmKGEuY2hhckNvZGVBdChmKzEpPT09NDUmJmEuY2hhckNvZGVBdChmKzIpPT09NjIpe2YrPTM7VygzKX1lbHNle2JyZWFrfX1lbHNlIGlmKGU9PT02MCl7aWYoYS5zbGljZShmKzEsZis0KT09PVwiIS0tXCIpeysrZjsrK2Y7KytmOysrZjtXKDQpfWVsc2V7YnJlYWt9fWVsc2V7YnJlYWt9fX1mdW5jdGlvbiBHKGUpe3ZhciB0LHUsbixyPTA7dT1lPT09XCJ1XCI/NDoyO2Zvcih0PTA7dDx1OysrdCl7aWYoZjxnJiZrKGFbZl0pKXtuPWFbZisrXTtyPXIqMTYrXCIwMTIzNDU2Nzg5YWJjZGVmXCIuaW5kZXhPZihuLnRvTG93ZXJDYXNlKCkpfWVsc2V7cmV0dXJuXCJcIn19cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocil9ZnVuY3Rpb24gSygpe3ZhciBlLHQ7ZT1hW2ZdO3Q9MDtpZihlPT09XCJ9XCIpe3dlKCl9d2hpbGUoZjxnKXtlPWFbZisrXTtpZighayhlKSl7YnJlYWt9dD10KjE2K1wiMDEyMzQ1Njc4OWFiY2RlZlwiLmluZGV4T2YoZS50b0xvd2VyQ2FzZSgpKX1pZih0PjExMTQxMTF8fGUhPT1cIn1cIil7d2UoKX1yZXR1cm4gaih0KX1mdW5jdGlvbiAkKGUpe3ZhciB0LHUsbjt0PWEuY2hhckNvZGVBdChlKTtpZih0Pj01NTI5NiYmdDw9NTYzMTkpe249YS5jaGFyQ29kZUF0KGUrMSk7aWYobj49NTYzMjAmJm48PTU3MzQzKXt1PXQ7dD0odS01NTI5NikqMTAyNCtuLTU2MzIwKzY1NTM2fX1yZXR1cm4gdH1mdW5jdGlvbiBIKCl7dmFyIGUsdCx1O2U9JChmKTt1PWooZSk7Zis9dS5sZW5ndGg7aWYoZT09PTkyKXtpZihhLmNoYXJDb2RlQXQoZikhPT0xMTcpe3dlKCl9KytmO2lmKGFbZl09PT1cIntcIil7KytmO3Q9SygpfWVsc2V7dD1HKFwidVwiKTtlPXQuY2hhckNvZGVBdCgwKTtpZighdHx8dD09PVwiXFxcXFwifHwhTShlKSl7d2UoKX19dT10fXdoaWxlKGY8Zyl7ZT0kKGYpO2lmKCFSKGUpKXticmVha310PWooZSk7dSs9dDtmKz10Lmxlbmd0aDtpZihlPT09OTIpe3U9dS5zdWJzdHIoMCx1Lmxlbmd0aC0xKTtpZihhLmNoYXJDb2RlQXQoZikhPT0xMTcpe3dlKCl9KytmO2lmKGFbZl09PT1cIntcIil7KytmO3Q9SygpfWVsc2V7dD1HKFwidVwiKTtlPXQuY2hhckNvZGVBdCgwKTtpZighdHx8dD09PVwiXFxcXFwifHwhUihlKSl7d2UoKX19dSs9dH19cmV0dXJuIHV9ZnVuY3Rpb24gSigpe3ZhciBlLHQ7ZT1mKys7d2hpbGUoZjxnKXt0PWEuY2hhckNvZGVBdChmKTtpZih0PT09OTIpe2Y9ZTtyZXR1cm4gSCgpfWVsc2UgaWYodD49NTUyOTYmJnQ8NTczNDMpe2Y9ZTtyZXR1cm4gSCgpfWlmKFIodCkpeysrZn1lbHNle2JyZWFrfX1yZXR1cm4gYS5zbGljZShlLGYpfWZ1bmN0aW9uIFgoKXt2YXIgZSx1LG47ZT1mO3U9YS5jaGFyQ29kZUF0KGYpPT09OTI/SCgpOkooKTtpZih1Lmxlbmd0aD09PTEpe249dC5JZGVudGlmaWVyfWVsc2UgaWYoVSh1KSl7bj10LktleXdvcmR9ZWxzZSBpZih1PT09XCJudWxsXCIpe249dC5OdWxsTGl0ZXJhbH1lbHNlIGlmKHU9PT1cInRydWVcInx8dT09PVwiZmFsc2VcIil7bj10LkJvb2xlYW5MaXRlcmFsfWVsc2V7bj10LklkZW50aWZpZXJ9cmV0dXJue3R5cGU6bix2YWx1ZTp1LGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDplLGVuZDpmfX1mdW5jdGlvbiBaKCl7dmFyIGUsdTtlPXt0eXBlOnQuUHVuY3R1YXRvcix2YWx1ZTpcIlwiLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDpmLGVuZDpmfTt1PWFbZl07c3dpdGNoKHUpe2Nhc2VcIihcIjppZih2LnRva2VuaXplKXt2Lm9wZW5QYXJlblRva2VuPXYudG9rZW5zLmxlbmd0aH0rK2Y7YnJlYWs7Y2FzZVwie1wiOmlmKHYudG9rZW5pemUpe3Yub3BlbkN1cmx5VG9rZW49di50b2tlbnMubGVuZ3RofUIuY3VybHlTdGFjay5wdXNoKFwie1wiKTsrK2Y7YnJlYWs7Y2FzZVwiLlwiOisrZjtpZihhW2ZdPT09XCIuXCImJmFbZisxXT09PVwiLlwiKXtmKz0yO3U9XCIuLi5cIn1icmVhaztjYXNlXCJ9XCI6KytmO0IuY3VybHlTdGFjay5wb3AoKTticmVhaztjYXNlXCIpXCI6Y2FzZVwiO1wiOmNhc2VcIixcIjpjYXNlXCJbXCI6Y2FzZVwiXVwiOmNhc2VcIjpcIjpjYXNlXCI/XCI6Y2FzZVwiflwiOisrZjticmVhaztkZWZhdWx0OnU9YS5zdWJzdHIoZiw0KTtpZih1PT09XCI+Pj49XCIpe2YrPTR9ZWxzZXt1PXUuc3Vic3RyKDAsMyk7aWYodT09PVwiPT09XCJ8fHU9PT1cIiE9PVwifHx1PT09XCI+Pj5cInx8dT09PVwiPDw9XCJ8fHU9PT1cIj4+PVwiKXtmKz0zfWVsc2V7dT11LnN1YnN0cigwLDIpO2lmKHU9PT1cIiYmXCJ8fHU9PT1cInx8XCJ8fHU9PT1cIj09XCJ8fHU9PT1cIiE9XCJ8fHU9PT1cIis9XCJ8fHU9PT1cIi09XCJ8fHU9PT1cIio9XCJ8fHU9PT1cIi89XCJ8fHU9PT1cIisrXCJ8fHU9PT1cIi0tXCJ8fHU9PT1cIjw8XCJ8fHU9PT1cIj4+XCJ8fHU9PT1cIiY9XCJ8fHU9PT1cInw9XCJ8fHU9PT1cIl49XCJ8fHU9PT1cIiU9XCJ8fHU9PT1cIjw9XCJ8fHU9PT1cIj49XCJ8fHU9PT1cIj0+XCIpe2YrPTJ9ZWxzZXt1PWFbZl07aWYoXCI8Pj0hKy0qJSZ8Xi9cIi5pbmRleE9mKHUpPj0wKXsrK2Z9fX19fWlmKGY9PT1lLnN0YXJ0KXt3ZSgpfWUuZW5kPWY7ZS52YWx1ZT11O3JldHVybiBlfWZ1bmN0aW9uIFEoZSl7dmFyIHU9XCJcIjt3aGlsZShmPGcpe2lmKCFrKGFbZl0pKXticmVha311Kz1hW2YrK119aWYodS5sZW5ndGg9PT0wKXt3ZSgpfWlmKE0oYS5jaGFyQ29kZUF0KGYpKSl7d2UoKX1yZXR1cm57dHlwZTp0Lk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlSW50KFwiMHhcIit1LDE2KSxsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6ZSxlbmQ6Zn19ZnVuY3Rpb24gZWUoZSl7dmFyIHUsbjtuPVwiXCI7d2hpbGUoZjxnKXt1PWFbZl07aWYodSE9PVwiMFwiJiZ1IT09XCIxXCIpe2JyZWFrfW4rPWFbZisrXX1pZihuLmxlbmd0aD09PTApe3dlKCl9aWYoZjxnKXt1PWEuY2hhckNvZGVBdChmKTtpZihNKHUpfHxfKHUpKXt3ZSgpfX1yZXR1cm57dHlwZTp0Lk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlSW50KG4sMiksbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OmUsZW5kOmZ9fWZ1bmN0aW9uIHRlKGUsdSl7dmFyIG4scjtpZihJKGUpKXtyPXRydWU7bj1cIjBcIithW2YrK119ZWxzZXtyPWZhbHNlOysrZjtuPVwiXCJ9d2hpbGUoZjxnKXtpZighSShhW2ZdKSl7YnJlYWt9bis9YVtmKytdfWlmKCFyJiZuLmxlbmd0aD09PTApe3dlKCl9aWYoTShhLmNoYXJDb2RlQXQoZikpfHxfKGEuY2hhckNvZGVBdChmKSkpe3dlKCl9cmV0dXJue3R5cGU6dC5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUludChuLDgpLG9jdGFsOnIsbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OnUsZW5kOmZ9fWZ1bmN0aW9uIHVlKCl7dmFyIGUsdDtmb3IoZT1mKzE7ZTxnOysrZSl7dD1hW2VdO2lmKHQ9PT1cIjhcInx8dD09PVwiOVwiKXtyZXR1cm4gZmFsc2V9aWYoIUkodCkpe3JldHVybiB0cnVlfX1yZXR1cm4gdHJ1ZX1mdW5jdGlvbiBuZSgpe3ZhciBlLHUsbjtuPWFbZl07dyhfKG4uY2hhckNvZGVBdCgwKSl8fG49PT1cIi5cIixcIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludFwiKTt1PWY7ZT1cIlwiO2lmKG4hPT1cIi5cIil7ZT1hW2YrK107bj1hW2ZdO2lmKGU9PT1cIjBcIil7aWYobj09PVwieFwifHxuPT09XCJYXCIpeysrZjtyZXR1cm4gUSh1KX1pZihuPT09XCJiXCJ8fG49PT1cIkJcIil7KytmO3JldHVybiBlZSh1KX1pZihuPT09XCJvXCJ8fG49PT1cIk9cIil7cmV0dXJuIHRlKG4sdSl9aWYoSShuKSl7aWYodWUoKSl7cmV0dXJuIHRlKG4sdSl9fX13aGlsZShfKGEuY2hhckNvZGVBdChmKSkpe2UrPWFbZisrXX1uPWFbZl19aWYobj09PVwiLlwiKXtlKz1hW2YrK107d2hpbGUoXyhhLmNoYXJDb2RlQXQoZikpKXtlKz1hW2YrK119bj1hW2ZdfWlmKG49PT1cImVcInx8bj09PVwiRVwiKXtlKz1hW2YrK107bj1hW2ZdO2lmKG49PT1cIitcInx8bj09PVwiLVwiKXtlKz1hW2YrK119aWYoXyhhLmNoYXJDb2RlQXQoZikpKXt3aGlsZShfKGEuY2hhckNvZGVBdChmKSkpe2UrPWFbZisrXX19ZWxzZXt3ZSgpfX1pZihNKGEuY2hhckNvZGVBdChmKSkpe3dlKCl9cmV0dXJue3R5cGU6dC5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUZsb2F0KGUpLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDp1LGVuZDpmfX1mdW5jdGlvbiByZSgpe3ZhciBlPVwiXCIsdSxuLHIsaSxvLHM9ZmFsc2U7dT1hW2ZdO3codT09PVwiJ1wifHx1PT09J1wiJyxcIlN0cmluZyBsaXRlcmFsIG11c3Qgc3RhcnRzIHdpdGggYSBxdW90ZVwiKTtuPWY7KytmO3doaWxlKGY8Zyl7cj1hW2YrK107aWYocj09PXUpe3U9XCJcIjticmVha31lbHNlIGlmKHI9PT1cIlxcXFxcIil7cj1hW2YrK107aWYoIXJ8fCFPKHIuY2hhckNvZGVBdCgwKSkpe3N3aXRjaChyKXtjYXNlXCJ1XCI6Y2FzZVwieFwiOmlmKGFbZl09PT1cIntcIil7KytmO2UrPUsoKX1lbHNle2k9RyhyKTtpZighaSl7dGhyb3cgd2UoKX1lKz1pfWJyZWFrO2Nhc2VcIm5cIjplKz1cIlxcblwiO2JyZWFrO2Nhc2VcInJcIjplKz1cIlxcclwiO2JyZWFrO2Nhc2VcInRcIjplKz1cIlx0XCI7YnJlYWs7Y2FzZVwiYlwiOmUrPVwiXFxiXCI7YnJlYWs7Y2FzZVwiZlwiOmUrPVwiXFxmXCI7YnJlYWs7Y2FzZVwidlwiOmUrPVwiXHUwMDBiXCI7YnJlYWs7Y2FzZVwiOFwiOmNhc2VcIjlcIjplKz1yO19lKCk7YnJlYWs7ZGVmYXVsdDppZihJKHIpKXtvPVAocik7cz1vLm9jdGFsfHxzO2UrPVN0cmluZy5mcm9tQ2hhckNvZGUoby5jb2RlKX1lbHNle2UrPXJ9YnJlYWt9fWVsc2V7KytjO2lmKHI9PT1cIlxcclwiJiZhW2ZdPT09XCJcXG5cIil7KytmfXA9Zn19ZWxzZSBpZihPKHIuY2hhckNvZGVBdCgwKSkpe2JyZWFrfWVsc2V7ZSs9cn19aWYodSE9PVwiXCIpe3dlKCl9cmV0dXJue3R5cGU6dC5TdHJpbmdMaXRlcmFsLHZhbHVlOmUsb2N0YWw6cyxsaW5lTnVtYmVyOkMsbGluZVN0YXJ0OkUsc3RhcnQ6bixlbmQ6Zn19ZnVuY3Rpb24gaWUoKXt2YXIgZT1cIlwiLHUsbixyLGkscyxsLEQsaDtpPWZhbHNlO2w9ZmFsc2U7bj1mO3M9YVtmXT09PVwiYFwiO3I9MjsrK2Y7d2hpbGUoZjxnKXt1PWFbZisrXTtpZih1PT09XCJgXCIpe3I9MTtsPXRydWU7aT10cnVlO2JyZWFrfWVsc2UgaWYodT09PVwiJFwiKXtpZihhW2ZdPT09XCJ7XCIpe0IuY3VybHlTdGFjay5wdXNoKFwiJHtcIik7KytmO2k9dHJ1ZTticmVha31lKz11fWVsc2UgaWYodT09PVwiXFxcXFwiKXt1PWFbZisrXTtpZighTyh1LmNoYXJDb2RlQXQoMCkpKXtzd2l0Y2godSl7Y2FzZVwiblwiOmUrPVwiXFxuXCI7YnJlYWs7Y2FzZVwiclwiOmUrPVwiXFxyXCI7YnJlYWs7Y2FzZVwidFwiOmUrPVwiXHRcIjticmVhaztjYXNlXCJ1XCI6Y2FzZVwieFwiOmlmKGFbZl09PT1cIntcIil7KytmO2UrPUsoKX1lbHNle0Q9ZjtoPUcodSk7aWYoaCl7ZSs9aH1lbHNle2Y9RDtlKz11fX1icmVhaztjYXNlXCJiXCI6ZSs9XCJcXGJcIjticmVhaztjYXNlXCJmXCI6ZSs9XCJcXGZcIjticmVhaztjYXNlXCJ2XCI6ZSs9XCJcdTAwMGJcIjticmVhaztkZWZhdWx0OmlmKHU9PT1cIjBcIil7aWYoXyhhLmNoYXJDb2RlQXQoZikpKXtiZShvLlRlbXBsYXRlT2N0YWxMaXRlcmFsKX1lKz1cIlxceDAwXCJ9ZWxzZSBpZihJKHUpKXtiZShvLlRlbXBsYXRlT2N0YWxMaXRlcmFsKX1lbHNle2UrPXV9YnJlYWt9fWVsc2V7KytjO2lmKHU9PT1cIlxcclwiJiZhW2ZdPT09XCJcXG5cIil7KytmfXA9Zn19ZWxzZSBpZihPKHUuY2hhckNvZGVBdCgwKSkpeysrYztpZih1PT09XCJcXHJcIiYmYVtmXT09PVwiXFxuXCIpeysrZn1wPWY7ZSs9XCJcXG5cIn1lbHNle2UrPXV9fWlmKCFpKXt3ZSgpfWlmKCFzKXtCLmN1cmx5U3RhY2sucG9wKCl9cmV0dXJue3R5cGU6dC5UZW1wbGF0ZSx2YWx1ZTp7Y29va2VkOmUscmF3OmEuc2xpY2UobisxLGYtcil9LGhlYWQ6cyx0YWlsOmwsbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0Om4sZW5kOmZ9fWZ1bmN0aW9uIG9lKGUsdCl7dmFyIHU9XCLvv79cIixuPWU7aWYodC5pbmRleE9mKFwidVwiKT49MCl7bj1uLnJlcGxhY2UoL1xcXFx1XFx7KFswLTlhLWZBLUZdKylcXH18XFxcXHUoW2EtZkEtRjAtOV17NH0pL2csZnVuY3Rpb24oZSx0LG4pe3ZhciByPXBhcnNlSW50KHR8fG4sMTYpO2lmKHI+MTExNDExMSl7d2UobnVsbCxvLkludmFsaWRSZWdFeHApfWlmKHI8PTY1NTM1KXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShyKX1yZXR1cm4gdX0pLnJlcGxhY2UoL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vZyx1KX10cnl7UmVnRXhwKG4pfWNhdGNoKHIpe3dlKG51bGwsby5JbnZhbGlkUmVnRXhwKX10cnl7cmV0dXJuIG5ldyBSZWdFeHAoZSx0KX1jYXRjaChpKXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gc2UoKXt2YXIgZSx0LHUsbixyO2U9YVtmXTt3KGU9PT1cIi9cIixcIlJlZ3VsYXIgZXhwcmVzc2lvbiBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIHNsYXNoXCIpO3Q9YVtmKytdO3U9ZmFsc2U7bj1mYWxzZTt3aGlsZShmPGcpe2U9YVtmKytdO3QrPWU7aWYoZT09PVwiXFxcXFwiKXtlPWFbZisrXTtpZihPKGUuY2hhckNvZGVBdCgwKSkpe3dlKG51bGwsby5VbnRlcm1pbmF0ZWRSZWdFeHApfXQrPWV9ZWxzZSBpZihPKGUuY2hhckNvZGVBdCgwKSkpe3dlKG51bGwsby5VbnRlcm1pbmF0ZWRSZWdFeHApfWVsc2UgaWYodSl7aWYoZT09PVwiXVwiKXt1PWZhbHNlfX1lbHNle2lmKGU9PT1cIi9cIil7bj10cnVlO2JyZWFrfWVsc2UgaWYoZT09PVwiW1wiKXt1PXRydWV9fX1pZighbil7d2UobnVsbCxvLlVudGVybWluYXRlZFJlZ0V4cCl9cj10LnN1YnN0cigxLHQubGVuZ3RoLTIpO3JldHVybnt2YWx1ZTpyLGxpdGVyYWw6dH19ZnVuY3Rpb24gYWUoKXt2YXIgZSx0LHUsbjt0PVwiXCI7dT1cIlwiO3doaWxlKGY8Zyl7ZT1hW2ZdO2lmKCFSKGUuY2hhckNvZGVBdCgwKSkpe2JyZWFrfSsrZjtpZihlPT09XCJcXFxcXCImJmY8Zyl7ZT1hW2ZdO2lmKGU9PT1cInVcIil7KytmO249ZjtlPUcoXCJ1XCIpO2lmKGUpe3UrPWU7Zm9yKHQrPVwiXFxcXHVcIjtuPGY7KytuKXt0Kz1hW25dfX1lbHNle2Y9bjt1Kz1cInVcIjt0Kz1cIlxcXFx1XCJ9X2UoKX1lbHNle3QrPVwiXFxcXFwiO19lKCl9fWVsc2V7dSs9ZTt0Kz1lfX1yZXR1cm57dmFsdWU6dSxsaXRlcmFsOnR9fWZ1bmN0aW9uIGxlKCl7dmFyIGUsdSxuLHI7Rj10cnVlO3k9bnVsbDtZKCk7ZT1mO3U9c2UoKTtuPWFlKCk7cj1vZSh1LnZhbHVlLG4udmFsdWUpO0Y9ZmFsc2U7aWYodi50b2tlbml6ZSl7cmV0dXJue3R5cGU6dC5SZWd1bGFyRXhwcmVzc2lvbix2YWx1ZTpyLHJlZ2V4OntwYXR0ZXJuOnUudmFsdWUsZmxhZ3M6bi52YWx1ZX0sbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OmUsZW5kOmZ9fXJldHVybntsaXRlcmFsOnUubGl0ZXJhbCtuLmxpdGVyYWwsdmFsdWU6cixyZWdleDp7cGF0dGVybjp1LnZhbHVlLGZsYWdzOm4udmFsdWV9LHN0YXJ0OmUsZW5kOmZ9fWZ1bmN0aW9uIGZlKCl7dmFyIGUsdCx1LG47WSgpO2U9Zjt0PXtzdGFydDp7bGluZTpjLGNvbHVtbjpmLXB9fTt1PWxlKCk7dC5lbmQ9e2xpbmU6Yyxjb2x1bW46Zi1wfTtpZighdi50b2tlbml6ZSl7aWYodi50b2tlbnMubGVuZ3RoPjApe249di50b2tlbnNbdi50b2tlbnMubGVuZ3RoLTFdO2lmKG4ucmFuZ2VbMF09PT1lJiZuLnR5cGU9PT1cIlB1bmN0dWF0b3JcIil7aWYobi52YWx1ZT09PVwiL1wifHxuLnZhbHVlPT09XCIvPVwiKXt2LnRva2Vucy5wb3AoKX19fXYudG9rZW5zLnB1c2goe3R5cGU6XCJSZWd1bGFyRXhwcmVzc2lvblwiLHZhbHVlOnUubGl0ZXJhbCxyZWdleDp1LnJlZ2V4LHJhbmdlOltlLGZdLGxvYzp0fSl9cmV0dXJuIHV9ZnVuY3Rpb24gY2UoZSl7cmV0dXJuIGUudHlwZT09PXQuSWRlbnRpZmllcnx8ZS50eXBlPT09dC5LZXl3b3JkfHxlLnR5cGU9PT10LkJvb2xlYW5MaXRlcmFsfHxlLnR5cGU9PT10Lk51bGxMaXRlcmFsfWZ1bmN0aW9uIHBlKCl7dmFyIGUsdDtlPXYudG9rZW5zW3YudG9rZW5zLmxlbmd0aC0xXTtpZighZSl7cmV0dXJuIGZlKCl9aWYoZS50eXBlPT09XCJQdW5jdHVhdG9yXCIpe2lmKGUudmFsdWU9PT1cIl1cIil7cmV0dXJuIFooKX1pZihlLnZhbHVlPT09XCIpXCIpe3Q9di50b2tlbnNbdi5vcGVuUGFyZW5Ub2tlbi0xXTtpZih0JiZ0LnR5cGU9PT1cIktleXdvcmRcIiYmKHQudmFsdWU9PT1cImlmXCJ8fHQudmFsdWU9PT1cIndoaWxlXCJ8fHQudmFsdWU9PT1cImZvclwifHx0LnZhbHVlPT09XCJ3aXRoXCIpKXtyZXR1cm4gZmUoKX1yZXR1cm4gWigpfWlmKGUudmFsdWU9PT1cIn1cIil7aWYodi50b2tlbnNbdi5vcGVuQ3VybHlUb2tlbi0zXSYmdi50b2tlbnNbdi5vcGVuQ3VybHlUb2tlbi0zXS50eXBlPT09XCJLZXl3b3JkXCIpe3Q9di50b2tlbnNbdi5vcGVuQ3VybHlUb2tlbi00XTtpZighdCl7cmV0dXJuIFooKX19ZWxzZSBpZih2LnRva2Vuc1t2Lm9wZW5DdXJseVRva2VuLTRdJiZ2LnRva2Vuc1t2Lm9wZW5DdXJseVRva2VuLTRdLnR5cGU9PT1cIktleXdvcmRcIil7dD12LnRva2Vuc1t2Lm9wZW5DdXJseVRva2VuLTVdO2lmKCF0KXtyZXR1cm4gZmUoKX19ZWxzZXtyZXR1cm4gWigpfWlmKG4uaW5kZXhPZih0LnZhbHVlKT49MCl7cmV0dXJuIFooKX1yZXR1cm4gZmUoKX1yZXR1cm4gZmUoKX1pZihlLnR5cGU9PT1cIktleXdvcmRcIiYmZS52YWx1ZSE9PVwidGhpc1wiKXtyZXR1cm4gZmUoKX1yZXR1cm4gWigpfWZ1bmN0aW9uIERlKCl7dmFyIGUsdTtpZihmPj1nKXtyZXR1cm57dHlwZTp0LkVPRixsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6ZixlbmQ6Zn19ZT1hLmNoYXJDb2RlQXQoZik7aWYoTShlKSl7dT1YKCk7aWYobCYmTih1LnZhbHVlKSl7dS50eXBlPXQuS2V5d29yZH1yZXR1cm4gdX1pZihlPT09NDB8fGU9PT00MXx8ZT09PTU5KXtyZXR1cm4gWigpfWlmKGU9PT0zOXx8ZT09PTM0KXtyZXR1cm4gcmUoKX1pZihlPT09NDYpe2lmKF8oYS5jaGFyQ29kZUF0KGYrMSkpKXtyZXR1cm4gbmUoKX1yZXR1cm4gWigpfWlmKF8oZSkpe3JldHVybiBuZSgpfWlmKHYudG9rZW5pemUmJmU9PT00Nyl7cmV0dXJuIHBlKCl9aWYoZT09PTk2fHxlPT09MTI1JiZCLmN1cmx5U3RhY2tbQi5jdXJseVN0YWNrLmxlbmd0aC0xXT09PVwiJHtcIil7cmV0dXJuIGllKCl9aWYoZT49NTUyOTYmJmU8NTczNDMpe2U9JChmKTtpZihNKGUpKXtyZXR1cm4gWCgpfX1yZXR1cm4gWigpfWZ1bmN0aW9uIGhlKCl7dmFyIGUsbixyLGk7ZT17c3RhcnQ6e2xpbmU6Yyxjb2x1bW46Zi1wfX07bj1EZSgpO2UuZW5kPXtsaW5lOmMsY29sdW1uOmYtcH07aWYobi50eXBlIT09dC5FT0Ype3I9YS5zbGljZShuLnN0YXJ0LG4uZW5kKTtpPXt0eXBlOnVbbi50eXBlXSx2YWx1ZTpyLHJhbmdlOltuLnN0YXJ0LG4uZW5kXSxsb2M6ZX07aWYobi5yZWdleCl7aS5yZWdleD17cGF0dGVybjpuLnJlZ2V4LnBhdHRlcm4sZmxhZ3M6bi5yZWdleC5mbGFnc319di50b2tlbnMucHVzaChpKX1yZXR1cm4gbn1mdW5jdGlvbiBtZSgpe3ZhciBlO0Y9dHJ1ZTtoPWY7bT1jO2Q9cDtZKCk7ZT15O0E9ZjtDPWM7RT1wO3k9dHlwZW9mIHYudG9rZW5zIT09XCJ1bmRlZmluZWRcIj9oZSgpOkRlKCk7Rj1mYWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBkZSgpe0Y9dHJ1ZTtZKCk7aD1mO209YztkPXA7QT1mO0M9YztFPXA7eT10eXBlb2Ygdi50b2tlbnMhPT1cInVuZGVmaW5lZFwiP2hlKCk6RGUoKTtGPWZhbHNlfWZ1bmN0aW9uIEFlKCl7dGhpcy5saW5lPUM7dGhpcy5jb2x1bW49QS1FfWZ1bmN0aW9uIENlKCl7dGhpcy5zdGFydD1uZXcgQWU7dGhpcy5lbmQ9bnVsbH1mdW5jdGlvbiBFZShlKXt0aGlzLnN0YXJ0PXtsaW5lOmUubGluZU51bWJlcixjb2x1bW46ZS5zdGFydC1lLmxpbmVTdGFydH07dGhpcy5lbmQ9bnVsbH1mdW5jdGlvbiBGZSgpe2lmKHYucmFuZ2Upe3RoaXMucmFuZ2U9W0EsMF19aWYodi5sb2Mpe3RoaXMubG9jPW5ldyBDZX19ZnVuY3Rpb24gZ2UoZSl7aWYodi5yYW5nZSl7dGhpcy5yYW5nZT1bZS5zdGFydCwwXX1pZih2LmxvYyl7dGhpcy5sb2M9bmV3IEVlKGUpfX1nZS5wcm90b3R5cGU9RmUucHJvdG90eXBlPXtwcm9jZXNzQ29tbWVudDpmdW5jdGlvbigpe3ZhciBlLHQsdSxuPXYuYm90dG9tUmlnaHRTdGFjayxpLG8scz1uW24ubGVuZ3RoLTFdO2lmKHRoaXMudHlwZT09PXIuUHJvZ3JhbSl7aWYodGhpcy5ib2R5Lmxlbmd0aD4wKXtyZXR1cm59fWlmKHYudHJhaWxpbmdDb21tZW50cy5sZW5ndGg+MCl7dT1bXTtmb3IoaT12LnRyYWlsaW5nQ29tbWVudHMubGVuZ3RoLTE7aT49MDstLWkpe289di50cmFpbGluZ0NvbW1lbnRzW2ldO2lmKG8ucmFuZ2VbMF0+PXRoaXMucmFuZ2VbMV0pe3UudW5zaGlmdChvKTt2LnRyYWlsaW5nQ29tbWVudHMuc3BsaWNlKGksMSl9fXYudHJhaWxpbmdDb21tZW50cz1bXX1lbHNle2lmKHMmJnMudHJhaWxpbmdDb21tZW50cyYmcy50cmFpbGluZ0NvbW1lbnRzWzBdLnJhbmdlWzBdPj10aGlzLnJhbmdlWzFdKXt1PXMudHJhaWxpbmdDb21tZW50cztkZWxldGUgcy50cmFpbGluZ0NvbW1lbnRzfX13aGlsZShzJiZzLnJhbmdlWzBdPj10aGlzLnJhbmdlWzBdKXtlPW4ucG9wKCk7cz1uW24ubGVuZ3RoLTFdfWlmKGUpe2lmKGUubGVhZGluZ0NvbW1lbnRzKXt0PVtdO2ZvcihpPWUubGVhZGluZ0NvbW1lbnRzLmxlbmd0aC0xO2k+PTA7LS1pKXtvPWUubGVhZGluZ0NvbW1lbnRzW2ldO2lmKG8ucmFuZ2VbMV08PXRoaXMucmFuZ2VbMF0pe3QudW5zaGlmdChvKTtlLmxlYWRpbmdDb21tZW50cy5zcGxpY2UoaSwxKX19aWYoIWUubGVhZGluZ0NvbW1lbnRzLmxlbmd0aCl7ZS5sZWFkaW5nQ29tbWVudHM9dW5kZWZpbmVkfX19ZWxzZSBpZih2LmxlYWRpbmdDb21tZW50cy5sZW5ndGg+MCl7dD1bXTtmb3IoaT12LmxlYWRpbmdDb21tZW50cy5sZW5ndGgtMTtpPj0wOy0taSl7bz12LmxlYWRpbmdDb21tZW50c1tpXTtpZihvLnJhbmdlWzFdPD10aGlzLnJhbmdlWzBdKXt0LnVuc2hpZnQobyk7di5sZWFkaW5nQ29tbWVudHMuc3BsaWNlKGksMSl9fX1pZih0JiZ0Lmxlbmd0aD4wKXt0aGlzLmxlYWRpbmdDb21tZW50cz10fWlmKHUmJnUubGVuZ3RoPjApe3RoaXMudHJhaWxpbmdDb21tZW50cz11fW4ucHVzaCh0aGlzKX0sZmluaXNoOmZ1bmN0aW9uKCl7aWYodi5yYW5nZSl7dGhpcy5yYW5nZVsxXT1ofWlmKHYubG9jKXt0aGlzLmxvYy5lbmQ9e2xpbmU6bSxjb2x1bW46aC1kfTtpZih2LnNvdXJjZSl7dGhpcy5sb2Muc291cmNlPXYuc291cmNlfX1pZih2LmF0dGFjaENvbW1lbnQpe3RoaXMucHJvY2Vzc0NvbW1lbnQoKX19LGZpbmlzaEFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5BcnJheUV4cHJlc3Npb247dGhpcy5lbGVtZW50cz1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEFycmF5UGF0dGVybjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5BcnJheVBhdHRlcm47dGhpcy5lbGVtZW50cz1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEFycm93RnVuY3Rpb25FeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1LG4pe3RoaXMudHlwZT1yLkFycm93RnVuY3Rpb25FeHByZXNzaW9uO3RoaXMuaWQ9bnVsbDt0aGlzLnBhcmFtcz1lO3RoaXMuZGVmYXVsdHM9dDt0aGlzLmJvZHk9dTt0aGlzLmdlbmVyYXRvcj1mYWxzZTt0aGlzLmV4cHJlc3Npb249bjt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hBc3NpZ25tZW50RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuQXNzaWdubWVudEV4cHJlc3Npb247dGhpcy5vcGVyYXRvcj1lO3RoaXMubGVmdD10O3RoaXMucmlnaHQ9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hBc3NpZ25tZW50UGF0dGVybjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkFzc2lnbm1lbnRQYXR0ZXJuO3RoaXMubGVmdD1lO3RoaXMucmlnaHQ9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ZT09PVwifHxcInx8ZT09PVwiJiZcIj9yLkxvZ2ljYWxFeHByZXNzaW9uOnIuQmluYXJ5RXhwcmVzc2lvbjt0aGlzLm9wZXJhdG9yPWU7dGhpcy5sZWZ0PXQ7dGhpcy5yaWdodD11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEJsb2NrU3RhdGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkJsb2NrU3RhdGVtZW50O3RoaXMuYm9keT1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEJyZWFrU3RhdGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkJyZWFrU3RhdGVtZW50O3RoaXMubGFiZWw9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDYWxsRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkNhbGxFeHByZXNzaW9uO3RoaXMuY2FsbGVlPWU7dGhpcy5hcmd1bWVudHM9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDYXRjaENsYXVzZTpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkNhdGNoQ2xhdXNlO3RoaXMucGFyYW09ZTt0aGlzLmJvZHk9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDbGFzc0JvZHk6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuQ2xhc3NCb2R5O3RoaXMuYm9keT1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENsYXNzRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkNsYXNzRGVjbGFyYXRpb247dGhpcy5pZD1lO3RoaXMuc3VwZXJDbGFzcz10O3RoaXMuYm9keT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENsYXNzRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuQ2xhc3NFeHByZXNzaW9uO3RoaXMuaWQ9ZTt0aGlzLnN1cGVyQ2xhc3M9dDt0aGlzLmJvZHk9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDb25kaXRpb25hbEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjt0aGlzLnRlc3Q9ZTt0aGlzLmNvbnNlcXVlbnQ9dDt0aGlzLmFsdGVybmF0ZT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaENvbnRpbnVlU3RhdGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkNvbnRpbnVlU3RhdGVtZW50O3RoaXMubGFiZWw9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hEZWJ1Z2dlclN0YXRlbWVudDpmdW5jdGlvbigpe3RoaXMudHlwZT1yLkRlYnVnZ2VyU3RhdGVtZW50O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaERvV2hpbGVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5Eb1doaWxlU3RhdGVtZW50O3RoaXMuYm9keT1lO3RoaXMudGVzdD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEVtcHR5U3RhdGVtZW50OmZ1bmN0aW9uKCl7dGhpcy50eXBlPXIuRW1wdHlTdGF0ZW1lbnQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRXhwcmVzc2lvblN0YXRlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5FeHByZXNzaW9uU3RhdGVtZW50O3RoaXMuZXhwcmVzc2lvbj1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEZvclN0YXRlbWVudDpmdW5jdGlvbihlLHQsdSxuKXt0aGlzLnR5cGU9ci5Gb3JTdGF0ZW1lbnQ7dGhpcy5pbml0PWU7dGhpcy50ZXN0PXQ7dGhpcy51cGRhdGU9dTt0aGlzLmJvZHk9bjt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hGb3JPZlN0YXRlbWVudDpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuRm9yT2ZTdGF0ZW1lbnQ7dGhpcy5sZWZ0PWU7dGhpcy5yaWdodD10O3RoaXMuYm9keT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEZvckluU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5Gb3JJblN0YXRlbWVudDt0aGlzLmxlZnQ9ZTt0aGlzLnJpZ2h0PXQ7dGhpcy5ib2R5PXU7dGhpcy5lYWNoPWZhbHNlO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEZ1bmN0aW9uRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0LHUsbixpKXt0aGlzLnR5cGU9ci5GdW5jdGlvbkRlY2xhcmF0aW9uO3RoaXMuaWQ9ZTt0aGlzLnBhcmFtcz10O3RoaXMuZGVmYXVsdHM9dTt0aGlzLmJvZHk9bjt0aGlzLmdlbmVyYXRvcj1pO3RoaXMuZXhwcmVzc2lvbj1mYWxzZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hGdW5jdGlvbkV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUsbixpKXt0aGlzLnR5cGU9ci5GdW5jdGlvbkV4cHJlc3Npb247dGhpcy5pZD1lO3RoaXMucGFyYW1zPXQ7dGhpcy5kZWZhdWx0cz11O3RoaXMuYm9keT1uO3RoaXMuZ2VuZXJhdG9yPWk7dGhpcy5leHByZXNzaW9uPWZhbHNlO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaElkZW50aWZpZXI6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuSWRlbnRpZmllcjt0aGlzLm5hbWU9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hJZlN0YXRlbWVudDpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuSWZTdGF0ZW1lbnQ7dGhpcy50ZXN0PWU7dGhpcy5jb25zZXF1ZW50PXQ7dGhpcy5hbHRlcm5hdGU9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuTGFiZWxlZFN0YXRlbWVudDt0aGlzLmxhYmVsPWU7dGhpcy5ib2R5PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoTGl0ZXJhbDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5MaXRlcmFsO3RoaXMudmFsdWU9ZS52YWx1ZTt0aGlzLnJhdz1hLnNsaWNlKGUuc3RhcnQsZS5lbmQpO2lmKGUucmVnZXgpe3RoaXMucmVnZXg9ZS5yZWdleH10aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5NZW1iZXJFeHByZXNzaW9uO3RoaXMuY29tcHV0ZWQ9ZT09PVwiW1wiO3RoaXMub2JqZWN0PXQ7dGhpcy5wcm9wZXJ0eT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaE1ldGFQcm9wZXJ0eTpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLk1ldGFQcm9wZXJ0eTt0aGlzLm1ldGE9ZTt0aGlzLnByb3BlcnR5PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoTmV3RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLk5ld0V4cHJlc3Npb247dGhpcy5jYWxsZWU9ZTt0aGlzLmFyZ3VtZW50cz10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaE9iamVjdEV4cHJlc3Npb246ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuT2JqZWN0RXhwcmVzc2lvbjt0aGlzLnByb3BlcnRpZXM9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hPYmplY3RQYXR0ZXJuOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLk9iamVjdFBhdHRlcm47dGhpcy5wcm9wZXJ0aWVzPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoUG9zdGZpeEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5VcGRhdGVFeHByZXNzaW9uO3RoaXMub3BlcmF0b3I9ZTt0aGlzLmFyZ3VtZW50PXQ7dGhpcy5wcmVmaXg9ZmFsc2U7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoUHJvZ3JhbTpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlByb2dyYW07dGhpcy5ib2R5PWU7dGhpcy5zb3VyY2VUeXBlPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHUsbixpLG8pe3RoaXMudHlwZT1yLlByb3BlcnR5O3RoaXMua2V5PXQ7dGhpcy5jb21wdXRlZD11O3RoaXMudmFsdWU9bjt0aGlzLmtpbmQ9ZTt0aGlzLm1ldGhvZD1pO3RoaXMuc2hvcnRoYW5kPW87dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoUmVzdEVsZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuUmVzdEVsZW1lbnQ7dGhpcy5hcmd1bWVudD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFJldHVyblN0YXRlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5SZXR1cm5TdGF0ZW1lbnQ7dGhpcy5hcmd1bWVudD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFNlcXVlbmNlRXhwcmVzc2lvbjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5TZXF1ZW5jZUV4cHJlc3Npb247dGhpcy5leHByZXNzaW9ucz1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFNwcmVhZEVsZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuU3ByZWFkRWxlbWVudDt0aGlzLmFyZ3VtZW50PWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoU3dpdGNoQ2FzZTpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlN3aXRjaENhc2U7dGhpcy50ZXN0PWU7dGhpcy5jb25zZXF1ZW50PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoU3VwZXI6ZnVuY3Rpb24oKXt0aGlzLnR5cGU9ci5TdXBlcjt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hTd2l0Y2hTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5Td2l0Y2hTdGF0ZW1lbnQ7dGhpcy5kaXNjcmltaW5hbnQ9ZTt0aGlzLmNhc2VzPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uO3RoaXMudGFnPWU7dGhpcy5xdWFzaT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFRlbXBsYXRlRWxlbWVudDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlRlbXBsYXRlRWxlbWVudDt0aGlzLnZhbHVlPWU7dGhpcy50YWlsPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVGVtcGxhdGVMaXRlcmFsOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuVGVtcGxhdGVMaXRlcmFsO3RoaXMucXVhc2lzPWU7dGhpcy5leHByZXNzaW9ucz10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFRoaXNFeHByZXNzaW9uOmZ1bmN0aW9uKCl7dGhpcy50eXBlPXIuVGhpc0V4cHJlc3Npb247dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVGhyb3dTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuVGhyb3dTdGF0ZW1lbnQ7dGhpcy5hcmd1bWVudD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFRyeVN0YXRlbWVudDpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuVHJ5U3RhdGVtZW50O3RoaXMuYmxvY2s9ZTt0aGlzLmd1YXJkZWRIYW5kbGVycz1bXTt0aGlzLmhhbmRsZXJzPXQ/W3RdOltdO3RoaXMuaGFuZGxlcj10O3RoaXMuZmluYWxpemVyPXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPWU9PT1cIisrXCJ8fGU9PT1cIi0tXCI/ci5VcGRhdGVFeHByZXNzaW9uOnIuVW5hcnlFeHByZXNzaW9uO3RoaXMub3BlcmF0b3I9ZTt0aGlzLmFyZ3VtZW50PXQ7dGhpcy5wcmVmaXg9dHJ1ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hWYXJpYWJsZURlY2xhcmF0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLlZhcmlhYmxlRGVjbGFyYXRpb247dGhpcy5kZWNsYXJhdGlvbnM9ZTt0aGlzLmtpbmQ9XCJ2YXJcIjt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hMZXhpY2FsRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5WYXJpYWJsZURlY2xhcmF0aW9uO3RoaXMuZGVjbGFyYXRpb25zPWU7dGhpcy5raW5kPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVmFyaWFibGVEZWNsYXJhdG9yOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuVmFyaWFibGVEZWNsYXJhdG9yO3RoaXMuaWQ9ZTt0aGlzLmluaXQ9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hXaGlsZVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLldoaWxlU3RhdGVtZW50O3RoaXMudGVzdD1lO3RoaXMuYm9keT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFdpdGhTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5XaXRoU3RhdGVtZW50O3RoaXMub2JqZWN0PWU7dGhpcy5ib2R5PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRXhwb3J0U3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuRXhwb3J0U3BlY2lmaWVyO3RoaXMuZXhwb3J0ZWQ9dHx8ZTt0aGlzLmxvY2FsPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoSW1wb3J0RGVmYXVsdFNwZWNpZmllcjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5JbXBvcnREZWZhdWx0U3BlY2lmaWVyO3RoaXMubG9jYWw9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXI6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyO3RoaXMubG9jYWw9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hFeHBvcnROYW1lZERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5FeHBvcnROYW1lZERlY2xhcmF0aW9uO3RoaXMuZGVjbGFyYXRpb249ZTt0aGlzLnNwZWNpZmllcnM9dDt0aGlzLnNvdXJjZT11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5FeHBvcnREZWZhdWx0RGVjbGFyYXRpb247dGhpcy5kZWNsYXJhdGlvbj1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEV4cG9ydEFsbERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkV4cG9ydEFsbERlY2xhcmF0aW9uO3RoaXMuc291cmNlPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoSW1wb3J0U3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuSW1wb3J0U3BlY2lmaWVyO3RoaXMubG9jYWw9ZXx8dDt0aGlzLmltcG9ydGVkPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoSW1wb3J0RGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5JbXBvcnREZWNsYXJhdGlvbjt0aGlzLnNwZWNpZmllcnM9ZTt0aGlzLnNvdXJjZT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFlpZWxkRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLllpZWxkRXhwcmVzc2lvbjt0aGlzLmFyZ3VtZW50PWU7dGhpcy5kZWxlZ2F0ZT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9fTtmdW5jdGlvbiB5ZShlKXt2YXIgdCx1O2Zvcih0PTA7dDx2LmVycm9ycy5sZW5ndGg7dCsrKXt1PXYuZXJyb3JzW3RdO2lmKHUuaW5kZXg9PT1lLmluZGV4JiZ1Lm1lc3NhZ2U9PT1lLm1lc3NhZ2Upe3JldHVybn19di5lcnJvcnMucHVzaChlKX1mdW5jdGlvbiBCZShlLHQpe3ZhciB1PW5ldyBFcnJvcihlKTt0cnl7dGhyb3cgdX1jYXRjaChuKXtpZihPYmplY3QuY3JlYXRlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkpe3U9T2JqZWN0LmNyZWF0ZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodSxcImNvbHVtblwiLHt2YWx1ZTp0fSl9fWZpbmFsbHl7cmV0dXJuIHV9fWZ1bmN0aW9uIHZlKGUsdCx1KXt2YXIgbixyLGk7bj1cIkxpbmUgXCIrZStcIjogXCIrdTtyPXQtKEY/cDpkKSsxO2k9QmUobixyKTtpLmxpbmVOdW1iZXI9ZTtpLmRlc2NyaXB0aW9uPXU7aS5pbmRleD10O3JldHVybiBpfWZ1bmN0aW9uIGJlKGUpe3ZhciB0LHU7dD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dT1lLnJlcGxhY2UoLyUoXFxkKS9nLGZ1bmN0aW9uKGUsdSl7dyh1PHQubGVuZ3RoLFwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZVwiKTtyZXR1cm4gdFt1XX0pO3Rocm93IHZlKG0saCx1KX1mdW5jdGlvbiBTZShlKXt2YXIgdCx1LG47dD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dT1lLnJlcGxhY2UoLyUoXFxkKS9nLGZ1bmN0aW9uKGUsdSl7dyh1PHQubGVuZ3RoLFwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZVwiKTtyZXR1cm4gdFt1XX0pO249dmUoYyxoLHUpO2lmKHYuZXJyb3JzKXt5ZShuKX1lbHNle3Rocm93IG59fWZ1bmN0aW9uIHhlKGUsdSl7dmFyIG4scj11fHxvLlVuZXhwZWN0ZWRUb2tlbjtpZihlKXtpZighdSl7cj1lLnR5cGU9PT10LkVPRj9vLlVuZXhwZWN0ZWRFT1M6ZS50eXBlPT09dC5JZGVudGlmaWVyP28uVW5leHBlY3RlZElkZW50aWZpZXI6ZS50eXBlPT09dC5OdW1lcmljTGl0ZXJhbD9vLlVuZXhwZWN0ZWROdW1iZXI6ZS50eXBlPT09dC5TdHJpbmdMaXRlcmFsP28uVW5leHBlY3RlZFN0cmluZzplLnR5cGU9PT10LlRlbXBsYXRlP28uVW5leHBlY3RlZFRlbXBsYXRlOm8uVW5leHBlY3RlZFRva2VuO2lmKGUudHlwZT09PXQuS2V5d29yZCl7aWYoVChlLnZhbHVlKSl7cj1vLlVuZXhwZWN0ZWRSZXNlcnZlZH1lbHNlIGlmKGwmJk4oZS52YWx1ZSkpe3I9by5TdHJpY3RSZXNlcnZlZFdvcmR9fX1uPWUudHlwZT09PXQuVGVtcGxhdGU/ZS52YWx1ZS5yYXc6ZS52YWx1ZX1lbHNle249XCJJTExFR0FMXCJ9cj1yLnJlcGxhY2UoXCIlMFwiLG4pO3JldHVybiBlJiZ0eXBlb2YgZS5saW5lTnVtYmVyPT09XCJudW1iZXJcIj92ZShlLmxpbmVOdW1iZXIsZS5zdGFydCxyKTp2ZShGP2M6bSxGP2Y6aCxyKX1mdW5jdGlvbiB3ZShlLHQpe3Rocm93IHhlKGUsdCl9ZnVuY3Rpb24gX2UoZSx0KXt2YXIgdT14ZShlLHQpO2lmKHYuZXJyb3JzKXt5ZSh1KX1lbHNle3Rocm93IHV9fWZ1bmN0aW9uIGtlKGUpe3ZhciB1PW1lKCk7aWYodS50eXBlIT09dC5QdW5jdHVhdG9yfHx1LnZhbHVlIT09ZSl7d2UodSl9fWZ1bmN0aW9uIEllKCl7dmFyIGU7aWYodi5lcnJvcnMpe2U9eTtpZihlLnR5cGU9PT10LlB1bmN0dWF0b3ImJmUudmFsdWU9PT1cIixcIil7bWUoKX1lbHNlIGlmKGUudHlwZT09PXQuUHVuY3R1YXRvciYmZS52YWx1ZT09PVwiO1wiKXttZSgpO19lKGUpfWVsc2V7X2UoZSxvLlVuZXhwZWN0ZWRUb2tlbil9fWVsc2V7a2UoXCIsXCIpfX1mdW5jdGlvbiBQZShlKXt2YXIgdT1tZSgpO2lmKHUudHlwZSE9PXQuS2V5d29yZHx8dS52YWx1ZSE9PWUpe3dlKHUpfX1mdW5jdGlvbiBMZShlKXtyZXR1cm4geS50eXBlPT09dC5QdW5jdHVhdG9yJiZ5LnZhbHVlPT09ZX1mdW5jdGlvbiBPZShlKXtyZXR1cm4geS50eXBlPT09dC5LZXl3b3JkJiZ5LnZhbHVlPT09ZX1mdW5jdGlvbiBqZShlKXtyZXR1cm4geS50eXBlPT09dC5JZGVudGlmaWVyJiZ5LnZhbHVlPT09ZX1mdW5jdGlvbiBNZSgpe3ZhciBlO2lmKHkudHlwZSE9PXQuUHVuY3R1YXRvcil7cmV0dXJuIGZhbHNlfWU9eS52YWx1ZTtyZXR1cm4gZT09PVwiPVwifHxlPT09XCIqPVwifHxlPT09XCIvPVwifHxlPT09XCIlPVwifHxlPT09XCIrPVwifHxlPT09XCItPVwifHxlPT09XCI8PD1cInx8ZT09PVwiPj49XCJ8fGU9PT1cIj4+Pj1cInx8ZT09PVwiJj1cInx8ZT09PVwiXj1cInx8ZT09PVwifD1cIn1mdW5jdGlvbiBSZSgpe2lmKGEuY2hhckNvZGVBdChBKT09PTU5fHxMZShcIjtcIikpe21lKCk7cmV0dXJufWlmKEQpe3JldHVybn1oPUE7bT1DO2Q9RTtpZih5LnR5cGUhPT10LkVPRiYmIUxlKFwifVwiKSl7d2UoeSl9fWZ1bmN0aW9uIFRlKGUpe3ZhciB0PWIsdT1TLG49eCxyO2I9dHJ1ZTtTPXRydWU7eD1udWxsO3I9ZSgpO2lmKHghPT1udWxsKXt3ZSh4KX1iPXQ7Uz11O3g9bjtyZXR1cm4gcn1mdW5jdGlvbiBOZShlKXt2YXIgdD1iLHU9UyxuPXgscjtiPXRydWU7Uz10cnVlO3g9bnVsbDtyPWUoKTtiPWImJnQ7Uz1TJiZ1O3g9bnx8eDtyZXR1cm4gcn1mdW5jdGlvbiBxZShlLHQpe3ZhciB1PW5ldyBGZSxuPVtdLHIsaTtrZShcIltcIik7d2hpbGUoIUxlKFwiXVwiKSl7aWYoTGUoXCIsXCIpKXttZSgpO24ucHVzaChudWxsKX1lbHNle2lmKExlKFwiLi4uXCIpKXtpPW5ldyBGZTttZSgpO2UucHVzaCh5KTtyPVN0KGUsdCk7bi5wdXNoKGkuZmluaXNoUmVzdEVsZW1lbnQocikpO2JyZWFrfWVsc2V7bi5wdXNoKFZlKGUsdCkpfWlmKCFMZShcIl1cIikpe2tlKFwiLFwiKX19fWtlKFwiXVwiKTtyZXR1cm4gdS5maW5pc2hBcnJheVBhdHRlcm4obil9ZnVuY3Rpb24gVWUoZSx1KXt2YXIgbj1uZXcgRmUscixpLG89TGUoXCJbXCIpLHM7aWYoeS50eXBlPT09dC5JZGVudGlmaWVyKXtpPXk7cj1TdCgpO2lmKExlKFwiPVwiKSl7ZS5wdXNoKGkpO21lKCk7cz1ndCgpO3JldHVybiBuLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHIsZmFsc2UsbmV3IGdlKGkpLmZpbmlzaEFzc2lnbm1lbnRQYXR0ZXJuKHIscyksZmFsc2UsZmFsc2UpfWVsc2UgaWYoIUxlKFwiOlwiKSl7ZS5wdXNoKGkpO3JldHVybiBuLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHIsZmFsc2UscixmYWxzZSx0cnVlKX19ZWxzZXtyPSRlKGUsdSl9a2UoXCI6XCIpO3M9VmUoZSx1KTtyZXR1cm4gbi5maW5pc2hQcm9wZXJ0eShcImluaXRcIixyLG8scyxmYWxzZSxmYWxzZSl9ZnVuY3Rpb24gemUoZSx0KXt2YXIgdT1uZXcgRmUsbj1bXTtrZShcIntcIik7d2hpbGUoIUxlKFwifVwiKSl7bi5wdXNoKFVlKGUsdCkpO2lmKCFMZShcIn1cIikpe2tlKFwiLFwiKX19bWUoKTtyZXR1cm4gdS5maW5pc2hPYmplY3RQYXR0ZXJuKG4pfWZ1bmN0aW9uIFdlKGUsdCl7aWYoTGUoXCJbXCIpKXtyZXR1cm4gcWUoZSx0KX1lbHNlIGlmKExlKFwie1wiKSl7cmV0dXJuIHplKGUsdCl9ZS5wdXNoKHkpO3JldHVybiBTdCh0KX1mdW5jdGlvbiBWZShlLHQpe3ZhciB1PXksbixyLGk7bj1XZShlLHQpO2lmKExlKFwiPVwiKSl7bWUoKTtyPUIuYWxsb3dZaWVsZDtCLmFsbG93WWllbGQ9dHJ1ZTtpPVRlKGd0KTtCLmFsbG93WWllbGQ9cjtuPW5ldyBnZSh1KS5maW5pc2hBc3NpZ25tZW50UGF0dGVybihuLGkpfXJldHVybiBufWZ1bmN0aW9uIFllKCl7dmFyIGU9W10sdD1uZXcgRmUsdTtrZShcIltcIik7d2hpbGUoIUxlKFwiXVwiKSl7aWYoTGUoXCIsXCIpKXttZSgpO2UucHVzaChudWxsKX1lbHNlIGlmKExlKFwiLi4uXCIpKXt1PW5ldyBGZTttZSgpO3UuZmluaXNoU3ByZWFkRWxlbWVudChOZShndCkpO2lmKCFMZShcIl1cIikpe1M9Yj1mYWxzZTtrZShcIixcIil9ZS5wdXNoKHUpfWVsc2V7ZS5wdXNoKE5lKGd0KSk7aWYoIUxlKFwiXVwiKSl7a2UoXCIsXCIpfX19bWUoKTtyZXR1cm4gdC5maW5pc2hBcnJheUV4cHJlc3Npb24oZSl9ZnVuY3Rpb24gR2UoZSx0LHUpe3ZhciBuLHI7Uz1iPWZhbHNlO249bDtyPVRlKFh0KTtpZihsJiZ0LmZpcnN0UmVzdHJpY3RlZCl7X2UodC5maXJzdFJlc3RyaWN0ZWQsdC5tZXNzYWdlKX1pZihsJiZ0LnN0cmljdGVkKXtfZSh0LnN0cmljdGVkLHQubWVzc2FnZSl9bD1uO3JldHVybiBlLmZpbmlzaEZ1bmN0aW9uRXhwcmVzc2lvbihudWxsLHQucGFyYW1zLHQuZGVmYXVsdHMscix1KX1mdW5jdGlvbiBLZSgpe3ZhciBlLHQsdT1uZXcgRmUsbj1CLmFsbG93WWllbGQ7Qi5hbGxvd1lpZWxkPWZhbHNlO2U9ZXUoKTtCLmFsbG93WWllbGQ9bjtCLmFsbG93WWllbGQ9ZmFsc2U7dD1HZSh1LGUsZmFsc2UpO0IuYWxsb3dZaWVsZD1uO3JldHVybiB0fWZ1bmN0aW9uICRlKCl7dmFyIGUsdT1uZXcgRmUsbjtlPW1lKCk7c3dpdGNoKGUudHlwZSl7Y2FzZSB0LlN0cmluZ0xpdGVyYWw6Y2FzZSB0Lk51bWVyaWNMaXRlcmFsOmlmKGwmJmUub2N0YWwpe19lKGUsby5TdHJpY3RPY3RhbExpdGVyYWwpfXJldHVybiB1LmZpbmlzaExpdGVyYWwoZSk7Y2FzZSB0LklkZW50aWZpZXI6Y2FzZSB0LkJvb2xlYW5MaXRlcmFsOmNhc2UgdC5OdWxsTGl0ZXJhbDpjYXNlIHQuS2V5d29yZDpyZXR1cm4gdS5maW5pc2hJZGVudGlmaWVyKGUudmFsdWUpO2Nhc2UgdC5QdW5jdHVhdG9yOmlmKGUudmFsdWU9PT1cIltcIil7bj1UZShndCk7a2UoXCJdXCIpO3JldHVybiBufWJyZWFrfXdlKGUpfWZ1bmN0aW9uIEhlKCl7c3dpdGNoKHkudHlwZSl7Y2FzZSB0LklkZW50aWZpZXI6Y2FzZSB0LlN0cmluZ0xpdGVyYWw6Y2FzZSB0LkJvb2xlYW5MaXRlcmFsOmNhc2UgdC5OdWxsTGl0ZXJhbDpjYXNlIHQuTnVtZXJpY0xpdGVyYWw6Y2FzZSB0LktleXdvcmQ6cmV0dXJuIHRydWU7Y2FzZSB0LlB1bmN0dWF0b3I6cmV0dXJuIHkudmFsdWU9PT1cIltcIn1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSmUoZSx1LG4scil7dmFyIGksbyxzLGEsbD1CLmFsbG93WWllbGQ7aWYoZS50eXBlPT09dC5JZGVudGlmaWVyKXtpZihlLnZhbHVlPT09XCJnZXRcIiYmSGUoKSl7bj1MZShcIltcIik7dT0kZSgpO3M9bmV3IEZlO2tlKFwiKFwiKTtrZShcIilcIik7Qi5hbGxvd1lpZWxkPWZhbHNlO2k9R2Uocyx7cGFyYW1zOltdLGRlZmF1bHRzOltdLHN0cmljdGVkOm51bGwsZmlyc3RSZXN0cmljdGVkOm51bGwsbWVzc2FnZTpudWxsfSxmYWxzZSk7Qi5hbGxvd1lpZWxkPWw7cmV0dXJuIHIuZmluaXNoUHJvcGVydHkoXCJnZXRcIix1LG4saSxmYWxzZSxmYWxzZSl9ZWxzZSBpZihlLnZhbHVlPT09XCJzZXRcIiYmSGUoKSl7bj1MZShcIltcIik7dT0kZSgpO3M9bmV3IEZlO2tlKFwiKFwiKTtvPXtwYXJhbXM6W10sZGVmYXVsdENvdW50OjAsZGVmYXVsdHM6W10sZmlyc3RSZXN0cmljdGVkOm51bGwscGFyYW1TZXQ6e319O2lmKExlKFwiKVwiKSl7X2UoeSl9ZWxzZXtCLmFsbG93WWllbGQ9ZmFsc2U7UXQobyk7Qi5hbGxvd1lpZWxkPWw7aWYoby5kZWZhdWx0Q291bnQ9PT0wKXtvLmRlZmF1bHRzPVtdfX1rZShcIilcIik7Qi5hbGxvd1lpZWxkPWZhbHNlO2k9R2UocyxvLGZhbHNlKTtCLmFsbG93WWllbGQ9bDtyZXR1cm4gci5maW5pc2hQcm9wZXJ0eShcInNldFwiLHUsbixpLGZhbHNlLGZhbHNlKX19ZWxzZSBpZihlLnR5cGU9PT10LlB1bmN0dWF0b3ImJmUudmFsdWU9PT1cIipcIiYmSGUoKSl7bj1MZShcIltcIik7dT0kZSgpO3M9bmV3IEZlO0IuYWxsb3dZaWVsZD10cnVlO2E9ZXUoKTtCLmFsbG93WWllbGQ9bDtCLmFsbG93WWllbGQ9ZmFsc2U7aT1HZShzLGEsdHJ1ZSk7Qi5hbGxvd1lpZWxkPWw7cmV0dXJuIHIuZmluaXNoUHJvcGVydHkoXCJpbml0XCIsdSxuLGksdHJ1ZSxmYWxzZSl9aWYodSYmTGUoXCIoXCIpKXtpPUtlKCk7cmV0dXJuIHIuZmluaXNoUHJvcGVydHkoXCJpbml0XCIsdSxuLGksdHJ1ZSxmYWxzZSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gWGUoZSl7dmFyIHU9eSxuPW5ldyBGZSxpLHMsYSxsLGY7aT1MZShcIltcIik7aWYoTGUoXCIqXCIpKXttZSgpfWVsc2V7cz0kZSgpfWE9SmUodSxzLGksbik7aWYoYSl7cmV0dXJuIGF9aWYoIXMpe3dlKHkpfWlmKCFpKXtsPXMudHlwZT09PXIuSWRlbnRpZmllciYmcy5uYW1lPT09XCJfX3Byb3RvX19cInx8cy50eXBlPT09ci5MaXRlcmFsJiZzLnZhbHVlPT09XCJfX3Byb3RvX19cIjtpZihlLnZhbHVlJiZsKXtTZShvLkR1cGxpY2F0ZVByb3RvUHJvcGVydHkpfWUudmFsdWV8PWx9aWYoTGUoXCI6XCIpKXttZSgpO2Y9TmUoZ3QpO3JldHVybiBuLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHMsaSxmLGZhbHNlLGZhbHNlKX1pZih1LnR5cGU9PT10LklkZW50aWZpZXIpe2lmKExlKFwiPVwiKSl7eD15O21lKCk7Zj1UZShndCk7cmV0dXJuIG4uZmluaXNoUHJvcGVydHkoXCJpbml0XCIscyxpLG5ldyBnZSh1KS5maW5pc2hBc3NpZ25tZW50UGF0dGVybihzLGYpLGZhbHNlLHRydWUpfXJldHVybiBuLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHMsaSxzLGZhbHNlLHRydWUpfXdlKHkpfWZ1bmN0aW9uIFplKCl7dmFyIGU9W10sdD17dmFsdWU6ZmFsc2V9LHU9bmV3IEZlO2tlKFwie1wiKTt3aGlsZSghTGUoXCJ9XCIpKXtlLnB1c2goWGUodCkpO2lmKCFMZShcIn1cIikpe0llKCl9fWtlKFwifVwiKTtyZXR1cm4gdS5maW5pc2hPYmplY3RFeHByZXNzaW9uKGUpfWZ1bmN0aW9uIFFlKGUpe3ZhciB0O3N3aXRjaChlLnR5cGUpe2Nhc2Ugci5JZGVudGlmaWVyOmNhc2Ugci5NZW1iZXJFeHByZXNzaW9uOmNhc2Ugci5SZXN0RWxlbWVudDpjYXNlIHIuQXNzaWdubWVudFBhdHRlcm46YnJlYWs7Y2FzZSByLlNwcmVhZEVsZW1lbnQ6ZS50eXBlPXIuUmVzdEVsZW1lbnQ7UWUoZS5hcmd1bWVudCk7YnJlYWs7Y2FzZSByLkFycmF5RXhwcmVzc2lvbjplLnR5cGU9ci5BcnJheVBhdHRlcm47Zm9yKHQ9MDt0PGUuZWxlbWVudHMubGVuZ3RoO3QrKyl7aWYoZS5lbGVtZW50c1t0XSE9PW51bGwpe1FlKGUuZWxlbWVudHNbdF0pfX1icmVhaztjYXNlIHIuT2JqZWN0RXhwcmVzc2lvbjplLnR5cGU9ci5PYmplY3RQYXR0ZXJuO2Zvcih0PTA7dDxlLnByb3BlcnRpZXMubGVuZ3RoO3QrKyl7UWUoZS5wcm9wZXJ0aWVzW3RdLnZhbHVlKX1icmVhaztjYXNlIHIuQXNzaWdubWVudEV4cHJlc3Npb246ZS50eXBlPXIuQXNzaWdubWVudFBhdHRlcm47UWUoZS5sZWZ0KTticmVhaztkZWZhdWx0OmJyZWFrfX1mdW5jdGlvbiBldChlKXt2YXIgdSxuO2lmKHkudHlwZSE9PXQuVGVtcGxhdGV8fGUuaGVhZCYmIXkuaGVhZCl7d2UoKX11PW5ldyBGZTtuPW1lKCk7cmV0dXJuIHUuZmluaXNoVGVtcGxhdGVFbGVtZW50KHtyYXc6bi52YWx1ZS5yYXcsY29va2VkOm4udmFsdWUuY29va2VkfSxuLnRhaWwpfWZ1bmN0aW9uIHR0KCl7dmFyIGUsdCx1LG49bmV3IEZlO2U9ZXQoe2hlYWQ6dHJ1ZX0pO3Q9W2VdO3U9W107d2hpbGUoIWUudGFpbCl7dS5wdXNoKHl0KCkpO2U9ZXQoe2hlYWQ6ZmFsc2V9KTt0LnB1c2goZSl9cmV0dXJuIG4uZmluaXNoVGVtcGxhdGVMaXRlcmFsKHQsdSl9ZnVuY3Rpb24gdXQoKXt2YXIgZSx0LHUsbixvPVtdO2tlKFwiKFwiKTtpZihMZShcIilcIikpe21lKCk7aWYoIUxlKFwiPT5cIikpe2tlKFwiPT5cIil9cmV0dXJue3R5cGU6aS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyLHBhcmFtczpbXSxyYXdQYXJhbXM6W119fXU9eTtpZihMZShcIi4uLlwiKSl7ZT1MdChvKTtrZShcIilcIik7aWYoIUxlKFwiPT5cIikpe2tlKFwiPT5cIil9cmV0dXJue3R5cGU6aS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyLHBhcmFtczpbZV19fWI9dHJ1ZTtlPU5lKGd0KTtpZihMZShcIixcIikpe1M9ZmFsc2U7dD1bZV07d2hpbGUoQTxnKXtpZighTGUoXCIsXCIpKXticmVha31tZSgpO2lmKExlKFwiLi4uXCIpKXtpZighYil7d2UoeSl9dC5wdXNoKEx0KG8pKTtrZShcIilcIik7aWYoIUxlKFwiPT5cIikpe2tlKFwiPT5cIil9Yj1mYWxzZTtmb3Iobj0wO248dC5sZW5ndGg7bisrKXtRZSh0W25dKX1yZXR1cm57dHlwZTppLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXIscGFyYW1zOnR9fXQucHVzaChOZShndCkpfWU9bmV3IGdlKHUpLmZpbmlzaFNlcXVlbmNlRXhwcmVzc2lvbih0KX1rZShcIilcIik7aWYoTGUoXCI9PlwiKSl7aWYoZS50eXBlPT09ci5JZGVudGlmaWVyJiZlLm5hbWU9PT1cInlpZWxkXCIpe3JldHVybnt0eXBlOmkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcixwYXJhbXM6W2VdfX1pZighYil7d2UoeSl9aWYoZS50eXBlPT09ci5TZXF1ZW5jZUV4cHJlc3Npb24pe2ZvcihuPTA7bjxlLmV4cHJlc3Npb25zLmxlbmd0aDtuKyspe1FlKGUuZXhwcmVzc2lvbnNbbl0pfX1lbHNle1FlKGUpfWU9e3R5cGU6aS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyLHBhcmFtczplLnR5cGU9PT1yLlNlcXVlbmNlRXhwcmVzc2lvbj9lLmV4cHJlc3Npb25zOltlXX19Yj1mYWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBudCgpe3ZhciBlLHUsbixyO2lmKExlKFwiKFwiKSl7Yj1mYWxzZTtyZXR1cm4gTmUodXQpfWlmKExlKFwiW1wiKSl7cmV0dXJuIE5lKFllKX1pZihMZShcIntcIikpe3JldHVybiBOZShaZSl9ZT15LnR5cGU7cj1uZXcgRmU7aWYoZT09PXQuSWRlbnRpZmllcil7aWYoQi5zb3VyY2VUeXBlPT09XCJtb2R1bGVcIiYmeS52YWx1ZT09PVwiYXdhaXRcIil7X2UoeSl9bj1yLmZpbmlzaElkZW50aWZpZXIobWUoKS52YWx1ZSl9ZWxzZSBpZihlPT09dC5TdHJpbmdMaXRlcmFsfHxlPT09dC5OdW1lcmljTGl0ZXJhbCl7Uz1iPWZhbHNlO2lmKGwmJnkub2N0YWwpe19lKHksby5TdHJpY3RPY3RhbExpdGVyYWwpfW49ci5maW5pc2hMaXRlcmFsKG1lKCkpfWVsc2UgaWYoZT09PXQuS2V5d29yZCl7aWYoIWwmJkIuYWxsb3dZaWVsZCYmT2UoXCJ5aWVsZFwiKSl7cmV0dXJuIGl0KCl9Uz1iPWZhbHNlO2lmKE9lKFwiZnVuY3Rpb25cIikpe3JldHVybiB1dSgpfWlmKE9lKFwidGhpc1wiKSl7bWUoKTtyZXR1cm4gci5maW5pc2hUaGlzRXhwcmVzc2lvbigpfWlmKE9lKFwiY2xhc3NcIikpe3JldHVybiBpdSgpfXdlKG1lKCkpfWVsc2UgaWYoZT09PXQuQm9vbGVhbkxpdGVyYWwpe1M9Yj1mYWxzZTt1PW1lKCk7dS52YWx1ZT11LnZhbHVlPT09XCJ0cnVlXCI7bj1yLmZpbmlzaExpdGVyYWwodSl9ZWxzZSBpZihlPT09dC5OdWxsTGl0ZXJhbCl7Uz1iPWZhbHNlO3U9bWUoKTt1LnZhbHVlPW51bGw7bj1yLmZpbmlzaExpdGVyYWwodSl9ZWxzZSBpZihMZShcIi9cIil8fExlKFwiLz1cIikpe1M9Yj1mYWxzZTtmPUE7aWYodHlwZW9mIHYudG9rZW5zIT09XCJ1bmRlZmluZWRcIil7dT1mZSgpfWVsc2V7dT1sZSgpfW1lKCk7bj1yLmZpbmlzaExpdGVyYWwodSl9ZWxzZSBpZihlPT09dC5UZW1wbGF0ZSl7bj10dCgpfWVsc2V7d2UobWUoKSl9cmV0dXJuIG59ZnVuY3Rpb24gcnQoKXt2YXIgZT1bXSx0O2tlKFwiKFwiKTtpZighTGUoXCIpXCIpKXt3aGlsZShBPGcpe2lmKExlKFwiLi4uXCIpKXt0PW5ldyBGZTttZSgpO3QuZmluaXNoU3ByZWFkRWxlbWVudChUZShndCkpfWVsc2V7dD1UZShndCl9ZS5wdXNoKHQpO2lmKExlKFwiKVwiKSl7YnJlYWt9SWUoKX19a2UoXCIpXCIpO3JldHVybiBlfWZ1bmN0aW9uIGl0KCl7dmFyIGUsdD1uZXcgRmU7ZT1tZSgpO2lmKCFjZShlKSl7d2UoZSl9cmV0dXJuIHQuZmluaXNoSWRlbnRpZmllcihlLnZhbHVlKX1mdW5jdGlvbiBvdCgpe2tlKFwiLlwiKTtyZXR1cm4gaXQoKX1mdW5jdGlvbiBzdCgpe3ZhciBlO2tlKFwiW1wiKTtlPVRlKHl0KTtrZShcIl1cIik7cmV0dXJuIGV9ZnVuY3Rpb24gYXQoKXt2YXIgZSx1LG49bmV3IEZlO1BlKFwibmV3XCIpO2lmKExlKFwiLlwiKSl7bWUoKTtpZih5LnR5cGU9PT10LklkZW50aWZpZXImJnkudmFsdWU9PT1cInRhcmdldFwiKXtpZihCLmluRnVuY3Rpb25Cb2R5KXttZSgpO3JldHVybiBuLmZpbmlzaE1ldGFQcm9wZXJ0eShcIm5ld1wiLFwidGFyZ2V0XCIpfX13ZSh5KX1lPVRlKGZ0KTt1PUxlKFwiKFwiKT9ydCgpOltdO1M9Yj1mYWxzZTtyZXR1cm4gbi5maW5pc2hOZXdFeHByZXNzaW9uKGUsdSl9ZnVuY3Rpb24gbHQoKXt2YXIgZSx1LG4scixpLG89Qi5hbGxvd0luO2k9eTtCLmFsbG93SW49dHJ1ZTtpZihPZShcInN1cGVyXCIpJiZCLmluRnVuY3Rpb25Cb2R5KXt1PW5ldyBGZTttZSgpO3U9dS5maW5pc2hTdXBlcigpO2lmKCFMZShcIihcIikmJiFMZShcIi5cIikmJiFMZShcIltcIikpe3dlKHkpfX1lbHNle3U9TmUoT2UoXCJuZXdcIik/YXQ6bnQpfWZvcig7Oyl7aWYoTGUoXCIuXCIpKXtiPWZhbHNlO1M9dHJ1ZTtyPW90KCk7dT1uZXcgZ2UoaSkuZmluaXNoTWVtYmVyRXhwcmVzc2lvbihcIi5cIix1LHIpfWVsc2UgaWYoTGUoXCIoXCIpKXtiPWZhbHNlO1M9ZmFsc2U7bj1ydCgpO3U9bmV3IGdlKGkpLmZpbmlzaENhbGxFeHByZXNzaW9uKHUsbik7XG59ZWxzZSBpZihMZShcIltcIikpe2I9ZmFsc2U7Uz10cnVlO3I9c3QoKTt1PW5ldyBnZShpKS5maW5pc2hNZW1iZXJFeHByZXNzaW9uKFwiW1wiLHUscil9ZWxzZSBpZih5LnR5cGU9PT10LlRlbXBsYXRlJiZ5LmhlYWQpe2U9dHQoKTt1PW5ldyBnZShpKS5maW5pc2hUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24odSxlKX1lbHNle2JyZWFrfX1CLmFsbG93SW49bztyZXR1cm4gdX1mdW5jdGlvbiBmdCgpe3ZhciBlLHUsbixyO3coQi5hbGxvd0luLFwiY2FsbGVlIG9mIG5ldyBleHByZXNzaW9uIGFsd2F5cyBhbGxvdyBpbiBrZXl3b3JkLlwiKTtyPXk7aWYoT2UoXCJzdXBlclwiKSYmQi5pbkZ1bmN0aW9uQm9keSl7dT1uZXcgRmU7bWUoKTt1PXUuZmluaXNoU3VwZXIoKTtpZighTGUoXCJbXCIpJiYhTGUoXCIuXCIpKXt3ZSh5KX19ZWxzZXt1PU5lKE9lKFwibmV3XCIpP2F0Om50KX1mb3IoOzspe2lmKExlKFwiW1wiKSl7Yj1mYWxzZTtTPXRydWU7bj1zdCgpO3U9bmV3IGdlKHIpLmZpbmlzaE1lbWJlckV4cHJlc3Npb24oXCJbXCIsdSxuKX1lbHNlIGlmKExlKFwiLlwiKSl7Yj1mYWxzZTtTPXRydWU7bj1vdCgpO3U9bmV3IGdlKHIpLmZpbmlzaE1lbWJlckV4cHJlc3Npb24oXCIuXCIsdSxuKX1lbHNlIGlmKHkudHlwZT09PXQuVGVtcGxhdGUmJnkuaGVhZCl7ZT10dCgpO3U9bmV3IGdlKHIpLmZpbmlzaFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbih1LGUpfWVsc2V7YnJlYWt9fXJldHVybiB1fWZ1bmN0aW9uIGN0KCl7dmFyIGUsdSxuPXk7ZT1OZShsdCk7aWYoIUQmJnkudHlwZT09PXQuUHVuY3R1YXRvcil7aWYoTGUoXCIrK1wiKXx8TGUoXCItLVwiKSl7aWYobCYmZS50eXBlPT09ci5JZGVudGlmaWVyJiZxKGUubmFtZSkpe1NlKG8uU3RyaWN0TEhTUG9zdGZpeCl9aWYoIVMpe1NlKG8uSW52YWxpZExIU0luQXNzaWdubWVudCl9Uz1iPWZhbHNlO3U9bWUoKTtlPW5ldyBnZShuKS5maW5pc2hQb3N0Zml4RXhwcmVzc2lvbih1LnZhbHVlLGUpfX1yZXR1cm4gZX1mdW5jdGlvbiBwdCgpe3ZhciBlLHUsbjtpZih5LnR5cGUhPT10LlB1bmN0dWF0b3ImJnkudHlwZSE9PXQuS2V5d29yZCl7dT1jdCgpfWVsc2UgaWYoTGUoXCIrK1wiKXx8TGUoXCItLVwiKSl7bj15O2U9bWUoKTt1PU5lKHB0KTtpZihsJiZ1LnR5cGU9PT1yLklkZW50aWZpZXImJnEodS5uYW1lKSl7U2Uoby5TdHJpY3RMSFNQcmVmaXgpfWlmKCFTKXtTZShvLkludmFsaWRMSFNJbkFzc2lnbm1lbnQpfXU9bmV3IGdlKG4pLmZpbmlzaFVuYXJ5RXhwcmVzc2lvbihlLnZhbHVlLHUpO1M9Yj1mYWxzZX1lbHNlIGlmKExlKFwiK1wiKXx8TGUoXCItXCIpfHxMZShcIn5cIil8fExlKFwiIVwiKSl7bj15O2U9bWUoKTt1PU5lKHB0KTt1PW5ldyBnZShuKS5maW5pc2hVbmFyeUV4cHJlc3Npb24oZS52YWx1ZSx1KTtTPWI9ZmFsc2V9ZWxzZSBpZihPZShcImRlbGV0ZVwiKXx8T2UoXCJ2b2lkXCIpfHxPZShcInR5cGVvZlwiKSl7bj15O2U9bWUoKTt1PU5lKHB0KTt1PW5ldyBnZShuKS5maW5pc2hVbmFyeUV4cHJlc3Npb24oZS52YWx1ZSx1KTtpZihsJiZ1Lm9wZXJhdG9yPT09XCJkZWxldGVcIiYmdS5hcmd1bWVudC50eXBlPT09ci5JZGVudGlmaWVyKXtTZShvLlN0cmljdERlbGV0ZSl9Uz1iPWZhbHNlfWVsc2V7dT1jdCgpfXJldHVybiB1fWZ1bmN0aW9uIER0KGUsdSl7dmFyIG49MDtpZihlLnR5cGUhPT10LlB1bmN0dWF0b3ImJmUudHlwZSE9PXQuS2V5d29yZCl7cmV0dXJuIDB9c3dpdGNoKGUudmFsdWUpe2Nhc2VcInx8XCI6bj0xO2JyZWFrO2Nhc2VcIiYmXCI6bj0yO2JyZWFrO2Nhc2VcInxcIjpuPTM7YnJlYWs7Y2FzZVwiXlwiOm49NDticmVhaztjYXNlXCImXCI6bj01O2JyZWFrO2Nhc2VcIj09XCI6Y2FzZVwiIT1cIjpjYXNlXCI9PT1cIjpjYXNlXCIhPT1cIjpuPTY7YnJlYWs7Y2FzZVwiPFwiOmNhc2VcIj5cIjpjYXNlXCI8PVwiOmNhc2VcIj49XCI6Y2FzZVwiaW5zdGFuY2VvZlwiOm49NzticmVhaztjYXNlXCJpblwiOm49dT83OjA7YnJlYWs7Y2FzZVwiPDxcIjpjYXNlXCI+PlwiOmNhc2VcIj4+PlwiOm49ODticmVhaztjYXNlXCIrXCI6Y2FzZVwiLVwiOm49OTticmVhaztjYXNlXCIqXCI6Y2FzZVwiL1wiOmNhc2VcIiVcIjpuPTExO2JyZWFrO2RlZmF1bHQ6YnJlYWt9cmV0dXJuIG59ZnVuY3Rpb24gaHQoKXt2YXIgZSx0LHUsbixyLGksbyxzLGEsbDtlPXk7YT1OZShwdCk7bj15O3I9RHQobixCLmFsbG93SW4pO2lmKHI9PT0wKXtyZXR1cm4gYX1TPWI9ZmFsc2U7bi5wcmVjPXI7bWUoKTt0PVtlLHldO289VGUocHQpO2k9W2EsbixvXTt3aGlsZSgocj1EdCh5LEIuYWxsb3dJbikpPjApe3doaWxlKGkubGVuZ3RoPjImJnI8PWlbaS5sZW5ndGgtMl0ucHJlYyl7bz1pLnBvcCgpO3M9aS5wb3AoKS52YWx1ZTthPWkucG9wKCk7dC5wb3AoKTt1PW5ldyBnZSh0W3QubGVuZ3RoLTFdKS5maW5pc2hCaW5hcnlFeHByZXNzaW9uKHMsYSxvKTtpLnB1c2godSl9bj1tZSgpO24ucHJlYz1yO2kucHVzaChuKTt0LnB1c2goeSk7dT1UZShwdCk7aS5wdXNoKHUpfWw9aS5sZW5ndGgtMTt1PWlbbF07dC5wb3AoKTt3aGlsZShsPjEpe3U9bmV3IGdlKHQucG9wKCkpLmZpbmlzaEJpbmFyeUV4cHJlc3Npb24oaVtsLTFdLnZhbHVlLGlbbC0yXSx1KTtsLT0yfXJldHVybiB1fWZ1bmN0aW9uIG10KCl7dmFyIGUsdCx1LG4scjtyPXk7ZT1OZShodCk7aWYoTGUoXCI/XCIpKXttZSgpO3Q9Qi5hbGxvd0luO0IuYWxsb3dJbj10cnVlO3U9VGUoZ3QpO0IuYWxsb3dJbj10O2tlKFwiOlwiKTtuPVRlKGd0KTtlPW5ldyBnZShyKS5maW5pc2hDb25kaXRpb25hbEV4cHJlc3Npb24oZSx1LG4pO1M9Yj1mYWxzZX1yZXR1cm4gZX1mdW5jdGlvbiBkdCgpe2lmKExlKFwie1wiKSl7cmV0dXJuIFh0KCl9cmV0dXJuIFRlKGd0KX1mdW5jdGlvbiBBdChlLHQpe3ZhciB1O3N3aXRjaCh0LnR5cGUpe2Nhc2Ugci5JZGVudGlmaWVyOlp0KGUsdCx0Lm5hbWUpO2JyZWFrO2Nhc2Ugci5SZXN0RWxlbWVudDpBdChlLHQuYXJndW1lbnQpO2JyZWFrO2Nhc2Ugci5Bc3NpZ25tZW50UGF0dGVybjpBdChlLHQubGVmdCk7YnJlYWs7Y2FzZSByLkFycmF5UGF0dGVybjpmb3IodT0wO3U8dC5lbGVtZW50cy5sZW5ndGg7dSsrKXtpZih0LmVsZW1lbnRzW3VdIT09bnVsbCl7QXQoZSx0LmVsZW1lbnRzW3VdKX19YnJlYWs7Y2FzZSByLllpZWxkRXhwcmVzc2lvbjpicmVhaztkZWZhdWx0OncodC50eXBlPT09ci5PYmplY3RQYXR0ZXJuLFwiSW52YWxpZCB0eXBlXCIpO2Zvcih1PTA7dTx0LnByb3BlcnRpZXMubGVuZ3RoO3UrKyl7QXQoZSx0LnByb3BlcnRpZXNbdV0udmFsdWUpfWJyZWFrfX1mdW5jdGlvbiBDdChlKXt2YXIgdCx1LG4scyxhLGYsYyxwO2E9W107Zj0wO3M9W2VdO3N3aXRjaChlLnR5cGUpe2Nhc2Ugci5JZGVudGlmaWVyOmJyZWFrO2Nhc2UgaS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyOnM9ZS5wYXJhbXM7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gbnVsbH1jPXtwYXJhbVNldDp7fX07Zm9yKHQ9MCx1PXMubGVuZ3RoO3Q8dTt0Kz0xKXtuPXNbdF07c3dpdGNoKG4udHlwZSl7Y2FzZSByLkFzc2lnbm1lbnRQYXR0ZXJuOnNbdF09bi5sZWZ0O2lmKG4ucmlnaHQudHlwZT09PXIuWWllbGRFeHByZXNzaW9uKXtpZihuLnJpZ2h0LmFyZ3VtZW50KXt3ZSh5KX1uLnJpZ2h0LnR5cGU9ci5JZGVudGlmaWVyO24ucmlnaHQubmFtZT1cInlpZWxkXCI7ZGVsZXRlIG4ucmlnaHQuYXJndW1lbnQ7ZGVsZXRlIG4ucmlnaHQuZGVsZWdhdGV9YS5wdXNoKG4ucmlnaHQpOysrZjtBdChjLG4ubGVmdCk7YnJlYWs7ZGVmYXVsdDpBdChjLG4pO3NbdF09bjthLnB1c2gobnVsbCk7YnJlYWt9fWlmKGx8fCFCLmFsbG93WWllbGQpe2Zvcih0PTAsdT1zLmxlbmd0aDt0PHU7dCs9MSl7bj1zW3RdO2lmKG4udHlwZT09PXIuWWllbGRFeHByZXNzaW9uKXt3ZSh5KX19fWlmKGMubWVzc2FnZT09PW8uU3RyaWN0UGFyYW1EdXBlKXtwPWw/Yy5zdHJpY3RlZDpjLmZpcnN0UmVzdHJpY3RlZDt3ZShwLGMubWVzc2FnZSl9aWYoZj09PTApe2E9W119cmV0dXJue3BhcmFtczpzLGRlZmF1bHRzOmEsc3RyaWN0ZWQ6Yy5zdHJpY3RlZCxmaXJzdFJlc3RyaWN0ZWQ6Yy5maXJzdFJlc3RyaWN0ZWQsbWVzc2FnZTpjLm1lc3NhZ2V9fWZ1bmN0aW9uIEV0KGUsdCl7dmFyIHUsbixpO2lmKEQpe19lKHkpfWtlKFwiPT5cIik7dT1sO249Qi5hbGxvd1lpZWxkO0IuYWxsb3dZaWVsZD10cnVlO2k9ZHQoKTtpZihsJiZlLmZpcnN0UmVzdHJpY3RlZCl7d2UoZS5maXJzdFJlc3RyaWN0ZWQsZS5tZXNzYWdlKX1pZihsJiZlLnN0cmljdGVkKXtfZShlLnN0cmljdGVkLGUubWVzc2FnZSl9bD11O0IuYWxsb3dZaWVsZD1uO3JldHVybiB0LmZpbmlzaEFycm93RnVuY3Rpb25FeHByZXNzaW9uKGUucGFyYW1zLGUuZGVmYXVsdHMsaSxpLnR5cGUhPT1yLkJsb2NrU3RhdGVtZW50KX1mdW5jdGlvbiBGdCgpe3ZhciBlLHUsbixyO2U9bnVsbDt1PW5ldyBGZTtQZShcInlpZWxkXCIpO2lmKCFEKXtyPUIuYWxsb3dZaWVsZDtCLmFsbG93WWllbGQ9ZmFsc2U7bj1MZShcIipcIik7aWYobil7bWUoKTtlPWd0KCl9ZWxzZXtpZighTGUoXCI7XCIpJiYhTGUoXCJ9XCIpJiYhTGUoXCIpXCIpJiZ5LnR5cGUhPT10LkVPRil7ZT1ndCgpfX1CLmFsbG93WWllbGQ9cn1yZXR1cm4gdS5maW5pc2hZaWVsZEV4cHJlc3Npb24oZSxuKX1mdW5jdGlvbiBndCgpe3ZhciBlLHQsdSxuLHM7cz15O2U9eTtpZighQi5hbGxvd1lpZWxkJiZPZShcInlpZWxkXCIpKXtyZXR1cm4gRnQoKX10PW10KCk7aWYodC50eXBlPT09aS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyfHxMZShcIj0+XCIpKXtTPWI9ZmFsc2U7bj1DdCh0KTtpZihuKXt4PW51bGw7cmV0dXJuIEV0KG4sbmV3IGdlKHMpKX1yZXR1cm4gdH1pZihNZSgpKXtpZighUyl7U2Uoby5JbnZhbGlkTEhTSW5Bc3NpZ25tZW50KX1pZihsJiZ0LnR5cGU9PT1yLklkZW50aWZpZXIpe2lmKHEodC5uYW1lKSl7X2UoZSxvLlN0cmljdExIU0Fzc2lnbm1lbnQpfWlmKE4odC5uYW1lKSl7X2UoZSxvLlN0cmljdFJlc2VydmVkV29yZCl9fWlmKCFMZShcIj1cIikpe1M9Yj1mYWxzZX1lbHNle1FlKHQpfWU9bWUoKTt1PVRlKGd0KTt0PW5ldyBnZShzKS5maW5pc2hBc3NpZ25tZW50RXhwcmVzc2lvbihlLnZhbHVlLHQsdSk7eD1udWxsfXJldHVybiB0fWZ1bmN0aW9uIHl0KCl7dmFyIGUsdD15LHU7ZT1UZShndCk7aWYoTGUoXCIsXCIpKXt1PVtlXTt3aGlsZShBPGcpe2lmKCFMZShcIixcIikpe2JyZWFrfW1lKCk7dS5wdXNoKFRlKGd0KSl9ZT1uZXcgZ2UodCkuZmluaXNoU2VxdWVuY2VFeHByZXNzaW9uKHUpfXJldHVybiBlfWZ1bmN0aW9uIEJ0KCl7aWYoeS50eXBlPT09dC5LZXl3b3JkKXtzd2l0Y2goeS52YWx1ZSl7Y2FzZVwiZXhwb3J0XCI6aWYoQi5zb3VyY2VUeXBlIT09XCJtb2R1bGVcIil7X2UoeSxvLklsbGVnYWxFeHBvcnREZWNsYXJhdGlvbil9cmV0dXJuIGN1KCk7Y2FzZVwiaW1wb3J0XCI6aWYoQi5zb3VyY2VUeXBlIT09XCJtb2R1bGVcIil7X2UoeSxvLklsbGVnYWxJbXBvcnREZWNsYXJhdGlvbil9cmV0dXJuIGR1KCk7Y2FzZVwiY29uc3RcIjpjYXNlXCJsZXRcIjpyZXR1cm4gUHQoe2luRm9yOmZhbHNlfSk7Y2FzZVwiZnVuY3Rpb25cIjpyZXR1cm4gdHUobmV3IEZlKTtjYXNlXCJjbGFzc1wiOnJldHVybiBydSgpfX1yZXR1cm4gSnQoKX1mdW5jdGlvbiB2dCgpe3ZhciBlPVtdO3doaWxlKEE8Zyl7aWYoTGUoXCJ9XCIpKXticmVha31lLnB1c2goQnQoKSl9cmV0dXJuIGV9ZnVuY3Rpb24gYnQoKXt2YXIgZSx0PW5ldyBGZTtrZShcIntcIik7ZT12dCgpO2tlKFwifVwiKTtyZXR1cm4gdC5maW5pc2hCbG9ja1N0YXRlbWVudChlKX1mdW5jdGlvbiBTdChlKXt2YXIgdSxuPW5ldyBGZTt1PW1lKCk7aWYodS50eXBlPT09dC5LZXl3b3JkJiZ1LnZhbHVlPT09XCJ5aWVsZFwiKXtpZihsKXtfZSh1LG8uU3RyaWN0UmVzZXJ2ZWRXb3JkKX1pZighQi5hbGxvd1lpZWxkKXt3ZSh1KX19ZWxzZSBpZih1LnR5cGUhPT10LklkZW50aWZpZXIpe2lmKGwmJnUudHlwZT09PXQuS2V5d29yZCYmTih1LnZhbHVlKSl7X2UodSxvLlN0cmljdFJlc2VydmVkV29yZCl9ZWxzZXtpZihsfHx1LnZhbHVlIT09XCJsZXRcInx8ZSE9PVwidmFyXCIpe3dlKHUpfX19ZWxzZSBpZihCLnNvdXJjZVR5cGU9PT1cIm1vZHVsZVwiJiZ1LnR5cGU9PT10LklkZW50aWZpZXImJnUudmFsdWU9PT1cImF3YWl0XCIpe19lKHUpfXJldHVybiBuLmZpbmlzaElkZW50aWZpZXIodS52YWx1ZSl9ZnVuY3Rpb24geHQoZSl7dmFyIHQ9bnVsbCx1LG49bmV3IEZlLGk9W107dT1XZShpLFwidmFyXCIpO2lmKGwmJnEodS5uYW1lKSl7U2Uoby5TdHJpY3RWYXJOYW1lKX1pZihMZShcIj1cIikpe21lKCk7dD1UZShndCl9ZWxzZSBpZih1LnR5cGUhPT1yLklkZW50aWZpZXImJiFlLmluRm9yKXtrZShcIj1cIil9cmV0dXJuIG4uZmluaXNoVmFyaWFibGVEZWNsYXJhdG9yKHUsdCl9ZnVuY3Rpb24gd3QoZSl7dmFyIHQ9W107ZG97dC5wdXNoKHh0KHtpbkZvcjplLmluRm9yfSkpO2lmKCFMZShcIixcIikpe2JyZWFrfW1lKCl9d2hpbGUoQTxnKTtyZXR1cm4gdH1mdW5jdGlvbiBfdChlKXt2YXIgdDtQZShcInZhclwiKTt0PXd0KHtpbkZvcjpmYWxzZX0pO1JlKCk7cmV0dXJuIGUuZmluaXNoVmFyaWFibGVEZWNsYXJhdGlvbih0KX1mdW5jdGlvbiBrdChlLHQpe3ZhciB1PW51bGwsbixpPW5ldyBGZSxzPVtdO249V2UocyxlKTtpZihsJiZuLnR5cGU9PT1yLklkZW50aWZpZXImJnEobi5uYW1lKSl7U2Uoby5TdHJpY3RWYXJOYW1lKX1pZihlPT09XCJjb25zdFwiKXtpZighT2UoXCJpblwiKSYmIWplKFwib2ZcIikpe2tlKFwiPVwiKTt1PVRlKGd0KX19ZWxzZSBpZighdC5pbkZvciYmbi50eXBlIT09ci5JZGVudGlmaWVyfHxMZShcIj1cIikpe2tlKFwiPVwiKTt1PVRlKGd0KX1yZXR1cm4gaS5maW5pc2hWYXJpYWJsZURlY2xhcmF0b3Iobix1KX1mdW5jdGlvbiBJdChlLHQpe3ZhciB1PVtdO2Rve3UucHVzaChrdChlLHQpKTtpZighTGUoXCIsXCIpKXticmVha31tZSgpfXdoaWxlKEE8Zyk7cmV0dXJuIHV9ZnVuY3Rpb24gUHQoZSl7dmFyIHQsdSxuPW5ldyBGZTt0PW1lKCkudmFsdWU7dyh0PT09XCJsZXRcInx8dD09PVwiY29uc3RcIixcIkxleGljYWwgZGVjbGFyYXRpb24gbXVzdCBiZSBlaXRoZXIgbGV0IG9yIGNvbnN0XCIpO3U9SXQodCxlKTtSZSgpO3JldHVybiBuLmZpbmlzaExleGljYWxEZWNsYXJhdGlvbih1LHQpfWZ1bmN0aW9uIEx0KGUpe3ZhciB0LHU9bmV3IEZlO21lKCk7aWYoTGUoXCJ7XCIpKXtiZShvLk9iamVjdFBhdHRlcm5Bc1Jlc3RQYXJhbWV0ZXIpfWUucHVzaCh5KTt0PVN0KCk7aWYoTGUoXCI9XCIpKXtiZShvLkRlZmF1bHRSZXN0UGFyYW1ldGVyKX1pZighTGUoXCIpXCIpKXtiZShvLlBhcmFtZXRlckFmdGVyUmVzdFBhcmFtZXRlcil9cmV0dXJuIHUuZmluaXNoUmVzdEVsZW1lbnQodCl9ZnVuY3Rpb24gT3QoZSl7a2UoXCI7XCIpO3JldHVybiBlLmZpbmlzaEVtcHR5U3RhdGVtZW50KCl9ZnVuY3Rpb24ganQoZSl7dmFyIHQ9eXQoKTtSZSgpO3JldHVybiBlLmZpbmlzaEV4cHJlc3Npb25TdGF0ZW1lbnQodCl9ZnVuY3Rpb24gTXQoZSl7dmFyIHQsdSxuO1BlKFwiaWZcIik7a2UoXCIoXCIpO3Q9eXQoKTtrZShcIilcIik7dT1KdCgpO2lmKE9lKFwiZWxzZVwiKSl7bWUoKTtuPUp0KCl9ZWxzZXtuPW51bGx9cmV0dXJuIGUuZmluaXNoSWZTdGF0ZW1lbnQodCx1LG4pfWZ1bmN0aW9uIFJ0KGUpe3ZhciB0LHUsbjtQZShcImRvXCIpO249Qi5pbkl0ZXJhdGlvbjtCLmluSXRlcmF0aW9uPXRydWU7dD1KdCgpO0IuaW5JdGVyYXRpb249bjtQZShcIndoaWxlXCIpO2tlKFwiKFwiKTt1PXl0KCk7a2UoXCIpXCIpO2lmKExlKFwiO1wiKSl7bWUoKX1yZXR1cm4gZS5maW5pc2hEb1doaWxlU3RhdGVtZW50KHQsdSl9ZnVuY3Rpb24gVHQoZSl7dmFyIHQsdSxuO1BlKFwid2hpbGVcIik7a2UoXCIoXCIpO3Q9eXQoKTtrZShcIilcIik7bj1CLmluSXRlcmF0aW9uO0IuaW5JdGVyYXRpb249dHJ1ZTt1PUp0KCk7Qi5pbkl0ZXJhdGlvbj1uO3JldHVybiBlLmZpbmlzaFdoaWxlU3RhdGVtZW50KHQsdSl9ZnVuY3Rpb24gTnQoZSl7dmFyIHQsdSxuLHIsaSxzLGEsbCxmLGMscCxELGg9Qi5hbGxvd0luO3Q9aT1zPW51bGw7dT10cnVlO1BlKFwiZm9yXCIpO2tlKFwiKFwiKTtpZihMZShcIjtcIikpe21lKCl9ZWxzZXtpZihPZShcInZhclwiKSl7dD1uZXcgRmU7bWUoKTtCLmFsbG93SW49ZmFsc2U7Yz13dCh7aW5Gb3I6dHJ1ZX0pO0IuYWxsb3dJbj1oO2lmKGMubGVuZ3RoPT09MSYmT2UoXCJpblwiKSl7dD10LmZpbmlzaFZhcmlhYmxlRGVjbGFyYXRpb24oYyk7bWUoKTthPXQ7bD15dCgpO3Q9bnVsbH1lbHNlIGlmKGMubGVuZ3RoPT09MSYmY1swXS5pbml0PT09bnVsbCYmamUoXCJvZlwiKSl7dD10LmZpbmlzaFZhcmlhYmxlRGVjbGFyYXRpb24oYyk7bWUoKTthPXQ7bD1ndCgpO3Q9bnVsbDt1PWZhbHNlfWVsc2V7dD10LmZpbmlzaFZhcmlhYmxlRGVjbGFyYXRpb24oYyk7a2UoXCI7XCIpfX1lbHNlIGlmKE9lKFwiY29uc3RcIil8fE9lKFwibGV0XCIpKXt0PW5ldyBGZTtmPW1lKCkudmFsdWU7Qi5hbGxvd0luPWZhbHNlO2M9SXQoZix7aW5Gb3I6dHJ1ZX0pO0IuYWxsb3dJbj1oO2lmKGMubGVuZ3RoPT09MSYmY1swXS5pbml0PT09bnVsbCYmT2UoXCJpblwiKSl7dD10LmZpbmlzaExleGljYWxEZWNsYXJhdGlvbihjLGYpO21lKCk7YT10O2w9eXQoKTt0PW51bGx9ZWxzZSBpZihjLmxlbmd0aD09PTEmJmNbMF0uaW5pdD09PW51bGwmJmplKFwib2ZcIikpe3Q9dC5maW5pc2hMZXhpY2FsRGVjbGFyYXRpb24oYyxmKTttZSgpO2E9dDtsPWd0KCk7dD1udWxsO3U9ZmFsc2V9ZWxzZXtSZSgpO3Q9dC5maW5pc2hMZXhpY2FsRGVjbGFyYXRpb24oYyxmKX19ZWxzZXtyPXk7Qi5hbGxvd0luPWZhbHNlO3Q9TmUoZ3QpO0IuYWxsb3dJbj1oO2lmKE9lKFwiaW5cIikpe2lmKCFTKXtTZShvLkludmFsaWRMSFNJbkZvckluKX1tZSgpO1FlKHQpO2E9dDtsPXl0KCk7dD1udWxsfWVsc2UgaWYoamUoXCJvZlwiKSl7aWYoIVMpe1NlKG8uSW52YWxpZExIU0luRm9yTG9vcCl9bWUoKTtRZSh0KTthPXQ7bD1ndCgpO3Q9bnVsbDt1PWZhbHNlfWVsc2V7aWYoTGUoXCIsXCIpKXtuPVt0XTt3aGlsZShMZShcIixcIikpe21lKCk7bi5wdXNoKFRlKGd0KSl9dD1uZXcgZ2UocikuZmluaXNoU2VxdWVuY2VFeHByZXNzaW9uKG4pfWtlKFwiO1wiKX19fWlmKHR5cGVvZiBhPT09XCJ1bmRlZmluZWRcIil7aWYoIUxlKFwiO1wiKSl7aT15dCgpfWtlKFwiO1wiKTtpZighTGUoXCIpXCIpKXtzPXl0KCl9fWtlKFwiKVwiKTtEPUIuaW5JdGVyYXRpb247Qi5pbkl0ZXJhdGlvbj10cnVlO3A9VGUoSnQpO0IuaW5JdGVyYXRpb249RDtyZXR1cm4gdHlwZW9mIGE9PT1cInVuZGVmaW5lZFwiP2UuZmluaXNoRm9yU3RhdGVtZW50KHQsaSxzLHApOnU/ZS5maW5pc2hGb3JJblN0YXRlbWVudChhLGwscCk6ZS5maW5pc2hGb3JPZlN0YXRlbWVudChhLGwscCl9ZnVuY3Rpb24gcXQoZSl7dmFyIHU9bnVsbCxuO1BlKFwiY29udGludWVcIik7aWYoYS5jaGFyQ29kZUF0KEEpPT09NTkpe21lKCk7aWYoIUIuaW5JdGVyYXRpb24pe2JlKG8uSWxsZWdhbENvbnRpbnVlKX1yZXR1cm4gZS5maW5pc2hDb250aW51ZVN0YXRlbWVudChudWxsKX1pZihEKXtpZighQi5pbkl0ZXJhdGlvbil7YmUoby5JbGxlZ2FsQ29udGludWUpfXJldHVybiBlLmZpbmlzaENvbnRpbnVlU3RhdGVtZW50KG51bGwpfWlmKHkudHlwZT09PXQuSWRlbnRpZmllcil7dT1TdCgpO249XCIkXCIrdS5uYW1lO2lmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQi5sYWJlbFNldCxuKSl7YmUoby5Vbmtub3duTGFiZWwsdS5uYW1lKX19UmUoKTtpZih1PT09bnVsbCYmIUIuaW5JdGVyYXRpb24pe2JlKG8uSWxsZWdhbENvbnRpbnVlKX1yZXR1cm4gZS5maW5pc2hDb250aW51ZVN0YXRlbWVudCh1KX1mdW5jdGlvbiBVdChlKXt2YXIgdT1udWxsLG47UGUoXCJicmVha1wiKTtpZihhLmNoYXJDb2RlQXQoaCk9PT01OSl7bWUoKTtpZighKEIuaW5JdGVyYXRpb258fEIuaW5Td2l0Y2gpKXtiZShvLklsbGVnYWxCcmVhayl9cmV0dXJuIGUuZmluaXNoQnJlYWtTdGF0ZW1lbnQobnVsbCl9aWYoRCl7aWYoIShCLmluSXRlcmF0aW9ufHxCLmluU3dpdGNoKSl7YmUoby5JbGxlZ2FsQnJlYWspfXJldHVybiBlLmZpbmlzaEJyZWFrU3RhdGVtZW50KG51bGwpfWlmKHkudHlwZT09PXQuSWRlbnRpZmllcil7dT1TdCgpO249XCIkXCIrdS5uYW1lO2lmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQi5sYWJlbFNldCxuKSl7YmUoby5Vbmtub3duTGFiZWwsdS5uYW1lKX19UmUoKTtpZih1PT09bnVsbCYmIShCLmluSXRlcmF0aW9ufHxCLmluU3dpdGNoKSl7YmUoby5JbGxlZ2FsQnJlYWspfXJldHVybiBlLmZpbmlzaEJyZWFrU3RhdGVtZW50KHUpfWZ1bmN0aW9uIHp0KGUpe3ZhciB1PW51bGw7UGUoXCJyZXR1cm5cIik7aWYoIUIuaW5GdW5jdGlvbkJvZHkpe1NlKG8uSWxsZWdhbFJldHVybil9aWYoYS5jaGFyQ29kZUF0KGgpPT09MzIpe2lmKE0oYS5jaGFyQ29kZUF0KGgrMSkpKXt1PXl0KCk7UmUoKTtyZXR1cm4gZS5maW5pc2hSZXR1cm5TdGF0ZW1lbnQodSl9fWlmKEQpe3JldHVybiBlLmZpbmlzaFJldHVyblN0YXRlbWVudChudWxsKX1pZighTGUoXCI7XCIpKXtpZighTGUoXCJ9XCIpJiZ5LnR5cGUhPT10LkVPRil7dT15dCgpfX1SZSgpO3JldHVybiBlLmZpbmlzaFJldHVyblN0YXRlbWVudCh1KX1mdW5jdGlvbiBXdChlKXt2YXIgdCx1O2lmKGwpe1NlKG8uU3RyaWN0TW9kZVdpdGgpfVBlKFwid2l0aFwiKTtrZShcIihcIik7dD15dCgpO2tlKFwiKVwiKTt1PUp0KCk7cmV0dXJuIGUuZmluaXNoV2l0aFN0YXRlbWVudCh0LHUpfWZ1bmN0aW9uIFZ0KCl7dmFyIGUsdD1bXSx1LG49bmV3IEZlO2lmKE9lKFwiZGVmYXVsdFwiKSl7bWUoKTtlPW51bGx9ZWxzZXtQZShcImNhc2VcIik7ZT15dCgpfWtlKFwiOlwiKTt3aGlsZShBPGcpe2lmKExlKFwifVwiKXx8T2UoXCJkZWZhdWx0XCIpfHxPZShcImNhc2VcIikpe2JyZWFrfXU9QnQoKTt0LnB1c2godSl9cmV0dXJuIG4uZmluaXNoU3dpdGNoQ2FzZShlLHQpfWZ1bmN0aW9uIFl0KGUpe3ZhciB0LHUsbixyLGk7UGUoXCJzd2l0Y2hcIik7a2UoXCIoXCIpO3Q9eXQoKTtrZShcIilcIik7a2UoXCJ7XCIpO3U9W107aWYoTGUoXCJ9XCIpKXttZSgpO3JldHVybiBlLmZpbmlzaFN3aXRjaFN0YXRlbWVudCh0LHUpfXI9Qi5pblN3aXRjaDtCLmluU3dpdGNoPXRydWU7aT1mYWxzZTt3aGlsZShBPGcpe2lmKExlKFwifVwiKSl7YnJlYWt9bj1WdCgpO2lmKG4udGVzdD09PW51bGwpe2lmKGkpe2JlKG8uTXVsdGlwbGVEZWZhdWx0c0luU3dpdGNoKX1pPXRydWV9dS5wdXNoKG4pfUIuaW5Td2l0Y2g9cjtrZShcIn1cIik7cmV0dXJuIGUuZmluaXNoU3dpdGNoU3RhdGVtZW50KHQsdSl9ZnVuY3Rpb24gR3QoZSl7dmFyIHQ7UGUoXCJ0aHJvd1wiKTtpZihEKXtiZShvLk5ld2xpbmVBZnRlclRocm93KX10PXl0KCk7UmUoKTtyZXR1cm4gZS5maW5pc2hUaHJvd1N0YXRlbWVudCh0KX1mdW5jdGlvbiBLdCgpe3ZhciBlLHQ9W10sdT17fSxuLHIsaSxzPW5ldyBGZTtQZShcImNhdGNoXCIpO2tlKFwiKFwiKTtpZihMZShcIilcIikpe3dlKHkpfWU9V2UodCk7Zm9yKHI9MDtyPHQubGVuZ3RoO3IrKyl7bj1cIiRcIit0W3JdLnZhbHVlO2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1LG4pKXtTZShvLkR1cGxpY2F0ZUJpbmRpbmcsdFtyXS52YWx1ZSl9dVtuXT10cnVlfWlmKGwmJnEoZS5uYW1lKSl7U2Uoby5TdHJpY3RDYXRjaFZhcmlhYmxlKX1rZShcIilcIik7aT1idCgpO3JldHVybiBzLmZpbmlzaENhdGNoQ2xhdXNlKGUsaSl9ZnVuY3Rpb24gJHQoZSl7dmFyIHQsdT1udWxsLG49bnVsbDtQZShcInRyeVwiKTt0PWJ0KCk7aWYoT2UoXCJjYXRjaFwiKSl7dT1LdCgpfWlmKE9lKFwiZmluYWxseVwiKSl7bWUoKTtuPWJ0KCl9aWYoIXUmJiFuKXtiZShvLk5vQ2F0Y2hPckZpbmFsbHkpfXJldHVybiBlLmZpbmlzaFRyeVN0YXRlbWVudCh0LHUsbil9ZnVuY3Rpb24gSHQoZSl7UGUoXCJkZWJ1Z2dlclwiKTtSZSgpO3JldHVybiBlLmZpbmlzaERlYnVnZ2VyU3RhdGVtZW50KCl9ZnVuY3Rpb24gSnQoKXt2YXIgZT15LnR5cGUsdSxuLGkscztpZihlPT09dC5FT0Ype3dlKHkpfWlmKGU9PT10LlB1bmN0dWF0b3ImJnkudmFsdWU9PT1cIntcIil7cmV0dXJuIGJ0KCl9Uz1iPXRydWU7cz1uZXcgRmU7aWYoZT09PXQuUHVuY3R1YXRvcil7c3dpdGNoKHkudmFsdWUpe2Nhc2VcIjtcIjpyZXR1cm4gT3Qocyk7Y2FzZVwiKFwiOnJldHVybiBqdChzKTtkZWZhdWx0OmJyZWFrfX1lbHNlIGlmKGU9PT10LktleXdvcmQpe3N3aXRjaCh5LnZhbHVlKXtjYXNlXCJicmVha1wiOnJldHVybiBVdChzKTtjYXNlXCJjb250aW51ZVwiOnJldHVybiBxdChzKTtjYXNlXCJkZWJ1Z2dlclwiOnJldHVybiBIdChzKTtjYXNlXCJkb1wiOnJldHVybiBSdChzKTtjYXNlXCJmb3JcIjpyZXR1cm4gTnQocyk7Y2FzZVwiZnVuY3Rpb25cIjpyZXR1cm4gdHUocyk7Y2FzZVwiaWZcIjpyZXR1cm4gTXQocyk7Y2FzZVwicmV0dXJuXCI6cmV0dXJuIHp0KHMpO2Nhc2VcInN3aXRjaFwiOnJldHVybiBZdChzKTtjYXNlXCJ0aHJvd1wiOnJldHVybiBHdChzKTtjYXNlXCJ0cnlcIjpyZXR1cm4gJHQocyk7Y2FzZVwidmFyXCI6cmV0dXJuIF90KHMpO2Nhc2VcIndoaWxlXCI6cmV0dXJuIFR0KHMpO2Nhc2VcIndpdGhcIjpyZXR1cm4gV3Qocyk7ZGVmYXVsdDpicmVha319dT15dCgpO2lmKHUudHlwZT09PXIuSWRlbnRpZmllciYmTGUoXCI6XCIpKXttZSgpO2k9XCIkXCIrdS5uYW1lO2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChCLmxhYmVsU2V0LGkpKXtiZShvLlJlZGVjbGFyYXRpb24sXCJMYWJlbFwiLHUubmFtZSl9Qi5sYWJlbFNldFtpXT10cnVlO249SnQoKTtkZWxldGUgQi5sYWJlbFNldFtpXTtyZXR1cm4gcy5maW5pc2hMYWJlbGVkU3RhdGVtZW50KHUsbil9UmUoKTtyZXR1cm4gcy5maW5pc2hFeHByZXNzaW9uU3RhdGVtZW50KHUpfWZ1bmN0aW9uIFh0KCl7dmFyIGUsdT1bXSxuLGkscyxmLGMscCxELGgsbT1uZXcgRmU7a2UoXCJ7XCIpO3doaWxlKEE8Zyl7aWYoeS50eXBlIT09dC5TdHJpbmdMaXRlcmFsKXticmVha31uPXk7ZT1CdCgpO3UucHVzaChlKTtpZihlLmV4cHJlc3Npb24udHlwZSE9PXIuTGl0ZXJhbCl7YnJlYWt9aT1hLnNsaWNlKG4uc3RhcnQrMSxuLmVuZC0xKTtpZihpPT09XCJ1c2Ugc3RyaWN0XCIpe2w9dHJ1ZTtpZihzKXtfZShzLG8uU3RyaWN0T2N0YWxMaXRlcmFsKX19ZWxzZXtpZighcyYmbi5vY3RhbCl7cz1ufX19Zj1CLmxhYmVsU2V0O2M9Qi5pbkl0ZXJhdGlvbjtwPUIuaW5Td2l0Y2g7RD1CLmluRnVuY3Rpb25Cb2R5O2g9Qi5wYXJlbnRoZXNpemVkQ291bnQ7Qi5sYWJlbFNldD17fTtCLmluSXRlcmF0aW9uPWZhbHNlO0IuaW5Td2l0Y2g9ZmFsc2U7Qi5pbkZ1bmN0aW9uQm9keT10cnVlO0IucGFyZW50aGVzaXplZENvdW50PTA7d2hpbGUoQTxnKXtpZihMZShcIn1cIikpe2JyZWFrfXUucHVzaChCdCgpKX1rZShcIn1cIik7Qi5sYWJlbFNldD1mO0IuaW5JdGVyYXRpb249YztCLmluU3dpdGNoPXA7Qi5pbkZ1bmN0aW9uQm9keT1EO0IucGFyZW50aGVzaXplZENvdW50PWg7cmV0dXJuIG0uZmluaXNoQmxvY2tTdGF0ZW1lbnQodSl9ZnVuY3Rpb24gWnQoZSx0LHUpe3ZhciBuPVwiJFwiK3U7aWYobCl7aWYocSh1KSl7ZS5zdHJpY3RlZD10O2UubWVzc2FnZT1vLlN0cmljdFBhcmFtTmFtZX1pZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZS5wYXJhbVNldCxuKSl7ZS5zdHJpY3RlZD10O2UubWVzc2FnZT1vLlN0cmljdFBhcmFtRHVwZX19ZWxzZSBpZighZS5maXJzdFJlc3RyaWN0ZWQpe2lmKHEodSkpe2UuZmlyc3RSZXN0cmljdGVkPXQ7ZS5tZXNzYWdlPW8uU3RyaWN0UGFyYW1OYW1lfWVsc2UgaWYoTih1KSl7ZS5maXJzdFJlc3RyaWN0ZWQ9dDtlLm1lc3NhZ2U9by5TdHJpY3RSZXNlcnZlZFdvcmR9ZWxzZSBpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZS5wYXJhbVNldCxuKSl7ZS5zdHJpY3RlZD10O2UubWVzc2FnZT1vLlN0cmljdFBhcmFtRHVwZX19ZS5wYXJhbVNldFtuXT10cnVlfWZ1bmN0aW9uIFF0KGUpe3ZhciB0LHUsbj1bXSxpLG87dD15O2lmKHQudmFsdWU9PT1cIi4uLlwiKXt1PUx0KG4pO1p0KGUsdS5hcmd1bWVudCx1LmFyZ3VtZW50Lm5hbWUpO2UucGFyYW1zLnB1c2godSk7ZS5kZWZhdWx0cy5wdXNoKG51bGwpO3JldHVybiBmYWxzZX11PVZlKG4pO2ZvcihpPTA7aTxuLmxlbmd0aDtpKyspe1p0KGUsbltpXSxuW2ldLnZhbHVlKX1pZih1LnR5cGU9PT1yLkFzc2lnbm1lbnRQYXR0ZXJuKXtvPXUucmlnaHQ7dT11LmxlZnQ7KytlLmRlZmF1bHRDb3VudH1lLnBhcmFtcy5wdXNoKHUpO2UuZGVmYXVsdHMucHVzaChvKTtyZXR1cm4hTGUoXCIpXCIpfWZ1bmN0aW9uIGV1KGUpe3ZhciB0O3Q9e3BhcmFtczpbXSxkZWZhdWx0Q291bnQ6MCxkZWZhdWx0czpbXSxmaXJzdFJlc3RyaWN0ZWQ6ZX07a2UoXCIoXCIpO2lmKCFMZShcIilcIikpe3QucGFyYW1TZXQ9e307d2hpbGUoQTxnKXtpZighUXQodCkpe2JyZWFrfWtlKFwiLFwiKX19a2UoXCIpXCIpO2lmKHQuZGVmYXVsdENvdW50PT09MCl7dC5kZWZhdWx0cz1bXX1yZXR1cm57cGFyYW1zOnQucGFyYW1zLGRlZmF1bHRzOnQuZGVmYXVsdHMsc3RyaWN0ZWQ6dC5zdHJpY3RlZCxmaXJzdFJlc3RyaWN0ZWQ6dC5maXJzdFJlc3RyaWN0ZWQsbWVzc2FnZTp0Lm1lc3NhZ2V9fWZ1bmN0aW9uIHR1KGUsdCl7dmFyIHU9bnVsbCxuPVtdLHI9W10saSxzLGEsZixjLHAsRCxoLG07bT1CLmFsbG93WWllbGQ7UGUoXCJmdW5jdGlvblwiKTtoPUxlKFwiKlwiKTtpZihoKXttZSgpfWlmKCF0fHwhTGUoXCIoXCIpKXtzPXk7dT1TdCgpO2lmKGwpe2lmKHEocy52YWx1ZSkpe19lKHMsby5TdHJpY3RGdW5jdGlvbk5hbWUpfX1lbHNle2lmKHEocy52YWx1ZSkpe2M9cztwPW8uU3RyaWN0RnVuY3Rpb25OYW1lfWVsc2UgaWYoTihzLnZhbHVlKSl7Yz1zO3A9by5TdHJpY3RSZXNlcnZlZFdvcmR9fX1CLmFsbG93WWllbGQ9IWg7Zj1ldShjKTtuPWYucGFyYW1zO3I9Zi5kZWZhdWx0czthPWYuc3RyaWN0ZWQ7Yz1mLmZpcnN0UmVzdHJpY3RlZDtpZihmLm1lc3NhZ2Upe3A9Zi5tZXNzYWdlfUQ9bDtpPVh0KCk7aWYobCYmYyl7d2UoYyxwKX1pZihsJiZhKXtfZShhLHApfWw9RDtCLmFsbG93WWllbGQ9bTtyZXR1cm4gZS5maW5pc2hGdW5jdGlvbkRlY2xhcmF0aW9uKHUsbixyLGksaCl9ZnVuY3Rpb24gdXUoKXt2YXIgZSx0PW51bGwsdSxuLHIsaSxzPVtdLGE9W10sZixjLHA9bmV3IEZlLEQsaDtoPUIuYWxsb3dZaWVsZDtQZShcImZ1bmN0aW9uXCIpO0Q9TGUoXCIqXCIpO2lmKEQpe21lKCl9Qi5hbGxvd1lpZWxkPSFEO2lmKCFMZShcIihcIikpe2U9eTt0PSFsJiYhRCYmT2UoXCJ5aWVsZFwiKT9pdCgpOlN0KCk7aWYobCl7aWYocShlLnZhbHVlKSl7X2UoZSxvLlN0cmljdEZ1bmN0aW9uTmFtZSl9fWVsc2V7aWYocShlLnZhbHVlKSl7bj1lO3I9by5TdHJpY3RGdW5jdGlvbk5hbWV9ZWxzZSBpZihOKGUudmFsdWUpKXtuPWU7cj1vLlN0cmljdFJlc2VydmVkV29yZH19fWk9ZXUobik7cz1pLnBhcmFtczthPWkuZGVmYXVsdHM7dT1pLnN0cmljdGVkO249aS5maXJzdFJlc3RyaWN0ZWQ7aWYoaS5tZXNzYWdlKXtyPWkubWVzc2FnZX1jPWw7Zj1YdCgpO2lmKGwmJm4pe3dlKG4scil9aWYobCYmdSl7X2UodSxyKX1sPWM7Qi5hbGxvd1lpZWxkPWg7cmV0dXJuIHAuZmluaXNoRnVuY3Rpb25FeHByZXNzaW9uKHQscyxhLGYsRCl9ZnVuY3Rpb24gbnUoKXt2YXIgZSx0LHUsbj1mYWxzZSxpLHMsYSxsO2U9bmV3IEZlO2tlKFwie1wiKTtpPVtdO3doaWxlKCFMZShcIn1cIikpe2lmKExlKFwiO1wiKSl7bWUoKX1lbHNle3M9bmV3IEZlO3Q9eTt1PWZhbHNlO2E9TGUoXCJbXCIpO2lmKExlKFwiKlwiKSl7bWUoKX1lbHNle2w9JGUoKTtpZihsLm5hbWU9PT1cInN0YXRpY1wiJiYoSGUoKXx8TGUoXCIqXCIpKSl7dD15O3U9dHJ1ZTthPUxlKFwiW1wiKTtpZihMZShcIipcIikpe21lKCl9ZWxzZXtsPSRlKCl9fX1zPUplKHQsbCxhLHMpO2lmKHMpe3NbXCJzdGF0aWNcIl09dTtpZihzLmtpbmQ9PT1cImluaXRcIil7cy5raW5kPVwibWV0aG9kXCJ9aWYoIXUpe2lmKCFzLmNvbXB1dGVkJiYocy5rZXkubmFtZXx8cy5rZXkudmFsdWUudG9TdHJpbmcoKSk9PT1cImNvbnN0cnVjdG9yXCIpe2lmKHMua2luZCE9PVwibWV0aG9kXCJ8fCFzLm1ldGhvZHx8cy52YWx1ZS5nZW5lcmF0b3Ipe3dlKHQsby5Db25zdHJ1Y3RvclNwZWNpYWxNZXRob2QpfWlmKG4pe3dlKHQsby5EdXBsaWNhdGVDb25zdHJ1Y3Rvcil9ZWxzZXtuPXRydWV9cy5raW5kPVwiY29uc3RydWN0b3JcIn19ZWxzZXtpZighcy5jb21wdXRlZCYmKHMua2V5Lm5hbWV8fHMua2V5LnZhbHVlLnRvU3RyaW5nKCkpPT09XCJwcm90b3R5cGVcIil7d2UodCxvLlN0YXRpY1Byb3RvdHlwZSl9fXMudHlwZT1yLk1ldGhvZERlZmluaXRpb247ZGVsZXRlIHMubWV0aG9kO2RlbGV0ZSBzLnNob3J0aGFuZDtpLnB1c2gocyl9ZWxzZXt3ZSh5KX19fW1lKCk7cmV0dXJuIGUuZmluaXNoQ2xhc3NCb2R5KGkpfWZ1bmN0aW9uIHJ1KGUpe3ZhciB1PW51bGwsbj1udWxsLHI9bmV3IEZlLGksbz1sO2w9dHJ1ZTtQZShcImNsYXNzXCIpO2lmKCFlfHx5LnR5cGU9PT10LklkZW50aWZpZXIpe3U9U3QoKX1pZihPZShcImV4dGVuZHNcIikpe21lKCk7bj1UZShsdCl9aT1udSgpO2w9bztyZXR1cm4gci5maW5pc2hDbGFzc0RlY2xhcmF0aW9uKHUsbixpKX1mdW5jdGlvbiBpdSgpe3ZhciBlPW51bGwsdT1udWxsLG49bmV3IEZlLHIsaT1sO2w9dHJ1ZTtQZShcImNsYXNzXCIpO2lmKHkudHlwZT09PXQuSWRlbnRpZmllcil7ZT1TdCgpfWlmKE9lKFwiZXh0ZW5kc1wiKSl7bWUoKTt1PVRlKGx0KX1yPW51KCk7bD1pO3JldHVybiBuLmZpbmlzaENsYXNzRXhwcmVzc2lvbihlLHUscil9ZnVuY3Rpb24gb3UoKXt2YXIgZT1uZXcgRmU7aWYoeS50eXBlIT09dC5TdHJpbmdMaXRlcmFsKXtiZShvLkludmFsaWRNb2R1bGVTcGVjaWZpZXIpfXJldHVybiBlLmZpbmlzaExpdGVyYWwobWUoKSl9ZnVuY3Rpb24gc3UoKXt2YXIgZSx0LHU9bmV3IEZlLG47aWYoT2UoXCJkZWZhdWx0XCIpKXtuPW5ldyBGZTttZSgpO3Q9bi5maW5pc2hJZGVudGlmaWVyKFwiZGVmYXVsdFwiKX1lbHNle3Q9U3QoKX1pZihqZShcImFzXCIpKXttZSgpO2U9aXQoKX1yZXR1cm4gdS5maW5pc2hFeHBvcnRTcGVjaWZpZXIodCxlKX1mdW5jdGlvbiBhdShlKXt2YXIgdT1udWxsLG4scj1udWxsLGk9W107aWYoeS50eXBlPT09dC5LZXl3b3JkKXtzd2l0Y2goeS52YWx1ZSl7Y2FzZVwibGV0XCI6Y2FzZVwiY29uc3RcIjpjYXNlXCJ2YXJcIjpjYXNlXCJjbGFzc1wiOmNhc2VcImZ1bmN0aW9uXCI6dT1CdCgpO3JldHVybiBlLmZpbmlzaEV4cG9ydE5hbWVkRGVjbGFyYXRpb24odSxpLG51bGwpfX1rZShcIntcIik7d2hpbGUoIUxlKFwifVwiKSl7bj1ufHxPZShcImRlZmF1bHRcIik7aS5wdXNoKHN1KCkpO2lmKCFMZShcIn1cIikpe2tlKFwiLFwiKTtpZihMZShcIn1cIikpe2JyZWFrfX19a2UoXCJ9XCIpO2lmKGplKFwiZnJvbVwiKSl7bWUoKTtyPW91KCk7UmUoKX1lbHNlIGlmKG4pe2JlKHkudmFsdWU/by5VbmV4cGVjdGVkVG9rZW46by5NaXNzaW5nRnJvbUNsYXVzZSx5LnZhbHVlKX1lbHNle1JlKCl9cmV0dXJuIGUuZmluaXNoRXhwb3J0TmFtZWREZWNsYXJhdGlvbih1LGkscil9ZnVuY3Rpb24gbHUoZSl7dmFyIHQ9bnVsbCx1PW51bGw7UGUoXCJkZWZhdWx0XCIpO2lmKE9lKFwiZnVuY3Rpb25cIikpe3Q9dHUobmV3IEZlLHRydWUpO3JldHVybiBlLmZpbmlzaEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbih0KX1pZihPZShcImNsYXNzXCIpKXt0PXJ1KHRydWUpO3JldHVybiBlLmZpbmlzaEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbih0KX1pZihqZShcImZyb21cIikpe2JlKG8uVW5leHBlY3RlZFRva2VuLHkudmFsdWUpfWlmKExlKFwie1wiKSl7dT1aZSgpfWVsc2UgaWYoTGUoXCJbXCIpKXt1PVllKCl9ZWxzZXt1PWd0KCl9UmUoKTtyZXR1cm4gZS5maW5pc2hFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24odSl9ZnVuY3Rpb24gZnUoZSl7dmFyIHQ7a2UoXCIqXCIpO2lmKCFqZShcImZyb21cIikpe2JlKHkudmFsdWU/by5VbmV4cGVjdGVkVG9rZW46by5NaXNzaW5nRnJvbUNsYXVzZSx5LnZhbHVlKX1tZSgpO3Q9b3UoKTtSZSgpO3JldHVybiBlLmZpbmlzaEV4cG9ydEFsbERlY2xhcmF0aW9uKHQpfWZ1bmN0aW9uIGN1KCl7dmFyIGU9bmV3IEZlO2lmKEIuaW5GdW5jdGlvbkJvZHkpe2JlKG8uSWxsZWdhbEV4cG9ydERlY2xhcmF0aW9uKX1QZShcImV4cG9ydFwiKTtpZihPZShcImRlZmF1bHRcIikpe3JldHVybiBsdShlKX1pZihMZShcIipcIikpe3JldHVybiBmdShlKX1yZXR1cm4gYXUoZSl9ZnVuY3Rpb24gcHUoKXt2YXIgZSx0LHU9bmV3IEZlO3Q9aXQoKTtpZihqZShcImFzXCIpKXttZSgpO2U9U3QoKX1yZXR1cm4gdS5maW5pc2hJbXBvcnRTcGVjaWZpZXIoZSx0KX1mdW5jdGlvbiBEdSgpe3ZhciBlPVtdO2tlKFwie1wiKTt3aGlsZSghTGUoXCJ9XCIpKXtlLnB1c2gocHUoKSk7aWYoIUxlKFwifVwiKSl7a2UoXCIsXCIpO2lmKExlKFwifVwiKSl7YnJlYWt9fX1rZShcIn1cIik7cmV0dXJuIGV9ZnVuY3Rpb24gaHUoKXt2YXIgZSx0PW5ldyBGZTtlPWl0KCk7cmV0dXJuIHQuZmluaXNoSW1wb3J0RGVmYXVsdFNwZWNpZmllcihlKX1mdW5jdGlvbiBtdSgpe3ZhciBlLHQ9bmV3IEZlO2tlKFwiKlwiKTtpZighamUoXCJhc1wiKSl7YmUoby5Ob0FzQWZ0ZXJJbXBvcnROYW1lc3BhY2UpfW1lKCk7ZT1pdCgpO3JldHVybiB0LmZpbmlzaEltcG9ydE5hbWVzcGFjZVNwZWNpZmllcihlKX1mdW5jdGlvbiBkdSgpe3ZhciBlPVtdLHUsbj1uZXcgRmU7aWYoQi5pbkZ1bmN0aW9uQm9keSl7YmUoby5JbGxlZ2FsSW1wb3J0RGVjbGFyYXRpb24pfVBlKFwiaW1wb3J0XCIpO2lmKHkudHlwZT09PXQuU3RyaW5nTGl0ZXJhbCl7dT1vdSgpfWVsc2V7aWYoTGUoXCJ7XCIpKXtlPWUuY29uY2F0KER1KCkpfWVsc2UgaWYoTGUoXCIqXCIpKXtlLnB1c2gobXUoKSl9ZWxzZSBpZihjZSh5KSYmIU9lKFwiZGVmYXVsdFwiKSl7ZS5wdXNoKGh1KCkpO2lmKExlKFwiLFwiKSl7bWUoKTtpZihMZShcIipcIikpe2UucHVzaChtdSgpKX1lbHNlIGlmKExlKFwie1wiKSl7ZT1lLmNvbmNhdChEdSgpKX1lbHNle3dlKHkpfX19ZWxzZXt3ZShtZSgpKX1pZighamUoXCJmcm9tXCIpKXtiZSh5LnZhbHVlP28uVW5leHBlY3RlZFRva2VuOm8uTWlzc2luZ0Zyb21DbGF1c2UseS52YWx1ZSl9bWUoKTt1PW91KCl9UmUoKTtyZXR1cm4gbi5maW5pc2hJbXBvcnREZWNsYXJhdGlvbihlLHUpfWZ1bmN0aW9uIEF1KCl7dmFyIGUsdT1bXSxuLGksczt3aGlsZShBPGcpe249eTtpZihuLnR5cGUhPT10LlN0cmluZ0xpdGVyYWwpe2JyZWFrfWU9QnQoKTt1LnB1c2goZSk7aWYoZS5leHByZXNzaW9uLnR5cGUhPT1yLkxpdGVyYWwpe2JyZWFrfWk9YS5zbGljZShuLnN0YXJ0KzEsbi5lbmQtMSk7aWYoaT09PVwidXNlIHN0cmljdFwiKXtsPXRydWU7aWYocyl7X2UocyxvLlN0cmljdE9jdGFsTGl0ZXJhbCl9fWVsc2V7aWYoIXMmJm4ub2N0YWwpe3M9bn19fXdoaWxlKEE8Zyl7ZT1CdCgpO2lmKHR5cGVvZiBlPT09XCJ1bmRlZmluZWRcIil7YnJlYWt9dS5wdXNoKGUpfXJldHVybiB1fWZ1bmN0aW9uIEN1KCl7dmFyIGUsdDtkZSgpO3Q9bmV3IEZlO2U9QXUoKTtyZXR1cm4gdC5maW5pc2hQcm9ncmFtKGUsQi5zb3VyY2VUeXBlKX1mdW5jdGlvbiBFdSgpe3ZhciBlLHQsdSxuPVtdO2ZvcihlPTA7ZTx2LnRva2Vucy5sZW5ndGg7KytlKXt0PXYudG9rZW5zW2VdO3U9e3R5cGU6dC50eXBlLHZhbHVlOnQudmFsdWV9O2lmKHQucmVnZXgpe3UucmVnZXg9e3BhdHRlcm46dC5yZWdleC5wYXR0ZXJuLGZsYWdzOnQucmVnZXguZmxhZ3N9fWlmKHYucmFuZ2Upe3UucmFuZ2U9dC5yYW5nZX1pZih2LmxvYyl7dS5sb2M9dC5sb2N9bi5wdXNoKHUpfXYudG9rZW5zPW59ZnVuY3Rpb24gRnUoZSx1KXt2YXIgbixyO249U3RyaW5nO2lmKHR5cGVvZiBlIT09XCJzdHJpbmdcIiYmIShlIGluc3RhbmNlb2YgU3RyaW5nKSl7ZT1uKGUpfWE9ZTtmPTA7Yz1hLmxlbmd0aD4wPzE6MDtwPTA7QT1mO0M9YztFPXA7Zz1hLmxlbmd0aDt5PW51bGw7Qj17YWxsb3dJbjp0cnVlLGFsbG93WWllbGQ6dHJ1ZSxsYWJlbFNldDp7fSxpbkZ1bmN0aW9uQm9keTpmYWxzZSxpbkl0ZXJhdGlvbjpmYWxzZSxpblN3aXRjaDpmYWxzZSxsYXN0Q29tbWVudFN0YXJ0Oi0xLGN1cmx5U3RhY2s6W119O3Y9e307dT11fHx7fTt1LnRva2Vucz10cnVlO3YudG9rZW5zPVtdO3YudG9rZW5pemU9dHJ1ZTt2Lm9wZW5QYXJlblRva2VuPS0xO3Yub3BlbkN1cmx5VG9rZW49LTE7di5yYW5nZT10eXBlb2YgdS5yYW5nZT09PVwiYm9vbGVhblwiJiZ1LnJhbmdlO3YubG9jPXR5cGVvZiB1LmxvYz09PVwiYm9vbGVhblwiJiZ1LmxvYztpZih0eXBlb2YgdS5jb21tZW50PT09XCJib29sZWFuXCImJnUuY29tbWVudCl7di5jb21tZW50cz1bXX1pZih0eXBlb2YgdS50b2xlcmFudD09PVwiYm9vbGVhblwiJiZ1LnRvbGVyYW50KXt2LmVycm9ycz1bXX10cnl7ZGUoKTtpZih5LnR5cGU9PT10LkVPRil7cmV0dXJuIHYudG9rZW5zfW1lKCk7d2hpbGUoeS50eXBlIT09dC5FT0Ype3RyeXttZSgpfWNhdGNoKGkpe2lmKHYuZXJyb3JzKXt5ZShpKTticmVha31lbHNle3Rocm93IGl9fX1FdSgpO3I9di50b2tlbnM7aWYodHlwZW9mIHYuY29tbWVudHMhPT1cInVuZGVmaW5lZFwiKXtyLmNvbW1lbnRzPXYuY29tbWVudHN9aWYodHlwZW9mIHYuZXJyb3JzIT09XCJ1bmRlZmluZWRcIil7ci5lcnJvcnM9di5lcnJvcnN9fWNhdGNoKG8pe3Rocm93IG99ZmluYWxseXt2PXt9fXJldHVybiByfWZ1bmN0aW9uIGd1KGUsdCl7dmFyIHUsbjtuPVN0cmluZztpZih0eXBlb2YgZSE9PVwic3RyaW5nXCImJiEoZSBpbnN0YW5jZW9mIFN0cmluZykpe2U9bihlKX1hPWU7Zj0wO2M9YS5sZW5ndGg+MD8xOjA7cD0wO0E9ZjtDPWM7RT1wO2c9YS5sZW5ndGg7eT1udWxsO0I9e2FsbG93SW46dHJ1ZSxhbGxvd1lpZWxkOnRydWUsbGFiZWxTZXQ6e30saW5GdW5jdGlvbkJvZHk6ZmFsc2UsaW5JdGVyYXRpb246ZmFsc2UsaW5Td2l0Y2g6ZmFsc2UsbGFzdENvbW1lbnRTdGFydDotMSxjdXJseVN0YWNrOltdLHNvdXJjZVR5cGU6XCJzY3JpcHRcIn07bD1mYWxzZTt2PXt9O2lmKHR5cGVvZiB0IT09XCJ1bmRlZmluZWRcIil7di5yYW5nZT10eXBlb2YgdC5yYW5nZT09PVwiYm9vbGVhblwiJiZ0LnJhbmdlO3YubG9jPXR5cGVvZiB0LmxvYz09PVwiYm9vbGVhblwiJiZ0LmxvYzt2LmF0dGFjaENvbW1lbnQ9dHlwZW9mIHQuYXR0YWNoQ29tbWVudD09PVwiYm9vbGVhblwiJiZ0LmF0dGFjaENvbW1lbnQ7aWYodi5sb2MmJnQuc291cmNlIT09bnVsbCYmdC5zb3VyY2UhPT11bmRlZmluZWQpe3Yuc291cmNlPW4odC5zb3VyY2UpfWlmKHR5cGVvZiB0LnRva2Vucz09PVwiYm9vbGVhblwiJiZ0LnRva2Vucyl7di50b2tlbnM9W119aWYodHlwZW9mIHQuY29tbWVudD09PVwiYm9vbGVhblwiJiZ0LmNvbW1lbnQpe3YuY29tbWVudHM9W119aWYodHlwZW9mIHQudG9sZXJhbnQ9PT1cImJvb2xlYW5cIiYmdC50b2xlcmFudCl7di5lcnJvcnM9W119aWYodi5hdHRhY2hDb21tZW50KXt2LnJhbmdlPXRydWU7di5jb21tZW50cz1bXTt2LmJvdHRvbVJpZ2h0U3RhY2s9W107di50cmFpbGluZ0NvbW1lbnRzPVtdO3YubGVhZGluZ0NvbW1lbnRzPVtdfWlmKHQuc291cmNlVHlwZT09PVwibW9kdWxlXCIpe0Iuc291cmNlVHlwZT10LnNvdXJjZVR5cGU7bD10cnVlfX10cnl7dT1DdSgpO2lmKHR5cGVvZiB2LmNvbW1lbnRzIT09XCJ1bmRlZmluZWRcIil7dS5jb21tZW50cz12LmNvbW1lbnRzfWlmKHR5cGVvZiB2LnRva2VucyE9PVwidW5kZWZpbmVkXCIpe0V1KCk7dS50b2tlbnM9di50b2tlbnN9aWYodHlwZW9mIHYuZXJyb3JzIT09XCJ1bmRlZmluZWRcIil7dS5lcnJvcnM9di5lcnJvcnN9fWNhdGNoKHIpe3Rocm93IHJ9ZmluYWxseXt2PXt9fXJldHVybiB1fWUudmVyc2lvbj1cIjIuNi4wXCI7ZS50b2tlbml6ZT1GdTtlLnBhcnNlPWd1O2UuU3ludGF4PWZ1bmN0aW9uKCl7dmFyIGUsdD17fTtpZih0eXBlb2YgT2JqZWN0LmNyZWF0ZT09PVwiZnVuY3Rpb25cIil7dD1PYmplY3QuY3JlYXRlKG51bGwpfWZvcihlIGluIHIpe2lmKHIuaGFzT3duUHJvcGVydHkoZSkpe3RbZV09cltlXX19aWYodHlwZW9mIE9iamVjdC5mcmVlemU9PT1cImZ1bmN0aW9uXCIpe09iamVjdC5mcmVlemUodCl9cmV0dXJuIHR9KCl9KX0se31dLDQ5OltmdW5jdGlvbih0LHUsbil7KGZ1bmN0aW9uKHQsdSl7XCJ1c2Ugc3RyaWN0XCI7aWYodHlwZW9mIGU9PT1cImZ1bmN0aW9uXCImJmUuYW1kKXtlKFtcImV4cG9ydHNcIl0sdSl9ZWxzZSBpZih0eXBlb2YgbiE9PVwidW5kZWZpbmVkXCIpe3Uobil9ZWxzZXt1KHQuZXN0cmF2ZXJzZT17fSl9fSkodGhpcyxmdW5jdGlvbiByKGUpe1widXNlIHN0cmljdFwiO3ZhciB0LHUsbixpLG8scyxhLGwsZjtmdW5jdGlvbiBjKCl7fXU9QXJyYXkuaXNBcnJheTtpZighdSl7dT1mdW5jdGlvbiBTKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk9PT1cIltvYmplY3QgQXJyYXldXCJ9fWZ1bmN0aW9uIHAoZSl7dmFyIHQ9e30sdSxuO2Zvcih1IGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkodSkpe249ZVt1XTtpZih0eXBlb2Ygbj09PVwib2JqZWN0XCImJm4hPT1udWxsKXt0W3VdPXAobil9ZWxzZXt0W3VdPW59fX1yZXR1cm4gdH1mdW5jdGlvbiBEKGUpe3ZhciB0PXt9LHU7Zm9yKHUgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eSh1KSl7dFt1XT1lW3VdfX1yZXR1cm4gdH1jKEQpO2Z1bmN0aW9uIGgoZSx0KXt2YXIgdSxuLHIsaTtuPWUubGVuZ3RoO3I9MDt3aGlsZShuKXt1PW4+Pj4xO2k9cit1O2lmKHQoZVtpXSkpe249dX1lbHNle3I9aSsxO24tPXUrMX19cmV0dXJuIHJ9ZnVuY3Rpb24gbShlLHQpe3ZhciB1LG4scixpO249ZS5sZW5ndGg7cj0wO3doaWxlKG4pe3U9bj4+PjE7aT1yK3U7aWYodChlW2ldKSl7cj1pKzE7bi09dSsxfWVsc2V7bj11fX1yZXR1cm4gcn1jKG0pO289T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBmdW5jdGlvbih0KXtlLnByb3RvdHlwZT10O3JldHVybiBuZXcgZX19KCk7cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7dmFyIHQ9W10sdTtmb3IodSBpbiBlKXt0LnB1c2godSl9cmV0dXJuIHR9O2Z1bmN0aW9uIGQoZSx0KXt2YXIgdT1zKHQpLG4scixpO2ZvcihyPTAsaT11Lmxlbmd0aDtyPGk7cis9MSl7bj11W3JdO2Vbbl09dFtuXX1yZXR1cm4gZX10PXtBc3NpZ25tZW50RXhwcmVzc2lvbjpcIkFzc2lnbm1lbnRFeHByZXNzaW9uXCIsQXJyYXlFeHByZXNzaW9uOlwiQXJyYXlFeHByZXNzaW9uXCIsQXJyYXlQYXR0ZXJuOlwiQXJyYXlQYXR0ZXJuXCIsQXJyb3dGdW5jdGlvbkV4cHJlc3Npb246XCJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvblwiLEF3YWl0RXhwcmVzc2lvbjpcIkF3YWl0RXhwcmVzc2lvblwiLEJsb2NrU3RhdGVtZW50OlwiQmxvY2tTdGF0ZW1lbnRcIixCaW5hcnlFeHByZXNzaW9uOlwiQmluYXJ5RXhwcmVzc2lvblwiLEJyZWFrU3RhdGVtZW50OlwiQnJlYWtTdGF0ZW1lbnRcIixDYWxsRXhwcmVzc2lvbjpcIkNhbGxFeHByZXNzaW9uXCIsQ2F0Y2hDbGF1c2U6XCJDYXRjaENsYXVzZVwiLENsYXNzQm9keTpcIkNsYXNzQm9keVwiLENsYXNzRGVjbGFyYXRpb246XCJDbGFzc0RlY2xhcmF0aW9uXCIsQ2xhc3NFeHByZXNzaW9uOlwiQ2xhc3NFeHByZXNzaW9uXCIsQ29tcHJlaGVuc2lvbkJsb2NrOlwiQ29tcHJlaGVuc2lvbkJsb2NrXCIsQ29tcHJlaGVuc2lvbkV4cHJlc3Npb246XCJDb21wcmVoZW5zaW9uRXhwcmVzc2lvblwiLENvbmRpdGlvbmFsRXhwcmVzc2lvbjpcIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiLENvbnRpbnVlU3RhdGVtZW50OlwiQ29udGludWVTdGF0ZW1lbnRcIixEZWJ1Z2dlclN0YXRlbWVudDpcIkRlYnVnZ2VyU3RhdGVtZW50XCIsRGlyZWN0aXZlU3RhdGVtZW50OlwiRGlyZWN0aXZlU3RhdGVtZW50XCIsRG9XaGlsZVN0YXRlbWVudDpcIkRvV2hpbGVTdGF0ZW1lbnRcIixFbXB0eVN0YXRlbWVudDpcIkVtcHR5U3RhdGVtZW50XCIsRXhwb3J0QmF0Y2hTcGVjaWZpZXI6XCJFeHBvcnRCYXRjaFNwZWNpZmllclwiLEV4cG9ydERlY2xhcmF0aW9uOlwiRXhwb3J0RGVjbGFyYXRpb25cIixFeHBvcnRTcGVjaWZpZXI6XCJFeHBvcnRTcGVjaWZpZXJcIixFeHByZXNzaW9uU3RhdGVtZW50OlwiRXhwcmVzc2lvblN0YXRlbWVudFwiLEZvclN0YXRlbWVudDpcIkZvclN0YXRlbWVudFwiLEZvckluU3RhdGVtZW50OlwiRm9ySW5TdGF0ZW1lbnRcIixGb3JPZlN0YXRlbWVudDpcIkZvck9mU3RhdGVtZW50XCIsRnVuY3Rpb25EZWNsYXJhdGlvbjpcIkZ1bmN0aW9uRGVjbGFyYXRpb25cIixGdW5jdGlvbkV4cHJlc3Npb246XCJGdW5jdGlvbkV4cHJlc3Npb25cIixHZW5lcmF0b3JFeHByZXNzaW9uOlwiR2VuZXJhdG9yRXhwcmVzc2lvblwiLElkZW50aWZpZXI6XCJJZGVudGlmaWVyXCIsSWZTdGF0ZW1lbnQ6XCJJZlN0YXRlbWVudFwiLEltcG9ydERlY2xhcmF0aW9uOlwiSW1wb3J0RGVjbGFyYXRpb25cIixJbXBvcnREZWZhdWx0U3BlY2lmaWVyOlwiSW1wb3J0RGVmYXVsdFNwZWNpZmllclwiLEltcG9ydE5hbWVzcGFjZVNwZWNpZmllcjpcIkltcG9ydE5hbWVzcGFjZVNwZWNpZmllclwiLEltcG9ydFNwZWNpZmllcjpcIkltcG9ydFNwZWNpZmllclwiLExpdGVyYWw6XCJMaXRlcmFsXCIsTGFiZWxlZFN0YXRlbWVudDpcIkxhYmVsZWRTdGF0ZW1lbnRcIixMb2dpY2FsRXhwcmVzc2lvbjpcIkxvZ2ljYWxFeHByZXNzaW9uXCIsTWVtYmVyRXhwcmVzc2lvbjpcIk1lbWJlckV4cHJlc3Npb25cIixNZXRob2REZWZpbml0aW9uOlwiTWV0aG9kRGVmaW5pdGlvblwiLE1vZHVsZVNwZWNpZmllcjpcIk1vZHVsZVNwZWNpZmllclwiLE5ld0V4cHJlc3Npb246XCJOZXdFeHByZXNzaW9uXCIsT2JqZWN0RXhwcmVzc2lvbjpcIk9iamVjdEV4cHJlc3Npb25cIixPYmplY3RQYXR0ZXJuOlwiT2JqZWN0UGF0dGVyblwiLFByb2dyYW06XCJQcm9ncmFtXCIsUHJvcGVydHk6XCJQcm9wZXJ0eVwiLFJldHVyblN0YXRlbWVudDpcIlJldHVyblN0YXRlbWVudFwiLFNlcXVlbmNlRXhwcmVzc2lvbjpcIlNlcXVlbmNlRXhwcmVzc2lvblwiLFNwcmVhZEVsZW1lbnQ6XCJTcHJlYWRFbGVtZW50XCIsU3dpdGNoU3RhdGVtZW50OlwiU3dpdGNoU3RhdGVtZW50XCIsU3dpdGNoQ2FzZTpcIlN3aXRjaENhc2VcIixUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb246XCJUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb25cIixUZW1wbGF0ZUVsZW1lbnQ6XCJUZW1wbGF0ZUVsZW1lbnRcIixUZW1wbGF0ZUxpdGVyYWw6XCJUZW1wbGF0ZUxpdGVyYWxcIixUaGlzRXhwcmVzc2lvbjpcIlRoaXNFeHByZXNzaW9uXCIsVGhyb3dTdGF0ZW1lbnQ6XCJUaHJvd1N0YXRlbWVudFwiLFRyeVN0YXRlbWVudDpcIlRyeVN0YXRlbWVudFwiLFVuYXJ5RXhwcmVzc2lvbjpcIlVuYXJ5RXhwcmVzc2lvblwiLFVwZGF0ZUV4cHJlc3Npb246XCJVcGRhdGVFeHByZXNzaW9uXCIsVmFyaWFibGVEZWNsYXJhdGlvbjpcIlZhcmlhYmxlRGVjbGFyYXRpb25cIixWYXJpYWJsZURlY2xhcmF0b3I6XCJWYXJpYWJsZURlY2xhcmF0b3JcIixXaGlsZVN0YXRlbWVudDpcIldoaWxlU3RhdGVtZW50XCIsV2l0aFN0YXRlbWVudDpcIldpdGhTdGF0ZW1lbnRcIixZaWVsZEV4cHJlc3Npb246XCJZaWVsZEV4cHJlc3Npb25cIn07aT17QXNzaWdubWVudEV4cHJlc3Npb246W1wibGVmdFwiLFwicmlnaHRcIl0sQXJyYXlFeHByZXNzaW9uOltcImVsZW1lbnRzXCJdLEFycmF5UGF0dGVybjpbXCJlbGVtZW50c1wiXSxBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjpbXCJwYXJhbXNcIixcImRlZmF1bHRzXCIsXCJyZXN0XCIsXCJib2R5XCJdLEF3YWl0RXhwcmVzc2lvbjpbXCJhcmd1bWVudFwiXSxCbG9ja1N0YXRlbWVudDpbXCJib2R5XCJdLEJpbmFyeUV4cHJlc3Npb246W1wibGVmdFwiLFwicmlnaHRcIl0sQnJlYWtTdGF0ZW1lbnQ6W1wibGFiZWxcIl0sQ2FsbEV4cHJlc3Npb246W1wiY2FsbGVlXCIsXCJhcmd1bWVudHNcIl0sQ2F0Y2hDbGF1c2U6W1wicGFyYW1cIixcImJvZHlcIl0sQ2xhc3NCb2R5OltcImJvZHlcIl0sQ2xhc3NEZWNsYXJhdGlvbjpbXCJpZFwiLFwiYm9keVwiLFwic3VwZXJDbGFzc1wiXSxDbGFzc0V4cHJlc3Npb246W1wiaWRcIixcImJvZHlcIixcInN1cGVyQ2xhc3NcIl0sQ29tcHJlaGVuc2lvbkJsb2NrOltcImxlZnRcIixcInJpZ2h0XCJdLENvbXByZWhlbnNpb25FeHByZXNzaW9uOltcImJsb2Nrc1wiLFwiZmlsdGVyXCIsXCJib2R5XCJdLENvbmRpdGlvbmFsRXhwcmVzc2lvbjpbXCJ0ZXN0XCIsXCJjb25zZXF1ZW50XCIsXCJhbHRlcm5hdGVcIl0sQ29udGludWVTdGF0ZW1lbnQ6W1wibGFiZWxcIl0sRGVidWdnZXJTdGF0ZW1lbnQ6W10sRGlyZWN0aXZlU3RhdGVtZW50OltdLERvV2hpbGVTdGF0ZW1lbnQ6W1wiYm9keVwiLFwidGVzdFwiXSxFbXB0eVN0YXRlbWVudDpbXSxFeHBvcnRCYXRjaFNwZWNpZmllcjpbXSxFeHBvcnREZWNsYXJhdGlvbjpbXCJkZWNsYXJhdGlvblwiLFwic3BlY2lmaWVyc1wiLFwic291cmNlXCJdLEV4cG9ydFNwZWNpZmllcjpbXCJpZFwiLFwibmFtZVwiXSxFeHByZXNzaW9uU3RhdGVtZW50OltcImV4cHJlc3Npb25cIl0sRm9yU3RhdGVtZW50OltcImluaXRcIixcInRlc3RcIixcInVwZGF0ZVwiLFwiYm9keVwiXSxGb3JJblN0YXRlbWVudDpbXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm9keVwiXSxGb3JPZlN0YXRlbWVudDpbXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm9keVwiXSxGdW5jdGlvbkRlY2xhcmF0aW9uOltcImlkXCIsXCJwYXJhbXNcIixcImRlZmF1bHRzXCIsXCJyZXN0XCIsXCJib2R5XCJdLEZ1bmN0aW9uRXhwcmVzc2lvbjpbXCJpZFwiLFwicGFyYW1zXCIsXCJkZWZhdWx0c1wiLFwicmVzdFwiLFwiYm9keVwiXSxHZW5lcmF0b3JFeHByZXNzaW9uOltcImJsb2Nrc1wiLFwiZmlsdGVyXCIsXCJib2R5XCJdLElkZW50aWZpZXI6W10sSWZTdGF0ZW1lbnQ6W1widGVzdFwiLFwiY29uc2VxdWVudFwiLFwiYWx0ZXJuYXRlXCJdLEltcG9ydERlY2xhcmF0aW9uOltcInNwZWNpZmllcnNcIixcInNvdXJjZVwiXSxJbXBvcnREZWZhdWx0U3BlY2lmaWVyOltcImlkXCJdLEltcG9ydE5hbWVzcGFjZVNwZWNpZmllcjpbXCJpZFwiXSxJbXBvcnRTcGVjaWZpZXI6W1wiaWRcIixcIm5hbWVcIl0sTGl0ZXJhbDpbXSxMYWJlbGVkU3RhdGVtZW50OltcImxhYmVsXCIsXCJib2R5XCJdLExvZ2ljYWxFeHByZXNzaW9uOltcImxlZnRcIixcInJpZ2h0XCJdLE1lbWJlckV4cHJlc3Npb246W1wib2JqZWN0XCIsXCJwcm9wZXJ0eVwiXSxNZXRob2REZWZpbml0aW9uOltcImtleVwiLFwidmFsdWVcIl0sTW9kdWxlU3BlY2lmaWVyOltdLE5ld0V4cHJlc3Npb246W1wiY2FsbGVlXCIsXCJhcmd1bWVudHNcIl0sT2JqZWN0RXhwcmVzc2lvbjpbXCJwcm9wZXJ0aWVzXCJdLE9iamVjdFBhdHRlcm46W1wicHJvcGVydGllc1wiXSxQcm9ncmFtOltcImJvZHlcIl0sUHJvcGVydHk6W1wia2V5XCIsXCJ2YWx1ZVwiXSxSZXR1cm5TdGF0ZW1lbnQ6W1wiYXJndW1lbnRcIl0sU2VxdWVuY2VFeHByZXNzaW9uOltcImV4cHJlc3Npb25zXCJdLFNwcmVhZEVsZW1lbnQ6W1wiYXJndW1lbnRcIl0sU3dpdGNoU3RhdGVtZW50OltcImRpc2NyaW1pbmFudFwiLFwiY2FzZXNcIl0sU3dpdGNoQ2FzZTpbXCJ0ZXN0XCIsXCJjb25zZXF1ZW50XCJdLFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjpbXCJ0YWdcIixcInF1YXNpXCJdLFRlbXBsYXRlRWxlbWVudDpbXSxUZW1wbGF0ZUxpdGVyYWw6W1wicXVhc2lzXCIsXCJleHByZXNzaW9uc1wiXSxUaGlzRXhwcmVzc2lvbjpbXSxUaHJvd1N0YXRlbWVudDpbXCJhcmd1bWVudFwiXSxUcnlTdGF0ZW1lbnQ6W1wiYmxvY2tcIixcImhhbmRsZXJzXCIsXCJoYW5kbGVyXCIsXCJndWFyZGVkSGFuZGxlcnNcIixcImZpbmFsaXplclwiXSxVbmFyeUV4cHJlc3Npb246W1wiYXJndW1lbnRcIl0sVXBkYXRlRXhwcmVzc2lvbjpbXCJhcmd1bWVudFwiXSxWYXJpYWJsZURlY2xhcmF0aW9uOltcImRlY2xhcmF0aW9uc1wiXSxWYXJpYWJsZURlY2xhcmF0b3I6W1wiaWRcIixcImluaXRcIl0sV2hpbGVTdGF0ZW1lbnQ6W1widGVzdFwiLFwiYm9keVwiXSxXaXRoU3RhdGVtZW50OltcIm9iamVjdFwiLFwiYm9keVwiXSxZaWVsZEV4cHJlc3Npb246W1wiYXJndW1lbnRcIl19O2E9e307bD17fTtmPXt9O249e0JyZWFrOmEsU2tpcDpsLFJlbW92ZTpmfTtmdW5jdGlvbiBBKGUsdCl7dGhpcy5wYXJlbnQ9ZTt0aGlzLmtleT10fUEucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24geChlKXt0aGlzLnBhcmVudFt0aGlzLmtleV09ZX07QS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uIHcoKXtpZih1KHRoaXMucGFyZW50KSl7dGhpcy5wYXJlbnQuc3BsaWNlKHRoaXMua2V5LDEpO3JldHVybiB0cnVlfWVsc2V7dGhpcy5yZXBsYWNlKG51bGwpO3JldHVybiBmYWxzZX19O2Z1bmN0aW9uIEMoZSx0LHUsbil7dGhpcy5ub2RlPWU7dGhpcy5wYXRoPXQ7dGhpcy53cmFwPXU7dGhpcy5yZWY9bn1mdW5jdGlvbiBFKCl7fUUucHJvdG90eXBlLnBhdGg9ZnVuY3Rpb24gXygpe3ZhciBlLHQsbixyLGksbztmdW5jdGlvbiBzKGUsdCl7aWYodSh0KSl7Zm9yKG49MCxyPXQubGVuZ3RoO248cjsrK24pe2UucHVzaCh0W25dKX19ZWxzZXtlLnB1c2godCl9fWlmKCF0aGlzLl9fY3VycmVudC5wYXRoKXtyZXR1cm4gbnVsbH1pPVtdO2ZvcihlPTIsdD10aGlzLl9fbGVhdmVsaXN0Lmxlbmd0aDtlPHQ7KytlKXtvPXRoaXMuX19sZWF2ZWxpc3RbZV07cyhpLG8ucGF0aCl9cyhpLHRoaXMuX19jdXJyZW50LnBhdGgpO3JldHVybiBpfTtFLnByb3RvdHlwZS50eXBlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jdXJyZW50KCk7cmV0dXJuIGUudHlwZXx8dGhpcy5fX2N1cnJlbnQud3JhcH07RS5wcm90b3R5cGUucGFyZW50cz1mdW5jdGlvbiBrKCl7dmFyIGUsdCx1O3U9W107Zm9yKGU9MSx0PXRoaXMuX19sZWF2ZWxpc3QubGVuZ3RoO2U8dDsrK2Upe3UucHVzaCh0aGlzLl9fbGVhdmVsaXN0W2VdLm5vZGUpfXJldHVybiB1fTtFLnByb3RvdHlwZS5jdXJyZW50PWZ1bmN0aW9uIEkoKXtyZXR1cm4gdGhpcy5fX2N1cnJlbnQubm9kZX07RS5wcm90b3R5cGUuX19leGVjdXRlPWZ1bmN0aW9uIFAoZSx0KXt2YXIgdSxuO249dW5kZWZpbmVkO3U9dGhpcy5fX2N1cnJlbnQ7dGhpcy5fX2N1cnJlbnQ9dDt0aGlzLl9fc3RhdGU9bnVsbDtpZihlKXtuPWUuY2FsbCh0aGlzLHQubm9kZSx0aGlzLl9fbGVhdmVsaXN0W3RoaXMuX19sZWF2ZWxpc3QubGVuZ3RoLTFdLm5vZGUpfXRoaXMuX19jdXJyZW50PXU7cmV0dXJuIG59O0UucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbiBMKGUpe3RoaXMuX19zdGF0ZT1lfTtFLnByb3RvdHlwZS5za2lwPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZnkobCl9O0UucHJvdG90eXBlW1wiYnJlYWtcIl09ZnVuY3Rpb24oKXt0aGlzLm5vdGlmeShhKX07RS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZnkoZil9O0UucHJvdG90eXBlLl9faW5pdGlhbGl6ZT1mdW5jdGlvbihlLHQpe3RoaXMudmlzaXRvcj10O3RoaXMucm9vdD1lO3RoaXMuX193b3JrbGlzdD1bXTt0aGlzLl9fbGVhdmVsaXN0PVtdO3RoaXMuX19jdXJyZW50PW51bGw7dGhpcy5fX3N0YXRlPW51bGw7dGhpcy5fX2ZhbGxiYWNrPXQuZmFsbGJhY2s9PT1cIml0ZXJhdGlvblwiO3RoaXMuX19rZXlzPWk7aWYodC5rZXlzKXt0aGlzLl9fa2V5cz1kKG8odGhpcy5fX2tleXMpLHQua2V5cyl9fTtmdW5jdGlvbiBGKGUpe2lmKGU9PW51bGwpe3JldHVybiBmYWxzZX1yZXR1cm4gdHlwZW9mIGU9PT1cIm9iamVjdFwiJiZ0eXBlb2YgZS50eXBlPT09XCJzdHJpbmdcIn1mdW5jdGlvbiBnKGUsdSl7cmV0dXJuKGU9PT10Lk9iamVjdEV4cHJlc3Npb258fGU9PT10Lk9iamVjdFBhdHRlcm4pJiZcInByb3BlcnRpZXNcIj09PXV9RS5wcm90b3R5cGUudHJhdmVyc2U9ZnVuY3Rpb24gTyhlLHQpe3ZhciBuLHIsaSxvLGYsYyxwLEQsaCxtLGQsQTt0aGlzLl9faW5pdGlhbGl6ZShlLHQpO0E9e307bj10aGlzLl9fd29ya2xpc3Q7cj10aGlzLl9fbGVhdmVsaXN0O24ucHVzaChuZXcgQyhlLG51bGwsbnVsbCxudWxsKSk7ci5wdXNoKG5ldyBDKG51bGwsbnVsbCxudWxsLG51bGwpKTt3aGlsZShuLmxlbmd0aCl7aT1uLnBvcCgpO2lmKGk9PT1BKXtpPXIucG9wKCk7Yz10aGlzLl9fZXhlY3V0ZSh0LmxlYXZlLGkpO2lmKHRoaXMuX19zdGF0ZT09PWF8fGM9PT1hKXtyZXR1cm59Y29udGludWV9aWYoaS5ub2RlKXtjPXRoaXMuX19leGVjdXRlKHQuZW50ZXIsaSk7aWYodGhpcy5fX3N0YXRlPT09YXx8Yz09PWEpe3JldHVybn1uLnB1c2goQSk7ci5wdXNoKGkpO2lmKHRoaXMuX19zdGF0ZT09PWx8fGM9PT1sKXtjb250aW51ZX1vPWkubm9kZTtmPWkud3JhcHx8by50eXBlO209dGhpcy5fX2tleXNbZl07aWYoIW0pe2lmKHRoaXMuX19mYWxsYmFjayl7bT1zKG8pfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBub2RlIHR5cGUgXCIrZitcIi5cIil9fUQ9bS5sZW5ndGg7d2hpbGUoKEQtPTEpPj0wKXtwPW1bRF07ZD1vW3BdO2lmKCFkKXtjb250aW51ZX1pZih1KGQpKXtoPWQubGVuZ3RoO3doaWxlKChoLT0xKT49MCl7aWYoIWRbaF0pe2NvbnRpbnVlfWlmKGcoZixtW0RdKSl7aT1uZXcgQyhkW2hdLFtwLGhdLFwiUHJvcGVydHlcIixudWxsKX1lbHNlIGlmKEYoZFtoXSkpe2k9bmV3IEMoZFtoXSxbcCxoXSxudWxsLG51bGwpfWVsc2V7Y29udGludWV9bi5wdXNoKGkpfX1lbHNlIGlmKEYoZCkpe24ucHVzaChuZXcgQyhkLHAsbnVsbCxudWxsKSl9fX19fTtFLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uIGooZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0LHUsbixpO2lmKGUucmVmLnJlbW92ZSgpKXt1PWUucmVmLmtleTtpPWUucmVmLnBhcmVudDt0PXIubGVuZ3RoO3doaWxlKHQtLSl7bj1yW3RdO2lmKG4ucmVmJiZuLnJlZi5wYXJlbnQ9PT1pKXtpZihuLnJlZi5rZXk8dSl7YnJlYWt9LS1uLnJlZi5rZXl9fX19dmFyIHIsaSxvLGMscCxELGgsbSxkLEUseSxCLHY7dGhpcy5fX2luaXRpYWxpemUoZSx0KTt5PXt9O3I9dGhpcy5fX3dvcmtsaXN0O2k9dGhpcy5fX2xlYXZlbGlzdDtCPXtyb290OmV9O0Q9bmV3IEMoZSxudWxsLG51bGwsbmV3IEEoQixcInJvb3RcIikpO3IucHVzaChEKTtpLnB1c2goRCk7d2hpbGUoci5sZW5ndGgpe0Q9ci5wb3AoKTtpZihEPT09eSl7RD1pLnBvcCgpO3A9dGhpcy5fX2V4ZWN1dGUodC5sZWF2ZSxEKTtpZihwIT09dW5kZWZpbmVkJiZwIT09YSYmcCE9PWwmJnAhPT1mKXtELnJlZi5yZXBsYWNlKHApfWlmKHRoaXMuX19zdGF0ZT09PWZ8fHA9PT1mKXtuKEQpfWlmKHRoaXMuX19zdGF0ZT09PWF8fHA9PT1hKXtyZXR1cm4gQi5yb290fWNvbnRpbnVlfXA9dGhpcy5fX2V4ZWN1dGUodC5lbnRlcixEKTtpZihwIT09dW5kZWZpbmVkJiZwIT09YSYmcCE9PWwmJnAhPT1mKXtELnJlZi5yZXBsYWNlKHApO0Qubm9kZT1wfWlmKHRoaXMuX19zdGF0ZT09PWZ8fHA9PT1mKXtuKEQpO0Qubm9kZT1udWxsfWlmKHRoaXMuX19zdGF0ZT09PWF8fHA9PT1hKXtyZXR1cm4gQi5yb290fW89RC5ub2RlO2lmKCFvKXtjb250aW51ZX1yLnB1c2goeSk7aS5wdXNoKEQpO2lmKHRoaXMuX19zdGF0ZT09PWx8fHA9PT1sKXtjb250aW51ZX1jPUQud3JhcHx8by50eXBlO2Q9dGhpcy5fX2tleXNbY107aWYoIWQpe2lmKHRoaXMuX19mYWxsYmFjayl7ZD1zKG8pfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBub2RlIHR5cGUgXCIrYytcIi5cIil9fWg9ZC5sZW5ndGg7d2hpbGUoKGgtPTEpPj0wKXt2PWRbaF07RT1vW3ZdO2lmKCFFKXtjb250aW51ZX1pZih1KEUpKXttPUUubGVuZ3RoO3doaWxlKChtLT0xKT49MCl7aWYoIUVbbV0pe2NvbnRpbnVlfWlmKGcoYyxkW2hdKSl7RD1uZXcgQyhFW21dLFt2LG1dLFwiUHJvcGVydHlcIixuZXcgQShFLG0pKX1lbHNlIGlmKEYoRVttXSkpe0Q9bmV3IEMoRVttXSxbdixtXSxudWxsLG5ldyBBKEUsbSkpfWVsc2V7Y29udGludWV9ci5wdXNoKEQpfX1lbHNlIGlmKEYoRSkpe3IucHVzaChuZXcgQyhFLHYsbnVsbCxuZXcgQShvLHYpKSl9fX1yZXR1cm4gQi5yb290fTtmdW5jdGlvbiB5KGUsdCl7dmFyIHU9bmV3IEU7cmV0dXJuIHUudHJhdmVyc2UoZSx0KX1mdW5jdGlvbiBCKGUsdCl7dmFyIHU9bmV3IEU7cmV0dXJuIHUucmVwbGFjZShlLHQpfWZ1bmN0aW9uIHYoZSx0KXt2YXIgdTt1PWgodCxmdW5jdGlvbiBuKHQpe3JldHVybiB0LnJhbmdlWzBdPmUucmFuZ2VbMF19KTtlLmV4dGVuZGVkUmFuZ2U9W2UucmFuZ2VbMF0sZS5yYW5nZVsxXV07aWYodSE9PXQubGVuZ3RoKXtlLmV4dGVuZGVkUmFuZ2VbMV09dFt1XS5yYW5nZVswXX11LT0xO2lmKHU+PTApe2UuZXh0ZW5kZWRSYW5nZVswXT10W3VdLnJhbmdlWzFdfXJldHVybiBlfWZ1bmN0aW9uIGIoZSx0LHUpe3ZhciByPVtdLGksbyxzLGE7aWYoIWUucmFuZ2Upe3Rocm93IG5ldyBFcnJvcihcImF0dGFjaENvbW1lbnRzIG5lZWRzIHJhbmdlIGluZm9ybWF0aW9uXCIpfWlmKCF1Lmxlbmd0aCl7aWYodC5sZW5ndGgpe2ZvcihzPTAsbz10Lmxlbmd0aDtzPG87cys9MSl7aT1wKHRbc10pO2kuZXh0ZW5kZWRSYW5nZT1bMCxlLnJhbmdlWzBdXTtyLnB1c2goaSl9ZS5sZWFkaW5nQ29tbWVudHM9cn1yZXR1cm4gZX1mb3Iocz0wLG89dC5sZW5ndGg7czxvO3MrPTEpe3IucHVzaCh2KHAodFtzXSksdSkpfWE9MDt5KGUse2VudGVyOmZ1bmN0aW9uKGUpe3ZhciB0O3doaWxlKGE8ci5sZW5ndGgpe3Q9clthXTtpZih0LmV4dGVuZGVkUmFuZ2VbMV0+ZS5yYW5nZVswXSl7YnJlYWt9aWYodC5leHRlbmRlZFJhbmdlWzFdPT09ZS5yYW5nZVswXSl7aWYoIWUubGVhZGluZ0NvbW1lbnRzKXtlLmxlYWRpbmdDb21tZW50cz1bXX1lLmxlYWRpbmdDb21tZW50cy5wdXNoKHQpO1xuci5zcGxpY2UoYSwxKX1lbHNle2ErPTF9fWlmKGE9PT1yLmxlbmd0aCl7cmV0dXJuIG4uQnJlYWt9aWYoclthXS5leHRlbmRlZFJhbmdlWzBdPmUucmFuZ2VbMV0pe3JldHVybiBuLlNraXB9fX0pO2E9MDt5KGUse2xlYXZlOmZ1bmN0aW9uKGUpe3ZhciB0O3doaWxlKGE8ci5sZW5ndGgpe3Q9clthXTtpZihlLnJhbmdlWzFdPHQuZXh0ZW5kZWRSYW5nZVswXSl7YnJlYWt9aWYoZS5yYW5nZVsxXT09PXQuZXh0ZW5kZWRSYW5nZVswXSl7aWYoIWUudHJhaWxpbmdDb21tZW50cyl7ZS50cmFpbGluZ0NvbW1lbnRzPVtdfWUudHJhaWxpbmdDb21tZW50cy5wdXNoKHQpO3Iuc3BsaWNlKGEsMSl9ZWxzZXthKz0xfX1pZihhPT09ci5sZW5ndGgpe3JldHVybiBuLkJyZWFrfWlmKHJbYV0uZXh0ZW5kZWRSYW5nZVswXT5lLnJhbmdlWzFdKXtyZXR1cm4gbi5Ta2lwfX19KTtyZXR1cm4gZX1lLnZlcnNpb249XCIxLjguMS1kZXZcIjtlLlN5bnRheD10O2UudHJhdmVyc2U9eTtlLnJlcGxhY2U9QjtlLmF0dGFjaENvbW1lbnRzPWI7ZS5WaXNpdG9yS2V5cz1pO2UuVmlzaXRvck9wdGlvbj1uO2UuQ29udHJvbGxlcj1FO2UuY2xvbmVFbnZpcm9ubWVudD1mdW5jdGlvbigpe3JldHVybiByKHt9KX07cmV0dXJuIGV9KX0se31dLDUwOltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzM0XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi4vc291cmNlLW1hcC9zb3VyY2UtbWFwLWNvbnN1bWVyXCI6NTYsXCIuL3NvdXJjZS1tYXAvc291cmNlLW1hcC1nZW5lcmF0b3JcIjo1NyxcIi4vc291cmNlLW1hcC9zb3VyY2Utbm9kZVwiOjU4LFwiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC5qc1wiOjM0fV0sNTE6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bMzVdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiLi91dGlsXCI6NTksXCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL2FycmF5LXNldC5qc1wiOjM1LGFtZGVmaW5lOjYwfV0sNTI6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bMzZdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiLi9iYXNlNjRcIjo1MyxcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvYmFzZTY0LXZscS5qc1wiOjM2LGFtZGVmaW5lOjYwfV0sNTM6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bMzddWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9iYXNlNjQuanNcIjozNyxhbWRlZmluZTo2MH1dLDU0OltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzM5XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvYmluYXJ5LXNlYXJjaC5qc1wiOjM5LGFtZGVmaW5lOjYwfV0sNTU6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bNDFdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiLi91dGlsXCI6NTksXCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL21hcHBpbmctbGlzdC5qc1wiOjQxLGFtZGVmaW5lOjYwfV0sNTY6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vdXRpbFwiKTt2YXIgcj1lKFwiLi9iaW5hcnktc2VhcmNoXCIpO3ZhciBpPWUoXCIuL2FycmF5LXNldFwiKS5BcnJheVNldDt2YXIgbz1lKFwiLi9iYXNlNjQtdmxxXCIpO2Z1bmN0aW9uIHMoZSl7dmFyIHQ9ZTtpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe3Q9SlNPTi5wYXJzZShlLnJlcGxhY2UoL15cXClcXF1cXH0nLyxcIlwiKSl9dmFyIHU9bi5nZXRBcmcodCxcInZlcnNpb25cIik7dmFyIHI9bi5nZXRBcmcodCxcInNvdXJjZXNcIik7dmFyIG89bi5nZXRBcmcodCxcIm5hbWVzXCIsW10pO3ZhciBzPW4uZ2V0QXJnKHQsXCJzb3VyY2VSb290XCIsbnVsbCk7dmFyIGE9bi5nZXRBcmcodCxcInNvdXJjZXNDb250ZW50XCIsbnVsbCk7dmFyIGw9bi5nZXRBcmcodCxcIm1hcHBpbmdzXCIpO3ZhciBmPW4uZ2V0QXJnKHQsXCJmaWxlXCIsbnVsbCk7aWYodSE9dGhpcy5fdmVyc2lvbil7dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmVyc2lvbjogXCIrdSl9cj1yLm1hcChuLm5vcm1hbGl6ZSk7dGhpcy5fbmFtZXM9aS5mcm9tQXJyYXkobyx0cnVlKTt0aGlzLl9zb3VyY2VzPWkuZnJvbUFycmF5KHIsdHJ1ZSk7dGhpcy5zb3VyY2VSb290PXM7dGhpcy5zb3VyY2VzQ29udGVudD1hO3RoaXMuX21hcHBpbmdzPWw7dGhpcy5maWxlPWZ9cy5mcm9tU291cmNlTWFwPWZ1bmN0aW9uIGEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShzLnByb3RvdHlwZSk7dC5fbmFtZXM9aS5mcm9tQXJyYXkoZS5fbmFtZXMudG9BcnJheSgpLHRydWUpO3QuX3NvdXJjZXM9aS5mcm9tQXJyYXkoZS5fc291cmNlcy50b0FycmF5KCksdHJ1ZSk7dC5zb3VyY2VSb290PWUuX3NvdXJjZVJvb3Q7dC5zb3VyY2VzQ29udGVudD1lLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50KHQuX3NvdXJjZXMudG9BcnJheSgpLHQuc291cmNlUm9vdCk7dC5maWxlPWUuX2ZpbGU7dC5fX2dlbmVyYXRlZE1hcHBpbmdzPWUuX21hcHBpbmdzLnRvQXJyYXkoKS5zbGljZSgpO3QuX19vcmlnaW5hbE1hcHBpbmdzPWUuX21hcHBpbmdzLnRvQXJyYXkoKS5zbGljZSgpLnNvcnQobi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyk7cmV0dXJuIHR9O3MucHJvdG90eXBlLl92ZXJzaW9uPTM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwic291cmNlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNvdXJjZVJvb3QhPW51bGw/bi5qb2luKHRoaXMuc291cmNlUm9vdCxlKTplfSx0aGlzKX19KTtzLnByb3RvdHlwZS5fX2dlbmVyYXRlZE1hcHBpbmdzPW51bGw7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiX2dlbmVyYXRlZE1hcHBpbmdzXCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3Mpe3RoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncz1bXTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncz1bXTt0aGlzLl9wYXJzZU1hcHBpbmdzKHRoaXMuX21hcHBpbmdzLHRoaXMuc291cmNlUm9vdCl9cmV0dXJuIHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5nc319KTtzLnByb3RvdHlwZS5fX29yaWdpbmFsTWFwcGluZ3M9bnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJfb3JpZ2luYWxNYXBwaW5nc1wiLHtnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fX29yaWdpbmFsTWFwcGluZ3Mpe3RoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncz1bXTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncz1bXTt0aGlzLl9wYXJzZU1hcHBpbmdzKHRoaXMuX21hcHBpbmdzLHRoaXMuc291cmNlUm9vdCl9cmV0dXJuIHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzfX0pO3MucHJvdG90eXBlLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcj1mdW5jdGlvbiBsKGUpe3ZhciB0PWUuY2hhckF0KDApO3JldHVybiB0PT09XCI7XCJ8fHQ9PT1cIixcIn07cy5wcm90b3R5cGUuX3BhcnNlTWFwcGluZ3M9ZnVuY3Rpb24gZihlLHQpe3ZhciB1PTE7dmFyIHI9MDt2YXIgaT0wO3ZhciBzPTA7dmFyIGE9MDt2YXIgbD0wO3ZhciBmPWU7dmFyIGM9e307dmFyIHA7d2hpbGUoZi5sZW5ndGg+MCl7aWYoZi5jaGFyQXQoMCk9PT1cIjtcIil7dSsrO2Y9Zi5zbGljZSgxKTtyPTB9ZWxzZSBpZihmLmNoYXJBdCgwKT09PVwiLFwiKXtmPWYuc2xpY2UoMSl9ZWxzZXtwPXt9O3AuZ2VuZXJhdGVkTGluZT11O28uZGVjb2RlKGYsYyk7cC5nZW5lcmF0ZWRDb2x1bW49citjLnZhbHVlO3I9cC5nZW5lcmF0ZWRDb2x1bW47Zj1jLnJlc3Q7aWYoZi5sZW5ndGg+MCYmIXRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXtvLmRlY29kZShmLGMpO3Auc291cmNlPXRoaXMuX3NvdXJjZXMuYXQoYStjLnZhbHVlKTthKz1jLnZhbHVlO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPT09MHx8dGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe3Rocm93IG5ldyBFcnJvcihcIkZvdW5kIGEgc291cmNlLCBidXQgbm8gbGluZSBhbmQgY29sdW1uXCIpfW8uZGVjb2RlKGYsYyk7cC5vcmlnaW5hbExpbmU9aStjLnZhbHVlO2k9cC5vcmlnaW5hbExpbmU7cC5vcmlnaW5hbExpbmUrPTE7Zj1jLnJlc3Q7aWYoZi5sZW5ndGg9PT0wfHx0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7dGhyb3cgbmV3IEVycm9yKFwiRm91bmQgYSBzb3VyY2UgYW5kIGxpbmUsIGJ1dCBubyBjb2x1bW5cIil9by5kZWNvZGUoZixjKTtwLm9yaWdpbmFsQ29sdW1uPXMrYy52YWx1ZTtzPXAub3JpZ2luYWxDb2x1bW47Zj1jLnJlc3Q7aWYoZi5sZW5ndGg+MCYmIXRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXtvLmRlY29kZShmLGMpO3AubmFtZT10aGlzLl9uYW1lcy5hdChsK2MudmFsdWUpO2wrPWMudmFsdWU7Zj1jLnJlc3R9fXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncy5wdXNoKHApO2lmKHR5cGVvZiBwLm9yaWdpbmFsTGluZT09PVwibnVtYmVyXCIpe3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzLnB1c2gocCl9fX10aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3Muc29ydChuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyk7dGhpcy5fX29yaWdpbmFsTWFwcGluZ3Muc29ydChuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKX07cy5wcm90b3R5cGUuX2ZpbmRNYXBwaW5nPWZ1bmN0aW9uIGMoZSx0LHUsbixpKXtpZihlW3VdPD0wKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiTGluZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAxLCBnb3QgXCIrZVt1XSl9aWYoZVtuXTwwKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ29sdW1uIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDAsIGdvdCBcIitlW25dKX1yZXR1cm4gci5zZWFyY2goZSx0LGkpfTtzLnByb3RvdHlwZS5jb21wdXRlQ29sdW1uU3BhbnM9ZnVuY3Rpb24gcCgpe2Zvcih2YXIgZT0wO2U8dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3MubGVuZ3RoOysrZSl7dmFyIHQ9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbZV07aWYoZSsxPHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLmxlbmd0aCl7dmFyIHU9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbZSsxXTtpZih0LmdlbmVyYXRlZExpbmU9PT11LmdlbmVyYXRlZExpbmUpe3QubGFzdEdlbmVyYXRlZENvbHVtbj11LmdlbmVyYXRlZENvbHVtbi0xO2NvbnRpbnVlfX10Lmxhc3RHZW5lcmF0ZWRDb2x1bW49SW5maW5pdHl9fTtzLnByb3RvdHlwZS5vcmlnaW5hbFBvc2l0aW9uRm9yPWZ1bmN0aW9uIEQoZSl7dmFyIHQ9e2dlbmVyYXRlZExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksZ2VuZXJhdGVkQ29sdW1uOm4uZ2V0QXJnKGUsXCJjb2x1bW5cIil9O3ZhciB1PXRoaXMuX2ZpbmRNYXBwaW5nKHQsdGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3MsXCJnZW5lcmF0ZWRMaW5lXCIsXCJnZW5lcmF0ZWRDb2x1bW5cIixuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyk7aWYodT49MCl7dmFyIHI9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbdV07aWYoci5nZW5lcmF0ZWRMaW5lPT09dC5nZW5lcmF0ZWRMaW5lKXt2YXIgaT1uLmdldEFyZyhyLFwic291cmNlXCIsbnVsbCk7aWYoaSE9bnVsbCYmdGhpcy5zb3VyY2VSb290IT1udWxsKXtpPW4uam9pbih0aGlzLnNvdXJjZVJvb3QsaSl9cmV0dXJue3NvdXJjZTppLGxpbmU6bi5nZXRBcmcocixcIm9yaWdpbmFsTGluZVwiLG51bGwpLGNvbHVtbjpuLmdldEFyZyhyLFwib3JpZ2luYWxDb2x1bW5cIixudWxsKSxuYW1lOm4uZ2V0QXJnKHIsXCJuYW1lXCIsbnVsbCl9fX1yZXR1cm57c291cmNlOm51bGwsbGluZTpudWxsLGNvbHVtbjpudWxsLG5hbWU6bnVsbH19O3MucHJvdG90eXBlLnNvdXJjZUNvbnRlbnRGb3I9ZnVuY3Rpb24gaChlKXtpZighdGhpcy5zb3VyY2VzQ29udGVudCl7cmV0dXJuIG51bGx9aWYodGhpcy5zb3VyY2VSb290IT1udWxsKXtlPW4ucmVsYXRpdmUodGhpcy5zb3VyY2VSb290LGUpfWlmKHRoaXMuX3NvdXJjZXMuaGFzKGUpKXtyZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFt0aGlzLl9zb3VyY2VzLmluZGV4T2YoZSldfXZhciB0O2lmKHRoaXMuc291cmNlUm9vdCE9bnVsbCYmKHQ9bi51cmxQYXJzZSh0aGlzLnNvdXJjZVJvb3QpKSl7dmFyIHU9ZS5yZXBsYWNlKC9eZmlsZTpcXC9cXC8vLFwiXCIpO2lmKHQuc2NoZW1lPT1cImZpbGVcIiYmdGhpcy5fc291cmNlcy5oYXModSkpe3JldHVybiB0aGlzLnNvdXJjZXNDb250ZW50W3RoaXMuX3NvdXJjZXMuaW5kZXhPZih1KV19aWYoKCF0LnBhdGh8fHQucGF0aD09XCIvXCIpJiZ0aGlzLl9zb3VyY2VzLmhhcyhcIi9cIitlKSl7cmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKFwiL1wiK2UpXX19dGhyb3cgbmV3IEVycm9yKCdcIicrZSsnXCIgaXMgbm90IGluIHRoZSBTb3VyY2VNYXAuJyl9O3MucHJvdG90eXBlLmdlbmVyYXRlZFBvc2l0aW9uRm9yPWZ1bmN0aW9uIG0oZSl7dmFyIHQ9e3NvdXJjZTpuLmdldEFyZyhlLFwic291cmNlXCIpLG9yaWdpbmFsTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxvcmlnaW5hbENvbHVtbjpuLmdldEFyZyhlLFwiY29sdW1uXCIpfTtpZih0aGlzLnNvdXJjZVJvb3QhPW51bGwpe3Quc291cmNlPW4ucmVsYXRpdmUodGhpcy5zb3VyY2VSb290LHQuc291cmNlKX12YXIgdT10aGlzLl9maW5kTWFwcGluZyh0LHRoaXMuX29yaWdpbmFsTWFwcGluZ3MsXCJvcmlnaW5hbExpbmVcIixcIm9yaWdpbmFsQ29sdW1uXCIsbi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyk7aWYodT49MCl7dmFyIHI9dGhpcy5fb3JpZ2luYWxNYXBwaW5nc1t1XTtyZXR1cm57bGluZTpuLmdldEFyZyhyLFwiZ2VuZXJhdGVkTGluZVwiLG51bGwpLGNvbHVtbjpuLmdldEFyZyhyLFwiZ2VuZXJhdGVkQ29sdW1uXCIsbnVsbCksbGFzdENvbHVtbjpuLmdldEFyZyhyLFwibGFzdEdlbmVyYXRlZENvbHVtblwiLG51bGwpfX1yZXR1cm57bGluZTpudWxsLGNvbHVtbjpudWxsLGxhc3RDb2x1bW46bnVsbH19O3MucHJvdG90eXBlLmFsbEdlbmVyYXRlZFBvc2l0aW9uc0Zvcj1mdW5jdGlvbiBkKGUpe3ZhciB0PXtzb3VyY2U6bi5nZXRBcmcoZSxcInNvdXJjZVwiKSxvcmlnaW5hbExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksb3JpZ2luYWxDb2x1bW46SW5maW5pdHl9O2lmKHRoaXMuc291cmNlUm9vdCE9bnVsbCl7dC5zb3VyY2U9bi5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsdC5zb3VyY2UpfXZhciB1PVtdO3ZhciByPXRoaXMuX2ZpbmRNYXBwaW5nKHQsdGhpcy5fb3JpZ2luYWxNYXBwaW5ncyxcIm9yaWdpbmFsTGluZVwiLFwib3JpZ2luYWxDb2x1bW5cIixuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtpZihyPj0wKXt2YXIgaT10aGlzLl9vcmlnaW5hbE1hcHBpbmdzW3JdO3doaWxlKGkmJmkub3JpZ2luYWxMaW5lPT09dC5vcmlnaW5hbExpbmUpe3UucHVzaCh7bGluZTpuLmdldEFyZyhpLFwiZ2VuZXJhdGVkTGluZVwiLG51bGwpLGNvbHVtbjpuLmdldEFyZyhpLFwiZ2VuZXJhdGVkQ29sdW1uXCIsbnVsbCksbGFzdENvbHVtbjpuLmdldEFyZyhpLFwibGFzdEdlbmVyYXRlZENvbHVtblwiLG51bGwpfSk7aT10aGlzLl9vcmlnaW5hbE1hcHBpbmdzWy0tcl19fXJldHVybiB1LnJldmVyc2UoKX07cy5HRU5FUkFURURfT1JERVI9MTtzLk9SSUdJTkFMX09SREVSPTI7cy5wcm90b3R5cGUuZWFjaE1hcHBpbmc9ZnVuY3Rpb24gQShlLHQsdSl7dmFyIHI9dHx8bnVsbDt2YXIgaT11fHxzLkdFTkVSQVRFRF9PUkRFUjt2YXIgbztzd2l0Y2goaSl7Y2FzZSBzLkdFTkVSQVRFRF9PUkRFUjpvPXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzO2JyZWFrO2Nhc2Ugcy5PUklHSU5BTF9PUkRFUjpvPXRoaXMuX29yaWdpbmFsTWFwcGluZ3M7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG9yZGVyIG9mIGl0ZXJhdGlvbi5cIil9dmFyIGE9dGhpcy5zb3VyY2VSb290O28ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc291cmNlO2lmKHQhPW51bGwmJmEhPW51bGwpe3Q9bi5qb2luKGEsdCl9cmV0dXJue3NvdXJjZTp0LGdlbmVyYXRlZExpbmU6ZS5nZW5lcmF0ZWRMaW5lLGdlbmVyYXRlZENvbHVtbjplLmdlbmVyYXRlZENvbHVtbixvcmlnaW5hbExpbmU6ZS5vcmlnaW5hbExpbmUsb3JpZ2luYWxDb2x1bW46ZS5vcmlnaW5hbENvbHVtbixuYW1lOmUubmFtZX19KS5mb3JFYWNoKGUscil9O3QuU291cmNlTWFwQ29uc3VtZXI9c30pfSx7XCIuL2FycmF5LXNldFwiOjUxLFwiLi9iYXNlNjQtdmxxXCI6NTIsXCIuL2JpbmFyeS1zZWFyY2hcIjo1NCxcIi4vdXRpbFwiOjU5LGFtZGVmaW5lOjYwfV0sNTc6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bNDNdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiLi9hcnJheS1zZXRcIjo1MSxcIi4vYmFzZTY0LXZscVwiOjUyLFwiLi9tYXBwaW5nLWxpc3RcIjo1NSxcIi4vdXRpbFwiOjU5LFwiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9zb3VyY2UtbWFwLWdlbmVyYXRvci5qc1wiOjQzLGFtZGVmaW5lOjYwfV0sNTg6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bNDRdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiLi9zb3VyY2UtbWFwLWdlbmVyYXRvclwiOjU3LFwiLi91dGlsXCI6NTksXCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL3NvdXJjZS1ub2RlLmpzXCI6NDQsYW1kZWZpbmU6NjB9XSw1OTpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVs0NV1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL3V0aWwuanNcIjo0NSxhbWRlZmluZTo2MH1dLDYwOltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKHUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXt9LG89e30scz1mYWxzZSxhPWUoXCJwYXRoXCIpLGwsZjtmdW5jdGlvbiBjKGUpe3ZhciB0LHU7Zm9yKHQ9MDtlW3RdO3QrPTEpe3U9ZVt0XTtpZih1PT09XCIuXCIpe2Uuc3BsaWNlKHQsMSk7dC09MX1lbHNlIGlmKHU9PT1cIi4uXCIpe2lmKHQ9PT0xJiYoZVsyXT09PVwiLi5cInx8ZVswXT09PVwiLi5cIikpe2JyZWFrfWVsc2UgaWYodD4wKXtlLnNwbGljZSh0LTEsMik7dC09Mn19fX1mdW5jdGlvbiBwKGUsdCl7dmFyIHU7aWYoZSYmZS5jaGFyQXQoMCk9PT1cIi5cIil7aWYodCl7dT10LnNwbGl0KFwiL1wiKTt1PXUuc2xpY2UoMCx1Lmxlbmd0aC0xKTt1PXUuY29uY2F0KGUuc3BsaXQoXCIvXCIpKTtjKHUpO2U9dS5qb2luKFwiL1wiKX19cmV0dXJuIGV9ZnVuY3Rpb24gRChlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHAodCxlKX19ZnVuY3Rpb24gaChlKXtmdW5jdGlvbiB0KHQpe29bZV09dH10LmZyb21UZXh0PWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiYW1kZWZpbmUgZG9lcyBub3QgaW1wbGVtZW50IGxvYWQuZnJvbVRleHRcIil9O3JldHVybiB0fWw9ZnVuY3Rpb24oZSx0LG4scil7ZnVuY3Rpb24gaShpLG8pe2lmKHR5cGVvZiBpPT09XCJzdHJpbmdcIil7cmV0dXJuIGYoZSx0LG4saSxyKX1lbHNle2k9aS5tYXAoZnVuY3Rpb24odSl7cmV0dXJuIGYoZSx0LG4sdSxyKX0pO2lmKG8pe3UubmV4dFRpY2soZnVuY3Rpb24oKXtvLmFwcGx5KG51bGwsaSl9KX19fWkudG9Vcmw9ZnVuY3Rpb24oZSl7aWYoZS5pbmRleE9mKFwiLlwiKT09PTApe3JldHVybiBwKGUsYS5kaXJuYW1lKG4uZmlsZW5hbWUpKX1lbHNle3JldHVybiBlfX07cmV0dXJuIGl9O3I9cnx8ZnVuY3Rpb24gQSgpe3JldHVybiB0LnJlcXVpcmUuYXBwbHkodCxhcmd1bWVudHMpfTtmdW5jdGlvbiBtKGUsdSxpKXt2YXIgYSxmLGMscDtpZihlKXtmPW9bZV09e307Yz17aWQ6ZSx1cmk6bixleHBvcnRzOmZ9O2E9bChyLGYsYyxlKX1lbHNle2lmKHMpe3Rocm93IG5ldyBFcnJvcihcImFtZGVmaW5lIHdpdGggbm8gbW9kdWxlIElEIGNhbm5vdCBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgcGVyIGZpbGUuXCIpfXM9dHJ1ZTtmPXQuZXhwb3J0cztjPXQ7YT1sKHIsZixjLHQuaWQpfWlmKHUpe3U9dS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9KX1pZih0eXBlb2YgaT09PVwiZnVuY3Rpb25cIil7cD1pLmFwcGx5KGMuZXhwb3J0cyx1KX1lbHNle3A9aX1pZihwIT09dW5kZWZpbmVkKXtjLmV4cG9ydHM9cDtpZihlKXtvW2VdPWMuZXhwb3J0c319fWY9ZnVuY3Rpb24oZSx0LHUsbixyKXt2YXIgcz1uLmluZGV4T2YoXCIhXCIpLGE9bixjLGQ7aWYocz09PS0xKXtuPXAobixyKTtpZihuPT09XCJyZXF1aXJlXCIpe3JldHVybiBsKGUsdCx1LHIpfWVsc2UgaWYobj09PVwiZXhwb3J0c1wiKXtyZXR1cm4gdH1lbHNlIGlmKG49PT1cIm1vZHVsZVwiKXtyZXR1cm4gdX1lbHNlIGlmKG8uaGFzT3duUHJvcGVydHkobikpe3JldHVybiBvW25dfWVsc2UgaWYoaVtuXSl7bS5hcHBseShudWxsLGlbbl0pO3JldHVybiBvW25dfWVsc2V7aWYoZSl7cmV0dXJuIGUoYSl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJObyBtb2R1bGUgd2l0aCBJRDogXCIrbil9fX1lbHNle2M9bi5zdWJzdHJpbmcoMCxzKTtuPW4uc3Vic3RyaW5nKHMrMSxuLmxlbmd0aCk7ZD1mKGUsdCx1LGMscik7aWYoZC5ub3JtYWxpemUpe249ZC5ub3JtYWxpemUobixEKHIpKX1lbHNle249cChuLHIpfWlmKG9bbl0pe3JldHVybiBvW25dfWVsc2V7ZC5sb2FkKG4sbChlLHQsdSxyKSxoKG4pLHt9KTtyZXR1cm4gb1tuXX19fTtmdW5jdGlvbiBkKGUsdCx1KXtpZihBcnJheS5pc0FycmF5KGUpKXt1PXQ7dD1lO2U9dW5kZWZpbmVkfWVsc2UgaWYodHlwZW9mIGUhPT1cInN0cmluZ1wiKXt1PWU7ZT10PXVuZGVmaW5lZH1pZih0JiYhQXJyYXkuaXNBcnJheSh0KSl7dT10O3Q9dW5kZWZpbmVkfWlmKCF0KXt0PVtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiXX1pZihlKXtpW2VdPVtlLHQsdV19ZWxzZXttKGUsdCx1KX19ZC5yZXF1aXJlPWZ1bmN0aW9uKGUpe2lmKG9bZV0pe3JldHVybiBvW2VdfWlmKGlbZV0pe20uYXBwbHkobnVsbCxpW2VdKTtyZXR1cm4gb1tlXX19O2QuYW1kPXt9O3JldHVybiBkfXQuZXhwb3J0cz1yfSkuY2FsbCh0aGlzLGUoXCJfcHJvY2Vzc1wiKSxcIi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9ub2RlX21vZHVsZXMvYW1kZWZpbmUvYW1kZWZpbmUuanNcIil9LHtfcHJvY2VzczoyNixwYXRoOjI1fV0sNjE6W2Z1bmN0aW9uKGUsdCx1KXt0LmV4cG9ydHM9e25hbWU6XCJqczJjb2ZmZWVcIix2ZXJzaW9uOlwiMi4yLjBcIixkZXNjcmlwdGlvbjpcIkphdmFTY3JpcHQgdG8gQ29mZmVlU2NyaXB0IGNvbXBpbGVyXCIsaG9tZXBhZ2U6XCJodHRwOi8vanMyLmNvZmZlZVwiLG1haW46XCJkaXN0L2pzMmNvZmZlZS5qc1wiLGtleXdvcmRzOltcImphdmFzY3JpcHRcIixcImNvZmZlZXNjcmlwdFwiLFwibGFuZ3VhZ2VcIixcImNvbXBpbGVyXCJdLHNjcmlwdHM6e3Rlc3Q6XCJtb2NoYVwiLGF1dG90ZXN0OlwibW9jaGEgLVIgbWluIC1iIC0td2F0Y2hcIixwcmVwdWJsaXNoOlwibW9jaGEgPi9kZXYvbnVsbCAmJiBtYWtlIC1CIGRpc3RcIn0sYXV0aG9yOlwiUmljbyBTdGEuIENydXogPGhpQHJpY29zdGFjcnV6LmNvbT5cIixsaWNlbnNlOlwiTUlUXCIsYnVnczp7dXJsOlwiaHR0cHM6Ly9naXRodWIuY29tL2pzMmNvZmZlZS9qczJjb2ZmZWUvaXNzdWVzXCJ9LHJlcG9zaXRvcnk6e3R5cGU6XCJnaXRcIix1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vanMyY29mZmVlL2pzMmNvZmZlZS5naXRcIn0sYnJvd3NlcjpcImpzMmNvZmZlZS5jb2ZmZWVcIixiaW46e2pzMmNvZmZlZTpcIi4vYmluL2pzMmNvZmZlZVwifSxkZXBlbmRlbmNpZXM6e2VzY29kZWdlbjpcIl4xLjYuMFwiLGVzcHJpbWE6XCJeMi41LjBcIixlc3RyYXZlcnNlOlwiXjQuMS4xXCIsbWluaW1pc3Q6XCJeMS4xLjBcIixcInJlYWQtaW5wdXRcIjpcIl4wLjMuMVwiLFwic291cmNlLW1hcFwiOlwiXjAuNS4yXCJ9LGRldkRlcGVuZGVuY2llczp7YnJvd3NlcmlmeTpcIjEzLjAuMFwiLGNoYWk6XCJeMy40LjBcIixcImNvZmZlZS1zY3JpcHRcIjpcIl4xLjguMFwiLGNvZmZlZWlmeTpcIl4yLjAuMVwiLGNvZmZlZWxpbnQ6XCJeMS42LjBcIixnbG9iOlwiXjcuMC4wXCIsXCJqcy15YW1sXCI6XCJeMy4yLjFcIixtb2NoYTpcIl4yLjEuMFwiLFwibW9jaGEtY2xlYW5cIjpcIl4xLjAuMFwiLFwidWdsaWZ5LWpzXCI6XCJeMi40LjE2XCIsdW5kZXJzY29yZTpcIl4xLjcuMFwifX19LHt9XX0se30sWzFdKSgxKX0pO1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogcHJvY2Vzcy5jd2QoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgYW5kIGludmFsaWQgZW50cmllc1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfSBlbHNlIGlmICghcGF0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgfVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbiAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzIHRvIGJlIHNhZmUgKG1pZ2h0IGhhcHBlbiB3aGVuIHByb2Nlc3MuY3dkKCkgZmFpbHMpXG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGlzQWJzb2x1dGUgPSBleHBvcnRzLmlzQWJzb2x1dGUocGF0aCksXG4gICAgICB0cmFpbGluZ1NsYXNoID0gc3Vic3RyKHBhdGgsIC0xKSA9PT0gJy8nO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICBpZiAodHlwZW9mIHAgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfSkuam9pbignLycpKTtcbn07XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVsYXRpdmUgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICBmcm9tID0gZXhwb3J0cy5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTtcbiAgdG8gPSBleHBvcnRzLnJlc29sdmUodG8pLnN1YnN0cigxKTtcblxuICBmdW5jdGlvbiB0cmltKGFycikge1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykge1xuICAgICAgaWYgKGFycltzdGFydF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkge1xuICAgICAgaWYgKGFycltlbmRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gW107XG4gICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTtcbiAgfVxuXG4gIHZhciBmcm9tUGFydHMgPSB0cmltKGZyb20uc3BsaXQoJy8nKSk7XG4gIHZhciB0b1BhcnRzID0gdHJpbSh0by5zcGxpdCgnLycpKTtcblxuICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oZnJvbVBhcnRzLmxlbmd0aCwgdG9QYXJ0cy5sZW5ndGgpO1xuICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZyb21QYXJ0c1tpXSAhPT0gdG9QYXJ0c1tpXSkge1xuICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdXRwdXRQYXJ0cyA9IFtdO1xuICBmb3IgKHZhciBpID0gc2FtZVBhcnRzTGVuZ3RoOyBpIDwgZnJvbVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0UGFydHMucHVzaCgnLi4nKTtcbiAgfVxuXG4gIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7XG5cbiAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTtcbn07XG5cbmV4cG9ydHMuc2VwID0gJy8nO1xuZXhwb3J0cy5kZWxpbWl0ZXIgPSAnOic7XG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIHJlc3VsdCA9IHNwbGl0UGF0aChwYXRoKSxcbiAgICAgIHJvb3QgPSByZXN1bHRbMF0sXG4gICAgICBkaXIgPSByZXN1bHRbMV07XG5cbiAgaWYgKCFyb290ICYmICFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lIHdoYXRzb2V2ZXJcbiAgICByZXR1cm4gJy4nO1xuICB9XG5cbiAgaWYgKGRpcikge1xuICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gcm9vdCArIGRpcjtcbn07XG5cblxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uKHBhdGgsIGV4dCkge1xuICB2YXIgZiA9IHNwbGl0UGF0aChwYXRoKVsyXTtcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvc3BpbmUnKTsiLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTAuMFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgU3BpbmU7XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lIHx8IHJlcXVpcmUoJ3NwaW5lJyk7XG5cbiAgU3BpbmUuTW9kZWwuTG9jYWwgPSB7XG4gICAgZXh0ZW5kZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGUsIGVycm9yLCB0ZXN0TG9jYWxTdG9yYWdlO1xuICAgICAgdGVzdExvY2FsU3RvcmFnZSA9ICdzcGluZScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RMb2NhbFN0b3JhZ2UsIHRlc3RMb2NhbFN0b3JhZ2UpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0TG9jYWxTdG9yYWdlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGUgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGFuZ2UodGhpcy5zYXZlTG9jYWwpO1xuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2godGhpcy5sb2FkTG9jYWwpO1xuICAgIH0sXG4gICAgc2F2ZUxvY2FsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICByZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2VbdGhpcy5jbGFzc05hbWVdID0gcmVzdWx0O1xuICAgIH0sXG4gICAgbG9hZExvY2FsOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBpZiAoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NsZWFyJykpIHtcbiAgICAgICAgb3B0aW9ucy5jbGVhciA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBsb2NhbFN0b3JhZ2VbdGhpcy5jbGFzc05hbWVdO1xuICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaChyZXN1bHQgfHwgW10sIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFNwaW5lLk1vZGVsLkxvY2FsO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvY2FsLmpzLm1hcFxuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcbihmdW5jdGlvbigpIHtcbiAgdmFyICQsIFNwaW5lLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgc2xpY2UgPSBbXS5zbGljZSxcbiAgICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfTtcblxuICBTcGluZSA9IHRoaXMuU3BpbmUgfHwgcmVxdWlyZSgnc3BpbmUnKTtcblxuICAkID0gU3BpbmUuJDtcblxuICBTcGluZS5NYW5hZ2VyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoTWFuYWdlciwgc3VwZXJDbGFzcyk7XG5cbiAgICBNYW5hZ2VyLmluY2x1ZGUoU3BpbmUuRXZlbnRzKTtcblxuICAgIGZ1bmN0aW9uIE1hbmFnZXIoKSB7XG4gICAgICB0aGlzLmNvbnRyb2xsZXJzID0gW107XG4gICAgICB0aGlzLmJpbmQoJ2NoYW5nZScsIHRoaXMuY2hhbmdlKTtcbiAgICAgIHRoaXMuYWRkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgTWFuYWdlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29udCwgY29udHJvbGxlcnMsIGksIGxlbiwgcmVzdWx0cztcbiAgICAgIGNvbnRyb2xsZXJzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSBjb250cm9sbGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjb250ID0gY29udHJvbGxlcnNbaV07XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmFkZE9uZShjb250KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTWFuYWdlci5wcm90b3R5cGUuYWRkT25lID0gZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgY29udHJvbGxlci5iaW5kKCdhY3RpdmUnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBhcmdzO1xuICAgICAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlci5hcHBseShfdGhpcywgWydjaGFuZ2UnLCBjb250cm9sbGVyXS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgY29udHJvbGxlci5iaW5kKCdyZWxlYXNlJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYztcbiAgICAgICAgICByZXR1cm4gX3RoaXMuY29udHJvbGxlcnMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaSwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgICAgICAgICByZWYgPSB0aGlzLmNvbnRyb2xsZXJzO1xuICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIGMgPSByZWZbaV07XG4gICAgICAgICAgICAgIGlmIChjICE9PSBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICB9KS5jYWxsKF90aGlzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XG4gICAgfTtcblxuICAgIE1hbmFnZXIucHJvdG90eXBlLmRlYWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgWydjaGFuZ2UnLCBmYWxzZV0uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG5cbiAgICBNYW5hZ2VyLnByb3RvdHlwZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzLCBjb250LCBjdXJyZW50LCBpLCBsZW4sIHJlZjtcbiAgICAgIGN1cnJlbnQgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICAgIHJlZiA9IHRoaXMuY29udHJvbGxlcnM7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29udCA9IHJlZltpXTtcbiAgICAgICAgaWYgKGNvbnQgIT09IGN1cnJlbnQpIHtcbiAgICAgICAgICBjb250LmRlYWN0aXZhdGUuYXBwbHkoY29udCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50LmFjdGl2YXRlLmFwcGx5KGN1cnJlbnQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWFuYWdlcjtcblxuICB9KShTcGluZS5Nb2R1bGUpO1xuXG4gIFNwaW5lLkNvbnRyb2xsZXIuaW5jbHVkZSh7XG4gICAgYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuYmluZCgnYWN0aXZlJywgYXJnc1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzLnVuc2hpZnQoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGlzQWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsLmhhc0NsYXNzKCdhY3RpdmUnKTtcbiAgICB9LFxuICAgIGFjdGl2YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9KTtcblxuICBTcGluZS5TdGFjayA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFN0YWNrLCBzdXBlckNsYXNzKTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5jb250cm9sbGVycyA9IHt9O1xuXG4gICAgU3RhY2sucHJvdG90eXBlLnJvdXRlcyA9IHt9O1xuXG4gICAgU3RhY2sucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdzcGluZSBzdGFjayc7XG5cbiAgICBmdW5jdGlvbiBTdGFjaygpIHtcbiAgICAgIHRoaXMucmVsZWFzZSA9IGJpbmQodGhpcy5yZWxlYXNlLCB0aGlzKTtcbiAgICAgIHZhciBmbiwga2V5LCByZWYsIHJlZjEsIHJlZjIsIHZhbHVlO1xuICAgICAgU3RhY2suX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgU3BpbmUuTWFuYWdlcjtcbiAgICAgIHRoaXMucm91dGVyID0gKHJlZiA9IFNwaW5lLlJvdXRlKSAhPSBudWxsID8gcmVmLmNyZWF0ZSgpIDogdm9pZCAwO1xuICAgICAgcmVmMSA9IHRoaXMuY29udHJvbGxlcnM7XG4gICAgICBmb3IgKGtleSBpbiByZWYxKSB7XG4gICAgICAgIHZhbHVlID0gcmVmMVtrZXldO1xuICAgICAgICBpZiAodGhpc1trZXldICE9IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihcIidAXCIgKyBrZXkgKyBcIicgYWxyZWFkeSBhc3NpZ25lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tleV0gPSBuZXcgdmFsdWUoe1xuICAgICAgICAgIHN0YWNrOiB0aGlzXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZCh0aGlzW2tleV0pO1xuICAgICAgfVxuICAgICAgcmVmMiA9IHRoaXMucm91dGVzO1xuICAgICAgZm4gPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICB2YXIgY2FsbGJhY2s7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FsbGJhY2sgfHwgKGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcmVmMztcbiAgICAgICAgICAgIHJldHVybiAocmVmMyA9IF90aGlzW3ZhbHVlXSkuYWN0aXZlLmFwcGx5KHJlZjMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJvdXRlKGtleSwgY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICBmb3IgKGtleSBpbiByZWYyKSB7XG4gICAgICAgIHZhbHVlID0gcmVmMltrZXldO1xuICAgICAgICBmbihrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzW1wiZGVmYXVsdFwiXSkge1xuICAgICAgICB0aGlzW3RoaXNbXCJkZWZhdWx0XCJdXS5hY3RpdmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBTdGFjay5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgdGhpcy5tYW5hZ2VyLmFkZChjb250cm9sbGVyKTtcbiAgICAgIHJldHVybiB0aGlzLmFwcGVuZChjb250cm9sbGVyKTtcbiAgICB9O1xuXG4gICAgU3RhY2sucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAoKHJlZiA9IHRoaXMucm91dGVyKSAhPSBudWxsKSB7XG4gICAgICAgIHJlZi5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gU3RhY2suX19zdXBlcl9fLnJlbGVhc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN0YWNrO1xuXG4gIH0pKFNwaW5lLkNvbnRyb2xsZXIpO1xuXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZSAhPT0gbnVsbCkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gU3BpbmUuTWFuYWdlcjtcbiAgfVxuXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZSAhPT0gbnVsbCkge1xuICAgIG1vZHVsZS5leHBvcnRzLlN0YWNrID0gU3BpbmUuU3RhY2s7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFuYWdlci5qcy5tYXBcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMC4wXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBQYXRoLCBSb3V0ZSwgU3BpbmUsIGVzY2FwZVJlZ0V4cCwgaGFzaFN0cmlwLCBuYW1lZFBhcmFtLCBzcGxhdFBhcmFtLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgc2xpY2UgPSBbXS5zbGljZTtcblxuICBTcGluZSA9IHRoaXMuU3BpbmUgfHwgcmVxdWlyZSgnc3BpbmUnKTtcblxuICAkID0gU3BpbmUuJDtcblxuICBoYXNoU3RyaXAgPSAvXiMqLztcblxuICBuYW1lZFBhcmFtID0gLzooW1xcd1xcZF0rKS9nO1xuXG4gIHNwbGF0UGFyYW0gPSAvXFwqKFtcXHdcXGRdKykvZztcblxuICBlc2NhcGVSZWdFeHAgPSAvWy1bXFxde30oKSs/LixcXFxcXiR8I1xcc10vZztcblxuICBQYXRoID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoUGF0aCwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBQYXRoKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbWF0Y2g7XG4gICAgICB0aGlzLm5hbWVzID0gW107XG4gICAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICBuYW1lZFBhcmFtLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBuYW1lZFBhcmFtLmV4ZWMocGF0aCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5uYW1lcy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBzcGxhdFBhcmFtLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBzcGxhdFBhcmFtLmV4ZWMocGF0aCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5uYW1lcy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgJ1xcXFwkJicpLnJlcGxhY2UobmFtZWRQYXJhbSwgJyhbXlxcL10qKScpLnJlcGxhY2Uoc3BsYXRQYXJhbSwgJyguKj8pJyk7XG4gICAgICAgIHRoaXMucm91dGUgPSBuZXcgUmVnRXhwKFwiXlwiICsgcGF0aCArIFwiJFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucm91dGUgPSBwYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIFBhdGgucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24ocGF0aCwgb3B0aW9ucykge1xuICAgICAgdmFyIGksIGosIGxlbiwgbWF0Y2gsIHBhcmFtLCBwYXJhbXM7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmICghKG1hdGNoID0gdGhpcy5yb3V0ZS5leGVjKHBhdGgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvcHRpb25zLm1hdGNoID0gbWF0Y2g7XG4gICAgICBwYXJhbXMgPSBtYXRjaC5zbGljZSgxKTtcbiAgICAgIGlmICh0aGlzLm5hbWVzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gcGFyYW1zLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICAgIHBhcmFtID0gcGFyYW1zW2ldO1xuICAgICAgICAgIG9wdGlvbnNbdGhpcy5uYW1lc1tpXV0gPSBwYXJhbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgUm91dGUudHJpZ2dlcignYmVmb3JlJywgdGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5jYWxsYmFjay5jYWxsKG51bGwsIG9wdGlvbnMpICE9PSBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhdGg7XG5cbiAgfSkoU3BpbmUuTW9kdWxlKTtcblxuICBSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgdmFyIHJlZjtcblxuICAgIGV4dGVuZChSb3V0ZSwgc3VwZXJDbGFzcyk7XG5cbiAgICBSb3V0ZS5leHRlbmQoU3BpbmUuRXZlbnRzKTtcblxuICAgIFJvdXRlLmhpc3RvcnlTdXBwb3J0ID0gKChyZWYgPSB3aW5kb3cuaGlzdG9yeSkgIT0gbnVsbCA/IHJlZi5wdXNoU3RhdGUgOiB2b2lkIDApICE9IG51bGw7XG5cbiAgICBSb3V0ZS5vcHRpb25zID0ge1xuICAgICAgdHJpZ2dlcjogdHJ1ZSxcbiAgICAgIGhpc3Rvcnk6IGZhbHNlLFxuICAgICAgc2hpbTogZmFsc2UsXG4gICAgICByZXBsYWNlOiBmYWxzZSxcbiAgICAgIHJlZGlyZWN0OiBmYWxzZVxuICAgIH07XG5cbiAgICBSb3V0ZS5yb3V0ZXJzID0gW107XG5cbiAgICBSb3V0ZS5zZXR1cCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhpc3RvcnkpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5U3VwcG9ydCAmJiB0aGlzLm9wdGlvbnMuaGlzdG9yeTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hpbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5KSB7XG4gICAgICAgICQod2luZG93KS5iaW5kKCdwb3BzdGF0ZScsIHRoaXMuY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQod2luZG93KS5iaW5kKCdoYXNoY2hhbmdlJywgdGhpcy5jaGFuZ2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlKCk7XG4gICAgfTtcblxuICAgIFJvdXRlLnVuYmluZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHVuYmluZFJlc3VsdDtcbiAgICAgIHVuYmluZFJlc3VsdCA9IFNwaW5lLkV2ZW50cy51bmJpbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdW5iaW5kUmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaGltKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkpIHtcbiAgICAgICAgcmV0dXJuICQod2luZG93KS51bmJpbmQoJ3BvcHN0YXRlJywgdGhpcy5jaGFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICQod2luZG93KS51bmJpbmQoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJvdXRlLm5hdmlnYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgbGFzdEFyZywgb3B0aW9ucywgcGF0aCwgcm91dGVzO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICAgIGlmICh0eXBlb2YgbGFzdEFyZyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgb3B0aW9ucyA9IGFyZ3MucG9wKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsYXN0QXJnID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgb3B0aW9ucy50cmlnZ2VyID0gYXJncy5wb3AoKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIHBhdGggPSBhcmdzLmpvaW4oJy8nKTtcbiAgICAgIGlmICh0aGlzLnBhdGggPT09IHBhdGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgIGlmIChvcHRpb25zLnRyaWdnZXIpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCduYXZpZ2F0ZScsIHRoaXMucGF0aCk7XG4gICAgICAgIHJvdXRlcyA9IHRoaXMubWF0Y2hSb3V0ZXModGhpcy5wYXRoLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFyb3V0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlZGlyZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5yZWRpcmVjdC5hcHBseSh0aGlzLCBbdGhpcy5wYXRoLCBvcHRpb25zXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZGlyZWN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucmVkaXJlY3QodGhpcy5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnNoaW0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeSAmJiBvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgdGhpcy5wYXRoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5KSB7XG4gICAgICAgIHJldHVybiBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHRoaXMucGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhhc2ggPSB0aGlzLnBhdGg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJvdXRlLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJvdXRlcjtcbiAgICAgIHJvdXRlciA9IG5ldyB0aGlzO1xuICAgICAgdGhpcy5yb3V0ZXJzLnB1c2gocm91dGVyKTtcbiAgICAgIHJldHVybiByb3V0ZXI7XG4gICAgfTtcblxuICAgIFJvdXRlLmFkZCA9IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuYWRkKHBhdGgsIGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgUm91dGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIga2V5LCByZXN1bHRzLCB2YWx1ZTtcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcgJiYgIShwYXRoIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoa2V5IGluIHBhdGgpIHtcbiAgICAgICAgICB2YWx1ZSA9IHBhdGhba2V5XTtcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5hZGQoa2V5LCB2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVzLnB1c2gobmV3IFBhdGgocGF0aCwgY2FsbGJhY2spKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUm91dGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5yb3V0ZXMubGVuZ3RoID0gMDtcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnJvdXRlcnMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqLCBsZW4sIHJlZjEsIHJlc3VsdHM7XG4gICAgICAgIHJlZjEgPSB0aGlzLmNvbnN0cnVjdG9yLnJvdXRlcnM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHIgPSByZWYxW2pdO1xuICAgICAgICAgIGlmIChyICE9PSB0aGlzKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgUm91dGUuZ2V0UGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhdGg7XG4gICAgICBpZiAodGhpcy5oaXN0b3J5KSB7XG4gICAgICAgIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgIGlmIChwYXRoLnN1YnN0cigwLCAxKSAhPT0gJy8nKSB7XG4gICAgICAgICAgcGF0aCA9ICcvJyArIHBhdGg7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShoYXNoU3RyaXAsICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXRoO1xuICAgIH07XG5cbiAgICBSb3V0ZS5nZXRIb3N0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgfTtcblxuICAgIFJvdXRlLmNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhdGg7XG4gICAgICBwYXRoID0gUm91dGUuZ2V0UGF0aCgpO1xuICAgICAgaWYgKHBhdGggPT09IFJvdXRlLnBhdGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgUm91dGUucGF0aCA9IHBhdGg7XG4gICAgICByZXR1cm4gUm91dGUubWF0Y2hSb3V0ZXMoUm91dGUucGF0aCk7XG4gICAgfTtcblxuICAgIFJvdXRlLm1hdGNoUm91dGVzID0gZnVuY3Rpb24ocGF0aCwgb3B0aW9ucykge1xuICAgICAgdmFyIGosIGxlbiwgbWF0Y2gsIG1hdGNoZXMsIHJlZjEsIHJvdXRlcjtcbiAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgIHJlZjEgPSB0aGlzLnJvdXRlcnMuY29uY2F0KFt0aGlzLnJvdXRlcl0pO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICByb3V0ZXIgPSByZWYxW2pdO1xuICAgICAgICBtYXRjaCA9IHJvdXRlci5tYXRjaFJvdXRlKHBhdGgsIG9wdGlvbnMpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBtYXRjaGVzLnB1c2gobWF0Y2gpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCBtYXRjaGVzLCBwYXRoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgIH07XG5cbiAgICBSb3V0ZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24gPSBwYXRoO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBSb3V0ZSgpIHtcbiAgICAgIHRoaXMucm91dGVzID0gW107XG4gICAgfVxuXG4gICAgUm91dGUucHJvdG90eXBlLm1hdGNoUm91dGUgPSBmdW5jdGlvbihwYXRoLCBvcHRpb25zKSB7XG4gICAgICB2YXIgaiwgbGVuLCByZWYxLCByb3V0ZTtcbiAgICAgIHJlZjEgPSB0aGlzLnJvdXRlcztcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcm91dGUgPSByZWYxW2pdO1xuICAgICAgICBpZiAocm91dGUubWF0Y2gocGF0aCwgb3B0aW9ucykpIHtcbiAgICAgICAgICByZXR1cm4gcm91dGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUm91dGUucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzLCByZWYxO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgYXJncy5zcGxpY2UoMSwgMCwgdGhpcyk7XG4gICAgICByZXR1cm4gKHJlZjEgPSB0aGlzLmNvbnN0cnVjdG9yKS50cmlnZ2VyLmFwcGx5KHJlZjEsIGFyZ3MpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGU7XG5cbiAgfSkoU3BpbmUuTW9kdWxlKTtcblxuICBSb3V0ZS5yb3V0ZXIgPSBuZXcgUm91dGU7XG5cbiAgU3BpbmUuQ29udHJvbGxlci5pbmNsdWRlKHtcbiAgICByb3V0ZTogZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICAgIGlmICh0aGlzLnJvdXRlciBpbnN0YW5jZW9mIFNwaW5lLlJvdXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlci5hZGQocGF0aCwgdGhpcy5wcm94eShjYWxsYmFjaykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFNwaW5lLlJvdXRlLmFkZChwYXRoLCB0aGlzLnByb3h5KGNhbGxiYWNrKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICByb3V0ZXM6IGZ1bmN0aW9uKHJvdXRlcykge1xuICAgICAgdmFyIGtleSwgcmVzdWx0cywgdmFsdWU7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGtleSBpbiByb3V0ZXMpIHtcbiAgICAgICAgdmFsdWUgPSByb3V0ZXNba2V5XTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMucm91dGUoa2V5LCB2YWx1ZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSxcbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gU3BpbmUuUm91dGUubmF2aWdhdGUuYXBwbHkoU3BpbmUuUm91dGUsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9KTtcblxuICBSb3V0ZS5QYXRoID0gUGF0aDtcblxuICBTcGluZS5Sb3V0ZSA9IFJvdXRlO1xuXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZSAhPT0gbnVsbCkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUm91dGU7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm91dGUuanMubWFwXG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTAuMFxuXG4vKlxuU3BpbmUuanMgTVZDIGxpYnJhcnlcblJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyICQsIENvbnRyb2xsZXIsIEV2ZW50cywgTG9nLCBNb2RlbCwgTW9kdWxlLCBTcGluZSwgY3JlYXRlT2JqZWN0LCBtYWtlQXJyYXksIG1vZHVsZUtleXdvcmRzLFxuICAgIHNsaWNlID0gW10uc2xpY2UsXG4gICAgaW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbiAgRXZlbnRzID0ge1xuICAgIGJpbmQ6IGZ1bmN0aW9uKGV2LCBjYWxsYmFjaykge1xuICAgICAgdmFyIGJhc2UsIGV2cywgaiwgbGVuLCBuYW1lO1xuICAgICAgZXZzID0gZXYuc3BsaXQoJyAnKTtcbiAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eSgnX2NhbGxiYWNrcycpKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyB8fCAodGhpcy5fY2FsbGJhY2tzID0ge30pO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMCwgbGVuID0gZXZzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIG5hbWUgPSBldnNbal07XG4gICAgICAgIChiYXNlID0gdGhpcy5fY2FsbGJhY2tzKVtuYW1lXSB8fCAoYmFzZVtuYW1lXSA9IFtdKTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzW25hbWVdLnB1c2goY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBvbmU6IGZ1bmN0aW9uKGV2LCBjYWxsYmFjaykge1xuICAgICAgdmFyIGhhbmRsZXI7XG4gICAgICByZXR1cm4gdGhpcy5iaW5kKGV2LCBoYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudW5iaW5kKGV2LCBoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MsIGNhbGxiYWNrLCBldiwgaiwgbGVuLCBsaXN0LCByZWY7XG4gICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICBldiA9IGFyZ3Muc2hpZnQoKTtcbiAgICAgIGxpc3QgPSAocmVmID0gdGhpcy5fY2FsbGJhY2tzKSAhPSBudWxsID8gcmVmW2V2XSA6IHZvaWQgMDtcbiAgICAgIGlmICghbGlzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSBsaXN0Lmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbGlzdFtqXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGxpc3RlblRvOiBmdW5jdGlvbihvYmosIGV2LCBjYWxsYmFjaykge1xuICAgICAgb2JqLmJpbmQoZXYsIGNhbGxiYWNrKTtcbiAgICAgIHRoaXMubGlzdGVuaW5nVG8gfHwgKHRoaXMubGlzdGVuaW5nVG8gPSBbXSk7XG4gICAgICB0aGlzLmxpc3RlbmluZ1RvLnB1c2goe1xuICAgICAgICBvYmo6IG9iaixcbiAgICAgICAgZXY6IGV2LFxuICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBsaXN0ZW5Ub09uY2U6IGZ1bmN0aW9uKG9iaiwgZXYsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaGFuZGxlciwgbGlzdGVuaW5nVG9PbmNlO1xuICAgICAgbGlzdGVuaW5nVG9PbmNlID0gdGhpcy5saXN0ZW5pbmdUb09uY2UgfHwgKHRoaXMubGlzdGVuaW5nVG9PbmNlID0gW10pO1xuICAgICAgb2JqLmJpbmQoZXYsIGhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIGlkeCwgaiwgbGVuLCBsdDtcbiAgICAgICAgaWR4ID0gLTE7XG4gICAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSBsaXN0ZW5pbmdUb09uY2UubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XG4gICAgICAgICAgbHQgPSBsaXN0ZW5pbmdUb09uY2VbaV07XG4gICAgICAgICAgaWYgKGx0Lm9iaiA9PT0gb2JqKSB7XG4gICAgICAgICAgICBpZiAobHQuZXYgPT09IGV2ICYmIGx0LmNhbGxiYWNrID09PSBoYW5kbGVyKSB7XG4gICAgICAgICAgICAgIGlkeCA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9iai51bmJpbmQoZXYsIGhhbmRsZXIpO1xuICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgIGxpc3RlbmluZ1RvT25jZS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgbGlzdGVuaW5nVG9PbmNlLnB1c2goe1xuICAgICAgICBvYmo6IG9iaixcbiAgICAgICAgZXY6IGV2LFxuICAgICAgICBjYWxsYmFjazogaGFuZGxlclxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHN0b3BMaXN0ZW5pbmc6IGZ1bmN0aW9uKG9iaiwgZXZlbnRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGUsIGV2LCBldnRzLCBpZHgsIGosIGssIGwsIGxlbiwgbGVuMSwgbGVuMiwgbGVuMywgbGlzdGVuaW5nVG8sIGx0LCBtLCBuLCByZWYsIHJlZjEsIHJlZjI7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZWYgPSBbdGhpcy5saXN0ZW5pbmdUbywgdGhpcy5saXN0ZW5pbmdUb09uY2VdO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBsaXN0ZW5pbmdUbyA9IHJlZltqXTtcbiAgICAgICAgICBpZiAoIShsaXN0ZW5pbmdUbyAhPSBudWxsID8gbGlzdGVuaW5nVG8ubGVuZ3RoIDogdm9pZCAwKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoayA9IDAsIGxlbjEgPSBsaXN0ZW5pbmdUby5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgICAgIGx0ID0gbGlzdGVuaW5nVG9ba107XG4gICAgICAgICAgICBsdC5vYmoudW5iaW5kKGx0LmV2LCBsdC5jYWxsYmFjayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuaW5nVG8gPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nVG9PbmNlID0gdm9pZCAwO1xuICAgICAgfSBlbHNlIGlmIChvYmopIHtcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzID8gZXZlbnRzLnNwbGl0KCcgJykgOiBbdm9pZCAwXTtcbiAgICAgICAgcmVmMSA9IFt0aGlzLmxpc3RlbmluZ1RvLCB0aGlzLmxpc3RlbmluZ1RvT25jZV07XG4gICAgICAgIGZvciAobCA9IDAsIGxlbjIgPSByZWYxLmxlbmd0aDsgbCA8IGxlbjI7IGwrKykge1xuICAgICAgICAgIGxpc3RlbmluZ1RvID0gcmVmMVtsXTtcbiAgICAgICAgICBpZiAoIWxpc3RlbmluZ1RvKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChtID0gMCwgbGVuMyA9IGV2ZW50cy5sZW5ndGg7IG0gPCBsZW4zOyBtKyspIHtcbiAgICAgICAgICAgIGV2ID0gZXZlbnRzW21dO1xuICAgICAgICAgICAgZm9yIChpZHggPSBuID0gcmVmMiA9IGxpc3RlbmluZ1RvLmxlbmd0aCAtIDE7IHJlZjIgPD0gMCA/IG4gPD0gMCA6IG4gPj0gMDsgaWR4ID0gcmVmMiA8PSAwID8gKytuIDogLS1uKSB7XG4gICAgICAgICAgICAgIGx0ID0gbGlzdGVuaW5nVG9baWR4XTtcbiAgICAgICAgICAgICAgaWYgKGx0Lm9iaiAhPT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGx0LmNhbGxiYWNrICE9PSBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICgoIWV2KSB8fCAoZXYgPT09IGx0LmV2KSkge1xuICAgICAgICAgICAgICAgIGx0Lm9iai51bmJpbmQobHQuZXYsIGx0LmNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nVG8uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2KSB7XG4gICAgICAgICAgICAgICAgZXZ0cyA9IGx0LmV2LnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4T2YuY2FsbChldnRzLCBldikgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgZXZ0cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbjQsIHAsIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChwID0gMCwgbGVuNCA9IGV2dHMubGVuZ3RoOyBwIDwgbGVuNDsgcCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZSA9IGV2dHNbcF07XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGUgIT09IGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICAgIGx0LmV2ID0gJC50cmltKGV2dHMuam9pbignICcpKTtcbiAgICAgICAgICAgICAgICAgIGx0Lm9iai51bmJpbmQoZXYsIGx0LmNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgdW5iaW5kOiBmdW5jdGlvbihldiwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBjYiwgZXZzLCBpLCBqLCBrLCBsZW4sIGxlbjEsIGxpc3QsIG5hbWUsIHJlZjtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGlmICghZXYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBldnMgPSBldi5zcGxpdCgnICcpO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gZXZzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIG5hbWUgPSBldnNbal07XG4gICAgICAgIGxpc3QgPSAocmVmID0gdGhpcy5fY2FsbGJhY2tzKSAhPSBudWxsID8gcmVmW25hbWVdIDogdm9pZCAwO1xuICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tuYW1lXTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSBrID0gMCwgbGVuMSA9IGxpc3QubGVuZ3RoOyBrIDwgbGVuMTsgaSA9ICsraykge1xuICAgICAgICAgIGNiID0gbGlzdFtpXTtcbiAgICAgICAgICBpZiAoIShjYiA9PT0gY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGlzdCA9IGxpc3Quc2xpY2UoKTtcbiAgICAgICAgICBsaXN0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICB0aGlzLl9jYWxsYmFja3NbbmFtZV0gPSBsaXN0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG5cbiAgRXZlbnRzLm9uID0gRXZlbnRzLmJpbmQ7XG5cbiAgRXZlbnRzLm9mZiA9IEV2ZW50cy51bmJpbmQ7XG5cbiAgTG9nID0ge1xuICAgIHRyYWNlOiB0cnVlLFxuICAgIGxvZ1ByZWZpeDogJyhBcHApJyxcbiAgICBsb2c6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3M7XG4gICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICBpZiAoIXRoaXMudHJhY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubG9nUHJlZml4KSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdCh0aGlzLmxvZ1ByZWZpeCk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUubG9nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIG1vZHVsZUtleXdvcmRzID0gWydpbmNsdWRlZCcsICdleHRlbmRlZCddO1xuXG4gIE1vZHVsZSA9IChmdW5jdGlvbigpIHtcbiAgICBNb2R1bGUuaW5jbHVkZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGtleSwgcmVmLCB2YWx1ZTtcbiAgICAgIGlmICghb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaW5jbHVkZShvYmopIHJlcXVpcmVzIG9iaicpO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwobW9kdWxlS2V5d29yZHMsIGtleSkgPCAwKSB7XG4gICAgICAgICAgdGhpcy5wcm90b3R5cGVba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHJlZiA9IG9iai5pbmNsdWRlZCkgIT0gbnVsbCkge1xuICAgICAgICByZWYuYXBwbHkodGhpcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kdWxlLmV4dGVuZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGtleSwgcmVmLCB2YWx1ZTtcbiAgICAgIGlmICghb2JqKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZXh0ZW5kKG9iaikgcmVxdWlyZXMgb2JqJyk7XG4gICAgICB9XG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgaWYgKGluZGV4T2YuY2FsbChtb2R1bGVLZXl3b3Jkcywga2V5KSA8IDApIHtcbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKChyZWYgPSBvYmouZXh0ZW5kZWQpICE9IG51bGwpIHtcbiAgICAgICAgcmVmLmFwcGx5KHRoaXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZHVsZS5wcm94eSA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIHJldHVybiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgfTtcblxuICAgIE1vZHVsZS5wcm90b3R5cGUucHJveHkgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShfdGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBNb2R1bGUoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBNb2R1bGU7XG5cbiAgfSkoKTtcblxuICBNb2RlbCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKE1vZGVsLCBzdXBlckNsYXNzKTtcblxuICAgIE1vZGVsLmV4dGVuZChFdmVudHMpO1xuXG4gICAgTW9kZWwuaW5jbHVkZShFdmVudHMpO1xuXG4gICAgTW9kZWwucmVjb3JkcyA9IFtdO1xuXG4gICAgTW9kZWwuaXJlY29yZHMgPSB7fTtcblxuICAgIE1vZGVsLmF0dHJpYnV0ZXMgPSBbXTtcblxuICAgIE1vZGVsLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGF0dHJpYnV0ZXMsIG5hbWU7XG4gICAgICBuYW1lID0gYXJndW1lbnRzWzBdLCBhdHRyaWJ1dGVzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgICB0aGlzLmNsYXNzTmFtZSA9IG5hbWU7XG4gICAgICB0aGlzLmRlbGV0ZUFsbCgpO1xuICAgICAgaWYgKGF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICB9XG4gICAgICB0aGlzLmF0dHJpYnV0ZXMgJiYgKHRoaXMuYXR0cmlidXRlcyA9IG1ha2VBcnJheSh0aGlzLmF0dHJpYnV0ZXMpKTtcbiAgICAgIHRoaXMuYXR0cmlidXRlcyB8fCAodGhpcy5hdHRyaWJ1dGVzID0gW10pO1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2RlbC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xhc3NOYW1lICsgXCIoXCIgKyAodGhpcy5hdHRyaWJ1dGVzLmpvaW4oXCIsIFwiKSkgKyBcIilcIjtcbiAgICB9O1xuXG4gICAgTW9kZWwuZmluZCA9IGZ1bmN0aW9uKGlkLCBub3RGb3VuZCkge1xuICAgICAgdmFyIHJlZjtcbiAgICAgIGlmIChub3RGb3VuZCA9PSBudWxsKSB7XG4gICAgICAgIG5vdEZvdW5kID0gdGhpcy5ub3RGb3VuZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKHJlZiA9IHRoaXMuaXJlY29yZHNbaWRdKSAhPSBudWxsID8gcmVmLmNsb25lKCkgOiB2b2lkIDApIHx8ICh0eXBlb2Ygbm90Rm91bmQgPT09IFwiZnVuY3Rpb25cIiA/IG5vdEZvdW5kKGlkKSA6IHZvaWQgMCk7XG4gICAgfTtcblxuICAgIE1vZGVsLmZpbmRBbGwgPSBmdW5jdGlvbihpZHMsIG5vdEZvdW5kKSB7XG4gICAgICB2YXIgaWQsIGosIGxlbiwgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGlkcy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBpZCA9IGlkc1tqXTtcbiAgICAgICAgaWYgKHRoaXMuZmluZChpZCwgbm90Rm91bmQpKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZmluZChpZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTW9kZWwubm90Rm91bmQgPSBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIE1vZGVsLmV4aXN0cyA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmlyZWNvcmRzW2lkXSk7XG4gICAgfTtcblxuICAgIE1vZGVsLmFkZFJlY29yZCA9IGZ1bmN0aW9uKHJlY29yZCwgaWR4KSB7XG4gICAgICB2YXIgcm9vdDtcbiAgICAgIGlmIChyb290ID0gdGhpcy5pcmVjb3Jkc1tyZWNvcmQuaWQgfHwgcmVjb3JkLmNpZF0pIHtcbiAgICAgICAgcm9vdC5yZWZyZXNoKHJlY29yZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWNvcmQuaWQgfHwgKHJlY29yZC5pZCA9IHJlY29yZC5jaWQpO1xuICAgICAgICB0aGlzLmlyZWNvcmRzW3JlY29yZC5pZF0gPSB0aGlzLmlyZWNvcmRzW3JlY29yZC5jaWRdID0gcmVjb3JkO1xuICAgICAgICBpZiAoaWR4ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0aGlzLnJlY29yZHMuc3BsaWNlKGlkeCwgMCwgcmVjb3JkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlY29yZHMucHVzaChyZWNvcmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH07XG5cbiAgICBNb2RlbC5yZWZyZXNoID0gZnVuY3Rpb24odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgaiwgbGVuLCByZWNvcmQsIHJlY29yZHMsIHJlc3VsdDtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuY2xlYXIpIHtcbiAgICAgICAgdGhpcy5kZWxldGVBbGwoKTtcbiAgICAgIH1cbiAgICAgIHJlY29yZHMgPSB0aGlzLmZyb21KU09OKHZhbHVlcyk7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVjb3JkcykpIHtcbiAgICAgICAgcmVjb3JkcyA9IFtyZWNvcmRzXTtcbiAgICAgIH1cbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlY29yZHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcmVjb3JkID0gcmVjb3Jkc1tqXTtcbiAgICAgICAgdGhpcy5hZGRSZWNvcmQocmVjb3JkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc29ydCgpO1xuICAgICAgcmVzdWx0ID0gdGhpcy5jbG9uZUFycmF5KHJlY29yZHMpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdyZWZyZXNoJywgcmVzdWx0LCBvcHRpb25zKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIE1vZGVsLnNlbGVjdCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaiwgbGVuLCByZWNvcmQsIHJlZiwgcmVzdWx0cztcbiAgICAgIHJlZiA9IHRoaXMucmVjb3JkcztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICByZWNvcmQgPSByZWZbal07XG4gICAgICAgIGlmIChjYWxsYmFjayhyZWNvcmQpKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHJlY29yZC5jbG9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLmZpbmRCeUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgaiwgbGVuLCByZWNvcmQsIHJlZjtcbiAgICAgIHJlZiA9IHRoaXMucmVjb3JkcztcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICByZWNvcmQgPSByZWZbal07XG4gICAgICAgIGlmIChyZWNvcmRbbmFtZV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlY29yZC5jbG9uZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgTW9kZWwuZmluZEFsbEJ5QXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtW25hbWVdID09PSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBNb2RlbC5lYWNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlY29yZCwgcmVmLCByZXN1bHRzO1xuICAgICAgcmVmID0gdGhpcy5yZWNvcmRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJlY29yZCA9IHJlZltqXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGNhbGxiYWNrKHJlY29yZC5jbG9uZSgpKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTW9kZWwuYWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jbG9uZUFycmF5KHRoaXMucmVjb3Jkcyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnNsaWNlID0gZnVuY3Rpb24oYmVnaW4sIGVuZCkge1xuICAgICAgaWYgKGJlZ2luID09IG51bGwpIHtcbiAgICAgICAgYmVnaW4gPSAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY2xvbmVBcnJheSh0aGlzLnJlY29yZHMuc2xpY2UoYmVnaW4sIGVuZCkpO1xuICAgIH07XG5cbiAgICBNb2RlbC5maXJzdCA9IGZ1bmN0aW9uKGVuZCkge1xuICAgICAgdmFyIHJlZjtcbiAgICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgICBlbmQgPSAxO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVBcnJheSh0aGlzLnJlY29yZHMuc2xpY2UoMCwgZW5kKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKHJlZiA9IHRoaXMucmVjb3Jkc1swXSkgIT0gbnVsbCA/IHJlZi5jbG9uZSgpIDogdm9pZCAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNb2RlbC5sYXN0ID0gZnVuY3Rpb24oYmVnaW4pIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAodHlwZW9mIGJlZ2luID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZUFycmF5KHRoaXMucmVjb3Jkcy5zbGljZSgtYmVnaW4pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAocmVmID0gdGhpcy5yZWNvcmRzW3RoaXMucmVjb3Jkcy5sZW5ndGggLSAxXSkgIT0gbnVsbCA/IHJlZi5jbG9uZSgpIDogdm9pZCAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNb2RlbC5jb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVjb3Jkcy5sZW5ndGg7XG4gICAgfTtcblxuICAgIE1vZGVsLmRlbGV0ZUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5yZWNvcmRzID0gW107XG4gICAgICByZXR1cm4gdGhpcy5pcmVjb3JkcyA9IHt9O1xuICAgIH07XG5cbiAgICBNb2RlbC5kZXN0cm95QWxsID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWYsIHJlc3VsdHM7XG4gICAgICByZWYgPSB0aGlzLnJlY29yZHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcmVjb3JkID0gcmVmW2pdO1xuICAgICAgICByZXN1bHRzLnB1c2gocmVjb3JkLmRlc3Ryb3kob3B0aW9ucykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLnVwZGF0ZSA9IGZ1bmN0aW9uKGlkLCBhdHRzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5maW5kKGlkKS51cGRhdGVBdHRyaWJ1dGVzKGF0dHMsIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5jcmVhdGUgPSBmdW5jdGlvbihhdHRzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVjb3JkO1xuICAgICAgcmVjb3JkID0gbmV3IHRoaXMoYXR0cyk7XG4gICAgICByZXR1cm4gcmVjb3JkLnNhdmUob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIE1vZGVsLmRlc3Ryb3kgPSBmdW5jdGlvbihpZCwgb3B0aW9ucykge1xuICAgICAgdmFyIHJlZjtcbiAgICAgIHJldHVybiAocmVmID0gdGhpcy5maW5kKGlkKSkgIT0gbnVsbCA/IHJlZi5kZXN0cm95KG9wdGlvbnMpIDogdm9pZCAwO1xuICAgIH07XG5cbiAgICBNb2RlbC5jaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFja09yUGFyYW1zKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrT3JQYXJhbXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZCgnY2hhbmdlJywgY2FsbGJhY2tPclBhcmFtcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIFsnY2hhbmdlJ10uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNb2RlbC5mZXRjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrT3JQYXJhbXMpIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2tPclBhcmFtcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kKCdmZXRjaCcsIGNhbGxiYWNrT3JQYXJhbXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBbJ2ZldGNoJ10uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNb2RlbC50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlY29yZHM7XG4gICAgfTtcblxuICAgIE1vZGVsLmJlZm9yZUZyb21KU09OID0gZnVuY3Rpb24ob2JqZWN0cykge1xuICAgICAgcmV0dXJuIG9iamVjdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLmZyb21KU09OID0gZnVuY3Rpb24ob2JqZWN0cykge1xuICAgICAgdmFyIGosIGxlbiwgcmVzdWx0cywgdmFsdWU7XG4gICAgICBpZiAoIW9iamVjdHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvYmplY3RzID09PSAnc3RyaW5nJykge1xuICAgICAgICBvYmplY3RzID0gSlNPTi5wYXJzZShvYmplY3RzKTtcbiAgICAgIH1cbiAgICAgIG9iamVjdHMgPSB0aGlzLmJlZm9yZUZyb21KU09OKG9iamVjdHMpO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0cykpIHtcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSBvYmplY3RzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgdmFsdWUgPSBvYmplY3RzW2pdO1xuICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHRoaXMpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgdGhpcyh2YWx1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChvYmplY3RzIGluc3RhbmNlb2YgdGhpcykge1xuICAgICAgICAgIHJldHVybiBvYmplY3RzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyhvYmplY3RzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwuZnJvbUZvcm0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICByZXR1cm4gKHJlZiA9IG5ldyB0aGlzKS5mcm9tRm9ybS5hcHBseShyZWYsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnNvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3IpIHtcbiAgICAgICAgdGhpcy5yZWNvcmRzLnNvcnQodGhpcy5jb21wYXJhdG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2RlbC5jbG9uZUFycmF5ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgdmFsdWUgPSBhcnJheVtqXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlLmNsb25lKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLmlkQ291bnRlciA9IDA7XG5cbiAgICBNb2RlbC51aWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICAgIHZhciB1aWQ7XG4gICAgICBpZiAocHJlZml4ID09IG51bGwpIHtcbiAgICAgICAgcHJlZml4ID0gJyc7XG4gICAgICB9XG4gICAgICB1aWQgPSBwcmVmaXggKyB0aGlzLmlkQ291bnRlcisrO1xuICAgICAgaWYgKHRoaXMuZXhpc3RzKHVpZCkpIHtcbiAgICAgICAgdWlkID0gdGhpcy51aWQocHJlZml4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1aWQ7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIE1vZGVsKGF0dHMpIHtcbiAgICAgIE1vZGVsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKCh0aGlzLmNvbnN0cnVjdG9yLnV1aWQgIT0gbnVsbCkgJiYgdHlwZW9mIHRoaXMuY29uc3RydWN0b3IudXVpZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmNpZCA9IHRoaXMuY29uc3RydWN0b3IudXVpZCgpO1xuICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICB0aGlzLmlkID0gdGhpcy5jaWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2lkID0gKGF0dHMgIT0gbnVsbCA/IGF0dHMuY2lkIDogdm9pZCAwKSB8fCB0aGlzLmNvbnN0cnVjdG9yLnVpZCgnYy0nKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdHRzKSB7XG4gICAgICAgIHRoaXMubG9hZChhdHRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuaXNOZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5leGlzdHMoKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmlzVmFsaWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy52YWxpZGF0ZSgpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihhdHRzKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGlmIChhdHRzLmlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBhdHRzLmlkO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gYXR0cykge1xuICAgICAgICB2YWx1ZSA9IGF0dHNba2V5XTtcbiAgICAgICAgaWYgKGtleSA9PT0gJ19jYWxsYmFja3MnKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpc1trZXldKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5hdHRyaWJ1dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaiwga2V5LCBsZW4sIHJlZiwgcmVzdWx0O1xuICAgICAgcmVzdWx0ID0ge307XG4gICAgICByZWYgPSB0aGlzLmNvbnN0cnVjdG9yLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAga2V5ID0gcmVmW2pdO1xuICAgICAgICBpZiAoa2V5IGluIHRoaXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXNba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0aGlzW2tleV0oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0aGlzW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pZCkge1xuICAgICAgICByZXN1bHQuaWQgPSB0aGlzLmlkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmVxbCA9IGZ1bmN0aW9uKHJlYykge1xuICAgICAgcmV0dXJuIHJlYyAmJiByZWMuY29uc3RydWN0b3IgPT09IHRoaXMuY29uc3RydWN0b3IgJiYgKChyZWMuY2lkID09PSB0aGlzLmNpZCkgfHwgKHJlYy5pZCAmJiByZWMuaWQgPT09IHRoaXMuaWQpKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgZXJyb3IsIHJlY29yZDtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudmFsaWRhdGUgIT09IGZhbHNlKSB7XG4gICAgICAgIGVycm9yID0gdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJywgdGhpcywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVTYXZlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZWNvcmQgPSB0aGlzLmlzTmV3KCkgPyB0aGlzLmNyZWF0ZShvcHRpb25zKSA6IHRoaXMudXBkYXRlKG9wdGlvbnMpO1xuICAgICAgdGhpcy5zdHJpcENsb25lQXR0cnMoKTtcbiAgICAgIHRoaXMudHJpZ2dlcignc2F2ZScsIHJlY29yZCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuc3RyaXBDbG9uZUF0dHJzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KCdjaWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKGtleSBpbiB0aGlzKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHRoaXMsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHRoaXNba2V5XTtcbiAgICAgICAgaWYgKGluZGV4T2YuY2FsbCh0aGlzLmNvbnN0cnVjdG9yLmF0dHJpYnV0ZXMsIGtleSkgPj0gMCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUudXBkYXRlQXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRzO1xuICAgICAgYXR0cyA9IHt9O1xuICAgICAgYXR0c1tuYW1lXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQXR0cmlidXRlcyhhdHRzLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnVwZGF0ZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbihhdHRzLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLmxvYWQoYXR0cyk7XG4gICAgICByZXR1cm4gdGhpcy5zYXZlKG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuY2hhbmdlSUQgPSBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHJlY29yZHM7XG4gICAgICBpZiAoaWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVjb3JkcyA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHM7XG4gICAgICByZWNvcmRzW2lkXSA9IHJlY29yZHNbdGhpcy5pZF07XG4gICAgICBpZiAodGhpcy5jaWQgIT09IHRoaXMuaWQpIHtcbiAgICAgICAgZGVsZXRlIHJlY29yZHNbdGhpcy5pZF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5pZCA9IGlkO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGksIGosIGxlbiwgcmVjb3JkLCByZWNvcmRzO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICByZWNvcmRzID0gdGhpcy5jb25zdHJ1Y3Rvci5yZWNvcmRzLnNsaWNlKDApO1xuICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHJlY29yZHMubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XG4gICAgICAgIHJlY29yZCA9IHJlY29yZHNbaV07XG4gICAgICAgIGlmICghKHRoaXMuZXFsKHJlY29yZCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVjb3Jkcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5yZWNvcmRzID0gcmVjb3JkcztcbiAgICAgIGlmIChvcHRpb25zLmNsZWFyKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuaWRdO1xuICAgICAgICByZXR1cm4gZGVsZXRlIHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5jaWRdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuY2xlYXIgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zLmNsZWFyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlRGVzdHJveScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5yZW1vdmUob3B0aW9ucyk7XG4gICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2Rlc3Ryb3knLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgdGhpcywgJ2Rlc3Ryb3knLCBvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmxpc3RlbmluZ1RvKSB7XG4gICAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgfVxuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuZHVwID0gZnVuY3Rpb24obmV3UmVjb3JkKSB7XG4gICAgICB2YXIgYXR0cywgcmVjb3JkO1xuICAgICAgaWYgKG5ld1JlY29yZCA9PSBudWxsKSB7XG4gICAgICAgIG5ld1JlY29yZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBhdHRzID0gdGhpcy5hdHRyaWJ1dGVzKCk7XG4gICAgICBpZiAobmV3UmVjb3JkKSB7XG4gICAgICAgIGRlbGV0ZSBhdHRzLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXR0cy5jaWQgPSB0aGlzLmNpZDtcbiAgICAgIH1cbiAgICAgIHJlY29yZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGF0dHMpO1xuICAgICAgaWYgKCFuZXdSZWNvcmQpIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzICYmIChyZWNvcmQuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBjcmVhdGVPYmplY3QodGhpcyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5yZWxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvcmlnaW5hbDtcbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBvcmlnaW5hbCA9IHRoaXMuY29uc3RydWN0b3IuZmluZCh0aGlzLmlkKTtcbiAgICAgIHRoaXMubG9hZChvcmlnaW5hbC5hdHRyaWJ1dGVzKCkpO1xuICAgICAgcmV0dXJuIG9yaWdpbmFsO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKGF0dHMpIHtcbiAgICAgIGF0dHMgPSB0aGlzLmNvbnN0cnVjdG9yLmZyb21KU09OKGF0dHMpO1xuICAgICAgaWYgKGF0dHMuaWQgJiYgdGhpcy5pZCAhPT0gYXR0cy5pZCkge1xuICAgICAgICB0aGlzLmNoYW5nZUlEKGF0dHMuaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5pcmVjb3Jkc1t0aGlzLmlkXS5sb2FkKGF0dHMpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdyZWZyZXNoJywgdGhpcyk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsICdyZWZyZXNoJyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlcygpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIjxcIiArIHRoaXMuY29uc3RydWN0b3IuY2xhc3NOYW1lICsgXCIgKFwiICsgKEpTT04uc3RyaW5naWZ5KHRoaXMpKSArIFwiKT5cIjtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmZyb21Gb3JtID0gZnVuY3Rpb24oZm9ybSkge1xuICAgICAgdmFyIGNoZWNrYm94LCBqLCBrLCBrZXksIGwsIGxlbiwgbGVuMSwgbGVuMiwgbmFtZSwgbmFtZTEsIHJlZiwgcmVmMSwgcmVmMiwgcmVzdWx0O1xuICAgICAgcmVzdWx0ID0ge307XG4gICAgICByZWYgPSAkKGZvcm0pLmZpbmQoJ1t0eXBlPWNoZWNrYm94XTpub3QoW3ZhbHVlXSknKTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBjaGVja2JveCA9IHJlZltqXTtcbiAgICAgICAgcmVzdWx0W2NoZWNrYm94Lm5hbWVdID0gJChjaGVja2JveCkucHJvcCgnY2hlY2tlZCcpO1xuICAgICAgfVxuICAgICAgcmVmMSA9ICQoZm9ybSkuZmluZCgnW3R5cGU9Y2hlY2tib3hdW25hbWUkPVwiW11cIl0nKTtcbiAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICBjaGVja2JveCA9IHJlZjFba107XG4gICAgICAgIG5hbWUgPSBjaGVja2JveC5uYW1lLnJlcGxhY2UoL1xcW1xcXSQvLCAnJyk7XG4gICAgICAgIHJlc3VsdFtuYW1lXSB8fCAocmVzdWx0W25hbWVdID0gW10pO1xuICAgICAgICBpZiAoJChjaGVja2JveCkucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgcmVzdWx0W25hbWVdLnB1c2goY2hlY2tib3gudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWYyID0gJChmb3JtKS5zZXJpYWxpemVBcnJheSgpO1xuICAgICAgZm9yIChsID0gMCwgbGVuMiA9IHJlZjIubGVuZ3RoOyBsIDwgbGVuMjsgbCsrKSB7XG4gICAgICAgIGtleSA9IHJlZjJbbF07XG4gICAgICAgIHJlc3VsdFtuYW1lMSA9IGtleS5uYW1lXSB8fCAocmVzdWx0W25hbWUxXSA9IGtleS52YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sb2FkKHJlc3VsdCk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5leGlzdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmV4aXN0cyh0aGlzLmlkKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBjbG9uZSwgcmVjb3JkcztcbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlVXBkYXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZWNvcmRzID0gdGhpcy5jb25zdHJ1Y3Rvci5pcmVjb3JkcztcbiAgICAgIHJlY29yZHNbdGhpcy5pZF0ubG9hZCh0aGlzLmF0dHJpYnV0ZXMoKSk7XG4gICAgICB0aGlzLmNvbnN0cnVjdG9yLnNvcnQoKTtcbiAgICAgIGNsb25lID0gcmVjb3Jkc1t0aGlzLmlkXS5jbG9uZSgpO1xuICAgICAgY2xvbmUudHJpZ2dlcigndXBkYXRlJywgY2xvbmUsIG9wdGlvbnMpO1xuICAgICAgY2xvbmUudHJpZ2dlcignY2hhbmdlJywgY2xvbmUsICd1cGRhdGUnLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBjbG9uZTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBjbG9uZSwgcmVjb3JkO1xuICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVDcmVhdGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuaWQgfHwgKHRoaXMuaWQgPSB0aGlzLmNpZCk7XG4gICAgICByZWNvcmQgPSB0aGlzLmR1cChmYWxzZSk7XG4gICAgICB0aGlzLmNvbnN0cnVjdG9yLmFkZFJlY29yZChyZWNvcmQsIG9wdGlvbnMuaWR4KTtcbiAgICAgIHRoaXMuY29uc3RydWN0b3Iuc29ydCgpO1xuICAgICAgY2xvbmUgPSByZWNvcmQuY2xvbmUoKTtcbiAgICAgIGNsb25lLnRyaWdnZXIoJ2NyZWF0ZScsIGNsb25lLCBvcHRpb25zKTtcbiAgICAgIGNsb25lLnRyaWdnZXIoJ2NoYW5nZScsIGNsb25lLCAnY3JlYXRlJywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gY2xvbmU7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVjb3JkO1xuICAgICAgcmVjb3JkID0gdGhpcy5jb25zdHJ1Y3Rvci5pcmVjb3Jkc1t0aGlzLmlkXSB8fCB0aGlzO1xuICAgICAgcmV0dXJuIEV2ZW50cy5iaW5kLmFwcGx5KHJlY29yZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLm9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlY29yZDtcbiAgICAgIHJlY29yZCA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5pZF0gfHwgdGhpcztcbiAgICAgIHJldHVybiBFdmVudHMub25lLmFwcGx5KHJlY29yZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlY29yZDtcbiAgICAgIHJlY29yZCA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5pZF0gfHwgdGhpcztcbiAgICAgIHJldHVybiBFdmVudHMudW5iaW5kLmFwcGx5KHJlY29yZCwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBFdmVudHMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKGFyZ3VtZW50c1swXSA9PT0gJ3JlZnJlc2gnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChyZWYgPSB0aGlzLmNvbnN0cnVjdG9yKS50cmlnZ2VyLmFwcGx5KHJlZiwgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1vZGVsO1xuXG4gIH0pKE1vZHVsZSk7XG5cbiAgTW9kZWwucHJvdG90eXBlLm9uID0gTW9kZWwucHJvdG90eXBlLmJpbmQ7XG5cbiAgTW9kZWwucHJvdG90eXBlLm9mZiA9IE1vZGVsLnByb3RvdHlwZS51bmJpbmQ7XG5cbiAgQ29udHJvbGxlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKENvbnRyb2xsZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgQ29udHJvbGxlci5pbmNsdWRlKEV2ZW50cyk7XG5cbiAgICBDb250cm9sbGVyLmluY2x1ZGUoTG9nKTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmV2ZW50U3BsaXR0ZXIgPSAvXihcXFMrKVxccyooLiopJC87XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS50YWcgPSAnZGl2JztcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIob3B0aW9ucykge1xuICAgICAgdGhpcy5yZWxlYXNlID0gYmluZCh0aGlzLnJlbGVhc2UsIHRoaXMpO1xuICAgICAgdmFyIGNvbnRleHQsIGtleSwgcGFyZW50X3Byb3RvdHlwZSwgcmVmLCB2YWx1ZTtcbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICByZWYgPSB0aGlzLm9wdGlvbnM7XG4gICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgdmFsdWUgPSByZWZba2V5XTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgdGhpcy5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWcpO1xuICAgICAgfVxuICAgICAgdGhpcy5lbCA9ICQodGhpcy5lbCk7XG4gICAgICBpZiAodGhpcy5jbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5lbC5hZGRDbGFzcyh0aGlzLmNsYXNzTmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRoaXMuZWwuYXR0cih0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmV2ZW50cykge1xuICAgICAgICB0aGlzLmV2ZW50cyA9IHRoaXMuY29uc3RydWN0b3IuZXZlbnRzO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmVsZW1lbnRzKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB0aGlzLmNvbnN0cnVjdG9yLmVsZW1lbnRzO1xuICAgICAgfVxuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICB3aGlsZSAocGFyZW50X3Byb3RvdHlwZSA9IGNvbnRleHQuY29uc3RydWN0b3IuX19zdXBlcl9fKSB7XG4gICAgICAgIGlmIChwYXJlbnRfcHJvdG90eXBlLmV2ZW50cykge1xuICAgICAgICAgIHRoaXMuZXZlbnRzID0gJC5leHRlbmQoe30sIHBhcmVudF9wcm90b3R5cGUuZXZlbnRzLCB0aGlzLmV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudF9wcm90b3R5cGUuZWxlbWVudHMpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gJC5leHRlbmQoe30sIHBhcmVudF9wcm90b3R5cGUuZWxlbWVudHMsIHRoaXMuZWxlbWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQgPSBwYXJlbnRfcHJvdG90eXBlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZXZlbnRzKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHModGhpcy5ldmVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZWxlbWVudHMpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoRWxlbWVudHMoKTtcbiAgICAgIH1cbiAgICAgIENvbnRyb2xsZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy50cmlnZ2VyKCdyZWxlYXNlJywgdGhpcyk7XG4gICAgICB0aGlzLmVsLnJlbW92ZSgpO1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgIHJldHVybiB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuJCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5maW5kKHNlbGVjdG9yKTtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuZGVsZWdhdGVFdmVudHMgPSBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIHZhciBldmVudE5hbWUsIGtleSwgbWF0Y2gsIG1ldGhvZCwgcmVzdWx0cywgc2VsZWN0b3I7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGtleSBpbiBldmVudHMpIHtcbiAgICAgICAgbWV0aG9kID0gZXZlbnRzW2tleV07XG4gICAgICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgbWV0aG9kID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBtZXRob2QuYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKHRoaXMpKG1ldGhvZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCF0aGlzW21ldGhvZF0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXRob2QgKyBcIiBkb2Vzbid0IGV4aXN0XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXRob2QgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF90aGlzW21ldGhvZF0uYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKHRoaXMpKG1ldGhvZCk7XG4gICAgICAgIH1cbiAgICAgICAgbWF0Y2ggPSBrZXkubWF0Y2godGhpcy5ldmVudFNwbGl0dGVyKTtcbiAgICAgICAgZXZlbnROYW1lID0gbWF0Y2hbMV07XG4gICAgICAgIHNlbGVjdG9yID0gbWF0Y2hbMl07XG4gICAgICAgIGlmIChzZWxlY3RvciA9PT0gJycpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5lbC5iaW5kKGV2ZW50TmFtZSwgbWV0aG9kKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZWwub24oZXZlbnROYW1lLCBzZWxlY3RvciwgbWV0aG9kKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5yZWZyZXNoRWxlbWVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBrZXksIHJlZiwgcmVzdWx0cywgdmFsdWU7XG4gICAgICByZWYgPSB0aGlzLmVsZW1lbnRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIHZhbHVlID0gcmVmW2tleV07XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzW3ZhbHVlXSA9IHRoaXMuJChrZXkpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHRpbWVvdXQpIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KHRoaXMucHJveHkoZnVuYyksIHRpbWVvdXQgfHwgMCk7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB0aGlzLmVsLmh0bWwoZWxlbWVudC5lbCB8fCBlbGVtZW50KTtcbiAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZSwgZWxlbWVudHMsIHJlZjtcbiAgICAgIGVsZW1lbnRzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICBlbGVtZW50cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGosIGxlbiwgcmVzdWx0cztcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSBlbGVtZW50cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGUgPSBlbGVtZW50c1tqXTtcbiAgICAgICAgICByZXN1bHRzLnB1c2goZS5lbCB8fCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0pKCk7XG4gICAgICAocmVmID0gdGhpcy5lbCkuYXBwZW5kLmFwcGx5KHJlZiwgZWxlbWVudHMpO1xuICAgICAgdGhpcy5yZWZyZXNoRWxlbWVudHMoKTtcbiAgICAgIHJldHVybiB0aGlzLmVsO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5hcHBlbmRUbyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWwuYXBwZW5kVG8oZWxlbWVudC5lbCB8fCBlbGVtZW50KTtcbiAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGUsIGVsZW1lbnRzLCByZWY7XG4gICAgICBlbGVtZW50cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgZWxlbWVudHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqLCBsZW4sIHJlc3VsdHM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBlID0gZWxlbWVudHNbal07XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGUuZWwgfHwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgICAgKHJlZiA9IHRoaXMuZWwpLnByZXBlbmQuYXBwbHkocmVmLCBlbGVtZW50cyk7XG4gICAgICB0aGlzLnJlZnJlc2hFbGVtZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB2YXIgcHJldmlvdXMsIHJlZiwgcmVmMTtcbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmVsIHx8IGVsZW1lbnQ7XG4gICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgZWxlbWVudCA9ICQudHJpbShlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIHJlZjEgPSBbdGhpcy5lbCwgJCgoKHJlZiA9ICQucGFyc2VIVE1MKGVsZW1lbnQpKSAhPSBudWxsID8gcmVmWzBdIDogdm9pZCAwKSB8fCBlbGVtZW50KV0sIHByZXZpb3VzID0gcmVmMVswXSwgdGhpcy5lbCA9IHJlZjFbMV07XG4gICAgICBwcmV2aW91cy5yZXBsYWNlV2l0aCh0aGlzLmVsKTtcbiAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHModGhpcy5ldmVudHMpO1xuICAgICAgdGhpcy5yZWZyZXNoRWxlbWVudHMoKTtcbiAgICAgIHJldHVybiB0aGlzLmVsO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29udHJvbGxlcjtcblxuICB9KShNb2R1bGUpO1xuXG4gICQgPSAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgIT09IG51bGwgPyB3aW5kb3cualF1ZXJ5IDogdm9pZCAwKSB8fCAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgIT09IG51bGwgPyB3aW5kb3cuWmVwdG8gOiB2b2lkIDApIHx8IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfTtcblxuICBjcmVhdGVPYmplY3QgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgRnVuYztcbiAgICBGdW5jID0gZnVuY3Rpb24oKSB7fTtcbiAgICBGdW5jLnByb3RvdHlwZSA9IG87XG4gICAgcmV0dXJuIG5ldyBGdW5jKCk7XG4gIH07XG5cbiAgbWFrZUFycmF5ID0gZnVuY3Rpb24oYXJncykge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLCAwKTtcbiAgfTtcblxuICBTcGluZSA9IHRoaXMuU3BpbmUgPSB7fTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFNwaW5lO1xuICB9XG5cbiAgU3BpbmUudmVyc2lvbiA9ICcxLjYuMic7XG5cbiAgU3BpbmUuJCA9ICQ7XG5cbiAgU3BpbmUuRXZlbnRzID0gRXZlbnRzO1xuXG4gIFNwaW5lLkxvZyA9IExvZztcblxuICBTcGluZS5Nb2R1bGUgPSBNb2R1bGU7XG5cbiAgU3BpbmUuQ29udHJvbGxlciA9IENvbnRyb2xsZXI7XG5cbiAgU3BpbmUuTW9kZWwgPSBNb2RlbDtcblxuICBNb2R1bGUuZXh0ZW5kLmNhbGwoU3BpbmUsIEV2ZW50cyk7XG5cbiAgTW9kdWxlLmNyZWF0ZSA9IE1vZHVsZS5zdWIgPSBDb250cm9sbGVyLmNyZWF0ZSA9IENvbnRyb2xsZXIuc3ViID0gTW9kZWwuc3ViID0gZnVuY3Rpb24oaW5zdGFuY2VzLCBzdGF0aWNzKSB7XG4gICAgdmFyIFJlc3VsdDtcbiAgICBSZXN1bHQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgICAgZXh0ZW5kKFJlc3VsdCwgc3VwZXJDbGFzcyk7XG5cbiAgICAgIGZ1bmN0aW9uIFJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFJlc3VsdDtcblxuICAgIH0pKHRoaXMpO1xuICAgIGlmIChpbnN0YW5jZXMpIHtcbiAgICAgIFJlc3VsdC5pbmNsdWRlKGluc3RhbmNlcyk7XG4gICAgfVxuICAgIGlmIChzdGF0aWNzKSB7XG4gICAgICBSZXN1bHQuZXh0ZW5kKHN0YXRpY3MpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIFJlc3VsdC51bmJpbmQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgUmVzdWx0LnVuYmluZCgpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0O1xuICB9O1xuXG4gIE1vZGVsLnNldHVwID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcykge1xuICAgIHZhciBJbnN0YW5jZTtcbiAgICBpZiAoYXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICBhdHRyaWJ1dGVzID0gW107XG4gICAgfVxuICAgIEluc3RhbmNlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICAgIGV4dGVuZChJbnN0YW5jZSwgc3VwZXJDbGFzcyk7XG5cbiAgICAgIGZ1bmN0aW9uIEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gSW5zdGFuY2UuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBJbnN0YW5jZTtcblxuICAgIH0pKHRoaXMpO1xuICAgIEluc3RhbmNlLmNvbmZpZ3VyZS5hcHBseShJbnN0YW5jZSwgW25hbWVdLmNvbmNhdChzbGljZS5jYWxsKGF0dHJpYnV0ZXMpKSk7XG4gICAgcmV0dXJuIEluc3RhbmNlO1xuICB9O1xuXG4gIFNwaW5lLkNsYXNzID0gTW9kdWxlO1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGluZS5qcy5tYXBcbiIsIi8vIHN0YXRzLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3N0YXRzLmpzXG52YXIgU3RhdHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBoKGEpe2MuYXBwZW5kQ2hpbGQoYS5kb20pO3JldHVybiBhfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBkPTA7ZDxjLmNoaWxkcmVuLmxlbmd0aDtkKyspYy5jaGlsZHJlbltkXS5zdHlsZS5kaXNwbGF5PWQ9PT1hP1wiYmxvY2tcIjpcIm5vbmVcIjtsPWF9dmFyIGw9MCxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2N1cnNvcjpwb2ludGVyO29wYWNpdHk6MC45O3otaW5kZXg6MTAwMDBcIjtjLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtrKCsrbCVjLmNoaWxkcmVuLmxlbmd0aCl9LCExKTt2YXIgZz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpLGU9ZyxhPTAscj1oKG5ldyBTdGF0cy5QYW5lbChcIkZQU1wiLFwiIzBmZlwiLFwiIzAwMlwiKSksZj1oKG5ldyBTdGF0cy5QYW5lbChcIk1TXCIsXCIjMGYwXCIsXCIjMDIwXCIpKTtcbmlmKHNlbGYucGVyZm9ybWFuY2UmJnNlbGYucGVyZm9ybWFuY2UubWVtb3J5KXZhciB0PWgobmV3IFN0YXRzLlBhbmVsKFwiTUJcIixcIiNmMDhcIixcIiMyMDFcIikpO2soMCk7cmV0dXJue1JFVklTSU9OOjE2LGRvbTpjLGFkZFBhbmVsOmgsc2hvd1BhbmVsOmssYmVnaW46ZnVuY3Rpb24oKXtnPShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCl9LGVuZDpmdW5jdGlvbigpe2ErKzt2YXIgYz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpO2YudXBkYXRlKGMtZywyMDApO2lmKGM+ZSsxRTMmJihyLnVwZGF0ZSgxRTMqYS8oYy1lKSwxMDApLGU9YyxhPTAsdCkpe3ZhciBkPXBlcmZvcm1hbmNlLm1lbW9yeTt0LnVwZGF0ZShkLnVzZWRKU0hlYXBTaXplLzEwNDg1NzYsZC5qc0hlYXBTaXplTGltaXQvMTA0ODU3Nil9cmV0dXJuIGN9LHVwZGF0ZTpmdW5jdGlvbigpe2c9dGhpcy5lbmQoKX0sZG9tRWxlbWVudDpjLHNldE1vZGU6a319O1xuU3RhdHMuUGFuZWw9ZnVuY3Rpb24oaCxrLGwpe3ZhciBjPUluZmluaXR5LGc9MCxlPU1hdGgucm91bmQsYT1lKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxyPTgwKmEsZj00OCphLHQ9MyphLHU9MiphLGQ9MyphLG09MTUqYSxuPTc0KmEscD0zMCphLHE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtxLndpZHRoPXI7cS5oZWlnaHQ9ZjtxLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDo4MHB4O2hlaWdodDo0OHB4XCI7dmFyIGI9cS5nZXRDb250ZXh0KFwiMmRcIik7Yi5mb250PVwiYm9sZCBcIis5KmErXCJweCBIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZlwiO2IudGV4dEJhc2VsaW5lPVwidG9wXCI7Yi5maWxsU3R5bGU9bDtiLmZpbGxSZWN0KDAsMCxyLGYpO2IuZmlsbFN0eWxlPWs7Yi5maWxsVGV4dChoLHQsdSk7Yi5maWxsUmVjdChkLG0sbixwKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9Ljk7Yi5maWxsUmVjdChkLG0sbixwKTtyZXR1cm57ZG9tOnEsdXBkYXRlOmZ1bmN0aW9uKGYsXG52KXtjPU1hdGgubWluKGMsZik7Zz1NYXRoLm1heChnLGYpO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0xO2IuZmlsbFJlY3QoMCwwLHIsbSk7Yi5maWxsU3R5bGU9aztiLmZpbGxUZXh0KGUoZikrXCIgXCIraCtcIiAoXCIrZShjKStcIi1cIitlKGcpK1wiKVwiLHQsdSk7Yi5kcmF3SW1hZ2UocSxkK2EsbSxuLWEscCxkLG0sbi1hLHApO2IuZmlsbFJlY3QoZCtuLWEsbSxhLHApO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0uOTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxlKCgxLWYvdikqcCkpfX19O1wib2JqZWN0XCI9PT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9U3RhdHMpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcbmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuICBpZiAoIWlzU3RyaW5nKGYpKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBpID0gMTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWonOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcbiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuICAgICAgc3RyICs9ICcgJyArIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuXG4vLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5leHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcbiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cbiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIGN0eCA9IHtcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuICB9O1xuICAvLyBsZWdhY3kuLi5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG4gICAgLy8gbGVnYWN5Li4uXG4gICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuICB9IGVsc2UgaWYgKG9wdHMpIHtcbiAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG4gICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICByZXR1cm4gc3RyO1xufVxuXG5cbmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG4gIHZhciBoYXNoID0ge307XG5cbiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGhhc2hbdmFsXSA9IHRydWU7XG4gIH0pO1xuXG4gIHJldHVybiBoYXNoO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcbiAgICAgIHZhbHVlICYmXG4gICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcbiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZnVuY3Rpb24gaXNBcnJheShhcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuZnVuY3Rpb24gcGFkKG4pIHtcbiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG59XG5cblxudmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblxuLy8gMjYgRmViIDE2OjE5OjM0XG5mdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcbiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcbn1cblxuXG4vLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcbn07XG5cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG4gKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG4gKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG4gKiAgICAgcHJvdG90eXBlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5leHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG4gIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luO1xufTtcblxuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cbiIsInZhciBpbmRleE9mID0gcmVxdWlyZSgnaW5kZXhvZicpO1xuXG52YXIgT2JqZWN0X2tleXMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKSByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHJlcy5wdXNoKGtleSlcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59O1xuXG52YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICh4cywgZm4pIHtcbiAgICBpZiAoeHMuZm9yRWFjaCkgcmV0dXJuIHhzLmZvckVhY2goZm4pXG4gICAgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZuKHhzW2ldLCBpLCB4cyk7XG4gICAgfVxufTtcblxudmFyIGRlZmluZVByb3AgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnXycsIHt9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxufSgpKTtcblxudmFyIGdsb2JhbHMgPSBbJ0FycmF5JywgJ0Jvb2xlYW4nLCAnRGF0ZScsICdFcnJvcicsICdFdmFsRXJyb3InLCAnRnVuY3Rpb24nLFxuJ0luZmluaXR5JywgJ0pTT04nLCAnTWF0aCcsICdOYU4nLCAnTnVtYmVyJywgJ09iamVjdCcsICdSYW5nZUVycm9yJyxcbidSZWZlcmVuY2VFcnJvcicsICdSZWdFeHAnLCAnU3RyaW5nJywgJ1N5bnRheEVycm9yJywgJ1R5cGVFcnJvcicsICdVUklFcnJvcicsXG4nZGVjb2RlVVJJJywgJ2RlY29kZVVSSUNvbXBvbmVudCcsICdlbmNvZGVVUkknLCAnZW5jb2RlVVJJQ29tcG9uZW50JywgJ2VzY2FwZScsXG4nZXZhbCcsICdpc0Zpbml0ZScsICdpc05hTicsICdwYXJzZUZsb2F0JywgJ3BhcnNlSW50JywgJ3VuZGVmaW5lZCcsICd1bmVzY2FwZSddO1xuXG5mdW5jdGlvbiBDb250ZXh0KCkge31cbkNvbnRleHQucHJvdG90eXBlID0ge307XG5cbnZhciBTY3JpcHQgPSBleHBvcnRzLlNjcmlwdCA9IGZ1bmN0aW9uIE5vZGVTY3JpcHQgKGNvZGUpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2NyaXB0KSkgcmV0dXJuIG5ldyBTY3JpcHQoY29kZSk7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbn07XG5cblNjcmlwdC5wcm90b3R5cGUucnVuSW5Db250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICBpZiAoIShjb250ZXh0IGluc3RhbmNlb2YgQ29udGV4dCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5lZWRzIGEgJ2NvbnRleHQnIGFyZ3VtZW50LlwiKTtcbiAgICB9XG4gICAgXG4gICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmICghaWZyYW1lLnN0eWxlKSBpZnJhbWUuc3R5bGUgPSB7fTtcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgXG4gICAgdmFyIHdpbiA9IGlmcmFtZS5jb250ZW50V2luZG93O1xuICAgIHZhciB3RXZhbCA9IHdpbi5ldmFsLCB3RXhlY1NjcmlwdCA9IHdpbi5leGVjU2NyaXB0O1xuXG4gICAgaWYgKCF3RXZhbCAmJiB3RXhlY1NjcmlwdCkge1xuICAgICAgICAvLyB3aW4uZXZhbCgpIG1hZ2ljYWxseSBhcHBlYXJzIHdoZW4gdGhpcyBpcyBjYWxsZWQgaW4gSUU6XG4gICAgICAgIHdFeGVjU2NyaXB0LmNhbGwod2luLCAnbnVsbCcpO1xuICAgICAgICB3RXZhbCA9IHdpbi5ldmFsO1xuICAgIH1cbiAgICBcbiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGNvbnRleHQpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHdpbltrZXldID0gY29udGV4dFtrZXldO1xuICAgIH0pO1xuICAgIGZvckVhY2goZ2xvYmFscywgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoY29udGV4dFtrZXldKSB7XG4gICAgICAgICAgICB3aW5ba2V5XSA9IGNvbnRleHRba2V5XTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHZhciB3aW5LZXlzID0gT2JqZWN0X2tleXMod2luKTtcblxuICAgIHZhciByZXMgPSB3RXZhbC5jYWxsKHdpbiwgdGhpcy5jb2RlKTtcbiAgICBcbiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKHdpbiksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgLy8gQXZvaWQgY29weWluZyBjaXJjdWxhciBvYmplY3RzIGxpa2UgYHRvcGAgYW5kIGB3aW5kb3dgIGJ5IG9ubHlcbiAgICAgICAgLy8gdXBkYXRpbmcgZXhpc3RpbmcgY29udGV4dCBwcm9wZXJ0aWVzIG9yIG5ldyBwcm9wZXJ0aWVzIGluIHRoZSBgd2luYFxuICAgICAgICAvLyB0aGF0IHdhcyBvbmx5IGludHJvZHVjZWQgYWZ0ZXIgdGhlIGV2YWwuXG4gICAgICAgIGlmIChrZXkgaW4gY29udGV4dCB8fCBpbmRleE9mKHdpbktleXMsIGtleSkgPT09IC0xKSB7XG4gICAgICAgICAgICBjb250ZXh0W2tleV0gPSB3aW5ba2V5XTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZm9yRWFjaChnbG9iYWxzLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghKGtleSBpbiBjb250ZXh0KSkge1xuICAgICAgICAgICAgZGVmaW5lUHJvcChjb250ZXh0LCBrZXksIHdpbltrZXldKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICBcbiAgICByZXR1cm4gcmVzO1xufTtcblxuU2NyaXB0LnByb3RvdHlwZS5ydW5JblRoaXNDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBldmFsKHRoaXMuY29kZSk7IC8vIG1heWJlLi4uXG59O1xuXG5TY3JpcHQucHJvdG90eXBlLnJ1bkluTmV3Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIGN0eCA9IFNjcmlwdC5jcmVhdGVDb250ZXh0KGNvbnRleHQpO1xuICAgIHZhciByZXMgPSB0aGlzLnJ1bkluQ29udGV4dChjdHgpO1xuXG4gICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjdHgpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNvbnRleHRba2V5XSA9IGN0eFtrZXldO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlcztcbn07XG5cbmZvckVhY2goT2JqZWN0X2tleXMoU2NyaXB0LnByb3RvdHlwZSksIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgZXhwb3J0c1tuYW1lXSA9IFNjcmlwdFtuYW1lXSA9IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgIHZhciBzID0gU2NyaXB0KGNvZGUpO1xuICAgICAgICByZXR1cm4gc1tuYW1lXS5hcHBseShzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH07XG59KTtcblxuZXhwb3J0cy5jcmVhdGVTY3JpcHQgPSBmdW5jdGlvbiAoY29kZSkge1xuICAgIHJldHVybiBleHBvcnRzLlNjcmlwdChjb2RlKTtcbn07XG5cbmV4cG9ydHMuY3JlYXRlQ29udGV4dCA9IFNjcmlwdC5jcmVhdGVDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgY29weSA9IG5ldyBDb250ZXh0KCk7XG4gICAgaWYodHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvckVhY2goT2JqZWN0X2tleXMoY29udGV4dCksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGNvcHlba2V5XSA9IGNvbnRleHRba2V5XTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xufTtcbiJdfQ==
